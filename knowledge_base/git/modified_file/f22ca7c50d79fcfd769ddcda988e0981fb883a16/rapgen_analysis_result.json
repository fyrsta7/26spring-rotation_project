{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/f22ca7c50d79fcfd769ddcda988e0981fb883a16",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/f22ca7c50d79fcfd769ddcda988e0981fb883a16/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/f22ca7c50d79fcfd769ddcda988e0981fb883a16/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/f22ca7c50d79fcfd769ddcda988e0981fb883a16/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 135,
          "old_api": "find_pack_by_old_num",
          "new_api": "strtoul",
          "old_text": "find_pack_by_old_num(num)",
          "new_text": "strtoul(cp, &ep, 10)",
          "old_line_content": "\t\tthat = find_pack_by_old_num(num);",
          "new_line_content": "\tnum = strtoul(cp, &ep, 10);",
          "content_same": false
        },
        {
          "line": 171,
          "old_api": "add_head_def",
          "new_api": "strtoul",
          "old_text": "add_head_def(this, sha1)",
          "new_text": "strtoul(cp, &ep, 10)",
          "old_line_content": "\treturn add_head_def(this, sha1);",
          "new_line_content": "\tnum = strtoul(cp, &ep, 10);",
          "content_same": false
        },
        {
          "line": 198,
          "old_api": "parse_depend_def",
          "new_api": "strlen",
          "old_text": "parse_depend_def(line)",
          "new_text": "strlen(line)",
          "old_line_content": "\t\t\tif (parse_depend_def(line))",
          "new_line_content": "\t\tint len = strlen(line);",
          "content_same": false
        },
        {
          "line": 292,
          "old_api": "xcalloc",
          "new_api": "strncmp",
          "old_text": "xcalloc(1, sizeof(struct pack_info) + num_pack)",
          "new_text": "strncmp(p->pack_name + objdirlen, \"/pack/\", 6)",
          "old_line_content": "\t\tinfo[i] = xcalloc(1, sizeof(struct pack_info) + num_pack);",
          "new_line_content": "\t\t    strncmp(p->pack_name + objdirlen, \"/pack/\", 6))",
          "content_same": false
        },
        {
          "line": 299,
          "old_api": "read_pack_info_file",
          "new_api": "strncmp",
          "old_text": "read_pack_info_file(infofile)",
          "new_text": "strncmp(p->pack_name, objdir, objdirlen)",
          "old_line_content": "\t\tstale = read_pack_info_file(infofile);",
          "new_line_content": "\t\tif (strncmp(p->pack_name, objdir, objdirlen) ||",
          "content_same": false
        },
        {
          "line": 338,
          "old_api": "memcpy",
          "new_api": "memset",
          "old_text": "memcpy(info[i]->dep, dep_temp, num_pack)",
          "new_text": "memset(dep_temp, 0, num_pack)",
          "old_line_content": "\t\tmemcpy(info[i]->dep, dep_temp, num_pack);",
          "new_line_content": "\t\tmemset(dep_temp, 0, num_pack);",
          "content_same": false
        },
        {
          "line": 350,
          "old_api": "fprintf",
          "new_api": "free",
          "old_text": "fprintf(fp, \"D %1d\", i)",
          "new_text": "free(dep_temp)",
          "old_line_content": "\t\tfprintf(fp, \"D %1d\", i);",
          "new_line_content": "\tfree(dep_temp);",
          "content_same": false
        },
        {
          "line": 364,
          "old_api": "sha1_to_hex",
          "new_api": "fprintf",
          "old_text": "sha1_to_hex(this->head[j])",
          "new_text": "fprintf(fp, \" %1d\", j)",
          "old_line_content": "\t\t\t\ti, sha1_to_hex(this->head[j]), o->type);",
          "new_line_content": "\t\t\tfprintf(fp, \" %1d\", j);",
          "content_same": false
        },
        {
          "line": 429,
          "old_api": "nth_packed_object_sha1",
          "new_api": "die",
          "old_text": "nth_packed_object_sha1(p, i, sha1)",
          "new_text": "die(\"corrupt pack file %s?\", p->pack_name)",
          "old_line_content": "\t\tif (nth_packed_object_sha1(p, i, sha1))",
          "new_line_content": "\t\t\tdie(\"corrupt pack file %s?\", p->pack_name);",
          "content_same": false
        },
        {
          "line": 430,
          "old_api": "die",
          "new_api": "lookup_object",
          "old_text": "die(\"corrupt pack file %s?\", p->pack_name)",
          "new_text": "lookup_object(sha1)",
          "old_line_content": "\t\t\tdie(\"corrupt pack file %s?\", p->pack_name);",
          "new_line_content": "\t\tif ((o = lookup_object(sha1)) == NULL)",
          "content_same": false
        },
        {
          "line": 431,
          "old_api": "lookup_object",
          "new_api": "sha1_to_hex",
          "old_text": "lookup_object(sha1)",
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "\t\tif ((o = lookup_object(sha1)) == NULL)",
          "new_line_content": "\t\t\tdie(\"cannot parse %s\", sha1_to_hex(sha1));",
          "content_same": false
        },
        {
          "line": 485,
          "old_api": "error",
          "new_api": "get_object_directory",
          "old_text": "error(\"cannot open %s\", name)",
          "new_text": "get_object_directory()",
          "old_line_content": "\t\treturn error(\"cannot open %s\", name);",
          "new_line_content": "\tnamelen = sprintf(infofile, \"%s/info/packs\", get_object_directory());",
          "content_same": false
        },
        {
          "line": 486,
          "old_api": "write_pack_info_file",
          "new_api": "strcpy",
          "old_text": "write_pack_info_file(fp)",
          "new_text": "strcpy(name, infofile)",
          "old_line_content": "\twrite_pack_info_file(fp);",
          "new_line_content": "\tstrcpy(name, infofile);",
          "content_same": false
        },
        {
          "line": 487,
          "old_api": "fclose",
          "new_api": "strcpy",
          "old_text": "fclose(fp)",
          "new_text": "strcpy(name + namelen, \"+\")",
          "old_line_content": "\tfclose(fp);",
          "new_line_content": "\tstrcpy(name + namelen, \"+\");",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 512,
          "old_api": null,
          "new_api": "update_info_packs",
          "old_text": null,
          "new_text": "update_info_packs(force)",
          "old_line_content": "",
          "new_line_content": "\terrs = errs | update_info_packs(force);",
          "content_same": false
        },
        {
          "line": 137,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"invalid input %s\", line)",
          "old_line_content": "\t\t\t/* The pack this one depends on does not",
          "new_line_content": "\t\treturn error(\"invalid input %s\", line);",
          "content_same": false
        },
        {
          "line": 138,
          "old_api": null,
          "new_api": "find_pack_by_old_num",
          "old_text": null,
          "new_text": "find_pack_by_old_num(num)",
          "old_line_content": "\t\t\t * exist; this should not happen because",
          "new_line_content": "\tthis = find_pack_by_old_num(num);",
          "content_same": false
        },
        {
          "line": 394,
          "old_api": null,
          "new_api": "add_head_def",
          "old_text": null,
          "new_text": "add_head_def(info[pack_ix], o->sha1)",
          "old_line_content": "\t\t\tstruct packed_git *p = info[i]->p;",
          "new_line_content": "\t\tadd_head_def(info[pack_ix], o->sha1);",
          "content_same": false
        },
        {
          "line": 142,
          "old_api": null,
          "new_api": "strtoul",
          "old_text": null,
          "new_text": "strtoul(cp, &ep, 10)",
          "old_line_content": "\t\t\t */",
          "new_line_content": "\t\tnum = strtoul(cp, &ep, 10);",
          "content_same": false
        },
        {
          "line": 145,
          "old_api": null,
          "new_api": "find_pack_by_old_num",
          "old_text": null,
          "new_text": "find_pack_by_old_num(num)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tthat = find_pack_by_old_num(num);",
          "content_same": false
        },
        {
          "line": 406,
          "old_api": null,
          "new_api": "find_pack_entry_one",
          "old_text": null,
          "new_text": "find_pack_entry_one(o->sha1, &ent, p)",
          "old_line_content": "{",
          "new_line_content": "\t\t\tif (find_pack_entry_one(o->sha1, &ent, p)) {",
          "content_same": false
        },
        {
          "line": 283,
          "old_api": null,
          "new_api": "get_object_directory",
          "old_text": null,
          "new_text": "get_object_directory()",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\tobjdir = get_object_directory();",
          "content_same": false
        },
        {
          "line": 284,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(objdir)",
          "old_line_content": "\t\ti++;",
          "new_line_content": "\tobjdirlen = strlen(objdir);",
          "content_same": false
        },
        {
          "line": 286,
          "old_api": null,
          "new_api": "prepare_packed_git",
          "old_text": null,
          "new_text": "prepare_packed_git()",
          "old_line_content": "\tnum_pack = i;",
          "new_line_content": "\tprepare_packed_git();",
          "content_same": false
        },
        {
          "line": 291,
          "old_api": null,
          "new_api": "strncmp",
          "old_text": null,
          "new_text": "strncmp(p->pack_name, objdir, objdirlen)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tif (strncmp(p->pack_name, objdir, objdirlen) ||",
          "content_same": false
        },
        {
          "line": 422,
          "old_api": null,
          "new_api": "num_packed_objects",
          "old_text": null,
          "new_text": "num_packed_objects(p)",
          "old_line_content": "\t\tfor (ref = o->refs; ref; ref = ref->next)",
          "new_line_content": "\tint num = num_packed_objects(p);",
          "content_same": false
        },
        {
          "line": 297,
          "old_api": null,
          "new_api": "xcalloc",
          "old_text": null,
          "new_text": "xcalloc(num_pack, sizeof(struct pack_info *))",
          "old_line_content": "",
          "new_line_content": "\tinfo = xcalloc(num_pack, sizeof(struct pack_info *));",
          "content_same": false
        },
        {
          "line": 428,
          "old_api": null,
          "new_api": "nth_packed_object_sha1",
          "old_text": null,
          "new_text": "nth_packed_object_sha1(p, i, sha1)",
          "old_line_content": "\tfor (i = 0; i < num; i++) {",
          "new_line_content": "\t\tif (nth_packed_object_sha1(p, i, sha1))",
          "content_same": false
        },
        {
          "line": 173,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"invalid input ix %s\", line)",
          "old_line_content": "",
          "new_line_content": "\t\treturn error(\"invalid input ix %s\", line);",
          "content_same": false
        },
        {
          "line": 174,
          "old_api": null,
          "new_api": "find_pack_by_old_num",
          "old_text": null,
          "new_text": "find_pack_by_old_num(num)",
          "old_line_content": "/* Returns non-zero when we detect that the info in the",
          "new_line_content": "\tthis = find_pack_by_old_num(num);",
          "content_same": false
        },
        {
          "line": 302,
          "old_api": null,
          "new_api": "xcalloc",
          "old_text": null,
          "new_text": "xcalloc(1, sizeof(struct pack_info) + num_pack)",
          "old_line_content": "",
          "new_line_content": "\t\tinfo[i] = xcalloc(1, sizeof(struct pack_info) + num_pack);",
          "content_same": false
        },
        {
          "line": 177,
          "old_api": null,
          "new_api": "get_sha1_hex",
          "old_text": null,
          "new_text": "get_sha1_hex(ep, sha1)",
          "old_line_content": "static int read_pack_info_file(const char *infofile)",
          "new_line_content": "\tif (get_sha1_hex(ep, sha1) || ep[40] != ' ')",
          "content_same": false
        },
        {
          "line": 178,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"invalid input sha1 %s (%s)\", line, ep)",
          "old_line_content": "{",
          "new_line_content": "\t\treturn error(\"invalid input sha1 %s (%s)\", line, ep);",
          "content_same": false
        },
        {
          "line": 179,
          "old_api": null,
          "new_api": "parse_object_cheap",
          "old_text": null,
          "new_text": "parse_object_cheap(sha1)",
          "old_line_content": "\tFILE *fp;",
          "new_line_content": "\tif ((o = parse_object_cheap(sha1)) == NULL)",
          "content_same": false
        },
        {
          "line": 180,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"no such object: %s\", line)",
          "old_line_content": "\tchar line[1000];",
          "new_line_content": "\t\treturn error(\"no such object: %s\", line);",
          "content_same": false
        },
        {
          "line": 181,
          "old_api": null,
          "new_api": "add_head_def",
          "old_text": null,
          "new_text": "add_head_def(this, sha1)",
          "old_line_content": "\tint old_cnt = 0;",
          "new_line_content": "\treturn add_head_def(this, sha1);",
          "content_same": false
        },
        {
          "line": 309,
          "old_api": null,
          "new_api": "read_pack_info_file",
          "old_text": null,
          "new_text": "read_pack_info_file(infofile)",
          "old_line_content": "\t\tif (info[i]->old_num < 0)",
          "new_line_content": "\t\tstale = read_pack_info_file(infofile);",
          "content_same": false
        },
        {
          "line": 316,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(info[i]->dep, 0, num_pack)",
          "old_line_content": "",
          "new_line_content": "\t\t\tmemset(info[i]->dep, 0, num_pack);",
          "content_same": false
        },
        {
          "line": 320,
          "old_api": null,
          "new_api": "get_latest_commit_date",
          "old_text": null,
          "new_text": "get_latest_commit_date(info[i]->p)",
          "old_line_content": "\tdep_temp = NULL;",
          "new_line_content": "\t\t\tinfo[i]->latest = get_latest_commit_date(info[i]->p);",
          "content_same": false
        },
        {
          "line": 193,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(infofile, \"r\")",
          "old_line_content": "\t\tcase 'P': /* P name */",
          "new_line_content": "\tfp = fopen(infofile, \"r\");",
          "content_same": false
        },
        {
          "line": 66,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(e->name)",
          "old_line_content": "static struct pack_info *find_pack_by_name(const char *name)",
          "new_line_content": "\t\t\tfree(e->name);",
          "content_same": false
        },
        {
          "line": 323,
          "old_api": null,
          "new_api": "qsort",
          "old_text": null,
          "new_text": "qsort(info, num_pack, sizeof(info[0]), compare_info)",
          "old_line_content": "",
          "new_line_content": "\tqsort(info, num_pack, sizeof(info[0]), compare_info);",
          "content_same": false
        },
        {
          "line": 449,
          "old_api": null,
          "new_api": "nth_packed_object_sha1",
          "old_text": null,
          "new_text": "nth_packed_object_sha1(p, i, sha1)",
          "old_line_content": "}",
          "new_line_content": "\t\tif (nth_packed_object_sha1(p, i, sha1))",
          "content_same": false
        },
        {
          "line": 69,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(e)",
          "old_line_content": "\tfor (i = 0; i < num_pack; i++) {",
          "new_line_content": "\t\t\tfree(e);",
          "content_same": false
        },
        {
          "line": 197,
          "old_api": null,
          "new_api": "fgets",
          "old_text": null,
          "new_text": "fgets(line, sizeof(line), fp)",
          "old_line_content": "\t\tcase 'D': /* D ix dep-ix1 dep-ix2... */",
          "new_line_content": "\twhile (fgets(line, sizeof(line), fp)) {",
          "content_same": false
        },
        {
          "line": 450,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"corrupt pack file %s?\", p->pack_name)",
          "old_line_content": "",
          "new_line_content": "\t\t\tdie(\"corrupt pack file %s?\", p->pack_name);",
          "content_same": false
        },
        {
          "line": 451,
          "old_api": null,
          "new_api": "lookup_object",
          "old_text": null,
          "new_text": "lookup_object(sha1)",
          "old_line_content": "static void find_pack_info(void)",
          "new_line_content": "\t\tif ((o = lookup_object(sha1)) == NULL)",
          "content_same": false
        },
        {
          "line": 452,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "{",
          "new_line_content": "\t\t\tdie(\"cannot find %s\", sha1_to_hex(sha1));",
          "content_same": false
        },
        {
          "line": 454,
          "old_api": null,
          "new_api": "show",
          "old_text": null,
          "new_text": "show(o, pack_ix)",
          "old_line_content": "\tfor (i = 0; i < num_pack; i++) {",
          "new_line_content": "\t\tshow(o, pack_ix);",
          "content_same": false
        },
        {
          "line": 456,
          "old_api": null,
          "new_api": "show",
          "old_text": null,
          "new_text": "show(ref->item, pack_ix)",
          "old_line_content": "\t\t * in a pack will stay as head, so is the set of missing",
          "new_line_content": "\t\t\tshow(ref->item, pack_ix);",
          "content_same": false
        },
        {
          "line": 204,
          "old_api": null,
          "new_api": "parse_pack_def",
          "old_text": null,
          "new_text": "parse_pack_def(line, old_cnt++)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\t\tif (parse_pack_def(line, old_cnt++))",
          "content_same": false
        },
        {
          "line": 208,
          "old_api": null,
          "new_api": "parse_depend_def",
          "old_text": null,
          "new_text": "parse_depend_def(line)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tif (parse_depend_def(line))",
          "content_same": false
        },
        {
          "line": 337,
          "old_api": null,
          "new_api": "xmalloc",
          "old_text": null,
          "new_text": "xmalloc(num_pack)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tdep_temp = xmalloc(num_pack);",
          "content_same": false
        },
        {
          "line": 82,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(p->pack_name + objdirlen + 6, name)",
          "old_line_content": "\t\tif (info[i]->old_num == old_num)",
          "new_line_content": "\t\tif (!strcmp(p->pack_name + objdirlen + 6, name))",
          "content_same": false
        },
        {
          "line": 212,
          "old_api": null,
          "new_api": "parse_head_def",
          "old_text": null,
          "new_text": "parse_head_def(line)",
          "old_line_content": " out_stale:",
          "new_line_content": "\t\t\tif (parse_head_def(line))",
          "content_same": false
        },
        {
          "line": 343,
          "old_api": null,
          "new_api": "find_pack_by_old_num",
          "old_text": null,
          "new_text": "find_pack_by_old_num(old)",
          "old_line_content": "static void write_pack_info_file(FILE *fp)",
          "new_line_content": "\t\t\tbase = find_pack_by_old_num(old);",
          "content_same": false
        },
        {
          "line": 216,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"unrecognized: %s\", line)",
          "old_line_content": "",
          "new_line_content": "\t\t\terror(\"unrecognized: %s\", line);",
          "content_same": false
        },
        {
          "line": 345,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"internal error renumbering\")",
          "old_line_content": "\tint i, j;",
          "new_line_content": "\t\t\t\tdie(\"internal error renumbering\");",
          "content_same": false
        },
        {
          "line": 474,
          "old_api": null,
          "new_api": "find_pack_info_one",
          "old_text": null,
          "new_text": "find_pack_info_one(i)",
          "old_line_content": "",
          "new_line_content": "\t\tfind_pack_info_one(i);",
          "content_same": false
        },
        {
          "line": 220,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": " */",
          "new_line_content": "\tfclose(fp);",
          "content_same": false
        },
        {
          "line": 348,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(info[i]->dep, dep_temp, num_pack)",
          "old_line_content": "",
          "new_line_content": "\t\tmemcpy(info[i]->dep, dep_temp, num_pack);",
          "content_same": false
        },
        {
          "line": 223,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "\tunsigned char sha1[20];",
          "new_line_content": "\tfclose(fp);",
          "content_same": false
        },
        {
          "line": 100,
          "old_api": null,
          "new_api": "alloc_nr",
          "old_text": null,
          "new_text": "alloc_nr(this->nr_alloc)",
          "old_line_content": "static int parse_pack_def(const char *line, int old_cnt)",
          "new_line_content": "\t\tthis->nr_alloc = alloc_nr(this->nr_alloc);",
          "content_same": false
        },
        {
          "line": 101,
          "old_api": null,
          "new_api": "xrealloc",
          "old_text": null,
          "new_text": "xrealloc(this->head, this->nr_alloc * 20)",
          "old_line_content": "{",
          "new_line_content": "\t\tthis->head = xrealloc(this->head, this->nr_alloc * 20);",
          "content_same": false
        },
        {
          "line": 357,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(fp, \"P %s\\n\", info[i]->p->pack_name + objdirlen + 6)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tfprintf(fp, \"P %s\\n\", info[i]->p->pack_name + objdirlen + 6);",
          "content_same": false
        },
        {
          "line": 103,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(this->head[this->nr_heads++], sha1, 20)",
          "old_line_content": "\tif (i) {",
          "new_line_content": "\tmemcpy(this->head[this->nr_heads++], sha1, 20);",
          "content_same": false
        },
        {
          "line": 360,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(fp, \"D %1d\", i)",
          "old_line_content": "\t\tstruct pack_info *this = info[i];",
          "new_line_content": "\t\tfprintf(fp, \"D %1d\", i);",
          "content_same": false
        },
        {
          "line": 489,
          "old_api": null,
          "new_api": "init_pack_info",
          "old_text": null,
          "new_text": "init_pack_info(infofile, force)",
          "old_line_content": "\treturn 0;",
          "new_line_content": "\tinit_pack_info(infofile, force);",
          "content_same": false
        },
        {
          "line": 490,
          "old_api": null,
          "new_api": "find_pack_info",
          "old_text": null,
          "new_text": "find_pack_info()",
          "old_line_content": "}",
          "new_line_content": "\tfind_pack_info();",
          "content_same": false
        },
        {
          "line": 235,
          "old_api": null,
          "new_api": "num_packed_objects",
          "old_text": null,
          "new_text": "num_packed_objects(p)",
          "old_line_content": "\t\t\tstruct commit *commit = (struct commit *)o;",
          "new_line_content": "\tint num = num_packed_objects(p);",
          "content_same": false
        },
        {
          "line": 492,
          "old_api": null,
          "new_api": "safe_create_leading_directories",
          "old_text": null,
          "new_text": "safe_create_leading_directories(name)",
          "old_line_content": "/* public */",
          "new_line_content": "\tsafe_create_leading_directories(name);",
          "content_same": false
        },
        {
          "line": 493,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(name, \"w\")",
          "old_line_content": "int update_server_info(int force)",
          "new_line_content": "\tfp = fopen(name, \"w\");",
          "content_same": false
        },
        {
          "line": 366,
          "old_api": null,
          "new_api": "fputc",
          "old_text": null,
          "new_text": "fputc('\\n', fp)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tfputc('\\n', fp);",
          "content_same": false
        },
        {
          "line": 495,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"cannot open %s\", name)",
          "old_line_content": "\t/* We would add more dumb-server support files later,",
          "new_line_content": "\t\treturn error(\"cannot open %s\", name);",
          "content_same": false
        },
        {
          "line": 112,
          "old_api": null,
          "new_api": "find_pack_by_name",
          "old_text": null,
          "new_text": "find_pack_by_name(line + 2)",
          "old_line_content": "\t}",
          "new_line_content": "\tstruct pack_info *i = find_pack_by_name(line + 2);",
          "content_same": false
        },
        {
          "line": 240,
          "old_api": null,
          "new_api": "nth_packed_object_sha1",
          "old_text": null,
          "new_text": "nth_packed_object_sha1(p, i, sha1)",
          "old_line_content": "\treturn latest;",
          "new_line_content": "\t\tif (nth_packed_object_sha1(p, i, sha1))",
          "content_same": false
        },
        {
          "line": 241,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"corrupt pack file %s?\", p->pack_name)",
          "old_line_content": "}",
          "new_line_content": "\t\t\tdie(\"corrupt pack file %s?\", p->pack_name);",
          "content_same": false
        },
        {
          "line": 242,
          "old_api": null,
          "new_api": "parse_object_cheap",
          "old_text": null,
          "new_text": "parse_object_cheap(sha1)",
          "old_line_content": "",
          "new_line_content": "\t\tif ((o = parse_object_cheap(sha1)) == NULL)",
          "content_same": false
        },
        {
          "line": 243,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "static int compare_info(const void *a_, const void *b_)",
          "new_line_content": "\t\t\tdie(\"cannot parse %s\", sha1_to_hex(sha1));",
          "content_same": false
        },
        {
          "line": 372,
          "old_api": null,
          "new_api": "lookup_object",
          "old_text": null,
          "new_text": "lookup_object(this->head[j])",
          "old_line_content": "#define EMITTED   04",
          "new_line_content": "\t\t\tstruct object *o = lookup_object(this->head[j]);",
          "content_same": false
        },
        {
          "line": 373,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(fp, \"T %1d %s %s\\n\",\n\t\t\t\ti, sha1_to_hex(this->head[j]), o->type)",
          "old_line_content": "",
          "new_line_content": "\t\t\tfprintf(fp, \"T %1d %s %s\\n\",",
          "content_same": false
        },
        {
          "line": 374,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(this->head[j])",
          "old_line_content": "static void show(struct object *o, int pack_ix)",
          "new_line_content": "\t\t\t\ti, sha1_to_hex(this->head[j]), o->type);",
          "content_same": false
        },
        {
          "line": 496,
          "old_api": null,
          "new_api": "write_pack_info_file",
          "old_text": null,
          "new_text": "write_pack_info_file(fp)",
          "old_line_content": "\t * including index of available pack files and their",
          "new_line_content": "\twrite_pack_info_file(fp);",
          "content_same": false
        },
        {
          "line": 497,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "\t * intended audiences.",
          "new_line_content": "\tfclose(fp);",
          "content_same": false
        },
        {
          "line": 498,
          "old_api": null,
          "new_api": "rename",
          "old_text": null,
          "new_text": "rename(name, infofile)",
          "old_line_content": "\t */",
          "new_line_content": "\trename(name, infofile);",
          "content_same": false
        },
        {
          "line": 511,
          "old_api": null,
          "new_api": "update_info_refs",
          "old_text": null,
          "new_text": "update_info_refs(force)",
          "old_line_content": "",
          "new_line_content": "\terrs = errs | update_info_refs(force);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 128,
          "old_api": "find_pack_by_old_num",
          "new_api": null,
          "old_text": "find_pack_by_old_num(num)",
          "new_text": null,
          "old_line_content": "\tthis = find_pack_by_old_num(num);",
          "new_line_content": "static int parse_depend_def(char *line)",
          "content_same": false
        },
        {
          "line": 384,
          "old_api": "add_head_def",
          "new_api": null,
          "old_text": "add_head_def(info[pack_ix], o->sha1)",
          "new_text": null,
          "old_line_content": "\t\tadd_head_def(info[pack_ix], o->sha1);",
          "new_line_content": "static void show(struct object *o, int pack_ix)",
          "content_same": false
        },
        {
          "line": 132,
          "old_api": "strtoul",
          "new_api": null,
          "old_text": "strtoul(cp, &ep, 10)",
          "new_text": null,
          "old_line_content": "\t\tnum = strtoul(cp, &ep, 10);",
          "new_line_content": "\tstruct pack_info *this, *that;",
          "content_same": false
        },
        {
          "line": 396,
          "old_api": "find_pack_entry_one",
          "new_api": null,
          "old_text": "find_pack_entry_one(o->sha1, &ent, p)",
          "new_text": null,
          "old_line_content": "\t\t\tif (find_pack_entry_one(o->sha1, &ent, p)) {",
          "new_line_content": "\t\tint i;",
          "content_same": false
        },
        {
          "line": 273,
          "old_api": "get_object_directory",
          "new_api": null,
          "old_text": "get_object_directory()",
          "new_text": null,
          "old_line_content": "\tobjdir = get_object_directory();",
          "new_line_content": "\t\treturn 1;",
          "content_same": false
        },
        {
          "line": 274,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(objdir)",
          "new_text": null,
          "old_line_content": "\tobjdirlen = strlen(objdir);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 276,
          "old_api": "prepare_packed_git",
          "new_api": null,
          "old_text": "prepare_packed_git()",
          "new_text": null,
          "old_line_content": "\tprepare_packed_git();",
          "new_line_content": "static void init_pack_info(const char *infofile, int force)",
          "content_same": false
        },
        {
          "line": 281,
          "old_api": "strncmp",
          "new_api": null,
          "old_text": "strncmp(p->pack_name, objdir, objdirlen)",
          "new_text": null,
          "old_line_content": "\t\tif (strncmp(p->pack_name, objdir, objdirlen) ||",
          "new_line_content": "\tchar *dep_temp;",
          "content_same": false
        },
        {
          "line": 282,
          "old_api": "strncmp",
          "new_api": null,
          "old_text": "strncmp(p->pack_name + objdirlen, \"/pack/\", 6)",
          "new_text": null,
          "old_line_content": "\t\t    strncmp(p->pack_name + objdirlen, \"/pack/\", 6))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 412,
          "old_api": "num_packed_objects",
          "new_api": null,
          "old_text": "num_packed_objects(p)",
          "new_text": null,
          "old_line_content": "\tint num = num_packed_objects(p);",
          "new_line_content": "\to->flags |= EMITTED;",
          "content_same": false
        },
        {
          "line": 287,
          "old_api": "xcalloc",
          "new_api": null,
          "old_text": "xcalloc(num_pack, sizeof(struct pack_info *))",
          "new_text": null,
          "old_line_content": "\tinfo = xcalloc(num_pack, sizeof(struct pack_info *));",
          "new_line_content": "\tfor (p = packed_git; p; p = p->next) {",
          "content_same": false
        },
        {
          "line": 161,
          "old_api": "strtoul",
          "new_api": null,
          "old_text": "strtoul(cp, &ep, 10)",
          "new_text": null,
          "old_line_content": "\tnum = strtoul(cp, &ep, 10);",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 289,
          "old_api": "strncmp",
          "new_api": null,
          "old_text": "strncmp(p->pack_name, objdir, objdirlen)",
          "new_text": null,
          "old_line_content": "\t\tif (strncmp(p->pack_name, objdir, objdirlen) ||",
          "new_line_content": "\t\t * not available to the pullers in general.",
          "content_same": false
        },
        {
          "line": 163,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"invalid input ix %s\", line)",
          "new_text": null,
          "old_line_content": "\t\treturn error(\"invalid input ix %s\", line);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 164,
          "old_api": "find_pack_by_old_num",
          "new_api": null,
          "old_text": "find_pack_by_old_num(num)",
          "new_text": null,
          "old_line_content": "\tthis = find_pack_by_old_num(num);",
          "new_line_content": "\tunsigned char sha1[20];",
          "content_same": false
        },
        {
          "line": 418,
          "old_api": "nth_packed_object_sha1",
          "new_api": null,
          "old_text": "nth_packed_object_sha1(p, i, sha1)",
          "new_text": null,
          "old_line_content": "\t\tif (nth_packed_object_sha1(p, i, sha1))",
          "new_line_content": "\tstruct object *o;",
          "content_same": false
        },
        {
          "line": 419,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"corrupt pack file %s?\", p->pack_name)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"corrupt pack file %s?\", p->pack_name);",
          "new_line_content": "\tstruct object_list *ref;",
          "content_same": false
        },
        {
          "line": 167,
          "old_api": "get_sha1_hex",
          "new_api": null,
          "old_text": "get_sha1_hex(ep, sha1)",
          "new_text": null,
          "old_line_content": "\tif (get_sha1_hex(ep, sha1) || ep[40] != ' ')",
          "new_line_content": "\tstruct pack_info *this;",
          "content_same": false
        },
        {
          "line": 168,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"invalid input sha1 %s (%s)\", line, ep)",
          "new_text": null,
          "old_line_content": "\t\treturn error(\"invalid input sha1 %s (%s)\", line, ep);",
          "new_line_content": "\tstruct object *o;",
          "content_same": false
        },
        {
          "line": 169,
          "old_api": "parse_object_cheap",
          "new_api": null,
          "old_text": "parse_object_cheap(sha1)",
          "new_text": null,
          "old_line_content": "\tif ((o = parse_object_cheap(sha1)) == NULL)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 170,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"no such object: %s\", line)",
          "new_text": null,
          "old_line_content": "\t\treturn error(\"no such object: %s\", line);",
          "new_line_content": "\tcp = line + 2;",
          "content_same": false
        },
        {
          "line": 420,
          "old_api": "lookup_object",
          "new_api": null,
          "old_text": "lookup_object(sha1)",
          "new_text": null,
          "old_line_content": "\t\tif ((o = lookup_object(sha1)) == NULL)",
          "new_line_content": "\tint i;",
          "content_same": false
        },
        {
          "line": 421,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(sha1)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"cannot parse %s\", sha1_to_hex(sha1));",
          "new_line_content": "\tstruct packed_git *p = info[pack_ix]->p;",
          "content_same": false
        },
        {
          "line": 432,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(sha1)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"cannot find %s\", sha1_to_hex(sha1));",
          "new_line_content": "\t\tfor (ref = o->refs; ref; ref = ref->next)",
          "content_same": false
        },
        {
          "line": 306,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(info[i]->dep, 0, num_pack)",
          "new_text": null,
          "old_line_content": "\t\t\tmemset(info[i]->dep, 0, num_pack);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 310,
          "old_api": "get_latest_commit_date",
          "new_api": null,
          "old_text": "get_latest_commit_date(info[i]->p)",
          "new_text": null,
          "old_line_content": "\t\t\tinfo[i]->latest = get_latest_commit_date(info[i]->p);",
          "new_line_content": "\telse",
          "content_same": false
        },
        {
          "line": 183,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(infofile, \"r\")",
          "new_text": null,
          "old_line_content": "\tfp = fopen(infofile, \"r\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 313,
          "old_api": "qsort",
          "new_api": null,
          "old_text": "qsort(info, num_pack, sizeof(info[0]), compare_info)",
          "new_text": null,
          "old_line_content": "\tqsort(info, num_pack, sizeof(info[0]), compare_info);",
          "new_line_content": "\tfor (i = 0; i < num_pack; i++) {",
          "content_same": false
        },
        {
          "line": 187,
          "old_api": "fgets",
          "new_api": null,
          "old_text": "fgets(line, sizeof(line), fp)",
          "new_text": null,
          "old_line_content": "\twhile (fgets(line, sizeof(line), fp)) {",
          "new_line_content": "static int read_pack_info_file(const char *infofile)",
          "content_same": false
        },
        {
          "line": 188,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(line)",
          "new_text": null,
          "old_line_content": "\t\tint len = strlen(line);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 444,
          "old_api": "show",
          "new_api": null,
          "old_text": "show(o, pack_ix)",
          "new_text": null,
          "old_line_content": "\t\tshow(o, pack_ix);",
          "new_line_content": "\t\t\tref->item->flags |= REFERENCED;",
          "content_same": false
        },
        {
          "line": 446,
          "old_api": "show",
          "new_api": null,
          "old_text": "show(ref->item, pack_ix)",
          "new_text": null,
          "old_line_content": "\t\t\tshow(ref->item, pack_ix);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 194,
          "old_api": "parse_pack_def",
          "new_api": null,
          "old_text": "parse_pack_def(line, old_cnt++)",
          "new_text": null,
          "old_line_content": "\t\t\tif (parse_pack_def(line, old_cnt++))",
          "new_line_content": "\tif (!fp)",
          "content_same": false
        },
        {
          "line": 327,
          "old_api": "xmalloc",
          "new_api": null,
          "old_text": "xmalloc(num_pack)",
          "new_text": null,
          "old_line_content": "\t\t\tdep_temp = xmalloc(num_pack);",
          "new_line_content": "\t/* we need to fix up the dependency information",
          "content_same": false
        },
        {
          "line": 72,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(p->pack_name + objdirlen + 6, name)",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(p->pack_name + objdirlen + 6, name))",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 328,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(dep_temp, 0, num_pack)",
          "new_text": null,
          "old_line_content": "\t\tmemset(dep_temp, 0, num_pack);",
          "new_line_content": "\t * for the old ones.",
          "content_same": false
        },
        {
          "line": 202,
          "old_api": "parse_head_def",
          "new_api": null,
          "old_text": "parse_head_def(line)",
          "new_text": null,
          "old_line_content": "\t\t\tif (parse_head_def(line))",
          "new_line_content": "\t\tswitch (line[0]) {",
          "content_same": false
        },
        {
          "line": 333,
          "old_api": "find_pack_by_old_num",
          "new_api": null,
          "old_text": "find_pack_by_old_num(old)",
          "new_text": null,
          "old_line_content": "\t\t\tbase = find_pack_by_old_num(old);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 206,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"unrecognized: %s\", line)",
          "new_text": null,
          "old_line_content": "\t\t\terror(\"unrecognized: %s\", line);",
          "new_line_content": "\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 335,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"internal error renumbering\")",
          "new_text": null,
          "old_line_content": "\t\t\t\tdie(\"internal error renumbering\");",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 464,
          "old_api": "find_pack_info_one",
          "new_api": null,
          "old_text": "find_pack_info_one(i)",
          "new_text": null,
          "old_line_content": "\t\tfind_pack_info_one(i);",
          "new_line_content": "\tfor (i = 0; i < num_pack; i++) {",
          "content_same": false
        },
        {
          "line": 210,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "\tfclose(fp);",
          "new_line_content": "\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 340,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(dep_temp)",
          "new_text": null,
          "old_line_content": "\tfree(dep_temp);",
          "new_line_content": "\t\t\tstruct pack_info *base;",
          "content_same": false
        },
        {
          "line": 213,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "\tfclose(fp);",
          "new_line_content": "\t\t\t\tgoto out_stale;",
          "content_same": false
        },
        {
          "line": 90,
          "old_api": "alloc_nr",
          "new_api": null,
          "old_text": "alloc_nr(this->nr_alloc)",
          "new_text": null,
          "old_line_content": "\t\tthis->nr_alloc = alloc_nr(this->nr_alloc);",
          "new_line_content": "\tint i;",
          "content_same": false
        },
        {
          "line": 91,
          "old_api": "xrealloc",
          "new_api": null,
          "old_text": "xrealloc(this->head, this->nr_alloc * 20)",
          "new_text": null,
          "old_line_content": "\t\tthis->head = xrealloc(this->head, this->nr_alloc * 20);",
          "new_line_content": "\tfor (i = 0; i < num_pack; i++)",
          "content_same": false
        },
        {
          "line": 347,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(fp, \"P %s\\n\", info[i]->p->pack_name + objdirlen + 6)",
          "new_text": null,
          "old_line_content": "\t\tfprintf(fp, \"P %s\\n\", info[i]->p->pack_name + objdirlen + 6);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 93,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(this->head[this->nr_heads++], sha1, 20)",
          "new_text": null,
          "old_line_content": "\tmemcpy(this->head[this->nr_heads++], sha1, 20);",
          "new_line_content": "\t\t\treturn info[i];",
          "content_same": false
        },
        {
          "line": 475,
          "old_api": "get_object_directory",
          "new_api": null,
          "old_text": "get_object_directory()",
          "new_text": null,
          "old_line_content": "\tnamelen = sprintf(infofile, \"%s/info/packs\", get_object_directory());",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 476,
          "old_api": "strcpy",
          "new_api": null,
          "old_text": "strcpy(name, infofile)",
          "new_text": null,
          "old_line_content": "\tstrcpy(name, infofile);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 477,
          "old_api": "strcpy",
          "new_api": null,
          "old_text": "strcpy(name + namelen, \"+\")",
          "new_text": null,
          "old_line_content": "\tstrcpy(name + namelen, \"+\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 225,
          "old_api": "num_packed_objects",
          "new_api": null,
          "old_text": "num_packed_objects(p)",
          "new_text": null,
          "old_line_content": "\tint num = num_packed_objects(p);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 354,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(fp, \" %1d\", j)",
          "new_text": null,
          "old_line_content": "\t\t\tfprintf(fp, \" %1d\", j);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 479,
          "old_api": "init_pack_info",
          "new_api": null,
          "old_text": "init_pack_info(infofile, force)",
          "new_text": null,
          "old_line_content": "\tinit_pack_info(infofile, force);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 356,
          "old_api": "fputc",
          "new_api": null,
          "old_text": "fputc('\\n', fp)",
          "new_text": null,
          "old_line_content": "\t\tfputc('\\n', fp);",
          "new_line_content": "\tfor (i = 0; i < num_pack; i++)",
          "content_same": false
        },
        {
          "line": 480,
          "old_api": "find_pack_info",
          "new_api": null,
          "old_text": "find_pack_info()",
          "new_text": null,
          "old_line_content": "\tfind_pack_info();",
          "new_line_content": "\tchar infofile[PATH_MAX];",
          "content_same": false
        },
        {
          "line": 102,
          "old_api": "find_pack_by_name",
          "new_api": null,
          "old_text": "find_pack_by_name(line + 2)",
          "new_text": null,
          "old_line_content": "\tstruct pack_info *i = find_pack_by_name(line + 2);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 230,
          "old_api": "nth_packed_object_sha1",
          "new_api": null,
          "old_text": "nth_packed_object_sha1(p, i, sha1)",
          "new_text": null,
          "old_line_content": "\t\tif (nth_packed_object_sha1(p, i, sha1))",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 231,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"corrupt pack file %s?\", p->pack_name)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"corrupt pack file %s?\", p->pack_name);",
          "new_line_content": "static unsigned long get_latest_commit_date(struct packed_git *p)",
          "content_same": false
        },
        {
          "line": 232,
          "old_api": "parse_object_cheap",
          "new_api": null,
          "old_text": "parse_object_cheap(sha1)",
          "new_text": null,
          "old_line_content": "\t\tif ((o = parse_object_cheap(sha1)) == NULL)",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 233,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(sha1)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"cannot parse %s\", sha1_to_hex(sha1));",
          "new_line_content": "\tunsigned char sha1[20];",
          "content_same": false
        },
        {
          "line": 362,
          "old_api": "lookup_object",
          "new_api": null,
          "old_text": "lookup_object(this->head[j])",
          "new_text": null,
          "old_line_content": "\t\t\tstruct object *o = lookup_object(this->head[j]);",
          "new_line_content": "\t\t\tif ((i == j) || !(info[i]->dep[j]))",
          "content_same": false
        },
        {
          "line": 363,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(fp, \"T %1d %s %s\\n\",\n\t\t\t\ti, sha1_to_hex(this->head[j]), o->type)",
          "new_text": null,
          "old_line_content": "\t\t\tfprintf(fp, \"T %1d %s %s\\n\",",
          "new_line_content": "\t\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 488,
          "old_api": "rename",
          "new_api": null,
          "old_text": "rename(name, infofile)",
          "new_text": null,
          "old_line_content": "\trename(name, infofile);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 501,
          "old_api": "update_info_refs",
          "new_api": null,
          "old_text": "update_info_refs(force)",
          "new_text": null,
          "old_line_content": "\terrs = errs | update_info_refs(force);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 502,
          "old_api": "update_info_packs",
          "new_api": null,
          "old_text": "update_info_packs(force)",
          "new_text": null,
          "old_line_content": "\terrs = errs | update_info_packs(force);",
          "new_line_content": "/* public */",
          "content_same": false
        },
        {
          "line": 482,
          "old_api": "safe_create_leading_directories",
          "new_api": null,
          "old_text": "safe_create_leading_directories(name)",
          "new_text": null,
          "old_line_content": "\tsafe_create_leading_directories(name);",
          "new_line_content": "\tint namelen;",
          "content_same": false
        },
        {
          "line": 483,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(name, \"w\")",
          "new_text": null,
          "old_line_content": "\tfp = fopen(name, \"w\");",
          "new_line_content": "\tFILE *fp;",
          "content_same": false
        },
        {
          "line": 125,
          "old_api": "strtoul",
          "new_api": null,
          "old_text": "strtoul(cp, &ep, 10)",
          "new_text": null,
          "old_line_content": "\tnum = strtoul(cp, &ep, 10);",
          "new_line_content": "/* Returns non-zero when we detect that the info in the",
          "content_same": false
        },
        {
          "line": 127,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"invalid input %s\", line)",
          "new_text": null,
          "old_line_content": "\t\treturn error(\"invalid input %s\", line);",
          "new_line_content": " */",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 14,
      "total_additions": 72,
      "total_deletions": 70,
      "total_api_changes": 156
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 10,
        "api_related_lines": 156,
        "non_api_lines": 8,
        "non_api_line_numbers": [
          64,
          65,
          67,
          68,
          70,
          71,
          62,
          63
        ]
      }
    },
    "api_calls_before": 111,
    "api_calls_after": 113,
    "diff_info": {
      "added_lines": 10,
      "removed_lines": 0,
      "total_diff_lines": 22
    }
  }
}
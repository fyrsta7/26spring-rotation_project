{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/068fa54c0034be0b953d798628b06815f9cfaff0",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/068fa54c0034be0b953d798628b06815f9cfaff0/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/068fa54c0034be0b953d798628b06815f9cfaff0/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/068fa54c0034be0b953d798628b06815f9cfaff0/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 1466,
          "old_api": "commit_lock_file",
          "new_api": "_",
          "old_text": "commit_lock_file(&lk)",
          "new_text": "_(\"could not write multi-pack bitmap\")",
          "old_line_content": "\tif (commit_lock_file(&lk) < 0)",
          "new_line_content": "\t\t\terror(_(\"could not write multi-pack bitmap\"));",
          "content_same": false
        },
        {
          "line": 1482,
          "old_api": "free",
          "new_api": "clear_midx_files_ext",
          "old_text": "free(ctx.entries)",
          "new_text": "clear_midx_files_ext(object_dir, \".bitmap\", midx_hash)",
          "old_line_content": "\tfree(ctx.entries);",
          "new_line_content": "\tclear_midx_files_ext(object_dir, \".bitmap\", midx_hash);",
          "content_same": false
        },
        {
          "line": 1483,
          "old_api": "free",
          "new_api": "clear_midx_files_ext",
          "old_text": "free(ctx.pack_perm)",
          "new_text": "clear_midx_files_ext(object_dir, \".rev\", midx_hash)",
          "old_line_content": "\tfree(ctx.pack_perm);",
          "new_line_content": "\tclear_midx_files_ext(object_dir, \".rev\", midx_hash);",
          "content_same": false
        },
        {
          "line": 1495,
          "old_api": "write_midx_internal",
          "new_api": "free",
          "old_text": "write_midx_internal(object_dir, NULL, NULL, preferred_pack_name,\n\t\t\t\t   refs_snapshot, flags)",
          "new_text": "free(ctx.entries)",
          "old_line_content": "\treturn write_midx_internal(object_dir, NULL, NULL, preferred_pack_name,",
          "new_line_content": "\tfree(ctx.entries);",
          "content_same": false
        },
        {
          "line": 1533,
          "old_api": "memset",
          "new_api": "ends_with",
          "old_text": "memset(&data, 0, sizeof(struct clear_midx_data))",
          "new_text": "ends_with(file_name, data->ext)",
          "old_line_content": "\tmemset(&data, 0, sizeof(struct clear_midx_data));",
          "new_line_content": "\t      ends_with(file_name, data->ext)))",
          "content_same": false
        },
        {
          "line": 1564,
          "old_api": "strbuf_release",
          "new_api": "get_midx_filename",
          "old_text": "strbuf_release(&midx)",
          "new_text": "get_midx_filename(&midx, r->objects->odb->path)",
          "old_line_content": "\tstrbuf_release(&midx);",
          "new_line_content": "\tget_midx_filename(&midx, r->objects->odb->path);",
          "content_same": false
        },
        {
          "line": 1574,
          "old_api": "va_start",
          "new_api": "clear_midx_files_ext",
          "old_text": "va_start(ap, fmt)",
          "new_text": "clear_midx_files_ext(r->objects->odb->path, \".bitmap\", NULL)",
          "old_line_content": "\tva_start(ap, fmt);",
          "new_line_content": "\tclear_midx_files_ext(r->objects->odb->path, \".bitmap\", NULL);",
          "content_same": false
        },
        {
          "line": 1575,
          "old_api": "vfprintf",
          "new_api": "clear_midx_files_ext",
          "old_text": "vfprintf(stderr, fmt, ap)",
          "new_text": "clear_midx_files_ext(r->objects->odb->path, \".rev\", NULL)",
          "old_line_content": "\tvfprintf(stderr, fmt, ap);",
          "new_line_content": "\tclear_midx_files_ext(r->objects->odb->path, \".rev\", NULL);",
          "content_same": false
        },
        {
          "line": 1577,
          "old_api": "va_end",
          "new_api": "strbuf_release",
          "old_text": "va_end(ap)",
          "new_text": "strbuf_release(&midx)",
          "old_line_content": "\tva_end(ap);",
          "new_line_content": "\tstrbuf_release(&midx);",
          "content_same": false
        },
        {
          "line": 1684,
          "old_api": "ALLOC_ARRAY",
          "new_api": "_",
          "old_text": "ALLOC_ARRAY(pairs, m->num_objects)",
          "new_text": "_(\"oid lookup out of order: oid[%d] = %s >= %s = oid[%d]\")",
          "old_line_content": "\tALLOC_ARRAY(pairs, m->num_objects);",
          "new_line_content": "\t\t\tmidx_report(_(\"oid lookup out of order: oid[%d] = %s >= %s = oid[%d]\"),",
          "content_same": false
        },
        {
          "line": 1687,
          "old_api": "nth_midxed_pack_int_id",
          "new_api": "midx_display_sparse_progress",
          "old_text": "nth_midxed_pack_int_id(m, i)",
          "new_text": "midx_display_sparse_progress(progress, i + 1)",
          "old_line_content": "\t\tpairs[i].pack_int_id = nth_midxed_pack_int_id(m, i);",
          "new_line_content": "\t\tmidx_display_sparse_progress(progress, i + 1);",
          "content_same": false
        },
        {
          "line": 1707,
          "old_api": "close_pack_fd",
          "new_api": "QSORT",
          "old_text": "close_pack_fd(m->packs[pairs[i-1].pack_int_id])",
          "new_text": "QSORT(pairs, m->num_objects, compare_pair_pos_vs_id)",
          "old_line_content": "\t\t\tclose_pack_fd(m->packs[pairs[i-1].pack_int_id]);",
          "new_line_content": "\tQSORT(pairs, m->num_objects, compare_pair_pos_vs_id);",
          "content_same": false
        },
        {
          "line": 1708,
          "old_api": "close_pack_index",
          "new_api": "stop_progress",
          "old_text": "close_pack_index(m->packs[pairs[i-1].pack_int_id])",
          "new_text": "stop_progress(&progress)",
          "old_line_content": "\t\t\tclose_pack_index(m->packs[pairs[i-1].pack_int_id]);",
          "new_line_content": "\tstop_progress(&progress);",
          "content_same": false
        },
        {
          "line": 1711,
          "old_api": "nth_midxed_object_oid",
          "new_api": "_",
          "old_text": "nth_midxed_object_oid(&oid, m, pairs[i].pos)",
          "new_text": "_(\"Verifying object offsets\")",
          "old_line_content": "\t\tnth_midxed_object_oid(&oid, m, pairs[i].pos);",
          "new_line_content": "\t\tprogress = start_sparse_progress(_(\"Verifying object offsets\"), m->num_objects);",
          "content_same": false
        },
        {
          "line": 1720,
          "old_api": "_",
          "new_api": "close_pack_fd",
          "old_text": "_(\"failed to load pack-index for packfile %s\")",
          "new_text": "close_pack_fd(m->packs[pairs[i-1].pack_int_id])",
          "old_line_content": "\t\t\tmidx_report(_(\"failed to load pack-index for packfile %s\"),",
          "new_line_content": "\t\t\tclose_pack_fd(m->packs[pairs[i-1].pack_int_id]);",
          "content_same": false
        },
        {
          "line": 1726,
          "old_api": "find_pack_entry_one",
          "new_api": "fill_midx_entry",
          "old_text": "find_pack_entry_one(oid.hash, e.p)",
          "new_text": "fill_midx_entry(r, &oid, &e, m)",
          "old_line_content": "\t\tp_offset = find_pack_entry_one(oid.hash, e.p);",
          "new_line_content": "\t\tif (!fill_midx_entry(r, &oid, &e, m)) {",
          "content_same": false
        },
        {
          "line": 1732,
          "old_api": "midx_display_sparse_progress",
          "new_api": "open_pack_index",
          "old_text": "midx_display_sparse_progress(progress, i + 1)",
          "new_text": "open_pack_index(e.p)",
          "old_line_content": "\t\tmidx_display_sparse_progress(progress, i + 1);",
          "new_line_content": "\t\tif (open_pack_index(e.p)) {",
          "content_same": false
        },
        {
          "line": 1747,
          "old_api": "lookup_multi_pack_index",
          "new_api": "stop_progress",
          "old_text": "lookup_multi_pack_index(r, object_dir)",
          "new_text": "stop_progress(&progress)",
          "old_line_content": "\tstruct multi_pack_index *m = lookup_multi_pack_index(r, object_dir);",
          "new_line_content": "\tstop_progress(&progress);",
          "content_same": false
        },
        {
          "line": 1766,
          "old_api": "_",
          "new_api": "CALLOC_ARRAY",
          "old_text": "_(\"Finding and deleting unreferenced packfiles\")",
          "new_text": "CALLOC_ARRAY(count, m->num_packs)",
          "old_line_content": "\t\tprogress = start_delayed_progress(_(\"Finding and deleting unreferenced packfiles\"),",
          "new_line_content": "\tCALLOC_ARRAY(count, m->num_packs);",
          "content_same": false
        },
        {
          "line": 1788,
          "old_api": "stop_progress",
          "new_api": "prepare_midx_pack",
          "old_text": "stop_progress(&progress)",
          "new_text": "prepare_midx_pack(r, m, i)",
          "old_line_content": "\tstop_progress(&progress);",
          "new_line_content": "\t\tif (prepare_midx_pack(r, m, i))",
          "content_same": false
        },
        {
          "line": 1795,
          "old_api": "string_list_clear",
          "new_api": "close_pack",
          "old_text": "string_list_clear(&packs_to_drop, 0)",
          "new_text": "close_pack(m->packs[i])",
          "old_line_content": "\tstring_list_clear(&packs_to_drop, 0);",
          "new_line_content": "\t\tclose_pack(m->packs[i]);",
          "content_same": false
        },
        {
          "line": 1881,
          "old_api": "open_pack_index",
          "new_api": "QSORT",
          "old_text": "open_pack_index(p)",
          "new_text": "QSORT(pack_info, m->num_packs, compare_by_mtime)",
          "old_line_content": "\t\tif (open_pack_index(p) || !p->num_objects)",
          "new_line_content": "\tQSORT(pack_info, m->num_packs, compare_by_mtime);",
          "content_same": false
        },
        {
          "line": 1925,
          "old_api": "CALLOC_ARRAY",
          "new_api": "lookup_multi_pack_index",
          "old_text": "CALLOC_ARRAY(include_pack, m->num_packs)",
          "new_text": "lookup_multi_pack_index(r, object_dir)",
          "old_line_content": "\tCALLOC_ARRAY(include_pack, m->num_packs);",
          "new_line_content": "\tstruct multi_pack_index *m = lookup_multi_pack_index(r, object_dir);",
          "content_same": false
        },
        {
          "line": 1938,
          "old_api": "strbuf_addstr",
          "new_api": "CALLOC_ARRAY",
          "old_text": "strbuf_addstr(&base_name, object_dir)",
          "new_text": "CALLOC_ARRAY(include_pack, m->num_packs)",
          "old_line_content": "\tstrbuf_addstr(&base_name, object_dir);",
          "new_line_content": "\tCALLOC_ARRAY(include_pack, m->num_packs);",
          "content_same": false
        },
        {
          "line": 1943,
          "old_api": "strvec_push",
          "new_api": "fill_included_packs_all",
          "old_text": "strvec_push(&cmd.args, \"--delta-base-offset\")",
          "new_text": "fill_included_packs_all(r, m, include_pack)",
          "old_line_content": "\t\tstrvec_push(&cmd.args, \"--delta-base-offset\");",
          "new_line_content": "\t} else if (fill_included_packs_all(r, m, include_pack))",
          "content_same": false
        },
        {
          "line": 1952,
          "old_api": "strbuf_release",
          "new_api": "strbuf_addstr",
          "old_text": "strbuf_release(&base_name)",
          "new_text": "strbuf_addstr(&base_name, \"/pack/pack\")",
          "old_line_content": "\tstrbuf_release(&base_name);",
          "new_line_content": "\tstrbuf_addstr(&base_name, \"/pack/pack\");",
          "content_same": false
        },
        {
          "line": 1958,
          "old_api": "_",
          "new_api": "strvec_push",
          "old_text": "_(\"could not start pack-objects\")",
          "new_text": "strvec_push(&cmd.args, \"--delta-islands\")",
          "old_line_content": "\t\terror(_(\"could not start pack-objects\"));",
          "new_line_content": "\t\tstrvec_push(&cmd.args, \"--delta-islands\");",
          "content_same": false
        },
        {
          "line": 1963,
          "old_api": "xfdopen",
          "new_api": "strvec_push",
          "old_text": "xfdopen(cmd.in, \"w\")",
          "new_text": "strvec_push(&cmd.args, \"-q\")",
          "old_line_content": "\tcmd_in = xfdopen(cmd.in, \"w\");",
          "new_line_content": "\t\tstrvec_push(&cmd.args, \"-q\");",
          "content_same": false
        },
        {
          "line": 1986,
          "old_api": "free",
          "new_api": "oid_to_hex",
          "old_text": "free(include_pack)",
          "new_text": "oid_to_hex(&oid)",
          "old_line_content": "\tfree(include_pack);",
          "new_line_content": "\t\tfprintf(cmd_in, \"%s\\n\", oid_to_hex(&oid));",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1538,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(full_path)",
          "old_line_content": "\tdata.ext = ext;",
          "new_line_content": "\tif (unlink(full_path))",
          "content_same": false
        },
        {
          "line": 1539,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"failed to remove %s\")",
          "old_line_content": "",
          "new_line_content": "\t\tdie_errno(_(\"failed to remove %s\"), full_path);",
          "content_same": false
        },
        {
          "line": 1546,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&data, 0, sizeof(struct clear_midx_data))",
          "old_line_content": "",
          "new_line_content": "\tmemset(&data, 0, sizeof(struct clear_midx_data));",
          "content_same": false
        },
        {
          "line": 1549,
          "old_api": null,
          "new_api": "xstrfmt",
          "old_text": null,
          "new_text": "xstrfmt(\"multi-pack-index-%s%s\",\n\t\t\t\t    hash_to_hex(keep_hash), ext)",
          "old_line_content": "\tstruct strbuf midx = STRBUF_INIT;",
          "new_line_content": "\t\tdata.keep = xstrfmt(\"multi-pack-index-%s%s\",",
          "content_same": false
        },
        {
          "line": 1550,
          "old_api": null,
          "new_api": "hash_to_hex",
          "old_text": null,
          "new_text": "hash_to_hex(keep_hash)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t    hash_to_hex(keep_hash), ext);",
          "content_same": false
        },
        {
          "line": 1553,
          "old_api": null,
          "new_api": "for_each_file_in_pack_dir",
          "old_text": null,
          "new_text": "for_each_file_in_pack_dir(object_dir,\n\t\t\t\t  clear_midx_file_ext,\n\t\t\t\t  &data)",
          "old_line_content": "\tif (r->objects && r->objects->multi_pack_index) {",
          "new_line_content": "\tfor_each_file_in_pack_dir(object_dir,",
          "content_same": false
        },
        {
          "line": 1557,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(data.keep)",
          "old_line_content": "",
          "new_line_content": "\tfree(data.keep);",
          "content_same": false
        },
        {
          "line": 1567,
          "old_api": null,
          "new_api": "close_midx",
          "old_text": null,
          "new_text": "close_midx(r->objects->multi_pack_index)",
          "old_line_content": "static int verify_midx_error;",
          "new_line_content": "\t\tclose_midx(r->objects->multi_pack_index);",
          "content_same": false
        },
        {
          "line": 1571,
          "old_api": null,
          "new_api": "remove_path",
          "old_text": null,
          "new_text": "remove_path(midx.buf)",
          "old_line_content": "{",
          "new_line_content": "\tif (remove_path(midx.buf))",
          "content_same": false
        },
        {
          "line": 1572,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"failed to clear multi-pack-index at %s\")",
          "old_line_content": "\tva_list ap;",
          "new_line_content": "\t\tdie(_(\"failed to clear multi-pack-index at %s\"), midx.buf);",
          "content_same": false
        },
        {
          "line": 1582,
          "old_api": null,
          "new_api": "format (printf, 1, 2)",
          "old_text": null,
          "new_text": "format (printf, 1, 2)",
          "old_line_content": "\tuint32_t pos;",
          "new_line_content": "__attribute__((format (printf, 1, 2)))",
          "content_same": false
        },
        {
          "line": 1587,
          "old_api": null,
          "new_api": "va_start",
          "old_text": null,
          "new_text": "va_start(ap, fmt)",
          "old_line_content": "{",
          "new_line_content": "\tva_start(ap, fmt);",
          "content_same": false
        },
        {
          "line": 1588,
          "old_api": null,
          "new_api": "vfprintf",
          "old_text": null,
          "new_text": "vfprintf(stderr, fmt, ap)",
          "old_line_content": "\tstruct pair_pos_vs_id *a = (struct pair_pos_vs_id *)_a;",
          "new_line_content": "\tvfprintf(stderr, fmt, ap);",
          "content_same": false
        },
        {
          "line": 1589,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"\\n\")",
          "old_line_content": "\tstruct pair_pos_vs_id *b = (struct pair_pos_vs_id *)_b;",
          "new_line_content": "\tfprintf(stderr, \"\\n\");",
          "content_same": false
        },
        {
          "line": 1590,
          "old_api": null,
          "new_api": "va_end",
          "old_text": null,
          "new_text": "va_end(ap)",
          "old_line_content": "",
          "new_line_content": "\tva_end(ap);",
          "content_same": false
        },
        {
          "line": 1624,
          "old_api": null,
          "new_api": "load_multi_pack_index",
          "old_text": null,
          "new_text": "load_multi_pack_index(object_dir, 1)",
          "old_line_content": "\t\t}",
          "new_line_content": "\tstruct multi_pack_index *m = load_multi_pack_index(object_dir, 1);",
          "content_same": false
        },
        {
          "line": 1632,
          "old_api": null,
          "new_api": "get_midx_filename",
          "old_text": null,
          "new_text": "get_midx_filename(&filename, object_dir)",
          "old_line_content": "\tif (flags & MIDX_PROGRESS)",
          "new_line_content": "\t\tget_midx_filename(&filename, object_dir);",
          "content_same": false
        },
        {
          "line": 1634,
          "old_api": null,
          "new_api": "stat",
          "old_text": null,
          "new_text": "stat(filename.buf, &sb)",
          "old_line_content": "\t\t\t\t\t  m->num_packs);",
          "new_line_content": "\t\tif (!stat(filename.buf, &sb)) {",
          "content_same": false
        },
        {
          "line": 1635,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"multi-pack-index file exists, but failed to parse\")",
          "old_line_content": "\tfor (i = 0; i < m->num_packs; i++) {",
          "new_line_content": "\t\t\terror(_(\"multi-pack-index file exists, but failed to parse\"));",
          "content_same": false
        },
        {
          "line": 1638,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&filename)",
          "old_line_content": "",
          "new_line_content": "\t\tstrbuf_release(&filename);",
          "content_same": false
        },
        {
          "line": 1642,
          "old_api": null,
          "new_api": "midx_checksum_valid",
          "old_text": null,
          "new_text": "midx_checksum_valid(m)",
          "old_line_content": "",
          "new_line_content": "\tif (!midx_checksum_valid(m))",
          "content_same": false
        },
        {
          "line": 1643,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"incorrect checksum\")",
          "old_line_content": "\tfor (i = 0; i < 255; i++) {",
          "new_line_content": "\t\tmidx_report(_(\"incorrect checksum\"));",
          "content_same": false
        },
        {
          "line": 1646,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"Looking for referenced packfiles\")",
          "old_line_content": "",
          "new_line_content": "\t\tprogress = start_delayed_progress(_(\"Looking for referenced packfiles\"),",
          "content_same": false
        },
        {
          "line": 1649,
          "old_api": null,
          "new_api": "prepare_midx_pack",
          "old_text": null,
          "new_text": "prepare_midx_pack(r, m, i)",
          "old_line_content": "\t\t\t\t    i, oid_fanout1, oid_fanout2, i + 1);",
          "new_line_content": "\t\tif (prepare_midx_pack(r, m, i))",
          "content_same": false
        },
        {
          "line": 1650,
          "old_api": null,
          "new_api": "midx_report",
          "old_text": null,
          "new_text": "midx_report(\"failed to load pack in position %d\", i)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tmidx_report(\"failed to load pack in position %d\", i);",
          "content_same": false
        },
        {
          "line": 1652,
          "old_api": null,
          "new_api": "display_progress",
          "old_text": null,
          "new_text": "display_progress(progress, i + 1)",
          "old_line_content": "\tif (m->num_objects == 0) {",
          "new_line_content": "\t\tdisplay_progress(progress, i + 1);",
          "content_same": false
        },
        {
          "line": 1654,
          "old_api": null,
          "new_api": "stop_progress",
          "old_text": null,
          "new_text": "stop_progress(&progress)",
          "old_line_content": "\t\t/*",
          "new_line_content": "\tstop_progress(&progress);",
          "content_same": false
        },
        {
          "line": 1657,
          "old_api": null,
          "new_api": "ntohl",
          "old_text": null,
          "new_text": "ntohl(m->chunk_oid_fanout[i])",
          "old_line_content": "\t\t */",
          "new_line_content": "\t\tuint32_t oid_fanout1 = ntohl(m->chunk_oid_fanout[i]);",
          "content_same": false
        },
        {
          "line": 1658,
          "old_api": null,
          "new_api": "ntohl",
          "old_text": null,
          "new_text": "ntohl(m->chunk_oid_fanout[i + 1])",
          "old_line_content": "\t\tgoto cleanup;",
          "new_line_content": "\t\tuint32_t oid_fanout2 = ntohl(m->chunk_oid_fanout[i + 1]);",
          "content_same": false
        },
        {
          "line": 1661,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"oid fanout out of order: fanout[%d] = %\"PRIx32\" > %\"PRIx32\" = fanout[%d]\")",
          "old_line_content": "\tif (flags & MIDX_PROGRESS)",
          "new_line_content": "\t\t\tmidx_report(_(\"oid fanout out of order: fanout[%d] = %\"PRIx32\" > %\"PRIx32\" = fanout[%d]\"),",
          "content_same": false
        },
        {
          "line": 1666,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"the midx contains no oid\")",
          "old_line_content": "",
          "new_line_content": "\t\tmidx_report(_(\"the midx contains no oid\"));",
          "content_same": false
        },
        {
          "line": 1675,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"Verifying OID order in multi-pack-index\")",
          "old_line_content": "\t}",
          "new_line_content": "\t\tprogress = start_sparse_progress(_(\"Verifying OID order in multi-pack-index\"),",
          "content_same": false
        },
        {
          "line": 1680,
          "old_api": null,
          "new_api": "nth_midxed_object_oid",
          "old_text": null,
          "new_text": "nth_midxed_object_oid(&oid1, m, i)",
          "old_line_content": "\t * to group the objects by packfile.  Use this permutation to visit",
          "new_line_content": "\t\tnth_midxed_object_oid(&oid1, m, i);",
          "content_same": false
        },
        {
          "line": 1681,
          "old_api": null,
          "new_api": "nth_midxed_object_oid",
          "old_text": null,
          "new_text": "nth_midxed_object_oid(&oid2, m, i + 1)",
          "old_line_content": "\t * each of the objects and only require 1 packfile to be open at a",
          "new_line_content": "\t\tnth_midxed_object_oid(&oid2, m, i + 1);",
          "content_same": false
        },
        {
          "line": 1683,
          "old_api": null,
          "new_api": "oidcmp",
          "old_text": null,
          "new_text": "oidcmp(&oid1, &oid2)",
          "old_line_content": "\t */",
          "new_line_content": "\t\tif (oidcmp(&oid1, &oid2) >= 0)",
          "content_same": false
        },
        {
          "line": 1685,
          "old_api": null,
          "new_api": "oid_to_hex",
          "old_text": null,
          "new_text": "oid_to_hex(&oid2)",
          "old_line_content": "\tfor (i = 0; i < m->num_objects; i++) {",
          "new_line_content": "\t\t\t\t    i, oid_to_hex(&oid1), oid_to_hex(&oid2), i + 1);",
          "content_same": false
        },
        {
          "line": 1689,
          "old_api": null,
          "new_api": "stop_progress",
          "old_text": null,
          "new_text": "stop_progress(&progress)",
          "old_line_content": "",
          "new_line_content": "\tstop_progress(&progress);",
          "content_same": false
        },
        {
          "line": 1697,
          "old_api": null,
          "new_api": "ALLOC_ARRAY",
          "old_text": null,
          "new_text": "ALLOC_ARRAY(pairs, m->num_objects)",
          "old_line_content": "\tif (flags & MIDX_PROGRESS)",
          "new_line_content": "\tALLOC_ARRAY(pairs, m->num_objects);",
          "content_same": false
        },
        {
          "line": 1700,
          "old_api": null,
          "new_api": "nth_midxed_pack_int_id",
          "old_text": null,
          "new_text": "nth_midxed_pack_int_id(m, i)",
          "old_line_content": "\t\tstruct object_id oid;",
          "new_line_content": "\t\tpairs[i].pack_int_id = nth_midxed_pack_int_id(m, i);",
          "content_same": false
        },
        {
          "line": 1704,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"Sorting objects by packfile\")",
          "old_line_content": "\t\tif (i > 0 && pairs[i-1].pack_int_id != pairs[i].pack_int_id &&",
          "new_line_content": "\t\tprogress = start_sparse_progress(_(\"Sorting objects by packfile\"),",
          "content_same": false
        },
        {
          "line": 1706,
          "old_api": null,
          "new_api": "display_progress",
          "old_text": null,
          "new_text": "display_progress(progress, 0)",
          "old_line_content": "\t\t{",
          "new_line_content": "\tdisplay_progress(progress, 0); /* TODO: Measure QSORT() progress */",
          "content_same": false
        },
        {
          "line": 1721,
          "old_api": null,
          "new_api": "close_pack_index",
          "old_text": null,
          "new_text": "close_pack_index(m->packs[pairs[i-1].pack_int_id])",
          "old_line_content": "\t\t\t\t    e.p->pack_name);",
          "new_line_content": "\t\t\tclose_pack_index(m->packs[pairs[i-1].pack_int_id]);",
          "content_same": false
        },
        {
          "line": 1724,
          "old_api": null,
          "new_api": "nth_midxed_object_oid",
          "old_text": null,
          "new_text": "nth_midxed_object_oid(&oid, m, pairs[i].pos)",
          "old_line_content": "",
          "new_line_content": "\t\tnth_midxed_object_oid(&oid, m, pairs[i].pos);",
          "content_same": false
        },
        {
          "line": 1727,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"failed to load pack entry for oid[%d] = %s\")",
          "old_line_content": "",
          "new_line_content": "\t\t\tmidx_report(_(\"failed to load pack entry for oid[%d] = %s\"),",
          "content_same": false
        },
        {
          "line": 1728,
          "old_api": null,
          "new_api": "oid_to_hex",
          "old_text": null,
          "new_text": "oid_to_hex(&oid)",
          "old_line_content": "\t\tif (m_offset != p_offset)",
          "new_line_content": "\t\t\t\t    pairs[i].pos, oid_to_hex(&oid));",
          "content_same": false
        },
        {
          "line": 1733,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"failed to load pack-index for packfile %s\")",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tmidx_report(_(\"failed to load pack-index for packfile %s\"),",
          "content_same": false
        },
        {
          "line": 1739,
          "old_api": null,
          "new_api": "find_pack_entry_one",
          "old_text": null,
          "new_text": "find_pack_entry_one(oid.hash, e.p)",
          "old_line_content": "",
          "new_line_content": "\t\tp_offset = find_pack_entry_one(oid.hash, e.p);",
          "content_same": false
        },
        {
          "line": 1742,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"incorrect object offset for oid[%d] = %s: %\"PRIx64\" != %\"PRIx64)",
          "old_line_content": "",
          "new_line_content": "\t\t\tmidx_report(_(\"incorrect object offset for oid[%d] = %s: %\"PRIx64\" != %\"PRIx64),",
          "content_same": false
        },
        {
          "line": 1743,
          "old_api": null,
          "new_api": "oid_to_hex",
          "old_text": null,
          "new_text": "oid_to_hex(&oid)",
          "old_line_content": "int expire_midx_packs(struct repository *r, const char *object_dir, unsigned flags)",
          "new_line_content": "\t\t\t\t    pairs[i].pos, oid_to_hex(&oid), m_offset, p_offset);",
          "content_same": false
        },
        {
          "line": 1745,
          "old_api": null,
          "new_api": "midx_display_sparse_progress",
          "old_text": null,
          "new_text": "midx_display_sparse_progress(progress, i + 1)",
          "old_line_content": "\tuint32_t i, *count, result = 0;",
          "new_line_content": "\t\tmidx_display_sparse_progress(progress, i + 1);",
          "content_same": false
        },
        {
          "line": 1750,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(pairs)",
          "old_line_content": "\tif (!m)",
          "new_line_content": "\tfree(pairs);",
          "content_same": false
        },
        {
          "line": 1751,
          "old_api": null,
          "new_api": "close_midx",
          "old_text": null,
          "new_text": "close_midx(m)",
          "old_line_content": "\t\treturn 0;",
          "new_line_content": "\tclose_midx(m);",
          "content_same": false
        },
        {
          "line": 1760,
          "old_api": null,
          "new_api": "lookup_multi_pack_index",
          "old_text": null,
          "new_text": "lookup_multi_pack_index(r, object_dir)",
          "old_line_content": "\t\tcount[pack_int_id]++;",
          "new_line_content": "\tstruct multi_pack_index *m = lookup_multi_pack_index(r, object_dir);",
          "content_same": false
        },
        {
          "line": 1769,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"Counting referenced objects\")",
          "old_line_content": "\t\tchar *pack_name;",
          "new_line_content": "\t\tprogress = start_delayed_progress(_(\"Counting referenced objects\"),",
          "content_same": false
        },
        {
          "line": 1772,
          "old_api": null,
          "new_api": "nth_midxed_pack_int_id",
          "old_text": null,
          "new_text": "nth_midxed_pack_int_id(m, i)",
          "old_line_content": "\t\tif (count[i])",
          "new_line_content": "\t\tint pack_int_id = nth_midxed_pack_int_id(m, i);",
          "content_same": false
        },
        {
          "line": 1774,
          "old_api": null,
          "new_api": "display_progress",
          "old_text": null,
          "new_text": "display_progress(progress, i + 1)",
          "old_line_content": "",
          "new_line_content": "\t\tdisplay_progress(progress, i + 1);",
          "content_same": false
        },
        {
          "line": 1776,
          "old_api": null,
          "new_api": "stop_progress",
          "old_text": null,
          "new_text": "stop_progress(&progress)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\tstop_progress(&progress);",
          "content_same": false
        },
        {
          "line": 1779,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"Finding and deleting unreferenced packfiles\")",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tprogress = start_delayed_progress(_(\"Finding and deleting unreferenced packfiles\"),",
          "content_same": false
        },
        {
          "line": 1783,
          "old_api": null,
          "new_api": "display_progress",
          "old_text": null,
          "new_text": "display_progress(progress, i + 1)",
          "old_line_content": "",
          "new_line_content": "\t\tdisplay_progress(progress, i + 1);",
          "content_same": false
        },
        {
          "line": 1794,
          "old_api": null,
          "new_api": "xstrdup",
          "old_text": null,
          "new_text": "xstrdup(m->packs[i]->pack_name)",
          "old_line_content": "",
          "new_line_content": "\t\tpack_name = xstrdup(m->packs[i]->pack_name);",
          "content_same": false
        },
        {
          "line": 1797,
          "old_api": null,
          "new_api": "string_list_insert",
          "old_text": null,
          "new_text": "string_list_insert(&packs_to_drop, m->pack_names[i])",
          "old_line_content": "\treturn result;",
          "new_line_content": "\t\tstring_list_insert(&packs_to_drop, m->pack_names[i]);",
          "content_same": false
        },
        {
          "line": 1798,
          "old_api": null,
          "new_api": "unlink_pack_path",
          "old_text": null,
          "new_text": "unlink_pack_path(pack_name, 0)",
          "old_line_content": "}",
          "new_line_content": "\t\tunlink_pack_path(pack_name, 0);",
          "content_same": false
        },
        {
          "line": 1799,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(pack_name)",
          "old_line_content": "",
          "new_line_content": "\t\tfree(pack_name);",
          "content_same": false
        },
        {
          "line": 1801,
          "old_api": null,
          "new_api": "stop_progress",
          "old_text": null,
          "new_text": "stop_progress(&progress)",
          "old_line_content": "\ttimestamp_t mtime;",
          "new_line_content": "\tstop_progress(&progress);",
          "content_same": false
        },
        {
          "line": 1803,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(count)",
          "old_line_content": "\tuint32_t pack_int_id;",
          "new_line_content": "\tfree(count);",
          "content_same": false
        },
        {
          "line": 1806,
          "old_api": null,
          "new_api": "write_midx_internal",
          "old_text": null,
          "new_text": "write_midx_internal(object_dir, NULL, &packs_to_drop, NULL, NULL, flags)",
          "old_line_content": "static int compare_by_mtime(const void *a_, const void *b_)",
          "new_line_content": "\t\tresult = write_midx_internal(object_dir, NULL, &packs_to_drop, NULL, NULL, flags);",
          "content_same": false
        },
        {
          "line": 1808,
          "old_api": null,
          "new_api": "string_list_clear",
          "old_text": null,
          "new_text": "string_list_clear(&packs_to_drop, 0)",
          "old_line_content": "\tconst struct repack_info *a, *b;",
          "new_line_content": "\tstring_list_clear(&packs_to_drop, 0);",
          "content_same": false
        },
        {
          "line": 1840,
          "old_api": null,
          "new_api": "repo_config_get_bool",
          "old_text": null,
          "new_text": "repo_config_get_bool(r, \"repack.packkeptobjects\", &pack_kept_objects)",
          "old_line_content": "}",
          "new_line_content": "\trepo_config_get_bool(r, \"repack.packkeptobjects\", &pack_kept_objects);",
          "content_same": false
        },
        {
          "line": 1843,
          "old_api": null,
          "new_api": "prepare_midx_pack",
          "old_text": null,
          "new_text": "prepare_midx_pack(r, m, i)",
          "old_line_content": "\t\t\t\t     struct multi_pack_index *m,",
          "new_line_content": "\t\tif (prepare_midx_pack(r, m, i))",
          "content_same": false
        },
        {
          "line": 1862,
          "old_api": null,
          "new_api": "xcalloc",
          "old_text": null,
          "new_text": "xcalloc(m->num_packs, sizeof(struct repack_info))",
          "old_line_content": "",
          "new_line_content": "\tstruct repack_info *pack_info = xcalloc(m->num_packs, sizeof(struct repack_info));",
          "content_same": false
        },
        {
          "line": 1865,
          "old_api": null,
          "new_api": "repo_config_get_bool",
          "old_text": null,
          "new_text": "repo_config_get_bool(r, \"repack.packkeptobjects\", &pack_kept_objects)",
          "old_line_content": "\t\tpack_info[pack_int_id].referenced_objects++;",
          "new_line_content": "\trepo_config_get_bool(r, \"repack.packkeptobjects\", &pack_kept_objects);",
          "content_same": false
        },
        {
          "line": 1870,
          "old_api": null,
          "new_api": "prepare_midx_pack",
          "old_text": null,
          "new_text": "prepare_midx_pack(r, m, i)",
          "old_line_content": "\ttotal_size = 0;",
          "new_line_content": "\t\tif (prepare_midx_pack(r, m, i))",
          "content_same": false
        },
        {
          "line": 1877,
          "old_api": null,
          "new_api": "nth_midxed_pack_int_id",
          "old_text": null,
          "new_text": "nth_midxed_pack_int_id(m, i)",
          "old_line_content": "\t\tif (!p)",
          "new_line_content": "\t\tuint32_t pack_int_id = nth_midxed_pack_int_id(m, i);",
          "content_same": false
        },
        {
          "line": 1894,
          "old_api": null,
          "new_api": "open_pack_index",
          "old_text": null,
          "new_text": "open_pack_index(p)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tif (open_pack_index(p) || !p->num_objects)",
          "content_same": false
        },
        {
          "line": 1909,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(pack_info)",
          "old_line_content": "\tstruct child_process cmd = CHILD_PROCESS_INIT;",
          "new_line_content": "\tfree(pack_info);",
          "content_same": false
        },
        {
          "line": 1941,
          "old_api": null,
          "new_api": "fill_included_packs_batch",
          "old_text": null,
          "new_text": "fill_included_packs_batch(r, m, include_pack, batch_size)",
          "old_line_content": "",
          "new_line_content": "\t\tif (fill_included_packs_batch(r, m, include_pack, batch_size))",
          "content_same": false
        },
        {
          "line": 1946,
          "old_api": null,
          "new_api": "repo_config_get_bool",
          "old_text": null,
          "new_text": "repo_config_get_bool(r, \"repack.usedeltabaseoffset\", &delta_base_offset)",
          "old_line_content": "",
          "new_line_content": "\trepo_config_get_bool(r, \"repack.usedeltabaseoffset\", &delta_base_offset);",
          "content_same": false
        },
        {
          "line": 1947,
          "old_api": null,
          "new_api": "repo_config_get_bool",
          "old_text": null,
          "new_text": "repo_config_get_bool(r, \"repack.usedeltaislands\", &use_delta_islands)",
          "old_line_content": "\tif (flags & MIDX_PROGRESS)",
          "new_line_content": "\trepo_config_get_bool(r, \"repack.usedeltaislands\", &use_delta_islands);",
          "content_same": false
        },
        {
          "line": 1949,
          "old_api": null,
          "new_api": "strvec_push",
          "old_text": null,
          "new_text": "strvec_push(&cmd.args, \"pack-objects\")",
          "old_line_content": "\telse",
          "new_line_content": "\tstrvec_push(&cmd.args, \"pack-objects\");",
          "content_same": false
        },
        {
          "line": 1951,
          "old_api": null,
          "new_api": "strbuf_addstr",
          "old_text": null,
          "new_text": "strbuf_addstr(&base_name, object_dir)",
          "old_line_content": "",
          "new_line_content": "\tstrbuf_addstr(&base_name, object_dir);",
          "content_same": false
        },
        {
          "line": 1953,
          "old_api": null,
          "new_api": "strvec_push",
          "old_text": null,
          "new_text": "strvec_push(&cmd.args, base_name.buf)",
          "old_line_content": "",
          "new_line_content": "\tstrvec_push(&cmd.args, base_name.buf);",
          "content_same": false
        },
        {
          "line": 1956,
          "old_api": null,
          "new_api": "strvec_push",
          "old_text": null,
          "new_text": "strvec_push(&cmd.args, \"--delta-base-offset\")",
          "old_line_content": "",
          "new_line_content": "\t\tstrvec_push(&cmd.args, \"--delta-base-offset\");",
          "content_same": false
        },
        {
          "line": 1961,
          "old_api": null,
          "new_api": "strvec_push",
          "old_text": null,
          "new_text": "strvec_push(&cmd.args, \"--progress\")",
          "old_line_content": "\t}",
          "new_line_content": "\t\tstrvec_push(&cmd.args, \"--progress\");",
          "content_same": false
        },
        {
          "line": 1965,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&base_name)",
          "old_line_content": "\tfor (i = 0; i < m->num_objects; i++) {",
          "new_line_content": "\tstrbuf_release(&base_name);",
          "content_same": false
        },
        {
          "line": 1970,
          "old_api": null,
          "new_api": "start_command",
          "old_text": null,
          "new_text": "start_command(&cmd)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\tif (start_command(&cmd)) {",
          "content_same": false
        },
        {
          "line": 1971,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"could not start pack-objects\")",
          "old_line_content": "",
          "new_line_content": "\t\terror(_(\"could not start pack-objects\"));",
          "content_same": false
        },
        {
          "line": 1460,
          "old_api": null,
          "new_api": "FREE_AND_NULL",
          "old_text": null,
          "new_text": "FREE_AND_NULL(ctx.entries)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tFREE_AND_NULL(ctx.entries);",
          "content_same": false
        },
        {
          "line": 1463,
          "old_api": null,
          "new_api": "write_midx_bitmap",
          "old_text": null,
          "new_text": "write_midx_bitmap(midx_name.buf, midx_hash, &pdata,\n\t\t\t\t      commits, commits_nr, ctx.pack_order,\n\t\t\t\t      refs_snapshot, flags)",
          "old_line_content": "\tif (ctx.m)",
          "new_line_content": "\t\tif (write_midx_bitmap(midx_name.buf, midx_hash, &pdata,",
          "content_same": false
        },
        {
          "line": 1976,
          "old_api": null,
          "new_api": "xfdopen",
          "old_text": null,
          "new_text": "xfdopen(cmd.in, \"w\")",
          "old_line_content": "",
          "new_line_content": "\tcmd_in = xfdopen(cmd.in, \"w\");",
          "content_same": false
        },
        {
          "line": 1980,
          "old_api": null,
          "new_api": "nth_midxed_pack_int_id",
          "old_text": null,
          "new_text": "nth_midxed_pack_int_id(m, i)",
          "old_line_content": "\t\tgoto cleanup;",
          "new_line_content": "\t\tuint32_t pack_int_id = nth_midxed_pack_int_id(m, i);",
          "content_same": false
        },
        {
          "line": 1985,
          "old_api": null,
          "new_api": "nth_midxed_object_oid",
          "old_text": null,
          "new_text": "nth_midxed_object_oid(&oid, m, i)",
          "old_line_content": "cleanup:",
          "new_line_content": "\t\tnth_midxed_object_oid(&oid, m, i);",
          "content_same": false
        },
        {
          "line": 1988,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(cmd_in)",
          "old_line_content": "}",
          "new_line_content": "\tfclose(cmd_in);",
          "content_same": false
        },
        {
          "line": 1477,
          "old_api": null,
          "new_api": "close_object_store",
          "old_text": null,
          "new_text": "close_object_store(the_repository->objects)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tclose_object_store(the_repository->objects);",
          "content_same": false
        },
        {
          "line": 1990,
          "old_api": null,
          "new_api": "finish_command",
          "old_text": null,
          "new_text": "finish_command(&cmd)",
          "old_line_content": "",
          "new_line_content": "\tif (finish_command(&cmd)) {",
          "content_same": false
        },
        {
          "line": 1479,
          "old_api": null,
          "new_api": "commit_lock_file",
          "old_text": null,
          "new_text": "commit_lock_file(&lk)",
          "old_line_content": "\t}",
          "new_line_content": "\tif (commit_lock_file(&lk) < 0)",
          "content_same": false
        },
        {
          "line": 1480,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"could not write multi-pack-index\")",
          "old_line_content": "",
          "new_line_content": "\t\tdie_errno(_(\"could not write multi-pack-index\"));",
          "content_same": false
        },
        {
          "line": 1991,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"could not finish pack-objects\")",
          "old_line_content": "",
          "new_line_content": "\t\terror(_(\"could not finish pack-objects\"));",
          "content_same": false
        },
        {
          "line": 1996,
          "old_api": null,
          "new_api": "write_midx_internal",
          "old_text": null,
          "new_text": "write_midx_internal(object_dir, NULL, NULL, NULL, NULL, flags)",
          "old_line_content": "",
          "new_line_content": "\tresult = write_midx_internal(object_dir, NULL, NULL, NULL, NULL, flags);",
          "content_same": false
        },
        {
          "line": 1999,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(include_pack)",
          "old_line_content": "",
          "new_line_content": "\tfree(include_pack);",
          "content_same": false
        },
        {
          "line": 1488,
          "old_api": null,
          "new_api": "close_pack",
          "old_text": null,
          "new_text": "close_pack(ctx.info[i].p)",
          "old_line_content": "}",
          "new_line_content": "\t\t\tclose_pack(ctx.info[i].p);",
          "content_same": false
        },
        {
          "line": 1489,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(ctx.info[i].p)",
          "old_line_content": "",
          "new_line_content": "\t\t\tfree(ctx.info[i].p);",
          "content_same": false
        },
        {
          "line": 1491,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(ctx.info[i].pack_name)",
          "old_line_content": "\t\t    const char *preferred_pack_name,",
          "new_line_content": "\t\tfree(ctx.info[i].pack_name);",
          "content_same": false
        },
        {
          "line": 1494,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(ctx.info)",
          "old_line_content": "{",
          "new_line_content": "\tfree(ctx.info);",
          "content_same": false
        },
        {
          "line": 1496,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(ctx.pack_perm)",
          "old_line_content": "\t\t\t\t   refs_snapshot, flags);",
          "new_line_content": "\tfree(ctx.pack_perm);",
          "content_same": false
        },
        {
          "line": 1497,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(ctx.pack_order)",
          "old_line_content": "}",
          "new_line_content": "\tfree(ctx.pack_order);",
          "content_same": false
        },
        {
          "line": 1498,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&midx_name)",
          "old_line_content": "",
          "new_line_content": "\tstrbuf_release(&midx_name);",
          "content_same": false
        },
        {
          "line": 1508,
          "old_api": null,
          "new_api": "write_midx_internal",
          "old_text": null,
          "new_text": "write_midx_internal(object_dir, NULL, NULL, preferred_pack_name,\n\t\t\t\t   refs_snapshot, flags)",
          "old_line_content": "",
          "new_line_content": "\treturn write_midx_internal(object_dir, NULL, NULL, preferred_pack_name,",
          "content_same": false
        },
        {
          "line": 1518,
          "old_api": null,
          "new_api": "write_midx_internal",
          "old_text": null,
          "new_text": "write_midx_internal(object_dir, packs_to_include, NULL,\n\t\t\t\t   preferred_pack_name, refs_snapshot, flags)",
          "old_line_content": "",
          "new_line_content": "\treturn write_midx_internal(object_dir, packs_to_include, NULL,",
          "content_same": false
        },
        {
          "line": 1532,
          "old_api": null,
          "new_api": "starts_with",
          "old_text": null,
          "new_text": "starts_with(file_name, \"multi-pack-index-\")",
          "old_line_content": "\tstruct clear_midx_data data;",
          "new_line_content": "\tif (!(starts_with(file_name, \"multi-pack-index-\") &&",
          "content_same": false
        },
        {
          "line": 1535,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(data->keep, file_name)",
          "old_line_content": "\tif (keep_hash)",
          "new_line_content": "\tif (data->keep && !strcmp(data->keep, file_name))",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1536,
          "old_api": "xstrfmt",
          "new_api": null,
          "old_text": "xstrfmt(\"multi-pack-index-%s%s\",\n\t\t\t\t    hash_to_hex(keep_hash), ext)",
          "new_text": null,
          "old_line_content": "\t\tdata.keep = xstrfmt(\"multi-pack-index-%s%s\",",
          "new_line_content": "\t\treturn;",
          "content_same": false
        },
        {
          "line": 1537,
          "old_api": "hash_to_hex",
          "new_api": null,
          "old_text": "hash_to_hex(keep_hash)",
          "new_text": null,
          "old_line_content": "\t\t\t\t    hash_to_hex(keep_hash), ext);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1540,
          "old_api": "for_each_file_in_pack_dir",
          "new_api": null,
          "old_text": "for_each_file_in_pack_dir(object_dir,\n\t\t\t\t  clear_midx_file_ext,\n\t\t\t\t  &data)",
          "new_text": null,
          "old_line_content": "\tfor_each_file_in_pack_dir(object_dir,",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1544,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(data.keep)",
          "new_text": null,
          "old_line_content": "\tfree(data.keep);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1551,
          "old_api": "get_midx_filename",
          "new_api": null,
          "old_text": "get_midx_filename(&midx, r->objects->odb->path)",
          "new_text": null,
          "old_line_content": "\tget_midx_filename(&midx, r->objects->odb->path);",
          "new_line_content": "\tdata.ext = ext;",
          "content_same": false
        },
        {
          "line": 1554,
          "old_api": "close_midx",
          "new_api": null,
          "old_text": "close_midx(r->objects->multi_pack_index)",
          "new_text": null,
          "old_line_content": "\t\tclose_midx(r->objects->multi_pack_index);",
          "new_line_content": "\t\t\t\t  clear_midx_file_ext,",
          "content_same": false
        },
        {
          "line": 1558,
          "old_api": "remove_path",
          "new_api": null,
          "old_text": "remove_path(midx.buf)",
          "new_text": null,
          "old_line_content": "\tif (remove_path(midx.buf))",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1559,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"failed to clear multi-pack-index at %s\")",
          "new_text": null,
          "old_line_content": "\t\tdie(_(\"failed to clear multi-pack-index at %s\"), midx.buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1561,
          "old_api": "clear_midx_files_ext",
          "new_api": null,
          "old_text": "clear_midx_files_ext(r->objects->odb->path, \".bitmap\", NULL)",
          "new_text": null,
          "old_line_content": "\tclear_midx_files_ext(r->objects->odb->path, \".bitmap\", NULL);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1562,
          "old_api": "clear_midx_files_ext",
          "new_api": null,
          "old_text": "clear_midx_files_ext(r->objects->odb->path, \".rev\", NULL)",
          "new_text": null,
          "old_line_content": "\tclear_midx_files_ext(r->objects->odb->path, \".rev\", NULL);",
          "new_line_content": "\tstruct strbuf midx = STRBUF_INIT;",
          "content_same": false
        },
        {
          "line": 1569,
          "old_api": "format (printf, 1, 2)",
          "new_api": null,
          "old_text": "format (printf, 1, 2)",
          "new_text": null,
          "old_line_content": "__attribute__((format (printf, 1, 2)))",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1576,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"\\n\")",
          "new_text": null,
          "old_line_content": "\tfprintf(stderr, \"\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1611,
          "old_api": "load_multi_pack_index",
          "new_api": null,
          "old_text": "load_multi_pack_index(object_dir, 1)",
          "new_text": null,
          "old_line_content": "\tstruct multi_pack_index *m = load_multi_pack_index(object_dir, 1);",
          "new_line_content": "#define SPARSE_PROGRESS_INTERVAL (1 << 12)",
          "content_same": false
        },
        {
          "line": 1619,
          "old_api": "get_midx_filename",
          "new_api": null,
          "old_text": "get_midx_filename(&filename, object_dir)",
          "new_text": null,
          "old_line_content": "\t\tget_midx_filename(&filename, object_dir);",
          "new_line_content": "int verify_midx_file(struct repository *r, const char *object_dir, unsigned flags)",
          "content_same": false
        },
        {
          "line": 1621,
          "old_api": "stat",
          "new_api": null,
          "old_text": "stat(filename.buf, &sb)",
          "new_text": null,
          "old_line_content": "\t\tif (!stat(filename.buf, &sb)) {",
          "new_line_content": "\tstruct pair_pos_vs_id *pairs = NULL;",
          "content_same": false
        },
        {
          "line": 1622,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"multi-pack-index file exists, but failed to parse\")",
          "new_text": null,
          "old_line_content": "\t\t\terror(_(\"multi-pack-index file exists, but failed to parse\"));",
          "new_line_content": "\tuint32_t i;",
          "content_same": false
        },
        {
          "line": 1625,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&filename)",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_release(&filename);",
          "new_line_content": "\tverify_midx_error = 0;",
          "content_same": false
        },
        {
          "line": 1629,
          "old_api": "midx_checksum_valid",
          "new_api": null,
          "old_text": "midx_checksum_valid(m)",
          "new_text": null,
          "old_line_content": "\tif (!midx_checksum_valid(m))",
          "new_line_content": "\t\tstruct stat sb;",
          "content_same": false
        },
        {
          "line": 1630,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"incorrect checksum\")",
          "new_text": null,
          "old_line_content": "\t\tmidx_report(_(\"incorrect checksum\"));",
          "new_line_content": "\t\tstruct strbuf filename = STRBUF_INIT;",
          "content_same": false
        },
        {
          "line": 1633,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"Looking for referenced packfiles\")",
          "new_text": null,
          "old_line_content": "\t\tprogress = start_delayed_progress(_(\"Looking for referenced packfiles\"),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1636,
          "old_api": "prepare_midx_pack",
          "new_api": null,
          "old_text": "prepare_midx_pack(r, m, i)",
          "new_text": null,
          "old_line_content": "\t\tif (prepare_midx_pack(r, m, i))",
          "new_line_content": "\t\t\tresult = 1;",
          "content_same": false
        },
        {
          "line": 1637,
          "old_api": "midx_report",
          "new_api": null,
          "old_text": "midx_report(\"failed to load pack in position %d\", i)",
          "new_text": null,
          "old_line_content": "\t\t\tmidx_report(\"failed to load pack in position %d\", i);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1639,
          "old_api": "display_progress",
          "new_api": null,
          "old_text": "display_progress(progress, i + 1)",
          "new_text": null,
          "old_line_content": "\t\tdisplay_progress(progress, i + 1);",
          "new_line_content": "\t\treturn result;",
          "content_same": false
        },
        {
          "line": 1641,
          "old_api": "stop_progress",
          "new_api": null,
          "old_text": "stop_progress(&progress)",
          "new_text": null,
          "old_line_content": "\tstop_progress(&progress);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1644,
          "old_api": "ntohl",
          "new_api": null,
          "old_text": "ntohl(m->chunk_oid_fanout[i])",
          "new_text": null,
          "old_line_content": "\t\tuint32_t oid_fanout1 = ntohl(m->chunk_oid_fanout[i]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1645,
          "old_api": "ntohl",
          "new_api": null,
          "old_text": "ntohl(m->chunk_oid_fanout[i + 1])",
          "new_text": null,
          "old_line_content": "\t\tuint32_t oid_fanout2 = ntohl(m->chunk_oid_fanout[i + 1]);",
          "new_line_content": "\tif (flags & MIDX_PROGRESS)",
          "content_same": false
        },
        {
          "line": 1648,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"oid fanout out of order: fanout[%d] = %\"PRIx32\" > %\"PRIx32\" = fanout[%d]\")",
          "new_text": null,
          "old_line_content": "\t\t\tmidx_report(_(\"oid fanout out of order: fanout[%d] = %\"PRIx32\" > %\"PRIx32\" = fanout[%d]\"),",
          "new_line_content": "\tfor (i = 0; i < m->num_packs; i++) {",
          "content_same": false
        },
        {
          "line": 1653,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"the midx contains no oid\")",
          "new_text": null,
          "old_line_content": "\t\tmidx_report(_(\"the midx contains no oid\"));",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1662,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"Verifying OID order in multi-pack-index\")",
          "new_text": null,
          "old_line_content": "\t\tprogress = start_sparse_progress(_(\"Verifying OID order in multi-pack-index\"),",
          "new_line_content": "\t\t\t\t    i, oid_fanout1, oid_fanout2, i + 1);",
          "content_same": false
        },
        {
          "line": 1667,
          "old_api": "nth_midxed_object_oid",
          "new_api": null,
          "old_text": "nth_midxed_object_oid(&oid1, m, i)",
          "new_text": null,
          "old_line_content": "\t\tnth_midxed_object_oid(&oid1, m, i);",
          "new_line_content": "\t\t/*",
          "content_same": false
        },
        {
          "line": 1668,
          "old_api": "nth_midxed_object_oid",
          "new_api": null,
          "old_text": "nth_midxed_object_oid(&oid2, m, i + 1)",
          "new_text": null,
          "old_line_content": "\t\tnth_midxed_object_oid(&oid2, m, i + 1);",
          "new_line_content": "\t\t * Remaining tests assume that we have objects, so we can",
          "content_same": false
        },
        {
          "line": 1670,
          "old_api": "oidcmp",
          "new_api": null,
          "old_text": "oidcmp(&oid1, &oid2)",
          "new_text": null,
          "old_line_content": "\t\tif (oidcmp(&oid1, &oid2) >= 0)",
          "new_line_content": "\t\t */",
          "content_same": false
        },
        {
          "line": 1671,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"oid lookup out of order: oid[%d] = %s >= %s = oid[%d]\")",
          "new_text": null,
          "old_line_content": "\t\t\tmidx_report(_(\"oid lookup out of order: oid[%d] = %s >= %s = oid[%d]\"),",
          "new_line_content": "\t\tgoto cleanup;",
          "content_same": false
        },
        {
          "line": 1672,
          "old_api": "oid_to_hex",
          "new_api": null,
          "old_text": "oid_to_hex(&oid2)",
          "new_text": null,
          "old_line_content": "\t\t\t\t    i, oid_to_hex(&oid1), oid_to_hex(&oid2), i + 1);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1674,
          "old_api": "midx_display_sparse_progress",
          "new_api": null,
          "old_text": "midx_display_sparse_progress(progress, i + 1)",
          "new_text": null,
          "old_line_content": "\t\tmidx_display_sparse_progress(progress, i + 1);",
          "new_line_content": "\tif (flags & MIDX_PROGRESS)",
          "content_same": false
        },
        {
          "line": 1676,
          "old_api": "stop_progress",
          "new_api": null,
          "old_text": "stop_progress(&progress)",
          "new_text": null,
          "old_line_content": "\tstop_progress(&progress);",
          "new_line_content": "\t\t\t\t\t\t m->num_objects - 1);",
          "content_same": false
        },
        {
          "line": 1691,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"Sorting objects by packfile\")",
          "new_text": null,
          "old_line_content": "\t\tprogress = start_sparse_progress(_(\"Sorting objects by packfile\"),",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 1693,
          "old_api": "display_progress",
          "new_api": null,
          "old_text": "display_progress(progress, 0)",
          "new_text": null,
          "old_line_content": "\tdisplay_progress(progress, 0); /* TODO: Measure QSORT() progress */",
          "new_line_content": "\t * to group the objects by packfile.  Use this permutation to visit",
          "content_same": false
        },
        {
          "line": 1694,
          "old_api": "QSORT",
          "new_api": null,
          "old_text": "QSORT(pairs, m->num_objects, compare_pair_pos_vs_id)",
          "new_text": null,
          "old_line_content": "\tQSORT(pairs, m->num_objects, compare_pair_pos_vs_id);",
          "new_line_content": "\t * each of the objects and only require 1 packfile to be open at a",
          "content_same": false
        },
        {
          "line": 1695,
          "old_api": "stop_progress",
          "new_api": null,
          "old_text": "stop_progress(&progress)",
          "new_text": null,
          "old_line_content": "\tstop_progress(&progress);",
          "new_line_content": "\t * time.",
          "content_same": false
        },
        {
          "line": 1698,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"Verifying object offsets\")",
          "new_text": null,
          "old_line_content": "\t\tprogress = start_sparse_progress(_(\"Verifying object offsets\"), m->num_objects);",
          "new_line_content": "\tfor (i = 0; i < m->num_objects; i++) {",
          "content_same": false
        },
        {
          "line": 1713,
          "old_api": "fill_midx_entry",
          "new_api": null,
          "old_text": "fill_midx_entry(r, &oid, &e, m)",
          "new_text": null,
          "old_line_content": "\t\tif (!fill_midx_entry(r, &oid, &e, m)) {",
          "new_line_content": "\t\tstruct object_id oid;",
          "content_same": false
        },
        {
          "line": 1714,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"failed to load pack entry for oid[%d] = %s\")",
          "new_text": null,
          "old_line_content": "\t\t\tmidx_report(_(\"failed to load pack entry for oid[%d] = %s\"),",
          "new_line_content": "\t\tstruct pack_entry e;",
          "content_same": false
        },
        {
          "line": 1715,
          "old_api": "oid_to_hex",
          "new_api": null,
          "old_text": "oid_to_hex(&oid)",
          "new_text": null,
          "old_line_content": "\t\t\t\t    pairs[i].pos, oid_to_hex(&oid));",
          "new_line_content": "\t\toff_t m_offset, p_offset;",
          "content_same": false
        },
        {
          "line": 1719,
          "old_api": "open_pack_index",
          "new_api": null,
          "old_text": "open_pack_index(e.p)",
          "new_text": null,
          "old_line_content": "\t\tif (open_pack_index(e.p)) {",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 1729,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"incorrect object offset for oid[%d] = %s: %\"PRIx64\" != %\"PRIx64)",
          "new_text": null,
          "old_line_content": "\t\t\tmidx_report(_(\"incorrect object offset for oid[%d] = %s: %\"PRIx64\" != %\"PRIx64),",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1730,
          "old_api": "oid_to_hex",
          "new_api": null,
          "old_text": "oid_to_hex(&oid)",
          "new_text": null,
          "old_line_content": "\t\t\t\t    pairs[i].pos, oid_to_hex(&oid), m_offset, p_offset);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1734,
          "old_api": "stop_progress",
          "new_api": null,
          "old_text": "stop_progress(&progress)",
          "new_text": null,
          "old_line_content": "\tstop_progress(&progress);",
          "new_line_content": "\t\t\t\t    e.p->pack_name);",
          "content_same": false
        },
        {
          "line": 1737,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(pairs)",
          "new_text": null,
          "old_line_content": "\tfree(pairs);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1738,
          "old_api": "close_midx",
          "new_api": null,
          "old_text": "close_midx(m)",
          "new_text": null,
          "old_line_content": "\tclose_midx(m);",
          "new_line_content": "\t\tm_offset = e.offset;",
          "content_same": false
        },
        {
          "line": 1753,
          "old_api": "CALLOC_ARRAY",
          "new_api": null,
          "old_text": "CALLOC_ARRAY(count, m->num_packs)",
          "new_text": null,
          "old_line_content": "\tCALLOC_ARRAY(count, m->num_packs);",
          "new_line_content": "\treturn verify_midx_error;",
          "content_same": false
        },
        {
          "line": 1756,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"Counting referenced objects\")",
          "new_text": null,
          "old_line_content": "\t\tprogress = start_delayed_progress(_(\"Counting referenced objects\"),",
          "new_line_content": "int expire_midx_packs(struct repository *r, const char *object_dir, unsigned flags)",
          "content_same": false
        },
        {
          "line": 1759,
          "old_api": "nth_midxed_pack_int_id",
          "new_api": null,
          "old_text": "nth_midxed_pack_int_id(m, i)",
          "new_text": null,
          "old_line_content": "\t\tint pack_int_id = nth_midxed_pack_int_id(m, i);",
          "new_line_content": "\tstruct string_list packs_to_drop = STRING_LIST_INIT_DUP;",
          "content_same": false
        },
        {
          "line": 1761,
          "old_api": "display_progress",
          "new_api": null,
          "old_text": "display_progress(progress, i + 1)",
          "new_text": null,
          "old_line_content": "\t\tdisplay_progress(progress, i + 1);",
          "new_line_content": "\tstruct progress *progress = NULL;",
          "content_same": false
        },
        {
          "line": 1763,
          "old_api": "stop_progress",
          "new_api": null,
          "old_text": "stop_progress(&progress)",
          "new_text": null,
          "old_line_content": "\tstop_progress(&progress);",
          "new_line_content": "\tif (!m)",
          "content_same": false
        },
        {
          "line": 1770,
          "old_api": "display_progress",
          "new_api": null,
          "old_text": "display_progress(progress, i + 1)",
          "new_text": null,
          "old_line_content": "\t\tdisplay_progress(progress, i + 1);",
          "new_line_content": "\t\t\t\t\t  m->num_objects);",
          "content_same": false
        },
        {
          "line": 1775,
          "old_api": "prepare_midx_pack",
          "new_api": null,
          "old_text": "prepare_midx_pack(r, m, i)",
          "new_text": null,
          "old_line_content": "\t\tif (prepare_midx_pack(r, m, i))",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1781,
          "old_api": "xstrdup",
          "new_api": null,
          "old_text": "xstrdup(m->packs[i]->pack_name)",
          "new_text": null,
          "old_line_content": "\t\tpack_name = xstrdup(m->packs[i]->pack_name);",
          "new_line_content": "\tfor (i = 0; i < m->num_packs; i++) {",
          "content_same": false
        },
        {
          "line": 1782,
          "old_api": "close_pack",
          "new_api": null,
          "old_text": "close_pack(m->packs[i])",
          "new_text": null,
          "old_line_content": "\t\tclose_pack(m->packs[i]);",
          "new_line_content": "\t\tchar *pack_name;",
          "content_same": false
        },
        {
          "line": 1784,
          "old_api": "string_list_insert",
          "new_api": null,
          "old_text": "string_list_insert(&packs_to_drop, m->pack_names[i])",
          "new_text": null,
          "old_line_content": "\t\tstring_list_insert(&packs_to_drop, m->pack_names[i]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1785,
          "old_api": "unlink_pack_path",
          "new_api": null,
          "old_text": "unlink_pack_path(pack_name, 0)",
          "new_text": null,
          "old_line_content": "\t\tunlink_pack_path(pack_name, 0);",
          "new_line_content": "\t\tif (count[i])",
          "content_same": false
        },
        {
          "line": 1786,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(pack_name)",
          "new_text": null,
          "old_line_content": "\t\tfree(pack_name);",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1790,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(count)",
          "new_text": null,
          "old_line_content": "\tfree(count);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1793,
          "old_api": "write_midx_internal",
          "new_api": null,
          "old_text": "write_midx_internal(object_dir, NULL, &packs_to_drop, NULL, NULL, flags)",
          "new_text": null,
          "old_line_content": "\t\tresult = write_midx_internal(object_dir, NULL, &packs_to_drop, NULL, NULL, flags);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1827,
          "old_api": "repo_config_get_bool",
          "new_api": null,
          "old_text": "repo_config_get_bool(r, \"repack.packkeptobjects\", &pack_kept_objects)",
          "new_text": null,
          "old_line_content": "\trepo_config_get_bool(r, \"repack.packkeptobjects\", &pack_kept_objects);",
          "new_line_content": "\t\treturn -1;",
          "content_same": false
        },
        {
          "line": 1830,
          "old_api": "prepare_midx_pack",
          "new_api": null,
          "old_text": "prepare_midx_pack(r, m, i)",
          "new_text": null,
          "old_line_content": "\t\tif (prepare_midx_pack(r, m, i))",
          "new_line_content": "\treturn 0;",
          "content_same": false
        },
        {
          "line": 1849,
          "old_api": "xcalloc",
          "new_api": null,
          "old_text": "xcalloc(m->num_packs, sizeof(struct repack_info))",
          "new_text": null,
          "old_line_content": "\tstruct repack_info *pack_info = xcalloc(m->num_packs, sizeof(struct repack_info));",
          "new_line_content": "\t\tcount++;",
          "content_same": false
        },
        {
          "line": 1852,
          "old_api": "repo_config_get_bool",
          "new_api": null,
          "old_text": "repo_config_get_bool(r, \"repack.packkeptobjects\", &pack_kept_objects)",
          "new_text": null,
          "old_line_content": "\trepo_config_get_bool(r, \"repack.packkeptobjects\", &pack_kept_objects);",
          "new_line_content": "\treturn count < 2;",
          "content_same": false
        },
        {
          "line": 1857,
          "old_api": "prepare_midx_pack",
          "new_api": null,
          "old_text": "prepare_midx_pack(r, m, i)",
          "new_text": null,
          "old_line_content": "\t\tif (prepare_midx_pack(r, m, i))",
          "new_line_content": "\t\t\t\t     unsigned char *include_pack,",
          "content_same": false
        },
        {
          "line": 1864,
          "old_api": "nth_midxed_pack_int_id",
          "new_api": null,
          "old_text": "nth_midxed_pack_int_id(m, i)",
          "new_text": null,
          "old_line_content": "\t\tuint32_t pack_int_id = nth_midxed_pack_int_id(m, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1868,
          "old_api": "QSORT",
          "new_api": null,
          "old_text": "QSORT(pack_info, m->num_packs, compare_by_mtime)",
          "new_text": null,
          "old_line_content": "\tQSORT(pack_info, m->num_packs, compare_by_mtime);",
          "new_line_content": "\t\tpack_info[i].pack_int_id = i;",
          "content_same": false
        },
        {
          "line": 1896,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(pack_info)",
          "new_text": null,
          "old_line_content": "\tfree(pack_info);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1912,
          "old_api": "lookup_multi_pack_index",
          "new_api": null,
          "old_text": "lookup_multi_pack_index(r, object_dir)",
          "new_text": null,
          "old_line_content": "\tstruct multi_pack_index *m = lookup_multi_pack_index(r, object_dir);",
          "new_line_content": "\t\treturn 1;",
          "content_same": false
        },
        {
          "line": 1928,
          "old_api": "fill_included_packs_batch",
          "new_api": null,
          "old_text": "fill_included_packs_batch(r, m, include_pack, batch_size)",
          "new_text": null,
          "old_line_content": "\t\tif (fill_included_packs_batch(r, m, include_pack, batch_size))",
          "new_line_content": "\t * When updating the default for these configuration",
          "content_same": false
        },
        {
          "line": 1930,
          "old_api": "fill_included_packs_all",
          "new_api": null,
          "old_text": "fill_included_packs_all(r, m, include_pack)",
          "new_text": null,
          "old_line_content": "\t} else if (fill_included_packs_all(r, m, include_pack))",
          "new_line_content": "\t * to match.",
          "content_same": false
        },
        {
          "line": 1933,
          "old_api": "repo_config_get_bool",
          "new_api": null,
          "old_text": "repo_config_get_bool(r, \"repack.usedeltabaseoffset\", &delta_base_offset)",
          "new_text": null,
          "old_line_content": "\trepo_config_get_bool(r, \"repack.usedeltabaseoffset\", &delta_base_offset);",
          "new_line_content": "\tint use_delta_islands = 0;",
          "content_same": false
        },
        {
          "line": 1934,
          "old_api": "repo_config_get_bool",
          "new_api": null,
          "old_text": "repo_config_get_bool(r, \"repack.usedeltaislands\", &use_delta_islands)",
          "new_text": null,
          "old_line_content": "\trepo_config_get_bool(r, \"repack.usedeltaislands\", &use_delta_islands);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1936,
          "old_api": "strvec_push",
          "new_api": null,
          "old_text": "strvec_push(&cmd.args, \"pack-objects\")",
          "new_text": null,
          "old_line_content": "\tstrvec_push(&cmd.args, \"pack-objects\");",
          "new_line_content": "\t\treturn 0;",
          "content_same": false
        },
        {
          "line": 1939,
          "old_api": "strbuf_addstr",
          "new_api": null,
          "old_text": "strbuf_addstr(&base_name, \"/pack/pack\")",
          "new_text": null,
          "old_line_content": "\tstrbuf_addstr(&base_name, \"/pack/pack\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1940,
          "old_api": "strvec_push",
          "new_api": null,
          "old_text": "strvec_push(&cmd.args, base_name.buf)",
          "new_text": null,
          "old_line_content": "\tstrvec_push(&cmd.args, base_name.buf);",
          "new_line_content": "\tif (batch_size) {",
          "content_same": false
        },
        {
          "line": 1945,
          "old_api": "strvec_push",
          "new_api": null,
          "old_text": "strvec_push(&cmd.args, \"--delta-islands\")",
          "new_text": null,
          "old_line_content": "\t\tstrvec_push(&cmd.args, \"--delta-islands\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1948,
          "old_api": "strvec_push",
          "new_api": null,
          "old_text": "strvec_push(&cmd.args, \"--progress\")",
          "new_text": null,
          "old_line_content": "\t\tstrvec_push(&cmd.args, \"--progress\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1950,
          "old_api": "strvec_push",
          "new_api": null,
          "old_text": "strvec_push(&cmd.args, \"-q\")",
          "new_text": null,
          "old_line_content": "\t\tstrvec_push(&cmd.args, \"-q\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1957,
          "old_api": "start_command",
          "new_api": null,
          "old_text": "start_command(&cmd)",
          "new_text": null,
          "old_line_content": "\tif (start_command(&cmd)) {",
          "new_line_content": "\tif (use_delta_islands)",
          "content_same": false
        },
        {
          "line": 1454,
          "old_api": "write_midx_bitmap",
          "new_api": null,
          "old_text": "write_midx_bitmap(midx_name.buf, midx_hash, &pdata,\n\t\t\t\t      commits, commits_nr, ctx.pack_order,\n\t\t\t\t      refs_snapshot, flags)",
          "new_text": null,
          "old_line_content": "\t\tif (write_midx_bitmap(midx_name.buf, midx_hash, &pdata,",
          "new_line_content": "\t\t/*",
          "content_same": false
        },
        {
          "line": 1967,
          "old_api": "nth_midxed_pack_int_id",
          "new_api": null,
          "old_text": "nth_midxed_pack_int_id(m, i)",
          "new_text": null,
          "old_line_content": "\t\tuint32_t pack_int_id = nth_midxed_pack_int_id(m, i);",
          "new_line_content": "\tcmd.git_cmd = 1;",
          "content_same": false
        },
        {
          "line": 1457,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"could not write multi-pack bitmap\")",
          "new_text": null,
          "old_line_content": "\t\t\terror(_(\"could not write multi-pack bitmap\"));",
          "new_line_content": "\t\t * bitmaps. We no longer need that array, so clear it to",
          "content_same": false
        },
        {
          "line": 1972,
          "old_api": "nth_midxed_object_oid",
          "new_api": null,
          "old_text": "nth_midxed_object_oid(&oid, m, i)",
          "new_text": null,
          "old_line_content": "\t\tnth_midxed_object_oid(&oid, m, i);",
          "new_line_content": "\t\tresult = 1;",
          "content_same": false
        },
        {
          "line": 1973,
          "old_api": "oid_to_hex",
          "new_api": null,
          "old_text": "oid_to_hex(&oid)",
          "new_text": null,
          "old_line_content": "\t\tfprintf(cmd_in, \"%s\\n\", oid_to_hex(&oid));",
          "new_line_content": "\t\tgoto cleanup;",
          "content_same": false
        },
        {
          "line": 1975,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(cmd_in)",
          "new_text": null,
          "old_line_content": "\tfclose(cmd_in);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1464,
          "old_api": "close_object_store",
          "new_api": null,
          "old_text": "close_object_store(the_repository->objects)",
          "new_text": null,
          "old_line_content": "\t\tclose_object_store(the_repository->objects);",
          "new_line_content": "\t\t\t\t      commits, commits_nr, ctx.pack_order,",
          "content_same": false
        },
        {
          "line": 1977,
          "old_api": "finish_command",
          "new_api": null,
          "old_text": "finish_command(&cmd)",
          "new_text": null,
          "old_line_content": "\tif (finish_command(&cmd)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1978,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"could not finish pack-objects\")",
          "new_text": null,
          "old_line_content": "\t\terror(_(\"could not finish pack-objects\"));",
          "new_line_content": "\tfor (i = 0; i < m->num_objects; i++) {",
          "content_same": false
        },
        {
          "line": 1467,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"could not write multi-pack-index\")",
          "new_text": null,
          "old_line_content": "\t\tdie_errno(_(\"could not write multi-pack-index\"));",
          "new_line_content": "\t\t\tresult = 1;",
          "content_same": false
        },
        {
          "line": 1469,
          "old_api": "clear_midx_files_ext",
          "new_api": null,
          "old_text": "clear_midx_files_ext(object_dir, \".bitmap\", midx_hash)",
          "new_text": null,
          "old_line_content": "\tclear_midx_files_ext(object_dir, \".bitmap\", midx_hash);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1470,
          "old_api": "clear_midx_files_ext",
          "new_api": null,
          "old_text": "clear_midx_files_ext(object_dir, \".rev\", midx_hash)",
          "new_text": null,
          "old_line_content": "\tclear_midx_files_ext(object_dir, \".rev\", midx_hash);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1983,
          "old_api": "write_midx_internal",
          "new_api": null,
          "old_text": "write_midx_internal(object_dir, NULL, NULL, NULL, NULL, flags)",
          "new_text": null,
          "old_line_content": "\tresult = write_midx_internal(object_dir, NULL, NULL, NULL, NULL, flags);",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1475,
          "old_api": "close_pack",
          "new_api": null,
          "old_text": "close_pack(ctx.info[i].p)",
          "new_text": null,
          "old_line_content": "\t\t\tclose_pack(ctx.info[i].p);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1476,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(ctx.info[i].p)",
          "new_text": null,
          "old_line_content": "\t\t\tfree(ctx.info[i].p);",
          "new_line_content": "\tif (ctx.m)",
          "content_same": false
        },
        {
          "line": 1478,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(ctx.info[i].pack_name)",
          "new_text": null,
          "old_line_content": "\t\tfree(ctx.info[i].pack_name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1481,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(ctx.info)",
          "new_text": null,
          "old_line_content": "\tfree(ctx.info);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1484,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(ctx.pack_order)",
          "new_text": null,
          "old_line_content": "\tfree(ctx.pack_order);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1485,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&midx_name)",
          "new_text": null,
          "old_line_content": "\tstrbuf_release(&midx_name);",
          "new_line_content": "cleanup:",
          "content_same": false
        },
        {
          "line": 1505,
          "old_api": "write_midx_internal",
          "new_api": null,
          "old_text": "write_midx_internal(object_dir, packs_to_include, NULL,\n\t\t\t\t   preferred_pack_name, refs_snapshot, flags)",
          "new_text": null,
          "old_line_content": "\treturn write_midx_internal(object_dir, packs_to_include, NULL,",
          "new_line_content": "\t\t    const char *refs_snapshot,",
          "content_same": false
        },
        {
          "line": 1519,
          "old_api": "starts_with",
          "new_api": null,
          "old_text": "starts_with(file_name, \"multi-pack-index-\")",
          "new_text": null,
          "old_line_content": "\tif (!(starts_with(file_name, \"multi-pack-index-\") &&",
          "new_line_content": "\t\t\t\t   preferred_pack_name, refs_snapshot, flags);",
          "content_same": false
        },
        {
          "line": 1520,
          "old_api": "ends_with",
          "new_api": null,
          "old_text": "ends_with(file_name, data->ext)",
          "new_text": null,
          "old_line_content": "\t      ends_with(file_name, data->ext)))",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1522,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(data->keep, file_name)",
          "new_text": null,
          "old_line_content": "\tif (data->keep && !strcmp(data->keep, file_name))",
          "new_line_content": "struct clear_midx_data {",
          "content_same": false
        },
        {
          "line": 1525,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(full_path)",
          "new_text": null,
          "old_line_content": "\tif (unlink(full_path))",
          "new_line_content": "};",
          "content_same": false
        },
        {
          "line": 1526,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"failed to remove %s\")",
          "new_text": null,
          "old_line_content": "\t\tdie_errno(_(\"failed to remove %s\"), full_path);",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 29,
      "total_additions": 110,
      "total_deletions": 109,
      "total_api_changes": 248
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 13,
        "api_related_lines": 248,
        "non_api_lines": 10,
        "non_api_line_numbers": [
          1472,
          1473,
          1474,
          1455,
          1456,
          1458,
          1459,
          1461,
          1462,
          1471
        ]
      }
    },
    "api_calls_before": 451,
    "api_calls_after": 452,
    "diff_info": {
      "added_lines": 13,
      "removed_lines": 0,
      "total_diff_lines": 32
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/f4f19fb63449e1beee02b0ec845319f7115fa9d0",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/f4f19fb63449e1beee02b0ec845319f7115fa9d0/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/f4f19fb63449e1beee02b0ec845319f7115fa9d0/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/f4f19fb63449e1beee02b0ec845319f7115fa9d0/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": true,
    "api_changes": {
      "replacements": [
        {
          "line": 207,
          "old_api": "free",
          "new_api": "diff_free_filespec_data",
          "old_text": "free(p)",
          "new_text": "diff_free_filespec_data(p->one)",
          "old_line_content": "\t\t\t\tfree(p); /* not diff_free_filepair(), we are",
          "new_line_content": "\t\t\t\tdiff_free_filespec_data(p->one);",
          "content_same": false
        },
        {
          "line": 215,
          "old_api": "free",
          "new_api": "diff_free_filespec_data",
          "old_text": "free(q->queue)",
          "new_text": "diff_free_filespec_data(p->one)",
          "old_line_content": "\tfree(q->queue);",
          "new_line_content": "\t\tdiff_free_filespec_data(p->one);",
          "content_same": false
        },
        {
          "line": 241,
          "old_api": "diff_queue",
          "new_api": "die",
          "old_text": "diff_queue(outq, d->one, c->two)",
          "new_text": "die(\"internal error in merge #3\")",
          "old_line_content": "\tdp = diff_queue(outq, d->one, c->two);",
          "new_line_content": "\t\tdie(\"internal error in merge #3\");",
          "content_same": false
        },
        {
          "line": 243,
          "old_api": "diff_free_filespec_data",
          "new_api": "die",
          "old_text": "diff_free_filespec_data(d->two)",
          "new_text": "die(\"internal error in merge #4\")",
          "old_line_content": "\tdiff_free_filespec_data(d->two);",
          "new_line_content": "\t\tdie(\"internal error in merge #4\");",
          "content_same": false
        },
        {
          "line": 245,
          "old_api": "free",
          "new_api": "diff_queue",
          "old_text": "free(d)",
          "new_text": "diff_queue(outq, d->one, c->two)",
          "old_line_content": "\tfree(d);",
          "new_line_content": "\tdp = diff_queue(outq, d->one, c->two);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 268,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(p->one->path, p->two->path)",
          "old_line_content": "\t\t\tfor (j = i + 1; j < q->nr; j++) {",
          "new_line_content": "\t\t\t !strcmp(p->one->path, p->two->path)) {",
          "content_same": false
        },
        {
          "line": 275,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(pp->one->path, pp->two->path)",
          "old_line_content": "\t\t\t\t\tq->queue[j] = NULL;",
          "new_line_content": "\t\t\t\t    !strcmp(pp->one->path, pp->two->path) &&",
          "content_same": false
        },
        {
          "line": 276,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(p->one->path, pp->two->path)",
          "old_line_content": "\t\t\t\t\tbreak;",
          "new_line_content": "\t\t\t\t    !strcmp(p->one->path, pp->two->path)) {",
          "content_same": false
        },
        {
          "line": 278,
          "old_api": null,
          "new_api": "merge_broken",
          "old_text": null,
          "new_text": "merge_broken(p, pp, &outq)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\t\tmerge_broken(p, pp, &outq);",
          "content_same": false
        },
        {
          "line": 287,
          "old_api": null,
          "new_api": "diff_q",
          "old_text": null,
          "new_text": "diff_q(&outq, p)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\t\tdiff_q(&outq, p);",
          "content_same": false
        },
        {
          "line": 290,
          "old_api": null,
          "new_api": "diff_q",
          "old_text": null,
          "new_text": "diff_q(&outq, p)",
          "old_line_content": "",
          "new_line_content": "\t\t\tdiff_q(&outq, p);",
          "content_same": false
        },
        {
          "line": 292,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(q->queue)",
          "old_line_content": "}",
          "new_line_content": "\tfree(q->queue);",
          "content_same": false
        },
        {
          "line": 208,
          "old_api": null,
          "new_api": "diff_free_filespec_data",
          "old_text": null,
          "new_text": "diff_free_filespec_data(p->two)",
          "old_line_content": "\t\t\t\t\t  * reusing one and two here.",
          "new_line_content": "\t\t\t\tdiff_free_filespec_data(p->two);",
          "content_same": false
        },
        {
          "line": 209,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(p)",
          "old_line_content": "\t\t\t\t\t  */",
          "new_line_content": "\t\t\t\tfree(p); /* not diff_free_filepair(), we are",
          "content_same": false
        },
        {
          "line": 216,
          "old_api": null,
          "new_api": "diff_free_filespec_data",
          "old_text": null,
          "new_text": "diff_free_filespec_data(p->two)",
          "old_line_content": "\t*q = outq;",
          "new_line_content": "\t\tdiff_free_filespec_data(p->two);",
          "content_same": false
        },
        {
          "line": 217,
          "old_api": null,
          "new_api": "diff_q",
          "old_text": null,
          "new_text": "diff_q(&outq, p)",
          "old_line_content": "",
          "new_line_content": "\t\tdiff_q(&outq, p);",
          "content_same": false
        },
        {
          "line": 219,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(q->queue)",
          "old_line_content": "}",
          "new_line_content": "\tfree(q->queue);",
          "content_same": false
        },
        {
          "line": 231,
          "old_api": null,
          "new_api": "DIFF_FILE_VALID",
          "old_text": null,
          "new_text": "DIFF_FILE_VALID(p->one)",
          "old_line_content": "\t/* Sanity check */",
          "new_line_content": "\tif (DIFF_FILE_VALID(p->one)) {",
          "content_same": false
        },
        {
          "line": 240,
          "old_api": null,
          "new_api": "DIFF_FILE_VALID",
          "old_text": null,
          "new_text": "DIFF_FILE_VALID(c->one)",
          "old_line_content": "",
          "new_line_content": "\tif (DIFF_FILE_VALID(c->one))",
          "content_same": false
        },
        {
          "line": 242,
          "old_api": null,
          "new_api": "DIFF_FILE_VALID",
          "old_text": null,
          "new_text": "DIFF_FILE_VALID(c->two)",
          "old_line_content": "\tdp->score = p->score;",
          "new_line_content": "\tif (!DIFF_FILE_VALID(c->two))",
          "content_same": false
        },
        {
          "line": 247,
          "old_api": null,
          "new_api": "diff_free_filespec_data",
          "old_text": null,
          "new_text": "diff_free_filespec_data(d->two)",
          "old_line_content": "}",
          "new_line_content": "\tdiff_free_filespec_data(d->two);",
          "content_same": false
        },
        {
          "line": 248,
          "old_api": null,
          "new_api": "diff_free_filespec_data",
          "old_text": null,
          "new_text": "diff_free_filespec_data(c->one)",
          "old_line_content": "",
          "new_line_content": "\tdiff_free_filespec_data(c->one);",
          "content_same": false
        },
        {
          "line": 249,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(d)",
          "old_line_content": "void diffcore_merge_broken(void)",
          "new_line_content": "\tfree(d);",
          "content_same": false
        },
        {
          "line": 250,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(c)",
          "old_line_content": "{",
          "new_line_content": "\tfree(c);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 288,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(q->queue)",
          "new_text": null,
          "old_line_content": "\tfree(q->queue);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 227,
          "old_api": "DIFF_FILE_VALID",
          "new_api": null,
          "old_text": "DIFF_FILE_VALID(p->one)",
          "new_text": null,
          "old_line_content": "\tif (DIFF_FILE_VALID(p->one)) {",
          "new_line_content": "\t\t\t struct diff_queue_struct *outq)",
          "content_same": false
        },
        {
          "line": 264,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(p->one->path, p->two->path)",
          "new_text": null,
          "old_line_content": "\t\t\t !strcmp(p->one->path, p->two->path)) {",
          "new_line_content": "\t\tif (!p)",
          "content_same": false
        },
        {
          "line": 232,
          "old_api": "DIFF_FILE_VALID",
          "new_api": null,
          "old_text": "DIFF_FILE_VALID(d->one)",
          "new_text": null,
          "old_line_content": "\tif (!DIFF_FILE_VALID(d->one))",
          "new_line_content": "\t\t/* this must be a delete half */",
          "content_same": false
        },
        {
          "line": 233,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"internal error in merge #1\")",
          "new_text": null,
          "old_line_content": "\t\tdie(\"internal error in merge #1\");",
          "new_line_content": "\t\td = p; c = pp;",
          "content_same": false
        },
        {
          "line": 234,
          "old_api": "DIFF_FILE_VALID",
          "new_api": null,
          "old_text": "DIFF_FILE_VALID(d->two)",
          "new_text": null,
          "old_line_content": "\tif (DIFF_FILE_VALID(d->two))",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 235,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"internal error in merge #2\")",
          "new_text": null,
          "old_line_content": "\t\tdie(\"internal error in merge #2\");",
          "new_line_content": "\t/* Sanity check */",
          "content_same": false
        },
        {
          "line": 271,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(pp->one->path, pp->two->path)",
          "new_text": null,
          "old_line_content": "\t\t\t\t    !strcmp(pp->one->path, pp->two->path) &&",
          "new_line_content": "\t\t\t */",
          "content_same": false
        },
        {
          "line": 272,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(p->one->path, pp->two->path)",
          "new_text": null,
          "old_line_content": "\t\t\t\t    !strcmp(p->one->path, pp->two->path)) {",
          "new_line_content": "\t\t\tfor (j = i + 1; j < q->nr; j++) {",
          "content_same": false
        },
        {
          "line": 274,
          "old_api": "merge_broken",
          "new_api": null,
          "old_text": "merge_broken(p, pp, &outq)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tmerge_broken(p, pp, &outq);",
          "new_line_content": "\t\t\t\tif (pp->broken_pair &&",
          "content_same": false
        },
        {
          "line": 244,
          "old_api": "diff_free_filespec_data",
          "new_api": null,
          "old_text": "diff_free_filespec_data(c->one)",
          "new_text": null,
          "old_line_content": "\tdiff_free_filespec_data(c->one);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 213,
          "old_api": "diff_q",
          "new_api": null,
          "old_text": "diff_q(&outq, p)",
          "new_text": null,
          "old_line_content": "\t\tdiff_q(&outq, p);",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 246,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(c)",
          "new_text": null,
          "old_line_content": "\tfree(c);",
          "new_line_content": "\tdp->score = p->score;",
          "content_same": false
        },
        {
          "line": 283,
          "old_api": "diff_q",
          "new_api": null,
          "old_text": "diff_q(&outq, p)",
          "new_text": null,
          "old_line_content": "\t\t\t\tdiff_q(&outq, p);",
          "new_line_content": "\t\t\tif (q->nr <= j)",
          "content_same": false
        },
        {
          "line": 286,
          "old_api": "diff_q",
          "new_api": null,
          "old_text": "diff_q(&outq, p)",
          "new_text": null,
          "old_line_content": "\t\t\tdiff_q(&outq, p);",
          "new_line_content": "\t\t\t\t */",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 5,
      "total_additions": 19,
      "total_deletions": 15,
      "total_api_changes": 39
    },
    "non_api_changes": {
      "has_non_api_changes": false,
      "evidence": {
        "total_diff_lines": 4,
        "api_related_lines": 39,
        "non_api_lines": 0,
        "non_api_line_numbers": []
      }
    },
    "api_calls_before": 40,
    "api_calls_after": 44,
    "diff_info": {
      "added_lines": 4,
      "removed_lines": 0,
      "total_diff_lines": 22
    }
  }
}
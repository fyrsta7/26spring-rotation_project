{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/9e8e704f0bc14da325aa63f639c6dc782c81e26f",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/9e8e704f0bc14da325aa63f639c6dc782c81e26f/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/9e8e704f0bc14da325aa63f639c6dc782c81e26f/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/9e8e704f0bc14da325aa63f639c6dc782c81e26f/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": true,
    "api_changes": {
      "replacements": [
        {
          "line": 780,
          "old_api": "server_supports",
          "new_api": "sort_ref_list",
          "old_text": "server_supports(\"shallow\")",
          "new_text": "sort_ref_list(&ref, ref_compare_name)",
          "old_line_content": "\tif (is_repository_shallow() && !server_supports(\"shallow\"))",
          "new_line_content": "\tsort_ref_list(&ref, ref_compare_name);",
          "content_same": false
        },
        {
          "line": 784,
          "old_api": "fprintf",
          "new_api": "server_supports",
          "old_text": "fprintf(stderr, \"Server supports multi_ack_detailed\\n\")",
          "new_text": "server_supports(\"multi_ack_detailed\")",
          "old_line_content": "\t\t\tfprintf(stderr, \"Server supports multi_ack_detailed\\n\");",
          "new_line_content": "\tif (server_supports(\"multi_ack_detailed\")) {",
          "content_same": false
        },
        {
          "line": 786,
          "old_api": "server_supports",
          "new_api": "fprintf",
          "old_text": "server_supports(\"no-done\")",
          "new_text": "fprintf(stderr, \"Server supports multi_ack_detailed\\n\")",
          "old_line_content": "\t\tif (server_supports(\"no-done\")) {",
          "new_line_content": "\t\t\tfprintf(stderr, \"Server supports multi_ack_detailed\\n\");",
          "content_same": false
        },
        {
          "line": 788,
          "old_api": "fprintf",
          "new_api": "server_supports",
          "old_text": "fprintf(stderr, \"Server supports no-done\\n\")",
          "new_text": "server_supports(\"no-done\")",
          "old_line_content": "\t\t\t\tfprintf(stderr, \"Server supports no-done\\n\");",
          "new_line_content": "\t\tif (server_supports(\"no-done\")) {",
          "content_same": false
        },
        {
          "line": 795,
          "old_api": "fprintf",
          "new_api": "server_supports",
          "old_text": "fprintf(stderr, \"Server supports multi_ack\\n\")",
          "new_text": "server_supports(\"multi_ack\")",
          "old_line_content": "\t\t\tfprintf(stderr, \"Server supports multi_ack\\n\");",
          "new_line_content": "\telse if (server_supports(\"multi_ack\")) {",
          "content_same": false
        },
        {
          "line": 800,
          "old_api": "fprintf",
          "new_api": "server_supports",
          "old_text": "fprintf(stderr, \"Server supports side-band-64k\\n\")",
          "new_text": "server_supports(\"side-band-64k\")",
          "old_line_content": "\t\t\tfprintf(stderr, \"Server supports side-band-64k\\n\");",
          "new_line_content": "\tif (server_supports(\"side-band-64k\")) {",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": "fprintf",
          "new_api": "server_supports",
          "old_text": "fprintf(stderr, \"Server supports side-band\\n\")",
          "new_text": "server_supports(\"side-band\")",
          "old_line_content": "\t\t\tfprintf(stderr, \"Server supports side-band\\n\");",
          "new_line_content": "\telse if (server_supports(\"side-band\")) {",
          "content_same": false
        },
        {
          "line": 810,
          "old_api": "fprintf",
          "new_api": "server_supports",
          "old_text": "fprintf(stderr, \"Server supports ofs-delta\\n\")",
          "new_text": "server_supports(\"ofs-delta\")",
          "old_line_content": "\t\t\tfprintf(stderr, \"Server supports ofs-delta\\n\");",
          "new_line_content": "\tif (server_supports(\"ofs-delta\")) {",
          "content_same": false
        },
        {
          "line": 827,
          "old_api": "die",
          "new_api": "packet_flush",
          "old_text": "die(\"git fetch-pack: fetch failed.\")",
          "new_text": "packet_flush(fd[1])",
          "old_line_content": "\t\tdie(\"git fetch-pack: fetch failed.\");",
          "new_line_content": "\t\tpacket_flush(fd[1]);",
          "content_same": false
        },
        {
          "line": 1001,
          "old_api": "strbuf_detach",
          "new_api": "strbuf_getline",
          "old_text": "strbuf_detach(&line, NULL)",
          "new_text": "strbuf_getline(&line, stdin, '\\n')",
          "old_line_content": "\t\t\t\theads[nr_heads++] = strbuf_detach(&line, NULL);",
          "new_line_content": "\t\t\twhile (strbuf_getline(&line, stdin, '\\n') != EOF) {",
          "content_same": false
        },
        {
          "line": 1003,
          "old_api": "strbuf_release",
          "new_api": "strbuf_detach",
          "old_text": "strbuf_release(&line)",
          "new_text": "strbuf_detach(&line, NULL)",
          "old_line_content": "\t\t\tstrbuf_release(&line);",
          "new_line_content": "\t\t\t\theads[nr_heads++] = strbuf_detach(&line, NULL);",
          "content_same": false
        },
        {
          "line": 1018,
          "old_api": "fetch_pack",
          "new_api": "get_remote_heads",
          "old_text": "fetch_pack(&args, fd, conn, ref, dest,\n\t\tnr_heads, heads, pack_lockfile_ptr)",
          "new_text": "get_remote_heads(fd[0], &ref, 0, NULL)",
          "old_line_content": "\tref = fetch_pack(&args, fd, conn, ref, dest,",
          "new_line_content": "\tget_remote_heads(fd[0], &ref, 0, NULL);",
          "content_same": false
        },
        {
          "line": 1024,
          "old_api": "close",
          "new_api": "fflush",
          "old_text": "close(fd[0])",
          "new_text": "fflush(stdout)",
          "old_line_content": "\tclose(fd[0]);",
          "new_line_content": "\t\tfflush(stdout);",
          "content_same": false
        },
        {
          "line": 1026,
          "old_api": "finish_connect",
          "new_api": "close",
          "old_text": "finish_connect(conn)",
          "new_text": "close(fd[0])",
          "old_line_content": "\tif (finish_connect(conn))",
          "new_line_content": "\tclose(fd[0]);",
          "content_same": false
        },
        {
          "line": 1069,
          "old_api": "memcpy",
          "new_api": "fetch_pack_setup",
          "old_text": "memcpy(&args, my_args, sizeof(args))",
          "new_text": "fetch_pack_setup()",
          "old_line_content": "\t\tmemcpy(&args, my_args, sizeof(args));",
          "new_line_content": "\tfetch_pack_setup();",
          "content_same": false
        },
        {
          "line": 1071,
          "old_api": "git_path",
          "new_api": "memcpy",
          "old_text": "git_path(\"shallow\")",
          "new_text": "memcpy(&args, my_args, sizeof(args))",
          "old_line_content": "\t\tif (stat(git_path(\"shallow\"), &st))",
          "new_line_content": "\t\tmemcpy(&args, my_args, sizeof(args));",
          "content_same": false
        },
        {
          "line": 1084,
          "old_api": "do_fetch_pack",
          "new_api": "die",
          "old_text": "do_fetch_pack(fd, ref, nr_heads, heads, pack_lockfile)",
          "new_text": "die(\"no matching remote head\")",
          "old_line_content": "\tref_cpy = do_fetch_pack(fd, ref, nr_heads, heads, pack_lockfile);",
          "new_line_content": "\t\tdie(\"no matching remote head\");",
          "content_same": false
        },
        {
          "line": 1096,
          "old_api": "die",
          "new_api": "stat",
          "old_text": "die(\"shallow file was removed during fetch\")",
          "new_text": "stat(shallow, &st)",
          "old_line_content": "\t\t\t\tdie(\"shallow file was removed during fetch\");",
          "new_line_content": "\t\tif (stat(shallow, &st)) {",
          "content_same": false
        },
        {
          "line": 1104,
          "old_api": "hold_lock_file_for_update",
          "new_api": "die",
          "old_text": "hold_lock_file_for_update(&lock, shallow,\n\t\t\t\t\t       LOCK_DIE_ON_ERROR)",
          "new_text": "die(\"shallow file was changed during fetch\")",
          "old_line_content": "\t\tfd = hold_lock_file_for_update(&lock, shallow,",
          "new_line_content": "\t\t\tdie(\"shallow file was changed during fetch\");",
          "content_same": false
        },
        {
          "line": 1106,
          "old_api": "write_shallow_commits",
          "new_api": "hold_lock_file_for_update",
          "old_text": "write_shallow_commits(&sb, 0)",
          "new_text": "hold_lock_file_for_update(&lock, shallow,\n\t\t\t\t\t       LOCK_DIE_ON_ERROR)",
          "old_line_content": "\t\tif (!write_shallow_commits(&sb, 0)",
          "new_line_content": "\t\tfd = hold_lock_file_for_update(&lock, shallow,",
          "content_same": false
        },
        {
          "line": 1108,
          "old_api": "unlink_or_warn",
          "new_api": "write_shallow_commits",
          "old_text": "unlink_or_warn(shallow)",
          "new_text": "write_shallow_commits(&sb, 0)",
          "old_line_content": "\t\t\tunlink_or_warn(shallow);",
          "new_line_content": "\t\tif (!write_shallow_commits(&sb, 0)",
          "content_same": false
        },
        {
          "line": 1109,
          "old_api": "rollback_lock_file",
          "new_api": "write_in_full",
          "old_text": "rollback_lock_file(&lock)",
          "new_text": "write_in_full(fd, sb.buf, sb.len)",
          "old_line_content": "\t\t\trollback_lock_file(&lock);",
          "new_line_content": "\t\t || write_in_full(fd, sb.buf, sb.len) != sb.len) {",
          "content_same": false
        },
        {
          "line": 1111,
          "old_api": "commit_lock_file",
          "new_api": "rollback_lock_file",
          "old_text": "commit_lock_file(&lock)",
          "new_text": "rollback_lock_file(&lock)",
          "old_line_content": "\t\t\tcommit_lock_file(&lock);",
          "new_line_content": "\t\t\trollback_lock_file(&lock);",
          "content_same": false
        },
        {
          "line": 1113,
          "old_api": "strbuf_release",
          "new_api": "commit_lock_file",
          "old_text": "strbuf_release(&sb)",
          "new_text": "commit_lock_file(&lock)",
          "old_line_content": "\t\tstrbuf_release(&sb);",
          "new_line_content": "\t\t\tcommit_lock_file(&lock);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1027,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd[1])",
          "old_line_content": "\t\tref = NULL;",
          "new_line_content": "\tclose(fd[1]);",
          "content_same": false
        },
        {
          "line": 1028,
          "old_api": null,
          "new_api": "finish_connect",
          "old_text": null,
          "new_text": "finish_connect(conn)",
          "old_line_content": "\tret = !ref;",
          "new_line_content": "\tif (finish_connect(conn))",
          "content_same": false
        },
        {
          "line": 903,
          "old_api": null,
          "new_api": "packet_trace_identity",
          "old_text": null,
          "new_text": "packet_trace_identity(\"fetch-pack\")",
          "old_line_content": "\tnr_heads = 0;",
          "new_line_content": "\tpacket_trace_identity(\"fetch-pack\");",
          "content_same": false
        },
        {
          "line": 783,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"Server does not support shallow clients\")",
          "old_line_content": "\t\tif (args.verbose)",
          "new_line_content": "\t\tdie(\"Server does not support shallow clients\");",
          "content_same": false
        },
        {
          "line": 1040,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"no such remote ref %s\", heads[i])",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\terror(\"no such remote ref %s\", heads[i]);",
          "content_same": false
        },
        {
          "line": 911,
          "old_api": null,
          "new_api": "prefixcmp",
          "old_text": null,
          "new_text": "prefixcmp(arg, \"--upload-pack=\")",
          "old_line_content": "\t\t\t\tcontinue;",
          "new_line_content": "\t\t\tif (!prefixcmp(arg, \"--upload-pack=\")) {",
          "content_same": false
        },
        {
          "line": 915,
          "old_api": null,
          "new_api": "prefixcmp",
          "old_text": null,
          "new_text": "prefixcmp(arg, \"--exec=\")",
          "old_line_content": "\t\t\t\tcontinue;",
          "new_line_content": "\t\t\tif (!prefixcmp(arg, \"--exec=\")) {",
          "content_same": false
        },
        {
          "line": 1045,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"%s %s\\n\",\n\t\t       sha1_to_hex(ref->old_sha1), ref->name)",
          "old_line_content": "\t\tref = ref->next;",
          "new_line_content": "\t\tprintf(\"%s %s\\n\",",
          "content_same": false
        },
        {
          "line": 1046,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(ref->old_sha1)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t       sha1_to_hex(ref->old_sha1), ref->name);",
          "content_same": false
        },
        {
          "line": 790,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"Server supports no-done\\n\")",
          "old_line_content": "\t\t\t\tno_done = 1;",
          "new_line_content": "\t\t\t\tfprintf(stderr, \"Server supports no-done\\n\");",
          "content_same": false
        },
        {
          "line": 919,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"-q\", arg)",
          "old_line_content": "\t\t\t\tcontinue;",
          "new_line_content": "\t\t\tif (!strcmp(\"--quiet\", arg) || !strcmp(\"-q\", arg)) {",
          "content_same": false
        },
        {
          "line": 923,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"-k\", arg)",
          "old_line_content": "\t\t\t\targs.keep_pack = 1;",
          "new_line_content": "\t\t\tif (!strcmp(\"--keep\", arg) || !strcmp(\"-k\", arg)) {",
          "content_same": false
        },
        {
          "line": 797,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"Server supports multi_ack\\n\")",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tfprintf(stderr, \"Server supports multi_ack\\n\");",
          "content_same": false
        },
        {
          "line": 1055,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(*(const char **)a, *(const char **)b)",
          "old_line_content": "",
          "new_line_content": "\treturn strcmp(*(const char **)a, *(const char **)b);",
          "content_same": false
        },
        {
          "line": 928,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"--thin\", arg)",
          "old_line_content": "\t\t\t\tcontinue;",
          "new_line_content": "\t\t\tif (!strcmp(\"--thin\", arg)) {",
          "content_same": false
        },
        {
          "line": 802,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"Server supports side-band-64k\\n\")",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tfprintf(stderr, \"Server supports side-band-64k\\n\");",
          "content_same": false
        },
        {
          "line": 932,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"--include-tag\", arg)",
          "old_line_content": "\t\t\t\tcontinue;",
          "new_line_content": "\t\t\tif (!strcmp(\"--include-tag\", arg)) {",
          "content_same": false
        },
        {
          "line": 807,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"Server supports side-band\\n\")",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tfprintf(stderr, \"Server supports side-band\\n\");",
          "content_same": false
        },
        {
          "line": 936,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"--all\", arg)",
          "old_line_content": "\t\t\t\tcontinue;",
          "new_line_content": "\t\t\tif (!strcmp(\"--all\", arg)) {",
          "content_same": false
        },
        {
          "line": 812,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"Server supports ofs-delta\\n\")",
          "old_line_content": "\t\tprefer_ofs_delta = 0;",
          "new_line_content": "\t\t\tfprintf(stderr, \"Server supports ofs-delta\\n\");",
          "content_same": false
        },
        {
          "line": 940,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"--stdin\", arg)",
          "old_line_content": "\t\t\t\tcontinue;",
          "new_line_content": "\t\t\tif (!strcmp(\"--stdin\", arg)) {",
          "content_same": false
        },
        {
          "line": 815,
          "old_api": null,
          "new_api": "everything_local",
          "old_text": null,
          "new_text": "everything_local(&ref, nr_match, match)",
          "old_line_content": "\t\tgoto all_done;",
          "new_line_content": "\tif (everything_local(&ref, nr_match, match)) {",
          "content_same": false
        },
        {
          "line": 816,
          "old_api": null,
          "new_api": "packet_flush",
          "old_text": null,
          "new_text": "packet_flush(fd[1])",
          "old_line_content": "\t}",
          "new_line_content": "\t\tpacket_flush(fd[1]);",
          "content_same": false
        },
        {
          "line": 1073,
          "old_api": null,
          "new_api": "git_path",
          "old_text": null,
          "new_text": "git_path(\"shallow\")",
          "old_line_content": "\t}",
          "new_line_content": "\t\tif (stat(git_path(\"shallow\"), &st))",
          "content_same": false
        },
        {
          "line": 944,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"-v\", arg)",
          "old_line_content": "\t\t\t\tcontinue;",
          "new_line_content": "\t\t\tif (!strcmp(\"-v\", arg)) {",
          "content_same": false
        },
        {
          "line": 819,
          "old_api": null,
          "new_api": "find_common",
          "old_text": null,
          "new_text": "find_common(fd, sha1, ref)",
          "old_line_content": "\t\t\t/* When cloning, it is not unusual to have",
          "new_line_content": "\tif (find_common(fd, sha1, ref) < 0)",
          "content_same": false
        },
        {
          "line": 948,
          "old_api": null,
          "new_api": "prefixcmp",
          "old_text": null,
          "new_text": "prefixcmp(arg, \"--depth=\")",
          "old_line_content": "\t\t\t\tcontinue;",
          "new_line_content": "\t\t\tif (!prefixcmp(arg, \"--depth=\")) {",
          "content_same": false
        },
        {
          "line": 949,
          "old_api": null,
          "new_api": "strtol",
          "old_text": null,
          "new_text": "strtol(arg + 8, NULL, 0)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\targs.depth = strtol(arg + 8, NULL, 0);",
          "content_same": false
        },
        {
          "line": 1078,
          "old_api": null,
          "new_api": "remove_duplicates",
          "old_text": null,
          "new_text": "remove_duplicates(nr_heads, heads)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tnr_heads = remove_duplicates(nr_heads, heads);",
          "content_same": false
        },
        {
          "line": 1079,
          "old_api": null,
          "new_api": "qsort",
          "old_text": null,
          "new_text": "qsort(heads, nr_heads, sizeof(*heads), compare_heads)",
          "old_line_content": "",
          "new_line_content": "\t\tqsort(heads, nr_heads, sizeof(*heads), compare_heads);",
          "content_same": false
        },
        {
          "line": 824,
          "old_api": null,
          "new_api": "warning",
          "old_text": null,
          "new_text": "warning(\"no common commits\")",
          "old_line_content": "\tif (args.stateless_rpc)",
          "new_line_content": "\t\t\twarning(\"no common commits\");",
          "content_same": false
        },
        {
          "line": 952,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"--no-progress\", arg)",
          "old_line_content": "\t\t\t\tcontinue;",
          "new_line_content": "\t\t\tif (!strcmp(\"--no-progress\", arg)) {",
          "content_same": false
        },
        {
          "line": 1083,
          "old_api": null,
          "new_api": "packet_flush",
          "old_text": null,
          "new_text": "packet_flush(fd[1])",
          "old_line_content": "\t}",
          "new_line_content": "\t\tpacket_flush(fd[1]);",
          "content_same": false
        },
        {
          "line": 828,
          "old_api": null,
          "new_api": "get_pack",
          "old_text": null,
          "new_text": "get_pack(fd, pack_lockfile)",
          "old_line_content": "",
          "new_line_content": "\tif (get_pack(fd, pack_lockfile))",
          "content_same": false
        },
        {
          "line": 829,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"git fetch-pack: fetch failed.\")",
          "old_line_content": " all_done:",
          "new_line_content": "\t\tdie(\"git fetch-pack: fetch failed.\");",
          "content_same": false
        },
        {
          "line": 1086,
          "old_api": null,
          "new_api": "do_fetch_pack",
          "old_text": null,
          "new_text": "do_fetch_pack(fd, ref, nr_heads, heads, pack_lockfile)",
          "old_line_content": "\tif (args.depth > 0) {",
          "new_line_content": "\tref_cpy = do_fetch_pack(fd, ref, nr_heads, heads, pack_lockfile);",
          "content_same": false
        },
        {
          "line": 956,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"--stateless-rpc\", arg)",
          "old_line_content": "\t\t\t\tcontinue;",
          "new_line_content": "\t\t\tif (!strcmp(\"--stateless-rpc\", arg)) {",
          "content_same": false
        },
        {
          "line": 960,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"--lock-pack\", arg)",
          "old_line_content": "\t\t\t\tpack_lockfile_ptr = &pack_lockfile;",
          "new_line_content": "\t\t\tif (!strcmp(\"--lock-pack\", arg)) {",
          "content_same": false
        },
        {
          "line": 1091,
          "old_api": null,
          "new_api": "git_path",
          "old_text": null,
          "new_text": "git_path(\"shallow\")",
          "old_line_content": "",
          "new_line_content": "\t\tchar *shallow = git_path(\"shallow\");",
          "content_same": false
        },
        {
          "line": 965,
          "old_api": null,
          "new_api": "usage",
          "old_text": null,
          "new_text": "usage(fetch_pack_usage)",
          "old_line_content": "\t\tdest = (char *)arg;",
          "new_line_content": "\t\t\tusage(fetch_pack_usage);",
          "content_same": false
        },
        {
          "line": 1095,
          "old_api": null,
          "new_api": "ST_MTIME_NSEC",
          "old_text": null,
          "new_text": "ST_MTIME_NSEC(st)",
          "old_line_content": "\t\t\tif (mtime.sec)",
          "new_line_content": "\t\tmtime.nsec = ST_MTIME_NSEC(st);",
          "content_same": false
        },
        {
          "line": 1098,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"shallow file was removed during fetch\")",
          "old_line_content": "#ifdef USE_NSEC",
          "new_line_content": "\t\t\t\tdie(\"shallow file was removed during fetch\");",
          "content_same": false
        },
        {
          "line": 843,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(heads[src], heads[dst-1])",
          "old_line_content": "\treturn dst;",
          "new_line_content": "\t\tif (strcmp(heads[src], heads[dst-1]))",
          "content_same": false
        },
        {
          "line": 1101,
          "old_api": null,
          "new_api": "ST_MTIME_NSEC",
          "old_text": null,
          "new_text": "ST_MTIME_NSEC(st)",
          "old_line_content": "\t\t\t  )",
          "new_line_content": "\t\t\t\t|| ST_MTIME_NSEC(st) != mtime.nsec",
          "content_same": false
        },
        {
          "line": 973,
          "old_api": null,
          "new_api": "usage",
          "old_text": null,
          "new_text": "usage(fetch_pack_usage)",
          "old_line_content": "\tif (args.stdin_refs) {",
          "new_line_content": "\t\tusage(fetch_pack_usage);",
          "content_same": false
        },
        {
          "line": 850,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(var, \"fetch.unpacklimit\")",
          "old_line_content": "\t\treturn 0;",
          "new_line_content": "\tif (strcmp(var, \"fetch.unpacklimit\") == 0) {",
          "content_same": false
        },
        {
          "line": 851,
          "old_api": null,
          "new_api": "git_config_int",
          "old_text": null,
          "new_text": "git_config_int(var, value)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tfetch_unpack_limit = git_config_int(var, value);",
          "content_same": false
        },
        {
          "line": 1110,
          "old_api": null,
          "new_api": "unlink_or_warn",
          "old_text": null,
          "new_text": "unlink_or_warn(shallow)",
          "old_line_content": "\t\t} else {",
          "new_line_content": "\t\t\tunlink_or_warn(shallow);",
          "content_same": false
        },
        {
          "line": 855,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(var, \"transfer.unpacklimit\")",
          "old_line_content": "\t\treturn 0;",
          "new_line_content": "\tif (strcmp(var, \"transfer.unpacklimit\") == 0) {",
          "content_same": false
        },
        {
          "line": 856,
          "old_api": null,
          "new_api": "git_config_int",
          "old_text": null,
          "new_text": "git_config_int(var, value)",
          "old_line_content": "\t}",
          "new_line_content": "\t\ttransfer_unpack_limit = git_config_int(var, value);",
          "content_same": false
        },
        {
          "line": 982,
          "old_api": null,
          "new_api": "xmalloc",
          "old_text": null,
          "new_text": "xmalloc(size)",
          "old_line_content": "\t\t\t/* in stateless RPC mode we use pkt-line to read",
          "new_line_content": "\t\theads = memcpy(xmalloc(size), heads, size);",
          "content_same": false
        },
        {
          "line": 1115,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&sb)",
          "old_line_content": "",
          "new_line_content": "\t\tstrbuf_release(&sb);",
          "content_same": false
        },
        {
          "line": 860,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(var, \"repack.usedeltabaseoffset\")",
          "old_line_content": "\t\treturn 0;",
          "new_line_content": "\tif (strcmp(var, \"repack.usedeltabaseoffset\") == 0) {",
          "content_same": false
        },
        {
          "line": 861,
          "old_api": null,
          "new_api": "git_config_bool",
          "old_text": null,
          "new_text": "git_config_bool(var, value)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tprefer_ofs_delta = git_config_bool(var, value);",
          "content_same": false
        },
        {
          "line": 1118,
          "old_api": null,
          "new_api": "reprepare_packed_git",
          "old_text": null,
          "new_text": "reprepare_packed_git()",
          "old_line_content": "}",
          "new_line_content": "\treprepare_packed_git();",
          "content_same": false
        },
        {
          "line": 989,
          "old_api": null,
          "new_api": "packet_read_line",
          "old_text": null,
          "new_text": "packet_read_line(0, line, sizeof(line))",
          "old_line_content": "\t\t\t\t\tbreak;",
          "new_line_content": "\t\t\t\tint n = packet_read_line(0, line, sizeof(line));",
          "content_same": false
        },
        {
          "line": 865,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(var, \"fetch.fsckobjects\")",
          "old_line_content": "\t\treturn 0;",
          "new_line_content": "\tif (!strcmp(var, \"fetch.fsckobjects\")) {",
          "content_same": false
        },
        {
          "line": 866,
          "old_api": null,
          "new_api": "git_config_bool",
          "old_text": null,
          "new_text": "git_config_bool(var, value)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tfetch_fsck_objects = git_config_bool(var, value);",
          "content_same": false
        },
        {
          "line": 994,
          "old_api": null,
          "new_api": "ALLOC_GROW",
          "old_text": null,
          "new_text": "ALLOC_GROW(heads, nr_heads + 1, alloc_heads)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tALLOC_GROW(heads, nr_heads + 1, alloc_heads);",
          "content_same": false
        },
        {
          "line": 995,
          "old_api": null,
          "new_api": "xmemdupz",
          "old_text": null,
          "new_text": "xmemdupz(line, n)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\theads[nr_heads++] = xmemdupz(line, n);",
          "content_same": false
        },
        {
          "line": 870,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(var, \"transfer.fsckobjects\")",
          "old_line_content": "\t\treturn 0;",
          "new_line_content": "\tif (!strcmp(var, \"transfer.fsckobjects\")) {",
          "content_same": false
        },
        {
          "line": 871,
          "old_api": null,
          "new_api": "git_config_bool",
          "old_text": null,
          "new_text": "git_config_bool(var, value)",
          "old_line_content": "\t}",
          "new_line_content": "\t\ttransfer_fsck_objects = git_config_bool(var, value);",
          "content_same": false
        },
        {
          "line": 1002,
          "old_api": null,
          "new_api": "ALLOC_GROW",
          "old_text": null,
          "new_text": "ALLOC_GROW(heads, nr_heads + 1, alloc_heads)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tALLOC_GROW(heads, nr_heads + 1, alloc_heads);",
          "content_same": false
        },
        {
          "line": 875,
          "old_api": null,
          "new_api": "git_default_config",
          "old_text": null,
          "new_text": "git_default_config(var, value, cb)",
          "old_line_content": "",
          "new_line_content": "\treturn git_default_config(var, value, cb);",
          "content_same": false
        },
        {
          "line": 1005,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&line)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tstrbuf_release(&line);",
          "content_same": false
        },
        {
          "line": 885,
          "old_api": null,
          "new_api": "git_config",
          "old_text": null,
          "new_text": "git_config(fetch_pack_config, NULL)",
          "old_line_content": "\t\tunpack_limit = transfer_unpack_limit;",
          "new_line_content": "\tgit_config(fetch_pack_config, NULL);",
          "content_same": false
        },
        {
          "line": 1014,
          "old_api": null,
          "new_api": "git_connect",
          "old_text": null,
          "new_text": "git_connect(fd, (char *)dest, args.uploadpack,\n\t\t\t\t   args.verbose ? CONNECT_VERBOSE : 0)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tconn = git_connect(fd, (char *)dest, args.uploadpack,",
          "content_same": false
        },
        {
          "line": 1020,
          "old_api": null,
          "new_api": "fetch_pack",
          "old_text": null,
          "new_text": "fetch_pack(&args, fd, conn, ref, dest,\n\t\tnr_heads, heads, pack_lockfile_ptr)",
          "old_line_content": "\tif (pack_lockfile) {",
          "new_line_content": "\tref = fetch_pack(&args, fd, conn, ref, dest,",
          "content_same": false
        },
        {
          "line": 1023,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"lock %s\\n\", pack_lockfile)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tprintf(\"lock %s\\n\", pack_lockfile);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1025,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd[1])",
          "new_text": null,
          "old_line_content": "\tclose(fd[1]);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 901,
          "old_api": "packet_trace_identity",
          "new_api": null,
          "old_text": "packet_trace_identity(\"fetch-pack\")",
          "new_text": null,
          "old_line_content": "\tpacket_trace_identity(\"fetch-pack\");",
          "new_line_content": "\tstruct child_process *conn;",
          "content_same": false
        },
        {
          "line": 781,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"Server does not support shallow clients\")",
          "new_text": null,
          "old_line_content": "\t\tdie(\"Server does not support shallow clients\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1038,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"no such remote ref %s\", heads[i])",
          "new_text": null,
          "old_line_content": "\t\t\t\terror(\"no such remote ref %s\", heads[i]);",
          "new_line_content": "\t\tfor (i = 0; i < nr_heads; i++)",
          "content_same": false
        },
        {
          "line": 909,
          "old_api": "prefixcmp",
          "new_api": null,
          "old_text": "prefixcmp(arg, \"--upload-pack=\")",
          "new_text": null,
          "old_line_content": "\t\t\tif (!prefixcmp(arg, \"--upload-pack=\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 913,
          "old_api": "prefixcmp",
          "new_api": null,
          "old_text": "prefixcmp(arg, \"--exec=\")",
          "new_text": null,
          "old_line_content": "\t\t\tif (!prefixcmp(arg, \"--exec=\")) {",
          "new_line_content": "\t\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1043,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"%s %s\\n\",\n\t\t       sha1_to_hex(ref->old_sha1), ref->name)",
          "new_text": null,
          "old_line_content": "\t\tprintf(\"%s %s\\n\",",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1044,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(ref->old_sha1)",
          "new_text": null,
          "old_line_content": "\t\t       sha1_to_hex(ref->old_sha1), ref->name);",
          "new_line_content": "\twhile (ref) {",
          "content_same": false
        },
        {
          "line": 917,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"-q\", arg)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!strcmp(\"--quiet\", arg) || !strcmp(\"-q\", arg)) {",
          "new_line_content": "\t\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 793,
          "old_api": "server_supports",
          "new_api": null,
          "old_text": "server_supports(\"multi_ack\")",
          "new_text": null,
          "old_line_content": "\telse if (server_supports(\"multi_ack\")) {",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 921,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"-k\", arg)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!strcmp(\"--keep\", arg) || !strcmp(\"-k\", arg)) {",
          "new_line_content": "\t\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1053,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(*(const char **)a, *(const char **)b)",
          "new_text": null,
          "old_line_content": "\treturn strcmp(*(const char **)a, *(const char **)b);",
          "new_line_content": "static int compare_heads(const void *a, const void *b)",
          "content_same": false
        },
        {
          "line": 798,
          "old_api": "server_supports",
          "new_api": null,
          "old_text": "server_supports(\"side-band-64k\")",
          "new_text": null,
          "old_line_content": "\tif (server_supports(\"side-band-64k\")) {",
          "new_line_content": "\t\tmulti_ack = 1;",
          "content_same": false
        },
        {
          "line": 926,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"--thin\", arg)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!strcmp(\"--thin\", arg)) {",
          "new_line_content": "\t\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 930,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"--include-tag\", arg)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!strcmp(\"--include-tag\", arg)) {",
          "new_line_content": "\t\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 803,
          "old_api": "server_supports",
          "new_api": null,
          "old_text": "server_supports(\"side-band\")",
          "new_text": null,
          "old_line_content": "\telse if (server_supports(\"side-band\")) {",
          "new_line_content": "\t\tuse_sideband = 2;",
          "content_same": false
        },
        {
          "line": 934,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"--all\", arg)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!strcmp(\"--all\", arg)) {",
          "new_line_content": "\t\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 808,
          "old_api": "server_supports",
          "new_api": null,
          "old_text": "server_supports(\"ofs-delta\")",
          "new_text": null,
          "old_line_content": "\tif (server_supports(\"ofs-delta\")) {",
          "new_line_content": "\t\tuse_sideband = 1;",
          "content_same": false
        },
        {
          "line": 938,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"--stdin\", arg)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!strcmp(\"--stdin\", arg)) {",
          "new_line_content": "\t\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1067,
          "old_api": "fetch_pack_setup",
          "new_api": null,
          "old_text": "fetch_pack_setup()",
          "new_text": null,
          "old_line_content": "\tfetch_pack_setup();",
          "new_line_content": "\tstruct ref *ref_cpy;",
          "content_same": false
        },
        {
          "line": 813,
          "old_api": "everything_local",
          "new_api": null,
          "old_text": "everything_local(&ref, nr_match, match)",
          "new_text": null,
          "old_line_content": "\tif (everything_local(&ref, nr_match, match)) {",
          "new_line_content": "\t} else",
          "content_same": false
        },
        {
          "line": 814,
          "old_api": "packet_flush",
          "new_api": null,
          "old_text": "packet_flush(fd[1])",
          "new_text": null,
          "old_line_content": "\t\tpacket_flush(fd[1]);",
          "new_line_content": "\t\tprefer_ofs_delta = 0;",
          "content_same": false
        },
        {
          "line": 942,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"-v\", arg)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!strcmp(\"-v\", arg)) {",
          "new_line_content": "\t\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 817,
          "old_api": "find_common",
          "new_api": null,
          "old_text": "find_common(fd, sha1, ref)",
          "new_text": null,
          "old_line_content": "\tif (find_common(fd, sha1, ref) < 0)",
          "new_line_content": "\t\tgoto all_done;",
          "content_same": false
        },
        {
          "line": 946,
          "old_api": "prefixcmp",
          "new_api": null,
          "old_text": "prefixcmp(arg, \"--depth=\")",
          "new_text": null,
          "old_line_content": "\t\t\tif (!prefixcmp(arg, \"--depth=\")) {",
          "new_line_content": "\t\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 947,
          "old_api": "strtol",
          "new_api": null,
          "old_text": "strtol(arg + 8, NULL, 0)",
          "new_text": null,
          "old_line_content": "\t\t\t\targs.depth = strtol(arg + 8, NULL, 0);",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 1076,
          "old_api": "remove_duplicates",
          "new_api": null,
          "old_text": "remove_duplicates(nr_heads, heads)",
          "new_text": null,
          "old_line_content": "\t\tnr_heads = remove_duplicates(nr_heads, heads);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1077,
          "old_api": "qsort",
          "new_api": null,
          "old_text": "qsort(heads, nr_heads, sizeof(*heads), compare_heads)",
          "new_text": null,
          "old_line_content": "\t\tqsort(heads, nr_heads, sizeof(*heads), compare_heads);",
          "new_line_content": "\tif (heads && nr_heads) {",
          "content_same": false
        },
        {
          "line": 822,
          "old_api": "warning",
          "new_api": null,
          "old_text": "warning(\"no common commits\")",
          "new_text": null,
          "old_line_content": "\t\t\twarning(\"no common commits\");",
          "new_line_content": "\t\t\t * no common commit.",
          "content_same": false
        },
        {
          "line": 950,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"--no-progress\", arg)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!strcmp(\"--no-progress\", arg)) {",
          "new_line_content": "\t\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1081,
          "old_api": "packet_flush",
          "new_api": null,
          "old_text": "packet_flush(fd[1])",
          "new_text": null,
          "old_line_content": "\t\tpacket_flush(fd[1]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1082,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"no matching remote head\")",
          "new_text": null,
          "old_line_content": "\t\tdie(\"no matching remote head\");",
          "new_line_content": "\tif (!ref) {",
          "content_same": false
        },
        {
          "line": 825,
          "old_api": "packet_flush",
          "new_api": null,
          "old_text": "packet_flush(fd[1])",
          "new_text": null,
          "old_line_content": "\t\tpacket_flush(fd[1]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 826,
          "old_api": "get_pack",
          "new_api": null,
          "old_text": "get_pack(fd, pack_lockfile)",
          "new_text": null,
          "old_line_content": "\tif (get_pack(fd, pack_lockfile))",
          "new_line_content": "\tif (args.stateless_rpc)",
          "content_same": false
        },
        {
          "line": 954,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"--stateless-rpc\", arg)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!strcmp(\"--stateless-rpc\", arg)) {",
          "new_line_content": "\t\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 958,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"--lock-pack\", arg)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!strcmp(\"--lock-pack\", arg)) {",
          "new_line_content": "\t\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1089,
          "old_api": "git_path",
          "new_api": null,
          "old_text": "git_path(\"shallow\")",
          "new_text": null,
          "old_line_content": "\t\tchar *shallow = git_path(\"shallow\");",
          "new_line_content": "\t\tstruct cache_time mtime;",
          "content_same": false
        },
        {
          "line": 963,
          "old_api": "usage",
          "new_api": null,
          "old_text": "usage(fetch_pack_usage)",
          "new_text": null,
          "old_line_content": "\t\t\tusage(fetch_pack_usage);",
          "new_line_content": "\t\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1093,
          "old_api": "ST_MTIME_NSEC",
          "new_api": null,
          "old_text": "ST_MTIME_NSEC(st)",
          "new_text": null,
          "old_line_content": "\t\tmtime.nsec = ST_MTIME_NSEC(st);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1094,
          "old_api": "stat",
          "new_api": null,
          "old_text": "stat(shallow, &st)",
          "new_text": null,
          "old_line_content": "\t\tif (stat(shallow, &st)) {",
          "new_line_content": "\t\tmtime.sec = st.st_mtime;",
          "content_same": false
        },
        {
          "line": 841,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(heads[src], heads[dst-1])",
          "new_text": null,
          "old_line_content": "\t\tif (strcmp(heads[src], heads[dst-1]))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1099,
          "old_api": "ST_MTIME_NSEC",
          "new_api": null,
          "old_text": "ST_MTIME_NSEC(st)",
          "new_text": null,
          "old_line_content": "\t\t\t\t|| ST_MTIME_NSEC(st) != mtime.nsec",
          "new_line_content": "\t\t} else if (st.st_mtime != mtime.sec",
          "content_same": false
        },
        {
          "line": 971,
          "old_api": "usage",
          "new_api": null,
          "old_text": "usage(fetch_pack_usage)",
          "new_text": null,
          "old_line_content": "\t\tusage(fetch_pack_usage);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1102,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"shallow file was changed during fetch\")",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"shallow file was changed during fetch\");",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 848,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(var, \"fetch.unpacklimit\")",
          "new_text": null,
          "old_line_content": "\tif (strcmp(var, \"fetch.unpacklimit\") == 0) {",
          "new_line_content": "static int fetch_pack_config(const char *var, const char *value, void *cb)",
          "content_same": false
        },
        {
          "line": 849,
          "old_api": "git_config_int",
          "new_api": null,
          "old_text": "git_config_int(var, value)",
          "new_text": null,
          "old_line_content": "\t\tfetch_unpack_limit = git_config_int(var, value);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1107,
          "old_api": "write_in_full",
          "new_api": null,
          "old_text": "write_in_full(fd, sb.buf, sb.len)",
          "new_text": null,
          "old_line_content": "\t\t || write_in_full(fd, sb.buf, sb.len) != sb.len) {",
          "new_line_content": "\t\t\t\t\t       LOCK_DIE_ON_ERROR);",
          "content_same": false
        },
        {
          "line": 980,
          "old_api": "xmalloc",
          "new_api": null,
          "old_text": "xmalloc(size)",
          "new_text": null,
          "old_line_content": "\t\theads = memcpy(xmalloc(size), heads, size);",
          "new_line_content": "\t\tint alloc_heads = nr_heads;",
          "content_same": false
        },
        {
          "line": 853,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(var, \"transfer.unpacklimit\")",
          "new_text": null,
          "old_line_content": "\tif (strcmp(var, \"transfer.unpacklimit\") == 0) {",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 854,
          "old_api": "git_config_int",
          "new_api": null,
          "old_text": "git_config_int(var, value)",
          "new_text": null,
          "old_line_content": "\t\ttransfer_unpack_limit = git_config_int(var, value);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 858,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(var, \"repack.usedeltabaseoffset\")",
          "new_text": null,
          "old_line_content": "\tif (strcmp(var, \"repack.usedeltabaseoffset\") == 0) {",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 859,
          "old_api": "git_config_bool",
          "new_api": null,
          "old_text": "git_config_bool(var, value)",
          "new_text": null,
          "old_line_content": "\t\tprefer_ofs_delta = git_config_bool(var, value);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1116,
          "old_api": "reprepare_packed_git",
          "new_api": null,
          "old_text": "reprepare_packed_git()",
          "new_text": null,
          "old_line_content": "\treprepare_packed_git();",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 987,
          "old_api": "packet_read_line",
          "new_api": null,
          "old_text": "packet_read_line(0, line, sizeof(line))",
          "new_text": null,
          "old_line_content": "\t\t\t\tint n = packet_read_line(0, line, sizeof(line));",
          "new_line_content": "\t\t\tstatic char line[1000];",
          "content_same": false
        },
        {
          "line": 863,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(var, \"fetch.fsckobjects\")",
          "new_text": null,
          "old_line_content": "\tif (!strcmp(var, \"fetch.fsckobjects\")) {",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 864,
          "old_api": "git_config_bool",
          "new_api": null,
          "old_text": "git_config_bool(var, value)",
          "new_text": null,
          "old_line_content": "\t\tfetch_fsck_objects = git_config_bool(var, value);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 992,
          "old_api": "ALLOC_GROW",
          "new_api": null,
          "old_text": "ALLOC_GROW(heads, nr_heads + 1, alloc_heads)",
          "new_text": null,
          "old_line_content": "\t\t\t\tALLOC_GROW(heads, nr_heads + 1, alloc_heads);",
          "new_line_content": "\t\t\t\tif (line[n-1] == '\\n')",
          "content_same": false
        },
        {
          "line": 993,
          "old_api": "xmemdupz",
          "new_api": null,
          "old_text": "xmemdupz(line, n)",
          "new_text": null,
          "old_line_content": "\t\t\t\theads[nr_heads++] = xmemdupz(line, n);",
          "new_line_content": "\t\t\t\t\tn--;",
          "content_same": false
        },
        {
          "line": 868,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(var, \"transfer.fsckobjects\")",
          "new_text": null,
          "old_line_content": "\tif (!strcmp(var, \"transfer.fsckobjects\")) {",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 869,
          "old_api": "git_config_bool",
          "new_api": null,
          "old_text": "git_config_bool(var, value)",
          "new_text": null,
          "old_line_content": "\t\ttransfer_fsck_objects = git_config_bool(var, value);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 999,
          "old_api": "strbuf_getline",
          "new_api": null,
          "old_text": "strbuf_getline(&line, stdin, '\\n')",
          "new_text": null,
          "old_line_content": "\t\t\twhile (strbuf_getline(&line, stdin, '\\n') != EOF) {",
          "new_line_content": "\t\t\t/* read from stdin one ref per line, until EOF */",
          "content_same": false
        },
        {
          "line": 1000,
          "old_api": "ALLOC_GROW",
          "new_api": null,
          "old_text": "ALLOC_GROW(heads, nr_heads + 1, alloc_heads)",
          "new_text": null,
          "old_line_content": "\t\t\t\tALLOC_GROW(heads, nr_heads + 1, alloc_heads);",
          "new_line_content": "\t\t\tstruct strbuf line = STRBUF_INIT;",
          "content_same": false
        },
        {
          "line": 873,
          "old_api": "git_default_config",
          "new_api": null,
          "old_text": "git_default_config(var, value, cb)",
          "new_text": null,
          "old_line_content": "\treturn git_default_config(var, value, cb);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 883,
          "old_api": "git_config",
          "new_api": null,
          "old_text": "git_config(fetch_pack_config, NULL)",
          "new_text": null,
          "old_line_content": "\tgit_config(fetch_pack_config, NULL);",
          "new_line_content": "\tif (did_setup)",
          "content_same": false
        },
        {
          "line": 1012,
          "old_api": "git_connect",
          "new_api": null,
          "old_text": "git_connect(fd, (char *)dest, args.uploadpack,\n\t\t\t\t   args.verbose ? CONNECT_VERBOSE : 0)",
          "new_text": null,
          "old_line_content": "\t\tconn = git_connect(fd, (char *)dest, args.uploadpack,",
          "new_line_content": "\t\tfd[1] = 1;",
          "content_same": false
        },
        {
          "line": 1016,
          "old_api": "get_remote_heads",
          "new_api": null,
          "old_text": "get_remote_heads(fd[0], &ref, 0, NULL)",
          "new_text": null,
          "old_line_content": "\tget_remote_heads(fd[0], &ref, 0, NULL);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1021,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"lock %s\\n\", pack_lockfile)",
          "new_text": null,
          "old_line_content": "\t\tprintf(\"lock %s\\n\", pack_lockfile);",
          "new_line_content": "\t\tnr_heads, heads, pack_lockfile_ptr);",
          "content_same": false
        },
        {
          "line": 1022,
          "old_api": "fflush",
          "new_api": null,
          "old_text": "fflush(stdout)",
          "new_text": null,
          "old_line_content": "\t\tfflush(stdout);",
          "new_line_content": "\tif (pack_lockfile) {",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 24,
      "total_additions": 69,
      "total_deletions": 68,
      "total_api_changes": 161
    },
    "non_api_changes": {
      "has_non_api_changes": false,
      "evidence": {
        "total_diff_lines": 2,
        "api_related_lines": 161,
        "non_api_lines": 0,
        "non_api_line_numbers": []
      }
    },
    "api_calls_before": 260,
    "api_calls_after": 261,
    "diff_info": {
      "added_lines": 2,
      "removed_lines": 0,
      "total_diff_lines": 14
    }
  }
}
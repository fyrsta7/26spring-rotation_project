{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/7d20bb998efce7f1d1d1350abe57900028fe98fe",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/7d20bb998efce7f1d1d1350abe57900028fe98fe/before.cc",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/7d20bb998efce7f1d1d1350abe57900028fe98fe/after.cc",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/7d20bb998efce7f1d1d1350abe57900028fe98fe/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 3147,
          "old_api": "query_cache_is_cacheable_query",
          "new_api": "is_current_stmt_binlog_format_row",
          "old_text": "query_cache_is_cacheable_query(lex)",
          "new_text": "thd->is_current_stmt_binlog_format_row()",
          "old_line_content": "      query_cache_is_cacheable_query(lex))",
          "new_line_content": "       (!thd->is_current_stmt_binlog_format_row() ||",
          "content_same": false
        },
        {
          "line": 3209,
          "old_api": "cleanup_after_query",
          "new_api": "DBUG_ENTER",
          "old_text": "thd->cleanup_after_query()",
          "new_text": "DBUG_ENTER(\"Prepared_statement::cleanup_stmt\")",
          "old_line_content": "  thd->cleanup_after_query();",
          "new_line_content": "  DBUG_ENTER(\"Prepared_statement::cleanup_stmt\");",
          "content_same": false
        },
        {
          "line": 3210,
          "old_api": "rollback_item_tree_changes",
          "new_api": "DBUG_PRINT",
          "old_text": "thd->rollback_item_tree_changes()",
          "new_text": "DBUG_PRINT(\"enter\",(\"stmt: 0x%lx\", (long) this))",
          "old_line_content": "  thd->rollback_item_tree_changes();",
          "new_line_content": "  DBUG_PRINT(\"enter\",(\"stmt: 0x%lx\", (long) this));",
          "content_same": false
        },
        {
          "line": 3308,
          "old_api": "restore_backup_statement",
          "new_api": "set_n_backup_active_arena",
          "old_text": "thd->restore_backup_statement(this, &stmt_backup)",
          "new_text": "thd->set_n_backup_active_arena(this, &stmt_backup)",
          "old_line_content": "    thd->restore_backup_statement(this, &stmt_backup);",
          "new_line_content": "  thd->set_n_backup_active_arena(this, &stmt_backup);",
          "content_same": false
        },
        {
          "line": 3310,
          "old_api": "DBUG_RETURN",
          "new_api": "alloc_query",
          "old_text": "DBUG_RETURN(TRUE)",
          "new_text": "alloc_query(thd, packet, packet_len)",
          "old_line_content": "    DBUG_RETURN(TRUE);",
          "new_line_content": "  if (alloc_query(thd, packet, packet_len))",
          "content_same": false
        },
        {
          "line": 3332,
          "old_api": "parse_sql",
          "new_api": "lex_start",
          "old_text": "parse_sql(thd, & parser_state, NULL)",
          "new_text": "lex_start(thd)",
          "old_line_content": "  error= parse_sql(thd, & parser_state, NULL) ||",
          "new_line_content": "  lex_start(thd);",
          "content_same": false
        },
        {
          "line": 3337,
          "old_api": "set_trg_event_type_for_tables",
          "new_api": "is_error",
          "old_text": "lex->set_trg_event_type_for_tables()",
          "new_text": "thd->is_error()",
          "old_line_content": "  lex->set_trg_event_type_for_tables();",
          "new_line_content": "    thd->is_error() ||",
          "content_same": false
        },
        {
          "line": 3384,
          "old_api": "lex_end",
          "new_api": "is_empty",
          "old_text": "lex_end(lex)",
          "new_text": "thd->transaction.stmt.is_empty()",
          "old_line_content": "  lex_end(lex);",
          "new_line_content": "  DBUG_ASSERT(thd->transaction.stmt.is_empty());",
          "content_same": false
        },
        {
          "line": 3386,
          "old_api": "restore_backup_statement",
          "new_api": "close_thread_tables",
          "old_text": "thd->restore_backup_statement(this, &stmt_backup)",
          "new_text": "close_thread_tables(thd)",
          "old_line_content": "  thd->restore_backup_statement(this, &stmt_backup);",
          "new_line_content": "  close_thread_tables(thd);",
          "content_same": false
        },
        {
          "line": 3517,
          "old_api": "set_parameters",
          "new_api": "MYF",
          "old_text": "set_parameters(expanded_query, packet, packet_end)",
          "new_text": "MYF(0)",
          "old_line_content": "  if (set_parameters(expanded_query, packet, packet_end))",
          "new_line_content": "    my_message(last_errno, last_error, MYF(0));",
          "content_same": false
        },
        {
          "line": 3549,
          "old_api": "push_reprepare_observer",
          "new_api": "reset_reprepare_observer",
          "old_text": "thd->push_reprepare_observer(stmt_reprepare_observer)",
          "new_text": "reprepare_observer.reset_reprepare_observer()",
          "old_line_content": "  thd->push_reprepare_observer(stmt_reprepare_observer);",
          "new_line_content": "    reprepare_observer.reset_reprepare_observer();",
          "content_same": false
        },
        {
          "line": 3553,
          "old_api": "pop_reprepare_observer",
          "new_api": "push_reprepare_observer",
          "old_text": "thd->pop_reprepare_observer()",
          "new_text": "thd->push_reprepare_observer(stmt_reprepare_observer)",
          "old_line_content": "  thd->pop_reprepare_observer();",
          "new_line_content": "  thd->push_reprepare_observer(stmt_reprepare_observer);",
          "content_same": false
        },
        {
          "line": 3557,
          "old_api": "is_invalidated",
          "new_api": "pop_reprepare_observer",
          "old_text": "reprepare_observer.is_invalidated()",
          "new_text": "thd->pop_reprepare_observer()",
          "old_line_content": "      reprepare_observer.is_invalidated() &&",
          "new_line_content": "  thd->pop_reprepare_observer();",
          "content_same": false
        },
        {
          "line": 3561,
          "old_api": "clear_error",
          "new_api": "is_invalidated",
          "old_text": "thd->clear_error()",
          "new_text": "reprepare_observer.is_invalidated()",
          "old_line_content": "    thd->clear_error();",
          "new_line_content": "      reprepare_observer.is_invalidated() &&",
          "content_same": false
        },
        {
          "line": 3592,
          "old_api": "execute_server_code",
          "new_api": "set_n_backup_statement",
          "old_text": "server_runnable->execute_server_code(thd)",
          "new_text": "thd->set_n_backup_statement(this, &stmt_backup)",
          "old_line_content": "  error= server_runnable->execute_server_code(thd);",
          "new_line_content": "  thd->set_n_backup_statement(this, &stmt_backup);",
          "content_same": false
        },
        {
          "line": 3596,
          "old_api": "restore_active_arena",
          "new_api": "execute_server_code",
          "old_text": "thd->restore_active_arena(this, &stmt_backup)",
          "new_text": "server_runnable->execute_server_code(thd)",
          "old_line_content": "  thd->restore_active_arena(this, &stmt_backup);",
          "new_line_content": "  error= server_runnable->execute_server_code(thd);",
          "content_same": false
        },
        {
          "line": 3600,
          "old_api": "move_elements_to",
          "new_api": "restore_active_arena",
          "old_text": "save_change_list.move_elements_to(&thd->change_list)",
          "new_text": "thd->restore_active_arena(this, &stmt_backup)",
          "old_line_content": "  save_change_list.move_elements_to(&thd->change_list);",
          "new_line_content": "  thd->restore_active_arena(this, &stmt_backup);",
          "content_same": false
        },
        {
          "line": 3637,
          "old_api": "mysql_opt_change_db",
          "new_api": "set_sql_prepare",
          "old_text": "mysql_opt_change_db(thd, &stmt_db_name, &saved_cur_db_name, TRUE,\n                          &cur_db_changed)",
          "new_text": "copy.set_sql_prepare()",
          "old_line_content": "  if (mysql_opt_change_db(thd, &stmt_db_name, &saved_cur_db_name, TRUE,",
          "new_line_content": "  copy.set_sql_prepare(); /* To suppress sending metadata to the client. */",
          "content_same": false
        },
        {
          "line": 3641,
          "old_api": "set_name",
          "new_api": "mysql_opt_change_db",
          "old_text": "copy.set_name(&name)",
          "new_text": "mysql_opt_change_db(thd, &stmt_db_name, &saved_cur_db_name, TRUE,\n                          &cur_db_changed)",
          "old_line_content": "  error= ((name.str && copy.set_name(&name)) ||",
          "new_line_content": "  if (mysql_opt_change_db(thd, &stmt_db_name, &saved_cur_db_name, TRUE,",
          "content_same": false
        },
        {
          "line": 3646,
          "old_api": "mysql_change_db",
          "new_api": "query_length",
          "old_text": "mysql_change_db(thd, &saved_cur_db_name, TRUE)",
          "new_text": "query_length()",
          "old_line_content": "    mysql_change_db(thd, &saved_cur_db_name, TRUE);",
          "new_line_content": "          copy.prepare(query(), query_length()) ||",
          "content_same": false
        },
        {
          "line": 3650,
          "old_api": "swap_prepared_statement",
          "new_api": "mysql_change_db",
          "old_text": "swap_prepared_statement(&copy)",
          "new_text": "mysql_change_db(thd, &saved_cur_db_name, TRUE)",
          "old_line_content": "    swap_prepared_statement(&copy);",
          "new_line_content": "    mysql_change_db(thd, &saved_cur_db_name, TRUE);",
          "content_same": false
        },
        {
          "line": 3724,
          "old_api": "set_query_arena",
          "new_api": "swap_variables",
          "old_text": "set_query_arena(copy)",
          "new_text": "swap_variables(MEM_ROOT, main_mem_root, copy->main_mem_root)",
          "old_line_content": "  set_query_arena(copy);",
          "new_line_content": "  swap_variables(MEM_ROOT, main_mem_root, copy->main_mem_root);",
          "content_same": false
        },
        {
          "line": 3728,
          "old_api": "set_statement",
          "new_api": "set_query_arena",
          "old_text": "tmp_stmt.set_statement(this)",
          "new_text": "set_query_arena(copy)",
          "old_line_content": "  tmp_stmt.set_statement(this);",
          "new_line_content": "  set_query_arena(copy);",
          "content_same": false
        },
        {
          "line": 3729,
          "old_api": "set_statement",
          "new_api": "set_query_arena",
          "old_text": "set_statement(copy)",
          "new_text": "copy->set_query_arena(&tmp_stmt)",
          "old_line_content": "  set_statement(copy);",
          "new_line_content": "  copy->set_query_arena(&tmp_stmt);",
          "content_same": false
        },
        {
          "line": 3733,
          "old_api": "swap_variables",
          "new_api": "set_statement",
          "old_text": "swap_variables(ulong, id, copy->id)",
          "new_text": "set_statement(copy)",
          "old_line_content": "  swap_variables(ulong, id, copy->id);",
          "new_line_content": "  set_statement(copy);",
          "content_same": false
        },
        {
          "line": 3748,
          "old_api": "DBUG_ASSERT",
          "new_api": "swap_variables",
          "old_text": "DBUG_ASSERT(db_length == copy->db_length)",
          "new_text": "swap_variables(LEX_STRING, name, copy->name)",
          "old_line_content": "  DBUG_ASSERT(db_length == copy->db_length);",
          "new_line_content": "  swap_variables(LEX_STRING, name, copy->name);",
          "content_same": false
        },
        {
          "line": 3795,
          "old_api": "MYF",
          "new_api": "status_var_increment",
          "old_text": "MYF(0)",
          "new_text": "status_var_increment(thd->status_var.com_stmt_execute)",
          "old_line_content": "    my_error(ER_PS_NO_RECURSION, MYF(0));",
          "new_line_content": "  status_var_increment(thd->status_var.com_stmt_execute);",
          "content_same": false
        },
        {
          "line": 4091,
          "old_api": "free_old_result",
          "new_api": "get_stmt_da",
          "old_text": "free_old_result()",
          "new_text": "m_thd->get_stmt_da()",
          "old_line_content": "  free_old_result(); /* Delete all data from previous execution, if any */",
          "new_line_content": "  Diagnostics_area *save_diagnostics_area= m_thd->get_stmt_da();",
          "content_same": false
        },
        {
          "line": 4100,
          "old_api": "set_stmt_da",
          "new_api": "execute_server_runnable",
          "old_text": "m_thd->set_stmt_da(save_diagnostics_area)",
          "new_text": "stmt.execute_server_runnable(server_runnable)",
          "old_line_content": "  m_thd->set_stmt_da(save_diagnostics_area);",
          "new_line_content": "  rc= stmt.execute_server_runnable(server_runnable);",
          "content_same": false
        },
        {
          "line": 4210,
          "old_api": "alloc_root",
          "new_api": "alloc_root_inited",
          "old_text": "alloc_root(&m_rset_root,\n                                          sizeof(Ed_column) * m_column_count)",
          "new_text": "alloc_root_inited(&m_rset_root)",
          "old_line_content": "  m_current_row= (Ed_column *) alloc_root(&m_rset_root,",
          "new_line_content": "  DBUG_ASSERT(alloc_root_inited(&m_rset_root));",
          "content_same": false
        },
        {
          "line": 4303,
          "old_api": "copy",
          "new_api": "my_charset_same",
          "old_text": "convert->copy(str, length, src_cs, dst_cs, &error_unused)",
          "new_text": "my_charset_same(src_cs, dst_cs)",
          "old_line_content": "    if (convert->copy(str, length, src_cs, dst_cs, &error_unused))",
          "new_line_content": "  if (dst_cs && !my_charset_same(src_cs, dst_cs) &&",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 3585,
          "old_api": null,
          "new_api": "move_elements_to",
          "old_text": null,
          "new_text": "thd->change_list.move_elements_to(&save_change_list)",
          "old_line_content": "  if (!(lex= new (mem_root) st_lex_local))",
          "new_line_content": "  thd->change_list.move_elements_to(&save_change_list);",
          "content_same": false
        },
        {
          "line": 4098,
          "old_api": null,
          "new_api": "set_stmt_da",
          "old_text": null,
          "new_text": "m_thd->set_stmt_da(&m_diagnostics_area)",
          "old_line_content": "",
          "new_line_content": "  m_thd->set_stmt_da(&m_diagnostics_area);",
          "content_same": false
        },
        {
          "line": 4101,
          "old_api": null,
          "new_api": "end_statement",
          "old_text": null,
          "new_text": "m_thd->protocol->end_statement()",
          "old_line_content": "  /*",
          "new_line_content": "  m_thd->protocol->end_statement();",
          "content_same": false
        },
        {
          "line": 4104,
          "old_api": null,
          "new_api": "set_stmt_da",
          "old_text": null,
          "new_text": "m_thd->set_stmt_da(save_diagnostics_area)",
          "old_line_content": "    Reset it to point to the first result set instead.",
          "new_line_content": "  m_thd->set_stmt_da(save_diagnostics_area);",
          "content_same": false
        },
        {
          "line": 3593,
          "old_api": null,
          "new_api": "set_n_backup_active_arena",
          "old_text": null,
          "new_text": "thd->set_n_backup_active_arena(this, &stmt_backup)",
          "old_line_content": "",
          "new_line_content": "  thd->set_n_backup_active_arena(this, &stmt_backup);",
          "content_same": false
        },
        {
          "line": 3598,
          "old_api": null,
          "new_api": "cleanup_after_query",
          "old_text": null,
          "new_text": "thd->cleanup_after_query()",
          "old_line_content": "  thd->stmt_arena= save_stmt_arena;",
          "new_line_content": "  thd->cleanup_after_query();",
          "content_same": false
        },
        {
          "line": 4112,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(rc)",
          "old_line_content": "/**",
          "new_line_content": "  DBUG_RETURN(rc);",
          "content_same": false
        },
        {
          "line": 3601,
          "old_api": null,
          "new_api": "restore_backup_statement",
          "old_text": null,
          "new_text": "thd->restore_backup_statement(this, &stmt_backup)",
          "old_line_content": "",
          "new_line_content": "  thd->restore_backup_statement(this, &stmt_backup);",
          "content_same": false
        },
        {
          "line": 3604,
          "old_api": null,
          "new_api": "move_elements_to",
          "old_text": null,
          "new_text": "save_change_list.move_elements_to(&thd->change_list)",
          "old_line_content": "  return error;",
          "new_line_content": "  save_change_list.move_elements_to(&thd->change_list);",
          "content_same": false
        },
        {
          "line": 3639,
          "old_api": null,
          "new_api": "status_var_increment",
          "old_text": null,
          "new_text": "status_var_increment(thd->status_var.com_stmt_reprepare)",
          "old_line_content": "    return TRUE;",
          "new_line_content": "  status_var_increment(thd->status_var.com_stmt_reprepare);",
          "content_same": false
        },
        {
          "line": 3645,
          "old_api": null,
          "new_api": "set_name",
          "old_text": null,
          "new_text": "copy.set_name(&name)",
          "old_line_content": "  if (cur_db_changed)",
          "new_line_content": "  error= ((name.str && copy.set_name(&name)) ||",
          "content_same": false
        },
        {
          "line": 4159,
          "old_api": null,
          "new_api": "DBUG_ASSERT",
          "old_text": null,
          "new_text": "DBUG_ASSERT(m_current_rset)",
          "old_line_content": "    /* Assign the return value */",
          "new_line_content": "  DBUG_ASSERT(m_current_rset);",
          "content_same": false
        },
        {
          "line": 3647,
          "old_api": null,
          "new_api": "validate_metadata",
          "old_text": null,
          "new_text": "validate_metadata(&copy)",
          "old_line_content": "",
          "new_line_content": "          validate_metadata(&copy));",
          "content_same": false
        },
        {
          "line": 3654,
          "old_api": null,
          "new_api": "swap_prepared_statement",
          "old_text": null,
          "new_text": "swap_prepared_statement(&copy)",
          "old_line_content": "#endif",
          "new_line_content": "    swap_prepared_statement(&copy);",
          "content_same": false
        },
        {
          "line": 3655,
          "old_api": null,
          "new_api": "swap_parameter_array",
          "old_text": null,
          "new_text": "swap_parameter_array(param_array, copy.param_array, param_count)",
          "old_line_content": "    /*",
          "new_line_content": "    swap_parameter_array(param_array, copy.param_array, param_count);",
          "content_same": false
        },
        {
          "line": 3146,
          "old_api": null,
          "new_api": "is_update_query",
          "old_text": null,
          "new_text": "is_update_query(lex->sql_command)",
          "old_line_content": "      opt_log || opt_slow_log ||",
          "new_line_content": "  if ((mysql_bin_log.is_open() && is_update_query(lex->sql_command) &&",
          "content_same": false
        },
        {
          "line": 3151,
          "old_api": null,
          "new_api": "query_cache_is_cacheable_query",
          "old_text": null,
          "new_text": "query_cache_is_cacheable_query(lex)",
          "old_line_content": "    set_params= insert_params_with_log;",
          "new_line_content": "      query_cache_is_cacheable_query(lex))",
          "content_same": false
        },
        {
          "line": 3666,
          "old_api": null,
          "new_api": "get_stmt_da",
          "old_text": null,
          "new_text": "thd->get_stmt_da()->clear_warning_info(thd->query_id)",
          "old_line_content": "",
          "new_line_content": "    thd->get_stmt_da()->clear_warning_info(thd->query_id);",
          "content_same": false
        },
        {
          "line": 4196,
          "old_api": null,
          "new_api": "clear_alloc_root",
          "old_text": null,
          "new_text": "clear_alloc_root(&m_rset_root)",
          "old_line_content": "  Called between two result set rows.",
          "new_line_content": "  clear_alloc_root(&m_rset_root);",
          "content_same": false
        },
        {
          "line": 3182,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"Prepared_statement::~Prepared_statement\")",
          "old_line_content": "  /*",
          "new_line_content": "  DBUG_ENTER(\"Prepared_statement::~Prepared_statement\");",
          "content_same": false
        },
        {
          "line": 3183,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"enter\",(\"stmt: 0x%lx  cursor: 0x%lx\",\n                      (long) this, (long) cursor))",
          "old_line_content": "    We have to call free on the items even if cleanup is called as some items,",
          "new_line_content": "  DBUG_PRINT(\"enter\",(\"stmt: 0x%lx  cursor: 0x%lx\",",
          "content_same": false
        },
        {
          "line": 3695,
          "old_api": null,
          "new_api": "is_sql_prepare",
          "old_text": null,
          "new_text": "is_sql_prepare()",
          "old_line_content": "      copy->lex->select_lex.item_list.elements)",
          "new_line_content": "  if (is_sql_prepare() || lex->describe)",
          "content_same": false
        },
        {
          "line": 4212,
          "old_api": null,
          "new_api": "opt_add_row_to_rset",
          "old_text": null,
          "new_text": "opt_add_row_to_rset()",
          "old_line_content": "  m_current_column= m_current_row;",
          "new_line_content": "  opt_add_row_to_rset();",
          "content_same": false
        },
        {
          "line": 4214,
          "old_api": null,
          "new_api": "alloc_root",
          "old_text": null,
          "new_text": "alloc_root(&m_rset_root,\n                                          sizeof(Ed_column) * m_column_count)",
          "old_line_content": "",
          "new_line_content": "  m_current_row= (Ed_column *) alloc_root(&m_rset_root,",
          "content_same": false
        },
        {
          "line": 3190,
          "old_api": null,
          "new_api": "free_items",
          "old_text": null,
          "new_text": "free_items()",
          "old_line_content": "    delete (st_lex_local *) lex;",
          "new_line_content": "  free_items();",
          "content_same": false
        },
        {
          "line": 3196,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(0)",
          "old_line_content": "",
          "new_line_content": "  free_root(&main_mem_root, MYF(0));",
          "content_same": false
        },
        {
          "line": 3212,
          "old_api": null,
          "new_api": "cleanup_items",
          "old_text": null,
          "new_text": "cleanup_items(free_list)",
          "old_line_content": "  DBUG_VOID_RETURN;",
          "new_line_content": "  cleanup_items(free_list);",
          "content_same": false
        },
        {
          "line": 3213,
          "old_api": null,
          "new_api": "cleanup_after_query",
          "old_text": null,
          "new_text": "thd->cleanup_after_query()",
          "old_line_content": "}",
          "new_line_content": "  thd->cleanup_after_query();",
          "content_same": false
        },
        {
          "line": 3214,
          "old_api": null,
          "new_api": "rollback_item_tree_changes",
          "old_text": null,
          "new_text": "thd->rollback_item_tree_changes()",
          "old_line_content": "",
          "new_line_content": "  thd->rollback_item_tree_changes();",
          "content_same": false
        },
        {
          "line": 3727,
          "old_api": null,
          "new_api": "set_query_arena",
          "old_text": null,
          "new_text": "tmp_stmt.set_query_arena(this)",
          "old_line_content": "  /* Swap the statement parent classes */",
          "new_line_content": "  tmp_stmt.set_query_arena(this);",
          "content_same": false
        },
        {
          "line": 4243,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "m_rset->push_back(ed_row, &m_rset_root)",
          "old_line_content": "",
          "new_line_content": "      m_rset->push_back(ed_row, &m_rset_root);",
          "content_same": false
        },
        {
          "line": 3732,
          "old_api": null,
          "new_api": "set_statement",
          "old_text": null,
          "new_text": "tmp_stmt.set_statement(this)",
          "old_line_content": "  /* Swap ids back, we need the original id */",
          "new_line_content": "  tmp_stmt.set_statement(this);",
          "content_same": false
        },
        {
          "line": 3734,
          "old_api": null,
          "new_api": "set_statement",
          "old_text": null,
          "new_text": "copy->set_statement(&tmp_stmt)",
          "old_line_content": "  /* Swap mem_roots back, they must continue pointing at the main_mem_roots */",
          "new_line_content": "  copy->set_statement(&tmp_stmt);",
          "content_same": false
        },
        {
          "line": 3223,
          "old_api": null,
          "new_api": "memdup_root",
          "old_text": null,
          "new_text": "memdup_root(mem_root, name_arg->str, name_arg->length)",
          "old_line_content": "",
          "new_line_content": "  name.str= (char*) memdup_root(mem_root, name_arg->str, name_arg->length);",
          "content_same": false
        },
        {
          "line": 3737,
          "old_api": null,
          "new_api": "swap_variables",
          "old_text": null,
          "new_text": "swap_variables(ulong, id, copy->id)",
          "old_line_content": "    Swap the old and the new parameters array. The old array",
          "new_line_content": "  swap_variables(ulong, id, copy->id);",
          "content_same": false
        },
        {
          "line": 4257,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(m_current_column, 0, sizeof(*m_current_column))",
          "old_line_content": "",
          "new_line_content": "  memset(m_current_column, 0, sizeof(*m_current_column));",
          "content_same": false
        },
        {
          "line": 3752,
          "old_api": null,
          "new_api": "DBUG_ASSERT",
          "old_text": null,
          "new_text": "DBUG_ASSERT(db_length == copy->db_length)",
          "old_line_content": "  last_errno= 0;",
          "new_line_content": "  DBUG_ASSERT(db_length == copy->db_length);",
          "content_same": false
        },
        {
          "line": 3753,
          "old_api": null,
          "new_api": "DBUG_ASSERT",
          "old_text": null,
          "new_text": "DBUG_ASSERT(param_count == copy->param_count)",
          "old_line_content": "}",
          "new_line_content": "  DBUG_ASSERT(param_count == copy->param_count);",
          "content_same": false
        },
        {
          "line": 3754,
          "old_api": null,
          "new_api": "DBUG_ASSERT",
          "old_text": null,
          "new_text": "DBUG_ASSERT(thd == copy->thd)",
          "old_line_content": "",
          "new_line_content": "  DBUG_ASSERT(thd == copy->thd);",
          "content_same": false
        },
        {
          "line": 3244,
          "old_api": null,
          "new_api": "strmake",
          "old_text": null,
          "new_text": "this->strmake(db_arg, db_length_arg)",
          "old_line_content": "  {",
          "new_line_content": "    db= this->strmake(db_arg, db_length_arg);",
          "content_same": false
        },
        {
          "line": 4278,
          "old_api": null,
          "new_api": "memdup_root",
          "old_text": null,
          "new_text": "memdup_root(&m_rset_root,\n                                             data,\n                                             length + 1 /* Safety */)",
          "old_line_content": "    return TRUE;",
          "new_line_content": "  m_current_column->str= (char*) memdup_root(&m_rset_root,",
          "content_same": false
        },
        {
          "line": 4307,
          "old_api": null,
          "new_api": "copy",
          "old_text": null,
          "new_text": "convert->copy(str, length, src_cs, dst_cs, &error_unused)",
          "old_line_content": "  }",
          "new_line_content": "    if (convert->copy(str, length, src_cs, dst_cs, &error_unused))",
          "content_same": false
        },
        {
          "line": 4309,
          "old_api": null,
          "new_api": "ptr",
          "old_text": null,
          "new_text": "convert->ptr()",
          "old_line_content": "}",
          "new_line_content": "    str= convert->ptr();",
          "content_same": false
        },
        {
          "line": 4310,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "convert->length()",
          "old_line_content": "",
          "new_line_content": "    length= convert->length();",
          "content_same": false
        },
        {
          "line": 3799,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(0)",
          "old_line_content": "  /*",
          "new_line_content": "    my_error(ER_PS_NO_RECURSION, MYF(0));",
          "content_same": false
        },
        {
          "line": 4312,
          "old_api": null,
          "new_api": "store_column",
          "old_text": null,
          "new_text": "store_column(str, length)",
          "old_line_content": "/** Store a tiny int as is (1 byte) in a result set column. */",
          "new_line_content": "  return store_column(str, length);",
          "content_same": false
        },
        {
          "line": 3289,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"Prepared_statement::prepare\")",
          "old_line_content": "    no matter what kind of prepare is processed.",
          "new_line_content": "  DBUG_ENTER(\"Prepared_statement::prepare\");",
          "content_same": false
        },
        {
          "line": 3295,
          "old_api": null,
          "new_api": "status_var_increment",
          "old_text": null,
          "new_text": "status_var_increment(thd->status_var.com_stmt_prepare)",
          "old_line_content": "",
          "new_line_content": "  status_var_increment(thd->status_var.com_stmt_prepare);",
          "content_same": false
        },
        {
          "line": 4321,
          "old_api": null,
          "new_api": "store_column",
          "old_text": null,
          "new_text": "store_column(&v, 1)",
          "old_line_content": "/** Store a short as is (2 bytes, host order) in a result set column. */",
          "new_line_content": "  return store_column(&v, 1);",
          "content_same": false
        },
        {
          "line": 3298,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(TRUE)",
          "old_line_content": "",
          "new_line_content": "    DBUG_RETURN(TRUE);",
          "content_same": false
        },
        {
          "line": 3300,
          "old_api": null,
          "new_api": "set_db",
          "old_text": null,
          "new_text": "set_db(thd->db, thd->db_length)",
          "old_line_content": "    alloc_query() uses thd->memroot && thd->query, so we should call",
          "new_line_content": "  if (set_db(thd->db, thd->db_length))",
          "content_same": false
        },
        {
          "line": 3301,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(TRUE)",
          "old_line_content": "    both of backup_statement() and backup_query_arena() here.",
          "new_line_content": "    DBUG_RETURN(TRUE);",
          "content_same": false
        },
        {
          "line": 3813,
          "old_api": null,
          "new_api": "check_simple_select",
          "old_text": null,
          "new_text": "lex->result->check_simple_select()",
          "old_line_content": "  }",
          "new_line_content": "  if (open_cursor && lex->result && lex->result->check_simple_select())",
          "content_same": false
        },
        {
          "line": 3815,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"info\",(\"Cursor asked for not SELECT stmt\"))",
          "old_line_content": "  /* In case the command has a call to SP which re-uses this statement name */",
          "new_line_content": "    DBUG_PRINT(\"info\",(\"Cursor asked for not SELECT stmt\"));",
          "content_same": false
        },
        {
          "line": 4330,
          "old_api": null,
          "new_api": "store_column",
          "old_text": null,
          "new_text": "store_column(&v, 2)",
          "old_line_content": "/** Store a \"long\" as is (4 bytes, host order) in a result set column.  */",
          "new_line_content": "  return store_column(&v, 2);",
          "content_same": false
        },
        {
          "line": 3307,
          "old_api": null,
          "new_api": "set_n_backup_statement",
          "old_text": null,
          "new_text": "thd->set_n_backup_statement(this, &stmt_backup)",
          "old_line_content": "  {",
          "new_line_content": "  thd->set_n_backup_statement(this, &stmt_backup);",
          "content_same": false
        },
        {
          "line": 3822,
          "old_api": null,
          "new_api": "close_cursor",
          "old_text": null,
          "new_text": "close_cursor()",
          "old_line_content": "    allocated items when cleaning up after execution of this statement.",
          "new_line_content": "  close_cursor();",
          "content_same": false
        },
        {
          "line": 3312,
          "old_api": null,
          "new_api": "restore_backup_statement",
          "old_text": null,
          "new_text": "thd->restore_backup_statement(this, &stmt_backup)",
          "old_line_content": "",
          "new_line_content": "    thd->restore_backup_statement(this, &stmt_backup);",
          "content_same": false
        },
        {
          "line": 3313,
          "old_api": null,
          "new_api": "restore_active_arena",
          "old_text": null,
          "new_text": "thd->restore_active_arena(this, &stmt_backup)",
          "old_line_content": "  old_stmt_arena= thd->stmt_arena;",
          "new_line_content": "    thd->restore_active_arena(this, &stmt_backup);",
          "content_same": false
        },
        {
          "line": 3314,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(TRUE)",
          "old_line_content": "  thd->stmt_arena= this;",
          "new_line_content": "    DBUG_RETURN(TRUE);",
          "content_same": false
        },
        {
          "line": 4339,
          "old_api": null,
          "new_api": "store_column",
          "old_text": null,
          "new_text": "store_column(&v, 4)",
          "old_line_content": "/** Store a \"longlong\" as is (8 bytes, host order) in a result set column. */",
          "new_line_content": "  return store_column(&v, 4);",
          "content_same": false
        },
        {
          "line": 3828,
          "old_api": null,
          "new_api": "is_empty",
          "old_text": null,
          "new_text": "thd->change_list.is_empty()",
          "old_line_content": "   after stmt->set_params_from_vars(), which may in some cases create",
          "new_line_content": "  DBUG_ASSERT(thd->change_list.is_empty());",
          "content_same": false
        },
        {
          "line": 3321,
          "old_api": null,
          "new_api": "query_length",
          "old_text": null,
          "new_text": "thd->query_length()",
          "old_line_content": "    thd->stmt_arena= old_stmt_arena;",
          "new_line_content": "  if (parser_state.init(thd, thd->query(), thd->query_length()))",
          "content_same": false
        },
        {
          "line": 3323,
          "old_api": null,
          "new_api": "restore_backup_statement",
          "old_text": null,
          "new_text": "thd->restore_backup_statement(this, &stmt_backup)",
          "old_line_content": "  }",
          "new_line_content": "    thd->restore_backup_statement(this, &stmt_backup);",
          "content_same": false
        },
        {
          "line": 3324,
          "old_api": null,
          "new_api": "restore_active_arena",
          "old_text": null,
          "new_text": "thd->restore_active_arena(this, &stmt_backup)",
          "old_line_content": "",
          "new_line_content": "    thd->restore_active_arena(this, &stmt_backup);",
          "content_same": false
        },
        {
          "line": 4348,
          "old_api": null,
          "new_api": "store_column",
          "old_text": null,
          "new_text": "store_column(&v, 8)",
          "old_line_content": "/** Store a decimal in string format in a result set column */",
          "new_line_content": "  return store_column(&v, 8);",
          "content_same": false
        },
        {
          "line": 3326,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(TRUE)",
          "old_line_content": "  parser_state.m_lip.multi_statements= FALSE;",
          "new_line_content": "    DBUG_RETURN(TRUE);",
          "content_same": false
        },
        {
          "line": 3836,
          "old_api": null,
          "new_api": "set_n_backup_statement",
          "old_text": null,
          "new_text": "thd->set_n_backup_statement(this, &stmt_backup)",
          "old_line_content": "",
          "new_line_content": "  thd->set_n_backup_statement(this, &stmt_backup);",
          "content_same": false
        },
        {
          "line": 3846,
          "old_api": null,
          "new_api": "mysql_opt_change_db",
          "old_text": null,
          "new_text": "mysql_opt_change_db(thd, &stmt_db_name, &saved_cur_db_name, TRUE,\n                          &cur_db_changed)",
          "old_line_content": "  /* Allocate query. */",
          "new_line_content": "  if (mysql_opt_change_db(thd, &stmt_db_name, &saved_cur_db_name, TRUE,",
          "content_same": false
        },
        {
          "line": 4360,
          "old_api": null,
          "new_api": "my_decimal2string",
          "old_text": null,
          "new_text": "my_decimal2string(E_DEC_FATAL_ERROR, value, 0, 0, 0, &str)",
          "old_line_content": "",
          "new_line_content": "  rc= my_decimal2string(E_DEC_FATAL_ERROR, value, 0, 0, 0, &str);",
          "content_same": false
        },
        {
          "line": 3336,
          "old_api": null,
          "new_api": "parse_sql",
          "old_text": null,
          "new_text": "parse_sql(thd, & parser_state, NULL)",
          "old_line_content": "",
          "new_line_content": "  error= parse_sql(thd, & parser_state, NULL) ||",
          "content_same": false
        },
        {
          "line": 3338,
          "old_api": null,
          "new_api": "init_param_array",
          "old_text": null,
          "new_text": "init_param_array(this)",
          "old_line_content": "",
          "new_line_content": "    init_param_array(this);",
          "content_same": false
        },
        {
          "line": 4365,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "str.length()",
          "old_line_content": "/** Convert to cs_results and store a string. */",
          "new_line_content": "  return store_column(str.ptr(), str.length());",
          "content_same": false
        },
        {
          "line": 3341,
          "old_api": null,
          "new_api": "set_trg_event_type_for_tables",
          "old_text": null,
          "new_text": "lex->set_trg_event_type_for_tables()",
          "old_line_content": "    we allocate a lot of additional memory: for open tables, JOINs, derived",
          "new_line_content": "  lex->set_trg_event_type_for_tables();",
          "content_same": false
        },
        {
          "line": 3853,
          "old_api": null,
          "new_api": "ptr",
          "old_text": null,
          "new_text": "expanded_query->ptr()",
          "old_line_content": "    goto error;",
          "new_line_content": "      alloc_query(thd, (char*) expanded_query->ptr(),",
          "content_same": false
        },
        {
          "line": 3854,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "expanded_query->length()",
          "old_line_content": "  }",
          "new_line_content": "                  expanded_query->length()))",
          "content_same": false
        },
        {
          "line": 3856,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "expanded_query->length()",
          "old_line_content": "    Expanded query is needed for slow logging, so we want thd->query",
          "new_line_content": "    my_error(ER_OUTOFMEMORY, 0, expanded_query->length());",
          "content_same": false
        },
        {
          "line": 3351,
          "old_api": null,
          "new_api": "restore_active_arena",
          "old_text": null,
          "new_text": "thd->restore_active_arena(this, &stmt_backup)",
          "old_line_content": "    external changes when cleaning up after validation.",
          "new_line_content": "  thd->restore_active_arena(this, &stmt_backup);",
          "content_same": false
        },
        {
          "line": 3864,
          "old_api": null,
          "new_api": "set_query_inner",
          "old_text": null,
          "new_text": "stmt_backup.set_query_inner(thd->query_string)",
          "old_line_content": "    transformations of the query tree. Such changes should be performed",
          "new_line_content": "  stmt_backup.set_query_inner(thd->query_string);",
          "content_same": false
        },
        {
          "line": 4377,
          "old_api": null,
          "new_api": "store_string",
          "old_text": null,
          "new_text": "store_string(str, length, src_cs, dst_cs)",
          "old_line_content": "/** Store a string. */",
          "new_line_content": "  return store_string(str, length, src_cs, dst_cs);",
          "content_same": false
        },
        {
          "line": 3357,
          "old_api": null,
          "new_api": "is_empty",
          "old_text": null,
          "new_text": "thd->change_list.is_empty()",
          "old_line_content": "    statement is being checked.",
          "new_line_content": "  DBUG_ASSERT(thd->change_list.is_empty());",
          "content_same": false
        },
        {
          "line": 4387,
          "old_api": null,
          "new_api": "store_string",
          "old_text": null,
          "new_text": "store_string(str, length, src_cs, dst_cs)",
          "old_line_content": "/* Store MYSQL_TIME (in binary format) */",
          "new_line_content": "  return store_string(str, length, src_cs, dst_cs);",
          "content_same": false
        },
        {
          "line": 3363,
          "old_api": null,
          "new_api": "mdl_savepoint",
          "old_text": null,
          "new_text": "thd->mdl_context.mdl_savepoint()",
          "old_line_content": "   after stmt->set_params_from_vars(), which may in some cases create",
          "new_line_content": "  MDL_savepoint mdl_savepoint= thd->mdl_context.mdl_savepoint();",
          "content_same": false
        },
        {
          "line": 3875,
          "old_api": null,
          "new_api": "reinit_stmt_before_use",
          "old_text": null,
          "new_text": "reinit_stmt_before_use(thd, lex)",
          "old_line_content": "  if (open_cursor)",
          "new_line_content": "  reinit_stmt_before_use(thd, lex);",
          "content_same": false
        },
        {
          "line": 3880,
          "old_api": null,
          "new_api": "mysql_open_cursor",
          "old_text": null,
          "new_text": "mysql_open_cursor(thd, &result, &cursor)",
          "old_line_content": "      Try to find it in the query cache, if not, execute it.",
          "new_line_content": "    error= mysql_open_cursor(thd, &result, &cursor);",
          "content_same": false
        },
        {
          "line": 4396,
          "old_api": null,
          "new_api": "store_column",
          "old_text": null,
          "new_text": "store_column(time, sizeof(MYSQL_TIME))",
          "old_line_content": "/** Store MYSQL_TIME (in binary format) */",
          "new_line_content": "  return store_column(time, sizeof(MYSQL_TIME));",
          "content_same": false
        },
        {
          "line": 3372,
          "old_api": null,
          "new_api": "check_prepared_statement",
          "old_text": null,
          "new_text": "check_prepared_statement(this)",
          "old_line_content": "    statements: ensure we have no memory leak here if by someone tries",
          "new_line_content": "    error= check_prepared_statement(this);",
          "content_same": false
        },
        {
          "line": 3889,
          "old_api": null,
          "new_api": "query_length",
          "old_text": null,
          "new_text": "thd->query_length()",
          "old_line_content": "                             thd->thread_id,",
          "new_line_content": "                                          thd->query_length()) <= 0)",
          "content_same": false
        },
        {
          "line": 3379,
          "old_api": null,
          "new_api": "DBUG_ASSERT",
          "old_text": null,
          "new_text": "DBUG_ASSERT(lex->sphead == NULL || error != 0)",
          "old_line_content": "  /* No need to commit statement transaction, it's not started. */",
          "new_line_content": "  DBUG_ASSERT(lex->sphead == NULL || error != 0);",
          "content_same": false
        },
        {
          "line": 4404,
          "old_api": null,
          "new_api": "store_column",
          "old_text": null,
          "new_text": "store_column(time, sizeof(MYSQL_TIME))",
          "old_line_content": "/** Store MYSQL_TIME (in binary format) */",
          "new_line_content": "  return store_column(time, sizeof(MYSQL_TIME));",
          "content_same": false
        },
        {
          "line": 3381,
          "old_api": null,
          "new_api": "cleanup",
          "old_text": null,
          "new_text": "lex->unit.cleanup()",
          "old_line_content": "",
          "new_line_content": "  lex->unit.cleanup();",
          "content_same": false
        },
        {
          "line": 3892,
          "old_api": null,
          "new_api": "query",
          "old_text": null,
          "new_text": "thd->query()",
          "old_line_content": "                             (char *) thd->security_ctx->host_or_ip,",
          "new_line_content": "      MYSQL_QUERY_EXEC_START(thd->query(),",
          "content_same": false
        },
        {
          "line": 3387,
          "old_api": null,
          "new_api": "rollback_to_savepoint",
          "old_text": null,
          "new_text": "thd->mdl_context.rollback_to_savepoint(mdl_savepoint)",
          "old_line_content": "  thd->stmt_arena= old_stmt_arena;",
          "new_line_content": "  thd->mdl_context.rollback_to_savepoint(mdl_savepoint);",
          "content_same": false
        },
        {
          "line": 3388,
          "old_api": null,
          "new_api": "lex_end",
          "old_text": null,
          "new_text": "lex_end(lex)",
          "old_line_content": "",
          "new_line_content": "  lex_end(lex);",
          "content_same": false
        },
        {
          "line": 4413,
          "old_api": null,
          "new_api": "store_column",
          "old_text": null,
          "new_text": "store_column(time, sizeof(MYSQL_TIME))",
          "old_line_content": "/* Store a floating point number, as is. */",
          "new_line_content": "  return store_column(time, sizeof(MYSQL_TIME));",
          "content_same": false
        },
        {
          "line": 3389,
          "old_api": null,
          "new_api": "cleanup_stmt",
          "old_text": null,
          "new_text": "cleanup_stmt()",
          "old_line_content": "  if (error == 0)",
          "new_line_content": "  cleanup_stmt();",
          "content_same": false
        },
        {
          "line": 3390,
          "old_api": null,
          "new_api": "restore_backup_statement",
          "old_text": null,
          "new_text": "thd->restore_backup_statement(this, &stmt_backup)",
          "old_line_content": "  {",
          "new_line_content": "  thd->restore_backup_statement(this, &stmt_backup);",
          "content_same": false
        },
        {
          "line": 3900,
          "old_api": null,
          "new_api": "mysql_execute_command",
          "old_text": null,
          "new_text": "mysql_execute_command(thd)",
          "old_line_content": "  }",
          "new_line_content": "      error= mysql_execute_command(thd);",
          "content_same": false
        },
        {
          "line": 3902,
          "old_api": null,
          "new_api": "MYSQL_QUERY_EXEC_DONE",
          "old_text": null,
          "new_text": "MYSQL_QUERY_EXEC_DONE(error)",
          "old_line_content": "  /*",
          "new_line_content": "      MYSQL_QUERY_EXEC_DONE(error);",
          "content_same": false
        },
        {
          "line": 3395,
          "old_api": null,
          "new_api": "setup_set_params",
          "old_text": null,
          "new_text": "setup_set_params()",
          "old_line_content": "",
          "new_line_content": "    setup_set_params();",
          "content_same": false
        },
        {
          "line": 4421,
          "old_api": null,
          "new_api": "store_column",
          "old_text": null,
          "new_text": "store_column(&value, sizeof(float))",
          "old_line_content": "/* Store a double precision number, as is. */",
          "new_line_content": "  return store_column(&value, sizeof(float));",
          "content_same": false
        },
        {
          "line": 3915,
          "old_api": null,
          "new_api": "mysql_change_db",
          "old_text": null,
          "new_text": "mysql_change_db(thd, &saved_cur_db_name, TRUE)",
          "old_line_content": "",
          "new_line_content": "    mysql_change_db(thd, &saved_cur_db_name, TRUE);",
          "content_same": false
        },
        {
          "line": 4429,
          "old_api": null,
          "new_api": "store_column",
          "old_text": null,
          "new_text": "store_column(&value, sizeof (double))",
          "old_line_content": "/* Store a Field. */",
          "new_line_content": "  return store_column(&value, sizeof (double));",
          "content_same": false
        },
        {
          "line": 3918,
          "old_api": null,
          "new_api": "DBUG_ASSERT",
          "old_text": null,
          "new_text": "DBUG_ASSERT(! (error && cursor))",
          "old_line_content": "",
          "new_line_content": "  DBUG_ASSERT(! (error && cursor));",
          "content_same": false
        },
        {
          "line": 3921,
          "old_api": null,
          "new_api": "cleanup_stmt",
          "old_text": null,
          "new_text": "cleanup_stmt()",
          "old_line_content": "",
          "new_line_content": "    cleanup_stmt();",
          "content_same": false
        },
        {
          "line": 3923,
          "old_api": null,
          "new_api": "set_statement",
          "old_text": null,
          "new_text": "thd->set_statement(&stmt_backup)",
          "old_line_content": "    state= Query_arena::STMT_EXECUTED;",
          "new_line_content": "  thd->set_statement(&stmt_backup);",
          "content_same": false
        },
        {
          "line": 4437,
          "old_api": null,
          "new_api": "is_null",
          "old_text": null,
          "new_text": "field->is_null()",
          "old_line_content": "",
          "new_line_content": "  if (field->is_null())",
          "content_same": false
        },
        {
          "line": 4438,
          "old_api": null,
          "new_api": "store_null",
          "old_text": null,
          "new_text": "store_null()",
          "old_line_content": "",
          "new_line_content": "    return store_null();",
          "content_same": false
        },
        {
          "line": 4439,
          "old_api": null,
          "new_api": "send_binary",
          "old_text": null,
          "new_text": "field->send_binary(this)",
          "old_line_content": "/** Called to start a new result set. */",
          "new_line_content": "  return field->send_binary(this);",
          "content_same": false
        },
        {
          "line": 3416,
          "old_api": null,
          "new_api": "query_length",
          "old_text": null,
          "new_text": "query_length()",
          "old_line_content": "",
          "new_line_content": "      general_log_write(thd, COM_STMT_PREPARE, query(), query_length());",
          "content_same": false
        },
        {
          "line": 3418,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(error)",
          "old_line_content": "/**",
          "new_line_content": "  DBUG_RETURN(error);",
          "content_same": false
        },
        {
          "line": 3931,
          "old_api": null,
          "new_api": "is_sql_prepare",
          "old_text": null,
          "new_text": "is_sql_prepare()",
          "old_line_content": "  }",
          "new_line_content": "    if (is_sql_prepare())",
          "content_same": false
        },
        {
          "line": 3932,
          "old_api": null,
          "new_api": "send_out_parameters",
          "old_text": null,
          "new_text": "thd->protocol_text.send_out_parameters(&this->lex->param_list)",
          "old_line_content": "",
          "new_line_content": "      thd->protocol_text.send_out_parameters(&this->lex->param_list);",
          "content_same": false
        },
        {
          "line": 3934,
          "old_api": null,
          "new_api": "send_out_parameters",
          "old_text": null,
          "new_text": "thd->protocol->send_out_parameters(&this->lex->param_list)",
          "old_line_content": "    Log COM_EXECUTE to the general log. Note, that in case of SQL",
          "new_line_content": "      thd->protocol->send_out_parameters(&this->lex->param_list);",
          "content_same": false
        },
        {
          "line": 4447,
          "old_api": null,
          "new_api": "alloc_root_inited",
          "old_text": null,
          "new_text": "alloc_root_inited(&m_rset_root)",
          "old_line_content": "  if (! (m_rset= new (&m_rset_root) List<Ed_row>))",
          "new_line_content": "  DBUG_ASSERT(m_rset == 0 && !alloc_root_inited(&m_rset_root));",
          "content_same": false
        },
        {
          "line": 4449,
          "old_api": null,
          "new_api": "init_sql_alloc",
          "old_text": null,
          "new_text": "init_sql_alloc(&m_rset_root, MEM_ROOT_BLOCK_SIZE, 0)",
          "old_line_content": "",
          "new_line_content": "  init_sql_alloc(&m_rset_root, MEM_ROOT_BLOCK_SIZE, 0);",
          "content_same": false
        },
        {
          "line": 3953,
          "old_api": null,
          "new_api": "query_length",
          "old_text": null,
          "new_text": "thd->query_length()",
          "old_line_content": "  return error;",
          "new_line_content": "    general_log_write(thd, COM_STMT_EXECUTE, thd->query(), thd->query_length());",
          "content_same": false
        },
        {
          "line": 3452,
          "old_api": null,
          "new_api": "set_params_from_vars",
          "old_text": null,
          "new_text": "set_params_from_vars(this, thd->lex->prepared_stmt_params,\n                              expanded_query)",
          "old_line_content": "  {",
          "new_line_content": "    res= set_params_from_vars(this, thd->lex->prepared_stmt_params,",
          "content_same": false
        },
        {
          "line": 3966,
          "old_api": null,
          "new_api": "status_var_increment",
          "old_text": null,
          "new_text": "status_var_increment(thd->status_var.com_stmt_close)",
          "old_line_content": "",
          "new_line_content": "  status_var_increment(thd->status_var.com_stmt_close);",
          "content_same": false
        },
        {
          "line": 3968,
          "old_api": null,
          "new_api": "erase",
          "old_text": null,
          "new_text": "thd->stmt_map.erase(this)",
          "old_line_content": "/***************************************************************************",
          "new_line_content": "  thd->stmt_map.erase(this);",
          "content_same": false
        },
        {
          "line": 3459,
          "old_api": null,
          "new_api": "setup_conversion_functions",
          "old_text": null,
          "new_text": "setup_conversion_functions(this, &packet, packet_end)",
          "old_line_content": "      In embedded library we re-install conversion routines each time",
          "new_line_content": "    res= (setup_conversion_functions(this, &packet, packet_end) ||",
          "content_same": false
        },
        {
          "line": 3460,
          "old_api": null,
          "new_api": "set_params",
          "old_text": null,
          "new_text": "set_params(this, null_array, packet, packet_end, expanded_query)",
          "old_line_content": "      we set parameters, and also we don't need to parse packet.",
          "new_line_content": "          set_params(this, null_array, packet, packet_end, expanded_query));",
          "content_same": false
        },
        {
          "line": 3467,
          "old_api": null,
          "new_api": "set_params_data",
          "old_text": null,
          "new_text": "set_params_data(this, expanded_query)",
          "old_line_content": "  {",
          "new_line_content": "    res= set_params_data(this, expanded_query);",
          "content_same": false
        },
        {
          "line": 3472,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(0)",
          "old_line_content": "  return res;",
          "new_line_content": "    my_error(ER_WRONG_ARGUMENTS, MYF(0),",
          "content_same": false
        },
        {
          "line": 3474,
          "old_api": null,
          "new_api": "reset_stmt_params",
          "old_text": null,
          "new_text": "reset_stmt_params(this)",
          "old_line_content": "",
          "new_line_content": "    reset_stmt_params(this);",
          "content_same": false
        },
        {
          "line": 4499,
          "old_api": null,
          "new_api": "DBUG_ASSERT",
          "old_text": null,
          "new_text": "DBUG_ASSERT(m_rset)",
          "old_line_content": "",
          "new_line_content": "  DBUG_ASSERT(m_rset);",
          "content_same": false
        },
        {
          "line": 4501,
          "old_api": null,
          "new_api": "opt_add_row_to_rset",
          "old_text": null,
          "new_text": "opt_add_row_to_rset()",
          "old_line_content": "                                                  &m_rset_root);",
          "new_line_content": "  opt_add_row_to_rset();",
          "content_same": false
        },
        {
          "line": 3991,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(0)",
          "old_line_content": "",
          "new_line_content": "    free_root(&own_root, MYF(0));",
          "content_same": false
        },
        {
          "line": 4513,
          "old_api": null,
          "new_api": "alloc_root_inited",
          "old_text": null,
          "new_text": "alloc_root_inited(&m_rset_root)",
          "old_line_content": "    result sets. Never fails.",
          "new_line_content": "  DBUG_ASSERT(!alloc_root_inited(&m_rset_root));",
          "content_same": false
        },
        {
          "line": 4519,
          "old_api": null,
          "new_api": "add_result_set",
          "old_text": null,
          "new_text": "m_connection->add_result_set(ed_result_set)",
          "old_line_content": "",
          "new_line_content": "  m_connection->add_result_set(ed_result_set);",
          "content_same": false
        },
        {
          "line": 4016,
          "old_api": null,
          "new_api": "clear_alloc_root",
          "old_text": null,
          "new_text": "clear_alloc_root(mem_root_arg)",
          "old_line_content": "* Ed_result_set",
          "new_line_content": "  clear_alloc_root(mem_root_arg);",
          "content_same": false
        },
        {
          "line": 3521,
          "old_api": null,
          "new_api": "set_parameters",
          "old_text": null,
          "new_text": "set_parameters(expanded_query, packet, packet_end)",
          "old_line_content": "               !lex->is_change_password))",
          "new_line_content": "  if (set_parameters(expanded_query, packet, packet_end))",
          "content_same": false
        },
        {
          "line": 3524,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(thd->security_ctx->password_expired && \n               !lex->is_change_password)",
          "old_line_content": "    return true;",
          "new_line_content": "  if (unlikely(thd->security_ctx->password_expired && ",
          "content_same": false
        },
        {
          "line": 3527,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(0)",
          "old_line_content": "reexecute:",
          "new_line_content": "    my_error(ER_MUST_CHANGE_PASSWORD, MYF(0));",
          "content_same": false
        },
        {
          "line": 3537,
          "old_api": null,
          "new_api": "DBUG_ASSERT",
          "old_text": null,
          "new_text": "DBUG_ASSERT(thd->free_list == NULL)",
          "old_line_content": "    different from prepare time and an observer is installed,",
          "new_line_content": "  DBUG_ASSERT(thd->free_list == NULL);",
          "content_same": false
        },
        {
          "line": 4053,
          "old_api": null,
          "new_api": "reset_diagnostics_area",
          "old_text": null,
          "new_text": "m_diagnostics_area.reset_diagnostics_area()",
          "old_line_content": "",
          "new_line_content": "  m_diagnostics_area.reset_diagnostics_area();",
          "content_same": false
        },
        {
          "line": 4054,
          "old_api": null,
          "new_api": "clear_warning_info",
          "old_text": null,
          "new_text": "m_diagnostics_area.clear_warning_info(m_thd->query_id)",
          "old_line_content": "/**",
          "new_line_content": "  m_diagnostics_area.clear_warning_info(m_thd->query_id);",
          "content_same": false
        },
        {
          "line": 4066,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"ed_query\", (\"%s\", sql_text.str))",
          "old_line_content": "",
          "new_line_content": "  DBUG_PRINT(\"ed_query\", (\"%s\", sql_text.str));",
          "content_same": false
        },
        {
          "line": 3555,
          "old_api": null,
          "new_api": "is_error",
          "old_text": null,
          "new_text": "thd->is_error()",
          "old_line_content": "  if ((sql_command_flags[lex->sql_command] & CF_REEXECUTION_FRAGILE) &&",
          "new_line_content": "  error= execute(expanded_query, open_cursor) || thd->is_error();",
          "content_same": false
        },
        {
          "line": 4068,
          "old_api": null,
          "new_api": "execute_direct",
          "old_text": null,
          "new_text": "execute_direct(&execute_sql_statement)",
          "old_line_content": "/**",
          "new_line_content": "  return execute_direct(&execute_sql_statement);",
          "content_same": false
        },
        {
          "line": 3564,
          "old_api": null,
          "new_api": "get_stmt_da",
          "old_text": null,
          "new_text": "thd->get_stmt_da()->sql_errno()",
          "old_line_content": "",
          "new_line_content": "    DBUG_ASSERT(thd->get_stmt_da()->sql_errno() == ER_NEED_REPREPARE);",
          "content_same": false
        },
        {
          "line": 3565,
          "old_api": null,
          "new_api": "clear_error",
          "old_text": null,
          "new_text": "thd->clear_error()",
          "old_line_content": "    if (! error)                                /* Success */",
          "new_line_content": "    thd->clear_error();",
          "content_same": false
        },
        {
          "line": 3567,
          "old_api": null,
          "new_api": "reprepare",
          "old_text": null,
          "new_text": "reprepare()",
          "old_line_content": "  }",
          "new_line_content": "    error= reprepare();",
          "content_same": false
        },
        {
          "line": 3572,
          "old_api": null,
          "new_api": "reset_stmt_params",
          "old_text": null,
          "new_text": "reset_stmt_params(this)",
          "old_line_content": "",
          "new_line_content": "  reset_stmt_params(this);",
          "content_same": false
        },
        {
          "line": 4093,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"Ed_connection::execute_direct\")",
          "old_line_content": "  m_thd->protocol= &protocol_local;",
          "new_line_content": "  DBUG_ENTER(\"Ed_connection::execute_direct\");",
          "content_same": false
        },
        {
          "line": 4095,
          "old_api": null,
          "new_api": "free_old_result",
          "old_text": null,
          "new_text": "free_old_result()",
          "old_line_content": "",
          "new_line_content": "  free_old_result(); /* Delete all data from previous execution, if any */",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 4096,
          "old_api": "execute_server_runnable",
          "new_api": null,
          "old_text": "stmt.execute_server_runnable(server_runnable)",
          "new_text": null,
          "old_line_content": "  rc= stmt.execute_server_runnable(server_runnable);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4097,
          "old_api": "end_statement",
          "new_api": null,
          "old_text": "m_thd->protocol->end_statement()",
          "new_text": null,
          "old_line_content": "  m_thd->protocol->end_statement();",
          "new_line_content": "  m_thd->protocol= &protocol_local;",
          "content_same": false
        },
        {
          "line": 3588,
          "old_api": "set_n_backup_statement",
          "new_api": null,
          "old_text": "thd->set_n_backup_statement(this, &stmt_backup)",
          "new_text": null,
          "old_line_content": "  thd->set_n_backup_statement(this, &stmt_backup);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3589,
          "old_api": "set_n_backup_active_arena",
          "new_api": null,
          "old_text": "thd->set_n_backup_active_arena(this, &stmt_backup)",
          "new_text": null,
          "old_line_content": "  thd->set_n_backup_active_arena(this, &stmt_backup);",
          "new_line_content": "  if (!(lex= new (mem_root) st_lex_local))",
          "content_same": false
        },
        {
          "line": 3594,
          "old_api": "cleanup_after_query",
          "new_api": null,
          "old_text": "thd->cleanup_after_query()",
          "new_text": null,
          "old_line_content": "  thd->cleanup_after_query();",
          "new_line_content": "  thd->stmt_arena= this;",
          "content_same": false
        },
        {
          "line": 4108,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(rc)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(rc);",
          "new_line_content": "    Reset it to point to the first result set instead.",
          "content_same": false
        },
        {
          "line": 3597,
          "old_api": "restore_backup_statement",
          "new_api": null,
          "old_text": "thd->restore_backup_statement(this, &stmt_backup)",
          "new_text": null,
          "old_line_content": "  thd->restore_backup_statement(this, &stmt_backup);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3633,
          "old_api": "set_sql_prepare",
          "new_api": null,
          "old_text": "copy.set_sql_prepare()",
          "new_text": null,
          "old_line_content": "  copy.set_sql_prepare(); /* To suppress sending metadata to the client. */",
          "new_line_content": "  bool error;",
          "content_same": false
        },
        {
          "line": 3635,
          "old_api": "status_var_increment",
          "new_api": null,
          "old_text": "status_var_increment(thd->status_var.com_stmt_reprepare)",
          "new_text": null,
          "old_line_content": "  status_var_increment(thd->status_var.com_stmt_reprepare);",
          "new_line_content": "  Prepared_statement copy(thd);",
          "content_same": false
        },
        {
          "line": 3642,
          "old_api": "query_length",
          "new_api": null,
          "old_text": "query_length()",
          "new_text": null,
          "old_line_content": "          copy.prepare(query(), query_length()) ||",
          "new_line_content": "                          &cur_db_changed))",
          "content_same": false
        },
        {
          "line": 4155,
          "old_api": "DBUG_ASSERT",
          "new_api": null,
          "old_text": "DBUG_ASSERT(m_current_rset)",
          "new_text": null,
          "old_line_content": "  DBUG_ASSERT(m_current_rset);",
          "new_line_content": "Ed_connection::store_result_set()",
          "content_same": false
        },
        {
          "line": 3643,
          "old_api": "validate_metadata",
          "new_api": null,
          "old_text": "validate_metadata(&copy)",
          "new_text": null,
          "old_line_content": "          validate_metadata(&copy));",
          "new_line_content": "    return TRUE;",
          "content_same": false
        },
        {
          "line": 3651,
          "old_api": "swap_parameter_array",
          "new_api": null,
          "old_text": "swap_parameter_array(param_array, copy.param_array, param_count)",
          "new_text": null,
          "old_line_content": "    swap_parameter_array(param_array, copy.param_array, param_count);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3145,
          "old_api": "is_update_query",
          "new_api": null,
          "old_text": "is_update_query(lex->sql_command)",
          "new_text": null,
          "old_line_content": "  if ((mysql_bin_log.is_open() && is_update_query(lex->sql_command)) ||",
          "new_line_content": "  */",
          "content_same": false
        },
        {
          "line": 3662,
          "old_api": "get_stmt_da",
          "new_api": null,
          "old_text": "thd->get_stmt_da()->clear_warning_info(thd->query_id)",
          "new_text": null,
          "old_line_content": "    thd->get_stmt_da()->clear_warning_info(thd->query_id);",
          "new_line_content": "      there were no separate query id issued for re-prepare.",
          "content_same": false
        },
        {
          "line": 4192,
          "old_api": "clear_alloc_root",
          "new_api": null,
          "old_text": "clear_alloc_root(&m_rset_root)",
          "new_text": null,
          "old_line_content": "  clear_alloc_root(&m_rset_root);",
          "new_line_content": "  m_column_count(0),",
          "content_same": false
        },
        {
          "line": 3178,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"Prepared_statement::~Prepared_statement\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"Prepared_statement::~Prepared_statement\");",
          "new_line_content": "*/",
          "content_same": false
        },
        {
          "line": 3179,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"enter\",(\"stmt: 0x%lx  cursor: 0x%lx\",\n                      (long) this, (long) cursor))",
          "new_text": null,
          "old_line_content": "  DBUG_PRINT(\"enter\",(\"stmt: 0x%lx  cursor: 0x%lx\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3691,
          "old_api": "is_sql_prepare",
          "new_api": null,
          "old_text": "is_sql_prepare()",
          "new_text": null,
          "old_line_content": "  if (is_sql_prepare() || lex->describe)",
          "new_line_content": "    If this is an SQL prepared statement or EXPLAIN,",
          "content_same": false
        },
        {
          "line": 4206,
          "old_api": "alloc_root_inited",
          "new_api": null,
          "old_text": "alloc_root_inited(&m_rset_root)",
          "new_text": null,
          "old_line_content": "  DBUG_ASSERT(alloc_root_inited(&m_rset_root));",
          "new_line_content": "*/",
          "content_same": false
        },
        {
          "line": 4208,
          "old_api": "opt_add_row_to_rset",
          "new_api": null,
          "old_text": "opt_add_row_to_rset()",
          "new_text": null,
          "old_line_content": "  opt_add_row_to_rset();",
          "new_line_content": "void Protocol_local::prepare_for_resend()",
          "content_same": false
        },
        {
          "line": 3186,
          "old_api": "free_items",
          "new_api": null,
          "old_text": "free_items()",
          "new_text": null,
          "old_line_content": "  free_items();",
          "new_line_content": "  /*",
          "content_same": false
        },
        {
          "line": 3192,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(0)",
          "new_text": null,
          "old_line_content": "  free_root(&main_mem_root, MYF(0));",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 3205,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"Prepared_statement::cleanup_stmt\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"Prepared_statement::cleanup_stmt\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3206,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"enter\",(\"stmt: 0x%lx\", (long) this))",
          "new_text": null,
          "old_line_content": "  DBUG_PRINT(\"enter\",(\"stmt: 0x%lx\", (long) this));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3208,
          "old_api": "cleanup_items",
          "new_api": null,
          "old_text": "cleanup_items(free_list)",
          "new_text": null,
          "old_line_content": "  cleanup_items(free_list);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3720,
          "old_api": "swap_variables",
          "new_api": null,
          "old_text": "swap_variables(MEM_ROOT, main_mem_root, copy->main_mem_root)",
          "new_text": null,
          "old_line_content": "  swap_variables(MEM_ROOT, main_mem_root, copy->main_mem_root);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3723,
          "old_api": "set_query_arena",
          "new_api": null,
          "old_text": "tmp_stmt.set_query_arena(this)",
          "new_text": null,
          "old_line_content": "  tmp_stmt.set_query_arena(this);",
          "new_line_content": "  /* Swap memory roots. */",
          "content_same": false
        },
        {
          "line": 3725,
          "old_api": "set_query_arena",
          "new_api": null,
          "old_text": "copy->set_query_arena(&tmp_stmt)",
          "new_text": null,
          "old_line_content": "  copy->set_query_arena(&tmp_stmt);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4239,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "m_rset->push_back(ed_row, &m_rset_root)",
          "new_text": null,
          "old_line_content": "      m_rset->push_back(ed_row, &m_rset_root);",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 3730,
          "old_api": "set_statement",
          "new_api": null,
          "old_text": "copy->set_statement(&tmp_stmt)",
          "new_text": null,
          "old_line_content": "  copy->set_statement(&tmp_stmt);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3219,
          "old_api": "memdup_root",
          "new_api": null,
          "old_text": "memdup_root(mem_root, name_arg->str, name_arg->length)",
          "new_text": null,
          "old_line_content": "  name.str= (char*) memdup_root(mem_root, name_arg->str, name_arg->length);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4253,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(m_current_column, 0, sizeof(*m_current_column))",
          "new_text": null,
          "old_line_content": "  memset(m_current_column, 0, sizeof(*m_current_column));",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3744,
          "old_api": "swap_variables",
          "new_api": null,
          "old_text": "swap_variables(LEX_STRING, name, copy->name)",
          "new_text": null,
          "old_line_content": "  swap_variables(LEX_STRING, name, copy->name);",
          "new_line_content": "  swap_variables(Item_param **, param_array, copy->param_array);",
          "content_same": false
        },
        {
          "line": 3749,
          "old_api": "DBUG_ASSERT",
          "new_api": null,
          "old_text": "DBUG_ASSERT(param_count == copy->param_count)",
          "new_text": null,
          "old_line_content": "  DBUG_ASSERT(param_count == copy->param_count);",
          "new_line_content": "  /* Ditto */",
          "content_same": false
        },
        {
          "line": 3750,
          "old_api": "DBUG_ASSERT",
          "new_api": null,
          "old_text": "DBUG_ASSERT(thd == copy->thd)",
          "new_text": null,
          "old_line_content": "  DBUG_ASSERT(thd == copy->thd);",
          "new_line_content": "  swap_variables(char *, db, copy->db);",
          "content_same": false
        },
        {
          "line": 3240,
          "old_api": "strmake",
          "new_api": null,
          "old_text": "this->strmake(db_arg, db_length_arg)",
          "new_text": null,
          "old_line_content": "    db= this->strmake(db_arg, db_length_arg);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4274,
          "old_api": "memdup_root",
          "new_api": null,
          "old_text": "memdup_root(&m_rset_root,\n                                             data,\n                                             length + 1 /* Safety */)",
          "new_text": null,
          "old_line_content": "  m_current_column->str= (char*) memdup_root(&m_rset_root,",
          "new_line_content": "  /*",
          "content_same": false
        },
        {
          "line": 4299,
          "old_api": "my_charset_same",
          "new_api": null,
          "old_text": "my_charset_same(src_cs, dst_cs)",
          "new_text": null,
          "old_line_content": "  if (dst_cs && !my_charset_same(src_cs, dst_cs) &&",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3791,
          "old_api": "status_var_increment",
          "new_api": null,
          "old_text": "status_var_increment(thd->status_var.com_stmt_execute)",
          "new_text": null,
          "old_line_content": "  status_var_increment(thd->status_var.com_stmt_execute);",
          "new_line_content": "  bool cur_db_changed;",
          "content_same": false
        },
        {
          "line": 4305,
          "old_api": "ptr",
          "new_api": null,
          "old_text": "convert->ptr()",
          "new_text": null,
          "old_line_content": "    str= convert->ptr();",
          "new_line_content": "      dst_cs != &my_charset_bin)",
          "content_same": false
        },
        {
          "line": 4306,
          "old_api": "length",
          "new_api": null,
          "old_text": "convert->length()",
          "new_text": null,
          "old_line_content": "    length= convert->length();",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 4308,
          "old_api": "store_column",
          "new_api": null,
          "old_text": "store_column(str, length)",
          "new_text": null,
          "old_line_content": "  return store_column(str, length);",
          "new_line_content": "      return TRUE;",
          "content_same": false
        },
        {
          "line": 3285,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"Prepared_statement::prepare\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"Prepared_statement::prepare\");",
          "new_line_content": "  bool error;",
          "content_same": false
        },
        {
          "line": 3291,
          "old_api": "status_var_increment",
          "new_api": null,
          "old_text": "status_var_increment(thd->status_var.com_stmt_prepare)",
          "new_text": null,
          "old_line_content": "  status_var_increment(thd->status_var.com_stmt_prepare);",
          "new_line_content": "    If this is an SQLCOM_PREPARE, we also increase Com_prepare_sql.",
          "content_same": false
        },
        {
          "line": 4317,
          "old_api": "store_column",
          "new_api": null,
          "old_text": "store_column(&v, 1)",
          "new_text": null,
          "old_line_content": "  return store_column(&v, 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3294,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(TRUE)",
          "new_text": null,
          "old_line_content": "    DBUG_RETURN(TRUE);",
          "new_line_content": "  */",
          "content_same": false
        },
        {
          "line": 3296,
          "old_api": "set_db",
          "new_api": null,
          "old_text": "set_db(thd->db, thd->db_length)",
          "new_text": null,
          "old_line_content": "  if (set_db(thd->db, thd->db_length))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3297,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(TRUE)",
          "new_text": null,
          "old_line_content": "    DBUG_RETURN(TRUE);",
          "new_line_content": "  if (! (lex= new (mem_root) st_lex_local))",
          "content_same": false
        },
        {
          "line": 3809,
          "old_api": "check_simple_select",
          "new_api": null,
          "old_text": "lex->result->check_simple_select()",
          "new_text": null,
          "old_line_content": "  if (open_cursor && lex->result && lex->result->check_simple_select())",
          "new_line_content": "    check_prepared_statement. lex->result->simple_select() is FALSE",
          "content_same": false
        },
        {
          "line": 3811,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"info\",(\"Cursor asked for not SELECT stmt\"))",
          "new_text": null,
          "old_line_content": "    DBUG_PRINT(\"info\",(\"Cursor asked for not SELECT stmt\"));",
          "new_line_content": "  */",
          "content_same": false
        },
        {
          "line": 4326,
          "old_api": "store_column",
          "new_api": null,
          "old_text": "store_column(&v, 2)",
          "new_text": null,
          "old_line_content": "  return store_column(&v, 2);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3303,
          "old_api": "set_n_backup_statement",
          "new_api": null,
          "old_text": "thd->set_n_backup_statement(this, &stmt_backup)",
          "new_text": null,
          "old_line_content": "  thd->set_n_backup_statement(this, &stmt_backup);",
          "new_line_content": "  /*",
          "content_same": false
        },
        {
          "line": 3304,
          "old_api": "set_n_backup_active_arena",
          "new_api": null,
          "old_text": "thd->set_n_backup_active_arena(this, &stmt_backup)",
          "new_text": null,
          "old_line_content": "  thd->set_n_backup_active_arena(this, &stmt_backup);",
          "new_line_content": "    alloc_query() uses thd->memroot && thd->query, so we should call",
          "content_same": false
        },
        {
          "line": 3306,
          "old_api": "alloc_query",
          "new_api": null,
          "old_text": "alloc_query(thd, packet, packet_len)",
          "new_text": null,
          "old_line_content": "  if (alloc_query(thd, packet, packet_len))",
          "new_line_content": "  */",
          "content_same": false
        },
        {
          "line": 3818,
          "old_api": "close_cursor",
          "new_api": null,
          "old_text": "close_cursor()",
          "new_text": null,
          "old_line_content": "  close_cursor();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3309,
          "old_api": "restore_active_arena",
          "new_api": null,
          "old_text": "thd->restore_active_arena(this, &stmt_backup)",
          "new_text": null,
          "old_line_content": "    thd->restore_active_arena(this, &stmt_backup);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4335,
          "old_api": "store_column",
          "new_api": null,
          "old_text": "store_column(&v, 4)",
          "new_text": null,
          "old_line_content": "  return store_column(&v, 4);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3824,
          "old_api": "is_empty",
          "new_api": null,
          "old_text": "thd->change_list.is_empty()",
          "new_text": null,
          "old_line_content": "  DBUG_ASSERT(thd->change_list.is_empty());",
          "new_line_content": "  /*",
          "content_same": false
        },
        {
          "line": 3317,
          "old_api": "query_length",
          "new_api": null,
          "old_text": "thd->query_length()",
          "new_text": null,
          "old_line_content": "  if (parser_state.init(thd, thd->query(), thd->query_length()))",
          "new_line_content": "  old_stmt_arena= thd->stmt_arena;",
          "content_same": false
        },
        {
          "line": 3319,
          "old_api": "restore_backup_statement",
          "new_api": null,
          "old_text": "thd->restore_backup_statement(this, &stmt_backup)",
          "new_text": null,
          "old_line_content": "    thd->restore_backup_statement(this, &stmt_backup);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3320,
          "old_api": "restore_active_arena",
          "new_api": null,
          "old_text": "thd->restore_active_arena(this, &stmt_backup)",
          "new_text": null,
          "old_line_content": "    thd->restore_active_arena(this, &stmt_backup);",
          "new_line_content": "  Parser_state parser_state;",
          "content_same": false
        },
        {
          "line": 4344,
          "old_api": "store_column",
          "new_api": null,
          "old_text": "store_column(&v, 8)",
          "new_text": null,
          "old_line_content": "  return store_column(&v, 8);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3322,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(TRUE)",
          "new_text": null,
          "old_line_content": "    DBUG_RETURN(TRUE);",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 3832,
          "old_api": "set_n_backup_statement",
          "new_api": null,
          "old_text": "thd->set_n_backup_statement(this, &stmt_backup)",
          "new_text": null,
          "old_line_content": "  thd->set_n_backup_statement(this, &stmt_backup);",
          "new_line_content": "   after stmt->set_params_from_vars(), which may in some cases create",
          "content_same": false
        },
        {
          "line": 3328,
          "old_api": "lex_start",
          "new_api": null,
          "old_text": "lex_start(thd)",
          "new_text": null,
          "old_line_content": "  lex_start(thd);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3842,
          "old_api": "mysql_opt_change_db",
          "new_api": null,
          "old_text": "mysql_opt_change_db(thd, &stmt_db_name, &saved_cur_db_name, TRUE,\n                          &cur_db_changed)",
          "new_text": null,
          "old_line_content": "  if (mysql_opt_change_db(thd, &stmt_db_name, &saved_cur_db_name, TRUE,",
          "new_line_content": "    NULL (prepared statements can be created while no current database",
          "content_same": false
        },
        {
          "line": 4356,
          "old_api": "my_decimal2string",
          "new_api": null,
          "old_text": "my_decimal2string(E_DEC_FATAL_ERROR, value, 0, 0, 0, &str)",
          "new_text": null,
          "old_line_content": "  rc= my_decimal2string(E_DEC_FATAL_ERROR, value, 0, 0, 0, &str);",
          "new_line_content": "  char buf[DECIMAL_MAX_STR_LENGTH];",
          "content_same": false
        },
        {
          "line": 3333,
          "old_api": "is_error",
          "new_api": null,
          "old_text": "thd->is_error()",
          "new_text": null,
          "old_line_content": "    thd->is_error() ||",
          "new_line_content": "  lex->context_analysis_only|= CONTEXT_ANALYSIS_ONLY_PREPARE;",
          "content_same": false
        },
        {
          "line": 3334,
          "old_api": "init_param_array",
          "new_api": null,
          "old_text": "init_param_array(this)",
          "new_text": null,
          "old_line_content": "    init_param_array(this);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3848,
          "old_api": "length",
          "new_api": null,
          "old_text": "expanded_query->length()",
          "new_text": null,
          "old_line_content": "  if (expanded_query->length() &&",
          "new_line_content": "    goto error;",
          "content_same": false
        },
        {
          "line": 4361,
          "old_api": "length",
          "new_api": null,
          "old_text": "str.length()",
          "new_text": null,
          "old_line_content": "  return store_column(str.ptr(), str.length());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3849,
          "old_api": "ptr",
          "new_api": null,
          "old_text": "expanded_query->ptr()",
          "new_text": null,
          "old_line_content": "      alloc_query(thd, (char*) expanded_query->ptr(),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3850,
          "old_api": "length",
          "new_api": null,
          "old_text": "expanded_query->length()",
          "new_text": null,
          "old_line_content": "                  expanded_query->length()))",
          "new_line_content": "  /* Allocate query. */",
          "content_same": false
        },
        {
          "line": 3347,
          "old_api": "restore_active_arena",
          "new_api": null,
          "old_text": "thd->restore_active_arena(this, &stmt_backup)",
          "new_text": null,
          "old_line_content": "  thd->restore_active_arena(this, &stmt_backup);",
          "new_line_content": "    statement and restore original THD. In cases when some tree",
          "content_same": false
        },
        {
          "line": 3860,
          "old_api": "set_query_inner",
          "new_api": null,
          "old_text": "stmt_backup.set_query_inner(thd->query_string)",
          "new_text": null,
          "old_line_content": "  stmt_backup.set_query_inner(thd->query_string);",
          "new_line_content": "    Expanded query is needed for slow logging, so we want thd->query",
          "content_same": false
        },
        {
          "line": 4373,
          "old_api": "store_string",
          "new_api": null,
          "old_text": "store_string(str, length, src_cs, dst_cs)",
          "new_text": null,
          "old_line_content": "  return store_string(str, length, src_cs, dst_cs);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3353,
          "old_api": "is_empty",
          "new_api": null,
          "old_text": "thd->change_list.is_empty()",
          "new_text": null,
          "old_line_content": "  DBUG_ASSERT(thd->change_list.is_empty());",
          "new_line_content": "  /*",
          "content_same": false
        },
        {
          "line": 4383,
          "old_api": "store_string",
          "new_api": null,
          "old_text": "store_string(str, length, src_cs, dst_cs)",
          "new_text": null,
          "old_line_content": "  return store_string(str, length, src_cs, dst_cs);",
          "new_line_content": "bool Protocol_local::store(const char *str, size_t length,",
          "content_same": false
        },
        {
          "line": 3359,
          "old_api": "mdl_savepoint",
          "new_api": null,
          "old_text": "thd->mdl_context.mdl_savepoint()",
          "new_text": null,
          "old_line_content": "  MDL_savepoint mdl_savepoint= thd->mdl_context.mdl_savepoint();",
          "new_line_content": "  /*",
          "content_same": false
        },
        {
          "line": 3871,
          "old_api": "reinit_stmt_before_use",
          "new_api": null,
          "old_text": "reinit_stmt_before_use(thd, lex)",
          "new_text": null,
          "old_line_content": "  reinit_stmt_before_use(thd, lex);",
          "new_line_content": "    to the arena of the statement.",
          "content_same": false
        },
        {
          "line": 3876,
          "old_api": "mysql_open_cursor",
          "new_api": null,
          "old_text": "mysql_open_cursor(thd, &result, &cursor)",
          "new_text": null,
          "old_line_content": "    error= mysql_open_cursor(thd, &result, &cursor);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4392,
          "old_api": "store_column",
          "new_api": null,
          "old_text": "store_column(time, sizeof(MYSQL_TIME))",
          "new_text": null,
          "old_line_content": "  return store_column(time, sizeof(MYSQL_TIME));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3368,
          "old_api": "check_prepared_statement",
          "new_api": null,
          "old_text": "check_prepared_statement(this)",
          "new_text": null,
          "old_line_content": "    error= check_prepared_statement(this);",
          "new_line_content": "   Item_null objects.",
          "content_same": false
        },
        {
          "line": 3884,
          "old_api": "query",
          "new_api": null,
          "old_text": "thd->query()",
          "new_text": null,
          "old_line_content": "    if (query_cache_send_result_to_client(thd, thd->query(),",
          "new_line_content": "      Try to find it in the query cache, if not, execute it.",
          "content_same": false
        },
        {
          "line": 3885,
          "old_api": "query_length",
          "new_api": null,
          "old_text": "thd->query_length()",
          "new_text": null,
          "old_line_content": "                                          thd->query_length()) <= 0)",
          "new_line_content": "      Note that multi-statements cannot exist here (they are not supported in",
          "content_same": false
        },
        {
          "line": 3375,
          "old_api": "DBUG_ASSERT",
          "new_api": null,
          "old_text": "DBUG_ASSERT(lex->sphead == NULL || error != 0)",
          "new_text": null,
          "old_line_content": "  DBUG_ASSERT(lex->sphead == NULL || error != 0);",
          "new_line_content": "    Currently CREATE PROCEDURE/TRIGGER/EVENT are prohibited in prepared",
          "content_same": false
        },
        {
          "line": 4400,
          "old_api": "store_column",
          "new_api": null,
          "old_text": "store_column(time, sizeof(MYSQL_TIME))",
          "new_text": null,
          "old_line_content": "  return store_column(time, sizeof(MYSQL_TIME));",
          "new_line_content": "/** Store MYSQL_TIME (in binary format) */",
          "content_same": false
        },
        {
          "line": 3377,
          "old_api": "cleanup",
          "new_api": null,
          "old_text": "lex->unit.cleanup()",
          "new_text": null,
          "old_line_content": "  lex->unit.cleanup();",
          "new_line_content": "    to PREPARE stmt FROM \"CREATE PROCEDURE ...\"",
          "content_same": false
        },
        {
          "line": 3380,
          "old_api": "is_empty",
          "new_api": null,
          "old_text": "thd->transaction.stmt.is_empty()",
          "new_text": null,
          "old_line_content": "  DBUG_ASSERT(thd->transaction.stmt.is_empty());",
          "new_line_content": "  /* The order is important */",
          "content_same": false
        },
        {
          "line": 3382,
          "old_api": "close_thread_tables",
          "new_api": null,
          "old_text": "close_thread_tables(thd)",
          "new_text": null,
          "old_line_content": "  close_thread_tables(thd);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3383,
          "old_api": "rollback_to_savepoint",
          "new_api": null,
          "old_text": "thd->mdl_context.rollback_to_savepoint(mdl_savepoint)",
          "new_text": null,
          "old_line_content": "  thd->mdl_context.rollback_to_savepoint(mdl_savepoint);",
          "new_line_content": "  /* No need to commit statement transaction, it's not started. */",
          "content_same": false
        },
        {
          "line": 3896,
          "old_api": "mysql_execute_command",
          "new_api": null,
          "old_text": "mysql_execute_command(thd)",
          "new_text": null,
          "old_line_content": "      error= mysql_execute_command(thd);",
          "new_line_content": "                             (char *) thd->security_ctx->host_or_ip,",
          "content_same": false
        },
        {
          "line": 4409,
          "old_api": "store_column",
          "new_api": null,
          "old_text": "store_column(time, sizeof(MYSQL_TIME))",
          "new_text": null,
          "old_line_content": "  return store_column(time, sizeof(MYSQL_TIME));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3385,
          "old_api": "cleanup_stmt",
          "new_api": null,
          "old_text": "cleanup_stmt()",
          "new_text": null,
          "old_line_content": "  cleanup_stmt();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3898,
          "old_api": "MYSQL_QUERY_EXEC_DONE",
          "new_api": null,
          "old_text": "MYSQL_QUERY_EXEC_DONE(error)",
          "new_text": null,
          "old_line_content": "      MYSQL_QUERY_EXEC_DONE(error);",
          "new_line_content": "      parent_locker= thd->m_statement_psi;",
          "content_same": false
        },
        {
          "line": 3391,
          "old_api": "setup_set_params",
          "new_api": null,
          "old_text": "setup_set_params()",
          "new_text": null,
          "old_line_content": "    setup_set_params();",
          "new_line_content": "  thd->stmt_arena= old_stmt_arena;",
          "content_same": false
        },
        {
          "line": 4417,
          "old_api": "store_column",
          "new_api": null,
          "old_text": "store_column(&value, sizeof(float))",
          "new_text": null,
          "old_line_content": "  return store_column(&value, sizeof(float));",
          "new_line_content": "/* Store a floating point number, as is. */",
          "content_same": false
        },
        {
          "line": 3911,
          "old_api": "mysql_change_db",
          "new_api": null,
          "old_text": "mysql_change_db(thd, &saved_cur_db_name, TRUE)",
          "new_text": null,
          "old_line_content": "    mysql_change_db(thd, &saved_cur_db_name, TRUE);",
          "new_line_content": "    an error.",
          "content_same": false
        },
        {
          "line": 4425,
          "old_api": "store_column",
          "new_api": null,
          "old_text": "store_column(&value, sizeof (double))",
          "new_text": null,
          "old_line_content": "  return store_column(&value, sizeof (double));",
          "new_line_content": "/* Store a double precision number, as is. */",
          "content_same": false
        },
        {
          "line": 3914,
          "old_api": "DBUG_ASSERT",
          "new_api": null,
          "old_text": "DBUG_ASSERT(! (error && cursor))",
          "new_text": null,
          "old_line_content": "  DBUG_ASSERT(! (error && cursor));",
          "new_line_content": "  if (cur_db_changed)",
          "content_same": false
        },
        {
          "line": 3917,
          "old_api": "cleanup_stmt",
          "new_api": null,
          "old_text": "cleanup_stmt()",
          "new_text": null,
          "old_line_content": "    cleanup_stmt();",
          "new_line_content": "  /* Assert that if an error, no cursor is open */",
          "content_same": false
        },
        {
          "line": 3919,
          "old_api": "set_statement",
          "new_api": null,
          "old_text": "thd->set_statement(&stmt_backup)",
          "new_text": null,
          "old_line_content": "  thd->set_statement(&stmt_backup);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4433,
          "old_api": "is_null",
          "new_api": null,
          "old_text": "field->is_null()",
          "new_text": null,
          "old_line_content": "  if (field->is_null())",
          "new_line_content": "/* Store a Field. */",
          "content_same": false
        },
        {
          "line": 4434,
          "old_api": "store_null",
          "new_api": null,
          "old_text": "store_null()",
          "new_text": null,
          "old_line_content": "    return store_null();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4435,
          "old_api": "send_binary",
          "new_api": null,
          "old_text": "field->send_binary(this)",
          "new_text": null,
          "old_line_content": "  return field->send_binary(this);",
          "new_line_content": "bool Protocol_local::store(Field *field)",
          "content_same": false
        },
        {
          "line": 3412,
          "old_api": "query_length",
          "new_api": null,
          "old_text": "query_length()",
          "new_text": null,
          "old_line_content": "      general_log_write(thd, COM_STMT_PREPARE, query(), query_length());",
          "new_line_content": "      sub-statements inside stored procedures are not logged into",
          "content_same": false
        },
        {
          "line": 3414,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(error)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(error);",
          "new_line_content": "    */",
          "content_same": false
        },
        {
          "line": 3927,
          "old_api": "is_sql_prepare",
          "new_api": null,
          "old_text": "is_sql_prepare()",
          "new_text": null,
          "old_line_content": "    if (is_sql_prepare())",
          "new_line_content": "    state= Query_arena::STMT_EXECUTED;",
          "content_same": false
        },
        {
          "line": 3928,
          "old_api": "send_out_parameters",
          "new_api": null,
          "old_text": "thd->protocol_text.send_out_parameters(&this->lex->param_list)",
          "new_text": null,
          "old_line_content": "      thd->protocol_text.send_out_parameters(&this->lex->param_list);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3930,
          "old_api": "send_out_parameters",
          "new_api": null,
          "old_text": "thd->protocol->send_out_parameters(&this->lex->param_list)",
          "new_text": null,
          "old_line_content": "      thd->protocol->send_out_parameters(&this->lex->param_list);",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 4443,
          "old_api": "alloc_root_inited",
          "new_api": null,
          "old_text": "alloc_root_inited(&m_rset_root)",
          "new_text": null,
          "old_line_content": "  DBUG_ASSERT(m_rset == 0 && !alloc_root_inited(&m_rset_root));",
          "new_line_content": "/** Called to start a new result set. */",
          "content_same": false
        },
        {
          "line": 4445,
          "old_api": "init_sql_alloc",
          "new_api": null,
          "old_text": "init_sql_alloc(&m_rset_root, MEM_ROOT_BLOCK_SIZE, 0)",
          "new_text": null,
          "old_line_content": "  init_sql_alloc(&m_rset_root, MEM_ROOT_BLOCK_SIZE, 0);",
          "new_line_content": "bool Protocol_local::send_result_set_metadata(List<Item> *columns, uint)",
          "content_same": false
        },
        {
          "line": 3949,
          "old_api": "query_length",
          "new_api": null,
          "old_text": "thd->query_length()",
          "new_text": null,
          "old_line_content": "    general_log_write(thd, COM_STMT_EXECUTE, thd->query(), thd->query_length());",
          "new_line_content": "    sub-statements inside stored procedures are not logged into",
          "content_same": false
        },
        {
          "line": 3448,
          "old_api": "set_params_from_vars",
          "new_api": null,
          "old_text": "set_params_from_vars(this, thd->lex->prepared_stmt_params,\n                              expanded_query)",
          "new_text": null,
          "old_line_content": "    res= set_params_from_vars(this, thd->lex->prepared_stmt_params,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3962,
          "old_api": "status_var_increment",
          "new_api": null,
          "old_text": "status_var_increment(thd->status_var.com_stmt_close)",
          "new_text": null,
          "old_line_content": "  status_var_increment(thd->status_var.com_stmt_close);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3964,
          "old_api": "erase",
          "new_api": null,
          "old_text": "thd->stmt_map.erase(this)",
          "new_text": null,
          "old_line_content": "  thd->stmt_map.erase(this);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3455,
          "old_api": "setup_conversion_functions",
          "new_api": null,
          "old_text": "setup_conversion_functions(this, &packet, packet_end)",
          "new_text": null,
          "old_line_content": "    res= (setup_conversion_functions(this, &packet, packet_end) ||",
          "new_line_content": "  else if (param_count)",
          "content_same": false
        },
        {
          "line": 3456,
          "old_api": "set_params",
          "new_api": null,
          "old_text": "set_params(this, null_array, packet, packet_end, expanded_query)",
          "new_text": null,
          "old_line_content": "          set_params(this, null_array, packet, packet_end, expanded_query));",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 3463,
          "old_api": "set_params_data",
          "new_api": null,
          "old_text": "set_params_data(this, expanded_query)",
          "new_text": null,
          "old_line_content": "    res= set_params_data(this, expanded_query);",
          "new_line_content": "      In embedded library we re-install conversion routines each time",
          "content_same": false
        },
        {
          "line": 3468,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(0)",
          "new_text": null,
          "old_line_content": "    my_error(ER_WRONG_ARGUMENTS, MYF(0),",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 3470,
          "old_api": "reset_stmt_params",
          "new_api": null,
          "old_text": "reset_stmt_params(this)",
          "new_text": null,
          "old_line_content": "    reset_stmt_params(this);",
          "new_line_content": "  if (res)",
          "content_same": false
        },
        {
          "line": 4495,
          "old_api": "DBUG_ASSERT",
          "new_api": null,
          "old_text": "DBUG_ASSERT(m_rset)",
          "new_text": null,
          "old_line_content": "  DBUG_ASSERT(m_rset);",
          "new_line_content": "bool Protocol_local::send_eof(uint server_status, uint statement_warn_count)",
          "content_same": false
        },
        {
          "line": 4497,
          "old_api": "opt_add_row_to_rset",
          "new_api": null,
          "old_text": "opt_add_row_to_rset()",
          "new_text": null,
          "old_line_content": "  opt_add_row_to_rset();",
          "new_line_content": "  Ed_result_set *ed_result_set;",
          "content_same": false
        },
        {
          "line": 3987,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(0)",
          "new_text": null,
          "old_line_content": "    free_root(&own_root, MYF(0));",
          "new_line_content": "      Make a stack copy, otherwise free_root() will attempt to",
          "content_same": false
        },
        {
          "line": 4509,
          "old_api": "alloc_root_inited",
          "new_api": null,
          "old_text": "alloc_root_inited(&m_rset_root)",
          "new_text": null,
          "old_line_content": "  DBUG_ASSERT(!alloc_root_inited(&m_rset_root));",
          "new_line_content": "  if (! ed_result_set)",
          "content_same": false
        },
        {
          "line": 4515,
          "old_api": "add_result_set",
          "new_api": null,
          "old_text": "m_connection->add_result_set(ed_result_set)",
          "new_text": null,
          "old_line_content": "  m_connection->add_result_set(ed_result_set);",
          "new_line_content": "  /*",
          "content_same": false
        },
        {
          "line": 4012,
          "old_api": "clear_alloc_root",
          "new_api": null,
          "old_text": "clear_alloc_root(mem_root_arg)",
          "new_text": null,
          "old_line_content": "  clear_alloc_root(mem_root_arg);",
          "new_line_content": "  m_rows(rows_arg),",
          "content_same": false
        },
        {
          "line": 3513,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(0)",
          "new_text": null,
          "old_line_content": "    my_message(last_errno, last_error, MYF(0));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3520,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(thd->security_ctx->password_expired && \n               !lex->is_change_password)",
          "new_text": null,
          "old_line_content": "  if (unlikely(thd->security_ctx->password_expired && ",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3523,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(0)",
          "new_text": null,
          "old_line_content": "    my_error(ER_MUST_CHANGE_PASSWORD, MYF(0));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3533,
          "old_api": "DBUG_ASSERT",
          "new_api": null,
          "old_text": "DBUG_ASSERT(thd->free_list == NULL)",
          "new_text": null,
          "old_line_content": "  DBUG_ASSERT(thd->free_list == NULL);",
          "new_line_content": "    If the free_list is not empty, we'll wrongly free some externally",
          "content_same": false
        },
        {
          "line": 4049,
          "old_api": "reset_diagnostics_area",
          "new_api": null,
          "old_text": "m_diagnostics_area.reset_diagnostics_area()",
          "new_text": null,
          "old_line_content": "  m_diagnostics_area.reset_diagnostics_area();",
          "new_line_content": "    delete m_rsets;",
          "content_same": false
        },
        {
          "line": 4050,
          "old_api": "clear_warning_info",
          "new_api": null,
          "old_text": "m_diagnostics_area.clear_warning_info(m_thd->query_id)",
          "new_text": null,
          "old_line_content": "  m_diagnostics_area.clear_warning_info(m_thd->query_id);",
          "new_line_content": "    m_rsets= rset;",
          "content_same": false
        },
        {
          "line": 3545,
          "old_api": "reset_reprepare_observer",
          "new_api": null,
          "old_text": "reprepare_observer.reset_reprepare_observer()",
          "new_text": null,
          "old_line_content": "    reprepare_observer.reset_reprepare_observer();",
          "new_line_content": "  Reprepare_observer *stmt_reprepare_observer= NULL;",
          "content_same": false
        },
        {
          "line": 4062,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"ed_query\", (\"%s\", sql_text.str))",
          "new_text": null,
          "old_line_content": "  DBUG_PRINT(\"ed_query\", (\"%s\", sql_text.str));",
          "new_line_content": "bool",
          "content_same": false
        },
        {
          "line": 3551,
          "old_api": "is_error",
          "new_api": null,
          "old_text": "thd->is_error()",
          "new_text": null,
          "old_line_content": "  error= execute(expanded_query, open_cursor) || thd->is_error();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4064,
          "old_api": "execute_direct",
          "new_api": null,
          "old_text": "execute_direct(&execute_sql_statement)",
          "new_text": null,
          "old_line_content": "  return execute_direct(&execute_sql_statement);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3560,
          "old_api": "get_stmt_da",
          "new_api": null,
          "old_text": "thd->get_stmt_da()->sql_errno()",
          "new_text": null,
          "old_line_content": "    DBUG_ASSERT(thd->get_stmt_da()->sql_errno() == ER_NEED_REPREPARE);",
          "new_line_content": "      error && !thd->is_fatal_error && !thd->killed &&",
          "content_same": false
        },
        {
          "line": 3563,
          "old_api": "reprepare",
          "new_api": null,
          "old_text": "reprepare()",
          "new_text": null,
          "old_line_content": "    error= reprepare();",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 3568,
          "old_api": "reset_stmt_params",
          "new_api": null,
          "old_text": "reset_stmt_params(this)",
          "new_text": null,
          "old_line_content": "  reset_stmt_params(this);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4087,
          "old_api": "get_stmt_da",
          "new_api": null,
          "old_text": "m_thd->get_stmt_da()",
          "new_text": null,
          "old_line_content": "  Diagnostics_area *save_diagnostics_area= m_thd->get_stmt_da();",
          "new_line_content": "  bool rc= FALSE;",
          "content_same": false
        },
        {
          "line": 4089,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"Ed_connection::execute_direct\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"Ed_connection::execute_direct\");",
          "new_line_content": "  Prepared_statement stmt(m_thd);",
          "content_same": false
        },
        {
          "line": 3581,
          "old_api": "move_elements_to",
          "new_api": null,
          "old_text": "thd->change_list.move_elements_to(&save_change_list)",
          "new_text": null,
          "old_line_content": "  thd->change_list.move_elements_to(&save_change_list);",
          "new_line_content": "  Statement stmt_backup;",
          "content_same": false
        },
        {
          "line": 4094,
          "old_api": "set_stmt_da",
          "new_api": null,
          "old_text": "m_thd->set_stmt_da(&m_diagnostics_area)",
          "new_text": null,
          "old_line_content": "  m_thd->set_stmt_da(&m_diagnostics_area);",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 31,
      "total_additions": 146,
      "total_deletions": 145,
      "total_api_changes": 322
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 6,
        "api_related_lines": 322,
        "non_api_lines": 3,
        "non_api_line_numbers": [
          3144,
          3148,
          3149
        ]
      }
    },
    "api_calls_before": 734,
    "api_calls_after": 735,
    "diff_info": {
      "added_lines": 5,
      "removed_lines": 1,
      "total_diff_lines": 19
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/53b86f0dd10e80fd8346b619481d03557668452d",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/53b86f0dd10e80fd8346b619481d03557668452d/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/53b86f0dd10e80fd8346b619481d03557668452d/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/53b86f0dd10e80fd8346b619481d03557668452d/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 3461,
          "old_api": "upd_get_n_fields",
          "new_api": "dfield_is_ext",
          "old_text": "upd_get_n_fields(update)",
          "new_text": "dfield_is_ext(dfield)",
          "old_line_content": "\t\tfor (j = 0; j < upd_get_n_fields(update); j++) {",
          "new_line_content": "\t\tif (!dfield_is_ext(dfield)) {",
          "content_same": false
        },
        {
          "line": 3468,
          "old_api": "dfield_get_data",
          "new_api": "upd_get_nth_field",
          "old_text": "dfield_get_data(dfield)",
          "new_text": "upd_get_nth_field(update, j)",
          "old_line_content": "\t\tdata = dfield_get_data(dfield);",
          "new_line_content": "\t\t\tif (upd_get_nth_field(update, j)->field_no == i) {",
          "content_same": false
        },
        {
          "line": 3505,
          "old_api": "rec_offs_nth_extern",
          "new_api": "rec_offs_any_extern",
          "old_text": "rec_offs_nth_extern(offsets, i)",
          "new_text": "rec_offs_any_extern(offsets)",
          "old_line_content": "\t\tif (rec_offs_nth_extern(offsets, i)) {",
          "new_line_content": "\tif (!rec_offs_any_extern(offsets)) {",
          "content_same": false
        },
        {
          "line": 3559,
          "old_api": "dfield_is_ext",
          "new_api": "ut_ad",
          "old_text": "dfield_is_ext(&uf->new_val)",
          "new_text": "ut_ad(update)",
          "old_line_content": "\t\tif (dfield_is_ext(&uf->new_val)) {",
          "new_line_content": "\tut_ad(update);",
          "content_same": false
        },
        {
          "line": 3616,
          "old_api": "mutex_enter",
          "new_api": "buf_block_get_page_no",
          "old_text": "mutex_enter(&buf_pool->mutex)",
          "new_text": "buf_block_get_page_no(block)",
          "old_line_content": "\tmutex_enter(&buf_pool->mutex);",
          "new_line_content": "\tulint\tpage_no\t= buf_block_get_page_no(block);",
          "content_same": false
        },
        {
          "line": 3622,
          "old_api": "buf_block_get_state",
          "new_api": "mutex_enter",
          "old_text": "buf_block_get_state(block)",
          "new_text": "mutex_enter(&buf_pool->mutex)",
          "old_line_content": "\tif (buf_block_get_state(block)",
          "new_line_content": "\tmutex_enter(&buf_pool->mutex);",
          "content_same": false
        },
        {
          "line": 3686,
          "old_api": "buf_block_get_page_zip",
          "new_api": "dict_index_get_lock",
          "old_text": "buf_block_get_page_zip(rec_block)",
          "new_text": "dict_index_get_lock(index)",
          "old_line_content": "\tpage_zip = buf_block_get_page_zip(rec_block);",
          "new_line_content": "\tut_ad(mtr_memo_contains(local_mtr, dict_index_get_lock(index),",
          "content_same": false
        },
        {
          "line": 3688,
          "old_api": "buf_block_get_zip_size",
          "new_api": "mtr_memo_contains",
          "old_text": "buf_block_get_zip_size(rec_block)",
          "new_text": "mtr_memo_contains(local_mtr, rec_block, MTR_MEMO_PAGE_X_FIX)",
          "old_line_content": "\t     == buf_block_get_zip_size(rec_block));",
          "new_line_content": "\tut_ad(mtr_memo_contains(local_mtr, rec_block, MTR_MEMO_PAGE_X_FIX));",
          "content_same": false
        },
        {
          "line": 3690,
          "old_api": "buf_block_get_space",
          "new_api": "dict_index_is_clust",
          "old_text": "buf_block_get_space(rec_block)",
          "new_text": "dict_index_is_clust(index)",
          "old_line_content": "\tspace_id = buf_block_get_space(rec_block);",
          "new_line_content": "\tut_a(dict_index_is_clust(index));",
          "content_same": false
        },
        {
          "line": 3692,
          "old_api": "buf_block_get_page_no",
          "new_api": "buf_block_get_page_zip",
          "old_text": "buf_block_get_page_no(rec_block)",
          "new_text": "buf_block_get_page_zip(rec_block)",
          "old_line_content": "\trec_page_no = buf_block_get_page_no(rec_block);",
          "new_line_content": "\tpage_zip = buf_block_get_page_zip(rec_block);",
          "content_same": false
        },
        {
          "line": 3693,
          "old_api": "page_align",
          "new_api": "dict_table_zip_size",
          "old_text": "page_align(rec)",
          "new_text": "dict_table_zip_size(index->table)",
          "old_line_content": "\tut_a(fil_page_get_type(page_align(rec)) == FIL_PAGE_INDEX);",
          "new_line_content": "\tut_a(dict_table_zip_size(index->table)",
          "content_same": false
        },
        {
          "line": 3758,
          "old_api": "UNIV_LIKELY_NULL",
          "new_api": "btr_page_alloc",
          "old_text": "UNIV_LIKELY_NULL(page_zip)",
          "new_text": "btr_page_alloc(index, hint_page_no,\n\t\t\t\t\t       FSP_NO_DIR, 0, &mtr)",
          "old_line_content": "\t\t\t\tif (UNIV_LIKELY_NULL(page_zip)) {",
          "new_line_content": "\t\t\tblock = btr_page_alloc(index, hint_page_no,",
          "content_same": false
        },
        {
          "line": 3760,
          "old_api": "mem_heap_free",
          "new_api": "UNIV_UNLIKELY",
          "old_text": "mem_heap_free(heap)",
          "new_text": "UNIV_UNLIKELY(block == NULL)",
          "old_line_content": "\t\t\t\t\tmem_heap_free(heap);",
          "new_line_content": "\t\t\tif (UNIV_UNLIKELY(block == NULL)) {",
          "content_same": false
        },
        {
          "line": 3766,
          "old_api": "buf_block_get_page_no",
          "new_api": "mem_heap_free",
          "old_text": "buf_block_get_page_no(block)",
          "new_text": "mem_heap_free(heap)",
          "old_line_content": "\t\t\tpage_no = buf_block_get_page_no(block);",
          "new_line_content": "\t\t\t\t\tmem_heap_free(heap);",
          "content_same": false
        },
        {
          "line": 3773,
          "old_api": "buf_page_get",
          "new_api": "buf_block_get_frame",
          "old_text": "buf_page_get(space_id, zip_size,\n\t\t\t\t\t\t\t  prev_page_no,\n\t\t\t\t\t\t\t  RW_X_LATCH, &mtr)",
          "new_text": "buf_block_get_frame(block)",
          "old_line_content": "\t\t\t\tprev_block = buf_page_get(space_id, zip_size,",
          "new_line_content": "\t\t\tpage = buf_block_get_frame(block);",
          "content_same": false
        },
        {
          "line": 3783,
          "old_api": "mlog_write_ulint",
          "new_api": "buf_block_dbg_add_level",
          "old_text": "mlog_write_ulint(\n\t\t\t\t\t\tprev_page + FIL_PAGE_NEXT,\n\t\t\t\t\t\tpage_no, MLOG_4BYTES, &mtr)",
          "new_text": "buf_block_dbg_add_level(prev_block,\n\t\t\t\t\t\t\tSYNC_EXTERN_STORAGE)",
          "old_line_content": "\t\t\t\t\tmlog_write_ulint(",
          "new_line_content": "\t\t\t\tbuf_block_dbg_add_level(prev_block,",
          "content_same": false
        },
        {
          "line": 3786,
          "old_api": "buf_block_get_page_zip",
          "new_api": "buf_block_get_frame",
          "old_text": "buf_block_get_page_zip(\n\t\t\t\t\t\t       prev_block)",
          "new_text": "buf_block_get_frame(prev_block)",
          "old_line_content": "\t\t\t\t\tmemcpy(buf_block_get_page_zip(",
          "new_line_content": "\t\t\t\tprev_page = buf_block_get_frame(prev_block);",
          "content_same": false
        },
        {
          "line": 3809,
          "old_api": "page_zip_get_size",
          "new_api": "mach_write_to_2",
          "old_text": "page_zip_get_size(page_zip)",
          "new_text": "mach_write_to_2(page + FIL_PAGE_TYPE,\n\t\t\t\t\t\tFIL_PAGE_TYPE_ZBLOB)",
          "old_line_content": "\t\t\t\t\t= page_zip_get_size(page_zip)",
          "new_line_content": "\t\t\t\tmach_write_to_2(page + FIL_PAGE_TYPE,",
          "content_same": false
        },
        {
          "line": 3818,
          "old_api": "mlog_write_ulint",
          "new_api": "deflate",
          "old_text": "mlog_write_ulint(page + FIL_PAGE_NEXT,\n\t\t\t\t\t\t FIL_NULL, MLOG_4BYTES, &mtr)",
          "new_text": "deflate(&c_stream, Z_FINISH)",
          "old_line_content": "\t\t\t\tmlog_write_ulint(page + FIL_PAGE_NEXT,",
          "new_line_content": "\t\t\t\terr = deflate(&c_stream, Z_FINISH);",
          "content_same": false
        },
        {
          "line": 3847,
          "old_api": "page_zip_get_size",
          "new_api": "mlog_write_ulint",
          "old_text": "page_zip_get_size(page_zip)",
          "new_text": "mlog_write_ulint(page\n\t\t\t\t\t\t + FIL_PAGE_FILE_FLUSH_LSN + 4,\n\t\t\t\t\t\t rec_page_no,\n\t\t\t\t\t\t MLOG_4BYTES, &mtr)",
          "old_line_content": "\t\t\t\tmemset(page + page_zip_get_size(page_zip)",
          "new_line_content": "\t\t\t\tmlog_write_ulint(page",
          "content_same": false
        },
        {
          "line": 3857,
          "old_api": "buf_block_get_page_zip",
          "new_api": "page_zip_get_size",
          "old_text": "buf_block_get_page_zip(block)",
          "new_text": "page_zip_get_size(page_zip)",
          "old_line_content": "\t\t\t\tblob_page_zip = buf_block_get_page_zip(block);",
          "new_line_content": "\t\t\t\t\t\tpage_zip_get_size(page_zip)",
          "content_same": false
        },
        {
          "line": 3879,
          "old_api": "mach_write_to_4",
          "new_api": "buf_block_dbg_add_level",
          "old_text": "mach_write_to_4(field_ref\n\t\t\t\t\t\t\t+ BTR_EXTERN_LEN + 4,\n\t\t\t\t\t\t\tc_stream.total_in)",
          "new_text": "buf_block_dbg_add_level(rec_block,\n\t\t\t\t\t\t\tSYNC_NO_ORDER_CHECK)",
          "old_line_content": "\t\t\t\t\tmach_write_to_4(field_ref",
          "new_line_content": "\t\t\t\tbuf_block_dbg_add_level(rec_block,",
          "content_same": false
        },
        {
          "line": 3883,
          "old_api": "memset",
          "new_api": "mach_write_to_4",
          "old_text": "memset(field_ref + BTR_EXTERN_LEN,\n\t\t\t\t\t       0, 8)",
          "new_text": "mach_write_to_4(field_ref\n\t\t\t\t\t\t\t+ BTR_EXTERN_LEN, 0)",
          "old_line_content": "\t\t\t\t\tmemset(field_ref + BTR_EXTERN_LEN,",
          "new_line_content": "\t\t\t\t\tmach_write_to_4(field_ref",
          "content_same": false
        },
        {
          "line": 3916,
          "old_api": "mlog_write_ulint",
          "new_api": "btr_blob_free",
          "old_text": "mlog_write_ulint(page + FIL_PAGE_TYPE,\n\t\t\t\t\t\t FIL_PAGE_TYPE_BLOB,\n\t\t\t\t\t\t MLOG_2BYTES, &mtr)",
          "new_text": "btr_blob_free(block, FALSE, &mtr)",
          "old_line_content": "\t\t\t\tmlog_write_ulint(page + FIL_PAGE_TYPE,",
          "new_line_content": "\t\t\t\tbtr_blob_free(block, FALSE, &mtr);",
          "content_same": false
        },
        {
          "line": 3948,
          "old_api": "buf_page_get",
          "new_api": "mlog_write_ulint",
          "old_text": "buf_page_get(space_id, zip_size,\n\t\t\t\t\t\t\t rec_page_no,\n\t\t\t\t\t\t\t RW_X_LATCH, &mtr)",
          "new_text": "mlog_write_ulint(page + FIL_PAGE_DATA\n\t\t\t\t\t\t + BTR_BLOB_HDR_NEXT_PAGE_NO,\n\t\t\t\t\t\t FIL_NULL, MLOG_4BYTES, &mtr)",
          "old_line_content": "\t\t\t\trec_block = buf_page_get(space_id, zip_size,",
          "new_line_content": "\t\t\t\tmlog_write_ulint(page + FIL_PAGE_DATA",
          "content_same": false
        },
        {
          "line": 3958,
          "old_api": "mlog_write_ulint",
          "new_api": "buf_block_dbg_add_level",
          "old_text": "mlog_write_ulint(field_ref\n\t\t\t\t\t\t + BTR_EXTERN_LEN + 4,\n\t\t\t\t\t\t big_rec_vec->fields[i].len\n\t\t\t\t\t\t - extern_len,\n\t\t\t\t\t\t MLOG_4BYTES, &mtr)",
          "new_text": "buf_block_dbg_add_level(rec_block,\n\t\t\t\t\t\t\tSYNC_NO_ORDER_CHECK)",
          "old_line_content": "\t\t\t\tmlog_write_ulint(field_ref",
          "new_line_content": "\t\t\t\tbuf_block_dbg_add_level(rec_block,",
          "content_same": false
        },
        {
          "line": 4041,
          "old_api": "dict_index_get_lock",
          "new_api": "dict_table_zip_size",
          "old_text": "dict_index_get_lock(index)",
          "new_text": "dict_table_zip_size(index->table)",
          "old_line_content": "\tut_ad(mtr_memo_contains(local_mtr, dict_index_get_lock(index),",
          "new_line_content": "\tulint\t\trec_zip_size = dict_table_zip_size(index->table);",
          "content_same": false
        },
        {
          "line": 4049,
          "old_api": "rec_get_nth_field",
          "new_api": "mtr_memo_contains_page",
          "old_text": "rec_get_nth_field(rec, offsets,\n\t\t\t\t\t\t      i, &local_len)",
          "new_text": "mtr_memo_contains_page(local_mtr, field_ref,\n\t\t\t\t     MTR_MEMO_PAGE_X_FIX)",
          "old_line_content": "\t\tconst byte*\tf = rec_get_nth_field(rec, offsets,",
          "new_line_content": "\tut_ad(mtr_memo_contains_page(local_mtr, field_ref,",
          "content_same": false
        },
        {
          "line": 4051,
          "old_api": "ut_a",
          "new_api": "rec_offs_validate",
          "old_text": "ut_a(local_len >= BTR_EXTERN_FIELD_REF_SIZE)",
          "new_text": "rec_offs_validate(rec, index, offsets)",
          "old_line_content": "\t\tut_a(local_len >= BTR_EXTERN_FIELD_REF_SIZE);",
          "new_line_content": "\tut_ad(!rec || rec_offs_validate(rec, index, offsets));",
          "content_same": false
        },
        {
          "line": 4060,
          "old_api": "dict_index_get_space",
          "new_api": "ut_ad",
          "old_text": "dict_index_get_space(index)",
          "new_text": "ut_ad(f == field_ref)",
          "old_line_content": "\tif (UNIV_UNLIKELY(space_id != dict_index_get_space(index))) {",
          "new_line_content": "\t\tut_ad(f == field_ref);",
          "content_same": false
        },
        {
          "line": 4066,
          "old_api": "page_align",
          "new_api": "dict_index_get_space",
          "old_text": "page_align(field_ref)",
          "new_text": "dict_index_get_space(index)",
          "old_line_content": "\t\tut_ad(!page_get_space_id(page_align(field_ref)));",
          "new_line_content": "\tif (UNIV_UNLIKELY(space_id != dict_index_get_space(index))) {",
          "content_same": false
        },
        {
          "line": 4067,
          "old_api": "ut_ad",
          "new_api": "fil_space_get_zip_size",
          "old_text": "ut_ad(!rec)",
          "new_text": "fil_space_get_zip_size(space_id)",
          "old_line_content": "\t\tut_ad(!rec);",
          "new_line_content": "\t\text_zip_size = fil_space_get_zip_size(space_id);",
          "content_same": false
        },
        {
          "line": 4089,
          "old_api": "page_align",
          "new_api": "mtr_start",
          "old_text": "page_align(field_ref)",
          "new_text": "mtr_start(&mtr)",
          "old_line_content": "\t\t\t\t\t\t page_align(field_ref)),",
          "new_line_content": "\t\tmtr_start(&mtr);",
          "content_same": false
        },
        {
          "line": 4092,
          "old_api": "buf_block_dbg_add_level",
          "new_api": "page_align",
          "old_text": "buf_block_dbg_add_level(rec_block, SYNC_NO_ORDER_CHECK)",
          "new_text": "page_align(field_ref)",
          "old_line_content": "\t\tbuf_block_dbg_add_level(rec_block, SYNC_NO_ORDER_CHECK);",
          "new_line_content": "\t\t\t\t\t\t page_align(field_ref)),",
          "content_same": false
        },
        {
          "line": 4094,
          "old_api": "mach_read_from_4",
          "new_api": "page_get_page_no",
          "old_text": "mach_read_from_4(field_ref + BTR_EXTERN_PAGE_NO)",
          "new_text": "page_get_page_no(\n\t\t\t\t\t\t page_align(field_ref))",
          "old_line_content": "\t\tpage_no = mach_read_from_4(field_ref + BTR_EXTERN_PAGE_NO);",
          "new_line_content": "\t\t\t\t\t page_get_page_no(",
          "content_same": false
        },
        {
          "line": 4123,
          "old_api": "mach_read_from_4",
          "new_api": "buf_block_get_frame",
          "old_text": "mach_read_from_4(page + FIL_PAGE_NEXT)",
          "new_text": "buf_block_get_frame(ext_block)",
          "old_line_content": "\t\t\tnext_page_no = mach_read_from_4(page + FIL_PAGE_NEXT);",
          "new_line_content": "\t\tpage = buf_block_get_frame(ext_block);",
          "content_same": false
        },
        {
          "line": 4128,
          "old_api": "mach_write_to_4",
          "new_api": "fil_page_get_type",
          "old_text": "mach_write_to_4(field_ref + BTR_EXTERN_PAGE_NO,\n\t\t\t\t\t\tnext_page_no)",
          "new_text": "fil_page_get_type(page)",
          "old_line_content": "\t\t\t\tmach_write_to_4(field_ref + BTR_EXTERN_PAGE_NO,",
          "new_line_content": "\t\t\tut_a(fil_page_get_type(page) == FIL_PAGE_TYPE_ZBLOB);",
          "content_same": false
        },
        {
          "line": 4150,
          "old_api": "ut_a",
          "new_api": "mach_read_from_4",
          "old_text": "ut_a(!page_zip)",
          "new_text": "mach_read_from_4(\n\t\t\t\tfield_ref + BTR_EXTERN_LEN + 4)",
          "old_line_content": "\t\t\tut_a(!page_zip);",
          "new_line_content": "\t\t\tulint\textern_len\t= mach_read_from_4(",
          "content_same": false
        },
        {
          "line": 4219,
          "old_api": "rec_get_nth_field",
          "new_api": "rec_offs_n_fields",
          "old_text": "rec_get_nth_field(rec, offsets, i, &len)",
          "new_text": "rec_offs_n_fields(offsets)",
          "old_line_content": "\t\t\t\t= rec_get_nth_field(rec, offsets, i, &len);",
          "new_line_content": "\tn_fields = rec_offs_n_fields(offsets);",
          "content_same": false
        },
        {
          "line": 4222,
          "old_api": "btr_free_externally_stored_field",
          "new_api": "rec_offs_nth_extern",
          "old_text": "btr_free_externally_stored_field(\n\t\t\t\tindex, data + len - BTR_EXTERN_FIELD_REF_SIZE,\n\t\t\t\trec, offsets, page_zip, i,\n\t\t\t\tdo_not_free_inherited, mtr)",
          "new_text": "rec_offs_nth_extern(offsets, i)",
          "old_line_content": "\t\t\tbtr_free_externally_stored_field(",
          "new_line_content": "\t\tif (rec_offs_nth_extern(offsets, i)) {",
          "content_same": false
        },
        {
          "line": 4264,
          "old_api": "ut_a",
          "new_api": "upd_get_nth_field",
          "old_text": "ut_a(len >= BTR_EXTERN_FIELD_REF_SIZE)",
          "new_text": "upd_get_nth_field(update, i)",
          "old_line_content": "\t\t\tut_a(len >= BTR_EXTERN_FIELD_REF_SIZE);",
          "new_line_content": "\t\tconst upd_field_t* ufield = upd_get_nth_field(update, i);",
          "content_same": false
        },
        {
          "line": 4266,
          "old_api": "btr_free_externally_stored_field",
          "new_api": "rec_offs_nth_extern",
          "old_text": "btr_free_externally_stored_field(\n\t\t\t\tindex, data + len - BTR_EXTERN_FIELD_REF_SIZE,\n\t\t\t\trec, offsets, page_zip,\n\t\t\t\tufield->field_no, TRUE, mtr)",
          "new_text": "rec_offs_nth_extern(offsets, ufield->field_no)",
          "old_line_content": "\t\t\tbtr_free_externally_stored_field(",
          "new_line_content": "\t\tif (rec_offs_nth_extern(offsets, ufield->field_no)) {",
          "content_same": false
        },
        {
          "line": 4304,
          "old_api": "buf_block_get_frame",
          "new_api": "mtr_start",
          "old_text": "buf_block_get_frame(block)",
          "new_text": "mtr_start(&mtr)",
          "old_line_content": "\t\tpage = buf_block_get_frame(block);",
          "new_line_content": "\t\tmtr_start(&mtr);",
          "content_same": false
        },
        {
          "line": 4310,
          "old_api": "btr_blob_get_part_len",
          "new_api": "buf_block_get_frame",
          "old_text": "btr_blob_get_part_len(blob_header)",
          "new_text": "buf_block_get_frame(block)",
          "old_line_content": "\t\tpart_len = btr_blob_get_part_len(blob_header);",
          "new_line_content": "\t\tpage = buf_block_get_frame(block);",
          "content_same": false
        },
        {
          "line": 4317,
          "old_api": "btr_blob_get_next_page_no",
          "new_api": "ut_min",
          "old_text": "btr_blob_get_next_page_no(blob_header)",
          "new_text": "ut_min(part_len, len - copied_len)",
          "old_line_content": "\t\tpage_no = btr_blob_get_next_page_no(blob_header);",
          "new_line_content": "\t\tcopy_len = ut_min(part_len, len - copied_len);",
          "content_same": false
        },
        {
          "line": 4319,
          "old_api": "mtr_commit",
          "new_api": "memcpy",
          "old_text": "mtr_commit(&mtr)",
          "new_text": "memcpy(buf + copied_len,\n\t\t       blob_header + BTR_BLOB_HDR_SIZE, copy_len)",
          "old_line_content": "\t\tmtr_commit(&mtr);",
          "new_line_content": "\t\tmemcpy(buf + copied_len,",
          "content_same": false
        },
        {
          "line": 4491,
          "old_api": "btr_copy_zblob_prefix",
          "new_api": "ut_a",
          "old_text": "btr_copy_zblob_prefix(&d_stream, zip_size,\n\t\t\t\t      space_id, page_no, offset)",
          "new_text": "ut_a(err == Z_OK)",
          "old_line_content": "\t\tbtr_copy_zblob_prefix(&d_stream, zip_size,",
          "new_line_content": "\t\tut_a(err == Z_OK);",
          "content_same": false
        },
        {
          "line": 4497,
          "old_api": "btr_copy_blob_prefix",
          "new_api": "btr_copy_zblob_prefix",
          "old_text": "btr_copy_blob_prefix(buf, len, space_id,\n\t\t\t\t\t    page_no, offset)",
          "new_text": "btr_copy_zblob_prefix(&d_stream, zip_size,\n\t\t\t\t      space_id, page_no, offset)",
          "old_line_content": "\t\treturn(btr_copy_blob_prefix(buf, len, space_id,",
          "new_line_content": "\t\tbtr_copy_zblob_prefix(&d_stream, zip_size,",
          "content_same": false
        },
        {
          "line": 4543,
          "old_api": "mach_read_from_4",
          "new_api": "memcmp",
          "old_text": "mach_read_from_4(data + BTR_EXTERN_OFFSET)",
          "new_text": "memcmp(data, field_ref_zero, BTR_EXTERN_FIELD_REF_SIZE)",
          "old_line_content": "\toffset = mach_read_from_4(data + BTR_EXTERN_OFFSET);",
          "new_line_content": "\tut_a(memcmp(data, field_ref_zero, BTR_EXTERN_FIELD_REF_SIZE));",
          "content_same": false
        },
        {
          "line": 4584,
          "old_api": "mach_read_from_4",
          "new_api": "ut_a",
          "old_text": "mach_read_from_4(data + local_len + BTR_EXTERN_PAGE_NO)",
          "new_text": "ut_a(local_len >= BTR_EXTERN_FIELD_REF_SIZE)",
          "old_line_content": "\tpage_no = mach_read_from_4(data + local_len + BTR_EXTERN_PAGE_NO);",
          "new_line_content": "\tut_a(local_len >= BTR_EXTERN_FIELD_REF_SIZE);",
          "content_same": false
        },
        {
          "line": 4597,
          "old_api": "btr_copy_externally_stored_field_prefix_low",
          "new_api": "mach_read_from_4",
          "old_text": "btr_copy_externally_stored_field_prefix_low(buf + local_len,\n\t\t\t\t\t\t\t      extern_len,\n\t\t\t\t\t\t\t      zip_size,\n\t\t\t\t\t\t\t      space_id,\n\t\t\t\t\t\t\t      page_no, offset)",
          "new_text": "mach_read_from_4(data + local_len + BTR_EXTERN_LEN + 4)",
          "old_line_content": "\t\t+ btr_copy_externally_stored_field_prefix_low(buf + local_len,",
          "new_line_content": "\textern_len = mach_read_from_4(data + local_len + BTR_EXTERN_LEN + 4);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 4098,
          "old_api": null,
          "new_api": "buf_block_dbg_add_level",
          "old_text": null,
          "new_text": "buf_block_dbg_add_level(rec_block, SYNC_NO_ORDER_CHECK)",
          "old_line_content": "\t\t    /* This field does not own the externally stored field */",
          "new_line_content": "\t\tbuf_block_dbg_add_level(rec_block, SYNC_NO_ORDER_CHECK);",
          "content_same": false
        },
        {
          "line": 4100,
          "old_api": null,
          "new_api": "mach_read_from_4",
          "old_text": null,
          "new_text": "mach_read_from_4(field_ref + BTR_EXTERN_PAGE_NO)",
          "old_line_content": "\t\t\t& BTR_EXTERN_OWNER_FLAG)",
          "new_line_content": "\t\tpage_no = mach_read_from_4(field_ref + BTR_EXTERN_PAGE_NO);",
          "content_same": false
        },
        {
          "line": 3588,
          "old_api": null,
          "new_api": "mach_read_from_4",
          "old_text": null,
          "new_text": "mach_read_from_4(blob_header + BTR_BLOB_HDR_PART_LEN)",
          "old_line_content": "ulint",
          "new_line_content": "\treturn(mach_read_from_4(blob_header + BTR_BLOB_HDR_PART_LEN));",
          "content_same": false
        },
        {
          "line": 4105,
          "old_api": null,
          "new_api": "mach_read_from_1",
          "old_text": null,
          "new_text": "mach_read_from_1(field_ref + BTR_EXTERN_LEN)",
          "old_line_content": "",
          "new_line_content": "\t\t    || (mach_read_from_1(field_ref + BTR_EXTERN_LEN)",
          "content_same": false
        },
        {
          "line": 4109,
          "old_api": null,
          "new_api": "mach_read_from_1",
          "old_text": null,
          "new_text": "mach_read_from_1(field_ref + BTR_EXTERN_LEN)",
          "old_line_content": "\t\t\treturn;",
          "new_line_content": "\t\t\t&& (mach_read_from_1(field_ref + BTR_EXTERN_LEN)",
          "content_same": false
        },
        {
          "line": 4113,
          "old_api": null,
          "new_api": "mtr_commit",
          "old_text": null,
          "new_text": "mtr_commit(&mtr)",
          "old_line_content": "\t\t\t\t\t RW_X_LATCH, &mtr);",
          "new_line_content": "\t\t\tmtr_commit(&mtr);",
          "content_same": false
        },
        {
          "line": 3601,
          "old_api": null,
          "new_api": "mach_read_from_4",
          "old_text": null,
          "new_text": "mach_read_from_4(blob_header + BTR_BLOB_HDR_NEXT_PAGE_NO)",
          "old_line_content": "void",
          "new_line_content": "\treturn(mach_read_from_4(blob_header + BTR_BLOB_HDR_NEXT_PAGE_NO));",
          "content_same": false
        },
        {
          "line": 4118,
          "old_api": null,
          "new_api": "buf_page_get",
          "old_text": null,
          "new_text": "buf_page_get(space_id, ext_zip_size, page_no,\n\t\t\t\t\t RW_X_LATCH, &mtr)",
          "old_line_content": "",
          "new_line_content": "\t\text_block = buf_page_get(space_id, ext_zip_size, page_no,",
          "content_same": false
        },
        {
          "line": 4630,
          "old_api": null,
          "new_api": "rec_offs_nth_extern",
          "old_text": null,
          "new_text": "rec_offs_nth_extern(offsets, no)",
          "old_line_content": "\tthe data stored locally. We may need to store some data",
          "new_line_content": "\tut_a(rec_offs_nth_extern(offsets, no));",
          "content_same": false
        },
        {
          "line": 4121,
          "old_api": null,
          "new_api": "buf_block_dbg_add_level",
          "old_text": null,
          "new_text": "buf_block_dbg_add_level(ext_block, SYNC_EXTERN_STORAGE)",
          "old_line_content": "\t\t\tin row_purge_upd_exist_or_extern(). */",
          "new_line_content": "\t\tbuf_block_dbg_add_level(ext_block, SYNC_EXTERN_STORAGE);",
          "content_same": false
        },
        {
          "line": 3615,
          "old_api": null,
          "new_api": "buf_block_get_space",
          "old_text": null,
          "new_text": "buf_block_get_space(block)",
          "old_line_content": "",
          "new_line_content": "\tulint\tspace\t= buf_block_get_space(block);",
          "content_same": false
        },
        {
          "line": 4129,
          "old_api": null,
          "new_api": "mach_read_from_4",
          "old_text": null,
          "new_text": "mach_read_from_4(page + FIL_PAGE_NEXT)",
          "old_line_content": "\t\t\t\t\t\tnext_page_no);",
          "new_line_content": "\t\t\tnext_page_no = mach_read_from_4(page + FIL_PAGE_NEXT);",
          "content_same": false
        },
        {
          "line": 4641,
          "old_api": null,
          "new_api": "rec_get_nth_field",
          "old_text": null,
          "new_text": "rec_get_nth_field(rec, offsets, no, &local_len)",
          "old_line_content": "",
          "new_line_content": "\tdata = rec_get_nth_field(rec, offsets, no, &local_len);",
          "content_same": false
        },
        {
          "line": 4131,
          "old_api": null,
          "new_api": "btr_page_free_low",
          "old_text": null,
          "new_text": "btr_page_free_low(index, ext_block, 0, &mtr)",
          "old_line_content": "\t\t\t\t\t\t0);",
          "new_line_content": "\t\t\tbtr_page_free_low(index, ext_block, 0, &mtr);",
          "content_same": false
        },
        {
          "line": 4643,
          "old_api": null,
          "new_api": "btr_copy_externally_stored_field",
          "old_text": null,
          "new_text": "btr_copy_externally_stored_field(len, data,\n\t\t\t\t\t\tzip_size, local_len, heap)",
          "old_line_content": "",
          "new_line_content": "\treturn(btr_copy_externally_stored_field(len, data,",
          "content_same": false
        },
        {
          "line": 4133,
          "old_api": null,
          "new_api": "UNIV_LIKELY",
          "old_text": null,
          "new_text": "UNIV_LIKELY(page_zip != NULL)",
          "old_line_content": "\t\t\t\t\t\t\toffsets, i, &mtr);",
          "new_line_content": "\t\t\tif (UNIV_LIKELY(page_zip != NULL)) {",
          "content_same": false
        },
        {
          "line": 4134,
          "old_api": null,
          "new_api": "mach_write_to_4",
          "old_text": null,
          "new_text": "mach_write_to_4(field_ref + BTR_EXTERN_PAGE_NO,\n\t\t\t\t\t\tnext_page_no)",
          "old_line_content": "\t\t\t} else {",
          "new_line_content": "\t\t\t\tmach_write_to_4(field_ref + BTR_EXTERN_PAGE_NO,",
          "content_same": false
        },
        {
          "line": 3618,
          "old_api": null,
          "new_api": "mtr_memo_contains",
          "old_text": null,
          "new_text": "mtr_memo_contains(mtr, block, MTR_MEMO_PAGE_X_FIX)",
          "old_line_content": "",
          "new_line_content": "\tut_ad(mtr_memo_contains(mtr, block, MTR_MEMO_PAGE_X_FIX));",
          "content_same": false
        },
        {
          "line": 4136,
          "old_api": null,
          "new_api": "mach_write_to_4",
          "old_text": null,
          "new_text": "mach_write_to_4(field_ref + BTR_EXTERN_LEN + 4,\n\t\t\t\t\t\t0)",
          "old_line_content": "\t\t\t\t\t\t + BTR_EXTERN_PAGE_NO,",
          "new_line_content": "\t\t\t\tmach_write_to_4(field_ref + BTR_EXTERN_LEN + 4,",
          "content_same": false
        },
        {
          "line": 3620,
          "old_api": null,
          "new_api": "mtr_commit",
          "old_text": null,
          "new_text": "mtr_commit(mtr)",
          "old_line_content": "\tthe same file page. */",
          "new_line_content": "\tmtr_commit(mtr);",
          "content_same": false
        },
        {
          "line": 4138,
          "old_api": null,
          "new_api": "page_zip_write_blob_ptr",
          "old_text": null,
          "new_text": "page_zip_write_blob_ptr(page_zip, rec, index,\n\t\t\t\t\t\t\toffsets, i, &mtr)",
          "old_line_content": "\t\t\t\t\t\t MLOG_4BYTES, &mtr);",
          "new_line_content": "\t\t\t\tpage_zip_write_blob_ptr(page_zip, rec, index,",
          "content_same": false
        },
        {
          "line": 3623,
          "old_api": null,
          "new_api": "mutex_enter",
          "old_text": null,
          "new_text": "mutex_enter(&block->mutex)",
          "old_line_content": "\t    == BUF_BLOCK_FILE_PAGE",
          "new_line_content": "\tmutex_enter(&block->mutex);",
          "content_same": false
        },
        {
          "line": 3628,
          "old_api": null,
          "new_api": "buf_block_get_state",
          "old_text": null,
          "new_text": "buf_block_get_state(block)",
          "old_line_content": "\t\t    && all && block->page.zip.data) {",
          "new_line_content": "\tif (buf_block_get_state(block)",
          "content_same": false
        },
        {
          "line": 4141,
          "old_api": null,
          "new_api": "mlog_write_ulint",
          "old_text": null,
          "new_text": "mlog_write_ulint(field_ref\n\t\t\t\t\t\t + BTR_EXTERN_PAGE_NO,\n\t\t\t\t\t\t next_page_no,\n\t\t\t\t\t\t MLOG_4BYTES, &mtr)",
          "old_line_content": "\t\t\t\t\t\t MLOG_4BYTES, &mtr);",
          "new_line_content": "\t\t\t\tmlog_write_ulint(field_ref",
          "content_same": false
        },
        {
          "line": 3630,
          "old_api": null,
          "new_api": "buf_block_get_space",
          "old_text": null,
          "new_text": "buf_block_get_space(block)",
          "old_line_content": "\t\t\tif the whole block cannot be deallocted. */",
          "new_line_content": "\t    && buf_block_get_space(block) == space",
          "content_same": false
        },
        {
          "line": 3631,
          "old_api": null,
          "new_api": "buf_block_get_page_no",
          "old_text": null,
          "new_text": "buf_block_get_page_no(block)",
          "old_line_content": "",
          "new_line_content": "\t    && buf_block_get_page_no(block) == page_no) {",
          "content_same": false
        },
        {
          "line": 4145,
          "old_api": null,
          "new_api": "mlog_write_ulint",
          "old_text": null,
          "new_text": "mlog_write_ulint(field_ref\n\t\t\t\t\t\t + BTR_EXTERN_LEN + 4, 0,\n\t\t\t\t\t\t MLOG_4BYTES, &mtr)",
          "old_line_content": "\t\t\t\tfield_ref + BTR_EXTERN_LEN + 4);",
          "new_line_content": "\t\t\t\tmlog_write_ulint(field_ref",
          "content_same": false
        },
        {
          "line": 3633,
          "old_api": null,
          "new_api": "buf_LRU_free_block",
          "old_text": null,
          "new_text": "buf_LRU_free_block(&block->page, all, NULL)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tif (!buf_LRU_free_block(&block->page, all, NULL)",
          "content_same": false
        },
        {
          "line": 3638,
          "old_api": null,
          "new_api": "buf_LRU_free_block",
          "old_text": null,
          "new_text": "buf_LRU_free_block(&block->page, FALSE, NULL)",
          "old_line_content": "}",
          "new_line_content": "\t\t\tbuf_LRU_free_block(&block->page, FALSE, NULL);",
          "content_same": false
        },
        {
          "line": 4152,
          "old_api": null,
          "new_api": "btr_blob_get_part_len",
          "old_text": null,
          "new_text": "btr_blob_get_part_len(\n\t\t\t\tpage + FIL_PAGE_DATA)",
          "old_line_content": "",
          "new_line_content": "\t\t\tulint\tpart_len\t= btr_blob_get_part_len(",
          "content_same": false
        },
        {
          "line": 3642,
          "old_api": null,
          "new_api": "mutex_exit",
          "old_text": null,
          "new_text": "mutex_exit(&buf_pool->mutex)",
          "old_line_content": "them in rec.  The extern flags in rec will have to be set beforehand.",
          "new_line_content": "\tmutex_exit(&buf_pool->mutex);",
          "content_same": false
        },
        {
          "line": 4155,
          "old_api": null,
          "new_api": "fil_page_get_type",
          "old_text": null,
          "new_text": "fil_page_get_type(page)",
          "old_line_content": "\t\t\t\t+ BTR_BLOB_HDR_NEXT_PAGE_NO);",
          "new_line_content": "\t\t\tut_a(fil_page_get_type(page) == FIL_PAGE_TYPE_BLOB);",
          "content_same": false
        },
        {
          "line": 4156,
          "old_api": null,
          "new_api": "ut_a",
          "old_text": null,
          "new_text": "ut_a(!page_zip)",
          "old_line_content": "",
          "new_line_content": "\t\t\tut_a(!page_zip);",
          "content_same": false
        },
        {
          "line": 4157,
          "old_api": null,
          "new_api": "ut_a",
          "old_text": null,
          "new_text": "ut_a(extern_len >= part_len)",
          "old_line_content": "\t\t\t/* We must supply the page level (= 0) as an argument",
          "new_line_content": "\t\t\tut_a(extern_len >= part_len);",
          "content_same": false
        },
        {
          "line": 3643,
          "old_api": null,
          "new_api": "mutex_exit",
          "old_text": null,
          "new_text": "mutex_exit(&block->mutex)",
          "old_line_content": "The fields are stored on pages allocated from leaf node",
          "new_line_content": "\tmutex_exit(&block->mutex);",
          "content_same": false
        },
        {
          "line": 4159,
          "old_api": null,
          "new_api": "mach_read_from_4",
          "old_text": null,
          "new_text": "mach_read_from_4(\n\t\t\t\tpage + FIL_PAGE_DATA\n\t\t\t\t+ BTR_BLOB_HDR_NEXT_PAGE_NO)",
          "old_line_content": "\t\t\tspace overhead from an index page header. */",
          "new_line_content": "\t\t\tnext_page_no = mach_read_from_4(",
          "content_same": false
        },
        {
          "line": 4167,
          "old_api": null,
          "new_api": "page_get_space_id",
          "old_text": null,
          "new_text": "page_get_space_id(page)",
          "old_line_content": "\t\t\t\t\t next_page_no,",
          "new_line_content": "\t\t\tut_a(space_id == page_get_space_id(page));",
          "content_same": false
        },
        {
          "line": 4168,
          "old_api": null,
          "new_api": "page_get_page_no",
          "old_text": null,
          "new_text": "page_get_page_no(page)",
          "old_line_content": "\t\t\t\t\t MLOG_4BYTES, &mtr);",
          "new_line_content": "\t\t\tut_a(page_no == page_get_page_no(page));",
          "content_same": false
        },
        {
          "line": 4170,
          "old_api": null,
          "new_api": "btr_page_free_low",
          "old_text": null,
          "new_text": "btr_page_free_low(index, ext_block, 0, &mtr)",
          "old_line_content": "\t\t\t\t\t extern_len - part_len,",
          "new_line_content": "\t\t\tbtr_page_free_low(index, ext_block, 0, &mtr);",
          "content_same": false
        },
        {
          "line": 4172,
          "old_api": null,
          "new_api": "mlog_write_ulint",
          "old_text": null,
          "new_text": "mlog_write_ulint(field_ref + BTR_EXTERN_PAGE_NO,\n\t\t\t\t\t next_page_no,\n\t\t\t\t\t MLOG_4BYTES, &mtr)",
          "old_line_content": "\t\t\tif (next_page_no == FIL_NULL) {",
          "new_line_content": "\t\t\tmlog_write_ulint(field_ref + BTR_EXTERN_PAGE_NO,",
          "content_same": false
        },
        {
          "line": 4175,
          "old_api": null,
          "new_api": "mlog_write_ulint",
          "old_text": null,
          "new_text": "mlog_write_ulint(field_ref + BTR_EXTERN_LEN + 4,\n\t\t\t\t\t extern_len - part_len,\n\t\t\t\t\t MLOG_4BYTES, &mtr)",
          "old_line_content": "",
          "new_line_content": "\t\t\tmlog_write_ulint(field_ref + BTR_EXTERN_LEN + 4,",
          "content_same": false
        },
        {
          "line": 4179,
          "old_api": null,
          "new_api": "ut_a",
          "old_text": null,
          "new_text": "ut_a(extern_len - part_len == 0)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\tut_a(extern_len - part_len == 0);",
          "content_same": false
        },
        {
          "line": 4183,
          "old_api": null,
          "new_api": "ut_a",
          "old_text": null,
          "new_text": "ut_a(next_page_no == FIL_NULL)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\t\tut_a(next_page_no == FIL_NULL);",
          "content_same": false
        },
        {
          "line": 4188,
          "old_api": null,
          "new_api": "btr_blob_free",
          "old_text": null,
          "new_text": "btr_blob_free(ext_block, TRUE, &mtr)",
          "old_line_content": "static",
          "new_line_content": "\t\tbtr_blob_free(ext_block, TRUE, &mtr);",
          "content_same": false
        },
        {
          "line": 3685,
          "old_api": null,
          "new_api": "rec_offs_validate",
          "old_text": null,
          "new_text": "rec_offs_validate(rec, index, offsets)",
          "old_line_content": "",
          "new_line_content": "\tut_ad(rec_offs_validate(rec, index, offsets));",
          "content_same": false
        },
        {
          "line": 4091,
          "old_api": null,
          "new_api": "page_get_space_id",
          "old_text": null,
          "new_text": "page_get_space_id(\n\t\t\t\t\t\t page_align(field_ref))",
          "old_line_content": "#ifdef UNIV_SYNC_DEBUG",
          "new_line_content": "\t\trec_block = buf_page_get(page_get_space_id(",
          "content_same": false
        },
        {
          "line": 3689,
          "old_api": null,
          "new_api": "page_align",
          "old_text": null,
          "new_text": "page_align(rec)",
          "old_line_content": "",
          "new_line_content": "\tut_ad(buf_block_get_frame(rec_block) == page_align(rec));",
          "content_same": false
        },
        {
          "line": 3694,
          "old_api": null,
          "new_api": "buf_block_get_zip_size",
          "old_text": null,
          "new_text": "buf_block_get_zip_size(rec_block)",
          "old_line_content": "",
          "new_line_content": "\t     == buf_block_get_zip_size(rec_block));",
          "content_same": false
        },
        {
          "line": 3696,
          "old_api": null,
          "new_api": "buf_block_get_space",
          "old_text": null,
          "new_text": "buf_block_get_space(rec_block)",
          "old_line_content": "\t\tint\terr;",
          "new_line_content": "\tspace_id = buf_block_get_space(rec_block);",
          "content_same": false
        },
        {
          "line": 3697,
          "old_api": null,
          "new_api": "buf_block_get_zip_size",
          "old_text": null,
          "new_text": "buf_block_get_zip_size(rec_block)",
          "old_line_content": "",
          "new_line_content": "\tzip_size = buf_block_get_zip_size(rec_block);",
          "content_same": false
        },
        {
          "line": 3698,
          "old_api": null,
          "new_api": "buf_block_get_page_no",
          "old_text": null,
          "new_text": "buf_block_get_page_no(rec_block)",
          "old_line_content": "\t\t/* Zlib deflate needs 128 kilobytes for the default",
          "new_line_content": "\trec_page_no = buf_block_get_page_no(rec_block);",
          "content_same": false
        },
        {
          "line": 3699,
          "old_api": null,
          "new_api": "page_align",
          "old_text": null,
          "new_text": "page_align(rec)",
          "old_line_content": "\t\twindow size, plus 512 << memLevel, plus a few",
          "new_line_content": "\tut_a(fil_page_get_type(page_align(rec)) == FIL_PAGE_INDEX);",
          "content_same": false
        },
        {
          "line": 3701,
          "old_api": null,
          "new_api": "UNIV_LIKELY_NULL",
          "old_text": null,
          "new_text": "UNIV_LIKELY_NULL(page_zip)",
          "old_line_content": "\t\tto limit the memory consumption, and preallocate the",
          "new_line_content": "\tif (UNIV_LIKELY_NULL(page_zip)) {",
          "content_same": false
        },
        {
          "line": 4214,
          "old_api": null,
          "new_api": "rec_offs_validate",
          "old_text": null,
          "new_text": "rec_offs_validate(rec, index, offsets)",
          "old_line_content": "",
          "new_line_content": "\tut_ad(rec_offs_validate(rec, index, offsets));",
          "content_same": false
        },
        {
          "line": 4215,
          "old_api": null,
          "new_api": "mtr_memo_contains_page",
          "old_text": null,
          "new_text": "mtr_memo_contains_page(mtr, rec, MTR_MEMO_PAGE_X_FIX)",
          "old_line_content": "\tfor (i = 0; i < n_fields; i++) {",
          "new_line_content": "\tut_ad(mtr_memo_contains_page(mtr, rec, MTR_MEMO_PAGE_X_FIX));",
          "content_same": false
        },
        {
          "line": 4218,
          "old_api": null,
          "new_api": "rec_offs_comp",
          "old_text": null,
          "new_text": "rec_offs_comp(offsets)",
          "old_line_content": "\t\t\tbyte*\tdata",
          "new_line_content": "\tut_ad(dict_table_is_comp(index->table) == !!rec_offs_comp(offsets));",
          "content_same": false
        },
        {
          "line": 3709,
          "old_api": null,
          "new_api": "mem_heap_create",
          "old_text": null,
          "new_text": "mem_heap_create(250000)",
          "old_line_content": "\t}",
          "new_line_content": "\t\theap = mem_heap_create(250000);",
          "content_same": false
        },
        {
          "line": 3710,
          "old_api": null,
          "new_api": "page_zip_set_alloc",
          "old_text": null,
          "new_text": "page_zip_set_alloc(&c_stream, heap)",
          "old_line_content": "",
          "new_line_content": "\t\tpage_zip_set_alloc(&c_stream, heap);",
          "content_same": false
        },
        {
          "line": 3712,
          "old_api": null,
          "new_api": "deflateInit2",
          "old_text": null,
          "new_text": "deflateInit2(&c_stream, Z_DEFAULT_COMPRESSION,\n\t\t\t\t   Z_DEFLATED, 15, 7, Z_DEFAULT_STRATEGY)",
          "old_line_content": "\tfor each field and put the pointer to the field in rec */",
          "new_line_content": "\t\terr = deflateInit2(&c_stream, Z_DEFAULT_COMPRESSION,",
          "content_same": false
        },
        {
          "line": 4225,
          "old_api": null,
          "new_api": "rec_get_nth_field",
          "old_text": null,
          "new_text": "rec_get_nth_field(rec, offsets, i, &len)",
          "old_line_content": "\t\t\t\tdo_not_free_inherited, mtr);",
          "new_line_content": "\t\t\t\t= rec_get_nth_field(rec, offsets, i, &len);",
          "content_same": false
        },
        {
          "line": 4226,
          "old_api": null,
          "new_api": "ut_a",
          "old_text": null,
          "new_text": "ut_a(len >= BTR_EXTERN_FIELD_REF_SIZE)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tut_a(len >= BTR_EXTERN_FIELD_REF_SIZE);",
          "content_same": false
        },
        {
          "line": 3714,
          "old_api": null,
          "new_api": "ut_a",
          "old_text": null,
          "new_text": "ut_a(err == Z_OK)",
          "old_line_content": "\tfor (i = 0; i < big_rec_vec->n_fields; i++) {",
          "new_line_content": "\t\tut_a(err == Z_OK);",
          "content_same": false
        },
        {
          "line": 4228,
          "old_api": null,
          "new_api": "btr_free_externally_stored_field",
          "old_text": null,
          "new_text": "btr_free_externally_stored_field(\n\t\t\t\tindex, data + len - BTR_EXTERN_FIELD_REF_SIZE,\n\t\t\t\trec, offsets, page_zip, i,\n\t\t\t\tdo_not_free_inherited, mtr)",
          "old_line_content": "}",
          "new_line_content": "\t\t\tbtr_free_externally_stored_field(",
          "content_same": false
        },
        {
          "line": 3721,
          "old_api": null,
          "new_api": "rec_offs_nth_extern",
          "old_text": null,
          "new_text": "rec_offs_nth_extern(offsets,\n\t\t\t\t\t  big_rec_vec->fields[i].field_no)",
          "old_line_content": "\t\t\t\t&local_len);",
          "new_line_content": "\t\tut_ad(rec_offs_nth_extern(offsets,",
          "content_same": false
        },
        {
          "line": 3725,
          "old_api": null,
          "new_api": "rec_get_nth_field",
          "old_text": null,
          "new_text": "rec_get_nth_field(\n\t\t\t\trec, offsets, big_rec_vec->fields[i].field_no,\n\t\t\t\t&local_len)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tfield_ref = rec_get_nth_field(",
          "content_same": false
        },
        {
          "line": 3738,
          "old_api": null,
          "new_api": "UNIV_LIKELY_NULL",
          "old_text": null,
          "new_text": "UNIV_LIKELY_NULL(page_zip)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tif (UNIV_LIKELY_NULL(page_zip)) {",
          "content_same": false
        },
        {
          "line": 3739,
          "old_api": null,
          "new_api": "deflateReset",
          "old_text": null,
          "new_text": "deflateReset(&c_stream)",
          "old_line_content": "",
          "new_line_content": "\t\t\tint\terr = deflateReset(&c_stream);",
          "content_same": false
        },
        {
          "line": 3740,
          "old_api": null,
          "new_api": "ut_a",
          "old_text": null,
          "new_text": "ut_a(err == Z_OK)",
          "old_line_content": "\t\tfor (;;) {",
          "new_line_content": "\t\t\tut_a(err == Z_OK);",
          "content_same": false
        },
        {
          "line": 4256,
          "old_api": null,
          "new_api": "rec_offs_validate",
          "old_text": null,
          "new_text": "rec_offs_validate(rec, index, offsets)",
          "old_line_content": "",
          "new_line_content": "\tut_ad(rec_offs_validate(rec, index, offsets));",
          "content_same": false
        },
        {
          "line": 4257,
          "old_api": null,
          "new_api": "mtr_memo_contains_page",
          "old_text": null,
          "new_text": "mtr_memo_contains_page(mtr, rec, MTR_MEMO_PAGE_X_FIX)",
          "old_line_content": "\tfor (i = 0; i < n_fields; i++) {",
          "new_line_content": "\tut_ad(mtr_memo_contains_page(mtr, rec, MTR_MEMO_PAGE_X_FIX));",
          "content_same": false
        },
        {
          "line": 4261,
          "old_api": null,
          "new_api": "upd_get_n_fields",
          "old_text": null,
          "new_text": "upd_get_n_fields(update)",
          "old_line_content": "\t\t\tulint\tlen;",
          "new_line_content": "\tn_fields = upd_get_n_fields(update);",
          "content_same": false
        },
        {
          "line": 3750,
          "old_api": null,
          "new_api": "mtr_start",
          "old_text": null,
          "new_text": "mtr_start(&mtr)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\tmtr_start(&mtr);",
          "content_same": false
        },
        {
          "line": 4268,
          "old_api": null,
          "new_api": "rec_get_nth_field",
          "old_text": null,
          "new_text": "rec_get_nth_field(\n\t\t\t\trec, offsets, ufield->field_no, &len)",
          "old_line_content": "\t\t\t\trec, offsets, page_zip,",
          "new_line_content": "\t\t\tbyte*\tdata = rec_get_nth_field(",
          "content_same": false
        },
        {
          "line": 4270,
          "old_api": null,
          "new_api": "ut_a",
          "old_text": null,
          "new_text": "ut_a(len >= BTR_EXTERN_FIELD_REF_SIZE)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tut_a(len >= BTR_EXTERN_FIELD_REF_SIZE);",
          "content_same": false
        },
        {
          "line": 4272,
          "old_api": null,
          "new_api": "btr_free_externally_stored_field",
          "old_text": null,
          "new_text": "btr_free_externally_stored_field(\n\t\t\t\tindex, data + len - BTR_EXTERN_FIELD_REF_SIZE,\n\t\t\t\trec, offsets, page_zip,\n\t\t\t\tufield->field_no, TRUE, mtr)",
          "old_line_content": "}",
          "new_line_content": "\t\t\tbtr_free_externally_stored_field(",
          "content_same": false
        },
        {
          "line": 3762,
          "old_api": null,
          "new_api": "mtr_commit",
          "old_text": null,
          "new_text": "mtr_commit(&mtr)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tmtr_commit(&mtr);",
          "content_same": false
        },
        {
          "line": 3764,
          "old_api": null,
          "new_api": "UNIV_LIKELY_NULL",
          "old_text": null,
          "new_text": "UNIV_LIKELY_NULL(page_zip)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tif (UNIV_LIKELY_NULL(page_zip)) {",
          "content_same": false
        },
        {
          "line": 3765,
          "old_api": null,
          "new_api": "deflateEnd",
          "old_text": null,
          "new_text": "deflateEnd(&c_stream)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\tdeflateEnd(&c_stream);",
          "content_same": false
        },
        {
          "line": 3772,
          "old_api": null,
          "new_api": "buf_block_get_page_no",
          "old_text": null,
          "new_text": "buf_block_get_page_no(block)",
          "old_line_content": "",
          "new_line_content": "\t\t\tpage_no = buf_block_get_page_no(block);",
          "content_same": false
        },
        {
          "line": 3779,
          "old_api": null,
          "new_api": "buf_page_get",
          "old_text": null,
          "new_text": "buf_page_get(space_id, zip_size,\n\t\t\t\t\t\t\t  prev_page_no,\n\t\t\t\t\t\t\t  RW_X_LATCH, &mtr)",
          "old_line_content": "#endif /* UNIV_SYNC_DEBUG */",
          "new_line_content": "\t\t\t\tprev_block = buf_page_get(space_id, zip_size,",
          "content_same": false
        },
        {
          "line": 3788,
          "old_api": null,
          "new_api": "UNIV_LIKELY_NULL",
          "old_text": null,
          "new_text": "UNIV_LIKELY_NULL(page_zip)",
          "old_line_content": "\t\t\t\t\t       ->data + FIL_PAGE_NEXT,",
          "new_line_content": "\t\t\t\tif (UNIV_LIKELY_NULL(page_zip)) {",
          "content_same": false
        },
        {
          "line": 3789,
          "old_api": null,
          "new_api": "mlog_write_ulint",
          "old_text": null,
          "new_text": "mlog_write_ulint(\n\t\t\t\t\t\tprev_page + FIL_PAGE_NEXT,\n\t\t\t\t\t\tpage_no, MLOG_4BYTES, &mtr)",
          "old_line_content": "\t\t\t\t\t       prev_page + FIL_PAGE_NEXT, 4);",
          "new_line_content": "\t\t\t\t\tmlog_write_ulint(",
          "content_same": false
        },
        {
          "line": 3792,
          "old_api": null,
          "new_api": "buf_block_get_page_zip",
          "old_text": null,
          "new_text": "buf_block_get_page_zip(\n\t\t\t\t\t\t       prev_block)",
          "old_line_content": "\t\t\t\t\t\tprev_page + FIL_PAGE_DATA",
          "new_line_content": "\t\t\t\t\tmemcpy(buf_block_get_page_zip(",
          "content_same": false
        },
        {
          "line": 4306,
          "old_api": null,
          "new_api": "buf_page_get",
          "old_text": null,
          "new_text": "buf_page_get(space_id, 0, page_no, RW_S_LATCH, &mtr)",
          "old_line_content": "\t\t/* Unfortunately, FIL_PAGE_TYPE was uninitialized for",
          "new_line_content": "\t\tblock = buf_page_get(space_id, 0, page_no, RW_S_LATCH, &mtr);",
          "content_same": false
        },
        {
          "line": 4308,
          "old_api": null,
          "new_api": "buf_block_dbg_add_level",
          "old_text": null,
          "new_text": "buf_block_dbg_add_level(block, SYNC_EXTERN_STORAGE)",
          "old_line_content": "\t\t/* ut_ad(fil_page_get_type(page) == FIL_PAGE_TYPE_BLOB); */",
          "new_line_content": "\t\tbuf_block_dbg_add_level(block, SYNC_EXTERN_STORAGE);",
          "content_same": false
        },
        {
          "line": 3797,
          "old_api": null,
          "new_api": "mlog_write_ulint",
          "old_text": null,
          "new_text": "mlog_write_ulint(\n\t\t\t\t\t\tprev_page + FIL_PAGE_DATA\n\t\t\t\t\t\t+ BTR_BLOB_HDR_NEXT_PAGE_NO,\n\t\t\t\t\t\tpage_no, MLOG_4BYTES, &mtr)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\t\tmlog_write_ulint(",
          "content_same": false
        },
        {
          "line": 4316,
          "old_api": null,
          "new_api": "btr_blob_get_part_len",
          "old_text": null,
          "new_text": "btr_blob_get_part_len(blob_header)",
          "old_line_content": "",
          "new_line_content": "\t\tpart_len = btr_blob_get_part_len(blob_header);",
          "content_same": false
        },
        {
          "line": 3805,
          "old_api": null,
          "new_api": "UNIV_LIKELY_NULL",
          "old_text": null,
          "new_text": "UNIV_LIKELY_NULL(page_zip)",
          "old_line_content": "",
          "new_line_content": "\t\t\tif (UNIV_LIKELY_NULL(page_zip)) {",
          "content_same": false
        },
        {
          "line": 4323,
          "old_api": null,
          "new_api": "btr_blob_get_next_page_no",
          "old_text": null,
          "new_text": "btr_blob_get_next_page_no(blob_header)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tpage_no = btr_blob_get_next_page_no(blob_header);",
          "content_same": false
        },
        {
          "line": 4325,
          "old_api": null,
          "new_api": "mtr_commit",
          "old_text": null,
          "new_text": "mtr_commit(&mtr)",
          "old_line_content": "\t\t/* On other BLOB pages except the first the BLOB header",
          "new_line_content": "\t\tmtr_commit(&mtr);",
          "content_same": false
        },
        {
          "line": 3815,
          "old_api": null,
          "new_api": "page_zip_get_size",
          "old_text": null,
          "new_text": "page_zip_get_size(page_zip)",
          "old_line_content": "\t\t\t\t     || c_stream.avail_out == 0);",
          "new_line_content": "\t\t\t\t\t= page_zip_get_size(page_zip)",
          "content_same": false
        },
        {
          "line": 3819,
          "old_api": null,
          "new_api": "ut_a",
          "old_text": null,
          "new_text": "ut_a(err == Z_OK || err == Z_STREAM_END)",
          "old_line_content": "\t\t\t\t\t\t FIL_NULL, MLOG_4BYTES, &mtr);",
          "new_line_content": "\t\t\t\tut_a(err == Z_OK || err == Z_STREAM_END);",
          "content_same": false
        },
        {
          "line": 3820,
          "old_api": null,
          "new_api": "ut_a",
          "old_text": null,
          "new_text": "ut_a(err == Z_STREAM_END\n\t\t\t\t     || c_stream.avail_out == 0)",
          "old_line_content": "\t\t\t\t/* Initialize the unused \"prev page\" pointer */",
          "new_line_content": "\t\t\t\tut_a(err == Z_STREAM_END",
          "content_same": false
        },
        {
          "line": 4336,
          "old_api": null,
          "new_api": "ut_ad",
          "old_text": null,
          "new_text": "ut_ad(copied_len <= len)",
          "old_line_content": "static",
          "new_line_content": "\t\tut_ad(copied_len <= len);",
          "content_same": false
        },
        {
          "line": 3824,
          "old_api": null,
          "new_api": "mlog_write_ulint",
          "old_text": null,
          "new_text": "mlog_write_ulint(page + FIL_PAGE_NEXT,\n\t\t\t\t\t\t FIL_NULL, MLOG_4BYTES, &mtr)",
          "old_line_content": "\t\t\t\tinto the otherwise unused area.  This",
          "new_line_content": "\t\t\t\tmlog_write_ulint(page + FIL_PAGE_NEXT,",
          "content_same": false
        },
        {
          "line": 3827,
          "old_api": null,
          "new_api": "mlog_write_ulint",
          "old_text": null,
          "new_text": "mlog_write_ulint(page + FIL_PAGE_PREV,\n\t\t\t\t\t\t FIL_NULL, MLOG_4BYTES, &mtr)",
          "old_line_content": "\t\t\t\timplement the possibility to relocate",
          "new_line_content": "\t\t\t\tmlog_write_ulint(page + FIL_PAGE_PREV,",
          "content_same": false
        },
        {
          "line": 4352,
          "old_api": null,
          "new_api": "ut_is_2pow",
          "old_text": null,
          "new_text": "ut_is_2pow(zip_size)",
          "old_line_content": "\t\tbuf_page_t*\tbpage;",
          "new_line_content": "\tut_ad(ut_is_2pow(zip_size));",
          "content_same": false
        },
        {
          "line": 4353,
          "old_api": null,
          "new_api": "ut_ad",
          "old_text": null,
          "new_text": "ut_ad(zip_size >= PAGE_ZIP_MIN_SIZE)",
          "old_line_content": "\t\tint\t\terr;",
          "new_line_content": "\tut_ad(zip_size >= PAGE_ZIP_MIN_SIZE);",
          "content_same": false
        },
        {
          "line": 4354,
          "old_api": null,
          "new_api": "ut_ad",
          "old_text": null,
          "new_text": "ut_ad(zip_size <= UNIV_PAGE_SIZE)",
          "old_line_content": "\t\tulint\t\tnext_page_no;",
          "new_line_content": "\tut_ad(zip_size <= UNIV_PAGE_SIZE);",
          "content_same": false
        },
        {
          "line": 4355,
          "old_api": null,
          "new_api": "ut_ad",
          "old_text": null,
          "new_text": "ut_ad(space_id)",
          "old_line_content": "",
          "new_line_content": "\tut_ad(space_id);",
          "content_same": false
        },
        {
          "line": 3843,
          "old_api": null,
          "new_api": "mlog_write_ulint",
          "old_text": null,
          "new_text": "mlog_write_ulint(page\n\t\t\t\t\t\t + FIL_PAGE_FILE_FLUSH_LSN,\n\t\t\t\t\t\t space_id,\n\t\t\t\t\t\t MLOG_4BYTES, &mtr)",
          "old_line_content": "\t\t\t\t\t\t rec_page_no,",
          "new_line_content": "\t\t\t\tmlog_write_ulint(page",
          "content_same": false
        },
        {
          "line": 4362,
          "old_api": null,
          "new_api": "buf_page_get_zip",
          "old_text": null,
          "new_text": "buf_page_get_zip(space_id, zip_size, page_no)",
          "old_line_content": "\t\t\t\t\" compressed BLOB\"",
          "new_line_content": "\t\tbpage = buf_page_get_zip(space_id, zip_size, page_no);",
          "content_same": false
        },
        {
          "line": 4364,
          "old_api": null,
          "new_api": "UNIV_UNLIKELY",
          "old_text": null,
          "new_text": "UNIV_UNLIKELY(!bpage)",
          "old_line_content": "\t\t\t\t(ulong) page_no, (ulong) space_id);",
          "new_line_content": "\t\tif (UNIV_UNLIKELY(!bpage)) {",
          "content_same": false
        },
        {
          "line": 4365,
          "old_api": null,
          "new_api": "ut_print_timestamp",
          "old_text": null,
          "new_text": "ut_print_timestamp(stderr)",
          "old_line_content": "\t\t\treturn;",
          "new_line_content": "\t\t\tut_print_timestamp(stderr);",
          "content_same": false
        },
        {
          "line": 4366,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\n\t\t\t\t\"  InnoDB: Cannot load\"\n\t\t\t\t\" compressed BLOB\"\n\t\t\t\t\" page %lu space %lu\\n\",\n\t\t\t\t(ulong) page_no, (ulong) space_id)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tfprintf(stderr,",
          "content_same": false
        },
        {
          "line": 3853,
          "old_api": null,
          "new_api": "page_zip_get_size",
          "old_text": null,
          "new_text": "page_zip_get_size(page_zip)",
          "old_line_content": "\t\t\t\t\t\t&mtr);",
          "new_line_content": "\t\t\t\tmemset(page + page_zip_get_size(page_zip)",
          "content_same": false
        },
        {
          "line": 3856,
          "old_api": null,
          "new_api": "mlog_log_string",
          "old_text": null,
          "new_text": "mlog_log_string(page + FIL_PAGE_TYPE,\n\t\t\t\t\t\tpage_zip_get_size(page_zip)\n\t\t\t\t\t\t- FIL_PAGE_TYPE,\n\t\t\t\t\t\t&mtr)",
          "old_line_content": "\t\t\t\tfrom there. */",
          "new_line_content": "\t\t\t\tmlog_log_string(page + FIL_PAGE_TYPE,",
          "content_same": false
        },
        {
          "line": 4374,
          "old_api": null,
          "new_api": "fil_page_get_type",
          "old_text": null,
          "new_text": "fil_page_get_type(bpage->zip.data)",
          "old_line_content": "\t\t\t\t\" page %lu space %lu\\n\",",
          "new_line_content": "\t\tif (UNIV_UNLIKELY(fil_page_get_type(bpage->zip.data)",
          "content_same": false
        },
        {
          "line": 3863,
          "old_api": null,
          "new_api": "buf_block_get_page_zip",
          "old_text": null,
          "new_text": "buf_block_get_page_zip(block)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tblob_page_zip = buf_block_get_page_zip(block);",
          "content_same": false
        },
        {
          "line": 4376,
          "old_api": null,
          "new_api": "ut_print_timestamp",
          "old_text": null,
          "new_text": "ut_print_timestamp(stderr)",
          "old_line_content": "\t\t\t\t(ulong) page_no, (ulong) space_id);",
          "new_line_content": "\t\t\tut_print_timestamp(stderr);",
          "content_same": false
        },
        {
          "line": 4377,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\n\t\t\t\t\"  InnoDB: Unknown type %lu of\"\n\t\t\t\t\" compressed BLOB\"\n\t\t\t\t\" page %lu space %lu\\n\",\n\t\t\t\t(ulong) fil_page_get_type(bpage->zip.data),\n\t\t\t\t(ulong) page_no, (ulong) space_id)",
          "old_line_content": "\t\t\tgoto end_of_blob;",
          "new_line_content": "\t\t\tfprintf(stderr,",
          "content_same": false
        },
        {
          "line": 3864,
          "old_api": null,
          "new_api": "ut_ad",
          "old_text": null,
          "new_text": "ut_ad(blob_page_zip)",
          "old_line_content": "\t\t\t\tif (err == Z_OK && prev_page_no != FIL_NULL) {",
          "new_line_content": "\t\t\t\tut_ad(blob_page_zip);",
          "content_same": false
        },
        {
          "line": 3865,
          "old_api": null,
          "new_api": "page_zip_get_size",
          "old_text": null,
          "new_text": "page_zip_get_size(blob_page_zip)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tut_ad(page_zip_get_size(blob_page_zip)",
          "content_same": false
        },
        {
          "line": 3866,
          "old_api": null,
          "new_api": "page_zip_get_size",
          "old_text": null,
          "new_text": "page_zip_get_size(page_zip)",
          "old_line_content": "\t\t\t\t\tgoto next_zip_page;",
          "new_line_content": "\t\t\t\t      == page_zip_get_size(page_zip));",
          "content_same": false
        },
        {
          "line": 4381,
          "old_api": null,
          "new_api": "fil_page_get_type",
          "old_text": null,
          "new_text": "fil_page_get_type(bpage->zip.data)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t(ulong) fil_page_get_type(bpage->zip.data),",
          "content_same": false
        },
        {
          "line": 3867,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(blob_page_zip->data, page,\n\t\t\t\t       page_zip_get_size(page_zip))",
          "old_line_content": "\t\t\t\t}",
          "new_line_content": "\t\t\t\tmemcpy(blob_page_zip->data, page,",
          "content_same": false
        },
        {
          "line": 3868,
          "old_api": null,
          "new_api": "page_zip_get_size",
          "old_text": null,
          "new_text": "page_zip_get_size(page_zip)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t       page_zip_get_size(page_zip));",
          "content_same": false
        },
        {
          "line": 4386,
          "old_api": null,
          "new_api": "mach_read_from_4",
          "old_text": null,
          "new_text": "mach_read_from_4(bpage->zip.data + offset)",
          "old_line_content": "\t\t\toffset = FIL_PAGE_DATA;",
          "new_line_content": "\t\tnext_page_no = mach_read_from_4(bpage->zip.data + offset);",
          "content_same": false
        },
        {
          "line": 3875,
          "old_api": null,
          "new_api": "buf_page_get",
          "old_text": null,
          "new_text": "buf_page_get(space_id, zip_size,\n\t\t\t\t\t\t\t rec_page_no,\n\t\t\t\t\t\t\t RW_X_LATCH, &mtr)",
          "old_line_content": "#endif /* UNIV_SYNC_DEBUG */",
          "new_line_content": "\t\t\t\trec_block = buf_page_get(space_id, zip_size,",
          "content_same": false
        },
        {
          "line": 4388,
          "old_api": null,
          "new_api": "UNIV_LIKELY",
          "old_text": null,
          "new_text": "UNIV_LIKELY(offset == FIL_PAGE_NEXT)",
          "old_line_content": "\t\t\toffset += 4;",
          "new_line_content": "\t\tif (UNIV_LIKELY(offset == FIL_PAGE_NEXT)) {",
          "content_same": false
        },
        {
          "line": 3885,
          "old_api": null,
          "new_api": "mach_write_to_4",
          "old_text": null,
          "new_text": "mach_write_to_4(field_ref\n\t\t\t\t\t\t\t+ BTR_EXTERN_LEN + 4,\n\t\t\t\t\t\t\tc_stream.total_in)",
          "old_line_content": "\t\t\t\t}",
          "new_line_content": "\t\t\t\t\tmach_write_to_4(field_ref",
          "content_same": false
        },
        {
          "line": 4400,
          "old_api": null,
          "new_api": "inflate",
          "old_text": null,
          "new_text": "inflate(d_stream, Z_NO_FLUSH)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\terr = inflate(d_stream, Z_NO_FLUSH);",
          "content_same": false
        },
        {
          "line": 3889,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(field_ref + BTR_EXTERN_LEN,\n\t\t\t\t\t       0, 8)",
          "old_line_content": "\t\t\t\t\t\t\t+ BTR_EXTERN_SPACE_ID,",
          "new_line_content": "\t\t\t\t\tmemset(field_ref + BTR_EXTERN_LEN,",
          "content_same": false
        },
        {
          "line": 3894,
          "old_api": null,
          "new_api": "mach_write_to_4",
          "old_text": null,
          "new_text": "mach_write_to_4(field_ref\n\t\t\t\t\t\t\t+ BTR_EXTERN_SPACE_ID,\n\t\t\t\t\t\t\tspace_id)",
          "old_line_content": "\t\t\t\t\t\t\tpage_no);",
          "new_line_content": "\t\t\t\t\tmach_write_to_4(field_ref",
          "content_same": false
        },
        {
          "line": 3898,
          "old_api": null,
          "new_api": "mach_write_to_4",
          "old_text": null,
          "new_text": "mach_write_to_4(field_ref\n\t\t\t\t\t\t\t+ BTR_EXTERN_PAGE_NO,\n\t\t\t\t\t\t\tpage_no)",
          "old_line_content": "\t\t\t\t\t\t\tFIL_PAGE_NEXT);",
          "new_line_content": "\t\t\t\t\tmach_write_to_4(field_ref",
          "content_same": false
        },
        {
          "line": 4414,
          "old_api": null,
          "new_api": "ut_print_timestamp",
          "old_text": null,
          "new_text": "ut_print_timestamp(stderr)",
          "old_line_content": "\t\t\t\terr);",
          "new_line_content": "\t\t\tut_print_timestamp(stderr);",
          "content_same": false
        },
        {
          "line": 4415,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\n\t\t\t\t\"  InnoDB: inflate() of\"\n\t\t\t\t\" compressed BLOB\"\n\t\t\t\t\" page %lu space %lu returned %d\\n\",\n\t\t\t\t(ulong) page_no, (ulong) space_id,\n\t\t\t\terr)",
          "old_line_content": "\t\tcase Z_BUF_ERROR:",
          "new_line_content": "\t\t\tfprintf(stderr,",
          "content_same": false
        },
        {
          "line": 3902,
          "old_api": null,
          "new_api": "mach_write_to_4",
          "old_text": null,
          "new_text": "mach_write_to_4(field_ref\n\t\t\t\t\t\t\t+ BTR_EXTERN_OFFSET,\n\t\t\t\t\t\t\tFIL_PAGE_NEXT)",
          "old_line_content": "\t\t\t\t\tpage_zip, rec, index, offsets,",
          "new_line_content": "\t\t\t\t\tmach_write_to_4(field_ref",
          "content_same": false
        },
        {
          "line": 3907,
          "old_api": null,
          "new_api": "page_zip_write_blob_ptr",
          "old_text": null,
          "new_text": "page_zip_write_blob_ptr(\n\t\t\t\t\tpage_zip, rec, index, offsets,\n\t\t\t\t\tbig_rec_vec->fields[i].field_no, &mtr)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tpage_zip_write_blob_ptr(",
          "content_same": false
        },
        {
          "line": 4427,
          "old_api": null,
          "new_api": "ut_print_timestamp",
          "old_text": null,
          "new_text": "ut_print_timestamp(stderr)",
          "old_line_content": "\t\t\t\t\t(ulong) space_id);",
          "new_line_content": "\t\t\t\tut_print_timestamp(stderr);",
          "content_same": false
        },
        {
          "line": 4428,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\n\t\t\t\t\t\"  InnoDB: unexpected end of\"\n\t\t\t\t\t\" compressed BLOB\"\n\t\t\t\t\t\" page %lu space %lu\\n\",\n\t\t\t\t\t(ulong) page_no,\n\t\t\t\t\t(ulong) space_id)",
          "old_line_content": "\t\t\t} else {",
          "new_line_content": "\t\t\t\tfprintf(stderr,",
          "content_same": false
        },
        {
          "line": 3409,
          "old_api": null,
          "new_api": "rec_offs_any_extern",
          "old_text": null,
          "new_text": "rec_offs_any_extern(offsets)",
          "old_line_content": "",
          "new_line_content": "\tif (!rec_offs_any_extern(offsets)) {",
          "content_same": false
        },
        {
          "line": 3922,
          "old_api": null,
          "new_api": "mlog_write_ulint",
          "old_text": null,
          "new_text": "mlog_write_ulint(page + FIL_PAGE_TYPE,\n\t\t\t\t\t\t FIL_PAGE_TYPE_BLOB,\n\t\t\t\t\t\t MLOG_2BYTES, &mtr)",
          "old_line_content": "\t\t\t\t\t\t  - BTR_BLOB_HDR_SIZE",
          "new_line_content": "\t\t\t\tmlog_write_ulint(page + FIL_PAGE_TYPE,",
          "content_same": false
        },
        {
          "line": 4435,
          "old_api": null,
          "new_api": "inflate",
          "old_text": null,
          "new_text": "inflate(d_stream, Z_FINISH)",
          "old_line_content": "\t\t\t\t\tgoto inflate_error;",
          "new_line_content": "\t\t\t\terr = inflate(d_stream, Z_FINISH);",
          "content_same": false
        },
        {
          "line": 3414,
          "old_api": null,
          "new_api": "rec_offs_n_fields",
          "old_text": null,
          "new_text": "rec_offs_n_fields(offsets)",
          "old_line_content": "",
          "new_line_content": "\tn = rec_offs_n_fields(offsets);",
          "content_same": false
        },
        {
          "line": 3417,
          "old_api": null,
          "new_api": "rec_offs_nth_extern",
          "old_text": null,
          "new_text": "rec_offs_nth_extern(offsets, i)",
          "old_line_content": "\t\t\t\t     j++) {",
          "new_line_content": "\t\tif (rec_offs_nth_extern(offsets, i)) {",
          "content_same": false
        },
        {
          "line": 4446,
          "old_api": null,
          "new_api": "buf_page_release_zip",
          "old_text": null,
          "new_text": "buf_page_release_zip(bpage)",
          "old_line_content": "\t\t/* On other BLOB pages except the first",
          "new_line_content": "\t\t\tbuf_page_release_zip(bpage);",
          "content_same": false
        },
        {
          "line": 3422,
          "old_api": null,
          "new_api": "upd_get_n_fields",
          "old_text": null,
          "new_text": "upd_get_n_fields(update)",
          "old_line_content": "\t\t\t\t\t}",
          "new_line_content": "\t\t\t\tfor (j = 0; j < upd_get_n_fields(update);",
          "content_same": false
        },
        {
          "line": 3424,
          "old_api": null,
          "new_api": "upd_get_nth_field",
          "old_text": null,
          "new_text": "upd_get_nth_field(update, j)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\t\tif (upd_get_nth_field(update, j)",
          "content_same": false
        },
        {
          "line": 4450,
          "old_api": null,
          "new_api": "buf_page_release_zip",
          "old_text": null,
          "new_text": "buf_page_release_zip(bpage)",
          "old_line_content": "\t\toffset = FIL_PAGE_NEXT;",
          "new_line_content": "\t\tbuf_page_release_zip(bpage);",
          "content_same": false
        },
        {
          "line": 3938,
          "old_api": null,
          "new_api": "mlog_write_string",
          "old_text": null,
          "new_text": "mlog_write_string(page + FIL_PAGE_DATA\n\t\t\t\t\t\t  + BTR_BLOB_HDR_SIZE,\n\t\t\t\t\t\t  (const byte*)\n\t\t\t\t\t\t  big_rec_vec->fields[i].data\n\t\t\t\t\t\t  + big_rec_vec->fields[i].len\n\t\t\t\t\t\t  - extern_len,\n\t\t\t\t\t\t  store_len, &mtr)",
          "old_line_content": "\t\t\t\t\t\t  store_len, &mtr);",
          "new_line_content": "\t\t\t\tmlog_write_string(page + FIL_PAGE_DATA",
          "content_same": false
        },
        {
          "line": 3432,
          "old_api": null,
          "new_api": "btr_cur_set_ownership_of_extern_field",
          "old_text": null,
          "new_text": "btr_cur_set_ownership_of_extern_field(\n\t\t\t\tpage_zip, rec, index, offsets, i, FALSE, mtr)",
          "old_line_content": "}",
          "new_line_content": "\t\t\tbtr_cur_set_ownership_of_extern_field(",
          "content_same": false
        },
        {
          "line": 3945,
          "old_api": null,
          "new_api": "mlog_write_ulint",
          "old_text": null,
          "new_text": "mlog_write_ulint(page + FIL_PAGE_DATA\n\t\t\t\t\t\t + BTR_BLOB_HDR_PART_LEN,\n\t\t\t\t\t\t store_len, MLOG_4BYTES, &mtr)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tmlog_write_ulint(page + FIL_PAGE_DATA",
          "content_same": false
        },
        {
          "line": 3954,
          "old_api": null,
          "new_api": "buf_page_get",
          "old_text": null,
          "new_text": "buf_page_get(space_id, zip_size,\n\t\t\t\t\t\t\t rec_page_no,\n\t\t\t\t\t\t\t RW_X_LATCH, &mtr)",
          "old_line_content": "#endif /* UNIV_SYNC_DEBUG */",
          "new_line_content": "\t\t\t\trec_block = buf_page_get(space_id, zip_size,",
          "content_same": false
        },
        {
          "line": 3962,
          "old_api": null,
          "new_api": "mlog_write_ulint",
          "old_text": null,
          "new_text": "mlog_write_ulint(field_ref + BTR_EXTERN_LEN, 0,\n\t\t\t\t\t\t MLOG_4BYTES, &mtr)",
          "old_line_content": "\t\t\t\t\t\t MLOG_4BYTES, &mtr);",
          "new_line_content": "\t\t\t\tmlog_write_ulint(field_ref + BTR_EXTERN_LEN, 0,",
          "content_same": false
        },
        {
          "line": 4476,
          "old_api": null,
          "new_api": "UNIV_UNLIKELY",
          "old_text": null,
          "new_text": "UNIV_UNLIKELY(len == 0)",
          "old_line_content": "\t\tz_stream\td_stream;",
          "new_line_content": "\tif (UNIV_UNLIKELY(len == 0)) {",
          "content_same": false
        },
        {
          "line": 3964,
          "old_api": null,
          "new_api": "mlog_write_ulint",
          "old_text": null,
          "new_text": "mlog_write_ulint(field_ref\n\t\t\t\t\t\t + BTR_EXTERN_LEN + 4,\n\t\t\t\t\t\t big_rec_vec->fields[i].len\n\t\t\t\t\t\t - extern_len,\n\t\t\t\t\t\t MLOG_4BYTES, &mtr)",
          "old_line_content": "\t\t\t\tif (prev_page_no == FIL_NULL) {",
          "new_line_content": "\t\t\t\tmlog_write_ulint(field_ref",
          "content_same": false
        },
        {
          "line": 3454,
          "old_api": null,
          "new_api": "dtuple_get_n_fields",
          "old_text": null,
          "new_text": "dtuple_get_n_fields(entry)",
          "old_line_content": "",
          "new_line_content": "\tfor (i = 0; i < dtuple_get_n_fields(entry); i++) {",
          "content_same": false
        },
        {
          "line": 4480,
          "old_api": null,
          "new_api": "UNIV_UNLIKELY",
          "old_text": null,
          "new_text": "UNIV_UNLIKELY(zip_size)",
          "old_line_content": "\t\twindow size, plus a few kilobytes for small objects. */",
          "new_line_content": "\tif (UNIV_UNLIKELY(zip_size)) {",
          "content_same": false
        },
        {
          "line": 3456,
          "old_api": null,
          "new_api": "dtuple_get_nth_field",
          "old_text": null,
          "new_text": "dtuple_get_nth_field(entry, i)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tdfield_t*\tdfield = dtuple_get_nth_field(entry, i);",
          "content_same": false
        },
        {
          "line": 3971,
          "old_api": null,
          "new_api": "mlog_write_ulint",
          "old_text": null,
          "new_text": "mlog_write_ulint(field_ref\n\t\t\t\t\t\t\t + BTR_EXTERN_SPACE_ID,\n\t\t\t\t\t\t\t space_id,\n\t\t\t\t\t\t\t MLOG_4BYTES, &mtr)",
          "old_line_content": "\t\t\t\t\t\t\t + BTR_EXTERN_PAGE_NO,",
          "new_line_content": "\t\t\t\t\tmlog_write_ulint(field_ref",
          "content_same": false
        },
        {
          "line": 4487,
          "old_api": null,
          "new_api": "mem_heap_create",
          "old_text": null,
          "new_text": "mem_heap_create(40000)",
          "old_line_content": "\t\td_stream.next_out = buf;",
          "new_line_content": "\t\theap = mem_heap_create(40000);",
          "content_same": false
        },
        {
          "line": 4488,
          "old_api": null,
          "new_api": "page_zip_set_alloc",
          "old_text": null,
          "new_text": "page_zip_set_alloc(&d_stream, heap)",
          "old_line_content": "\t\td_stream.avail_out = len;",
          "new_line_content": "\t\tpage_zip_set_alloc(&d_stream, heap);",
          "content_same": false
        },
        {
          "line": 3976,
          "old_api": null,
          "new_api": "mlog_write_ulint",
          "old_text": null,
          "new_text": "mlog_write_ulint(field_ref\n\t\t\t\t\t\t\t + BTR_EXTERN_PAGE_NO,\n\t\t\t\t\t\t\t page_no,\n\t\t\t\t\t\t\t MLOG_4BYTES, &mtr)",
          "old_line_content": "\t\t\t\t\t\t\t + BTR_EXTERN_OFFSET,",
          "new_line_content": "\t\t\t\t\tmlog_write_ulint(field_ref",
          "content_same": false
        },
        {
          "line": 4490,
          "old_api": null,
          "new_api": "inflateInit",
          "old_text": null,
          "new_text": "inflateInit(&d_stream)",
          "old_line_content": "",
          "new_line_content": "\t\terr = inflateInit(&d_stream);",
          "content_same": false
        },
        {
          "line": 3467,
          "old_api": null,
          "new_api": "upd_get_n_fields",
          "old_text": null,
          "new_text": "upd_get_n_fields(update)",
          "old_line_content": "",
          "new_line_content": "\t\tfor (j = 0; j < upd_get_n_fields(update); j++) {",
          "content_same": false
        },
        {
          "line": 3981,
          "old_api": null,
          "new_api": "mlog_write_ulint",
          "old_text": null,
          "new_text": "mlog_write_ulint(field_ref\n\t\t\t\t\t\t\t + BTR_EXTERN_OFFSET,\n\t\t\t\t\t\t\t FIL_PAGE_DATA,\n\t\t\t\t\t\t\t MLOG_4BYTES, &mtr)",
          "old_line_content": "\t\t\t\tprev_page_no = page_no;",
          "new_line_content": "\t\t\t\t\tmlog_write_ulint(field_ref",
          "content_same": false
        },
        {
          "line": 3474,
          "old_api": null,
          "new_api": "dfield_get_data",
          "old_text": null,
          "new_text": "dfield_get_data(dfield)",
          "old_line_content": "\t\t;",
          "new_line_content": "\t\tdata = dfield_get_data(dfield);",
          "content_same": false
        },
        {
          "line": 4499,
          "old_api": null,
          "new_api": "inflateEnd",
          "old_text": null,
          "new_text": "inflateEnd(&d_stream)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tinflateEnd(&d_stream);",
          "content_same": false
        },
        {
          "line": 4500,
          "old_api": null,
          "new_api": "mem_heap_free",
          "old_text": null,
          "new_text": "mem_heap_free(heap)",
          "old_line_content": "}",
          "new_line_content": "\t\tmem_heap_free(heap);",
          "content_same": false
        },
        {
          "line": 3475,
          "old_api": null,
          "new_api": "dfield_get_len",
          "old_text": null,
          "new_text": "dfield_get_len(dfield)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tlen = dfield_get_len(dfield);",
          "content_same": false
        },
        {
          "line": 3989,
          "old_api": null,
          "new_api": "mtr_commit",
          "old_text": null,
          "new_text": "mtr_commit(&mtr)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\tmtr_commit(&mtr);",
          "content_same": false
        },
        {
          "line": 4503,
          "old_api": null,
          "new_api": "btr_copy_blob_prefix",
          "old_text": null,
          "new_text": "btr_copy_blob_prefix(buf, len, space_id,\n\t\t\t\t\t    page_no, offset)",
          "old_line_content": "Copies the prefix of an externally stored field of a record. Parameter",
          "new_line_content": "\t\treturn(btr_copy_blob_prefix(buf, len, space_id,",
          "content_same": false
        },
        {
          "line": 3998,
          "old_api": null,
          "new_api": "UNIV_LIKELY_NULL",
          "old_text": null,
          "new_text": "UNIV_LIKELY_NULL(page_zip)",
          "old_line_content": "}",
          "new_line_content": "\tif (UNIV_LIKELY_NULL(page_zip)) {",
          "content_same": false
        },
        {
          "line": 3999,
          "old_api": null,
          "new_api": "deflateEnd",
          "old_text": null,
          "new_text": "deflateEnd(&c_stream)",
          "old_line_content": "",
          "new_line_content": "\t\tdeflateEnd(&c_stream);",
          "content_same": false
        },
        {
          "line": 4000,
          "old_api": null,
          "new_api": "mem_heap_free",
          "old_text": null,
          "new_text": "mem_heap_free(heap)",
          "old_line_content": "/***********************************************************************",
          "new_line_content": "\t\tmem_heap_free(heap);",
          "content_same": false
        },
        {
          "line": 3502,
          "old_api": null,
          "new_api": "rec_get_node_ptr_flag",
          "old_text": null,
          "new_text": "rec_get_node_ptr_flag(rec)",
          "old_line_content": "\t}",
          "new_line_content": "\tut_ad(!rec_offs_comp(offsets) || !rec_get_node_ptr_flag(rec));",
          "content_same": false
        },
        {
          "line": 3503,
          "old_api": null,
          "new_api": "rec_offs_n_fields",
          "old_text": null,
          "new_text": "rec_offs_n_fields(offsets)",
          "old_line_content": "",
          "new_line_content": "\tn = rec_offs_n_fields(offsets);",
          "content_same": false
        },
        {
          "line": 4531,
          "old_api": null,
          "new_api": "ut_a",
          "old_text": null,
          "new_text": "ut_a(local_len >= BTR_EXTERN_FIELD_REF_SIZE)",
          "old_line_content": "\t\treturn(len);",
          "new_line_content": "\tut_a(local_len >= BTR_EXTERN_FIELD_REF_SIZE);",
          "content_same": false
        },
        {
          "line": 4535,
          "old_api": null,
          "new_api": "UNIV_UNLIKELY",
          "old_text": null,
          "new_text": "UNIV_UNLIKELY(local_len >= len)",
          "old_line_content": "\tdata += local_len;",
          "new_line_content": "\tif (UNIV_UNLIKELY(local_len >= len)) {",
          "content_same": false
        },
        {
          "line": 4536,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(buf, data, len)",
          "old_line_content": "",
          "new_line_content": "\t\tmemcpy(buf, data, len);",
          "content_same": false
        },
        {
          "line": 3511,
          "old_api": null,
          "new_api": "rec_offs_nth_extern",
          "old_text": null,
          "new_text": "rec_offs_nth_extern(offsets, i)",
          "old_line_content": "}",
          "new_line_content": "\t\tif (rec_offs_nth_extern(offsets, i)) {",
          "content_same": false
        },
        {
          "line": 3513,
          "old_api": null,
          "new_api": "btr_cur_set_ownership_of_extern_field",
          "old_text": null,
          "new_text": "btr_cur_set_ownership_of_extern_field(\n\t\t\t\tpage_zip, rec, index, offsets, i, TRUE, mtr)",
          "old_line_content": "/***********************************************************************",
          "new_line_content": "\t\t\tbtr_cur_set_ownership_of_extern_field(",
          "content_same": false
        },
        {
          "line": 4540,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(buf, data, local_len)",
          "old_line_content": "",
          "new_line_content": "\tmemcpy(buf, data, local_len);",
          "content_same": false
        },
        {
          "line": 4545,
          "old_api": null,
          "new_api": "mach_read_from_4",
          "old_text": null,
          "new_text": "mach_read_from_4(data + BTR_EXTERN_SPACE_ID)",
          "old_line_content": "\treturn(local_len",
          "new_line_content": "\tspace_id = mach_read_from_4(data + BTR_EXTERN_SPACE_ID);",
          "content_same": false
        },
        {
          "line": 4547,
          "old_api": null,
          "new_api": "mach_read_from_4",
          "old_text": null,
          "new_text": "mach_read_from_4(data + BTR_EXTERN_PAGE_NO)",
          "old_line_content": "\t\t\t\t\t\t\t     len - local_len,",
          "new_line_content": "\tpage_no = mach_read_from_4(data + BTR_EXTERN_PAGE_NO);",
          "content_same": false
        },
        {
          "line": 4549,
          "old_api": null,
          "new_api": "mach_read_from_4",
          "old_text": null,
          "new_text": "mach_read_from_4(data + BTR_EXTERN_OFFSET)",
          "old_line_content": "\t\t\t\t\t\t\t     space_id, page_no,",
          "new_line_content": "\toffset = mach_read_from_4(data + BTR_EXTERN_OFFSET);",
          "content_same": false
        },
        {
          "line": 4552,
          "old_api": null,
          "new_api": "btr_copy_externally_stored_field_prefix_low",
          "old_text": null,
          "new_text": "btr_copy_externally_stored_field_prefix_low(buf + local_len,\n\t\t\t\t\t\t\t     len - local_len,\n\t\t\t\t\t\t\t     zip_size,\n\t\t\t\t\t\t\t     space_id, page_no,\n\t\t\t\t\t\t\t     offset)",
          "old_line_content": "",
          "new_line_content": "\t       + btr_copy_externally_stored_field_prefix_low(buf + local_len,",
          "content_same": false
        },
        {
          "line": 3529,
          "old_api": null,
          "new_api": "dtuple_get_n_fields",
          "old_text": null,
          "new_text": "dtuple_get_n_fields(entry)",
          "old_line_content": "",
          "new_line_content": "\tfor (i = 0; i < dtuple_get_n_fields(entry); i++) {",
          "content_same": false
        },
        {
          "line": 3530,
          "old_api": null,
          "new_api": "dtuple_get_nth_field",
          "old_text": null,
          "new_text": "dtuple_get_nth_field(entry, i)",
          "old_line_content": "\t\t\tdata[len - BTR_EXTERN_FIELD_REF_SIZE + BTR_EXTERN_LEN]",
          "new_line_content": "\t\tdfield_t* dfield = dtuple_get_nth_field(entry, i);",
          "content_same": false
        },
        {
          "line": 3532,
          "old_api": null,
          "new_api": "dfield_is_ext",
          "old_text": null,
          "new_text": "dfield_is_ext(dfield)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tif (dfield_is_ext(dfield)) {",
          "content_same": false
        },
        {
          "line": 3533,
          "old_api": null,
          "new_api": "dfield_get_data",
          "old_text": null,
          "new_text": "dfield_get_data(dfield)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tbyte*\tdata = dfield_get_data(dfield);",
          "content_same": false
        },
        {
          "line": 3534,
          "old_api": null,
          "new_api": "dfield_get_len",
          "old_text": null,
          "new_text": "dfield_get_len(dfield)",
          "old_line_content": "}",
          "new_line_content": "\t\t\tulint\tlen = dfield_get_len(dfield);",
          "content_same": false
        },
        {
          "line": 4047,
          "old_api": null,
          "new_api": "dict_index_get_lock",
          "old_text": null,
          "new_text": "dict_index_get_lock(index)",
          "old_line_content": "\tif (rec) {",
          "new_line_content": "\tut_ad(mtr_memo_contains(local_mtr, dict_index_get_lock(index),",
          "content_same": false
        },
        {
          "line": 4055,
          "old_api": null,
          "new_api": "rec_get_nth_field",
          "old_text": null,
          "new_text": "rec_get_nth_field(rec, offsets,\n\t\t\t\t\t\t      i, &local_len)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tconst byte*\tf = rec_get_nth_field(rec, offsets,",
          "content_same": false
        },
        {
          "line": 4057,
          "old_api": null,
          "new_api": "ut_a",
          "old_text": null,
          "new_text": "ut_a(local_len >= BTR_EXTERN_FIELD_REF_SIZE)",
          "old_line_content": "",
          "new_line_content": "\t\tut_a(local_len >= BTR_EXTERN_FIELD_REF_SIZE);",
          "content_same": false
        },
        {
          "line": 4064,
          "old_api": null,
          "new_api": "mach_read_from_4",
          "old_text": null,
          "new_text": "mach_read_from_4(field_ref + BTR_EXTERN_SPACE_ID)",
          "old_line_content": "\t\tCurrently, externally stored records are stored in the",
          "new_line_content": "\tspace_id = mach_read_from_4(field_ref + BTR_EXTERN_SPACE_ID);",
          "content_same": false
        },
        {
          "line": 3558,
          "old_api": null,
          "new_api": "ut_ad",
          "old_text": null,
          "new_text": "ut_ad(tuple)",
          "old_line_content": "\tfor (; n--; uf++) {",
          "new_line_content": "\tut_ad(tuple);",
          "content_same": false
        },
        {
          "line": 4072,
          "old_api": null,
          "new_api": "page_align",
          "old_text": null,
          "new_text": "page_align(field_ref)",
          "old_line_content": "",
          "new_line_content": "\t\tut_ad(!page_get_space_id(page_align(field_ref)));",
          "content_same": false
        },
        {
          "line": 4073,
          "old_api": null,
          "new_api": "ut_ad",
          "old_text": null,
          "new_text": "ut_ad(!rec)",
          "old_line_content": "\tif (!rec) {",
          "new_line_content": "\t\tut_ad(!rec);",
          "content_same": false
        },
        {
          "line": 3562,
          "old_api": null,
          "new_api": "upd_get_n_fields",
          "old_text": null,
          "new_text": "upd_get_n_fields(update)",
          "old_line_content": "",
          "new_line_content": "\tn = upd_get_n_fields(update);",
          "content_same": false
        },
        {
          "line": 4074,
          "old_api": null,
          "new_api": "ut_ad",
          "old_text": null,
          "new_text": "ut_ad(!page_zip)",
          "old_line_content": "\t\t/* This is a call from row_purge_upd_exist_or_extern(). */",
          "new_line_content": "\t\tut_ad(!page_zip);",
          "content_same": false
        },
        {
          "line": 4588,
          "old_api": null,
          "new_api": "mach_read_from_4",
          "old_text": null,
          "new_text": "mach_read_from_4(data + local_len + BTR_EXTERN_SPACE_ID)",
          "old_line_content": "\t/* Currently a BLOB cannot be bigger than 4 GB; we",
          "new_line_content": "\tspace_id = mach_read_from_4(data + local_len + BTR_EXTERN_SPACE_ID);",
          "content_same": false
        },
        {
          "line": 3565,
          "old_api": null,
          "new_api": "dfield_is_ext",
          "old_text": null,
          "new_text": "dfield_is_ext(&uf->new_val)",
          "old_line_content": "\t\t\t\tn_pushed++;",
          "new_line_content": "\t\tif (dfield_is_ext(&uf->new_val)) {",
          "content_same": false
        },
        {
          "line": 4590,
          "old_api": null,
          "new_api": "mach_read_from_4",
          "old_text": null,
          "new_text": "mach_read_from_4(data + local_len + BTR_EXTERN_PAGE_NO)",
          "old_line_content": "",
          "new_line_content": "\tpage_no = mach_read_from_4(data + local_len + BTR_EXTERN_PAGE_NO);",
          "content_same": false
        },
        {
          "line": 3567,
          "old_api": null,
          "new_api": "dtuple_get_nth_field",
          "old_text": null,
          "new_text": "dtuple_get_nth_field(tuple, uf->field_no)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\t= dtuple_get_nth_field(tuple, uf->field_no);",
          "content_same": false
        },
        {
          "line": 4592,
          "old_api": null,
          "new_api": "mach_read_from_4",
          "old_text": null,
          "new_text": "mach_read_from_4(data + local_len + BTR_EXTERN_OFFSET)",
          "old_line_content": "",
          "new_line_content": "\toffset = mach_read_from_4(data + local_len + BTR_EXTERN_OFFSET);",
          "content_same": false
        },
        {
          "line": 3569,
          "old_api": null,
          "new_api": "dfield_is_ext",
          "old_text": null,
          "new_text": "dfield_is_ext(field)",
          "old_line_content": "",
          "new_line_content": "\t\t\tif (!dfield_is_ext(field)) {",
          "content_same": false
        },
        {
          "line": 3570,
          "old_api": null,
          "new_api": "dfield_set_ext",
          "old_text": null,
          "new_text": "dfield_set_ext(field)",
          "old_line_content": "\treturn(n_pushed);",
          "new_line_content": "\t\t\t\tdfield_set_ext(field);",
          "content_same": false
        },
        {
          "line": 4081,
          "old_api": null,
          "new_api": "ut_ad",
          "old_text": null,
          "new_text": "ut_ad(!page_zip)",
          "old_line_content": "\t\tbuf_block_t*\text_block;",
          "new_line_content": "\t\tut_ad(!page_zip);",
          "content_same": false
        },
        {
          "line": 4599,
          "old_api": null,
          "new_api": "mem_heap_alloc",
          "old_text": null,
          "new_text": "mem_heap_alloc(heap, local_len + extern_len)",
          "old_line_content": "\t\t\t\t\t\t\t      zip_size,",
          "new_line_content": "\tbuf = mem_heap_alloc(heap, local_len + extern_len);",
          "content_same": false
        },
        {
          "line": 4601,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(buf, data, local_len)",
          "old_line_content": "\t\t\t\t\t\t\t      page_no, offset);",
          "new_line_content": "\tmemcpy(buf, data, local_len);",
          "content_same": false
        },
        {
          "line": 4603,
          "old_api": null,
          "new_api": "btr_copy_externally_stored_field_prefix_low",
          "old_text": null,
          "new_text": "btr_copy_externally_stored_field_prefix_low(buf + local_len,\n\t\t\t\t\t\t\t      extern_len,\n\t\t\t\t\t\t\t      zip_size,\n\t\t\t\t\t\t\t      space_id,\n\t\t\t\t\t\t\t      page_no, offset)",
          "old_line_content": "\treturn(buf);",
          "new_line_content": "\t\t+ btr_copy_externally_stored_field_prefix_low(buf + local_len,",
          "content_same": false
        },
        {
          "line": 4095,
          "old_api": null,
          "new_api": "page_align",
          "old_text": null,
          "new_text": "page_align(field_ref)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\t\t page_align(field_ref)),",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 4099,
          "old_api": "mach_read_from_1",
          "new_api": null,
          "old_text": "mach_read_from_1(field_ref + BTR_EXTERN_LEN)",
          "new_text": null,
          "old_line_content": "\t\t    || (mach_read_from_1(field_ref + BTR_EXTERN_LEN)",
          "new_line_content": "#endif /* UNIV_SYNC_DEBUG */",
          "content_same": false
        },
        {
          "line": 4103,
          "old_api": "mach_read_from_1",
          "new_api": null,
          "old_text": "mach_read_from_1(field_ref + BTR_EXTERN_LEN)",
          "new_text": null,
          "old_line_content": "\t\t\t&& (mach_read_from_1(field_ref + BTR_EXTERN_LEN)",
          "new_line_content": "\t\t    page_no == FIL_NULL",
          "content_same": false
        },
        {
          "line": 4107,
          "old_api": "mtr_commit",
          "new_api": null,
          "old_text": "mtr_commit(&mtr)",
          "new_text": null,
          "old_line_content": "\t\t\tmtr_commit(&mtr);",
          "new_line_content": "\t\t    /* Rollback and inherited field */",
          "content_same": false
        },
        {
          "line": 3595,
          "old_api": "mach_read_from_4",
          "new_api": null,
          "old_text": "mach_read_from_4(blob_header + BTR_BLOB_HDR_NEXT_PAGE_NO)",
          "new_text": null,
          "old_line_content": "\treturn(mach_read_from_4(blob_header + BTR_BLOB_HDR_NEXT_PAGE_NO));",
          "new_line_content": "btr_blob_get_next_page_no(",
          "content_same": false
        },
        {
          "line": 4112,
          "old_api": "buf_page_get",
          "new_api": null,
          "old_text": "buf_page_get(space_id, ext_zip_size, page_no,\n\t\t\t\t\t RW_X_LATCH, &mtr)",
          "new_text": null,
          "old_line_content": "\t\text_block = buf_page_get(space_id, ext_zip_size, page_no,",
          "new_line_content": "\t\t\t/* Do not free */",
          "content_same": false
        },
        {
          "line": 4624,
          "old_api": "rec_offs_nth_extern",
          "new_api": null,
          "old_text": "rec_offs_nth_extern(offsets, no)",
          "new_text": null,
          "old_line_content": "\tut_a(rec_offs_nth_extern(offsets, no));",
          "new_line_content": "\tulint*\t\tlen,\t/* out: length of the field */",
          "content_same": false
        },
        {
          "line": 4115,
          "old_api": "buf_block_dbg_add_level",
          "new_api": null,
          "old_text": "buf_block_dbg_add_level(ext_block, SYNC_EXTERN_STORAGE)",
          "new_text": null,
          "old_line_content": "\t\tbuf_block_dbg_add_level(ext_block, SYNC_EXTERN_STORAGE);",
          "new_line_content": "\t\t\treturn;",
          "content_same": false
        },
        {
          "line": 4117,
          "old_api": "buf_block_get_frame",
          "new_api": null,
          "old_text": "buf_block_get_frame(ext_block)",
          "new_text": null,
          "old_line_content": "\t\tpage = buf_block_get_frame(ext_block);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3609,
          "old_api": "buf_block_get_space",
          "new_api": null,
          "old_text": "buf_block_get_space(block)",
          "new_text": null,
          "old_line_content": "\tulint\tspace\t= buf_block_get_space(block);",
          "new_line_content": "/*==========*/",
          "content_same": false
        },
        {
          "line": 4122,
          "old_api": "fil_page_get_type",
          "new_api": null,
          "old_text": "fil_page_get_type(page)",
          "new_text": null,
          "old_line_content": "\t\t\tut_a(fil_page_get_type(page) == FIL_PAGE_TYPE_ZBLOB);",
          "new_line_content": "#endif /* UNIV_SYNC_DEBUG */",
          "content_same": false
        },
        {
          "line": 4635,
          "old_api": "rec_get_nth_field",
          "new_api": null,
          "old_text": "rec_get_nth_field(rec, offsets, no, &local_len)",
          "new_text": null,
          "old_line_content": "\tdata = rec_get_nth_field(rec, offsets, no, &local_len);",
          "new_line_content": "\tfield data is stored, and the data length in addition to",
          "content_same": false
        },
        {
          "line": 3610,
          "old_api": "buf_block_get_page_no",
          "new_api": null,
          "old_text": "buf_block_get_page_no(block)",
          "new_text": null,
          "old_line_content": "\tulint\tpage_no\t= buf_block_get_page_no(block);",
          "new_line_content": "\tbuf_block_t*\tblock,\t/* in: buffer block */",
          "content_same": false
        },
        {
          "line": 4125,
          "old_api": "btr_page_free_low",
          "new_api": null,
          "old_text": "btr_page_free_low(index, ext_block, 0, &mtr)",
          "new_text": null,
          "old_line_content": "\t\t\tbtr_page_free_low(index, ext_block, 0, &mtr);",
          "new_line_content": "\t\tif (ext_zip_size) {",
          "content_same": false
        },
        {
          "line": 4637,
          "old_api": "btr_copy_externally_stored_field",
          "new_api": null,
          "old_text": "btr_copy_externally_stored_field(len, data,\n\t\t\t\t\t\tzip_size, local_len, heap)",
          "new_text": null,
          "old_line_content": "\treturn(btr_copy_externally_stored_field(len, data,",
          "new_line_content": "\tlocally to get the local record length above the 128 byte",
          "content_same": false
        },
        {
          "line": 4127,
          "old_api": "UNIV_LIKELY",
          "new_api": null,
          "old_text": "UNIV_LIKELY(page_zip != NULL)",
          "new_text": null,
          "old_line_content": "\t\t\tif (UNIV_LIKELY(page_zip != NULL)) {",
          "new_line_content": "\t\t\tin row_purge_upd_exist_or_extern(). */",
          "content_same": false
        },
        {
          "line": 3612,
          "old_api": "mtr_memo_contains",
          "new_api": null,
          "old_text": "mtr_memo_contains(mtr, block, MTR_MEMO_PAGE_X_FIX)",
          "new_text": null,
          "old_line_content": "\tut_ad(mtr_memo_contains(mtr, block, MTR_MEMO_PAGE_X_FIX));",
          "new_line_content": "\t\t\t\tif there is one */",
          "content_same": false
        },
        {
          "line": 3614,
          "old_api": "mtr_commit",
          "new_api": null,
          "old_text": "mtr_commit(mtr)",
          "new_text": null,
          "old_line_content": "\tmtr_commit(mtr);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4130,
          "old_api": "mach_write_to_4",
          "new_api": null,
          "old_text": "mach_write_to_4(field_ref + BTR_EXTERN_LEN + 4,\n\t\t\t\t\t\t0)",
          "new_text": null,
          "old_line_content": "\t\t\t\tmach_write_to_4(field_ref + BTR_EXTERN_LEN + 4,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3617,
          "old_api": "mutex_enter",
          "new_api": null,
          "old_text": "mutex_enter(&block->mutex)",
          "new_text": null,
          "old_line_content": "\tmutex_enter(&block->mutex);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4132,
          "old_api": "page_zip_write_blob_ptr",
          "new_api": null,
          "old_text": "page_zip_write_blob_ptr(page_zip, rec, index,\n\t\t\t\t\t\t\toffsets, i, &mtr)",
          "new_text": null,
          "old_line_content": "\t\t\t\tpage_zip_write_blob_ptr(page_zip, rec, index,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4135,
          "old_api": "mlog_write_ulint",
          "new_api": null,
          "old_text": "mlog_write_ulint(field_ref\n\t\t\t\t\t\t + BTR_EXTERN_PAGE_NO,\n\t\t\t\t\t\t next_page_no,\n\t\t\t\t\t\t MLOG_4BYTES, &mtr)",
          "new_text": null,
          "old_line_content": "\t\t\t\tmlog_write_ulint(field_ref",
          "new_line_content": "\t\t\t\t\t\tnext_page_no);",
          "content_same": false
        },
        {
          "line": 3624,
          "old_api": "buf_block_get_space",
          "new_api": null,
          "old_text": "buf_block_get_space(block)",
          "new_text": null,
          "old_line_content": "\t    && buf_block_get_space(block) == space",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3625,
          "old_api": "buf_block_get_page_no",
          "new_api": null,
          "old_text": "buf_block_get_page_no(block)",
          "new_text": null,
          "old_line_content": "\t    && buf_block_get_page_no(block) == page_no) {",
          "new_line_content": "\t/* Only free the block if it is still allocated to",
          "content_same": false
        },
        {
          "line": 4139,
          "old_api": "mlog_write_ulint",
          "new_api": null,
          "old_text": "mlog_write_ulint(field_ref\n\t\t\t\t\t\t + BTR_EXTERN_LEN + 4, 0,\n\t\t\t\t\t\t MLOG_4BYTES, &mtr)",
          "new_text": null,
          "old_line_content": "\t\t\t\tmlog_write_ulint(field_ref",
          "new_line_content": "\t\t\t\t\t\t\toffsets, i, &mtr);",
          "content_same": false
        },
        {
          "line": 3627,
          "old_api": "buf_LRU_free_block",
          "new_api": null,
          "old_text": "buf_LRU_free_block(&block->page, all, NULL)",
          "new_text": null,
          "old_line_content": "\t\tif (!buf_LRU_free_block(&block->page, all, NULL)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4144,
          "old_api": "mach_read_from_4",
          "new_api": null,
          "old_text": "mach_read_from_4(\n\t\t\t\tfield_ref + BTR_EXTERN_LEN + 4)",
          "new_text": null,
          "old_line_content": "\t\t\tulint\textern_len\t= mach_read_from_4(",
          "new_line_content": "\t\t\t\t\t\t MLOG_4BYTES, &mtr);",
          "content_same": false
        },
        {
          "line": 3632,
          "old_api": "buf_LRU_free_block",
          "new_api": null,
          "old_text": "buf_LRU_free_block(&block->page, FALSE, NULL)",
          "new_text": null,
          "old_line_content": "\t\t\tbuf_LRU_free_block(&block->page, FALSE, NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4146,
          "old_api": "btr_blob_get_part_len",
          "new_api": null,
          "old_text": "btr_blob_get_part_len(\n\t\t\t\tpage + FIL_PAGE_DATA)",
          "new_text": null,
          "old_line_content": "\t\t\tulint\tpart_len\t= btr_blob_get_part_len(",
          "new_line_content": "\t\t\t\t\t\t + BTR_EXTERN_LEN + 4, 0,",
          "content_same": false
        },
        {
          "line": 3636,
          "old_api": "mutex_exit",
          "new_api": null,
          "old_text": "mutex_exit(&buf_pool->mutex)",
          "new_text": null,
          "old_line_content": "\tmutex_exit(&buf_pool->mutex);",
          "new_line_content": "\t\t\tif the whole block cannot be deallocted. */",
          "content_same": false
        },
        {
          "line": 4149,
          "old_api": "fil_page_get_type",
          "new_api": null,
          "old_text": "fil_page_get_type(page)",
          "new_text": null,
          "old_line_content": "\t\t\tut_a(fil_page_get_type(page) == FIL_PAGE_TYPE_BLOB);",
          "new_line_content": "\t\t} else {",
          "content_same": false
        },
        {
          "line": 3637,
          "old_api": "mutex_exit",
          "new_api": null,
          "old_text": "mutex_exit(&block->mutex)",
          "new_text": null,
          "old_line_content": "\tmutex_exit(&block->mutex);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4151,
          "old_api": "ut_a",
          "new_api": null,
          "old_text": "ut_a(extern_len >= part_len)",
          "new_text": null,
          "old_line_content": "\t\t\tut_a(extern_len >= part_len);",
          "new_line_content": "\t\t\t\tfield_ref + BTR_EXTERN_LEN + 4);",
          "content_same": false
        },
        {
          "line": 4153,
          "old_api": "mach_read_from_4",
          "new_api": null,
          "old_text": "mach_read_from_4(\n\t\t\t\tpage + FIL_PAGE_DATA\n\t\t\t\t+ BTR_BLOB_HDR_NEXT_PAGE_NO)",
          "new_text": null,
          "old_line_content": "\t\t\tnext_page_no = mach_read_from_4(",
          "new_line_content": "\t\t\t\tpage + FIL_PAGE_DATA);",
          "content_same": false
        },
        {
          "line": 4161,
          "old_api": "page_get_space_id",
          "new_api": null,
          "old_text": "page_get_space_id(page)",
          "new_text": null,
          "old_line_content": "\t\t\tut_a(space_id == page_get_space_id(page));",
          "new_line_content": "\t\t\t\t+ BTR_BLOB_HDR_NEXT_PAGE_NO);",
          "content_same": false
        },
        {
          "line": 4162,
          "old_api": "page_get_page_no",
          "new_api": null,
          "old_text": "page_get_page_no(page)",
          "new_text": null,
          "old_line_content": "\t\t\tut_a(page_no == page_get_page_no(page));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4164,
          "old_api": "btr_page_free_low",
          "new_api": null,
          "old_text": "btr_page_free_low(index, ext_block, 0, &mtr)",
          "new_text": null,
          "old_line_content": "\t\t\tbtr_page_free_low(index, ext_block, 0, &mtr);",
          "new_line_content": "\t\t\tbecause we did not store it on the page (we save the",
          "content_same": false
        },
        {
          "line": 4166,
          "old_api": "mlog_write_ulint",
          "new_api": null,
          "old_text": "mlog_write_ulint(field_ref + BTR_EXTERN_PAGE_NO,\n\t\t\t\t\t next_page_no,\n\t\t\t\t\t MLOG_4BYTES, &mtr)",
          "new_text": null,
          "old_line_content": "\t\t\tmlog_write_ulint(field_ref + BTR_EXTERN_PAGE_NO,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4169,
          "old_api": "mlog_write_ulint",
          "new_api": null,
          "old_text": "mlog_write_ulint(field_ref + BTR_EXTERN_LEN + 4,\n\t\t\t\t\t extern_len - part_len,\n\t\t\t\t\t MLOG_4BYTES, &mtr)",
          "new_text": null,
          "old_line_content": "\t\t\tmlog_write_ulint(field_ref + BTR_EXTERN_LEN + 4,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4173,
          "old_api": "ut_a",
          "new_api": null,
          "old_text": "ut_a(extern_len - part_len == 0)",
          "new_text": null,
          "old_line_content": "\t\t\t\tut_a(extern_len - part_len == 0);",
          "new_line_content": "\t\t\t\t\t next_page_no,",
          "content_same": false
        },
        {
          "line": 4177,
          "old_api": "ut_a",
          "new_api": null,
          "old_text": "ut_a(next_page_no == FIL_NULL)",
          "new_text": null,
          "old_line_content": "\t\t\t\tut_a(next_page_no == FIL_NULL);",
          "new_line_content": "\t\t\t\t\t MLOG_4BYTES, &mtr);",
          "content_same": false
        },
        {
          "line": 4182,
          "old_api": "btr_blob_free",
          "new_api": null,
          "old_text": "btr_blob_free(ext_block, TRUE, &mtr)",
          "new_text": null,
          "old_line_content": "\t\tbtr_blob_free(ext_block, TRUE, &mtr);",
          "new_line_content": "\t\t\tif (extern_len - part_len == 0) {",
          "content_same": false
        },
        {
          "line": 3679,
          "old_api": "rec_offs_validate",
          "new_api": null,
          "old_text": "rec_offs_validate(rec, index, offsets)",
          "new_text": null,
          "old_line_content": "\tut_ad(rec_offs_validate(rec, index, offsets));",
          "new_line_content": "\tulint\ti;",
          "content_same": false
        },
        {
          "line": 3680,
          "old_api": "dict_index_get_lock",
          "new_api": null,
          "old_text": "dict_index_get_lock(index)",
          "new_text": null,
          "old_line_content": "\tut_ad(mtr_memo_contains(local_mtr, dict_index_get_lock(index),",
          "new_line_content": "\tmtr_t\tmtr;",
          "content_same": false
        },
        {
          "line": 3682,
          "old_api": "mtr_memo_contains",
          "new_api": null,
          "old_text": "mtr_memo_contains(local_mtr, rec_block, MTR_MEMO_PAGE_X_FIX)",
          "new_text": null,
          "old_line_content": "\tut_ad(mtr_memo_contains(local_mtr, rec_block, MTR_MEMO_PAGE_X_FIX));",
          "new_line_content": "\tpage_zip_des_t*\tpage_zip;",
          "content_same": false
        },
        {
          "line": 3683,
          "old_api": "page_align",
          "new_api": null,
          "old_text": "page_align(rec)",
          "new_text": null,
          "old_line_content": "\tut_ad(buf_block_get_frame(rec_block) == page_align(rec));",
          "new_line_content": "\tz_stream c_stream;",
          "content_same": false
        },
        {
          "line": 3684,
          "old_api": "dict_index_is_clust",
          "new_api": null,
          "old_text": "dict_index_is_clust(index)",
          "new_text": null,
          "old_line_content": "\tut_a(dict_index_is_clust(index));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3687,
          "old_api": "dict_table_zip_size",
          "new_api": null,
          "old_text": "dict_table_zip_size(index->table)",
          "new_text": null,
          "old_line_content": "\tut_a(dict_table_zip_size(index->table)",
          "new_line_content": "\t\t\t\tMTR_MEMO_X_LOCK));",
          "content_same": false
        },
        {
          "line": 3691,
          "old_api": "buf_block_get_zip_size",
          "new_api": null,
          "old_text": "buf_block_get_zip_size(rec_block)",
          "new_text": null,
          "old_line_content": "\tzip_size = buf_block_get_zip_size(rec_block);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3695,
          "old_api": "UNIV_LIKELY_NULL",
          "new_api": null,
          "old_text": "UNIV_LIKELY_NULL(page_zip)",
          "new_text": null,
          "old_line_content": "\tif (UNIV_LIKELY_NULL(page_zip)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4208,
          "old_api": "rec_offs_validate",
          "new_api": null,
          "old_text": "rec_offs_validate(rec, index, offsets)",
          "new_text": null,
          "old_line_content": "\tut_ad(rec_offs_validate(rec, index, offsets));",
          "new_line_content": "\t\t\t\tan X-latch to record page and to the index",
          "content_same": false
        },
        {
          "line": 4209,
          "old_api": "mtr_memo_contains_page",
          "new_api": null,
          "old_text": "mtr_memo_contains_page(mtr, rec, MTR_MEMO_PAGE_X_FIX)",
          "new_text": null,
          "old_line_content": "\tut_ad(mtr_memo_contains_page(mtr, rec, MTR_MEMO_PAGE_X_FIX));",
          "new_line_content": "\t\t\t\ttree */",
          "content_same": false
        },
        {
          "line": 4212,
          "old_api": "rec_offs_comp",
          "new_api": null,
          "old_text": "rec_offs_comp(offsets)",
          "new_text": null,
          "old_line_content": "\tut_ad(dict_table_is_comp(index->table) == !!rec_offs_comp(offsets));",
          "new_line_content": "\tulint\ti;",
          "content_same": false
        },
        {
          "line": 4213,
          "old_api": "rec_offs_n_fields",
          "new_api": null,
          "old_text": "rec_offs_n_fields(offsets)",
          "new_text": null,
          "old_line_content": "\tn_fields = rec_offs_n_fields(offsets);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3703,
          "old_api": "mem_heap_create",
          "new_api": null,
          "old_text": "mem_heap_create(250000)",
          "new_text": null,
          "old_line_content": "\t\theap = mem_heap_create(250000);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4216,
          "old_api": "rec_offs_nth_extern",
          "new_api": null,
          "old_text": "rec_offs_nth_extern(offsets, i)",
          "new_text": null,
          "old_line_content": "\t\tif (rec_offs_nth_extern(offsets, i)) {",
          "new_line_content": "\t/* Free possible externally stored fields in the record */",
          "content_same": false
        },
        {
          "line": 3704,
          "old_api": "page_zip_set_alloc",
          "new_api": null,
          "old_text": "page_zip_set_alloc(&c_stream, heap)",
          "new_text": null,
          "old_line_content": "\t\tpage_zip_set_alloc(&c_stream, heap);",
          "new_line_content": "\t\t/* Zlib deflate needs 128 kilobytes for the default",
          "content_same": false
        },
        {
          "line": 3706,
          "old_api": "deflateInit2",
          "new_api": null,
          "old_text": "deflateInit2(&c_stream, Z_DEFAULT_COMPRESSION,\n\t\t\t\t   Z_DEFLATED, 15, 7, Z_DEFAULT_STRATEGY)",
          "new_text": null,
          "old_line_content": "\t\terr = deflateInit2(&c_stream, Z_DEFAULT_COMPRESSION,",
          "new_line_content": "\t\tkilobytes for small objects.  We use reduced memLevel",
          "content_same": false
        },
        {
          "line": 4220,
          "old_api": "ut_a",
          "new_api": null,
          "old_text": "ut_a(len >= BTR_EXTERN_FIELD_REF_SIZE)",
          "new_text": null,
          "old_line_content": "\t\t\tut_a(len >= BTR_EXTERN_FIELD_REF_SIZE);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3708,
          "old_api": "ut_a",
          "new_api": null,
          "old_text": "ut_a(err == Z_OK)",
          "new_text": null,
          "old_line_content": "\t\tut_a(err == Z_OK);",
          "new_line_content": "\t\theap, hoping to avoid memory fragmentation. */",
          "content_same": false
        },
        {
          "line": 3715,
          "old_api": "rec_offs_nth_extern",
          "new_api": null,
          "old_text": "rec_offs_nth_extern(offsets,\n\t\t\t\t\t  big_rec_vec->fields[i].field_no)",
          "new_text": null,
          "old_line_content": "\t\tut_ad(rec_offs_nth_extern(offsets,",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 3719,
          "old_api": "rec_get_nth_field",
          "new_api": null,
          "old_text": "rec_get_nth_field(\n\t\t\t\trec, offsets, big_rec_vec->fields[i].field_no,\n\t\t\t\t&local_len)",
          "new_text": null,
          "old_line_content": "\t\t\tfield_ref = rec_get_nth_field(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3722,
          "old_api": "ut_a",
          "new_api": null,
          "old_text": "ut_a(local_len >= BTR_EXTERN_FIELD_REF_SIZE)",
          "new_text": null,
          "old_line_content": "\t\t\tut_a(local_len >= BTR_EXTERN_FIELD_REF_SIZE);",
          "new_line_content": "\t\t\t\t\t  big_rec_vec->fields[i].field_no));",
          "content_same": false
        },
        {
          "line": 3732,
          "old_api": "UNIV_LIKELY_NULL",
          "new_api": null,
          "old_text": "UNIV_LIKELY_NULL(page_zip)",
          "new_text": null,
          "old_line_content": "\t\tif (UNIV_LIKELY_NULL(page_zip)) {",
          "new_line_content": "\t\textern_len = big_rec_vec->fields[i].len;",
          "content_same": false
        },
        {
          "line": 3733,
          "old_api": "deflateReset",
          "new_api": null,
          "old_text": "deflateReset(&c_stream)",
          "new_text": null,
          "old_line_content": "\t\t\tint\terr = deflateReset(&c_stream);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4250,
          "old_api": "rec_offs_validate",
          "new_api": null,
          "old_text": "rec_offs_validate(rec, index, offsets)",
          "new_text": null,
          "old_line_content": "\tut_ad(rec_offs_validate(rec, index, offsets));",
          "new_line_content": "\tmtr_t*\t\tmtr)\t/* in: mini-transaction handle which contains",
          "content_same": false
        },
        {
          "line": 4251,
          "old_api": "mtr_memo_contains_page",
          "new_api": null,
          "old_text": "mtr_memo_contains_page(mtr, rec, MTR_MEMO_PAGE_X_FIX)",
          "new_text": null,
          "old_line_content": "\tut_ad(mtr_memo_contains_page(mtr, rec, MTR_MEMO_PAGE_X_FIX));",
          "new_line_content": "\t\t\t\tan X-latch to record page and to the tree */",
          "content_same": false
        },
        {
          "line": 4255,
          "old_api": "upd_get_n_fields",
          "new_api": null,
          "old_text": "upd_get_n_fields(update)",
          "new_text": null,
          "old_line_content": "\tn_fields = upd_get_n_fields(update);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3744,
          "old_api": "mtr_start",
          "new_api": null,
          "old_text": "mtr_start(&mtr)",
          "new_text": null,
          "old_line_content": "\t\t\tmtr_start(&mtr);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 4258,
          "old_api": "upd_get_nth_field",
          "new_api": null,
          "old_text": "upd_get_nth_field(update, i)",
          "new_text": null,
          "old_line_content": "\t\tconst upd_field_t* ufield = upd_get_nth_field(update, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4260,
          "old_api": "rec_offs_nth_extern",
          "new_api": null,
          "old_text": "rec_offs_nth_extern(offsets, ufield->field_no)",
          "new_text": null,
          "old_line_content": "\t\tif (rec_offs_nth_extern(offsets, ufield->field_no)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4262,
          "old_api": "rec_get_nth_field",
          "new_api": null,
          "old_text": "rec_get_nth_field(\n\t\t\t\trec, offsets, ufield->field_no, &len)",
          "new_text": null,
          "old_line_content": "\t\t\tbyte*\tdata = rec_get_nth_field(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3752,
          "old_api": "btr_page_alloc",
          "new_api": null,
          "old_text": "btr_page_alloc(index, hint_page_no,\n\t\t\t\t\t       FSP_NO_DIR, 0, &mtr)",
          "new_text": null,
          "old_line_content": "\t\t\tblock = btr_page_alloc(index, hint_page_no,",
          "new_line_content": "\t\t\tif (prev_page_no == FIL_NULL) {",
          "content_same": false
        },
        {
          "line": 3754,
          "old_api": "UNIV_UNLIKELY",
          "new_api": null,
          "old_text": "UNIV_UNLIKELY(block == NULL)",
          "new_text": null,
          "old_line_content": "\t\t\tif (UNIV_UNLIKELY(block == NULL)) {",
          "new_line_content": "\t\t\t} else {",
          "content_same": false
        },
        {
          "line": 3756,
          "old_api": "mtr_commit",
          "new_api": null,
          "old_text": "mtr_commit(&mtr)",
          "new_text": null,
          "old_line_content": "\t\t\t\tmtr_commit(&mtr);",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 3759,
          "old_api": "deflateEnd",
          "new_api": null,
          "old_text": "deflateEnd(&c_stream)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tdeflateEnd(&c_stream);",
          "new_line_content": "\t\t\t\t\t       FSP_NO_DIR, 0, &mtr);",
          "content_same": false
        },
        {
          "line": 3767,
          "old_api": "buf_block_get_frame",
          "new_api": null,
          "old_text": "buf_block_get_frame(block)",
          "new_text": null,
          "old_line_content": "\t\t\tpage = buf_block_get_frame(block);",
          "new_line_content": "\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 3777,
          "old_api": "buf_block_dbg_add_level",
          "new_api": null,
          "old_text": "buf_block_dbg_add_level(prev_block,\n\t\t\t\t\t\t\tSYNC_EXTERN_STORAGE)",
          "new_text": null,
          "old_line_content": "\t\t\t\tbuf_block_dbg_add_level(prev_block,",
          "new_line_content": "\t\t\t\tpage_t*\t\tprev_page;",
          "content_same": false
        },
        {
          "line": 3780,
          "old_api": "buf_block_get_frame",
          "new_api": null,
          "old_text": "buf_block_get_frame(prev_block)",
          "new_text": null,
          "old_line_content": "\t\t\t\tprev_page = buf_block_get_frame(prev_block);",
          "new_line_content": "\t\t\t\t\t\t\t  prev_page_no,",
          "content_same": false
        },
        {
          "line": 3782,
          "old_api": "UNIV_LIKELY_NULL",
          "new_api": null,
          "old_text": "UNIV_LIKELY_NULL(page_zip)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (UNIV_LIKELY_NULL(page_zip)) {",
          "new_line_content": "#ifdef UNIV_SYNC_DEBUG",
          "content_same": false
        },
        {
          "line": 4298,
          "old_api": "mtr_start",
          "new_api": null,
          "old_text": "mtr_start(&mtr)",
          "new_text": null,
          "old_line_content": "\t\tmtr_start(&mtr);",
          "new_line_content": "\t\tbuf_block_t*\tblock;",
          "content_same": false
        },
        {
          "line": 4300,
          "old_api": "buf_page_get",
          "new_api": null,
          "old_text": "buf_page_get(space_id, 0, page_no, RW_S_LATCH, &mtr)",
          "new_text": null,
          "old_line_content": "\t\tblock = buf_page_get(space_id, 0, page_no, RW_S_LATCH, &mtr);",
          "new_line_content": "\t\tconst byte*\tblob_header;",
          "content_same": false
        },
        {
          "line": 4302,
          "old_api": "buf_block_dbg_add_level",
          "new_api": null,
          "old_text": "buf_block_dbg_add_level(block, SYNC_EXTERN_STORAGE)",
          "new_text": null,
          "old_line_content": "\t\tbuf_block_dbg_add_level(block, SYNC_EXTERN_STORAGE);",
          "new_line_content": "\t\tulint\t\tcopy_len;",
          "content_same": false
        },
        {
          "line": 3791,
          "old_api": "mlog_write_ulint",
          "new_api": null,
          "old_text": "mlog_write_ulint(\n\t\t\t\t\t\tprev_page + FIL_PAGE_DATA\n\t\t\t\t\t\t+ BTR_BLOB_HDR_NEXT_PAGE_NO,\n\t\t\t\t\t\tpage_no, MLOG_4BYTES, &mtr)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tmlog_write_ulint(",
          "new_line_content": "\t\t\t\t\t\tpage_no, MLOG_4BYTES, &mtr);",
          "content_same": false
        },
        {
          "line": 4311,
          "old_api": "ut_min",
          "new_api": null,
          "old_text": "ut_min(part_len, len - copied_len)",
          "new_text": null,
          "old_line_content": "\t\tcopy_len = ut_min(part_len, len - copied_len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3799,
          "old_api": "UNIV_LIKELY_NULL",
          "new_api": null,
          "old_text": "UNIV_LIKELY_NULL(page_zip)",
          "new_text": null,
          "old_line_content": "\t\t\tif (UNIV_LIKELY_NULL(page_zip)) {",
          "new_line_content": "\t\t\t\t\t\t+ BTR_BLOB_HDR_NEXT_PAGE_NO,",
          "content_same": false
        },
        {
          "line": 4313,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(buf + copied_len,\n\t\t       blob_header + BTR_BLOB_HDR_SIZE, copy_len)",
          "new_text": null,
          "old_line_content": "\t\tmemcpy(buf + copied_len,",
          "new_line_content": "\t\tmany pages until MySQL/InnoDB 5.1.7. */",
          "content_same": false
        },
        {
          "line": 3803,
          "old_api": "mach_write_to_2",
          "new_api": null,
          "old_text": "mach_write_to_2(page + FIL_PAGE_TYPE,\n\t\t\t\t\t\tFIL_PAGE_TYPE_ZBLOB)",
          "new_text": null,
          "old_line_content": "\t\t\t\tmach_write_to_2(page + FIL_PAGE_TYPE,",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 3812,
          "old_api": "deflate",
          "new_api": null,
          "old_text": "deflate(&c_stream, Z_FINISH)",
          "new_text": null,
          "old_line_content": "\t\t\t\terr = deflate(&c_stream, Z_FINISH);",
          "new_line_content": "\t\t\t\tc_stream.next_out = page",
          "content_same": false
        },
        {
          "line": 3813,
          "old_api": "ut_a",
          "new_api": null,
          "old_text": "ut_a(err == Z_OK || err == Z_STREAM_END)",
          "new_text": null,
          "old_line_content": "\t\t\t\tut_a(err == Z_OK || err == Z_STREAM_END);",
          "new_line_content": "\t\t\t\t\t+ FIL_PAGE_DATA;",
          "content_same": false
        },
        {
          "line": 3814,
          "old_api": "ut_a",
          "new_api": null,
          "old_text": "ut_a(err == Z_STREAM_END\n\t\t\t\t     || c_stream.avail_out == 0)",
          "new_text": null,
          "old_line_content": "\t\t\t\tut_a(err == Z_STREAM_END",
          "new_line_content": "\t\t\t\tc_stream.avail_out",
          "content_same": false
        },
        {
          "line": 4330,
          "old_api": "ut_ad",
          "new_api": null,
          "old_text": "ut_ad(copied_len <= len)",
          "new_text": null,
          "old_line_content": "\t\tut_ad(copied_len <= len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3821,
          "old_api": "mlog_write_ulint",
          "new_api": null,
          "old_text": "mlog_write_ulint(page + FIL_PAGE_PREV,\n\t\t\t\t\t\t FIL_NULL, MLOG_4BYTES, &mtr)",
          "new_text": null,
          "old_line_content": "\t\t\t\tmlog_write_ulint(page + FIL_PAGE_PREV,",
          "new_line_content": "\t\t\t\t     || c_stream.avail_out == 0);",
          "content_same": false
        },
        {
          "line": 4346,
          "old_api": "ut_is_2pow",
          "new_api": null,
          "old_text": "ut_is_2pow(zip_size)",
          "new_text": null,
          "old_line_content": "\tut_ad(ut_is_2pow(zip_size));",
          "new_line_content": "\tz_stream*\td_stream,/* in/out: the decompressing stream */",
          "content_same": false
        },
        {
          "line": 4347,
          "old_api": "ut_ad",
          "new_api": null,
          "old_text": "ut_ad(zip_size >= PAGE_ZIP_MIN_SIZE)",
          "new_text": null,
          "old_line_content": "\tut_ad(zip_size >= PAGE_ZIP_MIN_SIZE);",
          "new_line_content": "\tulint\t\tzip_size,/* in: compressed BLOB page size */",
          "content_same": false
        },
        {
          "line": 4348,
          "old_api": "ut_ad",
          "new_api": null,
          "old_text": "ut_ad(zip_size <= UNIV_PAGE_SIZE)",
          "new_text": null,
          "old_line_content": "\tut_ad(zip_size <= UNIV_PAGE_SIZE);",
          "new_line_content": "\tulint\t\tspace_id,/* in: space id of the BLOB pages */",
          "content_same": false
        },
        {
          "line": 4349,
          "old_api": "ut_ad",
          "new_api": null,
          "old_text": "ut_ad(space_id)",
          "new_text": null,
          "old_line_content": "\tut_ad(space_id);",
          "new_line_content": "\tulint\t\tpage_no,/* in: page number of the first BLOB page */",
          "content_same": false
        },
        {
          "line": 3837,
          "old_api": "mlog_write_ulint",
          "new_api": null,
          "old_text": "mlog_write_ulint(page\n\t\t\t\t\t\t + FIL_PAGE_FILE_FLUSH_LSN,\n\t\t\t\t\t\t space_id,\n\t\t\t\t\t\t MLOG_4BYTES, &mtr)",
          "new_text": null,
          "old_line_content": "\t\t\t\tmlog_write_ulint(page",
          "new_line_content": "\t\t\t\tnumber of the record, because it can",
          "content_same": false
        },
        {
          "line": 3841,
          "old_api": "mlog_write_ulint",
          "new_api": null,
          "old_text": "mlog_write_ulint(page\n\t\t\t\t\t\t + FIL_PAGE_FILE_FLUSH_LSN + 4,\n\t\t\t\t\t\t rec_page_no,\n\t\t\t\t\t\t MLOG_4BYTES, &mtr)",
          "new_text": null,
          "old_line_content": "\t\t\t\tmlog_write_ulint(page",
          "new_line_content": "\t\t\t\tchange when B-tree nodes are split or",
          "content_same": false
        },
        {
          "line": 4356,
          "old_api": "buf_page_get_zip",
          "new_api": null,
          "old_text": "buf_page_get_zip(space_id, zip_size, page_no)",
          "new_text": null,
          "old_line_content": "\t\tbpage = buf_page_get_zip(space_id, zip_size, page_no);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4358,
          "old_api": "UNIV_UNLIKELY",
          "new_api": null,
          "old_text": "UNIV_UNLIKELY(!bpage)",
          "new_text": null,
          "old_line_content": "\t\tif (UNIV_UNLIKELY(!bpage)) {",
          "new_line_content": "\t\tbuf_page_t*\tbpage;",
          "content_same": false
        },
        {
          "line": 4359,
          "old_api": "ut_print_timestamp",
          "new_api": null,
          "old_text": "ut_print_timestamp(stderr)",
          "new_text": null,
          "old_line_content": "\t\t\tut_print_timestamp(stderr);",
          "new_line_content": "\t\tint\t\terr;",
          "content_same": false
        },
        {
          "line": 4360,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\n\t\t\t\t\"  InnoDB: Cannot load\"\n\t\t\t\t\" compressed BLOB\"\n\t\t\t\t\" page %lu space %lu\\n\",\n\t\t\t\t(ulong) page_no, (ulong) space_id)",
          "new_text": null,
          "old_line_content": "\t\t\tfprintf(stderr,",
          "new_line_content": "\t\tulint\t\tnext_page_no;",
          "content_same": false
        },
        {
          "line": 3850,
          "old_api": "mlog_log_string",
          "new_api": null,
          "old_text": "mlog_log_string(page + FIL_PAGE_TYPE,\n\t\t\t\t\t\tpage_zip_get_size(page_zip)\n\t\t\t\t\t\t- FIL_PAGE_TYPE,\n\t\t\t\t\t\t&mtr)",
          "new_text": null,
          "old_line_content": "\t\t\t\tmlog_log_string(page + FIL_PAGE_TYPE,",
          "new_line_content": "\t\t\t\t\t\t MLOG_4BYTES, &mtr);",
          "content_same": false
        },
        {
          "line": 3851,
          "old_api": "page_zip_get_size",
          "new_api": null,
          "old_text": "page_zip_get_size(page_zip)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tpage_zip_get_size(page_zip)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4368,
          "old_api": "fil_page_get_type",
          "new_api": null,
          "old_text": "fil_page_get_type(bpage->zip.data)",
          "new_text": null,
          "old_line_content": "\t\tif (UNIV_UNLIKELY(fil_page_get_type(bpage->zip.data)",
          "new_line_content": "\t\t\t\t\" compressed BLOB\"",
          "content_same": false
        },
        {
          "line": 4370,
          "old_api": "ut_print_timestamp",
          "new_api": null,
          "old_text": "ut_print_timestamp(stderr)",
          "new_text": null,
          "old_line_content": "\t\t\tut_print_timestamp(stderr);",
          "new_line_content": "\t\t\t\t(ulong) page_no, (ulong) space_id);",
          "content_same": false
        },
        {
          "line": 4371,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\n\t\t\t\t\"  InnoDB: Unknown type %lu of\"\n\t\t\t\t\" compressed BLOB\"\n\t\t\t\t\" page %lu space %lu\\n\",\n\t\t\t\t(ulong) fil_page_get_type(bpage->zip.data),\n\t\t\t\t(ulong) page_no, (ulong) space_id)",
          "new_text": null,
          "old_line_content": "\t\t\tfprintf(stderr,",
          "new_line_content": "\t\t\treturn;",
          "content_same": false
        },
        {
          "line": 3858,
          "old_api": "ut_ad",
          "new_api": null,
          "old_text": "ut_ad(blob_page_zip)",
          "new_text": null,
          "old_line_content": "\t\t\t\tut_ad(blob_page_zip);",
          "new_line_content": "\t\t\t\t\t\t- FIL_PAGE_TYPE,",
          "content_same": false
        },
        {
          "line": 3859,
          "old_api": "page_zip_get_size",
          "new_api": null,
          "old_text": "page_zip_get_size(blob_page_zip)",
          "new_text": null,
          "old_line_content": "\t\t\t\tut_ad(page_zip_get_size(blob_page_zip)",
          "new_line_content": "\t\t\t\t\t\t&mtr);",
          "content_same": false
        },
        {
          "line": 3860,
          "old_api": "page_zip_get_size",
          "new_api": null,
          "old_text": "page_zip_get_size(page_zip)",
          "new_text": null,
          "old_line_content": "\t\t\t\t      == page_zip_get_size(page_zip));",
          "new_line_content": "\t\t\t\t/* Copy the page to compressed storage,",
          "content_same": false
        },
        {
          "line": 4375,
          "old_api": "fil_page_get_type",
          "new_api": null,
          "old_text": "fil_page_get_type(bpage->zip.data)",
          "new_text": null,
          "old_line_content": "\t\t\t\t(ulong) fil_page_get_type(bpage->zip.data),",
          "new_line_content": "\t\t\t\t  != FIL_PAGE_TYPE_ZBLOB)) {",
          "content_same": false
        },
        {
          "line": 3861,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(blob_page_zip->data, page,\n\t\t\t\t       page_zip_get_size(page_zip))",
          "new_text": null,
          "old_line_content": "\t\t\t\tmemcpy(blob_page_zip->data, page,",
          "new_line_content": "\t\t\t\tbecause it will be flushed to disk",
          "content_same": false
        },
        {
          "line": 3862,
          "old_api": "page_zip_get_size",
          "new_api": null,
          "old_text": "page_zip_get_size(page_zip)",
          "new_text": null,
          "old_line_content": "\t\t\t\t       page_zip_get_size(page_zip));",
          "new_line_content": "\t\t\t\tfrom there. */",
          "content_same": false
        },
        {
          "line": 4380,
          "old_api": "mach_read_from_4",
          "new_api": null,
          "old_text": "mach_read_from_4(bpage->zip.data + offset)",
          "new_text": null,
          "old_line_content": "\t\tnext_page_no = mach_read_from_4(bpage->zip.data + offset);",
          "new_line_content": "\t\t\t\t\" page %lu space %lu\\n\",",
          "content_same": false
        },
        {
          "line": 3869,
          "old_api": "buf_page_get",
          "new_api": null,
          "old_text": "buf_page_get(space_id, zip_size,\n\t\t\t\t\t\t\t rec_page_no,\n\t\t\t\t\t\t\t RW_X_LATCH, &mtr)",
          "new_text": null,
          "old_line_content": "\t\t\t\trec_block = buf_page_get(space_id, zip_size,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4382,
          "old_api": "UNIV_LIKELY",
          "new_api": null,
          "old_text": "UNIV_LIKELY(offset == FIL_PAGE_NEXT)",
          "new_text": null,
          "old_line_content": "\t\tif (UNIV_LIKELY(offset == FIL_PAGE_NEXT)) {",
          "new_line_content": "\t\t\t\t(ulong) page_no, (ulong) space_id);",
          "content_same": false
        },
        {
          "line": 3873,
          "old_api": "buf_block_dbg_add_level",
          "new_api": null,
          "old_text": "buf_block_dbg_add_level(rec_block,\n\t\t\t\t\t\t\tSYNC_NO_ORDER_CHECK)",
          "new_text": null,
          "old_line_content": "\t\t\t\tbuf_block_dbg_add_level(rec_block,",
          "new_line_content": "\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 3877,
          "old_api": "mach_write_to_4",
          "new_api": null,
          "old_text": "mach_write_to_4(field_ref\n\t\t\t\t\t\t\t+ BTR_EXTERN_LEN, 0)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tmach_write_to_4(field_ref",
          "new_line_content": "\t\t\t\t\t\t\t RW_X_LATCH, &mtr);",
          "content_same": false
        },
        {
          "line": 4394,
          "old_api": "inflate",
          "new_api": null,
          "old_text": "inflate(d_stream, Z_NO_FLUSH)",
          "new_text": null,
          "old_line_content": "\t\terr = inflate(d_stream, Z_NO_FLUSH);",
          "new_line_content": "\t\t\toffset += 4;",
          "content_same": false
        },
        {
          "line": 3888,
          "old_api": "mach_write_to_4",
          "new_api": null,
          "old_text": "mach_write_to_4(field_ref\n\t\t\t\t\t\t\t+ BTR_EXTERN_SPACE_ID,\n\t\t\t\t\t\t\tspace_id)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tmach_write_to_4(field_ref",
          "new_line_content": "\t\t\t\t} else {",
          "content_same": false
        },
        {
          "line": 3892,
          "old_api": "mach_write_to_4",
          "new_api": null,
          "old_text": "mach_write_to_4(field_ref\n\t\t\t\t\t\t\t+ BTR_EXTERN_PAGE_NO,\n\t\t\t\t\t\t\tpage_no)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tmach_write_to_4(field_ref",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4408,
          "old_api": "ut_print_timestamp",
          "new_api": null,
          "old_text": "ut_print_timestamp(stderr)",
          "new_text": null,
          "old_line_content": "\t\t\tut_print_timestamp(stderr);",
          "new_line_content": "\t\t\tif (next_page_no == FIL_NULL) {",
          "content_same": false
        },
        {
          "line": 4409,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\n\t\t\t\t\"  InnoDB: inflate() of\"\n\t\t\t\t\" compressed BLOB\"\n\t\t\t\t\" page %lu space %lu returned %d\\n\",\n\t\t\t\t(ulong) page_no, (ulong) space_id,\n\t\t\t\terr)",
          "new_text": null,
          "old_line_content": "\t\t\tfprintf(stderr,",
          "new_line_content": "\t\t\t\tgoto end_of_blob;",
          "content_same": false
        },
        {
          "line": 3896,
          "old_api": "mach_write_to_4",
          "new_api": null,
          "old_text": "mach_write_to_4(field_ref\n\t\t\t\t\t\t\t+ BTR_EXTERN_OFFSET,\n\t\t\t\t\t\t\tFIL_PAGE_NEXT)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tmach_write_to_4(field_ref",
          "new_line_content": "\t\t\t\t\t\t\tspace_id);",
          "content_same": false
        },
        {
          "line": 3901,
          "old_api": "page_zip_write_blob_ptr",
          "new_api": null,
          "old_text": "page_zip_write_blob_ptr(\n\t\t\t\t\tpage_zip, rec, index, offsets,\n\t\t\t\t\tbig_rec_vec->fields[i].field_no, &mtr)",
          "new_text": null,
          "old_line_content": "\t\t\t\tpage_zip_write_blob_ptr(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4421,
          "old_api": "ut_print_timestamp",
          "new_api": null,
          "old_text": "ut_print_timestamp(stderr)",
          "new_text": null,
          "old_line_content": "\t\t\t\tut_print_timestamp(stderr);",
          "new_line_content": "\t\tcase Z_BUF_ERROR:",
          "content_same": false
        },
        {
          "line": 4422,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\n\t\t\t\t\t\"  InnoDB: unexpected end of\"\n\t\t\t\t\t\" compressed BLOB\"\n\t\t\t\t\t\" page %lu space %lu\\n\",\n\t\t\t\t\t(ulong) page_no,\n\t\t\t\t\t(ulong) space_id)",
          "new_text": null,
          "old_line_content": "\t\t\t\tfprintf(stderr,",
          "new_line_content": "\t\t\tgoto end_of_blob;",
          "content_same": false
        },
        {
          "line": 3910,
          "old_api": "btr_blob_free",
          "new_api": null,
          "old_text": "btr_blob_free(block, FALSE, &mtr)",
          "new_text": null,
          "old_line_content": "\t\t\t\tbtr_blob_free(block, FALSE, &mtr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4429,
          "old_api": "inflate",
          "new_api": null,
          "old_text": "inflate(d_stream, Z_FINISH)",
          "new_text": null,
          "old_line_content": "\t\t\t\terr = inflate(d_stream, Z_FINISH);",
          "new_line_content": "\t\t\t\t\t\"  InnoDB: unexpected end of\"",
          "content_same": false
        },
        {
          "line": 3408,
          "old_api": "rec_offs_n_fields",
          "new_api": null,
          "old_text": "rec_offs_n_fields(offsets)",
          "new_text": null,
          "old_line_content": "\tn = rec_offs_n_fields(offsets);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3411,
          "old_api": "rec_offs_nth_extern",
          "new_api": null,
          "old_text": "rec_offs_nth_extern(offsets, i)",
          "new_text": null,
          "old_line_content": "\t\tif (rec_offs_nth_extern(offsets, i)) {",
          "new_line_content": "\t\treturn;",
          "content_same": false
        },
        {
          "line": 4440,
          "old_api": "buf_page_release_zip",
          "new_api": null,
          "old_text": "buf_page_release_zip(bpage)",
          "new_text": null,
          "old_line_content": "\t\t\tbuf_page_release_zip(bpage);",
          "new_line_content": "\t\t\t\tdefault:",
          "content_same": false
        },
        {
          "line": 3416,
          "old_api": "upd_get_n_fields",
          "new_api": null,
          "old_text": "upd_get_n_fields(update)",
          "new_text": null,
          "old_line_content": "\t\t\t\tfor (j = 0; j < upd_get_n_fields(update);",
          "new_line_content": "\tfor (i = 0; i < n; i++) {",
          "content_same": false
        },
        {
          "line": 3418,
          "old_api": "upd_get_nth_field",
          "new_api": null,
          "old_text": "upd_get_nth_field(update, j)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tif (upd_get_nth_field(update, j)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4444,
          "old_api": "buf_page_release_zip",
          "new_api": null,
          "old_text": "buf_page_release_zip(bpage)",
          "new_text": null,
          "old_line_content": "\t\tbuf_page_release_zip(bpage);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3932,
          "old_api": "mlog_write_string",
          "new_api": null,
          "old_text": "mlog_write_string(page + FIL_PAGE_DATA\n\t\t\t\t\t\t  + BTR_BLOB_HDR_SIZE,\n\t\t\t\t\t\t  (const byte*)\n\t\t\t\t\t\t  big_rec_vec->fields[i].data\n\t\t\t\t\t\t  + big_rec_vec->fields[i].len\n\t\t\t\t\t\t  - extern_len,\n\t\t\t\t\t\t  store_len, &mtr)",
          "new_text": null,
          "old_line_content": "\t\t\t\tmlog_write_string(page + FIL_PAGE_DATA",
          "new_line_content": "\t\t\t\t\t\t- BTR_BLOB_HDR_SIZE",
          "content_same": false
        },
        {
          "line": 3426,
          "old_api": "btr_cur_set_ownership_of_extern_field",
          "new_api": null,
          "old_text": "btr_cur_set_ownership_of_extern_field(\n\t\t\t\tpage_zip, rec, index, offsets, i, FALSE, mtr)",
          "new_text": null,
          "old_line_content": "\t\t\tbtr_cur_set_ownership_of_extern_field(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3939,
          "old_api": "mlog_write_ulint",
          "new_api": null,
          "old_text": "mlog_write_ulint(page + FIL_PAGE_DATA\n\t\t\t\t\t\t + BTR_BLOB_HDR_PART_LEN,\n\t\t\t\t\t\t store_len, MLOG_4BYTES, &mtr)",
          "new_text": null,
          "old_line_content": "\t\t\t\tmlog_write_ulint(page + FIL_PAGE_DATA",
          "new_line_content": "\t\t\t\t\t\t  + BTR_BLOB_HDR_SIZE,",
          "content_same": false
        },
        {
          "line": 3942,
          "old_api": "mlog_write_ulint",
          "new_api": null,
          "old_text": "mlog_write_ulint(page + FIL_PAGE_DATA\n\t\t\t\t\t\t + BTR_BLOB_HDR_NEXT_PAGE_NO,\n\t\t\t\t\t\t FIL_NULL, MLOG_4BYTES, &mtr)",
          "new_text": null,
          "old_line_content": "\t\t\t\tmlog_write_ulint(page + FIL_PAGE_DATA",
          "new_line_content": "\t\t\t\t\t\t  + big_rec_vec->fields[i].len",
          "content_same": false
        },
        {
          "line": 3952,
          "old_api": "buf_block_dbg_add_level",
          "new_api": null,
          "old_text": "buf_block_dbg_add_level(rec_block,\n\t\t\t\t\t\t\tSYNC_NO_ORDER_CHECK)",
          "new_text": null,
          "old_line_content": "\t\t\t\tbuf_block_dbg_add_level(rec_block,",
          "new_line_content": "\t\t\t\textern_len -= store_len;",
          "content_same": false
        },
        {
          "line": 3956,
          "old_api": "mlog_write_ulint",
          "new_api": null,
          "old_text": "mlog_write_ulint(field_ref + BTR_EXTERN_LEN, 0,\n\t\t\t\t\t\t MLOG_4BYTES, &mtr)",
          "new_text": null,
          "old_line_content": "\t\t\t\tmlog_write_ulint(field_ref + BTR_EXTERN_LEN, 0,",
          "new_line_content": "\t\t\t\t\t\t\t RW_X_LATCH, &mtr);",
          "content_same": false
        },
        {
          "line": 4470,
          "old_api": "UNIV_UNLIKELY",
          "new_api": null,
          "old_text": "UNIV_UNLIKELY(len == 0)",
          "new_text": null,
          "old_line_content": "\tif (UNIV_UNLIKELY(len == 0)) {",
          "new_line_content": "\tulint\t\tzip_size,/* in: nonzero=compressed BLOB page size,",
          "content_same": false
        },
        {
          "line": 3448,
          "old_api": "dtuple_get_n_fields",
          "new_api": null,
          "old_text": "dtuple_get_n_fields(entry)",
          "new_text": null,
          "old_line_content": "\tfor (i = 0; i < dtuple_get_n_fields(entry); i++) {",
          "new_line_content": "\tdtuple_t*\tentry,\t\t/* in/out: updated entry to be",
          "content_same": false
        },
        {
          "line": 4474,
          "old_api": "UNIV_UNLIKELY",
          "new_api": null,
          "old_text": "UNIV_UNLIKELY(zip_size)",
          "new_text": null,
          "old_line_content": "\tif (UNIV_UNLIKELY(zip_size)) {",
          "new_line_content": "\tulint\t\toffset)\t/* in: offset on the first BLOB page */",
          "content_same": false
        },
        {
          "line": 3450,
          "old_api": "dtuple_get_nth_field",
          "new_api": null,
          "old_text": "dtuple_get_nth_field(entry, i)",
          "new_text": null,
          "old_line_content": "\t\tdfield_t*\tdfield = dtuple_get_nth_field(entry, i);",
          "new_line_content": "\tconst upd_t*\tupdate)\t\t/* in: update vector */",
          "content_same": false
        },
        {
          "line": 3965,
          "old_api": "mlog_write_ulint",
          "new_api": null,
          "old_text": "mlog_write_ulint(field_ref\n\t\t\t\t\t\t\t + BTR_EXTERN_SPACE_ID,\n\t\t\t\t\t\t\t space_id,\n\t\t\t\t\t\t\t MLOG_4BYTES, &mtr)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tmlog_write_ulint(field_ref",
          "new_line_content": "\t\t\t\t\t\t + BTR_EXTERN_LEN + 4,",
          "content_same": false
        },
        {
          "line": 3455,
          "old_api": "dfield_is_ext",
          "new_api": null,
          "old_text": "dfield_is_ext(dfield)",
          "new_text": null,
          "old_line_content": "\t\tif (!dfield_is_ext(dfield)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4481,
          "old_api": "mem_heap_create",
          "new_api": null,
          "old_text": "mem_heap_create(40000)",
          "new_text": null,
          "old_line_content": "\t\theap = mem_heap_create(40000);",
          "new_line_content": "\t\tint\t\terr;",
          "content_same": false
        },
        {
          "line": 4482,
          "old_api": "page_zip_set_alloc",
          "new_api": null,
          "old_text": "page_zip_set_alloc(&d_stream, heap)",
          "new_text": null,
          "old_line_content": "\t\tpage_zip_set_alloc(&d_stream, heap);",
          "new_line_content": "\t\tz_stream\td_stream;",
          "content_same": false
        },
        {
          "line": 3970,
          "old_api": "mlog_write_ulint",
          "new_api": null,
          "old_text": "mlog_write_ulint(field_ref\n\t\t\t\t\t\t\t + BTR_EXTERN_PAGE_NO,\n\t\t\t\t\t\t\t page_no,\n\t\t\t\t\t\t\t MLOG_4BYTES, &mtr)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tmlog_write_ulint(field_ref",
          "new_line_content": "\t\t\t\tif (prev_page_no == FIL_NULL) {",
          "content_same": false
        },
        {
          "line": 4484,
          "old_api": "inflateInit",
          "new_api": null,
          "old_text": "inflateInit(&d_stream)",
          "new_text": null,
          "old_line_content": "\t\terr = inflateInit(&d_stream);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4485,
          "old_api": "ut_a",
          "new_api": null,
          "old_text": "ut_a(err == Z_OK)",
          "new_text": null,
          "old_line_content": "\t\tut_a(err == Z_OK);",
          "new_line_content": "\t\t/* Zlib inflate needs 32 kilobytes for the default",
          "content_same": false
        },
        {
          "line": 3462,
          "old_api": "upd_get_nth_field",
          "new_api": null,
          "old_text": "upd_get_nth_field(update, j)",
          "new_text": null,
          "old_line_content": "\t\t\tif (upd_get_nth_field(update, j)->field_no == i) {",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 3975,
          "old_api": "mlog_write_ulint",
          "new_api": null,
          "old_text": "mlog_write_ulint(field_ref\n\t\t\t\t\t\t\t + BTR_EXTERN_OFFSET,\n\t\t\t\t\t\t\t FIL_PAGE_DATA,\n\t\t\t\t\t\t\t MLOG_4BYTES, &mtr)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tmlog_write_ulint(field_ref",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4493,
          "old_api": "inflateEnd",
          "new_api": null,
          "old_text": "inflateEnd(&d_stream)",
          "new_text": null,
          "old_line_content": "\t\tinflateEnd(&d_stream);",
          "new_line_content": "\t\td_stream.next_out = buf;",
          "content_same": false
        },
        {
          "line": 4494,
          "old_api": "mem_heap_free",
          "new_api": null,
          "old_text": "mem_heap_free(heap)",
          "new_text": null,
          "old_line_content": "\t\tmem_heap_free(heap);",
          "new_line_content": "\t\td_stream.avail_out = len;",
          "content_same": false
        },
        {
          "line": 3469,
          "old_api": "dfield_get_len",
          "new_api": null,
          "old_text": "dfield_get_len(dfield)",
          "new_text": null,
          "old_line_content": "\t\tlen = dfield_get_len(dfield);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3983,
          "old_api": "mtr_commit",
          "new_api": null,
          "old_text": "mtr_commit(&mtr)",
          "new_text": null,
          "old_line_content": "\t\t\t\tmtr_commit(&mtr);",
          "new_line_content": "\t\t\t\t\t\t\t FIL_PAGE_DATA,",
          "content_same": false
        },
        {
          "line": 3992,
          "old_api": "UNIV_LIKELY_NULL",
          "new_api": null,
          "old_text": "UNIV_LIKELY_NULL(page_zip)",
          "new_text": null,
          "old_line_content": "\tif (UNIV_LIKELY_NULL(page_zip)) {",
          "new_line_content": "\t\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 3993,
          "old_api": "deflateEnd",
          "new_api": null,
          "old_text": "deflateEnd(&c_stream)",
          "new_text": null,
          "old_line_content": "\t\tdeflateEnd(&c_stream);",
          "new_line_content": "\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 3994,
          "old_api": "mem_heap_free",
          "new_api": null,
          "old_text": "mem_heap_free(heap)",
          "new_text": null,
          "old_line_content": "\t\tmem_heap_free(heap);",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 3496,
          "old_api": "rec_get_node_ptr_flag",
          "new_api": null,
          "old_text": "rec_get_node_ptr_flag(rec)",
          "new_text": null,
          "old_line_content": "\tut_ad(!rec_offs_comp(offsets) || !rec_get_node_ptr_flag(rec));",
          "new_line_content": "\tconst ulint*\toffsets,/* in: array returned by rec_get_offsets() */",
          "content_same": false
        },
        {
          "line": 3497,
          "old_api": "rec_offs_n_fields",
          "new_api": null,
          "old_text": "rec_offs_n_fields(offsets)",
          "new_text": null,
          "old_line_content": "\tn = rec_offs_n_fields(offsets);",
          "new_line_content": "\tmtr_t*\t\tmtr)\t/* in: mtr, or NULL if not logged */",
          "content_same": false
        },
        {
          "line": 3499,
          "old_api": "rec_offs_any_extern",
          "new_api": null,
          "old_text": "rec_offs_any_extern(offsets)",
          "new_text": null,
          "old_line_content": "\tif (!rec_offs_any_extern(offsets)) {",
          "new_line_content": "\tulint\tn;",
          "content_same": false
        },
        {
          "line": 4525,
          "old_api": "ut_a",
          "new_api": null,
          "old_text": "ut_a(local_len >= BTR_EXTERN_FIELD_REF_SIZE)",
          "new_text": null,
          "old_line_content": "\tut_a(local_len >= BTR_EXTERN_FIELD_REF_SIZE);",
          "new_line_content": "\tulint\t\tlocal_len)/* in: length of data, in bytes */",
          "content_same": false
        },
        {
          "line": 4529,
          "old_api": "UNIV_UNLIKELY",
          "new_api": null,
          "old_text": "UNIV_UNLIKELY(local_len >= len)",
          "new_text": null,
          "old_line_content": "\tif (UNIV_UNLIKELY(local_len >= len)) {",
          "new_line_content": "\tulint\toffset;",
          "content_same": false
        },
        {
          "line": 4530,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(buf, data, len)",
          "new_text": null,
          "old_line_content": "\t\tmemcpy(buf, data, len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3507,
          "old_api": "btr_cur_set_ownership_of_extern_field",
          "new_api": null,
          "old_text": "btr_cur_set_ownership_of_extern_field(\n\t\t\t\tpage_zip, rec, index, offsets, i, TRUE, mtr)",
          "new_text": null,
          "old_line_content": "\t\t\tbtr_cur_set_ownership_of_extern_field(",
          "new_line_content": "\t\treturn;",
          "content_same": false
        },
        {
          "line": 4534,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(buf, data, local_len)",
          "new_text": null,
          "old_line_content": "\tmemcpy(buf, data, local_len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4537,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(data, field_ref_zero, BTR_EXTERN_FIELD_REF_SIZE)",
          "new_text": null,
          "old_line_content": "\tut_a(memcmp(data, field_ref_zero, BTR_EXTERN_FIELD_REF_SIZE));",
          "new_line_content": "\t\treturn(len);",
          "content_same": false
        },
        {
          "line": 4539,
          "old_api": "mach_read_from_4",
          "new_api": null,
          "old_text": "mach_read_from_4(data + BTR_EXTERN_SPACE_ID)",
          "new_text": null,
          "old_line_content": "\tspace_id = mach_read_from_4(data + BTR_EXTERN_SPACE_ID);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4541,
          "old_api": "mach_read_from_4",
          "new_api": null,
          "old_text": "mach_read_from_4(data + BTR_EXTERN_PAGE_NO)",
          "new_text": null,
          "old_line_content": "\tpage_no = mach_read_from_4(data + BTR_EXTERN_PAGE_NO);",
          "new_line_content": "\tdata += local_len;",
          "content_same": false
        },
        {
          "line": 4546,
          "old_api": "btr_copy_externally_stored_field_prefix_low",
          "new_api": null,
          "old_text": "btr_copy_externally_stored_field_prefix_low(buf + local_len,\n\t\t\t\t\t\t\t     len - local_len,\n\t\t\t\t\t\t\t     zip_size,\n\t\t\t\t\t\t\t     space_id, page_no,\n\t\t\t\t\t\t\t     offset)",
          "new_text": null,
          "old_line_content": "\t       + btr_copy_externally_stored_field_prefix_low(buf + local_len,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3523,
          "old_api": "dtuple_get_n_fields",
          "new_api": null,
          "old_text": "dtuple_get_n_fields(entry)",
          "new_text": null,
          "old_line_content": "\tfor (i = 0; i < dtuple_get_n_fields(entry); i++) {",
          "new_line_content": "btr_cur_unmark_dtuple_extern_fields(",
          "content_same": false
        },
        {
          "line": 3524,
          "old_api": "dtuple_get_nth_field",
          "new_api": null,
          "old_text": "dtuple_get_nth_field(entry, i)",
          "new_text": null,
          "old_line_content": "\t\tdfield_t* dfield = dtuple_get_nth_field(entry, i);",
          "new_line_content": "/*================================*/",
          "content_same": false
        },
        {
          "line": 4035,
          "old_api": "dict_table_zip_size",
          "new_api": null,
          "old_text": "dict_table_zip_size(index->table)",
          "new_text": null,
          "old_line_content": "\tulint\t\trec_zip_size = dict_table_zip_size(index->table);",
          "new_line_content": "\tmtr_t*\t\tlocal_mtr __attribute__((unused))) /* in: mtr",
          "content_same": false
        },
        {
          "line": 3526,
          "old_api": "dfield_is_ext",
          "new_api": null,
          "old_text": "dfield_is_ext(dfield)",
          "new_text": null,
          "old_line_content": "\t\tif (dfield_is_ext(dfield)) {",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3527,
          "old_api": "dfield_get_data",
          "new_api": null,
          "old_text": "dfield_get_data(dfield)",
          "new_text": null,
          "old_line_content": "\t\t\tbyte*\tdata = dfield_get_data(dfield);",
          "new_line_content": "\tulint\ti;",
          "content_same": false
        },
        {
          "line": 3528,
          "old_api": "dfield_get_len",
          "new_api": null,
          "old_text": "dfield_get_len(dfield)",
          "new_text": null,
          "old_line_content": "\t\t\tulint\tlen = dfield_get_len(dfield);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4043,
          "old_api": "mtr_memo_contains_page",
          "new_api": null,
          "old_text": "mtr_memo_contains_page(local_mtr, field_ref,\n\t\t\t\t     MTR_MEMO_PAGE_X_FIX)",
          "new_text": null,
          "old_line_content": "\tut_ad(mtr_memo_contains_page(local_mtr, field_ref,",
          "new_line_content": "\tulint\t\tpage_no;",
          "content_same": false
        },
        {
          "line": 4045,
          "old_api": "rec_offs_validate",
          "new_api": null,
          "old_text": "rec_offs_validate(rec, index, offsets)",
          "new_text": null,
          "old_line_content": "\tut_ad(!rec || rec_offs_validate(rec, index, offsets));",
          "new_line_content": "\tmtr_t\t\tmtr;",
          "content_same": false
        },
        {
          "line": 4054,
          "old_api": "ut_ad",
          "new_api": null,
          "old_text": "ut_ad(f == field_ref)",
          "new_text": null,
          "old_line_content": "\t\tut_ad(f == field_ref);",
          "new_line_content": "\t\tulint\tlocal_len;",
          "content_same": false
        },
        {
          "line": 4058,
          "old_api": "mach_read_from_4",
          "new_api": null,
          "old_text": "mach_read_from_4(field_ref + BTR_EXTERN_SPACE_ID)",
          "new_text": null,
          "old_line_content": "\tspace_id = mach_read_from_4(field_ref + BTR_EXTERN_SPACE_ID);",
          "new_line_content": "\t\tlocal_len -= BTR_EXTERN_FIELD_REF_SIZE;",
          "content_same": false
        },
        {
          "line": 4061,
          "old_api": "fil_space_get_zip_size",
          "new_api": null,
          "old_text": "fil_space_get_zip_size(space_id)",
          "new_text": null,
          "old_line_content": "\t\text_zip_size = fil_space_get_zip_size(space_id);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 3552,
          "old_api": "ut_ad",
          "new_api": null,
          "old_text": "ut_ad(tuple)",
          "new_text": null,
          "old_line_content": "\tut_ad(tuple);",
          "new_line_content": "\tconst upd_t*\tupdate)\t/* in: update vector */",
          "content_same": false
        },
        {
          "line": 3553,
          "old_api": "ut_ad",
          "new_api": null,
          "old_text": "ut_ad(update)",
          "new_text": null,
          "old_line_content": "\tut_ad(update);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4578,
          "old_api": "ut_a",
          "new_api": null,
          "old_text": "ut_a(local_len >= BTR_EXTERN_FIELD_REF_SIZE)",
          "new_text": null,
          "old_line_content": "\tut_a(local_len >= BTR_EXTERN_FIELD_REF_SIZE);",
          "new_line_content": "\tulint\tspace_id;",
          "content_same": false
        },
        {
          "line": 3556,
          "old_api": "upd_get_n_fields",
          "new_api": null,
          "old_text": "upd_get_n_fields(update)",
          "new_text": null,
          "old_line_content": "\tn = upd_get_n_fields(update);",
          "new_line_content": "\tconst upd_field_t*\tuf;",
          "content_same": false
        },
        {
          "line": 4068,
          "old_api": "ut_ad",
          "new_api": null,
          "old_text": "ut_ad(!page_zip)",
          "new_text": null,
          "old_line_content": "\t\tut_ad(!page_zip);",
          "new_line_content": "\t\t/* This must be an undo log record in the system tablespace,",
          "content_same": false
        },
        {
          "line": 4582,
          "old_api": "mach_read_from_4",
          "new_api": null,
          "old_text": "mach_read_from_4(data + local_len + BTR_EXTERN_SPACE_ID)",
          "new_text": null,
          "old_line_content": "\tspace_id = mach_read_from_4(data + local_len + BTR_EXTERN_SPACE_ID);",
          "new_line_content": "\tbyte*\tbuf;",
          "content_same": false
        },
        {
          "line": 3561,
          "old_api": "dtuple_get_nth_field",
          "new_api": null,
          "old_text": "dtuple_get_nth_field(tuple, uf->field_no)",
          "new_text": null,
          "old_line_content": "\t\t\t\t= dtuple_get_nth_field(tuple, uf->field_no);",
          "new_line_content": "\tuf = update->fields;",
          "content_same": false
        },
        {
          "line": 4586,
          "old_api": "mach_read_from_4",
          "new_api": null,
          "old_text": "mach_read_from_4(data + local_len + BTR_EXTERN_OFFSET)",
          "new_text": null,
          "old_line_content": "\toffset = mach_read_from_4(data + local_len + BTR_EXTERN_OFFSET);",
          "new_line_content": "\tlocal_len -= BTR_EXTERN_FIELD_REF_SIZE;",
          "content_same": false
        },
        {
          "line": 3563,
          "old_api": "dfield_is_ext",
          "new_api": null,
          "old_text": "dfield_is_ext(field)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!dfield_is_ext(field)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3564,
          "old_api": "dfield_set_ext",
          "new_api": null,
          "old_text": "dfield_set_ext(field)",
          "new_text": null,
          "old_line_content": "\t\t\t\tdfield_set_ext(field);",
          "new_line_content": "\tfor (; n--; uf++) {",
          "content_same": false
        },
        {
          "line": 4075,
          "old_api": "ut_ad",
          "new_api": null,
          "old_text": "ut_ad(!page_zip)",
          "new_text": null,
          "old_line_content": "\t\tut_ad(!page_zip);",
          "new_line_content": "\t} else {",
          "content_same": false
        },
        {
          "line": 4591,
          "old_api": "mach_read_from_4",
          "new_api": null,
          "old_text": "mach_read_from_4(data + local_len + BTR_EXTERN_LEN + 4)",
          "new_text": null,
          "old_line_content": "\textern_len = mach_read_from_4(data + local_len + BTR_EXTERN_LEN + 4);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4593,
          "old_api": "mem_heap_alloc",
          "new_api": null,
          "old_text": "mem_heap_alloc(heap, local_len + extern_len)",
          "new_text": null,
          "old_line_content": "\tbuf = mem_heap_alloc(heap, local_len + extern_len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4595,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(buf, data, local_len)",
          "new_text": null,
          "old_line_content": "\tmemcpy(buf, data, local_len);",
          "new_line_content": "\tleave the 4 upper bytes in the length field unused */",
          "content_same": false
        },
        {
          "line": 4083,
          "old_api": "mtr_start",
          "new_api": null,
          "old_text": "mtr_start(&mtr)",
          "new_text": null,
          "old_line_content": "\t\tmtr_start(&mtr);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 4085,
          "old_api": "page_get_space_id",
          "new_api": null,
          "old_text": "page_get_space_id(\n\t\t\t\t\t\t page_align(field_ref))",
          "new_text": null,
          "old_line_content": "\t\trec_block = buf_page_get(page_get_space_id(",
          "new_line_content": "\tfor (;;) {",
          "content_same": false
        },
        {
          "line": 4086,
          "old_api": "page_align",
          "new_api": null,
          "old_text": "page_align(field_ref)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t page_align(field_ref)),",
          "new_line_content": "\t\tbuf_block_t*\trec_block;",
          "content_same": false
        },
        {
          "line": 4088,
          "old_api": "page_get_page_no",
          "new_api": null,
          "old_text": "page_get_page_no(\n\t\t\t\t\t\t page_align(field_ref))",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t page_get_page_no(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3582,
          "old_api": "mach_read_from_4",
          "new_api": null,
          "old_text": "mach_read_from_4(blob_header + BTR_BLOB_HDR_PART_LEN)",
          "new_text": null,
          "old_line_content": "\treturn(mach_read_from_4(blob_header + BTR_BLOB_HDR_PART_LEN));",
          "new_line_content": "ulint",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 51,
      "total_additions": 204,
      "total_deletions": 203,
      "total_api_changes": 458
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 6,
        "api_related_lines": 458,
        "non_api_lines": 3,
        "non_api_line_numbers": [
          3410,
          3412,
          3413
        ]
      }
    },
    "api_calls_before": 1080,
    "api_calls_after": 1081,
    "diff_info": {
      "added_lines": 6,
      "removed_lines": 0,
      "total_diff_lines": 18
    }
  }
}
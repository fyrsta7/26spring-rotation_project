{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/7be1beb2d39db12d192110325958fd820c1fff8f",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/7be1beb2d39db12d192110325958fd820c1fff8f/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/7be1beb2d39db12d192110325958fd820c1fff8f/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/7be1beb2d39db12d192110325958fd820c1fff8f/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 1951,
          "old_api": "ut_strlen",
          "new_api": "ut_memcpy",
          "old_text": "ut_strlen(name)",
          "new_text": "ut_memcpy(buf, str1, len)",
          "old_line_content": "\tut_memcpy(buf + len, name, ut_strlen(name));",
          "new_line_content": "\tut_memcpy(buf, str1, len);",
          "content_same": false
        },
        {
          "line": 1970,
          "old_api": "rw_lock_own",
          "new_api": "mutex_own",
          "old_text": "rw_lock_own(&dict_operation_lock, RW_LOCK_EX)",
          "new_text": "mutex_own(&(dict_sys->mutex))",
          "old_line_content": "\tut_ad(rw_lock_own(&dict_operation_lock, RW_LOCK_EX));",
          "new_line_content": "\tut_ad(mutex_own(&(dict_sys->mutex)));",
          "content_same": false
        },
        {
          "line": 2001,
          "old_api": "fprintf",
          "new_api": "ut_print_timestamp",
          "old_text": "fprintf(stderr,\n\t\t  \"  InnoDB: Warning: MySQL is trying to drop table %s\\n\"\n\t\t  \"InnoDB: though there are still open handles to it.\\n\"\n\t\t  \"InnoDB: Adding the table to the background drop queue.\\n\",\n\t\t  table->name)",
          "new_text": "ut_print_timestamp(stderr)",
          "old_line_content": "\t        fprintf(stderr,",
          "new_line_content": "\t        ut_print_timestamp(stderr);",
          "content_same": false
        },
        {
          "line": 2017,
          "old_api": "fprintf",
          "new_api": "ut_print_timestamp",
          "old_text": "fprintf(stderr,\n\t\t  \"  InnoDB: You are trying to drop table %s\\n\"\n\t\t  \"InnoDB: though there are foreign key check running on it.\\n\"\n\t\t  \"InnoDB: Adding the table to the background drop queue.\\n\",\n\t\t  table->name)",
          "new_text": "ut_print_timestamp(stderr)",
          "old_line_content": "\t        fprintf(stderr,",
          "new_line_content": "\t        ut_print_timestamp(stderr);",
          "content_same": false
        },
        {
          "line": 2055,
          "old_api": "ut_print_timestamp",
          "new_api": "dict_load_table",
          "old_text": "ut_print_timestamp(stderr)",
          "new_text": "dict_load_table(name)",
          "old_line_content": "\t\t\tut_print_timestamp(stderr);",
          "new_line_content": "\t\tif (dict_load_table(name) != NULL) {",
          "content_same": false
        },
        {
          "line": 2056,
          "old_api": "fprintf",
          "new_api": "ut_print_timestamp",
          "old_text": "fprintf(stderr,\n\"  InnoDB: Error: dropping of table %s failed!\\n\", name)",
          "new_text": "ut_print_timestamp(stderr)",
          "old_line_content": "\t\t\tfprintf(stderr,",
          "new_line_content": "\t\t\tut_print_timestamp(stderr);",
          "content_same": false
        },
        {
          "line": 2093,
          "old_api": "ut_a",
          "new_api": "os_thread_get_curr_id",
          "old_text": "ut_a(name != NULL)",
          "new_text": "os_thread_get_curr_id()",
          "old_line_content": "\tut_a(name != NULL);",
          "new_line_content": "\tut_ad(trx->mysql_thread_id == os_thread_get_curr_id());",
          "content_same": false
        },
        {
          "line": 2094,
          "old_api": "strlen",
          "new_api": "ut_a",
          "old_text": "strlen(name)",
          "new_text": "ut_a(name != NULL)",
          "old_line_content": "\tut_a(name[strlen(name) - 1] == '/');",
          "new_line_content": "\tut_a(name != NULL);",
          "content_same": false
        },
        {
          "line": 2103,
          "old_api": "strlen",
          "new_api": "dict_get_first_table_name_in_db",
          "old_text": "strlen(name)",
          "new_text": "dict_get_first_table_name_in_db(name)",
          "old_line_content": "\t\tut_a(memcmp(table_name, name, strlen(name)) == 0);",
          "new_line_content": "\twhile ((table_name = dict_get_first_table_name_in_db(name))) {",
          "content_same": false
        },
        {
          "line": 2116,
          "old_api": "fprintf",
          "new_api": "ut_print_timestamp",
          "old_text": "fprintf(stderr,\n\t\t\"  InnoDB: Warning: MySQL is trying to drop database %s\\n\"\n\t    \t\"InnoDB: though there are still open handles to table %s.\\n\",\n\t\t\t\tname, table_name)",
          "new_text": "ut_print_timestamp(stderr)",
          "old_line_content": "\t\t\tfprintf(stderr,",
          "new_line_content": "\t\t\tut_print_timestamp(stderr);",
          "content_same": false
        },
        {
          "line": 2162,
          "old_api": "ut_memcmp",
          "new_api": "ut_strlen",
          "old_text": "ut_memcmp(name + i, (char*)\"/#sql\", 5)",
          "new_text": "ut_strlen(name)",
          "old_line_content": "\t\tif (ut_memcmp(name + i, (char*)\"/#sql\", 5) == 0) {",
          "new_line_content": "\tfor (i = 0; i <= ut_strlen(name) - 5; i++) {",
          "content_same": false
        },
        {
          "line": 2197,
          "old_api": "ut_a",
          "new_api": "os_thread_get_curr_id",
          "old_text": "ut_a(old_name != NULL)",
          "new_text": "os_thread_get_curr_id()",
          "old_line_content": "\tut_a(old_name != NULL);",
          "new_line_content": "\tut_ad(trx->mysql_thread_id == os_thread_get_curr_id());",
          "content_same": false
        },
        {
          "line": 2365,
          "old_api": "row_is_mysql_tmp_table_name",
          "new_api": "dict_table_rename_in_cache",
          "old_text": "row_is_mysql_tmp_table_name(new_name)",
          "new_text": "dict_table_rename_in_cache(table, new_name,\n\t\t\t\t!row_is_mysql_tmp_table_name(new_name))",
          "old_line_content": "\t\t\t\t!row_is_mysql_tmp_table_name(new_name)));",
          "new_line_content": "\t\tut_a(dict_table_rename_in_cache(table, new_name,",
          "content_same": false
        },
        {
          "line": 2446,
          "old_api": "mem_heap_create",
          "new_api": "mem_alloc",
          "old_text": "mem_heap_create(100)",
          "new_text": "mem_alloc(UNIV_PAGE_SIZE)",
          "old_line_content": "\theap = mem_heap_create(100);",
          "new_line_content": "\tbuf = mem_alloc(UNIV_PAGE_SIZE);",
          "content_same": false
        },
        {
          "line": 2466,
          "old_api": "mem_heap_free",
          "new_api": "mem_free",
          "old_text": "mem_heap_free(heap)",
          "new_text": "mem_free(buf)",
          "old_line_content": "\t\tmem_heap_free(heap);",
          "new_line_content": "\t\tmem_free(buf);",
          "content_same": false
        },
        {
          "line": 2495,
          "old_api": "dtuple_get_nth_field",
          "new_api": "dfield_get_len",
          "old_text": "dtuple_get_nth_field(prev_entry, i)",
          "new_text": "dfield_get_len(\n                                      dtuple_get_nth_field(prev_entry, i))",
          "old_line_content": "                                      dtuple_get_nth_field(prev_entry, i))) {",
          "new_line_content": "\t                if (UNIV_SQL_NULL == dfield_get_len(",
          "content_same": false
        },
        {
          "line": 2507,
          "old_api": "fprintf",
          "new_api": "dtuple_sprintf",
          "old_text": "fprintf(stderr, \"InnoDB: prev record %s\\n\", err_buf)",
          "new_text": "dtuple_sprintf(err_buf, 900, prev_entry)",
          "old_line_content": "\t  \t\tfprintf(stderr, \"InnoDB: prev record %s\\n\", err_buf);",
          "new_line_content": "\t  \t\tdtuple_sprintf(err_buf, 900, prev_entry);",
          "content_same": false
        },
        {
          "line": 2510,
          "old_api": "fprintf",
          "new_api": "rec_sprintf",
          "old_text": "fprintf(stderr, \"InnoDB: record %s\\n\", err_buf)",
          "new_text": "rec_sprintf(err_buf, 900, rec)",
          "old_line_content": "\t  \t\tfprintf(stderr, \"InnoDB: record %s\\n\", err_buf);",
          "new_line_content": "\t  \t\trec_sprintf(err_buf, 900, rec);",
          "content_same": false
        },
        {
          "line": 2522,
          "old_api": "fprintf",
          "new_api": "dtuple_sprintf",
          "old_text": "fprintf(stderr, \"InnoDB: prev record %s\\n\", err_buf)",
          "new_text": "dtuple_sprintf(err_buf, 900, prev_entry)",
          "old_line_content": "\t  \t\tfprintf(stderr, \"InnoDB: prev record %s\\n\", err_buf);",
          "new_line_content": "\t  \t\tdtuple_sprintf(err_buf, 900, prev_entry);",
          "content_same": false
        },
        {
          "line": 2525,
          "old_api": "fprintf",
          "new_api": "rec_sprintf",
          "old_text": "fprintf(stderr, \"InnoDB: record %s\\n\", err_buf)",
          "new_text": "rec_sprintf(err_buf, 900, rec)",
          "old_line_content": "\t  \t\tfprintf(stderr, \"InnoDB: record %s\\n\", err_buf);",
          "new_line_content": "\t  \t\trec_sprintf(err_buf, 900, rec);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 2049,
          "old_api": null,
          "new_api": "row_mysql_handle_errors",
          "old_text": null,
          "new_text": "row_mysql_handle_errors(&err, trx, thr, NULL)",
          "old_line_content": "",
          "new_line_content": "\t\trow_mysql_handle_errors(&err, trx, thr, NULL);",
          "content_same": false
        },
        {
          "line": 2051,
          "old_api": null,
          "new_api": "ut_a",
          "old_text": null,
          "new_text": "ut_a(0)",
          "old_line_content": "\t} else {",
          "new_line_content": "\t\tut_a(0);",
          "content_same": false
        },
        {
          "line": 2053,
          "old_api": null,
          "new_api": "dict_table_remove_from_cache",
          "old_text": null,
          "new_text": "dict_table_remove_from_cache(table)",
          "old_line_content": "",
          "new_line_content": "\t\tdict_table_remove_from_cache(table);",
          "content_same": false
        },
        {
          "line": 2057,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\n\"  InnoDB: Error: dropping of table %s failed!\\n\", name)",
          "old_line_content": "\"  InnoDB: Error: dropping of table %s failed!\\n\", name);",
          "new_line_content": "\t\t\tfprintf(stderr,",
          "content_same": false
        },
        {
          "line": 2569,
          "old_api": null,
          "new_api": "dict_table_get_first_index",
          "old_text": null,
          "new_text": "dict_table_get_first_index(table)",
          "old_line_content": "",
          "new_line_content": "\tindex = dict_table_get_first_index(table);",
          "content_same": false
        },
        {
          "line": 2574,
          "old_api": null,
          "new_api": "btr_validate_tree",
          "old_text": null,
          "new_text": "btr_validate_tree(index->tree)",
          "old_line_content": "\t\t\tret = DB_ERROR;",
          "new_line_content": "\t\tif (!btr_validate_tree(index->tree)) {",
          "content_same": false
        },
        {
          "line": 2065,
          "old_api": null,
          "new_api": "row_mysql_unlock_data_dictionary",
          "old_text": null,
          "new_text": "row_mysql_unlock_data_dictionary(trx)",
          "old_line_content": "\t}",
          "new_line_content": "\t\trow_mysql_unlock_data_dictionary(trx);\t",
          "content_same": false
        },
        {
          "line": 2577,
          "old_api": null,
          "new_api": "row_scan_and_check_index",
          "old_text": null,
          "new_text": "row_scan_and_check_index(prebuilt,\n\t\t\t\t\t\t\tindex, &n_rows)",
          "old_line_content": "\t\t\t\t\t\t\tindex, &n_rows)) {",
          "new_line_content": "\t\t\tif (!row_scan_and_check_index(prebuilt,",
          "content_same": false
        },
        {
          "line": 2068,
          "old_api": null,
          "new_api": "que_graph_free",
          "old_text": null,
          "new_text": "que_graph_free(graph)",
          "old_line_content": "\t",
          "new_line_content": "\tque_graph_free(graph);",
          "content_same": false
        },
        {
          "line": 2070,
          "old_api": null,
          "new_api": "trx_commit_for_mysql",
          "old_text": null,
          "new_text": "trx_commit_for_mysql(trx)",
          "old_line_content": "",
          "new_line_content": "  \ttrx_commit_for_mysql(trx);",
          "content_same": false
        },
        {
          "line": 2585,
          "old_api": null,
          "new_api": "dict_table_get_first_index",
          "old_text": null,
          "new_text": "dict_table_get_first_index(table)",
          "old_line_content": "\t\t\t\tn_rows_in_table = n_rows;",
          "new_line_content": "\t\t\tif (index == dict_table_get_first_index(table)) {",
          "content_same": false
        },
        {
          "line": 2074,
          "old_api": null,
          "new_api": "srv_wake_master_thread",
          "old_text": null,
          "new_text": "srv_wake_master_thread()",
          "old_line_content": "",
          "new_line_content": "\tsrv_wake_master_thread();",
          "content_same": false
        },
        {
          "line": 2591,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\n\t\t\"Error: index %s contains %lu entries, should be %lu\\n\",\n\t\t\t\t\tindex->name, n_rows, n_rows_in_table)",
          "old_line_content": "\t\t\"Error: index %s contains %lu entries, should be %lu\\n\",",
          "new_line_content": "\t\t\t\tfprintf(stderr,",
          "content_same": false
        },
        {
          "line": 2597,
          "old_api": null,
          "new_api": "dict_table_get_next_index",
          "old_text": null,
          "new_text": "dict_table_get_next_index(index)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tindex = dict_table_get_next_index(index);",
          "content_same": false
        },
        {
          "line": 2606,
          "old_api": null,
          "new_api": "btr_search_validate",
          "old_text": null,
          "new_text": "btr_search_validate()",
          "old_line_content": "",
          "new_line_content": "\tif (!btr_search_validate()) {",
          "content_same": false
        },
        {
          "line": 2095,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(name)",
          "old_line_content": "\t",
          "new_line_content": "\tut_a(name[strlen(name) - 1] == '/');",
          "content_same": false
        },
        {
          "line": 2099,
          "old_api": null,
          "new_api": "trx_start_if_not_started",
          "old_text": null,
          "new_text": "trx_start_if_not_started(trx)",
          "old_line_content": "loop:",
          "new_line_content": "\ttrx_start_if_not_started(trx);",
          "content_same": false
        },
        {
          "line": 2101,
          "old_api": null,
          "new_api": "row_mysql_lock_data_dictionary",
          "old_text": null,
          "new_text": "row_mysql_lock_data_dictionary(trx)",
          "old_line_content": "",
          "new_line_content": "\trow_mysql_lock_data_dictionary(trx);",
          "content_same": false
        },
        {
          "line": 2104,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(name)",
          "old_line_content": "",
          "new_line_content": "\t\tut_a(memcmp(table_name, name, strlen(name)) == 0);",
          "content_same": false
        },
        {
          "line": 2106,
          "old_api": null,
          "new_api": "dict_table_get_low",
          "old_text": null,
          "new_text": "dict_table_get_low(table_name)",
          "old_line_content": "",
          "new_line_content": "\t\ttable = dict_table_get_low(table_name);",
          "content_same": false
        },
        {
          "line": 2108,
          "old_api": null,
          "new_api": "ut_a",
          "old_text": null,
          "new_text": "ut_a(table)",
          "old_line_content": "",
          "new_line_content": "\t\tut_a(table);",
          "content_same": false
        },
        {
          "line": 2114,
          "old_api": null,
          "new_api": "row_mysql_unlock_data_dictionary",
          "old_text": null,
          "new_text": "row_mysql_unlock_data_dictionary(trx)",
          "old_line_content": "",
          "new_line_content": "\t\t\trow_mysql_unlock_data_dictionary(trx);",
          "content_same": false
        },
        {
          "line": 2117,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\n\t\t\"  InnoDB: Warning: MySQL is trying to drop database %s\\n\"\n\t    \t\"InnoDB: though there are still open handles to table %s.\\n\",\n\t\t\t\tname, table_name)",
          "old_line_content": "\t\t\"  InnoDB: Warning: MySQL is trying to drop database %s\\n\"",
          "new_line_content": "\t\t\tfprintf(stderr,",
          "content_same": false
        },
        {
          "line": 2122,
          "old_api": null,
          "new_api": "os_thread_sleep",
          "old_text": null,
          "new_text": "os_thread_sleep(1000000)",
          "old_line_content": "",
          "new_line_content": "\t\t        os_thread_sleep(1000000);",
          "content_same": false
        },
        {
          "line": 2124,
          "old_api": null,
          "new_api": "mem_free",
          "old_text": null,
          "new_text": "mem_free(table_name)",
          "old_line_content": "",
          "new_line_content": "\t\t        mem_free(table_name);",
          "content_same": false
        },
        {
          "line": 2129,
          "old_api": null,
          "new_api": "row_drop_table_for_mysql",
          "old_text": null,
          "new_text": "row_drop_table_for_mysql(table_name, trx)",
          "old_line_content": "",
          "new_line_content": "\t\terr = row_drop_table_for_mysql(table_name, trx);",
          "content_same": false
        },
        {
          "line": 2131,
          "old_api": null,
          "new_api": "mem_free",
          "old_text": null,
          "new_text": "mem_free(table_name)",
          "old_line_content": "",
          "new_line_content": "\t\tmem_free(table_name);",
          "content_same": false
        },
        {
          "line": 2134,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\n\t\"InnoDB: DROP DATABASE %s failed with error %lu for table %s\\n\",\n\t\t\t\tname, (ulint)err, table_name)",
          "old_line_content": "\t\"InnoDB: DROP DATABASE %s failed with error %lu for table %s\\n\",",
          "new_line_content": "\t\t\tfprintf(stderr,",
          "content_same": false
        },
        {
          "line": 2141,
          "old_api": null,
          "new_api": "row_mysql_unlock_data_dictionary",
          "old_text": null,
          "new_text": "row_mysql_unlock_data_dictionary(trx)",
          "old_line_content": "\t",
          "new_line_content": "\trow_mysql_unlock_data_dictionary(trx);",
          "content_same": false
        },
        {
          "line": 2143,
          "old_api": null,
          "new_api": "trx_commit_for_mysql",
          "old_text": null,
          "new_text": "trx_commit_for_mysql(trx)",
          "old_line_content": "",
          "new_line_content": "\ttrx_commit_for_mysql(trx);",
          "content_same": false
        },
        {
          "line": 2163,
          "old_api": null,
          "new_api": "ut_memcmp",
          "old_text": null,
          "new_text": "ut_memcmp(name + i, (char*)\"/#sql\", 5)",
          "old_line_content": "",
          "new_line_content": "\t\tif (ut_memcmp(name + i, (char*)\"/#sql\", 5) == 0) {",
          "content_same": false
        },
        {
          "line": 2199,
          "old_api": null,
          "new_api": "ut_a",
          "old_text": null,
          "new_text": "ut_a(new_name != NULL)",
          "old_line_content": "",
          "new_line_content": "\tut_a(new_name != NULL);",
          "content_same": false
        },
        {
          "line": 2202,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\n\t\t\"InnoDB: A new raw disk partition was initialized or\\n\"\n\t\t\"InnoDB: innodb_force_recovery is on: we do not allow\\n\"\n\t\t\"InnoDB: database modifications by the user. Shut down\\n\"\n\t\t\"InnoDB: mysqld and edit my.cnf so that newraw is replaced\\n\"\n\t\t\"InnoDB: with raw, and innodb_force_... is removed.\\n\")",
          "old_line_content": "\t\t\"InnoDB: A new raw disk partition was initialized or\\n\"",
          "new_line_content": "\t\tfprintf(stderr,",
          "content_same": false
        },
        {
          "line": 2209,
          "old_api": null,
          "new_api": "trx_commit_for_mysql",
          "old_text": null,
          "new_text": "trx_commit_for_mysql(trx)",
          "old_line_content": "\t\treturn(DB_ERROR);",
          "new_line_content": "  \t\ttrx_commit_for_mysql(trx);",
          "content_same": false
        },
        {
          "line": 2215,
          "old_api": null,
          "new_api": "ut_strcmp",
          "old_text": null,
          "new_text": "ut_strcmp(new_name, (char*)\"mysql/db\")",
          "old_line_content": "\t    \t",
          "new_line_content": "\t    || 0 == ut_strcmp(new_name, (char*)\"mysql/db\")) {",
          "content_same": false
        },
        {
          "line": 2217,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\n    \"InnoDB: Error: trying to create a MySQL system table %s of type InnoDB.\\n\"\n    \"InnoDB: MySQL system tables must be of the MyISAM type!\\n\",\n\t\tnew_name)",
          "old_line_content": "    \"InnoDB: Error: trying to create a MySQL system table %s of type InnoDB.\\n\"",
          "new_line_content": "\t\tfprintf(stderr,",
          "content_same": false
        },
        {
          "line": 2222,
          "old_api": null,
          "new_api": "trx_commit_for_mysql",
          "old_text": null,
          "new_text": "trx_commit_for_mysql(trx)",
          "old_line_content": "\t\treturn(DB_ERROR);",
          "new_line_content": "  \t\ttrx_commit_for_mysql(trx);",
          "content_same": false
        },
        {
          "line": 2227,
          "old_api": null,
          "new_api": "trx_start_if_not_started",
          "old_text": null,
          "new_text": "trx_start_if_not_started(trx)",
          "old_line_content": "",
          "new_line_content": "\ttrx_start_if_not_started(trx);",
          "content_same": false
        },
        {
          "line": 2232,
          "old_api": null,
          "new_api": "row_mysql_lock_data_dictionary",
          "old_text": null,
          "new_text": "row_mysql_lock_data_dictionary(trx)",
          "old_line_content": "",
          "new_line_content": "\trow_mysql_lock_data_dictionary(trx);",
          "content_same": false
        },
        {
          "line": 2234,
          "old_api": null,
          "new_api": "dict_table_get_low",
          "old_text": null,
          "new_text": "dict_table_get_low(old_name)",
          "old_line_content": "",
          "new_line_content": "\ttable = dict_table_get_low(old_name);",
          "content_same": false
        },
        {
          "line": 2252,
          "old_api": null,
          "new_api": "row_is_mysql_tmp_table_name",
          "old_text": null,
          "new_text": "row_is_mysql_tmp_table_name(new_name)",
          "old_line_content": "",
          "new_line_content": "\tif (row_is_mysql_tmp_table_name(new_name)) {",
          "content_same": false
        },
        {
          "line": 2260,
          "old_api": null,
          "new_api": "mem_heap_create",
          "old_text": null,
          "new_text": "mem_heap_create(100)",
          "old_line_content": "\t\t",
          "new_line_content": "\t\theap = mem_heap_create(100);",
          "content_same": false
        },
        {
          "line": 2262,
          "old_api": null,
          "new_api": "dict_foreign_parse_drop_constraints",
          "old_text": null,
          "new_text": "dict_foreign_parse_drop_constraints(heap, trx,\n\t\t\t\t\ttable,\n\t\t\t\t\t&n_constraints_to_drop,\n\t\t\t\t\t&constraints_to_drop)",
          "old_line_content": "\t\t\t\t\ttable,",
          "new_line_content": "\t\terr = dict_foreign_parse_drop_constraints(heap, trx,",
          "content_same": false
        },
        {
          "line": 2271,
          "old_api": null,
          "new_api": "mem_heap_alloc",
          "old_text": null,
          "new_text": "mem_heap_alloc(heap,\n\t\t\t\t\t1000 + 500 * n_constraints_to_drop)",
          "old_line_content": "\t\t\t\t\t1000 + 500 * n_constraints_to_drop);",
          "new_line_content": "\t\tstr3 = mem_heap_alloc(heap,",
          "content_same": false
        },
        {
          "line": 2274,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(str3,\n\t\t\t\"';\\n\"\n\t\t\t\"UPDATE SYS_TABLES SET NAME = new_table_name\\n\"\n\t\t\t\"WHERE NAME = old_table_name;\\n\")",
          "old_line_content": "\t\t\t\"';\\n\"",
          "new_line_content": "\t\tsprintf(str3,",
          "content_same": false
        },
        {
          "line": 2280,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(str3)",
          "old_line_content": "\t\t\t\"DELETE FROM SYS_FOREIGN_COLS WHERE ID = '%s';\\n\"",
          "new_line_content": "\t\t\tsprintf(str3 + strlen(str3),",
          "content_same": false
        },
        {
          "line": 2287,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(str3)",
          "old_line_content": "\t\t\t\"END;\\n\");",
          "new_line_content": "\t\tsprintf(str3 + strlen(str3),",
          "content_same": false
        },
        {
          "line": 2290,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(str3)",
          "old_line_content": "\t} else {",
          "new_line_content": "\t\tut_a(strlen(str3) < 1000 + 500 * n_constraints_to_drop);",
          "content_same": false
        },
        {
          "line": 2303,
          "old_api": null,
          "new_api": "ut_strlen",
          "old_text": null,
          "new_text": "ut_strlen(str1)",
          "old_line_content": "",
          "new_line_content": "\tlen = ut_strlen(str1);",
          "content_same": false
        },
        {
          "line": 2305,
          "old_api": null,
          "new_api": "ut_memcpy",
          "old_text": null,
          "new_text": "ut_memcpy(buf, str1, len)",
          "old_line_content": "",
          "new_line_content": "\tut_memcpy(buf, str1, len);",
          "content_same": false
        },
        {
          "line": 2307,
          "old_api": null,
          "new_api": "ut_strlen",
          "old_text": null,
          "new_text": "ut_strlen(new_name)",
          "old_line_content": "",
          "new_line_content": "\tut_memcpy(buf + len, new_name, ut_strlen(new_name));",
          "content_same": false
        },
        {
          "line": 2309,
          "old_api": null,
          "new_api": "ut_strlen",
          "old_text": null,
          "new_text": "ut_strlen(new_name)",
          "old_line_content": "",
          "new_line_content": "\tlen += ut_strlen(new_name);",
          "content_same": false
        },
        {
          "line": 2311,
          "old_api": null,
          "new_api": "ut_strlen",
          "old_text": null,
          "new_text": "ut_strlen(str2)",
          "old_line_content": "",
          "new_line_content": "\tut_memcpy(buf + len, str2, ut_strlen(str2));",
          "content_same": false
        },
        {
          "line": 2313,
          "old_api": null,
          "new_api": "ut_strlen",
          "old_text": null,
          "new_text": "ut_strlen(str2)",
          "old_line_content": "",
          "new_line_content": "\tlen += ut_strlen(str2);",
          "content_same": false
        },
        {
          "line": 2315,
          "old_api": null,
          "new_api": "ut_strlen",
          "old_text": null,
          "new_text": "ut_strlen(old_name)",
          "old_line_content": "",
          "new_line_content": "\tut_memcpy(buf + len, old_name, ut_strlen(old_name));",
          "content_same": false
        },
        {
          "line": 2317,
          "old_api": null,
          "new_api": "ut_strlen",
          "old_text": null,
          "new_text": "ut_strlen(old_name)",
          "old_line_content": "",
          "new_line_content": "\tlen += ut_strlen(old_name);",
          "content_same": false
        },
        {
          "line": 2319,
          "old_api": null,
          "new_api": "ut_strlen",
          "old_text": null,
          "new_text": "ut_strlen(str3)",
          "old_line_content": "\t",
          "new_line_content": "\tut_memcpy(buf + len, str3, ut_strlen(str3) + 1);",
          "content_same": false
        },
        {
          "line": 2321,
          "old_api": null,
          "new_api": "pars_sql",
          "old_text": null,
          "new_text": "pars_sql(buf)",
          "old_line_content": "",
          "new_line_content": "\tgraph = pars_sql(buf);",
          "content_same": false
        },
        {
          "line": 2323,
          "old_api": null,
          "new_api": "ut_a",
          "old_text": null,
          "new_text": "ut_a(graph)",
          "old_line_content": "",
          "new_line_content": "\tut_a(graph);",
          "content_same": false
        },
        {
          "line": 2330,
          "old_api": null,
          "new_api": "que_fork_start_command",
          "old_text": null,
          "new_text": "que_fork_start_command(graph, SESS_COMM_EXECUTE, 0)",
          "old_line_content": "",
          "new_line_content": "\tut_a(thr = que_fork_start_command(graph, SESS_COMM_EXECUTE, 0));",
          "content_same": false
        },
        {
          "line": 2332,
          "old_api": null,
          "new_api": "que_run_threads",
          "old_text": null,
          "new_text": "que_run_threads(thr)",
          "old_line_content": "",
          "new_line_content": "\tque_run_threads(thr);",
          "content_same": false
        },
        {
          "line": 2338,
          "old_api": null,
          "new_api": "ut_print_timestamp",
          "old_text": null,
          "new_text": "ut_print_timestamp(stderr)",
          "old_line_content": "",
          "new_line_content": "\t    \t\tut_print_timestamp(stderr);",
          "content_same": false
        },
        {
          "line": 2340,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\n     \"  InnoDB: Error: table %s exists in the InnoDB internal data\\n\"\n     \"InnoDB: dictionary though MySQL is trying rename table %s to it.\\n\"\n     \"InnoDB: Have you deleted the .frm file and not used DROP TABLE?\\n\"\n     \"InnoDB: You can look further help from section 15.1 of\\n\"\n     \"InnoDB: http://www.innodb.com/ibman.html\\n\",\n\t\t\tnew_name, old_name)",
          "old_line_content": "     \"  InnoDB: Error: table %s exists in the InnoDB internal data\\n\"",
          "new_line_content": "\t\t\tfprintf(stderr,",
          "content_same": false
        },
        {
          "line": 2348,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\n     \"InnoDB: If table %s is a temporary table #sql..., then it can be that\\n\"\n     \"InnoDB: there are still queries running on the table, and it will be\\n\"\n     \"InnoDB: dropped automatically when the queries end.\\n\", new_name)",
          "old_line_content": "     \"InnoDB: If table %s is a temporary table #sql..., then it can be that\\n\"",
          "new_line_content": "\t\t\tfprintf(stderr,",
          "content_same": false
        },
        {
          "line": 2353,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\n     \"InnoDB: You can drop the orphaned table inside InnoDB by\\n\"\n     \"InnoDB: creating an InnoDB table with the same name in another\\n\"\n     \"InnoDB: database and moving the .frm file to the current database.\\n\"\n     \"InnoDB: Then MySQL thinks the table exists, and DROP TABLE will\\n\"\n     \"InnoDB: succeed.\\n\")",
          "old_line_content": "     \"InnoDB: You can drop the orphaned table inside InnoDB by\\n\"",
          "new_line_content": "\t\t\tfprintf(stderr,",
          "content_same": false
        },
        {
          "line": 2362,
          "old_api": null,
          "new_api": "trx_general_rollback_for_mysql",
          "old_text": null,
          "new_text": "trx_general_rollback_for_mysql(trx, FALSE, NULL)",
          "old_line_content": "\t\ttrx->error_state = DB_SUCCESS;",
          "new_line_content": "\t\ttrx_general_rollback_for_mysql(trx, FALSE, NULL);",
          "content_same": false
        },
        {
          "line": 2366,
          "old_api": null,
          "new_api": "row_is_mysql_tmp_table_name",
          "old_text": null,
          "new_text": "row_is_mysql_tmp_table_name(new_name)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t!row_is_mysql_tmp_table_name(new_name)));",
          "content_same": false
        },
        {
          "line": 2368,
          "old_api": null,
          "new_api": "row_is_mysql_tmp_table_name",
          "old_text": null,
          "new_text": "row_is_mysql_tmp_table_name(old_name)",
          "old_line_content": "",
          "new_line_content": "\t\tif (row_is_mysql_tmp_table_name(old_name)) {",
          "content_same": false
        },
        {
          "line": 2377,
          "old_api": null,
          "new_api": "dict_load_foreigns",
          "old_text": null,
          "new_text": "dict_load_foreigns(new_name)",
          "old_line_content": "",
          "new_line_content": "\t\t\terr = dict_load_foreigns(new_name);",
          "content_same": false
        },
        {
          "line": 2381,
          "old_api": null,
          "new_api": "ut_print_timestamp",
          "old_text": null,
          "new_text": "ut_print_timestamp(stderr)",
          "old_line_content": "",
          "new_line_content": "\t    \t\t\tut_print_timestamp(stderr);",
          "content_same": false
        },
        {
          "line": 2383,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\n     \"  InnoDB: Error: in ALTER TABLE table %s\\n\"\n     \"InnoDB: has or is referenced in foreign key constraints\\n\"\n     \"InnoDB: which are not compatible with the new table definition.\\n\",\n     new_name)",
          "old_line_content": "     \"  InnoDB: Error: in ALTER TABLE table %s\\n\"",
          "new_line_content": "\t\t\t\tfprintf(stderr,",
          "content_same": false
        },
        {
          "line": 2389,
          "old_api": null,
          "new_api": "dict_table_rename_in_cache",
          "old_text": null,
          "new_text": "dict_table_rename_in_cache(table,\n\t\t\t\t\t\t\told_name, FALSE)",
          "old_line_content": "\t\t\t\t\t\t\told_name, FALSE));",
          "new_line_content": "\t\t\t\tut_a(dict_table_rename_in_cache(table,",
          "content_same": false
        },
        {
          "line": 2393,
          "old_api": null,
          "new_api": "trx_general_rollback_for_mysql",
          "old_text": null,
          "new_text": "trx_general_rollback_for_mysql(trx, FALSE,\n\t\t\t\t\t\t\t\t\tNULL)",
          "old_line_content": "\t\t\t\t\t\t\t\t\tNULL);",
          "new_line_content": "\t\t\t\ttrx_general_rollback_for_mysql(trx, FALSE,",
          "content_same": false
        },
        {
          "line": 2400,
          "old_api": null,
          "new_api": "row_mysql_unlock_data_dictionary",
          "old_text": null,
          "new_text": "row_mysql_unlock_data_dictionary(trx)",
          "old_line_content": "",
          "new_line_content": "\trow_mysql_unlock_data_dictionary(trx);",
          "content_same": false
        },
        {
          "line": 2403,
          "old_api": null,
          "new_api": "que_graph_free",
          "old_text": null,
          "new_text": "que_graph_free(graph)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tque_graph_free(graph);",
          "content_same": false
        },
        {
          "line": 2407,
          "old_api": null,
          "new_api": "mem_heap_free",
          "old_text": null,
          "new_text": "mem_heap_free(heap)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tmem_heap_free(heap);",
          "content_same": false
        },
        {
          "line": 2410,
          "old_api": null,
          "new_api": "trx_commit_for_mysql",
          "old_text": null,
          "new_text": "trx_commit_for_mysql(trx)",
          "old_line_content": "",
          "new_line_content": "  \ttrx_commit_for_mysql(trx);",
          "content_same": false
        },
        {
          "line": 2447,
          "old_api": null,
          "new_api": "mem_heap_create",
          "old_text": null,
          "new_text": "mem_heap_create(100)",
          "old_line_content": "\t",
          "new_line_content": "\theap = mem_heap_create(100);",
          "content_same": false
        },
        {
          "line": 2458,
          "old_api": null,
          "new_api": "dtuple_set_n_fields",
          "old_text": null,
          "new_text": "dtuple_set_n_fields(prebuilt->search_tuple, 0)",
          "old_line_content": "",
          "new_line_content": " \tdtuple_set_n_fields(prebuilt->search_tuple, 0);",
          "content_same": false
        },
        {
          "line": 1949,
          "old_api": null,
          "new_api": "ut_strlen",
          "old_text": null,
          "new_text": "ut_strlen(str1)",
          "old_line_content": "",
          "new_line_content": "\tlen = ut_strlen(str1);",
          "content_same": false
        },
        {
          "line": 2462,
          "old_api": null,
          "new_api": "row_search_for_mysql",
          "old_text": null,
          "new_text": "row_search_for_mysql(buf, PAGE_CUR_G, prebuilt, 0, 0)",
          "old_line_content": "loop:",
          "new_line_content": "\tret = row_search_for_mysql(buf, PAGE_CUR_G, prebuilt, 0, 0);",
          "content_same": false
        },
        {
          "line": 1952,
          "old_api": null,
          "new_api": "ut_strlen",
          "old_text": null,
          "new_text": "ut_strlen(name)",
          "old_line_content": "",
          "new_line_content": "\tut_memcpy(buf + len, name, ut_strlen(name));",
          "content_same": false
        },
        {
          "line": 1954,
          "old_api": null,
          "new_api": "ut_strlen",
          "old_text": null,
          "new_text": "ut_strlen(name)",
          "old_line_content": "",
          "new_line_content": "\tlen += ut_strlen(name);",
          "content_same": false
        },
        {
          "line": 2467,
          "old_api": null,
          "new_api": "mem_heap_free",
          "old_text": null,
          "new_text": "mem_heap_free(heap)",
          "old_line_content": "",
          "new_line_content": "\t\tmem_heap_free(heap);",
          "content_same": false
        },
        {
          "line": 1956,
          "old_api": null,
          "new_api": "ut_strlen",
          "old_text": null,
          "new_text": "ut_strlen(str2)",
          "old_line_content": "",
          "new_line_content": "\tut_memcpy(buf + len, str2, ut_strlen(str2) + 1);",
          "content_same": false
        },
        {
          "line": 1965,
          "old_api": null,
          "new_api": "row_mysql_lock_data_dictionary",
          "old_text": null,
          "new_text": "row_mysql_lock_data_dictionary(trx)",
          "old_line_content": "",
          "new_line_content": "\t\trow_mysql_lock_data_dictionary(trx);",
          "content_same": false
        },
        {
          "line": 2478,
          "old_api": null,
          "new_api": "mach_read_from_4",
          "old_text": null,
          "new_text": "mach_read_from_4(buf)",
          "old_line_content": "\t",
          "new_line_content": "\trec = buf + mach_read_from_4(buf);",
          "content_same": false
        },
        {
          "line": 1971,
          "old_api": null,
          "new_api": "rw_lock_own",
          "old_text": null,
          "new_text": "rw_lock_own(&dict_operation_lock, RW_LOCK_EX)",
          "old_line_content": "\t",
          "new_line_content": "\tut_ad(rw_lock_own(&dict_operation_lock, RW_LOCK_EX));",
          "content_same": false
        },
        {
          "line": 2484,
          "old_api": null,
          "new_api": "cmp_dtuple_rec_with_match",
          "old_text": null,
          "new_text": "cmp_dtuple_rec_with_match(prev_entry, rec,\n\t\t\t\t\t\t&matched_fields,\n\t\t\t\t\t\t&matched_bytes)",
          "old_line_content": "\t\t\t\t\t\t&matched_fields,",
          "new_line_content": "\t\tcmp = cmp_dtuple_rec_with_match(prev_entry, rec,",
          "content_same": false
        },
        {
          "line": 1973,
          "old_api": null,
          "new_api": "pars_sql",
          "old_text": null,
          "new_text": "pars_sql(buf)",
          "old_line_content": "",
          "new_line_content": "\tgraph = pars_sql(buf);",
          "content_same": false
        },
        {
          "line": 1975,
          "old_api": null,
          "new_api": "ut_a",
          "old_text": null,
          "new_text": "ut_a(graph)",
          "old_line_content": "",
          "new_line_content": "\tut_a(graph);",
          "content_same": false
        },
        {
          "line": 2493,
          "old_api": null,
          "new_api": "dict_index_get_n_ordering_defined_by_user",
          "old_text": null,
          "new_text": "dict_index_get_n_ordering_defined_by_user(index)",
          "old_line_content": "\t\t     i++) {",
          "new_line_content": "                     i < dict_index_get_n_ordering_defined_by_user(index);",
          "content_same": false
        },
        {
          "line": 1982,
          "old_api": null,
          "new_api": "dict_table_get_low",
          "old_text": null,
          "new_text": "dict_table_get_low(name)",
          "old_line_content": "",
          "new_line_content": "\ttable = dict_table_get_low(name);",
          "content_same": false
        },
        {
          "line": 2496,
          "old_api": null,
          "new_api": "dtuple_get_nth_field",
          "old_text": null,
          "new_text": "dtuple_get_nth_field(prev_entry, i)",
          "old_line_content": "",
          "new_line_content": "                                      dtuple_get_nth_field(prev_entry, i))) {",
          "content_same": false
        },
        {
          "line": 1986,
          "old_api": null,
          "new_api": "ut_print_timestamp",
          "old_text": null,
          "new_text": "ut_print_timestamp(stderr)",
          "old_line_content": "",
          "new_line_content": "\t    \tut_print_timestamp(stderr);",
          "content_same": false
        },
        {
          "line": 1988,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \n     \t\"  InnoDB: Error: table %s does not exist in the InnoDB internal\\n\"\n     \t\"InnoDB: data dictionary though MySQL is trying to drop it.\\n\"\n     \t\"InnoDB: Have you copied the .frm file of the table to the\\n\"\n\t\"InnoDB: MySQL database directory from another database?\\n\"\n\t\"InnoDB: You can look further help from section 15.1 of\\n\"\n        \"InnoDB: http://www.innodb.com/ibman.html\\n\",\n\t\t\t\t name)",
          "old_line_content": "     \t\"  InnoDB: Error: table %s does not exist in the InnoDB internal\\n\"",
          "new_line_content": "\t\tfprintf(stderr, ",
          "content_same": false
        },
        {
          "line": 2503,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\n\t\t\t\"Error: index records in a wrong order in index %s\\n\",\n\t\t\t\t\t\t\t\tindex->name)",
          "old_line_content": "\t\t\t\"Error: index records in a wrong order in index %s\\n\",",
          "new_line_content": "\t\t\tfprintf(stderr,",
          "content_same": false
        },
        {
          "line": 2508,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"InnoDB: prev record %s\\n\", err_buf)",
          "old_line_content": "",
          "new_line_content": "\t  \t\tfprintf(stderr, \"InnoDB: prev record %s\\n\", err_buf);",
          "content_same": false
        },
        {
          "line": 2511,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"InnoDB: record %s\\n\", err_buf)",
          "old_line_content": "",
          "new_line_content": "\t  \t\tfprintf(stderr, \"InnoDB: record %s\\n\", err_buf);",
          "content_same": false
        },
        {
          "line": 2002,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\n\t\t  \"  InnoDB: Warning: MySQL is trying to drop table %s\\n\"\n\t\t  \"InnoDB: though there are still open handles to it.\\n\"\n\t\t  \"InnoDB: Adding the table to the background drop queue.\\n\",\n\t\t  table->name)",
          "old_line_content": "\t\t  \"  InnoDB: Warning: MySQL is trying to drop table %s\\n\"",
          "new_line_content": "\t        fprintf(stderr,",
          "content_same": false
        },
        {
          "line": 2517,
          "old_api": null,
          "new_api": "dict_index_get_n_ordering_defined_by_user",
          "old_text": null,
          "new_text": "dict_index_get_n_ordering_defined_by_user(index)",
          "old_line_content": "",
          "new_line_content": "\t\t\t   dict_index_get_n_ordering_defined_by_user(index)) {",
          "content_same": false
        },
        {
          "line": 2519,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"Error: duplicate key in index %s\\n\",\n\t\t\t\t\t\t\t\tindex->name)",
          "old_line_content": "\t\t\t\t\t\t\t\tindex->name);",
          "new_line_content": "\t\t\tfprintf(stderr, \"Error: duplicate key in index %s\\n\",",
          "content_same": false
        },
        {
          "line": 2008,
          "old_api": null,
          "new_api": "row_add_table_to_background_drop_list",
          "old_text": null,
          "new_text": "row_add_table_to_background_drop_list(table)",
          "old_line_content": "",
          "new_line_content": "\t\trow_add_table_to_background_drop_list(table);",
          "content_same": false
        },
        {
          "line": 2523,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"InnoDB: prev record %s\\n\", err_buf)",
          "old_line_content": "",
          "new_line_content": "\t  \t\tfprintf(stderr, \"InnoDB: prev record %s\\n\", err_buf);",
          "content_same": false
        },
        {
          "line": 2526,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"InnoDB: record %s\\n\", err_buf)",
          "old_line_content": "",
          "new_line_content": "\t  \t\tfprintf(stderr, \"InnoDB: record %s\\n\", err_buf);",
          "content_same": false
        },
        {
          "line": 2018,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\n\t\t  \"  InnoDB: You are trying to drop table %s\\n\"\n\t\t  \"InnoDB: though there are foreign key check running on it.\\n\"\n\t\t  \"InnoDB: Adding the table to the background drop queue.\\n\",\n\t\t  table->name)",
          "old_line_content": "\t\t  \"  InnoDB: You are trying to drop table %s\\n\"",
          "new_line_content": "\t        fprintf(stderr,",
          "content_same": false
        },
        {
          "line": 2532,
          "old_api": null,
          "new_api": "mem_heap_empty",
          "old_text": null,
          "new_text": "mem_heap_empty(heap)",
          "old_line_content": "\t",
          "new_line_content": "\tmem_heap_empty(heap);",
          "content_same": false
        },
        {
          "line": 2534,
          "old_api": null,
          "new_api": "row_rec_to_index_entry",
          "old_text": null,
          "new_text": "row_rec_to_index_entry(ROW_COPY_DATA, index, rec, heap)",
          "old_line_content": "",
          "new_line_content": "\tprev_entry = row_rec_to_index_entry(ROW_COPY_DATA, index, rec, heap);",
          "content_same": false
        },
        {
          "line": 2536,
          "old_api": null,
          "new_api": "row_search_for_mysql",
          "old_text": null,
          "new_text": "row_search_for_mysql(buf, PAGE_CUR_G, prebuilt, 0, ROW_SEL_NEXT)",
          "old_line_content": "",
          "new_line_content": "\tret = row_search_for_mysql(buf, PAGE_CUR_G, prebuilt, 0, ROW_SEL_NEXT);",
          "content_same": false
        },
        {
          "line": 2024,
          "old_api": null,
          "new_api": "row_add_table_to_background_drop_list",
          "old_text": null,
          "new_text": "row_add_table_to_background_drop_list(table)",
          "old_line_content": "",
          "new_line_content": "\t\trow_add_table_to_background_drop_list(table);",
          "content_same": false
        },
        {
          "line": 2033,
          "old_api": null,
          "new_api": "lock_reset_all_on_table",
          "old_text": null,
          "new_text": "lock_reset_all_on_table(table)",
          "old_line_content": "",
          "new_line_content": "\tlock_reset_all_on_table(table);",
          "content_same": false
        },
        {
          "line": 2038,
          "old_api": null,
          "new_api": "que_fork_start_command",
          "old_text": null,
          "new_text": "que_fork_start_command(graph, SESS_COMM_EXECUTE, 0)",
          "old_line_content": "",
          "new_line_content": "\tut_a(thr = que_fork_start_command(graph, SESS_COMM_EXECUTE, 0));",
          "content_same": false
        },
        {
          "line": 2040,
          "old_api": null,
          "new_api": "que_run_threads",
          "old_text": null,
          "new_text": "que_run_threads(thr)",
          "old_line_content": "",
          "new_line_content": "\tque_run_threads(thr);",
          "content_same": false
        },
        {
          "line": 2045,
          "old_api": null,
          "new_api": "ut_a",
          "old_text": null,
          "new_text": "ut_a(err == DB_OUT_OF_FILE_SPACE)",
          "old_line_content": "",
          "new_line_content": "\t\tut_a(err == DB_OUT_OF_FILE_SPACE);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 2048,
          "old_api": "row_mysql_handle_errors",
          "new_api": null,
          "old_text": "row_mysql_handle_errors(&err, trx, thr, NULL)",
          "new_text": null,
          "old_line_content": "\t\trow_mysql_handle_errors(&err, trx, thr, NULL);",
          "new_line_content": "\t\t",
          "content_same": false
        },
        {
          "line": 2050,
          "old_api": "ut_a",
          "new_api": null,
          "old_text": "ut_a(0)",
          "new_text": null,
          "old_line_content": "\t\tut_a(0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2052,
          "old_api": "dict_table_remove_from_cache",
          "new_api": null,
          "old_text": "dict_table_remove_from_cache(table)",
          "new_text": null,
          "old_line_content": "\t\tdict_table_remove_from_cache(table);",
          "new_line_content": "\t} else {",
          "content_same": false
        },
        {
          "line": 2054,
          "old_api": "dict_load_table",
          "new_api": null,
          "old_text": "dict_load_table(name)",
          "new_text": null,
          "old_line_content": "\t\tif (dict_load_table(name) != NULL) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2568,
          "old_api": "dict_table_get_first_index",
          "new_api": null,
          "old_text": "dict_table_get_first_index(table)",
          "new_text": null,
          "old_line_content": "\tindex = dict_table_get_first_index(table);",
          "new_line_content": "\t",
          "content_same": false
        },
        {
          "line": 2573,
          "old_api": "btr_validate_tree",
          "new_api": null,
          "old_text": "btr_validate_tree(index->tree)",
          "new_text": null,
          "old_line_content": "\t\tif (!btr_validate_tree(index->tree)) {",
          "new_line_content": "\t",
          "content_same": false
        },
        {
          "line": 2064,
          "old_api": "row_mysql_unlock_data_dictionary",
          "new_api": null,
          "old_text": "row_mysql_unlock_data_dictionary(trx)",
          "new_text": null,
          "old_line_content": "\t\trow_mysql_unlock_data_dictionary(trx);\t",
          "new_line_content": "\tif (locked_dictionary) {",
          "content_same": false
        },
        {
          "line": 2576,
          "old_api": "row_scan_and_check_index",
          "new_api": null,
          "old_text": "row_scan_and_check_index(prebuilt,\n\t\t\t\t\t\t\tindex, &n_rows)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!row_scan_and_check_index(prebuilt,",
          "new_line_content": "\t\t} else {",
          "content_same": false
        },
        {
          "line": 2067,
          "old_api": "que_graph_free",
          "new_api": null,
          "old_text": "que_graph_free(graph)",
          "new_text": null,
          "old_line_content": "\tque_graph_free(graph);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2069,
          "old_api": "trx_commit_for_mysql",
          "new_api": null,
          "old_text": "trx_commit_for_mysql(trx)",
          "new_text": null,
          "old_line_content": "  \ttrx_commit_for_mysql(trx);",
          "new_line_content": "\t",
          "content_same": false
        },
        {
          "line": 2584,
          "old_api": "dict_table_get_first_index",
          "new_api": null,
          "old_text": "dict_table_get_first_index(table)",
          "new_text": null,
          "old_line_content": "\t\t\tif (index == dict_table_get_first_index(table)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2073,
          "old_api": "srv_wake_master_thread",
          "new_api": null,
          "old_text": "srv_wake_master_thread()",
          "new_text": null,
          "old_line_content": "\tsrv_wake_master_thread();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2590,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\n\t\t\"Error: index %s contains %lu entries, should be %lu\\n\",\n\t\t\t\t\tindex->name, n_rows, n_rows_in_table)",
          "new_text": null,
          "old_line_content": "\t\t\t\tfprintf(stderr,",
          "new_line_content": " ",
          "content_same": false
        },
        {
          "line": 2596,
          "old_api": "dict_table_get_next_index",
          "new_api": null,
          "old_text": "dict_table_get_next_index(index)",
          "new_text": null,
          "old_line_content": "\t\tindex = dict_table_get_next_index(index);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2092,
          "old_api": "os_thread_get_curr_id",
          "new_api": null,
          "old_text": "os_thread_get_curr_id()",
          "new_text": null,
          "old_line_content": "\tut_ad(trx->mysql_thread_id == os_thread_get_curr_id());",
          "new_line_content": "\t",
          "content_same": false
        },
        {
          "line": 2605,
          "old_api": "btr_search_validate",
          "new_api": null,
          "old_text": "btr_search_validate()",
          "new_text": null,
          "old_line_content": "\tif (!btr_search_validate()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2098,
          "old_api": "trx_start_if_not_started",
          "new_api": null,
          "old_text": "trx_start_if_not_started(trx)",
          "new_text": null,
          "old_line_content": "\ttrx_start_if_not_started(trx);",
          "new_line_content": "\t",
          "content_same": false
        },
        {
          "line": 2100,
          "old_api": "row_mysql_lock_data_dictionary",
          "new_api": null,
          "old_text": "row_mysql_lock_data_dictionary(trx)",
          "new_text": null,
          "old_line_content": "\trow_mysql_lock_data_dictionary(trx);",
          "new_line_content": "loop:",
          "content_same": false
        },
        {
          "line": 2102,
          "old_api": "dict_get_first_table_name_in_db",
          "new_api": null,
          "old_text": "dict_get_first_table_name_in_db(name)",
          "new_text": null,
          "old_line_content": "\twhile ((table_name = dict_get_first_table_name_in_db(name))) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2105,
          "old_api": "dict_table_get_low",
          "new_api": null,
          "old_text": "dict_table_get_low(table_name)",
          "new_text": null,
          "old_line_content": "\t\ttable = dict_table_get_low(table_name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2107,
          "old_api": "ut_a",
          "new_api": null,
          "old_text": "ut_a(table)",
          "new_text": null,
          "old_line_content": "\t\tut_a(table);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2113,
          "old_api": "row_mysql_unlock_data_dictionary",
          "new_api": null,
          "old_text": "row_mysql_unlock_data_dictionary(trx)",
          "new_text": null,
          "old_line_content": "\t\t\trow_mysql_unlock_data_dictionary(trx);",
          "new_line_content": "\t\tif (table->n_mysql_handles_opened > 0) {",
          "content_same": false
        },
        {
          "line": 2115,
          "old_api": "ut_print_timestamp",
          "new_api": null,
          "old_text": "ut_print_timestamp(stderr)",
          "new_text": null,
          "old_line_content": "\t\t\tut_print_timestamp(stderr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2121,
          "old_api": "os_thread_sleep",
          "new_api": null,
          "old_text": "os_thread_sleep(1000000)",
          "new_text": null,
          "old_line_content": "\t\t        os_thread_sleep(1000000);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2123,
          "old_api": "mem_free",
          "new_api": null,
          "old_text": "mem_free(table_name)",
          "new_text": null,
          "old_line_content": "\t\t        mem_free(table_name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2128,
          "old_api": "row_drop_table_for_mysql",
          "new_api": null,
          "old_text": "row_drop_table_for_mysql(table_name, trx)",
          "new_text": null,
          "old_line_content": "\t\terr = row_drop_table_for_mysql(table_name, trx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2130,
          "old_api": "mem_free",
          "new_api": null,
          "old_text": "mem_free(table_name)",
          "new_text": null,
          "old_line_content": "\t\tmem_free(table_name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2133,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\n\t\"InnoDB: DROP DATABASE %s failed with error %lu for table %s\\n\",\n\t\t\t\tname, (ulint)err, table_name)",
          "new_text": null,
          "old_line_content": "\t\t\tfprintf(stderr,",
          "new_line_content": "\t\tif (err != DB_SUCCESS) {",
          "content_same": false
        },
        {
          "line": 2140,
          "old_api": "row_mysql_unlock_data_dictionary",
          "new_api": null,
          "old_text": "row_mysql_unlock_data_dictionary(trx)",
          "new_text": null,
          "old_line_content": "\trow_mysql_unlock_data_dictionary(trx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2142,
          "old_api": "trx_commit_for_mysql",
          "new_api": null,
          "old_text": "trx_commit_for_mysql(trx)",
          "new_text": null,
          "old_line_content": "\ttrx_commit_for_mysql(trx);",
          "new_line_content": "\t",
          "content_same": false
        },
        {
          "line": 2161,
          "old_api": "ut_strlen",
          "new_api": null,
          "old_text": "ut_strlen(name)",
          "new_text": null,
          "old_line_content": "\tfor (i = 0; i <= ut_strlen(name) - 5; i++) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2196,
          "old_api": "os_thread_get_curr_id",
          "new_api": null,
          "old_text": "os_thread_get_curr_id()",
          "new_text": null,
          "old_line_content": "\tut_ad(trx->mysql_thread_id == os_thread_get_curr_id());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2201,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\n\t\t\"InnoDB: A new raw disk partition was initialized or\\n\"\n\t\t\"InnoDB: innodb_force_recovery is on: we do not allow\\n\"\n\t\t\"InnoDB: database modifications by the user. Shut down\\n\"\n\t\t\"InnoDB: mysqld and edit my.cnf so that newraw is replaced\\n\"\n\t\t\"InnoDB: with raw, and innodb_force_... is removed.\\n\")",
          "new_text": null,
          "old_line_content": "\t\tfprintf(stderr,",
          "new_line_content": "\tif (srv_created_new_raw || srv_force_recovery) {",
          "content_same": false
        },
        {
          "line": 2208,
          "old_api": "trx_commit_for_mysql",
          "new_api": null,
          "old_text": "trx_commit_for_mysql(trx)",
          "new_text": null,
          "old_line_content": "  \t\ttrx_commit_for_mysql(trx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2212,
          "old_api": "ut_strcmp",
          "new_api": null,
          "old_text": "ut_strcmp(new_name, (char*)\"mysql/host\")",
          "new_text": null,
          "old_line_content": "\tif (0 == ut_strcmp(new_name, (char*)\"mysql/host\")",
          "new_line_content": "\t",
          "content_same": false
        },
        {
          "line": 2216,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\n    \"InnoDB: Error: trying to create a MySQL system table %s of type InnoDB.\\n\"\n    \"InnoDB: MySQL system tables must be of the MyISAM type!\\n\",\n\t\tnew_name)",
          "new_text": null,
          "old_line_content": "\t\tfprintf(stderr,",
          "new_line_content": "\t    \t",
          "content_same": false
        },
        {
          "line": 2221,
          "old_api": "trx_commit_for_mysql",
          "new_api": null,
          "old_text": "trx_commit_for_mysql(trx)",
          "new_text": null,
          "old_line_content": "  \t\ttrx_commit_for_mysql(trx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2226,
          "old_api": "trx_start_if_not_started",
          "new_api": null,
          "old_text": "trx_start_if_not_started(trx)",
          "new_text": null,
          "old_line_content": "\ttrx_start_if_not_started(trx);",
          "new_line_content": "\ttrx->op_info = (char *) \"renaming table\";",
          "content_same": false
        },
        {
          "line": 2231,
          "old_api": "row_mysql_lock_data_dictionary",
          "new_api": null,
          "old_text": "row_mysql_lock_data_dictionary(trx)",
          "new_text": null,
          "old_line_content": "\trow_mysql_lock_data_dictionary(trx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2233,
          "old_api": "dict_table_get_low",
          "new_api": null,
          "old_text": "dict_table_get_low(old_name)",
          "new_text": null,
          "old_line_content": "\ttable = dict_table_get_low(old_name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2251,
          "old_api": "row_is_mysql_tmp_table_name",
          "new_api": null,
          "old_text": "row_is_mysql_tmp_table_name(new_name)",
          "new_text": null,
          "old_line_content": "\tif (row_is_mysql_tmp_table_name(new_name)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2259,
          "old_api": "mem_heap_create",
          "new_api": null,
          "old_text": "mem_heap_create(100)",
          "new_text": null,
          "old_line_content": "\t\theap = mem_heap_create(100);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2261,
          "old_api": "dict_foreign_parse_drop_constraints",
          "new_api": null,
          "old_text": "dict_foreign_parse_drop_constraints(heap, trx,\n\t\t\t\t\ttable,\n\t\t\t\t\t&n_constraints_to_drop,\n\t\t\t\t\t&constraints_to_drop)",
          "new_text": null,
          "old_line_content": "\t\terr = dict_foreign_parse_drop_constraints(heap, trx,",
          "new_line_content": "\t\t",
          "content_same": false
        },
        {
          "line": 2270,
          "old_api": "mem_heap_alloc",
          "new_api": null,
          "old_text": "mem_heap_alloc(heap,\n\t\t\t\t\t1000 + 500 * n_constraints_to_drop)",
          "new_text": null,
          "old_line_content": "\t\tstr3 = mem_heap_alloc(heap,",
          "new_line_content": "\t\t",
          "content_same": false
        },
        {
          "line": 2273,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(str3,\n\t\t\t\"';\\n\"\n\t\t\t\"UPDATE SYS_TABLES SET NAME = new_table_name\\n\"\n\t\t\t\"WHERE NAME = old_table_name;\\n\")",
          "new_text": null,
          "old_line_content": "\t\tsprintf(str3,",
          "new_line_content": "\t\t*str3 = '\\0';",
          "content_same": false
        },
        {
          "line": 2279,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(str3)",
          "new_text": null,
          "old_line_content": "\t\t\tsprintf(str3 + strlen(str3),",
          "new_line_content": "\t\tfor (i = 0; i < n_constraints_to_drop; i++) {",
          "content_same": false
        },
        {
          "line": 2286,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(str3)",
          "new_text": null,
          "old_line_content": "\t\tsprintf(str3 + strlen(str3),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2289,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(str3)",
          "new_text": null,
          "old_line_content": "\t\tut_a(strlen(str3) < 1000 + 500 * n_constraints_to_drop);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2302,
          "old_api": "ut_strlen",
          "new_api": null,
          "old_text": "ut_strlen(str1)",
          "new_text": null,
          "old_line_content": "\tlen = ut_strlen(str1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2304,
          "old_api": "ut_memcpy",
          "new_api": null,
          "old_text": "ut_memcpy(buf, str1, len)",
          "new_text": null,
          "old_line_content": "\tut_memcpy(buf, str1, len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2306,
          "old_api": "ut_strlen",
          "new_api": null,
          "old_text": "ut_strlen(new_name)",
          "new_text": null,
          "old_line_content": "\tut_memcpy(buf + len, new_name, ut_strlen(new_name));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2308,
          "old_api": "ut_strlen",
          "new_api": null,
          "old_text": "ut_strlen(new_name)",
          "new_text": null,
          "old_line_content": "\tlen += ut_strlen(new_name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2310,
          "old_api": "ut_strlen",
          "new_api": null,
          "old_text": "ut_strlen(str2)",
          "new_text": null,
          "old_line_content": "\tut_memcpy(buf + len, str2, ut_strlen(str2));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2312,
          "old_api": "ut_strlen",
          "new_api": null,
          "old_text": "ut_strlen(str2)",
          "new_text": null,
          "old_line_content": "\tlen += ut_strlen(str2);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2314,
          "old_api": "ut_strlen",
          "new_api": null,
          "old_text": "ut_strlen(old_name)",
          "new_text": null,
          "old_line_content": "\tut_memcpy(buf + len, old_name, ut_strlen(old_name));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2316,
          "old_api": "ut_strlen",
          "new_api": null,
          "old_text": "ut_strlen(old_name)",
          "new_text": null,
          "old_line_content": "\tlen += ut_strlen(old_name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2318,
          "old_api": "ut_strlen",
          "new_api": null,
          "old_text": "ut_strlen(str3)",
          "new_text": null,
          "old_line_content": "\tut_memcpy(buf + len, str3, ut_strlen(str3) + 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2320,
          "old_api": "pars_sql",
          "new_api": null,
          "old_text": "pars_sql(buf)",
          "new_text": null,
          "old_line_content": "\tgraph = pars_sql(buf);",
          "new_line_content": "\t",
          "content_same": false
        },
        {
          "line": 2322,
          "old_api": "ut_a",
          "new_api": null,
          "old_text": "ut_a(graph)",
          "new_text": null,
          "old_line_content": "\tut_a(graph);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2329,
          "old_api": "que_fork_start_command",
          "new_api": null,
          "old_text": "que_fork_start_command(graph, SESS_COMM_EXECUTE, 0)",
          "new_text": null,
          "old_line_content": "\tut_a(thr = que_fork_start_command(graph, SESS_COMM_EXECUTE, 0));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2331,
          "old_api": "que_run_threads",
          "new_api": null,
          "old_text": "que_run_threads(thr)",
          "new_text": null,
          "old_line_content": "\tque_run_threads(thr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2337,
          "old_api": "ut_print_timestamp",
          "new_api": null,
          "old_text": "ut_print_timestamp(stderr)",
          "new_text": null,
          "old_line_content": "\t    \t\tut_print_timestamp(stderr);",
          "new_line_content": "\t\tif (err == DB_DUPLICATE_KEY) {",
          "content_same": false
        },
        {
          "line": 2339,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\n     \"  InnoDB: Error: table %s exists in the InnoDB internal data\\n\"\n     \"InnoDB: dictionary though MySQL is trying rename table %s to it.\\n\"\n     \"InnoDB: Have you deleted the .frm file and not used DROP TABLE?\\n\"\n     \"InnoDB: You can look further help from section 15.1 of\\n\"\n     \"InnoDB: http://www.innodb.com/ibman.html\\n\",\n\t\t\tnew_name, old_name)",
          "new_text": null,
          "old_line_content": "\t\t\tfprintf(stderr,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2347,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\n     \"InnoDB: If table %s is a temporary table #sql..., then it can be that\\n\"\n     \"InnoDB: there are still queries running on the table, and it will be\\n\"\n     \"InnoDB: dropped automatically when the queries end.\\n\", new_name)",
          "new_text": null,
          "old_line_content": "\t\t\tfprintf(stderr,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2352,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\n     \"InnoDB: You can drop the orphaned table inside InnoDB by\\n\"\n     \"InnoDB: creating an InnoDB table with the same name in another\\n\"\n     \"InnoDB: database and moving the .frm file to the current database.\\n\"\n     \"InnoDB: Then MySQL thinks the table exists, and DROP TABLE will\\n\"\n     \"InnoDB: succeed.\\n\")",
          "new_text": null,
          "old_line_content": "\t\t\tfprintf(stderr,",
          "new_line_content": "\t\t\t",
          "content_same": false
        },
        {
          "line": 2361,
          "old_api": "trx_general_rollback_for_mysql",
          "new_api": null,
          "old_text": "trx_general_rollback_for_mysql(trx, FALSE, NULL)",
          "new_text": null,
          "old_line_content": "\t\ttrx_general_rollback_for_mysql(trx, FALSE, NULL);",
          "new_line_content": "\t\ttrx->error_state = DB_SUCCESS;",
          "content_same": false
        },
        {
          "line": 2364,
          "old_api": "dict_table_rename_in_cache",
          "new_api": null,
          "old_text": "dict_table_rename_in_cache(table, new_name,\n\t\t\t\t!row_is_mysql_tmp_table_name(new_name))",
          "new_text": null,
          "old_line_content": "\t\tut_a(dict_table_rename_in_cache(table, new_name,",
          "new_line_content": "\t} else {",
          "content_same": false
        },
        {
          "line": 2367,
          "old_api": "row_is_mysql_tmp_table_name",
          "new_api": null,
          "old_text": "row_is_mysql_tmp_table_name(old_name)",
          "new_text": null,
          "old_line_content": "\t\tif (row_is_mysql_tmp_table_name(old_name)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2376,
          "old_api": "dict_load_foreigns",
          "new_api": null,
          "old_text": "dict_load_foreigns(new_name)",
          "new_text": null,
          "old_line_content": "\t\t\terr = dict_load_foreigns(new_name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2380,
          "old_api": "ut_print_timestamp",
          "new_api": null,
          "old_text": "ut_print_timestamp(stderr)",
          "new_text": null,
          "old_line_content": "\t    \t\t\tut_print_timestamp(stderr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2382,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\n     \"  InnoDB: Error: in ALTER TABLE table %s\\n\"\n     \"InnoDB: has or is referenced in foreign key constraints\\n\"\n     \"InnoDB: which are not compatible with the new table definition.\\n\",\n     new_name)",
          "new_text": null,
          "old_line_content": "\t\t\t\tfprintf(stderr,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2388,
          "old_api": "dict_table_rename_in_cache",
          "new_api": null,
          "old_text": "dict_table_rename_in_cache(table,\n\t\t\t\t\t\t\told_name, FALSE)",
          "new_text": null,
          "old_line_content": "\t\t\t\tut_a(dict_table_rename_in_cache(table,",
          "new_line_content": "     ",
          "content_same": false
        },
        {
          "line": 2392,
          "old_api": "trx_general_rollback_for_mysql",
          "new_api": null,
          "old_text": "trx_general_rollback_for_mysql(trx, FALSE,\n\t\t\t\t\t\t\t\t\tNULL)",
          "new_text": null,
          "old_line_content": "\t\t\t\ttrx_general_rollback_for_mysql(trx, FALSE,",
          "new_line_content": "\t\t\t\ttrx->error_state = DB_SUCCESS;",
          "content_same": false
        },
        {
          "line": 2399,
          "old_api": "row_mysql_unlock_data_dictionary",
          "new_api": null,
          "old_text": "row_mysql_unlock_data_dictionary(trx)",
          "new_text": null,
          "old_line_content": "\trow_mysql_unlock_data_dictionary(trx);",
          "new_line_content": "funct_exit:\t",
          "content_same": false
        },
        {
          "line": 2402,
          "old_api": "que_graph_free",
          "new_api": null,
          "old_text": "que_graph_free(graph)",
          "new_text": null,
          "old_line_content": "\t\tque_graph_free(graph);",
          "new_line_content": "\tif (graph) {",
          "content_same": false
        },
        {
          "line": 2406,
          "old_api": "mem_heap_free",
          "new_api": null,
          "old_text": "mem_heap_free(heap)",
          "new_text": null,
          "old_line_content": "\t\tmem_heap_free(heap);",
          "new_line_content": "\tif (heap) {",
          "content_same": false
        },
        {
          "line": 2409,
          "old_api": "trx_commit_for_mysql",
          "new_api": null,
          "old_text": "trx_commit_for_mysql(trx)",
          "new_text": null,
          "old_line_content": "  \ttrx_commit_for_mysql(trx);",
          "new_line_content": "\t",
          "content_same": false
        },
        {
          "line": 2445,
          "old_api": "mem_alloc",
          "new_api": null,
          "old_text": "mem_alloc(UNIV_PAGE_SIZE)",
          "new_text": null,
          "old_line_content": "\tbuf = mem_alloc(UNIV_PAGE_SIZE);",
          "new_line_content": "\t",
          "content_same": false
        },
        {
          "line": 2457,
          "old_api": "dtuple_set_n_fields",
          "new_api": null,
          "old_text": "dtuple_set_n_fields(prebuilt->search_tuple, 0)",
          "new_text": null,
          "old_line_content": " \tdtuple_set_n_fields(prebuilt->search_tuple, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1948,
          "old_api": "ut_strlen",
          "new_api": null,
          "old_text": "ut_strlen(str1)",
          "new_text": null,
          "old_line_content": "\tlen = ut_strlen(str1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2461,
          "old_api": "row_search_for_mysql",
          "new_api": null,
          "old_text": "row_search_for_mysql(buf, PAGE_CUR_G, prebuilt, 0, 0)",
          "new_text": null,
          "old_line_content": "\tret = row_search_for_mysql(buf, PAGE_CUR_G, prebuilt, 0, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1950,
          "old_api": "ut_memcpy",
          "new_api": null,
          "old_text": "ut_memcpy(buf, str1, len)",
          "new_text": null,
          "old_line_content": "\tut_memcpy(buf, str1, len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2465,
          "old_api": "mem_free",
          "new_api": null,
          "old_text": "mem_free(buf)",
          "new_text": null,
          "old_line_content": "\t\tmem_free(buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1953,
          "old_api": "ut_strlen",
          "new_api": null,
          "old_text": "ut_strlen(name)",
          "new_text": null,
          "old_line_content": "\tlen += ut_strlen(name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1955,
          "old_api": "ut_strlen",
          "new_api": null,
          "old_text": "ut_strlen(str2)",
          "new_text": null,
          "old_line_content": "\tut_memcpy(buf + len, str2, ut_strlen(str2) + 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1964,
          "old_api": "row_mysql_lock_data_dictionary",
          "new_api": null,
          "old_text": "row_mysql_lock_data_dictionary(trx)",
          "new_text": null,
          "old_line_content": "\t\trow_mysql_lock_data_dictionary(trx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2477,
          "old_api": "mach_read_from_4",
          "new_api": null,
          "old_text": "mach_read_from_4(buf)",
          "new_text": null,
          "old_line_content": "\trec = buf + mach_read_from_4(buf);",
          "new_line_content": "\t",
          "content_same": false
        },
        {
          "line": 1969,
          "old_api": "mutex_own",
          "new_api": null,
          "old_text": "mutex_own(&(dict_sys->mutex))",
          "new_text": null,
          "old_line_content": "\tut_ad(mutex_own(&(dict_sys->mutex)));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2483,
          "old_api": "cmp_dtuple_rec_with_match",
          "new_api": null,
          "old_text": "cmp_dtuple_rec_with_match(prev_entry, rec,\n\t\t\t\t\t\t&matched_fields,\n\t\t\t\t\t\t&matched_bytes)",
          "new_text": null,
          "old_line_content": "\t\tcmp = cmp_dtuple_rec_with_match(prev_entry, rec,",
          "new_line_content": "\t",
          "content_same": false
        },
        {
          "line": 1972,
          "old_api": "pars_sql",
          "new_api": null,
          "old_text": "pars_sql(buf)",
          "new_text": null,
          "old_line_content": "\tgraph = pars_sql(buf);",
          "new_line_content": "\t",
          "content_same": false
        },
        {
          "line": 1974,
          "old_api": "ut_a",
          "new_api": null,
          "old_text": "ut_a(graph)",
          "new_text": null,
          "old_line_content": "\tut_a(graph);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2492,
          "old_api": "dict_index_get_n_ordering_defined_by_user",
          "new_api": null,
          "old_text": "dict_index_get_n_ordering_defined_by_user(index)",
          "new_text": null,
          "old_line_content": "                     i < dict_index_get_n_ordering_defined_by_user(index);",
          "new_line_content": "\t        for (i = 0;",
          "content_same": false
        },
        {
          "line": 1981,
          "old_api": "dict_table_get_low",
          "new_api": null,
          "old_text": "dict_table_get_low(name)",
          "new_text": null,
          "old_line_content": "\ttable = dict_table_get_low(name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2494,
          "old_api": "dfield_get_len",
          "new_api": null,
          "old_text": "dfield_get_len(\n                                      dtuple_get_nth_field(prev_entry, i))",
          "new_text": null,
          "old_line_content": "\t                if (UNIV_SQL_NULL == dfield_get_len(",
          "new_line_content": "\t\t     i++) {",
          "content_same": false
        },
        {
          "line": 1985,
          "old_api": "ut_print_timestamp",
          "new_api": null,
          "old_text": "ut_print_timestamp(stderr)",
          "new_text": null,
          "old_line_content": "\t    \tut_print_timestamp(stderr);",
          "new_line_content": "\t\terr = DB_TABLE_NOT_FOUND;",
          "content_same": false
        },
        {
          "line": 1987,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \n     \t\"  InnoDB: Error: table %s does not exist in the InnoDB internal\\n\"\n     \t\"InnoDB: data dictionary though MySQL is trying to drop it.\\n\"\n     \t\"InnoDB: Have you copied the .frm file of the table to the\\n\"\n\t\"InnoDB: MySQL database directory from another database?\\n\"\n\t\"InnoDB: You can look further help from section 15.1 of\\n\"\n        \"InnoDB: http://www.innodb.com/ibman.html\\n\",\n\t\t\t\t name)",
          "new_text": null,
          "old_line_content": "\t\tfprintf(stderr, ",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2502,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\n\t\t\t\"Error: index records in a wrong order in index %s\\n\",\n\t\t\t\t\t\t\t\tindex->name)",
          "new_text": null,
          "old_line_content": "\t\t\tfprintf(stderr,",
          "new_line_content": "\t\tif (cmp > 0) {",
          "content_same": false
        },
        {
          "line": 2506,
          "old_api": "dtuple_sprintf",
          "new_api": null,
          "old_text": "dtuple_sprintf(err_buf, 900, prev_entry)",
          "new_text": null,
          "old_line_content": "\t  \t\tdtuple_sprintf(err_buf, 900, prev_entry);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2509,
          "old_api": "rec_sprintf",
          "new_api": null,
          "old_text": "rec_sprintf(err_buf, 900, rec)",
          "new_text": null,
          "old_line_content": "\t  \t\trec_sprintf(err_buf, 900, rec);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2000,
          "old_api": "ut_print_timestamp",
          "new_api": null,
          "old_text": "ut_print_timestamp(stderr)",
          "new_text": null,
          "old_line_content": "\t        ut_print_timestamp(stderr);",
          "new_line_content": "\t\t",
          "content_same": false
        },
        {
          "line": 2516,
          "old_api": "dict_index_get_n_ordering_defined_by_user",
          "new_api": null,
          "old_text": "dict_index_get_n_ordering_defined_by_user(index)",
          "new_text": null,
          "old_line_content": "\t\t\t   dict_index_get_n_ordering_defined_by_user(index)) {",
          "new_line_content": "\t\t\t   && matched_fields >=",
          "content_same": false
        },
        {
          "line": 2518,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"Error: duplicate key in index %s\\n\",\n\t\t\t\t\t\t\t\tindex->name)",
          "new_text": null,
          "old_line_content": "\t\t\tfprintf(stderr, \"Error: duplicate key in index %s\\n\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2007,
          "old_api": "row_add_table_to_background_drop_list",
          "new_api": null,
          "old_text": "row_add_table_to_background_drop_list(table)",
          "new_text": null,
          "old_line_content": "\t\trow_add_table_to_background_drop_list(table);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2521,
          "old_api": "dtuple_sprintf",
          "new_api": null,
          "old_text": "dtuple_sprintf(err_buf, 900, prev_entry)",
          "new_text": null,
          "old_line_content": "\t  \t\tdtuple_sprintf(err_buf, 900, prev_entry);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2524,
          "old_api": "rec_sprintf",
          "new_api": null,
          "old_text": "rec_sprintf(err_buf, 900, rec)",
          "new_text": null,
          "old_line_content": "\t  \t\trec_sprintf(err_buf, 900, rec);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2016,
          "old_api": "ut_print_timestamp",
          "new_api": null,
          "old_text": "ut_print_timestamp(stderr)",
          "new_text": null,
          "old_line_content": "\t        ut_print_timestamp(stderr);",
          "new_line_content": "\t\t",
          "content_same": false
        },
        {
          "line": 2531,
          "old_api": "mem_heap_empty",
          "new_api": null,
          "old_text": "mem_heap_empty(heap)",
          "new_text": null,
          "old_line_content": "\tmem_heap_empty(heap);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2533,
          "old_api": "row_rec_to_index_entry",
          "new_api": null,
          "old_text": "row_rec_to_index_entry(ROW_COPY_DATA, index, rec, heap)",
          "new_text": null,
          "old_line_content": "\tprev_entry = row_rec_to_index_entry(ROW_COPY_DATA, index, rec, heap);",
          "new_line_content": "\t",
          "content_same": false
        },
        {
          "line": 2535,
          "old_api": "row_search_for_mysql",
          "new_api": null,
          "old_text": "row_search_for_mysql(buf, PAGE_CUR_G, prebuilt, 0, ROW_SEL_NEXT)",
          "new_text": null,
          "old_line_content": "\tret = row_search_for_mysql(buf, PAGE_CUR_G, prebuilt, 0, ROW_SEL_NEXT);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2023,
          "old_api": "row_add_table_to_background_drop_list",
          "new_api": null,
          "old_text": "row_add_table_to_background_drop_list(table)",
          "new_text": null,
          "old_line_content": "\t\trow_add_table_to_background_drop_list(table);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2032,
          "old_api": "lock_reset_all_on_table",
          "new_api": null,
          "old_text": "lock_reset_all_on_table(table)",
          "new_text": null,
          "old_line_content": "\tlock_reset_all_on_table(table);",
          "new_line_content": "\t",
          "content_same": false
        },
        {
          "line": 2037,
          "old_api": "que_fork_start_command",
          "new_api": null,
          "old_text": "que_fork_start_command(graph, SESS_COMM_EXECUTE, 0)",
          "new_text": null,
          "old_line_content": "\tut_a(thr = que_fork_start_command(graph, SESS_COMM_EXECUTE, 0));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2039,
          "old_api": "que_run_threads",
          "new_api": null,
          "old_text": "que_run_threads(thr)",
          "new_text": null,
          "old_line_content": "\tque_run_threads(thr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2044,
          "old_api": "ut_a",
          "new_api": null,
          "old_text": "ut_a(err == DB_OUT_OF_FILE_SPACE)",
          "new_text": null,
          "old_line_content": "\t\tut_a(err == DB_OUT_OF_FILE_SPACE);",
          "new_line_content": "\tif (err != DB_SUCCESS) {",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 20,
      "total_additions": 114,
      "total_deletions": 114,
      "total_api_changes": 248
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 2,
        "api_related_lines": 248,
        "non_api_lines": 2,
        "non_api_line_numbers": [
          1940,
          1941
        ]
      }
    },
    "api_calls_before": 474,
    "api_calls_after": 474,
    "diff_info": {
      "added_lines": 2,
      "removed_lines": 1,
      "total_diff_lines": 15
    }
  }
}
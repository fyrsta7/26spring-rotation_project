{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/e88bd2613e16ed1476ef426e2c0d53d9ffd8566e",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/e88bd2613e16ed1476ef426e2c0d53d9ffd8566e/before.cc",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/e88bd2613e16ed1476ef426e2c0d53d9ffd8566e/after.cc",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/e88bd2613e16ed1476ef426e2c0d53d9ffd8566e/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 2923,
          "old_api": "open_and_lock_tables",
          "new_api": "open_temporary_tables",
          "old_text": "open_and_lock_tables(thd, m_lex->query_tables, TRUE, 0)",
          "new_text": "open_temporary_tables(thd, m_lex->query_tables)",
          "old_line_content": "          open_and_lock_tables(thd, m_lex->query_tables, TRUE, 0));",
          "new_line_content": "      res= (open_temporary_tables(thd, m_lex->query_tables) ||",
          "content_same": false
        },
        {
          "line": 2928,
          "old_api": "DBUG_PRINT",
          "new_api": "open_and_lock_tables",
          "old_text": "DBUG_PRINT(\"info\",(\"exec_core returned: %d\", res))",
          "new_text": "open_and_lock_tables(thd, m_lex->query_tables, true, 0)",
          "old_line_content": "      DBUG_PRINT(\"info\",(\"exec_core returned: %d\", res));",
          "new_line_content": "      res= open_and_lock_tables(thd, m_lex->query_tables, true, 0);",
          "content_same": false
        },
        {
          "line": 2940,
          "old_api": "trans_commit_stmt",
          "new_api": "cleanup",
          "old_text": "trans_commit_stmt(thd)",
          "new_text": "m_lex->unit.cleanup()",
          "old_line_content": "      thd->is_error() ? trans_rollback_stmt(thd) : trans_commit_stmt(thd);",
          "new_line_content": "    m_lex->unit.cleanup();",
          "content_same": false
        },
        {
          "line": 2944,
          "old_api": "close_thread_tables",
          "new_api": "get_stmt_da",
          "old_text": "close_thread_tables(thd)",
          "new_text": "thd->get_stmt_da()->set_overwrite_status(true)",
          "old_line_content": "    close_thread_tables(thd);",
          "new_line_content": "      thd->get_stmt_da()->set_overwrite_status(true);",
          "content_same": false
        },
        {
          "line": 2945,
          "old_api": "thd_proc_info",
          "new_api": "trans_commit_stmt",
          "old_text": "thd_proc_info(thd, 0)",
          "new_text": "trans_commit_stmt(thd)",
          "old_line_content": "    thd_proc_info(thd, 0);",
          "new_line_content": "      thd->is_error() ? trans_rollback_stmt(thd) : trans_commit_stmt(thd);",
          "content_same": false
        },
        {
          "line": 2948,
          "old_api": "release_transactional_locks",
          "new_api": "thd_proc_info",
          "old_text": "thd->mdl_context.release_transactional_locks()",
          "new_text": "thd_proc_info(thd, \"closing tables\")",
          "old_line_content": "      thd->mdl_context.release_transactional_locks();",
          "new_line_content": "    thd_proc_info(thd, \"closing tables\");",
          "content_same": false
        },
        {
          "line": 2950,
          "old_api": "release_statement_locks",
          "new_api": "thd_proc_info",
          "old_text": "thd->mdl_context.release_statement_locks()",
          "new_text": "thd_proc_info(thd, 0)",
          "old_line_content": "      thd->mdl_context.release_statement_locks();",
          "new_line_content": "    thd_proc_info(thd, 0);",
          "content_same": false
        },
        {
          "line": 2955,
          "old_api": "DBUG_PRINT",
          "new_api": "release_statement_locks",
          "old_text": "DBUG_PRINT(\"info\",(\"exec_core returned: %d\", res))",
          "new_text": "thd->mdl_context.release_statement_locks()",
          "old_line_content": "    DBUG_PRINT(\"info\",(\"exec_core returned: %d\", res));",
          "new_line_content": "      thd->mdl_context.release_statement_locks();",
          "content_same": false
        },
        {
          "line": 2979,
          "old_api": "is_error",
          "new_api": "rollback_item_tree_changes",
          "old_text": "thd->is_error()",
          "new_text": "thd->rollback_item_tree_changes()",
          "old_line_content": "  if (!res || !thd->is_error() ||",
          "new_line_content": "  thd->rollback_item_tree_changes();",
          "content_same": false
        },
        {
          "line": 3033,
          "old_api": "set_query_source",
          "new_api": "sql_command",
          "old_text": "thd->profiling.set_query_source(m_query.str, m_query.length)",
          "new_text": "m_lex_keeper.sql_command()",
          "old_line_content": "  thd->profiling.set_query_source(m_query.str, m_query.length);",
          "new_line_content": "  DBUG_PRINT(\"info\", (\"command: %d\", m_lex_keeper.sql_command()));",
          "content_same": false
        },
        {
          "line": 3048,
          "old_api": "reset_lex_and_exec_core",
          "new_api": "query_length",
          "old_text": "m_lex_keeper.reset_lex_and_exec_core(thd, nextp, FALSE, this)",
          "new_text": "thd->query_length()",
          "old_line_content": "      res= m_lex_keeper.reset_lex_and_exec_core(thd, nextp, FALSE, this);",
          "new_line_content": "      general_log_write(thd, COM_QUERY, thd->query(), thd->query_length());",
          "content_same": false
        },
        {
          "line": 3050,
          "old_api": "get_stmt_da",
          "new_api": "query",
          "old_text": "thd->get_stmt_da()->is_eof()",
          "new_text": "thd->query()",
          "old_line_content": "      if (thd->get_stmt_da()->is_eof())",
          "new_line_content": "    if (query_cache_send_result_to_client(thd, thd->query(),",
          "content_same": false
        },
        {
          "line": 3053,
          "old_api": "update_server_status",
          "new_api": "reset_lex_and_exec_core",
          "old_text": "thd->update_server_status()",
          "new_text": "m_lex_keeper.reset_lex_and_exec_core(thd, nextp, FALSE, this)",
          "old_line_content": "        thd->update_server_status();",
          "new_line_content": "      res= m_lex_keeper.reset_lex_and_exec_core(thd, nextp, FALSE, this);",
          "content_same": false
        },
        {
          "line": 3055,
          "old_api": "end_statement",
          "new_api": "get_stmt_da",
          "old_text": "thd->protocol->end_statement()",
          "new_text": "thd->get_stmt_da()->is_eof()",
          "old_line_content": "        thd->protocol->end_statement();",
          "new_line_content": "      if (thd->get_stmt_da()->is_eof())",
          "content_same": false
        },
        {
          "line": 3058,
          "old_api": "query_cache_end_of_result",
          "new_api": "update_server_status",
          "old_text": "query_cache_end_of_result(thd)",
          "new_text": "thd->update_server_status()",
          "old_line_content": "      query_cache_end_of_result(thd);",
          "new_line_content": "        thd->update_server_status();",
          "content_same": false
        },
        {
          "line": 3060,
          "old_api": "unlikely",
          "new_api": "end_statement",
          "old_text": "unlikely(thd->enable_slow_log)",
          "new_text": "thd->protocol->end_statement()",
          "old_line_content": "      if (!res && unlikely(thd->enable_slow_log))",
          "new_line_content": "        thd->protocol->end_statement();",
          "content_same": false
        },
        {
          "line": 3065,
          "old_api": "set_query",
          "new_api": "unlikely",
          "old_text": "thd->set_query(query_backup)",
          "new_text": "unlikely(thd->enable_slow_log)",
          "old_line_content": "    thd->set_query(query_backup);",
          "new_line_content": "      if (!res && unlikely(thd->enable_slow_log))",
          "content_same": false
        },
        {
          "line": 3167,
          "old_api": "reserve",
          "new_api": "find_variable",
          "old_text": "str->reserve(rsrv)",
          "new_text": "m_ctx->find_variable(m_offset)",
          "old_line_content": "  if (str->reserve(rsrv))",
          "new_line_content": "  sp_variable *var = m_ctx->find_variable(m_offset);",
          "content_same": false
        },
        {
          "line": 3172,
          "old_api": "qs_append",
          "new_api": "reserve",
          "old_text": "str->qs_append(var->name.str, var->name.length)",
          "new_text": "str->reserve(rsrv)",
          "old_line_content": "    str->qs_append(var->name.str, var->name.length);",
          "new_line_content": "  if (str->reserve(rsrv))",
          "content_same": false
        },
        {
          "line": 3177,
          "old_api": "print",
          "new_api": "qs_append",
          "old_text": "m_value->print(str, QT_ORDINARY)",
          "new_text": "str->qs_append(var->name.str, var->name.length)",
          "old_line_content": "  m_value->print(str, QT_ORDINARY);",
          "new_line_content": "    str->qs_append(var->name.str, var->name.length);",
          "content_same": false
        },
        {
          "line": 3332,
          "old_api": "qs_append",
          "new_api": "reserve",
          "old_text": "str->qs_append(m_cont_dest)",
          "new_text": "str->reserve(2*SP_INSTR_UINT_MAXLEN+14+32)",
          "old_line_content": "  str->qs_append(m_cont_dest);",
          "new_line_content": "  if (str->reserve(2*SP_INSTR_UINT_MAXLEN+14+32)) // Add some for the expr. too",
          "content_same": false
        },
        {
          "line": 3334,
          "old_api": "print",
          "new_api": "STRING_WITH_LEN",
          "old_text": "m_expr->print(str, QT_ORDINARY)",
          "new_text": "STRING_WITH_LEN(\"jump_if_not \")",
          "old_line_content": "  m_expr->print(str, QT_ORDINARY);",
          "new_line_content": "  str->qs_append(STRING_WITH_LEN(\"jump_if_not \"));",
          "content_same": false
        },
        {
          "line": 3349,
          "old_api": "add_mark_lead",
          "new_api": "get_instr",
          "old_text": "sp->add_mark_lead(m_dest, leads)",
          "new_text": "sp->get_instr(m_dest)",
          "old_line_content": "  sp->add_mark_lead(m_dest, leads);",
          "new_line_content": "  if ((i= sp->get_instr(m_dest)))",
          "content_same": false
        },
        {
          "line": 3352,
          "old_api": "opt_shortcut_jump",
          "new_api": "get_instr",
          "old_text": "i->opt_shortcut_jump(sp, this)",
          "new_text": "sp->get_instr(m_dest)",
          "old_line_content": "    m_cont_dest= i->opt_shortcut_jump(sp, this);",
          "new_line_content": "    m_optdest= sp->get_instr(m_dest);",
          "content_same": false
        },
        {
          "line": 3355,
          "old_api": "add_mark_lead",
          "new_api": "get_instr",
          "old_text": "sp->add_mark_lead(m_cont_dest, leads)",
          "new_text": "sp->get_instr(m_cont_dest)",
          "old_line_content": "  sp->add_mark_lead(m_cont_dest, leads);",
          "new_line_content": "  if ((i= sp->get_instr(m_cont_dest)))",
          "content_same": false
        },
        {
          "line": 3376,
          "old_api": "sp_instr_jump::opt_move(dst, bp)",
          "new_api": "push_back",
          "old_text": "sp_instr_jump::opt_move(dst, bp)",
          "new_text": "bp->push_back(this)",
          "old_line_content": "  sp_instr_jump::opt_move(dst, bp);",
          "new_line_content": "      bp->push_back(this);",
          "content_same": false
        },
        {
          "line": 3422,
          "old_api": "print",
          "new_api": "reserve",
          "old_text": "m_value->print(str, QT_ORDINARY)",
          "new_text": "str->reserve(1024+8+32)",
          "old_line_content": "  m_value->print(str, QT_ORDINARY);",
          "new_line_content": "  if (str->reserve(1024+8+32)) // Add some for the expr. too",
          "content_same": false
        },
        {
          "line": 3451,
          "old_api": "qs_append",
          "new_api": "reserve",
          "old_text": "str->qs_append(' ')",
          "new_text": "str->reserve(SP_INSTR_UINT_MAXLEN*2 + 21)",
          "old_line_content": "  str->qs_append(' ');",
          "new_line_content": "  if (str->reserve(SP_INSTR_UINT_MAXLEN*2 + 21))",
          "content_same": false
        },
        {
          "line": 3456,
          "old_api": "STRING_WITH_LEN",
          "new_api": "qs_append",
          "old_text": "STRING_WITH_LEN(\" EXIT\")",
          "new_text": "str->qs_append(' ')",
          "old_line_content": "    str->qs_append(STRING_WITH_LEN(\" EXIT\"));",
          "new_line_content": "  str->qs_append(' ');",
          "content_same": false
        },
        {
          "line": 3479,
          "old_api": "add_mark_lead",
          "new_api": "get_instr",
          "old_text": "sp->add_mark_lead(m_dest, leads)",
          "new_text": "sp->get_instr(m_dest)",
          "old_line_content": "  sp->add_mark_lead(m_dest, leads);",
          "new_line_content": "  if ((i= sp->get_instr(m_dest)))",
          "content_same": false
        },
        {
          "line": 3558,
          "old_api": "qs_append",
          "new_api": "STRING_WITH_LEN",
          "old_text": "str->qs_append(m_frame)",
          "new_text": "STRING_WITH_LEN(\"0 \")",
          "old_line_content": "    str->qs_append(m_frame);",
          "new_line_content": "    str->qs_append(STRING_WITH_LEN(\"0 \"));",
          "content_same": false
        },
        {
          "line": 3617,
          "old_api": "qs_append",
          "new_api": "reserve",
          "old_text": "str->qs_append(cursor_name->str, cursor_name->length)",
          "new_text": "str->reserve(rsrv)",
          "old_line_content": "    str->qs_append(cursor_name->str, cursor_name->length);",
          "new_line_content": "  if (str->reserve(rsrv))",
          "content_same": false
        },
        {
          "line": 3717,
          "old_api": "qs_append",
          "new_api": "reserve",
          "old_text": "str->qs_append(cursor_name->str, cursor_name->length)",
          "new_text": "str->reserve(rsrv)",
          "old_line_content": "    str->qs_append(cursor_name->str, cursor_name->length);",
          "new_line_content": "  if (str->reserve(rsrv))",
          "content_same": false
        },
        {
          "line": 3738,
          "old_api": "close",
          "new_api": "DBUG_ENTER",
          "old_text": "c->close(thd)",
          "new_text": "DBUG_ENTER(\"sp_instr_cclose::execute\")",
          "old_line_content": "    res= c->close(thd);",
          "new_line_content": "  DBUG_ENTER(\"sp_instr_cclose::execute\");",
          "content_same": false
        },
        {
          "line": 3759,
          "old_api": "qs_append",
          "new_api": "reserve",
          "old_text": "str->qs_append(cursor_name->str, cursor_name->length)",
          "new_text": "str->reserve(rsrv)",
          "old_line_content": "    str->qs_append(cursor_name->str, cursor_name->length);",
          "new_line_content": "  if (str->reserve(rsrv))",
          "content_same": false
        },
        {
          "line": 3778,
          "old_api": "fetch",
          "new_api": "get_cursor",
          "old_text": "c->fetch(thd, &m_varlist)",
          "new_text": "thd->spcont->get_cursor(m_cursor)",
          "old_line_content": "  res= c ? c->fetch(thd, &m_varlist) : -1;",
          "new_line_content": "  sp_cursor *c= thd->spcont->get_cursor(m_cursor);",
          "content_same": false
        },
        {
          "line": 3781,
          "old_api": "DBUG_RETURN",
          "new_api": "DBUG_ENTER",
          "old_text": "DBUG_RETURN(res)",
          "new_text": "DBUG_ENTER(\"sp_instr_cfetch::execute\")",
          "old_line_content": "  DBUG_RETURN(res);",
          "new_line_content": "  DBUG_ENTER(\"sp_instr_cfetch::execute\");",
          "content_same": false
        },
        {
          "line": 3802,
          "old_api": "qs_append",
          "new_api": "reserve",
          "old_text": "str->qs_append(cursor_name->str, cursor_name->length)",
          "new_text": "str->reserve(rsrv)",
          "old_line_content": "    str->qs_append(cursor_name->str, cursor_name->length);",
          "new_line_content": "  if (str->reserve(rsrv))",
          "content_same": false
        },
        {
          "line": 3808,
          "old_api": "reserve",
          "new_api": "qs_append",
          "old_text": "str->reserve(pv->name.length+SP_INSTR_UINT_MAXLEN+2)",
          "new_text": "str->qs_append('@')",
          "old_line_content": "    if (str->reserve(pv->name.length+SP_INSTR_UINT_MAXLEN+2))",
          "new_line_content": "    str->qs_append('@');",
          "content_same": false
        },
        {
          "line": 3813,
          "old_api": "qs_append",
          "new_api": "reserve",
          "old_text": "str->qs_append(pv->offset)",
          "new_text": "str->reserve(pv->name.length+SP_INSTR_UINT_MAXLEN+2)",
          "old_line_content": "    str->qs_append(pv->offset);",
          "new_line_content": "    if (str->reserve(pv->name.length+SP_INSTR_UINT_MAXLEN+2))",
          "content_same": false
        },
        {
          "line": 3894,
          "old_api": "qs_append",
          "new_api": "reserve",
          "old_text": "str->qs_append(' ')",
          "new_text": "str->reserve(2*SP_INSTR_UINT_MAXLEN+18+32)",
          "old_line_content": "  str->qs_append(' ');",
          "new_line_content": "  str->reserve(2*SP_INSTR_UINT_MAXLEN+18+32); // Add some extra for expr too",
          "content_same": false
        },
        {
          "line": 3895,
          "old_api": "print",
          "new_api": "STRING_WITH_LEN",
          "old_text": "m_case_expr->print(str, QT_ORDINARY)",
          "new_text": "STRING_WITH_LEN(\"set_case_expr (\")",
          "old_line_content": "  m_case_expr->print(str, QT_ORDINARY);",
          "new_line_content": "  str->qs_append(STRING_WITH_LEN(\"set_case_expr (\"));",
          "content_same": false
        },
        {
          "line": 3909,
          "old_api": "add_mark_lead",
          "new_api": "get_instr",
          "old_text": "sp->add_mark_lead(m_cont_dest, leads)",
          "new_text": "sp->get_instr(m_cont_dest)",
          "old_line_content": "  sp->add_mark_lead(m_cont_dest, leads);",
          "new_line_content": "  if ((i= sp->get_instr(m_cont_dest)))",
          "content_same": false
        },
        {
          "line": 4005,
          "old_api": "strlen",
          "new_api": "memcpy",
          "old_text": "strlen(table->alias)",
          "new_text": "memcpy(tname, table->db, tlen)",
          "old_line_content": "      alen= strlen(table->alias);",
          "new_line_content": "      memcpy(tname, table->db, tlen);",
          "content_same": false
        },
        {
          "line": 4180,
          "old_api": "strmake",
          "new_api": "calloc",
          "old_text": "thd->strmake(name, table->table_name_length)",
          "new_text": "thd->calloc(sizeof(TABLE_LIST))",
          "old_line_content": "  table->table_name= thd->strmake(name, table->table_name_length);",
          "new_line_content": "  if (!(table= (TABLE_LIST *)thd->calloc(sizeof(TABLE_LIST))))",
          "content_same": false
        },
        {
          "line": 4185,
          "old_api": "init",
          "new_api": "strmake",
          "old_text": "table->mdl_request.init(MDL_key::TABLE, table->db, table->table_name,\n                          mdl_type, MDL_TRANSACTION)",
          "new_text": "thd->strmake(name, table->table_name_length)",
          "old_line_content": "  table->mdl_request.init(MDL_key::TABLE, table->db, table->table_name,",
          "new_line_content": "  table->table_name= thd->strmake(name, table->table_name_length);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 3073,
          "old_api": null,
          "new_api": "is_error",
          "old_text": null,
          "new_text": "thd->is_error()",
          "old_line_content": "",
          "new_line_content": "    if (!thd->is_error())",
          "content_same": false
        },
        {
          "line": 3074,
          "old_api": null,
          "new_api": "get_stmt_da",
          "old_text": null,
          "new_text": "thd->get_stmt_da()->reset_diagnostics_area()",
          "old_line_content": "",
          "new_line_content": "      thd->get_stmt_da()->reset_diagnostics_area();",
          "content_same": false
        },
        {
          "line": 4099,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"sp_head::add_used_tables_to_table_list\")",
          "old_line_content": "    memory since current instance of sp_head object can pass away before",
          "new_line_content": "  DBUG_ENTER(\"sp_head::add_used_tables_to_table_list\");",
          "content_same": false
        },
        {
          "line": 3076,
          "old_api": null,
          "new_api": "is_error",
          "old_text": null,
          "new_text": "thd->is_error()",
          "old_line_content": "sp_instr_stmt::print(String *str)",
          "new_line_content": "  DBUG_RETURN(res || thd->is_error());",
          "content_same": false
        },
        {
          "line": 4109,
          "old_api": null,
          "new_api": "activate_stmt_arena_if_needed",
          "old_text": null,
          "new_text": "thd->activate_stmt_arena_if_needed(&backup)",
          "old_line_content": "    TABLE_LIST *table;",
          "new_line_content": "  arena= thd->activate_stmt_arena_if_needed(&backup);",
          "content_same": false
        },
        {
          "line": 3086,
          "old_api": null,
          "new_api": "reserve",
          "old_text": null,
          "new_text": "str->reserve(SP_STMT_PRINT_MAXLEN+SP_INSTR_UINT_MAXLEN+8)",
          "old_line_content": "  len= m_query.length;",
          "new_line_content": "  if (str->reserve(SP_STMT_PRINT_MAXLEN+SP_INSTR_UINT_MAXLEN+8))",
          "content_same": false
        },
        {
          "line": 3597,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"sp_instr_cpush::execute\")",
          "old_line_content": "",
          "new_line_content": "  DBUG_ENTER(\"sp_instr_cpush::execute\");",
          "content_same": false
        },
        {
          "line": 3088,
          "old_api": null,
          "new_api": "STRING_WITH_LEN",
          "old_text": null,
          "new_text": "STRING_WITH_LEN(\"stmt \")",
          "old_line_content": "    Print the query string (but not too much of it), just to indicate which",
          "new_line_content": "  str->qs_append(STRING_WITH_LEN(\"stmt \"));",
          "content_same": false
        },
        {
          "line": 3089,
          "old_api": null,
          "new_api": "sql_command",
          "old_text": null,
          "new_text": "m_lex_keeper.sql_command()",
          "old_line_content": "    statement it is.",
          "new_line_content": "  str->qs_append((uint)m_lex_keeper.sql_command());",
          "content_same": false
        },
        {
          "line": 3090,
          "old_api": null,
          "new_api": "STRING_WITH_LEN",
          "old_text": null,
          "new_text": "STRING_WITH_LEN(\" \\\"\")",
          "old_line_content": "  */",
          "new_line_content": "  str->qs_append(STRING_WITH_LEN(\" \\\"\"));",
          "content_same": false
        },
        {
          "line": 4115,
          "old_api": null,
          "new_api": "my_hash_element",
          "old_text": null,
          "new_text": "my_hash_element(&m_sptabs, i)",
          "old_line_content": "                                        stab->lock_count)) ||",
          "new_line_content": "    SP_TABLE *stab= (SP_TABLE*) my_hash_element(&m_sptabs, i);",
          "content_same": false
        },
        {
          "line": 3599,
          "old_api": null,
          "new_api": "push_cursor",
          "old_text": null,
          "new_text": "thd->spcont->push_cursor(&m_lex_keeper, this)",
          "old_line_content": "}",
          "new_line_content": "  int ret= thd->spcont->push_cursor(&m_lex_keeper, this);",
          "content_same": false
        },
        {
          "line": 3603,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(ret)",
          "old_line_content": "sp_instr_cpush::print(String *str)",
          "new_line_content": "  DBUG_RETURN(ret);",
          "content_same": false
        },
        {
          "line": 4119,
          "old_api": null,
          "new_api": "ALIGN_SIZE",
          "old_text": null,
          "new_text": "ALIGN_SIZE(sizeof(TABLE_LIST))",
          "old_line_content": "",
          "new_line_content": "    if (!(tab_buff= (char *)thd->calloc(ALIGN_SIZE(sizeof(TABLE_LIST)) *",
          "content_same": false
        },
        {
          "line": 4121,
          "old_api": null,
          "new_api": "memdup",
          "old_text": null,
          "new_text": "thd->memdup(stab->qname.str,\n                                       stab->qname.length + 1)",
          "old_line_content": "    {",
          "new_line_content": "        !(key_buff= (char*)thd->memdup(stab->qname.str,",
          "content_same": false
        },
        {
          "line": 3610,
          "old_api": null,
          "new_api": "find_cursor",
          "old_text": null,
          "new_text": "m_ctx->find_cursor(m_cursor)",
          "old_line_content": "  if (cursor_name)",
          "new_line_content": "  const LEX_STRING *cursor_name= m_ctx->find_cursor(m_cursor);",
          "content_same": false
        },
        {
          "line": 4123,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(FALSE)",
          "old_line_content": "",
          "new_line_content": "      DBUG_RETURN(FALSE);",
          "content_same": false
        },
        {
          "line": 3104,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append(c)",
          "old_line_content": "}",
          "new_line_content": "    str->qs_append(c);",
          "content_same": false
        },
        {
          "line": 3107,
          "old_api": null,
          "new_api": "STRING_WITH_LEN",
          "old_text": null,
          "new_text": "STRING_WITH_LEN(\"...\")",
          "old_line_content": "int",
          "new_line_content": "    str->qs_append(STRING_WITH_LEN(\"...\")); /* Indicate truncated string */",
          "content_same": false
        },
        {
          "line": 3108,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append('\"')",
          "old_line_content": "sp_instr_stmt::exec_core(THD *thd, uint *nextp)",
          "new_line_content": "  str->qs_append('\"');",
          "content_same": false
        },
        {
          "line": 3619,
          "old_api": null,
          "new_api": "STRING_WITH_LEN",
          "old_text": null,
          "new_text": "STRING_WITH_LEN(\"cpush \")",
          "old_line_content": "  }",
          "new_line_content": "  str->qs_append(STRING_WITH_LEN(\"cpush \"));",
          "content_same": false
        },
        {
          "line": 3622,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append(cursor_name->str, cursor_name->length)",
          "old_line_content": "",
          "new_line_content": "    str->qs_append(cursor_name->str, cursor_name->length);",
          "content_same": false
        },
        {
          "line": 3623,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append('@')",
          "old_line_content": "",
          "new_line_content": "    str->qs_append('@');",
          "content_same": false
        },
        {
          "line": 3625,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append(m_cursor)",
          "old_line_content": "  sp_instr_cpop class functions",
          "new_line_content": "  str->qs_append(m_cursor);",
          "content_same": false
        },
        {
          "line": 3115,
          "old_api": null,
          "new_api": "query",
          "old_text": null,
          "new_text": "thd->query()",
          "old_line_content": "                         3);",
          "new_line_content": "  MYSQL_QUERY_EXEC_START(thd->query(),",
          "content_same": false
        },
        {
          "line": 4144,
          "old_api": null,
          "new_api": "init",
          "old_text": null,
          "new_text": "table->mdl_request.init(MDL_key::TABLE, table->db, table->table_name,\n                              table->lock_type >= TL_WRITE_ALLOW_WRITE ?\n                              MDL_SHARED_WRITE : MDL_SHARED_READ,\n                              MDL_TRANSACTION)",
          "old_line_content": "      /* Everyting else should be zeroed */",
          "new_line_content": "      table->mdl_request.init(MDL_key::TABLE, table->db, table->table_name,",
          "content_same": false
        },
        {
          "line": 3121,
          "old_api": null,
          "new_api": "mysql_execute_command",
          "old_text": null,
          "new_text": "mysql_execute_command(thd)",
          "old_line_content": "",
          "new_line_content": "  int res= mysql_execute_command(thd);",
          "content_same": false
        },
        {
          "line": 3122,
          "old_api": null,
          "new_api": "MYSQL_QUERY_EXEC_DONE",
          "old_text": null,
          "new_text": "MYSQL_QUERY_EXEC_DONE(res)",
          "old_line_content": "",
          "new_line_content": "  MYSQL_QUERY_EXEC_DONE(res);",
          "content_same": false
        },
        {
          "line": 3636,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"sp_instr_cpop::execute\")",
          "old_line_content": "",
          "new_line_content": "  DBUG_ENTER(\"sp_instr_cpop::execute\");",
          "content_same": false
        },
        {
          "line": 3637,
          "old_api": null,
          "new_api": "pop_cursors",
          "old_text": null,
          "new_text": "thd->spcont->pop_cursors(m_count)",
          "old_line_content": "",
          "new_line_content": "  thd->spcont->pop_cursors(m_count);",
          "content_same": false
        },
        {
          "line": 3639,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(0)",
          "old_line_content": "sp_instr_cpop::print(String *str)",
          "new_line_content": "  DBUG_RETURN(0);",
          "content_same": false
        },
        {
          "line": 4155,
          "old_api": null,
          "new_api": "ALIGN_SIZE",
          "old_text": null,
          "new_text": "ALIGN_SIZE(sizeof(TABLE_LIST))",
          "old_line_content": "  if (arena)",
          "new_line_content": "      tab_buff+= ALIGN_SIZE(sizeof(TABLE_LIST));",
          "content_same": false
        },
        {
          "line": 3135,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"sp_instr_set::execute\")",
          "old_line_content": "",
          "new_line_content": "  DBUG_ENTER(\"sp_instr_set::execute\");",
          "content_same": false
        },
        {
          "line": 3136,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"info\", (\"offset: %u\", m_offset))",
          "old_line_content": "",
          "new_line_content": "  DBUG_PRINT(\"info\", (\"offset: %u\", m_offset));",
          "content_same": false
        },
        {
          "line": 4161,
          "old_api": null,
          "new_api": "restore_active_arena",
          "old_text": null,
          "new_text": "thd->restore_active_arena(arena, &backup)",
          "old_line_content": "",
          "new_line_content": "    thd->restore_active_arena(arena, &backup);",
          "content_same": false
        },
        {
          "line": 3138,
          "old_api": null,
          "new_api": "reset_lex_and_exec_core",
          "old_text": null,
          "new_text": "m_lex_keeper.reset_lex_and_exec_core(thd, nextp, TRUE, this)",
          "old_line_content": "sp_instr_set::exec_core(THD *thd, uint *nextp)",
          "new_line_content": "  DBUG_RETURN(m_lex_keeper.reset_lex_and_exec_core(thd, nextp, TRUE, this));",
          "content_same": false
        },
        {
          "line": 4163,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(result)",
          "old_line_content": "  Simple function for adding an explicitly named (systems) table to",
          "new_line_content": "  DBUG_RETURN(result);",
          "content_same": false
        },
        {
          "line": 3647,
          "old_api": null,
          "new_api": "reserve",
          "old_text": null,
          "new_text": "str->reserve(SP_INSTR_UINT_MAXLEN+5)",
          "old_line_content": "",
          "new_line_content": "  if (str->reserve(SP_INSTR_UINT_MAXLEN+5))",
          "content_same": false
        },
        {
          "line": 3649,
          "old_api": null,
          "new_api": "STRING_WITH_LEN",
          "old_text": null,
          "new_text": "STRING_WITH_LEN(\"cpop \")",
          "old_line_content": "/*",
          "new_line_content": "  str->qs_append(STRING_WITH_LEN(\"cpop \"));",
          "content_same": false
        },
        {
          "line": 3650,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append(m_count)",
          "old_line_content": "  sp_instr_copen class functions",
          "new_line_content": "  str->qs_append(m_count);",
          "content_same": false
        },
        {
          "line": 3145,
          "old_api": null,
          "new_api": "set_variable",
          "old_text": null,
          "new_text": "thd->spcont->set_variable(thd, m_offset, &m_value)",
          "old_line_content": "",
          "new_line_content": "  int res= thd->spcont->set_variable(thd, m_offset, &m_value);",
          "content_same": false
        },
        {
          "line": 3151,
          "old_api": null,
          "new_api": "set_variable",
          "old_text": null,
          "new_text": "thd->spcont->set_variable(thd, m_offset, 0)",
          "old_line_content": "  }",
          "new_line_content": "    if (thd->spcont->set_variable(thd, m_offset, 0))",
          "content_same": false
        },
        {
          "line": 3154,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(ME_FATALERROR)",
          "old_line_content": "  return res;",
          "new_line_content": "      my_error(ER_OUT_OF_RESOURCES, MYF(ME_FATALERROR));",
          "content_same": false
        },
        {
          "line": 4182,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(db)",
          "old_line_content": "  table->lock_type= locktype;",
          "new_line_content": "  table->db_length= strlen(db);",
          "content_same": false
        },
        {
          "line": 4183,
          "old_api": null,
          "new_api": "strmake",
          "old_text": null,
          "new_text": "thd->strmake(db, table->db_length)",
          "old_line_content": "  table->select_lex= lex->current_select;",
          "new_line_content": "  table->db= thd->strmake(db, table->db_length);",
          "content_same": false
        },
        {
          "line": 4184,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(name)",
          "old_line_content": "  table->cacheable_table= 1;",
          "new_line_content": "  table->table_name_length= strlen(name);",
          "content_same": false
        },
        {
          "line": 3670,
          "old_api": null,
          "new_api": "get_cursor",
          "old_text": null,
          "new_text": "thd->spcont->get_cursor(m_cursor)",
          "old_line_content": "    res= -1;",
          "new_line_content": "  sp_cursor *c= thd->spcont->get_cursor(m_cursor);",
          "content_same": false
        },
        {
          "line": 4186,
          "old_api": null,
          "new_api": "strdup",
          "old_text": null,
          "new_text": "thd->strdup(name)",
          "old_line_content": "                          mdl_type, MDL_TRANSACTION);",
          "new_line_content": "  table->alias= thd->strdup(name);",
          "content_same": false
        },
        {
          "line": 3672,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"sp_instr_copen::execute\")",
          "old_line_content": "  {",
          "new_line_content": "  DBUG_ENTER(\"sp_instr_copen::execute\");",
          "content_same": false
        },
        {
          "line": 4190,
          "old_api": null,
          "new_api": "init",
          "old_text": null,
          "new_text": "table->mdl_request.init(MDL_key::TABLE, table->db, table->table_name,\n                          mdl_type, MDL_TRANSACTION)",
          "old_line_content": "}",
          "new_line_content": "  table->mdl_request.init(MDL_key::TABLE, table->db, table->table_name,",
          "content_same": false
        },
        {
          "line": 3678,
          "old_api": null,
          "new_api": "get_lex_keeper",
          "old_text": null,
          "new_text": "c->get_lex_keeper()",
          "old_line_content": "      the free_list of the query, so new items (if any) are stored in",
          "new_line_content": "    sp_lex_keeper *lex_keeper= c->get_lex_keeper();",
          "content_same": false
        },
        {
          "line": 4193,
          "old_api": null,
          "new_api": "add_to_query_tables",
          "old_text": null,
          "new_text": "lex->add_to_query_tables(table)",
          "old_line_content": "",
          "new_line_content": "  lex->add_to_query_tables(table);",
          "content_same": false
        },
        {
          "line": 3174,
          "old_api": null,
          "new_api": "STRING_WITH_LEN",
          "old_text": null,
          "new_text": "STRING_WITH_LEN(\"set \")",
          "old_line_content": "  }",
          "new_line_content": "  str->qs_append(STRING_WITH_LEN(\"set \"));",
          "content_same": false
        },
        {
          "line": 3686,
          "old_api": null,
          "new_api": "get_instr",
          "old_text": null,
          "new_text": "c->get_instr()",
          "old_line_content": "    thd->stmt_arena= old_arena;",
          "new_line_content": "    thd->stmt_arena= c->get_instr();",
          "content_same": false
        },
        {
          "line": 3687,
          "old_api": null,
          "new_api": "reset_lex_and_exec_core",
          "old_text": null,
          "new_text": "lex_keeper->reset_lex_and_exec_core(thd, nextp, FALSE, this)",
          "old_line_content": "    /* TODO: Assert here that we either have an error or a cursor */",
          "new_line_content": "    res= lex_keeper->reset_lex_and_exec_core(thd, nextp, FALSE, this);",
          "content_same": false
        },
        {
          "line": 3178,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append('@')",
          "old_line_content": "}",
          "new_line_content": "    str->qs_append('@');",
          "content_same": false
        },
        {
          "line": 3690,
          "old_api": null,
          "new_api": "cleanup_items",
          "old_text": null,
          "new_text": "cleanup_items(thd->stmt_arena->free_list)",
          "old_line_content": "}",
          "new_line_content": "      cleanup_items(thd->stmt_arena->free_list);",
          "content_same": false
        },
        {
          "line": 3180,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append(m_offset)",
          "old_line_content": "",
          "new_line_content": "  str->qs_append(m_offset);",
          "content_same": false
        },
        {
          "line": 3181,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append(' ')",
          "old_line_content": "/*",
          "new_line_content": "  str->qs_append(' ');",
          "content_same": false
        },
        {
          "line": 3182,
          "old_api": null,
          "new_api": "print",
          "old_text": null,
          "new_text": "m_value->print(str, QT_ORDINARY)",
          "old_line_content": "  sp_instr_set_trigger_field class functions",
          "new_line_content": "  m_value->print(str, QT_ORDINARY);",
          "content_same": false
        },
        {
          "line": 3694,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(res)",
          "old_line_content": "sp_instr_copen::exec_core(THD *thd, uint *nextp)",
          "new_line_content": "  DBUG_RETURN(res);",
          "content_same": false
        },
        {
          "line": 3701,
          "old_api": null,
          "new_api": "get_cursor",
          "old_text": null,
          "new_text": "thd->spcont->get_cursor(m_cursor)",
          "old_line_content": "",
          "new_line_content": "  sp_cursor *c= thd->spcont->get_cursor(m_cursor);",
          "content_same": false
        },
        {
          "line": 3702,
          "old_api": null,
          "new_api": "open",
          "old_text": null,
          "new_text": "c->open(thd)",
          "old_line_content": "void",
          "new_line_content": "  int res= c->open(thd);",
          "content_same": false
        },
        {
          "line": 3193,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"sp_instr_set_trigger_field::execute\")",
          "old_line_content": "",
          "new_line_content": "  DBUG_ENTER(\"sp_instr_set_trigger_field::execute\");",
          "content_same": false
        },
        {
          "line": 3195,
          "old_api": null,
          "new_api": "reset_lex_and_exec_core",
          "old_text": null,
          "new_text": "m_lex_keeper.reset_lex_and_exec_core(thd, nextp, TRUE, this)",
          "old_line_content": "sp_instr_set_trigger_field::exec_core(THD *thd, uint *nextp)",
          "new_line_content": "  DBUG_RETURN(m_lex_keeper.reset_lex_and_exec_core(thd, nextp, TRUE, this));",
          "content_same": false
        },
        {
          "line": 3710,
          "old_api": null,
          "new_api": "find_cursor",
          "old_text": null,
          "new_text": "m_ctx->find_cursor(m_cursor)",
          "old_line_content": "  if (cursor_name)",
          "new_line_content": "  const LEX_STRING *cursor_name= m_ctx->find_cursor(m_cursor);",
          "content_same": false
        },
        {
          "line": 3202,
          "old_api": null,
          "new_api": "set_value",
          "old_text": null,
          "new_text": "trigger_field->set_value(thd, &value)",
          "old_line_content": "void",
          "new_line_content": "  const int res= (trigger_field->set_value(thd, &value) ? -1 : 0);",
          "content_same": false
        },
        {
          "line": 3719,
          "old_api": null,
          "new_api": "STRING_WITH_LEN",
          "old_text": null,
          "new_text": "STRING_WITH_LEN(\"copen \")",
          "old_line_content": "  }",
          "new_line_content": "  str->qs_append(STRING_WITH_LEN(\"copen \"));",
          "content_same": false
        },
        {
          "line": 3210,
          "old_api": null,
          "new_api": "STRING_WITH_LEN",
          "old_text": null,
          "new_text": "STRING_WITH_LEN(\"set_trigger_field \")",
          "old_line_content": "",
          "new_line_content": "  str->append(STRING_WITH_LEN(\"set_trigger_field \"));",
          "content_same": false
        },
        {
          "line": 3211,
          "old_api": null,
          "new_api": "print",
          "old_text": null,
          "new_text": "trigger_field->print(str, QT_ORDINARY)",
          "old_line_content": "/*",
          "new_line_content": "  trigger_field->print(str, QT_ORDINARY);",
          "content_same": false
        },
        {
          "line": 3212,
          "old_api": null,
          "new_api": "STRING_WITH_LEN",
          "old_text": null,
          "new_text": "STRING_WITH_LEN(\":=\")",
          "old_line_content": "  sp_instr_opt_meta",
          "new_line_content": "  str->append(STRING_WITH_LEN(\":=\"));",
          "content_same": false
        },
        {
          "line": 3213,
          "old_api": null,
          "new_api": "print",
          "old_text": null,
          "new_text": "value->print(str, QT_ORDINARY)",
          "old_line_content": "*/",
          "new_line_content": "  value->print(str, QT_ORDINARY);",
          "content_same": false
        },
        {
          "line": 3722,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append(cursor_name->str, cursor_name->length)",
          "old_line_content": "",
          "new_line_content": "    str->qs_append(cursor_name->str, cursor_name->length);",
          "content_same": false
        },
        {
          "line": 3723,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append('@')",
          "old_line_content": "",
          "new_line_content": "    str->qs_append('@');",
          "content_same": false
        },
        {
          "line": 3725,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append(m_cursor)",
          "old_line_content": "  sp_instr_cclose class functions",
          "new_line_content": "  str->qs_append(m_cursor);",
          "content_same": false
        },
        {
          "line": 3736,
          "old_api": null,
          "new_api": "get_cursor",
          "old_text": null,
          "new_text": "thd->spcont->get_cursor(m_cursor)",
          "old_line_content": "    res= -1;",
          "new_line_content": "  sp_cursor *c= thd->spcont->get_cursor(m_cursor);",
          "content_same": false
        },
        {
          "line": 3743,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "c->close(thd)",
          "old_line_content": "",
          "new_line_content": "    res= c->close(thd);",
          "content_same": false
        },
        {
          "line": 3233,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"sp_instr_jump::execute\")",
          "old_line_content": "}",
          "new_line_content": "  DBUG_ENTER(\"sp_instr_jump::execute\");",
          "content_same": false
        },
        {
          "line": 3234,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"info\", (\"destination: %u\", m_dest))",
          "old_line_content": "",
          "new_line_content": "  DBUG_PRINT(\"info\", (\"destination: %u\", m_dest));",
          "content_same": false
        },
        {
          "line": 3745,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(res)",
          "old_line_content": "sp_instr_cclose::print(String *str)",
          "new_line_content": "  DBUG_RETURN(res);",
          "content_same": false
        },
        {
          "line": 3237,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(0)",
          "old_line_content": "{",
          "new_line_content": "  DBUG_RETURN(0);",
          "content_same": false
        },
        {
          "line": 3752,
          "old_api": null,
          "new_api": "find_cursor",
          "old_text": null,
          "new_text": "m_ctx->find_cursor(m_cursor)",
          "old_line_content": "  if (cursor_name)",
          "new_line_content": "  const LEX_STRING *cursor_name= m_ctx->find_cursor(m_cursor);",
          "content_same": false
        },
        {
          "line": 3244,
          "old_api": null,
          "new_api": "reserve",
          "old_text": null,
          "new_text": "str->reserve(SP_INSTR_UINT_MAXLEN+5)",
          "old_line_content": "",
          "new_line_content": "  if (str->reserve(SP_INSTR_UINT_MAXLEN+5))",
          "content_same": false
        },
        {
          "line": 3246,
          "old_api": null,
          "new_api": "STRING_WITH_LEN",
          "old_text": null,
          "new_text": "STRING_WITH_LEN(\"jump \")",
          "old_line_content": "sp_instr_jump::opt_mark(sp_head *sp, List<sp_instr> *leads)",
          "new_line_content": "  str->qs_append(STRING_WITH_LEN(\"jump \"));",
          "content_same": false
        },
        {
          "line": 3247,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append(m_dest)",
          "old_line_content": "{",
          "new_line_content": "  str->qs_append(m_dest);",
          "content_same": false
        },
        {
          "line": 3761,
          "old_api": null,
          "new_api": "STRING_WITH_LEN",
          "old_text": null,
          "new_text": "STRING_WITH_LEN(\"cclose \")",
          "old_line_content": "  }",
          "new_line_content": "  str->qs_append(STRING_WITH_LEN(\"cclose \"));",
          "content_same": false
        },
        {
          "line": 3764,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append(cursor_name->str, cursor_name->length)",
          "old_line_content": "",
          "new_line_content": "    str->qs_append(cursor_name->str, cursor_name->length);",
          "content_same": false
        },
        {
          "line": 3253,
          "old_api": null,
          "new_api": "opt_shortcut_jump",
          "old_text": null,
          "new_text": "opt_shortcut_jump(sp, this)",
          "old_line_content": "}",
          "new_line_content": "  m_dest= opt_shortcut_jump(sp, this);",
          "content_same": false
        },
        {
          "line": 3765,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append('@')",
          "old_line_content": "",
          "new_line_content": "    str->qs_append('@');",
          "content_same": false
        },
        {
          "line": 3767,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append(m_cursor)",
          "old_line_content": "  sp_instr_cfetch class functions",
          "new_line_content": "  str->qs_append(m_cursor);",
          "content_same": false
        },
        {
          "line": 3256,
          "old_api": null,
          "new_api": "get_instr",
          "old_text": null,
          "new_text": "sp->get_instr(m_dest)",
          "old_line_content": "sp_instr_jump::opt_shortcut_jump(sp_head *sp, sp_instr *start)",
          "new_line_content": "  m_optdest= sp->get_instr(m_dest);",
          "content_same": false
        },
        {
          "line": 3266,
          "old_api": null,
          "new_api": "get_instr",
          "old_text": null,
          "new_text": "sp->get_instr(dest)",
          "old_line_content": "      break;",
          "new_line_content": "  while ((i= sp->get_instr(dest)))",
          "content_same": false
        },
        {
          "line": 3783,
          "old_api": null,
          "new_api": "fetch",
          "old_text": null,
          "new_text": "c->fetch(thd, &m_varlist)",
          "old_line_content": "",
          "new_line_content": "  res= c ? c->fetch(thd, &m_varlist) : -1;",
          "content_same": false
        },
        {
          "line": 3272,
          "old_api": null,
          "new_api": "opt_shortcut_jump",
          "old_text": null,
          "new_text": "i->opt_shortcut_jump(sp, start)",
          "old_line_content": "  return dest;",
          "new_line_content": "    ndest= i->opt_shortcut_jump(sp, start);",
          "content_same": false
        },
        {
          "line": 3786,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(res)",
          "old_line_content": "sp_instr_cfetch::print(String *str)",
          "new_line_content": "  DBUG_RETURN(res);",
          "content_same": false
        },
        {
          "line": 3795,
          "old_api": null,
          "new_api": "find_cursor",
          "old_text": null,
          "new_text": "m_ctx->find_cursor(m_cursor)",
          "old_line_content": "  if (cursor_name)",
          "new_line_content": "  const LEX_STRING *cursor_name= m_ctx->find_cursor(m_cursor);",
          "content_same": false
        },
        {
          "line": 3284,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "bp->push_back(this)",
          "old_line_content": "",
          "new_line_content": "    bp->push_back(this);      // Forward",
          "content_same": false
        },
        {
          "line": 3804,
          "old_api": null,
          "new_api": "STRING_WITH_LEN",
          "old_text": null,
          "new_text": "STRING_WITH_LEN(\"cfetch \")",
          "old_line_content": "  }",
          "new_line_content": "  str->qs_append(STRING_WITH_LEN(\"cfetch \"));",
          "content_same": false
        },
        {
          "line": 3807,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append(cursor_name->str, cursor_name->length)",
          "old_line_content": "  {",
          "new_line_content": "    str->qs_append(cursor_name->str, cursor_name->length);",
          "content_same": false
        },
        {
          "line": 3298,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"sp_instr_jump_if_not::execute\")",
          "old_line_content": "",
          "new_line_content": "  DBUG_ENTER(\"sp_instr_jump_if_not::execute\");",
          "content_same": false
        },
        {
          "line": 3299,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"info\", (\"destination: %u\", m_dest))",
          "old_line_content": "int",
          "new_line_content": "  DBUG_PRINT(\"info\", (\"destination: %u\", m_dest));",
          "content_same": false
        },
        {
          "line": 3300,
          "old_api": null,
          "new_api": "reset_lex_and_exec_core",
          "old_text": null,
          "new_text": "m_lex_keeper.reset_lex_and_exec_core(thd, nextp, TRUE, this)",
          "old_line_content": "sp_instr_jump_if_not::exec_core(THD *thd, uint *nextp)",
          "new_line_content": "  DBUG_RETURN(m_lex_keeper.reset_lex_and_exec_core(thd, nextp, TRUE, this));",
          "content_same": false
        },
        {
          "line": 3815,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append(' ')",
          "old_line_content": "}",
          "new_line_content": "    str->qs_append(' ');",
          "content_same": false
        },
        {
          "line": 3816,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append(pv->name.str, pv->name.length)",
          "old_line_content": "",
          "new_line_content": "    str->qs_append(pv->name.str, pv->name.length);",
          "content_same": false
        },
        {
          "line": 3817,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append('@')",
          "old_line_content": "",
          "new_line_content": "    str->qs_append('@');",
          "content_same": false
        },
        {
          "line": 3818,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append(pv->offset)",
          "old_line_content": "/*",
          "new_line_content": "    str->qs_append(pv->offset);",
          "content_same": false
        },
        {
          "line": 3310,
          "old_api": null,
          "new_api": "sp_prepare_func_item",
          "old_text": null,
          "new_text": "sp_prepare_func_item(thd, &m_expr)",
          "old_line_content": "  else",
          "new_line_content": "  it= sp_prepare_func_item(thd, &m_expr);",
          "content_same": false
        },
        {
          "line": 3318,
          "old_api": null,
          "new_api": "val_bool",
          "old_text": null,
          "new_text": "it->val_bool()",
          "old_line_content": "",
          "new_line_content": "    if (! it->val_bool())",
          "content_same": false
        },
        {
          "line": 3830,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"sp_instr_error::execute\")",
          "old_line_content": "}",
          "new_line_content": "  DBUG_ENTER(\"sp_instr_error::execute\");",
          "content_same": false
        },
        {
          "line": 3832,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(0)",
          "old_line_content": "",
          "new_line_content": "  my_message(m_errcode, ER(m_errcode), MYF(0));",
          "content_same": false
        },
        {
          "line": 3834,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(-1)",
          "old_line_content": "sp_instr_error::print(String *str)",
          "new_line_content": "  DBUG_RETURN(-1);",
          "content_same": false
        },
        {
          "line": 3842,
          "old_api": null,
          "new_api": "reserve",
          "old_text": null,
          "new_text": "str->reserve(SP_INSTR_UINT_MAXLEN+6)",
          "old_line_content": "",
          "new_line_content": "  if (str->reserve(SP_INSTR_UINT_MAXLEN+6))",
          "content_same": false
        },
        {
          "line": 3844,
          "old_api": null,
          "new_api": "STRING_WITH_LEN",
          "old_text": null,
          "new_text": "STRING_WITH_LEN(\"error \")",
          "old_line_content": "/**************************************************************************",
          "new_line_content": "  str->qs_append(STRING_WITH_LEN(\"error \"));",
          "content_same": false
        },
        {
          "line": 3845,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append(m_errcode)",
          "old_line_content": "  sp_instr_set_case_expr class implementation",
          "new_line_content": "  str->qs_append(m_errcode);",
          "content_same": false
        },
        {
          "line": 3335,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append(m_dest)",
          "old_line_content": "}",
          "new_line_content": "  str->qs_append(m_dest);",
          "content_same": false
        },
        {
          "line": 3336,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append('(')",
          "old_line_content": "",
          "new_line_content": "  str->qs_append('(');",
          "content_same": false
        },
        {
          "line": 3337,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append(m_cont_dest)",
          "old_line_content": "",
          "new_line_content": "  str->qs_append(m_cont_dest);",
          "content_same": false
        },
        {
          "line": 3338,
          "old_api": null,
          "new_api": "STRING_WITH_LEN",
          "old_text": null,
          "new_text": "STRING_WITH_LEN(\") \")",
          "old_line_content": "uint",
          "new_line_content": "  str->qs_append(STRING_WITH_LEN(\") \"));",
          "content_same": false
        },
        {
          "line": 3339,
          "old_api": null,
          "new_api": "print",
          "old_text": null,
          "new_text": "m_expr->print(str, QT_ORDINARY)",
          "old_line_content": "sp_instr_jump_if_not::opt_mark(sp_head *sp, List<sp_instr> *leads)",
          "new_line_content": "  m_expr->print(str, QT_ORDINARY);",
          "content_same": false
        },
        {
          "line": 3856,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"sp_instr_set_case_expr::execute\")",
          "old_line_content": "",
          "new_line_content": "  DBUG_ENTER(\"sp_instr_set_case_expr::execute\");",
          "content_same": false
        },
        {
          "line": 3858,
          "old_api": null,
          "new_api": "reset_lex_and_exec_core",
          "old_text": null,
          "new_text": "m_lex_keeper.reset_lex_and_exec_core(thd, nextp, TRUE, this)",
          "old_line_content": "sp_instr_set_case_expr::exec_core(THD *thd, uint *nextp)",
          "new_line_content": "  DBUG_RETURN(m_lex_keeper.reset_lex_and_exec_core(thd, nextp, TRUE, this));",
          "content_same": false
        },
        {
          "line": 3351,
          "old_api": null,
          "new_api": "opt_shortcut_jump",
          "old_text": null,
          "new_text": "i->opt_shortcut_jump(sp, this)",
          "old_line_content": "  {",
          "new_line_content": "    m_dest= i->opt_shortcut_jump(sp, this);",
          "content_same": false
        },
        {
          "line": 3865,
          "old_api": null,
          "new_api": "set_case_expr",
          "old_text": null,
          "new_text": "thd->spcont->set_case_expr(thd, m_case_expr_id, &m_case_expr)",
          "old_line_content": "      Failed to evaluate the value, the case expression is still not",
          "new_line_content": "  int res= thd->spcont->set_case_expr(thd, m_case_expr_id, &m_case_expr);",
          "content_same": false
        },
        {
          "line": 3354,
          "old_api": null,
          "new_api": "add_mark_lead",
          "old_text": null,
          "new_text": "sp->add_mark_lead(m_dest, leads)",
          "old_line_content": "  }",
          "new_line_content": "  sp->add_mark_lead(m_dest, leads);",
          "content_same": false
        },
        {
          "line": 3867,
          "old_api": null,
          "new_api": "get_case_expr",
          "old_text": null,
          "new_text": "thd->spcont->get_case_expr(m_case_expr_id)",
          "old_line_content": "    */",
          "new_line_content": "  if (res && !thd->spcont->get_case_expr(m_case_expr_id))",
          "content_same": false
        },
        {
          "line": 3357,
          "old_api": null,
          "new_api": "opt_shortcut_jump",
          "old_text": null,
          "new_text": "i->opt_shortcut_jump(sp, this)",
          "old_line_content": "}",
          "new_line_content": "    m_cont_dest= i->opt_shortcut_jump(sp, this);",
          "content_same": false
        },
        {
          "line": 3358,
          "old_api": null,
          "new_api": "get_instr",
          "old_text": null,
          "new_text": "sp->get_instr(m_cont_dest)",
          "old_line_content": "",
          "new_line_content": "    m_cont_optdest= sp->get_instr(m_cont_dest);",
          "content_same": false
        },
        {
          "line": 3360,
          "old_api": null,
          "new_api": "add_mark_lead",
          "old_text": null,
          "new_text": "sp->add_mark_lead(m_cont_dest, leads)",
          "old_line_content": "sp_instr_jump_if_not::opt_move(uint dst, List<sp_instr> *bp)",
          "new_line_content": "  sp->add_mark_lead(m_cont_dest, leads);",
          "content_same": false
        },
        {
          "line": 3877,
          "old_api": null,
          "new_api": "set_case_expr",
          "old_text": null,
          "new_text": "thd->spcont->set_case_expr(thd, m_case_expr_id, &null_item)",
          "old_line_content": "  }",
          "new_line_content": "        thd->spcont->set_case_expr(thd, m_case_expr_id, &null_item))",
          "content_same": false
        },
        {
          "line": 3880,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(ME_FATALERROR)",
          "old_line_content": "",
          "new_line_content": "      my_error(ER_OUT_OF_RESOURCES, MYF(ME_FATALERROR));",
          "content_same": false
        },
        {
          "line": 3381,
          "old_api": null,
          "new_api": "sp_instr_jump::opt_move(dst, bp)",
          "old_text": null,
          "new_text": "sp_instr_jump::opt_move(dst, bp)",
          "old_line_content": "  sp_instr_freturn class functions",
          "new_line_content": "  sp_instr_jump::opt_move(dst, bp);",
          "content_same": false
        },
        {
          "line": 3896,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append(m_cont_dest)",
          "old_line_content": "}",
          "new_line_content": "  str->qs_append(m_cont_dest);",
          "content_same": false
        },
        {
          "line": 3897,
          "old_api": null,
          "new_api": "STRING_WITH_LEN",
          "old_text": null,
          "new_text": "STRING_WITH_LEN(\") \")",
          "old_line_content": "",
          "new_line_content": "  str->qs_append(STRING_WITH_LEN(\") \"));",
          "content_same": false
        },
        {
          "line": 3898,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append(m_case_expr_id)",
          "old_line_content": "uint",
          "new_line_content": "  str->qs_append(m_case_expr_id);",
          "content_same": false
        },
        {
          "line": 3899,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append(' ')",
          "old_line_content": "sp_instr_set_case_expr::opt_mark(sp_head *sp, List<sp_instr> *leads)",
          "new_line_content": "  str->qs_append(' ');",
          "content_same": false
        },
        {
          "line": 3900,
          "old_api": null,
          "new_api": "print",
          "old_text": null,
          "new_text": "m_case_expr->print(str, QT_ORDINARY)",
          "old_line_content": "{",
          "new_line_content": "  m_case_expr->print(str, QT_ORDINARY);",
          "content_same": false
        },
        {
          "line": 3392,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"sp_instr_freturn::execute\")",
          "old_line_content": "int",
          "new_line_content": "  DBUG_ENTER(\"sp_instr_freturn::execute\");",
          "content_same": false
        },
        {
          "line": 3393,
          "old_api": null,
          "new_api": "reset_lex_and_exec_core",
          "old_text": null,
          "new_text": "m_lex_keeper.reset_lex_and_exec_core(thd, nextp, TRUE, this)",
          "old_line_content": "sp_instr_freturn::exec_core(THD *thd, uint *nextp)",
          "new_line_content": "  DBUG_RETURN(m_lex_keeper.reset_lex_and_exec_core(thd, nextp, TRUE, this));",
          "content_same": false
        },
        {
          "line": 3911,
          "old_api": null,
          "new_api": "opt_shortcut_jump",
          "old_text": null,
          "new_text": "i->opt_shortcut_jump(sp, this)",
          "old_line_content": "}",
          "new_line_content": "    m_cont_dest= i->opt_shortcut_jump(sp, this);",
          "content_same": false
        },
        {
          "line": 3912,
          "old_api": null,
          "new_api": "get_instr",
          "old_text": null,
          "new_text": "sp->get_instr(m_cont_dest)",
          "old_line_content": "",
          "new_line_content": "    m_cont_optdest= sp->get_instr(m_cont_dest);",
          "content_same": false
        },
        {
          "line": 3914,
          "old_api": null,
          "new_api": "add_mark_lead",
          "old_text": null,
          "new_text": "sp->add_mark_lead(m_cont_dest, leads)",
          "old_line_content": "sp_instr_set_case_expr::opt_move(uint dst, List<sp_instr> *bp)",
          "new_line_content": "  sp->add_mark_lead(m_cont_dest, leads);",
          "content_same": false
        },
        {
          "line": 3922,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "bp->push_back(this)",
          "old_line_content": "",
          "new_line_content": "    bp->push_back(this);        // Forward",
          "content_same": false
        },
        {
          "line": 3415,
          "old_api": null,
          "new_api": "set_return_value",
          "old_text": null,
          "new_text": "thd->spcont->set_return_value(thd, &m_value)",
          "old_line_content": "{",
          "new_line_content": "  return thd->spcont->set_return_value(thd, &m_value);",
          "content_same": false
        },
        {
          "line": 3424,
          "old_api": null,
          "new_api": "STRING_WITH_LEN",
          "old_text": null,
          "new_text": "STRING_WITH_LEN(\"freturn \")",
          "old_line_content": "",
          "new_line_content": "  str->qs_append(STRING_WITH_LEN(\"freturn \"));",
          "content_same": false
        },
        {
          "line": 3425,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append((uint)m_type)",
          "old_line_content": "/*",
          "new_line_content": "  str->qs_append((uint)m_type);",
          "content_same": false
        },
        {
          "line": 3426,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append(' ')",
          "old_line_content": "  sp_instr_hpush_jump class functions",
          "new_line_content": "  str->qs_append(' ');",
          "content_same": false
        },
        {
          "line": 3427,
          "old_api": null,
          "new_api": "print",
          "old_text": null,
          "new_text": "m_value->print(str, QT_ORDINARY)",
          "old_line_content": "*/",
          "new_line_content": "  m_value->print(str, QT_ORDINARY);",
          "content_same": false
        },
        {
          "line": 2924,
          "old_api": null,
          "new_api": "check_table_access",
          "old_text": null,
          "new_text": "check_table_access(thd, SELECT_ACL, m_lex->query_tables, false,\n                               UINT_MAX, false)",
          "old_line_content": "",
          "new_line_content": "            check_table_access(thd, SELECT_ACL, m_lex->query_tables, false,",
          "content_same": false
        },
        {
          "line": 3437,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"sp_instr_hpush_jump::execute\")",
          "old_line_content": "",
          "new_line_content": "  DBUG_ENTER(\"sp_instr_hpush_jump::execute\");",
          "content_same": false
        },
        {
          "line": 3439,
          "old_api": null,
          "new_api": "push_handler",
          "old_text": null,
          "new_text": "thd->spcont->push_handler(m_handler, m_ip + 1)",
          "old_line_content": "}",
          "new_line_content": "  int ret= thd->spcont->push_handler(m_handler, m_ip + 1);",
          "content_same": false
        },
        {
          "line": 3443,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(ret)",
          "old_line_content": "sp_instr_hpush_jump::print(String *str)",
          "new_line_content": "  DBUG_RETURN(ret);",
          "content_same": false
        },
        {
          "line": 2932,
          "old_api": null,
          "new_api": "exec_core",
          "old_text": null,
          "new_text": "instr->exec_core(thd, nextp)",
          "old_line_content": "      Call after unit->cleanup() to close open table",
          "new_line_content": "      res= instr->exec_core(thd, nextp);",
          "content_same": false
        },
        {
          "line": 2933,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"info\",(\"exec_core returned: %d\", res))",
          "old_line_content": "      key read.",
          "new_line_content": "      DBUG_PRINT(\"info\",(\"exec_core returned: %d\", res));",
          "content_same": false
        },
        {
          "line": 3454,
          "old_api": null,
          "new_api": "STRING_WITH_LEN",
          "old_text": null,
          "new_text": "STRING_WITH_LEN(\"hpush_jump \")",
          "old_line_content": "  switch (m_handler->type) {",
          "new_line_content": "  str->qs_append(STRING_WITH_LEN(\"hpush_jump \"));",
          "content_same": false
        },
        {
          "line": 3455,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append(m_dest)",
          "old_line_content": "  case sp_handler::EXIT:",
          "new_line_content": "  str->qs_append(m_dest);",
          "content_same": false
        },
        {
          "line": 3457,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append(m_frame)",
          "old_line_content": "    break;",
          "new_line_content": "  str->qs_append(m_frame);",
          "content_same": false
        },
        {
          "line": 2946,
          "old_api": null,
          "new_api": "get_stmt_da",
          "old_text": null,
          "new_text": "thd->get_stmt_da()->set_overwrite_status(false)",
          "old_line_content": "",
          "new_line_content": "      thd->get_stmt_da()->set_overwrite_status(false);",
          "content_same": false
        },
        {
          "line": 2949,
          "old_api": null,
          "new_api": "close_thread_tables",
          "old_text": null,
          "new_text": "close_thread_tables(thd)",
          "old_line_content": "    else if (! thd->in_sub_stmt)",
          "new_line_content": "    close_thread_tables(thd);",
          "content_same": false
        },
        {
          "line": 3461,
          "old_api": null,
          "new_api": "STRING_WITH_LEN",
          "old_text": null,
          "new_text": "STRING_WITH_LEN(\" EXIT\")",
          "old_line_content": "  default:",
          "new_line_content": "    str->qs_append(STRING_WITH_LEN(\" EXIT\"));",
          "content_same": false
        },
        {
          "line": 2952,
          "old_api": null,
          "new_api": "in_multi_stmt_transaction_mode",
          "old_text": null,
          "new_text": "thd->in_multi_stmt_transaction_mode()",
          "old_line_content": "  else",
          "new_line_content": "    if (! thd->in_sub_stmt && ! thd->in_multi_stmt_transaction_mode())",
          "content_same": false
        },
        {
          "line": 2953,
          "old_api": null,
          "new_api": "release_transactional_locks",
          "old_text": null,
          "new_text": "thd->mdl_context.release_transactional_locks()",
          "old_line_content": "  {",
          "new_line_content": "      thd->mdl_context.release_transactional_locks();",
          "content_same": false
        },
        {
          "line": 3464,
          "old_api": null,
          "new_api": "STRING_WITH_LEN",
          "old_text": null,
          "new_text": "STRING_WITH_LEN(\" CONTINUE\")",
          "old_line_content": "  }",
          "new_line_content": "    str->qs_append(STRING_WITH_LEN(\" CONTINUE\"));",
          "content_same": false
        },
        {
          "line": 3468,
          "old_api": null,
          "new_api": "DBUG_ASSERT",
          "old_text": null,
          "new_text": "DBUG_ASSERT(0)",
          "old_line_content": "uint",
          "new_line_content": "    DBUG_ASSERT(0);",
          "content_same": false
        },
        {
          "line": 2959,
          "old_api": null,
          "new_api": "exec_core",
          "old_text": null,
          "new_text": "instr->exec_core(thd, nextp)",
          "old_line_content": "  {",
          "new_line_content": "    res= instr->exec_core(thd, nextp);",
          "content_same": false
        },
        {
          "line": 2960,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"info\",(\"exec_core returned: %d\", res))",
          "old_line_content": "    /*",
          "new_line_content": "    DBUG_PRINT(\"info\",(\"exec_core returned: %d\", res));",
          "content_same": false
        },
        {
          "line": 3481,
          "old_api": null,
          "new_api": "opt_shortcut_jump",
          "old_text": null,
          "new_text": "i->opt_shortcut_jump(sp, this)",
          "old_line_content": "  /*",
          "new_line_content": "    m_dest= i->opt_shortcut_jump(sp, this);",
          "content_same": false
        },
        {
          "line": 3482,
          "old_api": null,
          "new_api": "get_instr",
          "old_text": null,
          "new_text": "sp->get_instr(m_dest)",
          "old_line_content": "    For continue handlers, all instructions in the scope of the handler",
          "new_line_content": "    m_optdest= sp->get_instr(m_dest);",
          "content_same": false
        },
        {
          "line": 3994,
          "old_api": null,
          "new_api": "my_hash_element",
          "old_text": null,
          "new_text": "my_hash_element(&m_sptabs, i)",
          "old_line_content": "    if (!table->derived && !table->schema_table)",
          "new_line_content": "    tab= (SP_TABLE*) my_hash_element(&m_sptabs, i);",
          "content_same": false
        },
        {
          "line": 3484,
          "old_api": null,
          "new_api": "add_mark_lead",
          "old_text": null,
          "new_text": "sp->add_mark_lead(m_dest, leads)",
          "old_line_content": "    be executed if the freturn triggers the condition handled by the",
          "new_line_content": "  sp->add_mark_lead(m_dest, leads);",
          "content_same": false
        },
        {
          "line": 2977,
          "old_api": null,
          "new_api": "mark_as_requiring_prelocking",
          "old_text": null,
          "new_text": "m_lex->mark_as_requiring_prelocking(NULL)",
          "old_line_content": "    open_tables stage.",
          "new_line_content": "    m_lex->mark_as_requiring_prelocking(NULL);",
          "content_same": false
        },
        {
          "line": 4007,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(tname+tlen, table->table_name, table->table_name_length)",
          "old_line_content": "      tlen+= alen;",
          "new_line_content": "      memcpy(tname+tlen, table->table_name, table->table_name_length);",
          "content_same": false
        },
        {
          "line": 2984,
          "old_api": null,
          "new_api": "is_error",
          "old_text": null,
          "new_text": "thd->is_error()",
          "old_line_content": "",
          "new_line_content": "  if (!res || !thd->is_error() ||",
          "content_same": false
        },
        {
          "line": 2985,
          "old_api": null,
          "new_api": "get_stmt_da",
          "old_text": null,
          "new_text": "thd->get_stmt_da()->sql_errno()",
          "old_line_content": "  /*",
          "new_line_content": "      (thd->get_stmt_da()->sql_errno() != ER_CANT_REOPEN_TABLE &&",
          "content_same": false
        },
        {
          "line": 2986,
          "old_api": null,
          "new_api": "get_stmt_da",
          "old_text": null,
          "new_text": "thd->get_stmt_da()->sql_errno()",
          "old_line_content": "    Merge here with the saved parent's values",
          "new_line_content": "       thd->get_stmt_da()->sql_errno() != ER_NO_SUCH_TABLE &&",
          "content_same": false
        },
        {
          "line": 2987,
          "old_api": null,
          "new_api": "get_stmt_da",
          "old_text": null,
          "new_text": "thd->get_stmt_da()->sql_errno()",
          "old_line_content": "    what is needed from the substatement gained",
          "new_line_content": "       thd->get_stmt_da()->sql_errno() != ER_UPDATE_TABLE_USED))",
          "content_same": false
        },
        {
          "line": 3499,
          "old_api": null,
          "new_api": "add_mark_lead",
          "old_text": null,
          "new_text": "sp->add_mark_lead(scope_ip, leads)",
          "old_line_content": "",
          "new_line_content": "      sp->add_mark_lead(scope_ip, leads);",
          "content_same": false
        },
        {
          "line": 4010,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(table->alias)",
          "old_line_content": "      /*",
          "new_line_content": "      alen= strlen(table->alias);",
          "content_same": false
        },
        {
          "line": 4011,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(tname+tlen, table->alias, alen)",
          "old_line_content": "        Upgrade the lock type because this table list will be used",
          "new_line_content": "      memcpy(tname+tlen, table->alias, alen);",
          "content_same": false
        },
        {
          "line": 2994,
          "old_api": null,
          "new_api": "add_unsafe_rollback_flags",
          "old_text": null,
          "new_text": "thd->transaction.stmt.add_unsafe_rollback_flags(parent_unsafe_rollback_flags)",
          "old_line_content": "    they want to store some value in local variable, pass return value and",
          "new_line_content": "  thd->transaction.stmt.add_unsafe_rollback_flags(parent_unsafe_rollback_flags);",
          "content_same": false
        },
        {
          "line": 3513,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"sp_instr_hpop::execute\")",
          "old_line_content": "",
          "new_line_content": "  DBUG_ENTER(\"sp_instr_hpop::execute\");",
          "content_same": false
        },
        {
          "line": 3514,
          "old_api": null,
          "new_api": "pop_handlers",
          "old_text": null,
          "new_text": "thd->spcont->pop_handlers(m_count)",
          "old_line_content": "void",
          "new_line_content": "  thd->spcont->pop_handlers(m_count);",
          "content_same": false
        },
        {
          "line": 3004,
          "old_api": null,
          "new_api": "is_error",
          "old_text": null,
          "new_text": "thd->is_error()",
          "old_line_content": "  sp_instr class functions",
          "new_line_content": "  DBUG_RETURN(res || thd->is_error());",
          "content_same": false
        },
        {
          "line": 3516,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(0)",
          "old_line_content": "{",
          "new_line_content": "  DBUG_RETURN(0);",
          "content_same": false
        },
        {
          "line": 4028,
          "old_api": null,
          "new_api": "my_hash_search",
          "old_text": null,
          "new_text": "my_hash_search(&m_sptabs, (uchar *)tname, tlen)",
          "old_line_content": "        if (tab->lock_type < table->lock_type)",
          "new_line_content": "      if ((tab= (SP_TABLE*) my_hash_search(&m_sptabs, (uchar *)tname, tlen)) ||",
          "content_same": false
        },
        {
          "line": 4029,
          "old_api": null,
          "new_api": "my_hash_search",
          "old_text": null,
          "new_text": "my_hash_search(&m_sptabs, (uchar *)tname,\n                                        tlen - alen - 1)",
          "old_line_content": "          tab->lock_type= table->lock_type; // Use the table with the highest lock type",
          "new_line_content": "          ((tab= (SP_TABLE*) my_hash_search(&m_sptabs, (uchar *)tname,",
          "content_same": false
        },
        {
          "line": 3523,
          "old_api": null,
          "new_api": "reserve",
          "old_text": null,
          "new_text": "str->reserve(SP_INSTR_UINT_MAXLEN+5)",
          "old_line_content": "",
          "new_line_content": "  if (str->reserve(SP_INSTR_UINT_MAXLEN+5))",
          "content_same": false
        },
        {
          "line": 3525,
          "old_api": null,
          "new_api": "STRING_WITH_LEN",
          "old_text": null,
          "new_text": "STRING_WITH_LEN(\"hpop \")",
          "old_line_content": "/*",
          "new_line_content": "  str->qs_append(STRING_WITH_LEN(\"hpop \"));",
          "content_same": false
        },
        {
          "line": 3526,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append(m_count)",
          "old_line_content": "  sp_instr_hreturn class functions",
          "new_line_content": "  str->qs_append(m_count);",
          "content_same": false
        },
        {
          "line": 4042,
          "old_api": null,
          "new_api": "calloc",
          "old_text": null,
          "new_text": "thd->calloc(sizeof(SP_TABLE))",
          "old_line_content": "        {",
          "new_line_content": "        if (!(tab= (SP_TABLE *)thd->calloc(sizeof(SP_TABLE))))",
          "content_same": false
        },
        {
          "line": 3020,
          "old_api": null,
          "new_api": "DBUG_ASSERT",
          "old_text": null,
          "new_text": "DBUG_ASSERT(0)",
          "old_line_content": "  sp_instr_stmt class functions",
          "new_line_content": "  DBUG_ASSERT(0);",
          "content_same": false
        },
        {
          "line": 3537,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"sp_instr_hreturn::execute\")",
          "old_line_content": "",
          "new_line_content": "  DBUG_ENTER(\"sp_instr_hreturn::execute\");",
          "content_same": false
        },
        {
          "line": 3539,
          "old_api": null,
          "new_api": "get_stmt_da",
          "old_text": null,
          "new_text": "thd->get_stmt_da()",
          "old_line_content": "}",
          "new_line_content": "  uint continue_ip= thd->spcont->exit_handler(thd->get_stmt_da());",
          "content_same": false
        },
        {
          "line": 4053,
          "old_api": null,
          "new_api": "memdup",
          "old_text": null,
          "new_text": "thd->memdup(tname, tab->qname.length + 1)",
          "old_line_content": "        tab->lock_type= table->lock_type;",
          "new_line_content": "        tab->qname.str= (char*) thd->memdup(tname, tab->qname.length + 1);",
          "content_same": false
        },
        {
          "line": 3543,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(0)",
          "old_line_content": "sp_instr_hreturn::print(String *str)",
          "new_line_content": "  DBUG_RETURN(0);",
          "content_same": false
        },
        {
          "line": 3032,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"sp_instr_stmt::execute\")",
          "old_line_content": "  /* This s-p instr is profilable and will be captured. */",
          "new_line_content": "  DBUG_ENTER(\"sp_instr_stmt::execute\");",
          "content_same": false
        },
        {
          "line": 4061,
          "old_api": null,
          "new_api": "my_hash_insert",
          "old_text": null,
          "new_text": "my_hash_insert(&m_sptabs, (uchar *)tab)",
          "old_line_content": "}",
          "new_line_content": "        if (my_hash_insert(&m_sptabs, (uchar *)tab))",
          "content_same": false
        },
        {
          "line": 3038,
          "old_api": null,
          "new_api": "set_query_source",
          "old_text": null,
          "new_text": "thd->profiling.set_query_source(m_query.str, m_query.length)",
          "old_line_content": "    /*",
          "new_line_content": "  thd->profiling.set_query_source(m_query.str, m_query.length);",
          "content_same": false
        },
        {
          "line": 3551,
          "old_api": null,
          "new_api": "reserve",
          "old_text": null,
          "new_text": "str->reserve(SP_INSTR_UINT_MAXLEN*2 + 9)",
          "old_line_content": "    // NOTE: this is legacy: hreturn instruction for EXIT handler",
          "new_line_content": "  if (str->reserve(SP_INSTR_UINT_MAXLEN*2 + 9))",
          "content_same": false
        },
        {
          "line": 3040,
          "old_api": null,
          "new_api": "alloc_query",
          "old_text": null,
          "new_text": "alloc_query(thd, m_query.str, m_query.length)",
          "old_line_content": "      queries with SP vars can't be cached)",
          "new_line_content": "  if (!(res= alloc_query(thd, m_query.str, m_query.length)) &&",
          "content_same": false
        },
        {
          "line": 3041,
          "old_api": null,
          "new_api": "subst_spvars",
          "old_text": null,
          "new_text": "subst_spvars(thd, this, &m_query)",
          "old_line_content": "    */",
          "new_line_content": "      !(res=subst_spvars(thd, this, &m_query)))",
          "content_same": false
        },
        {
          "line": 3047,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely((thd->variables.option_bits & OPTION_LOG_OFF)==0)",
          "old_line_content": "    {",
          "new_line_content": "    if (unlikely((thd->variables.option_bits & OPTION_LOG_OFF)==0))",
          "content_same": false
        },
        {
          "line": 3559,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append(m_dest)",
          "old_line_content": "  }",
          "new_line_content": "    str->qs_append(m_dest);",
          "content_same": false
        },
        {
          "line": 3051,
          "old_api": null,
          "new_api": "query_length",
          "old_text": null,
          "new_text": "thd->query_length()",
          "old_line_content": "      {",
          "new_line_content": "                                          thd->query_length()) <= 0)",
          "content_same": false
        },
        {
          "line": 3563,
          "old_api": null,
          "new_api": "qs_append",
          "old_text": null,
          "new_text": "str->qs_append(m_frame)",
          "old_line_content": "uint",
          "new_line_content": "    str->qs_append(m_frame);",
          "content_same": false
        },
        {
          "line": 3063,
          "old_api": null,
          "new_api": "query_cache_end_of_result",
          "old_text": null,
          "new_text": "query_cache_end_of_result(thd)",
          "old_line_content": "    else",
          "new_line_content": "      query_cache_end_of_result(thd);",
          "content_same": false
        },
        {
          "line": 3066,
          "old_api": null,
          "new_api": "log_slow_statement",
          "old_text": null,
          "new_text": "log_slow_statement(thd)",
          "old_line_content": "    thd->query_name_consts= 0;",
          "new_line_content": "        log_slow_statement(thd);",
          "content_same": false
        },
        {
          "line": 3070,
          "old_api": null,
          "new_api": "set_query",
          "old_text": null,
          "new_text": "thd->set_query(query_backup)",
          "old_line_content": "  }",
          "new_line_content": "    thd->set_query(query_backup);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 4104,
          "old_api": "activate_stmt_arena_if_needed",
          "new_api": null,
          "old_text": "thd->activate_stmt_arena_if_needed(&backup)",
          "new_text": null,
          "old_line_content": "  arena= thd->activate_stmt_arena_if_needed(&backup);",
          "new_line_content": "    memory since current instance of sp_head object can pass away before",
          "content_same": false
        },
        {
          "line": 3081,
          "old_api": "reserve",
          "new_api": null,
          "old_text": "str->reserve(SP_STMT_PRINT_MAXLEN+SP_INSTR_UINT_MAXLEN+8)",
          "new_text": null,
          "old_line_content": "  if (str->reserve(SP_STMT_PRINT_MAXLEN+SP_INSTR_UINT_MAXLEN+8))",
          "new_line_content": "sp_instr_stmt::print(String *str)",
          "content_same": false
        },
        {
          "line": 3592,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"sp_instr_cpush::execute\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"sp_instr_cpush::execute\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3083,
          "old_api": "STRING_WITH_LEN",
          "new_api": null,
          "old_text": "STRING_WITH_LEN(\"stmt \")",
          "new_text": null,
          "old_line_content": "  str->qs_append(STRING_WITH_LEN(\"stmt \"));",
          "new_line_content": "  uint i, len;",
          "content_same": false
        },
        {
          "line": 3084,
          "old_api": "sql_command",
          "new_api": null,
          "old_text": "m_lex_keeper.sql_command()",
          "new_text": null,
          "old_line_content": "  str->qs_append((uint)m_lex_keeper.sql_command());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3085,
          "old_api": "STRING_WITH_LEN",
          "new_api": null,
          "old_text": "STRING_WITH_LEN(\" \\\"\")",
          "new_text": null,
          "old_line_content": "  str->qs_append(STRING_WITH_LEN(\" \\\"\"));",
          "new_line_content": "  /* stmt CMD \"...\" */",
          "content_same": false
        },
        {
          "line": 4110,
          "old_api": "my_hash_element",
          "new_api": null,
          "old_text": "my_hash_element(&m_sptabs, i)",
          "new_text": null,
          "old_line_content": "    SP_TABLE *stab= (SP_TABLE*) my_hash_element(&m_sptabs, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3594,
          "old_api": "push_cursor",
          "new_api": null,
          "old_text": "thd->spcont->push_cursor(&m_lex_keeper, this)",
          "new_text": null,
          "old_line_content": "  int ret= thd->spcont->push_cursor(&m_lex_keeper, this);",
          "new_line_content": "sp_instr_cpush::execute(THD *thd, uint *nextp)",
          "content_same": false
        },
        {
          "line": 3598,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(ret)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(ret);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4114,
          "old_api": "ALIGN_SIZE",
          "new_api": null,
          "old_text": "ALIGN_SIZE(sizeof(TABLE_LIST))",
          "new_text": null,
          "old_line_content": "    if (!(tab_buff= (char *)thd->calloc(ALIGN_SIZE(sizeof(TABLE_LIST)) *",
          "new_line_content": "    TABLE_LIST *table;",
          "content_same": false
        },
        {
          "line": 4116,
          "old_api": "memdup",
          "new_api": null,
          "old_text": "thd->memdup(stab->qname.str,\n                                       stab->qname.length + 1)",
          "new_text": null,
          "old_line_content": "        !(key_buff= (char*)thd->memdup(stab->qname.str,",
          "new_line_content": "    if (stab->temp)",
          "content_same": false
        },
        {
          "line": 3605,
          "old_api": "find_cursor",
          "new_api": null,
          "old_text": "m_ctx->find_cursor(m_cursor)",
          "new_text": null,
          "old_line_content": "  const LEX_STRING *cursor_name= m_ctx->find_cursor(m_cursor);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4118,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(FALSE)",
          "new_text": null,
          "old_line_content": "      DBUG_RETURN(FALSE);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3099,
          "old_api": "qs_append",
          "new_api": null,
          "old_text": "str->qs_append(c)",
          "new_text": null,
          "old_line_content": "    str->qs_append(c);",
          "new_line_content": "  for (i= 0 ; i < len ; i++)",
          "content_same": false
        },
        {
          "line": 3612,
          "old_api": "reserve",
          "new_api": null,
          "old_text": "str->reserve(rsrv)",
          "new_text": null,
          "old_line_content": "  if (str->reserve(rsrv))",
          "new_line_content": "  /* cpush name@offset */",
          "content_same": false
        },
        {
          "line": 3102,
          "old_api": "STRING_WITH_LEN",
          "new_api": null,
          "old_text": "STRING_WITH_LEN(\"...\")",
          "new_text": null,
          "old_line_content": "    str->qs_append(STRING_WITH_LEN(\"...\")); /* Indicate truncated string */",
          "new_line_content": "    if (c == '\\n')",
          "content_same": false
        },
        {
          "line": 3103,
          "old_api": "qs_append",
          "new_api": null,
          "old_text": "str->qs_append('\"')",
          "new_text": null,
          "old_line_content": "  str->qs_append('\"');",
          "new_line_content": "      c= ' ';",
          "content_same": false
        },
        {
          "line": 3614,
          "old_api": "STRING_WITH_LEN",
          "new_api": null,
          "old_text": "STRING_WITH_LEN(\"cpush \")",
          "new_text": null,
          "old_line_content": "  str->qs_append(STRING_WITH_LEN(\"cpush \"));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3618,
          "old_api": "qs_append",
          "new_api": null,
          "old_text": "str->qs_append('@')",
          "new_text": null,
          "old_line_content": "    str->qs_append('@');",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 3620,
          "old_api": "qs_append",
          "new_api": null,
          "old_text": "str->qs_append(m_cursor)",
          "new_text": null,
          "old_line_content": "  str->qs_append(m_cursor);",
          "new_line_content": "  if (cursor_name)",
          "content_same": false
        },
        {
          "line": 3110,
          "old_api": "query",
          "new_api": null,
          "old_text": "thd->query()",
          "new_text": null,
          "old_line_content": "  MYSQL_QUERY_EXEC_START(thd->query(),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4139,
          "old_api": "init",
          "new_api": null,
          "old_text": "table->mdl_request.init(MDL_key::TABLE, table->db, table->table_name,\n                              table->lock_type >= TL_WRITE_ALLOW_WRITE ?\n                              MDL_SHARED_WRITE : MDL_SHARED_READ,\n                              MDL_TRANSACTION)",
          "new_text": null,
          "old_line_content": "      table->mdl_request.init(MDL_key::TABLE, table->db, table->table_name,",
          "new_line_content": "      /*",
          "content_same": false
        },
        {
          "line": 3116,
          "old_api": "mysql_execute_command",
          "new_api": null,
          "old_text": "mysql_execute_command(thd)",
          "new_text": null,
          "old_line_content": "  int res= mysql_execute_command(thd);",
          "new_line_content": "                         thd->thread_id,",
          "content_same": false
        },
        {
          "line": 3117,
          "old_api": "MYSQL_QUERY_EXEC_DONE",
          "new_api": null,
          "old_text": "MYSQL_QUERY_EXEC_DONE(res)",
          "new_text": null,
          "old_line_content": "  MYSQL_QUERY_EXEC_DONE(res);",
          "new_line_content": "                         (char *) (thd->db ? thd->db : \"\"),",
          "content_same": false
        },
        {
          "line": 3631,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"sp_instr_cpop::execute\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"sp_instr_cpop::execute\");",
          "new_line_content": "*/",
          "content_same": false
        },
        {
          "line": 3632,
          "old_api": "pop_cursors",
          "new_api": null,
          "old_text": "thd->spcont->pop_cursors(m_count)",
          "new_text": null,
          "old_line_content": "  thd->spcont->pop_cursors(m_count);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3634,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(0)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(0);",
          "new_line_content": "sp_instr_cpop::execute(THD *thd, uint *nextp)",
          "content_same": false
        },
        {
          "line": 4150,
          "old_api": "ALIGN_SIZE",
          "new_api": null,
          "old_text": "ALIGN_SIZE(sizeof(TABLE_LIST))",
          "new_text": null,
          "old_line_content": "      tab_buff+= ALIGN_SIZE(sizeof(TABLE_LIST));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3130,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"sp_instr_set::execute\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"sp_instr_set::execute\");",
          "new_line_content": "*/",
          "content_same": false
        },
        {
          "line": 3131,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"info\", (\"offset: %u\", m_offset))",
          "new_text": null,
          "old_line_content": "  DBUG_PRINT(\"info\", (\"offset: %u\", m_offset));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4156,
          "old_api": "restore_active_arena",
          "new_api": null,
          "old_text": "thd->restore_active_arena(arena, &backup)",
          "new_text": null,
          "old_line_content": "    thd->restore_active_arena(arena, &backup);",
          "new_line_content": "      result= TRUE;",
          "content_same": false
        },
        {
          "line": 3133,
          "old_api": "reset_lex_and_exec_core",
          "new_api": null,
          "old_text": "m_lex_keeper.reset_lex_and_exec_core(thd, nextp, TRUE, this)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(m_lex_keeper.reset_lex_and_exec_core(thd, nextp, TRUE, this));",
          "new_line_content": "sp_instr_set::execute(THD *thd, uint *nextp)",
          "content_same": false
        },
        {
          "line": 4158,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(result)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(result);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3642,
          "old_api": "reserve",
          "new_api": null,
          "old_text": "str->reserve(SP_INSTR_UINT_MAXLEN+5)",
          "new_text": null,
          "old_line_content": "  if (str->reserve(SP_INSTR_UINT_MAXLEN+5))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3644,
          "old_api": "STRING_WITH_LEN",
          "new_api": null,
          "old_text": "STRING_WITH_LEN(\"cpop \")",
          "new_text": null,
          "old_line_content": "  str->qs_append(STRING_WITH_LEN(\"cpop \"));",
          "new_line_content": "sp_instr_cpop::print(String *str)",
          "content_same": false
        },
        {
          "line": 3645,
          "old_api": "qs_append",
          "new_api": null,
          "old_text": "str->qs_append(m_count)",
          "new_text": null,
          "old_line_content": "  str->qs_append(m_count);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3140,
          "old_api": "set_variable",
          "new_api": null,
          "old_text": "thd->spcont->set_variable(thd, m_offset, &m_value)",
          "new_text": null,
          "old_line_content": "  int res= thd->spcont->set_variable(thd, m_offset, &m_value);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3146,
          "old_api": "set_variable",
          "new_api": null,
          "old_text": "thd->spcont->set_variable(thd, m_offset, 0)",
          "new_text": null,
          "old_line_content": "    if (thd->spcont->set_variable(thd, m_offset, 0))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3149,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(ME_FATALERROR)",
          "new_text": null,
          "old_line_content": "      my_error(ER_OUT_OF_RESOURCES, MYF(ME_FATALERROR));",
          "new_line_content": "    /* Failed to evaluate the value. Reset the variable to NULL. */",
          "content_same": false
        },
        {
          "line": 4175,
          "old_api": "calloc",
          "new_api": null,
          "old_text": "thd->calloc(sizeof(TABLE_LIST))",
          "new_text": null,
          "old_line_content": "  if (!(table= (TABLE_LIST *)thd->calloc(sizeof(TABLE_LIST))))",
          "new_line_content": "                       thr_lock_type locktype,",
          "content_same": false
        },
        {
          "line": 4177,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(db)",
          "new_text": null,
          "old_line_content": "  table->db_length= strlen(db);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4178,
          "old_api": "strmake",
          "new_api": null,
          "old_text": "thd->strmake(db, table->db_length)",
          "new_text": null,
          "old_line_content": "  table->db= thd->strmake(db, table->db_length);",
          "new_line_content": "  TABLE_LIST *table;",
          "content_same": false
        },
        {
          "line": 4179,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(name)",
          "new_text": null,
          "old_line_content": "  table->table_name_length= strlen(name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3665,
          "old_api": "get_cursor",
          "new_api": null,
          "old_text": "thd->spcont->get_cursor(m_cursor)",
          "new_text": null,
          "old_line_content": "  sp_cursor *c= thd->spcont->get_cursor(m_cursor);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4181,
          "old_api": "strdup",
          "new_api": null,
          "old_text": "thd->strdup(name)",
          "new_text": null,
          "old_line_content": "  table->alias= thd->strdup(name);",
          "new_line_content": "    return NULL;",
          "content_same": false
        },
        {
          "line": 3667,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"sp_instr_copen::execute\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"sp_instr_copen::execute\");",
          "new_line_content": "    We don't store a pointer to the cursor in the instruction to be",
          "content_same": false
        },
        {
          "line": 3673,
          "old_api": "get_lex_keeper",
          "new_api": null,
          "old_text": "c->get_lex_keeper()",
          "new_text": null,
          "old_line_content": "    sp_lex_keeper *lex_keeper= c->get_lex_keeper();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3162,
          "old_api": "find_variable",
          "new_api": null,
          "old_text": "m_ctx->find_variable(m_offset)",
          "new_text": null,
          "old_line_content": "  sp_variable *var = m_ctx->find_variable(m_offset);",
          "new_line_content": "void",
          "content_same": false
        },
        {
          "line": 4188,
          "old_api": "add_to_query_tables",
          "new_api": null,
          "old_text": "lex->add_to_query_tables(table)",
          "new_text": null,
          "old_line_content": "  lex->add_to_query_tables(table);",
          "new_line_content": "  table->select_lex= lex->current_select;",
          "content_same": false
        },
        {
          "line": 3169,
          "old_api": "STRING_WITH_LEN",
          "new_api": null,
          "old_text": "STRING_WITH_LEN(\"set \")",
          "new_text": null,
          "old_line_content": "  str->qs_append(STRING_WITH_LEN(\"set \"));",
          "new_line_content": "  /* 'var' should always be non-null, but just in case... */",
          "content_same": false
        },
        {
          "line": 3681,
          "old_api": "get_instr",
          "new_api": null,
          "old_text": "c->get_instr()",
          "new_text": null,
          "old_line_content": "    thd->stmt_arena= c->get_instr();",
          "new_line_content": "    /*",
          "content_same": false
        },
        {
          "line": 3682,
          "old_api": "reset_lex_and_exec_core",
          "new_api": null,
          "old_text": "lex_keeper->reset_lex_and_exec_core(thd, nextp, FALSE, this)",
          "new_text": null,
          "old_line_content": "    res= lex_keeper->reset_lex_and_exec_core(thd, nextp, FALSE, this);",
          "new_line_content": "      Get the Query_arena from the cpush instruction, which contains",
          "content_same": false
        },
        {
          "line": 3173,
          "old_api": "qs_append",
          "new_api": null,
          "old_text": "str->qs_append('@')",
          "new_text": null,
          "old_line_content": "    str->qs_append('@');",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 3685,
          "old_api": "cleanup_items",
          "new_api": null,
          "old_text": "cleanup_items(thd->stmt_arena->free_list)",
          "new_text": null,
          "old_line_content": "      cleanup_items(thd->stmt_arena->free_list);",
          "new_line_content": "    */",
          "content_same": false
        },
        {
          "line": 3175,
          "old_api": "qs_append",
          "new_api": null,
          "old_text": "str->qs_append(m_offset)",
          "new_text": null,
          "old_line_content": "  str->qs_append(m_offset);",
          "new_line_content": "  if (var)",
          "content_same": false
        },
        {
          "line": 3176,
          "old_api": "qs_append",
          "new_api": null,
          "old_text": "str->qs_append(' ')",
          "new_text": null,
          "old_line_content": "  str->qs_append(' ');",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 3689,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(res)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(res);",
          "new_line_content": "    if (thd->stmt_arena->free_list)",
          "content_same": false
        },
        {
          "line": 3696,
          "old_api": "get_cursor",
          "new_api": null,
          "old_text": "thd->spcont->get_cursor(m_cursor)",
          "new_text": null,
          "old_line_content": "  sp_cursor *c= thd->spcont->get_cursor(m_cursor);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3697,
          "old_api": "open",
          "new_api": null,
          "old_text": "c->open(thd)",
          "new_text": null,
          "old_line_content": "  int res= c->open(thd);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3188,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"sp_instr_set_trigger_field::execute\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"sp_instr_set_trigger_field::execute\");",
          "new_line_content": "*/",
          "content_same": false
        },
        {
          "line": 3190,
          "old_api": "reset_lex_and_exec_core",
          "new_api": null,
          "old_text": "m_lex_keeper.reset_lex_and_exec_core(thd, nextp, TRUE, this)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(m_lex_keeper.reset_lex_and_exec_core(thd, nextp, TRUE, this));",
          "new_line_content": "int",
          "content_same": false
        },
        {
          "line": 3705,
          "old_api": "find_cursor",
          "new_api": null,
          "old_text": "m_ctx->find_cursor(m_cursor)",
          "new_text": null,
          "old_line_content": "  const LEX_STRING *cursor_name= m_ctx->find_cursor(m_cursor);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3197,
          "old_api": "set_value",
          "new_api": null,
          "old_text": "trigger_field->set_value(thd, &value)",
          "new_text": null,
          "old_line_content": "  const int res= (trigger_field->set_value(thd, &value) ? -1 : 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3712,
          "old_api": "reserve",
          "new_api": null,
          "old_text": "str->reserve(rsrv)",
          "new_text": null,
          "old_line_content": "  if (str->reserve(rsrv))",
          "new_line_content": "  /* copen name@offset */",
          "content_same": false
        },
        {
          "line": 3714,
          "old_api": "STRING_WITH_LEN",
          "new_api": null,
          "old_text": "STRING_WITH_LEN(\"copen \")",
          "new_text": null,
          "old_line_content": "  str->qs_append(STRING_WITH_LEN(\"copen \"));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3205,
          "old_api": "STRING_WITH_LEN",
          "new_api": null,
          "old_text": "STRING_WITH_LEN(\"set_trigger_field \")",
          "new_text": null,
          "old_line_content": "  str->append(STRING_WITH_LEN(\"set_trigger_field \"));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3206,
          "old_api": "print",
          "new_api": null,
          "old_text": "trigger_field->print(str, QT_ORDINARY)",
          "new_text": null,
          "old_line_content": "  trigger_field->print(str, QT_ORDINARY);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3207,
          "old_api": "STRING_WITH_LEN",
          "new_api": null,
          "old_text": "STRING_WITH_LEN(\":=\")",
          "new_text": null,
          "old_line_content": "  str->append(STRING_WITH_LEN(\":=\"));",
          "new_line_content": "void",
          "content_same": false
        },
        {
          "line": 3208,
          "old_api": "print",
          "new_api": null,
          "old_text": "value->print(str, QT_ORDINARY)",
          "new_text": null,
          "old_line_content": "  value->print(str, QT_ORDINARY);",
          "new_line_content": "sp_instr_set_trigger_field::print(String *str)",
          "content_same": false
        },
        {
          "line": 3718,
          "old_api": "qs_append",
          "new_api": null,
          "old_text": "str->qs_append('@')",
          "new_text": null,
          "old_line_content": "    str->qs_append('@');",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 3720,
          "old_api": "qs_append",
          "new_api": null,
          "old_text": "str->qs_append(m_cursor)",
          "new_text": null,
          "old_line_content": "  str->qs_append(m_cursor);",
          "new_line_content": "  if (cursor_name)",
          "content_same": false
        },
        {
          "line": 3731,
          "old_api": "get_cursor",
          "new_api": null,
          "old_text": "thd->spcont->get_cursor(m_cursor)",
          "new_text": null,
          "old_line_content": "  sp_cursor *c= thd->spcont->get_cursor(m_cursor);",
          "new_line_content": "*/",
          "content_same": false
        },
        {
          "line": 3733,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"sp_instr_cclose::execute\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"sp_instr_cclose::execute\");",
          "new_line_content": "int",
          "content_same": false
        },
        {
          "line": 3228,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"sp_instr_jump::execute\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"sp_instr_jump::execute\");",
          "new_line_content": "*/",
          "content_same": false
        },
        {
          "line": 3229,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"info\", (\"destination: %u\", m_dest))",
          "new_text": null,
          "old_line_content": "  DBUG_PRINT(\"info\", (\"destination: %u\", m_dest));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3740,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(res)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(res);",
          "new_line_content": "  if (! c)",
          "content_same": false
        },
        {
          "line": 3232,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(0)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(0);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3747,
          "old_api": "find_cursor",
          "new_api": null,
          "old_text": "m_ctx->find_cursor(m_cursor)",
          "new_text": null,
          "old_line_content": "  const LEX_STRING *cursor_name= m_ctx->find_cursor(m_cursor);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3239,
          "old_api": "reserve",
          "new_api": null,
          "old_text": "str->reserve(SP_INSTR_UINT_MAXLEN+5)",
          "new_text": null,
          "old_line_content": "  if (str->reserve(SP_INSTR_UINT_MAXLEN+5))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3241,
          "old_api": "STRING_WITH_LEN",
          "new_api": null,
          "old_text": "STRING_WITH_LEN(\"jump \")",
          "new_text": null,
          "old_line_content": "  str->qs_append(STRING_WITH_LEN(\"jump \"));",
          "new_line_content": "sp_instr_jump::print(String *str)",
          "content_same": false
        },
        {
          "line": 3242,
          "old_api": "qs_append",
          "new_api": null,
          "old_text": "str->qs_append(m_dest)",
          "new_text": null,
          "old_line_content": "  str->qs_append(m_dest);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3754,
          "old_api": "reserve",
          "new_api": null,
          "old_text": "str->reserve(rsrv)",
          "new_text": null,
          "old_line_content": "  if (str->reserve(rsrv))",
          "new_line_content": "  /* cclose name@offset */",
          "content_same": false
        },
        {
          "line": 3756,
          "old_api": "STRING_WITH_LEN",
          "new_api": null,
          "old_text": "STRING_WITH_LEN(\"cclose \")",
          "new_text": null,
          "old_line_content": "  str->qs_append(STRING_WITH_LEN(\"cclose \"));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3248,
          "old_api": "opt_shortcut_jump",
          "new_api": null,
          "old_text": "opt_shortcut_jump(sp, this)",
          "new_text": null,
          "old_line_content": "  m_dest= opt_shortcut_jump(sp, this);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3760,
          "old_api": "qs_append",
          "new_api": null,
          "old_text": "str->qs_append('@')",
          "new_text": null,
          "old_line_content": "    str->qs_append('@');",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 3762,
          "old_api": "qs_append",
          "new_api": null,
          "old_text": "str->qs_append(m_cursor)",
          "new_text": null,
          "old_line_content": "  str->qs_append(m_cursor);",
          "new_line_content": "  if (cursor_name)",
          "content_same": false
        },
        {
          "line": 3251,
          "old_api": "get_instr",
          "new_api": null,
          "old_text": "sp->get_instr(m_dest)",
          "new_text": null,
          "old_line_content": "  m_optdest= sp->get_instr(m_dest);",
          "new_line_content": "sp_instr_jump::opt_mark(sp_head *sp, List<sp_instr> *leads)",
          "content_same": false
        },
        {
          "line": 3261,
          "old_api": "get_instr",
          "new_api": null,
          "old_text": "sp->get_instr(dest)",
          "new_text": null,
          "old_line_content": "  while ((i= sp->get_instr(dest)))",
          "new_line_content": "sp_instr_jump::opt_shortcut_jump(sp_head *sp, sp_instr *start)",
          "content_same": false
        },
        {
          "line": 3773,
          "old_api": "get_cursor",
          "new_api": null,
          "old_text": "thd->spcont->get_cursor(m_cursor)",
          "new_text": null,
          "old_line_content": "  sp_cursor *c= thd->spcont->get_cursor(m_cursor);",
          "new_line_content": "*/",
          "content_same": false
        },
        {
          "line": 3776,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"sp_instr_cfetch::execute\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"sp_instr_cfetch::execute\");",
          "new_line_content": "sp_instr_cfetch::execute(THD *thd, uint *nextp)",
          "content_same": false
        },
        {
          "line": 3267,
          "old_api": "opt_shortcut_jump",
          "new_api": null,
          "old_text": "i->opt_shortcut_jump(sp, start)",
          "new_text": null,
          "old_line_content": "    ndest= i->opt_shortcut_jump(sp, start);",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 3790,
          "old_api": "find_cursor",
          "new_api": null,
          "old_text": "m_ctx->find_cursor(m_cursor)",
          "new_text": null,
          "old_line_content": "  const LEX_STRING *cursor_name= m_ctx->find_cursor(m_cursor);",
          "new_line_content": "void",
          "content_same": false
        },
        {
          "line": 3279,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "bp->push_back(this)",
          "new_text": null,
          "old_line_content": "    bp->push_back(this);      // Forward",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3797,
          "old_api": "reserve",
          "new_api": null,
          "old_text": "str->reserve(rsrv)",
          "new_text": null,
          "old_line_content": "  if (str->reserve(rsrv))",
          "new_line_content": "  /* cfetch name@offset vars... */",
          "content_same": false
        },
        {
          "line": 3799,
          "old_api": "STRING_WITH_LEN",
          "new_api": null,
          "old_text": "STRING_WITH_LEN(\"cfetch \")",
          "new_text": null,
          "old_line_content": "  str->qs_append(STRING_WITH_LEN(\"cfetch \"));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3803,
          "old_api": "qs_append",
          "new_api": null,
          "old_text": "str->qs_append('@')",
          "new_text": null,
          "old_line_content": "    str->qs_append('@');",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 3293,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"sp_instr_jump_if_not::execute\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"sp_instr_jump_if_not::execute\");",
          "new_line_content": "*/",
          "content_same": false
        },
        {
          "line": 3294,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"info\", (\"destination: %u\", m_dest))",
          "new_text": null,
          "old_line_content": "  DBUG_PRINT(\"info\", (\"destination: %u\", m_dest));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3295,
          "old_api": "reset_lex_and_exec_core",
          "new_api": null,
          "old_text": "m_lex_keeper.reset_lex_and_exec_core(thd, nextp, TRUE, this)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(m_lex_keeper.reset_lex_and_exec_core(thd, nextp, TRUE, this));",
          "new_line_content": "int",
          "content_same": false
        },
        {
          "line": 3805,
          "old_api": "qs_append",
          "new_api": null,
          "old_text": "str->qs_append(m_cursor)",
          "new_text": null,
          "old_line_content": "  str->qs_append(m_cursor);",
          "new_line_content": "  if (cursor_name)",
          "content_same": false
        },
        {
          "line": 3811,
          "old_api": "qs_append",
          "new_api": null,
          "old_text": "str->qs_append(pv->name.str, pv->name.length)",
          "new_text": null,
          "old_line_content": "    str->qs_append(pv->name.str, pv->name.length);",
          "new_line_content": "  while ((pv= li++))",
          "content_same": false
        },
        {
          "line": 3812,
          "old_api": "qs_append",
          "new_api": null,
          "old_text": "str->qs_append('@')",
          "new_text": null,
          "old_line_content": "    str->qs_append('@');",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 3305,
          "old_api": "sp_prepare_func_item",
          "new_api": null,
          "old_text": "sp_prepare_func_item(thd, &m_expr)",
          "new_text": null,
          "old_line_content": "  it= sp_prepare_func_item(thd, &m_expr);",
          "new_line_content": "sp_instr_jump_if_not::exec_core(THD *thd, uint *nextp)",
          "content_same": false
        },
        {
          "line": 3313,
          "old_api": "val_bool",
          "new_api": null,
          "old_text": "it->val_bool()",
          "new_text": null,
          "old_line_content": "    if (! it->val_bool())",
          "new_line_content": "    res= -1;",
          "content_same": false
        },
        {
          "line": 3825,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"sp_instr_error::execute\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"sp_instr_error::execute\");",
          "new_line_content": "*/",
          "content_same": false
        },
        {
          "line": 3827,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(0)",
          "new_text": null,
          "old_line_content": "  my_message(m_errcode, ER(m_errcode), MYF(0));",
          "new_line_content": "int",
          "content_same": false
        },
        {
          "line": 3829,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(-1)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(-1);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3837,
          "old_api": "reserve",
          "new_api": null,
          "old_text": "str->reserve(SP_INSTR_UINT_MAXLEN+6)",
          "new_text": null,
          "old_line_content": "  if (str->reserve(SP_INSTR_UINT_MAXLEN+6))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3327,
          "old_api": "reserve",
          "new_api": null,
          "old_text": "str->reserve(2*SP_INSTR_UINT_MAXLEN+14+32)",
          "new_text": null,
          "old_line_content": "  if (str->reserve(2*SP_INSTR_UINT_MAXLEN+14+32)) // Add some for the expr. too",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3839,
          "old_api": "STRING_WITH_LEN",
          "new_api": null,
          "old_text": "STRING_WITH_LEN(\"error \")",
          "new_text": null,
          "old_line_content": "  str->qs_append(STRING_WITH_LEN(\"error \"));",
          "new_line_content": "sp_instr_error::print(String *str)",
          "content_same": false
        },
        {
          "line": 3329,
          "old_api": "STRING_WITH_LEN",
          "new_api": null,
          "old_text": "STRING_WITH_LEN(\"jump_if_not \")",
          "new_text": null,
          "old_line_content": "  str->qs_append(STRING_WITH_LEN(\"jump_if_not \"));",
          "new_line_content": "sp_instr_jump_if_not::print(String *str)",
          "content_same": false
        },
        {
          "line": 3330,
          "old_api": "qs_append",
          "new_api": null,
          "old_text": "str->qs_append(m_dest)",
          "new_text": null,
          "old_line_content": "  str->qs_append(m_dest);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3331,
          "old_api": "qs_append",
          "new_api": null,
          "old_text": "str->qs_append('(')",
          "new_text": null,
          "old_line_content": "  str->qs_append('(');",
          "new_line_content": "  /* jump_if_not dest(cont) ... */",
          "content_same": false
        },
        {
          "line": 3840,
          "old_api": "qs_append",
          "new_api": null,
          "old_text": "str->qs_append(m_errcode)",
          "new_text": null,
          "old_line_content": "  str->qs_append(m_errcode);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3333,
          "old_api": "STRING_WITH_LEN",
          "new_api": null,
          "old_text": "STRING_WITH_LEN(\") \")",
          "new_text": null,
          "old_line_content": "  str->qs_append(STRING_WITH_LEN(\") \"));",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 3851,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"sp_instr_set_case_expr::execute\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"sp_instr_set_case_expr::execute\");",
          "new_line_content": "**************************************************************************/",
          "content_same": false
        },
        {
          "line": 3853,
          "old_api": "reset_lex_and_exec_core",
          "new_api": null,
          "old_text": "m_lex_keeper.reset_lex_and_exec_core(thd, nextp, TRUE, this)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(m_lex_keeper.reset_lex_and_exec_core(thd, nextp, TRUE, this));",
          "new_line_content": "int",
          "content_same": false
        },
        {
          "line": 3344,
          "old_api": "get_instr",
          "new_api": null,
          "old_text": "sp->get_instr(m_dest)",
          "new_text": null,
          "old_line_content": "  if ((i= sp->get_instr(m_dest)))",
          "new_line_content": "sp_instr_jump_if_not::opt_mark(sp_head *sp, List<sp_instr> *leads)",
          "content_same": false
        },
        {
          "line": 3346,
          "old_api": "opt_shortcut_jump",
          "new_api": null,
          "old_text": "i->opt_shortcut_jump(sp, this)",
          "new_text": null,
          "old_line_content": "    m_dest= i->opt_shortcut_jump(sp, this);",
          "new_line_content": "  sp_instr *i;",
          "content_same": false
        },
        {
          "line": 3347,
          "old_api": "get_instr",
          "new_api": null,
          "old_text": "sp->get_instr(m_dest)",
          "new_text": null,
          "old_line_content": "    m_optdest= sp->get_instr(m_dest);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3860,
          "old_api": "set_case_expr",
          "new_api": null,
          "old_text": "thd->spcont->set_case_expr(thd, m_case_expr_id, &m_case_expr)",
          "new_text": null,
          "old_line_content": "  int res= thd->spcont->set_case_expr(thd, m_case_expr_id, &m_case_expr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3350,
          "old_api": "get_instr",
          "new_api": null,
          "old_text": "sp->get_instr(m_cont_dest)",
          "new_text": null,
          "old_line_content": "  if ((i= sp->get_instr(m_cont_dest)))",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 3862,
          "old_api": "get_case_expr",
          "new_api": null,
          "old_text": "thd->spcont->get_case_expr(m_case_expr_id)",
          "new_text": null,
          "old_line_content": "  if (res && !thd->spcont->get_case_expr(m_case_expr_id))",
          "new_line_content": "int",
          "content_same": false
        },
        {
          "line": 3353,
          "old_api": "get_instr",
          "new_api": null,
          "old_text": "sp->get_instr(m_cont_dest)",
          "new_text": null,
          "old_line_content": "    m_cont_optdest= sp->get_instr(m_cont_dest);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3872,
          "old_api": "set_case_expr",
          "new_api": null,
          "old_text": "thd->spcont->set_case_expr(thd, m_case_expr_id, &null_item)",
          "new_text": null,
          "old_line_content": "        thd->spcont->set_case_expr(thd, m_case_expr_id, &null_item))",
          "new_line_content": "    */",
          "content_same": false
        },
        {
          "line": 3875,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(ME_FATALERROR)",
          "new_text": null,
          "old_line_content": "      my_error(ER_OUT_OF_RESOURCES, MYF(ME_FATALERROR));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3371,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "bp->push_back(this)",
          "new_text": null,
          "old_line_content": "      bp->push_back(this);",
          "new_line_content": "    do it (i.e. if the m_dest points backwards).",
          "content_same": false
        },
        {
          "line": 3889,
          "old_api": "reserve",
          "new_api": null,
          "old_text": "str->reserve(2*SP_INSTR_UINT_MAXLEN+18+32)",
          "new_text": null,
          "old_line_content": "  str->reserve(2*SP_INSTR_UINT_MAXLEN+18+32); // Add some extra for expr too",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3890,
          "old_api": "STRING_WITH_LEN",
          "new_api": null,
          "old_text": "STRING_WITH_LEN(\"set_case_expr (\")",
          "new_text": null,
          "old_line_content": "  str->qs_append(STRING_WITH_LEN(\"set_case_expr (\"));",
          "new_line_content": "void",
          "content_same": false
        },
        {
          "line": 3891,
          "old_api": "qs_append",
          "new_api": null,
          "old_text": "str->qs_append(m_cont_dest)",
          "new_text": null,
          "old_line_content": "  str->qs_append(m_cont_dest);",
          "new_line_content": "sp_instr_set_case_expr::print(String *str)",
          "content_same": false
        },
        {
          "line": 3892,
          "old_api": "STRING_WITH_LEN",
          "new_api": null,
          "old_text": "STRING_WITH_LEN(\") \")",
          "new_text": null,
          "old_line_content": "  str->qs_append(STRING_WITH_LEN(\") \"));",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3893,
          "old_api": "qs_append",
          "new_api": null,
          "old_text": "str->qs_append(m_case_expr_id)",
          "new_text": null,
          "old_line_content": "  str->qs_append(m_case_expr_id);",
          "new_line_content": "  /* set_case_expr (cont) id ... */",
          "content_same": false
        },
        {
          "line": 3387,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"sp_instr_freturn::execute\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"sp_instr_freturn::execute\");",
          "new_line_content": "*/",
          "content_same": false
        },
        {
          "line": 3388,
          "old_api": "reset_lex_and_exec_core",
          "new_api": null,
          "old_text": "m_lex_keeper.reset_lex_and_exec_core(thd, nextp, TRUE, this)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(m_lex_keeper.reset_lex_and_exec_core(thd, nextp, TRUE, this));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3904,
          "old_api": "get_instr",
          "new_api": null,
          "old_text": "sp->get_instr(m_cont_dest)",
          "new_text": null,
          "old_line_content": "  if ((i= sp->get_instr(m_cont_dest)))",
          "new_line_content": "sp_instr_set_case_expr::opt_mark(sp_head *sp, List<sp_instr> *leads)",
          "content_same": false
        },
        {
          "line": 3906,
          "old_api": "opt_shortcut_jump",
          "new_api": null,
          "old_text": "i->opt_shortcut_jump(sp, this)",
          "new_text": null,
          "old_line_content": "    m_cont_dest= i->opt_shortcut_jump(sp, this);",
          "new_line_content": "  sp_instr *i;",
          "content_same": false
        },
        {
          "line": 3907,
          "old_api": "get_instr",
          "new_api": null,
          "old_text": "sp->get_instr(m_cont_dest)",
          "new_text": null,
          "old_line_content": "    m_cont_optdest= sp->get_instr(m_cont_dest);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3917,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "bp->push_back(this)",
          "new_text": null,
          "old_line_content": "    bp->push_back(this);        // Forward",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3410,
          "old_api": "set_return_value",
          "new_api": null,
          "old_text": "thd->spcont->set_return_value(thd, &m_value)",
          "new_text": null,
          "old_line_content": "  return thd->spcont->set_return_value(thd, &m_value);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3417,
          "old_api": "reserve",
          "new_api": null,
          "old_text": "str->reserve(1024+8+32)",
          "new_text": null,
          "old_line_content": "  if (str->reserve(1024+8+32)) // Add some for the expr. too",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3419,
          "old_api": "STRING_WITH_LEN",
          "new_api": null,
          "old_text": "STRING_WITH_LEN(\"freturn \")",
          "new_text": null,
          "old_line_content": "  str->qs_append(STRING_WITH_LEN(\"freturn \"));",
          "new_line_content": "sp_instr_freturn::print(String *str)",
          "content_same": false
        },
        {
          "line": 3420,
          "old_api": "qs_append",
          "new_api": null,
          "old_text": "str->qs_append((uint)m_type)",
          "new_text": null,
          "old_line_content": "  str->qs_append((uint)m_type);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3421,
          "old_api": "qs_append",
          "new_api": null,
          "old_text": "str->qs_append(' ')",
          "new_text": null,
          "old_line_content": "  str->qs_append(' ');",
          "new_line_content": "  /* freturn type expr... */",
          "content_same": false
        },
        {
          "line": 2920,
          "old_api": "open_temporary_tables",
          "new_api": null,
          "old_text": "open_temporary_tables(thd, m_lex->query_tables)",
          "new_text": null,
          "old_line_content": "    res= (open_temporary_tables(thd, m_lex->query_tables) ||",
          "new_line_content": "      either.",
          "content_same": false
        },
        {
          "line": 2921,
          "old_api": "check_table_access",
          "new_api": null,
          "old_text": "check_table_access(thd, SELECT_ACL, m_lex->query_tables, FALSE,\n                             UINT_MAX, FALSE)",
          "new_text": null,
          "old_line_content": "          check_table_access(thd, SELECT_ACL, m_lex->query_tables, FALSE,",
          "new_line_content": "    */",
          "content_same": false
        },
        {
          "line": 3432,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"sp_instr_hpush_jump::execute\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"sp_instr_hpush_jump::execute\");",
          "new_line_content": "*/",
          "content_same": false
        },
        {
          "line": 3434,
          "old_api": "push_handler",
          "new_api": null,
          "old_text": "thd->spcont->push_handler(m_handler, m_ip + 1)",
          "new_text": null,
          "old_line_content": "  int ret= thd->spcont->push_handler(m_handler, m_ip + 1);",
          "new_line_content": "int",
          "content_same": false
        },
        {
          "line": 3438,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(ret)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(ret);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2927,
          "old_api": "exec_core",
          "new_api": null,
          "old_text": "instr->exec_core(thd, nextp)",
          "new_text": null,
          "old_line_content": "      res= instr->exec_core(thd, nextp);",
          "new_line_content": "    if (!res)",
          "content_same": false
        },
        {
          "line": 3446,
          "old_api": "reserve",
          "new_api": null,
          "old_text": "str->reserve(SP_INSTR_UINT_MAXLEN*2 + 21)",
          "new_text": null,
          "old_line_content": "  if (str->reserve(SP_INSTR_UINT_MAXLEN*2 + 21))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2935,
          "old_api": "cleanup",
          "new_api": null,
          "old_text": "m_lex->unit.cleanup()",
          "new_text": null,
          "old_line_content": "    m_lex->unit.cleanup();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3449,
          "old_api": "STRING_WITH_LEN",
          "new_api": null,
          "old_text": "STRING_WITH_LEN(\"hpush_jump \")",
          "new_text": null,
          "old_line_content": "  str->qs_append(STRING_WITH_LEN(\"hpush_jump \"));",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3450,
          "old_api": "qs_append",
          "new_api": null,
          "old_text": "str->qs_append(m_dest)",
          "new_text": null,
          "old_line_content": "  str->qs_append(m_dest);",
          "new_line_content": "  /* hpush_jump dest fsize type */",
          "content_same": false
        },
        {
          "line": 2939,
          "old_api": "get_stmt_da",
          "new_api": null,
          "old_text": "thd->get_stmt_da()->set_overwrite_status(true)",
          "new_text": null,
          "old_line_content": "      thd->get_stmt_da()->set_overwrite_status(true);",
          "new_line_content": "    */",
          "content_same": false
        },
        {
          "line": 3452,
          "old_api": "qs_append",
          "new_api": null,
          "old_text": "str->qs_append(m_frame)",
          "new_text": null,
          "old_line_content": "  str->qs_append(m_frame);",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 2941,
          "old_api": "get_stmt_da",
          "new_api": null,
          "old_text": "thd->get_stmt_da()->set_overwrite_status(false)",
          "new_text": null,
          "old_line_content": "      thd->get_stmt_da()->set_overwrite_status(false);",
          "new_line_content": "    /* Here we also commit or rollback the current statement. */",
          "content_same": false
        },
        {
          "line": 2943,
          "old_api": "thd_proc_info",
          "new_api": null,
          "old_text": "thd_proc_info(thd, \"closing tables\")",
          "new_text": null,
          "old_line_content": "    thd_proc_info(thd, \"closing tables\");",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 2947,
          "old_api": "in_multi_stmt_transaction_mode",
          "new_api": null,
          "old_text": "thd->in_multi_stmt_transaction_mode()",
          "new_text": null,
          "old_line_content": "    if (! thd->in_sub_stmt && ! thd->in_multi_stmt_transaction_mode())",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3459,
          "old_api": "STRING_WITH_LEN",
          "new_api": null,
          "old_text": "STRING_WITH_LEN(\" CONTINUE\")",
          "new_text": null,
          "old_line_content": "    str->qs_append(STRING_WITH_LEN(\" CONTINUE\"));",
          "new_line_content": "  switch (m_handler->type) {",
          "content_same": false
        },
        {
          "line": 3463,
          "old_api": "DBUG_ASSERT",
          "new_api": null,
          "old_text": "DBUG_ASSERT(0)",
          "new_text": null,
          "old_line_content": "    DBUG_ASSERT(0);",
          "new_line_content": "  case sp_handler::CONTINUE:",
          "content_same": false
        },
        {
          "line": 2954,
          "old_api": "exec_core",
          "new_api": null,
          "old_text": "instr->exec_core(thd, nextp)",
          "new_text": null,
          "old_line_content": "    res= instr->exec_core(thd, nextp);",
          "new_line_content": "    else if (! thd->in_sub_stmt)",
          "content_same": false
        },
        {
          "line": 3474,
          "old_api": "get_instr",
          "new_api": null,
          "old_text": "sp->get_instr(m_dest)",
          "new_text": null,
          "old_line_content": "  if ((i= sp->get_instr(m_dest)))",
          "new_line_content": "sp_instr_hpush_jump::opt_mark(sp_head *sp, List<sp_instr> *leads)",
          "content_same": false
        },
        {
          "line": 3476,
          "old_api": "opt_shortcut_jump",
          "new_api": null,
          "old_text": "i->opt_shortcut_jump(sp, this)",
          "new_text": null,
          "old_line_content": "    m_dest= i->opt_shortcut_jump(sp, this);",
          "new_line_content": "  sp_instr *i;",
          "content_same": false
        },
        {
          "line": 3477,
          "old_api": "get_instr",
          "new_api": null,
          "old_text": "sp->get_instr(m_dest)",
          "new_text": null,
          "old_line_content": "    m_optdest= sp->get_instr(m_dest);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3989,
          "old_api": "my_hash_element",
          "new_api": null,
          "old_text": "my_hash_element(&m_sptabs, i)",
          "new_text": null,
          "old_line_content": "    tab= (SP_TABLE*) my_hash_element(&m_sptabs, i);",
          "new_line_content": "      lex_for_tmp_check->drop_temporary)",
          "content_same": false
        },
        {
          "line": 2972,
          "old_api": "mark_as_requiring_prelocking",
          "new_api": null,
          "old_text": "m_lex->mark_as_requiring_prelocking(NULL)",
          "new_text": null,
          "old_line_content": "    m_lex->mark_as_requiring_prelocking(NULL);",
          "new_line_content": "      Now we'll save the 'tail', and detach it.",
          "content_same": false
        },
        {
          "line": 2974,
          "old_api": "rollback_item_tree_changes",
          "new_api": null,
          "old_text": "thd->rollback_item_tree_changes()",
          "new_text": null,
          "old_line_content": "  thd->rollback_item_tree_changes();",
          "new_line_content": "    lex_query_tables_own_last= m_lex->query_tables_own_last;",
          "content_same": false
        },
        {
          "line": 4000,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(tname, table->db, tlen)",
          "new_text": null,
          "old_line_content": "      memcpy(tname, table->db, tlen);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 4002,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(tname+tlen, table->table_name, table->table_name_length)",
          "new_text": null,
          "old_line_content": "      memcpy(tname+tlen, table->table_name, table->table_name_length);",
          "new_line_content": "      uint tlen, alen;",
          "content_same": false
        },
        {
          "line": 2980,
          "old_api": "get_stmt_da",
          "new_api": null,
          "old_text": "thd->get_stmt_da()->sql_errno()",
          "new_text": null,
          "old_line_content": "      (thd->get_stmt_da()->sql_errno() != ER_CANT_REOPEN_TABLE &&",
          "new_line_content": "  /*",
          "content_same": false
        },
        {
          "line": 2981,
          "old_api": "get_stmt_da",
          "new_api": null,
          "old_text": "thd->get_stmt_da()->sql_errno()",
          "new_text": null,
          "old_line_content": "       thd->get_stmt_da()->sql_errno() != ER_NO_SUCH_TABLE &&",
          "new_line_content": "    Update the state of the active arena if no errors on",
          "content_same": false
        },
        {
          "line": 2982,
          "old_api": "get_stmt_da",
          "new_api": null,
          "old_text": "thd->get_stmt_da()->sql_errno()",
          "new_text": null,
          "old_line_content": "       thd->get_stmt_da()->sql_errno() != ER_UPDATE_TABLE_USED))",
          "new_line_content": "    open_tables stage.",
          "content_same": false
        },
        {
          "line": 3494,
          "old_api": "add_mark_lead",
          "new_api": null,
          "old_text": "sp->add_mark_lead(scope_ip, leads)",
          "new_text": null,
          "old_line_content": "      sp->add_mark_lead(scope_ip, leads);",
          "new_line_content": "    m_opt_hpop is the hpop marking the end of the handler scope.",
          "content_same": false
        },
        {
          "line": 4006,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(tname+tlen, table->alias, alen)",
          "new_text": null,
          "old_line_content": "      memcpy(tname+tlen, table->alias, alen);",
          "new_line_content": "      tname[tlen++]= '\\0';",
          "content_same": false
        },
        {
          "line": 2989,
          "old_api": "add_unsafe_rollback_flags",
          "new_api": null,
          "old_text": "thd->transaction.stmt.add_unsafe_rollback_flags(parent_unsafe_rollback_flags)",
          "new_text": null,
          "old_line_content": "  thd->transaction.stmt.add_unsafe_rollback_flags(parent_unsafe_rollback_flags);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3508,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"sp_instr_hpop::execute\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"sp_instr_hpop::execute\");",
          "new_line_content": "*/",
          "content_same": false
        },
        {
          "line": 3509,
          "old_api": "pop_handlers",
          "new_api": null,
          "old_text": "thd->spcont->pop_handlers(m_count)",
          "new_text": null,
          "old_line_content": "  thd->spcont->pop_handlers(m_count);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2999,
          "old_api": "is_error",
          "new_api": null,
          "old_text": "thd->is_error()",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(res || thd->is_error());",
          "new_line_content": "    they want to store some value in local variable, pass return value and",
          "content_same": false
        },
        {
          "line": 3511,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(0)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(0);",
          "new_line_content": "sp_instr_hpop::execute(THD *thd, uint *nextp)",
          "content_same": false
        },
        {
          "line": 4023,
          "old_api": "my_hash_search",
          "new_api": null,
          "old_text": "my_hash_search(&m_sptabs, (uchar *)tname, tlen)",
          "new_text": null,
          "old_line_content": "      if ((tab= (SP_TABLE*) my_hash_search(&m_sptabs, (uchar *)tname, tlen)) ||",
          "new_line_content": "      /*",
          "content_same": false
        },
        {
          "line": 4024,
          "old_api": "my_hash_search",
          "new_api": null,
          "old_text": "my_hash_search(&m_sptabs, (uchar *)tname,\n                                        tlen - alen - 1)",
          "new_text": null,
          "old_line_content": "          ((tab= (SP_TABLE*) my_hash_search(&m_sptabs, (uchar *)tname,",
          "new_line_content": "        We ignore alias when we check if table was already marked as temporary",
          "content_same": false
        },
        {
          "line": 3518,
          "old_api": "reserve",
          "new_api": null,
          "old_text": "str->reserve(SP_INSTR_UINT_MAXLEN+5)",
          "new_text": null,
          "old_line_content": "  if (str->reserve(SP_INSTR_UINT_MAXLEN+5))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3520,
          "old_api": "STRING_WITH_LEN",
          "new_api": null,
          "old_text": "STRING_WITH_LEN(\"hpop \")",
          "new_text": null,
          "old_line_content": "  str->qs_append(STRING_WITH_LEN(\"hpop \"));",
          "new_line_content": "sp_instr_hpop::print(String *str)",
          "content_same": false
        },
        {
          "line": 3521,
          "old_api": "qs_append",
          "new_api": null,
          "old_text": "str->qs_append(m_count)",
          "new_text": null,
          "old_line_content": "  str->qs_append(m_count);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4037,
          "old_api": "calloc",
          "new_api": null,
          "old_text": "thd->calloc(sizeof(SP_TABLE))",
          "new_text": null,
          "old_line_content": "        if (!(tab= (SP_TABLE *)thd->calloc(sizeof(SP_TABLE))))",
          "new_line_content": "          tab->lock_count++;",
          "content_same": false
        },
        {
          "line": 3015,
          "old_api": "DBUG_ASSERT",
          "new_api": null,
          "old_text": "DBUG_ASSERT(0)",
          "new_text": null,
          "old_line_content": "  DBUG_ASSERT(0);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3532,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"sp_instr_hreturn::execute\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"sp_instr_hreturn::execute\");",
          "new_line_content": "*/",
          "content_same": false
        },
        {
          "line": 3534,
          "old_api": "get_stmt_da",
          "new_api": null,
          "old_text": "thd->get_stmt_da()",
          "new_text": null,
          "old_line_content": "  uint continue_ip= thd->spcont->exit_handler(thd->get_stmt_da());",
          "new_line_content": "int",
          "content_same": false
        },
        {
          "line": 4048,
          "old_api": "memdup",
          "new_api": null,
          "old_text": "thd->memdup(tname, tab->qname.length + 1)",
          "new_text": null,
          "old_line_content": "        tab->qname.str= (char*) thd->memdup(tname, tab->qname.length + 1);",
          "new_line_content": "          tab->temp= TRUE;",
          "content_same": false
        },
        {
          "line": 3538,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(0)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3027,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"sp_instr_stmt::execute\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"sp_instr_stmt::execute\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3028,
          "old_api": "sql_command",
          "new_api": null,
          "old_text": "m_lex_keeper.sql_command()",
          "new_text": null,
          "old_line_content": "  DBUG_PRINT(\"info\", (\"command: %d\", m_lex_keeper.sql_command()));",
          "new_line_content": "int",
          "content_same": false
        },
        {
          "line": 4056,
          "old_api": "my_hash_insert",
          "new_api": null,
          "old_text": "my_hash_insert(&m_sptabs, (uchar *)tab)",
          "new_text": null,
          "old_line_content": "        if (my_hash_insert(&m_sptabs, (uchar *)tab))",
          "new_line_content": "        tab->table_name_length= table->table_name_length;",
          "content_same": false
        },
        {
          "line": 3546,
          "old_api": "reserve",
          "new_api": null,
          "old_text": "str->reserve(SP_INSTR_UINT_MAXLEN*2 + 9)",
          "new_text": null,
          "old_line_content": "  if (str->reserve(SP_INSTR_UINT_MAXLEN*2 + 9))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3035,
          "old_api": "alloc_query",
          "new_api": null,
          "old_text": "alloc_query(thd, m_query.str, m_query.length)",
          "new_text": null,
          "old_line_content": "  if (!(res= alloc_query(thd, m_query.str, m_query.length)) &&",
          "new_line_content": "  const CSET_STRING query_backup= thd->query_string;",
          "content_same": false
        },
        {
          "line": 3036,
          "old_api": "subst_spvars",
          "new_api": null,
          "old_text": "subst_spvars(thd, this, &m_query)",
          "new_text": null,
          "old_line_content": "      !(res=subst_spvars(thd, this, &m_query)))",
          "new_line_content": "#if defined(ENABLED_PROFILING)",
          "content_same": false
        },
        {
          "line": 3548,
          "old_api": "STRING_WITH_LEN",
          "new_api": null,
          "old_text": "STRING_WITH_LEN(\"hreturn \")",
          "new_text": null,
          "old_line_content": "  str->qs_append(STRING_WITH_LEN(\"hreturn \"));",
          "new_line_content": "sp_instr_hreturn::print(String *str)",
          "content_same": false
        },
        {
          "line": 3042,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely((thd->variables.option_bits & OPTION_LOG_OFF)==0)",
          "new_text": null,
          "old_line_content": "    if (unlikely((thd->variables.option_bits & OPTION_LOG_OFF)==0))",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 3043,
          "old_api": "query_length",
          "new_api": null,
          "old_text": "thd->query_length()",
          "new_text": null,
          "old_line_content": "      general_log_write(thd, COM_QUERY, thd->query(), thd->query_length());",
          "new_line_content": "    /*",
          "content_same": false
        },
        {
          "line": 3554,
          "old_api": "qs_append",
          "new_api": null,
          "old_text": "str->qs_append(m_dest)",
          "new_text": null,
          "old_line_content": "    str->qs_append(m_dest);",
          "new_line_content": "  if (m_dest)",
          "content_same": false
        },
        {
          "line": 3045,
          "old_api": "query",
          "new_api": null,
          "old_text": "thd->query()",
          "new_text": null,
          "old_line_content": "    if (query_cache_send_result_to_client(thd, thd->query(),",
          "new_line_content": "      queries with SP vars can't be cached)",
          "content_same": false
        },
        {
          "line": 3046,
          "old_api": "query_length",
          "new_api": null,
          "old_text": "thd->query_length()",
          "new_text": null,
          "old_line_content": "                                          thd->query_length()) <= 0)",
          "new_line_content": "    */",
          "content_same": false
        },
        {
          "line": 3061,
          "old_api": "log_slow_statement",
          "new_api": null,
          "old_text": "log_slow_statement(thd)",
          "new_text": null,
          "old_line_content": "        log_slow_statement(thd);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 3068,
          "old_api": "is_error",
          "new_api": null,
          "old_text": "thd->is_error()",
          "new_text": null,
          "old_line_content": "    if (!thd->is_error())",
          "new_line_content": "    else",
          "content_same": false
        },
        {
          "line": 3069,
          "old_api": "get_stmt_da",
          "new_api": null,
          "old_text": "thd->get_stmt_da()->reset_diagnostics_area()",
          "new_text": null,
          "old_line_content": "      thd->get_stmt_da()->reset_diagnostics_area();",
          "new_line_content": "      *nextp= m_ip+1;",
          "content_same": false
        },
        {
          "line": 4094,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"sp_head::add_used_tables_to_table_list\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"sp_head::add_used_tables_to_table_list\");",
          "new_line_content": "                                       TABLE_LIST *belong_to_view)",
          "content_same": false
        },
        {
          "line": 3071,
          "old_api": "is_error",
          "new_api": null,
          "old_text": "thd->is_error()",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(res || thd->is_error());",
          "new_line_content": "    thd->query_name_consts= 0;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 46,
      "total_additions": 207,
      "total_deletions": 207,
      "total_api_changes": 460
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 10,
        "api_related_lines": 460,
        "non_api_lines": 4,
        "non_api_line_numbers": [
          2922,
          2925,
          2926,
          2919
        ]
      }
    },
    "api_calls_before": 790,
    "api_calls_after": 790,
    "diff_info": {
      "added_lines": 9,
      "removed_lines": 4,
      "total_diff_lines": 26
    }
  }
}
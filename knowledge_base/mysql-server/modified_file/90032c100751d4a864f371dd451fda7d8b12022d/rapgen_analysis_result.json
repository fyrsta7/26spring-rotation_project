{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/90032c100751d4a864f371dd451fda7d8b12022d",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/90032c100751d4a864f371dd451fda7d8b12022d/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/90032c100751d4a864f371dd451fda7d8b12022d/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/90032c100751d4a864f371dd451fda7d8b12022d/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 392,
          "old_api": "DBUG_RETURN",
          "new_api": "my_b_tell",
          "old_text": "DBUG_RETURN(1)",
          "new_text": "my_b_tell(info)",
          "old_line_content": "      DBUG_RETURN(1);",
          "new_line_content": "      info->end_of_file=my_b_tell(info);",
          "content_same": false
        },
        {
          "line": 464,
          "old_api": "memcpy",
          "new_api": "uint) (info->read_end-info->read_pos)",
          "old_text": "memcpy(Buffer,info->read_pos, (size_t) (left_length))",
          "new_text": "uint) (info->read_end-info->read_pos)",
          "old_line_content": "    memcpy(Buffer,info->read_pos, (size_t) (left_length));",
          "new_line_content": "  if ((left_length=(uint) (info->read_end-info->read_pos)))",
          "content_same": false
        },
        {
          "line": 509,
          "old_api": "my_read",
          "new_api": "DBUG_RETURN",
          "old_text": "my_read(info->file,Buffer,(uint) length,info->myflags)",
          "new_text": "DBUG_RETURN(1)",
          "old_line_content": "    if ((read_length=my_read(info->file,Buffer,(uint) length,info->myflags))",
          "new_line_content": "      DBUG_RETURN(1);",
          "content_same": false
        },
        {
          "line": 637,
          "old_api": "pthread_mutex_init",
          "new_api": "DBUG_ASSERT",
          "old_text": "pthread_mutex_init(&cshare->mutex, MY_MUTEX_INIT_FAST)",
          "new_text": "DBUG_ASSERT(read_cache->type == READ_CACHE)",
          "old_line_content": "  pthread_mutex_init(&cshare->mutex, MY_MUTEX_INIT_FAST);",
          "new_line_content": "  DBUG_ASSERT(read_cache->type == READ_CACHE);",
          "content_same": false
        },
        {
          "line": 638,
          "old_api": "pthread_cond_init",
          "new_api": "DBUG_ASSERT",
          "old_text": "pthread_cond_init(&cshare->cond, 0)",
          "new_text": "DBUG_ASSERT(!write_cache || (write_cache->type == WRITE_CACHE))",
          "old_line_content": "  pthread_cond_init(&cshare->cond, 0);",
          "new_line_content": "  DBUG_ASSERT(!write_cache || (write_cache->type == WRITE_CACHE));",
          "content_same": false
        },
        {
          "line": 691,
          "old_api": "DBUG_PRINT",
          "new_api": "flush_io_cache",
          "old_text": "DBUG_PRINT(\"io_cache_share\", (\"%s: 0x%lx\",\n                                (cache == cshare->source_cache) ?\n                                \"writer\" : \"reader\", (long) cache))",
          "new_text": "flush_io_cache(cache)",
          "old_line_content": "  DBUG_PRINT(\"io_cache_share\", (\"%s: 0x%lx\",",
          "new_line_content": "    flush_io_cache(cache);",
          "content_same": false
        },
        {
          "line": 717,
          "old_api": "pthread_mutex_unlock",
          "new_api": "pthread_cond_broadcast",
          "old_text": "pthread_mutex_unlock(&cshare->mutex)",
          "new_text": "pthread_cond_broadcast(&cshare->cond)",
          "old_line_content": "  pthread_mutex_unlock(&cshare->mutex);",
          "new_line_content": "    pthread_cond_broadcast(&cshare->cond);",
          "content_same": false
        },
        {
          "line": 724,
          "old_api": "pthread_mutex_destroy",
          "new_api": "DBUG_PRINT",
          "old_text": "pthread_mutex_destroy(&cshare->mutex)",
          "new_text": "DBUG_PRINT(\"io_cache_share\", (\"last thread removed, destroy share\"))",
          "old_line_content": "    pthread_mutex_destroy(&cshare->mutex);",
          "new_line_content": "    DBUG_PRINT(\"io_cache_share\", (\"last thread removed, destroy share\"));",
          "content_same": false
        },
        {
          "line": 765,
          "old_api": "pthread_mutex_lock",
          "new_api": "DBUG_ENTER",
          "old_text": "pthread_mutex_lock(&cshare->mutex)",
          "new_text": "DBUG_ENTER(\"lock_io_cache\")",
          "old_line_content": "  pthread_mutex_lock(&cshare->mutex);",
          "new_line_content": "  DBUG_ENTER(\"lock_io_cache\");",
          "content_same": false
        },
        {
          "line": 787,
          "old_api": "DBUG_RETURN",
          "new_api": "DBUG_PRINT",
          "old_text": "DBUG_RETURN(1)",
          "new_text": "DBUG_PRINT(\"io_cache_share\", (\"writer awoke, going to copy\"))",
          "old_line_content": "      DBUG_RETURN(1);",
          "new_line_content": "      DBUG_PRINT(\"io_cache_share\", (\"writer awoke, going to copy\"));",
          "content_same": false
        },
        {
          "line": 965,
          "old_api": "memcpy",
          "new_api": "uint) (cache->read_end - cache->read_pos)",
          "old_text": "memcpy(Buffer, cache->read_pos, (size_t) (left_length))",
          "new_text": "uint) (cache->read_end - cache->read_pos)",
          "old_line_content": "    memcpy(Buffer, cache->read_pos, (size_t) (left_length));",
          "new_line_content": "  if ((left_length= (uint) (cache->read_end - cache->read_pos)))",
          "content_same": false
        },
        {
          "line": 977,
          "old_api": "IO_ROUND_DN",
          "new_api": "uint) (pos_in_file & (IO_SIZE-1))",
          "old_text": "IO_ROUND_DN(cache->read_length - length)",
          "new_text": "uint) (pos_in_file & (IO_SIZE-1))",
          "old_line_content": "             length + IO_ROUND_DN(cache->read_length - length) :",
          "new_line_content": "    diff_length= (uint) (pos_in_file & (IO_SIZE-1));",
          "content_same": false
        },
        {
          "line": 981,
          "old_api": "uint) (cache->end_of_file - pos_in_file)",
          "new_api": "IO_ROUND_UP",
          "old_text": "uint) (cache->end_of_file - pos_in_file)",
          "new_text": "IO_ROUND_UP(length - cache->read_length)",
          "old_line_content": "      length= (uint) (cache->end_of_file - pos_in_file);",
          "new_line_content": "             length - IO_ROUND_UP(length - cache->read_length));",
          "content_same": false
        },
        {
          "line": 990,
          "old_api": "DBUG_ASSERT",
          "new_api": "lock_io_cache",
          "old_text": "DBUG_ASSERT(!cshare->source_cache)",
          "new_text": "lock_io_cache(cache, pos_in_file)",
          "old_line_content": "      DBUG_ASSERT(!cshare->source_cache);",
          "new_line_content": "    if (lock_io_cache(cache, pos_in_file))",
          "content_same": false
        },
        {
          "line": 1016,
          "old_api": "my_read",
          "new_api": "DBUG_RETURN",
          "old_text": "my_read(cache->file, cache->buffer, length, cache->myflags)",
          "new_text": "DBUG_RETURN(1)",
          "old_line_content": "        len= (int) my_read(cache->file, cache->buffer, length, cache->myflags);",
          "new_line_content": "            DBUG_RETURN(1);",
          "content_same": false
        },
        {
          "line": 1051,
          "old_api": "DBUG_RETURN",
          "new_api": "DBUG_PRINT",
          "old_text": "DBUG_RETURN(1)",
          "new_text": "DBUG_PRINT(\"io_cache_share\", (\"reader error. len %d  left %u\",\n                                    len, left_length))",
          "old_line_content": "      DBUG_RETURN(1);",
          "new_line_content": "      DBUG_PRINT(\"io_cache_share\", (\"reader error. len %d  left %u\",",
          "content_same": false
        },
        {
          "line": 1054,
          "old_api": "memcpy",
          "new_api": "DBUG_RETURN",
          "old_text": "memcpy(Buffer, cache->read_pos, (size_t) cnt)",
          "new_text": "DBUG_RETURN(1)",
          "old_line_content": "    memcpy(Buffer, cache->read_pos, (size_t) cnt);",
          "new_line_content": "      DBUG_RETURN(1);",
          "content_same": false
        },
        {
          "line": 1096,
          "old_api": "lock_io_cache",
          "new_api": "min",
          "old_text": "lock_io_cache(write_cache, write_cache->pos_in_file)",
          "new_text": "min(write_length, write_cache->buffer_length)",
          "old_line_content": "    rc= lock_io_cache(write_cache, write_cache->pos_in_file);",
          "new_line_content": "    uint copy_length= min(write_length, write_cache->buffer_length);",
          "content_same": false
        },
        {
          "line": 1139,
          "old_api": "memcpy",
          "new_api": "uint) (info->read_end-info->read_pos)",
          "old_text": "memcpy(Buffer,info->read_pos, (size_t) (left_length))",
          "new_text": "uint) (info->read_end-info->read_pos)",
          "old_line_content": "    memcpy(Buffer,info->read_pos, (size_t) (left_length));",
          "new_line_content": "  if ((left_length=(uint) (info->read_end-info->read_pos)))",
          "content_same": false
        },
        {
          "line": 1146,
          "old_api": "uint) (info->read_end - info->buffer)",
          "new_api": "lock_append_buffer",
          "old_text": "uint) (info->read_end - info->buffer)",
          "new_text": "lock_append_buffer(info)",
          "old_line_content": "  if ((pos_in_file=info->pos_in_file+(uint) (info->read_end - info->buffer)) >=",
          "new_line_content": "  lock_append_buffer(info);",
          "content_same": false
        },
        {
          "line": 1166,
          "old_api": "uint) (IO_SIZE+(IO_SIZE-diff_length))",
          "new_api": "uint) (pos_in_file & (IO_SIZE-1))",
          "old_text": "uint) (IO_SIZE+(IO_SIZE-diff_length))",
          "new_text": "uint) (pos_in_file & (IO_SIZE-1))",
          "old_line_content": "  if (Count >= (uint) (IO_SIZE+(IO_SIZE-diff_length)))",
          "new_line_content": "  diff_length=(uint) (pos_in_file & (IO_SIZE-1));",
          "content_same": false
        },
        {
          "line": 1392,
          "old_api": "my_read",
          "new_api": "uint) (next_pos_in_file & (IO_SIZE-1))",
          "old_text": "my_read(info->file,info->request_pos,\n\t\t\t       read_length, info->myflags)",
          "new_text": "uint) (next_pos_in_file & (IO_SIZE-1))",
          "old_line_content": "      if ((read_length=my_read(info->file,info->request_pos,",
          "new_line_content": "    read_length=IO_SIZE*2- (uint) (next_pos_in_file & (IO_SIZE-1));",
          "content_same": false
        },
        {
          "line": 1395,
          "old_api": "min",
          "new_api": "my_read",
          "old_text": "min(Count,read_length)",
          "new_text": "my_read(info->file,info->request_pos,\n\t\t\t       read_length, info->myflags)",
          "old_line_content": "      use_length=min(Count,read_length);",
          "new_line_content": "      if ((read_length=my_read(info->file,info->request_pos,",
          "content_same": false
        },
        {
          "line": 1477,
          "old_api": "*post_read)(info)",
          "new_api": "*(info)->read_function)(info,&buff,1)",
          "old_text": "*post_read)(info)",
          "new_text": "*(info)->read_function)(info,&buff,1)",
          "old_line_content": "    (*post_read)(info);",
          "new_line_content": "  if ((*(info)->read_function)(info,&buff,1))",
          "content_same": false
        },
        {
          "line": 1574,
          "old_api": "lock_append_buffer",
          "new_api": "DBUG_ASSERT",
          "old_text": "lock_append_buffer(info)",
          "new_text": "DBUG_ASSERT(!info->share)",
          "old_line_content": "  lock_append_buffer(info);",
          "new_line_content": "  DBUG_ASSERT(!info->share);",
          "content_same": false
        },
        {
          "line": 1578,
          "old_api": "memcpy",
          "new_api": "uint) (info->write_end - info->write_pos)",
          "old_text": "memcpy(info->write_pos,Buffer,(size_t) rest_length)",
          "new_text": "uint) (info->write_end - info->write_pos)",
          "old_line_content": "  memcpy(info->write_pos,Buffer,(size_t) rest_length);",
          "new_line_content": "  rest_length=(uint) (info->write_end - info->write_pos);",
          "content_same": false
        },
        {
          "line": 1649,
          "old_api": "uint) (info->pos_in_file - pos)",
          "new_api": "my_pwrite",
          "old_text": "uint) (info->pos_in_file - pos)",
          "new_text": "my_pwrite(info->file, Buffer, Count, pos,\n\t\t       info->myflags | MY_NABP)",
          "old_line_content": "    length= (uint) (info->pos_in_file - pos);",
          "new_line_content": "      return my_pwrite(info->file, Buffer, Count, pos,",
          "content_same": false
        },
        {
          "line": 1664,
          "old_api": "uint) (pos - info->pos_in_file)",
          "new_api": "uint) (info->write_end - info->buffer)",
          "old_text": "uint) (pos - info->pos_in_file)",
          "new_text": "uint) (info->write_end - info->buffer)",
          "old_line_content": "    uint offset= (uint) (pos - info->pos_in_file);",
          "new_line_content": "  length= (uint) (info->write_end - info->buffer);",
          "content_same": false
        },
        {
          "line": 1835,
          "old_api": "DBUG_RETURN",
          "new_api": "pthread_mutex_destroy",
          "old_text": "DBUG_RETURN(error)",
          "new_text": "pthread_mutex_destroy(&info->append_buffer_lock)",
          "old_line_content": "  DBUG_RETURN(error);",
          "new_line_content": "    pthread_mutex_destroy(&info->append_buffer_lock);",
          "content_same": false
        },
        {
          "line": 1853,
          "old_api": "fprintf",
          "new_api": "va_start",
          "old_text": "fprintf(stderr,\", errno=%d\\n\", errno)",
          "new_text": "va_start(va_args,fmt)",
          "old_line_content": "  fprintf(stderr,\", errno=%d\\n\", errno);",
          "new_line_content": "  va_start(va_args,fmt);",
          "content_same": false
        },
        {
          "line": 1854,
          "old_api": "exit",
          "new_api": "fprintf",
          "old_text": "exit(1)",
          "new_text": "fprintf(stderr,\"Error:\")",
          "old_line_content": "  exit(1);",
          "new_line_content": "  fprintf(stderr,\"Error:\");",
          "content_same": false
        },
        {
          "line": 1863,
          "old_api": "die",
          "new_api": "MYF",
          "old_text": "die(\"failed in init_io_cache()\")",
          "new_text": "MYF(MY_WME)",
          "old_line_content": "    die(\"failed in init_io_cache()\");",
          "new_line_content": "  if ((fd=my_open(fname,O_CREAT | O_RDWR,MYF(MY_WME))) < 0)",
          "content_same": false
        },
        {
          "line": 1887,
          "old_api": "die",
          "new_api": "MY_INIT",
          "old_text": "die(\"Not enough memory to allocate test block\")",
          "new_text": "MY_INIT(argv[0])",
          "old_line_content": "    die(\"Not enough memory to allocate test block\");",
          "new_line_content": "  MY_INIT(argv[0]);",
          "content_same": false
        },
        {
          "line": 1896,
          "old_api": "die",
          "new_api": "MYF",
          "old_text": "die(\"Delete of %s failed, aborting\", fname)",
          "new_text": "MYF(0)",
          "old_line_content": "      die(\"Delete of %s failed, aborting\", fname);",
          "new_line_content": "  if (my_stat(fname,&status, MYF(0)) &&",
          "content_same": false
        },
        {
          "line": 1905,
          "old_api": "my_b_append",
          "new_api": "rand",
          "old_text": "my_b_append(&sra_cache, block, block_size)",
          "new_text": "rand()",
          "old_line_content": "\tmy_b_append(&sra_cache, block, block_size))",
          "new_line_content": "    int block_size = abs(rand() % max_block);",
          "content_same": false
        },
        {
          "line": 1906,
          "old_api": "die",
          "new_api": "int4store",
          "old_text": "die(\"write failed\")",
          "new_text": "int4store(buf, block_size)",
          "old_line_content": "      die(\"write failed\");",
          "new_line_content": "    int4store(buf, block_size);",
          "content_same": false
        },
        {
          "line": 1909,
          "old_api": "close_file",
          "new_api": "die",
          "old_text": "close_file(&sra_cache)",
          "new_text": "die(\"write failed\")",
          "old_line_content": "  close_file(&sra_cache);",
          "new_line_content": "      die(\"write failed\");",
          "content_same": false
        },
        {
          "line": 1912,
          "old_api": "die",
          "new_api": "close_file",
          "old_text": "die(\"%s failed to stat, but I had just closed it,\\\n wonder how that happened\")",
          "new_text": "close_file(&sra_cache)",
          "old_line_content": "    die(\"%s failed to stat, but I had just closed it,\\",
          "new_line_content": "  close_file(&sra_cache);",
          "content_same": false
        },
        {
          "line": 1914,
          "old_api": "printf",
          "new_api": "MYF",
          "old_text": "printf(\"Final size of %s is %s, wrote %d bytes\\n\",fname,\n\t llstr(status.st_size,llstr_buf),\n\t total_bytes)",
          "new_text": "MYF(MY_WME)",
          "old_line_content": "  printf(\"Final size of %s is %s, wrote %d bytes\\n\",fname,",
          "new_line_content": "  if (!my_stat(fname,&status,MYF(MY_WME)))",
          "content_same": false
        },
        {
          "line": 1915,
          "old_api": "llstr",
          "new_api": "die",
          "old_text": "llstr(status.st_size,llstr_buf)",
          "new_text": "die(\"%s failed to stat, but I had just closed it,\\\n wonder how that happened\")",
          "old_line_content": "\t llstr(status.st_size,llstr_buf),",
          "new_line_content": "    die(\"%s failed to stat, but I had just closed it,\\",
          "content_same": false
        },
        {
          "line": 1917,
          "old_api": "MYF",
          "new_api": "printf",
          "old_text": "MYF(MY_WME)",
          "new_text": "printf(\"Final size of %s is %s, wrote %d bytes\\n\",fname,\n\t llstr(status.st_size,llstr_buf),\n\t total_bytes)",
          "old_line_content": "  my_delete(fname, MYF(MY_WME));",
          "new_line_content": "  printf(\"Final size of %s is %s, wrote %d bytes\\n\",fname,",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 512,
          "old_api": null,
          "new_api": "my_read",
          "old_text": null,
          "new_text": "my_read(info->file,Buffer,(uint) length,info->myflags)",
          "old_line_content": "      info->error= (read_length == (uint) -1 ? -1 :",
          "new_line_content": "    if ((read_length=my_read(info->file,Buffer,(uint) length,info->myflags))",
          "content_same": false
        },
        {
          "line": 517,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(1)",
          "old_line_content": "    Buffer+=length;",
          "new_line_content": "      DBUG_RETURN(1);",
          "content_same": false
        },
        {
          "line": 1033,
          "old_api": null,
          "new_api": "unlock_io_cache",
          "old_text": null,
          "new_text": "unlock_io_cache(cache)",
          "old_line_content": "    {",
          "new_line_content": "      unlock_io_cache(cache);",
          "content_same": false
        },
        {
          "line": 1546,
          "old_api": null,
          "new_api": "copy_to_read_buffer",
          "old_text": null,
          "new_text": "copy_to_read_buffer(info, Buffer, length)",
          "old_line_content": "    Count-=length;",
          "new_line_content": "      copy_to_read_buffer(info, Buffer, length);",
          "content_same": false
        },
        {
          "line": 1553,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(info->write_pos,Buffer,(size_t) Count)",
          "old_line_content": "}",
          "new_line_content": "  memcpy(info->write_pos,Buffer,(size_t) Count);",
          "content_same": false
        },
        {
          "line": 535,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(1)",
          "old_line_content": "  }",
          "new_line_content": "      DBUG_RETURN(1);",
          "content_same": false
        },
        {
          "line": 539,
          "old_api": null,
          "new_api": "my_read",
          "old_text": null,
          "new_text": "my_read(info->file,info->buffer,(uint) max_length,\n\t\t\t   info->myflags)",
          "old_line_content": "  {",
          "new_line_content": "  else if ((length=my_read(info->file,info->buffer,(uint) max_length,",
          "content_same": false
        },
        {
          "line": 1565,
          "old_api": null,
          "new_api": "register",
          "old_text": null,
          "new_text": "register",
          "old_line_content": "",
          "new_line_content": "int my_b_append(register IO_CACHE *info, const byte *Buffer, uint Count)",
          "content_same": false
        },
        {
          "line": 544,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(Buffer,info->buffer,(size_t) length)",
          "old_line_content": "    info->read_pos=info->read_end=info->buffer;",
          "new_line_content": "      memcpy(Buffer,info->buffer,(size_t) length);",
          "content_same": false
        },
        {
          "line": 1057,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(Buffer, cache->read_pos, (size_t) cnt)",
          "old_line_content": "    left_length+= cnt;",
          "new_line_content": "    memcpy(Buffer, cache->read_pos, (size_t) cnt);",
          "content_same": false
        },
        {
          "line": 548,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(1)",
          "old_line_content": "  info->read_end=info->buffer+length;",
          "new_line_content": "    DBUG_RETURN(1);",
          "content_same": false
        },
        {
          "line": 1063,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(0)",
          "old_line_content": "",
          "new_line_content": "  DBUG_RETURN(0);",
          "content_same": false
        },
        {
          "line": 553,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(Buffer,info->buffer,(size_t) Count)",
          "old_line_content": "",
          "new_line_content": "  memcpy(Buffer,info->buffer,(size_t) Count);",
          "content_same": false
        },
        {
          "line": 554,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(0)",
          "old_line_content": "",
          "new_line_content": "  DBUG_RETURN(0);",
          "content_same": false
        },
        {
          "line": 1577,
          "old_api": null,
          "new_api": "lock_append_buffer",
          "old_text": null,
          "new_text": "lock_append_buffer(info)",
          "old_line_content": "    goto end;",
          "new_line_content": "  lock_append_buffer(info);",
          "content_same": false
        },
        {
          "line": 1581,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(info->write_pos,Buffer,(size_t) rest_length)",
          "old_line_content": "  info->write_pos+=rest_length;",
          "new_line_content": "  memcpy(info->write_pos,Buffer,(size_t) rest_length);",
          "content_same": false
        },
        {
          "line": 1585,
          "old_api": null,
          "new_api": "my_b_flush_io_cache",
          "old_text": null,
          "new_text": "my_b_flush_io_cache(info,0)",
          "old_line_content": "    return 1;",
          "new_line_content": "  if (my_b_flush_io_cache(info,0))",
          "content_same": false
        },
        {
          "line": 1587,
          "old_api": null,
          "new_api": "unlock_append_buffer",
          "old_text": null,
          "new_text": "unlock_append_buffer(info)",
          "old_line_content": "  if (Count >= IO_SIZE)",
          "new_line_content": "    unlock_append_buffer(info);",
          "content_same": false
        },
        {
          "line": 1593,
          "old_api": null,
          "new_api": "my_write",
          "old_text": null,
          "new_text": "my_write(info->file,Buffer,(uint) length,info->myflags | MY_NABP)",
          "old_line_content": "      return info->error= -1;",
          "new_line_content": "    if (my_write(info->file,Buffer,(uint) length,info->myflags | MY_NABP))",
          "content_same": false
        },
        {
          "line": 1595,
          "old_api": null,
          "new_api": "unlock_append_buffer",
          "old_text": null,
          "new_text": "unlock_append_buffer(info)",
          "old_line_content": "    Count-=length;",
          "new_line_content": "      unlock_append_buffer(info);",
          "content_same": false
        },
        {
          "line": 1089,
          "old_api": null,
          "new_api": "DBUG_ASSERT",
          "old_text": null,
          "new_text": "DBUG_ASSERT(cshare->source_cache == write_cache)",
          "old_line_content": "    It can be bigger if _my_b_write() is called with a big length.",
          "new_line_content": "  DBUG_ASSERT(cshare->source_cache == write_cache);",
          "content_same": false
        },
        {
          "line": 1604,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(info->write_pos,Buffer,(size_t) Count)",
          "old_line_content": "  return 0;",
          "new_line_content": "  memcpy(info->write_pos,Buffer,(size_t) Count);",
          "content_same": false
        },
        {
          "line": 1606,
          "old_api": null,
          "new_api": "unlock_append_buffer",
          "old_text": null,
          "new_text": "unlock_append_buffer(info)",
          "old_line_content": "",
          "new_line_content": "  unlock_append_buffer(info);",
          "content_same": false
        },
        {
          "line": 1097,
          "old_api": null,
          "new_api": "__attribute__",
          "old_text": null,
          "new_text": "__attribute__((unused))",
          "old_line_content": "    /* The writing thread does always have the lock when it awakes. */",
          "new_line_content": "    int  __attribute__((unused)) rc;",
          "content_same": false
        },
        {
          "line": 1099,
          "old_api": null,
          "new_api": "lock_io_cache",
          "old_text": null,
          "new_text": "lock_io_cache(write_cache, write_cache->pos_in_file)",
          "old_line_content": "",
          "new_line_content": "    rc= lock_io_cache(write_cache, write_cache->pos_in_file);",
          "content_same": false
        },
        {
          "line": 1101,
          "old_api": null,
          "new_api": "DBUG_ASSERT",
          "old_text": null,
          "new_text": "DBUG_ASSERT(rc)",
          "old_line_content": "",
          "new_line_content": "    DBUG_ASSERT(rc);",
          "content_same": false
        },
        {
          "line": 1103,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(cshare->buffer, write_buffer, copy_length)",
          "old_line_content": "    cshare->read_end=    cshare->buffer + copy_length;",
          "new_line_content": "    memcpy(cshare->buffer, write_buffer, copy_length);",
          "content_same": false
        },
        {
          "line": 1620,
          "old_api": null,
          "new_api": "my_b_append",
          "old_text": null,
          "new_text": "my_b_append(info, Buffer, Count)",
          "old_line_content": "",
          "new_line_content": "    return my_b_append(info, Buffer, Count);",
          "content_same": false
        },
        {
          "line": 1621,
          "old_api": null,
          "new_api": "my_b_write",
          "old_text": null,
          "new_text": "my_b_write(info, Buffer, Count)",
          "old_line_content": "",
          "new_line_content": "  return my_b_write(info, Buffer, Count);",
          "content_same": false
        },
        {
          "line": 1110,
          "old_api": null,
          "new_api": "unlock_io_cache",
          "old_text": null,
          "new_text": "unlock_io_cache(write_cache)",
          "old_line_content": "    write_length-= copy_length;",
          "new_line_content": "    unlock_io_cache(write_cache);",
          "content_same": false
        },
        {
          "line": 1631,
          "old_api": null,
          "new_api": "register",
          "old_text": null,
          "new_text": "register",
          "old_line_content": "  uint length;",
          "new_line_content": "int my_block_write(register IO_CACHE *info, const byte *Buffer, uint Count,",
          "content_same": false
        },
        {
          "line": 1642,
          "old_api": null,
          "new_api": "DBUG_ASSERT",
          "old_text": null,
          "new_text": "DBUG_ASSERT(!info->share)",
          "old_line_content": "  if (pos < info->pos_in_file)",
          "new_line_content": "  DBUG_ASSERT(!info->share);",
          "content_same": false
        },
        {
          "line": 1132,
          "old_api": null,
          "new_api": "register",
          "old_text": null,
          "new_text": "register",
          "old_line_content": "  my_off_t max_length, pos_in_file;",
          "new_line_content": "int _my_b_seq_read(register IO_CACHE *info, byte *Buffer, uint Count)",
          "content_same": false
        },
        {
          "line": 1652,
          "old_api": null,
          "new_api": "uint) (info->pos_in_file - pos)",
          "old_text": null,
          "new_text": "uint) (info->pos_in_file - pos)",
          "old_line_content": "    Buffer+=length;",
          "new_line_content": "    length= (uint) (info->pos_in_file - pos);",
          "content_same": false
        },
        {
          "line": 1141,
          "old_api": null,
          "new_api": "DBUG_ASSERT",
          "old_text": null,
          "new_text": "DBUG_ASSERT(Count > left_length)",
          "old_line_content": "    Count-=left_length;",
          "new_line_content": "    DBUG_ASSERT(Count > left_length);\t/* User is not using my_b_read() */",
          "content_same": false
        },
        {
          "line": 630,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"init_io_cache_share\")",
          "old_line_content": "                                (long) read_cache, (long) cshare,",
          "new_line_content": "  DBUG_ENTER(\"init_io_cache_share\");",
          "content_same": false
        },
        {
          "line": 631,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"io_cache_share\", (\"read_cache: 0x%lx  share: 0x%lx  \"\n                                \"write_cache: 0x%lx  threads: %u\",\n                                (long) read_cache, (long) cshare,\n                                (long) write_cache, num_threads))",
          "old_line_content": "                                (long) write_cache, num_threads));",
          "new_line_content": "  DBUG_PRINT(\"io_cache_share\", (\"read_cache: 0x%lx  share: 0x%lx  \"",
          "content_same": false
        },
        {
          "line": 1142,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(Buffer,info->read_pos, (size_t) (left_length))",
          "old_line_content": "  }",
          "new_line_content": "    memcpy(Buffer,info->read_pos, (size_t) (left_length));",
          "content_same": false
        },
        {
          "line": 1653,
          "old_api": null,
          "new_api": "my_pwrite",
          "old_text": null,
          "new_text": "my_pwrite(info->file, Buffer, length, pos, info->myflags | MY_NABP)",
          "old_line_content": "    pos+=  length;",
          "new_line_content": "    if (my_pwrite(info->file, Buffer, length, pos, info->myflags | MY_NABP))",
          "content_same": false
        },
        {
          "line": 636,
          "old_api": null,
          "new_api": "DBUG_ASSERT",
          "old_text": null,
          "new_text": "DBUG_ASSERT(num_threads > 1)",
          "old_line_content": "",
          "new_line_content": "  DBUG_ASSERT(num_threads > 1);",
          "content_same": false
        },
        {
          "line": 1149,
          "old_api": null,
          "new_api": "uint) (info->read_end - info->buffer)",
          "old_text": null,
          "new_text": "uint) (info->read_end - info->buffer)",
          "old_line_content": "",
          "new_line_content": "  if ((pos_in_file=info->pos_in_file+(uint) (info->read_end - info->buffer)) >=",
          "content_same": false
        },
        {
          "line": 640,
          "old_api": null,
          "new_api": "pthread_mutex_init",
          "old_text": null,
          "new_text": "pthread_mutex_init(&cshare->mutex, MY_MUTEX_INIT_FAST)",
          "old_line_content": "",
          "new_line_content": "  pthread_mutex_init(&cshare->mutex, MY_MUTEX_INIT_FAST);",
          "content_same": false
        },
        {
          "line": 641,
          "old_api": null,
          "new_api": "pthread_cond_init",
          "old_text": null,
          "new_text": "pthread_cond_init(&cshare->cond, 0)",
          "old_line_content": "  cshare->running_threads= num_threads;",
          "new_line_content": "  pthread_cond_init(&cshare->cond, 0);",
          "content_same": false
        },
        {
          "line": 642,
          "old_api": null,
          "new_api": "pthread_cond_init",
          "old_text": null,
          "new_text": "pthread_cond_init(&cshare->cond_writer, 0)",
          "old_line_content": "  cshare->total_threads=   num_threads;",
          "new_line_content": "  pthread_cond_init(&cshare->cond_writer, 0);",
          "content_same": false
        },
        {
          "line": 1667,
          "old_api": null,
          "new_api": "uint) (pos - info->pos_in_file)",
          "old_text": null,
          "new_text": "uint) (pos - info->pos_in_file)",
          "old_line_content": "      length=Count;",
          "new_line_content": "    uint offset= (uint) (pos - info->pos_in_file);",
          "content_same": false
        },
        {
          "line": 1157,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(0)",
          "old_line_content": "   info->error= -1;",
          "new_line_content": "  if (my_seek(info->file,pos_in_file,MY_SEEK_SET,MYF(0))",
          "content_same": false
        },
        {
          "line": 1671,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(info->buffer+offset, Buffer, length)",
          "old_line_content": "    /* Fix length of buffer if the new data was larger */",
          "new_line_content": "    memcpy(info->buffer+offset, Buffer, length);",
          "content_same": false
        },
        {
          "line": 1161,
          "old_api": null,
          "new_api": "unlock_append_buffer",
          "old_text": null,
          "new_text": "unlock_append_buffer(info)",
          "old_line_content": "  info->seek_not_done=0;",
          "new_line_content": "   unlock_append_buffer(info);",
          "content_same": false
        },
        {
          "line": 1169,
          "old_api": null,
          "new_api": "uint) (IO_SIZE+(IO_SIZE-diff_length))",
          "old_text": null,
          "new_text": "uint) (IO_SIZE+(IO_SIZE-diff_length))",
          "old_line_content": "",
          "new_line_content": "  if (Count >= (uint) (IO_SIZE+(IO_SIZE-diff_length)))",
          "content_same": false
        },
        {
          "line": 1681,
          "old_api": null,
          "new_api": "_my_b_write",
          "old_text": null,
          "new_text": "_my_b_write(info, Buffer, Count)",
          "old_line_content": "}",
          "new_line_content": "  if (_my_b_write(info, Buffer, Count))",
          "content_same": false
        },
        {
          "line": 1174,
          "old_api": null,
          "new_api": "my_read",
          "old_text": null,
          "new_text": "my_read(info->file,Buffer,(uint) length,info->myflags)",
          "old_line_content": "      info->error= -1;",
          "new_line_content": "    if ((read_length=my_read(info->file,Buffer,(uint) length,info->myflags)) ==",
          "content_same": false
        },
        {
          "line": 1178,
          "old_api": null,
          "new_api": "unlock_append_buffer",
          "old_text": null,
          "new_text": "unlock_append_buffer(info)",
          "old_line_content": "    Count-=read_length;",
          "new_line_content": "      unlock_append_buffer(info);",
          "content_same": false
        },
        {
          "line": 1705,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"my_b_flush_io_cache\")",
          "old_line_content": "    need_append_buffer_lock=0;",
          "new_line_content": "  DBUG_ENTER(\"my_b_flush_io_cache\");",
          "content_same": false
        },
        {
          "line": 687,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"remove_io_thread\")",
          "old_line_content": "  if (cache == cshare->source_cache)",
          "new_line_content": "  DBUG_ENTER(\"remove_io_thread\");",
          "content_same": false
        },
        {
          "line": 1714,
          "old_api": null,
          "new_api": "real_open_cached_file",
          "old_text": null,
          "new_text": "real_open_cached_file(info)",
          "old_line_content": "    LOCK_APPEND_BUFFER;",
          "new_line_content": "      if (real_open_cached_file(info))",
          "content_same": false
        },
        {
          "line": 1715,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN((info->error= -1))",
          "old_line_content": "",
          "new_line_content": "\tDBUG_RETURN((info->error= -1));",
          "content_same": false
        },
        {
          "line": 693,
          "old_api": null,
          "new_api": "pthread_mutex_lock",
          "old_text": null,
          "new_text": "pthread_mutex_lock(&cshare->mutex)",
          "old_line_content": "                                \"writer\" : \"reader\", (long) cache));",
          "new_line_content": "  pthread_mutex_lock(&cshare->mutex);",
          "content_same": false
        },
        {
          "line": 694,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"io_cache_share\", (\"%s: 0x%lx\",\n                                (cache == cshare->source_cache) ?\n                                \"writer\" : \"reader\", (long) cache))",
          "old_line_content": "",
          "new_line_content": "  DBUG_PRINT(\"io_cache_share\", (\"%s: 0x%lx\",",
          "content_same": false
        },
        {
          "line": 1719,
          "old_api": null,
          "new_api": "uint) (info->write_pos - info->write_buffer)",
          "old_text": null,
          "new_text": "uint) (info->write_pos - info->write_buffer)",
          "old_line_content": "      /*",
          "new_line_content": "    if ((length=(uint) (info->write_pos - info->write_buffer)))",
          "content_same": false
        },
        {
          "line": 1208,
          "old_api": null,
          "new_api": "my_read",
          "old_text": null,
          "new_text": "my_read(info->file,info->buffer,(uint) max_length,\n\t\t   info->myflags)",
          "old_line_content": "    {",
          "new_line_content": "    length=my_read(info->file,info->buffer,(uint) max_length,",
          "content_same": false
        },
        {
          "line": 700,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"io_cache_share\", (\"remaining threads: %u\", total))",
          "old_line_content": "  cache->share= NULL;",
          "new_line_content": "  DBUG_PRINT(\"io_cache_share\", (\"remaining threads: %u\", total));",
          "content_same": false
        },
        {
          "line": 1213,
          "old_api": null,
          "new_api": "unlock_append_buffer",
          "old_text": null,
          "new_text": "unlock_append_buffer(info)",
          "old_line_content": "    if (length < Count)",
          "new_line_content": "      unlock_append_buffer(info);",
          "content_same": false
        },
        {
          "line": 1729,
          "old_api": null,
          "new_api": "copy_to_read_buffer",
          "old_text": null,
          "new_text": "copy_to_read_buffer(info, info->write_buffer, length)",
          "old_line_content": "      pos_in_file=info->pos_in_file;",
          "new_line_content": "        copy_to_read_buffer(info, info->write_buffer, length);",
          "content_same": false
        },
        {
          "line": 1218,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(Buffer,info->buffer,(size_t) length)",
          "old_line_content": "",
          "new_line_content": "      memcpy(Buffer,info->buffer,(size_t) length);",
          "content_same": false
        },
        {
          "line": 708,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"io_cache_share\", (\"writer leaves\"))",
          "old_line_content": "",
          "new_line_content": "    DBUG_PRINT(\"io_cache_share\", (\"writer leaves\"));",
          "content_same": false
        },
        {
          "line": 715,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"io_cache_share\", (\"the last running thread leaves, wake all\"))",
          "old_line_content": "  }",
          "new_line_content": "    DBUG_PRINT(\"io_cache_share\", (\"the last running thread leaves, wake all\"));",
          "content_same": false
        },
        {
          "line": 716,
          "old_api": null,
          "new_api": "pthread_cond_signal",
          "old_text": null,
          "new_text": "pthread_cond_signal(&cshare->cond_writer)",
          "old_line_content": "",
          "new_line_content": "    pthread_cond_signal(&cshare->cond_writer);",
          "content_same": false
        },
        {
          "line": 1739,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(0)",
          "old_line_content": "\t  UNLOCK_APPEND_BUFFER;",
          "new_line_content": "\tif (my_seek(info->file,pos_in_file,MY_SEEK_SET,MYF(0)) ==",
          "content_same": false
        },
        {
          "line": 1231,
          "old_api": null,
          "new_api": "unlock_append_buffer",
          "old_text": null,
          "new_text": "unlock_append_buffer(info)",
          "old_line_content": "  info->pos_in_file=pos_in_file;",
          "new_line_content": "  unlock_append_buffer(info);",
          "content_same": false
        },
        {
          "line": 720,
          "old_api": null,
          "new_api": "pthread_mutex_unlock",
          "old_text": null,
          "new_text": "pthread_mutex_unlock(&cshare->mutex)",
          "old_line_content": "  {",
          "new_line_content": "  pthread_mutex_unlock(&cshare->mutex);",
          "content_same": false
        },
        {
          "line": 1743,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN((info->error= -1))",
          "old_line_content": "\t  info->seek_not_done=0;",
          "new_line_content": "\t  DBUG_RETURN((info->error= -1));",
          "content_same": false
        },
        {
          "line": 1235,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(Buffer,info->buffer,(size_t) Count)",
          "old_line_content": "read_append_buffer:",
          "new_line_content": "  memcpy(Buffer,info->buffer,(size_t) Count);",
          "content_same": false
        },
        {
          "line": 725,
          "old_api": null,
          "new_api": "pthread_cond_destroy (&cshare->cond_writer)",
          "old_text": null,
          "new_text": "pthread_cond_destroy (&cshare->cond_writer)",
          "old_line_content": "  }",
          "new_line_content": "    pthread_cond_destroy (&cshare->cond_writer);",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": null,
          "new_api": "pthread_cond_destroy (&cshare->cond)",
          "old_text": null,
          "new_text": "pthread_cond_destroy (&cshare->cond)",
          "old_line_content": "",
          "new_line_content": "    pthread_cond_destroy (&cshare->cond);",
          "content_same": false
        },
        {
          "line": 727,
          "old_api": null,
          "new_api": "pthread_mutex_destroy",
          "old_text": null,
          "new_text": "pthread_mutex_destroy(&cshare->mutex)",
          "old_line_content": "  DBUG_VOID_RETURN;",
          "new_line_content": "    pthread_mutex_destroy(&cshare->mutex);",
          "content_same": false
        },
        {
          "line": 1753,
          "old_api": null,
          "new_api": "my_write",
          "old_text": null,
          "new_text": "my_write(info->file,info->write_buffer,length,\n\t\t   info->myflags | MY_NABP)",
          "old_line_content": "      else",
          "new_line_content": "      if (my_write(info->file,info->write_buffer,length,",
          "content_same": false
        },
        {
          "line": 1247,
          "old_api": null,
          "new_api": "uint) (info->write_pos - info->append_read_pos)",
          "old_text": null,
          "new_text": "uint) (info->write_pos - info->append_read_pos)",
          "old_line_content": "",
          "new_line_content": "    uint len_in_buff = (uint) (info->write_pos - info->append_read_pos);",
          "content_same": false
        },
        {
          "line": 1760,
          "old_api": null,
          "new_api": "set_if_bigger",
          "old_text": null,
          "new_text": "set_if_bigger(info->end_of_file,(pos_in_file+length))",
          "old_line_content": "      {",
          "new_line_content": "        set_if_bigger(info->end_of_file,(pos_in_file+length));",
          "content_same": false
        },
        {
          "line": 1251,
          "old_api": null,
          "new_api": "DBUG_ASSERT",
          "old_text": null,
          "new_text": "DBUG_ASSERT(info->append_read_pos <= info->write_pos)",
          "old_line_content": "    */",
          "new_line_content": "    DBUG_ASSERT(info->append_read_pos <= info->write_pos);",
          "content_same": false
        },
        {
          "line": 1765,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(0)",
          "old_line_content": "      info->append_read_pos=info->write_pos=info->write_buffer;",
          "new_line_content": "\tDBUG_ASSERT(info->end_of_file == my_tell(info->file,MYF(0)));",
          "content_same": false
        },
        {
          "line": 1255,
          "old_api": null,
          "new_api": "DBUG_ASSERT",
          "old_text": null,
          "new_text": "DBUG_ASSERT(pos_in_file == info->end_of_file)",
          "old_line_content": "    info->append_read_pos += copy_len;",
          "new_line_content": "    DBUG_ASSERT(pos_in_file == info->end_of_file);",
          "content_same": false
        },
        {
          "line": 1256,
          "old_api": null,
          "new_api": "min",
          "old_text": null,
          "new_text": "min(Count, len_in_buff)",
          "old_line_content": "    Count -= copy_len;",
          "new_line_content": "    copy_len=min(Count, len_in_buff);",
          "content_same": false
        },
        {
          "line": 1257,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(Buffer, info->append_read_pos, copy_len)",
          "old_line_content": "    if (Count)",
          "new_line_content": "    memcpy(Buffer, info->append_read_pos, copy_len);",
          "content_same": false
        },
        {
          "line": 1771,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(info->error)",
          "old_line_content": "#ifdef HAVE_AIOWAIT",
          "new_line_content": "      DBUG_RETURN(info->error);",
          "content_same": false
        },
        {
          "line": 240,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF((cache_myflags & ~ (MY_WME | MY_WAIT_IF_FULL)) |\n                (cachesize == min_cache ? MY_WME : 0))",
          "old_line_content": "      {",
          "new_line_content": "      myf flag = MYF((cache_myflags & ~ (MY_WME | MY_WAIT_IF_FULL)) |",
          "content_same": false
        },
        {
          "line": 1264,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(info->buffer, info->append_read_pos,\n\t   (size_t) (transfer_len=len_in_buff - copy_len))",
          "old_line_content": "    info->read_end= info->buffer+transfer_len;",
          "new_line_content": "    memcpy(info->buffer, info->append_read_pos,",
          "content_same": false
        },
        {
          "line": 242,
          "old_api": null,
          "new_api": "my_malloc",
          "old_text": null,
          "new_text": "my_malloc(buffer_block, flag)",
          "old_line_content": "\tif (type == SEQ_READ_APPEND)",
          "new_line_content": "      if ((info->buffer= (byte*) my_malloc(buffer_block, flag)) != 0)",
          "content_same": false
        },
        {
          "line": 1777,
          "old_api": null,
          "new_api": "my_aiowait",
          "old_text": null,
          "new_text": "my_aiowait(&info->aio_result)",
          "old_line_content": "#endif",
          "new_line_content": "    my_aiowait(&info->aio_result);\t\t/* Wait for outstanding req */",
          "content_same": false
        },
        {
          "line": 1782,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(0)",
          "old_line_content": "/*",
          "new_line_content": "  DBUG_RETURN(0);",
          "content_same": false
        },
        {
          "line": 1272,
          "old_api": null,
          "new_api": "unlock_append_buffer",
          "old_text": null,
          "new_text": "unlock_append_buffer(info)",
          "old_line_content": "",
          "new_line_content": "  unlock_append_buffer(info);",
          "content_same": false
        },
        {
          "line": 251,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(2)",
          "old_line_content": "    }",
          "new_line_content": "\tDBUG_RETURN(2);\t\t\t\t/* Can't alloc cache */",
          "content_same": false
        },
        {
          "line": 253,
          "old_api": null,
          "new_api": "uint) ((ulong) cachesize*3/4 & (ulong)~(min_cache-1))",
          "old_text": null,
          "new_text": "uint) ((ulong) cachesize*3/4 & (ulong)~(min_cache-1))",
          "old_line_content": "",
          "new_line_content": "      cachesize= (uint) ((ulong) cachesize*3/4 & (ulong)~(min_cache-1));",
          "content_same": false
        },
        {
          "line": 768,
          "old_api": null,
          "new_api": "pthread_mutex_lock",
          "old_text": null,
          "new_text": "pthread_mutex_lock(&cshare->mutex)",
          "old_line_content": "                                (cache == cshare->source_cache) ?",
          "new_line_content": "  pthread_mutex_lock(&cshare->mutex);",
          "content_same": false
        },
        {
          "line": 257,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"info\",(\"init_io_cache: cachesize = %u\",cachesize))",
          "old_line_content": "  info->request_pos= info->read_pos= info->write_pos = info->buffer;",
          "new_line_content": "  DBUG_PRINT(\"info\",(\"init_io_cache: cachesize = %u\",cachesize));",
          "content_same": false
        },
        {
          "line": 770,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"io_cache_share\", (\"%s: 0x%lx  pos: %lu  running: %u\",\n                                (cache == cshare->source_cache) ?\n                                \"writer\" : \"reader\", (long) cache, (ulong) pos,\n                                cshare->running_threads))",
          "old_line_content": "                                cshare->running_threads));",
          "new_line_content": "  DBUG_PRINT(\"io_cache_share\", (\"%s: 0x%lx  pos: %lu  running: %u\",",
          "content_same": false
        },
        {
          "line": 266,
          "old_api": null,
          "new_api": "pthread_mutex_init",
          "old_text": null,
          "new_text": "pthread_mutex_init(&info->append_buffer_lock,MY_MUTEX_INIT_FAST)",
          "old_line_content": "#if defined(SAFE_MUTEX) && defined(THREAD)",
          "new_line_content": "    pthread_mutex_init(&info->append_buffer_lock,MY_MUTEX_INIT_FAST);",
          "content_same": false
        },
        {
          "line": 1294,
          "old_api": null,
          "new_api": "register",
          "old_text": null,
          "new_text": "register",
          "old_line_content": "  my_off_t max_length;",
          "new_line_content": "int _my_b_async_read(register IO_CACHE *info, byte *Buffer, uint Count)",
          "content_same": false
        },
        {
          "line": 1806,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"end_io_cache\")",
          "old_line_content": "#ifdef THREAD",
          "new_line_content": "  DBUG_ENTER(\"end_io_cache\");",
          "content_same": false
        },
        {
          "line": 1807,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"enter\",(\"cache: 0x%lx\", (ulong) info))",
          "old_line_content": "  /*",
          "new_line_content": "  DBUG_PRINT(\"enter\",(\"cache: 0x%lx\", (ulong) info));",
          "content_same": false
        },
        {
          "line": 273,
          "old_api": null,
          "new_api": "bzero",
          "old_text": null,
          "new_text": "bzero((char*) &info->append_buffer_lock, sizeof(info))",
          "old_line_content": "",
          "new_line_content": "    bzero((char*) &info->append_buffer_lock, sizeof(info));",
          "content_same": false
        },
        {
          "line": 785,
          "old_api": null,
          "new_api": "pthread_cond_wait",
          "old_text": null,
          "new_text": "pthread_cond_wait(&cshare->cond_writer, &cshare->mutex)",
          "old_line_content": "",
          "new_line_content": "        pthread_cond_wait(&cshare->cond_writer, &cshare->mutex);",
          "content_same": false
        },
        {
          "line": 1301,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(Buffer,info->read_pos,\n\t (size_t) (left_length=(uint) (info->read_end-info->read_pos)))",
          "old_line_content": "  org_Count=Count;",
          "new_line_content": "  memcpy(Buffer,info->read_pos,",
          "content_same": false
        },
        {
          "line": 790,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(1)",
          "old_line_content": "    /* The last thread wakes the writer. */",
          "new_line_content": "      DBUG_RETURN(1);",
          "content_same": false
        },
        {
          "line": 1302,
          "old_api": null,
          "new_api": "uint) (info->read_end-info->read_pos)",
          "old_text": null,
          "new_text": "uint) (info->read_end-info->read_pos)",
          "old_line_content": "  Count-=left_length;",
          "new_line_content": "\t (size_t) (left_length=(uint) (info->read_end-info->read_pos)));",
          "content_same": false
        },
        {
          "line": 1814,
          "old_api": null,
          "new_api": "DBUG_ASSERT",
          "old_text": null,
          "new_text": "DBUG_ASSERT(!info->share || !info->share->total_threads)",
          "old_line_content": "  if ((pre_close=info->pre_close))",
          "new_line_content": "  DBUG_ASSERT(!info->share || !info->share->total_threads);",
          "content_same": false
        },
        {
          "line": 1819,
          "old_api": null,
          "new_api": "*pre_close)(info)",
          "old_text": null,
          "new_text": "*pre_close)(info)",
          "old_line_content": "  if (info->alloced_buffer)",
          "new_line_content": "    (*pre_close)(info);",
          "content_same": false
        },
        {
          "line": 796,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"io_cache_share\", (\"waking writer\"))",
          "old_line_content": "",
          "new_line_content": "      DBUG_PRINT(\"io_cache_share\", (\"waking writer\"));",
          "content_same": false
        },
        {
          "line": 797,
          "old_api": null,
          "new_api": "pthread_cond_signal",
          "old_text": null,
          "new_text": "pthread_cond_signal(&cshare->cond_writer)",
          "old_line_content": "    /*",
          "new_line_content": "      pthread_cond_signal(&cshare->cond_writer);",
          "content_same": false
        },
        {
          "line": 1310,
          "old_api": null,
          "new_api": "my_aiowait",
          "old_text": null,
          "new_text": "my_aiowait(&info->aio_result)",
          "old_line_content": "      if (info->myflags & MY_WME)",
          "new_line_content": "    my_aiowait(&info->aio_result);\t\t/* Wait for outstanding req */",
          "content_same": false
        },
        {
          "line": 287,
          "old_api": null,
          "new_api": "init_functions",
          "old_text": null,
          "new_text": "init_functions(info)",
          "old_line_content": "  {",
          "new_line_content": "  init_functions(info);",
          "content_same": false
        },
        {
          "line": 1314,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(ME_BELL+ME_WAITTANG)",
          "old_line_content": "      my_errno=info->aio_result.result.aio_errno;",
          "new_line_content": "\tmy_error(EE_READ, MYF(ME_BELL+ME_WAITTANG),",
          "content_same": false
        },
        {
          "line": 291,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"info\",(\"Using async io\"))",
          "old_line_content": "  }",
          "new_line_content": "    DBUG_PRINT(\"info\",(\"Using async io\"));",
          "content_same": false
        },
        {
          "line": 1315,
          "old_api": null,
          "new_api": "my_filename",
          "old_text": null,
          "new_text": "my_filename(info->file)",
          "old_line_content": "      info->error= -1;",
          "new_line_content": "\t\t my_filename(info->file),",
          "content_same": false
        },
        {
          "line": 1826,
          "old_api": null,
          "new_api": "my_b_flush_io_cache",
          "old_text": null,
          "new_text": "my_b_flush_io_cache(info,1)",
          "old_line_content": "  }",
          "new_line_content": "      error= my_b_flush_io_cache(info,1);",
          "content_same": false
        },
        {
          "line": 1827,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(MY_WME)",
          "old_line_content": "  if (info->type == SEQ_READ_APPEND)",
          "new_line_content": "    my_free((gptr) info->buffer,MYF(MY_WME));",
          "content_same": false
        },
        {
          "line": 808,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"io_cache_share\", (\"reader waits in lock\"))",
          "old_line_content": "",
          "new_line_content": "      DBUG_PRINT(\"io_cache_share\", (\"reader waits in lock\"));",
          "content_same": false
        },
        {
          "line": 297,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(0)",
          "old_line_content": "\t/* Wait until current request is ready */",
          "new_line_content": "  DBUG_RETURN(0);",
          "content_same": false
        },
        {
          "line": 809,
          "old_api": null,
          "new_api": "pthread_cond_wait",
          "old_text": null,
          "new_text": "pthread_cond_wait(&cshare->cond, &cshare->mutex)",
          "old_line_content": "    /*",
          "new_line_content": "      pthread_cond_wait(&cshare->cond, &cshare->mutex);",
          "content_same": false
        },
        {
          "line": 1838,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(error)",
          "old_line_content": "",
          "new_line_content": "  DBUG_RETURN(error);",
          "content_same": false
        },
        {
          "line": 1329,
          "old_api": null,
          "new_api": "uint) (info->read_end - info->request_pos)",
          "old_text": null,
          "new_text": "uint) (info->read_end - info->request_pos)",
          "old_line_content": "      info->request_pos=info->buffer;",
          "new_line_content": "    info->pos_in_file+=(uint) (info->read_end - info->request_pos);",
          "content_same": false
        },
        {
          "line": 310,
          "old_api": null,
          "new_api": "aiowait",
          "old_text": null,
          "new_text": "aiowait((struct timeval *) 0)",
          "old_line_content": "\t  continue;",
          "new_line_content": "      if ((int) (tmp=aiowait((struct timeval *) 0)) == -1)",
          "content_same": false
        },
        {
          "line": 822,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"io_cache_share\", (\"reader found writer removed. EOF\"))",
          "old_line_content": "    }",
          "new_line_content": "      DBUG_PRINT(\"io_cache_share\", (\"reader found writer removed. EOF\"));",
          "content_same": false
        },
        {
          "line": 314,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"error\",(\"No aio request, error: %d\",errno))",
          "old_line_content": "      }",
          "new_line_content": "\tDBUG_PRINT(\"error\",(\"No aio request, error: %d\",errno));",
          "content_same": false
        },
        {
          "line": 1855,
          "old_api": null,
          "new_api": "vfprintf",
          "old_text": null,
          "new_text": "vfprintf(stderr, fmt,va_args)",
          "old_line_content": "}",
          "new_line_content": "  vfprintf(stderr, fmt,va_args);",
          "content_same": false
        },
        {
          "line": 1856,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\", errno=%d\\n\", errno)",
          "old_line_content": "",
          "new_line_content": "  fprintf(stderr,\", errno=%d\\n\", errno);",
          "content_same": false
        },
        {
          "line": 1857,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "int open_file(const char* fname, IO_CACHE* info, int cache_size)",
          "new_line_content": "  exit(1);",
          "content_same": false
        },
        {
          "line": 835,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"io_cache_share\", (\"last thread joined, going to read\"))",
          "old_line_content": "    }",
          "new_line_content": "      DBUG_PRINT(\"io_cache_share\", (\"last thread joined, going to read\"));",
          "content_same": false
        },
        {
          "line": 837,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(1)",
          "old_line_content": "    /*",
          "new_line_content": "      DBUG_RETURN(1);",
          "content_same": false
        },
        {
          "line": 1864,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"Could not open %s\", fname)",
          "old_line_content": "  return fd;",
          "new_line_content": "    die(\"Could not open %s\", fname);",
          "content_same": false
        },
        {
          "line": 1865,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(MY_WME)",
          "old_line_content": "}",
          "new_line_content": "  if (init_io_cache(info, fd, cache_size, SEQ_READ_APPEND, 0,0,MYF(MY_WME)))",
          "content_same": false
        },
        {
          "line": 1866,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"failed in init_io_cache()\")",
          "old_line_content": "",
          "new_line_content": "    die(\"failed in init_io_cache()\");",
          "content_same": false
        },
        {
          "line": 1872,
          "old_api": null,
          "new_api": "end_io_cache",
          "old_text": null,
          "new_text": "end_io_cache(info)",
          "old_line_content": "",
          "new_line_content": "  end_io_cache(info);",
          "content_same": false
        },
        {
          "line": 1873,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(MY_WME)",
          "old_line_content": "int main(int argc, char** argv)",
          "new_line_content": "  my_close(info->file, MYF(MY_WME));",
          "content_same": false
        },
        {
          "line": 850,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"io_cache_share\", (\"reader waits in lock\"))",
          "old_line_content": "",
          "new_line_content": "      DBUG_PRINT(\"io_cache_share\", (\"reader waits in lock\"));",
          "content_same": false
        },
        {
          "line": 851,
          "old_api": null,
          "new_api": "pthread_cond_wait",
          "old_text": null,
          "new_text": "pthread_cond_wait(&cshare->cond, &cshare->mutex)",
          "old_line_content": "    /* If the block is not yet read, continue with a locked cache and read. */",
          "new_line_content": "      pthread_cond_wait(&cshare->cond, &cshare->mutex);",
          "content_same": false
        },
        {
          "line": 1364,
          "old_api": null,
          "new_api": "min",
          "old_text": null,
          "new_text": "min(Count,read_length)",
          "old_line_content": "    Count-=length;",
          "new_line_content": "    length=min(Count,read_length);",
          "content_same": false
        },
        {
          "line": 341,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"enter\",(\"cache: 0x%lx type: %d  seek_offset: %lu  clear_cache: %d\",\n\t\t      (ulong) info, type, (ulong) seek_offset,\n\t\t      (int) clear_cache))",
          "old_line_content": "",
          "new_line_content": "  DBUG_PRINT(\"enter\",(\"cache: 0x%lx type: %d  seek_offset: %lu  clear_cache: %d\",",
          "content_same": false
        },
        {
          "line": 1365,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(Buffer,info->read_pos,(size_t) length)",
          "old_line_content": "    left_length+=length;",
          "new_line_content": "    memcpy(Buffer,info->read_pos,(size_t) length);",
          "content_same": false
        },
        {
          "line": 857,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"io_cache_share\", (\"reader awoke, going to read\"))",
          "old_line_content": "    }",
          "new_line_content": "      DBUG_PRINT(\"io_cache_share\", (\"reader awoke, going to read\"));",
          "content_same": false
        },
        {
          "line": 346,
          "old_api": null,
          "new_api": "DBUG_ASSERT",
          "old_text": null,
          "new_text": "DBUG_ASSERT(type != READ_NET && info->type != READ_NET &&\n\t      type != WRITE_NET && info->type != WRITE_NET &&\n\t      type != SEQ_READ_APPEND && info->type != SEQ_READ_APPEND)",
          "old_line_content": "",
          "new_line_content": "  DBUG_ASSERT(type != READ_NET && info->type != READ_NET &&",
          "content_same": false
        },
        {
          "line": 859,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(1)",
          "old_line_content": "    /* Another thread did read the block already. */",
          "new_line_content": "      DBUG_RETURN(1);",
          "content_same": false
        },
        {
          "line": 1373,
          "old_api": null,
          "new_api": "uint)\n\t\t      (info->read_end - info->request_pos)",
          "old_text": null,
          "new_text": "uint)\n\t\t      (info->read_end - info->request_pos)",
          "old_line_content": "\t/* If reading large blocks, or first read or read with skip */",
          "new_line_content": "    next_pos_in_file=(info->pos_in_file+ (uint)",
          "content_same": false
        },
        {
          "line": 864,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"io_cache_share\", (\"reader awoke, going to process %u bytes\",\n                                cshare->read_end ? (uint)\n                                (cshare->read_end - cshare->buffer) : 0))",
          "old_line_content": "",
          "new_line_content": "  DBUG_PRINT(\"io_cache_share\", (\"reader awoke, going to process %u bytes\",",
          "content_same": false
        },
        {
          "line": 353,
          "old_api": null,
          "new_api": "my_b_tell",
          "old_text": null,
          "new_text": "my_b_tell(info)",
          "old_line_content": "    byte *pos;",
          "new_line_content": "      seek_offset <= my_b_tell(info))",
          "content_same": false
        },
        {
          "line": 865,
          "old_api": null,
          "new_api": "uint)\n                                (cshare->read_end - cshare->buffer)",
          "old_text": null,
          "new_text": "uint)\n                                (cshare->read_end - cshare->buffer)",
          "old_line_content": "  /*",
          "new_line_content": "                                cshare->read_end ? (uint)",
          "content_same": false
        },
        {
          "line": 1889,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(MY_WME)",
          "old_line_content": "  for (p = block,i=0; p < block_end;i++)",
          "new_line_content": "  if (!(block=(char*)my_malloc(max_block,MYF(MY_WME))))",
          "content_same": false
        },
        {
          "line": 1890,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"Not enough memory to allocate test block\")",
          "old_line_content": "  {",
          "new_line_content": "    die(\"Not enough memory to allocate test block\");",
          "content_same": false
        },
        {
          "line": 360,
          "old_api": null,
          "new_api": "my_b_tell",
          "old_text": null,
          "new_text": "my_b_tell(info)",
          "old_line_content": "        file handle.",
          "new_line_content": "      info->end_of_file=my_b_tell(info);",
          "content_same": false
        },
        {
          "line": 872,
          "old_api": null,
          "new_api": "pthread_mutex_unlock",
          "old_text": null,
          "new_text": "pthread_mutex_unlock(&cshare->mutex)",
          "old_line_content": "",
          "new_line_content": "  pthread_mutex_unlock(&cshare->mutex);",
          "content_same": false
        },
        {
          "line": 873,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(0)",
          "old_line_content": "",
          "new_line_content": "  DBUG_RETURN(0);",
          "content_same": false
        },
        {
          "line": 1385,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(0)",
          "old_line_content": "      info->error= -1;",
          "new_line_content": "    if (my_seek(info->file,next_pos_in_file,MY_SEEK_SET,MYF(0))",
          "content_same": false
        },
        {
          "line": 1897,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(MY_WME)",
          "old_line_content": "    }",
          "new_line_content": "      my_delete(fname,MYF(MY_WME)))",
          "content_same": false
        },
        {
          "line": 1899,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"Delete of %s failed, aborting\", fname)",
          "old_line_content": "  for (i = 0; i < num_loops; i++)",
          "new_line_content": "      die(\"Delete of %s failed, aborting\", fname);",
          "content_same": false
        },
        {
          "line": 1901,
          "old_api": null,
          "new_api": "open_file",
          "old_text": null,
          "new_text": "open_file(fname,&sra_cache, cache_size)",
          "old_line_content": "    char buf[4];",
          "new_line_content": "  open_file(fname,&sra_cache, cache_size);",
          "content_same": false
        },
        {
          "line": 1907,
          "old_api": null,
          "new_api": "my_b_append",
          "old_text": null,
          "new_text": "my_b_append(&sra_cache,buf,4)",
          "old_line_content": "    total_bytes += 4+block_size;",
          "new_line_content": "    if (my_b_append(&sra_cache,buf,4) ||",
          "content_same": false
        },
        {
          "line": 1908,
          "old_api": null,
          "new_api": "my_b_append",
          "old_text": null,
          "new_text": "my_b_append(&sra_cache, block, block_size)",
          "old_line_content": "  }",
          "new_line_content": "\tmy_b_append(&sra_cache, block, block_size))",
          "content_same": false
        },
        {
          "line": 1398,
          "old_api": null,
          "new_api": "min",
          "old_text": null,
          "new_text": "min(Count,read_length)",
          "old_line_content": "      info->read_end=info->request_pos+read_length;",
          "new_line_content": "      use_length=min(Count,read_length);",
          "content_same": false
        },
        {
          "line": 1399,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(Buffer,info->request_pos,(size_t) use_length)",
          "old_line_content": "      info->pos_in_file=next_pos_in_file;\t/* Start of block in cache */",
          "new_line_content": "      memcpy(Buffer,info->request_pos,(size_t) use_length);",
          "content_same": false
        },
        {
          "line": 1913,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(MY_WME)",
          "old_line_content": " wonder how that happened\");",
          "new_line_content": "  my_free(block,MYF(MY_WME));",
          "content_same": false
        },
        {
          "line": 382,
          "old_api": null,
          "new_api": "my_aiowait",
          "old_text": null,
          "new_text": "my_aiowait(&info->aio_result)",
          "old_line_content": "  else",
          "new_line_content": "    my_aiowait(&info->aio_result);\t\t/* Wait for outstanding req */",
          "content_same": false
        },
        {
          "line": 1918,
          "old_api": null,
          "new_api": "llstr",
          "old_text": null,
          "new_text": "llstr(status.st_size,llstr_buf)",
          "old_line_content": "  /* check correctness of tests */",
          "new_line_content": "\t llstr(status.st_size,llstr_buf),",
          "content_same": false
        },
        {
          "line": 1408,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(ME_BELL+ME_WAITTANG)",
          "old_line_content": "\treturn 1;",
          "new_line_content": "\t  my_error(EE_EOFERR, MYF(ME_BELL+ME_WAITTANG),",
          "content_same": false
        },
        {
          "line": 1409,
          "old_api": null,
          "new_api": "my_filename",
          "old_text": null,
          "new_text": "my_filename(info->file)",
          "old_line_content": "      }",
          "new_line_content": "\t\t   my_filename(info->file),my_errno);",
          "content_same": false
        },
        {
          "line": 1920,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(MY_WME)",
          "old_line_content": "  {",
          "new_line_content": "  my_delete(fname, MYF(MY_WME));",
          "content_same": false
        },
        {
          "line": 1924,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\"Not the same number of bytes acutally  in file as bytes \\\nsupposedly written\\n\")",
          "old_line_content": "  }",
          "new_line_content": "    fprintf(stderr,\"Not the same number of bytes acutally  in file as bytes \\",
          "content_same": false
        },
        {
          "line": 1416,
          "old_api": null,
          "new_api": "my_read",
          "old_text": null,
          "new_text": "my_read(info->file,Buffer,(uint) Count,info->myflags)",
          "old_line_content": "\tinfo->error= read_length == (uint)  -1 ? -1 : read_length+left_length;",
          "new_line_content": "      if ((read_length=my_read(info->file,Buffer,(uint) Count,info->myflags))",
          "content_same": false
        },
        {
          "line": 1928,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(error)",
          "old_line_content": "#endif",
          "new_line_content": "  exit(error);",
          "content_same": false
        },
        {
          "line": 394,
          "old_api": null,
          "new_api": "my_b_flush_io_cache",
          "old_text": null,
          "new_text": "my_b_flush_io_cache(info,1)",
          "old_line_content": "    /* Better to do always do a seek */",
          "new_line_content": "    if (!clear_cache && my_b_flush_io_cache(info,1))",
          "content_same": false
        },
        {
          "line": 395,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(1)",
          "old_line_content": "    info->seek_not_done=1;",
          "new_line_content": "      DBUG_RETURN(1);",
          "content_same": false
        },
        {
          "line": 907,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"unlock_io_cache\")",
          "old_line_content": "                                \"writer\" : \"reader\",",
          "new_line_content": "  DBUG_ENTER(\"unlock_io_cache\");",
          "content_same": false
        },
        {
          "line": 908,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"io_cache_share\", (\"%s: 0x%lx  pos: %lu  running: %u\",\n                                (cache == cshare->source_cache) ?\n                                \"writer\" : \"reader\",\n                                (long) cache, (ulong) cshare->pos_in_file,\n                                cshare->total_threads))",
          "old_line_content": "                                (long) cache, (ulong) cshare->pos_in_file,",
          "new_line_content": "  DBUG_PRINT(\"io_cache_share\", (\"%s: 0x%lx  pos: %lu  running: %u\",",
          "content_same": false
        },
        {
          "line": 915,
          "old_api": null,
          "new_api": "pthread_cond_broadcast",
          "old_text": null,
          "new_text": "pthread_cond_broadcast(&cshare->cond)",
          "old_line_content": "}",
          "new_line_content": "  pthread_cond_broadcast(&cshare->cond);",
          "content_same": false
        },
        {
          "line": 916,
          "old_api": null,
          "new_api": "pthread_mutex_unlock",
          "old_text": null,
          "new_text": "pthread_mutex_unlock(&cshare->mutex)",
          "old_line_content": "",
          "new_line_content": "  pthread_mutex_unlock(&cshare->mutex);",
          "content_same": false
        },
        {
          "line": 413,
          "old_api": null,
          "new_api": "init_functions",
          "old_text": null,
          "new_text": "init_functions(info)",
          "old_line_content": "  if (use_async_io && ! my_disable_async_io &&",
          "new_line_content": "  init_functions(info);",
          "content_same": false
        },
        {
          "line": 1441,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"aioread\",(\"filepos: %ld  length: %ld\",\n\t\t\t  (ulong) next_pos_in_file,(ulong) max_length))",
          "old_line_content": "\t\t(my_off_t) next_pos_in_file,MY_SEEK_SET,",
          "new_line_content": "    DBUG_PRINT(\"aioread\",(\"filepos: %ld  length: %ld\",",
          "content_same": false
        },
        {
          "line": 418,
          "old_api": null,
          "new_api": "ulong) (info->end_of_file - seek_offset)",
          "old_text": null,
          "new_text": "ulong) (info->end_of_file - seek_offset)",
          "old_line_content": "    info->read_function=_my_b_async_read;",
          "new_line_content": "       (ulong) (info->end_of_file - seek_offset)))",
          "content_same": false
        },
        {
          "line": 1443,
          "old_api": null,
          "new_api": "aioread",
          "old_text": null,
          "new_text": "aioread(info->file,read_buffer,(int) max_length,\n\t\t(my_off_t) next_pos_in_file,MY_SEEK_SET,\n\t\t&info->aio_result.result)",
          "old_line_content": "    {\t\t\t\t\t\t/* Skip async io */",
          "new_line_content": "    if (aioread(info->file,read_buffer,(int) max_length,",
          "content_same": false
        },
        {
          "line": 1448,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"error\",(\"got error: %d, aio_result: %d from aioread, async skipped\",\n\t\t\t  errno, info->aio_result.result.aio_errno))",
          "old_line_content": "      {",
          "new_line_content": "      DBUG_PRINT(\"error\",(\"got error: %d, aio_result: %d from aioread, async skipped\",",
          "content_same": false
        },
        {
          "line": 425,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(0)",
          "old_line_content": "",
          "new_line_content": "  DBUG_RETURN(0);",
          "content_same": false
        },
        {
          "line": 1452,
          "old_api": null,
          "new_api": "bmove",
          "old_text": null,
          "new_text": "bmove(info->buffer,info->request_pos,\n\t      (uint) (info->read_end - info->read_pos))",
          "old_line_content": "\tinfo->read_pos-=info->read_length;",
          "new_line_content": "\tbmove(info->buffer,info->request_pos,",
          "content_same": false
        },
        {
          "line": 1453,
          "old_api": null,
          "new_api": "uint) (info->read_end - info->read_pos)",
          "old_text": null,
          "new_text": "uint) (info->read_end - info->read_pos)",
          "old_line_content": "\tinfo->read_end-=info->read_length;",
          "new_line_content": "\t      (uint) (info->read_end - info->read_pos));",
          "content_same": false
        },
        {
          "line": 958,
          "old_api": null,
          "new_api": "register",
          "old_text": null,
          "new_text": "register",
          "old_line_content": "  uint length, diff_length, left_length;",
          "new_line_content": "int _my_b_read_r(register IO_CACHE *cache, byte *Buffer, uint Count)",
          "content_same": false
        },
        {
          "line": 963,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"_my_b_read_r\")",
          "old_line_content": "  {",
          "new_line_content": "  DBUG_ENTER(\"_my_b_read_r\");",
          "content_same": false
        },
        {
          "line": 1476,
          "old_api": null,
          "new_api": "*pre_read)(info)",
          "old_text": null,
          "new_text": "*pre_read)(info)",
          "old_line_content": "  if ((post_read = info->post_read))",
          "new_line_content": "    (*pre_read)(info);",
          "content_same": false
        },
        {
          "line": 967,
          "old_api": null,
          "new_api": "DBUG_ASSERT",
          "old_text": null,
          "new_text": "DBUG_ASSERT(Count >= left_length)",
          "old_line_content": "    Count-= left_length;",
          "new_line_content": "    DBUG_ASSERT(Count >= left_length);\t/* User is not using my_b_read() */",
          "content_same": false
        },
        {
          "line": 968,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(Buffer, cache->read_pos, (size_t) (left_length))",
          "old_line_content": "  }",
          "new_line_content": "    memcpy(Buffer, cache->read_pos, (size_t) (left_length));",
          "content_same": false
        },
        {
          "line": 1480,
          "old_api": null,
          "new_api": "*post_read)(info)",
          "old_text": null,
          "new_text": "*post_read)(info)",
          "old_line_content": "",
          "new_line_content": "    (*post_read)(info);",
          "content_same": false
        },
        {
          "line": 458,
          "old_api": null,
          "new_api": "register",
          "old_text": null,
          "new_text": "register",
          "old_line_content": "  my_off_t max_length, pos_in_file;",
          "new_line_content": "int _my_b_read(register IO_CACHE *info, byte *Buffer, uint Count)",
          "content_same": false
        },
        {
          "line": 462,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"_my_b_read\")",
          "old_line_content": "  {",
          "new_line_content": "  DBUG_ENTER(\"_my_b_read\");",
          "content_same": false
        },
        {
          "line": 466,
          "old_api": null,
          "new_api": "DBUG_ASSERT",
          "old_text": null,
          "new_text": "DBUG_ASSERT(Count >= left_length)",
          "old_line_content": "    Count-=left_length;",
          "new_line_content": "    DBUG_ASSERT(Count >= left_length);\t/* User is not using my_b_read() */",
          "content_same": false
        },
        {
          "line": 467,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(Buffer,info->read_pos, (size_t) (left_length))",
          "old_line_content": "  }",
          "new_line_content": "    memcpy(Buffer,info->read_pos, (size_t) (left_length));",
          "content_same": false
        },
        {
          "line": 980,
          "old_api": null,
          "new_api": "IO_ROUND_DN",
          "old_text": null,
          "new_text": "IO_ROUND_DN(cache->read_length - length)",
          "old_line_content": "\t(length > (cache->end_of_file - pos_in_file)))",
          "new_line_content": "             length + IO_ROUND_DN(cache->read_length - length) :",
          "content_same": false
        },
        {
          "line": 1494,
          "old_api": null,
          "new_api": "register",
          "old_text": null,
          "new_text": "register",
          "old_line_content": "",
          "new_line_content": "int _my_b_write(register IO_CACHE *info, const byte *Buffer, uint Count)",
          "content_same": false
        },
        {
          "line": 984,
          "old_api": null,
          "new_api": "uint) (cache->end_of_file - pos_in_file)",
          "old_text": null,
          "new_text": "uint) (cache->end_of_file - pos_in_file)",
          "old_line_content": "      cache->error= (int) left_length;",
          "new_line_content": "      length= (uint) (cache->end_of_file - pos_in_file);",
          "content_same": false
        },
        {
          "line": 473,
          "old_api": null,
          "new_api": "uint) (info->read_end - info->buffer)",
          "old_text": null,
          "new_text": "uint) (info->read_end - info->buffer)",
          "old_line_content": "    Whenever a function which operates on IO_CACHE flushes/writes",
          "new_line_content": "  pos_in_file=info->pos_in_file+(uint) (info->read_end - info->buffer);",
          "content_same": false
        },
        {
          "line": 988,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(1)",
          "old_line_content": "    {",
          "new_line_content": "      DBUG_RETURN(1);",
          "content_same": false
        },
        {
          "line": 1504,
          "old_api": null,
          "new_api": "uint) (info->write_end - info->write_pos)",
          "old_text": null,
          "new_text": "uint) (info->write_end - info->write_pos)",
          "old_line_content": "  Count-=rest_length;",
          "new_line_content": "  rest_length=(uint) (info->write_end - info->write_pos);",
          "content_same": false
        },
        {
          "line": 993,
          "old_api": null,
          "new_api": "DBUG_ASSERT",
          "old_text": null,
          "new_text": "DBUG_ASSERT(!cshare->source_cache)",
          "old_line_content": "        lock. Simulate EOF in this case. It can be distinguished by",
          "new_line_content": "      DBUG_ASSERT(!cshare->source_cache);",
          "content_same": false
        },
        {
          "line": 1505,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(info->write_pos,Buffer,(size_t) rest_length)",
          "old_line_content": "  info->write_pos+=rest_length;",
          "new_line_content": "  memcpy(info->write_pos,Buffer,(size_t) rest_length);",
          "content_same": false
        },
        {
          "line": 483,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(0)",
          "old_line_content": "      /* No error, reset seek_not_done flag. */",
          "new_line_content": "    if ((my_seek(info->file,pos_in_file,MY_SEEK_SET,MYF(0)) ",
          "content_same": false
        },
        {
          "line": 503,
          "old_api": null,
          "new_api": "uint) (IO_SIZE+(IO_SIZE-diff_length))",
          "old_text": null,
          "new_text": "uint) (IO_SIZE+(IO_SIZE-diff_length))",
          "old_line_content": "    if (info->end_of_file <= pos_in_file)",
          "new_line_content": "  if (Count >= (uint) (IO_SIZE+(IO_SIZE-diff_length)))",
          "content_same": false
        },
        {
          "line": 1510,
          "old_api": null,
          "new_api": "my_b_flush_io_cache",
          "old_text": null,
          "new_text": "my_b_flush_io_cache(info,1)",
          "old_line_content": "  {\t\t\t\t\t/* Fill first intern buffer */",
          "new_line_content": "  if (my_b_flush_io_cache(info,1))",
          "content_same": false
        },
        {
          "line": 496,
          "old_api": null,
          "new_api": "DBUG_ASSERT",
          "old_text": null,
          "new_text": "DBUG_ASSERT(my_errno != ESPIPE)",
          "old_line_content": "    }",
          "new_line_content": "      DBUG_ASSERT(my_errno != ESPIPE);",
          "content_same": false
        },
        {
          "line": 498,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(1)",
          "old_line_content": "",
          "new_line_content": "      DBUG_RETURN(1);",
          "content_same": false
        },
        {
          "line": 1011,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(0)",
          "old_line_content": "            cache->error= -1;",
          "new_line_content": "          if (my_seek(cache->file, pos_in_file, MY_SEEK_SET, MYF(0))",
          "content_same": false
        },
        {
          "line": 1523,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(0)",
          "old_line_content": "        return (1);",
          "new_line_content": "      if (my_seek(info->file,info->pos_in_file,MY_SEEK_SET,MYF(0)))",
          "content_same": false
        },
        {
          "line": 502,
          "old_api": null,
          "new_api": "uint) (pos_in_file & (IO_SIZE-1))",
          "old_text": null,
          "new_text": "uint) (pos_in_file & (IO_SIZE-1))",
          "old_line_content": "    uint read_length;",
          "new_line_content": "  diff_length=(uint) (pos_in_file & (IO_SIZE-1));",
          "content_same": false
        },
        {
          "line": 1015,
          "old_api": null,
          "new_api": "unlock_io_cache",
          "old_text": null,
          "new_text": "unlock_io_cache(cache)",
          "old_line_content": "        }",
          "new_line_content": "            unlock_io_cache(cache);",
          "content_same": false
        },
        {
          "line": 1530,
          "old_api": null,
          "new_api": "my_write",
          "old_text": null,
          "new_text": "my_write(info->file,Buffer,(uint) length,info->myflags | MY_NABP)",
          "old_line_content": "#ifdef THREAD",
          "new_line_content": "    if (my_write(info->file,Buffer,(uint) length,info->myflags | MY_NABP))",
          "content_same": false
        },
        {
          "line": 1019,
          "old_api": null,
          "new_api": "my_read",
          "old_text": null,
          "new_text": "my_read(cache->file, cache->buffer, length, cache->myflags)",
          "old_line_content": "",
          "new_line_content": "        len= (int) my_read(cache->file, cache->buffer, length, cache->myflags);",
          "content_same": false
        },
        {
          "line": 1021,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"io_cache_share\", (\"read %d bytes\", len))",
          "old_line_content": "      cache->error=       (len == (int)length ? 0 : len);",
          "new_line_content": "      DBUG_PRINT(\"io_cache_share\", (\"read %d bytes\", len));",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 514,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(1)",
          "new_text": null,
          "old_line_content": "      DBUG_RETURN(1);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1030,
          "old_api": "unlock_io_cache",
          "new_api": null,
          "old_text": "unlock_io_cache(cache)",
          "new_text": null,
          "old_line_content": "      unlock_io_cache(cache);",
          "new_line_content": "      cshare->pos_in_file= pos_in_file;",
          "content_same": false
        },
        {
          "line": 1543,
          "old_api": "copy_to_read_buffer",
          "new_api": null,
          "old_text": "copy_to_read_buffer(info, Buffer, length)",
          "new_text": null,
          "old_line_content": "      copy_to_read_buffer(info, Buffer, length);",
          "new_line_content": "      info->pos_in_file.",
          "content_same": false
        },
        {
          "line": 1550,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(info->write_pos,Buffer,(size_t) Count)",
          "new_text": null,
          "old_line_content": "  memcpy(info->write_pos,Buffer,(size_t) Count);",
          "new_line_content": "    Buffer+=length;",
          "content_same": false
        },
        {
          "line": 532,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(1)",
          "new_text": null,
          "old_line_content": "      DBUG_RETURN(1);",
          "new_line_content": "    if (Count)",
          "content_same": false
        },
        {
          "line": 536,
          "old_api": "my_read",
          "new_api": null,
          "old_text": "my_read(info->file,info->buffer,(uint) max_length,\n\t\t\t   info->myflags)",
          "new_text": null,
          "old_line_content": "  else if ((length=my_read(info->file,info->buffer,(uint) max_length,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1048,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"io_cache_share\", (\"reader error. len %d  left %u\",\n                                    len, left_length))",
          "new_text": null,
          "old_line_content": "      DBUG_PRINT(\"io_cache_share\", (\"reader error. len %d  left %u\",",
          "new_line_content": "    cache->seek_not_done= 0;",
          "content_same": false
        },
        {
          "line": 1562,
          "old_api": "register",
          "new_api": null,
          "old_text": "register",
          "new_text": null,
          "old_line_content": "int my_b_append(register IO_CACHE *info, const byte *Buffer, uint Count)",
          "new_line_content": "  the write buffer before we are ready with it.",
          "content_same": false
        },
        {
          "line": 541,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(Buffer,info->buffer,(size_t) length)",
          "new_text": null,
          "old_line_content": "      memcpy(Buffer,info->buffer,(size_t) length);",
          "new_line_content": "\t   length == (uint) -1)",
          "content_same": false
        },
        {
          "line": 545,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(1)",
          "new_text": null,
          "old_line_content": "    DBUG_RETURN(1);",
          "new_line_content": "    info->pos_in_file= pos_in_file;",
          "content_same": false
        },
        {
          "line": 1571,
          "old_api": "DBUG_ASSERT",
          "new_api": null,
          "old_text": "DBUG_ASSERT(!info->share)",
          "new_text": null,
          "old_line_content": "  DBUG_ASSERT(!info->share);",
          "new_line_content": "    Assert that we cannot come here with a shared cache. If we do one",
          "content_same": false
        },
        {
          "line": 1060,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(0)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(0);",
          "new_line_content": "    left_length+= cnt;",
          "content_same": false
        },
        {
          "line": 550,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(Buffer,info->buffer,(size_t) Count)",
          "new_text": null,
          "old_line_content": "  memcpy(Buffer,info->buffer,(size_t) Count);",
          "new_line_content": "  info->read_pos=info->buffer+Count;",
          "content_same": false
        },
        {
          "line": 551,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(0)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(0);",
          "new_line_content": "  info->read_end=info->buffer+length;",
          "content_same": false
        },
        {
          "line": 1575,
          "old_api": "uint) (info->write_end - info->write_pos)",
          "new_api": null,
          "old_text": "uint) (info->write_end - info->write_pos)",
          "new_text": null,
          "old_line_content": "  rest_length=(uint) (info->write_end - info->write_pos);",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 1582,
          "old_api": "my_b_flush_io_cache",
          "new_api": null,
          "old_text": "my_b_flush_io_cache(info,0)",
          "new_text": null,
          "old_line_content": "  if (my_b_flush_io_cache(info,0))",
          "new_line_content": "  Buffer+=rest_length;",
          "content_same": false
        },
        {
          "line": 1584,
          "old_api": "unlock_append_buffer",
          "new_api": null,
          "old_text": "unlock_append_buffer(info)",
          "new_text": null,
          "old_line_content": "    unlock_append_buffer(info);",
          "new_line_content": "  info->write_pos+=rest_length;",
          "content_same": false
        },
        {
          "line": 1590,
          "old_api": "my_write",
          "new_api": null,
          "old_text": "my_write(info->file,Buffer,(uint) length,info->myflags | MY_NABP)",
          "new_text": null,
          "old_line_content": "    if (my_write(info->file,Buffer,(uint) length,info->myflags | MY_NABP))",
          "new_line_content": "  if (Count >= IO_SIZE)",
          "content_same": false
        },
        {
          "line": 1592,
          "old_api": "unlock_append_buffer",
          "new_api": null,
          "old_text": "unlock_append_buffer(info)",
          "new_text": null,
          "old_line_content": "      unlock_append_buffer(info);",
          "new_line_content": "    length=Count & (uint) ~(IO_SIZE-1);",
          "content_same": false
        },
        {
          "line": 1086,
          "old_api": "DBUG_ASSERT",
          "new_api": null,
          "old_text": "DBUG_ASSERT(cshare->source_cache == write_cache)",
          "new_text": null,
          "old_line_content": "  DBUG_ASSERT(cshare->source_cache == write_cache);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1601,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(info->write_pos,Buffer,(size_t) Count)",
          "new_text": null,
          "old_line_content": "  memcpy(info->write_pos,Buffer,(size_t) Count);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1603,
          "old_api": "unlock_append_buffer",
          "new_api": null,
          "old_text": "unlock_append_buffer(info)",
          "new_text": null,
          "old_line_content": "  unlock_append_buffer(info);",
          "new_line_content": "end:",
          "content_same": false
        },
        {
          "line": 1093,
          "old_api": "min",
          "new_api": null,
          "old_text": "min(write_length, write_cache->buffer_length)",
          "new_text": null,
          "old_line_content": "    uint copy_length= min(write_length, write_cache->buffer_length);",
          "new_line_content": "  */",
          "content_same": false
        },
        {
          "line": 1094,
          "old_api": "__attribute__",
          "new_api": null,
          "old_text": "__attribute__((unused))",
          "new_text": null,
          "old_line_content": "    int  __attribute__((unused)) rc;",
          "new_line_content": "  while (write_length)",
          "content_same": false
        },
        {
          "line": 1098,
          "old_api": "DBUG_ASSERT",
          "new_api": null,
          "old_text": "DBUG_ASSERT(rc)",
          "new_text": null,
          "old_line_content": "    DBUG_ASSERT(rc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1100,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(cshare->buffer, write_buffer, copy_length)",
          "new_text": null,
          "old_line_content": "    memcpy(cshare->buffer, write_buffer, copy_length);",
          "new_line_content": "    /* The writing thread does always have the lock when it awakes. */",
          "content_same": false
        },
        {
          "line": 1617,
          "old_api": "my_b_append",
          "new_api": null,
          "old_text": "my_b_append(info, Buffer, Count)",
          "new_text": null,
          "old_line_content": "    return my_b_append(info, Buffer, Count);",
          "new_line_content": "    expressions inside - I do have a test case if somebody wants it",
          "content_same": false
        },
        {
          "line": 1618,
          "old_api": "my_b_write",
          "new_api": null,
          "old_text": "my_b_write(info, Buffer, Count)",
          "new_text": null,
          "old_line_content": "  return my_b_write(info, Buffer, Count);",
          "new_line_content": "  */",
          "content_same": false
        },
        {
          "line": 1107,
          "old_api": "unlock_io_cache",
          "new_api": null,
          "old_text": "unlock_io_cache(write_cache)",
          "new_text": null,
          "old_line_content": "    unlock_io_cache(write_cache);",
          "new_line_content": "    cshare->pos_in_file= write_cache->pos_in_file;",
          "content_same": false
        },
        {
          "line": 1628,
          "old_api": "register",
          "new_api": null,
          "old_text": "register",
          "new_text": null,
          "old_line_content": "int my_block_write(register IO_CACHE *info, const byte *Buffer, uint Count,",
          "new_line_content": "  we will never get a seek over the end of the buffer",
          "content_same": false
        },
        {
          "line": 1639,
          "old_api": "DBUG_ASSERT",
          "new_api": null,
          "old_text": "DBUG_ASSERT(!info->share)",
          "new_text": null,
          "old_line_content": "  DBUG_ASSERT(!info->share);",
          "new_line_content": "    Assert that we cannot come here with a shared cache. If we do one",
          "content_same": false
        },
        {
          "line": 1129,
          "old_api": "register",
          "new_api": null,
          "old_text": "register",
          "new_text": null,
          "old_line_content": "int _my_b_seq_read(register IO_CACHE *info, byte *Buffer, uint Count)",
          "new_line_content": "    1  Failed to read",
          "content_same": false
        },
        {
          "line": 1646,
          "old_api": "my_pwrite",
          "new_api": null,
          "old_text": "my_pwrite(info->file, Buffer, Count, pos,\n\t\t       info->myflags | MY_NABP)",
          "new_text": null,
          "old_line_content": "      return my_pwrite(info->file, Buffer, Count, pos,",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 1136,
          "old_api": "uint) (info->read_end-info->read_pos)",
          "new_api": null,
          "old_text": "uint) (info->read_end-info->read_pos)",
          "new_text": null,
          "old_line_content": "  if ((left_length=(uint) (info->read_end-info->read_pos)))",
          "new_line_content": "  save_count=Count;",
          "content_same": false
        },
        {
          "line": 1138,
          "old_api": "DBUG_ASSERT",
          "new_api": null,
          "old_text": "DBUG_ASSERT(Count > left_length)",
          "new_text": null,
          "old_line_content": "    DBUG_ASSERT(Count > left_length);\t/* User is not using my_b_read() */",
          "new_line_content": "  /* first, read the regular buffer */",
          "content_same": false
        },
        {
          "line": 627,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"init_io_cache_share\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"init_io_cache_share\");",
          "new_line_content": "void init_io_cache_share(IO_CACHE *read_cache, IO_CACHE_SHARE *cshare,",
          "content_same": false
        },
        {
          "line": 628,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"io_cache_share\", (\"read_cache: 0x%lx  share: 0x%lx  \"\n                                \"write_cache: 0x%lx  threads: %u\",\n                                (long) read_cache, (long) cshare,\n                                (long) write_cache, num_threads))",
          "new_text": null,
          "old_line_content": "  DBUG_PRINT(\"io_cache_share\", (\"read_cache: 0x%lx  share: 0x%lx  \"",
          "new_line_content": "                         IO_CACHE *write_cache, uint num_threads)",
          "content_same": false
        },
        {
          "line": 1650,
          "old_api": "my_pwrite",
          "new_api": null,
          "old_text": "my_pwrite(info->file, Buffer, length, pos, info->myflags | MY_NABP)",
          "new_text": null,
          "old_line_content": "    if (my_pwrite(info->file, Buffer, length, pos, info->myflags | MY_NABP))",
          "new_line_content": "\t\t       info->myflags | MY_NABP);",
          "content_same": false
        },
        {
          "line": 1143,
          "old_api": "lock_append_buffer",
          "new_api": null,
          "old_text": "lock_append_buffer(info)",
          "new_text": null,
          "old_line_content": "  lock_append_buffer(info);",
          "new_line_content": "    Buffer+=left_length;",
          "content_same": false
        },
        {
          "line": 633,
          "old_api": "DBUG_ASSERT",
          "new_api": null,
          "old_text": "DBUG_ASSERT(num_threads > 1)",
          "new_text": null,
          "old_line_content": "  DBUG_ASSERT(num_threads > 1);",
          "new_line_content": "                                (long) read_cache, (long) cshare,",
          "content_same": false
        },
        {
          "line": 634,
          "old_api": "DBUG_ASSERT",
          "new_api": null,
          "old_text": "DBUG_ASSERT(read_cache->type == READ_CACHE)",
          "new_text": null,
          "old_line_content": "  DBUG_ASSERT(read_cache->type == READ_CACHE);",
          "new_line_content": "                                (long) write_cache, num_threads));",
          "content_same": false
        },
        {
          "line": 635,
          "old_api": "DBUG_ASSERT",
          "new_api": null,
          "old_text": "DBUG_ASSERT(!write_cache || (write_cache->type == WRITE_CACHE))",
          "new_text": null,
          "old_line_content": "  DBUG_ASSERT(!write_cache || (write_cache->type == WRITE_CACHE));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1661,
          "old_api": "uint) (info->write_end - info->buffer)",
          "new_api": null,
          "old_text": "uint) (info->write_end - info->buffer)",
          "new_text": null,
          "old_line_content": "  length= (uint) (info->write_end - info->buffer);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 639,
          "old_api": "pthread_cond_init",
          "new_api": null,
          "old_text": "pthread_cond_init(&cshare->cond_writer, 0)",
          "new_text": null,
          "old_line_content": "  pthread_cond_init(&cshare->cond_writer, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1154,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(0)",
          "new_text": null,
          "old_line_content": "  if (my_seek(info->file,pos_in_file,MY_SEEK_SET,MYF(0))",
          "new_line_content": "    With read-append cache we must always do a seek before we read,",
          "content_same": false
        },
        {
          "line": 1668,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(info->buffer+offset, Buffer, length)",
          "new_text": null,
          "old_line_content": "    memcpy(info->buffer+offset, Buffer, length);",
          "new_line_content": "    length-=offset;",
          "content_same": false
        },
        {
          "line": 1158,
          "old_api": "unlock_append_buffer",
          "new_api": null,
          "old_text": "unlock_append_buffer(info)",
          "new_text": null,
          "old_line_content": "   unlock_append_buffer(info);",
          "new_line_content": "      == MY_FILEPOS_ERROR)",
          "content_same": false
        },
        {
          "line": 1163,
          "old_api": "uint) (pos_in_file & (IO_SIZE-1))",
          "new_api": null,
          "old_text": "uint) (pos_in_file & (IO_SIZE-1))",
          "new_text": null,
          "old_line_content": "  diff_length=(uint) (pos_in_file & (IO_SIZE-1));",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1678,
          "old_api": "_my_b_write",
          "new_api": null,
          "old_text": "_my_b_write(info, Buffer, Count)",
          "new_text": null,
          "old_line_content": "  if (_my_b_write(info, Buffer, Count))",
          "new_line_content": "      return (error);",
          "content_same": false
        },
        {
          "line": 1171,
          "old_api": "my_read",
          "new_api": null,
          "old_text": "my_read(info->file,Buffer,(uint) length,info->myflags)",
          "new_text": null,
          "old_line_content": "    if ((read_length=my_read(info->file,Buffer,(uint) length,info->myflags)) ==",
          "new_line_content": "    uint read_length;",
          "content_same": false
        },
        {
          "line": 1175,
          "old_api": "unlock_append_buffer",
          "new_api": null,
          "old_text": "unlock_append_buffer(info)",
          "new_text": null,
          "old_line_content": "      unlock_append_buffer(info);",
          "new_line_content": "\t(uint)-1)",
          "content_same": false
        },
        {
          "line": 1702,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"my_b_flush_io_cache\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"my_b_flush_io_cache\");",
          "new_line_content": "  uint length;",
          "content_same": false
        },
        {
          "line": 684,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"remove_io_thread\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"remove_io_thread\");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1711,
          "old_api": "real_open_cached_file",
          "new_api": null,
          "old_text": "real_open_cached_file(info)",
          "new_text": null,
          "old_line_content": "      if (real_open_cached_file(info))",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 688,
          "old_api": "flush_io_cache",
          "new_api": null,
          "old_text": "flush_io_cache(cache)",
          "new_text": null,
          "old_line_content": "    flush_io_cache(cache);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1712,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN((info->error= -1))",
          "new_text": null,
          "old_line_content": "\tDBUG_RETURN((info->error= -1));",
          "new_line_content": "    if (info->file == -1)",
          "content_same": false
        },
        {
          "line": 690,
          "old_api": "pthread_mutex_lock",
          "new_api": null,
          "old_text": "pthread_mutex_lock(&cshare->mutex)",
          "new_text": null,
          "old_line_content": "  pthread_mutex_lock(&cshare->mutex);",
          "new_line_content": "  if (cache == cshare->source_cache)",
          "content_same": false
        },
        {
          "line": 1716,
          "old_api": "uint) (info->write_pos - info->write_buffer)",
          "new_api": null,
          "old_text": "uint) (info->write_pos - info->write_buffer)",
          "new_text": null,
          "old_line_content": "    if ((length=(uint) (info->write_pos - info->write_buffer)))",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1205,
          "old_api": "my_read",
          "new_api": null,
          "old_text": "my_read(info->file,info->buffer,(uint) max_length,\n\t\t   info->myflags)",
          "new_text": null,
          "old_line_content": "    length=my_read(info->file,info->buffer,(uint) max_length,",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 697,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"io_cache_share\", (\"remaining threads: %u\", total))",
          "new_text": null,
          "old_line_content": "  DBUG_PRINT(\"io_cache_share\", (\"remaining threads: %u\", total));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1210,
          "old_api": "unlock_append_buffer",
          "new_api": null,
          "old_text": "unlock_append_buffer(info)",
          "new_text": null,
          "old_line_content": "      unlock_append_buffer(info);",
          "new_line_content": "    if (length == (uint) -1)",
          "content_same": false
        },
        {
          "line": 1726,
          "old_api": "copy_to_read_buffer",
          "new_api": null,
          "old_text": "copy_to_read_buffer(info, info->write_buffer, length)",
          "new_text": null,
          "old_line_content": "        copy_to_read_buffer(info, info->write_buffer, length);",
          "new_line_content": "        copy_to_read_buffer() relies on info->pos_in_file.",
          "content_same": false
        },
        {
          "line": 1215,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(Buffer,info->buffer,(size_t) length)",
          "new_text": null,
          "old_line_content": "      memcpy(Buffer,info->buffer,(size_t) length);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 705,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"io_cache_share\", (\"writer leaves\"))",
          "new_text": null,
          "old_line_content": "    DBUG_PRINT(\"io_cache_share\", (\"writer leaves\"));",
          "new_line_content": "  /* If the writer goes, let the readers know. */",
          "content_same": false
        },
        {
          "line": 712,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"io_cache_share\", (\"the last running thread leaves, wake all\"))",
          "new_text": null,
          "old_line_content": "    DBUG_PRINT(\"io_cache_share\", (\"the last running thread leaves, wake all\"));",
          "new_line_content": "  /* If all threads are waiting for me to join the lock, wake them. */",
          "content_same": false
        },
        {
          "line": 713,
          "old_api": "pthread_cond_signal",
          "new_api": null,
          "old_text": "pthread_cond_signal(&cshare->cond_writer)",
          "new_text": null,
          "old_line_content": "    pthread_cond_signal(&cshare->cond_writer);",
          "new_line_content": "  if (!--cshare->running_threads)",
          "content_same": false
        },
        {
          "line": 714,
          "old_api": "pthread_cond_broadcast",
          "new_api": null,
          "old_text": "pthread_cond_broadcast(&cshare->cond)",
          "new_text": null,
          "old_line_content": "    pthread_cond_broadcast(&cshare->cond);",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 1736,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(0)",
          "new_text": null,
          "old_line_content": "\tif (my_seek(info->file,pos_in_file,MY_SEEK_SET,MYF(0)) ==",
          "new_line_content": "      */",
          "content_same": false
        },
        {
          "line": 1228,
          "old_api": "unlock_append_buffer",
          "new_api": null,
          "old_text": "unlock_append_buffer(info)",
          "new_text": null,
          "old_line_content": "  unlock_append_buffer(info);",
          "new_line_content": "      goto read_append_buffer;",
          "content_same": false
        },
        {
          "line": 1740,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN((info->error= -1))",
          "new_text": null,
          "old_line_content": "\t  DBUG_RETURN((info->error= -1));",
          "new_line_content": "\t    MY_FILEPOS_ERROR)",
          "content_same": false
        },
        {
          "line": 1232,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(Buffer,info->buffer,(size_t) Count)",
          "new_text": null,
          "old_line_content": "  memcpy(Buffer,info->buffer,(size_t) Count);",
          "new_line_content": "  info->read_pos=info->buffer+Count;",
          "content_same": false
        },
        {
          "line": 721,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"io_cache_share\", (\"last thread removed, destroy share\"))",
          "new_text": null,
          "old_line_content": "    DBUG_PRINT(\"io_cache_share\", (\"last thread removed, destroy share\"));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 722,
          "old_api": "pthread_cond_destroy (&cshare->cond_writer)",
          "new_api": null,
          "old_text": "pthread_cond_destroy (&cshare->cond_writer)",
          "new_text": null,
          "old_line_content": "    pthread_cond_destroy (&cshare->cond_writer);",
          "new_line_content": "  if (!total)",
          "content_same": false
        },
        {
          "line": 723,
          "old_api": "pthread_cond_destroy (&cshare->cond)",
          "new_api": null,
          "old_text": "pthread_cond_destroy (&cshare->cond)",
          "new_text": null,
          "old_line_content": "    pthread_cond_destroy (&cshare->cond);",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 1750,
          "old_api": "my_write",
          "new_api": null,
          "old_text": "my_write(info->file,info->write_buffer,length,\n\t\t   info->myflags | MY_NABP)",
          "new_text": null,
          "old_line_content": "      if (my_write(info->file,info->write_buffer,length,",
          "new_line_content": "      info->write_end= (info->write_buffer+info->buffer_length-",
          "content_same": false
        },
        {
          "line": 1244,
          "old_api": "uint) (info->write_pos - info->append_read_pos)",
          "new_api": null,
          "old_text": "uint) (info->write_pos - info->append_read_pos)",
          "new_text": null,
          "old_line_content": "    uint len_in_buff = (uint) (info->write_pos - info->append_read_pos);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1757,
          "old_api": "set_if_bigger",
          "new_api": null,
          "old_text": "set_if_bigger(info->end_of_file,(pos_in_file+length))",
          "new_text": null,
          "old_line_content": "        set_if_bigger(info->end_of_file,(pos_in_file+length));",
          "new_line_content": "\tinfo->error= 0;",
          "content_same": false
        },
        {
          "line": 1248,
          "old_api": "DBUG_ASSERT",
          "new_api": null,
          "old_text": "DBUG_ASSERT(info->append_read_pos <= info->write_pos)",
          "new_text": null,
          "old_line_content": "    DBUG_ASSERT(info->append_read_pos <= info->write_pos);",
          "new_line_content": "    uint copy_len;",
          "content_same": false
        },
        {
          "line": 1762,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(0)",
          "new_text": null,
          "old_line_content": "\tDBUG_ASSERT(info->end_of_file == my_tell(info->file,MYF(0)));",
          "new_line_content": "      else",
          "content_same": false
        },
        {
          "line": 1252,
          "old_api": "DBUG_ASSERT",
          "new_api": null,
          "old_text": "DBUG_ASSERT(pos_in_file == info->end_of_file)",
          "new_text": null,
          "old_line_content": "    DBUG_ASSERT(pos_in_file == info->end_of_file);",
          "new_line_content": "    /*",
          "content_same": false
        },
        {
          "line": 1253,
          "old_api": "min",
          "new_api": null,
          "old_text": "min(Count, len_in_buff)",
          "new_text": null,
          "old_line_content": "    copy_len=min(Count, len_in_buff);",
          "new_line_content": "      TODO: figure out if the assert below is needed or correct.",
          "content_same": false
        },
        {
          "line": 1254,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(Buffer, info->append_read_pos, copy_len)",
          "new_text": null,
          "old_line_content": "    memcpy(Buffer, info->append_read_pos, copy_len);",
          "new_line_content": "    */",
          "content_same": false
        },
        {
          "line": 1768,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(info->error)",
          "new_text": null,
          "old_line_content": "      DBUG_RETURN(info->error);",
          "new_line_content": "      info->append_read_pos=info->write_pos=info->write_buffer;",
          "content_same": false
        },
        {
          "line": 237,
          "old_api": "my_malloc",
          "new_api": null,
          "old_text": "my_malloc(buffer_block,\n\t\t\t     MYF((cache_myflags & ~ MY_WME) |\n\t\t\t\t (cachesize == min_cache ? MY_WME : 0)))",
          "new_text": null,
          "old_line_content": "\t   (byte*) my_malloc(buffer_block,",
          "new_line_content": "        Unset MY_WAIT_IF_FULL bit if it is set, to prevent conflict with",
          "content_same": false
        },
        {
          "line": 238,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF((cache_myflags & ~ MY_WME) |\n\t\t\t\t (cachesize == min_cache ? MY_WME : 0))",
          "new_text": null,
          "old_line_content": "\t\t\t     MYF((cache_myflags & ~ MY_WME) |",
          "new_line_content": "        MY_ZEROFILL.",
          "content_same": false
        },
        {
          "line": 1261,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(info->buffer, info->append_read_pos,\n\t   (size_t) (transfer_len=len_in_buff - copy_len))",
          "new_text": null,
          "old_line_content": "    memcpy(info->buffer, info->append_read_pos,",
          "new_line_content": "      info->error = save_count - Count;",
          "content_same": false
        },
        {
          "line": 1774,
          "old_api": "my_aiowait",
          "new_api": null,
          "old_text": "my_aiowait(&info->aio_result)",
          "new_text": null,
          "old_line_content": "    my_aiowait(&info->aio_result);\t\t/* Wait for outstanding req */",
          "new_line_content": "#ifdef HAVE_AIOWAIT",
          "content_same": false
        },
        {
          "line": 1779,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(0)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(0);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1269,
          "old_api": "unlock_append_buffer",
          "new_api": null,
          "old_text": "unlock_append_buffer(info)",
          "new_text": null,
          "old_line_content": "  unlock_append_buffer(info);",
          "new_line_content": "    info->pos_in_file=pos_in_file+copy_len;",
          "content_same": false
        },
        {
          "line": 248,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(2)",
          "new_text": null,
          "old_line_content": "\tDBUG_RETURN(2);\t\t\t\t/* Can't alloc cache */",
          "new_line_content": "\tbreak;\t\t\t\t\t/* Enough memory found */",
          "content_same": false
        },
        {
          "line": 762,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"lock_io_cache\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"lock_io_cache\");",
          "new_line_content": "static int lock_io_cache(IO_CACHE *cache, my_off_t pos)",
          "content_same": false
        },
        {
          "line": 250,
          "old_api": "uint) ((ulong) cachesize*3/4 & (ulong)~(min_cache-1))",
          "new_api": null,
          "old_text": "uint) ((ulong) cachesize*3/4 & (ulong)~(min_cache-1))",
          "new_text": null,
          "old_line_content": "      cachesize= (uint) ((ulong) cachesize*3/4 & (ulong)~(min_cache-1));",
          "new_line_content": "      if (cachesize == min_cache)",
          "content_same": false
        },
        {
          "line": 254,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"info\",(\"init_io_cache: cachesize = %u\",cachesize))",
          "new_text": null,
          "old_line_content": "  DBUG_PRINT(\"info\",(\"init_io_cache: cachesize = %u\",cachesize));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 767,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"io_cache_share\", (\"%s: 0x%lx  pos: %lu  running: %u\",\n                                (cache == cshare->source_cache) ?\n                                \"writer\" : \"reader\", (long) cache, (ulong) pos,\n                                cshare->running_threads))",
          "new_text": null,
          "old_line_content": "  DBUG_PRINT(\"io_cache_share\", (\"%s: 0x%lx  pos: %lu  running: %u\",",
          "new_line_content": "  /* Enter the lock. */",
          "content_same": false
        },
        {
          "line": 263,
          "old_api": "pthread_mutex_init",
          "new_api": null,
          "old_text": "pthread_mutex_init(&info->append_buffer_lock,MY_MUTEX_INIT_FAST)",
          "new_text": null,
          "old_line_content": "    pthread_mutex_init(&info->append_buffer_lock,MY_MUTEX_INIT_FAST);",
          "new_line_content": "    info->append_read_pos = info->write_pos = info->write_buffer;",
          "content_same": false
        },
        {
          "line": 1291,
          "old_api": "register",
          "new_api": null,
          "old_text": "register",
          "new_text": null,
          "old_line_content": "int _my_b_async_read(register IO_CACHE *info, byte *Buffer, uint Count)",
          "new_line_content": "     0          Success",
          "content_same": false
        },
        {
          "line": 1803,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"end_io_cache\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"end_io_cache\");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 781,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"io_cache_share\", (\"writer waits in lock\"))",
          "new_text": null,
          "old_line_content": "        DBUG_PRINT(\"io_cache_share\", (\"writer waits in lock\"));",
          "new_line_content": "      /* The writer waits until all readers are here. */",
          "content_same": false
        },
        {
          "line": 270,
          "old_api": "bzero",
          "new_api": null,
          "old_text": "bzero((char*) &info->append_buffer_lock, sizeof(info))",
          "new_text": null,
          "old_line_content": "    bzero((char*) &info->append_buffer_lock, sizeof(info));",
          "new_line_content": "  else",
          "content_same": false
        },
        {
          "line": 782,
          "old_api": "pthread_cond_wait",
          "new_api": null,
          "old_text": "pthread_cond_wait(&cshare->cond_writer, &cshare->mutex)",
          "new_text": null,
          "old_line_content": "        pthread_cond_wait(&cshare->cond_writer, &cshare->mutex);",
          "new_line_content": "      while (cshare->running_threads)",
          "content_same": false
        },
        {
          "line": 1804,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"enter\",(\"cache: 0x%lx\", (ulong) info))",
          "new_text": null,
          "old_line_content": "  DBUG_PRINT(\"enter\",(\"cache: 0x%lx\", (ulong) info));",
          "new_line_content": "  int error=0;",
          "content_same": false
        },
        {
          "line": 1298,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(Buffer,info->read_pos,\n\t (size_t) (left_length=(uint) (info->read_end-info->read_pos)))",
          "new_text": null,
          "old_line_content": "  memcpy(Buffer,info->read_pos,",
          "new_line_content": "  my_off_t next_pos_in_file;",
          "content_same": false
        },
        {
          "line": 1299,
          "old_api": "uint) (info->read_end-info->read_pos)",
          "new_api": null,
          "old_text": "uint) (info->read_end-info->read_pos)",
          "new_text": null,
          "old_line_content": "\t (size_t) (left_length=(uint) (info->read_end-info->read_pos)));",
          "new_line_content": "  byte *read_buffer;",
          "content_same": false
        },
        {
          "line": 1811,
          "old_api": "DBUG_ASSERT",
          "new_api": null,
          "old_text": "DBUG_ASSERT(!info->share || !info->share->total_threads)",
          "new_text": null,
          "old_line_content": "  DBUG_ASSERT(!info->share || !info->share->total_threads);",
          "new_line_content": "    Every thread must call remove_io_thread(). The last one destroys",
          "content_same": false
        },
        {
          "line": 1816,
          "old_api": "*pre_close)(info)",
          "new_api": null,
          "old_text": "*pre_close)(info)",
          "new_text": null,
          "old_line_content": "    (*pre_close)(info);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 793,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"io_cache_share\", (\"waking writer\"))",
          "new_text": null,
          "old_line_content": "      DBUG_PRINT(\"io_cache_share\", (\"waking writer\"));",
          "new_line_content": "    /* The last thread wakes the writer. */",
          "content_same": false
        },
        {
          "line": 794,
          "old_api": "pthread_cond_signal",
          "new_api": null,
          "old_text": "pthread_cond_signal(&cshare->cond_writer)",
          "new_text": null,
          "old_line_content": "      pthread_cond_signal(&cshare->cond_writer);",
          "new_line_content": "    if (!cshare->running_threads)",
          "content_same": false
        },
        {
          "line": 1307,
          "old_api": "my_aiowait",
          "new_api": null,
          "old_text": "my_aiowait(&info->aio_result)",
          "new_text": null,
          "old_line_content": "    my_aiowait(&info->aio_result);\t\t/* Wait for outstanding req */",
          "new_line_content": "  if (info->inited)",
          "content_same": false
        },
        {
          "line": 284,
          "old_api": "init_functions",
          "new_api": null,
          "old_text": "init_functions(info)",
          "new_text": null,
          "old_line_content": "  init_functions(info);",
          "new_line_content": "  info->end_of_file= end_of_file;",
          "content_same": false
        },
        {
          "line": 1311,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(ME_BELL+ME_WAITTANG)",
          "new_text": null,
          "old_line_content": "\tmy_error(EE_READ, MYF(ME_BELL+ME_WAITTANG),",
          "new_line_content": "    if (info->aio_result.result.aio_errno)",
          "content_same": false
        },
        {
          "line": 288,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"info\",(\"Using async io\"))",
          "new_text": null,
          "old_line_content": "    DBUG_PRINT(\"info\",(\"Using async io\"));",
          "new_line_content": "#ifdef HAVE_AIOWAIT",
          "content_same": false
        },
        {
          "line": 1312,
          "old_api": "my_filename",
          "new_api": null,
          "old_text": "my_filename(info->file)",
          "new_text": null,
          "old_line_content": "\t\t my_filename(info->file),",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1823,
          "old_api": "my_b_flush_io_cache",
          "new_api": null,
          "old_text": "my_b_flush_io_cache(info,1)",
          "new_text": null,
          "old_line_content": "      error= my_b_flush_io_cache(info,1);",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 1824,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(MY_WME)",
          "new_text": null,
          "old_line_content": "    my_free((gptr) info->buffer,MYF(MY_WME));",
          "new_line_content": "    info->alloced_buffer=0;",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"io_cache_share\", (\"reader waits in lock\"))",
          "new_text": null,
          "old_line_content": "      DBUG_PRINT(\"io_cache_share\", (\"reader waits in lock\"));",
          "new_line_content": "    while ((!cshare->read_end || (cshare->pos_in_file < pos)) &&",
          "content_same": false
        },
        {
          "line": 294,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(0)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(0);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 806,
          "old_api": "pthread_cond_wait",
          "new_api": null,
          "old_text": "pthread_cond_wait(&cshare->cond, &cshare->mutex)",
          "new_text": null,
          "old_line_content": "      pthread_cond_wait(&cshare->cond, &cshare->mutex);",
          "new_line_content": "           cshare->source_cache)",
          "content_same": false
        },
        {
          "line": 1832,
          "old_api": "pthread_mutex_destroy",
          "new_api": null,
          "old_text": "pthread_mutex_destroy(&info->append_buffer_lock)",
          "new_text": null,
          "old_line_content": "    pthread_mutex_destroy(&info->append_buffer_lock);",
          "new_line_content": "    /* Destroy allocated mutex */",
          "content_same": false
        },
        {
          "line": 1326,
          "old_api": "uint) (info->read_end - info->request_pos)",
          "new_api": null,
          "old_text": "uint) (info->read_end - info->request_pos)",
          "new_text": null,
          "old_line_content": "    info->pos_in_file+=(uint) (info->read_end - info->request_pos);",
          "new_line_content": "\t\t    (int) (read_length+left_length));",
          "content_same": false
        },
        {
          "line": 307,
          "old_api": "aiowait",
          "new_api": null,
          "old_text": "aiowait((struct timeval *) 0)",
          "new_text": null,
          "old_line_content": "      if ((int) (tmp=aiowait((struct timeval *) 0)) == -1)",
          "new_line_content": "    struct aio_result_t *tmp;",
          "content_same": false
        },
        {
          "line": 819,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"io_cache_share\", (\"reader found writer removed. EOF\"))",
          "new_text": null,
          "old_line_content": "      DBUG_PRINT(\"io_cache_share\", (\"reader found writer removed. EOF\"));",
          "new_line_content": "    */",
          "content_same": false
        },
        {
          "line": 311,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"error\",(\"No aio request, error: %d\",errno))",
          "new_text": null,
          "old_line_content": "\tDBUG_PRINT(\"error\",(\"No aio request, error: %d\",errno));",
          "new_line_content": "      {",
          "content_same": false
        },
        {
          "line": 1850,
          "old_api": "va_start",
          "new_api": null,
          "old_text": "va_start(va_args,fmt)",
          "new_text": null,
          "old_line_content": "  va_start(va_args,fmt);",
          "new_line_content": "void die(const char* fmt, ...)",
          "content_same": false
        },
        {
          "line": 1851,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\"Error:\")",
          "new_text": null,
          "old_line_content": "  fprintf(stderr,\"Error:\");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1852,
          "old_api": "vfprintf",
          "new_api": null,
          "old_text": "vfprintf(stderr, fmt,va_args)",
          "new_text": null,
          "old_line_content": "  vfprintf(stderr, fmt,va_args);",
          "new_line_content": "  va_list va_args;",
          "content_same": false
        },
        {
          "line": 832,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"io_cache_share\", (\"last thread joined, going to read\"))",
          "new_text": null,
          "old_line_content": "      DBUG_PRINT(\"io_cache_share\", (\"last thread joined, going to read\"));",
          "new_line_content": "    */",
          "content_same": false
        },
        {
          "line": 834,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(1)",
          "new_text": null,
          "old_line_content": "      DBUG_RETURN(1);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1860,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(MY_WME)",
          "new_text": null,
          "old_line_content": "  if ((fd=my_open(fname,O_CREAT | O_RDWR,MYF(MY_WME))) < 0)",
          "new_line_content": "int open_file(const char* fname, IO_CACHE* info, int cache_size)",
          "content_same": false
        },
        {
          "line": 1861,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"Could not open %s\", fname)",
          "new_text": null,
          "old_line_content": "    die(\"Could not open %s\", fname);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1862,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(MY_WME)",
          "new_text": null,
          "old_line_content": "  if (init_io_cache(info, fd, cache_size, SEQ_READ_APPEND, 0,0,MYF(MY_WME)))",
          "new_line_content": "  int fd;",
          "content_same": false
        },
        {
          "line": 1869,
          "old_api": "end_io_cache",
          "new_api": null,
          "old_text": "end_io_cache(info)",
          "new_text": null,
          "old_line_content": "  end_io_cache(info);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1870,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(MY_WME)",
          "new_text": null,
          "old_line_content": "  my_close(info->file, MYF(MY_WME));",
          "new_line_content": "void close_file(IO_CACHE* info)",
          "content_same": false
        },
        {
          "line": 847,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"io_cache_share\", (\"reader waits in lock\"))",
          "new_text": null,
          "old_line_content": "      DBUG_PRINT(\"io_cache_share\", (\"reader waits in lock\"));",
          "new_line_content": "    while ((!cshare->read_end || (cshare->pos_in_file < pos)) &&",
          "content_same": false
        },
        {
          "line": 848,
          "old_api": "pthread_cond_wait",
          "new_api": null,
          "old_text": "pthread_cond_wait(&cshare->cond, &cshare->mutex)",
          "new_text": null,
          "old_line_content": "      pthread_cond_wait(&cshare->cond, &cshare->mutex);",
          "new_line_content": "           cshare->running_threads)",
          "content_same": false
        },
        {
          "line": 1361,
          "old_api": "min",
          "new_api": null,
          "old_text": "min(Count,read_length)",
          "new_text": null,
          "old_line_content": "    length=min(Count,read_length);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 338,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"enter\",(\"cache: 0x%lx type: %d  seek_offset: %lu  clear_cache: %d\",\n\t\t      (ulong) info, type, (ulong) seek_offset,\n\t\t      (int) clear_cache))",
          "new_text": null,
          "old_line_content": "  DBUG_PRINT(\"enter\",(\"cache: 0x%lx type: %d  seek_offset: %lu  clear_cache: %d\",",
          "new_line_content": "\t\t\tpbool clear_cache)",
          "content_same": false
        },
        {
          "line": 1362,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(Buffer,info->read_pos,(size_t) length)",
          "new_text": null,
          "old_line_content": "    memcpy(Buffer,info->read_pos,(size_t) length);",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 854,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"io_cache_share\", (\"reader awoke, going to read\"))",
          "new_text": null,
          "old_line_content": "      DBUG_PRINT(\"io_cache_share\", (\"reader awoke, going to read\"));",
          "new_line_content": "    /* If the block is not yet read, continue with a locked cache and read. */",
          "content_same": false
        },
        {
          "line": 343,
          "old_api": "DBUG_ASSERT",
          "new_api": null,
          "old_text": "DBUG_ASSERT(type != READ_NET && info->type != READ_NET &&\n\t      type != WRITE_NET && info->type != WRITE_NET &&\n\t      type != SEQ_READ_APPEND && info->type != SEQ_READ_APPEND)",
          "new_text": null,
          "old_line_content": "  DBUG_ASSERT(type != READ_NET && info->type != READ_NET &&",
          "new_line_content": "\t\t      (int) clear_cache));",
          "content_same": false
        },
        {
          "line": 856,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(1)",
          "new_text": null,
          "old_line_content": "      DBUG_RETURN(1);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1370,
          "old_api": "uint)\n\t\t      (info->read_end - info->request_pos)",
          "new_api": null,
          "old_text": "uint)\n\t\t      (info->read_end - info->request_pos)",
          "new_text": null,
          "old_line_content": "    next_pos_in_file=(info->pos_in_file+ (uint)",
          "new_line_content": "    info->read_pos+=length;",
          "content_same": false
        },
        {
          "line": 1884,
          "old_api": "MY_INIT",
          "new_api": null,
          "old_text": "MY_INIT(argv[0])",
          "new_text": null,
          "old_line_content": "  MY_INIT(argv[0]);",
          "new_line_content": "  int i,num_loops=100,error=0;",
          "content_same": false
        },
        {
          "line": 861,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"io_cache_share\", (\"reader awoke, going to process %u bytes\",\n                                cshare->read_end ? (uint)\n                                (cshare->read_end - cshare->buffer) : 0))",
          "new_text": null,
          "old_line_content": "  DBUG_PRINT(\"io_cache_share\", (\"reader awoke, going to process %u bytes\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 350,
          "old_api": "my_b_tell",
          "new_api": null,
          "old_text": "my_b_tell(info)",
          "new_text": null,
          "old_line_content": "      seek_offset <= my_b_tell(info))",
          "new_line_content": "  /* If the whole file is in memory, avoid flushing to disk */",
          "content_same": false
        },
        {
          "line": 862,
          "old_api": "uint)\n                                (cshare->read_end - cshare->buffer)",
          "new_api": null,
          "old_text": "uint)\n                                (cshare->read_end - cshare->buffer)",
          "new_text": null,
          "old_line_content": "                                cshare->read_end ? (uint)",
          "new_line_content": "    /* Another thread did read the block already. */",
          "content_same": false
        },
        {
          "line": 1886,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(MY_WME)",
          "new_text": null,
          "old_line_content": "  if (!(block=(char*)my_malloc(max_block,MYF(MY_WME))))",
          "new_line_content": "  char* block, *block_end;",
          "content_same": false
        },
        {
          "line": 357,
          "old_api": "my_b_tell",
          "new_api": null,
          "old_text": "my_b_tell(info)",
          "new_text": null,
          "old_line_content": "      info->end_of_file=my_b_tell(info);",
          "new_line_content": "    if (info->type == WRITE_CACHE && type == READ_CACHE)",
          "content_same": false
        },
        {
          "line": 869,
          "old_api": "pthread_mutex_unlock",
          "new_api": null,
          "old_text": "pthread_mutex_unlock(&cshare->mutex)",
          "new_text": null,
          "old_line_content": "  pthread_mutex_unlock(&cshare->mutex);",
          "new_line_content": "    Leave the lock. Do not call unlock_io_cache() later. The thread that",
          "content_same": false
        },
        {
          "line": 870,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(0)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(0);",
          "new_line_content": "    filled the buffer did this and marked all threads as running.",
          "content_same": false
        },
        {
          "line": 1382,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(0)",
          "new_text": null,
          "old_line_content": "    if (my_seek(info->file,next_pos_in_file,MY_SEEK_SET,MYF(0))",
          "new_line_content": "      return 1;",
          "content_same": false
        },
        {
          "line": 1893,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(0)",
          "new_text": null,
          "old_line_content": "  if (my_stat(fname,&status, MYF(0)) &&",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 1894,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(MY_WME)",
          "new_text": null,
          "old_line_content": "      my_delete(fname,MYF(MY_WME)))",
          "new_line_content": "    *p++ = (char)i;",
          "content_same": false
        },
        {
          "line": 1898,
          "old_api": "open_file",
          "new_api": null,
          "old_text": "open_file(fname,&sra_cache, cache_size)",
          "new_text": null,
          "old_line_content": "  open_file(fname,&sra_cache, cache_size);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1389,
          "old_api": "uint) (next_pos_in_file & (IO_SIZE-1))",
          "new_api": null,
          "old_text": "uint) (next_pos_in_file & (IO_SIZE-1))",
          "new_text": null,
          "old_line_content": "    read_length=IO_SIZE*2- (uint) (next_pos_in_file & (IO_SIZE-1));",
          "new_line_content": "      return (1);",
          "content_same": false
        },
        {
          "line": 1902,
          "old_api": "rand",
          "new_api": null,
          "old_text": "rand()",
          "new_text": null,
          "old_line_content": "    int block_size = abs(rand() % max_block);",
          "new_line_content": "  for (i = 0; i < num_loops; i++)",
          "content_same": false
        },
        {
          "line": 1903,
          "old_api": "int4store",
          "new_api": null,
          "old_text": "int4store(buf, block_size)",
          "new_text": null,
          "old_line_content": "    int4store(buf, block_size);",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 1904,
          "old_api": "my_b_append",
          "new_api": null,
          "old_text": "my_b_append(&sra_cache,buf,4)",
          "new_text": null,
          "old_line_content": "    if (my_b_append(&sra_cache,buf,4) ||",
          "new_line_content": "    char buf[4];",
          "content_same": false
        },
        {
          "line": 1396,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(Buffer,info->request_pos,(size_t) use_length)",
          "new_text": null,
          "old_line_content": "      memcpy(Buffer,info->request_pos,(size_t) use_length);",
          "new_line_content": "\t\t\t       read_length, info->myflags)) == (uint) -1)",
          "content_same": false
        },
        {
          "line": 1910,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(MY_WME)",
          "new_text": null,
          "old_line_content": "  my_free(block,MYF(MY_WME));",
          "new_line_content": "    total_bytes += 4+block_size;",
          "content_same": false
        },
        {
          "line": 1911,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(MY_WME)",
          "new_text": null,
          "old_line_content": "  if (!my_stat(fname,&status,MYF(MY_WME)))",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 379,
          "old_api": "my_aiowait",
          "new_api": null,
          "old_text": "my_aiowait(&info->aio_result)",
          "new_text": null,
          "old_line_content": "    my_aiowait(&info->aio_result);\t\t/* Wait for outstanding req */",
          "new_line_content": "    else",
          "content_same": false
        },
        {
          "line": 1405,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(ME_BELL+ME_WAITTANG)",
          "new_text": null,
          "old_line_content": "\t  my_error(EE_EOFERR, MYF(ME_BELL+ME_WAITTANG),",
          "new_line_content": "      if (Count != use_length)",
          "content_same": false
        },
        {
          "line": 1406,
          "old_api": "my_filename",
          "new_api": null,
          "old_text": "my_filename(info->file)",
          "new_text": null,
          "old_line_content": "\t\t   my_filename(info->file),my_errno);",
          "new_line_content": "      {\t\t\t\t\t/* Didn't find hole block */",
          "content_same": false
        },
        {
          "line": 1921,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\"Not the same number of bytes acutally  in file as bytes \\\nsupposedly written\\n\")",
          "new_text": null,
          "old_line_content": "    fprintf(stderr,\"Not the same number of bytes acutally  in file as bytes \\",
          "new_line_content": "  /* check correctness of tests */",
          "content_same": false
        },
        {
          "line": 389,
          "old_api": "my_b_tell",
          "new_api": null,
          "old_text": "my_b_tell(info)",
          "new_text": null,
          "old_line_content": "      info->end_of_file=my_b_tell(info);",
          "new_line_content": "      after the current positions should be ignored",
          "content_same": false
        },
        {
          "line": 1413,
          "old_api": "my_read",
          "new_api": null,
          "old_text": "my_read(info->file,Buffer,(uint) Count,info->myflags)",
          "new_text": null,
          "old_line_content": "      if ((read_length=my_read(info->file,Buffer,(uint) Count,info->myflags))",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 391,
          "old_api": "my_b_flush_io_cache",
          "new_api": null,
          "old_text": "my_b_flush_io_cache(info,1)",
          "new_text": null,
          "old_line_content": "    if (!clear_cache && my_b_flush_io_cache(info,1))",
          "new_line_content": "    if (info->type == WRITE_CACHE && type == READ_CACHE)",
          "content_same": false
        },
        {
          "line": 904,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"unlock_io_cache\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"unlock_io_cache\");",
          "new_line_content": "static void unlock_io_cache(IO_CACHE *cache)",
          "content_same": false
        },
        {
          "line": 905,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"io_cache_share\", (\"%s: 0x%lx  pos: %lu  running: %u\",\n                                (cache == cshare->source_cache) ?\n                                \"writer\" : \"reader\",\n                                (long) cache, (ulong) cshare->pos_in_file,\n                                cshare->total_threads))",
          "new_text": null,
          "old_line_content": "  DBUG_PRINT(\"io_cache_share\", (\"%s: 0x%lx  pos: %lu  running: %u\",",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1925,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(error)",
          "new_text": null,
          "old_line_content": "  exit(error);",
          "new_line_content": "supposedly written\\n\");",
          "content_same": false
        },
        {
          "line": 912,
          "old_api": "pthread_cond_broadcast",
          "new_api": null,
          "old_text": "pthread_cond_broadcast(&cshare->cond)",
          "new_text": null,
          "old_line_content": "  pthread_cond_broadcast(&cshare->cond);",
          "new_line_content": "                                cshare->total_threads));",
          "content_same": false
        },
        {
          "line": 913,
          "old_api": "pthread_mutex_unlock",
          "new_api": null,
          "old_text": "pthread_mutex_unlock(&cshare->mutex)",
          "new_text": null,
          "old_line_content": "  pthread_mutex_unlock(&cshare->mutex);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 410,
          "old_api": "init_functions",
          "new_api": null,
          "old_text": "init_functions(info)",
          "new_text": null,
          "old_line_content": "  init_functions(info);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1438,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"aioread\",(\"filepos: %ld  length: %ld\",\n\t\t\t  (ulong) next_pos_in_file,(ulong) max_length))",
          "new_text": null,
          "old_line_content": "    DBUG_PRINT(\"aioread\",(\"filepos: %ld  length: %ld\",",
          "new_line_content": "  if (max_length)",
          "content_same": false
        },
        {
          "line": 415,
          "old_api": "ulong) (info->end_of_file - seek_offset)",
          "new_api": null,
          "old_text": "ulong) (info->end_of_file - seek_offset)",
          "new_text": null,
          "old_line_content": "       (ulong) (info->end_of_file - seek_offset)))",
          "new_line_content": "#ifdef HAVE_AIOWAIT",
          "content_same": false
        },
        {
          "line": 1440,
          "old_api": "aioread",
          "new_api": null,
          "old_text": "aioread(info->file,read_buffer,(int) max_length,\n\t\t(my_off_t) next_pos_in_file,MY_SEEK_SET,\n\t\t&info->aio_result.result)",
          "new_text": null,
          "old_line_content": "    if (aioread(info->file,read_buffer,(int) max_length,",
          "new_line_content": "    info->aio_result.result.aio_errno=AIO_INPROGRESS;\t/* Marker for test */",
          "content_same": false
        },
        {
          "line": 1445,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"error\",(\"got error: %d, aio_result: %d from aioread, async skipped\",\n\t\t\t  errno, info->aio_result.result.aio_errno))",
          "new_text": null,
          "old_line_content": "      DBUG_PRINT(\"error\",(\"got error: %d, aio_result: %d from aioread, async skipped\",",
          "new_line_content": "\t\t&info->aio_result.result))",
          "content_same": false
        },
        {
          "line": 422,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(0)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(0);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1449,
          "old_api": "bmove",
          "new_api": null,
          "old_text": "bmove(info->buffer,info->request_pos,\n\t      (uint) (info->read_end - info->read_pos))",
          "new_text": null,
          "old_line_content": "\tbmove(info->buffer,info->request_pos,",
          "new_line_content": "\t\t\t  errno, info->aio_result.result.aio_errno));",
          "content_same": false
        },
        {
          "line": 1450,
          "old_api": "uint) (info->read_end - info->read_pos)",
          "new_api": null,
          "old_text": "uint) (info->read_end - info->read_pos)",
          "new_text": null,
          "old_line_content": "\t      (uint) (info->read_end - info->read_pos));",
          "new_line_content": "      if (info->request_pos != info->buffer)",
          "content_same": false
        },
        {
          "line": 955,
          "old_api": "register",
          "new_api": null,
          "old_text": "register",
          "new_text": null,
          "old_line_content": "int _my_b_read_r(register IO_CACHE *cache, byte *Buffer, uint Count)",
          "new_line_content": "    1      Error: can't read requested characters",
          "content_same": false
        },
        {
          "line": 960,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"_my_b_read_r\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"_my_b_read_r\");",
          "new_line_content": "  my_off_t pos_in_file;",
          "content_same": false
        },
        {
          "line": 1473,
          "old_api": "*pre_read)(info)",
          "new_api": null,
          "old_text": "*pre_read)(info)",
          "new_text": null,
          "old_line_content": "    (*pre_read)(info);",
          "new_line_content": "  byte buff;",
          "content_same": false
        },
        {
          "line": 962,
          "old_api": "uint) (cache->read_end - cache->read_pos)",
          "new_api": null,
          "old_text": "uint) (cache->read_end - cache->read_pos)",
          "new_text": null,
          "old_line_content": "  if ((left_length= (uint) (cache->read_end - cache->read_pos)))",
          "new_line_content": "  IO_CACHE_SHARE *cshare= cache->share;",
          "content_same": false
        },
        {
          "line": 1474,
          "old_api": "*(info)->read_function)(info,&buff,1)",
          "new_api": null,
          "old_text": "*(info)->read_function)(info,&buff,1)",
          "new_text": null,
          "old_line_content": "  if ((*(info)->read_function)(info,&buff,1))",
          "new_line_content": "  IO_CACHE_CALLBACK pre_read,post_read;",
          "content_same": false
        },
        {
          "line": 964,
          "old_api": "DBUG_ASSERT",
          "new_api": null,
          "old_text": "DBUG_ASSERT(Count >= left_length)",
          "new_text": null,
          "old_line_content": "    DBUG_ASSERT(Count >= left_length);\t/* User is not using my_b_read() */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 455,
          "old_api": "register",
          "new_api": null,
          "old_text": "register",
          "new_text": null,
          "old_line_content": "int _my_b_read(register IO_CACHE *info, byte *Buffer, uint Count)",
          "new_line_content": "    1      Error: can't read requested characters",
          "content_same": false
        },
        {
          "line": 459,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"_my_b_read\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"_my_b_read\");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 461,
          "old_api": "uint) (info->read_end-info->read_pos)",
          "new_api": null,
          "old_text": "uint) (info->read_end-info->read_pos)",
          "new_text": null,
          "old_line_content": "  if ((left_length=(uint) (info->read_end-info->read_pos)))",
          "new_line_content": "  my_off_t max_length, pos_in_file;",
          "content_same": false
        },
        {
          "line": 974,
          "old_api": "uint) (pos_in_file & (IO_SIZE-1))",
          "new_api": null,
          "old_text": "uint) (pos_in_file & (IO_SIZE-1))",
          "new_text": null,
          "old_line_content": "    diff_length= (uint) (pos_in_file & (IO_SIZE-1));",
          "new_line_content": "    int cnt, len;",
          "content_same": false
        },
        {
          "line": 463,
          "old_api": "DBUG_ASSERT",
          "new_api": null,
          "old_text": "DBUG_ASSERT(Count >= left_length)",
          "new_text": null,
          "old_line_content": "    DBUG_ASSERT(Count >= left_length);\t/* User is not using my_b_read() */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 975,
          "old_api": "IO_ROUND_UP",
          "new_api": null,
          "old_text": "IO_ROUND_UP(Count+diff_length)",
          "new_text": null,
          "old_line_content": "    length=IO_ROUND_UP(Count+diff_length)-diff_length;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1491,
          "old_api": "register",
          "new_api": null,
          "old_text": "register",
          "new_text": null,
          "old_line_content": "int _my_b_write(register IO_CACHE *info, const byte *Buffer, uint Count)",
          "new_line_content": "   -1 On error; my_errno contains error code.",
          "content_same": false
        },
        {
          "line": 470,
          "old_api": "uint) (info->read_end - info->buffer)",
          "new_api": null,
          "old_text": "uint) (info->read_end - info->buffer)",
          "new_text": null,
          "old_line_content": "  pos_in_file=info->pos_in_file+(uint) (info->read_end - info->buffer);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 985,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(1)",
          "new_text": null,
          "old_line_content": "      DBUG_RETURN(1);",
          "new_line_content": "    if (length == 0)",
          "content_same": false
        },
        {
          "line": 987,
          "old_api": "lock_io_cache",
          "new_api": null,
          "old_text": "lock_io_cache(cache, pos_in_file)",
          "new_text": null,
          "old_line_content": "    if (lock_io_cache(cache, pos_in_file))",
          "new_line_content": "      cache->error= (int) left_length;",
          "content_same": false
        },
        {
          "line": 1501,
          "old_api": "uint) (info->write_end - info->write_pos)",
          "new_api": null,
          "old_text": "uint) (info->write_end - info->write_pos)",
          "new_text": null,
          "old_line_content": "  rest_length=(uint) (info->write_end - info->write_pos);",
          "new_line_content": "    return info->error = -1;",
          "content_same": false
        },
        {
          "line": 1502,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(info->write_pos,Buffer,(size_t) rest_length)",
          "new_text": null,
          "old_line_content": "  memcpy(info->write_pos,Buffer,(size_t) rest_length);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 480,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(0)",
          "new_text": null,
          "old_line_content": "    if ((my_seek(info->file,pos_in_file,MY_SEEK_SET,MYF(0)) ",
          "new_line_content": "  */",
          "content_same": false
        },
        {
          "line": 1507,
          "old_api": "my_b_flush_io_cache",
          "new_api": null,
          "old_text": "my_b_flush_io_cache(info,1)",
          "new_text": null,
          "old_line_content": "  if (my_b_flush_io_cache(info,1))",
          "new_line_content": "  Count-=rest_length;",
          "content_same": false
        },
        {
          "line": 493,
          "old_api": "DBUG_ASSERT",
          "new_api": null,
          "old_text": "DBUG_ASSERT(my_errno != ESPIPE)",
          "new_text": null,
          "old_line_content": "      DBUG_ASSERT(my_errno != ESPIPE);",
          "new_line_content": "        info->file is a pipe or socket or FIFO.  We never should have tried",
          "content_same": false
        },
        {
          "line": 495,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(1)",
          "new_text": null,
          "old_line_content": "      DBUG_RETURN(1);",
          "new_line_content": "      */",
          "content_same": false
        },
        {
          "line": 1008,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(0)",
          "new_text": null,
          "old_line_content": "          if (my_seek(cache->file, pos_in_file, MY_SEEK_SET, MYF(0))",
          "new_line_content": "        */",
          "content_same": false
        },
        {
          "line": 1520,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(0)",
          "new_text": null,
          "old_line_content": "      if (my_seek(info->file,info->pos_in_file,MY_SEEK_SET,MYF(0)))",
          "new_line_content": "        \"seek_not_done\" to indicate this to other functions operating",
          "content_same": false
        },
        {
          "line": 506,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(1)",
          "new_text": null,
          "old_line_content": "      DBUG_RETURN(1);",
          "new_line_content": "    if (info->end_of_file <= pos_in_file)",
          "content_same": false
        },
        {
          "line": 499,
          "old_api": "uint) (pos_in_file & (IO_SIZE-1))",
          "new_api": null,
          "old_text": "uint) (pos_in_file & (IO_SIZE-1))",
          "new_text": null,
          "old_line_content": "  diff_length=(uint) (pos_in_file & (IO_SIZE-1));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 500,
          "old_api": "uint) (IO_SIZE+(IO_SIZE-diff_length))",
          "new_api": null,
          "old_text": "uint) (IO_SIZE+(IO_SIZE-diff_length))",
          "new_text": null,
          "old_line_content": "  if (Count >= (uint) (IO_SIZE+(IO_SIZE-diff_length)))",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1012,
          "old_api": "unlock_io_cache",
          "new_api": null,
          "old_text": "unlock_io_cache(cache)",
          "new_text": null,
          "old_line_content": "            unlock_io_cache(cache);",
          "new_line_content": "              == MY_FILEPOS_ERROR)",
          "content_same": false
        },
        {
          "line": 1013,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(1)",
          "new_text": null,
          "old_line_content": "            DBUG_RETURN(1);",
          "new_line_content": "          {",
          "content_same": false
        },
        {
          "line": 1527,
          "old_api": "my_write",
          "new_api": null,
          "old_text": "my_write(info->file,Buffer,(uint) length,info->myflags | MY_NABP)",
          "new_text": null,
          "old_line_content": "    if (my_write(info->file,Buffer,(uint) length,info->myflags | MY_NABP))",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 1018,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"io_cache_share\", (\"read %d bytes\", len))",
          "new_text": null,
          "old_line_content": "      DBUG_PRINT(\"io_cache_share\", (\"read %d bytes\", len));",
          "new_line_content": "        }",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 41,
      "total_additions": 211,
      "total_deletions": 211,
      "total_api_changes": 463
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 7,
        "api_related_lines": 463,
        "non_api_lines": 3,
        "non_api_line_numbers": [
          241,
          236,
          239
        ]
      }
    },
    "api_calls_before": 288,
    "api_calls_after": 288,
    "diff_info": {
      "added_lines": 7,
      "removed_lines": 4,
      "total_diff_lines": 23
    }
  }
}
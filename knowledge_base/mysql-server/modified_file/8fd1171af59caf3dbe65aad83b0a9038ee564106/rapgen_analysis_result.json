{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/8fd1171af59caf3dbe65aad83b0a9038ee564106",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/8fd1171af59caf3dbe65aad83b0a9038ee564106/before.cc",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/8fd1171af59caf3dbe65aad83b0a9038ee564106/after.cc",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/8fd1171af59caf3dbe65aad83b0a9038ee564106/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 3576,
          "old_api": "lock",
          "new_api": "get_active_roles",
          "old_text": "acl_cache_lock.lock(!no_errors)",
          "new_text": "sctx->get_active_roles()->size()",
          "old_line_content": "  if (!acl_cache_lock.lock(!no_errors))",
          "new_line_content": "  if (sctx->get_active_roles()->size() == 0)",
          "content_same": false
        },
        {
          "line": 3589,
          "old_api": "get_db_name",
          "new_api": "security_context",
          "old_text": "get_cached_table_access(&t_ref->grant.m_internal,\n                              t_ref->get_db_name(),\n                              t_ref->get_table_name())",
          "new_text": "thd->security_context()",
          "old_line_content": "      get_cached_table_access(&t_ref->grant.m_internal,",
          "new_line_content": "                                          thd->security_context();",
          "content_same": false
        },
        {
          "line": 3620,
          "old_api": "is_temporary_table",
          "new_api": "is_derived",
          "old_text": "is_temporary_table(t_ref)",
          "new_text": "t_ref->is_derived()",
          "old_line_content": "    if (is_temporary_table(t_ref))",
          "new_line_content": "        t_ref->is_derived() || t_ref->schema_table)",
          "content_same": false
        },
        {
          "line": 3641,
          "old_api": "get_table_name",
          "new_api": "get_db_name",
          "old_text": "t_ref->get_table_name()",
          "new_text": "t_ref->get_db_name()",
          "old_line_content": "                                     strlen(t_ref->get_table_name())});",
          "new_line_content": "        sctx->table_and_column_acls({t_ref->get_db_name(),",
          "content_same": false
        },
        {
          "line": 3643,
          "old_api": "get_db_name",
          "new_api": "get_table_name",
          "old_text": "DBUG_PRINT(\"info\",\n                 (\"Acl_map table %s.%s has access %lu\",\n                  t_ref->get_db_name(), t_ref->get_table_name(),\n                  aggr.table_access))",
          "new_text": "t_ref->get_table_name()",
          "old_line_content": "      DBUG_PRINT(\"info\",",
          "new_line_content": "                                    {t_ref->get_table_name(),",
          "content_same": false
        },
        {
          "line": 3666,
          "old_api": "get_table_name",
          "new_api": "get_db_name",
          "old_text": "t_ref->get_table_name()",
          "new_text": "DBUG_PRINT(\"info\",(\"Access not denied because of column acls for %s.%s.\"\n                           \"want_access= %lu, grant.privilege= %lu\",\n                           t_ref->get_db_name(),\n                           t_ref->get_table_name(),\n                           want_access,\n                           t_ref->grant.privilege))",
          "old_line_content": "                           t_ref->get_table_name(),",
          "new_line_content": "        DBUG_PRINT(\"info\",(\"Access not denied because of column acls for %s.%s.\"",
          "content_same": false
        },
        {
          "line": 3685,
          "old_api": "priv_user",
          "new_api": "host",
          "old_text": "sctx->priv_user()",
          "new_text": "sctx->host()",
          "old_line_content": "                                                  sctx->priv_user().str,",
          "new_line_content": "      GRANT_TABLE *grant_table= table_hash_search(sctx->host().str,",
          "content_same": false
        },
        {
          "line": 3686,
          "old_api": "get_table_name",
          "new_api": "ip",
          "old_text": "t_ref->get_table_name()",
          "new_text": "sctx->ip()",
          "old_line_content": "                                                  t_ref->get_table_name(),",
          "new_line_content": "                                                  sctx->ip().str,",
          "content_same": false
        },
        {
          "line": 3729,
          "old_api": "priv_user",
          "new_api": "get_privilege_desc",
          "old_text": "sctx->priv_user()",
          "new_text": "get_privilege_desc(command, sizeof(command), want_access)",
          "old_line_content": "             sctx->priv_user().str,",
          "new_line_content": "    get_privilege_desc(command, sizeof(command), want_access);",
          "content_same": false
        },
        {
          "line": 3730,
          "old_api": "host_or_ip",
          "new_api": "MYF",
          "old_text": "sctx->host_or_ip()",
          "new_text": "MYF(0)",
          "old_line_content": "             sctx->host_or_ip().str,",
          "new_line_content": "    my_error(ER_TABLEACCESS_DENIED_ERROR, MYF(0),",
          "content_same": false
        },
        {
          "line": 3733,
          "old_api": "DBUG_RETURN",
          "new_api": "host_or_ip",
          "old_text": "DBUG_RETURN(TRUE)",
          "new_text": "sctx->host_or_ip()",
          "old_line_content": "  DBUG_RETURN(TRUE);",
          "new_line_content": "             sctx->host_or_ip().str,",
          "content_same": false
        },
        {
          "line": 3776,
          "old_api": "get_active_roles",
          "new_api": "DBUG_RETURN",
          "old_text": "sctx->get_active_roles()->size()",
          "new_text": "DBUG_RETURN(true)",
          "old_line_content": "  if (sctx->get_active_roles()->size() != 0)",
          "new_line_content": "    DBUG_RETURN(true);",
          "content_same": false
        },
        {
          "line": 3781,
          "old_api": "strlen",
          "new_api": "DBUG_ASSERT",
          "old_text": "strlen(db_name)",
          "new_text": "DBUG_ASSERT(grant->grant_table == 0)",
          "old_line_content": "                                   strlen(db_name)},",
          "new_line_content": "    DBUG_ASSERT(grant->grant_table == 0);",
          "content_same": false
        },
        {
          "line": 3783,
          "old_api": "strlen",
          "new_api": "table_and_column_acls",
          "old_text": "strlen(table_name)",
          "new_text": "sctx->table_and_column_acls({(const char *)db_name,\n                                   strlen(db_name)},\n                                  {(const char*)table_name,\n                                    strlen(table_name)})",
          "old_line_content": "                                    strlen(table_name)});",
          "new_line_content": "      sctx->table_and_column_acls({(const char *)db_name,",
          "content_same": false
        },
        {
          "line": 3786,
          "old_api": "end",
          "new_api": "strlen",
          "old_text": "agg.columns.end()",
          "new_text": "strlen(table_name)",
          "old_line_content": "    if (it != agg.columns.end())",
          "new_line_content": "                                    strlen(table_name)});",
          "content_same": false
        },
        {
          "line": 3817,
          "old_api": "DBUG_RETURN",
          "new_api": "column_hash_search",
          "old_text": "DBUG_RETURN(false)",
          "new_text": "column_hash_search(grant_table, name, length)",
          "old_line_content": "      DBUG_RETURN(false);",
          "new_line_content": "    grant_column=column_hash_search(grant_table, name, length);",
          "content_same": false
        },
        {
          "line": 3826,
          "old_api": "priv_user",
          "new_api": "get_privilege_desc",
          "old_text": "sctx->priv_user()",
          "new_text": "get_privilege_desc(command, sizeof(command), want_privilege)",
          "old_line_content": "           sctx->priv_user().str,",
          "new_line_content": "  get_privilege_desc(command, sizeof(command), want_privilege);",
          "content_same": false
        },
        {
          "line": 3827,
          "old_api": "host_or_ip",
          "new_api": "MYF",
          "old_text": "sctx->host_or_ip()",
          "new_text": "MYF(0)",
          "old_line_content": "           sctx->host_or_ip().str,",
          "new_line_content": "  my_error(ER_COLUMNACCESS_DENIED_ERROR, MYF(0),",
          "content_same": false
        },
        {
          "line": 3830,
          "old_api": "DBUG_RETURN",
          "new_api": "host_or_ip",
          "old_text": "DBUG_RETURN(TRUE)",
          "new_text": "sctx->host_or_ip()",
          "old_line_content": "  DBUG_RETURN(TRUE);",
          "new_line_content": "           sctx->host_or_ip().str,",
          "content_same": false
        },
        {
          "line": 3872,
          "old_api": "is_table_function",
          "new_api": "DBUG_ASSERT",
          "old_text": "table_ref->is_table_function()",
          "new_text": "DBUG_ASSERT(want_privilege)",
          "old_line_content": "      table_ref->is_table_function())",
          "new_line_content": "  DBUG_ASSERT(want_privilege);",
          "content_same": false
        },
        {
          "line": 3875,
          "old_api": "DBUG_RETURN",
          "new_api": "is_table_function",
          "old_text": "DBUG_RETURN(false)",
          "new_text": "table_ref->is_table_function()",
          "old_line_content": "    DBUG_RETURN(false);",
          "new_line_content": "      table_ref->is_table_function())",
          "content_same": false
        },
        {
          "line": 3890,
          "old_api": "strlen",
          "new_api": "get_active_roles",
          "old_text": "strlen(table_name)",
          "new_text": "sctx->get_active_roles()->size()",
          "old_line_content": "                                    {table_name, strlen(table_name)});",
          "new_line_content": "      if (sctx->get_active_roles()->size() > 0)",
          "content_same": false
        },
        {
          "line": 3898,
          "old_api": "DBUG_RETURN",
          "new_api": "get_column_grant",
          "old_text": "DBUG_RETURN(false)",
          "new_text": "get_column_grant(thd, grant, db_name, table_name, name)",
          "old_line_content": "        DBUG_RETURN(false);",
          "new_line_content": "        view_privs= get_column_grant(thd, grant, db_name, table_name, name);",
          "content_same": false
        },
        {
          "line": 3924,
          "old_api": "check_grant_column",
          "new_api": "strcmp",
          "old_text": "check_grant_column(thd, grant, db_name, table_name, name,\n                         length, sctx, want_privilege)",
          "new_text": "strcmp(table_name, table_ref->table->s->table_name.str)",
          "old_line_content": "  if (check_grant_column(thd, grant, db_name, table_name, name,",
          "new_line_content": "                strcmp(table_name, table_ref->table->s->table_name.str) == 0);",
          "content_same": false
        },
        {
          "line": 3927,
          "old_api": "DBUG_RETURN",
          "new_api": "check_grant_column",
          "old_text": "DBUG_RETURN(false)",
          "new_text": "check_grant_column(thd, grant, db_name, table_name, name,\n                         length, sctx, want_privilege)",
          "old_line_content": "  DBUG_RETURN(false);",
          "new_line_content": "  if (check_grant_column(thd, grant, db_name, table_name, name,",
          "content_same": false
        },
        {
          "line": 3969,
          "old_api": "next",
          "new_api": "lock",
          "old_text": "fields->next()",
          "new_text": "acl_cache_lock.lock()",
          "old_line_content": "  for (; !fields->end_of_fields(); fields->next())",
          "new_line_content": "  if (!acl_cache_lock.lock())",
          "content_same": false
        },
        {
          "line": 3976,
          "old_api": "get_db_name",
          "new_api": "get_table_name",
          "old_text": "fields->get_db_name()",
          "new_text": "fields->get_table_name()",
          "old_line_content": "      db_name= fields->get_db_name();",
          "new_line_content": "    if (table_name != fields->get_table_name())",
          "content_same": false
        },
        {
          "line": 3979,
          "old_api": "strlen",
          "new_api": "get_db_name",
          "old_text": "strlen(db_name)",
          "new_text": "fields->get_db_name()",
          "old_line_content": "        LEX_CSTRING str_db_name= { db_name, strlen(db_name) };",
          "new_line_content": "      db_name= fields->get_db_name();",
          "content_same": false
        },
        {
          "line": 3984,
          "old_api": "grant",
          "new_api": "security_context",
          "old_text": "fields->grant()",
          "new_text": "thd->security_context()->table_and_column_acls(str_db_name,\n                                                             str_table_name)",
          "old_line_content": "        grant= fields->grant();",
          "new_line_content": "        aggr= thd->security_context()->table_and_column_acls(str_db_name,",
          "content_same": false
        },
        {
          "line": 4069,
          "old_api": "MYF",
          "new_api": "priv_user",
          "old_text": "MYF(0)",
          "new_text": "sctx->priv_user()",
          "old_line_content": "    my_error(ER_COLUMNACCESS_DENIED_ERROR, MYF(0),",
          "new_line_content": "             command, sctx->priv_user().str,",
          "content_same": false
        },
        {
          "line": 4072,
          "old_api": "host_or_ip",
          "new_api": "MYF",
          "old_text": "sctx->host_or_ip()",
          "new_text": "MYF(0)",
          "old_line_content": "             sctx->host_or_ip().str,",
          "new_line_content": "    my_error(ER_COLUMNACCESS_DENIED_ERROR, MYF(0),",
          "content_same": false
        },
        {
          "line": 4088,
          "old_api": "get_active_roles",
          "new_api": "security_context",
          "old_text": "sctx->get_active_roles()->size()",
          "new_text": "thd->security_context()",
          "old_line_content": "  if (sctx->get_active_roles()->size() != 0 && db != 0)",
          "new_line_content": "  Security_context *sctx= thd->security_context();",
          "content_same": false
        },
        {
          "line": 4091,
          "old_api": "strlen",
          "new_api": "get_active_roles",
          "old_text": "strlen(db)",
          "new_text": "sctx->get_active_roles()->size()",
          "old_line_content": "    ulong acl= sctx->db_acl({db, strlen(db)});",
          "new_line_content": "  if (sctx->get_active_roles()->size() != 0 && db != 0)",
          "content_same": false
        },
        {
          "line": 4101,
          "old_api": "strcmp",
          "new_api": "get",
          "old_text": "strcmp(item->db, db)",
          "new_text": "key_and_value.second.get()",
          "old_line_content": "          strcmp(item->db, db) == 0 &&",
          "new_line_content": "      GRANT_NAME *item= key_and_value.second.get();",
          "content_same": false
        },
        {
          "line": 4103,
          "old_api": "ip",
          "new_api": "priv_user",
          "old_text": "sctx->ip()",
          "new_text": "sctx->priv_user()",
          "old_line_content": "                                      sctx->ip().str))",
          "new_line_content": "      if (strcmp(item->user, sctx->priv_user().str) == 0 &&",
          "content_same": false
        },
        {
          "line": 4105,
          "old_api": "DBUG_RETURN",
          "new_api": "host",
          "old_text": "DBUG_RETURN(FALSE)",
          "new_text": "sctx->host()",
          "old_line_content": "        DBUG_RETURN(FALSE);",
          "new_line_content": "          item->host.compare_hostname(sctx->host().str,",
          "content_same": false
        },
        {
          "line": 4147,
          "old_api": "get_active_roles",
          "new_api": "priv_user",
          "old_text": "sctx->get_active_roles()->size()",
          "new_text": "sctx->priv_user()",
          "old_line_content": "  if (sctx->get_active_roles()->size() > 0)",
          "new_line_content": "  LEX_CSTRING priv_user= sctx->priv_user();",
          "content_same": false
        },
        {
          "line": 4150,
          "old_api": "db_acl",
          "new_api": "get_active_roles",
          "old_text": "sctx->db_acl({db, db_len})",
          "new_text": "sctx->get_active_roles()->size()",
          "old_line_content": "    ulong db_access= sctx->db_acl({db, db_len});",
          "new_line_content": "  if (sctx->get_active_roles()->size() > 0)",
          "content_same": false
        },
        {
          "line": 4152,
          "old_api": "DBUG_RETURN",
          "new_api": "strlen",
          "old_text": "DBUG_RETURN(0)",
          "new_text": "strlen(db)",
          "old_line_content": "      DBUG_RETURN(0);",
          "new_line_content": "    size_t db_len= strlen(db);",
          "content_same": false
        },
        {
          "line": 4153,
          "old_api": "has_any_table_acl",
          "new_api": "db_acl",
          "old_text": "has_any_table_acl(sctx, {db, db_len})",
          "new_text": "sctx->db_acl({db, db_len})",
          "old_line_content": "    DBUG_RETURN(!has_any_table_acl(sctx, {db, db_len}) &&",
          "new_line_content": "    ulong db_access= sctx->db_acl({db, db_len});",
          "content_same": false
        },
        {
          "line": 4157,
          "old_api": "to_string",
          "new_api": "has_any_routine_acl",
          "old_text": "to_string(priv_user)",
          "new_text": "has_any_routine_acl(sctx, {db, db_len})",
          "old_line_content": "  std::string key= to_string(priv_user);",
          "new_line_content": "                !has_any_routine_acl(sctx, {db, db_len}));",
          "content_same": false
        },
        {
          "line": 4160,
          "old_api": "push_back",
          "new_api": "to_string",
          "old_text": "key.push_back('\\0')",
          "new_text": "to_string(priv_user)",
          "old_line_content": "  key.push_back('\\0');",
          "new_line_content": "  std::string key= to_string(priv_user);",
          "content_same": false
        },
        {
          "line": 4163,
          "old_api": "lock",
          "new_api": "push_back",
          "old_text": "acl_cache_lock.lock()",
          "new_text": "key.push_back('\\0')",
          "old_line_content": "  if (!acl_cache_lock.lock())",
          "new_line_content": "  key.push_back('\\0');",
          "content_same": false
        },
        {
          "line": 4171,
          "old_api": "ip",
          "new_api": "get",
          "old_text": "sctx->ip()",
          "new_text": "key_and_value.second.get()",
          "old_line_content": "                                           sctx->ip().str))",
          "new_line_content": "    GRANT_TABLE *grant_table= key_and_value.second.get();",
          "content_same": false
        },
        {
          "line": 4174,
          "old_api": "DBUG_PRINT",
          "new_api": "ip",
          "old_text": "DBUG_PRINT(\"info\",(\"Detected table level acl in column_priv_hash\"))",
          "new_text": "sctx->ip()",
          "old_line_content": "      DBUG_PRINT(\"info\",(\"Detected table level acl in column_priv_hash\"));",
          "new_line_content": "                                           sctx->ip().str))",
          "content_same": false
        },
        {
          "line": 4184,
          "old_api": "get",
          "new_api": "DBUG_PRINT",
          "old_text": "func_priv_hash.get()",
          "new_text": "DBUG_PRINT(\"info\",(\"No table level acl in column_priv_hash; checking \"\n                       \"for schema level acls\"))",
          "old_line_content": "           check_grant_db_routine(thd, db, func_priv_hash.get());",
          "new_line_content": "    DBUG_PRINT(\"info\",(\"No table level acl in column_priv_hash; checking \"",
          "content_same": false
        },
        {
          "line": 4187,
          "old_api": "DBUG_RETURN",
          "new_api": "get",
          "old_text": "DBUG_RETURN(error)",
          "new_text": "func_priv_hash.get()",
          "old_line_content": "  DBUG_RETURN(error);",
          "new_line_content": "           check_grant_db_routine(thd, db, func_priv_hash.get());",
          "content_same": false
        },
        {
          "line": 4216,
          "old_api": "DBUG_ENTER",
          "new_api": "priv_user",
          "old_text": "DBUG_ENTER(\"check_grant_routine\")",
          "new_text": "sctx->priv_user()",
          "old_line_content": "  DBUG_ENTER(\"check_grant_routine\");",
          "new_line_content": "  char *user= (char *) sctx->priv_user().str;",
          "content_same": false
        },
        {
          "line": 4218,
          "old_api": "master_access",
          "new_api": "security_context",
          "old_text": "sctx->master_access()",
          "new_text": "thd->security_context()->get_active_roles()->size()",
          "old_line_content": "  want_access&= ~sctx->master_access();",
          "new_line_content": "  bool has_roles= thd->security_context()->get_active_roles()->size() > 0;",
          "content_same": false
        },
        {
          "line": 4223,
          "old_api": "lock",
          "new_api": "DBUG_RETURN",
          "old_text": "acl_cache_lock.lock()",
          "new_text": "DBUG_RETURN(false)",
          "old_line_content": "  if (!acl_cache_lock.lock())",
          "new_line_content": "    DBUG_RETURN(false);                             // ok",
          "content_same": false
        },
        {
          "line": 4283,
          "old_api": "DBUG_RETURN",
          "new_api": "MYF",
          "old_text": "DBUG_RETURN(true)",
          "new_text": "MYF(0)",
          "old_line_content": "  DBUG_RETURN(true);",
          "new_line_content": "    my_error(ER_PROCACCESS_DENIED_ERROR, MYF(0),",
          "content_same": false
        },
        {
          "line": 4308,
          "old_api": "security_context",
          "new_api": "DBUG_ENTER",
          "old_text": "thd->security_context()",
          "new_text": "DBUG_ENTER(\"check_routine_level_acl\")",
          "old_line_content": "  Security_context *sctx= thd->security_context();",
          "new_line_content": "  DBUG_ENTER(\"check_routine_level_acl\");",
          "content_same": false
        },
        {
          "line": 4313,
          "old_api": "priv_host",
          "new_api": "lock",
          "old_text": "sctx->priv_host()",
          "new_text": "acl_cache_lock.lock(false)",
          "old_line_content": "  if ((grant_proc= routine_hash_search(sctx->priv_host().str,",
          "new_line_content": "  if (!acl_cache_lock.lock(false))",
          "content_same": false
        },
        {
          "line": 4318,
          "old_api": "DBUG_RETURN",
          "new_api": "priv_user",
          "old_text": "DBUG_RETURN(no_routine_acl)",
          "new_text": "sctx->priv_user()",
          "old_line_content": "  DBUG_RETURN(no_routine_acl);",
          "new_line_content": "                                       sctx->priv_user().str,",
          "content_same": false
        },
        {
          "line": 4337,
          "old_api": "host",
          "new_api": "lock",
          "old_text": "sctx->host()",
          "new_text": "acl_cache_lock.lock(false)",
          "old_line_content": "  grant_table= table_hash_search(sctx->host().str,",
          "new_line_content": "  if (!acl_cache_lock.lock(false))",
          "content_same": false
        },
        {
          "line": 4377,
          "old_api": "lock",
          "new_api": "security_context",
          "old_text": "acl_cache_lock.lock(false)",
          "new_text": "thd->security_context()",
          "old_line_content": "  if (!acl_cache_lock.lock(false))",
          "new_line_content": "  Security_context *sctx= thd->security_context();",
          "content_same": false
        },
        {
          "line": 4400,
          "old_api": "end",
          "new_api": "append",
          "old_text": "aggr.columns.end()",
          "new_text": "q_name.append(field_name)",
          "old_line_content": "    if (it != aggr.columns.end())",
          "new_line_content": "    q_name.append(field_name);",
          "content_same": false
        },
        {
          "line": 4620,
          "old_api": "get_database_access_map",
          "new_api": "get_host",
          "old_text": "get_database_access_map(acl_user, db_map, db_wild_map)",
          "new_text": "DBUG_PRINT(\"info\",(\"Global access for acl_user %s@%s is %lu\",acl_user->user,\n                     acl_user->host.get_host(),acl_user->access))",
          "old_line_content": "  get_database_access_map(acl_user, db_map, db_wild_map);",
          "new_line_content": "  DBUG_PRINT(\"info\",(\"Global access for acl_user %s@%s is %lu\",acl_user->user,",
          "content_same": false
        },
        {
          "line": 4642,
          "old_api": "boost::edges(*g_granted_roles)",
          "new_api": "get_mandatory_roles",
          "old_text": "boost::edges(*g_granted_roles)",
          "new_text": "get_mandatory_roles(&mandatory_roles)",
          "old_line_content": "  boost::tie(ei, ei_end) = boost::edges(*g_granted_roles);",
          "new_line_content": "  get_mandatory_roles(&mandatory_roles);",
          "content_same": false
        },
        {
          "line": 4645,
          "old_api": "create_authid_str_from",
          "new_api": "boost::edges(*g_granted_roles)",
          "old_text": "create_authid_str_from(acl_user)",
          "new_text": "boost::edges(*g_granted_roles)",
          "old_line_content": "  std::string user_key= create_authid_str_from(acl_user);",
          "new_line_content": "  boost::tie(ei, ei_end) = boost::edges(*g_granted_roles);",
          "content_same": false
        },
        {
          "line": 4681,
          "old_api": "end",
          "new_api": "insert",
          "old_text": "all_granted_roles.end()",
          "new_text": "all_active_roles.insert(id)",
          "old_line_content": "      std::set_intersection(all_granted_roles.begin(), all_granted_roles.end(),",
          "new_line_content": "        all_active_roles.insert(id);",
          "content_same": false
        },
        {
          "line": 4684,
          "old_api": "begin",
          "new_api": "end",
          "old_text": "granted_active_roles.begin()",
          "new_text": "all_granted_roles.end()",
          "old_line_content": "                                          granted_active_roles.begin()));",
          "new_line_content": "      std::set_intersection(all_granted_roles.begin(), all_granted_roles.end(),",
          "content_same": false
        },
        {
          "line": 4692,
          "old_api": "host",
          "new_api": "user",
          "old_text": "rid.host().c_str()",
          "new_text": "rid.user().c_str()",
          "old_line_content": "        append_identifier(&rolestr,rid.host().c_str(),",
          "new_line_content": "        append_identifier(&rolestr, rid.user().c_str(),",
          "content_same": false
        },
        {
          "line": 4693,
          "old_api": "host",
          "new_api": "user",
          "old_text": "rid.host().length()",
          "new_text": "rid.user().length()",
          "old_line_content": "                          rid.host().length());",
          "new_line_content": "                          rid.user().length());",
          "content_same": false
        },
        {
          "line": 4695,
          "old_api": "c_ptr_quick",
          "new_api": "host",
          "old_text": "rolestr.c_ptr_quick()",
          "new_text": "rid.host().c_str()",
          "old_line_content": "            g_authid_to_vertex->find(rolestr.c_ptr_quick());",
          "new_line_content": "        append_identifier(&rolestr,rid.host().c_str(),",
          "content_same": false
        },
        {
          "line": 4696,
          "old_api": "end",
          "new_api": "host",
          "old_text": "g_authid_to_vertex->end()",
          "new_text": "rid.host().length()",
          "old_line_content": "        if (rindex == g_authid_to_vertex->end())",
          "new_line_content": "                          rid.host().length());",
          "content_same": false
        },
        {
          "line": 4736,
          "old_api": "boost::edge_capacity_t()",
          "new_api": "boost::edge(user_vertex, active_role_vertex, *g_granted_roles)",
          "old_text": "boost::edge_capacity_t()",
          "new_text": "boost::edge(user_vertex, active_role_vertex, *g_granted_roles)",
          "old_line_content": "          int with_admin_opt= boost::get(boost::edge_capacity_t(),",
          "new_line_content": "          boost::edge(user_vertex, active_role_vertex, *g_granted_roles);",
          "content_same": false
        },
        {
          "line": 4780,
          "old_api": "lock",
          "new_api": "DBUG_RETURN",
          "old_text": "acl_cache_lock.lock()",
          "new_text": "DBUG_RETURN(true)",
          "old_line_content": "  if (!acl_cache_lock.lock())",
          "new_line_content": "    DBUG_RETURN(true);",
          "content_same": false
        },
        {
          "line": 4783,
          "old_api": "find_acl_user",
          "new_api": "lock",
          "old_text": "find_acl_user(lex_user->host.str, lex_user->user.str, TRUE)",
          "new_text": "acl_cache_lock.lock()",
          "old_line_content": "  acl_user= find_acl_user(lex_user->host.str, lex_user->user.str, TRUE);",
          "new_line_content": "  if (!acl_cache_lock.lock())",
          "content_same": false
        },
        {
          "line": 4786,
          "old_api": "MYF",
          "new_api": "find_acl_user",
          "old_text": "MYF(0)",
          "new_text": "find_acl_user(lex_user->host.str, lex_user->user.str, TRUE)",
          "old_line_content": "    my_error(ER_NONEXISTING_GRANT, MYF(0),",
          "new_line_content": "  acl_user= find_acl_user(lex_user->host.str, lex_user->user.str, TRUE);",
          "content_same": false
        },
        {
          "line": 4799,
          "old_api": "end",
          "new_api": "get_granted_roles",
          "old_text": "granted_roles.end()",
          "new_text": "get_granted_roles(thd, lex_user, &granted_roles)",
          "old_line_content": "          granted_roles.end())",
          "new_line_content": "    get_granted_roles(thd, lex_user, &granted_roles);",
          "content_same": false
        },
        {
          "line": 4808,
          "old_api": "Role_id",
          "new_api": "auth_str",
          "old_text": "Role_id(role_ref.first, role_ref.second)",
          "new_text": "id.auth_str(&id_str)",
          "old_line_content": "                      return (Role_id(role_ref.first, role_ref.second) == id);",
          "new_line_content": "                    id.auth_str(&id_str);",
          "content_same": false
        },
        {
          "line": 4811,
          "old_api": "MYF",
          "new_api": "Role_id",
          "old_text": "MYF(0)",
          "new_text": "Role_id(role_ref.first, role_ref.second)",
          "old_line_content": "        my_error(ER_ROLE_NOT_GRANTED, MYF(0), role_ref.first.str,",
          "new_line_content": "                      return (Role_id(role_ref.first, role_ref.second) == id);",
          "content_same": false
        },
        {
          "line": 4824,
          "old_api": "push_back",
          "new_api": "strxmov",
          "old_text": "field_list.push_back(field)",
          "new_text": "strxmov(buff,\"Grants for \",lex_user->user.str,\"@\",\n          lex_user->host.str,NullS)",
          "old_line_content": "  field_list.push_back(field);",
          "new_line_content": "  strxmov(buff,\"Grants for \",lex_user->user.str,\"@\",",
          "content_same": false
        },
        {
          "line": 4828,
          "old_api": "DBUG_RETURN",
          "new_api": "send_result_metadata",
          "old_text": "DBUG_RETURN(true)",
          "new_text": "thd->send_result_metadata(&field_list,\n                                Protocol::SEND_NUM_ROWS | Protocol::SEND_EOF)",
          "old_line_content": "    DBUG_RETURN(true);",
          "new_line_content": "  if (thd->send_result_metadata(&field_list,",
          "content_same": false
        },
        {
          "line": 4848,
          "old_api": "charset",
          "new_api": "make_global_privilege_statement",
          "old_text": "output.charset()",
          "new_text": "make_global_privilege_statement(thd, access, acl_user, &output)",
          "old_line_content": "  protocol->store(output.ptr(),output.length(),output.charset());",
          "new_line_content": "  make_global_privilege_statement(thd, access, acl_user, &output);",
          "content_same": false
        },
        {
          "line": 4849,
          "old_api": "end_row",
          "new_api": "get_protocol",
          "old_text": "protocol->end_row()",
          "new_text": "thd->get_protocol()",
          "old_line_content": "  protocol->end_row();",
          "new_line_content": "  Protocol *protocol= thd->get_protocol();",
          "content_same": false
        },
        {
          "line": 4851,
          "old_api": "make_dynamic_privilege_statement",
          "new_api": "charset",
          "old_text": "make_dynamic_privilege_statement(thd, acl_user, protocol, dynamic_acl)",
          "new_text": "output.charset()",
          "old_line_content": "  make_dynamic_privilege_statement(thd, acl_user, protocol, dynamic_acl);",
          "new_line_content": "  protocol->store(output.ptr(),output.length(),output.charset());",
          "content_same": false
        },
        {
          "line": 4852,
          "old_api": "make_database_privilege_statement",
          "new_api": "end_row",
          "old_text": "make_database_privilege_statement(thd, acl_user, protocol, db_map,\n                                    db_wild_map)",
          "new_text": "protocol->end_row()",
          "old_line_content": "  make_database_privilege_statement(thd, acl_user, protocol, db_map,",
          "new_line_content": "  protocol->end_row();",
          "content_same": false
        },
        {
          "line": 4854,
          "old_api": "make_table_privilege_statement",
          "new_api": "make_dynamic_privilege_statement",
          "old_text": "make_table_privilege_statement(thd, acl_user, protocol, table_map)",
          "new_text": "make_dynamic_privilege_statement(thd, acl_user, protocol, dynamic_acl)",
          "old_line_content": "  make_table_privilege_statement(thd, acl_user, protocol, table_map);",
          "new_line_content": "  make_dynamic_privilege_statement(thd, acl_user, protocol, dynamic_acl);",
          "content_same": false
        },
        {
          "line": 4855,
          "old_api": "make_sp_privilege_statement",
          "new_api": "make_database_privilege_statement",
          "old_text": "make_sp_privilege_statement(thd, acl_user, protocol, sp_map, 0)",
          "new_text": "make_database_privilege_statement(thd, acl_user, protocol, db_map,\n                                    db_wild_map)",
          "old_line_content": "  make_sp_privilege_statement(thd, acl_user, protocol, sp_map, 0);",
          "new_line_content": "  make_database_privilege_statement(thd, acl_user, protocol, db_map,",
          "content_same": false
        },
        {
          "line": 4857,
          "old_api": "make_proxy_privilege_statement",
          "new_api": "make_table_privilege_statement",
          "old_text": "make_proxy_privilege_statement(thd, acl_user, protocol)",
          "new_text": "make_table_privilege_statement(thd, acl_user, protocol, table_map)",
          "old_line_content": "  make_proxy_privilege_statement(thd, acl_user, protocol);",
          "new_line_content": "  make_table_privilege_statement(thd, acl_user, protocol, table_map);",
          "content_same": false
        },
        {
          "line": 4858,
          "old_api": "make_roles_privilege_statement",
          "new_api": "make_sp_privilege_statement",
          "old_text": "make_roles_privilege_statement(thd, acl_user, protocol, granted_roles,\n                                 show_mandatory_roles)",
          "new_text": "make_sp_privilege_statement(thd, acl_user, protocol, sp_map, 0)",
          "old_line_content": "  make_roles_privilege_statement(thd, acl_user, protocol, granted_roles,",
          "new_line_content": "  make_sp_privilege_statement(thd, acl_user, protocol, sp_map, 0);",
          "content_same": false
        },
        {
          "line": 4860,
          "old_api": "make_with_admin_privilege_statement",
          "new_api": "make_proxy_privilege_statement",
          "old_text": "make_with_admin_privilege_statement(thd, acl_user, protocol, with_admin_acl,\n                                      granted_roles)",
          "new_text": "make_proxy_privilege_statement(thd, acl_user, protocol)",
          "old_line_content": "  make_with_admin_privilege_statement(thd, acl_user, protocol, with_admin_acl,",
          "new_line_content": "  make_proxy_privilege_statement(thd, acl_user, protocol);",
          "content_same": false
        },
        {
          "line": 4863,
          "old_api": "my_eof",
          "new_api": "make_with_admin_privilege_statement",
          "old_text": "my_eof(thd)",
          "new_text": "make_with_admin_privilege_statement(thd, acl_user, protocol, with_admin_acl,\n                                      granted_roles)",
          "old_line_content": "  my_eof(thd);",
          "new_line_content": "  make_with_admin_privilege_statement(thd, acl_user, protocol, with_admin_acl,",
          "content_same": false
        },
        {
          "line": 4873,
          "old_api": "boost::vertex_name_t()",
          "new_api": "lock",
          "old_text": "boost::vertex_name_t()",
          "new_text": "acl_cache_lock.lock()",
          "old_line_content": "  dp.property(\"name\", boost::get(boost::vertex_name_t(), *g_granted_roles));",
          "new_line_content": "  if (!acl_cache_lock.lock())",
          "content_same": false
        },
        {
          "line": 4876,
          "old_api": "boost::write_graphml(ss, *g_granted_roles, dp, true)",
          "new_api": "boost::vertex_name_t()",
          "old_text": "boost::write_graphml(ss, *g_granted_roles, dp, true)",
          "new_text": "boost::vertex_name_t()",
          "old_line_content": "  boost::write_graphml(ss, *g_granted_roles, dp, true);",
          "new_line_content": "  dp.property(\"name\", boost::get(boost::vertex_name_t(), *g_granted_roles));",
          "content_same": false
        },
        {
          "line": 4877,
          "old_api": "str",
          "new_api": "boost::edge_capacity_t()",
          "old_text": "ss.str()",
          "new_text": "boost::edge_capacity_t()",
          "old_line_content": "  std::string out= ss.str();",
          "new_line_content": "  dp.property(\"color\", boost::get(boost::edge_capacity_t(), *g_granted_roles));",
          "content_same": false
        },
        {
          "line": 4917,
          "old_api": "strcmp",
          "new_api": "get_host",
          "old_text": "strcmp(lex_user.user.str, user)",
          "new_text": "acl_db->host.get_host()",
          "old_line_content": "      if (!strcmp(lex_user.user.str, user) &&",
          "new_line_content": "      if (!(host= acl_db->host.get_host()))",
          "content_same": false
        },
        {
          "line": 4920,
          "old_api": "replace_db_table",
          "new_api": "strcmp",
          "old_text": "replace_db_table(thd, table, acl_db->db, lex_user,\n                                  ~(ulong)0, true)",
          "new_text": "strcmp(lex_user.user.str, user)",
          "old_line_content": "        int ret= replace_db_table(thd, table, acl_db->db, lex_user,",
          "new_line_content": "      if (!strcmp(lex_user.user.str, user) &&",
          "content_same": false
        },
        {
          "line": 4993,
          "old_api": "get",
          "new_api": "next",
          "old_text": "it->second.get()",
          "new_text": "next(it)",
          "old_line_content": "      GRANT_TABLE *grant_table= it->second.get();",
          "new_line_content": "      next_it= next(it);",
          "content_same": false
        },
        {
          "line": 4996,
          "old_api": "get_host",
          "new_api": "get",
          "old_text": "grant_table->host.get_host()",
          "new_text": "it->second.get()",
          "old_line_content": "      if (!(host= grant_table->host.get_host()))",
          "new_line_content": "      GRANT_TABLE *grant_table= it->second.get();",
          "content_same": false
        },
        {
          "line": 4999,
          "old_api": "strcmp",
          "new_api": "get_host",
          "old_text": "strcmp(lex_user.user.str, user)",
          "new_text": "grant_table->host.get_host()",
          "old_line_content": "      if (!strcmp(lex_user.user.str, user) &&",
          "new_line_content": "      if (!(host= grant_table->host.get_host()))",
          "content_same": false
        },
        {
          "line": 5100,
          "old_api": "get",
          "new_api": "next",
          "old_text": "it->second.get()",
          "new_text": "next(it)",
          "old_line_content": "        GRANT_NAME *grant_proc= it->second.get();",
          "new_line_content": "        next_it= next(it);",
          "content_same": false
        },
        {
          "line": 5103,
          "old_api": "get_host",
          "new_api": "get",
          "old_text": "grant_proc->host.get_host()",
          "new_text": "it->second.get()",
          "old_line_content": "        if (!(host=grant_proc->host.get_host()))",
          "new_line_content": "        GRANT_NAME *grant_proc= it->second.get();",
          "content_same": false
        },
        {
          "line": 5106,
          "old_api": "strcmp",
          "new_api": "get_host",
          "old_text": "strcmp(lex_user.user.str,user)",
          "new_text": "grant_proc->host.get_host()",
          "old_line_content": "        if (!strcmp(lex_user.user.str,user) &&",
          "new_line_content": "        if (!(host=grant_proc->host.get_host()))",
          "content_same": false
        },
        {
          "line": 5109,
          "old_api": "replace_routine_table",
          "new_api": "strcmp",
          "old_text": "replace_routine_table(thd,grant_proc, procs_priv_table,\n                                         lex_user,\n                                         grant_proc->db,\n                                         grant_proc->tname,\n                                         is_proc,\n                                         ~(ulong)0, true)",
          "new_text": "strcmp(lex_user.user.str,user)",
          "old_line_content": "          int ret= replace_routine_table(thd,grant_proc, procs_priv_table,",
          "new_line_content": "        if (!strcmp(lex_user.user.str,user) &&",
          "content_same": false
        },
        {
          "line": 5172,
          "old_api": "lock",
          "new_api": "DBUG_RETURN",
          "old_text": "acl_cache_lock.lock()",
          "new_text": "DBUG_RETURN(ret != 1)",
          "old_line_content": "  if (!acl_cache_lock.lock())",
          "new_line_content": "    DBUG_RETURN(ret != 1);",
          "content_same": false
        },
        {
          "line": 5175,
          "old_api": "DBUG_RETURN",
          "new_api": "lock",
          "old_text": "DBUG_RETURN(true)",
          "new_text": "acl_cache_lock.lock()",
          "old_line_content": "    DBUG_RETURN(true);",
          "new_line_content": "  if (!acl_cache_lock.lock())",
          "content_same": false
        },
        {
          "line": 5246,
          "old_api": "log_and_commit_acl_ddl",
          "new_api": "is_error",
          "old_text": "log_and_commit_acl_ddl(thd, transactional_tables)",
          "new_text": "thd->is_error()",
          "old_line_content": "  result= log_and_commit_acl_ddl(thd, transactional_tables);",
          "new_line_content": "  if (result && !thd->is_error())",
          "content_same": false
        },
        {
          "line": 5249,
          "old_api": "DBUG_RETURN",
          "new_api": "log_and_commit_acl_ddl",
          "old_text": "DBUG_RETURN(result)",
          "new_text": "log_and_commit_acl_ddl(thd, transactional_tables)",
          "old_line_content": "  DBUG_RETURN(result);",
          "new_line_content": "  result= log_and_commit_acl_ddl(thd, transactional_tables);",
          "content_same": false
        },
        {
          "line": 5322,
          "old_api": "DBUG_RETURN",
          "new_api": "DBUG_ENTER",
          "old_text": "DBUG_RETURN(result != 1)",
          "new_text": "DBUG_ENTER(\"sp_revoke_privileges\")",
          "old_line_content": "    DBUG_RETURN(result != 1);",
          "new_line_content": "  DBUG_ENTER(\"sp_revoke_privileges\");",
          "content_same": false
        },
        {
          "line": 5325,
          "old_api": "lock",
          "new_api": "DBUG_RETURN",
          "old_text": "acl_cache_lock.lock()",
          "new_text": "DBUG_RETURN(result != 1)",
          "old_line_content": "  if (!acl_cache_lock.lock())",
          "new_line_content": "    DBUG_RETURN(result != 1);",
          "content_same": false
        },
        {
          "line": 5328,
          "old_api": "DBUG_RETURN",
          "new_api": "lock",
          "old_text": "DBUG_RETURN(true)",
          "new_text": "acl_cache_lock.lock()",
          "old_line_content": "    DBUG_RETURN(true);",
          "new_line_content": "  if (!acl_cache_lock.lock())",
          "content_same": false
        },
        {
          "line": 5331,
          "old_api": "push_internal_handler",
          "new_api": "DBUG_RETURN",
          "old_text": "thd->push_internal_handler(&error_handler)",
          "new_text": "DBUG_RETURN(true)",
          "old_line_content": "  thd->push_internal_handler(&error_handler);",
          "new_line_content": "    DBUG_RETURN(true);",
          "content_same": false
        },
        {
          "line": 5356,
          "old_api": "my_strcasecmp",
          "new_api": "next",
          "old_text": "my_strcasecmp(system_charset_info, grant_proc->tname, sp_name)",
          "new_text": "next(it)",
          "old_line_content": "          !my_strcasecmp(system_charset_info, grant_proc->tname, sp_name))",
          "new_line_content": "      next_it= next(it);",
          "content_same": false
        },
        {
          "line": 5363,
          "old_api": "get_host",
          "new_api": "strlen",
          "old_text": "grant_proc->host.get_host()",
          "new_text": "strlen(grant_proc->user)",
          "old_line_content": "        lex_user.host.length= grant_proc->host.get_host() ?",
          "new_line_content": "        lex_user.user.length= strlen(grant_proc->user);",
          "content_same": false
        },
        {
          "line": 5367,
          "old_api": "replace_routine_table",
          "new_api": "get_host",
          "old_text": "replace_routine_table(thd,grant_proc,tables[4].table,lex_user,\n                                grant_proc->db, grant_proc->tname,\n                                is_proc, ~(ulong)0, true)",
          "new_text": "grant_proc->host.get_host()",
          "old_line_content": "          replace_routine_table(thd,grant_proc,tables[4].table,lex_user,",
          "new_line_content": "          strlen(grant_proc->host.get_host()) : 0;",
          "content_same": false
        },
        {
          "line": 5389,
          "old_api": "pop_internal_handler",
          "new_api": "log_and_commit_acl_ddl",
          "old_text": "thd->pop_internal_handler()",
          "new_text": "log_and_commit_acl_ddl(thd, transactional_tables, NULL,\n                                  result, false, false)",
          "old_line_content": "  thd->pop_internal_handler();",
          "new_line_content": "  result|= log_and_commit_acl_ddl(thd, transactional_tables, NULL,",
          "content_same": false
        },
        {
          "line": 5420,
          "old_api": "DBUG_RETURN",
          "new_api": "DBUG_ENTER",
          "old_text": "DBUG_RETURN(TRUE)",
          "new_text": "DBUG_ENTER(\"sp_grant_privileges\")",
          "old_line_content": "    DBUG_RETURN(TRUE);",
          "new_line_content": "  DBUG_ENTER(\"sp_grant_privileges\");",
          "content_same": false
        },
        {
          "line": 5422,
          "old_api": "priv_user",
          "new_api": "alloc",
          "old_text": "sctx->priv_user()",
          "new_text": "thd->alloc(sizeof(st_lex_user))",
          "old_line_content": "  combo->user.str= (char *) sctx->priv_user().str;",
          "new_line_content": "  if (!(combo=(LEX_USER*) thd->alloc(sizeof(st_lex_user))))",
          "content_same": false
        },
        {
          "line": 5425,
          "old_api": "DBUG_RETURN",
          "new_api": "priv_user",
          "old_text": "DBUG_RETURN(TRUE)",
          "new_text": "sctx->priv_user()",
          "old_line_content": "    DBUG_RETURN(TRUE);",
          "new_line_content": "  combo->user.str= (char *) sctx->priv_user().str;",
          "content_same": false
        },
        {
          "line": 5427,
          "old_api": "priv_host",
          "new_api": "lock",
          "old_text": "sctx->priv_host()",
          "new_text": "acl_cache_lock.lock()",
          "old_line_content": "  if ((au= find_acl_user(combo->host.str= (char *) sctx->priv_host().str,",
          "new_line_content": "  if (!acl_cache_lock.lock())",
          "content_same": false
        },
        {
          "line": 5430,
          "old_api": "unlock",
          "new_api": "priv_host",
          "old_text": "acl_cache_lock.unlock()",
          "new_text": "sctx->priv_host()",
          "old_line_content": "  acl_cache_lock.unlock();",
          "new_line_content": "  if ((au= find_acl_user(combo->host.str= (char *) sctx->priv_host().str,",
          "content_same": false
        },
        {
          "line": 5434,
          "old_api": "unlock",
          "new_api": "DBUG_RETURN",
          "old_text": "acl_cache_lock.unlock()",
          "new_text": "DBUG_RETURN(TRUE)",
          "old_line_content": "  acl_cache_lock.unlock();",
          "new_line_content": "  DBUG_RETURN(TRUE);",
          "content_same": false
        },
        {
          "line": 5437,
          "old_api": "empty",
          "new_api": "unlock",
          "old_text": "user_list.empty()",
          "new_text": "acl_cache_lock.unlock()",
          "old_line_content": "  user_list.empty();",
          "new_line_content": "  acl_cache_lock.unlock();",
          "content_same": false
        },
        {
          "line": 5445,
          "old_api": "strlen",
          "new_api": "make_lex_string",
          "old_text": "strlen(combo->host.str)",
          "new_text": "thd->make_lex_string(&combo->user,\n                       combo->user.str, strlen(combo->user.str), 0)",
          "old_line_content": "                       combo->host.str, strlen(combo->host.str), 0);",
          "new_line_content": "  thd->make_lex_string(&combo->user,",
          "content_same": false
        },
        {
          "line": 5472,
          "old_api": "pop_internal_handler",
          "new_api": "push_internal_handler",
          "old_text": "thd->pop_internal_handler()",
          "new_text": "thd->push_internal_handler(&error_handler)",
          "old_line_content": "  thd->pop_internal_handler();",
          "new_line_content": "  thd->push_internal_handler(&error_handler);",
          "content_same": false
        },
        {
          "line": 5473,
          "old_api": "DBUG_RETURN",
          "new_api": "mysql_routine_grant",
          "old_text": "DBUG_RETURN(result)",
          "new_text": "mysql_routine_grant(thd, tables, is_proc, user_list,\n                              DEFAULT_CREATE_PROC_ACLS, FALSE, FALSE)",
          "old_line_content": "  DBUG_RETURN(result);",
          "new_line_content": "  result= mysql_routine_grant(thd, tables, is_proc, user_list,",
          "content_same": false
        },
        {
          "line": 5488,
          "old_api": "STRING_WITH_LEN",
          "new_api": "assert_acl_cache_read_lock",
          "old_text": "STRING_WITH_LEN(\"def\")",
          "new_text": "assert_acl_cache_read_lock(thd)",
          "old_line_content": "  table->field[1]->store(STRING_WITH_LEN(\"def\"), cs);",
          "new_line_content": " DBUG_ASSERT(assert_acl_cache_read_lock(thd));",
          "content_same": false
        },
        {
          "line": 5495,
          "old_api": "store",
          "new_api": "strlen",
          "old_text": "table->field[i++]->store(priv, priv_length, cs)",
          "new_text": "strlen(t_name)",
          "old_line_content": "  table->field[i++]->store(priv, priv_length, cs);",
          "new_line_content": "    table->field[i++]->store(t_name, strlen(t_name), cs);",
          "content_same": false
        },
        {
          "line": 5497,
          "old_api": "schema_table_store_record",
          "new_api": "store",
          "old_text": "schema_table_store_record(thd, table)",
          "new_text": "table->field[i++]->store(column, col_length, cs)",
          "old_line_content": "  return schema_table_store_record(thd, table);",
          "new_line_content": "    table->field[i++]->store(column, col_length, cs);",
          "content_same": false
        },
        {
          "line": 5518,
          "old_api": "priv_host",
          "new_api": "security_context",
          "old_text": "DBUG_PRINT(\"enter\", (\"Host: '%s', Ip: '%s', User: '%s', table: `%s`.`%s`\",\n                       sctx->priv_host().str, (sctx->ip().length ?\n                       sctx->ip().str : \"(NULL)\"),\n                       (priv_user.str ? priv_user.str : \"(NULL)\"),\n                       db, table))",
          "new_text": "thd->security_context()",
          "old_line_content": "  DBUG_PRINT(\"enter\", (\"Host: '%s', Ip: '%s', User: '%s', table: `%s`.`%s`\",",
          "new_line_content": "  Security_context *sctx= thd->security_context();",
          "content_same": false
        },
        {
          "line": 5519,
          "old_api": "ip",
          "new_api": "priv_user",
          "old_text": "sctx->ip()",
          "new_text": "sctx->priv_user()",
          "old_line_content": "                       sctx->priv_host().str, (sctx->ip().length ?",
          "new_line_content": "  LEX_CSTRING priv_user= sctx->priv_user();",
          "content_same": false
        },
        {
          "line": 5520,
          "old_api": "ip",
          "new_api": "DBUG_ENTER",
          "old_text": "sctx->ip()",
          "new_text": "DBUG_ENTER(\"fill_effective_table_privileges\")",
          "old_line_content": "                       sctx->ip().str : \"(NULL)\"),",
          "new_line_content": "  DBUG_ENTER(\"fill_effective_table_privileges\");",
          "content_same": false
        },
        {
          "line": 5535,
          "old_api": "get_active_roles",
          "new_api": "DBUG_PRINT",
          "old_text": "DBUG_PRINT(\"info\",(\"Effective table privileges are deduced from active roles\"\n                     \" (%lu)\",\n                     (unsigned long)sctx->get_active_roles()->size()))",
          "new_text": "DBUG_PRINT(\"info\", (\"privilege 0x%lx\", grant->privilege))",
          "old_line_content": "  DBUG_PRINT(\"info\",(\"Effective table privileges are deduced from active roles\"",
          "new_line_content": "    DBUG_PRINT(\"info\", (\"privilege 0x%lx\", grant->privilege));",
          "content_same": false
        },
        {
          "line": 5541,
          "old_api": "master_access",
          "new_api": "get_active_roles",
          "old_text": "sctx->master_access()",
          "new_text": "sctx->get_active_roles()->size()",
          "old_line_content": "    grant->privilege= sctx->master_access();",
          "new_line_content": "  if (sctx->get_active_roles()->size() > 0)",
          "content_same": false
        },
        {
          "line": 5544,
          "old_api": "db_acl",
          "new_api": "master_access",
          "old_text": "sctx->db_acl(str_db)",
          "new_text": "sctx->master_access()",
          "old_line_content": "    grant->privilege|= sctx->db_acl(str_db);",
          "new_line_content": "    grant->privilege= sctx->master_access();",
          "content_same": false
        },
        {
          "line": 5547,
          "old_api": "table_acl",
          "new_api": "db_acl",
          "old_text": "sctx->table_acl(str_db, str_table)",
          "new_text": "sctx->db_acl(str_db)",
          "old_line_content": "    grant->privilege|= sctx->table_acl(str_db, str_table);",
          "new_line_content": "    grant->privilege|= sctx->db_acl(str_db);",
          "content_same": false
        },
        {
          "line": 5550,
          "old_api": "get_active_roles",
          "new_api": "table_acl",
          "old_text": "sctx->get_active_roles()->at(0)",
          "new_text": "sctx->table_acl(str_db, str_table)",
          "old_line_content": "                       sctx->get_active_roles()->at(0).first.str,",
          "new_line_content": "    grant->privilege|= sctx->table_acl(str_db, str_table);",
          "content_same": false
        },
        {
          "line": 5559,
          "old_api": "ip",
          "new_api": "master_access",
          "old_text": "sctx->ip()",
          "new_text": "sctx->master_access()",
          "old_line_content": "    grant->privilege|= acl_get(thd, sctx->host().str, sctx->ip().str,",
          "new_line_content": "    grant->privilege= sctx->master_access();",
          "content_same": false
        },
        {
          "line": 5562,
          "old_api": "DEBUG_SYNC",
          "new_api": "ip",
          "old_text": "DEBUG_SYNC(thd, \"fill_effective_table_privileges\")",
          "new_text": "sctx->ip()",
          "old_line_content": "    DEBUG_SYNC(thd, \"fill_effective_table_privileges\");",
          "new_line_content": "    grant->privilege|= acl_get(thd, sctx->host().str, sctx->ip().str,",
          "content_same": false
        },
        {
          "line": 5565,
          "old_api": "lock",
          "new_api": "DEBUG_SYNC",
          "old_text": "acl_cache_lock.lock(false)",
          "new_text": "DEBUG_SYNC(thd, \"fill_effective_table_privileges\")",
          "old_line_content": "    if (!acl_cache_lock.lock(false))",
          "new_line_content": "    DEBUG_SYNC(thd, \"fill_effective_table_privileges\");",
          "content_same": false
        },
        {
          "line": 5585,
          "old_api": "DBUG_PRINT",
          "new_api": "is_infoschema_db",
          "old_text": "DBUG_PRINT(\"info\", (\"privilege 0x%lx\", grant->privilege))",
          "new_text": "is_infoschema_db(db)",
          "old_line_content": "  DBUG_PRINT(\"info\", (\"privilege 0x%lx\", grant->privilege));",
          "new_line_content": "  if (is_infoschema_db(db))",
          "content_same": false
        },
        {
          "line": 5629,
          "old_api": "DBUG_RETURN",
          "new_api": "security_context",
          "old_text": "DBUG_RETURN(FALSE)",
          "new_text": "DBUG_PRINT(\"info\", (\"strcmp (%s, %s) my_casestrcmp (%s, %s) equal\",\n                        thd->security_context()->priv_user().str, user,\n                        host, thd->security_context()->priv_host().str))",
          "old_line_content": "    DBUG_RETURN(FALSE);",
          "new_line_content": "    DBUG_PRINT(\"info\", (\"strcmp (%s, %s) my_casestrcmp (%s, %s) equal\",",
          "content_same": false
        },
        {
          "line": 5632,
          "old_api": "lock",
          "new_api": "DBUG_RETURN",
          "old_text": "acl_cache_lock.lock()",
          "new_text": "DBUG_RETURN(FALSE)",
          "old_line_content": "  if (!acl_cache_lock.lock())",
          "new_line_content": "    DBUG_RETURN(FALSE);",
          "content_same": false
        },
        {
          "line": 5636,
          "old_api": "begin",
          "new_api": "DBUG_RETURN",
          "old_text": "acl_proxy_users->begin()",
          "new_text": "DBUG_RETURN(TRUE)",
          "old_line_content": "  for (ACL_PROXY_USER *proxy= acl_proxy_users->begin();",
          "new_line_content": "    DBUG_RETURN(TRUE);",
          "content_same": false
        },
        {
          "line": 5639,
          "old_api": "DEBUG_SYNC",
          "new_api": "begin",
          "old_text": "DEBUG_SYNC(thd, \"before_proxy_matches\")",
          "new_text": "acl_proxy_users->begin()",
          "old_line_content": "    DEBUG_SYNC(thd, \"before_proxy_matches\");",
          "new_line_content": "  for (ACL_PROXY_USER *proxy= acl_proxy_users->begin();",
          "content_same": false
        },
        {
          "line": 5640,
          "old_api": "security_context",
          "new_api": "end",
          "old_text": "thd->security_context()->host()",
          "new_text": "acl_proxy_users->end()",
          "old_line_content": "    if (proxy->matches(thd->security_context()->host().str,",
          "new_line_content": "       proxy != acl_proxy_users->end(); ++proxy)",
          "content_same": false
        },
        {
          "line": 5642,
          "old_api": "security_context",
          "new_api": "DEBUG_SYNC",
          "old_text": "thd->security_context()->ip()",
          "new_text": "DEBUG_SYNC(thd, \"before_proxy_matches\")",
          "old_line_content": "                       thd->security_context()->ip().str,",
          "new_line_content": "    DEBUG_SYNC(thd, \"before_proxy_matches\");",
          "content_same": false
        },
        {
          "line": 5644,
          "old_api": "get_with_grant",
          "new_api": "security_context",
          "old_text": "proxy->get_with_grant()",
          "new_text": "thd->security_context()->user()",
          "old_line_content": "        proxy->get_with_grant())",
          "new_line_content": "                       thd->security_context()->user().str,",
          "content_same": false
        },
        {
          "line": 5647,
          "old_api": "DBUG_RETURN",
          "new_api": "get_with_grant",
          "old_text": "DBUG_RETURN(FALSE)",
          "new_text": "proxy->get_with_grant()",
          "old_line_content": "      DBUG_RETURN(FALSE);",
          "new_line_content": "        proxy->get_with_grant())",
          "content_same": false
        },
        {
          "line": 5654,
          "old_api": "DBUG_RETURN",
          "new_api": "MYF",
          "old_text": "DBUG_RETURN(TRUE)",
          "new_text": "MYF(0)",
          "old_line_content": "  DBUG_RETURN(TRUE);",
          "new_line_content": "  my_error(ER_ACCESS_DENIED_NO_PASSWORD_ERROR, MYF(0),",
          "content_same": false
        },
        {
          "line": 5668,
          "old_api": "DBUG_ENTER",
          "new_api": "check_access",
          "old_text": "DBUG_ENTER(\"fill_schema_user_privileges\")",
          "new_text": "check_access(thd, SELECT_ACL, \"mysql\",\n                                      NULL, NULL, 1, 1)",
          "old_line_content": "  DBUG_ENTER(\"fill_schema_user_privileges\");",
          "new_line_content": "  bool no_global_access= check_access(thd, SELECT_ACL, \"mysql\",",
          "content_same": false
        },
        {
          "line": 5671,
          "old_api": "DBUG_RETURN",
          "new_api": "DBUG_ENTER",
          "old_text": "DBUG_RETURN(0)",
          "new_text": "DBUG_ENTER(\"fill_schema_user_privileges\")",
          "old_line_content": "    DBUG_RETURN(0);",
          "new_line_content": "  DBUG_ENTER(\"fill_schema_user_privileges\");",
          "content_same": false
        },
        {
          "line": 5674,
          "old_api": "lock",
          "new_api": "DBUG_RETURN",
          "old_text": "acl_cache_lock.lock()",
          "new_text": "DBUG_RETURN(0)",
          "old_line_content": "  if (!acl_cache_lock.lock())",
          "new_line_content": "    DBUG_RETURN(0);",
          "content_same": false
        },
        {
          "line": 5677,
          "old_api": "end",
          "new_api": "lock",
          "old_text": "acl_users->end()",
          "new_text": "acl_cache_lock.lock()",
          "old_line_content": "  for (acl_user= acl_users->begin(); acl_user != acl_users->end(); ++acl_user)",
          "new_line_content": "  if (!acl_cache_lock.lock())",
          "content_same": false
        },
        {
          "line": 5697,
          "old_api": "update_schema_privilege",
          "new_api": "strxmov",
          "old_text": "update_schema_privilege(thd, table, buff, 0, 0, 0, 0,\n                                  STRING_WITH_LEN(\"USAGE\"), is_grantable)",
          "new_text": "strxmov(buff,\"'\",user,\"'@'\",host,\"'\",NullS)",
          "old_line_content": "      if (update_schema_privilege(thd, table, buff, 0, 0, 0, 0,",
          "new_line_content": "    strxmov(buff,\"'\",user,\"'@'\",host,\"'\",NullS);",
          "content_same": false
        },
        {
          "line": 5728,
          "old_api": "length",
          "new_api": "equal_range",
          "old_text": "it->second.first.length()",
          "new_text": "g_dynamic_privileges_map->equal_range(key)",
          "old_line_content": "      size_t str_len= it->second.first.length();",
          "new_line_content": "    std::tie(it, it_end)= g_dynamic_privileges_map->equal_range(key);",
          "content_same": false
        },
        {
          "line": 5759,
          "old_api": "DBUG_ENTER",
          "new_api": "check_access",
          "old_text": "DBUG_ENTER(\"fill_schema_schema_privileges\")",
          "new_text": "check_access(thd, SELECT_ACL, \"mysql\",\n                                      NULL, NULL, 1, 1)",
          "old_line_content": "  DBUG_ENTER(\"fill_schema_schema_privileges\");",
          "new_line_content": "  bool no_global_access= check_access(thd, SELECT_ACL, \"mysql\",",
          "content_same": false
        },
        {
          "line": 5762,
          "old_api": "DBUG_RETURN",
          "new_api": "DBUG_ENTER",
          "old_text": "DBUG_RETURN(0)",
          "new_text": "DBUG_ENTER(\"fill_schema_schema_privileges\")",
          "old_line_content": "    DBUG_RETURN(0);",
          "new_line_content": "  DBUG_ENTER(\"fill_schema_schema_privileges\");",
          "content_same": false
        },
        {
          "line": 5765,
          "old_api": "lock",
          "new_api": "DBUG_RETURN",
          "old_text": "acl_cache_lock.lock()",
          "new_text": "DBUG_RETURN(0)",
          "old_line_content": "  if (!acl_cache_lock.lock())",
          "new_line_content": "    DBUG_RETURN(0);",
          "content_same": false
        },
        {
          "line": 5768,
          "old_api": "end",
          "new_api": "lock",
          "old_text": "acl_dbs->end()",
          "new_text": "acl_cache_lock.lock()",
          "old_line_content": "  for (acl_db= acl_dbs->begin(); acl_db != acl_dbs->end(); ++acl_db)",
          "new_line_content": "  if (!acl_cache_lock.lock())",
          "content_same": false
        },
        {
          "line": 5792,
          "old_api": "update_schema_privilege",
          "new_api": "strxmov",
          "old_text": "update_schema_privilege(thd, table, buff, acl_db->db, 0, 0,\n                                    0, STRING_WITH_LEN(\"USAGE\"), is_grantable)",
          "new_text": "strxmov(buff,\"'\",user,\"'@'\",host,\"'\",NullS)",
          "old_line_content": "        if (update_schema_privilege(thd, table, buff, acl_db->db, 0, 0,",
          "new_line_content": "      strxmov(buff,\"'\",user,\"'@'\",host,\"'\",NullS);",
          "content_same": false
        },
        {
          "line": 5831,
          "old_api": "DBUG_ENTER",
          "new_api": "check_access",
          "old_text": "DBUG_ENTER(\"fill_schema_table_privileges\")",
          "new_text": "check_access(thd, SELECT_ACL, \"mysql\",\n                                      NULL, NULL, 1, 1)",
          "old_line_content": "  DBUG_ENTER(\"fill_schema_table_privileges\");",
          "new_line_content": "  bool no_global_access= check_access(thd, SELECT_ACL, \"mysql\",",
          "content_same": false
        },
        {
          "line": 5834,
          "old_api": "lock",
          "new_api": "DBUG_ENTER",
          "old_text": "acl_cache_lock.lock()",
          "new_text": "DBUG_ENTER(\"fill_schema_table_privileges\")",
          "old_line_content": "  if (!acl_cache_lock.lock())",
          "new_line_content": "  DBUG_ENTER(\"fill_schema_table_privileges\");",
          "content_same": false
        },
        {
          "line": 5846,
          "old_api": "get_host",
          "new_api": "get",
          "old_text": "grant_table->host.get_host()",
          "new_text": "key_and_value.second.get()",
          "old_line_content": "    if (!(host= grant_table->host.get_host()))",
          "new_line_content": "    GRANT_TABLE *grant_table= key_and_value.second.get();",
          "content_same": false
        },
        {
          "line": 5870,
          "old_api": "update_schema_privilege",
          "new_api": "strxmov",
          "old_text": "update_schema_privilege(thd, table, buff, grant_table->db,\n                                    grant_table->tname, 0, 0,\n                                    STRING_WITH_LEN(\"USAGE\"), is_grantable)",
          "new_text": "strxmov(buff, \"'\", user, \"'@'\", host, \"'\", NullS)",
          "old_line_content": "        if (update_schema_privilege(thd, table, buff, grant_table->db,",
          "new_line_content": "      strxmov(buff, \"'\", user, \"'@'\", host, \"'\", NullS);",
          "content_same": false
        },
        {
          "line": 5913,
          "old_api": "DBUG_ENTER",
          "new_api": "check_access",
          "old_text": "DBUG_ENTER(\"fill_schema_table_privileges\")",
          "new_text": "check_access(thd, SELECT_ACL, \"mysql\",\n                                      NULL, NULL, 1, 1)",
          "old_line_content": "  DBUG_ENTER(\"fill_schema_table_privileges\");",
          "new_line_content": "  bool no_global_access= check_access(thd, SELECT_ACL, \"mysql\",",
          "content_same": false
        },
        {
          "line": 5916,
          "old_api": "lock",
          "new_api": "DBUG_ENTER",
          "old_text": "acl_cache_lock.lock()",
          "new_text": "DBUG_ENTER(\"fill_schema_table_privileges\")",
          "old_line_content": "  if (!acl_cache_lock.lock())",
          "new_line_content": "  DBUG_ENTER(\"fill_schema_table_privileges\");",
          "content_same": false
        },
        {
          "line": 5928,
          "old_api": "get_host",
          "new_api": "get",
          "old_text": "grant_table->host.get_host()",
          "new_text": "key_and_value.second.get()",
          "old_line_content": "    if (!(host= grant_table->host.get_host()))",
          "new_line_content": "    GRANT_TABLE *grant_table= key_and_value.second.get();",
          "content_same": false
        },
        {
          "line": 5959,
          "old_api": "data",
          "new_api": "get",
          "old_text": "update_schema_privilege(thd, table, buff, grant_table->db,\n                                            grant_table->tname,\n                                            grant_column->column.data(),\n                                            grant_column->column.size(),\n                                            command_array[cnt],\n                                            command_lengths[cnt], is_grantable)",
          "new_text": "key_and_value.second.get()",
          "old_line_content": "                if (update_schema_privilege(thd, table, buff, grant_table->db,",
          "new_line_content": "              GRANT_COLUMN *grant_column = key_and_value.second.get();",
          "content_same": false
        },
        {
          "line": 5962,
          "old_api": "size",
          "new_api": "data",
          "old_text": "grant_column->column.size()",
          "new_text": "update_schema_privilege(thd, table, buff, grant_table->db,\n                                            grant_table->tname,\n                                            grant_column->column.data(),\n                                            grant_column->column.size(),\n                                            command_array[cnt],\n                                            command_lengths[cnt], is_grantable)",
          "old_line_content": "                                            grant_column->column.size(),",
          "new_line_content": "                if (update_schema_privilege(thd, table, buff, grant_table->db,",
          "content_same": false
        },
        {
          "line": 6048,
          "old_api": "check_access",
          "new_api": "DBUG_ASSERT",
          "old_text": "check_access(thd, SELECT_ACL, dst_db_name,\n                       &thd->col_access, NULL, FALSE, FALSE)",
          "new_text": "DBUG_ASSERT(dst_db_name != NULL)",
          "old_line_content": "      if (check_access(thd, SELECT_ACL, dst_db_name,",
          "new_line_content": "      DBUG_ASSERT(dst_db_name != NULL);",
          "content_same": false
        },
        {
          "line": 6055,
          "old_api": "security_context",
          "new_api": "check_grant_db",
          "old_text": "thd->security_context()->priv_user()",
          "new_text": "check_grant_db(thd, dst_db_name)",
          "old_line_content": "                 thd->security_context()->priv_user().str,",
          "new_line_content": "      if (!thd->col_access && check_grant_db(thd, dst_db_name))",
          "content_same": false
        },
        {
          "line": 6075,
          "old_api": "check_access",
          "new_api": "open_temporary_tables",
          "old_text": "check_access(thd, SELECT_ACL, dst_table->db,\n                       &dst_table->grant.privilege,\n                       &dst_table->grant.m_internal,\n                       FALSE, FALSE)",
          "new_text": "open_temporary_tables(thd, dst_table)",
          "old_line_content": "      if (check_access(thd, SELECT_ACL, dst_table->db,",
          "new_line_content": "      if (open_temporary_tables(thd, dst_table))",
          "content_same": false
        },
        {
          "line": 6088,
          "old_api": "close_thread_tables",
          "new_api": "check_grant",
          "old_text": "close_thread_tables(thd)",
          "new_text": "check_grant(thd, SELECT_ACL, dst_table, TRUE, UINT_MAX, FALSE)",
          "old_line_content": "      close_thread_tables(thd);",
          "new_line_content": "      if (check_grant(thd, SELECT_ACL, dst_table, TRUE, UINT_MAX, FALSE))",
          "content_same": false
        },
        {
          "line": 6124,
          "old_api": "DBUG_RETURN",
          "new_api": "DBUG_ENTER",
          "old_text": "DBUG_RETURN(0)",
          "new_text": "DBUG_ENTER(\"check_global_access\")",
          "old_line_content": "    DBUG_RETURN(0);",
          "new_line_content": "  DBUG_ENTER(\"check_global_access\");",
          "content_same": false
        },
        {
          "line": 6126,
          "old_api": "MYF",
          "new_api": "security_context",
          "old_text": "MYF(0)",
          "new_text": "thd->security_context()->check_access(want_access, true)",
          "old_line_content": "  my_error(ER_SPECIFIC_ACCESS_DENIED_ERROR, MYF(0), command);",
          "new_line_content": "  if (thd->security_context()->check_access(want_access, true))",
          "content_same": false
        },
        {
          "line": 6152,
          "old_api": "ha_default_handlerton",
          "new_api": "DBUG_ASSERT",
          "old_text": "ha_default_handlerton(thd)",
          "new_text": "DBUG_ASSERT(alter_info != nullptr)",
          "old_line_content": "                                             ha_default_handlerton(thd);",
          "new_line_content": "  DBUG_ASSERT(alter_info != nullptr);",
          "content_same": false
        },
        {
          "line": 6155,
          "old_api": "ha_check_storage_engine_flag",
          "new_api": "ha_default_handlerton",
          "old_text": "ha_check_storage_engine_flag(db_type, HTON_SUPPORTS_FOREIGN_KEYS)",
          "new_text": "ha_default_handlerton(thd)",
          "old_line_content": "  if (!ha_check_storage_engine_flag(db_type, HTON_SUPPORTS_FOREIGN_KEYS))",
          "new_line_content": "                                             ha_default_handlerton(thd);",
          "content_same": false
        },
        {
          "line": 6179,
          "old_api": "check_grant",
          "new_api": "check_access",
          "old_text": "check_grant(thd, REFERENCES_ACL, &parent_table, false, 1, true)",
          "new_text": "check_access(thd, REFERENCES_ACL, parent_table.db,\n                        &parent_table.grant.privilege,\n                        &parent_table.grant.m_internal, false, true)",
          "old_line_content": "           check_grant(thd, REFERENCES_ACL, &parent_table, false, 1, true)) ||",
          "new_line_content": "      if ((check_access(thd, REFERENCES_ACL, parent_table.db,",
          "content_same": false
        },
        {
          "line": 6188,
          "old_api": "security_context",
          "new_api": "MYF",
          "old_text": "thd->security_context()->host_or_ip()",
          "new_text": "MYF(0)",
          "old_line_content": "                 thd->security_context()->host_or_ip().str,",
          "new_line_content": "        my_error(ER_TABLEACCESS_DENIED_ERROR, MYF(0),",
          "content_same": false
        },
        {
          "line": 6216,
          "old_api": "c_ptr_quick",
          "new_api": "append",
          "old_text": "key.c_ptr_quick()",
          "new_text": "key.append('@')",
          "old_line_content": "    g_authid_to_vertex->find(std::string(key.c_ptr_quick()));",
          "new_line_content": "  key.append('@');",
          "content_same": false
        },
        {
          "line": 6217,
          "old_api": "end",
          "new_api": "append_identifier",
          "old_text": "g_authid_to_vertex->end()",
          "new_text": "append_identifier(&key, host.str, host.length)",
          "old_line_content": "  if (it != g_authid_to_vertex->end())",
          "new_line_content": "  append_identifier(&key, host.str, host.length);",
          "content_same": false
        },
        {
          "line": 6220,
          "old_api": "find_if_granted_role",
          "new_api": "end",
          "old_text": "find_if_granted_role(it->second, role, role_host)",
          "new_text": "g_authid_to_vertex->end()",
          "old_line_content": "    if (find_if_granted_role(it->second, role, role_host))",
          "new_line_content": "  if (it != g_authid_to_vertex->end())",
          "content_same": false
        },
        {
          "line": 6232,
          "old_api": "Role_id",
          "new_api": "get_mandatory_roles",
          "old_text": "Role_id(role, role_host)",
          "new_text": "get_mandatory_roles(&mandatory_roles)",
          "old_line_content": "    if (rid == Role_id(role, role_host))",
          "new_line_content": "  get_mandatory_roles(&mandatory_roles);",
          "content_same": false
        },
        {
          "line": 6269,
          "old_api": "strlen",
          "new_api": "boost::target(*ei,\n                                                           *g_granted_roles)",
          "old_text": "strlen(acl_user.user)",
          "new_text": "boost::target(*ei,\n                                                           *g_granted_roles)",
          "old_line_content": "    if ((role.length == strlen(acl_user.user)) &&",
          "new_line_content": "                                             boost::target(*ei,",
          "content_same": false
        },
        {
          "line": 6272,
          "old_api": "get_host",
          "new_api": "strlen",
          "old_text": "acl_user.host.get_host()",
          "new_text": "strlen(acl_user.user)",
          "old_line_content": "        !strncmp(role_host.str, acl_user.host.get_host(), role_host.length))",
          "new_line_content": "    if ((role.length == strlen(acl_user.user)) &&",
          "content_same": false
        },
        {
          "line": 6289,
          "old_api": "boost::out_edges(v, *g_granted_roles)",
          "new_api": "DBUG_ENTER",
          "old_text": "boost::out_edges(v, *g_granted_roles)",
          "new_text": "DBUG_ENTER(\"get_granted_roles\")",
          "old_line_content": "  boost::tie(ei, ei_end) = boost::out_edges(v, *g_granted_roles);",
          "new_line_content": "  DBUG_ENTER(\"get_granted_roles\");",
          "content_same": false
        },
        {
          "line": 6308,
          "old_api": "f",
          "new_api": "get_host",
          "old_text": "f(id, with_admin_opt != 0)",
          "new_text": "acl_user.host.get_host()",
          "old_line_content": "    f(id, with_admin_opt != 0);",
          "new_line_content": "    tmp_host.str= acl_user.host.get_host();",
          "content_same": false
        },
        {
          "line": 6332,
          "old_api": "std::make_pair(rid, with_admin_opt)",
          "new_api": "assert_acl_cache_read_lock",
          "old_text": "std::make_pair(rid, with_admin_opt)",
          "new_text": "assert_acl_cache_read_lock(current_thd)",
          "old_line_content": "            granted_roles->push_back(std::make_pair(rid, with_admin_opt));",
          "new_line_content": "  DBUG_ASSERT(assert_acl_cache_read_lock(current_thd));",
          "content_same": false
        },
        {
          "line": 6343,
          "old_api": "end",
          "new_api": "assert_acl_cache_read_lock",
          "old_text": "g_authid_to_vertex->end()",
          "new_text": "assert_acl_cache_read_lock(current_thd)",
          "old_line_content": "  if (it == g_authid_to_vertex->end())",
          "new_line_content": "  DBUG_ASSERT(assert_acl_cache_read_lock(current_thd));",
          "content_same": false
        },
        {
          "line": 6345,
          "old_api": "user",
          "new_api": "find",
          "old_text": "get_granted_roles(it->second, [&](const Role_id rid, bool with_admin)\n  {\n    LEX_CSTRING str_user= {rid.user().c_str(), rid.user().length()};\n    LEX_CSTRING str_host= {rid.host().c_str(), rid.host().length()};\n    sctx->activate_role(str_user, str_host, false);\n  })",
          "new_text": "g_authid_to_vertex->find(key)",
          "old_line_content": "  get_granted_roles(it->second, [&](const Role_id rid, bool with_admin)",
          "new_line_content": "  Role_index_map::iterator it= g_authid_to_vertex->find(key);",
          "content_same": false
        },
        {
          "line": 6348,
          "old_api": "host",
          "new_api": "user",
          "old_text": "rid.host().length()",
          "new_text": "get_granted_roles(it->second, [&](const Role_id rid, bool with_admin)\n  {\n    LEX_CSTRING str_user= {rid.user().c_str(), rid.user().length()};\n    LEX_CSTRING str_host= {rid.host().c_str(), rid.host().length()};\n    sctx->activate_role(str_user, str_host, false);\n  })",
          "old_line_content": "    LEX_CSTRING str_host= {rid.host().c_str(), rid.host().length()};",
          "new_line_content": "  get_granted_roles(it->second, [&](const Role_id rid, bool with_admin)",
          "content_same": false
        },
        {
          "line": 6352,
          "old_api": "get_mandatory_roles",
          "new_api": "activate_role",
          "old_text": "get_mandatory_roles(&mandatory_roles)",
          "new_text": "sctx->activate_role(str_user, str_host, false)",
          "old_line_content": "  get_mandatory_roles(&mandatory_roles);",
          "new_line_content": "    sctx->activate_role(str_user, str_host, false);",
          "content_same": false
        },
        {
          "line": 6355,
          "old_api": "user",
          "new_api": "get_mandatory_roles",
          "old_text": "rid.user().length()",
          "new_text": "get_mandatory_roles(&mandatory_roles)",
          "old_line_content": "    LEX_CSTRING str_user= {rid.user().c_str(), rid.user().length()};",
          "new_line_content": "  get_mandatory_roles(&mandatory_roles);",
          "content_same": false
        },
        {
          "line": 6378,
          "old_api": "get_granted_roles",
          "new_api": "find",
          "old_text": "get_granted_roles(it->second, granted_roles)",
          "new_text": "g_authid_to_vertex->find(str_user)",
          "old_line_content": "    get_granted_roles(it->second, granted_roles);",
          "new_line_content": "  if ((it= g_authid_to_vertex->find(str_user)) !=",
          "content_same": false
        },
        {
          "line": 6417,
          "old_api": "set_ascii",
          "new_api": "get_active_roles",
          "old_text": "active_role->set_ascii(\"NONE\", 4)",
          "new_text": "get_active_roles(thd, &roles)",
          "old_line_content": "    active_role->set_ascii(\"NONE\", 4);",
          "new_line_content": "  get_active_roles(thd, &roles);",
          "content_same": false
        },
        {
          "line": 6418,
          "old_api": "copy",
          "new_api": "size",
          "old_text": "str->copy(*active_role)",
          "new_text": "roles.size()",
          "old_line_content": "    str->copy(*active_role);",
          "new_line_content": "  if (roles.size() == 0)",
          "content_same": false
        },
        {
          "line": 6421,
          "old_api": "end",
          "new_api": "copy",
          "old_text": "roles.end()",
          "new_text": "str->copy(*active_role)",
          "old_line_content": "  std::sort(roles.begin(), roles.end());",
          "new_line_content": "    str->copy(*active_role);",
          "content_same": false
        },
        {
          "line": 6436,
          "old_api": "host",
          "new_api": "user",
          "old_text": "rid.first.host().c_str()",
          "new_text": "rid.first.user().c_str()",
          "old_line_content": "    append_identifier(thd, active_role, rid.first.host().c_str(),",
          "new_line_content": "    append_identifier(thd, active_role, rid.first.user().c_str(),",
          "content_same": false
        },
        {
          "line": 6437,
          "old_api": "host",
          "new_api": "user",
          "old_text": "rid.first.host().length()",
          "new_text": "rid.first.user().length()",
          "old_line_content": "                      rid.first.host().length());",
          "new_line_content": "                      rid.first.user().length());",
          "content_same": false
        },
        {
          "line": 6463,
          "old_api": "create_authid_from",
          "new_api": "equal_range",
          "old_text": "create_authid_from(role_it->second)",
          "new_text": "g_default_roles->equal_range(user)",
          "old_line_content": "    Auth_id_ref ref= create_authid_from(role_it->second);",
          "new_line_content": "  boost::tie(role_it, role_end)= g_default_roles->equal_range(user);",
          "content_same": false
        },
        {
          "line": 6489,
          "old_api": "equal_range",
          "new_api": "DBUG_ENTER",
          "old_text": "g_default_roles->equal_range(user_role_id)",
          "new_text": "DBUG_ENTER(\"clear_default_roles\")",
          "old_line_content": "  boost::tie(begin_it, role_end)= g_default_roles->equal_range(user_role_id);",
          "new_line_content": "  DBUG_ENTER(\"clear_default_roles\");",
          "content_same": false
        },
        {
          "line": 6498,
          "old_api": "modify_default_roles_in_table",
          "new_api": "push_back",
          "old_text": "modify_default_roles_in_table(thd, table, user_auth_id, role_auth_id,\n                                    true)",
          "new_text": "default_roles->push_back(role_it->second)",
          "old_line_content": "    modify_default_roles_in_table(thd, table, user_auth_id, role_auth_id,",
          "new_line_content": "      default_roles->push_back(role_it->second);",
          "content_same": false
        },
        {
          "line": 6501,
          "old_api": "erase",
          "new_api": "modify_default_roles_in_table",
          "old_text": "g_default_roles->erase(begin_it, role_end)",
          "new_text": "modify_default_roles_in_table(thd, table, user_auth_id, role_auth_id,\n                                    true)",
          "old_line_content": "  g_default_roles->erase(begin_it, role_end);",
          "new_line_content": "    modify_default_roles_in_table(thd, table, user_auth_id, role_auth_id,",
          "content_same": false
        },
        {
          "line": 6518,
          "old_api": "MYF",
          "new_api": "open_default_role_table",
          "old_text": "MYF(MY_WME)",
          "new_text": "open_default_role_table(thd)",
          "old_line_content": "    my_error(ER_OPEN_ROLE_TABLES, MYF(MY_WME));",
          "new_line_content": "  TABLE *table= open_default_role_table(thd);",
          "content_same": false
        },
        {
          "line": 6533,
          "old_api": "log_and_commit_acl_ddl",
          "new_api": "clear_default_roles",
          "old_text": "log_and_commit_acl_ddl(thd, true, NULL, ret)",
          "new_text": "clear_default_roles(thd, table, authid, 0)",
          "old_line_content": "  result= log_and_commit_acl_ddl(thd, true, NULL, ret);",
          "new_line_content": "  ret= clear_default_roles(thd, table, authid, 0);",
          "content_same": false
        },
        {
          "line": 6564,
          "old_api": "MYF",
          "new_api": "open_default_role_table",
          "old_text": "MYF(MY_WME)",
          "new_text": "open_default_role_table(thd)",
          "old_line_content": "    my_error(ER_OPEN_ROLE_TABLES, MYF(MY_WME));",
          "new_line_content": "  TABLE *table= open_default_role_table(thd);",
          "content_same": false
        },
        {
          "line": 6580,
          "old_api": "MYF",
          "new_api": "end",
          "old_text": "MYF(MY_WME)",
          "new_text": "g_authid_to_vertex->end()",
          "old_line_content": "    my_error(ER_UNKNOWN_AUTHID, MYF(MY_WME), user->user.str, user->host.str);",
          "new_line_content": "  if (it == g_authid_to_vertex->end())",
          "content_same": false
        },
        {
          "line": 6592,
          "old_api": "get_mandatory_roles",
          "new_api": "push_back",
          "old_text": "get_mandatory_roles(&mandatory_roles)",
          "new_text": "new_default_role_ref.push_back(authid)",
          "old_line_content": "  get_mandatory_roles(&mandatory_roles);",
          "new_line_content": "    new_default_role_ref.push_back(authid);",
          "content_same": false
        },
        {
          "line": 6595,
          "old_api": "create_authid_from",
          "new_api": "get_mandatory_roles",
          "old_text": "create_authid_from(role)",
          "new_text": "get_mandatory_roles(&mandatory_roles)",
          "old_line_content": "    Auth_id_ref authid= create_authid_from(role);",
          "new_line_content": "  get_mandatory_roles(&mandatory_roles);",
          "content_same": false
        },
        {
          "line": 6599,
          "old_api": "end",
          "new_api": "begin",
          "old_text": "new_default_role_ref.end()",
          "new_text": "new_default_role_ref.begin()",
          "old_line_content": "    if (res == new_default_role_ref.end())",
          "new_line_content": "    auto res= std::find(new_default_role_ref.begin(),",
          "content_same": false
        },
        {
          "line": 6604,
          "old_api": "alter_user_set_default_roles",
          "new_api": "push_back",
          "old_text": "alter_user_set_default_roles(thd, table, user,\n                                            new_default_role_ref)",
          "new_text": "new_default_role_ref.push_back(authid)",
          "old_line_content": "  bool errors= alter_user_set_default_roles(thd, table, user,",
          "new_line_content": "      new_default_role_ref.push_back(authid);",
          "content_same": false
        },
        {
          "line": 6611,
          "old_api": "log_and_commit_acl_ddl",
          "new_api": "MYF",
          "old_text": "log_and_commit_acl_ddl(thd, true)",
          "new_text": "MYF(0)",
          "old_line_content": "  errors= log_and_commit_acl_ddl(thd, true);",
          "new_line_content": "    my_error(ER_FAILED_DEFAULT_ROLES, MYF(0));",
          "content_same": false
        },
        {
          "line": 6639,
          "old_api": "create_authid_from",
          "new_api": "size",
          "old_text": "create_authid_from(user)",
          "new_text": "new_auth_ids.size()",
          "old_line_content": "    Auth_id_ref user_auth_id= create_authid_from(user);",
          "new_line_content": "  if (new_auth_ids.size() != 0)",
          "content_same": false
        },
        {
          "line": 6644,
          "old_api": "end",
          "new_api": "equal_range",
          "old_text": "new_auth_ids.end()",
          "new_text": "g_default_roles->equal_range(user_role_id)",
          "old_line_content": "      if (std::find(new_auth_ids.begin(), new_auth_ids.end(),",
          "new_line_content": "    boost::tie(role_it, role_end)= g_default_roles->equal_range(user_role_id);",
          "content_same": false
        },
        {
          "line": 6647,
          "old_api": "create_authid_from",
          "new_api": "end",
          "old_text": "create_authid_from(role_it->second)",
          "new_text": "new_auth_ids.end()",
          "old_line_content": "        Auth_id_ref role_auth_id= create_authid_from(role_it->second);",
          "new_line_content": "      if (std::find(new_auth_ids.begin(), new_auth_ids.end(),",
          "content_same": false
        },
        {
          "line": 6648,
          "old_api": "modify_default_roles_in_table",
          "new_api": "end",
          "old_text": "modify_default_roles_in_table(thd, table, user_auth_id,\n                                              role_auth_id, true)",
          "new_text": "new_auth_ids.end()",
          "old_line_content": "        errors= modify_default_roles_in_table(thd, table, user_auth_id,",
          "new_line_content": "                    role_it->second) == new_auth_ids.end())",
          "content_same": false
        },
        {
          "line": 6656,
          "old_api": "find",
          "new_api": "equal_range",
          "old_text": "find(role_it, role_end, *it)",
          "new_text": "g_default_roles->equal_range(user_role_id)",
          "old_line_content": "      if (find(role_it, role_end, *it) == role_end)",
          "new_line_content": "    boost::tie(role_it, role_end)= g_default_roles->equal_range(user_role_id);",
          "content_same": false
        },
        {
          "line": 6665,
          "old_api": "end",
          "new_api": "equal_range",
          "old_text": "new_auth_ids.end()",
          "new_text": "g_default_roles->equal_range(user_role_id)",
          "old_line_content": "    for( ;it != new_auth_ids.end() && !errors; ++it)",
          "new_line_content": "    boost::tie(role_it, role_end)= g_default_roles->equal_range(user_role_id);",
          "content_same": false
        },
        {
          "line": 6668,
          "old_api": "std::make_pair(user_role_id, role_role_id)",
          "new_api": "end",
          "old_text": "std::make_pair(user_role_id, role_role_id)",
          "new_text": "new_auth_ids.end()",
          "old_line_content": "      g_default_roles->insert(std::make_pair(user_role_id, role_role_id));",
          "new_line_content": "    for( ;it != new_auth_ids.end() && !errors; ++it)",
          "content_same": false
        },
        {
          "line": 6703,
          "old_api": "MYF",
          "new_api": "open_default_role_table",
          "old_text": "MYF(MY_WME)",
          "new_text": "open_default_role_table(thd)",
          "old_line_content": "    my_error(ER_OPEN_ROLE_TABLES, MYF(MY_WME));",
          "new_line_content": "  TABLE *table= open_default_role_table(thd);",
          "content_same": false
        },
        {
          "line": 6717,
          "old_api": "MYF",
          "new_api": "alter_user_set_default_roles",
          "old_text": "MYF(0)",
          "new_text": "alter_user_set_default_roles(thd, table, user, new_auth_ids)",
          "old_line_content": "    my_error(ER_FAILED_DEFAULT_ROLES, MYF(0));",
          "new_line_content": "  bool ret= alter_user_set_default_roles(thd, table, user, new_auth_ids);",
          "content_same": false
        },
        {
          "line": 6720,
          "old_api": "log_and_commit_acl_ddl",
          "new_api": "MYF",
          "old_text": "log_and_commit_acl_ddl(thd, true)",
          "new_text": "MYF(0)",
          "old_line_content": "  ret= log_and_commit_acl_ddl(thd, true);",
          "new_line_content": "    my_error(ER_FAILED_DEFAULT_ROLES, MYF(0));",
          "content_same": false
        },
        {
          "line": 6734,
          "old_api": "c_ptr_quick",
          "new_api": "append_identifier",
          "old_text": "tmp.c_ptr_quick()",
          "new_text": "append_identifier(&tmp, user->user.str, user->user.length)",
          "old_line_content": "  return std::string(tmp.c_ptr_quick());",
          "new_line_content": "  append_identifier(&tmp, user->user.str, user->user.length);",
          "content_same": false
        },
        {
          "line": 6751,
          "old_api": "host",
          "new_api": "user",
          "old_text": "user.host().c_str()",
          "new_text": "user.user().c_str()",
          "old_line_content": "  lex_host.str= user.host().c_str();",
          "new_line_content": "  lex_user.str= user.user().c_str();",
          "content_same": false
        },
        {
          "line": 6752,
          "old_api": "host",
          "new_api": "user",
          "old_text": "user.host().length()",
          "new_text": "user.user().length()",
          "old_line_content": "  lex_host.length= user.host().length();",
          "new_line_content": "  lex_user.length= user.user().length();",
          "content_same": false
        },
        {
          "line": 6771,
          "old_api": "get_host",
          "new_api": "strlen",
          "old_text": "user->host.get_host()",
          "new_text": "strlen(user->user)",
          "old_line_content": "  append_identifier(&tmp, user->host.get_host(),",
          "new_line_content": "  size_t length= user->user == 0 ? 0 : strlen(user->user);",
          "content_same": false
        },
        {
          "line": 6772,
          "old_api": "get_host_len",
          "new_api": "append_identifier",
          "old_text": "user->host.get_host_len()",
          "new_text": "append_identifier(&tmp, user->user, length)",
          "old_line_content": "                    user->host.get_host_len());",
          "new_line_content": "  append_identifier(&tmp, user->user, length);",
          "content_same": false
        },
        {
          "line": 6773,
          "old_api": "c_ptr_quick",
          "new_api": "append",
          "old_text": "tmp.c_ptr_quick()",
          "new_text": "tmp.append(\"@\")",
          "old_line_content": "  return std::string(tmp.c_ptr_quick());",
          "new_line_content": "\ttmp.append(\"@\");",
          "content_same": false
        },
        {
          "line": 6782,
          "old_api": "c_ptr_quick",
          "new_api": "append_identifier",
          "old_text": "tmp.c_ptr_quick()",
          "new_text": "append_identifier(&tmp, user.first.str, user.first.length)",
          "old_line_content": "  return std::string(tmp.c_ptr_quick());",
          "new_line_content": "  append_identifier(&tmp, user.first.str, user.first.length);",
          "content_same": false
        },
        {
          "line": 6792,
          "old_api": "c_ptr_quick",
          "new_api": "append_identifier",
          "old_text": "tmp.c_ptr_quick()",
          "new_text": "append_identifier(&tmp, user.str, user.length)",
          "old_line_content": "  return std::string(tmp.c_ptr_quick());",
          "new_line_content": "  append_identifier(&tmp, user.str, user.length);",
          "content_same": false
        },
        {
          "line": 6805,
          "old_api": "get_host",
          "new_api": "strlen",
          "old_text": "user->host.get_host()",
          "new_text": "strlen(user->user)",
          "old_line_content": "  host.str= user->host.get_host();",
          "new_line_content": "    username.length= strlen(user->user);",
          "content_same": false
        },
        {
          "line": 6826,
          "old_api": "lock",
          "new_api": "db",
          "old_text": "acl_cache_lock.lock(false)",
          "new_text": "thd->db()",
          "old_line_content": "  if (!acl_cache_lock.lock(false))",
          "new_line_content": "  ulong new_db_access= thd->security_context()->db_acl(thd->db());",
          "content_same": false
        },
        {
          "line": 6829,
          "old_api": "security_context",
          "new_api": "lock",
          "old_text": "thd->security_context()->priv_user()",
          "new_text": "acl_cache_lock.lock(false)",
          "old_line_content": "                                thd->security_context()->priv_user().str, true);",
          "new_line_content": "  if (!acl_cache_lock.lock(false))",
          "content_same": false
        },
        {
          "line": 6856,
          "old_api": "security_context",
          "new_api": "lock",
          "old_text": "thd->security_context()->get_active_roles()",
          "new_text": "acl_cache_lock.lock()",
          "old_line_content": "    thd->security_context()->get_active_roles();",
          "new_line_content": "  if (!acl_cache_lock.lock())",
          "content_same": false
        },
        {
          "line": 6859,
          "old_api": "size",
          "new_api": "security_context",
          "old_text": "active_list->size()",
          "new_text": "thd->security_context()->get_active_roles()",
          "old_line_content": "  backup_active_list.reserve(active_list->size());",
          "new_line_content": "    thd->security_context()->get_active_roles();",
          "content_same": false
        },
        {
          "line": 6862,
          "old_api": "end",
          "new_api": "size",
          "old_text": "active_list->end()",
          "new_text": "active_list->size()",
          "old_line_content": "            active_list->end(),",
          "new_line_content": "  backup_active_list.reserve(active_list->size());",
          "content_same": false
        },
        {
          "line": 6865,
          "old_api": "security_context",
          "new_api": "end",
          "old_text": "thd->security_context()->get_active_roles()->clear()",
          "new_text": "active_list->end()",
          "old_line_content": "  thd->security_context()->get_active_roles()->clear();",
          "new_line_content": "            active_list->end(),",
          "content_same": false
        },
        {
          "line": 6868,
          "old_api": "get_default_definer",
          "new_api": "security_context",
          "old_text": "get_default_definer(thd, &current_user)",
          "new_text": "thd->security_context()->get_active_roles()->clear()",
          "old_line_content": "  get_default_definer(thd, &current_user);",
          "new_line_content": "  thd->security_context()->get_active_roles()->clear();",
          "content_same": false
        },
        {
          "line": 6877,
          "old_api": "begin",
          "new_api": "get_default_roles",
          "old_text": "authids.begin()",
          "new_text": "get_default_roles(current_user_authid, &authids)",
          "old_line_content": "    List_of_auth_id_refs::iterator it = authids.begin();",
          "new_line_content": "  get_default_roles(current_user_authid, &authids);",
          "content_same": false
        },
        {
          "line": 6878,
          "old_api": "end",
          "new_api": "size",
          "old_text": "authids.end()",
          "new_text": "authids.size()",
          "old_line_content": "    for (; it != authids.end() && ret == 0; ++it)",
          "new_line_content": "  if (authids.size() > 0)",
          "content_same": false
        },
        {
          "line": 6887,
          "old_api": "MYF",
          "new_api": "security_context",
          "old_text": "MYF(0)",
          "new_text": "thd->security_context()->activate_role(it->first, it->second, true)",
          "old_line_content": "        my_error(ER_ROLE_NOT_GRANTED, MYF(0), it->first.str, it->second.str,",
          "new_line_content": "      ret= thd->security_context()->activate_role(it->first, it->second, true);",
          "content_same": false
        },
        {
          "line": 6903,
          "old_api": "my_ok",
          "new_api": "const_cast<char*>(role.first.str)",
          "old_text": "my_ok(thd)",
          "new_text": "const_cast<char*>(role.first.str)",
          "old_line_content": "    my_ok(thd);",
          "new_line_content": "      my_free(const_cast<char*>(role.first.str));",
          "content_same": false
        },
        {
          "line": 6945,
          "old_api": "begin",
          "new_api": "get_active_roles",
          "old_text": "active_list->begin()",
          "new_text": "sctx->get_active_roles()",
          "old_line_content": "  std::copy(active_list->begin(),",
          "new_line_content": "    sctx->get_active_roles();",
          "content_same": false
        },
        {
          "line": 6947,
          "old_api": "std::back_inserter(backup_active_list)",
          "new_api": "size",
          "old_text": "std::back_inserter(backup_active_list)",
          "new_text": "active_list->size()",
          "old_line_content": "            std::back_inserter(backup_active_list));",
          "new_line_content": "  backup_active_list.reserve(active_list->size());",
          "content_same": false
        },
        {
          "line": 6948,
          "old_api": "get_active_roles",
          "new_api": "begin",
          "old_text": "sctx->get_active_roles()->clear()",
          "new_text": "active_list->begin()",
          "old_line_content": "  sctx->get_active_roles()->clear();",
          "new_line_content": "  std::copy(active_list->begin(),",
          "content_same": false
        },
        {
          "line": 6950,
          "old_api": "clear_active_roles",
          "new_api": "std::back_inserter(backup_active_list)",
          "old_text": "sctx->clear_active_roles()",
          "new_text": "std::back_inserter(backup_active_list)",
          "old_line_content": "  sctx->clear_active_roles();",
          "new_line_content": "            std::back_inserter(backup_active_list));",
          "content_same": false
        },
        {
          "line": 6953,
          "old_api": "create_authid_str_from",
          "new_api": "clear_active_roles",
          "old_text": "create_authid_str_from(current_user)",
          "new_text": "sctx->clear_active_roles()",
          "old_line_content": "  std::string authid= create_authid_str_from(current_user);",
          "new_line_content": "  sctx->clear_active_roles();",
          "content_same": false
        },
        {
          "line": 6960,
          "old_api": "get_granted_roles",
          "new_api": "end",
          "old_text": "get_granted_roles(user_vertex, &granted_roles)",
          "new_text": "g_authid_to_vertex->end()",
          "old_line_content": "    get_granted_roles(user_vertex, &granted_roles);",
          "new_line_content": "  if ((it= g_authid_to_vertex->find(authid)) != g_authid_to_vertex->end())",
          "content_same": false
        },
        {
          "line": 6965,
          "old_api": "std::make_pair(rid, false)",
          "new_api": "get_mandatory_roles",
          "old_text": "std::make_pair(rid, false)",
          "new_text": "get_mandatory_roles(&mandatory_roles)",
          "old_line_content": "      granted_roles.push_back(std::make_pair(rid, false));",
          "new_line_content": "    get_mandatory_roles(&mandatory_roles);",
          "content_same": false
        },
        {
          "line": 6968,
          "old_api": "end",
          "new_api": "std::make_pair(rid, false)",
          "old_text": "granted_roles.end()",
          "new_text": "std::make_pair(rid, false)",
          "old_line_content": "    for( ;role_it != granted_roles.end(); ++role_it)",
          "new_line_content": "      granted_roles.push_back(std::make_pair(rid, false));",
          "content_same": false
        },
        {
          "line": 6977,
          "old_api": "user",
          "new_api": "const_cast<List<LEX_USER > *>(except_users)",
          "old_text": "role_it->first.user().length()",
          "new_text": "const_cast<List<LEX_USER > *>(except_users)",
          "old_line_content": "          if ((except_user->user.length == role_it->first.user().length()) &&",
          "new_line_content": "          except_users_it(*(const_cast<List<LEX_USER > *>(except_users)));",
          "content_same": false
        },
        {
          "line": 6978,
          "old_api": "host",
          "new_api": "next",
          "old_text": "role_it->first.host().length()",
          "new_text": "except_users_it.next()",
          "old_line_content": "              (except_user->host.length == role_it->first.host().length()) &&",
          "new_line_content": "        while(LEX_USER *except_user= (LEX_USER *)except_users_it.next())",
          "content_same": false
        },
        {
          "line": 6982,
          "old_api": "host",
          "new_api": "user",
          "old_text": "role_it->first.host().c_str()",
          "new_text": "role_it->first.user().c_str()",
          "old_line_content": "                                 role_it->first.host().c_str(),",
          "new_line_content": "              strncmp(except_user->user.str, role_it->first.user().c_str(),",
          "content_same": false
        },
        {
          "line": 6995,
          "old_api": "host",
          "new_api": "user",
          "old_text": "role_it->first.host().length()",
          "new_text": "role_it->first.user().c_str()",
          "old_line_content": "                                  role_it->first.host().length()},",
          "new_line_content": "        ret= sctx->activate_role({role_it->first.user().c_str(),",
          "content_same": false
        },
        {
          "line": 7018,
          "old_api": "my_ok",
          "new_api": "const_cast<char *>(ref.first.str)",
          "old_text": "my_ok(thd)",
          "new_text": "const_cast<char *>(ref.first.str)",
          "old_line_content": "    my_ok(thd);",
          "new_line_content": "      my_free(const_cast<char *>(ref.first.str));",
          "content_same": false
        },
        {
          "line": 7041,
          "old_api": "begin",
          "new_api": "security_context",
          "old_text": "active_list->begin()",
          "new_text": "thd->security_context()->get_active_roles()",
          "old_line_content": "  std::copy(active_list->begin(),",
          "new_line_content": "    thd->security_context()->get_active_roles();",
          "content_same": false
        },
        {
          "line": 7043,
          "old_api": "std::back_inserter(backup_active_list)",
          "new_api": "size",
          "old_text": "std::back_inserter(backup_active_list)",
          "new_text": "active_list->size()",
          "old_line_content": "            std::back_inserter(backup_active_list));",
          "new_line_content": "  backup_active_list.reserve(active_list->size());",
          "content_same": false
        },
        {
          "line": 7044,
          "old_api": "security_context",
          "new_api": "begin",
          "old_text": "thd->security_context()->get_active_roles()->clear()",
          "new_text": "active_list->begin()",
          "old_line_content": "  thd->security_context()->get_active_roles()->clear();",
          "new_line_content": "  std::copy(active_list->begin(),",
          "content_same": false
        },
        {
          "line": 7045,
          "old_api": "const_cast<List<LEX_USER > *>(role_list)",
          "new_api": "end",
          "old_text": "const_cast<List<LEX_USER > *>(role_list)",
          "new_text": "active_list->end()",
          "old_line_content": "  List_iterator<LEX_USER> it(*(const_cast<List<LEX_USER > *>(role_list)));",
          "new_line_content": "            active_list->end(),",
          "content_same": false
        },
        {
          "line": 7063,
          "old_api": "my_ok",
          "new_api": "const_cast<char *>(ref.first.str)",
          "old_text": "my_ok(thd)",
          "new_text": "const_cast<char *>(ref.first.str)",
          "old_line_content": "    my_ok(thd);",
          "new_line_content": "      my_free(const_cast<char *>(ref.first.str));",
          "content_same": false
        },
        {
          "line": 7074,
          "old_api": "clear",
          "new_api": "security_context",
          "old_text": "active_list->clear()",
          "new_text": "thd->security_context()->priv_host()",
          "old_line_content": "    active_list->clear();",
          "new_line_content": "               thd->security_context()->priv_host().str);",
          "content_same": false
        },
        {
          "line": 7103,
          "old_api": "check_if_granted_role",
          "new_api": "lock",
          "old_text": "check_if_granted_role(user, host, role, role_host)",
          "new_text": "acl_cache_lock.lock(false)",
          "old_line_content": "  ret= check_if_granted_role(user, host, role, role_host);",
          "new_line_content": "  if (!acl_cache_lock.lock(false))",
          "content_same": false
        },
        {
          "line": 7152,
          "old_api": "erase",
          "new_api": "update_table",
          "old_text": "g_dynamic_privileges_map->erase(it)",
          "new_text": "update_table(priv, { str_user, str_host }, false,\n                         Update_dynamic_privilege_table::REVOKE)",
          "old_line_content": "        g_dynamic_privileges_map->erase(it);",
          "new_line_content": "        if (update_table(priv, { str_user, str_host }, false,",
          "content_same": false
        },
        {
          "line": 7163,
          "old_api": "std::make_pair(id,\n                                   std::make_pair(priv, with_grant_option))",
          "new_api": "update_table",
          "old_text": "std::make_pair(id,\n                                   std::make_pair(priv, with_grant_option))",
          "new_text": "update_table(priv, {str_user, str_host}, with_grant_option,\n                   Update_dynamic_privilege_table::GRANT)",
          "old_line_content": "  g_dynamic_privileges_map->insert(std::make_pair(id,",
          "new_line_content": "  if (update_table(priv, {str_user, str_host}, with_grant_option,",
          "content_same": false
        },
        {
          "line": 7200,
          "old_api": "erase",
          "new_api": "update_table",
          "old_text": "g_dynamic_privileges_map->erase(it)",
          "new_text": "update_table(priv, { str_user, str_host }, false,\n                       Update_dynamic_privilege_table::REVOKE)",
          "old_line_content": "      g_dynamic_privileges_map->erase(it);",
          "new_line_content": "      if (update_table(priv, { str_user, str_host }, false,",
          "content_same": false
        },
        {
          "line": 7229,
          "old_api": "equal_range",
          "new_api": "size",
          "old_text": "g_dynamic_privileges_map->equal_range(id)",
          "new_text": "g_dynamic_privileges_map->size()",
          "old_line_content": "    auto range= g_dynamic_privileges_map->equal_range(id);",
          "new_line_content": "  if (g_dynamic_privileges_map->size() > 0)",
          "content_same": false
        },
        {
          "line": 7232,
          "old_api": "update_table",
          "new_api": "equal_range",
          "old_text": "update_table(it->second.first, { user, host }, false,\n                       Update_dynamic_privilege_table::REVOKE)",
          "new_text": "g_dynamic_privileges_map->equal_range(id)",
          "old_line_content": "      if (update_table(it->second.first, { user, host }, false,",
          "new_line_content": "    auto range= g_dynamic_privileges_map->equal_range(id);",
          "content_same": false
        },
        {
          "line": 7365,
          "old_api": "append",
          "new_api": "end",
          "old_text": "error.append(\"No such privilege identifier: \")",
          "new_text": "get_dynamic_privilege_register()->end()",
          "old_line_content": "      error.append(\"No such privilege identifier: \");",
          "new_line_content": "    if (it == get_dynamic_privilege_register()->end())",
          "content_same": false
        },
        {
          "line": 7399,
          "old_api": "clear",
          "new_api": "mysql_mutex_unlock",
          "old_text": "g_mandatory_roles->clear()",
          "new_text": "mysql_mutex_unlock(&LOCK_mandatory_roles)",
          "old_line_content": "  g_mandatory_roles->clear();",
          "new_line_content": "    mysql_mutex_unlock(&LOCK_mandatory_roles);",
          "content_same": false
        },
        {
          "line": 7409,
          "old_api": "get_authid_from_quoted_string",
          "new_api": "append",
          "old_text": "get_authid_from_quoted_string(item)",
          "new_text": "role_str.append(opt_mandatory_roles.str, opt_mandatory_roles.length)",
          "old_line_content": "            auto el= get_authid_from_quoted_string(item);",
          "new_line_content": "  role_str.append(opt_mandatory_roles.str, opt_mandatory_roles.length);",
          "content_same": false
        },
        {
          "line": 7418,
          "old_api": "host",
          "new_api": "user",
          "old_text": "role_id.host().c_str()",
          "new_text": "sql_print_warning(\"Can't set mandatory_role %s@%s: Anonymous \"\n                                \"authorization IDs are not allowed as roles.\",\n                                role_id.user().c_str(),\n                                role_id.host().c_str())",
          "old_line_content": "                                role_id.host().c_str());",
          "new_line_content": "              sql_print_warning(\"Can't set mandatory_role %s@%s: Anonymous \"",
          "content_same": false
        },
        {
          "line": 7420,
          "old_api": "host",
          "new_api": "user",
          "old_text": "role_id.host().c_str()",
          "new_text": "role_id.user().c_str()",
          "old_line_content": "            else if (find_acl_user(role_id.host().c_str(),",
          "new_line_content": "                                role_id.user().c_str(),",
          "content_same": false
        },
        {
          "line": 7421,
          "old_api": "user",
          "new_api": "host",
          "old_text": "role_id.user().c_str()",
          "new_text": "role_id.host().c_str()",
          "old_line_content": "                                   role_id.user().c_str(),",
          "new_line_content": "                                role_id.host().c_str());",
          "content_same": false
        },
        {
          "line": 7424,
          "old_api": "begin",
          "new_api": "user",
          "old_text": "g_mandatory_roles->begin()",
          "new_text": "role_id.user().c_str()",
          "old_line_content": "              if (std::find(g_mandatory_roles->begin(),",
          "new_line_content": "                                   role_id.user().c_str(),",
          "content_same": false
        },
        {
          "line": 7428,
          "old_api": "push_back",
          "new_api": "end",
          "old_text": "mandatory_roles->push_back(role_id)",
          "new_text": "g_mandatory_roles->end()",
          "old_line_content": "                mandatory_roles->push_back(role_id);",
          "new_line_content": "                            g_mandatory_roles->end(),",
          "content_same": false
        },
        {
          "line": 7429,
          "old_api": "push_back",
          "new_api": "end",
          "old_text": "g_mandatory_roles->push_back(role_id)",
          "new_text": "g_mandatory_roles->end()",
          "old_line_content": "                g_mandatory_roles->push_back(role_id);",
          "new_line_content": "                            role_id) == g_mandatory_roles->end())",
          "content_same": false
        },
        {
          "line": 7437,
          "old_api": "host",
          "new_api": "user",
          "old_text": "role_id.host().c_str()",
          "new_text": "sql_print_warning(\"Can't set mandatory_role: There's no such \"\n                                \"authorization ID %s@%s.\",\n                                role_id.user().c_str(),\n                                role_id.host().c_str())",
          "old_line_content": "                                role_id.host().c_str());",
          "new_line_content": "              sql_print_warning(\"Can't set mandatory_role: There's no such \"",
          "content_same": false
        },
        {
          "line": 7473,
          "old_api": "host",
          "new_api": "user",
          "old_text": "a.host().c_str()",
          "new_text": "a.user().length()",
          "old_line_content": "          my_strcasecmp(system_charset_info, a.host().c_str(),",
          "new_line_content": "  return ((a.user().length() == b.first.length) &&",
          "content_same": false
        },
        {
          "line": 7489,
          "old_api": "host",
          "new_api": "user",
          "old_text": "a.second.host().c_str()",
          "new_text": "a.second.user().length()",
          "old_line_content": "          my_strcasecmp(system_charset_info, a.second.host().c_str(),",
          "new_line_content": "  return ((a.second.user().length() == b.first.length) &&",
          "content_same": false
        },
        {
          "line": 7498,
          "old_api": "host",
          "new_api": "user",
          "old_text": "b.host().c_str()",
          "new_text": "b.user()",
          "old_line_content": "                         b.host().c_str()) ==0));",
          "new_line_content": "  return ((a.user() == b.user()) &&",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 4104,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(item->db, db)",
          "old_line_content": "      {",
          "new_line_content": "          strcmp(item->db, db) == 0 &&",
          "content_same": false
        },
        {
          "line": 4106,
          "old_api": null,
          "new_api": "ip",
          "old_text": null,
          "new_text": "sctx->ip()",
          "old_line_content": "      }",
          "new_line_content": "                                      sctx->ip().str))",
          "content_same": false
        },
        {
          "line": 4108,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(FALSE)",
          "old_line_content": "  }",
          "new_line_content": "        DBUG_RETURN(FALSE);",
          "content_same": false
        },
        {
          "line": 6158,
          "old_api": null,
          "new_api": "ha_check_storage_engine_flag",
          "old_text": null,
          "new_text": "ha_check_storage_engine_flag(db_type, HTON_SUPPORTS_FOREIGN_KEYS)",
          "old_line_content": "  for (const Key_spec *key : alter_info->key_list)",
          "new_line_content": "  if (!ha_check_storage_engine_flag(db_type, HTON_SUPPORTS_FOREIGN_KEYS))",
          "content_same": false
        },
        {
          "line": 4113,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(TRUE)",
          "old_line_content": "bool has_any_table_acl(Security_context *sctx, const LEX_CSTRING &str)",
          "new_line_content": "  DBUG_RETURN(TRUE);",
          "content_same": false
        },
        {
          "line": 4118,
          "old_api": null,
          "new_api": "get_active_roles",
          "old_text": null,
          "new_text": "sctx->get_active_roles()->size()",
          "old_line_content": "  }",
          "new_line_content": "  if (sctx->get_active_roles()->size() > 0)",
          "content_same": false
        },
        {
          "line": 6166,
          "old_api": null,
          "new_api": "down_cast<const Foreign_key_spec*>(key)",
          "old_text": null,
          "new_text": "down_cast<const Foreign_key_spec*>(key)",
          "old_line_content": "                    fk_key->ref_table.str, fk_key->ref_table.length,",
          "new_line_content": "      const Foreign_key_spec *fk_key= down_cast<const Foreign_key_spec*>(key);",
          "content_same": false
        },
        {
          "line": 4120,
          "old_api": null,
          "new_api": "any_table_acl",
          "old_text": null,
          "new_text": "sctx->any_table_acl(str)",
          "old_line_content": "}",
          "new_line_content": "    return sctx->any_table_acl(str);",
          "content_same": false
        },
        {
          "line": 6168,
          "old_api": null,
          "new_api": "init_one_table",
          "old_text": null,
          "new_text": "parent_table.init_one_table(fk_key->ref_db.str, fk_key->ref_db.length,\n                    fk_key->ref_table.str, fk_key->ref_table.length,\n                    fk_key->ref_table.str, TL_IGNORE)",
          "old_line_content": "",
          "new_line_content": "      parent_table.init_one_table(fk_key->ref_db.str, fk_key->ref_db.length,",
          "content_same": false
        },
        {
          "line": 4128,
          "old_api": null,
          "new_api": "get_active_roles",
          "old_text": null,
          "new_text": "sctx->get_active_roles()->size()",
          "old_line_content": "  }",
          "new_line_content": "  if (sctx->get_active_roles()->size() > 0)",
          "content_same": false
        },
        {
          "line": 4130,
          "old_api": null,
          "new_api": "any_sp_acl",
          "old_text": null,
          "new_text": "sctx->any_sp_acl(db)",
          "old_line_content": "}",
          "new_line_content": "    return sctx->any_sp_acl(db);",
          "content_same": false
        },
        {
          "line": 6182,
          "old_api": null,
          "new_api": "check_grant",
          "old_text": null,
          "new_text": "check_grant(thd, REFERENCES_ACL, &parent_table, false, 1, true)",
          "old_line_content": "        char fqtn_buff[NAME_LEN + 1 + NAME_LEN + 1];",
          "new_line_content": "           check_grant(thd, REFERENCES_ACL, &parent_table, false, 1, true)) ||",
          "content_same": false
        },
        {
          "line": 6186,
          "old_api": null,
          "new_api": "my_snprintf",
          "old_text": null,
          "new_text": "my_snprintf(fqtn_buff, sizeof(fqtn_buff), \"%s.%s\",\n                    fk_key->ref_db.str, fk_key->ref_table.str)",
          "old_line_content": "                 \"REFERENCES\",",
          "new_line_content": "        my_snprintf(fqtn_buff, sizeof(fqtn_buff), \"%s.%s\",",
          "content_same": false
        },
        {
          "line": 6190,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->priv_user()",
          "old_line_content": "",
          "new_line_content": "                 thd->security_context()->priv_user().str,",
          "content_same": false
        },
        {
          "line": 6191,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->host_or_ip()",
          "old_line_content": "        return true;",
          "new_line_content": "                 thd->security_context()->host_or_ip().str,",
          "content_same": false
        },
        {
          "line": 4145,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"check_table_and_sp_access\")",
          "old_line_content": "  bool error= true;",
          "new_line_content": "  DBUG_ENTER(\"check_table_and_sp_access\");",
          "content_same": false
        },
        {
          "line": 4146,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()",
          "old_line_content": "",
          "new_line_content": "  Security_context *sctx= thd->security_context();",
          "content_same": false
        },
        {
          "line": 4155,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(0)",
          "old_line_content": "  }",
          "new_line_content": "      DBUG_RETURN(0);",
          "content_same": false
        },
        {
          "line": 4156,
          "old_api": null,
          "new_api": "has_any_table_acl",
          "old_text": null,
          "new_text": "has_any_table_acl(sctx, {db, db_len})",
          "old_line_content": "",
          "new_line_content": "    DBUG_RETURN(!has_any_table_acl(sctx, {db, db_len}) &&",
          "content_same": false
        },
        {
          "line": 4161,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "key.push_back('\\0')",
          "old_line_content": "",
          "new_line_content": "  key.push_back('\\0');",
          "content_same": false
        },
        {
          "line": 4162,
          "old_api": null,
          "new_api": "append",
          "old_text": null,
          "new_text": "key.append(db)",
          "old_line_content": "  Acl_cache_lock_guard acl_cache_lock(thd, Acl_cache_lock_mode::READ_MODE);",
          "new_line_content": "  key.append(db);",
          "content_same": false
        },
        {
          "line": 4166,
          "old_api": null,
          "new_api": "lock",
          "old_text": null,
          "new_text": "acl_cache_lock.lock()",
          "old_line_content": "  for (const auto &key_and_value : *column_priv_hash)",
          "new_line_content": "  if (!acl_cache_lock.lock())",
          "content_same": false
        },
        {
          "line": 6215,
          "old_api": null,
          "new_api": "append_identifier",
          "old_text": null,
          "new_text": "append_identifier(&key, user.str, user.length)",
          "old_line_content": "  Role_index_map::iterator it=",
          "new_line_content": "  append_identifier(&key, user.str, user.length);",
          "content_same": false
        },
        {
          "line": 6219,
          "old_api": null,
          "new_api": "c_ptr_quick",
          "old_text": null,
          "new_text": "key.c_ptr_quick()",
          "old_line_content": "     /* Check if role is part of current role graph */",
          "new_line_content": "    g_authid_to_vertex->find(std::string(key.c_ptr_quick()));",
          "content_same": false
        },
        {
          "line": 4172,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "key.size()",
          "old_line_content": "    {",
          "new_line_content": "    if (grant_table->hash_key.compare(0, key.size(), key) == 0 &&",
          "content_same": false
        },
        {
          "line": 4173,
          "old_api": null,
          "new_api": "host",
          "old_text": null,
          "new_text": "sctx->host()",
          "old_line_content": "      error= false; /* Found match. */",
          "new_line_content": "        grant_table->host.compare_hostname(sctx->host().str,",
          "content_same": false
        },
        {
          "line": 6223,
          "old_api": null,
          "new_api": "find_if_granted_role",
          "old_text": null,
          "new_text": "find_if_granted_role(it->second, role, role_host)",
          "old_line_content": "",
          "new_line_content": "    if (find_if_granted_role(it->second, role, role_host))",
          "content_same": false
        },
        {
          "line": 4177,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"info\",(\"Detected table level acl in column_priv_hash\"))",
          "old_line_content": "  }",
          "new_line_content": "      DBUG_PRINT(\"info\",(\"Detected table level acl in column_priv_hash\"));",
          "content_same": false
        },
        {
          "line": 4186,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "proc_priv_hash.get()",
          "old_line_content": "",
          "new_line_content": "    error= check_grant_db_routine(thd, db, proc_priv_hash.get()) &&",
          "content_same": false
        },
        {
          "line": 6235,
          "old_api": null,
          "new_api": "Role_id",
          "old_text": null,
          "new_text": "Role_id(role, role_host)",
          "old_line_content": "  return false;",
          "new_line_content": "    if (rid == Role_id(role, role_host))",
          "content_same": false
        },
        {
          "line": 4190,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(error)",
          "old_line_content": "",
          "new_line_content": "  DBUG_RETURN(error);",
          "content_same": false
        },
        {
          "line": 6260,
          "old_api": null,
          "new_api": "assert_acl_cache_read_lock",
          "old_text": null,
          "new_text": "assert_acl_cache_read_lock(current_thd)",
          "old_line_content": "  /* Iterate all neighboring vertices */",
          "new_line_content": "  DBUG_ASSERT(assert_acl_cache_read_lock(current_thd));",
          "content_same": false
        },
        {
          "line": 6262,
          "old_api": null,
          "new_api": "boost::out_edges(v, *g_granted_roles)",
          "old_text": null,
          "new_text": "boost::out_edges(v, *g_granted_roles)",
          "old_line_content": "  {",
          "new_line_content": "  boost::tie(ei, ei_end)= boost::out_edges(v, *g_granted_roles);",
          "content_same": false
        },
        {
          "line": 4217,
          "old_api": null,
          "new_api": "priv_host",
          "old_text": null,
          "new_text": "sctx->priv_host()",
          "old_line_content": "",
          "new_line_content": "  char *host= (char *) sctx->priv_host().str;",
          "content_same": false
        },
        {
          "line": 4219,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"check_grant_routine\")",
          "old_line_content": "  if (!want_access)",
          "new_line_content": "  DBUG_ENTER(\"check_grant_routine\");",
          "content_same": false
        },
        {
          "line": 6267,
          "old_api": null,
          "new_api": "boost::vertex_acl_user_t()",
          "old_text": null,
          "new_text": "boost::vertex_acl_user_t()",
          "old_line_content": "                                                           *g_granted_roles)",
          "new_line_content": "    ACL_USER acl_user= get(boost::vertex_acl_user_t(),",
          "content_same": false
        },
        {
          "line": 4221,
          "old_api": null,
          "new_api": "master_access",
          "old_text": null,
          "new_text": "sctx->master_access()",
          "old_line_content": "",
          "new_line_content": "  want_access&= ~sctx->master_access();",
          "content_same": false
        },
        {
          "line": 6273,
          "old_api": null,
          "new_api": "get_host_len",
          "old_text": null,
          "new_text": "acl_user.host.get_host_len()",
          "old_line_content": "    {",
          "new_line_content": "        (role_host.length == acl_user.host.get_host_len()) &&",
          "content_same": false
        },
        {
          "line": 4226,
          "old_api": null,
          "new_api": "lock",
          "old_text": null,
          "new_text": "acl_cache_lock.lock()",
          "old_line_content": "  for (table= procs; table; table= table->next_global)",
          "new_line_content": "  if (!acl_cache_lock.lock())",
          "content_same": false
        },
        {
          "line": 4227,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(true)",
          "old_line_content": "  {",
          "new_line_content": "    DBUG_RETURN(true);",
          "content_same": false
        },
        {
          "line": 6274,
          "old_api": null,
          "new_api": "strncmp",
          "old_text": null,
          "new_text": "strncmp(role.str, acl_user.user, role.length)",
          "old_line_content": "      /* Found a vertex matching the active role */",
          "new_line_content": "        !strncmp(role.str, acl_user.user, role.length) &&",
          "content_same": false
        },
        {
          "line": 6275,
          "old_api": null,
          "new_api": "get_host",
          "old_text": null,
          "new_text": "acl_user.host.get_host()",
          "old_line_content": "      if (found_vertex != 0)",
          "new_line_content": "        !strncmp(role_host.str, acl_user.host.get_host(), role_host.length))",
          "content_same": false
        },
        {
          "line": 6279,
          "old_api": null,
          "new_api": "boost::target(*ei, *g_granted_roles)",
          "old_text": null,
          "new_text": "boost::target(*ei, *g_granted_roles)",
          "old_line_content": "  }",
          "new_line_content": "        *found_vertex = boost::target(*ei, *g_granted_roles);",
          "content_same": false
        },
        {
          "line": 4236,
          "old_api": null,
          "new_api": "procedure_acl",
          "old_text": null,
          "new_text": "sctx->procedure_acl({table->db, table->db_length},\n                                 {table->table_name,\n                                  table->table_name_length})",
          "old_line_content": "      }",
          "new_line_content": "        acl= sctx->procedure_acl({table->db, table->db_length},",
          "content_same": false
        },
        {
          "line": 4242,
          "old_api": null,
          "new_api": "function_acl",
          "old_text": null,
          "new_text": "sctx->function_acl({table->db, table->db_length},\n                                {table->table_name,\n                                 table->table_name_length})",
          "old_line_content": "      }",
          "new_line_content": "        acl= sctx->function_acl({table->db, table->db_length},",
          "content_same": false
        },
        {
          "line": 6290,
          "old_api": null,
          "new_api": "assert_acl_cache_read_lock",
          "old_text": null,
          "new_text": "assert_acl_cache_read_lock(current_thd)",
          "old_line_content": "  /* Iterate all neighboring vertices */",
          "new_line_content": "  DBUG_ASSERT(assert_acl_cache_read_lock(current_thd));",
          "content_same": false
        },
        {
          "line": 6292,
          "old_api": null,
          "new_api": "boost::out_edges(v, *g_granted_roles)",
          "old_text": null,
          "new_text": "boost::out_edges(v, *g_granted_roles)",
          "old_line_content": "  {",
          "new_line_content": "  boost::tie(ei, ei_end) = boost::out_edges(v, *g_granted_roles);",
          "content_same": false
        },
        {
          "line": 4247,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"info\",(\"Checking Acl_map for proc acls in %s.%s; \"\n                         \"found %lu\", table->db, table->table_name,\n                         table->grant.privilege))",
          "old_line_content": "    }",
          "new_line_content": "      DBUG_PRINT(\"info\",(\"Checking Acl_map for proc acls in %s.%s; \"",
          "content_same": false
        },
        {
          "line": 6297,
          "old_api": null,
          "new_api": "boost::vertex_acl_user_t()",
          "old_text": null,
          "new_text": "boost::vertex_acl_user_t()",
          "old_line_content": "             ];",
          "new_line_content": "    ACL_USER acl_user = get(boost::vertex_acl_user_t(), *g_granted_roles)",
          "content_same": false
        },
        {
          "line": 6299,
          "old_api": null,
          "new_api": "boost::target(*ei, *g_granted_roles)",
          "old_text": null,
          "new_text": "boost::target(*ei, *g_granted_roles)",
          "old_line_content": "                        boost::edge_capacity_t>::type edge_with_admin;",
          "new_line_content": "               boost::target(*ei, *g_granted_roles)",
          "content_same": false
        },
        {
          "line": 4254,
          "old_api": null,
          "new_api": "ip",
          "old_text": null,
          "new_text": "sctx->ip()",
          "old_line_content": "        table->grant.privilege|= grant_proc->privs;",
          "new_line_content": "      if ((grant_proc= routine_hash_search(host, sctx->ip().str, table->db, user,",
          "content_same": false
        },
        {
          "line": 6303,
          "old_api": null,
          "new_api": "boost::edge_capacity_t()",
          "old_text": null,
          "new_text": "boost::edge_capacity_t()",
          "old_line_content": "    tmp_user.str= acl_user.user;",
          "new_line_content": "    edge_with_admin= boost::get(boost::edge_capacity_t(), *g_granted_roles);",
          "content_same": false
        },
        {
          "line": 4258,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"info\",(\"Checking for routine acls in %s; \"\n                           \"found %lu\", table->db, grant_proc->privs))",
          "old_line_content": "    }",
          "new_line_content": "        DBUG_PRINT(\"info\",(\"Checking for routine acls in %s; \"",
          "content_same": false
        },
        {
          "line": 6307,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(acl_user.user)",
          "old_line_content": "    Role_id id(tmp_user, tmp_host);",
          "new_line_content": "    tmp_user.length= strlen(acl_user.user);",
          "content_same": false
        },
        {
          "line": 6309,
          "old_api": null,
          "new_api": "get_host_len",
          "old_text": null,
          "new_text": "acl_user.host.get_host_len()",
          "old_line_content": "  }",
          "new_line_content": "    tmp_host.length= acl_user.host.get_host_len();",
          "content_same": false
        },
        {
          "line": 6311,
          "old_api": null,
          "new_api": "f",
          "old_text": null,
          "new_text": "f(id, with_admin_opt != 0)",
          "old_line_content": "}",
          "new_line_content": "    f(id, with_admin_opt != 0);",
          "content_same": false
        },
        {
          "line": 4268,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(false)",
          "old_line_content": "  if (!no_errors)",
          "new_line_content": "  DBUG_RETURN(false);",
          "content_same": false
        },
        {
          "line": 4276,
          "old_api": null,
          "new_api": "strxmov",
          "old_text": null,
          "new_text": "strxmov(buff, table->db, \".\", table->table_name, NullS)",
          "old_line_content": "    else if (want_access & ALTER_PROC_ACL)",
          "new_line_content": "      strxmov(buff, table->db, \".\", table->table_name, NullS);",
          "content_same": false
        },
        {
          "line": 6331,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"get_granted_roles\")",
          "old_line_content": "          {",
          "new_line_content": "  DBUG_ENTER(\"get_granted_roles\");",
          "content_same": false
        },
        {
          "line": 6333,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "get_granted_roles(v, [&](const Role_id &rid, bool with_admin_opt)\n          {\n            granted_roles->push_back(std::make_pair(rid, with_admin_opt));\n          })",
          "old_line_content": "          });",
          "new_line_content": "  get_granted_roles(v, [&](const Role_id &rid, bool with_admin_opt)",
          "content_same": false
        },
        {
          "line": 4286,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(true)",
          "old_line_content": "",
          "new_line_content": "  DBUG_RETURN(true);",
          "content_same": false
        },
        {
          "line": 6335,
          "old_api": null,
          "new_api": "std::make_pair(rid, with_admin_opt)",
          "old_text": null,
          "new_text": "std::make_pair(rid, with_admin_opt)",
          "old_line_content": "}",
          "new_line_content": "            granted_roles->push_back(std::make_pair(rid, with_admin_opt));",
          "content_same": false
        },
        {
          "line": 6344,
          "old_api": null,
          "new_api": "create_authid_str_from",
          "old_text": null,
          "new_text": "create_authid_str_from(acl_user)",
          "old_line_content": "    return; // No user vertex founds",
          "new_line_content": "  std::string key= create_authid_str_from(acl_user);",
          "content_same": false
        },
        {
          "line": 6346,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "g_authid_to_vertex->end()",
          "old_line_content": "  {",
          "new_line_content": "  if (it == g_authid_to_vertex->end())",
          "content_same": false
        },
        {
          "line": 6350,
          "old_api": null,
          "new_api": "user",
          "old_text": null,
          "new_text": "rid.user().length()",
          "old_line_content": "  });",
          "new_line_content": "    LEX_CSTRING str_user= {rid.user().c_str(), rid.user().length()};",
          "content_same": false
        },
        {
          "line": 6351,
          "old_api": null,
          "new_api": "host",
          "old_text": null,
          "new_text": "rid.host().length()",
          "old_line_content": "  std::vector<Role_id > mandatory_roles;",
          "new_line_content": "    LEX_CSTRING str_host= {rid.host().c_str(), rid.host().length()};",
          "content_same": false
        },
        {
          "line": 6358,
          "old_api": null,
          "new_api": "user",
          "old_text": null,
          "new_text": "rid.user().length()",
          "old_line_content": "  }",
          "new_line_content": "    LEX_CSTRING str_user= {rid.user().c_str(), rid.user().length()};",
          "content_same": false
        },
        {
          "line": 4311,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()",
          "old_line_content": "    return no_routine_acl;",
          "new_line_content": "  Security_context *sctx= thd->security_context();",
          "content_same": false
        },
        {
          "line": 6359,
          "old_api": null,
          "new_api": "host",
          "old_text": null,
          "new_text": "rid.host().length()",
          "old_line_content": "}",
          "new_line_content": "    LEX_CSTRING str_host= {rid.host().c_str(), rid.host().length()};",
          "content_same": false
        },
        {
          "line": 6360,
          "old_api": null,
          "new_api": "activate_role",
          "old_text": null,
          "new_text": "sctx->activate_role(str_user, str_host, false)",
          "old_line_content": "",
          "new_line_content": "    sctx->activate_role(str_user, str_host, false);",
          "content_same": false
        },
        {
          "line": 4316,
          "old_api": null,
          "new_api": "priv_host",
          "old_text": null,
          "new_text": "sctx->priv_host()",
          "old_line_content": "                                       name, is_proc, 0)))",
          "new_line_content": "  if ((grant_proc= routine_hash_search(sctx->priv_host().str,",
          "content_same": false
        },
        {
          "line": 4317,
          "old_api": null,
          "new_api": "ip",
          "old_text": null,
          "new_text": "sctx->ip()",
          "old_line_content": "    no_routine_acl= !(grant_proc->privs & SHOW_PROC_ACLS);",
          "new_line_content": "                                       sctx->ip().str, db,",
          "content_same": false
        },
        {
          "line": 4321,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(no_routine_acl)",
          "old_line_content": "",
          "new_line_content": "  DBUG_RETURN(no_routine_acl);",
          "content_same": false
        },
        {
          "line": 6377,
          "old_api": null,
          "new_api": "create_authid_str_from",
          "old_text": null,
          "new_text": "create_authid_str_from(user)",
          "old_line_content": "  {",
          "new_line_content": "  std::string str_user= create_authid_str_from(user);",
          "content_same": false
        },
        {
          "line": 6379,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "g_authid_to_vertex->end()",
          "old_line_content": "  }",
          "new_line_content": "      g_authid_to_vertex->end())",
          "content_same": false
        },
        {
          "line": 4332,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()",
          "old_line_content": "  Acl_cache_lock_guard acl_cache_lock(thd, Acl_cache_lock_mode::READ_MODE);",
          "new_line_content": "  Security_context *sctx= thd->security_context();",
          "content_same": false
        },
        {
          "line": 4333,
          "old_api": null,
          "new_api": "db",
          "old_text": null,
          "new_text": "thd->db()",
          "old_line_content": "",
          "new_line_content": "  const char *db = table->db ? table->db : thd->db().str;",
          "content_same": false
        },
        {
          "line": 6381,
          "old_api": null,
          "new_api": "get_granted_roles",
          "old_text": null,
          "new_text": "get_granted_roles(it->second, granted_roles)",
          "old_line_content": "",
          "new_line_content": "    get_granted_roles(it->second, granted_roles);",
          "content_same": false
        },
        {
          "line": 4340,
          "old_api": null,
          "new_api": "host",
          "old_text": null,
          "new_text": "sctx->host()",
          "old_line_content": "  table->grant.grant_table=grant_table; // Remember for column test",
          "new_line_content": "  grant_table= table_hash_search(sctx->host().str,",
          "content_same": false
        },
        {
          "line": 4341,
          "old_api": null,
          "new_api": "priv_user",
          "old_text": null,
          "new_text": "sctx->priv_user()",
          "old_line_content": "  table->grant.version=grant_version;",
          "new_line_content": "                                 sctx->ip().str, db, sctx->priv_user().str,",
          "content_same": false
        },
        {
          "line": 6398,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->get_active_roles()",
          "old_line_content": "  }",
          "new_line_content": "  for (auto &ref : *thd->security_context()->get_active_roles())",
          "content_same": false
        },
        {
          "line": 6400,
          "old_api": null,
          "new_api": "Role_id",
          "old_text": null,
          "new_text": "Role_id(ref.first, ref.second)",
          "old_line_content": "",
          "new_line_content": "    roles->push_back(std::make_pair(Role_id(ref.first, ref.second),false));",
          "content_same": false
        },
        {
          "line": 6420,
          "old_api": null,
          "new_api": "set_ascii",
          "old_text": null,
          "new_text": "active_role->set_ascii(\"NONE\", 4)",
          "old_line_content": "  }",
          "new_line_content": "    active_role->set_ascii(\"NONE\", 4);",
          "content_same": false
        },
        {
          "line": 6424,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "roles.end()",
          "old_line_content": "  {",
          "new_line_content": "  std::sort(roles.begin(), roles.end());",
          "content_same": false
        },
        {
          "line": 4380,
          "old_api": null,
          "new_api": "lock",
          "old_text": null,
          "new_text": "acl_cache_lock.lock(false)",
          "old_line_content": "  /* reload table if someone has modified any grants */",
          "new_line_content": "  if (!acl_cache_lock.lock(false))",
          "content_same": false
        },
        {
          "line": 6430,
          "old_api": null,
          "new_api": "append",
          "old_text": null,
          "new_text": "active_role->append(',')",
          "old_line_content": "    {",
          "new_line_content": "      active_role->append(',');",
          "content_same": false
        },
        {
          "line": 4390,
          "old_api": null,
          "new_api": "get_active_roles",
          "old_text": null,
          "new_text": "sctx->get_active_roles()->size()",
          "old_line_content": "    Grant_table_aggregate aggr=",
          "new_line_content": "  if (sctx->get_active_roles()->size() != 0 && !grant->grant_table)",
          "content_same": false
        },
        {
          "line": 6438,
          "old_api": null,
          "new_api": "append",
          "old_text": null,
          "new_text": "active_role->append(\"@\")",
          "old_line_content": "  }",
          "new_line_content": "    active_role->append(\"@\");",
          "content_same": false
        },
        {
          "line": 6439,
          "old_api": null,
          "new_api": "host",
          "old_text": null,
          "new_text": "rid.first.host().c_str()",
          "old_line_content": "  if (str != 0)",
          "new_line_content": "    append_identifier(thd, active_role, rid.first.host().c_str(),",
          "content_same": false
        },
        {
          "line": 6440,
          "old_api": null,
          "new_api": "host",
          "old_text": null,
          "new_text": "rid.first.host().length()",
          "old_line_content": "  {",
          "new_line_content": "                      rid.first.host().length());",
          "content_same": false
        },
        {
          "line": 4394,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(db_name)",
          "old_line_content": "    priv|= aggr.table_access;",
          "new_line_content": "      sctx->table_and_column_acls({(const char*)db_name, strlen(db_name)},",
          "content_same": false
        },
        {
          "line": 4396,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(table_name)",
          "old_line_content": "    std::string q_name;",
          "new_line_content": "                                   strlen(table_name)});",
          "content_same": false
        },
        {
          "line": 6444,
          "old_api": null,
          "new_api": "copy",
          "old_text": null,
          "new_text": "str->copy(*active_role)",
          "old_line_content": "  return active_role;",
          "new_line_content": "    str->copy(*active_role);",
          "content_same": false
        },
        {
          "line": 4402,
          "old_api": null,
          "new_api": "c_str",
          "old_text": null,
          "new_text": "q_name.c_str()",
          "old_line_content": "      priv|= it->second;",
          "new_line_content": "      aggr.columns.find(std::string(q_name.c_str()));",
          "content_same": false
        },
        {
          "line": 4403,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "aggr.columns.end()",
          "old_line_content": "    }",
          "new_line_content": "    if (it != aggr.columns.end())",
          "content_same": false
        },
        {
          "line": 4415,
          "old_api": null,
          "new_api": "ip",
          "old_text": null,
          "new_text": "sctx->ip()",
          "old_line_content": "      grant->version= grant_version;              /* purecov: inspected */",
          "new_line_content": "        table_hash_search(sctx->host().str, sctx->ip().str,",
          "content_same": false
        },
        {
          "line": 4416,
          "old_api": null,
          "new_api": "priv_user",
          "old_text": null,
          "new_text": "sctx->priv_user()",
          "old_line_content": "    }",
          "new_line_content": "                          db_name, sctx->priv_user().str,",
          "content_same": false
        },
        {
          "line": 6466,
          "old_api": null,
          "new_api": "create_authid_from",
          "old_text": null,
          "new_text": "create_authid_from(role_it->second)",
          "old_line_content": "}",
          "new_line_content": "    Auth_id_ref ref= create_authid_from(role_it->second);",
          "content_same": false
        },
        {
          "line": 6467,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "authlist->push_back(ref)",
          "old_line_content": "",
          "new_line_content": "    authlist->push_back(ref);",
          "content_same": false
        },
        {
          "line": 4425,
          "old_api": null,
          "new_api": "column_hash_search",
          "old_text": null,
          "new_text": "column_hash_search(grant_table, field_name,\n                                       strlen(field_name))",
          "old_line_content": "        priv= (grant->privilege | grant_table->privs);",
          "new_line_content": "      grant_column= column_hash_search(grant_table, field_name,",
          "content_same": false
        },
        {
          "line": 4426,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(field_name)",
          "old_line_content": "      else",
          "new_line_content": "                                       strlen(field_name));",
          "content_same": false
        },
        {
          "line": 4444,
          "old_api": null,
          "new_api": "DBUG_ASSERT",
          "old_text": null,
          "new_text": "DBUG_ASSERT(max_length >= 30)",
          "old_line_content": "  {",
          "new_line_content": "  DBUG_ASSERT(max_length >= 30);                // For end ', ' removal",
          "content_same": false
        },
        {
          "line": 6492,
          "old_api": null,
          "new_api": "equal_range",
          "old_text": null,
          "new_text": "g_default_roles->equal_range(user_role_id)",
          "old_line_content": "  {",
          "new_line_content": "  boost::tie(begin_it, role_end)= g_default_roles->equal_range(user_role_id);",
          "content_same": false
        },
        {
          "line": 4452,
          "old_api": null,
          "new_api": "uint) (to-start)",
          "old_text": null,
          "new_text": "uint) (to-start)",
          "old_line_content": "        *to++= ',';",
          "new_line_content": "          command_lengths[pos] + (uint) (to-start) < max_length)",
          "content_same": false
        },
        {
          "line": 6500,
          "old_api": null,
          "new_api": "create_authid_from",
          "old_text": null,
          "new_text": "create_authid_from(role_it->second)",
          "old_line_content": "  }",
          "new_line_content": "    Auth_id_ref role_auth_id= create_authid_from(role_it->second);",
          "content_same": false
        },
        {
          "line": 4454,
          "old_api": null,
          "new_api": "my_stpcpy",
          "old_text": null,
          "new_text": "my_stpcpy(to, command_array[pos])",
          "old_line_content": "      }",
          "new_line_content": "        to= my_stpcpy(to, command_array[pos]);",
          "content_same": false
        },
        {
          "line": 6504,
          "old_api": null,
          "new_api": "erase",
          "old_text": null,
          "new_text": "g_default_roles->erase(begin_it, role_end)",
          "old_line_content": "",
          "new_line_content": "  g_default_roles->erase(begin_it, role_end);",
          "content_same": false
        },
        {
          "line": 6505,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(false)",
          "old_line_content": "bool mysql_clear_default_roles(THD *thd, LEX_USER *user)",
          "new_line_content": "  DBUG_RETURN(false);",
          "content_same": false
        },
        {
          "line": 6521,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(MY_WME)",
          "old_line_content": "",
          "new_line_content": "    my_error(ER_OPEN_ROLE_TABLES, MYF(MY_WME));",
          "content_same": false
        },
        {
          "line": 4477,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "str.length()",
          "old_line_content": "  std::stringstream ss;",
          "new_line_content": "  if (str.length() == 0)",
          "content_same": false
        },
        {
          "line": 6526,
          "old_api": null,
          "new_api": "lock",
          "old_text": null,
          "new_text": "acl_cache_lock.lock()",
          "old_line_content": "    return true;",
          "new_line_content": "  if (!acl_cache_lock.lock())",
          "content_same": false
        },
        {
          "line": 4479,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "str.begin()",
          "old_line_content": "  bool q2= false;",
          "new_line_content": "  std::string::iterator i= str.begin();",
          "content_same": false
        },
        {
          "line": 6528,
          "old_api": null,
          "new_api": "commit_and_close_mysql_tables",
          "old_text": null,
          "new_text": "commit_and_close_mysql_tables(thd)",
          "old_line_content": "",
          "new_line_content": "    commit_and_close_mysql_tables(thd);",
          "content_same": false
        },
        {
          "line": 4484,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "str.end()",
          "old_line_content": "    {",
          "new_line_content": "  while(i != str.end())",
          "content_same": false
        },
        {
          "line": 6532,
          "old_api": null,
          "new_api": "create_authid_from",
          "old_text": null,
          "new_text": "create_authid_from(user)",
          "old_line_content": "",
          "new_line_content": "  Auth_id_ref authid= create_authid_from(user);",
          "content_same": false
        },
        {
          "line": 6536,
          "old_api": null,
          "new_api": "log_and_commit_acl_ddl",
          "old_text": null,
          "new_text": "log_and_commit_acl_ddl(thd, true, NULL, ret)",
          "old_line_content": "}",
          "new_line_content": "  result= log_and_commit_acl_ddl(thd, true, NULL, ret);",
          "content_same": false
        },
        {
          "line": 6537,
          "old_api": null,
          "new_api": "increase_version",
          "old_text": null,
          "new_text": "get_global_acl_cache()->increase_version()",
          "old_line_content": "",
          "new_line_content": "  get_global_acl_cache()->increase_version();",
          "content_same": false
        },
        {
          "line": 4509,
          "old_api": null,
          "new_api": "str",
          "old_text": null,
          "new_text": "ss.str()",
          "old_line_content": "      ++i;",
          "new_line_content": "      if (f(ss.str()))",
          "content_same": false
        },
        {
          "line": 4511,
          "old_api": null,
          "new_api": "str",
          "old_text": null,
          "new_text": "ss.str(\"\")",
          "old_line_content": "    }",
          "new_line_content": "      ss.str(\"\");",
          "content_same": false
        },
        {
          "line": 6567,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(MY_WME)",
          "old_line_content": "",
          "new_line_content": "    my_error(ER_OPEN_ROLE_TABLES, MYF(MY_WME));",
          "content_same": false
        },
        {
          "line": 4523,
          "old_api": null,
          "new_api": "str",
          "old_text": null,
          "new_text": "ss.str()",
          "old_line_content": "",
          "new_line_content": "  f(ss.str());",
          "content_same": false
        },
        {
          "line": 6572,
          "old_api": null,
          "new_api": "lock",
          "old_text": null,
          "new_text": "acl_cache_lock.lock()",
          "old_line_content": "    return true;",
          "new_line_content": "  if (!acl_cache_lock.lock())",
          "content_same": false
        },
        {
          "line": 6574,
          "old_api": null,
          "new_api": "commit_and_close_mysql_tables",
          "old_text": null,
          "new_text": "commit_and_close_mysql_tables(thd)",
          "old_line_content": "",
          "new_line_content": "    commit_and_close_mysql_tables(thd);",
          "content_same": false
        },
        {
          "line": 6578,
          "old_api": null,
          "new_api": "create_authid_str_from",
          "old_text": null,
          "new_text": "create_authid_str_from(user)",
          "old_line_content": "  {",
          "new_line_content": "  std::string authid_role= create_authid_str_from(user);",
          "content_same": false
        },
        {
          "line": 6579,
          "old_api": null,
          "new_api": "find",
          "old_text": null,
          "new_text": "g_authid_to_vertex->find(authid_role)",
          "old_line_content": "    /* No such user */",
          "new_line_content": "  Role_index_map::iterator it= g_authid_to_vertex->find(authid_role);",
          "content_same": false
        },
        {
          "line": 6583,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(MY_WME)",
          "old_line_content": "  List_of_granted_roles granted_roles;",
          "new_line_content": "    my_error(ER_UNKNOWN_AUTHID, MYF(MY_WME), user->user.str, user->host.str);",
          "content_same": false
        },
        {
          "line": 6587,
          "old_api": null,
          "new_api": "get_granted_roles",
          "old_text": null,
          "new_text": "get_granted_roles(it->second, &granted_roles)",
          "old_line_content": "  {",
          "new_line_content": "  get_granted_roles(it->second, &granted_roles);",
          "content_same": false
        },
        {
          "line": 4543,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "str.end()",
          "old_line_content": "    {",
          "new_line_content": "  for (i= str.begin(); i != str.end(); ++i)",
          "content_same": false
        },
        {
          "line": 6591,
          "old_api": null,
          "new_api": "create_authid_from",
          "old_text": null,
          "new_text": "create_authid_from(role.first)",
          "old_line_content": "  std::vector<Role_id> mandatory_roles;",
          "new_line_content": "    Auth_id_ref authid= create_authid_from(role.first);",
          "content_same": false
        },
        {
          "line": 6598,
          "old_api": null,
          "new_api": "create_authid_from",
          "old_text": null,
          "new_text": "create_authid_from(role)",
          "old_line_content": "                        authid);",
          "new_line_content": "    Auth_id_ref authid= create_authid_from(role);",
          "content_same": false
        },
        {
          "line": 6600,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "new_default_role_ref.end()",
          "old_line_content": "    {",
          "new_line_content": "                        new_default_role_ref.end(),",
          "content_same": false
        },
        {
          "line": 6602,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "new_default_role_ref.end()",
          "old_line_content": "    }",
          "new_line_content": "    if (res == new_default_role_ref.end())",
          "content_same": false
        },
        {
          "line": 6607,
          "old_api": null,
          "new_api": "alter_user_set_default_roles",
          "old_text": null,
          "new_text": "alter_user_set_default_roles(thd, table, user,\n                                            new_default_role_ref)",
          "old_line_content": "  {",
          "new_line_content": "  bool errors= alter_user_set_default_roles(thd, table, user,",
          "content_same": false
        },
        {
          "line": 6614,
          "old_api": null,
          "new_api": "log_and_commit_acl_ddl",
          "old_text": null,
          "new_text": "log_and_commit_acl_ddl(thd, true)",
          "old_line_content": "}",
          "new_line_content": "  errors= log_and_commit_acl_ddl(thd, true);",
          "content_same": false
        },
        {
          "line": 6615,
          "old_api": null,
          "new_api": "increase_version",
          "old_text": null,
          "new_text": "get_global_acl_cache()->increase_version()",
          "old_line_content": "",
          "new_line_content": "  get_global_acl_cache()->increase_version();",
          "content_same": false
        },
        {
          "line": 4587,
          "old_api": null,
          "new_api": "str",
          "old_text": null,
          "new_text": "host.str()",
          "old_line_content": "bool operator==(const std::pair<Role_id, bool> &rid, const Auth_id_ref &ref)",
          "new_line_content": "  return std::make_pair(user.str(), host.str());",
          "content_same": false
        },
        {
          "line": 6635,
          "old_api": null,
          "new_api": "find_acl_user",
          "old_text": null,
          "new_text": "find_acl_user(user->host.str, user->user.str, true)",
          "old_line_content": "  bool errors= false;",
          "new_line_content": "  ACL_USER *acl_user = find_acl_user(user->host.str, user->user.str, true);",
          "content_same": false
        },
        {
          "line": 4592,
          "old_api": null,
          "new_api": "std::string(ref.first.str, ref.first.length)",
          "old_text": null,
          "new_text": "std::string(ref.first.str, ref.first.length)",
          "old_line_content": "",
          "new_line_content": "  return (rid.first.user() == std::string(ref.first.str, ref.first.length) &&",
          "content_same": false
        },
        {
          "line": 4593,
          "old_api": null,
          "new_api": "std::string(ref.second.str,ref.second.length)",
          "old_text": null,
          "new_text": "std::string(ref.second.str,ref.second.length)",
          "old_line_content": "bool operator==(const Auth_id_ref &ref, const std::pair<Role_id, bool> &rid)",
          "new_line_content": "          rid.first.host() == std::string(ref.second.str,ref.second.length));",
          "content_same": false
        },
        {
          "line": 6642,
          "old_api": null,
          "new_api": "create_authid_from",
          "old_text": null,
          "new_text": "create_authid_from(user)",
          "old_line_content": "    for( ;role_it != role_end && !errors; ++role_it)",
          "new_line_content": "    Auth_id_ref user_auth_id= create_authid_from(user);",
          "content_same": false
        },
        {
          "line": 6650,
          "old_api": null,
          "new_api": "create_authid_from",
          "old_text": null,
          "new_text": "create_authid_from(role_it->second)",
          "old_line_content": "      }",
          "new_line_content": "        Auth_id_ref role_auth_id= create_authid_from(role_it->second);",
          "content_same": false
        },
        {
          "line": 6651,
          "old_api": null,
          "new_api": "modify_default_roles_in_table",
          "old_text": null,
          "new_text": "modify_default_roles_in_table(thd, table, user_auth_id,\n                                              role_auth_id, true)",
          "old_line_content": "    }",
          "new_line_content": "        errors= modify_default_roles_in_table(thd, table, user_auth_id,",
          "content_same": false
        },
        {
          "line": 6655,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "new_auth_ids.begin()",
          "old_line_content": "    {",
          "new_line_content": "    List_of_auth_id_refs::const_iterator it= new_auth_ids.begin();",
          "content_same": false
        },
        {
          "line": 6657,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "new_auth_ids.end()",
          "old_line_content": "      {",
          "new_line_content": "    for( ;it != new_auth_ids.end() && !errors; ++it)",
          "content_same": false
        },
        {
          "line": 6659,
          "old_api": null,
          "new_api": "find",
          "old_text": null,
          "new_text": "find(role_it, role_end, *it)",
          "old_line_content": "                                              false);",
          "new_line_content": "      if (find(role_it, role_end, *it) == role_end)",
          "content_same": false
        },
        {
          "line": 4613,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"get_privilege_access_maps\")",
          "old_line_content": "  boost::graph_traits<Granted_roles_graph>::edge_iterator ei, ei_end;",
          "new_line_content": "  DBUG_ENTER(\"get_privilege_access_maps\");",
          "content_same": false
        },
        {
          "line": 4614,
          "old_api": null,
          "new_api": "assert_acl_cache_read_lock",
          "old_text": null,
          "new_text": "assert_acl_cache_read_lock(current_thd)",
          "old_line_content": "  /* First we check the current users access control */",
          "new_line_content": "  DBUG_ASSERT(assert_acl_cache_read_lock(current_thd));",
          "content_same": false
        },
        {
          "line": 6661,
          "old_api": null,
          "new_api": "modify_default_roles_in_table",
          "old_text": null,
          "new_text": "modify_default_roles_in_table(thd, table, user_auth_id, *it,\n                                              false)",
          "old_line_content": "    }",
          "new_line_content": "        errors= modify_default_roles_in_table(thd, table, user_auth_id, *it,",
          "content_same": false
        },
        {
          "line": 6666,
          "old_api": null,
          "new_api": "erase",
          "old_text": null,
          "new_text": "g_default_roles->erase(role_it, role_end)",
          "old_line_content": "    {",
          "new_line_content": "    g_default_roles->erase(role_it, role_end);",
          "content_same": false
        },
        {
          "line": 6667,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "new_auth_ids.begin()",
          "old_line_content": "      Role_id role_role_id(*it);",
          "new_line_content": "    it= new_auth_ids.begin();",
          "content_same": false
        },
        {
          "line": 4621,
          "old_api": null,
          "new_api": "get_host",
          "old_text": null,
          "new_text": "acl_user->host.get_host()",
          "old_line_content": "  // Get table- and column privileges",
          "new_line_content": "                     acl_user->host.get_host(),acl_user->access));",
          "content_same": false
        },
        {
          "line": 4623,
          "old_api": null,
          "new_api": "get_database_access_map",
          "old_text": null,
          "new_text": "get_database_access_map(acl_user, db_map, db_wild_map)",
          "old_line_content": "  // get stored procedure privileges",
          "new_line_content": "  get_database_access_map(acl_user, db_map, db_wild_map);",
          "content_same": false
        },
        {
          "line": 6671,
          "old_api": null,
          "new_api": "std::make_pair(user_role_id, role_role_id)",
          "old_text": null,
          "new_text": "std::make_pair(user_role_id, role_role_id)",
          "old_line_content": "  return errors;",
          "new_line_content": "      g_default_roles->insert(std::make_pair(user_role_id, role_role_id));",
          "content_same": false
        },
        {
          "line": 4625,
          "old_api": null,
          "new_api": "get_table_access_map",
          "old_text": null,
          "new_text": "get_table_access_map(acl_user, table_map)",
          "old_line_content": "  // get user function privileges",
          "new_line_content": "  get_table_access_map(acl_user, table_map);",
          "content_same": false
        },
        {
          "line": 4627,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "proc_priv_hash.get()",
          "old_line_content": "  // get dynamic privileges",
          "new_line_content": "  get_sp_access_map(acl_user, sp_map, proc_priv_hash.get());",
          "content_same": false
        },
        {
          "line": 4629,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "func_priv_hash.get()",
          "old_line_content": "",
          "new_line_content": "  get_sp_access_map(acl_user, func_map, func_priv_hash.get());",
          "content_same": false
        },
        {
          "line": 4631,
          "old_api": null,
          "new_api": "get_dynamic_privileges",
          "old_text": null,
          "new_text": "get_dynamic_privileges(acl_user, dynamic_acl)",
          "old_line_content": "  if (acl_user->user == 0)",
          "new_line_content": "  get_dynamic_privileges(acl_user, dynamic_acl);",
          "content_same": false
        },
        {
          "line": 4648,
          "old_api": null,
          "new_api": "create_authid_str_from",
          "old_text": null,
          "new_text": "create_authid_str_from(acl_user)",
          "old_line_content": "  bool has_granted_roles= (ei != ei_end);",
          "new_line_content": "  std::string user_key= create_authid_str_from(acl_user);",
          "content_same": false
        },
        {
          "line": 4650,
          "old_api": null,
          "new_api": "find",
          "old_text": null,
          "new_text": "g_authid_to_vertex->find(user_key)",
          "old_line_content": "  std::set<Role_id > all_granted_roles;",
          "new_line_content": "    g_authid_to_vertex->find(user_key);",
          "content_same": false
        },
        {
          "line": 4656,
          "old_api": null,
          "new_api": "boost::num_vertices(*g_granted_roles)",
          "old_text": null,
          "new_text": "boost::num_vertices(*g_granted_roles)",
          "old_line_content": "                    func_map, with_admin_acl, dynamic_acl);",
          "new_line_content": "    v_color(boost::num_vertices(*g_granted_roles));",
          "content_same": false
        },
        {
          "line": 6706,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(MY_WME)",
          "old_line_content": "",
          "new_line_content": "    my_error(ER_OPEN_ROLE_TABLES, MYF(MY_WME));",
          "content_same": false
        },
        {
          "line": 4660,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "mandatory_roles.size()",
          "old_line_content": "    if (!acl_user_has_vertex)",
          "new_line_content": "  if (has_granted_roles || mandatory_roles.size() > 0)",
          "content_same": false
        },
        {
          "line": 4662,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "g_authid_to_vertex->end()",
          "old_line_content": "    user_vertex = user_vertex_it->second;",
          "new_line_content": "    bool acl_user_has_vertex= (user_vertex_it != g_authid_to_vertex->end());",
          "content_same": false
        },
        {
          "line": 6711,
          "old_api": null,
          "new_api": "lock",
          "old_text": null,
          "new_text": "acl_cache_lock.lock()",
          "old_line_content": "    return true;",
          "new_line_content": "  if (!acl_cache_lock.lock())",
          "content_same": false
        },
        {
          "line": 6713,
          "old_api": null,
          "new_api": "commit_and_close_mysql_tables",
          "old_text": null,
          "new_text": "commit_and_close_mysql_tables(thd)",
          "old_line_content": "",
          "new_line_content": "    commit_and_close_mysql_tables(thd);",
          "content_same": false
        },
        {
          "line": 4671,
          "old_api": null,
          "new_api": "insert",
          "old_text": null,
          "new_text": "all_granted_roles.insert(rid)",
          "old_line_content": "      for (auto &rid : mandatory_roles)",
          "new_line_content": "            all_granted_roles.insert(rid);",
          "content_same": false
        },
        {
          "line": 4672,
          "old_api": null,
          "new_api": "std::make_pair(rid, with_admin)",
          "old_text": null,
          "new_text": "std::make_pair(rid, with_admin)",
          "old_line_content": "      {",
          "new_line_content": "            granted_roles->push_back(std::make_pair(rid, with_admin));",
          "content_same": false
        },
        {
          "line": 6723,
          "old_api": null,
          "new_api": "log_and_commit_acl_ddl",
          "old_text": null,
          "new_text": "log_and_commit_acl_ddl(thd, true)",
          "old_line_content": "}",
          "new_line_content": "  ret= log_and_commit_acl_ddl(thd, true);",
          "content_same": false
        },
        {
          "line": 4676,
          "old_api": null,
          "new_api": "insert",
          "old_text": null,
          "new_text": "all_granted_roles.insert(rid)",
          "old_line_content": "      {",
          "new_line_content": "        all_granted_roles.insert(rid);",
          "content_same": false
        },
        {
          "line": 6724,
          "old_api": null,
          "new_api": "increase_version",
          "old_text": null,
          "new_text": "get_global_acl_cache()->increase_version()",
          "old_line_content": "",
          "new_line_content": "  get_global_acl_cache()->increase_version();",
          "content_same": false
        },
        {
          "line": 4685,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "all_active_roles.end()",
          "old_line_content": "      int vertex_count= 0;",
          "new_line_content": "                            all_active_roles.begin(), all_active_roles.end(),",
          "content_same": false
        },
        {
          "line": 4686,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "std::inserter(granted_active_roles,\n                                          granted_active_roles.begin())",
          "old_line_content": "      for (auto &&rid : granted_active_roles)",
          "new_line_content": "                            std::inserter(granted_active_roles,",
          "content_same": false
        },
        {
          "line": 4687,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "granted_active_roles.begin()",
          "old_line_content": "      {",
          "new_line_content": "                                          granted_active_roles.begin()));",
          "content_same": false
        },
        {
          "line": 6735,
          "old_api": null,
          "new_api": "append",
          "old_text": null,
          "new_text": "tmp.append('@')",
          "old_line_content": "}",
          "new_line_content": "\ttmp.append('@');",
          "content_same": false
        },
        {
          "line": 6736,
          "old_api": null,
          "new_api": "append_identifier",
          "old_text": null,
          "new_text": "append_identifier(&tmp, user->host.str, user->host.length)",
          "old_line_content": "",
          "new_line_content": "  append_identifier(&tmp, user->host.str, user->host.length);",
          "content_same": false
        },
        {
          "line": 6737,
          "old_api": null,
          "new_api": "c_ptr_quick",
          "old_text": null,
          "new_text": "tmp.c_ptr_quick()",
          "old_line_content": "Auth_id_ref create_authid_from(const LEX_USER *user)",
          "new_line_content": "  return std::string(tmp.c_ptr_quick());",
          "content_same": false
        },
        {
          "line": 4694,
          "old_api": null,
          "new_api": "append",
          "old_text": null,
          "new_text": "rolestr.append('@')",
          "old_line_content": "        Role_index_map::iterator rindex=",
          "new_line_content": "        rolestr.append('@');",
          "content_same": false
        },
        {
          "line": 6743,
          "old_api": null,
          "new_api": "std::make_pair(user->user, user->host)",
          "old_text": null,
          "new_text": "std::make_pair(user->user, user->host)",
          "old_line_content": "",
          "new_line_content": "  id= std::make_pair(user->user, user->host);",
          "content_same": false
        },
        {
          "line": 4698,
          "old_api": null,
          "new_api": "c_ptr_quick",
          "old_text": null,
          "new_text": "rolestr.c_ptr_quick()",
          "old_line_content": "          THD *thd= current_thd;",
          "new_line_content": "            g_authid_to_vertex->find(rolestr.c_ptr_quick());",
          "content_same": false
        },
        {
          "line": 4699,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "g_authid_to_vertex->end()",
          "old_line_content": "          if (thd)",
          "new_line_content": "        if (rindex == g_authid_to_vertex->end())",
          "content_same": false
        },
        {
          "line": 6754,
          "old_api": null,
          "new_api": "host",
          "old_text": null,
          "new_text": "user.host().c_str()",
          "old_line_content": "  return id;",
          "new_line_content": "  lex_host.str= user.host().c_str();",
          "content_same": false
        },
        {
          "line": 4707,
          "old_api": null,
          "new_api": "user",
          "old_text": null,
          "new_text": "rid.user().c_str()",
          "old_line_content": "          continue; // next role",
          "new_line_content": "                                rid.user().c_str(),",
          "content_same": false
        },
        {
          "line": 4708,
          "old_api": null,
          "new_api": "host",
          "old_text": null,
          "new_text": "rid.host().c_str()",
          "old_line_content": "        }",
          "new_line_content": "                                rid.host().c_str());",
          "content_same": false
        },
        {
          "line": 6755,
          "old_api": null,
          "new_api": "host",
          "old_text": null,
          "new_text": "user.host().length()",
          "old_line_content": "}",
          "new_line_content": "  lex_host.length= user.host().length();",
          "content_same": false
        },
        {
          "line": 6756,
          "old_api": null,
          "new_api": "std::make_pair(lex_user, lex_host)",
          "old_text": null,
          "new_text": "std::make_pair(lex_user, lex_host)",
          "old_line_content": "",
          "new_line_content": "  id= std::make_pair(lex_user, lex_host);",
          "content_same": false
        },
        {
          "line": 6762,
          "old_api": null,
          "new_api": "std::make_pair(user,host)",
          "old_text": null,
          "new_text": "std::make_pair(user,host)",
          "old_line_content": "/**",
          "new_line_content": "  return std::make_pair(user,host);",
          "content_same": false
        },
        {
          "line": 4716,
          "old_api": null,
          "new_api": "visitor",
          "old_text": null,
          "new_text": "boost::breadth_first_search(*g_granted_roles,\n                                      active_role_vertex,\n                                       boost::color_map(v_color).visitor(vis)\n                                     )",
          "old_line_content": "                                     );",
          "new_line_content": "          boost::breadth_first_search(*g_granted_roles,",
          "content_same": false
        },
        {
          "line": 4718,
          "old_api": null,
          "new_api": "visitor",
          "old_text": null,
          "new_text": "boost::color_map(v_color).visitor(vis)",
          "old_line_content": "        else",
          "new_line_content": "                                       boost::color_map(v_color).visitor(vis)",
          "content_same": false
        },
        {
          "line": 4724,
          "old_api": null,
          "new_api": "visitor",
          "old_text": null,
          "new_text": "boost::breadth_first_visit(*g_granted_roles,  active_role_vertex,\n                                      boost::color_map(v_color).visitor(vis)\n                                    )",
          "old_line_content": "          ++vertex_count;",
          "new_line_content": "          boost::breadth_first_visit(*g_granted_roles,  active_role_vertex,",
          "content_same": false
        },
        {
          "line": 4725,
          "old_api": null,
          "new_api": "visitor",
          "old_text": null,
          "new_text": "boost::color_map(v_color).visitor(vis)",
          "old_line_content": "        }",
          "new_line_content": "                                      boost::color_map(v_color).visitor(vis)",
          "content_same": false
        },
        {
          "line": 6774,
          "old_api": null,
          "new_api": "get_host",
          "old_text": null,
          "new_text": "user->host.get_host()",
          "old_line_content": "}",
          "new_line_content": "  append_identifier(&tmp, user->host.get_host(),",
          "content_same": false
        },
        {
          "line": 6775,
          "old_api": null,
          "new_api": "get_host_len",
          "old_text": null,
          "new_text": "user->host.get_host_len()",
          "old_line_content": "",
          "new_line_content": "                    user->host.get_host_len());",
          "content_same": false
        },
        {
          "line": 6776,
          "old_api": null,
          "new_api": "c_ptr_quick",
          "old_text": null,
          "new_text": "tmp.c_ptr_quick()",
          "old_line_content": "std::string create_authid_str_from(const Auth_id_ref &user)",
          "new_line_content": "  return std::string(tmp.c_ptr_quick());",
          "content_same": false
        },
        {
          "line": 4735,
          "old_api": null,
          "new_api": "boost::tie(edge, found)",
          "old_text": null,
          "new_text": "boost::tie(edge, found)",
          "old_line_content": "        {",
          "new_line_content": "        boost::tie(edge, found)=",
          "content_same": false
        },
        {
          "line": 6783,
          "old_api": null,
          "new_api": "append",
          "old_text": null,
          "new_text": "tmp.append(\"@\")",
          "old_line_content": "}",
          "new_line_content": "\ttmp.append(\"@\");",
          "content_same": false
        },
        {
          "line": 6784,
          "old_api": null,
          "new_api": "append_identifier",
          "old_text": null,
          "new_text": "append_identifier(&tmp, user.second.str, user.second.length)",
          "old_line_content": "",
          "new_line_content": "  append_identifier(&tmp, user.second.str, user.second.length);",
          "content_same": false
        },
        {
          "line": 6785,
          "old_api": null,
          "new_api": "c_ptr_quick",
          "old_text": null,
          "new_text": "tmp.c_ptr_quick()",
          "old_line_content": "std::string create_authid_str_from(const LEX_CSTRING &user,",
          "new_line_content": "  return std::string(tmp.c_ptr_quick());",
          "content_same": false
        },
        {
          "line": 4739,
          "old_api": null,
          "new_api": "boost::edge_capacity_t()",
          "old_text": null,
          "new_text": "boost::edge_capacity_t()",
          "old_line_content": "                         edge",
          "new_line_content": "          int with_admin_opt= boost::get(boost::edge_capacity_t(),",
          "content_same": false
        },
        {
          "line": 6793,
          "old_api": null,
          "new_api": "append",
          "old_text": null,
          "new_text": "tmp.append('@')",
          "old_line_content": "}",
          "new_line_content": "  tmp.append('@');",
          "content_same": false
        },
        {
          "line": 4746,
          "old_api": null,
          "new_api": "c_ptr",
          "old_text": null,
          "new_text": "rolestr.c_ptr()",
          "old_line_content": "      } // end for",
          "new_line_content": "            with_admin_acl->insert(std::string(rolestr.c_ptr()));",
          "content_same": false
        },
        {
          "line": 6794,
          "old_api": null,
          "new_api": "append_identifier",
          "old_text": null,
          "new_text": "append_identifier(&tmp, host.str, host.length)",
          "old_line_content": "",
          "new_line_content": "  append_identifier(&tmp, host.str, host.length);",
          "content_same": false
        },
        {
          "line": 6795,
          "old_api": null,
          "new_api": "c_ptr_quick",
          "old_text": null,
          "new_text": "tmp.c_ptr_quick()",
          "old_line_content": "Auth_id_ref create_authid_from(const ACL_USER *user)",
          "new_line_content": "  return std::string(tmp.c_ptr_quick());",
          "content_same": false
        },
        {
          "line": 4752,
          "old_api": null,
          "new_api": "get_host",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"info\",(\"Global access for role user %s@%s is %lu\",acl_user->user,\n                     acl_user->host.get_host(), *access))",
          "old_line_content": "  DBUG_VOID_RETURN;",
          "new_line_content": "  DBUG_PRINT(\"info\",(\"Global access for role user %s@%s is %lu\",acl_user->user,",
          "content_same": false
        },
        {
          "line": 4753,
          "old_api": null,
          "new_api": "get_host",
          "old_text": null,
          "new_text": "acl_user->host.get_host()",
          "old_line_content": "}",
          "new_line_content": "                     acl_user->host.get_host(), *access));",
          "content_same": false
        },
        {
          "line": 6808,
          "old_api": null,
          "new_api": "get_host",
          "old_text": null,
          "new_text": "user->host.get_host()",
          "old_line_content": "  return id;",
          "new_line_content": "  host.str= user->host.get_host();",
          "content_same": false
        },
        {
          "line": 6809,
          "old_api": null,
          "new_api": "get_host_len",
          "old_text": null,
          "new_text": "const_cast<ACL_USER *>(user)->host.get_host_len()",
          "old_line_content": "}",
          "new_line_content": "  host.length= const_cast<ACL_USER *>(user)->host.get_host_len();",
          "content_same": false
        },
        {
          "line": 6810,
          "old_api": null,
          "new_api": "std::make_pair(username, host)",
          "old_text": null,
          "new_text": "std::make_pair(username, host)",
          "old_line_content": "",
          "new_line_content": "  id= std::make_pair(username, host);",
          "content_same": false
        },
        {
          "line": 6818,
          "old_api": null,
          "new_api": "auth_str",
          "old_text": null,
          "new_text": "user.auth_str(&tmp)",
          "old_line_content": "",
          "new_line_content": "  user.auth_str(&tmp);",
          "content_same": false
        },
        {
          "line": 4775,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"mysql_show_grants\")",
          "old_line_content": "  {",
          "new_line_content": "  DBUG_ENTER(\"mysql_show_grants\");",
          "content_same": false
        },
        {
          "line": 6825,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->checkout_access_maps()",
          "old_line_content": "  Acl_cache_lock_guard acl_cache_lock(thd, Acl_cache_lock_mode::READ_MODE);",
          "new_line_content": "  thd->security_context()->checkout_access_maps();",
          "content_same": false
        },
        {
          "line": 4779,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(0)",
          "old_line_content": "  Acl_cache_lock_guard acl_cache_lock(thd, Acl_cache_lock_mode::READ_MODE);",
          "new_line_content": "    my_error(ER_OPTION_PREVENTS_STATEMENT, MYF(0), \"--skip-grant-tables\");",
          "content_same": false
        },
        {
          "line": 6827,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->cache_current_db_access(new_db_access)",
          "old_line_content": "    return 1;",
          "new_line_content": "  thd->security_context()->cache_current_db_access(new_db_access);",
          "content_same": false
        },
        {
          "line": 6831,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->priv_host()",
          "old_line_content": "  {",
          "new_line_content": "  ACL_USER *user= find_acl_user(thd->security_context()->priv_host().str,",
          "content_same": false
        },
        {
          "line": 4784,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(true)",
          "old_line_content": "  if (!acl_user)",
          "new_line_content": "    DBUG_RETURN(true);",
          "content_same": false
        },
        {
          "line": 6835,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->set_master_access(user->access)",
          "old_line_content": "  return 0;",
          "new_line_content": "    thd->security_context()->set_master_access(user->access);",
          "content_same": false
        },
        {
          "line": 4789,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(0)",
          "old_line_content": "  }",
          "new_line_content": "    my_error(ER_NONEXISTING_GRANT, MYF(0),",
          "content_same": false
        },
        {
          "line": 6837,
          "old_api": null,
          "new_api": "my_ok",
          "old_text": null,
          "new_text": "my_ok(thd)",
          "old_line_content": "",
          "new_line_content": "  my_ok(thd);",
          "content_same": false
        },
        {
          "line": 4791,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(true)",
          "old_line_content": "  std::vector<Role_id > mandatory_roles;",
          "new_line_content": "    DBUG_RETURN(true);",
          "content_same": false
        },
        {
          "line": 4795,
          "old_api": null,
          "new_api": "get_mandatory_roles",
          "old_text": null,
          "new_text": "get_mandatory_roles(&mandatory_roles)",
          "old_line_content": "    List_of_granted_roles granted_roles;",
          "new_line_content": "  get_mandatory_roles(&mandatory_roles);",
          "content_same": false
        },
        {
          "line": 4802,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "granted_roles.end()",
          "old_line_content": "                  [&](const Role_id &id)->bool",
          "new_line_content": "          granted_roles.end())",
          "content_same": false
        },
        {
          "line": 4804,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "mandatory_roles.end()",
          "old_line_content": "                    std::string id_str,rid_str;",
          "new_line_content": "      if (std::find_if(mandatory_roles.begin(), mandatory_roles.end(),",
          "content_same": false
        },
        {
          "line": 4810,
          "old_api": null,
          "new_api": "auth_str",
          "old_text": null,
          "new_text": "rid.auth_str(&rid_str)",
          "old_line_content": "      {",
          "new_line_content": "                    rid.auth_str(&rid_str);",
          "content_same": false
        },
        {
          "line": 4812,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "mandatory_roles.end()",
          "old_line_content": "                 role_ref.second.str, lex_user->user.str, lex_user->host.str);",
          "new_line_content": "                    }) == mandatory_roles.end())",
          "content_same": false
        },
        {
          "line": 4814,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(0)",
          "old_line_content": "      }",
          "new_line_content": "        my_error(ER_ROLE_NOT_GRANTED, MYF(0), role_ref.first.str,",
          "content_same": false
        },
        {
          "line": 4816,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(true)",
          "old_line_content": "  }",
          "new_line_content": "        DBUG_RETURN(true);",
          "content_same": false
        },
        {
          "line": 6864,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "active_list->begin()",
          "old_line_content": "  /* Clear active roles but don't free memory */",
          "new_line_content": "  std::copy(active_list->begin(),",
          "content_same": false
        },
        {
          "line": 6866,
          "old_api": null,
          "new_api": "std::back_inserter(backup_active_list)",
          "old_text": null,
          "new_text": "std::back_inserter(backup_active_list)",
          "old_line_content": "  LEX_USER current_user;",
          "new_line_content": "            std::back_inserter(backup_active_list));",
          "content_same": false
        },
        {
          "line": 6871,
          "old_api": null,
          "new_api": "get_default_definer",
          "old_text": null,
          "new_text": "get_default_definer(thd, &current_user)",
          "old_line_content": "    Search global structure for target user;",
          "new_line_content": "  get_default_definer(thd, &current_user);",
          "content_same": false
        },
        {
          "line": 6872,
          "old_api": null,
          "new_api": "create_authid_from",
          "old_text": null,
          "new_text": "create_authid_from(&current_user)",
          "old_line_content": "    authids have their own memory storage (Role_id)",
          "new_line_content": "  Auth_id_ref current_user_authid= create_authid_from(&current_user);",
          "content_same": false
        },
        {
          "line": 4826,
          "old_api": null,
          "new_api": "set",
          "old_text": null,
          "new_text": "field->item_name.set(buff)",
          "old_line_content": "                                Protocol::SEND_NUM_ROWS | Protocol::SEND_EOF))",
          "new_line_content": "  field->item_name.set(buff);",
          "content_same": false
        },
        {
          "line": 4827,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "field_list.push_back(field)",
          "old_line_content": "  {",
          "new_line_content": "  field_list.push_back(field);",
          "content_same": false
        },
        {
          "line": 4831,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(true)",
          "old_line_content": "  Db_access_map db_map;",
          "new_line_content": "    DBUG_RETURN(true);",
          "content_same": false
        },
        {
          "line": 6880,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "authids.begin()",
          "old_line_content": "      /*",
          "new_line_content": "    List_of_auth_id_refs::iterator it = authids.begin();",
          "content_same": false
        },
        {
          "line": 6881,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "authids.end()",
          "old_line_content": "         Activating a role allocates new memory for the activated role",
          "new_line_content": "    for (; it != authids.end() && ret == 0; ++it)",
          "content_same": false
        },
        {
          "line": 6890,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(0)",
          "old_line_content": "    }",
          "new_line_content": "        my_error(ER_ROLE_NOT_GRANTED, MYF(0), it->first.str, it->second.str,",
          "content_same": false
        },
        {
          "line": 4843,
          "old_api": null,
          "new_api": "set_thd",
          "old_text": null,
          "new_text": "table_map.set_thd(thd)",
          "old_line_content": "                            &granted_roles, &with_admin_acl, &dynamic_acl);",
          "new_line_content": "  table_map.set_thd(thd);",
          "content_same": false
        },
        {
          "line": 4844,
          "old_api": null,
          "new_api": "get_privilege_access_maps",
          "old_text": null,
          "new_text": "get_privilege_access_maps(acl_user, &using_roles, &access, &db_map,\n                            &db_wild_map, &table_map, &sp_map, &func_map,\n                            &granted_roles, &with_admin_acl, &dynamic_acl)",
          "old_line_content": "  String output;",
          "new_line_content": "  get_privilege_access_maps(acl_user, &using_roles, &access, &db_map,",
          "content_same": false
        },
        {
          "line": 6897,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->checkout_access_maps()",
          "old_line_content": "    /* Old memory in the backup list must now be freed. */",
          "new_line_content": "    thd->security_context()->checkout_access_maps();",
          "content_same": false
        },
        {
          "line": 4850,
          "old_api": null,
          "new_api": "start_row",
          "old_text": null,
          "new_text": "protocol->start_row()",
          "old_line_content": "",
          "new_line_content": "  protocol->start_row();",
          "content_same": false
        },
        {
          "line": 6898,
          "old_api": null,
          "new_api": "db",
          "old_text": null,
          "new_text": "thd->db()",
          "old_line_content": "    for(auto &&role : backup_active_list)",
          "new_line_content": "    ulong new_db_access= thd->security_context()->db_acl(thd->db());",
          "content_same": false
        },
        {
          "line": 6899,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->cache_current_db_access(new_db_access)",
          "old_line_content": "    {",
          "new_line_content": "    thd->security_context()->cache_current_db_access(new_db_access);",
          "content_same": false
        },
        {
          "line": 6904,
          "old_api": null,
          "new_api": "const_cast<char*>(role.second.str)",
          "old_text": null,
          "new_text": "const_cast<char*>(role.second.str)",
          "old_line_content": "  }",
          "new_line_content": "      my_free(const_cast<char*>(role.second.str));",
          "content_same": false
        },
        {
          "line": 6906,
          "old_api": null,
          "new_api": "my_ok",
          "old_text": null,
          "new_text": "my_ok(thd)",
          "old_line_content": "  {",
          "new_line_content": "    my_ok(thd);",
          "content_same": false
        },
        {
          "line": 4859,
          "old_api": null,
          "new_api": "make_sp_privilege_statement",
          "old_text": null,
          "new_text": "make_sp_privilege_statement(thd, acl_user, protocol, func_map, 1)",
          "old_line_content": "                                 show_mandatory_roles);",
          "new_line_content": "  make_sp_privilege_statement(thd, acl_user, protocol, func_map, 1);",
          "content_same": false
        },
        {
          "line": 4861,
          "old_api": null,
          "new_api": "make_roles_privilege_statement",
          "old_text": null,
          "new_text": "make_roles_privilege_statement(thd, acl_user, protocol, granted_roles,\n                                 show_mandatory_roles)",
          "old_line_content": "                                      granted_roles);",
          "new_line_content": "  make_roles_privilege_statement(thd, acl_user, protocol, granted_roles,",
          "content_same": false
        },
        {
          "line": 4866,
          "old_api": null,
          "new_api": "my_eof",
          "old_text": null,
          "new_text": "my_eof(thd)",
          "old_line_content": "",
          "new_line_content": "  my_eof(thd);",
          "content_same": false
        },
        {
          "line": 4867,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(error)",
          "old_line_content": "void roles_graphml(THD *thd, String *str)",
          "new_line_content": "  DBUG_RETURN(error);",
          "content_same": false
        },
        {
          "line": 6916,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->clear_active_roles()",
          "old_line_content": "  }",
          "new_line_content": "    thd->security_context()->clear_active_roles();",
          "content_same": false
        },
        {
          "line": 6917,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "backup_active_list.end()",
          "old_line_content": "  return ret;",
          "new_line_content": "    std::copy(backup_active_list.begin(), backup_active_list.end(),",
          "content_same": false
        },
        {
          "line": 6918,
          "old_api": null,
          "new_api": "std::back_inserter(*active_list)",
          "old_text": null,
          "new_text": "std::back_inserter(*active_list)",
          "old_line_content": "}",
          "new_line_content": "              std::back_inserter(*active_list));",
          "content_same": false
        },
        {
          "line": 4879,
          "old_api": null,
          "new_api": "boost::write_graphml(ss, *g_granted_roles, dp, true)",
          "old_text": null,
          "new_text": "boost::write_graphml(ss, *g_granted_roles, dp, true)",
          "old_line_content": "}",
          "new_line_content": "  boost::write_graphml(ss, *g_granted_roles, dp, true);",
          "content_same": false
        },
        {
          "line": 4880,
          "old_api": null,
          "new_api": "str",
          "old_text": null,
          "new_text": "ss.str()",
          "old_line_content": "",
          "new_line_content": "  std::string out= ss.str();",
          "content_same": false
        },
        {
          "line": 4881,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "out.length()",
          "old_line_content": "",
          "new_line_content": "  str->copy(out.c_str(), out.length(), system_charset_info);",
          "content_same": false
        },
        {
          "line": 6939,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()",
          "old_line_content": "    return 1;",
          "new_line_content": "  Security_context *sctx= thd->security_context();",
          "content_same": false
        },
        {
          "line": 6941,
          "old_api": null,
          "new_api": "lock",
          "old_text": null,
          "new_text": "acl_cache_lock.lock()",
          "old_line_content": "  List_of_auth_id_refs *active_list=",
          "new_line_content": "  if (!acl_cache_lock.lock())",
          "content_same": false
        },
        {
          "line": 6949,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "active_list->end()",
          "old_line_content": "",
          "new_line_content": "            active_list->end(),",
          "content_same": false
        },
        {
          "line": 6951,
          "old_api": null,
          "new_api": "get_active_roles",
          "old_text": null,
          "new_text": "sctx->get_active_roles()->clear()",
          "old_line_content": "  int ret= 0;",
          "new_line_content": "  sctx->get_active_roles()->clear();",
          "content_same": false
        },
        {
          "line": 6955,
          "old_api": null,
          "new_api": "create_default_definer",
          "old_text": null,
          "new_text": "create_default_definer(thd)",
          "old_line_content": "  List_of_granted_roles granted_roles;",
          "new_line_content": "  LEX_USER *current_user= create_default_definer(thd);",
          "content_same": false
        },
        {
          "line": 6956,
          "old_api": null,
          "new_api": "create_authid_str_from",
          "old_text": null,
          "new_text": "create_authid_str_from(current_user)",
          "old_line_content": "",
          "new_line_content": "  std::string authid= create_authid_str_from(current_user);",
          "content_same": false
        },
        {
          "line": 4911,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "acl_dbs->end()",
          "old_line_content": "",
          "new_line_content": "    for (revoked= 0, acl_db= acl_dbs->begin(); acl_db != acl_dbs->end(); )",
          "content_same": false
        },
        {
          "line": 6963,
          "old_api": null,
          "new_api": "get_granted_roles",
          "old_text": null,
          "new_text": "get_granted_roles(user_vertex, &granted_roles)",
          "old_line_content": "    for (auto &&rid : mandatory_roles)",
          "new_line_content": "    get_granted_roles(user_vertex, &granted_roles);",
          "content_same": false
        },
        {
          "line": 4921,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(lex_user.host.str, host)",
          "old_line_content": "                                  ~(ulong)0, true);",
          "new_line_content": "          !strcmp(lex_user.host.str, host))",
          "content_same": false
        },
        {
          "line": 6970,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "granted_roles.begin()",
          "old_line_content": "      bool found_except_user= false;",
          "new_line_content": "    List_of_granted_roles::iterator role_it= granted_roles.begin();",
          "content_same": false
        },
        {
          "line": 4923,
          "old_api": null,
          "new_api": "replace_db_table",
          "old_text": null,
          "new_text": "replace_db_table(thd, table, acl_db->db, lex_user,\n                                  ~(ulong)0, true)",
          "old_line_content": "        {",
          "new_line_content": "        int ret= replace_db_table(thd, table, acl_db->db, lex_user,",
          "content_same": false
        },
        {
          "line": 6971,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "granted_roles.end()",
          "old_line_content": "      if (except_users && except_users->elements > 0)",
          "new_line_content": "    for( ;role_it != granted_roles.end(); ++role_it)",
          "content_same": false
        },
        {
          "line": 6980,
          "old_api": null,
          "new_api": "user",
          "old_text": null,
          "new_text": "role_it->first.user().length()",
          "old_line_content": "                      except_user->user.length) == 0 &&",
          "new_line_content": "          if ((except_user->user.length == role_it->first.user().length()) &&",
          "content_same": false
        },
        {
          "line": 6984,
          "old_api": null,
          "new_api": "host",
          "old_text": null,
          "new_text": "native_strncasecmp(except_user->host.str,\n                                 role_it->first.host().c_str(),\n                                 except_user->host.length)",
          "old_line_content": "          {",
          "new_line_content": "              native_strncasecmp(except_user->host.str,",
          "content_same": false
        },
        {
          "line": 6985,
          "old_api": null,
          "new_api": "host",
          "old_text": null,
          "new_text": "role_it->first.host().c_str()",
          "old_line_content": "            found_except_user= true;",
          "new_line_content": "                                 role_it->first.host().c_str(),",
          "content_same": false
        },
        {
          "line": 6996,
          "old_api": null,
          "new_api": "user",
          "old_text": null,
          "new_text": "role_it->first.user().length()",
          "old_line_content": "                                 true);",
          "new_line_content": "                                 role_it->first.user().length()},",
          "content_same": false
        },
        {
          "line": 6997,
          "old_api": null,
          "new_api": "host",
          "old_text": null,
          "new_text": "role_it->first.host().c_str()",
          "old_line_content": "        if (ret != 0)",
          "new_line_content": "                                 {role_it->first.host().c_str(),",
          "content_same": false
        },
        {
          "line": 6998,
          "old_api": null,
          "new_api": "host",
          "old_text": null,
          "new_text": "role_it->first.host().length()",
          "old_line_content": "        {",
          "new_line_content": "                                  role_it->first.host().length()},",
          "content_same": false
        },
        {
          "line": 7002,
          "old_api": null,
          "new_api": "user",
          "old_text": null,
          "new_text": "role_it->first.user().c_str()",
          "old_line_content": "          break;",
          "new_line_content": "          my_error(ER_ROLE_NOT_GRANTED, MYF(0), role_it->first.user().c_str(),",
          "content_same": false
        },
        {
          "line": 7003,
          "old_api": null,
          "new_api": "host",
          "old_text": null,
          "new_text": "role_it->first.host().c_str()",
          "old_line_content": "        }",
          "new_line_content": "                   role_it->first.host().c_str(), current_user->user.str,",
          "content_same": false
        },
        {
          "line": 7012,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->checkout_access_maps()",
          "old_line_content": "    /* Drop backup */",
          "new_line_content": "    thd->security_context()->checkout_access_maps();",
          "content_same": false
        },
        {
          "line": 7013,
          "old_api": null,
          "new_api": "db",
          "old_text": null,
          "new_text": "thd->db()",
          "old_line_content": "    for(auto&& ref : backup_active_list)",
          "new_line_content": "    ulong new_db_access= thd->security_context()->db_acl(thd->db());",
          "content_same": false
        },
        {
          "line": 7014,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->cache_current_db_access(new_db_access)",
          "old_line_content": "    {",
          "new_line_content": "    thd->security_context()->cache_current_db_access(new_db_access);",
          "content_same": false
        },
        {
          "line": 7019,
          "old_api": null,
          "new_api": "const_cast<char *>(ref.second.str)",
          "old_text": null,
          "new_text": "const_cast<char *>(ref.second.str)",
          "old_line_content": "  }",
          "new_line_content": "      my_free(const_cast<char *>(ref.second.str));",
          "content_same": false
        },
        {
          "line": 7021,
          "old_api": null,
          "new_api": "my_ok",
          "old_text": null,
          "new_text": "my_ok(thd)",
          "old_line_content": "  {",
          "new_line_content": "    my_ok(thd);",
          "content_same": false
        },
        {
          "line": 7026,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "active_list->clear()",
          "old_line_content": "  }",
          "new_line_content": "    active_list->clear();",
          "content_same": false
        },
        {
          "line": 7027,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "backup_active_list.end()",
          "old_line_content": "  return ret;",
          "new_line_content": "    std::copy(backup_active_list.begin(), backup_active_list.end(),",
          "content_same": false
        },
        {
          "line": 7028,
          "old_api": null,
          "new_api": "std::back_inserter(*active_list)",
          "old_text": null,
          "new_text": "std::back_inserter(*active_list)",
          "old_line_content": "}",
          "new_line_content": "              std::back_inserter(*active_list));",
          "content_same": false
        },
        {
          "line": 4986,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "column_priv_hash->begin()",
          "old_line_content": "      /*",
          "new_line_content": "    for (auto it= column_priv_hash->begin(), next_it= it;",
          "content_same": false
        },
        {
          "line": 4987,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "column_priv_hash->end()",
          "old_line_content": "        Store an iterator pointing to the next element now, since",
          "new_line_content": "         it != column_priv_hash->end(); it= next_it)",
          "content_same": false
        },
        {
          "line": 7037,
          "old_api": null,
          "new_api": "lock",
          "old_text": null,
          "new_text": "acl_cache_lock.lock()",
          "old_line_content": "  List_of_auth_id_refs *active_list=",
          "new_line_content": "  if (!acl_cache_lock.lock())",
          "content_same": false
        },
        {
          "line": 7046,
          "old_api": null,
          "new_api": "std::back_inserter(backup_active_list)",
          "old_text": null,
          "new_text": "std::back_inserter(backup_active_list)",
          "old_line_content": "  LEX_USER *role= 0;",
          "new_line_content": "            std::back_inserter(backup_active_list));",
          "content_same": false
        },
        {
          "line": 7047,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->get_active_roles()->clear()",
          "old_line_content": "  while (ret == 0 && (role= it++))",
          "new_line_content": "  thd->security_context()->get_active_roles()->clear();",
          "content_same": false
        },
        {
          "line": 7048,
          "old_api": null,
          "new_api": "const_cast<List<LEX_USER > *>(role_list)",
          "old_text": null,
          "new_text": "const_cast<List<LEX_USER > *>(role_list)",
          "old_line_content": "  {",
          "new_line_content": "  List_iterator<LEX_USER> it(*(const_cast<List<LEX_USER > *>(role_list)));",
          "content_same": false
        },
        {
          "line": 5002,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(lex_user.user.str, user)",
          "old_line_content": "        // Hold on to grant_table if it gets deleted, since we use it below.",
          "new_line_content": "      if (!strcmp(lex_user.user.str, user) &&",
          "content_same": false
        },
        {
          "line": 5003,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(lex_user.host.str, host)",
          "old_line_content": "        std::unique_ptr<GRANT_TABLE, Destroy_only<GRANT_TABLE>>",
          "new_line_content": "          !strcmp(lex_user.host.str, host))",
          "content_same": false
        },
        {
          "line": 7052,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->activate_role(role->user, role->host, true)",
          "old_line_content": "  if (ret == 0)",
          "new_line_content": "    ret= thd->security_context()->activate_role(role->user, role->host, true);",
          "content_same": false
        },
        {
          "line": 5009,
          "old_api": null,
          "new_api": "replace_table_table",
          "old_text": null,
          "new_text": "replace_table_table(thd, grant_table, &deleted_grant_table,\n                                     tables_priv_table,\n                                     lex_user,\n                                     grant_table->db,\n                                     grant_table->tname,\n                                     ~(ulong)0, 0, true)",
          "old_line_content": "                                     grant_table->db,",
          "new_line_content": "        int ret= replace_table_table(thd, grant_table, &deleted_grant_table,",
          "content_same": false
        },
        {
          "line": 7057,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->checkout_access_maps()",
          "old_line_content": "    /* Drop backup */",
          "new_line_content": "    thd->security_context()->checkout_access_maps();",
          "content_same": false
        },
        {
          "line": 7058,
          "old_api": null,
          "new_api": "db",
          "old_text": null,
          "new_text": "thd->db()",
          "old_line_content": "    for(auto&& ref : backup_active_list)",
          "new_line_content": "    ulong new_db_access= thd->security_context()->db_acl(thd->db());",
          "content_same": false
        },
        {
          "line": 7059,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->cache_current_db_access(new_db_access)",
          "old_line_content": "    {",
          "new_line_content": "    thd->security_context()->cache_current_db_access(new_db_access);",
          "content_same": false
        },
        {
          "line": 7064,
          "old_api": null,
          "new_api": "const_cast<char *>(ref.second.str)",
          "old_text": null,
          "new_text": "const_cast<char *>(ref.second.str)",
          "old_line_content": "  }",
          "new_line_content": "      my_free(const_cast<char *>(ref.second.str));",
          "content_same": false
        },
        {
          "line": 7066,
          "old_api": null,
          "new_api": "my_ok",
          "old_text": null,
          "new_text": "my_ok(thd)",
          "old_line_content": "  {",
          "new_line_content": "    my_ok(thd);",
          "content_same": false
        },
        {
          "line": 7072,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(0)",
          "old_line_content": "    }",
          "new_line_content": "      my_error(ER_ROLE_NOT_GRANTED, MYF(0), role->user.str, role->host.str,",
          "content_same": false
        },
        {
          "line": 7073,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->priv_user()",
          "old_line_content": "    /* restore backup */",
          "new_line_content": "               thd->security_context()->priv_user().str,",
          "content_same": false
        },
        {
          "line": 7077,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "active_list->clear()",
          "old_line_content": "  }",
          "new_line_content": "    active_list->clear();",
          "content_same": false
        },
        {
          "line": 7078,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "backup_active_list.end()",
          "old_line_content": "  return ret;",
          "new_line_content": "    std::copy(backup_active_list.begin(), backup_active_list.end(),",
          "content_same": false
        },
        {
          "line": 7079,
          "old_api": null,
          "new_api": "std::back_inserter(*active_list)",
          "old_text": null,
          "new_text": "std::back_inserter(*active_list)",
          "old_line_content": "}",
          "new_line_content": "              std::back_inserter(*active_list));",
          "content_same": false
        },
        {
          "line": 5037,
          "old_api": null,
          "new_api": "replace_column_table",
          "old_text": null,
          "new_text": "replace_column_table(thd, grant_table, columns_priv_table,\n                                    lex_user,\n                                    columns,\n                                    grant_table->db,\n                                    grant_table->tname,\n                                    ~(ulong)0, true)",
          "old_line_content": "                                    grant_table->db,",
          "new_line_content": "          ret= replace_column_table(thd, grant_table, columns_priv_table,",
          "content_same": false
        },
        {
          "line": 5052,
          "old_api": null,
          "new_api": "DBUG_ASSERT",
          "old_text": null,
          "new_text": "DBUG_ASSERT(ret < 0)",
          "old_line_content": "        }",
          "new_line_content": "          DBUG_ASSERT(ret < 0);",
          "content_same": false
        },
        {
          "line": 7106,
          "old_api": null,
          "new_api": "check_if_granted_role",
          "old_text": null,
          "new_text": "check_if_granted_role(user, host, role, role_host)",
          "old_line_content": "",
          "new_line_content": "  ret= check_if_granted_role(user, host, role, role_host);",
          "content_same": false
        },
        {
          "line": 7132,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "get_dynamic_privilege_register()->end()",
          "old_line_content": "  }",
          "new_line_content": "  if (get_dynamic_privilege_register()->find(priv) == get_dynamic_privilege_register()->end())",
          "content_same": false
        },
        {
          "line": 5092,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "func_priv_hash.get()",
          "old_line_content": "      {",
          "new_line_content": "        is_proc ? proc_priv_hash.get() : func_priv_hash.get();",
          "content_same": false
        },
        {
          "line": 7140,
          "old_api": null,
          "new_api": "equal_range",
          "old_text": null,
          "new_text": "g_dynamic_privileges_map->equal_range(id)",
          "old_line_content": "    if (it->second.first == priv)",
          "new_line_content": "  auto range= g_dynamic_privileges_map->equal_range(id);",
          "content_same": false
        },
        {
          "line": 5094,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "hash->end()",
          "old_line_content": "          Store an iterator pointing to the next element now, since",
          "new_line_content": "      for (auto it= hash->begin(), next_it= it; it != hash->end(); it= next_it)",
          "content_same": false
        },
        {
          "line": 7155,
          "old_api": null,
          "new_api": "erase",
          "old_text": null,
          "new_text": "g_dynamic_privileges_map->erase(it)",
          "old_line_content": "      /* If the entry already exist we're done */",
          "new_line_content": "        g_dynamic_privileges_map->erase(it);",
          "content_same": false
        },
        {
          "line": 5110,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(lex_user.host.str, host)",
          "old_line_content": "                                         lex_user,",
          "new_line_content": "            !strcmp(lex_user.host.str, host))",
          "content_same": false
        },
        {
          "line": 5112,
          "old_api": null,
          "new_api": "replace_routine_table",
          "old_text": null,
          "new_text": "replace_routine_table(thd,grant_proc, procs_priv_table,\n                                         lex_user,\n                                         grant_proc->db,\n                                         grant_proc->tname,\n                                         is_proc,\n                                         ~(ulong)0, true)",
          "old_line_content": "                                         grant_proc->tname,",
          "new_line_content": "          int ret= replace_routine_table(thd,grant_proc, procs_priv_table,",
          "content_same": false
        },
        {
          "line": 7166,
          "old_api": null,
          "new_api": "std::make_pair(id,\n                                   std::make_pair(priv, with_grant_option))",
          "old_text": null,
          "new_text": "std::make_pair(id,\n                                   std::make_pair(priv, with_grant_option))",
          "old_line_content": "  {",
          "new_line_content": "  g_dynamic_privileges_map->insert(std::make_pair(id,",
          "content_same": false
        },
        {
          "line": 7167,
          "old_api": null,
          "new_api": "std::make_pair(priv, with_grant_option)",
          "old_text": null,
          "new_text": "std::make_pair(priv, with_grant_option)",
          "old_line_content": "    return true;",
          "new_line_content": "                                   std::make_pair(priv, with_grant_option)));",
          "content_same": false
        },
        {
          "line": 7195,
          "old_api": null,
          "new_api": "equal_range",
          "old_text": null,
          "new_text": "g_dynamic_privileges_map->equal_range(id)",
          "old_line_content": "    if (it->second.first == priv)",
          "new_line_content": "  auto range= g_dynamic_privileges_map->equal_range(id);",
          "content_same": false
        },
        {
          "line": 7203,
          "old_api": null,
          "new_api": "erase",
          "old_text": null,
          "new_text": "g_dynamic_privileges_map->erase(it)",
          "old_line_content": "  }",
          "new_line_content": "      g_dynamic_privileges_map->erase(it);",
          "content_same": false
        },
        {
          "line": 5162,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"mysql_revoke_all\")",
          "old_line_content": "    This statement will be replicated as a statement, even when using",
          "new_line_content": "  DBUG_ENTER(\"mysql_revoke_all\");",
          "content_same": false
        },
        {
          "line": 5171,
          "old_api": null,
          "new_api": "open_grant_tables",
          "old_text": null,
          "new_text": "open_grant_tables(thd, tables, &transactional_tables)",
          "old_line_content": "  Acl_cache_lock_guard acl_cache_lock(thd, Acl_cache_lock_mode::WRITE_MODE);",
          "new_line_content": "  if ((ret= open_grant_tables(thd, tables, &transactional_tables)))",
          "content_same": false
        },
        {
          "line": 5177,
          "old_api": null,
          "new_api": "commit_and_close_mysql_tables",
          "old_text": null,
          "new_text": "commit_and_close_mysql_tables(thd)",
          "old_line_content": "",
          "new_line_content": "    commit_and_close_mysql_tables(thd);",
          "content_same": false
        },
        {
          "line": 5178,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(true)",
          "old_line_content": "  TABLE *dynpriv_table= tables[ACL_TABLES::TABLE_DYNAMIC_PRIV].table;",
          "new_line_content": "    DBUG_RETURN(true);",
          "content_same": false
        },
        {
          "line": 7235,
          "old_api": null,
          "new_api": "update_table",
          "old_text": null,
          "new_text": "update_table(it->second.first, { user, host }, false,\n                       Update_dynamic_privilege_table::REVOKE)",
          "old_line_content": "        return true;",
          "new_line_content": "      if (update_table(it->second.first, { user, host }, false,",
          "content_same": false
        },
        {
          "line": 5189,
          "old_api": null,
          "new_api": "get_current_user",
          "old_text": null,
          "new_text": "get_current_user(thd, tmp_lex_user)",
          "old_line_content": "      continue;",
          "new_line_content": "    if (!(lex_user= get_current_user(thd, tmp_lex_user)))",
          "content_same": false
        },
        {
          "line": 5194,
          "old_api": null,
          "new_api": "find_acl_user",
          "old_text": null,
          "new_text": "find_acl_user(lex_user->host.str, lex_user->user.str, TRUE)",
          "old_line_content": "      continue;",
          "new_line_content": "    if (!find_acl_user(lex_user->host.str, lex_user->user.str, TRUE))",
          "content_same": false
        },
        {
          "line": 7242,
          "old_api": null,
          "new_api": "erase",
          "old_text": null,
          "new_text": "g_dynamic_privileges_map->erase(range.first, range.second)",
          "old_line_content": "  {",
          "new_line_content": "    g_dynamic_privileges_map->erase(range.first, range.second);",
          "content_same": false
        },
        {
          "line": 5201,
          "old_api": null,
          "new_api": "revoke_all_dynamic_privileges",
          "old_text": null,
          "new_text": "revoke_all_dynamic_privileges(lex_user->user,\n                                               lex_user->host,\n                                               update_table)",
          "old_line_content": "    {",
          "new_line_content": "    if ((result= revoke_all_dynamic_privileges(lex_user->user,",
          "content_same": false
        },
        {
          "line": 5210,
          "old_api": null,
          "new_api": "replace_user_table",
          "old_text": null,
          "new_text": "replace_user_table(thd, tables[ACL_TABLES::TABLE_USER].table,\n                                 lex_user, ~(ulong) 0, true, false,\n                                 (what_to_set | ACCESS_RIGHTS_ATTR))",
          "old_line_content": "    {",
          "new_line_content": "    if ((ret= replace_user_table(thd, tables[ACL_TABLES::TABLE_USER].table,",
          "content_same": false
        },
        {
          "line": 7258,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "g_dynamic_privileges_map->size()",
          "old_line_content": "      Revoke all privileges using the old authorization identifier but don't",
          "new_line_content": "  if (g_dynamic_privileges_map->size() > 0)",
          "content_same": false
        },
        {
          "line": 7265,
          "old_api": null,
          "new_api": "equal_range",
          "old_text": null,
          "new_text": "g_dynamic_privileges_map->equal_range(id)",
          "old_line_content": "    int grants_count= 0;",
          "new_line_content": "    auto range= g_dynamic_privileges_map->equal_range(id);",
          "content_same": false
        },
        {
          "line": 7266,
          "old_api": null,
          "new_api": "std::distance(range.first,\n                                                           range.second)",
          "old_text": null,
          "new_text": "std::distance(range.first,\n                                                           range.second)",
          "old_line_content": "    for(auto it= range.first; it != range.second; ++it, ++grants_count)",
          "new_line_content": "    std::vector<Grant_privilege > privileges(std::distance(range.first,",
          "content_same": false
        },
        {
          "line": 5222,
          "old_api": null,
          "new_api": "remove_db_access_privileges",
          "old_text": null,
          "new_text": "remove_db_access_privileges(thd, tables[ACL_TABLES::TABLE_DB].table,\n           *lex_user)",
          "old_line_content": "           tables[ACL_TABLES::TABLE_TABLES_PRIV].table,",
          "new_line_content": "    if ((ret1= remove_db_access_privileges(thd, tables[ACL_TABLES::TABLE_DB].table,",
          "content_same": false
        },
        {
          "line": 5224,
          "old_api": null,
          "new_api": "remove_column_access_privileges",
          "old_text": null,
          "new_text": "remove_column_access_privileges(thd,\n           tables[ACL_TABLES::TABLE_TABLES_PRIV].table,\n           tables[ACL_TABLES::TABLE_COLUMNS_PRIV].table,\n           *lex_user)",
          "old_line_content": "           *lex_user)) < 0 ||",
          "new_line_content": "        (ret2= remove_column_access_privileges(thd,",
          "content_same": false
        },
        {
          "line": 7272,
          "old_api": null,
          "new_api": "std::make_pair(it->second.first, it->second.second)",
          "old_text": null,
          "new_text": "std::make_pair(it->second.first, it->second.second)",
          "old_line_content": "    {",
          "new_line_content": "        std::make_pair(it->second.first, it->second.second);",
          "content_same": false
        },
        {
          "line": 5228,
          "old_api": null,
          "new_api": "remove_procedure_access_privileges",
          "old_text": null,
          "new_text": "remove_procedure_access_privileges(thd,\n           tables[ACL_TABLES::TABLE_PROCS_PRIV].table,\n           *lex_user)",
          "old_line_content": "    {",
          "new_line_content": "        (ret3= remove_procedure_access_privileges(thd,",
          "content_same": false
        },
        {
          "line": 7276,
          "old_api": null,
          "new_api": "update_table",
          "old_text": null,
          "new_text": "update_table(it->second.first, { old_user, old_host }, false,\n                       Update_dynamic_privilege_table::REVOKE)",
          "old_line_content": "        return true;",
          "new_line_content": "      if (update_table(it->second.first, { old_user, old_host }, false,",
          "content_same": false
        },
        {
          "line": 7285,
          "old_api": null,
          "new_api": "erase",
          "old_text": null,
          "new_text": "g_dynamic_privileges_map->erase(range.first, range.second)",
          "old_line_content": "      Grant the new authorization id the same privileges as the old and update",
          "new_line_content": "    g_dynamic_privileges_map->erase(range.first, range.second);",
          "content_same": false
        },
        {
          "line": 5242,
          "old_api": null,
          "new_api": "DBUG_EXECUTE_IF",
          "old_text": null,
          "new_text": "DBUG_EXECUTE_IF(\"force_mysql_revoke_all_fail\", {\n    result= 1;\n  })",
          "old_line_content": "",
          "new_line_content": "  DBUG_EXECUTE_IF(\"force_mysql_revoke_all_fail\", {",
          "content_same": false
        },
        {
          "line": 7294,
          "old_api": null,
          "new_api": "c_str",
          "old_text": null,
          "new_text": "privileges[grants_count].first.c_str()",
          "old_line_content": "                                  privileges[grants_count].second,",
          "new_line_content": "      LEX_CSTRING priv= { privileges[grants_count].first.c_str(),",
          "content_same": false
        },
        {
          "line": 5247,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(0)",
          "old_line_content": "",
          "new_line_content": "    my_error(ER_REVOKE_GRANTS, MYF(0));",
          "content_same": false
        },
        {
          "line": 7295,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "privileges[grants_count].first.length()",
          "old_line_content": "                                  update_table))",
          "new_line_content": "                          privileges[grants_count].first.length() };",
          "content_same": false
        },
        {
          "line": 7296,
          "old_api": null,
          "new_api": "grant_dynamic_privilege",
          "old_text": null,
          "new_text": "grant_dynamic_privilege(priv, new_user, new_host,\n                                  privileges[grants_count].second,\n                                  update_table)",
          "old_line_content": "      {",
          "new_line_content": "      if (grant_dynamic_privilege(priv, new_user, new_host,",
          "content_same": false
        },
        {
          "line": 5251,
          "old_api": null,
          "new_api": "increase_version",
          "old_text": null,
          "new_text": "get_global_acl_cache()->increase_version()",
          "old_line_content": "",
          "new_line_content": "  get_global_acl_cache()->increase_version();",
          "content_same": false
        },
        {
          "line": 5252,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(result)",
          "old_line_content": "",
          "new_line_content": "  DBUG_RETURN(result);",
          "content_same": false
        },
        {
          "line": 7360,
          "old_api": null,
          "new_api": "const_cast<List<LEX_USER > *>(priv_list)",
          "old_text": null,
          "new_text": "const_cast<List<LEX_USER > *>(priv_list)",
          "old_line_content": "    Dynamic_privilege_register::iterator it=",
          "new_line_content": "  List_iterator<LEX_USER> it(*(const_cast<List<LEX_USER > *>(priv_list)));",
          "content_same": false
        },
        {
          "line": 7364,
          "old_api": null,
          "new_api": "std::string(priv->user.str, priv->user.length)",
          "old_text": null,
          "new_text": "std::string(priv->user.str, priv->user.length)",
          "old_line_content": "      String error;",
          "new_line_content": "      get_dynamic_privilege_register()->find(std::string(priv->user.str, priv->user.length));",
          "content_same": false
        },
        {
          "line": 7368,
          "old_api": null,
          "new_api": "append",
          "old_text": null,
          "new_text": "error.append(\"No such privilege identifier: \")",
          "old_line_content": "      return false;",
          "new_line_content": "      error.append(\"No such privilege identifier: \");",
          "content_same": false
        },
        {
          "line": 7369,
          "old_api": null,
          "new_api": "append",
          "old_text": null,
          "new_text": "error.append(priv->user.str, priv->user.length)",
          "old_line_content": "    }",
          "new_line_content": "      error.append(priv->user.str, priv->user.length);",
          "content_same": false
        },
        {
          "line": 7370,
          "old_api": null,
          "new_api": "c_ptr_quick",
          "old_text": null,
          "new_text": "error.c_ptr_quick()",
          "old_line_content": "  }",
          "new_line_content": "      my_error(ER_UNKNOWN_ERROR, MYF(0), error.c_ptr_quick());",
          "content_same": false
        },
        {
          "line": 5324,
          "old_api": null,
          "new_api": "open_grant_tables",
          "old_text": null,
          "new_text": "open_grant_tables(thd, tables, &transactional_tables)",
          "old_line_content": "  Acl_cache_lock_guard acl_cache_lock(thd, Acl_cache_lock_mode::WRITE_MODE);",
          "new_line_content": "  if ((result= open_grant_tables(thd, tables, &transactional_tables)))",
          "content_same": false
        },
        {
          "line": 5330,
          "old_api": null,
          "new_api": "commit_and_close_mysql_tables",
          "old_text": null,
          "new_text": "commit_and_close_mysql_tables(thd)",
          "old_line_content": "  /* Be sure to pop this before exiting this scope! */",
          "new_line_content": "    commit_and_close_mysql_tables(thd);",
          "content_same": false
        },
        {
          "line": 7381,
          "old_api": null,
          "new_api": "iterate_comma_separated_quoated_string",
          "old_text": null,
          "new_text": "iterate_comma_separated_quoated_string(authid_str,\n            [&error](const std::string item){\n              auto el= get_authid_from_quoted_string(item);\n              if (el.second != \"\" && el.first == \"\")\n                error= true;\n              return error;\n    })",
          "old_line_content": "              if (el.second != \"\" && el.first == \"\")",
          "new_line_content": "  iterate_comma_separated_quoated_string(authid_str,",
          "content_same": false
        },
        {
          "line": 5334,
          "old_api": null,
          "new_api": "push_internal_handler",
          "old_text": null,
          "new_text": "thd->push_internal_handler(&error_handler)",
          "old_line_content": "    This statement will be replicated as a statement, even when using",
          "new_line_content": "  thd->push_internal_handler(&error_handler);",
          "content_same": false
        },
        {
          "line": 7383,
          "old_api": null,
          "new_api": "get_authid_from_quoted_string",
          "old_text": null,
          "new_text": "get_authid_from_quoted_string(item)",
          "old_line_content": "              return error;",
          "new_line_content": "              auto el= get_authid_from_quoted_string(item);",
          "content_same": false
        },
        {
          "line": 7393,
          "old_api": null,
          "new_api": "mysql_mutex_lock",
          "old_text": null,
          "new_text": "mysql_mutex_lock(&LOCK_mandatory_roles)",
          "old_line_content": "    /* Use pre-parsed auth ids from the cache */",
          "new_line_content": "  mysql_mutex_lock(&LOCK_mandatory_roles);",
          "content_same": false
        },
        {
          "line": 5346,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "func_priv_hash.get()",
          "old_line_content": "    revoked= false;",
          "new_line_content": "    *hash= is_proc ? proc_priv_hash.get() : func_priv_hash.get();",
          "content_same": false
        },
        {
          "line": 7397,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "g_mandatory_roles->end()",
          "old_line_content": "    return;",
          "new_line_content": "    std::copy(g_mandatory_roles->begin(), g_mandatory_roles->end(),",
          "content_same": false
        },
        {
          "line": 5350,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "hash->end()",
          "old_line_content": "        Store an iterator pointing to the next element now, since",
          "new_line_content": "    for (auto it= hash->begin(), next_it= it; it != hash->end(); it= next_it)",
          "content_same": false
        },
        {
          "line": 7398,
          "old_api": null,
          "new_api": "std::back_inserter(*mandatory_roles)",
          "old_text": null,
          "new_text": "std::back_inserter(*mandatory_roles)",
          "old_line_content": "  }",
          "new_line_content": "              std::back_inserter(*mandatory_roles));",
          "content_same": false
        },
        {
          "line": 7402,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "g_mandatory_roles->clear()",
          "old_line_content": "    option SQL variable.",
          "new_line_content": "  g_mandatory_roles->clear();",
          "content_same": false
        },
        {
          "line": 5357,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "it->second.get()",
          "old_line_content": "      {",
          "new_line_content": "      GRANT_NAME *grant_proc= it->second.get();",
          "content_same": false
        },
        {
          "line": 5358,
          "old_api": null,
          "new_api": "my_strcasecmp",
          "old_text": null,
          "new_text": "my_strcasecmp(&my_charset_utf8_bin, grant_proc->db, sp_db)",
          "old_line_content": "        LEX_USER lex_user;",
          "new_line_content": "      if (!my_strcasecmp(&my_charset_utf8_bin, grant_proc->db, sp_db) &&",
          "content_same": false
        },
        {
          "line": 5359,
          "old_api": null,
          "new_api": "my_strcasecmp",
          "old_text": null,
          "new_text": "my_strcasecmp(system_charset_info, grant_proc->tname, sp_name)",
          "old_line_content": "        lex_user.user.str= grant_proc->user;",
          "new_line_content": "          !my_strcasecmp(system_charset_info, grant_proc->tname, sp_name))",
          "content_same": false
        },
        {
          "line": 7410,
          "old_api": null,
          "new_api": "user",
          "old_text": null,
          "new_text": "iterate_comma_separated_quoated_string(role_str,\n          [&mandatory_roles](const std::string item){\n            auto el= get_authid_from_quoted_string(item);\n            if (el.second == \"\")\n              el.second= \"%\";\n            Role_id role_id(el.first, el.second);\n            if (role_id.user() == \"\")\n            {\n              sql_print_warning(\"Can't set mandatory_role %s@%s: Anonymous \"\n                                \"authorization IDs are not allowed as roles.\",\n                                role_id.user().c_str(),\n                                role_id.host().c_str());\n            }\n            else if (find_acl_user(role_id.host().c_str(),\n                                   role_id.user().c_str(),\n                                   true) != NULL)\n            {\n              if (std::find(g_mandatory_roles->begin(),\n                            g_mandatory_roles->end(),\n                            role_id) == g_mandatory_roles->end())\n              {\n                mandatory_roles->push_back(role_id);\n                g_mandatory_roles->push_back(role_id);\n              }\n            }\n            else\n            {\n              sql_print_warning(\"Can't set mandatory_role: There's no such \"\n                                \"authorization ID %s@%s.\",\n                                role_id.user().c_str(),\n                                role_id.host().c_str());\n            }\n            return false; // continue iterating\n          })",
          "old_line_content": "            if (el.second == \"\")",
          "new_line_content": "  iterate_comma_separated_quoated_string(role_str,",
          "content_same": false
        },
        {
          "line": 7412,
          "old_api": null,
          "new_api": "get_authid_from_quoted_string",
          "old_text": null,
          "new_text": "get_authid_from_quoted_string(item)",
          "old_line_content": "            Role_id role_id(el.first, el.second);",
          "new_line_content": "            auto el= get_authid_from_quoted_string(item);",
          "content_same": false
        },
        {
          "line": 5365,
          "old_api": null,
          "new_api": "get_host",
          "old_text": null,
          "new_text": "grant_proc->host.get_host()",
          "old_line_content": "",
          "new_line_content": "          grant_proc->host.get_host() : \"\");",
          "content_same": false
        },
        {
          "line": 5366,
          "old_api": null,
          "new_api": "get_host",
          "old_text": null,
          "new_text": "grant_proc->host.get_host()",
          "old_line_content": "        int ret=",
          "new_line_content": "        lex_user.host.length= grant_proc->host.get_host() ?",
          "content_same": false
        },
        {
          "line": 7416,
          "old_api": null,
          "new_api": "user",
          "old_text": null,
          "new_text": "role_id.user()",
          "old_line_content": "                                \"authorization IDs are not allowed as roles.\",",
          "new_line_content": "            if (role_id.user() == \"\")",
          "content_same": false
        },
        {
          "line": 5370,
          "old_api": null,
          "new_api": "replace_routine_table",
          "old_text": null,
          "new_text": "replace_routine_table(thd,grant_proc,tables[4].table,lex_user,\n                                grant_proc->db, grant_proc->tname,\n                                is_proc, ~(ulong)0, true)",
          "old_line_content": "        if (ret < 0)",
          "new_line_content": "          replace_routine_table(thd,grant_proc,tables[4].table,lex_user,",
          "content_same": false
        },
        {
          "line": 7423,
          "old_api": null,
          "new_api": "host",
          "old_text": null,
          "new_text": "role_id.host().c_str()",
          "old_line_content": "            {",
          "new_line_content": "            else if (find_acl_user(role_id.host().c_str(),",
          "content_same": false
        },
        {
          "line": 7427,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "g_mandatory_roles->begin()",
          "old_line_content": "              {",
          "new_line_content": "              if (std::find(g_mandatory_roles->begin(),",
          "content_same": false
        },
        {
          "line": 7431,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "mandatory_roles->push_back(role_id)",
          "old_line_content": "            }",
          "new_line_content": "                mandatory_roles->push_back(role_id);",
          "content_same": false
        },
        {
          "line": 7432,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "g_mandatory_roles->push_back(role_id)",
          "old_line_content": "            else",
          "new_line_content": "                g_mandatory_roles->push_back(role_id);",
          "content_same": false
        },
        {
          "line": 7439,
          "old_api": null,
          "new_api": "user",
          "old_text": null,
          "new_text": "role_id.user().c_str()",
          "old_line_content": "            return false; // continue iterating",
          "new_line_content": "                                role_id.user().c_str(),",
          "content_same": false
        },
        {
          "line": 5392,
          "old_api": null,
          "new_api": "pop_internal_handler",
          "old_text": null,
          "new_text": "thd->pop_internal_handler()",
          "old_line_content": "",
          "new_line_content": "  thd->pop_internal_handler();",
          "content_same": false
        },
        {
          "line": 5393,
          "old_api": null,
          "new_api": "has_errors",
          "old_text": null,
          "new_text": "error_handler.has_errors()",
          "old_line_content": "",
          "new_line_content": "  DBUG_RETURN(error_handler.has_errors() || result);",
          "content_same": false
        },
        {
          "line": 7440,
          "old_api": null,
          "new_api": "host",
          "old_text": null,
          "new_text": "role_id.host().c_str()",
          "old_line_content": "          });",
          "new_line_content": "                                role_id.host().c_str());",
          "content_same": false
        },
        {
          "line": 7444,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "g_mandatory_roles->end()",
          "old_line_content": "",
          "new_line_content": "  std::sort(g_mandatory_roles->begin(), g_mandatory_roles->end());",
          "content_same": false
        },
        {
          "line": 7445,
          "old_api": null,
          "new_api": "mysql_mutex_unlock",
          "old_text": null,
          "new_text": "mysql_mutex_unlock(&LOCK_mandatory_roles)",
          "old_line_content": "void update_mandatory_roles(void)",
          "new_line_content": "  mysql_mutex_unlock(&LOCK_mandatory_roles);",
          "content_same": false
        },
        {
          "line": 7450,
          "old_api": null,
          "new_api": "mysql_mutex_assert_owner",
          "old_text": null,
          "new_text": "mysql_mutex_assert_owner(&LOCK_mandatory_roles)",
          "old_line_content": "}",
          "new_line_content": "  mysql_mutex_assert_owner(&LOCK_mandatory_roles);",
          "content_same": false
        },
        {
          "line": 7452,
          "old_api": null,
          "new_api": "increase_version",
          "old_text": null,
          "new_text": "get_global_acl_cache()->increase_version()",
          "old_line_content": "",
          "new_line_content": "  get_global_acl_cache()->increase_version();",
          "content_same": false
        },
        {
          "line": 7460,
          "old_api": null,
          "new_api": "auth_str",
          "old_text": null,
          "new_text": "a.auth_str(&tmp)",
          "old_line_content": "",
          "new_line_content": "  a.auth_str(&tmp);",
          "content_same": false
        },
        {
          "line": 5413,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()",
          "old_line_content": "  List<LEX_USER> user_list;",
          "new_line_content": "  Security_context *sctx= thd->security_context();",
          "content_same": false
        },
        {
          "line": 5423,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(TRUE)",
          "old_line_content": "  Acl_cache_lock_guard acl_cache_lock(thd, Acl_cache_lock_mode::READ_MODE);",
          "new_line_content": "    DBUG_RETURN(TRUE);",
          "content_same": false
        },
        {
          "line": 7474,
          "old_api": null,
          "new_api": "host",
          "old_text": null,
          "new_text": "a.host().length()",
          "old_line_content": "                        b.second.str) == 0);",
          "new_line_content": "          (a.host().length() == b.second.length) &&",
          "content_same": false
        },
        {
          "line": 7475,
          "old_api": null,
          "new_api": "user",
          "old_text": null,
          "new_text": "a.user().c_str()",
          "old_line_content": "}",
          "new_line_content": "          strncmp(a.user().c_str(), b.first.str, b.first.length) == 0 &&",
          "content_same": false
        },
        {
          "line": 5428,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(TRUE)",
          "old_line_content": "                         combo->user.str, false)))",
          "new_line_content": "    DBUG_RETURN(TRUE);",
          "content_same": false
        },
        {
          "line": 7476,
          "old_api": null,
          "new_api": "host",
          "old_text": null,
          "new_text": "a.host().c_str()",
          "old_line_content": "",
          "new_line_content": "          my_strcasecmp(system_charset_info, a.host().c_str(),",
          "content_same": false
        },
        {
          "line": 5433,
          "old_api": null,
          "new_api": "unlock",
          "old_text": null,
          "new_text": "acl_cache_lock.unlock()",
          "old_line_content": " found_acl:",
          "new_line_content": "  acl_cache_lock.unlock();",
          "content_same": false
        },
        {
          "line": 5439,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(tables, 0, sizeof(TABLE_LIST))",
          "old_line_content": "  tables->db= (char*)sp_db;",
          "new_line_content": "  memset(tables, 0, sizeof(TABLE_LIST));",
          "content_same": false
        },
        {
          "line": 5440,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "user_list.empty()",
          "old_line_content": "  tables->table_name= tables->alias= (char*)sp_name;",
          "new_line_content": "  user_list.empty();",
          "content_same": false
        },
        {
          "line": 7490,
          "old_api": null,
          "new_api": "host",
          "old_text": null,
          "new_text": "a.second.host().length()",
          "old_line_content": "                        b.second.str) == 0);",
          "new_line_content": "          (a.second.host().length() == b.second.length) &&",
          "content_same": false
        },
        {
          "line": 7491,
          "old_api": null,
          "new_api": "user",
          "old_text": null,
          "new_text": "a.second.user().c_str()",
          "old_line_content": "}",
          "new_line_content": "          strncmp(a.second.user().c_str(), b.first.str, b.first.length) == 0 &&",
          "content_same": false
        },
        {
          "line": 7492,
          "old_api": null,
          "new_api": "host",
          "old_text": null,
          "new_text": "a.second.host().c_str()",
          "old_line_content": "",
          "new_line_content": "          my_strcasecmp(system_charset_info, a.second.host().c_str(),",
          "content_same": false
        },
        {
          "line": 5446,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(combo->user.str)",
          "old_line_content": "",
          "new_line_content": "                       combo->user.str, strlen(combo->user.str), 0);",
          "content_same": false
        },
        {
          "line": 5447,
          "old_api": null,
          "new_api": "make_lex_string",
          "old_text": null,
          "new_text": "thd->make_lex_string(&combo->host,\n                       combo->host.str, strlen(combo->host.str), 0)",
          "old_line_content": "  combo->plugin= EMPTY_CSTR;",
          "new_line_content": "  thd->make_lex_string(&combo->host,",
          "content_same": false
        },
        {
          "line": 5448,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(combo->host.str)",
          "old_line_content": "  combo->auth= EMPTY_CSTR;",
          "new_line_content": "                       combo->host.str, strlen(combo->host.str), 0);",
          "content_same": false
        },
        {
          "line": 7499,
          "old_api": null,
          "new_api": "host",
          "old_text": null,
          "new_text": "b.host().length()",
          "old_line_content": "}",
          "new_line_content": "          (a.host().length() == b.host().length()) &&",
          "content_same": false
        },
        {
          "line": 7500,
          "old_api": null,
          "new_api": "host",
          "old_text": null,
          "new_text": "a.host().c_str()",
          "old_line_content": "",
          "new_line_content": "          (my_strcasecmp(system_charset_info, a.host().c_str(),",
          "content_same": false
        },
        {
          "line": 7501,
          "old_api": null,
          "new_api": "host",
          "old_text": null,
          "new_text": "b.host().c_str()",
          "old_line_content": "bool operator<(const Auth_id_ref &a, const Auth_id_ref &b)",
          "new_line_content": "                         b.host().c_str()) ==0));",
          "content_same": false
        },
        {
          "line": 5457,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "user_list.push_back(combo)",
          "old_line_content": "  thd->lex->ssl_type= SSL_TYPE_NOT_SPECIFIED;",
          "new_line_content": "  if (user_list.push_back(combo))",
          "content_same": false
        },
        {
          "line": 5458,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(TRUE)",
          "old_line_content": "  thd->lex->ssl_cipher= thd->lex->x509_subject= thd->lex->x509_issuer= 0;",
          "new_line_content": "    DBUG_RETURN(TRUE);",
          "content_same": false
        },
        {
          "line": 5462,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&thd->lex->mqh, 0, sizeof(thd->lex->mqh))",
          "old_line_content": "",
          "new_line_content": "  memset(&thd->lex->mqh, 0, sizeof(thd->lex->mqh));",
          "content_same": false
        },
        {
          "line": 5464,
          "old_api": null,
          "new_api": "cleanup",
          "old_text": null,
          "new_text": "thd->lex->alter_password.cleanup()",
          "old_line_content": "",
          "new_line_content": "  thd->lex->alter_password.cleanup();",
          "content_same": false
        },
        {
          "line": 7514,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(a.second.str, b.second.str, a.second.length)",
          "old_line_content": "  return false;",
          "new_line_content": "  int second= memcmp(a.second.str, b.second.str, a.second.length);",
          "content_same": false
        },
        {
          "line": 5475,
          "old_api": null,
          "new_api": "pop_internal_handler",
          "old_text": null,
          "new_text": "thd->pop_internal_handler()",
          "old_line_content": "",
          "new_line_content": "  thd->pop_internal_handler();",
          "content_same": false
        },
        {
          "line": 5476,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(result)",
          "old_line_content": "",
          "new_line_content": "  DBUG_RETURN(result);",
          "content_same": false
        },
        {
          "line": 7531,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(a.str, b.str, a.length)",
          "old_line_content": "",
          "new_line_content": "       (memcmp(a.str, b.str, a.length) == 0)) );",
          "content_same": false
        },
        {
          "line": 5489,
          "old_api": null,
          "new_api": "restore_record",
          "old_text": null,
          "new_text": "restore_record(table, s->default_values)",
          "old_line_content": "  if (db)",
          "new_line_content": "  restore_record(table, s->default_values);",
          "content_same": false
        },
        {
          "line": 5491,
          "old_api": null,
          "new_api": "STRING_WITH_LEN",
          "old_text": null,
          "new_text": "STRING_WITH_LEN(\"def\")",
          "old_line_content": "  if (t_name)",
          "new_line_content": "  table->field[1]->store(STRING_WITH_LEN(\"def\"), cs);",
          "content_same": false
        },
        {
          "line": 5493,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(db)",
          "old_line_content": "  if (column)",
          "new_line_content": "    table->field[i++]->store(db, strlen(db), cs);",
          "content_same": false
        },
        {
          "line": 5498,
          "old_api": null,
          "new_api": "store",
          "old_text": null,
          "new_text": "table->field[i++]->store(priv, priv_length, cs)",
          "old_line_content": "}",
          "new_line_content": "  table->field[i++]->store(priv, priv_length, cs);",
          "content_same": false
        },
        {
          "line": 5499,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(is_grantable)",
          "old_line_content": "",
          "new_line_content": "  table->field[i]->store(is_grantable, strlen(is_grantable), cs);",
          "content_same": false
        },
        {
          "line": 5500,
          "old_api": null,
          "new_api": "schema_table_store_record",
          "old_text": null,
          "new_text": "schema_table_store_record(thd, table)",
          "old_line_content": "",
          "new_line_content": "  return schema_table_store_record(thd, table);",
          "content_same": false
        },
        {
          "line": 5521,
          "old_api": null,
          "new_api": "priv_host",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"enter\", (\"Host: '%s', Ip: '%s', User: '%s', table: `%s`.`%s`\",\n                       sctx->priv_host().str, (sctx->ip().length ?\n                       sctx->ip().str : \"(NULL)\"),\n                       (priv_user.str ? priv_user.str : \"(NULL)\"),\n                       db, table))",
          "old_line_content": "                       (priv_user.str ? priv_user.str : \"(NULL)\"),",
          "new_line_content": "  DBUG_PRINT(\"enter\", (\"Host: '%s', Ip: '%s', User: '%s', table: `%s`.`%s`\",",
          "content_same": false
        },
        {
          "line": 5522,
          "old_api": null,
          "new_api": "ip",
          "old_text": null,
          "new_text": "sctx->ip()",
          "old_line_content": "                       db, table));",
          "new_line_content": "                       sctx->priv_host().str, (sctx->ip().length ?",
          "content_same": false
        },
        {
          "line": 5523,
          "old_api": null,
          "new_api": "ip",
          "old_text": null,
          "new_text": "sctx->ip()",
          "old_line_content": "  /*",
          "new_line_content": "                       sctx->ip().str : \"(NULL)\"),",
          "content_same": false
        },
        {
          "line": 5533,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"info\", (\"skip grants\"))",
          "old_line_content": "    DBUG_VOID_RETURN;",
          "new_line_content": "    DBUG_PRINT(\"info\", (\"skip grants\"));",
          "content_same": false
        },
        {
          "line": 5540,
          "old_api": null,
          "new_api": "get_active_roles",
          "old_text": null,
          "new_text": "sctx->get_active_roles()->size()",
          "old_line_content": "     /* global privileges */",
          "new_line_content": "                     (unsigned long)sctx->get_active_roles()->size()));",
          "content_same": false
        },
        {
          "line": 5548,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(table)",
          "old_line_content": "    grant->grant_table= 0;",
          "new_line_content": "    LEX_CSTRING str_table= {table, strlen(table)};",
          "content_same": false
        },
        {
          "line": 5552,
          "old_api": null,
          "new_api": "get_active_roles",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"info\",(\"Role used: %s db: %s db-acl: %lu all-acl: %lu \",\n                       sctx->get_active_roles()->at(0).first.str,\n                       db, sctx->db_acl(str_db), grant->privilege))",
          "old_line_content": "  }",
          "new_line_content": "    DBUG_PRINT(\"info\",(\"Role used: %s db: %s db-acl: %lu all-acl: %lu \",",
          "content_same": false
        },
        {
          "line": 5553,
          "old_api": null,
          "new_api": "get_active_roles",
          "old_text": null,
          "new_text": "sctx->get_active_roles()->at(0)",
          "old_line_content": "  else",
          "new_line_content": "                       sctx->get_active_roles()->at(0).first.str,",
          "content_same": false
        },
        {
          "line": 5554,
          "old_api": null,
          "new_api": "db_acl",
          "old_text": null,
          "new_text": "sctx->db_acl(str_db)",
          "old_line_content": "  {",
          "new_line_content": "                       db, sctx->db_acl(str_db), grant->privilege));",
          "content_same": false
        },
        {
          "line": 5568,
          "old_api": null,
          "new_api": "lock",
          "old_text": null,
          "new_text": "acl_cache_lock.lock(false)",
          "old_line_content": "    if (grant->version != grant_version)",
          "new_line_content": "    if (!acl_cache_lock.lock(false))",
          "content_same": false
        },
        {
          "line": 5574,
          "old_api": null,
          "new_api": "ip",
          "old_text": null,
          "new_text": "sctx->ip()",
          "old_line_content": "    }",
          "new_line_content": "        table_hash_search(sctx->host().str, sctx->ip().str, db,",
          "content_same": false
        },
        {
          "line": 5588,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"info\", (\"privilege 0x%lx\", grant->privilege))",
          "old_line_content": "",
          "new_line_content": "  DBUG_PRINT(\"info\", (\"privilege 0x%lx\", grant->privilege));",
          "content_same": false
        },
        {
          "line": 5597,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"acl_check_proxy_grant_access\")",
          "old_line_content": "  if (!initialized)",
          "new_line_content": "  DBUG_ENTER(\"acl_check_proxy_grant_access\");",
          "content_same": false
        },
        {
          "line": 5598,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"info\", (\"user=%s host=%s with_grant=%d\", user, host,\n                      (int) with_grant))",
          "old_line_content": "  {",
          "new_line_content": "  DBUG_PRINT(\"info\", (\"user=%s host=%s with_grant=%d\", user, host,",
          "content_same": false
        },
        {
          "line": 5602,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(0)",
          "old_line_content": "",
          "new_line_content": "    my_error(ER_OPTION_PREVENTS_STATEMENT, MYF(0), \"--skip-grant-tables\");",
          "content_same": false
        },
        {
          "line": 5603,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(1)",
          "old_line_content": "  /* replication slave thread can do anything */",
          "new_line_content": "    DBUG_RETURN(1);",
          "content_same": false
        },
        {
          "line": 5609,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"info\", (\"replication slave\"))",
          "old_line_content": "",
          "new_line_content": "    DBUG_PRINT(\"info\", (\"replication slave\"));",
          "content_same": false
        },
        {
          "line": 5610,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(FALSE)",
          "old_line_content": "  /*",
          "new_line_content": "    DBUG_RETURN(FALSE);",
          "content_same": false
        },
        {
          "line": 5625,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->priv_user()",
          "old_line_content": "  {",
          "new_line_content": "  if (!strcmp(thd->security_context()->priv_user().str, user) &&",
          "content_same": false
        },
        {
          "line": 3578,
          "old_api": null,
          "new_api": "lock",
          "old_text": null,
          "new_text": "acl_cache_lock.lock(!no_errors)",
          "old_line_content": "",
          "new_line_content": "    if (!acl_cache_lock.lock(!no_errors))",
          "content_same": false
        },
        {
          "line": 3579,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(true)",
          "old_line_content": "  for (tl= tables;",
          "new_line_content": "      DBUG_RETURN(true);",
          "content_same": false
        },
        {
          "line": 5630,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->priv_user()",
          "old_line_content": "  }",
          "new_line_content": "                        thd->security_context()->priv_user().str, user,",
          "content_same": false
        },
        {
          "line": 5631,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->priv_host()",
          "old_line_content": "  Acl_cache_lock_guard acl_cache_lock(thd, Acl_cache_lock_mode::READ_MODE);",
          "new_line_content": "                        host, thd->security_context()->priv_host().str));",
          "content_same": false
        },
        {
          "line": 5635,
          "old_api": null,
          "new_api": "lock",
          "old_text": null,
          "new_text": "acl_cache_lock.lock()",
          "old_line_content": "  /* check for matching WITH PROXY rights */",
          "new_line_content": "  if (!acl_cache_lock.lock())",
          "content_same": false
        },
        {
          "line": 3592,
          "old_api": null,
          "new_api": "get_db_name",
          "old_text": null,
          "new_text": "get_cached_table_access(&t_ref->grant.m_internal,\n                              t_ref->get_db_name(),\n                              t_ref->get_table_name())",
          "old_line_content": "",
          "new_line_content": "      get_cached_table_access(&t_ref->grant.m_internal,",
          "content_same": false
        },
        {
          "line": 3593,
          "old_api": null,
          "new_api": "get_db_name",
          "old_text": null,
          "new_text": "t_ref->get_db_name()",
          "old_line_content": "    if (access)",
          "new_line_content": "                              t_ref->get_db_name(),",
          "content_same": false
        },
        {
          "line": 3594,
          "old_api": null,
          "new_api": "get_table_name",
          "old_text": null,
          "new_text": "t_ref->get_table_name()",
          "old_line_content": "    {",
          "new_line_content": "                              t_ref->get_table_name());",
          "content_same": false
        },
        {
          "line": 5643,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->host()",
          "old_line_content": "                       user, FALSE) &&",
          "new_line_content": "    if (proxy->matches(thd->security_context()->host().str,",
          "content_same": false
        },
        {
          "line": 5645,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->ip()",
          "old_line_content": "    {",
          "new_line_content": "                       thd->security_context()->ip().str,",
          "content_same": false
        },
        {
          "line": 3598,
          "old_api": null,
          "new_api": "check",
          "old_text": null,
          "new_text": "access->check(orig_want_access, &t_ref->grant.privilege)",
          "old_line_content": "        /*",
          "new_line_content": "      switch(access->check(orig_want_access, &t_ref->grant.privilege))",
          "content_same": false
        },
        {
          "line": 5649,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"info\", (\"found\"))",
          "old_line_content": "  }",
          "new_line_content": "      DBUG_PRINT(\"info\", (\"found\"));",
          "content_same": false
        },
        {
          "line": 5650,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(FALSE)",
          "old_line_content": "",
          "new_line_content": "      DBUG_RETURN(FALSE);",
          "content_same": false
        },
        {
          "line": 5655,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->user()",
          "old_line_content": "}",
          "new_line_content": "           thd->security_context()->user().str,",
          "content_same": false
        },
        {
          "line": 5656,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->host_or_ip()",
          "old_line_content": "",
          "new_line_content": "           thd->security_context()->host_or_ip().str);",
          "content_same": false
        },
        {
          "line": 5657,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(TRUE)",
          "old_line_content": "",
          "new_line_content": "  DBUG_RETURN(TRUE);",
          "content_same": false
        },
        {
          "line": 3615,
          "old_api": null,
          "new_api": "master_access",
          "old_text": null,
          "new_text": "sctx->master_access()",
          "old_line_content": "",
          "new_line_content": "    want_access&= ~sctx->master_access();",
          "content_same": false
        },
        {
          "line": 5670,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->priv_host_name()",
          "old_line_content": "  if (!initialized)",
          "new_line_content": "  const char *curr_host= thd->security_context()->priv_host_name();",
          "content_same": false
        },
        {
          "line": 3623,
          "old_api": null,
          "new_api": "is_temporary_table",
          "old_text": null,
          "new_text": "is_temporary_table(t_ref)",
          "old_line_content": "        If this table list element corresponds to a pre-opened temporary",
          "new_line_content": "    if (is_temporary_table(t_ref))",
          "content_same": false
        },
        {
          "line": 5678,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(1)",
          "old_line_content": "  {",
          "new_line_content": "    DBUG_RETURN(1);",
          "content_same": false
        },
        {
          "line": 5680,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "acl_users->end()",
          "old_line_content": "    if (!(user=acl_user->user))",
          "new_line_content": "  for (acl_user= acl_users->begin(); acl_user != acl_users->end(); ++acl_user)",
          "content_same": false
        },
        {
          "line": 3635,
          "old_api": null,
          "new_api": "get_active_roles",
          "old_text": null,
          "new_text": "sctx->get_active_roles()->size()",
          "old_line_content": "      t_ref->grant.version= grant_version;",
          "new_line_content": "    if (sctx->get_active_roles()->size() != 0)",
          "content_same": false
        },
        {
          "line": 5685,
          "old_api": null,
          "new_api": "get_host",
          "old_text": null,
          "new_text": "acl_user->host.get_host()",
          "old_line_content": "    if (no_global_access &&",
          "new_line_content": "    if (!(host=acl_user->host.get_host()))",
          "content_same": false
        },
        {
          "line": 5689,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->priv_user()",
          "old_line_content": "",
          "new_line_content": "        (strcmp(thd->security_context()->priv_user().str, user) ||",
          "content_same": false
        },
        {
          "line": 3642,
          "old_api": null,
          "new_api": "get_db_name",
          "old_text": null,
          "new_text": "t_ref->get_db_name()",
          "old_line_content": "",
          "new_line_content": "                                     strlen(t_ref->get_db_name())},",
          "content_same": false
        },
        {
          "line": 5690,
          "old_api": null,
          "new_api": "my_strcasecmp",
          "old_text": null,
          "new_text": "my_strcasecmp(system_charset_info, curr_host, host)",
          "old_line_content": "    want_access= acl_user->access;",
          "new_line_content": "         my_strcasecmp(system_charset_info, curr_host, host)))",
          "content_same": false
        },
        {
          "line": 3644,
          "old_api": null,
          "new_api": "get_table_name",
          "old_text": null,
          "new_text": "t_ref->get_table_name()",
          "old_line_content": "                 (\"Acl_map table %s.%s has access %lu\",",
          "new_line_content": "                                     strlen(t_ref->get_table_name())});",
          "content_same": false
        },
        {
          "line": 3646,
          "old_api": null,
          "new_api": "get_db_name",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"info\",\n                 (\"Acl_map table %s.%s has access %lu\",\n                  t_ref->get_db_name(), t_ref->get_table_name(),\n                  aggr.table_access))",
          "old_line_content": "                  aggr.table_access));",
          "new_line_content": "      DBUG_PRINT(\"info\",",
          "content_same": false
        },
        {
          "line": 3648,
          "old_api": null,
          "new_api": "get_table_name",
          "old_text": null,
          "new_text": "t_ref->get_table_name()",
          "old_line_content": "        For SHOW COLUMNS, SHOW INDEX it is enough to have some",
          "new_line_content": "                  t_ref->get_db_name(), t_ref->get_table_name(),",
          "content_same": false
        },
        {
          "line": 5700,
          "old_api": null,
          "new_api": "update_schema_privilege",
          "old_text": null,
          "new_text": "update_schema_privilege(thd, table, buff, 0, 0, 0, 0,\n                                  STRING_WITH_LEN(\"USAGE\"), is_grantable)",
          "old_line_content": "        error= 1;",
          "new_line_content": "      if (update_schema_privilege(thd, table, buff, 0, 0, 0, 0,",
          "content_same": false
        },
        {
          "line": 5701,
          "old_api": null,
          "new_api": "STRING_WITH_LEN",
          "old_text": null,
          "new_text": "STRING_WITH_LEN(\"USAGE\")",
          "old_line_content": "        goto err;",
          "new_line_content": "                                  STRING_WITH_LEN(\"USAGE\"), is_grantable))",
          "content_same": false
        },
        {
          "line": 5715,
          "old_api": null,
          "new_api": "update_schema_privilege",
          "old_text": null,
          "new_text": "update_schema_privilege(thd, table, buff, 0, 0, 0, 0,\n                                      command_array[priv_id],\n                                      command_lengths[priv_id], is_grantable)",
          "old_line_content": "          {",
          "new_line_content": "          if (update_schema_privilege(thd, table, buff, 0, 0, 0, 0,",
          "content_same": false
        },
        {
          "line": 3668,
          "old_api": null,
          "new_api": "get_db_name",
          "old_text": null,
          "new_text": "t_ref->get_db_name()",
          "old_line_content": "                           t_ref->grant.privilege));",
          "new_line_content": "                           t_ref->get_db_name(),",
          "content_same": false
        },
        {
          "line": 3669,
          "old_api": null,
          "new_api": "get_table_name",
          "old_text": null,
          "new_text": "t_ref->get_table_name()",
          "old_line_content": "        continue;",
          "new_line_content": "                           t_ref->get_table_name(),",
          "content_same": false
        },
        {
          "line": 3677,
          "old_api": null,
          "new_api": "get_db_name",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"info\",(\"Access denied for %s.%s. Unfulfilled access: %lu\",\n                           t_ref->get_db_name(), t_ref->get_table_name(),\n                           want_access))",
          "old_line_content": "        goto err;",
          "new_line_content": "        DBUG_PRINT(\"info\",(\"Access denied for %s.%s. Unfulfilled access: %lu\",",
          "content_same": false
        },
        {
          "line": 3678,
          "old_api": null,
          "new_api": "get_table_name",
          "old_text": null,
          "new_text": "t_ref->get_table_name()",
          "old_line_content": "      }",
          "new_line_content": "                           t_ref->get_db_name(), t_ref->get_table_name(),",
          "content_same": false
        },
        {
          "line": 5731,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "it->second.first.length()",
          "old_line_content": "      else",
          "new_line_content": "      size_t str_len= it->second.first.length();",
          "content_same": false
        },
        {
          "line": 3687,
          "old_api": null,
          "new_api": "get_db_name",
          "old_text": null,
          "new_text": "t_ref->get_db_name()",
          "old_line_content": "                                                  FALSE);",
          "new_line_content": "                                                  t_ref->get_db_name(),",
          "content_same": false
        },
        {
          "line": 3688,
          "old_api": null,
          "new_api": "priv_user",
          "old_text": null,
          "new_text": "sctx->priv_user()",
          "old_line_content": "",
          "new_line_content": "                                                  sctx->priv_user().str,",
          "content_same": false
        },
        {
          "line": 3689,
          "old_api": null,
          "new_api": "get_table_name",
          "old_text": null,
          "new_text": "t_ref->get_table_name()",
          "old_line_content": "      if (!grant_table)",
          "new_line_content": "                                                  t_ref->get_table_name(),",
          "content_same": false
        },
        {
          "line": 5736,
          "old_api": null,
          "new_api": "c_str",
          "old_text": null,
          "new_text": "update_schema_privilege(thd, table, buff, 0, 0, 0, 0,\n                                  it->second.first.c_str(),\n                                  str_len,\n                                  is_grantable)",
          "old_line_content": "                                  is_grantable))",
          "new_line_content": "      if (update_schema_privilege(thd, table, buff, 0, 0, 0, 0,",
          "content_same": false
        },
        {
          "line": 5737,
          "old_api": null,
          "new_api": "c_str",
          "old_text": null,
          "new_text": "it->second.first.c_str()",
          "old_line_content": "      {",
          "new_line_content": "                                  it->second.first.c_str(),",
          "content_same": false
        },
        {
          "line": 3694,
          "old_api": null,
          "new_api": "get_table_name",
          "old_text": null,
          "new_text": "t_ref->get_table_name()",
          "old_line_content": "      }",
          "new_line_content": "        DBUG_PRINT(\"info\",(\"Table %s didn't exist in the legacy table acl cache\", t_ref->get_table_name()));",
          "content_same": false
        },
        {
          "line": 5748,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(error)",
          "old_line_content": "",
          "new_line_content": "  DBUG_RETURN(error);",
          "content_same": false
        },
        {
          "line": 3710,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"info\",(\"t_ref->grant.privilege = %lu\",\n                         t_ref->grant.privilege))",
          "old_line_content": "        continue;",
          "new_line_content": "      DBUG_PRINT(\"info\",(\"t_ref->grant.privilege = %lu\",",
          "content_same": false
        },
        {
          "line": 5761,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->priv_host_name()",
          "old_line_content": "  if (!initialized)",
          "new_line_content": "  const char *curr_host= thd->security_context()->priv_host_name();",
          "content_same": false
        },
        {
          "line": 5769,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(1)",
          "old_line_content": "  {",
          "new_line_content": "    DBUG_RETURN(1);",
          "content_same": false
        },
        {
          "line": 3722,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(FALSE)",
          "old_line_content": "",
          "new_line_content": "  DBUG_RETURN(FALSE);",
          "content_same": false
        },
        {
          "line": 5771,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "acl_dbs->end()",
          "old_line_content": "",
          "new_line_content": "  for (acl_db= acl_dbs->begin(); acl_db != acl_dbs->end(); ++acl_db)",
          "content_same": false
        },
        {
          "line": 5777,
          "old_api": null,
          "new_api": "get_host",
          "old_text": null,
          "new_text": "acl_db->host.get_host()",
          "old_line_content": "    if (no_global_access &&",
          "new_line_content": "    if (!(host=acl_db->host.get_host()))",
          "content_same": false
        },
        {
          "line": 3732,
          "old_api": null,
          "new_api": "priv_user",
          "old_text": null,
          "new_text": "sctx->priv_user()",
          "old_line_content": "  }",
          "new_line_content": "             sctx->priv_user().str,",
          "content_same": false
        },
        {
          "line": 5781,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->priv_user()",
          "old_line_content": "",
          "new_line_content": "        (strcmp(thd->security_context()->priv_user().str, user) ||",
          "content_same": false
        },
        {
          "line": 3734,
          "old_api": null,
          "new_api": "get_table_name",
          "old_text": null,
          "new_text": "tl->get_table_name()",
          "old_line_content": "}",
          "new_line_content": "             tl ? tl->get_table_name() : \"unknown\");",
          "content_same": false
        },
        {
          "line": 5782,
          "old_api": null,
          "new_api": "my_strcasecmp",
          "old_text": null,
          "new_text": "my_strcasecmp(system_charset_info, curr_host, host)",
          "old_line_content": "    want_access=acl_db->access;",
          "new_line_content": "         my_strcasecmp(system_charset_info, curr_host, host)))",
          "content_same": false
        },
        {
          "line": 3736,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(TRUE)",
          "old_line_content": "",
          "new_line_content": "  DBUG_RETURN(TRUE);",
          "content_same": false
        },
        {
          "line": 5795,
          "old_api": null,
          "new_api": "update_schema_privilege",
          "old_text": null,
          "new_text": "update_schema_privilege(thd, table, buff, acl_db->db, 0, 0,\n                                    0, STRING_WITH_LEN(\"USAGE\"), is_grantable)",
          "old_line_content": "          error= 1;",
          "new_line_content": "        if (update_schema_privilege(thd, table, buff, acl_db->db, 0, 0,",
          "content_same": false
        },
        {
          "line": 5796,
          "old_api": null,
          "new_api": "STRING_WITH_LEN",
          "old_text": null,
          "new_text": "STRING_WITH_LEN(\"USAGE\")",
          "old_line_content": "          goto err;",
          "new_line_content": "                                    0, STRING_WITH_LEN(\"USAGE\"), is_grantable))",
          "content_same": false
        },
        {
          "line": 5809,
          "old_api": null,
          "new_api": "update_schema_privilege",
          "old_text": null,
          "new_text": "update_schema_privilege(thd, table, buff, acl_db->db, 0, 0, 0,\n                                        command_array[cnt], command_lengths[cnt],\n                                        is_grantable)",
          "old_line_content": "            {",
          "new_line_content": "            if (update_schema_privilege(thd, table, buff, acl_db->db, 0, 0, 0,",
          "content_same": false
        },
        {
          "line": 3766,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"check_grant_column\")",
          "old_line_content": "",
          "new_line_content": "  DBUG_ENTER(\"check_grant_column\");",
          "content_same": false
        },
        {
          "line": 3767,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"enter\", (\"table: %s  want_privilege: %lu\",\n                       table_name, want_privilege))",
          "old_line_content": "  // Adjust wanted privileges based on privileges granted to table:",
          "new_line_content": "  DBUG_PRINT(\"enter\", (\"table: %s  want_privilege: %lu\",",
          "content_same": false
        },
        {
          "line": 5822,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(error)",
          "old_line_content": "",
          "new_line_content": "  DBUG_RETURN(error);",
          "content_same": false
        },
        {
          "line": 3775,
          "old_api": null,
          "new_api": "lock",
          "old_text": null,
          "new_text": "acl_cache_lock.lock()",
          "old_line_content": "  /* reload table if someone has modified any grants */",
          "new_line_content": "  if (!acl_cache_lock.lock())",
          "content_same": false
        },
        {
          "line": 3779,
          "old_api": null,
          "new_api": "get_active_roles",
          "old_text": null,
          "new_text": "sctx->get_active_roles()->size()",
          "old_line_content": "    Grant_table_aggregate agg=",
          "new_line_content": "  if (sctx->get_active_roles()->size() != 0)",
          "content_same": false
        },
        {
          "line": 3784,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(db_name)",
          "old_line_content": "    std::string q_name(name);",
          "new_line_content": "                                   strlen(db_name)},",
          "content_same": false
        },
        {
          "line": 5833,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->priv_host_name()",
          "old_line_content": "  Acl_cache_lock_guard acl_cache_lock(thd, Acl_cache_lock_mode::READ_MODE);",
          "new_line_content": "  const char *curr_host= thd->security_context()->priv_host_name();",
          "content_same": false
        },
        {
          "line": 3788,
          "old_api": null,
          "new_api": "find",
          "old_text": null,
          "new_text": "agg.columns.find(q_name)",
          "old_line_content": "      if(!(~(it->second) & want_privilege))",
          "new_line_content": "    Column_map::iterator it= agg.columns.find(q_name);",
          "content_same": false
        },
        {
          "line": 3789,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "agg.columns.end()",
          "old_line_content": "      {",
          "new_line_content": "    if (it != agg.columns.end())",
          "content_same": false
        },
        {
          "line": 5837,
          "old_api": null,
          "new_api": "lock",
          "old_text": null,
          "new_text": "acl_cache_lock.lock()",
          "old_line_content": "  if (column_priv_hash == nullptr)",
          "new_line_content": "  if (!acl_cache_lock.lock())",
          "content_same": false
        },
        {
          "line": 3793,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"info\",(\"Sufficient column privileges found for %s.%s.%s\",\n                           db_name, table_name, name))",
          "old_line_content": "      }",
          "new_line_content": "        DBUG_PRINT(\"info\",(\"Sufficient column privileges found for %s.%s.%s\",",
          "content_same": false
        },
        {
          "line": 5841,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(error)",
          "old_line_content": "  {",
          "new_line_content": "    DBUG_RETURN(error);",
          "content_same": false
        },
        {
          "line": 3795,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(false)",
          "old_line_content": "    else",
          "new_line_content": "        DBUG_RETURN(false);",
          "content_same": false
        },
        {
          "line": 3800,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"info\",(\"No column privileges found for %s.%s.%s\",\n                           db_name, table_name, name))",
          "old_line_content": "  }",
          "new_line_content": "       DBUG_PRINT(\"info\",(\"No column privileges found for %s.%s.%s\",",
          "content_same": false
        },
        {
          "line": 5849,
          "old_api": null,
          "new_api": "get_host",
          "old_text": null,
          "new_text": "grant_table->host.get_host()",
          "old_line_content": "    if (no_global_access &&",
          "new_line_content": "    if (!(host= grant_table->host.get_host()))",
          "content_same": false
        },
        {
          "line": 5853,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->priv_user()",
          "old_line_content": "",
          "new_line_content": "        (strcmp(thd->security_context()->priv_user().str, user) ||",
          "content_same": false
        },
        {
          "line": 5854,
          "old_api": null,
          "new_api": "my_strcasecmp",
          "old_text": null,
          "new_text": "my_strcasecmp(system_charset_info, curr_host, host)",
          "old_line_content": "    ulong table_access= grant_table->privs;",
          "new_line_content": "         my_strcasecmp(system_charset_info, curr_host, host)))",
          "content_same": false
        },
        {
          "line": 3809,
          "old_api": null,
          "new_api": "ip",
          "old_text": null,
          "new_text": "sctx->ip()",
          "old_line_content": "      grant->version= grant_version;              /* purecov: inspected */",
          "new_line_content": "        table_hash_search(sctx->host().str, sctx->ip().str,",
          "content_same": false
        },
        {
          "line": 3810,
          "old_api": null,
          "new_api": "priv_user",
          "old_text": null,
          "new_text": "sctx->priv_user()",
          "old_line_content": "    }",
          "new_line_content": "                          db_name, sctx->priv_user().str,",
          "content_same": false
        },
        {
          "line": 3820,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(false)",
          "old_line_content": "",
          "new_line_content": "      DBUG_RETURN(false);",
          "content_same": false
        },
        {
          "line": 5873,
          "old_api": null,
          "new_api": "update_schema_privilege",
          "old_text": null,
          "new_text": "update_schema_privilege(thd, table, buff, grant_table->db,\n                                    grant_table->tname, 0, 0,\n                                    STRING_WITH_LEN(\"USAGE\"), is_grantable)",
          "old_line_content": "        {",
          "new_line_content": "        if (update_schema_privilege(thd, table, buff, grant_table->db,",
          "content_same": false
        },
        {
          "line": 5875,
          "old_api": null,
          "new_api": "STRING_WITH_LEN",
          "old_text": null,
          "new_text": "STRING_WITH_LEN(\"USAGE\")",
          "old_line_content": "          goto err;",
          "new_line_content": "                                    STRING_WITH_LEN(\"USAGE\"), is_grantable))",
          "content_same": false
        },
        {
          "line": 3829,
          "old_api": null,
          "new_api": "priv_user",
          "old_text": null,
          "new_text": "sctx->priv_user()",
          "old_line_content": "           table_name);",
          "new_line_content": "           sctx->priv_user().str,",
          "content_same": false
        },
        {
          "line": 3833,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(TRUE)",
          "old_line_content": "",
          "new_line_content": "  DBUG_RETURN(TRUE);",
          "content_same": false
        },
        {
          "line": 5889,
          "old_api": null,
          "new_api": "update_schema_privilege",
          "old_text": null,
          "new_text": "update_schema_privilege(thd, table, buff, grant_table->db,\n                                        grant_table->tname, 0, 0,\n                                        command_array[cnt],\n                                        command_lengths[cnt], is_grantable)",
          "old_line_content": "                                        command_lengths[cnt], is_grantable))",
          "new_line_content": "            if (update_schema_privilege(thd, table, buff, grant_table->db,",
          "content_same": false
        },
        {
          "line": 5904,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(error)",
          "old_line_content": "",
          "new_line_content": "  DBUG_RETURN(error);",
          "content_same": false
        },
        {
          "line": 3865,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"check_column_grant_in_table_ref\")",
          "old_line_content": "  const char *table_name;",
          "new_line_content": "  DBUG_ENTER(\"check_column_grant_in_table_ref\");",
          "content_same": false
        },
        {
          "line": 5915,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->priv_host_name()",
          "old_line_content": "  Acl_cache_lock_guard acl_cache_lock(thd, Acl_cache_lock_mode::READ_MODE);",
          "new_line_content": "  const char *curr_host= thd->security_context()->priv_host_name();",
          "content_same": false
        },
        {
          "line": 3870,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()",
          "old_line_content": "",
          "new_line_content": "                          table_ref->security_ctx : thd->security_context();",
          "content_same": false
        },
        {
          "line": 5919,
          "old_api": null,
          "new_api": "lock",
          "old_text": null,
          "new_text": "acl_cache_lock.lock()",
          "old_line_content": "  if (column_priv_hash == nullptr)",
          "new_line_content": "  if (!acl_cache_lock.lock())",
          "content_same": false
        },
        {
          "line": 3874,
          "old_api": null,
          "new_api": "is_derived",
          "old_text": null,
          "new_text": "table_ref->is_derived()",
          "old_line_content": "    // Tmp table,table function or derived table: no need to evaluate privileges",
          "new_line_content": "  if (is_temporary_table(table_ref) || table_ref->is_derived() ||",
          "content_same": false
        },
        {
          "line": 5923,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(error)",
          "old_line_content": "  {",
          "new_line_content": "    DBUG_RETURN(error);",
          "content_same": false
        },
        {
          "line": 3878,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(false)",
          "old_line_content": "  {",
          "new_line_content": "    DBUG_RETURN(false);",
          "content_same": false
        },
        {
          "line": 3880,
          "old_api": null,
          "new_api": "is_view",
          "old_text": null,
          "new_text": "table_ref->is_view()",
          "old_line_content": "    ulong view_privs;",
          "new_line_content": "  else if (table_ref->is_view() || table_ref->field_translation)",
          "content_same": false
        },
        {
          "line": 5931,
          "old_api": null,
          "new_api": "get_host",
          "old_text": null,
          "new_text": "grant_table->host.get_host()",
          "old_line_content": "    if (no_global_access &&",
          "new_line_content": "    if (!(host= grant_table->host.get_host()))",
          "content_same": false
        },
        {
          "line": 5935,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->priv_user()",
          "old_line_content": "",
          "new_line_content": "        (strcmp(thd->security_context()->priv_user().str, user) ||",
          "content_same": false
        },
        {
          "line": 5936,
          "old_api": null,
          "new_api": "my_strcasecmp",
          "old_text": null,
          "new_text": "my_strcasecmp(system_charset_info, curr_host, host)",
          "old_line_content": "    ulong table_access= grant_table->cols;",
          "new_line_content": "         my_strcasecmp(system_charset_info, curr_host, host)))",
          "content_same": false
        },
        {
          "line": 3892,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(db_name)",
          "old_line_content": "                           db_name, table_name, view_privs));",
          "new_line_content": "        view_privs= sctx->table_acl({db_name, strlen(db_name)},",
          "content_same": false
        },
        {
          "line": 3893,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(table_name)",
          "old_line_content": "      }",
          "new_line_content": "                                    {table_name, strlen(table_name)});",
          "content_same": false
        },
        {
          "line": 3894,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"info\",(\"Found role privileges for %s.%s : %lu\",\n                           db_name, table_name, view_privs))",
          "old_line_content": "      else",
          "new_line_content": "        DBUG_PRINT(\"info\",(\"Found role privileges for %s.%s : %lu\",",
          "content_same": false
        },
        {
          "line": 5946,
          "old_api": null,
          "new_api": "strxmov",
          "old_text": null,
          "new_text": "strxmov(buff, \"'\", user, \"'@'\", host, \"'\", NullS)",
          "old_line_content": "      else",
          "new_line_content": "      strxmov(buff, \"'\", user, \"'@'\", host, \"'\", NullS);",
          "content_same": false
        },
        {
          "line": 3903,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(0)",
          "old_line_content": "  }",
          "new_line_content": "      my_error(ER_VIEW_NO_EXPLAIN, MYF(0));",
          "content_same": false
        },
        {
          "line": 3904,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(true)",
          "old_line_content": "  else if (table_ref->nested_join)",
          "new_line_content": "      DBUG_RETURN(true);",
          "content_same": false
        },
        {
          "line": 3913,
          "old_api": null,
          "new_api": "check_column_grant_in_table_ref",
          "old_text": null,
          "new_text": "check_column_grant_in_table_ref(thd, table, name, length,\n                                              want_privilege)",
          "old_line_content": "  }",
          "new_line_content": "      error|= check_column_grant_in_table_ref(thd, table, name, length,",
          "content_same": false
        },
        {
          "line": 3915,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(error)",
          "old_line_content": "  {",
          "new_line_content": "    DBUG_RETURN(error);",
          "content_same": false
        },
        {
          "line": 5964,
          "old_api": null,
          "new_api": "data",
          "old_text": null,
          "new_text": "grant_column->column.data()",
          "old_line_content": "                                            command_lengths[cnt], is_grantable))",
          "new_line_content": "                                            grant_column->column.data(),",
          "content_same": false
        },
        {
          "line": 5965,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "grant_column->column.size()",
          "old_line_content": "                {",
          "new_line_content": "                                            grant_column->column.size(),",
          "content_same": false
        },
        {
          "line": 3923,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(db_name, table_ref->table->s->db.str)",
          "old_line_content": "",
          "new_line_content": "    DBUG_ASSERT(strcmp(db_name, table_ref->table->s->db.str) == 0 &&",
          "content_same": false
        },
        {
          "line": 3929,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(true)",
          "old_line_content": "",
          "new_line_content": "    DBUG_RETURN(true);",
          "content_same": false
        },
        {
          "line": 3930,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(false)",
          "old_line_content": "",
          "new_line_content": "  DBUG_RETURN(false);",
          "content_same": false
        },
        {
          "line": 5981,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(error)",
          "old_line_content": "",
          "new_line_content": "  DBUG_RETURN(error);",
          "content_same": false
        },
        {
          "line": 5990,
          "old_api": null,
          "new_api": "check_access",
          "old_text": null,
          "new_text": "check_access(thd, UPDATE_ACL, \"mysql\", NULL, NULL, 1, 1)",
          "old_line_content": "",
          "new_line_content": "  return (!check_access(thd, UPDATE_ACL, \"mysql\", NULL, NULL, 1, 1) ||",
          "content_same": false
        },
        {
          "line": 5991,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->check_access(CREATE_USER_ACL, false)",
          "old_line_content": "",
          "new_line_content": "          thd->security_context()->check_access(CREATE_USER_ACL, false));",
          "content_same": false
        },
        {
          "line": 3952,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()",
          "old_line_content": "",
          "new_line_content": "  Security_context *sctx= thd->security_context();",
          "content_same": false
        },
        {
          "line": 3965,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->get_active_roles()->size()",
          "old_line_content": "  Acl_cache_lock_guard acl_cache_lock(thd, Acl_cache_lock_mode::READ_MODE);",
          "new_line_content": "  bool has_roles= thd->security_context()->get_active_roles()->size() > 0;",
          "content_same": false
        },
        {
          "line": 6014,
          "old_api": null,
          "new_api": "check_global_access",
          "old_text": null,
          "new_text": "check_global_access(thd, SHOW_DB_ACL)",
          "old_line_content": "    {",
          "new_line_content": "        check_global_access(thd, SHOW_DB_ACL);",
          "content_same": false
        },
        {
          "line": 6019,
          "old_api": null,
          "new_api": "DBUG_ASSERT",
          "old_text": null,
          "new_text": "DBUG_ASSERT(db != NULL)",
          "old_line_content": "        even with a GRANT ALL to *.*,",
          "new_line_content": "      DBUG_ASSERT(db != NULL);",
          "content_same": false
        },
        {
          "line": 3972,
          "old_api": null,
          "new_api": "next",
          "old_text": null,
          "new_text": "fields->next()",
          "old_line_content": "",
          "new_line_content": "  for (; !fields->end_of_fields(); fields->next())",
          "content_same": false
        },
        {
          "line": 3974,
          "old_api": null,
          "new_api": "name",
          "old_text": null,
          "new_text": "fields->name()",
          "old_line_content": "    {",
          "new_line_content": "    const char *field_name= fields->name();",
          "content_same": false
        },
        {
          "line": 3978,
          "old_api": null,
          "new_api": "get_table_name",
          "old_text": null,
          "new_text": "fields->get_table_name()",
          "old_line_content": "      {",
          "new_line_content": "      table_name= fields->get_table_name();",
          "content_same": false
        },
        {
          "line": 3982,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(db_name)",
          "old_line_content": "                                                             str_table_name);",
          "new_line_content": "        LEX_CSTRING str_db_name= { db_name, strlen(db_name) };",
          "content_same": false
        },
        {
          "line": 3983,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(table_name)",
          "old_line_content": "        /* Get cached GRANT_INFO */",
          "new_line_content": "        LEX_CSTRING str_table_name= { table_name, strlen(table_name) };",
          "content_same": false
        },
        {
          "line": 3987,
          "old_api": null,
          "new_api": "grant",
          "old_text": null,
          "new_text": "fields->grant()",
          "old_line_content": "        /* Reduce remaining privilege requirements */",
          "new_line_content": "        grant= fields->grant();",
          "content_same": false
        },
        {
          "line": 6037,
          "old_api": null,
          "new_api": "is_infoschema_db",
          "old_text": null,
          "new_text": "is_infoschema_db(db)",
          "old_line_content": "        return TRUE;",
          "new_line_content": "      if (! is_infoschema_db(db) &&",
          "content_same": false
        },
        {
          "line": 6038,
          "old_api": null,
          "new_api": "is_perfschema_db",
          "old_text": null,
          "new_text": "is_perfschema_db(db)",
          "old_line_content": "    }",
          "new_line_content": "          ! is_perfschema_db(db) &&",
          "content_same": false
        },
        {
          "line": 6039,
          "old_api": null,
          "new_api": "check_access",
          "old_text": null,
          "new_text": "check_access(thd, EVENT_ACL, db, NULL, NULL, 0, 0)",
          "old_line_content": "    // Fall through",
          "new_line_content": "          check_access(thd, EVENT_ACL, db, NULL, NULL, 0, 0))",
          "content_same": false
        },
        {
          "line": 3995,
          "old_api": null,
          "new_api": "grant",
          "old_text": null,
          "new_text": "fields->grant()",
          "old_line_content": "        if (want_access)",
          "new_line_content": "        grant= fields->grant();",
          "content_same": false
        },
        {
          "line": 6051,
          "old_api": null,
          "new_api": "check_access",
          "old_text": null,
          "new_text": "check_access(thd, SELECT_ACL, dst_db_name,\n                       &thd->col_access, NULL, FALSE, FALSE)",
          "old_line_content": "",
          "new_line_content": "      if (check_access(thd, SELECT_ACL, dst_db_name,",
          "content_same": false
        },
        {
          "line": 4004,
          "old_api": null,
          "new_api": "ip",
          "old_text": null,
          "new_text": "sctx->ip()",
          "old_line_content": "            grant->version= grant_version;        /* purecov: inspected */",
          "new_line_content": "              table_hash_search(sctx->host().str, sctx->ip().str,",
          "content_same": false
        },
        {
          "line": 4005,
          "old_api": null,
          "new_api": "priv_user",
          "old_text": null,
          "new_text": "sctx->priv_user()",
          "old_line_content": "          }",
          "new_line_content": "                                db_name, sctx->priv_user().str,",
          "content_same": false
        },
        {
          "line": 6057,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(0)",
          "old_line_content": "                 dst_db_name);",
          "new_line_content": "        my_error(ER_DBACCESS_DENIED_ERROR, MYF(0),",
          "content_same": false
        },
        {
          "line": 6058,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->priv_user()",
          "old_line_content": "        return TRUE;",
          "new_line_content": "                 thd->security_context()->priv_user().str,",
          "content_same": false
        },
        {
          "line": 4011,
          "old_api": null,
          "new_api": "DBUG_ASSERT (grant_table)",
          "old_text": null,
          "new_text": "DBUG_ASSERT (grant_table)",
          "old_line_content": "    }",
          "new_line_content": "          DBUG_ASSERT (grant_table);",
          "content_same": false
        },
        {
          "line": 6059,
          "old_api": null,
          "new_api": "security_context",
          "old_text": null,
          "new_text": "thd->security_context()->priv_host()",
          "old_line_content": "      }",
          "new_line_content": "                 thd->security_context()->priv_host().str,",
          "content_same": false
        },
        {
          "line": 6071,
          "old_api": null,
          "new_api": "DBUG_ASSERT",
          "old_text": null,
          "new_text": "DBUG_ASSERT(dst_table)",
          "old_line_content": "      */",
          "new_line_content": "      DBUG_ASSERT(dst_table);",
          "content_same": false
        },
        {
          "line": 4026,
          "old_api": null,
          "new_api": "find",
          "old_text": null,
          "new_text": "aggr.columns.find(q_name)",
          "old_line_content": "            if(!(~(it->second) & want_access))",
          "new_line_content": "            aggr.columns.find(q_name);",
          "content_same": false
        },
        {
          "line": 4027,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "aggr.columns.end()",
          "old_line_content": "            {",
          "new_line_content": "          if (it != aggr.columns.end())",
          "content_same": false
        },
        {
          "line": 6078,
          "old_api": null,
          "new_api": "check_access",
          "old_text": null,
          "new_text": "check_access(thd, SELECT_ACL, dst_table->db,\n                       &dst_table->grant.privilege,\n                       &dst_table->grant.m_internal,\n                       FALSE, FALSE)",
          "old_line_content": "                       FALSE, FALSE))",
          "new_line_content": "      if (check_access(thd, SELECT_ACL, dst_table->db,",
          "content_same": false
        },
        {
          "line": 4031,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"info\",\n                         (\"Sufficient column privileges found for %s.%s.%s\",\n                          db_name, table_name, field_name))",
          "old_line_content": "              goto err;",
          "new_line_content": "              DBUG_PRINT(\"info\",",
          "content_same": false
        },
        {
          "line": 4039,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"info\",(\"No column privileges found for %s.%s.%s\",\n                                 db_name, table_name, field_name))",
          "old_line_content": "          }",
          "new_line_content": "             DBUG_PRINT(\"info\",(\"No column privileges found for %s.%s.%s\",",
          "content_same": false
        },
        {
          "line": 6091,
          "old_api": null,
          "new_api": "close_thread_tables",
          "old_text": null,
          "new_text": "close_thread_tables(thd)",
          "old_line_content": "      /* Access granted */",
          "new_line_content": "      close_thread_tables(thd);",
          "content_same": false
        },
        {
          "line": 4049,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(field_name)",
          "old_line_content": "        if (!grant_column || (~grant_column->rights & want_access))",
          "new_line_content": "          column_hash_search(grant_table, field_name, strlen(field_name));",
          "content_same": false
        },
        {
          "line": 4062,
          "old_api": null,
          "new_api": "get_privilege_desc",
          "old_text": null,
          "new_text": "get_privilege_desc(command, sizeof(command), want_access)",
          "old_line_content": "    privilege to see all columns.",
          "new_line_content": "  get_privilege_desc(command, sizeof(command), want_access);",
          "content_same": false
        },
        {
          "line": 4068,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(0)",
          "old_line_content": "  else",
          "new_line_content": "    my_error(ER_TABLEACCESS_DENIED_ERROR, MYF(0),",
          "content_same": false
        },
        {
          "line": 4070,
          "old_api": null,
          "new_api": "host_or_ip",
          "old_text": null,
          "new_text": "sctx->host_or_ip()",
          "old_line_content": "             command,",
          "new_line_content": "             sctx->host_or_ip().str, table_name);",
          "content_same": false
        },
        {
          "line": 4074,
          "old_api": null,
          "new_api": "priv_user",
          "old_text": null,
          "new_text": "sctx->priv_user()",
          "old_line_content": "             table_name);",
          "new_line_content": "             sctx->priv_user().str,",
          "content_same": false
        },
        {
          "line": 4075,
          "old_api": null,
          "new_api": "host_or_ip",
          "old_text": null,
          "new_text": "sctx->host_or_ip()",
          "old_line_content": "  return true;",
          "new_line_content": "             sctx->host_or_ip().str,",
          "content_same": false
        },
        {
          "line": 4076,
          "old_api": null,
          "new_api": "name",
          "old_text": null,
          "new_text": "fields->name()",
          "old_line_content": "}",
          "new_line_content": "             fields->name(),",
          "content_same": false
        },
        {
          "line": 6128,
          "old_api": null,
          "new_api": "get_privilege_desc",
          "old_text": null,
          "new_text": "get_privilege_desc(command, sizeof(command), want_access)",
          "old_line_content": "}",
          "new_line_content": "  get_privilege_desc(command, sizeof(command), want_access);",
          "content_same": false
        },
        {
          "line": 6129,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(0)",
          "old_line_content": "",
          "new_line_content": "  my_error(ER_SPECIFIC_ACCESS_DENIED_ERROR, MYF(0), command);",
          "content_same": false
        },
        {
          "line": 6130,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(1)",
          "old_line_content": "",
          "new_line_content": "  DBUG_RETURN(1);",
          "content_same": false
        },
        {
          "line": 4087,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"check_grant_db_routine\")",
          "old_line_content": "",
          "new_line_content": "  DBUG_ENTER(\"check_grant_db_routine\");",
          "content_same": false
        },
        {
          "line": 4089,
          "old_api": null,
          "new_api": "assert_acl_cache_read_lock",
          "old_text": null,
          "new_text": "assert_acl_cache_read_lock(thd)",
          "old_line_content": "  {",
          "new_line_content": "  DBUG_ASSERT(assert_acl_cache_read_lock(thd));",
          "content_same": false
        },
        {
          "line": 4093,
          "old_api": null,
          "new_api": "DBUG_PRINT",
          "old_text": null,
          "new_text": "DBUG_PRINT(\"info\",(\"Using roles Acl_map to detect schema level privileges\"))",
          "old_line_content": "  }",
          "new_line_content": "    DBUG_PRINT(\"info\",(\"Using roles Acl_map to detect schema level privileges\"));",
          "content_same": false
        },
        {
          "line": 4094,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(db)",
          "old_line_content": "  else",
          "new_line_content": "    ulong acl= sctx->db_acl({db, strlen(db)});",
          "content_same": false
        },
        {
          "line": 4095,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(acl == 0)",
          "old_line_content": "  {",
          "new_line_content": "    DBUG_RETURN(acl == 0);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 4098,
          "old_api": "get",
          "new_api": null,
          "old_text": "key_and_value.second.get()",
          "new_text": null,
          "old_line_content": "      GRANT_NAME *item= key_and_value.second.get();",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 4100,
          "old_api": "priv_user",
          "new_api": null,
          "old_text": "sctx->priv_user()",
          "new_text": null,
          "old_line_content": "      if (strcmp(item->user, sctx->priv_user().str) == 0 &&",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 6149,
          "old_api": "DBUG_ASSERT",
          "new_api": null,
          "old_text": "DBUG_ASSERT(alter_info != nullptr)",
          "new_text": null,
          "old_line_content": "  DBUG_ASSERT(alter_info != nullptr);",
          "new_line_content": "                                  HA_CREATE_INFO *create_info,",
          "content_same": false
        },
        {
          "line": 4102,
          "old_api": "host",
          "new_api": null,
          "old_text": "sctx->host()",
          "new_text": null,
          "old_line_content": "          item->host.compare_hostname(sctx->host().str,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4110,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(TRUE)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(TRUE);",
          "new_line_content": "    } // end for",
          "content_same": false
        },
        {
          "line": 4115,
          "old_api": "get_active_roles",
          "new_api": null,
          "old_text": "sctx->get_active_roles()->size()",
          "new_text": null,
          "old_line_content": "  if (sctx->get_active_roles()->size() > 0)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6163,
          "old_api": "down_cast<const Foreign_key_spec*>(key)",
          "new_api": null,
          "old_text": "down_cast<const Foreign_key_spec*>(key)",
          "new_text": null,
          "old_line_content": "      const Foreign_key_spec *fk_key= down_cast<const Foreign_key_spec*>(key);",
          "new_line_content": "    if (key->type == KEYTYPE_FOREIGN)",
          "content_same": false
        },
        {
          "line": 4117,
          "old_api": "any_table_acl",
          "new_api": null,
          "old_text": "sctx->any_table_acl(str)",
          "new_text": null,
          "old_line_content": "    return sctx->any_table_acl(str);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 6165,
          "old_api": "init_one_table",
          "new_api": null,
          "old_text": "parent_table.init_one_table(fk_key->ref_db.str, fk_key->ref_db.length,\n                    fk_key->ref_table.str, fk_key->ref_table.length,\n                    fk_key->ref_table.str, TL_IGNORE)",
          "new_text": null,
          "old_line_content": "      parent_table.init_one_table(fk_key->ref_db.str, fk_key->ref_db.length,",
          "new_line_content": "      TABLE_LIST parent_table;",
          "content_same": false
        },
        {
          "line": 4125,
          "old_api": "get_active_roles",
          "new_api": null,
          "old_text": "sctx->get_active_roles()->size()",
          "new_text": null,
          "old_line_content": "  if (sctx->get_active_roles()->size() > 0)",
          "new_line_content": "bool has_any_routine_acl(Security_context *sctx,",
          "content_same": false
        },
        {
          "line": 4127,
          "old_api": "any_sp_acl",
          "new_api": null,
          "old_text": "sctx->any_sp_acl(db)",
          "new_text": null,
          "old_line_content": "    return sctx->any_sp_acl(db);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 6176,
          "old_api": "check_access",
          "new_api": null,
          "old_text": "check_access(thd, REFERENCES_ACL, parent_table.db,\n                        &parent_table.grant.privilege,\n                        &parent_table.grant.m_internal, false, true)",
          "new_text": null,
          "old_line_content": "      if ((check_access(thd, REFERENCES_ACL, parent_table.db,",
          "new_line_content": "       enough so checking whether user has REFERENCES_ACL privilege",
          "content_same": false
        },
        {
          "line": 6183,
          "old_api": "my_snprintf",
          "new_api": null,
          "old_text": "my_snprintf(fqtn_buff, sizeof(fqtn_buff), \"%s.%s\",\n                    fk_key->ref_db.str, fk_key->ref_table.str)",
          "new_text": null,
          "old_line_content": "        my_snprintf(fqtn_buff, sizeof(fqtn_buff), \"%s.%s\",",
          "new_line_content": "          (parent_table.grant.privilege & REFERENCES_ACL) == 0)",
          "content_same": false
        },
        {
          "line": 6185,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(0)",
          "new_text": null,
          "old_line_content": "        my_error(ER_TABLEACCESS_DENIED_ERROR, MYF(0),",
          "new_line_content": "        char fqtn_buff[NAME_LEN + 1 + NAME_LEN + 1];",
          "content_same": false
        },
        {
          "line": 6187,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->priv_user()",
          "new_text": null,
          "old_line_content": "                 thd->security_context()->priv_user().str,",
          "new_line_content": "                    fk_key->ref_db.str, fk_key->ref_table.str);",
          "content_same": false
        },
        {
          "line": 4142,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"check_table_and_sp_access\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"check_table_and_sp_access\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4143,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()",
          "new_text": null,
          "old_line_content": "  Security_context *sctx= thd->security_context();",
          "new_line_content": "bool check_grant_db(THD *thd,const char *db)",
          "content_same": false
        },
        {
          "line": 4144,
          "old_api": "priv_user",
          "new_api": null,
          "old_text": "sctx->priv_user()",
          "new_text": null,
          "old_line_content": "  LEX_CSTRING priv_user= sctx->priv_user();",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4149,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(db)",
          "new_text": null,
          "old_line_content": "    size_t db_len= strlen(db);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4154,
          "old_api": "has_any_routine_acl",
          "new_api": null,
          "old_text": "has_any_routine_acl(sctx, {db, db_len})",
          "new_text": null,
          "old_line_content": "                !has_any_routine_acl(sctx, {db, db_len}));",
          "new_line_content": "    if (db_access != 0)",
          "content_same": false
        },
        {
          "line": 4158,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "key.push_back('\\0')",
          "new_text": null,
          "old_line_content": "  key.push_back('\\0');",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4159,
          "old_api": "append",
          "new_api": null,
          "old_text": "key.append(db)",
          "new_text": null,
          "old_line_content": "  key.append(db);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6212,
          "old_api": "append_identifier",
          "new_api": null,
          "old_text": "append_identifier(&key, user.str, user.length)",
          "new_text": null,
          "old_line_content": "  append_identifier(&key, user.str, user.length);",
          "new_line_content": "                           LEX_CSTRING role, LEX_CSTRING role_host)",
          "content_same": false
        },
        {
          "line": 6213,
          "old_api": "append",
          "new_api": null,
          "old_text": "key.append('@')",
          "new_text": null,
          "old_line_content": "  key.append('@');",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 6214,
          "old_api": "append_identifier",
          "new_api": null,
          "old_text": "append_identifier(&key, host.str, host.length)",
          "new_text": null,
          "old_line_content": "  append_identifier(&key, host.str, host.length);",
          "new_line_content": "  String key;",
          "content_same": false
        },
        {
          "line": 4168,
          "old_api": "get",
          "new_api": null,
          "old_text": "key_and_value.second.get()",
          "new_text": null,
          "old_line_content": "    GRANT_TABLE *grant_table= key_and_value.second.get();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4169,
          "old_api": "size",
          "new_api": null,
          "old_text": "key.size()",
          "new_text": null,
          "old_line_content": "    if (grant_table->hash_key.compare(0, key.size(), key) == 0 &&",
          "new_line_content": "  for (const auto &key_and_value : *column_priv_hash)",
          "content_same": false
        },
        {
          "line": 4170,
          "old_api": "host",
          "new_api": null,
          "old_text": "sctx->host()",
          "new_text": null,
          "old_line_content": "        grant_table->host.compare_hostname(sctx->host().str,",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 4181,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"info\",(\"No table level acl in column_priv_hash; checking \"\n                       \"for schema level acls\"))",
          "new_text": null,
          "old_line_content": "    DBUG_PRINT(\"info\",(\"No table level acl in column_priv_hash; checking \"",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6229,
          "old_api": "get_mandatory_roles",
          "new_api": null,
          "old_text": "get_mandatory_roles(&mandatory_roles)",
          "new_text": null,
          "old_line_content": "  get_mandatory_roles(&mandatory_roles);",
          "new_line_content": "     Check if a mandatory role is granted instead.",
          "content_same": false
        },
        {
          "line": 4183,
          "old_api": "get",
          "new_api": null,
          "old_text": "proc_priv_hash.get()",
          "new_text": null,
          "old_line_content": "    error= check_grant_db_routine(thd, db, proc_priv_hash.get()) &&",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 6257,
          "old_api": "assert_acl_cache_read_lock",
          "new_api": null,
          "old_text": "assert_acl_cache_read_lock(current_thd)",
          "new_text": null,
          "old_line_content": "  DBUG_ASSERT(assert_acl_cache_read_lock(current_thd));",
          "new_line_content": "                          LEX_CSTRING role_host,",
          "content_same": false
        },
        {
          "line": 6259,
          "old_api": "boost::out_edges(v, *g_granted_roles)",
          "new_api": null,
          "old_text": "boost::out_edges(v, *g_granted_roles)",
          "new_text": null,
          "old_line_content": "  boost::tie(ei, ei_end)= boost::out_edges(v, *g_granted_roles);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4212,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()",
          "new_text": null,
          "old_line_content": "  Security_context *sctx= thd->security_context();",
          "new_line_content": "                         TABLE_LIST *procs, bool is_proc, bool no_errors)",
          "content_same": false
        },
        {
          "line": 4213,
          "old_api": "priv_user",
          "new_api": null,
          "old_text": "sctx->priv_user()",
          "new_text": null,
          "old_line_content": "  char *user= (char *) sctx->priv_user().str;",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4214,
          "old_api": "priv_host",
          "new_api": null,
          "old_text": "sctx->priv_host()",
          "new_text": null,
          "old_line_content": "  char *host= (char *) sctx->priv_host().str;",
          "new_line_content": "  TABLE_LIST *table;",
          "content_same": false
        },
        {
          "line": 6264,
          "old_api": "boost::vertex_acl_user_t()",
          "new_api": null,
          "old_text": "boost::vertex_acl_user_t()",
          "new_text": null,
          "old_line_content": "    ACL_USER acl_user= get(boost::vertex_acl_user_t(),",
          "new_line_content": "  for(; ei != ei_end; ++ei)",
          "content_same": false
        },
        {
          "line": 6266,
          "old_api": "boost::target(*ei,\n                                                           *g_granted_roles)",
          "new_api": null,
          "old_text": "boost::target(*ei,\n                                                           *g_granted_roles)",
          "new_text": null,
          "old_line_content": "                                             boost::target(*ei,",
          "new_line_content": "    /* find current user in role graph */",
          "content_same": false
        },
        {
          "line": 4220,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(false)",
          "new_text": null,
          "old_line_content": "    DBUG_RETURN(false);                             // ok",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6270,
          "old_api": "get_host_len",
          "new_api": null,
          "old_text": "acl_user.host.get_host_len()",
          "new_text": null,
          "old_line_content": "        (role_host.length == acl_user.host.get_host_len()) &&",
          "new_line_content": "                                                           *g_granted_roles)",
          "content_same": false
        },
        {
          "line": 6271,
          "old_api": "strncmp",
          "new_api": null,
          "old_text": "strncmp(role.str, acl_user.user, role.length)",
          "new_text": null,
          "old_line_content": "        !strncmp(role.str, acl_user.user, role.length) &&",
          "new_line_content": "                                            ];",
          "content_same": false
        },
        {
          "line": 4224,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(true)",
          "new_text": null,
          "old_line_content": "    DBUG_RETURN(true);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6276,
          "old_api": "boost::target(*ei, *g_granted_roles)",
          "new_api": null,
          "old_text": "boost::target(*ei, *g_granted_roles)",
          "new_text": null,
          "old_line_content": "        *found_vertex = boost::target(*ei, *g_granted_roles);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 4233,
          "old_api": "procedure_acl",
          "new_api": null,
          "old_text": "sctx->procedure_acl({table->db, table->db_length},\n                                 {table->table_name,\n                                  table->table_name_length})",
          "new_text": null,
          "old_line_content": "        acl= sctx->procedure_acl({table->db, table->db_length},",
          "new_line_content": "      ulong acl;",
          "content_same": false
        },
        {
          "line": 6286,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"get_granted_roles\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"get_granted_roles\");",
          "new_line_content": "void get_granted_roles(Role_vertex_descriptor &v,",
          "content_same": false
        },
        {
          "line": 4239,
          "old_api": "function_acl",
          "new_api": null,
          "old_text": "sctx->function_acl({table->db, table->db_length},\n                                {table->table_name,\n                                 table->table_name_length})",
          "new_text": null,
          "old_line_content": "        acl= sctx->function_acl({table->db, table->db_length},",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 6287,
          "old_api": "assert_acl_cache_read_lock",
          "new_api": null,
          "old_text": "assert_acl_cache_read_lock(current_thd)",
          "new_text": null,
          "old_line_content": "  DBUG_ASSERT(assert_acl_cache_read_lock(current_thd));",
          "new_line_content": "                       std::function<void(const Role_id &, bool)> f)",
          "content_same": false
        },
        {
          "line": 4244,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"info\",(\"Checking Acl_map for proc acls in %s.%s; \"\n                         \"found %lu\", table->db, table->table_name,\n                         table->grant.privilege))",
          "new_text": null,
          "old_line_content": "      DBUG_PRINT(\"info\",(\"Checking Acl_map for proc acls in %s.%s; \"",
          "new_line_content": "                                 table->table_name_length});",
          "content_same": false
        },
        {
          "line": 6294,
          "old_api": "boost::vertex_acl_user_t()",
          "new_api": null,
          "old_text": "boost::vertex_acl_user_t()",
          "new_text": null,
          "old_line_content": "    ACL_USER acl_user = get(boost::vertex_acl_user_t(), *g_granted_roles)",
          "new_line_content": "  for (; ei != ei_end; ++ei)",
          "content_same": false
        },
        {
          "line": 6296,
          "old_api": "boost::target(*ei, *g_granted_roles)",
          "new_api": null,
          "old_text": "boost::target(*ei, *g_granted_roles)",
          "new_text": null,
          "old_line_content": "               boost::target(*ei, *g_granted_roles)",
          "new_line_content": "    /* find current user in role graph */",
          "content_same": false
        },
        {
          "line": 4251,
          "old_api": "ip",
          "new_api": null,
          "old_text": "sctx->ip()",
          "new_text": null,
          "old_line_content": "      if ((grant_proc= routine_hash_search(host, sctx->ip().str, table->db, user,",
          "new_line_content": "    else",
          "content_same": false
        },
        {
          "line": 6300,
          "old_api": "boost::edge_capacity_t()",
          "new_api": null,
          "old_text": "boost::edge_capacity_t()",
          "new_text": null,
          "old_line_content": "    edge_with_admin= boost::get(boost::edge_capacity_t(), *g_granted_roles);",
          "new_line_content": "             ];",
          "content_same": false
        },
        {
          "line": 4255,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"info\",(\"Checking for routine acls in %s; \"\n                           \"found %lu\", table->db, grant_proc->privs))",
          "new_text": null,
          "old_line_content": "        DBUG_PRINT(\"info\",(\"Checking for routine acls in %s; \"",
          "new_line_content": "                                           table->table_name, is_proc, 0)))",
          "content_same": false
        },
        {
          "line": 6304,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(acl_user.user)",
          "new_text": null,
          "old_line_content": "    tmp_user.length= strlen(acl_user.user);",
          "new_line_content": "    int with_admin_opt= edge_with_admin[*ei];",
          "content_same": false
        },
        {
          "line": 6305,
          "old_api": "get_host",
          "new_api": null,
          "old_text": "acl_user.host.get_host()",
          "new_text": null,
          "old_line_content": "    tmp_host.str= acl_user.host.get_host();",
          "new_line_content": "    LEX_CSTRING tmp_user, tmp_host;",
          "content_same": false
        },
        {
          "line": 6306,
          "old_api": "get_host_len",
          "new_api": null,
          "old_text": "acl_user.host.get_host_len()",
          "new_text": null,
          "old_line_content": "    tmp_host.length= acl_user.host.get_host_len();",
          "new_line_content": "    tmp_user.str= acl_user.user;",
          "content_same": false
        },
        {
          "line": 4265,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(false)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(false);",
          "new_line_content": "      goto err;",
          "content_same": false
        },
        {
          "line": 4273,
          "old_api": "strxmov",
          "new_api": null,
          "old_text": "strxmov(buff, table->db, \".\", table->table_name, NullS)",
          "new_text": null,
          "old_line_content": "      strxmov(buff, table->db, \".\", table->table_name, NullS);",
          "new_line_content": "    char buff[1024];",
          "content_same": false
        },
        {
          "line": 4280,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(0)",
          "new_text": null,
          "old_line_content": "    my_error(ER_PROCACCESS_DENIED_ERROR, MYF(0),",
          "new_line_content": "      command= \"alter routine\";",
          "content_same": false
        },
        {
          "line": 6328,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"get_granted_roles\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"get_granted_roles\");",
          "new_line_content": "void get_granted_roles(Role_vertex_descriptor &v,",
          "content_same": false
        },
        {
          "line": 6329,
          "old_api": "assert_acl_cache_read_lock",
          "new_api": null,
          "old_text": "assert_acl_cache_read_lock(current_thd)",
          "new_text": null,
          "old_line_content": "  DBUG_ASSERT(assert_acl_cache_read_lock(current_thd));",
          "new_line_content": "                       List_of_granted_roles *granted_roles)",
          "content_same": false
        },
        {
          "line": 6330,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "get_granted_roles(v, [&](const Role_id &rid, bool with_admin_opt)\n          {\n            granted_roles->push_back(std::make_pair(rid, with_admin_opt));\n          })",
          "new_text": null,
          "old_line_content": "  get_granted_roles(v, [&](const Role_id &rid, bool with_admin_opt)",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 6340,
          "old_api": "assert_acl_cache_read_lock",
          "new_api": null,
          "old_text": "assert_acl_cache_read_lock(current_thd)",
          "new_text": null,
          "old_line_content": "  DBUG_ASSERT(assert_acl_cache_read_lock(current_thd));",
          "new_line_content": "void activate_all_granted_and_mandatory_roles(const ACL_USER *acl_user,",
          "content_same": false
        },
        {
          "line": 6341,
          "old_api": "create_authid_str_from",
          "new_api": null,
          "old_text": "create_authid_str_from(acl_user)",
          "new_text": null,
          "old_line_content": "  std::string key= create_authid_str_from(acl_user);",
          "new_line_content": "                                              Security_context *sctx)",
          "content_same": false
        },
        {
          "line": 6342,
          "old_api": "find",
          "new_api": null,
          "old_text": "g_authid_to_vertex->find(key)",
          "new_text": null,
          "old_line_content": "  Role_index_map::iterator it= g_authid_to_vertex->find(key);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 6347,
          "old_api": "user",
          "new_api": null,
          "old_text": "rid.user().length()",
          "new_text": null,
          "old_line_content": "    LEX_CSTRING str_user= {rid.user().c_str(), rid.user().length()};",
          "new_line_content": "    return; // No user vertex founds",
          "content_same": false
        },
        {
          "line": 6349,
          "old_api": "activate_role",
          "new_api": null,
          "old_text": "sctx->activate_role(str_user, str_host, false)",
          "new_text": null,
          "old_line_content": "    sctx->activate_role(str_user, str_host, false);",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 4305,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"check_routine_level_acl\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"check_routine_level_acl\");",
          "new_line_content": "static bool check_routine_level_acl(THD *thd, const char *db,",
          "content_same": false
        },
        {
          "line": 6356,
          "old_api": "host",
          "new_api": null,
          "old_text": "rid.host().length()",
          "new_text": null,
          "old_line_content": "    LEX_CSTRING str_host= {rid.host().c_str(), rid.host().length()};",
          "new_line_content": "  for (auto &rid : mandatory_roles)",
          "content_same": false
        },
        {
          "line": 6357,
          "old_api": "activate_role",
          "new_api": null,
          "old_text": "sctx->activate_role(str_user, str_host, false)",
          "new_text": null,
          "old_line_content": "    sctx->activate_role(str_user, str_host, false);",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 4310,
          "old_api": "lock",
          "new_api": null,
          "old_text": "acl_cache_lock.lock(false)",
          "new_text": null,
          "old_line_content": "  if (!acl_cache_lock.lock(false))",
          "new_line_content": "  GRANT_NAME *grant_proc;",
          "content_same": false
        },
        {
          "line": 4314,
          "old_api": "ip",
          "new_api": null,
          "old_text": "sctx->ip()",
          "new_text": null,
          "old_line_content": "                                       sctx->ip().str, db,",
          "new_line_content": "    return no_routine_acl;",
          "content_same": false
        },
        {
          "line": 4315,
          "old_api": "priv_user",
          "new_api": null,
          "old_text": "sctx->priv_user()",
          "new_text": null,
          "old_line_content": "                                       sctx->priv_user().str,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6374,
          "old_api": "create_authid_str_from",
          "new_api": null,
          "old_text": "create_authid_str_from(user)",
          "new_text": null,
          "old_line_content": "  std::string str_user= create_authid_str_from(user);",
          "new_line_content": "                       List_of_granted_roles *granted_roles)",
          "content_same": false
        },
        {
          "line": 6375,
          "old_api": "find",
          "new_api": null,
          "old_text": "g_authid_to_vertex->find(str_user)",
          "new_text": null,
          "old_line_content": "  if ((it= g_authid_to_vertex->find(str_user)) !=",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 6376,
          "old_api": "end",
          "new_api": null,
          "old_text": "g_authid_to_vertex->end()",
          "new_text": null,
          "old_line_content": "      g_authid_to_vertex->end())",
          "new_line_content": "  Role_index_map::iterator it;",
          "content_same": false
        },
        {
          "line": 4329,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()",
          "new_text": null,
          "old_line_content": "  Security_context *sctx= thd->security_context();",
          "new_line_content": "ulong get_table_grant(THD *thd, TABLE_LIST *table)",
          "content_same": false
        },
        {
          "line": 4330,
          "old_api": "db",
          "new_api": null,
          "old_text": "thd->db()",
          "new_text": null,
          "old_line_content": "  const char *db = table->db ? table->db : thd->db().str;",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4334,
          "old_api": "lock",
          "new_api": null,
          "old_text": "acl_cache_lock.lock(false)",
          "new_text": null,
          "old_line_content": "  if (!acl_cache_lock.lock(false))",
          "new_line_content": "  GRANT_TABLE *grant_table;",
          "content_same": false
        },
        {
          "line": 4338,
          "old_api": "priv_user",
          "new_api": null,
          "old_text": "sctx->priv_user()",
          "new_text": null,
          "old_line_content": "                                 sctx->ip().str, db, sctx->priv_user().str,",
          "new_line_content": "    return (NO_ACCESS);",
          "content_same": false
        },
        {
          "line": 6395,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->get_active_roles()",
          "new_text": null,
          "old_line_content": "  for (auto &ref : *thd->security_context()->get_active_roles())",
          "new_line_content": "    Copying is crucial as the std::sort algorithms operates on pointers and",
          "content_same": false
        },
        {
          "line": 6397,
          "old_api": "Role_id",
          "new_api": null,
          "old_text": "Role_id(ref.first, ref.second)",
          "new_text": null,
          "old_line_content": "    roles->push_back(std::make_pair(Role_id(ref.first, ref.second),false));",
          "new_line_content": "  */",
          "content_same": false
        },
        {
          "line": 6414,
          "old_api": "get_active_roles",
          "new_api": null,
          "old_text": "get_active_roles(thd, &roles)",
          "new_text": null,
          "old_line_content": "  get_active_roles(thd, &roles);",
          "new_line_content": "String *func_current_role(THD *thd, String *str, String *active_role)",
          "content_same": false
        },
        {
          "line": 6415,
          "old_api": "size",
          "new_api": null,
          "old_text": "roles.size()",
          "new_text": null,
          "old_line_content": "  if (roles.size() == 0)",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4374,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()",
          "new_text": null,
          "old_line_content": "  Security_context *sctx= thd->security_context();",
          "new_line_content": "  GRANT_TABLE *grant_table;",
          "content_same": false
        },
        {
          "line": 6427,
          "old_api": "append",
          "new_api": null,
          "old_text": "active_role->append(',')",
          "new_text": null,
          "old_line_content": "      active_role->append(',');",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 6433,
          "old_api": "user",
          "new_api": null,
          "old_text": "rid.first.user().c_str()",
          "new_text": null,
          "old_line_content": "    append_identifier(thd, active_role, rid.first.user().c_str(),",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 6434,
          "old_api": "user",
          "new_api": null,
          "old_text": "rid.first.user().length()",
          "new_text": null,
          "old_line_content": "                      rid.first.user().length());",
          "new_line_content": "      first= false;",
          "content_same": false
        },
        {
          "line": 4387,
          "old_api": "get_active_roles",
          "new_api": null,
          "old_text": "sctx->get_active_roles()->size()",
          "new_text": null,
          "old_line_content": "  if (sctx->get_active_roles()->size() != 0 && !grant->grant_table)",
          "new_line_content": "    However, we might be using this routine to check table level privileges",
          "content_same": false
        },
        {
          "line": 6435,
          "old_api": "append",
          "new_api": null,
          "old_text": "active_role->append(\"@\")",
          "new_text": null,
          "old_line_content": "    active_role->append(\"@\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4391,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(db_name)",
          "new_text": null,
          "old_line_content": "      sctx->table_and_column_acls({(const char*)db_name, strlen(db_name)},",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 4393,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(table_name)",
          "new_text": null,
          "old_line_content": "                                   strlen(table_name)});",
          "new_line_content": "    Grant_table_aggregate aggr=",
          "content_same": false
        },
        {
          "line": 6441,
          "old_api": "copy",
          "new_api": null,
          "old_text": "str->copy(*active_role)",
          "new_text": null,
          "old_line_content": "    str->copy(*active_role);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4397,
          "old_api": "append",
          "new_api": null,
          "old_text": "q_name.append(field_name)",
          "new_text": null,
          "old_line_content": "    q_name.append(field_name);",
          "new_line_content": "    priv|= aggr.table_access;",
          "content_same": false
        },
        {
          "line": 4399,
          "old_api": "c_str",
          "new_api": null,
          "old_text": "q_name.c_str()",
          "new_text": null,
          "old_line_content": "      aggr.columns.find(std::string(q_name.c_str()));",
          "new_line_content": "    std::string q_name;",
          "content_same": false
        },
        {
          "line": 4412,
          "old_api": "ip",
          "new_api": null,
          "old_text": "sctx->ip()",
          "new_text": null,
          "old_line_content": "        table_hash_search(sctx->host().str, sctx->ip().str,",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 4413,
          "old_api": "priv_user",
          "new_api": null,
          "old_text": "sctx->priv_user()",
          "new_text": null,
          "old_line_content": "                          db_name, sctx->priv_user().str,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6460,
          "old_api": "equal_range",
          "new_api": null,
          "old_text": "g_default_roles->equal_range(user)",
          "new_text": null,
          "old_line_content": "  boost::tie(role_it, role_end)= g_default_roles->equal_range(user);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 6464,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "authlist->push_back(ref)",
          "new_text": null,
          "old_line_content": "    authlist->push_back(ref);",
          "new_line_content": "  for(;role_it != role_end; ++role_it)",
          "content_same": false
        },
        {
          "line": 4422,
          "old_api": "column_hash_search",
          "new_api": null,
          "old_text": "column_hash_search(grant_table, field_name,\n                                       strlen(field_name))",
          "new_text": null,
          "old_line_content": "      grant_column= column_hash_search(grant_table, field_name,",
          "new_line_content": "      priv= grant->privilege;",
          "content_same": false
        },
        {
          "line": 4423,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(field_name)",
          "new_text": null,
          "old_line_content": "                                       strlen(field_name));",
          "new_line_content": "    else",
          "content_same": false
        },
        {
          "line": 6486,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"clear_default_roles\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"clear_default_roles\");",
          "new_line_content": "                         const Auth_id_ref &user_auth_id,",
          "content_same": false
        },
        {
          "line": 4441,
          "old_api": "DBUG_ASSERT",
          "new_api": null,
          "old_text": "DBUG_ASSERT(max_length >= 30)",
          "new_text": null,
          "old_line_content": "  DBUG_ASSERT(max_length >= 30);                // For end ', ' removal",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 6495,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "default_roles->push_back(role_it->second)",
          "new_text": null,
          "old_line_content": "      default_roles->push_back(role_it->second);",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 4449,
          "old_api": "uint) (to-start)",
          "new_api": null,
          "old_text": "uint) (to-start)",
          "new_text": null,
          "old_line_content": "          command_lengths[pos] + (uint) (to-start) < max_length)",
          "new_line_content": "    for (pos=0 ; access ; pos++, access>>=1)",
          "content_same": false
        },
        {
          "line": 6497,
          "old_api": "create_authid_from",
          "new_api": null,
          "old_text": "create_authid_from(role_it->second)",
          "new_text": null,
          "old_line_content": "    Auth_id_ref role_auth_id= create_authid_from(role_it->second);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 4451,
          "old_api": "my_stpcpy",
          "new_api": null,
          "old_text": "my_stpcpy(to, command_array[pos])",
          "new_text": null,
          "old_line_content": "        to= my_stpcpy(to, command_array[pos]);",
          "new_line_content": "      if ((access & 1) &&",
          "content_same": false
        },
        {
          "line": 6502,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(false)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(false);",
          "new_line_content": "                                    true);",
          "content_same": false
        },
        {
          "line": 6515,
          "old_api": "open_default_role_table",
          "new_api": null,
          "old_text": "open_default_role_table(thd)",
          "new_text": null,
          "old_line_content": "  TABLE *table= open_default_role_table(thd);",
          "new_line_content": "    values when we are out of this function scope",
          "content_same": false
        },
        {
          "line": 4474,
          "old_api": "length",
          "new_api": null,
          "old_text": "str.length()",
          "new_text": null,
          "old_line_content": "  if (str.length() == 0)",
          "new_line_content": "void iterate_comma_separated_quoated_string(std::string str,",
          "content_same": false
        },
        {
          "line": 6523,
          "old_api": "lock",
          "new_api": null,
          "old_text": "acl_cache_lock.lock()",
          "new_text": null,
          "old_line_content": "  if (!acl_cache_lock.lock())",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4476,
          "old_api": "begin",
          "new_api": null,
          "old_text": "str.begin()",
          "new_text": null,
          "old_line_content": "  std::string::iterator i= str.begin();",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 6525,
          "old_api": "commit_and_close_mysql_tables",
          "new_api": null,
          "old_text": "commit_and_close_mysql_tables(thd)",
          "new_text": null,
          "old_line_content": "    commit_and_close_mysql_tables(thd);",
          "new_line_content": "  Acl_cache_lock_guard acl_cache_lock(thd, Acl_cache_lock_mode::WRITE_MODE);",
          "content_same": false
        },
        {
          "line": 4481,
          "old_api": "end",
          "new_api": null,
          "old_text": "str.end()",
          "new_text": null,
          "old_line_content": "  while(i != str.end())",
          "new_line_content": "  bool q1= false;",
          "content_same": false
        },
        {
          "line": 6529,
          "old_api": "create_authid_from",
          "new_api": null,
          "old_text": "create_authid_from(user)",
          "new_text": null,
          "old_line_content": "  Auth_id_ref authid= create_authid_from(user);",
          "new_line_content": "    return true;",
          "content_same": false
        },
        {
          "line": 6530,
          "old_api": "clear_default_roles",
          "new_api": null,
          "old_text": "clear_default_roles(thd, table, authid, 0)",
          "new_text": null,
          "old_line_content": "  ret= clear_default_roles(thd, table, authid, 0);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 6534,
          "old_api": "increase_version",
          "new_api": null,
          "old_text": "get_global_acl_cache()->increase_version()",
          "new_text": null,
          "old_line_content": "  get_global_acl_cache()->increase_version();",
          "new_line_content": "  int result= 0;",
          "content_same": false
        },
        {
          "line": 4506,
          "old_api": "str",
          "new_api": null,
          "old_text": "ss.str()",
          "new_text": null,
          "old_line_content": "      if (f(ss.str()))",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4508,
          "old_api": "str",
          "new_api": null,
          "old_text": "ss.str(\"\")",
          "new_text": null,
          "old_line_content": "      ss.str(\"\");",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 6561,
          "old_api": "open_default_role_table",
          "new_api": null,
          "old_text": "open_default_role_table(thd)",
          "new_text": null,
          "old_line_content": "  TABLE *table= open_default_role_table(thd);",
          "new_line_content": "  */",
          "content_same": false
        },
        {
          "line": 4520,
          "old_api": "str",
          "new_api": null,
          "old_text": "ss.str()",
          "new_text": null,
          "old_line_content": "  f(ss.str());",
          "new_line_content": "    ss << *i;",
          "content_same": false
        },
        {
          "line": 6569,
          "old_api": "lock",
          "new_api": null,
          "old_text": "acl_cache_lock.lock()",
          "new_text": null,
          "old_line_content": "  if (!acl_cache_lock.lock())",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 6571,
          "old_api": "commit_and_close_mysql_tables",
          "new_api": null,
          "old_text": "commit_and_close_mysql_tables(thd)",
          "new_text": null,
          "old_line_content": "    commit_and_close_mysql_tables(thd);",
          "new_line_content": "  Acl_cache_lock_guard acl_cache_lock(thd, Acl_cache_lock_mode::WRITE_MODE);",
          "content_same": false
        },
        {
          "line": 6575,
          "old_api": "create_authid_str_from",
          "new_api": null,
          "old_text": "create_authid_str_from(user)",
          "new_text": null,
          "old_line_content": "  std::string authid_role= create_authid_str_from(user);",
          "new_line_content": "    return true;",
          "content_same": false
        },
        {
          "line": 6576,
          "old_api": "find",
          "new_api": null,
          "old_text": "g_authid_to_vertex->find(authid_role)",
          "new_text": null,
          "old_line_content": "  Role_index_map::iterator it= g_authid_to_vertex->find(authid_role);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 6577,
          "old_api": "end",
          "new_api": null,
          "old_text": "g_authid_to_vertex->end()",
          "new_text": null,
          "old_line_content": "  if (it == g_authid_to_vertex->end())",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6584,
          "old_api": "get_granted_roles",
          "new_api": null,
          "old_text": "get_granted_roles(it->second, &granted_roles)",
          "new_text": null,
          "old_line_content": "  get_granted_roles(it->second, &granted_roles);",
          "new_line_content": "    return true;",
          "content_same": false
        },
        {
          "line": 4540,
          "old_api": "end",
          "new_api": null,
          "old_text": "str.end()",
          "new_text": null,
          "old_line_content": "  for (i= str.begin(); i != str.end(); ++i)",
          "new_line_content": "  bool q1= false;",
          "content_same": false
        },
        {
          "line": 6588,
          "old_api": "create_authid_from",
          "new_api": null,
          "old_text": "create_authid_from(role.first)",
          "new_text": null,
          "old_line_content": "    Auth_id_ref authid= create_authid_from(role.first);",
          "new_line_content": "  List_of_auth_id_refs new_default_role_ref;",
          "content_same": false
        },
        {
          "line": 6589,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "new_default_role_ref.push_back(authid)",
          "new_text": null,
          "old_line_content": "    new_default_role_ref.push_back(authid);",
          "new_line_content": "  for (auto&& role : granted_roles)",
          "content_same": false
        },
        {
          "line": 6596,
          "old_api": "begin",
          "new_api": null,
          "old_text": "new_default_role_ref.begin()",
          "new_text": null,
          "old_line_content": "    auto res= std::find(new_default_role_ref.begin(),",
          "new_line_content": "  for (auto &role : mandatory_roles)",
          "content_same": false
        },
        {
          "line": 6597,
          "old_api": "end",
          "new_api": null,
          "old_text": "new_default_role_ref.end()",
          "new_text": null,
          "old_line_content": "                        new_default_role_ref.end(),",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 6601,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "new_default_role_ref.push_back(authid)",
          "new_text": null,
          "old_line_content": "      new_default_role_ref.push_back(authid);",
          "new_line_content": "                        authid);",
          "content_same": false
        },
        {
          "line": 6608,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(0)",
          "new_text": null,
          "old_line_content": "    my_error(ER_FAILED_DEFAULT_ROLES, MYF(0));",
          "new_line_content": "                                            new_default_role_ref);",
          "content_same": false
        },
        {
          "line": 6612,
          "old_api": "increase_version",
          "new_api": null,
          "old_text": "get_global_acl_cache()->increase_version()",
          "new_text": null,
          "old_line_content": "  get_global_acl_cache()->increase_version();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4584,
          "old_api": "str",
          "new_api": null,
          "old_text": "host.str()",
          "new_text": null,
          "old_line_content": "  return std::make_pair(user.str(), host.str());",
          "new_line_content": "      host << *i;",
          "content_same": false
        },
        {
          "line": 6632,
          "old_api": "find_acl_user",
          "new_api": null,
          "old_text": "find_acl_user(user->host.str, user->user.str, true)",
          "new_text": null,
          "old_line_content": "  ACL_USER *acl_user = find_acl_user(user->host.str, user->user.str, true);",
          "new_line_content": "bool alter_user_set_default_roles(THD *thd, TABLE *table, LEX_USER *user,",
          "content_same": false
        },
        {
          "line": 6636,
          "old_api": "size",
          "new_api": null,
          "old_text": "new_auth_ids.size()",
          "new_text": null,
          "old_line_content": "  if (new_auth_ids.size() != 0)",
          "new_line_content": "  if (acl_user == 0)",
          "content_same": false
        },
        {
          "line": 4589,
          "old_api": "std::string(ref.first.str, ref.first.length)",
          "new_api": null,
          "old_text": "std::string(ref.first.str, ref.first.length)",
          "new_text": null,
          "old_line_content": "  return (rid.first.user() == std::string(ref.first.str, ref.first.length) &&",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4590,
          "old_api": "std::string(ref.second.str,ref.second.length)",
          "new_api": null,
          "old_text": "std::string(ref.second.str,ref.second.length)",
          "new_text": null,
          "old_line_content": "          rid.first.host() == std::string(ref.second.str,ref.second.length));",
          "new_line_content": "bool operator==(const std::pair<Role_id, bool> &rid, const Auth_id_ref &ref)",
          "content_same": false
        },
        {
          "line": 6641,
          "old_api": "equal_range",
          "new_api": null,
          "old_text": "g_default_roles->equal_range(user_role_id)",
          "new_text": null,
          "old_line_content": "    boost::tie(role_it, role_end)= g_default_roles->equal_range(user_role_id);",
          "new_line_content": "    Default_roles::iterator role_it, role_end;",
          "content_same": false
        },
        {
          "line": 6645,
          "old_api": "end",
          "new_api": null,
          "old_text": "new_auth_ids.end()",
          "new_text": null,
          "old_line_content": "                    role_it->second) == new_auth_ids.end())",
          "new_line_content": "    for( ;role_it != role_end && !errors; ++role_it)",
          "content_same": false
        },
        {
          "line": 6652,
          "old_api": "begin",
          "new_api": null,
          "old_text": "new_auth_ids.begin()",
          "new_text": null,
          "old_line_content": "    List_of_auth_id_refs::const_iterator it= new_auth_ids.begin();",
          "new_line_content": "                                              role_auth_id, true);",
          "content_same": false
        },
        {
          "line": 6653,
          "old_api": "equal_range",
          "new_api": null,
          "old_text": "g_default_roles->equal_range(user_role_id)",
          "new_text": null,
          "old_line_content": "    boost::tie(role_it, role_end)= g_default_roles->equal_range(user_role_id);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 6654,
          "old_api": "end",
          "new_api": null,
          "old_text": "new_auth_ids.end()",
          "new_text": null,
          "old_line_content": "    for( ;it != new_auth_ids.end() && !errors; ++it)",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4610,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"get_privilege_access_maps\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"get_privilege_access_maps\");",
          "new_line_content": "                               Grant_acl_set *with_admin_acl,",
          "content_same": false
        },
        {
          "line": 4611,
          "old_api": "assert_acl_cache_read_lock",
          "new_api": null,
          "old_text": "assert_acl_cache_read_lock(current_thd)",
          "new_text": null,
          "old_line_content": "  DBUG_ASSERT(assert_acl_cache_read_lock(current_thd));",
          "new_line_content": "                               Dynamic_privileges *dynamic_acl)",
          "content_same": false
        },
        {
          "line": 6658,
          "old_api": "modify_default_roles_in_table",
          "new_api": null,
          "old_text": "modify_default_roles_in_table(thd, table, user_auth_id, *it,\n                                              false)",
          "new_text": null,
          "old_line_content": "        errors= modify_default_roles_in_table(thd, table, user_auth_id, *it,",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 6662,
          "old_api": "equal_range",
          "new_api": null,
          "old_text": "g_default_roles->equal_range(user_role_id)",
          "new_text": null,
          "old_line_content": "    boost::tie(role_it, role_end)= g_default_roles->equal_range(user_role_id);",
          "new_line_content": "                                              false);",
          "content_same": false
        },
        {
          "line": 6663,
          "old_api": "erase",
          "new_api": null,
          "old_text": "g_default_roles->erase(role_it, role_end)",
          "new_text": null,
          "old_line_content": "    g_default_roles->erase(role_it, role_end);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 6664,
          "old_api": "begin",
          "new_api": null,
          "old_text": "new_auth_ids.begin()",
          "new_text": null,
          "old_line_content": "    it= new_auth_ids.begin();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4617,
          "old_api": "get_host",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"info\",(\"Global access for acl_user %s@%s is %lu\",acl_user->user,\n                     acl_user->host.get_host(),acl_user->access))",
          "new_text": null,
          "old_line_content": "  DBUG_PRINT(\"info\",(\"Global access for acl_user %s@%s is %lu\",acl_user->user,",
          "new_line_content": "  /* First we check the current users access control */",
          "content_same": false
        },
        {
          "line": 4618,
          "old_api": "get_host",
          "new_api": null,
          "old_text": "acl_user->host.get_host()",
          "new_text": null,
          "old_line_content": "                     acl_user->host.get_host(),acl_user->access));",
          "new_line_content": "  // Get global access",
          "content_same": false
        },
        {
          "line": 4622,
          "old_api": "get_table_access_map",
          "new_api": null,
          "old_text": "get_table_access_map(acl_user, table_map)",
          "new_text": null,
          "old_line_content": "  get_table_access_map(acl_user, table_map);",
          "new_line_content": "  // Get database access",
          "content_same": false
        },
        {
          "line": 4624,
          "old_api": "get",
          "new_api": null,
          "old_text": "proc_priv_hash.get()",
          "new_text": null,
          "old_line_content": "  get_sp_access_map(acl_user, sp_map, proc_priv_hash.get());",
          "new_line_content": "  // Get table- and column privileges",
          "content_same": false
        },
        {
          "line": 4626,
          "old_api": "get",
          "new_api": null,
          "old_text": "func_priv_hash.get()",
          "new_text": null,
          "old_line_content": "  get_sp_access_map(acl_user, func_map, func_priv_hash.get());",
          "new_line_content": "  // get stored procedure privileges",
          "content_same": false
        },
        {
          "line": 4628,
          "old_api": "get_dynamic_privileges",
          "new_api": null,
          "old_text": "get_dynamic_privileges(acl_user, dynamic_acl)",
          "new_text": null,
          "old_line_content": "  get_dynamic_privileges(acl_user, dynamic_acl);",
          "new_line_content": "  // get user function privileges",
          "content_same": false
        },
        {
          "line": 4639,
          "old_api": "get_mandatory_roles",
          "new_api": null,
          "old_text": "get_mandatory_roles(&mandatory_roles)",
          "new_text": null,
          "old_line_content": "  get_mandatory_roles(&mandatory_roles);",
          "new_line_content": "  */",
          "content_same": false
        },
        {
          "line": 4647,
          "old_api": "find",
          "new_api": null,
          "old_text": "g_authid_to_vertex->find(user_key)",
          "new_text": null,
          "old_line_content": "    g_authid_to_vertex->find(user_key);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6700,
          "old_api": "open_default_role_table",
          "new_api": null,
          "old_text": "open_default_role_table(thd)",
          "new_text": null,
          "old_line_content": "  TABLE *table= open_default_role_table(thd);",
          "new_line_content": "    values when we are out of this function scope",
          "content_same": false
        },
        {
          "line": 4653,
          "old_api": "boost::num_vertices(*g_granted_roles)",
          "new_api": null,
          "old_text": "boost::num_vertices(*g_granted_roles)",
          "new_text": null,
          "old_line_content": "    v_color(boost::num_vertices(*g_granted_roles));",
          "new_line_content": "  std::set<Role_id > all_granted_roles;",
          "content_same": false
        },
        {
          "line": 4657,
          "old_api": "size",
          "new_api": null,
          "old_text": "mandatory_roles.size()",
          "new_text": null,
          "old_line_content": "  if (has_granted_roles || mandatory_roles.size() > 0)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4659,
          "old_api": "end",
          "new_api": null,
          "old_text": "g_authid_to_vertex->end()",
          "new_text": null,
          "old_line_content": "    bool acl_user_has_vertex= (user_vertex_it != g_authid_to_vertex->end());",
          "new_line_content": "                    func_map, with_admin_acl, dynamic_acl);",
          "content_same": false
        },
        {
          "line": 6708,
          "old_api": "lock",
          "new_api": null,
          "old_text": "acl_cache_lock.lock()",
          "new_text": null,
          "old_line_content": "  if (!acl_cache_lock.lock())",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 6710,
          "old_api": "commit_and_close_mysql_tables",
          "new_api": null,
          "old_text": "commit_and_close_mysql_tables(thd)",
          "new_text": null,
          "old_line_content": "    commit_and_close_mysql_tables(thd);",
          "new_line_content": "  Acl_cache_lock_guard acl_cache_lock(thd, Acl_cache_lock_mode::WRITE_MODE);",
          "content_same": false
        },
        {
          "line": 4665,
          "old_api": "insert",
          "new_api": null,
          "old_text": "get_granted_roles(user_vertex,\n          [&](const Role_id &rid, bool with_admin)\n          {\n            all_granted_roles.insert(rid);\n            granted_roles->push_back(std::make_pair(rid, with_admin));\n          })",
          "new_text": null,
          "old_line_content": "      get_granted_roles(user_vertex,",
          "new_line_content": "    user_vertex = user_vertex_it->second;",
          "content_same": false
        },
        {
          "line": 6714,
          "old_api": "alter_user_set_default_roles",
          "new_api": null,
          "old_text": "alter_user_set_default_roles(thd, table, user, new_auth_ids)",
          "new_text": null,
          "old_line_content": "  bool ret= alter_user_set_default_roles(thd, table, user, new_auth_ids);",
          "new_line_content": "    return true;",
          "content_same": false
        },
        {
          "line": 4669,
          "old_api": "std::make_pair(rid, with_admin)",
          "new_api": null,
          "old_text": "std::make_pair(rid, with_admin)",
          "new_text": null,
          "old_line_content": "            granted_roles->push_back(std::make_pair(rid, with_admin));",
          "new_line_content": "          [&](const Role_id &rid, bool with_admin)",
          "content_same": false
        },
        {
          "line": 4673,
          "old_api": "insert",
          "new_api": null,
          "old_text": "all_granted_roles.insert(rid)",
          "new_text": null,
          "old_line_content": "        all_granted_roles.insert(rid);",
          "new_line_content": "          });",
          "content_same": false
        },
        {
          "line": 6721,
          "old_api": "increase_version",
          "new_api": null,
          "old_text": "get_global_acl_cache()->increase_version()",
          "new_text": null,
          "old_line_content": "  get_global_acl_cache()->increase_version();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4678,
          "old_api": "insert",
          "new_api": null,
          "old_text": "all_active_roles.insert(id)",
          "new_text": null,
          "old_line_content": "        all_active_roles.insert(id);",
          "new_line_content": "      for (auto &rid : *using_roles)",
          "content_same": false
        },
        {
          "line": 4682,
          "old_api": "end",
          "new_api": null,
          "old_text": "all_active_roles.end()",
          "new_text": null,
          "old_line_content": "                            all_active_roles.begin(), all_active_roles.end(),",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 4683,
          "old_api": "begin",
          "new_api": null,
          "old_text": "std::inserter(granted_active_roles,\n                                          granted_active_roles.begin())",
          "new_text": null,
          "old_line_content": "                            std::inserter(granted_active_roles,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6731,
          "old_api": "append_identifier",
          "new_api": null,
          "old_text": "append_identifier(&tmp, user->user.str, user->user.length)",
          "new_text": null,
          "old_line_content": "  append_identifier(&tmp, user->user.str, user->user.length);",
          "new_line_content": "std::string create_authid_str_from(const LEX_USER *user)",
          "content_same": false
        },
        {
          "line": 6732,
          "old_api": "append",
          "new_api": null,
          "old_text": "tmp.append('@')",
          "new_text": null,
          "old_line_content": "\ttmp.append('@');",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 6733,
          "old_api": "append_identifier",
          "new_api": null,
          "old_text": "append_identifier(&tmp, user->host.str, user->host.length)",
          "new_text": null,
          "old_line_content": "  append_identifier(&tmp, user->host.str, user->host.length);",
          "new_line_content": "  String tmp;",
          "content_same": false
        },
        {
          "line": 4689,
          "old_api": "user",
          "new_api": null,
          "old_text": "rid.user().c_str()",
          "new_text": null,
          "old_line_content": "        append_identifier(&rolestr, rid.user().c_str(),",
          "new_line_content": "      for (auto &&rid : granted_active_roles)",
          "content_same": false
        },
        {
          "line": 4690,
          "old_api": "user",
          "new_api": null,
          "old_text": "rid.user().length()",
          "new_text": null,
          "old_line_content": "                          rid.user().length());",
          "new_line_content": "      {",
          "content_same": false
        },
        {
          "line": 4691,
          "old_api": "append",
          "new_api": null,
          "old_text": "rolestr.append('@')",
          "new_text": null,
          "old_line_content": "        rolestr.append('@');",
          "new_line_content": "        String rolestr;",
          "content_same": false
        },
        {
          "line": 6740,
          "old_api": "std::make_pair(user->user, user->host)",
          "new_api": null,
          "old_text": "std::make_pair(user->user, user->host)",
          "new_text": null,
          "old_line_content": "  id= std::make_pair(user->user, user->host);",
          "new_line_content": "Auth_id_ref create_authid_from(const LEX_USER *user)",
          "content_same": false
        },
        {
          "line": 6748,
          "old_api": "user",
          "new_api": null,
          "old_text": "user.user().c_str()",
          "new_text": null,
          "old_line_content": "  lex_user.str= user.user().c_str();",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4701,
          "old_api": "user",
          "new_api": null,
          "old_text": "push_warning_printf(thd, Sql_condition::SL_WARNING,\n                                ER_UNKNOWN_AUTHID,\n                                \"Illegal role %s@%s was ignored.\",\n                                rid.user().c_str(),\n                                rid.host().c_str())",
          "new_text": null,
          "old_line_content": "            push_warning_printf(thd, Sql_condition::SL_WARNING,",
          "new_line_content": "          THD *thd= current_thd;",
          "content_same": false
        },
        {
          "line": 6749,
          "old_api": "user",
          "new_api": null,
          "old_text": "user.user().length()",
          "new_text": null,
          "old_line_content": "  lex_user.length= user.user().length();",
          "new_line_content": "  Auth_id_ref id;",
          "content_same": false
        },
        {
          "line": 4705,
          "old_api": "host",
          "new_api": null,
          "old_text": "rid.host().c_str()",
          "new_text": null,
          "old_line_content": "                                rid.host().c_str());",
          "new_line_content": "                                ER_UNKNOWN_AUTHID,",
          "content_same": false
        },
        {
          "line": 6753,
          "old_api": "std::make_pair(lex_user, lex_host)",
          "new_api": null,
          "old_text": "std::make_pair(lex_user, lex_host)",
          "new_text": null,
          "old_line_content": "  id= std::make_pair(lex_user, lex_host);",
          "new_line_content": "  LEX_CSTRING lex_host;",
          "content_same": false
        },
        {
          "line": 6759,
          "old_api": "std::make_pair(user,host)",
          "new_api": null,
          "old_text": "std::make_pair(user,host)",
          "new_text": null,
          "old_line_content": "  return std::make_pair(user,host);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4713,
          "old_api": "visitor",
          "new_api": null,
          "old_text": "boost::breadth_first_search(*g_granted_roles,\n                                      active_role_vertex,\n                                       boost::color_map(v_color).visitor(vis)\n                                     )",
          "new_text": null,
          "old_line_content": "          boost::breadth_first_search(*g_granted_roles,",
          "new_line_content": "        if (vertex_count == 0)",
          "content_same": false
        },
        {
          "line": 4715,
          "old_api": "visitor",
          "new_api": null,
          "old_text": "boost::color_map(v_color).visitor(vis)",
          "new_text": null,
          "old_line_content": "                                       boost::color_map(v_color).visitor(vis)",
          "new_line_content": "          /* breadth_first_search will initialize our v_color vector for us */",
          "content_same": false
        },
        {
          "line": 6768,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(user->user)",
          "new_text": null,
          "old_line_content": "  size_t length= user->user == 0 ? 0 : strlen(user->user);",
          "new_line_content": "std::string create_authid_str_from(const ACL_USER *user)",
          "content_same": false
        },
        {
          "line": 4721,
          "old_api": "visitor",
          "new_api": null,
          "old_text": "boost::breadth_first_visit(*g_granted_roles,  active_role_vertex,\n                                      boost::color_map(v_color).visitor(vis)\n                                    )",
          "new_text": null,
          "old_line_content": "          boost::breadth_first_visit(*g_granted_roles,  active_role_vertex,",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 4722,
          "old_api": "visitor",
          "new_api": null,
          "old_text": "boost::color_map(v_color).visitor(vis)",
          "new_text": null,
          "old_line_content": "                                      boost::color_map(v_color).visitor(vis)",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 6769,
          "old_api": "append_identifier",
          "new_api": null,
          "old_text": "append_identifier(&tmp, user->user, length)",
          "new_text": null,
          "old_line_content": "  append_identifier(&tmp, user->user, length);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 6770,
          "old_api": "append",
          "new_api": null,
          "old_text": "tmp.append(\"@\")",
          "new_text": null,
          "old_line_content": "\ttmp.append(\"@\");",
          "new_line_content": "  String tmp;",
          "content_same": false
        },
        {
          "line": 6779,
          "old_api": "append_identifier",
          "new_api": null,
          "old_text": "append_identifier(&tmp, user.first.str, user.first.length)",
          "new_text": null,
          "old_line_content": "  append_identifier(&tmp, user.first.str, user.first.length);",
          "new_line_content": "std::string create_authid_str_from(const Auth_id_ref &user)",
          "content_same": false
        },
        {
          "line": 4732,
          "old_api": "boost::tie(edge, found)",
          "new_api": null,
          "old_text": "boost::tie(edge, found)",
          "new_text": null,
          "old_line_content": "        boost::tie(edge, found)=",
          "new_line_content": "        */",
          "content_same": false
        },
        {
          "line": 4733,
          "old_api": "boost::edge(user_vertex, active_role_vertex, *g_granted_roles)",
          "new_api": null,
          "old_text": "boost::edge(user_vertex, active_role_vertex, *g_granted_roles)",
          "new_text": null,
          "old_line_content": "          boost::edge(user_vertex, active_role_vertex, *g_granted_roles);",
          "new_line_content": "        Role_edge_descriptor edge;",
          "content_same": false
        },
        {
          "line": 6780,
          "old_api": "append",
          "new_api": null,
          "old_text": "tmp.append(\"@\")",
          "new_text": null,
          "old_line_content": "\ttmp.append(\"@\");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 6781,
          "old_api": "append_identifier",
          "new_api": null,
          "old_text": "append_identifier(&tmp, user.second.str, user.second.length)",
          "new_text": null,
          "old_line_content": "  append_identifier(&tmp, user.second.str, user.second.length);",
          "new_line_content": "  String tmp;",
          "content_same": false
        },
        {
          "line": 6789,
          "old_api": "append_identifier",
          "new_api": null,
          "old_text": "append_identifier(&tmp, user.str, user.length)",
          "new_text": null,
          "old_line_content": "  append_identifier(&tmp, user.str, user.length);",
          "new_line_content": "                                   const LEX_CSTRING &host)",
          "content_same": false
        },
        {
          "line": 6790,
          "old_api": "append",
          "new_api": null,
          "old_text": "tmp.append('@')",
          "new_text": null,
          "old_line_content": "  tmp.append('@');",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4743,
          "old_api": "c_ptr",
          "new_api": null,
          "old_text": "rolestr.c_ptr()",
          "new_text": null,
          "old_line_content": "            with_admin_acl->insert(std::string(rolestr.c_ptr()));",
          "new_line_content": "                        ];",
          "content_same": false
        },
        {
          "line": 6791,
          "old_api": "append_identifier",
          "new_api": null,
          "old_text": "append_identifier(&tmp, host.str, host.length)",
          "new_text": null,
          "old_line_content": "  append_identifier(&tmp, host.str, host.length);",
          "new_line_content": "  String tmp;",
          "content_same": false
        },
        {
          "line": 4749,
          "old_api": "get_host",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"info\",(\"Global access for role user %s@%s is %lu\",acl_user->user,\n                     acl_user->host.get_host(), *access))",
          "new_text": null,
          "old_line_content": "  DBUG_PRINT(\"info\",(\"Global access for role user %s@%s is %lu\",acl_user->user,",
          "new_line_content": "      } // end for",
          "content_same": false
        },
        {
          "line": 4750,
          "old_api": "get_host",
          "new_api": null,
          "old_text": "acl_user->host.get_host()",
          "new_text": null,
          "old_line_content": "                     acl_user->host.get_host(), *access));",
          "new_line_content": "    } // if user_vertex_it != g_authid_to_vertex->end()",
          "content_same": false
        },
        {
          "line": 6802,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(user->user)",
          "new_text": null,
          "old_line_content": "    username.length= strlen(user->user);",
          "new_line_content": "  LEX_CSTRING host;",
          "content_same": false
        },
        {
          "line": 6806,
          "old_api": "get_host_len",
          "new_api": null,
          "old_text": "const_cast<ACL_USER *>(user)->host.get_host_len()",
          "new_text": null,
          "old_line_content": "  host.length= const_cast<ACL_USER *>(user)->host.get_host_len();",
          "new_line_content": "  else",
          "content_same": false
        },
        {
          "line": 6807,
          "old_api": "std::make_pair(username, host)",
          "new_api": null,
          "old_text": "std::make_pair(username, host)",
          "new_text": null,
          "old_line_content": "  id= std::make_pair(username, host);",
          "new_line_content": "    username.length= 0;",
          "content_same": false
        },
        {
          "line": 6815,
          "old_api": "auth_str",
          "new_api": null,
          "old_text": "user.auth_str(&tmp)",
          "new_text": null,
          "old_line_content": "  user.auth_str(&tmp);",
          "new_line_content": "std::string create_authid_str_from(const Role_id &user)",
          "content_same": false
        },
        {
          "line": 4772,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"mysql_show_grants\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"mysql_show_grants\");",
          "new_line_content": "  int  error = 0;",
          "content_same": false
        },
        {
          "line": 6821,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->clear_active_roles()",
          "new_text": null,
          "old_line_content": "  thd->security_context()->clear_active_roles();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6822,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->checkout_access_maps()",
          "new_text": null,
          "old_line_content": "  thd->security_context()->checkout_access_maps();",
          "new_line_content": "int mysql_set_active_role_none(THD *thd)",
          "content_same": false
        },
        {
          "line": 6823,
          "old_api": "db",
          "new_api": null,
          "old_text": "thd->db()",
          "new_text": null,
          "old_line_content": "  ulong new_db_access= thd->security_context()->db_acl(thd->db());",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4776,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(0)",
          "new_text": null,
          "old_line_content": "    my_error(ER_OPTION_PREVENTS_STATEMENT, MYF(0), \"--skip-grant-tables\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4777,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(true)",
          "new_text": null,
          "old_line_content": "    DBUG_RETURN(true);",
          "new_line_content": "  if (!initialized)",
          "content_same": false
        },
        {
          "line": 6828,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->priv_host()",
          "new_text": null,
          "old_line_content": "  ACL_USER *user= find_acl_user(thd->security_context()->priv_host().str,",
          "new_line_content": "  Acl_cache_lock_guard acl_cache_lock(thd, Acl_cache_lock_mode::READ_MODE);",
          "content_same": false
        },
        {
          "line": 4781,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(true)",
          "new_text": null,
          "old_line_content": "    DBUG_RETURN(true);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 6834,
          "old_api": "my_ok",
          "new_api": null,
          "old_text": "my_ok(thd)",
          "new_text": null,
          "old_line_content": "  my_ok(thd);",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 4788,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(true)",
          "new_text": null,
          "old_line_content": "    DBUG_RETURN(true);",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 4792,
          "old_api": "get_mandatory_roles",
          "new_api": null,
          "old_text": "get_mandatory_roles(&mandatory_roles)",
          "new_text": null,
          "old_line_content": "  get_mandatory_roles(&mandatory_roles);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4796,
          "old_api": "get_granted_roles",
          "new_api": null,
          "old_text": "get_granted_roles(thd, lex_user, &granted_roles)",
          "new_text": null,
          "old_line_content": "    get_granted_roles(thd, lex_user, &granted_roles);",
          "new_line_content": "  for(auto &role_ref : using_roles)",
          "content_same": false
        },
        {
          "line": 4798,
          "old_api": "end",
          "new_api": null,
          "old_text": "granted_roles.end()",
          "new_text": null,
          "old_line_content": "    if (find(granted_roles.begin(), granted_roles.end(), authid) ==",
          "new_line_content": "    List_of_granted_roles granted_roles;",
          "content_same": false
        },
        {
          "line": 4805,
          "old_api": "auth_str",
          "new_api": null,
          "old_text": "id.auth_str(&id_str)",
          "new_text": null,
          "old_line_content": "                    id.auth_str(&id_str);",
          "new_line_content": "                  [&](const Role_id &id)->bool",
          "content_same": false
        },
        {
          "line": 6853,
          "old_api": "lock",
          "new_api": null,
          "old_text": "acl_cache_lock.lock()",
          "new_text": null,
          "old_line_content": "  if (!acl_cache_lock.lock())",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4807,
          "old_api": "auth_str",
          "new_api": null,
          "old_text": "rid.auth_str(&rid_str)",
          "new_text": null,
          "old_line_content": "                    rid.auth_str(&rid_str);",
          "new_line_content": "                    std::string id_str,rid_str;",
          "content_same": false
        },
        {
          "line": 4809,
          "old_api": "end",
          "new_api": null,
          "old_text": "mandatory_roles.end()",
          "new_text": null,
          "old_line_content": "                    }) == mandatory_roles.end())",
          "new_line_content": "                    Role_id rid(role_ref.first, role_ref.second);",
          "content_same": false
        },
        {
          "line": 4813,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(true)",
          "new_text": null,
          "old_line_content": "        DBUG_RETURN(true);",
          "new_line_content": "      {",
          "content_same": false
        },
        {
          "line": 6861,
          "old_api": "begin",
          "new_api": null,
          "old_text": "active_list->begin()",
          "new_text": null,
          "old_line_content": "  std::copy(active_list->begin(),",
          "new_line_content": "  List_of_auth_id_refs backup_active_list;",
          "content_same": false
        },
        {
          "line": 6863,
          "old_api": "std::back_inserter(backup_active_list)",
          "new_api": null,
          "old_text": "std::back_inserter(backup_active_list)",
          "new_text": null,
          "old_line_content": "            std::back_inserter(backup_active_list));",
          "new_line_content": "  /* Shallow copy of LEX_CSTRING pairs. Memory not duplicated */",
          "content_same": false
        },
        {
          "line": 4821,
          "old_api": "strxmov",
          "new_api": null,
          "old_text": "strxmov(buff,\"Grants for \",lex_user->user.str,\"@\",\n          lex_user->host.str,NullS)",
          "new_text": null,
          "old_line_content": "  strxmov(buff,\"Grants for \",lex_user->user.str,\"@\",",
          "new_line_content": "  Item_string *field=new Item_string(\"\",0,&my_charset_latin1);",
          "content_same": false
        },
        {
          "line": 6869,
          "old_api": "create_authid_from",
          "new_api": null,
          "old_text": "create_authid_from(&current_user)",
          "new_text": null,
          "old_line_content": "  Auth_id_ref current_user_authid= create_authid_from(&current_user);",
          "new_line_content": "  LEX_USER current_user;",
          "content_same": false
        },
        {
          "line": 4823,
          "old_api": "set",
          "new_api": null,
          "old_text": "field->item_name.set(buff)",
          "new_text": null,
          "old_line_content": "  field->item_name.set(buff);",
          "new_line_content": "  field->max_length=1024;",
          "content_same": false
        },
        {
          "line": 4825,
          "old_api": "send_result_metadata",
          "new_api": null,
          "old_text": "thd->send_result_metadata(&field_list,\n                                Protocol::SEND_NUM_ROWS | Protocol::SEND_EOF)",
          "new_text": null,
          "old_line_content": "  if (thd->send_result_metadata(&field_list,",
          "new_line_content": "          lex_user->host.str,NullS);",
          "content_same": false
        },
        {
          "line": 6874,
          "old_api": "get_default_roles",
          "new_api": null,
          "old_text": "get_default_roles(current_user_authid, &authids)",
          "new_text": null,
          "old_line_content": "  get_default_roles(current_user_authid, &authids);",
          "new_line_content": "    Search global structure for target user;",
          "content_same": false
        },
        {
          "line": 6875,
          "old_api": "size",
          "new_api": null,
          "old_text": "authids.size()",
          "new_text": null,
          "old_line_content": "  if (authids.size() > 0)",
          "new_line_content": "    authids have their own memory storage (Role_id)",
          "content_same": false
        },
        {
          "line": 6884,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->activate_role(it->first, it->second, true)",
          "new_text": null,
          "old_line_content": "      ret= thd->security_context()->activate_role(it->first, it->second, true);",
          "new_line_content": "         Activating a role allocates new memory for the activated role",
          "content_same": false
        },
        {
          "line": 4840,
          "old_api": "set_thd",
          "new_api": null,
          "old_text": "table_map.set_thd(thd)",
          "new_text": null,
          "old_line_content": "  table_map.set_thd(thd);",
          "new_line_content": "  Dynamic_privileges dynamic_acl;",
          "content_same": false
        },
        {
          "line": 4841,
          "old_api": "get_privilege_access_maps",
          "new_api": null,
          "old_text": "get_privilege_access_maps(acl_user, &using_roles, &access, &db_map,\n                            &db_wild_map, &table_map, &sp_map, &func_map,\n                            &granted_roles, &with_admin_acl, &dynamic_acl)",
          "new_text": null,
          "old_line_content": "  get_privilege_access_maps(acl_user, &using_roles, &access, &db_map,",
          "new_line_content": "  List_of_granted_roles granted_roles;",
          "content_same": false
        },
        {
          "line": 4845,
          "old_api": "make_global_privilege_statement",
          "new_api": null,
          "old_text": "make_global_privilege_statement(thd, access, acl_user, &output)",
          "new_text": null,
          "old_line_content": "  make_global_privilege_statement(thd, access, acl_user, &output);",
          "new_line_content": "                            &db_wild_map, &table_map, &sp_map, &func_map,",
          "content_same": false
        },
        {
          "line": 4846,
          "old_api": "get_protocol",
          "new_api": null,
          "old_text": "thd->get_protocol()",
          "new_text": null,
          "old_line_content": "  Protocol *protocol= thd->get_protocol();",
          "new_line_content": "                            &granted_roles, &with_admin_acl, &dynamic_acl);",
          "content_same": false
        },
        {
          "line": 4847,
          "old_api": "start_row",
          "new_api": null,
          "old_text": "protocol->start_row()",
          "new_text": null,
          "old_line_content": "  protocol->start_row();",
          "new_line_content": "  String output;",
          "content_same": false
        },
        {
          "line": 6894,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->checkout_access_maps()",
          "new_text": null,
          "old_line_content": "    thd->security_context()->checkout_access_maps();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 6895,
          "old_api": "db",
          "new_api": null,
          "old_text": "thd->db()",
          "new_text": null,
          "old_line_content": "    ulong new_db_access= thd->security_context()->db_acl(thd->db());",
          "new_line_content": "  if (ret == 0)",
          "content_same": false
        },
        {
          "line": 6896,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->cache_current_db_access(new_db_access)",
          "new_text": null,
          "old_line_content": "    thd->security_context()->cache_current_db_access(new_db_access);",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 6900,
          "old_api": "const_cast<char*>(role.first.str)",
          "new_api": null,
          "old_text": "const_cast<char*>(role.first.str)",
          "new_text": null,
          "old_line_content": "      my_free(const_cast<char*>(role.first.str));",
          "new_line_content": "    /* Old memory in the backup list must now be freed. */",
          "content_same": false
        },
        {
          "line": 6901,
          "old_api": "const_cast<char*>(role.second.str)",
          "new_api": null,
          "old_text": "const_cast<char*>(role.second.str)",
          "new_text": null,
          "old_line_content": "      my_free(const_cast<char*>(role.second.str));",
          "new_line_content": "    for(auto &&role : backup_active_list)",
          "content_same": false
        },
        {
          "line": 4856,
          "old_api": "make_sp_privilege_statement",
          "new_api": null,
          "old_text": "make_sp_privilege_statement(thd, acl_user, protocol, func_map, 1)",
          "new_text": null,
          "old_line_content": "  make_sp_privilege_statement(thd, acl_user, protocol, func_map, 1);",
          "new_line_content": "                                    db_wild_map);",
          "content_same": false
        },
        {
          "line": 4864,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(error)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(error);",
          "new_line_content": "                                      granted_roles);",
          "content_same": false
        },
        {
          "line": 6913,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->clear_active_roles()",
          "new_text": null,
          "old_line_content": "    thd->security_context()->clear_active_roles();",
          "new_line_content": "      1. Remove any newly activated roles and deallocate memory",
          "content_same": false
        },
        {
          "line": 6914,
          "old_api": "end",
          "new_api": null,
          "old_text": "backup_active_list.end()",
          "new_text": null,
          "old_line_content": "    std::copy(backup_active_list.begin(), backup_active_list.end(),",
          "new_line_content": "      2. Copy the backup elements to the active_list (shallow copy)",
          "content_same": false
        },
        {
          "line": 6915,
          "old_api": "std::back_inserter(*active_list)",
          "new_api": null,
          "old_text": "std::back_inserter(*active_list)",
          "new_text": null,
          "old_line_content": "              std::back_inserter(*active_list));",
          "new_line_content": "    */",
          "content_same": false
        },
        {
          "line": 4870,
          "old_api": "lock",
          "new_api": null,
          "old_text": "acl_cache_lock.lock()",
          "new_text": null,
          "old_line_content": "  if (!acl_cache_lock.lock())",
          "new_line_content": "void roles_graphml(THD *thd, String *str)",
          "content_same": false
        },
        {
          "line": 4874,
          "old_api": "boost::edge_capacity_t()",
          "new_api": null,
          "old_text": "boost::edge_capacity_t()",
          "new_text": null,
          "old_line_content": "  dp.property(\"color\", boost::get(boost::edge_capacity_t(), *g_granted_roles));",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 4878,
          "old_api": "length",
          "new_api": null,
          "old_text": "out.length()",
          "new_text": null,
          "old_line_content": "  str->copy(out.c_str(), out.length(), system_charset_info);",
          "new_line_content": "  std::stringstream ss;",
          "content_same": false
        },
        {
          "line": 6936,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()",
          "new_text": null,
          "old_line_content": "  Security_context *sctx= thd->security_context();",
          "new_line_content": "*/",
          "content_same": false
        },
        {
          "line": 6938,
          "old_api": "lock",
          "new_api": null,
          "old_text": "acl_cache_lock.lock()",
          "new_text": null,
          "old_line_content": "  if (!acl_cache_lock.lock())",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 6942,
          "old_api": "get_active_roles",
          "new_api": null,
          "old_text": "sctx->get_active_roles()",
          "new_text": null,
          "old_line_content": "    sctx->get_active_roles();",
          "new_line_content": "    return 1;",
          "content_same": false
        },
        {
          "line": 6944,
          "old_api": "size",
          "new_api": null,
          "old_text": "active_list->size()",
          "new_text": null,
          "old_line_content": "  backup_active_list.reserve(active_list->size());",
          "new_line_content": "  List_of_auth_id_refs *active_list=",
          "content_same": false
        },
        {
          "line": 6946,
          "old_api": "end",
          "new_api": null,
          "old_text": "active_list->end()",
          "new_text": null,
          "old_line_content": "            active_list->end(),",
          "new_line_content": "  List_of_auth_id_refs backup_active_list;",
          "content_same": false
        },
        {
          "line": 6952,
          "old_api": "create_default_definer",
          "new_api": null,
          "old_text": "create_default_definer(thd)",
          "new_text": null,
          "old_line_content": "  LEX_USER *current_user= create_default_definer(thd);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4908,
          "old_api": "end",
          "new_api": null,
          "old_text": "acl_dbs->end()",
          "new_text": null,
          "old_line_content": "    for (revoked= 0, acl_db= acl_dbs->begin(); acl_db != acl_dbs->end(); )",
          "new_line_content": "  */",
          "content_same": false
        },
        {
          "line": 6957,
          "old_api": "end",
          "new_api": null,
          "old_text": "g_authid_to_vertex->end()",
          "new_text": null,
          "old_line_content": "  if ((it= g_authid_to_vertex->find(authid)) != g_authid_to_vertex->end())",
          "new_line_content": "  Role_index_map::iterator it;",
          "content_same": false
        },
        {
          "line": 4914,
          "old_api": "get_host",
          "new_api": null,
          "old_text": "acl_db->host.get_host()",
          "new_text": null,
          "old_line_content": "      if (!(host= acl_db->host.get_host()))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6962,
          "old_api": "get_mandatory_roles",
          "new_api": null,
          "old_text": "get_mandatory_roles(&mandatory_roles)",
          "new_text": null,
          "old_line_content": "    get_mandatory_roles(&mandatory_roles);",
          "new_line_content": "    Role_vertex_descriptor user_vertex = it->second;",
          "content_same": false
        },
        {
          "line": 4918,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(lex_user.host.str, host)",
          "new_text": null,
          "old_line_content": "          !strcmp(lex_user.host.str, host))",
          "new_line_content": "        host= \"\";",
          "content_same": false
        },
        {
          "line": 6967,
          "old_api": "begin",
          "new_api": null,
          "old_text": "granted_roles.begin()",
          "new_text": null,
          "old_line_content": "    List_of_granted_roles::iterator role_it= granted_roles.begin();",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 6974,
          "old_api": "const_cast<List<LEX_USER > *>(except_users)",
          "new_api": null,
          "old_text": "const_cast<List<LEX_USER > *>(except_users)",
          "new_text": null,
          "old_line_content": "          except_users_it(*(const_cast<List<LEX_USER > *>(except_users)));",
          "new_line_content": "      if (except_users && except_users->elements > 0)",
          "content_same": false
        },
        {
          "line": 6975,
          "old_api": "next",
          "new_api": null,
          "old_text": "except_users_it.next()",
          "new_text": null,
          "old_line_content": "        while(LEX_USER *except_user= (LEX_USER *)except_users_it.next())",
          "new_line_content": "      {",
          "content_same": false
        },
        {
          "line": 6979,
          "old_api": "user",
          "new_api": null,
          "old_text": "role_it->first.user().c_str()",
          "new_text": null,
          "old_line_content": "              strncmp(except_user->user.str, role_it->first.user().c_str(),",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 6992,
          "old_api": "user",
          "new_api": null,
          "old_text": "role_it->first.user().c_str()",
          "new_text": null,
          "old_line_content": "        ret= sctx->activate_role({role_it->first.user().c_str(),",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 6993,
          "old_api": "user",
          "new_api": null,
          "old_text": "role_it->first.user().length()",
          "new_text": null,
          "old_line_content": "                                 role_it->first.user().length()},",
          "new_line_content": "      if (!found_except_user)",
          "content_same": false
        },
        {
          "line": 6994,
          "old_api": "host",
          "new_api": null,
          "old_text": "role_it->first.host().c_str()",
          "new_text": null,
          "old_line_content": "                                 {role_it->first.host().c_str(),",
          "new_line_content": "      {",
          "content_same": false
        },
        {
          "line": 6999,
          "old_api": "user",
          "new_api": null,
          "old_text": "role_it->first.user().c_str()",
          "new_text": null,
          "old_line_content": "          my_error(ER_ROLE_NOT_GRANTED, MYF(0), role_it->first.user().c_str(),",
          "new_line_content": "                                 true);",
          "content_same": false
        },
        {
          "line": 7000,
          "old_api": "host",
          "new_api": null,
          "old_text": "role_it->first.host().c_str()",
          "new_text": null,
          "old_line_content": "                   role_it->first.host().c_str(), current_user->user.str,",
          "new_line_content": "        if (ret != 0)",
          "content_same": false
        },
        {
          "line": 7009,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->checkout_access_maps()",
          "new_text": null,
          "old_line_content": "    thd->security_context()->checkout_access_maps();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 7010,
          "old_api": "db",
          "new_api": null,
          "old_text": "thd->db()",
          "new_text": null,
          "old_line_content": "    ulong new_db_access= thd->security_context()->db_acl(thd->db());",
          "new_line_content": "  if (ret == 0)",
          "content_same": false
        },
        {
          "line": 7011,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->cache_current_db_access(new_db_access)",
          "new_text": null,
          "old_line_content": "    thd->security_context()->cache_current_db_access(new_db_access);",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 7015,
          "old_api": "const_cast<char *>(ref.first.str)",
          "new_api": null,
          "old_text": "const_cast<char *>(ref.first.str)",
          "new_text": null,
          "old_line_content": "      my_free(const_cast<char *>(ref.first.str));",
          "new_line_content": "    /* Drop backup */",
          "content_same": false
        },
        {
          "line": 7016,
          "old_api": "const_cast<char *>(ref.second.str)",
          "new_api": null,
          "old_text": "const_cast<char *>(ref.second.str)",
          "new_text": null,
          "old_line_content": "      my_free(const_cast<char *>(ref.second.str));",
          "new_line_content": "    for(auto&& ref : backup_active_list)",
          "content_same": false
        },
        {
          "line": 7023,
          "old_api": "clear",
          "new_api": null,
          "old_text": "active_list->clear()",
          "new_text": null,
          "old_line_content": "    active_list->clear();",
          "new_line_content": "  else",
          "content_same": false
        },
        {
          "line": 7024,
          "old_api": "end",
          "new_api": null,
          "old_text": "backup_active_list.end()",
          "new_text": null,
          "old_line_content": "    std::copy(backup_active_list.begin(), backup_active_list.end(),",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 7025,
          "old_api": "std::back_inserter(*active_list)",
          "new_api": null,
          "old_text": "std::back_inserter(*active_list)",
          "new_text": null,
          "old_line_content": "              std::back_inserter(*active_list));",
          "new_line_content": "    /* restore backup */",
          "content_same": false
        },
        {
          "line": 4983,
          "old_api": "begin",
          "new_api": null,
          "old_text": "column_priv_hash->begin()",
          "new_text": null,
          "old_line_content": "    for (auto it= column_priv_hash->begin(), next_it= it;",
          "new_line_content": "  do",
          "content_same": false
        },
        {
          "line": 4984,
          "old_api": "end",
          "new_api": null,
          "old_text": "column_priv_hash->end()",
          "new_text": null,
          "old_line_content": "         it != column_priv_hash->end(); it= next_it)",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 7034,
          "old_api": "lock",
          "new_api": null,
          "old_text": "acl_cache_lock.lock()",
          "new_text": null,
          "old_line_content": "  if (!acl_cache_lock.lock())",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4990,
          "old_api": "next",
          "new_api": null,
          "old_text": "next(it)",
          "new_text": null,
          "old_line_content": "      next_it= next(it);",
          "new_line_content": "        Store an iterator pointing to the next element now, since",
          "content_same": false
        },
        {
          "line": 7038,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->get_active_roles()",
          "new_text": null,
          "old_line_content": "    thd->security_context()->get_active_roles();",
          "new_line_content": "    return 1;",
          "content_same": false
        },
        {
          "line": 7040,
          "old_api": "size",
          "new_api": null,
          "old_text": "active_list->size()",
          "new_text": null,
          "old_line_content": "  backup_active_list.reserve(active_list->size());",
          "new_line_content": "  List_of_auth_id_refs *active_list=",
          "content_same": false
        },
        {
          "line": 7042,
          "old_api": "end",
          "new_api": null,
          "old_text": "active_list->end()",
          "new_text": null,
          "old_line_content": "            active_list->end(),",
          "new_line_content": "  List_of_auth_id_refs backup_active_list;",
          "content_same": false
        },
        {
          "line": 5000,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(lex_user.host.str, host)",
          "new_text": null,
          "old_line_content": "          !strcmp(lex_user.host.str, host))",
          "new_line_content": "        host= \"\";",
          "content_same": false
        },
        {
          "line": 7049,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->activate_role(role->user, role->host, true)",
          "new_text": null,
          "old_line_content": "    ret= thd->security_context()->activate_role(role->user, role->host, true);",
          "new_line_content": "  LEX_USER *role= 0;",
          "content_same": false
        },
        {
          "line": 5006,
          "old_api": "replace_table_table",
          "new_api": null,
          "old_text": "replace_table_table(thd, grant_table, &deleted_grant_table,\n                                     tables_priv_table,\n                                     lex_user,\n                                     grant_table->db,\n                                     grant_table->tname,\n                                     ~(ulong)0, 0, true)",
          "new_text": null,
          "old_line_content": "        int ret= replace_table_table(thd, grant_table, &deleted_grant_table,",
          "new_line_content": "        std::unique_ptr<GRANT_TABLE, Destroy_only<GRANT_TABLE>>",
          "content_same": false
        },
        {
          "line": 7054,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->checkout_access_maps()",
          "new_text": null,
          "old_line_content": "    thd->security_context()->checkout_access_maps();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7055,
          "old_api": "db",
          "new_api": null,
          "old_text": "thd->db()",
          "new_text": null,
          "old_line_content": "    ulong new_db_access= thd->security_context()->db_acl(thd->db());",
          "new_line_content": "  if (ret == 0)",
          "content_same": false
        },
        {
          "line": 7056,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->cache_current_db_access(new_db_access)",
          "new_text": null,
          "old_line_content": "    thd->security_context()->cache_current_db_access(new_db_access);",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 7060,
          "old_api": "const_cast<char *>(ref.first.str)",
          "new_api": null,
          "old_text": "const_cast<char *>(ref.first.str)",
          "new_text": null,
          "old_line_content": "      my_free(const_cast<char *>(ref.first.str));",
          "new_line_content": "    /* Drop backup */",
          "content_same": false
        },
        {
          "line": 7061,
          "old_api": "const_cast<char *>(ref.second.str)",
          "new_api": null,
          "old_text": "const_cast<char *>(ref.second.str)",
          "new_text": null,
          "old_line_content": "      my_free(const_cast<char *>(ref.second.str));",
          "new_line_content": "    for(auto&& ref : backup_active_list)",
          "content_same": false
        },
        {
          "line": 7069,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(0)",
          "new_text": null,
          "old_line_content": "      my_error(ER_ROLE_NOT_GRANTED, MYF(0), role->user.str, role->host.str,",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 7070,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->priv_user()",
          "new_text": null,
          "old_line_content": "               thd->security_context()->priv_user().str,",
          "new_line_content": "    if (role)",
          "content_same": false
        },
        {
          "line": 7071,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->priv_host()",
          "new_text": null,
          "old_line_content": "               thd->security_context()->priv_host().str);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 7075,
          "old_api": "end",
          "new_api": null,
          "old_text": "backup_active_list.end()",
          "new_text": null,
          "old_line_content": "    std::copy(backup_active_list.begin(), backup_active_list.end(),",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7076,
          "old_api": "std::back_inserter(*active_list)",
          "new_api": null,
          "old_text": "std::back_inserter(*active_list)",
          "new_text": null,
          "old_line_content": "              std::back_inserter(*active_list));",
          "new_line_content": "    /* restore backup */",
          "content_same": false
        },
        {
          "line": 5034,
          "old_api": "replace_column_table",
          "new_api": null,
          "old_text": "replace_column_table(thd, grant_table, columns_priv_table,\n                                    lex_user,\n                                    columns,\n                                    grant_table->db,\n                                    grant_table->tname,\n                                    ~(ulong)0, true)",
          "new_text": null,
          "old_line_content": "          ret= replace_column_table(thd, grant_table, columns_priv_table,",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 5049,
          "old_api": "DBUG_ASSERT",
          "new_api": null,
          "old_text": "DBUG_ASSERT(ret < 0)",
          "new_text": null,
          "old_line_content": "          DBUG_ASSERT(ret < 0);",
          "new_line_content": "            If we come there then the variable ret always has a value < 0 since",
          "content_same": false
        },
        {
          "line": 7100,
          "old_api": "lock",
          "new_api": null,
          "old_text": "acl_cache_lock.lock(false)",
          "new_text": null,
          "old_line_content": "  if (!acl_cache_lock.lock(false))",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 7129,
          "old_api": "end",
          "new_api": null,
          "old_text": "get_dynamic_privilege_register()->end()",
          "new_text": null,
          "old_line_content": "  if (get_dynamic_privilege_register()->find(priv) == get_dynamic_privilege_register()->end())",
          "new_line_content": "  try {",
          "content_same": false
        },
        {
          "line": 5089,
          "old_api": "get",
          "new_api": null,
          "old_text": "func_priv_hash.get()",
          "new_text": null,
          "old_line_content": "        is_proc ? proc_priv_hash.get() : func_priv_hash.get();",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 7137,
          "old_api": "equal_range",
          "new_api": null,
          "old_text": "g_dynamic_privileges_map->equal_range(id)",
          "new_text": null,
          "old_line_content": "  auto range= g_dynamic_privileges_map->equal_range(id);",
          "new_line_content": "    Is this grant already present? If so we will make an update by removing",
          "content_same": false
        },
        {
          "line": 5091,
          "old_api": "end",
          "new_api": null,
          "old_text": "hash->end()",
          "new_text": null,
          "old_line_content": "      for (auto it= hash->begin(), next_it= it; it != hash->end(); it= next_it)",
          "new_line_content": "                                unique_ptr_destroy_only<GRANT_NAME>> *hash=",
          "content_same": false
        },
        {
          "line": 5097,
          "old_api": "next",
          "new_api": null,
          "old_text": "next(it)",
          "new_text": null,
          "old_line_content": "        next_it= next(it);",
          "new_line_content": "          Store an iterator pointing to the next element now, since",
          "content_same": false
        },
        {
          "line": 7149,
          "old_api": "update_table",
          "new_api": null,
          "old_text": "update_table(priv, { str_user, str_host }, false,\n                         Update_dynamic_privilege_table::REVOKE)",
          "new_text": null,
          "old_line_content": "        if (update_table(priv, { str_user, str_host }, false,",
          "new_line_content": "      */",
          "content_same": false
        },
        {
          "line": 5107,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(lex_user.host.str, host)",
          "new_text": null,
          "old_line_content": "            !strcmp(lex_user.host.str, host))",
          "new_line_content": "          host= \"\";",
          "content_same": false
        },
        {
          "line": 7160,
          "old_api": "update_table",
          "new_api": null,
          "old_text": "update_table(priv, {str_user, str_host}, with_grant_option,\n                   Update_dynamic_privilege_table::GRANT)",
          "new_text": null,
          "old_line_content": "  if (update_table(priv, {str_user, str_host}, with_grant_option,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7164,
          "old_api": "std::make_pair(priv, with_grant_option)",
          "new_api": null,
          "old_text": "std::make_pair(priv, with_grant_option)",
          "new_text": null,
          "old_line_content": "                                   std::make_pair(priv, with_grant_option)));",
          "new_line_content": "                   Update_dynamic_privilege_table::GRANT))",
          "content_same": false
        },
        {
          "line": 7192,
          "old_api": "equal_range",
          "new_api": null,
          "old_text": "g_dynamic_privileges_map->equal_range(id)",
          "new_text": null,
          "old_line_content": "  auto range= g_dynamic_privileges_map->equal_range(id);",
          "new_line_content": "  try {",
          "content_same": false
        },
        {
          "line": 7197,
          "old_api": "update_table",
          "new_api": null,
          "old_text": "update_table(priv, { str_user, str_host }, false,\n                       Update_dynamic_privilege_table::REVOKE)",
          "new_text": null,
          "old_line_content": "      if (update_table(priv, { str_user, str_host }, false,",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 5159,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"mysql_revoke_all\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"mysql_revoke_all\");",
          "new_line_content": "  TABLE_LIST tables[ACL_TABLES::LAST_ENTRY];",
          "content_same": false
        },
        {
          "line": 5168,
          "old_api": "open_grant_tables",
          "new_api": null,
          "old_text": "open_grant_tables(thd, tables, &transactional_tables)",
          "new_text": null,
          "old_line_content": "  if ((ret= open_grant_tables(thd, tables, &transactional_tables)))",
          "new_line_content": "    values when we are out of this function scope",
          "content_same": false
        },
        {
          "line": 5169,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(ret != 1)",
          "new_text": null,
          "old_line_content": "    DBUG_RETURN(ret != 1);",
          "new_line_content": "  */",
          "content_same": false
        },
        {
          "line": 5174,
          "old_api": "commit_and_close_mysql_tables",
          "new_api": null,
          "old_text": "commit_and_close_mysql_tables(thd)",
          "new_text": null,
          "old_line_content": "    commit_and_close_mysql_tables(thd);",
          "new_line_content": "  Acl_cache_lock_guard acl_cache_lock(thd, Acl_cache_lock_mode::WRITE_MODE);",
          "content_same": false
        },
        {
          "line": 7226,
          "old_api": "size",
          "new_api": null,
          "old_text": "g_dynamic_privileges_map->size()",
          "new_text": null,
          "old_line_content": "  if (g_dynamic_privileges_map->size() > 0)",
          "new_line_content": "                                   Update_dynamic_privilege_table &update_table)",
          "content_same": false
        },
        {
          "line": 5186,
          "old_api": "get_current_user",
          "new_api": null,
          "old_text": "get_current_user(thd, tmp_lex_user)",
          "new_text": null,
          "old_line_content": "    if (!(lex_user= get_current_user(thd, tmp_lex_user)))",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 5191,
          "old_api": "find_acl_user",
          "new_api": null,
          "old_text": "find_acl_user(lex_user->host.str, lex_user->user.str, TRUE)",
          "new_text": null,
          "old_line_content": "    if (!find_acl_user(lex_user->host.str, lex_user->user.str, TRUE))",
          "new_line_content": "      result= true;",
          "content_same": false
        },
        {
          "line": 7239,
          "old_api": "erase",
          "new_api": null,
          "old_text": "g_dynamic_privileges_map->erase(range.first, range.second)",
          "new_text": null,
          "old_line_content": "    g_dynamic_privileges_map->erase(range.first, range.second);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 5198,
          "old_api": "revoke_all_dynamic_privileges",
          "new_api": null,
          "old_text": "revoke_all_dynamic_privileges(lex_user->user,\n                                               lex_user->host,\n                                               update_table)",
          "new_text": null,
          "old_line_content": "    if ((result= revoke_all_dynamic_privileges(lex_user->user,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5207,
          "old_api": "replace_user_table",
          "new_api": null,
          "old_text": "replace_user_table(thd, tables[ACL_TABLES::TABLE_USER].table,\n                                 lex_user, ~(ulong) 0, true, false,\n                                 (what_to_set | ACCESS_RIGHTS_ATTR))",
          "new_text": null,
          "old_line_content": "    if ((ret= replace_user_table(thd, tables[ACL_TABLES::TABLE_USER].table,",
          "new_line_content": "    /* copy password expire attributes to individual user */",
          "content_same": false
        },
        {
          "line": 7255,
          "old_api": "size",
          "new_api": null,
          "old_text": "g_dynamic_privileges_map->size()",
          "new_text": null,
          "old_line_content": "  if (g_dynamic_privileges_map->size() > 0)",
          "new_line_content": "                          Update_dynamic_privilege_table &update_table)",
          "content_same": false
        },
        {
          "line": 7262,
          "old_api": "equal_range",
          "new_api": null,
          "old_text": "g_dynamic_privileges_map->equal_range(id)",
          "new_text": null,
          "old_line_content": "    auto range= g_dynamic_privileges_map->equal_range(id);",
          "new_line_content": "      update the cache.",
          "content_same": false
        },
        {
          "line": 7263,
          "old_api": "std::distance(range.first,\n                                                           range.second)",
          "new_api": null,
          "old_text": "std::distance(range.first,\n                                                           range.second)",
          "new_text": null,
          "old_line_content": "    std::vector<Grant_privilege > privileges(std::distance(range.first,",
          "new_line_content": "    */",
          "content_same": false
        },
        {
          "line": 5219,
          "old_api": "remove_db_access_privileges",
          "new_api": null,
          "old_text": "remove_db_access_privileges(thd, tables[ACL_TABLES::TABLE_DB].table,\n           *lex_user)",
          "new_text": null,
          "old_line_content": "    if ((ret1= remove_db_access_privileges(thd, tables[ACL_TABLES::TABLE_DB].table,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5221,
          "old_api": "remove_column_access_privileges",
          "new_api": null,
          "old_text": "remove_column_access_privileges(thd,\n           tables[ACL_TABLES::TABLE_TABLES_PRIV].table,\n           tables[ACL_TABLES::TABLE_COLUMNS_PRIV].table,\n           *lex_user)",
          "new_text": null,
          "old_line_content": "        (ret2= remove_column_access_privileges(thd,",
          "new_line_content": "    int ret1, ret2, ret3;",
          "content_same": false
        },
        {
          "line": 7269,
          "old_api": "std::make_pair(it->second.first, it->second.second)",
          "new_api": null,
          "old_text": "std::make_pair(it->second.first, it->second.second)",
          "new_text": null,
          "old_line_content": "        std::make_pair(it->second.first, it->second.second);",
          "new_line_content": "    for(auto it= range.first; it != range.second; ++it, ++grants_count)",
          "content_same": false
        },
        {
          "line": 5225,
          "old_api": "remove_procedure_access_privileges",
          "new_api": null,
          "old_text": "remove_procedure_access_privileges(thd,\n           tables[ACL_TABLES::TABLE_PROCS_PRIV].table,\n           *lex_user)",
          "new_text": null,
          "old_line_content": "        (ret3= remove_procedure_access_privileges(thd,",
          "new_line_content": "           tables[ACL_TABLES::TABLE_TABLES_PRIV].table,",
          "content_same": false
        },
        {
          "line": 7273,
          "old_api": "update_table",
          "new_api": null,
          "old_text": "update_table(it->second.first, { old_user, old_host }, false,\n                       Update_dynamic_privilege_table::REVOKE)",
          "new_text": null,
          "old_line_content": "      if (update_table(it->second.first, { old_user, old_host }, false,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7282,
          "old_api": "erase",
          "new_api": null,
          "old_text": "g_dynamic_privileges_map->erase(range.first, range.second)",
          "new_text": null,
          "old_line_content": "    g_dynamic_privileges_map->erase(range.first, range.second);",
          "new_line_content": "    /*",
          "content_same": false
        },
        {
          "line": 5239,
          "old_api": "DBUG_EXECUTE_IF",
          "new_api": null,
          "old_text": "DBUG_EXECUTE_IF(\"force_mysql_revoke_all_fail\", {\n    result= 1;\n  })",
          "new_text": null,
          "old_line_content": "  DBUG_EXECUTE_IF(\"force_mysql_revoke_all_fail\", {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5243,
          "old_api": "is_error",
          "new_api": null,
          "old_text": "thd->is_error()",
          "new_text": null,
          "old_line_content": "  if (result && !thd->is_error())",
          "new_line_content": "    result= 1;",
          "content_same": false
        },
        {
          "line": 5244,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(0)",
          "new_text": null,
          "old_line_content": "    my_error(ER_REVOKE_GRANTS, MYF(0));",
          "new_line_content": "  });",
          "content_same": false
        },
        {
          "line": 7291,
          "old_api": "c_str",
          "new_api": null,
          "old_text": "privileges[grants_count].first.c_str()",
          "new_text": null,
          "old_line_content": "      LEX_CSTRING priv= { privileges[grants_count].first.c_str(),",
          "new_line_content": "    while(grants_count > 0)",
          "content_same": false
        },
        {
          "line": 7292,
          "old_api": "length",
          "new_api": null,
          "old_text": "privileges[grants_count].first.length()",
          "new_text": null,
          "old_line_content": "                          privileges[grants_count].first.length() };",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 7293,
          "old_api": "grant_dynamic_privilege",
          "new_api": null,
          "old_text": "grant_dynamic_privilege(priv, new_user, new_host,\n                                  privileges[grants_count].second,\n                                  update_table)",
          "new_text": null,
          "old_line_content": "      if (grant_dynamic_privilege(priv, new_user, new_host,",
          "new_line_content": "      --grants_count;",
          "content_same": false
        },
        {
          "line": 5248,
          "old_api": "increase_version",
          "new_api": null,
          "old_text": "get_global_acl_cache()->increase_version()",
          "new_text": null,
          "old_line_content": "  get_global_acl_cache()->increase_version();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7357,
          "old_api": "const_cast<List<LEX_USER > *>(priv_list)",
          "new_api": null,
          "old_text": "const_cast<List<LEX_USER > *>(priv_list)",
          "new_text": null,
          "old_line_content": "  List_iterator<LEX_USER> it(*(const_cast<List<LEX_USER > *>(priv_list)));",
          "new_line_content": "    rule of dynamic privileges LEX_USER::user is used to carry the name of",
          "content_same": false
        },
        {
          "line": 7361,
          "old_api": "std::string(priv->user.str, priv->user.length)",
          "new_api": null,
          "old_text": "std::string(priv->user.str, priv->user.length)",
          "new_text": null,
          "old_line_content": "      get_dynamic_privilege_register()->find(std::string(priv->user.str, priv->user.length));",
          "new_line_content": "  while(LEX_USER *priv= it++)",
          "content_same": false
        },
        {
          "line": 7362,
          "old_api": "end",
          "new_api": null,
          "old_text": "get_dynamic_privilege_register()->end()",
          "new_text": null,
          "old_line_content": "    if (it == get_dynamic_privilege_register()->end())",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 7366,
          "old_api": "append",
          "new_api": null,
          "old_text": "error.append(priv->user.str, priv->user.length)",
          "new_text": null,
          "old_line_content": "      error.append(priv->user.str, priv->user.length);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 5319,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"sp_revoke_privileges\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"sp_revoke_privileges\");",
          "new_line_content": "  TABLE_LIST tables[ACL_TABLES::LAST_ENTRY];",
          "content_same": false
        },
        {
          "line": 7367,
          "old_api": "c_ptr_quick",
          "new_api": null,
          "old_text": "error.c_ptr_quick()",
          "new_text": null,
          "old_line_content": "      my_error(ER_UNKNOWN_ERROR, MYF(0), error.c_ptr_quick());",
          "new_line_content": "      String error;",
          "content_same": false
        },
        {
          "line": 5321,
          "old_api": "open_grant_tables",
          "new_api": null,
          "old_text": "open_grant_tables(thd, tables, &transactional_tables)",
          "new_text": null,
          "old_line_content": "  if ((result= open_grant_tables(thd, tables, &transactional_tables)))",
          "new_line_content": "  bool transactional_tables;",
          "content_same": false
        },
        {
          "line": 5327,
          "old_api": "commit_and_close_mysql_tables",
          "new_api": null,
          "old_text": "commit_and_close_mysql_tables(thd)",
          "new_text": null,
          "old_line_content": "    commit_and_close_mysql_tables(thd);",
          "new_line_content": "  Acl_cache_lock_guard acl_cache_lock(thd, Acl_cache_lock_mode::WRITE_MODE);",
          "content_same": false
        },
        {
          "line": 7378,
          "old_api": "iterate_comma_separated_quoated_string",
          "new_api": null,
          "old_text": "iterate_comma_separated_quoated_string(authid_str,\n            [&error](const std::string item){\n              auto el= get_authid_from_quoted_string(item);\n              if (el.second != \"\" && el.first == \"\")\n                error= true;\n              return error;\n    })",
          "new_text": null,
          "old_line_content": "  iterate_comma_separated_quoated_string(authid_str,",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 7380,
          "old_api": "get_authid_from_quoted_string",
          "new_api": null,
          "old_text": "get_authid_from_quoted_string(item)",
          "new_text": null,
          "old_line_content": "              auto el= get_authid_from_quoted_string(item);",
          "new_line_content": "  std::string authid_str(buffer, length);",
          "content_same": false
        },
        {
          "line": 7390,
          "old_api": "mysql_mutex_lock",
          "new_api": null,
          "old_text": "mysql_mutex_lock(&LOCK_mandatory_roles)",
          "new_text": null,
          "old_line_content": "  mysql_mutex_lock(&LOCK_mandatory_roles);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5343,
          "old_api": "get",
          "new_api": null,
          "old_text": "func_priv_hash.get()",
          "new_text": null,
          "old_line_content": "    *hash= is_proc ? proc_priv_hash.get() : func_priv_hash.get();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7394,
          "old_api": "end",
          "new_api": null,
          "old_text": "g_mandatory_roles->end()",
          "new_text": null,
          "old_line_content": "    std::copy(g_mandatory_roles->begin(), g_mandatory_roles->end(),",
          "new_line_content": "  if (opt_mandatory_roles_cache)",
          "content_same": false
        },
        {
          "line": 5347,
          "old_api": "end",
          "new_api": null,
          "old_text": "hash->end()",
          "new_text": null,
          "old_line_content": "    for (auto it= hash->begin(), next_it= it; it != hash->end(); it= next_it)",
          "new_line_content": "  do",
          "content_same": false
        },
        {
          "line": 7395,
          "old_api": "std::back_inserter(*mandatory_roles)",
          "new_api": null,
          "old_text": "std::back_inserter(*mandatory_roles)",
          "new_text": null,
          "old_line_content": "              std::back_inserter(*mandatory_roles));",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 7396,
          "old_api": "mysql_mutex_unlock",
          "new_api": null,
          "old_text": "mysql_mutex_unlock(&LOCK_mandatory_roles)",
          "new_text": null,
          "old_line_content": "    mysql_mutex_unlock(&LOCK_mandatory_roles);",
          "new_line_content": "    /* Use pre-parsed auth ids from the cache */",
          "content_same": false
        },
        {
          "line": 5353,
          "old_api": "next",
          "new_api": null,
          "old_text": "next(it)",
          "new_text": null,
          "old_line_content": "      next_it= next(it);",
          "new_line_content": "        Store an iterator pointing to the next element now, since",
          "content_same": false
        },
        {
          "line": 5354,
          "old_api": "get",
          "new_api": null,
          "old_text": "it->second.get()",
          "new_text": null,
          "old_line_content": "      GRANT_NAME *grant_proc= it->second.get();",
          "new_line_content": "        replace_routine_table could delete elements, invalidating \"it\".",
          "content_same": false
        },
        {
          "line": 5355,
          "old_api": "my_strcasecmp",
          "new_api": null,
          "old_text": "my_strcasecmp(&my_charset_utf8_bin, grant_proc->db, sp_db)",
          "new_text": null,
          "old_line_content": "      if (!my_strcasecmp(&my_charset_utf8_bin, grant_proc->db, sp_db) &&",
          "new_line_content": "      */",
          "content_same": false
        },
        {
          "line": 7406,
          "old_api": "append",
          "new_api": null,
          "old_text": "role_str.append(opt_mandatory_roles.str, opt_mandatory_roles.length)",
          "new_text": null,
          "old_line_content": "  role_str.append(opt_mandatory_roles.str, opt_mandatory_roles.length);",
          "new_line_content": "  */",
          "content_same": false
        },
        {
          "line": 7407,
          "old_api": "user",
          "new_api": null,
          "old_text": "iterate_comma_separated_quoated_string(role_str,\n          [&mandatory_roles](const std::string item){\n            auto el= get_authid_from_quoted_string(item);\n            if (el.second == \"\")\n              el.second= \"%\";\n            Role_id role_id(el.first, el.second);\n            if (role_id.user() == \"\")\n            {\n              sql_print_warning(\"Can't set mandatory_role %s@%s: Anonymous \"\n                                \"authorization IDs are not allowed as roles.\",\n                                role_id.user().c_str(),\n                                role_id.host().c_str());\n            }\n            else if (find_acl_user(role_id.host().c_str(),\n                                   role_id.user().c_str(),\n                                   true) != NULL)\n            {\n              if (std::find(g_mandatory_roles->begin(),\n                            g_mandatory_roles->end(),\n                            role_id) == g_mandatory_roles->end())\n              {\n                mandatory_roles->push_back(role_id);\n                g_mandatory_roles->push_back(role_id);\n              }\n            }\n            else\n            {\n              sql_print_warning(\"Can't set mandatory_role: There's no such \"\n                                \"authorization ID %s@%s.\",\n                                role_id.user().c_str(),\n                                role_id.host().c_str());\n            }\n            return false; // continue iterating\n          })",
          "new_text": null,
          "old_line_content": "  iterate_comma_separated_quoated_string(role_str,",
          "new_line_content": "  opt_mandatory_roles_cache= true;",
          "content_same": false
        },
        {
          "line": 5360,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(grant_proc->user)",
          "new_text": null,
          "old_line_content": "        lex_user.user.length= strlen(grant_proc->user);",
          "new_line_content": "      {",
          "content_same": false
        },
        {
          "line": 5361,
          "old_api": "get_host",
          "new_api": null,
          "old_text": "grant_proc->host.get_host()",
          "new_text": null,
          "old_line_content": "        lex_user.host.str= (char*) (grant_proc->host.get_host() ?",
          "new_line_content": "        LEX_USER lex_user;",
          "content_same": false
        },
        {
          "line": 5362,
          "old_api": "get_host",
          "new_api": null,
          "old_text": "grant_proc->host.get_host()",
          "new_text": null,
          "old_line_content": "          grant_proc->host.get_host() : \"\");",
          "new_line_content": "        lex_user.user.str= grant_proc->user;",
          "content_same": false
        },
        {
          "line": 7413,
          "old_api": "user",
          "new_api": null,
          "old_text": "role_id.user()",
          "new_text": null,
          "old_line_content": "            if (role_id.user() == \"\")",
          "new_line_content": "            if (el.second == \"\")",
          "content_same": false
        },
        {
          "line": 7415,
          "old_api": "user",
          "new_api": null,
          "old_text": "sql_print_warning(\"Can't set mandatory_role %s@%s: Anonymous \"\n                                \"authorization IDs are not allowed as roles.\",\n                                role_id.user().c_str(),\n                                role_id.host().c_str())",
          "new_text": null,
          "old_line_content": "              sql_print_warning(\"Can't set mandatory_role %s@%s: Anonymous \"",
          "new_line_content": "            Role_id role_id(el.first, el.second);",
          "content_same": false
        },
        {
          "line": 7417,
          "old_api": "user",
          "new_api": null,
          "old_text": "role_id.user().c_str()",
          "new_text": null,
          "old_line_content": "                                role_id.user().c_str(),",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 7425,
          "old_api": "end",
          "new_api": null,
          "old_text": "g_mandatory_roles->end()",
          "new_text": null,
          "old_line_content": "                            g_mandatory_roles->end(),",
          "new_line_content": "                                   true) != NULL)",
          "content_same": false
        },
        {
          "line": 7426,
          "old_api": "end",
          "new_api": null,
          "old_text": "g_mandatory_roles->end()",
          "new_text": null,
          "old_line_content": "                            role_id) == g_mandatory_roles->end())",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 5386,
          "old_api": "log_and_commit_acl_ddl",
          "new_api": null,
          "old_text": "log_and_commit_acl_ddl(thd, transactional_tables, NULL,\n                                  result, false, false)",
          "new_text": null,
          "old_line_content": "  result|= log_and_commit_acl_ddl(thd, transactional_tables, NULL,",
          "new_line_content": "  } while (revoked);",
          "content_same": false
        },
        {
          "line": 7434,
          "old_api": "user",
          "new_api": null,
          "old_text": "sql_print_warning(\"Can't set mandatory_role: There's no such \"\n                                \"authorization ID %s@%s.\",\n                                role_id.user().c_str(),\n                                role_id.host().c_str())",
          "new_text": null,
          "old_line_content": "              sql_print_warning(\"Can't set mandatory_role: There's no such \"",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 7436,
          "old_api": "user",
          "new_api": null,
          "old_text": "role_id.user().c_str()",
          "new_text": null,
          "old_line_content": "                                role_id.user().c_str(),",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 5390,
          "old_api": "has_errors",
          "new_api": null,
          "old_text": "error_handler.has_errors()",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(error_handler.has_errors() || result);",
          "new_line_content": "                                  result, false, false);",
          "content_same": false
        },
        {
          "line": 7441,
          "old_api": "end",
          "new_api": null,
          "old_text": "g_mandatory_roles->end()",
          "new_text": null,
          "old_line_content": "  std::sort(g_mandatory_roles->begin(), g_mandatory_roles->end());",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 7442,
          "old_api": "mysql_mutex_unlock",
          "new_api": null,
          "old_text": "mysql_mutex_unlock(&LOCK_mandatory_roles)",
          "new_text": null,
          "old_line_content": "  mysql_mutex_unlock(&LOCK_mandatory_roles);",
          "new_line_content": "            return false; // continue iterating",
          "content_same": false
        },
        {
          "line": 7447,
          "old_api": "mysql_mutex_assert_owner",
          "new_api": null,
          "old_text": "mysql_mutex_assert_owner(&LOCK_mandatory_roles)",
          "new_text": null,
          "old_line_content": "  mysql_mutex_assert_owner(&LOCK_mandatory_roles);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7449,
          "old_api": "increase_version",
          "new_api": null,
          "old_text": "get_global_acl_cache()->increase_version()",
          "new_text": null,
          "old_line_content": "  get_global_acl_cache()->increase_version();",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 7457,
          "old_api": "auth_str",
          "new_api": null,
          "old_text": "a.auth_str(&tmp)",
          "new_text": null,
          "old_line_content": "  a.auth_str(&tmp);",
          "new_line_content": "                const std::string &b)",
          "content_same": false
        },
        {
          "line": 5410,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()",
          "new_text": null,
          "old_line_content": "  Security_context *sctx= thd->security_context();",
          "new_line_content": "bool sp_grant_privileges(THD *thd, const char *sp_db, const char *sp_name,",
          "content_same": false
        },
        {
          "line": 5417,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"sp_grant_privileges\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"sp_grant_privileges\");",
          "new_line_content": "  bool result;",
          "content_same": false
        },
        {
          "line": 5419,
          "old_api": "alloc",
          "new_api": null,
          "old_text": "thd->alloc(sizeof(st_lex_user))",
          "new_text": null,
          "old_line_content": "  if (!(combo=(LEX_USER*) thd->alloc(sizeof(st_lex_user))))",
          "new_line_content": "  Dummy_error_handler error_handler;",
          "content_same": false
        },
        {
          "line": 7470,
          "old_api": "user",
          "new_api": null,
          "old_text": "a.user().length()",
          "new_text": null,
          "old_line_content": "  return ((a.user().length() == b.first.length) &&",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7471,
          "old_api": "host",
          "new_api": null,
          "old_text": "a.host().length()",
          "new_text": null,
          "old_line_content": "          (a.host().length() == b.second.length) &&",
          "new_line_content": "bool operator==(const Role_id &a, const Auth_id_ref &b)",
          "content_same": false
        },
        {
          "line": 5424,
          "old_api": "lock",
          "new_api": null,
          "old_text": "acl_cache_lock.lock()",
          "new_text": null,
          "old_line_content": "  if (!acl_cache_lock.lock())",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7472,
          "old_api": "user",
          "new_api": null,
          "old_text": "a.user().c_str()",
          "new_text": null,
          "old_line_content": "          strncmp(a.user().c_str(), b.first.str, b.first.length) == 0 &&",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 5431,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(TRUE)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(TRUE);",
          "new_line_content": "                         combo->user.str, false)))",
          "content_same": false
        },
        {
          "line": 5436,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(tables, 0, sizeof(TABLE_LIST))",
          "new_text": null,
          "old_line_content": "  memset(tables, 0, sizeof(TABLE_LIST));",
          "new_line_content": " found_acl:",
          "content_same": false
        },
        {
          "line": 7486,
          "old_api": "user",
          "new_api": null,
          "old_text": "a.second.user().length()",
          "new_text": null,
          "old_line_content": "  return ((a.second.user().length() == b.first.length) &&",
          "new_line_content": "bool operator==(const std::pair<const Role_id, const Role_id> &a,",
          "content_same": false
        },
        {
          "line": 7487,
          "old_api": "host",
          "new_api": null,
          "old_text": "a.second.host().length()",
          "new_text": null,
          "old_line_content": "          (a.second.host().length() == b.second.length) &&",
          "new_line_content": "                const Auth_id_ref &b)",
          "content_same": false
        },
        {
          "line": 7488,
          "old_api": "user",
          "new_api": null,
          "old_text": "a.second.user().c_str()",
          "new_text": null,
          "old_line_content": "          strncmp(a.second.user().c_str(), b.first.str, b.first.length) == 0 &&",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 5442,
          "old_api": "make_lex_string",
          "new_api": null,
          "old_text": "thd->make_lex_string(&combo->user,\n                       combo->user.str, strlen(combo->user.str), 0)",
          "new_text": null,
          "old_line_content": "  thd->make_lex_string(&combo->user,",
          "new_line_content": "  tables->db= (char*)sp_db;",
          "content_same": false
        },
        {
          "line": 5443,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(combo->user.str)",
          "new_text": null,
          "old_line_content": "                       combo->user.str, strlen(combo->user.str), 0);",
          "new_line_content": "  tables->table_name= tables->alias= (char*)sp_name;",
          "content_same": false
        },
        {
          "line": 5444,
          "old_api": "make_lex_string",
          "new_api": null,
          "old_text": "thd->make_lex_string(&combo->host,\n                       combo->host.str, strlen(combo->host.str), 0)",
          "new_text": null,
          "old_line_content": "  thd->make_lex_string(&combo->host,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7495,
          "old_api": "user",
          "new_api": null,
          "old_text": "b.user()",
          "new_text": null,
          "old_line_content": "  return ((a.user() == b.user()) &&",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7496,
          "old_api": "host",
          "new_api": null,
          "old_text": "b.host().length()",
          "new_text": null,
          "old_line_content": "          (a.host().length() == b.host().length()) &&",
          "new_line_content": "bool operator==(const Role_id &a, const Role_id &b)",
          "content_same": false
        },
        {
          "line": 7497,
          "old_api": "host",
          "new_api": null,
          "old_text": "a.host().c_str()",
          "new_text": null,
          "old_line_content": "          (my_strcasecmp(system_charset_info, a.host().c_str(),",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 5454,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "user_list.push_back(combo)",
          "new_text": null,
          "old_line_content": "  if (user_list.push_back(combo))",
          "new_line_content": "  combo->uses_identified_by_password_clause= false;",
          "content_same": false
        },
        {
          "line": 5455,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(TRUE)",
          "new_text": null,
          "old_line_content": "    DBUG_RETURN(TRUE);",
          "new_line_content": "  combo->uses_authentication_string_clause= false;",
          "content_same": false
        },
        {
          "line": 5459,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&thd->lex->mqh, 0, sizeof(thd->lex->mqh))",
          "new_text": null,
          "old_line_content": "  memset(&thd->lex->mqh, 0, sizeof(thd->lex->mqh));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7508,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(a.first.str, b.first.str, a.first.length)",
          "new_text": null,
          "old_line_content": "  int first= memcmp(a.first.str, b.first.str, a.first.length);",
          "new_line_content": "  if (a.second.length != b.second.length)",
          "content_same": false
        },
        {
          "line": 5461,
          "old_api": "cleanup",
          "new_api": null,
          "old_text": "thd->lex->alter_password.cleanup()",
          "new_text": null,
          "old_line_content": "  thd->lex->alter_password.cleanup();",
          "new_line_content": "  thd->lex->ssl_cipher= thd->lex->x509_subject= thd->lex->x509_issuer= 0;",
          "content_same": false
        },
        {
          "line": 5469,
          "old_api": "push_internal_handler",
          "new_api": null,
          "old_text": "thd->push_internal_handler(&error_handler)",
          "new_text": null,
          "old_line_content": "  thd->push_internal_handler(&error_handler);",
          "new_line_content": "    Only care about whether the operation failed or succeeded",
          "content_same": false
        },
        {
          "line": 5470,
          "old_api": "mysql_routine_grant",
          "new_api": null,
          "old_text": "mysql_routine_grant(thd, tables, is_proc, user_list,\n                              DEFAULT_CREATE_PROC_ACLS, FALSE, FALSE)",
          "new_text": null,
          "old_line_content": "  result= mysql_routine_grant(thd, tables, is_proc, user_list,",
          "new_line_content": "    as all errors will be handled later.",
          "content_same": false
        },
        {
          "line": 7528,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(a.str, b.str, a.length)",
          "new_text": null,
          "old_line_content": "       (memcmp(a.str, b.str, a.length) == 0)) );",
          "new_line_content": "  return",
          "content_same": false
        },
        {
          "line": 5485,
          "old_api": "assert_acl_cache_read_lock",
          "new_api": null,
          "old_text": "assert_acl_cache_read_lock(thd)",
          "new_text": null,
          "old_line_content": " DBUG_ASSERT(assert_acl_cache_read_lock(thd));",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 5486,
          "old_api": "restore_record",
          "new_api": null,
          "old_text": "restore_record(table, s->default_values)",
          "new_text": null,
          "old_line_content": "  restore_record(table, s->default_values);",
          "new_line_content": "  int i= 2;",
          "content_same": false
        },
        {
          "line": 5487,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(buff)",
          "new_text": null,
          "old_line_content": "  table->field[0]->store(buff, strlen(buff), cs);",
          "new_line_content": "  CHARSET_INFO *cs= system_charset_info;",
          "content_same": false
        },
        {
          "line": 5492,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(t_name)",
          "new_text": null,
          "old_line_content": "    table->field[i++]->store(t_name, strlen(t_name), cs);",
          "new_line_content": "  if (db)",
          "content_same": false
        },
        {
          "line": 5494,
          "old_api": "store",
          "new_api": null,
          "old_text": "table->field[i++]->store(column, col_length, cs)",
          "new_text": null,
          "old_line_content": "    table->field[i++]->store(column, col_length, cs);",
          "new_line_content": "  if (t_name)",
          "content_same": false
        },
        {
          "line": 5496,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(is_grantable)",
          "new_text": null,
          "old_line_content": "  table->field[i]->store(is_grantable, strlen(is_grantable), cs);",
          "new_line_content": "  if (column)",
          "content_same": false
        },
        {
          "line": 5515,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()",
          "new_text": null,
          "old_line_content": "  Security_context *sctx= thd->security_context();",
          "new_line_content": "void fill_effective_table_privileges(THD *thd, GRANT_INFO *grant,",
          "content_same": false
        },
        {
          "line": 5516,
          "old_api": "priv_user",
          "new_api": null,
          "old_text": "sctx->priv_user()",
          "new_text": null,
          "old_line_content": "  LEX_CSTRING priv_user= sctx->priv_user();",
          "new_line_content": "                                     const char *db, const char *table)",
          "content_same": false
        },
        {
          "line": 5517,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"fill_effective_table_privileges\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"fill_effective_table_privileges\");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 5530,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"info\", (\"skip grants\"))",
          "new_text": null,
          "old_line_content": "    DBUG_PRINT(\"info\", (\"skip grants\"));",
          "new_line_content": "  /* --skip-grants */",
          "content_same": false
        },
        {
          "line": 5532,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"info\", (\"privilege 0x%lx\", grant->privilege))",
          "new_text": null,
          "old_line_content": "    DBUG_PRINT(\"info\", (\"privilege 0x%lx\", grant->privilege));",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 5537,
          "old_api": "get_active_roles",
          "new_api": null,
          "old_text": "sctx->get_active_roles()->size()",
          "new_text": null,
          "old_line_content": "                     (unsigned long)sctx->get_active_roles()->size()));",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 5542,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(db)",
          "new_text": null,
          "old_line_content": "    LEX_CSTRING str_db= {db, strlen(db)};",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 5549,
          "old_api": "get_active_roles",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"info\",(\"Role used: %s db: %s db-acl: %lu all-acl: %lu \",\n                       sctx->get_active_roles()->at(0).first.str,\n                       db, sctx->db_acl(str_db), grant->privilege))",
          "new_text": null,
          "old_line_content": "    DBUG_PRINT(\"info\",(\"Role used: %s db: %s db-acl: %lu all-acl: %lu \",",
          "new_line_content": "    /* table privileges */",
          "content_same": false
        },
        {
          "line": 5551,
          "old_api": "db_acl",
          "new_api": null,
          "old_text": "sctx->db_acl(str_db)",
          "new_text": null,
          "old_line_content": "                       db, sctx->db_acl(str_db), grant->privilege));",
          "new_line_content": "    grant->grant_table= 0;",
          "content_same": false
        },
        {
          "line": 5556,
          "old_api": "master_access",
          "new_api": null,
          "old_text": "sctx->master_access()",
          "new_text": null,
          "old_line_content": "    grant->privilege= sctx->master_access();",
          "new_line_content": "  else",
          "content_same": false
        },
        {
          "line": 5571,
          "old_api": "ip",
          "new_api": null,
          "old_text": "sctx->ip()",
          "new_text": null,
          "old_line_content": "        table_hash_search(sctx->host().str, sctx->ip().str, db,",
          "new_line_content": "    if (grant->version != grant_version)",
          "content_same": false
        },
        {
          "line": 5582,
          "old_api": "is_infoschema_db",
          "new_api": null,
          "old_text": "is_infoschema_db(db)",
          "new_text": null,
          "old_line_content": "  if (is_infoschema_db(db))",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 5594,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"acl_check_proxy_grant_access\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"acl_check_proxy_grant_access\");",
          "new_line_content": "acl_check_proxy_grant_access(THD *thd, const char *host, const char *user,",
          "content_same": false
        },
        {
          "line": 5595,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"info\", (\"user=%s host=%s with_grant=%d\", user, host,\n                      (int) with_grant))",
          "new_text": null,
          "old_line_content": "  DBUG_PRINT(\"info\", (\"user=%s host=%s with_grant=%d\", user, host,",
          "new_line_content": "                             bool with_grant)",
          "content_same": false
        },
        {
          "line": 5599,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(0)",
          "new_text": null,
          "old_line_content": "    my_error(ER_OPTION_PREVENTS_STATEMENT, MYF(0), \"--skip-grant-tables\");",
          "new_line_content": "                      (int) with_grant));",
          "content_same": false
        },
        {
          "line": 5600,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(1)",
          "new_text": null,
          "old_line_content": "    DBUG_RETURN(1);",
          "new_line_content": "  if (!initialized)",
          "content_same": false
        },
        {
          "line": 5606,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"info\", (\"replication slave\"))",
          "new_text": null,
          "old_line_content": "    DBUG_PRINT(\"info\", (\"replication slave\"));",
          "new_line_content": "  /* replication slave thread can do anything */",
          "content_same": false
        },
        {
          "line": 5607,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(FALSE)",
          "new_text": null,
          "old_line_content": "    DBUG_RETURN(FALSE);",
          "new_line_content": "  if (thd->slave_thread)",
          "content_same": false
        },
        {
          "line": 5622,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->priv_user()",
          "new_text": null,
          "old_line_content": "  if (!strcmp(thd->security_context()->priv_user().str, user) &&",
          "new_line_content": "    or revoking proxy privilege, user is expected to provide entries mentioned",
          "content_same": false
        },
        {
          "line": 5623,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "my_strcasecmp(system_charset_info, host,\n                     thd->security_context()->priv_host().str)",
          "new_text": null,
          "old_line_content": "      !my_strcasecmp(system_charset_info, host,",
          "new_line_content": "    in mysql.user table.",
          "content_same": false
        },
        {
          "line": 5624,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->priv_host()",
          "new_text": null,
          "old_line_content": "                     thd->security_context()->priv_host().str))",
          "new_line_content": "  */",
          "content_same": false
        },
        {
          "line": 3577,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(true)",
          "new_text": null,
          "old_line_content": "    DBUG_RETURN(true);",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 5628,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->priv_host()",
          "new_text": null,
          "old_line_content": "                        host, thd->security_context()->priv_host().str));",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 5633,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(TRUE)",
          "new_text": null,
          "old_line_content": "    DBUG_RETURN(TRUE);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3586,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()",
          "new_text": null,
          "old_line_content": "                                          thd->security_context();",
          "new_line_content": "    TABLE_LIST *const t_ref=",
          "content_same": false
        },
        {
          "line": 5637,
          "old_api": "end",
          "new_api": null,
          "old_text": "acl_proxy_users->end()",
          "new_text": null,
          "old_line_content": "       proxy != acl_proxy_users->end(); ++proxy)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3590,
          "old_api": "get_db_name",
          "new_api": null,
          "old_text": "t_ref->get_db_name()",
          "new_text": null,
          "old_line_content": "                              t_ref->get_db_name(),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3591,
          "old_api": "get_table_name",
          "new_api": null,
          "old_text": "t_ref->get_table_name()",
          "new_text": null,
          "old_line_content": "                              t_ref->get_table_name());",
          "new_line_content": "    const ACL_internal_table_access *access=",
          "content_same": false
        },
        {
          "line": 5641,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->user()",
          "new_text": null,
          "old_line_content": "                       thd->security_context()->user().str,",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 3595,
          "old_api": "check",
          "new_api": null,
          "old_text": "access->check(orig_want_access, &t_ref->grant.privilege)",
          "new_text": null,
          "old_line_content": "      switch(access->check(orig_want_access, &t_ref->grant.privilege))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5646,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"info\", (\"found\"))",
          "new_text": null,
          "old_line_content": "      DBUG_PRINT(\"info\", (\"found\"));",
          "new_line_content": "                       user, FALSE) &&",
          "content_same": false
        },
        {
          "line": 5651,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(0)",
          "new_text": null,
          "old_line_content": "  my_error(ER_ACCESS_DENIED_NO_PASSWORD_ERROR, MYF(0),",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5652,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->user()",
          "new_text": null,
          "old_line_content": "           thd->security_context()->user().str,",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 5653,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->host_or_ip()",
          "new_text": null,
          "old_line_content": "           thd->security_context()->host_or_ip().str);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3612,
          "old_api": "master_access",
          "new_api": null,
          "old_text": "sctx->master_access()",
          "new_text": null,
          "old_line_content": "    want_access&= ~sctx->master_access();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3617,
          "old_api": "is_derived",
          "new_api": null,
          "old_text": "t_ref->is_derived()",
          "new_text": null,
          "old_line_content": "        t_ref->is_derived() || t_ref->schema_table)",
          "new_line_content": "      continue;                                 // ok",
          "content_same": false
        },
        {
          "line": 5665,
          "old_api": "check_access",
          "new_api": null,
          "old_text": "check_access(thd, SELECT_ACL, \"mysql\",\n                                      NULL, NULL, 1, 1)",
          "new_text": null,
          "old_line_content": "  bool no_global_access= check_access(thd, SELECT_ACL, \"mysql\",",
          "new_line_content": "  ulong want_access;",
          "content_same": false
        },
        {
          "line": 5667,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->priv_host_name()",
          "new_text": null,
          "old_line_content": "  const char *curr_host= thd->security_context()->priv_host_name();",
          "new_line_content": "  TABLE *table= tables->table;",
          "content_same": false
        },
        {
          "line": 5675,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(1)",
          "new_text": null,
          "old_line_content": "    DBUG_RETURN(1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3632,
          "old_api": "get_active_roles",
          "new_api": null,
          "old_text": "sctx->get_active_roles()->size()",
          "new_text": null,
          "old_line_content": "    if (sctx->get_active_roles()->size() != 0)",
          "new_line_content": "      continue;",
          "content_same": false
        },
        {
          "line": 5682,
          "old_api": "get_host",
          "new_api": null,
          "old_text": "acl_user->host.get_host()",
          "new_text": null,
          "old_line_content": "    if (!(host=acl_user->host.get_host()))",
          "new_line_content": "    const char *user,*host, *is_grantable=\"YES\";",
          "content_same": false
        },
        {
          "line": 3638,
          "old_api": "get_db_name",
          "new_api": null,
          "old_text": "t_ref->get_db_name()",
          "new_text": null,
          "old_line_content": "        sctx->table_and_column_acls({t_ref->get_db_name(),",
          "new_line_content": "      t_ref->grant.version= grant_version;",
          "content_same": false
        },
        {
          "line": 3639,
          "old_api": "get_db_name",
          "new_api": null,
          "old_text": "t_ref->get_db_name()",
          "new_text": null,
          "old_line_content": "                                     strlen(t_ref->get_db_name())},",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3640,
          "old_api": "get_table_name",
          "new_api": null,
          "old_text": "t_ref->get_table_name()",
          "new_text": null,
          "old_line_content": "                                    {t_ref->get_table_name(),",
          "new_line_content": "      Grant_table_aggregate aggr=",
          "content_same": false
        },
        {
          "line": 5686,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->priv_user()",
          "new_text": null,
          "old_line_content": "        (strcmp(thd->security_context()->priv_user().str, user) ||",
          "new_line_content": "      host= \"\";",
          "content_same": false
        },
        {
          "line": 5687,
          "old_api": "my_strcasecmp",
          "new_api": null,
          "old_text": "my_strcasecmp(system_charset_info, curr_host, host)",
          "new_text": null,
          "old_line_content": "         my_strcasecmp(system_charset_info, curr_host, host)))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3645,
          "old_api": "get_table_name",
          "new_api": null,
          "old_text": "t_ref->get_table_name()",
          "new_text": null,
          "old_line_content": "                  t_ref->get_db_name(), t_ref->get_table_name(),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5694,
          "old_api": "strxmov",
          "new_api": null,
          "old_text": "strxmov(buff,\"'\",user,\"'@'\",host,\"'\",NullS)",
          "new_text": null,
          "old_line_content": "    strxmov(buff,\"'\",user,\"'@'\",host,\"'\",NullS);",
          "new_line_content": "    if (!(want_access & GRANT_ACL))",
          "content_same": false
        },
        {
          "line": 5698,
          "old_api": "STRING_WITH_LEN",
          "new_api": null,
          "old_text": "STRING_WITH_LEN(\"USAGE\")",
          "new_text": null,
          "old_line_content": "                                  STRING_WITH_LEN(\"USAGE\"), is_grantable))",
          "new_line_content": "    if (!(want_access & ~GRANT_ACL))",
          "content_same": false
        },
        {
          "line": 3663,
          "old_api": "get_db_name",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"info\",(\"Access not denied because of column acls for %s.%s.\"\n                           \"want_access= %lu, grant.privilege= %lu\",\n                           t_ref->get_db_name(),\n                           t_ref->get_table_name(),\n                           want_access,\n                           t_ref->grant.privilege))",
          "new_text": null,
          "old_line_content": "        DBUG_PRINT(\"info\",(\"Access not denied because of column acls for %s.%s.\"",
          "new_line_content": "      t_ref->grant.privilege= aggr.table_access;",
          "content_same": false
        },
        {
          "line": 5712,
          "old_api": "update_schema_privilege",
          "new_api": null,
          "old_text": "update_schema_privilege(thd, table, buff, 0, 0, 0, 0,\n                                      command_array[priv_id],\n                                      command_lengths[priv_id], is_grantable)",
          "new_text": null,
          "old_line_content": "          if (update_schema_privilege(thd, table, buff, 0, 0, 0, 0,",
          "new_line_content": "      {",
          "content_same": false
        },
        {
          "line": 3665,
          "old_api": "get_db_name",
          "new_api": null,
          "old_text": "t_ref->get_db_name()",
          "new_text": null,
          "old_line_content": "                           t_ref->get_db_name(),",
          "new_line_content": "      {",
          "content_same": false
        },
        {
          "line": 3674,
          "old_api": "get_db_name",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"info\",(\"Access denied for %s.%s. Unfulfilled access: %lu\",\n                           t_ref->get_db_name(), t_ref->get_table_name(),\n                           want_access))",
          "new_text": null,
          "old_line_content": "        DBUG_PRINT(\"info\",(\"Access denied for %s.%s. Unfulfilled access: %lu\",",
          "new_line_content": "      if (want_access & ~(aggr.cols | t_ref->grant.privilege))",
          "content_same": false
        },
        {
          "line": 3675,
          "old_api": "get_table_name",
          "new_api": null,
          "old_text": "t_ref->get_table_name()",
          "new_text": null,
          "old_line_content": "                           t_ref->get_db_name(), t_ref->get_table_name(),",
          "new_line_content": "      {",
          "content_same": false
        },
        {
          "line": 5725,
          "old_api": "equal_range",
          "new_api": null,
          "old_text": "g_dynamic_privileges_map->equal_range(key)",
          "new_text": null,
          "old_line_content": "    std::tie(it, it_end)= g_dynamic_privileges_map->equal_range(key);",
          "new_line_content": "    /* Process all global privileges */",
          "content_same": false
        },
        {
          "line": 3682,
          "old_api": "host",
          "new_api": null,
          "old_text": "sctx->host()",
          "new_text": null,
          "old_line_content": "      GRANT_TABLE *grant_table= table_hash_search(sctx->host().str,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3683,
          "old_api": "ip",
          "new_api": null,
          "old_text": "sctx->ip()",
          "new_text": null,
          "old_line_content": "                                                  sctx->ip().str,",
          "new_line_content": "    else",
          "content_same": false
        },
        {
          "line": 3684,
          "old_api": "get_db_name",
          "new_api": null,
          "old_text": "t_ref->get_db_name()",
          "new_text": null,
          "old_line_content": "                                                  t_ref->get_db_name(),",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 5733,
          "old_api": "c_str",
          "new_api": null,
          "old_text": "update_schema_privilege(thd, table, buff, 0, 0, 0, 0,\n                                  it->second.first.c_str(),\n                                  str_len,\n                                  is_grantable)",
          "new_text": null,
          "old_line_content": "      if (update_schema_privilege(thd, table, buff, 0, 0, 0, 0,",
          "new_line_content": "        is_grantable= \"YES\";",
          "content_same": false
        },
        {
          "line": 5734,
          "old_api": "c_str",
          "new_api": null,
          "old_text": "it->second.first.c_str()",
          "new_text": null,
          "old_line_content": "                                  it->second.first.c_str(),",
          "new_line_content": "      else",
          "content_same": false
        },
        {
          "line": 3691,
          "old_api": "get_table_name",
          "new_api": null,
          "old_text": "t_ref->get_table_name()",
          "new_text": null,
          "old_line_content": "        DBUG_PRINT(\"info\",(\"Table %s didn't exist in the legacy table acl cache\", t_ref->get_table_name()));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5745,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(error)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(error);",
          "new_line_content": "  } // end for each user",
          "content_same": false
        },
        {
          "line": 3707,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"info\",(\"t_ref->grant.privilege = %lu\",\n                         t_ref->grant.privilege))",
          "new_text": null,
          "old_line_content": "      DBUG_PRINT(\"info\",(\"t_ref->grant.privilege = %lu\",",
          "new_line_content": "      t_ref->grant.version= grant_version;",
          "content_same": false
        },
        {
          "line": 5756,
          "old_api": "check_access",
          "new_api": null,
          "old_text": "check_access(thd, SELECT_ACL, \"mysql\",\n                                      NULL, NULL, 1, 1)",
          "new_text": null,
          "old_line_content": "  bool no_global_access= check_access(thd, SELECT_ACL, \"mysql\",",
          "new_line_content": "  ulong want_access;",
          "content_same": false
        },
        {
          "line": 5758,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->priv_host_name()",
          "new_text": null,
          "old_line_content": "  const char *curr_host= thd->security_context()->priv_host_name();",
          "new_line_content": "  TABLE *table= tables->table;",
          "content_same": false
        },
        {
          "line": 5766,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(1)",
          "new_text": null,
          "old_line_content": "    DBUG_RETURN(1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3719,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(FALSE)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(FALSE);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 3726,
          "old_api": "get_privilege_desc",
          "new_api": null,
          "old_text": "get_privilege_desc(command, sizeof(command), want_access)",
          "new_text": null,
          "old_line_content": "    get_privilege_desc(command, sizeof(command), want_access);",
          "new_line_content": "  if (!no_errors)                               // Not a silent skip of table",
          "content_same": false
        },
        {
          "line": 3727,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(0)",
          "new_text": null,
          "old_line_content": "    my_error(ER_TABLEACCESS_DENIED_ERROR, MYF(0),",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 5774,
          "old_api": "get_host",
          "new_api": null,
          "old_text": "acl_db->host.get_host()",
          "new_text": null,
          "old_line_content": "    if (!(host=acl_db->host.get_host()))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5778,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->priv_user()",
          "new_text": null,
          "old_line_content": "        (strcmp(thd->security_context()->priv_user().str, user) ||",
          "new_line_content": "      host= \"\";",
          "content_same": false
        },
        {
          "line": 3731,
          "old_api": "get_table_name",
          "new_api": null,
          "old_text": "tl->get_table_name()",
          "new_text": null,
          "old_line_content": "             tl ? tl->get_table_name() : \"unknown\");",
          "new_line_content": "             command,",
          "content_same": false
        },
        {
          "line": 5779,
          "old_api": "my_strcasecmp",
          "new_api": null,
          "old_text": "my_strcasecmp(system_charset_info, curr_host, host)",
          "new_text": null,
          "old_line_content": "         my_strcasecmp(system_charset_info, curr_host, host)))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5789,
          "old_api": "strxmov",
          "new_api": null,
          "old_text": "strxmov(buff,\"'\",user,\"'@'\",host,\"'\",NullS)",
          "new_text": null,
          "old_line_content": "      strxmov(buff,\"'\",user,\"'@'\",host,\"'\",NullS);",
          "new_line_content": "      {",
          "content_same": false
        },
        {
          "line": 5793,
          "old_api": "STRING_WITH_LEN",
          "new_api": null,
          "old_text": "STRING_WITH_LEN(\"USAGE\")",
          "new_text": null,
          "old_line_content": "                                    0, STRING_WITH_LEN(\"USAGE\"), is_grantable))",
          "new_line_content": "      if (!(want_access & ~GRANT_ACL))",
          "content_same": false
        },
        {
          "line": 5806,
          "old_api": "update_schema_privilege",
          "new_api": null,
          "old_text": "update_schema_privilege(thd, table, buff, acl_db->db, 0, 0, 0,\n                                        command_array[cnt], command_lengths[cnt],\n                                        is_grantable)",
          "new_text": null,
          "old_line_content": "            if (update_schema_privilege(thd, table, buff, acl_db->db, 0, 0, 0,",
          "new_line_content": "        for (cnt=0, j = SELECT_ACL; j <= DB_ACLS; cnt++,j <<= 1)",
          "content_same": false
        },
        {
          "line": 3763,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"check_grant_column\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"check_grant_column\");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3764,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"enter\", (\"table: %s  want_privilege: %lu\",\n                       table_name, want_privilege))",
          "new_text": null,
          "old_line_content": "  DBUG_PRINT(\"enter\", (\"table: %s  want_privilege: %lu\",",
          "new_line_content": "  GRANT_TABLE *grant_table;",
          "content_same": false
        },
        {
          "line": 3770,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(false)",
          "new_text": null,
          "old_line_content": "    DBUG_RETURN(false);                             // Already checked",
          "new_line_content": "  // Adjust wanted privileges based on privileges granted to table:",
          "content_same": false
        },
        {
          "line": 5819,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(error)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(error);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3772,
          "old_api": "lock",
          "new_api": null,
          "old_text": "acl_cache_lock.lock()",
          "new_text": null,
          "old_line_content": "  if (!acl_cache_lock.lock())",
          "new_line_content": "  if (!want_privilege)",
          "content_same": false
        },
        {
          "line": 3778,
          "old_api": "DBUG_ASSERT",
          "new_api": null,
          "old_text": "DBUG_ASSERT(grant->grant_table == 0)",
          "new_text": null,
          "old_line_content": "    DBUG_ASSERT(grant->grant_table == 0);",
          "new_line_content": "  /* reload table if someone has modified any grants */",
          "content_same": false
        },
        {
          "line": 3780,
          "old_api": "table_and_column_acls",
          "new_api": null,
          "old_text": "sctx->table_and_column_acls({(const char *)db_name,\n                                   strlen(db_name)},\n                                  {(const char*)table_name,\n                                    strlen(table_name)})",
          "new_text": null,
          "old_line_content": "      sctx->table_and_column_acls({(const char *)db_name,",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 5828,
          "old_api": "check_access",
          "new_api": null,
          "old_text": "check_access(thd, SELECT_ACL, \"mysql\",\n                                      NULL, NULL, 1, 1)",
          "new_text": null,
          "old_line_content": "  bool no_global_access= check_access(thd, SELECT_ACL, \"mysql\",",
          "new_line_content": "  int error= 0;",
          "content_same": false
        },
        {
          "line": 5830,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->priv_host_name()",
          "new_text": null,
          "old_line_content": "  const char *curr_host= thd->security_context()->priv_host_name();",
          "new_line_content": "  TABLE *table= tables->table;",
          "content_same": false
        },
        {
          "line": 3785,
          "old_api": "find",
          "new_api": null,
          "old_text": "agg.columns.find(q_name)",
          "new_text": null,
          "old_line_content": "    Column_map::iterator it= agg.columns.find(q_name);",
          "new_line_content": "                                  {(const char*)table_name,",
          "content_same": false
        },
        {
          "line": 5835,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(1)",
          "new_text": null,
          "old_line_content": "    DBUG_RETURN(1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3790,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"info\",(\"Sufficient column privileges found for %s.%s.%s\",\n                           db_name, table_name, name))",
          "new_text": null,
          "old_line_content": "        DBUG_PRINT(\"info\",(\"Sufficient column privileges found for %s.%s.%s\",",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 3792,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(false)",
          "new_text": null,
          "old_line_content": "        DBUG_RETURN(false);",
          "new_line_content": "      {",
          "content_same": false
        },
        {
          "line": 5843,
          "old_api": "get",
          "new_api": null,
          "old_text": "key_and_value.second.get()",
          "new_text": null,
          "old_line_content": "    GRANT_TABLE *grant_table= key_and_value.second.get();",
          "new_line_content": "  for (const auto &key_and_value : *column_priv_hash)",
          "content_same": false
        },
        {
          "line": 3797,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"info\",(\"No column privileges found for %s.%s.%s\",\n                           db_name, table_name, name))",
          "new_text": null,
          "old_line_content": "       DBUG_PRINT(\"info\",(\"No column privileges found for %s.%s.%s\",",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5850,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->priv_user()",
          "new_text": null,
          "old_line_content": "        (strcmp(thd->security_context()->priv_user().str, user) ||",
          "new_line_content": "      host= \"\";",
          "content_same": false
        },
        {
          "line": 5851,
          "old_api": "my_strcasecmp",
          "new_api": null,
          "old_text": "my_strcasecmp(system_charset_info, curr_host, host)",
          "new_text": null,
          "old_line_content": "         my_strcasecmp(system_charset_info, curr_host, host)))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3806,
          "old_api": "ip",
          "new_api": null,
          "old_text": "sctx->ip()",
          "new_text": null,
          "old_line_content": "        table_hash_search(sctx->host().str, sctx->ip().str,",
          "new_line_content": "    if (grant->version != grant_version)",
          "content_same": false
        },
        {
          "line": 3807,
          "old_api": "priv_user",
          "new_api": null,
          "old_text": "sctx->priv_user()",
          "new_text": null,
          "old_line_content": "                          db_name, sctx->priv_user().str,",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 3814,
          "old_api": "column_hash_search",
          "new_api": null,
          "old_text": "column_hash_search(grant_table, name, length)",
          "new_text": null,
          "old_line_content": "    grant_column=column_hash_search(grant_table, name, length);",
          "new_line_content": "    if (!(grant_table= grant->grant_table))",
          "content_same": false
        },
        {
          "line": 5867,
          "old_api": "strxmov",
          "new_api": null,
          "old_text": "strxmov(buff, \"'\", user, \"'@'\", host, \"'\", NullS)",
          "new_text": null,
          "old_line_content": "      strxmov(buff, \"'\", user, \"'@'\", host, \"'\", NullS);",
          "new_line_content": "      if (!(table_access & GRANT_ACL))",
          "content_same": false
        },
        {
          "line": 3823,
          "old_api": "get_privilege_desc",
          "new_api": null,
          "old_text": "get_privilege_desc(command, sizeof(command), want_privilege)",
          "new_text": null,
          "old_line_content": "  get_privilege_desc(command, sizeof(command), want_privilege);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3824,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(0)",
          "new_text": null,
          "old_line_content": "  my_error(ER_COLUMNACCESS_DENIED_ERROR, MYF(0),",
          "new_line_content": "err:",
          "content_same": false
        },
        {
          "line": 5872,
          "old_api": "STRING_WITH_LEN",
          "new_api": null,
          "old_text": "STRING_WITH_LEN(\"USAGE\")",
          "new_text": null,
          "old_line_content": "                                    STRING_WITH_LEN(\"USAGE\"), is_grantable))",
          "new_line_content": "      {",
          "content_same": false
        },
        {
          "line": 5886,
          "old_api": "update_schema_privilege",
          "new_api": null,
          "old_text": "update_schema_privilege(thd, table, buff, grant_table->db,\n                                        grant_table->tname, 0, 0,\n                                        command_array[cnt],\n                                        command_lengths[cnt], is_grantable)",
          "new_text": null,
          "old_line_content": "            if (update_schema_privilege(thd, table, buff, grant_table->db,",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 5901,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(error)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(error);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3862,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"check_column_grant_in_table_ref\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"check_column_grant_in_table_ref\");",
          "new_line_content": "                                     const char *name, size_t length,",
          "content_same": false
        },
        {
          "line": 5910,
          "old_api": "check_access",
          "new_api": null,
          "old_text": "check_access(thd, SELECT_ACL, \"mysql\",\n                                      NULL, NULL, 1, 1)",
          "new_text": null,
          "old_line_content": "  bool no_global_access= check_access(thd, SELECT_ACL, \"mysql\",",
          "new_line_content": "  int error= 0;",
          "content_same": false
        },
        {
          "line": 5912,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->priv_host_name()",
          "new_text": null,
          "old_line_content": "  const char *curr_host= thd->security_context()->priv_host_name();",
          "new_line_content": "  TABLE *table= tables->table;",
          "content_same": false
        },
        {
          "line": 3867,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()",
          "new_text": null,
          "old_line_content": "                          table_ref->security_ctx : thd->security_context();",
          "new_line_content": "  const char *db_name;",
          "content_same": false
        },
        {
          "line": 3869,
          "old_api": "DBUG_ASSERT",
          "new_api": null,
          "old_text": "DBUG_ASSERT(want_privilege)",
          "new_text": null,
          "old_line_content": "  DBUG_ASSERT(want_privilege);",
          "new_line_content": "  Security_context *sctx= (table_ref->security_ctx != nullptr) ?",
          "content_same": false
        },
        {
          "line": 5917,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(1)",
          "new_text": null,
          "old_line_content": "    DBUG_RETURN(1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3871,
          "old_api": "is_derived",
          "new_api": null,
          "old_text": "table_ref->is_derived()",
          "new_text": null,
          "old_line_content": "  if (is_temporary_table(table_ref) || table_ref->is_derived() ||",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3877,
          "old_api": "is_view",
          "new_api": null,
          "old_text": "table_ref->is_view()",
          "new_text": null,
          "old_line_content": "  else if (table_ref->is_view() || table_ref->field_translation)",
          "new_line_content": "    // Tmp table,table function or derived table: no need to evaluate privileges",
          "content_same": false
        },
        {
          "line": 5925,
          "old_api": "get",
          "new_api": null,
          "old_text": "key_and_value.second.get()",
          "new_text": null,
          "old_line_content": "    GRANT_TABLE *grant_table= key_and_value.second.get();",
          "new_line_content": "  for (const auto &key_and_value : *column_priv_hash)",
          "content_same": false
        },
        {
          "line": 5932,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->priv_user()",
          "new_text": null,
          "old_line_content": "        (strcmp(thd->security_context()->priv_user().str, user) ||",
          "new_line_content": "      host= \"\";",
          "content_same": false
        },
        {
          "line": 5933,
          "old_api": "my_strcasecmp",
          "new_api": null,
          "old_text": "my_strcasecmp(system_charset_info, curr_host, host)",
          "new_text": null,
          "old_line_content": "         my_strcasecmp(system_charset_info, curr_host, host)))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3887,
          "old_api": "get_active_roles",
          "new_api": null,
          "old_text": "sctx->get_active_roles()->size()",
          "new_text": null,
          "old_line_content": "      if (sctx->get_active_roles()->size() > 0)",
          "new_line_content": "    if (table_ref->belong_to_view &&",
          "content_same": false
        },
        {
          "line": 3889,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(db_name)",
          "new_text": null,
          "old_line_content": "        view_privs= sctx->table_acl({db_name, strlen(db_name)},",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 3891,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"info\",(\"Found role privileges for %s.%s : %lu\",\n                           db_name, table_name, view_privs))",
          "new_text": null,
          "old_line_content": "        DBUG_PRINT(\"info\",(\"Found role privileges for %s.%s : %lu\",",
          "new_line_content": "      {",
          "content_same": false
        },
        {
          "line": 3895,
          "old_api": "get_column_grant",
          "new_api": null,
          "old_text": "get_column_grant(thd, grant, db_name, table_name, name)",
          "new_text": null,
          "old_line_content": "        view_privs= get_column_grant(thd, grant, db_name, table_name, name);",
          "new_line_content": "                           db_name, table_name, view_privs));",
          "content_same": false
        },
        {
          "line": 5943,
          "old_api": "strxmov",
          "new_api": null,
          "old_text": "strxmov(buff, \"'\", user, \"'@'\", host, \"'\", NullS)",
          "new_text": null,
          "old_line_content": "      strxmov(buff, \"'\", user, \"'@'\", host, \"'\", NullS);",
          "new_line_content": "        is_grantable= \"NO\";",
          "content_same": false
        },
        {
          "line": 3900,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(0)",
          "new_text": null,
          "old_line_content": "      my_error(ER_VIEW_NO_EXPLAIN, MYF(0));",
          "new_line_content": "      {",
          "content_same": false
        },
        {
          "line": 5956,
          "old_api": "get",
          "new_api": null,
          "old_text": "key_and_value.second.get()",
          "new_text": null,
          "old_line_content": "              GRANT_COLUMN *grant_column = key_and_value.second.get();",
          "new_line_content": "          {",
          "content_same": false
        },
        {
          "line": 3910,
          "old_api": "check_column_grant_in_table_ref",
          "new_api": null,
          "old_text": "check_column_grant_in_table_ref(thd, table, name, length,\n                                              want_privilege)",
          "new_text": null,
          "old_line_content": "      error|= check_column_grant_in_table_ref(thd, table, name, length,",
          "new_line_content": "    List_iterator<TABLE_LIST> it(table_ref->nested_join->join_list);",
          "content_same": false
        },
        {
          "line": 3912,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(error)",
          "new_text": null,
          "old_line_content": "    DBUG_RETURN(error);",
          "new_line_content": "    while (!error && (table= it++))",
          "content_same": false
        },
        {
          "line": 5961,
          "old_api": "data",
          "new_api": null,
          "old_text": "grant_column->column.data()",
          "new_text": null,
          "old_line_content": "                                            grant_column->column.data(),",
          "new_line_content": "              {",
          "content_same": false
        },
        {
          "line": 3920,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(db_name, table_ref->table->s->db.str)",
          "new_text": null,
          "old_line_content": "    DBUG_ASSERT(strcmp(db_name, table_ref->table->s->db.str) == 0 &&",
          "new_line_content": "    grant= &table_ref->grant;",
          "content_same": false
        },
        {
          "line": 3921,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(table_name, table_ref->table->s->table_name.str)",
          "new_text": null,
          "old_line_content": "                strcmp(table_name, table_ref->table->s->table_name.str) == 0);",
          "new_line_content": "    db_name= table_ref->db;",
          "content_same": false
        },
        {
          "line": 3926,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(true)",
          "new_text": null,
          "old_line_content": "    DBUG_RETURN(true);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5978,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(error)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(error);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 5987,
          "old_api": "check_access",
          "new_api": null,
          "old_text": "check_access(thd, UPDATE_ACL, \"mysql\", NULL, NULL, 1, 1)",
          "new_text": null,
          "old_line_content": "  return (!check_access(thd, UPDATE_ACL, \"mysql\", NULL, NULL, 1, 1) ||",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 5988,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->check_access(CREATE_USER_ACL, false)",
          "new_text": null,
          "old_line_content": "          thd->security_context()->check_access(CREATE_USER_ACL, false));",
          "new_line_content": "  if (thd->slave_thread)",
          "content_same": false
        },
        {
          "line": 3949,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()",
          "new_text": null,
          "old_line_content": "  Security_context *sctx= thd->security_context();",
          "new_line_content": "bool check_grant_all_columns(THD *thd, ulong want_access_arg,",
          "content_same": false
        },
        {
          "line": 3962,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->get_active_roles()->size()",
          "new_text": null,
          "old_line_content": "  bool has_roles= thd->security_context()->get_active_roles()->size() > 0;",
          "new_line_content": "     level.",
          "content_same": false
        },
        {
          "line": 6011,
          "old_api": "check_global_access",
          "new_api": null,
          "old_text": "check_global_access(thd, SHOW_DB_ACL)",
          "new_text": null,
          "old_line_content": "        check_global_access(thd, SHOW_DB_ACL);",
          "new_line_content": "    case SQLCOM_SHOW_DATABASES:",
          "content_same": false
        },
        {
          "line": 3966,
          "old_api": "lock",
          "new_api": null,
          "old_text": "acl_cache_lock.lock()",
          "new_text": null,
          "old_line_content": "  if (!acl_cache_lock.lock())",
          "new_line_content": "  Grant_table_aggregate aggr;",
          "content_same": false
        },
        {
          "line": 6016,
          "old_api": "DBUG_ASSERT",
          "new_api": null,
          "old_text": "DBUG_ASSERT(db != NULL)",
          "new_text": null,
          "old_line_content": "      DBUG_ASSERT(db != NULL);",
          "new_line_content": "    case SQLCOM_SHOW_EVENTS:",
          "content_same": false
        },
        {
          "line": 3971,
          "old_api": "name",
          "new_api": null,
          "old_text": "fields->name()",
          "new_text": null,
          "old_line_content": "    const char *field_name= fields->name();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3973,
          "old_api": "get_table_name",
          "new_api": null,
          "old_text": "fields->get_table_name()",
          "new_text": null,
          "old_line_content": "    if (table_name != fields->get_table_name())",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 3975,
          "old_api": "get_table_name",
          "new_api": null,
          "old_text": "fields->get_table_name()",
          "new_text": null,
          "old_line_content": "      table_name= fields->get_table_name();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3980,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(table_name)",
          "new_text": null,
          "old_line_content": "        LEX_CSTRING str_table_name= { table_name, strlen(table_name) };",
          "new_line_content": "      if (has_roles)",
          "content_same": false
        },
        {
          "line": 3981,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->table_and_column_acls(str_db_name,\n                                                             str_table_name)",
          "new_text": null,
          "old_line_content": "        aggr= thd->security_context()->table_and_column_acls(str_db_name,",
          "new_line_content": "      {",
          "content_same": false
        },
        {
          "line": 6034,
          "old_api": "is_infoschema_db",
          "new_api": null,
          "old_text": "is_infoschema_db(db)",
          "new_text": null,
          "old_line_content": "      if (! is_infoschema_db(db) &&",
          "new_line_content": "        - creating / updating / deleting events",
          "content_same": false
        },
        {
          "line": 6035,
          "old_api": "is_perfschema_db",
          "new_api": null,
          "old_text": "is_perfschema_db(db)",
          "new_text": null,
          "old_line_content": "          ! is_perfschema_db(db) &&",
          "new_line_content": "        - viewing existing events",
          "content_same": false
        },
        {
          "line": 6036,
          "old_api": "check_access",
          "new_api": null,
          "old_text": "check_access(thd, EVENT_ACL, db, NULL, NULL, 0, 0)",
          "new_text": null,
          "old_line_content": "          check_access(thd, EVENT_ACL, db, NULL, NULL, 0, 0))",
          "new_line_content": "      */",
          "content_same": false
        },
        {
          "line": 3992,
          "old_api": "grant",
          "new_api": null,
          "old_text": "fields->grant()",
          "new_text": null,
          "old_line_content": "        grant= fields->grant();",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 6045,
          "old_api": "DBUG_ASSERT",
          "new_api": null,
          "old_text": "DBUG_ASSERT(dst_db_name != NULL)",
          "new_text": null,
          "old_line_content": "      DBUG_ASSERT(dst_db_name != NULL);",
          "new_line_content": "    case SQLCOM_SHOW_TRIGGERS:",
          "content_same": false
        },
        {
          "line": 4001,
          "old_api": "ip",
          "new_api": null,
          "old_text": "sctx->ip()",
          "new_text": null,
          "old_line_content": "              table_hash_search(sctx->host().str, sctx->ip().str,",
          "new_line_content": "          if (grant->version != grant_version)",
          "content_same": false
        },
        {
          "line": 4002,
          "old_api": "priv_user",
          "new_api": null,
          "old_text": "sctx->priv_user()",
          "new_text": null,
          "old_line_content": "                                db_name, sctx->priv_user().str,",
          "new_line_content": "          {",
          "content_same": false
        },
        {
          "line": 6052,
          "old_api": "check_grant_db",
          "new_api": null,
          "old_text": "check_grant_db(thd, dst_db_name)",
          "new_text": null,
          "old_line_content": "      if (!thd->col_access && check_grant_db(thd, dst_db_name))",
          "new_line_content": "                       &thd->col_access, NULL, FALSE, FALSE))",
          "content_same": false
        },
        {
          "line": 6054,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(0)",
          "new_text": null,
          "old_line_content": "        my_error(ER_DBACCESS_DENIED_ERROR, MYF(0),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4008,
          "old_api": "DBUG_ASSERT (grant_table)",
          "new_api": null,
          "old_text": "DBUG_ASSERT (grant_table)",
          "new_text": null,
          "old_line_content": "          DBUG_ASSERT (grant_table);",
          "new_line_content": "          }",
          "content_same": false
        },
        {
          "line": 6056,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->priv_host()",
          "new_text": null,
          "old_line_content": "                 thd->security_context()->priv_host().str,",
          "new_line_content": "      {",
          "content_same": false
        },
        {
          "line": 6068,
          "old_api": "DBUG_ASSERT",
          "new_api": null,
          "old_text": "DBUG_ASSERT(dst_table)",
          "new_text": null,
          "old_line_content": "      DBUG_ASSERT(dst_table);",
          "new_line_content": "      TABLE_LIST *dst_table;",
          "content_same": false
        },
        {
          "line": 4023,
          "old_api": "find",
          "new_api": null,
          "old_text": "aggr.columns.find(q_name)",
          "new_text": null,
          "old_line_content": "            aggr.columns.find(q_name);",
          "new_line_content": "          /* Find our column */",
          "content_same": false
        },
        {
          "line": 4024,
          "old_api": "end",
          "new_api": null,
          "old_text": "aggr.columns.end()",
          "new_text": null,
          "old_line_content": "          if (it != aggr.columns.end())",
          "new_line_content": "          std::string q_name(field_name);",
          "content_same": false
        },
        {
          "line": 6072,
          "old_api": "open_temporary_tables",
          "new_api": null,
          "old_text": "open_temporary_tables(thd, dst_table)",
          "new_text": null,
          "old_line_content": "      if (open_temporary_tables(thd, dst_table))",
          "new_line_content": "      /*",
          "content_same": false
        },
        {
          "line": 4028,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"info\",\n                         (\"Sufficient column privileges found for %s.%s.%s\",\n                          db_name, table_name, field_name))",
          "new_text": null,
          "old_line_content": "              DBUG_PRINT(\"info\",",
          "new_line_content": "          {",
          "content_same": false
        },
        {
          "line": 4036,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"info\",(\"No column privileges found for %s.%s.%s\",\n                                 db_name, table_name, field_name))",
          "new_text": null,
          "old_line_content": "             DBUG_PRINT(\"info\",(\"No column privileges found for %s.%s.%s\",",
          "new_line_content": "          }",
          "content_same": false
        },
        {
          "line": 6085,
          "old_api": "check_grant",
          "new_api": null,
          "old_text": "check_grant(thd, SELECT_ACL, dst_table, TRUE, UINT_MAX, FALSE)",
          "new_text": null,
          "old_line_content": "      if (check_grant(thd, SELECT_ACL, dst_table, TRUE, UINT_MAX, FALSE))",
          "new_line_content": "        Check_grant will grant access if there is any column privileges on",
          "content_same": false
        },
        {
          "line": 4046,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(field_name)",
          "new_text": null,
          "old_line_content": "          column_hash_search(grant_table, field_name, strlen(field_name));",
          "new_line_content": "      {",
          "content_same": false
        },
        {
          "line": 4059,
          "old_api": "get_privilege_desc",
          "new_api": null,
          "old_text": "get_privilege_desc(command, sizeof(command), want_access)",
          "new_text": null,
          "old_line_content": "  get_privilege_desc(command, sizeof(command), want_access);",
          "new_line_content": "err:",
          "content_same": false
        },
        {
          "line": 4065,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(0)",
          "new_text": null,
          "old_line_content": "    my_error(ER_TABLEACCESS_DENIED_ERROR, MYF(0),",
          "new_line_content": "    privilege to see all columns.",
          "content_same": false
        },
        {
          "line": 4066,
          "old_api": "priv_user",
          "new_api": null,
          "old_text": "sctx->priv_user()",
          "new_text": null,
          "old_line_content": "             command, sctx->priv_user().str,",
          "new_line_content": "  */",
          "content_same": false
        },
        {
          "line": 4067,
          "old_api": "host_or_ip",
          "new_api": null,
          "old_text": "sctx->host_or_ip()",
          "new_text": null,
          "old_line_content": "             sctx->host_or_ip().str, table_name);",
          "new_line_content": "  if (using_column_privileges)",
          "content_same": false
        },
        {
          "line": 4071,
          "old_api": "priv_user",
          "new_api": null,
          "old_text": "sctx->priv_user()",
          "new_text": null,
          "old_line_content": "             sctx->priv_user().str,",
          "new_line_content": "  else",
          "content_same": false
        },
        {
          "line": 4073,
          "old_api": "name",
          "new_api": null,
          "old_text": "fields->name()",
          "new_text": null,
          "old_line_content": "             fields->name(),",
          "new_line_content": "             command,",
          "content_same": false
        },
        {
          "line": 6121,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"check_global_access\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"check_global_access\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6123,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()->check_access(want_access, true)",
          "new_text": null,
          "old_line_content": "  if (thd->security_context()->check_access(want_access, true))",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 6125,
          "old_api": "get_privilege_desc",
          "new_api": null,
          "old_text": "get_privilege_desc(command, sizeof(command), want_access)",
          "new_text": null,
          "old_line_content": "  get_privilege_desc(command, sizeof(command), want_access);",
          "new_line_content": "  char command[128];",
          "content_same": false
        },
        {
          "line": 4084,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"check_grant_db_routine\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"check_grant_db_routine\");",
          "new_line_content": "   malloc_unordered_multimap<std::string, unique_ptr_destroy_only<GRANT_NAME>>",
          "content_same": false
        },
        {
          "line": 4085,
          "old_api": "security_context",
          "new_api": null,
          "old_text": "thd->security_context()",
          "new_text": null,
          "old_line_content": "  Security_context *sctx= thd->security_context();",
          "new_line_content": "     *hash)",
          "content_same": false
        },
        {
          "line": 4086,
          "old_api": "assert_acl_cache_read_lock",
          "new_api": null,
          "old_text": "assert_acl_cache_read_lock(thd)",
          "new_text": null,
          "old_line_content": "  DBUG_ASSERT(assert_acl_cache_read_lock(thd));",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4090,
          "old_api": "DBUG_PRINT",
          "new_api": null,
          "old_text": "DBUG_PRINT(\"info\",(\"Using roles Acl_map to detect schema level privileges\"))",
          "new_text": null,
          "old_line_content": "    DBUG_PRINT(\"info\",(\"Using roles Acl_map to detect schema level privileges\"));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4092,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(acl == 0)",
          "new_text": null,
          "old_line_content": "    DBUG_RETURN(acl == 0);",
          "new_line_content": "  {",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 274,
      "total_additions": 584,
      "total_deletions": 583,
      "total_api_changes": 1441
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 5,
        "api_related_lines": 1441,
        "non_api_lines": 1,
        "non_api_line_numbers": [
          3580
        ]
      }
    },
    "api_calls_before": 2248,
    "api_calls_after": 2250,
    "diff_info": {
      "added_lines": 5,
      "removed_lines": 2,
      "total_diff_lines": 19
    }
  }
}
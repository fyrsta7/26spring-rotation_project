{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/8a5c24536c774789a956db3a91782206c4e85b7b",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/8a5c24536c774789a956db3a91782206c4e85b7b/before.cc",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/8a5c24536c774789a956db3a91782206c4e85b7b/after.cc",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/8a5c24536c774789a956db3a91782206c4e85b7b/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": true,
    "api_changes": {
      "replacements": [
        {
          "line": 638,
          "old_api": "find_current_row",
          "new_api": "DBUG_RETURN",
          "old_text": "find_current_row(buf)",
          "new_text": "DBUG_RETURN(HA_ERR_END_OF_FILE)",
          "old_line_content": "  if (HA_ERR_END_OF_FILE == find_current_row(buf) ) ",
          "new_line_content": "    DBUG_RETURN(HA_ERR_END_OF_FILE);",
          "content_same": false
        },
        {
          "line": 639,
          "old_api": "DBUG_RETURN",
          "new_api": "find_current_row",
          "old_text": "DBUG_RETURN(HA_ERR_END_OF_FILE)",
          "new_text": "find_current_row(buf)",
          "old_line_content": "    DBUG_RETURN(HA_ERR_END_OF_FILE);",
          "new_line_content": "  if (HA_ERR_END_OF_FILE == find_current_row(buf) ) ",
          "content_same": false
        },
        {
          "line": 657,
          "old_api": "ha_store_ptr",
          "new_api": "DBUG_ENTER",
          "old_text": "ha_store_ptr(ref, ref_length, current_position)",
          "new_text": "DBUG_ENTER(\"ha_tina::position\")",
          "old_line_content": "  ha_store_ptr(ref, ref_length, current_position);",
          "new_line_content": "  DBUG_ENTER(\"ha_tina::position\");",
          "content_same": false
        },
        {
          "line": 670,
          "old_api": "statistic_increment",
          "new_api": "DBUG_ENTER",
          "old_text": "statistic_increment(ha_read_rnd_count,&LOCK_status)",
          "new_text": "DBUG_ENTER(\"ha_tina::rnd_pos\")",
          "old_line_content": "  statistic_increment(ha_read_rnd_count,&LOCK_status);",
          "new_line_content": "  DBUG_ENTER(\"ha_tina::rnd_pos\");",
          "content_same": false
        },
        {
          "line": 671,
          "old_api": "ha_get_ptr",
          "new_api": "statistic_increment",
          "old_text": "ha_get_ptr(pos,ref_length)",
          "new_text": "statistic_increment(ha_read_rnd_count,&LOCK_status)",
          "old_line_content": "  current_position= ha_get_ptr(pos,ref_length);",
          "new_line_content": "  statistic_increment(ha_read_rnd_count,&LOCK_status);",
          "content_same": false
        },
        {
          "line": 672,
          "old_api": "find_current_row",
          "new_api": "ha_get_ptr",
          "old_text": "find_current_row(buf)",
          "new_text": "ha_get_ptr(pos,ref_length)",
          "old_line_content": "  DBUG_RETURN(find_current_row(buf));",
          "new_line_content": "  current_position= ha_get_ptr(pos,ref_length);",
          "content_same": false
        },
        {
          "line": 697,
          "old_api": "DBUG_RETURN",
          "new_api": "DBUG_ENTER",
          "old_text": "DBUG_RETURN(0)",
          "new_text": "DBUG_ENTER(\"ha_tina::extra\")",
          "old_line_content": "  DBUG_RETURN(0);",
          "new_line_content": "  DBUG_ENTER(\"ha_tina::extra\");",
          "content_same": false
        },
        {
          "line": 706,
          "old_api": "ha_tina::extra(HA_EXTRA_RESET)",
          "new_api": "DBUG_ENTER",
          "old_text": "ha_tina::extra(HA_EXTRA_RESET)",
          "new_text": "DBUG_ENTER(\"ha_tina::reset\")",
          "old_line_content": "  ha_tina::extra(HA_EXTRA_RESET);",
          "new_line_content": "  DBUG_ENTER(\"ha_tina::reset\");",
          "content_same": false
        },
        {
          "line": 707,
          "old_api": "DBUG_RETURN",
          "new_api": "ha_tina::extra(HA_EXTRA_RESET)",
          "old_text": "DBUG_RETURN(0)",
          "new_text": "ha_tina::extra(HA_EXTRA_RESET)",
          "old_line_content": "  DBUG_RETURN(0);",
          "new_line_content": "  ha_tina::extra(HA_EXTRA_RESET);",
          "content_same": false
        },
        {
          "line": 730,
          "old_api": "DBUG_RETURN",
          "new_api": "get_mmap",
          "old_text": "DBUG_RETURN(-1)",
          "new_text": "get_mmap(share, 1)",
          "old_line_content": "      DBUG_RETURN(-1);",
          "new_line_content": "    if (get_mmap(share, 1) > 0) ",
          "content_same": false
        },
        {
          "line": 753,
          "old_api": "DBUG_RETURN",
          "new_api": "MYF",
          "old_text": "DBUG_RETURN(-1)",
          "new_text": "MYF(MY_WME)",
          "old_line_content": "      DBUG_RETURN(-1);",
          "new_line_content": "    if (my_chsize(share->data_file, length, 0, MYF(MY_WME)))",
          "content_same": false
        },
        {
          "line": 756,
          "old_api": "DBUG_RETURN",
          "new_api": "munmap",
          "old_text": "DBUG_RETURN(-1)",
          "new_text": "munmap(share->mapped_file, length)",
          "old_line_content": "      DBUG_RETURN(-1);",
          "new_line_content": "    if (munmap(share->mapped_file, length))",
          "content_same": false
        },
        {
          "line": 761,
          "old_api": "DBUG_RETURN",
          "new_api": "get_mmap",
          "old_text": "DBUG_RETURN(-1)",
          "new_text": "get_mmap(share, 0)",
          "old_line_content": "      DBUG_RETURN(-1);",
          "new_line_content": "    if (get_mmap(share, 0) > 0) ",
          "content_same": false
        },
        {
          "line": 777,
          "old_api": "DBUG_RETURN",
          "new_api": "get_mmap",
          "old_text": "DBUG_RETURN(-1)",
          "new_text": "get_mmap(share, 0)",
          "old_line_content": "    DBUG_RETURN(-1);",
          "new_line_content": "  if (get_mmap(share, 0) > 0) ",
          "content_same": false
        },
        {
          "line": 788,
          "old_api": "DBUG_RETURN",
          "new_api": "DBUG_ENTER",
          "old_text": "DBUG_RETURN(0)",
          "new_text": "DBUG_ENTER(\"ha_tina::external_lock\")",
          "old_line_content": "  DBUG_RETURN(0);          // No external locking",
          "new_line_content": "  DBUG_ENTER(\"ha_tina::external_lock\");",
          "content_same": false
        },
        {
          "line": 816,
          "old_api": "DBUG_RETURN",
          "new_api": "DBUG_ENTER",
          "old_text": "DBUG_RETURN(records)",
          "new_text": "DBUG_ENTER(\"ha_tina::records_in_range \")",
          "old_line_content": "  DBUG_RETURN(records); // Good guess",
          "new_line_content": "  DBUG_ENTER(\"ha_tina::records_in_range \");",
          "content_same": false
        },
        {
          "line": 832,
          "old_api": "MYF",
          "new_api": "fn_format",
          "old_text": "MYF(MY_WME)",
          "new_text": "fn_format(name_buff,name,\"\",\".CSV\",MY_REPLACE_EXT|MY_UNPACK_FILENAME)",
          "old_line_content": "                              O_RDWR | O_TRUNC,MYF(MY_WME))) < 0)",
          "new_line_content": "  if ((create_file= my_create(fn_format(name_buff,name,\"\",\".CSV\",MY_REPLACE_EXT|MY_UNPACK_FILENAME),0,",
          "content_same": false
        },
        {
          "line": 833,
          "old_api": "DBUG_RETURN",
          "new_api": "MYF",
          "old_text": "DBUG_RETURN(-1)",
          "new_text": "MYF(MY_WME)",
          "old_line_content": "    DBUG_RETURN(-1);",
          "new_line_content": "                              O_RDWR | O_TRUNC,MYF(MY_WME))) < 0)",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 640,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(HA_ERR_END_OF_FILE)",
          "old_line_content": "",
          "new_line_content": "    DBUG_RETURN(HA_ERR_END_OF_FILE);",
          "content_same": false
        },
        {
          "line": 643,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(0)",
          "old_line_content": "}",
          "new_line_content": "  DBUG_RETURN(0);",
          "content_same": false
        },
        {
          "line": 773,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"ha_tina::delete_all_rows\")",
          "old_line_content": "",
          "new_line_content": "  DBUG_ENTER(\"ha_tina::delete_all_rows\");",
          "content_same": false
        },
        {
          "line": 775,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(MY_WME)",
          "old_line_content": "",
          "new_line_content": "  int rc= my_chsize(share->data_file, 0, 0, MYF(MY_WME));",
          "content_same": false
        },
        {
          "line": 778,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(-1)",
          "old_line_content": "",
          "new_line_content": "    DBUG_RETURN(-1);",
          "content_same": false
        },
        {
          "line": 780,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(rc)",
          "old_line_content": "}",
          "new_line_content": "  DBUG_RETURN(rc);",
          "content_same": false
        },
        {
          "line": 658,
          "old_api": null,
          "new_api": "ha_store_ptr",
          "old_text": null,
          "new_text": "ha_store_ptr(ref, ref_length, current_position)",
          "old_line_content": "  DBUG_VOID_RETURN;",
          "new_line_content": "  ha_store_ptr(ref, ref_length, current_position);",
          "content_same": false
        },
        {
          "line": 789,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(0)",
          "old_line_content": "}",
          "new_line_content": "  DBUG_RETURN(0);          // No external locking",
          "content_same": false
        },
        {
          "line": 673,
          "old_api": null,
          "new_api": "find_current_row",
          "old_text": null,
          "new_text": "find_current_row(buf)",
          "old_line_content": "}",
          "new_line_content": "  DBUG_RETURN(find_current_row(buf));",
          "content_same": false
        },
        {
          "line": 683,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"ha_tina::info\")",
          "old_line_content": "  /* This is a lie, but you don't want the optimizer to see zero or 1 */",
          "new_line_content": "  DBUG_ENTER(\"ha_tina::info\");",
          "content_same": false
        },
        {
          "line": 817,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(records)",
          "old_line_content": "}",
          "new_line_content": "  DBUG_RETURN(records); // Good guess",
          "content_same": false
        },
        {
          "line": 698,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(0)",
          "old_line_content": "}",
          "new_line_content": "  DBUG_RETURN(0);",
          "content_same": false
        },
        {
          "line": 830,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"ha_tina::create\")",
          "old_line_content": "",
          "new_line_content": "  DBUG_ENTER(\"ha_tina::create\");",
          "content_same": false
        },
        {
          "line": 834,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(-1)",
          "old_line_content": "",
          "new_line_content": "    DBUG_RETURN(-1);",
          "content_same": false
        },
        {
          "line": 708,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(0)",
          "old_line_content": "}",
          "new_line_content": "  DBUG_RETURN(0);",
          "content_same": false
        },
        {
          "line": 836,
          "old_api": null,
          "new_api": "MYF",
          "old_text": null,
          "new_text": "MYF(0)",
          "old_line_content": "",
          "new_line_content": "  my_close(create_file,MYF(0));",
          "content_same": false
        },
        {
          "line": 838,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(0)",
          "old_line_content": "}",
          "new_line_content": "  DBUG_RETURN(0);",
          "content_same": false
        },
        {
          "line": 718,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"ha_tina::rnd_end\")",
          "old_line_content": "",
          "new_line_content": "  DBUG_ENTER(\"ha_tina::rnd_end\");",
          "content_same": false
        },
        {
          "line": 731,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(-1)",
          "old_line_content": "    length= share->file_stat.st_size;",
          "new_line_content": "      DBUG_RETURN(-1);",
          "content_same": false
        },
        {
          "line": 739,
          "old_api": null,
          "new_api": "qsort",
          "old_text": null,
          "new_text": "qsort(chain, (size_t)(chain_ptr - chain), sizeof(tina_set), (qsort_cmp)sort_set)",
          "old_line_content": "    for (ptr= chain; ptr < chain_ptr; ptr++)",
          "new_line_content": "    qsort(chain, (size_t)(chain_ptr - chain), sizeof(tina_set), (qsort_cmp)sort_set);",
          "content_same": false
        },
        {
          "line": 613,
          "old_api": null,
          "new_api": "madvise",
          "old_text": null,
          "new_text": "madvise(share->mapped_file,share->file_stat.st_size,MADV_SEQUENTIAL)",
          "old_line_content": "#endif",
          "new_line_content": "    (void)madvise(share->mapped_file,share->file_stat.st_size,MADV_SEQUENTIAL);",
          "content_same": false
        },
        {
          "line": 616,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(0)",
          "old_line_content": "}",
          "new_line_content": "  DBUG_RETURN(0);",
          "content_same": false
        },
        {
          "line": 744,
          "old_api": null,
          "new_api": "memmove",
          "old_text": null,
          "new_text": "memmove(share->mapped_file + ptr->begin, share->mapped_file + ptr->end,\n                length - (size_t)ptr->end)",
          "old_line_content": "                length - (size_t)ptr->end);",
          "new_line_content": "        memmove(share->mapped_file + ptr->begin, share->mapped_file + ptr->end,",
          "content_same": false
        },
        {
          "line": 747,
          "old_api": null,
          "new_api": "memmove",
          "old_text": null,
          "new_text": "memmove((caddr_t)share->mapped_file + ptr->begin, (caddr_t)share->mapped_file + ptr->end,\n                (size_t)((ptr++)->begin - ptr->end))",
          "old_line_content": "                (size_t)((ptr++)->begin - ptr->end));",
          "new_line_content": "        memmove((caddr_t)share->mapped_file + ptr->begin, (caddr_t)share->mapped_file + ptr->end,",
          "content_same": false
        },
        {
          "line": 754,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(-1)",
          "old_line_content": "",
          "new_line_content": "      DBUG_RETURN(-1);",
          "content_same": false
        },
        {
          "line": 757,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(-1)",
          "old_line_content": "",
          "new_line_content": "      DBUG_RETURN(-1);",
          "content_same": false
        },
        {
          "line": 634,
          "old_api": null,
          "new_api": "statistic_increment",
          "old_text": null,
          "new_text": "statistic_increment(ha_read_rnd_next_count,&LOCK_status)",
          "old_line_content": "",
          "new_line_content": "  statistic_increment(ha_read_rnd_next_count,&LOCK_status);",
          "content_same": false
        },
        {
          "line": 632,
          "old_api": null,
          "new_api": "DBUG_ENTER",
          "old_text": null,
          "new_text": "DBUG_ENTER(\"ha_tina::rnd_next\")",
          "old_line_content": "",
          "new_line_content": "  DBUG_ENTER(\"ha_tina::rnd_next\");",
          "content_same": false
        },
        {
          "line": 762,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(-1)",
          "old_line_content": "  }",
          "new_line_content": "      DBUG_RETURN(-1);",
          "content_same": false
        },
        {
          "line": 765,
          "old_api": null,
          "new_api": "DBUG_RETURN",
          "old_text": null,
          "new_text": "DBUG_RETURN(0)",
          "old_line_content": "}",
          "new_line_content": "  DBUG_RETURN(0);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 642,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(0)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(0);",
          "new_line_content": "  records++;",
          "content_same": false
        },
        {
          "line": 772,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"ha_tina::delete_all_rows\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"ha_tina::delete_all_rows\");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 774,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(MY_WME)",
          "new_text": null,
          "old_line_content": "  int rc= my_chsize(share->data_file, 0, 0, MYF(MY_WME));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 776,
          "old_api": "get_mmap",
          "new_api": null,
          "old_text": "get_mmap(share, 0)",
          "new_text": null,
          "old_line_content": "  if (get_mmap(share, 0) > 0) ",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 779,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(rc)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(rc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 656,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"ha_tina::position\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"ha_tina::position\");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 787,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"ha_tina::external_lock\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"ha_tina::external_lock\");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 669,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"ha_tina::rnd_pos\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"ha_tina::rnd_pos\");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 682,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"ha_tina::info\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"ha_tina::info\");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 815,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"ha_tina::records_in_range \")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"ha_tina::records_in_range \");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 696,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"ha_tina::extra\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"ha_tina::extra\");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 829,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"ha_tina::create\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"ha_tina::create\");",
          "new_line_content": "  File create_file;",
          "content_same": false
        },
        {
          "line": 831,
          "old_api": "fn_format",
          "new_api": null,
          "old_text": "fn_format(name_buff,name,\"\",\".CSV\",MY_REPLACE_EXT|MY_UNPACK_FILENAME)",
          "new_text": null,
          "old_line_content": "  if ((create_file= my_create(fn_format(name_buff,name,\"\",\".CSV\",MY_REPLACE_EXT|MY_UNPACK_FILENAME),0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 705,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"ha_tina::reset\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"ha_tina::reset\");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 835,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(0)",
          "new_text": null,
          "old_line_content": "  my_close(create_file,MYF(0));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 837,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(0)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 717,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"ha_tina::rnd_end\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"ha_tina::rnd_end\");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 729,
          "old_api": "get_mmap",
          "new_api": null,
          "old_text": "get_mmap(share, 1)",
          "new_text": null,
          "old_line_content": "    if (get_mmap(share, 1) > 0) ",
          "new_line_content": "    */",
          "content_same": false
        },
        {
          "line": 738,
          "old_api": "qsort",
          "new_api": null,
          "old_text": "qsort(chain, (size_t)(chain_ptr - chain), sizeof(tina_set), (qsort_cmp)sort_set)",
          "new_text": null,
          "old_line_content": "    qsort(chain, (size_t)(chain_ptr - chain), sizeof(tina_set), (qsort_cmp)sort_set);",
          "new_line_content": "    */",
          "content_same": false
        },
        {
          "line": 612,
          "old_api": "madvise",
          "new_api": null,
          "old_text": "madvise(share->mapped_file,share->file_stat.st_size,MADV_SEQUENTIAL)",
          "new_text": null,
          "old_line_content": "  (void)madvise(share->mapped_file,share->file_stat.st_size,MADV_SEQUENTIAL);",
          "new_line_content": "  if (scan)",
          "content_same": false
        },
        {
          "line": 615,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(0)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 743,
          "old_api": "memmove",
          "new_api": null,
          "old_text": "memmove(share->mapped_file + ptr->begin, share->mapped_file + ptr->end,\n                length - (size_t)ptr->end)",
          "new_text": null,
          "old_line_content": "        memmove(share->mapped_file + ptr->begin, share->mapped_file + ptr->end,",
          "new_line_content": "      if (ptr+1 == chain_ptr)",
          "content_same": false
        },
        {
          "line": 746,
          "old_api": "memmove",
          "new_api": null,
          "old_text": "memmove((caddr_t)share->mapped_file + ptr->begin, (caddr_t)share->mapped_file + ptr->end,\n                (size_t)((ptr++)->begin - ptr->end))",
          "new_text": null,
          "old_line_content": "        memmove((caddr_t)share->mapped_file + ptr->begin, (caddr_t)share->mapped_file + ptr->end,",
          "new_line_content": "      else",
          "content_same": false
        },
        {
          "line": 752,
          "old_api": "MYF",
          "new_api": null,
          "old_text": "MYF(MY_WME)",
          "new_text": null,
          "old_line_content": "    if (my_chsize(share->data_file, length, 0, MYF(MY_WME)))",
          "new_line_content": "    /* Truncate the file to the new size */",
          "content_same": false
        },
        {
          "line": 755,
          "old_api": "munmap",
          "new_api": null,
          "old_text": "munmap(share->mapped_file, length)",
          "new_text": null,
          "old_line_content": "    if (munmap(share->mapped_file, length))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 631,
          "old_api": "DBUG_ENTER",
          "new_api": null,
          "old_text": "DBUG_ENTER(\"ha_tina::rnd_next\")",
          "new_text": null,
          "old_line_content": "  DBUG_ENTER(\"ha_tina::rnd_next\");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 760,
          "old_api": "get_mmap",
          "new_api": null,
          "old_text": "get_mmap(share, 0)",
          "new_text": null,
          "old_line_content": "    if (get_mmap(share, 0) > 0) ",
          "new_line_content": "    share->mapped_file= NULL;",
          "content_same": false
        },
        {
          "line": 633,
          "old_api": "statistic_increment",
          "new_api": null,
          "old_text": "statistic_increment(ha_read_rnd_next_count,&LOCK_status)",
          "new_text": null,
          "old_line_content": "  statistic_increment(ha_read_rnd_next_count,&LOCK_status);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 764,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(0)",
          "new_text": null,
          "old_line_content": "  DBUG_RETURN(0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 637,
          "old_api": "DBUG_RETURN",
          "new_api": null,
          "old_text": "DBUG_RETURN(HA_ERR_END_OF_FILE)",
          "new_text": null,
          "old_line_content": "    DBUG_RETURN(HA_ERR_END_OF_FILE);",
          "new_line_content": "  if (!share->mapped_file) ",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 18,
      "total_additions": 30,
      "total_deletions": 30,
      "total_api_changes": 78
    },
    "non_api_changes": {
      "has_non_api_changes": false,
      "evidence": {
        "total_diff_lines": 2,
        "api_related_lines": 78,
        "non_api_lines": 0,
        "non_api_line_numbers": []
      }
    },
    "api_calls_before": 201,
    "api_calls_after": 201,
    "diff_info": {
      "added_lines": 2,
      "removed_lines": 1,
      "total_diff_lines": 15
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/8bc2fbb0f8e60d18bf3b4c0b131efbc781f1b4e3",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/8bc2fbb0f8e60d18bf3b4c0b131efbc781f1b4e3/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/8bc2fbb0f8e60d18bf3b4c0b131efbc781f1b4e3/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/8bc2fbb0f8e60d18bf3b4c0b131efbc781f1b4e3/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 3236,
          "old_api": "dtuple_contains_null",
          "new_api": "dict_index_get_n_unique",
          "old_text": "dtuple_contains_null(search_tuple)",
          "new_text": "dict_index_get_n_unique(index)",
          "old_line_content": "\t\t || !dtuple_contains_null(search_tuple))) {",
          "new_line_content": "\t\t\t\t\t== dict_index_get_n_unique(index)",
          "content_same": false
        },
        {
          "line": 3410,
          "old_api": "que_thr_move_to_run_state_for_mysql",
          "new_api": "que_fork_get_first_thr",
          "old_text": "que_thr_move_to_run_state_for_mysql(thr, trx)",
          "new_text": "que_fork_get_first_thr(prebuilt->sel_graph)",
          "old_line_content": "\tque_thr_move_to_run_state_for_mysql(thr, trx);",
          "new_line_content": "\tthr = que_fork_get_first_thr(prebuilt->sel_graph);",
          "content_same": false
        },
        {
          "line": 3412,
          "old_api": "dict_table_get_first_index",
          "new_api": "que_thr_move_to_run_state_for_mysql",
          "old_text": "dict_table_get_first_index(index->table)",
          "new_text": "que_thr_move_to_run_state_for_mysql(thr, trx)",
          "old_line_content": "\tclust_index = dict_table_get_first_index(index->table);",
          "new_line_content": "\tque_thr_move_to_run_state_for_mysql(thr, trx);",
          "content_same": false
        },
        {
          "line": 3414,
          "old_api": "UNIV_LIKELY",
          "new_api": "dict_table_get_first_index",
          "old_text": "UNIV_LIKELY(direction != 0)",
          "new_text": "dict_table_get_first_index(index->table)",
          "old_line_content": "\tif (UNIV_LIKELY(direction != 0)) {",
          "new_line_content": "\tclust_index = dict_table_get_first_index(index->table);",
          "content_same": false
        },
        {
          "line": 3423,
          "old_api": "btr_pcur_open_with_no_init",
          "new_api": "dtuple_get_n_fields",
          "old_text": "btr_pcur_open_with_no_init(index, search_tuple, mode,\n\t\t\t\t\tBTR_SEARCH_LEAF,\n\t\t\t\t\tpcur, 0, &mtr)",
          "new_text": "dtuple_get_n_fields(search_tuple)",
          "old_line_content": "\t\tbtr_pcur_open_with_no_init(index, search_tuple, mode,",
          "new_line_content": "\t} else if (dtuple_get_n_fields(search_tuple) > 0) {",
          "content_same": false
        },
        {
          "line": 3449,
          "old_api": "ut_a",
          "new_api": "trx_print",
          "old_text": "ut_a(0)",
          "new_text": "trx_print(stderr, trx)",
          "old_line_content": "\t\t\tut_a(0);",
          "new_line_content": "\t\t\ttrx_print(stderr, trx);",
          "content_same": false
        },
        {
          "line": 3512,
          "old_api": "sel_set_rec_lock",
          "new_api": "rec_get_offsets",
          "old_text": "sel_set_rec_lock(rec, index, offsets,\n\t\t\t\t\tprebuilt->select_lock_type,\n\t\t\t\t\tLOCK_ORDINARY, thr)",
          "new_text": "rec_get_offsets(rec, index, offsets,\n\t\t\t\t\tULINT_UNDEFINED, &heap)",
          "old_line_content": "\t\t\terr = sel_set_rec_lock(rec, index, offsets,",
          "new_line_content": "\t\t\toffsets = rec_get_offsets(rec, index, offsets,",
          "content_same": false
        },
        {
          "line": 3533,
          "old_api": "UNIV_UNLIKELY",
          "new_api": "page_rec_is_comp",
          "old_text": "UNIV_UNLIKELY(next_offs < PAGE_NEW_SUPREMUM)",
          "new_text": "page_rec_is_comp(rec)",
          "old_line_content": "\t\tif (UNIV_UNLIKELY(next_offs < PAGE_NEW_SUPREMUM)) {",
          "new_line_content": "\tif (page_rec_is_comp(rec)) {",
          "content_same": false
        },
        {
          "line": 3547,
          "old_api": "fprintf",
          "new_api": "ut_print_timestamp",
          "old_text": "fprintf(stderr,\n\"\\nInnoDB: rec address %p, first buffer frame %p\\n\"\n\"InnoDB: buffer pool high end %p, buf block fix count %lu\\n\",\n\t\t\t\trec, buf_pool->frame_zero,\n\t\t\t\tbuf_pool->high_end,\n\t\t\t\t(ulong)buf_block_align(rec)->buf_fix_count)",
          "new_text": "ut_print_timestamp(stderr)",
          "old_line_content": "\t\t\tfprintf(stderr,",
          "new_line_content": "\t\t\tut_print_timestamp(stderr);",
          "content_same": false
        },
        {
          "line": 3558,
          "old_api": "buf_frame_get_page_no",
          "new_api": "ut_align_offset",
          "old_text": "buf_frame_get_page_no(rec)",
          "new_text": "ut_align_offset(rec, UNIV_PAGE_SIZE)",
          "old_line_content": "\t\t\t\t(ulong) buf_frame_get_page_no(rec));",
          "new_line_content": "\t\t\t\t(ulong) ut_align_offset(rec, UNIV_PAGE_SIZE),",
          "content_same": false
        },
        {
          "line": 3560,
          "old_api": "fputs",
          "new_api": "buf_frame_get_page_no",
          "old_text": "fputs(\". Run CHECK TABLE. You may need to\\n\"\n\"InnoDB: restore from a backup, or dump + drop + reimport the table.\\n\",\n\t\t\t      stderr)",
          "new_text": "buf_frame_get_page_no(rec)",
          "old_line_content": "\t\t\tfputs(\". Run CHECK TABLE. You may need to\\n\"",
          "new_line_content": "\t\t\t\t(ulong) buf_frame_get_page_no(rec));",
          "content_same": false
        },
        {
          "line": 3576,
          "old_api": "buf_frame_get_page_no",
          "new_api": "ut_align_offset",
          "old_text": "buf_frame_get_page_no(rec)",
          "new_text": "ut_align_offset(rec, UNIV_PAGE_SIZE)",
          "old_line_content": "\t\t\t   (ulong) buf_frame_get_page_no(rec));",
          "new_line_content": "\t\t\t   (ulong) ut_align_offset(rec, UNIV_PAGE_SIZE),",
          "content_same": false
        },
        {
          "line": 3578,
          "old_api": "fputs",
          "new_api": "buf_frame_get_page_no",
          "old_text": "fputs(\". We try to skip the rest of the page.\\n\",\n\t\t\t\tstderr)",
          "new_text": "buf_frame_get_page_no(rec)",
          "old_line_content": "\t\t\tfputs(\". We try to skip the rest of the page.\\n\",",
          "new_line_content": "\t\t\t   (ulong) buf_frame_get_page_no(rec));",
          "content_same": false
        },
        {
          "line": 3589,
          "old_api": "UNIV_UNLIKELY",
          "new_api": "rec_get_offsets",
          "old_text": "UNIV_UNLIKELY(srv_force_recovery > 0)",
          "new_text": "rec_get_offsets(rec, index, offsets, ULINT_UNDEFINED, &heap)",
          "old_line_content": "\tif (UNIV_UNLIKELY(srv_force_recovery > 0)) {",
          "new_line_content": "\toffsets = rec_get_offsets(rec, index, offsets, ULINT_UNDEFINED, &heap);",
          "content_same": false
        },
        {
          "line": 3591,
          "old_api": "btr_index_rec_validate",
          "new_api": "UNIV_UNLIKELY",
          "old_text": "btr_index_rec_validate(rec, index, FALSE)",
          "new_text": "UNIV_UNLIKELY(srv_force_recovery > 0)",
          "old_line_content": "\t\t|| !btr_index_rec_validate(rec, index, FALSE)) {",
          "new_line_content": "\tif (UNIV_UNLIKELY(srv_force_recovery > 0)) {",
          "content_same": false
        },
        {
          "line": 3592,
          "old_api": "fprintf",
          "new_api": "rec_validate",
          "old_text": "fprintf(stderr,\n\"InnoDB: Index corruption: rec offs %lu next offs %lu, page no %lu,\\n\"\n\"InnoDB: \",\n\t\t\t   (ulong) ut_align_offset(rec, UNIV_PAGE_SIZE),\n\t\t\t   (ulong) next_offs,\n\t\t\t   (ulong) buf_frame_get_page_no(rec))",
          "new_text": "rec_validate(rec, offsets)",
          "old_line_content": "\t\t\tfprintf(stderr,",
          "new_line_content": "\t\tif (!rec_validate(rec, offsets)",
          "content_same": false
        },
        {
          "line": 3597,
          "old_api": "buf_frame_get_page_no",
          "new_api": "ut_align_offset",
          "old_text": "buf_frame_get_page_no(rec)",
          "new_text": "ut_align_offset(rec, UNIV_PAGE_SIZE)",
          "old_line_content": "\t\t\t   (ulong) buf_frame_get_page_no(rec));",
          "new_line_content": "\t\t\t   (ulong) ut_align_offset(rec, UNIV_PAGE_SIZE),",
          "content_same": false
        },
        {
          "line": 3599,
          "old_api": "fputs",
          "new_api": "buf_frame_get_page_no",
          "old_text": "fputs(\". We try to skip the record.\\n\",\n\t\t\t\tstderr)",
          "new_text": "buf_frame_get_page_no(rec)",
          "old_line_content": "\t\t\tfputs(\". We try to skip the record.\\n\",",
          "new_line_content": "\t\t\t   (ulong) buf_frame_get_page_no(rec));",
          "content_same": false
        },
        {
          "line": 3721,
          "old_api": "cmp_dtuple_rec",
          "new_api": "dtuple_get_n_fields_cmp",
          "old_text": "cmp_dtuple_rec(search_tuple, rec, offsets)",
          "new_text": "dtuple_get_n_fields_cmp(search_tuple)",
          "old_line_content": "\t\t    && 0 == cmp_dtuple_rec(search_tuple, rec, offsets)) {",
          "new_line_content": "\t\t    && dtuple_get_n_fields_cmp(search_tuple)",
          "content_same": false
        },
        {
          "line": 3871,
          "old_api": "rec_offs_validate",
          "new_api": "rec_get_offsets",
          "old_text": "rec_offs_validate(rec,\n\t\t\t\trec == clust_rec ? clust_index : index,\n\t\t\t\toffsets)",
          "new_text": "rec_get_offsets(rec, index, offsets,\n\t\t\t\t\t\tULINT_UNDEFINED, &heap)",
          "old_line_content": "\tut_ad(rec_offs_validate(rec,",
          "new_line_content": "\t\t\toffsets = rec_get_offsets(rec, index, offsets,",
          "content_same": false
        },
        {
          "line": 3957,
          "old_api": "btr_pcur_store_position",
          "new_api": "UNIV_UNLIKELY",
          "old_text": "btr_pcur_store_position(pcur, &mtr)",
          "new_text": "UNIV_UNLIKELY(mtr_has_extra_clust_latch)",
          "old_line_content": "\t\tbtr_pcur_store_position(pcur, &mtr);",
          "new_line_content": "\tif (UNIV_UNLIKELY(mtr_has_extra_clust_latch)) {",
          "content_same": false
        },
        {
          "line": 3963,
          "old_api": "sel_restore_position_for_mysql",
          "new_api": "btr_pcur_store_position",
          "old_text": "sel_restore_position_for_mysql(&same_user_rec,\n\t\t\t\t\t\tBTR_SEARCH_LEAF,\n\t\t\t\t\t\tpcur, moves_up, &mtr)",
          "new_text": "btr_pcur_store_position(pcur, &mtr)",
          "old_line_content": "\t\tif (sel_restore_position_for_mysql(&same_user_rec,",
          "new_line_content": "\t\tbtr_pcur_store_position(pcur, &mtr);",
          "content_same": false
        },
        {
          "line": 4017,
          "old_api": "mtr_start",
          "new_api": "que_thr_stop_for_mysql",
          "old_text": "mtr_start(&mtr)",
          "new_text": "que_thr_stop_for_mysql(thr)",
          "old_line_content": "\t\tmtr_start(&mtr);",
          "new_line_content": "\tque_thr_stop_for_mysql(thr);",
          "content_same": false
        },
        {
          "line": 4120,
          "old_api": "ut_dulint_cmp",
          "new_api": "trx_start_if_not_started_low",
          "old_text": "ut_dulint_cmp(trx->id, table->query_cache_inv_trx_id)",
          "new_text": "trx_start_if_not_started_low(trx)",
          "old_line_content": "\t    && ut_dulint_cmp(trx->id, table->query_cache_inv_trx_id) >= 0) {",
          "new_line_content": "\ttrx_start_if_not_started_low(trx);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 3593,
          "old_api": null,
          "new_api": "btr_index_rec_validate",
          "old_text": null,
          "new_text": "btr_index_rec_validate(rec, index, FALSE)",
          "old_line_content": "\"InnoDB: Index corruption: rec offs %lu next offs %lu, page no %lu,\\n\"",
          "new_line_content": "\t\t|| !btr_index_rec_validate(rec, index, FALSE)) {",
          "content_same": false
        },
        {
          "line": 3594,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\n\"InnoDB: Index corruption: rec offs %lu next offs %lu, page no %lu,\\n\"\n\"InnoDB: \",\n\t\t\t   (ulong) ut_align_offset(rec, UNIV_PAGE_SIZE),\n\t\t\t   (ulong) next_offs,\n\t\t\t   (ulong) buf_frame_get_page_no(rec))",
          "old_line_content": "\"InnoDB: \",",
          "new_line_content": "\t\t\tfprintf(stderr,",
          "content_same": false
        },
        {
          "line": 4109,
          "old_api": null,
          "new_api": "dict_table_get",
          "old_text": null,
          "new_text": "dict_table_get(norm_name, trx)",
          "old_line_content": "",
          "new_line_content": "\ttable = dict_table_get(norm_name, trx);",
          "content_same": false
        },
        {
          "line": 3600,
          "old_api": null,
          "new_api": "dict_index_name_print",
          "old_text": null,
          "new_text": "dict_index_name_print(stderr, trx, index)",
          "old_line_content": "\t\t\t\tstderr);",
          "new_line_content": "\t\t\tdict_index_name_print(stderr, trx, index);",
          "content_same": false
        },
        {
          "line": 3601,
          "old_api": null,
          "new_api": "fputs",
          "old_text": null,
          "new_text": "fputs(\". We try to skip the record.\\n\",\n\t\t\t\tstderr)",
          "old_line_content": "",
          "new_line_content": "\t\t\tfputs(\". We try to skip the record.\\n\",",
          "content_same": false
        },
        {
          "line": 4116,
          "old_api": null,
          "new_api": "mutex_enter",
          "old_text": null,
          "new_text": "mutex_enter(&kernel_mutex)",
          "old_line_content": "\tWe do not check what type locks there are on the table, though only",
          "new_line_content": "\tmutex_enter(&kernel_mutex);",
          "content_same": false
        },
        {
          "line": 4127,
          "old_api": null,
          "new_api": "UT_LIST_GET_LEN",
          "old_text": null,
          "new_text": "UT_LIST_GET_LEN(table->locks)",
          "old_line_content": "\t\tif (trx->isolation_level >= TRX_ISO_REPEATABLE_READ",
          "new_line_content": "\tif (UT_LIST_GET_LEN(table->locks) == 0",
          "content_same": false
        },
        {
          "line": 4128,
          "old_api": null,
          "new_api": "ut_dulint_cmp",
          "old_text": null,
          "new_text": "ut_dulint_cmp(trx->id, table->query_cache_inv_trx_id)",
          "old_line_content": "\t\t    && !trx->read_view) {",
          "new_line_content": "\t    && ut_dulint_cmp(trx->id, table->query_cache_inv_trx_id) >= 0) {",
          "content_same": false
        },
        {
          "line": 3621,
          "old_api": null,
          "new_api": "cmp_dtuple_rec",
          "old_text": null,
          "new_text": "cmp_dtuple_rec(search_tuple, rec, offsets)",
          "old_line_content": "\t\t\tif (set_also_gap_locks",
          "new_line_content": "\t\tif (0 != cmp_dtuple_rec(search_tuple, rec, offsets)) {",
          "content_same": false
        },
        {
          "line": 4138,
          "old_api": null,
          "new_api": "read_view_open_now",
          "old_text": null,
          "new_text": "read_view_open_now(trx,\n\t\t\t\t\t\ttrx->read_view_heap)",
          "old_line_content": "}",
          "new_line_content": "\t\t\ttrx->read_view = read_view_open_now(trx,",
          "content_same": false
        },
        {
          "line": 4143,
          "old_api": null,
          "new_api": "mutex_exit",
          "old_text": null,
          "new_text": "mutex_exit(&kernel_mutex)",
          "old_line_content": "",
          "new_line_content": "\tmutex_exit(&kernel_mutex);",
          "content_same": false
        },
        {
          "line": 3631,
          "old_api": null,
          "new_api": "sel_set_rec_lock",
          "old_text": null,
          "new_text": "sel_set_rec_lock(rec, index, offsets,\n\t\t\t\t\t\tprebuilt->select_lock_type,\n\t\t\t\t\t\tLOCK_GAP, thr)",
          "old_line_content": "\t\t\t\t\t\tLOCK_GAP, thr);",
          "new_line_content": "\t\t\t\terr = sel_set_rec_lock(rec, index, offsets,",
          "content_same": false
        },
        {
          "line": 3641,
          "old_api": null,
          "new_api": "btr_pcur_store_position",
          "old_text": null,
          "new_text": "btr_pcur_store_position(pcur, &mtr)",
          "old_line_content": "\t\t\terr = DB_RECORD_NOT_FOUND;",
          "new_line_content": "\t\t\tbtr_pcur_store_position(pcur, &mtr);",
          "content_same": false
        },
        {
          "line": 3652,
          "old_api": null,
          "new_api": "cmp_dtuple_is_prefix_of_rec",
          "old_text": null,
          "new_text": "cmp_dtuple_is_prefix_of_rec(search_tuple, rec, offsets)",
          "old_line_content": "\t\t\tif (set_also_gap_locks",
          "new_line_content": "\t\tif (!cmp_dtuple_is_prefix_of_rec(search_tuple, rec, offsets)) {",
          "content_same": false
        },
        {
          "line": 3662,
          "old_api": null,
          "new_api": "sel_set_rec_lock",
          "old_text": null,
          "new_text": "sel_set_rec_lock(rec, index, offsets,\n\t\t\t\t\t\tprebuilt->select_lock_type,\n\t\t\t\t\t\tLOCK_GAP, thr)",
          "old_line_content": "\t\t\t\t\t\tLOCK_GAP, thr);",
          "new_line_content": "\t\t\t\terr = sel_set_rec_lock(rec, index, offsets,",
          "content_same": false
        },
        {
          "line": 3156,
          "old_api": null,
          "new_api": "trx_reset_new_rec_lock_info",
          "old_text": null,
          "new_text": "trx_reset_new_rec_lock_info(trx)",
          "old_line_content": "",
          "new_line_content": "\t\ttrx_reset_new_rec_lock_info(trx);",
          "content_same": false
        },
        {
          "line": 3672,
          "old_api": null,
          "new_api": "btr_pcur_store_position",
          "old_text": null,
          "new_text": "btr_pcur_store_position(pcur, &mtr)",
          "old_line_content": "\t\t\terr = DB_RECORD_NOT_FOUND;",
          "new_line_content": "\t\t\tbtr_pcur_store_position(pcur, &mtr);",
          "content_same": false
        },
        {
          "line": 3162,
          "old_api": null,
          "new_api": "UNIV_UNLIKELY",
          "old_text": null,
          "new_text": "UNIV_UNLIKELY(direction == 0)",
          "old_line_content": "\t",
          "new_line_content": "\tif (UNIV_UNLIKELY(direction == 0)) {",
          "content_same": false
        },
        {
          "line": 3171,
          "old_api": null,
          "new_api": "row_prebuild_sel_graph",
          "old_text": null,
          "new_text": "row_prebuild_sel_graph(prebuilt)",
          "old_line_content": "\t} else {",
          "new_line_content": "\t\t\trow_prebuild_sel_graph(prebuilt);",
          "content_same": false
        },
        {
          "line": 3180,
          "old_api": null,
          "new_api": "UNIV_UNLIKELY",
          "old_text": null,
          "new_text": "UNIV_UNLIKELY(direction != prebuilt->fetch_direction)",
          "old_line_content": "\t\t\t\tut_error;",
          "new_line_content": "\t\tif (UNIV_UNLIKELY(direction != prebuilt->fetch_direction)) {",
          "content_same": false
        },
        {
          "line": 3181,
          "old_api": null,
          "new_api": "UNIV_UNLIKELY",
          "old_text": null,
          "new_text": "UNIV_UNLIKELY(prebuilt->n_fetch_cached > 0)",
          "old_line_content": "\t\t\t\t/* TODO: scrollable cursor: restore cursor to",
          "new_line_content": "\t\t\tif (UNIV_UNLIKELY(prebuilt->n_fetch_cached > 0)) {",
          "content_same": false
        },
        {
          "line": 3699,
          "old_api": null,
          "new_api": "rec_get_deleted_flag",
          "old_text": null,
          "new_text": "rec_get_deleted_flag(\n\t\t\t\t\trec, page_rec_is_comp(rec))",
          "old_line_content": "",
          "new_line_content": "\t\t    || (unique_search && !UNIV_UNLIKELY(rec_get_deleted_flag(",
          "content_same": false
        },
        {
          "line": 3700,
          "old_api": null,
          "new_api": "page_rec_is_comp",
          "old_text": null,
          "new_text": "page_rec_is_comp(rec)",
          "old_line_content": "\t\t\tgoto no_gap_lock;",
          "new_line_content": "\t\t\t\t\trec, page_rec_is_comp(rec))))) {",
          "content_same": false
        },
        {
          "line": 3193,
          "old_api": null,
          "new_api": "UNIV_LIKELY",
          "old_text": null,
          "new_text": "UNIV_LIKELY(prebuilt->n_fetch_cached > 0)",
          "old_line_content": "",
          "new_line_content": "\t\t} else if (UNIV_LIKELY(prebuilt->n_fetch_cached > 0)) {",
          "content_same": false
        },
        {
          "line": 3194,
          "old_api": null,
          "new_api": "row_sel_pop_cached_row_for_mysql",
          "old_text": null,
          "new_text": "row_sel_pop_cached_row_for_mysql(buf, prebuilt)",
          "old_line_content": "\t\t\tprebuilt->n_rows_fetched++;",
          "new_line_content": "\t\t\trow_sel_pop_cached_row_for_mysql(buf, prebuilt);",
          "content_same": false
        },
        {
          "line": 3722,
          "old_api": null,
          "new_api": "dict_index_get_n_unique",
          "old_text": null,
          "new_text": "dict_index_get_n_unique(index)",
          "old_line_content": "no_gap_lock:",
          "new_line_content": "\t\t       == dict_index_get_n_unique(index)",
          "content_same": false
        },
        {
          "line": 3723,
          "old_api": null,
          "new_api": "cmp_dtuple_rec",
          "old_text": null,
          "new_text": "cmp_dtuple_rec(search_tuple, rec, offsets)",
          "old_line_content": "\t\t\tlock_type = LOCK_REC_NOT_GAP;",
          "new_line_content": "\t\t    && 0 == cmp_dtuple_rec(search_tuple, rec, offsets)) {",
          "content_same": false
        },
        {
          "line": 3728,
          "old_api": null,
          "new_api": "sel_set_rec_lock",
          "old_text": null,
          "new_text": "sel_set_rec_lock(rec, index, offsets,\n\t\t\t\t\tprebuilt->select_lock_type,\n\t\t\t\t\tlock_type, thr)",
          "old_line_content": "\t\t\t\t\tlock_type, thr);",
          "new_line_content": "\t\terr = sel_set_rec_lock(rec, index, offsets,",
          "content_same": false
        },
        {
          "line": 3235,
          "old_api": null,
          "new_api": "dtuple_get_n_fields",
          "old_text": null,
          "new_text": "dtuple_get_n_fields(search_tuple)",
          "old_line_content": "\t    && (index->type & DICT_CLUSTERED",
          "new_line_content": "\t    && dtuple_get_n_fields(search_tuple)",
          "content_same": false
        },
        {
          "line": 3238,
          "old_api": null,
          "new_api": "dtuple_contains_null",
          "old_text": null,
          "new_text": "dtuple_contains_null(search_tuple)",
          "old_line_content": "\t\t/* Note above that a UNIQUE secondary index can contain many",
          "new_line_content": "\t\t || !dtuple_contains_null(search_tuple))) {",
          "content_same": false
        },
        {
          "line": 3752,
          "old_api": null,
          "new_api": "UNIV_LIKELY",
          "old_text": null,
          "new_text": "UNIV_LIKELY(srv_force_recovery < 5)",
          "old_line_content": "\t\t\t\t\t\toffsets, trx->read_view)) {",
          "new_line_content": "\t\t\tif (UNIV_LIKELY(srv_force_recovery < 5)",
          "content_same": false
        },
        {
          "line": 3753,
          "old_api": null,
          "new_api": "lock_clust_rec_cons_read_sees",
          "old_text": null,
          "new_text": "lock_clust_rec_cons_read_sees(rec, index,\n\t\t\t\t\t\toffsets, trx->read_view)",
          "old_line_content": "",
          "new_line_content": "                            && !lock_clust_rec_cons_read_sees(rec, index,",
          "content_same": false
        },
        {
          "line": 3756,
          "old_api": null,
          "new_api": "row_sel_build_prev_vers_for_mysql",
          "old_text": null,
          "new_text": "row_sel_build_prev_vers_for_mysql(\n\t\t\t\t\t\ttrx->read_view, clust_index,\n\t\t\t\t\t\tprebuilt, rec,\n\t\t\t\t\t\t&offsets, &heap,\n\t\t\t\t\t\t&old_vers, &mtr)",
          "old_line_content": "\t\t\t\t\t\tprebuilt, rec,",
          "new_line_content": "\t\t\t\terr = row_sel_build_prev_vers_for_mysql(",
          "content_same": false
        },
        {
          "line": 3253,
          "old_api": null,
          "new_api": "UNIV_UNLIKELY",
          "old_text": null,
          "new_text": "UNIV_UNLIKELY(direction != 0 &&\n\t\t\t\t!prebuilt->used_in_HANDLER)",
          "old_line_content": "        ",
          "new_line_content": "\t\tif (UNIV_UNLIKELY(direction != 0 &&",
          "content_same": false
        },
        {
          "line": 3261,
          "old_api": null,
          "new_api": "mtr_start",
          "old_text": null,
          "new_text": "mtr_start(&mtr)",
          "old_line_content": "\t/*-------------------------------------------------------------*/",
          "new_line_content": "\tmtr_start(&mtr);",
          "content_same": false
        },
        {
          "line": 3776,
          "old_api": null,
          "new_api": "lock_sec_rec_cons_read_sees",
          "old_text": null,
          "new_text": "lock_sec_rec_cons_read_sees(rec, index,\n\t\t\t\t\t\t\ttrx->read_view)",
          "old_line_content": "\t\t\t/* We are looking into a non-clustered index,",
          "new_line_content": "\t\t} else if (!lock_sec_rec_cons_read_sees(rec, index,",
          "content_same": false
        },
        {
          "line": 3272,
          "old_api": null,
          "new_api": "UNIV_UNLIKELY",
          "old_text": null,
          "new_text": "UNIV_UNLIKELY(direction == 0)",
          "old_line_content": "\t    && index->type & DICT_CLUSTERED",
          "new_line_content": "\tif (UNIV_UNLIKELY(direction == 0)",
          "content_same": false
        },
        {
          "line": 3786,
          "old_api": null,
          "new_api": "ut_ad",
          "old_text": null,
          "new_text": "ut_ad(index != clust_index)",
          "old_line_content": "\t\t\tgoto requires_clust_rec;",
          "new_line_content": "\t\t\tut_ad(index != clust_index);",
          "content_same": false
        },
        {
          "line": 3792,
          "old_api": null,
          "new_api": "page_rec_is_comp",
          "old_text": null,
          "new_text": "page_rec_is_comp(rec)",
          "old_line_content": "\t\t/* The record is delete-marked: we can skip it if this is",
          "new_line_content": "\tif (UNIV_UNLIKELY(rec_get_deleted_flag(rec, page_rec_is_comp(rec)))) {",
          "content_same": false
        },
        {
          "line": 3804,
          "old_api": null,
          "new_api": "row_unlock_for_mysql",
          "old_text": null,
          "new_text": "row_unlock_for_mysql(prebuilt, TRUE)",
          "old_line_content": "\t\t",
          "new_line_content": "\t\t\trow_unlock_for_mysql(prebuilt, TRUE);",
          "content_same": false
        },
        {
          "line": 3806,
          "old_api": null,
          "new_api": "trx_reset_new_rec_lock_info",
          "old_text": null,
          "new_text": "trx_reset_new_rec_lock_info(trx)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\ttrx_reset_new_rec_lock_info(trx);",
          "content_same": false
        },
        {
          "line": 3302,
          "old_api": null,
          "new_api": "rw_lock_s_lock",
          "old_text": null,
          "new_text": "rw_lock_s_lock(&btr_search_latch)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\trw_lock_s_lock(&btr_search_latch);",
          "content_same": false
        },
        {
          "line": 3306,
          "old_api": null,
          "new_api": "row_sel_try_search_shortcut_for_mysql",
          "old_text": null,
          "new_text": "row_sel_try_search_shortcut_for_mysql(&rec,\n\t\t\t\t\tprebuilt, &offsets, &heap, &mtr)",
          "old_line_content": "\t\t\tcase SEL_FOUND:",
          "new_line_content": "\t\t\tswitch (row_sel_try_search_shortcut_for_mysql(&rec,",
          "content_same": false
        },
        {
          "line": 3310,
          "old_api": null,
          "new_api": "cmp_dtuple_rec",
          "old_text": null,
          "new_text": "cmp_dtuple_rec(search_tuple,\n\t\t\t\t\t\t\trec, offsets)",
          "old_line_content": "#endif ",
          "new_line_content": "\t\t\t\tut_a(0 == cmp_dtuple_rec(search_tuple,",
          "content_same": false
        },
        {
          "line": 3313,
          "old_api": null,
          "new_api": "row_sel_store_mysql_rec",
          "old_text": null,
          "new_text": "row_sel_store_mysql_rec(buf, prebuilt,\n\t\t\t\t\t\t\trec, offsets)",
          "old_line_content": " \t\t\t\t\terr = DB_TOO_BIG_RECORD;",
          "new_line_content": "\t\t\t\tif (!row_sel_store_mysql_rec(buf, prebuilt,",
          "content_same": false
        },
        {
          "line": 3825,
          "old_api": null,
          "new_api": "rec_offs_validate",
          "old_text": null,
          "new_text": "rec_offs_validate(rec, index, offsets)",
          "old_line_content": "",
          "new_line_content": "\t\tut_ad(rec_offs_validate(rec, index, offsets));",
          "content_same": false
        },
        {
          "line": 3832,
          "old_api": null,
          "new_api": "row_sel_get_clust_rec_for_mysql",
          "old_text": null,
          "new_text": "row_sel_get_clust_rec_for_mysql(prebuilt, index, rec,\n\t\t\t\t\t\t\tthr, &clust_rec,\n\t\t\t\t\t\t\t&offsets, &heap, &mtr)",
          "old_line_content": "",
          "new_line_content": "\t\terr = row_sel_get_clust_rec_for_mysql(prebuilt, index, rec,",
          "content_same": false
        },
        {
          "line": 3322,
          "old_api": null,
          "new_api": "mtr_commit",
          "old_text": null,
          "new_text": "mtr_commit(&mtr)",
          "old_line_content": "\t\t\t\t/* ut_print_name(stderr, index->name);",
          "new_line_content": " \t\t\t\tmtr_commit(&mtr);",
          "content_same": false
        },
        {
          "line": 3842,
          "old_api": null,
          "new_api": "ut_ad",
          "old_text": null,
          "new_text": "ut_ad(prebuilt->select_lock_type == LOCK_NONE)",
          "old_line_content": "",
          "new_line_content": "\t\t\tut_ad(prebuilt->select_lock_type == LOCK_NONE);",
          "content_same": false
        },
        {
          "line": 3334,
          "old_api": null,
          "new_api": "rw_lock_s_unlock",
          "old_text": null,
          "new_text": "rw_lock_s_unlock(&btr_search_latch)",
          "old_line_content": "\t\t\t\t}    \t",
          "new_line_content": "\t\t\t        \trw_lock_s_unlock(&btr_search_latch);",
          "content_same": false
        },
        {
          "line": 3847,
          "old_api": null,
          "new_api": "rec_get_deleted_flag",
          "old_text": null,
          "new_text": "rec_get_deleted_flag(clust_rec,\n\t\t\t\t\tpage_rec_is_comp(clust_rec))",
          "old_line_content": "",
          "new_line_content": "\t\tif (UNIV_UNLIKELY(rec_get_deleted_flag(clust_rec,",
          "content_same": false
        },
        {
          "line": 3848,
          "old_api": null,
          "new_api": "page_rec_is_comp",
          "old_text": null,
          "new_text": "page_rec_is_comp(clust_rec)",
          "old_line_content": "\t\t\tif (srv_locks_unsafe_for_binlog) {",
          "new_line_content": "\t\t\t\t\tpage_rec_is_comp(clust_rec)))) {",
          "content_same": false
        },
        {
          "line": 3344,
          "old_api": null,
          "new_api": "mtr_commit",
          "old_text": null,
          "new_text": "mtr_commit(&mtr)",
          "old_line_content": "\t\t\t\t/* ut_print_name(stderr, index->name);",
          "new_line_content": " \t\t\t\tmtr_commit(&mtr);",
          "content_same": false
        },
        {
          "line": 3859,
          "old_api": null,
          "new_api": "row_unlock_for_mysql",
          "old_text": null,
          "new_text": "row_unlock_for_mysql(prebuilt, TRUE)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\trow_unlock_for_mysql(prebuilt, TRUE);",
          "content_same": false
        },
        {
          "line": 3861,
          "old_api": null,
          "new_api": "trx_reset_new_rec_lock_info",
          "old_text": null,
          "new_text": "trx_reset_new_rec_lock_info(trx)",
          "old_line_content": "\t\tif (prebuilt->need_to_access_clustered) {",
          "new_line_content": "\t\t\t\ttrx_reset_new_rec_lock_info(trx);",
          "content_same": false
        },
        {
          "line": 3354,
          "old_api": null,
          "new_api": "rw_lock_s_unlock",
          "old_text": null,
          "new_text": "rw_lock_s_unlock(&btr_search_latch)",
          "old_line_content": "\t\t\t\t}",
          "new_line_content": "\t\t\t        \trw_lock_s_unlock(&btr_search_latch);",
          "content_same": false
        },
        {
          "line": 3869,
          "old_api": null,
          "new_api": "rec_offs_validate",
          "old_text": null,
          "new_text": "rec_offs_validate(rec, clust_index, offsets)",
          "old_line_content": "",
          "new_line_content": "\t\t\tut_ad(rec_offs_validate(rec, clust_index, offsets));",
          "content_same": false
        },
        {
          "line": 3365,
          "old_api": null,
          "new_api": "mtr_commit",
          "old_text": null,
          "new_text": "mtr_commit(&mtr)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tmtr_commit(&mtr);",
          "content_same": false
        },
        {
          "line": 3366,
          "old_api": null,
          "new_api": "mtr_start",
          "old_text": null,
          "new_text": "mtr_start(&mtr)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tmtr_start(&mtr);",
          "content_same": false
        },
        {
          "line": 3877,
          "old_api": null,
          "new_api": "rec_offs_validate",
          "old_text": null,
          "new_text": "rec_offs_validate(rec,\n\t\t\t\trec == clust_rec ? clust_index : index,\n\t\t\t\toffsets)",
          "old_line_content": "\t\t\t&& prebuilt->select_lock_type == LOCK_NONE",
          "new_line_content": "\tut_ad(rec_offs_validate(rec,",
          "content_same": false
        },
        {
          "line": 3374,
          "old_api": null,
          "new_api": "rw_lock_s_unlock",
          "old_text": null,
          "new_text": "rw_lock_s_unlock(&btr_search_latch)",
          "old_line_content": "\t}\t\t\t",
          "new_line_content": "\t\trw_lock_s_unlock(&btr_search_latch);",
          "content_same": false
        },
        {
          "line": 3378,
          "old_api": null,
          "new_api": "trx_start_if_not_started",
          "old_text": null,
          "new_text": "trx_start_if_not_started(trx)",
          "old_line_content": "\tif (trx->isolation_level <= TRX_ISO_READ_COMMITTED",
          "new_line_content": "\ttrx_start_if_not_started(trx);",
          "content_same": false
        },
        {
          "line": 3899,
          "old_api": null,
          "new_api": "row_sel_push_cache_row_for_mysql",
          "old_text": null,
          "new_text": "row_sel_push_cache_row_for_mysql(prebuilt, rec, offsets)",
          "old_line_content": "",
          "new_line_content": "\t\trow_sel_push_cache_row_for_mysql(prebuilt, rec, offsets);",
          "content_same": false
        },
        {
          "line": 3388,
          "old_api": null,
          "new_api": "dict_accept",
          "old_text": null,
          "new_text": "dict_accept(*trx->mysql_query_str, \"SELECT\", &success)",
          "old_line_content": "\t\tif (success) {",
          "new_line_content": "\t\tdict_accept(*trx->mysql_query_str, \"SELECT\", &success);",
          "content_same": false
        },
        {
          "line": 3909,
          "old_api": null,
          "new_api": "rec_offs_extra_size",
          "old_text": null,
          "new_text": "rec_offs_extra_size(offsets)",
          "old_line_content": "\t\t\t\t\t\t\trec, offsets)) {",
          "new_line_content": "\t\t\tmemcpy(buf + 4, rec - rec_offs_extra_size(offsets),",
          "content_same": false
        },
        {
          "line": 3910,
          "old_api": null,
          "new_api": "rec_offs_size",
          "old_text": null,
          "new_text": "rec_offs_size(offsets)",
          "old_line_content": "\t\t\t\terr = DB_TOO_BIG_RECORD;",
          "new_line_content": "\t\t\t\t\trec_offs_size(offsets));",
          "content_same": false
        },
        {
          "line": 3911,
          "old_api": null,
          "new_api": "mach_write_to_4",
          "old_text": null,
          "new_text": "mach_write_to_4(buf,\n\t\t\t\t\trec_offs_extra_size(offsets) + 4)",
          "old_line_content": "",
          "new_line_content": "\t\t\tmach_write_to_4(buf,",
          "content_same": false
        },
        {
          "line": 3912,
          "old_api": null,
          "new_api": "rec_offs_extra_size",
          "old_text": null,
          "new_text": "rec_offs_extra_size(offsets)",
          "old_line_content": "\t\t\t\tgoto lock_wait_or_error;",
          "new_line_content": "\t\t\t\t\trec_offs_extra_size(offsets) + 4);",
          "content_same": false
        },
        {
          "line": 3402,
          "old_api": null,
          "new_api": "UNIV_UNLIKELY",
          "old_text": null,
          "new_text": "UNIV_UNLIKELY(direction == 0)",
          "old_line_content": "\t\t\tmoves_up = TRUE;",
          "new_line_content": "\tif (UNIV_UNLIKELY(direction == 0)) {",
          "content_same": false
        },
        {
          "line": 3914,
          "old_api": null,
          "new_api": "row_sel_store_mysql_rec",
          "old_text": null,
          "new_text": "row_sel_store_mysql_rec(buf, prebuilt,\n\t\t\t\t\t\t\trec, offsets)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tif (!row_sel_store_mysql_rec(buf, prebuilt,",
          "content_same": false
        },
        {
          "line": 3924,
          "old_api": null,
          "new_api": "rec_get_offsets",
          "old_text": null,
          "new_text": "rec_get_offsets(\n\t\t\t\t\t\tindex_rec, index, offsets,\n\t\t\t\t\t\tULINT_UNDEFINED, &heap)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\toffsets = rec_get_offsets(",
          "content_same": false
        },
        {
          "line": 3416,
          "old_api": null,
          "new_api": "UNIV_LIKELY",
          "old_text": null,
          "new_text": "UNIV_LIKELY(direction != 0)",
          "old_line_content": "\t\t\t\t\t\tBTR_SEARCH_LEAF,",
          "new_line_content": "\tif (UNIV_LIKELY(direction != 0)) {",
          "content_same": false
        },
        {
          "line": 3417,
          "old_api": null,
          "new_api": "sel_restore_position_for_mysql",
          "old_text": null,
          "new_text": "sel_restore_position_for_mysql(&same_user_rec,\n\t\t\t\t\t\tBTR_SEARCH_LEAF,\n\t\t\t\t\t\tpcur, moves_up, &mtr)",
          "old_line_content": "\t\t\t\t\t\tpcur, moves_up, &mtr)) {",
          "new_line_content": "\t\tif (!sel_restore_position_for_mysql(&same_user_rec,",
          "content_same": false
        },
        {
          "line": 3928,
          "old_api": null,
          "new_api": "row_sel_store_row_id_to_prebuilt",
          "old_text": null,
          "new_text": "row_sel_store_row_id_to_prebuilt(prebuilt, index_rec,\n\t\t\t\t\t\t\tindex, offsets)",
          "old_line_content": "\tread on a unique condition on the clustered index, then we do not",
          "new_line_content": "\t\t\trow_sel_store_row_id_to_prebuilt(prebuilt, index_rec,",
          "content_same": false
        },
        {
          "line": 3425,
          "old_api": null,
          "new_api": "btr_pcur_open_with_no_init",
          "old_text": null,
          "new_text": "btr_pcur_open_with_no_init(index, search_tuple, mode,\n\t\t\t\t\tBTR_SEARCH_LEAF,\n\t\t\t\t\tpcur, 0, &mtr)",
          "old_line_content": "\t\t\t\t\tpcur, 0, &mtr);",
          "new_line_content": "\t\tbtr_pcur_open_with_no_init(index, search_tuple, mode,",
          "content_same": false
        },
        {
          "line": 3432,
          "old_api": null,
          "new_api": "btr_pcur_open_at_index_side",
          "old_text": null,
          "new_text": "btr_pcur_open_at_index_side(TRUE, index,\n\t\t\t\t\tBTR_SEARCH_LEAF, pcur, FALSE, &mtr)",
          "old_line_content": "\t\t} else if (mode == PAGE_CUR_L) {",
          "new_line_content": "\t\t\tbtr_pcur_open_at_index_side(TRUE, index,",
          "content_same": false
        },
        {
          "line": 3946,
          "old_api": null,
          "new_api": "btr_pcur_store_position",
          "old_text": null,
          "new_text": "btr_pcur_store_position(pcur, &mtr)",
          "old_line_content": "",
          "new_line_content": "\t\tbtr_pcur_store_position(pcur, &mtr);",
          "content_same": false
        },
        {
          "line": 3435,
          "old_api": null,
          "new_api": "btr_pcur_open_at_index_side",
          "old_text": null,
          "new_text": "btr_pcur_open_at_index_side(FALSE, index,\n\t\t\t\t\tBTR_SEARCH_LEAF, pcur, FALSE, &mtr)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tbtr_pcur_open_at_index_side(FALSE, index,",
          "content_same": false
        },
        {
          "line": 3446,
          "old_api": null,
          "new_api": "fputs",
          "old_text": null,
          "new_text": "fputs(\n\"InnoDB: Error: MySQL is trying to perform a consistent read\\n\"\n\"InnoDB: but the read view is not assigned!\\n\", stderr)",
          "old_line_content": "\"InnoDB: but the read view is not assigned!\\n\", stderr);",
          "new_line_content": "\t\t\tfputs(",
          "content_same": false
        },
        {
          "line": 3450,
          "old_api": null,
          "new_api": "fputc",
          "old_text": null,
          "new_text": "fputc('\\n', stderr)",
          "old_line_content": "\t\t}",
          "new_line_content": "                        fputc('\\n', stderr);",
          "content_same": false
        },
        {
          "line": 3451,
          "old_api": null,
          "new_api": "ut_a",
          "old_text": null,
          "new_text": "ut_a(0)",
          "old_line_content": "\t} else if (prebuilt->select_lock_type == LOCK_NONE) {",
          "new_line_content": "\t\t\tut_a(0);",
          "content_same": false
        },
        {
          "line": 3965,
          "old_api": null,
          "new_api": "mtr_commit",
          "old_text": null,
          "new_text": "mtr_commit(&mtr)",
          "old_line_content": "\t\t\t\t\t\tpcur, moves_up, &mtr)) {",
          "new_line_content": "\t\tmtr_commit(&mtr);",
          "content_same": false
        },
        {
          "line": 3968,
          "old_api": null,
          "new_api": "mtr_start",
          "old_text": null,
          "new_text": "mtr_start(&mtr)",
          "old_line_content": "#endif /* UNIV_SEARCH_DEBUG */",
          "new_line_content": "\t\tmtr_start(&mtr);",
          "content_same": false
        },
        {
          "line": 3457,
          "old_api": null,
          "new_api": "trx_assign_read_view",
          "old_text": null,
          "new_text": "trx_assign_read_view(trx)",
          "old_line_content": "\t} else {",
          "new_line_content": "\t\ttrx_assign_read_view(trx);",
          "content_same": false
        },
        {
          "line": 3969,
          "old_api": null,
          "new_api": "sel_restore_position_for_mysql",
          "old_text": null,
          "new_text": "sel_restore_position_for_mysql(&same_user_rec,\n\t\t\t\t\t\tBTR_SEARCH_LEAF,\n\t\t\t\t\t\tpcur, moves_up, &mtr)",
          "old_line_content": "",
          "new_line_content": "\t\tif (sel_restore_position_for_mysql(&same_user_rec,",
          "content_same": false
        },
        {
          "line": 3466,
          "old_api": null,
          "new_api": "lock_table",
          "old_text": null,
          "new_text": "lock_table(0, index->table, lock_mode, thr)",
          "old_line_content": "\t\tif (err != DB_SUCCESS) {",
          "new_line_content": "\t\terr = lock_table(0, index->table, lock_mode, thr);",
          "content_same": false
        },
        {
          "line": 3981,
          "old_api": null,
          "new_api": "btr_pcur_move_to_next",
          "old_text": null,
          "new_text": "btr_pcur_move_to_next(pcur, &mtr)",
          "old_line_content": "\t\t\t} else {",
          "new_line_content": "\t\tif (UNIV_UNLIKELY(!btr_pcur_move_to_next(pcur, &mtr))) {",
          "content_same": false
        },
        {
          "line": 3983,
          "old_api": null,
          "new_api": "btr_pcur_store_position",
          "old_text": null,
          "new_text": "btr_pcur_store_position(pcur, &mtr)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\tbtr_pcur_store_position(pcur, &mtr);",
          "content_same": false
        },
        {
          "line": 3479,
          "old_api": null,
          "new_api": "btr_pcur_get_rec",
          "old_text": null,
          "new_text": "btr_pcur_get_rec(pcur)",
          "old_line_content": "#ifdef UNIV_SEARCH_DEBUG",
          "new_line_content": "\trec = btr_pcur_get_rec(pcur);",
          "content_same": false
        },
        {
          "line": 3480,
          "old_api": null,
          "new_api": "page_rec_is_comp",
          "old_text": null,
          "new_text": "page_rec_is_comp(rec)",
          "old_line_content": "/*",
          "new_line_content": "\tut_ad(!!page_rec_is_comp(rec) == index->table->comp);",
          "content_same": false
        },
        {
          "line": 3994,
          "old_api": null,
          "new_api": "btr_pcur_move_to_prev",
          "old_text": null,
          "new_text": "btr_pcur_move_to_prev(pcur, &mtr)",
          "old_line_content": "\tcnt++;",
          "new_line_content": "\t\tif (UNIV_UNLIKELY(!btr_pcur_move_to_prev(pcur, &mtr))) {",
          "content_same": false
        },
        {
          "line": 3491,
          "old_api": null,
          "new_api": "page_rec_is_infimum",
          "old_text": null,
          "new_text": "page_rec_is_infimum(rec)",
          "old_line_content": "\t\t/* The infimum record on a page cannot be in the result set,",
          "new_line_content": "\tif (page_rec_is_infimum(rec)) {",
          "content_same": false
        },
        {
          "line": 4008,
          "old_api": null,
          "new_api": "btr_pcur_store_position",
          "old_text": null,
          "new_text": "btr_pcur_store_position(pcur, &mtr)",
          "old_line_content": "",
          "new_line_content": "\tbtr_pcur_store_position(pcur, &mtr);",
          "content_same": false
        },
        {
          "line": 4010,
          "old_api": null,
          "new_api": "mtr_commit",
          "old_text": null,
          "new_text": "mtr_commit(&mtr)",
          "old_line_content": "",
          "new_line_content": "\tmtr_commit(&mtr);",
          "content_same": false
        },
        {
          "line": 3500,
          "old_api": null,
          "new_api": "page_rec_is_supremum",
          "old_text": null,
          "new_text": "page_rec_is_supremum(rec)",
          "old_line_content": "\t\tif (set_also_gap_locks",
          "new_line_content": "\tif (page_rec_is_supremum(rec)) {",
          "content_same": false
        },
        {
          "line": 4021,
          "old_api": null,
          "new_api": "row_mysql_handle_errors",
          "old_text": null,
          "new_text": "row_mysql_handle_errors(&err, trx, thr, NULL)",
          "old_line_content": "\t\t\t\t\t\tmoves_up, &mtr);",
          "new_line_content": "\tif (row_mysql_handle_errors(&err, trx, thr, NULL)) {",
          "content_same": false
        },
        {
          "line": 4025,
          "old_api": null,
          "new_api": "mtr_start",
          "old_text": null,
          "new_text": "mtr_start(&mtr)",
          "old_line_content": "\t\t\trow_unlock_for_mysql() to unlock any records, and",
          "new_line_content": "\t\tmtr_start(&mtr);",
          "content_same": false
        },
        {
          "line": 3514,
          "old_api": null,
          "new_api": "sel_set_rec_lock",
          "old_text": null,
          "new_text": "sel_set_rec_lock(rec, index, offsets,\n\t\t\t\t\tprebuilt->select_lock_type,\n\t\t\t\t\tLOCK_ORDINARY, thr)",
          "old_line_content": "\t\t\t\t\tLOCK_ORDINARY, thr);",
          "new_line_content": "\t\t\terr = sel_set_rec_lock(rec, index, offsets,",
          "content_same": false
        },
        {
          "line": 4027,
          "old_api": null,
          "new_api": "sel_restore_position_for_mysql",
          "old_text": null,
          "new_text": "sel_restore_position_for_mysql(&same_user_rec,\n\t\t\t\t\t\tBTR_SEARCH_LEAF, pcur,\n\t\t\t\t\t\tmoves_up, &mtr)",
          "old_line_content": "\t\t\tin lock0lock.c we have blocked the inheriting of gap",
          "new_line_content": "\t\tsel_restore_position_for_mysql(&same_user_rec,",
          "content_same": false
        },
        {
          "line": 3534,
          "old_api": null,
          "new_api": "rec_get_next_offs",
          "old_text": null,
          "new_text": "rec_get_next_offs(rec, TRUE)",
          "old_line_content": "\t\t\tgoto wrong_offs;",
          "new_line_content": "\t\tnext_offs = rec_get_next_offs(rec, TRUE);",
          "content_same": false
        },
        {
          "line": 3535,
          "old_api": null,
          "new_api": "UNIV_UNLIKELY",
          "old_text": null,
          "new_text": "UNIV_UNLIKELY(next_offs < PAGE_NEW_SUPREMUM)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tif (UNIV_UNLIKELY(next_offs < PAGE_NEW_SUPREMUM)) {",
          "content_same": false
        },
        {
          "line": 4047,
          "old_api": null,
          "new_api": "trx_reset_new_rec_lock_info",
          "old_text": null,
          "new_text": "trx_reset_new_rec_lock_info(trx)",
          "old_line_content": "\tthr->lock_state = QUE_THR_LOCK_NOLOCK;",
          "new_line_content": "\t\t\ttrx_reset_new_rec_lock_info(trx);",
          "content_same": false
        },
        {
          "line": 3539,
          "old_api": null,
          "new_api": "rec_get_next_offs",
          "old_text": null,
          "new_text": "rec_get_next_offs(rec, FALSE)",
          "old_line_content": "\t\t\tgoto wrong_offs;",
          "new_line_content": "\t\tnext_offs = rec_get_next_offs(rec, FALSE);",
          "content_same": false
        },
        {
          "line": 3540,
          "old_api": null,
          "new_api": "UNIV_UNLIKELY",
          "old_text": null,
          "new_text": "UNIV_UNLIKELY(next_offs < PAGE_OLD_SUPREMUM)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tif (UNIV_UNLIKELY(next_offs < PAGE_OLD_SUPREMUM)) {",
          "content_same": false
        },
        {
          "line": 3544,
          "old_api": null,
          "new_api": "UNIV_UNLIKELY",
          "old_text": null,
          "new_text": "UNIV_UNLIKELY(next_offs >= UNIV_PAGE_SIZE - PAGE_DIR)",
          "old_line_content": "\t\tif (srv_force_recovery == 0 || moves_up == FALSE) {",
          "new_line_content": "\tif (UNIV_UNLIKELY(next_offs >= UNIV_PAGE_SIZE - PAGE_DIR)) {",
          "content_same": false
        },
        {
          "line": 3548,
          "old_api": null,
          "new_api": "buf_frame_align",
          "old_text": null,
          "new_text": "buf_frame_align(rec)",
          "old_line_content": "\"\\nInnoDB: rec address %p, first buffer frame %p\\n\"",
          "new_line_content": "\t\t\tbuf_page_print(buf_frame_align(rec));",
          "content_same": false
        },
        {
          "line": 3549,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\n\"\\nInnoDB: rec address %p, first buffer frame %p\\n\"\n\"InnoDB: buffer pool high end %p, buf block fix count %lu\\n\",\n\t\t\t\trec, buf_pool->frame_zero,\n\t\t\t\tbuf_pool->high_end,\n\t\t\t\t(ulong)buf_block_align(rec)->buf_fix_count)",
          "old_line_content": "\"InnoDB: buffer pool high end %p, buf block fix count %lu\\n\",",
          "new_line_content": "\t\t\tfprintf(stderr,",
          "content_same": false
        },
        {
          "line": 3554,
          "old_api": null,
          "new_api": "buf_block_align",
          "old_text": null,
          "new_text": "buf_block_align(rec)",
          "old_line_content": "\"InnoDB: Index corruption: rec offs %lu next offs %lu, page no %lu,\\n\"",
          "new_line_content": "\t\t\t\t(ulong)buf_block_align(rec)->buf_fix_count);",
          "content_same": false
        },
        {
          "line": 3555,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\n\"InnoDB: Index corruption: rec offs %lu next offs %lu, page no %lu,\\n\"\n\"InnoDB: \",\n\t\t\t\t(ulong) ut_align_offset(rec, UNIV_PAGE_SIZE),\n\t\t\t\t(ulong) next_offs,\n\t\t\t\t(ulong) buf_frame_get_page_no(rec))",
          "old_line_content": "\"InnoDB: \",",
          "new_line_content": "\t\t\tfprintf(stderr,",
          "content_same": false
        },
        {
          "line": 4066,
          "old_api": null,
          "new_api": "que_thr_stop_for_mysql_no_error",
          "old_text": null,
          "new_text": "que_thr_stop_for_mysql_no_error(thr, trx)",
          "old_line_content": "\t}",
          "new_line_content": "\tque_thr_stop_for_mysql_no_error(thr, trx);",
          "content_same": false
        },
        {
          "line": 4068,
          "old_api": null,
          "new_api": "mtr_commit",
          "old_text": null,
          "new_text": "mtr_commit(&mtr)",
          "old_line_content": "#ifdef UNIV_SEARCH_DEBUG",
          "new_line_content": "\tmtr_commit(&mtr);",
          "content_same": false
        },
        {
          "line": 4071,
          "old_api": null,
          "new_api": "row_sel_pop_cached_row_for_mysql",
          "old_text": null,
          "new_text": "row_sel_pop_cached_row_for_mysql(buf, prebuilt)",
          "old_line_content": "\tfprintf(stderr, \" cnt %lu ret value %lu err\\n\", cnt, err); */",
          "new_line_content": "\t\trow_sel_pop_cached_row_for_mysql(buf, prebuilt);",
          "content_same": false
        },
        {
          "line": 3561,
          "old_api": null,
          "new_api": "dict_index_name_print",
          "old_text": null,
          "new_text": "dict_index_name_print(stderr, trx, index)",
          "old_line_content": "\"InnoDB: restore from a backup, or dump + drop + reimport the table.\\n\",",
          "new_line_content": "\t\t\tdict_index_name_print(stderr, trx, index);",
          "content_same": false
        },
        {
          "line": 3562,
          "old_api": null,
          "new_api": "fputs",
          "old_text": null,
          "new_text": "fputs(\". Run CHECK TABLE. You may need to\\n\"\n\"InnoDB: restore from a backup, or dump + drop + reimport the table.\\n\",\n\t\t\t      stderr)",
          "old_line_content": "\t\t\t      stderr);",
          "new_line_content": "\t\t\tfputs(\". Run CHECK TABLE. You may need to\\n\"",
          "content_same": false
        },
        {
          "line": 3573,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\n\"InnoDB: Index corruption: rec offs %lu next offs %lu, page no %lu,\\n\"\n\"InnoDB: \",\n\t\t\t   (ulong) ut_align_offset(rec, UNIV_PAGE_SIZE),\n\t\t\t   (ulong) next_offs,\n\t\t\t   (ulong) buf_frame_get_page_no(rec))",
          "old_line_content": "\"InnoDB: \",",
          "new_line_content": "\t\t\tfprintf(stderr,",
          "content_same": false
        },
        {
          "line": 4087,
          "old_api": null,
          "new_api": "UNIV_LIKELY_NULL",
          "old_text": null,
          "new_text": "UNIV_LIKELY_NULL(heap)",
          "old_line_content": "consistent read result, or store it to the query cache. */",
          "new_line_content": "\tif (UNIV_LIKELY_NULL(heap)) {",
          "content_same": false
        },
        {
          "line": 4088,
          "old_api": null,
          "new_api": "mem_heap_free",
          "old_text": null,
          "new_text": "mem_heap_free(heap)",
          "old_line_content": "",
          "new_line_content": "\t\tmem_heap_free(heap);",
          "content_same": false
        },
        {
          "line": 3579,
          "old_api": null,
          "new_api": "dict_index_name_print",
          "old_text": null,
          "new_text": "dict_index_name_print(stderr, trx, index)",
          "old_line_content": "\t\t\t\tstderr);",
          "new_line_content": "\t\t\tdict_index_name_print(stderr, trx, index);",
          "content_same": false
        },
        {
          "line": 3580,
          "old_api": null,
          "new_api": "fputs",
          "old_text": null,
          "new_text": "fputs(\". We try to skip the rest of the page.\\n\",\n\t\t\t\tstderr)",
          "old_line_content": "",
          "new_line_content": "\t\t\tfputs(\". We try to skip the rest of the page.\\n\",",
          "content_same": false
        },
        {
          "line": 3583,
          "old_api": null,
          "new_api": "btr_pcur_move_to_last_on_page",
          "old_text": null,
          "new_text": "btr_pcur_move_to_last_on_page(pcur, &mtr)",
          "old_line_content": "\t\t\tgoto next_rec;",
          "new_line_content": "\t\t\tbtr_pcur_move_to_last_on_page(pcur, &mtr);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 3587,
          "old_api": "rec_get_offsets",
          "new_api": null,
          "old_text": "rec_get_offsets(rec, index, offsets, ULINT_UNDEFINED, &heap)",
          "new_text": null,
          "old_line_content": "\toffsets = rec_get_offsets(rec, index, offsets, ULINT_UNDEFINED, &heap);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 4101,
          "old_api": "dict_table_get",
          "new_api": null,
          "old_text": "dict_table_get(norm_name, trx)",
          "new_text": null,
          "old_line_content": "\ttable = dict_table_get(norm_name, trx);",
          "new_line_content": "\t\t\t\t\tfrom the query cache is permitted */",
          "content_same": false
        },
        {
          "line": 3590,
          "old_api": "rec_validate",
          "new_api": null,
          "old_text": "rec_validate(rec, offsets)",
          "new_text": null,
          "old_line_content": "\t\tif (!rec_validate(rec, offsets)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3595,
          "old_api": "ut_align_offset",
          "new_api": null,
          "old_text": "ut_align_offset(rec, UNIV_PAGE_SIZE)",
          "new_text": null,
          "old_line_content": "\t\t\t   (ulong) ut_align_offset(rec, UNIV_PAGE_SIZE),",
          "new_line_content": "\"InnoDB: Index corruption: rec offs %lu next offs %lu, page no %lu,\\n\"",
          "content_same": false
        },
        {
          "line": 4108,
          "old_api": "mutex_enter",
          "new_api": null,
          "old_text": "mutex_enter(&kernel_mutex)",
          "new_text": null,
          "old_line_content": "\tmutex_enter(&kernel_mutex);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3598,
          "old_api": "dict_index_name_print",
          "new_api": null,
          "old_text": "dict_index_name_print(stderr, trx, index)",
          "new_text": null,
          "old_line_content": "\t\t\tdict_index_name_print(stderr, trx, index);",
          "new_line_content": "\t\t\t   (ulong) next_offs,",
          "content_same": false
        },
        {
          "line": 4112,
          "old_api": "trx_start_if_not_started_low",
          "new_api": null,
          "old_text": "trx_start_if_not_started_low(trx)",
          "new_text": null,
          "old_line_content": "\ttrx_start_if_not_started_low(trx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4119,
          "old_api": "UT_LIST_GET_LEN",
          "new_api": null,
          "old_text": "UT_LIST_GET_LEN(table->locks)",
          "new_text": null,
          "old_line_content": "\tif (UT_LIST_GET_LEN(table->locks) == 0",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4130,
          "old_api": "read_view_open_now",
          "new_api": null,
          "old_text": "read_view_open_now(trx,\n\t\t\t\t\t\ttrx->read_view_heap)",
          "new_text": null,
          "old_line_content": "\t\t\ttrx->read_view = read_view_open_now(trx,",
          "new_line_content": "\t\tret = TRUE;",
          "content_same": false
        },
        {
          "line": 3619,
          "old_api": "cmp_dtuple_rec",
          "new_api": null,
          "old_text": "cmp_dtuple_rec(search_tuple, rec, offsets)",
          "new_text": null,
          "old_line_content": "\t\tif (0 != cmp_dtuple_rec(search_tuple, rec, offsets)) {",
          "new_line_content": "\t\t/* fputs(\"Comparing rec and search tuple\\n\", stderr); */",
          "content_same": false
        },
        {
          "line": 4135,
          "old_api": "mutex_exit",
          "new_api": null,
          "old_text": "mutex_exit(&kernel_mutex)",
          "new_text": null,
          "old_line_content": "\tmutex_exit(&kernel_mutex);",
          "new_line_content": "\t\tif (trx->isolation_level >= TRX_ISO_REPEATABLE_READ",
          "content_same": false
        },
        {
          "line": 3629,
          "old_api": "sel_set_rec_lock",
          "new_api": null,
          "old_text": "sel_set_rec_lock(rec, index, offsets,\n\t\t\t\t\t\tprebuilt->select_lock_type,\n\t\t\t\t\t\tLOCK_GAP, thr)",
          "new_text": null,
          "old_line_content": "\t\t\t\terr = sel_set_rec_lock(rec, index, offsets,",
          "new_line_content": "\t\t\t\toption is not set */",
          "content_same": false
        },
        {
          "line": 3639,
          "old_api": "btr_pcur_store_position",
          "new_api": null,
          "old_text": "btr_pcur_store_position(pcur, &mtr)",
          "new_text": null,
          "old_line_content": "\t\t\tbtr_pcur_store_position(pcur, &mtr);",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 3650,
          "old_api": "cmp_dtuple_is_prefix_of_rec",
          "new_api": null,
          "old_text": "cmp_dtuple_is_prefix_of_rec(search_tuple, rec, offsets)",
          "new_text": null,
          "old_line_content": "\t\tif (!cmp_dtuple_is_prefix_of_rec(search_tuple, rec, offsets)) {",
          "new_line_content": "\t} else if (match_mode == ROW_SEL_EXACT_PREFIX) {",
          "content_same": false
        },
        {
          "line": 3660,
          "old_api": "sel_set_rec_lock",
          "new_api": null,
          "old_text": "sel_set_rec_lock(rec, index, offsets,\n\t\t\t\t\t\tprebuilt->select_lock_type,\n\t\t\t\t\t\tLOCK_GAP, thr)",
          "new_text": null,
          "old_line_content": "\t\t\t\terr = sel_set_rec_lock(rec, index, offsets,",
          "new_line_content": "\t\t\t\toption is not set */",
          "content_same": false
        },
        {
          "line": 3154,
          "old_api": "trx_reset_new_rec_lock_info",
          "new_api": null,
          "old_text": "trx_reset_new_rec_lock_info(trx)",
          "new_text": null,
          "old_line_content": "\t\ttrx_reset_new_rec_lock_info(trx);",
          "new_line_content": "\t    && prebuilt->select_lock_type != LOCK_NONE) {",
          "content_same": false
        },
        {
          "line": 3670,
          "old_api": "btr_pcur_store_position",
          "new_api": null,
          "old_text": "btr_pcur_store_position(pcur, &mtr)",
          "new_text": null,
          "old_line_content": "\t\t\tbtr_pcur_store_position(pcur, &mtr);",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 3160,
          "old_api": "UNIV_UNLIKELY",
          "new_api": null,
          "old_text": "UNIV_UNLIKELY(direction == 0)",
          "new_text": null,
          "old_line_content": "\tif (UNIV_UNLIKELY(direction == 0)) {",
          "new_line_content": "\t/* PHASE 1: Try to pop the row from the prefetch cache */",
          "content_same": false
        },
        {
          "line": 3169,
          "old_api": "row_prebuild_sel_graph",
          "new_api": null,
          "old_text": "row_prebuild_sel_graph(prebuilt)",
          "new_text": null,
          "old_line_content": "\t\t\trow_prebuild_sel_graph(prebuilt);",
          "new_line_content": "\t\tif (prebuilt->sel_graph == NULL) {",
          "content_same": false
        },
        {
          "line": 3178,
          "old_api": "UNIV_UNLIKELY",
          "new_api": null,
          "old_text": "UNIV_UNLIKELY(direction != prebuilt->fetch_direction)",
          "new_text": null,
          "old_line_content": "\t\tif (UNIV_UNLIKELY(direction != prebuilt->fetch_direction)) {",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 3179,
          "old_api": "UNIV_UNLIKELY",
          "new_api": null,
          "old_text": "UNIV_UNLIKELY(prebuilt->n_fetch_cached > 0)",
          "new_text": null,
          "old_line_content": "\t\t\tif (UNIV_UNLIKELY(prebuilt->n_fetch_cached > 0)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3697,
          "old_api": "rec_get_deleted_flag",
          "new_api": null,
          "old_text": "rec_get_deleted_flag(\n\t\t\t\t\trec, page_rec_is_comp(rec))",
          "new_text": null,
          "old_line_content": "\t\t    || (unique_search && !UNIV_UNLIKELY(rec_get_deleted_flag(",
          "new_line_content": "\t\tif (!set_also_gap_locks",
          "content_same": false
        },
        {
          "line": 3698,
          "old_api": "page_rec_is_comp",
          "new_api": null,
          "old_text": "page_rec_is_comp(rec)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\trec, page_rec_is_comp(rec))))) {",
          "new_line_content": "\t\t    || srv_locks_unsafe_for_binlog",
          "content_same": false
        },
        {
          "line": 3191,
          "old_api": "UNIV_LIKELY",
          "new_api": null,
          "old_text": "UNIV_LIKELY(prebuilt->n_fetch_cached > 0)",
          "new_text": null,
          "old_line_content": "\t\t} else if (UNIV_LIKELY(prebuilt->n_fetch_cached > 0)) {",
          "new_line_content": "\t\t\tprebuilt->fetch_cache_first = 0;",
          "content_same": false
        },
        {
          "line": 3192,
          "old_api": "row_sel_pop_cached_row_for_mysql",
          "new_api": null,
          "old_text": "row_sel_pop_cached_row_for_mysql(buf, prebuilt)",
          "new_text": null,
          "old_line_content": "\t\t\trow_sel_pop_cached_row_for_mysql(buf, prebuilt);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3719,
          "old_api": "dtuple_get_n_fields_cmp",
          "new_api": null,
          "old_text": "dtuple_get_n_fields_cmp(search_tuple)",
          "new_text": null,
          "old_line_content": "\t\t    && dtuple_get_n_fields_cmp(search_tuple)",
          "new_line_content": "\t\t    && mode == PAGE_CUR_GE",
          "content_same": false
        },
        {
          "line": 3720,
          "old_api": "dict_index_get_n_unique",
          "new_api": null,
          "old_text": "dict_index_get_n_unique(index)",
          "new_text": null,
          "old_line_content": "\t\t       == dict_index_get_n_unique(index)",
          "new_line_content": "\t\t    && direction == 0",
          "content_same": false
        },
        {
          "line": 3726,
          "old_api": "sel_set_rec_lock",
          "new_api": null,
          "old_text": "sel_set_rec_lock(rec, index, offsets,\n\t\t\t\t\tprebuilt->select_lock_type,\n\t\t\t\t\tlock_type, thr)",
          "new_text": null,
          "old_line_content": "\t\terr = sel_set_rec_lock(rec, index, offsets,",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 3233,
          "old_api": "dtuple_get_n_fields",
          "new_api": null,
          "old_text": "dtuple_get_n_fields(search_tuple)",
          "new_text": null,
          "old_line_content": "\t    && dtuple_get_n_fields(search_tuple)",
          "new_line_content": "\tif (match_mode == ROW_SEL_EXACT",
          "content_same": false
        },
        {
          "line": 3234,
          "old_api": "dict_index_get_n_unique",
          "new_api": null,
          "old_text": "dict_index_get_n_unique(index)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t== dict_index_get_n_unique(index)",
          "new_line_content": "\t    && index->type & DICT_UNIQUE",
          "content_same": false
        },
        {
          "line": 3750,
          "old_api": "UNIV_LIKELY",
          "new_api": null,
          "old_text": "UNIV_LIKELY(srv_force_recovery < 5)",
          "new_text": null,
          "old_line_content": "\t\t\tif (UNIV_LIKELY(srv_force_recovery < 5)",
          "new_line_content": "\t\t\tby skipping this lookup */",
          "content_same": false
        },
        {
          "line": 3751,
          "old_api": "lock_clust_rec_cons_read_sees",
          "new_api": null,
          "old_text": "lock_clust_rec_cons_read_sees(rec, index,\n\t\t\t\t\t\toffsets, trx->read_view)",
          "new_text": null,
          "old_line_content": "                            && !lock_clust_rec_cons_read_sees(rec, index,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3754,
          "old_api": "row_sel_build_prev_vers_for_mysql",
          "new_api": null,
          "old_text": "row_sel_build_prev_vers_for_mysql(\n\t\t\t\t\t\ttrx->read_view, clust_index,\n\t\t\t\t\t\tprebuilt, rec,\n\t\t\t\t\t\t&offsets, &heap,\n\t\t\t\t\t\t&old_vers, &mtr)",
          "new_text": null,
          "old_line_content": "\t\t\t\terr = row_sel_build_prev_vers_for_mysql(",
          "new_line_content": "\t\t\t\t\t\toffsets, trx->read_view)) {",
          "content_same": false
        },
        {
          "line": 3251,
          "old_api": "UNIV_UNLIKELY",
          "new_api": null,
          "old_text": "UNIV_UNLIKELY(direction != 0 &&\n\t\t\t\t!prebuilt->used_in_HANDLER)",
          "new_text": null,
          "old_line_content": "\t\tif (UNIV_UNLIKELY(direction != 0 &&",
          "new_line_content": "\t\tcommand. */",
          "content_same": false
        },
        {
          "line": 3259,
          "old_api": "mtr_start",
          "new_api": null,
          "old_text": "mtr_start(&mtr)",
          "new_text": null,
          "old_line_content": "\tmtr_start(&mtr);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 3774,
          "old_api": "lock_sec_rec_cons_read_sees",
          "new_api": null,
          "old_text": "lock_sec_rec_cons_read_sees(rec, index,\n\t\t\t\t\t\t\ttrx->read_view)",
          "new_text": null,
          "old_line_content": "\t\t} else if (!lock_sec_rec_cons_read_sees(rec, index,",
          "new_line_content": "\t\t\t\trec = old_vers;",
          "content_same": false
        },
        {
          "line": 3270,
          "old_api": "UNIV_UNLIKELY",
          "new_api": null,
          "old_text": "UNIV_UNLIKELY(direction == 0)",
          "new_text": null,
          "old_line_content": "\tif (UNIV_UNLIKELY(direction == 0)",
          "new_line_content": "\tmay be long and there may be externally stored fields */",
          "content_same": false
        },
        {
          "line": 3784,
          "old_api": "ut_ad",
          "new_api": null,
          "old_text": "ut_ad(index != clust_index)",
          "new_text": null,
          "old_line_content": "\t\t\tut_ad(index != clust_index);",
          "new_line_content": "\t\t\t/* Get the clustered index record if needed */",
          "content_same": false
        },
        {
          "line": 3790,
          "old_api": "page_rec_is_comp",
          "new_api": null,
          "old_text": "page_rec_is_comp(rec)",
          "new_text": null,
          "old_line_content": "\tif (UNIV_UNLIKELY(rec_get_deleted_flag(rec, page_rec_is_comp(rec)))) {",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 3800,
          "old_api": "row_unlock_for_mysql",
          "new_api": null,
          "old_text": "row_unlock_for_mysql(prebuilt, TRUE)",
          "new_text": null,
          "old_line_content": "\t\t\trow_unlock_for_mysql(prebuilt, TRUE);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3802,
          "old_api": "trx_reset_new_rec_lock_info",
          "new_api": null,
          "old_text": "trx_reset_new_rec_lock_info(trx)",
          "new_text": null,
          "old_line_content": "\t\t\ttrx_reset_new_rec_lock_info(trx);",
          "new_line_content": "\t\t\tif we do not want to use next-key locking. */",
          "content_same": false
        },
        {
          "line": 3300,
          "old_api": "rw_lock_s_lock",
          "new_api": null,
          "old_text": "rw_lock_s_lock(&btr_search_latch)",
          "new_text": null,
          "old_line_content": "\t\t\t\trw_lock_s_lock(&btr_search_latch);",
          "new_line_content": "#ifndef UNIV_SEARCH_DEBUG\t\t\t",
          "content_same": false
        },
        {
          "line": 3304,
          "old_api": "row_sel_try_search_shortcut_for_mysql",
          "new_api": null,
          "old_text": "row_sel_try_search_shortcut_for_mysql(&rec,\n\t\t\t\t\tprebuilt, &offsets, &heap, &mtr)",
          "new_text": null,
          "old_line_content": "\t\t\tswitch (row_sel_try_search_shortcut_for_mysql(&rec,",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 3308,
          "old_api": "cmp_dtuple_rec",
          "new_api": null,
          "old_text": "cmp_dtuple_rec(search_tuple,\n\t\t\t\t\t\t\trec, offsets)",
          "new_text": null,
          "old_line_content": "\t\t\t\tut_a(0 == cmp_dtuple_rec(search_tuple,",
          "new_line_content": "\t\t\tcase SEL_FOUND:",
          "content_same": false
        },
        {
          "line": 3821,
          "old_api": "rec_offs_validate",
          "new_api": null,
          "old_text": "rec_offs_validate(rec, index, offsets)",
          "new_text": null,
          "old_line_content": "\t\tut_ad(rec_offs_validate(rec, index, offsets));",
          "new_line_content": "\t\trelated to \"rec\", which may be in a secondary index \"index\" or",
          "content_same": false
        },
        {
          "line": 3311,
          "old_api": "row_sel_store_mysql_rec",
          "new_api": null,
          "old_text": "row_sel_store_mysql_rec(buf, prebuilt,\n\t\t\t\t\t\t\trec, offsets)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (!row_sel_store_mysql_rec(buf, prebuilt,",
          "new_line_content": "\t\t\t\t\t\t\trec, offsets));",
          "content_same": false
        },
        {
          "line": 3828,
          "old_api": "row_sel_get_clust_rec_for_mysql",
          "new_api": null,
          "old_text": "row_sel_get_clust_rec_for_mysql(prebuilt, index, rec,\n\t\t\t\t\t\t\tthr, &clust_rec,\n\t\t\t\t\t\t\t&offsets, &heap, &mtr)",
          "new_text": null,
          "old_line_content": "\t\terr = row_sel_get_clust_rec_for_mysql(prebuilt, index, rec,",
          "new_line_content": "\t\tclustered index record */",
          "content_same": false
        },
        {
          "line": 3320,
          "old_api": "mtr_commit",
          "new_api": null,
          "old_text": "mtr_commit(&mtr)",
          "new_text": null,
          "old_line_content": " \t\t\t\tmtr_commit(&mtr);",
          "new_line_content": "\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 3838,
          "old_api": "ut_ad",
          "new_api": null,
          "old_text": "ut_ad(prebuilt->select_lock_type == LOCK_NONE)",
          "new_text": null,
          "old_line_content": "\t\t\tut_ad(prebuilt->select_lock_type == LOCK_NONE);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 3843,
          "old_api": "rec_get_deleted_flag",
          "new_api": null,
          "old_text": "rec_get_deleted_flag(clust_rec,\n\t\t\t\t\tpage_rec_is_comp(clust_rec))",
          "new_text": null,
          "old_line_content": "\t\tif (UNIV_UNLIKELY(rec_get_deleted_flag(clust_rec,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3332,
          "old_api": "rw_lock_s_unlock",
          "new_api": null,
          "old_text": "rw_lock_s_unlock(&btr_search_latch)",
          "new_text": null,
          "old_line_content": "\t\t\t        \trw_lock_s_unlock(&btr_search_latch);",
          "new_line_content": "\t\t\t\t\ttrx->search_latch_timeout--;",
          "content_same": false
        },
        {
          "line": 3844,
          "old_api": "page_rec_is_comp",
          "new_api": null,
          "old_text": "page_rec_is_comp(clust_rec)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tpage_rec_is_comp(clust_rec)))) {",
          "new_line_content": "\t\t\tgoto next_rec;",
          "content_same": false
        },
        {
          "line": 3853,
          "old_api": "row_unlock_for_mysql",
          "new_api": null,
          "old_text": "row_unlock_for_mysql(prebuilt, TRUE)",
          "new_text": null,
          "old_line_content": "\t\t\t\trow_unlock_for_mysql(prebuilt, TRUE);",
          "new_line_content": "\t    \t\t    && prebuilt->select_lock_type != LOCK_NONE) {",
          "content_same": false
        },
        {
          "line": 3342,
          "old_api": "mtr_commit",
          "new_api": null,
          "old_text": "mtr_commit(&mtr)",
          "new_text": null,
          "old_line_content": " \t\t\t\tmtr_commit(&mtr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3855,
          "old_api": "trx_reset_new_rec_lock_info",
          "new_api": null,
          "old_text": "trx_reset_new_rec_lock_info(trx)",
          "new_text": null,
          "old_line_content": "\t\t\t\ttrx_reset_new_rec_lock_info(trx);",
          "new_line_content": "\t\t\t\t/* No need to keep a lock on a delete-marked",
          "content_same": false
        },
        {
          "line": 3863,
          "old_api": "rec_offs_validate",
          "new_api": null,
          "old_text": "rec_offs_validate(rec, clust_index, offsets)",
          "new_text": null,
          "old_line_content": "\t\t\tut_ad(rec_offs_validate(rec, clust_index, offsets));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3352,
          "old_api": "rw_lock_s_unlock",
          "new_api": null,
          "old_text": "rw_lock_s_unlock(&btr_search_latch)",
          "new_text": null,
          "old_line_content": "\t\t\t        \trw_lock_s_unlock(&btr_search_latch);",
          "new_line_content": "\t\t\t\t\ttrx->search_latch_timeout--;",
          "content_same": false
        },
        {
          "line": 3865,
          "old_api": "rec_get_offsets",
          "new_api": null,
          "old_text": "rec_get_offsets(rec, index, offsets,\n\t\t\t\t\t\tULINT_UNDEFINED, &heap)",
          "new_text": null,
          "old_line_content": "\t\t\toffsets = rec_get_offsets(rec, index, offsets,",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 3363,
          "old_api": "mtr_commit",
          "new_api": null,
          "old_text": "mtr_commit(&mtr)",
          "new_text": null,
          "old_line_content": "\t\t\tmtr_commit(&mtr);",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 3364,
          "old_api": "mtr_start",
          "new_api": null,
          "old_text": "mtr_start(&mtr)",
          "new_text": null,
          "old_line_content": "\t\t\tmtr_start(&mtr);",
          "new_line_content": "shortcut_fails_too_big_rec:",
          "content_same": false
        },
        {
          "line": 3372,
          "old_api": "rw_lock_s_unlock",
          "new_api": null,
          "old_text": "rw_lock_s_unlock(&btr_search_latch)",
          "new_text": null,
          "old_line_content": "\t\trw_lock_s_unlock(&btr_search_latch);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3376,
          "old_api": "trx_start_if_not_started",
          "new_api": null,
          "old_text": "trx_start_if_not_started(trx)",
          "new_text": null,
          "old_line_content": "\ttrx_start_if_not_started(trx);",
          "new_line_content": "\t}\t\t\t",
          "content_same": false
        },
        {
          "line": 3893,
          "old_api": "row_sel_push_cache_row_for_mysql",
          "new_api": null,
          "old_text": "row_sel_push_cache_row_for_mysql(prebuilt, rec, offsets)",
          "new_text": null,
          "old_line_content": "\t\trow_sel_push_cache_row_for_mysql(prebuilt, rec, offsets);",
          "new_line_content": "\t\tSince we keep space in prebuilt only for the BLOBs of",
          "content_same": false
        },
        {
          "line": 3386,
          "old_api": "dict_accept",
          "new_api": null,
          "old_text": "dict_accept(*trx->mysql_query_str, \"SELECT\", &success)",
          "new_text": null,
          "old_line_content": "\t\tdict_accept(*trx->mysql_query_str, \"SELECT\", &success);",
          "new_line_content": "\t\tibool\tsuccess;",
          "content_same": false
        },
        {
          "line": 3903,
          "old_api": "rec_offs_extra_size",
          "new_api": null,
          "old_text": "rec_offs_extra_size(offsets)",
          "new_text": null,
          "old_line_content": "\t\t\tmemcpy(buf + 4, rec - rec_offs_extra_size(offsets),",
          "new_line_content": "\t\t\tgoto got_row;",
          "content_same": false
        },
        {
          "line": 3904,
          "old_api": "rec_offs_size",
          "new_api": null,
          "old_text": "rec_offs_size(offsets)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\trec_offs_size(offsets));",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 3905,
          "old_api": "mach_write_to_4",
          "new_api": null,
          "old_text": "mach_write_to_4(buf,\n\t\t\t\t\trec_offs_extra_size(offsets) + 4)",
          "new_text": null,
          "old_line_content": "\t\t\tmach_write_to_4(buf,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3906,
          "old_api": "rec_offs_extra_size",
          "new_api": null,
          "old_text": "rec_offs_extra_size(offsets)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\trec_offs_extra_size(offsets) + 4);",
          "new_line_content": "\t\tgoto next_rec;",
          "content_same": false
        },
        {
          "line": 3908,
          "old_api": "row_sel_store_mysql_rec",
          "new_api": null,
          "old_text": "row_sel_store_mysql_rec(buf, prebuilt,\n\t\t\t\t\t\t\trec, offsets)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!row_sel_store_mysql_rec(buf, prebuilt,",
          "new_line_content": "\t\tif (prebuilt->template_type == ROW_MYSQL_DUMMY_TEMPLATE) {",
          "content_same": false
        },
        {
          "line": 3400,
          "old_api": "UNIV_UNLIKELY",
          "new_api": null,
          "old_text": "UNIV_UNLIKELY(direction == 0)",
          "new_text": null,
          "old_line_content": "\tif (UNIV_UNLIKELY(direction == 0)) {",
          "new_line_content": "\totherwise downward */",
          "content_same": false
        },
        {
          "line": 3918,
          "old_api": "rec_get_offsets",
          "new_api": null,
          "old_text": "rec_get_offsets(\n\t\t\t\t\t\tindex_rec, index, offsets,\n\t\t\t\t\t\tULINT_UNDEFINED, &heap)",
          "new_text": null,
          "old_line_content": "\t\t\t\toffsets = rec_get_offsets(",
          "new_line_content": "\t\t\t\tgoto lock_wait_or_error;",
          "content_same": false
        },
        {
          "line": 3408,
          "old_api": "que_fork_get_first_thr",
          "new_api": null,
          "old_text": "que_fork_get_first_thr(prebuilt->sel_graph)",
          "new_text": null,
          "old_line_content": "\tthr = que_fork_get_first_thr(prebuilt->sel_graph);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 3922,
          "old_api": "row_sel_store_row_id_to_prebuilt",
          "new_api": null,
          "old_text": "row_sel_store_row_id_to_prebuilt(prebuilt, index_rec,\n\t\t\t\t\t\t\tindex, offsets)",
          "new_text": null,
          "old_line_content": "\t\t\trow_sel_store_row_id_to_prebuilt(prebuilt, index_rec,",
          "new_line_content": "\t\tif (prebuilt->clust_index_was_generated) {",
          "content_same": false
        },
        {
          "line": 3415,
          "old_api": "sel_restore_position_for_mysql",
          "new_api": null,
          "old_text": "sel_restore_position_for_mysql(&same_user_rec,\n\t\t\t\t\t\tBTR_SEARCH_LEAF,\n\t\t\t\t\t\tpcur, moves_up, &mtr)",
          "new_text": null,
          "old_line_content": "\t\tif (!sel_restore_position_for_mysql(&same_user_rec,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3421,
          "old_api": "dtuple_get_n_fields",
          "new_api": null,
          "old_text": "dtuple_get_n_fields(search_tuple)",
          "new_text": null,
          "old_line_content": "\t} else if (dtuple_get_n_fields(search_tuple) > 0) {",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 3940,
          "old_api": "btr_pcur_store_position",
          "new_api": null,
          "old_text": "btr_pcur_store_position(pcur, &mtr)",
          "new_text": null,
          "old_line_content": "\t\tbtr_pcur_store_position(pcur, &mtr);",
          "new_line_content": "\tif (!unique_search_from_clust_index",
          "content_same": false
        },
        {
          "line": 3430,
          "old_api": "btr_pcur_open_at_index_side",
          "new_api": null,
          "old_text": "btr_pcur_open_at_index_side(TRUE, index,\n\t\t\t\t\tBTR_SEARCH_LEAF, pcur, FALSE, &mtr)",
          "new_text": null,
          "old_line_content": "\t\t\tbtr_pcur_open_at_index_side(TRUE, index,",
          "new_line_content": "\t} else {",
          "content_same": false
        },
        {
          "line": 3433,
          "old_api": "btr_pcur_open_at_index_side",
          "new_api": null,
          "old_text": "btr_pcur_open_at_index_side(FALSE, index,\n\t\t\t\t\tBTR_SEARCH_LEAF, pcur, FALSE, &mtr)",
          "new_text": null,
          "old_line_content": "\t\t\tbtr_pcur_open_at_index_side(FALSE, index,",
          "new_line_content": "\t\t\t\t\tBTR_SEARCH_LEAF, pcur, FALSE, &mtr);",
          "content_same": false
        },
        {
          "line": 3951,
          "old_api": "UNIV_UNLIKELY",
          "new_api": null,
          "old_text": "UNIV_UNLIKELY(mtr_has_extra_clust_latch)",
          "new_text": null,
          "old_line_content": "\tif (UNIV_UNLIKELY(mtr_has_extra_clust_latch)) {",
          "new_line_content": "\tgoto normal_return;",
          "content_same": false
        },
        {
          "line": 3444,
          "old_api": "fputs",
          "new_api": null,
          "old_text": "fputs(\n\"InnoDB: Error: MySQL is trying to perform a consistent read\\n\"\n\"InnoDB: but the read view is not assigned!\\n\", stderr)",
          "new_text": null,
          "old_line_content": "\t\t\tfputs(",
          "new_line_content": "\t\t    && prebuilt->select_lock_type == LOCK_NONE) {",
          "content_same": false
        },
        {
          "line": 3447,
          "old_api": "trx_print",
          "new_api": null,
          "old_text": "trx_print(stderr, trx)",
          "new_text": null,
          "old_line_content": "\t\t\ttrx_print(stderr, trx);",
          "new_line_content": "\"InnoDB: Error: MySQL is trying to perform a consistent read\\n\"",
          "content_same": false
        },
        {
          "line": 3448,
          "old_api": "fputc",
          "new_api": null,
          "old_text": "fputc('\\n', stderr)",
          "new_text": null,
          "old_line_content": "                        fputc('\\n', stderr);",
          "new_line_content": "\"InnoDB: but the read view is not assigned!\\n\", stderr);",
          "content_same": false
        },
        {
          "line": 3959,
          "old_api": "mtr_commit",
          "new_api": null,
          "old_text": "mtr_commit(&mtr)",
          "new_text": null,
          "old_line_content": "\t\tmtr_commit(&mtr);",
          "new_line_content": "\t\tnon-clustered index record, because we could break the",
          "content_same": false
        },
        {
          "line": 3962,
          "old_api": "mtr_start",
          "new_api": null,
          "old_text": "mtr_start(&mtr)",
          "new_text": null,
          "old_line_content": "\t\tmtr_start(&mtr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3455,
          "old_api": "trx_assign_read_view",
          "new_api": null,
          "old_text": "trx_assign_read_view(trx)",
          "new_text": null,
          "old_line_content": "\t\ttrx_assign_read_view(trx);",
          "new_line_content": "\t\t/* Assign a read view for the query */",
          "content_same": false
        },
        {
          "line": 3975,
          "old_api": "btr_pcur_move_to_next",
          "new_api": null,
          "old_text": "btr_pcur_move_to_next(pcur, &mtr)",
          "new_text": null,
          "old_line_content": "\t\tif (UNIV_UNLIKELY(!btr_pcur_move_to_next(pcur, &mtr))) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3464,
          "old_api": "lock_table",
          "new_api": null,
          "old_text": "lock_table(0, index->table, lock_mode, thr)",
          "new_text": null,
          "old_line_content": "\t\terr = lock_table(0, index->table, lock_mode, thr);",
          "new_line_content": "\t\t\tlock_mode = LOCK_IX;",
          "content_same": false
        },
        {
          "line": 3977,
          "old_api": "btr_pcur_store_position",
          "new_api": null,
          "old_text": "btr_pcur_store_position(pcur, &mtr)",
          "new_text": null,
          "old_line_content": "\t\t\tbtr_pcur_store_position(pcur, &mtr);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 3988,
          "old_api": "btr_pcur_move_to_prev",
          "new_api": null,
          "old_text": "btr_pcur_move_to_prev(pcur, &mtr)",
          "new_text": null,
          "old_line_content": "\t\tif (UNIV_UNLIKELY(!btr_pcur_move_to_prev(pcur, &mtr))) {",
          "new_line_content": "\t\t\t\terr = DB_END_OF_INDEX;",
          "content_same": false
        },
        {
          "line": 3477,
          "old_api": "btr_pcur_get_rec",
          "new_api": null,
          "old_text": "btr_pcur_get_rec(pcur)",
          "new_text": null,
          "old_line_content": "\trec = btr_pcur_get_rec(pcur);",
          "new_line_content": "\t/* PHASE 4: Look for matching records in a loop */",
          "content_same": false
        },
        {
          "line": 3478,
          "old_api": "page_rec_is_comp",
          "new_api": null,
          "old_text": "page_rec_is_comp(rec)",
          "new_text": null,
          "old_line_content": "\tut_ad(!!page_rec_is_comp(rec) == index->table->comp);",
          "new_line_content": "\t",
          "content_same": false
        },
        {
          "line": 3489,
          "old_api": "page_rec_is_infimum",
          "new_api": null,
          "old_text": "page_rec_is_infimum(rec)",
          "new_text": null,
          "old_line_content": "\tif (page_rec_is_infimum(rec)) {",
          "new_line_content": "#endif /* UNIV_SEARCH_DEBUG */",
          "content_same": false
        },
        {
          "line": 4002,
          "old_api": "btr_pcur_store_position",
          "new_api": null,
          "old_text": "btr_pcur_store_position(pcur, &mtr)",
          "new_text": null,
          "old_line_content": "\tbtr_pcur_store_position(pcur, &mtr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4004,
          "old_api": "mtr_commit",
          "new_api": null,
          "old_text": "mtr_commit(&mtr)",
          "new_text": null,
          "old_line_content": "\tmtr_commit(&mtr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3498,
          "old_api": "page_rec_is_supremum",
          "new_api": null,
          "old_text": "page_rec_is_supremum(rec)",
          "new_text": null,
          "old_line_content": "\tif (page_rec_is_supremum(rec)) {",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 4011,
          "old_api": "que_thr_stop_for_mysql",
          "new_api": null,
          "old_text": "que_thr_stop_for_mysql(thr)",
          "new_text": null,
          "old_line_content": "\tque_thr_stop_for_mysql(thr);",
          "new_line_content": "\tmtr_has_extra_clust_latch = FALSE;",
          "content_same": false
        },
        {
          "line": 4015,
          "old_api": "row_mysql_handle_errors",
          "new_api": null,
          "old_text": "row_mysql_handle_errors(&err, trx, thr, NULL)",
          "new_text": null,
          "old_line_content": "\tif (row_mysql_handle_errors(&err, trx, thr, NULL)) {",
          "new_line_content": "\t/* The following is a patch for MySQL */",
          "content_same": false
        },
        {
          "line": 4019,
          "old_api": "sel_restore_position_for_mysql",
          "new_api": null,
          "old_text": "sel_restore_position_for_mysql(&same_user_rec,\n\t\t\t\t\t\tBTR_SEARCH_LEAF, pcur,\n\t\t\t\t\t\tmoves_up, &mtr)",
          "new_text": null,
          "old_line_content": "\t\tsel_restore_position_for_mysql(&same_user_rec,",
          "new_line_content": "\tthr->lock_state = QUE_THR_LOCK_ROW;",
          "content_same": false
        },
        {
          "line": 3510,
          "old_api": "rec_get_offsets",
          "new_api": null,
          "old_text": "rec_get_offsets(rec, index, offsets,\n\t\t\t\t\tULINT_UNDEFINED, &heap)",
          "new_text": null,
          "old_line_content": "\t\t\toffsets = rec_get_offsets(rec, index, offsets,",
          "new_line_content": "\t\t\ta gap and therefore we do not set locks there. */",
          "content_same": false
        },
        {
          "line": 4039,
          "old_api": "trx_reset_new_rec_lock_info",
          "new_api": null,
          "old_text": "trx_reset_new_rec_lock_info(trx)",
          "new_text": null,
          "old_line_content": "\t\t\ttrx_reset_new_rec_lock_info(trx);",
          "new_line_content": "\t\t\tNote that if we were able to restore on the 'same'",
          "content_same": false
        },
        {
          "line": 3531,
          "old_api": "page_rec_is_comp",
          "new_api": null,
          "old_text": "page_rec_is_comp(rec)",
          "new_text": null,
          "old_line_content": "\tif (page_rec_is_comp(rec)) {",
          "new_line_content": "\tcorruption */",
          "content_same": false
        },
        {
          "line": 3532,
          "old_api": "rec_get_next_offs",
          "new_api": null,
          "old_text": "rec_get_next_offs(rec, TRUE)",
          "new_text": null,
          "old_line_content": "\t\tnext_offs = rec_get_next_offs(rec, TRUE);",
          "new_line_content": "\t",
          "content_same": false
        },
        {
          "line": 3537,
          "old_api": "rec_get_next_offs",
          "new_api": null,
          "old_text": "rec_get_next_offs(rec, FALSE)",
          "new_text": null,
          "old_line_content": "\t\tnext_offs = rec_get_next_offs(rec, FALSE);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 3538,
          "old_api": "UNIV_UNLIKELY",
          "new_api": null,
          "old_text": "UNIV_UNLIKELY(next_offs < PAGE_OLD_SUPREMUM)",
          "new_text": null,
          "old_line_content": "\t\tif (UNIV_UNLIKELY(next_offs < PAGE_OLD_SUPREMUM)) {",
          "new_line_content": "\t} else {",
          "content_same": false
        },
        {
          "line": 3542,
          "old_api": "UNIV_UNLIKELY",
          "new_api": null,
          "old_text": "UNIV_UNLIKELY(next_offs >= UNIV_PAGE_SIZE - PAGE_DIR)",
          "new_text": null,
          "old_line_content": "\tif (UNIV_UNLIKELY(next_offs >= UNIV_PAGE_SIZE - PAGE_DIR)) {",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 3545,
          "old_api": "ut_print_timestamp",
          "new_api": null,
          "old_text": "ut_print_timestamp(stderr)",
          "new_text": null,
          "old_line_content": "\t\t\tut_print_timestamp(stderr);",
          "new_line_content": "\twrong_offs:",
          "content_same": false
        },
        {
          "line": 3546,
          "old_api": "buf_frame_align",
          "new_api": null,
          "old_text": "buf_frame_align(rec)",
          "new_text": null,
          "old_line_content": "\t\t\tbuf_page_print(buf_frame_align(rec));",
          "new_line_content": "\t\tif (srv_force_recovery == 0 || moves_up == FALSE) {",
          "content_same": false
        },
        {
          "line": 4058,
          "old_api": "que_thr_stop_for_mysql_no_error",
          "new_api": null,
          "old_text": "que_thr_stop_for_mysql_no_error(thr, trx)",
          "new_text": null,
          "old_line_content": "\tque_thr_stop_for_mysql_no_error(thr, trx);",
          "new_line_content": "/*\tfputs(\"Using \", stderr);",
          "content_same": false
        },
        {
          "line": 4060,
          "old_api": "mtr_commit",
          "new_api": null,
          "old_text": "mtr_commit(&mtr)",
          "new_text": null,
          "old_line_content": "\tmtr_commit(&mtr);",
          "new_line_content": "\tfprintf(stderr, \" cnt %lu ret value %lu err\\n\", cnt, err); */",
          "content_same": false
        },
        {
          "line": 4063,
          "old_api": "row_sel_pop_cached_row_for_mysql",
          "new_api": null,
          "old_text": "row_sel_pop_cached_row_for_mysql(buf, prebuilt)",
          "new_text": null,
          "old_line_content": "\t\trow_sel_pop_cached_row_for_mysql(buf, prebuilt);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3552,
          "old_api": "buf_block_align",
          "new_api": null,
          "old_text": "buf_block_align(rec)",
          "new_text": null,
          "old_line_content": "\t\t\t\t(ulong)buf_block_align(rec)->buf_fix_count);",
          "new_line_content": "\t\t\t\trec, buf_pool->frame_zero,",
          "content_same": false
        },
        {
          "line": 3553,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\n\"InnoDB: Index corruption: rec offs %lu next offs %lu, page no %lu,\\n\"\n\"InnoDB: \",\n\t\t\t\t(ulong) ut_align_offset(rec, UNIV_PAGE_SIZE),\n\t\t\t\t(ulong) next_offs,\n\t\t\t\t(ulong) buf_frame_get_page_no(rec))",
          "new_text": null,
          "old_line_content": "\t\t\tfprintf(stderr,",
          "new_line_content": "\t\t\t\tbuf_pool->high_end,",
          "content_same": false
        },
        {
          "line": 3556,
          "old_api": "ut_align_offset",
          "new_api": null,
          "old_text": "ut_align_offset(rec, UNIV_PAGE_SIZE)",
          "new_text": null,
          "old_line_content": "\t\t\t\t(ulong) ut_align_offset(rec, UNIV_PAGE_SIZE),",
          "new_line_content": "\"InnoDB: Index corruption: rec offs %lu next offs %lu, page no %lu,\\n\"",
          "content_same": false
        },
        {
          "line": 3559,
          "old_api": "dict_index_name_print",
          "new_api": null,
          "old_text": "dict_index_name_print(stderr, trx, index)",
          "new_text": null,
          "old_line_content": "\t\t\tdict_index_name_print(stderr, trx, index);",
          "new_line_content": "\t\t\t\t(ulong) next_offs,",
          "content_same": false
        },
        {
          "line": 4079,
          "old_api": "UNIV_LIKELY_NULL",
          "new_api": null,
          "old_text": "UNIV_LIKELY_NULL(heap)",
          "new_text": null,
          "old_line_content": "\tif (UNIV_LIKELY_NULL(heap)) {",
          "new_line_content": "\tfprintf(stderr, \" cnt %lu ret value %lu err\\n\", cnt, err); */",
          "content_same": false
        },
        {
          "line": 4080,
          "old_api": "mem_heap_free",
          "new_api": null,
          "old_text": "mem_heap_free(heap)",
          "new_text": null,
          "old_line_content": "\t\tmem_heap_free(heap);",
          "new_line_content": "#endif /* UNIV_SEARCH_DEBUG */",
          "content_same": false
        },
        {
          "line": 3571,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\n\"InnoDB: Index corruption: rec offs %lu next offs %lu, page no %lu,\\n\"\n\"InnoDB: \",\n\t\t\t   (ulong) ut_align_offset(rec, UNIV_PAGE_SIZE),\n\t\t\t   (ulong) next_offs,\n\t\t\t   (ulong) buf_frame_get_page_no(rec))",
          "new_text": null,
          "old_line_content": "\t\t\tfprintf(stderr,",
          "new_line_content": "\t\t\tover the corruption to recover as much as possible. */",
          "content_same": false
        },
        {
          "line": 3574,
          "old_api": "ut_align_offset",
          "new_api": null,
          "old_text": "ut_align_offset(rec, UNIV_PAGE_SIZE)",
          "new_text": null,
          "old_line_content": "\t\t\t   (ulong) ut_align_offset(rec, UNIV_PAGE_SIZE),",
          "new_line_content": "\"InnoDB: Index corruption: rec offs %lu next offs %lu, page no %lu,\\n\"",
          "content_same": false
        },
        {
          "line": 3577,
          "old_api": "dict_index_name_print",
          "new_api": null,
          "old_text": "dict_index_name_print(stderr, trx, index)",
          "new_text": null,
          "old_line_content": "\t\t\tdict_index_name_print(stderr, trx, index);",
          "new_line_content": "\t\t\t   (ulong) next_offs,",
          "content_same": false
        },
        {
          "line": 3581,
          "old_api": "btr_pcur_move_to_last_on_page",
          "new_api": null,
          "old_text": "btr_pcur_move_to_last_on_page(pcur, &mtr)",
          "new_text": null,
          "old_line_content": "\t\t\tbtr_pcur_move_to_last_on_page(pcur, &mtr);",
          "new_line_content": "\t\t\t\tstderr);",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 24,
      "total_additions": 120,
      "total_deletions": 120,
      "total_api_changes": 264
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 13,
        "api_related_lines": 264,
        "non_api_lines": 9,
        "non_api_line_numbers": [
          3799,
          3852,
          3854,
          3153,
          3155,
          3796,
          3798,
          4023,
          4022
        ]
      }
    },
    "api_calls_before": 609,
    "api_calls_after": 609,
    "diff_info": {
      "added_lines": 11,
      "removed_lines": 3,
      "total_diff_lines": 47
    }
  }
}
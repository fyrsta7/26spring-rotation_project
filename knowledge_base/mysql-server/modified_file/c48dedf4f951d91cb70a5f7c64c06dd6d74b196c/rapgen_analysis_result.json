{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/c48dedf4f951d91cb70a5f7c64c06dd6d74b196c",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/c48dedf4f951d91cb70a5f7c64c06dd6d74b196c/before.cc",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/c48dedf4f951d91cb70a5f7c64c06dd6d74b196c/after.cc",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mysql-server/modified_file/c48dedf4f951d91cb70a5f7c64c06dd6d74b196c/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 473,
          "old_api": "executeAsynchPrepare",
          "new_api": "getNdbError",
          "old_text": "tx->executeAsynchPrepare(NdbTransaction::NoCommit, callback_main, (void *) wqitem)",
          "new_text": "tx->getNdbError()",
          "old_line_content": "  tx->executeAsynchPrepare(NdbTransaction::NoCommit, callback_main, (void *) wqitem);",
          "new_line_content": "    logger->log(LOG_WARNING, 0, \"readTuple(): %s\\n\", tx->getNdbError().message);",
          "content_same": false
        },
        {
          "line": 497,
          "old_api": "executeAsynchPrepare",
          "new_api": "readTuple",
          "old_text": "tx->executeAsynchPrepare(NdbTransaction::NoCommit, callback_main, (void *) wqitem)",
          "new_text": "op.readTuple(tx, NdbOperation::LM_Exclusive)",
          "old_line_content": "  tx->executeAsynchPrepare(NdbTransaction::NoCommit, callback_main, (void *) wqitem);  ",
          "new_line_content": "  if(! op.readTuple(tx, NdbOperation::LM_Exclusive)) {",
          "content_same": false
        },
        {
          "line": 528,
          "old_api": "worker_set_cas",
          "new_api": "DEBUG_ASSERT",
          "old_text": "worker_set_cas(wqitem->pipeline, wqitem->cas)",
          "new_text": "DEBUG_ASSERT(tx)",
          "old_line_content": "  worker_set_cas(wqitem->pipeline, wqitem->cas);",
          "new_line_content": "  DEBUG_ASSERT(tx);",
          "content_same": false
        },
        {
          "line": 571,
          "old_api": "workitem_allocate_rowbuffer_2",
          "new_api": "readSelectedColumns",
          "old_text": "workitem_allocate_rowbuffer_2(wqitem, needed)",
          "new_text": "op1.readSelectedColumns()",
          "old_line_content": "    workitem_allocate_rowbuffer_2(wqitem, needed);    ",
          "new_line_content": "  op1.readSelectedColumns();",
          "content_same": false
        },
        {
          "line": 577,
          "old_api": "clearKeyNullBits",
          "new_api": "requiredBuffer",
          "old_text": "op1.clearKeyNullBits()",
          "new_text": "op1.requiredBuffer()",
          "old_line_content": "    op1.clearKeyNullBits();",
          "new_line_content": "    size_t needed = op1.requiredBuffer();",
          "content_same": false
        },
        {
          "line": 578,
          "old_api": "setKeyPart",
          "new_api": "workitem_allocate_rowbuffer_1",
          "old_text": "op1.setKeyPart(COL_STORE_KEY, dbkey, wqitem->base.nsuffix)",
          "new_text": "workitem_allocate_rowbuffer_1(wqitem, needed)",
          "old_line_content": "    op1.setKeyPart(COL_STORE_KEY, dbkey, wqitem->base.nsuffix);  ",
          "new_line_content": "    workitem_allocate_rowbuffer_1(wqitem, needed);",
          "content_same": false
        },
        {
          "line": 586,
          "old_api": "readColumn",
          "new_api": "setKeyPart",
          "old_text": "op1.readColumn(COL_STORE_CAS)",
          "new_text": "op1.setKeyPart(COL_STORE_KEY, dbkey, wqitem->base.nsuffix)",
          "old_line_content": "      op1.readColumn(COL_STORE_CAS);",
          "new_line_content": "    op1.setKeyPart(COL_STORE_KEY, dbkey, wqitem->base.nsuffix);  ",
          "content_same": false
        },
        {
          "line": 649,
          "old_api": "code.read_attr     (Rcol, plan->math_column_id)",
          "new_api": "add_val",
          "old_text": "code.read_attr     (Rcol, plan->math_column_id)",
          "new_text": "code.add_val(plan->math_column_id, wqitem->math_flags)",
          "old_line_content": "      code.read_attr     (Rcol, plan->math_column_id); // load R2, math_col",
          "new_line_content": "      code.add_val(plan->math_column_id, wqitem->math_flags);   ",
          "content_same": false
        },
        {
          "line": 650,
          "old_api": "code.branch_gt     (Rdel, Rcol, SUB_ZERO)",
          "new_api": "interpret_exit_ok",
          "old_text": "code.branch_gt     (Rdel, Rcol, SUB_ZERO)",
          "new_text": "code.interpret_exit_ok()",
          "old_line_content": "      code.branch_gt     (Rdel, Rcol, SUB_ZERO);       // if R1 > R2 goto SUB_ZERO",
          "new_line_content": "      code.interpret_exit_ok();",
          "content_same": false
        },
        {
          "line": 656,
          "old_api": "code.write_attr    (plan->math_column_id, Rres)",
          "new_api": "load_const_u64",
          "old_text": "code.write_attr    (plan->math_column_id, Rres)",
          "new_text": "code.load_const_u64(Rdel, wqitem->math_flags)",
          "old_line_content": "      code.write_attr    (plan->math_column_id, Rres); // Store into column ",
          "new_line_content": "      code.load_const_u64(Rdel, wqitem->math_flags);   // load R1, delta",
          "content_same": false
        },
        {
          "line": 657,
          "old_api": "interpret_exit_ok",
          "new_api": "code.read_attr     (Rcol, plan->math_column_id)",
          "old_text": "code.interpret_exit_ok()",
          "new_text": "code.read_attr     (Rcol, plan->math_column_id)",
          "old_line_content": "      code.interpret_exit_ok();",
          "new_line_content": "      code.read_attr     (Rcol, plan->math_column_id); // load R2, math_col",
          "content_same": false
        },
        {
          "line": 660,
          "old_api": "finalise",
          "new_api": "code.write_attr    (plan->math_column_id, Rres)",
          "old_text": "code.finalise()",
          "new_text": "code.write_attr    (plan->math_column_id, Rres)",
          "old_line_content": "    code.finalise();",
          "new_line_content": "      code.write_attr    (plan->math_column_id, Rres); // Store into column",
          "content_same": false
        },
        {
          "line": 665,
          "old_api": "updateTuple",
          "new_api": "interpret_exit_ok",
          "old_text": "op3.updateTuple(tx, & options)",
          "new_text": "code.interpret_exit_ok()",
          "old_line_content": "    ndbop3 = op3.updateTuple(tx, & options);",
          "new_line_content": "      code.interpret_exit_ok();",
          "content_same": false
        },
        {
          "line": 668,
          "old_api": "close",
          "new_api": "finalise",
          "old_text": "tx->close()",
          "new_text": "code.finalise()",
          "old_line_content": "      tx->close();",
          "new_line_content": "    code.finalise();",
          "content_same": false
        },
        {
          "line": 673,
          "old_api": "executeAsynchPrepare",
          "new_api": "updateTuple",
          "old_text": "tx->executeAsynchPrepare(NdbTransaction::Commit, callback_incr, (void *) wqitem)",
          "new_text": "op3.updateTuple(tx, & options)",
          "old_line_content": "  tx->executeAsynchPrepare(NdbTransaction::Commit, callback_incr, (void *) wqitem);",
          "new_line_content": "    ndbop3 = op3.updateTuple(tx, & options);",
          "content_same": false
        },
        {
          "line": 825,
          "old_api": "worker_prepare_operation",
          "new_api": "log",
          "old_text": "worker_prepare_operation(wqitem)",
          "new_text": "logger->log(LOG_WARNING, 0, \"incr/decr: total failure.\\n\")",
          "old_line_content": "      op_status_t r = worker_prepare_operation(wqitem); ",
          "new_line_content": "    logger->log(LOG_WARNING, 0, \"incr/decr: total failure.\\n\");",
          "content_same": false
        },
        {
          "line": 832,
          "old_api": "log",
          "new_api": "close",
          "old_text": "logger->log(LOG_WARNING, 0, \"incr/decr: giving up, too many retries.\\n\")",
          "new_text": "tx->close()",
          "old_line_content": "      logger->log(LOG_WARNING, 0, \"incr/decr: giving up, too many retries.\\n\");",
          "new_line_content": "      tx->close();",
          "content_same": false
        },
        {
          "line": 894,
          "old_api": "requiredBuffer",
          "new_api": "worker_set_cas",
          "old_text": "op.requiredBuffer()",
          "new_text": "worker_set_cas(item->pipeline, item->cas)",
          "old_line_content": "  size_t max_len = op.requiredBuffer();",
          "new_line_content": "  worker_set_cas(item->pipeline, item->cas);  ",
          "content_same": false
        },
        {
          "line": 895,
          "old_api": "workitem_allocate_rowbuffer_2",
          "new_api": "hash_item_set_cas",
          "old_text": "workitem_allocate_rowbuffer_2(item, max_len)",
          "new_text": "hash_item_set_cas(item->cache_item, * item->cas)",
          "old_line_content": "  workitem_allocate_rowbuffer_2(item, max_len);",
          "new_line_content": "  hash_item_set_cas(item->cache_item, * item->cas);",
          "content_same": false
        },
        {
          "line": 902,
          "old_api": "memcpy",
          "new_api": "requiredBuffer",
          "old_text": "memcpy(current_val + current_len, affix_val, total_len - current_len)",
          "new_text": "op.requiredBuffer()",
          "old_line_content": "    memcpy(current_val + current_len, affix_val, total_len - current_len);",
          "new_line_content": "  size_t max_len = op.requiredBuffer();",
          "content_same": false
        },
        {
          "line": 910,
          "old_api": "DEBUG_PRINT",
          "new_api": "memcpy",
          "old_text": "DEBUG_PRINT(\"New value: %.*s%s\", total_len < 100 ? total_len : 100, \n              current_val, total_len > 100 ? \" ...\" : \"\")",
          "new_text": "memcpy(current_val + current_len, affix_val, total_len - current_len)",
          "old_line_content": "  DEBUG_PRINT(\"New value: %.*s%s\", total_len < 100 ? total_len : 100, ",
          "new_line_content": "    memcpy(current_val + current_len, affix_val, total_len - current_len);",
          "content_same": false
        },
        {
          "line": 914,
          "old_api": "setNullBits",
          "new_api": "memmove",
          "old_text": "op.setNullBits()",
          "new_text": "memmove(current_val + affix_len, current_val, current_len)",
          "old_line_content": "  op.setNullBits();",
          "new_line_content": "    memmove(current_val + affix_len, current_val, current_len);",
          "content_same": false
        },
        {
          "line": 915,
          "old_api": "workitem_get_key_suffix",
          "new_api": "memcpy",
          "old_text": "workitem_get_key_suffix(item)",
          "new_text": "memcpy(current_val, affix_val, affix_len)",
          "old_line_content": "  op.setColumn(COL_STORE_KEY, workitem_get_key_suffix(item), item->base.nsuffix);",
          "new_line_content": "    memcpy(current_val, affix_val, affix_len); ",
          "content_same": false
        },
        {
          "line": 918,
          "old_api": "setColumnBigUnsigned",
          "new_api": "DEBUG_PRINT",
          "old_text": "op.setColumnBigUnsigned(COL_STORE_CAS, * item->cas)",
          "new_text": "DEBUG_PRINT(\"New value: %.*s%s\", total_len < 100 ? total_len : 100, \n              current_val, total_len > 100 ? \" ...\" : \"\")",
          "old_line_content": "    op.setColumnBigUnsigned(COL_STORE_CAS, * item->cas);",
          "new_line_content": "  DEBUG_PRINT(\"New value: %.*s%s\", total_len < 100 ? total_len : 100, ",
          "content_same": false
        },
        {
          "line": 923,
          "old_api": "reschedule",
          "new_api": "workitem_get_key_suffix",
          "old_text": "item->pipeline->scheduler->reschedule(item)",
          "new_text": "workitem_get_key_suffix(item)",
          "old_line_content": "    item->pipeline->scheduler->reschedule(item);",
          "new_line_content": "  op.setColumn(COL_STORE_KEY, workitem_get_key_suffix(item), item->base.nsuffix);",
          "content_same": false
        },
        {
          "line": 931,
          "old_api": "close",
          "new_api": "reschedule",
          "old_text": "tx->close()",
          "new_text": "item->pipeline->scheduler->reschedule(item)",
          "old_line_content": "    tx->close();",
          "new_line_content": "    item->pipeline->scheduler->reschedule(item);",
          "content_same": false
        },
        {
          "line": 933,
          "old_api": "workitem_free",
          "new_api": "executeAsynchPrepare",
          "old_text": "workitem_free(item)",
          "new_text": "tx->executeAsynchPrepare(NdbTransaction::Commit, callback_main, (void *) item)",
          "old_line_content": "    workitem_free(item);",
          "new_line_content": "    tx->executeAsynchPrepare(NdbTransaction::Commit, callback_main, (void *) item);",
          "content_same": false
        },
        {
          "line": 955,
          "old_api": "deleteTuple",
          "new_api": "worker_read_external",
          "old_text": "op.deleteTuple(tx)",
          "new_text": "ext_val->worker_read_external(op, tx)",
          "old_line_content": "  op.deleteTuple(tx);",
          "new_line_content": "    ext_val->worker_read_external(op, tx);",
          "content_same": false
        },
        {
          "line": 963,
          "old_api": "DEBUG_PRINT",
          "new_api": "deleteTuple",
          "old_text": "DEBUG_PRINT(\"%d.%d\",wqitem->pipeline->id, wqitem->id)",
          "new_text": "op.deleteTuple(tx)",
          "old_line_content": "  DEBUG_PRINT(\"%d.%d\",wqitem->pipeline->id, wqitem->id);",
          "new_line_content": "  op.deleteTuple(tx);",
          "content_same": false
        },
        {
          "line": 977,
          "old_api": "htonl",
          "new_api": "stored_item_has_expired",
          "old_text": "htonl(wqitem->plan->static_flags)",
          "new_text": "exp_time.stored_item_has_expired(op)",
          "old_line_content": "    wqitem->math_flags = htonl(wqitem->plan->static_flags);",
          "new_line_content": "  if(exp_time.stored_item_has_expired(op)) {",
          "content_same": false
        },
        {
          "line": 982,
          "old_api": "getPointer",
          "new_api": "isNull",
          "old_text": "op.getPointer(COL_STORE_CAS)",
          "new_text": "op.isNull(COL_STORE_FLAGS)",
          "old_line_content": "    wqitem->cas = (uint64_t *) op.getPointer(COL_STORE_CAS);  ",
          "new_line_content": "  if(wqitem->prefix_info.has_flags_col && ! op.isNull(COL_STORE_FLAGS))",
          "content_same": false
        },
        {
          "line": 990,
          "old_api": "appendCRLF",
          "new_api": "getPointer",
          "old_text": "op.appendCRLF(COL_STORE_VALUE, wqitem->value_size)",
          "new_text": "op.getPointer(COL_STORE_CAS)",
          "old_line_content": "     && op.appendCRLF(COL_STORE_VALUE, wqitem->value_size))",
          "new_line_content": "    wqitem->cas = (uint64_t *) op.getPointer(COL_STORE_CAS);  ",
          "content_same": false
        },
        {
          "line": 1029,
          "old_api": "worker_close",
          "new_api": "store_item",
          "old_text": "worker_close(tx, wqitem)",
          "new_text": "store_item(se, wqitem->cache_item, \n                   hash_item_get_cas_ptr(wqitem->cache_item),\n                   OPERATION_SET, wqitem->cookie)",
          "old_line_content": "  worker_close(tx, wqitem);",
          "new_line_content": "    status = store_item(se, wqitem->cache_item, ",
          "content_same": false
        },
        {
          "line": 1058,
          "old_api": "hash_item_get_key",
          "new_api": "item_alloc",
          "old_text": "hash_item_get_key(item)",
          "new_text": "item_alloc(se, wqitem->key, wqitem->base.nkey, \n                                wqitem->math_flags,\n                                exp_time.local_cache_expire_time, \n                                nbytes, wqitem->cookie)",
          "old_line_content": "    memcpy(hash_item_get_key(item), wqitem->key, wqitem->base.nkey); // the key",
          "new_line_content": "  hash_item * item = item_alloc(se, wqitem->key, wqitem->base.nkey, ",
          "content_same": false
        },
        {
          "line": 1070,
          "old_api": "copyValue",
          "new_api": "isNull",
          "old_text": "op.copyValue(COL_STORE_VALUE + i, data_ptr + ncopied)",
          "new_text": "op.isNull(COL_STORE_MATH)",
          "old_line_content": "        ncopied += op.copyValue(COL_STORE_VALUE + i, data_ptr + ncopied);",
          "new_line_content": "       && ! (op.isNull(COL_STORE_MATH))) {",
          "content_same": false
        },
        {
          "line": 1078,
          "old_api": "DEBUG_PRINT",
          "new_api": "copyValue",
          "old_text": "DEBUG_PRINT(\"nbytes: %d   ncopied: %d\", nbytes, ncopied + 2)",
          "new_text": "op.copyValue(COL_STORE_VALUE + i, data_ptr + ncopied)",
          "old_line_content": "    DEBUG_PRINT(\"nbytes: %d   ncopied: %d\", nbytes, ncopied + 2);",
          "new_line_content": "        ncopied += op.copyValue(COL_STORE_VALUE + i, data_ptr + ncopied);",
          "content_same": false
        },
        {
          "line": 1113,
          "old_api": "interpret_exit_ok",
          "new_api": "DEBUG_PRINT",
          "old_text": "r->interpret_exit_ok()",
          "new_text": "DEBUG_PRINT(\"cas_col: %d,  cas_val: %llu\", cas_col, cas_val)",
          "old_line_content": "  r->interpret_exit_ok();                    // allow operation to succeed",
          "new_line_content": "  DEBUG_PRINT(\"cas_col: %d,  cas_val: %llu\", cas_col, cas_val);",
          "content_same": false
        },
        {
          "line": 1116,
          "old_api": "def_label",
          "new_api": "load_const_u64",
          "old_text": "r->def_label(MISMATCH)",
          "new_text": "r->load_const_u64(R1, cas_val)",
          "old_line_content": "  r->def_label(MISMATCH);",
          "new_line_content": "  r->load_const_u64(R1, cas_val);            // load the CAS into R1",
          "content_same": false
        },
        {
          "line": 1117,
          "old_api": "interpret_exit_nok",
          "new_api": "read_attr",
          "old_text": "r->interpret_exit_nok(2010)",
          "new_text": "r->read_attr(R2, cas_col)",
          "old_line_content": "  r->interpret_exit_nok(2010);               // abort the operation",
          "new_line_content": "  r->read_attr(R2, cas_col);                 // read the cas column into R2",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 518,
          "old_api": null,
          "new_api": "requiredBuffer",
          "old_text": null,
          "new_text": "op.requiredBuffer()",
          "old_line_content": "  /* Start a transaction */",
          "new_line_content": "  workitem_allocate_rowbuffer_1(wqitem, op.requiredBuffer() + 2);",
          "content_same": false
        },
        {
          "line": 1030,
          "old_api": null,
          "new_api": "hash_item_get_cas_ptr",
          "old_text": null,
          "new_text": "hash_item_get_cas_ptr(wqitem->cache_item)",
          "old_line_content": "}",
          "new_line_content": "                   hash_item_get_cas_ptr(wqitem->cache_item),",
          "content_same": false
        },
        {
          "line": 522,
          "old_api": null,
          "new_api": "clearKeyNullBits",
          "old_text": null,
          "new_text": "op.clearKeyNullBits()",
          "old_line_content": "",
          "new_line_content": "  op.clearKeyNullBits();",
          "content_same": false
        },
        {
          "line": 523,
          "old_api": null,
          "new_api": "workitem_get_key_suffix",
          "old_text": null,
          "new_text": "workitem_get_key_suffix(wqitem)",
          "old_line_content": "",
          "new_line_content": "  const char *dbkey = workitem_get_key_suffix(wqitem);",
          "content_same": false
        },
        {
          "line": 524,
          "old_api": null,
          "new_api": "setKeyPart",
          "old_text": null,
          "new_text": "op.setKeyPart(COL_STORE_KEY, dbkey, wqitem->base.nsuffix)",
          "old_line_content": "",
          "new_line_content": "  op.setKeyPart(COL_STORE_KEY, dbkey, wqitem->base.nsuffix);  ",
          "content_same": false
        },
        {
          "line": 1037,
          "old_api": null,
          "new_api": "worker_close",
          "old_text": null,
          "new_text": "worker_close(tx, wqitem)",
          "old_line_content": "/*  Allocate a hash table item, populate it with the original key ",
          "new_line_content": "  worker_close(tx, wqitem);",
          "content_same": false
        },
        {
          "line": 527,
          "old_api": null,
          "new_api": "startTransaction",
          "old_text": null,
          "new_text": "op.startTransaction(wqitem->ndb_instance->db)",
          "old_line_content": "              wqitem->base.math_create, wqitem->base.retries);",
          "new_line_content": "  tx = op.startTransaction(wqitem->ndb_instance->db);",
          "content_same": false
        },
        {
          "line": 534,
          "old_api": null,
          "new_api": "DEBUG_PRINT",
          "old_text": null,
          "new_text": "DEBUG_PRINT(\"create: %d   retries: %d\", \n              wqitem->base.math_create, wqitem->base.retries)",
          "old_line_content": "   insertTuple, setting value to initial_value - delta (AO_IgnoreError)",
          "new_line_content": "  DEBUG_PRINT(\"create: %d   retries: %d\", ",
          "content_same": false
        },
        {
          "line": 536,
          "old_api": null,
          "new_api": "worker_set_cas",
          "old_text": null,
          "new_text": "worker_set_cas(wqitem->pipeline, wqitem->cas)",
          "old_line_content": "   Execute (Commit)",
          "new_line_content": "  worker_set_cas(wqitem->pipeline, wqitem->cas);",
          "content_same": false
        },
        {
          "line": 1049,
          "old_api": null,
          "new_api": "DEBUG_ENTER",
          "old_text": null,
          "new_text": "DEBUG_ENTER()",
          "old_line_content": "  /* item_alloc(engine, key, nkey, flags, exptime, nbytes, cookie) */",
          "new_line_content": "  DEBUG_ENTER();",
          "content_same": false
        },
        {
          "line": 1054,
          "old_api": null,
          "new_api": "getStringifiedLength",
          "old_text": null,
          "new_text": "op.getStringifiedLength()",
          "old_line_content": "  ",
          "new_line_content": "  size_t nbytes = op.getStringifiedLength() + 2;  /* 2 bytes for \\r\\n */",
          "content_same": false
        },
        {
          "line": 1066,
          "old_api": null,
          "new_api": "hash_item_get_key",
          "old_text": null,
          "new_text": "hash_item_get_key(item)",
          "old_line_content": "    else {",
          "new_line_content": "    memcpy(hash_item_get_key(item), wqitem->key, wqitem->base.nkey); // the key",
          "content_same": false
        },
        {
          "line": 555,
          "old_api": null,
          "new_api": "workitem_get_key_suffix",
          "old_text": null,
          "new_text": "workitem_get_key_suffix(wqitem)",
          "old_line_content": "   safety.  We use 2 of them here -- one for the read, the other for the",
          "new_line_content": "  const char *dbkey = workitem_get_key_suffix(wqitem);",
          "content_same": false
        },
        {
          "line": 1067,
          "old_api": null,
          "new_api": "hash_item_get_data",
          "old_text": null,
          "new_text": "hash_item_get_data(item)",
          "old_line_content": "      /* Build a result containing each column */",
          "new_line_content": "    char * data_ptr = hash_item_get_data(item);",
          "content_same": false
        },
        {
          "line": 1069,
          "old_api": null,
          "new_api": "isNull",
          "old_text": null,
          "new_text": "op.isNull(COL_STORE_VALUE)",
          "old_line_content": "        if(i) * (data_ptr + ncopied++) = '\\t';",
          "new_line_content": "    if(wqitem->plan->dup_numbers && op.isNull(COL_STORE_VALUE)",
          "content_same": false
        },
        {
          "line": 1072,
          "old_api": null,
          "new_api": "copyValue",
          "old_text": null,
          "new_text": "op.copyValue(COL_STORE_MATH, data_ptr)",
          "old_line_content": "    }",
          "new_line_content": "      ncopied = op.copyValue(COL_STORE_MATH, data_ptr);",
          "content_same": false
        },
        {
          "line": 1076,
          "old_api": null,
          "new_api": "nValues",
          "old_text": null,
          "new_text": "op.nValues()",
          "old_line_content": "    * (data_ptr + ncopied + 1) = '\\n';",
          "new_line_content": "      for(int i = 0 ; i < op.nValues() ; i++) {",
          "content_same": false
        },
        {
          "line": 572,
          "old_api": null,
          "new_api": "readColumn",
          "old_text": null,
          "new_text": "op1.readColumn(COL_STORE_MATH)",
          "old_line_content": "    op1.buffer = wqitem->row_buffer_1;",
          "new_line_content": "  op1.readColumn(COL_STORE_MATH);",
          "content_same": false
        },
        {
          "line": 1086,
          "old_api": null,
          "new_api": "DEBUG_PRINT",
          "old_text": null,
          "new_text": "DEBUG_PRINT(\"nbytes: %d   ncopied: %d\", nbytes, ncopied + 2)",
          "old_line_content": "    if(wqitem->prefix_info.do_mc_read) {",
          "new_line_content": "    DEBUG_PRINT(\"nbytes: %d   ncopied: %d\", nbytes, ncopied + 2);",
          "content_same": false
        },
        {
          "line": 579,
          "old_api": null,
          "new_api": "workitem_allocate_rowbuffer_2",
          "old_text": null,
          "new_text": "workitem_allocate_rowbuffer_2(wqitem, needed)",
          "old_line_content": "    ",
          "new_line_content": "    workitem_allocate_rowbuffer_2(wqitem, needed);    ",
          "content_same": false
        },
        {
          "line": 1096,
          "old_api": null,
          "new_api": "store_item",
          "old_text": null,
          "new_text": "store_item(se, item, wqitem->cas, OPERATION_SET, wqitem->cookie)",
          "old_line_content": "  }",
          "new_line_content": "      status = store_item(se, item, wqitem->cas, OPERATION_SET, wqitem->cookie);",
          "content_same": false
        },
        {
          "line": 585,
          "old_api": null,
          "new_api": "clearKeyNullBits",
          "old_text": null,
          "new_text": "op1.clearKeyNullBits()",
          "old_line_content": "    if(server_cas) {",
          "new_line_content": "    op1.clearKeyNullBits();",
          "content_same": false
        },
        {
          "line": 589,
          "old_api": null,
          "new_api": "clearNullBits",
          "old_text": null,
          "new_text": "op2.clearNullBits()",
          "old_line_content": "    }",
          "new_line_content": "    op2.clearNullBits();",
          "content_same": false
        },
        {
          "line": 590,
          "old_api": null,
          "new_api": "setColumn",
          "old_text": null,
          "new_text": "op2.setColumn(COL_STORE_KEY, dbkey, wqitem->base.nsuffix)",
          "old_line_content": "    /* In \"dup_numbers\" mode, also null out the text version of the value */",
          "new_line_content": "    op2.setColumn(COL_STORE_KEY, dbkey, wqitem->base.nsuffix);",
          "content_same": false
        },
        {
          "line": 1102,
          "old_api": null,
          "new_api": "DEBUG_PRINT",
          "old_text": null,
          "new_text": "DEBUG_PRINT(\"Failure.  Item: %p\", item)",
          "old_line_content": "  const Uint32 R2 = 2;  // a register",
          "new_line_content": "    DEBUG_PRINT(\"Failure.  Item: %p\", item);",
          "content_same": false
        },
        {
          "line": 594,
          "old_api": null,
          "new_api": "readColumn",
          "old_text": null,
          "new_text": "op1.readColumn(COL_STORE_CAS)",
          "old_line_content": "    }",
          "new_line_content": "      op1.readColumn(COL_STORE_CAS);",
          "content_same": false
        },
        {
          "line": 595,
          "old_api": null,
          "new_api": "setColumnBigUnsigned",
          "old_text": null,
          "new_text": "op2.setColumnBigUnsigned(COL_STORE_CAS, * wqitem->cas)",
          "old_line_content": "  } ",
          "new_line_content": "      op2.setColumnBigUnsigned(COL_STORE_CAS, * wqitem->cas);",
          "content_same": false
        },
        {
          "line": 596,
          "old_api": null,
          "new_api": "setColumnBigUnsigned",
          "old_text": null,
          "new_text": "op3.setColumnBigUnsigned(COL_STORE_CAS, * wqitem->cas)",
          "old_line_content": "  ",
          "new_line_content": "      op3.setColumnBigUnsigned(COL_STORE_CAS, * wqitem->cas);",
          "content_same": false
        },
        {
          "line": 600,
          "old_api": null,
          "new_api": "setColumnNull",
          "old_text": null,
          "new_text": "op2.setColumnNull(COL_STORE_VALUE)",
          "old_line_content": "  /* NdbOperation #1: READ */",
          "new_line_content": "      op2.setColumnNull(COL_STORE_VALUE);",
          "content_same": false
        },
        {
          "line": 601,
          "old_api": null,
          "new_api": "setColumnNull",
          "old_text": null,
          "new_text": "op3.setColumnNull(COL_STORE_VALUE)",
          "old_line_content": "  {",
          "new_line_content": "      op3.setColumnNull(COL_STORE_VALUE);",
          "content_same": false
        },
        {
          "line": 606,
          "old_api": null,
          "new_api": "startTransaction",
          "old_text": null,
          "new_text": "op1.startTransaction(wqitem->ndb_instance->db)",
          "old_line_content": "      return op_failed; ",
          "new_line_content": "  tx = op1.startTransaction(wqitem->ndb_instance->db);",
          "content_same": false
        },
        {
          "line": 1118,
          "old_api": null,
          "new_api": "branch_ne",
          "old_text": null,
          "new_text": "r->branch_ne(R1, R2, MISMATCH)",
          "old_line_content": "  ",
          "new_line_content": "  r->branch_ne(R1, R2, MISMATCH);            // if(R1 != R2) goto MISMATCH",
          "content_same": false
        },
        {
          "line": 1121,
          "old_api": null,
          "new_api": "interpret_exit_ok",
          "old_text": null,
          "new_text": "r->interpret_exit_ok()",
          "old_line_content": "",
          "new_line_content": "  r->interpret_exit_ok();                    // allow operation to succeed",
          "content_same": false
        },
        {
          "line": 610,
          "old_api": null,
          "new_api": "readTuple",
          "old_text": null,
          "new_text": "op1.readTuple(tx, NdbOperation::LM_Exclusive)",
          "old_line_content": "  /* NdbOperation #2: INSERT (AO_IgnoreError) */",
          "new_line_content": "    ndbop1 = op1.readTuple(tx, NdbOperation::LM_Exclusive);",
          "content_same": false
        },
        {
          "line": 612,
          "old_api": null,
          "new_api": "getNdbError",
          "old_text": null,
          "new_text": "tx->getNdbError()",
          "old_line_content": "    /* Offset the initial value to compensate for the update */",
          "new_line_content": "      logger->log(LOG_WARNING, 0, \"readTuple(): %s\\n\", tx->getNdbError().message);",
          "content_same": false
        },
        {
          "line": 613,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "tx->close()",
          "old_line_content": "    uint64_t initial_value;",
          "new_line_content": "      tx->close();",
          "content_same": false
        },
        {
          "line": 1124,
          "old_api": null,
          "new_api": "def_label",
          "old_text": null,
          "new_text": "r->def_label(MISMATCH)",
          "old_line_content": "",
          "new_line_content": "  r->def_label(MISMATCH);",
          "content_same": false
        },
        {
          "line": 1125,
          "old_api": null,
          "new_api": "interpret_exit_nok",
          "old_text": null,
          "new_text": "r->interpret_exit_nok(2010)",
          "old_line_content": "",
          "new_line_content": "  r->interpret_exit_nok(2010);               // abort the operation",
          "content_same": false
        },
        {
          "line": 1127,
          "old_api": null,
          "new_api": "finalise",
          "old_text": null,
          "new_text": "r->finalise()",
          "old_line_content": "",
          "new_line_content": "  return r->finalise();                      // resolve the label/branch",
          "content_same": false
        },
        {
          "line": 626,
          "old_api": null,
          "new_api": "setColumnBigUnsigned",
          "old_text": null,
          "new_text": "op2.setColumnBigUnsigned(COL_STORE_MATH, initial_value)",
          "old_line_content": "    if(! ndbop2) {",
          "new_line_content": "    op2.setColumnBigUnsigned(COL_STORE_MATH, initial_value);",
          "content_same": false
        },
        {
          "line": 633,
          "old_api": null,
          "new_api": "insertTuple",
          "old_text": null,
          "new_text": "op2.insertTuple(tx, & options)",
          "old_line_content": "  /* NdbOperation #3: Interpreted Update */",
          "new_line_content": "    ndbop2 = op2.insertTuple(tx, & options); ",
          "content_same": false
        },
        {
          "line": 635,
          "old_api": null,
          "new_api": "getNdbError",
          "old_text": null,
          "new_text": "tx->getNdbError()",
          "old_line_content": "    NdbOperation::OperationOptions options;",
          "new_line_content": "      logger->log(LOG_WARNING, 0, \"insertTuple(): %s\\n\", tx->getNdbError().message);",
          "content_same": false
        },
        {
          "line": 636,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "tx->close()",
          "old_line_content": "    const Uint32 program_size = 32;",
          "new_line_content": "      tx->close();",
          "content_same": false
        },
        {
          "line": 658,
          "old_api": null,
          "new_api": "code.branch_gt     (Rdel, Rcol, SUB_ZERO)",
          "old_text": null,
          "new_text": "code.branch_gt     (Rdel, Rcol, SUB_ZERO)",
          "old_line_content": "    }",
          "new_line_content": "      code.branch_gt     (Rdel, Rcol, SUB_ZERO);       // if R1 > R2 goto SUB_ZERO",
          "content_same": false
        },
        {
          "line": 659,
          "old_api": null,
          "new_api": "code.sub_reg       (Rres, Rcol, Rdel)",
          "old_text": null,
          "new_text": "code.sub_reg       (Rres, Rcol, Rdel)",
          "old_line_content": "    ",
          "new_line_content": "      code.sub_reg       (Rres, Rcol, Rdel);           // let R3 = R2 - R1",
          "content_same": false
        },
        {
          "line": 661,
          "old_api": null,
          "new_api": "interpret_exit_ok",
          "old_text": null,
          "new_text": "code.interpret_exit_ok()",
          "old_line_content": "    ",
          "new_line_content": "      code.interpret_exit_ok();",
          "content_same": false
        },
        {
          "line": 662,
          "old_api": null,
          "new_api": "code.def_label     (SUB_ZERO)",
          "old_text": null,
          "new_text": "code.def_label     (SUB_ZERO)",
          "old_line_content": "    options.optionsPresent = NdbOperation::OperationOptions::OO_INTERPRETED;",
          "new_line_content": "      code.def_label     (SUB_ZERO);",
          "content_same": false
        },
        {
          "line": 663,
          "old_api": null,
          "new_api": "load_const_u64",
          "old_text": null,
          "new_text": "code.load_const_u64(Rres, 0)",
          "old_line_content": "    options.interpretedCode = & code;",
          "new_line_content": "      code.load_const_u64(Rres, 0);                    // Set to zero",
          "content_same": false
        },
        {
          "line": 664,
          "old_api": null,
          "new_api": "code.write_attr    (plan->math_column_id, Rres)",
          "old_text": null,
          "new_text": "code.write_attr    (plan->math_column_id, Rres)",
          "old_line_content": "    ",
          "new_line_content": "      code.write_attr    (plan->math_column_id, Rres); // Store into column ",
          "content_same": false
        },
        {
          "line": 675,
          "old_api": null,
          "new_api": "getNdbError",
          "old_text": null,
          "new_text": "tx->getNdbError()",
          "old_line_content": "}",
          "new_line_content": "      logger->log(LOG_WARNING, 0, \"updateInterpreted(): %s\\n\", tx->getNdbError().message);",
          "content_same": false
        },
        {
          "line": 676,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "tx->close()",
          "old_line_content": "",
          "new_line_content": "      tx->close();",
          "content_same": false
        },
        {
          "line": 681,
          "old_api": null,
          "new_api": "executeAsynchPrepare",
          "old_text": null,
          "new_text": "tx->executeAsynchPrepare(NdbTransaction::Commit, callback_incr, (void *) wqitem)",
          "old_line_content": "  workitem *wqitem = (workitem *) itemptr;",
          "new_line_content": "  tx->executeAsynchPrepare(NdbTransaction::Commit, callback_incr, (void *) wqitem);",
          "content_same": false
        },
        {
          "line": 694,
          "old_api": null,
          "new_api": "getNdbError",
          "old_text": null,
          "new_text": "tx->getNdbError()",
          "old_line_content": "      return;",
          "new_line_content": "  if(tx->getNdbError().classification == NdbError::NoError) {",
          "content_same": false
        },
        {
          "line": 695,
          "old_api": null,
          "new_api": "DEBUG_PRINT",
          "old_text": null,
          "new_text": "DEBUG_PRINT(\"Success.\")",
          "old_line_content": "    }",
          "new_line_content": "    DEBUG_PRINT(\"Success.\");",
          "content_same": false
        },
        {
          "line": 701,
          "old_api": null,
          "new_api": "next_step",
          "old_text": null,
          "new_text": "next_step(tx, wqitem)",
          "old_line_content": "    wqitem->status = & status_block_cas_mismatch;    ",
          "new_line_content": "      next_step(tx, wqitem);",
          "content_same": false
        },
        {
          "line": 707,
          "old_api": null,
          "new_api": "DEBUG_PRINT",
          "old_text": null,
          "new_text": "DEBUG_PRINT(\"CAS mismatch.\")",
          "old_line_content": "    if(wqitem->cas) * wqitem->cas = 0ULL;",
          "new_line_content": "    DEBUG_PRINT(\"CAS mismatch.\");",
          "content_same": false
        },
        {
          "line": 712,
          "old_api": null,
          "new_api": "getNdbError",
          "old_text": null,
          "new_text": "tx->getNdbError()",
          "old_line_content": "        wqitem->status = & status_block_bad_replace;",
          "new_line_content": "  else if(tx->getNdbError().classification == NdbError::NoDataFound) {",
          "content_same": false
        },
        {
          "line": 714,
          "old_api": null,
          "new_api": "getNdbError",
          "old_text": null,
          "new_text": "tx->getNdbError()",
          "old_line_content": "      default:",
          "new_line_content": "    DEBUG_PRINT(\"NoDataFound [%d].\", tx->getNdbError().code);",
          "content_same": false
        },
        {
          "line": 728,
          "old_api": null,
          "new_api": "getNdbError",
          "old_text": null,
          "new_text": "tx->getNdbError()",
          "old_line_content": "  }",
          "new_line_content": "  else if(tx->getNdbError().code == 630) {",
          "content_same": false
        },
        {
          "line": 729,
          "old_api": null,
          "new_api": "DEBUG_PRINT",
          "old_text": null,
          "new_text": "DEBUG_PRINT(\"Duplicate key on insert.\")",
          "old_line_content": "  /* Out of memory */",
          "new_line_content": "    DEBUG_PRINT(\"Duplicate key on insert.\");",
          "content_same": false
        },
        {
          "line": 734,
          "old_api": null,
          "new_api": "getNdbError",
          "old_text": null,
          "new_text": "tx->getNdbError()",
          "old_line_content": "  /* 284: Table not defined in TC (stale definition) */",
          "new_line_content": "  else if(tx->getNdbError().code == 897) {",
          "content_same": false
        },
        {
          "line": 738,
          "old_api": null,
          "new_api": "getNdbError",
          "old_text": null,
          "new_text": "tx->getNdbError()",
          "old_line_content": "    wqitem->status = & status_block_misc_error;",
          "new_line_content": "  else if(tx->getNdbError().code == 827) {",
          "content_same": false
        },
        {
          "line": 739,
          "old_api": null,
          "new_api": "getNdbError",
          "old_text": null,
          "new_text": "tx->getNdbError()",
          "old_line_content": "  }",
          "new_line_content": "    log_ndb_error(tx->getNdbError());",
          "content_same": false
        },
        {
          "line": 745,
          "old_api": null,
          "new_api": "getNdbError",
          "old_text": null,
          "new_text": "tx->getNdbError()",
          "old_line_content": "  }",
          "new_line_content": "    log_ndb_error(tx->getNdbError());",
          "content_same": false
        },
        {
          "line": 751,
          "old_api": null,
          "new_api": "getNdbError",
          "old_text": null,
          "new_text": "tx->getNdbError()",
          "old_line_content": "void callback_incr(int result, NdbTransaction *tx, void *itemptr) {",
          "new_line_content": "    log_ndb_error(tx->getNdbError());",
          "content_same": false
        },
        {
          "line": 755,
          "old_api": null,
          "new_api": "worker_close",
          "old_text": null,
          "new_text": "worker_close(tx, wqitem)",
          "old_line_content": "  /*  read  insert  update cr_flag response",
          "new_line_content": "  worker_close(tx, wqitem);",
          "content_same": false
        },
        {
          "line": 772,
          "old_api": null,
          "new_api": "getNdbError",
          "old_text": null,
          "new_text": "tx->getNdbError()",
          "old_line_content": "  if(ndbop1) {  /* ndbop1 is the read operation */",
          "new_line_content": "  int tx_result = tx->getNdbError().code;",
          "content_same": false
        },
        {
          "line": 777,
          "old_api": null,
          "new_api": "getNextCompletedOperation",
          "old_text": null,
          "new_text": "tx->getNextCompletedOperation(NULL)",
          "old_line_content": "    else {",
          "new_line_content": "  ndbop1 = tx->getNextCompletedOperation(NULL);",
          "content_same": false
        },
        {
          "line": 778,
          "old_api": null,
          "new_api": "getNdbError",
          "old_text": null,
          "new_text": "ndbop1->getNdbError()",
          "old_line_content": "      ndbop2 = ndbop1;  /* no insert (create flag was not set) */",
          "new_line_content": "  r_read = ndbop1->getNdbError().code;",
          "content_same": false
        },
        {
          "line": 790,
          "old_api": null,
          "new_api": "getNextCompletedOperation",
          "old_text": null,
          "new_text": "tx->getNextCompletedOperation(ndbop2)",
          "old_line_content": "    /* row did not exist, and create flag was not set */",
          "new_line_content": "      ndbop3 = tx->getNextCompletedOperation(ndbop2);  /* the update */",
          "content_same": false
        },
        {
          "line": 791,
          "old_api": null,
          "new_api": "getNdbError",
          "old_text": null,
          "new_text": "ndbop3->getNdbError()",
          "old_line_content": "    wqitem->status = & status_block_item_not_found;",
          "new_line_content": "      r_update = ndbop3->getNdbError().code;",
          "content_same": false
        },
        {
          "line": 794,
          "old_api": null,
          "new_api": "DEBUG_PRINT",
          "old_text": null,
          "new_text": "DEBUG_PRINT(\"tx: %d   r_read: %d   r_insert: %d   r_update: %d   create: %d\",\n              tx_result, r_read, r_insert, r_update, wqitem->base.math_create)",
          "old_line_content": "    /* row existed.  return fetched_value +/- delta. */",
          "new_line_content": "  DEBUG_PRINT(\"tx: %d   r_read: %d   r_insert: %d   r_update: %d   create: %d\",",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": null,
          "new_api": "getBigUnsignedValue",
          "old_text": null,
          "new_text": "op.getBigUnsignedValue(COL_STORE_MATH)",
          "old_line_content": "        wqitem->math_value = stored - wqitem->math_flags;",
          "new_line_content": "    uint64_t stored = op.getBigUnsignedValue(COL_STORE_MATH);",
          "content_same": false
        },
        {
          "line": 833,
          "old_api": null,
          "new_api": "worker_prepare_operation",
          "old_text": null,
          "new_text": "worker_prepare_operation(wqitem)",
          "old_line_content": "      wqitem->status = & status_block_misc_error;",
          "new_line_content": "      op_status_t r = worker_prepare_operation(wqitem); ",
          "content_same": false
        },
        {
          "line": 840,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "logger->log(LOG_WARNING, 0, \"incr/decr: giving up, too many retries.\\n\")",
          "old_line_content": "",
          "new_line_content": "      logger->log(LOG_WARNING, 0, \"incr/decr: giving up, too many retries.\\n\");",
          "content_same": false
        },
        {
          "line": 851,
          "old_api": null,
          "new_api": "getNdbError",
          "old_text": null,
          "new_text": "tx->getNdbError()",
          "old_line_content": "void worker_close(NdbTransaction *tx, workitem *wqitem) {",
          "new_line_content": "    DEBUG_PRINT(\"%d %s !!\", result, tx->getNdbError().message);",
          "content_same": false
        },
        {
          "line": 853,
          "old_api": null,
          "new_api": "worker_close",
          "old_text": null,
          "new_text": "worker_close(tx, wqitem)",
          "old_line_content": "  ndb_pipeline * & pipeline = wqitem->pipeline;",
          "new_line_content": "  worker_close(tx, wqitem);",
          "content_same": false
        },
        {
          "line": 860,
          "old_api": null,
          "new_api": "DEBUG_PRINT",
          "old_text": null,
          "new_text": "DEBUG_PRINT(\"%d.%d\", wqitem->pipeline->id, wqitem->id)",
          "old_line_content": "",
          "new_line_content": "  DEBUG_PRINT(\"%d.%d\", wqitem->pipeline->id, wqitem->id);",
          "content_same": false
        },
        {
          "line": 862,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "tx->close()",
          "old_line_content": "void worker_append(NdbTransaction *tx, workitem *item) {",
          "new_line_content": "  tx->close();",
          "content_same": false
        },
        {
          "line": 865,
          "old_api": null,
          "new_api": "store_engine_specific",
          "old_text": null,
          "new_text": "pipeline->engine->server.cookie->store_engine_specific(wqitem->cookie, wqitem)",
          "old_line_content": "    return;",
          "new_line_content": "  pipeline->engine->server.cookie->store_engine_specific(wqitem->cookie, wqitem); ",
          "content_same": false
        },
        {
          "line": 866,
          "old_api": null,
          "new_api": "yield",
          "old_text": null,
          "new_text": "pipeline->scheduler->yield(wqitem)",
          "old_line_content": "  }",
          "new_line_content": "  pipeline->scheduler->yield(wqitem);",
          "content_same": false
        },
        {
          "line": 872,
          "old_api": null,
          "new_api": "ExternalValue::append_after_read(tx, item)",
          "old_text": null,
          "new_text": "ExternalValue::append_after_read(tx, item)",
          "old_line_content": "  size_t current_len = 0;",
          "new_line_content": "    ExternalValue::append_after_read(tx, item);",
          "content_same": false
        },
        {
          "line": 876,
          "old_api": null,
          "new_api": "DEBUG_PRINT",
          "old_text": null,
          "new_text": "DEBUG_PRINT(\"%d.%d\", item->pipeline->id, item->id)",
          "old_line_content": "  /* worker_do_read() has already written the key into item->ndb_key_buffer. ",
          "new_line_content": "  DEBUG_PRINT(\"%d.%d\", item->pipeline->id, item->id);",
          "content_same": false
        },
        {
          "line": 881,
          "old_api": null,
          "new_api": "hash_item_get_data",
          "old_text": null,
          "new_text": "hash_item_get_data(item->cache_item)",
          "old_line_content": "  readop.buffer = item->row_buffer_1;",
          "new_line_content": "  const char * affix_val = hash_item_get_data(item->cache_item);",
          "content_same": false
        },
        {
          "line": 890,
          "old_api": null,
          "new_api": "nValues",
          "old_text": null,
          "new_text": "readop.nValues()",
          "old_line_content": "  Operation op(item->plan, item->base.verb, item->ndb_key_buffer);",
          "new_line_content": "  assert(readop.nValues() == 1);",
          "content_same": false
        },
        {
          "line": 891,
          "old_api": null,
          "new_api": "getStringValueNoCopy",
          "old_text": null,
          "new_text": "readop.getStringValueNoCopy(COL_STORE_VALUE + 0, & current_val, & current_len)",
          "old_line_content": "  const NdbOperation *ndb_op = 0;  ",
          "new_line_content": "  readop.getStringValueNoCopy(COL_STORE_VALUE + 0, & current_val, & current_len);",
          "content_same": false
        },
        {
          "line": 903,
          "old_api": null,
          "new_api": "workitem_allocate_rowbuffer_2",
          "old_text": null,
          "new_text": "workitem_allocate_rowbuffer_2(item, max_len)",
          "old_line_content": "  }",
          "new_line_content": "  workitem_allocate_rowbuffer_2(item, max_len);",
          "content_same": false
        },
        {
          "line": 913,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(item->base.verb == OPERATION_PREPEND)",
          "old_line_content": "  /* Set the row */",
          "new_line_content": "    assert(item->base.verb == OPERATION_PREPEND);",
          "content_same": false
        },
        {
          "line": 922,
          "old_api": null,
          "new_api": "setNullBits",
          "old_text": null,
          "new_text": "op.setNullBits()",
          "old_line_content": "    // Inform the scheduler that this item must be re-polled",
          "new_line_content": "  op.setNullBits();",
          "content_same": false
        },
        {
          "line": 924,
          "old_api": null,
          "new_api": "setColumn",
          "old_text": null,
          "new_text": "op.setColumn(COL_STORE_VALUE, current_val, total_len)",
          "old_line_content": "    item->next_step = (void *) worker_finalize_write;",
          "new_line_content": "  op.setColumn(COL_STORE_VALUE, current_val, total_len);",
          "content_same": false
        },
        {
          "line": 926,
          "old_api": null,
          "new_api": "setColumnBigUnsigned",
          "old_text": null,
          "new_text": "op.setColumnBigUnsigned(COL_STORE_CAS, * item->cas)",
          "old_line_content": "  }",
          "new_line_content": "    op.setColumnBigUnsigned(COL_STORE_CAS, * item->cas);",
          "content_same": false
        },
        {
          "line": 927,
          "old_api": null,
          "new_api": "updateTuple",
          "old_text": null,
          "new_text": "op.updateTuple(tx)",
          "old_line_content": "  else {",
          "new_line_content": "  ndb_op = op.updateTuple(tx);",
          "content_same": false
        },
        {
          "line": 937,
          "old_api": null,
          "new_api": "DEBUG_PRINT",
          "old_text": null,
          "new_text": "DEBUG_PRINT(\"NDB operation failed.  workitem %d.%d\", item->pipeline->id,\n                item->id)",
          "old_line_content": "",
          "new_line_content": "    DEBUG_PRINT(\"NDB operation failed.  workitem %d.%d\", item->pipeline->id,",
          "content_same": false
        },
        {
          "line": 939,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "tx->close()",
          "old_line_content": "  Operation op(wqitem->plan, OP_READ);",
          "new_line_content": "    tx->close();",
          "content_same": false
        },
        {
          "line": 941,
          "old_api": null,
          "new_api": "workitem_free",
          "old_text": null,
          "new_text": "workitem_free(item)",
          "old_line_content": "",
          "new_line_content": "    workitem_free(item);",
          "content_same": false
        },
        {
          "line": 950,
          "old_api": null,
          "new_api": "isNull",
          "old_text": null,
          "new_text": "op.isNull(COL_STORE_EXT_SIZE)",
          "old_line_content": "",
          "new_line_content": "  if(op.isNull(COL_STORE_EXT_SIZE)) {",
          "content_same": false
        },
        {
          "line": 951,
          "old_api": null,
          "new_api": "worker_finalize_read",
          "old_text": null,
          "new_text": "worker_finalize_read(tx, wqitem)",
          "old_line_content": "",
          "new_line_content": "    worker_finalize_read(tx, wqitem);",
          "content_same": false
        },
        {
          "line": 961,
          "old_api": null,
          "new_api": "DEBUG_PRINT",
          "old_text": null,
          "new_text": "DEBUG_PRINT(\" Deleting [%d.%d]\", wqitem->pipeline->id, wqitem->id)",
          "old_line_content": "",
          "new_line_content": "  DEBUG_PRINT(\" Deleting [%d.%d]\", wqitem->pipeline->id, wqitem->id);",
          "content_same": false
        },
        {
          "line": 965,
          "old_api": null,
          "new_api": "reschedule",
          "old_text": null,
          "new_text": "wqitem->pipeline->scheduler->reschedule(wqitem)",
          "old_line_content": "  ExpireTime exp_time(wqitem);",
          "new_line_content": "  wqitem->pipeline->scheduler->reschedule(wqitem);",
          "content_same": false
        },
        {
          "line": 966,
          "old_api": null,
          "new_api": "executeAsynchPrepare",
          "old_text": null,
          "new_text": "tx->executeAsynchPrepare(NdbTransaction::Commit, callback_close, (void *) wqitem)",
          "old_line_content": "  Operation op(wqitem->plan, OP_READ);",
          "new_line_content": "  tx->executeAsynchPrepare(NdbTransaction::Commit, callback_close, (void *) wqitem);    ",
          "content_same": false
        },
        {
          "line": 971,
          "old_api": null,
          "new_api": "DEBUG_PRINT",
          "old_text": null,
          "new_text": "DEBUG_PRINT(\"%d.%d\",wqitem->pipeline->id, wqitem->id)",
          "old_line_content": "    return;",
          "new_line_content": "  DEBUG_PRINT(\"%d.%d\",wqitem->pipeline->id, wqitem->id);",
          "content_same": false
        },
        {
          "line": 463,
          "old_api": null,
          "new_api": "canUseSimpleRead",
          "old_text": null,
          "new_text": "plan->canUseSimpleRead()",
          "old_line_content": "  ",
          "new_line_content": "  if(plan->canUseSimpleRead()) {",
          "content_same": false
        },
        {
          "line": 978,
          "old_api": null,
          "new_api": "delete_expired_item",
          "old_text": null,
          "new_text": "delete_expired_item(wqitem, tx)",
          "old_line_content": "  else",
          "new_line_content": "    delete_expired_item(wqitem, tx);",
          "content_same": false
        },
        {
          "line": 983,
          "old_api": null,
          "new_api": "getIntValue",
          "old_text": null,
          "new_text": "op.getIntValue(COL_STORE_FLAGS)",
          "old_line_content": "  }",
          "new_line_content": "    wqitem->math_flags = htonl(op.getIntValue(COL_STORE_FLAGS));",
          "content_same": false
        },
        {
          "line": 472,
          "old_api": null,
          "new_api": "readTuple",
          "old_text": null,
          "new_text": "op.readTuple(tx, lockmode)",
          "old_line_content": "    (wqitem->base.use_ext_val ? worker_check_read : worker_finalize_read);",
          "new_line_content": "  if(! op.readTuple(tx, lockmode)) {",
          "content_same": false
        },
        {
          "line": 985,
          "old_api": null,
          "new_api": "htonl",
          "old_text": null,
          "new_text": "htonl(wqitem->plan->static_flags)",
          "old_line_content": "  /* Try to send the value from the row_buffer without copying it. */",
          "new_line_content": "    wqitem->math_flags = htonl(wqitem->plan->static_flags);",
          "content_same": false
        },
        {
          "line": 474,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "tx->close()",
          "old_line_content": "  return op_async_prepared;  ",
          "new_line_content": "    tx->close();",
          "content_same": false
        },
        {
          "line": 481,
          "old_api": null,
          "new_api": "executeAsynchPrepare",
          "old_text": null,
          "new_text": "tx->executeAsynchPrepare(commitflag, callback_main, (void *) wqitem)",
          "old_line_content": "  /* APPEND/PREPEND is currently not supported for tsv */",
          "new_line_content": "  tx->executeAsynchPrepare(commitflag, callback_main, (void *) wqitem);",
          "content_same": false
        },
        {
          "line": 995,
          "old_api": null,
          "new_api": "nValues",
          "old_text": null,
          "new_text": "op.nValues()",
          "old_line_content": "    /* \"cache_item == workitem\" is a sort of code, required because memcached",
          "new_line_content": "     && op.nValues() == 1",
          "content_same": false
        },
        {
          "line": 996,
          "old_api": null,
          "new_api": "isNull",
          "old_text": null,
          "new_text": "op.isNull(COL_STORE_VALUE)",
          "old_line_content": "        expects us to return a non-zero item.  In ndb_release() we will look ",
          "new_line_content": "     && ! (op.isNull(COL_STORE_VALUE) && wqitem->plan->dup_numbers)",
          "content_same": false
        },
        {
          "line": 997,
          "old_api": null,
          "new_api": "getStringValueNoCopy",
          "old_text": null,
          "new_text": "op.getStringValueNoCopy(COL_STORE_VALUE, & wqitem->value_ptr, & wqitem->value_size)",
          "old_line_content": "        for this and use it to prevent double-freeing of the workitem.  */",
          "new_line_content": "     && op.getStringValueNoCopy(COL_STORE_VALUE, & wqitem->value_ptr, & wqitem->value_size)",
          "content_same": false
        },
        {
          "line": 998,
          "old_api": null,
          "new_api": "appendCRLF",
          "old_text": null,
          "new_text": "op.appendCRLF(COL_STORE_VALUE, wqitem->value_size)",
          "old_line_content": "    wqitem->cache_item = (hash_item *) wqitem;    ",
          "new_line_content": "     && op.appendCRLF(COL_STORE_VALUE, wqitem->value_size))",
          "content_same": false
        },
        {
          "line": 487,
          "old_api": null,
          "new_api": "DEBUG_ENTER",
          "old_text": null,
          "new_text": "DEBUG_ENTER()",
          "old_line_content": "  ",
          "new_line_content": "  DEBUG_ENTER();",
          "content_same": false
        },
        {
          "line": 1001,
          "old_api": null,
          "new_api": "DEBUG_PRINT",
          "old_text": null,
          "new_text": "DEBUG_PRINT(\"using no-copy buffer.\")",
          "old_line_content": "    /* Copy the value into a new buffer */",
          "new_line_content": "    DEBUG_PRINT(\"using no-copy buffer.\");",
          "content_same": false
        },
        {
          "line": 494,
          "old_api": null,
          "new_api": "setKeyForReading",
          "old_text": null,
          "new_text": "setKeyForReading(op)",
          "old_line_content": "  ",
          "new_line_content": "  setKeyForReading(op);",
          "content_same": false
        },
        {
          "line": 498,
          "old_api": null,
          "new_api": "getNdbError",
          "old_text": null,
          "new_text": "tx->getNdbError()",
          "old_line_content": "  return op_async_prepared;",
          "new_line_content": "    logger->log(LOG_WARNING, 0, \"readTuple(): %s\\n\", tx->getNdbError().message);",
          "content_same": false
        },
        {
          "line": 499,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "tx->close()",
          "old_line_content": "}",
          "new_line_content": "    tx->close();",
          "content_same": false
        },
        {
          "line": 1010,
          "old_api": null,
          "new_api": "build_hash_item",
          "old_text": null,
          "new_text": "build_hash_item(wqitem, op, exp_time)",
          "old_line_content": "  if(wqitem->prefix_info.do_mc_write) {",
          "new_line_content": "    build_hash_item(wqitem, op, exp_time);",
          "content_same": false
        },
        {
          "line": 1013,
          "old_api": null,
          "new_api": "worker_close",
          "old_text": null,
          "new_text": "worker_close(tx, wqitem)",
          "old_line_content": "     (1) store_item will store nbytes as length, which is wrong.",
          "new_line_content": "  worker_close(tx, wqitem);",
          "content_same": false
        },
        {
          "line": 505,
          "old_api": null,
          "new_api": "executeAsynchPrepare",
          "old_text": null,
          "new_text": "tx->executeAsynchPrepare(NdbTransaction::NoCommit, callback_main, (void *) wqitem)",
          "old_line_content": "  /* Use the workitem's inline key buffer */",
          "new_line_content": "  tx->executeAsynchPrepare(NdbTransaction::NoCommit, callback_main, (void *) wqitem);  ",
          "content_same": false
        },
        {
          "line": 511,
          "old_api": null,
          "new_api": "DEBUG_ENTER",
          "old_text": null,
          "new_text": "DEBUG_ENTER()",
          "old_line_content": "  op.buffer = wqitem->row_buffer_1;",
          "new_line_content": "  DEBUG_ENTER();",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 514,
          "old_api": "clearKeyNullBits",
          "new_api": null,
          "old_text": "op.clearKeyNullBits()",
          "new_text": null,
          "old_line_content": "  op.clearKeyNullBits();",
          "new_line_content": "  op.key_buffer = wqitem->ndb_key_buffer;",
          "content_same": false
        },
        {
          "line": 515,
          "old_api": "workitem_get_key_suffix",
          "new_api": null,
          "old_text": "workitem_get_key_suffix(wqitem)",
          "new_text": null,
          "old_line_content": "  const char *dbkey = workitem_get_key_suffix(wqitem);",
          "new_line_content": "  ",
          "content_same": false
        },
        {
          "line": 516,
          "old_api": "setKeyPart",
          "new_api": null,
          "old_text": "op.setKeyPart(COL_STORE_KEY, dbkey, wqitem->base.nsuffix)",
          "new_text": null,
          "old_line_content": "  op.setKeyPart(COL_STORE_KEY, dbkey, wqitem->base.nsuffix);  ",
          "new_line_content": "  /*  Allocate a new result buffer large enough for the result.",
          "content_same": false
        },
        {
          "line": 510,
          "old_api": "requiredBuffer",
          "new_api": null,
          "old_text": "op.requiredBuffer()",
          "new_text": null,
          "old_line_content": "  workitem_allocate_rowbuffer_1(wqitem, op.requiredBuffer() + 2);",
          "new_line_content": "void WorkerStep1::setKeyForReading(Operation &op) {",
          "content_same": false
        },
        {
          "line": 519,
          "old_api": "startTransaction",
          "new_api": null,
          "old_text": "op.startTransaction(wqitem->ndb_instance->db)",
          "new_text": null,
          "old_line_content": "  tx = op.startTransaction(wqitem->ndb_instance->db);",
          "new_line_content": "  op.buffer = wqitem->row_buffer_1;",
          "content_same": false
        },
        {
          "line": 520,
          "old_api": "DEBUG_ASSERT",
          "new_api": null,
          "old_text": "DEBUG_ASSERT(tx)",
          "new_text": null,
          "old_line_content": "  DEBUG_ASSERT(tx);",
          "new_line_content": "  ",
          "content_same": false
        },
        {
          "line": 526,
          "old_api": "DEBUG_PRINT",
          "new_api": null,
          "old_text": "DEBUG_PRINT(\"create: %d   retries: %d\", \n              wqitem->base.math_create, wqitem->base.retries)",
          "new_text": null,
          "old_line_content": "  DEBUG_PRINT(\"create: %d   retries: %d\", ",
          "new_line_content": "  /* Start a transaction */",
          "content_same": false
        },
        {
          "line": 1041,
          "old_api": "DEBUG_ENTER",
          "new_api": null,
          "old_text": "DEBUG_ENTER()",
          "new_text": null,
          "old_line_content": "  DEBUG_ENTER();",
          "new_line_content": "/*****************************************************************************/",
          "content_same": false
        },
        {
          "line": 1046,
          "old_api": "getStringifiedLength",
          "new_api": null,
          "old_text": "op.getStringifiedLength()",
          "new_text": null,
          "old_line_content": "  size_t nbytes = op.getStringifiedLength() + 2;  /* 2 bytes for \\r\\n */",
          "new_line_content": "    and the results from the read, then store it.    ",
          "content_same": false
        },
        {
          "line": 1050,
          "old_api": "item_alloc",
          "new_api": null,
          "old_text": "item_alloc(se, wqitem->key, wqitem->base.nkey, \n                                wqitem->math_flags,\n                                exp_time.local_cache_expire_time, \n                                nbytes, wqitem->cookie)",
          "new_text": null,
          "old_line_content": "  hash_item * item = item_alloc(se, wqitem->key, wqitem->base.nkey, ",
          "new_line_content": "  ndb_pipeline * & pipeline = wqitem->pipeline;",
          "content_same": false
        },
        {
          "line": 547,
          "old_api": "workitem_get_key_suffix",
          "new_api": null,
          "old_text": "workitem_get_key_suffix(wqitem)",
          "new_text": null,
          "old_line_content": "  const char *dbkey = workitem_get_key_suffix(wqitem);",
          "new_line_content": "   ",
          "content_same": false
        },
        {
          "line": 1059,
          "old_api": "hash_item_get_data",
          "new_api": null,
          "old_text": "hash_item_get_data(item)",
          "new_text": null,
          "old_line_content": "    char * data_ptr = hash_item_get_data(item);",
          "new_line_content": "                                wqitem->math_flags,",
          "content_same": false
        },
        {
          "line": 1061,
          "old_api": "isNull",
          "new_api": null,
          "old_text": "op.isNull(COL_STORE_VALUE)",
          "new_text": null,
          "old_line_content": "    if(wqitem->plan->dup_numbers && op.isNull(COL_STORE_VALUE)",
          "new_line_content": "                                nbytes, wqitem->cookie);",
          "content_same": false
        },
        {
          "line": 1062,
          "old_api": "isNull",
          "new_api": null,
          "old_text": "op.isNull(COL_STORE_MATH)",
          "new_text": null,
          "old_line_content": "       && ! (op.isNull(COL_STORE_MATH))) {",
          "new_line_content": "  ",
          "content_same": false
        },
        {
          "line": 1064,
          "old_api": "copyValue",
          "new_api": null,
          "old_text": "op.copyValue(COL_STORE_MATH, data_ptr)",
          "new_text": null,
          "old_line_content": "      ncopied = op.copyValue(COL_STORE_MATH, data_ptr);",
          "new_line_content": "    /* Now populate the item with the result */",
          "content_same": false
        },
        {
          "line": 1068,
          "old_api": "nValues",
          "new_api": null,
          "old_text": "op.nValues()",
          "new_text": null,
          "old_line_content": "      for(int i = 0 ; i < op.nValues() ; i++) {",
          "new_line_content": "    ",
          "content_same": false
        },
        {
          "line": 563,
          "old_api": "readSelectedColumns",
          "new_api": null,
          "old_text": "op1.readSelectedColumns()",
          "new_text": null,
          "old_line_content": "  op1.readSelectedColumns();",
          "new_line_content": "   safety.  We use 2 of them here -- one for the read, the other for the",
          "content_same": false
        },
        {
          "line": 564,
          "old_api": "readColumn",
          "new_api": null,
          "old_text": "op1.readColumn(COL_STORE_MATH)",
          "new_text": null,
          "old_line_content": "  op1.readColumn(COL_STORE_MATH);",
          "new_line_content": "   update and insert.  This is only because they will make slightly different",
          "content_same": false
        },
        {
          "line": 569,
          "old_api": "requiredBuffer",
          "new_api": null,
          "old_text": "op1.requiredBuffer()",
          "new_text": null,
          "old_line_content": "    size_t needed = op1.requiredBuffer();",
          "new_line_content": "  Operation op3(wqitem);    // update",
          "content_same": false
        },
        {
          "line": 570,
          "old_api": "workitem_allocate_rowbuffer_1",
          "new_api": null,
          "old_text": "workitem_allocate_rowbuffer_1(wqitem, needed)",
          "new_text": null,
          "old_line_content": "    workitem_allocate_rowbuffer_1(wqitem, needed);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1088,
          "old_api": "store_item",
          "new_api": null,
          "old_text": "store_item(se, item, wqitem->cas, OPERATION_SET, wqitem->cookie)",
          "new_text": null,
          "old_line_content": "      status = store_item(se, item, wqitem->cas, OPERATION_SET, wqitem->cookie);",
          "new_line_content": "    /* Point to it in the workitem */",
          "content_same": false
        },
        {
          "line": 581,
          "old_api": "clearNullBits",
          "new_api": null,
          "old_text": "op2.clearNullBits()",
          "new_text": null,
          "old_line_content": "    op2.clearNullBits();",
          "new_line_content": "    op2.buffer = wqitem->row_buffer_2;",
          "content_same": false
        },
        {
          "line": 582,
          "old_api": "setColumn",
          "new_api": null,
          "old_text": "op2.setColumn(COL_STORE_KEY, dbkey, wqitem->base.nsuffix)",
          "new_text": null,
          "old_line_content": "    op2.setColumn(COL_STORE_KEY, dbkey, wqitem->base.nsuffix);",
          "new_line_content": "    op3.buffer = wqitem->row_buffer_2;",
          "content_same": false
        },
        {
          "line": 1094,
          "old_api": "DEBUG_PRINT",
          "new_api": null,
          "old_text": "DEBUG_PRINT(\"Failure.  Item: %p\", item)",
          "new_text": null,
          "old_line_content": "    DEBUG_PRINT(\"Failure.  Item: %p\", item);",
          "new_line_content": "    if(wqitem->prefix_info.do_mc_read) {",
          "content_same": false
        },
        {
          "line": 587,
          "old_api": "setColumnBigUnsigned",
          "new_api": null,
          "old_text": "op2.setColumnBigUnsigned(COL_STORE_CAS, * wqitem->cas)",
          "new_text": null,
          "old_line_content": "      op2.setColumnBigUnsigned(COL_STORE_CAS, * wqitem->cas);",
          "new_line_content": "    ",
          "content_same": false
        },
        {
          "line": 588,
          "old_api": "setColumnBigUnsigned",
          "new_api": null,
          "old_text": "op3.setColumnBigUnsigned(COL_STORE_CAS, * wqitem->cas)",
          "new_text": null,
          "old_line_content": "      op3.setColumnBigUnsigned(COL_STORE_CAS, * wqitem->cas);",
          "new_line_content": "    /* The insert operation also needs the key written into the row */",
          "content_same": false
        },
        {
          "line": 592,
          "old_api": "setColumnNull",
          "new_api": null,
          "old_text": "op2.setColumnNull(COL_STORE_VALUE)",
          "new_text": null,
          "old_line_content": "      op2.setColumnNull(COL_STORE_VALUE);",
          "new_line_content": "    /* CAS */",
          "content_same": false
        },
        {
          "line": 593,
          "old_api": "setColumnNull",
          "new_api": null,
          "old_text": "op3.setColumnNull(COL_STORE_VALUE)",
          "new_text": null,
          "old_line_content": "      op3.setColumnNull(COL_STORE_VALUE);",
          "new_line_content": "    if(server_cas) {",
          "content_same": false
        },
        {
          "line": 1105,
          "old_api": "DEBUG_PRINT",
          "new_api": null,
          "old_text": "DEBUG_PRINT(\"cas_col: %d,  cas_val: %llu\", cas_col, cas_val)",
          "new_text": null,
          "old_line_content": "  DEBUG_PRINT(\"cas_col: %d,  cas_val: %llu\", cas_col, cas_val);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1108,
          "old_api": "load_const_u64",
          "new_api": null,
          "old_text": "r->load_const_u64(R1, cas_val)",
          "new_text": null,
          "old_line_content": "  r->load_const_u64(R1, cas_val);            // load the CAS into R1",
          "new_line_content": "int build_cas_routine(NdbInterpretedCode *r, int cas_col, uint64_t cas_val) {",
          "content_same": false
        },
        {
          "line": 1109,
          "old_api": "read_attr",
          "new_api": null,
          "old_text": "r->read_attr(R2, cas_col)",
          "new_text": null,
          "old_line_content": "  r->read_attr(R2, cas_col);                 // read the cas column into R2",
          "new_line_content": "  const Uint32 R1 = 1;  // a register",
          "content_same": false
        },
        {
          "line": 598,
          "old_api": "startTransaction",
          "new_api": null,
          "old_text": "op1.startTransaction(wqitem->ndb_instance->db)",
          "new_text": null,
          "old_line_content": "  tx = op1.startTransaction(wqitem->ndb_instance->db);",
          "new_line_content": "    /* In \"dup_numbers\" mode, also null out the text version of the value */",
          "content_same": false
        },
        {
          "line": 1110,
          "old_api": "branch_ne",
          "new_api": null,
          "old_text": "r->branch_ne(R1, R2, MISMATCH)",
          "new_text": null,
          "old_line_content": "  r->branch_ne(R1, R2, MISMATCH);            // if(R1 != R2) goto MISMATCH",
          "new_line_content": "  const Uint32 R2 = 2;  // a register",
          "content_same": false
        },
        {
          "line": 602,
          "old_api": "readTuple",
          "new_api": null,
          "old_text": "op1.readTuple(tx, NdbOperation::LM_Exclusive)",
          "new_text": null,
          "old_line_content": "    ndbop1 = op1.readTuple(tx, NdbOperation::LM_Exclusive);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 604,
          "old_api": "getNdbError",
          "new_api": null,
          "old_text": "tx->getNdbError()",
          "new_text": null,
          "old_line_content": "      logger->log(LOG_WARNING, 0, \"readTuple(): %s\\n\", tx->getNdbError().message);",
          "new_line_content": "  ",
          "content_same": false
        },
        {
          "line": 605,
          "old_api": "close",
          "new_api": null,
          "old_text": "tx->close()",
          "new_text": null,
          "old_line_content": "      tx->close();",
          "new_line_content": "  /* Use an op (either one) to start the transaction */",
          "content_same": false
        },
        {
          "line": 1119,
          "old_api": "finalise",
          "new_api": null,
          "old_text": "r->finalise()",
          "new_text": null,
          "old_line_content": "  return r->finalise();                      // resolve the label/branch",
          "new_line_content": "  ",
          "content_same": false
        },
        {
          "line": 618,
          "old_api": "setColumnBigUnsigned",
          "new_api": null,
          "old_text": "op2.setColumnBigUnsigned(COL_STORE_MATH, initial_value)",
          "new_text": null,
          "old_line_content": "    op2.setColumnBigUnsigned(COL_STORE_MATH, initial_value);",
          "new_line_content": "  /* NdbOperation #2: INSERT (AO_IgnoreError) */",
          "content_same": false
        },
        {
          "line": 625,
          "old_api": "insertTuple",
          "new_api": null,
          "old_text": "op2.insertTuple(tx, & options)",
          "new_text": null,
          "old_line_content": "    ndbop2 = op2.insertTuple(tx, & options); ",
          "new_line_content": "      initial_value = wqitem->math_value + wqitem->math_flags;  // decr",
          "content_same": false
        },
        {
          "line": 627,
          "old_api": "getNdbError",
          "new_api": null,
          "old_text": "tx->getNdbError()",
          "new_text": null,
          "old_line_content": "      logger->log(LOG_WARNING, 0, \"insertTuple(): %s\\n\", tx->getNdbError().message);",
          "new_line_content": "    ",
          "content_same": false
        },
        {
          "line": 628,
          "old_api": "close",
          "new_api": null,
          "old_text": "tx->close()",
          "new_text": null,
          "old_line_content": "      tx->close();",
          "new_line_content": "    /* If this insert gets an error, the transaction should continue. */",
          "content_same": false
        },
        {
          "line": 641,
          "old_api": "add_val",
          "new_api": null,
          "old_text": "code.add_val(plan->math_column_id, wqitem->math_flags)",
          "new_text": null,
          "old_line_content": "      code.add_val(plan->math_column_id, wqitem->math_flags);   ",
          "new_line_content": "  /* NdbOperation #3: Interpreted Update */",
          "content_same": false
        },
        {
          "line": 642,
          "old_api": "interpret_exit_ok",
          "new_api": null,
          "old_text": "code.interpret_exit_ok()",
          "new_text": null,
          "old_line_content": "      code.interpret_exit_ok();",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 648,
          "old_api": "load_const_u64",
          "new_api": null,
          "old_text": "code.load_const_u64(Rdel, wqitem->math_flags)",
          "new_text": null,
          "old_line_content": "      code.load_const_u64(Rdel, wqitem->math_flags);   // load R1, delta",
          "new_line_content": "    if(wqitem->base.math_incr) {                                  // incr",
          "content_same": false
        },
        {
          "line": 651,
          "old_api": "code.sub_reg       (Rres, Rcol, Rdel)",
          "new_api": null,
          "old_text": "code.sub_reg       (Rres, Rcol, Rdel)",
          "new_text": null,
          "old_line_content": "      code.sub_reg       (Rres, Rcol, Rdel);           // let R3 = R2 - R1",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 652,
          "old_api": "code.write_attr    (plan->math_column_id, Rres)",
          "new_api": null,
          "old_text": "code.write_attr    (plan->math_column_id, Rres)",
          "new_text": null,
          "old_line_content": "      code.write_attr    (plan->math_column_id, Rres); // Store into column",
          "new_line_content": "    else {                                                        // decr",
          "content_same": false
        },
        {
          "line": 653,
          "old_api": "interpret_exit_ok",
          "new_api": null,
          "old_text": "code.interpret_exit_ok()",
          "new_text": null,
          "old_line_content": "      code.interpret_exit_ok();",
          "new_line_content": "      const Uint32 Rdel = 1, Rcol = 2, Rres = 3;       // registers 1,2,3",
          "content_same": false
        },
        {
          "line": 654,
          "old_api": "code.def_label     (SUB_ZERO)",
          "new_api": null,
          "old_text": "code.def_label     (SUB_ZERO)",
          "new_text": null,
          "old_line_content": "      code.def_label     (SUB_ZERO);",
          "new_line_content": "      const Uint32 SUB_ZERO = 0;                       // a label",
          "content_same": false
        },
        {
          "line": 655,
          "old_api": "load_const_u64",
          "new_api": null,
          "old_text": "code.load_const_u64(Rres, 0)",
          "new_text": null,
          "old_line_content": "      code.load_const_u64(Rres, 0);                    // Set to zero",
          "new_line_content": "      ",
          "content_same": false
        },
        {
          "line": 667,
          "old_api": "getNdbError",
          "new_api": null,
          "old_text": "tx->getNdbError()",
          "new_text": null,
          "old_line_content": "      logger->log(LOG_WARNING, 0, \"updateInterpreted(): %s\\n\", tx->getNdbError().message);",
          "new_line_content": "    ",
          "content_same": false
        },
        {
          "line": 686,
          "old_api": "getNdbError",
          "new_api": null,
          "old_text": "tx->getNdbError()",
          "new_text": null,
          "old_line_content": "  if(tx->getNdbError().classification == NdbError::NoError) {",
          "new_line_content": "/***************** NDB CALLBACKS *********************************************/",
          "content_same": false
        },
        {
          "line": 687,
          "old_api": "DEBUG_PRINT",
          "new_api": null,
          "old_text": "DEBUG_PRINT(\"Success.\")",
          "new_text": null,
          "old_line_content": "    DEBUG_PRINT(\"Success.\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 693,
          "old_api": "next_step",
          "new_api": null,
          "old_text": "next_step(tx, wqitem)",
          "new_text": null,
          "old_line_content": "      next_step(tx, wqitem);",
          "new_line_content": "  /* No Error */",
          "content_same": false
        },
        {
          "line": 698,
          "old_api": "getNdbError",
          "new_api": null,
          "old_text": "tx->getNdbError()",
          "new_text": null,
          "old_line_content": "  else if(tx->getNdbError().code == 2010) {",
          "new_line_content": "      /* Control moves forward to the next step of the operation */",
          "content_same": false
        },
        {
          "line": 699,
          "old_api": "DEBUG_PRINT",
          "new_api": null,
          "old_text": "DEBUG_PRINT(\"CAS mismatch.\")",
          "new_text": null,
          "old_line_content": "    DEBUG_PRINT(\"CAS mismatch.\");",
          "new_line_content": "      worker_step * next_step = (worker_step *) wqitem->next_step;",
          "content_same": false
        },
        {
          "line": 704,
          "old_api": "getNdbError",
          "new_api": null,
          "old_text": "tx->getNdbError()",
          "new_text": null,
          "old_line_content": "  else if(tx->getNdbError().classification == NdbError::NoDataFound) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 720,
          "old_api": "getNdbError",
          "new_api": null,
          "old_text": "tx->getNdbError()",
          "new_text": null,
          "old_line_content": "  else if(tx->getNdbError().code == 630) {",
          "new_line_content": "        wqitem->status = & status_block_bad_replace;",
          "content_same": false
        },
        {
          "line": 721,
          "old_api": "DEBUG_PRINT",
          "new_api": null,
          "old_text": "DEBUG_PRINT(\"Duplicate key on insert.\")",
          "new_text": null,
          "old_line_content": "    DEBUG_PRINT(\"Duplicate key on insert.\");",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": "getNdbError",
          "new_api": null,
          "old_text": "tx->getNdbError()",
          "new_text": null,
          "old_line_content": "  else if(tx->getNdbError().code == 897) {",
          "new_line_content": "  }  ",
          "content_same": false
        },
        {
          "line": 730,
          "old_api": "getNdbError",
          "new_api": null,
          "old_text": "tx->getNdbError()",
          "new_text": null,
          "old_line_content": "  else if(tx->getNdbError().code == 827) {",
          "new_line_content": "    if(wqitem->cas) * wqitem->cas = 0ULL;",
          "content_same": false
        },
        {
          "line": 731,
          "old_api": "getNdbError",
          "new_api": null,
          "old_text": "tx->getNdbError()",
          "new_text": null,
          "old_line_content": "    log_ndb_error(tx->getNdbError());",
          "new_line_content": "    wqitem->status = & status_block_bad_add;    ",
          "content_same": false
        },
        {
          "line": 735,
          "old_api": "getNdbError",
          "new_api": null,
          "old_text": "tx->getNdbError()",
          "new_text": null,
          "old_line_content": "  else if(tx->getNdbError().code == 284) {",
          "new_line_content": "    wqitem->status = & status_block_idx_insert;",
          "content_same": false
        },
        {
          "line": 737,
          "old_api": "getNdbError",
          "new_api": null,
          "old_text": "tx->getNdbError()",
          "new_text": null,
          "old_line_content": "    log_ndb_error(tx->getNdbError());",
          "new_line_content": "  /* Out of memory */",
          "content_same": false
        },
        {
          "line": 747,
          "old_api": "worker_close",
          "new_api": null,
          "old_text": "worker_close(tx, wqitem)",
          "new_text": null,
          "old_line_content": "  worker_close(tx, wqitem);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 764,
          "old_api": "getNdbError",
          "new_api": null,
          "old_text": "tx->getNdbError()",
          "new_text": null,
          "old_line_content": "  int tx_result = tx->getNdbError().code;",
          "new_line_content": "   ------------------------------------------------------------------------",
          "content_same": false
        },
        {
          "line": 769,
          "old_api": "getNextCompletedOperation",
          "new_api": null,
          "old_text": "tx->getNextCompletedOperation(NULL)",
          "new_text": null,
          "old_line_content": "  ndbop1 = tx->getNextCompletedOperation(NULL);",
          "new_line_content": "   */",
          "content_same": false
        },
        {
          "line": 770,
          "old_api": "getNdbError",
          "new_api": null,
          "old_text": "ndbop1->getNdbError()",
          "new_text": null,
          "old_line_content": "  r_read = ndbop1->getNdbError().code;",
          "new_line_content": "  ",
          "content_same": false
        },
        {
          "line": 774,
          "old_api": "getNextCompletedOperation",
          "new_api": null,
          "old_text": "tx->getNextCompletedOperation(ndbop1)",
          "new_text": null,
          "old_line_content": "      ndbop2 = tx->getNextCompletedOperation(ndbop1);  /* the insert */",
          "new_line_content": "  int r_insert = -1;",
          "content_same": false
        },
        {
          "line": 775,
          "old_api": "getNdbError",
          "new_api": null,
          "old_text": "ndbop2->getNdbError()",
          "new_text": null,
          "old_line_content": "      r_insert = ndbop2->getNdbError().code;",
          "new_line_content": "  int r_update = -1;",
          "content_same": false
        },
        {
          "line": 786,
          "old_api": "DEBUG_PRINT",
          "new_api": null,
          "old_text": "DEBUG_PRINT(\"tx: %d   r_read: %d   r_insert: %d   r_update: %d   create: %d\",\n              tx_result, r_read, r_insert, r_update, wqitem->base.math_create)",
          "new_text": null,
          "old_line_content": "  DEBUG_PRINT(\"tx: %d   r_read: %d   r_insert: %d   r_update: %d   create: %d\",",
          "new_line_content": "      ndbop2 = ndbop1;  /* no insert (create flag was not set) */",
          "content_same": false
        },
        {
          "line": 797,
          "old_api": "getBigUnsignedValue",
          "new_api": null,
          "old_text": "op.getBigUnsignedValue(COL_STORE_MATH)",
          "new_text": null,
          "old_line_content": "    uint64_t stored = op.getBigUnsignedValue(COL_STORE_MATH);",
          "new_line_content": "  if(r_read == 626 && ! wqitem->base.math_create) {",
          "content_same": false
        },
        {
          "line": 817,
          "old_api": "log",
          "new_api": null,
          "old_text": "logger->log(LOG_WARNING, 0, \"incr/decr: total failure.\\n\")",
          "new_text": null,
          "old_line_content": "    logger->log(LOG_WARNING, 0, \"incr/decr: total failure.\\n\");",
          "new_line_content": "  }  ",
          "content_same": false
        },
        {
          "line": 824,
          "old_api": "close",
          "new_api": null,
          "old_text": "tx->close()",
          "new_text": null,
          "old_line_content": "      tx->close();",
          "new_line_content": "    /* Total failure */",
          "content_same": false
        },
        {
          "line": 837,
          "old_api": "worker_close",
          "new_api": null,
          "old_text": "worker_close(tx, wqitem)",
          "new_text": null,
          "old_line_content": "  worker_close(tx, wqitem);  ",
          "new_line_content": "        wqitem->status = & status_block_misc_error;",
          "content_same": false
        },
        {
          "line": 843,
          "old_api": "getNdbError",
          "new_api": null,
          "old_text": "tx->getNdbError()",
          "new_text": null,
          "old_line_content": "    DEBUG_PRINT(\"%d %s !!\", result, tx->getNdbError().message);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 852,
          "old_api": "DEBUG_PRINT",
          "new_api": null,
          "old_text": "DEBUG_PRINT(\"%d.%d\", wqitem->pipeline->id, wqitem->id)",
          "new_text": null,
          "old_line_content": "  DEBUG_PRINT(\"%d.%d\", wqitem->pipeline->id, wqitem->id);",
          "new_line_content": "  workitem *wqitem = (workitem *) itemptr;",
          "content_same": false
        },
        {
          "line": 854,
          "old_api": "close",
          "new_api": null,
          "old_text": "tx->close()",
          "new_text": null,
          "old_line_content": "  tx->close();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 857,
          "old_api": "store_engine_specific",
          "new_api": null,
          "old_text": "pipeline->engine->server.cookie->store_engine_specific(wqitem->cookie, wqitem)",
          "new_text": null,
          "old_line_content": "  pipeline->engine->server.cookie->store_engine_specific(wqitem->cookie, wqitem); ",
          "new_line_content": "/***************** WORKER STEPS **********************************************/",
          "content_same": false
        },
        {
          "line": 858,
          "old_api": "yield",
          "new_api": null,
          "old_text": "pipeline->scheduler->yield(wqitem)",
          "new_text": null,
          "old_line_content": "  pipeline->scheduler->yield(wqitem);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 864,
          "old_api": "ExternalValue::append_after_read(tx, item)",
          "new_api": null,
          "old_text": "ExternalValue::append_after_read(tx, item)",
          "new_text": null,
          "old_line_content": "    ExternalValue::append_after_read(tx, item);",
          "new_line_content": "    delete wqitem->ext_val;",
          "content_same": false
        },
        {
          "line": 868,
          "old_api": "DEBUG_PRINT",
          "new_api": null,
          "old_text": "DEBUG_PRINT(\"%d.%d\", item->pipeline->id, item->id)",
          "new_text": null,
          "old_line_content": "  DEBUG_PRINT(\"%d.%d\", item->pipeline->id, item->id);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 873,
          "old_api": "hash_item_get_data",
          "new_api": null,
          "old_text": "hash_item_get_data(item->cache_item)",
          "new_text": null,
          "old_line_content": "  const char * affix_val = hash_item_get_data(item->cache_item);",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 882,
          "old_api": "nValues",
          "new_api": null,
          "old_text": "readop.nValues()",
          "new_text": null,
          "old_line_content": "  assert(readop.nValues() == 1);",
          "new_line_content": "  const size_t affix_len = item->cache_item->nbytes;",
          "content_same": false
        },
        {
          "line": 883,
          "old_api": "getStringValueNoCopy",
          "new_api": null,
          "old_text": "readop.getStringValueNoCopy(COL_STORE_VALUE + 0, & current_val, & current_len)",
          "new_text": null,
          "old_line_content": "  readop.getStringValueNoCopy(COL_STORE_VALUE + 0, & current_val, & current_len);",
          "new_line_content": "  ",
          "content_same": false
        },
        {
          "line": 886,
          "old_api": "worker_set_cas",
          "new_api": null,
          "old_text": "worker_set_cas(item->pipeline, item->cas)",
          "new_text": null,
          "old_line_content": "  worker_set_cas(item->pipeline, item->cas);  ",
          "new_line_content": "     Read the value.",
          "content_same": false
        },
        {
          "line": 887,
          "old_api": "hash_item_set_cas",
          "new_api": null,
          "old_text": "hash_item_set_cas(item->cache_item, * item->cas)",
          "new_text": null,
          "old_line_content": "  hash_item_set_cas(item->cache_item, * item->cas);",
          "new_line_content": "  */  ",
          "content_same": false
        },
        {
          "line": 905,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(item->base.verb == OPERATION_PREPEND)",
          "new_text": null,
          "old_line_content": "    assert(item->base.verb == OPERATION_PREPEND);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 906,
          "old_api": "memmove",
          "new_api": null,
          "old_text": "memmove(current_val + affix_len, current_val, current_len)",
          "new_text": null,
          "old_line_content": "    memmove(current_val + affix_len, current_val, current_len);",
          "new_line_content": "  /* Rewrite the value */",
          "content_same": false
        },
        {
          "line": 907,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(current_val, affix_val, affix_len)",
          "new_text": null,
          "old_line_content": "    memcpy(current_val, affix_val, affix_len); ",
          "new_line_content": "  size_t total_len = affix_len + current_len;",
          "content_same": false
        },
        {
          "line": 916,
          "old_api": "setColumn",
          "new_api": null,
          "old_text": "op.setColumn(COL_STORE_VALUE, current_val, total_len)",
          "new_text": null,
          "old_line_content": "  op.setColumn(COL_STORE_VALUE, current_val, total_len);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 919,
          "old_api": "updateTuple",
          "new_api": null,
          "old_text": "op.updateTuple(tx)",
          "new_text": null,
          "old_line_content": "  ndb_op = op.updateTuple(tx);",
          "new_line_content": "              current_val, total_len > 100 ? \" ...\" : \"\");",
          "content_same": false
        },
        {
          "line": 925,
          "old_api": "executeAsynchPrepare",
          "new_api": null,
          "old_text": "tx->executeAsynchPrepare(NdbTransaction::Commit, callback_main, (void *) item)",
          "new_text": null,
          "old_line_content": "    tx->executeAsynchPrepare(NdbTransaction::Commit, callback_main, (void *) item);",
          "new_line_content": "  if(item->prefix_info.has_cas_col) ",
          "content_same": false
        },
        {
          "line": 929,
          "old_api": "DEBUG_PRINT",
          "new_api": null,
          "old_text": "DEBUG_PRINT(\"NDB operation failed.  workitem %d.%d\", item->pipeline->id,\n                item->id)",
          "new_text": null,
          "old_line_content": "    DEBUG_PRINT(\"NDB operation failed.  workitem %d.%d\", item->pipeline->id,",
          "new_line_content": "  if(ndb_op) {",
          "content_same": false
        },
        {
          "line": 942,
          "old_api": "isNull",
          "new_api": null,
          "old_text": "op.isNull(COL_STORE_EXT_SIZE)",
          "new_text": null,
          "old_line_content": "  if(op.isNull(COL_STORE_EXT_SIZE)) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 943,
          "old_api": "worker_finalize_read",
          "new_api": null,
          "old_text": "worker_finalize_read(tx, wqitem)",
          "new_text": null,
          "old_line_content": "    worker_finalize_read(tx, wqitem);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 947,
          "old_api": "worker_read_external",
          "new_api": null,
          "old_text": "ext_val->worker_read_external(op, tx)",
          "new_text": null,
          "old_line_content": "    ext_val->worker_read_external(op, tx);",
          "new_line_content": "  Operation op(wqitem->plan, OP_READ);",
          "content_same": false
        },
        {
          "line": 953,
          "old_api": "DEBUG_PRINT",
          "new_api": null,
          "old_text": "DEBUG_PRINT(\" Deleting [%d.%d]\", wqitem->pipeline->id, wqitem->id)",
          "new_text": null,
          "old_line_content": "  DEBUG_PRINT(\" Deleting [%d.%d]\", wqitem->pipeline->id, wqitem->id);",
          "new_line_content": "  else {",
          "content_same": false
        },
        {
          "line": 957,
          "old_api": "reschedule",
          "new_api": null,
          "old_text": "wqitem->pipeline->scheduler->reschedule(wqitem)",
          "new_text": null,
          "old_line_content": "  wqitem->pipeline->scheduler->reschedule(wqitem);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 958,
          "old_api": "executeAsynchPrepare",
          "new_api": null,
          "old_text": "tx->executeAsynchPrepare(NdbTransaction::Commit, callback_close, (void *) wqitem)",
          "new_text": null,
          "old_line_content": "  tx->executeAsynchPrepare(NdbTransaction::Commit, callback_close, (void *) wqitem);    ",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 969,
          "old_api": "stored_item_has_expired",
          "new_api": null,
          "old_text": "exp_time.stored_item_has_expired(op)",
          "new_text": null,
          "old_line_content": "  if(exp_time.stored_item_has_expired(op)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 970,
          "old_api": "delete_expired_item",
          "new_api": null,
          "old_text": "delete_expired_item(wqitem, tx)",
          "new_text": null,
          "old_line_content": "    delete_expired_item(wqitem, tx);",
          "new_line_content": "void worker_finalize_read(NdbTransaction *tx, workitem *wqitem) {",
          "content_same": false
        },
        {
          "line": 461,
          "old_api": "canUseSimpleRead",
          "new_api": null,
          "old_text": "plan->canUseSimpleRead()",
          "new_text": null,
          "old_line_content": "  NdbOperation::LockMode lockmode = plan->canUseSimpleRead() ?",
          "new_line_content": "  NdbOperation::LockMode lockmode;",
          "content_same": false
        },
        {
          "line": 974,
          "old_api": "isNull",
          "new_api": null,
          "old_text": "op.isNull(COL_STORE_FLAGS)",
          "new_text": null,
          "old_line_content": "  if(wqitem->prefix_info.has_flags_col && ! op.isNull(COL_STORE_FLAGS))",
          "new_line_content": "  Operation op(wqitem->plan, OP_READ);",
          "content_same": false
        },
        {
          "line": 975,
          "old_api": "getIntValue",
          "new_api": null,
          "old_text": "op.getIntValue(COL_STORE_FLAGS)",
          "new_text": null,
          "old_line_content": "    wqitem->math_flags = htonl(op.getIntValue(COL_STORE_FLAGS));",
          "new_line_content": "  op.buffer = wqitem->row_buffer_1;",
          "content_same": false
        },
        {
          "line": 464,
          "old_api": "readTuple",
          "new_api": null,
          "old_text": "op.readTuple(tx, lockmode)",
          "new_text": null,
          "old_line_content": "  if(! op.readTuple(tx, lockmode)) {",
          "new_line_content": "    lockmode = NdbOperation::LM_SimpleRead;",
          "content_same": false
        },
        {
          "line": 465,
          "old_api": "getNdbError",
          "new_api": null,
          "old_text": "tx->getNdbError()",
          "new_text": null,
          "old_line_content": "    logger->log(LOG_WARNING, 0, \"readTuple(): %s\\n\", tx->getNdbError().message);",
          "new_line_content": "    commitflag = NdbTransaction::Commit;",
          "content_same": false
        },
        {
          "line": 466,
          "old_api": "close",
          "new_api": null,
          "old_text": "tx->close()",
          "new_text": null,
          "old_line_content": "    tx->close();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 987,
          "old_api": "nValues",
          "new_api": null,
          "old_text": "op.nValues()",
          "new_text": null,
          "old_line_content": "     && op.nValues() == 1",
          "new_line_content": "    wqitem->math_flags = 0;",
          "content_same": false
        },
        {
          "line": 988,
          "old_api": "isNull",
          "new_api": null,
          "old_text": "op.isNull(COL_STORE_VALUE)",
          "new_text": null,
          "old_line_content": "     && ! (op.isNull(COL_STORE_VALUE) && wqitem->plan->dup_numbers)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 989,
          "old_api": "getStringValueNoCopy",
          "new_api": null,
          "old_text": "op.getStringValueNoCopy(COL_STORE_VALUE, & wqitem->value_ptr, & wqitem->value_size)",
          "new_text": null,
          "old_line_content": "     && op.getStringValueNoCopy(COL_STORE_VALUE, & wqitem->value_ptr, & wqitem->value_size)",
          "new_line_content": "  if(wqitem->prefix_info.has_cas_col) {",
          "content_same": false
        },
        {
          "line": 479,
          "old_api": "DEBUG_ENTER",
          "new_api": null,
          "old_text": "DEBUG_ENTER()",
          "new_text": null,
          "old_line_content": "  DEBUG_ENTER();",
          "new_line_content": "  wqitem->next_step = (void *) ",
          "content_same": false
        },
        {
          "line": 993,
          "old_api": "DEBUG_PRINT",
          "new_api": null,
          "old_text": "DEBUG_PRINT(\"using no-copy buffer.\")",
          "new_text": null,
          "old_line_content": "    DEBUG_PRINT(\"using no-copy buffer.\");",
          "new_line_content": "  /* Try to send the value from the row_buffer without copying it. */",
          "content_same": false
        },
        {
          "line": 486,
          "old_api": "setKeyForReading",
          "new_api": null,
          "old_text": "setKeyForReading(op)",
          "new_text": null,
          "old_line_content": "  setKeyForReading(op);",
          "new_line_content": "op_status_t WorkerStep1::do_append() {",
          "content_same": false
        },
        {
          "line": 489,
          "old_api": "readTuple",
          "new_api": null,
          "old_text": "op.readTuple(tx, NdbOperation::LM_Exclusive)",
          "new_text": null,
          "old_line_content": "  if(! op.readTuple(tx, NdbOperation::LM_Exclusive)) {",
          "new_line_content": "  /* APPEND/PREPEND is currently not supported for tsv */",
          "content_same": false
        },
        {
          "line": 490,
          "old_api": "getNdbError",
          "new_api": null,
          "old_text": "tx->getNdbError()",
          "new_text": null,
          "old_line_content": "    logger->log(LOG_WARNING, 0, \"readTuple(): %s\\n\", tx->getNdbError().message);",
          "new_line_content": "  if(wqitem->plan->spec->nvaluecols > 1)",
          "content_same": false
        },
        {
          "line": 491,
          "old_api": "close",
          "new_api": null,
          "old_text": "tx->close()",
          "new_text": null,
          "old_line_content": "    tx->close();",
          "new_line_content": "    return op_not_supported;",
          "content_same": false
        },
        {
          "line": 1002,
          "old_api": "build_hash_item",
          "new_api": null,
          "old_text": "build_hash_item(wqitem, op, exp_time)",
          "new_text": null,
          "old_line_content": "    build_hash_item(wqitem, op, exp_time);",
          "new_line_content": "    wqitem->base.has_value = true;",
          "content_same": false
        },
        {
          "line": 1005,
          "old_api": "worker_close",
          "new_api": null,
          "old_text": "worker_close(tx, wqitem)",
          "new_text": null,
          "old_line_content": "  worker_close(tx, wqitem);",
          "new_line_content": "        for this and use it to prevent double-freeing of the workitem.  */",
          "content_same": false
        },
        {
          "line": 503,
          "old_api": "DEBUG_ENTER",
          "new_api": null,
          "old_text": "DEBUG_ENTER()",
          "new_text": null,
          "old_line_content": "  DEBUG_ENTER();",
          "new_line_content": "  /* Save the workitem in the transaction and prepare for async execution */ ",
          "content_same": false
        },
        {
          "line": 1021,
          "old_api": "store_item",
          "new_api": null,
          "old_text": "store_item(se, wqitem->cache_item, \n                   hash_item_get_cas_ptr(wqitem->cache_item),\n                   OPERATION_SET, wqitem->cookie)",
          "new_text": null,
          "old_line_content": "    status = store_item(se, wqitem->cache_item, ",
          "new_line_content": "     (1) store_item will store nbytes as length, which is wrong.",
          "content_same": false
        },
        {
          "line": 1022,
          "old_api": "hash_item_get_cas_ptr",
          "new_api": null,
          "old_text": "hash_item_get_cas_ptr(wqitem->cache_item)",
          "new_text": null,
          "old_line_content": "                   hash_item_get_cas_ptr(wqitem->cache_item),",
          "new_line_content": "     (2) The CAS may be incorrect.",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 39,
      "total_additions": 121,
      "total_deletions": 121,
      "total_api_changes": 281
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 12,
        "api_related_lines": 281,
        "non_api_lines": 5,
        "non_api_line_numbers": [
          462,
          467,
          468,
          469,
          470
        ]
      }
    },
    "api_calls_before": 259,
    "api_calls_after": 259,
    "diff_info": {
      "added_lines": 11,
      "removed_lines": 3,
      "total_diff_lines": 33
    }
  }
}
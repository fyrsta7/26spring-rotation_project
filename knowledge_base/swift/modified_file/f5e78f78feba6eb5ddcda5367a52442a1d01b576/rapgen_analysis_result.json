{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/swift/modified_file/f5e78f78feba6eb5ddcda5367a52442a1d01b576",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/swift/modified_file/f5e78f78feba6eb5ddcda5367a52442a1d01b576/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/swift/modified_file/f5e78f78feba6eb5ddcda5367a52442a1d01b576/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/swift/modified_file/f5e78f78feba6eb5ddcda5367a52442a1d01b576/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": true,
    "api_changes": {
      "replacements": [
        {
          "line": 176,
          "old_api": "getStdlibModule",
          "new_api": "getIdentifier",
          "old_text": "getStdlibModule(dc)",
          "new_text": "Context.getIdentifier(\"Bool\")",
          "old_line_content": "                                   getStdlibModule(dc), nullptr,",
          "new_line_content": "      getStdlibModule(dc)->lookupValue({}, Context.getIdentifier(\"Bool\"),",
          "content_same": false
        },
        {
          "line": 179,
          "old_api": "isSuccess",
          "new_api": "SourceLoc",
          "old_text": "boolLookup.isSuccess()",
          "new_text": "SourceLoc()",
          "old_line_content": "      if (!boolLookup.isSuccess()) {",
          "new_line_content": "        diagnose(SourceLoc(), diag::bool_type_broken);",
          "content_same": false
        },
        {
          "line": 180,
          "old_api": "SourceLoc",
          "new_api": "Type",
          "old_text": "SourceLoc()",
          "new_text": "Type()",
          "old_line_content": "        diagnose(SourceLoc(), diag::bool_type_broken);",
          "new_line_content": "        return Type();",
          "content_same": false
        },
        {
          "line": 183,
          "old_api": "getSingleTypeResult",
          "new_api": "front",
          "old_text": "boolLookup.getSingleTypeResult()",
          "new_text": "results.front()",
          "old_line_content": "      TypeDecl *tyDecl = boolLookup.getSingleTypeResult();",
          "new_line_content": "      auto tyDecl = dyn_cast<TypeDecl>(results.front());",
          "content_same": false
        },
        {
          "line": 186,
          "old_api": "SourceLoc",
          "new_api": "Type",
          "old_text": "SourceLoc()",
          "new_text": "Type()",
          "old_line_content": "        diagnose(SourceLoc(), diag::bool_type_broken);",
          "new_line_content": "        return Type();",
          "content_same": false
        },
        {
          "line": 206,
          "old_api": "empty",
          "new_api": "diagnose",
          "old_text": "components.empty()",
          "new_text": "TC.diagnose(ref.NameLoc, diag::extension_metatype)",
          "old_line_content": "    if (ref.Name == TC.Context.Id_Type && !components.empty()) {",
          "new_line_content": "      TC.diagnose(ref.NameLoc, diag::extension_metatype);",
          "content_same": false
        },
        {
          "line": 207,
          "old_api": "diagnose",
          "new_api": "setInvalid",
          "old_text": "TC.diagnose(ref.NameLoc, diag::extension_metatype)",
          "new_text": "ED->setInvalid()",
          "old_line_content": "      TC.diagnose(ref.NameLoc, diag::extension_metatype);",
          "new_line_content": "      ED->setInvalid();",
          "content_same": false
        },
        {
          "line": 208,
          "old_api": "setInvalid",
          "new_api": "ErrorType::get(TC.Context)",
          "old_text": "ED->setInvalid()",
          "new_text": "ErrorType::get(TC.Context)",
          "old_line_content": "      ED->setInvalid();",
          "new_line_content": "      ED->setExtendedType(ErrorType::get(TC.Context));",
          "content_same": false
        },
        {
          "line": 218,
          "old_api": "IdentTypeRepr::create(TC.Context, components)",
          "new_api": "validateType",
          "old_text": "IdentTypeRepr::create(TC.Context, components)",
          "new_text": "TC.validateType(typeLoc, dc, TR_AllowUnboundGenerics)",
          "old_line_content": "  TypeLoc typeLoc(IdentTypeRepr::create(TC.Context, components));",
          "new_line_content": "  if (TC.validateType(typeLoc, dc, TR_AllowUnboundGenerics)) {",
          "content_same": false
        },
        {
          "line": 219,
          "old_api": "validateType",
          "new_api": "setInvalid",
          "old_text": "TC.validateType(typeLoc, dc, TR_AllowUnboundGenerics)",
          "new_text": "ED->setInvalid()",
          "old_line_content": "  if (TC.validateType(typeLoc, dc, TR_AllowUnboundGenerics)) {",
          "new_line_content": "    ED->setInvalid();",
          "content_same": false
        },
        {
          "line": 220,
          "old_api": "setInvalid",
          "new_api": "ErrorType::get(TC.Context)",
          "old_text": "ED->setInvalid()",
          "new_text": "ErrorType::get(TC.Context)",
          "old_line_content": "    ED->setInvalid();",
          "new_line_content": "    ED->setExtendedType(ErrorType::get(TC.Context));",
          "content_same": false
        },
        {
          "line": 231,
          "old_api": "getBoundType",
          "new_api": "getPointer",
          "old_text": "ident->getBoundType()",
          "new_text": "type.getPointer()",
          "old_line_content": "    if (auto type = ident->getBoundType()) {",
          "new_line_content": "      if (auto unbound = dyn_cast<UnboundGenericType>(type.getPointer()))",
          "content_same": false
        },
        {
          "line": 232,
          "old_api": "getPointer",
          "new_api": "getDecl",
          "old_text": "type.getPointer()",
          "new_text": "unbound->getDecl()",
          "old_line_content": "      if (auto unbound = dyn_cast<UnboundGenericType>(type.getPointer()))",
          "new_line_content": "        typeDecl = unbound->getDecl();",
          "content_same": false
        },
        {
          "line": 233,
          "old_api": "getDecl",
          "new_api": "getPointer",
          "old_text": "unbound->getDecl()",
          "new_text": "type.getPointer()",
          "old_line_content": "        typeDecl = unbound->getDecl();",
          "new_line_content": "      else if (auto nominal = dyn_cast<NominalType>(type.getPointer()))",
          "content_same": false
        },
        {
          "line": 234,
          "old_api": "getPointer",
          "new_api": "getDecl",
          "old_text": "type.getPointer()",
          "new_text": "nominal->getDecl()",
          "old_line_content": "      else if (auto nominal = dyn_cast<NominalType>(type.getPointer()))",
          "new_line_content": "        typeDecl = nominal->getDecl();",
          "content_same": false
        },
        {
          "line": 235,
          "old_api": "getDecl",
          "new_api": "getBoundDecl",
          "old_text": "nominal->getDecl()",
          "new_text": "ident->getBoundDecl()",
          "old_line_content": "        typeDecl = nominal->getDecl();",
          "new_line_content": "    } else if (auto decl = ident->getBoundDecl()) {",
          "content_same": false
        },
        {
          "line": 236,
          "old_api": "getBoundDecl",
          "new_api": "dyn_cast<NominalTypeDecl>(decl)",
          "old_text": "ident->getBoundDecl()",
          "new_text": "dyn_cast<NominalTypeDecl>(decl)",
          "old_line_content": "    } else if (auto decl = ident->getBoundDecl()) {",
          "new_line_content": "      typeDecl = dyn_cast<NominalTypeDecl>(decl);",
          "content_same": false
        },
        {
          "line": 267,
          "old_api": "getGenericParams",
          "new_api": "diagnose",
          "old_text": "typeDecl->getGenericParams()",
          "new_text": "TC.diagnose(ref.NameLoc,\n                  diag::extension_generic_params_for_non_generic_type,\n                  typeDecl->getDeclaredType())\n        .highlight(ref.GenericParams->getSourceRange())",
          "old_line_content": "    if (!typeDecl->getGenericParams() && ref.GenericParams) {",
          "new_line_content": "      TC.diagnose(ref.NameLoc,",
          "content_same": false
        },
        {
          "line": 270,
          "old_api": "getDeclaredType",
          "new_api": "getSourceRange",
          "old_text": "typeDecl->getDeclaredType()",
          "new_text": "ref.GenericParams->getSourceRange()",
          "old_line_content": "                  typeDecl->getDeclaredType())",
          "new_line_content": "        .highlight(ref.GenericParams->getSourceRange());",
          "content_same": false
        },
        {
          "line": 271,
          "old_api": "getSourceRange",
          "new_api": "diagnose",
          "old_text": "ref.GenericParams->getSourceRange()",
          "new_text": "TC.diagnose(typeDecl, diag::extended_type_here,\n                  typeDecl->getDeclaredType())",
          "old_line_content": "        .highlight(ref.GenericParams->getSourceRange());",
          "new_line_content": "      TC.diagnose(typeDecl, diag::extended_type_here,",
          "content_same": false
        },
        {
          "line": 272,
          "old_api": "diagnose",
          "new_api": "getDeclaredType",
          "old_text": "TC.diagnose(typeDecl, diag::extended_type_here,\n                  typeDecl->getDeclaredType())",
          "new_text": "typeDecl->getDeclaredType()",
          "old_line_content": "      TC.diagnose(typeDecl, diag::extended_type_here,",
          "new_line_content": "                  typeDecl->getDeclaredType());",
          "content_same": false
        },
        {
          "line": 284,
          "old_api": "getGenericParams",
          "new_api": "size",
          "old_text": "typeDecl->getGenericParams()->size()",
          "new_text": "ref.GenericParams->size()",
          "old_line_content": "    if (ref.GenericParams->size() != typeDecl->getGenericParams()->size()) {",
          "new_line_content": "      unsigned numHave = ref.GenericParams->size();",
          "content_same": false
        },
        {
          "line": 285,
          "old_api": "size",
          "new_api": "getGenericParams",
          "old_text": "ref.GenericParams->size()",
          "new_text": "typeDecl->getGenericParams()->size()",
          "old_line_content": "      unsigned numHave = ref.GenericParams->size();",
          "new_line_content": "      unsigned numExpected = typeDecl->getGenericParams()->size();",
          "content_same": false
        },
        {
          "line": 286,
          "old_api": "getGenericParams",
          "new_api": "diagnose",
          "old_text": "typeDecl->getGenericParams()->size()",
          "new_text": "TC.diagnose(ref.NameLoc,\n                  diag::extension_generic_wrong_number_of_parameters,\n                  typeDecl->getDeclaredType(), numHave > numExpected,\n                  numHave, numExpected)\n        .highlight(ref.GenericParams->getSourceRange())",
          "old_line_content": "      unsigned numExpected = typeDecl->getGenericParams()->size();",
          "new_line_content": "      TC.diagnose(ref.NameLoc,",
          "content_same": false
        },
        {
          "line": 291,
          "old_api": "getSourceRange",
          "new_api": "setInvalid",
          "old_text": "ref.GenericParams->getSourceRange()",
          "new_text": "ED->setInvalid()",
          "old_line_content": "        .highlight(ref.GenericParams->getSourceRange());",
          "new_line_content": "      ED->setInvalid();",
          "content_same": false
        },
        {
          "line": 292,
          "old_api": "setInvalid",
          "new_api": "ErrorType::get(TC.Context)",
          "old_text": "ED->setInvalid()",
          "new_text": "ErrorType::get(TC.Context)",
          "old_line_content": "      ED->setInvalid();",
          "new_line_content": "      ED->setExtendedType(ErrorType::get(TC.Context));",
          "content_same": false
        },
        {
          "line": 303,
          "old_api": "getType",
          "new_api": "extendedTy->is<UnboundGenericType>()",
          "old_text": "typeLoc.getType()",
          "new_text": "extendedTy->is<UnboundGenericType>()",
          "old_line_content": "  Type extendedTy = typeLoc.getType();",
          "new_line_content": "  if (!extendedTy->is<NominalType>() && !extendedTy->is<UnboundGenericType>()) {",
          "content_same": false
        },
        {
          "line": 304,
          "old_api": "extendedTy->is<UnboundGenericType>()",
          "new_api": "diagnose",
          "old_text": "extendedTy->is<UnboundGenericType>()",
          "new_text": "TC.diagnose(ED, diag::non_nominal_extension, false, extendedTy)",
          "old_line_content": "  if (!extendedTy->is<NominalType>() && !extendedTy->is<UnboundGenericType>()) {",
          "new_line_content": "    TC.diagnose(ED, diag::non_nominal_extension, false, extendedTy);",
          "content_same": false
        },
        {
          "line": 305,
          "old_api": "diagnose",
          "new_api": "setInvalid",
          "old_text": "TC.diagnose(ED, diag::non_nominal_extension, false, extendedTy)",
          "new_text": "ED->setInvalid()",
          "old_line_content": "    TC.diagnose(ED, diag::non_nominal_extension, false, extendedTy);",
          "new_line_content": "    ED->setInvalid();",
          "content_same": false
        },
        {
          "line": 306,
          "old_api": "setInvalid",
          "new_api": "ErrorType::get(TC.Context)",
          "old_text": "ED->setInvalid()",
          "new_text": "ErrorType::get(TC.Context)",
          "old_line_content": "    ED->setInvalid();",
          "new_line_content": "    ED->setExtendedType(ErrorType::get(TC.Context));",
          "content_same": false
        },
        {
          "line": 311,
          "old_api": "setExtendedType",
          "new_api": "getAnyNominal",
          "old_text": "ED->setExtendedType(extendedTy)",
          "new_text": "extendedTy->getAnyNominal()",
          "old_line_content": "  ED->setExtendedType(extendedTy);",
          "new_line_content": "  if (auto nominal = extendedTy->getAnyNominal())",
          "content_same": false
        },
        {
          "line": 312,
          "old_api": "getAnyNominal",
          "new_api": "addExtension",
          "old_text": "extendedTy->getAnyNominal()",
          "new_text": "nominal->addExtension(ED)",
          "old_line_content": "  if (auto nominal = extendedTy->getAnyNominal())",
          "new_line_content": "    nominal->addExtension(ED);",
          "content_same": false
        },
        {
          "line": 343,
          "old_api": "dyn_cast<AbstractFunctionDecl>(TC.definedFunctions[i-1])",
          "new_api": "computeCaptures",
          "old_text": "dyn_cast<AbstractFunctionDecl>(TC.definedFunctions[i-1])",
          "new_text": "TC.computeCaptures(FD)",
          "old_line_content": "      if (auto *FD = dyn_cast<AbstractFunctionDecl>(TC.definedFunctions[i-1]))",
          "new_line_content": "        TC.computeCaptures(FD);",
          "content_same": false
        },
        {
          "line": 357,
          "old_api": "isa<NominalTypeDecl>(decl)",
          "new_api": "handleExternalDecl",
          "old_text": "isa<NominalTypeDecl>(decl)",
          "new_text": "TC.handleExternalDecl(decl)",
          "old_line_content": "      if (isa<NominalTypeDecl>(decl)) {",
          "new_line_content": "        TC.handleExternalDecl(decl);",
          "content_same": false
        },
        {
          "line": 368,
          "old_api": "empty",
          "new_api": "pop_back_val",
          "old_text": "TC.ValidatedTypes.empty()",
          "new_text": "TC.ValidatedTypes.pop_back_val()",
          "old_line_content": "    while (!TC.ValidatedTypes.empty()) {",
          "new_line_content": "      auto nominal = TC.ValidatedTypes.pop_back_val();",
          "content_same": false
        },
        {
          "line": 373,
          "old_api": "getMembers",
          "new_api": "dyn_cast<ValueDecl>(D)",
          "old_text": "nominal->getMembers()",
          "new_text": "dyn_cast<ValueDecl>(D)",
          "old_line_content": "      for (auto *D : nominal->getMembers()) {",
          "new_line_content": "        auto VD = dyn_cast<ValueDecl>(D);",
          "content_same": false
        },
        {
          "line": 383,
          "old_api": "hasValue",
          "new_api": "getValue",
          "old_text": "lazyVarsAlreadyHaveImplementation.hasValue()",
          "new_text": "lazyVarsAlreadyHaveImplementation.getValue()",
          "old_line_content": "        if (lazyVarsAlreadyHaveImplementation.hasValue() &&",
          "new_line_content": "            lazyVarsAlreadyHaveImplementation.getValue())",
          "content_same": false
        },
        {
          "line": 391,
          "old_api": "isStatic",
          "new_api": "getGetter",
          "old_text": "prop->isStatic()",
          "new_text": "prop->getGetter()->hasBody()",
          "old_line_content": "        if (prop->getAttrs().hasAttribute<LazyAttr>() && !prop->isStatic()) {",
          "new_line_content": "          bool hasImplementation = prop->getGetter()->hasBody();",
          "content_same": false
        },
        {
          "line": 394,
          "old_api": "hasValue",
          "new_api": "getValue",
          "old_text": "lazyVarsAlreadyHaveImplementation.hasValue()",
          "new_text": "lazyVarsAlreadyHaveImplementation.getValue()",
          "old_line_content": "          if (lazyVarsAlreadyHaveImplementation.hasValue()) {",
          "new_line_content": "            assert(lazyVarsAlreadyHaveImplementation.getValue() ==",
          "content_same": false
        },
        {
          "line": 409,
          "old_api": "addImplicitConstructors",
          "new_api": "addImplicitDestructor",
          "old_text": "TC.addImplicitConstructors(CD, ignoredCtors)",
          "new_text": "TC.addImplicitDestructor(CD)",
          "old_line_content": "        TC.addImplicitConstructors(CD, ignoredCtors);",
          "new_line_content": "        TC.addImplicitDestructor(CD);",
          "content_same": false
        },
        {
          "line": 414,
          "old_api": "end",
          "new_api": "begin",
          "old_text": "TC.definedFunctions.end()",
          "new_text": "TC.implicitlyDefinedFunctions.begin()",
          "old_line_content": "    TC.definedFunctions.insert(TC.definedFunctions.end(),",
          "new_line_content": "                               TC.implicitlyDefinedFunctions.begin(),",
          "content_same": false
        },
        {
          "line": 415,
          "old_api": "begin",
          "new_api": "end",
          "old_text": "TC.implicitlyDefinedFunctions.begin()",
          "new_text": "TC.implicitlyDefinedFunctions.end()",
          "old_line_content": "                               TC.implicitlyDefinedFunctions.begin(),",
          "new_line_content": "                               TC.implicitlyDefinedFunctions.end());",
          "content_same": false
        },
        {
          "line": 416,
          "old_api": "end",
          "new_api": "clear",
          "old_text": "TC.implicitlyDefinedFunctions.end()",
          "new_text": "TC.implicitlyDefinedFunctions.clear()",
          "old_line_content": "                               TC.implicitlyDefinedFunctions.end());",
          "new_line_content": "    TC.implicitlyDefinedFunctions.clear();",
          "content_same": false
        },
        {
          "line": 435,
          "old_api": "getPointer",
          "new_api": "diagnose",
          "old_text": "capture.getPointer()",
          "new_text": "TC.diagnose(localFunctionCapture.CaptureLoc,\n                    diag::unsupported_local_function_reference)",
          "old_line_content": "      if (isa<VarDecl>(capture.getPointer())) {",
          "new_line_content": "        TC.diagnose(localFunctionCapture.CaptureLoc,",
          "content_same": false
        },
        {
          "line": 445,
          "old_api": "assert",
          "new_api": "getASTContext",
          "old_text": "assert(SF.ASTStage == SourceFile::TypeChecked)",
          "new_text": "SF.getASTContext()",
          "old_line_content": "  assert(SF.ASTStage == SourceFile::TypeChecked);",
          "new_line_content": "  auto &Ctx = SF.getASTContext();",
          "content_same": false
        },
        {
          "line": 477,
          "old_api": "getIdentifier",
          "new_api": "forAllVisibleModules",
          "old_text": "Ctx.getIdentifier(\"Foundation\")",
          "new_text": "SF.forAllVisibleModules([&](Module::ImportedModule import) {\n    if (import.second->getName() == FoundationModuleName)\n      ImportsFoundationModule = true;\n\n    // FIXME: Respect the access path?\n    for (auto file : import.second->getFiles()) {\n      auto SF = dyn_cast<SourceFile>(file);\n      if (!SF)\n        continue;\n\n      for (auto D : SF->Decls) {\n        if (auto ED = dyn_cast<ExtensionDecl>(D))\n          bindExtensionDecl(ED, TC);\n      }\n    }\n  })",
          "old_line_content": "  auto FoundationModuleName = Ctx.getIdentifier(\"Foundation\");",
          "new_line_content": "  SF.forAllVisibleModules([&](Module::ImportedModule import) {",
          "content_same": false
        },
        {
          "line": 478,
          "old_api": "forAllVisibleModules",
          "new_api": "getName",
          "old_text": "SF.forAllVisibleModules([&](Module::ImportedModule import) {\n    if (import.second->getName() == FoundationModuleName)\n      ImportsFoundationModule = true;\n\n    // FIXME: Respect the access path?\n    for (auto file : import.second->getFiles()) {\n      auto SF = dyn_cast<SourceFile>(file);\n      if (!SF)\n        continue;\n\n      for (auto D : SF->Decls) {\n        if (auto ED = dyn_cast<ExtensionDecl>(D))\n          bindExtensionDecl(ED, TC);\n      }\n    }\n  })",
          "new_text": "import.second->getName()",
          "old_line_content": "  SF.forAllVisibleModules([&](Module::ImportedModule import) {",
          "new_line_content": "    if (import.second->getName() == FoundationModuleName)",
          "content_same": false
        },
        {
          "line": 483,
          "old_api": "getFiles",
          "new_api": "dyn_cast<SourceFile>(file)",
          "old_text": "import.second->getFiles()",
          "new_text": "dyn_cast<SourceFile>(file)",
          "old_line_content": "    for (auto file : import.second->getFiles()) {",
          "new_line_content": "      auto SF = dyn_cast<SourceFile>(file);",
          "content_same": false
        },
        {
          "line": 489,
          "old_api": "dyn_cast<ExtensionDecl>(D)",
          "new_api": "bindExtensionDecl",
          "old_text": "dyn_cast<ExtensionDecl>(D)",
          "new_text": "bindExtensionDecl(ED, TC)",
          "old_line_content": "        if (auto ED = dyn_cast<ExtensionDecl>(D))",
          "new_line_content": "          bindExtensionDecl(ED, TC);",
          "content_same": false
        },
        {
          "line": 503,
          "old_api": "slice",
          "new_api": "isa<TopLevelCodeDecl>(D)",
          "old_text": "llvm::makeArrayRef(SF.Decls).slice(StartElem)",
          "new_text": "isa<TopLevelCodeDecl>(D)",
          "old_line_content": "  for (auto D : llvm::makeArrayRef(SF.Decls).slice(StartElem)) {",
          "new_line_content": "    if (isa<TopLevelCodeDecl>(D))",
          "content_same": false
        },
        {
          "line": 517,
          "old_api": "slice",
          "new_api": "dyn_cast<TopLevelCodeDecl>(D)",
          "old_text": "llvm::makeArrayRef(SF.Decls).slice(StartElem)",
          "new_text": "dyn_cast<TopLevelCodeDecl>(D)",
          "old_line_content": "  for (auto D : llvm::makeArrayRef(SF.Decls).slice(StartElem)) {",
          "new_line_content": "    if (TopLevelCodeDecl *TLCD = dyn_cast<TopLevelCodeDecl>(D)) {",
          "content_same": false
        },
        {
          "line": 528,
          "old_api": "contextualizeTopLevelCode",
          "new_api": "slice",
          "old_text": "TC.contextualizeTopLevelCode(TLC,\n                           llvm::makeArrayRef(SF.Decls).slice(StartElem))",
          "new_text": "llvm::makeArrayRef(SF.Decls).slice(StartElem)",
          "old_line_content": "    TC.contextualizeTopLevelCode(TLC,",
          "new_line_content": "                           llvm::makeArrayRef(SF.Decls).slice(StartElem));",
          "content_same": false
        },
        {
          "line": 532,
          "old_api": "end",
          "new_api": "begin",
          "old_text": "DefinedFunctions.end()",
          "new_text": "TC.implicitlyDefinedFunctions.begin()",
          "old_line_content": "  DefinedFunctions.insert(DefinedFunctions.end(),",
          "new_line_content": "                          TC.implicitlyDefinedFunctions.begin(),",
          "content_same": false
        },
        {
          "line": 533,
          "old_api": "begin",
          "new_api": "end",
          "old_text": "TC.implicitlyDefinedFunctions.begin()",
          "new_text": "TC.implicitlyDefinedFunctions.end()",
          "old_line_content": "                          TC.implicitlyDefinedFunctions.begin(),",
          "new_line_content": "                          TC.implicitlyDefinedFunctions.end());",
          "content_same": false
        },
        {
          "line": 534,
          "old_api": "end",
          "new_api": "clear",
          "old_text": "TC.implicitlyDefinedFunctions.end()",
          "new_text": "TC.implicitlyDefinedFunctions.clear()",
          "old_line_content": "                          TC.implicitlyDefinedFunctions.end());",
          "new_line_content": "  TC.implicitlyDefinedFunctions.clear();",
          "content_same": false
        },
        {
          "line": 539,
          "old_api": "hadError",
          "new_api": "processREPLTopLevel",
          "old_text": "TC.Context.hadError()",
          "new_text": "TC.processREPLTopLevel(SF, TLC, StartElem)",
          "old_line_content": "  if (SF.Kind == SourceFileKind::REPL && !TC.Context.hadError())",
          "new_line_content": "    TC.processREPLTopLevel(SF, TLC, StartElem);",
          "content_same": false
        },
        {
          "line": 548,
          "old_api": "diagnoseObjCMethodConflicts",
          "new_api": "diagnoseUnintendedObjCMethodOverrides",
          "old_text": "Ctx.diagnoseObjCMethodConflicts(SF)",
          "new_text": "Ctx.diagnoseUnintendedObjCMethodOverrides(SF)",
          "old_line_content": "    Ctx.diagnoseObjCMethodConflicts(SF);",
          "new_line_content": "    Ctx.diagnoseUnintendedObjCMethodOverrides(SF);",
          "content_same": false
        },
        {
          "line": 561,
          "old_api": "getValue",
          "new_api": "diagnose",
          "old_text": "SF.FirstObjCAttrLoc.getValue()",
          "new_text": "Ctx.Diags.diagnose(L, diag::objc_decl_used_without_required_module,\n                       \"objc\", FoundationModuleName)\n    .highlight(SourceRange(L))",
          "old_line_content": "    auto L = SF.FirstObjCAttrLoc.getValue();",
          "new_line_content": "    Ctx.Diags.diagnose(L, diag::objc_decl_used_without_required_module,",
          "content_same": false
        },
        {
          "line": 580,
          "old_api": "getASTContext",
          "new_api": "diagnoseObjCMethodConflicts",
          "old_text": "SF.getASTContext()",
          "new_text": "Ctx.diagnoseObjCMethodConflicts(SF)",
          "old_line_content": "  auto &Ctx = SF.getASTContext();",
          "new_line_content": "  Ctx.diagnoseObjCMethodConflicts(SF);",
          "content_same": false
        },
        {
          "line": 581,
          "old_api": "diagnoseObjCMethodConflicts",
          "new_api": "diagnoseUnintendedObjCMethodOverrides",
          "old_text": "Ctx.diagnoseObjCMethodConflicts(SF)",
          "new_text": "Ctx.diagnoseUnintendedObjCMethodOverrides(SF)",
          "old_line_content": "  Ctx.diagnoseObjCMethodConflicts(SF);",
          "new_line_content": "  Ctx.diagnoseUnintendedObjCMethodOverrides(SF);",
          "content_same": false
        },
        {
          "line": 632,
          "old_api": "isa<ErrorExpr>(parsedExpr)",
          "new_api": "getType",
          "old_text": "isa<ErrorExpr>(parsedExpr)",
          "new_text": "parsedExpr->getType()",
          "old_line_content": "  return parsedExpr && !isa<ErrorExpr>(parsedExpr)",
          "new_line_content": "                    && parsedExpr->getType()",
          "content_same": false
        },
        {
          "line": 687,
          "old_api": "getAttrs",
          "new_api": "dyn_cast<AvailabilityAttr>(Attr)",
          "old_text": "D->getAttrs()",
          "new_text": "dyn_cast<AvailabilityAttr>(Attr)",
          "old_line_content": "  for (auto Attr : D->getAttrs()) {",
          "new_line_content": "    AvailabilityAttr *AvailAttr = dyn_cast<AvailabilityAttr>(Attr);",
          "content_same": false
        },
        {
          "line": 688,
          "old_api": "dyn_cast<AvailabilityAttr>(Attr)",
          "new_api": "hasValue",
          "old_text": "dyn_cast<AvailabilityAttr>(Attr)",
          "new_text": "AvailAttr->Introduced.hasValue()",
          "old_line_content": "    AvailabilityAttr *AvailAttr = dyn_cast<AvailabilityAttr>(Attr);",
          "new_line_content": "    if (AvailAttr == NULL || !AvailAttr->Introduced.hasValue() ||",
          "content_same": false
        },
        {
          "line": 689,
          "old_api": "hasValue",
          "new_api": "isActivePlatform",
          "old_text": "AvailAttr->Introduced.hasValue()",
          "new_text": "AvailAttr->isActivePlatform(Ctx)",
          "old_line_content": "    if (AvailAttr == NULL || !AvailAttr->Introduced.hasValue() ||",
          "new_line_content": "        !AvailAttr->isActivePlatform(Ctx)) {",
          "content_same": false
        },
        {
          "line": 728,
          "old_api": "assert",
          "new_api": "push_back",
          "old_text": "assert(TRC)",
          "new_text": "ContextStack.push_back(TRC)",
          "old_line_content": "    assert(TRC);",
          "new_line_content": "    ContextStack.push_back(TRC);",
          "content_same": false
        },
        {
          "line": 738,
          "old_api": "getContextForWalkOfDecl",
          "new_api": "push_back",
          "old_text": "getContextForWalkOfDecl(D)",
          "new_text": "ContextStack.push_back(DeclTRC)",
          "old_line_content": "    TypeRefinementContext *DeclTRC = getContextForWalkOfDecl(D);",
          "new_line_content": "    ContextStack.push_back(DeclTRC);",
          "content_same": false
        },
        {
          "line": 744,
          "old_api": "size",
          "new_api": "pop_back",
          "old_text": "ContextStack.size()",
          "new_text": "ContextStack.pop_back()",
          "old_line_content": "    assert(ContextStack.size() > 0);",
          "new_line_content": "    ContextStack.pop_back();",
          "content_same": false
        },
        {
          "line": 750,
          "old_api": "dyn_cast<FuncDecl>(D)",
          "new_api": "isAccessor",
          "old_text": "dyn_cast<FuncDecl>(D)",
          "new_text": "FD->isAccessor()",
          "old_line_content": "    if (auto FD = dyn_cast<FuncDecl>(D)) {",
          "new_line_content": "      if (FD->isAccessor()) {",
          "content_same": false
        },
        {
          "line": 754,
          "old_api": "getAccessorStorageDecl",
          "new_api": "end",
          "old_text": "FD->getAccessorStorageDecl()",
          "new_text": "StorageContexts.end()",
          "old_line_content": "        auto it = StorageContexts.find(FD->getAccessorStorageDecl());",
          "new_line_content": "        if (it != StorageContexts.end()) {",
          "content_same": false
        },
        {
          "line": 762,
          "old_api": "declarationIntroducesNewContext",
          "new_api": "buildDeclarationRefinementContext",
          "old_text": "declarationIntroducesNewContext(D)",
          "new_text": "buildDeclarationRefinementContext(D)",
          "old_line_content": "    if (declarationIntroducesNewContext(D)) {",
          "new_line_content": "      NewTRC = buildDeclarationRefinementContext(D);",
          "content_same": false
        },
        {
          "line": 780,
          "old_api": "TypeChecker::availableRange(D, AC)",
          "new_api": "getPotentialVersions",
          "old_text": "TypeChecker::availableRange(D, AC)",
          "new_text": "getCurrentTRC()->getPotentialVersions()",
          "old_line_content": "    VersionRange DeclVersionRange = TypeChecker::availableRange(D, AC);",
          "new_line_content": "    DeclVersionRange.meetWith(getCurrentTRC()->getPotentialVersions());",
          "content_same": false
        },
        {
          "line": 791,
          "old_api": "dyn_cast<AbstractStorageDecl>(D)",
          "new_api": "hasAccessorFunctions",
          "old_text": "dyn_cast<AbstractStorageDecl>(D)",
          "new_text": "StorageDecl->hasAccessorFunctions()",
          "old_line_content": "    if (auto *StorageDecl = dyn_cast<AbstractStorageDecl>(D)) {",
          "new_line_content": "      if (StorageDecl->hasAccessorFunctions()) {",
          "content_same": false
        },
        {
          "line": 816,
          "old_api": "dyn_cast<AbstractStorageDecl>(D)",
          "new_api": "getDeclContext",
          "old_text": "dyn_cast<AbstractStorageDecl>(D)",
          "new_text": "storageDecl->getDeclContext()->isLocalContext()",
          "old_line_content": "    if (auto *storageDecl = dyn_cast<AbstractStorageDecl>(D)) {",
          "new_line_content": "      if (storageDecl->getDeclContext()->isLocalContext()) {",
          "content_same": false
        },
        {
          "line": 823,
          "old_api": "dyn_cast<AbstractFunctionDecl>(D)",
          "new_api": "getBodyKind",
          "old_text": "dyn_cast<AbstractFunctionDecl>(D)",
          "new_text": "funcDecl->getBodyKind()",
          "old_line_content": "    if (auto *funcDecl = dyn_cast<AbstractFunctionDecl>(D)) {",
          "new_line_content": "      return funcDecl->getBodyKind() != AbstractFunctionDecl::BodyKind::None;",
          "content_same": false
        },
        {
          "line": 837,
          "old_api": "hasAccessorFunctions",
          "new_api": "getStartLoc",
          "old_text": "storageDecl->hasAccessorFunctions()",
          "new_text": "storageDecl->getStartLoc()",
          "old_line_content": "      if (storageDecl->hasAccessorFunctions()) {",
          "new_line_content": "        return SourceRange(storageDecl->getStartLoc(),",
          "content_same": false
        },
        {
          "line": 838,
          "old_api": "getStartLoc",
          "new_api": "getBracesRange",
          "old_text": "storageDecl->getStartLoc()",
          "new_text": "storageDecl->getBracesRange()",
          "old_line_content": "        return SourceRange(storageDecl->getStartLoc(),",
          "new_line_content": "                           storageDecl->getBracesRange().End);",
          "content_same": false
        },
        {
          "line": 845,
          "old_api": "dyn_cast<VarDecl>(storageDecl)",
          "new_api": "getParentPattern",
          "old_text": "dyn_cast<VarDecl>(storageDecl)",
          "new_text": "varDecl->getParentPattern()",
          "old_line_content": "      if (auto varDecl = dyn_cast<VarDecl>(storageDecl)) {",
          "new_line_content": "        PatternBindingDecl *patternBindingDecl = varDecl->getParentPattern();",
          "content_same": false
        },
        {
          "line": 856,
          "old_api": "getAttrs",
          "new_api": "dyn_cast<AvailabilityAttr>(Attr)",
          "old_text": "D->getAttrs()",
          "new_text": "dyn_cast<AvailabilityAttr>(Attr)",
          "old_line_content": "    for (auto Attr : D->getAttrs())",
          "new_line_content": "      if (auto AvAttr = dyn_cast<AvailabilityAttr>(Attr)) {",
          "content_same": false
        },
        {
          "line": 857,
          "old_api": "dyn_cast<AvailabilityAttr>(Attr)",
          "new_api": "isActivePlatform",
          "old_text": "dyn_cast<AvailabilityAttr>(Attr)",
          "new_text": "AvAttr->isActivePlatform(AC)",
          "old_line_content": "      if (auto AvAttr = dyn_cast<AvailabilityAttr>(Attr)) {",
          "new_line_content": "        if (!AvAttr->isInvalid() && AvAttr->isActivePlatform(AC)) {",
          "content_same": false
        },
        {
          "line": 870,
          "old_api": "buildIfStmtRefinementContext",
          "new_api": "std::make_pair(!BuiltTRC, S)",
          "old_text": "buildIfStmtRefinementContext(IS)",
          "new_text": "std::make_pair(!BuiltTRC, S)",
          "old_line_content": "    bool BuiltTRC = buildIfStmtRefinementContext(IS);",
          "new_line_content": "    return std::make_pair(!BuiltTRC, S);",
          "content_same": false
        },
        {
          "line": 905,
          "old_api": "refinedThenContextForQuery",
          "new_api": "getThenStmt",
          "old_text": "refinedThenContextForQuery(QueryExpr, IS)",
          "new_text": "IS->getThenStmt()",
          "old_line_content": "    auto *ThenTRC = refinedThenContextForQuery(QueryExpr, IS);",
          "new_line_content": "    TypeRefinementContextBuilder(ThenTRC, AC).build(IS->getThenStmt());",
          "content_same": false
        },
        {
          "line": 924,
          "old_api": "getQueries",
          "new_api": "getPlatform",
          "old_text": "E->getQueries()",
          "new_text": "Spec->getPlatform()",
          "old_line_content": "    for (auto *Spec : E->getQueries()) {",
          "new_line_content": "      bool Inserted = Platforms.insert(Spec->getPlatform()).second;",
          "content_same": false
        },
        {
          "line": 927,
          "old_api": "getPlatform",
          "new_api": "getPlatformLoc",
          "old_text": "Spec->getPlatform()",
          "new_text": "Spec->getPlatformLoc()",
          "old_line_content": "        PlatformKind Platform = Spec->getPlatform();",
          "new_line_content": "        AC.Diags.diagnose(Spec->getPlatformLoc(),",
          "content_same": false
        },
        {
          "line": 953,
          "old_api": "rangeForSpec",
          "new_api": "setAvailableRange",
          "old_text": "rangeForSpec(Spec)",
          "new_text": "E->setAvailableRange(range)",
          "old_line_content": "    VersionRange range = rangeForSpec(Spec);",
          "new_line_content": "    E->setAvailableRange(range);",
          "content_same": false
        },
        {
          "line": 961,
          "old_api": "getReason",
          "new_api": "getLoc",
          "old_text": "CurTRC->getReason()",
          "new_text": "E->getLoc()",
          "old_line_content": "      if (CurTRC->getReason() == TypeRefinementContext::Reason::Root) {",
          "new_line_content": "        Diags.diagnose(E->getLoc(),",
          "content_same": false
        },
        {
          "line": 968,
          "old_api": "targetPlatform",
          "new_api": "getIntroductionLoc",
          "old_text": "targetPlatform(AC.LangOpts)",
          "new_text": "CurTRC->getIntroductionLoc()",
          "old_line_content": "                       platformString(targetPlatform(AC.LangOpts)));",
          "new_line_content": "        Diags.diagnose(CurTRC->getIntroductionLoc(),",
          "content_same": false
        },
        {
          "line": 1032,
          "old_api": "slice",
          "new_api": "build",
          "old_text": "llvm::makeArrayRef(SF.Decls).slice(StartElem)",
          "new_text": "Builder.build(D)",
          "old_line_content": "  for (auto D : llvm::makeArrayRef(SF.Decls).slice(StartElem)) {",
          "new_line_content": "    Builder.build(D);",
          "content_same": false
        },
        {
          "line": 1084,
          "old_api": "getParentSourceFile",
          "new_api": "assert",
          "old_text": "referenceDC->getParentSourceFile()",
          "new_text": "assert(SF)",
          "old_line_content": "  SourceFile *SF = referenceDC->getParentSourceFile();",
          "new_line_content": "  assert(SF);",
          "content_same": false
        },
        {
          "line": 1106,
          "old_api": "isValid",
          "new_api": "findMostRefinedSubContext",
          "old_text": "lookupLoc.isValid()",
          "new_text": "rootTRC->findMostRefinedSubContext(lookupLoc,\n                                             Context.SourceMgr)",
          "old_line_content": "  if (lookupLoc.isValid()) {",
          "new_line_content": "    TRC = rootTRC->findMostRefinedSubContext(lookupLoc,",
          "content_same": false
        },
        {
          "line": 1115,
          "old_api": "TypeChecker::availableRange(D, Context)",
          "new_api": "getPotentialVersions",
          "old_text": "TypeChecker::availableRange(D, Context)",
          "new_text": "TRC->getPotentialVersions()",
          "old_line_content": "  VersionRange safeRangeUnderApprox = TypeChecker::availableRange(D, Context);",
          "new_line_content": "  VersionRange runningOSOverApprox = TRC->getPotentialVersions();",
          "content_same": false
        },
        {
          "line": 1144,
          "old_api": "VersionRange::empty()",
          "new_api": "isDeclAvailable",
          "old_text": "VersionRange::empty()",
          "new_text": "isDeclAvailable(D, referenceLoc, referenceDC, safeRangeUnderApprox)",
          "old_line_content": "  VersionRange safeRangeUnderApprox = VersionRange::empty();",
          "new_line_content": "  if (isDeclAvailable(D, referenceLoc, referenceDC, safeRangeUnderApprox)) {",
          "content_same": false
        },
        {
          "line": 1169,
          "old_api": "getRequiredOSVersionRange",
          "new_api": "targetPlatform",
          "old_text": "diagnose(referenceLoc, diag::availability_decl_only_version_greater,\n           Name, prettyPlatformString(targetPlatform(Context.LangOpts)),\n           Reason.getRequiredOSVersionRange().getLowerEndpoint())",
          "new_text": "targetPlatform(Context.LangOpts)",
          "old_line_content": "  diagnose(referenceLoc, diag::availability_decl_only_version_greater,",
          "new_line_content": "           Name, prettyPlatformString(targetPlatform(Context.LangOpts)),",
          "content_same": false
        },
        {
          "line": 1170,
          "old_api": "targetPlatform",
          "new_api": "getRequiredOSVersionRange",
          "old_text": "targetPlatform(Context.LangOpts)",
          "new_text": "Reason.getRequiredOSVersionRange().getLowerEndpoint()",
          "old_line_content": "           Name, prettyPlatformString(targetPlatform(Context.LangOpts)),",
          "new_line_content": "           Reason.getRequiredOSVersionRange().getLowerEndpoint());",
          "content_same": false
        },
        {
          "line": 1179,
          "old_api": "dyn_cast<ValueDecl>(D)",
          "new_api": "getNameStr",
          "old_text": "dyn_cast<ValueDecl>(D)",
          "new_text": "VD->getNameStr()",
          "old_line_content": "  if (auto VD = dyn_cast<ValueDecl>(D)) {",
          "new_line_content": "    checkForForbiddenPrefix(VD->getNameStr());",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1025,
          "old_api": null,
          "new_api": "getASTContext",
          "old_text": null,
          "new_text": "SF.getASTContext()",
          "old_line_content": "                                                      unsigned StartElem) {",
          "new_line_content": "  ASTContext &AC = SF.getASTContext();",
          "content_same": false
        },
        {
          "line": 1027,
          "old_api": null,
          "new_api": "getTypeRefinementContext",
          "old_text": null,
          "new_text": "SF.getTypeRefinementContext()",
          "old_line_content": "",
          "new_line_content": "  TypeRefinementContext *RootTRC = SF.getTypeRefinementContext();",
          "content_same": false
        },
        {
          "line": 516,
          "old_api": null,
          "new_api": "slice",
          "old_text": null,
          "new_text": "llvm::makeArrayRef(SF.Decls).slice(StartElem)",
          "old_line_content": "  bool hasTopLevelCode = false;",
          "new_line_content": "  for (auto D : llvm::makeArrayRef(SF.Decls).slice(StartElem)) {",
          "content_same": false
        },
        {
          "line": 1031,
          "old_api": null,
          "new_api": "slice",
          "old_text": null,
          "new_text": "llvm::makeArrayRef(SF.Decls).slice(StartElem)",
          "old_line_content": "  TypeRefinementContextBuilder Builder(RootTRC, AC);",
          "new_line_content": "  for (auto D : llvm::makeArrayRef(SF.Decls).slice(StartElem)) {",
          "content_same": false
        },
        {
          "line": 520,
          "old_api": null,
          "new_api": "typeCheckTopLevelCodeDecl",
          "old_text": null,
          "new_text": "TC.typeCheckTopLevelCodeDecl(TLCD)",
          "old_line_content": "      // Immediately perform global name-binding etc.",
          "new_line_content": "      TC.typeCheckTopLevelCodeDecl(TLCD);",
          "content_same": false
        },
        {
          "line": 522,
          "old_api": null,
          "new_api": "typeCheckDecl",
          "old_text": null,
          "new_text": "TC.typeCheckDecl(D, /*isFirstPass*/false)",
          "old_line_content": "    } else {",
          "new_line_content": "      TC.typeCheckDecl(D, /*isFirstPass*/false);",
          "content_same": false
        },
        {
          "line": 527,
          "old_api": null,
          "new_api": "contextualizeTopLevelCode",
          "old_text": null,
          "new_text": "TC.contextualizeTopLevelCode(TLC,\n                           llvm::makeArrayRef(SF.Decls).slice(StartElem))",
          "old_line_content": "  if (hasTopLevelCode) {",
          "new_line_content": "    TC.contextualizeTopLevelCode(TLC,",
          "content_same": false
        },
        {
          "line": 531,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "DefinedFunctions.end()",
          "old_line_content": "  ",
          "new_line_content": "  DefinedFunctions.insert(DefinedFunctions.end(),",
          "content_same": false
        },
        {
          "line": 1044,
          "old_api": null,
          "new_api": "getContextKind",
          "old_text": null,
          "new_text": "Ancestor->getContextKind()",
          "old_line_content": "    SourceLoc Loc;",
          "new_line_content": "    switch (Ancestor->getContextKind()) {",
          "content_same": false
        },
        {
          "line": 1046,
          "old_api": null,
          "new_api": "getLoc",
          "old_text": null,
          "new_text": "cast<AbstractClosureExpr>(Ancestor)->getLoc()",
          "old_line_content": "    case DeclContextKind::AbstractClosureExpr:",
          "new_line_content": "      Loc = cast<AbstractClosureExpr>(Ancestor)->getLoc();",
          "content_same": false
        },
        {
          "line": 538,
          "old_api": null,
          "new_api": "hadError",
          "old_text": null,
          "new_text": "TC.Context.hadError()",
          "old_line_content": "  // that the REPL needs to synthesize.",
          "new_line_content": "  if (SF.Kind == SourceFileKind::REPL && !TC.Context.hadError())",
          "content_same": false
        },
        {
          "line": 1050,
          "old_api": null,
          "new_api": "getLoc",
          "old_text": null,
          "new_text": "cast<TopLevelCodeDecl>(Ancestor)->getLoc()",
          "old_line_content": "    case DeclContextKind::TopLevelCodeDecl:",
          "new_line_content": "      Loc = cast<TopLevelCodeDecl>(Ancestor)->getLoc();",
          "content_same": false
        },
        {
          "line": 541,
          "old_api": null,
          "new_api": "typeCheckFunctionsAndExternalDecls",
          "old_text": null,
          "new_text": "typeCheckFunctionsAndExternalDecls(TC)",
          "old_line_content": "",
          "new_line_content": "  typeCheckFunctionsAndExternalDecls(TC);",
          "content_same": false
        },
        {
          "line": 1054,
          "old_api": null,
          "new_api": "getLoc",
          "old_text": null,
          "new_text": "cast<AbstractFunctionDecl>(Ancestor)->getLoc()",
          "old_line_content": "    case DeclContextKind::AbstractFunctionDecl:",
          "new_line_content": "      Loc = cast<AbstractFunctionDecl>(Ancestor)->getLoc();",
          "content_same": false
        },
        {
          "line": 1058,
          "old_api": null,
          "new_api": "getLoc",
          "old_text": null,
          "new_text": "cast<NominalTypeDecl>(Ancestor)->getLoc()",
          "old_line_content": "    case DeclContextKind::NominalTypeDecl:",
          "new_line_content": "      Loc = cast<NominalTypeDecl>(Ancestor)->getLoc();",
          "content_same": false
        },
        {
          "line": 547,
          "old_api": null,
          "new_api": "diagnoseObjCMethodConflicts",
          "old_text": null,
          "new_text": "Ctx.diagnoseObjCMethodConflicts(SF)",
          "old_line_content": "    // Objective-C methods.",
          "new_line_content": "    Ctx.diagnoseObjCMethodConflicts(SF);",
          "content_same": false
        },
        {
          "line": 1062,
          "old_api": null,
          "new_api": "getLoc",
          "old_text": null,
          "new_text": "cast<ExtensionDecl>(Ancestor)->getLoc()",
          "old_line_content": "    case DeclContextKind::ExtensionDecl:",
          "new_line_content": "      Loc = cast<ExtensionDecl>(Ancestor)->getLoc();",
          "content_same": false
        },
        {
          "line": 1071,
          "old_api": null,
          "new_api": "isValid",
          "old_text": null,
          "new_text": "Loc.isValid()",
          "old_line_content": "",
          "new_line_content": "    if (Loc.isValid()) {",
          "content_same": false
        },
        {
          "line": 560,
          "old_api": null,
          "new_api": "getValue",
          "old_text": null,
          "new_text": "SF.FirstObjCAttrLoc.getValue()",
          "old_line_content": "      SF.FirstObjCAttrLoc && !ImportsFoundationModule) {",
          "new_line_content": "    auto L = SF.FirstObjCAttrLoc.getValue();",
          "content_same": false
        },
        {
          "line": 1074,
          "old_api": null,
          "new_api": "getParent",
          "old_text": null,
          "new_text": "Ancestor->getParent()",
          "old_line_content": "    }",
          "new_line_content": "    Ancestor = Ancestor->getParent();",
          "content_same": false
        },
        {
          "line": 563,
          "old_api": null,
          "new_api": "SourceRange",
          "old_text": null,
          "new_text": "SourceRange(L)",
          "old_line_content": "                       \"objc\", FoundationModuleName)",
          "new_line_content": "    .highlight(SourceRange(L));",
          "content_same": false
        },
        {
          "line": 1077,
          "old_api": null,
          "new_api": "SourceLoc",
          "old_text": null,
          "new_text": "SourceLoc()",
          "old_line_content": "",
          "new_line_content": "  return SourceLoc();",
          "content_same": false
        },
        {
          "line": 567,
          "old_api": null,
          "new_api": "verify",
          "old_text": null,
          "new_text": "verify(SF)",
          "old_line_content": "  // Verify the SourceFile.",
          "new_line_content": "  verify(SF);",
          "content_same": false
        },
        {
          "line": 1083,
          "old_api": null,
          "new_api": "getParentSourceFile",
          "old_text": null,
          "new_text": "referenceDC->getParentSourceFile()",
          "old_line_content": "                                  VersionRange &OutAvailableRange) {",
          "new_line_content": "  SourceFile *SF = referenceDC->getParentSourceFile();",
          "content_same": false
        },
        {
          "line": 573,
          "old_api": null,
          "new_api": "verifyAllLoadedModules",
          "old_text": null,
          "new_text": "Ctx.verifyAllLoadedModules()",
          "old_line_content": "      !Ctx.LangOpts.DebuggerSupport) {",
          "new_line_content": "    Ctx.verifyAllLoadedModules();",
          "content_same": false
        },
        {
          "line": 1088,
          "old_api": null,
          "new_api": "isValid",
          "old_text": null,
          "new_text": "referenceLoc.isValid()",
          "old_line_content": "  ",
          "new_line_content": "  if (referenceLoc.isValid()) {",
          "content_same": false
        },
        {
          "line": 579,
          "old_api": null,
          "new_api": "getASTContext",
          "old_text": null,
          "new_text": "SF.getASTContext()",
          "old_line_content": "void swift::performWholeModuleTypeChecking(SourceFile &SF) {",
          "new_line_content": "  auto &Ctx = SF.getASTContext();",
          "content_same": false
        },
        {
          "line": 1099,
          "old_api": null,
          "new_api": "bestLocationInDeclContextHierarchy",
          "old_text": null,
          "new_text": "bestLocationInDeclContextHierarchy(referenceDC)",
          "old_line_content": "    // will be  real problem.",
          "new_line_content": "    lookupLoc = bestLocationInDeclContextHierarchy(referenceDC);",
          "content_same": false
        },
        {
          "line": 1102,
          "old_api": null,
          "new_api": "getTypeRefinementContext",
          "old_text": null,
          "new_text": "SF->getTypeRefinementContext()",
          "old_line_content": "  ",
          "new_line_content": "  TypeRefinementContext *rootTRC = SF->getTypeRefinementContext();",
          "content_same": false
        },
        {
          "line": 592,
          "old_api": null,
          "new_api": "validateType",
          "old_text": null,
          "new_text": "TypeChecker(Ctx).validateType(T, DC, options)",
          "old_line_content": "  if (ProduceDiagnostics) {",
          "new_line_content": "    return TypeChecker(Ctx).validateType(T, DC, options);",
          "content_same": false
        },
        {
          "line": 1105,
          "old_api": null,
          "new_api": "isValid",
          "old_text": null,
          "new_text": "lookupLoc.isValid()",
          "old_line_content": "  ",
          "new_line_content": "  if (lookupLoc.isValid()) {",
          "content_same": false
        },
        {
          "line": 596,
          "old_api": null,
          "new_api": "validateType",
          "old_text": null,
          "new_text": "TypeChecker(Ctx, Diags).validateType(T, DC, options)",
          "old_line_content": "    DiagnosticEngine Diags(Ctx.SourceMgr);",
          "new_line_content": "    return TypeChecker(Ctx, Diags).validateType(T, DC, options);",
          "content_same": false
        },
        {
          "line": 1114,
          "old_api": null,
          "new_api": "TypeChecker::availableRange(D, Context)",
          "old_text": null,
          "new_text": "TypeChecker::availableRange(D, Context)",
          "old_line_content": "  ",
          "new_line_content": "  VersionRange safeRangeUnderApprox = TypeChecker::availableRange(D, Context);",
          "content_same": false
        },
        {
          "line": 608,
          "old_api": null,
          "new_api": "handleSILGenericParams",
          "old_text": null,
          "new_text": "TypeChecker(Ctx).handleSILGenericParams(builders, gps, DC)",
          "old_line_content": "              SmallVectorImpl<ArchetypeBuilder *> &builders) {",
          "new_line_content": "  return TypeChecker(Ctx).handleSILGenericParams(builders, gps, DC);",
          "content_same": false
        },
        {
          "line": 1122,
          "old_api": null,
          "new_api": "isContainedIn",
          "old_text": null,
          "new_text": "runningOSOverApprox.isContainedIn(safeRangeUnderApprox)",
          "old_line_content": "  // not available.",
          "new_line_content": "  if (!(runningOSOverApprox.isContainedIn(safeRangeUnderApprox))) {",
          "content_same": false
        },
        {
          "line": 612,
          "old_api": null,
          "new_api": "getASTContext",
          "old_text": null,
          "new_text": "D->getASTContext()",
          "old_line_content": "bool swift::typeCheckCompletionDecl(Decl *D) {",
          "new_line_content": "  auto &Ctx = D->getASTContext();",
          "content_same": false
        },
        {
          "line": 618,
          "old_api": null,
          "new_api": "typeCheckDecl",
          "old_text": null,
          "new_text": "TC.typeCheckDecl(D, true)",
          "old_line_content": "",
          "new_line_content": "  TC.typeCheckDecl(D, true);",
          "content_same": false
        },
        {
          "line": 1137,
          "old_api": null,
          "new_api": "getParentSourceFile",
          "old_text": null,
          "new_text": "referenceDC->getParentSourceFile()",
          "old_line_content": "",
          "new_line_content": "  if (!referenceDC->getParentSourceFile()) {",
          "content_same": false
        },
        {
          "line": 628,
          "old_api": null,
          "new_api": "Type",
          "old_text": null,
          "new_text": "Type()",
          "old_line_content": "  TypeChecker TC(Ctx, diags);",
          "new_line_content": "  TC.typeCheckExpression(parsedExpr, DC, Type(), Type(), /*discardedExpr=*/true,",
          "content_same": false
        },
        {
          "line": 631,
          "old_api": null,
          "new_api": "isa<ErrorExpr>(parsedExpr)",
          "old_text": null,
          "new_text": "isa<ErrorExpr>(parsedExpr)",
          "old_line_content": "  ",
          "new_line_content": "  return parsedExpr && !isa<ErrorExpr>(parsedExpr)",
          "content_same": false
        },
        {
          "line": 1143,
          "old_api": null,
          "new_api": "VersionRange::empty()",
          "old_text": null,
          "new_text": "VersionRange::empty()",
          "old_line_content": "",
          "new_line_content": "  VersionRange safeRangeUnderApprox = VersionRange::empty();",
          "content_same": false
        },
        {
          "line": 1149,
          "old_api": null,
          "new_api": "UnavailabilityReason::requiresVersionRange(safeRangeUnderApprox)",
          "old_text": null,
          "new_text": "UnavailabilityReason::requiresVersionRange(safeRangeUnderApprox)",
          "old_line_content": "  // safeRangeUnderApprox now holds the safe range.",
          "new_line_content": "  return UnavailabilityReason::requiresVersionRange(safeRangeUnderApprox);",
          "content_same": false
        },
        {
          "line": 638,
          "old_api": null,
          "new_api": "getASTContext",
          "old_text": null,
          "new_text": "AFD->getASTContext()",
          "old_line_content": "                                               SourceLoc EndTypeCheckLoc) {",
          "new_line_content": "  auto &Ctx = AFD->getASTContext();",
          "content_same": false
        },
        {
          "line": 1154,
          "old_api": null,
          "new_api": "getFullName",
          "old_text": null,
          "new_text": "D->getFullName()",
          "old_line_content": "    ValueDecl *D, SourceLoc referenceLoc, const UnavailabilityReason &Reason) {",
          "new_line_content": "  diagnosePotentialUnavailability(D, D->getFullName(), referenceLoc, Reason);",
          "content_same": false
        },
        {
          "line": 644,
          "old_api": null,
          "new_api": "typeCheckAbstractFunctionBodyUntil",
          "old_text": null,
          "new_text": "TC.typeCheckAbstractFunctionBodyUntil(AFD, EndTypeCheckLoc)",
          "old_line_content": "  TypeChecker TC(Ctx, Diags);",
          "new_line_content": "  return !TC.typeCheckAbstractFunctionBodyUntil(AFD, EndTypeCheckLoc);",
          "content_same": false
        },
        {
          "line": 648,
          "old_api": null,
          "new_api": "getASTContext",
          "old_text": null,
          "new_text": "static_cast<Decl *>(TLCD)->getASTContext()",
          "old_line_content": "bool swift::typeCheckTopLevelCodeDecl(TopLevelCodeDecl *TLCD) {",
          "new_line_content": "  auto &Ctx = static_cast<Decl *>(TLCD)->getASTContext();",
          "content_same": false
        },
        {
          "line": 1163,
          "old_api": null,
          "new_api": "getReasonKind",
          "old_text": null,
          "new_text": "Reason.getReasonKind()",
          "old_line_content": "  // weak-linked symbols.",
          "new_line_content": "  if (Reason.getReasonKind() !=",
          "content_same": false
        },
        {
          "line": 654,
          "old_api": null,
          "new_api": "typeCheckTopLevelCodeDecl",
          "old_text": null,
          "new_text": "TC.typeCheckTopLevelCodeDecl(TLCD)",
          "old_line_content": "  TypeChecker TC(Ctx, Diags);",
          "new_line_content": "  TC.typeCheckTopLevelCodeDecl(TLCD);",
          "content_same": false
        },
        {
          "line": 1168,
          "old_api": null,
          "new_api": "getRequiredOSVersionRange",
          "old_text": null,
          "new_text": "diagnose(referenceLoc, diag::availability_decl_only_version_greater,\n           Name, prettyPlatformString(targetPlatform(Context.LangOpts)),\n           Reason.getRequiredOSVersionRange().getLowerEndpoint())",
          "old_line_content": "",
          "new_line_content": "  diagnose(referenceLoc, diag::availability_decl_only_version_greater,",
          "content_same": false
        },
        {
          "line": 659,
          "old_api": null,
          "new_api": "static_cast<TypeChecker*>(resolver)",
          "old_text": null,
          "new_text": "static_cast<TypeChecker*>(resolver)",
          "old_line_content": "static void deleteTypeCheckerAndDiags(LazyResolver *resolver) {",
          "new_line_content": "  DiagnosticEngine &diags = static_cast<TypeChecker*>(resolver)->Diags;",
          "content_same": false
        },
        {
          "line": 1176,
          "old_api": null,
          "new_api": "hasEnabledForbiddenTypecheckPrefix",
          "old_text": null,
          "new_text": "hasEnabledForbiddenTypecheckPrefix()",
          "old_line_content": "void TypeChecker::checkForForbiddenPrefix(const Decl *D) {",
          "new_line_content": "  if (!hasEnabledForbiddenTypecheckPrefix())",
          "content_same": false
        },
        {
          "line": 666,
          "old_api": null,
          "new_api": "OwnedResolver",
          "old_text": null,
          "new_text": "OwnedResolver(new TypeChecker(Ctx, *diags),\n                       &deleteTypeCheckerAndDiags)",
          "old_line_content": "  auto diags = new DiagnosticEngine(Ctx.SourceMgr);",
          "new_line_content": "  return OwnedResolver(new TypeChecker(Ctx, *diags),",
          "content_same": false
        },
        {
          "line": 1178,
          "old_api": null,
          "new_api": "dyn_cast<ValueDecl>(D)",
          "old_text": null,
          "new_text": "dyn_cast<ValueDecl>(D)",
          "old_line_content": "    return;",
          "new_line_content": "  if (auto VD = dyn_cast<ValueDecl>(D)) {",
          "content_same": false
        },
        {
          "line": 1184,
          "old_api": null,
          "new_api": "hasEnabledForbiddenTypecheckPrefix",
          "old_text": null,
          "new_text": "hasEnabledForbiddenTypecheckPrefix()",
          "old_line_content": "void TypeChecker::checkForForbiddenPrefix(const UnresolvedDeclRefExpr *E) {",
          "new_line_content": "  if (!hasEnabledForbiddenTypecheckPrefix())",
          "content_same": false
        },
        {
          "line": 1186,
          "old_api": null,
          "new_api": "getName",
          "old_text": null,
          "new_text": "E->getName()",
          "old_line_content": "    return;",
          "new_line_content": "  checkForForbiddenPrefix(E->getName());",
          "content_same": false
        },
        {
          "line": 675,
          "old_api": null,
          "new_api": "highlight",
          "old_text": null,
          "new_text": "diagnose(nameLoc, diag::ambiguous_member_type, name, baseTy)\n    .highlight(baseRange)",
          "old_line_content": "                                              LookupTypeResult &lookup) {",
          "new_line_content": "  diagnose(nameLoc, diag::ambiguous_member_type, name, baseTy)",
          "content_same": false
        },
        {
          "line": 678,
          "old_api": null,
          "new_api": "diagnose",
          "old_text": null,
          "new_text": "diagnose(member.first, diag::found_candidate_type,\n             member.second)",
          "old_line_content": "  for (const auto &member : lookup) {",
          "new_line_content": "    diagnose(member.first, diag::found_candidate_type,",
          "content_same": false
        },
        {
          "line": 1190,
          "old_api": null,
          "new_api": "hasEnabledForbiddenTypecheckPrefix",
          "old_text": null,
          "new_text": "hasEnabledForbiddenTypecheckPrefix()",
          "old_line_content": "void TypeChecker::checkForForbiddenPrefix(Identifier Ident) {",
          "new_line_content": "  if (!hasEnabledForbiddenTypecheckPrefix())",
          "content_same": false
        },
        {
          "line": 1192,
          "old_api": null,
          "new_api": "str",
          "old_text": null,
          "new_text": "Ident.str()",
          "old_line_content": "    return;",
          "new_line_content": "  checkForForbiddenPrefix(Ident.empty() ? StringRef() : Ident.str());",
          "content_same": false
        },
        {
          "line": 684,
          "old_api": null,
          "new_api": "VersionRange::all()",
          "old_text": null,
          "new_text": "VersionRange::all()",
          "old_line_content": "VersionRange TypeChecker::availableRange(Decl *D, ASTContext &Ctx) {",
          "new_line_content": "  VersionRange Avail = VersionRange::all();",
          "content_same": false
        },
        {
          "line": 1196,
          "old_api": null,
          "new_api": "hasEnabledForbiddenTypecheckPrefix",
          "old_text": null,
          "new_text": "hasEnabledForbiddenTypecheckPrefix()",
          "old_line_content": "void TypeChecker::checkForForbiddenPrefix(StringRef Name) {",
          "new_line_content": "  if (!hasEnabledForbiddenTypecheckPrefix())",
          "content_same": false
        },
        {
          "line": 686,
          "old_api": null,
          "new_api": "getAttrs",
          "old_text": null,
          "new_text": "D->getAttrs()",
          "old_line_content": "",
          "new_line_content": "  for (auto Attr : D->getAttrs()) {",
          "content_same": false
        },
        {
          "line": 1198,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "Name.empty()",
          "old_line_content": "    return;",
          "new_line_content": "  if (Name.empty())",
          "content_same": false
        },
        {
          "line": 1200,
          "old_api": null,
          "new_api": "startswith",
          "old_text": null,
          "new_text": "Name.startswith(Context.LangOpts.DebugForbidTypecheckPrefix)",
          "old_line_content": "    return;",
          "new_line_content": "  if (Name.startswith(Context.LangOpts.DebugForbidTypecheckPrefix)) {",
          "content_same": false
        },
        {
          "line": 178,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "results.size()",
          "old_line_content": "                                   /*IsTypeLookup=*/true);",
          "new_line_content": "      if (results.size() != 1) {",
          "content_same": false
        },
        {
          "line": 1203,
          "old_api": null,
          "new_api": "llvm::report_fatal_error(Msg)",
          "old_text": null,
          "new_text": "llvm::report_fatal_error(Msg)",
          "old_line_content": "    Msg += Name;",
          "new_line_content": "    llvm::report_fatal_error(Msg);",
          "content_same": false
        },
        {
          "line": 694,
          "old_api": null,
          "new_api": "getValue",
          "old_text": null,
          "new_text": "AvailAttr->Introduced.getValue()",
          "old_line_content": "    VersionRange AttrRange =",
          "new_line_content": "        VersionRange::allGTE(AvailAttr->Introduced.getValue());",
          "content_same": false
        },
        {
          "line": 185,
          "old_api": null,
          "new_api": "SourceLoc",
          "old_text": null,
          "new_text": "SourceLoc()",
          "old_line_content": "      if (!tyDecl) {",
          "new_line_content": "        diagnose(SourceLoc(), diag::bool_type_broken);",
          "content_same": false
        },
        {
          "line": 699,
          "old_api": null,
          "new_api": "meetWith",
          "old_text": null,
          "new_text": "Avail.meetWith(AttrRange)",
          "old_line_content": "    // in the future or emit a diagnostic.",
          "new_line_content": "    Avail.meetWith(AttrRange);",
          "content_same": false
        },
        {
          "line": 189,
          "old_api": null,
          "new_api": "getDeclaredType",
          "old_text": null,
          "new_text": "tyDecl->getDeclaredType()",
          "old_line_content": "",
          "new_line_content": "      return tyDecl->getDeclaredType();",
          "content_same": false
        },
        {
          "line": 196,
          "old_api": null,
          "new_api": "getExtendedType",
          "old_text": null,
          "new_text": "ED->getExtendedType()",
          "old_line_content": "static void bindExtensionDecl(ExtensionDecl *ED, TypeChecker &TC) {",
          "new_line_content": "  if (ED->getExtendedType())",
          "content_same": false
        },
        {
          "line": 199,
          "old_api": null,
          "new_api": "getDeclContext",
          "old_text": null,
          "new_text": "ED->getDeclContext()",
          "old_line_content": "",
          "new_line_content": "  auto dc = ED->getDeclContext();",
          "content_same": false
        },
        {
          "line": 203,
          "old_api": null,
          "new_api": "getRefComponents",
          "old_text": null,
          "new_text": "ED->getRefComponents()",
          "old_line_content": "  SmallVector<ComponentIdentTypeRepr *, 2> components;",
          "new_line_content": "  for (auto &ref : ED->getRefComponents()) {",
          "content_same": false
        },
        {
          "line": 205,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "components.empty()",
          "old_line_content": "    // A reference to \".Type\" is an attempt to extend the metatype.",
          "new_line_content": "    if (ref.Name == TC.Context.Id_Type && !components.empty()) {",
          "content_same": false
        },
        {
          "line": 720,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "ContextStack.size()",
          "old_line_content": "  TypeRefinementContext *getCurrentTRC() {",
          "new_line_content": "    assert(ContextStack.size() > 0);",
          "content_same": false
        },
        {
          "line": 212,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "components.push_back(\n      new (TC.Context) SimpleIdentTypeRepr(ref.NameLoc, ref.Name))",
          "old_line_content": "",
          "new_line_content": "    components.push_back(",
          "content_same": false
        },
        {
          "line": 727,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(TRC)",
          "old_line_content": "      : AC(AC) {",
          "new_line_content": "    assert(TRC);",
          "content_same": false
        },
        {
          "line": 217,
          "old_api": null,
          "new_api": "IdentTypeRepr::create(TC.Context, components)",
          "old_text": null,
          "new_text": "IdentTypeRepr::create(TC.Context, components)",
          "old_line_content": "  // Validate the representation.",
          "new_line_content": "  TypeLoc typeLoc(IdentTypeRepr::create(TC.Context, components));",
          "content_same": false
        },
        {
          "line": 731,
          "old_api": null,
          "new_api": "walk",
          "old_text": null,
          "new_text": "D->walk(*this)",
          "old_line_content": "",
          "new_line_content": "  void build(Decl *D) { D->walk(*this); }",
          "content_same": false
        },
        {
          "line": 737,
          "old_api": null,
          "new_api": "getContextForWalkOfDecl",
          "old_text": null,
          "new_text": "getContextForWalkOfDecl(D)",
          "old_line_content": "  virtual bool walkToDeclPre(Decl *D) override {",
          "new_line_content": "    TypeRefinementContext *DeclTRC = getContextForWalkOfDecl(D);",
          "content_same": false
        },
        {
          "line": 226,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "components.size()",
          "old_line_content": "  GenericParamList *outerGenericParams = nullptr;",
          "new_line_content": "  for (unsigned i = 0, n = components.size(); i != n; ++i) {",
          "content_same": false
        },
        {
          "line": 230,
          "old_api": null,
          "new_api": "getBoundType",
          "old_text": null,
          "new_text": "ident->getBoundType()",
          "old_line_content": "    NominalTypeDecl *typeDecl = nullptr;",
          "new_line_content": "    if (auto type = ident->getBoundType()) {",
          "content_same": false
        },
        {
          "line": 743,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "ContextStack.size()",
          "old_line_content": "  virtual bool walkToDeclPost(Decl *D) override {",
          "new_line_content": "    assert(ContextStack.size() > 0);",
          "content_same": false
        },
        {
          "line": 749,
          "old_api": null,
          "new_api": "dyn_cast<FuncDecl>(D)",
          "old_text": null,
          "new_text": "dyn_cast<FuncDecl>(D)",
          "old_line_content": "  TypeRefinementContext *getContextForWalkOfDecl(Decl *D) {",
          "new_line_content": "    if (auto FD = dyn_cast<FuncDecl>(D)) {",
          "content_same": false
        },
        {
          "line": 753,
          "old_api": null,
          "new_api": "getAccessorStorageDecl",
          "old_text": null,
          "new_text": "FD->getAccessorStorageDecl()",
          "old_line_content": "        // function.",
          "new_line_content": "        auto it = StorageContexts.find(FD->getAccessorStorageDecl());",
          "content_same": false
        },
        {
          "line": 244,
          "old_api": null,
          "new_api": "getRefComponents",
          "old_text": null,
          "new_text": "ED->getRefComponents()",
          "old_line_content": "    // generic arguments.\u0013",
          "new_line_content": "    auto &ref = ED->getRefComponents()[i];",
          "content_same": false
        },
        {
          "line": 249,
          "old_api": null,
          "new_api": "diagnose",
          "old_text": null,
          "new_text": "TC.diagnose(ref.NameLoc, diag::extension_generic_params_for_non_generic,\n                    ref.Name)",
          "old_line_content": "      if (ref.GenericParams) {",
          "new_line_content": "        TC.diagnose(ref.NameLoc, diag::extension_generic_params_for_non_generic,",
          "content_same": false
        },
        {
          "line": 761,
          "old_api": null,
          "new_api": "declarationIntroducesNewContext",
          "old_text": null,
          "new_text": "declarationIntroducesNewContext(D)",
          "old_line_content": "    TypeRefinementContext *NewTRC = nullptr;",
          "new_line_content": "    if (declarationIntroducesNewContext(D)) {",
          "content_same": false
        },
        {
          "line": 764,
          "old_api": null,
          "new_api": "getCurrentTRC",
          "old_text": null,
          "new_text": "getCurrentTRC()",
          "old_line_content": "    } else {",
          "new_line_content": "      NewTRC = getCurrentTRC();",
          "content_same": false
        },
        {
          "line": 260,
          "old_api": null,
          "new_api": "getGenericParams",
          "old_text": null,
          "new_text": "typeDecl->getGenericParams()",
          "old_line_content": "    // FIXME: This will eventually become a Fix-It.",
          "new_line_content": "    if (typeDecl->getGenericParams() && !ref.GenericParams) {",
          "content_same": false
        },
        {
          "line": 774,
          "old_api": null,
          "new_api": "isValid",
          "old_text": null,
          "new_text": "D->getSourceRange().isValid()",
          "old_line_content": "    // corresponding to a given SourceLoc.",
          "new_line_content": "    assert(D->getSourceRange().isValid());",
          "content_same": false
        },
        {
          "line": 266,
          "old_api": null,
          "new_api": "getGenericParams",
          "old_text": null,
          "new_text": "typeDecl->getGenericParams()",
          "old_line_content": "    // parameters. Complain and drop them.",
          "new_line_content": "    if (!typeDecl->getGenericParams() && ref.GenericParams) {",
          "content_same": false
        },
        {
          "line": 779,
          "old_api": null,
          "new_api": "TypeChecker::availableRange(D, AC)",
          "old_text": null,
          "new_text": "TypeChecker::availableRange(D, AC)",
          "old_line_content": "    // of its lexical context.",
          "new_line_content": "    VersionRange DeclVersionRange = TypeChecker::availableRange(D, AC);",
          "content_same": false
        },
        {
          "line": 269,
          "old_api": null,
          "new_api": "getDeclaredType",
          "old_text": null,
          "new_text": "typeDecl->getDeclaredType()",
          "old_line_content": "                  diag::extension_generic_params_for_non_generic_type,",
          "new_line_content": "                  typeDecl->getDeclaredType())",
          "content_same": false
        },
        {
          "line": 783,
          "old_api": null,
          "new_api": "getCurrentTRC",
          "old_text": null,
          "new_text": "getCurrentTRC()",
          "old_line_content": "    TypeRefinementContext *NewTRC =",
          "new_line_content": "        TypeRefinementContext::createForDecl(AC, D, getCurrentTRC(),",
          "content_same": false
        },
        {
          "line": 785,
          "old_api": null,
          "new_api": "refinementSourceRangeForDecl",
          "old_text": null,
          "new_text": "refinementSourceRangeForDecl(D)",
          "old_line_content": "                                             DeclVersionRange,",
          "new_line_content": "                                             refinementSourceRangeForDecl(D));",
          "content_same": false
        },
        {
          "line": 790,
          "old_api": null,
          "new_api": "dyn_cast<AbstractStorageDecl>(D)",
          "old_text": null,
          "new_text": "dyn_cast<AbstractStorageDecl>(D)",
          "old_line_content": "    // parent.",
          "new_line_content": "    if (auto *StorageDecl = dyn_cast<AbstractStorageDecl>(D)) {",
          "content_same": false
        },
        {
          "line": 283,
          "old_api": null,
          "new_api": "getGenericParams",
          "old_text": null,
          "new_text": "typeDecl->getGenericParams()->size()",
          "old_line_content": "    // parameters. Semantic checks will wait for extension validation.",
          "new_line_content": "    if (ref.GenericParams->size() != typeDecl->getGenericParams()->size()) {",
          "content_same": false
        },
        {
          "line": 288,
          "old_api": null,
          "new_api": "getDeclaredType",
          "old_text": null,
          "new_text": "typeDecl->getDeclaredType()",
          "old_line_content": "                  diag::extension_generic_wrong_number_of_parameters,",
          "new_line_content": "                  typeDecl->getDeclaredType(), numHave > numExpected,",
          "content_same": false
        },
        {
          "line": 801,
          "old_api": null,
          "new_api": "dyn_cast<ValueDecl>(D)",
          "old_text": null,
          "new_text": "dyn_cast<ValueDecl>(D)",
          "old_line_content": "  bool declarationIntroducesNewContext(Decl *D) {",
          "new_line_content": "    if (!dyn_cast<ValueDecl>(D)) {",
          "content_same": false
        },
        {
          "line": 290,
          "old_api": null,
          "new_api": "getSourceRange",
          "old_text": null,
          "new_text": "ref.GenericParams->getSourceRange()",
          "old_line_content": "                  numHave, numExpected)",
          "new_line_content": "        .highlight(ref.GenericParams->getSourceRange());",
          "content_same": false
        },
        {
          "line": 807,
          "old_api": null,
          "new_api": "hasActiveAvailabilityAttribute",
          "old_text": null,
          "new_text": "hasActiveAvailabilityAttribute(D)",
          "old_line_content": "    // availability attribute.",
          "new_line_content": "    if (!hasActiveAvailabilityAttribute(D)) {",
          "content_same": false
        },
        {
          "line": 297,
          "old_api": null,
          "new_api": "setOuterParameters",
          "old_text": null,
          "new_text": "ref.GenericParams->setOuterParameters(outerGenericParams)",
          "old_line_content": "    // Chain the generic parameters together.",
          "new_line_content": "    ref.GenericParams->setOuterParameters(outerGenericParams);",
          "content_same": false
        },
        {
          "line": 302,
          "old_api": null,
          "new_api": "getType",
          "old_text": null,
          "new_text": "typeLoc.getType()",
          "old_line_content": "  // Check whether we extended something that is not a nominal type.",
          "new_line_content": "  Type extendedTy = typeLoc.getType();",
          "content_same": false
        },
        {
          "line": 815,
          "old_api": null,
          "new_api": "dyn_cast<AbstractStorageDecl>(D)",
          "old_text": null,
          "new_text": "dyn_cast<AbstractStorageDecl>(D)",
          "old_line_content": "    // not even exist yet).",
          "new_line_content": "    if (auto *storageDecl = dyn_cast<AbstractStorageDecl>(D)) {",
          "content_same": false
        },
        {
          "line": 310,
          "old_api": null,
          "new_api": "setExtendedType",
          "old_text": null,
          "new_text": "ED->setExtendedType(extendedTy)",
          "old_line_content": "",
          "new_line_content": "  ED->setExtendedType(extendedTy);",
          "content_same": false
        },
        {
          "line": 822,
          "old_api": null,
          "new_api": "dyn_cast<AbstractFunctionDecl>(D)",
          "old_text": null,
          "new_text": "dyn_cast<AbstractFunctionDecl>(D)",
          "old_line_content": "    ",
          "new_line_content": "    if (auto *funcDecl = dyn_cast<AbstractFunctionDecl>(D)) {",
          "content_same": false
        },
        {
          "line": 833,
          "old_api": null,
          "new_api": "dyn_cast<AbstractStorageDecl>(D)",
          "old_text": null,
          "new_text": "dyn_cast<AbstractStorageDecl>(D)",
          "old_line_content": "  SourceRange refinementSourceRangeForDecl(Decl *D) {",
          "new_line_content": "    if (auto *storageDecl = dyn_cast<AbstractStorageDecl>(D)) {",
          "content_same": false
        },
        {
          "line": 323,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "TC.definedFunctions.size()",
          "old_line_content": "    unsigned previousFunctionIdx = currentFunctionIdx;",
          "new_line_content": "    for (unsigned n = TC.definedFunctions.size(); currentFunctionIdx != n;",
          "content_same": false
        },
        {
          "line": 836,
          "old_api": null,
          "new_api": "hasAccessorFunctions",
          "old_text": null,
          "new_text": "storageDecl->hasAccessorFunctions()",
          "old_line_content": "      // the bodies of its accessors.",
          "new_line_content": "      if (storageDecl->hasAccessorFunctions()) {",
          "content_same": false
        },
        {
          "line": 330,
          "old_api": null,
          "new_api": "isBodyTypeChecked",
          "old_text": null,
          "new_text": "AFD->isBodyTypeChecked()",
          "old_line_content": "      // but that gets tricky with synthesized function bodies.",
          "new_line_content": "      if (AFD->isBodyTypeChecked()) continue;",
          "content_same": false
        },
        {
          "line": 844,
          "old_api": null,
          "new_api": "dyn_cast<VarDecl>(storageDecl)",
          "old_text": null,
          "new_text": "dyn_cast<VarDecl>(storageDecl)",
          "old_line_content": "      // any type annotation in the type refinement context range.",
          "new_line_content": "      if (auto varDecl = dyn_cast<VarDecl>(storageDecl)) {",
          "content_same": false
        },
        {
          "line": 333,
          "old_api": null,
          "new_api": "typeCheckAbstractFunctionBody",
          "old_text": null,
          "new_text": "TC.typeCheckAbstractFunctionBody(AFD)",
          "old_line_content": "      PrettyStackTraceDecl StackEntry(\"type-checking\", AFD);",
          "new_line_content": "      TC.typeCheckAbstractFunctionBody(AFD);",
          "content_same": false
        },
        {
          "line": 335,
          "old_api": null,
          "new_api": "setBodyTypeCheckedIfPresent",
          "old_text": null,
          "new_text": "AFD->setBodyTypeCheckedIfPresent()",
          "old_line_content": "",
          "new_line_content": "      AFD->setBodyTypeCheckedIfPresent();",
          "content_same": false
        },
        {
          "line": 847,
          "old_api": null,
          "new_api": "getSourceRange",
          "old_text": null,
          "new_text": "patternBindingDecl->getSourceRange()",
          "old_line_content": "        if (patternBindingDecl) {",
          "new_line_content": "          return patternBindingDecl->getSourceRange();",
          "content_same": false
        },
        {
          "line": 852,
          "old_api": null,
          "new_api": "getSourceRange",
          "old_text": null,
          "new_text": "D->getSourceRange()",
          "old_line_content": "    ",
          "new_line_content": "    return D->getSourceRange();",
          "content_same": false
        },
        {
          "line": 342,
          "old_api": null,
          "new_api": "dyn_cast<AbstractFunctionDecl>(TC.definedFunctions[i-1])",
          "old_text": null,
          "new_text": "dyn_cast<AbstractFunctionDecl>(TC.definedFunctions[i-1])",
          "old_line_content": "    for (unsigned i = currentFunctionIdx; i > previousFunctionIdx; --i) {",
          "new_line_content": "      if (auto *FD = dyn_cast<AbstractFunctionDecl>(TC.definedFunctions[i-1]))",
          "content_same": false
        },
        {
          "line": 855,
          "old_api": null,
          "new_api": "getAttrs",
          "old_text": null,
          "new_text": "D->getAttrs()",
          "old_line_content": "  bool hasActiveAvailabilityAttribute(Decl *D) {",
          "new_line_content": "    for (auto Attr : D->getAttrs())",
          "content_same": false
        },
        {
          "line": 346,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "TC.Context.ExternalDefinitions.size()",
          "old_line_content": "",
          "new_line_content": "    for (unsigned n = TC.Context.ExternalDefinitions.size();",
          "content_same": false
        },
        {
          "line": 351,
          "old_api": null,
          "new_api": "dyn_cast<AbstractFunctionDecl>(decl)",
          "old_text": null,
          "new_text": "dyn_cast<AbstractFunctionDecl>(decl)",
          "old_line_content": "      ",
          "new_line_content": "      if (auto *AFD = dyn_cast<AbstractFunctionDecl>(decl)) {",
          "content_same": false
        },
        {
          "line": 353,
          "old_api": null,
          "new_api": "typeCheckAbstractFunctionBody",
          "old_text": null,
          "new_text": "TC.typeCheckAbstractFunctionBody(AFD)",
          "old_line_content": "        PrettyStackTraceDecl StackEntry(\"type-checking\", AFD);",
          "new_line_content": "        TC.typeCheckAbstractFunctionBody(AFD);",
          "content_same": false
        },
        {
          "line": 865,
          "old_api": null,
          "new_api": "dyn_cast<IfStmt>(S)",
          "old_text": null,
          "new_text": "dyn_cast<IfStmt>(S)",
          "old_line_content": "  virtual std::pair<bool, Stmt *> walkToStmtPre(Stmt *S) override {",
          "new_line_content": "    auto IS = dyn_cast<IfStmt>(S);",
          "content_same": false
        },
        {
          "line": 867,
          "old_api": null,
          "new_api": "std::make_pair(true, S)",
          "old_text": null,
          "new_text": "std::make_pair(true, S)",
          "old_line_content": "    if (!IS)",
          "new_line_content": "      return std::make_pair(true, S);",
          "content_same": false
        },
        {
          "line": 356,
          "old_api": null,
          "new_api": "isa<NominalTypeDecl>(decl)",
          "old_text": null,
          "new_text": "isa<NominalTypeDecl>(decl)",
          "old_line_content": "      }",
          "new_line_content": "      if (isa<NominalTypeDecl>(decl)) {",
          "content_same": false
        },
        {
          "line": 869,
          "old_api": null,
          "new_api": "buildIfStmtRefinementContext",
          "old_text": null,
          "new_text": "buildIfStmtRefinementContext(IS)",
          "old_line_content": "",
          "new_line_content": "    bool BuiltTRC = buildIfStmtRefinementContext(IS);",
          "content_same": false
        },
        {
          "line": 360,
          "old_api": null,
          "new_api": "llvm_unreachable",
          "old_text": null,
          "new_text": "llvm_unreachable(\"Unhandled external definition kind\")",
          "old_line_content": "      }",
          "new_line_content": "      llvm_unreachable(\"Unhandled external definition kind\");",
          "content_same": false
        },
        {
          "line": 367,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "TC.ValidatedTypes.empty()",
          "old_line_content": "    // FIXME: If we're not planning to run SILGen, this is wasted effort.",
          "new_line_content": "    while (!TC.ValidatedTypes.empty()) {",
          "content_same": false
        },
        {
          "line": 880,
          "old_api": null,
          "new_api": "getCond",
          "old_text": null,
          "new_text": "IS->getCond().dyn_cast<Expr *>()",
          "old_line_content": "    // We don't refine for if let.",
          "new_line_content": "    auto CondExpr = IS->getCond().dyn_cast<Expr *>();",
          "content_same": false
        },
        {
          "line": 372,
          "old_api": null,
          "new_api": "getMembers",
          "old_text": null,
          "new_text": "nominal->getMembers()",
          "old_line_content": "",
          "new_line_content": "      for (auto *D : nominal->getMembers()) {",
          "content_same": false
        },
        {
          "line": 886,
          "old_api": null,
          "new_api": "getSemanticsProvidingExpr",
          "old_text": null,
          "new_text": "CondExpr->getSemanticsProvidingExpr()",
          "old_line_content": "    auto QueryExpr =",
          "new_line_content": "        dyn_cast<AvailabilityQueryExpr>(CondExpr->getSemanticsProvidingExpr());",
          "content_same": false
        },
        {
          "line": 376,
          "old_api": null,
          "new_api": "validateDecl",
          "old_text": null,
          "new_text": "TC.validateDecl(VD)",
          "old_line_content": "          continue;",
          "new_line_content": "        TC.validateDecl(VD);",
          "content_same": false
        },
        {
          "line": 893,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "QueryExpr->getQueries().size()",
          "old_line_content": "    // have been emitted by the parser.",
          "new_line_content": "    if (QueryExpr->getQueries().size() == 0)",
          "content_same": false
        },
        {
          "line": 382,
          "old_api": null,
          "new_api": "hasValue",
          "old_text": null,
          "new_text": "lazyVarsAlreadyHaveImplementation.hasValue()",
          "old_line_content": "#ifdef NDEBUG",
          "new_line_content": "        if (lazyVarsAlreadyHaveImplementation.hasValue() &&",
          "content_same": false
        },
        {
          "line": 896,
          "old_api": null,
          "new_api": "validateAvailabilityQuery",
          "old_text": null,
          "new_text": "validateAvailabilityQuery(QueryExpr)",
          "old_line_content": "    ",
          "new_line_content": "    validateAvailabilityQuery(QueryExpr);",
          "content_same": false
        },
        {
          "line": 386,
          "old_api": null,
          "new_api": "dyn_cast<VarDecl>(D)",
          "old_text": null,
          "new_text": "dyn_cast<VarDecl>(D)",
          "old_line_content": "#endif",
          "new_line_content": "        auto *prop = dyn_cast<VarDecl>(D);",
          "content_same": false
        },
        {
          "line": 390,
          "old_api": null,
          "new_api": "isStatic",
          "old_text": null,
          "new_text": "prop->isStatic()",
          "old_line_content": "",
          "new_line_content": "        if (prop->getAttrs().hasAttribute<LazyAttr>() && !prop->isStatic()) {",
          "content_same": false
        },
        {
          "line": 904,
          "old_api": null,
          "new_api": "refinedThenContextForQuery",
          "old_text": null,
          "new_text": "refinedThenContextForQuery(QueryExpr, IS)",
          "old_line_content": "    // context.",
          "new_line_content": "    auto *ThenTRC = refinedThenContextForQuery(QueryExpr, IS);",
          "content_same": false
        },
        {
          "line": 393,
          "old_api": null,
          "new_api": "hasValue",
          "old_text": null,
          "new_text": "lazyVarsAlreadyHaveImplementation.hasValue()",
          "old_line_content": "",
          "new_line_content": "          if (lazyVarsAlreadyHaveImplementation.hasValue()) {",
          "content_same": false
        },
        {
          "line": 907,
          "old_api": null,
          "new_api": "getElseStmt",
          "old_text": null,
          "new_text": "IS->getElseStmt()",
          "old_line_content": "",
          "new_line_content": "    if (IS->getElseStmt()) {",
          "content_same": false
        },
        {
          "line": 912,
          "old_api": null,
          "new_api": "getElseStmt",
          "old_text": null,
          "new_text": "IS->getElseStmt()",
          "old_line_content": "      // support \"<\") we should create a TRC for the Else branch.",
          "new_line_content": "      build(IS->getElseStmt());",
          "content_same": false
        },
        {
          "line": 402,
          "old_api": null,
          "new_api": "completeLazyVarImplementation",
          "old_text": null,
          "new_text": "TC.completeLazyVarImplementation(prop)",
          "old_line_content": "          if (!hasImplementation)",
          "new_line_content": "            TC.completeLazyVarImplementation(prop);",
          "content_same": false
        },
        {
          "line": 406,
          "old_api": null,
          "new_api": "dyn_cast<ClassDecl>(nominal)",
          "old_text": null,
          "new_text": "dyn_cast<ClassDecl>(nominal)",
          "old_line_content": "",
          "new_line_content": "      if (auto *CD = dyn_cast<ClassDecl>(nominal)) {",
          "content_same": false
        },
        {
          "line": 408,
          "old_api": null,
          "new_api": "addImplicitConstructors",
          "old_text": null,
          "new_text": "TC.addImplicitConstructors(CD, ignoredCtors)",
          "old_line_content": "        SmallVector<Decl *, 4> ignoredCtors;",
          "new_line_content": "        TC.addImplicitConstructors(CD, ignoredCtors);",
          "content_same": false
        },
        {
          "line": 923,
          "old_api": null,
          "new_api": "getQueries",
          "old_text": null,
          "new_text": "E->getQueries()",
          "old_line_content": "    llvm::SmallSet<PlatformKind, 2> Platforms;",
          "new_line_content": "    for (auto *Spec : E->getQueries()) {",
          "content_same": false
        },
        {
          "line": 413,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "TC.definedFunctions.end()",
          "old_line_content": "",
          "new_line_content": "    TC.definedFunctions.insert(TC.definedFunctions.end(),",
          "content_same": false
        },
        {
          "line": 926,
          "old_api": null,
          "new_api": "getPlatform",
          "old_text": null,
          "new_text": "Spec->getPlatform()",
          "old_line_content": "      if (!Inserted) {",
          "new_line_content": "        PlatformKind Platform = Spec->getPlatform();",
          "content_same": false
        },
        {
          "line": 929,
          "old_api": null,
          "new_api": "platformString",
          "old_text": null,
          "new_text": "platformString(Platform)",
          "old_line_content": "                          diag::availability_query_repeated_platform,",
          "new_line_content": "                          platformString(Platform));",
          "content_same": false
        },
        {
          "line": 418,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "TC.definedFunctions.size()",
          "old_line_content": "",
          "new_line_content": "  } while (currentFunctionIdx < TC.definedFunctions.size() ||",
          "content_same": false
        },
        {
          "line": 938,
          "old_api": null,
          "new_api": "getCurrentTRC",
          "old_text": null,
          "new_text": "getCurrentTRC()",
          "old_line_content": "                                                    IfStmt *IS) {",
          "new_line_content": "    TypeRefinementContext *CurTRC = getCurrentTRC();",
          "content_same": false
        },
        {
          "line": 428,
          "old_api": null,
          "new_api": "getLocalCaptures",
          "old_text": null,
          "new_text": "localFunctionCapture.LocalFunction->getLocalCaptures(localCaptures)",
          "old_line_content": "    SmallVector<CaptureInfo::LocalCaptureTy, 2> localCaptures;",
          "new_line_content": "    localFunctionCapture.LocalFunction->getLocalCaptures(localCaptures);",
          "content_same": false
        },
        {
          "line": 940,
          "old_api": null,
          "new_api": "bestActiveSpecForQuery",
          "old_text": null,
          "new_text": "bestActiveSpecForQuery(E)",
          "old_line_content": "    ",
          "new_line_content": "    VersionConstraintAvailabilitySpec *Spec = bestActiveSpecForQuery(E);",
          "content_same": false
        },
        {
          "line": 945,
          "old_api": null,
          "new_api": "getLoc",
          "old_text": null,
          "new_text": "E->getLoc()",
          "old_line_content": "      // TRC.",
          "new_line_content": "      AC.Diags.diagnose(E->getLoc(),",
          "content_same": false
        },
        {
          "line": 434,
          "old_api": null,
          "new_api": "getPointer",
          "old_text": null,
          "new_text": "capture.getPointer()",
          "old_line_content": "      // let the diagnostic cascade.",
          "new_line_content": "      if (isa<VarDecl>(capture.getPointer())) {",
          "content_same": false
        },
        {
          "line": 947,
          "old_api": null,
          "new_api": "targetPlatform",
          "old_text": null,
          "new_text": "targetPlatform(AC.LangOpts)",
          "old_line_content": "                        diag::availability_query_required_for_platform,",
          "new_line_content": "                        platformString(targetPlatform(AC.LangOpts)));",
          "content_same": false
        },
        {
          "line": 952,
          "old_api": null,
          "new_api": "rangeForSpec",
          "old_text": null,
          "new_text": "rangeForSpec(Spec)",
          "old_line_content": "    ",
          "new_line_content": "    VersionRange range = rangeForSpec(Spec);",
          "content_same": false
        },
        {
          "line": 444,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(SF.ASTStage == SourceFile::TypeChecked)",
          "old_line_content": "void swift::typeCheckExternalDefinitions(SourceFile &SF) {",
          "new_line_content": "  assert(SF.ASTStage == SourceFile::TypeChecked);",
          "content_same": false
        },
        {
          "line": 958,
          "old_api": null,
          "new_api": "isContainedIn",
          "old_text": null,
          "new_text": "CurTRC->getPotentialVersions().isContainedIn(range)",
          "old_line_content": "    // spec is useless. If so, report this.",
          "new_line_content": "    if (CurTRC->getPotentialVersions().isContainedIn(range)) {",
          "content_same": false
        },
        {
          "line": 447,
          "old_api": null,
          "new_api": "typeCheckFunctionsAndExternalDecls",
          "old_text": null,
          "new_text": "typeCheckFunctionsAndExternalDecls(TC)",
          "old_line_content": "  TypeChecker TC(Ctx);",
          "new_line_content": "  typeCheckFunctionsAndExternalDecls(TC);",
          "content_same": false
        },
        {
          "line": 960,
          "old_api": null,
          "new_api": "getReason",
          "old_text": null,
          "new_text": "CurTRC->getReason()",
          "old_line_content": "      DiagnosticEngine &Diags = AC.Diags;",
          "new_line_content": "      if (CurTRC->getReason() == TypeRefinementContext::Reason::Root) {",
          "content_same": false
        },
        {
          "line": 963,
          "old_api": null,
          "new_api": "targetPlatform",
          "old_text": null,
          "new_text": "targetPlatform(AC.LangOpts)",
          "old_line_content": "                       diag::availability_query_useless_min_deployment,",
          "new_line_content": "                       platformString(targetPlatform(AC.LangOpts)));",
          "content_same": false
        },
        {
          "line": 965,
          "old_api": null,
          "new_api": "getLoc",
          "old_text": null,
          "new_text": "E->getLoc()",
          "old_line_content": "      } else {",
          "new_line_content": "        Diags.diagnose(E->getLoc(),",
          "content_same": false
        },
        {
          "line": 967,
          "old_api": null,
          "new_api": "targetPlatform",
          "old_text": null,
          "new_text": "targetPlatform(AC.LangOpts)",
          "old_line_content": "                       diag::availability_query_useless_enclosing_scope,",
          "new_line_content": "                       platformString(targetPlatform(AC.LangOpts)));",
          "content_same": false
        },
        {
          "line": 458,
          "old_api": null,
          "new_api": "performNameBinding",
          "old_text": null,
          "new_text": "performNameBinding(SF, StartElem)",
          "old_line_content": "  // checking.",
          "new_line_content": "  performNameBinding(SF, StartElem);",
          "content_same": false
        },
        {
          "line": 460,
          "old_api": null,
          "new_api": "getASTContext",
          "old_text": null,
          "new_text": "SF.getASTContext()",
          "old_line_content": "",
          "new_line_content": "  auto &Ctx = SF.getASTContext();",
          "content_same": false
        },
        {
          "line": 974,
          "old_api": null,
          "new_api": "getCurrentTRC",
          "old_text": null,
          "new_text": "getCurrentTRC()",
          "old_line_content": "    ",
          "new_line_content": "    return TypeRefinementContext::createForIfStmtThen(AC, IS, getCurrentTRC(),",
          "content_same": false
        },
        {
          "line": 466,
          "old_api": null,
          "new_api": "getStdlibModule",
          "old_text": null,
          "new_text": "TC.getStdlibModule(&SF)",
          "old_line_content": "  // in the AST.",
          "new_line_content": "  (void) TC.getStdlibModule(&SF);",
          "content_same": false
        },
        {
          "line": 982,
          "old_api": null,
          "new_api": "getQueries",
          "old_text": null,
          "new_text": "E->getQueries()",
          "old_line_content": "  bestActiveSpecForQuery(AvailabilityQueryExpr *E) {",
          "new_line_content": "    for (auto *Spec : E->getQueries()) {",
          "content_same": false
        },
        {
          "line": 987,
          "old_api": null,
          "new_api": "getPlatform",
          "old_text": null,
          "new_text": "Spec->getPlatform()",
          "old_line_content": "      // OSXApplicationExtension spec.",
          "new_line_content": "      if (isPlatformActive(Spec->getPlatform(), AC.LangOpts)) {",
          "content_same": false
        },
        {
          "line": 476,
          "old_api": null,
          "new_api": "getIdentifier",
          "old_text": null,
          "new_text": "Ctx.getIdentifier(\"Foundation\")",
          "old_line_content": "  bool ImportsFoundationModule = false;",
          "new_line_content": "  auto FoundationModuleName = Ctx.getIdentifier(\"Foundation\");",
          "content_same": false
        },
        {
          "line": 482,
          "old_api": null,
          "new_api": "getFiles",
          "old_text": null,
          "new_text": "import.second->getFiles()",
          "old_line_content": "    // FIXME: Respect the access path?",
          "new_line_content": "    for (auto file : import.second->getFiles()) {",
          "content_same": false
        },
        {
          "line": 997,
          "old_api": null,
          "new_api": "getComparison",
          "old_text": null,
          "new_text": "Spec->getComparison()",
          "old_line_content": "  VersionRange rangeForSpec(VersionConstraintAvailabilitySpec *Spec) {",
          "new_line_content": "    switch (Spec->getComparison()) {",
          "content_same": false
        },
        {
          "line": 999,
          "old_api": null,
          "new_api": "getVersion",
          "old_text": null,
          "new_text": "Spec->getVersion()",
          "old_line_content": "    case VersionComparison::GreaterThanEqual:",
          "new_line_content": "      return VersionRange::allGTE(Spec->getVersion());",
          "content_same": false
        },
        {
          "line": 488,
          "old_api": null,
          "new_api": "dyn_cast<ExtensionDecl>(D)",
          "old_text": null,
          "new_text": "dyn_cast<ExtensionDecl>(D)",
          "old_line_content": "      for (auto D : SF->Decls) {",
          "new_line_content": "        if (auto ED = dyn_cast<ExtensionDecl>(D))",
          "content_same": false
        },
        {
          "line": 1004,
          "old_api": null,
          "new_api": "dyn_cast<AvailabilityQueryExpr>(E)",
          "old_text": null,
          "new_text": "dyn_cast<AvailabilityQueryExpr>(E)",
          "old_line_content": "  virtual std::pair<bool, Expr *> walkToExprPre(Expr *E) override {",
          "new_line_content": "    auto QueryExpr = dyn_cast<AvailabilityQueryExpr>(E);",
          "content_same": false
        },
        {
          "line": 1006,
          "old_api": null,
          "new_api": "std::make_pair(true, E)",
          "old_text": null,
          "new_text": "std::make_pair(true, E)",
          "old_line_content": "    if (!QueryExpr)",
          "new_line_content": "      return std::make_pair(true, E);",
          "content_same": false
        },
        {
          "line": 498,
          "old_api": null,
          "new_api": "TypeChecker::buildTypeRefinementContextHierarchy(SF, StartElem)",
          "old_text": null,
          "new_text": "TypeChecker::buildTypeRefinementContextHierarchy(SF, StartElem)",
          "old_line_content": "    // Build the type refinement hierarchy for the file before type checking.",
          "new_line_content": "    TypeChecker::buildTypeRefinementContextHierarchy(SF, StartElem);",
          "content_same": false
        },
        {
          "line": 1013,
          "old_api": null,
          "new_api": "getLoc",
          "old_text": null,
          "new_text": "E->getLoc()",
          "old_line_content": "    // determine its effect.",
          "new_line_content": "    AC.Diags.diagnose(E->getLoc(),",
          "content_same": false
        },
        {
          "line": 502,
          "old_api": null,
          "new_api": "slice",
          "old_text": null,
          "new_text": "llvm::makeArrayRef(SF.Decls).slice(StartElem)",
          "old_line_content": "  // Type check the top-level elements of the source file.",
          "new_line_content": "  for (auto D : llvm::makeArrayRef(SF.Decls).slice(StartElem)) {",
          "content_same": false
        },
        {
          "line": 1016,
          "old_api": null,
          "new_api": "std::make_pair(false, E)",
          "old_text": null,
          "new_text": "std::make_pair(false, E)",
          "old_line_content": "    ",
          "new_line_content": "    return std::make_pair(false, E);",
          "content_same": false
        },
        {
          "line": 506,
          "old_api": null,
          "new_api": "typeCheckDecl",
          "old_text": null,
          "new_text": "TC.typeCheckDecl(D, /*isFirstPass*/true)",
          "old_line_content": "",
          "new_line_content": "    TC.typeCheckDecl(D, /*isFirstPass*/true);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1026,
          "old_api": "getASTContext",
          "new_api": null,
          "old_text": "SF.getASTContext()",
          "new_text": null,
          "old_line_content": "  ASTContext &AC = SF.getASTContext();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1028,
          "old_api": "getTypeRefinementContext",
          "new_api": null,
          "old_text": "SF.getTypeRefinementContext()",
          "new_text": null,
          "old_line_content": "  TypeRefinementContext *RootTRC = SF.getTypeRefinementContext();",
          "new_line_content": "  // Build refinement contexts, if necessary, for all declarations starting",
          "content_same": false
        },
        {
          "line": 518,
          "old_api": "dyn_cast<TopLevelCodeDecl>(D)",
          "new_api": null,
          "old_text": "dyn_cast<TopLevelCodeDecl>(D)",
          "new_text": null,
          "old_line_content": "    if (TopLevelCodeDecl *TLCD = dyn_cast<TopLevelCodeDecl>(D)) {",
          "new_line_content": "      hasTopLevelCode = true;",
          "content_same": false
        },
        {
          "line": 521,
          "old_api": "typeCheckTopLevelCodeDecl",
          "new_api": null,
          "old_text": "TC.typeCheckTopLevelCodeDecl(TLCD)",
          "new_text": null,
          "old_line_content": "      TC.typeCheckTopLevelCodeDecl(TLCD);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1033,
          "old_api": "build",
          "new_api": null,
          "old_text": "Builder.build(D)",
          "new_text": null,
          "old_line_content": "    Builder.build(D);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 523,
          "old_api": "typeCheckDecl",
          "new_api": null,
          "old_text": "TC.typeCheckDecl(D, /*isFirstPass*/false)",
          "new_text": null,
          "old_line_content": "      TC.typeCheckDecl(D, /*isFirstPass*/false);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 529,
          "old_api": "slice",
          "new_api": null,
          "old_text": "llvm::makeArrayRef(SF.Decls).slice(StartElem)",
          "new_text": null,
          "old_line_content": "                           llvm::makeArrayRef(SF.Decls).slice(StartElem));",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1045,
          "old_api": "getContextKind",
          "new_api": null,
          "old_text": "Ancestor->getContextKind()",
          "new_text": null,
          "old_line_content": "    switch (Ancestor->getContextKind()) {",
          "new_line_content": "    case DeclContextKind::AbstractClosureExpr:",
          "content_same": false
        },
        {
          "line": 535,
          "old_api": "clear",
          "new_api": null,
          "old_text": "TC.implicitlyDefinedFunctions.clear()",
          "new_text": null,
          "old_line_content": "  TC.implicitlyDefinedFunctions.clear();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1047,
          "old_api": "getLoc",
          "new_api": null,
          "old_text": "cast<AbstractClosureExpr>(Ancestor)->getLoc()",
          "new_text": null,
          "old_line_content": "      Loc = cast<AbstractClosureExpr>(Ancestor)->getLoc();",
          "new_line_content": "      break;",
          "content_same": false
        },
        {
          "line": 1051,
          "old_api": "getLoc",
          "new_api": null,
          "old_text": "cast<TopLevelCodeDecl>(Ancestor)->getLoc()",
          "new_text": null,
          "old_line_content": "      Loc = cast<TopLevelCodeDecl>(Ancestor)->getLoc();",
          "new_line_content": "      break;",
          "content_same": false
        },
        {
          "line": 540,
          "old_api": "processREPLTopLevel",
          "new_api": null,
          "old_text": "TC.processREPLTopLevel(SF, TLC, StartElem)",
          "new_text": null,
          "old_line_content": "    TC.processREPLTopLevel(SF, TLC, StartElem);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 542,
          "old_api": "typeCheckFunctionsAndExternalDecls",
          "new_api": null,
          "old_text": "typeCheckFunctionsAndExternalDecls(TC)",
          "new_text": null,
          "old_line_content": "  typeCheckFunctionsAndExternalDecls(TC);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1055,
          "old_api": "getLoc",
          "new_api": null,
          "old_text": "cast<AbstractFunctionDecl>(Ancestor)->getLoc()",
          "new_text": null,
          "old_line_content": "      Loc = cast<AbstractFunctionDecl>(Ancestor)->getLoc();",
          "new_line_content": "      break;",
          "content_same": false
        },
        {
          "line": 1059,
          "old_api": "getLoc",
          "new_api": null,
          "old_text": "cast<NominalTypeDecl>(Ancestor)->getLoc()",
          "new_text": null,
          "old_line_content": "      Loc = cast<NominalTypeDecl>(Ancestor)->getLoc();",
          "new_line_content": "      break;",
          "content_same": false
        },
        {
          "line": 549,
          "old_api": "diagnoseUnintendedObjCMethodOverrides",
          "new_api": null,
          "old_text": "Ctx.diagnoseUnintendedObjCMethodOverrides(SF)",
          "new_text": null,
          "old_line_content": "    Ctx.diagnoseUnintendedObjCMethodOverrides(SF);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1063,
          "old_api": "getLoc",
          "new_api": null,
          "old_text": "cast<ExtensionDecl>(Ancestor)->getLoc()",
          "new_text": null,
          "old_line_content": "      Loc = cast<ExtensionDecl>(Ancestor)->getLoc();",
          "new_line_content": "      break;",
          "content_same": false
        },
        {
          "line": 1072,
          "old_api": "isValid",
          "new_api": null,
          "old_text": "Loc.isValid()",
          "new_text": null,
          "old_line_content": "    if (Loc.isValid()) {",
          "new_line_content": "      return Loc;",
          "content_same": false
        },
        {
          "line": 562,
          "old_api": "diagnose",
          "new_api": null,
          "old_text": "Ctx.Diags.diagnose(L, diag::objc_decl_used_without_required_module,\n                       \"objc\", FoundationModuleName)\n    .highlight(SourceRange(L))",
          "new_text": null,
          "old_line_content": "    Ctx.Diags.diagnose(L, diag::objc_decl_used_without_required_module,",
          "new_line_content": "                       \"objc\", FoundationModuleName)",
          "content_same": false
        },
        {
          "line": 1075,
          "old_api": "getParent",
          "new_api": null,
          "old_text": "Ancestor->getParent()",
          "new_text": null,
          "old_line_content": "    Ancestor = Ancestor->getParent();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 564,
          "old_api": "SourceRange",
          "new_api": null,
          "old_text": "SourceRange(L)",
          "new_text": null,
          "old_line_content": "    .highlight(SourceRange(L));",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1078,
          "old_api": "SourceLoc",
          "new_api": null,
          "old_text": "SourceLoc()",
          "new_text": null,
          "old_line_content": "  return SourceLoc();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 568,
          "old_api": "verify",
          "new_api": null,
          "old_text": "verify(SF)",
          "new_text": null,
          "old_line_content": "  verify(SF);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1085,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(SF)",
          "new_text": null,
          "old_line_content": "  assert(SF);",
          "new_line_content": "  ",
          "content_same": false
        },
        {
          "line": 574,
          "old_api": "verifyAllLoadedModules",
          "new_api": null,
          "old_text": "Ctx.verifyAllLoadedModules()",
          "new_text": null,
          "old_line_content": "    Ctx.verifyAllLoadedModules();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1089,
          "old_api": "isValid",
          "new_api": null,
          "old_text": "referenceLoc.isValid()",
          "new_text": null,
          "old_line_content": "  if (referenceLoc.isValid()) {",
          "new_line_content": "    lookupLoc = referenceLoc;",
          "content_same": false
        },
        {
          "line": 582,
          "old_api": "diagnoseUnintendedObjCMethodOverrides",
          "new_api": null,
          "old_text": "Ctx.diagnoseUnintendedObjCMethodOverrides(SF)",
          "new_text": null,
          "old_line_content": "  Ctx.diagnoseUnintendedObjCMethodOverrides(SF);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1100,
          "old_api": "bestLocationInDeclContextHierarchy",
          "new_api": null,
          "old_text": "bestLocationInDeclContextHierarchy(referenceDC)",
          "new_text": null,
          "old_line_content": "    lookupLoc = bestLocationInDeclContextHierarchy(referenceDC);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1103,
          "old_api": "getTypeRefinementContext",
          "new_api": null,
          "old_text": "SF->getTypeRefinementContext()",
          "new_text": null,
          "old_line_content": "  TypeRefinementContext *rootTRC = SF->getTypeRefinementContext();",
          "new_line_content": "  TypeRefinementContext *TRC;",
          "content_same": false
        },
        {
          "line": 593,
          "old_api": "validateType",
          "new_api": null,
          "old_text": "TypeChecker(Ctx).validateType(T, DC, options)",
          "new_text": null,
          "old_line_content": "    return TypeChecker(Ctx).validateType(T, DC, options);",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 1107,
          "old_api": "findMostRefinedSubContext",
          "new_api": null,
          "old_text": "rootTRC->findMostRefinedSubContext(lookupLoc,\n                                             Context.SourceMgr)",
          "new_text": null,
          "old_line_content": "    TRC = rootTRC->findMostRefinedSubContext(lookupLoc,",
          "new_line_content": "                                             Context.SourceMgr);",
          "content_same": false
        },
        {
          "line": 597,
          "old_api": "validateType",
          "new_api": null,
          "old_text": "TypeChecker(Ctx, Diags).validateType(T, DC, options)",
          "new_text": null,
          "old_line_content": "    return TypeChecker(Ctx, Diags).validateType(T, DC, options);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1116,
          "old_api": "getPotentialVersions",
          "new_api": null,
          "old_text": "TRC->getPotentialVersions()",
          "new_text": null,
          "old_line_content": "  VersionRange runningOSOverApprox = TRC->getPotentialVersions();",
          "new_line_content": "  ",
          "content_same": false
        },
        {
          "line": 609,
          "old_api": "handleSILGenericParams",
          "new_api": null,
          "old_text": "TypeChecker(Ctx).handleSILGenericParams(builders, gps, DC)",
          "new_text": null,
          "old_line_content": "  return TypeChecker(Ctx).handleSILGenericParams(builders, gps, DC);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1123,
          "old_api": "isContainedIn",
          "new_api": null,
          "old_text": "runningOSOverApprox.isContainedIn(safeRangeUnderApprox)",
          "new_text": null,
          "old_line_content": "  if (!(runningOSOverApprox.isContainedIn(safeRangeUnderApprox))) {",
          "new_line_content": "    OutAvailableRange = safeRangeUnderApprox;",
          "content_same": false
        },
        {
          "line": 613,
          "old_api": "getASTContext",
          "new_api": null,
          "old_text": "D->getASTContext()",
          "new_text": null,
          "old_line_content": "  auto &Ctx = D->getASTContext();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 619,
          "old_api": "typeCheckDecl",
          "new_api": null,
          "old_text": "TC.typeCheckDecl(D, true)",
          "new_text": null,
          "old_line_content": "  TC.typeCheckDecl(D, true);",
          "new_line_content": "  return true;",
          "content_same": false
        },
        {
          "line": 1138,
          "old_api": "getParentSourceFile",
          "new_api": null,
          "old_text": "referenceDC->getParentSourceFile()",
          "new_text": null,
          "old_line_content": "  if (!referenceDC->getParentSourceFile()) {",
          "new_line_content": "    // We only check availability if this reference is in a source file; we do",
          "content_same": false
        },
        {
          "line": 629,
          "old_api": "Type",
          "new_api": null,
          "old_text": "Type()",
          "new_text": null,
          "old_line_content": "  TC.typeCheckExpression(parsedExpr, DC, Type(), Type(), /*discardedExpr=*/true,",
          "new_line_content": "                         FreeTypeVariableBinding::GenericParameters);",
          "content_same": false
        },
        {
          "line": 1145,
          "old_api": "isDeclAvailable",
          "new_api": null,
          "old_text": "isDeclAvailable(D, referenceLoc, referenceDC, safeRangeUnderApprox)",
          "new_text": null,
          "old_line_content": "  if (isDeclAvailable(D, referenceLoc, referenceDC, safeRangeUnderApprox)) {",
          "new_line_content": "    return None;",
          "content_same": false
        },
        {
          "line": 634,
          "old_api": "getType",
          "new_api": null,
          "old_text": "parsedExpr->getType()->is<ErrorType>()",
          "new_text": null,
          "old_line_content": "                    && !parsedExpr->getType()->is<ErrorType>();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1150,
          "old_api": "UnavailabilityReason::requiresVersionRange(safeRangeUnderApprox)",
          "new_api": null,
          "old_text": "UnavailabilityReason::requiresVersionRange(safeRangeUnderApprox)",
          "new_text": null,
          "old_line_content": "  return UnavailabilityReason::requiresVersionRange(safeRangeUnderApprox);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 639,
          "old_api": "getASTContext",
          "new_api": null,
          "old_text": "AFD->getASTContext()",
          "new_text": null,
          "old_line_content": "  auto &Ctx = AFD->getASTContext();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1155,
          "old_api": "getFullName",
          "new_api": null,
          "old_text": "D->getFullName()",
          "new_text": null,
          "old_line_content": "  diagnosePotentialUnavailability(D, D->getFullName(), referenceLoc, Reason);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 645,
          "old_api": "typeCheckAbstractFunctionBodyUntil",
          "new_api": null,
          "old_text": "TC.typeCheckAbstractFunctionBodyUntil(AFD, EndTypeCheckLoc)",
          "new_text": null,
          "old_line_content": "  return !TC.typeCheckAbstractFunctionBodyUntil(AFD, EndTypeCheckLoc);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 649,
          "old_api": "getASTContext",
          "new_api": null,
          "old_text": "static_cast<Decl *>(TLCD)->getASTContext()",
          "new_text": null,
          "old_line_content": "  auto &Ctx = static_cast<Decl *>(TLCD)->getASTContext();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1164,
          "old_api": "getReasonKind",
          "new_api": null,
          "old_text": "Reason.getReasonKind()",
          "new_text": null,
          "old_line_content": "  if (Reason.getReasonKind() !=",
          "new_line_content": "      UnavailabilityReason::Kind::RequiresOSVersionRange) {",
          "content_same": false
        },
        {
          "line": 655,
          "old_api": "typeCheckTopLevelCodeDecl",
          "new_api": null,
          "old_text": "TC.typeCheckTopLevelCodeDecl(TLCD)",
          "new_text": null,
          "old_line_content": "  TC.typeCheckTopLevelCodeDecl(TLCD);",
          "new_line_content": "  return true;",
          "content_same": false
        },
        {
          "line": 1171,
          "old_api": "getRequiredOSVersionRange",
          "new_api": null,
          "old_text": "Reason.getRequiredOSVersionRange().getLowerEndpoint()",
          "new_text": null,
          "old_line_content": "           Reason.getRequiredOSVersionRange().getLowerEndpoint());",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 660,
          "old_api": "static_cast<TypeChecker*>(resolver)",
          "new_api": null,
          "old_text": "static_cast<TypeChecker*>(resolver)",
          "new_text": null,
          "old_line_content": "  DiagnosticEngine &diags = static_cast<TypeChecker*>(resolver)->Diags;",
          "new_line_content": "  delete resolver;",
          "content_same": false
        },
        {
          "line": 1177,
          "old_api": "hasEnabledForbiddenTypecheckPrefix",
          "new_api": null,
          "old_text": "hasEnabledForbiddenTypecheckPrefix()",
          "new_text": null,
          "old_line_content": "  if (!hasEnabledForbiddenTypecheckPrefix())",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 667,
          "old_api": "OwnedResolver",
          "new_api": null,
          "old_text": "OwnedResolver(new TypeChecker(Ctx, *diags),\n                       &deleteTypeCheckerAndDiags)",
          "new_text": null,
          "old_line_content": "  return OwnedResolver(new TypeChecker(Ctx, *diags),",
          "new_line_content": "                       &deleteTypeCheckerAndDiags);",
          "content_same": false
        },
        {
          "line": 1180,
          "old_api": "getNameStr",
          "new_api": null,
          "old_text": "VD->getNameStr()",
          "new_text": null,
          "old_line_content": "    checkForForbiddenPrefix(VD->getNameStr());",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1185,
          "old_api": "hasEnabledForbiddenTypecheckPrefix",
          "new_api": null,
          "old_text": "hasEnabledForbiddenTypecheckPrefix()",
          "new_text": null,
          "old_line_content": "  if (!hasEnabledForbiddenTypecheckPrefix())",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 1187,
          "old_api": "getName",
          "new_api": null,
          "old_text": "E->getName()",
          "new_text": null,
          "old_line_content": "  checkForForbiddenPrefix(E->getName());",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 676,
          "old_api": "highlight",
          "new_api": null,
          "old_text": "diagnose(nameLoc, diag::ambiguous_member_type, name, baseTy)\n    .highlight(baseRange)",
          "new_text": null,
          "old_line_content": "  diagnose(nameLoc, diag::ambiguous_member_type, name, baseTy)",
          "new_line_content": "    .highlight(baseRange);",
          "content_same": false
        },
        {
          "line": 679,
          "old_api": "diagnose",
          "new_api": null,
          "old_text": "diagnose(member.first, diag::found_candidate_type,\n             member.second)",
          "new_text": null,
          "old_line_content": "    diagnose(member.first, diag::found_candidate_type,",
          "new_line_content": "             member.second);",
          "content_same": false
        },
        {
          "line": 1191,
          "old_api": "hasEnabledForbiddenTypecheckPrefix",
          "new_api": null,
          "old_text": "hasEnabledForbiddenTypecheckPrefix()",
          "new_text": null,
          "old_line_content": "  if (!hasEnabledForbiddenTypecheckPrefix())",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 1193,
          "old_api": "str",
          "new_api": null,
          "old_text": "Ident.str()",
          "new_text": null,
          "old_line_content": "  checkForForbiddenPrefix(Ident.empty() ? StringRef() : Ident.str());",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 685,
          "old_api": "VersionRange::all()",
          "new_api": null,
          "old_text": "VersionRange::all()",
          "new_text": null,
          "old_line_content": "  VersionRange Avail = VersionRange::all();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1197,
          "old_api": "hasEnabledForbiddenTypecheckPrefix",
          "new_api": null,
          "old_text": "hasEnabledForbiddenTypecheckPrefix()",
          "new_text": null,
          "old_line_content": "  if (!hasEnabledForbiddenTypecheckPrefix())",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 175,
          "old_api": "getIdentifier",
          "new_api": null,
          "old_text": "Context.getIdentifier(\"Bool\")",
          "new_text": null,
          "old_line_content": "      UnqualifiedLookup boolLookup(Context.getIdentifier(\"Bool\"),",
          "new_line_content": "      SmallVector<ValueDecl *, 2> results;",
          "content_same": false
        },
        {
          "line": 1199,
          "old_api": "empty",
          "new_api": null,
          "old_text": "Name.empty()",
          "new_text": null,
          "old_line_content": "  if (Name.empty())",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 177,
          "old_api": "SourceLoc",
          "new_api": null,
          "old_text": "SourceLoc()",
          "new_text": null,
          "old_line_content": "                                   SourceLoc(),",
          "new_line_content": "                                       NLKind::QualifiedLookup, results);",
          "content_same": false
        },
        {
          "line": 690,
          "old_api": "isActivePlatform",
          "new_api": null,
          "old_text": "AvailAttr->isActivePlatform(Ctx)",
          "new_text": null,
          "old_line_content": "        !AvailAttr->isActivePlatform(Ctx)) {",
          "new_line_content": "      continue;",
          "content_same": false
        },
        {
          "line": 1201,
          "old_api": "startswith",
          "new_api": null,
          "old_text": "Name.startswith(Context.LangOpts.DebugForbidTypecheckPrefix)",
          "new_text": null,
          "old_line_content": "  if (Name.startswith(Context.LangOpts.DebugForbidTypecheckPrefix)) {",
          "new_line_content": "    std::string Msg = \"forbidden typecheck occurred: \";",
          "content_same": false
        },
        {
          "line": 1204,
          "old_api": "llvm::report_fatal_error(Msg)",
          "new_api": null,
          "old_text": "llvm::report_fatal_error(Msg)",
          "new_text": null,
          "old_line_content": "    llvm::report_fatal_error(Msg);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 181,
          "old_api": "Type",
          "new_api": null,
          "old_text": "Type()",
          "new_text": null,
          "old_line_content": "        return Type();",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 695,
          "old_api": "getValue",
          "new_api": null,
          "old_text": "AvailAttr->Introduced.getValue()",
          "new_text": null,
          "old_line_content": "        VersionRange::allGTE(AvailAttr->Introduced.getValue());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 187,
          "old_api": "Type",
          "new_api": null,
          "old_text": "Type()",
          "new_text": null,
          "old_line_content": "        return Type();",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 700,
          "old_api": "meetWith",
          "new_api": null,
          "old_text": "Avail.meetWith(AttrRange)",
          "new_text": null,
          "old_line_content": "    Avail.meetWith(AttrRange);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 190,
          "old_api": "getDeclaredType",
          "new_api": null,
          "old_text": "tyDecl->getDeclaredType()",
          "new_text": null,
          "old_line_content": "      return tyDecl->getDeclaredType();",
          "new_line_content": "    })();",
          "content_same": false
        },
        {
          "line": 197,
          "old_api": "getExtendedType",
          "new_api": null,
          "old_text": "ED->getExtendedType()",
          "new_text": null,
          "old_line_content": "  if (ED->getExtendedType())",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 200,
          "old_api": "getDeclContext",
          "new_api": null,
          "old_text": "ED->getDeclContext()",
          "new_text": null,
          "old_line_content": "  auto dc = ED->getDeclContext();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 204,
          "old_api": "getRefComponents",
          "new_api": null,
          "old_text": "ED->getRefComponents()",
          "new_text": null,
          "old_line_content": "  for (auto &ref : ED->getRefComponents()) {",
          "new_line_content": "    // A reference to \".Type\" is an attempt to extend the metatype.",
          "content_same": false
        },
        {
          "line": 209,
          "old_api": "ErrorType::get(TC.Context)",
          "new_api": null,
          "old_text": "ErrorType::get(TC.Context)",
          "new_text": null,
          "old_line_content": "      ED->setExtendedType(ErrorType::get(TC.Context));",
          "new_line_content": "      return;",
          "content_same": false
        },
        {
          "line": 722,
          "old_api": "size",
          "new_api": null,
          "old_text": "ContextStack.size()",
          "new_text": null,
          "old_line_content": "    return ContextStack[ContextStack.size() - 1];",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 213,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "components.push_back(\n      new (TC.Context) SimpleIdentTypeRepr(ref.NameLoc, ref.Name))",
          "new_text": null,
          "old_line_content": "    components.push_back(",
          "new_line_content": "      new (TC.Context) SimpleIdentTypeRepr(ref.NameLoc, ref.Name));",
          "content_same": false
        },
        {
          "line": 729,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "ContextStack.push_back(TRC)",
          "new_text": null,
          "old_line_content": "    ContextStack.push_back(TRC);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 221,
          "old_api": "ErrorType::get(TC.Context)",
          "new_api": null,
          "old_text": "ErrorType::get(TC.Context)",
          "new_text": null,
          "old_line_content": "    ED->setExtendedType(ErrorType::get(TC.Context));",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 734,
          "old_api": "walk",
          "new_api": null,
          "old_text": "E->walk(*this)",
          "new_text": null,
          "old_line_content": "  void build(Expr *E) { E->walk(*this); }",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 227,
          "old_api": "size",
          "new_api": null,
          "old_text": "components.size()",
          "new_text": null,
          "old_line_content": "  for (unsigned i = 0, n = components.size(); i != n; ++i) {",
          "new_line_content": "    // Find the type declaration to which the identifier type actually referred.",
          "content_same": false
        },
        {
          "line": 739,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "ContextStack.push_back(DeclTRC)",
          "new_text": null,
          "old_line_content": "    ContextStack.push_back(DeclTRC);",
          "new_line_content": "    return true;",
          "content_same": false
        },
        {
          "line": 745,
          "old_api": "pop_back",
          "new_api": null,
          "old_text": "ContextStack.pop_back()",
          "new_text": null,
          "old_line_content": "    ContextStack.pop_back();",
          "new_line_content": "    return true;",
          "content_same": false
        },
        {
          "line": 237,
          "old_api": "dyn_cast<NominalTypeDecl>(decl)",
          "new_api": null,
          "old_text": "dyn_cast<NominalTypeDecl>(decl)",
          "new_text": null,
          "old_line_content": "      typeDecl = dyn_cast<NominalTypeDecl>(decl);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 751,
          "old_api": "isAccessor",
          "new_api": null,
          "old_text": "FD->isAccessor()",
          "new_text": null,
          "old_line_content": "      if (FD->isAccessor()) {",
          "new_line_content": "        // Use TRC of the storage rather the current TRC when walking this",
          "content_same": false
        },
        {
          "line": 755,
          "old_api": "end",
          "new_api": null,
          "old_text": "StorageContexts.end()",
          "new_text": null,
          "old_line_content": "        if (it != StorageContexts.end()) {",
          "new_line_content": "          return it->second;",
          "content_same": false
        },
        {
          "line": 245,
          "old_api": "getRefComponents",
          "new_api": null,
          "old_text": "ED->getRefComponents()",
          "new_text": null,
          "old_line_content": "    auto &ref = ED->getRefComponents()[i];",
          "new_line_content": "    if (!typeDecl) {",
          "content_same": false
        },
        {
          "line": 250,
          "old_api": "diagnose",
          "new_api": null,
          "old_text": "TC.diagnose(ref.NameLoc, diag::extension_generic_params_for_non_generic,\n                    ref.Name)",
          "new_text": null,
          "old_line_content": "        TC.diagnose(ref.NameLoc, diag::extension_generic_params_for_non_generic,",
          "new_line_content": "                    ref.Name);",
          "content_same": false
        },
        {
          "line": 763,
          "old_api": "buildDeclarationRefinementContext",
          "new_api": null,
          "old_text": "buildDeclarationRefinementContext(D)",
          "new_text": null,
          "old_line_content": "      NewTRC = buildDeclarationRefinementContext(D);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 765,
          "old_api": "getCurrentTRC",
          "new_api": null,
          "old_text": "getCurrentTRC()",
          "new_text": null,
          "old_line_content": "      NewTRC = getCurrentTRC();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 261,
          "old_api": "getGenericParams",
          "new_api": null,
          "old_text": "typeDecl->getGenericParams()",
          "new_text": null,
          "old_line_content": "    if (typeDecl->getGenericParams() && !ref.GenericParams) {",
          "new_line_content": "      continue;",
          "content_same": false
        },
        {
          "line": 775,
          "old_api": "isValid",
          "new_api": null,
          "old_text": "D->getSourceRange().isValid()",
          "new_text": null,
          "old_line_content": "    assert(D->getSourceRange().isValid());",
          "new_line_content": "    ",
          "content_same": false
        },
        {
          "line": 268,
          "old_api": "diagnose",
          "new_api": null,
          "old_text": "TC.diagnose(ref.NameLoc,\n                  diag::extension_generic_params_for_non_generic_type,\n                  typeDecl->getDeclaredType())\n        .highlight(ref.GenericParams->getSourceRange())",
          "new_text": null,
          "old_line_content": "      TC.diagnose(ref.NameLoc,",
          "new_line_content": "                  diag::extension_generic_params_for_non_generic_type,",
          "content_same": false
        },
        {
          "line": 781,
          "old_api": "getPotentialVersions",
          "new_api": null,
          "old_text": "getCurrentTRC()->getPotentialVersions()",
          "new_text": null,
          "old_line_content": "    DeclVersionRange.meetWith(getCurrentTRC()->getPotentialVersions());",
          "new_line_content": "    ",
          "content_same": false
        },
        {
          "line": 784,
          "old_api": "getCurrentTRC",
          "new_api": null,
          "old_text": "getCurrentTRC()",
          "new_text": null,
          "old_line_content": "        TypeRefinementContext::createForDecl(AC, D, getCurrentTRC(),",
          "new_line_content": "                                             DeclVersionRange,",
          "content_same": false
        },
        {
          "line": 273,
          "old_api": "getDeclaredType",
          "new_api": null,
          "old_text": "typeDecl->getDeclaredType()",
          "new_text": null,
          "old_line_content": "                  typeDecl->getDeclaredType());",
          "new_line_content": "      ref.GenericParams = nullptr;",
          "content_same": false
        },
        {
          "line": 786,
          "old_api": "refinementSourceRangeForDecl",
          "new_api": null,
          "old_text": "refinementSourceRangeForDecl(D)",
          "new_text": null,
          "old_line_content": "                                             refinementSourceRangeForDecl(D));",
          "new_line_content": "    ",
          "content_same": false
        },
        {
          "line": 792,
          "old_api": "hasAccessorFunctions",
          "new_api": null,
          "old_text": "StorageDecl->hasAccessorFunctions()",
          "new_text": null,
          "old_line_content": "      if (StorageDecl->hasAccessorFunctions()) {",
          "new_line_content": "        StorageContexts[StorageDecl] = NewTRC;",
          "content_same": false
        },
        {
          "line": 287,
          "old_api": "diagnose",
          "new_api": null,
          "old_text": "TC.diagnose(ref.NameLoc,\n                  diag::extension_generic_wrong_number_of_parameters,\n                  typeDecl->getDeclaredType(), numHave > numExpected,\n                  numHave, numExpected)\n        .highlight(ref.GenericParams->getSourceRange())",
          "new_text": null,
          "old_line_content": "      TC.diagnose(ref.NameLoc,",
          "new_line_content": "                  diag::extension_generic_wrong_number_of_parameters,",
          "content_same": false
        },
        {
          "line": 289,
          "old_api": "getDeclaredType",
          "new_api": null,
          "old_text": "typeDecl->getDeclaredType()",
          "new_text": null,
          "old_line_content": "                  typeDecl->getDeclaredType(), numHave > numExpected,",
          "new_line_content": "                  numHave, numExpected)",
          "content_same": false
        },
        {
          "line": 802,
          "old_api": "dyn_cast<ValueDecl>(D)",
          "new_api": null,
          "old_text": "dyn_cast<ValueDecl>(D)",
          "new_text": null,
          "old_line_content": "    if (!dyn_cast<ValueDecl>(D)) {",
          "new_line_content": "      return false;",
          "content_same": false
        },
        {
          "line": 293,
          "old_api": "ErrorType::get(TC.Context)",
          "new_api": null,
          "old_text": "ErrorType::get(TC.Context)",
          "new_text": null,
          "old_line_content": "      ED->setExtendedType(ErrorType::get(TC.Context));",
          "new_line_content": "      return;",
          "content_same": false
        },
        {
          "line": 808,
          "old_api": "hasActiveAvailabilityAttribute",
          "new_api": null,
          "old_text": "hasActiveAvailabilityAttribute(D)",
          "new_text": null,
          "old_line_content": "    if (!hasActiveAvailabilityAttribute(D)) {",
          "new_line_content": "      return false;",
          "content_same": false
        },
        {
          "line": 298,
          "old_api": "setOuterParameters",
          "new_api": null,
          "old_text": "ref.GenericParams->setOuterParameters(outerGenericParams)",
          "new_text": null,
          "old_line_content": "    ref.GenericParams->setOuterParameters(outerGenericParams);",
          "new_line_content": "    outerGenericParams = ref.GenericParams;",
          "content_same": false
        },
        {
          "line": 817,
          "old_api": "getDeclContext",
          "new_api": null,
          "old_text": "storageDecl->getDeclContext()->isLocalContext()",
          "new_text": null,
          "old_line_content": "      if (storageDecl->getDeclContext()->isLocalContext()) {",
          "new_line_content": "        // No need to",
          "content_same": false
        },
        {
          "line": 307,
          "old_api": "ErrorType::get(TC.Context)",
          "new_api": null,
          "old_text": "ErrorType::get(TC.Context)",
          "new_text": null,
          "old_line_content": "    ED->setExtendedType(ErrorType::get(TC.Context));",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 824,
          "old_api": "getBodyKind",
          "new_api": null,
          "old_text": "funcDecl->getBodyKind()",
          "new_text": null,
          "old_line_content": "      return funcDecl->getBodyKind() != AbstractFunctionDecl::BodyKind::None;",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 313,
          "old_api": "addExtension",
          "new_api": null,
          "old_text": "nominal->addExtension(ED)",
          "new_text": null,
          "old_line_content": "    nominal->addExtension(ED);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 834,
          "old_api": "dyn_cast<AbstractStorageDecl>(D)",
          "new_api": null,
          "old_text": "dyn_cast<AbstractStorageDecl>(D)",
          "new_text": null,
          "old_line_content": "    if (auto *storageDecl = dyn_cast<AbstractStorageDecl>(D)) {",
          "new_line_content": "      // Use the declaration's availability for the context when checking",
          "content_same": false
        },
        {
          "line": 324,
          "old_api": "size",
          "new_api": null,
          "old_text": "TC.definedFunctions.size()",
          "new_text": null,
          "old_line_content": "    for (unsigned n = TC.definedFunctions.size(); currentFunctionIdx != n;",
          "new_line_content": "         ++currentFunctionIdx) {",
          "content_same": false
        },
        {
          "line": 839,
          "old_api": "getBracesRange",
          "new_api": null,
          "old_text": "storageDecl->getBracesRange()",
          "new_text": null,
          "old_line_content": "                           storageDecl->getBracesRange().End);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 331,
          "old_api": "isBodyTypeChecked",
          "new_api": null,
          "old_text": "AFD->isBodyTypeChecked()",
          "new_text": null,
          "old_line_content": "      if (AFD->isBodyTypeChecked()) continue;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 334,
          "old_api": "typeCheckAbstractFunctionBody",
          "new_api": null,
          "old_text": "TC.typeCheckAbstractFunctionBody(AFD)",
          "new_text": null,
          "old_line_content": "      TC.typeCheckAbstractFunctionBody(AFD);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 846,
          "old_api": "getParentPattern",
          "new_api": null,
          "old_text": "varDecl->getParentPattern()",
          "new_text": null,
          "old_line_content": "        PatternBindingDecl *patternBindingDecl = varDecl->getParentPattern();",
          "new_line_content": "        if (patternBindingDecl) {",
          "content_same": false
        },
        {
          "line": 336,
          "old_api": "setBodyTypeCheckedIfPresent",
          "new_api": null,
          "old_text": "AFD->setBodyTypeCheckedIfPresent()",
          "new_text": null,
          "old_line_content": "      AFD->setBodyTypeCheckedIfPresent();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 848,
          "old_api": "getSourceRange",
          "new_api": null,
          "old_text": "patternBindingDecl->getSourceRange()",
          "new_text": null,
          "old_line_content": "          return patternBindingDecl->getSourceRange();",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 853,
          "old_api": "getSourceRange",
          "new_api": null,
          "old_text": "D->getSourceRange()",
          "new_text": null,
          "old_line_content": "    return D->getSourceRange();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 344,
          "old_api": "computeCaptures",
          "new_api": null,
          "old_text": "TC.computeCaptures(FD)",
          "new_text": null,
          "old_line_content": "        TC.computeCaptures(FD);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 858,
          "old_api": "isActivePlatform",
          "new_api": null,
          "old_text": "AvAttr->isActivePlatform(AC)",
          "new_text": null,
          "old_line_content": "        if (!AvAttr->isInvalid() && AvAttr->isActivePlatform(AC)) {",
          "new_line_content": "          return true;",
          "content_same": false
        },
        {
          "line": 347,
          "old_api": "size",
          "new_api": null,
          "old_text": "TC.Context.ExternalDefinitions.size()",
          "new_text": null,
          "old_line_content": "    for (unsigned n = TC.Context.ExternalDefinitions.size();",
          "new_line_content": "         currentExternalDef != n;",
          "content_same": false
        },
        {
          "line": 352,
          "old_api": "dyn_cast<AbstractFunctionDecl>(decl)",
          "new_api": null,
          "old_text": "dyn_cast<AbstractFunctionDecl>(decl)",
          "new_text": null,
          "old_line_content": "      if (auto *AFD = dyn_cast<AbstractFunctionDecl>(decl)) {",
          "new_line_content": "        PrettyStackTraceDecl StackEntry(\"type-checking\", AFD);",
          "content_same": false
        },
        {
          "line": 354,
          "old_api": "typeCheckAbstractFunctionBody",
          "new_api": null,
          "old_text": "TC.typeCheckAbstractFunctionBody(AFD)",
          "new_text": null,
          "old_line_content": "        TC.typeCheckAbstractFunctionBody(AFD);",
          "new_line_content": "        continue;",
          "content_same": false
        },
        {
          "line": 866,
          "old_api": "dyn_cast<IfStmt>(S)",
          "new_api": null,
          "old_text": "dyn_cast<IfStmt>(S)",
          "new_text": null,
          "old_line_content": "    auto IS = dyn_cast<IfStmt>(S);",
          "new_line_content": "    if (!IS)",
          "content_same": false
        },
        {
          "line": 868,
          "old_api": "std::make_pair(true, S)",
          "new_api": null,
          "old_text": "std::make_pair(true, S)",
          "new_text": null,
          "old_line_content": "      return std::make_pair(true, S);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 358,
          "old_api": "handleExternalDecl",
          "new_api": null,
          "old_text": "TC.handleExternalDecl(decl)",
          "new_text": null,
          "old_line_content": "        TC.handleExternalDecl(decl);",
          "new_line_content": "        continue;",
          "content_same": false
        },
        {
          "line": 871,
          "old_api": "std::make_pair(!BuiltTRC, S)",
          "new_api": null,
          "old_text": "std::make_pair(!BuiltTRC, S)",
          "new_text": null,
          "old_line_content": "    return std::make_pair(!BuiltTRC, S);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 361,
          "old_api": "llvm_unreachable",
          "new_api": null,
          "old_text": "llvm_unreachable(\"Unhandled external definition kind\")",
          "new_text": null,
          "old_line_content": "      llvm_unreachable(\"Unhandled external definition kind\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 369,
          "old_api": "pop_back_val",
          "new_api": null,
          "old_text": "TC.ValidatedTypes.pop_back_val()",
          "new_text": null,
          "old_line_content": "      auto nominal = TC.ValidatedTypes.pop_back_val();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 881,
          "old_api": "getCond",
          "new_api": null,
          "old_text": "IS->getCond().dyn_cast<Expr *>()",
          "new_text": null,
          "old_line_content": "    auto CondExpr = IS->getCond().dyn_cast<Expr *>();",
          "new_line_content": "    if (!CondExpr)",
          "content_same": false
        },
        {
          "line": 374,
          "old_api": "dyn_cast<ValueDecl>(D)",
          "new_api": null,
          "old_text": "dyn_cast<ValueDecl>(D)",
          "new_text": null,
          "old_line_content": "        auto VD = dyn_cast<ValueDecl>(D);",
          "new_line_content": "        if (!VD)",
          "content_same": false
        },
        {
          "line": 887,
          "old_api": "getSemanticsProvidingExpr",
          "new_api": null,
          "old_text": "CondExpr->getSemanticsProvidingExpr()",
          "new_text": null,
          "old_line_content": "        dyn_cast<AvailabilityQueryExpr>(CondExpr->getSemanticsProvidingExpr());",
          "new_line_content": "    if (!QueryExpr)",
          "content_same": false
        },
        {
          "line": 377,
          "old_api": "validateDecl",
          "new_api": null,
          "old_text": "TC.validateDecl(VD)",
          "new_text": null,
          "old_line_content": "        TC.validateDecl(VD);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 894,
          "old_api": "size",
          "new_api": null,
          "old_text": "QueryExpr->getQueries().size()",
          "new_text": null,
          "old_line_content": "    if (QueryExpr->getQueries().size() == 0)",
          "new_line_content": "      return false;",
          "content_same": false
        },
        {
          "line": 384,
          "old_api": "getValue",
          "new_api": null,
          "old_text": "lazyVarsAlreadyHaveImplementation.getValue()",
          "new_text": null,
          "old_line_content": "            lazyVarsAlreadyHaveImplementation.getValue())",
          "new_line_content": "          continue;",
          "content_same": false
        },
        {
          "line": 897,
          "old_api": "validateAvailabilityQuery",
          "new_api": null,
          "old_text": "validateAvailabilityQuery(QueryExpr)",
          "new_text": null,
          "old_line_content": "    validateAvailabilityQuery(QueryExpr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 387,
          "old_api": "dyn_cast<VarDecl>(D)",
          "new_api": null,
          "old_text": "dyn_cast<VarDecl>(D)",
          "new_text": null,
          "old_line_content": "        auto *prop = dyn_cast<VarDecl>(D);",
          "new_line_content": "        if (!prop)",
          "content_same": false
        },
        {
          "line": 392,
          "old_api": "getGetter",
          "new_api": null,
          "old_text": "prop->getGetter()->hasBody()",
          "new_text": null,
          "old_line_content": "          bool hasImplementation = prop->getGetter()->hasBody();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 906,
          "old_api": "getThenStmt",
          "new_api": null,
          "old_text": "IS->getThenStmt()",
          "new_text": null,
          "old_line_content": "    TypeRefinementContextBuilder(ThenTRC, AC).build(IS->getThenStmt());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 395,
          "old_api": "getValue",
          "new_api": null,
          "old_text": "lazyVarsAlreadyHaveImplementation.getValue()",
          "new_text": null,
          "old_line_content": "            assert(lazyVarsAlreadyHaveImplementation.getValue() ==",
          "new_line_content": "                     hasImplementation &&",
          "content_same": false
        },
        {
          "line": 908,
          "old_api": "getElseStmt",
          "new_api": null,
          "old_text": "IS->getElseStmt()",
          "new_text": null,
          "old_line_content": "    if (IS->getElseStmt()) {",
          "new_line_content": "      // For now, we imprecisely do not refine the context for the Else branch",
          "content_same": false
        },
        {
          "line": 913,
          "old_api": "getElseStmt",
          "new_api": null,
          "old_text": "IS->getElseStmt()",
          "new_text": null,
          "old_line_content": "      build(IS->getElseStmt());",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 403,
          "old_api": "completeLazyVarImplementation",
          "new_api": null,
          "old_text": "TC.completeLazyVarImplementation(prop)",
          "new_text": null,
          "old_line_content": "            TC.completeLazyVarImplementation(prop);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 407,
          "old_api": "dyn_cast<ClassDecl>(nominal)",
          "new_api": null,
          "old_text": "dyn_cast<ClassDecl>(nominal)",
          "new_text": null,
          "old_line_content": "      if (auto *CD = dyn_cast<ClassDecl>(nominal)) {",
          "new_line_content": "        SmallVector<Decl *, 4> ignoredCtors;",
          "content_same": false
        },
        {
          "line": 410,
          "old_api": "addImplicitDestructor",
          "new_api": null,
          "old_text": "TC.addImplicitDestructor(CD)",
          "new_text": null,
          "old_line_content": "        TC.addImplicitDestructor(CD);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 925,
          "old_api": "getPlatform",
          "new_api": null,
          "old_text": "Spec->getPlatform()",
          "new_text": null,
          "old_line_content": "      bool Inserted = Platforms.insert(Spec->getPlatform()).second;",
          "new_line_content": "      if (!Inserted) {",
          "content_same": false
        },
        {
          "line": 928,
          "old_api": "getPlatformLoc",
          "new_api": null,
          "old_text": "Spec->getPlatformLoc()",
          "new_text": null,
          "old_line_content": "        AC.Diags.diagnose(Spec->getPlatformLoc(),",
          "new_line_content": "                          diag::availability_query_repeated_platform,",
          "content_same": false
        },
        {
          "line": 417,
          "old_api": "clear",
          "new_api": null,
          "old_text": "TC.implicitlyDefinedFunctions.clear()",
          "new_text": null,
          "old_line_content": "    TC.implicitlyDefinedFunctions.clear();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 930,
          "old_api": "platformString",
          "new_api": null,
          "old_text": "platformString(Platform)",
          "new_text": null,
          "old_line_content": "                          platformString(Platform));",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 420,
          "old_api": "size",
          "new_api": null,
          "old_text": "TC.Context.ExternalDefinitions.size()",
          "new_text": null,
          "old_line_content": "           currentExternalDef < TC.Context.ExternalDefinitions.size());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 939,
          "old_api": "getCurrentTRC",
          "new_api": null,
          "old_text": "getCurrentTRC()",
          "new_text": null,
          "old_line_content": "    TypeRefinementContext *CurTRC = getCurrentTRC();",
          "new_line_content": "    ",
          "content_same": false
        },
        {
          "line": 429,
          "old_api": "getLocalCaptures",
          "new_api": null,
          "old_text": "localFunctionCapture.LocalFunction->getLocalCaptures(localCaptures)",
          "new_text": null,
          "old_line_content": "    localFunctionCapture.LocalFunction->getLocalCaptures(localCaptures);",
          "new_line_content": "    for (const auto capture : localCaptures) {",
          "content_same": false
        },
        {
          "line": 941,
          "old_api": "bestActiveSpecForQuery",
          "new_api": null,
          "old_text": "bestActiveSpecForQuery(E)",
          "new_text": null,
          "old_line_content": "    VersionConstraintAvailabilitySpec *Spec = bestActiveSpecForQuery(E);",
          "new_line_content": "    if (!Spec) {",
          "content_same": false
        },
        {
          "line": 946,
          "old_api": "getLoc",
          "new_api": null,
          "old_text": "E->getLoc()",
          "new_text": null,
          "old_line_content": "      AC.Diags.diagnose(E->getLoc(),",
          "new_line_content": "                        diag::availability_query_required_for_platform,",
          "content_same": false
        },
        {
          "line": 436,
          "old_api": "diagnose",
          "new_api": null,
          "old_text": "TC.diagnose(localFunctionCapture.CaptureLoc,\n                    diag::unsupported_local_function_reference)",
          "new_text": null,
          "old_line_content": "        TC.diagnose(localFunctionCapture.CaptureLoc,",
          "new_line_content": "                    diag::unsupported_local_function_reference);",
          "content_same": false
        },
        {
          "line": 948,
          "old_api": "targetPlatform",
          "new_api": null,
          "old_text": "targetPlatform(AC.LangOpts)",
          "new_text": null,
          "old_line_content": "                        platformString(targetPlatform(AC.LangOpts)));",
          "new_line_content": "      return CurTRC;",
          "content_same": false
        },
        {
          "line": 954,
          "old_api": "setAvailableRange",
          "new_api": null,
          "old_text": "E->setAvailableRange(range)",
          "new_text": null,
          "old_line_content": "    E->setAvailableRange(range);",
          "new_line_content": "    ",
          "content_same": false
        },
        {
          "line": 446,
          "old_api": "getASTContext",
          "new_api": null,
          "old_text": "SF.getASTContext()",
          "new_text": null,
          "old_line_content": "  auto &Ctx = SF.getASTContext();",
          "new_line_content": "  TypeChecker TC(Ctx);",
          "content_same": false
        },
        {
          "line": 959,
          "old_api": "isContainedIn",
          "new_api": null,
          "old_text": "CurTRC->getPotentialVersions().isContainedIn(range)",
          "new_text": null,
          "old_line_content": "    if (CurTRC->getPotentialVersions().isContainedIn(range)) {",
          "new_line_content": "      DiagnosticEngine &Diags = AC.Diags;",
          "content_same": false
        },
        {
          "line": 448,
          "old_api": "typeCheckFunctionsAndExternalDecls",
          "new_api": null,
          "old_text": "typeCheckFunctionsAndExternalDecls(TC)",
          "new_text": null,
          "old_line_content": "  typeCheckFunctionsAndExternalDecls(TC);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 962,
          "old_api": "getLoc",
          "new_api": null,
          "old_text": "E->getLoc()",
          "new_text": null,
          "old_line_content": "        Diags.diagnose(E->getLoc(),",
          "new_line_content": "                       diag::availability_query_useless_min_deployment,",
          "content_same": false
        },
        {
          "line": 964,
          "old_api": "targetPlatform",
          "new_api": null,
          "old_text": "targetPlatform(AC.LangOpts)",
          "new_text": null,
          "old_line_content": "                       platformString(targetPlatform(AC.LangOpts)));",
          "new_line_content": "      } else {",
          "content_same": false
        },
        {
          "line": 966,
          "old_api": "getLoc",
          "new_api": null,
          "old_text": "E->getLoc()",
          "new_text": null,
          "old_line_content": "        Diags.diagnose(E->getLoc(),",
          "new_line_content": "                       diag::availability_query_useless_enclosing_scope,",
          "content_same": false
        },
        {
          "line": 969,
          "old_api": "getIntroductionLoc",
          "new_api": null,
          "old_text": "CurTRC->getIntroductionLoc()",
          "new_text": null,
          "old_line_content": "        Diags.diagnose(CurTRC->getIntroductionLoc(),",
          "new_line_content": "                       diag::availability_query_useless_enclosing_scope_here);",
          "content_same": false
        },
        {
          "line": 459,
          "old_api": "performNameBinding",
          "new_api": null,
          "old_text": "performNameBinding(SF, StartElem)",
          "new_text": null,
          "old_line_content": "  performNameBinding(SF, StartElem);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 461,
          "old_api": "getASTContext",
          "new_api": null,
          "old_text": "SF.getASTContext()",
          "new_text": null,
          "old_line_content": "  auto &Ctx = SF.getASTContext();",
          "new_line_content": "  TypeChecker TC(Ctx);",
          "content_same": false
        },
        {
          "line": 975,
          "old_api": "getCurrentTRC",
          "new_api": null,
          "old_text": "getCurrentTRC()",
          "new_text": null,
          "old_line_content": "    return TypeRefinementContext::createForIfStmtThen(AC, IS, getCurrentTRC(),",
          "new_line_content": "                                                      range);",
          "content_same": false
        },
        {
          "line": 467,
          "old_api": "getStdlibModule",
          "new_api": null,
          "old_text": "TC.getStdlibModule(&SF)",
          "new_text": null,
          "old_line_content": "  (void) TC.getStdlibModule(&SF);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 983,
          "old_api": "getQueries",
          "new_api": null,
          "old_text": "E->getQueries()",
          "new_text": null,
          "old_line_content": "    for (auto *Spec : E->getQueries()) {",
          "new_line_content": "      // FIXME: This is not quite right: we want to handle AppExtensions",
          "content_same": false
        },
        {
          "line": 988,
          "old_api": "getPlatform",
          "new_api": null,
          "old_text": "Spec->getPlatform()",
          "new_text": null,
          "old_line_content": "      if (isPlatformActive(Spec->getPlatform(), AC.LangOpts)) {",
          "new_line_content": "        return Spec;",
          "content_same": false
        },
        {
          "line": 479,
          "old_api": "getName",
          "new_api": null,
          "old_text": "import.second->getName()",
          "new_text": null,
          "old_line_content": "    if (import.second->getName() == FoundationModuleName)",
          "new_line_content": "      ImportsFoundationModule = true;",
          "content_same": false
        },
        {
          "line": 484,
          "old_api": "dyn_cast<SourceFile>(file)",
          "new_api": null,
          "old_text": "dyn_cast<SourceFile>(file)",
          "new_text": null,
          "old_line_content": "      auto SF = dyn_cast<SourceFile>(file);",
          "new_line_content": "      if (!SF)",
          "content_same": false
        },
        {
          "line": 998,
          "old_api": "getComparison",
          "new_api": null,
          "old_text": "Spec->getComparison()",
          "new_text": null,
          "old_line_content": "    switch (Spec->getComparison()) {",
          "new_line_content": "    case VersionComparison::GreaterThanEqual:",
          "content_same": false
        },
        {
          "line": 1000,
          "old_api": "getVersion",
          "new_api": null,
          "old_text": "Spec->getVersion()",
          "new_text": null,
          "old_line_content": "      return VersionRange::allGTE(Spec->getVersion());",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 490,
          "old_api": "bindExtensionDecl",
          "new_api": null,
          "old_text": "bindExtensionDecl(ED, TC)",
          "new_text": null,
          "old_line_content": "          bindExtensionDecl(ED, TC);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 1005,
          "old_api": "dyn_cast<AvailabilityQueryExpr>(E)",
          "new_api": null,
          "old_text": "dyn_cast<AvailabilityQueryExpr>(E)",
          "new_text": null,
          "old_line_content": "    auto QueryExpr = dyn_cast<AvailabilityQueryExpr>(E);",
          "new_line_content": "    if (!QueryExpr)",
          "content_same": false
        },
        {
          "line": 1007,
          "old_api": "std::make_pair(true, E)",
          "new_api": null,
          "old_text": "std::make_pair(true, E)",
          "new_text": null,
          "old_line_content": "      return std::make_pair(true, E);",
          "new_line_content": "    ",
          "content_same": false
        },
        {
          "line": 499,
          "old_api": "TypeChecker::buildTypeRefinementContextHierarchy(SF, StartElem)",
          "new_api": null,
          "old_text": "TypeChecker::buildTypeRefinementContextHierarchy(SF, StartElem)",
          "new_text": null,
          "old_line_content": "    TypeChecker::buildTypeRefinementContextHierarchy(SF, StartElem);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1014,
          "old_api": "getLoc",
          "new_api": null,
          "old_text": "E->getLoc()",
          "new_text": null,
          "old_line_content": "    AC.Diags.diagnose(E->getLoc(),",
          "new_line_content": "                      diag::availability_query_outside_if_stmt_guard);",
          "content_same": false
        },
        {
          "line": 504,
          "old_api": "isa<TopLevelCodeDecl>(D)",
          "new_api": null,
          "old_text": "isa<TopLevelCodeDecl>(D)",
          "new_text": null,
          "old_line_content": "    if (isa<TopLevelCodeDecl>(D))",
          "new_line_content": "      continue;",
          "content_same": false
        },
        {
          "line": 1017,
          "old_api": "std::make_pair(false, E)",
          "new_api": null,
          "old_text": "std::make_pair(false, E)",
          "new_text": null,
          "old_line_content": "    return std::make_pair(false, E);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 507,
          "old_api": "typeCheckDecl",
          "new_api": null,
          "old_text": "TC.typeCheckDecl(D, /*isFirstPass*/true)",
          "new_text": null,
          "old_line_content": "    TC.typeCheckDecl(D, /*isFirstPass*/true);",
          "new_line_content": "  }",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 94,
      "total_additions": 180,
      "total_deletions": 182,
      "total_api_changes": 456
    },
    "non_api_changes": {
      "has_non_api_changes": false,
      "evidence": {
        "total_diff_lines": 6,
        "api_related_lines": 456,
        "non_api_lines": 0,
        "non_api_line_numbers": []
      }
    },
    "api_calls_before": 426,
    "api_calls_after": 427,
    "diff_info": {
      "added_lines": 5,
      "removed_lines": 6,
      "total_diff_lines": 27
    }
  }
}
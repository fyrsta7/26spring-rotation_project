{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/swift/modified_file/479893e4dbf6f5f22fdb388b9e22adf072686708",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/swift/modified_file/479893e4dbf6f5f22fdb388b9e22adf072686708/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/swift/modified_file/479893e4dbf6f5f22fdb388b9e22adf072686708/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/swift/modified_file/479893e4dbf6f5f22fdb388b9e22adf072686708/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 584,
          "old_api": "getBlock",
          "new_api": "end",
          "old_text": "getRegion()->getBlock()",
          "new_text": "BB->end()",
          "old_line_content": "  SILBasicBlock *BB = getRegion()->getBlock();",
          "new_line_content": "  auto IE = BB->end();",
          "content_same": false
        },
        {
          "line": 585,
          "old_api": "getParent",
          "new_api": "assert",
          "old_text": "TargetInst->getParent()",
          "new_text": "assert(II != IE && \"I can not be an element of an empty block\")",
          "old_line_content": "  assert(TargetInst->getParent() == BB);",
          "new_line_content": "  assert(II != IE && \"I can not be an element of an empty block\");",
          "content_same": false
        },
        {
          "line": 622,
          "old_api": "llvm_unreachable",
          "new_api": "erase",
          "old_text": "llvm_unreachable(\"Could not find Inst in the block?!\")",
          "new_text": "SummarizedInterestingInsts.erase(\n      std::remove(SummarizedInterestingInsts.begin(),\n                  SummarizedInterestingInsts.end(), I),\n      SummarizedInterestingInsts.end())",
          "old_line_content": "  llvm_unreachable(\"Could not find Inst in the block?!\");",
          "new_line_content": "  SummarizedInterestingInsts.erase(",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 608,
          "old_api": null,
          "new_api": "insert",
          "old_text": null,
          "new_text": "SummarizedInterestingInsts.insert(SI, TargetInst)",
          "old_line_content": "",
          "new_line_content": "      SummarizedInterestingInsts.insert(SI, TargetInst);",
          "content_same": false
        },
        {
          "line": 580,
          "old_api": null,
          "new_api": "getBlock",
          "old_text": null,
          "new_text": "getRegion()->getBlock()",
          "old_line_content": "}",
          "new_line_content": "  SILBasicBlock *BB = getRegion()->getBlock();",
          "content_same": false
        },
        {
          "line": 581,
          "old_api": null,
          "new_api": "getParent",
          "old_text": null,
          "new_text": "TargetInst->getParent()",
          "old_line_content": "",
          "new_line_content": "  assert(TargetInst->getParent() == BB);",
          "content_same": false
        },
        {
          "line": 583,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "BB->begin()",
          "old_line_content": "  // Insert I into its location in the interesting instruction list.",
          "new_line_content": "  auto II = BB->begin();",
          "content_same": false
        },
        {
          "line": 618,
          "old_api": null,
          "new_api": "llvm_unreachable",
          "old_text": null,
          "new_text": "llvm_unreachable(\"Could not find Inst in the block?!\")",
          "old_line_content": "    ++II;",
          "new_line_content": "  llvm_unreachable(\"Could not find Inst in the block?!\");",
          "content_same": false
        },
        {
          "line": 607,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(&*II != *SI)",
          "old_line_content": "    }",
          "new_line_content": "      assert(&*II != *SI);",
          "content_same": false
        },
        {
          "line": 623,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "SummarizedInterestingInsts.begin()",
          "old_line_content": "}",
          "new_line_content": "      std::remove(SummarizedInterestingInsts.begin(),",
          "content_same": false
        },
        {
          "line": 624,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "SummarizedInterestingInsts.end()",
          "old_line_content": "",
          "new_line_content": "                  SummarizedInterestingInsts.end(), I),",
          "content_same": false
        },
        {
          "line": 625,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "SummarizedInterestingInsts.end()",
          "old_line_content": "void ARCRegionState::removeInterestingInst(SILInstruction *I) {",
          "new_line_content": "      SummarizedInterestingInsts.end());",
          "content_same": false
        },
        {
          "line": 594,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "SummarizedInterestingInsts.push_back(TargetInst)",
          "old_line_content": "  while (II != IE) {",
          "new_line_content": "      SummarizedInterestingInsts.push_back(TargetInst);",
          "content_same": false
        },
        {
          "line": 575,
          "old_api": null,
          "new_api": "summarizeLoop",
          "old_text": null,
          "new_text": "summarizeLoop(R, LRFI, RegionStateInfo)",
          "old_line_content": "    auto *SubregionState = RegionStateInfo[Subregion];",
          "new_line_content": "  summarizeLoop(R, LRFI, RegionStateInfo);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 576,
          "old_api": "getBlock",
          "new_api": null,
          "old_text": "Subregion->getBlock()",
          "new_text": null,
          "old_line_content": "    SubregionState->summarizeBlock(Subregion->getBlock());",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 579,
          "old_api": "summarizeLoop",
          "new_api": null,
          "old_text": "summarizeLoop(R, LRFI, RegionStateInfo)",
          "new_text": null,
          "old_line_content": "  summarizeLoop(R, LRFI, RegionStateInfo);",
          "new_line_content": "  // Insert I into its location in the interesting instruction list.",
          "content_same": false
        },
        {
          "line": 611,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(&*II != *SI)",
          "new_text": null,
          "old_line_content": "      assert(&*II != *SI);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 612,
          "old_api": "insert",
          "new_api": null,
          "old_text": "SummarizedInterestingInsts.insert(SI, TargetInst)",
          "new_text": null,
          "old_line_content": "      SummarizedInterestingInsts.insert(SI, TargetInst);",
          "new_line_content": "    // If we reach this point, then we know that II == SI and we have not found",
          "content_same": false
        },
        {
          "line": 589,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(II != IE && \"I can not be an element of an empty block\")",
          "new_text": null,
          "old_line_content": "  assert(II != IE && \"I can not be an element of an empty block\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 591,
          "old_api": "begin",
          "new_api": null,
          "old_text": "SummarizedInterestingInsts.begin()",
          "new_text": null,
          "old_line_content": "  auto SI = SummarizedInterestingInsts.begin();",
          "new_line_content": "    if (SI == SE) {",
          "content_same": false
        },
        {
          "line": 592,
          "old_api": "end",
          "new_api": null,
          "old_text": "SummarizedInterestingInsts.end()",
          "new_text": null,
          "old_line_content": "  auto SE = SummarizedInterestingInsts.end();",
          "new_line_content": "      // Ok, TargetInst is after all of the interesting insts. Append it to the",
          "content_same": false
        },
        {
          "line": 626,
          "old_api": "erase",
          "new_api": null,
          "old_text": "SummarizedInterestingInsts.erase(\n      std::remove(SummarizedInterestingInsts.begin(),\n                  SummarizedInterestingInsts.end(), I),\n      SummarizedInterestingInsts.end())",
          "new_text": null,
          "old_line_content": "  SummarizedInterestingInsts.erase(",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 627,
          "old_api": "begin",
          "new_api": null,
          "old_text": "SummarizedInterestingInsts.begin()",
          "new_text": null,
          "old_line_content": "      std::remove(SummarizedInterestingInsts.begin(),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 628,
          "old_api": "end",
          "new_api": null,
          "old_text": "SummarizedInterestingInsts.end()",
          "new_text": null,
          "old_line_content": "                  SummarizedInterestingInsts.end(), I),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 629,
          "old_api": "end",
          "new_api": null,
          "old_text": "SummarizedInterestingInsts.end()",
          "new_text": null,
          "old_line_content": "      SummarizedInterestingInsts.end());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 598,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "SummarizedInterestingInsts.push_back(TargetInst)",
          "new_text": null,
          "old_line_content": "      SummarizedInterestingInsts.push_back(TargetInst);",
          "new_line_content": "    // Move II down the block until it hits TargetInst or the first",
          "content_same": false
        },
        {
          "line": 571,
          "old_api": "getSubregions",
          "new_api": null,
          "old_text": "R->getSubregions()",
          "new_text": null,
          "old_line_content": "  for (unsigned SubregionID : R->getSubregions()) {",
          "new_line_content": "  // as we move around retains/releases. Additionally since we are going through",
          "content_same": false
        },
        {
          "line": 572,
          "old_api": "getRegion",
          "new_api": null,
          "old_text": "LRFI->getRegion(SubregionID)",
          "new_text": null,
          "old_line_content": "    auto *Subregion = LRFI->getRegion(SubregionID);",
          "new_line_content": "  // the loop nest bottom up, all of our subloops have already been",
          "content_same": false
        },
        {
          "line": 573,
          "old_api": "isBlock",
          "new_api": null,
          "old_text": "Subregion->isBlock()",
          "new_text": null,
          "old_line_content": "    if (!Subregion->isBlock())",
          "new_line_content": "  // summarized. Thus all we need to do is gather up the interesting",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 3,
      "total_additions": 11,
      "total_deletions": 15,
      "total_api_changes": 29
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 10,
        "api_related_lines": 29,
        "non_api_lines": 5,
        "non_api_line_numbers": [
          577,
          578,
          569,
          570,
          574
        ]
      }
    },
    "api_calls_before": 146,
    "api_calls_after": 141,
    "diff_info": {
      "added_lines": 6,
      "removed_lines": 10,
      "total_diff_lines": 28
    }
  }
}
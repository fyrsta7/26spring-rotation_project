{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/swift/modified_file/a71202fbae710d3c96b0192943de08f9e5862c07",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/swift/modified_file/a71202fbae710d3c96b0192943de08f9e5862c07/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/swift/modified_file/a71202fbae710d3c96b0192943de08f9e5862c07/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/swift/modified_file/a71202fbae710d3c96b0192943de08f9e5862c07/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 568,
          "old_api": "getValue",
          "new_api": "getSubstitutions",
          "old_text": "ShouldInlineGeneric.getValue()",
          "new_text": "AI.getSubstitutions().empty()",
          "old_line_content": "      return ShouldInlineGeneric.getValue();",
          "new_line_content": "  if (!AI.getSubstitutions().empty()) {",
          "content_same": false
        },
        {
          "line": 571,
          "old_api": "getReferencedFunction",
          "new_api": "hasValue",
          "old_text": "AI.getReferencedFunction()",
          "new_text": "ShouldInlineGeneric.hasValue()",
          "old_line_content": "  SILFunction *Callee = AI.getReferencedFunction();",
          "new_line_content": "    if (ShouldInlineGeneric.hasValue())",
          "content_same": false
        },
        {
          "line": 586,
          "old_api": "getValue",
          "new_api": "getSubstitutions",
          "old_text": "ShouldInlineGeneric.getValue()",
          "new_text": "AI.getSubstitutions().empty()",
          "old_line_content": "      return ShouldInlineGeneric.getValue();",
          "new_line_content": "  if (!AI.getSubstitutions().empty()) {",
          "content_same": false
        },
        {
          "line": 649,
          "old_api": "get",
          "new_api": "addWeightCorrection",
          "old_text": "LA->get(Callee)",
          "new_text": "addWeightCorrection(FAS, WeightCorrections)",
          "old_line_content": "      SILLoopInfo *CalleeLI = LA->get(Callee);",
          "new_line_content": "    addWeightCorrection(FAS, WeightCorrections);",
          "content_same": false
        },
        {
          "line": 651,
          "old_api": "isValid",
          "new_api": "getEligibleFunction",
          "old_text": "CalleeSPA->isValid()",
          "new_text": "getEligibleFunction(FAS)",
          "old_line_content": "      if (!CalleeSPA->isValid()) {",
          "new_line_content": "    if (SILFunction *Callee = getEligibleFunction(FAS)) {",
          "content_same": false
        },
        {
          "line": 685,
          "old_api": "end",
          "new_api": "getNext",
          "old_text": "block->end()",
          "new_text": "domOrder.getNext()",
          "old_line_content": "    for (auto I = block->begin(), E = block->end(); I != E; ++I) {",
          "new_line_content": "  while (SILBasicBlock *block = domOrder.getNext()) {",
          "content_same": false
        },
        {
          "line": 686,
          "old_api": "trackInst",
          "new_api": "beginBlock",
          "old_text": "constTracker.trackInst(&*I)",
          "new_text": "constTracker.beginBlock()",
          "old_line_content": "      constTracker.trackInst(&*I);",
          "new_line_content": "    constTracker.beginBlock();",
          "content_same": false
        },
        {
          "line": 695,
          "old_api": "isValid",
          "new_api": "FullApplySite",
          "old_text": "BlockWeight.isValid()",
          "new_text": "FullApplySite(&*I)",
          "old_line_content": "        if (!BlockWeight.isValid())",
          "new_line_content": "      FullApplySite AI = FullApplySite(&*I);",
          "content_same": false
        },
        {
          "line": 699,
          "old_api": "lookup",
          "new_api": "isValid",
          "old_text": "WeightCorrections.lookup(AI)",
          "new_text": "BlockWeight.isValid()",
          "old_line_content": "        Weight W(BlockWeight, WeightCorrections.lookup(AI));",
          "new_line_content": "        if (!BlockWeight.isValid())",
          "content_same": false
        },
        {
          "line": 705,
          "old_api": "pushChildrenIf",
          "new_api": "decideInWarmBlock",
          "old_text": "domOrder.pushChildrenIf(block, [&] (SILBasicBlock *child) {\n      if (CBI.isSlowPath(block, child)) {\n        // Handle cold blocks separately.\n        visitColdBlocks(InitialCandidates, child, DT);\n        return false;\n      }\n      return true;\n    })",
          "new_text": "decideInWarmBlock(AI, W, constTracker, NumCallerBlocks)",
          "old_line_content": "    domOrder.pushChildrenIf(block, [&] (SILBasicBlock *child) {",
          "new_line_content": "        if (decideInWarmBlock(AI, W, constTracker, NumCallerBlocks))",
          "content_same": false
        },
        {
          "line": 706,
          "old_api": "isSlowPath",
          "new_api": "push_back",
          "old_text": "CBI.isSlowPath(block, child)",
          "new_text": "InitialCandidates.push_back(AI)",
          "old_line_content": "      if (CBI.isSlowPath(block, child)) {",
          "new_line_content": "          InitialCandidates.push_back(AI);",
          "content_same": false
        },
        {
          "line": 731,
          "old_api": "push_back",
          "new_api": "assert",
          "old_text": "Applies.push_back(AI)",
          "new_text": "assert(Callee && \"apply_inst does not have a direct callee anymore\")",
          "old_line_content": "      Applies.push_back(AI);",
          "new_line_content": "    assert(Callee && \"apply_inst does not have a direct callee anymore\");",
          "content_same": false
        },
        {
          "line": 766,
          "old_api": "size",
          "new_api": "push_back",
          "old_text": "Callee->size()",
          "new_text": "Args.push_back(Arg)",
          "old_line_content": "      llvm::dbgs() << \"    inline [\" << Callee->size() << \"->\" <<",
          "new_line_content": "      Args.push_back(Arg);",
          "content_same": false
        },
        {
          "line": 771,
          "old_api": "registerDeleteNotificationHandler",
          "new_api": "getName",
          "old_text": "Caller->getModule().registerDeleteNotificationHandler(&OpenedArchetypesTracker)",
          "new_text": "Callee->getName()",
          "old_line_content": "    Caller->getModule().registerDeleteNotificationHandler(&OpenedArchetypesTracker);",
          "new_line_content": "          Caller->size() << \"] \" << Callee->getName() << \"\\n\";",
          "content_same": false
        },
        {
          "line": 778,
          "old_api": "getSubstitutions",
          "new_api": "getInstruction",
          "old_text": "AI.getSubstitutions()",
          "new_text": "AI.getInstruction()",
          "old_line_content": "                       AI.getSubstitutions(),",
          "new_line_content": "    OpenedArchetypesTracker.registerUsedOpenedArchetypes(AI.getInstruction());",
          "content_same": false
        },
        {
          "line": 785,
          "old_api": "assert",
          "new_api": "inlineFunction",
          "old_text": "assert(Success && \"Expected inliner to inline this function!\")",
          "new_text": "Inliner.inlineFunction(AI, Args)",
          "old_line_content": "    assert(Success && \"Expected inliner to inline this function!\");",
          "new_line_content": "    auto Success = Inliner.inlineFunction(AI, Args);",
          "content_same": false
        },
        {
          "line": 807,
          "old_api": "getEligibleFunction",
          "new_api": "dyn_cast<ApplyInst>(&I)",
          "old_text": "getEligibleFunction(AI)",
          "new_text": "dyn_cast<ApplyInst>(&I)",
          "old_line_content": "      auto *Callee = getEligibleFunction(AI);",
          "new_line_content": "      ApplyInst *AI = dyn_cast<ApplyInst>(&I);",
          "content_same": false
        },
        {
          "line": 812,
          "old_api": "pushChildren",
          "new_api": "decideInColdBlock",
          "old_text": "domOrder.pushChildren(block)",
          "new_text": "decideInColdBlock(AI, Callee)",
          "old_line_content": "    domOrder.pushChildren(block);",
          "new_line_content": "      if (Callee && decideInColdBlock(AI, Callee)) {",
          "content_same": false
        },
        {
          "line": 835,
          "old_api": "PM->getAnalysis<DominanceAnalysis>()",
          "new_api": "append",
          "old_text": "PM->getAnalysis<DominanceAnalysis>()",
          "new_text": "PassName.append(\" Performance Inliner\")",
          "old_line_content": "    DominanceAnalysis *DA = PM->getAnalysis<DominanceAnalysis>();",
          "new_line_content": "    PassName.append(\" Performance Inliner\");",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 770,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "Callee->size()",
          "old_line_content": "    SILOpenedArchetypesTracker OpenedArchetypesTracker(*Caller);",
          "new_line_content": "      llvm::dbgs() << \"    inline [\" << Callee->size() << \"->\" <<",
          "content_same": false
        },
        {
          "line": 643,
          "old_api": null,
          "new_api": "getSPA",
          "old_text": null,
          "new_text": "getSPA(Caller, LI)",
          "old_line_content": "",
          "new_line_content": "  ShortestPathAnalysis *SPA = getSPA(Caller, LI);",
          "content_same": false
        },
        {
          "line": 644,
          "old_api": null,
          "new_api": "analyze",
          "old_text": null,
          "new_text": "SPA->analyze(CBI, [&](FullApplySite FAS) -> int {\n  \n    // This closure returns the length of a called function.\n\n    // At this occasion we record additional weight increases.\n    addWeightCorrection(FAS, WeightCorrections);\n\n    if (SILFunction *Callee = getEligibleFunction(FAS)) {\n      // Compute the shortest-path analysis for the callee.\n      SILLoopInfo *CalleeLI = LA->get(Callee);\n      ShortestPathAnalysis *CalleeSPA = getSPA(Callee, CalleeLI);\n      if (!CalleeSPA->isValid()) {\n        CalleeSPA->analyze(CBI, [](FullApplySite FAS) {\n          // We don't compute SPA for another call-level. Functions called from\n          // the callee are assumed to have DefaultApplyLength.\n          return DefaultApplyLength;\n        });\n      }\n      int CalleeLength = CalleeSPA->getScopeLength(&Callee->front(), 0);\n      // Just in case the callee is a noreturn function.\n      if (CalleeLength >= ShortestPathAnalysis::InitialDist)\n        return DefaultApplyLength;\n      return CalleeLength;\n    }\n    // Some unknown function.\n    return DefaultApplyLength;\n  })",
          "old_line_content": "    // At this occasion we record additional weight increases.",
          "new_line_content": "  SPA->analyze(CBI, [&](FullApplySite FAS) -> int {",
          "content_same": false
        },
        {
          "line": 775,
          "old_api": null,
          "new_api": "registerDeleteNotificationHandler",
          "old_text": null,
          "new_text": "Caller->getModule().registerDeleteNotificationHandler(&OpenedArchetypesTracker)",
          "old_line_content": "",
          "new_line_content": "    Caller->getModule().registerDeleteNotificationHandler(&OpenedArchetypesTracker);",
          "content_same": false
        },
        {
          "line": 765,
          "old_api": null,
          "new_api": "getArguments",
          "old_text": null,
          "new_text": "AI.getArguments()",
          "old_line_content": "      dumpCaller(Caller);",
          "new_line_content": "    for (const auto &Arg : AI.getArguments())",
          "content_same": false
        },
        {
          "line": 653,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "LA->get(Callee)",
          "old_line_content": "          // We don't compute SPA for another call-level. Functions called from",
          "new_line_content": "      SILLoopInfo *CalleeLI = LA->get(Callee);",
          "content_same": false
        },
        {
          "line": 654,
          "old_api": null,
          "new_api": "getSPA",
          "old_text": null,
          "new_text": "getSPA(Callee, CalleeLI)",
          "old_line_content": "          // the callee are assumed to have DefaultApplyLength.",
          "new_line_content": "      ShortestPathAnalysis *CalleeSPA = getSPA(Callee, CalleeLI);",
          "content_same": false
        },
        {
          "line": 655,
          "old_api": null,
          "new_api": "isValid",
          "old_text": null,
          "new_text": "CalleeSPA->isValid()",
          "old_line_content": "          return DefaultApplyLength;",
          "new_line_content": "      if (!CalleeSPA->isValid()) {",
          "content_same": false
        },
        {
          "line": 656,
          "old_api": null,
          "new_api": "analyze",
          "old_text": null,
          "new_text": "CalleeSPA->analyze(CBI, [](FullApplySite FAS) {\n          // We don't compute SPA for another call-level. Functions called from\n          // the callee are assumed to have DefaultApplyLength.\n          return DefaultApplyLength;\n        })",
          "old_line_content": "        });",
          "new_line_content": "        CalleeSPA->analyze(CBI, [](FullApplySite FAS) {",
          "content_same": false
        },
        {
          "line": 782,
          "old_api": null,
          "new_api": "getSubstitutions",
          "old_text": null,
          "new_text": "AI.getSubstitutions()",
          "old_line_content": "    (void) Success;",
          "new_line_content": "                       AI.getSubstitutions(),",
          "content_same": false
        },
        {
          "line": 789,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(Success && \"Expected inliner to inline this function!\")",
          "old_line_content": "    NumFunctionsInlined++;",
          "new_line_content": "    assert(Success && \"Expected inliner to inline this function!\");",
          "content_same": false
        },
        {
          "line": 662,
          "old_api": null,
          "new_api": "front",
          "old_text": null,
          "new_text": "Callee->front()",
          "old_line_content": "      return CalleeLength;",
          "new_line_content": "      int CalleeLength = CalleeSPA->getScopeLength(&Callee->front(), 0);",
          "content_same": false
        },
        {
          "line": 791,
          "old_api": null,
          "new_api": "getInstruction",
          "old_text": null,
          "new_text": "AI.getInstruction()",
          "old_line_content": "",
          "new_line_content": "    recursivelyDeleteTriviallyDeadInstructions(AI.getInstruction(), true);",
          "content_same": false
        },
        {
          "line": 674,
          "old_api": null,
          "new_api": "dump",
          "old_text": null,
          "new_text": "SPA->dump()",
          "old_line_content": "  ConstantTracker constTracker(Caller);",
          "new_line_content": "    SPA->dump();",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": null,
          "new_api": "getNext",
          "old_text": null,
          "new_text": "domOrder.getNext()",
          "old_line_content": "        continue;",
          "new_line_content": "  while (SILBasicBlock *block = domOrder.getNext()) {",
          "content_same": false
        },
        {
          "line": 551,
          "old_api": null,
          "new_api": "getFunction",
          "old_text": null,
          "new_text": "AI.getFunction()->isThunk()",
          "old_line_content": "  // AlwaysInline or transparent.",
          "new_line_content": "  if (AI.getFunction()->isThunk())",
          "content_same": false
        },
        {
          "line": 679,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "Caller->size()",
          "old_line_content": "  // We do this in dominance order for the constTracker.",
          "new_line_content": "  DominanceOrder domOrder(&Caller->front(), DT, Caller->size());",
          "content_same": false
        },
        {
          "line": 680,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "Caller->size()",
          "old_line_content": "  SmallVector<FullApplySite, 8> InitialCandidates;",
          "new_line_content": "  int NumCallerBlocks = (int)Caller->size();",
          "content_same": false
        },
        {
          "line": 811,
          "old_api": null,
          "new_api": "getEligibleFunction",
          "old_text": null,
          "new_text": "getEligibleFunction(AI)",
          "old_line_content": "    }",
          "new_line_content": "      auto *Callee = getEligibleFunction(AI);",
          "content_same": false
        },
        {
          "line": 556,
          "old_api": null,
          "new_api": "isTransparent",
          "old_text": null,
          "new_text": "Callee->isTransparent()",
          "old_line_content": "  return None;",
          "new_line_content": "  if (Callee->getInlineStrategy() == AlwaysInline || Callee->isTransparent())",
          "content_same": false
        },
        {
          "line": 813,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "AppliesToInline.push_back(AI)",
          "old_line_content": "  }",
          "new_line_content": "        AppliesToInline.push_back(AI);",
          "content_same": false
        },
        {
          "line": 816,
          "old_api": null,
          "new_api": "pushChildren",
          "old_text": null,
          "new_text": "domOrder.pushChildren(block)",
          "old_line_content": "",
          "new_line_content": "    domOrder.pushChildren(block);",
          "content_same": false
        },
        {
          "line": 689,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "block->end()",
          "old_line_content": "        continue;",
          "new_line_content": "    for (auto I = block->begin(), E = block->end(); I != E; ++I) {",
          "content_same": false
        },
        {
          "line": 690,
          "old_api": null,
          "new_api": "trackInst",
          "old_text": null,
          "new_text": "constTracker.trackInst(&*I)",
          "old_line_content": "",
          "new_line_content": "      constTracker.trackInst(&*I);",
          "content_same": false
        },
        {
          "line": 692,
          "old_api": null,
          "new_api": "FullApplySite::isa(&*I)",
          "old_text": null,
          "new_text": "FullApplySite::isa(&*I)",
          "old_line_content": "",
          "new_line_content": "      if (!FullApplySite::isa(&*I))",
          "content_same": false
        },
        {
          "line": 697,
          "old_api": null,
          "new_api": "getEligibleFunction",
          "old_text": null,
          "new_text": "getEligibleFunction(AI)",
          "old_line_content": "",
          "new_line_content": "      auto *Callee = getEligibleFunction(AI);",
          "content_same": false
        },
        {
          "line": 570,
          "old_api": null,
          "new_api": "shouldInlineGeneric",
          "old_text": null,
          "new_text": "shouldInlineGeneric(AI)",
          "old_line_content": "",
          "new_line_content": "    auto ShouldInlineGeneric = shouldInlineGeneric(AI);",
          "content_same": false
        },
        {
          "line": 572,
          "old_api": null,
          "new_api": "getValue",
          "old_text": null,
          "new_text": "ShouldInlineGeneric.getValue()",
          "old_line_content": "",
          "new_line_content": "      return ShouldInlineGeneric.getValue();",
          "content_same": false
        },
        {
          "line": 700,
          "old_api": null,
          "new_api": "Weight",
          "old_text": null,
          "new_text": "Weight(0, 0)",
          "old_line_content": "",
          "new_line_content": "          BlockWeight = SPA->getWeight(block, Weight(0, 0));",
          "content_same": false
        },
        {
          "line": 575,
          "old_api": null,
          "new_api": "getReferencedFunction",
          "old_text": null,
          "new_text": "AI.getReferencedFunction()",
          "old_line_content": "",
          "new_line_content": "  SILFunction *Callee = AI.getReferencedFunction();",
          "content_same": false
        },
        {
          "line": 703,
          "old_api": null,
          "new_api": "lookup",
          "old_text": null,
          "new_text": "WeightCorrections.lookup(AI)",
          "old_line_content": "      }",
          "new_line_content": "        Weight W(BlockWeight, WeightCorrections.lookup(AI));",
          "content_same": false
        },
        {
          "line": 577,
          "old_api": null,
          "new_api": "getInlineStrategy",
          "old_text": null,
          "new_text": "Callee->getInlineStrategy()",
          "old_line_content": "}",
          "new_line_content": "  if (Callee->getInlineStrategy() == AlwaysInline)",
          "content_same": false
        },
        {
          "line": 580,
          "old_api": null,
          "new_api": "isProfitableToInline",
          "old_text": null,
          "new_text": "isProfitableToInline(AI, CallerWeight, callerTracker, NumCallerBlocks)",
          "old_line_content": "bool SILPerformanceInliner::decideInColdBlock(FullApplySite AI,",
          "new_line_content": "  return isProfitableToInline(AI, CallerWeight, callerTracker, NumCallerBlocks);",
          "content_same": false
        },
        {
          "line": 709,
          "old_api": null,
          "new_api": "pushChildrenIf",
          "old_text": null,
          "new_text": "domOrder.pushChildrenIf(block, [&] (SILBasicBlock *child) {\n      if (CBI.isSlowPath(block, child)) {\n        // Handle cold blocks separately.\n        visitColdBlocks(InitialCandidates, child, DT);\n        return false;\n      }\n      return true;\n    })",
          "old_line_content": "        return false;",
          "new_line_content": "    domOrder.pushChildrenIf(block, [&] (SILBasicBlock *child) {",
          "content_same": false
        },
        {
          "line": 710,
          "old_api": null,
          "new_api": "isSlowPath",
          "old_text": null,
          "new_text": "CBI.isSlowPath(block, child)",
          "old_line_content": "      }",
          "new_line_content": "      if (CBI.isSlowPath(block, child)) {",
          "content_same": false
        },
        {
          "line": 839,
          "old_api": null,
          "new_api": "PM->getAnalysis<DominanceAnalysis>()",
          "old_text": null,
          "new_text": "PM->getAnalysis<DominanceAnalysis>()",
          "old_line_content": "      return;",
          "new_line_content": "    DominanceAnalysis *DA = PM->getAnalysis<DominanceAnalysis>();",
          "content_same": false
        },
        {
          "line": 712,
          "old_api": null,
          "new_api": "visitColdBlocks",
          "old_text": null,
          "new_text": "visitColdBlocks(InitialCandidates, child, DT)",
          "old_line_content": "    });",
          "new_line_content": "        visitColdBlocks(InitialCandidates, child, DT);",
          "content_same": false
        },
        {
          "line": 840,
          "old_api": null,
          "new_api": "PM->getAnalysis<SILLoopAnalysis>()",
          "old_text": null,
          "new_text": "PM->getAnalysis<SILLoopAnalysis>()",
          "old_line_content": "    }",
          "new_line_content": "    SILLoopAnalysis *LA = PM->getAnalysis<SILLoopAnalysis>();",
          "content_same": false
        },
        {
          "line": 842,
          "old_api": null,
          "new_api": "getOptions",
          "old_text": null,
          "new_text": "getOptions()",
          "old_line_content": "    SILPerformanceInliner Inliner(WhatToInline, DA, LA);",
          "new_line_content": "    if (getOptions().InlineThreshold == 0) {",
          "content_same": false
        },
        {
          "line": 588,
          "old_api": null,
          "new_api": "shouldInlineGeneric",
          "old_text": null,
          "new_text": "shouldInlineGeneric(AI)",
          "old_line_content": "    return false;",
          "new_line_content": "    auto ShouldInlineGeneric = shouldInlineGeneric(AI);",
          "content_same": false
        },
        {
          "line": 589,
          "old_api": null,
          "new_api": "hasValue",
          "old_text": null,
          "new_text": "ShouldInlineGeneric.hasValue()",
          "old_line_content": "  }",
          "new_line_content": "    if (ShouldInlineGeneric.hasValue())",
          "content_same": false
        },
        {
          "line": 590,
          "old_api": null,
          "new_api": "getValue",
          "old_text": null,
          "new_text": "ShouldInlineGeneric.getValue()",
          "old_line_content": "",
          "new_line_content": "      return ShouldInlineGeneric.getValue();",
          "content_same": false
        },
        {
          "line": 848,
          "old_api": null,
          "new_api": "isDefinition",
          "old_text": null,
          "new_text": "getFunction()->isDefinition()",
          "old_line_content": "    // analyses for this function and restart the pipeline so that we",
          "new_line_content": "    assert(getFunction()->isDefinition() &&",
          "content_same": false
        },
        {
          "line": 722,
          "old_api": null,
          "new_api": "getReferencedFunction",
          "old_text": null,
          "new_text": "AI.getReferencedFunction()",
          "old_line_content": "",
          "new_line_content": "    SILFunction *Callee = AI.getReferencedFunction();",
          "content_same": false
        },
        {
          "line": 595,
          "old_api": null,
          "new_api": "getInlineStrategy",
          "old_text": null,
          "new_text": "Callee->getInlineStrategy()",
          "old_line_content": "",
          "new_line_content": "  if (Callee->getInlineStrategy() == AlwaysInline)",
          "content_same": false
        },
        {
          "line": 723,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(Callee && \"apply_inst does not have a direct callee anymore\")",
          "old_line_content": "  // Now copy each candidate callee that has a small enough number of",
          "new_line_content": "    assert(Callee && \"apply_inst does not have a direct callee anymore\");",
          "content_same": false
        },
        {
          "line": 855,
          "old_api": null,
          "new_api": "getFunction",
          "old_text": null,
          "new_text": "getFunction()",
          "old_line_content": "  }",
          "new_line_content": "    if (Inliner.inlineCallsIntoFunction(getFunction())) {",
          "content_same": false
        },
        {
          "line": 856,
          "old_api": null,
          "new_api": "invalidateAnalysis",
          "old_text": null,
          "new_text": "invalidateAnalysis(SILAnalysis::InvalidationKind::FunctionBody)",
          "old_line_content": "",
          "new_line_content": "      invalidateAnalysis(SILAnalysis::InvalidationKind::FunctionBody);",
          "content_same": false
        },
        {
          "line": 857,
          "old_api": null,
          "new_api": "restartPassPipeline",
          "old_text": null,
          "new_text": "restartPassPipeline()",
          "old_line_content": "  StringRef getName() override { return PassName; }",
          "new_line_content": "      restartPassPipeline();",
          "content_same": false
        },
        {
          "line": 602,
          "old_api": null,
          "new_api": "instructionInlineCost",
          "old_text": null,
          "new_text": "instructionInlineCost(I)",
          "old_line_content": "  }",
          "new_line_content": "      CalleeCost += int(instructionInlineCost(I));",
          "content_same": false
        },
        {
          "line": 730,
          "old_api": null,
          "new_api": "getReferencedFunction",
          "old_text": null,
          "new_text": "AI.getReferencedFunction()",
          "old_line_content": "    if (CalleeCount[Callee] <= CallsToCalleeThreshold)",
          "new_line_content": "    SILFunction *Callee = AI.getReferencedFunction();",
          "content_same": false
        },
        {
          "line": 607,
          "old_api": null,
          "new_api": "getFunction",
          "old_text": null,
          "new_text": "DEBUG(\n    dumpCaller(AI.getFunction())",
          "old_line_content": "  );",
          "new_line_content": "  DEBUG(",
          "content_same": false
        },
        {
          "line": 608,
          "old_api": null,
          "new_api": "getFunction",
          "old_text": null,
          "new_text": "AI.getFunction()",
          "old_line_content": "  return true;",
          "new_line_content": "    dumpCaller(AI.getFunction());",
          "content_same": false
        },
        {
          "line": 609,
          "old_api": null,
          "new_api": "llvm::dbgs()",
          "old_text": null,
          "new_text": "llvm::dbgs()",
          "old_line_content": "}",
          "new_line_content": "    llvm::dbgs() << \"    cold decision {\" << CalleeCost << \"} \" <<",
          "content_same": false
        },
        {
          "line": 610,
          "old_api": null,
          "new_api": "getName",
          "old_text": null,
          "new_text": "Callee->getName()",
          "old_line_content": "",
          "new_line_content": "              Callee->getName() << '\\n';",
          "content_same": false
        },
        {
          "line": 735,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "Applies.push_back(AI)",
          "old_line_content": "/// \\brief Attempt to inline all calls smaller than our threshold.",
          "new_line_content": "      Applies.push_back(AI);",
          "content_same": false
        },
        {
          "line": 743,
          "old_api": null,
          "new_api": "shouldOptimize",
          "old_text": null,
          "new_text": "Caller->shouldOptimize()",
          "old_line_content": "  // don't change anything yet so that the dominator information",
          "new_line_content": "  if (!Caller->shouldOptimize())",
          "content_same": false
        },
        {
          "line": 622,
          "old_api": null,
          "new_api": "getReferencedFunction",
          "old_text": null,
          "new_text": "FAS.getReferencedFunction()",
          "old_line_content": "    // buffer allocation for the array. It is essential to inline it for stack",
          "new_line_content": "  SILFunction *Callee = FAS.getReferencedFunction();",
          "content_same": false
        },
        {
          "line": 623,
          "old_api": null,
          "new_api": "hasSemanticsAttr",
          "old_text": null,
          "new_text": "Callee->hasSemanticsAttr(\"array.uninitialized\")",
          "old_line_content": "    // promotion of the array buffer.",
          "new_line_content": "  if (Callee && Callee->hasSemanticsAttr(\"array.uninitialized\")) {",
          "content_same": false
        },
        {
          "line": 750,
          "old_api": null,
          "new_api": "collectAppliesToInline",
          "old_text": null,
          "new_text": "collectAppliesToInline(Caller, AppliesToInline)",
          "old_line_content": "",
          "new_line_content": "  collectAppliesToInline(Caller, AppliesToInline);",
          "content_same": false
        },
        {
          "line": 752,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "AppliesToInline.empty()",
          "old_line_content": "  for (auto AI : AppliesToInline) {",
          "new_line_content": "  if (AppliesToInline.empty())",
          "content_same": false
        },
        {
          "line": 760,
          "old_api": null,
          "new_api": "shouldOptimize",
          "old_text": null,
          "new_text": "Callee->shouldOptimize()",
          "old_line_content": "    SmallVector<SILValue, 8> Args;",
          "new_line_content": "    if (!Callee->shouldOptimize()) {",
          "content_same": false
        },
        {
          "line": 628,
          "old_api": null,
          "new_api": "getArgument",
          "old_text": null,
          "new_text": "FAS.getArgument(0)",
          "old_line_content": "  }",
          "new_line_content": "    SILValue BufferArg = FAS.getArgument(0);",
          "content_same": false
        },
        {
          "line": 629,
          "old_api": null,
          "new_api": "stripCasts",
          "old_text": null,
          "new_text": "stripCasts(BufferArg)",
          "old_line_content": "}",
          "new_line_content": "    SILValue Base = stripValueProjections(stripCasts(BufferArg));",
          "content_same": false
        },
        {
          "line": 630,
          "old_api": null,
          "new_api": "FullApplySite::isa(Base)",
          "old_text": null,
          "new_text": "FullApplySite::isa(Base)",
          "old_line_content": "",
          "new_line_content": "    if (auto BaseApply = FullApplySite::isa(Base))",
          "content_same": false
        },
        {
          "line": 757,
          "old_api": null,
          "new_api": "getReferencedFunction",
          "old_text": null,
          "new_text": "AI.getReferencedFunction()",
          "old_line_content": "      continue;",
          "new_line_content": "    SILFunction *Callee = AI.getReferencedFunction();",
          "content_same": false
        },
        {
          "line": 758,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(Callee && \"apply_inst does not have a direct callee anymore\")",
          "old_line_content": "    }",
          "new_line_content": "    assert(Callee && \"apply_inst does not have a direct callee anymore\");",
          "content_same": false
        },
        {
          "line": 637,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "DA->get(Caller)",
          "old_line_content": "",
          "new_line_content": "  DominanceInfo *DT = DA->get(Caller);",
          "content_same": false
        },
        {
          "line": 638,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "LA->get(Caller)",
          "old_line_content": "  // Compute the shortest-path analysis for the caller.",
          "new_line_content": "  SILLoopInfo *LI = LA->get(Caller);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 640,
          "old_api": "analyze",
          "new_api": null,
          "old_text": "SPA->analyze(CBI, [&](FullApplySite FAS) -> int {\n  \n    // This closure returns the length of a called function.\n\n    // At this occasion we record additional weight increases.\n    addWeightCorrection(FAS, WeightCorrections);\n\n    if (SILFunction *Callee = getEligibleFunction(FAS)) {\n      // Compute the shortest-path analysis for the callee.\n      SILLoopInfo *CalleeLI = LA->get(Callee);\n      ShortestPathAnalysis *CalleeSPA = getSPA(Callee, CalleeLI);\n      if (!CalleeSPA->isValid()) {\n        CalleeSPA->analyze(CBI, [](FullApplySite FAS) {\n          // We don't compute SPA for another call-level. Functions called from\n          // the callee are assumed to have DefaultApplyLength.\n          return DefaultApplyLength;\n        });\n      }\n      int CalleeLength = CalleeSPA->getScopeLength(&Callee->front(), 0);\n      // Just in case the callee is a noreturn function.\n      if (CalleeLength >= ShortestPathAnalysis::InitialDist)\n        return DefaultApplyLength;\n      return CalleeLength;\n    }\n    // Some unknown function.\n    return DefaultApplyLength;\n  })",
          "new_text": null,
          "old_line_content": "  SPA->analyze(CBI, [&](FullApplySite FAS) -> int {",
          "new_line_content": "  llvm::DenseMap<FullApplySite, int> WeightCorrections;",
          "content_same": false
        },
        {
          "line": 645,
          "old_api": "addWeightCorrection",
          "new_api": null,
          "old_text": "addWeightCorrection(FAS, WeightCorrections)",
          "new_text": null,
          "old_line_content": "    addWeightCorrection(FAS, WeightCorrections);",
          "new_line_content": "  ",
          "content_same": false
        },
        {
          "line": 774,
          "old_api": "getInstruction",
          "new_api": null,
          "old_text": "AI.getInstruction()",
          "new_text": null,
          "old_line_content": "    OpenedArchetypesTracker.registerUsedOpenedArchetypes(AI.getInstruction());",
          "new_line_content": "    SILOpenedArchetypesTracker OpenedArchetypesTracker(*Caller);",
          "content_same": false
        },
        {
          "line": 647,
          "old_api": "getEligibleFunction",
          "new_api": null,
          "old_text": "getEligibleFunction(FAS)",
          "new_text": null,
          "old_line_content": "    if (SILFunction *Callee = getEligibleFunction(FAS)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 650,
          "old_api": "getSPA",
          "new_api": null,
          "old_text": "getSPA(Callee, CalleeLI)",
          "new_text": null,
          "old_line_content": "      ShortestPathAnalysis *CalleeSPA = getSPA(Callee, CalleeLI);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 652,
          "old_api": "analyze",
          "new_api": null,
          "old_text": "CalleeSPA->analyze(CBI, [](FullApplySite FAS) {\n          // We don't compute SPA for another call-level. Functions called from\n          // the callee are assumed to have DefaultApplyLength.\n          return DefaultApplyLength;\n        })",
          "new_text": null,
          "old_line_content": "        CalleeSPA->analyze(CBI, [](FullApplySite FAS) {",
          "new_line_content": "      // Compute the shortest-path analysis for the callee.",
          "content_same": false
        },
        {
          "line": 781,
          "old_api": "inlineFunction",
          "new_api": null,
          "old_text": "Inliner.inlineFunction(AI, Args)",
          "new_text": null,
          "old_line_content": "    auto Success = Inliner.inlineFunction(AI, Args);",
          "new_line_content": "                       SILInliner::InlineKind::PerformanceInline,",
          "content_same": false
        },
        {
          "line": 658,
          "old_api": "front",
          "new_api": null,
          "old_text": "Callee->front()",
          "new_text": null,
          "old_line_content": "      int CalleeLength = CalleeSPA->getScopeLength(&Callee->front(), 0);",
          "new_line_content": "          // the callee are assumed to have DefaultApplyLength.",
          "content_same": false
        },
        {
          "line": 767,
          "old_api": "getName",
          "new_api": null,
          "old_text": "Callee->getName()",
          "new_text": null,
          "old_line_content": "          Caller->size() << \"] \" << Callee->getName() << \"\\n\";",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 787,
          "old_api": "getInstruction",
          "new_api": null,
          "old_text": "AI.getInstruction()",
          "new_text": null,
          "old_line_content": "    recursivelyDeleteTriviallyDeadInstructions(AI.getInstruction(), true);",
          "new_line_content": "    // We've already determined we should be able to inline this, so",
          "content_same": false
        },
        {
          "line": 670,
          "old_api": "dump",
          "new_api": null,
          "old_text": "SPA->dump()",
          "new_text": null,
          "old_line_content": "    SPA->dump();",
          "new_line_content": "  });",
          "content_same": false
        },
        {
          "line": 801,
          "old_api": "getNext",
          "new_api": null,
          "old_text": "domOrder.getNext()",
          "new_text": null,
          "old_line_content": "  while (SILBasicBlock *block = domOrder.getNext()) {",
          "new_line_content": "void SILPerformanceInliner::visitColdBlocks(",
          "content_same": false
        },
        {
          "line": 675,
          "old_api": "size",
          "new_api": null,
          "old_text": "Caller->size()",
          "new_text": null,
          "old_line_content": "  DominanceOrder domOrder(&Caller->front(), DT, Caller->size());",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 676,
          "old_api": "size",
          "new_api": null,
          "old_text": "Caller->size()",
          "new_text": null,
          "old_line_content": "  int NumCallerBlocks = (int)Caller->size();",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 803,
          "old_api": "dyn_cast<ApplyInst>(&I)",
          "new_api": null,
          "old_text": "dyn_cast<ApplyInst>(&I)",
          "new_text": null,
          "old_line_content": "      ApplyInst *AI = dyn_cast<ApplyInst>(&I);",
          "new_line_content": "    DominanceInfo *DT) {",
          "content_same": false
        },
        {
          "line": 552,
          "old_api": "isTransparent",
          "new_api": null,
          "old_text": "Callee->isTransparent()",
          "new_text": null,
          "old_line_content": "  if (Callee->getInlineStrategy() == AlwaysInline || Callee->isTransparent())",
          "new_line_content": "    return false;",
          "content_same": false
        },
        {
          "line": 681,
          "old_api": "getNext",
          "new_api": null,
          "old_text": "domOrder.getNext()",
          "new_text": null,
          "old_line_content": "  while (SILBasicBlock *block = domOrder.getNext()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 682,
          "old_api": "beginBlock",
          "new_api": null,
          "old_text": "constTracker.beginBlock()",
          "new_text": null,
          "old_line_content": "    constTracker.beginBlock();",
          "new_line_content": "  // Go through all instructions and find candidates for inlining.",
          "content_same": false
        },
        {
          "line": 808,
          "old_api": "decideInColdBlock",
          "new_api": null,
          "old_text": "decideInColdBlock(AI, Callee)",
          "new_text": null,
          "old_line_content": "      if (Callee && decideInColdBlock(AI, Callee)) {",
          "new_line_content": "      if (!AI)",
          "content_same": false
        },
        {
          "line": 809,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "AppliesToInline.push_back(AI)",
          "new_text": null,
          "old_line_content": "        AppliesToInline.push_back(AI);",
          "new_line_content": "        continue;",
          "content_same": false
        },
        {
          "line": 688,
          "old_api": "FullApplySite::isa(&*I)",
          "new_api": null,
          "old_text": "FullApplySite::isa(&*I)",
          "new_text": null,
          "old_line_content": "      if (!FullApplySite::isa(&*I))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 691,
          "old_api": "FullApplySite",
          "new_api": null,
          "old_text": "FullApplySite(&*I)",
          "new_text": null,
          "old_line_content": "      FullApplySite AI = FullApplySite(&*I);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 564,
          "old_api": "getSubstitutions",
          "new_api": null,
          "old_text": "AI.getSubstitutions().empty()",
          "new_text": null,
          "old_line_content": "  if (!AI.getSubstitutions().empty()) {",
          "new_line_content": "decideInWarmBlock(FullApplySite AI,",
          "content_same": false
        },
        {
          "line": 693,
          "old_api": "getEligibleFunction",
          "new_api": null,
          "old_text": "getEligibleFunction(AI)",
          "new_text": null,
          "old_line_content": "      auto *Callee = getEligibleFunction(AI);",
          "new_line_content": "        continue;",
          "content_same": false
        },
        {
          "line": 566,
          "old_api": "shouldInlineGeneric",
          "new_api": null,
          "old_text": "shouldInlineGeneric(AI)",
          "new_text": null,
          "old_line_content": "    auto ShouldInlineGeneric = shouldInlineGeneric(AI);",
          "new_line_content": "                  ConstantTracker &callerTracker,",
          "content_same": false
        },
        {
          "line": 567,
          "old_api": "hasValue",
          "new_api": null,
          "old_text": "ShouldInlineGeneric.hasValue()",
          "new_text": null,
          "old_line_content": "    if (ShouldInlineGeneric.hasValue())",
          "new_line_content": "                  int &NumCallerBlocks) {",
          "content_same": false
        },
        {
          "line": 696,
          "old_api": "Weight",
          "new_api": null,
          "old_text": "Weight(0, 0)",
          "new_text": null,
          "old_line_content": "          BlockWeight = SPA->getWeight(block, Weight(0, 0));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 573,
          "old_api": "getInlineStrategy",
          "new_api": null,
          "old_text": "Callee->getInlineStrategy()",
          "new_text": null,
          "old_line_content": "  if (Callee->getInlineStrategy() == AlwaysInline)",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 701,
          "old_api": "decideInWarmBlock",
          "new_api": null,
          "old_text": "decideInWarmBlock(AI, W, constTracker, NumCallerBlocks)",
          "new_text": null,
          "old_line_content": "        if (decideInWarmBlock(AI, W, constTracker, NumCallerBlocks))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 702,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "InitialCandidates.push_back(AI)",
          "new_text": null,
          "old_line_content": "          InitialCandidates.push_back(AI);",
          "new_line_content": "        // The actual weight including a possible weight correction.",
          "content_same": false
        },
        {
          "line": 576,
          "old_api": "isProfitableToInline",
          "new_api": null,
          "old_text": "isProfitableToInline(AI, CallerWeight, callerTracker, NumCallerBlocks)",
          "new_text": null,
          "old_line_content": "  return isProfitableToInline(AI, CallerWeight, callerTracker, NumCallerBlocks);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 831,
          "old_api": "append",
          "new_api": null,
          "old_text": "PassName.append(\" Performance Inliner\")",
          "new_text": null,
          "old_line_content": "    PassName.append(\" Performance Inliner\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 708,
          "old_api": "visitColdBlocks",
          "new_api": null,
          "old_text": "visitColdBlocks(InitialCandidates, child, DT)",
          "new_text": null,
          "old_line_content": "        visitColdBlocks(InitialCandidates, child, DT);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 836,
          "old_api": "PM->getAnalysis<SILLoopAnalysis>()",
          "new_api": null,
          "old_text": "PM->getAnalysis<SILLoopAnalysis>()",
          "new_text": null,
          "old_line_content": "    SILLoopAnalysis *LA = PM->getAnalysis<SILLoopAnalysis>();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 582,
          "old_api": "getSubstitutions",
          "new_api": null,
          "old_text": "AI.getSubstitutions().empty()",
          "new_text": null,
          "old_line_content": "  if (!AI.getSubstitutions().empty()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 838,
          "old_api": "getOptions",
          "new_api": null,
          "old_text": "getOptions()",
          "new_text": null,
          "old_line_content": "    if (getOptions().InlineThreshold == 0) {",
          "new_line_content": "  void run() override {",
          "content_same": false
        },
        {
          "line": 584,
          "old_api": "shouldInlineGeneric",
          "new_api": null,
          "old_text": "shouldInlineGeneric(AI)",
          "new_text": null,
          "old_line_content": "    auto ShouldInlineGeneric = shouldInlineGeneric(AI);",
          "new_line_content": "bool SILPerformanceInliner::decideInColdBlock(FullApplySite AI,",
          "content_same": false
        },
        {
          "line": 585,
          "old_api": "hasValue",
          "new_api": null,
          "old_text": "ShouldInlineGeneric.hasValue()",
          "new_text": null,
          "old_line_content": "    if (ShouldInlineGeneric.hasValue())",
          "new_line_content": "                                              SILFunction *Callee) {",
          "content_same": false
        },
        {
          "line": 844,
          "old_api": "isDefinition",
          "new_api": null,
          "old_text": "getFunction()->isDefinition()",
          "new_text": null,
          "old_line_content": "    assert(getFunction()->isDefinition() &&",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 718,
          "old_api": "getReferencedFunction",
          "new_api": null,
          "old_text": "AI.getReferencedFunction()",
          "new_text": null,
          "old_line_content": "    SILFunction *Callee = AI.getReferencedFunction();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 591,
          "old_api": "getInlineStrategy",
          "new_api": null,
          "old_text": "Callee->getInlineStrategy()",
          "new_text": null,
          "old_line_content": "  if (Callee->getInlineStrategy() == AlwaysInline)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 719,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(Callee && \"apply_inst does not have a direct callee anymore\")",
          "new_text": null,
          "old_line_content": "    assert(Callee && \"apply_inst does not have a direct callee anymore\");",
          "new_line_content": "  // Calculate how many times a callee is called from this caller.",
          "content_same": false
        },
        {
          "line": 851,
          "old_api": "getFunction",
          "new_api": null,
          "old_text": "getFunction()",
          "new_text": null,
          "old_line_content": "    if (Inliner.inlineCallsIntoFunction(getFunction())) {",
          "new_line_content": "    // Inline things into this function, and if we do so invalidate",
          "content_same": false
        },
        {
          "line": 852,
          "old_api": "invalidateAnalysis",
          "new_api": null,
          "old_text": "invalidateAnalysis(SILAnalysis::InvalidationKind::FunctionBody)",
          "new_text": null,
          "old_line_content": "      invalidateAnalysis(SILAnalysis::InvalidationKind::FunctionBody);",
          "new_line_content": "    // analyses for this function and restart the pipeline so that we",
          "content_same": false
        },
        {
          "line": 853,
          "old_api": "restartPassPipeline",
          "new_api": null,
          "old_text": "restartPassPipeline()",
          "new_text": null,
          "old_line_content": "      restartPassPipeline();",
          "new_line_content": "    // can further optimize this function before attempting to inline",
          "content_same": false
        },
        {
          "line": 598,
          "old_api": "instructionInlineCost",
          "new_api": null,
          "old_text": "instructionInlineCost(I)",
          "new_text": null,
          "old_line_content": "      CalleeCost += int(instructionInlineCost(I));",
          "new_line_content": "  int CalleeCost = 0;",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": "getReferencedFunction",
          "new_api": null,
          "old_text": "AI.getReferencedFunction()",
          "new_text": null,
          "old_line_content": "    SILFunction *Callee = AI.getReferencedFunction();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 727,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(Callee && \"apply_inst does not have a direct callee anymore\")",
          "new_text": null,
          "old_line_content": "    assert(Callee && \"apply_inst does not have a direct callee anymore\");",
          "new_line_content": "  // Now copy each candidate callee that has a small enough number of",
          "content_same": false
        },
        {
          "line": 603,
          "old_api": "getFunction",
          "new_api": null,
          "old_text": "DEBUG(\n    dumpCaller(AI.getFunction())",
          "new_text": null,
          "old_line_content": "  DEBUG(",
          "new_line_content": "      if (CalleeCost > TrivialFunctionThreshold)",
          "content_same": false
        },
        {
          "line": 604,
          "old_api": "getFunction",
          "new_api": null,
          "old_text": "AI.getFunction()",
          "new_text": null,
          "old_line_content": "    dumpCaller(AI.getFunction());",
          "new_line_content": "        return false;",
          "content_same": false
        },
        {
          "line": 605,
          "old_api": "llvm::dbgs()",
          "new_api": null,
          "old_text": "llvm::dbgs()",
          "new_text": null,
          "old_line_content": "    llvm::dbgs() << \"    cold decision {\" << CalleeCost << \"} \" <<",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 606,
          "old_api": "getName",
          "new_api": null,
          "old_text": "Callee->getName()",
          "new_text": null,
          "old_line_content": "              Callee->getName() << '\\n';",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 739,
          "old_api": "shouldOptimize",
          "new_api": null,
          "old_text": "Caller->shouldOptimize()",
          "new_text": null,
          "old_line_content": "  if (!Caller->shouldOptimize())",
          "new_line_content": "/// \\brief Attempt to inline all calls smaller than our threshold.",
          "content_same": false
        },
        {
          "line": 762,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "Args.push_back(Arg)",
          "new_text": null,
          "old_line_content": "      Args.push_back(Arg);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 618,
          "old_api": "getReferencedFunction",
          "new_api": null,
          "old_text": "FAS.getReferencedFunction()",
          "new_text": null,
          "old_line_content": "  SILFunction *Callee = FAS.getReferencedFunction();",
          "new_line_content": "/// the additional weight is for _another_ function than the current handled",
          "content_same": false
        },
        {
          "line": 619,
          "old_api": "hasSemanticsAttr",
          "new_api": null,
          "old_text": "Callee->hasSemanticsAttr(\"array.uninitialized\")",
          "new_text": null,
          "old_line_content": "  if (Callee && Callee->hasSemanticsAttr(\"array.uninitialized\")) {",
          "new_line_content": "/// callee.",
          "content_same": false
        },
        {
          "line": 746,
          "old_api": "collectAppliesToInline",
          "new_api": null,
          "old_text": "collectAppliesToInline(Caller, AppliesToInline)",
          "new_text": null,
          "old_line_content": "  collectAppliesToInline(Caller, AppliesToInline);",
          "new_line_content": "  // First step: collect all the functions we want to inline.  We",
          "content_same": false
        },
        {
          "line": 748,
          "old_api": "empty",
          "new_api": null,
          "old_text": "AppliesToInline.empty()",
          "new_text": null,
          "old_line_content": "  if (AppliesToInline.empty())",
          "new_line_content": "  // remains valid.",
          "content_same": false
        },
        {
          "line": 624,
          "old_api": "getArgument",
          "new_api": null,
          "old_text": "FAS.getArgument(0)",
          "new_text": null,
          "old_line_content": "    SILValue BufferArg = FAS.getArgument(0);",
          "new_line_content": "    // We want to inline the argument to an array.uninitialized call, because",
          "content_same": false
        },
        {
          "line": 625,
          "old_api": "stripCasts",
          "new_api": null,
          "old_text": "stripCasts(BufferArg)",
          "new_text": null,
          "old_line_content": "    SILValue Base = stripValueProjections(stripCasts(BufferArg));",
          "new_line_content": "    // this argument is most likely a call to a function which contains the",
          "content_same": false
        },
        {
          "line": 626,
          "old_api": "FullApplySite::isa(Base)",
          "new_api": null,
          "old_text": "FullApplySite::isa(Base)",
          "new_text": null,
          "old_line_content": "    if (auto BaseApply = FullApplySite::isa(Base))",
          "new_line_content": "    // buffer allocation for the array. It is essential to inline it for stack",
          "content_same": false
        },
        {
          "line": 753,
          "old_api": "getReferencedFunction",
          "new_api": null,
          "old_text": "AI.getReferencedFunction()",
          "new_text": null,
          "old_line_content": "    SILFunction *Callee = AI.getReferencedFunction();",
          "new_line_content": "    return false;",
          "content_same": false
        },
        {
          "line": 754,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(Callee && \"apply_inst does not have a direct callee anymore\")",
          "new_text": null,
          "old_line_content": "    assert(Callee && \"apply_inst does not have a direct callee anymore\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 756,
          "old_api": "shouldOptimize",
          "new_api": null,
          "old_text": "Callee->shouldOptimize()",
          "new_text": null,
          "old_line_content": "    if (!Callee->shouldOptimize()) {",
          "new_line_content": "  for (auto AI : AppliesToInline) {",
          "content_same": false
        },
        {
          "line": 761,
          "old_api": "getArguments",
          "new_api": null,
          "old_text": "AI.getArguments()",
          "new_text": null,
          "old_line_content": "    for (const auto &Arg : AI.getArguments())",
          "new_line_content": "      continue;",
          "content_same": false
        },
        {
          "line": 633,
          "old_api": "get",
          "new_api": null,
          "old_text": "DA->get(Caller)",
          "new_text": null,
          "old_line_content": "  DominanceInfo *DT = DA->get(Caller);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 634,
          "old_api": "get",
          "new_api": null,
          "old_text": "LA->get(Caller)",
          "new_text": null,
          "old_line_content": "  SILLoopInfo *LI = LA->get(Caller);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 639,
          "old_api": "getSPA",
          "new_api": null,
          "old_text": "getSPA(Caller, LI)",
          "new_text": null,
          "old_line_content": "  ShortestPathAnalysis *SPA = getSPA(Caller, LI);",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 19,
      "total_additions": 69,
      "total_deletions": 68,
      "total_api_changes": 156
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 4,
        "api_related_lines": 156,
        "non_api_lines": 2,
        "non_api_line_numbers": [
          553,
          550
        ]
      }
    },
    "api_calls_before": 273,
    "api_calls_after": 275,
    "diff_info": {
      "added_lines": 4,
      "removed_lines": 0,
      "total_diff_lines": 16
    }
  }
}
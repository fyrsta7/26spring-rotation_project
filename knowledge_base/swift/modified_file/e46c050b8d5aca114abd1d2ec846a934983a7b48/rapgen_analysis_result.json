{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/swift/modified_file/e46c050b8d5aca114abd1d2ec846a934983a7b48",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/swift/modified_file/e46c050b8d5aca114abd1d2ec846a934983a7b48/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/swift/modified_file/e46c050b8d5aca114abd1d2ec846a934983a7b48/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/swift/modified_file/e46c050b8d5aca114abd1d2ec846a934983a7b48/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 4223,
          "old_api": "takeLast",
          "new_api": "setName",
          "old_text": "in.takeLast()",
          "new_text": "metatype->setName(\"Self\")",
          "old_line_content": "        llvm::Value *metatype = in.takeLast();",
          "new_line_content": "        metatype->setName(\"Self\");",
          "content_same": false
        },
        {
          "line": 4236,
          "old_api": "empty",
          "new_api": "takeLast",
          "old_text": "sourceValue.MetadataForDepths.empty()",
          "new_text": "in.takeLast()",
          "old_line_content": "      assert(!sourceValue.MetadataForDepths.empty());",
          "new_line_content": "        llvm::Value *metatype = in.takeLast();",
          "content_same": false
        },
        {
          "line": 4253,
          "old_api": "getMetadataForDepth",
          "new_api": "back",
          "old_text": "getMetadataForDepth(fulfillment.SourceIndex,\n                                          fulfillment.Depth)",
          "new_text": "sourceValue.MetadataForDepths.back()",
          "old_line_content": "      auto ancestor = getMetadataForDepth(fulfillment.SourceIndex,",
          "new_line_content": "        auto child = sourceValue.MetadataForDepths.back();",
          "content_same": false
        },
        {
          "line": 4257,
          "old_api": "std::make_pair(ancestor, ancestorDecl)",
          "new_api": "push_back",
          "old_text": "std::make_pair(ancestor, ancestorDecl)",
          "new_text": "sourceValue.MetadataForDepths.push_back(parent)",
          "old_line_content": "      return std::make_pair(ancestor, ancestorDecl);",
          "new_line_content": "        sourceValue.MetadataForDepths.push_back(parent);",
          "content_same": false
        },
        {
          "line": 4266,
          "old_api": "getSources",
          "new_api": "getMetadataForDepth",
          "old_text": "getSources()",
          "new_text": "getMetadataForDepth(fulfillment.SourceIndex,\n                                          fulfillment.Depth)",
          "old_line_content": "  for (const Source &source : getSources()) {",
          "new_line_content": "      auto ancestor = getMetadataForDepth(fulfillment.SourceIndex,",
          "content_same": false
        },
        {
          "line": 4280,
          "old_api": "size",
          "new_api": "emitSourceForParameters",
          "old_text": "getSources().size()",
          "new_text": "emitSourceForParameters(source, in, getParameter)",
          "old_line_content": "  assert(getSources().size() == 1);",
          "new_line_content": "    llvm::Value *value = emitSourceForParameters(source, in, getParameter);",
          "content_same": false
        },
        {
          "line": 4294,
          "old_api": "getSwiftModule",
          "new_api": "emplace_back",
          "old_text": "IGF.IGM.SILMod->getSwiftModule()",
          "new_text": "SourceValues.emplace_back()",
          "old_line_content": "      = ArchetypeBuilder::mapTypeIntoContext(IGF.IGM.SILMod->getSwiftModule(),",
          "new_line_content": "  SourceValues.emplace_back();",
          "content_same": false
        },
        {
          "line": 4304,
          "old_api": "FulfillmentKey",
          "new_api": "getAllDependentTypes",
          "old_text": "FulfillmentKey(depTy, nullptr)",
          "new_text": "getAllDependentTypes()",
          "old_line_content": "    auto it = Fulfillments.find(FulfillmentKey(depTy, nullptr));",
          "new_line_content": "  for (auto depTy : getAllDependentTypes()) {",
          "content_same": false
        },
        {
          "line": 4307,
          "old_api": "getAncestorForFulfillment",
          "new_api": "getSwiftModule",
          "old_text": "getAncestorForFulfillment(fulfillment)",
          "new_text": "IGF.IGM.SILMod->getSwiftModule()",
          "old_line_content": "      auto ancestorAndDecl = getAncestorForFulfillment(fulfillment);",
          "new_line_content": "      = ArchetypeBuilder::mapTypeIntoContext(IGF.IGM.SILMod->getSwiftModule(),",
          "content_same": false
        },
        {
          "line": 4320,
          "old_api": "requiresProtocolWitnessTable",
          "new_api": "getAncestorForFulfillment",
          "old_text": "requiresProtocolWitnessTable(protocol)",
          "new_text": "getAncestorForFulfillment(fulfillment)",
          "old_line_content": "      if (!requiresProtocolWitnessTable(protocol))",
          "new_line_content": "      auto ancestorAndDecl = getAncestorForFulfillment(fulfillment);",
          "content_same": false
        },
        {
          "line": 4327,
          "old_api": "end",
          "new_api": "claimNext",
          "old_text": "Fulfillments.end()",
          "new_text": "in.claimNext()",
          "old_line_content": "      if (it != Fulfillments.end()) {",
          "new_line_content": "      metadata = in.claimNext();",
          "content_same": false
        },
        {
          "line": 4340,
          "old_api": "bindArchetype",
          "new_api": "end",
          "old_text": "IGF.bindArchetype(contextTy, metadata, wtables)",
          "new_text": "Fulfillments.end()",
          "old_line_content": "    IGF.bindArchetype(contextTy, metadata, wtables);",
          "new_line_content": "      if (it != Fulfillments.end()) {",
          "content_same": false
        },
        {
          "line": 4349,
          "old_api": "emit",
          "new_api": "claimNext",
          "old_text": "EmitPolymorphicParameters(IGF, Fn).emit(in, getParameter)",
          "new_text": "in.claimNext()",
          "old_line_content": "  EmitPolymorphicParameters(IGF, Fn).emit(in, getParameter);",
          "new_line_content": "        wtable = in.claimNext();",
          "content_same": false
        },
        {
          "line": 4362,
          "old_api": "getDeclaredTypeInContext",
          "new_api": "emit",
          "old_text": "ntd->getDeclaredTypeInContext()->getCanonicalType()",
          "new_text": "EmitPolymorphicParameters(IGF, Fn).emit(in, getParameter)",
          "old_line_content": "  IGF.setUnscopedLocalTypeData(ntd->getDeclaredTypeInContext()->getCanonicalType(),",
          "new_line_content": "  EmitPolymorphicParameters(IGF, Fn).emit(in, getParameter);",
          "content_same": false
        },
        {
          "line": 4370,
          "old_api": "getArg",
          "new_api": "getGenericParamsOfContext",
          "old_text": "getArg(it, \"Self\")",
          "new_text": "ntd->getGenericParamsOfContext()",
          "old_line_content": "  llvm::Value *arg = getArg(it, \"Self\");",
          "new_line_content": "  if (!ntd->getGenericParamsOfContext())",
          "content_same": false
        },
        {
          "line": 4373,
          "old_api": "dyn_cast<UnboundGenericType>(abstractType)",
          "new_api": "emitForGenericValueWitness",
          "old_text": "dyn_cast<UnboundGenericType>(abstractType)",
          "new_text": "EmitPolymorphicParameters(IGF, ntd).emitForGenericValueWitness(selfMeta)",
          "old_line_content": "  if (auto ugt = dyn_cast<UnboundGenericType>(abstractType)) {",
          "new_line_content": "  EmitPolymorphicParameters(IGF, ntd).emitForGenericValueWitness(selfMeta);",
          "content_same": false
        },
        {
          "line": 4433,
          "old_api": "getParent",
          "new_api": "llvm_unreachable",
          "old_text": "type->getParent()",
          "new_text": "llvm_unreachable(\"cannot store l-value type directly\")",
          "old_line_content": "      if (auto parent = CanType(type->getParent()))",
          "new_line_content": "      llvm_unreachable(\"cannot store l-value type directly\");",
          "content_same": false
        },
        {
          "line": 4436,
          "old_api": "CanType",
          "new_api": "llvm_unreachable",
          "old_text": "CanType(arg)",
          "new_text": "llvm_unreachable(\"cannot store inout type directly\")",
          "old_line_content": "        visit(CanType(arg));",
          "new_line_content": "      llvm_unreachable(\"cannot store inout type directly\");",
          "content_same": false
        },
        {
          "line": 4468,
          "old_api": "visit",
          "new_api": "getReplacement",
          "old_text": "FindArchetypesForValueOperations(bindings).visit(type)",
          "new_text": "sub.getReplacement().findIf([&](Type t) -> bool {\n      if (auto archetype = dyn_cast<ArchetypeType>(t->getCanonicalType())) {\n        bindings.addArchetype(archetype);\n      }\n      return false;\n    })",
          "old_line_content": "  FindArchetypesForValueOperations(bindings).visit(type);",
          "new_line_content": "    sub.getReplacement().findIf([&](Type t) -> bool {",
          "content_same": false
        },
        {
          "line": 4491,
          "old_api": "CreateBitCast",
          "new_api": "getConformsTo",
          "old_text": "IGF.Builder.CreateBitCast(buffer, metatypePtrPtrTy)",
          "new_text": "type->getConformsTo()",
          "old_line_content": "  buffer = IGF.Builder.CreateBitCast(buffer, metatypePtrPtrTy);",
          "new_line_content": "    for (auto proto : type->getConformsTo())",
          "content_same": false
        },
        {
          "line": 4500,
          "old_api": "getPointerSize",
          "new_api": "empty",
          "old_text": "IGF.IGM.getPointerSize()",
          "new_text": "Types.empty()",
          "old_line_content": "                                                  IGF.IGM.getPointerSize());",
          "new_line_content": "  if (Types.empty()) return;",
          "content_same": false
        },
        {
          "line": 4504,
          "old_api": "CreateLoad",
          "new_api": "CreateBitCast",
          "old_text": "IGF.Builder.CreateLoad(slot)",
          "new_text": "IGF.Builder.CreateBitCast(buffer, metatypePtrPtrTy)",
          "old_line_content": "    llvm::Value *metatype = IGF.Builder.CreateLoad(slot);",
          "new_line_content": "  buffer = IGF.Builder.CreateBitCast(buffer, metatypePtrPtrTy);",
          "content_same": false
        },
        {
          "line": 4506,
          "old_api": "setMetadataRef",
          "new_api": "size",
          "old_text": "setMetadataRef(IGF, archetype, metatype)",
          "new_text": "Types.size()",
          "old_line_content": "    setMetadataRef(IGF, archetype, metatype);",
          "new_line_content": "  for (unsigned archetypeI = 0, e = Types.size(), metadataI = 0;",
          "content_same": false
        },
        {
          "line": 4513,
          "old_api": "CreateConstArrayGEP",
          "new_api": "getPointerSize",
          "old_text": "IGF.Builder.CreateConstArrayGEP(buffer, metadataI,\n                                                      IGF.IGM.getPointerSize())",
          "new_text": "IGF.IGM.getPointerSize()",
          "old_line_content": "      Address witnessSlot = IGF.Builder.CreateConstArrayGEP(buffer, metadataI,",
          "new_line_content": "                                                  IGF.IGM.getPointerSize());",
          "content_same": false
        },
        {
          "line": 4518,
          "old_api": "CreateLoad",
          "new_api": "getFullName",
          "old_text": "IGF.Builder.CreateLoad(witnessSlot)",
          "new_text": "archetype->getFullName()",
          "old_line_content": "      llvm::Value *witness = IGF.Builder.CreateLoad(witnessSlot);",
          "new_line_content": "    metatype->setName(archetype->getFullName());",
          "content_same": false
        },
        {
          "line": 4526,
          "old_api": "empty",
          "new_api": "CreateConstArrayGEP",
          "old_text": "Types.empty()",
          "new_text": "IGF.Builder.CreateConstArrayGEP(buffer, metadataI,\n                                                      IGF.IGM.getPointerSize())",
          "old_line_content": "  if (Types.empty()) return;",
          "new_line_content": "      Address witnessSlot = IGF.Builder.CreateConstArrayGEP(buffer, metadataI,",
          "content_same": false
        },
        {
          "line": 4539,
          "old_api": "getPointerSize",
          "new_api": "empty",
          "old_text": "IGF.IGM.getPointerSize()",
          "new_text": "Types.empty()",
          "old_line_content": "                                                  IGF.IGM.getPointerSize());",
          "new_line_content": "  if (Types.empty()) return;",
          "content_same": false
        },
        {
          "line": 4545,
          "old_api": "CanType",
          "new_api": "size",
          "old_text": "CanType(archetype)",
          "new_text": "Types.size()",
          "old_line_content": "      IGF.getLocalTypeData(CanType(archetype), LocalTypeData::Metatype);",
          "new_line_content": "  for (unsigned typeI = 0, typeE = Types.size(),",
          "content_same": false
        },
        {
          "line": 4551,
          "old_api": "getConformsTo",
          "new_api": "CreateConstArrayGEP",
          "old_text": "archetype->getConformsTo()",
          "new_text": "IGF.Builder.CreateConstArrayGEP(slot, metadataI,\n                                                  IGF.IGM.getPointerSize())",
          "old_line_content": "      auto protocol = archetype->getConformsTo()[protocolI];",
          "new_line_content": "    if (metadataI) slot = IGF.Builder.CreateConstArrayGEP(slot, metadataI,",
          "content_same": false
        },
        {
          "line": 4552,
          "old_api": "requiresProtocolWitnessTable",
          "new_api": "getPointerSize",
          "old_text": "requiresProtocolWitnessTable(protocol)",
          "new_text": "IGF.IGM.getPointerSize()",
          "old_line_content": "      if (!requiresProtocolWitnessTable(protocol))",
          "new_line_content": "                                                  IGF.IGM.getPointerSize());",
          "content_same": false
        },
        {
          "line": 4567,
          "old_api": "insert",
          "new_api": "CreateConstArrayGEP",
          "old_text": "Types.insert(type)",
          "new_text": "IGF.Builder.CreateConstArrayGEP(buffer, metadataI,\n                                                      IGF.IGM.getPointerSize())",
          "old_line_content": "  if (Types.insert(type))",
          "new_line_content": "      Address witnessSlot = IGF.Builder.CreateConstArrayGEP(buffer, metadataI,",
          "content_same": false
        },
        {
          "line": 4569,
          "old_api": "getNestedTypes",
          "new_api": "CreateBitCast",
          "old_text": "type->getNestedTypes()",
          "new_text": "IGF.Builder.CreateBitCast(witnessSlot,\n                                    IGF.IGM.WitnessTablePtrTy->getPointerTo())",
          "old_line_content": "    for (auto nested : type->getNestedTypes())",
          "new_line_content": "      witnessSlot = IGF.Builder.CreateBitCast(witnessSlot,",
          "content_same": false
        },
        {
          "line": 4570,
          "old_api": "getAsArchetype",
          "new_api": "getPointerTo",
          "old_text": "nested.second.getAsArchetype()",
          "new_text": "IGF.IGM.WitnessTablePtrTy->getPointerTo()",
          "old_line_content": "      if (auto assocArchetype = nested.second.getAsArchetype())",
          "new_line_content": "                                    IGF.IGM.WitnessTablePtrTy->getPointerTo());",
          "content_same": false
        },
        {
          "line": 4582,
          "old_api": "getTypeInfoForLowered",
          "new_api": "getNestedTypes",
          "old_text": "IGF.getTypeInfoForLowered(archetype)",
          "new_text": "type->getNestedTypes()",
          "old_line_content": "                                  IGF.getTypeInfoForLowered(archetype));",
          "new_line_content": "    for (auto nested : type->getNestedTypes())",
          "content_same": false
        },
        {
          "line": 4583,
          "old_api": "getStoredProtocols",
          "new_api": "getAsArchetype",
          "old_text": "archTI.getStoredProtocols()",
          "new_text": "nested.second.getAsArchetype()",
          "old_line_content": "  ProtocolPath path(IGF.IGM, archTI.getStoredProtocols(), proto);",
          "new_line_content": "      if (auto assocArchetype = nested.second.getAsArchetype())",
          "content_same": false
        },
        {
          "line": 4584,
          "old_api": "getWitnessTable",
          "new_api": "CanArchetypeType",
          "old_text": "archTI.getWitnessTable(IGF, archetype,\n                                       path.getOriginIndex())",
          "new_text": "CanArchetypeType(assocArchetype)",
          "old_line_content": "  auto wtable = archTI.getWitnessTable(IGF, archetype,",
          "new_line_content": "        addArchetype(CanArchetypeType(assocArchetype));",
          "content_same": false
        },
        {
          "line": 4596,
          "old_api": "getArchetype",
          "new_api": "getStoredProtocols",
          "old_text": "sub.getArchetype()->getConformsTo()",
          "new_text": "archTI.getStoredProtocols()",
          "old_line_content": "  auto archetypeProtos = sub.getArchetype()->getConformsTo();",
          "new_line_content": "  ProtocolPath path(IGF.IGM, archTI.getStoredProtocols(), proto);",
          "content_same": false
        },
        {
          "line": 4597,
          "old_api": "empty",
          "new_api": "getWitnessTable",
          "old_text": "archetypeProtos.empty()",
          "new_text": "archTI.getWitnessTable(IGF, archetype,\n                                       path.getOriginIndex())",
          "old_line_content": "  if (archetypeProtos.empty()) return;",
          "new_line_content": "  auto wtable = archTI.getWitnessTable(IGF, archetype,",
          "content_same": false
        },
        {
          "line": 4613,
          "old_api": "getOriginIndex",
          "new_api": "getReplacement",
          "old_text": "path.getOriginIndex()",
          "new_text": "sub.getReplacement()->getCanonicalType()",
          "old_line_content": "                                           path.getOriginIndex());",
          "new_line_content": "  CanType replType = sub.getReplacement()->getCanonicalType();",
          "content_same": false
        },
        {
          "line": 4624,
          "old_api": "getConformances",
          "new_api": "getStoredProtocols",
          "old_text": "sub.getConformances().size()",
          "new_text": "archTI.getStoredProtocols()",
          "old_line_content": "  assert(archetypeProtos.size() == sub.getConformances().size());",
          "new_line_content": "      ProtocolPath path(IGF.IGM, archTI.getStoredProtocols(), proto);",
          "content_same": false
        },
        {
          "line": 4625,
          "old_api": "size",
          "new_api": "getWitnessTable",
          "old_text": "archetypeProtos.size()",
          "new_text": "archTI.getWitnessTable(IGF, archetype,\n                                           path.getOriginIndex())",
          "old_line_content": "  for (unsigned j = 0, je = archetypeProtos.size(); j != je; ++j) {",
          "new_line_content": "      auto wtable = archTI.getWitnessTable(IGF, archetype,",
          "content_same": false
        },
        {
          "line": 4627,
          "old_api": "requiresProtocolWitnessTable",
          "new_api": "apply",
          "old_text": "requiresProtocolWitnessTable(proto)",
          "new_text": "path.apply(IGF, wtable)",
          "old_line_content": "    if (!requiresProtocolWitnessTable(proto))",
          "new_line_content": "      wtable = path.apply(IGF, wtable);",
          "content_same": false
        },
        {
          "line": 4635,
          "old_api": "push_back",
          "new_api": "getTypeInfoForUnlowered",
          "old_text": "out.push_back(wtable)",
          "new_text": "IGF.getTypeInfoForUnlowered(replType)",
          "old_line_content": "    out.push_back(wtable);",
          "new_line_content": "  auto &replTI = IGF.getTypeInfoForUnlowered(replType);",
          "content_same": false
        },
        {
          "line": 4645,
          "old_api": "getSwiftModule",
          "new_api": "getConformances",
          "old_text": "IGF.IGM.SILMod->getSwiftModule()",
          "new_text": "sub.getConformances()",
          "old_line_content": "      : PolymorphicConvention(polyFn, *IGF.IGM.SILMod->getSwiftModule()),",
          "new_line_content": "                                        *sub.getConformances()[j]);",
          "content_same": false
        },
        {
          "line": 4704,
          "old_api": "emitPolymorphicArgumentsWithInput",
          "new_api": "empty",
          "old_text": "emitPolymorphicArgumentsWithInput(IGF, origFnType, substInputType, subs, out)",
          "new_text": "substFnType->getParameters().empty()",
          "old_line_content": "  emitPolymorphicArgumentsWithInput(IGF, origFnType, substInputType, subs, out);",
          "new_line_content": "  if (!substFnType->getParameters().empty()) {",
          "content_same": false
        },
        {
          "line": 4712,
          "old_api": "emit",
          "new_api": "dyn_cast<MetatypeType>(substInputType)",
          "old_text": "EmitPolymorphicArguments(IGF, origFnType).emit(substInputType, subs, out)",
          "new_text": "dyn_cast<MetatypeType>(substInputType)",
          "old_line_content": "  EmitPolymorphicArguments(IGF, origFnType).emit(substInputType, subs, out);",
          "new_line_content": "    if (auto meta = dyn_cast<MetatypeType>(substInputType)) {",
          "content_same": false
        },
        {
          "line": 4742,
          "old_api": "FulfillmentKey",
          "new_api": "slice",
          "old_text": "FulfillmentKey(depTy, nullptr)",
          "new_text": "subs.slice(1)",
          "old_line_content": "    if (!Fulfillments.count(FulfillmentKey(depTy, nullptr))) {",
          "new_line_content": "    subs = subs.slice(1);",
          "content_same": false
        },
        {
          "line": 4748,
          "old_api": "empty",
          "new_api": "getRepresentativeArchetype",
          "old_text": "protocols.empty()",
          "new_text": "getRepresentativeArchetype(depTy)",
          "old_line_content": "    if (protocols.empty())",
          "new_line_content": "    auto type = getRepresentativeArchetype(depTy);",
          "content_same": false
        },
        {
          "line": 4767,
          "old_api": "getTypeInfoForLowered",
          "new_api": "size",
          "old_text": "getArchetypeInfo(IGF, archetype,\n                                        IGF.getTypeInfoForLowered(archetype))",
          "new_text": "protocols.size()",
          "old_line_content": "        auto &archTI = getArchetypeInfo(IGF, archetype,",
          "new_line_content": "    for (unsigned i = 0, e = protocols.size(); i != e; ++i) {",
          "content_same": false
        },
        {
          "line": 4771,
          "old_api": "getWitnessTable",
          "new_api": "requiresProtocolWitnessTable",
          "old_text": "archTI.getWitnessTable(IGF, archetype,\n                                             path.getOriginIndex())",
          "new_text": "requiresProtocolWitnessTable(protocol)",
          "old_line_content": "        auto wtable = archTI.getWitnessTable(IGF, archetype,",
          "new_line_content": "      if (!requiresProtocolWitnessTable(protocol))",
          "content_same": false
        },
        {
          "line": 4779,
          "old_api": "getProtocolInfo",
          "new_api": "dyn_cast<ArchetypeType>(argType)",
          "old_text": "IGF.IGM.getProtocolInfo(protocol)",
          "new_text": "dyn_cast<ArchetypeType>(argType)",
          "old_line_content": "      auto &protoI = IGF.IGM.getProtocolInfo(protocol);",
          "new_line_content": "      if (auto archetype = dyn_cast<ArchetypeType>(argType)) {",
          "content_same": false
        },
        {
          "line": 4780,
          "old_api": "getConformance",
          "new_api": "getTypeInfoForLowered",
          "old_text": "protoI.getConformance(IGF.IGM, argType, argTI, protocol,\n                                          *sub.getConformances()[i])",
          "new_text": "getArchetypeInfo(IGF, archetype,\n                                        IGF.getTypeInfoForLowered(archetype))",
          "old_line_content": "      auto &confI = protoI.getConformance(IGF.IGM, argType, argTI, protocol,",
          "new_line_content": "        auto &archTI = getArchetypeInfo(IGF, archetype,",
          "content_same": false
        },
        {
          "line": 4781,
          "old_api": "getConformances",
          "new_api": "getTypeInfoForLowered",
          "old_text": "sub.getConformances()",
          "new_text": "IGF.getTypeInfoForLowered(archetype)",
          "old_line_content": "                                          *sub.getConformances()[i]);",
          "new_line_content": "                                        IGF.getTypeInfoForLowered(archetype));",
          "content_same": false
        },
        {
          "line": 4783,
          "old_api": "add",
          "new_api": "getStoredProtocols",
          "old_text": "out.add(wtable)",
          "new_text": "archTI.getStoredProtocols()",
          "old_line_content": "      out.add(wtable);",
          "new_line_content": "        ProtocolPath path(IGF.IGM, archTI.getStoredProtocols(), protocol);",
          "content_same": false
        },
        {
          "line": 4786,
          "old_api": "empty",
          "new_api": "apply",
          "old_text": "subs.empty()",
          "new_text": "path.apply(IGF, wtable)",
          "old_line_content": "  assert(subs.empty()",
          "new_line_content": "        wtable = path.apply(IGF, wtable);",
          "content_same": false
        },
        {
          "line": 4803,
          "old_api": "add",
          "new_api": "getSources",
          "old_text": "out.add(self)",
          "new_text": "getSources()",
          "old_line_content": "      out.add(self);",
          "new_line_content": "  for (auto &source : getSources()) {",
          "content_same": false
        },
        {
          "line": 4825,
          "old_api": "getSources",
          "new_api": "llvm_unreachable",
          "old_text": "getSources()",
          "new_text": "llvm_unreachable(\"bad source kind\")",
          "old_line_content": "      for (auto &source : getSources())",
          "new_line_content": "    llvm_unreachable(\"bad source kind\");",
          "content_same": false
        },
        {
          "line": 4838,
          "old_api": "FulfillmentKey",
          "new_api": "getSources",
          "old_text": "FulfillmentKey(depTy, nullptr)",
          "new_text": "getSources()",
          "old_line_content": "        if (!Fulfillments.count(FulfillmentKey(depTy, nullptr)))",
          "new_line_content": "      for (auto &source : getSources())",
          "content_same": false
        },
        {
          "line": 4839,
          "old_api": "push_back",
          "new_api": "addEarlySource",
          "old_text": "out.push_back(IGM.TypeMetadataPtrTy)",
          "new_text": "addEarlySource(source, out)",
          "old_line_content": "          out.push_back(IGM.TypeMetadataPtrTy);",
          "new_line_content": "        addEarlySource(source, out);",
          "content_same": false
        },
        {
          "line": 4844,
          "old_api": "requiresProtocolWitnessTable",
          "new_api": "getRepresentativeArchetype",
          "old_text": "requiresProtocolWitnessTable(protocol)",
          "new_text": "getRepresentativeArchetype(depTy)",
          "old_line_content": "          if (!requiresProtocolWitnessTable(protocol))",
          "new_line_content": "        auto representative = getRepresentativeArchetype(depTy);",
          "content_same": false
        },
        {
          "line": 4866,
          "old_api": "getKind",
          "new_api": "getSources",
          "old_text": "source.getKind()",
          "new_text": "getSources()",
          "old_line_content": "      switch (source.getKind()) {",
          "new_line_content": "      for (auto &source : getSources()) {",
          "content_same": false
        },
        {
          "line": 4912,
          "old_api": "getInfo",
          "new_api": "dyn_cast<ArchetypeType>(srcType)",
          "old_text": "protoEntry.getInfo()",
          "new_text": "dyn_cast<ArchetypeType>(srcType)",
          "old_line_content": "  auto &protoI = protoEntry.getInfo();",
          "new_line_content": "  if (auto archetype = dyn_cast<ArchetypeType>(srcType)) {",
          "content_same": false
        },
        {
          "line": 4916,
          "old_api": "getTable",
          "new_api": "getStoredProtocols",
          "old_text": "conformanceI.getTable(IGF)",
          "new_text": "archTI.getStoredProtocols()",
          "old_line_content": "  return conformanceI.getTable(IGF);",
          "new_line_content": "    ProtocolPath path(IGF.IGM, archTI.getStoredProtocols(), proto);",
          "content_same": false
        },
        {
          "line": 4941,
          "old_api": "size",
          "new_api": "getAnyExistentialTypeProtocols",
          "old_text": "protocols.size()",
          "new_text": "destType.getAnyExistentialTypeProtocols(destProtocols)",
          "old_line_content": "  for (unsigned i = 0, e = protocols.size(); i < e; ++i) {",
          "new_line_content": "  destType.getAnyExistentialTypeProtocols(destProtocols);",
          "content_same": false
        },
        {
          "line": 4944,
          "old_api": "body",
          "new_api": "size",
          "old_text": "body(i, table)",
          "new_text": "conformances.size()",
          "old_line_content": "    body(i, table);",
          "new_line_content": "  assert(destProtocols.size() == conformances.size() &&",
          "content_same": false
        },
        {
          "line": 4953,
          "old_api": "isExistentialType",
          "new_api": "getTypeInfoForUnlowered",
          "old_text": "type.isExistentialType()",
          "new_text": "IGF.getTypeInfoForUnlowered(srcType)",
          "old_line_content": "  assert(type.isExistentialType());",
          "new_line_content": "  auto &srcTI = IGF.getTypeInfoForUnlowered(srcType);",
          "content_same": false
        },
        {
          "line": 4954,
          "old_api": "isClassExistentialType",
          "new_api": "size",
          "old_text": "type.isClassExistentialType()",
          "new_text": "protocols.size()",
          "old_line_content": "  assert(!type.isClassExistentialType());",
          "new_line_content": "  for (unsigned i = 0, e = protocols.size(); i < e; ++i) {",
          "content_same": false
        },
        {
          "line": 4955,
          "old_api": "getTypeInfo",
          "new_api": "getProtocolWitnessTable",
          "old_text": "IGF.getTypeInfo(type).as<OpaqueExistentialTypeInfo>()",
          "new_text": "getProtocolWitnessTable(IGF, srcType, srcTI,\n                                         protocols[i], witnessConformances[i])",
          "old_line_content": "  auto &ti = IGF.getTypeInfo(type).as<OpaqueExistentialTypeInfo>();",
          "new_line_content": "    auto table = getProtocolWitnessTable(IGF, srcType, srcTI,",
          "content_same": false
        },
        {
          "line": 4972,
          "old_api": "isClassExistentialType",
          "new_api": "projectExistentialBuffer",
          "old_text": "outType.isClassExistentialType()",
          "new_text": "layout.projectExistentialBuffer(IGF, container)",
          "old_line_content": "  assert(outType.isClassExistentialType() &&",
          "new_line_content": "  Address buffer = layout.projectExistentialBuffer(IGF, container);",
          "content_same": false
        },
        {
          "line": 4985,
          "old_api": "getStoredProtocols",
          "new_api": "isClassExistentialType",
          "old_text": "destTI.getStoredProtocols()",
          "new_text": "outType.isClassExistentialType()",
          "old_line_content": "                              destTI.getStoredProtocols(),",
          "new_line_content": "  assert(outType.isClassExistentialType() &&",
          "content_same": false
        },
        {
          "line": 4988,
          "old_api": "add",
          "new_api": "getTypeInfo",
          "old_text": "out.add(ptable)",
          "new_text": "IGF.getTypeInfo(outType).as<ClassExistentialTypeInfo>()",
          "old_line_content": "    out.add(ptable);",
          "new_line_content": "  auto &destTI = IGF.getTypeInfo(outType).as<ClassExistentialTypeInfo>();",
          "content_same": false
        },
        {
          "line": 5016,
          "old_api": "isa<FixedTypeInfo>(srcTI)",
          "new_api": "getTypeInfo",
          "old_text": "isa<FixedTypeInfo>(srcTI)",
          "new_text": "IGF.getTypeInfo(loweredSrcType)",
          "old_line_content": "  if (!isa<FixedTypeInfo>(srcTI)) {",
          "new_line_content": "  auto &srcTI = IGF.getTypeInfo(loweredSrcType);",
          "content_same": false
        },
        {
          "line": 5029,
          "old_api": "CreateStore",
          "new_api": "isa<FixedTypeInfo>(srcTI)",
          "old_text": "IGF.Builder.CreateStore(ptable, ptableSlot)",
          "new_text": "isa<FixedTypeInfo>(srcTI)",
          "old_line_content": "    IGF.Builder.CreateStore(ptable, ptableSlot);",
          "new_line_content": "  if (!isa<FixedTypeInfo>(srcTI)) {",
          "content_same": false
        },
        {
          "line": 5038,
          "old_api": "isKnownEmpty",
          "new_api": "getSwiftRValueType",
          "old_text": "srcTI.isKnownEmpty()",
          "new_text": "destType.getSwiftRValueType()",
          "old_line_content": "  if (srcTI.isKnownEmpty()) {",
          "new_line_content": "  forEachProtocolWitnessTable(IGF, formalSrcType, destType.getSwiftRValueType(),",
          "content_same": false
        },
        {
          "line": 5039,
          "old_api": "assert",
          "new_api": "getStoredProtocols",
          "old_text": "assert(packing == FixedPacking::OffsetZero)",
          "new_text": "destTI.getStoredProtocols()",
          "old_line_content": "    assert(packing == FixedPacking::OffsetZero);",
          "new_line_content": "                              destTI.getStoredProtocols(), conformances,",
          "content_same": false
        },
        {
          "line": 5048,
          "old_api": "emitAllocateBufferCall",
          "new_api": "projectExistentialBuffer",
          "old_text": "emitAllocateBufferCall(IGF, metadata, buffer)",
          "new_text": "destLayout.projectExistentialBuffer(IGF, dest)",
          "old_line_content": "    return Address(emitAllocateBufferCall(IGF, metadata, buffer),",
          "new_line_content": "  Address buffer = destLayout.projectExistentialBuffer(IGF, dest);",
          "content_same": false
        },
        {
          "line": 5052,
          "old_api": "emitAllocateBuffer",
          "new_api": "assert",
          "old_text": "emitAllocateBuffer(IGF, loweredSrcType,\n                              srcTI, packing, buffer)",
          "new_text": "assert(packing == FixedPacking::OffsetZero)",
          "old_line_content": "    return emitAllocateBuffer(IGF, loweredSrcType,",
          "new_line_content": "    assert(packing == FixedPacking::OffsetZero);",
          "content_same": false
        },
        {
          "line": 5065,
          "old_api": "add",
          "new_api": "emitAllocateBuffer",
          "old_text": "out.add(metatype)",
          "new_text": "emitAllocateBuffer(IGF, loweredSrcType,\n                              srcTI, packing, buffer)",
          "old_line_content": "  out.add(metatype);",
          "new_line_content": "    return emitAllocateBuffer(IGF, loweredSrcType,",
          "content_same": false
        },
        {
          "line": 5076,
          "old_api": "getStoredProtocols",
          "new_api": "outType.is<ExistentialMetatypeType>()",
          "old_text": "destTI.getStoredProtocols()",
          "new_text": "outType.is<ExistentialMetatypeType>()",
          "old_line_content": "                              destTI.getStoredProtocols(),",
          "new_line_content": "  assert(outType.is<ExistentialMetatypeType>());",
          "content_same": false
        },
        {
          "line": 5092,
          "old_api": "emitLoadOfOpaqueWitness",
          "new_api": "add",
          "old_text": "emitLoadOfOpaqueWitness(IGF, wtable, index)",
          "new_text": "out.add(ptable)",
          "old_line_content": "  llvm::Value *witness = emitLoadOfOpaqueWitness(IGF, wtable, index);",
          "new_line_content": "                                out.add(ptable);",
          "content_same": false
        },
        {
          "line": 5130,
          "old_api": "getLocalTypeData",
          "new_api": "getProtocolInfo",
          "old_text": "IGF.getLocalTypeData(archetype,\n                                               LocalTypeData::Metatype)",
          "new_text": "IGF.IGM.getProtocolInfo(fnProto)",
          "old_line_content": "  llvm::Value *metadata = IGF.getLocalTypeData(archetype,",
          "new_line_content": "                      ProtocolEntry(fnProto, IGF.IGM.getProtocolInfo(fnProto)),",
          "content_same": false
        },
        {
          "line": 5140,
          "old_api": "getTypeInfo",
          "new_api": "type.castTo<ArchetypeType>()",
          "old_text": "IGF.getTypeInfo(type).as<OpaqueExistentialTypeInfo>()",
          "new_text": "type.castTo<ArchetypeType>()",
          "old_line_content": "  auto &baseTI = IGF.getTypeInfo(type).as<OpaqueExistentialTypeInfo>();",
          "new_line_content": "  auto archetype = type.castTo<ArchetypeType>();",
          "content_same": false
        },
        {
          "line": 5143,
          "old_api": "getLayout",
          "new_api": "getLocalTypeData",
          "old_text": "baseTI.getLayout()",
          "new_text": "IGF.getLocalTypeData(archetype,\n                                               LocalTypeData::Metatype)",
          "old_line_content": "  auto existLayout = baseTI.getLayout();",
          "new_line_content": "  llvm::Value *metadata = IGF.getLocalTypeData(archetype,",
          "content_same": false
        },
        {
          "line": 5152,
          "old_api": "add",
          "new_api": "isClassExistentialType",
          "old_text": "out.add(dynamicType)",
          "new_text": "type.isClassExistentialType()",
          "old_line_content": "  out.add(dynamicType);",
          "new_line_content": "  assert(!type.isClassExistentialType());",
          "content_same": false
        },
        {
          "line": 5163,
          "old_api": "getTypeInfo",
          "new_api": "getGetDynamicTypeFn",
          "old_text": "IGF.getTypeInfo(existentialTy).as<ClassExistentialTypeInfo>()",
          "new_text": "IGF.IGM.getGetDynamicTypeFn()",
          "old_line_content": "  auto &baseTI = IGF.getTypeInfo(existentialTy).as<ClassExistentialTypeInfo>();",
          "new_line_content": "    IGF.Builder.CreateCall2(IGF.IGM.getGetDynamicTypeFn(),",
          "content_same": false
        },
        {
          "line": 5175,
          "old_api": "assert",
          "new_api": "isClassExistentialType",
          "old_text": "assert((IGF.IGM.ObjCInterop || repr != MetatypeRepresentation::ObjC) &&\n         \"Class metatypes should not have ObjC representation without runtime\")",
          "new_text": "existentialTy.isClassExistentialType()",
          "old_line_content": "  assert((IGF.IGM.ObjCInterop || repr != MetatypeRepresentation::ObjC) &&",
          "new_line_content": "  assert(existentialTy.isClassExistentialType());",
          "content_same": false
        },
        {
          "line": 5179,
          "old_api": "emitDynamicTypeOfOpaqueHeapObject",
          "new_api": "getWitnessTablesAndValue",
          "old_text": "emitDynamicTypeOfOpaqueHeapObject(IGF, instance)",
          "new_text": "baseTI.getWitnessTablesAndValue(value)",
          "old_line_content": "    auto dynamicType = emitDynamicTypeOfOpaqueHeapObject(IGF, instance);",
          "new_line_content": "  auto tablesAndValue = baseTI.getWitnessTablesAndValue(value);",
          "content_same": false
        },
        {
          "line": 5185,
          "old_api": "llvm_unreachable",
          "new_api": "getRepresentation",
          "old_text": "llvm_unreachable(\"Unknown metatype representation\")",
          "new_text": "metaTy->getRepresentation()",
          "old_line_content": "    llvm_unreachable(\"Unknown metatype representation\");",
          "new_line_content": "  auto repr = metaTy->getRepresentation();",
          "content_same": false
        },
        {
          "line": 5216,
          "old_api": "getNumStoredProtocols",
          "new_api": "cast<ArchetypeType>(_openedArchetype)",
          "old_text": "baseTI.getNumStoredProtocols()",
          "new_text": "cast<ArchetypeType>(_openedArchetype)",
          "old_line_content": "      for (unsigned i = 0, n = baseTI.getNumStoredProtocols(); i != n; ++i) {",
          "new_line_content": "  if (_openedArchetype) openedArchetype = cast<ArchetypeType>(_openedArchetype);",
          "content_same": false
        },
        {
          "line": 5218,
          "old_api": "CreateLoad",
          "new_api": "isExistentialType",
          "old_text": "IGF.Builder.CreateLoad(wtableAddr)",
          "new_text": "baseTy.isExistentialType()",
          "old_line_content": "        wtables.push_back(IGF.Builder.CreateLoad(wtableAddr));",
          "new_line_content": "  assert(baseTy.isExistentialType());",
          "content_same": false
        },
        {
          "line": 5221,
          "old_api": "bindArchetype",
          "new_api": "projectValue",
          "old_text": "IGF.bindArchetype(openedArchetype, metadata, wtables)",
          "new_text": "baseTI.projectValue(IGF, base)",
          "old_line_content": "      IGF.bindArchetype(openedArchetype, metadata, wtables);",
          "new_line_content": "    auto valueAddr = baseTI.projectValue(IGF, base);",
          "content_same": false
        },
        {
          "line": 5229,
          "old_api": "loadMetadataRef",
          "new_api": "getNumStoredProtocols",
          "old_text": "layout.loadMetadataRef(IGF, base)",
          "new_text": "baseTI.getNumStoredProtocols()",
          "old_line_content": "    llvm::Value *metadata = layout.loadMetadataRef(IGF, base);",
          "new_line_content": "      for (unsigned i = 0, n = baseTI.getNumStoredProtocols(); i != n; ++i) {",
          "content_same": false
        },
        {
          "line": 5230,
          "old_api": "projectExistentialBuffer",
          "new_api": "projectWitnessTable",
          "old_text": "layout.projectExistentialBuffer(IGF, base)",
          "new_text": "baseTI.projectWitnessTable(IGF, base, i)",
          "old_line_content": "    Address buffer = layout.projectExistentialBuffer(IGF, base);",
          "new_line_content": "        auto wtableAddr = baseTI.projectWitnessTable(IGF, base, i);",
          "content_same": false
        },
        {
          "line": 5231,
          "old_api": "emitProjectBufferCall",
          "new_api": "CreateLoad",
          "old_text": "emitProjectBufferCall(IGF, metadata, buffer)",
          "new_text": "IGF.Builder.CreateLoad(wtableAddr)",
          "old_line_content": "    llvm::Value *object = emitProjectBufferCall(IGF, metadata, buffer);",
          "new_line_content": "        wtables.push_back(IGF.Builder.CreateLoad(wtableAddr));",
          "content_same": false
        },
        {
          "line": 5240,
          "old_api": "bindArchetype",
          "new_api": "getLayout",
          "old_text": "IGF.bindArchetype(openedArchetype, metadata, wtables)",
          "new_text": "baseTI.getLayout()",
          "old_line_content": "      IGF.bindArchetype(openedArchetype, metadata, wtables);",
          "new_line_content": "    auto layout = baseTI.getLayout();",
          "content_same": false
        },
        {
          "line": 5243,
          "old_api": "Alignment",
          "new_api": "projectExistentialBuffer",
          "old_text": "Alignment(1)",
          "new_text": "layout.projectExistentialBuffer(IGF, base)",
          "old_line_content": "    return {Address(object, Alignment(1)), metadata};",
          "new_line_content": "    Address buffer = layout.projectExistentialBuffer(IGF, base);",
          "content_same": false
        },
        {
          "line": 5288,
          "old_api": "baseTy.is<ExistentialMetatypeType>()",
          "new_api": "getWitnessTablesAndValue",
          "old_text": "baseTy.is<ExistentialMetatypeType>()",
          "new_text": "baseTI.getWitnessTablesAndValue(base)",
          "old_line_content": "  assert(baseTy.is<ExistentialMetatypeType>());",
          "new_line_content": "  std::tie(wtables, value) = baseTI.getWitnessTablesAndValue(base);",
          "content_same": false
        },
        {
          "line": 5289,
          "old_api": "getTypeInfo",
          "new_api": "emitDynamicTypeOfOpaqueHeapObject",
          "old_text": "IGF.getTypeInfo(baseTy).as<ExistentialMetatypeTypeInfo>()",
          "new_text": "emitDynamicTypeOfOpaqueHeapObject(IGF, value)",
          "old_line_content": "  auto &baseTI = IGF.getTypeInfo(baseTy).as<ExistentialMetatypeTypeInfo>();",
          "new_line_content": "  auto metadata = emitDynamicTypeOfOpaqueHeapObject(IGF, value);",
          "content_same": false
        },
        {
          "line": 5301,
          "old_api": "cast<MetatypeType>(openedTy)",
          "new_api": "baseTy.is<ExistentialMetatypeType>()",
          "old_text": "cast<MetatypeType>(openedTy)",
          "new_text": "baseTy.is<ExistentialMetatypeType>()",
          "old_line_content": "  auto targetType = cast<MetatypeType>(openedTy);",
          "new_line_content": "  assert(baseTy.is<ExistentialMetatypeType>());",
          "content_same": false
        },
        {
          "line": 5311,
          "old_api": "getRepresentation",
          "new_api": "getWitnessTablesAndValue",
          "old_text": "existentialType->getRepresentation()",
          "new_text": "baseTI.getWitnessTablesAndValue(base)",
          "old_line_content": "    assert(existentialType->getRepresentation()",
          "new_line_content": "  std::tie(wtables, value) = baseTI.getWitnessTablesAndValue(base);",
          "content_same": false
        },
        {
          "line": 5320,
          "old_api": "getInstanceType",
          "new_api": "emitObjCMetadataRefForMetadata",
          "old_text": "existentialType.getInstanceType()",
          "new_text": "emitObjCMetadataRefForMetadata(IGF, value)",
          "old_line_content": "        cast<ExistentialMetatypeType>(existentialType.getInstanceType());",
          "new_line_content": "    metatype = emitObjCMetadataRefForMetadata(IGF, value);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 4609,
          "old_api": null,
          "new_api": "getArchetype",
          "old_text": null,
          "new_text": "sub.getArchetype()->getConformsTo()",
          "old_line_content": "        continue;",
          "new_line_content": "  auto archetypeProtos = sub.getArchetype()->getConformsTo();",
          "content_same": false
        },
        {
          "line": 4610,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "archetypeProtos.empty()",
          "old_line_content": "",
          "new_line_content": "  if (archetypeProtos.empty()) return;",
          "content_same": false
        },
        {
          "line": 5122,
          "old_api": null,
          "new_api": "getDecl",
          "old_text": null,
          "new_text": "member.getDecl()",
          "old_line_content": "}",
          "new_line_content": "  auto fn = cast<AbstractFunctionDecl>(member.getDecl());",
          "content_same": false
        },
        {
          "line": 5125,
          "old_api": null,
          "new_api": "getDeclContext",
          "old_text": null,
          "new_text": "fn->getDeclContext()",
          "old_line_content": "                                                     Address addr,",
          "new_line_content": "  ProtocolDecl *fnProto = cast<ProtocolDecl>(fn->getDeclContext());",
          "content_same": false
        },
        {
          "line": 4616,
          "old_api": null,
          "new_api": "dyn_cast<ArchetypeType>(replType)",
          "old_text": null,
          "new_text": "dyn_cast<ArchetypeType>(replType)",
          "old_line_content": "    }",
          "new_line_content": "  if (auto archetype = dyn_cast<ArchetypeType>(replType)) {",
          "content_same": false
        },
        {
          "line": 4617,
          "old_api": null,
          "new_api": "getTypeInfoForLowered",
          "old_text": null,
          "new_text": "getArchetypeInfo(IGF, archetype,\n                                    IGF.getTypeInfoForLowered(archetype))",
          "old_line_content": "    return;",
          "new_line_content": "    auto &archTI = getArchetypeInfo(IGF, archetype,",
          "content_same": false
        },
        {
          "line": 4618,
          "old_api": null,
          "new_api": "getTypeInfoForLowered",
          "old_text": null,
          "new_text": "IGF.getTypeInfoForLowered(archetype)",
          "old_line_content": "  }",
          "new_line_content": "                                    IGF.getTypeInfoForLowered(archetype));",
          "content_same": false
        },
        {
          "line": 5128,
          "old_api": null,
          "new_api": "getTypeInfoForUnlowered",
          "old_text": null,
          "new_text": "IGF.getTypeInfoForUnlowered(baseTy)",
          "old_line_content": "",
          "new_line_content": "  auto &baseTI = IGF.getTypeInfoForUnlowered(baseTy);",
          "content_same": false
        },
        {
          "line": 5129,
          "old_api": null,
          "new_api": "getProtocolInfo",
          "old_text": null,
          "new_text": "getProtocolWitnessTable(IGF, baseTy, baseTI,\n                      ProtocolEntry(fnProto, IGF.IGM.getProtocolInfo(fnProto)),\n                      conformance)",
          "old_line_content": "  // Acquire the archetype's static metadata.",
          "new_line_content": "  llvm::Value *wtable = getProtocolWitnessTable(IGF, baseTy, baseTI,",
          "content_same": false
        },
        {
          "line": 4621,
          "old_api": null,
          "new_api": "requiresProtocolWitnessTable",
          "old_text": null,
          "new_text": "requiresProtocolWitnessTable(proto)",
          "old_line_content": "  // conformances.",
          "new_line_content": "      if (!requiresProtocolWitnessTable(proto))",
          "content_same": false
        },
        {
          "line": 5134,
          "old_api": null,
          "new_api": "getWitnessMethodValue",
          "old_text": null,
          "new_text": "getWitnessMethodValue(IGF, fn, fnProto, wtable, nullptr, out)",
          "old_line_content": "}",
          "new_line_content": "  getWitnessMethodValue(IGF, fn, fnProto, wtable, nullptr, out);",
          "content_same": false
        },
        {
          "line": 4626,
          "old_api": null,
          "new_api": "getOriginIndex",
          "old_text": null,
          "new_text": "path.getOriginIndex()",
          "old_line_content": "    auto proto = archetypeProtos[j];",
          "new_line_content": "                                           path.getOriginIndex());",
          "content_same": false
        },
        {
          "line": 4628,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "out.push_back(wtable)",
          "old_line_content": "      continue;",
          "new_line_content": "      out.push_back(wtable);",
          "content_same": false
        },
        {
          "line": 5145,
          "old_api": null,
          "new_api": "getGetDynamicTypeFn",
          "old_text": null,
          "new_text": "IGF.IGM.getGetDynamicTypeFn()",
          "old_line_content": "",
          "new_line_content": "  return IGF.Builder.CreateCall2(IGF.IGM.getGetDynamicTypeFn(),",
          "content_same": false
        },
        {
          "line": 5146,
          "old_api": null,
          "new_api": "getAddress",
          "old_text": null,
          "new_text": "addr.getAddress()",
          "old_line_content": "  // Project the buffer and apply the 'typeof' value witness.",
          "new_line_content": "                                 addr.getAddress(), metadata);",
          "content_same": false
        },
        {
          "line": 4637,
          "old_api": null,
          "new_api": "getConformances",
          "old_text": null,
          "new_text": "sub.getConformances().size()",
          "old_line_content": "}",
          "new_line_content": "  assert(archetypeProtos.size() == sub.getConformances().size());",
          "content_same": false
        },
        {
          "line": 4638,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "archetypeProtos.size()",
          "old_line_content": "",
          "new_line_content": "  for (unsigned j = 0, je = archetypeProtos.size(); j != je; ++j) {",
          "content_same": false
        },
        {
          "line": 5151,
          "old_api": null,
          "new_api": "isExistentialType",
          "old_text": null,
          "new_text": "type.isExistentialType()",
          "old_line_content": "                            object, metadata);",
          "new_line_content": "  assert(type.isExistentialType());",
          "content_same": false
        },
        {
          "line": 4640,
          "old_api": null,
          "new_api": "requiresProtocolWitnessTable",
          "old_text": null,
          "new_text": "requiresProtocolWitnessTable(proto)",
          "old_line_content": "  class EmitPolymorphicArguments : public PolymorphicConvention {",
          "new_line_content": "    if (!requiresProtocolWitnessTable(proto))",
          "content_same": false
        },
        {
          "line": 5153,
          "old_api": null,
          "new_api": "getTypeInfo",
          "old_text": null,
          "new_text": "IGF.getTypeInfo(type).as<OpaqueExistentialTypeInfo>()",
          "old_line_content": "",
          "new_line_content": "  auto &baseTI = IGF.getTypeInfo(type).as<OpaqueExistentialTypeInfo>();",
          "content_same": false
        },
        {
          "line": 4643,
          "old_api": null,
          "new_api": "getProtocolInfo",
          "old_text": null,
          "new_text": "IGF.IGM.getProtocolInfo(proto)",
          "old_line_content": "    EmitPolymorphicArguments(IRGenFunction &IGF,",
          "new_line_content": "    auto &protoI = IGF.IGM.getProtocolInfo(proto);",
          "content_same": false
        },
        {
          "line": 4644,
          "old_api": null,
          "new_api": "getConformance",
          "old_text": null,
          "new_text": "protoI.getConformance(IGF.IGM, replType, replTI, proto,\n                                        *sub.getConformances()[j])",
          "old_line_content": "                             CanSILFunctionType polyFn)",
          "new_line_content": "    auto &confI = protoI.getConformance(IGF.IGM, replType, replTI, proto,",
          "content_same": false
        },
        {
          "line": 5156,
          "old_api": null,
          "new_api": "getLayout",
          "old_text": null,
          "new_text": "baseTI.getLayout()",
          "old_line_content": "}",
          "new_line_content": "  auto existLayout = baseTI.getLayout();",
          "content_same": false
        },
        {
          "line": 5157,
          "old_api": null,
          "new_api": "loadMetadataRef",
          "old_text": null,
          "new_text": "existLayout.loadMetadataRef(IGF, addr)",
          "old_line_content": "",
          "new_line_content": "  llvm::Value *metadata = existLayout.loadMetadataRef(IGF, addr);",
          "content_same": false
        },
        {
          "line": 4647,
          "old_api": null,
          "new_api": "getTable",
          "old_text": null,
          "new_text": "confI.getTable(IGF)",
          "old_line_content": "",
          "new_line_content": "    llvm::Value *wtable = confI.getTable(IGF);",
          "content_same": false
        },
        {
          "line": 4648,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "out.push_back(wtable)",
          "old_line_content": "    void emit(CanType substInputType, ArrayRef<Substitution> subs,",
          "new_line_content": "    out.push_back(wtable);",
          "content_same": false
        },
        {
          "line": 5160,
          "old_api": null,
          "new_api": "projectExistentialBuffer",
          "old_text": null,
          "new_text": "existLayout.projectExistentialBuffer(IGF, addr)",
          "old_line_content": "                                           SILType existentialTy,",
          "new_line_content": "  Address buffer = existLayout.projectExistentialBuffer(IGF, addr);",
          "content_same": false
        },
        {
          "line": 5161,
          "old_api": null,
          "new_api": "emitProjectBufferCall",
          "old_text": null,
          "new_text": "emitProjectBufferCall(IGF, metadata, buffer)",
          "old_line_content": "                                           Explosion &out) {",
          "new_line_content": "  llvm::Value *object = emitProjectBufferCall(IGF, metadata, buffer);",
          "content_same": false
        },
        {
          "line": 5165,
          "old_api": null,
          "new_api": "add",
          "old_text": null,
          "new_text": "out.add(dynamicType)",
          "old_line_content": "  // Extract the class instance pointer.",
          "new_line_content": "  out.add(dynamicType);",
          "content_same": false
        },
        {
          "line": 5168,
          "old_api": null,
          "new_api": "emitLoadOfTables",
          "old_text": null,
          "new_text": "baseTI.emitLoadOfTables(IGF, addr, out)",
          "old_line_content": "  // Get the type metadata.",
          "new_line_content": "  baseTI.emitLoadOfTables(IGF, addr, out);",
          "content_same": false
        },
        {
          "line": 4658,
          "old_api": null,
          "new_api": "getSwiftModule",
          "old_text": null,
          "new_text": "IGF.IGM.SILMod->getSwiftModule()",
          "old_line_content": "          continue;",
          "new_line_content": "      : PolymorphicConvention(polyFn, *IGF.IGM.SILMod->getSwiftModule()),",
          "content_same": false
        },
        {
          "line": 5176,
          "old_api": null,
          "new_api": "getTypeInfo",
          "old_text": null,
          "new_text": "IGF.getTypeInfo(existentialTy).as<ClassExistentialTypeInfo>()",
          "old_line_content": "         \"Class metatypes should not have ObjC representation without runtime\");",
          "new_line_content": "  auto &baseTI = IGF.getTypeInfo(existentialTy).as<ClassExistentialTypeInfo>();",
          "content_same": false
        },
        {
          "line": 4666,
          "old_api": null,
          "new_api": "getSources",
          "old_text": null,
          "new_text": "getSources()",
          "old_line_content": "        // Witness 'Self' argument(s) are added as a special case in",
          "new_line_content": "      for (auto &source : getSources()) {",
          "content_same": false
        },
        {
          "line": 4667,
          "old_api": null,
          "new_api": "getKind",
          "old_text": null,
          "new_text": "source.getKind()",
          "old_line_content": "        // EmitPolymorphicArguments::emit.",
          "new_line_content": "        switch (source.getKind()) {",
          "content_same": false
        },
        {
          "line": 5184,
          "old_api": null,
          "new_api": "metatypeTy.castTo<ExistentialMetatypeType>()",
          "old_text": null,
          "new_text": "metatypeTy.castTo<ExistentialMetatypeType>()",
          "old_line_content": "  } else {",
          "new_line_content": "  auto metaTy = metatypeTy.castTo<ExistentialMetatypeType>();",
          "content_same": false
        },
        {
          "line": 5186,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(repr != MetatypeRepresentation::Thin &&\n         \"Class metatypes should have a thin representation\")",
          "old_line_content": "  }",
          "new_line_content": "  assert(repr != MetatypeRepresentation::Thin &&",
          "content_same": false
        },
        {
          "line": 4675,
          "old_api": null,
          "new_api": "emitTypeMetadataRef",
          "old_text": null,
          "new_text": "IGF.emitTypeMetadataRef(substInputType)",
          "old_line_content": "        }",
          "new_line_content": "          out.add(IGF.emitTypeMetadataRef(substInputType));",
          "content_same": false
        },
        {
          "line": 5188,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert((IGF.IGM.ObjCInterop || repr != MetatypeRepresentation::ObjC) &&\n         \"Class metatypes should not have ObjC representation without runtime\")",
          "old_line_content": "  // Get the witness tables.",
          "new_line_content": "  assert((IGF.IGM.ObjCInterop || repr != MetatypeRepresentation::ObjC) &&",
          "content_same": false
        },
        {
          "line": 5192,
          "old_api": null,
          "new_api": "emitDynamicTypeOfOpaqueHeapObject",
          "old_text": null,
          "new_text": "emitDynamicTypeOfOpaqueHeapObject(IGF, instance)",
          "old_line_content": "/// Emit a projection from an existential container to its concrete value",
          "new_line_content": "    auto dynamicType = emitDynamicTypeOfOpaqueHeapObject(IGF, instance);",
          "content_same": false
        },
        {
          "line": 5193,
          "old_api": null,
          "new_api": "add",
          "old_text": null,
          "new_text": "out.add(dynamicType)",
          "old_line_content": "/// buffer with the type metadata for the contained value.",
          "new_line_content": "    out.add(dynamicType);",
          "content_same": false
        },
        {
          "line": 5195,
          "old_api": null,
          "new_api": "emitHeapMetadataRefForUnknownHeapObject",
          "old_text": null,
          "new_text": "emitHeapMetadataRefForUnknownHeapObject(IGF, instance)",
          "old_line_content": "/// \\param _openedArchetype When non-null, the opened archetype",
          "new_line_content": "    auto dynamicType = emitHeapMetadataRefForUnknownHeapObject(IGF, instance);",
          "content_same": false
        },
        {
          "line": 5196,
          "old_api": null,
          "new_api": "add",
          "old_text": null,
          "new_text": "out.add(dynamicType)",
          "old_line_content": "/// that captures the details of this existential.",
          "new_line_content": "    out.add(dynamicType);",
          "content_same": false
        },
        {
          "line": 5198,
          "old_api": null,
          "new_api": "llvm_unreachable",
          "old_text": null,
          "new_text": "llvm_unreachable(\"Unknown metatype representation\")",
          "old_line_content": "irgen::emitIndirectExistentialProjectionWithMetadata(IRGenFunction &IGF,",
          "new_line_content": "    llvm_unreachable(\"Unknown metatype representation\");",
          "content_same": false
        },
        {
          "line": 4689,
          "old_api": null,
          "new_api": "llvm_unreachable",
          "old_text": null,
          "new_text": "llvm_unreachable(\"bad source kind!\")",
          "old_line_content": "  // we're not going to try to access this anyway.",
          "new_line_content": "        llvm_unreachable(\"bad source kind!\");",
          "content_same": false
        },
        {
          "line": 5202,
          "old_api": null,
          "new_api": "add",
          "old_text": null,
          "new_text": "out.add(tablesAndValue.first)",
          "old_line_content": "  CanArchetypeType openedArchetype;",
          "new_line_content": "  out.add(tablesAndValue.first);",
          "content_same": false
        },
        {
          "line": 4705,
          "old_api": null,
          "new_api": "back",
          "old_text": null,
          "new_text": "substFnType->getParameters().back()",
          "old_line_content": "}",
          "new_line_content": "    auto selfParam = substFnType->getParameters().back();",
          "content_same": false
        },
        {
          "line": 4706,
          "old_api": null,
          "new_api": "getType",
          "old_text": null,
          "new_text": "selfParam.getType()",
          "old_line_content": "",
          "new_line_content": "    substInputType = selfParam.getType();",
          "content_same": false
        },
        {
          "line": 5219,
          "old_api": null,
          "new_api": "isClassExistentialType",
          "old_text": null,
          "new_text": "baseTy.isClassExistentialType()",
          "old_line_content": "      }",
          "new_line_content": "  if (baseTy.isClassExistentialType()) {",
          "content_same": false
        },
        {
          "line": 5220,
          "old_api": null,
          "new_api": "getTypeInfo",
          "old_text": null,
          "new_text": "IGF.getTypeInfo(baseTy).as<ClassExistentialTypeInfo>()",
          "old_line_content": "",
          "new_line_content": "    auto &baseTI = IGF.getTypeInfo(baseTy).as<ClassExistentialTypeInfo>();",
          "content_same": false
        },
        {
          "line": 5222,
          "old_api": null,
          "new_api": "CreateLoad",
          "old_text": null,
          "new_text": "IGF.Builder.CreateLoad(valueAddr)",
          "old_line_content": "    }",
          "new_line_content": "    auto value = IGF.Builder.CreateLoad(valueAddr);",
          "content_same": false
        },
        {
          "line": 5223,
          "old_api": null,
          "new_api": "emitDynamicTypeOfOpaqueHeapObject",
          "old_text": null,
          "new_text": "emitDynamicTypeOfOpaqueHeapObject(IGF, value)",
          "old_line_content": "",
          "new_line_content": "    auto metadata = emitDynamicTypeOfOpaqueHeapObject(IGF, value);",
          "content_same": false
        },
        {
          "line": 4713,
          "old_api": null,
          "new_api": "isIndirect",
          "old_text": null,
          "new_text": "selfParam.isIndirect()",
          "old_line_content": "}",
          "new_line_content": "      if (!selfParam.isIndirect())",
          "content_same": false
        },
        {
          "line": 4714,
          "old_api": null,
          "new_api": "getInstanceType",
          "old_text": null,
          "new_text": "meta.getInstanceType()",
          "old_line_content": "",
          "new_line_content": "        substInputType = meta.getInstanceType();",
          "content_same": false
        },
        {
          "line": 4717,
          "old_api": null,
          "new_api": "emitPolymorphicArgumentsWithInput",
          "old_text": null,
          "new_text": "emitPolymorphicArgumentsWithInput(IGF, origFnType, substInputType, subs, out)",
          "old_line_content": "                                    Explosion &out) {",
          "new_line_content": "  emitPolymorphicArgumentsWithInput(IGF, origFnType, substInputType, subs, out);",
          "content_same": false
        },
        {
          "line": 5234,
          "old_api": null,
          "new_api": "bindArchetype",
          "old_text": null,
          "new_text": "IGF.bindArchetype(openedArchetype, metadata, wtables)",
          "old_line_content": "    // witness tables.",
          "new_line_content": "      IGF.bindArchetype(openedArchetype, metadata, wtables);",
          "content_same": false
        },
        {
          "line": 5111,
          "old_api": null,
          "new_api": "add",
          "old_text": null,
          "new_text": "out.add(witness)",
          "old_line_content": "  // The protocol we're calling on.",
          "new_line_content": "  out.add(witness);",
          "content_same": false
        },
        {
          "line": 4725,
          "old_api": null,
          "new_api": "emit",
          "old_text": null,
          "new_text": "EmitPolymorphicArguments(IGF, origFnType).emit(substInputType, subs, out)",
          "old_line_content": "  // to their parent.",
          "new_line_content": "  EmitPolymorphicArguments(IGF, origFnType).emit(substInputType, subs, out);",
          "content_same": false
        },
        {
          "line": 5239,
          "old_api": null,
          "new_api": "getTypeInfo",
          "old_text": null,
          "new_text": "IGF.getTypeInfo(baseTy).as<OpaqueExistentialTypeInfo>()",
          "old_line_content": "      }",
          "new_line_content": "    auto &baseTI = IGF.getTypeInfo(baseTy).as<OpaqueExistentialTypeInfo>();",
          "content_same": false
        },
        {
          "line": 5242,
          "old_api": null,
          "new_api": "loadMetadataRef",
          "old_text": null,
          "new_text": "layout.loadMetadataRef(IGF, base)",
          "old_line_content": "",
          "new_line_content": "    llvm::Value *metadata = layout.loadMetadataRef(IGF, base);",
          "content_same": false
        },
        {
          "line": 4732,
          "old_api": null,
          "new_api": "emitEarlySources",
          "old_text": null,
          "new_text": "emitEarlySources(substInputType, out)",
          "old_line_content": "",
          "new_line_content": "  emitEarlySources(substInputType, out);",
          "content_same": false
        },
        {
          "line": 5244,
          "old_api": null,
          "new_api": "emitProjectBufferCall",
          "old_text": null,
          "new_text": "emitProjectBufferCall(IGF, metadata, buffer)",
          "old_line_content": "  }",
          "new_line_content": "    llvm::Value *object = emitProjectBufferCall(IGF, metadata, buffer);",
          "content_same": false
        },
        {
          "line": 4222,
          "old_api": null,
          "new_api": "takeLast",
          "old_text": null,
          "new_text": "in.takeLast()",
          "old_line_content": "        // metatype.",
          "new_line_content": "        llvm::Value *metatype = in.takeLast();",
          "content_same": false
        },
        {
          "line": 4226,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "FnType->getParameters().size()",
          "old_line_content": "      }",
          "new_line_content": "        CanType argTy = getArgTypeInContext(FnType->getParameters().size() - 1);",
          "content_same": false
        },
        {
          "line": 4227,
          "old_api": null,
          "new_api": "setUnscopedLocalTypeData",
          "old_text": null,
          "new_text": "IGF.setUnscopedLocalTypeData(argTy, LocalTypeData::Metatype, metatype)",
          "old_line_content": "      }",
          "new_line_content": "        IGF.setUnscopedLocalTypeData(argTy, LocalTypeData::Metatype, metatype);",
          "content_same": false
        },
        {
          "line": 4739,
          "old_api": null,
          "new_api": "getAllDependentTypes",
          "old_text": null,
          "new_text": "getAllDependentTypes()",
          "old_line_content": "      continue;",
          "new_line_content": "  for (auto depTy : getAllDependentTypes()) {",
          "content_same": false
        },
        {
          "line": 4741,
          "old_api": null,
          "new_api": "front",
          "old_text": null,
          "new_text": "subs.front()",
          "old_line_content": "    // Add the metadata reference unless it's fulfilled.",
          "new_line_content": "    const Substitution &sub = subs.front();",
          "content_same": false
        },
        {
          "line": 5250,
          "old_api": null,
          "new_api": "getNumTables",
          "old_text": null,
          "new_text": "layout.getNumTables()",
          "old_line_content": "                                               Address base,",
          "new_line_content": "      for (unsigned i = 0, n = layout.getNumTables(); i != n; ++i) {",
          "content_same": false
        },
        {
          "line": 5251,
          "old_api": null,
          "new_api": "loadWitnessTable",
          "old_text": null,
          "new_text": "layout.loadWitnessTable(IGF, base, i)",
          "old_line_content": "                                               SILType baseTy,",
          "new_line_content": "        wtables.push_back(layout.loadWitnessTable(IGF, base, i));",
          "content_same": false
        },
        {
          "line": 4744,
          "old_api": null,
          "new_api": "getReplacement",
          "old_text": null,
          "new_text": "sub.getReplacement()->getCanonicalType()",
          "old_line_content": "    }",
          "new_line_content": "    CanType argType = sub.getReplacement()->getCanonicalType();",
          "content_same": false
        },
        {
          "line": 5253,
          "old_api": null,
          "new_api": "bindArchetype",
          "old_text": null,
          "new_text": "IGF.bindArchetype(openedArchetype, metadata, wtables)",
          "old_line_content": "{",
          "new_line_content": "      IGF.bindArchetype(openedArchetype, metadata, wtables);",
          "content_same": false
        },
        {
          "line": 5256,
          "old_api": null,
          "new_api": "Alignment",
          "old_text": null,
          "new_text": "Alignment(1)",
          "old_line_content": "    .first;",
          "new_line_content": "    return {Address(object, Alignment(1)), metadata};",
          "content_same": false
        },
        {
          "line": 4237,
          "old_api": null,
          "new_api": "setName",
          "old_text": null,
          "new_text": "metatype->setName(\"Self\")",
          "old_line_content": "",
          "new_line_content": "        metatype->setName(\"Self\");",
          "content_same": false
        },
        {
          "line": 4749,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(type && \"no potential archetype for dependent type?!\")",
          "old_line_content": "      continue;",
          "new_line_content": "    assert(type && \"no potential archetype for dependent type?!\");",
          "content_same": false
        },
        {
          "line": 4750,
          "old_api": null,
          "new_api": "getAsArchetype",
          "old_text": null,
          "new_text": "type.getAsArchetype()",
          "old_line_content": "",
          "new_line_content": "    auto arch = type.getAsArchetype();",
          "content_same": false
        },
        {
          "line": 4241,
          "old_api": null,
          "new_api": "llvm_unreachable",
          "old_text": null,
          "new_text": "llvm_unreachable(\"bad source kind!\")",
          "old_line_content": "        auto childDecl =",
          "new_line_content": "      llvm_unreachable(\"bad source kind!\");",
          "content_same": false
        },
        {
          "line": 4755,
          "old_api": null,
          "new_api": "FulfillmentKey",
          "old_text": null,
          "new_text": "FulfillmentKey(depTy, nullptr)",
          "old_line_content": "      auto protocol = protocols[i];",
          "new_line_content": "    if (!Fulfillments.count(FulfillmentKey(depTy, nullptr))) {",
          "content_same": false
        },
        {
          "line": 4756,
          "old_api": null,
          "new_api": "emitTypeMetadataRef",
          "old_text": null,
          "new_text": "IGF.emitTypeMetadataRef(argType)",
          "old_line_content": "",
          "new_line_content": "      out.add(IGF.emitTypeMetadataRef(argType));",
          "content_same": false
        },
        {
          "line": 5267,
          "old_api": null,
          "new_api": "emitIndirectExistentialProjectionWithMetadata",
          "old_text": null,
          "new_text": "emitIndirectExistentialProjectionWithMetadata(IGF, base, baseTy,\n                                                       openedArchetype)",
          "old_line_content": "",
          "new_line_content": "  return emitIndirectExistentialProjectionWithMetadata(IGF, base, baseTy,",
          "content_same": false
        },
        {
          "line": 4247,
          "old_api": null,
          "new_api": "getSources",
          "old_text": null,
          "new_text": "getSources()",
          "old_line_content": "    }",
          "new_line_content": "      auto &source = getSources()[sourceIndex];",
          "content_same": false
        },
        {
          "line": 4760,
          "old_api": null,
          "new_api": "getConformsTo",
          "old_text": null,
          "new_text": "arch->getConformsTo()",
          "old_line_content": "",
          "new_line_content": "    auto protocols = arch->getConformsTo();",
          "content_same": false
        },
        {
          "line": 4249,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "sourceValue.MetadataForDepths.empty()",
          "old_line_content": "    /// Produce the base metadata value and declaration for the given",
          "new_line_content": "      assert(!sourceValue.MetadataForDepths.empty());",
          "content_same": false
        },
        {
          "line": 4761,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "protocols.empty()",
          "old_line_content": "      // Skip this if it's fulfilled by the source.",
          "new_line_content": "    if (protocols.empty())",
          "content_same": false
        },
        {
          "line": 4252,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "sourceValue.MetadataForDepths.size()",
          "old_line_content": "    getAncestorForFulfillment(const Fulfillment &fulfillment) {",
          "new_line_content": "      while (depth >= sourceValue.MetadataForDepths.size()) {",
          "content_same": false
        },
        {
          "line": 4764,
          "old_api": null,
          "new_api": "getTypeInfoForUnlowered",
          "old_text": null,
          "new_text": "IGF.getTypeInfoForUnlowered(argType)",
          "old_line_content": "",
          "new_line_content": "    auto &argTI = IGF.getTypeInfoForUnlowered(argType);",
          "content_same": false
        },
        {
          "line": 5278,
          "old_api": null,
          "new_api": "isClassExistentialType",
          "old_text": null,
          "new_text": "baseTy.isClassExistentialType()",
          "old_line_content": "",
          "new_line_content": "  assert(baseTy.isClassExistentialType());",
          "content_same": false
        },
        {
          "line": 4255,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "sourceValue.MetadataForDepths.size()",
          "old_line_content": "      auto ancestorDecl =",
          "new_line_content": "          source.TypesForDepths[sourceValue.MetadataForDepths.size()];",
          "content_same": false
        },
        {
          "line": 4256,
          "old_api": null,
          "new_api": "emitParentMetadataRef",
          "old_text": null,
          "new_text": "emitParentMetadataRef(IGF, childDecl, child)",
          "old_line_content": "        Sources[fulfillment.SourceIndex].TypesForDepths[fulfillment.Depth];",
          "new_line_content": "        auto parent = emitParentMetadataRef(IGF, childDecl, child);",
          "content_same": false
        },
        {
          "line": 5279,
          "old_api": null,
          "new_api": "getTypeInfo",
          "old_text": null,
          "new_text": "IGF.getTypeInfo(baseTy).as<ClassExistentialTypeInfo>()",
          "old_line_content": "  return value;",
          "new_line_content": "  auto &baseTI = IGF.getTypeInfo(baseTy).as<ClassExistentialTypeInfo>();",
          "content_same": false
        },
        {
          "line": 5282,
          "old_api": null,
          "new_api": "getValue",
          "old_text": null,
          "new_text": "baseTI.getValue(IGF, base)",
          "old_line_content": "/// Extract the metatype pointer from a class existential value.",
          "new_line_content": "    return baseTI.getValue(IGF, base);",
          "content_same": false
        },
        {
          "line": 4775,
          "old_api": null,
          "new_api": "FulfillmentKey",
          "old_text": null,
          "new_text": "FulfillmentKey(depTy, protocol)",
          "old_line_content": "        continue;",
          "new_line_content": "      if (Fulfillments.count(FulfillmentKey(depTy, protocol)))",
          "content_same": false
        },
        {
          "line": 5290,
          "old_api": null,
          "new_api": "bindArchetype",
          "old_text": null,
          "new_text": "IGF.bindArchetype(openedArchetype, metadata, wtables)",
          "old_line_content": "",
          "new_line_content": "  IGF.bindArchetype(openedArchetype, metadata, wtables);",
          "content_same": false
        },
        {
          "line": 4270,
          "old_api": null,
          "new_api": "std::make_pair(ancestor, ancestorDecl)",
          "old_text": null,
          "new_text": "std::make_pair(ancestor, ancestorDecl)",
          "old_line_content": "  }",
          "new_line_content": "      return std::make_pair(ancestor, ancestorDecl);",
          "content_same": false
        },
        {
          "line": 4784,
          "old_api": null,
          "new_api": "getWitnessTable",
          "old_text": null,
          "new_text": "archTI.getWitnessTable(IGF, archetype,\n                                             path.getOriginIndex())",
          "old_line_content": "    }",
          "new_line_content": "        auto wtable = archTI.getWitnessTable(IGF, archetype,",
          "content_same": false
        },
        {
          "line": 4785,
          "old_api": null,
          "new_api": "getOriginIndex",
          "old_text": null,
          "new_text": "path.getOriginIndex()",
          "old_line_content": "  }",
          "new_line_content": "                                             path.getOriginIndex());",
          "content_same": false
        },
        {
          "line": 4787,
          "old_api": null,
          "new_api": "add",
          "old_text": null,
          "new_text": "out.add(wtable)",
          "old_line_content": "         && \"did not use all substitutions?!\");",
          "new_line_content": "        out.add(wtable);",
          "content_same": false
        },
        {
          "line": 4278,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "getSources().size()",
          "old_line_content": "EmitPolymorphicParameters::emitForGenericValueWitness(llvm::Value *selfMeta) {",
          "new_line_content": "  SourceValues.reserve(getSources().size());",
          "content_same": false
        },
        {
          "line": 4279,
          "old_api": null,
          "new_api": "getSources",
          "old_text": null,
          "new_text": "getSources()",
          "old_line_content": "  // We get the source metadata verbatim from the value witness signature.",
          "new_line_content": "  for (const Source &source : getSources()) {",
          "content_same": false
        },
        {
          "line": 4792,
          "old_api": null,
          "new_api": "getProtocolInfo",
          "old_text": null,
          "new_text": "IGF.IGM.getProtocolInfo(protocol)",
          "old_line_content": "    case SourceKind::Metadata:",
          "new_line_content": "      auto &protoI = IGF.IGM.getProtocolInfo(protocol);",
          "content_same": false
        },
        {
          "line": 4793,
          "old_api": null,
          "new_api": "getConformance",
          "old_text": null,
          "new_text": "protoI.getConformance(IGF.IGM, argType, argTI, protocol,\n                                          *sub.getConformances()[i])",
          "old_line_content": "    case SourceKind::ClassPointer:",
          "new_line_content": "      auto &confI = protoI.getConformance(IGF.IGM, argType, argTI, protocol,",
          "content_same": false
        },
        {
          "line": 4794,
          "old_api": null,
          "new_api": "getConformances",
          "old_text": null,
          "new_text": "sub.getConformances()",
          "old_line_content": "      // Already accounted for in the arguments.",
          "new_line_content": "                                          *sub.getConformances()[i]);",
          "content_same": false
        },
        {
          "line": 4795,
          "old_api": null,
          "new_api": "getTable",
          "old_text": null,
          "new_text": "confI.getTable(IGF)",
          "old_line_content": "      continue;",
          "new_line_content": "      llvm::Value *wtable = confI.getTable(IGF);",
          "content_same": false
        },
        {
          "line": 4796,
          "old_api": null,
          "new_api": "add",
          "old_text": null,
          "new_text": "out.add(wtable)",
          "old_line_content": "",
          "new_line_content": "      out.add(wtable);",
          "content_same": false
        },
        {
          "line": 4285,
          "old_api": null,
          "new_api": "emitWithSourcesBound",
          "old_text": null,
          "new_text": "emitWithSourcesBound(in)",
          "old_line_content": "  Explosion empty;",
          "new_line_content": "  emitWithSourcesBound(in);",
          "content_same": false
        },
        {
          "line": 5302,
          "old_api": null,
          "new_api": "getTypeInfo",
          "old_text": null,
          "new_text": "IGF.getTypeInfo(baseTy).as<ExistentialMetatypeTypeInfo>()",
          "old_line_content": "",
          "new_line_content": "  auto &baseTI = IGF.getTypeInfo(baseTy).as<ExistentialMetatypeTypeInfo>();",
          "content_same": false
        },
        {
          "line": 4799,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "subs.empty()",
          "old_line_content": "      continue;",
          "new_line_content": "  assert(subs.empty()",
          "content_same": false
        },
        {
          "line": 5305,
          "old_api": null,
          "new_api": "getValue",
          "old_text": null,
          "new_text": "baseTI.getValue(IGF, base)",
          "old_line_content": "  llvm::Value *metatype;",
          "new_line_content": "    return baseTI.getValue(IGF, base);",
          "content_same": false
        },
        {
          "line": 5313,
          "old_api": null,
          "new_api": "baseTy.castTo<ExistentialMetatypeType>()",
          "old_text": null,
          "new_text": "baseTy.castTo<ExistentialMetatypeType>()",
          "old_line_content": "    metatype = value;",
          "new_line_content": "  auto existentialType = baseTy.castTo<ExistentialMetatypeType>();",
          "content_same": false
        },
        {
          "line": 5314,
          "old_api": null,
          "new_api": "cast<MetatypeType>(openedTy)",
          "old_text": null,
          "new_text": "cast<MetatypeType>(openedTy)",
          "old_line_content": "",
          "new_line_content": "  auto targetType = cast<MetatypeType>(openedTy);",
          "content_same": false
        },
        {
          "line": 4804,
          "old_api": null,
          "new_api": "getKind",
          "old_text": null,
          "new_text": "source.getKind()",
          "old_line_content": "      continue;",
          "new_line_content": "    switch (source.getKind()) {",
          "content_same": false
        },
        {
          "line": 4293,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "getSources().size()",
          "old_line_content": "    auto contextTy",
          "new_line_content": "  assert(getSources().size() == 1);",
          "content_same": false
        },
        {
          "line": 4295,
          "old_api": null,
          "new_api": "back",
          "old_text": null,
          "new_text": "SourceValues.back().MetadataForDepths.push_back(selfMeta)",
          "old_line_content": "                                             ContextParams, depTy)",
          "new_line_content": "  SourceValues.back().MetadataForDepths.push_back(selfMeta);",
          "content_same": false
        },
        {
          "line": 5319,
          "old_api": null,
          "new_api": "getRepresentation",
          "old_text": null,
          "new_text": "existentialType->getRepresentation()",
          "old_line_content": "      existentialType =",
          "new_line_content": "  if (existentialType->getRepresentation() == MetatypeRepresentation::ObjC) {",
          "content_same": false
        },
        {
          "line": 4299,
          "old_api": null,
          "new_api": "emitWithSourcesBound",
          "old_text": null,
          "new_text": "emitWithSourcesBound(empty)",
          "old_line_content": "",
          "new_line_content": "  emitWithSourcesBound(empty);",
          "content_same": false
        },
        {
          "line": 5324,
          "old_api": null,
          "new_api": "getRepresentation",
          "old_text": null,
          "new_text": "existentialType->getRepresentation()",
          "old_line_content": "",
          "new_line_content": "    assert(existentialType->getRepresentation()",
          "content_same": false
        },
        {
          "line": 4815,
          "old_api": null,
          "new_api": "emitTypeMetadataRef",
          "old_text": null,
          "new_text": "IGF.emitTypeMetadataRef(substInputType)",
          "old_line_content": "",
          "new_line_content": "      auto self = IGF.emitTypeMetadataRef(substInputType);",
          "content_same": false
        },
        {
          "line": 4816,
          "old_api": null,
          "new_api": "add",
          "old_text": null,
          "new_text": "out.add(self)",
          "old_line_content": "namespace {",
          "new_line_content": "      out.add(self);",
          "content_same": false
        },
        {
          "line": 5330,
          "old_api": null,
          "new_api": "getInstanceType",
          "old_text": null,
          "new_text": "targetType.getInstanceType()",
          "old_line_content": "",
          "new_line_content": "    while (!isa<ArchetypeType>(targetType.getInstanceType())) {",
          "content_same": false
        },
        {
          "line": 5331,
          "old_api": null,
          "new_api": "getInstanceType",
          "old_text": null,
          "new_text": "targetType.getInstanceType()",
          "old_line_content": "bool irgen::requiresProtocolWitnessTable(ProtocolDecl *protocol) {",
          "new_line_content": "      targetType = cast<MetatypeType>(targetType.getInstanceType());",
          "content_same": false
        },
        {
          "line": 5333,
          "old_api": null,
          "new_api": "getInstanceType",
          "old_text": null,
          "new_text": "existentialType.getInstanceType()",
          "old_line_content": "}",
          "new_line_content": "        cast<ExistentialMetatypeType>(existentialType.getInstanceType());",
          "content_same": false
        },
        {
          "line": 5334,
          "old_api": null,
          "new_api": "emitMetatypeInstanceType",
          "old_text": null,
          "new_text": "emitMetatypeInstanceType(IGF, metatype)",
          "old_line_content": "",
          "new_line_content": "      metatype = emitMetatypeInstanceType(IGF, metatype);",
          "content_same": false
        },
        {
          "line": 5338,
          "old_api": null,
          "new_api": "getInstanceType",
          "old_text": null,
          "new_text": "targetType.getInstanceType()",
          "old_line_content": "",
          "new_line_content": "  auto openedArchetype = cast<ArchetypeType>(targetType.getInstanceType());",
          "content_same": false
        },
        {
          "line": 5339,
          "old_api": null,
          "new_api": "bindArchetype",
          "old_text": null,
          "new_text": "IGF.bindArchetype(openedArchetype, metatype, wtables)",
          "old_line_content": "",
          "new_line_content": "  IGF.bindArchetype(openedArchetype, metatype, wtables);",
          "content_same": false
        },
        {
          "line": 4317,
          "old_api": null,
          "new_api": "FulfillmentKey",
          "old_text": null,
          "new_text": "FulfillmentKey(depTy, nullptr)",
          "old_line_content": "    // Collect all the witness tables.",
          "new_line_content": "    auto it = Fulfillments.find(FulfillmentKey(depTy, nullptr));",
          "content_same": false
        },
        {
          "line": 4318,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "Fulfillments.end()",
          "old_line_content": "    SmallVector<llvm::Value *, 8> wtables;",
          "new_line_content": "    if (it != Fulfillments.end()) {",
          "content_same": false
        },
        {
          "line": 4321,
          "old_api": null,
          "new_api": "emitArgumentMetadataRef",
          "old_text": null,
          "new_text": "emitArgumentMetadataRef(IGF, ancestorAndDecl.second,\n                                         fulfillment.Index,\n                                         ancestorAndDecl.first)",
          "old_line_content": "        continue;",
          "new_line_content": "      metadata = emitArgumentMetadataRef(IGF, ancestorAndDecl.second,",
          "content_same": false
        },
        {
          "line": 5345,
          "old_api": null,
          "new_api": "isObjC",
          "old_text": null,
          "new_text": "protocol->isObjC()",
          "old_line_content": "",
          "new_line_content": "  return !protocol->isObjC();",
          "content_same": false
        },
        {
          "line": 4835,
          "old_api": null,
          "new_api": "getSwiftModule",
          "old_text": null,
          "new_text": "IGM.SILMod->getSwiftModule()",
          "old_line_content": "          continue;",
          "new_line_content": "      : PolymorphicConvention(fn, *IGM.SILMod->getSwiftModule()), IGM(IGM) {}",
          "content_same": false
        },
        {
          "line": 4841,
          "old_api": null,
          "new_api": "getAllDependentTypes",
          "old_text": null,
          "new_text": "getAllDependentTypes()",
          "old_line_content": "        // Pass each signature requirement that needs a witness table",
          "new_line_content": "      for (auto depTy : getAllDependentTypes()) {",
          "content_same": false
        },
        {
          "line": 4332,
          "old_api": null,
          "new_api": "getConformsTo",
          "old_text": null,
          "new_text": "contextTy->getConformsTo()",
          "old_line_content": "                                             ancestorAndDecl.first);",
          "new_line_content": "    for (auto protocol : contextTy->getConformsTo()) {",
          "content_same": false
        },
        {
          "line": 4333,
          "old_api": null,
          "new_api": "requiresProtocolWitnessTable",
          "old_text": null,
          "new_text": "requiresProtocolWitnessTable(protocol)",
          "old_line_content": "",
          "new_line_content": "      if (!requiresProtocolWitnessTable(protocol))",
          "content_same": false
        },
        {
          "line": 4845,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(representative && \"no representative archetype for param?!\")",
          "old_line_content": "            continue;",
          "new_line_content": "        assert(representative && \"no representative archetype for param?!\");",
          "content_same": false
        },
        {
          "line": 4846,
          "old_api": null,
          "new_api": "getAsArchetype",
          "old_text": null,
          "new_text": "representative.getAsArchetype()",
          "old_line_content": "",
          "new_line_content": "        auto arch = representative.getAsArchetype();",
          "content_same": false
        },
        {
          "line": 4339,
          "old_api": null,
          "new_api": "FulfillmentKey",
          "old_text": null,
          "new_text": "FulfillmentKey(depTy, protocol)",
          "old_line_content": "    }",
          "new_line_content": "      auto it = Fulfillments.find(FulfillmentKey(depTy, protocol));",
          "content_same": false
        },
        {
          "line": 4851,
          "old_api": null,
          "new_api": "FulfillmentKey",
          "old_text": null,
          "new_text": "FulfillmentKey(depTy, nullptr)",
          "old_line_content": "",
          "new_line_content": "        if (!Fulfillments.count(FulfillmentKey(depTy, nullptr)))",
          "content_same": false
        },
        {
          "line": 4852,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "out.push_back(IGM.TypeMetadataPtrTy)",
          "old_line_content": "      // For a witness method, add the 'self' parameter.",
          "new_line_content": "          out.push_back(IGM.TypeMetadataPtrTy);",
          "content_same": false
        },
        {
          "line": 4342,
          "old_api": null,
          "new_api": "getAncestorForFulfillment",
          "old_text": null,
          "new_text": "getAncestorForFulfillment(fulfillment)",
          "old_line_content": "}",
          "new_line_content": "        auto ancestorAndDecl = getAncestorForFulfillment(fulfillment);",
          "content_same": false
        },
        {
          "line": 4343,
          "old_api": null,
          "new_api": "emitArgumentWitnessTableRef",
          "old_text": null,
          "new_text": "emitArgumentWitnessTableRef(IGF, ancestorAndDecl.second,\n                                             fulfillment.Index, protocol,\n                                             ancestorAndDecl.first)",
          "old_line_content": "",
          "new_line_content": "        wtable = emitArgumentWitnessTableRef(IGF, ancestorAndDecl.second,",
          "content_same": false
        },
        {
          "line": 4856,
          "old_api": null,
          "new_api": "getConformsTo",
          "old_text": null,
          "new_text": "arch->getConformsTo()",
          "old_line_content": "          // TODO: Should also provide the protocol witness table,",
          "new_line_content": "        for (auto protocol : arch->getConformsTo()) {",
          "content_same": false
        },
        {
          "line": 4857,
          "old_api": null,
          "new_api": "requiresProtocolWitnessTable",
          "old_text": null,
          "new_text": "requiresProtocolWitnessTable(protocol)",
          "old_line_content": "          // for default implementations.",
          "new_line_content": "          if (!requiresProtocolWitnessTable(protocol))",
          "content_same": false
        },
        {
          "line": 4860,
          "old_api": null,
          "new_api": "FulfillmentKey",
          "old_text": null,
          "new_text": "FulfillmentKey(depTy, protocol)",
          "old_line_content": "    }",
          "new_line_content": "          if (!Fulfillments.count(FulfillmentKey(depTy, protocol)))",
          "content_same": false
        },
        {
          "line": 4861,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "out.push_back(IGM.WitnessTablePtrTy)",
          "old_line_content": "",
          "new_line_content": "            out.push_back(IGM.WitnessTablePtrTy);",
          "content_same": false
        },
        {
          "line": 4351,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "wtables.push_back(wtable)",
          "old_line_content": "",
          "new_line_content": "      wtables.push_back(wtable);",
          "content_same": false
        },
        {
          "line": 4353,
          "old_api": null,
          "new_api": "bindArchetype",
          "old_text": null,
          "new_text": "IGF.bindArchetype(contextTy, metadata, wtables)",
          "old_line_content": "void irgen::emitPolymorphicParametersForGenericValueWitness(IRGenFunction &IGF,",
          "new_line_content": "    IGF.bindArchetype(contextTy, metadata, wtables);",
          "content_same": false
        },
        {
          "line": 4867,
          "old_api": null,
          "new_api": "getKind",
          "old_text": null,
          "new_text": "source.getKind()",
          "old_line_content": "      case SourceKind::ClassPointer: return; // already accounted for",
          "new_line_content": "        if (source.getKind() == SourceKind::WitnessSelf) {",
          "content_same": false
        },
        {
          "line": 4868,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "out.push_back(IGM.TypeMetadataPtrTy)",
          "old_line_content": "      case SourceKind::Metadata: return; // already accounted for",
          "new_line_content": "          out.push_back(IGM.TypeMetadataPtrTy);",
          "content_same": false
        },
        {
          "line": 4879,
          "old_api": null,
          "new_api": "getKind",
          "old_text": null,
          "new_text": "source.getKind()",
          "old_line_content": "}",
          "new_line_content": "      switch (source.getKind()) {",
          "content_same": false
        },
        {
          "line": 4883,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "out.push_back(IGM.TypeMetadataPtrTy)",
          "old_line_content": "                                       CanSILFunctionType polyFn,",
          "new_line_content": "        return out.push_back(IGM.TypeMetadataPtrTy);",
          "content_same": false
        },
        {
          "line": 4375,
          "old_api": null,
          "new_api": "getDeclaredTypeInContext",
          "old_text": null,
          "new_text": "ntd->getDeclaredTypeInContext()->getCanonicalType()",
          "old_line_content": "  }",
          "new_line_content": "  IGF.setUnscopedLocalTypeData(ntd->getDeclaredTypeInContext()->getCanonicalType(),",
          "content_same": false
        },
        {
          "line": 4889,
          "old_api": null,
          "new_api": "llvm_unreachable",
          "old_text": null,
          "new_text": "llvm_unreachable(\"bad source kind\")",
          "old_line_content": "static llvm::Value *getProtocolWitnessTable(IRGenFunction &IGF,",
          "new_line_content": "      llvm_unreachable(\"bad source kind\");",
          "content_same": false
        },
        {
          "line": 4383,
          "old_api": null,
          "new_api": "getArg",
          "old_text": null,
          "new_text": "getArg(it, \"Self\")",
          "old_line_content": "  {",
          "new_line_content": "  llvm::Value *arg = getArg(it, \"Self\");",
          "content_same": false
        },
        {
          "line": 4384,
          "old_api": null,
          "new_api": "getType",
          "old_text": null,
          "new_text": "arg->getType()",
          "old_line_content": "    NecessaryBindings &Bindings;",
          "new_line_content": "  assert(arg->getType() == IGF.IGM.TypeMetadataPtrTy &&",
          "content_same": false
        },
        {
          "line": 4386,
          "old_api": null,
          "new_api": "dyn_cast<UnboundGenericType>(abstractType)",
          "old_text": null,
          "new_text": "dyn_cast<UnboundGenericType>(abstractType)",
          "old_line_content": "    FindArchetypesForValueOperations(NecessaryBindings &bindings)",
          "new_line_content": "  if (auto ugt = dyn_cast<UnboundGenericType>(abstractType)) {",
          "content_same": false
        },
        {
          "line": 4387,
          "old_api": null,
          "new_api": "getDecl",
          "old_text": null,
          "new_text": "ugt->getDecl()",
          "old_line_content": "      : Bindings(bindings) {}",
          "new_line_content": "    emitPolymorphicParametersForGenericValueWitness(IGF, ugt->getDecl(), arg);",
          "content_same": false
        },
        {
          "line": 4898,
          "old_api": null,
          "new_api": "expand",
          "old_text": null,
          "new_text": "ExpandPolymorphicSignature(IGM, polyFn).expand(out)",
          "old_line_content": "  // If the source type is an archetype, look at what's locally bound.",
          "new_line_content": "  ExpandPolymorphicSignature(IGM, polyFn).expand(out);",
          "content_same": false
        },
        {
          "line": 4907,
          "old_api": null,
          "new_api": "getProtocol",
          "old_text": null,
          "new_text": "protoEntry.getProtocol()",
          "old_line_content": "  }",
          "new_line_content": "  auto proto = protoEntry.getProtocol();",
          "content_same": false
        },
        {
          "line": 4908,
          "old_api": null,
          "new_api": "requiresProtocolWitnessTable",
          "old_text": null,
          "new_text": "requiresProtocolWitnessTable(proto)",
          "old_line_content": "",
          "new_line_content": "  assert(requiresProtocolWitnessTable(proto)",
          "content_same": false
        },
        {
          "line": 4913,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(!conformance\n           && \"should not have concrete conformance info for archetype\")",
          "old_line_content": "  const ConformanceInfo &conformanceI",
          "new_line_content": "    assert(!conformance",
          "content_same": false
        },
        {
          "line": 4915,
          "old_api": null,
          "new_api": "getArchetypeInfo",
          "old_text": null,
          "new_text": "getArchetypeInfo(IGF, archetype, srcTI)",
          "old_line_content": "                            srcTI, proto, *conformance);",
          "new_line_content": "    auto &archTI = getArchetypeInfo(IGF, archetype, srcTI);",
          "content_same": false
        },
        {
          "line": 4404,
          "old_api": null,
          "new_api": "addArchetype",
          "old_text": null,
          "new_text": "Bindings.addArchetype(type)",
          "old_line_content": "    }",
          "new_line_content": "      Bindings.addArchetype(type);",
          "content_same": false
        },
        {
          "line": 4917,
          "old_api": null,
          "new_api": "getWitnessTable",
          "old_text": null,
          "new_text": "archTI.getWitnessTable(IGF, archetype,\n                                                    path.getOriginIndex())",
          "old_line_content": "}",
          "new_line_content": "    llvm::Value *rootTable = archTI.getWitnessTable(IGF, archetype,",
          "content_same": false
        },
        {
          "line": 4918,
          "old_api": null,
          "new_api": "getOriginIndex",
          "old_text": null,
          "new_text": "path.getOriginIndex()",
          "old_line_content": "",
          "new_line_content": "                                                    path.getOriginIndex());",
          "content_same": false
        },
        {
          "line": 4919,
          "old_api": null,
          "new_api": "apply",
          "old_text": null,
          "new_text": "path.apply(IGF, rootTable)",
          "old_line_content": "/// Emit protocol witness table pointers for the given protocol conformances,",
          "new_line_content": "    return path.apply(IGF, rootTable);",
          "content_same": false
        },
        {
          "line": 4409,
          "old_api": null,
          "new_api": "getElementTypes",
          "old_text": null,
          "new_text": "tuple.getElementTypes()",
          "old_line_content": "    void visitAnyFunctionType(CanAnyFunctionType fn) {}",
          "new_line_content": "      for (auto eltType : tuple.getElementTypes()) {",
          "content_same": false
        },
        {
          "line": 4410,
          "old_api": null,
          "new_api": "visit",
          "old_text": null,
          "new_text": "visit(eltType)",
          "old_line_content": "    void visitSILFunctionType(CanSILFunctionType fn) {}",
          "new_line_content": "        visit(eltType);",
          "content_same": false
        },
        {
          "line": 4924,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(conformance && \"no conformance for concrete type?!\")",
          "old_line_content": "                          ArrayRef<ProtocolConformance*> conformances,",
          "new_line_content": "  assert(conformance && \"no conformance for concrete type?!\");",
          "content_same": false
        },
        {
          "line": 4925,
          "old_api": null,
          "new_api": "getInfo",
          "old_text": null,
          "new_text": "protoEntry.getInfo()",
          "old_line_content": "                          std::function<void (unsigned, llvm::Value*)> body) {",
          "new_line_content": "  auto &protoI = protoEntry.getInfo();",
          "content_same": false
        },
        {
          "line": 4927,
          "old_api": null,
          "new_api": "getConformance",
          "old_text": null,
          "new_text": "protoI.getConformance(IGF.IGM, srcType,\n                            srcTI, proto, *conformance)",
          "old_line_content": "  SmallVector<ProtocolDecl*, 2> destProtocols;",
          "new_line_content": "    = protoI.getConformance(IGF.IGM, srcType,",
          "content_same": false
        },
        {
          "line": 4416,
          "old_api": null,
          "new_api": "getCaptureType",
          "old_text": null,
          "new_text": "t->getCaptureType()",
          "old_line_content": "    void visitReferenceStorageType(CanReferenceStorageType type) {}",
          "new_line_content": "      visit(t->getCaptureType());",
          "content_same": false
        },
        {
          "line": 4929,
          "old_api": null,
          "new_api": "getTable",
          "old_text": null,
          "new_text": "conformanceI.getTable(IGF)",
          "old_line_content": "",
          "new_line_content": "  return conformanceI.getTable(IGF);",
          "content_same": false
        },
        {
          "line": 4946,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "destProtocols.size()",
          "old_line_content": "}",
          "new_line_content": "  for (unsigned i = 0, size = destProtocols.size(); i < size; ++i)",
          "content_same": false
        },
        {
          "line": 4947,
          "old_api": null,
          "new_api": "requiresProtocolWitnessTable",
          "old_text": null,
          "new_text": "requiresProtocolWitnessTable(destProtocols[i])",
          "old_line_content": "",
          "new_line_content": "    if (requiresProtocolWitnessTable(destProtocols[i]))",
          "content_same": false
        },
        {
          "line": 4948,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "witnessConformances.push_back(conformances[i])",
          "old_line_content": "/// \"Deinitialize\" an existential container whose contained value is allocated",
          "new_line_content": "      witnessConformances.push_back(conformances[i]);",
          "content_same": false
        },
        {
          "line": 4950,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "witnessConformances.size()",
          "old_line_content": "void irgen::emitOpaqueExistentialContainerDeinit(IRGenFunction &IGF,",
          "new_line_content": "  assert(protocols.size() == witnessConformances.size() &&",
          "content_same": false
        },
        {
          "line": 4441,
          "old_api": null,
          "new_api": "getParent",
          "old_text": null,
          "new_text": "type->getParent()",
          "old_line_content": "",
          "new_line_content": "      if (auto parent = CanType(type->getParent()))",
          "content_same": false
        },
        {
          "line": 4442,
          "old_api": null,
          "new_api": "visit",
          "old_text": null,
          "new_text": "visit(parent)",
          "old_line_content": "    // FIXME: Will need to bind the archetype that this eventually refers to.",
          "new_line_content": "        visit(parent);",
          "content_same": false
        },
        {
          "line": 4957,
          "old_api": null,
          "new_api": "body",
          "old_text": null,
          "new_text": "body(i, table)",
          "old_line_content": "",
          "new_line_content": "    body(i, table);",
          "content_same": false
        },
        {
          "line": 4446,
          "old_api": null,
          "new_api": "getParent",
          "old_text": null,
          "new_text": "type->getParent()",
          "old_line_content": "",
          "new_line_content": "      if (auto parent = CanType(type->getParent()))",
          "content_same": false
        },
        {
          "line": 4447,
          "old_api": null,
          "new_api": "visit",
          "old_text": null,
          "new_text": "visit(parent)",
          "old_line_content": "NecessaryBindings",
          "new_line_content": "        visit(parent);",
          "content_same": false
        },
        {
          "line": 4448,
          "old_api": null,
          "new_api": "getGenericArgs",
          "old_text": null,
          "new_text": "type->getGenericArgs()",
          "old_line_content": "NecessaryBindings::forFunctionInvocations(IRGenModule &IGM,",
          "new_line_content": "      for (auto arg : type->getGenericArgs())",
          "content_same": false
        },
        {
          "line": 4449,
          "old_api": null,
          "new_api": "CanType",
          "old_text": null,
          "new_text": "CanType(arg)",
          "old_line_content": "                                          CanSILFunctionType origType,",
          "new_line_content": "        visit(CanType(arg));",
          "content_same": false
        },
        {
          "line": 4966,
          "old_api": null,
          "new_api": "isExistentialType",
          "old_text": null,
          "new_text": "type.isExistentialType()",
          "old_line_content": "                               Explosion &out,",
          "new_line_content": "  assert(type.isExistentialType());",
          "content_same": false
        },
        {
          "line": 4967,
          "old_api": null,
          "new_api": "isClassExistentialType",
          "old_text": null,
          "new_text": "type.isClassExistentialType()",
          "old_line_content": "                               SILType outType,",
          "new_line_content": "  assert(!type.isClassExistentialType());",
          "content_same": false
        },
        {
          "line": 4968,
          "old_api": null,
          "new_api": "getTypeInfo",
          "old_text": null,
          "new_text": "IGF.getTypeInfo(type).as<OpaqueExistentialTypeInfo>()",
          "old_line_content": "                               llvm::Value *instance,",
          "new_line_content": "  auto &ti = IGF.getTypeInfo(type).as<OpaqueExistentialTypeInfo>();",
          "content_same": false
        },
        {
          "line": 4969,
          "old_api": null,
          "new_api": "getLayout",
          "old_text": null,
          "new_text": "ti.getLayout()",
          "old_line_content": "                               CanType instanceFormalType,",
          "new_line_content": "  auto layout = ti.getLayout();",
          "content_same": false
        },
        {
          "line": 4971,
          "old_api": null,
          "new_api": "loadMetadataRef",
          "old_text": null,
          "new_text": "layout.loadMetadataRef(IGF, container)",
          "old_line_content": "                               ArrayRef<ProtocolConformance*> conformances) {",
          "new_line_content": "  llvm::Value *metadata = layout.loadMetadataRef(IGF, container);",
          "content_same": false
        },
        {
          "line": 4973,
          "old_api": null,
          "new_api": "emitDeallocateBufferCall",
          "old_text": null,
          "new_text": "emitDeallocateBufferCall(IGF, metadata, buffer)",
          "old_line_content": "         \"creating a non-class existential type\");",
          "new_line_content": "  emitDeallocateBufferCall(IGF, metadata, buffer);",
          "content_same": false
        },
        {
          "line": 4469,
          "old_api": null,
          "new_api": "getCanonicalType",
          "old_text": null,
          "new_text": "t->getCanonicalType()",
          "old_line_content": "  return bindings;",
          "new_line_content": "      if (auto archetype = dyn_cast<ArchetypeType>(t->getCanonicalType())) {",
          "content_same": false
        },
        {
          "line": 4470,
          "old_api": null,
          "new_api": "addArchetype",
          "old_text": null,
          "new_text": "bindings.addArchetype(archetype)",
          "old_line_content": "}",
          "new_line_content": "        bindings.addArchetype(archetype);",
          "content_same": false
        },
        {
          "line": 4992,
          "old_api": null,
          "new_api": "CreateBitCast",
          "old_text": null,
          "new_text": "IGF.Builder.CreateBitCast(instance, IGF.IGM.UnknownRefCountedPtrTy)",
          "old_line_content": "/// Emit an existential container initialization operation for a concrete type.",
          "new_line_content": "    = IGF.Builder.CreateBitCast(instance, IGF.IGM.UnknownRefCountedPtrTy);",
          "content_same": false
        },
        {
          "line": 4481,
          "old_api": null,
          "new_api": "visit",
          "old_text": null,
          "new_text": "FindArchetypesForValueOperations(bindings).visit(type)",
          "old_line_content": "  }",
          "new_line_content": "  FindArchetypesForValueOperations(bindings).visit(type);",
          "content_same": false
        },
        {
          "line": 4993,
          "old_api": null,
          "new_api": "add",
          "old_text": null,
          "new_text": "out.add(opaqueInstance)",
          "old_line_content": "/// Returns the address of the uninitialized buffer for the concrete value.",
          "new_line_content": "  out.add(opaqueInstance);",
          "content_same": false
        },
        {
          "line": 4996,
          "old_api": null,
          "new_api": "getSwiftRValueType",
          "old_text": null,
          "new_text": "forEachProtocolWitnessTable(IGF, instanceFormalType,\n                              outType.getSwiftRValueType(),\n                              destTI.getStoredProtocols(),\n                              conformances,\n                              [&](unsigned i, llvm::Value *ptable) {\n    out.add(ptable);\n  })",
          "old_line_content": "                                  SILType destType,",
          "new_line_content": "  forEachProtocolWitnessTable(IGF, instanceFormalType,",
          "content_same": false
        },
        {
          "line": 4997,
          "old_api": null,
          "new_api": "getSwiftRValueType",
          "old_text": null,
          "new_text": "outType.getSwiftRValueType()",
          "old_line_content": "                                  CanType formalSrcType,",
          "new_line_content": "                              outType.getSwiftRValueType(),",
          "content_same": false
        },
        {
          "line": 4998,
          "old_api": null,
          "new_api": "getStoredProtocols",
          "old_text": null,
          "new_text": "destTI.getStoredProtocols()",
          "old_line_content": "                                  SILType loweredSrcType,",
          "new_line_content": "                              destTI.getStoredProtocols(),",
          "content_same": false
        },
        {
          "line": 5001,
          "old_api": null,
          "new_api": "add",
          "old_text": null,
          "new_text": "out.add(ptable)",
          "old_line_content": "         \"initializing a class existential container as opaque\");",
          "new_line_content": "    out.add(ptable);",
          "content_same": false
        },
        {
          "line": 4492,
          "old_api": null,
          "new_api": "requiresProtocolWitnessTable",
          "old_text": null,
          "new_text": "requiresProtocolWitnessTable(proto)",
          "old_line_content": "",
          "new_line_content": "      if (requiresProtocolWitnessTable(proto))",
          "content_same": false
        },
        {
          "line": 4496,
          "old_api": null,
          "new_api": "getPointerSize",
          "old_text": null,
          "new_text": "IGM.getPointerSize()",
          "old_line_content": "",
          "new_line_content": "  return IGM.getPointerSize() * numPointers;",
          "content_same": false
        },
        {
          "line": 5013,
          "old_api": null,
          "new_api": "isClassExistentialType",
          "old_text": null,
          "new_text": "destType.isClassExistentialType()",
          "old_line_content": "  // buffer.  If we don't, we need a value witness table.",
          "new_line_content": "  assert(!destType.isClassExistentialType() &&",
          "content_same": false
        },
        {
          "line": 4503,
          "old_api": null,
          "new_api": "getPointerTo",
          "old_text": null,
          "new_text": "IGF.IGM.TypeMetadataPtrTy->getPointerTo()",
          "old_line_content": "    // Load the archetype's metatype.",
          "new_line_content": "  auto metatypePtrPtrTy = IGF.IGM.TypeMetadataPtrTy->getPointerTo();",
          "content_same": false
        },
        {
          "line": 5015,
          "old_api": null,
          "new_api": "getTypeInfo",
          "old_text": null,
          "new_text": "IGF.getTypeInfo(destType).as<OpaqueExistentialTypeInfo>()",
          "old_line_content": "  bool needValueWitnessToAllocate;",
          "new_line_content": "  auto &destTI = IGF.getTypeInfo(destType).as<OpaqueExistentialTypeInfo>();",
          "content_same": false
        },
        {
          "line": 5017,
          "old_api": null,
          "new_api": "getLayout",
          "old_text": null,
          "new_text": "destTI.getLayout()",
          "old_line_content": "    packing = (FixedPacking) -1;",
          "new_line_content": "  OpaqueExistentialLayout destLayout = destTI.getLayout();",
          "content_same": false
        },
        {
          "line": 5018,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "conformances.size()",
          "old_line_content": "    needValueWitnessToAllocate = true;",
          "new_line_content": "  assert(destTI.getStoredProtocols().size() == conformances.size());",
          "content_same": false
        },
        {
          "line": 5021,
          "old_api": null,
          "new_api": "emitTypeMetadataRef",
          "old_text": null,
          "new_text": "IGF.emitTypeMetadataRef(formalSrcType)",
          "old_line_content": "    needValueWitnessToAllocate = false;",
          "new_line_content": "  llvm::Value *metadata = IGF.emitTypeMetadataRef(formalSrcType);",
          "content_same": false
        },
        {
          "line": 5022,
          "old_api": null,
          "new_api": "projectMetadataRef",
          "old_text": null,
          "new_text": "destLayout.projectMetadataRef(IGF, dest)",
          "old_line_content": "  }",
          "new_line_content": "  IGF.Builder.CreateStore(metadata, destLayout.projectMetadataRef(IGF, dest));",
          "content_same": false
        },
        {
          "line": 4512,
          "old_api": null,
          "new_api": "CreateConstArrayGEP",
          "old_text": null,
          "new_text": "IGF.Builder.CreateConstArrayGEP(slot, metadataI,\n                                                  IGF.IGM.getPointerSize())",
          "old_line_content": "        continue;",
          "new_line_content": "    if (metadataI) slot = IGF.Builder.CreateConstArrayGEP(slot, metadataI,",
          "content_same": false
        },
        {
          "line": 4517,
          "old_api": null,
          "new_api": "CreateLoad",
          "old_text": null,
          "new_text": "IGF.Builder.CreateLoad(slot)",
          "old_line_content": "      ++metadataI;",
          "new_line_content": "    llvm::Value *metatype = IGF.Builder.CreateLoad(slot);",
          "content_same": false
        },
        {
          "line": 4519,
          "old_api": null,
          "new_api": "setMetadataRef",
          "old_text": null,
          "new_text": "setMetadataRef(IGF, archetype, metatype)",
          "old_line_content": "",
          "new_line_content": "    setMetadataRef(IGF, archetype, metatype);",
          "content_same": false
        },
        {
          "line": 5033,
          "old_api": null,
          "new_api": "getFixedPacking",
          "old_text": null,
          "new_text": "srcTI.getFixedPacking(IGF.IGM)",
          "old_line_content": "",
          "new_line_content": "    packing = srcTI.getFixedPacking(IGF.IGM);",
          "content_same": false
        },
        {
          "line": 4522,
          "old_api": null,
          "new_api": "getConformsTo",
          "old_text": null,
          "new_text": "archetype->getConformsTo()",
          "old_line_content": "  }",
          "new_line_content": "    for (unsigned protocolI : indices(archetype->getConformsTo())) {",
          "content_same": false
        },
        {
          "line": 4523,
          "old_api": null,
          "new_api": "getConformsTo",
          "old_text": null,
          "new_text": "archetype->getConformsTo()",
          "old_line_content": "}",
          "new_line_content": "      auto protocol = archetype->getConformsTo()[protocolI];",
          "content_same": false
        },
        {
          "line": 4524,
          "old_api": null,
          "new_api": "requiresProtocolWitnessTable",
          "old_text": null,
          "new_text": "requiresProtocolWitnessTable(protocol)",
          "old_line_content": "",
          "new_line_content": "      if (!requiresProtocolWitnessTable(protocol))",
          "content_same": false
        },
        {
          "line": 4527,
          "old_api": null,
          "new_api": "getPointerSize",
          "old_text": null,
          "new_text": "IGF.IGM.getPointerSize()",
          "old_line_content": "",
          "new_line_content": "                                                      IGF.IGM.getPointerSize());",
          "content_same": false
        },
        {
          "line": 4528,
          "old_api": null,
          "new_api": "CreateBitCast",
          "old_text": null,
          "new_text": "IGF.Builder.CreateBitCast(witnessSlot,\n                                    IGF.IGM.WitnessTablePtrTy->getPointerTo())",
          "old_line_content": "  // Cast the buffer to %type**.",
          "new_line_content": "      witnessSlot = IGF.Builder.CreateBitCast(witnessSlot,",
          "content_same": false
        },
        {
          "line": 5041,
          "old_api": null,
          "new_api": "projectWitnessTable",
          "old_text": null,
          "new_text": "destLayout.projectWitnessTable(IGF, dest, i)",
          "old_line_content": "  }",
          "new_line_content": "    Address ptableSlot = destLayout.projectWitnessTable(IGF, dest, i);",
          "content_same": false
        },
        {
          "line": 5042,
          "old_api": null,
          "new_api": "CreateStore",
          "old_text": null,
          "new_text": "IGF.Builder.CreateStore(ptable, ptableSlot)",
          "old_line_content": "",
          "new_line_content": "    IGF.Builder.CreateStore(ptable, ptableSlot);",
          "content_same": false
        },
        {
          "line": 4531,
          "old_api": null,
          "new_api": "CreateLoad",
          "old_text": null,
          "new_text": "IGF.Builder.CreateLoad(witnessSlot)",
          "old_line_content": "",
          "new_line_content": "      llvm::Value *witness = IGF.Builder.CreateLoad(witnessSlot);",
          "content_same": false
        },
        {
          "line": 4533,
          "old_api": null,
          "new_api": "setWitnessTable",
          "old_text": null,
          "new_text": "setWitnessTable(IGF, archetype, protocolI, witness)",
          "old_line_content": "                metadataI = 0; typeI != typeE; ++typeI) {",
          "new_line_content": "      setWitnessTable(IGF, archetype, protocolI, witness);",
          "content_same": false
        },
        {
          "line": 5051,
          "old_api": null,
          "new_api": "isKnownEmpty",
          "old_text": null,
          "new_text": "srcTI.isKnownEmpty()",
          "old_line_content": "    // Otherwise, allocate using what we know statically about the type.",
          "new_line_content": "  if (srcTI.isKnownEmpty()) {",
          "content_same": false
        },
        {
          "line": 4542,
          "old_api": null,
          "new_api": "getPointerTo",
          "old_text": null,
          "new_text": "IGF.IGM.TypeMetadataPtrTy->getPointerTo()",
          "old_line_content": "    // Find the metatype for the appropriate archetype and store it in",
          "new_line_content": "  auto metatypePtrPtrTy = IGF.IGM.TypeMetadataPtrTy->getPointerTo();",
          "content_same": false
        },
        {
          "line": 4543,
          "old_api": null,
          "new_api": "CreateBitCast",
          "old_text": null,
          "new_text": "IGF.Builder.CreateBitCast(buffer, metatypePtrPtrTy)",
          "old_line_content": "    // the slot.",
          "new_line_content": "  buffer = IGF.Builder.CreateBitCast(buffer, metatypePtrPtrTy);",
          "content_same": false
        },
        {
          "line": 5061,
          "old_api": null,
          "new_api": "emitAllocateBufferCall",
          "old_text": null,
          "new_text": "emitAllocateBufferCall(IGF, metadata, buffer)",
          "old_line_content": "                               llvm::Value *metatype, SILType metatypeType,",
          "new_line_content": "    return Address(emitAllocateBufferCall(IGF, metadata, buffer),",
          "content_same": false
        },
        {
          "line": 5062,
          "old_api": null,
          "new_api": "Alignment",
          "old_text": null,
          "new_text": "Alignment(1)",
          "old_line_content": "                               ArrayRef<ProtocolConformance*> conformances) {",
          "new_line_content": "                   Alignment(1));",
          "content_same": false
        },
        {
          "line": 4558,
          "old_api": null,
          "new_api": "CanType",
          "old_text": null,
          "new_text": "CanType(archetype)",
          "old_line_content": "      ++metadataI;",
          "new_line_content": "      IGF.getLocalTypeData(CanType(archetype), LocalTypeData::Metatype);",
          "content_same": false
        },
        {
          "line": 4559,
          "old_api": null,
          "new_api": "CreateStore",
          "old_text": null,
          "new_text": "IGF.Builder.CreateStore(metatype, slot)",
          "old_line_content": "      llvm::Value *witness =",
          "new_line_content": "    IGF.Builder.CreateStore(metatype, slot);",
          "content_same": false
        },
        {
          "line": 4563,
          "old_api": null,
          "new_api": "getConformsTo",
          "old_text": null,
          "new_text": "archetype->getConformsTo()",
          "old_line_content": "  }",
          "new_line_content": "    for (unsigned protocolI : indices(archetype->getConformsTo())) {",
          "content_same": false
        },
        {
          "line": 4564,
          "old_api": null,
          "new_api": "getConformsTo",
          "old_text": null,
          "new_text": "archetype->getConformsTo()",
          "old_line_content": "}",
          "new_line_content": "      auto protocol = archetype->getConformsTo()[protocolI];",
          "content_same": false
        },
        {
          "line": 4565,
          "old_api": null,
          "new_api": "requiresProtocolWitnessTable",
          "old_text": null,
          "new_text": "requiresProtocolWitnessTable(protocol)",
          "old_line_content": "",
          "new_line_content": "      if (!requiresProtocolWitnessTable(protocol))",
          "content_same": false
        },
        {
          "line": 5077,
          "old_api": null,
          "new_api": "getTypeInfo",
          "old_text": null,
          "new_text": "IGF.getTypeInfo(outType).as<ExistentialMetatypeTypeInfo>()",
          "old_line_content": "                              conformances,",
          "new_line_content": "  auto &destTI = IGF.getTypeInfo(outType).as<ExistentialMetatypeTypeInfo>();",
          "content_same": false
        },
        {
          "line": 5078,
          "old_api": null,
          "new_api": "add",
          "old_text": null,
          "new_text": "out.add(metatype)",
          "old_line_content": "                              [&](unsigned i, llvm::Value *ptable) {",
          "new_line_content": "  out.add(metatype);",
          "content_same": false
        },
        {
          "line": 4568,
          "old_api": null,
          "new_api": "getPointerSize",
          "old_text": null,
          "new_text": "IGF.IGM.getPointerSize()",
          "old_line_content": "    // Collect the associated archetypes.",
          "new_line_content": "                                                      IGF.IGM.getPointerSize());",
          "content_same": false
        },
        {
          "line": 5080,
          "old_api": null,
          "new_api": "getInstanceType",
          "old_text": null,
          "new_text": "metatypeType.castTo<MetatypeType>().getInstanceType()",
          "old_line_content": "                              });",
          "new_line_content": "  auto srcType = metatypeType.castTo<MetatypeType>().getInstanceType();",
          "content_same": false
        },
        {
          "line": 5081,
          "old_api": null,
          "new_api": "getInstanceType",
          "old_text": null,
          "new_text": "outType.castTo<ExistentialMetatypeType>().getInstanceType()",
          "old_line_content": "}",
          "new_line_content": "  auto destType = outType.castTo<ExistentialMetatypeType>().getInstanceType();",
          "content_same": false
        },
        {
          "line": 5082,
          "old_api": null,
          "new_api": "dyn_cast<ExistentialMetatypeType>(destType)",
          "old_text": null,
          "new_text": "dyn_cast<ExistentialMetatypeType>(destType)",
          "old_line_content": "",
          "new_line_content": "  while (auto destMetatypeType = dyn_cast<ExistentialMetatypeType>(destType)) {",
          "content_same": false
        },
        {
          "line": 5083,
          "old_api": null,
          "new_api": "getInstanceType",
          "old_text": null,
          "new_text": "destMetatypeType.getInstanceType()",
          "old_line_content": "static void getWitnessMethodValue(IRGenFunction &IGF,",
          "new_line_content": "    destType = destMetatypeType.getInstanceType();",
          "content_same": false
        },
        {
          "line": 4573,
          "old_api": null,
          "new_api": "LocalTypeData",
          "old_text": null,
          "new_text": "LocalTypeData(protocolI)",
          "old_line_content": "",
          "new_line_content": "        IGF.getLocalTypeData(CanType(archetype), LocalTypeData(protocolI));",
          "content_same": false
        },
        {
          "line": 4574,
          "old_api": null,
          "new_api": "CreateStore",
          "old_text": null,
          "new_text": "IGF.Builder.CreateStore(witness, witnessSlot)",
          "old_line_content": "/// Emit a single protocol witness table reference.",
          "new_line_content": "      IGF.Builder.CreateStore(witness, witnessSlot);",
          "content_same": false
        },
        {
          "line": 5084,
          "old_api": null,
          "new_api": "getInstanceType",
          "old_text": null,
          "new_text": "cast<MetatypeType>(srcType).getInstanceType()",
          "old_line_content": "                                  AbstractFunctionDecl *fn,",
          "new_line_content": "    srcType = cast<MetatypeType>(srcType).getInstanceType();",
          "content_same": false
        },
        {
          "line": 5088,
          "old_api": null,
          "new_api": "getStoredProtocols",
          "old_text": null,
          "new_text": "forEachProtocolWitnessTable(IGF, srcType, destType,\n                              destTI.getStoredProtocols(),\n                              conformances,\n                              [&](unsigned i, llvm::Value *ptable) {\n                                out.add(ptable);\n                              })",
          "old_line_content": "                                  Explosion &out) {",
          "new_line_content": "  forEachProtocolWitnessTable(IGF, srcType, destType,",
          "content_same": false
        },
        {
          "line": 5089,
          "old_api": null,
          "new_api": "getStoredProtocols",
          "old_text": null,
          "new_text": "destTI.getStoredProtocols()",
          "old_line_content": "  // Find the actual witness.",
          "new_line_content": "                              destTI.getStoredProtocols(),",
          "content_same": false
        },
        {
          "line": 4580,
          "old_api": null,
          "new_api": "insert",
          "old_text": null,
          "new_text": "Types.insert(type)",
          "old_line_content": "",
          "new_line_content": "  if (Types.insert(type))",
          "content_same": false
        },
        {
          "line": 4591,
          "old_api": null,
          "new_api": "requiresProtocolWitnessTable",
          "old_text": null,
          "new_text": "requiresProtocolWitnessTable(proto)",
          "old_line_content": "/// substitution.",
          "new_line_content": "  assert(requiresProtocolWitnessTable(proto) &&",
          "content_same": false
        },
        {
          "line": 5103,
          "old_api": null,
          "new_api": "getProtocolInfo",
          "old_text": null,
          "new_text": "IGF.IGM.getProtocolInfo(fnProto)",
          "old_line_content": "void",
          "new_line_content": "  auto &fnProtoInfo = IGF.IGM.getProtocolInfo(fnProto);",
          "content_same": false
        },
        {
          "line": 5104,
          "old_api": null,
          "new_api": "getWitnessEntry",
          "old_text": null,
          "new_text": "fnProtoInfo.getWitnessEntry(fn).getFunctionIndex()",
          "old_line_content": "irgen::emitWitnessMethodValue(IRGenFunction &IGF,",
          "new_line_content": "  auto index = fnProtoInfo.getWitnessEntry(fn).getFunctionIndex();",
          "content_same": false
        },
        {
          "line": 4594,
          "old_api": null,
          "new_api": "getTypeInfoForLowered",
          "old_text": null,
          "new_text": "getArchetypeInfo(IGF, archetype,\n                                  IGF.getTypeInfoForLowered(archetype))",
          "old_line_content": "                                 SmallVectorImpl<llvm::Value*> &out) {",
          "new_line_content": "  auto &archTI = getArchetypeInfo(IGF, archetype,",
          "content_same": false
        },
        {
          "line": 4595,
          "old_api": null,
          "new_api": "getTypeInfoForLowered",
          "old_text": null,
          "new_text": "IGF.getTypeInfoForLowered(archetype)",
          "old_line_content": "  // We don't need to do anything if we have no protocols to conform to.",
          "new_line_content": "                                  IGF.getTypeInfoForLowered(archetype));",
          "content_same": false
        },
        {
          "line": 5105,
          "old_api": null,
          "new_api": "emitLoadOfOpaqueWitness",
          "old_text": null,
          "new_text": "emitLoadOfOpaqueWitness(IGF, wtable, index)",
          "old_line_content": "                              CanType baseTy,",
          "new_line_content": "  llvm::Value *witness = emitLoadOfOpaqueWitness(IGF, wtable, index);",
          "content_same": false
        },
        {
          "line": 5108,
          "old_api": null,
          "new_api": "CreateBitCast",
          "old_text": null,
          "new_text": "IGF.Builder.CreateBitCast(witness, IGF.IGM.Int8PtrTy)",
          "old_line_content": "                              Explosion &out) {",
          "new_line_content": "  witness = IGF.Builder.CreateBitCast(witness, IGF.IGM.Int8PtrTy);",
          "content_same": false
        },
        {
          "line": 4598,
          "old_api": null,
          "new_api": "getOriginIndex",
          "old_text": null,
          "new_text": "path.getOriginIndex()",
          "old_line_content": "",
          "new_line_content": "                                       path.getOriginIndex());",
          "content_same": false
        },
        {
          "line": 4599,
          "old_api": null,
          "new_api": "apply",
          "old_text": null,
          "new_text": "path.apply(IGF, wtable)",
          "old_line_content": "  // Look at the replacement type.",
          "new_line_content": "  wtable = path.apply(IGF, wtable);",
          "content_same": false
        },
        {
          "line": 5113,
          "old_api": null,
          "new_api": "add",
          "old_text": null,
          "new_text": "out.add(metadata)",
          "old_line_content": "",
          "new_line_content": "    out.add(metadata);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 4608,
          "old_api": "requiresProtocolWitnessTable",
          "new_api": null,
          "old_text": "requiresProtocolWitnessTable(proto)",
          "new_text": null,
          "old_line_content": "      if (!requiresProtocolWitnessTable(proto))",
          "new_line_content": "  // We don't need to do anything if we have no protocols to conform to.",
          "content_same": false
        },
        {
          "line": 5121,
          "old_api": "getWitnessMethodValue",
          "new_api": null,
          "old_text": "getWitnessMethodValue(IGF, fn, fnProto, wtable, nullptr, out)",
          "new_text": null,
          "old_line_content": "  getWitnessMethodValue(IGF, fn, fnProto, wtable, nullptr, out);",
          "new_line_content": "                              Explosion &out) {",
          "content_same": false
        },
        {
          "line": 4611,
          "old_api": "getStoredProtocols",
          "new_api": null,
          "old_text": "archTI.getStoredProtocols()",
          "new_text": null,
          "old_line_content": "      ProtocolPath path(IGF.IGM, archTI.getStoredProtocols(), proto);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4612,
          "old_api": "getWitnessTable",
          "new_api": null,
          "old_text": "archTI.getWitnessTable(IGF, archetype,\n                                           path.getOriginIndex())",
          "new_text": null,
          "old_line_content": "      auto wtable = archTI.getWitnessTable(IGF, archetype,",
          "new_line_content": "  // Look at the replacement type.",
          "content_same": false
        },
        {
          "line": 4614,
          "old_api": "apply",
          "new_api": null,
          "old_text": "path.apply(IGF, wtable)",
          "new_text": null,
          "old_line_content": "      wtable = path.apply(IGF, wtable);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4615,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "out.push_back(wtable)",
          "new_text": null,
          "old_line_content": "      out.push_back(wtable);",
          "new_line_content": "  // If it's an archetype, we'll need to grab from the local context.",
          "content_same": false
        },
        {
          "line": 5127,
          "old_api": "type.castTo<ArchetypeType>()",
          "new_api": null,
          "old_text": "type.castTo<ArchetypeType>()",
          "new_text": null,
          "old_line_content": "  auto archetype = type.castTo<ArchetypeType>();",
          "new_line_content": "  // Find the witness table.",
          "content_same": false
        },
        {
          "line": 5132,
          "old_api": "getGetDynamicTypeFn",
          "new_api": null,
          "old_text": "IGF.IGM.getGetDynamicTypeFn()",
          "new_text": null,
          "old_line_content": "  return IGF.Builder.CreateCall2(IGF.IGM.getGetDynamicTypeFn(),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5133,
          "old_api": "getAddress",
          "new_api": null,
          "old_text": "addr.getAddress()",
          "new_text": null,
          "old_line_content": "                                 addr.getAddress(), metadata);",
          "new_line_content": "  // Build the value.",
          "content_same": false
        },
        {
          "line": 4622,
          "old_api": "getTypeInfoForUnlowered",
          "new_api": null,
          "old_text": "IGF.getTypeInfoForUnlowered(replType)",
          "new_text": null,
          "old_line_content": "  auto &replTI = IGF.getTypeInfoForUnlowered(replType);",
          "new_line_content": "        continue;",
          "content_same": false
        },
        {
          "line": 5138,
          "old_api": "isExistentialType",
          "new_api": null,
          "old_text": "type.isExistentialType()",
          "new_text": null,
          "old_line_content": "  assert(type.isExistentialType());",
          "new_line_content": "                                                     Address addr,",
          "content_same": false
        },
        {
          "line": 5139,
          "old_api": "isClassExistentialType",
          "new_api": null,
          "old_text": "type.isClassExistentialType()",
          "new_text": null,
          "old_line_content": "  assert(!type.isClassExistentialType());",
          "new_line_content": "                                                     SILType type) {",
          "content_same": false
        },
        {
          "line": 4630,
          "old_api": "getProtocolInfo",
          "new_api": null,
          "old_text": "IGF.IGM.getProtocolInfo(proto)",
          "new_text": null,
          "old_line_content": "    auto &protoI = IGF.IGM.getProtocolInfo(proto);",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 4631,
          "old_api": "getConformance",
          "new_api": null,
          "old_text": "protoI.getConformance(IGF.IGM, replType, replTI, proto,\n                                        *sub.getConformances()[j])",
          "new_text": null,
          "old_line_content": "    auto &confI = protoI.getConformance(IGF.IGM, replType, replTI, proto,",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4632,
          "old_api": "getConformances",
          "new_api": null,
          "old_text": "sub.getConformances()",
          "new_text": null,
          "old_line_content": "                                        *sub.getConformances()[j]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5144,
          "old_api": "loadMetadataRef",
          "new_api": null,
          "old_text": "existLayout.loadMetadataRef(IGF, addr)",
          "new_text": null,
          "old_line_content": "  llvm::Value *metadata = existLayout.loadMetadataRef(IGF, addr);",
          "new_line_content": "                                               LocalTypeData::Metatype);",
          "content_same": false
        },
        {
          "line": 4634,
          "old_api": "getTable",
          "new_api": null,
          "old_text": "confI.getTable(IGF)",
          "new_text": null,
          "old_line_content": "    llvm::Value *wtable = confI.getTable(IGF);",
          "new_line_content": "  // conformances.",
          "content_same": false
        },
        {
          "line": 5147,
          "old_api": "projectExistentialBuffer",
          "new_api": null,
          "old_text": "existLayout.projectExistentialBuffer(IGF, addr)",
          "new_text": null,
          "old_line_content": "  Address buffer = existLayout.projectExistentialBuffer(IGF, addr);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5148,
          "old_api": "emitProjectBufferCall",
          "new_api": null,
          "old_text": "emitProjectBufferCall(IGF, metadata, buffer)",
          "new_text": null,
          "old_line_content": "  llvm::Value *object = emitProjectBufferCall(IGF, metadata, buffer);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5150,
          "old_api": "getGetDynamicTypeFn",
          "new_api": null,
          "old_text": "IGF.IGM.getGetDynamicTypeFn()",
          "new_text": null,
          "old_line_content": "    IGF.Builder.CreateCall2(IGF.IGM.getGetDynamicTypeFn(),",
          "new_line_content": "                                            SILType type, Explosion &out) {",
          "content_same": false
        },
        {
          "line": 5155,
          "old_api": "emitLoadOfTables",
          "new_api": null,
          "old_text": "baseTI.emitLoadOfTables(IGF, addr, out)",
          "new_text": null,
          "old_line_content": "  baseTI.emitLoadOfTables(IGF, addr, out);",
          "new_line_content": "  // Get the static metadata.",
          "content_same": false
        },
        {
          "line": 5162,
          "old_api": "isClassExistentialType",
          "new_api": null,
          "old_text": "existentialTy.isClassExistentialType()",
          "new_text": null,
          "old_line_content": "  assert(existentialTy.isClassExistentialType());",
          "new_line_content": "  llvm::Value *dynamicType =",
          "content_same": false
        },
        {
          "line": 4653,
          "old_api": "getSources",
          "new_api": null,
          "old_text": "getSources()",
          "new_text": null,
          "old_line_content": "      for (auto &source : getSources()) {",
          "new_line_content": "  class EmitPolymorphicArguments : public PolymorphicConvention {",
          "content_same": false
        },
        {
          "line": 4654,
          "old_api": "getKind",
          "new_api": null,
          "old_text": "source.getKind()",
          "new_text": null,
          "old_line_content": "        switch (source.getKind()) {",
          "new_line_content": "    IRGenFunction &IGF;",
          "content_same": false
        },
        {
          "line": 5166,
          "old_api": "getWitnessTablesAndValue",
          "new_api": null,
          "old_text": "baseTI.getWitnessTablesAndValue(value)",
          "new_text": null,
          "old_line_content": "  auto tablesAndValue = baseTI.getWitnessTablesAndValue(value);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5171,
          "old_api": "metatypeTy.castTo<ExistentialMetatypeType>()",
          "new_api": null,
          "old_text": "metatypeTy.castTo<ExistentialMetatypeType>()",
          "new_text": null,
          "old_line_content": "  auto metaTy = metatypeTy.castTo<ExistentialMetatypeType>();",
          "new_line_content": "void irgen::emitMetatypeOfClassExistential(IRGenFunction &IGF, Explosion &value,",
          "content_same": false
        },
        {
          "line": 5172,
          "old_api": "getRepresentation",
          "new_api": null,
          "old_text": "metaTy->getRepresentation()",
          "new_text": null,
          "old_line_content": "  auto repr = metaTy->getRepresentation();",
          "new_line_content": "                                           SILType metatypeTy,",
          "content_same": false
        },
        {
          "line": 5173,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(repr != MetatypeRepresentation::Thin &&\n         \"Class metatypes should have a thin representation\")",
          "new_text": null,
          "old_line_content": "  assert(repr != MetatypeRepresentation::Thin &&",
          "new_line_content": "                                           SILType existentialTy,",
          "content_same": false
        },
        {
          "line": 4662,
          "old_api": "emitTypeMetadataRef",
          "new_api": null,
          "old_text": "IGF.emitTypeMetadataRef(substInputType)",
          "new_text": null,
          "old_line_content": "          out.add(IGF.emitTypeMetadataRef(substInputType));",
          "new_line_content": "              Explosion &out);",
          "content_same": false
        },
        {
          "line": 5180,
          "old_api": "add",
          "new_api": null,
          "old_text": "out.add(dynamicType)",
          "new_text": null,
          "old_line_content": "    out.add(dynamicType);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5182,
          "old_api": "emitHeapMetadataRefForUnknownHeapObject",
          "new_api": null,
          "old_text": "emitHeapMetadataRefForUnknownHeapObject(IGF, instance)",
          "new_text": null,
          "old_line_content": "    auto dynamicType = emitHeapMetadataRefForUnknownHeapObject(IGF, instance);",
          "new_line_content": "  llvm::Value *instance = tablesAndValue.second;",
          "content_same": false
        },
        {
          "line": 5183,
          "old_api": "add",
          "new_api": null,
          "old_text": "out.add(dynamicType)",
          "new_text": null,
          "old_line_content": "    out.add(dynamicType);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4676,
          "old_api": "llvm_unreachable",
          "new_api": null,
          "old_text": "llvm_unreachable(\"bad source kind!\")",
          "new_text": null,
          "old_line_content": "        llvm_unreachable(\"bad source kind!\");",
          "new_line_content": "          continue;",
          "content_same": false
        },
        {
          "line": 5189,
          "old_api": "add",
          "new_api": null,
          "old_text": "out.add(tablesAndValue.first)",
          "new_text": null,
          "old_line_content": "  out.add(tablesAndValue.first);",
          "new_line_content": "         \"Class metatypes should not have ObjC representation without runtime\");",
          "content_same": false
        },
        {
          "line": 4691,
          "old_api": "empty",
          "new_api": null,
          "old_text": "substFnType->getParameters().empty()",
          "new_text": null,
          "old_line_content": "  if (!substFnType->getParameters().empty()) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4692,
          "old_api": "back",
          "new_api": null,
          "old_text": "substFnType->getParameters().back()",
          "new_text": null,
          "old_line_content": "    auto selfParam = substFnType->getParameters().back();",
          "new_line_content": "  };",
          "content_same": false
        },
        {
          "line": 4693,
          "old_api": "getType",
          "new_api": null,
          "old_text": "selfParam.getType()",
          "new_text": null,
          "old_line_content": "    substInputType = selfParam.getType();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5203,
          "old_api": "cast<ArchetypeType>(_openedArchetype)",
          "new_api": null,
          "old_text": "cast<ArchetypeType>(_openedArchetype)",
          "new_text": null,
          "old_line_content": "  if (_openedArchetype) openedArchetype = cast<ArchetypeType>(_openedArchetype);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5205,
          "old_api": "isExistentialType",
          "new_api": null,
          "old_text": "baseTy.isExistentialType()",
          "new_text": null,
          "old_line_content": "  assert(baseTy.isExistentialType());",
          "new_line_content": "/// Emit a projection from an existential container to its concrete value",
          "content_same": false
        },
        {
          "line": 5206,
          "old_api": "isClassExistentialType",
          "new_api": null,
          "old_text": "baseTy.isClassExistentialType()",
          "new_text": null,
          "old_line_content": "  if (baseTy.isClassExistentialType()) {",
          "new_line_content": "/// buffer with the type metadata for the contained value.",
          "content_same": false
        },
        {
          "line": 5207,
          "old_api": "getTypeInfo",
          "new_api": null,
          "old_text": "IGF.getTypeInfo(baseTy).as<ClassExistentialTypeInfo>()",
          "new_text": null,
          "old_line_content": "    auto &baseTI = IGF.getTypeInfo(baseTy).as<ClassExistentialTypeInfo>();",
          "new_line_content": "///",
          "content_same": false
        },
        {
          "line": 5208,
          "old_api": "projectValue",
          "new_api": null,
          "old_text": "baseTI.projectValue(IGF, base)",
          "new_text": null,
          "old_line_content": "    auto valueAddr = baseTI.projectValue(IGF, base);",
          "new_line_content": "/// \\param _openedArchetype When non-null, the opened archetype",
          "content_same": false
        },
        {
          "line": 4699,
          "old_api": "dyn_cast<MetatypeType>(substInputType)",
          "new_api": null,
          "old_text": "dyn_cast<MetatypeType>(substInputType)",
          "new_text": null,
          "old_line_content": "    if (auto meta = dyn_cast<MetatypeType>(substInputType)) {",
          "new_line_content": "                                     ArrayRef<Substitution> subs,",
          "content_same": false
        },
        {
          "line": 4700,
          "old_api": "isIndirect",
          "new_api": null,
          "old_text": "selfParam.isIndirect()",
          "new_text": null,
          "old_line_content": "      if (!selfParam.isIndirect())",
          "new_line_content": "                                     Explosion &out) {",
          "content_same": false
        },
        {
          "line": 4701,
          "old_api": "getInstanceType",
          "new_api": null,
          "old_text": "meta.getInstanceType()",
          "new_text": null,
          "old_line_content": "        substInputType = meta.getInstanceType();",
          "new_line_content": "  // Grab the apparent 'self' type.  If there isn't a 'self' type,",
          "content_same": false
        },
        {
          "line": 5209,
          "old_api": "CreateLoad",
          "new_api": null,
          "old_text": "IGF.Builder.CreateLoad(valueAddr)",
          "new_text": null,
          "old_line_content": "    auto value = IGF.Builder.CreateLoad(valueAddr);",
          "new_line_content": "/// that captures the details of this existential.",
          "content_same": false
        },
        {
          "line": 5210,
          "old_api": "emitDynamicTypeOfOpaqueHeapObject",
          "new_api": null,
          "old_text": "emitDynamicTypeOfOpaqueHeapObject(IGF, value)",
          "new_text": null,
          "old_line_content": "    auto metadata = emitDynamicTypeOfOpaqueHeapObject(IGF, value);",
          "new_line_content": "std::pair<Address, llvm::Value*>",
          "content_same": false
        },
        {
          "line": 5217,
          "old_api": "projectWitnessTable",
          "new_api": null,
          "old_text": "baseTI.projectWitnessTable(IGF, base, i)",
          "new_text": null,
          "old_line_content": "        auto wtableAddr = baseTI.projectWitnessTable(IGF, base, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5226,
          "old_api": "getTypeInfo",
          "new_api": null,
          "old_text": "IGF.getTypeInfo(baseTy).as<OpaqueExistentialTypeInfo>()",
          "new_text": null,
          "old_line_content": "    auto &baseTI = IGF.getTypeInfo(baseTy).as<OpaqueExistentialTypeInfo>();",
          "new_line_content": "    // witness tables.",
          "content_same": false
        },
        {
          "line": 5227,
          "old_api": "getLayout",
          "new_api": null,
          "old_text": "baseTI.getLayout()",
          "new_text": null,
          "old_line_content": "    auto layout = baseTI.getLayout();",
          "new_line_content": "    if (openedArchetype) {",
          "content_same": false
        },
        {
          "line": 4719,
          "old_api": "emitEarlySources",
          "new_api": null,
          "old_text": "emitEarlySources(substInputType, out)",
          "new_text": null,
          "old_line_content": "  emitEarlySources(substInputType, out);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5237,
          "old_api": "getNumTables",
          "new_api": null,
          "old_text": "layout.getNumTables()",
          "new_text": null,
          "old_line_content": "      for (unsigned i = 0, n = layout.getNumTables(); i != n; ++i) {",
          "new_line_content": "    return {valueAddr, metadata};",
          "content_same": false
        },
        {
          "line": 4726,
          "old_api": "getAllDependentTypes",
          "new_api": null,
          "old_text": "getAllDependentTypes()",
          "new_text": null,
          "old_line_content": "  for (auto depTy : getAllDependentTypes()) {",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5238,
          "old_api": "loadWitnessTable",
          "new_api": null,
          "old_text": "layout.loadWitnessTable(IGF, base, i)",
          "new_text": null,
          "old_line_content": "        wtables.push_back(layout.loadWitnessTable(IGF, base, i));",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 4728,
          "old_api": "front",
          "new_api": null,
          "old_text": "subs.front()",
          "new_text": null,
          "old_line_content": "    const Substitution &sub = subs.front();",
          "new_line_content": "void EmitPolymorphicArguments::emit(CanType substInputType,",
          "content_same": false
        },
        {
          "line": 4729,
          "old_api": "slice",
          "new_api": null,
          "old_text": "subs.slice(1)",
          "new_text": null,
          "old_line_content": "    subs = subs.slice(1);",
          "new_line_content": "                                    ArrayRef<Substitution> subs,",
          "content_same": false
        },
        {
          "line": 5112,
          "old_api": "getDeclContext",
          "new_api": null,
          "old_text": "fn->getDeclContext()",
          "new_text": null,
          "old_line_content": "  ProtocolDecl *fnProto = cast<ProtocolDecl>(fn->getDeclContext());",
          "new_line_content": "  if (metadata)",
          "content_same": false
        },
        {
          "line": 4731,
          "old_api": "getReplacement",
          "new_api": null,
          "old_text": "sub.getReplacement()->getCanonicalType()",
          "new_text": null,
          "old_line_content": "    CanType argType = sub.getReplacement()->getCanonicalType();",
          "new_line_content": "  // Add all the early sources.",
          "content_same": false
        },
        {
          "line": 4735,
          "old_api": "getRepresentativeArchetype",
          "new_api": null,
          "old_text": "getRepresentativeArchetype(depTy)",
          "new_text": null,
          "old_line_content": "    auto type = getRepresentativeArchetype(depTy);",
          "new_line_content": "  // FIXME: Later, we'll want to emit only the minimal set of archetypes,",
          "content_same": false
        },
        {
          "line": 4224,
          "old_api": "setName",
          "new_api": null,
          "old_text": "metatype->setName(\"Self\")",
          "new_text": null,
          "old_line_content": "        metatype->setName(\"Self\");",
          "new_line_content": "        ",
          "content_same": false
        },
        {
          "line": 4736,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(type && \"no potential archetype for dependent type?!\")",
          "new_text": null,
          "old_line_content": "    assert(type && \"no potential archetype for dependent type?!\");",
          "new_line_content": "  // because non-primary archetypes (which correspond to associated types)",
          "content_same": false
        },
        {
          "line": 4737,
          "old_api": "getAsArchetype",
          "new_api": null,
          "old_text": "type.getAsArchetype()",
          "new_text": null,
          "old_line_content": "    auto arch = type.getAsArchetype();",
          "new_line_content": "  // will have their witness tables embedded in the witness table corresponding",
          "content_same": false
        },
        {
          "line": 4228,
          "old_api": "llvm_unreachable",
          "new_api": null,
          "old_text": "llvm_unreachable(\"bad source kind!\")",
          "new_text": null,
          "old_line_content": "      llvm_unreachable(\"bad source kind!\");",
          "new_line_content": "        return metatype;",
          "content_same": false
        },
        {
          "line": 5254,
          "old_api": "emitIndirectExistentialProjectionWithMetadata",
          "new_api": null,
          "old_text": "emitIndirectExistentialProjectionWithMetadata(IGF, base, baseTy,\n                                                       openedArchetype)",
          "new_text": null,
          "old_line_content": "  return emitIndirectExistentialProjectionWithMetadata(IGF, base, baseTy,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4743,
          "old_api": "emitTypeMetadataRef",
          "new_api": null,
          "old_text": "IGF.emitTypeMetadataRef(argType)",
          "new_text": null,
          "old_line_content": "      out.add(IGF.emitTypeMetadataRef(argType));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5115,
          "old_api": "getTypeInfoForUnlowered",
          "new_api": null,
          "old_text": "IGF.getTypeInfoForUnlowered(baseTy)",
          "new_text": null,
          "old_line_content": "  auto &baseTI = IGF.getTypeInfoForUnlowered(baseTy);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4234,
          "old_api": "getSources",
          "new_api": null,
          "old_text": "getSources()",
          "new_text": null,
          "old_line_content": "      auto &source = getSources()[sourceIndex];",
          "new_line_content": "        // the 'Self : P' conformance must be provided last along with the",
          "content_same": false
        },
        {
          "line": 4747,
          "old_api": "getConformsTo",
          "new_api": null,
          "old_text": "arch->getConformsTo()",
          "new_text": null,
          "old_line_content": "    auto protocols = arch->getConformsTo();",
          "new_line_content": "    // parameter, it doesn't need an independent metadata parameter.",
          "content_same": false
        },
        {
          "line": 5116,
          "old_api": "getProtocolInfo",
          "new_api": null,
          "old_text": "getProtocolWitnessTable(IGF, baseTy, baseTI,\n                      ProtocolEntry(fnProto, IGF.IGM.getProtocolInfo(fnProto)),\n                      conformance)",
          "new_text": null,
          "old_line_content": "  llvm::Value *wtable = getProtocolWitnessTable(IGF, baseTy, baseTI,",
          "new_line_content": "void",
          "content_same": false
        },
        {
          "line": 4239,
          "old_api": "size",
          "new_api": null,
          "old_text": "sourceValue.MetadataForDepths.size()",
          "new_text": null,
          "old_line_content": "      while (depth >= sourceValue.MetadataForDepths.size()) {",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 4240,
          "old_api": "back",
          "new_api": null,
          "old_text": "sourceValue.MetadataForDepths.back()",
          "new_text": null,
          "old_line_content": "        auto child = sourceValue.MetadataForDepths.back();",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 4751,
          "old_api": "getTypeInfoForUnlowered",
          "new_api": null,
          "old_text": "IGF.getTypeInfoForUnlowered(argType)",
          "new_text": null,
          "old_line_content": "    auto &argTI = IGF.getTypeInfoForUnlowered(argType);",
          "new_line_content": "    if (!arch)",
          "content_same": false
        },
        {
          "line": 4242,
          "old_api": "size",
          "new_api": null,
          "old_text": "sourceValue.MetadataForDepths.size()",
          "new_text": null,
          "old_line_content": "          source.TypesForDepths[sourceValue.MetadataForDepths.size()];",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4243,
          "old_api": "emitParentMetadataRef",
          "new_api": null,
          "old_text": "emitParentMetadataRef(IGF, childDecl, child)",
          "new_text": null,
          "old_line_content": "        auto parent = emitParentMetadataRef(IGF, childDecl, child);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4244,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "sourceValue.MetadataForDepths.push_back(parent)",
          "new_text": null,
          "old_line_content": "        sourceValue.MetadataForDepths.push_back(parent);",
          "new_line_content": "    /// Produce the metadata value for the given depth, using the",
          "content_same": false
        },
        {
          "line": 4754,
          "old_api": "size",
          "new_api": null,
          "old_text": "protocols.size()",
          "new_text": null,
          "old_line_content": "    for (unsigned i = 0, e = protocols.size(); i != e; ++i) {",
          "new_line_content": "    // Add the metadata reference unless it's fulfilled.",
          "content_same": false
        },
        {
          "line": 4758,
          "old_api": "requiresProtocolWitnessTable",
          "new_api": null,
          "old_text": "requiresProtocolWitnessTable(protocol)",
          "new_text": null,
          "old_line_content": "      if (!requiresProtocolWitnessTable(protocol))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5117,
          "old_api": "getProtocolInfo",
          "new_api": null,
          "old_text": "IGF.IGM.getProtocolInfo(fnProto)",
          "new_text": null,
          "old_line_content": "                      ProtocolEntry(fnProto, IGF.IGM.getProtocolInfo(fnProto)),",
          "new_line_content": "irgen::emitWitnessMethodValue(IRGenFunction &IGF,",
          "content_same": false
        },
        {
          "line": 5265,
          "old_api": "isClassExistentialType",
          "new_api": null,
          "old_text": "baseTy.isClassExistentialType()",
          "new_text": null,
          "old_line_content": "  assert(baseTy.isClassExistentialType());",
          "new_line_content": "                                               CanArchetypeType openedArchetype)",
          "content_same": false
        },
        {
          "line": 5266,
          "old_api": "getTypeInfo",
          "new_api": null,
          "old_text": "IGF.getTypeInfo(baseTy).as<ClassExistentialTypeInfo>()",
          "new_text": null,
          "old_line_content": "  auto &baseTI = IGF.getTypeInfo(baseTy).as<ClassExistentialTypeInfo>();",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4762,
          "old_api": "FulfillmentKey",
          "new_api": null,
          "old_text": "FulfillmentKey(depTy, protocol)",
          "new_text": null,
          "old_line_content": "      if (Fulfillments.count(FulfillmentKey(depTy, protocol)))",
          "new_line_content": "      continue;",
          "content_same": false
        },
        {
          "line": 5269,
          "old_api": "getValue",
          "new_api": null,
          "old_text": "baseTI.getValue(IGF, base)",
          "new_text": null,
          "old_line_content": "    return baseTI.getValue(IGF, base);",
          "new_line_content": "    .first;",
          "content_same": false
        },
        {
          "line": 5275,
          "old_api": "getWitnessTablesAndValue",
          "new_api": null,
          "old_text": "baseTI.getWitnessTablesAndValue(base)",
          "new_text": null,
          "old_line_content": "  std::tie(wtables, value) = baseTI.getWitnessTablesAndValue(base);",
          "new_line_content": "                                      Explosion &base,",
          "content_same": false
        },
        {
          "line": 5276,
          "old_api": "emitDynamicTypeOfOpaqueHeapObject",
          "new_api": null,
          "old_text": "emitDynamicTypeOfOpaqueHeapObject(IGF, value)",
          "new_text": null,
          "old_line_content": "  auto metadata = emitDynamicTypeOfOpaqueHeapObject(IGF, value);",
          "new_line_content": "                                      SILType baseTy,",
          "content_same": false
        },
        {
          "line": 4766,
          "old_api": "dyn_cast<ArchetypeType>(argType)",
          "new_api": null,
          "old_text": "dyn_cast<ArchetypeType>(argType)",
          "new_text": null,
          "old_line_content": "      if (auto archetype = dyn_cast<ArchetypeType>(argType)) {",
          "new_line_content": "    // Add witness tables for each of the required protocols.",
          "content_same": false
        },
        {
          "line": 5277,
          "old_api": "bindArchetype",
          "new_api": null,
          "old_text": "IGF.bindArchetype(openedArchetype, metadata, wtables)",
          "new_text": null,
          "old_line_content": "  IGF.bindArchetype(openedArchetype, metadata, wtables);",
          "new_line_content": "                                      CanArchetypeType openedArchetype) {",
          "content_same": false
        },
        {
          "line": 4768,
          "old_api": "getTypeInfoForLowered",
          "new_api": null,
          "old_text": "IGF.getTypeInfoForLowered(archetype)",
          "new_text": null,
          "old_line_content": "                                        IGF.getTypeInfoForLowered(archetype));",
          "new_line_content": "      auto protocol = protocols[i];",
          "content_same": false
        },
        {
          "line": 4770,
          "old_api": "getStoredProtocols",
          "new_api": null,
          "old_text": "archTI.getStoredProtocols()",
          "new_text": null,
          "old_line_content": "        ProtocolPath path(IGF.IGM, archTI.getStoredProtocols(), protocol);",
          "new_line_content": "      // Skip this if the protocol doesn't require a witness table.",
          "content_same": false
        },
        {
          "line": 4772,
          "old_api": "getOriginIndex",
          "new_api": null,
          "old_text": "path.getOriginIndex()",
          "new_text": null,
          "old_line_content": "                                             path.getOriginIndex());",
          "new_line_content": "        continue;",
          "content_same": false
        },
        {
          "line": 4773,
          "old_api": "apply",
          "new_api": null,
          "old_text": "path.apply(IGF, wtable)",
          "new_text": null,
          "old_line_content": "        wtable = path.apply(IGF, wtable);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4774,
          "old_api": "add",
          "new_api": null,
          "old_text": "out.add(wtable)",
          "new_text": null,
          "old_line_content": "        out.add(wtable);",
          "new_line_content": "      // Skip this if it's fulfilled by the source.",
          "content_same": false
        },
        {
          "line": 4265,
          "old_api": "size",
          "new_api": null,
          "old_text": "getSources().size()",
          "new_text": null,
          "old_line_content": "  SourceValues.reserve(getSources().size());",
          "new_line_content": "    getAncestorForFulfillment(const Fulfillment &fulfillment) {",
          "content_same": false
        },
        {
          "line": 4267,
          "old_api": "emitSourceForParameters",
          "new_api": null,
          "old_text": "emitSourceForParameters(source, in, getParameter)",
          "new_text": null,
          "old_line_content": "    llvm::Value *value = emitSourceForParameters(source, in, getParameter);",
          "new_line_content": "                                          fulfillment.Depth);",
          "content_same": false
        },
        {
          "line": 4268,
          "old_api": "emplace_back",
          "new_api": null,
          "old_text": "SourceValues.emplace_back()",
          "new_text": null,
          "old_line_content": "    SourceValues.emplace_back();",
          "new_line_content": "      auto ancestorDecl =",
          "content_same": false
        },
        {
          "line": 4269,
          "old_api": "back",
          "new_api": null,
          "old_text": "SourceValues.back().MetadataForDepths.push_back(value)",
          "new_text": null,
          "old_line_content": "    SourceValues.back().MetadataForDepths.push_back(value);",
          "new_line_content": "        Sources[fulfillment.SourceIndex].TypesForDepths[fulfillment.Depth];",
          "content_same": false
        },
        {
          "line": 4782,
          "old_api": "getTable",
          "new_api": null,
          "old_text": "confI.getTable(IGF)",
          "new_text": null,
          "old_line_content": "      llvm::Value *wtable = confI.getTable(IGF);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5292,
          "old_api": "getValue",
          "new_api": null,
          "old_text": "baseTI.getValue(IGF, base)",
          "new_text": null,
          "old_line_content": "    return baseTI.getValue(IGF, base);",
          "new_line_content": "  return value;",
          "content_same": false
        },
        {
          "line": 4272,
          "old_api": "emitWithSourcesBound",
          "new_api": null,
          "old_text": "emitWithSourcesBound(in)",
          "new_text": null,
          "old_line_content": "  emitWithSourcesBound(in);",
          "new_line_content": "  };",
          "content_same": false
        },
        {
          "line": 5298,
          "old_api": "getWitnessTablesAndValue",
          "new_api": null,
          "old_text": "baseTI.getWitnessTablesAndValue(base)",
          "new_text": null,
          "old_line_content": "  std::tie(wtables, value) = baseTI.getWitnessTablesAndValue(base);",
          "new_line_content": "                                         Explosion &base,",
          "content_same": false
        },
        {
          "line": 5300,
          "old_api": "baseTy.castTo<ExistentialMetatypeType>()",
          "new_api": null,
          "old_text": "baseTy.castTo<ExistentialMetatypeType>()",
          "new_text": null,
          "old_line_content": "  auto existentialType = baseTy.castTo<ExistentialMetatypeType>();",
          "new_line_content": "                                         CanType openedTy) {",
          "content_same": false
        },
        {
          "line": 4790,
          "old_api": "getSources",
          "new_api": null,
          "old_text": "getSources()",
          "new_text": null,
          "old_line_content": "  for (auto &source : getSources()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4791,
          "old_api": "getKind",
          "new_api": null,
          "old_text": "source.getKind()",
          "new_text": null,
          "old_line_content": "    switch (source.getKind()) {",
          "new_line_content": "      // Otherwise, go to the conformances.",
          "content_same": false
        },
        {
          "line": 5306,
          "old_api": "getRepresentation",
          "new_api": null,
          "old_text": "existentialType->getRepresentation()",
          "new_text": null,
          "old_line_content": "  if (existentialType->getRepresentation() == MetatypeRepresentation::ObjC) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5307,
          "old_api": "emitObjCMetadataRefForMetadata",
          "new_api": null,
          "old_text": "emitObjCMetadataRefForMetadata(IGF, value)",
          "new_text": null,
          "old_line_content": "    metatype = emitObjCMetadataRefForMetadata(IGF, value);",
          "new_line_content": "  // Capture the metadata and witness tables from this existential",
          "content_same": false
        },
        {
          "line": 4286,
          "old_api": "emitWithSourcesBound",
          "new_api": null,
          "old_text": "emitWithSourcesBound(empty)",
          "new_text": null,
          "old_line_content": "  emitWithSourcesBound(empty);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4802,
          "old_api": "emitTypeMetadataRef",
          "new_api": null,
          "old_text": "IGF.emitTypeMetadataRef(substInputType)",
          "new_text": null,
          "old_line_content": "      auto self = IGF.emitTypeMetadataRef(substInputType);",
          "new_line_content": "  // For a witness call, add the Self argument metadata arguments last.",
          "content_same": false
        },
        {
          "line": 4291,
          "old_api": "getAllDependentTypes",
          "new_api": null,
          "old_text": "getAllDependentTypes()",
          "new_text": null,
          "old_line_content": "  for (auto depTy : getAllDependentTypes()) {",
          "new_line_content": "EmitPolymorphicParameters::emitForGenericValueWitness(llvm::Value *selfMeta) {",
          "content_same": false
        },
        {
          "line": 5317,
          "old_api": "getInstanceType",
          "new_api": null,
          "old_text": "targetType.getInstanceType()",
          "new_text": null,
          "old_line_content": "    while (!isa<ArchetypeType>(targetType.getInstanceType())) {",
          "new_line_content": "  // class type and let's go.",
          "content_same": false
        },
        {
          "line": 5318,
          "old_api": "getInstanceType",
          "new_api": null,
          "old_text": "targetType.getInstanceType()",
          "new_text": null,
          "old_line_content": "      targetType = cast<MetatypeType>(targetType.getInstanceType());",
          "new_line_content": "  llvm::Value *metatype;",
          "content_same": false
        },
        {
          "line": 5321,
          "old_api": "emitMetatypeInstanceType",
          "new_api": null,
          "old_text": "emitMetatypeInstanceType(IGF, metatype)",
          "new_text": null,
          "old_line_content": "      metatype = emitMetatypeInstanceType(IGF, metatype);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4812,
          "old_api": "llvm_unreachable",
          "new_api": null,
          "old_text": "llvm_unreachable(\"bad source kind\")",
          "new_text": null,
          "old_line_content": "    llvm_unreachable(\"bad source kind\");",
          "new_line_content": "      continue;",
          "content_same": false
        },
        {
          "line": 5325,
          "old_api": "getInstanceType",
          "new_api": null,
          "old_text": "targetType.getInstanceType()",
          "new_text": null,
          "old_line_content": "  auto openedArchetype = cast<ArchetypeType>(targetType.getInstanceType());",
          "new_line_content": "             == MetatypeRepresentation::Thick);",
          "content_same": false
        },
        {
          "line": 5326,
          "old_api": "bindArchetype",
          "new_api": null,
          "old_text": "IGF.bindArchetype(openedArchetype, metatype, wtables)",
          "new_text": null,
          "old_line_content": "  IGF.bindArchetype(openedArchetype, metatype, wtables);",
          "new_line_content": "    metatype = value;",
          "content_same": false
        },
        {
          "line": 4305,
          "old_api": "end",
          "new_api": null,
          "old_text": "Fulfillments.end()",
          "new_text": null,
          "old_line_content": "    if (it != Fulfillments.end()) {",
          "new_line_content": "    // Get the corresponding context archetype.",
          "content_same": false
        },
        {
          "line": 4308,
          "old_api": "emitArgumentMetadataRef",
          "new_api": null,
          "old_text": "emitArgumentMetadataRef(IGF, ancestorAndDecl.second,\n                                         fulfillment.Index,\n                                         ancestorAndDecl.first)",
          "new_text": null,
          "old_line_content": "      metadata = emitArgumentMetadataRef(IGF, ancestorAndDecl.second,",
          "new_line_content": "                                             ContextParams, depTy)",
          "content_same": false
        },
        {
          "line": 5332,
          "old_api": "isObjC",
          "new_api": null,
          "old_text": "protocol->isObjC()",
          "new_text": null,
          "old_line_content": "  return !protocol->isObjC();",
          "new_line_content": "      existentialType =",
          "content_same": false
        },
        {
          "line": 4822,
          "old_api": "getSwiftModule",
          "new_api": null,
          "old_text": "IGM.SILMod->getSwiftModule()",
          "new_text": null,
          "old_line_content": "      : PolymorphicConvention(fn, *IGM.SILMod->getSwiftModule()), IGM(IGM) {}",
          "new_line_content": "      // function value.",
          "content_same": false
        },
        {
          "line": 4314,
          "old_api": "claimNext",
          "new_api": null,
          "old_text": "in.claimNext()",
          "new_text": null,
          "old_line_content": "      metadata = in.claimNext();",
          "new_line_content": "    llvm::Value *metadata;",
          "content_same": false
        },
        {
          "line": 4826,
          "old_api": "addEarlySource",
          "new_api": null,
          "old_text": "addEarlySource(source, out)",
          "new_text": null,
          "old_line_content": "        addEarlySource(source, out);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4828,
          "old_api": "getAllDependentTypes",
          "new_api": null,
          "old_text": "getAllDependentTypes()",
          "new_text": null,
          "old_line_content": "      for (auto depTy : getAllDependentTypes()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4319,
          "old_api": "getConformsTo",
          "new_api": null,
          "old_text": "contextTy->getConformsTo()",
          "new_text": null,
          "old_line_content": "    for (auto protocol : contextTy->getConformsTo()) {",
          "new_line_content": "      auto &fulfillment = it->second;",
          "content_same": false
        },
        {
          "line": 4831,
          "old_api": "getRepresentativeArchetype",
          "new_api": null,
          "old_text": "getRepresentativeArchetype(depTy)",
          "new_text": null,
          "old_line_content": "        auto representative = getRepresentativeArchetype(depTy);",
          "new_line_content": "  class ExpandPolymorphicSignature : public PolymorphicConvention {",
          "content_same": false
        },
        {
          "line": 4832,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(representative && \"no representative archetype for param?!\")",
          "new_text": null,
          "old_line_content": "        assert(representative && \"no representative archetype for param?!\");",
          "new_line_content": "    IRGenModule &IGM;",
          "content_same": false
        },
        {
          "line": 4833,
          "old_api": "getAsArchetype",
          "new_api": null,
          "old_text": "representative.getAsArchetype()",
          "new_text": null,
          "old_line_content": "        auto arch = representative.getAsArchetype();",
          "new_line_content": "  public:",
          "content_same": false
        },
        {
          "line": 4326,
          "old_api": "FulfillmentKey",
          "new_api": null,
          "old_text": "FulfillmentKey(depTy, protocol)",
          "new_text": null,
          "old_line_content": "      auto it = Fulfillments.find(FulfillmentKey(depTy, protocol));",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 4329,
          "old_api": "getAncestorForFulfillment",
          "new_api": null,
          "old_text": "getAncestorForFulfillment(fulfillment)",
          "new_text": null,
          "old_line_content": "        auto ancestorAndDecl = getAncestorForFulfillment(fulfillment);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4330,
          "old_api": "emitArgumentWitnessTableRef",
          "new_api": null,
          "old_text": "emitArgumentWitnessTableRef(IGF, ancestorAndDecl.second,\n                                             fulfillment.Index, protocol,\n                                             ancestorAndDecl.first)",
          "new_text": null,
          "old_line_content": "        wtable = emitArgumentWitnessTableRef(IGF, ancestorAndDecl.second,",
          "new_line_content": "    // Collect all the witness tables.",
          "content_same": false
        },
        {
          "line": 4843,
          "old_api": "getConformsTo",
          "new_api": null,
          "old_text": "arch->getConformsTo()",
          "new_text": null,
          "old_line_content": "        for (auto protocol : arch->getConformsTo()) {",
          "new_line_content": "        // constrained to concrete types.",
          "content_same": false
        },
        {
          "line": 4847,
          "old_api": "FulfillmentKey",
          "new_api": null,
          "old_text": "FulfillmentKey(depTy, protocol)",
          "new_text": null,
          "old_line_content": "          if (!Fulfillments.count(FulfillmentKey(depTy, protocol)))",
          "new_line_content": "        if (!arch)",
          "content_same": false
        },
        {
          "line": 4336,
          "old_api": "claimNext",
          "new_api": null,
          "old_text": "in.claimNext()",
          "new_text": null,
          "old_line_content": "        wtable = in.claimNext();",
          "new_line_content": "      llvm::Value *wtable;",
          "content_same": false
        },
        {
          "line": 4848,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "out.push_back(IGM.WitnessTablePtrTy)",
          "new_text": null,
          "old_line_content": "            out.push_back(IGM.WitnessTablePtrTy);",
          "new_line_content": "          continue;",
          "content_same": false
        },
        {
          "line": 4338,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "wtables.push_back(wtable)",
          "new_text": null,
          "old_line_content": "      wtables.push_back(wtable);",
          "new_line_content": "      // If the protocol witness table is fulfilled by the source, go for it.",
          "content_same": false
        },
        {
          "line": 4853,
          "old_api": "getSources",
          "new_api": null,
          "old_text": "getSources()",
          "new_text": null,
          "old_line_content": "      for (auto &source : getSources()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4854,
          "old_api": "getKind",
          "new_api": null,
          "old_text": "source.getKind()",
          "new_text": null,
          "old_line_content": "        if (source.getKind() == SourceKind::WitnessSelf) {",
          "new_line_content": "        // Pass each signature requirement that needs a witness table",
          "content_same": false
        },
        {
          "line": 4855,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "out.push_back(IGM.TypeMetadataPtrTy)",
          "new_text": null,
          "old_line_content": "          out.push_back(IGM.TypeMetadataPtrTy);",
          "new_line_content": "        // separately (unless fulfilled).",
          "content_same": false
        },
        {
          "line": 4357,
          "old_api": "getGenericParamsOfContext",
          "new_api": null,
          "old_text": "ntd->getGenericParamsOfContext()",
          "new_text": null,
          "old_line_content": "  if (!ntd->getGenericParamsOfContext())",
          "new_line_content": "/// Perform all the bindings necessary to emit the given declaration.",
          "content_same": false
        },
        {
          "line": 4870,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "out.push_back(IGM.TypeMetadataPtrTy)",
          "new_text": null,
          "old_line_content": "        return out.push_back(IGM.TypeMetadataPtrTy);",
          "new_line_content": "          // for default implementations.",
          "content_same": false
        },
        {
          "line": 4360,
          "old_api": "emitForGenericValueWitness",
          "new_api": null,
          "old_text": "EmitPolymorphicParameters(IGF, ntd).emitForGenericValueWitness(selfMeta)",
          "new_text": null,
          "old_line_content": "  EmitPolymorphicParameters(IGF, ntd).emitForGenericValueWitness(selfMeta);",
          "new_line_content": "                                      Explosion &in,",
          "content_same": false
        },
        {
          "line": 4876,
          "old_api": "llvm_unreachable",
          "new_api": null,
          "old_text": "llvm_unreachable(\"bad source kind\")",
          "new_text": null,
          "old_line_content": "      llvm_unreachable(\"bad source kind\");",
          "new_line_content": "    /// Add signature elements for the source metadata.",
          "content_same": false
        },
        {
          "line": 4371,
          "old_api": "getType",
          "new_api": null,
          "old_text": "arg->getType()",
          "new_text": null,
          "old_line_content": "  assert(arg->getType() == IGF.IGM.TypeMetadataPtrTy &&",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 4885,
          "old_api": "expand",
          "new_api": null,
          "old_text": "ExpandPolymorphicSignature(IGM, polyFn).expand(out)",
          "new_text": null,
          "old_line_content": "  ExpandPolymorphicSignature(IGM, polyFn).expand(out);",
          "new_line_content": "        return; // handled as a special case in expand()",
          "content_same": false
        },
        {
          "line": 4374,
          "old_api": "getDecl",
          "new_api": null,
          "old_text": "ugt->getDecl()",
          "new_text": null,
          "old_line_content": "    emitPolymorphicParametersForGenericValueWitness(IGF, ugt->getDecl(), arg);",
          "new_line_content": "  // Register the 'Self' argument as generic metadata for the type.",
          "content_same": false
        },
        {
          "line": 4894,
          "old_api": "getProtocol",
          "new_api": null,
          "old_text": "protoEntry.getProtocol()",
          "new_text": null,
          "old_line_content": "  auto proto = protoEntry.getProtocol();",
          "new_line_content": "/// Given a generic signature, add the argument types required in order to call it.",
          "content_same": false
        },
        {
          "line": 4895,
          "old_api": "requiresProtocolWitnessTable",
          "new_api": null,
          "old_text": "requiresProtocolWitnessTable(proto)",
          "new_text": null,
          "old_line_content": "  assert(requiresProtocolWitnessTable(proto)",
          "new_line_content": "void irgen::expandPolymorphicSignature(IRGenModule &IGM,",
          "content_same": false
        },
        {
          "line": 4899,
          "old_api": "dyn_cast<ArchetypeType>(srcType)",
          "new_api": null,
          "old_text": "dyn_cast<ArchetypeType>(srcType)",
          "new_text": null,
          "old_line_content": "  if (auto archetype = dyn_cast<ArchetypeType>(srcType)) {",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4900,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(!conformance\n           && \"should not have concrete conformance info for archetype\")",
          "new_text": null,
          "old_line_content": "    assert(!conformance",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4902,
          "old_api": "getArchetypeInfo",
          "new_api": null,
          "old_text": "getArchetypeInfo(IGF, archetype, srcTI)",
          "new_text": null,
          "old_line_content": "    auto &archTI = getArchetypeInfo(IGF, archetype, srcTI);",
          "new_line_content": "static llvm::Value *getProtocolWitnessTable(IRGenFunction &IGF,",
          "content_same": false
        },
        {
          "line": 4391,
          "old_api": "addArchetype",
          "new_api": null,
          "old_text": "Bindings.addArchetype(type)",
          "new_text": null,
          "old_line_content": "      Bindings.addArchetype(type);",
          "new_line_content": "namespace {",
          "content_same": false
        },
        {
          "line": 4903,
          "old_api": "getStoredProtocols",
          "new_api": null,
          "old_text": "archTI.getStoredProtocols()",
          "new_text": null,
          "old_line_content": "    ProtocolPath path(IGF.IGM, archTI.getStoredProtocols(), proto);",
          "new_line_content": "                                            CanType srcType,",
          "content_same": false
        },
        {
          "line": 4904,
          "old_api": "getWitnessTable",
          "new_api": null,
          "old_text": "archTI.getWitnessTable(IGF, archetype,\n                                                    path.getOriginIndex())",
          "new_text": null,
          "old_line_content": "    llvm::Value *rootTable = archTI.getWitnessTable(IGF, archetype,",
          "new_line_content": "                                            const TypeInfo &srcTI,",
          "content_same": false
        },
        {
          "line": 4905,
          "old_api": "getOriginIndex",
          "new_api": null,
          "old_text": "path.getOriginIndex()",
          "new_text": null,
          "old_line_content": "                                                    path.getOriginIndex());",
          "new_line_content": "                                            ProtocolEntry protoEntry,",
          "content_same": false
        },
        {
          "line": 4906,
          "old_api": "apply",
          "new_api": null,
          "old_text": "path.apply(IGF, rootTable)",
          "new_text": null,
          "old_line_content": "    return path.apply(IGF, rootTable);",
          "new_line_content": "                                            ProtocolConformance *conformance) {",
          "content_same": false
        },
        {
          "line": 4396,
          "old_api": "getElementTypes",
          "new_api": null,
          "old_text": "tuple.getElementTypes()",
          "new_text": null,
          "old_line_content": "      for (auto eltType : tuple.getElementTypes()) {",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 4397,
          "old_api": "visit",
          "new_api": null,
          "old_text": "visit(eltType)",
          "new_text": null,
          "old_line_content": "        visit(eltType);",
          "new_line_content": "    NecessaryBindings &Bindings;",
          "content_same": false
        },
        {
          "line": 4911,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(conformance && \"no conformance for concrete type?!\")",
          "new_text": null,
          "old_line_content": "  assert(conformance && \"no conformance for concrete type?!\");",
          "new_line_content": "  // If the source type is an archetype, look at what's locally bound.",
          "content_same": false
        },
        {
          "line": 4914,
          "old_api": "getConformance",
          "new_api": null,
          "old_text": "protoI.getConformance(IGF.IGM, srcType,\n                            srcTI, proto, *conformance)",
          "new_text": null,
          "old_line_content": "    = protoI.getConformance(IGF.IGM, srcType,",
          "new_line_content": "           && \"should not have concrete conformance info for archetype\");",
          "content_same": false
        },
        {
          "line": 4403,
          "old_api": "getCaptureType",
          "new_api": null,
          "old_text": "t->getCaptureType()",
          "new_text": null,
          "old_line_content": "      visit(t->getCaptureType());",
          "new_line_content": "    void visitArchetypeType(CanArchetypeType type) {",
          "content_same": false
        },
        {
          "line": 4928,
          "old_api": "getAnyExistentialTypeProtocols",
          "new_api": null,
          "old_text": "destType.getAnyExistentialTypeProtocols(destProtocols)",
          "new_text": null,
          "old_line_content": "  destType.getAnyExistentialTypeProtocols(destProtocols);",
          "new_line_content": "                            srcTI, proto, *conformance);",
          "content_same": false
        },
        {
          "line": 4931,
          "old_api": "size",
          "new_api": null,
          "old_text": "conformances.size()",
          "new_text": null,
          "old_line_content": "  assert(destProtocols.size() == conformances.size() &&",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4420,
          "old_api": "llvm_unreachable",
          "new_api": null,
          "old_text": "llvm_unreachable(\"cannot store l-value type directly\")",
          "new_text": null,
          "old_line_content": "      llvm_unreachable(\"cannot store l-value type directly\");",
          "new_line_content": "    // value operations do not depend on the specifics of their",
          "content_same": false
        },
        {
          "line": 4933,
          "old_api": "size",
          "new_api": null,
          "old_text": "destProtocols.size()",
          "new_text": null,
          "old_line_content": "  for (unsigned i = 0, size = destProtocols.size(); i < size; ++i)",
          "new_line_content": "/// passing each emitted witness table index into the given function body.",
          "content_same": false
        },
        {
          "line": 4934,
          "old_api": "requiresProtocolWitnessTable",
          "new_api": null,
          "old_text": "requiresProtocolWitnessTable(destProtocols[i])",
          "new_text": null,
          "old_line_content": "    if (requiresProtocolWitnessTable(destProtocols[i]))",
          "new_line_content": "static void forEachProtocolWitnessTable(IRGenFunction &IGF,",
          "content_same": false
        },
        {
          "line": 4423,
          "old_api": "llvm_unreachable",
          "new_api": null,
          "old_text": "llvm_unreachable(\"cannot store inout type directly\")",
          "new_text": null,
          "old_line_content": "      llvm_unreachable(\"cannot store inout type directly\");",
          "new_line_content": "    void visitSILFunctionType(CanSILFunctionType fn) {}",
          "content_same": false
        },
        {
          "line": 4935,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "witnessConformances.push_back(conformances[i])",
          "new_text": null,
          "old_line_content": "      witnessConformances.push_back(conformances[i]);",
          "new_line_content": "                          CanType srcType, CanType destType,",
          "content_same": false
        },
        {
          "line": 4937,
          "old_api": "size",
          "new_api": null,
          "old_text": "witnessConformances.size()",
          "new_text": null,
          "old_line_content": "  assert(protocols.size() == witnessConformances.size() &&",
          "new_line_content": "                          ArrayRef<ProtocolConformance*> conformances,",
          "content_same": false
        },
        {
          "line": 4428,
          "old_api": "getParent",
          "new_api": null,
          "old_text": "type->getParent()",
          "new_text": null,
          "old_line_content": "      if (auto parent = CanType(type->getParent()))",
          "new_line_content": "    void visitProtocolCompositionType(CanProtocolCompositionType type) {}",
          "content_same": false
        },
        {
          "line": 4429,
          "old_api": "visit",
          "new_api": null,
          "old_text": "visit(parent)",
          "new_text": null,
          "old_line_content": "        visit(parent);",
          "new_line_content": "    void visitReferenceStorageType(CanReferenceStorageType type) {}",
          "content_same": false
        },
        {
          "line": 4940,
          "old_api": "getTypeInfoForUnlowered",
          "new_api": null,
          "old_text": "IGF.getTypeInfoForUnlowered(srcType)",
          "new_text": null,
          "old_line_content": "  auto &srcTI = IGF.getTypeInfoForUnlowered(srcType);",
          "new_line_content": "  SmallVector<ProtocolDecl*, 2> destProtocols;",
          "content_same": false
        },
        {
          "line": 4942,
          "old_api": "getProtocolWitnessTable",
          "new_api": null,
          "old_text": "getProtocolWitnessTable(IGF, srcType, srcTI,\n                                         protocols[i], witnessConformances[i])",
          "new_text": null,
          "old_line_content": "    auto table = getProtocolWitnessTable(IGF, srcType, srcTI,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4434,
          "old_api": "visit",
          "new_api": null,
          "old_text": "visit(parent)",
          "new_text": null,
          "old_line_content": "        visit(parent);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4435,
          "old_api": "getGenericArgs",
          "new_api": null,
          "old_text": "type->getGenericArgs()",
          "new_text": null,
          "old_line_content": "      for (auto arg : type->getGenericArgs())",
          "new_line_content": "    void visitInOutType(CanInOutType type) {",
          "content_same": false
        },
        {
          "line": 4956,
          "old_api": "getLayout",
          "new_api": null,
          "old_text": "ti.getLayout()",
          "new_text": null,
          "old_line_content": "  auto layout = ti.getLayout();",
          "new_line_content": "                                         protocols[i], witnessConformances[i]);",
          "content_same": false
        },
        {
          "line": 4958,
          "old_api": "loadMetadataRef",
          "new_api": null,
          "old_text": "layout.loadMetadataRef(IGF, container)",
          "new_text": null,
          "old_line_content": "  llvm::Value *metadata = layout.loadMetadataRef(IGF, container);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4959,
          "old_api": "projectExistentialBuffer",
          "new_api": null,
          "old_text": "layout.projectExistentialBuffer(IGF, container)",
          "new_text": null,
          "old_line_content": "  Address buffer = layout.projectExistentialBuffer(IGF, container);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4960,
          "old_api": "emitDeallocateBufferCall",
          "new_api": null,
          "old_text": "emitDeallocateBufferCall(IGF, metadata, buffer)",
          "new_text": null,
          "old_line_content": "  emitDeallocateBufferCall(IGF, metadata, buffer);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4455,
          "old_api": "getReplacement",
          "new_api": null,
          "old_text": "sub.getReplacement().findIf([&](Type t) -> bool {\n      if (auto archetype = dyn_cast<ArchetypeType>(t->getCanonicalType())) {\n        bindings.addArchetype(archetype);\n      }\n      return false;\n    })",
          "new_text": null,
          "old_line_content": "    sub.getReplacement().findIf([&](Type t) -> bool {",
          "new_line_content": "    // FIXME: Will need to bind the archetype that this eventually refers to.",
          "content_same": false
        },
        {
          "line": 4456,
          "old_api": "getCanonicalType",
          "new_api": null,
          "old_text": "t->getCanonicalType()",
          "new_text": null,
          "old_line_content": "      if (auto archetype = dyn_cast<ArchetypeType>(t->getCanonicalType())) {",
          "new_line_content": "    void visitDependentMemberType(CanDependentMemberType type) { }",
          "content_same": false
        },
        {
          "line": 4457,
          "old_api": "addArchetype",
          "new_api": null,
          "old_text": "bindings.addArchetype(archetype)",
          "new_text": null,
          "old_line_content": "        bindings.addArchetype(archetype);",
          "new_line_content": "  };",
          "content_same": false
        },
        {
          "line": 4975,
          "old_api": "getTypeInfo",
          "new_api": null,
          "old_text": "IGF.getTypeInfo(outType).as<ClassExistentialTypeInfo>()",
          "new_text": null,
          "old_line_content": "  auto &destTI = IGF.getTypeInfo(outType).as<ClassExistentialTypeInfo>();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4979,
          "old_api": "CreateBitCast",
          "new_api": null,
          "old_text": "IGF.Builder.CreateBitCast(instance, IGF.IGM.UnknownRefCountedPtrTy)",
          "new_text": null,
          "old_line_content": "    = IGF.Builder.CreateBitCast(instance, IGF.IGM.UnknownRefCountedPtrTy);",
          "new_line_content": "                               Explosion &out,",
          "content_same": false
        },
        {
          "line": 4980,
          "old_api": "add",
          "new_api": null,
          "old_text": "out.add(opaqueInstance)",
          "new_text": null,
          "old_line_content": "  out.add(opaqueInstance);",
          "new_line_content": "                               SILType outType,",
          "content_same": false
        },
        {
          "line": 4983,
          "old_api": "getSwiftRValueType",
          "new_api": null,
          "old_text": "forEachProtocolWitnessTable(IGF, instanceFormalType,\n                              outType.getSwiftRValueType(),\n                              destTI.getStoredProtocols(),\n                              conformances,\n                              [&](unsigned i, llvm::Value *ptable) {\n    out.add(ptable);\n  })",
          "new_text": null,
          "old_line_content": "  forEachProtocolWitnessTable(IGF, instanceFormalType,",
          "new_line_content": "                               SILType instanceLoweredType,",
          "content_same": false
        },
        {
          "line": 4984,
          "old_api": "getSwiftRValueType",
          "new_api": null,
          "old_text": "outType.getSwiftRValueType()",
          "new_text": null,
          "old_line_content": "                              outType.getSwiftRValueType(),",
          "new_line_content": "                               ArrayRef<ProtocolConformance*> conformances) {",
          "content_same": false
        },
        {
          "line": 4478,
          "old_api": "getConformsTo",
          "new_api": null,
          "old_text": "type->getConformsTo()",
          "new_text": null,
          "old_line_content": "    for (auto proto : type->getConformsTo())",
          "new_line_content": "NecessaryBindings",
          "content_same": false
        },
        {
          "line": 4479,
          "old_api": "requiresProtocolWitnessTable",
          "new_api": null,
          "old_text": "requiresProtocolWitnessTable(proto)",
          "new_text": null,
          "old_line_content": "      if (requiresProtocolWitnessTable(proto))",
          "new_line_content": "NecessaryBindings::forValueOperations(IRGenModule &IGM, CanType type) {",
          "content_same": false
        },
        {
          "line": 4483,
          "old_api": "getPointerSize",
          "new_api": null,
          "old_text": "IGM.getPointerSize()",
          "new_text": null,
          "old_line_content": "  return IGM.getPointerSize() * numPointers;",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4487,
          "old_api": "empty",
          "new_api": null,
          "old_text": "Types.empty()",
          "new_text": null,
          "old_line_content": "  if (Types.empty()) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5000,
          "old_api": "isClassExistentialType",
          "new_api": null,
          "old_text": "destType.isClassExistentialType()",
          "new_text": null,
          "old_line_content": "  assert(!destType.isClassExistentialType() &&",
          "new_line_content": "                              [&](unsigned i, llvm::Value *ptable) {",
          "content_same": false
        },
        {
          "line": 4490,
          "old_api": "getPointerTo",
          "new_api": null,
          "old_text": "IGF.IGM.TypeMetadataPtrTy->getPointerTo()",
          "new_text": null,
          "old_line_content": "  auto metatypePtrPtrTy = IGF.IGM.TypeMetadataPtrTy->getPointerTo();",
          "new_line_content": "    numPointers++;",
          "content_same": false
        },
        {
          "line": 5002,
          "old_api": "getTypeInfo",
          "new_api": null,
          "old_text": "IGF.getTypeInfo(destType).as<OpaqueExistentialTypeInfo>()",
          "new_text": null,
          "old_line_content": "  auto &destTI = IGF.getTypeInfo(destType).as<OpaqueExistentialTypeInfo>();",
          "new_line_content": "  });",
          "content_same": false
        },
        {
          "line": 5003,
          "old_api": "getTypeInfo",
          "new_api": null,
          "old_text": "IGF.getTypeInfo(loweredSrcType)",
          "new_text": null,
          "old_line_content": "  auto &srcTI = IGF.getTypeInfo(loweredSrcType);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4493,
          "old_api": "size",
          "new_api": null,
          "old_text": "Types.size()",
          "new_text": null,
          "old_line_content": "  for (unsigned archetypeI = 0, e = Types.size(), metadataI = 0;",
          "new_line_content": "        numPointers++;",
          "content_same": false
        },
        {
          "line": 5004,
          "old_api": "getLayout",
          "new_api": null,
          "old_text": "destTI.getLayout()",
          "new_text": null,
          "old_line_content": "  OpaqueExistentialLayout destLayout = destTI.getLayout();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5005,
          "old_api": "size",
          "new_api": null,
          "old_text": "conformances.size()",
          "new_text": null,
          "old_line_content": "  assert(destTI.getStoredProtocols().size() == conformances.size());",
          "new_line_content": "/// Emit an existential container initialization operation for a concrete type.",
          "content_same": false
        },
        {
          "line": 5008,
          "old_api": "emitTypeMetadataRef",
          "new_api": null,
          "old_text": "IGF.emitTypeMetadataRef(formalSrcType)",
          "new_text": null,
          "old_line_content": "  llvm::Value *metadata = IGF.emitTypeMetadataRef(formalSrcType);",
          "new_line_content": "                                  Address dest,",
          "content_same": false
        },
        {
          "line": 5009,
          "old_api": "projectMetadataRef",
          "new_api": null,
          "old_text": "destLayout.projectMetadataRef(IGF, dest)",
          "new_text": null,
          "old_line_content": "  IGF.Builder.CreateStore(metadata, destLayout.projectMetadataRef(IGF, dest));",
          "new_line_content": "                                  SILType destType,",
          "content_same": false
        },
        {
          "line": 4499,
          "old_api": "CreateConstArrayGEP",
          "new_api": null,
          "old_text": "IGF.Builder.CreateConstArrayGEP(slot, metadataI,\n                                                  IGF.IGM.getPointerSize())",
          "new_text": null,
          "old_line_content": "    if (metadataI) slot = IGF.Builder.CreateConstArrayGEP(slot, metadataI,",
          "new_line_content": "void NecessaryBindings::restore(IRGenFunction &IGF, Address buffer) const {",
          "content_same": false
        },
        {
          "line": 4505,
          "old_api": "getFullName",
          "new_api": null,
          "old_text": "archetype->getFullName()",
          "new_text": null,
          "old_line_content": "    metatype->setName(archetype->getFullName());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5020,
          "old_api": "getFixedPacking",
          "new_api": null,
          "old_text": "srcTI.getFixedPacking(IGF.IGM)",
          "new_text": null,
          "old_line_content": "    packing = srcTI.getFixedPacking(IGF.IGM);",
          "new_line_content": "  // First, write out the metadata.",
          "content_same": false
        },
        {
          "line": 4509,
          "old_api": "getConformsTo",
          "new_api": null,
          "old_text": "archetype->getConformsTo()",
          "new_text": null,
          "old_line_content": "    for (unsigned protocolI : indices(archetype->getConformsTo())) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4510,
          "old_api": "getConformsTo",
          "new_api": null,
          "old_text": "archetype->getConformsTo()",
          "new_text": null,
          "old_line_content": "      auto protocol = archetype->getConformsTo()[protocolI];",
          "new_line_content": "    // GEP to the appropriate slot.",
          "content_same": false
        },
        {
          "line": 4511,
          "old_api": "requiresProtocolWitnessTable",
          "new_api": null,
          "old_text": "requiresProtocolWitnessTable(protocol)",
          "new_text": null,
          "old_line_content": "      if (!requiresProtocolWitnessTable(protocol))",
          "new_line_content": "    Address slot = buffer;",
          "content_same": false
        },
        {
          "line": 5025,
          "old_api": "getSwiftRValueType",
          "new_api": null,
          "old_text": "destType.getSwiftRValueType()",
          "new_text": null,
          "old_line_content": "  forEachProtocolWitnessTable(IGF, formalSrcType, destType.getSwiftRValueType(),",
          "new_line_content": "  // concrete type, we need to know how it packs into a fixed-size",
          "content_same": false
        },
        {
          "line": 4514,
          "old_api": "getPointerSize",
          "new_api": null,
          "old_text": "IGF.IGM.getPointerSize()",
          "new_text": null,
          "old_line_content": "                                                      IGF.IGM.getPointerSize());",
          "new_line_content": "    ++metadataI;",
          "content_same": false
        },
        {
          "line": 4515,
          "old_api": "CreateBitCast",
          "new_api": null,
          "old_text": "IGF.Builder.CreateBitCast(witnessSlot,\n                                    IGF.IGM.WitnessTablePtrTy->getPointerTo())",
          "new_text": null,
          "old_line_content": "      witnessSlot = IGF.Builder.CreateBitCast(witnessSlot,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4516,
          "old_api": "getPointerTo",
          "new_api": null,
          "old_text": "IGF.IGM.WitnessTablePtrTy->getPointerTo()",
          "new_text": null,
          "old_line_content": "                                    IGF.IGM.WitnessTablePtrTy->getPointerTo());",
          "new_line_content": "    // Load the archetype's metatype.",
          "content_same": false
        },
        {
          "line": 5026,
          "old_api": "getStoredProtocols",
          "new_api": null,
          "old_text": "destTI.getStoredProtocols()",
          "new_text": null,
          "old_line_content": "                              destTI.getStoredProtocols(), conformances,",
          "new_line_content": "  // buffer.  If we don't, we need a value witness table.",
          "content_same": false
        },
        {
          "line": 5028,
          "old_api": "projectWitnessTable",
          "new_api": null,
          "old_text": "destLayout.projectWitnessTable(IGF, dest, i)",
          "new_text": null,
          "old_line_content": "    Address ptableSlot = destLayout.projectWitnessTable(IGF, dest, i);",
          "new_line_content": "  bool needValueWitnessToAllocate;",
          "content_same": false
        },
        {
          "line": 4520,
          "old_api": "setWitnessTable",
          "new_api": null,
          "old_text": "setWitnessTable(IGF, archetype, protocolI, witness)",
          "new_text": null,
          "old_line_content": "      setWitnessTable(IGF, archetype, protocolI, witness);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5035,
          "old_api": "projectExistentialBuffer",
          "new_api": null,
          "old_text": "destLayout.projectExistentialBuffer(IGF, dest)",
          "new_text": null,
          "old_line_content": "  Address buffer = destLayout.projectExistentialBuffer(IGF, dest);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4530,
          "old_api": "CreateBitCast",
          "new_api": null,
          "old_text": "IGF.Builder.CreateBitCast(buffer, metatypePtrPtrTy)",
          "new_text": null,
          "old_line_content": "  buffer = IGF.Builder.CreateBitCast(buffer, metatypePtrPtrTy);",
          "new_line_content": "      ++metadataI;",
          "content_same": false
        },
        {
          "line": 4532,
          "old_api": "size",
          "new_api": null,
          "old_text": "Types.size()",
          "new_text": null,
          "old_line_content": "  for (unsigned typeI = 0, typeE = Types.size(),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5049,
          "old_api": "Alignment",
          "new_api": null,
          "old_text": "Alignment(1)",
          "new_text": null,
          "old_line_content": "                   Alignment(1));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4538,
          "old_api": "CreateConstArrayGEP",
          "new_api": null,
          "old_text": "IGF.Builder.CreateConstArrayGEP(slot, metadataI,\n                                                  IGF.IGM.getPointerSize())",
          "new_text": null,
          "old_line_content": "    if (metadataI) slot = IGF.Builder.CreateConstArrayGEP(slot, metadataI,",
          "new_line_content": "void NecessaryBindings::save(IRGenFunction &IGF, Address buffer) const {",
          "content_same": false
        },
        {
          "line": 4546,
          "old_api": "CreateStore",
          "new_api": null,
          "old_text": "IGF.Builder.CreateStore(metatype, slot)",
          "new_text": null,
          "old_line_content": "    IGF.Builder.CreateStore(metatype, slot);",
          "new_line_content": "                metadataI = 0; typeI != typeE; ++typeI) {",
          "content_same": false
        },
        {
          "line": 4550,
          "old_api": "getConformsTo",
          "new_api": null,
          "old_text": "archetype->getConformsTo()",
          "new_text": null,
          "old_line_content": "    for (unsigned protocolI : indices(archetype->getConformsTo())) {",
          "new_line_content": "    Address slot = buffer;",
          "content_same": false
        },
        {
          "line": 5063,
          "old_api": "outType.is<ExistentialMetatypeType>()",
          "new_api": null,
          "old_text": "outType.is<ExistentialMetatypeType>()",
          "new_text": null,
          "old_line_content": "  assert(outType.is<ExistentialMetatypeType>());",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 5064,
          "old_api": "getTypeInfo",
          "new_api": null,
          "old_text": "IGF.getTypeInfo(outType).as<ExistentialMetatypeTypeInfo>()",
          "new_text": null,
          "old_line_content": "  auto &destTI = IGF.getTypeInfo(outType).as<ExistentialMetatypeTypeInfo>();",
          "new_line_content": "    // Otherwise, allocate using what we know statically about the type.",
          "content_same": false
        },
        {
          "line": 4554,
          "old_api": "CreateConstArrayGEP",
          "new_api": null,
          "old_text": "IGF.Builder.CreateConstArrayGEP(buffer, metadataI,\n                                                      IGF.IGM.getPointerSize())",
          "new_text": null,
          "old_line_content": "      Address witnessSlot = IGF.Builder.CreateConstArrayGEP(buffer, metadataI,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4555,
          "old_api": "getPointerSize",
          "new_api": null,
          "old_text": "IGF.IGM.getPointerSize()",
          "new_text": null,
          "old_line_content": "                                                      IGF.IGM.getPointerSize());",
          "new_line_content": "    // Find the metatype for the appropriate archetype and store it in",
          "content_same": false
        },
        {
          "line": 4556,
          "old_api": "CreateBitCast",
          "new_api": null,
          "old_text": "IGF.Builder.CreateBitCast(witnessSlot,\n                                    IGF.IGM.WitnessTablePtrTy->getPointerTo())",
          "new_text": null,
          "old_line_content": "      witnessSlot = IGF.Builder.CreateBitCast(witnessSlot,",
          "new_line_content": "    // the slot.",
          "content_same": false
        },
        {
          "line": 4557,
          "old_api": "getPointerTo",
          "new_api": null,
          "old_text": "IGF.IGM.WitnessTablePtrTy->getPointerTo()",
          "new_text": null,
          "old_line_content": "                                    IGF.IGM.WitnessTablePtrTy->getPointerTo());",
          "new_line_content": "    llvm::Value *metatype =",
          "content_same": false
        },
        {
          "line": 5067,
          "old_api": "getInstanceType",
          "new_api": null,
          "old_text": "metatypeType.castTo<MetatypeType>().getInstanceType()",
          "new_text": null,
          "old_line_content": "  auto srcType = metatypeType.castTo<MetatypeType>().getInstanceType();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 5068,
          "old_api": "getInstanceType",
          "new_api": null,
          "old_text": "outType.castTo<ExistentialMetatypeType>().getInstanceType()",
          "new_text": null,
          "old_line_content": "  auto destType = outType.castTo<ExistentialMetatypeType>().getInstanceType();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4560,
          "old_api": "LocalTypeData",
          "new_api": null,
          "old_text": "LocalTypeData(protocolI)",
          "new_text": null,
          "old_line_content": "        IGF.getLocalTypeData(CanType(archetype), LocalTypeData(protocolI));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4561,
          "old_api": "CreateStore",
          "new_api": null,
          "old_text": "IGF.Builder.CreateStore(witness, witnessSlot)",
          "new_text": null,
          "old_line_content": "      IGF.Builder.CreateStore(witness, witnessSlot);",
          "new_line_content": "    // Find the witness tables for the archetype's protocol constraints and",
          "content_same": false
        },
        {
          "line": 5069,
          "old_api": "dyn_cast<ExistentialMetatypeType>(destType)",
          "new_api": null,
          "old_text": "dyn_cast<ExistentialMetatypeType>(destType)",
          "new_text": null,
          "old_line_content": "  while (auto destMetatypeType = dyn_cast<ExistentialMetatypeType>(destType)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5070,
          "old_api": "getInstanceType",
          "new_api": null,
          "old_text": "destMetatypeType.getInstanceType()",
          "new_text": null,
          "old_line_content": "    destType = destMetatypeType.getInstanceType();",
          "new_line_content": "/// Emit an existential metatype container from a metatype value",
          "content_same": false
        },
        {
          "line": 5071,
          "old_api": "getInstanceType",
          "new_api": null,
          "old_text": "cast<MetatypeType>(srcType).getInstanceType()",
          "new_text": null,
          "old_line_content": "    srcType = cast<MetatypeType>(srcType).getInstanceType();",
          "new_line_content": "/// as an explosion.",
          "content_same": false
        },
        {
          "line": 5075,
          "old_api": "getStoredProtocols",
          "new_api": null,
          "old_text": "forEachProtocolWitnessTable(IGF, srcType, destType,\n                              destTI.getStoredProtocols(),\n                              conformances,\n                              [&](unsigned i, llvm::Value *ptable) {\n                                out.add(ptable);\n                              })",
          "new_text": null,
          "old_line_content": "  forEachProtocolWitnessTable(IGF, srcType, destType,",
          "new_line_content": "                               ArrayRef<ProtocolConformance*> conformances) {",
          "content_same": false
        },
        {
          "line": 5079,
          "old_api": "add",
          "new_api": null,
          "old_text": "out.add(ptable)",
          "new_text": null,
          "old_line_content": "                                out.add(ptable);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4571,
          "old_api": "CanArchetypeType",
          "new_api": null,
          "old_text": "CanArchetypeType(assocArchetype)",
          "new_text": null,
          "old_line_content": "        addArchetype(CanArchetypeType(assocArchetype));",
          "new_line_content": "      ++metadataI;",
          "content_same": false
        },
        {
          "line": 4578,
          "old_api": "requiresProtocolWitnessTable",
          "new_api": null,
          "old_text": "requiresProtocolWitnessTable(proto)",
          "new_text": null,
          "old_line_content": "  assert(requiresProtocolWitnessTable(proto) &&",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5090,
          "old_api": "getProtocolInfo",
          "new_api": null,
          "old_text": "IGF.IGM.getProtocolInfo(fnProto)",
          "new_text": null,
          "old_line_content": "  auto &fnProtoInfo = IGF.IGM.getProtocolInfo(fnProto);",
          "new_line_content": "                              conformances,",
          "content_same": false
        },
        {
          "line": 5091,
          "old_api": "getWitnessEntry",
          "new_api": null,
          "old_text": "fnProtoInfo.getWitnessEntry(fn).getFunctionIndex()",
          "new_text": null,
          "old_line_content": "  auto index = fnProtoInfo.getWitnessEntry(fn).getFunctionIndex();",
          "new_line_content": "                              [&](unsigned i, llvm::Value *ptable) {",
          "content_same": false
        },
        {
          "line": 4581,
          "old_api": "getTypeInfoForLowered",
          "new_api": null,
          "old_text": "getArchetypeInfo(IGF, archetype,\n                                  IGF.getTypeInfoForLowered(archetype))",
          "new_text": null,
          "old_line_content": "  auto &archTI = getArchetypeInfo(IGF, archetype,",
          "new_line_content": "    // Collect the associated archetypes.",
          "content_same": false
        },
        {
          "line": 5095,
          "old_api": "CreateBitCast",
          "new_api": null,
          "old_text": "IGF.Builder.CreateBitCast(witness, IGF.IGM.Int8PtrTy)",
          "new_text": null,
          "old_line_content": "  witness = IGF.Builder.CreateBitCast(witness, IGF.IGM.Int8PtrTy);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4585,
          "old_api": "getOriginIndex",
          "new_api": null,
          "old_text": "path.getOriginIndex()",
          "new_text": null,
          "old_line_content": "                                       path.getOriginIndex());",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4586,
          "old_api": "apply",
          "new_api": null,
          "old_text": "path.apply(IGF, wtable)",
          "new_text": null,
          "old_line_content": "  wtable = path.apply(IGF, wtable);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5098,
          "old_api": "add",
          "new_api": null,
          "old_text": "out.add(witness)",
          "new_text": null,
          "old_line_content": "  out.add(witness);",
          "new_line_content": "                                  ProtocolDecl *fnProto,",
          "content_same": false
        },
        {
          "line": 5100,
          "old_api": "add",
          "new_api": null,
          "old_text": "out.add(metadata)",
          "new_text": null,
          "old_line_content": "    out.add(metadata);",
          "new_line_content": "                                  llvm::Value *metadata,",
          "content_same": false
        },
        {
          "line": 5109,
          "old_api": "getDecl",
          "new_api": null,
          "old_text": "member.getDecl()",
          "new_text": null,
          "old_line_content": "  auto fn = cast<AbstractFunctionDecl>(member.getDecl());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4600,
          "old_api": "getReplacement",
          "new_api": null,
          "old_text": "sub.getReplacement()->getCanonicalType()",
          "new_text": null,
          "old_line_content": "  CanType replType = sub.getReplacement()->getCanonicalType();",
          "new_line_content": "  return wtable;",
          "content_same": false
        },
        {
          "line": 4603,
          "old_api": "dyn_cast<ArchetypeType>(replType)",
          "new_api": null,
          "old_text": "dyn_cast<ArchetypeType>(replType)",
          "new_text": null,
          "old_line_content": "  if (auto archetype = dyn_cast<ArchetypeType>(replType)) {",
          "new_line_content": "/// Emit the witness table references required for the given type",
          "content_same": false
        },
        {
          "line": 4604,
          "old_api": "getTypeInfoForLowered",
          "new_api": null,
          "old_text": "getArchetypeInfo(IGF, archetype,\n                                    IGF.getTypeInfoForLowered(archetype))",
          "new_text": null,
          "old_line_content": "    auto &archTI = getArchetypeInfo(IGF, archetype,",
          "new_line_content": "/// substitution.",
          "content_same": false
        },
        {
          "line": 4605,
          "old_api": "getTypeInfoForLowered",
          "new_api": null,
          "old_text": "IGF.getTypeInfoForLowered(archetype)",
          "new_text": null,
          "old_line_content": "                                    IGF.getTypeInfoForLowered(archetype));",
          "new_line_content": "void irgen::emitWitnessTableRefs(IRGenFunction &IGF,",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 101,
      "total_additions": 250,
      "total_deletions": 246,
      "total_api_changes": 597
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 14,
        "api_related_lines": 597,
        "non_api_lines": 8,
        "non_api_line_numbers": [
          4225,
          4229,
          4230,
          4217,
          4218,
          4219,
          4220,
          4221
        ]
      }
    },
    "api_calls_before": 2043,
    "api_calls_after": 2049,
    "diff_info": {
      "added_lines": 14,
      "removed_lines": 1,
      "total_diff_lines": 27
    }
  }
}
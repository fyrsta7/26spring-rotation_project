diff --git a/lib/SIL/SILValueProjection.cpp b/lib/SIL/SILValueProjection.cpp
index f478dca1884..cdb61445093 100644
--- a/lib/SIL/SILValueProjection.cpp
+++ b/lib/SIL/SILValueProjection.cpp
@@ -263,11 +263,11 @@ bool LSLocation::isMayAliasLSLocation(const LSLocation &RHS,
 
 bool LSLocation::isNonEscapingLocalLSLocation(SILFunction *Fn,
                                               EscapeAnalysis *EA) {
-  auto *ConGraph = EA->getConnectionGraph(Fn);
   // An alloc_stack is definitely dead at the end of the function.
   if (isa<AllocStackInst>(Base))
     return true;
   // For other allocations we ask escape analysis.
+  auto *ConGraph = EA->getConnectionGraph(Fn);
   if (isa<AllocationInst>(Base)) {
     auto *Node = ConGraph->getNodeOrNull(Base, EA);
     if (Node && !Node->escapes()) {

diff --git a/lib/SILPasses/PerformanceInliner.cpp b/lib/SILPasses/PerformanceInliner.cpp
index 7c494832737..2f59c9cbb63 100644
--- a/lib/SILPasses/PerformanceInliner.cpp
+++ b/lib/SILPasses/PerformanceInliner.cpp
@@ -1238,6 +1238,10 @@ void SILPerformanceInliner::inlineDevirtualizeAndSpecialize(
           NewFuncs.clear();
           assert(WorkItemApplies.empty() &&
                  "Expected all applies to be processed!");
+        } else if (WorkItem == Initial) {
+          break;
+        } else {
+          WorkList.pop_back();
         }
       } else if (WorkItem == Initial) {
         break;

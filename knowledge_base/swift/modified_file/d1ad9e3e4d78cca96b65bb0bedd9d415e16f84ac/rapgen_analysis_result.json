{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/swift/modified_file/d1ad9e3e4d78cca96b65bb0bedd9d415e16f84ac",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/swift/modified_file/d1ad9e3e4d78cca96b65bb0bedd9d415e16f84ac/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/swift/modified_file/d1ad9e3e4d78cca96b65bb0bedd9d415e16f84ac/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/swift/modified_file/d1ad9e3e4d78cca96b65bb0bedd9d415e16f84ac/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 193,
          "old_api": "getFunction",
          "new_api": "getMode",
          "old_text": "inst->getFunction()",
          "new_text": "inst->getMode()",
          "old_line_content": "            inst->getDest()->getType().isTrivial(*inst->getFunction())) {",
          "new_line_content": "            inst->getMode() == AssignByWrapperInst::Initialization;",
          "content_same": false
        },
        {
          "line": 196,
          "old_api": "createStore",
          "new_api": "createCopyAddr",
          "old_text": "b.createStore(loc, src, dest, StoreOwnershipQualifier::Assign)",
          "new_text": "b.createCopyAddr(loc, src, dest, IsTake,\n                           initialization ? IsInitialization\n                                          : IsNotInitialization)",
          "old_line_content": "          b.createStore(loc, src, dest, StoreOwnershipQualifier::Assign);",
          "new_line_content": "          b.createCopyAddr(loc, src, dest, IsTake,",
          "content_same": false
        },
        {
          "line": 210,
          "old_api": "push_back",
          "new_api": "getType",
          "old_text": "args.push_back(dest)",
          "new_text": "initFn->getType().castTo<SILFunctionType>()",
          "old_line_content": "          args.push_back(dest);",
          "new_line_content": "        CanSILFunctionType fTy = initFn->getType().castTo<SILFunctionType>();",
          "content_same": false
        },
        {
          "line": 211,
          "old_api": "getAssignByWrapperArgs",
          "new_api": "getModule",
          "old_text": "getAssignByWrapperArgs(args, src, convention, b, forCleanup)",
          "new_text": "inst->getModule()",
          "old_line_content": "          getAssignByWrapperArgs(args, src, convention, b, forCleanup);",
          "new_line_content": "        SILFunctionConventions convention(fTy, inst->getModule());",
          "content_same": false
        },
        {
          "line": 214,
          "old_api": "getAssignByWrapperArgs",
          "new_api": "getMode",
          "old_text": "getAssignByWrapperArgs(args, src, convention, b, forCleanup)",
          "new_text": "inst->getMode()",
          "old_line_content": "          getAssignByWrapperArgs(args, src, convention, b, forCleanup);",
          "new_line_content": "          if (inst->getMode() == AssignByWrapperInst::Assign)",
          "content_same": false
        },
        {
          "line": 217,
          "old_api": "getMode",
          "new_api": "push_back",
          "old_text": "inst->getMode()",
          "new_text": "args.push_back(dest)",
          "old_line_content": "          if (inst->getMode() == AssignByWrapperInst::Initialization ||",
          "new_line_content": "          args.push_back(dest);",
          "content_same": false
        },
        {
          "line": 218,
          "old_api": "getFunction",
          "new_api": "getAssignByWrapperArgs",
          "old_text": "inst->getFunction()",
          "new_text": "getAssignByWrapperArgs(args, src, convention, b, forCleanup)",
          "old_line_content": "              inst->getDest()->getType().isTrivial(*inst->getFunction())) {",
          "new_line_content": "          getAssignByWrapperArgs(args, src, convention, b, forCleanup);",
          "content_same": false
        },
        {
          "line": 219,
          "old_api": "createTrivialStoreOr",
          "new_api": "SubstitutionMap",
          "old_text": "b.createTrivialStoreOr(loc, wrappedSrc, dest,\n                                   StoreOwnershipQualifier::Init)",
          "new_text": "SubstitutionMap()",
          "old_line_content": "            b.createTrivialStoreOr(loc, wrappedSrc, dest,",
          "new_line_content": "          b.createApply(loc, initFn, SubstitutionMap(), args);",
          "content_same": false
        },
        {
          "line": 244,
          "old_api": "getType",
          "new_api": "getSetter",
          "old_text": "setterFn->getType().castTo<SILFunctionType>()",
          "new_text": "inst->getSetter()",
          "old_line_content": "      CanSILFunctionType fTy = setterFn->getType().castTo<SILFunctionType>();",
          "new_line_content": "      auto *setterPA = dyn_cast<PartialApplyInst>(inst->getSetter());",
          "content_same": false
        },
        {
          "line": 245,
          "old_api": "getModule",
          "new_api": "getNumArguments",
          "old_text": "inst->getModule()",
          "new_text": "setterPA->getNumArguments()",
          "old_line_content": "      SILFunctionConventions convention(fTy, inst->getModule());",
          "new_line_content": "      if (setterPA && setterPA->getNumArguments() == 1)",
          "content_same": false
        },
        {
          "line": 246,
          "old_api": "hasIndirectSILResults",
          "new_api": "getArgument",
          "old_text": "convention.hasIndirectSILResults()",
          "new_text": "setterPA->getArgument(0)",
          "old_line_content": "      assert(!convention.hasIndirectSILResults());",
          "new_line_content": "        toDelete.insert(setterPA->getArgument(0));",
          "content_same": false
        },
        {
          "line": 255,
          "old_api": "isa<BeginAccessInst>(dest)",
          "new_api": "getAssignByWrapperArgs",
          "old_text": "isa<BeginAccessInst>(dest)",
          "new_text": "getAssignByWrapperArgs(args, src, convention, b, forCleanup)",
          "old_line_content": "      if (isa<BeginAccessInst>(dest))",
          "new_line_content": "      getAssignByWrapperArgs(args, src, convention, b, forCleanup);",
          "content_same": false
        },
        {
          "line": 256,
          "old_api": "insert",
          "new_api": "SubstitutionMap",
          "old_text": "toDelete.insert(dest)",
          "new_text": "SubstitutionMap()",
          "old_line_content": "        toDelete.insert(dest);",
          "new_line_content": "      b.createApply(loc, setterFn, SubstitutionMap(), args);",
          "content_same": false
        },
        {
          "line": 263,
          "old_api": "eraseFromParent",
          "new_api": "insert",
          "old_text": "inst->eraseFromParent()",
          "new_text": "toDelete.insert(dest)",
          "old_line_content": "  inst->eraseFromParent();",
          "new_line_content": "        toDelete.insert(dest);",
          "content_same": false
        },
        {
          "line": 270,
          "old_api": "isa<EndAccessInst>(User)",
          "new_api": "eraseFromParent",
          "old_text": "isa<EndAccessInst>(User)",
          "new_text": "inst->eraseFromParent()",
          "old_line_content": "    if (!isa<EndAccessInst>(User))",
          "new_line_content": "  inst->eraseFromParent();",
          "content_same": false
        },
        {
          "line": 276,
          "old_api": "eraseFromParent",
          "new_api": "getUser",
          "old_text": "User->eraseFromParent()",
          "new_text": "Op->getUser()",
          "old_line_content": "    User->eraseFromParent();",
          "new_line_content": "    SILInstruction *User = Op->getUser();",
          "content_same": false
        },
        {
          "line": 283,
          "old_api": "getOwnershipQualifier",
          "new_api": "eraseFromParent",
          "old_text": "load->getOwnershipQualifier()",
          "new_text": "User->eraseFromParent()",
          "old_line_content": "  if (load->getOwnershipQualifier() != LoadOwnershipQualifier::Trivial &&",
          "new_line_content": "    User->eraseFromParent();",
          "content_same": false
        },
        {
          "line": 291,
          "old_api": "use_empty",
          "new_api": "getOwnershipQualifier",
          "old_text": "load->use_empty()",
          "new_text": "load->getOwnershipQualifier()",
          "old_line_content": "  while (!load->use_empty()) {",
          "new_line_content": "      load->getOwnershipQualifier() != LoadOwnershipQualifier::Copy)",
          "content_same": false
        },
        {
          "line": 294,
          "old_api": "eraseFromParent",
          "new_api": "getUses",
          "old_text": "load->eraseFromParent()",
          "new_text": "load->getUses()",
          "old_line_content": "  load->eraseFromParent();",
          "new_line_content": "  for (Operand *use : load->getUses()) {",
          "content_same": false
        },
        {
          "line": 341,
          "old_api": "getOperand",
          "new_api": "lowerAssignByWrapperInstruction",
          "old_text": "mui->getOperand()",
          "new_text": "lowerAssignByWrapperInstruction(b, ai, toDelete)",
          "old_line_content": "        mui->replaceAllUsesWith(mui->getOperand());",
          "new_line_content": "        lowerAssignByWrapperInstruction(b, ai, toDelete);",
          "content_same": false
        },
        {
          "line": 348,
          "old_api": "isa<MarkFunctionEscapeInst>(inst)",
          "new_api": "getOperand",
          "old_text": "isa<MarkFunctionEscapeInst>(inst)",
          "new_text": "mui->getOperand()",
          "old_line_content": "      if (isa<MarkFunctionEscapeInst>(inst)) {",
          "new_line_content": "        mui->replaceAllUsesWith(mui->getOperand());",
          "content_same": false
        },
        {
          "line": 355,
          "old_api": "dyn_cast<BeginAccessInst>(deadVal)",
          "new_api": "isa<MarkFunctionEscapeInst>(inst)",
          "old_text": "dyn_cast<BeginAccessInst>(deadVal)",
          "new_text": "isa<MarkFunctionEscapeInst>(inst)",
          "old_line_content": "      if (auto *beginAccess = dyn_cast<BeginAccessInst>(deadVal)) {",
          "new_line_content": "      if (isa<MarkFunctionEscapeInst>(inst)) {",
          "content_same": false
        },
        {
          "line": 356,
          "old_api": "deleteDeadAccessMarker",
          "new_api": "eraseFromParent",
          "old_text": "deleteDeadAccessMarker(beginAccess)",
          "new_text": "inst->eraseFromParent()",
          "old_line_content": "        deleteDeadAccessMarker(beginAccess);",
          "new_line_content": "        inst->eraseFromParent();",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 384,
          "old_api": null,
          "new_api": "wasDeserializedCanonical",
          "old_text": null,
          "new_text": "getFunction()->wasDeserializedCanonical()",
          "old_line_content": "  }",
          "new_line_content": "    if (getFunction()->wasDeserializedCanonical()) {",
          "content_same": false
        },
        {
          "line": 389,
          "old_api": null,
          "new_api": "getFunction",
          "old_text": null,
          "new_text": "getFunction()",
          "old_line_content": "SILTransform *swift::createRawSILInstLowering() {",
          "new_line_content": "    if (lowerRawSILOperations(*getFunction()))",
          "content_same": false
        },
        {
          "line": 262,
          "old_api": null,
          "new_api": "isa<BeginAccessInst>(dest)",
          "old_text": null,
          "new_text": "isa<BeginAccessInst>(dest)",
          "old_line_content": "  }",
          "new_line_content": "      if (isa<BeginAccessInst>(dest))",
          "content_same": false
        },
        {
          "line": 390,
          "old_api": null,
          "new_api": "invalidateAnalysis",
          "old_text": null,
          "new_text": "invalidateAnalysis(SILAnalysis::InvalidationKind::FunctionBody)",
          "old_line_content": "  return new RawSILInstLowering();",
          "new_line_content": "      invalidateAnalysis(SILAnalysis::InvalidationKind::FunctionBody);",
          "content_same": false
        },
        {
          "line": 266,
          "old_api": null,
          "new_api": "getInitializer",
          "old_text": null,
          "new_text": "inst->getInitializer()",
          "old_line_content": "static void deleteDeadAccessMarker(BeginAccessInst *BA) {",
          "new_line_content": "      toDelete.insert(inst->getInitializer());",
          "content_same": false
        },
        {
          "line": 275,
          "old_api": null,
          "new_api": "getUses",
          "old_text": null,
          "new_text": "BA->getUses()",
          "old_line_content": "  for (SILInstruction *User: Users) {",
          "new_line_content": "  for (Operand *Op : BA->getUses()) {",
          "content_same": false
        },
        {
          "line": 277,
          "old_api": null,
          "new_api": "isa<EndAccessInst>(User)",
          "old_text": null,
          "new_text": "isa<EndAccessInst>(User)",
          "old_line_content": "  }",
          "new_line_content": "    if (!isa<EndAccessInst>(User))",
          "content_same": false
        },
        {
          "line": 280,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "Users.push_back(User)",
          "old_line_content": "",
          "new_line_content": "    Users.push_back(User);",
          "content_same": false
        },
        {
          "line": 285,
          "old_api": null,
          "new_api": "eraseFromParent",
          "old_text": null,
          "new_text": "BA->eraseFromParent()",
          "old_line_content": "    return;",
          "new_line_content": "  BA->eraseFromParent();",
          "content_same": false
        },
        {
          "line": 290,
          "old_api": null,
          "new_api": "getOwnershipQualifier",
          "old_text": null,
          "new_text": "load->getOwnershipQualifier()",
          "old_line_content": "  }",
          "new_line_content": "  if (load->getOwnershipQualifier() != LoadOwnershipQualifier::Trivial &&",
          "content_same": false
        },
        {
          "line": 295,
          "old_api": null,
          "new_api": "getUser",
          "old_text": null,
          "new_text": "use->getUser()",
          "old_line_content": "}",
          "new_line_content": "    if (!isa<DestroyValueInst>(use->getUser()))",
          "content_same": false
        },
        {
          "line": 298,
          "old_api": null,
          "new_api": "use_empty",
          "old_text": null,
          "new_text": "load->use_empty()",
          "old_line_content": "/// 'assign' that are only used by this pass.  Now that definite initialization",
          "new_line_content": "  while (!load->use_empty()) {",
          "content_same": false
        },
        {
          "line": 299,
          "old_api": null,
          "new_api": "use_begin",
          "old_text": null,
          "new_text": "load->use_begin()->getUser()->eraseFromParent()",
          "old_line_content": "/// checking is done, remove them.",
          "new_line_content": "    load->use_begin()->getUser()->eraseFromParent();",
          "content_same": false
        },
        {
          "line": 301,
          "old_api": null,
          "new_api": "eraseFromParent",
          "old_text": null,
          "new_text": "load->eraseFromParent()",
          "old_line_content": "  bool changed = false;",
          "new_line_content": "  load->eraseFromParent();",
          "content_same": false
        },
        {
          "line": 313,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "bb.end()",
          "old_line_content": "      //",
          "new_line_content": "    auto i = bb.begin(), e = bb.end();",
          "content_same": false
        },
        {
          "line": 195,
          "old_api": null,
          "new_api": "getFunction",
          "old_text": null,
          "new_text": "inst->getFunction()",
          "old_line_content": "        } else {",
          "new_line_content": "        if (inst->getDest()->getType().isAddressOnly(*inst->getFunction())) {",
          "content_same": false
        },
        {
          "line": 200,
          "old_api": null,
          "new_api": "createTrivialStoreOr",
          "old_text": null,
          "new_text": "b.createTrivialStoreOr(loc, src, dest,\n                                 initialization\n                                     ? StoreOwnershipQualifier::Init\n                                     : StoreOwnershipQualifier::Assign)",
          "old_line_content": "",
          "new_line_content": "          b.createTrivialStoreOr(loc, src, dest,",
          "content_same": false
        },
        {
          "line": 328,
          "old_api": null,
          "new_api": "dyn_cast<AssignInst>(inst)",
          "old_text": null,
          "new_text": "dyn_cast<AssignInst>(inst)",
          "old_line_content": "        changed = true;",
          "new_line_content": "      if (auto *ai = dyn_cast<AssignInst>(inst)) {",
          "content_same": false
        },
        {
          "line": 330,
          "old_api": null,
          "new_api": "lowerAssignInstruction",
          "old_text": null,
          "new_text": "lowerAssignInstruction(b, ai)",
          "old_line_content": "      }",
          "new_line_content": "        lowerAssignInstruction(b, ai);",
          "content_same": false
        },
        {
          "line": 333,
          "old_api": null,
          "new_api": "getInsertionBB",
          "old_text": null,
          "new_text": "b.getInsertionBB()",
          "old_line_content": "        SILBuilderWithScope b(ai);",
          "new_line_content": "        if (b.getInsertionBB() != &bb)",
          "content_same": false
        },
        {
          "line": 209,
          "old_api": null,
          "new_api": "getInitializer",
          "old_text": null,
          "new_text": "inst->getInitializer()",
          "old_line_content": "",
          "new_line_content": "        SILValue initFn = inst->getInitializer();",
          "content_same": false
        },
        {
          "line": 339,
          "old_api": null,
          "new_api": "dyn_cast<AssignByWrapperInst>(inst)",
          "old_text": null,
          "new_text": "dyn_cast<AssignByWrapperInst>(inst)",
          "old_line_content": "      // mark_uninitialized just becomes a noop, resolving to its operand.",
          "new_line_content": "      if (auto *ai = dyn_cast<AssignByWrapperInst>(inst)) {",
          "content_same": false
        },
        {
          "line": 213,
          "old_api": null,
          "new_api": "hasIndirectSILResults",
          "old_text": null,
          "new_text": "convention.hasIndirectSILResults()",
          "old_line_content": "        } else {",
          "new_line_content": "        if (convention.hasIndirectSILResults()) {",
          "content_same": false
        },
        {
          "line": 215,
          "old_api": null,
          "new_api": "createDestroyAddr",
          "old_text": null,
          "new_text": "b.createDestroyAddr(loc, dest)",
          "old_line_content": "          SILValue wrappedSrc =",
          "new_line_content": "            b.createDestroyAddr(loc, dest);",
          "content_same": false
        },
        {
          "line": 347,
          "old_api": null,
          "new_api": "dyn_cast<MarkUninitializedInst>(inst)",
          "old_text": null,
          "new_text": "dyn_cast<MarkUninitializedInst>(inst)",
          "old_line_content": "      // mark_function_escape just gets zapped.",
          "new_line_content": "      if (auto *mui = dyn_cast<MarkUninitializedInst>(inst)) {",
          "content_same": false
        },
        {
          "line": 221,
          "old_api": null,
          "new_api": "getAssignByWrapperArgs",
          "old_text": null,
          "new_text": "getAssignByWrapperArgs(args, src, convention, b, forCleanup)",
          "old_line_content": "          } else {",
          "new_line_content": "          getAssignByWrapperArgs(args, src, convention, b, forCleanup);",
          "content_same": false
        },
        {
          "line": 223,
          "old_api": null,
          "new_api": "SubstitutionMap",
          "old_text": null,
          "new_text": "SubstitutionMap()",
          "old_line_content": "                          StoreOwnershipQualifier::Assign);",
          "new_line_content": "              b.createApply(loc, initFn, SubstitutionMap(), args);",
          "content_same": false
        },
        {
          "line": 224,
          "old_api": null,
          "new_api": "getMode",
          "old_text": null,
          "new_text": "inst->getMode()",
          "old_line_content": "          }",
          "new_line_content": "          if (inst->getMode() == AssignByWrapperInst::Initialization ||",
          "content_same": false
        },
        {
          "line": 225,
          "old_api": null,
          "new_api": "getFunction",
          "old_text": null,
          "new_text": "inst->getFunction()",
          "old_line_content": "        }",
          "new_line_content": "              inst->getDest()->getType().isTrivial(*inst->getFunction())) {",
          "content_same": false
        },
        {
          "line": 226,
          "old_api": null,
          "new_api": "createTrivialStoreOr",
          "old_text": null,
          "new_text": "b.createTrivialStoreOr(loc, wrappedSrc, dest,\n                                   StoreOwnershipQualifier::Init)",
          "old_line_content": "        break;",
          "new_line_content": "            b.createTrivialStoreOr(loc, wrappedSrc, dest,",
          "content_same": false
        },
        {
          "line": 229,
          "old_api": null,
          "new_api": "createStore",
          "old_text": null,
          "new_text": "b.createStore(loc, wrappedSrc, dest,\n                          StoreOwnershipQualifier::Assign)",
          "old_line_content": "",
          "new_line_content": "            b.createStore(loc, wrappedSrc, dest,",
          "content_same": false
        },
        {
          "line": 362,
          "old_api": null,
          "new_api": "dyn_cast<BeginAccessInst>(deadVal)",
          "old_text": null,
          "new_text": "dyn_cast<BeginAccessInst>(deadVal)",
          "old_line_content": "    }",
          "new_line_content": "      if (auto *beginAccess = dyn_cast<BeginAccessInst>(deadVal)) {",
          "content_same": false
        },
        {
          "line": 363,
          "old_api": null,
          "new_api": "deleteDeadAccessMarker",
          "old_text": null,
          "new_text": "deleteDeadAccessMarker(beginAccess)",
          "old_line_content": "  }",
          "new_line_content": "        deleteDeadAccessMarker(beginAccess);",
          "content_same": false
        },
        {
          "line": 364,
          "old_api": null,
          "new_api": "dyn_cast<LoadInst>(deadVal)",
          "old_text": null,
          "new_text": "dyn_cast<LoadInst>(deadVal)",
          "old_line_content": "  return changed;",
          "new_line_content": "      } else if (auto *load = dyn_cast<LoadInst>(deadVal)) {",
          "content_same": false
        },
        {
          "line": 365,
          "old_api": null,
          "new_api": "deleteDeadClosureArg",
          "old_text": null,
          "new_text": "deleteDeadClosureArg(load)",
          "old_line_content": "}",
          "new_line_content": "        deleteDeadClosureArg(load);",
          "content_same": false
        },
        {
          "line": 366,
          "old_api": null,
          "new_api": "dyn_cast<SingleValueInstruction>(deadVal)",
          "old_text": null,
          "new_text": "dyn_cast<SingleValueInstruction>(deadVal)",
          "old_line_content": "",
          "new_line_content": "      } else if (auto *svi = dyn_cast<SingleValueInstruction>(deadVal)) {",
          "content_same": false
        },
        {
          "line": 367,
          "old_api": null,
          "new_api": "tryDeleteDeadClosure",
          "old_text": null,
          "new_text": "tryDeleteDeadClosure(svi)",
          "old_line_content": "//===----------------------------------------------------------------------===//",
          "new_line_content": "        tryDeleteDeadClosure(svi);",
          "content_same": false
        },
        {
          "line": 240,
          "old_api": null,
          "new_api": "getSetter",
          "old_text": null,
          "new_text": "inst->getSetter()",
          "old_line_content": "      break;",
          "new_line_content": "      toDelete.insert(inst->getSetter());",
          "content_same": false
        },
        {
          "line": 250,
          "old_api": null,
          "new_api": "getSetter",
          "old_text": null,
          "new_text": "inst->getSetter()",
          "old_line_content": "",
          "new_line_content": "      SILValue setterFn = inst->getSetter();",
          "content_same": false
        },
        {
          "line": 251,
          "old_api": null,
          "new_api": "getType",
          "old_text": null,
          "new_text": "setterFn->getType().castTo<SILFunctionType>()",
          "old_line_content": "      // The destination address is not used. Remove it if it is a dead access",
          "new_line_content": "      CanSILFunctionType fTy = setterFn->getType().castTo<SILFunctionType>();",
          "content_same": false
        },
        {
          "line": 252,
          "old_api": null,
          "new_api": "getModule",
          "old_text": null,
          "new_text": "inst->getModule()",
          "old_line_content": "      // marker. This is important, because also the setter function contains",
          "new_line_content": "      SILFunctionConventions convention(fTy, inst->getModule());",
          "content_same": false
        },
        {
          "line": 253,
          "old_api": null,
          "new_api": "hasIndirectSILResults",
          "old_text": null,
          "new_text": "convention.hasIndirectSILResults()",
          "old_line_content": "      // access marker. In case those markers are dynamic it would cause a",
          "new_line_content": "      assert(!convention.hasIndirectSILResults());",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 259,
          "old_api": "getInitializer",
          "new_api": null,
          "old_text": "inst->getInitializer()",
          "new_text": null,
          "old_line_content": "      toDelete.insert(inst->getInitializer());",
          "new_line_content": "      // marker. This is important, because also the setter function contains",
          "content_same": false
        },
        {
          "line": 268,
          "old_api": "getUses",
          "new_api": null,
          "old_text": "BA->getUses()",
          "new_text": null,
          "old_line_content": "  for (Operand *Op : BA->getUses()) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 269,
          "old_api": "getUser",
          "new_api": null,
          "old_text": "Op->getUser()",
          "new_text": null,
          "old_line_content": "    SILInstruction *User = Op->getUser();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 273,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "Users.push_back(User)",
          "new_text": null,
          "old_line_content": "    Users.push_back(User);",
          "new_line_content": "static void deleteDeadAccessMarker(BeginAccessInst *BA) {",
          "content_same": false
        },
        {
          "line": 278,
          "old_api": "eraseFromParent",
          "new_api": null,
          "old_text": "BA->eraseFromParent()",
          "new_text": null,
          "old_line_content": "  BA->eraseFromParent();",
          "new_line_content": "      return;",
          "content_same": false
        },
        {
          "line": 284,
          "old_api": "getOwnershipQualifier",
          "new_api": null,
          "old_text": "load->getOwnershipQualifier()",
          "new_text": null,
          "old_line_content": "      load->getOwnershipQualifier() != LoadOwnershipQualifier::Copy)",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 287,
          "old_api": "getUses",
          "new_api": null,
          "old_text": "load->getUses()",
          "new_text": null,
          "old_line_content": "  for (Operand *use : load->getUses()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 288,
          "old_api": "getUser",
          "new_api": null,
          "old_text": "use->getUser()",
          "new_text": null,
          "old_line_content": "    if (!isa<DestroyValueInst>(use->getUser()))",
          "new_line_content": "/// Delete a dead load for a dead setter-closure.",
          "content_same": false
        },
        {
          "line": 292,
          "old_api": "use_begin",
          "new_api": null,
          "old_text": "load->use_begin()->getUser()->eraseFromParent()",
          "new_text": null,
          "old_line_content": "    load->use_begin()->getUser()->eraseFromParent();",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 306,
          "old_api": "end",
          "new_api": null,
          "old_text": "bb.end()",
          "new_text": null,
          "old_line_content": "    auto i = bb.begin(), e = bb.end();",
          "new_line_content": "/// checking is done, remove them.",
          "content_same": false
        },
        {
          "line": 192,
          "old_api": "getMode",
          "new_api": null,
          "old_text": "inst->getMode()",
          "new_text": null,
          "old_line_content": "        if (inst->getMode() == AssignByWrapperInst::Initialization ||",
          "new_line_content": "        bool initialization =",
          "content_same": false
        },
        {
          "line": 321,
          "old_api": "dyn_cast<AssignInst>(inst)",
          "new_api": null,
          "old_text": "dyn_cast<AssignInst>(inst)",
          "new_text": null,
          "old_line_content": "      if (auto *ai = dyn_cast<AssignInst>(inst)) {",
          "new_line_content": "      // * Unknown is considered unprocessed and is treated as [reassign] or",
          "content_same": false
        },
        {
          "line": 194,
          "old_api": "createTrivialStoreOr",
          "new_api": null,
          "old_text": "b.createTrivialStoreOr(loc, src, dest, StoreOwnershipQualifier::Init)",
          "new_text": null,
          "old_line_content": "          b.createTrivialStoreOr(loc, src, dest, StoreOwnershipQualifier::Init);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 323,
          "old_api": "lowerAssignInstruction",
          "new_api": null,
          "old_text": "lowerAssignInstruction(b, ai)",
          "new_text": null,
          "old_line_content": "        lowerAssignInstruction(b, ai);",
          "new_line_content": "      // * Init becomes a store [init] or a store [trivial] if the destination's",
          "content_same": false
        },
        {
          "line": 326,
          "old_api": "getInsertionBB",
          "new_api": null,
          "old_text": "b.getInsertionBB()",
          "new_text": null,
          "old_line_content": "        if (b.getInsertionBB() != &bb)",
          "new_line_content": "      //   dealloc_partial_ref.",
          "content_same": false
        },
        {
          "line": 202,
          "old_api": "getInitializer",
          "new_api": null,
          "old_text": "inst->getInitializer()",
          "new_text": null,
          "old_line_content": "        SILValue initFn = inst->getInitializer();",
          "new_line_content": "                                     ? StoreOwnershipQualifier::Init",
          "content_same": false
        },
        {
          "line": 203,
          "old_api": "getType",
          "new_api": null,
          "old_text": "initFn->getType().castTo<SILFunctionType>()",
          "new_text": null,
          "old_line_content": "        CanSILFunctionType fTy = initFn->getType().castTo<SILFunctionType>();",
          "new_line_content": "                                     : StoreOwnershipQualifier::Assign);",
          "content_same": false
        },
        {
          "line": 204,
          "old_api": "getModule",
          "new_api": null,
          "old_text": "inst->getModule()",
          "new_text": null,
          "old_line_content": "        SILFunctionConventions convention(fTy, inst->getModule());",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 332,
          "old_api": "dyn_cast<AssignByWrapperInst>(inst)",
          "new_api": null,
          "old_text": "dyn_cast<AssignByWrapperInst>(inst)",
          "new_text": null,
          "old_line_content": "      if (auto *ai = dyn_cast<AssignByWrapperInst>(inst)) {",
          "new_line_content": "        // reset our iteration range to the block after the insertion.",
          "content_same": false
        },
        {
          "line": 206,
          "old_api": "hasIndirectSILResults",
          "new_api": null,
          "old_text": "convention.hasIndirectSILResults()",
          "new_text": null,
          "old_line_content": "        if (convention.hasIndirectSILResults()) {",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 207,
          "old_api": "getMode",
          "new_api": null,
          "old_text": "inst->getMode()",
          "new_text": null,
          "old_line_content": "          if (inst->getMode() == AssignByWrapperInst::Assign)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 208,
          "old_api": "createDestroyAddr",
          "new_api": null,
          "old_text": "b.createDestroyAddr(loc, dest)",
          "new_text": null,
          "old_line_content": "            b.createDestroyAddr(loc, dest);",
          "new_line_content": "      case AssignByWrapperInst::Originator::PropertyWrapper: {",
          "content_same": false
        },
        {
          "line": 334,
          "old_api": "lowerAssignByWrapperInstruction",
          "new_api": null,
          "old_text": "lowerAssignByWrapperInstruction(b, ai, toDelete)",
          "new_text": null,
          "old_line_content": "        lowerAssignByWrapperInstruction(b, ai, toDelete);",
          "new_line_content": "          i = e;",
          "content_same": false
        },
        {
          "line": 212,
          "old_api": "SubstitutionMap",
          "new_api": null,
          "old_text": "SubstitutionMap()",
          "new_text": null,
          "old_line_content": "          b.createApply(loc, initFn, SubstitutionMap(), args);",
          "new_line_content": "        SmallVector<SILValue, 4> args;",
          "content_same": false
        },
        {
          "line": 340,
          "old_api": "dyn_cast<MarkUninitializedInst>(inst)",
          "new_api": null,
          "old_text": "dyn_cast<MarkUninitializedInst>(inst)",
          "new_text": null,
          "old_line_content": "      if (auto *mui = dyn_cast<MarkUninitializedInst>(inst)) {",
          "new_line_content": "        SILBuilderWithScope b(ai);",
          "content_same": false
        },
        {
          "line": 342,
          "old_api": "eraseFromParent",
          "new_api": null,
          "old_text": "mui->eraseFromParent()",
          "new_text": null,
          "old_line_content": "        mui->eraseFromParent();",
          "new_line_content": "        changed = true;",
          "content_same": false
        },
        {
          "line": 216,
          "old_api": "SubstitutionMap",
          "new_api": null,
          "old_text": "SubstitutionMap()",
          "new_text": null,
          "old_line_content": "              b.createApply(loc, initFn, SubstitutionMap(), args);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 222,
          "old_api": "createStore",
          "new_api": null,
          "old_text": "b.createStore(loc, wrappedSrc, dest,\n                          StoreOwnershipQualifier::Assign)",
          "new_text": null,
          "old_line_content": "            b.createStore(loc, wrappedSrc, dest,",
          "new_line_content": "          SILValue wrappedSrc =",
          "content_same": false
        },
        {
          "line": 357,
          "old_api": "dyn_cast<LoadInst>(deadVal)",
          "new_api": null,
          "old_text": "dyn_cast<LoadInst>(deadVal)",
          "new_text": null,
          "old_line_content": "      } else if (auto *load = dyn_cast<LoadInst>(deadVal)) {",
          "new_line_content": "        changed = true;",
          "content_same": false
        },
        {
          "line": 358,
          "old_api": "deleteDeadClosureArg",
          "new_api": null,
          "old_text": "deleteDeadClosureArg(load)",
          "new_text": null,
          "old_line_content": "        deleteDeadClosureArg(load);",
          "new_line_content": "        continue;",
          "content_same": false
        },
        {
          "line": 359,
          "old_api": "dyn_cast<SingleValueInstruction>(deadVal)",
          "new_api": null,
          "old_text": "dyn_cast<SingleValueInstruction>(deadVal)",
          "new_text": null,
          "old_line_content": "      } else if (auto *svi = dyn_cast<SingleValueInstruction>(deadVal)) {",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 360,
          "old_api": "tryDeleteDeadClosure",
          "new_api": null,
          "old_text": "tryDeleteDeadClosure(svi)",
          "new_text": null,
          "old_line_content": "        tryDeleteDeadClosure(svi);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 233,
          "old_api": "getSetter",
          "new_api": null,
          "old_text": "inst->getSetter()",
          "new_text": null,
          "old_line_content": "      toDelete.insert(inst->getSetter());",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 377,
          "old_api": "wasDeserializedCanonical",
          "new_api": null,
          "old_text": "getFunction()->wasDeserializedCanonical()",
          "new_text": null,
          "old_line_content": "    if (getFunction()->wasDeserializedCanonical()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 237,
          "old_api": "getSetter",
          "new_api": null,
          "old_text": "inst->getSetter()",
          "new_text": null,
          "old_line_content": "      auto *setterPA = dyn_cast<PartialApplyInst>(inst->getSetter());",
          "new_line_content": "      // The unused partial_apply violates memory lifetime rules in case \"self\"",
          "content_same": false
        },
        {
          "line": 238,
          "old_api": "getNumArguments",
          "new_api": null,
          "old_text": "setterPA->getNumArguments()",
          "new_text": null,
          "old_line_content": "      if (setterPA && setterPA->getNumArguments() == 1)",
          "new_line_content": "      // is an inout. Therefore we cannot keep it as a dead closure to be",
          "content_same": false
        },
        {
          "line": 239,
          "old_api": "getArgument",
          "new_api": null,
          "old_text": "setterPA->getArgument(0)",
          "new_text": null,
          "old_line_content": "        toDelete.insert(setterPA->getArgument(0));",
          "new_line_content": "      // cleaned up later. We have to delete it in this pass.",
          "content_same": false
        },
        {
          "line": 243,
          "old_api": "getSetter",
          "new_api": null,
          "old_text": "inst->getSetter()",
          "new_text": null,
          "old_line_content": "      SILValue setterFn = inst->getSetter();",
          "new_line_content": "      // deleted to avoid memory lifetime violations.",
          "content_same": false
        },
        {
          "line": 248,
          "old_api": "getAssignByWrapperArgs",
          "new_api": null,
          "old_text": "getAssignByWrapperArgs(args, src, convention, b, forCleanup)",
          "new_text": null,
          "old_line_content": "      getAssignByWrapperArgs(args, src, convention, b, forCleanup);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 249,
          "old_api": "SubstitutionMap",
          "new_api": null,
          "old_text": "SubstitutionMap()",
          "new_text": null,
          "old_line_content": "      b.createApply(loc, setterFn, SubstitutionMap(), args);",
          "new_line_content": "    case AssignByWrapperInst::AssignWrappedValue: {",
          "content_same": false
        },
        {
          "line": 382,
          "old_api": "getFunction",
          "new_api": null,
          "old_text": "getFunction()",
          "new_text": null,
          "old_line_content": "    if (lowerRawSILOperations(*getFunction()))",
          "new_line_content": "    // Do not try to relower raw instructions in canonical SIL. There won't be",
          "content_same": false
        },
        {
          "line": 383,
          "old_api": "invalidateAnalysis",
          "new_api": null,
          "old_text": "invalidateAnalysis(SILAnalysis::InvalidationKind::FunctionBody)",
          "new_text": null,
          "old_line_content": "      invalidateAnalysis(SILAnalysis::InvalidationKind::FunctionBody);",
          "new_line_content": "    // any there.",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 23,
      "total_additions": 42,
      "total_deletions": 42,
      "total_api_changes": 107
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 11,
        "api_related_lines": 107,
        "non_api_lines": 3,
        "non_api_line_numbers": [
          201,
          197,
          198
        ]
      }
    },
    "api_calls_before": 155,
    "api_calls_after": 155,
    "diff_info": {
      "added_lines": 11,
      "removed_lines": 4,
      "total_diff_lines": 28
    }
  }
}
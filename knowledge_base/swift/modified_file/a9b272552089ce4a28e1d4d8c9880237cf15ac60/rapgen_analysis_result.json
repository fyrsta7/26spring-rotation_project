{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/swift/modified_file/a9b272552089ce4a28e1d4d8c9880237cf15ac60",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/swift/modified_file/a9b272552089ce4a28e1d4d8c9880237cf15ac60/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/swift/modified_file/a9b272552089ce4a28e1d4d8c9880237cf15ac60/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/swift/modified_file/a9b272552089ce4a28e1d4d8c9880237cf15ac60/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 825,
          "old_api": "getKind",
          "new_api": "empty",
          "old_text": "llvm::remove_if(result, [&](StructuralRequirement structReq) {\n    auto req = structReq.req;\n\n    if (req.getKind() != RequirementKind::Conformance)\n      return false;\n\n    // Only consider requirements from defaults-expansion...\n    if (!structReq.fromDefault)\n      return false;\n\n    // involving an invertible protocol.\n    llvm::Optional<InvertibleProtocolKind> proto;\n    if (auto kp = req.getProtocolDecl()->getKnownProtocolKind())\n      if (auto ip = getInvertibleProtocolKind(*kp))\n        proto = *ip;\n\n    if (!proto) {\n      assert(false && \"suspicious!\");\n      return false;\n    }\n\n    // See if this subject is in-scope.\n    auto subject = req.getFirstType()->getCanonicalType();\n    auto result = inverses.find(subject);\n    if (result == inverses.end())\n      return false;\n\n    // We now have found the inferred constraint 'Subject : Proto'.\n    // So, remove it if we have recorded a 'Subject : ~Proto'.\n    auto recordedInverses = result->getSecond();\n    return recordedInverses.contains(*proto);\n  })",
          "new_text": "inverses.empty()",
          "old_line_content": "  result.erase(llvm::remove_if(result, [&](StructuralRequirement structReq) {",
          "new_line_content": "  if (inverses.empty())",
          "content_same": false
        },
        {
          "line": 842,
          "old_api": "assert",
          "new_api": "getProtocolDecl",
          "old_text": "assert(false && \"suspicious!\")",
          "new_text": "req.getProtocolDecl()->getKnownProtocolKind()",
          "old_line_content": "      assert(false && \"suspicious!\");",
          "new_line_content": "    if (auto kp = req.getProtocolDecl()->getKnownProtocolKind())",
          "content_same": false
        },
        {
          "line": 847,
          "old_api": "getFirstType",
          "new_api": "assert",
          "old_text": "req.getFirstType()->getCanonicalType()",
          "new_text": "assert(false && \"suspicious!\")",
          "old_line_content": "    auto subject = req.getFirstType()->getCanonicalType();",
          "new_line_content": "      assert(false && \"suspicious!\");",
          "content_same": false
        },
        {
          "line": 854,
          "old_api": "getSecond",
          "new_api": "end",
          "old_text": "result->getSecond()",
          "new_text": "inverses.end()",
          "old_line_content": "    auto recordedInverses = result->getSecond();",
          "new_line_content": "    if (result == inverses.end())",
          "content_same": false
        },
        {
          "line": 871,
          "old_api": "getResolvedType",
          "new_api": "getInnermostDeclContext",
          "old_text": "inheritedTypes.getResolvedType(index, TypeResolutionStage::Structural)",
          "new_text": "decl->getInnermostDeclContext()",
          "old_line_content": "        inheritedTypes.getResolvedType(index, TypeResolutionStage::Structural);",
          "new_line_content": "  auto *dc = decl->getInnermostDeclContext();",
          "content_same": false
        },
        {
          "line": 883,
          "old_api": "getTypeRepr",
          "new_api": "dyn_cast<ProtocolDecl>(decl)",
          "old_text": "inheritedTypes.getTypeRepr(index)",
          "new_text": "dyn_cast<ProtocolDecl>(decl)",
          "old_line_content": "    auto *typeRepr = inheritedTypes.getTypeRepr(index);",
          "new_line_content": "    if (auto *protoDecl = dyn_cast<ProtocolDecl>(decl)) {",
          "content_same": false
        },
        {
          "line": 884,
          "old_api": "SourceLoc",
          "new_api": "getDeclaredInterfaceType",
          "old_text": "SourceLoc()",
          "new_text": "protoDecl->getDeclaredInterfaceType()",
          "old_line_content": "    SourceLoc loc = (typeRepr ? typeRepr->getStartLoc() : SourceLoc());",
          "new_line_content": "      if (inheritedType->isEqual(protoDecl->getDeclaredInterfaceType()))",
          "content_same": false
        },
        {
          "line": 888,
          "old_api": "getInnermostDeclContext",
          "new_api": "getTypeRepr",
          "old_text": "decl->getInnermostDeclContext()",
          "new_text": "inheritedTypes.getTypeRepr(index)",
          "old_line_content": "                        decl->getInnermostDeclContext(), result);",
          "new_line_content": "    auto *typeRepr = inheritedTypes.getTypeRepr(index);",
          "content_same": false
        },
        {
          "line": 902,
          "old_api": "realizeTypeRequirement",
          "new_api": "getAttrs",
          "old_text": "realizeTypeRequirement(dc, type, inheritedType, loc, result, errors)",
          "new_text": "decl->getAttrs().getAttributes<SynthesizedProtocolAttr>()",
          "old_line_content": "    realizeTypeRequirement(dc, type, inheritedType, loc, result, errors);",
          "new_line_content": "  auto attrs = decl->getAttrs().getAttributes<SynthesizedProtocolAttr>();",
          "content_same": false
        },
        {
          "line": 926,
          "old_api": "size",
          "new_api": "InverseRequirement::enumerateDefaultedParams(proto, needsDefaultRequirements)",
          "old_text": "errors.size()",
          "new_text": "InverseRequirement::enumerateDefaultedParams(proto, needsDefaultRequirements)",
          "old_line_content": "  unsigned errorCount = errors.size();",
          "new_line_content": "  InverseRequirement::enumerateDefaultedParams(proto, needsDefaultRequirements);",
          "content_same": false
        },
        {
          "line": 949,
          "old_api": "visitRequirements",
          "new_api": "SourceLoc",
          "old_text": "WhereClauseOwner(proto).visitRequirements(TypeResolutionStage::Structural,\n      [&](const Requirement &req, RequirementRepr *reqRepr) {\n        realizeRequirement(proto, req, reqRepr,\n                           /*inferRequirements=*/false,\n                           result, errors);\n        return false;\n      })",
          "new_text": "SourceLoc()",
          "old_line_content": "  WhereClauseOwner(proto).visitRequirements(TypeResolutionStage::Structural,",
          "new_line_content": "          SourceLoc(), /*wasInferred=*/false});",
          "content_same": false
        },
        {
          "line": 963,
          "old_api": "getLoc",
          "new_api": "isObjC",
          "old_text": "proto->getLoc()",
          "new_text": "proto->isObjC()",
          "old_line_content": "                      proto->getLoc(), /*inferred=*/true});",
          "new_line_content": "  if (proto->isObjC()) {",
          "content_same": false
        },
        {
          "line": 965,
          "old_api": "desugarRequirements",
          "new_api": "LayoutConstraint::getLayoutConstraint(\n        LayoutConstraintKind::Class, ctx)",
          "old_text": "desugarRequirements(result, inverses, errors)",
          "new_text": "LayoutConstraint::getLayoutConstraint(\n        LayoutConstraintKind::Class, ctx)",
          "old_line_content": "    desugarRequirements(result, inverses, errors);",
          "new_line_content": "    auto layout = LayoutConstraint::getLayoutConstraint(",
          "content_same": false
        },
        {
          "line": 967,
          "old_api": "applyInverses",
          "new_api": "Requirement",
          "old_text": "applyInverses(ctx, needsDefaultRequirements, inverses, result, errors)",
          "new_text": "Requirement(RequirementKind::Layout, selfTy, layout)",
          "old_line_content": "    applyInverses(ctx, needsDefaultRequirements, inverses, result, errors);",
          "new_line_content": "    result.push_back({Requirement(RequirementKind::Layout, selfTy, layout),",
          "content_same": false
        },
        {
          "line": 972,
          "old_api": "AllocateCopy",
          "new_api": "applyInverses",
          "old_text": "ctx.AllocateCopy(result)",
          "new_text": "applyInverses(ctx, needsDefaultRequirements, inverses, result, errors)",
          "old_line_content": "    return ctx.AllocateCopy(result);",
          "new_line_content": "    applyInverses(ctx, needsDefaultRequirements, inverses, result, errors);",
          "content_same": false
        },
        {
          "line": 983,
          "old_api": "realizeInheritedRequirements",
          "new_api": "getAssociatedTypeMembers",
          "old_text": "realizeInheritedRequirements(assocTypeDecl, assocType,\n                                 /*inferRequirements=*/false,\n                                 result, errors)",
          "new_text": "proto->getAssociatedTypeMembers()",
          "old_line_content": "    realizeInheritedRequirements(assocTypeDecl, assocType,",
          "new_line_content": "  for (auto *assocTypeDecl : proto->getAssociatedTypeMembers()) {",
          "content_same": false
        },
        {
          "line": 988,
          "old_api": "visitRequirements",
          "new_api": "realizeInheritedRequirements",
          "old_text": "WhereClauseOwner(assocTypeDecl).visitRequirements(\n        TypeResolutionStage::Structural,\n        [&](const Requirement &req, RequirementRepr *reqRepr) {\n          realizeRequirement(proto, req, reqRepr,\n                             /*inferRequirements=*/false,\n                             result, errors);\n          return false;\n        })",
          "new_text": "realizeInheritedRequirements(assocTypeDecl, assocType,\n                                 /*inferRequirements=*/false,\n                                 result, errors)",
          "old_line_content": "    WhereClauseOwner(assocTypeDecl).visitRequirements(",
          "new_line_content": "    realizeInheritedRequirements(assocTypeDecl, assocType,",
          "content_same": false
        },
        {
          "line": 1004,
          "old_api": "dyn_cast<TypeAliasDecl>(decl)",
          "new_api": "getMembers",
          "old_text": "dyn_cast<TypeAliasDecl>(decl)",
          "new_text": "proto->getMembers()",
          "old_line_content": "    if (auto *typeAliasDecl = dyn_cast<TypeAliasDecl>(decl)) {",
          "new_line_content": "  for (auto *decl : proto->getMembers()) {",
          "content_same": false
        },
        {
          "line": 1010,
          "old_api": "getName",
          "new_api": "isGeneric",
          "old_text": "typeAliasDecl->getName()",
          "new_text": "typeAliasDecl->isGeneric()",
          "old_line_content": "        if (assocTypes.contains(typeAliasDecl->getName()))",
          "new_line_content": "      if (!typeAliasDecl->isGeneric()) {",
          "content_same": false
        },
        {
          "line": 1023,
          "old_api": "getName",
          "new_api": "getSinglyDesugaredType",
          "old_text": "DependentMemberType::get(\n            selfTy, typeAliasDecl->getName())",
          "new_text": "aliasType->getSinglyDesugaredType()",
          "old_line_content": "        auto subjectType = DependentMemberType::get(",
          "new_line_content": "          underlyingType = aliasType->getSinglyDesugaredType();",
          "content_same": false
        },
        {
          "line": 1038,
          "old_api": "diagnoseRequirementErrors",
          "new_api": "desugarRequirements",
          "old_text": "diagnoseRequirementErrors(ctx, errors,\n                            AllowConcreteTypePolicy::NestedAssocTypes)",
          "new_text": "desugarRequirements(result, inverses, errors)",
          "old_line_content": "  diagnoseRequirementErrors(ctx, errors,",
          "new_line_content": "  desugarRequirements(result, inverses, errors);",
          "content_same": false
        },
        {
          "line": 1041,
          "old_api": "AllocateCopy",
          "new_api": "applyInverses",
          "old_text": "ctx.AllocateCopy(result)",
          "new_text": "applyInverses(ctx, needsDefaultRequirements, inverses, result, errors)",
          "old_line_content": "  return ctx.AllocateCopy(result);",
          "new_line_content": "  applyInverses(ctx, needsDefaultRequirements, inverses, result, errors);",
          "content_same": false
        },
        {
          "line": 1071,
          "old_api": "getStructuralType",
          "new_api": "getASTContext",
          "old_text": "typealias->getStructuralType()",
          "new_text": "proto->getASTContext()",
          "old_line_content": "        auto type = typealias->getStructuralType();",
          "new_line_content": "  auto &ctx = proto->getASTContext();",
          "content_same": false
        },
        {
          "line": 1076,
          "old_api": "getUnderlyingType",
          "new_api": "getStructuralType",
          "old_text": "typealias->getUnderlyingType()",
          "new_text": "typealias->getStructuralType()",
          "old_line_content": "      return typealias->getUnderlyingType();",
          "new_line_content": "        auto type = typealias->getStructuralType();",
          "content_same": false
        },
        {
          "line": 1084,
          "old_api": "getRewriteContext",
          "new_api": "getDeclaredInterfaceType",
          "old_text": "ctx.getRewriteContext().getInheritedProtocols(proto)",
          "new_text": "typeDecl->getDeclaredInterfaceType()",
          "old_line_content": "  for (auto *inheritedProto : ctx.getRewriteContext().getInheritedProtocols(proto)) {",
          "new_line_content": "    return typeDecl->getDeclaredInterfaceType();",
          "content_same": false
        },
        {
          "line": 1089,
          "old_api": "getGenericParams",
          "new_api": "getRewriteContext",
          "old_text": "genReq->getGenericParams()",
          "new_text": "ctx.getRewriteContext().getInheritedProtocols(proto)",
          "old_line_content": "          if (genReq->getGenericParams())",
          "new_line_content": "  for (auto *inheritedProto : ctx.getRewriteContext().getInheritedProtocols(proto)) {",
          "content_same": false
        },
        {
          "line": 1094,
          "old_api": "dyn_cast<TypeAliasDecl>(req)",
          "new_api": "getGenericParams",
          "old_text": "dyn_cast<TypeAliasDecl>(req)",
          "new_text": "genReq->getGenericParams()",
          "old_line_content": "        if (auto *typeAlias = dyn_cast<TypeAliasDecl>(req))",
          "new_line_content": "          if (genReq->getGenericParams())",
          "content_same": false
        },
        {
          "line": 1136,
          "old_api": "print",
          "new_api": "getEntries",
          "old_text": "inheritedTypeRepr->print(out)",
          "new_text": "llvm::interleave(\n          assocType->getInherited().getEntries(),\n          [&](TypeLoc inheritedType) {\n            out << assocType->getName() << \": \";\n            if (auto inheritedTypeRepr = inheritedType.getTypeRepr())\n              inheritedTypeRepr->print(out);\n            else\n              inheritedType.getType().print(out);\n          },\n          [&] { out << \", \"; })",
          "old_line_content": "              inheritedTypeRepr->print(out);",
          "new_line_content": "      llvm::interleave(",
          "content_same": false
        },
        {
          "line": 1143,
          "old_api": "empty",
          "new_api": "getType",
          "old_text": "assocType->getInherited().empty()",
          "new_text": "inheritedType.getType().print(out)",
          "old_line_content": "        if (!assocType->getInherited().empty())",
          "new_line_content": "              inheritedType.getType().print(out);",
          "content_same": false
        },
        {
          "line": 1165,
          "old_api": "print",
          "new_api": "getName",
          "old_text": "typealias->getUnderlyingType().print(out)",
          "new_text": "type->getName()",
          "old_line_content": "          typealias->getUnderlyingType().print(out);",
          "new_line_content": "      out << type->getName() << \" == \";",
          "content_same": false
        },
        {
          "line": 1167,
          "old_api": "print",
          "new_api": "getUnderlyingTypeRepr",
          "old_text": "type->print(out)",
          "new_text": "typealias->getUnderlyingTypeRepr()",
          "old_line_content": "        type->print(out);",
          "new_line_content": "        if (auto underlyingTypeRepr = typealias->getUnderlyingTypeRepr())",
          "content_same": false
        },
        {
          "line": 1181,
          "old_api": "getAttrs",
          "new_api": "getName",
          "old_text": "assocTypeDecl->getAttrs().hasAttribute<OverrideAttr>()",
          "new_text": "assocTypeDecl->getName()",
          "old_line_content": "      !assocTypeDecl->getAttrs().hasAttribute<OverrideAttr>() &&",
          "new_line_content": "      inheritedTypeDecls.find(assocTypeDecl->getName());",
          "content_same": false
        },
        {
          "line": 1182,
          "old_api": "hasDefaultDefinitionType",
          "new_api": "end",
          "old_text": "assocTypeDecl->hasDefaultDefinitionType()",
          "new_text": "inheritedTypeDecls.end()",
          "old_line_content": "      !assocTypeDecl->hasDefaultDefinitionType() &&",
          "new_line_content": "    if (knownInherited == inheritedTypeDecls.end()) continue;",
          "content_same": false
        },
        {
          "line": 1189,
          "old_api": "dyn_cast<AssociatedTypeDecl>(inheritedType)",
          "new_api": "getTrailingWhereClause",
          "old_text": "dyn_cast<AssociatedTypeDecl>(inheritedType)",
          "new_text": "assocTypeDecl->getTrailingWhereClause()",
          "old_line_content": "            dyn_cast<AssociatedTypeDecl>(inheritedType)) {",
          "new_line_content": "        assocTypeDecl->getTrailingWhereClause() ||",
          "content_same": false
        },
        {
          "line": 1194,
          "old_api": "diagnose",
          "new_api": "dyn_cast<AssociatedTypeDecl>(inheritedType)",
          "old_text": "ctx.Diags.diagnose(assocTypeDecl,\n                             diag::inherited_associated_type_redecl,\n                             assocTypeDecl->getName(),\n                             inheritedFromProto->getDeclaredInterfaceType())\n            .fixItInsertAfter(\n                      fixItWhere.Loc,\n                      getAssociatedTypeReqs(assocTypeDecl, fixItWhere.Item))\n            .fixItRemove(assocTypeDecl->getSourceRange())",
          "new_text": "dyn_cast<AssociatedTypeDecl>(inheritedType)",
          "old_line_content": "          ctx.Diags.diagnose(assocTypeDecl,",
          "new_line_content": "            dyn_cast<AssociatedTypeDecl>(inheritedType)) {",
          "content_same": false
        },
        {
          "line": 1197,
          "old_api": "getDeclaredInterfaceType",
          "new_api": "getProtocol",
          "old_text": "inheritedFromProto->getDeclaredInterfaceType()",
          "new_text": "inheritedAssocTypeDecl->getProtocol()",
          "old_line_content": "                             inheritedFromProto->getDeclaredInterfaceType())",
          "new_line_content": "          auto inheritedFromProto = inheritedAssocTypeDecl->getProtocol();",
          "content_same": false
        },
        {
          "line": 1201,
          "old_api": "getSourceRange",
          "new_api": "getName",
          "old_text": "assocTypeDecl->getSourceRange()",
          "new_text": "assocTypeDecl->getName()",
          "old_line_content": "            .fixItRemove(assocTypeDecl->getSourceRange());",
          "new_line_content": "                             assocTypeDecl->getName(),",
          "content_same": false
        },
        {
          "line": 1220,
          "old_api": "getDeclaredInterfaceType",
          "new_api": "getDeclContext",
          "old_text": "inheritedOwningDecl->getDeclaredInterfaceType()",
          "new_text": "inheritedType->getDeclContext()->getSelfNominalTypeDecl()",
          "old_line_content": "                         inheritedOwningDecl->getDeclaredInterfaceType());",
          "new_line_content": "          inheritedType->getDeclContext()->getSelfNominalTypeDecl();",
          "content_same": false
        },
        {
          "line": 1225,
          "old_api": "erase",
          "new_api": "getDeclaredInterfaceType",
          "old_text": "inheritedTypeDecls.erase(knownInherited)",
          "new_text": "inheritedOwningDecl->getDeclaredInterfaceType()",
          "old_line_content": "    inheritedTypeDecls.erase(knownInherited);",
          "new_line_content": "                         inheritedOwningDecl->getDeclaredInterfaceType());",
          "content_same": false
        },
        {
          "line": 1230,
          "old_api": "remove_if",
          "new_api": "erase",
          "old_text": "inheritedTypeDecls.remove_if(\n    [&](const std::pair<Identifier, TinyPtrVector<TypeDecl *>> &inherited) {\n      const auto name = inherited.first;\n      for (auto found : proto->lookupDirect(name)) {\n        // We only want concrete type declarations.\n        auto type = dyn_cast<TypeDecl>(found);\n        if (!type || isa<AssociatedTypeDecl>(type)) continue;\n\n        // Ignore nominal types. They're always invalid declarations.\n        if (isa<NominalTypeDecl>(type))\n          continue;\n\n        // ... from the same module as the protocol.\n        if (type->getModuleContext() != proto->getModuleContext()) continue;\n\n        // Ignore types defined in constrained extensions; their equivalence\n        // to the associated type would have to be conditional, which we cannot\n        // model.\n        if (auto ext = dyn_cast<ExtensionDecl>(type->getDeclContext())) {\n          // FIXME: isConstrainedExtension() can cause request cycles because it\n          // computes a generic signature. getTrailingWhereClause() should be good\n          // enough for protocol extensions, which cannot specify constraints in\n          // any other way right now (eg, via requirement inference or by\n          // extending a bound generic type).\n          if (ext->getTrailingWhereClause()) continue;\n        }\n\n        // We found something.\n        bool shouldWarnAboutRedeclaration = true;\n\n        for (auto inheritedType : inherited.second) {\n          // If we have inherited associated type...\n          if (auto inheritedAssocTypeDecl =\n                dyn_cast<AssociatedTypeDecl>(inheritedType)) {\n            // Infer a same-type requirement between the typealias' underlying\n            // type and the inherited associated type.\n            recordInheritedTypeRequirement(inheritedAssocTypeDecl, type);\n\n            // Warn that one should use where clauses for this.\n            if (shouldWarnAboutRedeclaration) {\n              auto inheritedFromProto = inheritedAssocTypeDecl->getProtocol();\n              auto fixItWhere = getProtocolWhereLoc();\n              ctx.Diags.diagnose(type,\n                                 diag::typealias_override_associated_type,\n                                 name,\n                                 inheritedFromProto->getDeclaredInterfaceType())\n                .fixItInsertAfter(fixItWhere.Loc,\n                                  getConcreteTypeReq(type, fixItWhere.Item))\n                .fixItRemove(type->getSourceRange());\n              ctx.Diags.diagnose(inheritedAssocTypeDecl, diag::decl_declared_here,\n                                 inheritedAssocTypeDecl);\n\n              shouldWarnAboutRedeclaration = false;\n            }\n\n            continue;\n          }\n\n          // Two typealiases that should be the same.\n          recordInheritedTypeRequirement(inheritedType, type);\n        }\n\n        // We can remove this entry.\n        return true;\n      }\n\n      return false;\n  })",
          "new_text": "inheritedTypeDecls.erase(knownInherited)",
          "old_line_content": "  inheritedTypeDecls.remove_if(",
          "new_line_content": "    inheritedTypeDecls.erase(knownInherited);",
          "content_same": false
        },
        {
          "line": 1235,
          "old_api": "dyn_cast<TypeDecl>(found)",
          "new_api": "remove_if",
          "old_text": "dyn_cast<TypeDecl>(found)",
          "new_text": "inheritedTypeDecls.remove_if(\n    [&](const std::pair<Identifier, TinyPtrVector<TypeDecl *>> &inherited) {\n      const auto name = inherited.first;\n      for (auto found : proto->lookupDirect(name)) {\n        // We only want concrete type declarations.\n        auto type = dyn_cast<TypeDecl>(found);\n        if (!type || isa<AssociatedTypeDecl>(type)) continue;\n\n        // Ignore nominal types. They're always invalid declarations.\n        if (isa<NominalTypeDecl>(type))\n          continue;\n\n        // ... from the same module as the protocol.\n        if (type->getModuleContext() != proto->getModuleContext()) continue;\n\n        // Ignore types defined in constrained extensions; their equivalence\n        // to the associated type would have to be conditional, which we cannot\n        // model.\n        if (auto ext = dyn_cast<ExtensionDecl>(type->getDeclContext())) {\n          // FIXME: isConstrainedExtension() can cause request cycles because it\n          // computes a generic signature. getTrailingWhereClause() should be good\n          // enough for protocol extensions, which cannot specify constraints in\n          // any other way right now (eg, via requirement inference or by\n          // extending a bound generic type).\n          if (ext->getTrailingWhereClause()) continue;\n        }\n\n        // We found something.\n        bool shouldWarnAboutRedeclaration = true;\n\n        for (auto inheritedType : inherited.second) {\n          // If we have inherited associated type...\n          if (auto inheritedAssocTypeDecl =\n                dyn_cast<AssociatedTypeDecl>(inheritedType)) {\n            // Infer a same-type requirement between the typealias' underlying\n            // type and the inherited associated type.\n            recordInheritedTypeRequirement(inheritedAssocTypeDecl, type);\n\n            // Warn that one should use where clauses for this.\n            if (shouldWarnAboutRedeclaration) {\n              auto inheritedFromProto = inheritedAssocTypeDecl->getProtocol();\n              auto fixItWhere = getProtocolWhereLoc();\n              ctx.Diags.diagnose(type,\n                                 diag::typealias_override_associated_type,\n                                 name,\n                                 inheritedFromProto->getDeclaredInterfaceType())\n                .fixItInsertAfter(fixItWhere.Loc,\n                                  getConcreteTypeReq(type, fixItWhere.Item))\n                .fixItRemove(type->getSourceRange());\n              ctx.Diags.diagnose(inheritedAssocTypeDecl, diag::decl_declared_here,\n                                 inheritedAssocTypeDecl);\n\n              shouldWarnAboutRedeclaration = false;\n            }\n\n            continue;\n          }\n\n          // Two typealiases that should be the same.\n          recordInheritedTypeRequirement(inheritedType, type);\n        }\n\n        // We can remove this entry.\n        return true;\n      }\n\n      return false;\n  })",
          "old_line_content": "        auto type = dyn_cast<TypeDecl>(found);",
          "new_line_content": "  inheritedTypeDecls.remove_if(",
          "content_same": false
        },
        {
          "line": 1248,
          "old_api": "getDeclContext",
          "new_api": "getModuleContext",
          "old_text": "type->getDeclContext()",
          "new_text": "proto->getModuleContext()",
          "old_line_content": "        if (auto ext = dyn_cast<ExtensionDecl>(type->getDeclContext())) {",
          "new_line_content": "        if (type->getModuleContext() != proto->getModuleContext()) continue;",
          "content_same": false
        },
        {
          "line": 1271,
          "old_api": "getProtocolWhereLoc",
          "new_api": "recordInheritedTypeRequirement",
          "old_text": "getProtocolWhereLoc()",
          "new_text": "recordInheritedTypeRequirement(inheritedAssocTypeDecl, type)",
          "old_line_content": "              auto fixItWhere = getProtocolWhereLoc();",
          "new_line_content": "            recordInheritedTypeRequirement(inheritedAssocTypeDecl, type);",
          "content_same": false
        },
        {
          "line": 1275,
          "old_api": "getDeclaredInterfaceType",
          "new_api": "getProtocol",
          "old_text": "inheritedFromProto->getDeclaredInterfaceType()",
          "new_text": "inheritedAssocTypeDecl->getProtocol()",
          "old_line_content": "                                 inheritedFromProto->getDeclaredInterfaceType())",
          "new_line_content": "              auto inheritedFromProto = inheritedAssocTypeDecl->getProtocol();",
          "content_same": false
        },
        {
          "line": 1277,
          "old_api": "getConcreteTypeReq",
          "new_api": "diagnose",
          "old_text": "getConcreteTypeReq(type, fixItWhere.Item)",
          "new_text": "ctx.Diags.diagnose(type,\n                                 diag::typealias_override_associated_type,\n                                 name,\n                                 inheritedFromProto->getDeclaredInterfaceType())\n                .fixItInsertAfter(fixItWhere.Loc,\n                                  getConcreteTypeReq(type, fixItWhere.Item))\n                .fixItRemove(type->getSourceRange())",
          "old_line_content": "                                  getConcreteTypeReq(type, fixItWhere.Item))",
          "new_line_content": "              ctx.Diags.diagnose(type,",
          "content_same": false
        },
        {
          "line": 1309,
          "old_api": "diagnoseRequirementErrors",
          "new_api": "slice",
          "old_text": "diagnoseRequirementErrors(ctx, errors,\n                            AllowConcreteTypePolicy::NestedAssocTypes)",
          "new_text": "ArrayRef<TypeDecl *>(entry.second).slice(1)",
          "old_line_content": "  diagnoseRequirementErrors(ctx, errors,",
          "new_line_content": "    for (auto otherDecl : ArrayRef<TypeDecl *>(entry.second).slice(1)) {",
          "content_same": false
        },
        {
          "line": 1323,
          "old_api": "hasLazyRequirementSignature",
          "new_api": "getASTContext",
          "old_text": "proto->hasLazyRequirementSignature()",
          "new_text": "proto->getASTContext()",
          "old_line_content": "  if (proto->hasLazyRequirementSignature()) {",
          "new_line_content": "  auto &ctx = proto->getASTContext();",
          "content_same": false
        },
        {
          "line": 1330,
          "old_api": "AllocateCopy",
          "new_api": "getKind",
          "old_text": "ctx.AllocateCopy(result)",
          "new_text": "req.getKind()",
          "old_line_content": "    return ctx.AllocateCopy(result);",
          "new_line_content": "      if (req.getKind() == RequirementKind::Conformance) {",
          "content_same": false
        },
        {
          "line": 1341,
          "old_api": "AllocateCopy",
          "new_api": "getStructuralRequirements",
          "old_text": "ctx.AllocateCopy(result)",
          "new_text": "proto->getStructuralRequirements()",
          "old_line_content": "  return ctx.AllocateCopy(result);",
          "new_line_content": "  for (auto req : proto->getStructuralRequirements()) {",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1025,
          "old_api": null,
          "new_api": "underlyingType->is<UnboundGenericType>()",
          "old_text": null,
          "new_text": "underlyingType->is<UnboundGenericType>()",
          "old_line_content": "        Requirement req(RequirementKind::SameType, subjectType,",
          "new_line_content": "        if (underlyingType->is<UnboundGenericType>())",
          "content_same": false
        },
        {
          "line": 1028,
          "old_api": null,
          "new_api": "getName",
          "old_text": null,
          "new_text": "DependentMemberType::get(\n            selfTy, typeAliasDecl->getName())",
          "old_line_content": "                          /*inferred=*/false});",
          "new_line_content": "        auto subjectType = DependentMemberType::get(",
          "content_same": false
        },
        {
          "line": 1029,
          "old_api": null,
          "new_api": "getName",
          "old_text": null,
          "new_text": "typeAliasDecl->getName()",
          "old_line_content": "      }",
          "new_line_content": "            selfTy, typeAliasDecl->getName());",
          "content_same": false
        },
        {
          "line": 1032,
          "old_api": null,
          "new_api": "getLoc",
          "old_text": null,
          "new_text": "typeAliasDecl->getLoc()",
          "old_line_content": "",
          "new_line_content": "        result.push_back({req, typeAliasDecl->getLoc(),",
          "content_same": false
        },
        {
          "line": 1040,
          "old_api": null,
          "new_api": "InverseRequirement::expandDefaults(ctx, needsDefaultRequirements, result)",
          "old_text": null,
          "new_text": "InverseRequirement::expandDefaults(ctx, needsDefaultRequirements, result)",
          "old_line_content": "",
          "new_line_content": "  InverseRequirement::expandDefaults(ctx, needsDefaultRequirements, result);",
          "content_same": false
        },
        {
          "line": 1043,
          "old_api": null,
          "new_api": "diagnoseRequirementErrors",
          "old_text": null,
          "new_text": "diagnoseRequirementErrors(ctx, errors,\n                            AllowConcreteTypePolicy::NestedAssocTypes)",
          "old_line_content": "",
          "new_line_content": "  diagnoseRequirementErrors(ctx, errors,",
          "content_same": false
        },
        {
          "line": 1046,
          "old_api": null,
          "new_api": "AllocateCopy",
          "old_text": null,
          "new_text": "ctx.AllocateCopy(result)",
          "old_line_content": "/// expressed as requirements in the 'where' clause.",
          "new_line_content": "  return ctx.AllocateCopy(result);",
          "content_same": false
        },
        {
          "line": 1062,
          "old_api": null,
          "new_api": "isObjC",
          "old_text": null,
          "new_text": "proto->isObjC()",
          "old_line_content": "  SmallVector<Requirement, 2> result;",
          "new_line_content": "  if (proto->isObjC())",
          "content_same": false
        },
        {
          "line": 1063,
          "old_api": null,
          "new_api": "ArrayRef<Requirement>()",
          "old_text": null,
          "new_text": "ArrayRef<Requirement>()",
          "old_line_content": "  SmallVector<RequirementError, 2> errors;",
          "new_line_content": "    return ArrayRef<Requirement>();",
          "content_same": false
        },
        {
          "line": 1065,
          "old_api": null,
          "new_api": "hasLazyRequirementSignature",
          "old_text": null,
          "new_text": "proto->hasLazyRequirementSignature()",
          "old_line_content": "",
          "new_line_content": "  assert(!proto->hasLazyRequirementSignature());",
          "content_same": false
        },
        {
          "line": 1074,
          "old_api": null,
          "new_api": "dyn_cast<TypeAliasDecl>(typeDecl)",
          "old_text": null,
          "new_text": "dyn_cast<TypeAliasDecl>(typeDecl)",
          "old_line_content": "        return type;",
          "new_line_content": "    if (auto typealias = dyn_cast<TypeAliasDecl>(typeDecl)) {",
          "content_same": false
        },
        {
          "line": 1075,
          "old_api": null,
          "new_api": "getUnderlyingTypeRepr",
          "old_text": null,
          "new_text": "typealias->getUnderlyingTypeRepr()",
          "old_line_content": "      }",
          "new_line_content": "      if (typealias->getUnderlyingTypeRepr() != nullptr) {",
          "content_same": false
        },
        {
          "line": 1077,
          "old_api": null,
          "new_api": "getPointer",
          "old_text": null,
          "new_text": "type.getPointer()",
          "old_line_content": "    }",
          "new_line_content": "        if (auto *aliasTy = cast<TypeAliasType>(type.getPointer()))",
          "content_same": false
        },
        {
          "line": 1078,
          "old_api": null,
          "new_api": "getSinglyDesugaredType",
          "old_text": null,
          "new_text": "aliasTy->getSinglyDesugaredType()",
          "old_line_content": "",
          "new_line_content": "          return aliasTy->getSinglyDesugaredType();",
          "content_same": false
        },
        {
          "line": 1081,
          "old_api": null,
          "new_api": "getUnderlyingType",
          "old_text": null,
          "new_text": "typealias->getUnderlyingType()",
          "old_line_content": "",
          "new_line_content": "      return typealias->getUnderlyingType();",
          "content_same": false
        },
        {
          "line": 1090,
          "old_api": null,
          "new_api": "getMembers",
          "old_text": null,
          "new_text": "inheritedProto->getMembers()",
          "old_line_content": "            continue;",
          "new_line_content": "    for (auto req : inheritedProto->getMembers()) {",
          "content_same": false
        },
        {
          "line": 1091,
          "old_api": null,
          "new_api": "dyn_cast<TypeDecl>(req)",
          "old_text": null,
          "new_text": "dyn_cast<TypeDecl>(req)",
          "old_line_content": "",
          "new_line_content": "      if (auto *typeReq = dyn_cast<TypeDecl>(req)) {",
          "content_same": false
        },
        {
          "line": 1093,
          "old_api": null,
          "new_api": "dyn_cast<GenericTypeDecl>(req)",
          "old_text": null,
          "new_text": "dyn_cast<GenericTypeDecl>(req)",
          "old_line_content": "        // are like generic typealiases.",
          "new_line_content": "        if (auto genReq = dyn_cast<GenericTypeDecl>(req))",
          "content_same": false
        },
        {
          "line": 1099,
          "old_api": null,
          "new_api": "dyn_cast<TypeAliasDecl>(req)",
          "old_text": null,
          "new_text": "dyn_cast<TypeAliasDecl>(req)",
          "old_line_content": "      }",
          "new_line_content": "        if (auto *typeAlias = dyn_cast<TypeAliasDecl>(req))",
          "content_same": false
        },
        {
          "line": 1100,
          "old_api": null,
          "new_api": "getStructuralType",
          "old_text": null,
          "new_text": "getStructuralType(typeAlias)->is<UnboundGenericType>()",
          "old_line_content": "    }",
          "new_line_content": "          if (getStructuralType(typeAlias)->is<UnboundGenericType>())",
          "content_same": false
        },
        {
          "line": 1103,
          "old_api": null,
          "new_api": "getName",
          "old_text": null,
          "new_text": "typeReq->getName()",
          "old_line_content": "  // An inferred same-type requirement between the two type declarations",
          "new_line_content": "        inheritedTypeDecls[typeReq->getName()].push_back(typeReq);",
          "content_same": false
        },
        {
          "line": 1111,
          "old_api": null,
          "new_api": "Requirement",
          "old_text": null,
          "new_text": "Requirement(RequirementKind::SameType,\n                                   getStructuralType(first),\n                                   getStructuralType(second))",
          "old_line_content": "",
          "new_line_content": "    desugarRequirement(Requirement(RequirementKind::SameType,",
          "content_same": false
        },
        {
          "line": 1112,
          "old_api": null,
          "new_api": "getStructuralType",
          "old_text": null,
          "new_text": "getStructuralType(first)",
          "old_line_content": "  // Local function to find the insertion point for the protocol's \"where\"",
          "new_line_content": "                                   getStructuralType(first),",
          "content_same": false
        },
        {
          "line": 1113,
          "old_api": null,
          "new_api": "getStructuralType",
          "old_text": null,
          "new_text": "getStructuralType(second)",
          "old_line_content": "  // clause, as well as the string to start the insertion (\"where\" or \",\");",
          "new_line_content": "                                   getStructuralType(second)),",
          "content_same": false
        },
        {
          "line": 1114,
          "old_api": null,
          "new_api": "SourceLoc",
          "old_text": null,
          "new_text": "SourceLoc()",
          "old_line_content": "  auto getProtocolWhereLoc = [&]() -> Located<const char *> {",
          "new_line_content": "                               SourceLoc(), result, ignoredInverses, errors);",
          "content_same": false
        },
        {
          "line": 1121,
          "old_api": null,
          "new_api": "getTrailingWhereClause",
          "old_text": null,
          "new_text": "proto->getTrailingWhereClause()",
          "old_line_content": "  };",
          "new_line_content": "    if (auto trailing = proto->getTrailingWhereClause())",
          "content_same": false
        },
        {
          "line": 1122,
          "old_api": null,
          "new_api": "back",
          "old_text": null,
          "new_text": "trailing->getRequirements().back().getSourceRange()",
          "old_line_content": "",
          "new_line_content": "      return { \", \", trailing->getRequirements().back().getSourceRange().End };",
          "content_same": false
        },
        {
          "line": 1125,
          "old_api": null,
          "new_api": "getEndLoc",
          "old_text": null,
          "new_text": "proto->getInherited().getEndLoc()",
          "old_line_content": "  const auto getAssociatedTypeReqs = [&](const AssociatedTypeDecl *assocType,",
          "new_line_content": "    return { \" where \", proto->getInherited().getEndLoc() };",
          "content_same": false
        },
        {
          "line": 1137,
          "old_api": null,
          "new_api": "getEntries",
          "old_text": null,
          "new_text": "assocType->getInherited().getEntries()",
          "old_line_content": "            else",
          "new_line_content": "          assocType->getInherited().getEntries(),",
          "content_same": false
        },
        {
          "line": 1139,
          "old_api": null,
          "new_api": "getName",
          "old_text": null,
          "new_text": "assocType->getName()",
          "old_line_content": "          },",
          "new_line_content": "            out << assocType->getName() << \": \";",
          "content_same": false
        },
        {
          "line": 1140,
          "old_api": null,
          "new_api": "getTypeRepr",
          "old_text": null,
          "new_text": "inheritedType.getTypeRepr()",
          "old_line_content": "          [&] { out << \", \"; });",
          "new_line_content": "            if (auto inheritedTypeRepr = inheritedType.getTypeRepr())",
          "content_same": false
        },
        {
          "line": 1141,
          "old_api": null,
          "new_api": "print",
          "old_text": null,
          "new_text": "inheritedTypeRepr->print(out)",
          "old_line_content": "",
          "new_line_content": "              inheritedTypeRepr->print(out);",
          "content_same": false
        },
        {
          "line": 1147,
          "old_api": null,
          "new_api": "getTrailingWhereClause",
          "old_text": null,
          "new_text": "assocType->getTrailingWhereClause()",
          "old_line_content": "      }",
          "new_line_content": "      if (const auto whereClause = assocType->getTrailingWhereClause()) {",
          "content_same": false
        },
        {
          "line": 1148,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "assocType->getInherited().empty()",
          "old_line_content": "    }",
          "new_line_content": "        if (!assocType->getInherited().empty())",
          "content_same": false
        },
        {
          "line": 1151,
          "old_api": null,
          "new_api": "print",
          "old_text": null,
          "new_text": "whereClause->print(out, /*printWhereKeyword*/false)",
          "old_line_content": "",
          "new_line_content": "        whereClause->print(out, /*printWhereKeyword*/false);",
          "content_same": false
        },
        {
          "line": 1166,
          "old_api": null,
          "new_api": "dyn_cast<TypeAliasDecl>(type)",
          "old_text": null,
          "new_text": "dyn_cast<TypeAliasDecl>(type)",
          "old_line_content": "      } else {",
          "new_line_content": "      if (auto typealias = dyn_cast<TypeAliasDecl>(type)) {",
          "content_same": false
        },
        {
          "line": 1168,
          "old_api": null,
          "new_api": "print",
          "old_text": null,
          "new_text": "underlyingTypeRepr->print(out)",
          "old_line_content": "      }",
          "new_line_content": "          underlyingTypeRepr->print(out);",
          "content_same": false
        },
        {
          "line": 1170,
          "old_api": null,
          "new_api": "print",
          "old_text": null,
          "new_text": "typealias->getUnderlyingType().print(out)",
          "old_line_content": "    return result;",
          "new_line_content": "          typealias->getUnderlyingType().print(out);",
          "content_same": false
        },
        {
          "line": 1172,
          "old_api": null,
          "new_api": "print",
          "old_text": null,
          "new_text": "type->print(out)",
          "old_line_content": "",
          "new_line_content": "        type->print(out);",
          "content_same": false
        },
        {
          "line": 1178,
          "old_api": null,
          "new_api": "getAssociatedTypeMembers",
          "old_text": null,
          "new_text": "proto->getAssociatedTypeMembers()",
          "old_line_content": "",
          "new_line_content": "  for (auto assocTypeDecl : proto->getAssociatedTypeMembers()) {",
          "content_same": false
        },
        {
          "line": 1185,
          "old_api": null,
          "new_api": "getAttrs",
          "old_text": null,
          "new_text": "assocTypeDecl->getAttrs().hasAttribute<NonOverrideAttr>()",
          "old_line_content": "        ctx.LangOpts.WarnImplicitOverrides);",
          "new_line_content": "      !assocTypeDecl->getAttrs().hasAttribute<NonOverrideAttr>() &&",
          "content_same": false
        },
        {
          "line": 1186,
          "old_api": null,
          "new_api": "getAttrs",
          "old_text": null,
          "new_text": "assocTypeDecl->getAttrs().hasAttribute<OverrideAttr>()",
          "old_line_content": "    for (auto inheritedType : knownInherited->second) {",
          "new_line_content": "      !assocTypeDecl->getAttrs().hasAttribute<OverrideAttr>() &&",
          "content_same": false
        },
        {
          "line": 1187,
          "old_api": null,
          "new_api": "hasDefaultDefinitionType",
          "old_text": null,
          "new_text": "assocTypeDecl->hasDefaultDefinitionType()",
          "old_line_content": "      // If we have inherited associated type...",
          "new_line_content": "      !assocTypeDecl->hasDefaultDefinitionType() &&",
          "content_same": false
        },
        {
          "line": 1188,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "assocTypeDecl->getInherited().empty()",
          "old_line_content": "      if (auto inheritedAssocTypeDecl =",
          "new_line_content": "      (!assocTypeDecl->getInherited().empty() ||",
          "content_same": false
        },
        {
          "line": 1198,
          "old_api": null,
          "new_api": "getProtocolWhereLoc",
          "old_text": null,
          "new_text": "getProtocolWhereLoc()",
          "old_line_content": "            .fixItInsertAfter(",
          "new_line_content": "          auto fixItWhere = getProtocolWhereLoc();",
          "content_same": false
        },
        {
          "line": 1199,
          "old_api": null,
          "new_api": "diagnose",
          "old_text": null,
          "new_text": "ctx.Diags.diagnose(assocTypeDecl,\n                             diag::inherited_associated_type_redecl,\n                             assocTypeDecl->getName(),\n                             inheritedFromProto->getDeclaredInterfaceType())\n            .fixItInsertAfter(\n                      fixItWhere.Loc,\n                      getAssociatedTypeReqs(assocTypeDecl, fixItWhere.Item))\n            .fixItRemove(assocTypeDecl->getSourceRange())",
          "old_line_content": "                      fixItWhere.Loc,",
          "new_line_content": "          ctx.Diags.diagnose(assocTypeDecl,",
          "content_same": false
        },
        {
          "line": 1202,
          "old_api": null,
          "new_api": "getDeclaredInterfaceType",
          "old_text": null,
          "new_text": "inheritedFromProto->getDeclaredInterfaceType()",
          "old_line_content": "",
          "new_line_content": "                             inheritedFromProto->getDeclaredInterfaceType())",
          "content_same": false
        },
        {
          "line": 1205,
          "old_api": null,
          "new_api": "getAssociatedTypeReqs",
          "old_text": null,
          "new_text": "getAssociatedTypeReqs(assocTypeDecl, fixItWhere.Item)",
          "old_line_content": "",
          "new_line_content": "                      getAssociatedTypeReqs(assocTypeDecl, fixItWhere.Item))",
          "content_same": false
        },
        {
          "line": 1206,
          "old_api": null,
          "new_api": "getSourceRange",
          "old_text": null,
          "new_text": "assocTypeDecl->getSourceRange()",
          "old_line_content": "          shouldWarnAboutRedeclaration = false;",
          "new_line_content": "            .fixItRemove(assocTypeDecl->getSourceRange());",
          "content_same": false
        },
        {
          "line": 1208,
          "old_api": null,
          "new_api": "diagnose",
          "old_text": null,
          "new_text": "ctx.Diags.diagnose(inheritedAssocTypeDecl, diag::decl_declared_here,\n                             inheritedAssocTypeDecl)",
          "old_line_content": "",
          "new_line_content": "          ctx.Diags.diagnose(inheritedAssocTypeDecl, diag::decl_declared_here,",
          "content_same": false
        },
        {
          "line": 1221,
          "old_api": null,
          "new_api": "diagnose",
          "old_text": null,
          "new_text": "ctx.Diags.diagnose(assocTypeDecl,\n                         diag::associated_type_override_typealias,\n                         assocTypeDecl->getName(),\n                         inheritedOwningDecl->getDescriptiveKind(),\n                         inheritedOwningDecl->getDeclaredInterfaceType())",
          "old_line_content": "",
          "new_line_content": "      ctx.Diags.diagnose(assocTypeDecl,",
          "content_same": false
        },
        {
          "line": 1223,
          "old_api": null,
          "new_api": "getName",
          "old_text": null,
          "new_text": "assocTypeDecl->getName()",
          "old_line_content": "    }",
          "new_line_content": "                         assocTypeDecl->getName(),",
          "content_same": false
        },
        {
          "line": 1224,
          "old_api": null,
          "new_api": "getDescriptiveKind",
          "old_text": null,
          "new_text": "inheritedOwningDecl->getDescriptiveKind()",
          "old_line_content": "",
          "new_line_content": "                         inheritedOwningDecl->getDescriptiveKind(),",
          "content_same": false
        },
        {
          "line": 1227,
          "old_api": null,
          "new_api": "recordInheritedTypeRequirement",
          "old_text": null,
          "new_text": "recordInheritedTypeRequirement(assocTypeDecl, inheritedType)",
          "old_line_content": "",
          "new_line_content": "      recordInheritedTypeRequirement(assocTypeDecl, inheritedType);",
          "content_same": false
        },
        {
          "line": 1238,
          "old_api": null,
          "new_api": "lookupDirect",
          "old_text": null,
          "new_text": "proto->lookupDirect(name)",
          "old_line_content": "        // Ignore nominal types. They're always invalid declarations.",
          "new_line_content": "      for (auto found : proto->lookupDirect(name)) {",
          "content_same": false
        },
        {
          "line": 1240,
          "old_api": null,
          "new_api": "dyn_cast<TypeDecl>(found)",
          "old_text": null,
          "new_text": "dyn_cast<TypeDecl>(found)",
          "old_line_content": "          continue;",
          "new_line_content": "        auto type = dyn_cast<TypeDecl>(found);",
          "content_same": false
        },
        {
          "line": 1241,
          "old_api": null,
          "new_api": "isa<AssociatedTypeDecl>(type)",
          "old_text": null,
          "new_text": "isa<AssociatedTypeDecl>(type)",
          "old_line_content": "",
          "new_line_content": "        if (!type || isa<AssociatedTypeDecl>(type)) continue;",
          "content_same": false
        },
        {
          "line": 1244,
          "old_api": null,
          "new_api": "isa<NominalTypeDecl>(type)",
          "old_text": null,
          "new_text": "isa<NominalTypeDecl>(type)",
          "old_line_content": "",
          "new_line_content": "        if (isa<NominalTypeDecl>(type))",
          "content_same": false
        },
        {
          "line": 1253,
          "old_api": null,
          "new_api": "getDeclContext",
          "old_text": null,
          "new_text": "type->getDeclContext()",
          "old_line_content": "          // extending a bound generic type).",
          "new_line_content": "        if (auto ext = dyn_cast<ExtensionDecl>(type->getDeclContext())) {",
          "content_same": false
        },
        {
          "line": 1259,
          "old_api": null,
          "new_api": "getTrailingWhereClause",
          "old_text": null,
          "new_text": "ext->getTrailingWhereClause()",
          "old_line_content": "",
          "new_line_content": "          if (ext->getTrailingWhereClause()) continue;",
          "content_same": false
        },
        {
          "line": 1268,
          "old_api": null,
          "new_api": "dyn_cast<AssociatedTypeDecl>(inheritedType)",
          "old_text": null,
          "new_text": "dyn_cast<AssociatedTypeDecl>(inheritedType)",
          "old_line_content": "            // Warn that one should use where clauses for this.",
          "new_line_content": "                dyn_cast<AssociatedTypeDecl>(inheritedType)) {",
          "content_same": false
        },
        {
          "line": 1276,
          "old_api": null,
          "new_api": "getProtocolWhereLoc",
          "old_text": null,
          "new_text": "getProtocolWhereLoc()",
          "old_line_content": "                .fixItInsertAfter(fixItWhere.Loc,",
          "new_line_content": "              auto fixItWhere = getProtocolWhereLoc();",
          "content_same": false
        },
        {
          "line": 1280,
          "old_api": null,
          "new_api": "getDeclaredInterfaceType",
          "old_text": null,
          "new_text": "inheritedFromProto->getDeclaredInterfaceType()",
          "old_line_content": "                                 inheritedAssocTypeDecl);",
          "new_line_content": "                                 inheritedFromProto->getDeclaredInterfaceType())",
          "content_same": false
        },
        {
          "line": 1282,
          "old_api": null,
          "new_api": "getConcreteTypeReq",
          "old_text": null,
          "new_text": "getConcreteTypeReq(type, fixItWhere.Item)",
          "old_line_content": "              shouldWarnAboutRedeclaration = false;",
          "new_line_content": "                                  getConcreteTypeReq(type, fixItWhere.Item))",
          "content_same": false
        },
        {
          "line": 1283,
          "old_api": null,
          "new_api": "getSourceRange",
          "old_text": null,
          "new_text": "type->getSourceRange()",
          "old_line_content": "            }",
          "new_line_content": "                .fixItRemove(type->getSourceRange());",
          "content_same": false
        },
        {
          "line": 1284,
          "old_api": null,
          "new_api": "diagnose",
          "old_text": null,
          "new_text": "ctx.Diags.diagnose(inheritedAssocTypeDecl, diag::decl_declared_here,\n                                 inheritedAssocTypeDecl)",
          "old_line_content": "",
          "new_line_content": "              ctx.Diags.diagnose(inheritedAssocTypeDecl, diag::decl_declared_here,",
          "content_same": false
        },
        {
          "line": 1294,
          "old_api": null,
          "new_api": "recordInheritedTypeRequirement",
          "old_text": null,
          "new_text": "recordInheritedTypeRequirement(inheritedType, type)",
          "old_line_content": "      }",
          "new_line_content": "          recordInheritedTypeRequirement(inheritedType, type);",
          "content_same": false
        },
        {
          "line": 1306,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "entry.second.size()",
          "old_line_content": "    }",
          "new_line_content": "    if (entry.second.size() < 2) continue;",
          "content_same": false
        },
        {
          "line": 1308,
          "old_api": null,
          "new_api": "front",
          "old_text": null,
          "new_text": "entry.second.front()",
          "old_line_content": "",
          "new_line_content": "    auto firstDecl = entry.second.front();",
          "content_same": false
        },
        {
          "line": 1310,
          "old_api": null,
          "new_api": "recordInheritedTypeRequirement",
          "old_text": null,
          "new_text": "recordInheritedTypeRequirement(firstDecl, otherDecl)",
          "old_line_content": "                            AllowConcreteTypePolicy::NestedAssocTypes);",
          "new_line_content": "      recordInheritedTypeRequirement(firstDecl, otherDecl);",
          "content_same": false
        },
        {
          "line": 1314,
          "old_api": null,
          "new_api": "diagnoseRequirementErrors",
          "old_text": null,
          "new_text": "diagnoseRequirementErrors(ctx, errors,\n                            AllowConcreteTypePolicy::NestedAssocTypes)",
          "old_line_content": "",
          "new_line_content": "  diagnoseRequirementErrors(ctx, errors,",
          "content_same": false
        },
        {
          "line": 1317,
          "old_api": null,
          "new_api": "AllocateCopy",
          "old_text": null,
          "new_text": "ctx.AllocateCopy(result)",
          "old_line_content": "                                      ProtocolDecl *proto) const {",
          "new_line_content": "  return ctx.AllocateCopy(result);",
          "content_same": false
        },
        {
          "line": 1328,
          "old_api": null,
          "new_api": "hasLazyRequirementSignature",
          "old_text": null,
          "new_text": "proto->hasLazyRequirementSignature()",
          "old_line_content": "    }",
          "new_line_content": "  if (proto->hasLazyRequirementSignature()) {",
          "content_same": false
        },
        {
          "line": 1329,
          "old_api": null,
          "new_api": "getRequirements",
          "old_text": null,
          "new_text": "proto->getRequirementSignature().getRequirements()",
          "old_line_content": "",
          "new_line_content": "    for (auto req : proto->getRequirementSignature().getRequirements()) {",
          "content_same": false
        },
        {
          "line": 1331,
          "old_api": null,
          "new_api": "getProtocolDecl",
          "old_text": null,
          "new_text": "req.getProtocolDecl()",
          "old_line_content": "  }",
          "new_line_content": "        result.insert(req.getProtocolDecl());",
          "content_same": false
        },
        {
          "line": 1335,
          "old_api": null,
          "new_api": "AllocateCopy",
          "old_text": null,
          "new_text": "ctx.AllocateCopy(result)",
          "old_line_content": "  // signature. Look at the structural requirements instead.",
          "new_line_content": "    return ctx.AllocateCopy(result);",
          "content_same": false
        },
        {
          "line": 830,
          "old_api": null,
          "new_api": "getKind",
          "old_text": null,
          "new_text": "llvm::remove_if(result, [&](StructuralRequirement structReq) {\n    auto req = structReq.req;\n\n    if (req.getKind() != RequirementKind::Conformance)\n      return false;\n\n    // Only consider requirements from defaults-expansion...\n    if (!structReq.fromDefault)\n      return false;\n\n    // involving an invertible protocol.\n    llvm::Optional<InvertibleProtocolKind> proto;\n    if (auto kp = req.getProtocolDecl()->getKnownProtocolKind())\n      if (auto ip = getInvertibleProtocolKind(*kp))\n        proto = *ip;\n\n    if (!proto) {\n      assert(false && \"suspicious!\");\n      return false;\n    }\n\n    // See if this subject is in-scope.\n    auto subject = req.getFirstType()->getCanonicalType();\n    auto result = inverses.find(subject);\n    if (result == inverses.end())\n      return false;\n\n    // We now have found the inferred constraint 'Subject : Proto'.\n    // So, remove it if we have recorded a 'Subject : ~Proto'.\n    auto recordedInverses = result->getSecond();\n    return recordedInverses.contains(*proto);\n  })",
          "old_line_content": "",
          "new_line_content": "  result.erase(llvm::remove_if(result, [&](StructuralRequirement structReq) {",
          "content_same": false
        },
        {
          "line": 1342,
          "old_api": null,
          "new_api": "getKind",
          "old_text": null,
          "new_text": "req.req.getKind()",
          "old_line_content": "}",
          "new_line_content": "    if (req.req.getKind() == RequirementKind::Conformance)",
          "content_same": false
        },
        {
          "line": 1343,
          "old_api": null,
          "new_api": "getProtocolDecl",
          "old_text": null,
          "new_text": "req.req.getProtocolDecl()",
          "old_line_content": "",
          "new_line_content": "      result.insert(req.req.getProtocolDecl());",
          "content_same": false
        },
        {
          "line": 833,
          "old_api": null,
          "new_api": "getKind",
          "old_text": null,
          "new_text": "req.getKind()",
          "old_line_content": "      return false;",
          "new_line_content": "    if (req.getKind() != RequirementKind::Conformance)",
          "content_same": false
        },
        {
          "line": 1346,
          "old_api": null,
          "new_api": "AllocateCopy",
          "old_text": null,
          "new_text": "ctx.AllocateCopy(result)",
          "old_line_content": "",
          "new_line_content": "  return ctx.AllocateCopy(result);",
          "content_same": false
        },
        {
          "line": 843,
          "old_api": null,
          "new_api": "getInvertibleProtocolKind",
          "old_text": null,
          "new_text": "getInvertibleProtocolKind(*kp)",
          "old_line_content": "      return false;",
          "new_line_content": "      if (auto ip = getInvertibleProtocolKind(*kp))",
          "content_same": false
        },
        {
          "line": 852,
          "old_api": null,
          "new_api": "getFirstType",
          "old_text": null,
          "new_text": "req.getFirstType()->getCanonicalType()",
          "old_line_content": "    // We now have found the inferred constraint 'Subject : Proto'.",
          "new_line_content": "    auto subject = req.getFirstType()->getCanonicalType();",
          "content_same": false
        },
        {
          "line": 853,
          "old_api": null,
          "new_api": "find",
          "old_text": null,
          "new_text": "inverses.find(subject)",
          "old_line_content": "    // So, remove it if we have recorded a 'Subject : ~Proto'.",
          "new_line_content": "    auto result = inverses.find(subject);",
          "content_same": false
        },
        {
          "line": 859,
          "old_api": null,
          "new_api": "getSecond",
          "old_text": null,
          "new_text": "result->getSecond()",
          "old_line_content": "/// Collect structural requirements written in the inheritance clause of an",
          "new_line_content": "    auto recordedInverses = result->getSecond();",
          "content_same": false
        },
        {
          "line": 860,
          "old_api": null,
          "new_api": "contains",
          "old_text": null,
          "new_text": "recordedInverses.contains(*proto)",
          "old_line_content": "/// AssociatedTypeDecl, GenericTypeParamDecl, or ProtocolDecl.",
          "new_line_content": "    return recordedInverses.contains(*proto);",
          "content_same": false
        },
        {
          "line": 861,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "result.end()",
          "old_line_content": "void swift::rewriting::realizeInheritedRequirements(",
          "new_line_content": "  }), result.end());",
          "content_same": false
        },
        {
          "line": 870,
          "old_api": null,
          "new_api": "getInherited",
          "old_text": null,
          "new_text": "decl->getInherited()",
          "old_line_content": "    Type inheritedType =",
          "new_line_content": "  auto inheritedTypes = decl->getInherited();",
          "content_same": false
        },
        {
          "line": 872,
          "old_api": null,
          "new_api": "getParentModule",
          "old_text": null,
          "new_text": "dc->getParentModule()",
          "old_line_content": "",
          "new_line_content": "  auto *moduleForInference = dc->getParentModule();",
          "content_same": false
        },
        {
          "line": 874,
          "old_api": null,
          "new_api": "getIndices",
          "old_text": null,
          "new_text": "inheritedTypes.getIndices()",
          "old_line_content": "",
          "new_line_content": "  for (auto index : inheritedTypes.getIndices()) {",
          "content_same": false
        },
        {
          "line": 876,
          "old_api": null,
          "new_api": "getResolvedType",
          "old_text": null,
          "new_text": "inheritedTypes.getResolvedType(index, TypeResolutionStage::Structural)",
          "old_line_content": "    // since we diagnose that elsewhere. Adding a rule here would emit",
          "new_line_content": "        inheritedTypes.getResolvedType(index, TypeResolutionStage::Structural);",
          "content_same": false
        },
        {
          "line": 889,
          "old_api": null,
          "new_api": "SourceLoc",
          "old_text": null,
          "new_text": "SourceLoc()",
          "old_line_content": "    }",
          "new_line_content": "    SourceLoc loc = (typeRepr ? typeRepr->getStartLoc() : SourceLoc());",
          "content_same": false
        },
        {
          "line": 892,
          "old_api": null,
          "new_api": "getInnermostDeclContext",
          "old_text": null,
          "new_text": "inferRequirements(inheritedType, loc, moduleForInference,\n                        decl->getInnermostDeclContext(), result)",
          "old_line_content": "  }",
          "new_line_content": "      inferRequirements(inheritedType, loc, moduleForInference,",
          "content_same": false
        },
        {
          "line": 893,
          "old_api": null,
          "new_api": "getInnermostDeclContext",
          "old_text": null,
          "new_text": "decl->getInnermostDeclContext()",
          "old_line_content": "",
          "new_line_content": "                        decl->getInnermostDeclContext(), result);",
          "content_same": false
        },
        {
          "line": 896,
          "old_api": null,
          "new_api": "realizeTypeRequirement",
          "old_text": null,
          "new_text": "realizeTypeRequirement(dc, type, inheritedType, loc, result, errors)",
          "old_line_content": "  // without changing their inheritance lists.",
          "new_line_content": "    realizeTypeRequirement(dc, type, inheritedType, loc, result, errors);",
          "content_same": false
        },
        {
          "line": 904,
          "old_api": null,
          "new_api": "getProtocol",
          "old_text": null,
          "new_text": "attr->getProtocol()->getDeclaredType()",
          "old_line_content": "}",
          "new_line_content": "    auto inheritedType = attr->getProtocol()->getDeclaredType();",
          "content_same": false
        },
        {
          "line": 905,
          "old_api": null,
          "new_api": "getLocation",
          "old_text": null,
          "new_text": "attr->getLocation()",
          "old_line_content": "",
          "new_line_content": "    auto loc = attr->getLocation();",
          "content_same": false
        },
        {
          "line": 907,
          "old_api": null,
          "new_api": "realizeTypeRequirement",
          "old_text": null,
          "new_text": "realizeTypeRequirement(dc, type, inheritedType, loc, result, errors)",
          "old_line_content": "/// on the associated type declarations inside of a protocol.",
          "new_line_content": "    realizeTypeRequirement(dc, type, inheritedType, loc, result, errors);",
          "content_same": false
        },
        {
          "line": 919,
          "old_api": null,
          "new_api": "hasLazyRequirementSignature",
          "old_text": null,
          "new_text": "proto->hasLazyRequirementSignature()",
          "old_line_content": "",
          "new_line_content": "  assert(!proto->hasLazyRequirementSignature());",
          "content_same": false
        },
        {
          "line": 928,
          "old_api": null,
          "new_api": "getASTContext",
          "old_text": null,
          "new_text": "proto->getASTContext()",
          "old_line_content": "                               /*inferRequirements=*/false,",
          "new_line_content": "  auto &ctx = proto->getASTContext();",
          "content_same": false
        },
        {
          "line": 929,
          "old_api": null,
          "new_api": "getSelfInterfaceType",
          "old_text": null,
          "new_text": "proto->getSelfInterfaceType()",
          "old_line_content": "                               result, errors);",
          "new_line_content": "  auto selfTy = proto->getSelfInterfaceType();",
          "content_same": false
        },
        {
          "line": 932,
          "old_api": null,
          "new_api": "realizeInheritedRequirements",
          "old_text": null,
          "new_text": "realizeInheritedRequirements(proto, selfTy,\n                               /*inferRequirements=*/false,\n                               result, errors)",
          "old_line_content": "    // Add requirements from inherited protocols, which are obtained via",
          "new_line_content": "  realizeInheritedRequirements(proto, selfTy,",
          "content_same": false
        },
        {
          "line": 936,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "errors.size()",
          "old_line_content": "    //",
          "new_line_content": "  if (errors.size() > errorCount) {",
          "content_same": false
        },
        {
          "line": 945,
          "old_api": null,
          "new_api": "getInheritedProtocols",
          "old_text": null,
          "new_text": "proto->getInheritedProtocols()",
          "old_line_content": "    }",
          "new_line_content": "    for (auto *inheritedProto : proto->getInheritedProtocols()) {",
          "content_same": false
        },
        {
          "line": 946,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "result.push_back({\n          Requirement(RequirementKind::Conformance,\n                      selfTy, inheritedProto->getDeclaredInterfaceType()),\n          SourceLoc(), /*wasInferred=*/false})",
          "old_line_content": "  }",
          "new_line_content": "      result.push_back({",
          "content_same": false
        },
        {
          "line": 947,
          "old_api": null,
          "new_api": "getDeclaredInterfaceType",
          "old_text": null,
          "new_text": "Requirement(RequirementKind::Conformance,\n                      selfTy, inheritedProto->getDeclaredInterfaceType())",
          "old_line_content": "",
          "new_line_content": "          Requirement(RequirementKind::Conformance,",
          "content_same": false
        },
        {
          "line": 948,
          "old_api": null,
          "new_api": "getDeclaredInterfaceType",
          "old_text": null,
          "new_text": "inheritedProto->getDeclaredInterfaceType()",
          "old_line_content": "  // Add requirements from the protocol's own 'where' clause.",
          "new_line_content": "                      selfTy, inheritedProto->getDeclaredInterfaceType()),",
          "content_same": false
        },
        {
          "line": 954,
          "old_api": null,
          "new_api": "visitRequirements",
          "old_text": null,
          "new_text": "WhereClauseOwner(proto).visitRequirements(TypeResolutionStage::Structural,\n      [&](const Requirement &req, RequirementRepr *reqRepr) {\n        realizeRequirement(proto, req, reqRepr,\n                           /*inferRequirements=*/false,\n                           result, errors);\n        return false;\n      })",
          "old_line_content": "        return false;",
          "new_line_content": "  WhereClauseOwner(proto).visitRequirements(TypeResolutionStage::Structural,",
          "content_same": false
        },
        {
          "line": 956,
          "old_api": null,
          "new_api": "realizeRequirement",
          "old_text": null,
          "new_text": "realizeRequirement(proto, req, reqRepr,\n                           /*inferRequirements=*/false,\n                           result, errors)",
          "old_line_content": "",
          "new_line_content": "        realizeRequirement(proto, req, reqRepr,",
          "content_same": false
        },
        {
          "line": 968,
          "old_api": null,
          "new_api": "getLoc",
          "old_text": null,
          "new_text": "proto->getLoc()",
          "old_line_content": "",
          "new_line_content": "                      proto->getLoc(), /*inferred=*/true});",
          "content_same": false
        },
        {
          "line": 970,
          "old_api": null,
          "new_api": "desugarRequirements",
          "old_text": null,
          "new_text": "desugarRequirements(result, inverses, errors)",
          "old_line_content": "                              AllowConcreteTypePolicy::NestedAssocTypes);",
          "new_line_content": "    desugarRequirements(result, inverses, errors);",
          "content_same": false
        },
        {
          "line": 971,
          "old_api": null,
          "new_api": "InverseRequirement::expandDefaults(ctx, needsDefaultRequirements, result)",
          "old_text": null,
          "new_text": "InverseRequirement::expandDefaults(ctx, needsDefaultRequirements, result)",
          "old_line_content": "",
          "new_line_content": "    InverseRequirement::expandDefaults(ctx, needsDefaultRequirements, result);",
          "content_same": false
        },
        {
          "line": 974,
          "old_api": null,
          "new_api": "diagnoseRequirementErrors",
          "old_text": null,
          "new_text": "diagnoseRequirementErrors(ctx, errors,\n                              AllowConcreteTypePolicy::NestedAssocTypes)",
          "old_line_content": "",
          "new_line_content": "    diagnoseRequirementErrors(ctx, errors,",
          "content_same": false
        },
        {
          "line": 977,
          "old_api": null,
          "new_api": "AllocateCopy",
          "old_text": null,
          "new_text": "ctx.AllocateCopy(result)",
          "old_line_content": "",
          "new_line_content": "    return ctx.AllocateCopy(result);",
          "content_same": false
        },
        {
          "line": 984,
          "old_api": null,
          "new_api": "getName",
          "old_text": null,
          "new_text": "assocTypeDecl->getName()",
          "old_line_content": "                                 /*inferRequirements=*/false,",
          "new_line_content": "    assocTypes.insert(assocTypeDecl->getName());",
          "content_same": false
        },
        {
          "line": 987,
          "old_api": null,
          "new_api": "getDeclaredInterfaceType",
          "old_text": null,
          "new_text": "assocTypeDecl->getDeclaredInterfaceType()",
          "old_line_content": "    // Add requirements from this associated type's where clause.",
          "new_line_content": "    auto assocType = assocTypeDecl->getDeclaredInterfaceType();",
          "content_same": false
        },
        {
          "line": 993,
          "old_api": null,
          "new_api": "visitRequirements",
          "old_text": null,
          "new_text": "WhereClauseOwner(assocTypeDecl).visitRequirements(\n        TypeResolutionStage::Structural,\n        [&](const Requirement &req, RequirementRepr *reqRepr) {\n          realizeRequirement(proto, req, reqRepr,\n                             /*inferRequirements=*/false,\n                             result, errors);\n          return false;\n        })",
          "old_line_content": "                             result, errors);",
          "new_line_content": "    WhereClauseOwner(assocTypeDecl).visitRequirements(",
          "content_same": false
        },
        {
          "line": 996,
          "old_api": null,
          "new_api": "realizeRequirement",
          "old_text": null,
          "new_text": "realizeRequirement(proto, req, reqRepr,\n                             /*inferRequirements=*/false,\n                             result, errors)",
          "old_line_content": "  }",
          "new_line_content": "          realizeRequirement(proto, req, reqRepr,",
          "content_same": false
        },
        {
          "line": 1009,
          "old_api": null,
          "new_api": "dyn_cast<TypeAliasDecl>(decl)",
          "old_text": null,
          "new_text": "dyn_cast<TypeAliasDecl>(decl)",
          "old_line_content": "        // with -requirement-machine-protocol-signatures=verify.",
          "new_line_content": "    if (auto *typeAliasDecl = dyn_cast<TypeAliasDecl>(decl)) {",
          "content_same": false
        },
        {
          "line": 1015,
          "old_api": null,
          "new_api": "getName",
          "old_text": null,
          "new_text": "typeAliasDecl->getName()",
          "old_line_content": "        // in diagnostics.",
          "new_line_content": "        if (assocTypes.contains(typeAliasDecl->getName()))",
          "content_same": false
        },
        {
          "line": 1021,
          "old_api": null,
          "new_api": "getStructuralType",
          "old_text": null,
          "new_text": "typeAliasDecl->getStructuralType()",
          "old_line_content": "          continue;",
          "new_line_content": "        auto underlyingType = typeAliasDecl->getStructuralType();",
          "content_same": false
        },
        {
          "line": 1022,
          "old_api": null,
          "new_api": "getPointer",
          "old_text": null,
          "new_text": "underlyingType.getPointer()",
          "old_line_content": "",
          "new_line_content": "        if (auto *aliasType = dyn_cast<TypeAliasType>(underlyingType.getPointer()))",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1024,
          "old_api": "getName",
          "new_api": null,
          "old_text": "typeAliasDecl->getName()",
          "new_text": null,
          "old_line_content": "            selfTy, typeAliasDecl->getName());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1027,
          "old_api": "getLoc",
          "new_api": null,
          "old_text": "typeAliasDecl->getLoc()",
          "new_text": null,
          "old_line_content": "        result.push_back({req, typeAliasDecl->getLoc(),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1033,
          "old_api": "desugarRequirements",
          "new_api": null,
          "old_text": "desugarRequirements(result, inverses, errors)",
          "new_text": null,
          "old_line_content": "  desugarRequirements(result, inverses, errors);",
          "new_line_content": "                          /*inferred=*/false});",
          "content_same": false
        },
        {
          "line": 1035,
          "old_api": "InverseRequirement::expandDefaults(ctx, needsDefaultRequirements, result)",
          "new_api": null,
          "old_text": "InverseRequirement::expandDefaults(ctx, needsDefaultRequirements, result)",
          "new_text": null,
          "old_line_content": "  InverseRequirement::expandDefaults(ctx, needsDefaultRequirements, result);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1036,
          "old_api": "applyInverses",
          "new_api": null,
          "old_text": "applyInverses(ctx, needsDefaultRequirements, inverses, result, errors)",
          "new_text": null,
          "old_line_content": "  applyInverses(ctx, needsDefaultRequirements, inverses, result, errors);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1057,
          "old_api": "isObjC",
          "new_api": null,
          "old_text": "proto->isObjC()",
          "new_text": null,
          "old_line_content": "  if (proto->isObjC())",
          "new_line_content": "ArrayRef<Requirement>",
          "content_same": false
        },
        {
          "line": 1058,
          "old_api": "ArrayRef<Requirement>()",
          "new_api": null,
          "old_text": "ArrayRef<Requirement>()",
          "new_text": null,
          "old_line_content": "    return ArrayRef<Requirement>();",
          "new_line_content": "TypeAliasRequirementsRequest::evaluate(Evaluator &evaluator,",
          "content_same": false
        },
        {
          "line": 1060,
          "old_api": "hasLazyRequirementSignature",
          "new_api": null,
          "old_text": "proto->hasLazyRequirementSignature()",
          "new_text": null,
          "old_line_content": "  assert(!proto->hasLazyRequirementSignature());",
          "new_line_content": "  // @objc protocols don't have associated types, so all of the below",
          "content_same": false
        },
        {
          "line": 1066,
          "old_api": "getASTContext",
          "new_api": null,
          "old_text": "proto->getASTContext()",
          "new_text": null,
          "old_line_content": "  auto &ctx = proto->getASTContext();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1069,
          "old_api": "dyn_cast<TypeAliasDecl>(typeDecl)",
          "new_api": null,
          "old_text": "dyn_cast<TypeAliasDecl>(typeDecl)",
          "new_text": null,
          "old_line_content": "    if (auto typealias = dyn_cast<TypeAliasDecl>(typeDecl)) {",
          "new_line_content": "  SmallVector<InverseRequirement, 4> ignoredInverses;",
          "content_same": false
        },
        {
          "line": 1070,
          "old_api": "getUnderlyingTypeRepr",
          "new_api": null,
          "old_text": "typealias->getUnderlyingTypeRepr()",
          "new_text": null,
          "old_line_content": "      if (typealias->getUnderlyingTypeRepr() != nullptr) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1072,
          "old_api": "getPointer",
          "new_api": null,
          "old_text": "type.getPointer()",
          "new_text": null,
          "old_line_content": "        if (auto *aliasTy = cast<TypeAliasType>(type.getPointer()))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1073,
          "old_api": "getSinglyDesugaredType",
          "new_api": null,
          "old_text": "aliasTy->getSinglyDesugaredType()",
          "new_text": null,
          "old_line_content": "          return aliasTy->getSinglyDesugaredType();",
          "new_line_content": "  auto getStructuralType = [](TypeDecl *typeDecl) -> Type {",
          "content_same": false
        },
        {
          "line": 1079,
          "old_api": "getDeclaredInterfaceType",
          "new_api": null,
          "old_text": "typeDecl->getDeclaredInterfaceType()",
          "new_text": null,
          "old_line_content": "    return typeDecl->getDeclaredInterfaceType();",
          "new_line_content": "        return type;",
          "content_same": false
        },
        {
          "line": 1085,
          "old_api": "getMembers",
          "new_api": null,
          "old_text": "inheritedProto->getMembers()",
          "new_text": null,
          "old_line_content": "    for (auto req : inheritedProto->getMembers()) {",
          "new_line_content": "  };",
          "content_same": false
        },
        {
          "line": 1086,
          "old_api": "dyn_cast<TypeDecl>(req)",
          "new_api": null,
          "old_text": "dyn_cast<TypeDecl>(req)",
          "new_text": null,
          "old_line_content": "      if (auto *typeReq = dyn_cast<TypeDecl>(req)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1088,
          "old_api": "dyn_cast<GenericTypeDecl>(req)",
          "new_api": null,
          "old_text": "dyn_cast<GenericTypeDecl>(req)",
          "new_text": null,
          "old_line_content": "        if (auto genReq = dyn_cast<GenericTypeDecl>(req))",
          "new_line_content": "  llvm::MapVector<Identifier, TinyPtrVector<TypeDecl *>> inheritedTypeDecls;",
          "content_same": false
        },
        {
          "line": 1095,
          "old_api": "getStructuralType",
          "new_api": null,
          "old_text": "getStructuralType(typeAlias)->is<UnboundGenericType>()",
          "new_text": null,
          "old_line_content": "          if (getStructuralType(typeAlias)->is<UnboundGenericType>())",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 1098,
          "old_api": "getName",
          "new_api": null,
          "old_text": "typeReq->getName()",
          "new_text": null,
          "old_line_content": "        inheritedTypeDecls[typeReq->getName()].push_back(typeReq);",
          "new_line_content": "        // are like generic typealiases.",
          "content_same": false
        },
        {
          "line": 1106,
          "old_api": "Requirement",
          "new_api": null,
          "old_text": "Requirement(RequirementKind::SameType,\n                                   getStructuralType(first),\n                                   getStructuralType(second))",
          "new_text": null,
          "old_line_content": "    desugarRequirement(Requirement(RequirementKind::SameType,",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1107,
          "old_api": "getStructuralType",
          "new_api": null,
          "old_text": "getStructuralType(first)",
          "new_text": null,
          "old_line_content": "                                   getStructuralType(first),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1108,
          "old_api": "getStructuralType",
          "new_api": null,
          "old_text": "getStructuralType(second)",
          "new_text": null,
          "old_line_content": "                                   getStructuralType(second)),",
          "new_line_content": "  // An inferred same-type requirement between the two type declarations",
          "content_same": false
        },
        {
          "line": 1109,
          "old_api": "SourceLoc",
          "new_api": null,
          "old_text": "SourceLoc()",
          "new_text": null,
          "old_line_content": "                               SourceLoc(), result, ignoredInverses, errors);",
          "new_line_content": "  // within this protocol or a protocol it inherits.",
          "content_same": false
        },
        {
          "line": 1116,
          "old_api": "getTrailingWhereClause",
          "new_api": null,
          "old_text": "proto->getTrailingWhereClause()",
          "new_text": null,
          "old_line_content": "    if (auto trailing = proto->getTrailingWhereClause())",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1117,
          "old_api": "back",
          "new_api": null,
          "old_text": "trailing->getRequirements().back().getSourceRange()",
          "new_text": null,
          "old_line_content": "      return { \", \", trailing->getRequirements().back().getSourceRange().End };",
          "new_line_content": "  // Local function to find the insertion point for the protocol's \"where\"",
          "content_same": false
        },
        {
          "line": 1120,
          "old_api": "getEndLoc",
          "new_api": null,
          "old_text": "proto->getInherited().getEndLoc()",
          "new_text": null,
          "old_line_content": "    return { \" where \", proto->getInherited().getEndLoc() };",
          "new_line_content": "    // Already has a trailing where clause.",
          "content_same": false
        },
        {
          "line": 1131,
          "old_api": "getEntries",
          "new_api": null,
          "old_text": "llvm::interleave(\n          assocType->getInherited().getEntries(),\n          [&](TypeLoc inheritedType) {\n            out << assocType->getName() << \": \";\n            if (auto inheritedTypeRepr = inheritedType.getTypeRepr())\n              inheritedTypeRepr->print(out);\n            else\n              inheritedType.getType().print(out);\n          },\n          [&] { out << \", \"; })",
          "new_text": null,
          "old_line_content": "      llvm::interleave(",
          "new_line_content": "                                         const char *start) {",
          "content_same": false
        },
        {
          "line": 1132,
          "old_api": "getEntries",
          "new_api": null,
          "old_text": "assocType->getInherited().getEntries()",
          "new_text": null,
          "old_line_content": "          assocType->getInherited().getEntries(),",
          "new_line_content": "    std::string result;",
          "content_same": false
        },
        {
          "line": 1134,
          "old_api": "getName",
          "new_api": null,
          "old_text": "assocType->getName()",
          "new_text": null,
          "old_line_content": "            out << assocType->getName() << \": \";",
          "new_line_content": "      llvm::raw_string_ostream out(result);",
          "content_same": false
        },
        {
          "line": 1135,
          "old_api": "getTypeRepr",
          "new_api": null,
          "old_text": "inheritedType.getTypeRepr()",
          "new_text": null,
          "old_line_content": "            if (auto inheritedTypeRepr = inheritedType.getTypeRepr())",
          "new_line_content": "      out << start;",
          "content_same": false
        },
        {
          "line": 1138,
          "old_api": "getType",
          "new_api": null,
          "old_text": "inheritedType.getType().print(out)",
          "new_text": null,
          "old_line_content": "              inheritedType.getType().print(out);",
          "new_line_content": "          [&](TypeLoc inheritedType) {",
          "content_same": false
        },
        {
          "line": 1142,
          "old_api": "getTrailingWhereClause",
          "new_api": null,
          "old_text": "assocType->getTrailingWhereClause()",
          "new_text": null,
          "old_line_content": "      if (const auto whereClause = assocType->getTrailingWhereClause()) {",
          "new_line_content": "            else",
          "content_same": false
        },
        {
          "line": 1146,
          "old_api": "print",
          "new_api": null,
          "old_text": "whereClause->print(out, /*printWhereKeyword*/false)",
          "new_text": null,
          "old_line_content": "        whereClause->print(out, /*printWhereKeyword*/false);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1160,
          "old_api": "getName",
          "new_api": null,
          "old_text": "type->getName()",
          "new_text": null,
          "old_line_content": "      out << type->getName() << \" == \";",
          "new_line_content": "  auto getConcreteTypeReq = [&](TypeDecl *type, const char *start) {",
          "content_same": false
        },
        {
          "line": 1161,
          "old_api": "dyn_cast<TypeAliasDecl>(type)",
          "new_api": null,
          "old_text": "dyn_cast<TypeAliasDecl>(type)",
          "new_text": null,
          "old_line_content": "      if (auto typealias = dyn_cast<TypeAliasDecl>(type)) {",
          "new_line_content": "    std::string result;",
          "content_same": false
        },
        {
          "line": 1162,
          "old_api": "getUnderlyingTypeRepr",
          "new_api": null,
          "old_text": "typealias->getUnderlyingTypeRepr()",
          "new_text": null,
          "old_line_content": "        if (auto underlyingTypeRepr = typealias->getUnderlyingTypeRepr())",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1163,
          "old_api": "print",
          "new_api": null,
          "old_text": "underlyingTypeRepr->print(out)",
          "new_text": null,
          "old_line_content": "          underlyingTypeRepr->print(out);",
          "new_line_content": "      llvm::raw_string_ostream out(result);",
          "content_same": false
        },
        {
          "line": 1173,
          "old_api": "getAssociatedTypeMembers",
          "new_api": null,
          "old_text": "proto->getAssociatedTypeMembers()",
          "new_text": null,
          "old_line_content": "  for (auto assocTypeDecl : proto->getAssociatedTypeMembers()) {",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 1176,
          "old_api": "getName",
          "new_api": null,
          "old_text": "assocTypeDecl->getName()",
          "new_text": null,
          "old_line_content": "      inheritedTypeDecls.find(assocTypeDecl->getName());",
          "new_line_content": "  };",
          "content_same": false
        },
        {
          "line": 1177,
          "old_api": "end",
          "new_api": null,
          "old_text": "inheritedTypeDecls.end()",
          "new_text": null,
          "old_line_content": "    if (knownInherited == inheritedTypeDecls.end()) continue;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1180,
          "old_api": "getAttrs",
          "new_api": null,
          "old_text": "assocTypeDecl->getAttrs().hasAttribute<NonOverrideAttr>()",
          "new_text": null,
          "old_line_content": "      !assocTypeDecl->getAttrs().hasAttribute<NonOverrideAttr>() &&",
          "new_line_content": "    auto knownInherited =",
          "content_same": false
        },
        {
          "line": 1183,
          "old_api": "empty",
          "new_api": null,
          "old_text": "assocTypeDecl->getInherited().empty()",
          "new_text": null,
          "old_line_content": "      (!assocTypeDecl->getInherited().empty() ||",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1184,
          "old_api": "getTrailingWhereClause",
          "new_api": null,
          "old_text": "assocTypeDecl->getTrailingWhereClause()",
          "new_text": null,
          "old_line_content": "        assocTypeDecl->getTrailingWhereClause() ||",
          "new_line_content": "    bool shouldWarnAboutRedeclaration =",
          "content_same": false
        },
        {
          "line": 1192,
          "old_api": "getProtocol",
          "new_api": null,
          "old_text": "inheritedAssocTypeDecl->getProtocol()",
          "new_text": null,
          "old_line_content": "          auto inheritedFromProto = inheritedAssocTypeDecl->getProtocol();",
          "new_line_content": "      // If we have inherited associated type...",
          "content_same": false
        },
        {
          "line": 1193,
          "old_api": "getProtocolWhereLoc",
          "new_api": null,
          "old_text": "getProtocolWhereLoc()",
          "new_text": null,
          "old_line_content": "          auto fixItWhere = getProtocolWhereLoc();",
          "new_line_content": "      if (auto inheritedAssocTypeDecl =",
          "content_same": false
        },
        {
          "line": 1196,
          "old_api": "getName",
          "new_api": null,
          "old_text": "assocTypeDecl->getName()",
          "new_text": null,
          "old_line_content": "                             assocTypeDecl->getName(),",
          "new_line_content": "        if (shouldWarnAboutRedeclaration) {",
          "content_same": false
        },
        {
          "line": 1200,
          "old_api": "getAssociatedTypeReqs",
          "new_api": null,
          "old_text": "getAssociatedTypeReqs(assocTypeDecl, fixItWhere.Item)",
          "new_text": null,
          "old_line_content": "                      getAssociatedTypeReqs(assocTypeDecl, fixItWhere.Item))",
          "new_line_content": "                             diag::inherited_associated_type_redecl,",
          "content_same": false
        },
        {
          "line": 1203,
          "old_api": "diagnose",
          "new_api": null,
          "old_text": "ctx.Diags.diagnose(inheritedAssocTypeDecl, diag::decl_declared_here,\n                             inheritedAssocTypeDecl)",
          "new_text": null,
          "old_line_content": "          ctx.Diags.diagnose(inheritedAssocTypeDecl, diag::decl_declared_here,",
          "new_line_content": "            .fixItInsertAfter(",
          "content_same": false
        },
        {
          "line": 1215,
          "old_api": "getDeclContext",
          "new_api": null,
          "old_text": "inheritedType->getDeclContext()->getSelfNominalTypeDecl()",
          "new_text": null,
          "old_line_content": "          inheritedType->getDeclContext()->getSelfNominalTypeDecl();",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 1216,
          "old_api": "diagnose",
          "new_api": null,
          "old_text": "ctx.Diags.diagnose(assocTypeDecl,\n                         diag::associated_type_override_typealias,\n                         assocTypeDecl->getName(),\n                         inheritedOwningDecl->getDescriptiveKind(),\n                         inheritedOwningDecl->getDeclaredInterfaceType())",
          "new_text": null,
          "old_line_content": "      ctx.Diags.diagnose(assocTypeDecl,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1218,
          "old_api": "getName",
          "new_api": null,
          "old_text": "assocTypeDecl->getName()",
          "new_text": null,
          "old_line_content": "                         assocTypeDecl->getName(),",
          "new_line_content": "      // to that typealias.",
          "content_same": false
        },
        {
          "line": 1219,
          "old_api": "getDescriptiveKind",
          "new_api": null,
          "old_text": "inheritedOwningDecl->getDescriptiveKind()",
          "new_text": null,
          "old_line_content": "                         inheritedOwningDecl->getDescriptiveKind(),",
          "new_line_content": "      auto inheritedOwningDecl =",
          "content_same": false
        },
        {
          "line": 1222,
          "old_api": "recordInheritedTypeRequirement",
          "new_api": null,
          "old_text": "recordInheritedTypeRequirement(assocTypeDecl, inheritedType)",
          "new_text": null,
          "old_line_content": "      recordInheritedTypeRequirement(assocTypeDecl, inheritedType);",
          "new_line_content": "                         diag::associated_type_override_typealias,",
          "content_same": false
        },
        {
          "line": 1233,
          "old_api": "lookupDirect",
          "new_api": null,
          "old_text": "proto->lookupDirect(name)",
          "new_text": null,
          "old_line_content": "      for (auto found : proto->lookupDirect(name)) {",
          "new_line_content": "  // Check all remaining inherited type declarations to determine if",
          "content_same": false
        },
        {
          "line": 1236,
          "old_api": "isa<AssociatedTypeDecl>(type)",
          "new_api": null,
          "old_text": "isa<AssociatedTypeDecl>(type)",
          "new_text": null,
          "old_line_content": "        if (!type || isa<AssociatedTypeDecl>(type)) continue;",
          "new_line_content": "    [&](const std::pair<Identifier, TinyPtrVector<TypeDecl *>> &inherited) {",
          "content_same": false
        },
        {
          "line": 1239,
          "old_api": "isa<NominalTypeDecl>(type)",
          "new_api": null,
          "old_text": "isa<NominalTypeDecl>(type)",
          "new_text": null,
          "old_line_content": "        if (isa<NominalTypeDecl>(type))",
          "new_line_content": "        // We only want concrete type declarations.",
          "content_same": false
        },
        {
          "line": 1243,
          "old_api": "getModuleContext",
          "new_api": null,
          "old_text": "proto->getModuleContext()",
          "new_text": null,
          "old_line_content": "        if (type->getModuleContext() != proto->getModuleContext()) continue;",
          "new_line_content": "        // Ignore nominal types. They're always invalid declarations.",
          "content_same": false
        },
        {
          "line": 1254,
          "old_api": "getTrailingWhereClause",
          "new_api": null,
          "old_text": "ext->getTrailingWhereClause()",
          "new_text": null,
          "old_line_content": "          if (ext->getTrailingWhereClause()) continue;",
          "new_line_content": "          // FIXME: isConstrainedExtension() can cause request cycles because it",
          "content_same": false
        },
        {
          "line": 1263,
          "old_api": "dyn_cast<AssociatedTypeDecl>(inheritedType)",
          "new_api": null,
          "old_text": "dyn_cast<AssociatedTypeDecl>(inheritedType)",
          "new_text": null,
          "old_line_content": "                dyn_cast<AssociatedTypeDecl>(inheritedType)) {",
          "new_line_content": "        bool shouldWarnAboutRedeclaration = true;",
          "content_same": false
        },
        {
          "line": 1266,
          "old_api": "recordInheritedTypeRequirement",
          "new_api": null,
          "old_text": "recordInheritedTypeRequirement(inheritedAssocTypeDecl, type)",
          "new_text": null,
          "old_line_content": "            recordInheritedTypeRequirement(inheritedAssocTypeDecl, type);",
          "new_line_content": "          // If we have inherited associated type...",
          "content_same": false
        },
        {
          "line": 1270,
          "old_api": "getProtocol",
          "new_api": null,
          "old_text": "inheritedAssocTypeDecl->getProtocol()",
          "new_text": null,
          "old_line_content": "              auto inheritedFromProto = inheritedAssocTypeDecl->getProtocol();",
          "new_line_content": "            // type and the inherited associated type.",
          "content_same": false
        },
        {
          "line": 1272,
          "old_api": "diagnose",
          "new_api": null,
          "old_text": "ctx.Diags.diagnose(type,\n                                 diag::typealias_override_associated_type,\n                                 name,\n                                 inheritedFromProto->getDeclaredInterfaceType())\n                .fixItInsertAfter(fixItWhere.Loc,\n                                  getConcreteTypeReq(type, fixItWhere.Item))\n                .fixItRemove(type->getSourceRange())",
          "new_text": null,
          "old_line_content": "              ctx.Diags.diagnose(type,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1278,
          "old_api": "getSourceRange",
          "new_api": null,
          "old_text": "type->getSourceRange()",
          "new_text": null,
          "old_line_content": "                .fixItRemove(type->getSourceRange());",
          "new_line_content": "                                 diag::typealias_override_associated_type,",
          "content_same": false
        },
        {
          "line": 1279,
          "old_api": "diagnose",
          "new_api": null,
          "old_text": "ctx.Diags.diagnose(inheritedAssocTypeDecl, diag::decl_declared_here,\n                                 inheritedAssocTypeDecl)",
          "new_text": null,
          "old_line_content": "              ctx.Diags.diagnose(inheritedAssocTypeDecl, diag::decl_declared_here,",
          "new_line_content": "                                 name,",
          "content_same": false
        },
        {
          "line": 1289,
          "old_api": "recordInheritedTypeRequirement",
          "new_api": null,
          "old_text": "recordInheritedTypeRequirement(inheritedType, type)",
          "new_text": null,
          "old_line_content": "          recordInheritedTypeRequirement(inheritedType, type);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1301,
          "old_api": "size",
          "new_api": null,
          "old_text": "entry.second.size()",
          "new_text": null,
          "old_line_content": "    if (entry.second.size() < 2) continue;",
          "new_line_content": "      return false;",
          "content_same": false
        },
        {
          "line": 1303,
          "old_api": "front",
          "new_api": null,
          "old_text": "entry.second.front()",
          "new_text": null,
          "old_line_content": "    auto firstDecl = entry.second.front();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1304,
          "old_api": "slice",
          "new_api": null,
          "old_text": "ArrayRef<TypeDecl *>(entry.second).slice(1)",
          "new_text": null,
          "old_line_content": "    for (auto otherDecl : ArrayRef<TypeDecl *>(entry.second).slice(1)) {",
          "new_line_content": "  // Infer same-type requirements among inherited type declarations.",
          "content_same": false
        },
        {
          "line": 1305,
          "old_api": "recordInheritedTypeRequirement",
          "new_api": null,
          "old_text": "recordInheritedTypeRequirement(firstDecl, otherDecl)",
          "new_text": null,
          "old_line_content": "      recordInheritedTypeRequirement(firstDecl, otherDecl);",
          "new_line_content": "  for (auto &entry : inheritedTypeDecls) {",
          "content_same": false
        },
        {
          "line": 1312,
          "old_api": "AllocateCopy",
          "new_api": null,
          "old_text": "ctx.AllocateCopy(result)",
          "new_text": null,
          "old_line_content": "  return ctx.AllocateCopy(result);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1318,
          "old_api": "getASTContext",
          "new_api": null,
          "old_text": "proto->getASTContext()",
          "new_text": null,
          "old_line_content": "  auto &ctx = proto->getASTContext();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1324,
          "old_api": "getRequirements",
          "new_api": null,
          "old_text": "proto->getRequirementSignature().getRequirements()",
          "new_text": null,
          "old_line_content": "    for (auto req : proto->getRequirementSignature().getRequirements()) {",
          "new_line_content": "  llvm::SmallSetVector<ProtocolDecl *, 4> result;",
          "content_same": false
        },
        {
          "line": 1325,
          "old_api": "getKind",
          "new_api": null,
          "old_text": "req.getKind()",
          "new_text": null,
          "old_line_content": "      if (req.getKind() == RequirementKind::Conformance) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1326,
          "old_api": "getProtocolDecl",
          "new_api": null,
          "old_text": "req.getProtocolDecl()",
          "new_text": null,
          "old_line_content": "        result.insert(req.getProtocolDecl());",
          "new_line_content": "  // If we have a serialized requirement signature, deserialize it and",
          "content_same": false
        },
        {
          "line": 1336,
          "old_api": "getStructuralRequirements",
          "new_api": null,
          "old_text": "proto->getStructuralRequirements()",
          "new_text": null,
          "old_line_content": "  for (auto req : proto->getStructuralRequirements()) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1337,
          "old_api": "getKind",
          "new_api": null,
          "old_text": "req.req.getKind()",
          "new_text": null,
          "old_line_content": "    if (req.req.getKind() == RequirementKind::Conformance)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1338,
          "old_api": "getProtocolDecl",
          "new_api": null,
          "old_text": "req.req.getProtocolDecl()",
          "new_text": null,
          "old_line_content": "      result.insert(req.req.getProtocolDecl());",
          "new_line_content": "  // Otherwise, we can't ask for the requirement signature, because",
          "content_same": false
        },
        {
          "line": 828,
          "old_api": "getKind",
          "new_api": null,
          "old_text": "req.getKind()",
          "new_text": null,
          "old_line_content": "    if (req.getKind() != RequirementKind::Conformance)",
          "new_line_content": "  // Scan the structural requirements and cancel out any inferred requirements",
          "content_same": false
        },
        {
          "line": 837,
          "old_api": "getProtocolDecl",
          "new_api": null,
          "old_text": "req.getProtocolDecl()->getKnownProtocolKind()",
          "new_text": null,
          "old_line_content": "    if (auto kp = req.getProtocolDecl()->getKnownProtocolKind())",
          "new_line_content": "    if (!structReq.fromDefault)",
          "content_same": false
        },
        {
          "line": 838,
          "old_api": "getInvertibleProtocolKind",
          "new_api": null,
          "old_text": "getInvertibleProtocolKind(*kp)",
          "new_text": null,
          "old_line_content": "      if (auto ip = getInvertibleProtocolKind(*kp))",
          "new_line_content": "      return false;",
          "content_same": false
        },
        {
          "line": 848,
          "old_api": "find",
          "new_api": null,
          "old_text": "inverses.find(subject)",
          "new_text": null,
          "old_line_content": "    auto result = inverses.find(subject);",
          "new_line_content": "      return false;",
          "content_same": false
        },
        {
          "line": 849,
          "old_api": "end",
          "new_api": null,
          "old_text": "inverses.end()",
          "new_text": null,
          "old_line_content": "    if (result == inverses.end())",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 855,
          "old_api": "contains",
          "new_api": null,
          "old_text": "recordedInverses.contains(*proto)",
          "new_text": null,
          "old_line_content": "    return recordedInverses.contains(*proto);",
          "new_line_content": "      return false;",
          "content_same": false
        },
        {
          "line": 856,
          "old_api": "end",
          "new_api": null,
          "old_text": "result.end()",
          "new_text": null,
          "old_line_content": "  }), result.end());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 865,
          "old_api": "getInherited",
          "new_api": null,
          "old_text": "decl->getInherited()",
          "new_text": null,
          "old_line_content": "  auto inheritedTypes = decl->getInherited();",
          "new_line_content": "/// AssociatedTypeDecl, GenericTypeParamDecl, or ProtocolDecl.",
          "content_same": false
        },
        {
          "line": 866,
          "old_api": "getInnermostDeclContext",
          "new_api": null,
          "old_text": "decl->getInnermostDeclContext()",
          "new_text": null,
          "old_line_content": "  auto *dc = decl->getInnermostDeclContext();",
          "new_line_content": "void swift::rewriting::realizeInheritedRequirements(",
          "content_same": false
        },
        {
          "line": 867,
          "old_api": "getParentModule",
          "new_api": null,
          "old_text": "dc->getParentModule()",
          "new_text": null,
          "old_line_content": "  auto *moduleForInference = dc->getParentModule();",
          "new_line_content": "    TypeDecl *decl, Type type, bool shouldInferRequirements,",
          "content_same": false
        },
        {
          "line": 869,
          "old_api": "getIndices",
          "new_api": null,
          "old_text": "inheritedTypes.getIndices()",
          "new_text": null,
          "old_line_content": "  for (auto index : inheritedTypes.getIndices()) {",
          "new_line_content": "    SmallVectorImpl<RequirementError> &errors) {",
          "content_same": false
        },
        {
          "line": 878,
          "old_api": "dyn_cast<ProtocolDecl>(decl)",
          "new_api": null,
          "old_text": "dyn_cast<ProtocolDecl>(decl)",
          "new_text": null,
          "old_line_content": "    if (auto *protoDecl = dyn_cast<ProtocolDecl>(decl)) {",
          "new_line_content": "    if (!inheritedType) continue;",
          "content_same": false
        },
        {
          "line": 879,
          "old_api": "getDeclaredInterfaceType",
          "new_api": null,
          "old_text": "protoDecl->getDeclaredInterfaceType()",
          "new_text": null,
          "old_line_content": "      if (inheritedType->isEqual(protoDecl->getDeclaredInterfaceType()))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 887,
          "old_api": "getInnermostDeclContext",
          "new_api": null,
          "old_text": "inferRequirements(inheritedType, loc, moduleForInference,\n                        decl->getInnermostDeclContext(), result)",
          "new_text": null,
          "old_line_content": "      inferRequirements(inheritedType, loc, moduleForInference,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 891,
          "old_api": "realizeTypeRequirement",
          "new_api": null,
          "old_text": "realizeTypeRequirement(dc, type, inheritedType, loc, result, errors)",
          "new_text": null,
          "old_line_content": "    realizeTypeRequirement(dc, type, inheritedType, loc, result, errors);",
          "new_line_content": "    if (shouldInferRequirements) {",
          "content_same": false
        },
        {
          "line": 897,
          "old_api": "getAttrs",
          "new_api": null,
          "old_text": "decl->getAttrs().getAttributes<SynthesizedProtocolAttr>()",
          "new_text": null,
          "old_line_content": "  auto attrs = decl->getAttrs().getAttributes<SynthesizedProtocolAttr>();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 899,
          "old_api": "getProtocol",
          "new_api": null,
          "old_text": "attr->getProtocol()->getDeclaredType()",
          "new_text": null,
          "old_line_content": "    auto inheritedType = attr->getProtocol()->getDeclaredType();",
          "new_line_content": "  // Also check for `SynthesizedProtocolAttr`s with additional constraints added",
          "content_same": false
        },
        {
          "line": 900,
          "old_api": "getLocation",
          "new_api": null,
          "old_text": "attr->getLocation()",
          "new_text": null,
          "old_line_content": "    auto loc = attr->getLocation();",
          "new_line_content": "  // by ClangImporter. This is how imported protocols are marked `Sendable`",
          "content_same": false
        },
        {
          "line": 914,
          "old_api": "hasLazyRequirementSignature",
          "new_api": null,
          "old_text": "proto->hasLazyRequirementSignature()",
          "new_text": null,
          "old_line_content": "  assert(!proto->hasLazyRequirementSignature());",
          "new_line_content": "/// This request is invoked by RequirementSignatureRequest for each protocol",
          "content_same": false
        },
        {
          "line": 921,
          "old_api": "InverseRequirement::enumerateDefaultedParams(proto, needsDefaultRequirements)",
          "new_api": null,
          "old_text": "InverseRequirement::enumerateDefaultedParams(proto, needsDefaultRequirements)",
          "new_text": null,
          "old_line_content": "  InverseRequirement::enumerateDefaultedParams(proto, needsDefaultRequirements);",
          "new_line_content": "  SmallVector<StructuralRequirement, 2> result;",
          "content_same": false
        },
        {
          "line": 923,
          "old_api": "getASTContext",
          "new_api": null,
          "old_text": "proto->getASTContext()",
          "new_text": null,
          "old_line_content": "  auto &ctx = proto->getASTContext();",
          "new_line_content": "  SmallVector<InverseRequirement> inverses;",
          "content_same": false
        },
        {
          "line": 924,
          "old_api": "getSelfInterfaceType",
          "new_api": null,
          "old_text": "proto->getSelfInterfaceType()",
          "new_text": null,
          "old_line_content": "  auto selfTy = proto->getSelfInterfaceType();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 927,
          "old_api": "realizeInheritedRequirements",
          "new_api": null,
          "old_text": "realizeInheritedRequirements(proto, selfTy,\n                               /*inferRequirements=*/false,\n                               result, errors)",
          "new_text": null,
          "old_line_content": "  realizeInheritedRequirements(proto, selfTy,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 940,
          "old_api": "getInheritedProtocols",
          "new_api": null,
          "old_text": "proto->getInheritedProtocols()",
          "new_text": null,
          "old_line_content": "    for (auto *inheritedProto : proto->getInheritedProtocols()) {",
          "new_line_content": "    // clause, except when type resolution fails and returns an ErrorType.",
          "content_same": false
        },
        {
          "line": 941,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "result.push_back({\n          Requirement(RequirementKind::Conformance,\n                      selfTy, inheritedProto->getDeclaredInterfaceType()),\n          SourceLoc(), /*wasInferred=*/false})",
          "new_text": null,
          "old_line_content": "      result.push_back({",
          "new_line_content": "    //",
          "content_same": false
        },
        {
          "line": 942,
          "old_api": "getDeclaredInterfaceType",
          "new_api": null,
          "old_text": "Requirement(RequirementKind::Conformance,\n                      selfTy, inheritedProto->getDeclaredInterfaceType())",
          "new_text": null,
          "old_line_content": "          Requirement(RequirementKind::Conformance,",
          "new_line_content": "    // For example, in 'protocol P: Q & Blah', where 'Blah' does not exist,",
          "content_same": false
        },
        {
          "line": 943,
          "old_api": "getDeclaredInterfaceType",
          "new_api": null,
          "old_text": "inheritedProto->getDeclaredInterfaceType()",
          "new_text": null,
          "old_line_content": "                      selfTy, inheritedProto->getDeclaredInterfaceType()),",
          "new_line_content": "    // the type 'Q & Blah' resolves to an ErrorType, while the simpler",
          "content_same": false
        },
        {
          "line": 944,
          "old_api": "SourceLoc",
          "new_api": null,
          "old_text": "SourceLoc()",
          "new_text": null,
          "old_line_content": "          SourceLoc(), /*wasInferred=*/false});",
          "new_line_content": "    // mechanism in getDirectlyInheritedNominalTypeDecls() still finds 'Q'.",
          "content_same": false
        },
        {
          "line": 951,
          "old_api": "realizeRequirement",
          "new_api": null,
          "old_text": "realizeRequirement(proto, req, reqRepr,\n                           /*inferRequirements=*/false,\n                           result, errors)",
          "new_text": null,
          "old_line_content": "        realizeRequirement(proto, req, reqRepr,",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 958,
          "old_api": "isObjC",
          "new_api": null,
          "old_text": "proto->isObjC()",
          "new_text": null,
          "old_line_content": "  if (proto->isObjC()) {",
          "new_line_content": "                           result, errors);",
          "content_same": false
        },
        {
          "line": 960,
          "old_api": "LayoutConstraint::getLayoutConstraint(\n        LayoutConstraintKind::Class, ctx)",
          "new_api": null,
          "old_text": "LayoutConstraint::getLayoutConstraint(\n        LayoutConstraintKind::Class, ctx)",
          "new_text": null,
          "old_line_content": "    auto layout = LayoutConstraint::getLayoutConstraint(",
          "new_line_content": "      });",
          "content_same": false
        },
        {
          "line": 962,
          "old_api": "Requirement",
          "new_api": null,
          "old_text": "Requirement(RequirementKind::Layout, selfTy, layout)",
          "new_text": null,
          "old_line_content": "    result.push_back({Requirement(RequirementKind::Layout, selfTy, layout),",
          "new_line_content": "  // Remaining logic is not relevant to @objc protocols.",
          "content_same": false
        },
        {
          "line": 966,
          "old_api": "InverseRequirement::expandDefaults(ctx, needsDefaultRequirements, result)",
          "new_api": null,
          "old_text": "InverseRequirement::expandDefaults(ctx, needsDefaultRequirements, result)",
          "new_text": null,
          "old_line_content": "    InverseRequirement::expandDefaults(ctx, needsDefaultRequirements, result);",
          "new_line_content": "        LayoutConstraintKind::Class, ctx);",
          "content_same": false
        },
        {
          "line": 969,
          "old_api": "diagnoseRequirementErrors",
          "new_api": null,
          "old_text": "diagnoseRequirementErrors(ctx, errors,\n                              AllowConcreteTypePolicy::NestedAssocTypes)",
          "new_text": null,
          "old_line_content": "    diagnoseRequirementErrors(ctx, errors,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 978,
          "old_api": "getAssociatedTypeMembers",
          "new_api": null,
          "old_text": "proto->getAssociatedTypeMembers()",
          "new_text": null,
          "old_line_content": "  for (auto *assocTypeDecl : proto->getAssociatedTypeMembers()) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 979,
          "old_api": "getName",
          "new_api": null,
          "old_text": "assocTypeDecl->getName()",
          "new_text": null,
          "old_line_content": "    assocTypes.insert(assocTypeDecl->getName());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 982,
          "old_api": "getDeclaredInterfaceType",
          "new_api": null,
          "old_text": "assocTypeDecl->getDeclaredInterfaceType()",
          "new_text": null,
          "old_line_content": "    auto assocType = assocTypeDecl->getDeclaredInterfaceType();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 991,
          "old_api": "realizeRequirement",
          "new_api": null,
          "old_text": "realizeRequirement(proto, req, reqRepr,\n                             /*inferRequirements=*/false,\n                             result, errors)",
          "new_text": null,
          "old_line_content": "          realizeRequirement(proto, req, reqRepr,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 999,
          "old_api": "getMembers",
          "new_api": null,
          "old_text": "proto->getMembers()",
          "new_text": null,
          "old_line_content": "  for (auto *decl : proto->getMembers()) {",
          "new_line_content": "          return false;",
          "content_same": false
        },
        {
          "line": 1005,
          "old_api": "isGeneric",
          "new_api": null,
          "old_text": "typeAliasDecl->isGeneric()",
          "new_text": null,
          "old_line_content": "      if (!typeAliasDecl->isGeneric()) {",
          "new_line_content": "    // Protocol typealiases are modeled as same-type requirements",
          "content_same": false
        },
        {
          "line": 1016,
          "old_api": "getStructuralType",
          "new_api": null,
          "old_text": "typeAliasDecl->getStructuralType()",
          "new_text": null,
          "old_line_content": "        auto underlyingType = typeAliasDecl->getStructuralType();",
          "new_line_content": "          continue;",
          "content_same": false
        },
        {
          "line": 1017,
          "old_api": "getPointer",
          "new_api": null,
          "old_text": "underlyingType.getPointer()",
          "new_text": null,
          "old_line_content": "        if (auto *aliasType = dyn_cast<TypeAliasType>(underlyingType.getPointer()))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1018,
          "old_api": "getSinglyDesugaredType",
          "new_api": null,
          "old_text": "aliasType->getSinglyDesugaredType()",
          "new_text": null,
          "old_line_content": "          underlyingType = aliasType->getSinglyDesugaredType();",
          "new_line_content": "        // The structural type of a typealias will always be a TypeAliasType,",
          "content_same": false
        },
        {
          "line": 1020,
          "old_api": "underlyingType->is<UnboundGenericType>()",
          "new_api": null,
          "old_text": "underlyingType->is<UnboundGenericType>()",
          "new_text": null,
          "old_line_content": "        if (underlyingType->is<UnboundGenericType>())",
          "new_line_content": "        // in diagnostics.",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 49,
      "total_additions": 122,
      "total_deletions": 121,
      "total_api_changes": 292
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 5,
        "api_related_lines": 292,
        "non_api_lines": 4,
        "non_api_line_numbers": [
          824,
          826,
          827,
          823
        ]
      }
    },
    "api_calls_before": 452,
    "api_calls_after": 453,
    "diff_info": {
      "added_lines": 5,
      "removed_lines": 0,
      "total_diff_lines": 17
    }
  }
}
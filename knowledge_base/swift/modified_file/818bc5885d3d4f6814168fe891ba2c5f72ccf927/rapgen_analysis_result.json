{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/swift/modified_file/818bc5885d3d4f6814168fe891ba2c5f72ccf927",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/swift/modified_file/818bc5885d3d4f6814168fe891ba2c5f72ccf927/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/swift/modified_file/818bc5885d3d4f6814168fe891ba2c5f72ccf927/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/swift/modified_file/818bc5885d3d4f6814168fe891ba2c5f72ccf927/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 169,
          "old_api": "llvm::dbgs()",
          "new_api": "getFunctionCost",
          "old_text": "llvm::dbgs()",
          "new_text": "getFunctionCost(Callee, Caller,\n                                        InlineCostThreshold * BoostFactor)",
          "old_line_content": "    DEBUG(llvm::dbgs() << \"        FAIL! Function too big to inline. \"",
          "new_line_content": "  unsigned CalleeCost = getFunctionCost(Callee, Caller,",
          "content_same": false
        },
        {
          "line": 244,
          "old_api": "getArguments",
          "new_api": "isProfitableToInline",
          "old_text": "AI->getArguments()",
          "new_text": "isProfitableToInline(Caller, Callee, AI, CalleeCount[Callee])",
          "old_line_content": "    for (const auto &Arg : AI->getArguments())",
          "new_line_content": "    if (!isProfitableToInline(Caller, Callee, AI, CalleeCount[Callee]))",
          "content_same": false
        },
        {
          "line": 249,
          "old_api": "getName",
          "new_api": "getArguments",
          "old_text": "Caller->getName()",
          "new_text": "AI->getArguments()",
          "old_line_content": "          << \" Into \" << Caller->getName() << \"\\n\");",
          "new_line_content": "    for (const auto &Arg : AI->getArguments())",
          "content_same": false
        },
        {
          "line": 261,
          "old_api": "llvm::dbgs()",
          "new_api": "reset",
          "old_text": "llvm::dbgs()",
          "new_text": "DT->reset()",
          "old_line_content": "  DEBUG(llvm::dbgs() << \"\\n\");",
          "new_line_content": "    DT->reset();",
          "content_same": false
        },
        {
          "line": 294,
          "old_api": "back",
          "new_api": "getOptions",
          "old_text": "Worklist.back()",
          "new_text": "getOptions()",
          "old_line_content": "      SILFunction *F = Worklist.back();",
          "new_line_content": "    SILPerformanceInliner inliner(getOptions().InlineThreshold,",
          "content_same": false
        },
        {
          "line": 299,
          "old_api": "linkFunction",
          "new_api": "back",
          "old_text": "getModule()->linkFunction(F, SILModule::LinkingMode::LinkAll)",
          "new_text": "Worklist.back()",
          "old_line_content": "          !getModule()->linkFunction(F, SILModule::LinkingMode::LinkAll))",
          "new_line_content": "      SILFunction *F = Worklist.back();",
          "content_same": false
        },
        {
          "line": 307,
          "old_api": "invalidateAnalysis",
          "new_api": "inlineCallsIntoFunction",
          "old_text": "invalidateAnalysis(SILAnalysis::InvalidationKind::CallGraph)",
          "new_text": "inliner.inlineCallsIntoFunction(F, DA)",
          "old_line_content": "      invalidateAnalysis(SILAnalysis::InvalidationKind::CallGraph);",
          "new_line_content": "      Changed |= inliner.inlineCallsIntoFunction(F, DA);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 260,
          "old_api": null,
          "new_api": "inlineFunction",
          "old_text": null,
          "new_text": "Inliner.inlineFunction(AI, Callee, Args)",
          "old_line_content": "",
          "new_line_content": "    Inliner.inlineFunction(AI, Callee, Args);",
          "content_same": false
        },
        {
          "line": 137,
          "old_api": null,
          "new_api": "llvm::dbgs()",
          "old_text": null,
          "new_text": "llvm::dbgs()",
          "old_line_content": "  // Prevent circular inlining.",
          "new_line_content": "    DEBUG(llvm::dbgs() <<",
          "content_same": false
        },
        {
          "line": 266,
          "old_api": null,
          "new_api": "llvm::dbgs()",
          "old_text": null,
          "new_text": "llvm::dbgs()",
          "old_line_content": "class SILPerformanceInlinerPass : public SILModuleTransform {",
          "new_line_content": "  DEBUG(llvm::dbgs() << \"\\n\");",
          "content_same": false
        },
        {
          "line": 144,
          "old_api": null,
          "new_api": "llvm::dbgs()",
          "old_text": null,
          "new_text": "llvm::dbgs()",
          "old_line_content": "  // with a less visible linkage than caller, don't inline Callee into caller.",
          "new_line_content": "    DEBUG(llvm::dbgs() << \"        FAIL! Skipping recursive calls.\\n\");",
          "content_same": false
        },
        {
          "line": 150,
          "old_api": null,
          "new_api": "getLinkage",
          "old_text": null,
          "new_text": "transitivelyReferencesLessVisibleLinkage(*Callee,\n                                               Caller->getLinkage())",
          "old_line_content": "",
          "new_line_content": "  if (transitivelyReferencesLessVisibleLinkage(*Callee,",
          "content_same": false
        },
        {
          "line": 151,
          "old_api": null,
          "new_api": "getLinkage",
          "old_text": null,
          "new_text": "Caller->getLinkage()",
          "old_line_content": "  // Check if the function takes a closure.",
          "new_line_content": "                                               Caller->getLinkage())) {",
          "content_same": false
        },
        {
          "line": 280,
          "old_api": null,
          "new_api": "PM->getAnalysis<CallGraphAnalysis>()",
          "old_text": null,
          "new_text": "PM->getAnalysis<CallGraphAnalysis>()",
          "old_line_content": "      return;",
          "new_line_content": "    CallGraphAnalysis* CGA = PM->getAnalysis<CallGraphAnalysis>();",
          "content_same": false
        },
        {
          "line": 152,
          "old_api": null,
          "new_api": "llvm::dbgs()",
          "old_text": null,
          "new_text": "llvm::dbgs()",
          "old_line_content": "  bool HasClosure = false;",
          "new_line_content": "    DEBUG(llvm::dbgs() << \"        FAIL! Skipping less visible call.\");",
          "content_same": false
        },
        {
          "line": 281,
          "old_api": null,
          "new_api": "PM->getAnalysis<DominanceAnalysis>()",
          "old_text": null,
          "new_text": "PM->getAnalysis<DominanceAnalysis>()",
          "old_line_content": "    }",
          "new_line_content": "    DominanceAnalysis* DA = PM->getAnalysis<DominanceAnalysis>();",
          "content_same": false
        },
        {
          "line": 283,
          "old_api": null,
          "new_api": "getOptions",
          "old_text": null,
          "new_text": "getOptions()",
          "old_line_content": "    // Initialize the worklist with a bottom-up call-graph order list of",
          "new_line_content": "    if (getOptions().InlineThreshold == 0) {",
          "content_same": false
        },
        {
          "line": 284,
          "old_api": null,
          "new_api": "llvm::dbgs()",
          "old_text": null,
          "new_text": "llvm::dbgs()",
          "old_line_content": "    // functions.",
          "new_line_content": "      DEBUG(llvm::dbgs() << \"*** The Performance Inliner is disabled ***\\n\");",
          "content_same": false
        },
        {
          "line": 158,
          "old_api": null,
          "new_api": "getAllOperands",
          "old_text": null,
          "new_text": "AI->getAllOperands()",
          "old_line_content": "  }",
          "new_line_content": "  for (auto &Op : AI->getAllOperands()) {",
          "content_same": false
        },
        {
          "line": 159,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "Op.get()",
          "old_line_content": "  // If the function accepts a closure increase the threshold because",
          "new_line_content": "    if (isa<PartialApplyInst>(Op.get())) {",
          "content_same": false
        },
        {
          "line": 290,
          "old_api": null,
          "new_api": "bottomUpCallGraphOrder",
          "old_text": null,
          "new_text": "CGA->bottomUpCallGraphOrder()",
          "old_line_content": "                                  SILModule::LinkingMode::LinkAll, InlineSem);",
          "new_line_content": "    const std::vector<SILFunction *> &Order = CGA->bottomUpCallGraphOrder();",
          "content_same": false
        },
        {
          "line": 292,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "Worklist.end()",
          "old_line_content": "    bool Changed = false;",
          "new_line_content": "    std::reverse(Worklist.begin(), Worklist.end());",
          "content_same": false
        },
        {
          "line": 300,
          "old_api": null,
          "new_api": "pop_back",
          "old_text": null,
          "new_text": "Worklist.pop_back()",
          "old_line_content": "        continue;",
          "new_line_content": "      Worklist.pop_back();",
          "content_same": false
        },
        {
          "line": 174,
          "old_api": null,
          "new_api": "llvm::dbgs()",
          "old_text": null,
          "new_text": "llvm::dbgs()",
          "old_line_content": "  return true;",
          "new_line_content": "    DEBUG(llvm::dbgs() << \"        FAIL! Function too big to inline. \"",
          "content_same": false
        },
        {
          "line": 303,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "F->empty()",
          "old_line_content": "    }",
          "new_line_content": "      if (F->empty() &&",
          "content_same": false
        },
        {
          "line": 304,
          "old_api": null,
          "new_api": "linkFunction",
          "old_text": null,
          "new_text": "getModule()->linkFunction(F, SILModule::LinkingMode::LinkAll)",
          "old_line_content": "",
          "new_line_content": "          !getModule()->linkFunction(F, SILModule::LinkingMode::LinkAll))",
          "content_same": false
        },
        {
          "line": 312,
          "old_api": null,
          "new_api": "invalidateAnalysis",
          "old_text": null,
          "new_text": "invalidateAnalysis(SILAnalysis::InvalidationKind::CallGraph)",
          "old_line_content": "} // end anonymous namespace",
          "new_line_content": "      invalidateAnalysis(SILAnalysis::InvalidationKind::CallGraph);",
          "content_same": false
        },
        {
          "line": 189,
          "old_api": null,
          "new_api": "getName",
          "old_text": null,
          "new_text": "Caller->getName()",
          "old_line_content": "  // Avoid recomputing dominance by checking cold call blocks before inlining.",
          "new_line_content": "  DEBUG(llvm::dbgs() << \"Visiting Function: \" << Caller->getName() << \"\\n\");",
          "content_same": false
        },
        {
          "line": 195,
          "old_api": null,
          "new_api": "getDomInfo",
          "old_text": null,
          "new_text": "DA->getDomInfo(Caller)",
          "old_line_content": "  // Collect all of the ApplyInsts in this function. We will be changing the",
          "new_line_content": "  DominanceInfo *DT = DA->getDomInfo(Caller);",
          "content_same": false
        },
        {
          "line": 196,
          "old_api": null,
          "new_api": "isValid",
          "old_text": null,
          "new_text": "DT->isValid(Caller)",
          "old_line_content": "  // control flow and collecting the AIs simplifies the scan.",
          "new_line_content": "  if (!DT->isValid(Caller))",
          "content_same": false
        },
        {
          "line": 197,
          "old_api": null,
          "new_api": "recalculate",
          "old_text": null,
          "new_text": "DT->recalculate(*Caller)",
          "old_line_content": "  for (auto &BB : *Caller) {",
          "new_line_content": "    DT->recalculate(*Caller);",
          "content_same": false
        },
        {
          "line": 203,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "BB.end()",
          "old_line_content": "        // If the call site is on a slow path, do not inline.",
          "new_line_content": "    auto I = BB.begin(), E = BB.end();",
          "content_same": false
        },
        {
          "line": 206,
          "old_api": null,
          "new_api": "dyn_cast<ApplyInst>(I++)",
          "old_text": null,
          "new_text": "dyn_cast<ApplyInst>(I++)",
          "old_line_content": "          continue;",
          "new_line_content": "      ApplyInst *AI = dyn_cast<ApplyInst>(I++);",
          "content_same": false
        },
        {
          "line": 209,
          "old_api": null,
          "new_api": "getParent",
          "old_text": null,
          "new_text": "AI->getParent()",
          "old_line_content": "      }",
          "new_line_content": "        if (!AI->isTransparent() && ColdBlocks.isCold(AI->getParent())) {",
          "content_same": false
        },
        {
          "line": 210,
          "old_api": null,
          "new_api": "llvm::dbgs()",
          "old_text": null,
          "new_text": "llvm::dbgs()",
          "old_line_content": "    }",
          "new_line_content": "          DEBUG(llvm::dbgs() << \"    Pruning cold call site:\" <<  *AI);",
          "content_same": false
        },
        {
          "line": 213,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "CallSites.push_back(AI)",
          "old_line_content": "  // Calculate how many times a callee is called from this caller.",
          "new_line_content": "        CallSites.push_back(AI);",
          "content_same": false
        },
        {
          "line": 221,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(AI && \"Invalid AI\")",
          "old_line_content": "  }",
          "new_line_content": "    assert(AI && \"Invalid AI\");",
          "content_same": false
        },
        {
          "line": 222,
          "old_api": null,
          "new_api": "getInlinableFunction",
          "old_text": null,
          "new_text": "getInlinableFunction(AI, LinkMode,\n                                               InlineFunctionsWithSemantics)",
          "old_line_content": "",
          "new_line_content": "    SILFunction *Callee = getInlinableFunction(AI, LinkMode,",
          "content_same": false
        },
        {
          "line": 229,
          "old_api": null,
          "new_api": "llvm::dbgs()",
          "old_text": null,
          "new_text": "llvm::dbgs()",
          "old_line_content": "    if (!Callee) {",
          "new_line_content": "    DEBUG(llvm::dbgs() << \"    Found call site:\" <<  *AI);",
          "content_same": false
        },
        {
          "line": 232,
          "old_api": null,
          "new_api": "getInlinableFunction",
          "old_text": null,
          "new_text": "getInlinableFunction(AI, LinkMode,\n                                               InlineFunctionsWithSemantics)",
          "old_line_content": "    }",
          "new_line_content": "    SILFunction *Callee = getInlinableFunction(AI, LinkMode,",
          "content_same": false
        },
        {
          "line": 235,
          "old_api": null,
          "new_api": "llvm::dbgs()",
          "old_text": null,
          "new_text": "llvm::dbgs()",
          "old_line_content": "",
          "new_line_content": "      DEBUG(llvm::dbgs() << \"        FAIL! Cannot find inlineable callee.\\n\");",
          "content_same": false
        },
        {
          "line": 238,
          "old_api": null,
          "new_api": "isNoinline",
          "old_text": null,
          "new_text": "Callee->isNoinline()",
          "old_line_content": "",
          "new_line_content": "    if (Callee->isNoinline())",
          "content_same": false
        },
        {
          "line": 241,
          "old_api": null,
          "new_api": "getName",
          "old_text": null,
          "new_text": "Callee->getName()",
          "old_line_content": "",
          "new_line_content": "    DEBUG(llvm::dbgs() << \"        Found callee:\" <<  Callee->getName()",
          "content_same": false
        },
        {
          "line": 250,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "Args.push_back(Arg)",
          "old_line_content": "",
          "new_line_content": "    Args.push_back(Arg);",
          "content_same": false
        },
        {
          "line": 253,
          "old_api": null,
          "new_api": "getName",
          "old_text": null,
          "new_text": "Callee->getName()",
          "old_line_content": "    // newly inlined ApplyInsts. That's okay because we will visit them in",
          "new_line_content": "    DEBUG(llvm::dbgs() << \"        SUCCESS! Inlining \" << Callee->getName()",
          "content_same": false
        },
        {
          "line": 254,
          "old_api": null,
          "new_api": "getName",
          "old_text": null,
          "new_text": "Caller->getName()",
          "old_line_content": "    // our next invocation of the inliner.",
          "new_line_content": "          << \" Into \" << Caller->getName() << \"\\n\");",
          "content_same": false
        },
        {
          "line": 127,
          "old_api": null,
          "new_api": "isTransparent",
          "old_text": null,
          "new_text": "AI->isTransparent()",
          "old_line_content": "  // detection logic in CallGraphAnalysis can't handle class_method in the",
          "new_line_content": "  if (AI->isTransparent())",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 256,
          "old_api": "reset",
          "new_api": null,
          "old_text": "DT->reset()",
          "new_text": null,
          "old_line_content": "    DT->reset();",
          "new_line_content": "    // We already moved the iterator to the next instruction because the AI",
          "content_same": false
        },
        {
          "line": 132,
          "old_api": "llvm::dbgs()",
          "new_api": null,
          "old_text": "llvm::dbgs()",
          "new_text": null,
          "old_line_content": "    DEBUG(llvm::dbgs() <<",
          "new_line_content": "  // detection logic in CallGraphAnalysis can't handle class_method in the",
          "content_same": false
        },
        {
          "line": 139,
          "old_api": "llvm::dbgs()",
          "new_api": null,
          "old_text": "llvm::dbgs()",
          "new_text": null,
          "old_line_content": "    DEBUG(llvm::dbgs() << \"        FAIL! Skipping recursive calls.\\n\");",
          "new_line_content": "    return false;",
          "content_same": false
        },
        {
          "line": 145,
          "old_api": "getLinkage",
          "new_api": null,
          "old_text": "transitivelyReferencesLessVisibleLinkage(*Callee,\n                                               Caller->getLinkage())",
          "new_text": null,
          "old_line_content": "  if (transitivelyReferencesLessVisibleLinkage(*Callee,",
          "new_line_content": "    return false;",
          "content_same": false
        },
        {
          "line": 146,
          "old_api": "getLinkage",
          "new_api": null,
          "old_text": "Caller->getLinkage()",
          "new_text": null,
          "old_line_content": "                                               Caller->getLinkage())) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 147,
          "old_api": "llvm::dbgs()",
          "new_api": null,
          "old_text": "llvm::dbgs()",
          "new_text": null,
          "old_line_content": "    DEBUG(llvm::dbgs() << \"        FAIL! Skipping less visible call.\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 275,
          "old_api": "PM->getAnalysis<CallGraphAnalysis>()",
          "new_api": null,
          "old_text": "PM->getAnalysis<CallGraphAnalysis>()",
          "new_text": null,
          "old_line_content": "    CallGraphAnalysis* CGA = PM->getAnalysis<CallGraphAnalysis>();",
          "new_line_content": "public:",
          "content_same": false
        },
        {
          "line": 276,
          "old_api": "PM->getAnalysis<DominanceAnalysis>()",
          "new_api": null,
          "old_text": "PM->getAnalysis<DominanceAnalysis>()",
          "new_text": null,
          "old_line_content": "    DominanceAnalysis* DA = PM->getAnalysis<DominanceAnalysis>();",
          "new_line_content": "  SILPerformanceInlinerPass(bool InlineFuncWithSemantics):",
          "content_same": false
        },
        {
          "line": 278,
          "old_api": "getOptions",
          "new_api": null,
          "old_text": "getOptions()",
          "new_text": null,
          "old_line_content": "    if (getOptions().InlineThreshold == 0) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 279,
          "old_api": "llvm::dbgs()",
          "new_api": null,
          "old_text": "llvm::dbgs()",
          "new_text": null,
          "old_line_content": "      DEBUG(llvm::dbgs() << \"*** The Performance Inliner is disabled ***\\n\");",
          "new_line_content": "  void run() {",
          "content_same": false
        },
        {
          "line": 153,
          "old_api": "getAllOperands",
          "new_api": null,
          "old_text": "AI->getAllOperands()",
          "new_text": null,
          "old_line_content": "  for (auto &Op : AI->getAllOperands()) {",
          "new_line_content": "    return false;",
          "content_same": false
        },
        {
          "line": 154,
          "old_api": "get",
          "new_api": null,
          "old_text": "Op.get()",
          "new_text": null,
          "old_line_content": "    if (isa<PartialApplyInst>(Op.get())) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 285,
          "old_api": "bottomUpCallGraphOrder",
          "new_api": null,
          "old_text": "CGA->bottomUpCallGraphOrder()",
          "new_text": null,
          "old_line_content": "    const std::vector<SILFunction *> &Order = CGA->bottomUpCallGraphOrder();",
          "new_line_content": "      return;",
          "content_same": false
        },
        {
          "line": 287,
          "old_api": "end",
          "new_api": null,
          "old_text": "Worklist.end()",
          "new_text": null,
          "old_line_content": "    std::reverse(Worklist.begin(), Worklist.end());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 289,
          "old_api": "getOptions",
          "new_api": null,
          "old_text": "getOptions()",
          "new_text": null,
          "old_line_content": "    SILPerformanceInliner inliner(getOptions().InlineThreshold,",
          "new_line_content": "    // functions.",
          "content_same": false
        },
        {
          "line": 164,
          "old_api": "getFunctionCost",
          "new_api": null,
          "old_text": "getFunctionCost(Callee, Caller,\n                                        InlineCostThreshold * BoostFactor)",
          "new_text": null,
          "old_line_content": "  unsigned CalleeCost = getFunctionCost(Callee, Caller,",
          "new_line_content": "  // If the function accepts a closure increase the threshold because",
          "content_same": false
        },
        {
          "line": 293,
          "old_api": "empty",
          "new_api": null,
          "old_text": "Worklist.empty()",
          "new_text": null,
          "old_line_content": "    while (!Worklist.empty()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 295,
          "old_api": "pop_back",
          "new_api": null,
          "old_text": "Worklist.pop_back()",
          "new_text": null,
          "old_line_content": "      Worklist.pop_back();",
          "new_line_content": "                                  SILModule::LinkingMode::LinkAll, InlineSem);",
          "content_same": false
        },
        {
          "line": 302,
          "old_api": "inlineCallsIntoFunction",
          "new_api": null,
          "old_text": "inliner.inlineCallsIntoFunction(F, DA)",
          "new_text": null,
          "old_line_content": "      Changed |= inliner.inlineCallsIntoFunction(F, DA);",
          "new_line_content": "      // If F is empty, attempt to link it. Skip it if we fail to do so.",
          "content_same": false
        },
        {
          "line": 184,
          "old_api": "getName",
          "new_api": null,
          "old_text": "Caller->getName()",
          "new_text": null,
          "old_line_content": "  DEBUG(llvm::dbgs() << \"Visiting Function: \" << Caller->getName() << \"\\n\");",
          "new_line_content": "bool SILPerformanceInliner::inlineCallsIntoFunction(SILFunction *Caller,",
          "content_same": false
        },
        {
          "line": 190,
          "old_api": "getDomInfo",
          "new_api": null,
          "old_text": "DA->getDomInfo(Caller)",
          "new_text": null,
          "old_line_content": "  DominanceInfo *DT = DA->getDomInfo(Caller);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 191,
          "old_api": "isValid",
          "new_api": null,
          "old_text": "DT->isValid(Caller)",
          "new_text": null,
          "old_line_content": "  if (!DT->isValid(Caller))",
          "new_line_content": "  llvm::SmallVector<ApplyInst*, 8> CallSites;",
          "content_same": false
        },
        {
          "line": 192,
          "old_api": "recalculate",
          "new_api": null,
          "old_text": "DT->recalculate(*Caller)",
          "new_text": null,
          "old_line_content": "    DT->recalculate(*Caller);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 198,
          "old_api": "end",
          "new_api": null,
          "old_text": "BB.end()",
          "new_text": null,
          "old_line_content": "    auto I = BB.begin(), E = BB.end();",
          "new_line_content": "  ColdBlockInfo ColdBlocks(DA);",
          "content_same": false
        },
        {
          "line": 201,
          "old_api": "dyn_cast<ApplyInst>(I++)",
          "new_api": null,
          "old_text": "dyn_cast<ApplyInst>(I++)",
          "new_text": null,
          "old_line_content": "      ApplyInst *AI = dyn_cast<ApplyInst>(I++);",
          "new_line_content": "  // control flow and collecting the AIs simplifies the scan.",
          "content_same": false
        },
        {
          "line": 204,
          "old_api": "getParent",
          "new_api": null,
          "old_text": "AI->getParent()",
          "new_text": null,
          "old_line_content": "        if (!AI->isTransparent() && ColdBlocks.isCold(AI->getParent())) {",
          "new_line_content": "    while (I != E) {",
          "content_same": false
        },
        {
          "line": 205,
          "old_api": "llvm::dbgs()",
          "new_api": null,
          "old_text": "llvm::dbgs()",
          "new_text": null,
          "old_line_content": "          DEBUG(llvm::dbgs() << \"    Pruning cold call site:\" <<  *AI);",
          "new_line_content": "      // Check if this is a call site.",
          "content_same": false
        },
        {
          "line": 208,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "CallSites.push_back(AI)",
          "new_text": null,
          "old_line_content": "        CallSites.push_back(AI);",
          "new_line_content": "        // If the call site is on a slow path, do not inline.",
          "content_same": false
        },
        {
          "line": 216,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(AI && \"Invalid AI\")",
          "new_text": null,
          "old_line_content": "    assert(AI && \"Invalid AI\");",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 217,
          "old_api": "getInlinableFunction",
          "new_api": null,
          "old_text": "getInlinableFunction(AI, LinkMode,\n                                               InlineFunctionsWithSemantics)",
          "new_text": null,
          "old_line_content": "    SILFunction *Callee = getInlinableFunction(AI, LinkMode,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 224,
          "old_api": "llvm::dbgs()",
          "new_api": null,
          "old_text": "llvm::dbgs()",
          "new_text": null,
          "old_line_content": "    DEBUG(llvm::dbgs() << \"    Found call site:\" <<  *AI);",
          "new_line_content": "    if (Callee)",
          "content_same": false
        },
        {
          "line": 227,
          "old_api": "getInlinableFunction",
          "new_api": null,
          "old_text": "getInlinableFunction(AI, LinkMode,\n                                               InlineFunctionsWithSemantics)",
          "new_text": null,
          "old_line_content": "    SILFunction *Callee = getInlinableFunction(AI, LinkMode,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 230,
          "old_api": "llvm::dbgs()",
          "new_api": null,
          "old_text": "llvm::dbgs()",
          "new_text": null,
          "old_line_content": "      DEBUG(llvm::dbgs() << \"        FAIL! Cannot find inlineable callee.\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 233,
          "old_api": "isNoinline",
          "new_api": null,
          "old_text": "Callee->isNoinline()",
          "new_text": null,
          "old_line_content": "    if (Callee->isNoinline())",
          "new_line_content": "                                               InlineFunctionsWithSemantics);",
          "content_same": false
        },
        {
          "line": 236,
          "old_api": "getName",
          "new_api": null,
          "old_text": "Callee->getName()",
          "new_text": null,
          "old_line_content": "    DEBUG(llvm::dbgs() << \"        Found callee:\" <<  Callee->getName()",
          "new_line_content": "      continue;",
          "content_same": false
        },
        {
          "line": 239,
          "old_api": "isProfitableToInline",
          "new_api": null,
          "old_text": "isProfitableToInline(Caller, Callee, AI, CalleeCount[Callee])",
          "new_text": null,
          "old_line_content": "    if (!isProfitableToInline(Caller, Callee, AI, CalleeCount[Callee]))",
          "new_line_content": "      continue;",
          "content_same": false
        },
        {
          "line": 245,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "Args.push_back(Arg)",
          "new_text": null,
          "old_line_content": "    Args.push_back(Arg);",
          "new_line_content": "      continue;",
          "content_same": false
        },
        {
          "line": 248,
          "old_api": "getName",
          "new_api": null,
          "old_text": "Callee->getName()",
          "new_text": null,
          "old_line_content": "    DEBUG(llvm::dbgs() << \"        SUCCESS! Inlining \" << Callee->getName()",
          "new_line_content": "    SmallVector<SILValue, 8> Args;",
          "content_same": false
        },
        {
          "line": 255,
          "old_api": "inlineFunction",
          "new_api": null,
          "old_text": "Inliner.inlineFunction(AI, Callee, Args)",
          "new_text": null,
          "old_line_content": "    Inliner.inlineFunction(AI, Callee, Args);",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 7,
      "total_additions": 40,
      "total_deletions": 39,
      "total_api_changes": 86
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 5,
        "api_related_lines": 86,
        "non_api_lines": 4,
        "non_api_line_numbers": [
          128,
          129,
          125,
          126
        ]
      }
    },
    "api_calls_before": 95,
    "api_calls_after": 96,
    "diff_info": {
      "added_lines": 5,
      "removed_lines": 0,
      "total_diff_lines": 17
    }
  }
}
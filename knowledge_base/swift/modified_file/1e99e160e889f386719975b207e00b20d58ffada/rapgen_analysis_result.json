{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/swift/modified_file/1e99e160e889f386719975b207e00b20d58ffada",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/swift/modified_file/1e99e160e889f386719975b207e00b20d58ffada/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/swift/modified_file/1e99e160e889f386719975b207e00b20d58ffada/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/swift/modified_file/1e99e160e889f386719975b207e00b20d58ffada/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": true,
    "api_changes": {
      "replacements": [
        {
          "line": 306,
          "old_api": "runOneIteration",
          "new_api": "createLateInliner",
          "old_text": "PM.runOneIteration()",
          "new_text": "createLateInliner()",
          "old_line_content": "  PM.runOneIteration();",
          "new_line_content": "  PM.add(createLateInliner());",
          "content_same": false
        },
        {
          "line": 307,
          "old_api": "resetAndRemoveTransformations",
          "new_api": "AddSimplifyCFGSILCombine",
          "old_text": "PM.resetAndRemoveTransformations()",
          "new_text": "AddSimplifyCFGSILCombine(PM)",
          "old_line_content": "  PM.resetAndRemoveTransformations();",
          "new_line_content": "  AddSimplifyCFGSILCombine(PM);",
          "content_same": false
        },
        {
          "line": 309,
          "old_api": "setStageName",
          "new_api": "createSROA",
          "old_text": "PM.setStageName(\"LateLoopOpt\")",
          "new_text": "createSROA()",
          "old_line_content": "  PM.setStageName(\"LateLoopOpt\");",
          "new_line_content": "  PM.add(createSROA());",
          "content_same": false
        },
        {
          "line": 310,
          "old_api": "AddLowLevelLoopOptPasses",
          "new_api": "createMem2Reg",
          "old_text": "AddLowLevelLoopOptPasses(PM)",
          "new_text": "createMem2Reg()",
          "old_line_content": "  AddLowLevelLoopOptPasses(PM);",
          "new_line_content": "  PM.add(createMem2Reg());",
          "content_same": false
        },
        {
          "line": 313,
          "old_api": "createExternalFunctionDefinitionsElimination",
          "new_api": "createGlobalLoadStoreOpts",
          "old_text": "createExternalFunctionDefinitionsElimination()",
          "new_text": "createGlobalLoadStoreOpts()",
          "old_line_content": "  PM.add(createExternalFunctionDefinitionsElimination());",
          "new_line_content": "  PM.add(createGlobalLoadStoreOpts());",
          "content_same": false
        },
        {
          "line": 314,
          "old_api": "createDeadFunctionElimination",
          "new_api": "createCodeMotion",
          "old_text": "createDeadFunctionElimination()",
          "new_text": "createCodeMotion(false /* HoistReleases */)",
          "old_line_content": "  PM.add(createDeadFunctionElimination());",
          "new_line_content": "  PM.add(createCodeMotion(false /* HoistReleases */));",
          "content_same": false
        },
        {
          "line": 315,
          "old_api": "createMergeCondFails",
          "new_api": "createGlobalARCOpts",
          "old_text": "createMergeCondFails()",
          "new_text": "createGlobalARCOpts()",
          "old_line_content": "  PM.add(createMergeCondFails());",
          "new_line_content": "  PM.add(createGlobalARCOpts());",
          "content_same": false
        },
        {
          "line": 316,
          "old_api": "createCropOverflowChecks",
          "new_api": "createDevirtualizer",
          "old_text": "createCropOverflowChecks()",
          "new_text": "createDevirtualizer()",
          "old_line_content": "  PM.add(createCropOverflowChecks());",
          "new_line_content": "  PM.add(createDevirtualizer());",
          "content_same": false
        },
        {
          "line": 321,
          "old_api": "resetAndRemoveTransformations",
          "new_api": "setStageName",
          "old_text": "PM.resetAndRemoveTransformations()",
          "new_text": "PM.setStageName(\"LateLoopOpt\")",
          "old_line_content": "    PM.resetAndRemoveTransformations();",
          "new_line_content": "  PM.setStageName(\"LateLoopOpt\");",
          "content_same": false
        },
        {
          "line": 322,
          "old_api": "createCFGPrinter",
          "new_api": "AddLowLevelLoopOptPasses",
          "old_text": "createCFGPrinter()",
          "new_text": "AddLowLevelLoopOptPasses(PM)",
          "old_line_content": "    PM.add(createCFGPrinter());",
          "new_line_content": "  AddLowLevelLoopOptPasses(PM);",
          "content_same": false
        },
        {
          "line": 326,
          "old_api": "verify",
          "new_api": "createDeadFunctionElimination",
          "old_text": "Module.verify()",
          "new_text": "createDeadFunctionElimination()",
          "old_line_content": "  DEBUG(Module.verify());",
          "new_line_content": "  PM.add(createDeadFunctionElimination());",
          "content_same": false
        },
        {
          "line": 396,
          "old_api": "std::move(PM)",
          "new_api": "get",
          "old_text": "std::move(PM)",
          "new_text": "FileBufOrErr->get()->getBuffer()",
          "old_line_content": "    Descriptors.push_back(std::move(PM));",
          "new_line_content": "  StringRef Buffer = FileBufOrErr->get()->getBuffer();",
          "content_same": false
        },
        {
          "line": 434,
          "old_api": "size",
          "new_api": "getRawValue",
          "old_text": "PassName.size()",
          "new_text": "cast<yaml::ScalarNode>(&*DescIter)->getRawValue()",
          "old_line_content": "    unsigned Size = PassName.size()-2;",
          "new_line_content": "  ActionName = cast<yaml::ScalarNode>(&*DescIter)->getRawValue();",
          "content_same": false
        },
        {
          "line": 435,
          "old_api": "substr",
          "new_api": "size",
          "old_text": "PassName.substr(1, Size)",
          "new_text": "ActionName.size()",
          "old_line_content": "    Passes.push_back(PassName.substr(1, Size));",
          "new_line_content": "  unsigned ActionSize = ActionName.size()-2;",
          "content_same": false
        },
        {
          "line": 445,
          "old_api": "PMDescriptor::descriptorsForFile(FileName, Descriptors)",
          "new_api": "getRawValue",
          "old_text": "PMDescriptor::descriptorsForFile(FileName, Descriptors)",
          "new_text": "cast<yaml::ScalarNode>(&*DescIter)->getRawValue()",
          "old_line_content": "  PMDescriptor::descriptorsForFile(FileName, Descriptors);",
          "new_line_content": "    StringRef PassName = cast<yaml::ScalarNode>(&*DescIter)->getRawValue();",
          "content_same": false
        },
        {
          "line": 457,
          "old_api": "equals",
          "new_api": "PMDescriptor::descriptorsForFile(FileName, Descriptors)",
          "old_text": "Desc.ActionName.equals(\"run_n_times\")",
          "new_text": "PMDescriptor::descriptorsForFile(FileName, Descriptors)",
          "old_line_content": "    if (Desc.ActionName.equals(\"run_n_times\")) {",
          "new_line_content": "  PMDescriptor::descriptorsForFile(FileName, Descriptors);",
          "content_same": false
        },
        {
          "line": 465,
          "old_api": "run",
          "new_api": "llvm::dbgs()",
          "old_text": "PM.run()",
          "new_text": "llvm::dbgs()",
          "old_line_content": "      PM.run();",
          "new_line_content": "      DEBUG(llvm::dbgs() << \"  Adding Pass: \" << P << \"\\n\");",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 391,
          "old_api": null,
          "new_api": "llvm::MemoryBuffer::getFileOrSTDIN(Filename)",
          "old_text": null,
          "new_text": "llvm::MemoryBuffer::getFileOrSTDIN(Filename)",
          "old_line_content": "",
          "new_line_content": "    llvm::MemoryBuffer::getFileOrSTDIN(Filename);",
          "content_same": false
        },
        {
          "line": 393,
          "old_api": null,
          "new_api": "llvm_unreachable",
          "old_text": null,
          "new_text": "llvm_unreachable(\"Failed to read yaml file\")",
          "old_line_content": "",
          "new_line_content": "    llvm_unreachable(\"Failed to read yaml file\");",
          "content_same": false
        },
        {
          "line": 399,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "Stream.begin()",
          "old_line_content": "",
          "new_line_content": "  yaml::document_iterator DI = Stream.begin();",
          "content_same": false
        },
        {
          "line": 400,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "Stream.end()",
          "old_line_content": "/// Our general format is as follows:",
          "new_line_content": "  assert(DI != Stream.end() && \"Failed to read a document\");",
          "content_same": false
        },
        {
          "line": 401,
          "old_api": null,
          "new_api": "getRoot",
          "old_text": null,
          "new_text": "DI->getRoot()",
          "old_line_content": "///",
          "new_line_content": "  yaml::Node *N = DI->getRoot();",
          "content_same": false
        },
        {
          "line": 402,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(N && \"Failed to find a root\")",
          "old_line_content": "///   [",
          "new_line_content": "  assert(N && \"Failed to find a root\");",
          "content_same": false
        },
        {
          "line": 404,
          "old_api": null,
          "new_api": "cast<yaml::SequenceNode>(N)",
          "old_text": null,
          "new_text": "cast<yaml::SequenceNode>(N)",
          "old_line_content": "///       \"PASS_MANAGER_ID\",",
          "new_line_content": "  auto *RootList = cast<yaml::SequenceNode>(N);",
          "content_same": false
        },
        {
          "line": 406,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "RootList->end()",
          "old_line_content": "///       count,",
          "new_line_content": "  for (auto &PMDescriptorIter : make_range(RootList->begin(), RootList->end())) {",
          "content_same": false
        },
        {
          "line": 407,
          "old_api": null,
          "new_api": "cast<yaml::SequenceNode>(&PMDescriptorIter)",
          "old_text": null,
          "new_text": "cast<yaml::SequenceNode>(&PMDescriptorIter)",
          "old_line_content": "///       \"PASS1\", \"PASS2\", ...",
          "new_line_content": "    PMDescriptor PM(cast<yaml::SequenceNode>(&PMDescriptorIter));",
          "content_same": false
        },
        {
          "line": 408,
          "old_api": null,
          "new_api": "std::move(PM)",
          "old_text": null,
          "new_text": "std::move(PM)",
          "old_line_content": "///     ],",
          "new_line_content": "    Descriptors.push_back(std::move(PM));",
          "content_same": false
        },
        {
          "line": 430,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "Desc->begin()",
          "old_line_content": "  ++DescIter;",
          "new_line_content": "  yaml::SequenceNode::iterator DescIter = Desc->begin();",
          "content_same": false
        },
        {
          "line": 431,
          "old_api": null,
          "new_api": "getRawValue",
          "old_text": null,
          "new_text": "cast<yaml::ScalarNode>(&*DescIter)->getRawValue()",
          "old_line_content": "",
          "new_line_content": "  Id = cast<yaml::ScalarNode>(&*DescIter)->getRawValue();",
          "content_same": false
        },
        {
          "line": 308,
          "old_api": null,
          "new_api": "createAllocBoxToStack",
          "old_text": null,
          "new_text": "createAllocBoxToStack()",
          "old_line_content": "",
          "new_line_content": "  PM.add(createAllocBoxToStack());",
          "content_same": false
        },
        {
          "line": 436,
          "old_api": null,
          "new_api": "substr",
          "old_text": null,
          "new_text": "ActionName.substr(1, ActionSize)",
          "old_line_content": "  }",
          "new_line_content": "  ActionName = ActionName.substr(1, ActionSize);",
          "content_same": false
        },
        {
          "line": 311,
          "old_api": null,
          "new_api": "createSILCombine",
          "old_text": null,
          "new_text": "createSILCombine()",
          "old_line_content": "",
          "new_line_content": "  PM.add(createSILCombine());",
          "content_same": false
        },
        {
          "line": 312,
          "old_api": null,
          "new_api": "createSimplifyCFG",
          "old_text": null,
          "new_text": "createSimplifyCFG()",
          "old_line_content": "  // Perform the final lowering transformations.",
          "new_line_content": "  PM.add(createSimplifyCFG());",
          "content_same": false
        },
        {
          "line": 439,
          "old_api": null,
          "new_api": "cast<yaml::ScalarNode>(&*DescIter)",
          "old_text": null,
          "new_text": "cast<yaml::ScalarNode>(&*DescIter)",
          "old_line_content": "#endif",
          "new_line_content": "  auto *ActionCountValue = cast<yaml::ScalarNode>(&*DescIter);",
          "content_same": false
        },
        {
          "line": 440,
          "old_api": null,
          "new_api": "getRawValue",
          "old_text": null,
          "new_text": "ActionCountValue->getRawValue()",
          "old_line_content": "",
          "new_line_content": "  APInt APCount(64, ActionCountValue->getRawValue(), 10);",
          "content_same": false
        },
        {
          "line": 441,
          "old_api": null,
          "new_api": "getLimitedValue",
          "old_text": null,
          "new_text": "APCount.getLimitedValue(UINT_MAX)",
          "old_line_content": "void swift::runSILOptimizationPassesWithFileSpecification(SILModule &Module,",
          "new_line_content": "  ActionCount = APCount.getLimitedValue(UINT_MAX);",
          "content_same": false
        },
        {
          "line": 444,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "Desc->end()",
          "old_line_content": "  llvm::SmallVector<PMDescriptor, 4> Descriptors;",
          "new_line_content": "  for (auto DescEnd = Desc->end(); DescIter != DescEnd; ++DescIter) {",
          "content_same": false
        },
        {
          "line": 318,
          "old_api": null,
          "new_api": "runOneIteration",
          "old_text": null,
          "new_text": "PM.runOneIteration()",
          "old_line_content": "",
          "new_line_content": "  PM.runOneIteration();",
          "content_same": false
        },
        {
          "line": 319,
          "old_api": null,
          "new_api": "resetAndRemoveTransformations",
          "old_text": null,
          "new_text": "PM.resetAndRemoveTransformations()",
          "old_line_content": "  // Call the CFG viewer.",
          "new_line_content": "  PM.resetAndRemoveTransformations();",
          "content_same": false
        },
        {
          "line": 446,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "PassName.size()",
          "old_line_content": "",
          "new_line_content": "    unsigned Size = PassName.size()-2;",
          "content_same": false
        },
        {
          "line": 447,
          "old_api": null,
          "new_api": "substr",
          "old_text": null,
          "new_text": "PassName.substr(1, Size)",
          "old_line_content": "  for (auto &Desc : Descriptors) {",
          "new_line_content": "    Passes.push_back(PassName.substr(1, Size));",
          "content_same": false
        },
        {
          "line": 325,
          "old_api": null,
          "new_api": "createExternalFunctionDefinitionsElimination",
          "old_text": null,
          "new_text": "createExternalFunctionDefinitionsElimination()",
          "old_line_content": "",
          "new_line_content": "  PM.add(createExternalFunctionDefinitionsElimination());",
          "content_same": false
        },
        {
          "line": 327,
          "old_api": null,
          "new_api": "createMergeCondFails",
          "old_text": null,
          "new_text": "createMergeCondFails()",
          "old_line_content": "}",
          "new_line_content": "  PM.add(createMergeCondFails());",
          "content_same": false
        },
        {
          "line": 328,
          "old_api": null,
          "new_api": "createCropOverflowChecks",
          "old_text": null,
          "new_text": "createCropOverflowChecks()",
          "old_line_content": "",
          "new_line_content": "  PM.add(createCropOverflowChecks());",
          "content_same": false
        },
        {
          "line": 329,
          "old_api": null,
          "new_api": "runOneIteration",
          "old_text": null,
          "new_text": "PM.runOneIteration()",
          "old_line_content": "SILTransform *swift::createPass(PassKind Kind) {",
          "new_line_content": "  PM.runOneIteration();",
          "content_same": false
        },
        {
          "line": 460,
          "old_api": null,
          "new_api": "llvm::dbgs()",
          "old_text": null,
          "new_text": "llvm::dbgs()",
          "old_line_content": "      for (unsigned i = 0, e = Count; i < e; ++i) {",
          "new_line_content": "    DEBUG(llvm::dbgs() << \"Creating PM: \" << Desc.Id << \"\\n\");",
          "content_same": false
        },
        {
          "line": 333,
          "old_api": null,
          "new_api": "resetAndRemoveTransformations",
          "old_text": null,
          "new_text": "PM.resetAndRemoveTransformations()",
          "old_line_content": "#define PASS(Id, ...)                           \\",
          "new_line_content": "    PM.resetAndRemoveTransformations();",
          "content_same": false
        },
        {
          "line": 334,
          "old_api": null,
          "new_api": "createCFGPrinter",
          "old_text": null,
          "new_text": "createCFGPrinter()",
          "old_line_content": "  case PassKind::Id:                            \\",
          "new_line_content": "    PM.add(createCFGPrinter());",
          "content_same": false
        },
        {
          "line": 335,
          "old_api": null,
          "new_api": "runOneIteration",
          "old_text": null,
          "new_text": "PM.runOneIteration()",
          "old_line_content": "    return create##Id();                        \\",
          "new_line_content": "    PM.runOneIteration();",
          "content_same": false
        },
        {
          "line": 462,
          "old_api": null,
          "new_api": "registerAnalysisPasses",
          "old_text": null,
          "new_text": "registerAnalysisPasses(PM)",
          "old_line_content": "      }",
          "new_line_content": "    registerAnalysisPasses(PM);",
          "content_same": false
        },
        {
          "line": 338,
          "old_api": null,
          "new_api": "verify",
          "old_text": null,
          "new_text": "Module.verify()",
          "old_line_content": "  }",
          "new_line_content": "  DEBUG(Module.verify());",
          "content_same": false
        },
        {
          "line": 466,
          "old_api": null,
          "new_api": "createPassForName",
          "old_text": null,
          "new_text": "createPassForName(P)",
          "old_line_content": "    } else {",
          "new_line_content": "      PM.add(createPassForName(P));",
          "content_same": false
        },
        {
          "line": 469,
          "old_api": null,
          "new_api": "equals",
          "old_text": null,
          "new_text": "Desc.ActionName.equals(\"run_n_times\")",
          "old_line_content": "  }",
          "new_line_content": "    if (Desc.ActionName.equals(\"run_n_times\")) {",
          "content_same": false
        },
        {
          "line": 342,
          "old_api": null,
          "new_api": "unsigned",
          "old_text": null,
          "new_text": "unsigned(Kind)",
          "old_line_content": "",
          "new_line_content": "  assert(unsigned(PassKind::AllPasses_Last) >= unsigned(Kind) &&",
          "content_same": false
        },
        {
          "line": 470,
          "old_api": null,
          "new_api": "getValue",
          "old_text": null,
          "new_text": "Desc.ActionCount.getValue()",
          "old_line_content": "#endif",
          "new_line_content": "      unsigned Count = Desc.ActionCount.getValue();",
          "content_same": false
        },
        {
          "line": 471,
          "old_api": null,
          "new_api": "llvm::dbgs()",
          "old_text": null,
          "new_text": "llvm::dbgs()",
          "old_line_content": "}",
          "new_line_content": "      DEBUG(llvm::dbgs() << \"    Running \" << Count << \" iterations...\\n\");",
          "content_same": false
        },
        {
          "line": 473,
          "old_api": null,
          "new_api": "runOneIteration",
          "old_text": null,
          "new_text": "PM.runOneIteration()",
          "old_line_content": "",
          "new_line_content": "        PM.runOneIteration();",
          "content_same": false
        },
        {
          "line": 475,
          "old_api": null,
          "new_api": "equals",
          "old_text": null,
          "new_text": "Desc.ActionName.equals(\"run_to_fixed_point\")",
          "old_line_content": "",
          "new_line_content": "    } else if (Desc.ActionName.equals(\"run_to_fixed_point\")) {",
          "content_same": false
        },
        {
          "line": 476,
          "old_api": null,
          "new_api": "llvm::dbgs()",
          "old_text": null,
          "new_text": "llvm::dbgs()",
          "old_line_content": "",
          "new_line_content": "      DEBUG(llvm::dbgs() << \"    Running until fixed point...\\n\");",
          "content_same": false
        },
        {
          "line": 477,
          "old_api": null,
          "new_api": "run",
          "old_text": null,
          "new_text": "PM.run()",
          "old_line_content": "",
          "new_line_content": "      PM.run();",
          "content_same": false
        },
        {
          "line": 479,
          "old_api": null,
          "new_api": "llvm_unreachable",
          "old_text": null,
          "new_text": "llvm_unreachable(\"unknown action\")",
          "old_line_content": "",
          "new_line_content": "      llvm_unreachable(\"unknown action\");",
          "content_same": false
        },
        {
          "line": 356,
          "old_api": null,
          "new_api": "llvm::StringSwitch<PassKind>(Name)",
          "old_text": null,
          "new_text": "llvm::StringSwitch<PassKind>(Name)",
          "old_line_content": "  Optional<unsigned> ActionCount;",
          "new_line_content": "  auto P = llvm::StringSwitch<PassKind>(Name)",
          "content_same": false
        },
        {
          "line": 360,
          "old_api": null,
          "new_api": "createPass",
          "old_text": null,
          "new_text": "createPass(P)",
          "old_line_content": "  ~PMDescriptor() = default;",
          "new_line_content": "  return createPass(P);",
          "content_same": false
        },
        {
          "line": 371,
          "old_api": null,
          "new_api": "explicit",
          "old_text": null,
          "new_text": "explicit",
          "old_line_content": "void",
          "new_line_content": "  explicit PMDescriptor(llvm::yaml::SequenceNode *Descriptor);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 384,
          "old_api": "get",
          "new_api": null,
          "old_text": "FileBufOrErr->get()->getBuffer()",
          "new_text": null,
          "old_line_content": "  StringRef Buffer = FileBufOrErr->get()->getBuffer();",
          "new_line_content": "PMDescriptor::",
          "content_same": false
        },
        {
          "line": 387,
          "old_api": "begin",
          "new_api": null,
          "old_text": "Stream.begin()",
          "new_text": null,
          "old_line_content": "  yaml::document_iterator DI = Stream.begin();",
          "new_line_content": "  namespace yaml = llvm::yaml;",
          "content_same": false
        },
        {
          "line": 388,
          "old_api": "end",
          "new_api": null,
          "old_text": "Stream.end()",
          "new_text": null,
          "old_line_content": "  assert(DI != Stream.end() && \"Failed to read a document\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 389,
          "old_api": "getRoot",
          "new_api": null,
          "old_text": "DI->getRoot()",
          "new_text": null,
          "old_line_content": "  yaml::Node *N = DI->getRoot();",
          "new_line_content": "  // Load the input file.",
          "content_same": false
        },
        {
          "line": 390,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(N && \"Failed to find a root\")",
          "new_text": null,
          "old_line_content": "  assert(N && \"Failed to find a root\");",
          "new_line_content": "  llvm::ErrorOr<std::unique_ptr<llvm::MemoryBuffer>> FileBufOrErr =",
          "content_same": false
        },
        {
          "line": 392,
          "old_api": "cast<yaml::SequenceNode>(N)",
          "new_api": null,
          "old_text": "cast<yaml::SequenceNode>(N)",
          "new_text": null,
          "old_line_content": "  auto *RootList = cast<yaml::SequenceNode>(N);",
          "new_line_content": "  if (!FileBufOrErr) {",
          "content_same": false
        },
        {
          "line": 394,
          "old_api": "end",
          "new_api": null,
          "old_text": "RootList->end()",
          "new_text": null,
          "old_line_content": "  for (auto &PMDescriptorIter : make_range(RootList->begin(), RootList->end())) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 395,
          "old_api": "cast<yaml::SequenceNode>(&PMDescriptorIter)",
          "new_api": null,
          "old_text": "cast<yaml::SequenceNode>(&PMDescriptorIter)",
          "new_text": null,
          "old_line_content": "    PMDescriptor PM(cast<yaml::SequenceNode>(&PMDescriptorIter));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 418,
          "old_api": "begin",
          "new_api": null,
          "old_text": "Desc->begin()",
          "new_text": null,
          "old_line_content": "  yaml::SequenceNode::iterator DescIter = Desc->begin();",
          "new_line_content": "///       count,",
          "content_same": false
        },
        {
          "line": 419,
          "old_api": "getRawValue",
          "new_api": null,
          "old_text": "cast<yaml::ScalarNode>(&*DescIter)->getRawValue()",
          "new_text": null,
          "old_line_content": "  Id = cast<yaml::ScalarNode>(&*DescIter)->getRawValue();",
          "new_line_content": "///       \"PASS1\", \"PASS2\", ...",
          "content_same": false
        },
        {
          "line": 422,
          "old_api": "getRawValue",
          "new_api": null,
          "old_text": "cast<yaml::ScalarNode>(&*DescIter)->getRawValue()",
          "new_text": null,
          "old_line_content": "  ActionName = cast<yaml::ScalarNode>(&*DescIter)->getRawValue();",
          "new_line_content": "///   ]",
          "content_same": false
        },
        {
          "line": 423,
          "old_api": "size",
          "new_api": null,
          "old_text": "ActionName.size()",
          "new_text": null,
          "old_line_content": "  unsigned ActionSize = ActionName.size()-2;",
          "new_line_content": "///",
          "content_same": false
        },
        {
          "line": 424,
          "old_api": "substr",
          "new_api": null,
          "old_text": "ActionName.substr(1, ActionSize)",
          "new_text": null,
          "old_line_content": "  ActionName = ActionName.substr(1, ActionSize);",
          "new_line_content": "/// Where \"id\" is printed out when we process the action, \"action\" can be one of",
          "content_same": false
        },
        {
          "line": 427,
          "old_api": "cast<yaml::ScalarNode>(&*DescIter)",
          "new_api": null,
          "old_text": "cast<yaml::ScalarNode>(&*DescIter)",
          "new_text": null,
          "old_line_content": "  auto *ActionCountValue = cast<yaml::ScalarNode>(&*DescIter);",
          "new_line_content": "PMDescriptor::PMDescriptor(llvm::yaml::SequenceNode *Desc) {",
          "content_same": false
        },
        {
          "line": 428,
          "old_api": "getRawValue",
          "new_api": null,
          "old_text": "ActionCountValue->getRawValue()",
          "new_text": null,
          "old_line_content": "  APInt APCount(64, ActionCountValue->getRawValue(), 10);",
          "new_line_content": "  namespace yaml = llvm::yaml;",
          "content_same": false
        },
        {
          "line": 429,
          "old_api": "getLimitedValue",
          "new_api": null,
          "old_text": "APCount.getLimitedValue(UINT_MAX)",
          "new_text": null,
          "old_line_content": "  ActionCount = APCount.getLimitedValue(UINT_MAX);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 432,
          "old_api": "end",
          "new_api": null,
          "old_text": "Desc->end()",
          "new_text": null,
          "old_line_content": "  for (auto DescEnd = Desc->end(); DescIter != DescEnd; ++DescIter) {",
          "new_line_content": "  ++DescIter;",
          "content_same": false
        },
        {
          "line": 305,
          "old_api": "AddSSAPasses",
          "new_api": null,
          "old_text": "AddSSAPasses(PM, OptimizationLevelKind::LowLevel)",
          "new_text": null,
          "old_line_content": "  AddSSAPasses(PM, OptimizationLevelKind::LowLevel);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 433,
          "old_api": "getRawValue",
          "new_api": null,
          "old_text": "cast<yaml::ScalarNode>(&*DescIter)->getRawValue()",
          "new_text": null,
          "old_line_content": "    StringRef PassName = cast<yaml::ScalarNode>(&*DescIter)->getRawValue();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 317,
          "old_api": "runOneIteration",
          "new_api": null,
          "old_text": "PM.runOneIteration()",
          "new_text": null,
          "old_line_content": "  PM.runOneIteration();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 448,
          "old_api": "llvm::dbgs()",
          "new_api": null,
          "old_text": "llvm::dbgs()",
          "new_text": null,
          "old_line_content": "    DEBUG(llvm::dbgs() << \"Creating PM: \" << Desc.Id << \"\\n\");",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 450,
          "old_api": "registerAnalysisPasses",
          "new_api": null,
          "old_text": "registerAnalysisPasses(PM)",
          "new_text": null,
          "old_line_content": "    registerAnalysisPasses(PM);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 323,
          "old_api": "runOneIteration",
          "new_api": null,
          "old_text": "PM.runOneIteration()",
          "new_text": null,
          "old_line_content": "    PM.runOneIteration();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 453,
          "old_api": "llvm::dbgs()",
          "new_api": null,
          "old_text": "llvm::dbgs()",
          "new_text": null,
          "old_line_content": "      DEBUG(llvm::dbgs() << \"  Adding Pass: \" << P << \"\\n\");",
          "new_line_content": "void swift::runSILOptimizationPassesWithFileSpecification(SILModule &Module,",
          "content_same": false
        },
        {
          "line": 454,
          "old_api": "createPassForName",
          "new_api": null,
          "old_text": "createPassForName(P)",
          "new_text": null,
          "old_line_content": "      PM.add(createPassForName(P));",
          "new_line_content": "                                                          StringRef FileName) {",
          "content_same": false
        },
        {
          "line": 330,
          "old_api": "unsigned",
          "new_api": null,
          "old_text": "unsigned(Kind)",
          "new_text": null,
          "old_line_content": "  assert(unsigned(PassKind::AllPasses_Last) >= unsigned(Kind) &&",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 458,
          "old_api": "getValue",
          "new_api": null,
          "old_text": "Desc.ActionCount.getValue()",
          "new_text": null,
          "old_line_content": "      unsigned Count = Desc.ActionCount.getValue();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 459,
          "old_api": "llvm::dbgs()",
          "new_api": null,
          "old_text": "llvm::dbgs()",
          "new_text": null,
          "old_line_content": "      DEBUG(llvm::dbgs() << \"    Running \" << Count << \" iterations...\\n\");",
          "new_line_content": "  for (auto &Desc : Descriptors) {",
          "content_same": false
        },
        {
          "line": 461,
          "old_api": "runOneIteration",
          "new_api": null,
          "old_text": "PM.runOneIteration()",
          "new_text": null,
          "old_line_content": "        PM.runOneIteration();",
          "new_line_content": "    SILPassManager PM(&Module, Desc.Id);",
          "content_same": false
        },
        {
          "line": 463,
          "old_api": "equals",
          "new_api": null,
          "old_text": "Desc.ActionName.equals(\"run_to_fixed_point\")",
          "new_text": null,
          "old_line_content": "    } else if (Desc.ActionName.equals(\"run_to_fixed_point\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 464,
          "old_api": "llvm::dbgs()",
          "new_api": null,
          "old_text": "llvm::dbgs()",
          "new_text": null,
          "old_line_content": "      DEBUG(llvm::dbgs() << \"    Running until fixed point...\\n\");",
          "new_line_content": "    for (auto &P : Desc.Passes) {",
          "content_same": false
        },
        {
          "line": 467,
          "old_api": "llvm_unreachable",
          "new_api": null,
          "old_text": "llvm_unreachable(\"unknown action\")",
          "new_text": null,
          "old_line_content": "      llvm_unreachable(\"unknown action\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 344,
          "old_api": "llvm::StringSwitch<PassKind>(Name)",
          "new_api": null,
          "old_text": "llvm::StringSwitch<PassKind>(Name)",
          "new_text": null,
          "old_line_content": "  auto P = llvm::StringSwitch<PassKind>(Name)",
          "new_line_content": "  switch (Kind) {",
          "content_same": false
        },
        {
          "line": 348,
          "old_api": "createPass",
          "new_api": null,
          "old_text": "createPass(P)",
          "new_text": null,
          "old_line_content": "  return createPass(P);",
          "new_line_content": "    break;",
          "content_same": false
        },
        {
          "line": 359,
          "old_api": "explicit",
          "new_api": null,
          "old_text": "explicit",
          "new_text": null,
          "old_line_content": "  explicit PMDescriptor(llvm::yaml::SequenceNode *Descriptor);",
          "new_line_content": "  ;",
          "content_same": false
        },
        {
          "line": 379,
          "old_api": "llvm::MemoryBuffer::getFileOrSTDIN(Filename)",
          "new_api": null,
          "old_text": "llvm::MemoryBuffer::getFileOrSTDIN(Filename)",
          "new_text": null,
          "old_line_content": "    llvm::MemoryBuffer::getFileOrSTDIN(Filename);",
          "new_line_content": "};",
          "content_same": false
        },
        {
          "line": 381,
          "old_api": "llvm_unreachable",
          "new_api": null,
          "old_text": "llvm_unreachable(\"Failed to read yaml file\")",
          "new_text": null,
          "old_line_content": "    llvm_unreachable(\"Failed to read yaml file\");",
          "new_line_content": "} // end anonymous namespace",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 17,
      "total_additions": 47,
      "total_deletions": 37,
      "total_api_changes": 101
    },
    "non_api_changes": {
      "has_non_api_changes": false,
      "evidence": {
        "total_diff_lines": 13,
        "api_related_lines": 101,
        "non_api_lines": 0,
        "non_api_line_numbers": []
      }
    },
    "api_calls_before": 294,
    "api_calls_after": 314,
    "diff_info": {
      "added_lines": 13,
      "removed_lines": 1,
      "total_diff_lines": 26
    }
  }
}
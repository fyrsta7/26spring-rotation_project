{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/micropython/modified_file/c3d96d387c461c25ca3298dfa73d2a4efb45f1e7",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/micropython/modified_file/c3d96d387c461c25ca3298dfa73d2a4efb45f1e7/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/micropython/modified_file/c3d96d387c461c25ca3298dfa73d2a4efb45f1e7/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/micropython/modified_file/c3d96d387c461c25ca3298dfa73d2a4efb45f1e7/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 215,
          "old_api": "MP_DEFINE_EXCEPTION",
          "new_api": "MP_DEFINE_EXCEPTION_BASE",
          "old_text": "MP_DEFINE_EXCEPTION(ArithmeticError, Exception)",
          "new_text": "MP_DEFINE_EXCEPTION_BASE(BaseException)",
          "old_line_content": "  MP_DEFINE_EXCEPTION(ArithmeticError, Exception)",
          "new_line_content": "MP_DEFINE_EXCEPTION_BASE(BaseException)",
          "content_same": false
        },
        {
          "line": 216,
          "old_api": "MP_DEFINE_EXCEPTION_BASE",
          "new_api": "MP_DEFINE_EXCEPTION",
          "old_text": "MP_DEFINE_EXCEPTION_BASE(ArithmeticError)",
          "new_text": "MP_DEFINE_EXCEPTION(SystemExit, BaseException)",
          "old_line_content": "    MP_DEFINE_EXCEPTION_BASE(ArithmeticError)",
          "new_line_content": "MP_DEFINE_EXCEPTION(SystemExit, BaseException)",
          "content_same": false
        },
        {
          "line": 220,
          "old_api": "MP_DEFINE_EXCEPTION",
          "new_api": "MP_DEFINE_EXCEPTION_BASE",
          "old_text": "MP_DEFINE_EXCEPTION(AssertionError, Exception)",
          "new_text": "MP_DEFINE_EXCEPTION_BASE(Exception)",
          "old_line_content": "  MP_DEFINE_EXCEPTION(AssertionError, Exception)",
          "new_line_content": "  MP_DEFINE_EXCEPTION_BASE(Exception)",
          "content_same": false
        },
        {
          "line": 228,
          "old_api": "MP_DEFINE_EXCEPTION_BASE",
          "new_api": "MP_DEFINE_EXCEPTION",
          "old_text": "MP_DEFINE_EXCEPTION_BASE(LookupError)",
          "new_text": "MP_DEFINE_EXCEPTION(OverflowError, ArithmeticError)",
          "old_line_content": "    MP_DEFINE_EXCEPTION_BASE(LookupError)",
          "new_line_content": "    MP_DEFINE_EXCEPTION(OverflowError, ArithmeticError)",
          "content_same": false
        },
        {
          "line": 239,
          "old_api": "MP_DEFINE_EXCEPTION_BASE",
          "new_api": "MP_DEFINE_EXCEPTION",
          "old_text": "MP_DEFINE_EXCEPTION_BASE(OSError)",
          "new_text": "MP_DEFINE_EXCEPTION(IndexError, LookupError)",
          "old_line_content": "    MP_DEFINE_EXCEPTION_BASE(OSError)",
          "new_line_content": "    MP_DEFINE_EXCEPTION(IndexError, LookupError)",
          "content_same": false
        },
        {
          "line": 270,
          "old_api": "MP_DEFINE_EXCEPTION",
          "new_api": "MP_DEFINE_EXCEPTION_BASE",
          "old_text": "MP_DEFINE_EXCEPTION(TypeError, Exception)",
          "new_text": "MP_DEFINE_EXCEPTION_BASE(RuntimeError)",
          "old_line_content": "  MP_DEFINE_EXCEPTION(TypeError, Exception)",
          "new_line_content": "    MP_DEFINE_EXCEPTION_BASE(RuntimeError)",
          "content_same": false
        },
        {
          "line": 272,
          "old_api": "MP_DEFINE_EXCEPTION_BASE",
          "new_api": "MP_DEFINE_EXCEPTION",
          "old_text": "MP_DEFINE_EXCEPTION_BASE(TypeError)",
          "new_text": "MP_DEFINE_EXCEPTION(SyntaxError, Exception)",
          "old_line_content": "    MP_DEFINE_EXCEPTION_BASE(TypeError)",
          "new_line_content": "  MP_DEFINE_EXCEPTION(SyntaxError, Exception)",
          "content_same": false
        },
        {
          "line": 273,
          "old_api": "MP_DEFINE_EXCEPTION",
          "new_api": "MP_DEFINE_EXCEPTION_BASE",
          "old_text": "MP_DEFINE_EXCEPTION(ViperTypeError, TypeError)",
          "new_text": "MP_DEFINE_EXCEPTION_BASE(SyntaxError)",
          "old_line_content": "    MP_DEFINE_EXCEPTION(ViperTypeError, TypeError)",
          "new_line_content": "    MP_DEFINE_EXCEPTION_BASE(SyntaxError)",
          "content_same": false
        },
        {
          "line": 307,
          "old_api": "make_new",
          "new_api": "mp_obj_new_exception_args",
          "old_text": "exc_type->make_new(exc_type, n_args, 0, args)",
          "new_text": "mp_obj_new_exception_args(exc_type, 0, NULL)",
          "old_line_content": "    return exc_type->make_new(exc_type, n_args, 0, args);",
          "new_line_content": "    return mp_obj_new_exception_args(exc_type, 0, NULL);",
          "content_same": false
        },
        {
          "line": 348,
          "old_api": "va_start",
          "new_api": "MP_OBJ_FROM_PTR",
          "old_text": "va_start(ap, fmt)",
          "new_text": "MP_OBJ_FROM_PTR(str)",
          "old_line_content": "            va_start(ap, fmt);",
          "new_line_content": "            tuple->items[0] = MP_OBJ_FROM_PTR(str);",
          "content_same": false
        },
        {
          "line": 359,
          "old_api": "MP_STATE_VM",
          "new_api": "vstr_vprintf",
          "old_text": "MP_STATE_VM(mp_emergency_exception_buf)",
          "new_text": "vstr_vprintf(&vstr, fmt, ap)",
          "old_line_content": "            uint offset = &str_data[str->len] - MP_STATE_VM(mp_emergency_exception_buf);",
          "new_line_content": "            vstr_vprintf(&vstr, fmt, ap);",
          "content_same": false
        },
        {
          "line": 388,
          "old_api": "va_start",
          "new_api": "assert",
          "old_text": "va_start(ap, fmt)",
          "new_text": "assert(0)",
          "old_line_content": "                va_start(ap, fmt);",
          "new_line_content": "            assert(0);",
          "content_same": false
        },
        {
          "line": 390,
          "old_api": "va_end",
          "new_api": "strchr",
          "old_text": "va_end(ap)",
          "new_text": "strchr(fmt, '%')",
          "old_line_content": "                va_end(ap);",
          "new_line_content": "            if (strchr(fmt, '%') == NULL) {",
          "content_same": false
        },
        {
          "line": 401,
          "old_api": "MP_OBJ_IS_TYPE",
          "new_api": "mp_obj_new_str_from_vstr",
          "old_text": "MP_OBJ_IS_TYPE(self_in, &mp_type_type)",
          "new_text": "mp_obj_new_str_from_vstr(&mp_type_str, &vstr)",
          "old_line_content": "    if (MP_OBJ_IS_TYPE(self_in, &mp_type_type)) {",
          "new_line_content": "                o->args->items[0] = mp_obj_new_str_from_vstr(&mp_type_str, &vstr);",
          "content_same": false
        },
        {
          "line": 413,
          "old_api": "mp_obj_get_type",
          "new_api": "MP_OBJ_TO_PTR",
          "old_text": "mp_obj_get_type(self_in)",
          "new_text": "MP_OBJ_TO_PTR(self_in)",
          "old_line_content": "    return mp_obj_is_exception_type(MP_OBJ_FROM_PTR(mp_obj_get_type(self_in)));",
          "new_line_content": "        mp_obj_type_t *self = MP_OBJ_TO_PTR(self_in);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 384,
          "old_api": null,
          "new_api": "mp_obj_new_tuple",
          "old_text": null,
          "new_text": "mp_obj_new_tuple(1, NULL)",
          "old_line_content": "                // render exception message and store as .args[0]",
          "new_line_content": "        o->args = MP_OBJ_TO_PTR(mp_obj_new_tuple(1, NULL));",
          "content_same": false
        },
        {
          "line": 392,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(fmt)",
          "old_line_content": "            }",
          "new_line_content": "                o->args->items[0] = mp_obj_new_str(fmt, strlen(fmt), false);",
          "content_same": false
        },
        {
          "line": 269,
          "old_api": null,
          "new_api": "MP_DEFINE_EXCEPTION",
          "old_text": null,
          "new_text": "MP_DEFINE_EXCEPTION(RuntimeError, Exception)",
          "old_line_content": "  //MP_DEFINE_EXCEPTION(SystemError, Exception)",
          "new_line_content": "  MP_DEFINE_EXCEPTION(RuntimeError, Exception)",
          "content_same": false
        },
        {
          "line": 397,
          "old_api": null,
          "new_api": "vstr_init",
          "old_text": null,
          "new_text": "vstr_init(&vstr, 16)",
          "old_line_content": "}",
          "new_line_content": "                vstr_init(&vstr, 16);",
          "content_same": false
        },
        {
          "line": 271,
          "old_api": null,
          "new_api": "MP_DEFINE_EXCEPTION",
          "old_text": null,
          "new_text": "MP_DEFINE_EXCEPTION(NotImplementedError, RuntimeError)",
          "old_line_content": "#if MICROPY_EMIT_NATIVE",
          "new_line_content": "    MP_DEFINE_EXCEPTION(NotImplementedError, RuntimeError)",
          "content_same": false
        },
        {
          "line": 398,
          "old_api": null,
          "new_api": "va_start",
          "old_text": null,
          "new_text": "va_start(ap, fmt)",
          "old_line_content": "",
          "new_line_content": "                va_start(ap, fmt);",
          "content_same": false
        },
        {
          "line": 399,
          "old_api": null,
          "new_api": "vstr_vprintf",
          "old_text": null,
          "new_text": "vstr_vprintf(&vstr, fmt, ap)",
          "old_line_content": "// return true if the given object is an exception type",
          "new_line_content": "                vstr_vprintf(&vstr, fmt, ap);",
          "content_same": false
        },
        {
          "line": 274,
          "old_api": null,
          "new_api": "MP_DEFINE_EXCEPTION",
          "old_text": null,
          "new_text": "MP_DEFINE_EXCEPTION(IndentationError, SyntaxError)",
          "old_line_content": "#endif",
          "new_line_content": "    MP_DEFINE_EXCEPTION(IndentationError, SyntaxError)",
          "content_same": false
        },
        {
          "line": 400,
          "old_api": null,
          "new_api": "va_end",
          "old_text": null,
          "new_text": "va_end(ap)",
          "old_line_content": "bool mp_obj_is_exception_type(mp_obj_t self_in) {",
          "new_line_content": "                va_end(ap);",
          "content_same": false
        },
        {
          "line": 406,
          "old_api": null,
          "new_api": "MP_OBJ_FROM_PTR",
          "old_text": null,
          "new_text": "MP_OBJ_FROM_PTR(o)",
          "old_line_content": "        }",
          "new_line_content": "    return MP_OBJ_FROM_PTR(o);",
          "content_same": false
        },
        {
          "line": 280,
          "old_api": null,
          "new_api": "MP_DEFINE_EXCEPTION",
          "old_text": null,
          "new_text": "MP_DEFINE_EXCEPTION(TypeError, Exception)",
          "old_line_content": "#endif",
          "new_line_content": "  MP_DEFINE_EXCEPTION(TypeError, Exception)",
          "content_same": false
        },
        {
          "line": 282,
          "old_api": null,
          "new_api": "MP_DEFINE_EXCEPTION_BASE",
          "old_text": null,
          "new_text": "MP_DEFINE_EXCEPTION_BASE(TypeError)",
          "old_line_content": "  MP_DEFINE_EXCEPTION(Warning, Exception)",
          "new_line_content": "    MP_DEFINE_EXCEPTION_BASE(TypeError)",
          "content_same": false
        },
        {
          "line": 155,
          "old_api": null,
          "new_api": "MP_OBJ_TO_PTR",
          "old_text": null,
          "new_text": "MP_OBJ_TO_PTR(self_in)",
          "old_line_content": "    if (dest[0] != MP_OBJ_NULL) {",
          "new_line_content": "    mp_obj_exception_t *self = MP_OBJ_TO_PTR(self_in);",
          "content_same": false
        },
        {
          "line": 283,
          "old_api": null,
          "new_api": "MP_DEFINE_EXCEPTION",
          "old_text": null,
          "new_text": "MP_DEFINE_EXCEPTION(ViperTypeError, TypeError)",
          "old_line_content": "    MP_DEFINE_EXCEPTION_BASE(Warning)",
          "new_line_content": "    MP_DEFINE_EXCEPTION(ViperTypeError, TypeError)",
          "content_same": false
        },
        {
          "line": 285,
          "old_api": null,
          "new_api": "MP_DEFINE_EXCEPTION",
          "old_text": null,
          "new_text": "MP_DEFINE_EXCEPTION(ValueError, Exception)",
          "old_line_content": "    MP_DEFINE_EXCEPTION(PendingDeprecationWarning, Warning)",
          "new_line_content": "  MP_DEFINE_EXCEPTION(ValueError, Exception)",
          "content_same": false
        },
        {
          "line": 411,
          "old_api": null,
          "new_api": "MP_OBJ_IS_TYPE",
          "old_text": null,
          "new_text": "MP_OBJ_IS_TYPE(self_in, &mp_type_type)",
          "old_line_content": "// return true if the given object is an instance of an exception type",
          "new_line_content": "    if (MP_OBJ_IS_TYPE(self_in, &mp_type_type)) {",
          "content_same": false
        },
        {
          "line": 287,
          "old_api": null,
          "new_api": "MP_DEFINE_EXCEPTION_BASE",
          "old_text": null,
          "new_text": "MP_DEFINE_EXCEPTION_BASE(ValueError)",
          "old_line_content": "    MP_DEFINE_EXCEPTION(SyntaxWarning, Warning)",
          "new_line_content": "    MP_DEFINE_EXCEPTION_BASE(ValueError)",
          "content_same": false
        },
        {
          "line": 288,
          "old_api": null,
          "new_api": "MP_DEFINE_EXCEPTION",
          "old_text": null,
          "new_text": "MP_DEFINE_EXCEPTION(UnicodeError, ValueError)",
          "old_line_content": "    MP_DEFINE_EXCEPTION(UserWarning, Warning)",
          "new_line_content": "    MP_DEFINE_EXCEPTION(UnicodeError, ValueError)",
          "content_same": false
        },
        {
          "line": 418,
          "old_api": null,
          "new_api": "MP_OBJ_FROM_PTR",
          "old_text": null,
          "new_text": "MP_OBJ_FROM_PTR(&mp_type_BaseException)",
          "old_line_content": "// defined by mp_obj_is_exception_type(exc_type).",
          "new_line_content": "    return mp_obj_is_subclass_fast(self_in, MP_OBJ_FROM_PTR(&mp_type_BaseException));",
          "content_same": false
        },
        {
          "line": 423,
          "old_api": null,
          "new_api": "mp_obj_get_type",
          "old_text": null,
          "new_text": "mp_obj_get_type(self_in)",
          "old_line_content": "    }",
          "new_line_content": "    return mp_obj_is_exception_type(MP_OBJ_FROM_PTR(mp_obj_get_type(self_in)));",
          "content_same": false
        },
        {
          "line": 171,
          "old_api": null,
          "new_api": "MP_OBJ_FROM_PTR",
          "old_text": null,
          "new_text": "MP_OBJ_FROM_PTR(self->args)",
          "old_line_content": "    return mp_const_none;",
          "new_line_content": "        dest[0] = MP_OBJ_FROM_PTR(self->args);",
          "content_same": false
        },
        {
          "line": 173,
          "old_api": null,
          "new_api": "mp_obj_exception_get_value",
          "old_text": null,
          "new_text": "mp_obj_exception_get_value(self_in)",
          "old_line_content": "STATIC MP_DEFINE_CONST_FUN_OBJ_VAR_BETWEEN(exc___init___obj, 1, MP_OBJ_FUN_ARGS_MAX, exc___init__);",
          "new_line_content": "        dest[0] = mp_obj_exception_get_value(self_in);",
          "content_same": false
        },
        {
          "line": 431,
          "old_api": null,
          "new_api": "mp_obj_is_exception_instance",
          "old_text": null,
          "new_text": "mp_obj_is_exception_instance(exc)",
          "old_line_content": "    assert(mp_obj_is_exception_instance(self_in)); \\",
          "new_line_content": "    if (mp_obj_is_exception_instance(exc)) {",
          "content_same": false
        },
        {
          "line": 432,
          "old_api": null,
          "new_api": "mp_obj_get_type",
          "old_text": null,
          "new_text": "mp_obj_get_type(exc)",
          "old_line_content": "    mp_obj_exception_t *self; \\",
          "new_line_content": "        exc = MP_OBJ_FROM_PTR(mp_obj_get_type(exc));",
          "content_same": false
        },
        {
          "line": 178,
          "old_api": null,
          "new_api": "MP_OBJ_TO_PTR",
          "old_text": null,
          "new_text": "MP_OBJ_TO_PTR(args[0])",
          "old_line_content": "",
          "new_line_content": "    mp_obj_exception_t *self = MP_OBJ_TO_PTR(args[0]);",
          "content_same": false
        },
        {
          "line": 179,
          "old_api": null,
          "new_api": "mp_obj_new_tuple",
          "old_text": null,
          "new_text": "mp_obj_new_tuple(n_args - 1, args + 1)",
          "old_line_content": "STATIC MP_DEFINE_CONST_DICT(exc_locals_dict, exc_locals_dict_table);",
          "new_line_content": "    mp_obj_t argst = mp_obj_new_tuple(n_args - 1, args + 1);",
          "content_same": false
        },
        {
          "line": 180,
          "old_api": null,
          "new_api": "MP_OBJ_TO_PTR",
          "old_text": null,
          "new_text": "MP_OBJ_TO_PTR(argst)",
          "old_line_content": "",
          "new_line_content": "    self->args = MP_OBJ_TO_PTR(argst);",
          "content_same": false
        },
        {
          "line": 434,
          "old_api": null,
          "new_api": "mp_obj_is_subclass_fast",
          "old_text": null,
          "new_text": "mp_obj_is_subclass_fast(exc, exc_type)",
          "old_line_content": "        self = MP_OBJ_TO_PTR(self_in); \\",
          "new_line_content": "    return mp_obj_is_subclass_fast(exc, exc_type);",
          "content_same": false
        },
        {
          "line": 312,
          "old_api": null,
          "new_api": "mp_obj_new_exception_args",
          "old_text": null,
          "new_text": "mp_obj_new_exception_args(exc_type, 1, &arg)",
          "old_line_content": "}",
          "new_line_content": "    return mp_obj_new_exception_args(exc_type, 1, &arg);",
          "content_same": false
        },
        {
          "line": 186,
          "old_api": null,
          "new_api": "MP_ROM_PTR",
          "old_text": null,
          "new_text": "MP_ROM_PTR(&exc___init___obj)",
          "old_line_content": "    .attr = exception_attr,",
          "new_line_content": "    { MP_ROM_QSTR(MP_QSTR___init__), MP_ROM_PTR(&exc___init___obj) },",
          "content_same": false
        },
        {
          "line": 317,
          "old_api": null,
          "new_api": "make_new",
          "old_text": null,
          "new_text": "exc_type->make_new(exc_type, n_args, 0, args)",
          "old_line_content": "",
          "new_line_content": "    return exc_type->make_new(exc_type, n_args, 0, args);",
          "content_same": false
        },
        {
          "line": 321,
          "old_api": null,
          "new_api": "mp_obj_new_exception_msg_varg",
          "old_text": null,
          "new_text": "mp_obj_new_exception_msg_varg(exc_type, msg)",
          "old_line_content": "        // Couldn't allocate heap memory; use local data instead.",
          "new_line_content": "    return mp_obj_new_exception_msg_varg(exc_type, msg);",
          "content_same": false
        },
        {
          "line": 450,
          "old_api": null,
          "new_api": "GET_NATIVE_EXCEPTION",
          "old_text": null,
          "new_text": "GET_NATIVE_EXCEPTION(self, self_in)",
          "old_line_content": "    // if memory allocation fails (eg because gc is locked), just return",
          "new_line_content": "    GET_NATIVE_EXCEPTION(self, self_in);",
          "content_same": false
        },
        {
          "line": 326,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(exc_type->make_new == mp_obj_exception_make_new)",
          "old_line_content": "        o->args = (mp_obj_tuple_t*)&mp_const_empty_tuple_obj;",
          "new_line_content": "    assert(exc_type->make_new == mp_obj_exception_make_new);",
          "content_same": false
        },
        {
          "line": 329,
          "old_api": null,
          "new_api": "m_new_obj_var_maybe",
          "old_text": null,
          "new_text": "m_new_obj_var_maybe(mp_obj_exception_t, mp_obj_t, 0)",
          "old_line_content": "        // If the user has provided a buffer, then we try to create a tuple",
          "new_line_content": "    mp_obj_exception_t *o = m_new_obj_var_maybe(mp_obj_exception_t, mp_obj_t, 0);",
          "content_same": false
        },
        {
          "line": 457,
          "old_api": null,
          "new_api": "GET_NATIVE_EXCEPTION",
          "old_text": null,
          "new_text": "GET_NATIVE_EXCEPTION(self, self_in)",
          "old_line_content": "        self->traceback_alloc = 3;",
          "new_line_content": "    GET_NATIVE_EXCEPTION(self, self_in);",
          "content_same": false
        },
        {
          "line": 463,
          "old_api": null,
          "new_api": "m_new_maybe",
          "old_text": null,
          "new_text": "m_new_maybe(size_t, 3)",
          "old_line_content": "            return;",
          "new_line_content": "        self->traceback_data = m_new_maybe(size_t, 3);",
          "content_same": false
        },
        {
          "line": 343,
          "old_api": null,
          "new_api": "MP_STATE_VM",
          "old_text": null,
          "new_text": "MP_STATE_VM(mp_emergency_exception_buf)",
          "old_line_content": "",
          "new_line_content": "            mp_obj_tuple_t *tuple = (mp_obj_tuple_t *)MP_STATE_VM(mp_emergency_exception_buf);",
          "content_same": false
        },
        {
          "line": 471,
          "old_api": null,
          "new_api": "m_renew_maybe",
          "old_text": null,
          "new_text": "m_renew_maybe(size_t, self->traceback_data, self->traceback_alloc, self->traceback_alloc + 3, true)",
          "old_line_content": "    tb_data[0] = file;",
          "new_line_content": "        size_t *tb_data = m_renew_maybe(size_t, self->traceback_data, self->traceback_alloc, self->traceback_alloc + 3, true);",
          "content_same": false
        },
        {
          "line": 217,
          "old_api": null,
          "new_api": "MP_DEFINE_EXCEPTION",
          "old_text": null,
          "new_text": "MP_DEFINE_EXCEPTION(KeyboardInterrupt, BaseException)",
          "old_line_content": "    //MP_DEFINE_EXCEPTION(FloatingPointError, ArithmeticError)",
          "new_line_content": "MP_DEFINE_EXCEPTION(KeyboardInterrupt, BaseException)",
          "content_same": false
        },
        {
          "line": 222,
          "old_api": null,
          "new_api": "MP_DEFINE_EXCEPTION",
          "old_text": null,
          "new_text": "MP_DEFINE_EXCEPTION(StopAsyncIteration, Exception)",
          "old_line_content": "  //MP_DEFINE_EXCEPTION(BufferError, Exception)",
          "new_line_content": "  MP_DEFINE_EXCEPTION(StopAsyncIteration, Exception)",
          "content_same": false
        },
        {
          "line": 351,
          "old_api": null,
          "new_api": "MP_STATE_VM",
          "old_text": null,
          "new_text": "MP_STATE_VM(mp_emergency_exception_buf)",
          "old_line_content": "",
          "new_line_content": "            uint max_len = MP_STATE_VM(mp_emergency_exception_buf) + mp_emergency_exception_buf_size",
          "content_same": false
        },
        {
          "line": 375,
          "old_api": null,
          "new_api": "MP_STATE_VM",
          "old_text": null,
          "new_text": "MP_STATE_VM(mp_emergency_exception_buf)",
          "old_line_content": "",
          "new_line_content": "                o->traceback_data = (size_t*)((byte *)MP_STATE_VM(mp_emergency_exception_buf) + offset);",
          "content_same": false
        },
        {
          "line": 226,
          "old_api": null,
          "new_api": "MP_DEFINE_EXCEPTION_BASE",
          "old_text": null,
          "new_text": "MP_DEFINE_EXCEPTION_BASE(ArithmeticError)",
          "old_line_content": "  //MP_DEFINE_EXCEPTION(IOError, Exception) use OSError instead",
          "new_line_content": "    MP_DEFINE_EXCEPTION_BASE(ArithmeticError)",
          "content_same": false
        },
        {
          "line": 355,
          "old_api": null,
          "new_api": "vstr_init_fixed_buf",
          "old_text": null,
          "new_text": "vstr_init_fixed_buf(&vstr, max_len, (char *)str_data)",
          "old_line_content": "            str->data = str_data;",
          "new_line_content": "            vstr_init_fixed_buf(&vstr, max_len, (char *)str_data);",
          "content_same": false
        },
        {
          "line": 358,
          "old_api": null,
          "new_api": "va_start",
          "old_text": null,
          "new_text": "va_start(ap, fmt)",
          "old_line_content": "",
          "new_line_content": "            va_start(ap, fmt);",
          "content_same": false
        },
        {
          "line": 487,
          "old_api": null,
          "new_api": "GET_NATIVE_EXCEPTION",
          "old_text": null,
          "new_text": "GET_NATIVE_EXCEPTION(self, self_in)",
          "old_line_content": "",
          "new_line_content": "    GET_NATIVE_EXCEPTION(self, self_in);",
          "content_same": false
        },
        {
          "line": 360,
          "old_api": null,
          "new_api": "va_end",
          "old_text": null,
          "new_text": "va_end(ap)",
          "old_line_content": "            offset += sizeof(void *) - 1;",
          "new_line_content": "            va_end(ap);",
          "content_same": false
        },
        {
          "line": 234,
          "old_api": null,
          "new_api": "MP_DEFINE_EXCEPTION",
          "old_text": null,
          "new_text": "MP_DEFINE_EXCEPTION(EOFError, Exception)",
          "old_line_content": "    MP_DEFINE_EXCEPTION_BASE(NameError)",
          "new_line_content": "  MP_DEFINE_EXCEPTION(EOFError, Exception)",
          "content_same": false
        },
        {
          "line": 235,
          "old_api": null,
          "new_api": "MP_DEFINE_EXCEPTION",
          "old_text": null,
          "new_text": "MP_DEFINE_EXCEPTION(ImportError, Exception)",
          "old_line_content": "    MP_DEFINE_EXCEPTION(UnboundLocalError, NameError)",
          "new_line_content": "  MP_DEFINE_EXCEPTION(ImportError, Exception)",
          "content_same": false
        },
        {
          "line": 363,
          "old_api": null,
          "new_api": "qstr_compute_hash",
          "old_text": null,
          "new_text": "qstr_compute_hash(str_data, str->len)",
          "old_line_content": "            if ((mp_emergency_exception_buf_size - offset) > (sizeof(o->traceback_data[0]) * 3)) {",
          "new_line_content": "            str->hash = qstr_compute_hash(str_data, str->len);",
          "content_same": false
        },
        {
          "line": 238,
          "old_api": null,
          "new_api": "MP_DEFINE_EXCEPTION_BASE",
          "old_text": null,
          "new_text": "MP_DEFINE_EXCEPTION_BASE(LookupError)",
          "old_line_content": "#if MICROPY_PY_BUILTINS_TIMEOUTERROR",
          "new_line_content": "    MP_DEFINE_EXCEPTION_BASE(LookupError)",
          "content_same": false
        },
        {
          "line": 241,
          "old_api": null,
          "new_api": "MP_DEFINE_EXCEPTION",
          "old_text": null,
          "new_text": "MP_DEFINE_EXCEPTION(MemoryError, Exception)",
          "old_line_content": "#endif",
          "new_line_content": "  MP_DEFINE_EXCEPTION(MemoryError, Exception)",
          "content_same": false
        },
        {
          "line": 242,
          "old_api": null,
          "new_api": "MP_DEFINE_EXCEPTION",
          "old_text": null,
          "new_text": "MP_DEFINE_EXCEPTION(NameError, Exception)",
          "old_line_content": "    /*",
          "new_line_content": "  MP_DEFINE_EXCEPTION(NameError, Exception)",
          "content_same": false
        },
        {
          "line": 369,
          "old_api": null,
          "new_api": "MP_STATE_VM",
          "old_text": null,
          "new_text": "MP_STATE_VM(mp_emergency_exception_buf)",
          "old_line_content": "        }",
          "new_line_content": "            uint offset = &str_data[str->len] - MP_STATE_VM(mp_emergency_exception_buf);",
          "content_same": false
        },
        {
          "line": 247,
          "old_api": null,
          "new_api": "MP_DEFINE_EXCEPTION",
          "old_text": null,
          "new_text": "MP_DEFINE_EXCEPTION(OSError, Exception)",
          "old_line_content": "      MP_DEFINE_EXCEPTION(ConnectionAbortedError, ConnectionError)",
          "new_line_content": "  MP_DEFINE_EXCEPTION(OSError, Exception)",
          "content_same": false
        },
        {
          "line": 376,
          "old_api": null,
          "new_api": "MP_STATE_VM",
          "old_text": null,
          "new_text": "MP_STATE_VM(mp_emergency_exception_buf)",
          "old_line_content": "        if (fmt == NULL) {",
          "new_line_content": "                o->traceback_alloc = (MP_STATE_VM(mp_emergency_exception_buf) + mp_emergency_exception_buf_size - (byte *)o->traceback_data) / sizeof(o->traceback_data[0]);",
          "content_same": false
        },
        {
          "line": 249,
          "old_api": null,
          "new_api": "MP_DEFINE_EXCEPTION_BASE",
          "old_text": null,
          "new_text": "MP_DEFINE_EXCEPTION_BASE(OSError)",
          "old_line_content": "      MP_DEFINE_EXCEPTION(ConnectionResetError, ConnectionError)",
          "new_line_content": "    MP_DEFINE_EXCEPTION_BASE(OSError)",
          "content_same": false
        },
        {
          "line": 250,
          "old_api": null,
          "new_api": "MP_DEFINE_EXCEPTION",
          "old_text": null,
          "new_text": "MP_DEFINE_EXCEPTION(TimeoutError, OSError)",
          "old_line_content": "    MP_DEFINE_EXCEPTION(InterruptedError, OSError)",
          "new_line_content": "    MP_DEFINE_EXCEPTION(TimeoutError, OSError)",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 259,
          "old_api": "MP_DEFINE_EXCEPTION",
          "new_api": null,
          "old_text": "MP_DEFINE_EXCEPTION(RuntimeError, Exception)",
          "new_text": null,
          "old_line_content": "  MP_DEFINE_EXCEPTION(RuntimeError, Exception)",
          "new_line_content": "      MP_DEFINE_EXCEPTION(ConnectionResetError, ConnectionError)",
          "content_same": false
        },
        {
          "line": 260,
          "old_api": "MP_DEFINE_EXCEPTION_BASE",
          "new_api": null,
          "old_text": "MP_DEFINE_EXCEPTION_BASE(RuntimeError)",
          "new_text": null,
          "old_line_content": "    MP_DEFINE_EXCEPTION_BASE(RuntimeError)",
          "new_line_content": "    MP_DEFINE_EXCEPTION(InterruptedError, OSError)",
          "content_same": false
        },
        {
          "line": 261,
          "old_api": "MP_DEFINE_EXCEPTION",
          "new_api": null,
          "old_text": "MP_DEFINE_EXCEPTION(NotImplementedError, RuntimeError)",
          "new_text": null,
          "old_line_content": "    MP_DEFINE_EXCEPTION(NotImplementedError, RuntimeError)",
          "new_line_content": "    MP_DEFINE_EXCEPTION(IsADirectoryError, OSError)",
          "content_same": false
        },
        {
          "line": 262,
          "old_api": "MP_DEFINE_EXCEPTION",
          "new_api": null,
          "old_text": "MP_DEFINE_EXCEPTION(SyntaxError, Exception)",
          "new_text": null,
          "old_line_content": "  MP_DEFINE_EXCEPTION(SyntaxError, Exception)",
          "new_line_content": "    MP_DEFINE_EXCEPTION(NotADirectoryError, OSError)",
          "content_same": false
        },
        {
          "line": 263,
          "old_api": "MP_DEFINE_EXCEPTION_BASE",
          "new_api": null,
          "old_text": "MP_DEFINE_EXCEPTION_BASE(SyntaxError)",
          "new_text": null,
          "old_line_content": "    MP_DEFINE_EXCEPTION_BASE(SyntaxError)",
          "new_line_content": "    MP_DEFINE_EXCEPTION(PermissionError, OSError)",
          "content_same": false
        },
        {
          "line": 264,
          "old_api": "MP_DEFINE_EXCEPTION",
          "new_api": null,
          "old_text": "MP_DEFINE_EXCEPTION(IndentationError, SyntaxError)",
          "new_text": null,
          "old_line_content": "    MP_DEFINE_EXCEPTION(IndentationError, SyntaxError)",
          "new_line_content": "    MP_DEFINE_EXCEPTION(ProcessLookupError, OSError)",
          "content_same": false
        },
        {
          "line": 387,
          "old_api": "vstr_init",
          "new_api": null,
          "old_text": "vstr_init(&vstr, 16)",
          "new_text": null,
          "old_line_content": "                vstr_init(&vstr, 16);",
          "new_line_content": "            // no message",
          "content_same": false
        },
        {
          "line": 389,
          "old_api": "vstr_vprintf",
          "new_api": null,
          "old_text": "vstr_vprintf(&vstr, fmt, ap)",
          "new_text": null,
          "old_line_content": "                vstr_vprintf(&vstr, fmt, ap);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 391,
          "old_api": "mp_obj_new_str_from_vstr",
          "new_api": null,
          "old_text": "mp_obj_new_str_from_vstr(&mp_type_str, &vstr)",
          "new_text": null,
          "old_line_content": "                o->args->items[0] = mp_obj_new_str_from_vstr(&mp_type_str, &vstr);",
          "new_line_content": "                // no formatting substitutions, avoid allocating vstr.",
          "content_same": false
        },
        {
          "line": 396,
          "old_api": "MP_OBJ_FROM_PTR",
          "new_api": null,
          "old_text": "MP_OBJ_FROM_PTR(o)",
          "new_text": null,
          "old_line_content": "    return MP_OBJ_FROM_PTR(o);",
          "new_line_content": "                vstr_t vstr;",
          "content_same": false
        },
        {
          "line": 461,
          "old_api": "m_renew_maybe",
          "new_api": null,
          "old_text": "m_renew_maybe(size_t, self->traceback_data, self->traceback_alloc, self->traceback_alloc + 3, true)",
          "new_text": null,
          "old_line_content": "        size_t *tb_data = m_renew_maybe(size_t, self->traceback_data, self->traceback_alloc, self->traceback_alloc + 3, true);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 275,
          "old_api": "MP_DEFINE_EXCEPTION",
          "new_api": null,
          "old_text": "MP_DEFINE_EXCEPTION(ValueError, Exception)",
          "new_text": null,
          "old_line_content": "  MP_DEFINE_EXCEPTION(ValueError, Exception)",
          "new_line_content": "    /*",
          "content_same": false
        },
        {
          "line": 403,
          "old_api": "MP_OBJ_TO_PTR",
          "new_api": null,
          "old_text": "MP_OBJ_TO_PTR(self_in)",
          "new_text": null,
          "old_line_content": "        mp_obj_type_t *self = MP_OBJ_TO_PTR(self_in);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 277,
          "old_api": "MP_DEFINE_EXCEPTION_BASE",
          "new_api": null,
          "old_text": "MP_DEFINE_EXCEPTION_BASE(ValueError)",
          "new_text": null,
          "old_line_content": "    MP_DEFINE_EXCEPTION_BASE(ValueError)",
          "new_line_content": "      MP_DEFINE_EXCEPTION(TabError, IndentationError)",
          "content_same": false
        },
        {
          "line": 278,
          "old_api": "MP_DEFINE_EXCEPTION",
          "new_api": null,
          "old_text": "MP_DEFINE_EXCEPTION(UnicodeError, ValueError)",
          "new_text": null,
          "old_line_content": "    MP_DEFINE_EXCEPTION(UnicodeError, ValueError)",
          "new_line_content": "      */",
          "content_same": false
        },
        {
          "line": 408,
          "old_api": "MP_OBJ_FROM_PTR",
          "new_api": null,
          "old_text": "MP_OBJ_FROM_PTR(&mp_type_BaseException)",
          "new_text": null,
          "old_line_content": "    return mp_obj_is_subclass_fast(self_in, MP_OBJ_FROM_PTR(&mp_type_BaseException));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 159,
          "old_api": "MP_OBJ_TO_PTR",
          "new_api": null,
          "old_text": "MP_OBJ_TO_PTR(self_in)",
          "new_text": null,
          "old_line_content": "    mp_obj_exception_t *self = MP_OBJ_TO_PTR(self_in);",
          "new_line_content": "            // We allow 'exc.__traceback__ = None' assignment as low-level",
          "content_same": false
        },
        {
          "line": 161,
          "old_api": "MP_OBJ_FROM_PTR",
          "new_api": null,
          "old_text": "MP_OBJ_FROM_PTR(self->args)",
          "new_text": null,
          "old_line_content": "        dest[0] = MP_OBJ_FROM_PTR(self->args);",
          "new_line_content": "            // it repeatedly - this avoids memory allocation during raise.",
          "content_same": false
        },
        {
          "line": 163,
          "old_api": "mp_obj_exception_get_value",
          "new_api": null,
          "old_text": "mp_obj_exception_get_value(self_in)",
          "new_text": null,
          "old_line_content": "        dest[0] = mp_obj_exception_get_value(self_in);",
          "new_line_content": "            // exception instance, so before throwing it, traceback should",
          "content_same": false
        },
        {
          "line": 421,
          "old_api": "mp_obj_is_exception_instance",
          "new_api": null,
          "old_text": "mp_obj_is_exception_instance(exc)",
          "new_text": null,
          "old_line_content": "    if (mp_obj_is_exception_instance(exc)) {",
          "new_line_content": "// return true if the given object is an instance of an exception type",
          "content_same": false
        },
        {
          "line": 422,
          "old_api": "mp_obj_get_type",
          "new_api": null,
          "old_text": "mp_obj_get_type(exc)",
          "new_text": null,
          "old_line_content": "        exc = MP_OBJ_FROM_PTR(mp_obj_get_type(exc));",
          "new_line_content": "bool mp_obj_is_exception_instance(mp_obj_t self_in) {",
          "content_same": false
        },
        {
          "line": 168,
          "old_api": "MP_OBJ_TO_PTR",
          "new_api": null,
          "old_text": "MP_OBJ_TO_PTR(args[0])",
          "new_text": null,
          "old_line_content": "    mp_obj_exception_t *self = MP_OBJ_TO_PTR(args[0]);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 169,
          "old_api": "mp_obj_new_tuple",
          "new_api": null,
          "old_text": "mp_obj_new_tuple(n_args - 1, args + 1)",
          "new_text": null,
          "old_line_content": "    mp_obj_t argst = mp_obj_new_tuple(n_args - 1, args + 1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 170,
          "old_api": "MP_OBJ_TO_PTR",
          "new_api": null,
          "old_text": "MP_OBJ_TO_PTR(argst)",
          "new_text": null,
          "old_line_content": "    self->args = MP_OBJ_TO_PTR(argst);",
          "new_line_content": "    if (attr == MP_QSTR_args) {",
          "content_same": false
        },
        {
          "line": 297,
          "old_api": "mp_obj_new_exception_args",
          "new_api": null,
          "old_text": "mp_obj_new_exception_args(exc_type, 0, NULL)",
          "new_text": null,
          "old_line_content": "    return mp_obj_new_exception_args(exc_type, 0, NULL);",
          "new_line_content": "    MP_DEFINE_EXCEPTION(SyntaxWarning, Warning)",
          "content_same": false
        },
        {
          "line": 424,
          "old_api": "mp_obj_is_subclass_fast",
          "new_api": null,
          "old_text": "mp_obj_is_subclass_fast(exc, exc_type)",
          "new_text": null,
          "old_line_content": "    return mp_obj_is_subclass_fast(exc, exc_type);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 302,
          "old_api": "mp_obj_new_exception_args",
          "new_api": null,
          "old_text": "mp_obj_new_exception_args(exc_type, 1, &arg)",
          "new_text": null,
          "old_line_content": "    return mp_obj_new_exception_args(exc_type, 1, &arg);",
          "new_line_content": "    MP_DEFINE_EXCEPTION(BytesWarning, Warning)",
          "content_same": false
        },
        {
          "line": 176,
          "old_api": "MP_ROM_PTR",
          "new_api": null,
          "old_text": "MP_ROM_PTR(&exc___init___obj)",
          "new_text": null,
          "old_line_content": "    { MP_ROM_QSTR(MP_QSTR___init__), MP_ROM_PTR(&exc___init___obj) },",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 306,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(exc_type->make_new == mp_obj_exception_make_new)",
          "new_text": null,
          "old_line_content": "    assert(exc_type->make_new == mp_obj_exception_make_new);",
          "new_line_content": "mp_obj_t mp_obj_new_exception(const mp_obj_type_t *exc_type) {",
          "content_same": false
        },
        {
          "line": 311,
          "old_api": "mp_obj_new_exception_msg_varg",
          "new_api": null,
          "old_text": "mp_obj_new_exception_msg_varg(exc_type, msg)",
          "new_text": null,
          "old_line_content": "    return mp_obj_new_exception_msg_varg(exc_type, msg);",
          "new_line_content": "mp_obj_t mp_obj_new_exception_arg1(const mp_obj_type_t *exc_type, mp_obj_t arg) {",
          "content_same": false
        },
        {
          "line": 440,
          "old_api": "GET_NATIVE_EXCEPTION",
          "new_api": null,
          "old_text": "GET_NATIVE_EXCEPTION(self, self_in)",
          "new_text": null,
          "old_line_content": "    GET_NATIVE_EXCEPTION(self, self_in);",
          "new_line_content": "    /* make sure self_in is an exception instance */ \\",
          "content_same": false
        },
        {
          "line": 319,
          "old_api": "m_new_obj_var_maybe",
          "new_api": null,
          "old_text": "m_new_obj_var_maybe(mp_obj_exception_t, mp_obj_t, 0)",
          "new_text": null,
          "old_line_content": "    mp_obj_exception_t *o = m_new_obj_var_maybe(mp_obj_exception_t, mp_obj_t, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 447,
          "old_api": "GET_NATIVE_EXCEPTION",
          "new_api": null,
          "old_text": "GET_NATIVE_EXCEPTION(self, self_in)",
          "new_text": null,
          "old_line_content": "    GET_NATIVE_EXCEPTION(self, self_in);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 323,
          "old_api": "MP_STATE_VM",
          "new_api": null,
          "old_text": "MP_STATE_VM(mp_emergency_exception_obj)",
          "new_text": null,
          "old_line_content": "        o = &MP_STATE_VM(mp_emergency_exception_obj);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 453,
          "old_api": "m_new_maybe",
          "new_api": null,
          "old_text": "m_new_maybe(size_t, 3)",
          "new_text": null,
          "old_line_content": "        self->traceback_data = m_new_maybe(size_t, 3);",
          "new_line_content": "    self->traceback_data = NULL;",
          "content_same": false
        },
        {
          "line": 205,
          "old_api": "MP_DEFINE_EXCEPTION_BASE",
          "new_api": null,
          "old_text": "MP_DEFINE_EXCEPTION_BASE(BaseException)",
          "new_text": null,
          "old_line_content": "MP_DEFINE_EXCEPTION_BASE(BaseException)",
          "new_line_content": "    { &mp_type_type }, \\",
          "content_same": false
        },
        {
          "line": 206,
          "old_api": "MP_DEFINE_EXCEPTION",
          "new_api": null,
          "old_text": "MP_DEFINE_EXCEPTION(SystemExit, BaseException)",
          "new_text": null,
          "old_line_content": "MP_DEFINE_EXCEPTION(SystemExit, BaseException)",
          "new_line_content": "    .name = MP_QSTR_ ## exc_name, \\",
          "content_same": false
        },
        {
          "line": 207,
          "old_api": "MP_DEFINE_EXCEPTION",
          "new_api": null,
          "old_text": "MP_DEFINE_EXCEPTION(KeyboardInterrupt, BaseException)",
          "new_text": null,
          "old_line_content": "MP_DEFINE_EXCEPTION(KeyboardInterrupt, BaseException)",
          "new_line_content": "    .print = mp_obj_exception_print, \\",
          "content_same": false
        },
        {
          "line": 208,
          "old_api": "MP_DEFINE_EXCEPTION",
          "new_api": null,
          "old_text": "MP_DEFINE_EXCEPTION(GeneratorExit, BaseException)",
          "new_text": null,
          "old_line_content": "MP_DEFINE_EXCEPTION(GeneratorExit, BaseException)",
          "new_line_content": "    .make_new = mp_obj_exception_make_new, \\",
          "content_same": false
        },
        {
          "line": 209,
          "old_api": "MP_DEFINE_EXCEPTION",
          "new_api": null,
          "old_text": "MP_DEFINE_EXCEPTION(Exception, BaseException)",
          "new_text": null,
          "old_line_content": "MP_DEFINE_EXCEPTION(Exception, BaseException)",
          "new_line_content": "    .attr = exception_attr, \\",
          "content_same": false
        },
        {
          "line": 210,
          "old_api": "MP_DEFINE_EXCEPTION_BASE",
          "new_api": null,
          "old_text": "MP_DEFINE_EXCEPTION_BASE(Exception)",
          "new_text": null,
          "old_line_content": "  MP_DEFINE_EXCEPTION_BASE(Exception)",
          "new_line_content": "    .bases_tuple = (mp_obj_tuple_t*)(mp_rom_obj_tuple_t*)&mp_type_ ## base_name ## _base_tuple, \\",
          "content_same": false
        },
        {
          "line": 338,
          "old_api": "MP_OBJ_FROM_PTR",
          "new_api": null,
          "old_text": "MP_OBJ_FROM_PTR(str)",
          "new_text": null,
          "old_line_content": "            tuple->items[0] = MP_OBJ_FROM_PTR(str);",
          "new_line_content": "#if MICROPY_ENABLE_EMERGENCY_EXCEPTION_BUF",
          "content_same": false
        },
        {
          "line": 212,
          "old_api": "MP_DEFINE_EXCEPTION",
          "new_api": null,
          "old_text": "MP_DEFINE_EXCEPTION(StopAsyncIteration, Exception)",
          "new_text": null,
          "old_line_content": "  MP_DEFINE_EXCEPTION(StopAsyncIteration, Exception)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 341,
          "old_api": "MP_STATE_VM",
          "new_api": null,
          "old_text": "MP_STATE_VM(mp_emergency_exception_buf)",
          "new_text": null,
          "old_line_content": "            uint max_len = MP_STATE_VM(mp_emergency_exception_buf) + mp_emergency_exception_buf_size",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 214,
          "old_api": "MP_DEFINE_EXCEPTION",
          "new_api": null,
          "old_text": "MP_DEFINE_EXCEPTION(StopIteration, Exception)",
          "new_text": null,
          "old_line_content": "  MP_DEFINE_EXCEPTION(StopIteration, Exception)",
          "new_line_content": "// http://docs.python.org/3/library/exceptions.html",
          "content_same": false
        },
        {
          "line": 345,
          "old_api": "vstr_init_fixed_buf",
          "new_api": null,
          "old_text": "vstr_init_fixed_buf(&vstr, max_len, (char *)str_data)",
          "new_text": null,
          "old_line_content": "            vstr_init_fixed_buf(&vstr, max_len, (char *)str_data);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 221,
          "old_api": "MP_DEFINE_EXCEPTION",
          "new_api": null,
          "old_text": "MP_DEFINE_EXCEPTION(AttributeError, Exception)",
          "new_text": null,
          "old_line_content": "  MP_DEFINE_EXCEPTION(AttributeError, Exception)",
          "new_line_content": "  #if MICROPY_PY_ASYNC_AWAIT",
          "content_same": false
        },
        {
          "line": 349,
          "old_api": "vstr_vprintf",
          "new_api": null,
          "old_text": "vstr_vprintf(&vstr, fmt, ap)",
          "new_text": null,
          "old_line_content": "            vstr_vprintf(&vstr, fmt, ap);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 350,
          "old_api": "va_end",
          "new_api": null,
          "old_text": "va_end(ap)",
          "new_text": null,
          "old_line_content": "            va_end(ap);",
          "new_line_content": "            byte *str_data = (byte *)&str[1];",
          "content_same": false
        },
        {
          "line": 477,
          "old_api": "GET_NATIVE_EXCEPTION",
          "new_api": null,
          "old_text": "GET_NATIVE_EXCEPTION(self, self_in)",
          "new_text": null,
          "old_line_content": "    GET_NATIVE_EXCEPTION(self, self_in);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 353,
          "old_api": "qstr_compute_hash",
          "new_api": null,
          "old_text": "qstr_compute_hash(str_data, str->len)",
          "new_text": null,
          "old_line_content": "            str->hash = qstr_compute_hash(str_data, str->len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 227,
          "old_api": "MP_DEFINE_EXCEPTION",
          "new_api": null,
          "old_text": "MP_DEFINE_EXCEPTION(LookupError, Exception)",
          "new_text": null,
          "old_line_content": "  MP_DEFINE_EXCEPTION(LookupError, Exception)",
          "new_line_content": "    //MP_DEFINE_EXCEPTION(FloatingPointError, ArithmeticError)",
          "content_same": false
        },
        {
          "line": 232,
          "old_api": "MP_DEFINE_EXCEPTION",
          "new_api": null,
          "old_text": "MP_DEFINE_EXCEPTION(NameError, Exception)",
          "new_text": null,
          "old_line_content": "  MP_DEFINE_EXCEPTION(NameError, Exception)",
          "new_line_content": "  //MP_DEFINE_EXCEPTION(BufferError, Exception)",
          "content_same": false
        },
        {
          "line": 365,
          "old_api": "MP_STATE_VM",
          "new_api": null,
          "old_text": "MP_STATE_VM(mp_emergency_exception_buf)",
          "new_text": null,
          "old_line_content": "                o->traceback_data = (size_t*)((byte *)MP_STATE_VM(mp_emergency_exception_buf) + offset);",
          "new_line_content": "            str->data = str_data;",
          "content_same": false
        },
        {
          "line": 366,
          "old_api": "MP_STATE_VM",
          "new_api": null,
          "old_text": "MP_STATE_VM(mp_emergency_exception_buf)",
          "new_text": null,
          "old_line_content": "                o->traceback_alloc = (MP_STATE_VM(mp_emergency_exception_buf) + mp_emergency_exception_buf_size - (byte *)o->traceback_data) / sizeof(o->traceback_data[0]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 374,
          "old_api": "mp_obj_new_tuple",
          "new_api": null,
          "old_text": "mp_obj_new_tuple(1, NULL)",
          "new_text": null,
          "old_line_content": "        o->args = MP_OBJ_TO_PTR(mp_obj_new_tuple(1, NULL));",
          "new_line_content": "                // We have room to store some traceback.",
          "content_same": false
        },
        {
          "line": 378,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(0)",
          "new_text": null,
          "old_line_content": "            assert(0);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 380,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(fmt, '%')",
          "new_text": null,
          "old_line_content": "            if (strchr(fmt, '%') == NULL) {",
          "new_line_content": "#endif // MICROPY_ENABLE_EMERGENCY_EXCEPTION_BUF",
          "content_same": false
        },
        {
          "line": 382,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(fmt)",
          "new_text": null,
          "old_line_content": "                o->args->items[0] = mp_obj_new_str(fmt, strlen(fmt), false);",
          "new_line_content": "        o->base.type = exc_type;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 15,
      "total_additions": 59,
      "total_deletions": 59,
      "total_api_changes": 133
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 13,
        "api_related_lines": 133,
        "non_api_lines": 9,
        "non_api_line_numbers": [
          160,
          162,
          164,
          165,
          166,
          167,
          156,
          157,
          158
        ]
      }
    },
    "api_calls_before": 119,
    "api_calls_after": 119,
    "diff_info": {
      "added_lines": 12,
      "removed_lines": 2,
      "total_diff_lines": 29
    }
  }
}
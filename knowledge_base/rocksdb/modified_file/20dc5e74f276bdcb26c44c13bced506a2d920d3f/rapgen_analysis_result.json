{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/rocksdb/modified_file/20dc5e74f276bdcb26c44c13bced506a2d920d3f",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/rocksdb/modified_file/20dc5e74f276bdcb26c44c13bced506a2d920d3f/before.cc",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/rocksdb/modified_file/20dc5e74f276bdcb26c44c13bced506a2d920d3f/after.cc",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/rocksdb/modified_file/20dc5e74f276bdcb26c44c13bced506a2d920d3f/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 226,
          "old_api": "PushOperand",
          "new_api": "IsValuePinned",
          "old_text": "merge_context_.PushOperand(\n              value_slice, iter->IsValuePinned() /* operand_pinned */)",
          "new_text": "iter->IsValuePinned()",
          "old_line_content": "          merge_context_.PushOperand(",
          "new_line_content": "              value_slice, iter->IsValuePinned() /* operand_pinned */);",
          "content_same": false
        },
        {
          "line": 236,
          "old_api": "clear",
          "new_api": "Clear",
          "old_text": "keys_.clear()",
          "new_text": "merge_context_.Clear()",
          "old_line_content": "        keys_.clear();",
          "new_line_content": "        merge_context_.Clear();",
          "content_same": false
        },
        {
          "line": 268,
          "old_api": "assert",
          "new_api": "GetNumOperands",
          "old_text": "assert(kTypeMerge == orig_ikey.type)",
          "new_text": "merge_context_.GetNumOperands()",
          "old_line_content": "    assert(kTypeMerge == orig_ikey.type);",
          "new_line_content": "    assert(merge_context_.GetNumOperands() >= 1);",
          "content_same": false
        },
        {
          "line": 269,
          "old_api": "GetNumOperands",
          "new_api": "size",
          "old_text": "merge_context_.GetNumOperands()",
          "new_text": "keys_.size()",
          "old_line_content": "    assert(merge_context_.GetNumOperands() >= 1);",
          "new_line_content": "    assert(merge_context_.GetNumOperands() == keys_.size());",
          "content_same": false
        },
        {
          "line": 281,
          "old_api": "UpdateInternalKey",
          "new_api": "clear",
          "old_text": "UpdateInternalKey(&original_key, orig_ikey.sequence, orig_ikey.type)",
          "new_text": "keys_.clear()",
          "old_line_content": "      UpdateInternalKey(&original_key, orig_ikey.sequence, orig_ikey.type);",
          "new_line_content": "      keys_.clear();",
          "content_same": false
        },
        {
          "line": 282,
          "old_api": "clear",
          "new_api": "Clear",
          "old_text": "keys_.clear()",
          "new_text": "merge_context_.Clear()",
          "old_line_content": "      keys_.clear();",
          "new_line_content": "      merge_context_.Clear();",
          "content_same": false
        },
        {
          "line": 283,
          "old_api": "Clear",
          "new_api": "std::move(original_key)",
          "old_text": "merge_context_.Clear()",
          "new_text": "std::move(original_key)",
          "old_line_content": "      merge_context_.Clear();",
          "new_line_content": "      keys_.emplace_front(std::move(original_key));",
          "content_same": false
        },
        {
          "line": 284,
          "old_api": "std::move(original_key)",
          "new_api": "PushOperand",
          "old_text": "std::move(original_key)",
          "new_text": "merge_context_.PushOperand(merge_result)",
          "old_line_content": "      keys_.emplace_front(std::move(original_key));",
          "new_line_content": "      merge_context_.PushOperand(merge_result);",
          "content_same": false
        },
        {
          "line": 291,
          "old_api": "Status::MergeInProgress()",
          "new_api": "GetNumOperands",
          "old_text": "Status::MergeInProgress()",
          "new_text": "merge_context_.GetNumOperands()",
          "old_line_content": "    s = Status::MergeInProgress();",
          "new_line_content": "    if (merge_context_.GetNumOperands() >= 2) {",
          "content_same": false
        },
        {
          "line": 297,
          "old_api": "PERF_TIMER_GUARD",
          "new_api": "GetOperands",
          "old_text": "PERF_TIMER_GUARD(merge_operator_time_nanos)",
          "new_text": "user_merge_operator_->PartialMergeMulti(\n            orig_ikey.user_key,\n            std::deque<Slice>(merge_context_.GetOperands().begin(),\n                              merge_context_.GetOperands().end()),\n            &merge_result, logger_)",
          "old_line_content": "        PERF_TIMER_GUARD(merge_operator_time_nanos);",
          "new_line_content": "        merge_success = user_merge_operator_->PartialMergeMulti(",
          "content_same": false
        },
        {
          "line": 309,
          "old_api": "Clear",
          "new_api": "PushOperand",
          "old_text": "merge_context_.Clear()",
          "new_text": "merge_context_.PushOperand(merge_result)",
          "old_line_content": "        merge_context_.Clear();",
          "new_line_content": "        merge_context_.PushOperand(merge_result);",
          "content_same": false
        },
        {
          "line": 310,
          "old_api": "PushOperand",
          "new_api": "end",
          "old_text": "merge_context_.PushOperand(merge_result)",
          "new_text": "keys_.end()",
          "old_line_content": "        merge_context_.PushOperand(merge_result);",
          "new_line_content": "        keys_.erase(keys_.begin(), keys_.end() - 1);",
          "content_same": false
        },
        {
          "line": 326,
          "old_api": "keys",
          "new_api": "values",
          "old_text": "merge_helper_->keys()",
          "new_text": "merge_helper_->values()",
          "old_line_content": "  const auto& keys = merge_helper_->keys();",
          "new_line_content": "  const auto& values = merge_helper_->values();",
          "content_same": false
        },
        {
          "line": 327,
          "old_api": "values",
          "new_api": "size",
          "old_text": "merge_helper_->values()",
          "new_text": "values.size()",
          "old_line_content": "  const auto& values = merge_helper_->values();",
          "new_line_content": "  assert(keys.size() == values.size());",
          "content_same": false
        },
        {
          "line": 328,
          "old_api": "size",
          "new_api": "rbegin",
          "old_text": "values.size()",
          "new_text": "keys.rbegin()",
          "old_line_content": "  assert(keys.size() == values.size());",
          "new_line_content": "  it_keys_ = keys.rbegin();",
          "content_same": false
        },
        {
          "line": 346,
          "old_api": "clear",
          "new_api": "Clear",
          "old_text": "compaction_filter_value_.clear()",
          "new_text": "compaction_filter_skip_until_.Clear()",
          "old_line_content": "  compaction_filter_value_.clear();",
          "new_line_content": "  compaction_filter_skip_until_.Clear();",
          "content_same": false
        },
        {
          "line": 347,
          "old_api": "Clear",
          "new_api": "rep",
          "old_text": "compaction_filter_skip_until_.Clear()",
          "new_text": "compaction_filter_->FilterV2(\n      level_, user_key, CompactionFilter::ValueType::kMergeOperand, value_slice,\n      &compaction_filter_value_, compaction_filter_skip_until_.rep())",
          "old_line_content": "  compaction_filter_skip_until_.Clear();",
          "new_line_content": "  auto ret = compaction_filter_->FilterV2(",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 267,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(kTypeMerge == orig_ikey.type)",
          "old_line_content": "    // bye to the merge type (it's now converted to a Put)",
          "new_line_content": "    assert(kTypeMerge == orig_ikey.type);",
          "content_same": false
        },
        {
          "line": 271,
          "old_api": null,
          "new_api": "GetOperands",
          "old_text": null,
          "new_text": "TimedFullMerge(user_merge_operator_, orig_ikey.user_key, nullptr,\n                       merge_context_.GetOperands(), &merge_result, logger_,\n                       stats_, env_)",
          "old_line_content": "    std::string merge_result;",
          "new_line_content": "    s = TimedFullMerge(user_merge_operator_, orig_ikey.user_key, nullptr,",
          "content_same": false
        },
        {
          "line": 274,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "s.ok()",
          "old_line_content": "                       stats_, env_);",
          "new_line_content": "    if (s.ok()) {",
          "content_same": false
        },
        {
          "line": 278,
          "old_api": null,
          "new_api": "back",
          "old_text": null,
          "new_text": "keys_.back()",
          "old_line_content": "      // lines before).",
          "new_line_content": "      original_key = std::move(keys_.back());",
          "content_same": false
        },
        {
          "line": 280,
          "old_api": null,
          "new_api": "UpdateInternalKey",
          "old_text": null,
          "new_text": "UpdateInternalKey(&original_key, orig_ikey.sequence, orig_ikey.type)",
          "old_line_content": "      orig_ikey.type = kTypeValue;",
          "new_line_content": "      UpdateInternalKey(&original_key, orig_ikey.sequence, orig_ikey.type);",
          "content_same": false
        },
        {
          "line": 290,
          "old_api": null,
          "new_api": "Status::MergeInProgress()",
          "old_text": null,
          "new_text": "Status::MergeInProgress()",
          "old_line_content": "    // merge the stacked merge operands into a single operand.",
          "new_line_content": "    s = Status::MergeInProgress();",
          "content_same": false
        },
        {
          "line": 296,
          "old_api": null,
          "new_api": "PERF_TIMER_GUARD",
          "old_text": null,
          "new_text": "PERF_TIMER_GUARD(merge_operator_time_nanos)",
          "old_line_content": "        StopWatchNano timer(env_, stats_ != nullptr);",
          "new_line_content": "        PERF_TIMER_GUARD(merge_operator_time_nanos);",
          "content_same": false
        },
        {
          "line": 299,
          "old_api": null,
          "new_api": "GetOperands",
          "old_text": null,
          "new_text": "merge_context_.GetOperands().begin()",
          "old_line_content": "            orig_ikey.user_key,",
          "new_line_content": "            std::deque<Slice>(merge_context_.GetOperands().begin(),",
          "content_same": false
        },
        {
          "line": 302,
          "old_api": null,
          "new_api": "ElapsedNanosSafe",
          "old_text": null,
          "new_text": "RecordTick(stats_, MERGE_OPERATION_TOTAL_TIME,\n                   stats_ ? timer.ElapsedNanosSafe() : 0)",
          "old_line_content": "            &merge_result, logger_);",
          "new_line_content": "        RecordTick(stats_, MERGE_OPERATION_TOTAL_TIME,",
          "content_same": false
        },
        {
          "line": 308,
          "old_api": null,
          "new_api": "Clear",
          "old_text": null,
          "new_text": "merge_context_.Clear()",
          "old_line_content": "        // Replace operands with the merge result",
          "new_line_content": "        merge_context_.Clear();",
          "content_same": false
        },
        {
          "line": 320,
          "old_api": null,
          "new_api": "rend",
          "old_text": null,
          "new_text": "merge_helper_->keys().rend()",
          "old_line_content": "    : merge_helper_(merge_helper) {",
          "new_line_content": "  it_keys_ = merge_helper_->keys().rend();",
          "content_same": false
        },
        {
          "line": 325,
          "old_api": null,
          "new_api": "keys",
          "old_text": null,
          "new_text": "merge_helper_->keys()",
          "old_line_content": "void MergeOutputIterator::SeekToFirst() {",
          "new_line_content": "  const auto& keys = merge_helper_->keys();",
          "content_same": false
        },
        {
          "line": 215,
          "old_api": null,
          "new_api": "std::move(original_key)",
          "old_text": null,
          "new_text": "std::move(original_key)",
          "old_line_content": "          // this is just an optimization that saves us one memcpy",
          "new_line_content": "          keys_.push_front(std::move(original_key));",
          "content_same": false
        },
        {
          "line": 343,
          "old_api": null,
          "new_api": "Start",
          "old_text": null,
          "new_text": "filter_timer_.Start()",
          "old_line_content": "  if (stats_ != nullptr) {",
          "new_line_content": "    filter_timer_.Start();",
          "content_same": false
        },
        {
          "line": 217,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "iter->key().ToString()",
          "old_line_content": "        } else {",
          "new_line_content": "          keys_.push_front(iter->key().ToString());",
          "content_same": false
        },
        {
          "line": 345,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "compaction_filter_value_.clear()",
          "old_line_content": "  }",
          "new_line_content": "  compaction_filter_value_.clear();",
          "content_same": false
        },
        {
          "line": 219,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "keys_.size()",
          "old_line_content": "        }",
          "new_line_content": "        if (keys_.size() == 1) {",
          "content_same": false
        },
        {
          "line": 349,
          "old_api": null,
          "new_api": "rep",
          "old_text": null,
          "new_text": "compaction_filter_skip_until_.rep()",
          "old_line_content": "      level_, user_key, CompactionFilter::ValueType::kMergeOperand, value_slice,",
          "new_line_content": "      &compaction_filter_value_, compaction_filter_skip_until_.rep());",
          "content_same": false
        },
        {
          "line": 222,
          "old_api": null,
          "new_api": "back",
          "old_text": null,
          "new_text": "keys_.back()",
          "old_line_content": "          // original_key before",
          "new_line_content": "          ParseInternalKey(keys_.back(), &orig_ikey);",
          "content_same": false
        },
        {
          "line": 351,
          "old_api": null,
          "new_api": "rep",
          "old_text": null,
          "new_text": "compaction_filter_skip_until_.rep()",
          "old_line_content": "  if (ret == CompactionFilter::Decision::kRemoveAndSkipUntil) {",
          "new_line_content": "    if (user_comparator_->Compare(*compaction_filter_skip_until_.rep(),",
          "content_same": false
        },
        {
          "line": 225,
          "old_api": null,
          "new_api": "PushOperand",
          "old_text": null,
          "new_text": "merge_context_.PushOperand(\n              value_slice, iter->IsValuePinned() /* operand_pinned */)",
          "old_line_content": "        if (filter == CompactionFilter::Decision::kKeep) {",
          "new_line_content": "          merge_context_.PushOperand(",
          "content_same": false
        },
        {
          "line": 357,
          "old_api": null,
          "new_api": "ConvertFromUserKey",
          "old_text": null,
          "new_text": "compaction_filter_skip_until_.ConvertFromUserKey(kMaxSequenceNumber,\n                                                       kValueTypeForSeek)",
          "old_line_content": "    } else {",
          "new_line_content": "      compaction_filter_skip_until_.ConvertFromUserKey(kMaxSequenceNumber,",
          "content_same": false
        },
        {
          "line": 230,
          "old_api": null,
          "new_api": "PushOperand",
          "old_text": null,
          "new_text": "merge_context_.PushOperand(compaction_filter_value_, false)",
          "old_line_content": "          // to compaction_filter_value_.",
          "new_line_content": "          merge_context_.PushOperand(compaction_filter_value_, false);",
          "content_same": false
        },
        {
          "line": 361,
          "old_api": null,
          "new_api": "ElapsedNanosSafe",
          "old_text": null,
          "new_text": "filter_timer_.ElapsedNanosSafe()",
          "old_line_content": "  }",
          "new_line_content": "  total_filter_time_ += filter_timer_.ElapsedNanosSafe();",
          "content_same": false
        },
        {
          "line": 235,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "keys_.clear()",
          "old_line_content": "        // (not just this operand), along with some keys following it.",
          "new_line_content": "        keys_.clear();",
          "content_same": false
        },
        {
          "line": 238,
          "old_api": null,
          "new_api": "Status::OK()",
          "old_text": null,
          "new_text": "Status::OK()",
          "old_line_content": "        has_compaction_filter_skip_until_ = true;",
          "new_line_content": "        return Status::OK();",
          "content_same": false
        },
        {
          "line": 243,
          "old_api": null,
          "new_api": "GetNumOperands",
          "old_text": null,
          "new_text": "merge_context_.GetNumOperands()",
          "old_line_content": "",
          "new_line_content": "  if (merge_context_.GetNumOperands() == 0) {",
          "content_same": false
        },
        {
          "line": 245,
          "old_api": null,
          "new_api": "Status::OK()",
          "old_text": null,
          "new_text": "Status::OK()",
          "old_line_content": "    // we filtered out all the merge operands",
          "new_line_content": "    return Status::OK();",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 270,
          "old_api": "size",
          "new_api": null,
          "old_text": "keys_.size()",
          "new_text": null,
          "old_line_content": "    assert(merge_context_.GetNumOperands() == keys_.size());",
          "new_line_content": "    std::string merge_result;",
          "content_same": false
        },
        {
          "line": 273,
          "old_api": "GetOperands",
          "new_api": null,
          "old_text": "merge_context_.GetOperands()",
          "new_text": null,
          "old_line_content": "                       merge_context_.GetOperands(), &merge_result, logger_,",
          "new_line_content": "                       stats_, env_);",
          "content_same": false
        },
        {
          "line": 275,
          "old_api": "ok",
          "new_api": null,
          "old_text": "s.ok()",
          "new_text": null,
          "old_line_content": "    if (s.ok()) {",
          "new_line_content": "      // The original key encountered",
          "content_same": false
        },
        {
          "line": 279,
          "old_api": "back",
          "new_api": null,
          "old_text": "keys_.back()",
          "new_text": null,
          "old_line_content": "      original_key = std::move(keys_.back());",
          "new_line_content": "      orig_ikey.type = kTypeValue;",
          "content_same": false
        },
        {
          "line": 285,
          "old_api": "PushOperand",
          "new_api": null,
          "old_text": "merge_context_.PushOperand(merge_result)",
          "new_text": null,
          "old_line_content": "      merge_context_.PushOperand(merge_result);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 292,
          "old_api": "GetNumOperands",
          "new_api": null,
          "old_text": "merge_context_.GetNumOperands()",
          "new_text": null,
          "old_line_content": "    if (merge_context_.GetNumOperands() >= 2) {",
          "new_line_content": "      bool merge_success = false;",
          "content_same": false
        },
        {
          "line": 298,
          "old_api": "GetOperands",
          "new_api": null,
          "old_text": "user_merge_operator_->PartialMergeMulti(\n            orig_ikey.user_key,\n            std::deque<Slice>(merge_context_.GetOperands().begin(),\n                              merge_context_.GetOperands().end()),\n            &merge_result, logger_)",
          "new_text": null,
          "old_line_content": "        merge_success = user_merge_operator_->PartialMergeMulti(",
          "new_line_content": "            orig_ikey.user_key,",
          "content_same": false
        },
        {
          "line": 301,
          "old_api": "GetOperands",
          "new_api": null,
          "old_text": "merge_context_.GetOperands().end()",
          "new_text": null,
          "old_line_content": "                              merge_context_.GetOperands().end()),",
          "new_line_content": "            &merge_result, logger_);",
          "content_same": false
        },
        {
          "line": 304,
          "old_api": "ElapsedNanosSafe",
          "new_api": null,
          "old_text": "timer.ElapsedNanosSafe()",
          "new_text": null,
          "old_line_content": "                   stats_ ? timer.ElapsedNanosSafe() : 0);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 311,
          "old_api": "end",
          "new_api": null,
          "old_text": "keys_.end()",
          "new_text": null,
          "old_line_content": "        keys_.erase(keys_.begin(), keys_.end() - 1);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 322,
          "old_api": "rend",
          "new_api": null,
          "old_text": "merge_helper_->values().rend()",
          "new_text": null,
          "old_line_content": "  it_values_ = merge_helper_->values().rend();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 330,
          "old_api": "rbegin",
          "new_api": null,
          "old_text": "values.rbegin()",
          "new_text": null,
          "old_line_content": "  it_values_ = values.rbegin();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 216,
          "old_api": "std::move(original_key)",
          "new_api": null,
          "old_text": "std::move(original_key)",
          "new_text": null,
          "old_line_content": "          keys_.push_front(std::move(original_key));",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 344,
          "old_api": "Start",
          "new_api": null,
          "old_text": "filter_timer_.Start()",
          "new_text": null,
          "old_line_content": "    filter_timer_.Start();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 218,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "iter->key().ToString()",
          "new_text": null,
          "old_line_content": "          keys_.push_front(iter->key().ToString());",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 220,
          "old_api": "size",
          "new_api": null,
          "old_text": "keys_.size()",
          "new_text": null,
          "old_line_content": "        if (keys_.size() == 1) {",
          "new_line_content": "          // we need to re-anchor the orig_ikey because it was anchored by",
          "content_same": false
        },
        {
          "line": 348,
          "old_api": "rep",
          "new_api": null,
          "old_text": "compaction_filter_->FilterV2(\n      level_, user_key, CompactionFilter::ValueType::kMergeOperand, value_slice,\n      &compaction_filter_value_, compaction_filter_skip_until_.rep())",
          "new_text": null,
          "old_line_content": "  auto ret = compaction_filter_->FilterV2(",
          "new_line_content": "      level_, user_key, CompactionFilter::ValueType::kMergeOperand, value_slice,",
          "content_same": false
        },
        {
          "line": 350,
          "old_api": "rep",
          "new_api": null,
          "old_text": "compaction_filter_skip_until_.rep()",
          "new_text": null,
          "old_line_content": "      &compaction_filter_value_, compaction_filter_skip_until_.rep());",
          "new_line_content": "  if (ret == CompactionFilter::Decision::kRemoveAndSkipUntil) {",
          "content_same": false
        },
        {
          "line": 223,
          "old_api": "back",
          "new_api": null,
          "old_text": "keys_.back()",
          "new_text": null,
          "old_line_content": "          ParseInternalKey(keys_.back(), &orig_ikey);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 352,
          "old_api": "rep",
          "new_api": null,
          "old_text": "compaction_filter_skip_until_.rep()",
          "new_text": null,
          "old_line_content": "    if (user_comparator_->Compare(*compaction_filter_skip_until_.rep(),",
          "new_line_content": "                                  user_key) <= 0) {",
          "content_same": false
        },
        {
          "line": 227,
          "old_api": "IsValuePinned",
          "new_api": null,
          "old_text": "iter->IsValuePinned()",
          "new_text": null,
          "old_line_content": "              value_slice, iter->IsValuePinned() /* operand_pinned */);",
          "new_line_content": "        } else {  // kChangeValue",
          "content_same": false
        },
        {
          "line": 358,
          "old_api": "ConvertFromUserKey",
          "new_api": null,
          "old_text": "compaction_filter_skip_until_.ConvertFromUserKey(kMaxSequenceNumber,\n                                                       kValueTypeForSeek)",
          "new_text": null,
          "old_line_content": "      compaction_filter_skip_until_.ConvertFromUserKey(kMaxSequenceNumber,",
          "new_line_content": "                                                       kValueTypeForSeek);",
          "content_same": false
        },
        {
          "line": 231,
          "old_api": "PushOperand",
          "new_api": null,
          "old_text": "merge_context_.PushOperand(compaction_filter_value_, false)",
          "new_text": null,
          "old_line_content": "          merge_context_.PushOperand(compaction_filter_value_, false);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 362,
          "old_api": "ElapsedNanosSafe",
          "new_api": null,
          "old_text": "filter_timer_.ElapsedNanosSafe()",
          "new_text": null,
          "old_line_content": "  total_filter_time_ += filter_timer_.ElapsedNanosSafe();",
          "new_line_content": "  return ret;",
          "content_same": false
        },
        {
          "line": 237,
          "old_api": "Clear",
          "new_api": null,
          "old_text": "merge_context_.Clear()",
          "new_text": null,
          "old_line_content": "        merge_context_.Clear();",
          "new_line_content": "        has_compaction_filter_skip_until_ = true;",
          "content_same": false
        },
        {
          "line": 239,
          "old_api": "Status::OK()",
          "new_api": null,
          "old_text": "Status::OK()",
          "new_text": null,
          "old_line_content": "        return Status::OK();",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 244,
          "old_api": "GetNumOperands",
          "new_api": null,
          "old_text": "merge_context_.GetNumOperands()",
          "new_text": null,
          "old_line_content": "  if (merge_context_.GetNumOperands() == 0) {",
          "new_line_content": "    // we filtered out all the merge operands",
          "content_same": false
        },
        {
          "line": 246,
          "old_api": "Status::OK()",
          "new_api": null,
          "old_text": "Status::OK()",
          "new_text": null,
          "old_line_content": "    return Status::OK();",
          "new_line_content": "  }",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 17,
      "total_additions": 28,
      "total_deletions": 28,
      "total_api_changes": 73
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 4,
        "api_related_lines": 73,
        "non_api_lines": 4,
        "non_api_line_numbers": [
          208,
          209,
          204,
          205
        ]
      }
    },
    "api_calls_before": 134,
    "api_calls_after": 134,
    "diff_info": {
      "added_lines": 3,
      "removed_lines": 4,
      "total_diff_lines": 21
    }
  }
}
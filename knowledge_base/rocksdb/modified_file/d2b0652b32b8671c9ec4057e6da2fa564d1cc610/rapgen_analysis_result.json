{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/rocksdb/modified_file/d2b0652b32b8671c9ec4057e6da2fa564d1cc610",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/rocksdb/modified_file/d2b0652b32b8671c9ec4057e6da2fa564d1cc610/before.cc",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/rocksdb/modified_file/d2b0652b32b8671c9ec4057e6da2fa564d1cc610/after.cc",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/rocksdb/modified_file/d2b0652b32b8671c9ec4057e6da2fa564d1cc610/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": true,
    "api_changes": {
      "replacements": [
        {
          "line": 4454,
          "old_api": "GetDeletedFiles",
          "new_api": "GetLatestMutableCFOptions",
          "old_text": "edit.GetDeletedFiles().empty()",
          "new_text": "cfd->GetLatestMutableCFOptions()",
          "old_line_content": "    if (edit.GetDeletedFiles().empty()) {",
          "new_line_content": "                                       *cfd->GetLatestMutableCFOptions());",
          "content_same": false
        },
        {
          "line": 4461,
          "old_api": "GetDbDir",
          "new_api": "GetLatestMutableCFOptions",
          "old_text": "directories_.GetDbDir()",
          "new_text": "cfd->GetLatestMutableCFOptions()",
          "old_line_content": "                                    directories_.GetDbDir());",
          "new_line_content": "    status = versions_->LogAndApply(cfd, *cfd->GetLatestMutableCFOptions(),",
          "content_same": false
        },
        {
          "line": 4463,
          "old_api": "GetLatestMutableCFOptions",
          "new_api": "GetDbDir",
          "old_text": "InstallSuperVersionAndScheduleWork(cfd,\n                                         &job_context.superversion_contexts[0],\n                                         *cfd->GetLatestMutableCFOptions())",
          "new_text": "directories_.GetDbDir()",
          "old_line_content": "      InstallSuperVersionAndScheduleWork(cfd,",
          "new_line_content": "                                    directories_.GetDbDir());",
          "content_same": false
        },
        {
          "line": 4476,
          "old_api": "HaveSomethingToDelete",
          "new_api": "LogFlush",
          "old_text": "job_context.HaveSomethingToDelete()",
          "new_text": "LogFlush(immutable_db_options_.info_log)",
          "old_line_content": "  if (job_context.HaveSomethingToDelete()) {",
          "new_line_content": "  LogFlush(immutable_db_options_.info_log);",
          "content_same": false
        },
        {
          "line": 4478,
          "old_api": "PurgeObsoleteFiles",
          "new_api": "HaveSomethingToDelete",
          "old_text": "PurgeObsoleteFiles(job_context)",
          "new_text": "job_context.HaveSomethingToDelete()",
          "old_line_content": "    PurgeObsoleteFiles(job_context);",
          "new_line_content": "  if (job_context.HaveSomethingToDelete()) {",
          "content_same": false
        },
        {
          "line": 4480,
          "old_api": "Clean",
          "new_api": "PurgeObsoleteFiles",
          "old_text": "job_context.Clean()",
          "new_text": "PurgeObsoleteFiles(job_context)",
          "old_line_content": "  job_context.Clean();",
          "new_line_content": "    PurgeObsoleteFiles(job_context);",
          "content_same": false
        },
        {
          "line": 4498,
          "old_api": "cfd",
          "new_api": "assert",
          "old_text": "static_cast_with_check<ColumnFamilyHandleImpl>(column_family)->cfd()",
          "new_text": "assert(column_family)",
          "old_line_content": "      static_cast_with_check<ColumnFamilyHandleImpl>(column_family)->cfd();",
          "new_line_content": "  assert(column_family);",
          "content_same": false
        },
        {
          "line": 4513,
          "old_api": "ReturnAndCleanupSuperVersion",
          "new_api": "GetColumnFamilyMetaData",
          "old_text": "ReturnAndCleanupSuperVersion(cfd, sv)",
          "new_text": "sv->current->GetColumnFamilyMetaData(cf_meta)",
          "old_line_content": "  ReturnAndCleanupSuperVersion(cfd, sv);",
          "new_line_content": "    sv->current->GetColumnFamilyMetaData(cf_meta);",
          "content_same": false
        },
        {
          "line": 4521,
          "old_api": "emplace_back",
          "new_api": "GetColumnFamilySet",
          "old_text": "metadata->emplace_back()",
          "new_text": "versions_->GetColumnFamilySet()",
          "old_line_content": "      metadata->emplace_back();",
          "new_line_content": "  for (auto cfd : *(versions_->GetColumnFamilySet())) {",
          "content_same": false
        },
        {
          "line": 4530,
          "old_api": "GetLiveFilesMetaData",
          "new_api": "AssertHeld",
          "old_text": "versions_->GetLiveFilesMetaData(&metadata)",
          "new_text": "mutex_.AssertHeld()",
          "old_line_content": "  versions_->GetLiveFilesMetaData(&metadata);",
          "new_line_content": "  mutex_.AssertHeld();",
          "content_same": false
        },
        {
          "line": 4548,
          "old_api": "push_back",
          "new_api": "substr",
          "old_text": "files_by_directory[md.db_path].push_back(fname)",
          "new_text": "fname.substr(1)",
          "old_line_content": "      files_by_directory[md.db_path].push_back(fname);",
          "new_line_content": "        fname = fname.substr(1);",
          "content_same": false
        },
        {
          "line": 4558,
          "old_api": "ok",
          "new_api": "GetChildren",
          "old_text": "s.ok()",
          "new_text": "fs_->GetChildren(directory, io_opts, &existing_files,\n                                  /*IODebugContext*=*/nullptr)",
          "old_line_content": "      if (!s.ok()) {",
          "new_line_content": "      Status s = fs_->GetChildren(directory, io_opts, &existing_files,",
          "content_same": false
        },
        {
          "line": 4560,
          "old_api": "ToString",
          "new_api": "ok",
          "old_text": "s.ToString()",
          "new_text": "s.ok()",
          "old_line_content": "            \"Can't list files in \" + directory + \": \" + s.ToString() + \"\\n\";",
          "new_line_content": "      if (!s.ok()) {",
          "content_same": false
        },
        {
          "line": 4583,
          "old_api": "ok",
          "new_api": "TEST_SYNC_POINT",
          "old_text": "s.ok()",
          "new_text": "TEST_SYNC_POINT(\"DBImpl::CheckConsistency:BeforeGetFileSize\")",
          "old_line_content": "      if (!s.ok() &&",
          "new_line_content": "      TEST_SYNC_POINT(\"DBImpl::CheckConsistency:BeforeGetFileSize\");",
          "content_same": false
        },
        {
          "line": 4584,
          "old_api": "Rocks2LevelTableFileName",
          "new_api": "GetFileSize",
          "old_text": "Rocks2LevelTableFileName(file_path)",
          "new_text": "env_->GetFileSize(file_path, &fsize)",
          "old_line_content": "          env_->GetFileSize(Rocks2LevelTableFileName(file_path), &fsize).ok()) {",
          "new_line_content": "      Status s = env_->GetFileSize(file_path, &fsize);",
          "content_same": false
        },
        {
          "line": 4585,
          "old_api": "Status::OK()",
          "new_api": "ok",
          "old_text": "Status::OK()",
          "new_text": "s.ok()",
          "old_line_content": "        s = Status::OK();",
          "new_line_content": "      if (!s.ok() &&",
          "content_same": false
        },
        {
          "line": 4587,
          "old_api": "ok",
          "new_api": "Status::OK()",
          "old_text": "s.ok()",
          "new_text": "Status::OK()",
          "old_line_content": "      if (!s.ok()) {",
          "new_line_content": "        s = Status::OK();",
          "content_same": false
        },
        {
          "line": 4589,
          "old_api": "ToString",
          "new_api": "ok",
          "old_text": "s.ToString()",
          "new_text": "s.ok()",
          "old_line_content": "            \"Can't access \" + md.name + \": \" + s.ToString() + \"\\n\";",
          "new_line_content": "      if (!s.ok()) {",
          "content_same": false
        },
        {
          "line": 4602,
          "old_api": "Status::Corruption(corruption_messages)",
          "new_api": "Status::OK()",
          "old_text": "Status::Corruption(corruption_messages)",
          "new_text": "Status::OK()",
          "old_line_content": "    return Status::Corruption(corruption_messages);",
          "new_line_content": "    return Status::OK();",
          "content_same": false
        },
        {
          "line": 4654,
          "old_api": "EncodeSessionId",
          "new_api": "assert",
          "old_text": "EncodeSessionId(hi, lo)",
          "new_text": "assert(lo != 0)",
          "old_line_content": "  return EncodeSessionId(hi, lo);",
          "new_line_content": "    assert(lo != 0);",
          "content_same": false
        },
        {
          "line": 4749,
          "old_api": "ok",
          "new_api": "LockFileName",
          "old_text": "result.ok()",
          "new_text": "LockFileName(dbname)",
          "old_line_content": "  if (result.ok()) {",
          "new_line_content": "  const std::string lockname = LockFileName(dbname);",
          "content_same": false
        },
        {
          "line": 4754,
          "old_api": "ParseFileName",
          "new_api": "empty",
          "old_text": "ParseFileName(fname, &number, info_log_prefix.prefix, &type)",
          "new_text": "soptions.db_log_dir.empty()",
          "old_line_content": "      if (ParseFileName(fname, &number, info_log_prefix.prefix, &type) &&",
          "new_line_content": "    InfoLogPrefix info_log_prefix(!soptions.db_log_dir.empty(), dbname);",
          "content_same": false
        },
        {
          "line": 4769,
          "old_api": "ok",
          "new_api": "DeleteFile",
          "old_text": "result.ok()",
          "new_text": "env->DeleteFile(path_to_delete)",
          "old_line_content": "        if (!del.ok() && result.ok()) {",
          "new_line_content": "          del = env->DeleteFile(path_to_delete);",
          "content_same": false
        },
        {
          "line": 4797,
          "old_api": "ok",
          "new_api": "DeleteDBFile",
          "old_text": "result.ok()",
          "new_text": "DeleteDBFile(&soptions, file_path, dbname,\n                                      /*force_bg=*/false, /*force_fg=*/false)",
          "old_line_content": "            if (!del.ok() && result.ok()) {",
          "new_line_content": "            Status del = DeleteDBFile(&soptions, file_path, dbname,",
          "content_same": false
        },
        {
          "line": 4810,
          "old_api": "IsWalDirSameAsDBPath",
          "new_api": "ArchivalDirectory",
          "old_text": "soptions.IsWalDirSameAsDBPath(dbname)",
          "new_text": "ArchivalDirectory(dbname)",
          "old_line_content": "    if (!soptions.IsWalDirSameAsDBPath(dbname)) {",
          "new_line_content": "    std::string archivedir = ArchivalDirectory(dbname);",
          "content_same": false
        },
        {
          "line": 4812,
          "old_api": "ok",
          "new_api": "IsWalDirSameAsDBPath",
          "old_text": "soptions.fs\n              ->GetChildren(soptions.wal_dir, io_opts, &walDirFiles,\n                            /*IODebugContext*=*/nullptr)\n              .ok()",
          "new_text": "soptions.IsWalDirSameAsDBPath(dbname)",
          "old_line_content": "          soptions.fs",
          "new_line_content": "    if (!soptions.IsWalDirSameAsDBPath(dbname)) {",
          "content_same": false
        },
        {
          "line": 4831,
          "old_api": "DeleteDBFile",
          "new_api": "ParseFileName",
          "old_text": "DeleteDBFile(&soptions, archivedir + \"/\" + file, archivedir,\n                           /*force_bg=*/false, /*force_fg=*/!wal_in_db_path)",
          "new_text": "ParseFileName(file, &number, &type)",
          "old_line_content": "              DeleteDBFile(&soptions, archivedir + \"/\" + file, archivedir,",
          "new_line_content": "        if (ParseFileName(file, &number, &type) && type == kWalFile) {",
          "content_same": false
        },
        {
          "line": 4833,
          "old_api": "ok",
          "new_api": "DeleteDBFile",
          "old_text": "result.ok()",
          "new_text": "DeleteDBFile(&soptions, archivedir + \"/\" + file, archivedir,\n                           /*force_bg=*/false, /*force_fg=*/!wal_in_db_path)",
          "old_line_content": "          if (!del.ok() && result.ok()) {",
          "new_line_content": "              DeleteDBFile(&soptions, archivedir + \"/\" + file, archivedir,",
          "content_same": false
        },
        {
          "line": 4847,
          "old_api": "LogFileName",
          "new_api": "ParseFileName",
          "old_text": "LogFileName(soptions.wal_dir, number)",
          "new_text": "ParseFileName(file, &number, &type)",
          "old_line_content": "              DeleteDBFile(&soptions, LogFileName(soptions.wal_dir, number),",
          "new_line_content": "        if (ParseFileName(file, &number, &type) && type == kWalFile) {",
          "content_same": false
        },
        {
          "line": 4880,
          "old_api": "AssertHeld",
          "new_api": "Lock",
          "old_text": "mutex_.AssertHeld()",
          "new_text": "mutex_.Lock()",
          "old_line_content": "    mutex_.AssertHeld();",
          "new_line_content": "    mutex_.Lock();",
          "content_same": false
        },
        {
          "line": 4904,
          "old_api": "TEST_SYNC_POINT",
          "new_api": "Unlock",
          "old_text": "TEST_SYNC_POINT(\"DBImpl::WriteOptionsFile:1\")",
          "new_text": "mutex_.Unlock()",
          "old_line_content": "  TEST_SYNC_POINT(\"DBImpl::WriteOptionsFile:1\");",
          "new_line_content": "  mutex_.Unlock();",
          "content_same": false
        },
        {
          "line": 4906,
          "old_api": "TEST_SYNC_POINT_CALLBACK",
          "new_api": "TEST_SYNC_POINT",
          "old_text": "TEST_SYNC_POINT_CALLBACK(\"DBImpl::WriteOptionsFile:PersistOptions\",\n                           &db_options)",
          "new_text": "TEST_SYNC_POINT(\"DBImpl::WriteOptionsFile:1\")",
          "old_line_content": "  TEST_SYNC_POINT_CALLBACK(\"DBImpl::WriteOptionsFile:PersistOptions\",",
          "new_line_content": "  TEST_SYNC_POINT(\"DBImpl::WriteOptionsFile:1\");",
          "content_same": false
        },
        {
          "line": 4912,
          "old_api": "get",
          "new_api": "NewFileNumber",
          "old_text": "fs_.get()",
          "new_text": "versions_->NewFileNumber()",
          "old_line_content": "                                   fs_.get());",
          "new_line_content": "      TempOptionsFileName(GetName(), versions_->NewFileNumber());",
          "content_same": false
        },
        {
          "line": 4914,
          "old_api": "ok",
          "new_api": "get",
          "old_text": "s.ok()",
          "new_text": "fs_.get()",
          "old_line_content": "  if (s.ok()) {",
          "new_line_content": "                                   fs_.get());",
          "content_same": false
        },
        {
          "line": 4920,
          "old_api": "c_str",
          "new_api": "ok",
          "old_text": "ROCKS_LOG_WARN(immutable_db_options_.info_log,\n                     \"Unable to delete temp options file %s\",\n                     file_name.c_str())",
          "new_text": "GetEnv()->FileExists(file_name).ok()",
          "old_line_content": "      ROCKS_LOG_WARN(immutable_db_options_.info_log,",
          "new_line_content": "  if (!s.ok() && GetEnv()->FileExists(file_name).ok()) {",
          "content_same": false
        },
        {
          "line": 4933,
          "old_api": "ok",
          "new_api": "ExitUnbatched",
          "old_text": "s.ok()",
          "new_text": "write_thread_.ExitUnbatched(&w)",
          "old_line_content": "  if (!s.ok()) {",
          "new_line_content": "    write_thread_.ExitUnbatched(&w);",
          "content_same": false
        },
        {
          "line": 4935,
          "old_api": "ToString",
          "new_api": "ok",
          "old_text": "s.ToString().c_str()",
          "new_text": "s.ok()",
          "old_line_content": "                   \"Unnable to persist options -- %s\", s.ToString().c_str());",
          "new_line_content": "  if (!s.ok()) {",
          "content_same": false
        },
        {
          "line": 4954,
          "old_api": "ok",
          "new_api": "begin",
          "old_text": "env->DeleteFile(iter->second).ok()",
          "new_text": "filenames.begin()",
          "old_line_content": "    if (!env->DeleteFile(iter->second).ok()) {",
          "new_line_content": "  for (auto iter = std::next(filenames.begin(), num_files_to_keep);",
          "content_same": false
        },
        {
          "line": 4955,
          "old_api": "c_str",
          "new_api": "end",
          "old_text": "ROCKS_LOG_WARN(info_log, \"Unable to delete options file %s\",\n                     iter->second.c_str())",
          "new_text": "filenames.end()",
          "old_line_content": "      ROCKS_LOG_WARN(info_log, \"Unable to delete options file %s\",",
          "new_line_content": "       iter != filenames.end(); ++iter) {",
          "content_same": false
        },
        {
          "line": 4956,
          "old_api": "c_str",
          "new_api": "ok",
          "old_text": "iter->second.c_str()",
          "new_text": "env->DeleteFile(iter->second).ok()",
          "old_line_content": "                     iter->second.c_str());",
          "new_line_content": "    if (!env->DeleteFile(iter->second).ok()) {",
          "content_same": false
        },
        {
          "line": 4972,
          "old_api": "ok",
          "new_api": "GetName",
          "old_text": "s.ok()",
          "new_text": "GetName()",
          "old_line_content": "  if (!s.ok()) {",
          "new_line_content": "  s = fs_->GetChildren(GetName(), io_opts, &filenames,",
          "content_same": false
        },
        {
          "line": 4980,
          "old_api": "std::numeric_limits<uint64_t>::max()",
          "new_api": "ParseFileName",
          "old_text": "std::numeric_limits<uint64_t>::max()",
          "new_text": "ParseFileName(filename, &file_number, &type)",
          "old_line_content": "          {std::numeric_limits<uint64_t>::max() - file_number,",
          "new_line_content": "    if (ParseFileName(filename, &file_number, &type) && type == kOptionsFile) {",
          "content_same": false
        },
        {
          "line": 4981,
          "old_api": "GetName",
          "new_api": "insert",
          "old_text": "GetName()",
          "new_text": "options_filenames.insert(\n          {std::numeric_limits<uint64_t>::max() - file_number,\n           GetName() + \"/\" + filename})",
          "old_line_content": "           GetName() + \"/\" + filename});",
          "new_line_content": "      options_filenames.insert(",
          "content_same": false
        },
        {
          "line": 4989,
          "old_api": "Status::OK()",
          "new_api": "DeleteOptionsFilesHelper",
          "old_text": "Status::OK()",
          "new_text": "DeleteOptionsFilesHelper(options_filenames, kNumOptionsFilesKept,\n                           immutable_db_options_.info_log, GetEnv())",
          "old_line_content": "  return Status::OK();",
          "new_line_content": "  DeleteOptionsFilesHelper(options_filenames, kNumOptionsFilesKept,",
          "content_same": false
        },
        {
          "line": 4997,
          "old_api": "GetName",
          "new_api": "NewFileNumber",
          "old_text": "GetName()",
          "new_text": "versions_->NewFileNumber()",
          "old_line_content": "      OptionsFileName(GetName(), options_file_number);",
          "new_line_content": "  uint64_t options_file_number = versions_->NewFileNumber();",
          "content_same": false
        },
        {
          "line": 4999,
          "old_api": "GetFileSize",
          "new_api": "GetName",
          "old_text": "GetEnv()->GetFileSize(file_name, &options_file_size)",
          "new_text": "GetName()",
          "old_line_content": "  s = GetEnv()->GetFileSize(file_name, &options_file_size);",
          "new_line_content": "      OptionsFileName(GetName(), options_file_number);",
          "content_same": false
        },
        {
          "line": 5002,
          "old_api": "RenameFile",
          "new_api": "ok",
          "old_text": "GetEnv()->RenameFile(file_name, options_file_name)",
          "new_text": "s.ok()",
          "old_line_content": "    s = GetEnv()->RenameFile(file_name, options_file_name);",
          "new_line_content": "  if (s.ok()) {",
          "content_same": false
        },
        {
          "line": 5004,
          "old_api": "ok",
          "new_api": "RenameFile",
          "old_text": "s.ok()",
          "new_text": "GetEnv()->RenameFile(file_name, options_file_name)",
          "old_line_content": "    if (s.ok()) {",
          "new_line_content": "    s = GetEnv()->RenameFile(file_name, options_file_name);",
          "content_same": false
        },
        {
          "line": 5007,
          "old_api": "ok",
          "new_api": "IOOptions",
          "old_text": "s.ok()",
          "new_text": "IOOptions()",
          "old_line_content": "    if (s.ok()) {",
          "new_line_content": "      s = fs_->NewDirectory(GetName(), IOOptions(), &dir_obj, nullptr);",
          "content_same": false
        },
        {
          "line": 5009,
          "old_api": "DirFsyncOptions",
          "new_api": "ok",
          "old_text": "DirFsyncOptions(options_file_name)",
          "new_text": "s.ok()",
          "old_line_content": "                                       DirFsyncOptions(options_file_name));",
          "new_line_content": "    if (s.ok()) {",
          "content_same": false
        },
        {
          "line": 5011,
          "old_api": "ok",
          "new_api": "DirFsyncOptions",
          "old_text": "s.ok()",
          "new_text": "DirFsyncOptions(options_file_name)",
          "old_line_content": "    if (s.ok()) {",
          "new_line_content": "                                       DirFsyncOptions(options_file_name));",
          "content_same": false
        },
        {
          "line": 5018,
          "old_api": "PermitUncheckedError",
          "new_api": "ok",
          "old_text": "temp_s.PermitUncheckedError()",
          "new_text": "temp_s.ok()",
          "old_line_content": "          temp_s.PermitUncheckedError();",
          "new_line_content": "      if (!temp_s.ok()) {",
          "content_same": false
        },
        {
          "line": 5072,
          "old_api": "GetRocksBuildProperties",
          "new_api": "c_str",
          "old_text": "GetRocksBuildProperties()",
          "new_text": "ROCKS_LOG_HEADER(log, \"RocksDB version: %s\\n\",\n                   GetRocksVersionAsString().c_str())",
          "old_line_content": "  const auto& props = GetRocksBuildProperties();",
          "new_line_content": "  ROCKS_LOG_HEADER(log, \"RocksDB version: %s\\n\",",
          "content_same": false
        },
        {
          "line": 5073,
          "old_api": "find",
          "new_api": "c_str",
          "old_text": "props.find(\"rocksdb_build_git_sha\")",
          "new_text": "GetRocksVersionAsString().c_str()",
          "old_line_content": "  const auto& sha = props.find(\"rocksdb_build_git_sha\");",
          "new_line_content": "                   GetRocksVersionAsString().c_str());",
          "content_same": false
        },
        {
          "line": 5074,
          "old_api": "end",
          "new_api": "GetRocksBuildProperties",
          "old_text": "props.end()",
          "new_text": "GetRocksBuildProperties()",
          "old_line_content": "  if (sha != props.end()) {",
          "new_line_content": "  const auto& props = GetRocksBuildProperties();",
          "content_same": false
        },
        {
          "line": 5075,
          "old_api": "c_str",
          "new_api": "find",
          "old_text": "sha->second.c_str()",
          "new_text": "props.find(\"rocksdb_build_git_sha\")",
          "old_line_content": "    ROCKS_LOG_HEADER(log, \"Git sha %s\", sha->second.c_str());",
          "new_line_content": "  const auto& sha = props.find(\"rocksdb_build_git_sha\");",
          "content_same": false
        },
        {
          "line": 5077,
          "old_api": "find",
          "new_api": "c_str",
          "old_text": "props.find(\"rocksdb_build_date\")",
          "new_text": "sha->second.c_str()",
          "old_line_content": "  const auto date = props.find(\"rocksdb_build_date\");",
          "new_line_content": "    ROCKS_LOG_HEADER(log, \"Git sha %s\", sha->second.c_str());",
          "content_same": false
        },
        {
          "line": 5079,
          "old_api": "c_str",
          "new_api": "find",
          "old_text": "date->second.c_str()",
          "new_text": "props.find(\"rocksdb_build_date\")",
          "old_line_content": "    ROCKS_LOG_HEADER(log, \"Compile date %s\", date->second.c_str());",
          "new_line_content": "  const auto date = props.find(\"rocksdb_build_date\");",
          "content_same": false
        },
        {
          "line": 5113,
          "old_api": "timestamp_size",
          "new_api": "user_comparator",
          "old_text": "ucmp->timestamp_size()",
          "new_text": "cfd->user_comparator()",
          "old_line_content": "  size_t ts_sz = ucmp->timestamp_size();",
          "new_line_content": "  const Comparator* const ucmp = cfd->user_comparator();",
          "content_same": false
        },
        {
          "line": 5119,
          "old_api": "assert",
          "new_api": "assign",
          "old_text": "assert(!timestamp)",
          "new_text": "ts_buf.assign(ts_sz, '\\xff')",
          "old_line_content": "    assert(!timestamp);",
          "new_line_content": "    ts_buf.assign(ts_sz, '\\xff');",
          "content_same": false
        },
        {
          "line": 5136,
          "old_api": "ToString",
          "new_api": "IsMergeInProgress",
          "old_text": "ROCKS_LOG_ERROR(immutable_db_options_.info_log,\n                    \"Unexpected status returned from MemTable::Get: %s\\n\",\n                    s.ToString().c_str())",
          "new_text": "s.IsMergeInProgress()",
          "old_line_content": "    ROCKS_LOG_ERROR(immutable_db_options_.info_log,",
          "new_line_content": "  if (!(s.ok() || s.IsNotFound() || s.IsMergeInProgress())) {",
          "content_same": false
        },
        {
          "line": 5144,
          "old_api": "std::string(ts_sz, '\\xff')",
          "new_api": "empty",
          "old_text": "std::string(ts_sz, '\\xff')",
          "new_text": "assert(!ts_sz ||\n         (*seq != kMaxSequenceNumber &&\n          *timestamp != std::string(ts_sz, '\\xff')) ||\n         (*seq == kMaxSequenceNumber && timestamp->empty()))",
          "old_line_content": "          *timestamp != std::string(ts_sz, '\\xff')) ||",
          "new_line_content": "  assert(!ts_sz ||",
          "content_same": false
        },
        {
          "line": 5147,
          "old_api": "TEST_SYNC_POINT_CALLBACK",
          "new_api": "empty",
          "old_text": "TEST_SYNC_POINT_CALLBACK(\"DBImpl::GetLatestSequenceForKey:mem\", timestamp)",
          "new_text": "timestamp->empty()",
          "old_line_content": "  TEST_SYNC_POINT_CALLBACK(\"DBImpl::GetLatestSequenceForKey:mem\", timestamp);",
          "new_line_content": "         (*seq == kMaxSequenceNumber && timestamp->empty()));",
          "content_same": false
        },
        {
          "line": 5169,
          "old_api": "ToString",
          "new_api": "IsMergeInProgress",
          "old_text": "ROCKS_LOG_ERROR(immutable_db_options_.info_log,\n                    \"Unexpected status returned from MemTableList::Get: %s\\n\",\n                    s.ToString().c_str())",
          "new_text": "s.IsMergeInProgress()",
          "old_line_content": "    ROCKS_LOG_ERROR(immutable_db_options_.info_log,",
          "new_line_content": "  if (!(s.ok() || s.IsNotFound() || s.IsMergeInProgress())) {",
          "content_same": false
        },
        {
          "line": 5178,
          "old_api": "std::string(ts_sz, '\\xff')",
          "new_api": "empty",
          "old_text": "std::string(ts_sz, '\\xff')",
          "new_text": "assert(!ts_sz ||\n         (*seq != kMaxSequenceNumber &&\n          *timestamp != std::string(ts_sz, '\\xff')) ||\n         (*seq == kMaxSequenceNumber && timestamp->empty()))",
          "old_line_content": "          *timestamp != std::string(ts_sz, '\\xff')) ||",
          "new_line_content": "  assert(!ts_sz ||",
          "content_same": false
        },
        {
          "line": 5202,
          "old_api": "ToString",
          "new_api": "IsMergeInProgress",
          "old_text": "ROCKS_LOG_ERROR(\n        immutable_db_options_.info_log,\n        \"Unexpected status returned from MemTableList::GetFromHistory: %s\\n\",\n        s.ToString().c_str())",
          "new_text": "s.IsMergeInProgress()",
          "old_line_content": "    ROCKS_LOG_ERROR(",
          "new_line_content": "  if (!(s.ok() || s.IsNotFound() || s.IsMergeInProgress())) {",
          "content_same": false
        },
        {
          "line": 5212,
          "old_api": "std::string(ts_sz, '\\xff')",
          "new_api": "empty",
          "old_text": "std::string(ts_sz, '\\xff')",
          "new_text": "assert(!ts_sz ||\n         (*seq != kMaxSequenceNumber &&\n          *timestamp != std::string(ts_sz, '\\xff')) ||\n         (*seq == kMaxSequenceNumber && timestamp->empty()))",
          "old_line_content": "          *timestamp != std::string(ts_sz, '\\xff')) ||",
          "new_line_content": "  assert(!ts_sz ||",
          "content_same": false
        },
        {
          "line": 5219,
          "old_api": "Status::OK()",
          "new_api": "std::string(ts_sz, '\\xff')",
          "old_text": "Status::OK()",
          "new_text": "std::string(ts_sz, '\\xff')",
          "old_line_content": "    return Status::OK();",
          "new_line_content": "    assert(0 == ts_sz || *timestamp != std::string(ts_sz, '\\xff'));",
          "content_same": false
        },
        {
          "line": 5239,
          "old_api": "ToString",
          "new_api": "IsMergeInProgress",
          "old_text": "ROCKS_LOG_ERROR(immutable_db_options_.info_log,\n                      \"Unexpected status returned from Version::Get: %s\\n\",\n                      s.ToString().c_str())",
          "new_text": "s.IsMergeInProgress()",
          "old_line_content": "      ROCKS_LOG_ERROR(immutable_db_options_.info_log,",
          "new_line_content": "    if (!(s.ok() || s.IsNotFound() || s.IsMergeInProgress())) {",
          "content_same": false
        },
        {
          "line": 5272,
          "old_api": "Status::InvalidArgument(\n            \"ingestion args have duplicate column families\")",
          "new_api": "Status::InvalidArgument(\"column family handle is null\")",
          "old_text": "Status::InvalidArgument(\n            \"ingestion args have duplicate column families\")",
          "new_text": "Status::InvalidArgument(\"column family handle is null\")",
          "old_line_content": "        return Status::InvalidArgument(",
          "new_line_content": "        return Status::InvalidArgument(\"column family handle is null\");",
          "content_same": false
        },
        {
          "line": 5281,
          "old_api": "empty",
          "new_api": "size",
          "old_text": "args[i].external_files.empty()",
          "new_text": "args.size()",
          "old_line_content": "    if (args[i].external_files.empty()) {",
          "new_line_content": "  const size_t num_cfs = args.size();",
          "content_same": false
        },
        {
          "line": 5283,
          "old_api": "snprintf",
          "new_api": "empty",
          "old_text": "snprintf(err_msg, 128, \"external_files[%zu] is empty\", i)",
          "new_text": "args[i].external_files.empty()",
          "old_line_content": "      snprintf(err_msg, 128, \"external_files[%zu] is empty\", i);",
          "new_line_content": "    if (args[i].external_files.empty()) {",
          "content_same": false
        },
        {
          "line": 5307,
          "old_api": "ok",
          "new_api": "cfd",
          "old_text": "status.ok()",
          "new_text": "static_cast<ColumnFamilyHandleImpl*>(args[0].column_family)->cfd()",
          "old_line_content": "  if (!status.ok()) {",
          "new_line_content": "      static_cast<ColumnFamilyHandleImpl*>(args[0].column_family)->cfd(), total,",
          "content_same": false
        },
        {
          "line": 5309,
          "old_api": "ReleaseFileNumberFromPendingOutputs",
          "new_api": "ok",
          "old_text": "ReleaseFileNumberFromPendingOutputs(pending_output_elem)",
          "new_text": "status.ok()",
          "old_line_content": "    ReleaseFileNumberFromPendingOutputs(pending_output_elem);",
          "new_line_content": "  if (!status.ok()) {",
          "content_same": false
        },
        {
          "line": 5327,
          "old_api": "cfd",
          "new_api": "size",
          "old_text": "static_cast<ColumnFamilyHandleImpl*>(args[i].column_family)->cfd()",
          "new_text": "args[i - 1].external_files.size()",
          "old_line_content": "        static_cast<ColumnFamilyHandleImpl*>(args[i].column_family)->cfd();",
          "new_line_content": "    start_file_number += args[i - 1].external_files.size();",
          "content_same": false
        },
        {
          "line": 5329,
          "old_api": "Prepare",
          "new_api": "cfd",
          "old_text": "ingestion_jobs[i].Prepare(\n        args[i].external_files, args[i].files_checksums,\n        args[i].files_checksum_func_names, args[i].file_temperature,\n        start_file_number, super_version)",
          "new_text": "static_cast<ColumnFamilyHandleImpl*>(args[i].column_family)->cfd()",
          "old_line_content": "    Status es = ingestion_jobs[i].Prepare(",
          "new_line_content": "        static_cast<ColumnFamilyHandleImpl*>(args[i].column_family)->cfd();",
          "content_same": false
        },
        {
          "line": 5339,
          "old_api": "TEST_SYNC_POINT",
          "new_api": "CleanupSuperVersion",
          "old_text": "TEST_SYNC_POINT(\"DBImpl::IngestExternalFiles:BeforeLastJobPrepare:0\")",
          "new_text": "CleanupSuperVersion(super_version)",
          "old_line_content": "  TEST_SYNC_POINT(\"DBImpl::IngestExternalFiles:BeforeLastJobPrepare:0\");",
          "new_line_content": "    CleanupSuperVersion(super_version);",
          "content_same": false
        },
        {
          "line": 5345,
          "old_api": "Prepare",
          "new_api": "cfd",
          "old_text": "ingestion_jobs[0].Prepare(\n        args[0].external_files, args[0].files_checksums,\n        args[0].files_checksum_func_names, args[0].file_temperature,\n        next_file_number, super_version)",
          "new_text": "static_cast<ColumnFamilyHandleImpl*>(args[0].column_family)->cfd()",
          "old_line_content": "    Status es = ingestion_jobs[0].Prepare(",
          "new_line_content": "        static_cast<ColumnFamilyHandleImpl*>(args[0].column_family)->cfd();",
          "content_same": false
        },
        {
          "line": 5354,
          "old_api": "ok",
          "new_api": "CleanupSuperVersion",
          "old_text": "status.ok()",
          "new_text": "CleanupSuperVersion(super_version)",
          "old_line_content": "  if (!status.ok()) {",
          "new_line_content": "    CleanupSuperVersion(super_version);",
          "content_same": false
        },
        {
          "line": 5356,
          "old_api": "Cleanup",
          "new_api": "ok",
          "old_text": "ingestion_jobs[i].Cleanup(status)",
          "new_text": "status.ok()",
          "old_line_content": "      ingestion_jobs[i].Cleanup(status);",
          "new_line_content": "  if (!status.ok()) {",
          "content_same": false
        },
        {
          "line": 5367,
          "old_api": "TEST_SYNC_POINT",
          "new_api": "emplace_back",
          "old_text": "TEST_SYNC_POINT(\"DBImpl::IngestExternalFiles:BeforeJobsRun:0\")",
          "new_text": "sv_ctxs.emplace_back(true /* create_superversion */)",
          "old_line_content": "  TEST_SYNC_POINT(\"DBImpl::IngestExternalFiles:BeforeJobsRun:0\");",
          "new_line_content": "    sv_ctxs.emplace_back(true /* create_superversion */);",
          "content_same": false
        },
        {
          "line": 5389,
          "old_api": "static_cast<int>(num_cfs)",
          "new_api": "WaitForPendingWrites",
          "old_text": "static_cast<int>(num_cfs)",
          "new_text": "WaitForPendingWrites()",
          "old_line_content": "    num_running_ingest_file_ += static_cast<int>(num_cfs);",
          "new_line_content": "    WaitForPendingWrites();",
          "content_same": false
        },
        {
          "line": 5429,
          "old_api": "cfd",
          "new_api": "Unlock",
          "old_text": "static_cast<ColumnFamilyHandleImpl*>(args[i].column_family)\n                    ->cfd()",
          "new_text": "mutex_.Unlock()",
          "old_line_content": "                static_cast<ColumnFamilyHandleImpl*>(args[i].column_family)",
          "new_line_content": "            mutex_.Unlock();",
          "content_same": false
        },
        {
          "line": 5431,
          "old_api": "FlushMemTable",
          "new_api": "cfd",
          "old_text": "FlushMemTable(cfd, flush_opts,\n                                   FlushReason::kExternalFileIngestion,\n                                   true /* entered_write_thread */)",
          "new_text": "static_cast<ColumnFamilyHandleImpl*>(args[i].column_family)\n                    ->cfd()",
          "old_line_content": "            status = FlushMemTable(cfd, flush_opts,",
          "new_line_content": "                static_cast<ColumnFamilyHandleImpl*>(args[i].column_family)",
          "content_same": false
        },
        {
          "line": 5445,
          "old_api": "AssertHeld",
          "new_api": "ok",
          "old_text": "mutex_.AssertHeld()",
          "new_text": "status.ok()",
          "old_line_content": "        mutex_.AssertHeld();",
          "new_line_content": "    if (status.ok()) {",
          "content_same": false
        },
        {
          "line": 5447,
          "old_api": "ok",
          "new_api": "AssertHeld",
          "old_text": "status.ok()",
          "new_text": "mutex_.AssertHeld()",
          "old_line_content": "        if (!status.ok()) {",
          "new_line_content": "        mutex_.AssertHeld();",
          "content_same": false
        },
        {
          "line": 5467,
          "old_api": "edit",
          "new_api": "GetLatestMutableCFOptions",
          "old_text": "ingestion_jobs[i].edit()",
          "new_text": "cfd->GetLatestMutableCFOptions()",
          "old_line_content": "        edit_list.push_back(ingestion_jobs[i].edit());",
          "new_line_content": "        mutable_cf_options_list.push_back(cfd->GetLatestMutableCFOptions());",
          "content_same": false
        },
        {
          "line": 5478,
          "old_api": "assert",
          "new_api": "MarkAtomicGroup",
          "old_text": "assert(0 == num_entries)",
          "new_text": "edits[0]->MarkAtomicGroup(--num_entries)",
          "old_line_content": "        assert(0 == num_entries);",
          "new_line_content": "          edits[0]->MarkAtomicGroup(--num_entries);",
          "content_same": false
        },
        {
          "line": 5480,
          "old_api": "GetDbDir",
          "new_api": "assert",
          "old_text": "versions_->LogAndApply(cfds_to_commit, mutable_cf_options_list,\n                                      read_options, edit_lists, &mutex_,\n                                      directories_.GetDbDir())",
          "new_text": "assert(0 == num_entries)",
          "old_line_content": "      status = versions_->LogAndApply(cfds_to_commit, mutable_cf_options_list,",
          "new_line_content": "        assert(0 == num_entries);",
          "content_same": false
        },
        {
          "line": 5501,
          "old_api": "SetLastPublishedSequence",
          "new_api": "LastSequence",
          "old_text": "versions_->SetLastPublishedSequence(last_seqno + consumed_seqno_count)",
          "new_text": "versions_->LastSequence()",
          "old_line_content": "        versions_->SetLastPublishedSequence(last_seqno + consumed_seqno_count);",
          "new_line_content": "        const SequenceNumber last_seqno = versions_->LastSequence();",
          "content_same": false
        },
        {
          "line": 5502,
          "old_api": "SetLastSequence",
          "new_api": "SetLastAllocatedSequence",
          "old_text": "versions_->SetLastSequence(last_seqno + consumed_seqno_count)",
          "new_text": "versions_->SetLastAllocatedSequence(last_seqno + consumed_seqno_count)",
          "old_line_content": "        versions_->SetLastSequence(last_seqno + consumed_seqno_count);",
          "new_line_content": "        versions_->SetLastAllocatedSequence(last_seqno + consumed_seqno_count);",
          "content_same": false
        },
        {
          "line": 5515,
          "old_api": "GetLatestMutableCFOptions",
          "new_api": "cfd",
          "old_text": "InstallSuperVersionAndScheduleWork(cfd, &sv_ctxs[i],\n                                             *cfd->GetLatestMutableCFOptions())",
          "new_text": "static_cast<ColumnFamilyHandleImpl*>(args[i].column_family)->cfd()",
          "old_line_content": "          InstallSuperVersionAndScheduleWork(cfd, &sv_ctxs[i],",
          "new_line_content": "            static_cast<ColumnFamilyHandleImpl*>(args[i].column_family)->cfd();",
          "content_same": false
        },
        {
          "line": 5516,
          "old_api": "GetLatestMutableCFOptions",
          "new_api": "IsDropped",
          "old_text": "cfd->GetLatestMutableCFOptions()",
          "new_text": "cfd->IsDropped()",
          "old_line_content": "                                             *cfd->GetLatestMutableCFOptions());",
          "new_line_content": "        if (!cfd->IsDropped()) {",
          "content_same": false
        },
        {
          "line": 5535,
          "old_api": "SetBGError",
          "new_api": "io_status",
          "old_text": "error_handler_.SetBGError(io_s, BackgroundErrorReason::kManifestWrite)",
          "new_text": "versions_->io_status()",
          "old_line_content": "      error_handler_.SetBGError(io_s, BackgroundErrorReason::kManifestWrite);",
          "new_line_content": "      const IOStatus& io_s = versions_->io_status();",
          "content_same": false
        },
        {
          "line": 5544,
          "old_api": "ok",
          "new_api": "ExitUnbatched",
          "old_text": "status.ok()",
          "new_text": "write_thread_.ExitUnbatched(&w)",
          "old_line_content": "    if (status.ok()) {",
          "new_line_content": "    write_thread_.ExitUnbatched(&w);",
          "content_same": false
        },
        {
          "line": 5546,
          "old_api": "UpdateStats",
          "new_api": "ok",
          "old_text": "job.UpdateStats()",
          "new_text": "status.ok()",
          "old_line_content": "        job.UpdateStats();",
          "new_line_content": "    if (status.ok()) {",
          "content_same": false
        },
        {
          "line": 5552,
          "old_api": "SignalAll",
          "new_api": "static_cast<int>(num_cfs)",
          "old_text": "bg_cv_.SignalAll()",
          "new_text": "static_cast<int>(num_cfs)",
          "old_line_content": "      bg_cv_.SignalAll();",
          "new_line_content": "    num_running_ingest_file_ -= static_cast<int>(num_cfs);",
          "content_same": false
        },
        {
          "line": 5554,
          "old_api": "TEST_SYNC_POINT",
          "new_api": "SignalAll",
          "old_text": "TEST_SYNC_POINT(\"DBImpl::AddFile:MutexUnlock\")",
          "new_text": "bg_cv_.SignalAll()",
          "old_line_content": "    TEST_SYNC_POINT(\"DBImpl::AddFile:MutexUnlock\");",
          "new_line_content": "      bg_cv_.SignalAll();",
          "content_same": false
        },
        {
          "line": 5565,
          "old_api": "ok",
          "new_api": "Cleanup",
          "old_text": "status.ok()",
          "new_text": "ingestion_jobs[i].Cleanup(status)",
          "old_line_content": "  if (status.ok()) {",
          "new_line_content": "    ingestion_jobs[i].Cleanup(status);",
          "content_same": false
        },
        {
          "line": 5570,
          "old_api": "NotifyOnExternalFileIngested",
          "new_api": "cfd",
          "old_text": "NotifyOnExternalFileIngested(cfd, ingestion_jobs[i])",
          "new_text": "static_cast<ColumnFamilyHandleImpl*>(args[i].column_family)->cfd()",
          "old_line_content": "        NotifyOnExternalFileIngested(cfd, ingestion_jobs[i]);",
          "new_line_content": "          static_cast<ColumnFamilyHandleImpl*>(args[i].column_family)->cfd();",
          "content_same": false
        },
        {
          "line": 5592,
          "old_api": "Status::InvalidArgument(\"Comparator name mismatch\")",
          "new_api": "size",
          "old_text": "Status::InvalidArgument(\"Comparator name mismatch\")",
          "new_text": "metadatas.size()",
          "old_line_content": "      return Status::InvalidArgument(\"Comparator name mismatch\");",
          "new_line_content": "  for (size_t i = 0; i < metadatas.size(); i++) {",
          "content_same": false
        },
        {
          "line": 5597,
          "old_api": "size",
          "new_api": "push_back",
          "old_text": "metadatas[i]->files.size()",
          "new_text": "metadata_files[i].push_back((LiveFileMetaData*)&file)",
          "old_line_content": "    total_file_num += metadatas[i]->files.size();",
          "new_line_content": "      metadata_files[i].push_back((LiveFileMetaData*)&file);",
          "content_same": false
        },
        {
          "line": 5609,
          "old_api": "get",
          "new_api": "static_cast_with_check<ColumnFamilyHandleImpl>(*handle)",
          "old_text": "versions_.get()",
          "new_text": "static_cast_with_check<ColumnFamilyHandleImpl>(*handle)",
          "old_line_content": "  ImportColumnFamilyJob import_job(versions_.get(), cfd, immutable_db_options_,",
          "new_line_content": "  auto cfh = static_cast_with_check<ColumnFamilyHandleImpl>(*handle);",
          "content_same": false
        },
        {
          "line": 5622,
          "old_api": "GetBGError",
          "new_api": "IsDBStopped",
          "old_text": "error_handler_.GetBGError()",
          "new_text": "error_handler_.IsDBStopped()",
          "old_line_content": "      status = error_handler_.GetBGError();",
          "new_line_content": "    if (error_handler_.IsDBStopped()) {",
          "content_same": false
        },
        {
          "line": 5629,
          "old_api": "ok",
          "new_api": "CaptureCurrentFileNumberInPendingOutputs",
          "old_text": "status.ok()",
          "new_text": "CaptureCurrentFileNumberInPendingOutputs()",
          "old_line_content": "    if (status.ok()) {",
          "new_line_content": "        CaptureCurrentFileNumberInPendingOutputs()));",
          "content_same": false
        },
        {
          "line": 5637,
          "old_api": "GetDbDir",
          "new_api": "GetLatestMutableCFOptions",
          "old_text": "versions_->LogAndApply(cfd, *cf_options, read_options, &dummy_edit,\n                                 &mutex_, directories_.GetDbDir())",
          "new_text": "cfd->GetLatestMutableCFOptions()",
          "old_line_content": "          versions_->LogAndApply(cfd, *cf_options, read_options, &dummy_edit,",
          "new_line_content": "      auto cf_options = cfd->GetLatestMutableCFOptions();",
          "content_same": false
        },
        {
          "line": 5639,
          "old_api": "ok",
          "new_api": "GetDbDir",
          "old_text": "status.ok()",
          "new_text": "versions_->LogAndApply(cfd, *cf_options, read_options, &dummy_edit,\n                                 &mutex_, directories_.GetDbDir())",
          "old_line_content": "      if (status.ok()) {",
          "new_line_content": "          versions_->LogAndApply(cfd, *cf_options, read_options, &dummy_edit,",
          "content_same": false
        },
        {
          "line": 5640,
          "old_api": "InstallSuperVersionAndScheduleWork",
          "new_api": "GetDbDir",
          "old_text": "InstallSuperVersionAndScheduleWork(cfd, &dummy_sv_ctx, *cf_options)",
          "new_text": "directories_.GetDbDir()",
          "old_line_content": "        InstallSuperVersionAndScheduleWork(cfd, &dummy_sv_ctx, *cf_options);",
          "new_line_content": "                                 &mutex_, directories_.GetDbDir());",
          "content_same": false
        },
        {
          "line": 5646,
          "old_api": "ok",
          "new_api": "Clean",
          "old_text": "status.ok()",
          "new_text": "dummy_sv_ctx.Clean()",
          "old_line_content": "  if (status.ok()) {",
          "new_line_content": "  dummy_sv_ctx.Clean();",
          "content_same": false
        },
        {
          "line": 5648,
          "old_api": "Prepare",
          "new_api": "ok",
          "old_text": "import_job.Prepare(next_file_number, sv)",
          "new_text": "status.ok()",
          "old_line_content": "    status = import_job.Prepare(next_file_number, sv);",
          "new_line_content": "  if (status.ok()) {",
          "content_same": false
        },
        {
          "line": 5649,
          "old_api": "CleanupSuperVersion",
          "new_api": "GetReferencedSuperVersion",
          "old_text": "CleanupSuperVersion(sv)",
          "new_text": "cfd->GetReferencedSuperVersion(this)",
          "old_line_content": "    CleanupSuperVersion(sv);",
          "new_line_content": "    SuperVersion* sv = cfd->GetReferencedSuperVersion(this);",
          "content_same": false
        },
        {
          "line": 5669,
          "old_api": "Run",
          "new_api": "IsDropped",
          "old_text": "import_job.Run()",
          "new_text": "cfd->IsDropped()",
          "old_line_content": "      status = import_job.Run();",
          "new_line_content": "      assert(!cfd->IsDropped());",
          "content_same": false
        },
        {
          "line": 5674,
          "old_api": "edit",
          "new_api": "ok",
          "old_text": "versions_->LogAndApply(cfd, *cf_options, read_options,\n                                        import_job.edit(), &mutex_,\n                                        directories_.GetDbDir())",
          "new_text": "status.ok()",
          "old_line_content": "        status = versions_->LogAndApply(cfd, *cf_options, read_options,",
          "new_line_content": "      if (status.ok()) {",
          "content_same": false
        },
        {
          "line": 5675,
          "old_api": "edit",
          "new_api": "GetLatestMutableCFOptions",
          "old_text": "import_job.edit()",
          "new_text": "cfd->GetLatestMutableCFOptions()",
          "old_line_content": "                                        import_job.edit(), &mutex_,",
          "new_line_content": "        auto cf_options = cfd->GetLatestMutableCFOptions();",
          "content_same": false
        },
        {
          "line": 5676,
          "old_api": "GetDbDir",
          "new_api": "edit",
          "old_text": "directories_.GetDbDir()",
          "new_text": "versions_->LogAndApply(cfd, *cf_options, read_options,\n                                        import_job.edit(), &mutex_,\n                                        directories_.GetDbDir())",
          "old_line_content": "                                        directories_.GetDbDir());",
          "new_line_content": "        status = versions_->LogAndApply(cfd, *cf_options, read_options,",
          "content_same": false
        },
        {
          "line": 5677,
          "old_api": "ok",
          "new_api": "edit",
          "old_text": "status.ok()",
          "new_text": "import_job.edit()",
          "old_line_content": "        if (status.ok()) {",
          "new_line_content": "                                        import_job.edit(), &mutex_,",
          "content_same": false
        },
        {
          "line": 5678,
          "old_api": "InstallSuperVersionAndScheduleWork",
          "new_api": "GetDbDir",
          "old_text": "InstallSuperVersionAndScheduleWork(cfd, &sv_context, *cf_options)",
          "new_text": "directories_.GetDbDir()",
          "old_line_content": "          InstallSuperVersionAndScheduleWork(cfd, &sv_context, *cf_options);",
          "new_line_content": "                                        directories_.GetDbDir());",
          "content_same": false
        },
        {
          "line": 5705,
          "old_api": "DropColumnFamily",
          "new_api": "Cleanup",
          "old_text": "DropColumnFamily(*handle)",
          "new_text": "import_job.Cleanup(status)",
          "old_line_content": "    Status temp_s = DropColumnFamily(*handle);",
          "new_line_content": "  import_job.Cleanup(status);",
          "content_same": false
        },
        {
          "line": 5707,
          "old_api": "ToString",
          "new_api": "DropColumnFamily",
          "old_text": "ROCKS_LOG_ERROR(immutable_db_options_.info_log,\n                      \"DropColumnFamily failed with error %s\",\n                      temp_s.ToString().c_str())",
          "new_text": "DropColumnFamily(*handle)",
          "old_line_content": "      ROCKS_LOG_ERROR(immutable_db_options_.info_log,",
          "new_line_content": "    Status temp_s = DropColumnFamily(*handle);",
          "content_same": false
        },
        {
          "line": 5729,
          "old_api": "AtomicFlushMemTables",
          "new_api": "cfd",
          "old_text": "AtomicFlushMemTables(flush_opts, FlushReason::kDeleteFiles,\n                                  {} /* provided_candidate_cfds */,\n                                  false /* entered_write_thread */)",
          "new_text": "static_cast_with_check<ColumnFamilyHandleImpl>(column_family)->cfd()",
          "old_line_content": "    status = AtomicFlushMemTables(flush_opts, FlushReason::kDeleteFiles,",
          "new_line_content": "      static_cast_with_check<ColumnFamilyHandleImpl>(column_family)->cfd();",
          "content_same": false
        },
        {
          "line": 5742,
          "old_api": "size",
          "new_api": "RangePtr",
          "old_text": "ranges.size()",
          "new_text": "RangePtr(nullptr, &begin_key)",
          "old_line_content": "    status = DeleteFilesInRanges(column_family, ranges.data(), ranges.size());",
          "new_line_content": "    ranges.push_back(RangePtr(nullptr, &begin_key));",
          "content_same": false
        },
        {
          "line": 5768,
          "old_api": "Compare",
          "new_api": "ok",
          "old_text": "ucmp->Compare(end_key, largest_user_key)",
          "new_text": "status.ok()",
          "old_line_content": "        if (ucmp->Compare(end_key, largest_user_key) < 0) {",
          "new_line_content": "      if (status.ok()) {",
          "content_same": false
        },
        {
          "line": 5770,
          "old_api": "ok",
          "new_api": "Compare",
          "old_text": "status.ok()",
          "new_text": "ucmp->Compare(end_key, largest_user_key)",
          "old_line_content": "          if (status.ok()) {",
          "new_line_content": "        if (ucmp->Compare(end_key, largest_user_key) < 0) {",
          "content_same": false
        },
        {
          "line": 5771,
          "old_api": "Delete",
          "new_api": "DeleteRange",
          "old_text": "Delete(wo, column_family, largest_user_key)",
          "new_text": "DeleteRange(wo, column_family, end_key, largest_user_key)",
          "old_line_content": "            status = Delete(wo, column_family, largest_user_key);",
          "new_line_content": "          status = DeleteRange(wo, column_family, end_key, largest_user_key);",
          "content_same": false
        },
        {
          "line": 5821,
          "old_api": "Status::InvalidArgument(\n          \"Cannot verify file checksum if options.file_checksum_gen_factory is \"\n          \"null\")",
          "new_api": "get",
          "old_text": "Status::InvalidArgument(\n          \"Cannot verify file checksum if options.file_checksum_gen_factory is \"\n          \"null\")",
          "new_text": "immutable_db_options_.file_checksum_gen_factory.get()",
          "old_line_content": "      s = Status::InvalidArgument(",
          "new_line_content": "        immutable_db_options_.file_checksum_gen_factory.get();",
          "content_same": false
        },
        {
          "line": 5835,
          "old_api": "Ref",
          "new_api": "GetColumnFamilySet",
          "old_text": "cfd->Ref()",
          "new_text": "versions_->GetColumnFamilySet()",
          "old_line_content": "        cfd->Ref();",
          "new_line_content": "    for (auto cfd : *versions_->GetColumnFamilySet()) {",
          "content_same": false
        },
        {
          "line": 5836,
          "old_api": "push_back",
          "new_api": "initialized",
          "old_text": "cfd_list.push_back(cfd)",
          "new_text": "cfd->initialized()",
          "old_line_content": "        cfd_list.push_back(cfd);",
          "new_line_content": "      if (!cfd->IsDropped() && cfd->initialized()) {",
          "content_same": false
        },
        {
          "line": 5854,
          "old_api": "ok",
          "new_api": "GetLatestCFOptions",
          "old_text": "s.ok()",
          "new_text": "cfd->GetLatestCFOptions()",
          "old_line_content": "    for (int i = 0; i < vstorage->num_non_empty_levels() && s.ok(); i++) {",
          "new_line_content": "                     cfd->GetLatestCFOptions());",
          "content_same": false
        },
        {
          "line": 5857,
          "old_api": "LevelFilesBrief",
          "new_api": "ok",
          "old_text": "vstorage->LevelFilesBrief(i)",
          "new_text": "s.ok()",
          "old_line_content": "        const auto& fd_with_krange = vstorage->LevelFilesBrief(i).files[j];",
          "new_line_content": "      for (size_t j = 0; j < vstorage->LevelFilesBrief(i).num_files && s.ok();",
          "content_same": false
        },
        {
          "line": 5862,
          "old_api": "GetPathId",
          "new_api": "assert",
          "old_text": "fd.GetPathId()",
          "new_text": "assert(fmeta)",
          "old_line_content": "                                          fd.GetNumber(), fd.GetPathId());",
          "new_line_content": "        assert(fmeta);",
          "content_same": false
        },
        {
          "line": 5864,
          "old_api": "VerifyFullFileChecksum",
          "new_api": "GetPathId",
          "old_text": "VerifyFullFileChecksum(fmeta->file_checksum,\n                                     fmeta->file_checksum_func_name, fname,\n                                     read_options)",
          "new_text": "fd.GetPathId()",
          "old_line_content": "          s = VerifyFullFileChecksum(fmeta->file_checksum,",
          "new_line_content": "                                          fd.GetNumber(), fd.GetPathId());",
          "content_same": false
        },
        {
          "line": 5873,
          "old_api": "IOSTATS",
          "new_api": "RecordTick",
          "old_text": "IOSTATS(bytes_read)",
          "new_text": "RecordTick(stats_, VERIFY_CHECKSUM_READ_BYTES,\n                   IOSTATS(bytes_read) - prev_bytes_read)",
          "old_line_content": "        prev_bytes_read = IOSTATS(bytes_read);",
          "new_line_content": "        RecordTick(stats_, VERIFY_CHECKSUM_READ_BYTES,",
          "content_same": false
        },
        {
          "line": 5880,
          "old_api": "assert",
          "new_api": "GetBlobFiles",
          "old_text": "assert(meta)",
          "new_text": "vstorage->GetBlobFiles()",
          "old_line_content": "        assert(meta);",
          "new_line_content": "      const auto& blob_files = vstorage->GetBlobFiles();",
          "content_same": false
        },
        {
          "line": 5882,
          "old_api": "GetBlobFileNumber",
          "new_api": "assert",
          "old_text": "meta->GetBlobFileNumber()",
          "new_text": "assert(meta)",
          "old_line_content": "        const uint64_t blob_file_number = meta->GetBlobFileNumber();",
          "new_line_content": "        assert(meta);",
          "content_same": false
        },
        {
          "line": 5884,
          "old_api": "front",
          "new_api": "GetBlobFileNumber",
          "old_text": "BlobFileName(\n            cfd->ioptions()->cf_paths.front().path, blob_file_number)",
          "new_text": "meta->GetBlobFileNumber()",
          "old_line_content": "        const std::string blob_file_name = BlobFileName(",
          "new_line_content": "        const uint64_t blob_file_number = meta->GetBlobFileNumber();",
          "content_same": false
        },
        {
          "line": 5886,
          "old_api": "GetChecksumValue",
          "new_api": "front",
          "old_text": "meta->GetChecksumValue()",
          "new_text": "BlobFileName(\n            cfd->ioptions()->cf_paths.front().path, blob_file_number)",
          "old_line_content": "        s = VerifyFullFileChecksum(meta->GetChecksumValue(),",
          "new_line_content": "        const std::string blob_file_name = BlobFileName(",
          "content_same": false
        },
        {
          "line": 5887,
          "old_api": "GetChecksumMethod",
          "new_api": "front",
          "old_text": "meta->GetChecksumMethod()",
          "new_text": "cfd->ioptions()->cf_paths.front()",
          "old_line_content": "                                   meta->GetChecksumMethod(), blob_file_name,",
          "new_line_content": "            cfd->ioptions()->cf_paths.front().path, blob_file_number);",
          "content_same": false
        },
        {
          "line": 5889,
          "old_api": "RecordTick",
          "new_api": "GetChecksumMethod",
          "old_text": "RecordTick(stats_, VERIFY_CHECKSUM_READ_BYTES,\n                   IOSTATS(bytes_read) - prev_bytes_read)",
          "new_text": "meta->GetChecksumMethod()",
          "old_line_content": "        RecordTick(stats_, VERIFY_CHECKSUM_READ_BYTES,",
          "new_line_content": "                                   meta->GetChecksumMethod(), blob_file_name,",
          "content_same": false
        },
        {
          "line": 5891,
          "old_api": "IOSTATS",
          "new_api": "RecordTick",
          "old_text": "IOSTATS(bytes_read)",
          "new_text": "RecordTick(stats_, VERIFY_CHECKSUM_READ_BYTES,\n                   IOSTATS(bytes_read) - prev_bytes_read)",
          "old_line_content": "        prev_bytes_read = IOSTATS(bytes_read);",
          "new_line_content": "        RecordTick(stats_, VERIFY_CHECKSUM_READ_BYTES,",
          "content_same": false
        },
        {
          "line": 5892,
          "old_api": "ok",
          "new_api": "IOSTATS",
          "old_text": "s.ok()",
          "new_text": "IOSTATS(bytes_read)",
          "old_line_content": "        if (!s.ok()) {",
          "new_line_content": "                   IOSTATS(bytes_read) - prev_bytes_read);",
          "content_same": false
        },
        {
          "line": 5909,
          "old_api": "AddSuperVersionsToFreeQueue",
          "new_api": "Cleanup",
          "old_text": "AddSuperVersionsToFreeQueue(sv)",
          "new_text": "sv->Cleanup()",
          "old_line_content": "          AddSuperVersionsToFreeQueue(sv);",
          "new_line_content": "        sv->Cleanup();",
          "content_same": false
        },
        {
          "line": 5949,
          "old_api": "ok",
          "new_api": "get",
          "old_text": "s.ok()",
          "new_text": "immutable_db_options_.rate_limiter.get()",
          "old_line_content": "  if (s.ok()) {",
          "new_line_content": "      io_tracer_, immutable_db_options_.rate_limiter.get(),",
          "content_same": false
        },
        {
          "line": 5957,
          "old_api": "str",
          "new_api": "ToString",
          "old_text": "oss.str()",
          "new_text": "Slice(file_checksum_expected).ToString(/*hex=*/true)",
          "old_line_content": "      s = Status::Corruption(oss.str());",
          "new_line_content": "          << Slice(file_checksum_expected).ToString(/*hex=*/true);",
          "content_same": false
        },
        {
          "line": 5958,
          "old_api": "TEST_SYNC_POINT_CALLBACK",
          "new_api": "ToString",
          "old_text": "TEST_SYNC_POINT_CALLBACK(\"DBImpl::VerifyFullFileChecksum:mismatch\", &s)",
          "new_text": "Slice(file_checksum).ToString(/*hex=*/true)",
          "old_line_content": "      TEST_SYNC_POINT_CALLBACK(\"DBImpl::VerifyFullFileChecksum:mismatch\", &s);",
          "new_line_content": "      oss << \", but actual \" << Slice(file_checksum).ToString(/*hex=*/true);",
          "content_same": false
        },
        {
          "line": 5972,
          "old_api": "GetName",
          "new_api": "files_to_ingest",
          "old_text": "cfd->GetName()",
          "new_text": "ingestion_job.files_to_ingest()",
          "old_line_content": "    info.cf_name = cfd->GetName();",
          "new_line_content": "  for (const IngestedFileInfo& f : ingestion_job.files_to_ingest()) {",
          "content_same": false
        },
        {
          "line": 5988,
          "old_api": "Status::OK()",
          "new_api": "reset",
          "old_text": "Status::OK()",
          "new_text": "tracer_.reset(new Tracer(immutable_db_options_.clock, trace_options,\n                           std::move(trace_writer)))",
          "old_line_content": "  return Status::OK();",
          "new_line_content": "  tracer_.reset(new Tracer(immutable_db_options_.clock, trace_options,",
          "content_same": false
        },
        {
          "line": 5998,
          "old_api": "Status::IOError(\"No trace file to close\")",
          "new_api": "reset",
          "old_text": "Status::IOError(\"No trace file to close\")",
          "new_text": "tracer_.reset()",
          "old_line_content": "    s = Status::IOError(\"No trace file to close\");",
          "new_line_content": "    tracer_.reset();",
          "content_same": false
        },
        {
          "line": 6024,
          "old_api": "StartTrace",
          "new_api": "std::move(trace_writer)",
          "old_text": "block_cache_tracer_.StartTrace(block_trace_opts,\n                                        std::move(block_cache_trace_writer))",
          "new_text": "std::move(trace_writer)",
          "old_line_content": "  return block_cache_tracer_.StartTrace(block_trace_opts,",
          "new_line_content": "                               std::move(trace_writer));",
          "content_same": false
        },
        {
          "line": 6075,
          "old_api": "IsDBStopped",
          "new_api": "assert",
          "old_text": "error_handler_.IsDBStopped()",
          "new_text": "assert(nullptr != next_file_number)",
          "old_line_content": "  if (error_handler_.IsDBStopped()) {",
          "new_line_content": "  assert(nullptr != next_file_number);",
          "content_same": false
        },
        {
          "line": 6077,
          "old_api": "GetBGError",
          "new_api": "IsDBStopped",
          "old_text": "error_handler_.GetBGError()",
          "new_text": "error_handler_.IsDBStopped()",
          "old_line_content": "    return error_handler_.GetBGError();",
          "new_line_content": "  if (error_handler_.IsDBStopped()) {",
          "content_same": false
        },
        {
          "line": 6079,
          "old_api": "reset",
          "new_api": "GetBGError",
          "old_text": "pending_output_elem.reset(new std::list<uint64_t>::iterator(\n      CaptureCurrentFileNumberInPendingOutputs()))",
          "new_text": "error_handler_.GetBGError()",
          "old_line_content": "  pending_output_elem.reset(new std::list<uint64_t>::iterator(",
          "new_line_content": "    return error_handler_.GetBGError();",
          "content_same": false
        },
        {
          "line": 6081,
          "old_api": "static_cast<uint64_t>(num)",
          "new_api": "reset",
          "old_text": "static_cast<uint64_t>(num)",
          "new_text": "pending_output_elem.reset(new std::list<uint64_t>::iterator(\n      CaptureCurrentFileNumberInPendingOutputs()))",
          "old_line_content": "  *next_file_number = versions_->FetchAddFileNumber(static_cast<uint64_t>(num));",
          "new_line_content": "  pending_output_elem.reset(new std::list<uint64_t>::iterator(",
          "content_same": false
        },
        {
          "line": 6082,
          "old_api": "GetLatestMutableCFOptions",
          "new_api": "CaptureCurrentFileNumberInPendingOutputs",
          "old_text": "cfd->GetLatestMutableCFOptions()",
          "new_text": "CaptureCurrentFileNumberInPendingOutputs()",
          "old_line_content": "  auto cf_options = cfd->GetLatestMutableCFOptions();",
          "new_line_content": "      CaptureCurrentFileNumberInPendingOutputs()));",
          "content_same": false
        },
        {
          "line": 6090,
          "old_api": "ok",
          "new_api": "GetDbDir",
          "old_text": "s.ok()",
          "new_text": "versions_->LogAndApply(cfd, *cf_options, read_options, &dummy_edit,\n                             &mutex_, directories_.GetDbDir())",
          "old_line_content": "  if (s.ok()) {",
          "new_line_content": "  s = versions_->LogAndApply(cfd, *cf_options, read_options, &dummy_edit,",
          "content_same": false
        },
        {
          "line": 6091,
          "old_api": "InstallSuperVersionAndScheduleWork",
          "new_api": "GetDbDir",
          "old_text": "InstallSuperVersionAndScheduleWork(cfd, &dummy_sv_ctx, *cf_options)",
          "new_text": "directories_.GetDbDir()",
          "old_line_content": "    InstallSuperVersionAndScheduleWork(cfd, &dummy_sv_ctx, *cf_options);",
          "new_line_content": "                             &mutex_, directories_.GetDbDir());",
          "content_same": false
        },
        {
          "line": 6093,
          "old_api": "Clean",
          "new_api": "InstallSuperVersionAndScheduleWork",
          "old_text": "dummy_sv_ctx.Clean()",
          "new_text": "InstallSuperVersionAndScheduleWork(cfd, &dummy_sv_ctx, *cf_options)",
          "old_line_content": "  dummy_sv_ctx.Clean();",
          "new_line_content": "    InstallSuperVersionAndScheduleWork(cfd, &dummy_sv_ctx, *cf_options);",
          "content_same": false
        },
        {
          "line": 6101,
          "old_api": "IsDropped",
          "new_api": "std::numeric_limits<uint64_t>::max()",
          "old_text": "cfd->IsDropped()",
          "new_text": "std::numeric_limits<uint64_t>::max()",
          "old_line_content": "      if (!cfd->IsDropped()) {",
          "new_line_content": "    uint64_t oldest_time = std::numeric_limits<uint64_t>::max();",
          "content_same": false
        },
        {
          "line": 6106,
          "old_api": "GetCreationTimeOfOldestFile",
          "new_api": "GetAndRefSuperVersion",
          "old_text": "version->GetCreationTimeOfOldestFile(&ctime)",
          "new_text": "GetAndRefSuperVersion(cfd)",
          "old_line_content": "          version->GetCreationTimeOfOldestFile(&ctime);",
          "new_line_content": "          SuperVersion* sv = GetAndRefSuperVersion(cfd);",
          "content_same": false
        },
        {
          "line": 6121,
          "old_api": "Status::NotSupported(\"This API only works if max_open_files = -1\")",
          "new_api": "Status::OK()",
          "old_text": "Status::NotSupported(\"This API only works if max_open_files = -1\")",
          "new_text": "Status::OK()",
          "old_line_content": "    return Status::NotSupported(\"This API only works if max_open_files = -1\");",
          "new_line_content": "    return Status::OK();",
          "content_same": false
        },
        {
          "line": 6131,
          "old_api": "GetLatestSequenceNumber",
          "new_api": "PermitUncheckedError",
          "old_text": "GetLatestSequenceNumber()",
          "new_text": "immutable_db_options_.clock->GetCurrentTime(&unix_time)\n      .PermitUncheckedError()",
          "old_line_content": "  SequenceNumber seqno = GetLatestSequenceNumber();",
          "new_line_content": "  immutable_db_options_.clock->GetCurrentTime(&unix_time)",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 4452,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "deleted_files.empty()",
          "old_line_content": "      }",
          "new_line_content": "    if (!deleted_files.empty()) {",
          "content_same": false
        },
        {
          "line": 4453,
          "old_api": null,
          "new_api": "ioptions",
          "old_text": null,
          "new_text": "cfd->ioptions()",
          "old_line_content": "    }",
          "new_line_content": "      vstorage->ComputeCompactionScore(*cfd->ioptions(),",
          "content_same": false
        },
        {
          "line": 4456,
          "old_api": null,
          "new_api": "GetDeletedFiles",
          "old_text": null,
          "new_text": "edit.GetDeletedFiles().empty()",
          "old_line_content": "      return status;",
          "new_line_content": "    if (edit.GetDeletedFiles().empty()) {",
          "content_same": false
        },
        {
          "line": 4457,
          "old_api": null,
          "new_api": "Clean",
          "old_text": null,
          "new_text": "job_context.Clean()",
          "old_line_content": "    }",
          "new_line_content": "      job_context.Clean();",
          "content_same": false
        },
        {
          "line": 4460,
          "old_api": null,
          "new_api": "Ref",
          "old_text": null,
          "new_text": "input_version->Ref()",
          "old_line_content": "                                    read_options, &edit, &mutex_,",
          "new_line_content": "    input_version->Ref();",
          "content_same": false
        },
        {
          "line": 4464,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "status.ok()",
          "old_line_content": "                                         &job_context.superversion_contexts[0],",
          "new_line_content": "    if (status.ok()) {",
          "content_same": false
        },
        {
          "line": 4467,
          "old_api": null,
          "new_api": "GetLatestMutableCFOptions",
          "old_text": null,
          "new_text": "cfd->GetLatestMutableCFOptions()",
          "old_line_content": "    for (auto* deleted_file : deleted_files) {",
          "new_line_content": "                                         *cfd->GetLatestMutableCFOptions());",
          "content_same": false
        },
        {
          "line": 4472,
          "old_api": null,
          "new_api": "Unref",
          "old_text": null,
          "new_text": "input_version->Unref()",
          "old_line_content": "  }  // lock released here",
          "new_line_content": "    input_version->Unref();",
          "content_same": false
        },
        {
          "line": 4473,
          "old_api": null,
          "new_api": "FindObsoleteFiles",
          "old_text": null,
          "new_text": "FindObsoleteFiles(&job_context, false)",
          "old_line_content": "",
          "new_line_content": "    FindObsoleteFiles(&job_context, false);",
          "content_same": false
        },
        {
          "line": 4482,
          "old_api": null,
          "new_api": "Clean",
          "old_text": null,
          "new_text": "job_context.Clean()",
          "old_line_content": "}",
          "new_line_content": "  job_context.Clean();",
          "content_same": false
        },
        {
          "line": 4488,
          "old_api": null,
          "new_api": "GetLiveFilesMetaData",
          "old_text": null,
          "new_text": "versions_->GetLiveFilesMetaData(metadata)",
          "old_line_content": "",
          "new_line_content": "  versions_->GetLiveFilesMetaData(metadata);",
          "content_same": false
        },
        {
          "line": 4493,
          "old_api": null,
          "new_api": "GetLiveFilesChecksumInfo",
          "old_text": null,
          "new_text": "versions_->GetLiveFilesChecksumInfo(checksum_list)",
          "old_line_content": "",
          "new_line_content": "  return versions_->GetLiveFilesChecksumInfo(checksum_list);",
          "content_same": false
        },
        {
          "line": 4500,
          "old_api": null,
          "new_api": "cfd",
          "old_text": null,
          "new_text": "static_cast_with_check<ColumnFamilyHandleImpl>(column_family)->cfd()",
          "old_line_content": "  {",
          "new_line_content": "      static_cast_with_check<ColumnFamilyHandleImpl>(column_family)->cfd();",
          "content_same": false
        },
        {
          "line": 4501,
          "old_api": null,
          "new_api": "GetAndRefSuperVersion",
          "old_text": null,
          "new_text": "GetAndRefSuperVersion(cfd)",
          "old_line_content": "    // Without mutex, Version::GetColumnFamilyMetaData will have data race with",
          "new_line_content": "  auto* sv = GetAndRefSuperVersion(cfd);",
          "content_same": false
        },
        {
          "line": 4515,
          "old_api": null,
          "new_api": "ReturnAndCleanupSuperVersion",
          "old_text": null,
          "new_text": "ReturnAndCleanupSuperVersion(cfd, sv)",
          "old_line_content": "",
          "new_line_content": "  ReturnAndCleanupSuperVersion(cfd, sv);",
          "content_same": false
        },
        {
          "line": 4523,
          "old_api": null,
          "new_api": "emplace_back",
          "old_text": null,
          "new_text": "metadata->emplace_back()",
          "old_line_content": "    }",
          "new_line_content": "      metadata->emplace_back();",
          "content_same": false
        },
        {
          "line": 4524,
          "old_api": null,
          "new_api": "back",
          "old_text": null,
          "new_text": "metadata->back()",
          "old_line_content": "  }",
          "new_line_content": "      cfd->current()->GetColumnFamilyMetaData(&metadata->back());",
          "content_same": false
        },
        {
          "line": 4532,
          "old_api": null,
          "new_api": "GetLiveFilesMetaData",
          "old_text": null,
          "new_text": "versions_->GetLiveFilesMetaData(&metadata)",
          "old_line_content": "",
          "new_line_content": "  versions_->GetLiveFilesMetaData(&metadata);",
          "content_same": false
        },
        {
          "line": 4533,
          "old_api": null,
          "new_api": "TEST_SYNC_POINT",
          "old_text": null,
          "new_text": "TEST_SYNC_POINT(\"DBImpl::CheckConsistency:AfterGetLiveFilesMetaData\")",
          "old_line_content": "  std::string corruption_messages;",
          "new_line_content": "  TEST_SYNC_POINT(\"DBImpl::CheckConsistency:AfterGetLiveFilesMetaData\");",
          "content_same": false
        },
        {
          "line": 4547,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "fname.empty()",
          "old_line_content": "      }",
          "new_line_content": "      if (!fname.empty() && fname[0] == '/') {",
          "content_same": false
        },
        {
          "line": 4550,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "files_by_directory[md.db_path].push_back(fname)",
          "old_line_content": "",
          "new_line_content": "      files_by_directory[md.db_path].push_back(fname);",
          "content_same": false
        },
        {
          "line": 4562,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "s.ToString()",
          "old_line_content": "      }",
          "new_line_content": "            \"Can't list files in \" + directory + \": \" + s.ToString() + \"\\n\";",
          "content_same": false
        },
        {
          "line": 4565,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "existing_files.end()",
          "old_line_content": "      for (const std::string& fname : dir_files.second) {",
          "new_line_content": "      std::sort(existing_files.begin(), existing_files.end());",
          "content_same": false
        },
        {
          "line": 4570,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "existing_files.end()",
          "old_line_content": "          corruption_messages +=",
          "new_line_content": "            !std::binary_search(existing_files.begin(), existing_files.end(),",
          "content_same": false
        },
        {
          "line": 4571,
          "old_api": null,
          "new_api": "Rocks2LevelTableFileName",
          "old_text": null,
          "new_text": "Rocks2LevelTableFileName(fname)",
          "old_line_content": "              \"Missing sst file \" + fname + \" in \" + directory + \"\\n\";",
          "new_line_content": "                                Rocks2LevelTableFileName(fname))) {",
          "content_same": false
        },
        {
          "line": 4586,
          "old_api": null,
          "new_api": "Rocks2LevelTableFileName",
          "old_text": null,
          "new_text": "Rocks2LevelTableFileName(file_path)",
          "old_line_content": "      }",
          "new_line_content": "          env_->GetFileSize(Rocks2LevelTableFileName(file_path), &fsize).ok()) {",
          "content_same": false
        },
        {
          "line": 4591,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "s.ToString()",
          "old_line_content": "        corruption_messages += \"Sst file size mismatch: \" + file_path +",
          "new_line_content": "            \"Can't access \" + md.name + \": \" + s.ToString() + \"\\n\";",
          "content_same": false
        },
        {
          "line": 4595,
          "old_api": null,
          "new_api": "std::to_string(md.size)",
          "old_text": null,
          "new_text": "std::to_string(md.size)",
          "old_line_content": "      }",
          "new_line_content": "                               std::to_string(md.size) + \", actual size \" +",
          "content_same": false
        },
        {
          "line": 4596,
          "old_api": null,
          "new_api": "std::to_string(fsize)",
          "old_text": null,
          "new_text": "std::to_string(fsize)",
          "old_line_content": "    }",
          "new_line_content": "                               std::to_string(fsize) + \"\\n\";",
          "content_same": false
        },
        {
          "line": 4601,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "corruption_messages.size()",
          "old_line_content": "  } else {",
          "new_line_content": "  if (corruption_messages.size() == 0) {",
          "content_same": false
        },
        {
          "line": 4604,
          "old_api": null,
          "new_api": "Status::Corruption(corruption_messages)",
          "old_text": null,
          "new_text": "Status::Corruption(corruption_messages)",
          "old_line_content": "}",
          "new_line_content": "    return Status::Corruption(corruption_messages);",
          "content_same": false
        },
        {
          "line": 4609,
          "old_api": null,
          "new_api": "assign",
          "old_text": null,
          "new_text": "identity.assign(db_id_)",
          "old_line_content": "}",
          "new_line_content": "  identity.assign(db_id_);",
          "content_same": false
        },
        {
          "line": 4610,
          "old_api": null,
          "new_api": "Status::OK()",
          "old_text": null,
          "new_text": "Status::OK()",
          "old_line_content": "",
          "new_line_content": "  return Status::OK();",
          "content_same": false
        },
        {
          "line": 4614,
          "old_api": null,
          "new_api": "IdentityFileName",
          "old_text": null,
          "new_text": "IdentityFileName(dbname_)",
          "old_line_content": "",
          "new_line_content": "  std::string idfilename = IdentityFileName(dbname_);",
          "content_same": false
        },
        {
          "line": 4617,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "fs_.get()",
          "old_line_content": "    return s;",
          "new_line_content": "  Status s = ReadFileToString(fs_.get(), idfilename, identity);",
          "content_same": false
        },
        {
          "line": 4618,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "s.ok()",
          "old_line_content": "  }",
          "new_line_content": "  if (!s.ok()) {",
          "content_same": false
        },
        {
          "line": 4624,
          "old_api": null,
          "new_api": "back",
          "old_text": null,
          "new_text": "identity->back()",
          "old_line_content": "  }",
          "new_line_content": "  if (identity->size() > 0 && identity->back() == '\\n') {",
          "content_same": false
        },
        {
          "line": 4625,
          "old_api": null,
          "new_api": "pop_back",
          "old_text": null,
          "new_text": "identity->pop_back()",
          "old_line_content": "  return s;",
          "new_line_content": "    identity->pop_back();",
          "content_same": false
        },
        {
          "line": 4631,
          "old_api": null,
          "new_api": "assign",
          "old_text": null,
          "new_text": "session_id.assign(db_session_id_)",
          "old_line_content": "}",
          "new_line_content": "  session_id.assign(db_session_id_);",
          "content_same": false
        },
        {
          "line": 4632,
          "old_api": null,
          "new_api": "Status::OK()",
          "old_text": null,
          "new_text": "Status::OK()",
          "old_line_content": "",
          "new_line_content": "  return Status::OK();",
          "content_same": false
        },
        {
          "line": 4642,
          "old_api": null,
          "new_api": "Reset",
          "old_text": null,
          "new_text": "DbSessionIdGen()->Reset()",
          "old_line_content": "std::string DBImpl::GenerateDbSessionId(Env*) {",
          "new_line_content": "void DBImpl::TEST_ResetDbSessionIdGen() { DbSessionIdGen()->Reset(); }",
          "content_same": false
        },
        {
          "line": 4646,
          "old_api": null,
          "new_api": "DbSessionIdGen",
          "old_text": null,
          "new_text": "DbSessionIdGen()",
          "old_line_content": "  uint64_t lo, hi;",
          "new_line_content": "  auto gen = DbSessionIdGen();",
          "content_same": false
        },
        {
          "line": 4649,
          "old_api": null,
          "new_api": "GenerateNext",
          "old_text": null,
          "new_text": "gen->GenerateNext(&hi, &lo)",
          "old_line_content": "    // Avoid emitting session ID with lo==0, so that SST unique",
          "new_line_content": "  gen->GenerateNext(&hi, &lo);",
          "content_same": false
        },
        {
          "line": 4653,
          "old_api": null,
          "new_api": "GenerateNext",
          "old_text": null,
          "new_text": "gen->GenerateNext(&hi, &lo)",
          "old_line_content": "  }",
          "new_line_content": "    gen->GenerateNext(&hi, &lo);",
          "content_same": false
        },
        {
          "line": 4656,
          "old_api": null,
          "new_api": "EncodeSessionId",
          "old_text": null,
          "new_text": "EncodeSessionId(hi, lo)",
          "old_line_content": "",
          "new_line_content": "  return EncodeSessionId(hi, lo);",
          "content_same": false
        },
        {
          "line": 4660,
          "old_api": null,
          "new_api": "GenerateDbSessionId",
          "old_text": null,
          "new_text": "GenerateDbSessionId(env_)",
          "old_line_content": "}",
          "new_line_content": "  db_session_id_ = GenerateDbSessionId(env_);",
          "content_same": false
        },
        {
          "line": 4661,
          "old_api": null,
          "new_api": "TEST_SYNC_POINT_CALLBACK",
          "old_text": null,
          "new_text": "TEST_SYNC_POINT_CALLBACK(\"DBImpl::SetDbSessionId\", &db_session_id_)",
          "old_line_content": "",
          "new_line_content": "  TEST_SYNC_POINT_CALLBACK(\"DBImpl::SetDbSessionId\", &db_session_id_);",
          "content_same": false
        },
        {
          "line": 4668,
          "old_api": null,
          "new_api": "Status::NotSupported(\"\")",
          "old_text": null,
          "new_text": "Status::NotSupported(\"\")",
          "old_line_content": "",
          "new_line_content": "  return Status::NotSupported(\"\");",
          "content_same": false
        },
        {
          "line": 4675,
          "old_api": null,
          "new_api": "Status::NotSupported(\"\")",
          "old_text": null,
          "new_text": "Status::NotSupported(\"\")",
          "old_line_content": "",
          "new_line_content": "  return Status::NotSupported(\"\");",
          "content_same": false
        },
        {
          "line": 4681,
          "old_api": null,
          "new_api": "Status::NotSupported(\"\")",
          "old_text": null,
          "new_text": "Status::NotSupported(\"\")",
          "old_line_content": "",
          "new_line_content": "  return Status::NotSupported(\"\");",
          "content_same": false
        },
        {
          "line": 4685,
          "old_api": null,
          "new_api": "Status::NotSupported(\"\")",
          "old_text": null,
          "new_text": "Status::NotSupported(\"\")",
          "old_line_content": "",
          "new_line_content": "  return Status::NotSupported(\"\");",
          "content_same": false
        },
        {
          "line": 4690,
          "old_api": null,
          "new_api": "Status::NotSupported(\"\")",
          "old_text": null,
          "new_text": "Status::NotSupported(\"\")",
          "old_line_content": "",
          "new_line_content": "  return Status::NotSupported(\"\");",
          "content_same": false
        },
        {
          "line": 4694,
          "old_api": null,
          "new_api": "DefaultColumnFamily",
          "old_text": null,
          "new_text": "DefaultColumnFamily()",
          "old_line_content": "        \"Cannot destroy the handle returned by DefaultColumnFamily()\");",
          "new_line_content": "  if (DefaultColumnFamily() == column_family) {",
          "content_same": false
        },
        {
          "line": 4695,
          "old_api": null,
          "new_api": "Status::InvalidArgument(\n        \"Cannot destroy the handle returned by DefaultColumnFamily()\")",
          "old_text": null,
          "new_text": "Status::InvalidArgument(\n        \"Cannot destroy the handle returned by DefaultColumnFamily()\")",
          "old_line_content": "  }",
          "new_line_content": "    return Status::InvalidArgument(",
          "content_same": false
        },
        {
          "line": 4699,
          "old_api": null,
          "new_api": "Status::OK()",
          "old_text": null,
          "new_text": "Status::OK()",
          "old_line_content": "",
          "new_line_content": "  return Status::OK();",
          "content_same": false
        },
        {
          "line": 4711,
          "old_api": null,
          "new_api": "MaybeReleaseTimestampedSnapshotsAndCheck",
          "old_text": null,
          "new_text": "MaybeReleaseTimestampedSnapshotsAndCheck()",
          "old_line_content": "      return s;",
          "new_line_content": "    const Status s = MaybeReleaseTimestampedSnapshotsAndCheck();",
          "content_same": false
        },
        {
          "line": 4712,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "s.ok()",
          "old_line_content": "    }",
          "new_line_content": "    if (!s.ok()) {",
          "content_same": false
        },
        {
          "line": 4717,
          "old_api": null,
          "new_api": "CloseImpl",
          "old_text": null,
          "new_text": "CloseImpl()",
          "old_line_content": "  return closing_status_;",
          "new_line_content": "  closing_status_ = CloseImpl();",
          "content_same": false
        },
        {
          "line": 4725,
          "old_api": null,
          "new_api": "GetFileSystem",
          "old_text": null,
          "new_text": "db_options.env->GetFileSystem()",
          "old_line_content": "}",
          "new_line_content": "  const std::shared_ptr<FileSystem>& fs = db_options.env->GetFileSystem();",
          "content_same": false
        },
        {
          "line": 4726,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "fs.get()",
          "old_line_content": "",
          "new_line_content": "  return VersionSet::ListColumnFamilies(column_families, name, fs.get());",
          "content_same": false
        },
        {
          "line": 4736,
          "old_api": null,
          "new_api": "IsWalDirSameAsDBPath",
          "old_text": null,
          "new_text": "soptions.IsWalDirSameAsDBPath()",
          "old_line_content": "  // Reset the logger because it holds a handle to the",
          "new_line_content": "  bool wal_in_db_path = soptions.IsWalDirSameAsDBPath();",
          "content_same": false
        },
        {
          "line": 4740,
          "old_api": null,
          "new_api": "reset",
          "old_text": null,
          "new_text": "soptions.info_log.reset()",
          "old_line_content": "  // Ignore error in case directory does not exist",
          "new_line_content": "  soptions.info_log.reset();",
          "content_same": false
        },
        {
          "line": 4743,
          "old_api": null,
          "new_api": "PermitUncheckedError",
          "old_text": null,
          "new_text": "soptions.fs\n      ->GetChildren(dbname, io_opts, &filenames,\n                    /*IODebugContext*=*/nullptr)\n      .PermitUncheckedError()",
          "old_line_content": "                    /*IODebugContext*=*/nullptr)",
          "new_line_content": "  soptions.fs",
          "content_same": false
        },
        {
          "line": 4750,
          "old_api": null,
          "new_api": "LockFile",
          "old_text": null,
          "new_text": "env->LockFile(lockname, &lock)",
          "old_line_content": "    uint64_t number;",
          "new_line_content": "  Status result = env->LockFile(lockname, &lock);",
          "content_same": false
        },
        {
          "line": 4751,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "result.ok()",
          "old_line_content": "    FileType type;",
          "new_line_content": "  if (result.ok()) {",
          "content_same": false
        },
        {
          "line": 4756,
          "old_api": null,
          "new_api": "ParseFileName",
          "old_text": null,
          "new_text": "ParseFileName(fname, &number, info_log_prefix.prefix, &type)",
          "old_line_content": "        Status del;",
          "new_line_content": "      if (ParseFileName(fname, &number, info_log_prefix.prefix, &type) &&",
          "content_same": false
        },
        {
          "line": 4761,
          "old_api": null,
          "new_api": "DestroyDB",
          "old_text": null,
          "new_text": "DestroyDB(path_to_delete, options)",
          "old_line_content": "                   type == kBlobFile) {",
          "new_line_content": "          del = DestroyDB(path_to_delete, options);",
          "content_same": false
        },
        {
          "line": 4764,
          "old_api": null,
          "new_api": "DeleteDBFile",
          "old_text": null,
          "new_text": "DeleteDBFile(\n              &soptions, path_to_delete, dbname,\n              /*force_bg=*/false,\n              /*force_fg=*/(type == kWalFile) ? !wal_in_db_path : false)",
          "old_line_content": "              /*force_bg=*/false,",
          "new_line_content": "          del = DeleteDBFile(",
          "content_same": false
        },
        {
          "line": 4771,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "result.ok()",
          "old_line_content": "        }",
          "new_line_content": "        if (!del.ok() && result.ok()) {",
          "content_same": false
        },
        {
          "line": 4779,
          "old_api": null,
          "new_api": "insert",
          "old_text": null,
          "new_text": "paths.insert(db_path.path)",
          "old_line_content": "    for (const ColumnFamilyDescriptor& cf : column_families) {",
          "new_line_content": "      paths.insert(db_path.path);",
          "content_same": false
        },
        {
          "line": 4783,
          "old_api": null,
          "new_api": "insert",
          "old_text": null,
          "new_text": "paths.insert(cf_path.path)",
          "old_line_content": "    }",
          "new_line_content": "        paths.insert(cf_path.path);",
          "content_same": false
        },
        {
          "line": 4788,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "soptions.fs\n              ->GetChildren(path, io_opts, &filenames,\n                            /*IODebugContext*=*/nullptr)\n              .ok()",
          "old_line_content": "                            /*IODebugContext*=*/nullptr)",
          "new_line_content": "      if (soptions.fs",
          "content_same": false
        },
        {
          "line": 4793,
          "old_api": null,
          "new_api": "ParseFileName",
          "old_text": null,
          "new_text": "ParseFileName(fname, &number, &type)",
          "old_line_content": "               type == kBlobFile)) {  // Lock file will be deleted at end",
          "new_line_content": "          if (ParseFileName(fname, &number, &type) &&",
          "content_same": false
        },
        {
          "line": 4799,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "result.ok()",
          "old_line_content": "            }",
          "new_line_content": "            if (!del.ok() && result.ok()) {",
          "content_same": false
        },
        {
          "line": 4805,
          "old_api": null,
          "new_api": "PermitUncheckedError",
          "old_text": null,
          "new_text": "env->DeleteDir(path).PermitUncheckedError()",
          "old_line_content": "    }",
          "new_line_content": "        env->DeleteDir(path).PermitUncheckedError();",
          "content_same": false
        },
        {
          "line": 4814,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "soptions.fs\n              ->GetChildren(soptions.wal_dir, io_opts, &walDirFiles,\n                            /*IODebugContext*=*/nullptr)\n              .ok()",
          "old_line_content": "                            /*IODebugContext*=*/nullptr)",
          "new_line_content": "          soptions.fs",
          "content_same": false
        },
        {
          "line": 4818,
          "old_api": null,
          "new_api": "ArchivalDirectory",
          "old_text": null,
          "new_text": "ArchivalDirectory(soptions.wal_dir)",
          "old_line_content": "",
          "new_line_content": "      archivedir = ArchivalDirectory(soptions.wal_dir);",
          "content_same": false
        },
        {
          "line": 4825,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "soptions.fs\n            ->GetChildren(archivedir, io_opts, &archiveFiles,\n                          /*IODebugContext*=*/nullptr)\n            .ok()",
          "old_line_content": "                          /*IODebugContext*=*/nullptr)",
          "new_line_content": "    if (soptions.fs",
          "content_same": false
        },
        {
          "line": 4835,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "result.ok()",
          "old_line_content": "          }",
          "new_line_content": "          if (!del.ok() && result.ok()) {",
          "content_same": false
        },
        {
          "line": 4841,
          "old_api": null,
          "new_api": "PermitUncheckedError",
          "old_text": null,
          "new_text": "env->DeleteDir(archivedir).PermitUncheckedError()",
          "old_line_content": "",
          "new_line_content": "      env->DeleteDir(archivedir).PermitUncheckedError();",
          "content_same": false
        },
        {
          "line": 4849,
          "old_api": null,
          "new_api": "LogFileName",
          "old_text": null,
          "new_text": "LogFileName(soptions.wal_dir, number)",
          "old_line_content": "                           /*force_fg=*/!wal_in_db_path);",
          "new_line_content": "              DeleteDBFile(&soptions, LogFileName(soptions.wal_dir, number),",
          "content_same": false
        },
        {
          "line": 4852,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "result.ok()",
          "old_line_content": "          }",
          "new_line_content": "          if (!del.ok() && result.ok()) {",
          "content_same": false
        },
        {
          "line": 4858,
          "old_api": null,
          "new_api": "PermitUncheckedError",
          "old_text": null,
          "new_text": "env->DeleteDir(soptions.wal_dir).PermitUncheckedError()",
          "old_line_content": "",
          "new_line_content": "      env->DeleteDir(soptions.wal_dir).PermitUncheckedError();",
          "content_same": false
        },
        {
          "line": 4862,
          "old_api": null,
          "new_api": "PermitUncheckedError",
          "old_text": null,
          "new_text": "env->UnlockFile(lock).PermitUncheckedError()",
          "old_line_content": "",
          "new_line_content": "    env->UnlockFile(lock).PermitUncheckedError();",
          "content_same": false
        },
        {
          "line": 4863,
          "old_api": null,
          "new_api": "PermitUncheckedError",
          "old_text": null,
          "new_text": "env->DeleteFile(lockname).PermitUncheckedError()",
          "old_line_content": "    // sst_file_manager holds a ref to the logger. Make sure the logger is",
          "new_line_content": "    env->DeleteFile(lockname).PermitUncheckedError();",
          "content_same": false
        },
        {
          "line": 4867,
          "old_api": null,
          "new_api": "reset",
          "old_text": null,
          "new_text": "soptions.sst_file_manager.reset()",
          "old_line_content": "    // Ignore error in case dir contains other files",
          "new_line_content": "    soptions.sst_file_manager.reset();",
          "content_same": false
        },
        {
          "line": 4870,
          "old_api": null,
          "new_api": "PermitUncheckedError",
          "old_text": null,
          "new_text": "env->DeleteDir(dbname).PermitUncheckedError()",
          "old_line_content": "  }",
          "new_line_content": "    env->DeleteDir(dbname).PermitUncheckedError();",
          "content_same": false
        },
        {
          "line": 4882,
          "old_api": null,
          "new_api": "AssertHeld",
          "old_text": null,
          "new_text": "mutex_.AssertHeld()",
          "old_line_content": "  if (need_enter_write_thread) {",
          "new_line_content": "    mutex_.AssertHeld();",
          "content_same": false
        },
        {
          "line": 4885,
          "old_api": null,
          "new_api": "EnterUnbatched",
          "old_text": null,
          "new_text": "write_thread_.EnterUnbatched(&w, &mutex_)",
          "old_line_content": "",
          "new_line_content": "    write_thread_.EnterUnbatched(&w, &mutex_);",
          "content_same": false
        },
        {
          "line": 4892,
          "old_api": null,
          "new_api": "GetColumnFamilySet",
          "old_text": null,
          "new_text": "versions_->GetColumnFamilySet()",
          "old_line_content": "      continue;",
          "new_line_content": "  for (auto cfd : *versions_->GetColumnFamilySet()) {",
          "content_same": false
        },
        {
          "line": 4893,
          "old_api": null,
          "new_api": "IsDropped",
          "old_text": null,
          "new_text": "cfd->IsDropped()",
          "old_line_content": "    }",
          "new_line_content": "    if (cfd->IsDropped()) {",
          "content_same": false
        },
        {
          "line": 4896,
          "old_api": null,
          "new_api": "GetName",
          "old_text": null,
          "new_text": "cfd->GetName()",
          "old_line_content": "  }",
          "new_line_content": "    cf_names.push_back(cfd->GetName());",
          "content_same": false
        },
        {
          "line": 4897,
          "old_api": null,
          "new_api": "GetLatestCFOptions",
          "old_text": null,
          "new_text": "cfd->GetLatestCFOptions()",
          "old_line_content": "",
          "new_line_content": "    cf_opts.push_back(cfd->GetLatestCFOptions());",
          "content_same": false
        },
        {
          "line": 4903,
          "old_api": null,
          "new_api": "BuildDBOptions",
          "old_text": null,
          "new_text": "BuildDBOptions(immutable_db_options_, mutable_db_options_)",
          "old_line_content": "",
          "new_line_content": "      BuildDBOptions(immutable_db_options_, mutable_db_options_);",
          "content_same": false
        },
        {
          "line": 4907,
          "old_api": null,
          "new_api": "TEST_SYNC_POINT",
          "old_text": null,
          "new_text": "TEST_SYNC_POINT(\"DBImpl::WriteOptionsFile:2\")",
          "old_line_content": "                           &db_options);",
          "new_line_content": "  TEST_SYNC_POINT(\"DBImpl::WriteOptionsFile:2\");",
          "content_same": false
        },
        {
          "line": 4908,
          "old_api": null,
          "new_api": "TEST_SYNC_POINT_CALLBACK",
          "old_text": null,
          "new_text": "TEST_SYNC_POINT_CALLBACK(\"DBImpl::WriteOptionsFile:PersistOptions\",\n                           &db_options)",
          "old_line_content": "",
          "new_line_content": "  TEST_SYNC_POINT_CALLBACK(\"DBImpl::WriteOptionsFile:PersistOptions\",",
          "content_same": false
        },
        {
          "line": 4913,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "PersistRocksDBOptions(db_options, cf_names, cf_opts, file_name,\n                                   fs_.get())",
          "old_line_content": "",
          "new_line_content": "  Status s = PersistRocksDBOptions(db_options, cf_names, cf_opts, file_name,",
          "content_same": false
        },
        {
          "line": 4916,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "s.ok()",
          "old_line_content": "  }",
          "new_line_content": "  if (s.ok()) {",
          "content_same": false
        },
        {
          "line": 4917,
          "old_api": null,
          "new_api": "RenameTempFileToOptionsFile",
          "old_text": null,
          "new_text": "RenameTempFileToOptionsFile(file_name)",
          "old_line_content": "",
          "new_line_content": "    s = RenameTempFileToOptionsFile(file_name);",
          "content_same": false
        },
        {
          "line": 4921,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "GetEnv()->DeleteFile(file_name).ok()",
          "old_line_content": "                     \"Unable to delete temp options file %s\",",
          "new_line_content": "    if (!GetEnv()->DeleteFile(file_name).ok()) {",
          "content_same": false
        },
        {
          "line": 4924,
          "old_api": null,
          "new_api": "c_str",
          "old_text": null,
          "new_text": "file_name.c_str()",
          "old_line_content": "  }",
          "new_line_content": "                     file_name.c_str());",
          "content_same": false
        },
        {
          "line": 4930,
          "old_api": null,
          "new_api": "Lock",
          "old_text": null,
          "new_text": "mutex_.Lock()",
          "old_line_content": "  if (need_enter_write_thread) {",
          "new_line_content": "    mutex_.Lock();",
          "content_same": false
        },
        {
          "line": 4936,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "ROCKS_LOG_WARN(immutable_db_options_.info_log,\n                   \"Unnable to persist options -- %s\", s.ToString().c_str())",
          "old_line_content": "    if (immutable_db_options_.fail_if_options_file_error) {",
          "new_line_content": "    ROCKS_LOG_WARN(immutable_db_options_.info_log,",
          "content_same": false
        },
        {
          "line": 4939,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "Status::IOError(\"Unable to persist options.\",\n                             s.ToString().c_str())",
          "old_line_content": "    }",
          "new_line_content": "      return Status::IOError(\"Unable to persist options.\",",
          "content_same": false
        },
        {
          "line": 4940,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "s.ToString().c_str()",
          "old_line_content": "  }",
          "new_line_content": "                             s.ToString().c_str());",
          "content_same": false
        },
        {
          "line": 4943,
          "old_api": null,
          "new_api": "Status::OK()",
          "old_text": null,
          "new_text": "Status::OK()",
          "old_line_content": "",
          "new_line_content": "  return Status::OK();",
          "content_same": false
        },
        {
          "line": 4951,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "filenames.size()",
          "old_line_content": "  }",
          "new_line_content": "  if (filenames.size() <= num_files_to_keep) {",
          "content_same": false
        },
        {
          "line": 4957,
          "old_api": null,
          "new_api": "c_str",
          "old_text": null,
          "new_text": "ROCKS_LOG_WARN(info_log, \"Unable to delete options file %s\",\n                     iter->second.c_str())",
          "old_line_content": "    }",
          "new_line_content": "      ROCKS_LOG_WARN(info_log, \"Unable to delete options file %s\",",
          "content_same": false
        },
        {
          "line": 4958,
          "old_api": null,
          "new_api": "c_str",
          "old_text": null,
          "new_text": "iter->second.c_str()",
          "old_line_content": "  }",
          "new_line_content": "                     iter->second.c_str());",
          "content_same": false
        },
        {
          "line": 4974,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "s.ok()",
          "old_line_content": "  }",
          "new_line_content": "  if (!s.ok()) {",
          "content_same": false
        },
        {
          "line": 4982,
          "old_api": null,
          "new_api": "std::numeric_limits<uint64_t>::max()",
          "old_text": null,
          "new_text": "std::numeric_limits<uint64_t>::max()",
          "old_line_content": "    }",
          "new_line_content": "          {std::numeric_limits<uint64_t>::max() - file_number,",
          "content_same": false
        },
        {
          "line": 4983,
          "old_api": null,
          "new_api": "GetName",
          "old_text": null,
          "new_text": "GetName()",
          "old_line_content": "  }",
          "new_line_content": "           GetName() + \"/\" + filename});",
          "content_same": false
        },
        {
          "line": 4990,
          "old_api": null,
          "new_api": "GetEnv",
          "old_text": null,
          "new_text": "GetEnv()",
          "old_line_content": "}",
          "new_line_content": "                           immutable_db_options_.info_log, GetEnv());",
          "content_same": false
        },
        {
          "line": 4991,
          "old_api": null,
          "new_api": "Status::OK()",
          "old_text": null,
          "new_text": "Status::OK()",
          "old_line_content": "",
          "new_line_content": "  return Status::OK();",
          "content_same": false
        },
        {
          "line": 5001,
          "old_api": null,
          "new_api": "GetFileSize",
          "old_text": null,
          "new_text": "GetEnv()->GetFileSize(file_name, &options_file_size)",
          "old_line_content": "    // Retry if the file name happen to conflict with an existing one.",
          "new_line_content": "  s = GetEnv()->GetFileSize(file_name, &options_file_size);",
          "content_same": false
        },
        {
          "line": 5006,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "s.ok()",
          "old_line_content": "    }",
          "new_line_content": "    if (s.ok()) {",
          "content_same": false
        },
        {
          "line": 5010,
          "old_api": null,
          "new_api": "IOOptions",
          "old_text": null,
          "new_text": "IOOptions()",
          "old_line_content": "    }",
          "new_line_content": "      s = dir_obj->FsyncWithDirOptions(IOOptions(), nullptr,",
          "content_same": false
        },
        {
          "line": 5013,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "s.ok()",
          "old_line_content": "      // The default Close() could return \"NotSupproted\" and we bypass it",
          "new_line_content": "    if (s.ok()) {",
          "content_same": false
        },
        {
          "line": 5014,
          "old_api": null,
          "new_api": "IOOptions",
          "old_text": null,
          "new_text": "IOOptions()",
          "old_line_content": "      // if it is not impelmented. Detailed explanations can be found in",
          "new_line_content": "      Status temp_s = dir_obj->Close(IOOptions(), nullptr);",
          "content_same": false
        },
        {
          "line": 5019,
          "old_api": null,
          "new_api": "IsNotSupported",
          "old_text": null,
          "new_text": "temp_s.IsNotSupported()",
          "old_line_content": "        } else {",
          "new_line_content": "        if (temp_s.IsNotSupported()) {",
          "content_same": false
        },
        {
          "line": 5020,
          "old_api": null,
          "new_api": "PermitUncheckedError",
          "old_text": null,
          "new_text": "temp_s.PermitUncheckedError()",
          "old_line_content": "          s = temp_s;",
          "new_line_content": "          temp_s.PermitUncheckedError();",
          "content_same": false
        },
        {
          "line": 5027,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "s.ok()",
          "old_line_content": "    versions_->options_file_number_ = options_file_number;",
          "new_line_content": "  if (s.ok()) {",
          "content_same": false
        },
        {
          "line": 5035,
          "old_api": null,
          "new_api": "PermitUncheckedError",
          "old_text": null,
          "new_text": "DeleteObsoleteOptionsFiles().PermitUncheckedError()",
          "old_line_content": "  return s;",
          "new_line_content": "    DeleteObsoleteOptionsFiles().PermitUncheckedError();",
          "content_same": false
        },
        {
          "line": 5044,
          "old_api": null,
          "new_api": "GetName",
          "old_text": null,
          "new_text": "cfd->GetName()",
          "old_line_content": "  }",
          "new_line_content": "    ThreadStatusUtil::NewColumnFamilyInfo(this, cfd, cfd->GetName(),",
          "content_same": false
        },
        {
          "line": 5045,
          "old_api": null,
          "new_api": "ioptions",
          "old_text": null,
          "new_text": "cfd->ioptions()",
          "old_line_content": "}",
          "new_line_content": "                                          cfd->ioptions()->env);",
          "content_same": false
        },
        {
          "line": 5051,
          "old_api": null,
          "new_api": "ThreadStatusUtil::EraseColumnFamilyInfo(cfd)",
          "old_text": null,
          "new_text": "ThreadStatusUtil::EraseColumnFamilyInfo(cfd)",
          "old_line_content": "}",
          "new_line_content": "    ThreadStatusUtil::EraseColumnFamilyInfo(cfd);",
          "content_same": false
        },
        {
          "line": 5057,
          "old_api": null,
          "new_api": "ThreadStatusUtil::EraseDatabaseInfo(this)",
          "old_text": null,
          "new_text": "ThreadStatusUtil::EraseDatabaseInfo(this)",
          "old_line_content": "}",
          "new_line_content": "    ThreadStatusUtil::EraseDatabaseInfo(this);",
          "content_same": false
        },
        {
          "line": 5076,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "props.end()",
          "old_line_content": "  }",
          "new_line_content": "  if (sha != props.end()) {",
          "content_same": false
        },
        {
          "line": 5080,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "props.end()",
          "old_line_content": "  }",
          "new_line_content": "  if (date != props.end()) {",
          "content_same": false
        },
        {
          "line": 5081,
          "old_api": null,
          "new_api": "c_str",
          "old_text": null,
          "new_text": "date->second.c_str()",
          "old_line_content": "}",
          "new_line_content": "    ROCKS_LOG_HEADER(log, \"Compile date %s\", date->second.c_str());",
          "content_same": false
        },
        {
          "line": 5094,
          "old_api": null,
          "new_api": "GetEarliestSequenceNumber",
          "old_text": null,
          "new_text": "sv->mem->GetEarliestSequenceNumber()",
          "old_line_content": "  return earliest_seq;",
          "new_line_content": "  assert(sv->mem->GetEarliestSequenceNumber() >= earliest_seq);",
          "content_same": false
        },
        {
          "line": 5109,
          "old_api": null,
          "new_api": "LastSequence",
          "old_text": null,
          "new_text": "versions_->LastSequence()",
          "old_line_content": "  ColumnFamilyData* cfd = sv->cfd;",
          "new_line_content": "  SequenceNumber current_seq = versions_->LastSequence();",
          "content_same": false
        },
        {
          "line": 5114,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(ucmp)",
          "old_line_content": "  std::string ts_buf;",
          "new_line_content": "  assert(ucmp);",
          "content_same": false
        },
        {
          "line": 5115,
          "old_api": null,
          "new_api": "timestamp_size",
          "old_text": null,
          "new_text": "ucmp->timestamp_size()",
          "old_line_content": "  if (ts_sz > 0) {",
          "new_line_content": "  size_t ts_sz = ucmp->timestamp_size();",
          "content_same": false
        },
        {
          "line": 5118,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(timestamp)",
          "old_line_content": "  } else {",
          "new_line_content": "    assert(timestamp);",
          "content_same": false
        },
        {
          "line": 5121,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(!timestamp)",
          "old_line_content": "  Slice ts(ts_buf);",
          "new_line_content": "    assert(!timestamp);",
          "content_same": false
        },
        {
          "line": 5131,
          "old_api": null,
          "new_api": "Get",
          "old_text": null,
          "new_text": "sv->mem->Get(lkey, /*value=*/nullptr, /*columns=*/nullptr, timestamp, &s,\n               &merge_context, &max_covering_tombstone_seq, seq, read_options,\n               false /* immutable_memtable */, nullptr /*read_callback*/,\n               is_blob_index)",
          "old_line_content": "               false /* immutable_memtable */, nullptr /*read_callback*/,",
          "new_line_content": "  sv->mem->Get(lkey, /*value=*/nullptr, /*columns=*/nullptr, timestamp, &s,",
          "content_same": false
        },
        {
          "line": 5140,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "s.ToString().c_str()",
          "old_line_content": "    return s;",
          "new_line_content": "                    s.ToString().c_str());",
          "content_same": false
        },
        {
          "line": 5146,
          "old_api": null,
          "new_api": "std::string(ts_sz, '\\xff')",
          "old_text": null,
          "new_text": "std::string(ts_sz, '\\xff')",
          "old_line_content": "",
          "new_line_content": "          *timestamp != std::string(ts_sz, '\\xff')) ||",
          "content_same": false
        },
        {
          "line": 5149,
          "old_api": null,
          "new_api": "TEST_SYNC_POINT_CALLBACK",
          "old_text": null,
          "new_text": "TEST_SYNC_POINT_CALLBACK(\"DBImpl::GetLatestSequenceForKey:mem\", timestamp)",
          "old_line_content": "  if (*seq != kMaxSequenceNumber) {",
          "new_line_content": "  TEST_SYNC_POINT_CALLBACK(\"DBImpl::GetLatestSequenceForKey:mem\", timestamp);",
          "content_same": false
        },
        {
          "line": 5154,
          "old_api": null,
          "new_api": "Status::OK()",
          "old_text": null,
          "new_text": "Status::OK()",
          "old_line_content": "",
          "new_line_content": "    return Status::OK();",
          "content_same": false
        },
        {
          "line": 5157,
          "old_api": null,
          "new_api": "GetEarliestSequenceNumber",
          "old_text": null,
          "new_text": "sv->mem->GetEarliestSequenceNumber()",
          "old_line_content": "      lower_bound_in_mem < lower_bound_seq) {",
          "new_line_content": "  SequenceNumber lower_bound_in_mem = sv->mem->GetEarliestSequenceNumber();",
          "content_same": false
        },
        {
          "line": 5161,
          "old_api": null,
          "new_api": "Status::OK()",
          "old_text": null,
          "new_text": "Status::OK()",
          "old_line_content": "",
          "new_line_content": "    return Status::OK();",
          "content_same": false
        },
        {
          "line": 5165,
          "old_api": null,
          "new_api": "Get",
          "old_text": null,
          "new_text": "sv->imm->Get(lkey, /*value=*/nullptr, /*columns=*/nullptr, timestamp, &s,\n               &merge_context, &max_covering_tombstone_seq, seq, read_options,\n               nullptr /*read_callback*/, is_blob_index)",
          "old_line_content": "               nullptr /*read_callback*/, is_blob_index);",
          "new_line_content": "  sv->imm->Get(lkey, /*value=*/nullptr, /*columns=*/nullptr, timestamp, &s,",
          "content_same": false
        },
        {
          "line": 5173,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "s.ToString().c_str()",
          "old_line_content": "    return s;",
          "new_line_content": "                    s.ToString().c_str());",
          "content_same": false
        },
        {
          "line": 5180,
          "old_api": null,
          "new_api": "std::string(ts_sz, '\\xff')",
          "old_text": null,
          "new_text": "std::string(ts_sz, '\\xff')",
          "old_line_content": "",
          "new_line_content": "          *timestamp != std::string(ts_sz, '\\xff')) ||",
          "content_same": false
        },
        {
          "line": 5181,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "timestamp->empty()",
          "old_line_content": "  if (*seq != kMaxSequenceNumber) {",
          "new_line_content": "         (*seq == kMaxSequenceNumber && timestamp->empty()));",
          "content_same": false
        },
        {
          "line": 5186,
          "old_api": null,
          "new_api": "Status::OK()",
          "old_text": null,
          "new_text": "Status::OK()",
          "old_line_content": "",
          "new_line_content": "    return Status::OK();",
          "content_same": false
        },
        {
          "line": 5189,
          "old_api": null,
          "new_api": "GetEarliestSequenceNumber",
          "old_text": null,
          "new_text": "sv->imm->GetEarliestSequenceNumber()",
          "old_line_content": "      lower_bound_in_imm < lower_bound_seq) {",
          "new_line_content": "  SequenceNumber lower_bound_in_imm = sv->imm->GetEarliestSequenceNumber();",
          "content_same": false
        },
        {
          "line": 5193,
          "old_api": null,
          "new_api": "Status::OK()",
          "old_text": null,
          "new_text": "Status::OK()",
          "old_line_content": "",
          "new_line_content": "    return Status::OK();",
          "content_same": false
        },
        {
          "line": 5197,
          "old_api": null,
          "new_api": "GetFromHistory",
          "old_text": null,
          "new_text": "sv->imm->GetFromHistory(lkey, /*value=*/nullptr, /*columns=*/nullptr,\n                          timestamp, &s, &merge_context,\n                          &max_covering_tombstone_seq, seq, read_options,\n                          is_blob_index)",
          "old_line_content": "                          &max_covering_tombstone_seq, seq, read_options,",
          "new_line_content": "  sv->imm->GetFromHistory(lkey, /*value=*/nullptr, /*columns=*/nullptr,",
          "content_same": false
        },
        {
          "line": 5204,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "ROCKS_LOG_ERROR(\n        immutable_db_options_.info_log,\n        \"Unexpected status returned from MemTableList::GetFromHistory: %s\\n\",\n        s.ToString().c_str())",
          "old_line_content": "        \"Unexpected status returned from MemTableList::GetFromHistory: %s\\n\",",
          "new_line_content": "    ROCKS_LOG_ERROR(",
          "content_same": false
        },
        {
          "line": 5207,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "s.ToString().c_str()",
          "old_line_content": "    return s;",
          "new_line_content": "        s.ToString().c_str());",
          "content_same": false
        },
        {
          "line": 5214,
          "old_api": null,
          "new_api": "std::string(ts_sz, '\\xff')",
          "old_text": null,
          "new_text": "std::string(ts_sz, '\\xff')",
          "old_line_content": "",
          "new_line_content": "          *timestamp != std::string(ts_sz, '\\xff')) ||",
          "content_same": false
        },
        {
          "line": 5215,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "timestamp->empty()",
          "old_line_content": "  if (*seq != kMaxSequenceNumber) {",
          "new_line_content": "         (*seq == kMaxSequenceNumber && timestamp->empty()));",
          "content_same": false
        },
        {
          "line": 5221,
          "old_api": null,
          "new_api": "Status::OK()",
          "old_text": null,
          "new_text": "Status::OK()",
          "old_line_content": "",
          "new_line_content": "    return Status::OK();",
          "content_same": false
        },
        {
          "line": 5233,
          "old_api": null,
          "new_api": "Get",
          "old_text": null,
          "new_text": "sv->current->Get(read_options, lkey, /*value=*/nullptr, /*columns=*/nullptr,\n                     timestamp, &s, &merge_context, &max_covering_tombstone_seq,\n                     &pinned_iters_mgr, nullptr /* value_found */,\n                     found_record_for_key, seq, nullptr /*read_callback*/,\n                     is_blob_index)",
          "old_line_content": "                     &pinned_iters_mgr, nullptr /* value_found */,",
          "new_line_content": "    sv->current->Get(read_options, lkey, /*value=*/nullptr, /*columns=*/nullptr,",
          "content_same": false
        },
        {
          "line": 5243,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "s.ToString().c_str()",
          "old_line_content": "  }",
          "new_line_content": "                      s.ToString().c_str());",
          "content_same": false
        },
        {
          "line": 5258,
          "old_api": null,
          "new_api": "IngestExternalFiles",
          "old_text": null,
          "new_text": "IngestExternalFiles({arg})",
          "old_line_content": "",
          "new_line_content": "  return IngestExternalFiles({arg});",
          "content_same": false
        },
        {
          "line": 5265,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "args.empty()",
          "old_line_content": "  }",
          "new_line_content": "  if (args.empty()) {",
          "content_same": false
        },
        {
          "line": 5266,
          "old_api": null,
          "new_api": "Status::InvalidArgument(\"ingestion arg list is empty\")",
          "old_text": null,
          "new_text": "Status::InvalidArgument(\"ingestion arg list is empty\")",
          "old_line_content": "  {",
          "new_line_content": "    return Status::InvalidArgument(\"ingestion arg list is empty\");",
          "content_same": false
        },
        {
          "line": 5273,
          "old_api": null,
          "new_api": "count",
          "old_text": null,
          "new_text": "unique_cfhs.count(arg.column_family)",
          "old_line_content": "            \"ingestion args have duplicate column families\");",
          "new_line_content": "      } else if (unique_cfhs.count(arg.column_family) > 0) {",
          "content_same": false
        },
        {
          "line": 5274,
          "old_api": null,
          "new_api": "Status::InvalidArgument(\n            \"ingestion args have duplicate column families\")",
          "old_text": null,
          "new_text": "Status::InvalidArgument(\n            \"ingestion args have duplicate column families\")",
          "old_line_content": "      }",
          "new_line_content": "        return Status::InvalidArgument(",
          "content_same": false
        },
        {
          "line": 5277,
          "old_api": null,
          "new_api": "insert",
          "old_text": null,
          "new_text": "unique_cfhs.insert(arg.column_family)",
          "old_line_content": "  }",
          "new_line_content": "      unique_cfhs.insert(arg.column_family);",
          "content_same": false
        },
        {
          "line": 5285,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(err_msg, 128, \"external_files[%zu] is empty\", i)",
          "old_line_content": "    }",
          "new_line_content": "      snprintf(err_msg, 128, \"external_files[%zu] is empty\", i);",
          "content_same": false
        },
        {
          "line": 5286,
          "old_api": null,
          "new_api": "Status::InvalidArgument(err_msg)",
          "old_text": null,
          "new_text": "Status::InvalidArgument(err_msg)",
          "old_line_content": "  }",
          "new_line_content": "      return Status::InvalidArgument(err_msg);",
          "content_same": false
        },
        {
          "line": 5293,
          "old_api": null,
          "new_api": "Status::InvalidArgument(\n          \"can't ingest_behind file in DB with allow_ingest_behind=false\")",
          "old_text": null,
          "new_text": "Status::InvalidArgument(\n          \"can't ingest_behind file in DB with allow_ingest_behind=false\")",
          "old_line_content": "    }",
          "new_line_content": "      return Status::InvalidArgument(",
          "content_same": false
        },
        {
          "line": 5303,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "arg.external_files.size()",
          "old_line_content": "  uint64_t next_file_number = 0;",
          "new_line_content": "    total += arg.external_files.size();",
          "content_same": false
        },
        {
          "line": 5306,
          "old_api": null,
          "new_api": "cfd",
          "old_text": null,
          "new_text": "ReserveFileNumbersBeforeIngestion(\n      static_cast<ColumnFamilyHandleImpl*>(args[0].column_family)->cfd(), total,\n      pending_output_elem, &next_file_number)",
          "old_line_content": "      pending_output_elem, &next_file_number);",
          "new_line_content": "  Status status = ReserveFileNumbersBeforeIngestion(",
          "content_same": false
        },
        {
          "line": 5311,
          "old_api": null,
          "new_api": "ReleaseFileNumberFromPendingOutputs",
          "old_text": null,
          "new_text": "ReleaseFileNumberFromPendingOutputs(pending_output_elem)",
          "old_line_content": "  }",
          "new_line_content": "    ReleaseFileNumberFromPendingOutputs(pending_output_elem);",
          "content_same": false
        },
        {
          "line": 5317,
          "old_api": null,
          "new_api": "cfd",
          "old_text": null,
          "new_text": "static_cast<ColumnFamilyHandleImpl*>(arg.column_family)->cfd()",
          "old_line_content": "                                mutable_db_options_, file_options_, &snapshots_,",
          "new_line_content": "    auto* cfd = static_cast<ColumnFamilyHandleImpl*>(arg.column_family)->cfd();",
          "content_same": false
        },
        {
          "line": 5318,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "versions_.get()",
          "old_line_content": "                                arg.options, &directories_, &event_logger_,",
          "new_line_content": "    ingestion_jobs.emplace_back(versions_.get(), cfd, immutable_db_options_,",
          "content_same": false
        },
        {
          "line": 5330,
          "old_api": null,
          "new_api": "GetReferencedSuperVersion",
          "old_text": null,
          "new_text": "cfd->GetReferencedSuperVersion(this)",
          "old_line_content": "        args[i].external_files, args[i].files_checksums,",
          "new_line_content": "    SuperVersion* super_version = cfd->GetReferencedSuperVersion(this);",
          "content_same": false
        },
        {
          "line": 5331,
          "old_api": null,
          "new_api": "Prepare",
          "old_text": null,
          "new_text": "ingestion_jobs[i].Prepare(\n        args[i].external_files, args[i].files_checksums,\n        args[i].files_checksum_func_names, args[i].file_temperature,\n        start_file_number, super_version)",
          "old_line_content": "        args[i].files_checksum_func_names, args[i].file_temperature,",
          "new_line_content": "    Status es = ingestion_jobs[i].Prepare(",
          "content_same": false
        },
        {
          "line": 5336,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "status.ok()",
          "old_line_content": "    }",
          "new_line_content": "    if (!es.ok() && status.ok()) {",
          "content_same": false
        },
        {
          "line": 5341,
          "old_api": null,
          "new_api": "TEST_SYNC_POINT",
          "old_text": null,
          "new_text": "TEST_SYNC_POINT(\"DBImpl::IngestExternalFiles:BeforeLastJobPrepare:0\")",
          "old_line_content": "  {",
          "new_line_content": "  TEST_SYNC_POINT(\"DBImpl::IngestExternalFiles:BeforeLastJobPrepare:0\");",
          "content_same": false
        },
        {
          "line": 5342,
          "old_api": null,
          "new_api": "TEST_SYNC_POINT",
          "old_text": null,
          "new_text": "TEST_SYNC_POINT(\"DBImpl::IngestExternalFiles:BeforeLastJobPrepare:1\")",
          "old_line_content": "    auto* cfd =",
          "new_line_content": "  TEST_SYNC_POINT(\"DBImpl::IngestExternalFiles:BeforeLastJobPrepare:1\");",
          "content_same": false
        },
        {
          "line": 5346,
          "old_api": null,
          "new_api": "GetReferencedSuperVersion",
          "old_text": null,
          "new_text": "cfd->GetReferencedSuperVersion(this)",
          "old_line_content": "        args[0].external_files, args[0].files_checksums,",
          "new_line_content": "    SuperVersion* super_version = cfd->GetReferencedSuperVersion(this);",
          "content_same": false
        },
        {
          "line": 5347,
          "old_api": null,
          "new_api": "Prepare",
          "old_text": null,
          "new_text": "ingestion_jobs[0].Prepare(\n        args[0].external_files, args[0].files_checksums,\n        args[0].files_checksum_func_names, args[0].file_temperature,\n        next_file_number, super_version)",
          "old_line_content": "        args[0].files_checksum_func_names, args[0].file_temperature,",
          "new_line_content": "    Status es = ingestion_jobs[0].Prepare(",
          "content_same": false
        },
        {
          "line": 5351,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "es.ok()",
          "old_line_content": "    }",
          "new_line_content": "    if (!es.ok()) {",
          "content_same": false
        },
        {
          "line": 5358,
          "old_api": null,
          "new_api": "Cleanup",
          "old_text": null,
          "new_text": "ingestion_jobs[i].Cleanup(status)",
          "old_line_content": "    InstrumentedMutexLock l(&mutex_);",
          "new_line_content": "      ingestion_jobs[i].Cleanup(status);",
          "content_same": false
        },
        {
          "line": 5361,
          "old_api": null,
          "new_api": "ReleaseFileNumberFromPendingOutputs",
          "old_text": null,
          "new_text": "ReleaseFileNumberFromPendingOutputs(pending_output_elem)",
          "old_line_content": "  }",
          "new_line_content": "    ReleaseFileNumberFromPendingOutputs(pending_output_elem);",
          "content_same": false
        },
        {
          "line": 5370,
          "old_api": null,
          "new_api": "TEST_SYNC_POINT",
          "old_text": null,
          "new_text": "TEST_SYNC_POINT(\"DBImpl::IngestExternalFiles:BeforeJobsRun:1\")",
          "old_line_content": "  {",
          "new_line_content": "  TEST_SYNC_POINT(\"DBImpl::IngestExternalFiles:BeforeJobsRun:1\");",
          "content_same": false
        },
        {
          "line": 5371,
          "old_api": null,
          "new_api": "TEST_SYNC_POINT",
          "old_text": null,
          "new_text": "TEST_SYNC_POINT(\"DBImpl::AddFile:Start\")",
          "old_line_content": "    InstrumentedMutexLock l(&mutex_);",
          "new_line_content": "  TEST_SYNC_POINT(\"DBImpl::AddFile:Start\");",
          "content_same": false
        },
        {
          "line": 5374,
          "old_api": null,
          "new_api": "TEST_SYNC_POINT",
          "old_text": null,
          "new_text": "TEST_SYNC_POINT(\"DBImpl::AddFile:MutexLock\")",
          "old_line_content": "    // Stop writes to the DB by entering both write threads",
          "new_line_content": "    TEST_SYNC_POINT(\"DBImpl::AddFile:MutexLock\");",
          "content_same": false
        },
        {
          "line": 5378,
          "old_api": null,
          "new_api": "EnterUnbatched",
          "old_text": null,
          "new_text": "write_thread_.EnterUnbatched(&w, &mutex_)",
          "old_line_content": "    if (two_write_queues_) {",
          "new_line_content": "    write_thread_.EnterUnbatched(&w, &mutex_);",
          "content_same": false
        },
        {
          "line": 5381,
          "old_api": null,
          "new_api": "EnterUnbatched",
          "old_text": null,
          "new_text": "nonmem_write_thread_.EnterUnbatched(&nonmem_w, &mutex_)",
          "old_line_content": "",
          "new_line_content": "      nonmem_write_thread_.EnterUnbatched(&nonmem_w, &mutex_);",
          "content_same": false
        },
        {
          "line": 5391,
          "old_api": null,
          "new_api": "static_cast<int>(num_cfs)",
          "old_text": null,
          "new_text": "static_cast<int>(num_cfs)",
          "old_line_content": "",
          "new_line_content": "    num_running_ingest_file_ += static_cast<int>(num_cfs);",
          "content_same": false
        },
        {
          "line": 5392,
          "old_api": null,
          "new_api": "TEST_SYNC_POINT",
          "old_text": null,
          "new_text": "TEST_SYNC_POINT(\"DBImpl::IngestExternalFile:AfterIncIngestFileCounter\")",
          "old_line_content": "    bool at_least_one_cf_need_flush = false;",
          "new_line_content": "    TEST_SYNC_POINT(\"DBImpl::IngestExternalFile:AfterIncIngestFileCounter\");",
          "content_same": false
        },
        {
          "line": 5398,
          "old_api": null,
          "new_api": "cfd",
          "old_text": null,
          "new_text": "static_cast<ColumnFamilyHandleImpl*>(args[i].column_family)->cfd()",
          "old_line_content": "        // TODO (yanqin) investigate whether we should abort ingestion or",
          "new_line_content": "          static_cast<ColumnFamilyHandleImpl*>(args[i].column_family)->cfd();",
          "content_same": false
        },
        {
          "line": 5399,
          "old_api": null,
          "new_api": "IsDropped",
          "old_text": null,
          "new_text": "cfd->IsDropped()",
          "old_line_content": "        // proceed with other non-dropped column families.",
          "new_line_content": "      if (cfd->IsDropped()) {",
          "content_same": false
        },
        {
          "line": 5402,
          "old_api": null,
          "new_api": "Status::InvalidArgument(\n            \"cannot ingest an external file into a dropped CF\")",
          "old_text": null,
          "new_text": "Status::InvalidArgument(\n            \"cannot ingest an external file into a dropped CF\")",
          "old_line_content": "        break;",
          "new_line_content": "        status = Status::InvalidArgument(",
          "content_same": false
        },
        {
          "line": 5407,
          "old_api": null,
          "new_api": "GetSuperVersion",
          "old_text": null,
          "new_text": "cfd->GetSuperVersion()",
          "old_line_content": "      at_least_one_cf_need_flush = (at_least_one_cf_need_flush || tmp);",
          "new_line_content": "      status = ingestion_jobs[i].NeedsFlush(&tmp, cfd->GetSuperVersion());",
          "content_same": false
        },
        {
          "line": 5410,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "status.ok()",
          "old_line_content": "      }",
          "new_line_content": "      if (!status.ok()) {",
          "content_same": false
        },
        {
          "line": 5414,
          "old_api": null,
          "new_api": "TEST_SYNC_POINT_CALLBACK",
          "old_text": null,
          "new_text": "TEST_SYNC_POINT_CALLBACK(\"DBImpl::IngestExternalFile:NeedFlush\",\n                             &at_least_one_cf_need_flush)",
          "old_line_content": "",
          "new_line_content": "    TEST_SYNC_POINT_CALLBACK(\"DBImpl::IngestExternalFile:NeedFlush\",",
          "content_same": false
        },
        {
          "line": 5417,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "status.ok()",
          "old_line_content": "      flush_opts.allow_write_stall = true;",
          "new_line_content": "    if (status.ok() && at_least_one_cf_need_flush) {",
          "content_same": false
        },
        {
          "line": 5421,
          "old_api": null,
          "new_api": "Unlock",
          "old_text": null,
          "new_text": "mutex_.Unlock()",
          "old_line_content": "            flush_opts, FlushReason::kExternalFileIngestion,",
          "new_line_content": "        mutex_.Unlock();",
          "content_same": false
        },
        {
          "line": 5422,
          "old_api": null,
          "new_api": "AtomicFlushMemTables",
          "old_text": null,
          "new_text": "AtomicFlushMemTables(\n            flush_opts, FlushReason::kExternalFileIngestion,\n            {} /* provided_candidate_cfds */, true /* entered_write_thread */)",
          "old_line_content": "            {} /* provided_candidate_cfds */, true /* entered_write_thread */);",
          "new_line_content": "        status = AtomicFlushMemTables(",
          "content_same": false
        },
        {
          "line": 5425,
          "old_api": null,
          "new_api": "Lock",
          "old_text": null,
          "new_text": "mutex_.Lock()",
          "old_line_content": "        for (size_t i = 0; i != num_cfs; ++i) {",
          "new_line_content": "        mutex_.Lock();",
          "content_same": false
        },
        {
          "line": 5433,
          "old_api": null,
          "new_api": "FlushMemTable",
          "old_text": null,
          "new_text": "FlushMemTable(cfd, flush_opts,\n                                   FlushReason::kExternalFileIngestion,\n                                   true /* entered_write_thread */)",
          "old_line_content": "                                   true /* entered_write_thread */);",
          "new_line_content": "            status = FlushMemTable(cfd, flush_opts,",
          "content_same": false
        },
        {
          "line": 5436,
          "old_api": null,
          "new_api": "Lock",
          "old_text": null,
          "new_text": "mutex_.Lock()",
          "old_line_content": "              break;",
          "new_line_content": "            mutex_.Lock();",
          "content_same": false
        },
        {
          "line": 5437,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "status.ok()",
          "old_line_content": "            }",
          "new_line_content": "            if (!status.ok()) {",
          "content_same": false
        },
        {
          "line": 5448,
          "old_api": null,
          "new_api": "Run",
          "old_text": null,
          "new_text": "ingestion_jobs[i].Run()",
          "old_line_content": "          break;",
          "new_line_content": "        status = ingestion_jobs[i].Run();",
          "content_same": false
        },
        {
          "line": 5449,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "status.ok()",
          "old_line_content": "        }",
          "new_line_content": "        if (!status.ok()) {",
          "content_same": false
        },
        {
          "line": 5452,
          "old_api": null,
          "new_api": "RegisterRange",
          "old_text": null,
          "new_text": "ingestion_jobs[i].RegisterRange()",
          "old_line_content": "    }",
          "new_line_content": "        ingestion_jobs[i].RegisterRange();",
          "content_same": false
        },
        {
          "line": 5455,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "status.ok()",
          "old_line_content": "      autovector<const MutableCFOptions*> mutable_cf_options_list;",
          "new_line_content": "    if (status.ok()) {",
          "content_same": false
        },
        {
          "line": 5462,
          "old_api": null,
          "new_api": "cfd",
          "old_text": null,
          "new_text": "static_cast<ColumnFamilyHandleImpl*>(args[i].column_family)->cfd()",
          "old_line_content": "          continue;",
          "new_line_content": "            static_cast<ColumnFamilyHandleImpl*>(args[i].column_family)->cfd();",
          "content_same": false
        },
        {
          "line": 5463,
          "old_api": null,
          "new_api": "IsDropped",
          "old_text": null,
          "new_text": "cfd->IsDropped()",
          "old_line_content": "        }",
          "new_line_content": "        if (cfd->IsDropped()) {",
          "content_same": false
        },
        {
          "line": 5466,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "cfds_to_commit.push_back(cfd)",
          "old_line_content": "        autovector<VersionEdit*> edit_list;",
          "new_line_content": "        cfds_to_commit.push_back(cfd);",
          "content_same": false
        },
        {
          "line": 5469,
          "old_api": null,
          "new_api": "edit",
          "old_text": null,
          "new_text": "ingestion_jobs[i].edit()",
          "old_line_content": "        ++num_entries;",
          "new_line_content": "        edit_list.push_back(ingestion_jobs[i].edit());",
          "content_same": false
        },
        {
          "line": 5470,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "edit_lists.push_back(edit_list)",
          "old_line_content": "      }",
          "new_line_content": "        edit_lists.push_back(edit_list);",
          "content_same": false
        },
        {
          "line": 5477,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "edits.size()",
          "old_line_content": "        }",
          "new_line_content": "          assert(edits.size() == 1);",
          "content_same": false
        },
        {
          "line": 5484,
          "old_api": null,
          "new_api": "GetDbDir",
          "old_text": null,
          "new_text": "directories_.GetDbDir()",
          "old_line_content": "      // LogAndApply persists last sequence number from VersionEdits,",
          "new_line_content": "                                      directories_.GetDbDir());",
          "content_same": false
        },
        {
          "line": 5494,
          "old_api": null,
          "new_api": "ConsumedSequenceNumbersCount",
          "old_text": null,
          "new_text": "ingestion_jobs[0].ConsumedSequenceNumbersCount()",
          "old_line_content": "        consumed_seqno_count =",
          "new_line_content": "          ingestion_jobs[0].ConsumedSequenceNumbersCount();",
          "content_same": false
        },
        {
          "line": 5497,
          "old_api": null,
          "new_api": "ConsumedSequenceNumbersCount",
          "old_text": null,
          "new_text": "std::max(consumed_seqno_count,\n                     ingestion_jobs[i].ConsumedSequenceNumbersCount())",
          "old_line_content": "      }",
          "new_line_content": "            std::max(consumed_seqno_count,",
          "content_same": false
        },
        {
          "line": 5498,
          "old_api": null,
          "new_api": "ConsumedSequenceNumbersCount",
          "old_text": null,
          "new_text": "ingestion_jobs[i].ConsumedSequenceNumbersCount()",
          "old_line_content": "      if (consumed_seqno_count > 0) {",
          "new_line_content": "                     ingestion_jobs[i].ConsumedSequenceNumbersCount());",
          "content_same": false
        },
        {
          "line": 5503,
          "old_api": null,
          "new_api": "SetLastPublishedSequence",
          "old_text": null,
          "new_text": "versions_->SetLastPublishedSequence(last_seqno + consumed_seqno_count)",
          "old_line_content": "      }",
          "new_line_content": "        versions_->SetLastPublishedSequence(last_seqno + consumed_seqno_count);",
          "content_same": false
        },
        {
          "line": 5504,
          "old_api": null,
          "new_api": "SetLastSequence",
          "old_text": null,
          "new_text": "versions_->SetLastSequence(last_seqno + consumed_seqno_count)",
          "old_line_content": "    }",
          "new_line_content": "        versions_->SetLastSequence(last_seqno + consumed_seqno_count);",
          "content_same": false
        },
        {
          "line": 5509,
          "old_api": null,
          "new_api": "UnregisterRange",
          "old_text": null,
          "new_text": "job.UnregisterRange()",
          "old_line_content": "",
          "new_line_content": "      job.UnregisterRange();",
          "content_same": false
        },
        {
          "line": 5512,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "status.ok()",
          "old_line_content": "        auto* cfd =",
          "new_line_content": "    if (status.ok()) {",
          "content_same": false
        },
        {
          "line": 5517,
          "old_api": null,
          "new_api": "GetLatestMutableCFOptions",
          "old_text": null,
          "new_text": "InstallSuperVersionAndScheduleWork(cfd, &sv_ctxs[i],\n                                             *cfd->GetLatestMutableCFOptions())",
          "old_line_content": "#ifndef NDEBUG",
          "new_line_content": "          InstallSuperVersionAndScheduleWork(cfd, &sv_ctxs[i],",
          "content_same": false
        },
        {
          "line": 5518,
          "old_api": null,
          "new_api": "GetLatestMutableCFOptions",
          "old_text": null,
          "new_text": "cfd->GetLatestMutableCFOptions()",
          "old_line_content": "          if (0 == i && num_cfs > 1) {",
          "new_line_content": "                                             *cfd->GetLatestMutableCFOptions());",
          "content_same": false
        },
        {
          "line": 5523,
          "old_api": null,
          "new_api": "TEST_SYNC_POINT",
          "old_text": null,
          "new_text": "TEST_SYNC_POINT(\n                \"DBImpl::IngestExternalFiles:InstallSVForFirstCF:1\")",
          "old_line_content": "          }",
          "new_line_content": "            TEST_SYNC_POINT(",
          "content_same": false
        },
        {
          "line": 5529,
          "old_api": null,
          "new_api": "IsIOError",
          "old_text": null,
          "new_text": "versions_->io_status().IsIOError()",
          "old_line_content": "      // In fact, versions_->io_status() can also be the result of renaming",
          "new_line_content": "    } else if (versions_->io_status().IsIOError()) {",
          "content_same": false
        },
        {
          "line": 5537,
          "old_api": null,
          "new_api": "SetBGError",
          "old_text": null,
          "new_text": "error_handler_.SetBGError(io_s, BackgroundErrorReason::kManifestWrite)",
          "old_line_content": "",
          "new_line_content": "      error_handler_.SetBGError(io_s, BackgroundErrorReason::kManifestWrite);",
          "content_same": false
        },
        {
          "line": 5548,
          "old_api": null,
          "new_api": "UpdateStats",
          "old_text": null,
          "new_text": "job.UpdateStats()",
          "old_line_content": "    }",
          "new_line_content": "        job.UpdateStats();",
          "content_same": false
        },
        {
          "line": 5551,
          "old_api": null,
          "new_api": "ReleaseFileNumberFromPendingOutputs",
          "old_text": null,
          "new_text": "ReleaseFileNumberFromPendingOutputs(pending_output_elem)",
          "old_line_content": "    if (0 == num_running_ingest_file_) {",
          "new_line_content": "    ReleaseFileNumberFromPendingOutputs(pending_output_elem);",
          "content_same": false
        },
        {
          "line": 5556,
          "old_api": null,
          "new_api": "TEST_SYNC_POINT",
          "old_text": null,
          "new_text": "TEST_SYNC_POINT(\"DBImpl::AddFile:MutexUnlock\")",
          "old_line_content": "  // mutex_ is unlocked here",
          "new_line_content": "    TEST_SYNC_POINT(\"DBImpl::AddFile:MutexUnlock\");",
          "content_same": false
        },
        {
          "line": 5562,
          "old_api": null,
          "new_api": "Clean",
          "old_text": null,
          "new_text": "sv_ctxs[i].Clean()",
          "old_line_content": "    // intended for atomicity.",
          "new_line_content": "    sv_ctxs[i].Clean();",
          "content_same": false
        },
        {
          "line": 5567,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "status.ok()",
          "old_line_content": "      auto* cfd =",
          "new_line_content": "  if (status.ok()) {",
          "content_same": false
        },
        {
          "line": 5571,
          "old_api": null,
          "new_api": "IsDropped",
          "old_text": null,
          "new_text": "cfd->IsDropped()",
          "old_line_content": "      }",
          "new_line_content": "      if (!cfd->IsDropped()) {",
          "content_same": false
        },
        {
          "line": 5572,
          "old_api": null,
          "new_api": "NotifyOnExternalFileIngested",
          "old_text": null,
          "new_text": "NotifyOnExternalFileIngested(cfd, ingestion_jobs[i])",
          "old_line_content": "    }",
          "new_line_content": "        NotifyOnExternalFileIngested(cfd, ingestion_jobs[i]);",
          "content_same": false
        },
        {
          "line": 5584,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(handle != nullptr)",
          "old_line_content": "  // TODO: plumb Env::IOActivity",
          "new_line_content": "  assert(handle != nullptr);",
          "content_same": false
        },
        {
          "line": 5585,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(*handle == nullptr)",
          "old_line_content": "  const ReadOptions read_options;",
          "new_line_content": "  assert(*handle == nullptr);",
          "content_same": false
        },
        {
          "line": 5588,
          "old_api": null,
          "new_api": "Name",
          "old_text": null,
          "new_text": "options.comparator->Name()",
          "old_line_content": "  size_t total_file_num = 0;",
          "new_line_content": "  std::string cf_comparator_name = options.comparator->Name();",
          "content_same": false
        },
        {
          "line": 5591,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "metadatas.size()",
          "old_line_content": "    if (cf_comparator_name != metadatas[i]->db_comparator_name) {",
          "new_line_content": "  std::vector<std::vector<LiveFileMetaData*>> metadata_files(metadatas.size());",
          "content_same": false
        },
        {
          "line": 5594,
          "old_api": null,
          "new_api": "Status::InvalidArgument(\"Comparator name mismatch\")",
          "old_text": null,
          "new_text": "Status::InvalidArgument(\"Comparator name mismatch\")",
          "old_line_content": "    for (auto& file : metadatas[i]->files) {",
          "new_line_content": "      return Status::InvalidArgument(\"Comparator name mismatch\");",
          "content_same": false
        },
        {
          "line": 5599,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "metadatas[i]->files.size()",
          "old_line_content": "",
          "new_line_content": "    total_file_num += metadatas[i]->files.size();",
          "content_same": false
        },
        {
          "line": 5603,
          "old_api": null,
          "new_api": "CreateColumnFamily",
          "old_text": null,
          "new_text": "CreateColumnFamily(options, column_family_name, handle)",
          "old_line_content": "    return status;",
          "new_line_content": "  auto status = CreateColumnFamily(options, column_family_name, handle);",
          "content_same": false
        },
        {
          "line": 5604,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "status.ok()",
          "old_line_content": "  }",
          "new_line_content": "  if (!status.ok()) {",
          "content_same": false
        },
        {
          "line": 5610,
          "old_api": null,
          "new_api": "cfd",
          "old_text": null,
          "new_text": "cfh->cfd()",
          "old_line_content": "                                   file_options_, import_options,",
          "new_line_content": "  auto cfd = cfh->cfd();",
          "content_same": false
        },
        {
          "line": 5611,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "versions_.get()",
          "old_line_content": "                                   metadata_files, io_tracer_);",
          "new_line_content": "  ImportColumnFamilyJob import_job(versions_.get(), cfd, immutable_db_options_,",
          "content_same": false
        },
        {
          "line": 5624,
          "old_api": null,
          "new_api": "GetBGError",
          "old_text": null,
          "new_text": "error_handler_.GetBGError()",
          "old_line_content": "",
          "new_line_content": "      status = error_handler_.GetBGError();",
          "content_same": false
        },
        {
          "line": 5628,
          "old_api": null,
          "new_api": "reset",
          "old_text": null,
          "new_text": "pending_output_elem.reset(new std::list<uint64_t>::iterator(\n        CaptureCurrentFileNumberInPendingOutputs()))",
          "old_line_content": "",
          "new_line_content": "    pending_output_elem.reset(new std::list<uint64_t>::iterator(",
          "content_same": false
        },
        {
          "line": 5631,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "status.ok()",
          "old_line_content": "      // reuse the file number that has already assigned to the internal file,",
          "new_line_content": "    if (status.ok()) {",
          "content_same": false
        },
        {
          "line": 5636,
          "old_api": null,
          "new_api": "FetchAddFileNumber",
          "old_text": null,
          "new_text": "versions_->FetchAddFileNumber(total_file_num)",
          "old_line_content": "      status =",
          "new_line_content": "      next_file_number = versions_->FetchAddFileNumber(total_file_num);",
          "content_same": false
        },
        {
          "line": 5641,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "status.ok()",
          "old_line_content": "      }",
          "new_line_content": "      if (status.ok()) {",
          "content_same": false
        },
        {
          "line": 5642,
          "old_api": null,
          "new_api": "InstallSuperVersionAndScheduleWork",
          "old_text": null,
          "new_text": "InstallSuperVersionAndScheduleWork(cfd, &dummy_sv_ctx, *cf_options)",
          "old_line_content": "    }",
          "new_line_content": "        InstallSuperVersionAndScheduleWork(cfd, &dummy_sv_ctx, *cf_options);",
          "content_same": false
        },
        {
          "line": 5650,
          "old_api": null,
          "new_api": "Prepare",
          "old_text": null,
          "new_text": "import_job.Prepare(next_file_number, sv)",
          "old_line_content": "  }",
          "new_line_content": "    status = import_job.Prepare(next_file_number, sv);",
          "content_same": false
        },
        {
          "line": 5651,
          "old_api": null,
          "new_api": "CleanupSuperVersion",
          "old_text": null,
          "new_text": "CleanupSuperVersion(sv)",
          "old_line_content": "",
          "new_line_content": "    CleanupSuperVersion(sv);",
          "content_same": false
        },
        {
          "line": 5654,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "status.ok()",
          "old_line_content": "    {",
          "new_line_content": "  if (status.ok()) {",
          "content_same": false
        },
        {
          "line": 5662,
          "old_api": null,
          "new_api": "EnterUnbatched",
          "old_text": null,
          "new_text": "write_thread_.EnterUnbatched(&w, &mutex_)",
          "old_line_content": "      if (two_write_queues_) {",
          "new_line_content": "      write_thread_.EnterUnbatched(&w, &mutex_);",
          "content_same": false
        },
        {
          "line": 5665,
          "old_api": null,
          "new_api": "EnterUnbatched",
          "old_text": null,
          "new_text": "nonmem_write_thread_.EnterUnbatched(&nonmem_w, &mutex_)",
          "old_line_content": "",
          "new_line_content": "        nonmem_write_thread_.EnterUnbatched(&nonmem_w, &mutex_);",
          "content_same": false
        },
        {
          "line": 5670,
          "old_api": null,
          "new_api": "AssertHeld",
          "old_text": null,
          "new_text": "mutex_.AssertHeld()",
          "old_line_content": "",
          "new_line_content": "      mutex_.AssertHeld();",
          "content_same": false
        },
        {
          "line": 5671,
          "old_api": null,
          "new_api": "Run",
          "old_text": null,
          "new_text": "import_job.Run()",
          "old_line_content": "      // Install job edit [Mutex will be unlocked here]",
          "new_line_content": "      status = import_job.Run();",
          "content_same": false
        },
        {
          "line": 5679,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "status.ok()",
          "old_line_content": "        }",
          "new_line_content": "        if (status.ok()) {",
          "content_same": false
        },
        {
          "line": 5680,
          "old_api": null,
          "new_api": "InstallSuperVersionAndScheduleWork",
          "old_text": null,
          "new_text": "InstallSuperVersionAndScheduleWork(cfd, &sv_context, *cf_options)",
          "old_line_content": "      }",
          "new_line_content": "          InstallSuperVersionAndScheduleWork(cfd, &sv_context, *cf_options);",
          "content_same": false
        },
        {
          "line": 5688,
          "old_api": null,
          "new_api": "ExitUnbatched",
          "old_text": null,
          "new_text": "write_thread_.ExitUnbatched(&w)",
          "old_line_content": "      num_running_ingest_file_--;",
          "new_line_content": "      write_thread_.ExitUnbatched(&w);",
          "content_same": false
        },
        {
          "line": 5692,
          "old_api": null,
          "new_api": "SignalAll",
          "old_text": null,
          "new_text": "bg_cv_.SignalAll()",
          "old_line_content": "    }",
          "new_line_content": "        bg_cv_.SignalAll();",
          "content_same": false
        },
        {
          "line": 5697,
          "old_api": null,
          "new_api": "Clean",
          "old_text": null,
          "new_text": "sv_context.Clean()",
          "old_line_content": "",
          "new_line_content": "    sv_context.Clean();",
          "content_same": false
        },
        {
          "line": 5702,
          "old_api": null,
          "new_api": "ReleaseFileNumberFromPendingOutputs",
          "old_text": null,
          "new_text": "ReleaseFileNumberFromPendingOutputs(pending_output_elem)",
          "old_line_content": "",
          "new_line_content": "    ReleaseFileNumberFromPendingOutputs(pending_output_elem);",
          "content_same": false
        },
        {
          "line": 5708,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "temp_s.ok()",
          "old_line_content": "                      \"DropColumnFamily failed with error %s\",",
          "new_line_content": "    if (!temp_s.ok()) {",
          "content_same": false
        },
        {
          "line": 5711,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "temp_s.ToString().c_str()",
          "old_line_content": "    // Always returns Status::OK()",
          "new_line_content": "                      temp_s.ToString().c_str());",
          "content_same": false
        },
        {
          "line": 5714,
          "old_api": null,
          "new_api": "DestroyColumnFamilyHandle",
          "old_text": null,
          "new_text": "DestroyColumnFamilyHandle(*handle)",
          "old_line_content": "    *handle = nullptr;",
          "new_line_content": "    temp_s = DestroyColumnFamilyHandle(*handle);",
          "content_same": false
        },
        {
          "line": 5715,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "temp_s.ok()",
          "old_line_content": "  }",
          "new_line_content": "    assert(temp_s.ok());",
          "content_same": false
        },
        {
          "line": 5723,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(column_family)",
          "old_line_content": "  // Flush memtable",
          "new_line_content": "  assert(column_family);",
          "content_same": false
        },
        {
          "line": 5731,
          "old_api": null,
          "new_api": "AtomicFlushMemTables",
          "old_text": null,
          "new_text": "AtomicFlushMemTables(flush_opts, FlushReason::kDeleteFiles,\n                                  {} /* provided_candidate_cfds */,\n                                  false /* entered_write_thread */)",
          "old_line_content": "                                  false /* entered_write_thread */);",
          "new_line_content": "    status = AtomicFlushMemTables(flush_opts, FlushReason::kDeleteFiles,",
          "content_same": false
        },
        {
          "line": 5735,
          "old_api": null,
          "new_api": "FlushMemTable",
          "old_text": null,
          "new_text": "FlushMemTable(cfd, flush_opts, FlushReason::kDeleteFiles,\n                           false /* entered_write_thread */)",
          "old_line_content": "  }",
          "new_line_content": "    status = FlushMemTable(cfd, flush_opts, FlushReason::kDeleteFiles,",
          "content_same": false
        },
        {
          "line": 5739,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "status.ok()",
          "old_line_content": "    std::vector<RangePtr> ranges;",
          "new_line_content": "  if (status.ok()) {",
          "content_same": false
        },
        {
          "line": 5743,
          "old_api": null,
          "new_api": "RangePtr",
          "old_text": null,
          "new_text": "RangePtr(&end_key, nullptr)",
          "old_line_content": "  }",
          "new_line_content": "    ranges.push_back(RangePtr(&end_key, nullptr));",
          "content_same": false
        },
        {
          "line": 5744,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "ranges.size()",
          "old_line_content": "",
          "new_line_content": "    status = DeleteFilesInRanges(column_family, ranges.data(), ranges.size());",
          "content_same": false
        },
        {
          "line": 5749,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "status.ok()",
          "old_line_content": "    {",
          "new_line_content": "  if (status.ok()) {",
          "content_same": false
        },
        {
          "line": 5754,
          "old_api": null,
          "new_api": "current",
          "old_text": null,
          "new_text": "cfd->current()->GetSstFilesBoundaryKeys(&smallest_user_key,\n                                              &largest_user_key)",
          "old_line_content": "    }",
          "new_line_content": "      cfd->current()->GetSstFilesBoundaryKeys(&smallest_user_key,",
          "content_same": false
        },
        {
          "line": 5758,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "largest_user_key.empty()",
          "old_line_content": "    } else {",
          "new_line_content": "    if (smallest_user_key.empty() && largest_user_key.empty()) {",
          "content_same": false
        },
        {
          "line": 5761,
          "old_api": null,
          "new_api": "GetComparator",
          "old_text": null,
          "new_text": "column_family->GetComparator()",
          "old_line_content": "      // Delete [smallest_user_key, clip_begin_key)",
          "new_line_content": "      const Comparator* const ucmp = column_family->GetComparator();",
          "content_same": false
        },
        {
          "line": 5764,
          "old_api": null,
          "new_api": "Compare",
          "old_text": null,
          "new_text": "ucmp->Compare(smallest_user_key, begin_key)",
          "old_line_content": "      }",
          "new_line_content": "      if (ucmp->Compare(smallest_user_key, begin_key) < 0) {",
          "content_same": false
        },
        {
          "line": 5765,
          "old_api": null,
          "new_api": "DeleteRange",
          "old_text": null,
          "new_text": "DeleteRange(wo, column_family, smallest_user_key, begin_key)",
          "old_line_content": "",
          "new_line_content": "        status = DeleteRange(wo, column_family, smallest_user_key, begin_key);",
          "content_same": false
        },
        {
          "line": 5772,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "status.ok()",
          "old_line_content": "          }",
          "new_line_content": "          if (status.ok()) {",
          "content_same": false
        },
        {
          "line": 5773,
          "old_api": null,
          "new_api": "Delete",
          "old_text": null,
          "new_text": "Delete(wo, column_family, largest_user_key)",
          "old_line_content": "        }",
          "new_line_content": "            status = Delete(wo, column_family, largest_user_key);",
          "content_same": false
        },
        {
          "line": 5780,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "status.ok()",
          "old_line_content": "    CompactRangeOptions compact_options;",
          "new_line_content": "  if (status.ok() && !empty_after_delete) {",
          "content_same": false
        },
        {
          "line": 5791,
          "old_api": null,
          "new_api": "CompactRange",
          "old_text": null,
          "new_text": "CompactRange(compact_options, nullptr, nullptr)",
          "old_line_content": "  return status;",
          "new_line_content": "    status = CompactRange(compact_options, nullptr, nullptr);",
          "content_same": false
        },
        {
          "line": 5797,
          "old_api": null,
          "new_api": "VerifyChecksumInternal",
          "old_text": null,
          "new_text": "VerifyChecksumInternal(read_options, /*use_file_checksum=*/true)",
          "old_line_content": "",
          "new_line_content": "  return VerifyChecksumInternal(read_options, /*use_file_checksum=*/true);",
          "content_same": false
        },
        {
          "line": 5801,
          "old_api": null,
          "new_api": "VerifyChecksumInternal",
          "old_text": null,
          "new_text": "VerifyChecksumInternal(read_options, /*use_file_checksum=*/false)",
          "old_line_content": "",
          "new_line_content": "  return VerifyChecksumInternal(read_options, /*use_file_checksum=*/false);",
          "content_same": false
        },
        {
          "line": 5809,
          "old_api": null,
          "new_api": "IOSTATS",
          "old_text": null,
          "new_text": "IOSTATS(bytes_read)",
          "old_line_content": "  Status s;",
          "new_line_content": "  uint64_t prev_bytes_read = IOSTATS(bytes_read);",
          "content_same": false
        },
        {
          "line": 5814,
          "old_api": null,
          "new_api": "Status::InvalidArgument(\n        \"Cannot verify file checksum with `ReadOptions::io_activity` != \"\n        \"`Env::IOActivity::kUnknown`\")",
          "old_text": null,
          "new_text": "Status::InvalidArgument(\n        \"Cannot verify file checksum with `ReadOptions::io_activity` != \"\n        \"`Env::IOActivity::kUnknown`\")",
          "old_line_content": "        \"`Env::IOActivity::kUnknown`\");",
          "new_line_content": "    s = Status::InvalidArgument(",
          "content_same": false
        },
        {
          "line": 5823,
          "old_api": null,
          "new_api": "Status::InvalidArgument(\n          \"Cannot verify file checksum if options.file_checksum_gen_factory is \"\n          \"null\")",
          "old_text": null,
          "new_text": "Status::InvalidArgument(\n          \"Cannot verify file checksum if options.file_checksum_gen_factory is \"\n          \"null\")",
          "old_line_content": "          \"null\");",
          "new_line_content": "      s = Status::InvalidArgument(",
          "content_same": false
        },
        {
          "line": 5837,
          "old_api": null,
          "new_api": "Ref",
          "old_text": null,
          "new_text": "cfd->Ref()",
          "old_line_content": "      }",
          "new_line_content": "        cfd->Ref();",
          "content_same": false
        },
        {
          "line": 5838,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "cfd_list.push_back(cfd)",
          "old_line_content": "    }",
          "new_line_content": "        cfd_list.push_back(cfd);",
          "content_same": false
        },
        {
          "line": 5844,
          "old_api": null,
          "new_api": "GetReferencedSuperVersion",
          "old_text": null,
          "new_text": "cfd->GetReferencedSuperVersion(this)",
          "old_line_content": "",
          "new_line_content": "    sv_list.push_back(cfd->GetReferencedSuperVersion(this));",
          "content_same": false
        },
        {
          "line": 5848,
          "old_api": null,
          "new_api": "storage_info",
          "old_text": null,
          "new_text": "sv->current->storage_info()",
          "old_line_content": "    Options opts;",
          "new_line_content": "    VersionStorageInfo* vstorage = sv->current->storage_info();",
          "content_same": false
        },
        {
          "line": 5849,
          "old_api": null,
          "new_api": "cfd",
          "old_text": null,
          "new_text": "sv->current->cfd()",
          "old_line_content": "    if (!use_file_checksum) {",
          "new_line_content": "    ColumnFamilyData* cfd = sv->current->cfd();",
          "content_same": false
        },
        {
          "line": 5853,
          "old_api": null,
          "new_api": "BuildDBOptions",
          "old_text": null,
          "new_text": "BuildDBOptions(immutable_db_options_, mutable_db_options_)",
          "old_line_content": "    }",
          "new_line_content": "      opts = Options(BuildDBOptions(immutable_db_options_, mutable_db_options_),",
          "content_same": false
        },
        {
          "line": 5856,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "s.ok()",
          "old_line_content": "           j++) {",
          "new_line_content": "    for (int i = 0; i < vstorage->num_non_empty_levels() && s.ok(); i++) {",
          "content_same": false
        },
        {
          "line": 5859,
          "old_api": null,
          "new_api": "LevelFilesBrief",
          "old_text": null,
          "new_text": "vstorage->LevelFilesBrief(i)",
          "old_line_content": "        const FileMetaData* fmeta = fd_with_krange.file_metadata;",
          "new_line_content": "        const auto& fd_with_krange = vstorage->LevelFilesBrief(i).files[j];",
          "content_same": false
        },
        {
          "line": 5863,
          "old_api": null,
          "new_api": "ioptions",
          "old_text": null,
          "new_text": "cfd->ioptions()",
          "old_line_content": "        if (use_file_checksum) {",
          "new_line_content": "        std::string fname = TableFileName(cfd->ioptions()->cf_paths,",
          "content_same": false
        },
        {
          "line": 5866,
          "old_api": null,
          "new_api": "VerifyFullFileChecksum",
          "old_text": null,
          "new_text": "VerifyFullFileChecksum(fmeta->file_checksum,\n                                     fmeta->file_checksum_func_name, fname,\n                                     read_options)",
          "old_line_content": "                                     read_options);",
          "new_line_content": "          s = VerifyFullFileChecksum(fmeta->file_checksum,",
          "content_same": false
        },
        {
          "line": 5870,
          "old_api": null,
          "new_api": "ROCKSDB_NAMESPACE::VerifySstFileChecksum(\n              opts, file_options_, read_options, fname, fd.largest_seqno)",
          "old_text": null,
          "new_text": "ROCKSDB_NAMESPACE::VerifySstFileChecksum(\n              opts, file_options_, read_options, fname, fd.largest_seqno)",
          "old_line_content": "        }",
          "new_line_content": "          s = ROCKSDB_NAMESPACE::VerifySstFileChecksum(",
          "content_same": false
        },
        {
          "line": 5874,
          "old_api": null,
          "new_api": "IOSTATS",
          "old_text": null,
          "new_text": "IOSTATS(bytes_read)",
          "old_line_content": "      }",
          "new_line_content": "                   IOSTATS(bytes_read) - prev_bytes_read);",
          "content_same": false
        },
        {
          "line": 5875,
          "old_api": null,
          "new_api": "IOSTATS",
          "old_text": null,
          "new_text": "IOSTATS(bytes_read)",
          "old_line_content": "    }",
          "new_line_content": "        prev_bytes_read = IOSTATS(bytes_read);",
          "content_same": false
        },
        {
          "line": 5879,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "s.ok()",
          "old_line_content": "      for (const auto& meta : blob_files) {",
          "new_line_content": "    if (s.ok() && use_file_checksum) {",
          "content_same": false
        },
        {
          "line": 5888,
          "old_api": null,
          "new_api": "GetChecksumValue",
          "old_text": null,
          "new_text": "meta->GetChecksumValue()",
          "old_line_content": "                                   read_options);",
          "new_line_content": "        s = VerifyFullFileChecksum(meta->GetChecksumValue(),",
          "content_same": false
        },
        {
          "line": 5893,
          "old_api": null,
          "new_api": "IOSTATS",
          "old_text": null,
          "new_text": "IOSTATS(bytes_read)",
          "old_line_content": "          break;",
          "new_line_content": "        prev_bytes_read = IOSTATS(bytes_read);",
          "content_same": false
        },
        {
          "line": 5894,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "s.ok()",
          "old_line_content": "        }",
          "new_line_content": "        if (!s.ok()) {",
          "content_same": false
        },
        {
          "line": 5899,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "s.ok()",
          "old_line_content": "    }",
          "new_line_content": "    if (!s.ok()) {",
          "content_same": false
        },
        {
          "line": 5904,
          "old_api": null,
          "new_api": "immutable_db_options",
          "old_text": null,
          "new_text": "immutable_db_options()",
          "old_line_content": "    InstrumentedMutexLock l(&mutex_);",
          "new_line_content": "  bool defer_purge = immutable_db_options().avoid_unnecessary_blocking_io;",
          "content_same": false
        },
        {
          "line": 5908,
          "old_api": null,
          "new_api": "Unref",
          "old_text": null,
          "new_text": "sv->Unref()",
          "old_line_content": "        if (defer_purge) {",
          "new_line_content": "      if (sv && sv->Unref()) {",
          "content_same": false
        },
        {
          "line": 5911,
          "old_api": null,
          "new_api": "AddSuperVersionsToFreeQueue",
          "old_text": null,
          "new_text": "AddSuperVersionsToFreeQueue(sv)",
          "old_line_content": "          delete sv;",
          "new_line_content": "          AddSuperVersionsToFreeQueue(sv);",
          "content_same": false
        },
        {
          "line": 5918,
          "old_api": null,
          "new_api": "SchedulePurge",
          "old_text": null,
          "new_text": "SchedulePurge()",
          "old_line_content": "    for (auto cfd : cfd_list) {",
          "new_line_content": "      SchedulePurge();",
          "content_same": false
        },
        {
          "line": 5921,
          "old_api": null,
          "new_api": "UnrefAndTryDelete",
          "old_text": null,
          "new_text": "cfd->UnrefAndTryDelete()",
          "old_line_content": "  }",
          "new_line_content": "      cfd->UnrefAndTryDelete();",
          "content_same": false
        },
        {
          "line": 5924,
          "old_api": null,
          "new_api": "RecordTick",
          "old_text": null,
          "new_text": "RecordTick(stats_, VERIFY_CHECKSUM_READ_BYTES,\n             IOSTATS(bytes_read) - prev_bytes_read)",
          "old_line_content": "  return s;",
          "new_line_content": "  RecordTick(stats_, VERIFY_CHECKSUM_READ_BYTES,",
          "content_same": false
        },
        {
          "line": 5925,
          "old_api": null,
          "new_api": "IOSTATS",
          "old_text": null,
          "new_text": "IOSTATS(bytes_read)",
          "old_line_content": "}",
          "new_line_content": "             IOSTATS(bytes_read) - prev_bytes_read);",
          "content_same": false
        },
        {
          "line": 5934,
          "old_api": null,
          "new_api": "Status::InvalidArgument(\n        \"Cannot call VerifyChecksum with `ReadOptions::io_activity` != \"\n        \"`Env::IOActivity::kUnknown`\")",
          "old_text": null,
          "new_text": "Status::InvalidArgument(\n        \"Cannot call VerifyChecksum with `ReadOptions::io_activity` != \"\n        \"`Env::IOActivity::kUnknown`\")",
          "old_line_content": "        \"`Env::IOActivity::kUnknown`\");",
          "new_line_content": "    return Status::InvalidArgument(",
          "content_same": false
        },
        {
          "line": 5945,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "ROCKSDB_NAMESPACE::GenerateOneFileChecksum(\n      fs_.get(), fname, immutable_db_options_.file_checksum_gen_factory.get(),\n      func_name_expected, &file_checksum, &func_name,\n      read_options.readahead_size, immutable_db_options_.allow_mmap_reads,\n      io_tracer_, immutable_db_options_.rate_limiter.get(),\n      read_options.rate_limiter_priority)",
          "old_line_content": "      func_name_expected, &file_checksum, &func_name,",
          "new_line_content": "  s = ROCKSDB_NAMESPACE::GenerateOneFileChecksum(",
          "content_same": false
        },
        {
          "line": 5946,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "immutable_db_options_.file_checksum_gen_factory.get()",
          "old_line_content": "      read_options.readahead_size, immutable_db_options_.allow_mmap_reads,",
          "new_line_content": "      fs_.get(), fname, immutable_db_options_.file_checksum_gen_factory.get(),",
          "content_same": false
        },
        {
          "line": 5951,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "s.ok()",
          "old_line_content": "    if (file_checksum != file_checksum_expected) {",
          "new_line_content": "  if (s.ok()) {",
          "content_same": false
        },
        {
          "line": 5952,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(func_name_expected == func_name)",
          "old_line_content": "      std::ostringstream oss;",
          "new_line_content": "    assert(func_name_expected == func_name);",
          "content_same": false
        },
        {
          "line": 5959,
          "old_api": null,
          "new_api": "str",
          "old_text": null,
          "new_text": "oss.str()",
          "old_line_content": "    }",
          "new_line_content": "      s = Status::Corruption(oss.str());",
          "content_same": false
        },
        {
          "line": 5960,
          "old_api": null,
          "new_api": "TEST_SYNC_POINT_CALLBACK",
          "old_text": null,
          "new_text": "TEST_SYNC_POINT_CALLBACK(\"DBImpl::VerifyFullFileChecksum:mismatch\", &s)",
          "old_line_content": "  }",
          "new_line_content": "      TEST_SYNC_POINT_CALLBACK(\"DBImpl::VerifyFullFileChecksum:mismatch\", &s);",
          "content_same": false
        },
        {
          "line": 5968,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "immutable_db_options_.listeners.empty()",
          "old_line_content": "  }",
          "new_line_content": "  if (immutable_db_options_.listeners.empty()) {",
          "content_same": false
        },
        {
          "line": 5974,
          "old_api": null,
          "new_api": "GetName",
          "old_text": null,
          "new_text": "cfd->GetName()",
          "old_line_content": "    info.internal_file_path = f.internal_file_path;",
          "new_line_content": "    info.cf_name = cfd->GetName();",
          "content_same": false
        },
        {
          "line": 5980,
          "old_api": null,
          "new_api": "OnExternalFileIngested",
          "old_text": null,
          "new_text": "listener->OnExternalFileIngested(this, info)",
          "old_line_content": "  }",
          "new_line_content": "      listener->OnExternalFileIngested(this, info);",
          "content_same": false
        },
        {
          "line": 5989,
          "old_api": null,
          "new_api": "std::move(trace_writer)",
          "old_text": null,
          "new_text": "std::move(trace_writer)",
          "old_line_content": "}",
          "new_line_content": "                           std::move(trace_writer)));",
          "content_same": false
        },
        {
          "line": 5990,
          "old_api": null,
          "new_api": "Status::OK()",
          "old_text": null,
          "new_text": "Status::OK()",
          "old_line_content": "",
          "new_line_content": "  return Status::OK();",
          "content_same": false
        },
        {
          "line": 5997,
          "old_api": null,
          "new_api": "Close",
          "old_text": null,
          "new_text": "tracer_->Close()",
          "old_line_content": "  } else {",
          "new_line_content": "    s = tracer_->Close();",
          "content_same": false
        },
        {
          "line": 6000,
          "old_api": null,
          "new_api": "Status::IOError(\"No trace file to close\")",
          "old_text": null,
          "new_text": "Status::IOError(\"No trace file to close\")",
          "old_line_content": "  return s;",
          "new_line_content": "    s = Status::IOError(\"No trace file to close\");",
          "content_same": false
        },
        {
          "line": 6009,
          "old_api": null,
          "new_api": "std::move(reader)",
          "old_text": null,
          "new_text": "std::move(reader)",
          "old_line_content": "}",
          "new_line_content": "  replayer->reset(new ReplayerImpl(this, handles, std::move(reader)));",
          "content_same": false
        },
        {
          "line": 6010,
          "old_api": null,
          "new_api": "Status::OK()",
          "old_text": null,
          "new_text": "Status::OK()",
          "old_line_content": "",
          "new_line_content": "  return Status::OK();",
          "content_same": false
        },
        {
          "line": 6023,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "env_->GetSystemClock().get()",
          "old_line_content": "",
          "new_line_content": "      NewBlockCacheTraceWriter(env_->GetSystemClock().get(), trace_writer_opt,",
          "content_same": false
        },
        {
          "line": 6026,
          "old_api": null,
          "new_api": "StartTrace",
          "old_text": null,
          "new_text": "block_cache_tracer_.StartTrace(block_trace_opts,\n                                        std::move(block_cache_trace_writer))",
          "old_line_content": "}",
          "new_line_content": "  return block_cache_tracer_.StartTrace(block_trace_opts,",
          "content_same": false
        },
        {
          "line": 6027,
          "old_api": null,
          "new_api": "std::move(block_cache_trace_writer)",
          "old_text": null,
          "new_text": "std::move(block_cache_trace_writer)",
          "old_line_content": "",
          "new_line_content": "                                        std::move(block_cache_trace_writer));",
          "content_same": false
        },
        {
          "line": 6033,
          "old_api": null,
          "new_api": "std::move(trace_writer)",
          "old_text": null,
          "new_text": "std::move(trace_writer)",
          "old_line_content": "",
          "new_line_content": "  return block_cache_tracer_.StartTrace(trace_options, std::move(trace_writer));",
          "content_same": false
        },
        {
          "line": 6037,
          "old_api": null,
          "new_api": "EndTrace",
          "old_text": null,
          "new_text": "block_cache_tracer_.EndTrace()",
          "old_line_content": "}",
          "new_line_content": "  block_cache_tracer_.EndTrace();",
          "content_same": false
        },
        {
          "line": 6038,
          "old_api": null,
          "new_api": "Status::OK()",
          "old_text": null,
          "new_text": "Status::OK()",
          "old_line_content": "",
          "new_line_content": "  return Status::OK();",
          "content_same": false
        },
        {
          "line": 6048,
          "old_api": null,
          "new_api": "IteratorSeek",
          "old_text": null,
          "new_text": "tracer_->IteratorSeek(cf_id, key, lower_bound, upper_bound)",
          "old_line_content": "  }",
          "new_line_content": "      s = tracer_->IteratorSeek(cf_id, key, lower_bound, upper_bound);",
          "content_same": false
        },
        {
          "line": 6061,
          "old_api": null,
          "new_api": "IteratorSeekForPrev",
          "old_text": null,
          "new_text": "tracer_->IteratorSeekForPrev(cf_id, key, lower_bound, upper_bound)",
          "old_line_content": "  }",
          "new_line_content": "      s = tracer_->IteratorSeekForPrev(cf_id, key, lower_bound, upper_bound);",
          "content_same": false
        },
        {
          "line": 6083,
          "old_api": null,
          "new_api": "static_cast<uint64_t>(num)",
          "old_text": null,
          "new_text": "static_cast<uint64_t>(num)",
          "old_line_content": "  VersionEdit dummy_edit;",
          "new_line_content": "  *next_file_number = versions_->FetchAddFileNumber(static_cast<uint64_t>(num));",
          "content_same": false
        },
        {
          "line": 6084,
          "old_api": null,
          "new_api": "GetLatestMutableCFOptions",
          "old_text": null,
          "new_text": "cfd->GetLatestMutableCFOptions()",
          "old_line_content": "  // If crash happen after a hard link established, Recover function may",
          "new_line_content": "  auto cf_options = cfd->GetLatestMutableCFOptions();",
          "content_same": false
        },
        {
          "line": 6092,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "s.ok()",
          "old_line_content": "  }",
          "new_line_content": "  if (s.ok()) {",
          "content_same": false
        },
        {
          "line": 6095,
          "old_api": null,
          "new_api": "Clean",
          "old_text": null,
          "new_text": "dummy_sv_ctx.Clean()",
          "old_line_content": "}",
          "new_line_content": "  dummy_sv_ctx.Clean();",
          "content_same": false
        },
        {
          "line": 6102,
          "old_api": null,
          "new_api": "GetColumnFamilySet",
          "old_text": null,
          "new_text": "versions_->GetColumnFamilySet()",
          "old_line_content": "        uint64_t ctime;",
          "new_line_content": "    for (auto cfd : *versions_->GetColumnFamilySet()) {",
          "content_same": false
        },
        {
          "line": 6103,
          "old_api": null,
          "new_api": "IsDropped",
          "old_text": null,
          "new_text": "cfd->IsDropped()",
          "old_line_content": "        {",
          "new_line_content": "      if (!cfd->IsDropped()) {",
          "content_same": false
        },
        {
          "line": 6108,
          "old_api": null,
          "new_api": "GetCreationTimeOfOldestFile",
          "old_text": null,
          "new_text": "version->GetCreationTimeOfOldestFile(&ctime)",
          "old_line_content": "        }",
          "new_line_content": "          version->GetCreationTimeOfOldestFile(&ctime);",
          "content_same": false
        },
        {
          "line": 6109,
          "old_api": null,
          "new_api": "ReturnAndCleanupSuperVersion",
          "old_text": null,
          "new_text": "ReturnAndCleanupSuperVersion(cfd, sv)",
          "old_line_content": "",
          "new_line_content": "          ReturnAndCleanupSuperVersion(cfd, sv);",
          "content_same": false
        },
        {
          "line": 6123,
          "old_api": null,
          "new_api": "Status::NotSupported(\"This API only works if max_open_files = -1\")",
          "old_text": null,
          "new_text": "Status::NotSupported(\"This API only works if max_open_files = -1\")",
          "old_line_content": "}",
          "new_line_content": "    return Status::NotSupported(\"This API only works if max_open_files = -1\");",
          "content_same": false
        },
        {
          "line": 6133,
          "old_api": null,
          "new_api": "GetLatestSequenceNumber",
          "old_text": null,
          "new_text": "GetLatestSequenceNumber()",
          "old_line_content": "  {",
          "new_line_content": "  SequenceNumber seqno = GetLatestSequenceNumber();",
          "content_same": false
        },
        {
          "line": 6137,
          "old_api": null,
          "new_api": "Append",
          "old_text": null,
          "new_text": "seqno_time_mapping_.Append(seqno, unix_time)",
          "old_line_content": "  if (!appended) {",
          "new_line_content": "    appended = seqno_time_mapping_.Append(seqno, unix_time);",
          "content_same": false
        },
        {
          "line": 6140,
          "old_api": null,
          "new_api": "ROCKS_LOG_WARN",
          "old_text": null,
          "new_text": "ROCKS_LOG_WARN(immutable_db_options_.info_log,\n                   \"Failed to insert sequence number to time entry: %\" PRIu64\n                   \" -> %\" PRIu64,\n                   seqno, unix_time)",
          "old_line_content": "                   \" -> %\" PRIu64,",
          "new_line_content": "    ROCKS_LOG_WARN(immutable_db_options_.info_log,",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 4450,
          "old_api": "ioptions",
          "new_api": null,
          "old_text": "cfd->ioptions()",
          "new_text": null,
          "old_line_content": "        vstorage->ComputeCompactionScore(*cfd->ioptions(),",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 4451,
          "old_api": "GetLatestMutableCFOptions",
          "new_api": null,
          "old_text": "cfd->GetLatestMutableCFOptions()",
          "new_text": null,
          "old_line_content": "                                         *cfd->GetLatestMutableCFOptions());",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4455,
          "old_api": "Clean",
          "new_api": null,
          "old_text": "job_context.Clean()",
          "new_text": null,
          "old_line_content": "      job_context.Clean();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4458,
          "old_api": "Ref",
          "new_api": null,
          "old_text": "input_version->Ref()",
          "new_text": null,
          "old_line_content": "    input_version->Ref();",
          "new_line_content": "      return status;",
          "content_same": false
        },
        {
          "line": 4459,
          "old_api": "GetLatestMutableCFOptions",
          "new_api": null,
          "old_text": "cfd->GetLatestMutableCFOptions()",
          "new_text": null,
          "old_line_content": "    status = versions_->LogAndApply(cfd, *cfd->GetLatestMutableCFOptions(),",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4462,
          "old_api": "ok",
          "new_api": null,
          "old_text": "status.ok()",
          "new_text": null,
          "old_line_content": "    if (status.ok()) {",
          "new_line_content": "                                    read_options, &edit, &mutex_,",
          "content_same": false
        },
        {
          "line": 4470,
          "old_api": "Unref",
          "new_api": null,
          "old_text": "input_version->Unref()",
          "new_text": null,
          "old_line_content": "    input_version->Unref();",
          "new_line_content": "      deleted_file->being_compacted = false;",
          "content_same": false
        },
        {
          "line": 4471,
          "old_api": "FindObsoleteFiles",
          "new_api": null,
          "old_text": "FindObsoleteFiles(&job_context, false)",
          "new_text": null,
          "old_line_content": "    FindObsoleteFiles(&job_context, false);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4474,
          "old_api": "LogFlush",
          "new_api": null,
          "old_text": "LogFlush(immutable_db_options_.info_log)",
          "new_text": null,
          "old_line_content": "  LogFlush(immutable_db_options_.info_log);",
          "new_line_content": "  }  // lock released here",
          "content_same": false
        },
        {
          "line": 4486,
          "old_api": "GetLiveFilesMetaData",
          "new_api": null,
          "old_text": "versions_->GetLiveFilesMetaData(metadata)",
          "new_text": null,
          "old_line_content": "  versions_->GetLiveFilesMetaData(metadata);",
          "new_line_content": "void DBImpl::GetLiveFilesMetaData(std::vector<LiveFileMetaData>* metadata) {",
          "content_same": false
        },
        {
          "line": 4491,
          "old_api": "GetLiveFilesChecksumInfo",
          "new_api": null,
          "old_text": "versions_->GetLiveFilesChecksumInfo(checksum_list)",
          "new_text": null,
          "old_line_content": "  return versions_->GetLiveFilesChecksumInfo(checksum_list);",
          "new_line_content": "Status DBImpl::GetLiveFilesChecksumInfo(FileChecksumList* checksum_list) {",
          "content_same": false
        },
        {
          "line": 4496,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(column_family)",
          "new_text": null,
          "old_line_content": "  assert(column_family);",
          "new_line_content": "void DBImpl::GetColumnFamilyMetaData(ColumnFamilyHandle* column_family,",
          "content_same": false
        },
        {
          "line": 4499,
          "old_api": "GetAndRefSuperVersion",
          "new_api": null,
          "old_text": "GetAndRefSuperVersion(cfd)",
          "new_text": null,
          "old_line_content": "  auto* sv = GetAndRefSuperVersion(cfd);",
          "new_line_content": "  auto* cfd =",
          "content_same": false
        },
        {
          "line": 4511,
          "old_api": "GetColumnFamilyMetaData",
          "new_api": null,
          "old_text": "sv->current->GetColumnFamilyMetaData(cf_meta)",
          "new_text": null,
          "old_line_content": "    sv->current->GetColumnFamilyMetaData(cf_meta);",
          "new_line_content": "    // should not be big. We still need to keep an eye on it.",
          "content_same": false
        },
        {
          "line": 4519,
          "old_api": "GetColumnFamilySet",
          "new_api": null,
          "old_text": "versions_->GetColumnFamilySet()",
          "new_text": null,
          "old_line_content": "  for (auto cfd : *(versions_->GetColumnFamilySet())) {",
          "new_line_content": "    std::vector<ColumnFamilyMetaData>* metadata) {",
          "content_same": false
        },
        {
          "line": 4522,
          "old_api": "back",
          "new_api": null,
          "old_text": "metadata->back()",
          "new_text": null,
          "old_line_content": "      cfd->current()->GetColumnFamilyMetaData(&metadata->back());",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 4528,
          "old_api": "AssertHeld",
          "new_api": null,
          "old_text": "mutex_.AssertHeld()",
          "new_text": null,
          "old_line_content": "  mutex_.AssertHeld();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4531,
          "old_api": "TEST_SYNC_POINT",
          "new_api": null,
          "old_text": "TEST_SYNC_POINT(\"DBImpl::CheckConsistency:AfterGetLiveFilesMetaData\")",
          "new_text": null,
          "old_line_content": "  TEST_SYNC_POINT(\"DBImpl::CheckConsistency:AfterGetLiveFilesMetaData\");",
          "new_line_content": "  std::vector<LiveFileMetaData> metadata;",
          "content_same": false
        },
        {
          "line": 4545,
          "old_api": "empty",
          "new_api": null,
          "old_text": "fname.empty()",
          "new_text": null,
          "old_line_content": "      if (!fname.empty() && fname[0] == '/') {",
          "new_line_content": "      // md.name has a leading \"/\". Remove it.",
          "content_same": false
        },
        {
          "line": 4546,
          "old_api": "substr",
          "new_api": null,
          "old_text": "fname.substr(1)",
          "new_text": null,
          "old_line_content": "        fname = fname.substr(1);",
          "new_line_content": "      std::string fname = md.name;",
          "content_same": false
        },
        {
          "line": 4556,
          "old_api": "GetChildren",
          "new_api": null,
          "old_text": "fs_->GetChildren(directory, io_opts, &existing_files,\n                                  /*IODebugContext*=*/nullptr)",
          "new_text": null,
          "old_line_content": "      Status s = fs_->GetChildren(directory, io_opts, &existing_files,",
          "new_line_content": "      std::string directory = dir_files.first;",
          "content_same": false
        },
        {
          "line": 4563,
          "old_api": "end",
          "new_api": null,
          "old_text": "existing_files.end()",
          "new_text": null,
          "old_line_content": "      std::sort(existing_files.begin(), existing_files.end());",
          "new_line_content": "        continue;",
          "content_same": false
        },
        {
          "line": 4566,
          "old_api": "end",
          "new_api": null,
          "old_text": "existing_files.end()",
          "new_text": null,
          "old_line_content": "        if (!std::binary_search(existing_files.begin(), existing_files.end(),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4569,
          "old_api": "Rocks2LevelTableFileName",
          "new_api": null,
          "old_text": "Rocks2LevelTableFileName(fname)",
          "new_text": null,
          "old_line_content": "                                Rocks2LevelTableFileName(fname))) {",
          "new_line_content": "                                fname) &&",
          "content_same": false
        },
        {
          "line": 4581,
          "old_api": "TEST_SYNC_POINT",
          "new_api": null,
          "old_text": "TEST_SYNC_POINT(\"DBImpl::CheckConsistency:BeforeGetFileSize\")",
          "new_text": null,
          "old_line_content": "      TEST_SYNC_POINT(\"DBImpl::CheckConsistency:BeforeGetFileSize\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4582,
          "old_api": "GetFileSize",
          "new_api": null,
          "old_text": "env_->GetFileSize(file_path, &fsize)",
          "new_text": null,
          "old_line_content": "      Status s = env_->GetFileSize(file_path, &fsize);",
          "new_line_content": "      uint64_t fsize = 0;",
          "content_same": false
        },
        {
          "line": 4593,
          "old_api": "std::to_string(md.size)",
          "new_api": null,
          "old_text": "std::to_string(md.size)",
          "new_text": null,
          "old_line_content": "                               std::to_string(md.size) + \", actual size \" +",
          "new_line_content": "        corruption_messages += \"Sst file size mismatch: \" + file_path +",
          "content_same": false
        },
        {
          "line": 4594,
          "old_api": "std::to_string(fsize)",
          "new_api": null,
          "old_text": "std::to_string(fsize)",
          "new_text": null,
          "old_line_content": "                               std::to_string(fsize) + \"\\n\";",
          "new_line_content": "                               \". Size recorded in manifest \" +",
          "content_same": false
        },
        {
          "line": 4599,
          "old_api": "size",
          "new_api": null,
          "old_text": "corruption_messages.size()",
          "new_text": null,
          "old_line_content": "  if (corruption_messages.size() == 0) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4600,
          "old_api": "Status::OK()",
          "new_api": null,
          "old_text": "Status::OK()",
          "new_text": null,
          "old_line_content": "    return Status::OK();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4607,
          "old_api": "assign",
          "new_api": null,
          "old_text": "identity.assign(db_id_)",
          "new_text": null,
          "old_line_content": "  identity.assign(db_id_);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4608,
          "old_api": "Status::OK()",
          "new_api": null,
          "old_text": "Status::OK()",
          "new_text": null,
          "old_line_content": "  return Status::OK();",
          "new_line_content": "Status DBImpl::GetDbIdentity(std::string& identity) const {",
          "content_same": false
        },
        {
          "line": 4612,
          "old_api": "IdentityFileName",
          "new_api": null,
          "old_text": "IdentityFileName(dbname_)",
          "new_text": null,
          "old_line_content": "  std::string idfilename = IdentityFileName(dbname_);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4615,
          "old_api": "get",
          "new_api": null,
          "old_text": "fs_.get()",
          "new_text": null,
          "old_line_content": "  Status s = ReadFileToString(fs_.get(), idfilename, identity);",
          "new_line_content": "  const FileOptions soptions;",
          "content_same": false
        },
        {
          "line": 4616,
          "old_api": "ok",
          "new_api": null,
          "old_text": "s.ok()",
          "new_text": null,
          "old_line_content": "  if (!s.ok()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4622,
          "old_api": "back",
          "new_api": null,
          "old_text": "identity->back()",
          "new_text": null,
          "old_line_content": "  if (identity->size() > 0 && identity->back() == '\\n') {",
          "new_line_content": "  // If last character is '\\n' remove it from identity. (Old implementations",
          "content_same": false
        },
        {
          "line": 4623,
          "old_api": "pop_back",
          "new_api": null,
          "old_text": "identity->pop_back()",
          "new_text": null,
          "old_line_content": "    identity->pop_back();",
          "new_line_content": "  // of Env::GenerateUniqueId() would include a trailing '\\n'.)",
          "content_same": false
        },
        {
          "line": 4629,
          "old_api": "assign",
          "new_api": null,
          "old_text": "session_id.assign(db_session_id_)",
          "new_text": null,
          "old_line_content": "  session_id.assign(db_session_id_);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4630,
          "old_api": "Status::OK()",
          "new_api": null,
          "old_text": "Status::OK()",
          "new_text": null,
          "old_line_content": "  return Status::OK();",
          "new_line_content": "Status DBImpl::GetDbSessionId(std::string& session_id) const {",
          "content_same": false
        },
        {
          "line": 4640,
          "old_api": "Reset",
          "new_api": null,
          "old_text": "DbSessionIdGen()->Reset()",
          "new_text": null,
          "old_line_content": "void DBImpl::TEST_ResetDbSessionIdGen() { DbSessionIdGen()->Reset(); }",
          "new_line_content": "}  // namespace",
          "content_same": false
        },
        {
          "line": 4644,
          "old_api": "DbSessionIdGen",
          "new_api": null,
          "old_text": "DbSessionIdGen()",
          "new_text": null,
          "old_line_content": "  auto gen = DbSessionIdGen();",
          "new_line_content": "std::string DBImpl::GenerateDbSessionId(Env*) {",
          "content_same": false
        },
        {
          "line": 4647,
          "old_api": "GenerateNext",
          "new_api": null,
          "old_text": "gen->GenerateNext(&hi, &lo)",
          "new_text": null,
          "old_line_content": "  gen->GenerateNext(&hi, &lo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4651,
          "old_api": "GenerateNext",
          "new_api": null,
          "old_text": "gen->GenerateNext(&hi, &lo)",
          "new_text": null,
          "old_line_content": "    gen->GenerateNext(&hi, &lo);",
          "new_line_content": "    // Avoid emitting session ID with lo==0, so that SST unique",
          "content_same": false
        },
        {
          "line": 4652,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(lo != 0)",
          "new_text": null,
          "old_line_content": "    assert(lo != 0);",
          "new_line_content": "    // IDs can be more easily ensured non-zero",
          "content_same": false
        },
        {
          "line": 4658,
          "old_api": "GenerateDbSessionId",
          "new_api": null,
          "old_text": "GenerateDbSessionId(env_)",
          "new_text": null,
          "old_line_content": "  db_session_id_ = GenerateDbSessionId(env_);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4659,
          "old_api": "TEST_SYNC_POINT_CALLBACK",
          "new_api": null,
          "old_text": "TEST_SYNC_POINT_CALLBACK(\"DBImpl::SetDbSessionId\", &db_session_id_)",
          "new_text": null,
          "old_line_content": "  TEST_SYNC_POINT_CALLBACK(\"DBImpl::SetDbSessionId\", &db_session_id_);",
          "new_line_content": "void DBImpl::SetDbSessionId() {",
          "content_same": false
        },
        {
          "line": 4666,
          "old_api": "Status::NotSupported(\"\")",
          "new_api": null,
          "old_text": "Status::NotSupported(\"\")",
          "new_text": null,
          "old_line_content": "  return Status::NotSupported(\"\");",
          "new_line_content": "                              const std::string& /*column_family_name*/,",
          "content_same": false
        },
        {
          "line": 4673,
          "old_api": "Status::NotSupported(\"\")",
          "new_api": null,
          "old_text": "Status::NotSupported(\"\")",
          "new_text": null,
          "old_line_content": "  return Status::NotSupported(\"\");",
          "new_line_content": "    const std::vector<std::string>& /*column_family_names*/,",
          "content_same": false
        },
        {
          "line": 4679,
          "old_api": "Status::NotSupported(\"\")",
          "new_api": null,
          "old_text": "Status::NotSupported(\"\")",
          "new_text": null,
          "old_line_content": "  return Status::NotSupported(\"\");",
          "new_line_content": "    const std::vector<ColumnFamilyDescriptor>& /*column_families*/,",
          "content_same": false
        },
        {
          "line": 4683,
          "old_api": "Status::NotSupported(\"\")",
          "new_api": null,
          "old_text": "Status::NotSupported(\"\")",
          "new_text": null,
          "old_line_content": "  return Status::NotSupported(\"\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4688,
          "old_api": "Status::NotSupported(\"\")",
          "new_api": null,
          "old_text": "Status::NotSupported(\"\")",
          "new_text": null,
          "old_line_content": "  return Status::NotSupported(\"\");",
          "new_line_content": "Status DB::DropColumnFamilies(",
          "content_same": false
        },
        {
          "line": 4692,
          "old_api": "DefaultColumnFamily",
          "new_api": null,
          "old_text": "DefaultColumnFamily()",
          "new_text": null,
          "old_line_content": "  if (DefaultColumnFamily() == column_family) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4693,
          "old_api": "Status::InvalidArgument(\n        \"Cannot destroy the handle returned by DefaultColumnFamily()\")",
          "new_api": null,
          "old_text": "Status::InvalidArgument(\n        \"Cannot destroy the handle returned by DefaultColumnFamily()\")",
          "new_text": null,
          "old_line_content": "    return Status::InvalidArgument(",
          "new_line_content": "Status DB::DestroyColumnFamilyHandle(ColumnFamilyHandle* column_family) {",
          "content_same": false
        },
        {
          "line": 4697,
          "old_api": "Status::OK()",
          "new_api": null,
          "old_text": "Status::OK()",
          "new_text": null,
          "old_line_content": "  return Status::OK();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4709,
          "old_api": "MaybeReleaseTimestampedSnapshotsAndCheck",
          "new_api": null,
          "old_text": "MaybeReleaseTimestampedSnapshotsAndCheck()",
          "new_text": null,
          "old_line_content": "    const Status s = MaybeReleaseTimestampedSnapshotsAndCheck();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4710,
          "old_api": "ok",
          "new_api": null,
          "old_text": "s.ok()",
          "new_text": null,
          "old_line_content": "    if (!s.ok()) {",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 4715,
          "old_api": "CloseImpl",
          "new_api": null,
          "old_text": "CloseImpl()",
          "new_text": null,
          "old_line_content": "  closing_status_ = CloseImpl();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4723,
          "old_api": "GetFileSystem",
          "new_api": null,
          "old_text": "db_options.env->GetFileSystem()",
          "new_text": null,
          "old_line_content": "  const std::shared_ptr<FileSystem>& fs = db_options.env->GetFileSystem();",
          "new_line_content": "                              const std::string& name,",
          "content_same": false
        },
        {
          "line": 4724,
          "old_api": "get",
          "new_api": null,
          "old_text": "fs.get()",
          "new_text": null,
          "old_line_content": "  return VersionSet::ListColumnFamilies(column_families, name, fs.get());",
          "new_line_content": "                              std::vector<std::string>* column_families) {",
          "content_same": false
        },
        {
          "line": 4734,
          "old_api": "IsWalDirSameAsDBPath",
          "new_api": null,
          "old_text": "soptions.IsWalDirSameAsDBPath()",
          "new_text": null,
          "old_line_content": "  bool wal_in_db_path = soptions.IsWalDirSameAsDBPath();",
          "new_line_content": "  Env* env = soptions.env;",
          "content_same": false
        },
        {
          "line": 4738,
          "old_api": "reset",
          "new_api": null,
          "old_text": "soptions.info_log.reset()",
          "new_text": null,
          "old_line_content": "  soptions.info_log.reset();",
          "new_line_content": "  // Reset the logger because it holds a handle to the",
          "content_same": false
        },
        {
          "line": 4741,
          "old_api": "PermitUncheckedError",
          "new_api": null,
          "old_text": "soptions.fs\n      ->GetChildren(dbname, io_opts, &filenames,\n                    /*IODebugContext*=*/nullptr)\n      .PermitUncheckedError()",
          "new_text": null,
          "old_line_content": "  soptions.fs",
          "new_line_content": "  IOOptions io_opts;",
          "content_same": false
        },
        {
          "line": 4747,
          "old_api": "LockFileName",
          "new_api": null,
          "old_text": "LockFileName(dbname)",
          "new_text": null,
          "old_line_content": "  const std::string lockname = LockFileName(dbname);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4748,
          "old_api": "LockFile",
          "new_api": null,
          "old_text": "env->LockFile(lockname, &lock)",
          "new_text": null,
          "old_line_content": "  Status result = env->LockFile(lockname, &lock);",
          "new_line_content": "  FileLock* lock;",
          "content_same": false
        },
        {
          "line": 4752,
          "old_api": "empty",
          "new_api": null,
          "old_text": "soptions.db_log_dir.empty()",
          "new_text": null,
          "old_line_content": "    InfoLogPrefix info_log_prefix(!soptions.db_log_dir.empty(), dbname);",
          "new_line_content": "    uint64_t number;",
          "content_same": false
        },
        {
          "line": 4759,
          "old_api": "DestroyDB",
          "new_api": null,
          "old_text": "DestroyDB(path_to_delete, options)",
          "new_text": null,
          "old_line_content": "          del = DestroyDB(path_to_delete, options);",
          "new_line_content": "        std::string path_to_delete = dbname + \"/\" + fname;",
          "content_same": false
        },
        {
          "line": 4762,
          "old_api": "DeleteDBFile",
          "new_api": null,
          "old_text": "DeleteDBFile(\n              &soptions, path_to_delete, dbname,\n              /*force_bg=*/false,\n              /*force_fg=*/(type == kWalFile) ? !wal_in_db_path : false)",
          "new_text": null,
          "old_line_content": "          del = DeleteDBFile(",
          "new_line_content": "        } else if (type == kTableFile || type == kWalFile ||",
          "content_same": false
        },
        {
          "line": 4767,
          "old_api": "DeleteFile",
          "new_api": null,
          "old_text": "env->DeleteFile(path_to_delete)",
          "new_text": null,
          "old_line_content": "          del = env->DeleteFile(path_to_delete);",
          "new_line_content": "              /*force_fg=*/(type == kWalFile) ? !wal_in_db_path : false);",
          "content_same": false
        },
        {
          "line": 4777,
          "old_api": "insert",
          "new_api": null,
          "old_text": "paths.insert(db_path.path)",
          "new_text": null,
          "old_line_content": "      paths.insert(db_path.path);",
          "new_line_content": "    std::set<std::string> paths;",
          "content_same": false
        },
        {
          "line": 4781,
          "old_api": "insert",
          "new_api": null,
          "old_text": "paths.insert(cf_path.path)",
          "new_text": null,
          "old_line_content": "        paths.insert(cf_path.path);",
          "new_line_content": "    for (const ColumnFamilyDescriptor& cf : column_families) {",
          "content_same": false
        },
        {
          "line": 4786,
          "old_api": "ok",
          "new_api": null,
          "old_text": "soptions.fs\n              ->GetChildren(path, io_opts, &filenames,\n                            /*IODebugContext*=*/nullptr)\n              .ok()",
          "new_text": null,
          "old_line_content": "      if (soptions.fs",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4791,
          "old_api": "ParseFileName",
          "new_api": null,
          "old_text": "ParseFileName(fname, &number, &type)",
          "new_text": null,
          "old_line_content": "          if (ParseFileName(fname, &number, &type) &&",
          "new_line_content": "              .ok()) {",
          "content_same": false
        },
        {
          "line": 4795,
          "old_api": "DeleteDBFile",
          "new_api": null,
          "old_text": "DeleteDBFile(&soptions, file_path, dbname,\n                                      /*force_bg=*/false, /*force_fg=*/false)",
          "new_text": null,
          "old_line_content": "            Status del = DeleteDBFile(&soptions, file_path, dbname,",
          "new_line_content": "               type == kBlobFile)) {  // Lock file will be deleted at end",
          "content_same": false
        },
        {
          "line": 4803,
          "old_api": "PermitUncheckedError",
          "new_api": null,
          "old_text": "env->DeleteDir(path).PermitUncheckedError()",
          "new_text": null,
          "old_line_content": "        env->DeleteDir(path).PermitUncheckedError();",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4808,
          "old_api": "ArchivalDirectory",
          "new_api": null,
          "old_text": "ArchivalDirectory(dbname)",
          "new_text": null,
          "old_line_content": "    std::string archivedir = ArchivalDirectory(dbname);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4816,
          "old_api": "ArchivalDirectory",
          "new_api": null,
          "old_text": "ArchivalDirectory(soptions.wal_dir)",
          "new_text": null,
          "old_line_content": "      archivedir = ArchivalDirectory(soptions.wal_dir);",
          "new_line_content": "                            /*IODebugContext*=*/nullptr)",
          "content_same": false
        },
        {
          "line": 4823,
          "old_api": "ok",
          "new_api": null,
          "old_text": "soptions.fs\n            ->GetChildren(archivedir, io_opts, &archiveFiles,\n                          /*IODebugContext*=*/nullptr)\n            .ok()",
          "new_text": null,
          "old_line_content": "    if (soptions.fs",
          "new_line_content": "    // removing them",
          "content_same": false
        },
        {
          "line": 4829,
          "old_api": "ParseFileName",
          "new_api": null,
          "old_text": "ParseFileName(file, &number, &type)",
          "new_text": null,
          "old_line_content": "        if (ParseFileName(file, &number, &type) && type == kWalFile) {",
          "new_line_content": "      // Delete archival files.",
          "content_same": false
        },
        {
          "line": 4839,
          "old_api": "PermitUncheckedError",
          "new_api": null,
          "old_text": "env->DeleteDir(archivedir).PermitUncheckedError()",
          "new_text": null,
          "old_line_content": "      env->DeleteDir(archivedir).PermitUncheckedError();",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 4845,
          "old_api": "ParseFileName",
          "new_api": null,
          "old_text": "ParseFileName(file, &number, &type)",
          "new_text": null,
          "old_line_content": "        if (ParseFileName(file, &number, &type) && type == kWalFile) {",
          "new_line_content": "    if (wal_dir_exists) {",
          "content_same": false
        },
        {
          "line": 4850,
          "old_api": "ok",
          "new_api": null,
          "old_text": "result.ok()",
          "new_text": null,
          "old_line_content": "          if (!del.ok() && result.ok()) {",
          "new_line_content": "                           soptions.wal_dir, /*force_bg=*/false,",
          "content_same": false
        },
        {
          "line": 4856,
          "old_api": "PermitUncheckedError",
          "new_api": null,
          "old_text": "env->DeleteDir(soptions.wal_dir).PermitUncheckedError()",
          "new_text": null,
          "old_line_content": "      env->DeleteDir(soptions.wal_dir).PermitUncheckedError();",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 4860,
          "old_api": "PermitUncheckedError",
          "new_api": null,
          "old_text": "env->UnlockFile(lock).PermitUncheckedError()",
          "new_text": null,
          "old_line_content": "    env->UnlockFile(lock).PermitUncheckedError();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4861,
          "old_api": "PermitUncheckedError",
          "new_api": null,
          "old_text": "env->DeleteFile(lockname).PermitUncheckedError()",
          "new_text": null,
          "old_line_content": "    env->DeleteFile(lockname).PermitUncheckedError();",
          "new_line_content": "    // Ignore error since state is already gone",
          "content_same": false
        },
        {
          "line": 4865,
          "old_api": "reset",
          "new_api": null,
          "old_text": "soptions.sst_file_manager.reset()",
          "new_text": null,
          "old_line_content": "    soptions.sst_file_manager.reset();",
          "new_line_content": "    // sst_file_manager holds a ref to the logger. Make sure the logger is",
          "content_same": false
        },
        {
          "line": 4868,
          "old_api": "PermitUncheckedError",
          "new_api": null,
          "old_text": "env->DeleteDir(dbname).PermitUncheckedError()",
          "new_text": null,
          "old_line_content": "    env->DeleteDir(dbname).PermitUncheckedError();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4878,
          "old_api": "Lock",
          "new_api": null,
          "old_text": "mutex_.Lock()",
          "new_text": null,
          "old_line_content": "    mutex_.Lock();",
          "new_line_content": "  WriteThread::Writer w;",
          "content_same": false
        },
        {
          "line": 4883,
          "old_api": "EnterUnbatched",
          "new_api": null,
          "old_text": "write_thread_.EnterUnbatched(&w, &mutex_)",
          "new_text": null,
          "old_line_content": "    write_thread_.EnterUnbatched(&w, &mutex_);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4890,
          "old_api": "GetColumnFamilySet",
          "new_api": null,
          "old_text": "versions_->GetColumnFamilySet()",
          "new_text": null,
          "old_line_content": "  for (auto cfd : *versions_->GetColumnFamilySet()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4891,
          "old_api": "IsDropped",
          "new_api": null,
          "old_text": "cfd->IsDropped()",
          "new_text": null,
          "old_line_content": "    if (cfd->IsDropped()) {",
          "new_line_content": "  // This part requires mutex to protect the column family options",
          "content_same": false
        },
        {
          "line": 4894,
          "old_api": "GetName",
          "new_api": null,
          "old_text": "cfd->GetName()",
          "new_text": null,
          "old_line_content": "    cf_names.push_back(cfd->GetName());",
          "new_line_content": "      continue;",
          "content_same": false
        },
        {
          "line": 4895,
          "old_api": "GetLatestCFOptions",
          "new_api": null,
          "old_text": "cfd->GetLatestCFOptions()",
          "new_text": null,
          "old_line_content": "    cf_opts.push_back(cfd->GetLatestCFOptions());",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4901,
          "old_api": "BuildDBOptions",
          "new_api": null,
          "old_text": "BuildDBOptions(immutable_db_options_, mutable_db_options_)",
          "new_text": null,
          "old_line_content": "      BuildDBOptions(immutable_db_options_, mutable_db_options_);",
          "new_line_content": "  // because the single write thread ensures all new writes get queued.",
          "content_same": false
        },
        {
          "line": 4902,
          "old_api": "Unlock",
          "new_api": null,
          "old_text": "mutex_.Unlock()",
          "new_text": null,
          "old_line_content": "  mutex_.Unlock();",
          "new_line_content": "  DBOptions db_options =",
          "content_same": false
        },
        {
          "line": 4905,
          "old_api": "TEST_SYNC_POINT",
          "new_api": null,
          "old_text": "TEST_SYNC_POINT(\"DBImpl::WriteOptionsFile:2\")",
          "new_text": null,
          "old_line_content": "  TEST_SYNC_POINT(\"DBImpl::WriteOptionsFile:2\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4910,
          "old_api": "NewFileNumber",
          "new_api": null,
          "old_text": "versions_->NewFileNumber()",
          "new_text": null,
          "old_line_content": "      TempOptionsFileName(GetName(), versions_->NewFileNumber());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4911,
          "old_api": "get",
          "new_api": null,
          "old_text": "PersistRocksDBOptions(db_options, cf_names, cf_opts, file_name,\n                                   fs_.get())",
          "new_text": null,
          "old_line_content": "  Status s = PersistRocksDBOptions(db_options, cf_names, cf_opts, file_name,",
          "new_line_content": "  std::string file_name =",
          "content_same": false
        },
        {
          "line": 4915,
          "old_api": "RenameTempFileToOptionsFile",
          "new_api": null,
          "old_text": "RenameTempFileToOptionsFile(file_name)",
          "new_text": null,
          "old_line_content": "    s = RenameTempFileToOptionsFile(file_name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4918,
          "old_api": "ok",
          "new_api": null,
          "old_text": "GetEnv()->FileExists(file_name).ok()",
          "new_text": null,
          "old_line_content": "  if (!s.ok() && GetEnv()->FileExists(file_name).ok()) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4919,
          "old_api": "ok",
          "new_api": null,
          "old_text": "GetEnv()->DeleteFile(file_name).ok()",
          "new_text": null,
          "old_line_content": "    if (!GetEnv()->DeleteFile(file_name).ok()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4928,
          "old_api": "Lock",
          "new_api": null,
          "old_text": "mutex_.Lock()",
          "new_text": null,
          "old_line_content": "    mutex_.Lock();",
          "new_line_content": "  // restore lock",
          "content_same": false
        },
        {
          "line": 4931,
          "old_api": "ExitUnbatched",
          "new_api": null,
          "old_text": "write_thread_.ExitUnbatched(&w)",
          "new_text": null,
          "old_line_content": "    write_thread_.ExitUnbatched(&w);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4934,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "ROCKS_LOG_WARN(immutable_db_options_.info_log,\n                   \"Unnable to persist options -- %s\", s.ToString().c_str())",
          "new_text": null,
          "old_line_content": "    ROCKS_LOG_WARN(immutable_db_options_.info_log,",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4938,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "s.ToString().c_str()",
          "new_text": null,
          "old_line_content": "                             s.ToString().c_str());",
          "new_line_content": "    if (immutable_db_options_.fail_if_options_file_error) {",
          "content_same": false
        },
        {
          "line": 4941,
          "old_api": "Status::OK()",
          "new_api": null,
          "old_text": "Status::OK()",
          "new_text": null,
          "old_line_content": "  return Status::OK();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4949,
          "old_api": "size",
          "new_api": null,
          "old_text": "filenames.size()",
          "new_text": null,
          "old_line_content": "  if (filenames.size() <= num_files_to_keep) {",
          "new_line_content": "                              const std::shared_ptr<Logger>& info_log,",
          "content_same": false
        },
        {
          "line": 4952,
          "old_api": "begin",
          "new_api": null,
          "old_text": "filenames.begin()",
          "new_text": null,
          "old_line_content": "  for (auto iter = std::next(filenames.begin(), num_files_to_keep);",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 4953,
          "old_api": "end",
          "new_api": null,
          "old_text": "filenames.end()",
          "new_text": null,
          "old_line_content": "       iter != filenames.end(); ++iter) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4970,
          "old_api": "GetName",
          "new_api": null,
          "old_text": "GetName()",
          "new_text": null,
          "old_line_content": "  s = fs_->GetChildren(GetName(), io_opts, &filenames,",
          "new_line_content": "  IOOptions io_opts;",
          "content_same": false
        },
        {
          "line": 4978,
          "old_api": "ParseFileName",
          "new_api": null,
          "old_text": "ParseFileName(filename, &file_number, &type)",
          "new_text": null,
          "old_line_content": "    if (ParseFileName(filename, &file_number, &type) && type == kOptionsFile) {",
          "new_line_content": "    uint64_t file_number;",
          "content_same": false
        },
        {
          "line": 4979,
          "old_api": "insert",
          "new_api": null,
          "old_text": "options_filenames.insert(\n          {std::numeric_limits<uint64_t>::max() - file_number,\n           GetName() + \"/\" + filename})",
          "new_text": null,
          "old_line_content": "      options_filenames.insert(",
          "new_line_content": "    FileType type;",
          "content_same": false
        },
        {
          "line": 4987,
          "old_api": "DeleteOptionsFilesHelper",
          "new_api": null,
          "old_text": "DeleteOptionsFilesHelper(options_filenames, kNumOptionsFilesKept,\n                           immutable_db_options_.info_log, GetEnv())",
          "new_text": null,
          "old_line_content": "  DeleteOptionsFilesHelper(options_filenames, kNumOptionsFilesKept,",
          "new_line_content": "  // Keeps the latest 2 Options file",
          "content_same": false
        },
        {
          "line": 4988,
          "old_api": "GetEnv",
          "new_api": null,
          "old_text": "GetEnv()",
          "new_text": null,
          "old_line_content": "                           immutable_db_options_.info_log, GetEnv());",
          "new_line_content": "  const size_t kNumOptionsFilesKept = 2;",
          "content_same": false
        },
        {
          "line": 4995,
          "old_api": "NewFileNumber",
          "new_api": null,
          "old_text": "versions_->NewFileNumber()",
          "new_text": null,
          "old_line_content": "  uint64_t options_file_number = versions_->NewFileNumber();",
          "new_line_content": "  Status s;",
          "content_same": false
        },
        {
          "line": 5000,
          "old_api": "ok",
          "new_api": null,
          "old_text": "s.ok()",
          "new_text": null,
          "old_line_content": "  if (s.ok()) {",
          "new_line_content": "  uint64_t options_file_size = 0;",
          "content_same": false
        },
        {
          "line": 5005,
          "old_api": "IOOptions",
          "new_api": null,
          "old_text": "IOOptions()",
          "new_text": null,
          "old_line_content": "      s = fs_->NewDirectory(GetName(), IOOptions(), &dir_obj, nullptr);",
          "new_line_content": "    std::unique_ptr<FSDirectory> dir_obj;",
          "content_same": false
        },
        {
          "line": 5008,
          "old_api": "IOOptions",
          "new_api": null,
          "old_text": "IOOptions()",
          "new_text": null,
          "old_line_content": "      s = dir_obj->FsyncWithDirOptions(IOOptions(), nullptr,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5012,
          "old_api": "IOOptions",
          "new_api": null,
          "old_text": "IOOptions()",
          "new_text": null,
          "old_line_content": "      Status temp_s = dir_obj->Close(IOOptions(), nullptr);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5016,
          "old_api": "ok",
          "new_api": null,
          "old_text": "temp_s.ok()",
          "new_text": null,
          "old_line_content": "      if (!temp_s.ok()) {",
          "new_line_content": "      // if it is not impelmented. Detailed explanations can be found in",
          "content_same": false
        },
        {
          "line": 5017,
          "old_api": "IsNotSupported",
          "new_api": null,
          "old_text": "temp_s.IsNotSupported()",
          "new_text": null,
          "old_line_content": "        if (temp_s.IsNotSupported()) {",
          "new_line_content": "      // db/db_impl/db_impl.h",
          "content_same": false
        },
        {
          "line": 5025,
          "old_api": "ok",
          "new_api": null,
          "old_text": "s.ok()",
          "new_text": null,
          "old_line_content": "  if (s.ok()) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5033,
          "old_api": "PermitUncheckedError",
          "new_api": null,
          "old_text": "DeleteObsoleteOptionsFiles().PermitUncheckedError()",
          "new_text": null,
          "old_line_content": "    DeleteObsoleteOptionsFiles().PermitUncheckedError();",
          "new_line_content": "  if (0 == disable_delete_obsolete_files_) {",
          "content_same": false
        },
        {
          "line": 5042,
          "old_api": "GetName",
          "new_api": null,
          "old_text": "cfd->GetName()",
          "new_text": null,
          "old_line_content": "    ThreadStatusUtil::NewColumnFamilyInfo(this, cfd, cfd->GetName(),",
          "new_line_content": "void DBImpl::NewThreadStatusCfInfo(ColumnFamilyData* cfd) const {",
          "content_same": false
        },
        {
          "line": 5043,
          "old_api": "ioptions",
          "new_api": null,
          "old_text": "cfd->ioptions()",
          "new_text": null,
          "old_line_content": "                                          cfd->ioptions()->env);",
          "new_line_content": "  if (immutable_db_options_.enable_thread_tracking) {",
          "content_same": false
        },
        {
          "line": 5049,
          "old_api": "ThreadStatusUtil::EraseColumnFamilyInfo(cfd)",
          "new_api": null,
          "old_text": "ThreadStatusUtil::EraseColumnFamilyInfo(cfd)",
          "new_text": null,
          "old_line_content": "    ThreadStatusUtil::EraseColumnFamilyInfo(cfd);",
          "new_line_content": "void DBImpl::EraseThreadStatusCfInfo(ColumnFamilyData* cfd) const {",
          "content_same": false
        },
        {
          "line": 5055,
          "old_api": "ThreadStatusUtil::EraseDatabaseInfo(this)",
          "new_api": null,
          "old_text": "ThreadStatusUtil::EraseDatabaseInfo(this)",
          "new_text": null,
          "old_line_content": "    ThreadStatusUtil::EraseDatabaseInfo(this);",
          "new_line_content": "void DBImpl::EraseThreadStatusDbInfo() const {",
          "content_same": false
        },
        {
          "line": 5070,
          "old_api": "c_str",
          "new_api": null,
          "old_text": "ROCKS_LOG_HEADER(log, \"RocksDB version: %s\\n\",\n                   GetRocksVersionAsString().c_str())",
          "new_text": null,
          "old_line_content": "  ROCKS_LOG_HEADER(log, \"RocksDB version: %s\\n\",",
          "new_line_content": "// A global method that can dump out the build version",
          "content_same": false
        },
        {
          "line": 5071,
          "old_api": "c_str",
          "new_api": null,
          "old_text": "GetRocksVersionAsString().c_str()",
          "new_text": null,
          "old_line_content": "                   GetRocksVersionAsString().c_str());",
          "new_line_content": "void DumpRocksDBBuildVersion(Logger* log) {",
          "content_same": false
        },
        {
          "line": 5078,
          "old_api": "end",
          "new_api": null,
          "old_text": "props.end()",
          "new_text": null,
          "old_line_content": "  if (date != props.end()) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 5088,
          "old_api": "GetEarliestSequenceNumber",
          "new_api": null,
          "old_text": "sv->imm->GetEarliestSequenceNumber(include_history)",
          "new_text": null,
          "old_line_content": "      sv->imm->GetEarliestSequenceNumber(include_history);",
          "new_line_content": "  // from the memtable without needing to check sst files.",
          "content_same": false
        },
        {
          "line": 5107,
          "old_api": "LastSequence",
          "new_api": null,
          "old_text": "versions_->LastSequence()",
          "new_text": null,
          "old_line_content": "  SequenceNumber current_seq = versions_->LastSequence();",
          "new_line_content": "  // TODO: plumb Env::IOActivity",
          "content_same": false
        },
        {
          "line": 5110,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(cfd)",
          "new_text": null,
          "old_line_content": "  assert(cfd);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5111,
          "old_api": "user_comparator",
          "new_api": null,
          "old_text": "cfd->user_comparator()",
          "new_text": null,
          "old_line_content": "  const Comparator* const ucmp = cfd->user_comparator();",
          "new_line_content": "  ColumnFamilyData* cfd = sv->cfd;",
          "content_same": false
        },
        {
          "line": 5116,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(timestamp)",
          "new_text": null,
          "old_line_content": "    assert(timestamp);",
          "new_line_content": "  std::string ts_buf;",
          "content_same": false
        },
        {
          "line": 5117,
          "old_api": "assign",
          "new_api": null,
          "old_text": "ts_buf.assign(ts_sz, '\\xff')",
          "new_text": null,
          "old_line_content": "    ts_buf.assign(ts_sz, '\\xff');",
          "new_line_content": "  if (ts_sz > 0) {",
          "content_same": false
        },
        {
          "line": 5129,
          "old_api": "Get",
          "new_api": null,
          "old_text": "sv->mem->Get(lkey, /*value=*/nullptr, /*columns=*/nullptr, timestamp, &s,\n               &merge_context, &max_covering_tombstone_seq, seq, read_options,\n               false /* immutable_memtable */, nullptr /*read_callback*/,\n               is_blob_index)",
          "new_text": null,
          "old_line_content": "  sv->mem->Get(lkey, /*value=*/nullptr, /*columns=*/nullptr, timestamp, &s,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5134,
          "old_api": "IsMergeInProgress",
          "new_api": null,
          "old_text": "s.IsMergeInProgress()",
          "new_text": null,
          "old_line_content": "  if (!(s.ok() || s.IsNotFound() || s.IsMergeInProgress())) {",
          "new_line_content": "               is_blob_index);",
          "content_same": false
        },
        {
          "line": 5142,
          "old_api": "empty",
          "new_api": null,
          "old_text": "assert(!ts_sz ||\n         (*seq != kMaxSequenceNumber &&\n          *timestamp != std::string(ts_sz, '\\xff')) ||\n         (*seq == kMaxSequenceNumber && timestamp->empty()))",
          "new_text": null,
          "old_line_content": "  assert(!ts_sz ||",
          "new_line_content": "    return s;",
          "content_same": false
        },
        {
          "line": 5145,
          "old_api": "empty",
          "new_api": null,
          "old_text": "timestamp->empty()",
          "new_text": null,
          "old_line_content": "         (*seq == kMaxSequenceNumber && timestamp->empty()));",
          "new_line_content": "         (*seq != kMaxSequenceNumber &&",
          "content_same": false
        },
        {
          "line": 5152,
          "old_api": "Status::OK()",
          "new_api": null,
          "old_text": "Status::OK()",
          "new_text": null,
          "old_line_content": "    return Status::OK();",
          "new_line_content": "    // Found a sequence number, no need to check immutable memtables",
          "content_same": false
        },
        {
          "line": 5155,
          "old_api": "GetEarliestSequenceNumber",
          "new_api": null,
          "old_text": "sv->mem->GetEarliestSequenceNumber()",
          "new_text": null,
          "old_line_content": "  SequenceNumber lower_bound_in_mem = sv->mem->GetEarliestSequenceNumber();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 5159,
          "old_api": "Status::OK()",
          "new_api": null,
          "old_text": "Status::OK()",
          "new_text": null,
          "old_line_content": "    return Status::OK();",
          "new_line_content": "      lower_bound_in_mem < lower_bound_seq) {",
          "content_same": false
        },
        {
          "line": 5163,
          "old_api": "Get",
          "new_api": null,
          "old_text": "sv->imm->Get(lkey, /*value=*/nullptr, /*columns=*/nullptr, timestamp, &s,\n               &merge_context, &max_covering_tombstone_seq, seq, read_options,\n               nullptr /*read_callback*/, is_blob_index)",
          "new_text": null,
          "old_line_content": "  sv->imm->Get(lkey, /*value=*/nullptr, /*columns=*/nullptr, timestamp, &s,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5167,
          "old_api": "IsMergeInProgress",
          "new_api": null,
          "old_text": "s.IsMergeInProgress()",
          "new_text": null,
          "old_line_content": "  if (!(s.ok() || s.IsNotFound() || s.IsMergeInProgress())) {",
          "new_line_content": "               nullptr /*read_callback*/, is_blob_index);",
          "content_same": false
        },
        {
          "line": 5176,
          "old_api": "empty",
          "new_api": null,
          "old_text": "assert(!ts_sz ||\n         (*seq != kMaxSequenceNumber &&\n          *timestamp != std::string(ts_sz, '\\xff')) ||\n         (*seq == kMaxSequenceNumber && timestamp->empty()))",
          "new_text": null,
          "old_line_content": "  assert(!ts_sz ||",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 5179,
          "old_api": "empty",
          "new_api": null,
          "old_text": "timestamp->empty()",
          "new_text": null,
          "old_line_content": "         (*seq == kMaxSequenceNumber && timestamp->empty()));",
          "new_line_content": "         (*seq != kMaxSequenceNumber &&",
          "content_same": false
        },
        {
          "line": 5184,
          "old_api": "Status::OK()",
          "new_api": null,
          "old_text": "Status::OK()",
          "new_text": null,
          "old_line_content": "    return Status::OK();",
          "new_line_content": "    // Found a sequence number, no need to check memtable history",
          "content_same": false
        },
        {
          "line": 5187,
          "old_api": "GetEarliestSequenceNumber",
          "new_api": null,
          "old_text": "sv->imm->GetEarliestSequenceNumber()",
          "new_text": null,
          "old_line_content": "  SequenceNumber lower_bound_in_imm = sv->imm->GetEarliestSequenceNumber();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 5191,
          "old_api": "Status::OK()",
          "new_api": null,
          "old_text": "Status::OK()",
          "new_text": null,
          "old_line_content": "    return Status::OK();",
          "new_line_content": "      lower_bound_in_imm < lower_bound_seq) {",
          "content_same": false
        },
        {
          "line": 5195,
          "old_api": "GetFromHistory",
          "new_api": null,
          "old_text": "sv->imm->GetFromHistory(lkey, /*value=*/nullptr, /*columns=*/nullptr,\n                          timestamp, &s, &merge_context,\n                          &max_covering_tombstone_seq, seq, read_options,\n                          is_blob_index)",
          "new_text": null,
          "old_line_content": "  sv->imm->GetFromHistory(lkey, /*value=*/nullptr, /*columns=*/nullptr,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5200,
          "old_api": "IsMergeInProgress",
          "new_api": null,
          "old_text": "s.IsMergeInProgress()",
          "new_text": null,
          "old_line_content": "  if (!(s.ok() || s.IsNotFound() || s.IsMergeInProgress())) {",
          "new_line_content": "                          is_blob_index);",
          "content_same": false
        },
        {
          "line": 5205,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "s.ToString().c_str()",
          "new_text": null,
          "old_line_content": "        s.ToString().c_str());",
          "new_line_content": "        immutable_db_options_.info_log,",
          "content_same": false
        },
        {
          "line": 5210,
          "old_api": "empty",
          "new_api": null,
          "old_text": "assert(!ts_sz ||\n         (*seq != kMaxSequenceNumber &&\n          *timestamp != std::string(ts_sz, '\\xff')) ||\n         (*seq == kMaxSequenceNumber && timestamp->empty()))",
          "new_text": null,
          "old_line_content": "  assert(!ts_sz ||",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 5213,
          "old_api": "empty",
          "new_api": null,
          "old_text": "timestamp->empty()",
          "new_text": null,
          "old_line_content": "         (*seq == kMaxSequenceNumber && timestamp->empty()));",
          "new_line_content": "         (*seq != kMaxSequenceNumber &&",
          "content_same": false
        },
        {
          "line": 5217,
          "old_api": "std::string(ts_sz, '\\xff')",
          "new_api": null,
          "old_text": "std::string(ts_sz, '\\xff')",
          "new_text": null,
          "old_line_content": "    assert(0 == ts_sz || *timestamp != std::string(ts_sz, '\\xff'));",
          "new_line_content": "  if (*seq != kMaxSequenceNumber) {",
          "content_same": false
        },
        {
          "line": 5231,
          "old_api": "Get",
          "new_api": null,
          "old_text": "sv->current->Get(read_options, lkey, /*value=*/nullptr, /*columns=*/nullptr,\n                     timestamp, &s, &merge_context, &max_covering_tombstone_seq,\n                     &pinned_iters_mgr, nullptr /* value_found */,\n                     found_record_for_key, seq, nullptr /*read_callback*/,\n                     is_blob_index)",
          "new_text": null,
          "old_line_content": "    sv->current->Get(read_options, lkey, /*value=*/nullptr, /*columns=*/nullptr,",
          "new_line_content": "    // Check tables",
          "content_same": false
        },
        {
          "line": 5237,
          "old_api": "IsMergeInProgress",
          "new_api": null,
          "old_text": "s.IsMergeInProgress()",
          "new_text": null,
          "old_line_content": "    if (!(s.ok() || s.IsNotFound() || s.IsMergeInProgress())) {",
          "new_line_content": "                     is_blob_index);",
          "content_same": false
        },
        {
          "line": 5256,
          "old_api": "IngestExternalFiles",
          "new_api": null,
          "old_text": "IngestExternalFiles({arg})",
          "new_text": null,
          "old_line_content": "  return IngestExternalFiles({arg});",
          "new_line_content": "  arg.external_files = external_files;",
          "content_same": false
        },
        {
          "line": 5263,
          "old_api": "empty",
          "new_api": null,
          "old_text": "args.empty()",
          "new_text": null,
          "old_line_content": "  if (args.empty()) {",
          "new_line_content": "  // TODO: plumb Env::IOActivity",
          "content_same": false
        },
        {
          "line": 5264,
          "old_api": "Status::InvalidArgument(\"ingestion arg list is empty\")",
          "new_api": null,
          "old_text": "Status::InvalidArgument(\"ingestion arg list is empty\")",
          "new_text": null,
          "old_line_content": "    return Status::InvalidArgument(\"ingestion arg list is empty\");",
          "new_line_content": "  const ReadOptions read_options;",
          "content_same": false
        },
        {
          "line": 5270,
          "old_api": "Status::InvalidArgument(\"column family handle is null\")",
          "new_api": null,
          "old_text": "Status::InvalidArgument(\"column family handle is null\")",
          "new_text": null,
          "old_line_content": "        return Status::InvalidArgument(\"column family handle is null\");",
          "new_line_content": "    for (const auto& arg : args) {",
          "content_same": false
        },
        {
          "line": 5271,
          "old_api": "count",
          "new_api": null,
          "old_text": "unique_cfhs.count(arg.column_family)",
          "new_text": null,
          "old_line_content": "      } else if (unique_cfhs.count(arg.column_family) > 0) {",
          "new_line_content": "      if (arg.column_family == nullptr) {",
          "content_same": false
        },
        {
          "line": 5275,
          "old_api": "insert",
          "new_api": null,
          "old_text": "unique_cfhs.insert(arg.column_family)",
          "new_text": null,
          "old_line_content": "      unique_cfhs.insert(arg.column_family);",
          "new_line_content": "            \"ingestion args have duplicate column families\");",
          "content_same": false
        },
        {
          "line": 5279,
          "old_api": "size",
          "new_api": null,
          "old_text": "args.size()",
          "new_text": null,
          "old_line_content": "  const size_t num_cfs = args.size();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 5284,
          "old_api": "Status::InvalidArgument(err_msg)",
          "new_api": null,
          "old_text": "Status::InvalidArgument(err_msg)",
          "new_text": null,
          "old_line_content": "      return Status::InvalidArgument(err_msg);",
          "new_line_content": "      char err_msg[128] = {0};",
          "content_same": false
        },
        {
          "line": 5291,
          "old_api": "Status::InvalidArgument(\n          \"can't ingest_behind file in DB with allow_ingest_behind=false\")",
          "new_api": null,
          "old_text": "Status::InvalidArgument(\n          \"can't ingest_behind file in DB with allow_ingest_behind=false\")",
          "new_text": null,
          "old_line_content": "      return Status::InvalidArgument(",
          "new_line_content": "    if (ingest_opts.ingest_behind &&",
          "content_same": false
        },
        {
          "line": 5301,
          "old_api": "size",
          "new_api": null,
          "old_text": "arg.external_files.size()",
          "new_text": null,
          "old_line_content": "    total += arg.external_files.size();",
          "new_line_content": "  size_t total = 0;",
          "content_same": false
        },
        {
          "line": 5304,
          "old_api": "cfd",
          "new_api": null,
          "old_text": "ReserveFileNumbersBeforeIngestion(\n      static_cast<ColumnFamilyHandleImpl*>(args[0].column_family)->cfd(), total,\n      pending_output_elem, &next_file_number)",
          "new_text": null,
          "old_line_content": "  Status status = ReserveFileNumbersBeforeIngestion(",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 5305,
          "old_api": "cfd",
          "new_api": null,
          "old_text": "static_cast<ColumnFamilyHandleImpl*>(args[0].column_family)->cfd()",
          "new_text": null,
          "old_line_content": "      static_cast<ColumnFamilyHandleImpl*>(args[0].column_family)->cfd(), total,",
          "new_line_content": "  uint64_t next_file_number = 0;",
          "content_same": false
        },
        {
          "line": 5315,
          "old_api": "cfd",
          "new_api": null,
          "old_text": "static_cast<ColumnFamilyHandleImpl*>(arg.column_family)->cfd()",
          "new_text": null,
          "old_line_content": "    auto* cfd = static_cast<ColumnFamilyHandleImpl*>(arg.column_family)->cfd();",
          "new_line_content": "  std::vector<ExternalSstFileIngestionJob> ingestion_jobs;",
          "content_same": false
        },
        {
          "line": 5316,
          "old_api": "get",
          "new_api": null,
          "old_text": "versions_.get()",
          "new_text": null,
          "old_line_content": "    ingestion_jobs.emplace_back(versions_.get(), cfd, immutable_db_options_,",
          "new_line_content": "  for (const auto& arg : args) {",
          "content_same": false
        },
        {
          "line": 5325,
          "old_api": "size",
          "new_api": null,
          "old_text": "args[i - 1].external_files.size()",
          "new_text": null,
          "old_line_content": "    start_file_number += args[i - 1].external_files.size();",
          "new_line_content": "  uint64_t start_file_number = next_file_number;",
          "content_same": false
        },
        {
          "line": 5328,
          "old_api": "GetReferencedSuperVersion",
          "new_api": null,
          "old_text": "cfd->GetReferencedSuperVersion(this)",
          "new_text": null,
          "old_line_content": "    SuperVersion* super_version = cfd->GetReferencedSuperVersion(this);",
          "new_line_content": "    auto* cfd =",
          "content_same": false
        },
        {
          "line": 5334,
          "old_api": "ok",
          "new_api": null,
          "old_text": "status.ok()",
          "new_text": null,
          "old_line_content": "    if (!es.ok() && status.ok()) {",
          "new_line_content": "        start_file_number, super_version);",
          "content_same": false
        },
        {
          "line": 5337,
          "old_api": "CleanupSuperVersion",
          "new_api": null,
          "old_text": "CleanupSuperVersion(super_version)",
          "new_text": null,
          "old_line_content": "    CleanupSuperVersion(super_version);",
          "new_line_content": "      status = es;",
          "content_same": false
        },
        {
          "line": 5340,
          "old_api": "TEST_SYNC_POINT",
          "new_api": null,
          "old_text": "TEST_SYNC_POINT(\"DBImpl::IngestExternalFiles:BeforeLastJobPrepare:1\")",
          "new_text": null,
          "old_line_content": "  TEST_SYNC_POINT(\"DBImpl::IngestExternalFiles:BeforeLastJobPrepare:1\");",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 5343,
          "old_api": "cfd",
          "new_api": null,
          "old_text": "static_cast<ColumnFamilyHandleImpl*>(args[0].column_family)->cfd()",
          "new_text": null,
          "old_line_content": "        static_cast<ColumnFamilyHandleImpl*>(args[0].column_family)->cfd();",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 5344,
          "old_api": "GetReferencedSuperVersion",
          "new_api": null,
          "old_text": "cfd->GetReferencedSuperVersion(this)",
          "new_text": null,
          "old_line_content": "    SuperVersion* super_version = cfd->GetReferencedSuperVersion(this);",
          "new_line_content": "    auto* cfd =",
          "content_same": false
        },
        {
          "line": 5349,
          "old_api": "ok",
          "new_api": null,
          "old_text": "es.ok()",
          "new_text": null,
          "old_line_content": "    if (!es.ok()) {",
          "new_line_content": "        args[0].files_checksum_func_names, args[0].file_temperature,",
          "content_same": false
        },
        {
          "line": 5352,
          "old_api": "CleanupSuperVersion",
          "new_api": null,
          "old_text": "CleanupSuperVersion(super_version)",
          "new_text": null,
          "old_line_content": "    CleanupSuperVersion(super_version);",
          "new_line_content": "      status = es;",
          "content_same": false
        },
        {
          "line": 5359,
          "old_api": "ReleaseFileNumberFromPendingOutputs",
          "new_api": null,
          "old_text": "ReleaseFileNumberFromPendingOutputs(pending_output_elem)",
          "new_text": null,
          "old_line_content": "    ReleaseFileNumberFromPendingOutputs(pending_output_elem);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5365,
          "old_api": "emplace_back",
          "new_api": null,
          "old_text": "sv_ctxs.emplace_back(true /* create_superversion */)",
          "new_text": null,
          "old_line_content": "    sv_ctxs.emplace_back(true /* create_superversion */);",
          "new_line_content": "  std::vector<SuperVersionContext> sv_ctxs;",
          "content_same": false
        },
        {
          "line": 5368,
          "old_api": "TEST_SYNC_POINT",
          "new_api": null,
          "old_text": "TEST_SYNC_POINT(\"DBImpl::IngestExternalFiles:BeforeJobsRun:1\")",
          "new_text": null,
          "old_line_content": "  TEST_SYNC_POINT(\"DBImpl::IngestExternalFiles:BeforeJobsRun:1\");",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 5372,
          "old_api": "TEST_SYNC_POINT",
          "new_api": null,
          "old_text": "TEST_SYNC_POINT(\"DBImpl::AddFile:MutexLock\")",
          "new_text": null,
          "old_line_content": "    TEST_SYNC_POINT(\"DBImpl::AddFile:MutexLock\");",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 5376,
          "old_api": "EnterUnbatched",
          "new_api": null,
          "old_text": "write_thread_.EnterUnbatched(&w, &mutex_)",
          "new_text": null,
          "old_line_content": "    write_thread_.EnterUnbatched(&w, &mutex_);",
          "new_line_content": "    // Stop writes to the DB by entering both write threads",
          "content_same": false
        },
        {
          "line": 5379,
          "old_api": "EnterUnbatched",
          "new_api": null,
          "old_text": "nonmem_write_thread_.EnterUnbatched(&nonmem_w, &mutex_)",
          "new_text": null,
          "old_line_content": "      nonmem_write_thread_.EnterUnbatched(&nonmem_w, &mutex_);",
          "new_line_content": "    WriteThread::Writer nonmem_w;",
          "content_same": false
        },
        {
          "line": 5387,
          "old_api": "WaitForPendingWrites",
          "new_api": null,
          "old_text": "WaitForPendingWrites()",
          "new_text": null,
          "old_line_content": "    WaitForPendingWrites();",
          "new_line_content": "    // memtable flush.",
          "content_same": false
        },
        {
          "line": 5390,
          "old_api": "TEST_SYNC_POINT",
          "new_api": null,
          "old_text": "TEST_SYNC_POINT(\"DBImpl::IngestExternalFile:AfterIncIngestFileCounter\")",
          "new_text": null,
          "old_line_content": "    TEST_SYNC_POINT(\"DBImpl::IngestExternalFile:AfterIncIngestFileCounter\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5396,
          "old_api": "cfd",
          "new_api": null,
          "old_text": "static_cast<ColumnFamilyHandleImpl*>(args[i].column_family)->cfd()",
          "new_text": null,
          "old_line_content": "          static_cast<ColumnFamilyHandleImpl*>(args[i].column_family)->cfd();",
          "new_line_content": "    for (size_t i = 0; i != num_cfs; ++i) {",
          "content_same": false
        },
        {
          "line": 5397,
          "old_api": "IsDropped",
          "new_api": null,
          "old_text": "cfd->IsDropped()",
          "new_text": null,
          "old_line_content": "      if (cfd->IsDropped()) {",
          "new_line_content": "      auto* cfd =",
          "content_same": false
        },
        {
          "line": 5400,
          "old_api": "Status::InvalidArgument(\n            \"cannot ingest an external file into a dropped CF\")",
          "new_api": null,
          "old_text": "Status::InvalidArgument(\n            \"cannot ingest an external file into a dropped CF\")",
          "new_text": null,
          "old_line_content": "        status = Status::InvalidArgument(",
          "new_line_content": "        // TODO (yanqin) investigate whether we should abort ingestion or",
          "content_same": false
        },
        {
          "line": 5405,
          "old_api": "GetSuperVersion",
          "new_api": null,
          "old_text": "cfd->GetSuperVersion()",
          "new_text": null,
          "old_line_content": "      status = ingestion_jobs[i].NeedsFlush(&tmp, cfd->GetSuperVersion());",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 5408,
          "old_api": "ok",
          "new_api": null,
          "old_text": "status.ok()",
          "new_text": null,
          "old_line_content": "      if (!status.ok()) {",
          "new_line_content": "      need_flush[i] = tmp;",
          "content_same": false
        },
        {
          "line": 5412,
          "old_api": "TEST_SYNC_POINT_CALLBACK",
          "new_api": null,
          "old_text": "TEST_SYNC_POINT_CALLBACK(\"DBImpl::IngestExternalFile:NeedFlush\",\n                             &at_least_one_cf_need_flush)",
          "new_text": null,
          "old_line_content": "    TEST_SYNC_POINT_CALLBACK(\"DBImpl::IngestExternalFile:NeedFlush\",",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 5415,
          "old_api": "ok",
          "new_api": null,
          "old_text": "status.ok()",
          "new_text": null,
          "old_line_content": "    if (status.ok() && at_least_one_cf_need_flush) {",
          "new_line_content": "                             &at_least_one_cf_need_flush);",
          "content_same": false
        },
        {
          "line": 5419,
          "old_api": "Unlock",
          "new_api": null,
          "old_text": "mutex_.Unlock()",
          "new_text": null,
          "old_line_content": "        mutex_.Unlock();",
          "new_line_content": "      flush_opts.allow_write_stall = true;",
          "content_same": false
        },
        {
          "line": 5420,
          "old_api": "AtomicFlushMemTables",
          "new_api": null,
          "old_text": "AtomicFlushMemTables(\n            flush_opts, FlushReason::kExternalFileIngestion,\n            {} /* provided_candidate_cfds */, true /* entered_write_thread */)",
          "new_text": null,
          "old_line_content": "        status = AtomicFlushMemTables(",
          "new_line_content": "      if (immutable_db_options_.atomic_flush) {",
          "content_same": false
        },
        {
          "line": 5423,
          "old_api": "Lock",
          "new_api": null,
          "old_text": "mutex_.Lock()",
          "new_text": null,
          "old_line_content": "        mutex_.Lock();",
          "new_line_content": "            flush_opts, FlushReason::kExternalFileIngestion,",
          "content_same": false
        },
        {
          "line": 5427,
          "old_api": "Unlock",
          "new_api": null,
          "old_text": "mutex_.Unlock()",
          "new_text": null,
          "old_line_content": "            mutex_.Unlock();",
          "new_line_content": "        for (size_t i = 0; i != num_cfs; ++i) {",
          "content_same": false
        },
        {
          "line": 5434,
          "old_api": "Lock",
          "new_api": null,
          "old_text": "mutex_.Lock()",
          "new_text": null,
          "old_line_content": "            mutex_.Lock();",
          "new_line_content": "                                   FlushReason::kExternalFileIngestion,",
          "content_same": false
        },
        {
          "line": 5435,
          "old_api": "ok",
          "new_api": null,
          "old_text": "status.ok()",
          "new_text": null,
          "old_line_content": "            if (!status.ok()) {",
          "new_line_content": "                                   true /* entered_write_thread */);",
          "content_same": false
        },
        {
          "line": 5443,
          "old_api": "ok",
          "new_api": null,
          "old_text": "status.ok()",
          "new_text": null,
          "old_line_content": "    if (status.ok()) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5446,
          "old_api": "Run",
          "new_api": null,
          "old_text": "ingestion_jobs[i].Run()",
          "new_text": null,
          "old_line_content": "        status = ingestion_jobs[i].Run();",
          "new_line_content": "      for (size_t i = 0; i != num_cfs; ++i) {",
          "content_same": false
        },
        {
          "line": 5450,
          "old_api": "RegisterRange",
          "new_api": null,
          "old_text": "ingestion_jobs[i].RegisterRange()",
          "new_text": null,
          "old_line_content": "        ingestion_jobs[i].RegisterRange();",
          "new_line_content": "          break;",
          "content_same": false
        },
        {
          "line": 5453,
          "old_api": "ok",
          "new_api": null,
          "old_text": "status.ok()",
          "new_text": null,
          "old_line_content": "    if (status.ok()) {",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 5460,
          "old_api": "cfd",
          "new_api": null,
          "old_text": "static_cast<ColumnFamilyHandleImpl*>(args[i].column_family)->cfd()",
          "new_text": null,
          "old_line_content": "            static_cast<ColumnFamilyHandleImpl*>(args[i].column_family)->cfd();",
          "new_line_content": "      for (size_t i = 0; i != num_cfs; ++i) {",
          "content_same": false
        },
        {
          "line": 5461,
          "old_api": "IsDropped",
          "new_api": null,
          "old_text": "cfd->IsDropped()",
          "new_text": null,
          "old_line_content": "        if (cfd->IsDropped()) {",
          "new_line_content": "        auto* cfd =",
          "content_same": false
        },
        {
          "line": 5464,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "cfds_to_commit.push_back(cfd)",
          "new_text": null,
          "old_line_content": "        cfds_to_commit.push_back(cfd);",
          "new_line_content": "          continue;",
          "content_same": false
        },
        {
          "line": 5465,
          "old_api": "GetLatestMutableCFOptions",
          "new_api": null,
          "old_text": "cfd->GetLatestMutableCFOptions()",
          "new_text": null,
          "old_line_content": "        mutable_cf_options_list.push_back(cfd->GetLatestMutableCFOptions());",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5468,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "edit_lists.push_back(edit_list)",
          "new_text": null,
          "old_line_content": "        edit_lists.push_back(edit_list);",
          "new_line_content": "        autovector<VersionEdit*> edit_list;",
          "content_same": false
        },
        {
          "line": 5473,
          "old_api": "size",
          "new_api": null,
          "old_text": "cfds_to_commit.size()",
          "new_text": null,
          "old_line_content": "      if (cfds_to_commit.size() > 1) {",
          "new_line_content": "      // Mark the version edits as an atomic group if the number of version",
          "content_same": false
        },
        {
          "line": 5476,
          "old_api": "MarkAtomicGroup",
          "new_api": null,
          "old_text": "edits[0]->MarkAtomicGroup(--num_entries)",
          "new_text": null,
          "old_line_content": "          edits[0]->MarkAtomicGroup(--num_entries);",
          "new_line_content": "        for (auto& edits : edit_lists) {",
          "content_same": false
        },
        {
          "line": 5492,
          "old_api": "ConsumedSequenceNumbersCount",
          "new_api": null,
          "old_text": "ingestion_jobs[0].ConsumedSequenceNumbersCount()",
          "new_text": null,
          "old_line_content": "          ingestion_jobs[0].ConsumedSequenceNumbersCount();",
          "new_line_content": "      // before LogAndApply.",
          "content_same": false
        },
        {
          "line": 5495,
          "old_api": "ConsumedSequenceNumbersCount",
          "new_api": null,
          "old_text": "std::max(consumed_seqno_count,\n                     ingestion_jobs[i].ConsumedSequenceNumbersCount())",
          "new_text": null,
          "old_line_content": "            std::max(consumed_seqno_count,",
          "new_line_content": "      for (size_t i = 1; i != num_cfs; ++i) {",
          "content_same": false
        },
        {
          "line": 5496,
          "old_api": "ConsumedSequenceNumbersCount",
          "new_api": null,
          "old_text": "ingestion_jobs[i].ConsumedSequenceNumbersCount()",
          "new_text": null,
          "old_line_content": "                     ingestion_jobs[i].ConsumedSequenceNumbersCount());",
          "new_line_content": "        consumed_seqno_count =",
          "content_same": false
        },
        {
          "line": 5499,
          "old_api": "LastSequence",
          "new_api": null,
          "old_text": "versions_->LastSequence()",
          "new_text": null,
          "old_line_content": "        const SequenceNumber last_seqno = versions_->LastSequence();",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 5500,
          "old_api": "SetLastAllocatedSequence",
          "new_api": null,
          "old_text": "versions_->SetLastAllocatedSequence(last_seqno + consumed_seqno_count)",
          "new_text": null,
          "old_line_content": "        versions_->SetLastAllocatedSequence(last_seqno + consumed_seqno_count);",
          "new_line_content": "      if (consumed_seqno_count > 0) {",
          "content_same": false
        },
        {
          "line": 5507,
          "old_api": "UnregisterRange",
          "new_api": null,
          "old_text": "job.UnregisterRange()",
          "new_text": null,
          "old_line_content": "      job.UnregisterRange();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5510,
          "old_api": "ok",
          "new_api": null,
          "old_text": "status.ok()",
          "new_text": null,
          "old_line_content": "    if (status.ok()) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5513,
          "old_api": "cfd",
          "new_api": null,
          "old_text": "static_cast<ColumnFamilyHandleImpl*>(args[i].column_family)->cfd()",
          "new_text": null,
          "old_line_content": "            static_cast<ColumnFamilyHandleImpl*>(args[i].column_family)->cfd();",
          "new_line_content": "      for (size_t i = 0; i != num_cfs; ++i) {",
          "content_same": false
        },
        {
          "line": 5514,
          "old_api": "IsDropped",
          "new_api": null,
          "old_text": "cfd->IsDropped()",
          "new_text": null,
          "old_line_content": "        if (!cfd->IsDropped()) {",
          "new_line_content": "        auto* cfd =",
          "content_same": false
        },
        {
          "line": 5519,
          "old_api": "TEST_SYNC_POINT",
          "new_api": null,
          "old_text": "TEST_SYNC_POINT(\n                \"DBImpl::IngestExternalFiles:InstallSVForFirstCF:0\")",
          "new_text": null,
          "old_line_content": "            TEST_SYNC_POINT(",
          "new_line_content": "#ifndef NDEBUG",
          "content_same": false
        },
        {
          "line": 5527,
          "old_api": "IsIOError",
          "new_api": null,
          "old_text": "versions_->io_status().IsIOError()",
          "new_text": null,
          "old_line_content": "    } else if (versions_->io_status().IsIOError()) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5533,
          "old_api": "io_status",
          "new_api": null,
          "old_text": "versions_->io_status()",
          "new_text": null,
          "old_line_content": "      const IOStatus& io_s = versions_->io_status();",
          "new_line_content": "      // be pessimistic and try write to a new MANIFEST.",
          "content_same": false
        },
        {
          "line": 5540,
          "old_api": "ExitUnbatched",
          "new_api": null,
          "old_text": "nonmem_write_thread_.ExitUnbatched(&nonmem_w)",
          "new_text": null,
          "old_line_content": "      nonmem_write_thread_.ExitUnbatched(&nonmem_w);",
          "new_line_content": "    // Resume writes to the DB",
          "content_same": false
        },
        {
          "line": 5549,
          "old_api": "ReleaseFileNumberFromPendingOutputs",
          "new_api": null,
          "old_text": "ReleaseFileNumberFromPendingOutputs(pending_output_elem)",
          "new_text": null,
          "old_line_content": "    ReleaseFileNumberFromPendingOutputs(pending_output_elem);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 5550,
          "old_api": "static_cast<int>(num_cfs)",
          "new_api": null,
          "old_text": "static_cast<int>(num_cfs)",
          "new_text": null,
          "old_line_content": "    num_running_ingest_file_ -= static_cast<int>(num_cfs);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5560,
          "old_api": "Clean",
          "new_api": null,
          "old_text": "sv_ctxs[i].Clean()",
          "new_text": null,
          "old_line_content": "    sv_ctxs[i].Clean();",
          "new_line_content": "  // Cleanup",
          "content_same": false
        },
        {
          "line": 5563,
          "old_api": "Cleanup",
          "new_api": null,
          "old_text": "ingestion_jobs[i].Cleanup(status)",
          "new_text": null,
          "old_line_content": "    ingestion_jobs[i].Cleanup(status);",
          "new_line_content": "    // This may rollback jobs that have completed successfully. This is",
          "content_same": false
        },
        {
          "line": 5568,
          "old_api": "cfd",
          "new_api": null,
          "old_text": "static_cast<ColumnFamilyHandleImpl*>(args[i].column_family)->cfd()",
          "new_text": null,
          "old_line_content": "          static_cast<ColumnFamilyHandleImpl*>(args[i].column_family)->cfd();",
          "new_line_content": "    for (size_t i = 0; i != num_cfs; ++i) {",
          "content_same": false
        },
        {
          "line": 5569,
          "old_api": "IsDropped",
          "new_api": null,
          "old_text": "cfd->IsDropped()",
          "new_text": null,
          "old_line_content": "      if (!cfd->IsDropped()) {",
          "new_line_content": "      auto* cfd =",
          "content_same": false
        },
        {
          "line": 5582,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(handle != nullptr)",
          "new_text": null,
          "old_line_content": "  assert(handle != nullptr);",
          "new_line_content": "    const std::vector<const ExportImportFilesMetaData*>& metadatas,",
          "content_same": false
        },
        {
          "line": 5583,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(*handle == nullptr)",
          "new_text": null,
          "old_line_content": "  assert(*handle == nullptr);",
          "new_line_content": "    ColumnFamilyHandle** handle) {",
          "content_same": false
        },
        {
          "line": 5586,
          "old_api": "Name",
          "new_api": null,
          "old_text": "options.comparator->Name()",
          "new_text": null,
          "old_line_content": "  std::string cf_comparator_name = options.comparator->Name();",
          "new_line_content": "  // TODO: plumb Env::IOActivity",
          "content_same": false
        },
        {
          "line": 5589,
          "old_api": "size",
          "new_api": null,
          "old_text": "metadatas.size()",
          "new_text": null,
          "old_line_content": "  std::vector<std::vector<LiveFileMetaData*>> metadata_files(metadatas.size());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5590,
          "old_api": "size",
          "new_api": null,
          "old_text": "metadatas.size()",
          "new_text": null,
          "old_line_content": "  for (size_t i = 0; i < metadatas.size(); i++) {",
          "new_line_content": "  size_t total_file_num = 0;",
          "content_same": false
        },
        {
          "line": 5595,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "metadata_files[i].push_back((LiveFileMetaData*)&file)",
          "new_text": null,
          "old_line_content": "      metadata_files[i].push_back((LiveFileMetaData*)&file);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5601,
          "old_api": "CreateColumnFamily",
          "new_api": null,
          "old_text": "CreateColumnFamily(options, column_family_name, handle)",
          "new_text": null,
          "old_line_content": "  auto status = CreateColumnFamily(options, column_family_name, handle);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5602,
          "old_api": "ok",
          "new_api": null,
          "old_text": "status.ok()",
          "new_text": null,
          "old_line_content": "  if (!status.ok()) {",
          "new_line_content": "  // Create column family.",
          "content_same": false
        },
        {
          "line": 5607,
          "old_api": "static_cast_with_check<ColumnFamilyHandleImpl>(*handle)",
          "new_api": null,
          "old_text": "static_cast_with_check<ColumnFamilyHandleImpl>(*handle)",
          "new_text": null,
          "old_line_content": "  auto cfh = static_cast_with_check<ColumnFamilyHandleImpl>(*handle);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5608,
          "old_api": "cfd",
          "new_api": null,
          "old_text": "cfh->cfd()",
          "new_text": null,
          "old_line_content": "  auto cfd = cfh->cfd();",
          "new_line_content": "  // Import sst files from metadata.",
          "content_same": false
        },
        {
          "line": 5620,
          "old_api": "IsDBStopped",
          "new_api": null,
          "old_text": "error_handler_.IsDBStopped()",
          "new_text": null,
          "old_line_content": "    if (error_handler_.IsDBStopped()) {",
          "new_line_content": "    // Lock db mutex",
          "content_same": false
        },
        {
          "line": 5626,
          "old_api": "reset",
          "new_api": null,
          "old_text": "pending_output_elem.reset(new std::list<uint64_t>::iterator(\n        CaptureCurrentFileNumberInPendingOutputs()))",
          "new_text": null,
          "old_line_content": "    pending_output_elem.reset(new std::list<uint64_t>::iterator(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5627,
          "old_api": "CaptureCurrentFileNumberInPendingOutputs",
          "new_api": null,
          "old_text": "CaptureCurrentFileNumberInPendingOutputs()",
          "new_text": null,
          "old_line_content": "        CaptureCurrentFileNumberInPendingOutputs()));",
          "new_line_content": "    // Make sure that bg cleanup wont delete the files that we are importing",
          "content_same": false
        },
        {
          "line": 5634,
          "old_api": "FetchAddFileNumber",
          "new_api": null,
          "old_text": "versions_->FetchAddFileNumber(total_file_num)",
          "new_text": null,
          "old_line_content": "      next_file_number = versions_->FetchAddFileNumber(total_file_num);",
          "new_line_content": "      // and this will overwrite the external file. To protect the external",
          "content_same": false
        },
        {
          "line": 5635,
          "old_api": "GetLatestMutableCFOptions",
          "new_api": null,
          "old_text": "cfd->GetLatestMutableCFOptions()",
          "new_text": null,
          "old_line_content": "      auto cf_options = cfd->GetLatestMutableCFOptions();",
          "new_line_content": "      // file, we have to make sure the file number will never being reused.",
          "content_same": false
        },
        {
          "line": 5638,
          "old_api": "GetDbDir",
          "new_api": null,
          "old_text": "directories_.GetDbDir()",
          "new_text": null,
          "old_line_content": "                                 &mutex_, directories_.GetDbDir());",
          "new_line_content": "      status =",
          "content_same": false
        },
        {
          "line": 5644,
          "old_api": "Clean",
          "new_api": null,
          "old_text": "dummy_sv_ctx.Clean()",
          "new_text": null,
          "old_line_content": "  dummy_sv_ctx.Clean();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5647,
          "old_api": "GetReferencedSuperVersion",
          "new_api": null,
          "old_text": "cfd->GetReferencedSuperVersion(this)",
          "new_text": null,
          "old_line_content": "    SuperVersion* sv = cfd->GetReferencedSuperVersion(this);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5652,
          "old_api": "ok",
          "new_api": null,
          "old_text": "status.ok()",
          "new_text": null,
          "old_line_content": "  if (status.ok()) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 5660,
          "old_api": "EnterUnbatched",
          "new_api": null,
          "old_text": "write_thread_.EnterUnbatched(&w, &mutex_)",
          "new_text": null,
          "old_line_content": "      write_thread_.EnterUnbatched(&w, &mutex_);",
          "new_line_content": "      // Stop writes to the DB by entering both write threads",
          "content_same": false
        },
        {
          "line": 5663,
          "old_api": "EnterUnbatched",
          "new_api": null,
          "old_text": "nonmem_write_thread_.EnterUnbatched(&nonmem_w, &mutex_)",
          "new_text": null,
          "old_line_content": "        nonmem_write_thread_.EnterUnbatched(&nonmem_w, &mutex_);",
          "new_line_content": "      WriteThread::Writer nonmem_w;",
          "content_same": false
        },
        {
          "line": 5667,
          "old_api": "IsDropped",
          "new_api": null,
          "old_text": "cfd->IsDropped()",
          "new_text": null,
          "old_line_content": "      assert(!cfd->IsDropped());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5668,
          "old_api": "AssertHeld",
          "new_api": null,
          "old_text": "mutex_.AssertHeld()",
          "new_text": null,
          "old_line_content": "      mutex_.AssertHeld();",
          "new_line_content": "      num_running_ingest_file_++;",
          "content_same": false
        },
        {
          "line": 5672,
          "old_api": "ok",
          "new_api": null,
          "old_text": "status.ok()",
          "new_text": null,
          "old_line_content": "      if (status.ok()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5673,
          "old_api": "GetLatestMutableCFOptions",
          "new_api": null,
          "old_text": "cfd->GetLatestMutableCFOptions()",
          "new_text": null,
          "old_line_content": "        auto cf_options = cfd->GetLatestMutableCFOptions();",
          "new_line_content": "      // Install job edit [Mutex will be unlocked here]",
          "content_same": false
        },
        {
          "line": 5684,
          "old_api": "ExitUnbatched",
          "new_api": null,
          "old_text": "nonmem_write_thread_.ExitUnbatched(&nonmem_w)",
          "new_text": null,
          "old_line_content": "        nonmem_write_thread_.ExitUnbatched(&nonmem_w);",
          "new_line_content": "      // Resume writes to the DB",
          "content_same": false
        },
        {
          "line": 5690,
          "old_api": "SignalAll",
          "new_api": null,
          "old_text": "bg_cv_.SignalAll()",
          "new_text": null,
          "old_line_content": "        bg_cv_.SignalAll();",
          "new_line_content": "      num_running_ingest_file_--;",
          "content_same": false
        },
        {
          "line": 5695,
          "old_api": "Clean",
          "new_api": null,
          "old_text": "sv_context.Clean()",
          "new_text": null,
          "old_line_content": "    sv_context.Clean();",
          "new_line_content": "    // mutex_ is unlocked here",
          "content_same": false
        },
        {
          "line": 5700,
          "old_api": "ReleaseFileNumberFromPendingOutputs",
          "new_api": null,
          "old_text": "ReleaseFileNumberFromPendingOutputs(pending_output_elem)",
          "new_text": null,
          "old_line_content": "    ReleaseFileNumberFromPendingOutputs(pending_output_elem);",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 5703,
          "old_api": "Cleanup",
          "new_api": null,
          "old_text": "import_job.Cleanup(status)",
          "new_text": null,
          "old_line_content": "  import_job.Cleanup(status);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 5704,
          "old_api": "ok",
          "new_api": null,
          "old_text": "status.ok()",
          "new_text": null,
          "old_line_content": "  if (!status.ok()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5712,
          "old_api": "DestroyColumnFamilyHandle",
          "new_api": null,
          "old_text": "DestroyColumnFamilyHandle(*handle)",
          "new_text": null,
          "old_line_content": "    temp_s = DestroyColumnFamilyHandle(*handle);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5713,
          "old_api": "ok",
          "new_api": null,
          "old_text": "temp_s.ok()",
          "new_text": null,
          "old_line_content": "    assert(temp_s.ok());",
          "new_line_content": "    // Always returns Status::OK()",
          "content_same": false
        },
        {
          "line": 5721,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(column_family)",
          "new_text": null,
          "old_line_content": "  assert(column_family);",
          "new_line_content": "Status DBImpl::ClipColumnFamily(ColumnFamilyHandle* column_family,",
          "content_same": false
        },
        {
          "line": 5727,
          "old_api": "cfd",
          "new_api": null,
          "old_text": "static_cast_with_check<ColumnFamilyHandleImpl>(column_family)->cfd()",
          "new_text": null,
          "old_line_content": "      static_cast_with_check<ColumnFamilyHandleImpl>(column_family)->cfd();",
          "new_line_content": "  flush_opts.allow_write_stall = true;",
          "content_same": false
        },
        {
          "line": 5733,
          "old_api": "FlushMemTable",
          "new_api": null,
          "old_text": "FlushMemTable(cfd, flush_opts, FlushReason::kDeleteFiles,\n                           false /* entered_write_thread */)",
          "new_text": null,
          "old_line_content": "    status = FlushMemTable(cfd, flush_opts, FlushReason::kDeleteFiles,",
          "new_line_content": "                                  false /* entered_write_thread */);",
          "content_same": false
        },
        {
          "line": 5737,
          "old_api": "ok",
          "new_api": null,
          "old_text": "status.ok()",
          "new_text": null,
          "old_line_content": "  if (status.ok()) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 5740,
          "old_api": "RangePtr",
          "new_api": null,
          "old_text": "RangePtr(nullptr, &begin_key)",
          "new_text": null,
          "old_line_content": "    ranges.push_back(RangePtr(nullptr, &begin_key));",
          "new_line_content": "    // DeleteFilesInRanges non-overlap files except L0",
          "content_same": false
        },
        {
          "line": 5741,
          "old_api": "RangePtr",
          "new_api": null,
          "old_text": "RangePtr(&end_key, nullptr)",
          "new_text": null,
          "old_line_content": "    ranges.push_back(RangePtr(&end_key, nullptr));",
          "new_line_content": "    std::vector<RangePtr> ranges;",
          "content_same": false
        },
        {
          "line": 5747,
          "old_api": "ok",
          "new_api": null,
          "old_text": "status.ok()",
          "new_text": null,
          "old_line_content": "  if (status.ok()) {",
          "new_line_content": "  // DeleteRange the remaining overlapping keys",
          "content_same": false
        },
        {
          "line": 5752,
          "old_api": "current",
          "new_api": null,
          "old_text": "cfd->current()->GetSstFilesBoundaryKeys(&smallest_user_key,\n                                              &largest_user_key)",
          "new_text": null,
          "old_line_content": "      cfd->current()->GetSstFilesBoundaryKeys(&smallest_user_key,",
          "new_line_content": "      // Lock db mutex",
          "content_same": false
        },
        {
          "line": 5756,
          "old_api": "empty",
          "new_api": null,
          "old_text": "largest_user_key.empty()",
          "new_text": null,
          "old_line_content": "    if (smallest_user_key.empty() && largest_user_key.empty()) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5759,
          "old_api": "GetComparator",
          "new_api": null,
          "old_text": "column_family->GetComparator()",
          "new_text": null,
          "old_line_content": "      const Comparator* const ucmp = column_family->GetComparator();",
          "new_line_content": "      empty_after_delete = true;",
          "content_same": false
        },
        {
          "line": 5762,
          "old_api": "Compare",
          "new_api": null,
          "old_text": "ucmp->Compare(smallest_user_key, begin_key)",
          "new_text": null,
          "old_line_content": "      if (ucmp->Compare(smallest_user_key, begin_key) < 0) {",
          "new_line_content": "      WriteOptions wo;",
          "content_same": false
        },
        {
          "line": 5763,
          "old_api": "DeleteRange",
          "new_api": null,
          "old_text": "DeleteRange(wo, column_family, smallest_user_key, begin_key)",
          "new_text": null,
          "old_line_content": "        status = DeleteRange(wo, column_family, smallest_user_key, begin_key);",
          "new_line_content": "      // Delete [smallest_user_key, clip_begin_key)",
          "content_same": false
        },
        {
          "line": 5766,
          "old_api": "ok",
          "new_api": null,
          "old_text": "status.ok()",
          "new_text": null,
          "old_line_content": "      if (status.ok()) {",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 5769,
          "old_api": "DeleteRange",
          "new_api": null,
          "old_text": "DeleteRange(wo, column_family, end_key, largest_user_key)",
          "new_text": null,
          "old_line_content": "          status = DeleteRange(wo, column_family, end_key, largest_user_key);",
          "new_line_content": "        // Delete [clip_end_key, largest_use_key]",
          "content_same": false
        },
        {
          "line": 5778,
          "old_api": "ok",
          "new_api": null,
          "old_text": "status.ok()",
          "new_text": null,
          "old_line_content": "  if (status.ok() && !empty_after_delete) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 5789,
          "old_api": "CompactRange",
          "new_api": null,
          "old_text": "CompactRange(compact_options, nullptr, nullptr)",
          "new_text": null,
          "old_line_content": "    status = CompactRange(compact_options, nullptr, nullptr);",
          "new_line_content": "    // during non-bottommost compactions, calling CompactRange() on these two",
          "content_same": false
        },
        {
          "line": 5795,
          "old_api": "VerifyChecksumInternal",
          "new_api": null,
          "old_text": "VerifyChecksumInternal(read_options, /*use_file_checksum=*/true)",
          "new_text": null,
          "old_line_content": "  return VerifyChecksumInternal(read_options, /*use_file_checksum=*/true);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5799,
          "old_api": "VerifyChecksumInternal",
          "new_api": null,
          "old_text": "VerifyChecksumInternal(read_options, /*use_file_checksum=*/false)",
          "new_text": null,
          "old_line_content": "  return VerifyChecksumInternal(read_options, /*use_file_checksum=*/false);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5807,
          "old_api": "IOSTATS",
          "new_api": null,
          "old_text": "IOSTATS(bytes_read)",
          "new_text": null,
          "old_line_content": "  uint64_t prev_bytes_read = IOSTATS(bytes_read);",
          "new_line_content": "  // be dynamically toggled. So we do not need to worry about `PerfLevel`",
          "content_same": false
        },
        {
          "line": 5812,
          "old_api": "Status::InvalidArgument(\n        \"Cannot verify file checksum with `ReadOptions::io_activity` != \"\n        \"`Env::IOActivity::kUnknown`\")",
          "new_api": null,
          "old_text": "Status::InvalidArgument(\n        \"Cannot verify file checksum with `ReadOptions::io_activity` != \"\n        \"`Env::IOActivity::kUnknown`\")",
          "new_text": null,
          "old_line_content": "    s = Status::InvalidArgument(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5819,
          "old_api": "get",
          "new_api": null,
          "old_text": "immutable_db_options_.file_checksum_gen_factory.get()",
          "new_text": null,
          "old_line_content": "        immutable_db_options_.file_checksum_gen_factory.get();",
          "new_line_content": "  if (use_file_checksum) {",
          "content_same": false
        },
        {
          "line": 5833,
          "old_api": "GetColumnFamilySet",
          "new_api": null,
          "old_text": "versions_->GetColumnFamilySet()",
          "new_text": null,
          "old_line_content": "    for (auto cfd : *versions_->GetColumnFamilySet()) {",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 5834,
          "old_api": "initialized",
          "new_api": null,
          "old_text": "cfd->initialized()",
          "new_text": null,
          "old_line_content": "      if (!cfd->IsDropped() && cfd->initialized()) {",
          "new_line_content": "    InstrumentedMutexLock l(&mutex_);",
          "content_same": false
        },
        {
          "line": 5842,
          "old_api": "GetReferencedSuperVersion",
          "new_api": null,
          "old_text": "cfd->GetReferencedSuperVersion(this)",
          "new_text": null,
          "old_line_content": "    sv_list.push_back(cfd->GetReferencedSuperVersion(this));",
          "new_line_content": "  std::vector<SuperVersion*> sv_list;",
          "content_same": false
        },
        {
          "line": 5846,
          "old_api": "storage_info",
          "new_api": null,
          "old_text": "sv->current->storage_info()",
          "new_text": null,
          "old_line_content": "    VersionStorageInfo* vstorage = sv->current->storage_info();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5847,
          "old_api": "cfd",
          "new_api": null,
          "old_text": "sv->current->cfd()",
          "new_text": null,
          "old_line_content": "    ColumnFamilyData* cfd = sv->current->cfd();",
          "new_line_content": "  for (auto& sv : sv_list) {",
          "content_same": false
        },
        {
          "line": 5851,
          "old_api": "BuildDBOptions",
          "new_api": null,
          "old_text": "BuildDBOptions(immutable_db_options_, mutable_db_options_)",
          "new_text": null,
          "old_line_content": "      opts = Options(BuildDBOptions(immutable_db_options_, mutable_db_options_),",
          "new_line_content": "    if (!use_file_checksum) {",
          "content_same": false
        },
        {
          "line": 5852,
          "old_api": "GetLatestCFOptions",
          "new_api": null,
          "old_text": "cfd->GetLatestCFOptions()",
          "new_text": null,
          "old_line_content": "                     cfd->GetLatestCFOptions());",
          "new_line_content": "      InstrumentedMutexLock l(&mutex_);",
          "content_same": false
        },
        {
          "line": 5855,
          "old_api": "ok",
          "new_api": null,
          "old_text": "s.ok()",
          "new_text": null,
          "old_line_content": "      for (size_t j = 0; j < vstorage->LevelFilesBrief(i).num_files && s.ok();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5860,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(fmeta)",
          "new_text": null,
          "old_line_content": "        assert(fmeta);",
          "new_line_content": "        const auto& fd = fd_with_krange.fd;",
          "content_same": false
        },
        {
          "line": 5861,
          "old_api": "ioptions",
          "new_api": null,
          "old_text": "cfd->ioptions()",
          "new_text": null,
          "old_line_content": "        std::string fname = TableFileName(cfd->ioptions()->cf_paths,",
          "new_line_content": "        const FileMetaData* fmeta = fd_with_krange.file_metadata;",
          "content_same": false
        },
        {
          "line": 5868,
          "old_api": "ROCKSDB_NAMESPACE::VerifySstFileChecksum(\n              opts, file_options_, read_options, fname, fd.largest_seqno)",
          "new_api": null,
          "old_text": "ROCKSDB_NAMESPACE::VerifySstFileChecksum(\n              opts, file_options_, read_options, fname, fd.largest_seqno)",
          "new_text": null,
          "old_line_content": "          s = ROCKSDB_NAMESPACE::VerifySstFileChecksum(",
          "new_line_content": "                                     read_options);",
          "content_same": false
        },
        {
          "line": 5871,
          "old_api": "RecordTick",
          "new_api": null,
          "old_text": "RecordTick(stats_, VERIFY_CHECKSUM_READ_BYTES,\n                   IOSTATS(bytes_read) - prev_bytes_read)",
          "new_text": null,
          "old_line_content": "        RecordTick(stats_, VERIFY_CHECKSUM_READ_BYTES,",
          "new_line_content": "              opts, file_options_, read_options, fname, fd.largest_seqno);",
          "content_same": false
        },
        {
          "line": 5872,
          "old_api": "IOSTATS",
          "new_api": null,
          "old_text": "IOSTATS(bytes_read)",
          "new_text": null,
          "old_line_content": "                   IOSTATS(bytes_read) - prev_bytes_read);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5877,
          "old_api": "ok",
          "new_api": null,
          "old_text": "s.ok()",
          "new_text": null,
          "old_line_content": "    if (s.ok() && use_file_checksum) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5878,
          "old_api": "GetBlobFiles",
          "new_api": null,
          "old_text": "vstorage->GetBlobFiles()",
          "new_text": null,
          "old_line_content": "      const auto& blob_files = vstorage->GetBlobFiles();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5885,
          "old_api": "front",
          "new_api": null,
          "old_text": "cfd->ioptions()->cf_paths.front()",
          "new_text": null,
          "old_line_content": "            cfd->ioptions()->cf_paths.front().path, blob_file_number);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5890,
          "old_api": "IOSTATS",
          "new_api": null,
          "old_text": "IOSTATS(bytes_read)",
          "new_text": null,
          "old_line_content": "                   IOSTATS(bytes_read) - prev_bytes_read);",
          "new_line_content": "                                   read_options);",
          "content_same": false
        },
        {
          "line": 5897,
          "old_api": "ok",
          "new_api": null,
          "old_text": "s.ok()",
          "new_text": null,
          "old_line_content": "    if (!s.ok()) {",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 5902,
          "old_api": "immutable_db_options",
          "new_api": null,
          "old_text": "immutable_db_options()",
          "new_text": null,
          "old_line_content": "  bool defer_purge = immutable_db_options().avoid_unnecessary_blocking_io;",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 5906,
          "old_api": "Unref",
          "new_api": null,
          "old_text": "sv->Unref()",
          "new_text": null,
          "old_line_content": "      if (sv && sv->Unref()) {",
          "new_line_content": "    InstrumentedMutexLock l(&mutex_);",
          "content_same": false
        },
        {
          "line": 5907,
          "old_api": "Cleanup",
          "new_api": null,
          "old_text": "sv->Cleanup()",
          "new_text": null,
          "old_line_content": "        sv->Cleanup();",
          "new_line_content": "    for (auto sv : sv_list) {",
          "content_same": false
        },
        {
          "line": 5916,
          "old_api": "SchedulePurge",
          "new_api": null,
          "old_text": "SchedulePurge()",
          "new_text": null,
          "old_line_content": "      SchedulePurge();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5919,
          "old_api": "UnrefAndTryDelete",
          "new_api": null,
          "old_text": "cfd->UnrefAndTryDelete()",
          "new_text": null,
          "old_line_content": "      cfd->UnrefAndTryDelete();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5922,
          "old_api": "RecordTick",
          "new_api": null,
          "old_text": "RecordTick(stats_, VERIFY_CHECKSUM_READ_BYTES,\n             IOSTATS(bytes_read) - prev_bytes_read)",
          "new_text": null,
          "old_line_content": "  RecordTick(stats_, VERIFY_CHECKSUM_READ_BYTES,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5923,
          "old_api": "IOSTATS",
          "new_api": null,
          "old_text": "IOSTATS(bytes_read)",
          "new_text": null,
          "old_line_content": "             IOSTATS(bytes_read) - prev_bytes_read);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 5932,
          "old_api": "Status::InvalidArgument(\n        \"Cannot call VerifyChecksum with `ReadOptions::io_activity` != \"\n        \"`Env::IOActivity::kUnknown`\")",
          "new_api": null,
          "old_text": "Status::InvalidArgument(\n        \"Cannot call VerifyChecksum with `ReadOptions::io_activity` != \"\n        \"`Env::IOActivity::kUnknown`\")",
          "new_text": null,
          "old_line_content": "    return Status::InvalidArgument(",
          "new_line_content": "                                      const ReadOptions& read_options) {",
          "content_same": false
        },
        {
          "line": 5943,
          "old_api": "get",
          "new_api": null,
          "old_text": "ROCKSDB_NAMESPACE::GenerateOneFileChecksum(\n      fs_.get(), fname, immutable_db_options_.file_checksum_gen_factory.get(),\n      func_name_expected, &file_checksum, &func_name,\n      read_options.readahead_size, immutable_db_options_.allow_mmap_reads,\n      io_tracer_, immutable_db_options_.rate_limiter.get(),\n      read_options.rate_limiter_priority)",
          "new_text": null,
          "old_line_content": "  s = ROCKSDB_NAMESPACE::GenerateOneFileChecksum(",
          "new_line_content": "  std::string file_checksum;",
          "content_same": false
        },
        {
          "line": 5944,
          "old_api": "get",
          "new_api": null,
          "old_text": "immutable_db_options_.file_checksum_gen_factory.get()",
          "new_text": null,
          "old_line_content": "      fs_.get(), fname, immutable_db_options_.file_checksum_gen_factory.get(),",
          "new_line_content": "  std::string func_name;",
          "content_same": false
        },
        {
          "line": 5947,
          "old_api": "get",
          "new_api": null,
          "old_text": "immutable_db_options_.rate_limiter.get()",
          "new_text": null,
          "old_line_content": "      io_tracer_, immutable_db_options_.rate_limiter.get(),",
          "new_line_content": "      func_name_expected, &file_checksum, &func_name,",
          "content_same": false
        },
        {
          "line": 5950,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(func_name_expected == func_name)",
          "new_text": null,
          "old_line_content": "    assert(func_name_expected == func_name);",
          "new_line_content": "      read_options.rate_limiter_priority);",
          "content_same": false
        },
        {
          "line": 5955,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "Slice(file_checksum_expected).ToString(/*hex=*/true)",
          "new_text": null,
          "old_line_content": "          << Slice(file_checksum_expected).ToString(/*hex=*/true);",
          "new_line_content": "      oss << fname << \" file checksum mismatch, \";",
          "content_same": false
        },
        {
          "line": 5956,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "Slice(file_checksum).ToString(/*hex=*/true)",
          "new_text": null,
          "old_line_content": "      oss << \", but actual \" << Slice(file_checksum).ToString(/*hex=*/true);",
          "new_line_content": "      oss << \"expecting \"",
          "content_same": false
        },
        {
          "line": 5966,
          "old_api": "empty",
          "new_api": null,
          "old_text": "immutable_db_options_.listeners.empty()",
          "new_text": null,
          "old_line_content": "  if (immutable_db_options_.listeners.empty()) {",
          "new_line_content": "void DBImpl::NotifyOnExternalFileIngested(",
          "content_same": false
        },
        {
          "line": 5970,
          "old_api": "files_to_ingest",
          "new_api": null,
          "old_text": "ingestion_job.files_to_ingest()",
          "new_text": null,
          "old_line_content": "  for (const IngestedFileInfo& f : ingestion_job.files_to_ingest()) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 5978,
          "old_api": "OnExternalFileIngested",
          "new_api": null,
          "old_text": "listener->OnExternalFileIngested(this, info)",
          "new_text": null,
          "old_line_content": "      listener->OnExternalFileIngested(this, info);",
          "new_line_content": "    info.table_properties = f.table_properties;",
          "content_same": false
        },
        {
          "line": 5986,
          "old_api": "reset",
          "new_api": null,
          "old_text": "tracer_.reset(new Tracer(immutable_db_options_.clock, trace_options,\n                           std::move(trace_writer)))",
          "new_text": null,
          "old_line_content": "  tracer_.reset(new Tracer(immutable_db_options_.clock, trace_options,",
          "new_line_content": "                          std::unique_ptr<TraceWriter>&& trace_writer) {",
          "content_same": false
        },
        {
          "line": 5987,
          "old_api": "std::move(trace_writer)",
          "new_api": null,
          "old_text": "std::move(trace_writer)",
          "new_text": null,
          "old_line_content": "                           std::move(trace_writer)));",
          "new_line_content": "  InstrumentedMutexLock lock(&trace_mutex_);",
          "content_same": false
        },
        {
          "line": 5995,
          "old_api": "Close",
          "new_api": null,
          "old_text": "tracer_->Close()",
          "new_text": null,
          "old_line_content": "    s = tracer_->Close();",
          "new_line_content": "  Status s;",
          "content_same": false
        },
        {
          "line": 5996,
          "old_api": "reset",
          "new_api": null,
          "old_text": "tracer_.reset()",
          "new_text": null,
          "old_line_content": "    tracer_.reset();",
          "new_line_content": "  if (tracer_ != nullptr) {",
          "content_same": false
        },
        {
          "line": 6007,
          "old_api": "std::move(reader)",
          "new_api": null,
          "old_text": "std::move(reader)",
          "new_text": null,
          "old_line_content": "  replayer->reset(new ReplayerImpl(this, handles, std::move(reader)));",
          "new_line_content": "    std::unique_ptr<TraceReader>&& reader,",
          "content_same": false
        },
        {
          "line": 6008,
          "old_api": "Status::OK()",
          "new_api": null,
          "old_text": "Status::OK()",
          "new_text": null,
          "old_line_content": "  return Status::OK();",
          "new_line_content": "    std::unique_ptr<Replayer>* replayer) {",
          "content_same": false
        },
        {
          "line": 6021,
          "old_api": "get",
          "new_api": null,
          "old_text": "env_->GetSystemClock().get()",
          "new_text": null,
          "old_line_content": "      NewBlockCacheTraceWriter(env_->GetSystemClock().get(), trace_writer_opt,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6022,
          "old_api": "std::move(trace_writer)",
          "new_api": null,
          "old_text": "std::move(trace_writer)",
          "new_text": null,
          "old_line_content": "                               std::move(trace_writer));",
          "new_line_content": "  std::unique_ptr<BlockCacheTraceWriter> block_cache_trace_writer =",
          "content_same": false
        },
        {
          "line": 6025,
          "old_api": "std::move(block_cache_trace_writer)",
          "new_api": null,
          "old_text": "std::move(block_cache_trace_writer)",
          "new_text": null,
          "old_line_content": "                                        std::move(block_cache_trace_writer));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6031,
          "old_api": "std::move(trace_writer)",
          "new_api": null,
          "old_text": "std::move(trace_writer)",
          "new_text": null,
          "old_line_content": "  return block_cache_tracer_.StartTrace(trace_options, std::move(trace_writer));",
          "new_line_content": "    const BlockCacheTraceOptions& trace_options,",
          "content_same": false
        },
        {
          "line": 6035,
          "old_api": "EndTrace",
          "new_api": null,
          "old_text": "block_cache_tracer_.EndTrace()",
          "new_text": null,
          "old_line_content": "  block_cache_tracer_.EndTrace();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6036,
          "old_api": "Status::OK()",
          "new_api": null,
          "old_text": "Status::OK()",
          "new_text": null,
          "old_line_content": "  return Status::OK();",
          "new_line_content": "Status DBImpl::EndBlockCacheTrace() {",
          "content_same": false
        },
        {
          "line": 6046,
          "old_api": "IteratorSeek",
          "new_api": null,
          "old_text": "tracer_->IteratorSeek(cf_id, key, lower_bound, upper_bound)",
          "new_text": null,
          "old_line_content": "      s = tracer_->IteratorSeek(cf_id, key, lower_bound, upper_bound);",
          "new_line_content": "    InstrumentedMutexLock lock(&trace_mutex_);",
          "content_same": false
        },
        {
          "line": 6059,
          "old_api": "IteratorSeekForPrev",
          "new_api": null,
          "old_text": "tracer_->IteratorSeekForPrev(cf_id, key, lower_bound, upper_bound)",
          "new_text": null,
          "old_line_content": "      s = tracer_->IteratorSeekForPrev(cf_id, key, lower_bound, upper_bound);",
          "new_line_content": "    InstrumentedMutexLock lock(&trace_mutex_);",
          "content_same": false
        },
        {
          "line": 6073,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(nullptr != next_file_number)",
          "new_text": null,
          "old_line_content": "  assert(nullptr != next_file_number);",
          "new_line_content": "  Status s;",
          "content_same": false
        },
        {
          "line": 6080,
          "old_api": "CaptureCurrentFileNumberInPendingOutputs",
          "new_api": null,
          "old_text": "CaptureCurrentFileNumberInPendingOutputs()",
          "new_text": null,
          "old_line_content": "      CaptureCurrentFileNumberInPendingOutputs()));",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 6088,
          "old_api": "GetDbDir",
          "new_api": null,
          "old_text": "versions_->LogAndApply(cfd, *cf_options, read_options, &dummy_edit,\n                             &mutex_, directories_.GetDbDir())",
          "new_text": null,
          "old_line_content": "  s = versions_->LogAndApply(cfd, *cf_options, read_options, &dummy_edit,",
          "new_line_content": "  // and this will overwrite the external file. To protect the external",
          "content_same": false
        },
        {
          "line": 6089,
          "old_api": "GetDbDir",
          "new_api": null,
          "old_text": "directories_.GetDbDir()",
          "new_text": null,
          "old_line_content": "                             &mutex_, directories_.GetDbDir());",
          "new_line_content": "  // file, we have to make sure the file number will never being reused.",
          "content_same": false
        },
        {
          "line": 6099,
          "old_api": "std::numeric_limits<uint64_t>::max()",
          "new_api": null,
          "old_text": "std::numeric_limits<uint64_t>::max()",
          "new_text": null,
          "old_line_content": "    uint64_t oldest_time = std::numeric_limits<uint64_t>::max();",
          "new_line_content": "Status DBImpl::GetCreationTimeOfOldestFile(uint64_t* creation_time) {",
          "content_same": false
        },
        {
          "line": 6100,
          "old_api": "GetColumnFamilySet",
          "new_api": null,
          "old_text": "versions_->GetColumnFamilySet()",
          "new_text": null,
          "old_line_content": "    for (auto cfd : *versions_->GetColumnFamilySet()) {",
          "new_line_content": "  if (mutable_db_options_.max_open_files == -1) {",
          "content_same": false
        },
        {
          "line": 6104,
          "old_api": "GetAndRefSuperVersion",
          "new_api": null,
          "old_text": "GetAndRefSuperVersion(cfd)",
          "new_text": null,
          "old_line_content": "          SuperVersion* sv = GetAndRefSuperVersion(cfd);",
          "new_line_content": "        uint64_t ctime;",
          "content_same": false
        },
        {
          "line": 6107,
          "old_api": "ReturnAndCleanupSuperVersion",
          "new_api": null,
          "old_text": "ReturnAndCleanupSuperVersion(cfd, sv)",
          "new_text": null,
          "old_line_content": "          ReturnAndCleanupSuperVersion(cfd, sv);",
          "new_line_content": "          Version* version = sv->current;",
          "content_same": false
        },
        {
          "line": 6119,
          "old_api": "Status::OK()",
          "new_api": null,
          "old_text": "Status::OK()",
          "new_text": null,
          "old_line_content": "    return Status::OK();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6129,
          "old_api": "PermitUncheckedError",
          "new_api": null,
          "old_text": "immutable_db_options_.clock->GetCurrentTime(&unix_time)\n      .PermitUncheckedError()",
          "new_text": null,
          "old_line_content": "  immutable_db_options_.clock->GetCurrentTime(&unix_time)",
          "new_line_content": "  // unix_time recorded",
          "content_same": false
        },
        {
          "line": 6135,
          "old_api": "Append",
          "new_api": null,
          "old_text": "seqno_time_mapping_.Append(seqno, unix_time)",
          "new_text": null,
          "old_line_content": "    appended = seqno_time_mapping_.Append(seqno, unix_time);",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 6138,
          "old_api": "ROCKS_LOG_WARN",
          "new_api": null,
          "old_text": "ROCKS_LOG_WARN(immutable_db_options_.info_log,\n                   \"Failed to insert sequence number to time entry: %\" PRIu64\n                   \" -> %\" PRIu64,\n                   seqno, unix_time)",
          "new_text": null,
          "old_line_content": "    ROCKS_LOG_WARN(immutable_db_options_.info_log,",
          "new_line_content": "  }",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 160,
      "total_additions": 347,
      "total_deletions": 346,
      "total_api_changes": 853
    },
    "non_api_changes": {
      "has_non_api_changes": false,
      "evidence": {
        "total_diff_lines": 6,
        "api_related_lines": 853,
        "non_api_lines": 0,
        "non_api_line_numbers": []
      }
    },
    "api_calls_before": 2146,
    "api_calls_after": 2147,
    "diff_info": {
      "added_lines": 4,
      "removed_lines": 2,
      "total_diff_lines": 20
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/zstd/modified_file/e2c0e3d4371ec4b61a16609cacf1d517dc48cb36",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/zstd/modified_file/e2c0e3d4371ec4b61a16609cacf1d517dc48cb36/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/zstd/modified_file/e2c0e3d4371ec4b61a16609cacf1d517dc48cb36/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/zstd/modified_file/e2c0e3d4371ec4b61a16609cacf1d517dc48cb36/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 349,
          "old_api": "assert",
          "new_api": "U32)(ip - base)",
          "old_text": "assert(hashLog3 > 0)",
          "new_text": "U32)(ip - base)",
          "old_line_content": "    assert(hashLog3 > 0);",
          "new_line_content": "    U32 const target = ms->nextToUpdate3 = (U32)(ip - base);",
          "content_same": false
        },
        {
          "line": 403,
          "old_api": "assert",
          "new_api": "DEBUGLOG",
          "old_text": "assert(ip <= iend-8)",
          "new_text": "DEBUGLOG(8, \"ZSTD_insertBt1 (%u)\", current)",
          "old_line_content": "    assert(ip <= iend-8);   /* required for h calculation */",
          "new_line_content": "    DEBUGLOG(8, \"ZSTD_insertBt1 (%u)\", current);",
          "content_same": false
        },
        {
          "line": 435,
          "old_api": "ZSTD_count",
          "new_api": "assert",
          "old_text": "ZSTD_count(ip+matchLength, match+matchLength, iend)",
          "new_text": "assert(matchIndex+matchLength >= dictLimit)",
          "old_line_content": "            matchLength += ZSTD_count(ip+matchLength, match+matchLength, iend);",
          "new_line_content": "            assert(matchIndex+matchLength >= dictLimit);   /* might be wrong if extDict is incorrectly set to 0 */",
          "content_same": false
        },
        {
          "line": 484,
          "old_api": "DEBUGLOG",
          "new_api": "U32)(ip - base)",
          "old_text": "DEBUGLOG(5, \"ZSTD_updateTree_internal, from %u to %u  (extDict:%u)\",\n                idx, target, extDict)",
          "new_text": "U32)(ip - base)",
          "old_line_content": "    DEBUGLOG(5, \"ZSTD_updateTree_internal, from %u to %u  (extDict:%u)\",",
          "new_line_content": "    U32 const target = (U32)(ip - base);",
          "content_same": false
        },
        {
          "line": 508,
          "old_api": "U32)(ip-base)",
          "new_api": "MIN",
          "old_text": "U32)(ip-base)",
          "new_text": "MIN(cParams->targetLength, ZSTD_OPT_NUM -1)",
          "old_line_content": "    U32 const current = (U32)(ip-base);",
          "new_line_content": "    U32 const sufficient_len = MIN(cParams->targetLength, ZSTD_OPT_NUM -1);",
          "content_same": false
        },
        {
          "line": 543,
          "old_api": "ZSTD_readMINMATCH",
          "new_api": "assert",
          "old_text": "ZSTD_readMINMATCH(ip - repOffset, minMatch)",
          "new_text": "assert(current >= dictLimit)",
          "old_line_content": "                if (ZSTD_readMINMATCH(ip, minMatch) == ZSTD_readMINMATCH(ip - repOffset, minMatch)) {",
          "new_line_content": "            assert(current >= dictLimit);",
          "content_same": false
        },
        {
          "line": 553,
          "old_api": "ZSTD_count_2segments",
          "new_api": "U32)((dictLimit-1) - repIndex)",
          "old_text": "ZSTD_count_2segments(ip+minMatch, repMatch+minMatch, iLimit, dictEnd, prefixStart)",
          "new_text": "U32)((dictLimit-1) - repIndex)",
          "old_line_content": "                    repLen = (U32)ZSTD_count_2segments(ip+minMatch, repMatch+minMatch, iLimit, dictEnd, prefixStart) + minMatch;",
          "new_line_content": "                     & (((U32)((dictLimit-1) - repIndex) >= 3) ) /* intentional overflow : do not test positions overlapping 2 memory segments */)",
          "content_same": false
        },
        {
          "line": 604,
          "old_api": "assert",
          "new_api": "MIN",
          "old_text": "assert(current > matchIndex)",
          "new_text": "MIN(commonLengthSmaller, commonLengthLarger)",
          "old_line_content": "        assert(current > matchIndex);",
          "new_line_content": "        size_t matchLength = MIN(commonLengthSmaller, commonLengthLarger);   /* guaranteed minimum nb of common bytes */",
          "content_same": false
        },
        {
          "line": 609,
          "old_api": "ZSTD_count",
          "new_api": "assert",
          "old_text": "ZSTD_count(ip+matchLength, match+matchLength, iLimit)",
          "new_text": "assert(matchIndex+matchLength >= dictLimit)",
          "old_line_content": "            matchLength += ZSTD_count(ip+matchLength, match+matchLength, iLimit);",
          "new_line_content": "            assert(matchIndex+matchLength >= dictLimit);  /* ensure the condition is correct when !extDict */",
          "content_same": false
        },
        {
          "line": 620,
          "old_api": "assert",
          "new_api": "DEBUGLOG",
          "old_text": "assert(matchEndIdx > matchIndex)",
          "new_text": "DEBUGLOG(8, \"found match of length %u at distance %u\",\n                    (U32)matchLength, current - matchIndex)",
          "old_line_content": "            assert(matchEndIdx > matchIndex);",
          "new_line_content": "            DEBUGLOG(8, \"found match of length %u at distance %u\",",
          "content_same": false
        },
        {
          "line": 665,
          "old_api": "ZSTD_updateTree_internal",
          "new_api": "DEBUGLOG",
          "old_text": "ZSTD_updateTree_internal(ms, cParams, ip, iHighLimit, matchLengthSearch, extDict)",
          "new_text": "DEBUGLOG(8, \"ZSTD_BtGetAllMatches\")",
          "old_line_content": "    ZSTD_updateTree_internal(ms, cParams, ip, iHighLimit, matchLengthSearch, extDict);",
          "new_line_content": "    DEBUGLOG(8, \"ZSTD_BtGetAllMatches\");",
          "content_same": false
        },
        {
          "line": 791,
          "old_api": "ZSTD_rescaleFreqs",
          "new_api": "assert",
          "old_text": "ZSTD_rescaleFreqs(optStatePtr, (const BYTE*)src, srcSize, optLevel)",
          "new_text": "assert(optLevel <= 2)",
          "old_line_content": "    ZSTD_rescaleFreqs(optStatePtr, (const BYTE*)src, srcSize, optLevel);",
          "new_line_content": "    assert(optLevel <= 2);",
          "content_same": false
        },
        {
          "line": 793,
          "old_api": "memset",
          "new_api": "ZSTD_rescaleFreqs",
          "old_text": "memset(&cachedLitPrice, 0, sizeof(cachedLitPrice))",
          "new_text": "ZSTD_rescaleFreqs(optStatePtr, (const BYTE*)src, srcSize, optLevel)",
          "old_line_content": "    memset(&cachedLitPrice, 0, sizeof(cachedLitPrice));",
          "new_line_content": "    ZSTD_rescaleFreqs(optStatePtr, (const BYTE*)src, srcSize, optLevel);",
          "content_same": false
        },
        {
          "line": 803,
          "old_api": "ZSTD_BtGetAllMatches",
          "new_api": "U32)(ip - anchor)",
          "old_text": "ZSTD_BtGetAllMatches(ms, cParams, ip, iend, extDict, rep, ll0, matches, minMatch)",
          "new_text": "U32)(ip - anchor)",
          "old_line_content": "            U32 const nbMatches = ZSTD_BtGetAllMatches(ms, cParams, ip, iend, extDict, rep, ll0, matches, minMatch);",
          "new_line_content": "        {   U32 const litlen = (U32)(ip - anchor);",
          "content_same": false
        },
        {
          "line": 839,
          "old_api": "ZSTD_getMatchPrice",
          "new_api": "ZSTD_updateRep",
          "old_text": "ZSTD_getMatchPrice(offset, pos, optStatePtr, optLevel)",
          "new_text": "ZSTD_updateRep(rep, offset, ll0)",
          "old_line_content": "                        U32 const matchPrice = ZSTD_getMatchPrice(offset, pos, optStatePtr, optLevel);",
          "new_line_content": "                    repcodes_t const repHistory = ZSTD_updateRep(rep, offset, ll0);",
          "content_same": false
        },
        {
          "line": 841,
          "old_api": "DEBUGLOG",
          "new_api": "ZSTD_getMatchPrice",
          "old_text": "DEBUGLOG(7, \"rPos:%u => set initial price : %.2f\",\n                                    pos, ZSTD_fCost(sequencePrice))",
          "new_text": "ZSTD_getMatchPrice(offset, pos, optStatePtr, optLevel)",
          "old_line_content": "                        DEBUGLOG(7, \"rPos:%u => set initial price : %.2f\",",
          "new_line_content": "                        U32 const matchPrice = ZSTD_getMatchPrice(offset, pos, optStatePtr, optLevel);",
          "content_same": false
        },
        {
          "line": 865,
          "old_api": "ZSTD_literalsContribution_cached",
          "new_api": "ZSTD_literalsContribution",
          "old_text": "ZSTD_literalsContribution_cached(&cachedLitPrice, anchor, litlen, optStatePtr, optLevel)",
          "new_text": "ZSTD_literalsContribution(inr-litlen, litlen, optStatePtr, optLevel)",
          "old_line_content": "                    price = ZSTD_literalsContribution_cached(&cachedLitPrice, anchor, litlen, optStatePtr, optLevel);",
          "new_line_content": "                    price = opt[cur - litlen].price + ZSTD_literalsContribution(inr-litlen, litlen, optStatePtr, optLevel);",
          "content_same": false
        },
        {
          "line": 867,
          "old_api": "assert",
          "new_api": "ZSTD_literalsContribution_cached",
          "old_text": "assert(price < 1000000000)",
          "new_text": "ZSTD_literalsContribution_cached(&cachedLitPrice, anchor, litlen, optStatePtr, optLevel)",
          "old_line_content": "                assert(price < 1000000000); /* overflow check */",
          "new_line_content": "                    price = ZSTD_literalsContribution_cached(&cachedLitPrice, anchor, litlen, optStatePtr, optLevel);",
          "content_same": false
        },
        {
          "line": 869,
          "old_api": "DEBUGLOG",
          "new_api": "assert",
          "old_text": "DEBUGLOG(7, \"rPos:%u : better price (%.2f<=%.2f) using literal\",\n                                cur, ZSTD_fCost(price), ZSTD_fCost(opt[cur].price))",
          "new_text": "assert(price < 1000000000)",
          "old_line_content": "                    DEBUGLOG(7, \"rPos:%u : better price (%.2f<=%.2f) using literal\",",
          "new_line_content": "                assert(price < 1000000000); /* overflow check */",
          "content_same": false
        },
        {
          "line": 877,
          "old_api": "DEBUGLOG",
          "new_api": "memcpy",
          "old_text": "DEBUGLOG(7, \"rPos:%u : literal would cost more (%.2f>%.2f)\",\n                                cur, ZSTD_fCost(price), ZSTD_fCost(opt[cur].price))",
          "new_text": "memcpy(opt[cur].rep, opt[cur-1].rep, sizeof(opt[cur].rep))",
          "old_line_content": "                    DEBUGLOG(7, \"rPos:%u : literal would cost more (%.2f>%.2f)\",",
          "new_line_content": "                    memcpy(opt[cur].rep, opt[cur-1].rep, sizeof(opt[cur].rep));",
          "content_same": false
        },
        {
          "line": 1056,
          "old_api": "memcpy",
          "new_api": "assert",
          "old_text": "memcpy(tmpRep, rep, sizeof(tmpRep))",
          "new_text": "assert(ms->nextToUpdate >= ms->window.dictLimit\n            && ms->nextToUpdate <= ms->window.dictLimit + 1)",
          "old_line_content": "        memcpy(tmpRep, rep, sizeof(tmpRep));",
          "new_line_content": "        assert(ms->nextToUpdate >= ms->window.dictLimit",
          "content_same": false
        },
        {
          "line": 1058,
          "old_api": "ZSTD_resetSeqStore",
          "new_api": "memcpy",
          "old_text": "ZSTD_resetSeqStore(seqStore)",
          "new_text": "memcpy(tmpRep, rep, sizeof(tmpRep))",
          "old_line_content": "        ZSTD_resetSeqStore(seqStore);",
          "new_line_content": "        memcpy(tmpRep, rep, sizeof(tmpRep));",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 514,
          "old_api": null,
          "new_api": "ZSTD_hashPtr",
          "old_text": null,
          "new_text": "ZSTD_hashPtr(ip, hashLog, mls)",
          "old_line_content": "    U32* const bt   = ms->chainTable;",
          "new_line_content": "    size_t const h  = ZSTD_hashPtr(ip, hashLog, mls);",
          "content_same": false
        },
        {
          "line": 1035,
          "old_api": null,
          "new_api": "ZSTD_upscaleStat",
          "old_text": null,
          "new_text": "ZSTD_upscaleStat(optPtr->matchLengthFreq, MaxML, 1)",
          "old_line_content": "}",
          "new_line_content": "    optPtr->matchLengthSum = ZSTD_upscaleStat(optPtr->matchLengthFreq, MaxML, 1);",
          "content_same": false
        },
        {
          "line": 1036,
          "old_api": null,
          "new_api": "ZSTD_upscaleStat",
          "old_text": null,
          "new_text": "ZSTD_upscaleStat(optPtr->offCodeFreq, MaxOff, 1)",
          "old_line_content": "",
          "new_line_content": "    optPtr->offCodeSum = ZSTD_upscaleStat(optPtr->offCodeFreq, MaxOff, 1);",
          "content_same": false
        },
        {
          "line": 1043,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(5, \"ZSTD_compressBlock_btultra (srcSize=%zu)\", srcSize)",
          "old_line_content": "    /* 2-pass strategy (disabled)",
          "new_line_content": "    DEBUGLOG(5, \"ZSTD_compressBlock_btultra (srcSize=%zu)\", srcSize);",
          "content_same": false
        },
        {
          "line": 534,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(8, \"ZSTD_insertBtAndGetAllMatches: current=%u\", current)",
          "old_line_content": "    /* check repCode */",
          "new_line_content": "    DEBUGLOG(8, \"ZSTD_insertBtAndGetAllMatches: current=%u\", current);",
          "content_same": false
        },
        {
          "line": 1050,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(srcSize <= ZSTD_BLOCKSIZE_MAX)",
          "old_line_content": "      && (seqStore->sequences == seqStore->sequencesStart)   /* no ldm */",
          "new_line_content": "    assert(srcSize <= ZSTD_BLOCKSIZE_MAX);",
          "content_same": false
        },
        {
          "line": 1055,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(5, \"ZSTD_compressBlock_btultra: first block: collecting statistics\")",
          "old_line_content": "            && ms->nextToUpdate <= ms->window.dictLimit + 1);",
          "new_line_content": "        DEBUGLOG(5, \"ZSTD_compressBlock_btultra: first block: collecting statistics\");",
          "content_same": false
        },
        {
          "line": 545,
          "old_api": null,
          "new_api": "ZSTD_readMINMATCH",
          "old_text": null,
          "new_text": "ZSTD_readMINMATCH(ip - repOffset, minMatch)",
          "old_line_content": "                }",
          "new_line_content": "                if (ZSTD_readMINMATCH(ip, minMatch) == ZSTD_readMINMATCH(ip - repOffset, minMatch)) {",
          "content_same": false
        },
        {
          "line": 546,
          "old_api": null,
          "new_api": "ZSTD_count",
          "old_text": null,
          "new_text": "ZSTD_count(ip+minMatch, ip+minMatch-repOffset, iLimit)",
          "old_line_content": "            } else {  /* repIndex < dictLimit || repIndex >= current */",
          "new_line_content": "                    repLen = (U32)ZSTD_count(ip+minMatch, ip+minMatch-repOffset, iLimit) + minMatch;",
          "content_same": false
        },
        {
          "line": 1059,
          "old_api": null,
          "new_api": "ZSTD_compressBlock_opt_generic",
          "old_text": null,
          "new_text": "ZSTD_compressBlock_opt_generic(ms, seqStore, tmpRep, cParams, src, srcSize, 2 /*optLevel*/, 0 /*extDict*/)",
          "old_line_content": "        /* invalidate first scan from history */",
          "new_line_content": "        ZSTD_compressBlock_opt_generic(ms, seqStore, tmpRep, cParams, src, srcSize, 2 /*optLevel*/, 0 /*extDict*/);   /* generate stats into ms->opt*/",
          "content_same": false
        },
        {
          "line": 1060,
          "old_api": null,
          "new_api": "ZSTD_resetSeqStore",
          "old_text": null,
          "new_text": "ZSTD_resetSeqStore(seqStore)",
          "old_line_content": "        ms->window.base -= srcSize;",
          "new_line_content": "        ZSTD_resetSeqStore(seqStore);",
          "content_same": false
        },
        {
          "line": 550,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(current >= windowLow)",
          "old_line_content": "                  && ( ((repOffset-1) /*intentional overflow*/ < current - windowLow)  /* equivalent to `current > repIndex >= windowLow` */",
          "new_line_content": "                assert(current >= windowLow);",
          "content_same": false
        },
        {
          "line": 554,
          "old_api": null,
          "new_api": "ZSTD_readMINMATCH",
          "old_text": null,
          "new_text": "ZSTD_readMINMATCH(repMatch, minMatch)",
          "old_line_content": "            }   }",
          "new_line_content": "                  && (ZSTD_readMINMATCH(ip, minMatch) == ZSTD_readMINMATCH(repMatch, minMatch)) ) {",
          "content_same": false
        },
        {
          "line": 555,
          "old_api": null,
          "new_api": "ZSTD_count_2segments",
          "old_text": null,
          "new_text": "ZSTD_count_2segments(ip+minMatch, repMatch+minMatch, iLimit, dictEnd, prefixStart)",
          "old_line_content": "            /* save longer solution */",
          "new_line_content": "                    repLen = (U32)ZSTD_count_2segments(ip+minMatch, repMatch+minMatch, iLimit, dictEnd, prefixStart) + minMatch;",
          "content_same": false
        },
        {
          "line": 1068,
          "old_api": null,
          "new_api": "ZSTD_upscaleStats",
          "old_text": null,
          "new_text": "ZSTD_upscaleStats(&ms->opt)",
          "old_line_content": "#endif",
          "new_line_content": "        ZSTD_upscaleStats(&ms->opt);",
          "content_same": false
        },
        {
          "line": 559,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(8, \"found rep-match %u of length %u\",\n                            repCode - ll0, (U32)repLen)",
          "old_line_content": "                bestLength = repLen;",
          "new_line_content": "                DEBUGLOG(8, \"found rep-match %u of length %u\",",
          "content_same": false
        },
        {
          "line": 1071,
          "old_api": null,
          "new_api": "ZSTD_compressBlock_opt_generic",
          "old_text": null,
          "new_text": "ZSTD_compressBlock_opt_generic(ms, seqStore, rep, cParams, src, srcSize, 2 /*optLevel*/, 0 /*extDict*/)",
          "old_line_content": "",
          "new_line_content": "    return ZSTD_compressBlock_opt_generic(ms, seqStore, rep, cParams, src, srcSize, 2 /*optLevel*/, 0 /*extDict*/);",
          "content_same": false
        },
        {
          "line": 1078,
          "old_api": null,
          "new_api": "ZSTD_compressBlock_opt_generic",
          "old_text": null,
          "new_text": "ZSTD_compressBlock_opt_generic(ms, seqStore, rep, cParams, src, srcSize, 0 /*optLevel*/, 1 /*extDict*/)",
          "old_line_content": "",
          "new_line_content": "    return ZSTD_compressBlock_opt_generic(ms, seqStore, rep, cParams, src, srcSize, 0 /*optLevel*/, 1 /*extDict*/);",
          "content_same": false
        },
        {
          "line": 572,
          "old_api": null,
          "new_api": "ZSTD_insertAndFindFirstIndexHash3",
          "old_text": null,
          "new_text": "ZSTD_insertAndFindFirstIndexHash3(ms, ip)",
          "old_line_content": "          & (current - matchIndex3 < (1<<18)) /*heuristic : longer distance likely too expensive*/ ) {",
          "new_line_content": "        U32 const matchIndex3 = ZSTD_insertAndFindFirstIndexHash3(ms, ip);",
          "content_same": false
        },
        {
          "line": 1085,
          "old_api": null,
          "new_api": "ZSTD_compressBlock_opt_generic",
          "old_text": null,
          "new_text": "ZSTD_compressBlock_opt_generic(ms, seqStore, rep, cParams, src, srcSize, 2 /*optLevel*/, 1 /*extDict*/)",
          "old_line_content": "",
          "new_line_content": "    return ZSTD_compressBlock_opt_generic(ms, seqStore, rep, cParams, src, srcSize, 2 /*optLevel*/, 1 /*extDict*/);",
          "content_same": false
        },
        {
          "line": 578,
          "old_api": null,
          "new_api": "ZSTD_count",
          "old_text": null,
          "new_text": "ZSTD_count(ip, match, iLimit)",
          "old_line_content": "                const BYTE* const match = dictBase + matchIndex3;",
          "new_line_content": "                mlen = ZSTD_count(ip, match, iLimit);",
          "content_same": false
        },
        {
          "line": 581,
          "old_api": null,
          "new_api": "ZSTD_count_2segments",
          "old_text": null,
          "new_text": "ZSTD_count_2segments(ip, match, iLimit, dictEnd, prefixStart)",
          "old_line_content": "",
          "new_line_content": "                mlen = ZSTD_count_2segments(ip, match, iLimit, dictEnd, prefixStart);",
          "content_same": false
        },
        {
          "line": 586,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(8, \"found small match with hlog3, of length %u\",\n                            (U32)mlen)",
          "old_line_content": "                bestLength = mlen;",
          "new_line_content": "                DEBUGLOG(8, \"found small match with hlog3, of length %u\",",
          "content_same": false
        },
        {
          "line": 589,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(current > matchIndex3)",
          "old_line_content": "                matches[0].off = (current - matchIndex3) + ZSTD_REP_MOVE;",
          "new_line_content": "                assert(current > matchIndex3);",
          "content_same": false
        },
        {
          "line": 590,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(mnum==0)",
          "old_line_content": "                matches[0].len = (U32)mlen;",
          "new_line_content": "                assert(mnum==0);  /* no prior solution */",
          "content_same": false
        },
        {
          "line": 606,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(current > matchIndex)",
          "old_line_content": "        if ((!extDict) || (matchIndex+matchLength >= dictLimit)) {",
          "new_line_content": "        assert(current > matchIndex);",
          "content_same": false
        },
        {
          "line": 611,
          "old_api": null,
          "new_api": "ZSTD_count",
          "old_text": null,
          "new_text": "ZSTD_count(ip+matchLength, match+matchLength, iLimit)",
          "old_line_content": "            match = dictBase + matchIndex;",
          "new_line_content": "            matchLength += ZSTD_count(ip+matchLength, match+matchLength, iLimit);",
          "content_same": false
        },
        {
          "line": 614,
          "old_api": null,
          "new_api": "ZSTD_count_2segments",
          "old_text": null,
          "new_text": "ZSTD_count_2segments(ip+matchLength, match+matchLength, iLimit, dictEnd, prefixStart)",
          "old_line_content": "                match = base + matchIndex;   /* prepare for match[matchLength] */",
          "new_line_content": "            matchLength += ZSTD_count_2segments(ip+matchLength, match+matchLength, iLimit, dictEnd, prefixStart);",
          "content_same": false
        },
        {
          "line": 622,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(matchEndIdx > matchIndex)",
          "old_line_content": "                matchEndIdx = matchIndex + (U32)matchLength;",
          "new_line_content": "            assert(matchEndIdx > matchIndex);",
          "content_same": false
        },
        {
          "line": 652,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(matchEndIdx > current+8)",
          "old_line_content": "    return mnum;",
          "new_line_content": "    assert(matchEndIdx > current+8);",
          "content_same": false
        },
        {
          "line": 667,
          "old_api": null,
          "new_api": "ZSTD_updateTree_internal",
          "old_text": null,
          "new_text": "ZSTD_updateTree_internal(ms, cParams, ip, iHighLimit, matchLengthSearch, extDict)",
          "old_line_content": "    {",
          "new_line_content": "    ZSTD_updateTree_internal(ms, cParams, ip, iHighLimit, matchLengthSearch, extDict);",
          "content_same": false
        },
        {
          "line": 672,
          "old_api": null,
          "new_api": "ZSTD_insertBtAndGetAllMatches",
          "old_text": null,
          "new_text": "ZSTD_insertBtAndGetAllMatches(ms, cParams, ip, iHighLimit, extDict, rep, ll0, matches, lengthToBeat, 4)",
          "old_line_content": "    case 7 :",
          "new_line_content": "    case 4 : return ZSTD_insertBtAndGetAllMatches(ms, cParams, ip, iHighLimit, extDict, rep, ll0, matches, lengthToBeat, 4);",
          "content_same": false
        },
        {
          "line": 675,
          "old_api": null,
          "new_api": "ZSTD_insertBtAndGetAllMatches",
          "old_text": null,
          "new_text": "ZSTD_insertBtAndGetAllMatches(ms, cParams, ip, iHighLimit, extDict, rep, ll0, matches, lengthToBeat, 6)",
          "old_line_content": "}",
          "new_line_content": "    case 6 : return ZSTD_insertBtAndGetAllMatches(ms, cParams, ip, iHighLimit, extDict, rep, ll0, matches, lengthToBeat, 6);",
          "content_same": false
        },
        {
          "line": 702,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(&newReps, rep, sizeof(newReps))",
          "old_line_content": "    }",
          "new_line_content": "            memcpy(&newReps, rep, sizeof(newReps));",
          "content_same": false
        },
        {
          "line": 728,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(litlen >= cachedLitPrice->litlen)",
          "old_line_content": "    } else {",
          "new_line_content": "        assert(litlen >= cachedLitPrice->litlen);",
          "content_same": false
        },
        {
          "line": 736,
          "old_api": null,
          "new_api": "ZSTD_rawLiteralsCost",
          "old_text": null,
          "new_text": "ZSTD_rawLiteralsCost(startPosition, remainingLength, optStatePtr, optLevel)",
          "old_line_content": "        cachedLitPrice->litlen = litlen;",
          "new_line_content": "    {   U32 const rawLitCost = startCost + ZSTD_rawLiteralsCost(startPosition, remainingLength, optStatePtr, optLevel);",
          "content_same": false
        },
        {
          "line": 750,
          "old_api": null,
          "new_api": "ZSTD_rawLiteralsCost_cached",
          "old_text": null,
          "new_text": "ZSTD_rawLiteralsCost_cached(cachedLitPrice, anchor, litlen, optStatePtr, optLevel)",
          "old_line_content": "}",
          "new_line_content": "    return ZSTD_rawLiteralsCost_cached(cachedLitPrice, anchor, litlen, optStatePtr, optLevel)",
          "content_same": false
        },
        {
          "line": 751,
          "old_api": null,
          "new_api": "ZSTD_litLengthPrice",
          "old_text": null,
          "new_text": "ZSTD_litLengthPrice(litlen, optStatePtr, optLevel)",
          "old_line_content": "",
          "new_line_content": "         + ZSTD_litLengthPrice(litlen, optStatePtr, optLevel);",
          "content_same": false
        },
        {
          "line": 760,
          "old_api": null,
          "new_api": "ZSTD_rawLiteralsCost_cached",
          "old_text": null,
          "new_text": "ZSTD_rawLiteralsCost_cached(cachedLitPrice, anchor, litlen, optStatePtr, optLevel)",
          "old_line_content": "    return contribution;",
          "new_line_content": "    int const contribution = ZSTD_rawLiteralsCost_cached(cachedLitPrice, anchor, litlen, optStatePtr, optLevel)",
          "content_same": false
        },
        {
          "line": 761,
          "old_api": null,
          "new_api": "ZSTD_litLengthContribution",
          "old_text": null,
          "new_text": "ZSTD_litLengthContribution(litlen, optStatePtr, optLevel)",
          "old_line_content": "}",
          "new_line_content": "                           + ZSTD_litLengthContribution(litlen, optStatePtr, optLevel);",
          "content_same": false
        },
        {
          "line": 782,
          "old_api": null,
          "new_api": "MIN",
          "old_text": null,
          "new_text": "MIN(cParams->targetLength, ZSTD_OPT_NUM -1)",
          "old_line_content": "",
          "new_line_content": "    U32 const sufficient_len = MIN(cParams->targetLength, ZSTD_OPT_NUM -1);",
          "content_same": false
        },
        {
          "line": 790,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(5, \"ZSTD_compressBlock_opt_generic\")",
          "old_line_content": "    ms->nextToUpdate3 = ms->nextToUpdate;",
          "new_line_content": "    DEBUGLOG(5, \"ZSTD_compressBlock_opt_generic\");",
          "content_same": false
        },
        {
          "line": 795,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&cachedLitPrice, 0, sizeof(cachedLitPrice))",
          "old_line_content": "    /* Match Loop */",
          "new_line_content": "    memset(&cachedLitPrice, 0, sizeof(cachedLitPrice));",
          "content_same": false
        },
        {
          "line": 287,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(8, \"ZSTD_getMatchPrice(ml:%u) = %u\", matchLength, price)",
          "old_line_content": "}",
          "new_line_content": "    DEBUGLOG(8, \"ZSTD_getMatchPrice(ml:%u) = %u\", matchLength, price);",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": null,
          "new_api": "ZSTD_BtGetAllMatches",
          "old_text": null,
          "new_text": "ZSTD_BtGetAllMatches(ms, cParams, ip, iend, extDict, rep, ll0, matches, minMatch)",
          "old_line_content": "",
          "new_line_content": "            U32 const nbMatches = ZSTD_BtGetAllMatches(ms, cParams, ip, iend, extDict, rep, ll0, matches, minMatch);",
          "content_same": false
        },
        {
          "line": 303,
          "old_api": null,
          "new_api": "ZSTD_LLcode",
          "old_text": null,
          "new_text": "ZSTD_LLcode(litLength)",
          "old_line_content": "        optPtr->litLengthSum++;",
          "new_line_content": "    {   U32 const llCode = ZSTD_LLcode(litLength);",
          "content_same": false
        },
        {
          "line": 816,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(7, \"found %u matches of maxLength=%u and maxOffset=%u at cPos=%u => start new serie\",\n                            nbMatches, maxML, maxOffset, (U32)(ip-prefixStart))",
          "old_line_content": "",
          "new_line_content": "                DEBUGLOG(7, \"found %u matches of maxLength=%u and maxOffset=%u at cPos=%u => start new serie\",",
          "content_same": false
        },
        {
          "line": 817,
          "old_api": null,
          "new_api": "U32)(ip-prefixStart)",
          "old_text": null,
          "new_text": "U32)(ip-prefixStart)",
          "old_line_content": "                if (maxML > sufficient_len) {",
          "new_line_content": "                            nbMatches, maxML, maxOffset, (U32)(ip-prefixStart));",
          "content_same": false
        },
        {
          "line": 309,
          "old_api": null,
          "new_api": "ZSTD_highbit32",
          "old_text": null,
          "new_text": "ZSTD_highbit32(offsetCode+1)",
          "old_line_content": "        optPtr->offCodeFreq[offCode]++;",
          "new_line_content": "    {   U32 const offCode = ZSTD_highbit32(offsetCode+1);",
          "content_same": false
        },
        {
          "line": 310,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(offCode <= MaxOff)",
          "old_line_content": "        optPtr->offCodeSum++;",
          "new_line_content": "        assert(offCode <= MaxOff);",
          "content_same": false
        },
        {
          "line": 822,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(7, \"large match (%u>%u), immediate encoding\",\n                                best_mlen, sufficient_len)",
          "old_line_content": "                    cur = 0;",
          "new_line_content": "                    DEBUGLOG(7, \"large match (%u>%u), immediate encoding\",",
          "content_same": false
        },
        {
          "line": 317,
          "old_api": null,
          "new_api": "ZSTD_MLcode",
          "old_text": null,
          "new_text": "ZSTD_MLcode(mlBase)",
          "old_line_content": "        optPtr->matchLengthSum++;",
          "new_line_content": "        U32 const mlCode = ZSTD_MLcode(mlBase);",
          "content_same": false
        },
        {
          "line": 830,
          "old_api": null,
          "new_api": "ZSTD_fullLiteralsCost_cached",
          "old_text": null,
          "new_text": "ZSTD_fullLiteralsCost_cached(&cachedLitPrice, anchor, litlen, optStatePtr, optLevel)",
          "old_line_content": "                U32 matchNb;",
          "new_line_content": "            {   U32 const literalsPrice = ZSTD_fullLiteralsCost_cached(&cachedLitPrice, anchor, litlen, optStatePtr, optLevel);",
          "content_same": false
        },
        {
          "line": 843,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(7, \"rPos:%u => set initial price : %.2f\",\n                                    pos, ZSTD_fCost(sequencePrice))",
          "old_line_content": "                        opt[pos].mlen = pos;",
          "new_line_content": "                        DEBUGLOG(7, \"rPos:%u => set initial price : %.2f\",",
          "content_same": false
        },
        {
          "line": 844,
          "old_api": null,
          "new_api": "ZSTD_fCost",
          "old_text": null,
          "new_text": "ZSTD_fCost(sequencePrice)",
          "old_line_content": "                        opt[pos].off = offset;",
          "new_line_content": "                                    pos, ZSTD_fCost(sequencePrice));",
          "content_same": false
        },
        {
          "line": 333,
          "old_api": null,
          "new_api": "MEM_isLittleEndian",
          "old_text": null,
          "new_text": "MEM_isLittleEndian()",
          "old_line_content": "             else",
          "new_line_content": "    case 3 : if (MEM_isLittleEndian())",
          "content_same": false
        },
        {
          "line": 336,
          "old_api": null,
          "new_api": "MEM_read32",
          "old_text": null,
          "new_text": "MEM_read32(memPtr)",
          "old_line_content": "}",
          "new_line_content": "                return MEM_read32(memPtr)>>8;",
          "content_same": false
        },
        {
          "line": 849,
          "old_api": null,
          "new_api": "ZSTD_STATIC_ASSERT",
          "old_text": null,
          "new_text": "ZSTD_STATIC_ASSERT(sizeof(opt[pos].rep) == sizeof(repHistory))",
          "old_line_content": "                }   }",
          "new_line_content": "                        ZSTD_STATIC_ASSERT(sizeof(opt[pos].rep) == sizeof(repHistory));",
          "content_same": false
        },
        {
          "line": 850,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(opt[pos].rep, &repHistory, sizeof(repHistory))",
          "old_line_content": "                last_pos = pos-1;",
          "new_line_content": "                        memcpy(opt[pos].rep, &repHistory, sizeof(repHistory));",
          "content_same": false
        },
        {
          "line": 859,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(cur < ZSTD_OPT_NUM)",
          "old_line_content": "            /* Fix current position with one literal if cheaper */",
          "new_line_content": "            assert(cur < ZSTD_OPT_NUM);",
          "content_same": false
        },
        {
          "line": 350,
          "old_api": null,
          "new_api": "ZSTD_hash3Ptr",
          "old_text": null,
          "new_text": "ZSTD_hash3Ptr(ip, hashLog3)",
          "old_line_content": "",
          "new_line_content": "    size_t const hash3 = ZSTD_hash3Ptr(ip, hashLog3);",
          "content_same": false
        },
        {
          "line": 351,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(hashLog3 > 0)",
          "old_line_content": "    while(idx < target) {",
          "new_line_content": "    assert(hashLog3 > 0);",
          "content_same": false
        },
        {
          "line": 354,
          "old_api": null,
          "new_api": "ZSTD_hash3Ptr",
          "old_text": null,
          "new_text": "ZSTD_hash3Ptr(base+idx, hashLog3)",
          "old_line_content": "    }",
          "new_line_content": "        hashTable3[ZSTD_hash3Ptr(base+idx, hashLog3)] = idx;",
          "content_same": false
        },
        {
          "line": 871,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(7, \"rPos:%u : better price (%.2f<=%.2f) using literal\",\n                                cur, ZSTD_fCost(price), ZSTD_fCost(opt[cur].price))",
          "old_line_content": "                    opt[cur].mlen = 1;",
          "new_line_content": "                    DEBUGLOG(7, \"rPos:%u : better price (%.2f<=%.2f) using literal\",",
          "content_same": false
        },
        {
          "line": 872,
          "old_api": null,
          "new_api": "ZSTD_fCost",
          "old_text": null,
          "new_text": "ZSTD_fCost(opt[cur].price)",
          "old_line_content": "                    opt[cur].off = 0;",
          "new_line_content": "                                cur, ZSTD_fCost(price), ZSTD_fCost(opt[cur].price));",
          "content_same": false
        },
        {
          "line": 879,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(7, \"rPos:%u : literal would cost more (%.2f>%.2f)\",\n                                cur, ZSTD_fCost(price), ZSTD_fCost(opt[cur].price))",
          "old_line_content": "                }",
          "new_line_content": "                    DEBUGLOG(7, \"rPos:%u : literal would cost more (%.2f>%.2f)\",",
          "content_same": false
        },
        {
          "line": 880,
          "old_api": null,
          "new_api": "ZSTD_fCost",
          "old_text": null,
          "new_text": "ZSTD_fCost(opt[cur].price)",
          "old_line_content": "            }",
          "new_line_content": "                                cur, ZSTD_fCost(price), ZSTD_fCost(opt[cur].price));",
          "content_same": false
        },
        {
          "line": 375,
          "old_api": null,
          "new_api": "ZSTD_hashPtr",
          "old_text": null,
          "new_text": "ZSTD_hashPtr(ip, hashLog, mls)",
          "old_line_content": "    U32    const btLog  = cParams->chainLog - 1;",
          "new_line_content": "    size_t const h  = ZSTD_hashPtr(ip, hashLog, mls);",
          "content_same": false
        },
        {
          "line": 891,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(7, \"move to next rPos:%u : price is <=\", cur+1)",
          "old_line_content": "            }",
          "new_line_content": "                DEBUGLOG(7, \"move to next rPos:%u : price is <=\", cur+1);",
          "content_same": false
        },
        {
          "line": 898,
          "old_api": null,
          "new_api": "ZSTD_fullLiteralsCost",
          "old_text": null,
          "new_text": "ZSTD_fullLiteralsCost(inr-litlen, litlen, optStatePtr, optLevel)",
          "old_line_content": "                U32 matchNb;",
          "new_line_content": "                U32 const basePrice = previousPrice + ZSTD_fullLiteralsCost(inr-litlen, litlen, optStatePtr, optLevel);",
          "content_same": false
        },
        {
          "line": 387,
          "old_api": null,
          "new_api": "U32)(ip-base)",
          "old_text": null,
          "new_text": "U32)(ip-base)",
          "old_line_content": "    U32* smallerPtr = bt + 2*(current&btMask);",
          "new_line_content": "    const U32 current = (U32)(ip-base);",
          "content_same": false
        },
        {
          "line": 899,
          "old_api": null,
          "new_api": "ZSTD_BtGetAllMatches",
          "old_text": null,
          "new_text": "ZSTD_BtGetAllMatches(ms, cParams, inr, iend, extDict, opt[cur].rep, ll0, matches, minMatch)",
          "old_line_content": "                if (!nbMatches) {",
          "new_line_content": "                U32 const nbMatches = ZSTD_BtGetAllMatches(ms, cParams, inr, iend, extDict, opt[cur].rep, ll0, matches, minMatch);",
          "content_same": false
        },
        {
          "line": 902,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(7, \"rPos:%u : no match found\", cur)",
          "old_line_content": "                }",
          "new_line_content": "                    DEBUGLOG(7, \"rPos:%u : no match found\", cur);",
          "content_same": false
        },
        {
          "line": 907,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(7, \"rPos:%u, found %u matches, of maxLength=%u\",\n                                cur, nbMatches, maxML)",
          "old_line_content": "",
          "new_line_content": "                    DEBUGLOG(7, \"rPos:%u, found %u matches, of maxLength=%u\",",
          "content_same": false
        },
        {
          "line": 405,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(ip <= iend-8)",
          "old_line_content": "",
          "new_line_content": "    assert(ip <= iend-8);   /* required for h calculation */",
          "content_same": false
        },
        {
          "line": 921,
          "old_api": null,
          "new_api": "ZSTD_updateRep",
          "old_text": null,
          "new_text": "ZSTD_updateRep(opt[cur].rep, offset, ll0)",
          "old_line_content": "                    U32 const startML = (matchNb>0) ? matches[matchNb-1].len+1 : minMatch;",
          "new_line_content": "                    repcodes_t const repHistory = ZSTD_updateRep(opt[cur].rep, offset, ll0);",
          "content_same": false
        },
        {
          "line": 410,
          "old_api": null,
          "new_api": "MIN",
          "old_text": null,
          "new_text": "MIN(commonLengthSmaller, commonLengthLarger)",
          "old_line_content": "",
          "new_line_content": "        size_t matchLength = MIN(commonLengthSmaller, commonLengthLarger);   /* guaranteed minimum nb of common bytes */",
          "content_same": false
        },
        {
          "line": 411,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(matchIndex < current)",
          "old_line_content": "#ifdef ZSTD_C_PREDICT   /* note : can create issues when hlog small <= 11 */",
          "new_line_content": "        assert(matchIndex < current);",
          "content_same": false
        },
        {
          "line": 926,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(7, \"testing match %u => offCode=%u, mlen=%u, llen=%u\",\n                                matchNb, matches[matchNb].off, lastML, litlen)",
          "old_line_content": "",
          "new_line_content": "                    DEBUGLOG(7, \"testing match %u => offCode=%u, mlen=%u, llen=%u\",",
          "content_same": false
        },
        {
          "line": 931,
          "old_api": null,
          "new_api": "ZSTD_getMatchPrice",
          "old_text": null,
          "new_text": "ZSTD_getMatchPrice(offset, mlen, optStatePtr, optLevel)",
          "old_line_content": "                        if ((pos > last_pos) || (price < opt[pos].price)) {",
          "new_line_content": "                        int const price = basePrice + ZSTD_getMatchPrice(offset, mlen, optStatePtr, optLevel);",
          "content_same": false
        },
        {
          "line": 934,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(7, \"rPos:%u => new better price (%.2f<%.2f)\",\n                                        pos, ZSTD_fCost(price), ZSTD_fCost(opt[pos].price))",
          "old_line_content": "                            while (last_pos < pos) { opt[last_pos+1].price = ZSTD_MAX_PRICE; last_pos++; }   /* fill empty positions */",
          "new_line_content": "                            DEBUGLOG(7, \"rPos:%u => new better price (%.2f<%.2f)\",",
          "content_same": false
        },
        {
          "line": 935,
          "old_api": null,
          "new_api": "ZSTD_fCost",
          "old_text": null,
          "new_text": "ZSTD_fCost(opt[pos].price)",
          "old_line_content": "                            opt[pos].mlen = mlen;",
          "new_line_content": "                                        pos, ZSTD_fCost(price), ZSTD_fCost(opt[pos].price));",
          "content_same": false
        },
        {
          "line": 941,
          "old_api": null,
          "new_api": "ZSTD_STATIC_ASSERT",
          "old_text": null,
          "new_text": "ZSTD_STATIC_ASSERT(sizeof(opt[pos].rep) == sizeof(repHistory))",
          "old_line_content": "                        } else {",
          "new_line_content": "                            ZSTD_STATIC_ASSERT(sizeof(opt[pos].rep) == sizeof(repHistory));",
          "content_same": false
        },
        {
          "line": 942,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(opt[pos].rep, &repHistory, sizeof(repHistory))",
          "old_line_content": "                            if (optLevel==0) break;  /* early update abort; gets ~+10% speed for about -0.01 ratio loss */",
          "new_line_content": "                            memcpy(opt[pos].rep, &repHistory, sizeof(repHistory));",
          "content_same": false
        },
        {
          "line": 437,
          "old_api": null,
          "new_api": "ZSTD_count",
          "old_text": null,
          "new_text": "ZSTD_count(ip+matchLength, match+matchLength, iend)",
          "old_line_content": "            match = dictBase + matchIndex;",
          "new_line_content": "            matchLength += ZSTD_count(ip+matchLength, match+matchLength, iend);",
          "content_same": false
        },
        {
          "line": 440,
          "old_api": null,
          "new_api": "ZSTD_count_2segments",
          "old_text": null,
          "new_text": "ZSTD_count_2segments(ip+matchLength, match+matchLength, iend, dictEnd, prefixStart)",
          "old_line_content": "                match = base + matchIndex;   /* to prepare for next usage of match[matchLength] */",
          "new_line_content": "            matchLength += ZSTD_count_2segments(ip+matchLength, match+matchLength, iend, dictEnd, prefixStart);",
          "content_same": false
        },
        {
          "line": 954,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(opt[0].mlen == 1)",
          "old_line_content": "        /* reverse traversal */",
          "new_line_content": "        assert(opt[0].mlen == 1);",
          "content_same": false
        },
        {
          "line": 957,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(7, \"start reverse traversal (last_pos:%u, cur:%u)\",\n                    last_pos, cur)",
          "old_line_content": "        {   U32 selectedMatchLength = best_mlen;",
          "new_line_content": "        DEBUGLOG(7, \"start reverse traversal (last_pos:%u, cur:%u)\",",
          "content_same": false
        },
        {
          "line": 976,
          "old_api": null,
          "new_api": "U32)(ip - anchor)",
          "old_text": null,
          "new_text": "U32)(ip - anchor)",
          "old_line_content": "                U32 const offset = opt[pos].off;",
          "new_line_content": "                U32 const llen = (U32)(ip - anchor);",
          "content_same": false
        },
        {
          "line": 472,
          "old_api": null,
          "new_api": "U32)(bestLength - 384)",
          "old_text": null,
          "new_text": "U32)(bestLength - 384)",
          "old_line_content": "    return matchEndIdx - (current + 8);",
          "new_line_content": "    if (bestLength > 384) return MIN(192, (U32)(bestLength - 384));   /* speed optimization */",
          "content_same": false
        },
        {
          "line": 473,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(matchEndIdx > current + 8)",
          "old_line_content": "}",
          "new_line_content": "    assert(matchEndIdx > current + 8);",
          "content_same": false
        },
        {
          "line": 996,
          "old_api": null,
          "new_api": "ZSTD_updateStats",
          "old_text": null,
          "new_text": "ZSTD_updateStats(optStatePtr, llen, anchor, offset, mlen)",
          "old_line_content": "                anchor = ip;",
          "new_line_content": "                ZSTD_updateStats(optStatePtr, llen, anchor, offset, mlen);",
          "content_same": false
        },
        {
          "line": 997,
          "old_api": null,
          "new_api": "ZSTD_storeSeq",
          "old_text": null,
          "new_text": "ZSTD_storeSeq(seqStore, llen, anchor, offset, mlen-MINMATCH)",
          "old_line_content": "        }   }",
          "new_line_content": "                ZSTD_storeSeq(seqStore, llen, anchor, offset, mlen-MINMATCH);",
          "content_same": false
        },
        {
          "line": 486,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(5, \"ZSTD_updateTree_internal, from %u to %u  (extDict:%u)\",\n                idx, target, extDict)",
          "old_line_content": "",
          "new_line_content": "    DEBUGLOG(5, \"ZSTD_updateTree_internal, from %u to %u  (extDict:%u)\",",
          "content_same": false
        },
        {
          "line": 1000,
          "old_api": null,
          "new_api": "ZSTD_setBasePrices",
          "old_text": null,
          "new_text": "ZSTD_setBasePrices(optStatePtr, optLevel)",
          "old_line_content": "",
          "new_line_content": "        ZSTD_setBasePrices(optStatePtr, optLevel);",
          "content_same": false
        },
        {
          "line": 490,
          "old_api": null,
          "new_api": "ZSTD_insertBt1",
          "old_text": null,
          "new_text": "ZSTD_insertBt1(ms, cParams, base+idx, iend, mls, extDict)",
          "old_line_content": "}",
          "new_line_content": "        idx += ZSTD_insertBt1(ms, cParams, base+idx, iend, mls, extDict);",
          "content_same": false
        },
        {
          "line": 498,
          "old_api": null,
          "new_api": "ZSTD_updateTree_internal",
          "old_text": null,
          "new_text": "ZSTD_updateTree_internal(ms, cParams, ip, iend, cParams->searchLength, 0 /*extDict*/)",
          "old_line_content": "",
          "new_line_content": "    ZSTD_updateTree_internal(ms, cParams, ip, iend, cParams->searchLength, 0 /*extDict*/);",
          "content_same": false
        },
        {
          "line": 1012,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(5, \"ZSTD_compressBlock_btopt\")",
          "old_line_content": "}",
          "new_line_content": "    DEBUGLOG(5, \"ZSTD_compressBlock_btopt\");",
          "content_same": false
        },
        {
          "line": 1013,
          "old_api": null,
          "new_api": "ZSTD_compressBlock_opt_generic",
          "old_text": null,
          "new_text": "ZSTD_compressBlock_opt_generic(ms, seqStore, rep, cParams, src, srcSize, 0 /*optLevel*/, 0 /*extDict*/)",
          "old_line_content": "",
          "new_line_content": "    return ZSTD_compressBlock_opt_generic(ms, seqStore, rep, cParams, src, srcSize, 0 /*optLevel*/, 0 /*extDict*/);",
          "content_same": false
        },
        {
          "line": 1021,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(ZSTD_FREQ_DIV+bonus > 0)",
          "old_line_content": "        table[s] <<= ZSTD_FREQ_DIV+bonus;",
          "new_line_content": "    assert(ZSTD_FREQ_DIV+bonus > 0);",
          "content_same": false
        },
        {
          "line": 510,
          "old_api": null,
          "new_api": "U32)(ip-base)",
          "old_text": null,
          "new_text": "U32)(ip-base)",
          "old_line_content": "    U32 const minMatch = (mls==3) ? 3 : 4;",
          "new_line_content": "    U32 const current = (U32)(ip-base);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 512,
          "old_api": "ZSTD_hashPtr",
          "new_api": null,
          "old_text": "ZSTD_hashPtr(ip, hashLog, mls)",
          "new_text": null,
          "old_line_content": "    size_t const h  = ZSTD_hashPtr(ip, hashLog, mls);",
          "new_line_content": "    U32 const minMatch = (mls==3) ? 3 : 4;",
          "content_same": false
        },
        {
          "line": 1031,
          "old_api": "ZSTD_upscaleStat",
          "new_api": null,
          "old_text": "ZSTD_upscaleStat(optPtr->litFreq, MaxLit, 0)",
          "new_text": null,
          "old_line_content": "    optPtr->litSum = ZSTD_upscaleStat(optPtr->litFreq, MaxLit, 0);",
          "new_line_content": "MEM_STATIC void ZSTD_upscaleStats(optState_t* optPtr)",
          "content_same": false
        },
        {
          "line": 1032,
          "old_api": "ZSTD_upscaleStat",
          "new_api": null,
          "old_text": "ZSTD_upscaleStat(optPtr->litLengthFreq, MaxLL, 1)",
          "new_text": null,
          "old_line_content": "    optPtr->litLengthSum = ZSTD_upscaleStat(optPtr->litLengthFreq, MaxLL, 1);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1041,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(5, \"ZSTD_compressBlock_btultra (srcSize=%zu)\", srcSize)",
          "new_text": null,
          "old_line_content": "    DEBUGLOG(5, \"ZSTD_compressBlock_btultra (srcSize=%zu)\", srcSize);",
          "new_line_content": "        const ZSTD_compressionParameters* cParams, const void* src, size_t srcSize)",
          "content_same": false
        },
        {
          "line": 532,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(8, \"ZSTD_insertBtAndGetAllMatches: current=%u\", current)",
          "new_text": null,
          "old_line_content": "    DEBUGLOG(8, \"ZSTD_insertBtAndGetAllMatches: current=%u\", current);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1048,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(srcSize <= ZSTD_BLOCKSIZE_MAX)",
          "new_text": null,
          "old_line_content": "    assert(srcSize <= ZSTD_BLOCKSIZE_MAX);",
          "new_line_content": "     * The compression ratio gain is generally small (~0.5% on first block),",
          "content_same": false
        },
        {
          "line": 1053,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(5, \"ZSTD_compressBlock_btultra: first block: collecting statistics\")",
          "new_text": null,
          "old_line_content": "        DEBUGLOG(5, \"ZSTD_compressBlock_btultra: first block: collecting statistics\");",
          "new_line_content": "      && (ms->window.dictLimit == ms->window.lowLimit) ) {   /* no dictionary */",
          "content_same": false
        },
        {
          "line": 541,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(current >= dictLimit)",
          "new_text": null,
          "old_line_content": "            assert(current >= dictLimit);",
          "new_line_content": "            U32 const repIndex = current - repOffset;",
          "content_same": false
        },
        {
          "line": 1054,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(ms->nextToUpdate >= ms->window.dictLimit\n            && ms->nextToUpdate <= ms->window.dictLimit + 1)",
          "new_text": null,
          "old_line_content": "        assert(ms->nextToUpdate >= ms->window.dictLimit",
          "new_line_content": "        U32 tmpRep[ZSTD_REP_NUM];",
          "content_same": false
        },
        {
          "line": 544,
          "old_api": "ZSTD_count",
          "new_api": null,
          "old_text": "ZSTD_count(ip+minMatch, ip+minMatch-repOffset, iLimit)",
          "new_text": null,
          "old_line_content": "                    repLen = (U32)ZSTD_count(ip+minMatch, ip+minMatch-repOffset, iLimit) + minMatch;",
          "new_line_content": "            if (repOffset-1 /* intentional overflow, discards 0 and -1 */ < current-dictLimit) {  /* equivalent to `current > repIndex >= dictLimit` */",
          "content_same": false
        },
        {
          "line": 1057,
          "old_api": "ZSTD_compressBlock_opt_generic",
          "new_api": null,
          "old_text": "ZSTD_compressBlock_opt_generic(ms, seqStore, tmpRep, cParams, src, srcSize, 2 /*optLevel*/, 0 /*extDict*/)",
          "new_text": null,
          "old_line_content": "        ZSTD_compressBlock_opt_generic(ms, seqStore, tmpRep, cParams, src, srcSize, 2 /*optLevel*/, 0 /*extDict*/);   /* generate stats into ms->opt*/",
          "new_line_content": "            && ms->nextToUpdate <= ms->window.dictLimit + 1);",
          "content_same": false
        },
        {
          "line": 548,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(current >= windowLow)",
          "new_text": null,
          "old_line_content": "                assert(current >= windowLow);",
          "new_line_content": "            } else {  /* repIndex < dictLimit || repIndex >= current */",
          "content_same": false
        },
        {
          "line": 551,
          "old_api": "U32)((dictLimit-1) - repIndex)",
          "new_api": null,
          "old_text": "U32)((dictLimit-1) - repIndex)",
          "new_text": null,
          "old_line_content": "                     & (((U32)((dictLimit-1) - repIndex) >= 3) ) /* intentional overflow : do not test positions overlapping 2 memory segments */)",
          "new_line_content": "                if ( extDict /* this case only valid in extDict mode */",
          "content_same": false
        },
        {
          "line": 552,
          "old_api": "ZSTD_readMINMATCH",
          "new_api": null,
          "old_text": "ZSTD_readMINMATCH(repMatch, minMatch)",
          "new_text": null,
          "old_line_content": "                  && (ZSTD_readMINMATCH(ip, minMatch) == ZSTD_readMINMATCH(repMatch, minMatch)) ) {",
          "new_line_content": "                  && ( ((repOffset-1) /*intentional overflow*/ < current - windowLow)  /* equivalent to `current > repIndex >= windowLow` */",
          "content_same": false
        },
        {
          "line": 1066,
          "old_api": "ZSTD_upscaleStats",
          "new_api": null,
          "old_text": "ZSTD_upscaleStats(&ms->opt)",
          "new_text": null,
          "old_line_content": "        ZSTD_upscaleStats(&ms->opt);",
          "new_line_content": "        ms->nextToUpdate3 = ms->window.dictLimit;",
          "content_same": false
        },
        {
          "line": 557,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(8, \"found rep-match %u of length %u\",\n                            repCode - ll0, (U32)repLen)",
          "new_text": null,
          "old_line_content": "                DEBUGLOG(8, \"found rep-match %u of length %u\",",
          "new_line_content": "            /* save longer solution */",
          "content_same": false
        },
        {
          "line": 1069,
          "old_api": "ZSTD_compressBlock_opt_generic",
          "new_api": null,
          "old_text": "ZSTD_compressBlock_opt_generic(ms, seqStore, rep, cParams, src, srcSize, 2 /*optLevel*/, 0 /*extDict*/)",
          "new_text": null,
          "old_line_content": "    return ZSTD_compressBlock_opt_generic(ms, seqStore, rep, cParams, src, srcSize, 2 /*optLevel*/, 0 /*extDict*/);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1076,
          "old_api": "ZSTD_compressBlock_opt_generic",
          "new_api": null,
          "old_text": "ZSTD_compressBlock_opt_generic(ms, seqStore, rep, cParams, src, srcSize, 0 /*optLevel*/, 1 /*extDict*/)",
          "new_text": null,
          "old_line_content": "    return ZSTD_compressBlock_opt_generic(ms, seqStore, rep, cParams, src, srcSize, 0 /*optLevel*/, 1 /*extDict*/);",
          "new_line_content": "        const ZSTD_compressionParameters* cParams, const void* src, size_t srcSize)",
          "content_same": false
        },
        {
          "line": 570,
          "old_api": "ZSTD_insertAndFindFirstIndexHash3",
          "new_api": null,
          "old_text": "ZSTD_insertAndFindFirstIndexHash3(ms, ip)",
          "new_text": null,
          "old_line_content": "        U32 const matchIndex3 = ZSTD_insertAndFindFirstIndexHash3(ms, ip);",
          "new_line_content": "    /* HC3 match finder */",
          "content_same": false
        },
        {
          "line": 1083,
          "old_api": "ZSTD_compressBlock_opt_generic",
          "new_api": null,
          "old_text": "ZSTD_compressBlock_opt_generic(ms, seqStore, rep, cParams, src, srcSize, 2 /*optLevel*/, 1 /*extDict*/)",
          "new_text": null,
          "old_line_content": "    return ZSTD_compressBlock_opt_generic(ms, seqStore, rep, cParams, src, srcSize, 2 /*optLevel*/, 1 /*extDict*/);",
          "new_line_content": "        const ZSTD_compressionParameters* cParams, const void* src, size_t srcSize)",
          "content_same": false
        },
        {
          "line": 576,
          "old_api": "ZSTD_count",
          "new_api": null,
          "old_text": "ZSTD_count(ip, match, iLimit)",
          "new_text": null,
          "old_line_content": "                mlen = ZSTD_count(ip, match, iLimit);",
          "new_line_content": "            if ((!extDict) /*static*/ || (matchIndex3 >= dictLimit)) {",
          "content_same": false
        },
        {
          "line": 579,
          "old_api": "ZSTD_count_2segments",
          "new_api": null,
          "old_text": "ZSTD_count_2segments(ip, match, iLimit, dictEnd, prefixStart)",
          "new_text": null,
          "old_line_content": "                mlen = ZSTD_count_2segments(ip, match, iLimit, dictEnd, prefixStart);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 584,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(8, \"found small match with hlog3, of length %u\",\n                            (U32)mlen)",
          "new_text": null,
          "old_line_content": "                DEBUGLOG(8, \"found small match with hlog3, of length %u\",",
          "new_line_content": "            /* save best solution */",
          "content_same": false
        },
        {
          "line": 587,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(current > matchIndex3)",
          "new_text": null,
          "old_line_content": "                assert(current > matchIndex3);",
          "new_line_content": "                            (U32)mlen);",
          "content_same": false
        },
        {
          "line": 588,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(mnum==0)",
          "new_text": null,
          "old_line_content": "                assert(mnum==0);  /* no prior solution */",
          "new_line_content": "                bestLength = mlen;",
          "content_same": false
        },
        {
          "line": 602,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(commonLengthSmaller, commonLengthLarger)",
          "new_text": null,
          "old_line_content": "        size_t matchLength = MIN(commonLengthSmaller, commonLengthLarger);   /* guaranteed minimum nb of common bytes */",
          "new_line_content": "    while (nbCompares-- && (matchIndex > windowLow)) {",
          "content_same": false
        },
        {
          "line": 607,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(matchIndex+matchLength >= dictLimit)",
          "new_text": null,
          "old_line_content": "            assert(matchIndex+matchLength >= dictLimit);  /* ensure the condition is correct when !extDict */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 612,
          "old_api": "ZSTD_count_2segments",
          "new_api": null,
          "old_text": "ZSTD_count_2segments(ip+matchLength, match+matchLength, iLimit, dictEnd, prefixStart)",
          "new_text": null,
          "old_line_content": "            matchLength += ZSTD_count_2segments(ip+matchLength, match+matchLength, iLimit, dictEnd, prefixStart);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 618,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(8, \"found match of length %u at distance %u\",\n                    (U32)matchLength, current - matchIndex)",
          "new_text": null,
          "old_line_content": "            DEBUGLOG(8, \"found match of length %u at distance %u\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 650,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(matchEndIdx > current+8)",
          "new_text": null,
          "old_line_content": "    assert(matchEndIdx > current+8);",
          "new_line_content": "    *smallerPtr = *largerPtr = 0;",
          "content_same": false
        },
        {
          "line": 663,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(8, \"ZSTD_BtGetAllMatches\")",
          "new_text": null,
          "old_line_content": "    DEBUGLOG(8, \"ZSTD_BtGetAllMatches\");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 668,
          "old_api": "ZSTD_insertBtAndGetAllMatches",
          "new_api": null,
          "old_text": "ZSTD_insertBtAndGetAllMatches(ms, cParams, ip, iHighLimit, extDict, rep, ll0, matches, lengthToBeat, 3)",
          "new_text": null,
          "old_line_content": "    case 3 : return ZSTD_insertBtAndGetAllMatches(ms, cParams, ip, iHighLimit, extDict, rep, ll0, matches, lengthToBeat, 3);",
          "new_line_content": "    switch(matchLengthSearch)",
          "content_same": false
        },
        {
          "line": 671,
          "old_api": "ZSTD_insertBtAndGetAllMatches",
          "new_api": null,
          "old_text": "ZSTD_insertBtAndGetAllMatches(ms, cParams, ip, iHighLimit, extDict, rep, ll0, matches, lengthToBeat, 5)",
          "new_text": null,
          "old_line_content": "    case 5 : return ZSTD_insertBtAndGetAllMatches(ms, cParams, ip, iHighLimit, extDict, rep, ll0, matches, lengthToBeat, 5);",
          "new_line_content": "    default :",
          "content_same": false
        },
        {
          "line": 700,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(&newReps, rep, sizeof(newReps))",
          "new_text": null,
          "old_line_content": "            memcpy(&newReps, rep, sizeof(newReps));",
          "new_line_content": "            newReps.rep[0] = currentOffset;",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(litlen >= cachedLitPrice->litlen)",
          "new_text": null,
          "old_line_content": "        assert(litlen >= cachedLitPrice->litlen);",
          "new_line_content": "        startCost = cachedLitPrice->rawLitCost;",
          "content_same": false
        },
        {
          "line": 734,
          "old_api": "ZSTD_rawLiteralsCost",
          "new_api": null,
          "old_text": "ZSTD_rawLiteralsCost(startPosition, remainingLength, optStatePtr, optLevel)",
          "new_text": null,
          "old_line_content": "    {   U32 const rawLitCost = startCost + ZSTD_rawLiteralsCost(startPosition, remainingLength, optStatePtr, optLevel);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 748,
          "old_api": "ZSTD_rawLiteralsCost_cached",
          "new_api": null,
          "old_text": "ZSTD_rawLiteralsCost_cached(cachedLitPrice, anchor, litlen, optStatePtr, optLevel)",
          "new_text": null,
          "old_line_content": "    return ZSTD_rawLiteralsCost_cached(cachedLitPrice, anchor, litlen, optStatePtr, optLevel)",
          "new_line_content": "                            int optLevel)",
          "content_same": false
        },
        {
          "line": 749,
          "old_api": "ZSTD_litLengthPrice",
          "new_api": null,
          "old_text": "ZSTD_litLengthPrice(litlen, optStatePtr, optLevel)",
          "new_text": null,
          "old_line_content": "         + ZSTD_litLengthPrice(litlen, optStatePtr, optLevel);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 758,
          "old_api": "ZSTD_rawLiteralsCost_cached",
          "new_api": null,
          "old_text": "ZSTD_rawLiteralsCost_cached(cachedLitPrice, anchor, litlen, optStatePtr, optLevel)",
          "new_text": null,
          "old_line_content": "    int const contribution = ZSTD_rawLiteralsCost_cached(cachedLitPrice, anchor, litlen, optStatePtr, optLevel)",
          "new_line_content": "                            int optLevel)",
          "content_same": false
        },
        {
          "line": 759,
          "old_api": "ZSTD_litLengthContribution",
          "new_api": null,
          "old_text": "ZSTD_litLengthContribution(litlen, optStatePtr, optLevel)",
          "new_text": null,
          "old_line_content": "                           + ZSTD_litLengthContribution(litlen, optStatePtr, optLevel);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 780,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(cParams->targetLength, ZSTD_OPT_NUM -1)",
          "new_text": null,
          "old_line_content": "    U32 const sufficient_len = MIN(cParams->targetLength, ZSTD_OPT_NUM -1);",
          "new_line_content": "    const BYTE* const prefixStart = base + ms->window.dictLimit;",
          "content_same": false
        },
        {
          "line": 788,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(5, \"ZSTD_compressBlock_opt_generic\")",
          "new_text": null,
          "old_line_content": "    DEBUGLOG(5, \"ZSTD_compressBlock_opt_generic\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 789,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(optLevel <= 2)",
          "new_text": null,
          "old_line_content": "    assert(optLevel <= 2);",
          "new_line_content": "    /* init */",
          "content_same": false
        },
        {
          "line": 285,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(8, \"ZSTD_getMatchPrice(ml:%u) = %u\", matchLength, price)",
          "new_text": null,
          "old_line_content": "    DEBUGLOG(8, \"ZSTD_getMatchPrice(ml:%u) = %u\", matchLength, price);",
          "new_line_content": "    price += BITCOST_MULTIPLIER / 5;   /* heuristic : make matches a bit more costly to favor less sequences -> faster decompression speed */",
          "content_same": false
        },
        {
          "line": 801,
          "old_api": "U32)(ip - anchor)",
          "new_api": null,
          "old_text": "U32)(ip - anchor)",
          "new_text": null,
          "old_line_content": "        {   U32 const litlen = (U32)(ip - anchor);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 301,
          "old_api": "ZSTD_LLcode",
          "new_api": null,
          "old_text": "ZSTD_LLcode(litLength)",
          "new_text": null,
          "old_line_content": "    {   U32 const llCode = ZSTD_LLcode(litLength);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 814,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(7, \"found %u matches of maxLength=%u and maxOffset=%u at cPos=%u => start new serie\",\n                            nbMatches, maxML, maxOffset, (U32)(ip-prefixStart))",
          "new_text": null,
          "old_line_content": "                DEBUGLOG(7, \"found %u matches of maxLength=%u and maxOffset=%u at cPos=%u => start new serie\",",
          "new_line_content": "            {   U32 const maxML = matches[nbMatches-1].len;",
          "content_same": false
        },
        {
          "line": 815,
          "old_api": "U32)(ip-prefixStart)",
          "new_api": null,
          "old_text": "U32)(ip-prefixStart)",
          "new_text": null,
          "old_line_content": "                            nbMatches, maxML, maxOffset, (U32)(ip-prefixStart));",
          "new_line_content": "                U32 const maxOffset = matches[nbMatches-1].off;",
          "content_same": false
        },
        {
          "line": 307,
          "old_api": "ZSTD_highbit32",
          "new_api": null,
          "old_text": "ZSTD_highbit32(offsetCode+1)",
          "new_text": null,
          "old_line_content": "    {   U32 const offCode = ZSTD_highbit32(offsetCode+1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 308,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(offCode <= MaxOff)",
          "new_text": null,
          "old_line_content": "        assert(offCode <= MaxOff);",
          "new_line_content": "    /* match offset code (0-2=>repCode; 3+=>offset+2) */",
          "content_same": false
        },
        {
          "line": 820,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(7, \"large match (%u>%u), immediate encoding\",\n                                best_mlen, sufficient_len)",
          "new_text": null,
          "old_line_content": "                    DEBUGLOG(7, \"large match (%u>%u), immediate encoding\",",
          "new_line_content": "                    best_mlen = maxML;",
          "content_same": false
        },
        {
          "line": 315,
          "old_api": "ZSTD_MLcode",
          "new_api": null,
          "old_text": "ZSTD_MLcode(mlBase)",
          "new_text": null,
          "old_line_content": "        U32 const mlCode = ZSTD_MLcode(mlBase);",
          "new_line_content": "    /* match Length */",
          "content_same": false
        },
        {
          "line": 828,
          "old_api": "ZSTD_fullLiteralsCost_cached",
          "new_api": null,
          "old_text": "ZSTD_fullLiteralsCost_cached(&cachedLitPrice, anchor, litlen, optStatePtr, optLevel)",
          "new_text": null,
          "old_line_content": "            {   U32 const literalsPrice = ZSTD_fullLiteralsCost_cached(&cachedLitPrice, anchor, litlen, optStatePtr, optLevel);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 837,
          "old_api": "ZSTD_updateRep",
          "new_api": null,
          "old_text": "ZSTD_updateRep(rep, offset, ll0)",
          "new_text": null,
          "old_line_content": "                    repcodes_t const repHistory = ZSTD_updateRep(rep, offset, ll0);",
          "new_line_content": "                    U32 const offset = matches[matchNb].off;",
          "content_same": false
        },
        {
          "line": 330,
          "old_api": "MEM_read32",
          "new_api": null,
          "old_text": "MEM_read32(memPtr)",
          "new_text": null,
          "old_line_content": "    case 4 : return MEM_read32(memPtr);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 331,
          "old_api": "MEM_isLittleEndian",
          "new_api": null,
          "old_text": "MEM_isLittleEndian()",
          "new_text": null,
          "old_line_content": "    case 3 : if (MEM_isLittleEndian())",
          "new_line_content": "    default :",
          "content_same": false
        },
        {
          "line": 842,
          "old_api": "ZSTD_fCost",
          "new_api": null,
          "old_text": "ZSTD_fCost(sequencePrice)",
          "new_text": null,
          "old_line_content": "                                    pos, ZSTD_fCost(sequencePrice));",
          "new_line_content": "                        U32 const sequencePrice = literalsPrice + matchPrice;",
          "content_same": false
        },
        {
          "line": 847,
          "old_api": "ZSTD_STATIC_ASSERT",
          "new_api": null,
          "old_text": "ZSTD_STATIC_ASSERT(sizeof(opt[pos].rep) == sizeof(repHistory))",
          "new_text": null,
          "old_line_content": "                        ZSTD_STATIC_ASSERT(sizeof(opt[pos].rep) == sizeof(repHistory));",
          "new_line_content": "                        opt[pos].litlen = litlen;",
          "content_same": false
        },
        {
          "line": 848,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(opt[pos].rep, &repHistory, sizeof(repHistory))",
          "new_text": null,
          "old_line_content": "                        memcpy(opt[pos].rep, &repHistory, sizeof(repHistory));",
          "new_line_content": "                        opt[pos].price = sequencePrice;",
          "content_same": false
        },
        {
          "line": 857,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(cur < ZSTD_OPT_NUM)",
          "new_text": null,
          "old_line_content": "            assert(cur < ZSTD_OPT_NUM);",
          "new_line_content": "        for (cur = 1; cur <= last_pos; cur++) {",
          "content_same": false
        },
        {
          "line": 347,
          "old_api": "U32)(ip - base)",
          "new_api": null,
          "old_text": "U32)(ip - base)",
          "new_text": null,
          "old_line_content": "    U32 const target = ms->nextToUpdate3 = (U32)(ip - base);",
          "new_line_content": "    const BYTE* const base = ms->window.base;",
          "content_same": false
        },
        {
          "line": 348,
          "old_api": "ZSTD_hash3Ptr",
          "new_api": null,
          "old_text": "ZSTD_hash3Ptr(ip, hashLog3)",
          "new_text": null,
          "old_line_content": "    size_t const hash3 = ZSTD_hash3Ptr(ip, hashLog3);",
          "new_line_content": "    U32 idx = ms->nextToUpdate3;",
          "content_same": false
        },
        {
          "line": 863,
          "old_api": "ZSTD_literalsContribution",
          "new_api": null,
          "old_text": "ZSTD_literalsContribution(inr-litlen, litlen, optStatePtr, optLevel)",
          "new_text": null,
          "old_line_content": "                    price = opt[cur - litlen].price + ZSTD_literalsContribution(inr-litlen, litlen, optStatePtr, optLevel);",
          "new_line_content": "                int price;  /* note : contribution can be negative */",
          "content_same": false
        },
        {
          "line": 352,
          "old_api": "ZSTD_hash3Ptr",
          "new_api": null,
          "old_text": "ZSTD_hash3Ptr(base+idx, hashLog3)",
          "new_text": null,
          "old_line_content": "        hashTable3[ZSTD_hash3Ptr(base+idx, hashLog3)] = idx;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 870,
          "old_api": "ZSTD_fCost",
          "new_api": null,
          "old_text": "ZSTD_fCost(opt[cur].price)",
          "new_text": null,
          "old_line_content": "                                cur, ZSTD_fCost(price), ZSTD_fCost(opt[cur].price));",
          "new_line_content": "                if (price <= opt[cur].price) {",
          "content_same": false
        },
        {
          "line": 875,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(opt[cur].rep, opt[cur-1].rep, sizeof(opt[cur].rep))",
          "new_text": null,
          "old_line_content": "                    memcpy(opt[cur].rep, opt[cur-1].rep, sizeof(opt[cur].rep));",
          "new_line_content": "                    opt[cur].litlen = litlen;",
          "content_same": false
        },
        {
          "line": 878,
          "old_api": "ZSTD_fCost",
          "new_api": null,
          "old_text": "ZSTD_fCost(opt[cur].price)",
          "new_text": null,
          "old_line_content": "                                cur, ZSTD_fCost(price), ZSTD_fCost(opt[cur].price));",
          "new_line_content": "                } else {",
          "content_same": false
        },
        {
          "line": 373,
          "old_api": "ZSTD_hashPtr",
          "new_api": null,
          "old_text": "ZSTD_hashPtr(ip, hashLog, mls)",
          "new_text": null,
          "old_line_content": "    size_t const h  = ZSTD_hashPtr(ip, hashLog, mls);",
          "new_line_content": "    U32*   const hashTable = ms->hashTable;",
          "content_same": false
        },
        {
          "line": 889,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(7, \"move to next rPos:%u : price is <=\", cur+1)",
          "new_text": null,
          "old_line_content": "                DEBUGLOG(7, \"move to next rPos:%u : price is <=\", cur+1);",
          "new_line_content": "            if ( (optLevel==0) /*static_test*/",
          "content_same": false
        },
        {
          "line": 896,
          "old_api": "ZSTD_fullLiteralsCost",
          "new_api": null,
          "old_text": "ZSTD_fullLiteralsCost(inr-litlen, litlen, optStatePtr, optLevel)",
          "new_text": null,
          "old_line_content": "                U32 const basePrice = previousPrice + ZSTD_fullLiteralsCost(inr-litlen, litlen, optStatePtr, optLevel);",
          "new_line_content": "                U32 const litlen = (opt[cur].mlen == 1) ? opt[cur].litlen : 0;",
          "content_same": false
        },
        {
          "line": 385,
          "old_api": "U32)(ip-base)",
          "new_api": null,
          "old_text": "U32)(ip-base)",
          "new_text": null,
          "old_line_content": "    const U32 current = (U32)(ip-base);",
          "new_line_content": "    const BYTE* const prefixStart = base + dictLimit;",
          "content_same": false
        },
        {
          "line": 897,
          "old_api": "ZSTD_BtGetAllMatches",
          "new_api": null,
          "old_text": "ZSTD_BtGetAllMatches(ms, cParams, inr, iend, extDict, opt[cur].rep, ll0, matches, minMatch)",
          "new_text": null,
          "old_line_content": "                U32 const nbMatches = ZSTD_BtGetAllMatches(ms, cParams, inr, iend, extDict, opt[cur].rep, ll0, matches, minMatch);",
          "new_line_content": "                U32 const previousPrice = (cur > litlen) ? opt[cur-litlen].price : 0;",
          "content_same": false
        },
        {
          "line": 900,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(7, \"rPos:%u : no match found\", cur)",
          "new_text": null,
          "old_line_content": "                    DEBUGLOG(7, \"rPos:%u : no match found\", cur);",
          "new_line_content": "                U32 matchNb;",
          "content_same": false
        },
        {
          "line": 905,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(7, \"rPos:%u, found %u matches, of maxLength=%u\",\n                                cur, nbMatches, maxML)",
          "new_text": null,
          "old_line_content": "                    DEBUGLOG(7, \"rPos:%u, found %u matches, of maxLength=%u\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 401,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(8, \"ZSTD_insertBt1 (%u)\", current)",
          "new_text": null,
          "old_line_content": "    DEBUGLOG(8, \"ZSTD_insertBt1 (%u)\", current);",
          "new_line_content": "#endif /* ZSTD_C_PREDICT */",
          "content_same": false
        },
        {
          "line": 919,
          "old_api": "ZSTD_updateRep",
          "new_api": null,
          "old_text": "ZSTD_updateRep(opt[cur].rep, offset, ll0)",
          "new_text": null,
          "old_line_content": "                    repcodes_t const repHistory = ZSTD_updateRep(opt[cur].rep, offset, ll0);",
          "new_line_content": "                for (matchNb = 0; matchNb < nbMatches; matchNb++) {",
          "content_same": false
        },
        {
          "line": 408,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(commonLengthSmaller, commonLengthLarger)",
          "new_text": null,
          "old_line_content": "        size_t matchLength = MIN(commonLengthSmaller, commonLengthLarger);   /* guaranteed minimum nb of common bytes */",
          "new_line_content": "    while (nbCompares-- && (matchIndex > windowLow)) {",
          "content_same": false
        },
        {
          "line": 409,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(matchIndex < current)",
          "new_text": null,
          "old_line_content": "        assert(matchIndex < current);",
          "new_line_content": "        U32* const nextPtr = bt + 2*(matchIndex & btMask);",
          "content_same": false
        },
        {
          "line": 924,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(7, \"testing match %u => offCode=%u, mlen=%u, llen=%u\",\n                                matchNb, matches[matchNb].off, lastML, litlen)",
          "new_text": null,
          "old_line_content": "                    DEBUGLOG(7, \"testing match %u => offCode=%u, mlen=%u, llen=%u\",",
          "new_line_content": "                    U32 mlen;",
          "content_same": false
        },
        {
          "line": 929,
          "old_api": "ZSTD_getMatchPrice",
          "new_api": null,
          "old_text": "ZSTD_getMatchPrice(offset, mlen, optStatePtr, optLevel)",
          "new_text": null,
          "old_line_content": "                        int const price = basePrice + ZSTD_getMatchPrice(offset, mlen, optStatePtr, optLevel);",
          "new_line_content": "                    for (mlen = lastML; mlen >= startML; mlen--) {  /* scan downward */",
          "content_same": false
        },
        {
          "line": 932,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(7, \"rPos:%u => new better price (%.2f<%.2f)\",\n                                        pos, ZSTD_fCost(price), ZSTD_fCost(opt[pos].price))",
          "new_text": null,
          "old_line_content": "                            DEBUGLOG(7, \"rPos:%u => new better price (%.2f<%.2f)\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 933,
          "old_api": "ZSTD_fCost",
          "new_api": null,
          "old_text": "ZSTD_fCost(opt[pos].price)",
          "new_text": null,
          "old_line_content": "                                        pos, ZSTD_fCost(price), ZSTD_fCost(opt[pos].price));",
          "new_line_content": "                        if ((pos > last_pos) || (price < opt[pos].price)) {",
          "content_same": false
        },
        {
          "line": 939,
          "old_api": "ZSTD_STATIC_ASSERT",
          "new_api": null,
          "old_text": "ZSTD_STATIC_ASSERT(sizeof(opt[pos].rep) == sizeof(repHistory))",
          "new_text": null,
          "old_line_content": "                            ZSTD_STATIC_ASSERT(sizeof(opt[pos].rep) == sizeof(repHistory));",
          "new_line_content": "                            opt[pos].litlen = litlen;",
          "content_same": false
        },
        {
          "line": 940,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(opt[pos].rep, &repHistory, sizeof(repHistory))",
          "new_text": null,
          "old_line_content": "                            memcpy(opt[pos].rep, &repHistory, sizeof(repHistory));",
          "new_line_content": "                            opt[pos].price = price;",
          "content_same": false
        },
        {
          "line": 433,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(matchIndex+matchLength >= dictLimit)",
          "new_text": null,
          "old_line_content": "            assert(matchIndex+matchLength >= dictLimit);   /* might be wrong if extDict is incorrectly set to 0 */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 438,
          "old_api": "ZSTD_count_2segments",
          "new_api": null,
          "old_text": "ZSTD_count_2segments(ip+matchLength, match+matchLength, iend, dictEnd, prefixStart)",
          "new_text": null,
          "old_line_content": "            matchLength += ZSTD_count_2segments(ip+matchLength, match+matchLength, iend, dictEnd, prefixStart);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 952,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(opt[0].mlen == 1)",
          "new_text": null,
          "old_line_content": "        assert(opt[0].mlen == 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 955,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(7, \"start reverse traversal (last_pos:%u, cur:%u)\",\n                    last_pos, cur)",
          "new_text": null,
          "old_line_content": "        DEBUGLOG(7, \"start reverse traversal (last_pos:%u, cur:%u)\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 974,
          "old_api": "U32)(ip - anchor)",
          "new_api": null,
          "old_text": "U32)(ip - anchor)",
          "new_text": null,
          "old_line_content": "                U32 const llen = (U32)(ip - anchor);",
          "new_line_content": "        {   U32 pos;",
          "content_same": false
        },
        {
          "line": 470,
          "old_api": "U32)(bestLength - 384)",
          "new_api": null,
          "old_text": "U32)(bestLength - 384)",
          "new_text": null,
          "old_line_content": "    if (bestLength > 384) return MIN(192, (U32)(bestLength - 384));   /* speed optimization */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 471,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(matchEndIdx > current + 8)",
          "new_text": null,
          "old_line_content": "    assert(matchEndIdx > current + 8);",
          "new_line_content": "    *smallerPtr = *largerPtr = 0;",
          "content_same": false
        },
        {
          "line": 482,
          "old_api": "U32)(ip - base)",
          "new_api": null,
          "old_text": "U32)(ip - base)",
          "new_text": null,
          "old_line_content": "    U32 const target = (U32)(ip - base);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 994,
          "old_api": "ZSTD_updateStats",
          "new_api": null,
          "old_text": "ZSTD_updateStats(optStatePtr, llen, anchor, offset, mlen)",
          "new_text": null,
          "old_line_content": "                ZSTD_updateStats(optStatePtr, llen, anchor, offset, mlen);",
          "new_line_content": "                }   }",
          "content_same": false
        },
        {
          "line": 995,
          "old_api": "ZSTD_storeSeq",
          "new_api": null,
          "old_text": "ZSTD_storeSeq(seqStore, llen, anchor, offset, mlen-MINMATCH)",
          "new_text": null,
          "old_line_content": "                ZSTD_storeSeq(seqStore, llen, anchor, offset, mlen-MINMATCH);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 998,
          "old_api": "ZSTD_setBasePrices",
          "new_api": null,
          "old_text": "ZSTD_setBasePrices(optStatePtr, optLevel)",
          "new_text": null,
          "old_line_content": "        ZSTD_setBasePrices(optStatePtr, optLevel);",
          "new_line_content": "                anchor = ip;",
          "content_same": false
        },
        {
          "line": 488,
          "old_api": "ZSTD_insertBt1",
          "new_api": null,
          "old_text": "ZSTD_insertBt1(ms, cParams, base+idx, iend, mls, extDict)",
          "new_text": null,
          "old_line_content": "        idx += ZSTD_insertBt1(ms, cParams, base+idx, iend, mls, extDict);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 496,
          "old_api": "ZSTD_updateTree_internal",
          "new_api": null,
          "old_text": "ZSTD_updateTree_internal(ms, cParams, ip, iend, cParams->searchLength, 0 /*extDict*/)",
          "new_text": null,
          "old_line_content": "    ZSTD_updateTree_internal(ms, cParams, ip, iend, cParams->searchLength, 0 /*extDict*/);",
          "new_line_content": "                const BYTE* ip, const BYTE* iend)",
          "content_same": false
        },
        {
          "line": 1010,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(5, \"ZSTD_compressBlock_btopt\")",
          "new_text": null,
          "old_line_content": "    DEBUGLOG(5, \"ZSTD_compressBlock_btopt\");",
          "new_line_content": "        const ZSTD_compressionParameters* cParams, const void* src, size_t srcSize)",
          "content_same": false
        },
        {
          "line": 1011,
          "old_api": "ZSTD_compressBlock_opt_generic",
          "new_api": null,
          "old_text": "ZSTD_compressBlock_opt_generic(ms, seqStore, rep, cParams, src, srcSize, 0 /*optLevel*/, 0 /*extDict*/)",
          "new_text": null,
          "old_line_content": "    return ZSTD_compressBlock_opt_generic(ms, seqStore, rep, cParams, src, srcSize, 0 /*optLevel*/, 0 /*extDict*/);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 506,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(cParams->targetLength, ZSTD_OPT_NUM -1)",
          "new_text": null,
          "old_line_content": "    U32 const sufficient_len = MIN(cParams->targetLength, ZSTD_OPT_NUM -1);",
          "new_line_content": "                    ZSTD_match_t* matches, const U32 lengthToBeat, U32 const mls /* template */)",
          "content_same": false
        },
        {
          "line": 1019,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(ZSTD_FREQ_DIV+bonus > 0)",
          "new_text": null,
          "old_line_content": "    assert(ZSTD_FREQ_DIV+bonus > 0);",
          "new_line_content": "{",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 22,
      "total_additions": 101,
      "total_deletions": 101,
      "total_api_changes": 224
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 2,
        "api_related_lines": 224,
        "non_api_lines": 1,
        "non_api_line_numbers": [
          286
        ]
      }
    },
    "api_calls_before": 183,
    "api_calls_after": 183,
    "diff_info": {
      "added_lines": 2,
      "removed_lines": 0,
      "total_diff_lines": 14
    }
  }
}
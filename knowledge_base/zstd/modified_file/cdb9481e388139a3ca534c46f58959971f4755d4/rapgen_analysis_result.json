{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/zstd/modified_file/cdb9481e388139a3ca534c46f58959971f4755d4",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/zstd/modified_file/cdb9481e388139a3ca534c46f58959971f4755d4/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/zstd/modified_file/cdb9481e388139a3ca534c46f58959971f4755d4/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/zstd/modified_file/cdb9481e388139a3ca534c46f58959971f4755d4/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 510,
          "old_api": "assert",
          "new_api": "U32)(bestLength - 384)",
          "old_text": "assert(matchEndIdx > current + 8)",
          "new_text": "U32)(bestLength - 384)",
          "old_line_content": "    assert(matchEndIdx > current + 8);",
          "new_line_content": "        if (bestLength > 384) positions = MIN(192, (U32)(bestLength - 384));   /* speed optimization */",
          "content_same": false
        },
        {
          "line": 523,
          "old_api": "DEBUGLOG",
          "new_api": "U32)(ip - base)",
          "old_text": "DEBUGLOG(6, \"ZSTD_updateTree_internal, from %u to %u  (dictMode:%u)\",\n                idx, target, dictMode)",
          "new_text": "U32)(ip - base)",
          "old_line_content": "    DEBUGLOG(6, \"ZSTD_updateTree_internal, from %u to %u  (dictMode:%u)\",",
          "new_line_content": "    U32 const target = (U32)(ip - base);",
          "content_same": false
        },
        {
          "line": 549,
          "old_api": "U32)(ip-base)",
          "new_api": "MIN",
          "old_text": "U32)(ip-base)",
          "new_text": "MIN(cParams->targetLength, ZSTD_OPT_NUM -1)",
          "old_line_content": "    U32 const current = (U32)(ip-base);",
          "new_line_content": "    U32 const sufficient_len = MIN(cParams->targetLength, ZSTD_OPT_NUM -1);",
          "content_same": false
        },
        {
          "line": 599,
          "old_api": "ZSTD_readMINMATCH",
          "new_api": "assert",
          "old_text": "ZSTD_readMINMATCH(ip - repOffset, minMatch)",
          "new_text": "assert(current >= dictLimit)",
          "old_line_content": "                if (ZSTD_readMINMATCH(ip, minMatch) == ZSTD_readMINMATCH(ip - repOffset, minMatch)) {",
          "new_line_content": "            assert(current >= dictLimit);",
          "content_same": false
        },
        {
          "line": 611,
          "old_api": "ZSTD_count_2segments",
          "new_api": "U32)((dictLimit-1) - repIndex)",
          "old_text": "ZSTD_count_2segments(ip+minMatch, repMatch+minMatch, iLimit, dictEnd, prefixStart)",
          "new_text": "U32)((dictLimit-1) - repIndex)",
          "old_line_content": "                    repLen = (U32)ZSTD_count_2segments(ip+minMatch, repMatch+minMatch, iLimit, dictEnd, prefixStart) + minMatch;",
          "new_line_content": "                     & (((U32)((dictLimit-1) - repIndex) >= 3) ) /* intentional overflow : do not test positions overlapping 2 memory segments */)",
          "content_same": false
        },
        {
          "line": 617,
          "old_api": "ZSTD_count_2segments",
          "new_api": "U32)((dictLimit-1) - repIndex)",
          "old_text": "ZSTD_count_2segments(ip+minMatch, repMatch+minMatch, iLimit, dmsEnd, prefixStart)",
          "new_text": "U32)((dictLimit-1) - repIndex)",
          "old_line_content": "                    repLen = (U32)ZSTD_count_2segments(ip+minMatch, repMatch+minMatch, iLimit, dmsEnd, prefixStart) + minMatch;",
          "new_line_content": "                     & ((U32)((dictLimit-1) - repIndex) >= 3) ) /* intentional overflow : do not test positions overlapping 2 memory segments */",
          "content_same": false
        },
        {
          "line": 670,
          "old_api": "assert",
          "new_api": "MIN",
          "old_text": "assert(current > matchIndex)",
          "new_text": "MIN(commonLengthSmaller, commonLengthLarger)",
          "old_line_content": "        assert(current > matchIndex);",
          "new_line_content": "        size_t matchLength = MIN(commonLengthSmaller, commonLengthLarger);   /* guaranteed minimum nb of common bytes */",
          "content_same": false
        },
        {
          "line": 675,
          "old_api": "ZSTD_count",
          "new_api": "assert",
          "old_text": "ZSTD_count(ip+matchLength, match+matchLength, iLimit)",
          "new_text": "assert(matchIndex+matchLength >= dictLimit)",
          "old_line_content": "            matchLength += ZSTD_count(ip+matchLength, match+matchLength, iLimit);",
          "new_line_content": "            assert(matchIndex+matchLength >= dictLimit);  /* ensure the condition is correct when !extDict */",
          "content_same": false
        },
        {
          "line": 686,
          "old_api": "assert",
          "new_api": "DEBUGLOG",
          "old_text": "assert(matchEndIdx > matchIndex)",
          "new_text": "DEBUGLOG(8, \"found match of length %u at distance %u (offCode=%u)\",\n                    (U32)matchLength, current - matchIndex, current - matchIndex + ZSTD_REP_MOVE)",
          "old_line_content": "            assert(matchEndIdx > matchIndex);",
          "new_line_content": "            DEBUGLOG(8, \"found match of length %u at distance %u (offCode=%u)\",",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": "ZSTD_count_2segments",
          "new_api": "MIN",
          "old_text": "ZSTD_count_2segments(ip+matchLength, match+matchLength, iLimit, dmsEnd, prefixStart)",
          "new_text": "MIN(commonLengthSmaller, commonLengthLarger)",
          "old_line_content": "            matchLength += ZSTD_count_2segments(ip+matchLength, match+matchLength, iLimit, dmsEnd, prefixStart);",
          "new_line_content": "            size_t matchLength = MIN(commonLengthSmaller, commonLengthLarger);   /* guaranteed minimum nb of common bytes */",
          "content_same": false
        },
        {
          "line": 777,
          "old_api": "ZSTD_updateTree_internal",
          "new_api": "DEBUGLOG",
          "old_text": "ZSTD_updateTree_internal(ms, ip, iHighLimit, matchLengthSearch, dictMode)",
          "new_text": "DEBUGLOG(8, \"ZSTD_BtGetAllMatches\")",
          "old_line_content": "    ZSTD_updateTree_internal(ms, ip, iHighLimit, matchLengthSearch, dictMode);",
          "new_line_content": "    DEBUGLOG(8, \"ZSTD_BtGetAllMatches\");",
          "content_same": false
        },
        {
          "line": 870,
          "old_api": "assert",
          "new_api": "DEBUGLOG",
          "old_text": "assert(optLevel <= 2)",
          "new_text": "DEBUGLOG(5, \"ZSTD_compressBlock_opt_generic: current=%u, prefix=%u, nextToUpdate=%u\",\n                (U32)(ip - base), ms->window.dictLimit, ms->nextToUpdate)",
          "old_line_content": "    assert(optLevel <= 2);",
          "new_line_content": "    DEBUGLOG(5, \"ZSTD_compressBlock_opt_generic: current=%u, prefix=%u, nextToUpdate=%u\",",
          "content_same": false
        },
        {
          "line": 871,
          "old_api": "ZSTD_rescaleFreqs",
          "new_api": "U32)(ip - base)",
          "old_text": "ZSTD_rescaleFreqs(optStatePtr, (const BYTE*)src, srcSize, optLevel)",
          "new_text": "U32)(ip - base)",
          "old_line_content": "    ZSTD_rescaleFreqs(optStatePtr, (const BYTE*)src, srcSize, optLevel);",
          "new_line_content": "                (U32)(ip - base), ms->window.dictLimit, ms->nextToUpdate);",
          "content_same": false
        },
        {
          "line": 881,
          "old_api": "ZSTD_BtGetAllMatches",
          "new_api": "U32)(ip - anchor)",
          "old_text": "ZSTD_BtGetAllMatches(matches, ms, &nextToUpdate3, ip, iend, dictMode, rep, ll0, minMatch)",
          "new_text": "U32)(ip - anchor)",
          "old_line_content": "            U32 const nbMatches = ZSTD_BtGetAllMatches(matches, ms, &nextToUpdate3, ip, iend, dictMode, rep, ll0, minMatch);",
          "new_line_content": "        {   U32 const litlen = (U32)(ip - anchor);",
          "content_same": false
        },
        {
          "line": 919,
          "old_api": "ZSTD_getMatchPrice",
          "new_api": "ZSTD_updateRep",
          "old_text": "ZSTD_getMatchPrice(offset, pos, optStatePtr, optLevel)",
          "new_text": "ZSTD_updateRep(rep, offset, ll0)",
          "old_line_content": "                        U32 const matchPrice = ZSTD_getMatchPrice(offset, pos, optStatePtr, optLevel);",
          "new_line_content": "                    repcodes_t const repHistory = ZSTD_updateRep(rep, offset, ll0);",
          "content_same": false
        },
        {
          "line": 921,
          "old_api": "DEBUGLOG",
          "new_api": "ZSTD_getMatchPrice",
          "old_text": "DEBUGLOG(7, \"rPos:%u => set initial price : %.2f\",\n                                    pos, ZSTD_fCost(sequencePrice))",
          "new_text": "ZSTD_getMatchPrice(offset, pos, optStatePtr, optLevel)",
          "old_line_content": "                        DEBUGLOG(7, \"rPos:%u => set initial price : %.2f\",",
          "new_line_content": "                        U32 const matchPrice = ZSTD_getMatchPrice(offset, pos, optStatePtr, optLevel);",
          "content_same": false
        },
        {
          "line": 945,
          "old_api": "ZSTD_litLengthPrice",
          "new_api": "ZSTD_rawLiteralsCost",
          "old_text": "ZSTD_litLengthPrice(litlen-1, optStatePtr, optLevel)",
          "new_text": "ZSTD_rawLiteralsCost(ip+cur-1, 1, optStatePtr, optLevel)",
          "old_line_content": "                                - ZSTD_litLengthPrice(litlen-1, optStatePtr, optLevel);",
          "new_line_content": "                                + ZSTD_rawLiteralsCost(ip+cur-1, 1, optStatePtr, optLevel)",
          "content_same": false
        },
        {
          "line": 946,
          "old_api": "assert",
          "new_api": "ZSTD_litLengthPrice",
          "old_text": "assert(price < 1000000000)",
          "new_text": "ZSTD_litLengthPrice(litlen, optStatePtr, optLevel)",
          "old_line_content": "                assert(price < 1000000000); /* overflow check */",
          "new_line_content": "                                + ZSTD_litLengthPrice(litlen, optStatePtr, optLevel)",
          "content_same": false
        },
        {
          "line": 948,
          "old_api": "DEBUGLOG",
          "new_api": "assert",
          "old_text": "DEBUGLOG(7, \"cPos:%zi==rPos:%u : better price (%.2f<=%.2f) using literal (ll==%u) (hist:%u,%u,%u)\",\n                                inr-istart, cur, ZSTD_fCost(price), ZSTD_fCost(opt[cur].price), litlen,\n                                opt[cur-1].rep[0], opt[cur-1].rep[1], opt[cur-1].rep[2])",
          "new_text": "assert(price < 1000000000)",
          "old_line_content": "                    DEBUGLOG(7, \"cPos:%zi==rPos:%u : better price (%.2f<=%.2f) using literal (ll==%u) (hist:%u,%u,%u)\",",
          "new_line_content": "                assert(price < 1000000000); /* overflow check */",
          "content_same": false
        },
        {
          "line": 957,
          "old_api": "DEBUGLOG",
          "new_api": "memcpy",
          "old_text": "DEBUGLOG(7, \"cPos:%zi==rPos:%u : literal would cost more (%.2f>%.2f) (hist:%u,%u,%u)\",\n                                inr-istart, cur, ZSTD_fCost(price), ZSTD_fCost(opt[cur].price),\n                                opt[cur].rep[0], opt[cur].rep[1], opt[cur].rep[2])",
          "new_text": "memcpy(opt[cur].rep, opt[cur-1].rep, sizeof(opt[cur].rep))",
          "old_line_content": "                    DEBUGLOG(7, \"cPos:%zi==rPos:%u : literal would cost more (%.2f>%.2f) (hist:%u,%u,%u)\",",
          "new_line_content": "                    memcpy(opt[cur].rep, opt[cur-1].rep, sizeof(opt[cur].rep));",
          "content_same": false
        },
        {
          "line": 1026,
          "old_api": "DEBUGLOG",
          "new_api": "memcpy",
          "old_text": "DEBUGLOG(7, \"rPos:%u (ml=%2u) => new price is worse (%.2f>=%.2f)\",\n                                        pos, mlen, ZSTD_fCost(price), ZSTD_fCost(opt[pos].price))",
          "new_text": "memcpy(opt[pos].rep, &repHistory, sizeof(repHistory))",
          "old_line_content": "                            DEBUGLOG(7, \"rPos:%u (ml=%2u) => new price is worse (%.2f>=%.2f)\",",
          "new_line_content": "                            memcpy(opt[pos].rep, &repHistory, sizeof(repHistory));",
          "content_same": false
        },
        {
          "line": 1046,
          "old_api": "assert",
          "new_api": "DEBUGLOG",
          "old_text": "assert(storeEnd < ZSTD_OPT_NUM)",
          "new_text": "DEBUGLOG(6, \"start reverse traversal (last_pos:%u, cur:%u)\",\n                        last_pos, cur)",
          "old_line_content": "            assert(storeEnd < ZSTD_OPT_NUM);",
          "new_line_content": "            DEBUGLOG(6, \"start reverse traversal (last_pos:%u, cur:%u)\",",
          "content_same": false
        },
        {
          "line": 1053,
          "old_api": "DEBUGLOG",
          "new_api": "ZSTD_totalLen",
          "old_text": "DEBUGLOG(6, \"sequence from rPos=%u copied into pos=%u (llen=%u,mlen=%u,ofc=%u)\",\n                            seqPos, storeStart, opt[seqPos].litlen, opt[seqPos].mlen, opt[seqPos].off)",
          "new_text": "ZSTD_totalLen(opt[seqPos])",
          "old_line_content": "                DEBUGLOG(6, \"sequence from rPos=%u copied into pos=%u (llen=%u,mlen=%u,ofc=%u)\",",
          "new_line_content": "                U32 const backDist = ZSTD_totalLen(opt[seqPos]);",
          "content_same": false
        },
        {
          "line": 1092,
          "old_api": "ZSTD_storeSeq",
          "new_api": "assert",
          "old_text": "ZSTD_storeSeq(seqStore, llen, anchor, offCode, mlen-MINMATCH)",
          "new_text": "assert(anchor + llen <= iend)",
          "old_line_content": "                    ZSTD_storeSeq(seqStore, llen, anchor, offCode, mlen-MINMATCH);",
          "new_line_content": "                    assert(anchor + llen <= iend);",
          "content_same": false
        },
        {
          "line": 1133,
          "old_api": "ZSTD_upscaleStat",
          "new_api": "ZSTD_compressedLiterals",
          "old_text": "ZSTD_upscaleStat(optPtr->litLengthFreq, MaxLL, 0)",
          "new_text": "ZSTD_compressedLiterals(optPtr)",
          "old_line_content": "    optPtr->litLengthSum = ZSTD_upscaleStat(optPtr->litLengthFreq, MaxLL, 0);",
          "new_line_content": "    if (ZSTD_compressedLiterals(optPtr))",
          "content_same": false
        },
        {
          "line": 1152,
          "old_api": "DEBUGLOG",
          "new_api": "memcpy",
          "old_text": "DEBUGLOG(4, \"ZSTD_initStats_ultra (srcSize=%zu)\", srcSize)",
          "new_text": "memcpy(tmpRep, rep, sizeof(tmpRep))",
          "old_line_content": "    DEBUGLOG(4, \"ZSTD_initStats_ultra (srcSize=%zu)\", srcSize);",
          "new_line_content": "    memcpy(tmpRep, rep, sizeof(tmpRep));",
          "content_same": false
        },
        {
          "line": 1154,
          "old_api": "assert",
          "new_api": "DEBUGLOG",
          "old_text": "assert(seqStore->sequences == seqStore->sequencesStart)",
          "new_text": "DEBUGLOG(4, \"ZSTD_initStats_ultra (srcSize=%zu)\", srcSize)",
          "old_line_content": "    assert(seqStore->sequences == seqStore->sequencesStart);   /* no ldm */",
          "new_line_content": "    DEBUGLOG(4, \"ZSTD_initStats_ultra (srcSize=%zu)\", srcSize);",
          "content_same": false
        },
        {
          "line": 1158,
          "old_api": "ZSTD_compressBlock_opt_generic",
          "new_api": "assert",
          "old_text": "ZSTD_compressBlock_opt_generic(ms, seqStore, tmpRep, src, srcSize, 2 /*optLevel*/, ZSTD_noDict)",
          "new_text": "assert(ms->window.dictLimit - ms->nextToUpdate <= 1)",
          "old_line_content": "    ZSTD_compressBlock_opt_generic(ms, seqStore, tmpRep, src, srcSize, 2 /*optLevel*/, ZSTD_noDict);   /* generate stats into ms->opt*/",
          "new_line_content": "    assert(ms->window.dictLimit - ms->nextToUpdate <= 1);  /* no prefix (note: intentional overflow, defined as 2-complement) */",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 512,
          "old_api": null,
          "new_api": "MAX",
          "old_text": null,
          "new_text": "MAX(positions, matchEndIdx - (current + 8))",
          "old_line_content": "}",
          "new_line_content": "        return MAX(positions, matchEndIdx - (current + 8));",
          "content_same": false
        },
        {
          "line": 1025,
          "old_api": null,
          "new_api": "ZSTD_STATIC_ASSERT",
          "old_text": null,
          "new_text": "ZSTD_STATIC_ASSERT(sizeof(opt[pos].rep) == sizeof(repHistory))",
          "old_line_content": "                        } else {",
          "new_line_content": "                            ZSTD_STATIC_ASSERT(sizeof(opt[pos].rep) == sizeof(repHistory));",
          "content_same": false
        },
        {
          "line": 1028,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(7, \"rPos:%u (ml=%2u) => new price is worse (%.2f>=%.2f)\",\n                                        pos, mlen, ZSTD_fCost(price), ZSTD_fCost(opt[pos].price))",
          "old_line_content": "                            if (optLevel==0) break;  /* early update abort; gets ~+10% speed for about -0.01 ratio loss */",
          "new_line_content": "                            DEBUGLOG(7, \"rPos:%u (ml=%2u) => new price is worse (%.2f>=%.2f)\",",
          "content_same": false
        },
        {
          "line": 1029,
          "old_api": null,
          "new_api": "ZSTD_fCost",
          "old_text": null,
          "new_text": "ZSTD_fCost(opt[pos].price)",
          "old_line_content": "                        }",
          "new_line_content": "                                        pos, mlen, ZSTD_fCost(price), ZSTD_fCost(opt[pos].price));",
          "content_same": false
        },
        {
          "line": 1036,
          "old_api": null,
          "new_api": "ZSTD_totalLen",
          "old_text": null,
          "new_text": "ZSTD_totalLen(lastSequence)",
          "old_line_content": "",
          "new_line_content": "        cur = last_pos > ZSTD_totalLen(lastSequence) ? last_pos - ZSTD_totalLen(lastSequence) : 0;  /* single sequence, and it starts before `ip` */",
          "content_same": false
        },
        {
          "line": 525,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(6, \"ZSTD_updateTree_internal, from %u to %u  (dictMode:%u)\",\n                idx, target, dictMode)",
          "old_line_content": "",
          "new_line_content": "    DEBUGLOG(6, \"ZSTD_updateTree_internal, from %u to %u  (dictMode:%u)\",",
          "content_same": false
        },
        {
          "line": 1037,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(cur < ZSTD_OPT_NUM)",
          "old_line_content": "_shortestPath:   /* cur, last_pos, best_mlen, best_off have to be set */",
          "new_line_content": "        assert(cur < ZSTD_OPT_NUM);  /* control overflow*/",
          "content_same": false
        },
        {
          "line": 1040,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(opt[0].mlen == 0)",
          "old_line_content": "        {   U32 const storeEnd = cur + 1;",
          "new_line_content": "        assert(opt[0].mlen == 0);",
          "content_same": false
        },
        {
          "line": 529,
          "old_api": null,
          "new_api": "ZSTD_insertBt1",
          "old_text": null,
          "new_text": "ZSTD_insertBt1(ms, base+idx, iend, mls, dictMode == ZSTD_extDict)",
          "old_line_content": "}",
          "new_line_content": "        idx += ZSTD_insertBt1(ms, base+idx, iend, mls, dictMode == ZSTD_extDict);",
          "content_same": false
        },
        {
          "line": 534,
          "old_api": null,
          "new_api": "ZSTD_updateTree_internal",
          "old_text": null,
          "new_text": "ZSTD_updateTree_internal(ms, ip, iend, ms->cParams.minMatch, ZSTD_noDict)",
          "old_line_content": "",
          "new_line_content": "    ZSTD_updateTree_internal(ms, ip, iend, ms->cParams.minMatch, ZSTD_noDict);",
          "content_same": false
        },
        {
          "line": 1048,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(storeEnd < ZSTD_OPT_NUM)",
          "old_line_content": "                        storeEnd, lastSequence.litlen, lastSequence.mlen, lastSequence.off);",
          "new_line_content": "            assert(storeEnd < ZSTD_OPT_NUM);",
          "content_same": false
        },
        {
          "line": 1049,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(6, \"last sequence copied into pos=%u (llen=%u,mlen=%u,ofc=%u)\",\n                        storeEnd, lastSequence.litlen, lastSequence.mlen, lastSequence.off)",
          "old_line_content": "            opt[storeEnd] = lastSequence;",
          "new_line_content": "            DEBUGLOG(6, \"last sequence copied into pos=%u (llen=%u,mlen=%u,ofc=%u)\",",
          "content_same": false
        },
        {
          "line": 1055,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(6, \"sequence from rPos=%u copied into pos=%u (llen=%u,mlen=%u,ofc=%u)\",\n                            seqPos, storeStart, opt[seqPos].litlen, opt[seqPos].mlen, opt[seqPos].off)",
          "old_line_content": "                opt[storeStart] = opt[seqPos];",
          "new_line_content": "                DEBUGLOG(6, \"sequence from rPos=%u copied into pos=%u (llen=%u,mlen=%u,ofc=%u)\",",
          "content_same": false
        },
        {
          "line": 1062,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(6, \"sending selected sequences into seqStore\")",
          "old_line_content": "                for (storePos=storeStart; storePos <= storeEnd; storePos++) {",
          "new_line_content": "            DEBUGLOG(6, \"sending selected sequences into seqStore\")",
          "content_same": false
        },
        {
          "line": 551,
          "old_api": null,
          "new_api": "U32)(ip-base)",
          "old_text": null,
          "new_text": "U32)(ip-base)",
          "old_line_content": "    U32 const minMatch = (mls==3) ? 3 : 4;",
          "new_line_content": "    U32 const current = (U32)(ip-base);",
          "content_same": false
        },
        {
          "line": 555,
          "old_api": null,
          "new_api": "ZSTD_hashPtr",
          "old_text": null,
          "new_text": "ZSTD_hashPtr(ip, hashLog, mls)",
          "old_line_content": "    U32* const bt   = ms->chainTable;",
          "new_line_content": "    size_t const h  = ZSTD_hashPtr(ip, hashLog, mls);",
          "content_same": false
        },
        {
          "line": 1069,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(6, \"considering seq starting at %zi, llen=%u, mlen=%u\",\n                                anchor - istart, (unsigned)llen, (unsigned)mlen)",
          "old_line_content": "",
          "new_line_content": "                    DEBUGLOG(6, \"considering seq starting at %zi, llen=%u, mlen=%u\",",
          "content_same": false
        },
        {
          "line": 1073,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(storePos == storeEnd)",
          "old_line_content": "                        continue;   /* will finish */",
          "new_line_content": "                        assert(storePos == storeEnd);   /* must be last sequence */",
          "content_same": false
        },
        {
          "line": 580,
          "old_api": null,
          "new_api": "U32)(dmsEnd - dmsBase)",
          "old_text": null,
          "new_text": "U32)(dmsEnd - dmsBase)",
          "old_line_content": "    U32         const dmsIndexDelta = dictMode == ZSTD_dictMatchState ? windowLow - dmsHighLimit : 0;",
          "new_line_content": "    U32         const dmsHighLimit  = dictMode == ZSTD_dictMatchState ? (U32)(dmsEnd - dmsBase) : 0;",
          "content_same": false
        },
        {
          "line": 1093,
          "old_api": null,
          "new_api": "ZSTD_updateStats",
          "old_text": null,
          "new_text": "ZSTD_updateStats(optStatePtr, llen, anchor, offCode, mlen)",
          "old_line_content": "                    anchor += advance;",
          "new_line_content": "                    ZSTD_updateStats(optStatePtr, llen, anchor, offCode, mlen);",
          "content_same": false
        },
        {
          "line": 1094,
          "old_api": null,
          "new_api": "ZSTD_storeSeq",
          "old_text": null,
          "new_text": "ZSTD_storeSeq(seqStore, llen, anchor, offCode, mlen-MINMATCH)",
          "old_line_content": "                    ip = anchor;",
          "new_line_content": "                    ZSTD_storeSeq(seqStore, llen, anchor, offCode, mlen-MINMATCH);",
          "content_same": false
        },
        {
          "line": 1098,
          "old_api": null,
          "new_api": "ZSTD_setBasePrices",
          "old_text": null,
          "new_text": "ZSTD_setBasePrices(optStatePtr, optLevel)",
          "old_line_content": "",
          "new_line_content": "            ZSTD_setBasePrices(optStatePtr, optLevel);",
          "content_same": false
        },
        {
          "line": 589,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(8, \"ZSTD_insertBtAndGetAllMatches: current=%u\", current)",
          "old_line_content": "    /* check repCode */",
          "new_line_content": "    DEBUGLOG(8, \"ZSTD_insertBtAndGetAllMatches: current=%u\", current);",
          "content_same": false
        },
        {
          "line": 592,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(ll0 <= 1)",
          "old_line_content": "        U32 repCode;",
          "new_line_content": "    assert(ll0 <= 1);   /* necessarily 1 or 0 */",
          "content_same": false
        },
        {
          "line": 1112,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(5, \"ZSTD_compressBlock_btopt\")",
          "old_line_content": "}",
          "new_line_content": "    DEBUGLOG(5, \"ZSTD_compressBlock_btopt\");",
          "content_same": false
        },
        {
          "line": 601,
          "old_api": null,
          "new_api": "ZSTD_readMINMATCH",
          "old_text": null,
          "new_text": "ZSTD_readMINMATCH(ip - repOffset, minMatch)",
          "old_line_content": "                }",
          "new_line_content": "                if (ZSTD_readMINMATCH(ip, minMatch) == ZSTD_readMINMATCH(ip - repOffset, minMatch)) {",
          "content_same": false
        },
        {
          "line": 602,
          "old_api": null,
          "new_api": "ZSTD_count",
          "old_text": null,
          "new_text": "ZSTD_count(ip+minMatch, ip+minMatch-repOffset, iLimit)",
          "old_line_content": "            } else {  /* repIndex < dictLimit || repIndex >= current */",
          "new_line_content": "                    repLen = (U32)ZSTD_count(ip+minMatch, ip+minMatch-repOffset, iLimit) + minMatch;",
          "content_same": false
        },
        {
          "line": 1113,
          "old_api": null,
          "new_api": "ZSTD_compressBlock_opt_generic",
          "old_text": null,
          "new_text": "ZSTD_compressBlock_opt_generic(ms, seqStore, rep, src, srcSize, 0 /*optLevel*/, ZSTD_noDict)",
          "old_line_content": "",
          "new_line_content": "    return ZSTD_compressBlock_opt_generic(ms, seqStore, rep, src, srcSize, 0 /*optLevel*/, ZSTD_noDict);",
          "content_same": false
        },
        {
          "line": 608,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(current >= windowLow)",
          "old_line_content": "                  && ( ((repOffset-1) /*intentional overflow*/ < current - windowLow)  /* equivalent to `current > repIndex >= windowLow` */",
          "new_line_content": "                assert(current >= windowLow);",
          "content_same": false
        },
        {
          "line": 1121,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(ZSTD_FREQ_DIV+bonus >= 0)",
          "old_line_content": "        table[s] <<= ZSTD_FREQ_DIV+bonus;",
          "new_line_content": "    assert(ZSTD_FREQ_DIV+bonus >= 0);",
          "content_same": false
        },
        {
          "line": 612,
          "old_api": null,
          "new_api": "ZSTD_readMINMATCH",
          "old_text": null,
          "new_text": "ZSTD_readMINMATCH(repMatch, minMatch)",
          "old_line_content": "                }",
          "new_line_content": "                  && (ZSTD_readMINMATCH(ip, minMatch) == ZSTD_readMINMATCH(repMatch, minMatch)) ) {",
          "content_same": false
        },
        {
          "line": 613,
          "old_api": null,
          "new_api": "ZSTD_count_2segments",
          "old_text": null,
          "new_text": "ZSTD_count_2segments(ip+minMatch, repMatch+minMatch, iLimit, dictEnd, prefixStart)",
          "old_line_content": "                if (dictMode == ZSTD_dictMatchState",
          "new_line_content": "                    repLen = (U32)ZSTD_count_2segments(ip+minMatch, repMatch+minMatch, iLimit, dictEnd, prefixStart) + minMatch;",
          "content_same": false
        },
        {
          "line": 618,
          "old_api": null,
          "new_api": "ZSTD_readMINMATCH",
          "old_text": null,
          "new_text": "ZSTD_readMINMATCH(repMatch, minMatch)",
          "old_line_content": "            }   }",
          "new_line_content": "                  && (ZSTD_readMINMATCH(ip, minMatch) == ZSTD_readMINMATCH(repMatch, minMatch)) ) {",
          "content_same": false
        },
        {
          "line": 619,
          "old_api": null,
          "new_api": "ZSTD_count_2segments",
          "old_text": null,
          "new_text": "ZSTD_count_2segments(ip+minMatch, repMatch+minMatch, iLimit, dmsEnd, prefixStart)",
          "old_line_content": "            /* save longer solution */",
          "new_line_content": "                    repLen = (U32)ZSTD_count_2segments(ip+minMatch, repMatch+minMatch, iLimit, dmsEnd, prefixStart) + minMatch;",
          "content_same": false
        },
        {
          "line": 623,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(8, \"found repCode %u (ll0:%u, offset:%u) of length %u\",\n                            repCode, ll0, repOffset, repLen)",
          "old_line_content": "                bestLength = repLen;",
          "new_line_content": "                DEBUGLOG(8, \"found repCode %u (ll0:%u, offset:%u) of length %u\",",
          "content_same": false
        },
        {
          "line": 1136,
          "old_api": null,
          "new_api": "ZSTD_upscaleStat",
          "old_text": null,
          "new_text": "ZSTD_upscaleStat(optPtr->matchLengthFreq, MaxML, 0)",
          "old_line_content": "}",
          "new_line_content": "    optPtr->matchLengthSum = ZSTD_upscaleStat(optPtr->matchLengthFreq, MaxML, 0);",
          "content_same": false
        },
        {
          "line": 1137,
          "old_api": null,
          "new_api": "ZSTD_upscaleStat",
          "old_text": null,
          "new_text": "ZSTD_upscaleStat(optPtr->offCodeFreq, MaxOff, 0)",
          "old_line_content": "",
          "new_line_content": "    optPtr->offCodeSum = ZSTD_upscaleStat(optPtr->offCodeFreq, MaxOff, 0);",
          "content_same": false
        },
        {
          "line": 636,
          "old_api": null,
          "new_api": "ZSTD_insertAndFindFirstIndexHash3",
          "old_text": null,
          "new_text": "ZSTD_insertAndFindFirstIndexHash3(ms, nextToUpdate3, ip)",
          "old_line_content": "          & (current - matchIndex3 < (1<<18)) /*heuristic : longer distance likely too expensive*/ ) {",
          "new_line_content": "        U32 const matchIndex3 = ZSTD_insertAndFindFirstIndexHash3(ms, nextToUpdate3, ip);",
          "content_same": false
        },
        {
          "line": 642,
          "old_api": null,
          "new_api": "ZSTD_count",
          "old_text": null,
          "new_text": "ZSTD_count(ip, match, iLimit)",
          "old_line_content": "                const BYTE* const match = dictBase + matchIndex3;",
          "new_line_content": "                mlen = ZSTD_count(ip, match, iLimit);",
          "content_same": false
        },
        {
          "line": 645,
          "old_api": null,
          "new_api": "ZSTD_count_2segments",
          "old_text": null,
          "new_text": "ZSTD_count_2segments(ip, match, iLimit, dictEnd, prefixStart)",
          "old_line_content": "",
          "new_line_content": "                mlen = ZSTD_count_2segments(ip, match, iLimit, dictEnd, prefixStart);",
          "content_same": false
        },
        {
          "line": 1157,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(ms->window.dictLimit == ms->window.lowLimit)",
          "old_line_content": "",
          "new_line_content": "    assert(ms->window.dictLimit == ms->window.lowLimit);   /* no dictionary */",
          "content_same": false
        },
        {
          "line": 1160,
          "old_api": null,
          "new_api": "ZSTD_compressBlock_opt_generic",
          "old_text": null,
          "new_text": "ZSTD_compressBlock_opt_generic(ms, seqStore, tmpRep, src, srcSize, 2 /*optLevel*/, ZSTD_noDict)",
          "old_line_content": "    /* invalidate first scan from history */",
          "new_line_content": "    ZSTD_compressBlock_opt_generic(ms, seqStore, tmpRep, src, srcSize, 2 /*optLevel*/, ZSTD_noDict);   /* generate stats into ms->opt*/",
          "content_same": false
        },
        {
          "line": 650,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(8, \"found small match with hlog3, of length %u\",\n                            (U32)mlen)",
          "old_line_content": "                bestLength = mlen;",
          "new_line_content": "                DEBUGLOG(8, \"found small match with hlog3, of length %u\",",
          "content_same": false
        },
        {
          "line": 1163,
          "old_api": null,
          "new_api": "ZSTD_resetSeqStore",
          "old_text": null,
          "new_text": "ZSTD_resetSeqStore(seqStore)",
          "old_line_content": "    ms->window.dictLimit += (U32)srcSize;",
          "new_line_content": "    ZSTD_resetSeqStore(seqStore);",
          "content_same": false
        },
        {
          "line": 653,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(current > matchIndex3)",
          "old_line_content": "                matches[0].off = (current - matchIndex3) + ZSTD_REP_MOVE;",
          "new_line_content": "                assert(current > matchIndex3);",
          "content_same": false
        },
        {
          "line": 654,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(mnum==0)",
          "old_line_content": "                matches[0].len = (U32)mlen;",
          "new_line_content": "                assert(mnum==0);  /* no prior solution */",
          "content_same": false
        },
        {
          "line": 1170,
          "old_api": null,
          "new_api": "ZSTD_upscaleStats",
          "old_text": null,
          "new_text": "ZSTD_upscaleStats(&ms->opt)",
          "old_line_content": "",
          "new_line_content": "    ZSTD_upscaleStats(&ms->opt);",
          "content_same": false
        },
        {
          "line": 1177,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(5, \"ZSTD_compressBlock_btultra (srcSize=%zu)\", srcSize)",
          "old_line_content": "}",
          "new_line_content": "    DEBUGLOG(5, \"ZSTD_compressBlock_btultra (srcSize=%zu)\", srcSize);",
          "content_same": false
        },
        {
          "line": 1178,
          "old_api": null,
          "new_api": "ZSTD_compressBlock_opt_generic",
          "old_text": null,
          "new_text": "ZSTD_compressBlock_opt_generic(ms, seqStore, rep, src, srcSize, 2 /*optLevel*/, ZSTD_noDict)",
          "old_line_content": "",
          "new_line_content": "    return ZSTD_compressBlock_opt_generic(ms, seqStore, rep, src, srcSize, 2 /*optLevel*/, ZSTD_noDict);",
          "content_same": false
        },
        {
          "line": 672,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(current > matchIndex)",
          "old_line_content": "        if ((dictMode == ZSTD_noDict) || (dictMode == ZSTD_dictMatchState) || (matchIndex+matchLength >= dictLimit)) {",
          "new_line_content": "        assert(current > matchIndex);",
          "content_same": false
        },
        {
          "line": 1185,
          "old_api": null,
          "new_api": "U32)((const BYTE*)src - ms->window.base)",
          "old_text": null,
          "new_text": "U32)((const BYTE*)src - ms->window.base)",
          "old_line_content": "",
          "new_line_content": "    U32 const current = (U32)((const BYTE*)src - ms->window.base);",
          "content_same": false
        },
        {
          "line": 1186,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(5, \"ZSTD_compressBlock_btultra2 (srcSize=%zu)\", srcSize)",
          "old_line_content": "    /* 2-pass strategy:",
          "new_line_content": "    DEBUGLOG(5, \"ZSTD_compressBlock_btultra2 (srcSize=%zu)\", srcSize);",
          "content_same": false
        },
        {
          "line": 677,
          "old_api": null,
          "new_api": "ZSTD_count",
          "old_text": null,
          "new_text": "ZSTD_count(ip+matchLength, match+matchLength, iLimit)",
          "old_line_content": "            match = dictBase + matchIndex;",
          "new_line_content": "            matchLength += ZSTD_count(ip+matchLength, match+matchLength, iLimit);",
          "content_same": false
        },
        {
          "line": 680,
          "old_api": null,
          "new_api": "ZSTD_count_2segments",
          "old_text": null,
          "new_text": "ZSTD_count_2segments(ip+matchLength, match+matchLength, iLimit, dictEnd, prefixStart)",
          "old_line_content": "                match = base + matchIndex;   /* prepare for match[matchLength] */",
          "new_line_content": "            matchLength += ZSTD_count_2segments(ip+matchLength, match+matchLength, iLimit, dictEnd, prefixStart);",
          "content_same": false
        },
        {
          "line": 1196,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(srcSize <= ZSTD_BLOCKSIZE_MAX)",
          "old_line_content": "      && (seqStore->sequences == seqStore->sequencesStart)  /* no ldm */",
          "new_line_content": "    assert(srcSize <= ZSTD_BLOCKSIZE_MAX);",
          "content_same": false
        },
        {
          "line": 688,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(matchEndIdx > matchIndex)",
          "old_line_content": "                matchEndIdx = matchIndex + (U32)matchLength;",
          "new_line_content": "            assert(matchEndIdx > matchIndex);",
          "content_same": false
        },
        {
          "line": 1203,
          "old_api": null,
          "new_api": "ZSTD_initStats_ultra",
          "old_text": null,
          "new_text": "ZSTD_initStats_ultra(ms, seqStore, rep, src, srcSize)",
          "old_line_content": "",
          "new_line_content": "        ZSTD_initStats_ultra(ms, seqStore, rep, src, srcSize);",
          "content_same": false
        },
        {
          "line": 1206,
          "old_api": null,
          "new_api": "ZSTD_compressBlock_opt_generic",
          "old_text": null,
          "new_text": "ZSTD_compressBlock_opt_generic(ms, seqStore, rep, src, srcSize, 2 /*optLevel*/, ZSTD_noDict)",
          "old_line_content": "",
          "new_line_content": "    return ZSTD_compressBlock_opt_generic(ms, seqStore, rep, src, srcSize, 2 /*optLevel*/, ZSTD_noDict);",
          "content_same": false
        },
        {
          "line": 1213,
          "old_api": null,
          "new_api": "ZSTD_compressBlock_opt_generic",
          "old_text": null,
          "new_text": "ZSTD_compressBlock_opt_generic(ms, seqStore, rep, src, srcSize, 0 /*optLevel*/, ZSTD_dictMatchState)",
          "old_line_content": "",
          "new_line_content": "    return ZSTD_compressBlock_opt_generic(ms, seqStore, rep, src, srcSize, 0 /*optLevel*/, ZSTD_dictMatchState);",
          "content_same": false
        },
        {
          "line": 1220,
          "old_api": null,
          "new_api": "ZSTD_compressBlock_opt_generic",
          "old_text": null,
          "new_text": "ZSTD_compressBlock_opt_generic(ms, seqStore, rep, src, srcSize, 2 /*optLevel*/, ZSTD_dictMatchState)",
          "old_line_content": "",
          "new_line_content": "    return ZSTD_compressBlock_opt_generic(ms, seqStore, rep, src, srcSize, 2 /*optLevel*/, ZSTD_dictMatchState);",
          "content_same": false
        },
        {
          "line": 1227,
          "old_api": null,
          "new_api": "ZSTD_compressBlock_opt_generic",
          "old_text": null,
          "new_text": "ZSTD_compressBlock_opt_generic(ms, seqStore, rep, src, srcSize, 0 /*optLevel*/, ZSTD_extDict)",
          "old_line_content": "",
          "new_line_content": "    return ZSTD_compressBlock_opt_generic(ms, seqStore, rep, src, srcSize, 0 /*optLevel*/, ZSTD_extDict);",
          "content_same": false
        },
        {
          "line": 720,
          "old_api": null,
          "new_api": "ZSTD_hashPtr",
          "old_text": null,
          "new_text": "ZSTD_hashPtr(ip, dmsHashLog, mls)",
          "old_line_content": "        const U32* const dmsBt = dms->chainTable;",
          "new_line_content": "        size_t const dmsH = ZSTD_hashPtr(ip, dmsHashLog, mls);",
          "content_same": false
        },
        {
          "line": 1234,
          "old_api": null,
          "new_api": "ZSTD_compressBlock_opt_generic",
          "old_text": null,
          "new_text": "ZSTD_compressBlock_opt_generic(ms, seqStore, rep, src, srcSize, 2 /*optLevel*/, ZSTD_extDict)",
          "old_line_content": "",
          "new_line_content": "    return ZSTD_compressBlock_opt_generic(ms, seqStore, rep, src, srcSize, 2 /*optLevel*/, ZSTD_extDict);",
          "content_same": false
        },
        {
          "line": 728,
          "old_api": null,
          "new_api": "ZSTD_count_2segments",
          "old_text": null,
          "new_text": "ZSTD_count_2segments(ip+matchLength, match+matchLength, iLimit, dmsEnd, prefixStart)",
          "old_line_content": "                match = base + dictMatchIndex + dmsIndexDelta;   /* to prepare for next usage of match[matchLength] */",
          "new_line_content": "            matchLength += ZSTD_count_2segments(ip+matchLength, match+matchLength, iLimit, dmsEnd, prefixStart);",
          "content_same": false
        },
        {
          "line": 734,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(8, \"found dms match of length %u at distance %u (offCode=%u)\",\n                        (U32)matchLength, current - matchIndex, current - matchIndex + ZSTD_REP_MOVE)",
          "old_line_content": "                if (matchLength > matchEndIdx - matchIndex)",
          "new_line_content": "                DEBUGLOG(8, \"found dms match of length %u at distance %u (offCode=%u)\",",
          "content_same": false
        },
        {
          "line": 760,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(matchEndIdx > current+8)",
          "old_line_content": "    return mnum;",
          "new_line_content": "    assert(matchEndIdx > current+8);",
          "content_same": false
        },
        {
          "line": 779,
          "old_api": null,
          "new_api": "ZSTD_updateTree_internal",
          "old_text": null,
          "new_text": "ZSTD_updateTree_internal(ms, ip, iHighLimit, matchLengthSearch, dictMode)",
          "old_line_content": "    {",
          "new_line_content": "    ZSTD_updateTree_internal(ms, ip, iHighLimit, matchLengthSearch, dictMode);",
          "content_same": false
        },
        {
          "line": 784,
          "old_api": null,
          "new_api": "ZSTD_insertBtAndGetAllMatches",
          "old_text": null,
          "new_text": "ZSTD_insertBtAndGetAllMatches(matches, ms, nextToUpdate3, ip, iHighLimit, dictMode, rep, ll0, lengthToBeat, 4)",
          "old_line_content": "    case 7 :",
          "new_line_content": "    case 4 : return ZSTD_insertBtAndGetAllMatches(matches, ms, nextToUpdate3, ip, iHighLimit, dictMode, rep, ll0, lengthToBeat, 4);",
          "content_same": false
        },
        {
          "line": 787,
          "old_api": null,
          "new_api": "ZSTD_insertBtAndGetAllMatches",
          "old_text": null,
          "new_text": "ZSTD_insertBtAndGetAllMatches(matches, ms, nextToUpdate3, ip, iHighLimit, dictMode, rep, ll0, lengthToBeat, 6)",
          "old_line_content": "}",
          "new_line_content": "    case 6 : return ZSTD_insertBtAndGetAllMatches(matches, ms, nextToUpdate3, ip, iHighLimit, dictMode, rep, ll0, lengthToBeat, 6);",
          "content_same": false
        },
        {
          "line": 814,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(&newReps, rep, sizeof(newReps))",
          "old_line_content": "    }",
          "new_line_content": "            memcpy(&newReps, rep, sizeof(newReps));",
          "content_same": false
        },
        {
          "line": 838,
          "old_api": null,
          "new_api": "RAWLOG",
          "old_text": null,
          "new_text": "RAWLOG(2, \" \\n\")",
          "old_line_content": "",
          "new_line_content": "    RAWLOG(2, \" \\n\");",
          "content_same": false
        },
        {
          "line": 861,
          "old_api": null,
          "new_api": "MIN",
          "old_text": null,
          "new_text": "MIN(cParams->targetLength, ZSTD_OPT_NUM -1)",
          "old_line_content": "    U32 nextToUpdate3 = ms->nextToUpdate;",
          "new_line_content": "    U32 const sufficient_len = MIN(cParams->targetLength, ZSTD_OPT_NUM -1);",
          "content_same": false
        },
        {
          "line": 872,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(optLevel <= 2)",
          "old_line_content": "    ip += (ip==prefixStart);",
          "new_line_content": "    assert(optLevel <= 2);",
          "content_same": false
        },
        {
          "line": 873,
          "old_api": null,
          "new_api": "ZSTD_rescaleFreqs",
          "old_text": null,
          "new_text": "ZSTD_rescaleFreqs(optStatePtr, (const BYTE*)src, srcSize, optLevel)",
          "old_line_content": "",
          "new_line_content": "    ZSTD_rescaleFreqs(optStatePtr, (const BYTE*)src, srcSize, optLevel);",
          "content_same": false
        },
        {
          "line": 883,
          "old_api": null,
          "new_api": "ZSTD_BtGetAllMatches",
          "old_text": null,
          "new_text": "ZSTD_BtGetAllMatches(matches, ms, &nextToUpdate3, ip, iend, dictMode, rep, ll0, minMatch)",
          "old_line_content": "",
          "new_line_content": "            U32 const nbMatches = ZSTD_BtGetAllMatches(matches, ms, &nextToUpdate3, ip, iend, dictMode, rep, ll0, minMatch);",
          "content_same": false
        },
        {
          "line": 890,
          "old_api": null,
          "new_api": "ZSTD_literalsContribution",
          "old_text": null,
          "new_text": "ZSTD_literalsContribution(anchor, litlen, optStatePtr, optLevel)",
          "old_line_content": "            /* large match -> immediate encoding */",
          "new_line_content": "            opt[0].price = ZSTD_literalsContribution(anchor, litlen, optStatePtr, optLevel);",
          "content_same": false
        },
        {
          "line": 895,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(6, \"found %u matches of maxLength=%u and maxOffCode=%u at cPos=%u => start new series\",\n                            nbMatches, maxML, maxOffset, (U32)(ip-prefixStart))",
          "old_line_content": "",
          "new_line_content": "                DEBUGLOG(6, \"found %u matches of maxLength=%u and maxOffCode=%u at cPos=%u => start new series\",",
          "content_same": false
        },
        {
          "line": 896,
          "old_api": null,
          "new_api": "U32)(ip-prefixStart)",
          "old_text": null,
          "new_text": "U32)(ip-prefixStart)",
          "old_line_content": "                if (maxML > sufficient_len) {",
          "new_line_content": "                            nbMatches, maxML, maxOffset, (U32)(ip-prefixStart));",
          "content_same": false
        },
        {
          "line": 902,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(6, \"large match (%u>%u), immediate encoding\",\n                                maxML, sufficient_len)",
          "old_line_content": "                    cur = 0;",
          "new_line_content": "                    DEBUGLOG(6, \"large match (%u>%u), immediate encoding\",",
          "content_same": false
        },
        {
          "line": 905,
          "old_api": null,
          "new_api": "ZSTD_totalLen",
          "old_text": null,
          "new_text": "ZSTD_totalLen(lastSequence)",
          "old_line_content": "            }   }",
          "new_line_content": "                    last_pos = ZSTD_totalLen(lastSequence);",
          "content_same": false
        },
        {
          "line": 910,
          "old_api": null,
          "new_api": "ZSTD_litLengthPrice",
          "old_text": null,
          "new_text": "ZSTD_litLengthPrice(0, optStatePtr, optLevel)",
          "old_line_content": "                U32 matchNb;",
          "new_line_content": "            {   U32 const literalsPrice = opt[0].price + ZSTD_litLengthPrice(0, optStatePtr, optLevel);",
          "content_same": false
        },
        {
          "line": 923,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(7, \"rPos:%u => set initial price : %.2f\",\n                                    pos, ZSTD_fCost(sequencePrice))",
          "old_line_content": "                        opt[pos].mlen = pos;",
          "new_line_content": "                        DEBUGLOG(7, \"rPos:%u => set initial price : %.2f\",",
          "content_same": false
        },
        {
          "line": 924,
          "old_api": null,
          "new_api": "ZSTD_fCost",
          "old_text": null,
          "new_text": "ZSTD_fCost(sequencePrice)",
          "old_line_content": "                        opt[pos].off = offset;",
          "new_line_content": "                                    pos, ZSTD_fCost(sequencePrice));",
          "content_same": false
        },
        {
          "line": 929,
          "old_api": null,
          "new_api": "ZSTD_STATIC_ASSERT",
          "old_text": null,
          "new_text": "ZSTD_STATIC_ASSERT(sizeof(opt[pos].rep) == sizeof(repHistory))",
          "old_line_content": "                }   }",
          "new_line_content": "                        ZSTD_STATIC_ASSERT(sizeof(opt[pos].rep) == sizeof(repHistory));",
          "content_same": false
        },
        {
          "line": 930,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(opt[pos].rep, &repHistory, sizeof(repHistory))",
          "old_line_content": "                last_pos = pos-1;",
          "new_line_content": "                        memcpy(opt[pos].rep, &repHistory, sizeof(repHistory));",
          "content_same": false
        },
        {
          "line": 939,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(cur < ZSTD_OPT_NUM)",
          "old_line_content": "",
          "new_line_content": "            assert(cur < ZSTD_OPT_NUM);",
          "content_same": false
        },
        {
          "line": 940,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(7, \"cPos:%zi==rPos:%u\", inr-istart, cur)",
          "old_line_content": "            /* Fix current position with one literal if cheaper */",
          "new_line_content": "            DEBUGLOG(7, \"cPos:%zi==rPos:%u\", inr-istart, cur)",
          "content_same": false
        },
        {
          "line": 947,
          "old_api": null,
          "new_api": "ZSTD_litLengthPrice",
          "old_text": null,
          "new_text": "ZSTD_litLengthPrice(litlen-1, optStatePtr, optLevel)",
          "old_line_content": "                if (price <= opt[cur].price) {",
          "new_line_content": "                                - ZSTD_litLengthPrice(litlen-1, optStatePtr, optLevel);",
          "content_same": false
        },
        {
          "line": 950,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(7, \"cPos:%zi==rPos:%u : better price (%.2f<=%.2f) using literal (ll==%u) (hist:%u,%u,%u)\",\n                                inr-istart, cur, ZSTD_fCost(price), ZSTD_fCost(opt[cur].price), litlen,\n                                opt[cur-1].rep[0], opt[cur-1].rep[1], opt[cur-1].rep[2])",
          "old_line_content": "                                opt[cur-1].rep[0], opt[cur-1].rep[1], opt[cur-1].rep[2]);",
          "new_line_content": "                    DEBUGLOG(7, \"cPos:%zi==rPos:%u : better price (%.2f<=%.2f) using literal (ll==%u) (hist:%u,%u,%u)\",",
          "content_same": false
        },
        {
          "line": 951,
          "old_api": null,
          "new_api": "ZSTD_fCost",
          "old_text": null,
          "new_text": "ZSTD_fCost(opt[cur].price)",
          "old_line_content": "                    opt[cur].mlen = 0;",
          "new_line_content": "                                inr-istart, cur, ZSTD_fCost(price), ZSTD_fCost(opt[cur].price), litlen,",
          "content_same": false
        },
        {
          "line": 959,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(7, \"cPos:%zi==rPos:%u : literal would cost more (%.2f>%.2f) (hist:%u,%u,%u)\",\n                                inr-istart, cur, ZSTD_fCost(price), ZSTD_fCost(opt[cur].price),\n                                opt[cur].rep[0], opt[cur].rep[1], opt[cur].rep[2])",
          "old_line_content": "                                opt[cur].rep[0], opt[cur].rep[1], opt[cur].rep[2]);",
          "new_line_content": "                    DEBUGLOG(7, \"cPos:%zi==rPos:%u : literal would cost more (%.2f>%.2f) (hist:%u,%u,%u)\",",
          "content_same": false
        },
        {
          "line": 960,
          "old_api": null,
          "new_api": "ZSTD_fCost",
          "old_text": null,
          "new_text": "ZSTD_fCost(opt[cur].price)",
          "old_line_content": "                }",
          "new_line_content": "                                inr-istart, cur, ZSTD_fCost(price), ZSTD_fCost(opt[cur].price),",
          "content_same": false
        },
        {
          "line": 972,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(7, \"move to next rPos:%u : price is <=\", cur+1)",
          "old_line_content": "            }",
          "new_line_content": "                DEBUGLOG(7, \"move to next rPos:%u : price is <=\", cur+1);",
          "content_same": false
        },
        {
          "line": 979,
          "old_api": null,
          "new_api": "ZSTD_litLengthPrice",
          "old_text": null,
          "new_text": "ZSTD_litLengthPrice(0, optStatePtr, optLevel)",
          "old_line_content": "                U32 matchNb;",
          "new_line_content": "                U32 const basePrice = previousPrice + ZSTD_litLengthPrice(0, optStatePtr, optLevel);",
          "content_same": false
        },
        {
          "line": 980,
          "old_api": null,
          "new_api": "ZSTD_BtGetAllMatches",
          "old_text": null,
          "new_text": "ZSTD_BtGetAllMatches(matches, ms, &nextToUpdate3, inr, iend, dictMode, opt[cur].rep, ll0, minMatch)",
          "old_line_content": "                if (!nbMatches) {",
          "new_line_content": "                U32 const nbMatches = ZSTD_BtGetAllMatches(matches, ms, &nextToUpdate3, inr, iend, dictMode, opt[cur].rep, ll0, minMatch);",
          "content_same": false
        },
        {
          "line": 983,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(7, \"rPos:%u : no match found\", cur)",
          "old_line_content": "                }",
          "new_line_content": "                    DEBUGLOG(7, \"rPos:%u : no match found\", cur);",
          "content_same": false
        },
        {
          "line": 988,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(7, \"cPos:%zi==rPos:%u, found %u matches, of maxLength=%u\",\n                                inr-istart, cur, nbMatches, maxML)",
          "old_line_content": "",
          "new_line_content": "                    DEBUGLOG(7, \"cPos:%zi==rPos:%u, found %u matches, of maxLength=%u\",",
          "content_same": false
        },
        {
          "line": 997,
          "old_api": null,
          "new_api": "ZSTD_totalLen",
          "old_text": null,
          "new_text": "ZSTD_totalLen(lastSequence)",
          "old_line_content": "                        goto _shortestPath;",
          "new_line_content": "                        last_pos = cur + ZSTD_totalLen(lastSequence);",
          "content_same": false
        },
        {
          "line": 1005,
          "old_api": null,
          "new_api": "ZSTD_updateRep",
          "old_text": null,
          "new_text": "ZSTD_updateRep(opt[cur].rep, offset, ll0)",
          "old_line_content": "                    U32 const startML = (matchNb>0) ? matches[matchNb-1].len+1 : minMatch;",
          "new_line_content": "                    repcodes_t const repHistory = ZSTD_updateRep(opt[cur].rep, offset, ll0);",
          "content_same": false
        },
        {
          "line": 1010,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(7, \"testing match %u => offCode=%4u, mlen=%2u, llen=%2u\",\n                                matchNb, matches[matchNb].off, lastML, litlen)",
          "old_line_content": "",
          "new_line_content": "                    DEBUGLOG(7, \"testing match %u => offCode=%4u, mlen=%2u, llen=%2u\",",
          "content_same": false
        },
        {
          "line": 1015,
          "old_api": null,
          "new_api": "ZSTD_getMatchPrice",
          "old_text": null,
          "new_text": "ZSTD_getMatchPrice(offset, mlen, optStatePtr, optLevel)",
          "old_line_content": "                        if ((pos > last_pos) || (price < opt[pos].price)) {",
          "new_line_content": "                        int const price = basePrice + ZSTD_getMatchPrice(offset, mlen, optStatePtr, optLevel);",
          "content_same": false
        },
        {
          "line": 1018,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(7, \"rPos:%u (ml=%2u) => new better price (%.2f<%.2f)\",\n                                        pos, mlen, ZSTD_fCost(price), ZSTD_fCost(opt[pos].price))",
          "old_line_content": "                            while (last_pos < pos) { opt[last_pos+1].price = ZSTD_MAX_PRICE; last_pos++; }   /* fill empty positions */",
          "new_line_content": "                            DEBUGLOG(7, \"rPos:%u (ml=%2u) => new better price (%.2f<%.2f)\",",
          "content_same": false
        },
        {
          "line": 1019,
          "old_api": null,
          "new_api": "ZSTD_fCost",
          "old_text": null,
          "new_text": "ZSTD_fCost(opt[pos].price)",
          "old_line_content": "                            opt[pos].mlen = mlen;",
          "new_line_content": "                                        pos, mlen, ZSTD_fCost(price), ZSTD_fCost(opt[pos].price));",
          "content_same": false
        },
        {
          "line": 511,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(matchEndIdx > current + 8)",
          "old_line_content": "    return matchEndIdx - (current + 8);",
          "new_line_content": "        assert(matchEndIdx > current + 8);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1024,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(opt[pos].rep, &repHistory, sizeof(repHistory))",
          "new_text": null,
          "old_line_content": "                            memcpy(opt[pos].rep, &repHistory, sizeof(repHistory));",
          "new_line_content": "                            opt[pos].price = price;",
          "content_same": false
        },
        {
          "line": 1027,
          "old_api": "ZSTD_fCost",
          "new_api": null,
          "old_text": "ZSTD_fCost(opt[pos].price)",
          "new_text": null,
          "old_line_content": "                                        pos, mlen, ZSTD_fCost(price), ZSTD_fCost(opt[pos].price));",
          "new_line_content": "                        } else {",
          "content_same": false
        },
        {
          "line": 521,
          "old_api": "U32)(ip - base)",
          "new_api": null,
          "old_text": "U32)(ip - base)",
          "new_text": null,
          "old_line_content": "    U32 const target = (U32)(ip - base);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1034,
          "old_api": "ZSTD_totalLen",
          "new_api": null,
          "old_text": "ZSTD_totalLen(lastSequence)",
          "new_text": null,
          "old_line_content": "        cur = last_pos > ZSTD_totalLen(lastSequence) ? last_pos - ZSTD_totalLen(lastSequence) : 0;  /* single sequence, and it starts before `ip` */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1035,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(cur < ZSTD_OPT_NUM)",
          "new_text": null,
          "old_line_content": "        assert(cur < ZSTD_OPT_NUM);  /* control overflow*/",
          "new_line_content": "        lastSequence = opt[last_pos];",
          "content_same": false
        },
        {
          "line": 1038,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(opt[0].mlen == 0)",
          "new_text": null,
          "old_line_content": "        assert(opt[0].mlen == 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 527,
          "old_api": "ZSTD_insertBt1",
          "new_api": null,
          "old_text": "ZSTD_insertBt1(ms, base+idx, iend, mls, dictMode == ZSTD_extDict)",
          "new_text": null,
          "old_line_content": "        idx += ZSTD_insertBt1(ms, base+idx, iend, mls, dictMode == ZSTD_extDict);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 532,
          "old_api": "ZSTD_updateTree_internal",
          "new_api": null,
          "old_text": "ZSTD_updateTree_internal(ms, ip, iend, ms->cParams.minMatch, ZSTD_noDict)",
          "new_text": null,
          "old_line_content": "    ZSTD_updateTree_internal(ms, ip, iend, ms->cParams.minMatch, ZSTD_noDict);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1044,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(6, \"start reverse traversal (last_pos:%u, cur:%u)\",\n                        last_pos, cur)",
          "new_text": null,
          "old_line_content": "            DEBUGLOG(6, \"start reverse traversal (last_pos:%u, cur:%u)\",",
          "new_line_content": "            U32 seqPos = cur;",
          "content_same": false
        },
        {
          "line": 1047,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(6, \"last sequence copied into pos=%u (llen=%u,mlen=%u,ofc=%u)\",\n                        storeEnd, lastSequence.litlen, lastSequence.mlen, lastSequence.off)",
          "new_text": null,
          "old_line_content": "            DEBUGLOG(6, \"last sequence copied into pos=%u (llen=%u,mlen=%u,ofc=%u)\",",
          "new_line_content": "                        last_pos, cur); (void)last_pos;",
          "content_same": false
        },
        {
          "line": 1051,
          "old_api": "ZSTD_totalLen",
          "new_api": null,
          "old_text": "ZSTD_totalLen(opt[seqPos])",
          "new_text": null,
          "old_line_content": "                U32 const backDist = ZSTD_totalLen(opt[seqPos]);",
          "new_line_content": "            opt[storeEnd] = lastSequence;",
          "content_same": false
        },
        {
          "line": 547,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(cParams->targetLength, ZSTD_OPT_NUM -1)",
          "new_text": null,
          "old_line_content": "    U32 const sufficient_len = MIN(cParams->targetLength, ZSTD_OPT_NUM -1);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1060,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(6, \"sending selected sequences into seqStore\")",
          "new_text": null,
          "old_line_content": "            DEBUGLOG(6, \"sending selected sequences into seqStore\")",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 553,
          "old_api": "ZSTD_hashPtr",
          "new_api": null,
          "old_text": "ZSTD_hashPtr(ip, hashLog, mls)",
          "new_text": null,
          "old_line_content": "    size_t const h  = ZSTD_hashPtr(ip, hashLog, mls);",
          "new_line_content": "    U32 const minMatch = (mls==3) ? 3 : 4;",
          "content_same": false
        },
        {
          "line": 1067,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(6, \"considering seq starting at %zi, llen=%u, mlen=%u\",\n                                anchor - istart, (unsigned)llen, (unsigned)mlen)",
          "new_text": null,
          "old_line_content": "                    DEBUGLOG(6, \"considering seq starting at %zi, llen=%u, mlen=%u\",",
          "new_line_content": "                    U32 const offCode = opt[storePos].off;",
          "content_same": false
        },
        {
          "line": 1071,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(storePos == storeEnd)",
          "new_text": null,
          "old_line_content": "                        assert(storePos == storeEnd);   /* must be last sequence */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 578,
          "old_api": "U32)(dmsEnd - dmsBase)",
          "new_api": null,
          "old_text": "U32)(dmsEnd - dmsBase)",
          "new_text": null,
          "old_line_content": "    U32         const dmsHighLimit  = dictMode == ZSTD_dictMatchState ? (U32)(dmsEnd - dmsBase) : 0;",
          "new_line_content": "    const BYTE* const dmsBase       = dictMode == ZSTD_dictMatchState ? dms->window.base : NULL;",
          "content_same": false
        },
        {
          "line": 1090,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(anchor + llen <= iend)",
          "new_text": null,
          "old_line_content": "                    assert(anchor + llen <= iend);",
          "new_line_content": "                    }   }",
          "content_same": false
        },
        {
          "line": 1091,
          "old_api": "ZSTD_updateStats",
          "new_api": null,
          "old_text": "ZSTD_updateStats(optStatePtr, llen, anchor, offCode, mlen)",
          "new_text": null,
          "old_line_content": "                    ZSTD_updateStats(optStatePtr, llen, anchor, offCode, mlen);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1096,
          "old_api": "ZSTD_setBasePrices",
          "new_api": null,
          "old_text": "ZSTD_setBasePrices(optStatePtr, optLevel)",
          "new_text": null,
          "old_line_content": "            ZSTD_setBasePrices(optStatePtr, optLevel);",
          "new_line_content": "                    ip = anchor;",
          "content_same": false
        },
        {
          "line": 587,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(8, \"ZSTD_insertBtAndGetAllMatches: current=%u\", current)",
          "new_text": null,
          "old_line_content": "    DEBUGLOG(8, \"ZSTD_insertBtAndGetAllMatches: current=%u\", current);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 590,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(ll0 <= 1)",
          "new_text": null,
          "old_line_content": "    assert(ll0 <= 1);   /* necessarily 1 or 0 */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 597,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(current >= dictLimit)",
          "new_text": null,
          "old_line_content": "            assert(current >= dictLimit);",
          "new_line_content": "            U32 const repIndex = current - repOffset;",
          "content_same": false
        },
        {
          "line": 1110,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(5, \"ZSTD_compressBlock_btopt\")",
          "new_text": null,
          "old_line_content": "    DEBUGLOG(5, \"ZSTD_compressBlock_btopt\");",
          "new_line_content": "        const void* src, size_t srcSize)",
          "content_same": false
        },
        {
          "line": 1111,
          "old_api": "ZSTD_compressBlock_opt_generic",
          "new_api": null,
          "old_text": "ZSTD_compressBlock_opt_generic(ms, seqStore, rep, src, srcSize, 0 /*optLevel*/, ZSTD_noDict)",
          "new_text": null,
          "old_line_content": "    return ZSTD_compressBlock_opt_generic(ms, seqStore, rep, src, srcSize, 0 /*optLevel*/, ZSTD_noDict);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 600,
          "old_api": "ZSTD_count",
          "new_api": null,
          "old_text": "ZSTD_count(ip+minMatch, ip+minMatch-repOffset, iLimit)",
          "new_text": null,
          "old_line_content": "                    repLen = (U32)ZSTD_count(ip+minMatch, ip+minMatch-repOffset, iLimit) + minMatch;",
          "new_line_content": "            if (repOffset-1 /* intentional overflow, discards 0 and -1 */ < current-dictLimit) {  /* equivalent to `current > repIndex >= dictLimit` */",
          "content_same": false
        },
        {
          "line": 606,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(current >= windowLow)",
          "new_text": null,
          "old_line_content": "                assert(current >= windowLow);",
          "new_line_content": "                                             dmsBase + repIndex - dmsIndexDelta :",
          "content_same": false
        },
        {
          "line": 1119,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(ZSTD_FREQ_DIV+bonus >= 0)",
          "new_text": null,
          "old_line_content": "    assert(ZSTD_FREQ_DIV+bonus >= 0);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 609,
          "old_api": "U32)((dictLimit-1) - repIndex)",
          "new_api": null,
          "old_text": "U32)((dictLimit-1) - repIndex)",
          "new_text": null,
          "old_line_content": "                     & (((U32)((dictLimit-1) - repIndex) >= 3) ) /* intentional overflow : do not test positions overlapping 2 memory segments */)",
          "new_line_content": "                if ( dictMode == ZSTD_extDict",
          "content_same": false
        },
        {
          "line": 610,
          "old_api": "ZSTD_readMINMATCH",
          "new_api": null,
          "old_text": "ZSTD_readMINMATCH(repMatch, minMatch)",
          "new_text": null,
          "old_line_content": "                  && (ZSTD_readMINMATCH(ip, minMatch) == ZSTD_readMINMATCH(repMatch, minMatch)) ) {",
          "new_line_content": "                  && ( ((repOffset-1) /*intentional overflow*/ < current - windowLow)  /* equivalent to `current > repIndex >= windowLow` */",
          "content_same": false
        },
        {
          "line": 615,
          "old_api": "U32)((dictLimit-1) - repIndex)",
          "new_api": null,
          "old_text": "U32)((dictLimit-1) - repIndex)",
          "new_text": null,
          "old_line_content": "                     & ((U32)((dictLimit-1) - repIndex) >= 3) ) /* intentional overflow : do not test positions overlapping 2 memory segments */",
          "new_line_content": "                if (dictMode == ZSTD_dictMatchState",
          "content_same": false
        },
        {
          "line": 616,
          "old_api": "ZSTD_readMINMATCH",
          "new_api": null,
          "old_text": "ZSTD_readMINMATCH(repMatch, minMatch)",
          "new_text": null,
          "old_line_content": "                  && (ZSTD_readMINMATCH(ip, minMatch) == ZSTD_readMINMATCH(repMatch, minMatch)) ) {",
          "new_line_content": "                  && ( ((repOffset-1) /*intentional overflow*/ < current - (dmsLowLimit + dmsIndexDelta))  /* equivalent to `current > repIndex >= dmsLowLimit` */",
          "content_same": false
        },
        {
          "line": 1131,
          "old_api": "ZSTD_compressedLiterals",
          "new_api": null,
          "old_text": "ZSTD_compressedLiterals(optPtr)",
          "new_text": null,
          "old_line_content": "    if (ZSTD_compressedLiterals(optPtr))",
          "new_line_content": "MEM_STATIC void ZSTD_upscaleStats(optState_t* optPtr)",
          "content_same": false
        },
        {
          "line": 1132,
          "old_api": "ZSTD_upscaleStat",
          "new_api": null,
          "old_text": "ZSTD_upscaleStat(optPtr->litFreq, MaxLit, 0)",
          "new_text": null,
          "old_line_content": "        optPtr->litSum = ZSTD_upscaleStat(optPtr->litFreq, MaxLit, 0);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 621,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(8, \"found repCode %u (ll0:%u, offset:%u) of length %u\",\n                            repCode, ll0, repOffset, repLen)",
          "new_text": null,
          "old_line_content": "                DEBUGLOG(8, \"found repCode %u (ll0:%u, offset:%u) of length %u\",",
          "new_line_content": "            /* save longer solution */",
          "content_same": false
        },
        {
          "line": 634,
          "old_api": "ZSTD_insertAndFindFirstIndexHash3",
          "new_api": null,
          "old_text": "ZSTD_insertAndFindFirstIndexHash3(ms, nextToUpdate3, ip)",
          "new_text": null,
          "old_line_content": "        U32 const matchIndex3 = ZSTD_insertAndFindFirstIndexHash3(ms, nextToUpdate3, ip);",
          "new_line_content": "    /* HC3 match finder */",
          "content_same": false
        },
        {
          "line": 1150,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(tmpRep, rep, sizeof(tmpRep))",
          "new_text": null,
          "old_line_content": "    memcpy(tmpRep, rep, sizeof(tmpRep));",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 640,
          "old_api": "ZSTD_count",
          "new_api": null,
          "old_text": "ZSTD_count(ip, match, iLimit)",
          "new_text": null,
          "old_line_content": "                mlen = ZSTD_count(ip, match, iLimit);",
          "new_line_content": "            if ((dictMode == ZSTD_noDict) /*static*/ || (dictMode == ZSTD_dictMatchState) /*static*/ || (matchIndex3 >= dictLimit)) {",
          "content_same": false
        },
        {
          "line": 1153,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(ms->opt.litLengthSum == 0)",
          "new_text": null,
          "old_line_content": "    assert(ms->opt.litLengthSum == 0);    /* first block */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 643,
          "old_api": "ZSTD_count_2segments",
          "new_api": null,
          "old_text": "ZSTD_count_2segments(ip, match, iLimit, dictEnd, prefixStart)",
          "new_text": null,
          "old_line_content": "                mlen = ZSTD_count_2segments(ip, match, iLimit, dictEnd, prefixStart);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 648,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(8, \"found small match with hlog3, of length %u\",\n                            (U32)mlen)",
          "new_text": null,
          "old_line_content": "                DEBUGLOG(8, \"found small match with hlog3, of length %u\",",
          "new_line_content": "            /* save best solution */",
          "content_same": false
        },
        {
          "line": 1161,
          "old_api": "ZSTD_resetSeqStore",
          "new_api": null,
          "old_text": "ZSTD_resetSeqStore(seqStore)",
          "new_text": null,
          "old_line_content": "    ZSTD_resetSeqStore(seqStore);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 651,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(current > matchIndex3)",
          "new_text": null,
          "old_line_content": "                assert(current > matchIndex3);",
          "new_line_content": "                            (U32)mlen);",
          "content_same": false
        },
        {
          "line": 652,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(mnum==0)",
          "new_text": null,
          "old_line_content": "                assert(mnum==0);  /* no prior solution */",
          "new_line_content": "                bestLength = mlen;",
          "content_same": false
        },
        {
          "line": 1168,
          "old_api": "ZSTD_upscaleStats",
          "new_api": null,
          "old_text": "ZSTD_upscaleStats(&ms->opt)",
          "new_text": null,
          "old_line_content": "    ZSTD_upscaleStats(&ms->opt);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1175,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(5, \"ZSTD_compressBlock_btultra (srcSize=%zu)\", srcSize)",
          "new_text": null,
          "old_line_content": "    DEBUGLOG(5, \"ZSTD_compressBlock_btultra (srcSize=%zu)\", srcSize);",
          "new_line_content": "        const void* src, size_t srcSize)",
          "content_same": false
        },
        {
          "line": 1176,
          "old_api": "ZSTD_compressBlock_opt_generic",
          "new_api": null,
          "old_text": "ZSTD_compressBlock_opt_generic(ms, seqStore, rep, src, srcSize, 2 /*optLevel*/, ZSTD_noDict)",
          "new_text": null,
          "old_line_content": "    return ZSTD_compressBlock_opt_generic(ms, seqStore, rep, src, srcSize, 2 /*optLevel*/, ZSTD_noDict);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 668,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(commonLengthSmaller, commonLengthLarger)",
          "new_text": null,
          "old_line_content": "        size_t matchLength = MIN(commonLengthSmaller, commonLengthLarger);   /* guaranteed minimum nb of common bytes */",
          "new_line_content": "    while (nbCompares-- && (matchIndex >= matchLow)) {",
          "content_same": false
        },
        {
          "line": 1183,
          "old_api": "U32)((const BYTE*)src - ms->window.base)",
          "new_api": null,
          "old_text": "U32)((const BYTE*)src - ms->window.base)",
          "new_text": null,
          "old_line_content": "    U32 const current = (U32)((const BYTE*)src - ms->window.base);",
          "new_line_content": "        const void* src, size_t srcSize)",
          "content_same": false
        },
        {
          "line": 1184,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(5, \"ZSTD_compressBlock_btultra2 (srcSize=%zu)\", srcSize)",
          "new_text": null,
          "old_line_content": "    DEBUGLOG(5, \"ZSTD_compressBlock_btultra2 (srcSize=%zu)\", srcSize);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 673,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(matchIndex+matchLength >= dictLimit)",
          "new_text": null,
          "old_line_content": "            assert(matchIndex+matchLength >= dictLimit);  /* ensure the condition is correct when !extDict */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 678,
          "old_api": "ZSTD_count_2segments",
          "new_api": null,
          "old_text": "ZSTD_count_2segments(ip+matchLength, match+matchLength, iLimit, dictEnd, prefixStart)",
          "new_text": null,
          "old_line_content": "            matchLength += ZSTD_count_2segments(ip+matchLength, match+matchLength, iLimit, dictEnd, prefixStart);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1194,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(srcSize <= ZSTD_BLOCKSIZE_MAX)",
          "new_text": null,
          "old_line_content": "    assert(srcSize <= ZSTD_BLOCKSIZE_MAX);",
          "new_line_content": "     * The compression ratio gain is generally small (~0.5% on first block),",
          "content_same": false
        },
        {
          "line": 684,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(8, \"found match of length %u at distance %u (offCode=%u)\",\n                    (U32)matchLength, current - matchIndex, current - matchIndex + ZSTD_REP_MOVE)",
          "new_text": null,
          "old_line_content": "            DEBUGLOG(8, \"found match of length %u at distance %u (offCode=%u)\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1201,
          "old_api": "ZSTD_initStats_ultra",
          "new_api": null,
          "old_text": "ZSTD_initStats_ultra(ms, seqStore, rep, src, srcSize)",
          "new_text": null,
          "old_line_content": "        ZSTD_initStats_ultra(ms, seqStore, rep, src, srcSize);",
          "new_line_content": "      && (srcSize > ZSTD_PREDEF_THRESHOLD)",
          "content_same": false
        },
        {
          "line": 1204,
          "old_api": "ZSTD_compressBlock_opt_generic",
          "new_api": null,
          "old_text": "ZSTD_compressBlock_opt_generic(ms, seqStore, rep, src, srcSize, 2 /*optLevel*/, ZSTD_noDict)",
          "new_text": null,
          "old_line_content": "    return ZSTD_compressBlock_opt_generic(ms, seqStore, rep, src, srcSize, 2 /*optLevel*/, ZSTD_noDict);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1211,
          "old_api": "ZSTD_compressBlock_opt_generic",
          "new_api": null,
          "old_text": "ZSTD_compressBlock_opt_generic(ms, seqStore, rep, src, srcSize, 0 /*optLevel*/, ZSTD_dictMatchState)",
          "new_text": null,
          "old_line_content": "    return ZSTD_compressBlock_opt_generic(ms, seqStore, rep, src, srcSize, 0 /*optLevel*/, ZSTD_dictMatchState);",
          "new_line_content": "        const void* src, size_t srcSize)",
          "content_same": false
        },
        {
          "line": 1218,
          "old_api": "ZSTD_compressBlock_opt_generic",
          "new_api": null,
          "old_text": "ZSTD_compressBlock_opt_generic(ms, seqStore, rep, src, srcSize, 2 /*optLevel*/, ZSTD_dictMatchState)",
          "new_text": null,
          "old_line_content": "    return ZSTD_compressBlock_opt_generic(ms, seqStore, rep, src, srcSize, 2 /*optLevel*/, ZSTD_dictMatchState);",
          "new_line_content": "        const void* src, size_t srcSize)",
          "content_same": false
        },
        {
          "line": 1225,
          "old_api": "ZSTD_compressBlock_opt_generic",
          "new_api": null,
          "old_text": "ZSTD_compressBlock_opt_generic(ms, seqStore, rep, src, srcSize, 0 /*optLevel*/, ZSTD_extDict)",
          "new_text": null,
          "old_line_content": "    return ZSTD_compressBlock_opt_generic(ms, seqStore, rep, src, srcSize, 0 /*optLevel*/, ZSTD_extDict);",
          "new_line_content": "        const void* src, size_t srcSize)",
          "content_same": false
        },
        {
          "line": 718,
          "old_api": "ZSTD_hashPtr",
          "new_api": null,
          "old_text": "ZSTD_hashPtr(ip, dmsHashLog, mls)",
          "new_text": null,
          "old_line_content": "        size_t const dmsH = ZSTD_hashPtr(ip, dmsHashLog, mls);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1232,
          "old_api": "ZSTD_compressBlock_opt_generic",
          "new_api": null,
          "old_text": "ZSTD_compressBlock_opt_generic(ms, seqStore, rep, src, srcSize, 2 /*optLevel*/, ZSTD_extDict)",
          "new_text": null,
          "old_line_content": "    return ZSTD_compressBlock_opt_generic(ms, seqStore, rep, src, srcSize, 2 /*optLevel*/, ZSTD_extDict);",
          "new_line_content": "        const void* src, size_t srcSize)",
          "content_same": false
        },
        {
          "line": 724,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(commonLengthSmaller, commonLengthLarger)",
          "new_text": null,
          "old_line_content": "            size_t matchLength = MIN(commonLengthSmaller, commonLengthLarger);   /* guaranteed minimum nb of common bytes */",
          "new_line_content": "        while (nbCompares-- && (dictMatchIndex > dmsLowLimit)) {",
          "content_same": false
        },
        {
          "line": 732,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(8, \"found dms match of length %u at distance %u (offCode=%u)\",\n                        (U32)matchLength, current - matchIndex, current - matchIndex + ZSTD_REP_MOVE)",
          "new_text": null,
          "old_line_content": "                DEBUGLOG(8, \"found dms match of length %u at distance %u (offCode=%u)\",",
          "new_line_content": "            if (matchLength > bestLength) {",
          "content_same": false
        },
        {
          "line": 758,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(matchEndIdx > current+8)",
          "new_text": null,
          "old_line_content": "    assert(matchEndIdx > current+8);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 775,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(8, \"ZSTD_BtGetAllMatches\")",
          "new_text": null,
          "old_line_content": "    DEBUGLOG(8, \"ZSTD_BtGetAllMatches\");",
          "new_line_content": "    const ZSTD_compressionParameters* const cParams = &ms->cParams;",
          "content_same": false
        },
        {
          "line": 780,
          "old_api": "ZSTD_insertBtAndGetAllMatches",
          "new_api": null,
          "old_text": "ZSTD_insertBtAndGetAllMatches(matches, ms, nextToUpdate3, ip, iHighLimit, dictMode, rep, ll0, lengthToBeat, 3)",
          "new_text": null,
          "old_line_content": "    case 3 : return ZSTD_insertBtAndGetAllMatches(matches, ms, nextToUpdate3, ip, iHighLimit, dictMode, rep, ll0, lengthToBeat, 3);",
          "new_line_content": "    switch(matchLengthSearch)",
          "content_same": false
        },
        {
          "line": 783,
          "old_api": "ZSTD_insertBtAndGetAllMatches",
          "new_api": null,
          "old_text": "ZSTD_insertBtAndGetAllMatches(matches, ms, nextToUpdate3, ip, iHighLimit, dictMode, rep, ll0, lengthToBeat, 5)",
          "new_text": null,
          "old_line_content": "    case 5 : return ZSTD_insertBtAndGetAllMatches(matches, ms, nextToUpdate3, ip, iHighLimit, dictMode, rep, ll0, lengthToBeat, 5);",
          "new_line_content": "    default :",
          "content_same": false
        },
        {
          "line": 812,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(&newReps, rep, sizeof(newReps))",
          "new_text": null,
          "old_line_content": "            memcpy(&newReps, rep, sizeof(newReps));",
          "new_line_content": "            newReps.rep[0] = currentOffset;",
          "content_same": false
        },
        {
          "line": 834,
          "old_api": "RAWLOG",
          "new_api": null,
          "old_text": "RAWLOG(2, \"%4i,\", table[enb])",
          "new_text": null,
          "old_line_content": "        RAWLOG(2, \"%4i,\", table[enb]);",
          "new_line_content": "        (void)table;",
          "content_same": false
        },
        {
          "line": 859,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(cParams->targetLength, ZSTD_OPT_NUM -1)",
          "new_text": null,
          "old_line_content": "    U32 const sufficient_len = MIN(cParams->targetLength, ZSTD_OPT_NUM -1);",
          "new_line_content": "    const ZSTD_compressionParameters* const cParams = &ms->cParams;",
          "content_same": false
        },
        {
          "line": 868,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(5, \"ZSTD_compressBlock_opt_generic: current=%u, prefix=%u, nextToUpdate=%u\",\n                (U32)(ip - base), ms->window.dictLimit, ms->nextToUpdate)",
          "new_text": null,
          "old_line_content": "    DEBUGLOG(5, \"ZSTD_compressBlock_opt_generic: current=%u, prefix=%u, nextToUpdate=%u\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 869,
          "old_api": "U32)(ip - base)",
          "new_api": null,
          "old_text": "U32)(ip - base)",
          "new_text": null,
          "old_line_content": "                (U32)(ip - base), ms->window.dictLimit, ms->nextToUpdate);",
          "new_line_content": "    /* init */",
          "content_same": false
        },
        {
          "line": 879,
          "old_api": "U32)(ip - anchor)",
          "new_api": null,
          "old_text": "U32)(ip - anchor)",
          "new_text": null,
          "old_line_content": "        {   U32 const litlen = (U32)(ip - anchor);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 888,
          "old_api": "ZSTD_literalsContribution",
          "new_api": null,
          "old_text": "ZSTD_literalsContribution(anchor, litlen, optStatePtr, optLevel)",
          "new_text": null,
          "old_line_content": "            opt[0].price = ZSTD_literalsContribution(anchor, litlen, optStatePtr, optLevel);",
          "new_line_content": "            opt[0].mlen = 0;  /* means is_a_literal */",
          "content_same": false
        },
        {
          "line": 893,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(6, \"found %u matches of maxLength=%u and maxOffCode=%u at cPos=%u => start new series\",\n                            nbMatches, maxML, maxOffset, (U32)(ip-prefixStart))",
          "new_text": null,
          "old_line_content": "                DEBUGLOG(6, \"found %u matches of maxLength=%u and maxOffCode=%u at cPos=%u => start new series\",",
          "new_line_content": "            {   U32 const maxML = matches[nbMatches-1].len;",
          "content_same": false
        },
        {
          "line": 894,
          "old_api": "U32)(ip-prefixStart)",
          "new_api": null,
          "old_text": "U32)(ip-prefixStart)",
          "new_text": null,
          "old_line_content": "                            nbMatches, maxML, maxOffset, (U32)(ip-prefixStart));",
          "new_line_content": "                U32 const maxOffset = matches[nbMatches-1].off;",
          "content_same": false
        },
        {
          "line": 900,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(6, \"large match (%u>%u), immediate encoding\",\n                                maxML, sufficient_len)",
          "new_text": null,
          "old_line_content": "                    DEBUGLOG(6, \"large match (%u>%u), immediate encoding\",",
          "new_line_content": "                    lastSequence.mlen = maxML;",
          "content_same": false
        },
        {
          "line": 903,
          "old_api": "ZSTD_totalLen",
          "new_api": null,
          "old_text": "ZSTD_totalLen(lastSequence)",
          "new_text": null,
          "old_line_content": "                    last_pos = ZSTD_totalLen(lastSequence);",
          "new_line_content": "                                maxML, sufficient_len);",
          "content_same": false
        },
        {
          "line": 908,
          "old_api": "ZSTD_litLengthPrice",
          "new_api": null,
          "old_text": "ZSTD_litLengthPrice(0, optStatePtr, optLevel)",
          "new_text": null,
          "old_line_content": "            {   U32 const literalsPrice = opt[0].price + ZSTD_litLengthPrice(0, optStatePtr, optLevel);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 917,
          "old_api": "ZSTD_updateRep",
          "new_api": null,
          "old_text": "ZSTD_updateRep(rep, offset, ll0)",
          "new_text": null,
          "old_line_content": "                    repcodes_t const repHistory = ZSTD_updateRep(rep, offset, ll0);",
          "new_line_content": "                    U32 const offset = matches[matchNb].off;",
          "content_same": false
        },
        {
          "line": 922,
          "old_api": "ZSTD_fCost",
          "new_api": null,
          "old_text": "ZSTD_fCost(sequencePrice)",
          "new_text": null,
          "old_line_content": "                                    pos, ZSTD_fCost(sequencePrice));",
          "new_line_content": "                        U32 const sequencePrice = literalsPrice + matchPrice;",
          "content_same": false
        },
        {
          "line": 927,
          "old_api": "ZSTD_STATIC_ASSERT",
          "new_api": null,
          "old_text": "ZSTD_STATIC_ASSERT(sizeof(opt[pos].rep) == sizeof(repHistory))",
          "new_text": null,
          "old_line_content": "                        ZSTD_STATIC_ASSERT(sizeof(opt[pos].rep) == sizeof(repHistory));",
          "new_line_content": "                        opt[pos].litlen = litlen;",
          "content_same": false
        },
        {
          "line": 928,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(opt[pos].rep, &repHistory, sizeof(repHistory))",
          "new_text": null,
          "old_line_content": "                        memcpy(opt[pos].rep, &repHistory, sizeof(repHistory));",
          "new_line_content": "                        opt[pos].price = sequencePrice;",
          "content_same": false
        },
        {
          "line": 937,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(cur < ZSTD_OPT_NUM)",
          "new_text": null,
          "old_line_content": "            assert(cur < ZSTD_OPT_NUM);",
          "new_line_content": "        for (cur = 1; cur <= last_pos; cur++) {",
          "content_same": false
        },
        {
          "line": 938,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(7, \"cPos:%zi==rPos:%u\", inr-istart, cur)",
          "new_text": null,
          "old_line_content": "            DEBUGLOG(7, \"cPos:%zi==rPos:%u\", inr-istart, cur)",
          "new_line_content": "            const BYTE* const inr = ip + cur;",
          "content_same": false
        },
        {
          "line": 943,
          "old_api": "ZSTD_rawLiteralsCost",
          "new_api": null,
          "old_text": "ZSTD_rawLiteralsCost(ip+cur-1, 1, optStatePtr, optLevel)",
          "new_text": null,
          "old_line_content": "                                + ZSTD_rawLiteralsCost(ip+cur-1, 1, optStatePtr, optLevel)",
          "new_line_content": "            {   U32 const litlen = (opt[cur-1].mlen == 0) ? opt[cur-1].litlen + 1 : 1;",
          "content_same": false
        },
        {
          "line": 944,
          "old_api": "ZSTD_litLengthPrice",
          "new_api": null,
          "old_text": "ZSTD_litLengthPrice(litlen, optStatePtr, optLevel)",
          "new_text": null,
          "old_line_content": "                                + ZSTD_litLengthPrice(litlen, optStatePtr, optLevel)",
          "new_line_content": "                int const price = opt[cur-1].price",
          "content_same": false
        },
        {
          "line": 949,
          "old_api": "ZSTD_fCost",
          "new_api": null,
          "old_text": "ZSTD_fCost(opt[cur].price)",
          "new_text": null,
          "old_line_content": "                                inr-istart, cur, ZSTD_fCost(price), ZSTD_fCost(opt[cur].price), litlen,",
          "new_line_content": "                if (price <= opt[cur].price) {",
          "content_same": false
        },
        {
          "line": 955,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(opt[cur].rep, opt[cur-1].rep, sizeof(opt[cur].rep))",
          "new_text": null,
          "old_line_content": "                    memcpy(opt[cur].rep, opt[cur-1].rep, sizeof(opt[cur].rep));",
          "new_line_content": "                    opt[cur].litlen = litlen;",
          "content_same": false
        },
        {
          "line": 958,
          "old_api": "ZSTD_fCost",
          "new_api": null,
          "old_text": "ZSTD_fCost(opt[cur].price)",
          "new_text": null,
          "old_line_content": "                                inr-istart, cur, ZSTD_fCost(price), ZSTD_fCost(opt[cur].price),",
          "new_line_content": "                } else {",
          "content_same": false
        },
        {
          "line": 970,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(7, \"move to next rPos:%u : price is <=\", cur+1)",
          "new_text": null,
          "old_line_content": "                DEBUGLOG(7, \"move to next rPos:%u : price is <=\", cur+1);",
          "new_line_content": "            if ( (optLevel==0) /*static_test*/",
          "content_same": false
        },
        {
          "line": 977,
          "old_api": "ZSTD_litLengthPrice",
          "new_api": null,
          "old_text": "ZSTD_litLengthPrice(0, optStatePtr, optLevel)",
          "new_text": null,
          "old_line_content": "                U32 const basePrice = previousPrice + ZSTD_litLengthPrice(0, optStatePtr, optLevel);",
          "new_line_content": "                U32 const litlen = (opt[cur].mlen == 0) ? opt[cur].litlen : 0;",
          "content_same": false
        },
        {
          "line": 978,
          "old_api": "ZSTD_BtGetAllMatches",
          "new_api": null,
          "old_text": "ZSTD_BtGetAllMatches(matches, ms, &nextToUpdate3, inr, iend, dictMode, opt[cur].rep, ll0, minMatch)",
          "new_text": null,
          "old_line_content": "                U32 const nbMatches = ZSTD_BtGetAllMatches(matches, ms, &nextToUpdate3, inr, iend, dictMode, opt[cur].rep, ll0, minMatch);",
          "new_line_content": "                U32 const previousPrice = opt[cur].price;",
          "content_same": false
        },
        {
          "line": 981,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(7, \"rPos:%u : no match found\", cur)",
          "new_text": null,
          "old_line_content": "                    DEBUGLOG(7, \"rPos:%u : no match found\", cur);",
          "new_line_content": "                U32 matchNb;",
          "content_same": false
        },
        {
          "line": 986,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(7, \"cPos:%zi==rPos:%u, found %u matches, of maxLength=%u\",\n                                inr-istart, cur, nbMatches, maxML)",
          "new_text": null,
          "old_line_content": "                    DEBUGLOG(7, \"cPos:%zi==rPos:%u, found %u matches, of maxLength=%u\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 995,
          "old_api": "ZSTD_totalLen",
          "new_api": null,
          "old_text": "ZSTD_totalLen(lastSequence)",
          "new_text": null,
          "old_line_content": "                        last_pos = cur + ZSTD_totalLen(lastSequence);",
          "new_line_content": "                        lastSequence.litlen = litlen;",
          "content_same": false
        },
        {
          "line": 1003,
          "old_api": "ZSTD_updateRep",
          "new_api": null,
          "old_text": "ZSTD_updateRep(opt[cur].rep, offset, ll0)",
          "new_text": null,
          "old_line_content": "                    repcodes_t const repHistory = ZSTD_updateRep(opt[cur].rep, offset, ll0);",
          "new_line_content": "                for (matchNb = 0; matchNb < nbMatches; matchNb++) {",
          "content_same": false
        },
        {
          "line": 1008,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(7, \"testing match %u => offCode=%4u, mlen=%2u, llen=%2u\",\n                                matchNb, matches[matchNb].off, lastML, litlen)",
          "new_text": null,
          "old_line_content": "                    DEBUGLOG(7, \"testing match %u => offCode=%4u, mlen=%2u, llen=%2u\",",
          "new_line_content": "                    U32 mlen;",
          "content_same": false
        },
        {
          "line": 1013,
          "old_api": "ZSTD_getMatchPrice",
          "new_api": null,
          "old_text": "ZSTD_getMatchPrice(offset, mlen, optStatePtr, optLevel)",
          "new_text": null,
          "old_line_content": "                        int const price = basePrice + ZSTD_getMatchPrice(offset, mlen, optStatePtr, optLevel);",
          "new_line_content": "                    for (mlen = lastML; mlen >= startML; mlen--) {  /* scan downward */",
          "content_same": false
        },
        {
          "line": 1016,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(7, \"rPos:%u (ml=%2u) => new better price (%.2f<%.2f)\",\n                                        pos, mlen, ZSTD_fCost(price), ZSTD_fCost(opt[pos].price))",
          "new_text": null,
          "old_line_content": "                            DEBUGLOG(7, \"rPos:%u (ml=%2u) => new better price (%.2f<%.2f)\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1017,
          "old_api": "ZSTD_fCost",
          "new_api": null,
          "old_text": "ZSTD_fCost(opt[pos].price)",
          "new_text": null,
          "old_line_content": "                                        pos, mlen, ZSTD_fCost(price), ZSTD_fCost(opt[pos].price));",
          "new_line_content": "                        if ((pos > last_pos) || (price < opt[pos].price)) {",
          "content_same": false
        },
        {
          "line": 509,
          "old_api": "U32)(bestLength - 384)",
          "new_api": null,
          "old_text": "U32)(bestLength - 384)",
          "new_text": null,
          "old_line_content": "    if (bestLength > 384) return MIN(192, (U32)(bestLength - 384));   /* speed optimization */",
          "new_line_content": "    {   U32 positions = 0;",
          "content_same": false
        },
        {
          "line": 1023,
          "old_api": "ZSTD_STATIC_ASSERT",
          "new_api": null,
          "old_text": "ZSTD_STATIC_ASSERT(sizeof(opt[pos].rep) == sizeof(repHistory))",
          "new_text": null,
          "old_line_content": "                            ZSTD_STATIC_ASSERT(sizeof(opt[pos].rep) == sizeof(repHistory));",
          "new_line_content": "                            opt[pos].litlen = litlen;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 28,
      "total_additions": 104,
      "total_deletions": 103,
      "total_api_changes": 235
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 5,
        "api_related_lines": 235,
        "non_api_lines": 1,
        "non_api_line_numbers": [
          513
        ]
      }
    },
    "api_calls_before": 225,
    "api_calls_after": 226,
    "diff_info": {
      "added_lines": 5,
      "removed_lines": 3,
      "total_diff_lines": 20
    }
  }
}
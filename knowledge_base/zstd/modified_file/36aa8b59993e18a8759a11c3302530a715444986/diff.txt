diff --git a/lib/decompress/zstd_decompress.c b/lib/decompress/zstd_decompress.c
index 436f817a..bc8f9385 100644
--- a/lib/decompress/zstd_decompress.c
+++ b/lib/decompress/zstd_decompress.c
@@ -1281,7 +1281,7 @@ static size_t ZSTD_decompressSequencesLong(
     int nbSeq;
 
     unsigned long long const regularWindowSizeMax = 1ULL << STREAM_ACCUMULATOR_MIN;
-    ZSTD_longOffset_e const isLongOffset = (ZSTD_longOffset_e)(dctx->fParams.windowSize >= regularWindowSizeMax);
+    ZSTD_longOffset_e const isLongOffset = (ZSTD_longOffset_e)(MEM_32bits() && (dctx->fParams.windowSize >= regularWindowSizeMax));
     ZSTD_STATIC_ASSERT(ZSTD_lo_isLongOffset == 1);
 
     /* Build Decoding Tables */

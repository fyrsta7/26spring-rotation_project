{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/zstd/modified_file/35932ab2f1e129dce0d19bfa82787dc4dc262eed",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/zstd/modified_file/35932ab2f1e129dce0d19bfa82787dc4dc262eed/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/zstd/modified_file/35932ab2f1e129dce0d19bfa82787dc4dc262eed/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/zstd/modified_file/35932ab2f1e129dce0d19bfa82787dc4dc262eed/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": true,
    "api_changes": {
      "replacements": [
        {
          "line": 403,
          "old_api": "ZSTD_hashPtr",
          "new_api": "assert",
          "old_text": "ZSTD_hashPtr(base+current0+2, hlog, mls)",
          "new_text": "assert(base+current0+2 > istart)",
          "old_line_content": "        hashTable[ZSTD_hashPtr(base+current0+2, hlog, mls)] = current0+2;  /* here because current+2 could be > iend-8 */",
          "new_line_content": "        assert(base+current0+2 > istart);  /* check base overflow */",
          "content_same": false
        },
        {
          "line": 404,
          "old_api": "U32)(ip0-2-base)",
          "new_api": "ZSTD_hashPtr",
          "old_text": "U32)(ip0-2-base)",
          "new_text": "ZSTD_hashPtr(base+current0+2, hlog, mls)",
          "old_line_content": "        hashTable[ZSTD_hashPtr(ip0-2, hlog, mls)] = (U32)(ip0-2-base);",
          "new_line_content": "        hashTable[ZSTD_hashPtr(base+current0+2, hlog, mls)] = current0+2;  /* here because current+2 could be > iend-8 */",
          "content_same": false
        },
        {
          "line": 471,
          "old_api": "U32)(ip - prefixStart + dictEnd - dictStart)",
          "new_api": "U32)(dictEnd - dictBase)",
          "old_text": "U32)(ip - prefixStart + dictEnd - dictStart)",
          "new_text": "U32)(dictEnd - dictBase)",
          "old_line_content": "    const U32 dictAndPrefixLength  = (U32)(ip - prefixStart + dictEnd - dictStart);",
          "new_line_content": "    const U32 dictIndexDelta       = prefixStartIndex - (U32)(dictEnd - dictBase);",
          "content_same": false
        },
        {
          "line": 478,
          "old_api": "assert",
          "new_api": "U32)((size_t)(ip - base) + srcSize)",
          "old_text": "assert(endIndex - prefixStartIndex <= maxDistance)",
          "new_text": "U32)((size_t)(ip - base) + srcSize)",
          "old_line_content": "    assert(endIndex - prefixStartIndex <= maxDistance);",
          "new_line_content": "    const U32 endIndex = (U32)((size_t)(ip - base) + srcSize);",
          "content_same": false
        },
        {
          "line": 497,
          "old_api": "U32)(ip-base)",
          "new_api": "ZSTD_hashPtr",
          "old_text": "U32)(ip-base)",
          "new_text": "ZSTD_hashPtr(ip, hlog, mls)",
          "old_line_content": "        U32 const curr = (U32)(ip-base);",
          "new_line_content": "        size_t const h = ZSTD_hashPtr(ip, hlog, mls);",
          "content_same": false
        },
        {
          "line": 507,
          "old_api": "MEM_read32",
          "new_api": "U32)((prefixStartIndex-1) - repIndex)",
          "old_text": "MEM_read32(ip+1)",
          "new_text": "U32)((prefixStartIndex-1) - repIndex)",
          "old_line_content": "          && (MEM_read32(repMatch) == MEM_read32(ip+1)) ) {",
          "new_line_content": "        if ( ((U32)((prefixStartIndex-1) - repIndex) >= 3) /* intentional underflow : ensure repIndex isn't overlapping dict + prefix */",
          "content_same": false
        },
        {
          "line": 518,
          "old_api": "assert",
          "new_api": "MEM_read32",
          "old_text": "assert(stepSize >= 1)",
          "new_text": "MEM_read32(ip)",
          "old_line_content": "                assert(stepSize >= 1);",
          "new_line_content": "                MEM_read32(dictMatch) != MEM_read32(ip)) {",
          "content_same": false
        },
        {
          "line": 524,
          "old_api": "ZSTD_count_2segments",
          "new_api": "U32)(curr-dictMatchIndex-dictIndexDelta)",
          "old_text": "ZSTD_count_2segments(ip+4, dictMatch+4, iend, dictEnd, prefixStart)",
          "new_text": "U32)(curr-dictMatchIndex-dictIndexDelta)",
          "old_line_content": "                mLength = ZSTD_count_2segments(ip+4, dictMatch+4, iend, dictEnd, prefixStart) + 4;",
          "new_line_content": "                U32 const offset = (U32)(curr-dictMatchIndex-dictIndexDelta);",
          "content_same": false
        },
        {
          "line": 541,
          "old_api": "ZSTD_count",
          "new_api": "U32)(ip-match)",
          "old_text": "ZSTD_count(ip+4, match+4, iend)",
          "new_text": "U32)(ip-match)",
          "old_line_content": "            mLength = ZSTD_count(ip+4, match+4, iend) + 4;",
          "new_line_content": "            U32 const offset = (U32)(ip-match);",
          "content_same": false
        },
        {
          "line": 556,
          "old_api": "ZSTD_hashPtr",
          "new_api": "assert",
          "old_text": "ZSTD_hashPtr(base+curr+2, hlog, mls)",
          "new_text": "assert(base+curr+2 > istart)",
          "old_line_content": "            hashTable[ZSTD_hashPtr(base+curr+2, hlog, mls)] = curr+2;  /* here because curr+2 could be > iend-8 */",
          "new_line_content": "            assert(base+curr+2 > istart);  /* check base overflow */",
          "content_same": false
        },
        {
          "line": 557,
          "old_api": "U32)(ip-2-base)",
          "new_api": "ZSTD_hashPtr",
          "old_text": "U32)(ip-2-base)",
          "new_text": "ZSTD_hashPtr(base+curr+2, hlog, mls)",
          "old_line_content": "            hashTable[ZSTD_hashPtr(ip-2, hlog, mls)] = (U32)(ip-2-base);",
          "new_line_content": "            hashTable[ZSTD_hashPtr(base+curr+2, hlog, mls)] = curr+2;  /* here because curr+2 could be > iend-8 */",
          "content_same": false
        },
        {
          "line": 567,
          "old_api": "MEM_read32",
          "new_api": "U32)((prefixStartIndex-1) - (U32)repIndex2)",
          "old_text": "MEM_read32(ip)",
          "new_text": "U32)((prefixStartIndex-1) - (U32)repIndex2)",
          "old_line_content": "                   && (MEM_read32(repMatch2) == MEM_read32(ip)) ) {",
          "new_line_content": "                if ( ((U32)((prefixStartIndex-1) - (U32)repIndex2) >= 3 /* intentional overflow */)",
          "content_same": false
        },
        {
          "line": 572,
          "old_api": "ZSTD_hashPtr",
          "new_api": "ZSTD_storeSeq",
          "old_text": "ZSTD_hashPtr(ip, hlog, mls)",
          "new_text": "ZSTD_storeSeq(seqStore, 0, anchor, iend, 0, repLength2-MINMATCH)",
          "old_line_content": "                    hashTable[ZSTD_hashPtr(ip, hlog, mls)] = current2;",
          "new_line_content": "                    ZSTD_storeSeq(seqStore, 0, anchor, iend, 0, repLength2-MINMATCH);",
          "content_same": false
        },
        {
          "line": 626,
          "old_api": "ZSTD_getLowestMatchIndex",
          "new_api": "U32)((size_t)(istart - base) + srcSize)",
          "old_text": "ZSTD_getLowestMatchIndex(ms, endIndex, cParams->windowLog)",
          "new_text": "U32)((size_t)(istart - base) + srcSize)",
          "old_line_content": "    const U32   lowLimit = ZSTD_getLowestMatchIndex(ms, endIndex, cParams->windowLog);",
          "new_line_content": "    const U32   endIndex = (U32)((size_t)(istart - base) + srcSize);",
          "content_same": false
        },
        {
          "line": 668,
          "old_api": "assert",
          "new_api": "MEM_read32",
          "old_text": "assert(stepSize >= 1)",
          "new_text": "MEM_read32(ip)",
          "old_line_content": "                assert(stepSize >= 1);",
          "new_line_content": "                 (MEM_read32(match) != MEM_read32(ip)) ) {",
          "content_same": false
        },
        {
          "line": 686,
          "old_api": "U32)(ip-2-base)",
          "new_api": "ZSTD_hashPtr",
          "old_text": "U32)(ip-2-base)",
          "new_text": "ZSTD_hashPtr(base+curr+2, hlog, mls)",
          "old_line_content": "            hashTable[ZSTD_hashPtr(ip-2, hlog, mls)] = (U32)(ip-2-base);",
          "new_line_content": "            hashTable[ZSTD_hashPtr(base+curr+2, hlog, mls)] = curr+2;",
          "content_same": false
        },
        {
          "line": 693,
          "old_api": "MEM_read32",
          "new_api": "U32)((prefixStartIndex-1) - repIndex2)",
          "old_text": "MEM_read32(ip)",
          "new_text": "U32)((prefixStartIndex-1) - repIndex2)",
          "old_line_content": "                   && (MEM_read32(repMatch2) == MEM_read32(ip)) ) {",
          "new_line_content": "                if ( (((U32)((prefixStartIndex-1) - repIndex2) >= 3) & (offset_2 <= curr - dictStartIndex))  /* intentional overflow */",
          "content_same": false
        },
        {
          "line": 698,
          "old_api": "ZSTD_hashPtr",
          "new_api": "ZSTD_storeSeq",
          "old_text": "ZSTD_hashPtr(ip, hlog, mls)",
          "new_text": "ZSTD_storeSeq(seqStore, 0 /*litlen*/, anchor, iend, 0 /*offcode*/, repLength2-MINMATCH)",
          "old_line_content": "                    hashTable[ZSTD_hashPtr(ip, hlog, mls)] = current2;",
          "new_line_content": "                    ZSTD_storeSeq(seqStore, 0 /*litlen*/, anchor, iend, 0 /*offcode*/, repLength2-MINMATCH);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 512,
          "old_api": null,
          "new_api": "ZSTD_storeSeq",
          "old_text": null,
          "new_text": "ZSTD_storeSeq(seqStore, (size_t)(ip-anchor), anchor, iend, 0, mLength-MINMATCH)",
          "old_line_content": "        } else if ( (matchIndex <= prefixStartIndex) ) {",
          "new_line_content": "            ZSTD_storeSeq(seqStore, (size_t)(ip-anchor), anchor, iend, 0, mLength-MINMATCH);",
          "content_same": false
        },
        {
          "line": 514,
          "old_api": null,
          "new_api": "ZSTD_hashPtr",
          "old_text": null,
          "new_text": "ZSTD_hashPtr(ip, dictHLog, mls)",
          "old_line_content": "            U32 const dictMatchIndex = dictHashTable[dictHash];",
          "new_line_content": "            size_t const dictHash = ZSTD_hashPtr(ip, dictHLog, mls);",
          "content_same": false
        },
        {
          "line": 642,
          "old_api": null,
          "new_api": "ZSTD_compressBlock_fast_generic_pipelined",
          "old_text": null,
          "new_text": "ZSTD_compressBlock_fast_generic_pipelined(ms, seqStore, rep, src, srcSize, mls)",
          "old_line_content": "",
          "new_line_content": "        return ZSTD_compressBlock_fast_generic_pipelined(ms, seqStore, rep, src, srcSize, mls);",
          "content_same": false
        },
        {
          "line": 388,
          "old_api": null,
          "new_api": "ZSTD_count",
          "old_text": null,
          "new_text": "ZSTD_count(ip0 + mLength, match0 + mLength, iend)",
          "old_line_content": "",
          "new_line_content": "    mLength += ZSTD_count(ip0 + mLength, match0 + mLength, iend);",
          "content_same": false
        },
        {
          "line": 646,
          "old_api": null,
          "new_api": "ZSTD_hashPtr",
          "old_text": null,
          "new_text": "ZSTD_hashPtr(ip, hlog, mls)",
          "old_line_content": "        const U32    matchIndex = hashTable[h];",
          "new_line_content": "        const size_t h = ZSTD_hashPtr(ip, hlog, mls);",
          "content_same": false
        },
        {
          "line": 519,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(stepSize >= 1)",
          "old_line_content": "                ip += ((ip-anchor) >> kSearchStrength) + stepSize;",
          "new_line_content": "                assert(stepSize >= 1);",
          "content_same": false
        },
        {
          "line": 390,
          "old_api": null,
          "new_api": "ZSTD_storeSeq",
          "old_text": null,
          "new_text": "ZSTD_storeSeq(seqStore, (size_t)(ip0 - anchor), anchor, iend, offcode, mLength - MINMATCH)",
          "old_line_content": "",
          "new_line_content": "    ZSTD_storeSeq(seqStore, (size_t)(ip0 - anchor), anchor, iend, offcode, mLength - MINMATCH);",
          "content_same": false
        },
        {
          "line": 510,
          "old_api": null,
          "new_api": "ZSTD_count_2segments",
          "old_text": null,
          "new_text": "ZSTD_count_2segments(ip+1+4, repMatch+4, iend, repMatchEnd, prefixStart)",
          "old_line_content": "            ip++;",
          "new_line_content": "            mLength = ZSTD_count_2segments(ip+1+4, repMatch+4, iend, repMatchEnd, prefixStart) + 4;",
          "content_same": false
        },
        {
          "line": 650,
          "old_api": null,
          "new_api": "U32)(ip-base)",
          "old_text": null,
          "new_text": "U32)(ip-base)",
          "old_line_content": "        const U32    repIndex = curr + 1 - offset_1;",
          "new_line_content": "        const U32    curr = (U32)(ip-base);",
          "content_same": false
        },
        {
          "line": 525,
          "old_api": null,
          "new_api": "ZSTD_count_2segments",
          "old_text": null,
          "new_text": "ZSTD_count_2segments(ip+4, dictMatch+4, iend, dictEnd, prefixStart)",
          "old_line_content": "                while (((ip>anchor) & (dictMatch>dictStart))",
          "new_line_content": "                mLength = ZSTD_count_2segments(ip+4, dictMatch+4, iend, dictEnd, prefixStart) + 4;",
          "content_same": false
        },
        {
          "line": 655,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(7, \"offset_1 = %u , curr = %u\", offset_1, curr)",
          "old_line_content": "",
          "new_line_content": "        DEBUGLOG(7, \"offset_1 = %u , curr = %u\", offset_1, curr);",
          "content_same": false
        },
        {
          "line": 657,
          "old_api": null,
          "new_api": "U32)((prefixStartIndex-1) - repIndex)",
          "old_text": null,
          "new_text": "U32)((prefixStartIndex-1) - repIndex)",
          "old_line_content": "             & (offset_1 <= curr+1 - dictStartIndex) ) /* note: we are searching at curr+1 */",
          "new_line_content": "        if ( ( ((U32)((prefixStartIndex-1) - repIndex) >= 3) /* intentional underflow */",
          "content_same": false
        },
        {
          "line": 659,
          "old_api": null,
          "new_api": "MEM_read32",
          "old_text": null,
          "new_text": "MEM_read32(ip+1)",
          "old_line_content": "            const BYTE* const repMatchEnd = repIndex < prefixStartIndex ? dictEnd : iend;",
          "new_line_content": "           && (MEM_read32(repMatch) == MEM_read32(ip+1)) ) {",
          "content_same": false
        },
        {
          "line": 532,
          "old_api": null,
          "new_api": "ZSTD_storeSeq",
          "old_text": null,
          "new_text": "ZSTD_storeSeq(seqStore, (size_t)(ip-anchor), anchor, iend, offset + ZSTD_REP_MOVE, mLength-MINMATCH)",
          "old_line_content": "            }",
          "new_line_content": "                ZSTD_storeSeq(seqStore, (size_t)(ip-anchor), anchor, iend, offset + ZSTD_REP_MOVE, mLength-MINMATCH);",
          "content_same": false
        },
        {
          "line": 661,
          "old_api": null,
          "new_api": "ZSTD_count_2segments",
          "old_text": null,
          "new_text": "ZSTD_count_2segments(ip+1 +4, repMatch +4, iend, repMatchEnd, prefixStart)",
          "old_line_content": "            ip++;",
          "new_line_content": "            size_t const rLength = ZSTD_count_2segments(ip+1 +4, repMatch +4, iend, repMatchEnd, prefixStart) + 4;",
          "content_same": false
        },
        {
          "line": 534,
          "old_api": null,
          "new_api": "MEM_read32",
          "old_text": null,
          "new_text": "MEM_read32(ip)",
          "old_line_content": "            /* it's not a match, and we're not going to check the dictionary */",
          "new_line_content": "        } else if (MEM_read32(match) != MEM_read32(ip)) {",
          "content_same": false
        },
        {
          "line": 663,
          "old_api": null,
          "new_api": "ZSTD_storeSeq",
          "old_text": null,
          "new_text": "ZSTD_storeSeq(seqStore, (size_t)(ip-anchor), anchor, iend, 0, rLength-MINMATCH)",
          "old_line_content": "            ip += rLength;",
          "new_line_content": "            ZSTD_storeSeq(seqStore, (size_t)(ip-anchor), anchor, iend, 0, rLength-MINMATCH);",
          "content_same": false
        },
        {
          "line": 536,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(stepSize >= 1)",
          "old_line_content": "            ip += ((ip-anchor) >> kSearchStrength) + stepSize;",
          "new_line_content": "            assert(stepSize >= 1);",
          "content_same": false
        },
        {
          "line": 405,
          "old_api": null,
          "new_api": "U32)(ip0-2-base)",
          "old_text": null,
          "new_text": "U32)(ip0-2-base)",
          "old_line_content": "",
          "new_line_content": "        hashTable[ZSTD_hashPtr(ip0-2, hlog, mls)] = (U32)(ip0-2-base);",
          "content_same": false
        },
        {
          "line": 408,
          "old_api": null,
          "new_api": "MEM_read32",
          "old_text": null,
          "new_text": "MEM_read32(ip0 - rep_offset2)",
          "old_line_content": "                /* store sequence */",
          "new_line_content": "            while ( (ip0 <= ilimit) && (MEM_read32(ip0) == MEM_read32(ip0 - rep_offset2)) ) {",
          "content_same": false
        },
        {
          "line": 410,
          "old_api": null,
          "new_api": "ZSTD_count",
          "old_text": null,
          "new_text": "ZSTD_count(ip0+4, ip0+4-rep_offset2, iend)",
          "old_line_content": "                { U32 const tmpOff = rep_offset2; rep_offset2 = rep_offset1; rep_offset1 = tmpOff; } /* swap rep_offset2 <=> rep_offset1 */",
          "new_line_content": "                size_t const rLength = ZSTD_count(ip0+4, ip0+4-rep_offset2, iend) + 4;",
          "content_same": false
        },
        {
          "line": 412,
          "old_api": null,
          "new_api": "U32)(ip0-base)",
          "old_text": null,
          "new_text": "U32)(ip0-base)",
          "old_line_content": "                ip0 += rLength;",
          "new_line_content": "                hashTable[ZSTD_hashPtr(ip0, hlog, mls)] = (U32)(ip0-base);",
          "content_same": false
        },
        {
          "line": 669,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(stepSize >= 1)",
          "old_line_content": "                ip += ((ip-anchor) >> kSearchStrength) + stepSize;",
          "new_line_content": "                assert(stepSize >= 1);",
          "content_same": false
        },
        {
          "line": 542,
          "old_api": null,
          "new_api": "ZSTD_count",
          "old_text": null,
          "new_text": "ZSTD_count(ip+4, match+4, iend)",
          "old_line_content": "            while (((ip>anchor) & (match>prefixStart))",
          "new_line_content": "            mLength = ZSTD_count(ip+4, match+4, iend) + 4;",
          "content_same": false
        },
        {
          "line": 414,
          "old_api": null,
          "new_api": "ZSTD_storeSeq",
          "old_text": null,
          "new_text": "ZSTD_storeSeq(seqStore, 0 /*litLen*/, anchor, iend, 0 /*offCode*/, rLength-MINMATCH)",
          "old_line_content": "                anchor = ip0;",
          "new_line_content": "                ZSTD_storeSeq(seqStore, 0 /*litLen*/, anchor, iend, 0 /*offCode*/, rLength-MINMATCH);",
          "content_same": false
        },
        {
          "line": 547,
          "old_api": null,
          "new_api": "ZSTD_storeSeq",
          "old_text": null,
          "new_text": "ZSTD_storeSeq(seqStore, (size_t)(ip-anchor), anchor, iend, offset + ZSTD_REP_MOVE, mLength-MINMATCH)",
          "old_line_content": "        }",
          "new_line_content": "            ZSTD_storeSeq(seqStore, (size_t)(ip-anchor), anchor, iend, offset + ZSTD_REP_MOVE, mLength-MINMATCH);",
          "content_same": false
        },
        {
          "line": 676,
          "old_api": null,
          "new_api": "ZSTD_count_2segments",
          "old_text": null,
          "new_text": "ZSTD_count_2segments(ip+4, match+4, iend, matchEnd, prefixStart)",
          "old_line_content": "                while (((ip>anchor) & (match>lowMatchPtr)) && (ip[-1] == match[-1])) { ip--; match--; mLength++; }   /* catch up */",
          "new_line_content": "                size_t mLength = ZSTD_count_2segments(ip+4, match+4, iend, matchEnd, prefixStart) + 4;",
          "content_same": false
        },
        {
          "line": 679,
          "old_api": null,
          "new_api": "ZSTD_storeSeq",
          "old_text": null,
          "new_text": "ZSTD_storeSeq(seqStore, (size_t)(ip-anchor), anchor, iend, offset + ZSTD_REP_MOVE, mLength-MINMATCH)",
          "old_line_content": "                ip += mLength;",
          "new_line_content": "                ZSTD_storeSeq(seqStore, (size_t)(ip-anchor), anchor, iend, offset + ZSTD_REP_MOVE, mLength-MINMATCH);",
          "content_same": false
        },
        {
          "line": 428,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(ms->dictMatchState == NULL)",
          "old_line_content": "    switch(mls)",
          "new_line_content": "    assert(ms->dictMatchState == NULL);",
          "content_same": false
        },
        {
          "line": 558,
          "old_api": null,
          "new_api": "U32)(ip-2-base)",
          "old_text": null,
          "new_text": "U32)(ip-2-base)",
          "old_line_content": "",
          "new_line_content": "            hashTable[ZSTD_hashPtr(ip-2, hlog, mls)] = (U32)(ip-2-base);",
          "content_same": false
        },
        {
          "line": 687,
          "old_api": null,
          "new_api": "U32)(ip-2-base)",
          "old_text": null,
          "new_text": "U32)(ip-2-base)",
          "old_line_content": "            /* check immediate repcode */",
          "new_line_content": "            hashTable[ZSTD_hashPtr(ip-2, hlog, mls)] = (U32)(ip-2-base);",
          "content_same": false
        },
        {
          "line": 433,
          "old_api": null,
          "new_api": "ZSTD_compressBlock_fast_generic_pipelined",
          "old_text": null,
          "new_text": "ZSTD_compressBlock_fast_generic_pipelined(ms, seqStore, rep, src, srcSize, 4)",
          "old_line_content": "    case 5 :",
          "new_line_content": "        return ZSTD_compressBlock_fast_generic_pipelined(ms, seqStore, rep, src, srcSize, 4);",
          "content_same": false
        },
        {
          "line": 562,
          "old_api": null,
          "new_api": "U32)(ip-base)",
          "old_text": null,
          "new_text": "U32)(ip-base)",
          "old_line_content": "                U32 const repIndex2 = current2 - offset_2;",
          "new_line_content": "                U32 const current2 = (U32)(ip-base);",
          "content_same": false
        },
        {
          "line": 690,
          "old_api": null,
          "new_api": "U32)(ip-base)",
          "old_text": null,
          "new_text": "U32)(ip-base)",
          "old_line_content": "                U32 const repIndex2 = current2 - offset_2;",
          "new_line_content": "                U32 const current2 = (U32)(ip-base);",
          "content_same": false
        },
        {
          "line": 435,
          "old_api": null,
          "new_api": "ZSTD_compressBlock_fast_generic_pipelined",
          "old_text": null,
          "new_text": "ZSTD_compressBlock_fast_generic_pipelined(ms, seqStore, rep, src, srcSize, 5)",
          "old_line_content": "    case 6 :",
          "new_line_content": "        return ZSTD_compressBlock_fast_generic_pipelined(ms, seqStore, rep, src, srcSize, 5);",
          "content_same": false
        },
        {
          "line": 437,
          "old_api": null,
          "new_api": "ZSTD_compressBlock_fast_generic_pipelined",
          "old_text": null,
          "new_text": "ZSTD_compressBlock_fast_generic_pipelined(ms, seqStore, rep, src, srcSize, 6)",
          "old_line_content": "    case 7 :",
          "new_line_content": "        return ZSTD_compressBlock_fast_generic_pipelined(ms, seqStore, rep, src, srcSize, 6);",
          "content_same": false
        },
        {
          "line": 694,
          "old_api": null,
          "new_api": "MEM_read32",
          "old_text": null,
          "new_text": "MEM_read32(ip)",
          "old_line_content": "                    const BYTE* const repEnd2 = repIndex2 < prefixStartIndex ? dictEnd : iend;",
          "new_line_content": "                   && (MEM_read32(repMatch2) == MEM_read32(ip)) ) {",
          "content_same": false
        },
        {
          "line": 439,
          "old_api": null,
          "new_api": "ZSTD_compressBlock_fast_generic_pipelined",
          "old_text": null,
          "new_text": "ZSTD_compressBlock_fast_generic_pipelined(ms, seqStore, rep, src, srcSize, 7)",
          "old_line_content": "    }",
          "new_line_content": "        return ZSTD_compressBlock_fast_generic_pipelined(ms, seqStore, rep, src, srcSize, 7);",
          "content_same": false
        },
        {
          "line": 568,
          "old_api": null,
          "new_api": "MEM_read32",
          "old_text": null,
          "new_text": "MEM_read32(ip)",
          "old_line_content": "                    const BYTE* const repEnd2 = repIndex2 < prefixStartIndex ? dictEnd : iend;",
          "new_line_content": "                   && (MEM_read32(repMatch2) == MEM_read32(ip)) ) {",
          "content_same": false
        },
        {
          "line": 696,
          "old_api": null,
          "new_api": "ZSTD_count_2segments",
          "old_text": null,
          "new_text": "ZSTD_count_2segments(ip+4, repMatch2+4, iend, repEnd2, prefixStart)",
          "old_line_content": "                    { U32 const tmpOffset = offset_2; offset_2 = offset_1; offset_1 = tmpOffset; }  /* swap offset_2 <=> offset_1 */",
          "new_line_content": "                    size_t const repLength2 = ZSTD_count_2segments(ip+4, repMatch2+4, iend, repEnd2, prefixStart) + 4;",
          "content_same": false
        },
        {
          "line": 570,
          "old_api": null,
          "new_api": "ZSTD_count_2segments",
          "old_text": null,
          "new_text": "ZSTD_count_2segments(ip+4, repMatch2+4, iend, repEnd2, prefixStart)",
          "old_line_content": "                    U32 tmpOffset = offset_2; offset_2 = offset_1; offset_1 = tmpOffset;   /* swap offset_2 <=> offset_1 */",
          "new_line_content": "                    size_t const repLength2 = ZSTD_count_2segments(ip+4, repMatch2+4, iend, repEnd2, prefixStart) + 4;",
          "content_same": false
        },
        {
          "line": 699,
          "old_api": null,
          "new_api": "ZSTD_hashPtr",
          "old_text": null,
          "new_text": "ZSTD_hashPtr(ip, hlog, mls)",
          "old_line_content": "                    ip += repLength2;",
          "new_line_content": "                    hashTable[ZSTD_hashPtr(ip, hlog, mls)] = current2;",
          "content_same": false
        },
        {
          "line": 573,
          "old_api": null,
          "new_api": "ZSTD_hashPtr",
          "old_text": null,
          "new_text": "ZSTD_hashPtr(ip, hlog, mls)",
          "old_line_content": "                    ip += repLength2;",
          "new_line_content": "                    hashTable[ZSTD_hashPtr(ip, hlog, mls)] = current2;",
          "content_same": false
        },
        {
          "line": 596,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(ms->dictMatchState != NULL)",
          "old_line_content": "    switch(mls)",
          "new_line_content": "    assert(ms->dictMatchState != NULL);",
          "content_same": false
        },
        {
          "line": 725,
          "old_api": null,
          "new_api": "ZSTD_compressBlock_fast_extDict_generic",
          "old_text": null,
          "new_text": "ZSTD_compressBlock_fast_extDict_generic(ms, seqStore, rep, src, srcSize, 4)",
          "old_line_content": "    case 5 :",
          "new_line_content": "        return ZSTD_compressBlock_fast_extDict_generic(ms, seqStore, rep, src, srcSize, 4);",
          "content_same": false
        },
        {
          "line": 340,
          "old_api": null,
          "new_api": "PREFETCH_L1",
          "old_text": null,
          "new_text": "PREFETCH_L1(ip1 + 64)",
          "old_line_content": "                step++;",
          "new_line_content": "                PREFETCH_L1(ip1 + 64);",
          "content_same": false
        },
        {
          "line": 727,
          "old_api": null,
          "new_api": "ZSTD_compressBlock_fast_extDict_generic",
          "old_text": null,
          "new_text": "ZSTD_compressBlock_fast_extDict_generic(ms, seqStore, rep, src, srcSize, 5)",
          "old_line_content": "    case 6 :",
          "new_line_content": "        return ZSTD_compressBlock_fast_extDict_generic(ms, seqStore, rep, src, srcSize, 5);",
          "content_same": false
        },
        {
          "line": 472,
          "old_api": null,
          "new_api": "U32)(ip - prefixStart + dictEnd - dictStart)",
          "old_text": null,
          "new_text": "U32)(ip - prefixStart + dictEnd - dictStart)",
          "old_line_content": "    const U32 dictHLog             = dictCParams->hashLog;",
          "new_line_content": "    const U32 dictAndPrefixLength  = (U32)(ip - prefixStart + dictEnd - dictStart);",
          "content_same": false
        },
        {
          "line": 601,
          "old_api": null,
          "new_api": "ZSTD_compressBlock_fast_dictMatchState_generic",
          "old_text": null,
          "new_text": "ZSTD_compressBlock_fast_dictMatchState_generic(ms, seqStore, rep, src, srcSize, 4)",
          "old_line_content": "    case 5 :",
          "new_line_content": "        return ZSTD_compressBlock_fast_dictMatchState_generic(ms, seqStore, rep, src, srcSize, 4);",
          "content_same": false
        },
        {
          "line": 729,
          "old_api": null,
          "new_api": "ZSTD_compressBlock_fast_extDict_generic",
          "old_text": null,
          "new_text": "ZSTD_compressBlock_fast_extDict_generic(ms, seqStore, rep, src, srcSize, 6)",
          "old_line_content": "    case 7 :",
          "new_line_content": "        return ZSTD_compressBlock_fast_extDict_generic(ms, seqStore, rep, src, srcSize, 6);",
          "content_same": false
        },
        {
          "line": 603,
          "old_api": null,
          "new_api": "ZSTD_compressBlock_fast_dictMatchState_generic",
          "old_text": null,
          "new_text": "ZSTD_compressBlock_fast_dictMatchState_generic(ms, seqStore, rep, src, srcSize, 5)",
          "old_line_content": "    case 6 :",
          "new_line_content": "        return ZSTD_compressBlock_fast_dictMatchState_generic(ms, seqStore, rep, src, srcSize, 5);",
          "content_same": false
        },
        {
          "line": 731,
          "old_api": null,
          "new_api": "ZSTD_compressBlock_fast_extDict_generic",
          "old_text": null,
          "new_text": "ZSTD_compressBlock_fast_extDict_generic(ms, seqStore, rep, src, srcSize, 7)",
          "old_line_content": "    }",
          "new_line_content": "        return ZSTD_compressBlock_fast_extDict_generic(ms, seqStore, rep, src, srcSize, 7);",
          "content_same": false
        },
        {
          "line": 605,
          "old_api": null,
          "new_api": "ZSTD_compressBlock_fast_dictMatchState_generic",
          "old_text": null,
          "new_text": "ZSTD_compressBlock_fast_dictMatchState_generic(ms, seqStore, rep, src, srcSize, 6)",
          "old_line_content": "    case 7 :",
          "new_line_content": "        return ZSTD_compressBlock_fast_dictMatchState_generic(ms, seqStore, rep, src, srcSize, 6);",
          "content_same": false
        },
        {
          "line": 607,
          "old_api": null,
          "new_api": "ZSTD_compressBlock_fast_dictMatchState_generic",
          "old_text": null,
          "new_text": "ZSTD_compressBlock_fast_dictMatchState_generic(ms, seqStore, rep, src, srcSize, 7)",
          "old_line_content": "    }",
          "new_line_content": "        return ZSTD_compressBlock_fast_dictMatchState_generic(ms, seqStore, rep, src, srcSize, 7);",
          "content_same": false
        },
        {
          "line": 479,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(endIndex - prefixStartIndex <= maxDistance)",
          "old_line_content": "    (void)maxDistance; (void)endIndex;   /* these variables are not used when assert() is disabled */",
          "new_line_content": "    assert(endIndex - prefixStartIndex <= maxDistance);",
          "content_same": false
        },
        {
          "line": 484,
          "old_api": null,
          "new_api": "U32)(dictEnd - dictBase)",
          "old_text": null,
          "new_text": "U32)(dictEnd - dictBase)",
          "old_line_content": "",
          "new_line_content": "    assert(prefixStartIndex >= (U32)(dictEnd - dictBase));",
          "content_same": false
        },
        {
          "line": 487,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(5, \"ZSTD_compressBlock_fast_dictMatchState_generic\")",
          "old_line_content": "    ip += (dictAndPrefixLength == 0);",
          "new_line_content": "    DEBUGLOG(5, \"ZSTD_compressBlock_fast_dictMatchState_generic\");",
          "content_same": false
        },
        {
          "line": 492,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(offset_2 <= dictAndPrefixLength)",
          "old_line_content": "",
          "new_line_content": "    assert(offset_2 <= dictAndPrefixLength);",
          "content_same": false
        },
        {
          "line": 498,
          "old_api": null,
          "new_api": "U32)(ip-base)",
          "old_text": null,
          "new_text": "U32)(ip-base)",
          "old_line_content": "        U32 const matchIndex = hashTable[h];",
          "new_line_content": "        U32 const curr = (U32)(ip-base);",
          "content_same": false
        },
        {
          "line": 627,
          "old_api": null,
          "new_api": "ZSTD_getLowestMatchIndex",
          "old_text": null,
          "new_text": "ZSTD_getLowestMatchIndex(ms, endIndex, cParams->windowLog)",
          "old_line_content": "    const U32   dictStartIndex = lowLimit;",
          "new_line_content": "    const U32   lowLimit = ZSTD_getLowestMatchIndex(ms, endIndex, cParams->windowLog);",
          "content_same": false
        },
        {
          "line": 374,
          "old_api": null,
          "new_api": "U32)(ip0-match0)",
          "old_text": null,
          "new_text": "U32)(ip0-match0)",
          "old_line_content": "    offcode = rep_offset1 + ZSTD_REP_MOVE;",
          "new_line_content": "    rep_offset1 = (U32)(ip0-match0);",
          "content_same": false
        },
        {
          "line": 508,
          "old_api": null,
          "new_api": "MEM_read32",
          "old_text": null,
          "new_text": "MEM_read32(ip+1)",
          "old_line_content": "            const BYTE* const repMatchEnd = repIndex < prefixStartIndex ? dictEnd : iend;",
          "new_line_content": "          && (MEM_read32(repMatch) == MEM_read32(ip+1)) ) {",
          "content_same": false
        },
        {
          "line": 638,
          "old_api": null,
          "new_api": "DEBUGLOG",
          "old_text": null,
          "new_text": "DEBUGLOG(5, \"ZSTD_compressBlock_fast_extDict_generic (offset_1=%u)\", offset_1)",
          "old_line_content": "",
          "new_line_content": "    DEBUGLOG(5, \"ZSTD_compressBlock_fast_extDict_generic (offset_1=%u)\", offset_1);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 513,
          "old_api": "ZSTD_hashPtr",
          "new_api": null,
          "old_text": "ZSTD_hashPtr(ip, dictHLog, mls)",
          "new_text": null,
          "old_line_content": "            size_t const dictHash = ZSTD_hashPtr(ip, dictHLog, mls);",
          "new_line_content": "        } else if ( (matchIndex <= prefixStartIndex) ) {",
          "content_same": false
        },
        {
          "line": 641,
          "old_api": "ZSTD_compressBlock_fast_generic_pipelined",
          "new_api": null,
          "old_text": "ZSTD_compressBlock_fast_generic_pipelined(ms, seqStore, rep, src, srcSize, mls)",
          "new_text": null,
          "old_line_content": "        return ZSTD_compressBlock_fast_generic_pipelined(ms, seqStore, rep, src, srcSize, mls);",
          "new_line_content": "    if (prefixStartIndex == dictStartIndex)",
          "content_same": false
        },
        {
          "line": 387,
          "old_api": "ZSTD_count",
          "new_api": null,
          "old_text": "ZSTD_count(ip0 + mLength, match0 + mLength, iend)",
          "new_text": null,
          "old_line_content": "    mLength += ZSTD_count(ip0 + mLength, match0 + mLength, iend);",
          "new_line_content": "    /* Count the forward length. */",
          "content_same": false
        },
        {
          "line": 509,
          "old_api": "ZSTD_count_2segments",
          "new_api": null,
          "old_text": "ZSTD_count_2segments(ip+1+4, repMatch+4, iend, repMatchEnd, prefixStart)",
          "new_text": null,
          "old_line_content": "            mLength = ZSTD_count_2segments(ip+1+4, repMatch+4, iend, repMatchEnd, prefixStart) + 4;",
          "new_line_content": "            const BYTE* const repMatchEnd = repIndex < prefixStartIndex ? dictEnd : iend;",
          "content_same": false
        },
        {
          "line": 517,
          "old_api": "MEM_read32",
          "new_api": null,
          "old_text": "MEM_read32(ip)",
          "new_text": null,
          "old_line_content": "                MEM_read32(dictMatch) != MEM_read32(ip)) {",
          "new_line_content": "            if (dictMatchIndex <= dictStartIndex ||",
          "content_same": false
        },
        {
          "line": 645,
          "old_api": "ZSTD_hashPtr",
          "new_api": null,
          "old_text": "ZSTD_hashPtr(ip, hlog, mls)",
          "new_text": null,
          "old_line_content": "        const size_t h = ZSTD_hashPtr(ip, hlog, mls);",
          "new_line_content": "    while (ip < ilimit) {  /* < instead of <=, because (ip+1) */",
          "content_same": false
        },
        {
          "line": 389,
          "old_api": "ZSTD_storeSeq",
          "new_api": null,
          "old_text": "ZSTD_storeSeq(seqStore, (size_t)(ip0 - anchor), anchor, iend, offcode, mLength - MINMATCH)",
          "new_text": null,
          "old_line_content": "    ZSTD_storeSeq(seqStore, (size_t)(ip0 - anchor), anchor, iend, offcode, mLength - MINMATCH);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 649,
          "old_api": "U32)(ip-base)",
          "new_api": null,
          "old_text": "U32)(ip-base)",
          "new_text": null,
          "old_line_content": "        const U32    curr = (U32)(ip-base);",
          "new_line_content": "        const BYTE*  match = matchBase + matchIndex;",
          "content_same": false
        },
        {
          "line": 523,
          "old_api": "U32)(curr-dictMatchIndex-dictIndexDelta)",
          "new_api": null,
          "old_text": "U32)(curr-dictMatchIndex-dictIndexDelta)",
          "new_text": null,
          "old_line_content": "                U32 const offset = (U32)(curr-dictMatchIndex-dictIndexDelta);",
          "new_line_content": "                /* found a dict match */",
          "content_same": false
        },
        {
          "line": 654,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(7, \"offset_1 = %u , curr = %u\", offset_1, curr)",
          "new_text": null,
          "old_line_content": "        DEBUGLOG(7, \"offset_1 = %u , curr = %u\", offset_1, curr);",
          "new_line_content": "        hashTable[h] = curr;   /* update hash table */",
          "content_same": false
        },
        {
          "line": 656,
          "old_api": "U32)((prefixStartIndex-1) - repIndex)",
          "new_api": null,
          "old_text": "U32)((prefixStartIndex-1) - repIndex)",
          "new_text": null,
          "old_line_content": "        if ( ( ((U32)((prefixStartIndex-1) - repIndex) >= 3) /* intentional underflow */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 658,
          "old_api": "MEM_read32",
          "new_api": null,
          "old_text": "MEM_read32(ip+1)",
          "new_text": null,
          "old_line_content": "           && (MEM_read32(repMatch) == MEM_read32(ip+1)) ) {",
          "new_line_content": "             & (offset_1 <= curr+1 - dictStartIndex) ) /* note: we are searching at curr+1 */",
          "content_same": false
        },
        {
          "line": 531,
          "old_api": "ZSTD_storeSeq",
          "new_api": null,
          "old_text": "ZSTD_storeSeq(seqStore, (size_t)(ip-anchor), anchor, iend, offset + ZSTD_REP_MOVE, mLength-MINMATCH)",
          "new_text": null,
          "old_line_content": "                ZSTD_storeSeq(seqStore, (size_t)(ip-anchor), anchor, iend, offset + ZSTD_REP_MOVE, mLength-MINMATCH);",
          "new_line_content": "                offset_1 = offset;",
          "content_same": false
        },
        {
          "line": 660,
          "old_api": "ZSTD_count_2segments",
          "new_api": null,
          "old_text": "ZSTD_count_2segments(ip+1 +4, repMatch +4, iend, repMatchEnd, prefixStart)",
          "new_text": null,
          "old_line_content": "            size_t const rLength = ZSTD_count_2segments(ip+1 +4, repMatch +4, iend, repMatchEnd, prefixStart) + 4;",
          "new_line_content": "            const BYTE* const repMatchEnd = repIndex < prefixStartIndex ? dictEnd : iend;",
          "content_same": false
        },
        {
          "line": 533,
          "old_api": "MEM_read32",
          "new_api": null,
          "old_text": "MEM_read32(ip)",
          "new_text": null,
          "old_line_content": "        } else if (MEM_read32(match) != MEM_read32(ip)) {",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 662,
          "old_api": "ZSTD_storeSeq",
          "new_api": null,
          "old_text": "ZSTD_storeSeq(seqStore, (size_t)(ip-anchor), anchor, iend, 0, rLength-MINMATCH)",
          "new_text": null,
          "old_line_content": "            ZSTD_storeSeq(seqStore, (size_t)(ip-anchor), anchor, iend, 0, rLength-MINMATCH);",
          "new_line_content": "            ip++;",
          "content_same": false
        },
        {
          "line": 535,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(stepSize >= 1)",
          "new_text": null,
          "old_line_content": "            assert(stepSize >= 1);",
          "new_line_content": "            /* it's not a match, and we're not going to check the dictionary */",
          "content_same": false
        },
        {
          "line": 402,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(base+current0+2 > istart)",
          "new_text": null,
          "old_line_content": "        assert(base+current0+2 > istart);  /* check base overflow */",
          "new_line_content": "        /* Fill Table */",
          "content_same": false
        },
        {
          "line": 407,
          "old_api": "MEM_read32",
          "new_api": null,
          "old_text": "MEM_read32(ip0 - rep_offset2)",
          "new_text": null,
          "old_line_content": "            while ( (ip0 <= ilimit) && (MEM_read32(ip0) == MEM_read32(ip0 - rep_offset2)) ) {",
          "new_line_content": "        if (rep_offset2 > 0) { /* rep_offset2==0 means rep_offset2 is invalidated */",
          "content_same": false
        },
        {
          "line": 409,
          "old_api": "ZSTD_count",
          "new_api": null,
          "old_text": "ZSTD_count(ip0+4, ip0+4-rep_offset2, iend)",
          "new_text": null,
          "old_line_content": "                size_t const rLength = ZSTD_count(ip0+4, ip0+4-rep_offset2, iend) + 4;",
          "new_line_content": "                /* store sequence */",
          "content_same": false
        },
        {
          "line": 667,
          "old_api": "MEM_read32",
          "new_api": null,
          "old_text": "MEM_read32(ip)",
          "new_text": null,
          "old_line_content": "                 (MEM_read32(match) != MEM_read32(ip)) ) {",
          "new_line_content": "            if ( (matchIndex < dictStartIndex) ||",
          "content_same": false
        },
        {
          "line": 540,
          "old_api": "U32)(ip-match)",
          "new_api": null,
          "old_text": "U32)(ip-match)",
          "new_text": null,
          "old_line_content": "            U32 const offset = (U32)(ip-match);",
          "new_line_content": "            /* found a regular match */",
          "content_same": false
        },
        {
          "line": 411,
          "old_api": "U32)(ip0-base)",
          "new_api": null,
          "old_text": "U32)(ip0-base)",
          "new_text": null,
          "old_line_content": "                hashTable[ZSTD_hashPtr(ip0, hlog, mls)] = (U32)(ip0-base);",
          "new_line_content": "                { U32 const tmpOff = rep_offset2; rep_offset2 = rep_offset1; rep_offset1 = tmpOff; } /* swap rep_offset2 <=> rep_offset1 */",
          "content_same": false
        },
        {
          "line": 413,
          "old_api": "ZSTD_storeSeq",
          "new_api": null,
          "old_text": "ZSTD_storeSeq(seqStore, 0 /*litLen*/, anchor, iend, 0 /*offCode*/, rLength-MINMATCH)",
          "new_text": null,
          "old_line_content": "                ZSTD_storeSeq(seqStore, 0 /*litLen*/, anchor, iend, 0 /*offCode*/, rLength-MINMATCH);",
          "new_line_content": "                ip0 += rLength;",
          "content_same": false
        },
        {
          "line": 546,
          "old_api": "ZSTD_storeSeq",
          "new_api": null,
          "old_text": "ZSTD_storeSeq(seqStore, (size_t)(ip-anchor), anchor, iend, offset + ZSTD_REP_MOVE, mLength-MINMATCH)",
          "new_text": null,
          "old_line_content": "            ZSTD_storeSeq(seqStore, (size_t)(ip-anchor), anchor, iend, offset + ZSTD_REP_MOVE, mLength-MINMATCH);",
          "new_line_content": "            offset_1 = offset;",
          "content_same": false
        },
        {
          "line": 675,
          "old_api": "ZSTD_count_2segments",
          "new_api": null,
          "old_text": "ZSTD_count_2segments(ip+4, match+4, iend, matchEnd, prefixStart)",
          "new_text": null,
          "old_line_content": "                size_t mLength = ZSTD_count_2segments(ip+4, match+4, iend, matchEnd, prefixStart) + 4;",
          "new_line_content": "                U32 const offset = curr - matchIndex;",
          "content_same": false
        },
        {
          "line": 678,
          "old_api": "ZSTD_storeSeq",
          "new_api": null,
          "old_text": "ZSTD_storeSeq(seqStore, (size_t)(ip-anchor), anchor, iend, offset + ZSTD_REP_MOVE, mLength-MINMATCH)",
          "new_text": null,
          "old_line_content": "                ZSTD_storeSeq(seqStore, (size_t)(ip-anchor), anchor, iend, offset + ZSTD_REP_MOVE, mLength-MINMATCH);",
          "new_line_content": "                offset_2 = offset_1; offset_1 = offset;  /* update offset history */",
          "content_same": false
        },
        {
          "line": 555,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(base+curr+2 > istart)",
          "new_text": null,
          "old_line_content": "            assert(base+curr+2 > istart);  /* check base overflow */",
          "new_line_content": "            /* Fill Table */",
          "content_same": false
        },
        {
          "line": 427,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(ms->dictMatchState == NULL)",
          "new_text": null,
          "old_line_content": "    assert(ms->dictMatchState == NULL);",
          "new_line_content": "    U32 const mls = ms->cParams.minMatch;",
          "content_same": false
        },
        {
          "line": 685,
          "old_api": "ZSTD_hashPtr",
          "new_api": null,
          "old_text": "ZSTD_hashPtr(base+curr+2, hlog, mls)",
          "new_text": null,
          "old_line_content": "            hashTable[ZSTD_hashPtr(base+curr+2, hlog, mls)] = curr+2;",
          "new_line_content": "            /* Fill Table */",
          "content_same": false
        },
        {
          "line": 432,
          "old_api": "ZSTD_compressBlock_fast_generic_pipelined",
          "new_api": null,
          "old_text": "ZSTD_compressBlock_fast_generic_pipelined(ms, seqStore, rep, src, srcSize, 4)",
          "new_text": null,
          "old_line_content": "        return ZSTD_compressBlock_fast_generic_pipelined(ms, seqStore, rep, src, srcSize, 4);",
          "new_line_content": "    case 4 :",
          "content_same": false
        },
        {
          "line": 561,
          "old_api": "U32)(ip-base)",
          "new_api": null,
          "old_text": "U32)(ip-base)",
          "new_text": null,
          "old_line_content": "                U32 const current2 = (U32)(ip-base);",
          "new_line_content": "            while (ip <= ilimit) {",
          "content_same": false
        },
        {
          "line": 689,
          "old_api": "U32)(ip-base)",
          "new_api": null,
          "old_text": "U32)(ip-base)",
          "new_text": null,
          "old_line_content": "                U32 const current2 = (U32)(ip-base);",
          "new_line_content": "            while (ip <= ilimit) {",
          "content_same": false
        },
        {
          "line": 434,
          "old_api": "ZSTD_compressBlock_fast_generic_pipelined",
          "new_api": null,
          "old_text": "ZSTD_compressBlock_fast_generic_pipelined(ms, seqStore, rep, src, srcSize, 5)",
          "new_text": null,
          "old_line_content": "        return ZSTD_compressBlock_fast_generic_pipelined(ms, seqStore, rep, src, srcSize, 5);",
          "new_line_content": "    case 5 :",
          "content_same": false
        },
        {
          "line": 692,
          "old_api": "U32)((prefixStartIndex-1) - repIndex2)",
          "new_api": null,
          "old_text": "U32)((prefixStartIndex-1) - repIndex2)",
          "new_text": null,
          "old_line_content": "                if ( (((U32)((prefixStartIndex-1) - repIndex2) >= 3) & (offset_2 <= curr - dictStartIndex))  /* intentional overflow */",
          "new_line_content": "                const BYTE* const repMatch2 = repIndex2 < prefixStartIndex ? dictBase + repIndex2 : base + repIndex2;",
          "content_same": false
        },
        {
          "line": 436,
          "old_api": "ZSTD_compressBlock_fast_generic_pipelined",
          "new_api": null,
          "old_text": "ZSTD_compressBlock_fast_generic_pipelined(ms, seqStore, rep, src, srcSize, 6)",
          "new_text": null,
          "old_line_content": "        return ZSTD_compressBlock_fast_generic_pipelined(ms, seqStore, rep, src, srcSize, 6);",
          "new_line_content": "    case 6 :",
          "content_same": false
        },
        {
          "line": 566,
          "old_api": "U32)((prefixStartIndex-1) - (U32)repIndex2)",
          "new_api": null,
          "old_text": "U32)((prefixStartIndex-1) - (U32)repIndex2)",
          "new_text": null,
          "old_line_content": "                if ( ((U32)((prefixStartIndex-1) - (U32)repIndex2) >= 3 /* intentional overflow */)",
          "new_line_content": "                        base + repIndex2;",
          "content_same": false
        },
        {
          "line": 695,
          "old_api": "ZSTD_count_2segments",
          "new_api": null,
          "old_text": "ZSTD_count_2segments(ip+4, repMatch2+4, iend, repEnd2, prefixStart)",
          "new_text": null,
          "old_line_content": "                    size_t const repLength2 = ZSTD_count_2segments(ip+4, repMatch2+4, iend, repEnd2, prefixStart) + 4;",
          "new_line_content": "                    const BYTE* const repEnd2 = repIndex2 < prefixStartIndex ? dictEnd : iend;",
          "content_same": false
        },
        {
          "line": 438,
          "old_api": "ZSTD_compressBlock_fast_generic_pipelined",
          "new_api": null,
          "old_text": "ZSTD_compressBlock_fast_generic_pipelined(ms, seqStore, rep, src, srcSize, 7)",
          "new_text": null,
          "old_line_content": "        return ZSTD_compressBlock_fast_generic_pipelined(ms, seqStore, rep, src, srcSize, 7);",
          "new_line_content": "    case 7 :",
          "content_same": false
        },
        {
          "line": 569,
          "old_api": "ZSTD_count_2segments",
          "new_api": null,
          "old_text": "ZSTD_count_2segments(ip+4, repMatch2+4, iend, repEnd2, prefixStart)",
          "new_text": null,
          "old_line_content": "                    size_t const repLength2 = ZSTD_count_2segments(ip+4, repMatch2+4, iend, repEnd2, prefixStart) + 4;",
          "new_line_content": "                    const BYTE* const repEnd2 = repIndex2 < prefixStartIndex ? dictEnd : iend;",
          "content_same": false
        },
        {
          "line": 697,
          "old_api": "ZSTD_storeSeq",
          "new_api": null,
          "old_text": "ZSTD_storeSeq(seqStore, 0 /*litlen*/, anchor, iend, 0 /*offcode*/, repLength2-MINMATCH)",
          "new_text": null,
          "old_line_content": "                    ZSTD_storeSeq(seqStore, 0 /*litlen*/, anchor, iend, 0 /*offcode*/, repLength2-MINMATCH);",
          "new_line_content": "                    { U32 const tmpOffset = offset_2; offset_2 = offset_1; offset_1 = tmpOffset; }  /* swap offset_2 <=> offset_1 */",
          "content_same": false
        },
        {
          "line": 571,
          "old_api": "ZSTD_storeSeq",
          "new_api": null,
          "old_text": "ZSTD_storeSeq(seqStore, 0, anchor, iend, 0, repLength2-MINMATCH)",
          "new_text": null,
          "old_line_content": "                    ZSTD_storeSeq(seqStore, 0, anchor, iend, 0, repLength2-MINMATCH);",
          "new_line_content": "                    U32 tmpOffset = offset_2; offset_2 = offset_1; offset_1 = tmpOffset;   /* swap offset_2 <=> offset_1 */",
          "content_same": false
        },
        {
          "line": 595,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(ms->dictMatchState != NULL)",
          "new_text": null,
          "old_line_content": "    assert(ms->dictMatchState != NULL);",
          "new_line_content": "    U32 const mls = ms->cParams.minMatch;",
          "content_same": false
        },
        {
          "line": 724,
          "old_api": "ZSTD_compressBlock_fast_extDict_generic",
          "new_api": null,
          "old_text": "ZSTD_compressBlock_fast_extDict_generic(ms, seqStore, rep, src, srcSize, 4)",
          "new_text": null,
          "old_line_content": "        return ZSTD_compressBlock_fast_extDict_generic(ms, seqStore, rep, src, srcSize, 4);",
          "new_line_content": "    case 4 :",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": "ZSTD_compressBlock_fast_extDict_generic",
          "new_api": null,
          "old_text": "ZSTD_compressBlock_fast_extDict_generic(ms, seqStore, rep, src, srcSize, 5)",
          "new_text": null,
          "old_line_content": "        return ZSTD_compressBlock_fast_extDict_generic(ms, seqStore, rep, src, srcSize, 5);",
          "new_line_content": "    case 5 :",
          "content_same": false
        },
        {
          "line": 470,
          "old_api": "U32)(dictEnd - dictBase)",
          "new_api": null,
          "old_text": "U32)(dictEnd - dictBase)",
          "new_text": null,
          "old_line_content": "    const U32 dictIndexDelta       = prefixStartIndex - (U32)(dictEnd - dictBase);",
          "new_line_content": "    const BYTE* const dictEnd      = dms->window.nextSrc;",
          "content_same": false
        },
        {
          "line": 600,
          "old_api": "ZSTD_compressBlock_fast_dictMatchState_generic",
          "new_api": null,
          "old_text": "ZSTD_compressBlock_fast_dictMatchState_generic(ms, seqStore, rep, src, srcSize, 4)",
          "new_text": null,
          "old_line_content": "        return ZSTD_compressBlock_fast_dictMatchState_generic(ms, seqStore, rep, src, srcSize, 4);",
          "new_line_content": "    case 4 :",
          "content_same": false
        },
        {
          "line": 728,
          "old_api": "ZSTD_compressBlock_fast_extDict_generic",
          "new_api": null,
          "old_text": "ZSTD_compressBlock_fast_extDict_generic(ms, seqStore, rep, src, srcSize, 6)",
          "new_text": null,
          "old_line_content": "        return ZSTD_compressBlock_fast_extDict_generic(ms, seqStore, rep, src, srcSize, 6);",
          "new_line_content": "    case 6 :",
          "content_same": false
        },
        {
          "line": 602,
          "old_api": "ZSTD_compressBlock_fast_dictMatchState_generic",
          "new_api": null,
          "old_text": "ZSTD_compressBlock_fast_dictMatchState_generic(ms, seqStore, rep, src, srcSize, 5)",
          "new_text": null,
          "old_line_content": "        return ZSTD_compressBlock_fast_dictMatchState_generic(ms, seqStore, rep, src, srcSize, 5);",
          "new_line_content": "    case 5 :",
          "content_same": false
        },
        {
          "line": 730,
          "old_api": "ZSTD_compressBlock_fast_extDict_generic",
          "new_api": null,
          "old_text": "ZSTD_compressBlock_fast_extDict_generic(ms, seqStore, rep, src, srcSize, 7)",
          "new_text": null,
          "old_line_content": "        return ZSTD_compressBlock_fast_extDict_generic(ms, seqStore, rep, src, srcSize, 7);",
          "new_line_content": "    case 7 :",
          "content_same": false
        },
        {
          "line": 604,
          "old_api": "ZSTD_compressBlock_fast_dictMatchState_generic",
          "new_api": null,
          "old_text": "ZSTD_compressBlock_fast_dictMatchState_generic(ms, seqStore, rep, src, srcSize, 6)",
          "new_text": null,
          "old_line_content": "        return ZSTD_compressBlock_fast_dictMatchState_generic(ms, seqStore, rep, src, srcSize, 6);",
          "new_line_content": "    case 6 :",
          "content_same": false
        },
        {
          "line": 477,
          "old_api": "U32)((size_t)(ip - base) + srcSize)",
          "new_api": null,
          "old_text": "U32)((size_t)(ip - base) + srcSize)",
          "new_text": null,
          "old_line_content": "    const U32 endIndex = (U32)((size_t)(ip - base) + srcSize);",
          "new_line_content": "    const U32 maxDistance = 1U << cParams->windowLog;",
          "content_same": false
        },
        {
          "line": 606,
          "old_api": "ZSTD_compressBlock_fast_dictMatchState_generic",
          "new_api": null,
          "old_text": "ZSTD_compressBlock_fast_dictMatchState_generic(ms, seqStore, rep, src, srcSize, 7)",
          "new_text": null,
          "old_line_content": "        return ZSTD_compressBlock_fast_dictMatchState_generic(ms, seqStore, rep, src, srcSize, 7);",
          "new_line_content": "    case 7 :",
          "content_same": false
        },
        {
          "line": 483,
          "old_api": "U32)(dictEnd - dictBase)",
          "new_api": null,
          "old_text": "U32)(dictEnd - dictBase)",
          "new_text": null,
          "old_line_content": "    assert(prefixStartIndex >= (U32)(dictEnd - dictBase));",
          "new_line_content": "     * when translating a dict index into a local index */",
          "content_same": false
        },
        {
          "line": 486,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(5, \"ZSTD_compressBlock_fast_dictMatchState_generic\")",
          "new_text": null,
          "old_line_content": "    DEBUGLOG(5, \"ZSTD_compressBlock_fast_dictMatchState_generic\");",
          "new_line_content": "    /* init */",
          "content_same": false
        },
        {
          "line": 490,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(offset_1 <= dictAndPrefixLength)",
          "new_text": null,
          "old_line_content": "    assert(offset_1 <= dictAndPrefixLength);",
          "new_line_content": "     * disabling. */",
          "content_same": false
        },
        {
          "line": 496,
          "old_api": "ZSTD_hashPtr",
          "new_api": null,
          "old_text": "ZSTD_hashPtr(ip, hlog, mls)",
          "new_text": null,
          "old_line_content": "        size_t const h = ZSTD_hashPtr(ip, hlog, mls);",
          "new_line_content": "        size_t mLength;",
          "content_same": false
        },
        {
          "line": 625,
          "old_api": "U32)((size_t)(istart - base) + srcSize)",
          "new_api": null,
          "old_text": "U32)((size_t)(istart - base) + srcSize)",
          "new_text": null,
          "old_line_content": "    const U32   endIndex = (U32)((size_t)(istart - base) + srcSize);",
          "new_line_content": "    const BYTE* anchor = istart;",
          "content_same": false
        },
        {
          "line": 373,
          "old_api": "U32)(ip0-match0)",
          "new_api": null,
          "old_text": "U32)(ip0-match0)",
          "new_text": null,
          "old_line_content": "    rep_offset1 = (U32)(ip0-match0);",
          "new_line_content": "    rep_offset2 = rep_offset1;",
          "content_same": false
        },
        {
          "line": 506,
          "old_api": "U32)((prefixStartIndex-1) - repIndex)",
          "new_api": null,
          "old_text": "U32)((prefixStartIndex-1) - repIndex)",
          "new_text": null,
          "old_line_content": "        if ( ((U32)((prefixStartIndex-1) - repIndex) >= 3) /* intentional underflow : ensure repIndex isn't overlapping dict + prefix */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 637,
          "old_api": "DEBUGLOG",
          "new_api": null,
          "old_text": "DEBUGLOG(5, \"ZSTD_compressBlock_fast_extDict_generic (offset_1=%u)\", offset_1)",
          "new_text": null,
          "old_line_content": "    DEBUGLOG(5, \"ZSTD_compressBlock_fast_extDict_generic (offset_1=%u)\", offset_1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 511,
          "old_api": "ZSTD_storeSeq",
          "new_api": null,
          "old_text": "ZSTD_storeSeq(seqStore, (size_t)(ip-anchor), anchor, iend, 0, mLength-MINMATCH)",
          "new_text": null,
          "old_line_content": "            ZSTD_storeSeq(seqStore, (size_t)(ip-anchor), anchor, iend, 0, mLength-MINMATCH);",
          "new_line_content": "            ip++;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 18,
      "total_additions": 63,
      "total_deletions": 62,
      "total_api_changes": 143
    },
    "non_api_changes": {
      "has_non_api_changes": false,
      "evidence": {
        "total_diff_lines": 1,
        "api_related_lines": 143,
        "non_api_lines": 0,
        "non_api_line_numbers": []
      }
    },
    "api_calls_before": 141,
    "api_calls_after": 142,
    "diff_info": {
      "added_lines": 1,
      "removed_lines": 0,
      "total_diff_lines": 13
    }
  }
}
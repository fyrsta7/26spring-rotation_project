{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/zstd/modified_file/aa800c4793a4bc044df53614ca652c96d59e1078",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/zstd/modified_file/aa800c4793a4bc044df53614ca652c96d59e1078/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/zstd/modified_file/aa800c4793a4bc044df53614ca652c96d59e1078/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/zstd/modified_file/aa800c4793a4bc044df53614ca652c96d59e1078/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 1292,
          "old_api": "CHECK (!cNoiseBuffer[0] || !cNoiseBuffer[1] || !cNoiseBuffer[2] || !cNoiseBuffer[3] || !cNoiseBuffer[4] ||\n           !copyBuffer || !dstBuffer || !cBuffer || !zc || !zd || !zd_noise ,\n           \"Not enough memory, fuzzer tests cancelled\")",
          "new_api": "malloc (srcBufferSize)",
          "old_text": "CHECK (!cNoiseBuffer[0] || !cNoiseBuffer[1] || !cNoiseBuffer[2] || !cNoiseBuffer[3] || !cNoiseBuffer[4] ||\n           !copyBuffer || !dstBuffer || !cBuffer || !zc || !zd || !zd_noise ,\n           \"Not enough memory, fuzzer tests cancelled\")",
          "new_text": "malloc (srcBufferSize)",
          "old_line_content": "    CHECK (!cNoiseBuffer[0] || !cNoiseBuffer[1] || !cNoiseBuffer[2] || !cNoiseBuffer[3] || !cNoiseBuffer[4] ||",
          "new_line_content": "    cNoiseBuffer[4] = (BYTE*)malloc (srcBufferSize);",
          "content_same": false
        },
        {
          "line": 1302,
          "old_api": "memset",
          "new_api": "RDG_genBuffer",
          "old_text": "memset(copyBuffer, 0x65, copyBufferSize)",
          "new_text": "RDG_genBuffer(cNoiseBuffer[4], srcBufferSize, 1.00, 0., coreSeed)",
          "old_line_content": "    memset(copyBuffer, 0x65, copyBufferSize);                             /* make copyBuffer considered initialized */",
          "new_line_content": "    RDG_genBuffer(cNoiseBuffer[4], srcBufferSize, 1.00, 0., coreSeed);    /* sparse content */",
          "content_same": false
        },
        {
          "line": 1303,
          "old_api": "ZSTD_initDStream_usingDict",
          "new_api": "memset",
          "old_text": "ZSTD_initDStream_usingDict(zd, NULL, 0)",
          "new_text": "memset(copyBuffer, 0x65, copyBufferSize)",
          "old_line_content": "    CHECK_Z( ZSTD_initDStream_usingDict(zd, NULL, 0) );   /* ensure at least one init */",
          "new_line_content": "    memset(copyBuffer, 0x65, copyBufferSize);                             /* make copyBuffer considered initialized */",
          "content_same": false
        },
        {
          "line": 1322,
          "old_api": "FUZ_rand",
          "new_api": "DISPLAYUPDATE",
          "old_text": "FUZ_rand(&coreSeed)",
          "new_text": "DISPLAYUPDATE(2, \"\\r%6u          \", testNb)",
          "old_line_content": "        FUZ_rand(&coreSeed);",
          "new_line_content": "        else { DISPLAYUPDATE(2, \"\\r%6u          \", testNb); }",
          "content_same": false
        },
        {
          "line": 1328,
          "old_api": "DISPLAYLEVEL",
          "new_api": "FUZ_rand",
          "old_text": "DISPLAYLEVEL(5, \"Creating new context \\n\")",
          "new_text": "FUZ_rand(&lseed)",
          "old_line_content": "            DISPLAYLEVEL(5, \"Creating new context \\n\");",
          "new_line_content": "        if ((FUZ_rand(&lseed) & 0xFF) == 131) {",
          "content_same": false
        },
        {
          "line": 1329,
          "old_api": "ZSTD_freeCCtx",
          "new_api": "DISPLAYLEVEL",
          "old_text": "ZSTD_freeCCtx(zc)",
          "new_text": "DISPLAYLEVEL(5, \"Creating new context \\n\")",
          "old_line_content": "            ZSTD_freeCCtx(zc);",
          "new_line_content": "            DISPLAYLEVEL(5, \"Creating new context \\n\");",
          "content_same": false
        },
        {
          "line": 1330,
          "old_api": "ZSTD_createCCtx",
          "new_api": "ZSTD_freeCCtx",
          "old_text": "ZSTD_createCCtx()",
          "new_text": "ZSTD_freeCCtx(zc)",
          "old_line_content": "            zc = ZSTD_createCCtx();",
          "new_line_content": "            ZSTD_freeCCtx(zc);",
          "content_same": false
        },
        {
          "line": 1331,
          "old_api": "CHECK",
          "new_api": "ZSTD_createCCtx",
          "old_text": "CHECK(zc==NULL, \"ZSTD_createCCtx allocation error\")",
          "new_text": "ZSTD_createCCtx()",
          "old_line_content": "            CHECK(zc==NULL, \"ZSTD_createCCtx allocation error\");",
          "new_line_content": "            zc = ZSTD_createCCtx();",
          "content_same": false
        },
        {
          "line": 1335,
          "old_api": "ZSTD_freeDStream",
          "new_api": "FUZ_rand",
          "old_text": "ZSTD_freeDStream(zd)",
          "new_text": "FUZ_rand(&lseed)",
          "old_line_content": "            ZSTD_freeDStream(zd);",
          "new_line_content": "        if ((FUZ_rand(&lseed) & 0xFF) == 132) {",
          "content_same": false
        },
        {
          "line": 1336,
          "old_api": "ZSTD_createDStream",
          "new_api": "ZSTD_freeDStream",
          "old_text": "ZSTD_createDStream()",
          "new_text": "ZSTD_freeDStream(zd)",
          "old_line_content": "            zd = ZSTD_createDStream();",
          "new_line_content": "            ZSTD_freeDStream(zd);",
          "content_same": false
        },
        {
          "line": 1337,
          "old_api": "CHECK",
          "new_api": "ZSTD_createDStream",
          "old_text": "CHECK(zd==NULL, \"ZSTD_createDStream allocation error\")",
          "new_text": "ZSTD_createDStream()",
          "old_line_content": "            CHECK(zd==NULL, \"ZSTD_createDStream allocation error\");",
          "new_line_content": "            zd = ZSTD_createDStream();",
          "content_same": false
        },
        {
          "line": 1338,
          "old_api": "ZSTD_initDStream_usingDict",
          "new_api": "CHECK",
          "old_text": "ZSTD_initDStream_usingDict(zd, NULL, 0)",
          "new_text": "CHECK(zd==NULL, \"ZSTD_createDStream allocation error\")",
          "old_line_content": "            ZSTD_initDStream_usingDict(zd, NULL, 0);  /* ensure at least one init */",
          "new_line_content": "            CHECK(zd==NULL, \"ZSTD_createDStream allocation error\");",
          "content_same": false
        },
        {
          "line": 1358,
          "old_api": "FUZ_rand",
          "new_api": "ZSTD_CCtx_loadDictionary",
          "old_text": "FUZ_rand(&lseed)",
          "new_text": "ZSTD_CCtx_loadDictionary(zc, NULL, 0)",
          "old_line_content": "        if ((FUZ_rand(&lseed)&1) /* at beginning, to keep same nb of rand */",
          "new_line_content": "        CHECK_Z( ZSTD_CCtx_loadDictionary(zc, NULL, 0) );   /* cancel previous dict /*/",
          "content_same": false
        },
        {
          "line": 1363,
          "old_api": "setCCtxParameter",
          "new_api": "FUZ_rand",
          "old_text": "setCCtxParameter(zc, cctxParams, ZSTD_p_compressionLevel, compressionLevel, useOpaqueAPI)",
          "new_text": "FUZ_rand(&lseed)",
          "old_line_content": "                CHECK_Z (setCCtxParameter(zc, cctxParams, ZSTD_p_compressionLevel, compressionLevel, useOpaqueAPI) );",
          "new_line_content": "            {   int const compressionLevel = (FUZ_rand(&lseed) % 5) + 1;",
          "content_same": false
        },
        {
          "line": 1369,
          "old_api": "ZSTD_maxCLevel",
          "new_api": "FUZ_rand",
          "old_text": "ZSTD_maxCLevel()",
          "new_text": "FUZ_rand(&lseed)",
          "old_line_content": "                               (ZSTD_maxCLevel() -",
          "new_line_content": "            U32 const cLevelCandidate = (FUZ_rand(&lseed) %",
          "content_same": false
        },
        {
          "line": 1370,
          "old_api": "MAX",
          "new_api": "ZSTD_maxCLevel",
          "old_text": "MAX(testLog, dictLog)",
          "new_text": "ZSTD_maxCLevel()",
          "old_line_content": "                               (MAX(testLog, dictLog) / 3))) +",
          "new_line_content": "                               (ZSTD_maxCLevel() -",
          "content_same": false
        },
        {
          "line": 1373,
          "old_api": "FUZ_rLogLength",
          "new_api": "MIN",
          "old_text": "FUZ_rLogLength(&lseed, testLog)",
          "new_text": "MIN(cLevelCandidate, cLevelMax)",
          "old_line_content": "            maxTestSize = FUZ_rLogLength(&lseed, testLog);",
          "new_line_content": "            U32 const cLevel = MIN(cLevelCandidate, cLevelMax);",
          "content_same": false
        },
        {
          "line": 1377,
          "old_api": "FUZ_rand",
          "new_api": "FUZ_rLogLength",
          "old_text": "FUZ_rand(&lseed)",
          "new_text": "FUZ_rLogLength(&lseed, dictLog)",
          "old_line_content": "            {   size_t const dictStart = FUZ_rand(&lseed) % (srcBufferSize - dictSize);",
          "new_line_content": "            dictSize  = ((FUZ_rand(&lseed)&63)==1) ? FUZ_rLogLength(&lseed, dictLog) : 0;",
          "content_same": false
        },
        {
          "line": 1382,
          "old_api": "ZSTD_getCParams",
          "new_api": "FUZ_rand",
          "old_text": "ZSTD_getCParams(cLevel, pledgedSrcSize, dictSize)",
          "new_text": "FUZ_rand(&lseed)",
          "old_line_content": "                ZSTD_compressionParameters cParams = ZSTD_getCParams(cLevel, pledgedSrcSize, dictSize);",
          "new_line_content": "            {   U64 const pledgedSrcSize = (FUZ_rand(&lseed) & 3) ? ZSTD_CONTENTSIZE_UNKNOWN : maxTestSize;",
          "content_same": false
        },
        {
          "line": 1386,
          "old_api": "MIN",
          "new_api": "FUZ_rand",
          "old_text": "MIN(windowLogMax, cParams.windowLog)",
          "new_text": "FUZ_rand(&lseed)",
          "old_line_content": "                cParams.windowLog = MIN(windowLogMax, cParams.windowLog);",
          "new_line_content": "                cParams.windowLog += (FUZ_rand(&lseed) & 3) - 1;",
          "content_same": false
        },
        {
          "line": 1387,
          "old_api": "FUZ_rand",
          "new_api": "MIN",
          "old_text": "FUZ_rand(&lseed)",
          "new_text": "MIN(windowLogMax, cParams.windowLog)",
          "old_line_content": "                cParams.hashLog += (FUZ_rand(&lseed) & 3) - 1;",
          "new_line_content": "                cParams.windowLog = MIN(windowLogMax, cParams.windowLog);",
          "content_same": false
        },
        {
          "line": 1392,
          "old_api": "ZSTD_adjustCParams",
          "new_api": "FUZ_rand",
          "old_text": "ZSTD_adjustCParams(cParams, 0, 0)",
          "new_text": "FUZ_rand(&lseed)",
          "old_line_content": "                cParams = ZSTD_adjustCParams(cParams, 0, 0);",
          "new_line_content": "                cParams.targetLength = (U32)((cParams.targetLength + 1 ) * (0.5 + ((double)(FUZ_rand(&lseed) & 127) / 128)));",
          "content_same": false
        },
        {
          "line": 1395,
          "old_api": "setCCtxParameter",
          "new_api": "FUZ_rand",
          "old_text": "setCCtxParameter(zc, cctxParams, ZSTD_p_hashLog, cParams.hashLog, useOpaqueAPI)",
          "new_text": "FUZ_rand(&lseed)",
          "old_line_content": "                if (FUZ_rand(&lseed) & 1) CHECK_Z( setCCtxParameter(zc, cctxParams, ZSTD_p_hashLog, cParams.hashLog, useOpaqueAPI) );",
          "new_line_content": "                if (FUZ_rand(&lseed) & 1) {",
          "content_same": false
        },
        {
          "line": 1397,
          "old_api": "setCCtxParameter",
          "new_api": "assert",
          "old_text": "setCCtxParameter(zc, cctxParams, ZSTD_p_searchLog, cParams.searchLog, useOpaqueAPI)",
          "new_text": "assert(cParams.windowLog >= ZSTD_WINDOWLOG_MIN)",
          "old_line_content": "                if (FUZ_rand(&lseed) & 1) CHECK_Z( setCCtxParameter(zc, cctxParams, ZSTD_p_searchLog, cParams.searchLog, useOpaqueAPI) );",
          "new_line_content": "                    assert(cParams.windowLog >= ZSTD_WINDOWLOG_MIN);   /* guaranteed by ZSTD_adjustCParams() */",
          "content_same": false
        },
        {
          "line": 1402,
          "old_api": "FUZ_rand",
          "new_api": "setCCtxParameter",
          "old_text": "FUZ_rand(&lseed)",
          "new_text": "setCCtxParameter(zc, cctxParams, ZSTD_p_searchLog, cParams.searchLog, useOpaqueAPI)",
          "old_line_content": "                if (FUZ_rand(&lseed) & 1) CHECK_Z( setCCtxParameter(zc, cctxParams, ZSTD_p_enableLongDistanceMatching, FUZ_rand(&lseed) & 63, useOpaqueAPI) );",
          "new_line_content": "                if (FUZ_rand(&lseed) & 1) CHECK_Z( setCCtxParameter(zc, cctxParams, ZSTD_p_searchLog, cParams.searchLog, useOpaqueAPI) );",
          "content_same": false
        },
        {
          "line": 1403,
          "old_api": "FUZ_randomClampedLength",
          "new_api": "setCCtxParameter",
          "old_text": "FUZ_randomClampedLength(&lseed, ZSTD_HASHLOG_MIN, 23)",
          "new_text": "setCCtxParameter(zc, cctxParams, ZSTD_p_minMatch, cParams.searchLength, useOpaqueAPI)",
          "old_line_content": "                if (FUZ_rand(&lseed) & 3) CHECK_Z( setCCtxParameter(zc, cctxParams, ZSTD_p_ldmHashLog, FUZ_randomClampedLength(&lseed, ZSTD_HASHLOG_MIN, 23), useOpaqueAPI) );",
          "new_line_content": "                if (FUZ_rand(&lseed) & 1) CHECK_Z( setCCtxParameter(zc, cctxParams, ZSTD_p_minMatch, cParams.searchLength, useOpaqueAPI) );",
          "content_same": false
        },
        {
          "line": 1404,
          "old_api": "FUZ_randomClampedLength",
          "new_api": "setCCtxParameter",
          "old_text": "FUZ_randomClampedLength(&lseed, ZSTD_LDM_MINMATCH_MIN, ZSTD_LDM_MINMATCH_MAX)",
          "new_text": "setCCtxParameter(zc, cctxParams, ZSTD_p_targetLength, cParams.targetLength, useOpaqueAPI)",
          "old_line_content": "                if (FUZ_rand(&lseed) & 3) CHECK_Z( setCCtxParameter(zc, cctxParams, ZSTD_p_ldmMinMatch, FUZ_randomClampedLength(&lseed, ZSTD_LDM_MINMATCH_MIN, ZSTD_LDM_MINMATCH_MAX), useOpaqueAPI) );",
          "new_line_content": "                if (FUZ_rand(&lseed) & 1) CHECK_Z( setCCtxParameter(zc, cctxParams, ZSTD_p_targetLength, cParams.targetLength, useOpaqueAPI) );",
          "content_same": false
        },
        {
          "line": 1410,
          "old_api": "FUZ_rand",
          "new_api": "FUZ_randomClampedLength",
          "old_text": "FUZ_rand(&lseed)",
          "new_text": "FUZ_randomClampedLength(&lseed, 0, ZSTD_LDM_BUCKETSIZELOG_MAX)",
          "old_line_content": "                if (FUZ_rand(&lseed) & 1) CHECK_Z( setCCtxParameter(zc, cctxParams, ZSTD_p_checksumFlag, FUZ_rand(&lseed) & 1, useOpaqueAPI) );",
          "new_line_content": "                if (FUZ_rand(&lseed) & 3) CHECK_Z( setCCtxParameter(zc, cctxParams, ZSTD_p_ldmBucketSizeLog, FUZ_randomClampedLength(&lseed, 0, ZSTD_LDM_BUCKETSIZELOG_MAX), useOpaqueAPI) );",
          "content_same": false
        },
        {
          "line": 1411,
          "old_api": "FUZ_rand",
          "new_api": "FUZ_randomClampedLength",
          "old_text": "FUZ_rand(&lseed)",
          "new_text": "FUZ_randomClampedLength(&lseed, 0, ZSTD_WINDOWLOG_MAX - ZSTD_HASHLOG_MIN)",
          "old_line_content": "                if (FUZ_rand(&lseed) & 1) CHECK_Z( setCCtxParameter(zc, cctxParams, ZSTD_p_dictIDFlag, FUZ_rand(&lseed) & 1, useOpaqueAPI) );",
          "new_line_content": "                if (FUZ_rand(&lseed) & 3) CHECK_Z( setCCtxParameter(zc, cctxParams, ZSTD_p_ldmHashEveryLog, FUZ_randomClampedLength(&lseed, 0, ZSTD_WINDOWLOG_MAX - ZSTD_HASHLOG_MIN), useOpaqueAPI) );",
          "content_same": false
        },
        {
          "line": 1414,
          "old_api": "DISPLAYLEVEL",
          "new_api": "FUZ_rand",
          "old_text": "DISPLAYLEVEL(5, \"pledgedSrcSize : %u \\n\", (U32)pledgedSrcSize)",
          "new_text": "FUZ_rand(&lseed)",
          "old_line_content": "                DISPLAYLEVEL(5, \"pledgedSrcSize : %u \\n\", (U32)pledgedSrcSize);",
          "new_line_content": "                if (FUZ_rand(&lseed) & 1) CHECK_Z( setCCtxParameter(zc, cctxParams, ZSTD_p_checksumFlag, FUZ_rand(&lseed) & 1, useOpaqueAPI) );",
          "content_same": false
        },
        {
          "line": 1417,
          "old_api": "FUZ_rand",
          "new_api": "ZSTD_CCtx_setPledgedSrcSize",
          "old_text": "FUZ_rand(&lseed)",
          "new_text": "ZSTD_CCtx_setPledgedSrcSize(zc, pledgedSrcSize)",
          "old_line_content": "                {   U32 const nbThreadsCandidate = (FUZ_rand(&lseed) & 4) + 1;",
          "new_line_content": "                if (FUZ_rand(&lseed) & 1) CHECK_Z( ZSTD_CCtx_setPledgedSrcSize(zc, pledgedSrcSize) );",
          "content_same": false
        },
        {
          "line": 1418,
          "old_api": "MIN",
          "new_api": "DISPLAYLEVEL",
          "old_text": "MIN(nbThreadsCandidate, nbThreadsMax)",
          "new_text": "DISPLAYLEVEL(5, \"pledgedSrcSize : %u \\n\", (U32)pledgedSrcSize)",
          "old_line_content": "                    U32 const nbThreads = MIN(nbThreadsCandidate, nbThreadsMax);",
          "new_line_content": "                DISPLAYLEVEL(5, \"pledgedSrcSize : %u \\n\", (U32)pledgedSrcSize);",
          "content_same": false
        },
        {
          "line": 1423,
          "old_api": "FUZ_rLogLength",
          "new_api": "MIN",
          "old_text": "FUZ_rLogLength(&lseed, jobLog)",
          "new_text": "MIN(nbThreadsAdjusted, nbThreadsMax)",
          "old_line_content": "                        CHECK_Z( setCCtxParameter(zc, cctxParams, ZSTD_p_jobSize, (U32)FUZ_rLogLength(&lseed, jobLog), useOpaqueAPI) );",
          "new_line_content": "                    U32 const nbThreads = MIN(nbThreadsAdjusted, nbThreadsMax);",
          "content_same": false
        },
        {
          "line": 1436,
          "old_api": "ZSTD_CCtx_loadDictionary",
          "new_api": "ZSTD_CCtx_setParametersUsingCCtxParams",
          "old_text": "ZSTD_CCtx_loadDictionary(zc, dict, dictSize)",
          "new_text": "ZSTD_CCtx_setParametersUsingCCtxParams(zc, cctxParams)",
          "old_line_content": "                        CHECK_Z( ZSTD_CCtx_loadDictionary(zc, dict, dictSize) );",
          "new_line_content": "                    CHECK_Z (ZSTD_CCtx_setParametersUsingCCtxParams(zc, cctxParams) );",
          "content_same": false
        },
        {
          "line": 1443,
          "old_api": "ZSTD_CCtx_setParametersUsingCCtxParams",
          "new_api": "ZSTD_CCtx_loadDictionary_byReference",
          "old_text": "ZSTD_CCtx_setParametersUsingCCtxParams(zc, cctxParams)",
          "new_text": "ZSTD_CCtx_loadDictionary_byReference(zc, dict, dictSize)",
          "old_line_content": "                            size_t const setError = ZSTD_CCtx_setParametersUsingCCtxParams(zc, cctxParams);",
          "new_line_content": "                        CHECK_Z( ZSTD_CCtx_loadDictionary_byReference(zc, dict, dictSize) );",
          "content_same": false
        },
        {
          "line": 1451,
          "old_api": "ZSTD_CCtx_refPrefix",
          "new_api": "ZSTD_CCtx_setParameter",
          "old_text": "ZSTD_CCtx_refPrefix(zc, dict, dictSize)",
          "new_text": "ZSTD_CCtx_setParameter(zc, ZSTD_p_windowLog, cParams.windowLog-1)",
          "old_line_content": "                    CHECK_Z( ZSTD_CCtx_refPrefix(zc, dict, dictSize) );",
          "new_line_content": "                            size_t const setError = ZSTD_CCtx_setParameter(zc, ZSTD_p_windowLog, cParams.windowLog-1);",
          "content_same": false
        },
        {
          "line": 1456,
          "old_api": "XXH64_reset",
          "new_api": "ZSTD_CCtx_refPrefix",
          "old_text": "XXH64_reset(&xxhState, 0)",
          "new_text": "ZSTD_CCtx_refPrefix(zc, dict, dictSize)",
          "old_line_content": "        XXH64_reset(&xxhState, 0);",
          "new_line_content": "                    CHECK_Z( ZSTD_CCtx_refPrefix(zc, dict, dictSize) );",
          "content_same": false
        },
        {
          "line": 1461,
          "old_api": "MIN",
          "new_api": "XXH64_reset",
          "old_text": "MIN(maxTestSize-totalTestSize, randomSrcSize)",
          "new_text": "XXH64_reset(&xxhState, 0)",
          "old_line_content": "                size_t const srcSize = MIN(maxTestSize-totalTestSize, randomSrcSize);",
          "new_line_content": "        XXH64_reset(&xxhState, 0);",
          "content_same": false
        },
        {
          "line": 1465,
          "old_api": "FUZ_rand",
          "new_api": "FUZ_randomLength",
          "old_text": "FUZ_rand(&lseed)",
          "new_text": "FUZ_randomLength(&lseed, maxSampleLog)",
          "old_line_content": "                ZSTD_EndDirective const flush = (FUZ_rand(&lseed) & 15) ? ZSTD_e_continue : ZSTD_e_flush;",
          "new_line_content": "                size_t const randomSrcSize = FUZ_randomLength(&lseed, maxSampleLog);",
          "content_same": false
        },
        {
          "line": 1469,
          "old_api": "ZSTD_compress_generic",
          "new_api": "MIN",
          "old_text": "ZSTD_compress_generic(zc, &outBuff, &inBuff, flush)",
          "new_text": "MIN(cBufferSize - cSize, randomDstSize)",
          "old_line_content": "                CHECK_Z( ZSTD_compress_generic(zc, &outBuff, &inBuff, flush) );",
          "new_line_content": "                size_t const dstBuffSize = MIN(cBufferSize - cSize, randomDstSize);",
          "content_same": false
        },
        {
          "line": 1470,
          "old_api": "DISPLAYLEVEL",
          "new_api": "FUZ_rand",
          "old_text": "DISPLAYLEVEL(5, \"compress consumed %u bytes (total : %u) \\n\",\n                    (U32)inBuff.pos, (U32)(totalTestSize + inBuff.pos))",
          "new_text": "FUZ_rand(&lseed)",
          "old_line_content": "                DISPLAYLEVEL(5, \"compress consumed %u bytes (total : %u) \\n\",",
          "new_line_content": "                ZSTD_EndDirective const flush = (FUZ_rand(&lseed) & 15) ? ZSTD_e_continue : ZSTD_e_flush;",
          "content_same": false
        },
        {
          "line": 1474,
          "old_api": "memcpy",
          "new_api": "ZSTD_compress_generic",
          "old_text": "memcpy(copyBuffer+totalTestSize, srcBuffer+srcStart, inBuff.pos)",
          "new_text": "ZSTD_compress_generic(zc, &outBuff, &inBuff, flush)",
          "old_line_content": "                memcpy(copyBuffer+totalTestSize, srcBuffer+srcStart, inBuff.pos);",
          "new_line_content": "                CHECK_Z( ZSTD_compress_generic(zc, &outBuff, &inBuff, flush) );",
          "content_same": false
        },
        {
          "line": 1487,
          "old_api": "ZSTD_isError",
          "new_api": "FUZ_randomLength",
          "old_text": "ZSTD_isError(remainingToFlush)",
          "new_text": "FUZ_randomLength(&lseed, maxSampleLog+1)",
          "old_line_content": "                    CHECK(ZSTD_isError(remainingToFlush),",
          "new_line_content": "                    size_t const randomDstSize = FUZ_randomLength(&lseed, maxSampleLog+1);",
          "content_same": false
        },
        {
          "line": 1491,
          "old_api": "XXH64_digest",
          "new_api": "ZSTD_compress_generic",
          "old_text": "XXH64_digest(&xxhState)",
          "new_text": "ZSTD_compress_generic(zc, &outBuff, &inBuff, ZSTD_e_end)",
          "old_line_content": "            crcOrig = XXH64_digest(&xxhState);",
          "new_line_content": "                    remainingToFlush = ZSTD_compress_generic(zc, &outBuff, &inBuff, ZSTD_e_end);",
          "content_same": false
        },
        {
          "line": 1502,
          "old_api": "ZSTD_initDStream_usingDict",
          "new_api": "FUZ_rand",
          "old_text": "ZSTD_initDStream_usingDict(zd, dict, dictSize)",
          "new_text": "FUZ_rand(&lseed)",
          "old_line_content": "            CHECK_Z( ZSTD_initDStream_usingDict(zd, dict, dictSize) );",
          "new_line_content": "        if (!dictSize /* don't reset if dictionary : could be different */ && (FUZ_rand(&lseed) & 1)) {",
          "content_same": false
        },
        {
          "line": 1513,
          "old_api": "DISPLAYLEVEL",
          "new_api": "FUZ_randomLength",
          "old_text": "DISPLAYLEVEL(5, \"ZSTD_decompressStream input %u bytes (pos:%u/%u)\\n\",\n                            (U32)readCSrcSize, (U32)inBuff.pos, (U32)cSize)",
          "new_text": "FUZ_randomLength(&lseed, maxSampleLog)",
          "old_line_content": "                DISPLAYLEVEL(5, \"ZSTD_decompressStream input %u bytes (pos:%u/%u)\\n\",",
          "new_line_content": "                size_t const readCSrcSize = FUZ_randomLength(&lseed, maxSampleLog);",
          "content_same": false
        },
        {
          "line": 1515,
          "old_api": "ZSTD_decompressStream",
          "new_api": "MIN",
          "old_text": "ZSTD_decompressStream(zd, &outBuff, &inBuff)",
          "new_text": "MIN(dstBufferSize - totalGenSize, randomDstSize)",
          "old_line_content": "                decompressionResult = ZSTD_decompressStream(zd, &outBuff, &inBuff);",
          "new_line_content": "                size_t const dstBuffSize = MIN(dstBufferSize - totalGenSize, randomDstSize);",
          "content_same": false
        },
        {
          "line": 1520,
          "old_api": "CHECK (inBuff.pos != cSize, \"compressed data should be fully read (%u != %u)\", (U32)inBuff.pos, (U32)cSize)",
          "new_api": "ZSTD_decompressStream",
          "old_text": "CHECK (inBuff.pos != cSize, \"compressed data should be fully read (%u != %u)\", (U32)inBuff.pos, (U32)cSize)",
          "new_text": "ZSTD_decompressStream(zd, &outBuff, &inBuff)",
          "old_line_content": "            CHECK (inBuff.pos != cSize, \"compressed data should be fully read (%u != %u)\", (U32)inBuff.pos, (U32)cSize);",
          "new_line_content": "                decompressionResult = ZSTD_decompressStream(zd, &outBuff, &inBuff);",
          "content_same": false
        },
        {
          "line": 1521,
          "old_api": "XXH64",
          "new_api": "ZSTD_getErrorName",
          "old_text": "XXH64(dstBuffer, totalTestSize, 0)",
          "new_text": "ZSTD_getErrorName(decompressionResult)",
          "old_line_content": "            {   U64 const crcDest = XXH64(dstBuffer, totalTestSize, 0);",
          "new_line_content": "                CHECK (ZSTD_isError(decompressionResult), \"decompression error : %s\", ZSTD_getErrorName(decompressionResult));",
          "content_same": false
        },
        {
          "line": 1522,
          "old_api": "findDiff",
          "new_api": "DISPLAYLEVEL",
          "old_text": "findDiff(copyBuffer, dstBuffer, totalTestSize)",
          "new_text": "DISPLAYLEVEL(5, \"inBuff.pos = %u \\n\", (U32)readCSrcSize)",
          "old_line_content": "                if (crcDest!=crcOrig) findDiff(copyBuffer, dstBuffer, totalTestSize);",
          "new_line_content": "                DISPLAYLEVEL(5, \"inBuff.pos = %u \\n\", (U32)readCSrcSize);",
          "content_same": false
        },
        {
          "line": 1539,
          "old_api": "ZSTD_initDStream",
          "new_api": "FUZ_rand",
          "old_text": "ZSTD_initDStream(zd_noise)",
          "new_text": "FUZ_rand(&lseed)",
          "old_line_content": "        CHECK_Z( ZSTD_initDStream(zd_noise) );   /* note : no dictionary */",
          "new_line_content": "                size_t const cStart = FUZ_rand(&lseed) % (cSize - noiseSize);",
          "content_same": false
        },
        {
          "line": 1544,
          "old_api": "FUZ_randomLength",
          "new_api": "ZSTD_initDStream",
          "old_text": "FUZ_randomLength(&lseed, maxSampleLog)",
          "new_text": "ZSTD_initDStream(zd_noise)",
          "old_line_content": "                size_t const randomDstSize = FUZ_randomLength(&lseed, maxSampleLog);",
          "new_line_content": "        CHECK_Z( ZSTD_initDStream(zd_noise) );   /* note : no dictionary */",
          "content_same": false
        },
        {
          "line": 1549,
          "old_api": "ZSTD_decompressStream",
          "new_api": "FUZ_randomLength",
          "old_text": "ZSTD_decompressStream(zd, &outBuff, &inBuff)",
          "new_text": "FUZ_randomLength(&lseed, maxSampleLog)",
          "old_line_content": "                {   size_t const decompressError = ZSTD_decompressStream(zd, &outBuff, &inBuff);",
          "new_line_content": "                size_t const randomDstSize = FUZ_randomLength(&lseed, maxSampleLog);",
          "content_same": false
        },
        {
          "line": 1550,
          "old_api": "ZSTD_isError",
          "new_api": "MIN",
          "old_text": "ZSTD_isError(decompressError)",
          "new_text": "MIN(dstBufferSize - outBuff.pos, randomDstSize)",
          "old_line_content": "                    if (ZSTD_isError(decompressError)) break;   /* error correctly detected */",
          "new_line_content": "                size_t const adjustedDstSize = MIN(dstBufferSize - outBuff.pos, randomDstSize);",
          "content_same": false
        },
        {
          "line": 1554,
          "old_api": "DISPLAY",
          "new_api": "ZSTD_decompressStream",
          "old_text": "DISPLAY(\"\\r%u fuzzer tests completed   \\n\", testNb-1)",
          "new_text": "ZSTD_decompressStream(zd, &outBuff, &inBuff)",
          "old_line_content": "    DISPLAY(\"\\r%u fuzzer tests completed   \\n\", testNb-1);",
          "new_line_content": "                {   size_t const decompressError = ZSTD_decompressStream(zd, &outBuff, &inBuff);",
          "content_same": false
        },
        {
          "line": 1559,
          "old_api": "ZSTD_freeDStream",
          "new_api": "DISPLAY",
          "old_text": "ZSTD_freeDStream(zd_noise)",
          "new_text": "DISPLAY(\"\\r%u fuzzer tests completed   \\n\", testNb-1)",
          "old_line_content": "    ZSTD_freeDStream(zd_noise);",
          "new_line_content": "    DISPLAY(\"\\r%u fuzzer tests completed   \\n\", testNb-1);",
          "content_same": false
        },
        {
          "line": 1562,
          "old_api": "free",
          "new_api": "ZSTD_freeCCtx",
          "old_text": "free(cNoiseBuffer[1])",
          "new_text": "ZSTD_freeCCtx(zc)",
          "old_line_content": "    free(cNoiseBuffer[1]);",
          "new_line_content": "    ZSTD_freeCCtx(zc);",
          "content_same": false
        },
        {
          "line": 1563,
          "old_api": "free",
          "new_api": "ZSTD_freeDStream",
          "old_text": "free(cNoiseBuffer[2])",
          "new_text": "ZSTD_freeDStream(zd)",
          "old_line_content": "    free(cNoiseBuffer[2]);",
          "new_line_content": "    ZSTD_freeDStream(zd);",
          "content_same": false
        },
        {
          "line": 1564,
          "old_api": "free",
          "new_api": "ZSTD_freeDStream",
          "old_text": "free(cNoiseBuffer[3])",
          "new_text": "ZSTD_freeDStream(zd_noise)",
          "old_line_content": "    free(cNoiseBuffer[3]);",
          "new_line_content": "    ZSTD_freeDStream(zd_noise);",
          "content_same": false
        },
        {
          "line": 1565,
          "old_api": "free",
          "new_api": "ZSTD_freeCCtxParams",
          "old_text": "free(cNoiseBuffer[4])",
          "new_text": "ZSTD_freeCCtxParams(cctxParams)",
          "old_line_content": "    free(cNoiseBuffer[4]);",
          "new_line_content": "    ZSTD_freeCCtxParams(cctxParams);",
          "content_same": false
        },
        {
          "line": 1710,
          "old_api": "DISPLAY",
          "new_api": "FUZ_usage",
          "old_text": "DISPLAY(\"Starting zstream tester (%i-bits, %s)\\n\", (int)(sizeof(size_t)*8), ZSTD_VERSION_STRING)",
          "new_text": "FUZ_usage(programName)",
          "old_line_content": "    DISPLAY(\"Starting zstream tester (%i-bits, %s)\\n\", (int)(sizeof(size_t)*8), ZSTD_VERSION_STRING);",
          "new_line_content": "                    return FUZ_usage(programName);",
          "content_same": false
        },
        {
          "line": 1718,
          "old_api": "DISPLAY",
          "new_api": "time",
          "old_text": "DISPLAY(\"Seed = %u\\n\", seed)",
          "new_text": "time(NULL)",
          "old_line_content": "    DISPLAY(\"Seed = %u\\n\", seed);",
          "new_line_content": "        time_t const t = time(NULL);",
          "content_same": false
        },
        {
          "line": 1719,
          "old_api": "DISPLAY",
          "new_api": "XXH32",
          "old_text": "DISPLAY(\"Compressibility : %i%%\\n\", proba)",
          "new_text": "XXH32(&t, sizeof(t), 1)",
          "old_line_content": "    if (proba!=FUZ_COMPRESSIBILITY_DEFAULT) DISPLAY(\"Compressibility : %i%%\\n\", proba);",
          "new_line_content": "        U32 const h = XXH32(&t, sizeof(t), 1);",
          "content_same": false
        },
        {
          "line": 1724,
          "old_api": "basicUnitTests",
          "new_api": "DISPLAY",
          "old_text": "basicUnitTests(0, ((double)proba) / 100, customNULL)",
          "new_text": "DISPLAY(\"Compressibility : %i%%\\n\", proba)",
          "old_line_content": "        result = basicUnitTests(0, ((double)proba) / 100, customNULL);  /* constant seed for predictability */",
          "new_line_content": "    if (proba!=FUZ_COMPRESSIBILITY_DEFAULT) DISPLAY(\"Compressibility : %i%%\\n\", proba);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1536,
          "old_api": null,
          "new_api": "FUZ_randomLength",
          "old_text": null,
          "new_text": "FUZ_randomLength(&lseed, maxSampleLog)",
          "old_line_content": "        }   }",
          "new_line_content": "                size_t const randomNoiseSize = FUZ_randomLength(&lseed, maxSampleLog);",
          "content_same": false
        },
        {
          "line": 1537,
          "old_api": null,
          "new_api": "MIN",
          "old_text": null,
          "new_text": "MIN((cSize/3) , randomNoiseSize)",
          "old_line_content": "",
          "new_line_content": "                size_t const noiseSize  = MIN((cSize/3) , randomNoiseSize);",
          "content_same": false
        },
        {
          "line": 1538,
          "old_api": null,
          "new_api": "FUZ_rand",
          "old_text": null,
          "new_text": "FUZ_rand(&lseed)",
          "old_line_content": "        /* try decompression on noisy data */",
          "new_line_content": "                size_t const noiseStart = FUZ_rand(&lseed) % (srcBufferSize - noiseSize);",
          "content_same": false
        },
        {
          "line": 1540,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(cBuffer+cStart, srcBuffer+noiseStart, noiseSize)",
          "old_line_content": "        {   ZSTD_inBuffer  inBuff = { cBuffer, cSize, 0 };",
          "new_line_content": "                memcpy(cBuffer+cStart, srcBuffer+noiseStart, noiseSize);",
          "content_same": false
        },
        {
          "line": 1548,
          "old_api": null,
          "new_api": "FUZ_randomLength",
          "old_text": null,
          "new_text": "FUZ_randomLength(&lseed, maxSampleLog)",
          "old_line_content": "                inBuff.size  = inBuff.pos + adjustedCSrcSize;",
          "new_line_content": "                size_t const randomCSrcSize = FUZ_randomLength(&lseed, maxSampleLog);",
          "content_same": false
        },
        {
          "line": 1551,
          "old_api": null,
          "new_api": "MIN",
          "old_text": null,
          "new_text": "MIN(cSize - inBuff.pos, randomCSrcSize)",
          "old_line_content": "                    /* Good so far, but no more progress possible */",
          "new_line_content": "                size_t const adjustedCSrcSize = MIN(cSize - inBuff.pos, randomCSrcSize);",
          "content_same": false
        },
        {
          "line": 1555,
          "old_api": null,
          "new_api": "ZSTD_isError",
          "old_text": null,
          "new_text": "ZSTD_isError(decompressError)",
          "old_line_content": "",
          "new_line_content": "                    if (ZSTD_isError(decompressError)) break;   /* error correctly detected */",
          "content_same": false
        },
        {
          "line": 1569,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(cNoiseBuffer[3])",
          "old_line_content": "    return result;",
          "new_line_content": "    free(cNoiseBuffer[3]);",
          "content_same": false
        },
        {
          "line": 1570,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(cNoiseBuffer[4])",
          "old_line_content": "",
          "new_line_content": "    free(cNoiseBuffer[4]);",
          "content_same": false
        },
        {
          "line": 1571,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(copyBuffer)",
          "old_line_content": "_output_error:",
          "new_line_content": "    free(copyBuffer);",
          "content_same": false
        },
        {
          "line": 1572,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(cBuffer)",
          "old_line_content": "    result = 1;",
          "new_line_content": "    free(cBuffer);",
          "content_same": false
        },
        {
          "line": 1573,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(dstBuffer)",
          "old_line_content": "    goto _cleanup;",
          "new_line_content": "    free(dstBuffer);",
          "content_same": false
        },
        {
          "line": 1592,
          "old_api": null,
          "new_api": "DISPLAY",
          "old_text": null,
          "new_text": "DISPLAY( \" -t#    : Select starting test number (default:0)\\n\")",
          "old_line_content": "    return 0;",
          "new_line_content": "    DISPLAY( \" -t#    : Select starting test number (default:0)\\n\");",
          "content_same": false
        },
        {
          "line": 1593,
          "old_api": null,
          "new_api": "DISPLAY",
          "old_text": null,
          "new_text": "DISPLAY( \" -P#    : Select compressibility in %% (default:%i%%)\\n\", FUZ_COMPRESSIBILITY_DEFAULT)",
          "old_line_content": "}",
          "new_line_content": "    DISPLAY( \" -P#    : Select compressibility in %% (default:%i%%)\\n\", FUZ_COMPRESSIBILITY_DEFAULT);",
          "content_same": false
        },
        {
          "line": 1594,
          "old_api": null,
          "new_api": "DISPLAY",
          "old_text": null,
          "new_text": "DISPLAY( \" -v     : verbose\\n\")",
          "old_line_content": "",
          "new_line_content": "    DISPLAY( \" -v     : verbose\\n\");",
          "content_same": false
        },
        {
          "line": 1595,
          "old_api": null,
          "new_api": "DISPLAY",
          "old_text": null,
          "new_text": "DISPLAY( \" -p     : pause at the end\\n\")",
          "old_line_content": "typedef enum { simple_api, mt_api, advanced_api } e_api;",
          "new_line_content": "    DISPLAY( \" -p     : pause at the end\\n\");",
          "content_same": false
        },
        {
          "line": 1596,
          "old_api": null,
          "new_api": "DISPLAY",
          "old_text": null,
          "new_text": "DISPLAY( \" -h     : display help and exit\\n\")",
          "old_line_content": "",
          "new_line_content": "    DISPLAY( \" -h     : display help and exit\\n\");",
          "content_same": false
        },
        {
          "line": 1626,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(argument, \"--mt\")",
          "old_line_content": "            argument++;",
          "new_line_content": "            if (!strcmp(argument, \"--mt\")) { selected_api=mt_api; continue; }",
          "content_same": false
        },
        {
          "line": 1627,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(argument, \"--newapi\")",
          "old_line_content": "            while (*argument!=0) {",
          "new_line_content": "            if (!strcmp(argument, \"--newapi\")) { selected_api=advanced_api; continue; }",
          "content_same": false
        },
        {
          "line": 1628,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(argument, \"--opaqueapi\")",
          "old_line_content": "                switch(*argument)",
          "new_line_content": "            if (!strcmp(argument, \"--opaqueapi\")) { selected_api=advanced_api; useOpaqueAPI = 1; continue; }",
          "content_same": false
        },
        {
          "line": 1629,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(argument, \"--no-big-tests\")",
          "old_line_content": "                {",
          "new_line_content": "            if (!strcmp(argument, \"--no-big-tests\")) { bigTests=0; continue; }",
          "content_same": false
        },
        {
          "line": 1636,
          "old_api": null,
          "new_api": "FUZ_usage",
          "old_text": null,
          "new_text": "FUZ_usage(programName)",
          "old_line_content": "                    break;",
          "new_line_content": "                    return FUZ_usage(programName);",
          "content_same": false
        },
        {
          "line": 1715,
          "old_api": null,
          "new_api": "DISPLAY",
          "old_text": null,
          "new_text": "DISPLAY(\"Starting zstream tester (%i-bits, %s)\\n\", (int)(sizeof(size_t)*8), ZSTD_VERSION_STRING)",
          "old_line_content": "        seed = h % 10000;",
          "new_line_content": "    DISPLAY(\"Starting zstream tester (%i-bits, %s)\\n\", (int)(sizeof(size_t)*8), ZSTD_VERSION_STRING);",
          "content_same": false
        },
        {
          "line": 1723,
          "old_api": null,
          "new_api": "DISPLAY",
          "old_text": null,
          "new_text": "DISPLAY(\"Seed = %u\\n\", seed)",
          "old_line_content": "    if (testNb==0) {",
          "new_line_content": "    DISPLAY(\"Seed = %u\\n\", seed);",
          "content_same": false
        },
        {
          "line": 1729,
          "old_api": null,
          "new_api": "basicUnitTests",
          "old_text": null,
          "new_text": "basicUnitTests(0, ((double)proba) / 100, customNULL)",
          "old_line_content": "        {",
          "new_line_content": "        result = basicUnitTests(0, ((double)proba) / 100, customNULL);  /* constant seed for predictability */",
          "content_same": false
        },
        {
          "line": 1736,
          "old_api": null,
          "new_api": "fuzzerTests",
          "old_text": null,
          "new_text": "fuzzerTests(seed, nbTests, testNb, ((double)proba) / 100, bigTests)",
          "old_line_content": "        case advanced_api :",
          "new_line_content": "            result = fuzzerTests(seed, nbTests, testNb, ((double)proba) / 100, bigTests);",
          "content_same": false
        },
        {
          "line": 1739,
          "old_api": null,
          "new_api": "fuzzerTests_MT",
          "old_text": null,
          "new_text": "fuzzerTests_MT(seed, nbTests, testNb, ((double)proba) / 100, bigTests)",
          "old_line_content": "        default :",
          "new_line_content": "            result = fuzzerTests_MT(seed, nbTests, testNb, ((double)proba) / 100, bigTests);",
          "content_same": false
        },
        {
          "line": 1742,
          "old_api": null,
          "new_api": "fuzzerTests_newAPI",
          "old_text": null,
          "new_text": "fuzzerTests_newAPI(seed, nbTests, testNb, ((double)proba) / 100, bigTests, useOpaqueAPI)",
          "old_line_content": "    }",
          "new_line_content": "            result = fuzzerTests_newAPI(seed, nbTests, testNb, ((double)proba) / 100, bigTests, useOpaqueAPI);",
          "content_same": false
        },
        {
          "line": 1745,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(0)",
          "old_line_content": "        int unused;",
          "new_line_content": "            assert(0);   /* impossible */",
          "content_same": false
        },
        {
          "line": 1751,
          "old_api": null,
          "new_api": "DISPLAY",
          "old_text": null,
          "new_text": "DISPLAY(\"Press Enter \\n\")",
          "old_line_content": "}",
          "new_line_content": "        DISPLAY(\"Press Enter \\n\");",
          "content_same": false
        },
        {
          "line": 1752,
          "old_api": null,
          "new_api": "getchar",
          "old_text": null,
          "new_text": "getchar()",
          "old_line_content": "",
          "new_line_content": "        unused = getchar();",
          "content_same": false
        },
        {
          "line": 1283,
          "old_api": null,
          "new_api": "ZSTD_maxCLevel",
          "old_text": null,
          "new_text": "ZSTD_maxCLevel()",
          "old_line_content": "    U32 const nbThreadsMax = bigTests ? 5 : 1;",
          "new_line_content": "    U32 const cLevelMax = bigTests ? (U32)ZSTD_maxCLevel()-1 : g_cLevelMax_smallTests;",
          "content_same": false
        },
        {
          "line": 1285,
          "old_api": null,
          "new_api": "ZSTD_createCCtxParams",
          "old_text": null,
          "new_text": "ZSTD_createCCtxParams()",
          "old_line_content": "",
          "new_line_content": "    ZSTD_CCtx_params* cctxParams = ZSTD_createCCtxParams();",
          "content_same": false
        },
        {
          "line": 1293,
          "old_api": null,
          "new_api": "CHECK (!cNoiseBuffer[0] || !cNoiseBuffer[1] || !cNoiseBuffer[2] || !cNoiseBuffer[3] || !cNoiseBuffer[4] ||\n           !copyBuffer || !dstBuffer || !cBuffer || !zc || !zd || !zd_noise ,\n           \"Not enough memory, fuzzer tests cancelled\")",
          "old_text": null,
          "new_text": "CHECK (!cNoiseBuffer[0] || !cNoiseBuffer[1] || !cNoiseBuffer[2] || !cNoiseBuffer[3] || !cNoiseBuffer[4] ||\n           !copyBuffer || !dstBuffer || !cBuffer || !zc || !zd || !zd_noise ,\n           \"Not enough memory, fuzzer tests cancelled\")",
          "old_line_content": "           !copyBuffer || !dstBuffer || !cBuffer || !zc || !zd || !zd_noise ,",
          "new_line_content": "    CHECK (!cNoiseBuffer[0] || !cNoiseBuffer[1] || !cNoiseBuffer[2] || !cNoiseBuffer[3] || !cNoiseBuffer[4] ||",
          "content_same": false
        },
        {
          "line": 1304,
          "old_api": null,
          "new_api": "ZSTD_initDStream_usingDict",
          "old_text": null,
          "new_text": "ZSTD_initDStream_usingDict(zd, NULL, 0)",
          "old_line_content": "",
          "new_line_content": "    CHECK_Z( ZSTD_initDStream_usingDict(zd, NULL, 0) );   /* ensure at least one init */",
          "content_same": false
        },
        {
          "line": 1308,
          "old_api": null,
          "new_api": "FUZ_rand",
          "old_text": null,
          "new_text": "FUZ_rand(&coreSeed)",
          "old_line_content": "",
          "new_line_content": "        FUZ_rand(&coreSeed);",
          "content_same": false
        },
        {
          "line": 1311,
          "old_api": null,
          "new_api": "FUZ_GetClockSpan",
          "old_text": null,
          "new_text": "FUZ_GetClockSpan(startClock)",
          "old_line_content": "        U32 lseed;",
          "new_line_content": "    for ( ; (testNb <= nbTests) || (FUZ_GetClockSpan(startClock) < g_clockTime) ; testNb++ ) {",
          "content_same": false
        },
        {
          "line": 1323,
          "old_api": null,
          "new_api": "FUZ_rand",
          "old_text": null,
          "new_text": "FUZ_rand(&coreSeed)",
          "old_line_content": "        lseed = coreSeed ^ prime32;",
          "new_line_content": "        FUZ_rand(&coreSeed);",
          "content_same": false
        },
        {
          "line": 1332,
          "old_api": null,
          "new_api": "CHECK",
          "old_text": null,
          "new_text": "CHECK(zc==NULL, \"ZSTD_createCCtx allocation error\")",
          "old_line_content": "            resetAllowed=0;",
          "new_line_content": "            CHECK(zc==NULL, \"ZSTD_createCCtx allocation error\");",
          "content_same": false
        },
        {
          "line": 1339,
          "old_api": null,
          "new_api": "ZSTD_initDStream_usingDict",
          "old_text": null,
          "new_text": "ZSTD_initDStream_usingDict(zd, NULL, 0)",
          "old_line_content": "        }",
          "new_line_content": "            ZSTD_initDStream_usingDict(zd, NULL, 0);  /* ensure at least one init */",
          "content_same": false
        },
        {
          "line": 1343,
          "old_api": null,
          "new_api": "FUZ_rand",
          "old_text": null,
          "new_text": "FUZ_rand(&lseed)",
          "old_line_content": "            if (buffNb & 7) buffNb=2;   /* most common : compressible (P) */",
          "new_line_content": "        {   U32 buffNb = FUZ_rand(&lseed) & 0x7F;",
          "content_same": false
        },
        {
          "line": 1359,
          "old_api": null,
          "new_api": "FUZ_rand",
          "old_text": null,
          "new_text": "FUZ_rand(&lseed)",
          "old_line_content": "            && oldTestLog /* at least one test happened */ && resetAllowed) {",
          "new_line_content": "        if ((FUZ_rand(&lseed)&1) /* at beginning, to keep same nb of rand */",
          "content_same": false
        },
        {
          "line": 1361,
          "old_api": null,
          "new_api": "FUZ_randomLength",
          "old_text": null,
          "new_text": "FUZ_randomLength(&lseed, oldTestLog+2)",
          "old_line_content": "            if (maxTestSize >= srcBufferSize) maxTestSize = srcBufferSize-1;",
          "new_line_content": "            maxTestSize = FUZ_randomLength(&lseed, oldTestLog+2);",
          "content_same": false
        },
        {
          "line": 1364,
          "old_api": null,
          "new_api": "setCCtxParameter",
          "old_text": null,
          "new_text": "setCCtxParameter(zc, cctxParams, ZSTD_p_compressionLevel, compressionLevel, useOpaqueAPI)",
          "old_line_content": "            }",
          "new_line_content": "                CHECK_Z (setCCtxParameter(zc, cctxParams, ZSTD_p_compressionLevel, compressionLevel, useOpaqueAPI) );",
          "content_same": false
        },
        {
          "line": 1371,
          "old_api": null,
          "new_api": "MAX",
          "old_text": null,
          "new_text": "MAX(testLog, dictLog)",
          "old_line_content": "                               1;",
          "new_line_content": "                               (MAX(testLog, dictLog) / 3))) +",
          "content_same": false
        },
        {
          "line": 1374,
          "old_api": null,
          "new_api": "FUZ_rLogLength",
          "old_text": null,
          "new_text": "FUZ_rLogLength(&lseed, testLog)",
          "old_line_content": "            oldTestLog = testLog;",
          "new_line_content": "            maxTestSize = FUZ_rLogLength(&lseed, testLog);",
          "content_same": false
        },
        {
          "line": 1378,
          "old_api": null,
          "new_api": "FUZ_rand",
          "old_text": null,
          "new_text": "FUZ_rand(&lseed)",
          "old_line_content": "                dict = srcBuffer + dictStart;",
          "new_line_content": "            {   size_t const dictStart = FUZ_rand(&lseed) % (srcBufferSize - dictSize);",
          "content_same": false
        },
        {
          "line": 1383,
          "old_api": null,
          "new_api": "ZSTD_getCParams",
          "old_text": null,
          "new_text": "ZSTD_getCParams(cLevel, pledgedSrcSize, dictSize)",
          "old_line_content": "",
          "new_line_content": "                ZSTD_compressionParameters cParams = ZSTD_getCParams(cLevel, pledgedSrcSize, dictSize);",
          "content_same": false
        },
        {
          "line": 1393,
          "old_api": null,
          "new_api": "ZSTD_adjustCParams",
          "old_text": null,
          "new_text": "ZSTD_adjustCParams(cParams, 0, 0)",
          "old_line_content": "",
          "new_line_content": "                cParams = ZSTD_adjustCParams(cParams, 0, 0);",
          "content_same": false
        },
        {
          "line": 1400,
          "old_api": null,
          "new_api": "setCCtxParameter",
          "old_text": null,
          "new_text": "setCCtxParameter(zc, cctxParams, ZSTD_p_hashLog, cParams.hashLog, useOpaqueAPI)",
          "old_line_content": "",
          "new_line_content": "                if (FUZ_rand(&lseed) & 1) CHECK_Z( setCCtxParameter(zc, cctxParams, ZSTD_p_hashLog, cParams.hashLog, useOpaqueAPI) );",
          "content_same": false
        },
        {
          "line": 1401,
          "old_api": null,
          "new_api": "setCCtxParameter",
          "old_text": null,
          "new_text": "setCCtxParameter(zc, cctxParams, ZSTD_p_chainLog, cParams.chainLog, useOpaqueAPI)",
          "old_line_content": "                /* mess with long distance matching parameters */",
          "new_line_content": "                if (FUZ_rand(&lseed) & 1) CHECK_Z( setCCtxParameter(zc, cctxParams, ZSTD_p_chainLog, cParams.chainLog, useOpaqueAPI) );",
          "content_same": false
        },
        {
          "line": 1407,
          "old_api": null,
          "new_api": "FUZ_rand",
          "old_text": null,
          "new_text": "FUZ_rand(&lseed)",
          "old_line_content": "",
          "new_line_content": "                if (FUZ_rand(&lseed) & 1) CHECK_Z( setCCtxParameter(zc, cctxParams, ZSTD_p_enableLongDistanceMatching, FUZ_rand(&lseed) & 63, useOpaqueAPI) );",
          "content_same": false
        },
        {
          "line": 1408,
          "old_api": null,
          "new_api": "FUZ_randomClampedLength",
          "old_text": null,
          "new_text": "FUZ_randomClampedLength(&lseed, ZSTD_HASHLOG_MIN, 23)",
          "old_line_content": "                /* unconditionally set, to be sync with decoder */",
          "new_line_content": "                if (FUZ_rand(&lseed) & 3) CHECK_Z( setCCtxParameter(zc, cctxParams, ZSTD_p_ldmHashLog, FUZ_randomClampedLength(&lseed, ZSTD_HASHLOG_MIN, 23), useOpaqueAPI) );",
          "content_same": false
        },
        {
          "line": 1409,
          "old_api": null,
          "new_api": "FUZ_randomClampedLength",
          "old_text": null,
          "new_text": "FUZ_randomClampedLength(&lseed, ZSTD_LDM_MINMATCH_MIN, ZSTD_LDM_MINMATCH_MAX)",
          "old_line_content": "                /* mess with frame parameters */",
          "new_line_content": "                if (FUZ_rand(&lseed) & 3) CHECK_Z( setCCtxParameter(zc, cctxParams, ZSTD_p_ldmMinMatch, FUZ_randomClampedLength(&lseed, ZSTD_LDM_MINMATCH_MIN, ZSTD_LDM_MINMATCH_MAX), useOpaqueAPI) );",
          "content_same": false
        },
        {
          "line": 1415,
          "old_api": null,
          "new_api": "FUZ_rand",
          "old_text": null,
          "new_text": "FUZ_rand(&lseed)",
          "old_line_content": "",
          "new_line_content": "                if (FUZ_rand(&lseed) & 1) CHECK_Z( setCCtxParameter(zc, cctxParams, ZSTD_p_dictIDFlag, FUZ_rand(&lseed) & 1, useOpaqueAPI) );",
          "content_same": false
        },
        {
          "line": 1416,
          "old_api": null,
          "new_api": "FUZ_rand",
          "old_text": null,
          "new_text": "FUZ_rand(&lseed)",
          "old_line_content": "                /* multi-threading parameters */",
          "new_line_content": "                if (FUZ_rand(&lseed) & 1) CHECK_Z( setCCtxParameter(zc, cctxParams, ZSTD_p_contentSizeFlag, FUZ_rand(&lseed) & 1, useOpaqueAPI) );",
          "content_same": false
        },
        {
          "line": 1424,
          "old_api": null,
          "new_api": "setCCtxParameter",
          "old_text": null,
          "new_text": "setCCtxParameter(zc, cctxParams, ZSTD_p_nbThreads, nbThreads, useOpaqueAPI)",
          "old_line_content": "                    }",
          "new_line_content": "                    CHECK_Z( setCCtxParameter(zc, cctxParams, ZSTD_p_nbThreads, nbThreads, useOpaqueAPI) );",
          "content_same": false
        },
        {
          "line": 1426,
          "old_api": null,
          "new_api": "FUZ_rand",
          "old_text": null,
          "new_text": "FUZ_rand(&lseed)",
          "old_line_content": "",
          "new_line_content": "                        U32 const jobLog = FUZ_rand(&lseed) % (testLog+1);",
          "content_same": false
        },
        {
          "line": 1428,
          "old_api": null,
          "new_api": "FUZ_rLogLength",
          "old_text": null,
          "new_text": "FUZ_rLogLength(&lseed, jobLog)",
          "old_line_content": "",
          "new_line_content": "                        CHECK_Z( setCCtxParameter(zc, cctxParams, ZSTD_p_jobSize, (U32)FUZ_rLogLength(&lseed, jobLog), useOpaqueAPI) );",
          "content_same": false
        },
        {
          "line": 1432,
          "old_api": null,
          "new_api": "FUZ_rand",
          "old_text": null,
          "new_text": "FUZ_rand(&lseed)",
          "old_line_content": "                }",
          "new_line_content": "                if (FUZ_rand(&lseed) & 1) CHECK_Z (setCCtxParameter(zc, cctxParams, ZSTD_p_forceMaxWindow, FUZ_rand(&lseed) & 1, useOpaqueAPI) );",
          "content_same": false
        },
        {
          "line": 1439,
          "old_api": null,
          "new_api": "FUZ_rand",
          "old_text": null,
          "new_text": "FUZ_rand(&lseed)",
          "old_line_content": "                    }",
          "new_line_content": "                if (FUZ_rand(&lseed) & 1) {",
          "content_same": false
        },
        {
          "line": 1440,
          "old_api": null,
          "new_api": "FUZ_rand",
          "old_text": null,
          "new_text": "FUZ_rand(&lseed)",
          "old_line_content": "                    if (dict && dictSize) {",
          "new_line_content": "                    if (FUZ_rand(&lseed) & 1) {",
          "content_same": false
        },
        {
          "line": 1441,
          "old_api": null,
          "new_api": "ZSTD_CCtx_loadDictionary",
          "old_text": null,
          "new_text": "ZSTD_CCtx_loadDictionary(zc, dict, dictSize)",
          "old_line_content": "                        /* test that compression parameters are rejected (correctly) after loading a non-NULL dictionary */",
          "new_line_content": "                        CHECK_Z( ZSTD_CCtx_loadDictionary(zc, dict, dictSize) );",
          "content_same": false
        },
        {
          "line": 1448,
          "old_api": null,
          "new_api": "ZSTD_CCtx_setParametersUsingCCtxParams",
          "old_text": null,
          "new_text": "ZSTD_CCtx_setParametersUsingCCtxParams(zc, cctxParams)",
          "old_line_content": "                        }",
          "new_line_content": "                            size_t const setError = ZSTD_CCtx_setParametersUsingCCtxParams(zc, cctxParams);",
          "content_same": false
        },
        {
          "line": 1449,
          "old_api": null,
          "new_api": "ZSTD_isError",
          "old_text": null,
          "new_text": "ZSTD_isError(setError)",
          "old_line_content": "                    }",
          "new_line_content": "                            CHECK(!ZSTD_isError(setError), \"ZSTD_CCtx_setParametersUsingCCtxParams should have failed\");",
          "content_same": false
        },
        {
          "line": 1452,
          "old_api": null,
          "new_api": "ZSTD_isError",
          "old_text": null,
          "new_text": "ZSTD_isError(setError)",
          "old_line_content": "                }",
          "new_line_content": "                            CHECK(!ZSTD_isError(setError), \"ZSTD_CCtx_setParameter should have failed\");",
          "content_same": false
        },
        {
          "line": 1466,
          "old_api": null,
          "new_api": "MIN",
          "old_text": null,
          "new_text": "MIN(maxTestSize-totalTestSize, randomSrcSize)",
          "old_line_content": "                ZSTD_inBuffer inBuff = { srcBuffer+srcStart, srcSize, 0 };",
          "new_line_content": "                size_t const srcSize = MIN(maxTestSize-totalTestSize, randomSrcSize);",
          "content_same": false
        },
        {
          "line": 1467,
          "old_api": null,
          "new_api": "FUZ_rand",
          "old_text": null,
          "new_text": "FUZ_rand(&lseed)",
          "old_line_content": "                outBuff.size = outBuff.pos + dstBuffSize;",
          "new_line_content": "                size_t const srcStart = FUZ_rand(&lseed) % (srcBufferSize - srcSize);",
          "content_same": false
        },
        {
          "line": 1468,
          "old_api": null,
          "new_api": "FUZ_randomLength",
          "old_text": null,
          "new_text": "FUZ_randomLength(&lseed, maxSampleLog+1)",
          "old_line_content": "",
          "new_line_content": "                size_t const randomDstSize = FUZ_randomLength(&lseed, maxSampleLog+1);",
          "content_same": false
        },
        {
          "line": 1475,
          "old_api": null,
          "new_api": "DISPLAYLEVEL",
          "old_text": null,
          "new_text": "DISPLAYLEVEL(5, \"compress consumed %u bytes (total : %u) \\n\",\n                    (U32)inBuff.pos, (U32)(totalTestSize + inBuff.pos))",
          "old_line_content": "                totalTestSize += inBuff.pos;",
          "new_line_content": "                DISPLAYLEVEL(5, \"compress consumed %u bytes (total : %u) \\n\",",
          "content_same": false
        },
        {
          "line": 1476,
          "old_api": null,
          "new_api": "U32)(totalTestSize + inBuff.pos)",
          "old_text": null,
          "new_text": "U32)(totalTestSize + inBuff.pos)",
          "old_line_content": "            }",
          "new_line_content": "                    (U32)inBuff.pos, (U32)(totalTestSize + inBuff.pos));",
          "content_same": false
        },
        {
          "line": 1478,
          "old_api": null,
          "new_api": "XXH64_update",
          "old_text": null,
          "new_text": "XXH64_update(&xxhState, srcBuffer+srcStart, inBuff.pos)",
          "old_line_content": "            /* final frame epilogue */",
          "new_line_content": "                XXH64_update(&xxhState, srcBuffer+srcStart, inBuff.pos);",
          "content_same": false
        },
        {
          "line": 1479,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(copyBuffer+totalTestSize, srcBuffer+srcStart, inBuff.pos)",
          "old_line_content": "            {   size_t remainingToFlush = (size_t)(-1);",
          "new_line_content": "                memcpy(copyBuffer+totalTestSize, srcBuffer+srcStart, inBuff.pos);",
          "content_same": false
        },
        {
          "line": 1488,
          "old_api": null,
          "new_api": "MIN",
          "old_text": null,
          "new_text": "MIN(cBufferSize - cSize, randomDstSize)",
          "old_line_content": "                        \"ZSTD_compress_generic w/ ZSTD_e_end error : %s\",",
          "new_line_content": "                    size_t const adjustedDstSize = MIN(cBufferSize - cSize, randomDstSize);",
          "content_same": false
        },
        {
          "line": 1490,
          "old_api": null,
          "new_api": "DISPLAYLEVEL",
          "old_text": null,
          "new_text": "DISPLAYLEVEL(5, \"End-flush into dst buffer of size %u \\n\", (U32)adjustedDstSize)",
          "old_line_content": "            }   }",
          "new_line_content": "                    DISPLAYLEVEL(5, \"End-flush into dst buffer of size %u \\n\", (U32)adjustedDstSize);",
          "content_same": false
        },
        {
          "line": 1492,
          "old_api": null,
          "new_api": "ZSTD_isError",
          "old_text": null,
          "new_text": "ZSTD_isError(remainingToFlush)",
          "old_line_content": "            cSize = outBuff.pos;",
          "new_line_content": "                    CHECK(ZSTD_isError(remainingToFlush),",
          "content_same": false
        },
        {
          "line": 1494,
          "old_api": null,
          "new_api": "ZSTD_getErrorName",
          "old_text": null,
          "new_text": "ZSTD_getErrorName(remainingToFlush)",
          "old_line_content": "        }",
          "new_line_content": "                        ZSTD_getErrorName(remainingToFlush) );",
          "content_same": false
        },
        {
          "line": 1496,
          "old_api": null,
          "new_api": "XXH64_digest",
          "old_text": null,
          "new_text": "XXH64_digest(&xxhState)",
          "old_line_content": "        /* multi - fragments decompression test */",
          "new_line_content": "            crcOrig = XXH64_digest(&xxhState);",
          "content_same": false
        },
        {
          "line": 1503,
          "old_api": null,
          "new_api": "DISPLAYLEVEL",
          "old_text": null,
          "new_text": "DISPLAYLEVEL(5, \"resetting DCtx (dict:%08X) \\n\", (U32)(size_t)dict)",
          "old_line_content": "        }",
          "new_line_content": "            DISPLAYLEVEL(5, \"resetting DCtx (dict:%08X) \\n\", (U32)(size_t)dict);",
          "content_same": false
        },
        {
          "line": 1504,
          "old_api": null,
          "new_api": "ZSTD_resetDStream",
          "old_text": null,
          "new_text": "ZSTD_resetDStream(zd)",
          "old_line_content": "        {   size_t decompressionResult = 1;",
          "new_line_content": "            CHECK_Z( ZSTD_resetDStream(zd) );",
          "content_same": false
        },
        {
          "line": 1506,
          "old_api": null,
          "new_api": "DISPLAYLEVEL",
          "old_text": null,
          "new_text": "DISPLAYLEVEL(5, \"using dict of size %u \\n\", (U32)dictSize)",
          "old_line_content": "            ZSTD_outBuffer outBuff= { dstBuffer, dstBufferSize, 0 };",
          "new_line_content": "            DISPLAYLEVEL(5, \"using dict of size %u \\n\", (U32)dictSize);",
          "content_same": false
        },
        {
          "line": 1507,
          "old_api": null,
          "new_api": "ZSTD_initDStream_usingDict",
          "old_text": null,
          "new_text": "ZSTD_initDStream_usingDict(zd, dict, dictSize)",
          "old_line_content": "            for (totalGenSize = 0 ; decompressionResult ; ) {",
          "new_line_content": "            CHECK_Z( ZSTD_initDStream_usingDict(zd, dict, dictSize) );",
          "content_same": false
        },
        {
          "line": 1514,
          "old_api": null,
          "new_api": "FUZ_randomLength",
          "old_text": null,
          "new_text": "FUZ_randomLength(&lseed, maxSampleLog)",
          "old_line_content": "                            (U32)readCSrcSize, (U32)inBuff.pos, (U32)cSize);",
          "new_line_content": "                size_t const randomDstSize = FUZ_randomLength(&lseed, maxSampleLog);",
          "content_same": false
        },
        {
          "line": 1518,
          "old_api": null,
          "new_api": "DISPLAYLEVEL",
          "old_text": null,
          "new_text": "DISPLAYLEVEL(5, \"ZSTD_decompressStream input %u bytes (pos:%u/%u)\\n\",\n                            (U32)readCSrcSize, (U32)inBuff.pos, (U32)cSize)",
          "old_line_content": "            }",
          "new_line_content": "                DISPLAYLEVEL(5, \"ZSTD_decompressStream input %u bytes (pos:%u/%u)\\n\",",
          "content_same": false
        },
        {
          "line": 1524,
          "old_api": null,
          "new_api": "CHECK (outBuff.pos != totalTestSize, \"decompressed data : wrong size (%u != %u)\", (U32)outBuff.pos, (U32)totalTestSize)",
          "old_text": null,
          "new_text": "CHECK (outBuff.pos != totalTestSize, \"decompressed data : wrong size (%u != %u)\", (U32)outBuff.pos, (U32)totalTestSize)",
          "old_line_content": "        }   }",
          "new_line_content": "            CHECK (outBuff.pos != totalTestSize, \"decompressed data : wrong size (%u != %u)\", (U32)outBuff.pos, (U32)totalTestSize);",
          "content_same": false
        },
        {
          "line": 1525,
          "old_api": null,
          "new_api": "CHECK (inBuff.pos != cSize, \"compressed data should be fully read (%u != %u)\", (U32)inBuff.pos, (U32)cSize)",
          "old_text": null,
          "new_text": "CHECK (inBuff.pos != cSize, \"compressed data should be fully read (%u != %u)\", (U32)inBuff.pos, (U32)cSize)",
          "old_line_content": "",
          "new_line_content": "            CHECK (inBuff.pos != cSize, \"compressed data should be fully read (%u != %u)\", (U32)inBuff.pos, (U32)cSize);",
          "content_same": false
        },
        {
          "line": 1526,
          "old_api": null,
          "new_api": "XXH64",
          "old_text": null,
          "new_text": "XXH64(dstBuffer, totalTestSize, 0)",
          "old_line_content": "        /*=====   noisy/erroneous src decompression test   =====*/",
          "new_line_content": "            {   U64 const crcDest = XXH64(dstBuffer, totalTestSize, 0);",
          "content_same": false
        },
        {
          "line": 1527,
          "old_api": null,
          "new_api": "findDiff",
          "old_text": null,
          "new_text": "findDiff(copyBuffer, dstBuffer, totalTestSize)",
          "old_line_content": "",
          "new_line_content": "                if (crcDest!=crcOrig) findDiff(copyBuffer, dstBuffer, totalTestSize);",
          "content_same": false
        },
        {
          "line": 1528,
          "old_api": null,
          "new_api": "CHECK (crcDest!=crcOrig, \"decompressed data corrupted\")",
          "old_text": null,
          "new_text": "CHECK (crcDest!=crcOrig, \"decompressed data corrupted\")",
          "old_line_content": "        /* add some noise */",
          "new_line_content": "                CHECK (crcDest!=crcOrig, \"decompressed data corrupted\");",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1543,
          "old_api": "FUZ_randomLength",
          "new_api": null,
          "old_text": "FUZ_randomLength(&lseed, maxSampleLog)",
          "new_text": null,
          "old_line_content": "                size_t const randomCSrcSize = FUZ_randomLength(&lseed, maxSampleLog);",
          "new_line_content": "        /* try decompression on noisy data */",
          "content_same": false
        },
        {
          "line": 1545,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(dstBufferSize - outBuff.pos, randomDstSize)",
          "new_text": null,
          "old_line_content": "                size_t const adjustedDstSize = MIN(dstBufferSize - outBuff.pos, randomDstSize);",
          "new_line_content": "        {   ZSTD_inBuffer  inBuff = { cBuffer, cSize, 0 };",
          "content_same": false
        },
        {
          "line": 1546,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(cSize - inBuff.pos, randomCSrcSize)",
          "new_text": null,
          "old_line_content": "                size_t const adjustedCSrcSize = MIN(cSize - inBuff.pos, randomCSrcSize);",
          "new_line_content": "            ZSTD_outBuffer outBuff= { dstBuffer, dstBufferSize, 0 };",
          "content_same": false
        },
        {
          "line": 1557,
          "old_api": "ZSTD_freeCCtx",
          "new_api": null,
          "old_text": "ZSTD_freeCCtx(zc)",
          "new_text": null,
          "old_line_content": "    ZSTD_freeCCtx(zc);",
          "new_line_content": "                    if (outBuff.pos < outBuff.size && inBuff.pos == cSize) break;",
          "content_same": false
        },
        {
          "line": 1558,
          "old_api": "ZSTD_freeDStream",
          "new_api": null,
          "old_text": "ZSTD_freeDStream(zd)",
          "new_text": null,
          "old_line_content": "    ZSTD_freeDStream(zd);",
          "new_line_content": "    }   }   }   }",
          "content_same": false
        },
        {
          "line": 1560,
          "old_api": "ZSTD_freeCCtxParams",
          "new_api": null,
          "old_text": "ZSTD_freeCCtxParams(cctxParams)",
          "new_text": null,
          "old_line_content": "    ZSTD_freeCCtxParams(cctxParams);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1561,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(cNoiseBuffer[0])",
          "new_text": null,
          "old_line_content": "    free(cNoiseBuffer[0]);",
          "new_line_content": "_cleanup:",
          "content_same": false
        },
        {
          "line": 1581,
          "old_api": "DISPLAY",
          "new_api": null,
          "old_text": "DISPLAY( \"Usage :\\n\")",
          "new_text": null,
          "old_line_content": "    DISPLAY( \"Usage :\\n\");",
          "new_line_content": "/*-*******************************************************",
          "content_same": false
        },
        {
          "line": 1582,
          "old_api": "DISPLAY",
          "new_api": null,
          "old_text": "DISPLAY( \"      %s [args]\\n\", programName)",
          "new_text": null,
          "old_line_content": "    DISPLAY( \"      %s [args]\\n\", programName);",
          "new_line_content": "*  Command line",
          "content_same": false
        },
        {
          "line": 1583,
          "old_api": "DISPLAY",
          "new_api": null,
          "old_text": "DISPLAY( \"\\n\")",
          "new_text": null,
          "old_line_content": "    DISPLAY( \"\\n\");",
          "new_line_content": "*********************************************************/",
          "content_same": false
        },
        {
          "line": 1584,
          "old_api": "DISPLAY",
          "new_api": null,
          "old_text": "DISPLAY( \"Arguments :\\n\")",
          "new_text": null,
          "old_line_content": "    DISPLAY( \"Arguments :\\n\");",
          "new_line_content": "int FUZ_usage(const char* programName)",
          "content_same": false
        },
        {
          "line": 1585,
          "old_api": "DISPLAY",
          "new_api": null,
          "old_text": "DISPLAY( \" -i#    : Nb of tests (default:%u) \\n\", nbTestsDefault)",
          "new_text": null,
          "old_line_content": "    DISPLAY( \" -i#    : Nb of tests (default:%u) \\n\", nbTestsDefault);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1621,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(argument, \"--mt\")",
          "new_text": null,
          "old_line_content": "            if (!strcmp(argument, \"--mt\")) { selected_api=mt_api; continue; }",
          "new_line_content": "        if(!argument) continue;   /* Protection if argument empty */",
          "content_same": false
        },
        {
          "line": 1622,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(argument, \"--newapi\")",
          "new_text": null,
          "old_line_content": "            if (!strcmp(argument, \"--newapi\")) { selected_api=advanced_api; continue; }",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1623,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(argument, \"--opaqueapi\")",
          "new_text": null,
          "old_line_content": "            if (!strcmp(argument, \"--opaqueapi\")) { selected_api=advanced_api; useOpaqueAPI = 1; continue; }",
          "new_line_content": "        /* Parsing commands. Aggregated commands are allowed */",
          "content_same": false
        },
        {
          "line": 1624,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(argument, \"--no-big-tests\")",
          "new_text": null,
          "old_line_content": "            if (!strcmp(argument, \"--no-big-tests\")) { bigTests=0; continue; }",
          "new_line_content": "        if (argument[0]=='-') {",
          "content_same": false
        },
        {
          "line": 1631,
          "old_api": "FUZ_usage",
          "new_api": null,
          "old_text": "FUZ_usage(programName)",
          "new_text": null,
          "old_line_content": "                    return FUZ_usage(programName);",
          "new_line_content": "            argument++;",
          "content_same": false
        },
        {
          "line": 1705,
          "old_api": "FUZ_usage",
          "new_api": null,
          "old_text": "FUZ_usage(programName)",
          "new_text": null,
          "old_line_content": "                    return FUZ_usage(programName);",
          "new_line_content": "                    if (proba<0) proba=0;",
          "content_same": false
        },
        {
          "line": 1713,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "        time_t const t = time(NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1714,
          "old_api": "XXH32",
          "new_api": null,
          "old_text": "XXH32(&t, sizeof(t), 1)",
          "new_text": null,
          "old_line_content": "        U32 const h = XXH32(&t, sizeof(t), 1);",
          "new_line_content": "    /* Get Seed */",
          "content_same": false
        },
        {
          "line": 1731,
          "old_api": "fuzzerTests",
          "new_api": null,
          "old_text": "fuzzerTests(seed, nbTests, testNb, ((double)proba) / 100, bigTests)",
          "new_text": null,
          "old_line_content": "            result = fuzzerTests(seed, nbTests, testNb, ((double)proba) / 100, bigTests);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1734,
          "old_api": "fuzzerTests_MT",
          "new_api": null,
          "old_text": "fuzzerTests_MT(seed, nbTests, testNb, ((double)proba) / 100, bigTests)",
          "new_text": null,
          "old_line_content": "            result = fuzzerTests_MT(seed, nbTests, testNb, ((double)proba) / 100, bigTests);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 1737,
          "old_api": "fuzzerTests_newAPI",
          "new_api": null,
          "old_text": "fuzzerTests_newAPI(seed, nbTests, testNb, ((double)proba) / 100, bigTests, useOpaqueAPI)",
          "new_text": null,
          "old_line_content": "            result = fuzzerTests_newAPI(seed, nbTests, testNb, ((double)proba) / 100, bigTests, useOpaqueAPI);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 1740,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(0)",
          "new_text": null,
          "old_line_content": "            assert(0);   /* impossible */",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 1746,
          "old_api": "DISPLAY",
          "new_api": null,
          "old_text": "DISPLAY(\"Press Enter \\n\")",
          "new_text": null,
          "old_line_content": "        DISPLAY(\"Press Enter \\n\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1747,
          "old_api": "getchar",
          "new_api": null,
          "old_text": "getchar()",
          "new_text": null,
          "old_line_content": "        unused = getchar();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1282,
          "old_api": "ZSTD_maxCLevel",
          "new_api": null,
          "old_text": "ZSTD_maxCLevel()",
          "new_text": null,
          "old_line_content": "    U32 const cLevelMax = bigTests ? (U32)ZSTD_maxCLevel() : g_cLevelMax_smallTests;",
          "new_line_content": "    U32 windowLogMalus = 0;   /* can survive between 2 loops */",
          "content_same": false
        },
        {
          "line": 1284,
          "old_api": "ZSTD_createCCtxParams",
          "new_api": null,
          "old_text": "ZSTD_createCCtxParams()",
          "new_text": null,
          "old_line_content": "    ZSTD_CCtx_params* cctxParams = ZSTD_createCCtxParams();",
          "new_line_content": "    U32 const nbThreadsMax = bigTests ? 4 : 2;",
          "content_same": false
        },
        {
          "line": 1287,
          "old_api": "malloc (srcBufferSize)",
          "new_api": null,
          "old_text": "malloc (srcBufferSize)",
          "new_text": null,
          "old_line_content": "    cNoiseBuffer[0] = (BYTE*)malloc (srcBufferSize);",
          "new_line_content": "    /* allocations */",
          "content_same": false
        },
        {
          "line": 1297,
          "old_api": "RDG_genBuffer",
          "new_api": null,
          "old_text": "RDG_genBuffer(cNoiseBuffer[0], srcBufferSize, 0.00, 0., coreSeed)",
          "new_text": null,
          "old_line_content": "    RDG_genBuffer(cNoiseBuffer[0], srcBufferSize, 0.00, 0., coreSeed);    /* pure noise */",
          "new_line_content": "    /* Create initial samples */",
          "content_same": false
        },
        {
          "line": 1307,
          "old_api": "FUZ_rand",
          "new_api": null,
          "old_text": "FUZ_rand(&coreSeed)",
          "new_text": null,
          "old_line_content": "        FUZ_rand(&coreSeed);",
          "new_line_content": "    for (testNb=1; testNb < startTest; testNb++)",
          "content_same": false
        },
        {
          "line": 1310,
          "old_api": "FUZ_GetClockSpan",
          "new_api": null,
          "old_text": "FUZ_GetClockSpan(startClock)",
          "new_text": null,
          "old_line_content": "    for ( ; (testNb <= nbTests) || (FUZ_GetClockSpan(startClock) < g_clockTime) ; testNb++ ) {",
          "new_line_content": "    /* test loop */",
          "content_same": false
        },
        {
          "line": 1320,
          "old_api": "DISPLAYUPDATE",
          "new_api": null,
          "old_text": "DISPLAYUPDATE(2, \"\\r%6u/%6u    \", testNb, nbTests)",
          "new_text": null,
          "old_line_content": "        if (nbTests >= testNb) { DISPLAYUPDATE(2, \"\\r%6u/%6u    \", testNb, nbTests); }",
          "new_line_content": "        /* init */",
          "content_same": false
        },
        {
          "line": 1327,
          "old_api": "FUZ_rand",
          "new_api": null,
          "old_text": "FUZ_rand(&lseed)",
          "new_text": null,
          "old_line_content": "        if ((FUZ_rand(&lseed) & 0xFF) == 131) {",
          "new_line_content": "        /* some issues can only happen when reusing states */",
          "content_same": false
        },
        {
          "line": 1334,
          "old_api": "FUZ_rand",
          "new_api": null,
          "old_text": "FUZ_rand(&lseed)",
          "new_text": null,
          "old_line_content": "        if ((FUZ_rand(&lseed) & 0xFF) == 132) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1342,
          "old_api": "FUZ_rand",
          "new_api": null,
          "old_text": "FUZ_rand(&lseed)",
          "new_text": null,
          "old_line_content": "        {   U32 buffNb = FUZ_rand(&lseed) & 0x7F;",
          "new_line_content": "        /* srcBuffer selection [0-4] */",
          "content_same": false
        },
        {
          "line": 1357,
          "old_api": "ZSTD_CCtx_loadDictionary",
          "new_api": null,
          "old_text": "ZSTD_CCtx_loadDictionary(zc, NULL, 0)",
          "new_text": null,
          "old_line_content": "        CHECK_Z( ZSTD_CCtx_loadDictionary(zc, NULL, 0) );   /* cancel previous dict /*/",
          "new_line_content": "        /* compression init */",
          "content_same": false
        },
        {
          "line": 1360,
          "old_api": "FUZ_randomLength",
          "new_api": null,
          "old_text": "FUZ_randomLength(&lseed, oldTestLog+2)",
          "new_text": null,
          "old_line_content": "            maxTestSize = FUZ_randomLength(&lseed, oldTestLog+2);",
          "new_line_content": "            && oldTestLog /* at least one test happened */ && resetAllowed) {",
          "content_same": false
        },
        {
          "line": 1362,
          "old_api": "FUZ_rand",
          "new_api": null,
          "old_text": "FUZ_rand(&lseed)",
          "new_text": null,
          "old_line_content": "            {   int const compressionLevel = (FUZ_rand(&lseed) % 5) + 1;",
          "new_line_content": "            if (maxTestSize >= srcBufferSize) maxTestSize = srcBufferSize-1;",
          "content_same": false
        },
        {
          "line": 1366,
          "old_api": "FUZ_rand",
          "new_api": null,
          "old_text": "FUZ_rand(&lseed)",
          "new_text": null,
          "old_line_content": "            U32 const testLog = FUZ_rand(&lseed) % maxSrcLog;",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1372,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(cLevelCandidate, cLevelMax)",
          "new_text": null,
          "old_line_content": "            U32 const cLevel = MIN(cLevelCandidate, cLevelMax);",
          "new_line_content": "                               1;",
          "content_same": false
        },
        {
          "line": 1376,
          "old_api": "FUZ_rLogLength",
          "new_api": null,
          "old_text": "FUZ_rLogLength(&lseed, dictLog)",
          "new_text": null,
          "old_line_content": "            dictSize  = ((FUZ_rand(&lseed)&63)==1) ? FUZ_rLogLength(&lseed, dictLog) : 0;",
          "new_line_content": "            /* random dictionary selection */",
          "content_same": false
        },
        {
          "line": 1381,
          "old_api": "FUZ_rand",
          "new_api": null,
          "old_text": "FUZ_rand(&lseed)",
          "new_text": null,
          "old_line_content": "            {   U64 const pledgedSrcSize = (FUZ_rand(&lseed) & 3) ? ZSTD_CONTENTSIZE_UNKNOWN : maxTestSize;",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1385,
          "old_api": "FUZ_rand",
          "new_api": null,
          "old_text": "FUZ_rand(&lseed)",
          "new_text": null,
          "old_line_content": "                cParams.windowLog += (FUZ_rand(&lseed) & 3) - 1;",
          "new_line_content": "                /* mess with compression parameters */",
          "content_same": false
        },
        {
          "line": 1394,
          "old_api": "setCCtxParameter",
          "new_api": null,
          "old_text": "setCCtxParameter(zc, cctxParams, ZSTD_p_windowLog, cParams.windowLog, useOpaqueAPI)",
          "new_text": null,
          "old_line_content": "                if (FUZ_rand(&lseed) & 1) CHECK_Z( setCCtxParameter(zc, cctxParams, ZSTD_p_windowLog, cParams.windowLog, useOpaqueAPI) );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1398,
          "old_api": "setCCtxParameter",
          "new_api": null,
          "old_text": "setCCtxParameter(zc, cctxParams, ZSTD_p_minMatch, cParams.searchLength, useOpaqueAPI)",
          "new_text": null,
          "old_line_content": "                if (FUZ_rand(&lseed) & 1) CHECK_Z( setCCtxParameter(zc, cctxParams, ZSTD_p_minMatch, cParams.searchLength, useOpaqueAPI) );",
          "new_line_content": "                    windowLogMalus = (cParams.windowLog - ZSTD_WINDOWLOG_MIN) / 5;",
          "content_same": false
        },
        {
          "line": 1399,
          "old_api": "setCCtxParameter",
          "new_api": null,
          "old_text": "setCCtxParameter(zc, cctxParams, ZSTD_p_targetLength, cParams.targetLength, useOpaqueAPI)",
          "new_text": null,
          "old_line_content": "                if (FUZ_rand(&lseed) & 1) CHECK_Z( setCCtxParameter(zc, cctxParams, ZSTD_p_targetLength, cParams.targetLength, useOpaqueAPI) );",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1405,
          "old_api": "FUZ_randomClampedLength",
          "new_api": null,
          "old_text": "FUZ_randomClampedLength(&lseed, 0, ZSTD_LDM_BUCKETSIZELOG_MAX)",
          "new_text": null,
          "old_line_content": "                if (FUZ_rand(&lseed) & 3) CHECK_Z( setCCtxParameter(zc, cctxParams, ZSTD_p_ldmBucketSizeLog, FUZ_randomClampedLength(&lseed, 0, ZSTD_LDM_BUCKETSIZELOG_MAX), useOpaqueAPI) );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1406,
          "old_api": "FUZ_randomClampedLength",
          "new_api": null,
          "old_text": "FUZ_randomClampedLength(&lseed, 0, ZSTD_WINDOWLOG_MAX - ZSTD_HASHLOG_MIN)",
          "new_text": null,
          "old_line_content": "                if (FUZ_rand(&lseed) & 3) CHECK_Z( setCCtxParameter(zc, cctxParams, ZSTD_p_ldmHashEveryLog, FUZ_randomClampedLength(&lseed, 0, ZSTD_WINDOWLOG_MAX - ZSTD_HASHLOG_MIN), useOpaqueAPI) );",
          "new_line_content": "                /* mess with long distance matching parameters */",
          "content_same": false
        },
        {
          "line": 1412,
          "old_api": "FUZ_rand",
          "new_api": null,
          "old_text": "FUZ_rand(&lseed)",
          "new_text": null,
          "old_line_content": "                if (FUZ_rand(&lseed) & 1) CHECK_Z( setCCtxParameter(zc, cctxParams, ZSTD_p_contentSizeFlag, FUZ_rand(&lseed) & 1, useOpaqueAPI) );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1413,
          "old_api": "ZSTD_CCtx_setPledgedSrcSize",
          "new_api": null,
          "old_text": "ZSTD_CCtx_setPledgedSrcSize(zc, pledgedSrcSize)",
          "new_text": null,
          "old_line_content": "                if (FUZ_rand(&lseed) & 1) CHECK_Z( ZSTD_CCtx_setPledgedSrcSize(zc, pledgedSrcSize) );",
          "new_line_content": "                /* mess with frame parameters */",
          "content_same": false
        },
        {
          "line": 1419,
          "old_api": "setCCtxParameter",
          "new_api": null,
          "old_text": "setCCtxParameter(zc, cctxParams, ZSTD_p_nbThreads, nbThreads, useOpaqueAPI)",
          "new_text": null,
          "old_line_content": "                    CHECK_Z( setCCtxParameter(zc, cctxParams, ZSTD_p_nbThreads, nbThreads, useOpaqueAPI) );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1422,
          "old_api": "FUZ_rand",
          "new_api": null,
          "old_text": "FUZ_rand(&lseed)",
          "new_text": null,
          "old_line_content": "                        CHECK_Z( setCCtxParameter(zc, cctxParams, ZSTD_p_overlapSizeLog, FUZ_rand(&lseed) % 10, useOpaqueAPI) );",
          "new_line_content": "                    U32 const nbThreadsAdjusted = (windowLogMalus < nbThreadsCandidate) ? nbThreadsCandidate - windowLogMalus : 1;",
          "content_same": false
        },
        {
          "line": 1431,
          "old_api": "ZSTD_CCtx_setParametersUsingCCtxParams",
          "new_api": null,
          "old_text": "ZSTD_CCtx_setParametersUsingCCtxParams(zc, cctxParams)",
          "new_text": null,
          "old_line_content": "                    CHECK_Z (ZSTD_CCtx_setParametersUsingCCtxParams(zc, cctxParams) );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1434,
          "old_api": "FUZ_rand",
          "new_api": null,
          "old_text": "FUZ_rand(&lseed)",
          "new_text": null,
          "old_line_content": "                if (FUZ_rand(&lseed) & 1) {",
          "new_line_content": "                /* Apply parameters */",
          "content_same": false
        },
        {
          "line": 1435,
          "old_api": "FUZ_rand",
          "new_api": null,
          "old_text": "FUZ_rand(&lseed)",
          "new_text": null,
          "old_line_content": "                    if (FUZ_rand(&lseed) & 1) {",
          "new_line_content": "                if (useOpaqueAPI) {",
          "content_same": false
        },
        {
          "line": 1438,
          "old_api": "ZSTD_CCtx_loadDictionary_byReference",
          "new_api": null,
          "old_text": "ZSTD_CCtx_loadDictionary_byReference(zc, dict, dictSize)",
          "new_text": null,
          "old_line_content": "                        CHECK_Z( ZSTD_CCtx_loadDictionary_byReference(zc, dict, dictSize) );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1444,
          "old_api": "ZSTD_isError",
          "new_api": null,
          "old_text": "ZSTD_isError(setError)",
          "new_text": null,
          "old_line_content": "                            CHECK(!ZSTD_isError(setError), \"ZSTD_CCtx_setParametersUsingCCtxParams should have failed\");",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 1446,
          "old_api": "ZSTD_CCtx_setParameter",
          "new_api": null,
          "old_text": "ZSTD_CCtx_setParameter(zc, ZSTD_p_windowLog, cParams.windowLog-1)",
          "new_text": null,
          "old_line_content": "                            size_t const setError = ZSTD_CCtx_setParameter(zc, ZSTD_p_windowLog, cParams.windowLog-1);",
          "new_line_content": "                        /* test that compression parameters are rejected (correctly) after loading a non-NULL dictionary */",
          "content_same": false
        },
        {
          "line": 1447,
          "old_api": "ZSTD_isError",
          "new_api": null,
          "old_text": "ZSTD_isError(setError)",
          "new_text": null,
          "old_line_content": "                            CHECK(!ZSTD_isError(setError), \"ZSTD_CCtx_setParameter should have failed\");",
          "new_line_content": "                        if (useOpaqueAPI) {",
          "content_same": false
        },
        {
          "line": 1460,
          "old_api": "FUZ_randomLength",
          "new_api": null,
          "old_text": "FUZ_randomLength(&lseed, maxSampleLog)",
          "new_text": null,
          "old_line_content": "                size_t const randomSrcSize = FUZ_randomLength(&lseed, maxSampleLog);",
          "new_line_content": "        /* multi-segments compression test */",
          "content_same": false
        },
        {
          "line": 1462,
          "old_api": "FUZ_rand",
          "new_api": null,
          "old_text": "FUZ_rand(&lseed)",
          "new_text": null,
          "old_line_content": "                size_t const srcStart = FUZ_rand(&lseed) % (srcBufferSize - srcSize);",
          "new_line_content": "        {   ZSTD_outBuffer outBuff = { cBuffer, cBufferSize, 0 } ;",
          "content_same": false
        },
        {
          "line": 1463,
          "old_api": "FUZ_randomLength",
          "new_api": null,
          "old_text": "FUZ_randomLength(&lseed, maxSampleLog+1)",
          "new_text": null,
          "old_line_content": "                size_t const randomDstSize = FUZ_randomLength(&lseed, maxSampleLog+1);",
          "new_line_content": "            for (cSize=0, totalTestSize=0 ; (totalTestSize < maxTestSize) ; ) {",
          "content_same": false
        },
        {
          "line": 1464,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(cBufferSize - cSize, randomDstSize)",
          "new_text": null,
          "old_line_content": "                size_t const dstBuffSize = MIN(cBufferSize - cSize, randomDstSize);",
          "new_line_content": "                /* compress random chunks into randomly sized dst buffers */",
          "content_same": false
        },
        {
          "line": 1471,
          "old_api": "U32)(totalTestSize + inBuff.pos)",
          "new_api": null,
          "old_text": "U32)(totalTestSize + inBuff.pos)",
          "new_text": null,
          "old_line_content": "                    (U32)inBuff.pos, (U32)(totalTestSize + inBuff.pos));",
          "new_line_content": "                ZSTD_inBuffer inBuff = { srcBuffer+srcStart, srcSize, 0 };",
          "content_same": false
        },
        {
          "line": 1473,
          "old_api": "XXH64_update",
          "new_api": null,
          "old_text": "XXH64_update(&xxhState, srcBuffer+srcStart, inBuff.pos)",
          "new_text": null,
          "old_line_content": "                XXH64_update(&xxhState, srcBuffer+srcStart, inBuff.pos);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1482,
          "old_api": "FUZ_randomLength",
          "new_api": null,
          "old_text": "FUZ_randomLength(&lseed, maxSampleLog+1)",
          "new_text": null,
          "old_line_content": "                    size_t const randomDstSize = FUZ_randomLength(&lseed, maxSampleLog+1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1483,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(cBufferSize - cSize, randomDstSize)",
          "new_text": null,
          "old_line_content": "                    size_t const adjustedDstSize = MIN(cBufferSize - cSize, randomDstSize);",
          "new_line_content": "            /* final frame epilogue */",
          "content_same": false
        },
        {
          "line": 1485,
          "old_api": "DISPLAYLEVEL",
          "new_api": null,
          "old_text": "DISPLAYLEVEL(5, \"End-flush into dst buffer of size %u \\n\", (U32)adjustedDstSize)",
          "new_text": null,
          "old_line_content": "                    DISPLAYLEVEL(5, \"End-flush into dst buffer of size %u \\n\", (U32)adjustedDstSize);",
          "new_line_content": "                while (remainingToFlush) {",
          "content_same": false
        },
        {
          "line": 1486,
          "old_api": "ZSTD_compress_generic",
          "new_api": null,
          "old_text": "ZSTD_compress_generic(zc, &outBuff, &inBuff, ZSTD_e_end)",
          "new_text": null,
          "old_line_content": "                    remainingToFlush = ZSTD_compress_generic(zc, &outBuff, &inBuff, ZSTD_e_end);",
          "new_line_content": "                    ZSTD_inBuffer inBuff = { NULL, 0, 0 };",
          "content_same": false
        },
        {
          "line": 1489,
          "old_api": "ZSTD_getErrorName",
          "new_api": null,
          "old_text": "ZSTD_getErrorName(remainingToFlush)",
          "new_text": null,
          "old_line_content": "                        ZSTD_getErrorName(remainingToFlush) );",
          "new_line_content": "                    outBuff.size = outBuff.pos + adjustedDstSize;",
          "content_same": false
        },
        {
          "line": 1493,
          "old_api": "DISPLAYLEVEL",
          "new_api": null,
          "old_text": "DISPLAYLEVEL(5, \"Frame completed : %u bytes \\n\", (U32)cSize)",
          "new_text": null,
          "old_line_content": "            DISPLAYLEVEL(5, \"Frame completed : %u bytes \\n\", (U32)cSize);",
          "new_line_content": "                        \"ZSTD_compress_generic w/ ZSTD_e_end error : %s\",",
          "content_same": false
        },
        {
          "line": 1497,
          "old_api": "FUZ_rand",
          "new_api": null,
          "old_text": "FUZ_rand(&lseed)",
          "new_text": null,
          "old_line_content": "        if (!dictSize /* don't reset if dictionary : could be different */ && (FUZ_rand(&lseed) & 1)) {",
          "new_line_content": "            cSize = outBuff.pos;",
          "content_same": false
        },
        {
          "line": 1499,
          "old_api": "ZSTD_resetDStream",
          "new_api": null,
          "old_text": "ZSTD_resetDStream(zd)",
          "new_text": null,
          "old_line_content": "            CHECK_Z( ZSTD_resetDStream(zd) );",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1501,
          "old_api": "DISPLAYLEVEL",
          "new_api": null,
          "old_text": "DISPLAYLEVEL(5, \"using dict of size %u \\n\", (U32)dictSize)",
          "new_text": null,
          "old_line_content": "            DISPLAYLEVEL(5, \"using dict of size %u \\n\", (U32)dictSize);",
          "new_line_content": "        /* multi - fragments decompression test */",
          "content_same": false
        },
        {
          "line": 1508,
          "old_api": "FUZ_randomLength",
          "new_api": null,
          "old_text": "FUZ_randomLength(&lseed, maxSampleLog)",
          "new_text": null,
          "old_line_content": "                size_t const readCSrcSize = FUZ_randomLength(&lseed, maxSampleLog);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1509,
          "old_api": "FUZ_randomLength",
          "new_api": null,
          "old_text": "FUZ_randomLength(&lseed, maxSampleLog)",
          "new_text": null,
          "old_line_content": "                size_t const randomDstSize = FUZ_randomLength(&lseed, maxSampleLog);",
          "new_line_content": "        {   size_t decompressionResult = 1;",
          "content_same": false
        },
        {
          "line": 1510,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(dstBufferSize - totalGenSize, randomDstSize)",
          "new_text": null,
          "old_line_content": "                size_t const dstBuffSize = MIN(dstBufferSize - totalGenSize, randomDstSize);",
          "new_line_content": "            ZSTD_inBuffer  inBuff = { cBuffer, cSize, 0 };",
          "content_same": false
        },
        {
          "line": 1516,
          "old_api": "ZSTD_getErrorName",
          "new_api": null,
          "old_text": "ZSTD_getErrorName(decompressionResult)",
          "new_text": null,
          "old_line_content": "                CHECK (ZSTD_isError(decompressionResult), \"decompression error : %s\", ZSTD_getErrorName(decompressionResult));",
          "new_line_content": "                inBuff.size = inBuff.pos + readCSrcSize;",
          "content_same": false
        },
        {
          "line": 1517,
          "old_api": "DISPLAYLEVEL",
          "new_api": null,
          "old_text": "DISPLAYLEVEL(5, \"inBuff.pos = %u \\n\", (U32)readCSrcSize)",
          "new_text": null,
          "old_line_content": "                DISPLAYLEVEL(5, \"inBuff.pos = %u \\n\", (U32)readCSrcSize);",
          "new_line_content": "                outBuff.size = inBuff.pos + dstBuffSize;",
          "content_same": false
        },
        {
          "line": 1519,
          "old_api": "CHECK (outBuff.pos != totalTestSize, \"decompressed data : wrong size (%u != %u)\", (U32)outBuff.pos, (U32)totalTestSize)",
          "new_api": null,
          "old_text": "CHECK (outBuff.pos != totalTestSize, \"decompressed data : wrong size (%u != %u)\", (U32)outBuff.pos, (U32)totalTestSize)",
          "new_text": null,
          "old_line_content": "            CHECK (outBuff.pos != totalTestSize, \"decompressed data : wrong size (%u != %u)\", (U32)outBuff.pos, (U32)totalTestSize);",
          "new_line_content": "                            (U32)readCSrcSize, (U32)inBuff.pos, (U32)cSize);",
          "content_same": false
        },
        {
          "line": 1523,
          "old_api": "CHECK (crcDest!=crcOrig, \"decompressed data corrupted\")",
          "new_api": null,
          "old_text": "CHECK (crcDest!=crcOrig, \"decompressed data corrupted\")",
          "new_text": null,
          "old_line_content": "                CHECK (crcDest!=crcOrig, \"decompressed data corrupted\");",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1529,
          "old_api": "FUZ_rand",
          "new_api": null,
          "old_text": "FUZ_rand(&lseed)",
          "new_text": null,
          "old_line_content": "        {   U32 const nbNoiseChunks = (FUZ_rand(&lseed) & 7) + 2;",
          "new_line_content": "        }   }",
          "content_same": false
        },
        {
          "line": 1531,
          "old_api": "FUZ_randomLength",
          "new_api": null,
          "old_text": "FUZ_randomLength(&lseed, maxSampleLog)",
          "new_text": null,
          "old_line_content": "                size_t const randomNoiseSize = FUZ_randomLength(&lseed, maxSampleLog);",
          "new_line_content": "        /*=====   noisy/erroneous src decompression test   =====*/",
          "content_same": false
        },
        {
          "line": 1532,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN((cSize/3) , randomNoiseSize)",
          "new_text": null,
          "old_line_content": "                size_t const noiseSize  = MIN((cSize/3) , randomNoiseSize);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1533,
          "old_api": "FUZ_rand",
          "new_api": null,
          "old_text": "FUZ_rand(&lseed)",
          "new_text": null,
          "old_line_content": "                size_t const noiseStart = FUZ_rand(&lseed) % (srcBufferSize - noiseSize);",
          "new_line_content": "        /* add some noise */",
          "content_same": false
        },
        {
          "line": 1535,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(cBuffer+cStart, srcBuffer+noiseStart, noiseSize)",
          "new_text": null,
          "old_line_content": "                memcpy(cBuffer+cStart, srcBuffer+noiseStart, noiseSize);",
          "new_line_content": "            U32 nn; for (nn=0; nn<nbNoiseChunks; nn++) {",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 64,
      "total_additions": 89,
      "total_deletions": 87,
      "total_api_changes": 240
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 15,
        "api_related_lines": 240,
        "non_api_lines": 2,
        "non_api_line_numbers": [
          1396,
          1391
        ]
      }
    },
    "api_calls_before": 777,
    "api_calls_after": 778,
    "diff_info": {
      "added_lines": 11,
      "removed_lines": 6,
      "total_diff_lines": 52
    }
  }
}
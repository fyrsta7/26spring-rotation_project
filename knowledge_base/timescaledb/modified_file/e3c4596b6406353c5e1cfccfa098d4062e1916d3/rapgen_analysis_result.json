{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/timescaledb/modified_file/e3c4596b6406353c5e1cfccfa098d4062e1916d3",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/timescaledb/modified_file/e3c4596b6406353c5e1cfccfa098d4062e1916d3/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/timescaledb/modified_file/e3c4596b6406353c5e1cfccfa098d4062e1916d3/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/timescaledb/modified_file/e3c4596b6406353c5e1cfccfa098d4062e1916d3/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 255,
          "old_api": "relation_open",
          "new_api": "compress_chunk_populate_keys",
          "old_text": "relation_open(out_table, ExclusiveLock)",
          "new_text": "compress_chunk_populate_keys(in_table,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolumn_compression_info,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnum_compression_infos,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&n_keys,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&keys)",
          "old_line_content": "\tRelation out_rel = relation_open(out_table, ExclusiveLock);",
          "new_line_content": "\tint16 *in_column_offsets = compress_chunk_populate_keys(in_table,",
          "content_same": false
        },
        {
          "line": 292,
          "old_api": "lfirst_oid",
          "new_api": "BuildIndexInfo",
          "old_text": "lfirst_oid(lc)",
          "new_text": "BuildIndexInfo(index_rel)",
          "old_line_content": "\t\t\tOid index_oid = lfirst_oid(lc);",
          "new_line_content": "\t\t\tIndexInfo *index_info = BuildIndexInfo(index_rel);",
          "content_same": false
        },
        {
          "line": 328,
          "old_api": "SearchSysCacheAttNum",
          "new_api": "HeapTupleIsValid",
          "old_text": "SearchSysCacheAttNum(in_table, att_num)",
          "new_text": "HeapTupleIsValid(in_table_tp)",
          "old_line_content": "\t\t\t\t\tin_table_tp = SearchSysCacheAttNum(in_table, att_num);",
          "new_line_content": "\t\t\t\t\tif (!HeapTupleIsValid(in_table_tp))",
          "content_same": false
        },
        {
          "line": 329,
          "old_api": "HeapTupleIsValid",
          "new_api": "elog",
          "old_text": "HeapTupleIsValid(in_table_tp)",
          "new_text": "elog(ERROR,\n\t\t\t\t\t\t\t \"table \\\"%s\\\" does not have column \\\"%s\\\"\",\n\t\t\t\t\t\t\t get_rel_name(in_table),\n\t\t\t\t\t\t\t NameStr(keys[i]->attname))",
          "old_line_content": "\t\t\t\t\tif (!HeapTupleIsValid(in_table_tp))",
          "new_line_content": "\t\t\t\t\t\telog(ERROR,",
          "content_same": false
        },
        {
          "line": 332,
          "old_api": "get_rel_name",
          "new_api": "NameStr",
          "old_text": "get_rel_name(in_table)",
          "new_text": "NameStr(keys[i]->attname)",
          "old_line_content": "\t\t\t\t\t\t\t get_rel_name(in_table),",
          "new_line_content": "\t\t\t\t\t\t\t NameStr(keys[i]->attname));",
          "content_same": false
        },
        {
          "line": 335,
          "old_api": "SearchSysCacheAttNum",
          "new_api": "HeapTupleIsValid",
          "old_text": "SearchSysCacheAttNum(index_oid, i + 1)",
          "new_text": "HeapTupleIsValid(index_tp)",
          "old_line_content": "\t\t\t\t\tindex_tp = SearchSysCacheAttNum(index_oid, i + 1);",
          "new_line_content": "\t\t\t\t\tif (!HeapTupleIsValid(index_tp))",
          "content_same": false
        },
        {
          "line": 336,
          "old_api": "HeapTupleIsValid",
          "new_api": "elog",
          "old_text": "HeapTupleIsValid(index_tp)",
          "new_text": "elog(ERROR,\n\t\t\t\t\t\t\t \"index \\\"%s\\\" does not have column \\\"%s\\\"\",\n\t\t\t\t\t\t\t get_rel_name(index_oid),\n\t\t\t\t\t\t\t NameStr(keys[i]->attname))",
          "old_line_content": "\t\t\t\t\tif (!HeapTupleIsValid(index_tp))",
          "new_line_content": "\t\t\t\t\t\telog(ERROR,",
          "content_same": false
        },
        {
          "line": 339,
          "old_api": "get_rel_name",
          "new_api": "NameStr",
          "old_text": "get_rel_name(index_oid)",
          "new_text": "NameStr(keys[i]->attname)",
          "old_line_content": "\t\t\t\t\t\t\t get_rel_name(index_oid),",
          "new_line_content": "\t\t\t\t\t\t\t NameStr(keys[i]->attname));",
          "content_same": false
        },
        {
          "line": 428,
          "old_api": "GetTransactionSnapshot",
          "new_api": "table_slot_create",
          "old_text": "GetTransactionSnapshot()",
          "new_text": "table_slot_create(in_rel, NULL)",
          "old_line_content": "\t\tindex_scan = index_beginscan(in_rel, matched_index_rel, GetTransactionSnapshot(), 0, 0);",
          "new_line_content": "\t\tslot = table_slot_create(in_rel, NULL);",
          "content_same": false
        },
        {
          "line": 429,
          "old_api": "table_slot_create",
          "new_api": "index_rescan",
          "old_text": "table_slot_create(in_rel, NULL)",
          "new_text": "index_rescan(index_scan, NULL, 0, NULL, 0)",
          "old_line_content": "\t\tslot = table_slot_create(in_rel, NULL);",
          "new_line_content": "\t\tindex_rescan(index_scan, NULL, 0, NULL, 0);",
          "content_same": false
        },
        {
          "line": 430,
          "old_api": "index_rescan",
          "new_api": "index_getnext_slot",
          "old_text": "index_rescan(index_scan, NULL, 0, NULL, 0)",
          "new_text": "index_getnext_slot(index_scan, indexscan_direction, slot)",
          "old_line_content": "\t\tindex_rescan(index_scan, NULL, 0, NULL, 0);",
          "new_line_content": "\t\twhile (index_getnext_slot(index_scan, indexscan_direction, slot))",
          "content_same": false
        },
        {
          "line": 440,
          "old_api": "ExecDropSingleTupleTableSlot",
          "new_api": "index_endscan",
          "old_text": "ExecDropSingleTupleTableSlot(slot)",
          "new_text": "index_endscan(index_scan)",
          "old_line_content": "\t\tExecDropSingleTupleTableSlot(slot);",
          "new_line_content": "\t\tindex_endscan(index_scan);",
          "content_same": false
        },
        {
          "line": 441,
          "old_api": "index_endscan",
          "new_api": "index_close",
          "old_text": "index_endscan(index_scan)",
          "new_text": "index_close(matched_index_rel, AccessShareLock)",
          "old_line_content": "\t\tindex_endscan(index_scan);",
          "new_line_content": "\t\tindex_close(matched_index_rel, AccessShareLock);",
          "content_same": false
        },
        {
          "line": 451,
          "old_api": "compress_chunk_sort_relation",
          "new_api": "row_compressor_append_sorted_rows",
          "old_text": "compress_chunk_sort_relation(in_rel, n_keys, keys)",
          "new_text": "row_compressor_append_sorted_rows(&row_compressor, sorted_rel, in_desc)",
          "old_line_content": "\t\tTuplesortstate *sorted_rel = compress_chunk_sort_relation(in_rel, n_keys, keys);",
          "new_line_content": "\t\trow_compressor_append_sorted_rows(&row_compressor, sorted_rel, in_desc);",
          "content_same": false
        },
        {
          "line": 452,
          "old_api": "row_compressor_append_sorted_rows",
          "new_api": "tuplesort_end",
          "old_text": "row_compressor_append_sorted_rows(&row_compressor, sorted_rel, in_desc)",
          "new_text": "tuplesort_end(sorted_rel)",
          "old_line_content": "\t\trow_compressor_append_sorted_rows(&row_compressor, sorted_rel, in_desc);",
          "new_line_content": "\t\ttuplesort_end(sorted_rel);",
          "content_same": false
        },
        {
          "line": 456,
          "old_api": "row_compressor_finish",
          "new_api": "DEBUG_WAITPOINT",
          "old_text": "row_compressor_finish(&row_compressor)",
          "new_text": "DEBUG_WAITPOINT(\"compression_done_before_truncate_uncompressed\")",
          "old_line_content": "\trow_compressor_finish(&row_compressor);",
          "new_line_content": "\tDEBUG_WAITPOINT(\"compression_done_before_truncate_uncompressed\");",
          "content_same": false
        },
        {
          "line": 457,
          "old_api": "DEBUG_WAITPOINT",
          "new_api": "truncate_relation",
          "old_text": "DEBUG_WAITPOINT(\"compression_done_before_truncate_uncompressed\")",
          "new_text": "truncate_relation(in_table)",
          "old_line_content": "\tDEBUG_WAITPOINT(\"compression_done_before_truncate_uncompressed\");",
          "new_line_content": "\ttruncate_relation(in_table);",
          "content_same": false
        },
        {
          "line": 510,
          "old_api": "NameStr",
          "new_api": "AttributeNumberIsValid",
          "old_text": "NameStr(column->attname)",
          "new_text": "AttributeNumberIsValid(compressed_att)",
          "old_line_content": "\t\tcompressed_att = get_attnum(in_table, NameStr(column->attname));",
          "new_line_content": "\t\tif (!AttributeNumberIsValid(compressed_att))",
          "content_same": false
        },
        {
          "line": 511,
          "old_api": "AttributeNumberIsValid",
          "new_api": "NameStr",
          "old_text": "AttributeNumberIsValid(compressed_att)",
          "new_text": "NameStr(column->attname)",
          "old_line_content": "\t\tif (!AttributeNumberIsValid(compressed_att))",
          "new_line_content": "\t\t\telog(ERROR, \"could not find compressed column for \\\"%s\\\"\", NameStr(column->attname));",
          "content_same": false
        },
        {
          "line": 527,
          "old_api": "MakeTupleTableSlot",
          "new_api": "palloc",
          "old_text": "MakeTupleTableSlot(tupDesc, &TTSOpsHeapTuple)",
          "new_text": "palloc(sizeof(*sort_keys) * n_keys)",
          "old_line_content": "\tTupleTableSlot *heap_tuple_slot = MakeTupleTableSlot(tupDesc, &TTSOpsHeapTuple);",
          "new_line_content": "\tAttrNumber *sort_keys = palloc(sizeof(*sort_keys) * n_keys);",
          "content_same": false
        },
        {
          "line": 552,
          "old_api": "GetLatestSnapshot",
          "new_api": "heap_getnext",
          "old_text": "GetLatestSnapshot()",
          "new_text": "heap_getnext(heapScan, ForwardScanDirection)",
          "old_line_content": "\theapScan = table_beginscan(in_rel, GetLatestSnapshot(), 0, (ScanKey) NULL);",
          "new_line_content": "\tfor (tuple = heap_getnext(heapScan, ForwardScanDirection); tuple != NULL;",
          "content_same": false
        },
        {
          "line": 592,
          "old_api": "NameStr",
          "new_api": "HeapTupleIsValid",
          "old_text": "NameStr(column->attname)",
          "new_text": "HeapTupleIsValid(tp)",
          "old_line_content": "\ttp = SearchSysCacheAttName(table, NameStr(column->attname));",
          "new_line_content": "\tif (!HeapTupleIsValid(tp))",
          "content_same": false
        },
        {
          "line": 593,
          "old_api": "HeapTupleIsValid",
          "new_api": "elog",
          "old_text": "HeapTupleIsValid(tp)",
          "new_text": "elog(ERROR,\n\t\t\t \"table \\\"%s\\\" does not have column \\\"%s\\\"\",\n\t\t\t get_rel_name(table),\n\t\t\t NameStr(column->attname))",
          "old_line_content": "\tif (!HeapTupleIsValid(tp))",
          "new_line_content": "\t\telog(ERROR,",
          "content_same": false
        },
        {
          "line": 596,
          "old_api": "get_rel_name",
          "new_api": "NameStr",
          "old_text": "get_rel_name(table)",
          "new_text": "NameStr(column->attname)",
          "old_line_content": "\t\t\t get_rel_name(table),",
          "new_line_content": "\t\t\t NameStr(column->attname));",
          "content_same": false
        },
        {
          "line": 614,
          "old_api": "OidIsValid",
          "new_api": "elog",
          "old_text": "OidIsValid(*sort_operator)",
          "new_text": "elog(ERROR,\n\t\t\t \"no valid sort operator for column \\\"%s\\\" of type \\\"%s\\\"\",\n\t\t\t NameStr(column->attname),\n\t\t\t format_type_be(att_tup->atttypid))",
          "old_line_content": "\tif (!OidIsValid(*sort_operator))",
          "new_line_content": "\t\telog(ERROR,",
          "content_same": false
        },
        {
          "line": 617,
          "old_api": "NameStr",
          "new_api": "format_type_be",
          "old_text": "NameStr(column->attname)",
          "new_text": "format_type_be(att_tup->atttypid)",
          "old_line_content": "\t\t\t NameStr(column->attname),",
          "new_line_content": "\t\t\t format_type_be(att_tup->atttypid));",
          "content_same": false
        },
        {
          "line": 720,
          "old_api": "index_endscan",
          "new_api": "index_close",
          "old_text": "index_endscan(index_scan)",
          "new_text": "index_close(index_rel, AccessShareLock)",
          "old_line_content": "\tindex_endscan(index_scan);",
          "new_line_content": "\tindex_close(index_rel, AccessShareLock);",
          "content_same": false
        },
        {
          "line": 845,
          "old_api": "MemoryContextSwitchTo",
          "new_api": "MemoryContextDelete",
          "old_text": "MemoryContextSwitchTo(old_ctx)",
          "new_text": "MemoryContextDelete(scan_ctx)",
          "old_line_content": "\tMemoryContextSwitchTo(old_ctx);",
          "new_line_content": "\tMemoryContextDelete(scan_ctx);",
          "content_same": false
        },
        {
          "line": 864,
          "old_api": "DatumGetName",
          "new_api": "CStringGetDatum",
          "old_text": "DatumGetName(\n\t\tDirectFunctionCall1(namein, CStringGetDatum(COMPRESSION_COLUMN_METADATA_COUNT_NAME)))",
          "new_text": "CStringGetDatum(COMPRESSION_COLUMN_METADATA_COUNT_NAME)",
          "old_line_content": "\tName count_metadata_name = DatumGetName(",
          "new_line_content": "\t\tDirectFunctionCall1(namein, CStringGetDatum(COMPRESSION_COLUMN_METADATA_COUNT_NAME)));",
          "content_same": false
        },
        {
          "line": 865,
          "old_api": "CStringGetDatum",
          "new_api": "DatumGetName",
          "old_text": "CStringGetDatum(COMPRESSION_COLUMN_METADATA_COUNT_NAME)",
          "new_text": "DatumGetName(\n\t\tDirectFunctionCall1(namein,\n\t\t\t\t\t\t\tCStringGetDatum(COMPRESSION_COLUMN_METADATA_SEQUENCE_NUM_NAME)))",
          "old_line_content": "\t\tDirectFunctionCall1(namein, CStringGetDatum(COMPRESSION_COLUMN_METADATA_COUNT_NAME)));",
          "new_line_content": "\tName sequence_num_metadata_name = DatumGetName(",
          "content_same": false
        },
        {
          "line": 866,
          "old_api": "DatumGetName",
          "new_api": "DirectFunctionCall1",
          "old_text": "DatumGetName(\n\t\tDirectFunctionCall1(namein,\n\t\t\t\t\t\t\tCStringGetDatum(COMPRESSION_COLUMN_METADATA_SEQUENCE_NUM_NAME)))",
          "new_text": "DirectFunctionCall1(namein,\n\t\t\t\t\t\t\tCStringGetDatum(COMPRESSION_COLUMN_METADATA_SEQUENCE_NUM_NAME))",
          "old_line_content": "\tName sequence_num_metadata_name = DatumGetName(",
          "new_line_content": "\t\tDirectFunctionCall1(namein,",
          "content_same": false
        },
        {
          "line": 867,
          "old_api": "DirectFunctionCall1",
          "new_api": "CStringGetDatum",
          "old_text": "DirectFunctionCall1(namein,\n\t\t\t\t\t\t\tCStringGetDatum(COMPRESSION_COLUMN_METADATA_SEQUENCE_NUM_NAME))",
          "new_text": "CStringGetDatum(COMPRESSION_COLUMN_METADATA_SEQUENCE_NUM_NAME)",
          "old_line_content": "\t\tDirectFunctionCall1(namein,",
          "new_line_content": "\t\t\t\t\t\t\tCStringGetDatum(COMPRESSION_COLUMN_METADATA_SEQUENCE_NUM_NAME)));",
          "content_same": false
        },
        {
          "line": 872,
          "old_api": "NameStr",
          "new_api": "ts_custom_type_cache_get",
          "old_text": "NameStr(*sequence_num_metadata_name)",
          "new_text": "ts_custom_type_cache_get(CUSTOM_TYPE_COMPRESSED_DATA)",
          "old_line_content": "\t\tget_attnum(compressed_table->rd_id, NameStr(*sequence_num_metadata_name));",
          "new_line_content": "\tOid compressed_data_type_oid = ts_custom_type_cache_get(CUSTOM_TYPE_COMPRESSED_DATA)->type_oid;",
          "content_same": false
        },
        {
          "line": 890,
          "old_api": "GetBulkInsertState",
          "new_api": "ts_catalog_open_indexes",
          "old_text": "GetBulkInsertState()",
          "new_text": "ts_catalog_open_indexes(compressed_table)",
          "old_line_content": "\t\t.bistate = need_bistate ? GetBulkInsertState() : NULL,",
          "new_line_content": "\t\t.resultRelInfo = ts_catalog_open_indexes(compressed_table),",
          "content_same": false
        },
        {
          "line": 898,
          "old_api": "AttrNumberGetAttrOffset",
          "new_api": "palloc",
          "old_text": "AttrNumberGetAttrOffset(sequence_num_column_num)",
          "new_text": "palloc(sizeof(Datum) * num_columns_in_compressed_table)",
          "old_line_content": "\t\t.sequence_num_metadata_column_offset = AttrNumberGetAttrOffset(sequence_num_column_num),",
          "new_line_content": "\t\t.compressed_values = palloc(sizeof(Datum) * num_columns_in_compressed_table),",
          "content_same": false
        },
        {
          "line": 925,
          "old_api": "AttrNumberGetAttrOffset",
          "new_api": "COMPRESSIONCOL_IS_SEGMENT_BY",
          "old_text": "AttrNumberGetAttrOffset(compressed_colnum)",
          "new_text": "COMPRESSIONCOL_IS_SEGMENT_BY(compression_info)",
          "old_line_content": "\t\tAssert(AttrNumberGetAttrOffset(compressed_colnum) < num_columns_in_compressed_table);",
          "new_line_content": "\t\tif (!COMPRESSIONCOL_IS_SEGMENT_BY(compression_info))",
          "content_same": false
        },
        {
          "line": 938,
          "old_api": "compression_column_segment_min_name",
          "new_api": "compression_column_segment_max_name",
          "old_text": "compression_column_segment_min_name(compression_info)",
          "new_text": "compression_column_segment_max_name(compression_info)",
          "old_line_content": "\t\t\t\tchar *segment_min_col_name = compression_column_segment_min_name(compression_info);",
          "new_line_content": "\t\t\t\tchar *segment_max_col_name = compression_column_segment_max_name(compression_info);",
          "content_same": false
        },
        {
          "line": 947,
          "old_api": "elog",
          "new_api": "AttrNumberGetAttrOffset",
          "old_text": "elog(ERROR, \"couldn't find metadata column \\\"%s\\\"\", segment_max_col_name)",
          "new_text": "AttrNumberGetAttrOffset(segment_min_attr_number)",
          "old_line_content": "\t\t\t\t\telog(ERROR, \"couldn't find metadata column \\\"%s\\\"\", segment_max_col_name);",
          "new_line_content": "\t\t\t\tsegment_min_attr_offset = AttrNumberGetAttrOffset(segment_min_attr_number);",
          "content_same": false
        },
        {
          "line": 989,
          "old_api": "GetCurrentCommandId",
          "new_api": "MakeTupleTableSlot",
          "old_text": "GetCurrentCommandId(true)",
          "new_text": "MakeTupleTableSlot(sorted_desc, &TTSOpsMinimalTuple)",
          "old_line_content": "\tCommandId mycid = GetCurrentCommandId(true);",
          "new_line_content": "\tTupleTableSlot *slot = MakeTupleTableSlot(sorted_desc, &TTSOpsMinimalTuple);",
          "content_same": false
        },
        {
          "line": 1019,
          "old_api": "slot_getallattrs",
          "new_api": "MemoryContextSwitchTo",
          "old_text": "slot_getallattrs(slot)",
          "new_text": "MemoryContextSwitchTo(row_compressor->per_row_ctx)",
          "old_line_content": "\tslot_getallattrs(slot);",
          "new_line_content": "\told_ctx = MemoryContextSwitchTo(row_compressor->per_row_ctx);",
          "content_same": false
        },
        {
          "line": 1037,
          "old_api": "row_compressor_append_row",
          "new_api": "MemoryContextSwitchTo",
          "old_text": "row_compressor_append_row(row_compressor, slot)",
          "new_text": "MemoryContextSwitchTo(old_ctx)",
          "old_line_content": "\trow_compressor_append_row(row_compressor, slot);",
          "new_line_content": "\tMemoryContextSwitchTo(old_ctx);",
          "content_same": false
        },
        {
          "line": 1038,
          "old_api": "MemoryContextSwitchTo",
          "new_api": "ExecClearTuple",
          "old_text": "MemoryContextSwitchTo(old_ctx)",
          "new_text": "ExecClearTuple(slot)",
          "old_line_content": "\tMemoryContextSwitchTo(old_ctx);",
          "new_line_content": "\tExecClearTuple(slot);",
          "content_same": false
        },
        {
          "line": 1066,
          "old_api": "AttrOffsetGetAttrNumber",
          "new_api": "segment_info_update",
          "old_text": "AttrOffsetGetAttrNumber(col)",
          "new_text": "segment_info_update(column->segment_info, val, is_null)",
          "old_line_content": "\t\tval = slot_getattr(row, AttrOffsetGetAttrNumber(col), &is_null);",
          "new_line_content": "\t\tsegment_info_update(column->segment_info, val, is_null);",
          "content_same": false
        },
        {
          "line": 1235,
          "old_api": "Assert",
          "new_api": "heap_insert",
          "old_text": "Assert(row_compressor->bistate != NULL)",
          "new_text": "heap_insert(row_compressor->compressed_table,\n\t\t\t\tcompressed_tuple,\n\t\t\t\tmycid,\n\t\t\t\trow_compressor->insert_options /*=options*/,\n\t\t\t\trow_compressor->bistate)",
          "old_line_content": "\tAssert(row_compressor->bistate != NULL);",
          "new_line_content": "\theap_insert(row_compressor->compressed_table,",
          "content_same": false
        },
        {
          "line": 1299,
          "old_api": "FreeBulkInsertState",
          "new_api": "ts_catalog_close_indexes",
          "old_text": "FreeBulkInsertState(row_compressor->bistate)",
          "new_text": "ts_catalog_close_indexes(row_compressor->resultRelInfo)",
          "old_line_content": "\t\tFreeBulkInsertState(row_compressor->bistate);",
          "new_line_content": "\tts_catalog_close_indexes(row_compressor->resultRelInfo);",
          "content_same": false
        },
        {
          "line": 1312,
          "old_api": "OidIsValid",
          "new_api": "NameStr",
          "old_text": "OidIsValid(tce->eq_opr_finfo.fn_oid)",
          "new_text": "NameStr(column_attr->attname)",
          "old_line_content": "\tif (!OidIsValid(tce->eq_opr_finfo.fn_oid))",
          "new_line_content": "\t\telog(ERROR, \"no equality function for column \\\"%s\\\"\", NameStr(column_attr->attname));",
          "content_same": false
        },
        {
          "line": 1394,
          "old_api": "GetCurrentCommandId",
          "new_api": "GetBulkInsertState",
          "old_text": "GetCurrentCommandId(true)",
          "new_text": "GetBulkInsertState()",
          "old_line_content": "\t\t.mycid = GetCurrentCommandId(true),",
          "new_line_content": "\t\t.bistate = GetBulkInsertState(),",
          "content_same": false
        },
        {
          "line": 1451,
          "old_api": "HeapTupleIsValid",
          "new_api": "heap_deform_tuple",
          "old_text": "HeapTupleIsValid(compressed_tuple)",
          "new_text": "heap_deform_tuple(compressed_tuple,\n\t\t\t\t\t\t  decompressor.in_desc,\n\t\t\t\t\t\t  decompressor.compressed_datums,\n\t\t\t\t\t\t  decompressor.compressed_is_nulls)",
          "old_line_content": "\t\tAssert(HeapTupleIsValid(compressed_tuple));",
          "new_line_content": "\t\theap_deform_tuple(compressed_tuple,",
          "content_same": false
        },
        {
          "line": 1462,
          "old_api": "FreeBulkInsertState",
          "new_api": "MemoryContextDelete",
          "old_text": "FreeBulkInsertState(decompressor.bistate)",
          "new_text": "MemoryContextDelete(decompressor.per_compressed_row_ctx)",
          "old_line_content": "\tFreeBulkInsertState(decompressor.bistate);",
          "new_line_content": "\tMemoryContextDelete(decompressor.per_compressed_row_ctx);",
          "content_same": false
        },
        {
          "line": 1463,
          "old_api": "MemoryContextDelete",
          "new_api": "ts_catalog_close_indexes",
          "old_text": "MemoryContextDelete(decompressor.per_compressed_row_ctx)",
          "new_text": "ts_catalog_close_indexes(decompressor.indexstate)",
          "old_line_content": "\tMemoryContextDelete(decompressor.per_compressed_row_ctx);",
          "new_line_content": "\tts_catalog_close_indexes(decompressor.indexstate);",
          "content_same": false
        },
        {
          "line": 1464,
          "old_api": "ts_catalog_close_indexes",
          "new_api": "FreeExecutorState",
          "old_text": "ts_catalog_close_indexes(decompressor.indexstate)",
          "new_text": "FreeExecutorState(decompressor.estate)",
          "old_line_content": "\tts_catalog_close_indexes(decompressor.indexstate);",
          "new_line_content": "\tFreeExecutorState(decompressor.estate);",
          "content_same": false
        },
        {
          "line": 1474,
          "old_api": "ts_custom_type_cache_get",
          "new_api": "OidIsValid",
          "old_text": "ts_custom_type_cache_get(CUSTOM_TYPE_COMPRESSED_DATA)",
          "new_text": "OidIsValid(compressed_data_type_oid)",
          "old_line_content": "\tOid compressed_data_type_oid = ts_custom_type_cache_get(CUSTOM_TYPE_COMPRESSED_DATA)->type_oid;",
          "new_line_content": "\tAssert(OidIsValid(compressed_data_type_oid));",
          "content_same": false
        },
        {
          "line": 1488,
          "old_api": "TupleDescAttr",
          "new_api": "NameStr",
          "old_text": "TupleDescAttr(decompressor->in_desc, col)",
          "new_text": "NameStr(compressed_attr->attname)",
          "old_line_content": "\t\tForm_pg_attribute compressed_attr = TupleDescAttr(decompressor->in_desc, col);",
          "new_line_content": "\t\tchar *col_name = NameStr(compressed_attr->attname);",
          "content_same": false
        },
        {
          "line": 1489,
          "old_api": "NameStr",
          "new_api": "strcmp",
          "old_text": "NameStr(compressed_attr->attname)",
          "new_text": "strcmp(col_name, COMPRESSION_COLUMN_METADATA_COUNT_NAME)",
          "old_line_content": "\t\tchar *col_name = NameStr(compressed_attr->attname);",
          "new_line_content": "\t\tif (strcmp(col_name, COMPRESSION_COLUMN_METADATA_COUNT_NAME) == 0)",
          "content_same": false
        },
        {
          "line": 1501,
          "old_api": "get_attnum",
          "new_api": "AttributeNumberIsValid",
          "old_text": "get_attnum(decompressor->out_rel->rd_id, col_name)",
          "new_text": "AttributeNumberIsValid(decompressed_colnum)",
          "old_line_content": "\t\tAttrNumber decompressed_colnum = get_attnum(decompressor->out_rel->rd_id, col_name);",
          "new_line_content": "\t\tif (!AttributeNumberIsValid(decompressed_colnum))",
          "content_same": false
        },
        {
          "line": 1582,
          "old_api": "iterator_init_forward",
          "new_api": "PointerGetDatum",
          "old_text": "definitions[header->compression_algorithm]\n\t\t\t\t.iterator_init_forward(PointerGetDatum(header), column_info->decompressed_type)",
          "new_text": "PointerGetDatum(header)",
          "old_line_content": "\t\t\tdefinitions[header->compression_algorithm]",
          "new_line_content": "\t\t\t\t.iterator_init_forward(PointerGetDatum(header), column_info->decompressed_type);",
          "content_same": false
        },
        {
          "line": 1590,
          "old_api": "DatumGetInt32",
          "new_api": "CheckCompressedData",
          "old_text": "DatumGetInt32(decompressor->compressed_datums[decompressor->count_compressed_attindex])",
          "new_text": "CheckCompressedData(n_batch_rows > 0)",
          "old_line_content": "\t\tDatumGetInt32(decompressor->compressed_datums[decompressor->count_compressed_attindex]);",
          "new_line_content": "\tCheckCompressedData(n_batch_rows > 0);",
          "content_same": false
        },
        {
          "line": 1609,
          "old_api": "try_next",
          "new_api": "CheckCompressedData",
          "old_text": "column_info->iterator->try_next(column_info->iterator)",
          "new_text": "CheckCompressedData(!value.is_done)",
          "old_line_content": "\t\t\tconst DecompressResult value = column_info->iterator->try_next(column_info->iterator);",
          "new_line_content": "\t\t\tCheckCompressedData(!value.is_done);",
          "content_same": false
        },
        {
          "line": 1623,
          "old_api": "MakeSingleTupleTableSlot",
          "new_api": "MemoryContextSwitchTo",
          "old_text": "MakeSingleTupleTableSlot(decompressor->out_desc, &TTSOpsHeapTuple)",
          "new_text": "MemoryContextSwitchTo(decompressor->per_compressed_row_ctx)",
          "old_line_content": "\t\t\t\tMakeSingleTupleTableSlot(decompressor->out_desc, &TTSOpsHeapTuple);",
          "new_line_content": "\t\t\tMemoryContextSwitchTo(decompressor->per_compressed_row_ctx);",
          "content_same": false
        },
        {
          "line": 1652,
          "old_api": "Assert",
          "new_api": "try_next",
          "old_text": "Assert(column_info->is_compressed)",
          "new_text": "column_info->iterator->try_next(column_info->iterator)",
          "old_line_content": "\t\tAssert(column_info->is_compressed);",
          "new_line_content": "\t\tconst DecompressResult value = column_info->iterator->try_next(column_info->iterator);",
          "content_same": false
        },
        {
          "line": 1653,
          "old_api": "try_next",
          "new_api": "CheckCompressedData",
          "old_text": "column_info->iterator->try_next(column_info->iterator)",
          "new_text": "CheckCompressedData(value.is_done)",
          "old_line_content": "\t\tconst DecompressResult value = column_info->iterator->try_next(column_info->iterator);",
          "new_line_content": "\t\tCheckCompressedData(value.is_done);",
          "content_same": false
        },
        {
          "line": 1725,
          "old_api": "MemoryContextSwitchTo",
          "new_api": "MemoryContextReset",
          "old_text": "MemoryContextSwitchTo(old_ctx)",
          "new_text": "MemoryContextReset(decompressor->per_compressed_row_ctx)",
          "old_line_content": "\tMemoryContextSwitchTo(old_ctx);",
          "new_line_content": "\tMemoryContextReset(decompressor->per_compressed_row_ctx);",
          "content_same": false
        },
        {
          "line": 1742,
          "old_api": "MemoryContextSwitchTo",
          "new_api": "MemoryContextReset",
          "old_text": "MemoryContextSwitchTo(old_ctx)",
          "new_text": "MemoryContextReset(decompressor->per_compressed_row_ctx)",
          "old_line_content": "\tMemoryContextSwitchTo(old_ctx);",
          "new_line_content": "\tMemoryContextReset(decompressor->per_compressed_row_ctx);",
          "content_same": false
        },
        {
          "line": 1759,
          "old_api": "PG_ARGISNULL",
          "new_api": "PG_RETURN_NULL",
          "old_text": "PG_ARGISNULL(0)",
          "new_text": "PG_RETURN_NULL()",
          "old_line_content": "\tif (PG_ARGISNULL(0))",
          "new_line_content": "\t\tPG_RETURN_NULL();",
          "content_same": false
        },
        {
          "line": 1764,
          "old_api": "SRF_FIRSTCALL_INIT",
          "new_api": "MemoryContextSwitchTo",
          "old_text": "SRF_FIRSTCALL_INIT()",
          "new_text": "MemoryContextSwitchTo(funcctx->multi_call_memory_ctx)",
          "old_line_content": "\t\tfuncctx = SRF_FIRSTCALL_INIT();",
          "new_line_content": "\t\toldcontext = MemoryContextSwitchTo(funcctx->multi_call_memory_ctx);",
          "content_same": false
        },
        {
          "line": 1769,
          "old_api": "iterator_init_forward",
          "new_api": "PointerGetDatum",
          "old_text": "definitions[header->compression_algorithm]\n\t\t\t\t   .iterator_init_forward(PointerGetDatum(header),\n\t\t\t\t\t\t\t\t\t\t  get_fn_expr_argtype(fcinfo->flinfo, 1))",
          "new_text": "PointerGetDatum(header)",
          "old_line_content": "\t\titer = definitions[header->compression_algorithm]",
          "new_line_content": "\t\t\t\t   .iterator_init_forward(PointerGetDatum(header),",
          "content_same": false
        },
        {
          "line": 1770,
          "old_api": "PointerGetDatum",
          "new_api": "get_fn_expr_argtype",
          "old_text": "PointerGetDatum(header)",
          "new_text": "get_fn_expr_argtype(fcinfo->flinfo, 1)",
          "old_line_content": "\t\t\t\t   .iterator_init_forward(PointerGetDatum(header),",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t  get_fn_expr_argtype(fcinfo->flinfo, 1));",
          "content_same": false
        },
        {
          "line": 1800,
          "old_api": "PG_ARGISNULL",
          "new_api": "PG_RETURN_NULL",
          "old_text": "PG_ARGISNULL(0)",
          "new_text": "PG_RETURN_NULL()",
          "old_line_content": "\tif (PG_ARGISNULL(0))",
          "new_line_content": "\t\tPG_RETURN_NULL();",
          "content_same": false
        },
        {
          "line": 1805,
          "old_api": "SRF_FIRSTCALL_INIT",
          "new_api": "MemoryContextSwitchTo",
          "old_text": "SRF_FIRSTCALL_INIT()",
          "new_text": "MemoryContextSwitchTo(funcctx->multi_call_memory_ctx)",
          "old_line_content": "\t\tfuncctx = SRF_FIRSTCALL_INIT();",
          "new_line_content": "\t\toldcontext = MemoryContextSwitchTo(funcctx->multi_call_memory_ctx);",
          "content_same": false
        },
        {
          "line": 1810,
          "old_api": "iterator_init_reverse",
          "new_api": "PointerGetDatum",
          "old_text": "definitions[header->compression_algorithm]\n\t\t\t\t   .iterator_init_reverse(PointerGetDatum(header),\n\t\t\t\t\t\t\t\t\t\t  get_fn_expr_argtype(fcinfo->flinfo, 1))",
          "new_text": "PointerGetDatum(header)",
          "old_line_content": "\t\titer = definitions[header->compression_algorithm]",
          "new_line_content": "\t\t\t\t   .iterator_init_reverse(PointerGetDatum(header),",
          "content_same": false
        },
        {
          "line": 1811,
          "old_api": "PointerGetDatum",
          "new_api": "get_fn_expr_argtype",
          "old_text": "PointerGetDatum(header)",
          "new_text": "get_fn_expr_argtype(fcinfo->flinfo, 1)",
          "old_line_content": "\t\t\t\t   .iterator_init_reverse(PointerGetDatum(header),",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t  get_fn_expr_argtype(fcinfo->flinfo, 1));",
          "content_same": false
        },
        {
          "line": 1839,
          "old_api": "pq_begintypsend",
          "new_api": "pq_sendbyte",
          "old_text": "pq_begintypsend(&buf)",
          "new_text": "pq_sendbyte(&buf, header->compression_algorithm)",
          "old_line_content": "\tpq_begintypsend(&buf);",
          "new_line_content": "\tpq_sendbyte(&buf, header->compression_algorithm);",
          "content_same": false
        },
        {
          "line": 1864,
          "old_api": "PG_GETARG_CSTRING",
          "new_api": "strlen",
          "old_text": "PG_GETARG_CSTRING(0)",
          "new_text": "strlen(input)",
          "old_line_content": "\tconst char *input = PG_GETARG_CSTRING(0);",
          "new_line_content": "\tsize_t input_len = strlen(input);",
          "content_same": false
        },
        {
          "line": 1874,
          "old_api": "pg_b64_dec_len",
          "new_api": "palloc",
          "old_text": "pg_b64_dec_len(input_len)",
          "new_text": "palloc(decoded_len + 1)",
          "old_line_content": "\tdecoded_len = pg_b64_dec_len(input_len);",
          "new_line_content": "\tdecoded = palloc(decoded_len + 1);",
          "content_same": false
        },
        {
          "line": 1875,
          "old_api": "palloc",
          "new_api": "pg_b64_decode",
          "old_text": "palloc(decoded_len + 1)",
          "new_text": "pg_b64_decode(input, input_len, decoded, decoded_len)",
          "old_line_content": "\tdecoded = palloc(decoded_len + 1);",
          "new_line_content": "\tdecoded_len = pg_b64_decode(input, input_len, decoded, decoded_len);",
          "content_same": false
        },
        {
          "line": 1896,
          "old_api": "PG_GETARG_DATUM",
          "new_api": "DatumGetByteaP",
          "old_text": "PG_GETARG_DATUM(0)",
          "new_text": "DatumGetByteaP(bytes_data)",
          "old_line_content": "\tDatum bytes_data = DirectFunctionCall1(tsl_compressed_data_send, PG_GETARG_DATUM(0));",
          "new_line_content": "\tbytea *bytes = DatumGetByteaP(bytes_data);",
          "content_same": false
        },
        {
          "line": 1897,
          "old_api": "DatumGetByteaP",
          "new_api": "VARSIZE_ANY_EXHDR",
          "old_text": "DatumGetByteaP(bytes_data)",
          "new_text": "VARSIZE_ANY_EXHDR(bytes)",
          "old_line_content": "\tbytea *bytes = DatumGetByteaP(bytes_data);",
          "new_line_content": "\tint raw_len = VARSIZE_ANY_EXHDR(bytes);",
          "content_same": false
        },
        {
          "line": 1898,
          "old_api": "VARSIZE_ANY_EXHDR",
          "new_api": "VARDATA",
          "old_text": "VARSIZE_ANY_EXHDR(bytes)",
          "new_text": "VARDATA(bytes)",
          "old_line_content": "\tint raw_len = VARSIZE_ANY_EXHDR(bytes);",
          "new_line_content": "\tconst char *raw_data = VARDATA(bytes);",
          "content_same": false
        },
        {
          "line": 1899,
          "old_api": "VARDATA",
          "new_api": "pg_b64_enc_len",
          "old_text": "VARDATA(bytes)",
          "new_text": "pg_b64_enc_len(raw_len)",
          "old_line_content": "\tconst char *raw_data = VARDATA(bytes);",
          "new_line_content": "\tint encoded_len = pg_b64_enc_len(raw_len);",
          "content_same": false
        },
        {
          "line": 1900,
          "old_api": "pg_b64_enc_len",
          "new_api": "palloc",
          "old_text": "pg_b64_enc_len(raw_len)",
          "new_text": "palloc(encoded_len + 1)",
          "old_line_content": "\tint encoded_len = pg_b64_enc_len(raw_len);",
          "new_line_content": "\tchar *encoded = palloc(encoded_len + 1);",
          "content_same": false
        },
        {
          "line": 1901,
          "old_api": "palloc",
          "new_api": "pg_b64_encode",
          "old_text": "palloc(encoded_len + 1)",
          "new_text": "pg_b64_encode(raw_data, raw_len, encoded, encoded_len)",
          "old_line_content": "\tchar *encoded = palloc(encoded_len + 1);",
          "new_line_content": "\tencoded_len = pg_b64_encode(raw_data, raw_len, encoded, encoded_len);",
          "content_same": false
        },
        {
          "line": 1943,
          "old_api": "get_attnum",
          "new_api": "slot_getattr",
          "old_text": "get_attnum(hypertable_relid, attname)",
          "new_text": "slot_getattr(slot, ht_attno, &isnull)",
          "old_line_content": "\t\t\tAttrNumber ht_attno = get_attnum(hypertable_relid, attname);",
          "new_line_content": "\t\t\tDatum value = slot_getattr(slot, ht_attno, &isnull);",
          "content_same": false
        },
        {
          "line": 1980,
          "old_api": "create_segment_filter_scankey",
          "new_api": "compression_column_segment_min_name",
          "old_text": "create_segment_filter_scankey(decompressor,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  compression_column_segment_min_name(fd),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  BTLessEqualStrategyNumber,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  scankeys,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  key_index,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  null_columns,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  false)",
          "new_text": "compression_column_segment_min_name(fd)",
          "old_line_content": "\t\t\t\tkey_index = create_segment_filter_scankey(decompressor,",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t\t  compression_column_segment_min_name(fd),",
          "content_same": false
        },
        {
          "line": 1988,
          "old_api": "create_segment_filter_scankey",
          "new_api": "compression_column_segment_max_name",
          "old_text": "create_segment_filter_scankey(decompressor,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  compression_column_segment_max_name(fd),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  BTGreaterEqualStrategyNumber,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  scankeys,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  key_index,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  null_columns,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  false)",
          "new_text": "compression_column_segment_max_name(fd)",
          "old_line_content": "\t\t\t\tkey_index = create_segment_filter_scankey(decompressor,",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t\t  compression_column_segment_max_name(fd),",
          "content_same": false
        },
        {
          "line": 2009,
          "old_api": "get_attnum",
          "new_api": "Assert",
          "old_text": "get_attnum(decompressor->in_rel->rd_id, segment_filter_col_name)",
          "new_text": "Assert(cmp_attno != InvalidAttrNumber)",
          "old_line_content": "\tAttrNumber cmp_attno = get_attnum(decompressor->in_rel->rd_id, segment_filter_col_name);",
          "new_line_content": "\tAssert(cmp_attno != InvalidAttrNumber);",
          "content_same": false
        },
        {
          "line": 2033,
          "old_api": "lookup_type_cache",
          "new_api": "OidIsValid",
          "old_text": "lookup_type_cache(atttypid, TYPECACHE_BTREE_OPFAMILY)",
          "new_text": "OidIsValid(tce->btree_opf)",
          "old_line_content": "\tTypeCacheEntry *tce = lookup_type_cache(atttypid, TYPECACHE_BTREE_OPFAMILY);",
          "new_line_content": "\tif (!OidIsValid(tce->btree_opf))",
          "content_same": false
        },
        {
          "line": 2034,
          "old_api": "OidIsValid",
          "new_api": "format_type_be",
          "old_text": "OidIsValid(tce->btree_opf)",
          "new_text": "format_type_be(atttypid)",
          "old_line_content": "\tif (!OidIsValid(tce->btree_opf))",
          "new_line_content": "\t\telog(ERROR, \"no btree opfamily for type \\\"%s\\\"\", format_type_be(atttypid));",
          "content_same": false
        },
        {
          "line": 2053,
          "old_api": "get_opcode",
          "new_api": "OidIsValid",
          "old_text": "get_opcode(opr)",
          "new_text": "OidIsValid(opr)",
          "old_line_content": "\topr = get_opcode(opr);",
          "new_line_content": "\tAssert(OidIsValid(opr));",
          "content_same": false
        },
        {
          "line": 2095,
          "old_api": "ereport",
          "new_api": "errcode",
          "old_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_FEATURE_NOT_SUPPORTED),\n\t\t\t\t errmsg(\"inserting into compressed chunk with unique constraints disabled\"),\n\t\t\t\t errhint(\"Set timescaledb.enable_dml_decompression to TRUE.\")))",
          "new_text": "errcode(ERRCODE_FEATURE_NOT_SUPPORTED)",
          "old_line_content": "\t\tereport(ERROR,",
          "new_line_content": "\t\t\t\t(errcode(ERRCODE_FEATURE_NOT_SUPPORTED),",
          "content_same": false
        },
        {
          "line": 2096,
          "old_api": "errcode",
          "new_api": "errmsg",
          "old_text": "errcode(ERRCODE_FEATURE_NOT_SUPPORTED)",
          "new_text": "errmsg(\"inserting into compressed chunk with unique constraints disabled\")",
          "old_line_content": "\t\t\t\t(errcode(ERRCODE_FEATURE_NOT_SUPPORTED),",
          "new_line_content": "\t\t\t\t errmsg(\"inserting into compressed chunk with unique constraints disabled\"),",
          "content_same": false
        },
        {
          "line": 2097,
          "old_api": "errmsg",
          "new_api": "errhint",
          "old_text": "errmsg(\"inserting into compressed chunk with unique constraints disabled\")",
          "new_text": "errhint(\"Set timescaledb.enable_dml_decompression to TRUE.\")",
          "old_line_content": "\t\t\t\t errmsg(\"inserting into compressed chunk with unique constraints disabled\"),",
          "new_line_content": "\t\t\t\t errhint(\"Set timescaledb.enable_dml_decompression to TRUE.\")));",
          "content_same": false
        },
        {
          "line": 2100,
          "old_api": "ts_chunk_get_by_id",
          "new_api": "relation_open",
          "old_text": "ts_chunk_get_by_id(chunk->fd.compressed_chunk_id, true)",
          "new_text": "relation_open(comp->table_id, RowExclusiveLock)",
          "old_line_content": "\tChunk *comp = ts_chunk_get_by_id(chunk->fd.compressed_chunk_id, true);",
          "new_line_content": "\tRelation in_rel = relation_open(comp->table_id, RowExclusiveLock);",
          "content_same": false
        },
        {
          "line": 2103,
          "old_api": "build_decompressor",
          "new_api": "RelationGetIndexAttrBitmap",
          "old_text": "build_decompressor(in_rel, out_rel)",
          "new_text": "RelationGetIndexAttrBitmap(out_rel, INDEX_ATTR_BITMAP_KEY)",
          "old_line_content": "\tRowDecompressor decompressor = build_decompressor(in_rel, out_rel);",
          "new_line_content": "\tBitmapset *key_columns = RelationGetIndexAttrBitmap(out_rel, INDEX_ATTR_BITMAP_KEY);",
          "content_same": false
        },
        {
          "line": 2157,
          "old_api": "write_logical_replication_msg_decompression_start",
          "new_api": "row_decompressor_decompress_row_to_table",
          "old_text": "write_logical_replication_msg_decompression_start()",
          "new_text": "row_decompressor_decompress_row_to_table(&decompressor)",
          "old_line_content": "\t\twrite_logical_replication_msg_decompression_start();",
          "new_line_content": "\t\trow_decompressor_decompress_row_to_table(&decompressor);",
          "content_same": false
        },
        {
          "line": 2158,
          "old_api": "row_decompressor_decompress_row_to_table",
          "new_api": "write_logical_replication_msg_decompression_end",
          "old_text": "row_decompressor_decompress_row_to_table(&decompressor)",
          "new_text": "write_logical_replication_msg_decompression_end()",
          "old_line_content": "\t\trow_decompressor_decompress_row_to_table(&decompressor);",
          "new_line_content": "\t\twrite_logical_replication_msg_decompression_end();",
          "content_same": false
        },
        {
          "line": 2178,
          "old_api": "ts_catalog_close_indexes",
          "new_api": "FreeExecutorState",
          "old_text": "ts_catalog_close_indexes(decompressor.indexstate)",
          "new_text": "FreeExecutorState(decompressor.estate)",
          "old_line_content": "\tts_catalog_close_indexes(decompressor.indexstate);",
          "new_line_content": "\tFreeExecutorState(decompressor.estate);",
          "content_same": false
        },
        {
          "line": 2179,
          "old_api": "FreeExecutorState",
          "new_api": "FreeBulkInsertState",
          "old_text": "FreeExecutorState(decompressor.estate)",
          "new_text": "FreeBulkInsertState(decompressor.bistate)",
          "old_line_content": "\tFreeExecutorState(decompressor.estate);",
          "new_line_content": "\tFreeBulkInsertState(decompressor.bistate);",
          "content_same": false
        },
        {
          "line": 2182,
          "old_api": "CommandCounterIncrement",
          "new_api": "table_close",
          "old_text": "CommandCounterIncrement()",
          "new_text": "table_close(in_rel, NoLock)",
          "old_line_content": "\tCommandCounterIncrement();",
          "new_line_content": "\ttable_close(in_rel, NoLock);",
          "content_same": false
        },
        {
          "line": 2259,
          "old_api": "fseek",
          "new_api": "ftell",
          "old_text": "fseek(f, 0, SEEK_END)",
          "new_text": "ftell(f)",
          "old_line_content": "\tfseek(f, 0, SEEK_END);",
          "new_line_content": "\tconst size_t fsize = ftell(f);",
          "content_same": false
        },
        {
          "line": 2260,
          "old_api": "ftell",
          "new_api": "fseek",
          "old_text": "ftell(f)",
          "new_text": "fseek(f, 0, SEEK_SET)",
          "old_line_content": "\tconst size_t fsize = ftell(f);",
          "new_line_content": "\tfseek(f, 0, SEEK_SET); /* same as rewind(f); */",
          "content_same": false
        },
        {
          "line": 2275,
          "old_api": "palloc",
          "new_api": "fread",
          "old_text": "palloc(fsize + 1)",
          "new_text": "fread(string, fsize, 1, f)",
          "old_line_content": "\tchar *string = palloc(fsize + 1);",
          "new_line_content": "\tsize_t elements_read = fread(string, fsize, 1, f);",
          "content_same": false
        },
        {
          "line": 2298,
          "old_api": "PG_GETARG_CSTRING",
          "new_api": "PG_GETARG_OID",
          "old_text": "PG_GETARG_CSTRING(0)",
          "new_text": "PG_GETARG_OID(1)",
          "old_line_content": "\tread_compressed_data_file_impl(get_compression_algorithm(PG_GETARG_CSTRING(0)),",
          "new_line_content": "\t\t\t\t\t\t\t\t   PG_GETARG_OID(1),",
          "content_same": false
        },
        {
          "line": 2299,
          "old_api": "PG_GETARG_OID",
          "new_api": "PG_GETARG_CSTRING",
          "old_text": "PG_GETARG_OID(1)",
          "new_text": "PG_GETARG_CSTRING(2)",
          "old_line_content": "\t\t\t\t\t\t\t\t   PG_GETARG_OID(1),",
          "new_line_content": "\t\t\t\t\t\t\t\t   PG_GETARG_CSTRING(2),",
          "content_same": false
        },
        {
          "line": 2350,
          "old_api": "get_call_result_type",
          "new_api": "ereport",
          "old_text": "get_call_result_type(fcinfo, NULL, &funcctx->tuple_desc)",
          "new_text": "ereport(ERROR,\n\t\t\t\t\t(errcode(ERRCODE_FEATURE_NOT_SUPPORTED),\n\t\t\t\t\t errmsg(\"function returning record called in context \"\n\t\t\t\t\t\t\t\"that cannot accept type record\")))",
          "old_line_content": "\t\tif (get_call_result_type(fcinfo, NULL, &funcctx->tuple_desc) != TYPEFUNC_COMPOSITE)",
          "new_line_content": "\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 2351,
          "old_api": "ereport",
          "new_api": "errcode",
          "old_text": "ereport(ERROR,\n\t\t\t\t\t(errcode(ERRCODE_FEATURE_NOT_SUPPORTED),\n\t\t\t\t\t errmsg(\"function returning record called in context \"\n\t\t\t\t\t\t\t\"that cannot accept type record\")))",
          "new_text": "errcode(ERRCODE_FEATURE_NOT_SUPPORTED)",
          "old_line_content": "\t\t\tereport(ERROR,",
          "new_line_content": "\t\t\t\t\t(errcode(ERRCODE_FEATURE_NOT_SUPPORTED),",
          "content_same": false
        },
        {
          "line": 2352,
          "old_api": "errcode",
          "new_api": "errmsg",
          "old_text": "errcode(ERRCODE_FEATURE_NOT_SUPPORTED)",
          "new_text": "errmsg(\"function returning record called in context \"\n\t\t\t\t\t\t\t\"that cannot accept type record\")",
          "old_line_content": "\t\t\t\t\t(errcode(ERRCODE_FEATURE_NOT_SUPPORTED),",
          "new_line_content": "\t\t\t\t\t errmsg(\"function returning record called in context \"",
          "content_same": false
        },
        {
          "line": 2402,
          "old_api": "PG_GETARG_OID",
          "new_api": "Int32GetDatum",
          "old_text": "PG_GETARG_OID(1)",
          "new_text": "Int32GetDatum(rows)",
          "old_line_content": "\t\t\tread_compressed_data_file_impl(algo, PG_GETARG_OID(1), path, &bytes, &rows);",
          "new_line_content": "\t\t\tvalues[out_rows] = Int32GetDatum(rows);",
          "content_same": false
        },
        {
          "line": 2418,
          "old_api": "PointerGetDatum",
          "new_api": "psprintf",
          "old_text": "PointerGetDatum(\n\t\t\t\t\tcstring_to_text(psprintf(\"%s:%d\", error->filename, error->lineno)))",
          "new_text": "psprintf(\"%s:%d\", error->filename, error->lineno)",
          "old_line_content": "\t\t\t\tvalues[out_location] = PointerGetDatum(",
          "new_line_content": "\t\t\t\t\tcstring_to_text(psprintf(\"%s:%d\", error->filename, error->lineno)));",
          "content_same": false
        },
        {
          "line": 2430,
          "old_api": "SRF_RETURN_NEXT",
          "new_api": "heap_form_tuple",
          "old_text": "SRF_RETURN_NEXT(funcctx,\n\t\t\t\t\t\tHeapTupleGetDatum(heap_form_tuple(funcctx->tuple_desc, values, nulls)))",
          "new_text": "heap_form_tuple(funcctx->tuple_desc, values, nulls)",
          "old_line_content": "\t\tSRF_RETURN_NEXT(funcctx,",
          "new_line_content": "\t\t\t\t\t\tHeapTupleGetDatum(heap_form_tuple(funcctx->tuple_desc, values, nulls)));",
          "content_same": false
        },
        {
          "line": 2455,
          "old_api": "CHECK_FOR_INTERRUPTS",
          "new_api": "target",
          "old_text": "CHECK_FOR_INTERRUPTS()",
          "new_text": "target(Data, Size, /* extra_checks = */ false)",
          "old_line_content": "\t\tCHECK_FOR_INTERRUPTS();",
          "new_line_content": "\t\ttarget(Data, Size, /* extra_checks = */ false);",
          "content_same": false
        },
        {
          "line": 2503,
          "old_api": "AllocSetContextCreate",
          "new_api": "MemoryContextSwitchTo",
          "old_text": "AllocSetContextCreate(CurrentMemoryContext, \"fuzzing\", 0, 8 * 1024 * 1024, 8 * 1024 * 1024)",
          "new_text": "MemoryContextSwitchTo(fuzzing_context)",
          "old_line_content": "\t\tAllocSetContextCreate(CurrentMemoryContext, \"fuzzing\", 0, 8 * 1024 * 1024, 8 * 1024 * 1024);",
          "new_line_content": "\tMemoryContext old_context = MemoryContextSwitchTo(fuzzing_context);",
          "content_same": false
        },
        {
          "line": 2521,
          "old_api": "PG_GETARG_CSTRING",
          "new_api": "PG_GETARG_OID",
          "old_text": "PG_GETARG_CSTRING(0)",
          "new_text": "PG_GETARG_OID(1)",
          "old_line_content": "\tint algo = get_compression_algorithm(PG_GETARG_CSTRING(0));",
          "new_line_content": "\tOid type = PG_GETARG_OID(1);",
          "content_same": false
        },
        {
          "line": 2582,
          "old_api": "bms_add_members",
          "new_api": "RelationGetIndexAttrBitmap",
          "old_text": "bms_add_members(key_columns,\n\t\t\t\t\t\tRelationGetIndexAttrBitmap(comp_chunk_rel, INDEX_ATTR_BITMAP_SUMMARIZED))",
          "new_text": "RelationGetIndexAttrBitmap(comp_chunk_rel, INDEX_ATTR_BITMAP_SUMMARIZED)",
          "old_line_content": "\t\tbms_add_members(key_columns,",
          "new_line_content": "\t\t\t\t\t\tRelationGetIndexAttrBitmap(comp_chunk_rel, INDEX_ATTR_BITMAP_SUMMARIZED));",
          "content_same": false
        },
        {
          "line": 2589,
          "old_api": "RelationGetRelid",
          "new_api": "strcmp",
          "old_text": "RelationGetRelid(comp_chunk_rel)",
          "new_text": "strcmp(colname, column_name)",
          "old_line_content": "\t\tchar *colname = get_attname(RelationGetRelid(comp_chunk_rel), attnum, true);",
          "new_line_content": "\t\tif (strcmp(colname, column_name) == 0)",
          "content_same": false
        },
        {
          "line": 2594,
          "old_api": "op_in_opfamily",
          "new_api": "Assert",
          "old_text": "op_in_opfamily(opno, opfamily)",
          "new_text": "Assert(false)",
          "old_line_content": "\t\t\tif (opno && !op_in_opfamily(opno, opfamily))",
          "new_line_content": "\t\t\t\tAssert(false);",
          "content_same": false
        },
        {
          "line": 2610,
          "old_api": "get_attname",
          "new_api": "strcmp",
          "old_text": "get_attname(comp_chunk_rel->rd_id, attno, false)",
          "new_text": "strcmp(attname, column_name)",
          "old_line_content": "\t\tchar *attname = get_attname(comp_chunk_rel->rd_id, attno, false);",
          "new_line_content": "\t\tif (strcmp(attname, column_name) == 0)",
          "content_same": false
        },
        {
          "line": 2664,
          "old_api": "linitial",
          "new_api": "lsecond",
          "old_text": "linitial(opexpr->args)",
          "new_text": "lsecond(opexpr->args)",
          "old_line_content": "\t\t\t\tleftop = linitial(opexpr->args);",
          "new_line_content": "\t\t\t\trightop = lsecond(opexpr->args);",
          "content_same": false
        },
        {
          "line": 2687,
          "old_api": "makeNode",
          "new_api": "memcpy",
          "old_text": "makeNode(OpExpr)",
          "new_text": "memcpy(newclause, opexpr, sizeof(OpExpr))",
          "old_line_content": "\t\t\t\tnewclause = makeNode(OpExpr);",
          "new_line_content": "\t\t\t\tmemcpy(newclause, opexpr, sizeof(OpExpr));",
          "content_same": false
        },
        {
          "line": 2688,
          "old_api": "memcpy",
          "new_api": "copyObject",
          "old_text": "memcpy(newclause, opexpr, sizeof(OpExpr))",
          "new_text": "copyObject(var)",
          "old_line_content": "\t\t\t\tmemcpy(newclause, opexpr, sizeof(OpExpr));",
          "new_line_content": "\t\t\t\tnewvar = (Expr *) copyObject(var);",
          "content_same": false
        },
        {
          "line": 2695,
          "old_api": "linitial",
          "new_api": "lsecond",
          "old_text": "linitial(newclause->args)",
          "new_text": "lsecond(newclause->args)",
          "old_line_content": "\t\t\t\tlinitial(newclause->args) = newvar;",
          "new_line_content": "\t\t\t\tlsecond(newclause->args) = arg_value;",
          "content_same": false
        },
        {
          "line": 2699,
          "old_api": "get_commutator",
          "new_api": "get_opcode",
          "old_text": "get_commutator(opno)",
          "new_text": "get_opcode(newclause->opno)",
          "old_line_content": "\t\t\t\t\tnewclause->opno = get_commutator(opno);",
          "new_line_content": "\t\t\t\t\tnewclause->opfuncid = get_opcode(newclause->opno);",
          "content_same": false
        },
        {
          "line": 2791,
          "old_api": "RelationGetRelid",
          "new_api": "lfirst",
          "old_text": "RelationGetRelid(comp_chunk_rel)",
          "new_text": "lfirst(li)",
          "old_line_content": "\t\t\t\tchar *attname = get_attname(RelationGetRelid(comp_chunk_rel), attnum, false);",
          "new_line_content": "\t\t\t\tSegmentFilter *sf = lfirst(li);",
          "content_same": false
        },
        {
          "line": 2840,
          "old_api": "linitial",
          "new_api": "lsecond",
          "old_text": "linitial(opexpr->args)",
          "new_text": "lsecond(opexpr->args)",
          "old_line_content": "\t\t\t\tleftop = linitial(opexpr->args);",
          "new_line_content": "\t\t\t\trightop = lsecond(opexpr->args);",
          "content_same": false
        },
        {
          "line": 2866,
          "old_api": "ts_hypertable_compression_get_by_pkey",
          "new_api": "lookup_type_cache",
          "old_text": "ts_hypertable_compression_get_by_pkey(ch->fd.hypertable_id, column_name)",
          "new_text": "lookup_type_cache(var->vartype, TYPECACHE_BTREE_OPFAMILY)",
          "old_line_content": "\t\t\t\t\tts_hypertable_compression_get_by_pkey(ch->fd.hypertable_id, column_name);",
          "new_line_content": "\t\t\t\tTypeCacheEntry *tce = lookup_type_cache(var->vartype, TYPECACHE_BTREE_OPFAMILY);",
          "content_same": false
        },
        {
          "line": 2867,
          "old_api": "lookup_type_cache",
          "new_api": "get_op_opfamily_strategy",
          "old_text": "lookup_type_cache(var->vartype, TYPECACHE_BTREE_OPFAMILY)",
          "new_text": "get_op_opfamily_strategy(opexpr->opno, tce->btree_opf)",
          "old_line_content": "\t\t\t\tTypeCacheEntry *tce = lookup_type_cache(var->vartype, TYPECACHE_BTREE_OPFAMILY);",
          "new_line_content": "\t\t\t\tint op_strategy = get_op_opfamily_strategy(opexpr->opno, tce->btree_opf);",
          "content_same": false
        },
        {
          "line": 2868,
          "old_api": "get_op_opfamily_strategy",
          "new_api": "COMPRESSIONCOL_IS_SEGMENT_BY",
          "old_text": "get_op_opfamily_strategy(opexpr->opno, tce->btree_opf)",
          "new_text": "COMPRESSIONCOL_IS_SEGMENT_BY(fd)",
          "old_line_content": "\t\t\t\tint op_strategy = get_op_opfamily_strategy(opexpr->opno, tce->btree_opf);",
          "new_line_content": "\t\t\t\tif (COMPRESSIONCOL_IS_SEGMENT_BY(fd))",
          "content_same": false
        },
        {
          "line": 2882,
          "old_api": "lappend",
          "new_api": "add_filter_column_strategy",
          "old_text": "lappend(*index_filters,\n\t\t\t\t\t\t\t\t\t\tadd_filter_column_strategy(column_name,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   op_strategy,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   arg_value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   false))",
          "new_text": "add_filter_column_strategy(column_name,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   op_strategy,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   arg_value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   false)",
          "old_line_content": "\t\t\t\t\t\t\t\tlappend(*index_filters,",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\tadd_filter_column_strategy(column_name,",
          "content_same": false
        },
        {
          "line": 2950,
          "old_api": "ts_hypertable_compression_get_by_pkey",
          "new_api": "COMPRESSIONCOL_IS_SEGMENT_BY",
          "old_text": "ts_hypertable_compression_get_by_pkey(ch->fd.hypertable_id, column_name)",
          "new_text": "COMPRESSIONCOL_IS_SEGMENT_BY(fd)",
          "old_line_content": "\t\t\t\t\t\tts_hypertable_compression_get_by_pkey(ch->fd.hypertable_id, column_name);",
          "new_line_content": "\t\t\t\t\tif (COMPRESSIONCOL_IS_SEGMENT_BY(fd))",
          "content_same": false
        },
        {
          "line": 2954,
          "old_api": "lappend",
          "new_api": "add_filter_column_strategy",
          "old_text": "lappend(*index_filters,\n\t\t\t\t\t\t\t\t\tadd_filter_column_strategy(column_name,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   InvalidStrategy,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   NULL,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   true))",
          "new_text": "add_filter_column_strategy(column_name,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   InvalidStrategy,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   NULL,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   true)",
          "old_line_content": "\t\t\t\t\t\t\tlappend(*index_filters,",
          "new_line_content": "\t\t\t\t\t\t\t\t\tadd_filter_column_strategy(column_name,",
          "content_same": false
        },
        {
          "line": 2997,
          "old_api": "lfirst",
          "new_api": "NameStr",
          "old_text": "lfirst(lc)",
          "new_text": "NameStr(filter->column_name)",
          "old_line_content": "\t\tfilter = lfirst(lc);",
          "new_line_content": "\t\tAttrNumber attno = get_attnum(decompressor->in_rel->rd_id, NameStr(filter->column_name));",
          "content_same": false
        },
        {
          "line": 3000,
          "old_api": "ereport",
          "new_api": "errcode",
          "old_text": "ereport(ERROR,\n\t\t\t\t\t(errcode(ERRCODE_UNDEFINED_COLUMN),\n\t\t\t\t\t errmsg(\"column \\\"%s\\\" of relation \\\"%s\\\" does not exist\",\n\t\t\t\t\t\t\tNameStr(filter->column_name),\n\t\t\t\t\t\t\tRelationGetRelationName(decompressor->in_rel))))",
          "new_text": "errcode(ERRCODE_UNDEFINED_COLUMN)",
          "old_line_content": "\t\t\tereport(ERROR,",
          "new_line_content": "\t\t\t\t\t(errcode(ERRCODE_UNDEFINED_COLUMN),",
          "content_same": false
        },
        {
          "line": 3001,
          "old_api": "errcode",
          "new_api": "errmsg",
          "old_text": "errcode(ERRCODE_UNDEFINED_COLUMN)",
          "new_text": "errmsg(\"column \\\"%s\\\" of relation \\\"%s\\\" does not exist\",\n\t\t\t\t\t\t\tNameStr(filter->column_name),\n\t\t\t\t\t\t\tRelationGetRelationName(decompressor->in_rel))",
          "old_line_content": "\t\t\t\t\t(errcode(ERRCODE_UNDEFINED_COLUMN),",
          "new_line_content": "\t\t\t\t\t errmsg(\"column \\\"%s\\\" of relation \\\"%s\\\" does not exist\",",
          "content_same": false
        },
        {
          "line": 3002,
          "old_api": "errmsg",
          "new_api": "NameStr",
          "old_text": "errmsg(\"column \\\"%s\\\" of relation \\\"%s\\\" does not exist\",\n\t\t\t\t\t\t\tNameStr(filter->column_name),\n\t\t\t\t\t\t\tRelationGetRelationName(decompressor->in_rel))",
          "new_text": "NameStr(filter->column_name)",
          "old_line_content": "\t\t\t\t\t errmsg(\"column \\\"%s\\\" of relation \\\"%s\\\" does not exist\",",
          "new_line_content": "\t\t\t\t\t\t\tNameStr(filter->column_name),",
          "content_same": false
        },
        {
          "line": 3003,
          "old_api": "NameStr",
          "new_api": "RelationGetRelationName",
          "old_text": "NameStr(filter->column_name)",
          "new_text": "RelationGetRelationName(decompressor->in_rel)",
          "old_line_content": "\t\t\t\t\t\t\tNameStr(filter->column_name),",
          "new_line_content": "\t\t\t\t\t\t\tRelationGetRelationName(decompressor->in_rel))));",
          "content_same": false
        },
        {
          "line": 3006,
          "old_api": "create_segment_filter_scankey",
          "new_api": "NameStr",
          "old_text": "create_segment_filter_scankey(decompressor,\n\t\t\t\t\t\t\t\t\t\t\t\t  NameStr(filter->column_name),\n\t\t\t\t\t\t\t\t\t\t\t\t  filter->strategy,\n\t\t\t\t\t\t\t\t\t\t\t\t  scankeys,\n\t\t\t\t\t\t\t\t\t\t\t\t  key_index,\n\t\t\t\t\t\t\t\t\t\t\t\t  null_columns,\n\t\t\t\t\t\t\t\t\t\t\t\t  filter->value ? filter->value->constvalue : 0,\n\t\t\t\t\t\t\t\t\t\t\t\t  filter->is_null_check)",
          "new_text": "NameStr(filter->column_name)",
          "old_line_content": "\t\tkey_index = create_segment_filter_scankey(decompressor,",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t  NameStr(filter->column_name),",
          "content_same": false
        },
        {
          "line": 3045,
          "old_api": "ereport",
          "new_api": "errcode",
          "old_text": "ereport(ERROR,\n\t\t\t\t\t\t(errcode(ERRCODE_T_R_SERIALIZATION_FAILURE),\n\t\t\t\t\t\t errmsg(\"could not serialize access due to concurrent update\")))",
          "new_text": "errcode(ERRCODE_T_R_SERIALIZATION_FAILURE)",
          "old_line_content": "\t\t\t\tereport(ERROR,",
          "new_line_content": "\t\t\t\t\t\t(errcode(ERRCODE_T_R_SERIALIZATION_FAILURE),",
          "content_same": false
        },
        {
          "line": 3046,
          "old_api": "errcode",
          "new_api": "errmsg",
          "old_text": "errcode(ERRCODE_T_R_SERIALIZATION_FAILURE)",
          "new_text": "errmsg(\"could not serialize access due to concurrent update\")",
          "old_line_content": "\t\t\t\t\t\t(errcode(ERRCODE_T_R_SERIALIZATION_FAILURE),",
          "new_line_content": "\t\t\t\t\t\t errmsg(\"could not serialize access due to concurrent update\")));",
          "content_same": false
        },
        {
          "line": 3096,
          "old_api": "table_beginscan",
          "new_api": "heap_getnext",
          "old_text": "table_beginscan(decompressor->in_rel, snapshot, num_scankeys, scankeys)",
          "new_text": "heap_getnext(heapScan, ForwardScanDirection)",
          "old_line_content": "\t\ttable_beginscan(decompressor->in_rel, snapshot, num_scankeys, scankeys);",
          "new_line_content": "\twhile ((compressed_tuple = heap_getnext(heapScan, ForwardScanDirection)) != NULL)",
          "content_same": false
        },
        {
          "line": 3106,
          "old_api": "list_nth_int",
          "new_api": "heap_attisnull",
          "old_text": "list_nth_int(is_nulls, pos)",
          "new_text": "heap_attisnull(compressed_tuple, attrno, decompressor->in_desc)",
          "old_line_content": "\t\t\tis_null_condition = list_nth_int(is_nulls, pos);",
          "new_line_content": "\t\t\tseg_col_is_null = heap_attisnull(compressed_tuple, attrno, decompressor->in_desc);",
          "content_same": false
        },
        {
          "line": 3130,
          "old_api": "table_endscan",
          "new_api": "report_error",
          "old_text": "table_endscan(heapScan)",
          "new_text": "report_error(result)",
          "old_line_content": "\t\t\ttable_endscan(heapScan);",
          "new_line_content": "\t\t\treport_error(result);",
          "content_same": false
        },
        {
          "line": 3137,
          "old_api": "pfree",
          "new_api": "table_endscan",
          "old_text": "pfree(scankeys)",
          "new_text": "table_endscan(heapScan)",
          "old_line_content": "\t\tpfree(scankeys);",
          "new_line_content": "\ttable_endscan(heapScan);",
          "content_same": false
        },
        {
          "line": 3199,
          "old_api": "index_beginscan",
          "new_api": "table_slot_create",
          "old_text": "index_beginscan(decompressor->in_rel, index_rel, snapshot, num_index_scankeys, 0)",
          "new_text": "table_slot_create(decompressor->in_rel, NULL)",
          "old_line_content": "\t\tindex_beginscan(decompressor->in_rel, index_rel, snapshot, num_index_scankeys, 0);",
          "new_line_content": "\tTupleTableSlot *slot = table_slot_create(decompressor->in_rel, NULL);",
          "content_same": false
        },
        {
          "line": 3200,
          "old_api": "table_slot_create",
          "new_api": "index_rescan",
          "old_text": "table_slot_create(decompressor->in_rel, NULL)",
          "new_text": "index_rescan(scan, index_scankeys, num_index_scankeys, NULL, 0)",
          "old_line_content": "\tTupleTableSlot *slot = table_slot_create(decompressor->in_rel, NULL);",
          "new_line_content": "\tindex_rescan(scan, index_scankeys, num_index_scankeys, NULL, 0);",
          "content_same": false
        },
        {
          "line": 3201,
          "old_api": "index_rescan",
          "new_api": "index_getnext_slot",
          "old_text": "index_rescan(scan, index_scankeys, num_index_scankeys, NULL, 0)",
          "new_text": "index_getnext_slot(scan, ForwardScanDirection, slot)",
          "old_line_content": "\tindex_rescan(scan, index_scankeys, num_index_scankeys, NULL, 0);",
          "new_line_content": "\twhile (index_getnext_slot(scan, ForwardScanDirection, slot))",
          "content_same": false
        },
        {
          "line": 3216,
          "old_api": "HeapKeyTest",
          "new_api": "RelationGetDescr",
          "old_text": "HeapKeyTest(compressed_tuple,\n\t\t\t\t\t\tRelationGetDescr(decompressor->in_rel),\n\t\t\t\t\t\tnum_scankeys,\n\t\t\t\t\t\tscankeys,\n\t\t\t\t\t\tvalid)",
          "new_text": "RelationGetDescr(decompressor->in_rel)",
          "old_line_content": "\t\t\tHeapKeyTest(compressed_tuple,",
          "new_line_content": "\t\t\t\t\t\tRelationGetDescr(decompressor->in_rel),",
          "content_same": false
        },
        {
          "line": 3222,
          "old_api": "HeapKeyTest",
          "new_api": "RelationGetDescr",
          "old_text": "HeapKeyTest(compressed_tuple,\n\t\t\t\t\t\t\t\tRelationGetDescr(decompressor->in_rel),\n\t\t\t\t\t\t\t\tnum_scankeys,\n\t\t\t\t\t\t\t\tscankeys)",
          "new_text": "RelationGetDescr(decompressor->in_rel)",
          "old_line_content": "\t\t\tvalid = HeapKeyTest(compressed_tuple,",
          "new_line_content": "\t\t\t\t\t\t\t\tRelationGetDescr(decompressor->in_rel),",
          "content_same": false
        },
        {
          "line": 3244,
          "old_api": "heap_freetuple",
          "new_api": "index_endscan",
          "old_text": "heap_freetuple(compressed_tuple)",
          "new_text": "index_endscan(scan)",
          "old_line_content": "\t\t\theap_freetuple(compressed_tuple);",
          "new_line_content": "\t\t\tindex_endscan(scan);",
          "content_same": false
        },
        {
          "line": 3245,
          "old_api": "index_endscan",
          "new_api": "index_close",
          "old_text": "index_endscan(scan)",
          "new_text": "index_close(index_rel, AccessShareLock)",
          "old_line_content": "\t\t\tindex_endscan(scan);",
          "new_line_content": "\t\t\tindex_close(index_rel, AccessShareLock);",
          "content_same": false
        },
        {
          "line": 3246,
          "old_api": "index_close",
          "new_api": "report_error",
          "old_text": "index_close(index_rel, AccessShareLock)",
          "new_text": "report_error(result)",
          "old_line_content": "\t\t\tindex_close(index_rel, AccessShareLock);",
          "new_line_content": "\t\t\treport_error(result);",
          "content_same": false
        },
        {
          "line": 3249,
          "old_api": "row_decompressor_decompress_row_to_table",
          "new_api": "heap_freetuple",
          "old_text": "row_decompressor_decompress_row_to_table(decompressor)",
          "new_text": "heap_freetuple(compressed_tuple)",
          "old_line_content": "\t\trow_decompressor_decompress_row_to_table(decompressor);",
          "new_line_content": "\t\theap_freetuple(compressed_tuple);",
          "content_same": false
        },
        {
          "line": 3263,
          "old_api": "ExecDropSingleTupleTableSlot",
          "new_api": "index_endscan",
          "old_text": "ExecDropSingleTupleTableSlot(slot)",
          "new_text": "index_endscan(scan)",
          "old_line_content": "\tExecDropSingleTupleTableSlot(slot);",
          "new_line_content": "\tindex_endscan(scan);",
          "content_same": false
        },
        {
          "line": 3264,
          "old_api": "index_endscan",
          "new_api": "CommandCounterIncrement",
          "old_text": "index_endscan(scan)",
          "new_text": "CommandCounterIncrement()",
          "old_line_content": "\tindex_endscan(scan);",
          "new_line_content": "\tCommandCounterIncrement();",
          "content_same": false
        },
        {
          "line": 3308,
          "old_api": "table_open",
          "new_api": "ts_chunk_get_by_id",
          "old_text": "table_open(chunk->table_id, RowExclusiveLock)",
          "new_text": "ts_chunk_get_by_id(chunk->fd.compressed_chunk_id, true)",
          "old_line_content": "\tchunk_rel = table_open(chunk->table_id, RowExclusiveLock);",
          "new_line_content": "\tcomp_chunk = ts_chunk_get_by_id(chunk->fd.compressed_chunk_id, true);",
          "content_same": false
        },
        {
          "line": 3309,
          "old_api": "ts_chunk_get_by_id",
          "new_api": "table_open",
          "old_text": "ts_chunk_get_by_id(chunk->fd.compressed_chunk_id, true)",
          "new_text": "table_open(comp_chunk->table_id, RowExclusiveLock)",
          "old_line_content": "\tcomp_chunk = ts_chunk_get_by_id(chunk->fd.compressed_chunk_id, true);",
          "new_line_content": "\tcomp_chunk_rel = table_open(comp_chunk->table_id, RowExclusiveLock);",
          "content_same": false
        },
        {
          "line": 3310,
          "old_api": "table_open",
          "new_api": "build_decompressor",
          "old_text": "table_open(comp_chunk->table_id, RowExclusiveLock)",
          "new_text": "build_decompressor(comp_chunk_rel, chunk_rel)",
          "old_line_content": "\tcomp_chunk_rel = table_open(comp_chunk->table_id, RowExclusiveLock);",
          "new_line_content": "\tdecompressor = build_decompressor(comp_chunk_rel, chunk_rel);",
          "content_same": false
        },
        {
          "line": 3322,
          "old_api": "find_matching_index",
          "new_api": "Assert",
          "old_text": "find_matching_index(comp_chunk_rel, index_filters)",
          "new_text": "Assert(matching_index_rel)",
          "old_line_content": "\t\tRelation matching_index_rel = find_matching_index(comp_chunk_rel, index_filters);",
          "new_line_content": "\t\tAssert(matching_index_rel);",
          "content_same": false
        },
        {
          "line": 3323,
          "old_api": "Assert",
          "new_api": "fix_and_reorder_index_filters",
          "old_text": "Assert(matching_index_rel)",
          "new_text": "fix_and_reorder_index_filters(comp_chunk_rel,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  matching_index_rel,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  segmentby_predicates,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  index_filters)",
          "old_line_content": "\t\tAssert(matching_index_rel);",
          "new_line_content": "\t\tordered_index_filters = fix_and_reorder_index_filters(comp_chunk_rel,",
          "content_same": false
        },
        {
          "line": 3361,
          "old_api": "ts_catalog_close_indexes",
          "new_api": "FreeExecutorState",
          "old_text": "ts_catalog_close_indexes(decompressor.indexstate)",
          "new_text": "FreeExecutorState(decompressor.estate)",
          "old_line_content": "\tts_catalog_close_indexes(decompressor.indexstate);",
          "new_line_content": "\tFreeExecutorState(decompressor.estate);",
          "content_same": false
        },
        {
          "line": 3362,
          "old_api": "FreeExecutorState",
          "new_api": "FreeBulkInsertState",
          "old_text": "FreeExecutorState(decompressor.estate)",
          "new_text": "FreeBulkInsertState(decompressor.bistate)",
          "old_line_content": "\tFreeExecutorState(decompressor.estate);",
          "new_line_content": "\tFreeBulkInsertState(decompressor.bistate);",
          "content_same": false
        },
        {
          "line": 3370,
          "old_api": "lfirst",
          "new_api": "pfree",
          "old_text": "lfirst(lc)",
          "new_text": "pfree(filter)",
          "old_line_content": "\t\tfilter = lfirst(lc);",
          "new_line_content": "\t\tpfree(filter);",
          "content_same": false
        },
        {
          "line": 3459,
          "old_api": "rt_fetch",
          "new_api": "ts_chunk_get_by_relid",
          "old_text": "rt_fetch(scanrelid, ps->state->es_range_table)",
          "new_text": "ts_chunk_get_by_relid(rte->relid, false)",
          "old_line_content": "\t\t\trte = rt_fetch(scanrelid, ps->state->es_range_table);",
          "new_line_content": "\t\t\tcurrent_chunk = ts_chunk_get_by_relid(rte->relid, false);",
          "content_same": false
        },
        {
          "line": 3460,
          "old_api": "ts_chunk_get_by_relid",
          "new_api": "ts_chunk_is_compressed",
          "old_text": "ts_chunk_get_by_relid(rte->relid, false)",
          "new_text": "ts_chunk_is_compressed(current_chunk)",
          "old_line_content": "\t\t\tcurrent_chunk = ts_chunk_get_by_relid(rte->relid, false);",
          "new_line_content": "\t\t\tif (current_chunk && ts_chunk_is_compressed(current_chunk))",
          "content_same": false
        },
        {
          "line": 3464,
          "old_api": "ereport",
          "new_api": "errcode",
          "old_text": "ereport(ERROR,\n\t\t\t\t\t\t\t(errcode(ERRCODE_FEATURE_NOT_SUPPORTED),\n\t\t\t\t\t\t\t errmsg(\"UPDATE/DELETE is disabled on compressed chunks\"),\n\t\t\t\t\t\t\t errhint(\"Set timescaledb.enable_dml_decompression to TRUE.\")))",
          "new_text": "errcode(ERRCODE_FEATURE_NOT_SUPPORTED)",
          "old_line_content": "\t\t\t\t\tereport(ERROR,",
          "new_line_content": "\t\t\t\t\t\t\t(errcode(ERRCODE_FEATURE_NOT_SUPPORTED),",
          "content_same": false
        },
        {
          "line": 3465,
          "old_api": "errcode",
          "new_api": "errmsg",
          "old_text": "errcode(ERRCODE_FEATURE_NOT_SUPPORTED)",
          "new_text": "errmsg(\"UPDATE/DELETE is disabled on compressed chunks\")",
          "old_line_content": "\t\t\t\t\t\t\t(errcode(ERRCODE_FEATURE_NOT_SUPPORTED),",
          "new_line_content": "\t\t\t\t\t\t\t errmsg(\"UPDATE/DELETE is disabled on compressed chunks\"),",
          "content_same": false
        },
        {
          "line": 3466,
          "old_api": "errmsg",
          "new_api": "errhint",
          "old_text": "errmsg(\"UPDATE/DELETE is disabled on compressed chunks\")",
          "new_text": "errhint(\"Set timescaledb.enable_dml_decompression to TRUE.\")",
          "old_line_content": "\t\t\t\t\t\t\t errmsg(\"UPDATE/DELETE is disabled on compressed chunks\"),",
          "new_line_content": "\t\t\t\t\t\t\t errhint(\"Set timescaledb.enable_dml_decompression to TRUE.\")));",
          "content_same": false
        },
        {
          "line": 3487,
          "old_api": "GetTransactionSnapshot",
          "new_api": "ExecReScan",
          "old_text": "GetTransactionSnapshot()",
          "new_text": "ExecReScan(ps)",
          "old_line_content": "\t\t\t\t\t\tss->ss_currentScanDesc->rs_snapshot = GetTransactionSnapshot();",
          "new_line_content": "\t\t\t\t\t\tExecReScan(ps);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 2049,
          "old_api": null,
          "new_api": "OidIsValid",
          "old_text": null,
          "new_text": "OidIsValid(opr)",
          "old_line_content": "\t/* No operator could be found so we can't create the scankey. */",
          "new_line_content": "\tif (!OidIsValid(opr))",
          "content_same": false
        },
        {
          "line": 2052,
          "old_api": null,
          "new_api": "get_opcode",
          "old_text": null,
          "new_text": "get_opcode(opr)",
          "old_line_content": "",
          "new_line_content": "\topr = get_opcode(opr);",
          "content_same": false
        },
        {
          "line": 2055,
          "old_api": null,
          "new_api": "OidIsValid",
          "old_text": null,
          "new_text": "OidIsValid(opr)",
          "old_line_content": "\t/* We should never end up here but: no opcode, no optimization */",
          "new_line_content": "\tif (!OidIsValid(opr))",
          "content_same": false
        },
        {
          "line": 2058,
          "old_api": null,
          "new_api": "ScanKeyEntryInitialize",
          "old_text": null,
          "new_text": "ScanKeyEntryInitialize(&scankeys[num_scankeys++],\n\t\t\t\t\t\t   0, /* flags */\n\t\t\t\t\t\t   cmp_attno,\n\t\t\t\t\t\t   strategy,\n\t\t\t\t\t\t   InvalidOid, /* No strategy subtype. */\n\t\t\t\t\t\t   decompressor->in_desc->attrs[AttrNumberGetAttrOffset(cmp_attno)]\n\t\t\t\t\t\t\t   .attcollation,\n\t\t\t\t\t\t   opr,\n\t\t\t\t\t\t   value)",
          "old_line_content": "",
          "new_line_content": "\tScanKeyEntryInitialize(&scankeys[num_scankeys++],",
          "content_same": false
        },
        {
          "line": 2063,
          "old_api": null,
          "new_api": "AttrNumberGetAttrOffset",
          "old_text": null,
          "new_text": "AttrNumberGetAttrOffset(cmp_attno)",
          "old_line_content": "\t\t\t\t\t\t   InvalidOid, /* No strategy subtype. */",
          "new_line_content": "\t\t\t\t\t\t   decompressor->in_desc->attrs[AttrNumberGetAttrOffset(cmp_attno)]",
          "content_same": false
        },
        {
          "line": 2078,
          "old_api": null,
          "new_api": "TTS_EMPTY",
          "old_text": null,
          "new_text": "TTS_EMPTY(slot)",
          "old_line_content": "\t */",
          "new_line_content": "\tif (TTS_EMPTY(slot))",
          "content_same": false
        },
        {
          "line": 2085,
          "old_api": null,
          "new_api": "ts_indexing_relation_has_primary_or_unique_index",
          "old_text": null,
          "new_text": "ts_indexing_relation_has_primary_or_unique_index(out_rel)",
          "old_line_content": "",
          "new_line_content": "\tif (!ts_indexing_relation_has_primary_or_unique_index(out_rel))",
          "content_same": false
        },
        {
          "line": 2094,
          "old_api": null,
          "new_api": "ereport",
          "old_text": null,
          "new_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_FEATURE_NOT_SUPPORTED),\n\t\t\t\t errmsg(\"inserting into compressed chunk with unique constraints disabled\"),\n\t\t\t\t errhint(\"Set timescaledb.enable_dml_decompression to TRUE.\")))",
          "old_line_content": "\tif (!ts_guc_enable_dml_decompression)",
          "new_line_content": "\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 2099,
          "old_api": null,
          "new_api": "ts_chunk_get_by_id",
          "old_text": null,
          "new_text": "ts_chunk_get_by_id(chunk->fd.compressed_chunk_id, true)",
          "old_line_content": "",
          "new_line_content": "\tChunk *comp = ts_chunk_get_by_id(chunk->fd.compressed_chunk_id, true);",
          "content_same": false
        },
        {
          "line": 2102,
          "old_api": null,
          "new_api": "build_decompressor",
          "old_text": null,
          "new_text": "build_decompressor(in_rel, out_rel)",
          "old_line_content": "",
          "new_line_content": "\tRowDecompressor decompressor = build_decompressor(in_rel, out_rel);",
          "content_same": false
        },
        {
          "line": 2107,
          "old_api": null,
          "new_api": "build_scankeys",
          "old_text": null,
          "new_text": "build_scankeys(chunk->fd.hypertable_id,\n\t\t\t\t\t\t\t\t\t\t   chunk->hypertable_relid,\n\t\t\t\t\t\t\t\t\t\t   &decompressor,\n\t\t\t\t\t\t\t\t\t\t   key_columns,\n\t\t\t\t\t\t\t\t\t\t   &null_columns,\n\t\t\t\t\t\t\t\t\t\t   slot,\n\t\t\t\t\t\t\t\t\t\t   &num_scankeys)",
          "old_line_content": "\tint num_scankeys;",
          "new_line_content": "\tScanKeyData *scankeys = build_scankeys(chunk->fd.hypertable_id,",
          "content_same": false
        },
        {
          "line": 2115,
          "old_api": null,
          "new_api": "bms_free",
          "old_text": null,
          "new_text": "bms_free(key_columns)",
          "old_line_content": "",
          "new_line_content": "\tbms_free(key_columns);",
          "content_same": false
        },
        {
          "line": 2122,
          "old_api": null,
          "new_api": "GetLatestSnapshot",
          "old_text": null,
          "new_text": "GetLatestSnapshot()",
          "old_line_content": "\t */",
          "new_line_content": "\tTableScanDesc heapScan = table_beginscan(in_rel, GetLatestSnapshot(), num_scankeys, scankeys);",
          "content_same": false
        },
        {
          "line": 2124,
          "old_api": null,
          "new_api": "heap_getnext",
          "old_text": null,
          "new_text": "heap_getnext(heapScan, ForwardScanDirection)",
          "old_line_content": "",
          "new_line_content": "\tfor (HeapTuple compressed_tuple = heap_getnext(heapScan, ForwardScanDirection);",
          "content_same": false
        },
        {
          "line": 2126,
          "old_api": null,
          "new_api": "heap_getnext",
          "old_text": null,
          "new_text": "heap_getnext(heapScan, ForwardScanDirection)",
          "old_line_content": "\t\t compressed_tuple != NULL;",
          "new_line_content": "\t\t compressed_tuple = heap_getnext(heapScan, ForwardScanDirection))",
          "content_same": false
        },
        {
          "line": 2128,
          "old_api": null,
          "new_api": "HeapTupleIsValid",
          "old_text": null,
          "new_text": "HeapTupleIsValid(compressed_tuple)",
          "old_line_content": "\t{",
          "new_line_content": "\t\tAssert(HeapTupleIsValid(compressed_tuple));",
          "content_same": false
        },
        {
          "line": 2135,
          "old_api": null,
          "new_api": "bms_next_member",
          "old_text": null,
          "new_text": "bms_next_member(null_columns, -1)",
          "old_line_content": "\t\t */",
          "new_line_content": "\t\tfor (int attno = bms_next_member(null_columns, -1); attno >= 0;",
          "content_same": false
        },
        {
          "line": 2138,
          "old_api": null,
          "new_api": "heap_attisnull",
          "old_text": null,
          "new_text": "heap_attisnull(compressed_tuple, attno, decompressor.in_desc)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\tif (!heap_attisnull(compressed_tuple, attno, decompressor.in_desc))",
          "content_same": false
        },
        {
          "line": 2151,
          "old_api": null,
          "new_api": "heap_deform_tuple",
          "old_text": null,
          "new_text": "heap_deform_tuple(compressed_tuple,\n\t\t\t\t\t\t  decompressor.in_desc,\n\t\t\t\t\t\t  decompressor.compressed_datums,\n\t\t\t\t\t\t  decompressor.compressed_is_nulls)",
          "old_line_content": "",
          "new_line_content": "\t\theap_deform_tuple(compressed_tuple,",
          "content_same": false
        },
        {
          "line": 2156,
          "old_api": null,
          "new_api": "write_logical_replication_msg_decompression_start",
          "old_text": null,
          "new_text": "write_logical_replication_msg_decompression_start()",
          "old_line_content": "",
          "new_line_content": "\t\twrite_logical_replication_msg_decompression_start();",
          "content_same": false
        },
        {
          "line": 2162,
          "old_api": null,
          "new_api": "table_tuple_delete",
          "old_text": null,
          "new_text": "table_tuple_delete(in_rel,\n\t\t\t\t\t\t\t\t\t&compressed_tuple->t_self,\n\t\t\t\t\t\t\t\t\tdecompressor.mycid,\n\t\t\t\t\t\t\t\t\tGetTransactionSnapshot(),\n\t\t\t\t\t\t\t\t\tInvalidSnapshot,\n\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\t&tmfd,\n\t\t\t\t\t\t\t\t\tfalse)",
          "old_line_content": "\t\tTM_Result result pg_attribute_unused();",
          "new_line_content": "\t\tresult = table_tuple_delete(in_rel,",
          "content_same": false
        },
        {
          "line": 2165,
          "old_api": null,
          "new_api": "GetTransactionSnapshot",
          "old_text": null,
          "new_text": "GetTransactionSnapshot()",
          "old_line_content": "\t\t\t\t\t\t\t\t\tdecompressor.mycid,",
          "new_line_content": "\t\t\t\t\t\t\t\t\tGetTransactionSnapshot(),",
          "content_same": false
        },
        {
          "line": 2170,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(result == TM_Ok)",
          "old_line_content": "\t\t\t\t\t\t\t\t\tfalse);",
          "new_line_content": "\t\tAssert(result == TM_Ok);",
          "content_same": false
        },
        {
          "line": 2175,
          "old_api": null,
          "new_api": "table_endscan",
          "old_text": null,
          "new_text": "table_endscan(heapScan)",
          "old_line_content": "",
          "new_line_content": "\ttable_endscan(heapScan);",
          "content_same": false
        },
        {
          "line": 2177,
          "old_api": null,
          "new_api": "ts_catalog_close_indexes",
          "old_text": null,
          "new_text": "ts_catalog_close_indexes(decompressor.indexstate)",
          "old_line_content": "",
          "new_line_content": "\tts_catalog_close_indexes(decompressor.indexstate);",
          "content_same": false
        },
        {
          "line": 2181,
          "old_api": null,
          "new_api": "CommandCounterIncrement",
          "old_text": null,
          "new_text": "CommandCounterIncrement()",
          "old_line_content": "",
          "new_line_content": "\tCommandCounterIncrement();",
          "content_same": false
        },
        {
          "line": 2190,
          "old_api": null,
          "new_api": "pg_strcasecmp",
          "old_text": null,
          "new_text": "pg_strcasecmp(name, \"deltadelta\")",
          "old_line_content": "{",
          "new_line_content": "\tif (pg_strcasecmp(name, \"deltadelta\") == 0)",
          "content_same": false
        },
        {
          "line": 2194,
          "old_api": null,
          "new_api": "pg_strcasecmp",
          "old_text": null,
          "new_text": "pg_strcasecmp(name, \"gorilla\")",
          "old_line_content": "\t}",
          "new_line_content": "\telse if (pg_strcasecmp(name, \"gorilla\") == 0)",
          "content_same": false
        },
        {
          "line": 2199,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"unknown comrpession algorithm %s\", name)",
          "old_line_content": "",
          "new_line_content": "\tereport(ERROR, (errmsg(\"unknown comrpession algorithm %s\", name)));",
          "content_same": false
        },
        {
          "line": 2235,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR,\n\t\t \"no decompression function for compression algorithm %d with element type %d\",\n\t\t algo,\n\t\t type)",
          "old_line_content": "",
          "new_line_content": "\telog(ERROR,",
          "content_same": false
        },
        {
          "line": 2239,
          "old_api": null,
          "new_api": "pg_unreachable",
          "old_text": null,
          "new_text": "pg_unreachable()",
          "old_line_content": "\t\t type);",
          "new_line_content": "\tpg_unreachable();",
          "content_same": false
        },
        {
          "line": 2251,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(path, \"r\")",
          "old_line_content": "{",
          "new_line_content": "\tFILE *f = fopen(path, \"r\");",
          "content_same": false
        },
        {
          "line": 2255,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"could not open the file '%s'\", path)",
          "old_line_content": "\t{",
          "new_line_content": "\t\telog(ERROR, \"could not open the file '%s'\", path);",
          "content_same": false
        },
        {
          "line": 2258,
          "old_api": null,
          "new_api": "fseek",
          "old_text": null,
          "new_text": "fseek(f, 0, SEEK_END)",
          "old_line_content": "",
          "new_line_content": "\tfseek(f, 0, SEEK_END);",
          "content_same": false
        },
        {
          "line": 2274,
          "old_api": null,
          "new_api": "palloc",
          "old_text": null,
          "new_text": "palloc(fsize + 1)",
          "old_line_content": "",
          "new_line_content": "\tchar *string = palloc(fsize + 1);",
          "content_same": false
        },
        {
          "line": 2279,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"failed to read file '%s'\", path)",
          "old_line_content": "\t{",
          "new_line_content": "\t\telog(ERROR, \"failed to read file '%s'\", path);",
          "content_same": false
        },
        {
          "line": 2282,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(f)",
          "old_line_content": "",
          "new_line_content": "\tfclose(f);",
          "content_same": false
        },
        {
          "line": 237,
          "old_api": null,
          "new_api": "GetCurrentCommandId",
          "old_text": null,
          "new_text": "GetCurrentCommandId(true)",
          "old_line_content": "\tIndexScanDesc index_scan;",
          "new_line_content": "\tCommandId mycid = GetCurrentCommandId(true);",
          "content_same": false
        },
        {
          "line": 2286,
          "old_api": null,
          "new_api": "get_decompress_fn",
          "old_text": null,
          "new_text": "get_decompress_fn(algo, type)((const uint8 *) string, fsize, /* extra_checks = */ true)",
          "old_line_content": "",
          "new_line_content": "\t*rows = get_decompress_fn(algo, type)((const uint8 *) string, fsize, /* extra_checks = */ true);",
          "content_same": false
        },
        {
          "line": 2289,
          "old_api": null,
          "new_api": "TS_FUNCTION_INFO_V1",
          "old_text": null,
          "new_text": "TS_FUNCTION_INFO_V1(ts_read_compressed_data_file)",
          "old_line_content": "",
          "new_line_content": "TS_FUNCTION_INFO_V1(ts_read_compressed_data_file);",
          "content_same": false
        },
        {
          "line": 248,
          "old_api": null,
          "new_api": "table_open",
          "old_text": null,
          "new_text": "table_open(in_table, ExclusiveLock)",
          "old_line_content": "\t */",
          "new_line_content": "\tRelation in_rel = table_open(in_table, ExclusiveLock);",
          "content_same": false
        },
        {
          "line": 2297,
          "old_api": null,
          "new_api": "PG_GETARG_CSTRING",
          "old_text": null,
          "new_text": "PG_GETARG_CSTRING(0)",
          "old_line_content": "\tint bytes;",
          "new_line_content": "\tread_compressed_data_file_impl(get_compression_algorithm(PG_GETARG_CSTRING(0)),",
          "content_same": false
        },
        {
          "line": 2302,
          "old_api": null,
          "new_api": "PG_RETURN_INT32",
          "old_text": null,
          "new_text": "PG_RETURN_INT32(rows)",
          "old_line_content": "\t\t\t\t\t\t\t\t   &rows);",
          "new_line_content": "\tPG_RETURN_INT32(rows);",
          "content_same": false
        },
        {
          "line": 254,
          "old_api": null,
          "new_api": "relation_open",
          "old_text": null,
          "new_text": "relation_open(out_table, ExclusiveLock)",
          "old_line_content": "\t */",
          "new_line_content": "\tRelation out_rel = relation_open(out_table, ExclusiveLock);",
          "content_same": false
        },
        {
          "line": 2305,
          "old_api": null,
          "new_api": "TS_FUNCTION_INFO_V1",
          "old_text": null,
          "new_text": "TS_FUNCTION_INFO_V1(ts_read_compressed_data_directory)",
          "old_line_content": "",
          "new_line_content": "TS_FUNCTION_INFO_V1(ts_read_compressed_data_directory);",
          "content_same": false
        },
        {
          "line": 261,
          "old_api": null,
          "new_api": "RelationGetDescr",
          "old_text": null,
          "new_text": "RelationGetDescr(in_rel)",
          "old_line_content": "",
          "new_line_content": "\tTupleDesc in_desc = RelationGetDescr(in_rel);",
          "content_same": false
        },
        {
          "line": 2332,
          "old_api": null,
          "new_api": "PG_GETARG_CSTRING",
          "old_text": null,
          "new_text": "PG_GETARG_CSTRING(2)",
          "old_line_content": "",
          "new_line_content": "\tchar *name = PG_GETARG_CSTRING(2);",
          "content_same": false
        },
        {
          "line": 287,
          "old_api": null,
          "new_api": "RelationGetIndexList",
          "old_text": null,
          "new_text": "RelationGetIndexList(in_rel)",
          "old_line_content": "\t */",
          "new_line_content": "\t\tList *in_rel_index_oids = RelationGetIndexList(in_rel);",
          "content_same": false
        },
        {
          "line": 290,
          "old_api": null,
          "new_api": "lfirst_oid",
          "old_text": null,
          "new_text": "lfirst_oid(lc)",
          "old_line_content": "\t\tforeach (lc, in_rel_index_oids)",
          "new_line_content": "\t\t\tOid index_oid = lfirst_oid(lc);",
          "content_same": false
        },
        {
          "line": 291,
          "old_api": null,
          "new_api": "index_open",
          "old_text": null,
          "new_text": "index_open(index_oid, AccessShareLock)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\tRelation index_rel = index_open(index_oid, AccessShareLock);",
          "content_same": false
        },
        {
          "line": 2340,
          "old_api": null,
          "new_api": "SRF_IS_FIRSTCALL",
          "old_text": null,
          "new_text": "SRF_IS_FIRSTCALL()",
          "old_line_content": "\t/* stuff done only on the first call of the function */",
          "new_line_content": "\tif (SRF_IS_FIRSTCALL())",
          "content_same": false
        },
        {
          "line": 2343,
          "old_api": null,
          "new_api": "SRF_FIRSTCALL_INIT",
          "old_text": null,
          "new_text": "SRF_FIRSTCALL_INIT()",
          "old_line_content": "\t\t/* create a function context for cross-call persistence */",
          "new_line_content": "\t\tfuncctx = SRF_FIRSTCALL_INIT();",
          "content_same": false
        },
        {
          "line": 2346,
          "old_api": null,
          "new_api": "MemoryContextSwitchTo",
          "old_text": null,
          "new_text": "MemoryContextSwitchTo(funcctx->multi_call_memory_ctx)",
          "old_line_content": "\t\t/* switch to memory context appropriate for multiple function calls */",
          "new_line_content": "\t\tMemoryContextSwitchTo(funcctx->multi_call_memory_ctx);",
          "content_same": false
        },
        {
          "line": 300,
          "old_api": null,
          "new_api": "index_close",
          "old_text": null,
          "new_text": "index_close(index_rel, AccessShareLock)",
          "old_line_content": "\t\t\t\t * only to a subset of all rows.",
          "new_line_content": "\t\t\t\tindex_close(index_rel, AccessShareLock);",
          "content_same": false
        },
        {
          "line": 2349,
          "old_api": null,
          "new_api": "get_call_result_type",
          "old_text": null,
          "new_text": "get_call_result_type(fcinfo, NULL, &funcctx->tuple_desc)",
          "old_line_content": "\t\t/* Build a tuple descriptor for our result type */",
          "new_line_content": "\t\tif (get_call_result_type(fcinfo, NULL, &funcctx->tuple_desc) != TYPEFUNC_COMPOSITE)",
          "content_same": false
        },
        {
          "line": 2359,
          "old_api": null,
          "new_api": "TupleDescGetAttInMetadata",
          "old_text": null,
          "new_text": "TupleDescGetAttInMetadata(funcctx->tuple_desc)",
          "old_line_content": "\t\t */",
          "new_line_content": "\t\tfuncctx->attinmeta = TupleDescGetAttInMetadata(funcctx->tuple_desc);",
          "content_same": false
        },
        {
          "line": 312,
          "old_api": null,
          "new_api": "NameStr",
          "old_text": null,
          "new_text": "NameStr(keys[i]->attname)",
          "old_line_content": "\t\t\t\t{",
          "new_line_content": "\t\t\t\t\tint16 att_num = get_attnum(in_table, NameStr(keys[i]->attname));",
          "content_same": false
        },
        {
          "line": 2361,
          "old_api": null,
          "new_api": "palloc",
          "old_text": null,
          "new_text": "palloc(sizeof(struct user_context))",
          "old_line_content": "",
          "new_line_content": "\t\tfuncctx->user_fctx = palloc(sizeof(struct user_context));",
          "content_same": false
        },
        {
          "line": 2364,
          "old_api": null,
          "new_api": "opendir",
          "old_text": null,
          "new_text": "opendir(name)",
          "old_line_content": "",
          "new_line_content": "\t\tc->dp = opendir(name);",
          "content_same": false
        },
        {
          "line": 318,
          "old_api": null,
          "new_api": "COMPRESSIONCOL_IS_SEGMENT_BY",
          "old_text": null,
          "new_text": "COMPRESSIONCOL_IS_SEGMENT_BY(keys[i])",
          "old_line_content": "\t\t\t\t\tbool is_orderby_asc =",
          "new_line_content": "\t\t\t\t\t\tCOMPRESSIONCOL_IS_SEGMENT_BY(keys[i]) ? true : keys[i]->orderby_asc;",
          "content_same": false
        },
        {
          "line": 320,
          "old_api": null,
          "new_api": "COMPRESSIONCOL_IS_SEGMENT_BY",
          "old_text": null,
          "new_text": "COMPRESSIONCOL_IS_SEGMENT_BY(keys[i])",
          "old_line_content": "\t\t\t\t\tbool is_null_first =",
          "new_line_content": "\t\t\t\t\t\tCOMPRESSIONCOL_IS_SEGMENT_BY(keys[i]) ? false : keys[i]->orderby_nullsfirst;",
          "content_same": false
        },
        {
          "line": 2368,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"could not open directory '%s'\", name)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\telog(ERROR, \"could not open directory '%s'\", name);",
          "content_same": false
        },
        {
          "line": 2371,
          "old_api": null,
          "new_api": "MemoryContextSwitchTo",
          "old_text": null,
          "new_text": "MemoryContextSwitchTo(call_memory_context)",
          "old_line_content": "",
          "new_line_content": "\t\tMemoryContextSwitchTo(call_memory_context);",
          "content_same": false
        },
        {
          "line": 2374,
          "old_api": null,
          "new_api": "SRF_PERCALL_SETUP",
          "old_text": null,
          "new_text": "SRF_PERCALL_SETUP()",
          "old_line_content": "",
          "new_line_content": "\tfuncctx = SRF_PERCALL_SETUP();",
          "content_same": false
        },
        {
          "line": 327,
          "old_api": null,
          "new_api": "SearchSysCacheAttNum",
          "old_text": null,
          "new_text": "SearchSysCacheAttNum(in_table, att_num)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\tin_table_tp = SearchSysCacheAttNum(in_table, att_num);",
          "content_same": false
        },
        {
          "line": 331,
          "old_api": null,
          "new_api": "get_rel_name",
          "old_text": null,
          "new_text": "get_rel_name(in_table)",
          "old_line_content": "\t\t\t\t\t\t\t \"table \\\"%s\\\" does not have column \\\"%s\\\"\",",
          "new_line_content": "\t\t\t\t\t\t\t get_rel_name(in_table),",
          "content_same": false
        },
        {
          "line": 334,
          "old_api": null,
          "new_api": "SearchSysCacheAttNum",
          "old_text": null,
          "new_text": "SearchSysCacheAttNum(index_oid, i + 1)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\tindex_tp = SearchSysCacheAttNum(index_oid, i + 1);",
          "content_same": false
        },
        {
          "line": 2384,
          "old_api": null,
          "new_api": "readdir",
          "old_text": null,
          "new_text": "readdir(c->dp)",
          "old_line_content": "",
          "new_line_content": "\twhile ((c->ep = readdir(c->dp)))",
          "content_same": false
        },
        {
          "line": 338,
          "old_api": null,
          "new_api": "get_rel_name",
          "old_text": null,
          "new_text": "get_rel_name(index_oid)",
          "old_line_content": "\t\t\t\t\t\t\t \"index \\\"%s\\\" does not have column \\\"%s\\\"\",",
          "new_line_content": "\t\t\t\t\t\t\t get_rel_name(index_oid),",
          "content_same": false
        },
        {
          "line": 341,
          "old_api": null,
          "new_api": "GETSTRUCT",
          "old_text": null,
          "new_text": "GETSTRUCT(in_table_tp)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\tin_table_attr_tp = (Form_pg_attribute) GETSTRUCT(in_table_tp);",
          "content_same": false
        },
        {
          "line": 2391,
          "old_api": null,
          "new_api": "psprintf",
          "old_text": null,
          "new_text": "psprintf(\"%s/%s\", name, c->ep->d_name)",
          "old_line_content": "",
          "new_line_content": "\t\tchar *path = psprintf(\"%s/%s\", name, c->ep->d_name);",
          "content_same": false
        },
        {
          "line": 2394,
          "old_api": null,
          "new_api": "cstring_to_text",
          "old_text": null,
          "new_text": "cstring_to_text(path)",
          "old_line_content": "\t\t/* The return values are: path, ret, sqlstate, status, location. */",
          "new_line_content": "\t\tvalues[out_path] = PointerGetDatum(cstring_to_text(path));",
          "content_same": false
        },
        {
          "line": 2399,
          "old_api": null,
          "new_api": "PG_TRY",
          "old_text": null,
          "new_text": "PG_TRY()",
          "old_line_content": "\t\tvolatile int bytes = 0;",
          "new_line_content": "\t\tPG_TRY();",
          "content_same": false
        },
        {
          "line": 2401,
          "old_api": null,
          "new_api": "PG_GETARG_OID",
          "old_text": null,
          "new_text": "PG_GETARG_OID(1)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\tread_compressed_data_file_impl(algo, PG_GETARG_OID(1), path, &bytes, &rows);",
          "content_same": false
        },
        {
          "line": 2405,
          "old_api": null,
          "new_api": "PG_CATCH",
          "old_text": null,
          "new_text": "PG_CATCH()",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tPG_CATCH();",
          "content_same": false
        },
        {
          "line": 2407,
          "old_api": null,
          "new_api": "MemoryContextSwitchTo",
          "old_text": null,
          "new_text": "MemoryContextSwitchTo(call_memory_context)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\tMemoryContextSwitchTo(call_memory_context);",
          "content_same": false
        },
        {
          "line": 361,
          "old_api": null,
          "new_api": "ReleaseSysCache",
          "old_text": null,
          "new_text": "ReleaseSysCache(in_table_tp)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\tReleaseSysCache(in_table_tp);",
          "content_same": false
        },
        {
          "line": 2409,
          "old_api": null,
          "new_api": "CopyErrorData",
          "old_text": null,
          "new_text": "CopyErrorData()",
          "old_line_content": "",
          "new_line_content": "\t\t\tErrorData *error = CopyErrorData();",
          "content_same": false
        },
        {
          "line": 363,
          "old_api": null,
          "new_api": "ReleaseSysCache",
          "old_text": null,
          "new_text": "ReleaseSysCache(index_tp)",
          "old_line_content": "\t\t\t\t\tin_table_tp = NULL;",
          "new_line_content": "\t\t\t\t\tReleaseSysCache(index_tp);",
          "content_same": false
        },
        {
          "line": 2412,
          "old_api": null,
          "new_api": "unpack_sql_state",
          "old_text": null,
          "new_text": "unpack_sql_state(error->sqlerrcode)",
          "old_line_content": "\t\t\tvalues[out_sqlstate] =",
          "new_line_content": "\t\t\t\tPointerGetDatum(cstring_to_text(unpack_sql_state(error->sqlerrcode)));",
          "content_same": false
        },
        {
          "line": 2417,
          "old_api": null,
          "new_api": "PointerGetDatum",
          "old_text": null,
          "new_text": "PointerGetDatum(\n\t\t\t\t\tcstring_to_text(psprintf(\"%s:%d\", error->filename, error->lineno)))",
          "old_line_content": "\t\t\t{",
          "new_line_content": "\t\t\t\tvalues[out_location] = PointerGetDatum(",
          "content_same": false
        },
        {
          "line": 2422,
          "old_api": null,
          "new_api": "FlushErrorState",
          "old_text": null,
          "new_text": "FlushErrorState()",
          "old_line_content": "",
          "new_line_content": "\t\t\tFlushErrorState();",
          "content_same": false
        },
        {
          "line": 2424,
          "old_api": null,
          "new_api": "PG_END_TRY",
          "old_text": null,
          "new_text": "PG_END_TRY()",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tPG_END_TRY();",
          "content_same": false
        },
        {
          "line": 2426,
          "old_api": null,
          "new_api": "Int32GetDatum",
          "old_text": null,
          "new_text": "Int32GetDatum(bytes)",
          "old_line_content": "",
          "new_line_content": "\t\tvalues[out_bytes] = Int32GetDatum(bytes);",
          "content_same": false
        },
        {
          "line": 2429,
          "old_api": null,
          "new_api": "SRF_RETURN_NEXT",
          "old_text": null,
          "new_text": "SRF_RETURN_NEXT(funcctx,\n\t\t\t\t\t\tHeapTupleGetDatum(heap_form_tuple(funcctx->tuple_desc, values, nulls)))",
          "old_line_content": "",
          "new_line_content": "\t\tSRF_RETURN_NEXT(funcctx,",
          "content_same": false
        },
        {
          "line": 384,
          "old_api": null,
          "new_api": "HeapTupleIsValid",
          "old_text": null,
          "new_text": "HeapTupleIsValid(in_table_tp)",
          "old_line_content": "\t\t\t\t{",
          "new_line_content": "\t\t\t\t\tif (HeapTupleIsValid(in_table_tp))",
          "content_same": false
        },
        {
          "line": 2433,
          "old_api": null,
          "new_api": "closedir",
          "old_text": null,
          "new_text": "closedir(c->dp)",
          "old_line_content": "",
          "new_line_content": "\t(void) closedir(c->dp);",
          "content_same": false
        },
        {
          "line": 386,
          "old_api": null,
          "new_api": "ReleaseSysCache",
          "old_text": null,
          "new_text": "ReleaseSysCache(in_table_tp)",
          "old_line_content": "\t\t\t\t\t{",
          "new_line_content": "\t\t\t\t\t\tReleaseSysCache(in_table_tp);",
          "content_same": false
        },
        {
          "line": 2435,
          "old_api": null,
          "new_api": "SRF_RETURN_DONE",
          "old_text": null,
          "new_text": "SRF_RETURN_DONE(funcctx)",
          "old_line_content": "",
          "new_line_content": "\tSRF_RETURN_DONE(funcctx);",
          "content_same": false
        },
        {
          "line": 389,
          "old_api": null,
          "new_api": "HeapTupleIsValid",
          "old_text": null,
          "new_text": "HeapTupleIsValid(index_tp)",
          "old_line_content": "\t\t\t\t\t}",
          "new_line_content": "\t\t\t\t\tif (HeapTupleIsValid(index_tp))",
          "content_same": false
        },
        {
          "line": 391,
          "old_api": null,
          "new_api": "ReleaseSysCache",
          "old_text": null,
          "new_text": "ReleaseSysCache(index_tp)",
          "old_line_content": "\t\t\t\t\t{",
          "new_line_content": "\t\t\t\t\t\tReleaseSysCache(index_tp);",
          "content_same": false
        },
        {
          "line": 394,
          "old_api": null,
          "new_api": "index_close",
          "old_text": null,
          "new_text": "index_close(index_rel, AccessShareLock)",
          "old_line_content": "\t\t\t\t\t}",
          "new_line_content": "\t\t\t\t\tindex_close(index_rel, AccessShareLock);",
          "content_same": false
        },
        {
          "line": 399,
          "old_api": null,
          "new_api": "index_close",
          "old_text": null,
          "new_text": "index_close(index_rel, AccessShareLock)",
          "old_line_content": "\t\t\t{",
          "new_line_content": "\t\t\t\tindex_close(index_rel, AccessShareLock);",
          "content_same": false
        },
        {
          "line": 2450,
          "old_api": null,
          "new_api": "MemoryContextReset",
          "old_text": null,
          "new_text": "MemoryContextReset(CurrentMemoryContext)",
          "old_line_content": "{",
          "new_line_content": "\tMemoryContextReset(CurrentMemoryContext);",
          "content_same": false
        },
        {
          "line": 404,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(num_compression_infos <= in_desc->natts)",
          "old_line_content": "",
          "new_line_content": "\tAssert(num_compression_infos <= in_desc->natts);",
          "content_same": false
        },
        {
          "line": 2452,
          "old_api": null,
          "new_api": "PG_TRY",
          "old_text": null,
          "new_text": "PG_TRY()",
          "old_line_content": "",
          "new_line_content": "\tPG_TRY();",
          "content_same": false
        },
        {
          "line": 2454,
          "old_api": null,
          "new_api": "CHECK_FOR_INTERRUPTS",
          "old_text": null,
          "new_text": "CHECK_FOR_INTERRUPTS()",
          "old_line_content": "\t{",
          "new_line_content": "\t\tCHECK_FOR_INTERRUPTS();",
          "content_same": false
        },
        {
          "line": 407,
          "old_api": null,
          "new_api": "row_compressor_init",
          "old_text": null,
          "new_text": "row_compressor_init(&row_compressor,\n\t\t\t\t\t\tin_desc,\n\t\t\t\t\t\tout_rel,\n\t\t\t\t\t\tnum_compression_infos,\n\t\t\t\t\t\tcolumn_compression_info,\n\t\t\t\t\t\tin_column_offsets,\n\t\t\t\t\t\tout_desc->natts,\n\t\t\t\t\t\ttrue /*need_bistate*/,\n\t\t\t\t\t\tfalse /*reset_sequence*/,\n\t\t\t\t\t\tinsert_options)",
          "old_line_content": "\tRowCompressor row_compressor;",
          "new_line_content": "\trow_compressor_init(&row_compressor,",
          "content_same": false
        },
        {
          "line": 2457,
          "old_api": null,
          "new_api": "PG_CATCH",
          "old_text": null,
          "new_text": "PG_CATCH()",
          "old_line_content": "\t}",
          "new_line_content": "\tPG_CATCH();",
          "content_same": false
        },
        {
          "line": 2459,
          "old_api": null,
          "new_api": "FlushErrorState",
          "old_text": null,
          "new_text": "FlushErrorState()",
          "old_line_content": "\t{",
          "new_line_content": "\t\tFlushErrorState();",
          "content_same": false
        },
        {
          "line": 2461,
          "old_api": null,
          "new_api": "PG_END_TRY",
          "old_text": null,
          "new_text": "PG_END_TRY()",
          "old_line_content": "\t}",
          "new_line_content": "\tPG_END_TRY();",
          "content_same": false
        },
        {
          "line": 422,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(INFO,\n\t\t\t\t \"compress_chunk_indexscan_start matched index \\\"%s\\\"\",\n\t\t\t\t get_rel_name(matched_index_rel->rd_id))",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\telog(INFO,",
          "content_same": false
        },
        {
          "line": 2470,
          "old_api": null,
          "new_api": "llvm_fuzz_target_generic",
          "old_text": null,
          "new_text": "llvm_fuzz_target_generic(decompress_gorilla_float8, Data, Size)",
          "old_line_content": "{",
          "new_line_content": "\treturn llvm_fuzz_target_generic(decompress_gorilla_float8, Data, Size);",
          "content_same": false
        },
        {
          "line": 424,
          "old_api": null,
          "new_api": "get_rel_name",
          "old_text": null,
          "new_text": "get_rel_name(matched_index_rel->rd_id)",
          "old_line_content": "\t\t\t\t \"compress_chunk_indexscan_start matched index \\\"%s\\\"\",",
          "new_line_content": "\t\t\t\t get_rel_name(matched_index_rel->rd_id));",
          "content_same": false
        },
        {
          "line": 427,
          "old_api": null,
          "new_api": "GetTransactionSnapshot",
          "old_text": null,
          "new_text": "GetTransactionSnapshot()",
          "old_line_content": "",
          "new_line_content": "\t\tindex_scan = index_beginscan(in_rel, matched_index_rel, GetTransactionSnapshot(), 0, 0);",
          "content_same": false
        },
        {
          "line": 2475,
          "old_api": null,
          "new_api": "llvm_fuzz_target_generic",
          "old_text": null,
          "new_text": "llvm_fuzz_target_generic(decompress_deltadelta_int64, Data, Size)",
          "old_line_content": "{",
          "new_line_content": "\treturn llvm_fuzz_target_generic(decompress_deltadelta_int64, Data, Size);",
          "content_same": false
        },
        {
          "line": 432,
          "old_api": null,
          "new_api": "row_compressor_process_ordered_slot",
          "old_text": null,
          "new_text": "row_compressor_process_ordered_slot(&row_compressor, slot, mycid)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\trow_compressor_process_ordered_slot(&row_compressor, slot, mycid);",
          "content_same": false
        },
        {
          "line": 435,
          "old_api": null,
          "new_api": "run_analyze_on_chunk",
          "old_text": null,
          "new_text": "run_analyze_on_chunk(in_rel->rd_id)",
          "old_line_content": "",
          "new_line_content": "\t\trun_analyze_on_chunk(in_rel->rd_id);",
          "content_same": false
        },
        {
          "line": 437,
          "old_api": null,
          "new_api": "row_compressor_flush",
          "old_text": null,
          "new_text": "row_compressor_flush(&row_compressor, mycid, true)",
          "old_line_content": "\t\tif (row_compressor.rows_compressed_into_current_value > 0)",
          "new_line_content": "\t\t\trow_compressor_flush(&row_compressor, mycid, true);",
          "content_same": false
        },
        {
          "line": 439,
          "old_api": null,
          "new_api": "ExecDropSingleTupleTableSlot",
          "old_text": null,
          "new_text": "ExecDropSingleTupleTableSlot(slot)",
          "old_line_content": "",
          "new_line_content": "\t\tExecDropSingleTupleTableSlot(slot);",
          "content_same": false
        },
        {
          "line": 2488,
          "old_api": null,
          "new_api": "TS_FUNCTION_INFO_V1",
          "old_text": null,
          "new_text": "TS_FUNCTION_INFO_V1(ts_fuzz_compression)",
          "old_line_content": " */",
          "new_line_content": "TS_FUNCTION_INFO_V1(ts_fuzz_compression);",
          "content_same": false
        },
        {
          "line": 447,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(INFO, \"compress_chunk_tuplesort_start\")",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\telog(INFO, \"compress_chunk_tuplesort_start\");",
          "content_same": false
        },
        {
          "line": 450,
          "old_api": null,
          "new_api": "compress_chunk_sort_relation",
          "old_text": null,
          "new_text": "compress_chunk_sort_relation(in_rel, n_keys, keys)",
          "old_line_content": "",
          "new_line_content": "\t\tTuplesortstate *sorted_rel = compress_chunk_sort_relation(in_rel, n_keys, keys);",
          "content_same": false
        },
        {
          "line": 2502,
          "old_api": null,
          "new_api": "AllocSetContextCreate",
          "old_text": null,
          "new_text": "AllocSetContextCreate(CurrentMemoryContext, \"fuzzing\", 0, 8 * 1024 * 1024, 8 * 1024 * 1024)",
          "old_line_content": "\tMemoryContext fuzzing_context =",
          "new_line_content": "\t\tAllocSetContextCreate(CurrentMemoryContext, \"fuzzing\", 0, 8 * 1024 * 1024, 8 * 1024 * 1024);",
          "content_same": false
        },
        {
          "line": 455,
          "old_api": null,
          "new_api": "row_compressor_finish",
          "old_text": null,
          "new_text": "row_compressor_finish(&row_compressor)",
          "old_line_content": "",
          "new_line_content": "\trow_compressor_finish(&row_compressor);",
          "content_same": false
        },
        {
          "line": 459,
          "old_api": null,
          "new_api": "table_close",
          "old_text": null,
          "new_text": "table_close(out_rel, NoLock)",
          "old_line_content": "",
          "new_line_content": "\ttable_close(out_rel, NoLock);",
          "content_same": false
        },
        {
          "line": 2514,
          "old_api": null,
          "new_api": "PG_GETARG_INT32",
          "old_text": null,
          "new_text": "PG_GETARG_INT32(2)",
          "old_line_content": "\t\t\t\t\t\t //\"-help=1\",",
          "new_line_content": "\t\t\t\t\t\t psprintf(\"-runs=%d\", PG_GETARG_INT32(2)),",
          "content_same": false
        },
        {
          "line": 2520,
          "old_api": null,
          "new_api": "PG_GETARG_CSTRING",
          "old_text": null,
          "new_text": "PG_GETARG_CSTRING(0)",
          "old_line_content": "",
          "new_line_content": "\tint algo = get_compression_algorithm(PG_GETARG_CSTRING(0));",
          "content_same": false
        },
        {
          "line": 476,
          "old_api": null,
          "new_api": "palloc",
          "old_text": null,
          "new_text": "palloc(sizeof(*column_offsets) * n_columns)",
          "old_line_content": "{",
          "new_line_content": "\tint16 *column_offsets = palloc(sizeof(*column_offsets) * n_columns);",
          "content_same": false
        },
        {
          "line": 484,
          "old_api": null,
          "new_api": "COMPRESSIONCOL_IS_SEGMENT_BY",
          "old_text": null,
          "new_text": "COMPRESSIONCOL_IS_SEGMENT_BY(columns[i])",
          "old_line_content": "\t{",
          "new_line_content": "\t\tif (COMPRESSIONCOL_IS_SEGMENT_BY(columns[i]))",
          "content_same": false
        },
        {
          "line": 2533,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"no llvm fuzz target for compression algorithm %d and type %d\", algo, type)",
          "old_line_content": "\t{",
          "new_line_content": "\t\telog(ERROR, \"no llvm fuzz target for compression algorithm %d and type %d\", algo, type);",
          "content_same": false
        },
        {
          "line": 487,
          "old_api": null,
          "new_api": "COMPRESSIONCOL_IS_ORDER_BY",
          "old_text": null,
          "new_text": "COMPRESSIONCOL_IS_ORDER_BY(columns[i])",
          "old_line_content": "",
          "new_line_content": "\t\tif (COMPRESSIONCOL_IS_SEGMENT_BY(columns[i]) || COMPRESSIONCOL_IS_ORDER_BY(columns[i]))",
          "content_same": false
        },
        {
          "line": 2536,
          "old_api": null,
          "new_api": "LLVMFuzzerRunDriver",
          "old_text": null,
          "new_text": "LLVMFuzzerRunDriver(&argc, &argv, target)",
          "old_line_content": "",
          "new_line_content": "\tint res = LLVMFuzzerRunDriver(&argc, &argv, target);",
          "content_same": false
        },
        {
          "line": 2538,
          "old_api": null,
          "new_api": "MemoryContextSwitchTo",
          "old_text": null,
          "new_text": "MemoryContextSwitchTo(old_context)",
          "old_line_content": "",
          "new_line_content": "\tMemoryContextSwitchTo(old_context);",
          "content_same": false
        },
        {
          "line": 492,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"compression should be configured with an orderby or segment by\")",
          "old_line_content": "\tif (*n_keys_out == 0)",
          "new_line_content": "\t\telog(ERROR, \"compression should be configured with an orderby or segment by\");",
          "content_same": false
        },
        {
          "line": 2540,
          "old_api": null,
          "new_api": "PG_RETURN_INT32",
          "old_text": null,
          "new_text": "PG_RETURN_INT32(res)",
          "old_line_content": "",
          "new_line_content": "\tPG_RETURN_INT32(res);",
          "content_same": false
        },
        {
          "line": 494,
          "old_api": null,
          "new_api": "palloc",
          "old_text": null,
          "new_text": "palloc(sizeof(**keys_out) * *n_keys_out)",
          "old_line_content": "",
          "new_line_content": "\t*keys_out = palloc(sizeof(**keys_out) * *n_keys_out);",
          "content_same": false
        },
        {
          "line": 2550,
          "old_api": null,
          "new_api": "palloc0",
          "old_text": null,
          "new_text": "palloc0(sizeof(*segment_filter))",
          "old_line_content": "{",
          "new_line_content": "\tSegmentFilter *segment_filter = palloc0(sizeof(*segment_filter));",
          "content_same": false
        },
        {
          "line": 504,
          "old_api": null,
          "new_api": "COMPRESSIONCOL_IS_SEGMENT_BY",
          "old_text": null,
          "new_text": "COMPRESSIONCOL_IS_SEGMENT_BY(column)",
          "old_line_content": "\t\tAttrNumber compressed_att;",
          "new_line_content": "\t\tif (COMPRESSIONCOL_IS_SEGMENT_BY(column))",
          "content_same": false
        },
        {
          "line": 506,
          "old_api": null,
          "new_api": "COMPRESSIONCOL_IS_ORDER_BY",
          "old_text": null,
          "new_text": "COMPRESSIONCOL_IS_ORDER_BY(column)",
          "old_line_content": "\t\t\t(*keys_out)[segment_offset] = column;",
          "new_line_content": "\t\telse if (COMPRESSIONCOL_IS_ORDER_BY(column))",
          "content_same": false
        },
        {
          "line": 2557,
          "old_api": null,
          "new_api": "namestrcpy",
          "old_text": null,
          "new_text": "namestrcpy(&segment_filter->column_name, column_name)",
          "old_line_content": "\t};",
          "new_line_content": "\tnamestrcpy(&segment_filter->column_name, column_name);",
          "content_same": false
        },
        {
          "line": 509,
          "old_api": null,
          "new_api": "NameStr",
          "old_text": null,
          "new_text": "NameStr(column->attname)",
          "old_line_content": "",
          "new_line_content": "\t\tcompressed_att = get_attnum(in_table, NameStr(column->attname));",
          "content_same": false
        },
        {
          "line": 513,
          "old_api": null,
          "new_api": "AttrNumberGetAttrOffset",
          "old_text": null,
          "new_text": "AttrNumberGetAttrOffset(compressed_att)",
          "old_line_content": "",
          "new_line_content": "\t\tcolumn_offsets[i] = AttrNumberGetAttrOffset(compressed_att);",
          "content_same": false
        },
        {
          "line": 522,
          "old_api": null,
          "new_api": "RelationGetDescr",
          "old_text": null,
          "new_text": "RelationGetDescr(in_rel)",
          "old_line_content": "{",
          "new_line_content": "\tTupleDesc tupDesc = RelationGetDescr(in_rel);",
          "content_same": false
        },
        {
          "line": 526,
          "old_api": null,
          "new_api": "MakeTupleTableSlot",
          "old_text": null,
          "new_text": "MakeTupleTableSlot(tupDesc, &TTSOpsHeapTuple)",
          "old_line_content": "\tTableScanDesc heapScan;",
          "new_line_content": "\tTupleTableSlot *heap_tuple_slot = MakeTupleTableSlot(tupDesc, &TTSOpsHeapTuple);",
          "content_same": false
        },
        {
          "line": 2576,
          "old_api": null,
          "new_api": "RelationGetIndexAttrBitmap",
          "old_text": null,
          "new_text": "RelationGetIndexAttrBitmap(comp_chunk_rel, INDEX_ATTR_BITMAP_ALL)",
          "old_line_content": "#if PG16_LT",
          "new_line_content": "\tBitmapset *key_columns = RelationGetIndexAttrBitmap(comp_chunk_rel, INDEX_ATTR_BITMAP_ALL);",
          "content_same": false
        },
        {
          "line": 2579,
          "old_api": null,
          "new_api": "RelationGetIndexAttrBitmap",
          "old_text": null,
          "new_text": "RelationGetIndexAttrBitmap(comp_chunk_rel, INDEX_ATTR_BITMAP_HOT_BLOCKING)",
          "old_line_content": "\tBitmapset *key_columns =",
          "new_line_content": "\t\tRelationGetIndexAttrBitmap(comp_chunk_rel, INDEX_ATTR_BITMAP_HOT_BLOCKING);",
          "content_same": false
        },
        {
          "line": 2581,
          "old_api": null,
          "new_api": "bms_add_members",
          "old_text": null,
          "new_text": "bms_add_members(key_columns,\n\t\t\t\t\t\tRelationGetIndexAttrBitmap(comp_chunk_rel, INDEX_ATTR_BITMAP_SUMMARIZED))",
          "old_line_content": "\tkey_columns =",
          "new_line_content": "\t\tbms_add_members(key_columns,",
          "content_same": false
        },
        {
          "line": 534,
          "old_api": null,
          "new_api": "RelationGetRelid",
          "old_text": null,
          "new_text": "RelationGetRelid(in_rel)",
          "old_line_content": "\tfor (n = 0; n < n_keys; n++)",
          "new_line_content": "\t\tcompress_chunk_populate_sort_info_for_column(RelationGetRelid(in_rel),",
          "content_same": false
        },
        {
          "line": 2588,
          "old_api": null,
          "new_api": "RelationGetRelid",
          "old_text": null,
          "new_text": "RelationGetRelid(comp_chunk_rel)",
          "old_line_content": "\t\tAttrNumber attnum = index_rel->rd_index->indkey.values[i];",
          "new_line_content": "\t\tchar *colname = get_attname(RelationGetRelid(comp_chunk_rel), attnum, true);",
          "content_same": false
        },
        {
          "line": 541,
          "old_api": null,
          "new_api": "tuplesort_begin_heap",
          "old_text": null,
          "new_text": "tuplesort_begin_heap(tupDesc,\n\t\t\t\t\t\t\t\t\t\t  n_keys,\n\t\t\t\t\t\t\t\t\t\t  sort_keys,\n\t\t\t\t\t\t\t\t\t\t  sort_operators,\n\t\t\t\t\t\t\t\t\t\t  sort_collations,\n\t\t\t\t\t\t\t\t\t\t  nulls_first,\n\t\t\t\t\t\t\t\t\t\t  maintenance_work_mem,\n\t\t\t\t\t\t\t\t\t\t  NULL,\n\t\t\t\t\t\t\t\t\t\t  false /*=randomAccess*/)",
          "old_line_content": "",
          "new_line_content": "\ttuplesortstate = tuplesort_begin_heap(tupDesc,",
          "content_same": false
        },
        {
          "line": 2593,
          "old_api": null,
          "new_api": "op_in_opfamily",
          "old_text": null,
          "new_text": "op_in_opfamily(opno, opfamily)",
          "old_line_content": "\t\t\t/* assert if operator opno is not a member of opfamily */",
          "new_line_content": "\t\t\tif (opno && !op_in_opfamily(opno, opfamily))",
          "content_same": false
        },
        {
          "line": 551,
          "old_api": null,
          "new_api": "GetLatestSnapshot",
          "old_text": null,
          "new_text": "GetLatestSnapshot()",
          "old_line_content": "",
          "new_line_content": "\theapScan = table_beginscan(in_rel, GetLatestSnapshot(), 0, (ScanKey) NULL);",
          "content_same": false
        },
        {
          "line": 555,
          "old_api": null,
          "new_api": "HeapTupleIsValid",
          "old_text": null,
          "new_text": "HeapTupleIsValid(tuple)",
          "old_line_content": "\t{",
          "new_line_content": "\t\tif (HeapTupleIsValid(tuple))",
          "content_same": false
        },
        {
          "line": 2606,
          "old_api": null,
          "new_api": "bms_next_member",
          "old_text": null,
          "new_text": "bms_next_member(key_columns, i)",
          "old_line_content": "\t */",
          "new_line_content": "\twhile ((i = bms_next_member(key_columns, i)) > 0)",
          "content_same": false
        },
        {
          "line": 561,
          "old_api": null,
          "new_api": "ExecStoreHeapTuple",
          "old_text": null,
          "new_text": "ExecStoreHeapTuple(tuple, heap_tuple_slot, false)",
          "old_line_content": "\t\t\t */",
          "new_line_content": "\t\t\tExecStoreHeapTuple(tuple, heap_tuple_slot, false);",
          "content_same": false
        },
        {
          "line": 2609,
          "old_api": null,
          "new_api": "get_attname",
          "old_text": null,
          "new_text": "get_attname(comp_chunk_rel->rd_id, attno, false)",
          "old_line_content": "\t\tAttrNumber attno = i + FirstLowInvalidHeapAttributeNumber;",
          "new_line_content": "\t\tchar *attname = get_attname(comp_chunk_rel->rd_id, attno, false);",
          "content_same": false
        },
        {
          "line": 563,
          "old_api": null,
          "new_api": "tuplesort_puttupleslot",
          "old_text": null,
          "new_text": "tuplesort_puttupleslot(tuplesortstate, heap_tuple_slot)",
          "old_line_content": "",
          "new_line_content": "\t\t\ttuplesort_puttupleslot(tuplesortstate, heap_tuple_slot);",
          "content_same": false
        },
        {
          "line": 2612,
          "old_api": null,
          "new_api": "lappend",
          "old_text": null,
          "new_text": "lappend(pred[attno], node)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\tpred[attno] = lappend(pred[attno], node);",
          "content_same": false
        },
        {
          "line": 567,
          "old_api": null,
          "new_api": "table_endscan",
          "old_text": null,
          "new_text": "table_endscan(heapScan)",
          "old_line_content": "",
          "new_line_content": "\ttable_endscan(heapScan);",
          "content_same": false
        },
        {
          "line": 573,
          "old_api": null,
          "new_api": "run_analyze_on_chunk",
          "old_text": null,
          "new_text": "run_analyze_on_chunk(in_rel->rd_id)",
          "old_line_content": "\t */",
          "new_line_content": "\trun_analyze_on_chunk(in_rel->rd_id);",
          "content_same": false
        },
        {
          "line": 575,
          "old_api": null,
          "new_api": "ExecDropSingleTupleTableSlot",
          "old_text": null,
          "new_text": "ExecDropSingleTupleTableSlot(heap_tuple_slot)",
          "old_line_content": "",
          "new_line_content": "\tExecDropSingleTupleTableSlot(heap_tuple_slot);",
          "content_same": false
        },
        {
          "line": 577,
          "old_api": null,
          "new_api": "tuplesort_performsort",
          "old_text": null,
          "new_text": "tuplesort_performsort(tuplesortstate)",
          "old_line_content": "",
          "new_line_content": "\ttuplesort_performsort(tuplesortstate);",
          "content_same": false
        },
        {
          "line": 591,
          "old_api": null,
          "new_api": "NameStr",
          "old_text": null,
          "new_text": "NameStr(column->attname)",
          "old_line_content": "",
          "new_line_content": "\ttp = SearchSysCacheAttName(table, NameStr(column->attname));",
          "content_same": false
        },
        {
          "line": 595,
          "old_api": null,
          "new_api": "get_rel_name",
          "old_text": null,
          "new_text": "get_rel_name(table)",
          "old_line_content": "\t\t\t \"table \\\"%s\\\" does not have column \\\"%s\\\"\",",
          "new_line_content": "\t\t\t get_rel_name(table),",
          "content_same": false
        },
        {
          "line": 2645,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(lp)",
          "old_line_content": "\t{",
          "new_line_content": "\t\tNode *node = lfirst(lp);",
          "content_same": false
        },
        {
          "line": 598,
          "old_api": null,
          "new_api": "GETSTRUCT",
          "old_text": null,
          "new_text": "GETSTRUCT(tp)",
          "old_line_content": "",
          "new_line_content": "\tatt_tup = (Form_pg_attribute) GETSTRUCT(tp);",
          "content_same": false
        },
        {
          "line": 604,
          "old_api": null,
          "new_api": "COMPRESSIONCOL_IS_SEGMENT_BY",
          "old_text": null,
          "new_text": "COMPRESSIONCOL_IS_SEGMENT_BY(column)",
          "old_line_content": "\t*collation = att_tup->attcollation;",
          "new_line_content": "\t*nulls_first = (!(COMPRESSIONCOL_IS_SEGMENT_BY(column))) && column->orderby_nullsfirst;",
          "content_same": false
        },
        {
          "line": 2653,
          "old_api": null,
          "new_api": "nodeTag",
          "old_text": null,
          "new_text": "nodeTag(node)",
          "old_line_content": "\t\tOid opno;",
          "new_line_content": "\t\tswitch (nodeTag(node))",
          "content_same": false
        },
        {
          "line": 606,
          "old_api": null,
          "new_api": "lookup_type_cache",
          "old_text": null,
          "new_text": "lookup_type_cache(att_tup->atttypid, TYPECACHE_LT_OPR | TYPECACHE_GT_OPR)",
          "old_line_content": "",
          "new_line_content": "\ttentry = lookup_type_cache(att_tup->atttypid, TYPECACHE_LT_OPR | TYPECACHE_GT_OPR);",
          "content_same": false
        },
        {
          "line": 608,
          "old_api": null,
          "new_api": "COMPRESSIONCOL_IS_SEGMENT_BY",
          "old_text": null,
          "new_text": "COMPRESSIONCOL_IS_SEGMENT_BY(column)",
          "old_line_content": "",
          "new_line_content": "\tif (COMPRESSIONCOL_IS_SEGMENT_BY(column) || column->orderby_asc)",
          "content_same": false
        },
        {
          "line": 613,
          "old_api": null,
          "new_api": "OidIsValid",
          "old_text": null,
          "new_text": "OidIsValid(*sort_operator)",
          "old_line_content": "",
          "new_line_content": "\tif (!OidIsValid(*sort_operator))",
          "content_same": false
        },
        {
          "line": 2663,
          "old_api": null,
          "new_api": "linitial",
          "old_text": null,
          "new_text": "linitial(opexpr->args)",
          "old_line_content": "\t\t\t\topno = opexpr->opno;",
          "new_line_content": "\t\t\t\tleftop = linitial(opexpr->args);",
          "content_same": false
        },
        {
          "line": 616,
          "old_api": null,
          "new_api": "NameStr",
          "old_text": null,
          "new_text": "NameStr(column->attname)",
          "old_line_content": "\t\t\t \"no valid sort operator for column \\\"%s\\\" of type \\\"%s\\\"\",",
          "new_line_content": "\t\t\t NameStr(column->attname),",
          "content_same": false
        },
        {
          "line": 2666,
          "old_api": null,
          "new_api": "IsA",
          "old_text": null,
          "new_text": "IsA(leftop, RelabelType)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tif (IsA(leftop, RelabelType))",
          "content_same": false
        },
        {
          "line": 619,
          "old_api": null,
          "new_api": "ReleaseSysCache",
          "old_text": null,
          "new_text": "ReleaseSysCache(tp)",
          "old_line_content": "",
          "new_line_content": "\tReleaseSysCache(tp);",
          "content_same": false
        },
        {
          "line": 2668,
          "old_api": null,
          "new_api": "IsA",
          "old_text": null,
          "new_text": "IsA(rightop, RelabelType)",
          "old_line_content": "\t\t\t\t\tleftop = ((RelabelType *) leftop)->arg;",
          "new_line_content": "\t\t\t\tif (IsA(rightop, RelabelType))",
          "content_same": false
        },
        {
          "line": 2671,
          "old_api": null,
          "new_api": "IsA",
          "old_text": null,
          "new_text": "IsA(rightop, Const)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tif (IsA(leftop, Var) && IsA(rightop, Const))",
          "content_same": false
        },
        {
          "line": 2676,
          "old_api": null,
          "new_api": "IsA",
          "old_text": null,
          "new_text": "IsA(leftop, Const)",
          "old_line_content": "\t\t\t\t}",
          "new_line_content": "\t\t\t\telse if (IsA(rightop, Var) && IsA(leftop, Const))",
          "content_same": false
        },
        {
          "line": 633,
          "old_api": null,
          "new_api": "list_make1",
          "old_text": null,
          "new_text": "list_make1(&vr)",
          "old_line_content": "\t\t.type = T_VacuumStmt,",
          "new_line_content": "\t\t.rels = list_make1(&vr),",
          "content_same": false
        },
        {
          "line": 638,
          "old_api": null,
          "new_api": "ExecVacuum",
          "old_text": null,
          "new_text": "ExecVacuum(NULL, &vs, true)",
          "old_line_content": "",
          "new_line_content": "\tExecVacuum(NULL, &vs, true);",
          "content_same": false
        },
        {
          "line": 2686,
          "old_api": null,
          "new_api": "makeNode",
          "old_text": null,
          "new_text": "makeNode(OpExpr)",
          "old_line_content": "\t\t\t\tExpr *newvar = NULL;",
          "new_line_content": "\t\t\t\tnewclause = makeNode(OpExpr);",
          "content_same": false
        },
        {
          "line": 2694,
          "old_api": null,
          "new_api": "linitial",
          "old_text": null,
          "new_text": "linitial(newclause->args)",
          "old_line_content": "\t\t\t\t */",
          "new_line_content": "\t\t\t\tlinitial(newclause->args) = newvar;",
          "content_same": false
        },
        {
          "line": 2698,
          "old_api": null,
          "new_api": "get_commutator",
          "old_text": null,
          "new_text": "get_commutator(opno)",
          "old_line_content": "\t\t\t\t{",
          "new_line_content": "\t\t\t\t\tnewclause->opno = get_commutator(opno);",
          "content_same": false
        },
        {
          "line": 2702,
          "old_api": null,
          "new_api": "fix_index_qual",
          "old_text": null,
          "new_text": "fix_index_qual(comp_chunk_rel,\n\t\t\t\t\t\t\t   index_rel,\n\t\t\t\t\t\t\t   (Var *) newvar,\n\t\t\t\t\t\t\t   idx_filters,\n\t\t\t\t\t\t\t   sf->column_name.data,\n\t\t\t\t\t\t\t   (Node *) newclause,\n\t\t\t\t\t\t\t   opno)",
          "old_line_content": "\t\t\t\t}",
          "new_line_content": "\t\t\t\tfix_index_qual(comp_chunk_rel,",
          "content_same": false
        },
        {
          "line": 666,
          "old_api": null,
          "new_api": "AttrNumberGetAttrOffset",
          "old_text": null,
          "new_text": "AttrNumberGetAttrOffset(per_column[j].segmentby_column_index)",
          "old_line_content": "",
          "new_line_content": "\t\t\tint index_att_offset = AttrNumberGetAttrOffset(per_column[j].segmentby_column_index);",
          "content_same": false
        },
        {
          "line": 2714,
          "old_api": null,
          "new_api": "IsA",
          "old_text": null,
          "new_text": "IsA(ntest->arg, Var)",
          "old_line_content": "\t\t\t\tNullTest *ntest = (NullTest *) node;",
          "new_line_content": "\t\t\t\tif (IsA(ntest->arg, Var))",
          "content_same": false
        },
        {
          "line": 669,
          "old_api": null,
          "new_api": "AttrOffsetGetAttrNumber",
          "old_text": null,
          "new_text": "AttrOffsetGetAttrNumber(uncompressed_col_to_compressed_col[j])",
          "old_line_content": "\t\t\tif (index_info->ii_IndexAttrNumbers[index_att_offset] !=",
          "new_line_content": "\t\t\t\tAttrOffsetGetAttrNumber(uncompressed_col_to_compressed_col[j]))",
          "content_same": false
        },
        {
          "line": 2717,
          "old_api": null,
          "new_api": "copyObject",
          "old_text": null,
          "new_text": "copyObject((OpExpr *) node)",
          "old_line_content": "\t\t\t\t\tvar = (Var *) ntest->arg;",
          "new_line_content": "\t\t\t\t\tOpExpr *newclause = copyObject((OpExpr *) node);",
          "content_same": false
        },
        {
          "line": 2720,
          "old_api": null,
          "new_api": "fix_index_qual",
          "old_text": null,
          "new_text": "fix_index_qual(comp_chunk_rel,\n\t\t\t\t\t\t\t\t   index_rel,\n\t\t\t\t\t\t\t\t   (Var *) newvar,\n\t\t\t\t\t\t\t\t   idx_filters,\n\t\t\t\t\t\t\t\t   sf->column_name.data,\n\t\t\t\t\t\t\t\t   (Node *) newclause,\n\t\t\t\t\t\t\t\t   0)",
          "old_line_content": "\t\t\t\t\t((NullTest *) newclause)->arg = newvar;",
          "new_line_content": "\t\t\t\t\tfix_index_qual(comp_chunk_rel,",
          "content_same": false
        },
        {
          "line": 682,
          "old_api": null,
          "new_api": "namestrcmp",
          "old_text": null,
          "new_text": "namestrcmp((Name) &resultRelInfo->ri_IndexRelationDescs[i]\n\t\t\t\t\t\t   ->rd_att->attrs[num_segmentby_columns]\n\t\t\t\t\t\t   .attname,\n\t\t\t\t\t   COMPRESSION_COLUMN_METADATA_SEQUENCE_NUM_NAME)",
          "old_line_content": "\t\tif (num_segmentby_columns != index_info->ii_NumIndexAttrs - 1 ||",
          "new_line_content": "\t\t\tnamestrcmp((Name) &resultRelInfo->ri_IndexRelationDescs[i]",
          "content_same": false
        },
        {
          "line": 2742,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(c)",
          "old_line_content": "\t\t\t{",
          "new_line_content": "\t\t\t\tordered_index_filters = lappend(ordered_index_filters, lfirst(c));",
          "content_same": false
        },
        {
          "line": 701,
          "old_api": null,
          "new_api": "index_open",
          "old_text": null,
          "new_text": "index_open(index_oid, AccessShareLock)",
          "old_line_content": "\tbool is_null;",
          "new_line_content": "\tRelation index_rel = index_open(index_oid, AccessShareLock);",
          "content_same": false
        },
        {
          "line": 704,
          "old_api": null,
          "new_api": "GetTransactionSnapshot",
          "old_text": null,
          "new_text": "GetTransactionSnapshot()",
          "old_line_content": "\tIndexScanDesc index_scan =",
          "new_line_content": "\t\tindex_beginscan(table_rel, index_rel, GetTransactionSnapshot(), num_scankeys, 0);",
          "content_same": false
        },
        {
          "line": 706,
          "old_api": null,
          "new_api": "index_rescan",
          "old_text": null,
          "new_text": "index_rescan(index_scan, scankey, num_scankeys, NULL, 0)",
          "old_line_content": "\tindex_scan->xs_want_itup = true;",
          "new_line_content": "\tindex_rescan(index_scan, scankey, num_scankeys, NULL, 0);",
          "content_same": false
        },
        {
          "line": 708,
          "old_api": null,
          "new_api": "index_getnext_tid",
          "old_text": null,
          "new_text": "index_getnext_tid(index_scan, BackwardScanDirection)",
          "old_line_content": "",
          "new_line_content": "\tif (index_getnext_tid(index_scan, BackwardScanDirection))",
          "content_same": false
        },
        {
          "line": 710,
          "old_api": null,
          "new_api": "index_getattr",
          "old_text": null,
          "new_text": "index_getattr(index_scan->xs_itup,\n\t\t\t\t\t\t\t   index_scan->xs_itupdesc\n\t\t\t\t\t\t\t\t   ->natts, /* Last attribute of the index is sequence number. */\n\t\t\t\t\t\t\t   index_scan->xs_itupdesc,\n\t\t\t\t\t\t\t   &is_null)",
          "old_line_content": "\t{",
          "new_line_content": "\t\tresult = index_getattr(index_scan->xs_itup,",
          "content_same": false
        },
        {
          "line": 719,
          "old_api": null,
          "new_api": "index_endscan",
          "old_text": null,
          "new_text": "index_endscan(index_scan)",
          "old_line_content": "",
          "new_line_content": "\tindex_endscan(index_scan);",
          "content_same": false
        },
        {
          "line": 2773,
          "old_api": null,
          "new_api": "RelationGetIndexList",
          "old_text": null,
          "new_text": "RelationGetIndexList(comp_chunk_rel)",
          "old_line_content": "\t/* get list of indexes defined on compressed chunk */",
          "new_line_content": "\tindex_oids = RelationGetIndexList(comp_chunk_rel);",
          "content_same": false
        },
        {
          "line": 2777,
          "old_api": null,
          "new_api": "lfirst_oid",
          "old_text": null,
          "new_text": "lfirst_oid(lc)",
          "old_line_content": "\t\tint match_count = 0;",
          "new_line_content": "\t\tRelation index_rel = index_open(lfirst_oid(lc), AccessShareLock);",
          "content_same": false
        },
        {
          "line": 733,
          "old_api": null,
          "new_api": "RelationGetDescr",
          "old_text": null,
          "new_text": "RelationGetDescr(table_rel)",
          "old_line_content": "\tDatum seq_num;",
          "new_line_content": "\tTupleDesc in_desc = RelationGetDescr(table_rel);",
          "content_same": false
        },
        {
          "line": 2781,
          "old_api": null,
          "new_api": "index_close",
          "old_text": null,
          "new_text": "index_close(index_rel, AccessShareLock)",
          "old_line_content": "\t\t\t/* skip all indexes which can never match */",
          "new_line_content": "\t\t\tindex_close(index_rel, AccessShareLock);",
          "content_same": false
        },
        {
          "line": 736,
          "old_api": null,
          "new_api": "GetLatestSnapshot",
          "old_text": null,
          "new_text": "GetLatestSnapshot()",
          "old_line_content": "\tTableScanDesc heap_scan =",
          "new_line_content": "\t\ttable_beginscan(table_rel, GetLatestSnapshot(), num_scankeys, scankey);",
          "content_same": false
        },
        {
          "line": 738,
          "old_api": null,
          "new_api": "heap_getnext",
          "old_text": null,
          "new_text": "heap_getnext(heap_scan, ForwardScanDirection)",
          "old_line_content": "",
          "new_line_content": "\tfor (compressed_tuple = heap_getnext(heap_scan, ForwardScanDirection); compressed_tuple != NULL;",
          "content_same": false
        },
        {
          "line": 741,
          "old_api": null,
          "new_api": "HeapTupleIsValid",
          "old_text": null,
          "new_text": "HeapTupleIsValid(compressed_tuple)",
          "old_line_content": "\t{",
          "new_line_content": "\t\tAssert(HeapTupleIsValid(compressed_tuple));",
          "content_same": false
        },
        {
          "line": 2790,
          "old_api": null,
          "new_api": "RelationGetRelid",
          "old_text": null,
          "new_text": "RelationGetRelid(comp_chunk_rel)",
          "old_line_content": "\t\t\t\tAttrNumber attnum = index_rel->rd_index->indkey.values[i];",
          "new_line_content": "\t\t\t\tchar *attname = get_attname(RelationGetRelid(comp_chunk_rel), attnum, false);",
          "content_same": false
        },
        {
          "line": 743,
          "old_api": null,
          "new_api": "heap_getattr",
          "old_text": null,
          "new_text": "heap_getattr(compressed_tuple, seq_num_column_num, in_desc, &is_null)",
          "old_line_content": "",
          "new_line_content": "\t\tseq_num = heap_getattr(compressed_tuple, seq_num_column_num, in_desc, &is_null);",
          "content_same": false
        },
        {
          "line": 2793,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(attname, sf->column_name.data)",
          "old_line_content": "\t\t\t\t/* ensure column exists in index relation */",
          "new_line_content": "\t\t\t\tif (!strcmp(attname, sf->column_name.data))",
          "content_same": false
        },
        {
          "line": 746,
          "old_api": null,
          "new_api": "DatumGetInt32",
          "old_text": null,
          "new_text": "DatumGetInt32(seq_num)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\tcurr_seq_num = DatumGetInt32(seq_num);",
          "content_same": false
        },
        {
          "line": 754,
          "old_api": null,
          "new_api": "table_endscan",
          "old_text": null,
          "new_text": "table_endscan(heap_scan)",
          "old_line_content": "",
          "new_line_content": "\ttable_endscan(heap_scan);",
          "content_same": false
        },
        {
          "line": 2802,
          "old_api": null,
          "new_api": "RelationGetRelationName",
          "old_text": null,
          "new_text": "RelationGetRelationName(index_rel)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\telog(DEBUG2, \"index \\\"%s\\\" is used for scan. \", RelationGetRelationName(index_rel));",
          "content_same": false
        },
        {
          "line": 2806,
          "old_api": null,
          "new_api": "index_close",
          "old_text": null,
          "new_text": "index_close(index_rel, AccessShareLock)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tindex_close(index_rel, AccessShareLock);",
          "content_same": false
        },
        {
          "line": 771,
          "old_api": null,
          "new_api": "OidIsValid",
          "old_text": null,
          "new_text": "OidIsValid(index_oid)",
          "old_line_content": "\t/* If there is a suitable index, use index scan otherwise fallback to heap scan. */",
          "new_line_content": "\tbool is_index_scan = OidIsValid(index_oid);",
          "content_same": false
        },
        {
          "line": 2827,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(lc)",
          "old_line_content": "\t{",
          "new_line_content": "\t\tNode *node = copyObject(lfirst(lc));",
          "content_same": false
        },
        {
          "line": 2831,
          "old_api": null,
          "new_api": "nodeTag",
          "old_text": null,
          "new_text": "nodeTag(node)",
          "old_line_content": "\t\tchar *column_name;",
          "new_line_content": "\t\tswitch (nodeTag(node))",
          "content_same": false
        },
        {
          "line": 784,
          "old_api": null,
          "new_api": "AllocSetContextCreate",
          "old_text": null,
          "new_text": "AllocSetContextCreate(CurrentMemoryContext,\n\t\t\t\t\t\t\t\t\t\t\t\t   \"get max sequence number scan\",\n\t\t\t\t\t\t\t\t\t\t\t\t   ALLOCSET_DEFAULT_SIZES)",
          "old_line_content": "",
          "new_line_content": "\tMemoryContext scan_ctx = AllocSetContextCreate(CurrentMemoryContext,",
          "content_same": false
        },
        {
          "line": 788,
          "old_api": null,
          "new_api": "MemoryContextSwitchTo",
          "old_text": null,
          "new_text": "MemoryContextSwitchTo(scan_ctx)",
          "old_line_content": "\tMemoryContext old_ctx;",
          "new_line_content": "\told_ctx = MemoryContextSwitchTo(scan_ctx);",
          "content_same": false
        },
        {
          "line": 2839,
          "old_api": null,
          "new_api": "linitial",
          "old_text": null,
          "new_text": "linitial(opexpr->args)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tleftop = linitial(opexpr->args);",
          "content_same": false
        },
        {
          "line": 794,
          "old_api": null,
          "new_api": "palloc0",
          "old_text": null,
          "new_text": "palloc0(sizeof(ScanKeyData) * num_scankeys)",
          "old_line_content": "\t{",
          "new_line_content": "\t\tscankey = palloc0(sizeof(ScanKeyData) * num_scankeys);",
          "content_same": false
        },
        {
          "line": 2842,
          "old_api": null,
          "new_api": "IsA",
          "old_text": null,
          "new_text": "IsA(leftop, RelabelType)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tif (IsA(leftop, RelabelType))",
          "content_same": false
        },
        {
          "line": 2844,
          "old_api": null,
          "new_api": "IsA",
          "old_text": null,
          "new_text": "IsA(rightop, RelabelType)",
          "old_line_content": "\t\t\t\t\tleftop = ((RelabelType *) leftop)->arg;",
          "new_line_content": "\t\t\t\tif (IsA(rightop, RelabelType))",
          "content_same": false
        },
        {
          "line": 2847,
          "old_api": null,
          "new_api": "IsA",
          "old_text": null,
          "new_text": "IsA(rightop, Const)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tif (IsA(leftop, Var) && IsA(rightop, Const))",
          "content_same": false
        },
        {
          "line": 804,
          "old_api": null,
          "new_api": "AttrOffsetGetAttrNumber",
          "old_text": null,
          "new_text": "AttrOffsetGetAttrNumber(uncompressed_col_to_compressed_col[i])",
          "old_line_content": "\t\t\t\t\t\t\t  col.segmentby_column_index :",
          "new_line_content": "\t\t\t\t\t\t\t  AttrOffsetGetAttrNumber(uncompressed_col_to_compressed_col[i]);",
          "content_same": false
        },
        {
          "line": 2852,
          "old_api": null,
          "new_api": "IsA",
          "old_text": null,
          "new_text": "IsA(leftop, Const)",
          "old_line_content": "\t\t\t\t}",
          "new_line_content": "\t\t\t\telse if (IsA(rightop, Var) && IsA(leftop, Const))",
          "content_same": false
        },
        {
          "line": 808,
          "old_api": null,
          "new_api": "ScanKeyEntryInitialize",
          "old_text": null,
          "new_text": "ScanKeyEntryInitialize(&scankey[col.segmentby_column_index - 1],\n\t\t\t\t\t\t\t\t\t   SK_ISNULL | SK_SEARCHNULL,\n\t\t\t\t\t\t\t\t\t   attno,\n\t\t\t\t\t\t\t\t\t   InvalidStrategy, /* no strategy */\n\t\t\t\t\t\t\t\t\t   InvalidOid,\t\t/* no strategy subtype */\n\t\t\t\t\t\t\t\t\t   InvalidOid,\t\t/* no collation */\n\t\t\t\t\t\t\t\t\t   InvalidOid,\t\t/* no reg proc for this */\n\t\t\t\t\t\t\t\t\t   (Datum) 0)",
          "old_line_content": "\t\t\t{",
          "new_line_content": "\t\t\t\tScanKeyEntryInitialize(&scankey[col.segmentby_column_index - 1],",
          "content_same": false
        },
        {
          "line": 2863,
          "old_api": null,
          "new_api": "get_attname",
          "old_text": null,
          "new_text": "get_attname(ch->table_id, var->varattno, false)",
          "old_line_content": "\t\t\t\t\tcontinue;",
          "new_line_content": "\t\t\t\tcolumn_name = get_attname(ch->table_id, var->varattno, false);",
          "content_same": false
        },
        {
          "line": 2865,
          "old_api": null,
          "new_api": "ts_hypertable_compression_get_by_pkey",
          "old_text": null,
          "new_text": "ts_hypertable_compression_get_by_pkey(ch->fd.hypertable_id, column_name)",
          "old_line_content": "\t\t\t\tFormData_hypertable_compression *fd =",
          "new_line_content": "\t\t\t\t\tts_hypertable_compression_get_by_pkey(ch->fd.hypertable_id, column_name);",
          "content_same": false
        },
        {
          "line": 819,
          "old_api": null,
          "new_api": "ScanKeyEntryInitializeWithInfo",
          "old_text": null,
          "new_text": "ScanKeyEntryInitializeWithInfo(&scankey[col.segmentby_column_index - 1],\n\t\t\t\t\t\t\t\t\t\t\t   0, /* flags */\n\t\t\t\t\t\t\t\t\t\t\t   attno,\n\t\t\t\t\t\t\t\t\t\t\t   BTEqualStrategyNumber,\n\t\t\t\t\t\t\t\t\t\t\t   InvalidOid, /* No strategy subtype. */\n\t\t\t\t\t\t\t\t\t\t\t   col.segment_info->collation,\n\t\t\t\t\t\t\t\t\t\t\t   &col.segment_info->eq_fn,\n\t\t\t\t\t\t\t\t\t\t\t   col.segment_info->val)",
          "old_line_content": "\t\t\t{",
          "new_line_content": "\t\t\t\tScanKeyEntryInitializeWithInfo(&scankey[col.segmentby_column_index - 1],",
          "content_same": false
        },
        {
          "line": 2881,
          "old_api": null,
          "new_api": "lappend",
          "old_text": null,
          "new_text": "lappend(*index_filters,\n\t\t\t\t\t\t\t\t\t\tadd_filter_column_strategy(column_name,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   op_strategy,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   arg_value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   false))",
          "old_line_content": "\t\t\t\t\t\t\t*index_filters =",
          "new_line_content": "\t\t\t\t\t\t\t\tlappend(*index_filters,",
          "content_same": false
        },
        {
          "line": 834,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(num_scankeys > 0)",
          "old_line_content": "\t\t/* Index scan should always use at least one scan key to get the sequence number. */",
          "new_line_content": "\t\tAssert(num_scankeys > 0);",
          "content_same": false
        },
        {
          "line": 836,
          "old_api": null,
          "new_api": "index_scan_sequence_number",
          "old_text": null,
          "new_text": "index_scan_sequence_number(table_rel, index_oid, scankey, num_scankeys)",
          "old_line_content": "",
          "new_line_content": "\t\tresult = index_scan_sequence_number(table_rel, index_oid, scankey, num_scankeys);",
          "content_same": false
        },
        {
          "line": 2886,
          "old_api": null,
          "new_api": "lappend",
          "old_text": null,
          "new_text": "lappend(*segmentby_predicates, node)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   false)); /* is_null_check */",
          "new_line_content": "\t\t\t\t\t\t\t*segmentby_predicates = lappend(*segmentby_predicates, node);",
          "content_same": false
        },
        {
          "line": 841,
          "old_api": null,
          "new_api": "table_scan_sequence_number",
          "old_text": null,
          "new_text": "table_scan_sequence_number(table_rel, seq_num_column_num, scankey, num_scankeys)",
          "old_line_content": "\t\t/* Table scan can work without scan keys. */",
          "new_line_content": "\t\tresult = table_scan_sequence_number(table_rel, seq_num_column_num, scankey, num_scankeys);",
          "content_same": false
        },
        {
          "line": 2890,
          "old_api": null,
          "new_api": "COMPRESSIONCOL_IS_ORDER_BY",
          "old_text": null,
          "new_text": "COMPRESSIONCOL_IS_ORDER_BY(fd)",
          "old_line_content": "\t\t\t\t}",
          "new_line_content": "\t\t\t\telse if (COMPRESSIONCOL_IS_ORDER_BY(fd))",
          "content_same": false
        },
        {
          "line": 844,
          "old_api": null,
          "new_api": "MemoryContextSwitchTo",
          "old_text": null,
          "new_text": "MemoryContextSwitchTo(old_ctx)",
          "old_line_content": "",
          "new_line_content": "\tMemoryContextSwitchTo(old_ctx);",
          "content_same": false
        },
        {
          "line": 2897,
          "old_api": null,
          "new_api": "lappend",
          "old_text": null,
          "new_text": "lappend(\n\t\t\t\t\t\t\t\t*filters,\n\t\t\t\t\t\t\t\tadd_filter_column_strategy(compression_column_segment_min_name(fd),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   BTLessEqualStrategyNumber,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   arg_value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   false))",
          "old_line_content": "\t\t\t\t\t\t\t/* orderby col = value implies min <= value and max >= value */",
          "new_line_content": "\t\t\t\t\t\t\t*filters = lappend(",
          "content_same": false
        },
        {
          "line": 2899,
          "old_api": null,
          "new_api": "compression_column_segment_min_name",
          "old_text": null,
          "new_text": "compression_column_segment_min_name(fd)",
          "old_line_content": "\t\t\t\t\t\t\t\t*filters,",
          "new_line_content": "\t\t\t\t\t\t\t\tadd_filter_column_strategy(compression_column_segment_min_name(fd),",
          "content_same": false
        },
        {
          "line": 2903,
          "old_api": null,
          "new_api": "lappend",
          "old_text": null,
          "new_text": "lappend(\n\t\t\t\t\t\t\t\t*filters,\n\t\t\t\t\t\t\t\tadd_filter_column_strategy(compression_column_segment_max_name(fd),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   BTGreaterEqualStrategyNumber,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   arg_value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   false))",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t\t   false)); /* is_null_check */",
          "new_line_content": "\t\t\t\t\t\t\t*filters = lappend(",
          "content_same": false
        },
        {
          "line": 2905,
          "old_api": null,
          "new_api": "compression_column_segment_max_name",
          "old_text": null,
          "new_text": "compression_column_segment_max_name(fd)",
          "old_line_content": "\t\t\t\t\t\t\t\t*filters,",
          "new_line_content": "\t\t\t\t\t\t\t\tadd_filter_column_strategy(compression_column_segment_max_name(fd),",
          "content_same": false
        },
        {
          "line": 861,
          "old_api": null,
          "new_api": "RelationGetDescr",
          "old_text": null,
          "new_text": "RelationGetDescr(compressed_table)",
          "old_line_content": "{",
          "new_line_content": "\tTupleDesc out_desc = RelationGetDescr(compressed_table);",
          "content_same": false
        },
        {
          "line": 863,
          "old_api": null,
          "new_api": "DatumGetName",
          "old_text": null,
          "new_text": "DatumGetName(\n\t\tDirectFunctionCall1(namein, CStringGetDatum(COMPRESSION_COLUMN_METADATA_COUNT_NAME)))",
          "old_line_content": "\tint col;",
          "new_line_content": "\tName count_metadata_name = DatumGetName(",
          "content_same": false
        },
        {
          "line": 2915,
          "old_api": null,
          "new_api": "lappend",
          "old_text": null,
          "new_text": "lappend(\n\t\t\t\t\t\t\t\t*filters,\n\t\t\t\t\t\t\t\tadd_filter_column_strategy(compression_column_segment_min_name(fd),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   op_strategy,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   arg_value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   false))",
          "old_line_content": "\t\t\t\t\t\t\t/* orderby col <[=] value implies min <[=] value */",
          "new_line_content": "\t\t\t\t\t\t\t*filters = lappend(",
          "content_same": false
        },
        {
          "line": 869,
          "old_api": null,
          "new_api": "NameStr",
          "old_text": null,
          "new_text": "NameStr(*count_metadata_name)",
          "old_line_content": "\tAttrNumber count_metadata_column_num =",
          "new_line_content": "\t\tget_attnum(compressed_table->rd_id, NameStr(*count_metadata_name));",
          "content_same": false
        },
        {
          "line": 2917,
          "old_api": null,
          "new_api": "compression_column_segment_min_name",
          "old_text": null,
          "new_text": "compression_column_segment_min_name(fd)",
          "old_line_content": "\t\t\t\t\t\t\t\t*filters,",
          "new_line_content": "\t\t\t\t\t\t\t\tadd_filter_column_strategy(compression_column_segment_min_name(fd),",
          "content_same": false
        },
        {
          "line": 871,
          "old_api": null,
          "new_api": "NameStr",
          "old_text": null,
          "new_text": "NameStr(*sequence_num_metadata_name)",
          "old_line_content": "\tAttrNumber sequence_num_column_num =",
          "new_line_content": "\t\tget_attnum(compressed_table->rd_id, NameStr(*sequence_num_metadata_name));",
          "content_same": false
        },
        {
          "line": 875,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR,\n\t\t\t \"missing metadata column '%s' in compressed table\",\n\t\t\t COMPRESSION_COLUMN_METADATA_COUNT_NAME)",
          "old_line_content": "\tif (count_metadata_column_num == InvalidAttrNumber)",
          "new_line_content": "\t\telog(ERROR,",
          "content_same": false
        },
        {
          "line": 2927,
          "old_api": null,
          "new_api": "lappend",
          "old_text": null,
          "new_text": "lappend(\n\t\t\t\t\t\t\t\t*filters,\n\t\t\t\t\t\t\t\tadd_filter_column_strategy(compression_column_segment_max_name(fd),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   op_strategy,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   arg_value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   false))",
          "old_line_content": "\t\t\t\t\t\t\t/* orderby col >[=] value implies max >[=] value */",
          "new_line_content": "\t\t\t\t\t\t\t*filters = lappend(",
          "content_same": false
        },
        {
          "line": 880,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR,\n\t\t\t \"missing metadata column '%s' in compressed table\",\n\t\t\t COMPRESSION_COLUMN_METADATA_SEQUENCE_NUM_NAME)",
          "old_line_content": "\tif (sequence_num_column_num == InvalidAttrNumber)",
          "new_line_content": "\t\telog(ERROR,",
          "content_same": false
        },
        {
          "line": 2929,
          "old_api": null,
          "new_api": "compression_column_segment_max_name",
          "old_text": null,
          "new_text": "compression_column_segment_max_name(fd)",
          "old_line_content": "\t\t\t\t\t\t\t\t*filters,",
          "new_line_content": "\t\t\t\t\t\t\t\tadd_filter_column_strategy(compression_column_segment_max_name(fd),",
          "content_same": false
        },
        {
          "line": 885,
          "old_api": null,
          "new_api": "AllocSetContextCreate",
          "old_text": null,
          "new_text": "AllocSetContextCreate(CurrentMemoryContext,\n\t\t\t\t\t\t\t\t\t\t\t \"compress chunk per-row\",\n\t\t\t\t\t\t\t\t\t\t\t ALLOCSET_DEFAULT_SIZES)",
          "old_line_content": "\t*row_compressor = (RowCompressor){",
          "new_line_content": "\t\t.per_row_ctx = AllocSetContextCreate(CurrentMemoryContext,",
          "content_same": false
        },
        {
          "line": 889,
          "old_api": null,
          "new_api": "GetBulkInsertState",
          "old_text": null,
          "new_text": "GetBulkInsertState()",
          "old_line_content": "\t\t.compressed_table = compressed_table,",
          "new_line_content": "\t\t.bistate = need_bistate ? GetBulkInsertState() : NULL,",
          "content_same": false
        },
        {
          "line": 892,
          "old_api": null,
          "new_api": "palloc0",
          "old_text": null,
          "new_text": "palloc0(sizeof(PerColumn) * uncompressed_tuple_desc->natts)",
          "old_line_content": "\t\t.n_input_columns = uncompressed_tuple_desc->natts,",
          "new_line_content": "\t\t.per_column = palloc0(sizeof(PerColumn) * uncompressed_tuple_desc->natts),",
          "content_same": false
        },
        {
          "line": 2941,
          "old_api": null,
          "new_api": "IsA",
          "old_text": null,
          "new_text": "IsA(ntest->arg, Var)",
          "old_line_content": "\t\t\t\tNullTest *ntest = (NullTest *) node;",
          "new_line_content": "\t\t\t\tif (IsA(ntest->arg, Var))",
          "content_same": false
        },
        {
          "line": 894,
          "old_api": null,
          "new_api": "palloc0",
          "old_text": null,
          "new_text": "palloc0(sizeof(*row_compressor->uncompressed_col_to_compressed_col) *\n\t\t\t\t\tuncompressed_tuple_desc->natts)",
          "old_line_content": "\t\t.uncompressed_col_to_compressed_col =",
          "new_line_content": "\t\t\tpalloc0(sizeof(*row_compressor->uncompressed_col_to_compressed_col) *",
          "content_same": false
        },
        {
          "line": 896,
          "old_api": null,
          "new_api": "AttrNumberGetAttrOffset",
          "old_text": null,
          "new_text": "AttrNumberGetAttrOffset(count_metadata_column_num)",
          "old_line_content": "\t\t\t\t\tuncompressed_tuple_desc->natts),",
          "new_line_content": "\t\t.count_metadata_column_offset = AttrNumberGetAttrOffset(count_metadata_column_num),",
          "content_same": false
        },
        {
          "line": 2947,
          "old_api": null,
          "new_api": "get_attname",
          "old_text": null,
          "new_text": "get_attname(ch->table_id, var->varattno, false)",
          "old_line_content": "\t\t\t\t\t\tcontinue;",
          "new_line_content": "\t\t\t\t\tcolumn_name = get_attname(ch->table_id, var->varattno, false);",
          "content_same": false
        },
        {
          "line": 2949,
          "old_api": null,
          "new_api": "ts_hypertable_compression_get_by_pkey",
          "old_text": null,
          "new_text": "ts_hypertable_compression_get_by_pkey(ch->fd.hypertable_id, column_name)",
          "old_line_content": "\t\t\t\t\tFormData_hypertable_compression *fd =",
          "new_line_content": "\t\t\t\t\t\tts_hypertable_compression_get_by_pkey(ch->fd.hypertable_id, column_name);",
          "content_same": false
        },
        {
          "line": 2953,
          "old_api": null,
          "new_api": "lappend",
          "old_text": null,
          "new_text": "lappend(*index_filters,\n\t\t\t\t\t\t\t\t\tadd_filter_column_strategy(column_name,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   InvalidStrategy,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   NULL,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   true))",
          "old_line_content": "\t\t\t\t\t\t*index_filters =",
          "new_line_content": "\t\t\t\t\t\t\tlappend(*index_filters,",
          "content_same": false
        },
        {
          "line": 909,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(row_compressor->compressed_is_null, 1, sizeof(bool) * num_columns_in_compressed_table)",
          "old_line_content": "",
          "new_line_content": "\tmemset(row_compressor->compressed_is_null, 1, sizeof(bool) * num_columns_in_compressed_table);",
          "content_same": false
        },
        {
          "line": 2958,
          "old_api": null,
          "new_api": "lappend",
          "old_text": null,
          "new_text": "lappend(*segmentby_predicates, node)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   true)); /* is_null_check */",
          "new_line_content": "\t\t\t\t\t\t*segmentby_predicates = lappend(*segmentby_predicates, node);",
          "content_same": false
        },
        {
          "line": 2960,
          "old_api": null,
          "new_api": "lappend_int",
          "old_text": null,
          "new_text": "lappend_int(*is_null, 1)",
          "old_line_content": "\t\t\t\t\t\tif (ntest->nulltesttype == IS_NULL)",
          "new_line_content": "\t\t\t\t\t\t\t*is_null = lappend_int(*is_null, 1);",
          "content_same": false
        },
        {
          "line": 2962,
          "old_api": null,
          "new_api": "lappend_int",
          "old_text": null,
          "new_text": "lappend_int(*is_null, 0)",
          "old_line_content": "\t\t\t\t\t\telse",
          "new_line_content": "\t\t\t\t\t\t\t*is_null = lappend_int(*is_null, 0);",
          "content_same": false
        },
        {
          "line": 917,
          "old_api": null,
          "new_api": "TupleDescAttr",
          "old_text": null,
          "new_text": "TupleDescAttr(uncompressed_tuple_desc, in_column_offset)",
          "old_line_content": "\t\tPerColumn *column = &row_compressor->per_column[in_column_offset];",
          "new_line_content": "\t\tForm_pg_attribute column_attr = TupleDescAttr(uncompressed_tuple_desc, in_column_offset);",
          "content_same": false
        },
        {
          "line": 919,
          "old_api": null,
          "new_api": "NameStr",
          "old_text": null,
          "new_text": "NameStr(compression_info->attname)",
          "old_line_content": "\t\tAttrNumber compressed_colnum =",
          "new_line_content": "\t\t\tget_attnum(compressed_table->rd_id, NameStr(compression_info->attname));",
          "content_same": false
        },
        {
          "line": 921,
          "old_api": null,
          "new_api": "AttrNumberGetAttrOffset",
          "old_text": null,
          "new_text": "AttrNumberGetAttrOffset(compressed_colnum)",
          "old_line_content": "\t\tForm_pg_attribute compressed_column_attr =",
          "new_line_content": "\t\t\tTupleDescAttr(out_desc, AttrNumberGetAttrOffset(compressed_colnum));",
          "content_same": false
        },
        {
          "line": 923,
          "old_api": null,
          "new_api": "AttrNumberGetAttrOffset",
          "old_text": null,
          "new_text": "AttrNumberGetAttrOffset(compressed_colnum)",
          "old_line_content": "\t\trow_compressor->uncompressed_col_to_compressed_col[in_column_offset] =",
          "new_line_content": "\t\t\tAttrNumberGetAttrOffset(compressed_colnum);",
          "content_same": false
        },
        {
          "line": 931,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR,\n\t\t\t\t\t \"expected column '%s' to be a compressed data type\",\n\t\t\t\t\t compression_info->attname.data)",
          "old_line_content": "\t\t\tif (compressed_column_attr->atttypid != compressed_data_type_oid)",
          "new_line_content": "\t\t\t\telog(ERROR,",
          "content_same": false
        },
        {
          "line": 937,
          "old_api": null,
          "new_api": "compression_column_segment_min_name",
          "old_text": null,
          "new_text": "compression_column_segment_min_name(compression_info)",
          "old_line_content": "\t\t\t{",
          "new_line_content": "\t\t\t\tchar *segment_min_col_name = compression_column_segment_min_name(compression_info);",
          "content_same": false
        },
        {
          "line": 940,
          "old_api": null,
          "new_api": "get_attnum",
          "old_text": null,
          "new_text": "get_attnum(compressed_table->rd_id, segment_min_col_name)",
          "old_line_content": "\t\t\t\tAttrNumber segment_min_attr_number =",
          "new_line_content": "\t\t\t\t\tget_attnum(compressed_table->rd_id, segment_min_col_name);",
          "content_same": false
        },
        {
          "line": 942,
          "old_api": null,
          "new_api": "get_attnum",
          "old_text": null,
          "new_text": "get_attnum(compressed_table->rd_id, segment_max_col_name)",
          "old_line_content": "\t\t\t\tAttrNumber segment_max_attr_number =",
          "new_line_content": "\t\t\t\t\tget_attnum(compressed_table->rd_id, segment_max_col_name);",
          "content_same": false
        },
        {
          "line": 944,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"couldn't find metadata column \\\"%s\\\"\", segment_min_col_name)",
          "old_line_content": "\t\t\t\tif (segment_min_attr_number == InvalidAttrNumber)",
          "new_line_content": "\t\t\t\t\telog(ERROR, \"couldn't find metadata column \\\"%s\\\"\", segment_min_col_name);",
          "content_same": false
        },
        {
          "line": 2992,
          "old_api": null,
          "new_api": "palloc0",
          "old_text": null,
          "new_text": "palloc0(filters->length * sizeof(ScanKeyData))",
          "old_line_content": "",
          "new_line_content": "\tScanKeyData *scankeys = palloc0(filters->length * sizeof(ScanKeyData));",
          "content_same": false
        },
        {
          "line": 946,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"couldn't find metadata column \\\"%s\\\"\", segment_max_col_name)",
          "old_line_content": "\t\t\t\tif (segment_max_attr_number == InvalidAttrNumber)",
          "new_line_content": "\t\t\t\t\telog(ERROR, \"couldn't find metadata column \\\"%s\\\"\", segment_max_col_name);",
          "content_same": false
        },
        {
          "line": 2996,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(lc)",
          "old_line_content": "\t{",
          "new_line_content": "\t\tfilter = lfirst(lc);",
          "content_same": false
        },
        {
          "line": 950,
          "old_api": null,
          "new_api": "segment_meta_min_max_builder_create",
          "old_text": null,
          "new_text": "segment_meta_min_max_builder_create(column_attr->atttypid,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolumn_attr->attcollation)",
          "old_line_content": "\t\t\t\tsegment_min_max_builder =",
          "new_line_content": "\t\t\t\t\tsegment_meta_min_max_builder_create(column_attr->atttypid,",
          "content_same": false
        },
        {
          "line": 2999,
          "old_api": null,
          "new_api": "ereport",
          "old_text": null,
          "new_text": "ereport(ERROR,\n\t\t\t\t\t(errcode(ERRCODE_UNDEFINED_COLUMN),\n\t\t\t\t\t errmsg(\"column \\\"%s\\\" of relation \\\"%s\\\" does not exist\",\n\t\t\t\t\t\t\tNameStr(filter->column_name),\n\t\t\t\t\t\t\tRelationGetRelationName(decompressor->in_rel))))",
          "old_line_content": "\t\tif (attno == InvalidAttrNumber)",
          "new_line_content": "\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 954,
          "old_api": null,
          "new_api": "compressor_for_algorithm_and_type",
          "old_text": null,
          "new_text": "compressor_for_algorithm_and_type(compression_info->algo_id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolumn_attr->atttypid)",
          "old_line_content": "\t\t\t*column = (PerColumn){",
          "new_line_content": "\t\t\t\t.compressor = compressor_for_algorithm_and_type(compression_info->algo_id,",
          "content_same": false
        },
        {
          "line": 3005,
          "old_api": null,
          "new_api": "create_segment_filter_scankey",
          "old_text": null,
          "new_text": "create_segment_filter_scankey(decompressor,\n\t\t\t\t\t\t\t\t\t\t\t\t  NameStr(filter->column_name),\n\t\t\t\t\t\t\t\t\t\t\t\t  filter->strategy,\n\t\t\t\t\t\t\t\t\t\t\t\t  scankeys,\n\t\t\t\t\t\t\t\t\t\t\t\t  key_index,\n\t\t\t\t\t\t\t\t\t\t\t\t  null_columns,\n\t\t\t\t\t\t\t\t\t\t\t\t  filter->value ? filter->value->constvalue : 0,\n\t\t\t\t\t\t\t\t\t\t\t\t  filter->is_null_check)",
          "old_line_content": "",
          "new_line_content": "\t\tkey_index = create_segment_filter_scankey(decompressor,",
          "content_same": false
        },
        {
          "line": 965,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR,\n\t\t\t\t\t \"expected segment by column \\\"%s\\\" to be same type as uncompressed column\",\n\t\t\t\t\t compression_info->attname.data)",
          "old_line_content": "\t\t\tif (column_attr->atttypid != compressed_column_attr->atttypid)",
          "new_line_content": "\t\t\t\telog(ERROR,",
          "content_same": false
        },
        {
          "line": 969,
          "old_api": null,
          "new_api": "segment_info_new",
          "old_text": null,
          "new_text": "segment_info_new(column_attr)",
          "old_line_content": "\t\t\t*column = (PerColumn){",
          "new_line_content": "\t\t\t\t.segment_info = segment_info_new(column_attr),",
          "content_same": false
        },
        {
          "line": 3023,
          "old_api": null,
          "new_api": "table_tuple_delete",
          "old_text": null,
          "new_text": "table_tuple_delete(decompressor->in_rel,\n\t\t\t\t\t\t\t\t&compressed_tuple->t_self,\n\t\t\t\t\t\t\t\tdecompressor->mycid,\n\t\t\t\t\t\t\t\tGetTransactionSnapshot(),\n\t\t\t\t\t\t\t\tInvalidSnapshot,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t&tmfd,\n\t\t\t\t\t\t\t\tfalse)",
          "old_line_content": "\tTM_Result result;",
          "new_line_content": "\tresult = table_tuple_delete(decompressor->in_rel,",
          "content_same": false
        },
        {
          "line": 978,
          "old_api": null,
          "new_api": "get_compressed_chunk_index",
          "old_text": null,
          "new_text": "get_compressed_chunk_index(row_compressor->resultRelInfo,\n\t\t\t\t\t\t\t\t   row_compressor->uncompressed_col_to_compressed_col,\n\t\t\t\t\t\t\t\t   row_compressor->per_column,\n\t\t\t\t\t\t\t\t   row_compressor->n_input_columns)",
          "old_line_content": "\trow_compressor->index_oid =",
          "new_line_content": "\t\tget_compressed_chunk_index(row_compressor->resultRelInfo,",
          "content_same": false
        },
        {
          "line": 3026,
          "old_api": null,
          "new_api": "GetTransactionSnapshot",
          "old_text": null,
          "new_text": "GetTransactionSnapshot()",
          "old_line_content": "\t\t\t\t\t\t\t\tdecompressor->mycid,",
          "new_line_content": "\t\t\t\t\t\t\t\tGetTransactionSnapshot(),",
          "content_same": false
        },
        {
          "line": 988,
          "old_api": null,
          "new_api": "GetCurrentCommandId",
          "old_text": null,
          "new_text": "GetCurrentCommandId(true)",
          "old_line_content": "{",
          "new_line_content": "\tCommandId mycid = GetCurrentCommandId(true);",
          "content_same": false
        },
        {
          "line": 992,
          "old_api": null,
          "new_api": "tuplesort_gettupleslot",
          "old_text": null,
          "new_text": "tuplesort_gettupleslot(sorted_rel,\n\t\t\t\t\t\t\t\t\t\t\ttrue /*=forward*/,\n\t\t\t\t\t\t\t\t\t\t\tfalse /*=copy*/,\n\t\t\t\t\t\t\t\t\t\t\tslot,\n\t\t\t\t\t\t\t\t\t\t\tNULL /*=abbrev*/)",
          "old_line_content": "",
          "new_line_content": "\tfor (got_tuple = tuplesort_gettupleslot(sorted_rel,",
          "content_same": false
        },
        {
          "line": 3041,
          "old_api": null,
          "new_api": "IsolationUsesXactSnapshot",
          "old_text": null,
          "new_text": "IsolationUsesXactSnapshot()",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\tif (IsolationUsesXactSnapshot())",
          "content_same": false
        },
        {
          "line": 3044,
          "old_api": null,
          "new_api": "ereport",
          "old_text": null,
          "new_text": "ereport(ERROR,\n\t\t\t\t\t\t(errcode(ERRCODE_T_R_SERIALIZATION_FAILURE),\n\t\t\t\t\t\t errmsg(\"could not serialize access due to concurrent update\")))",
          "old_line_content": "\t\t\t\t/* For Repeatable Read isolation level report error */",
          "new_line_content": "\t\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 998,
          "old_api": null,
          "new_api": "tuplesort_gettupleslot",
          "old_text": null,
          "new_text": "tuplesort_gettupleslot(sorted_rel,\n\t\t\t\t\t\t\t\t\t\t\ttrue /*=forward*/,\n\t\t\t\t\t\t\t\t\t\t\tfalse /*=copy*/,\n\t\t\t\t\t\t\t\t\t\t\tslot,\n\t\t\t\t\t\t\t\t\t\t\tNULL /*=abbrev*/)",
          "old_line_content": "\t\t got_tuple;",
          "new_line_content": "\t\t got_tuple = tuplesort_gettupleslot(sorted_rel,",
          "content_same": false
        },
        {
          "line": 1004,
          "old_api": null,
          "new_api": "row_compressor_process_ordered_slot",
          "old_text": null,
          "new_text": "row_compressor_process_ordered_slot(row_compressor, slot, mycid)",
          "old_line_content": "\t{",
          "new_line_content": "\t\trow_compressor_process_ordered_slot(row_compressor, slot, mycid);",
          "content_same": false
        },
        {
          "line": 1008,
          "old_api": null,
          "new_api": "row_compressor_flush",
          "old_text": null,
          "new_text": "row_compressor_flush(row_compressor, mycid, true)",
          "old_line_content": "\tif (row_compressor->rows_compressed_into_current_value > 0)",
          "new_line_content": "\t\trow_compressor_flush(row_compressor, mycid, true);",
          "content_same": false
        },
        {
          "line": 3056,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"tuple concurrently updated\")",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\telog(ERROR, \"tuple concurrently updated\");",
          "content_same": false
        },
        {
          "line": 1010,
          "old_api": null,
          "new_api": "ExecDropSingleTupleTableSlot",
          "old_text": null,
          "new_text": "ExecDropSingleTupleTableSlot(slot)",
          "old_line_content": "",
          "new_line_content": "\tExecDropSingleTupleTableSlot(slot);",
          "content_same": false
        },
        {
          "line": 3061,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"attempted to lock invisible tuple\")",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\telog(ERROR, \"attempted to lock invisible tuple\");",
          "content_same": false
        },
        {
          "line": 1018,
          "old_api": null,
          "new_api": "slot_getallattrs",
          "old_text": null,
          "new_text": "slot_getallattrs(slot)",
          "old_line_content": "\tMemoryContext old_ctx;",
          "new_line_content": "\tslot_getallattrs(slot);",
          "content_same": false
        },
        {
          "line": 3068,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"unexpected tuple operation result: %d\", result)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\telog(ERROR, \"unexpected tuple operation result: %d\", result);",
          "content_same": false
        },
        {
          "line": 1022,
          "old_api": null,
          "new_api": "row_compressor_update_group",
          "old_text": null,
          "new_text": "row_compressor_update_group(row_compressor, slot)",
          "old_line_content": "\t{",
          "new_line_content": "\t\trow_compressor_update_group(row_compressor, slot);",
          "content_same": false
        },
        {
          "line": 1025,
          "old_api": null,
          "new_api": "row_compressor_new_row_is_in_new_group",
          "old_text": null,
          "new_text": "row_compressor_new_row_is_in_new_group(row_compressor, slot)",
          "old_line_content": "\t}",
          "new_line_content": "\tbool changed_groups = row_compressor_new_row_is_in_new_group(row_compressor, slot);",
          "content_same": false
        },
        {
          "line": 1031,
          "old_api": null,
          "new_api": "row_compressor_flush",
          "old_text": null,
          "new_text": "row_compressor_flush(row_compressor, mycid, changed_groups)",
          "old_line_content": "\t\tif (row_compressor->rows_compressed_into_current_value > 0)",
          "new_line_content": "\t\t\trow_compressor_flush(row_compressor, mycid, changed_groups);",
          "content_same": false
        },
        {
          "line": 1033,
          "old_api": null,
          "new_api": "row_compressor_update_group",
          "old_text": null,
          "new_text": "row_compressor_update_group(row_compressor, slot)",
          "old_line_content": "\t\tif (changed_groups)",
          "new_line_content": "\t\t\trow_compressor_update_group(row_compressor, slot);",
          "content_same": false
        },
        {
          "line": 1036,
          "old_api": null,
          "new_api": "row_compressor_append_row",
          "old_text": null,
          "new_text": "row_compressor_append_row(row_compressor, slot)",
          "old_line_content": "",
          "new_line_content": "\trow_compressor_append_row(row_compressor, slot);",
          "content_same": false
        },
        {
          "line": 3092,
          "old_api": null,
          "new_api": "GetTransactionSnapshot",
          "old_text": null,
          "new_text": "GetTransactionSnapshot()",
          "old_line_content": "\tHeapTuple compressed_tuple;",
          "new_line_content": "\tSnapshot snapshot = GetTransactionSnapshot();",
          "content_same": false
        },
        {
          "line": 3095,
          "old_api": null,
          "new_api": "table_beginscan",
          "old_text": null,
          "new_text": "table_beginscan(decompressor->in_rel, snapshot, num_scankeys, scankeys)",
          "old_line_content": "\tTableScanDesc heapScan =",
          "new_line_content": "\t\ttable_beginscan(decompressor->in_rel, snapshot, num_scankeys, scankeys);",
          "content_same": false
        },
        {
          "line": 1048,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(row_compressor->rows_compressed_into_current_value == 0)",
          "old_line_content": "",
          "new_line_content": "\tAssert(row_compressor->rows_compressed_into_current_value == 0);",
          "content_same": false
        },
        {
          "line": 1051,
          "old_api": null,
          "new_api": "MemoryContextSwitchTo",
          "old_text": null,
          "new_text": "MemoryContextSwitchTo(row_compressor->per_row_ctx->parent)",
          "old_line_content": "",
          "new_line_content": "\tMemoryContextSwitchTo(row_compressor->per_row_ctx->parent);",
          "content_same": false
        },
        {
          "line": 3099,
          "old_api": null,
          "new_api": "bms_next_member",
          "old_text": null,
          "new_text": "bms_next_member(null_columns, -1)",
          "old_line_content": "\t\tbool skip_tuple = false;",
          "new_line_content": "\t\tint attrno = bms_next_member(null_columns, -1);",
          "content_same": false
        },
        {
          "line": 3103,
          "old_api": null,
          "new_api": "bms_next_member",
          "old_text": null,
          "new_text": "bms_next_member(null_columns, attrno)",
          "old_line_content": "\t\tbool seg_col_is_null = false;",
          "new_line_content": "\t\tfor (; attrno >= 0; attrno = bms_next_member(null_columns, attrno))",
          "content_same": false
        },
        {
          "line": 3105,
          "old_api": null,
          "new_api": "list_nth_int",
          "old_text": null,
          "new_text": "list_nth_int(is_nulls, pos)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\tis_null_condition = list_nth_int(is_nulls, pos);",
          "content_same": false
        },
        {
          "line": 1061,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(column->compressor == NULL)",
          "old_line_content": "",
          "new_line_content": "\t\tAssert(column->compressor == NULL);",
          "content_same": false
        },
        {
          "line": 1065,
          "old_api": null,
          "new_api": "AttrOffsetGetAttrNumber",
          "old_text": null,
          "new_text": "AttrOffsetGetAttrNumber(col)",
          "old_line_content": "\t\t   to be fetched */",
          "new_line_content": "\t\tval = slot_getattr(row, AttrOffsetGetAttrNumber(col), &is_null);",
          "content_same": false
        },
        {
          "line": 1069,
          "old_api": null,
          "new_api": "MemoryContextSwitchTo",
          "old_text": null,
          "new_text": "MemoryContextSwitchTo(oldcontext)",
          "old_line_content": "\t/* switch to original memory context */",
          "new_line_content": "\tMemoryContextSwitchTo(oldcontext);",
          "content_same": false
        },
        {
          "line": 3121,
          "old_api": null,
          "new_api": "heap_deform_tuple",
          "old_text": null,
          "new_text": "heap_deform_tuple(compressed_tuple,\n\t\t\t\t\t\t  decompressor->in_desc,\n\t\t\t\t\t\t  decompressor->compressed_datums,\n\t\t\t\t\t\t  decompressor->compressed_is_nulls)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\theap_deform_tuple(compressed_tuple,",
          "content_same": false
        },
        {
          "line": 3126,
          "old_api": null,
          "new_api": "delete_compressed_tuple",
          "old_text": null,
          "new_text": "delete_compressed_tuple(decompressor, compressed_tuple)",
          "old_line_content": "",
          "new_line_content": "\t\tresult = delete_compressed_tuple(decompressor, compressed_tuple);",
          "content_same": false
        },
        {
          "line": 1081,
          "old_api": null,
          "new_api": "get_sequence_number_for_current_group",
          "old_text": null,
          "new_text": "get_sequence_number_for_current_group(row_compressor->compressed_table,\n\t\t\t\t\t\t\t\t\t\t\t\t  row_compressor->index_oid,\n\t\t\t\t\t\t\t\t\t\t\t\t  row_compressor\n\t\t\t\t\t\t\t\t\t\t\t\t\t  ->uncompressed_col_to_compressed_col,\n\t\t\t\t\t\t\t\t\t\t\t\t  row_compressor->per_column,\n\t\t\t\t\t\t\t\t\t\t\t\t  row_compressor->n_input_columns,\n\t\t\t\t\t\t\t\t\t\t\t\t  AttrOffsetGetAttrNumber(\n\t\t\t\t\t\t\t\t\t\t\t\t\t  row_compressor\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  ->sequence_num_metadata_column_offset))",
          "old_line_content": "\t\trow_compressor->sequence_num =",
          "new_line_content": "\t\t\tget_sequence_number_for_current_group(row_compressor->compressed_table,",
          "content_same": false
        },
        {
          "line": 3129,
          "old_api": null,
          "new_api": "table_endscan",
          "old_text": null,
          "new_text": "table_endscan(heapScan)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\ttable_endscan(heapScan);",
          "content_same": false
        },
        {
          "line": 3132,
          "old_api": null,
          "new_api": "row_decompressor_decompress_row_to_table",
          "old_text": null,
          "new_text": "row_decompressor_decompress_row_to_table(decompressor)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\trow_decompressor_decompress_row_to_table(decompressor);",
          "content_same": false
        },
        {
          "line": 1087,
          "old_api": null,
          "new_api": "AttrOffsetGetAttrNumber",
          "old_text": null,
          "new_text": "AttrOffsetGetAttrNumber(\n\t\t\t\t\t\t\t\t\t\t\t\t\t  row_compressor\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  ->sequence_num_metadata_column_offset)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t  row_compressor->n_input_columns,",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t  AttrOffsetGetAttrNumber(",
          "content_same": false
        },
        {
          "line": 3136,
          "old_api": null,
          "new_api": "pfree",
          "old_text": null,
          "new_text": "pfree(scankeys)",
          "old_line_content": "\tif (scankeys)",
          "new_line_content": "\t\tpfree(scankeys);",
          "content_same": false
        },
        {
          "line": 1099,
          "old_api": null,
          "new_api": "CharGetDatum",
          "old_text": null,
          "new_text": "CharGetDatum(0)",
          "old_line_content": "\t\tPerColumn *column = &row_compressor->per_column[col];",
          "new_line_content": "\t\tDatum datum = CharGetDatum(0);",
          "content_same": false
        },
        {
          "line": 3149,
          "old_api": null,
          "new_api": "makeNode",
          "old_text": null,
          "new_text": "makeNode(IndexScan)",
          "old_line_content": "{",
          "new_line_content": "\tIndexScan *node = makeNode(IndexScan);",
          "content_same": false
        },
        {
          "line": 1105,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(column->compressor == NULL)",
          "old_line_content": "",
          "new_line_content": "\t\tAssert(column->compressor == NULL);",
          "content_same": false
        },
        {
          "line": 1107,
          "old_api": null,
          "new_api": "AttrOffsetGetAttrNumber",
          "old_text": null,
          "new_text": "AttrOffsetGetAttrNumber(col)",
          "old_line_content": "",
          "new_line_content": "\t\tdatum = slot_getattr(row, AttrOffsetGetAttrNumber(col), &is_null);",
          "content_same": false
        },
        {
          "line": 1109,
          "old_api": null,
          "new_api": "segment_info_datum_is_in_group",
          "old_text": null,
          "new_text": "segment_info_datum_is_in_group(column->segment_info, datum, is_null)",
          "old_line_content": "",
          "new_line_content": "\t\tif (!segment_info_datum_is_in_group(column->segment_info, datum, is_null))",
          "content_same": false
        },
        {
          "line": 3159,
          "old_api": null,
          "new_api": "makeNode",
          "old_text": null,
          "new_text": "makeNode(IndexScanState)",
          "old_line_content": "\tIndexScanState *indexstate;",
          "new_line_content": "\tindexstate = makeNode(IndexScanState);",
          "content_same": false
        },
        {
          "line": 3164,
          "old_api": null,
          "new_api": "ExecIndexBuildScanKeys",
          "old_text": null,
          "new_text": "ExecIndexBuildScanKeys((PlanState *) indexstate,\n\t\t\t\t\t\t   indexstate->iss_RelationDesc,\n\t\t\t\t\t\t   node->indexqual,\n\t\t\t\t\t\t   false,\n\t\t\t\t\t\t   &indexstate->iss_ScanKeys,\n\t\t\t\t\t\t   &indexstate->iss_NumScanKeys,\n\t\t\t\t\t\t   &indexstate->iss_RuntimeKeys,\n\t\t\t\t\t\t   &indexstate->iss_NumRuntimeKeys,\n\t\t\t\t\t\t   NULL, /* no ArrayKeys */\n\t\t\t\t\t\t   NULL)",
          "old_line_content": "",
          "new_line_content": "\tExecIndexBuildScanKeys((PlanState *) indexstate,",
          "content_same": false
        },
        {
          "line": 1133,
          "old_api": null,
          "new_api": "AttrOffsetGetAttrNumber",
          "old_text": null,
          "new_text": "AttrOffsetGetAttrNumber(col)",
          "old_line_content": "\t\t */",
          "new_line_content": "\t\tval = slot_getattr(row, AttrOffsetGetAttrNumber(col), &is_null);",
          "content_same": false
        },
        {
          "line": 1136,
          "old_api": null,
          "new_api": "append_null",
          "old_text": null,
          "new_text": "compressor->append_null(compressor)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\tcompressor->append_null(compressor);",
          "content_same": false
        },
        {
          "line": 1138,
          "old_api": null,
          "new_api": "segment_meta_min_max_builder_update_null",
          "old_text": null,
          "new_text": "segment_meta_min_max_builder_update_null(\n\t\t\t\t\trow_compressor->per_column[col].min_max_metadata_builder)",
          "old_line_content": "\t\t\tif (row_compressor->per_column[col].min_max_metadata_builder != NULL)",
          "new_line_content": "\t\t\t\tsegment_meta_min_max_builder_update_null(",
          "content_same": false
        },
        {
          "line": 1143,
          "old_api": null,
          "new_api": "append_val",
          "old_text": null,
          "new_text": "compressor->append_val(compressor, val)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\tcompressor->append_val(compressor, val);",
          "content_same": false
        },
        {
          "line": 1145,
          "old_api": null,
          "new_api": "segment_meta_min_max_builder_update_val",
          "old_text": null,
          "new_text": "segment_meta_min_max_builder_update_val(row_compressor->per_column[col]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.min_max_metadata_builder,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tval)",
          "old_line_content": "\t\t\tif (row_compressor->per_column[col].min_max_metadata_builder != NULL)",
          "new_line_content": "\t\t\t\tsegment_meta_min_max_builder_update_val(row_compressor->per_column[col]",
          "content_same": false
        },
        {
          "line": 3196,
          "old_api": null,
          "new_api": "GetTransactionSnapshot",
          "old_text": null,
          "new_text": "GetTransactionSnapshot()",
          "old_line_content": "",
          "new_line_content": "\tsnapshot = GetTransactionSnapshot();",
          "content_same": false
        },
        {
          "line": 3198,
          "old_api": null,
          "new_api": "index_beginscan",
          "old_text": null,
          "new_text": "index_beginscan(decompressor->in_rel, index_rel, snapshot, num_index_scankeys, 0)",
          "old_line_content": "\tIndexScanDesc scan =",
          "new_line_content": "\t\tindex_beginscan(decompressor->in_rel, index_rel, snapshot, num_index_scankeys, 0);",
          "content_same": false
        },
        {
          "line": 3205,
          "old_api": null,
          "new_api": "slot_getallattrs",
          "old_text": null,
          "new_text": "slot_getallattrs(slot)",
          "old_line_content": "\t\t/* Deconstruct the tuple */",
          "new_line_content": "\t\tslot_getallattrs(slot);",
          "content_same": false
        },
        {
          "line": 3207,
          "old_api": null,
          "new_api": "heap_form_tuple",
          "old_text": null,
          "new_text": "heap_form_tuple(slot->tts_tupleDescriptor, slot->tts_values, slot->tts_isnull)",
          "old_line_content": "\t\tcompressed_tuple =",
          "new_line_content": "\t\t\theap_form_tuple(slot->tts_tupleDescriptor, slot->tts_values, slot->tts_isnull);",
          "content_same": false
        },
        {
          "line": 3215,
          "old_api": null,
          "new_api": "HeapKeyTest",
          "old_text": null,
          "new_text": "HeapKeyTest(compressed_tuple,\n\t\t\t\t\t\tRelationGetDescr(decompressor->in_rel),\n\t\t\t\t\t\tnum_scankeys,\n\t\t\t\t\t\tscankeys,\n\t\t\t\t\t\tvalid)",
          "old_line_content": "#if PG16_LT",
          "new_line_content": "\t\t\tHeapKeyTest(compressed_tuple,",
          "content_same": false
        },
        {
          "line": 1171,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(compressed_col >= 0)",
          "old_line_content": "",
          "new_line_content": "\t\tAssert(compressed_col >= 0);",
          "content_same": false
        },
        {
          "line": 3221,
          "old_api": null,
          "new_api": "HeapKeyTest",
          "old_text": null,
          "new_text": "HeapKeyTest(compressed_tuple,\n\t\t\t\t\t\t\t\tRelationGetDescr(decompressor->in_rel),\n\t\t\t\t\t\t\t\tnum_scankeys,\n\t\t\t\t\t\t\t\tscankeys)",
          "old_line_content": "#else",
          "new_line_content": "\t\t\tvalid = HeapKeyTest(compressed_tuple,",
          "content_same": false
        },
        {
          "line": 1176,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(column->segment_info == NULL)",
          "old_line_content": "\t\t\tvoid *compressed_data;",
          "new_line_content": "\t\t\tAssert(column->segment_info == NULL);",
          "content_same": false
        },
        {
          "line": 1178,
          "old_api": null,
          "new_api": "finish",
          "old_text": null,
          "new_text": "compressor->finish(compressor)",
          "old_line_content": "",
          "new_line_content": "\t\t\tcompressed_data = compressor->finish(compressor);",
          "content_same": false
        },
        {
          "line": 1184,
          "old_api": null,
          "new_api": "PointerGetDatum",
          "old_text": null,
          "new_text": "PointerGetDatum(compressed_data)",
          "old_line_content": "\t\t\t\trow_compressor->compressed_values[compressed_col] =",
          "new_line_content": "\t\t\t\t\tPointerGetDatum(compressed_data);",
          "content_same": false
        },
        {
          "line": 3232,
          "old_api": null,
          "new_api": "heap_deform_tuple",
          "old_text": null,
          "new_text": "heap_deform_tuple(compressed_tuple,\n\t\t\t\t\t\t  decompressor->in_desc,\n\t\t\t\t\t\t  decompressor->compressed_datums,\n\t\t\t\t\t\t  decompressor->compressed_is_nulls)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\theap_deform_tuple(compressed_tuple,",
          "content_same": false
        },
        {
          "line": 1188,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(column->min_metadata_attr_offset >= 0)",
          "old_line_content": "\t\t\t{",
          "new_line_content": "\t\t\t\tAssert(column->min_metadata_attr_offset >= 0);",
          "content_same": false
        },
        {
          "line": 3237,
          "old_api": null,
          "new_api": "delete_compressed_tuple",
          "old_text": null,
          "new_text": "delete_compressed_tuple(decompressor, compressed_tuple)",
          "old_line_content": "",
          "new_line_content": "\t\tresult = delete_compressed_tuple(decompressor, compressed_tuple);",
          "content_same": false
        },
        {
          "line": 1191,
          "old_api": null,
          "new_api": "segment_meta_min_max_builder_empty",
          "old_text": null,
          "new_text": "segment_meta_min_max_builder_empty(column->min_max_metadata_builder)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tif (!segment_meta_min_max_builder_empty(column->min_max_metadata_builder))",
          "content_same": false
        },
        {
          "line": 3239,
          "old_api": null,
          "new_api": "IsolationUsesXactSnapshot",
          "old_text": null,
          "new_text": "IsolationUsesXactSnapshot()",
          "old_line_content": "\t\t/* skip reporting error if isolation level is < Repeatable Read */",
          "new_line_content": "\t\tif (result == TM_Deleted && !IsolationUsesXactSnapshot())",
          "content_same": false
        },
        {
          "line": 1193,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(compressed_data != NULL)",
          "old_line_content": "\t\t\t\t{",
          "new_line_content": "\t\t\t\t\tAssert(compressed_data != NULL);",
          "content_same": false
        },
        {
          "line": 3243,
          "old_api": null,
          "new_api": "heap_freetuple",
          "old_text": null,
          "new_text": "heap_freetuple(compressed_tuple)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\theap_freetuple(compressed_tuple);",
          "content_same": false
        },
        {
          "line": 1198,
          "old_api": null,
          "new_api": "segment_meta_min_max_builder_min",
          "old_text": null,
          "new_text": "segment_meta_min_max_builder_min(column->min_max_metadata_builder)",
          "old_line_content": "\t\t\t\t\trow_compressor->compressed_values[column->min_metadata_attr_offset] =",
          "new_line_content": "\t\t\t\t\t\tsegment_meta_min_max_builder_min(column->min_max_metadata_builder);",
          "content_same": false
        },
        {
          "line": 1200,
          "old_api": null,
          "new_api": "segment_meta_min_max_builder_max",
          "old_text": null,
          "new_text": "segment_meta_min_max_builder_max(column->min_max_metadata_builder)",
          "old_line_content": "\t\t\t\t\trow_compressor->compressed_values[column->max_metadata_attr_offset] =",
          "new_line_content": "\t\t\t\t\t\tsegment_meta_min_max_builder_max(column->min_max_metadata_builder);",
          "content_same": false
        },
        {
          "line": 3248,
          "old_api": null,
          "new_api": "row_decompressor_decompress_row_to_table",
          "old_text": null,
          "new_text": "row_decompressor_decompress_row_to_table(decompressor)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\trow_decompressor_decompress_row_to_table(decompressor);",
          "content_same": false
        },
        {
          "line": 1204,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(compressed_data == NULL)",
          "old_line_content": "\t\t\t\t{",
          "new_line_content": "\t\t\t\t\tAssert(compressed_data == NULL);",
          "content_same": false
        },
        {
          "line": 3255,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(INFO,\n\t\t\t \"Number of compressed rows fetched from index: %d. \"\n\t\t\t \"Number of compressed rows filtered by orderby columns: %d.\",\n\t\t\t num_segmentby_filtered_rows,\n\t\t\t num_orderby_filtered_rows)",
          "old_line_content": "\t{",
          "new_line_content": "\t\telog(INFO,",
          "content_same": false
        },
        {
          "line": 3262,
          "old_api": null,
          "new_api": "ExecDropSingleTupleTableSlot",
          "old_text": null,
          "new_text": "ExecDropSingleTupleTableSlot(slot)",
          "old_line_content": "",
          "new_line_content": "\tExecDropSingleTupleTableSlot(slot);",
          "content_same": false
        },
        {
          "line": 1218,
          "old_api": null,
          "new_api": "Int32GetDatum",
          "old_text": null,
          "new_text": "Int32GetDatum(row_compressor->rows_compressed_into_current_value)",
          "old_line_content": "\trow_compressor->compressed_values[row_compressor->count_metadata_column_offset] =",
          "new_line_content": "\t\tInt32GetDatum(row_compressor->rows_compressed_into_current_value);",
          "content_same": false
        },
        {
          "line": 1222,
          "old_api": null,
          "new_api": "Int32GetDatum",
          "old_text": null,
          "new_text": "Int32GetDatum(row_compressor->sequence_num)",
          "old_line_content": "\trow_compressor->compressed_values[row_compressor->sequence_num_metadata_column_offset] =",
          "new_line_content": "\t\tInt32GetDatum(row_compressor->sequence_num);",
          "content_same": false
        },
        {
          "line": 1227,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"sequence id overflow\")",
          "old_line_content": "\tif (row_compressor->sequence_num > PG_INT32_MAX - SEQUENCE_NUM_GAP)",
          "new_line_content": "\t\telog(ERROR, \"sequence id overflow\");",
          "content_same": false
        },
        {
          "line": 1231,
          "old_api": null,
          "new_api": "RelationGetDescr",
          "old_text": null,
          "new_text": "RelationGetDescr(row_compressor->compressed_table)",
          "old_line_content": "",
          "new_line_content": "\tcompressed_tuple = heap_form_tuple(RelationGetDescr(row_compressor->compressed_table),",
          "content_same": false
        },
        {
          "line": 1234,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(row_compressor->bistate != NULL)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t   row_compressor->compressed_is_null);",
          "new_line_content": "\tAssert(row_compressor->bistate != NULL);",
          "content_same": false
        },
        {
          "line": 1242,
          "old_api": null,
          "new_api": "ts_catalog_index_insert",
          "old_text": null,
          "new_text": "ts_catalog_index_insert(row_compressor->resultRelInfo, compressed_tuple)",
          "old_line_content": "\t{",
          "new_line_content": "\t\tts_catalog_index_insert(row_compressor->resultRelInfo, compressed_tuple);",
          "content_same": false
        },
        {
          "line": 1245,
          "old_api": null,
          "new_api": "heap_freetuple",
          "old_text": null,
          "new_text": "heap_freetuple(compressed_tuple)",
          "old_line_content": "",
          "new_line_content": "\theap_freetuple(compressed_tuple);",
          "content_same": false
        },
        {
          "line": 3300,
          "old_api": null,
          "new_api": "fill_predicate_context",
          "old_text": null,
          "new_text": "fill_predicate_context(chunk,\n\t\t\t\t\t\t   predicates,\n\t\t\t\t\t\t   &filters,\n\t\t\t\t\t\t   &index_filters,\n\t\t\t\t\t\t   &segmentby_predicates,\n\t\t\t\t\t\t   &is_null)",
          "old_line_content": "",
          "new_line_content": "\tfill_predicate_context(chunk,",
          "content_same": false
        },
        {
          "line": 1257,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(compressed_col >= 0)",
          "old_line_content": "\t\tcompressed_col = row_compressor->uncompressed_col_to_compressed_col[col];",
          "new_line_content": "\t\tAssert(compressed_col >= 0);",
          "content_same": false
        },
        {
          "line": 3307,
          "old_api": null,
          "new_api": "table_open",
          "old_text": null,
          "new_text": "table_open(chunk->table_id, RowExclusiveLock)",
          "old_line_content": "",
          "new_line_content": "\tchunk_rel = table_open(chunk->table_id, RowExclusiveLock);",
          "content_same": false
        },
        {
          "line": 3312,
          "old_api": null,
          "new_api": "write_logical_replication_msg_decompression_start",
          "old_text": null,
          "new_text": "write_logical_replication_msg_decompression_start()",
          "old_line_content": "",
          "new_line_content": "\twrite_logical_replication_msg_decompression_start();",
          "content_same": false
        },
        {
          "line": 1266,
          "old_api": null,
          "new_api": "DatumGetPointer",
          "old_text": null,
          "new_text": "DatumGetPointer(row_compressor->compressed_values[compressed_col])",
          "old_line_content": "\t\tif (column->compressor != NULL || !column->segment_info->typ_by_val)",
          "new_line_content": "\t\t\tpfree(DatumGetPointer(row_compressor->compressed_values[compressed_col]));",
          "content_same": false
        },
        {
          "line": 3316,
          "old_api": null,
          "new_api": "build_update_delete_scankeys",
          "old_text": null,
          "new_text": "build_update_delete_scankeys(&decompressor, filters, &num_scankeys, &null_columns)",
          "old_line_content": "\t\tscankeys =",
          "new_line_content": "\t\t\tbuild_update_delete_scankeys(&decompressor, filters, &num_scankeys, &null_columns);",
          "content_same": false
        },
        {
          "line": 3321,
          "old_api": null,
          "new_api": "find_matching_index",
          "old_text": null,
          "new_text": "find_matching_index(comp_chunk_rel, index_filters)",
          "old_line_content": "\t\tList *ordered_index_filters = NIL;",
          "new_line_content": "\t\tRelation matching_index_rel = find_matching_index(comp_chunk_rel, index_filters);",
          "content_same": false
        },
        {
          "line": 3327,
          "old_api": null,
          "new_api": "build_index_scankeys",
          "old_text": null,
          "new_text": "build_index_scankeys(decompressor.in_rel,\n\t\t\t\t\t\t\t\t\t\t\t  matching_index_rel,\n\t\t\t\t\t\t\t\t\t\t\t  ordered_index_filters,\n\t\t\t\t\t\t\t\t\t\t\t  &num_index_scankeys,\n\t\t\t\t\t\t\t\t\t\t\t  estate)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  index_filters);",
          "new_line_content": "\t\tindex_scankeys = build_index_scankeys(decompressor.in_rel,",
          "content_same": false
        },
        {
          "line": 1281,
          "old_api": null,
          "new_api": "segment_meta_min_max_builder_reset",
          "old_text": null,
          "new_text": "segment_meta_min_max_builder_reset(column->min_max_metadata_builder)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\tsegment_meta_min_max_builder_reset(column->min_max_metadata_builder);",
          "content_same": false
        },
        {
          "line": 3332,
          "old_api": null,
          "new_api": "decompress_batches_using_index",
          "old_text": null,
          "new_text": "decompress_batches_using_index(&decompressor,\n\t\t\t\t\t\t\t\t\t   matching_index_rel,\n\t\t\t\t\t\t\t\t\t   index_scankeys,\n\t\t\t\t\t\t\t\t\t   num_index_scankeys,\n\t\t\t\t\t\t\t\t\t   scankeys,\n\t\t\t\t\t\t\t\t\t   num_scankeys,\n\t\t\t\t\t\t\t\t\t   &chunk_status_changed)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t\t  estate);",
          "new_line_content": "\t\tdecompress_batches_using_index(&decompressor,",
          "content_same": false
        },
        {
          "line": 1291,
          "old_api": null,
          "new_api": "MemoryContextReset",
          "old_text": null,
          "new_text": "MemoryContextReset(row_compressor->per_row_ctx)",
          "old_line_content": "",
          "new_line_content": "\tMemoryContextReset(row_compressor->per_row_ctx);",
          "content_same": false
        },
        {
          "line": 3340,
          "old_api": null,
          "new_api": "index_close",
          "old_text": null,
          "new_text": "index_close(matching_index_rel, AccessShareLock)",
          "old_line_content": "\t\t/* close the selected index */",
          "new_line_content": "\t\tindex_close(matching_index_rel, AccessShareLock);",
          "content_same": false
        },
        {
          "line": 3344,
          "old_api": null,
          "new_api": "decompress_batches",
          "old_text": null,
          "new_text": "decompress_batches(&decompressor,\n\t\t\t\t\t\t   scankeys,\n\t\t\t\t\t\t   num_scankeys,\n\t\t\t\t\t\t   null_columns,\n\t\t\t\t\t\t   is_null,\n\t\t\t\t\t\t   &chunk_status_changed)",
          "old_line_content": "\t{",
          "new_line_content": "\t\tdecompress_batches(&decompressor,",
          "content_same": false
        },
        {
          "line": 1298,
          "old_api": null,
          "new_api": "FreeBulkInsertState",
          "old_text": null,
          "new_text": "FreeBulkInsertState(row_compressor->bistate)",
          "old_line_content": "\tif (row_compressor->bistate)",
          "new_line_content": "\t\tFreeBulkInsertState(row_compressor->bistate);",
          "content_same": false
        },
        {
          "line": 3351,
          "old_api": null,
          "new_api": "write_logical_replication_msg_decompression_end",
          "old_text": null,
          "new_text": "write_logical_replication_msg_decompression_end()",
          "old_line_content": "\t}",
          "new_line_content": "\twrite_logical_replication_msg_decompression_end();",
          "content_same": false
        },
        {
          "line": 1309,
          "old_api": null,
          "new_api": "lookup_type_cache",
          "old_text": null,
          "new_text": "lookup_type_cache(column_attr->atttypid, TYPECACHE_EQ_OPR_FINFO)",
          "old_line_content": "{",
          "new_line_content": "\tTypeCacheEntry *tce = lookup_type_cache(column_attr->atttypid, TYPECACHE_EQ_OPR_FINFO);",
          "content_same": false
        },
        {
          "line": 3358,
          "old_api": null,
          "new_api": "ts_chunk_set_partial",
          "old_text": null,
          "new_text": "ts_chunk_set_partial(chunk)",
          "old_line_content": "\tif (chunk_status_changed == true)",
          "new_line_content": "\t\tts_chunk_set_partial(chunk);",
          "content_same": false
        },
        {
          "line": 1311,
          "old_api": null,
          "new_api": "OidIsValid",
          "old_text": null,
          "new_text": "OidIsValid(tce->eq_opr_finfo.fn_oid)",
          "old_line_content": "",
          "new_line_content": "\tif (!OidIsValid(tce->eq_opr_finfo.fn_oid))",
          "content_same": false
        },
        {
          "line": 3360,
          "old_api": null,
          "new_api": "ts_catalog_close_indexes",
          "old_text": null,
          "new_text": "ts_catalog_close_indexes(decompressor.indexstate)",
          "old_line_content": "",
          "new_line_content": "\tts_catalog_close_indexes(decompressor.indexstate);",
          "content_same": false
        },
        {
          "line": 1314,
          "old_api": null,
          "new_api": "palloc",
          "old_text": null,
          "new_text": "palloc(sizeof(*segment_info))",
          "old_line_content": "",
          "new_line_content": "\tSegmentInfo *segment_info = palloc(sizeof(*segment_info));",
          "content_same": false
        },
        {
          "line": 3364,
          "old_api": null,
          "new_api": "table_close",
          "old_text": null,
          "new_text": "table_close(chunk_rel, NoLock)",
          "old_line_content": "",
          "new_line_content": "\ttable_close(chunk_rel, NoLock);",
          "content_same": false
        },
        {
          "line": 1321,
          "old_api": null,
          "new_api": "fmgr_info_cxt",
          "old_text": null,
          "new_text": "fmgr_info_cxt(tce->eq_opr_finfo.fn_oid, &segment_info->eq_fn, CurrentMemoryContext)",
          "old_line_content": "",
          "new_line_content": "\tfmgr_info_cxt(tce->eq_opr_finfo.fn_oid, &segment_info->eq_fn, CurrentMemoryContext);",
          "content_same": false
        },
        {
          "line": 3369,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(lc)",
          "old_line_content": "\t{",
          "new_line_content": "\t\tfilter = lfirst(lc);",
          "content_same": false
        },
        {
          "line": 1323,
          "old_api": null,
          "new_api": "HEAP_FCINFO",
          "old_text": null,
          "new_text": "HEAP_FCINFO(2)",
          "old_line_content": "",
          "new_line_content": "\tsegment_info->eq_fcinfo = HEAP_FCINFO(2);",
          "content_same": false
        },
        {
          "line": 1325,
          "old_api": null,
          "new_api": "InitFunctionCallInfoData",
          "old_text": null,
          "new_text": "InitFunctionCallInfoData(*segment_info->eq_fcinfo,\n\t\t\t\t\t\t\t &segment_info->eq_fn /*=Flinfo*/,\n\t\t\t\t\t\t\t 2 /*=Nargs*/,\n\t\t\t\t\t\t\t column_attr->attcollation /*=Collation*/,\n\t\t\t\t\t\t\t NULL, /*=Context*/\n\t\t\t\t\t\t\t NULL  /*=ResultInfo*/\n\t)",
          "old_line_content": "\tsegment_info->collation = column_attr->attcollation;",
          "new_line_content": "\tInitFunctionCallInfoData(*segment_info->eq_fcinfo,",
          "content_same": false
        },
        {
          "line": 1343,
          "old_api": null,
          "new_api": "datumCopy",
          "old_text": null,
          "new_text": "datumCopy(val, segment_info->typ_by_val, segment_info->typlen)",
          "old_line_content": "\telse",
          "new_line_content": "\t\tsegment_info->val = datumCopy(val, segment_info->typ_by_val, segment_info->typlen);",
          "content_same": false
        },
        {
          "line": 3394,
          "old_api": null,
          "new_api": "castNode",
          "old_text": null,
          "new_text": "castNode(CustomScanState, ht_state)",
          "old_line_content": "\tModifyTableState *ps =",
          "new_line_content": "\t\tlinitial_node(ModifyTableState, castNode(CustomScanState, ht_state)->custom_ps);",
          "content_same": false
        },
        {
          "line": 3398,
          "old_api": null,
          "new_api": "castNode",
          "old_text": null,
          "new_text": "castNode(ModifyTable, ps->ps.plan)",
          "old_line_content": "\t\t.ht_state = ht_state,",
          "new_line_content": "\t\t.relids = castNode(ModifyTable, ps->ps.plan)->resultRelations,",
          "content_same": false
        },
        {
          "line": 3400,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(ctx.relids)",
          "old_line_content": "\t};",
          "new_line_content": "\tAssert(ctx.relids);",
          "content_same": false
        },
        {
          "line": 3402,
          "old_api": null,
          "new_api": "decompress_chunk_walker",
          "old_text": null,
          "new_text": "decompress_chunk_walker(&ps->ps, &ctx)",
          "old_line_content": "",
          "new_line_content": "\treturn decompress_chunk_walker(&ps->ps, &ctx);",
          "content_same": false
        },
        {
          "line": 1362,
          "old_api": null,
          "new_api": "FC_SET_ARG",
          "old_text": null,
          "new_text": "FC_SET_ARG(eq_fcinfo, 0, segment_info->val)",
          "old_line_content": "",
          "new_line_content": "\tFC_SET_ARG(eq_fcinfo, 0, segment_info->val);",
          "content_same": false
        },
        {
          "line": 1365,
          "old_api": null,
          "new_api": "FunctionCallInvoke",
          "old_text": null,
          "new_text": "FunctionCallInvoke(eq_fcinfo)",
          "old_line_content": "",
          "new_line_content": "\tdata_is_eq = FunctionCallInvoke(eq_fcinfo);",
          "content_same": false
        },
        {
          "line": 3416,
          "old_api": null,
          "new_api": "nodeTag",
          "old_text": null,
          "new_text": "nodeTag(ps)",
          "old_line_content": "",
          "new_line_content": "\tswitch (nodeTag(ps))",
          "content_same": false
        },
        {
          "line": 1370,
          "old_api": null,
          "new_api": "DatumGetBool",
          "old_text": null,
          "new_text": "DatumGetBool(data_is_eq)",
          "old_line_content": "",
          "new_line_content": "\treturn DatumGetBool(data_is_eq);",
          "content_same": false
        },
        {
          "line": 3427,
          "old_api": null,
          "new_api": "list_union",
          "old_text": null,
          "new_text": "list_union(((IndexScan *) ps->plan)->indexqualorig, ps->plan->qual)",
          "old_line_content": "\t\t\t */",
          "new_line_content": "\t\t\tpredicates = list_union(((IndexScan *) ps->plan)->indexqualorig, ps->plan->qual);",
          "content_same": false
        },
        {
          "line": 1380,
          "old_api": null,
          "new_api": "RelationGetDescr",
          "old_text": null,
          "new_text": "RelationGetDescr(in_rel)",
          "old_line_content": "{",
          "new_line_content": "\tTupleDesc in_desc = RelationGetDescr(in_rel);",
          "content_same": false
        },
        {
          "line": 3432,
          "old_api": null,
          "new_api": "list_union",
          "old_text": null,
          "new_text": "list_union(((BitmapHeapScan *) ps->plan)->bitmapqualorig, ps->plan->qual)",
          "old_line_content": "\t\tcase T_BitmapHeapScanState:",
          "new_line_content": "\t\t\tpredicates = list_union(((BitmapHeapScan *) ps->plan)->bitmapqualorig, ps->plan->qual);",
          "content_same": false
        },
        {
          "line": 1391,
          "old_api": null,
          "new_api": "ts_catalog_open_indexes",
          "old_text": null,
          "new_text": "ts_catalog_open_indexes(out_rel)",
          "old_line_content": "\t\t.out_rel = out_rel,",
          "new_line_content": "\t\t.indexstate = ts_catalog_open_indexes(out_rel),",
          "content_same": false
        },
        {
          "line": 1393,
          "old_api": null,
          "new_api": "GetCurrentCommandId",
          "old_text": null,
          "new_text": "GetCurrentCommandId(true)",
          "old_line_content": "",
          "new_line_content": "\t\t.mycid = GetCurrentCommandId(true),",
          "content_same": false
        },
        {
          "line": 3441,
          "old_api": null,
          "new_api": "list_copy",
          "old_text": null,
          "new_text": "list_copy(ps->plan->qual)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\tpredicates = list_copy(ps->plan->qual);",
          "content_same": false
        },
        {
          "line": 1396,
          "old_api": null,
          "new_api": "palloc",
          "old_text": null,
          "new_text": "palloc(sizeof(Datum) * in_desc->natts)",
          "old_line_content": "",
          "new_line_content": "\t\t.compressed_datums = palloc(sizeof(Datum) * in_desc->natts),",
          "content_same": false
        },
        {
          "line": 1400,
          "old_api": null,
          "new_api": "palloc",
          "old_text": null,
          "new_text": "palloc(sizeof(Datum) * out_desc->natts)",
          "old_line_content": "\t\t/* cache memory used to store the decompressed datums/is_null for form_tuple */",
          "new_line_content": "\t\t.decompressed_datums = palloc(sizeof(Datum) * out_desc->natts),",
          "content_same": false
        },
        {
          "line": 1403,
          "old_api": null,
          "new_api": "AllocSetContextCreate",
          "old_text": null,
          "new_text": "AllocSetContextCreate(CurrentMemoryContext,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"decompress chunk per-compressed row\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tALLOCSET_DEFAULT_SIZES)",
          "old_line_content": "",
          "new_line_content": "\t\t.per_compressed_row_ctx = AllocSetContextCreate(CurrentMemoryContext,",
          "content_same": false
        },
        {
          "line": 1406,
          "old_api": null,
          "new_api": "CreateExecutorState",
          "old_text": null,
          "new_text": "CreateExecutorState()",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t\tALLOCSET_DEFAULT_SIZES),",
          "new_line_content": "\t\t.estate = CreateExecutorState(),",
          "content_same": false
        },
        {
          "line": 1408,
          "old_api": null,
          "new_api": "palloc0",
          "old_text": null,
          "new_text": "palloc0(sizeof(void *) * GLOBAL_MAX_ROWS_PER_COMPRESSION)",
          "old_line_content": "",
          "new_line_content": "\t\t.decompressed_slots = palloc0(sizeof(void *) * GLOBAL_MAX_ROWS_PER_COMPRESSION),",
          "content_same": false
        },
        {
          "line": 3456,
          "old_api": null,
          "new_api": "list_member_int",
          "old_text": null,
          "new_text": "list_member_int(ctx->relids, scanrelid)",
          "old_line_content": "\t\tint scanrelid = ((Scan *) ps->plan)->scanrelid;",
          "new_line_content": "\t\tif (list_member_int(ctx->relids, scanrelid))",
          "content_same": false
        },
        {
          "line": 3458,
          "old_api": null,
          "new_api": "rt_fetch",
          "old_text": null,
          "new_text": "rt_fetch(scanrelid, ps->state->es_range_table)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\trte = rt_fetch(scanrelid, ps->state->es_range_table);",
          "content_same": false
        },
        {
          "line": 1411,
          "old_api": null,
          "new_api": "create_per_compressed_column",
          "old_text": null,
          "new_text": "create_per_compressed_column(&decompressor)",
          "old_line_content": "",
          "new_line_content": "\tcreate_per_compressed_column(&decompressor);",
          "content_same": false
        },
        {
          "line": 3463,
          "old_api": null,
          "new_api": "ereport",
          "old_text": null,
          "new_text": "ereport(ERROR,\n\t\t\t\t\t\t\t(errcode(ERRCODE_FEATURE_NOT_SUPPORTED),\n\t\t\t\t\t\t\t errmsg(\"UPDATE/DELETE is disabled on compressed chunks\"),\n\t\t\t\t\t\t\t errhint(\"Set timescaledb.enable_dml_decompression to TRUE.\")))",
          "old_line_content": "\t\t\t\tif (!ts_guc_enable_dml_decompression)",
          "new_line_content": "\t\t\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 1419,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(decompressor.decompressed_is_nulls, true, out_desc->natts)",
          "old_line_content": "\t */",
          "new_line_content": "\tmemset(decompressor.decompressed_is_nulls, true, out_desc->natts);",
          "content_same": false
        },
        {
          "line": 3468,
          "old_api": null,
          "new_api": "decompress_batches_for_update_delete",
          "old_text": null,
          "new_text": "decompress_batches_for_update_delete(ctx->ht_state,\n\t\t\t\t\t\t\t\t\t\t\t\t\t current_chunk,\n\t\t\t\t\t\t\t\t\t\t\t\t\t predicates,\n\t\t\t\t\t\t\t\t\t\t\t\t\t ps->state)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tdecompress_batches_for_update_delete(ctx->ht_state,",
          "content_same": false
        },
        {
          "line": 3486,
          "old_api": null,
          "new_api": "GetTransactionSnapshot",
          "old_text": null,
          "new_text": "GetTransactionSnapshot()",
          "old_line_content": "\t\t\t\t\t{",
          "new_line_content": "\t\t\t\t\t\tss->ss_currentScanDesc->rs_snapshot = GetTransactionSnapshot();",
          "content_same": false
        },
        {
          "line": 1439,
          "old_api": null,
          "new_api": "table_open",
          "old_text": null,
          "new_text": "table_open(out_table, AccessExclusiveLock)",
          "old_line_content": "\t */",
          "new_line_content": "\tRelation out_rel = table_open(out_table, AccessExclusiveLock);",
          "content_same": false
        },
        {
          "line": 1442,
          "old_api": null,
          "new_api": "build_decompressor",
          "old_text": null,
          "new_text": "build_decompressor(in_rel, out_rel)",
          "old_line_content": "",
          "new_line_content": "\tRowDecompressor decompressor = build_decompressor(in_rel, out_rel);",
          "content_same": false
        },
        {
          "line": 1445,
          "old_api": null,
          "new_api": "GetLatestSnapshot",
          "old_text": null,
          "new_text": "GetLatestSnapshot()",
          "old_line_content": "\tHeapTuple compressed_tuple;",
          "new_line_content": "\tTableScanDesc heapScan = table_beginscan(in_rel, GetLatestSnapshot(), 0, (ScanKey) NULL);",
          "content_same": false
        },
        {
          "line": 1447,
          "old_api": null,
          "new_api": "heap_getnext",
          "old_text": null,
          "new_text": "heap_getnext(heapScan, ForwardScanDirection)",
          "old_line_content": "",
          "new_line_content": "\tfor (compressed_tuple = heap_getnext(heapScan, ForwardScanDirection); compressed_tuple != NULL;",
          "content_same": false
        },
        {
          "line": 3495,
          "old_api": null,
          "new_api": "pfree",
          "old_text": null,
          "new_text": "pfree(predicates)",
          "old_line_content": "\tif (predicates)",
          "new_line_content": "\t\tpfree(predicates);",
          "content_same": false
        },
        {
          "line": 3497,
          "old_api": null,
          "new_api": "planstate_tree_walker",
          "old_text": null,
          "new_text": "planstate_tree_walker(ps, decompress_chunk_walker, ctx)",
          "old_line_content": "",
          "new_line_content": "\treturn planstate_tree_walker(ps, decompress_chunk_walker, ctx);",
          "content_same": false
        },
        {
          "line": 1450,
          "old_api": null,
          "new_api": "HeapTupleIsValid",
          "old_text": null,
          "new_text": "HeapTupleIsValid(compressed_tuple)",
          "old_line_content": "\t{",
          "new_line_content": "\t\tAssert(HeapTupleIsValid(compressed_tuple));",
          "content_same": false
        },
        {
          "line": 1456,
          "old_api": null,
          "new_api": "row_decompressor_decompress_row_to_table",
          "old_text": null,
          "new_text": "row_decompressor_decompress_row_to_table(&decompressor)",
          "old_line_content": "",
          "new_line_content": "\t\trow_decompressor_decompress_row_to_table(&decompressor);",
          "content_same": false
        },
        {
          "line": 1459,
          "old_api": null,
          "new_api": "table_endscan",
          "old_text": null,
          "new_text": "table_endscan(heapScan)",
          "old_line_content": "",
          "new_line_content": "\ttable_endscan(heapScan);",
          "content_same": false
        },
        {
          "line": 1461,
          "old_api": null,
          "new_api": "FreeBulkInsertState",
          "old_text": null,
          "new_text": "FreeBulkInsertState(decompressor.bistate)",
          "old_line_content": "",
          "new_line_content": "\tFreeBulkInsertState(decompressor.bistate);",
          "content_same": false
        },
        {
          "line": 1466,
          "old_api": null,
          "new_api": "table_close",
          "old_text": null,
          "new_text": "table_close(out_rel, NoLock)",
          "old_line_content": "",
          "new_line_content": "\ttable_close(out_rel, NoLock);",
          "content_same": false
        },
        {
          "line": 1473,
          "old_api": null,
          "new_api": "ts_custom_type_cache_get",
          "old_text": null,
          "new_text": "ts_custom_type_cache_get(CUSTOM_TYPE_COMPRESSED_DATA)",
          "old_line_content": "{",
          "new_line_content": "\tOid compressed_data_type_oid = ts_custom_type_cache_get(CUSTOM_TYPE_COMPRESSED_DATA)->type_oid;",
          "content_same": false
        },
        {
          "line": 1477,
          "old_api": null,
          "new_api": "palloc",
          "old_text": null,
          "new_text": "palloc(sizeof(*decompressor->per_compressed_cols) * decompressor->in_desc->natts)",
          "old_line_content": "\tdecompressor->per_compressed_cols =",
          "new_line_content": "\t\tpalloc(sizeof(*decompressor->per_compressed_cols) * decompressor->in_desc->natts);",
          "content_same": false
        },
        {
          "line": 1479,
          "old_api": null,
          "new_api": "OidIsValid",
          "old_text": null,
          "new_text": "OidIsValid(compressed_data_type_oid)",
          "old_line_content": "",
          "new_line_content": "\tAssert(OidIsValid(compressed_data_type_oid));",
          "content_same": false
        },
        {
          "line": 1487,
          "old_api": null,
          "new_api": "TupleDescAttr",
          "old_text": null,
          "new_text": "TupleDescAttr(decompressor->in_desc, col)",
          "old_line_content": "\t\tPerCompressedColumn *per_compressed_col = &decompressor->per_compressed_cols[col];",
          "new_line_content": "\t\tForm_pg_attribute compressed_attr = TupleDescAttr(decompressor->in_desc, col);",
          "content_same": false
        },
        {
          "line": 1500,
          "old_api": null,
          "new_api": "get_attnum",
          "old_text": null,
          "new_text": "get_attnum(decompressor->out_rel->rd_id, col_name)",
          "old_line_content": "\t\t */",
          "new_line_content": "\t\tAttrNumber decompressed_colnum = get_attnum(decompressor->out_rel->rd_id, col_name);",
          "content_same": false
        },
        {
          "line": 1509,
          "old_api": null,
          "new_api": "AttrNumberGetAttrOffset",
          "old_text": null,
          "new_text": "AttrNumberGetAttrOffset(decompressed_colnum)",
          "old_line_content": "",
          "new_line_content": "\t\tdecompressed_column_offset = AttrNumberGetAttrOffset(decompressed_colnum);",
          "content_same": false
        },
        {
          "line": 1512,
          "old_api": null,
          "new_api": "TupleDescAttr",
          "old_text": null,
          "new_text": "TupleDescAttr(decompressor->out_desc, decompressed_column_offset)",
          "old_line_content": "\t\tdecompressed_type =",
          "new_line_content": "\t\t\tTupleDescAttr(decompressor->out_desc, decompressed_column_offset)->atttypid;",
          "content_same": false
        },
        {
          "line": 1517,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR,\n\t\t\t\t \"compressed table type '%s' does not match decompressed table type '%s' for \"\n\t\t\t\t \"segment-by column \\\"%s\\\"\",\n\t\t\t\t format_type_be(compressed_attr->atttypid),\n\t\t\t\t format_type_be(decompressed_type),\n\t\t\t\t col_name)",
          "old_line_content": "\t\tif (!is_compressed && compressed_attr->atttypid != decompressed_type)",
          "new_line_content": "\t\t\telog(ERROR,",
          "content_same": false
        },
        {
          "line": 1520,
          "old_api": null,
          "new_api": "format_type_be",
          "old_text": null,
          "new_text": "format_type_be(compressed_attr->atttypid)",
          "old_line_content": "\t\t\t\t \"segment-by column \\\"%s\\\"\",",
          "new_line_content": "\t\t\t\t format_type_be(compressed_attr->atttypid),",
          "content_same": false
        },
        {
          "line": 1539,
          "old_api": null,
          "new_api": "MemoryContextSwitchTo",
          "old_text": null,
          "new_text": "MemoryContextSwitchTo(decompressor->per_compressed_row_ctx)",
          "old_line_content": "{",
          "new_line_content": "\tMemoryContext old_ctx = MemoryContextSwitchTo(decompressor->per_compressed_row_ctx);",
          "content_same": false
        },
        {
          "line": 1570,
          "old_api": null,
          "new_api": "getmissingattr",
          "old_text": null,
          "new_text": "getmissingattr(decompressor->out_desc,\n\t\t\t\t\t\t\t   output_index + 1,\n\t\t\t\t\t\t\t   &decompressor->decompressed_is_nulls[output_index])",
          "old_line_content": "\t\t\tdecompressor->decompressed_datums[output_index] =",
          "new_line_content": "\t\t\t\tgetmissingattr(decompressor->out_desc,",
          "content_same": false
        },
        {
          "line": 1579,
          "old_api": null,
          "new_api": "get_compressed_data_header",
          "old_text": null,
          "new_text": "get_compressed_data_header(decompressor->compressed_datums[input_column])",
          "old_line_content": "\t\tCompressedDataHeader *header =",
          "new_line_content": "\t\t\tget_compressed_data_header(decompressor->compressed_datums[input_column]);",
          "content_same": false
        },
        {
          "line": 1581,
          "old_api": null,
          "new_api": "iterator_init_forward",
          "old_text": null,
          "new_text": "definitions[header->compression_algorithm]\n\t\t\t\t.iterator_init_forward(PointerGetDatum(header), column_info->decompressed_type)",
          "old_line_content": "\t\tcolumn_info->iterator =",
          "new_line_content": "\t\t\tdefinitions[header->compression_algorithm]",
          "content_same": false
        },
        {
          "line": 1589,
          "old_api": null,
          "new_api": "DatumGetInt32",
          "old_text": null,
          "new_text": "DatumGetInt32(decompressor->compressed_datums[decompressor->count_compressed_attindex])",
          "old_line_content": "\tconst int n_batch_rows =",
          "new_line_content": "\t\tDatumGetInt32(decompressor->compressed_datums[decompressor->count_compressed_attindex]);",
          "content_same": false
        },
        {
          "line": 1605,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(column_info->is_compressed)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\tAssert(column_info->is_compressed);",
          "content_same": false
        },
        {
          "line": 1608,
          "old_api": null,
          "new_api": "try_next",
          "old_text": null,
          "new_text": "column_info->iterator->try_next(column_info->iterator)",
          "old_line_content": "\t\t\tconst int output_index = column_info->decompressed_column_offset;",
          "new_line_content": "\t\t\tconst DecompressResult value = column_info->iterator->try_next(column_info->iterator);",
          "content_same": false
        },
        {
          "line": 1620,
          "old_api": null,
          "new_api": "MemoryContextSwitchTo",
          "old_text": null,
          "new_text": "MemoryContextSwitchTo(old_ctx)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\tMemoryContextSwitchTo(old_ctx);",
          "content_same": false
        },
        {
          "line": 1622,
          "old_api": null,
          "new_api": "MakeSingleTupleTableSlot",
          "old_text": null,
          "new_text": "MakeSingleTupleTableSlot(decompressor->out_desc, &TTSOpsHeapTuple)",
          "old_line_content": "\t\t\tdecompressor->decompressed_slots[current_row] =",
          "new_line_content": "\t\t\t\tMakeSingleTupleTableSlot(decompressor->out_desc, &TTSOpsHeapTuple);",
          "content_same": false
        },
        {
          "line": 1627,
          "old_api": null,
          "new_api": "ExecClearTuple",
          "old_text": null,
          "new_text": "ExecClearTuple(decompressor->decompressed_slots[current_row])",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\tExecClearTuple(decompressor->decompressed_slots[current_row]);",
          "content_same": false
        },
        {
          "line": 1632,
          "old_api": null,
          "new_api": "heap_form_tuple",
          "old_text": null,
          "new_text": "heap_form_tuple(decompressor->out_desc,\n\t\t\t\t\t\t\t\t\t\t\t\t\t   decompressor->decompressed_datums,\n\t\t\t\t\t\t\t\t\t\t\t\t\t   decompressor->decompressed_is_nulls)",
          "old_line_content": "",
          "new_line_content": "\t\tHeapTuple decompressed_tuple = heap_form_tuple(decompressor->out_desc,",
          "content_same": false
        },
        {
          "line": 1637,
          "old_api": null,
          "new_api": "ExecStoreHeapTuple",
          "old_text": null,
          "new_text": "ExecStoreHeapTuple(decompressed_tuple, decompressed_slot, /* should_free = */ false)",
          "old_line_content": "",
          "new_line_content": "\t\tExecStoreHeapTuple(decompressed_tuple, decompressed_slot, /* should_free = */ false);",
          "content_same": false
        },
        {
          "line": 1651,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(column_info->is_compressed)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tAssert(column_info->is_compressed);",
          "content_same": false
        },
        {
          "line": 1655,
          "old_api": null,
          "new_api": "MemoryContextSwitchTo",
          "old_text": null,
          "new_text": "MemoryContextSwitchTo(old_ctx)",
          "old_line_content": "\t}",
          "new_line_content": "\tMemoryContextSwitchTo(old_ctx);",
          "content_same": false
        },
        {
          "line": 1666,
          "old_api": null,
          "new_api": "decompress_batch",
          "old_text": null,
          "new_text": "decompress_batch(decompressor)",
          "old_line_content": "{",
          "new_line_content": "\tconst int n_batch_rows = decompress_batch(decompressor);",
          "content_same": false
        },
        {
          "line": 1668,
          "old_api": null,
          "new_api": "MemoryContextSwitchTo",
          "old_text": null,
          "new_text": "MemoryContextSwitchTo(decompressor->per_compressed_row_ctx)",
          "old_line_content": "",
          "new_line_content": "\tMemoryContext old_ctx = MemoryContextSwitchTo(decompressor->per_compressed_row_ctx);",
          "content_same": false
        },
        {
          "line": 1671,
          "old_api": null,
          "new_api": "table_multi_insert",
          "old_text": null,
          "new_text": "table_multi_insert(decompressor->out_rel,\n\t\t\t\t\t   decompressor->decompressed_slots,\n\t\t\t\t\t   n_batch_rows,\n\t\t\t\t\t   decompressor->mycid,\n\t\t\t\t\t   /* options = */ 0,\n\t\t\t\t\t   decompressor->bistate)",
          "old_line_content": "\t/* Insert all decompressed rows into table using the bulk insert API. */",
          "new_line_content": "\ttable_multi_insert(decompressor->out_rel,",
          "content_same": false
        },
        {
          "line": 1705,
          "old_api": null,
          "new_api": "GetPerTupleExprContext",
          "old_text": null,
          "new_text": "GetPerTupleExprContext(estate)",
          "old_line_content": "\t\t\t\tEState *estate = decompressor->estate;",
          "new_line_content": "\t\t\t\tExprContext *econtext = GetPerTupleExprContext(estate);",
          "content_same": false
        },
        {
          "line": 1712,
          "old_api": null,
          "new_api": "ExecInsertIndexTuplesCompat",
          "old_text": null,
          "new_text": "ExecInsertIndexTuplesCompat(&indexstate_copy,\n\t\t\t\t\t\t\t\t\t\t\tdecompressed_slot,\n\t\t\t\t\t\t\t\t\t\t\testate,\n\t\t\t\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\t\t\t\tNULL,\n\t\t\t\t\t\t\t\t\t\t\tNIL,\n\t\t\t\t\t\t\t\t\t\t\tfalse)",
          "old_line_content": "#endif",
          "new_line_content": "\t\t\t\tExecInsertIndexTuplesCompat(&indexstate_copy,",
          "content_same": false
        },
        {
          "line": 1724,
          "old_api": null,
          "new_api": "MemoryContextSwitchTo",
          "old_text": null,
          "new_text": "MemoryContextSwitchTo(old_ctx)",
          "old_line_content": "",
          "new_line_content": "\tMemoryContextSwitchTo(old_ctx);",
          "content_same": false
        },
        {
          "line": 1732,
          "old_api": null,
          "new_api": "decompress_batch",
          "old_text": null,
          "new_text": "decompress_batch(decompressor)",
          "old_line_content": "{",
          "new_line_content": "\tconst int n_batch_rows = decompress_batch(decompressor);",
          "content_same": false
        },
        {
          "line": 1734,
          "old_api": null,
          "new_api": "MemoryContextSwitchTo",
          "old_text": null,
          "new_text": "MemoryContextSwitchTo(decompressor->per_compressed_row_ctx)",
          "old_line_content": "",
          "new_line_content": "\tMemoryContext old_ctx = MemoryContextSwitchTo(decompressor->per_compressed_row_ctx);",
          "content_same": false
        },
        {
          "line": 1738,
          "old_api": null,
          "new_api": "tuplesort_puttupleslot",
          "old_text": null,
          "new_text": "tuplesort_puttupleslot(tuplesortstate, decompressor->decompressed_slots[i])",
          "old_line_content": "\t{",
          "new_line_content": "\t\ttuplesort_puttupleslot(tuplesortstate, decompressor->decompressed_slots[i]);",
          "content_same": false
        },
        {
          "line": 1741,
          "old_api": null,
          "new_api": "MemoryContextSwitchTo",
          "old_text": null,
          "new_text": "MemoryContextSwitchTo(old_ctx)",
          "old_line_content": "",
          "new_line_content": "\tMemoryContextSwitchTo(old_ctx);",
          "content_same": false
        },
        {
          "line": 1758,
          "old_api": null,
          "new_api": "PG_ARGISNULL",
          "old_text": null,
          "new_text": "PG_ARGISNULL(0)",
          "old_line_content": "",
          "new_line_content": "\tif (PG_ARGISNULL(0))",
          "content_same": false
        },
        {
          "line": 1761,
          "old_api": null,
          "new_api": "SRF_IS_FIRSTCALL",
          "old_text": null,
          "new_text": "SRF_IS_FIRSTCALL()",
          "old_line_content": "",
          "new_line_content": "\tif (SRF_IS_FIRSTCALL())",
          "content_same": false
        },
        {
          "line": 1763,
          "old_api": null,
          "new_api": "SRF_FIRSTCALL_INIT",
          "old_text": null,
          "new_text": "SRF_FIRSTCALL_INIT()",
          "old_line_content": "\t{",
          "new_line_content": "\t\tfuncctx = SRF_FIRSTCALL_INIT();",
          "content_same": false
        },
        {
          "line": 1766,
          "old_api": null,
          "new_api": "PG_GETARG_DATUM",
          "old_text": null,
          "new_text": "PG_GETARG_DATUM(0)",
          "old_line_content": "",
          "new_line_content": "\t\theader = get_compressed_data_header(PG_GETARG_DATUM(0));",
          "content_same": false
        },
        {
          "line": 1768,
          "old_api": null,
          "new_api": "iterator_init_forward",
          "old_text": null,
          "new_text": "definitions[header->compression_algorithm]\n\t\t\t\t   .iterator_init_forward(PointerGetDatum(header),\n\t\t\t\t\t\t\t\t\t\t  get_fn_expr_argtype(fcinfo->flinfo, 1))",
          "old_line_content": "",
          "new_line_content": "\t\titer = definitions[header->compression_algorithm]",
          "content_same": false
        },
        {
          "line": 1773,
          "old_api": null,
          "new_api": "MemoryContextSwitchTo",
          "old_text": null,
          "new_text": "MemoryContextSwitchTo(oldcontext)",
          "old_line_content": "\t\tfuncctx->user_fctx = iter;",
          "new_line_content": "\t\tMemoryContextSwitchTo(oldcontext);",
          "content_same": false
        },
        {
          "line": 1776,
          "old_api": null,
          "new_api": "SRF_PERCALL_SETUP",
          "old_text": null,
          "new_text": "SRF_PERCALL_SETUP()",
          "old_line_content": "",
          "new_line_content": "\tfuncctx = SRF_PERCALL_SETUP();",
          "content_same": false
        },
        {
          "line": 1779,
          "old_api": null,
          "new_api": "try_next",
          "old_text": null,
          "new_text": "iter->try_next(iter)",
          "old_line_content": "\titer = funcctx->user_fctx;",
          "new_line_content": "\tres = iter->try_next(iter);",
          "content_same": false
        },
        {
          "line": 1782,
          "old_api": null,
          "new_api": "SRF_RETURN_DONE",
          "old_text": null,
          "new_text": "SRF_RETURN_DONE(funcctx)",
          "old_line_content": "\tif (res.is_done)",
          "new_line_content": "\t\tSRF_RETURN_DONE(funcctx);",
          "content_same": false
        },
        {
          "line": 1785,
          "old_api": null,
          "new_api": "SRF_RETURN_NEXT_NULL",
          "old_text": null,
          "new_text": "SRF_RETURN_NEXT_NULL(funcctx)",
          "old_line_content": "\tif (res.is_null)",
          "new_line_content": "\t\tSRF_RETURN_NEXT_NULL(funcctx);",
          "content_same": false
        },
        {
          "line": 1787,
          "old_api": null,
          "new_api": "SRF_RETURN_NEXT",
          "old_text": null,
          "new_text": "SRF_RETURN_NEXT(funcctx, res.val)",
          "old_line_content": "",
          "new_line_content": "\tSRF_RETURN_NEXT(funcctx, res.val);",
          "content_same": false
        },
        {
          "line": 1799,
          "old_api": null,
          "new_api": "PG_ARGISNULL",
          "old_text": null,
          "new_text": "PG_ARGISNULL(0)",
          "old_line_content": "",
          "new_line_content": "\tif (PG_ARGISNULL(0))",
          "content_same": false
        },
        {
          "line": 1802,
          "old_api": null,
          "new_api": "SRF_IS_FIRSTCALL",
          "old_text": null,
          "new_text": "SRF_IS_FIRSTCALL()",
          "old_line_content": "",
          "new_line_content": "\tif (SRF_IS_FIRSTCALL())",
          "content_same": false
        },
        {
          "line": 1804,
          "old_api": null,
          "new_api": "SRF_FIRSTCALL_INIT",
          "old_text": null,
          "new_text": "SRF_FIRSTCALL_INIT()",
          "old_line_content": "\t{",
          "new_line_content": "\t\tfuncctx = SRF_FIRSTCALL_INIT();",
          "content_same": false
        },
        {
          "line": 1807,
          "old_api": null,
          "new_api": "PG_GETARG_DATUM",
          "old_text": null,
          "new_text": "PG_GETARG_DATUM(0)",
          "old_line_content": "",
          "new_line_content": "\t\theader = get_compressed_data_header(PG_GETARG_DATUM(0));",
          "content_same": false
        },
        {
          "line": 1809,
          "old_api": null,
          "new_api": "iterator_init_reverse",
          "old_text": null,
          "new_text": "definitions[header->compression_algorithm]\n\t\t\t\t   .iterator_init_reverse(PointerGetDatum(header),\n\t\t\t\t\t\t\t\t\t\t  get_fn_expr_argtype(fcinfo->flinfo, 1))",
          "old_line_content": "",
          "new_line_content": "\t\titer = definitions[header->compression_algorithm]",
          "content_same": false
        },
        {
          "line": 1814,
          "old_api": null,
          "new_api": "MemoryContextSwitchTo",
          "old_text": null,
          "new_text": "MemoryContextSwitchTo(oldcontext)",
          "old_line_content": "\t\tfuncctx->user_fctx = iter;",
          "new_line_content": "\t\tMemoryContextSwitchTo(oldcontext);",
          "content_same": false
        },
        {
          "line": 1817,
          "old_api": null,
          "new_api": "SRF_PERCALL_SETUP",
          "old_text": null,
          "new_text": "SRF_PERCALL_SETUP()",
          "old_line_content": "",
          "new_line_content": "\tfuncctx = SRF_PERCALL_SETUP();",
          "content_same": false
        },
        {
          "line": 1820,
          "old_api": null,
          "new_api": "try_next",
          "old_text": null,
          "new_text": "iter->try_next(iter)",
          "old_line_content": "\titer = funcctx->user_fctx;",
          "new_line_content": "\tres = iter->try_next(iter);",
          "content_same": false
        },
        {
          "line": 1823,
          "old_api": null,
          "new_api": "SRF_RETURN_DONE",
          "old_text": null,
          "new_text": "SRF_RETURN_DONE(funcctx)",
          "old_line_content": "\tif (res.is_done)",
          "new_line_content": "\t\tSRF_RETURN_DONE(funcctx);",
          "content_same": false
        },
        {
          "line": 1826,
          "old_api": null,
          "new_api": "SRF_RETURN_NEXT_NULL",
          "old_text": null,
          "new_text": "SRF_RETURN_NEXT_NULL(funcctx)",
          "old_line_content": "\tif (res.is_null)",
          "new_line_content": "\t\tSRF_RETURN_NEXT_NULL(funcctx);",
          "content_same": false
        },
        {
          "line": 1828,
          "old_api": null,
          "new_api": "SRF_RETURN_NEXT",
          "old_text": null,
          "new_text": "SRF_RETURN_NEXT(funcctx, res.val)",
          "old_line_content": "",
          "new_line_content": "\tSRF_RETURN_NEXT(funcctx, res.val);",
          "content_same": false
        },
        {
          "line": 1835,
          "old_api": null,
          "new_api": "PG_GETARG_DATUM",
          "old_text": null,
          "new_text": "PG_GETARG_DATUM(0)",
          "old_line_content": "{",
          "new_line_content": "\tCompressedDataHeader *header = get_compressed_data_header(PG_GETARG_DATUM(0));",
          "content_same": false
        },
        {
          "line": 1838,
          "old_api": null,
          "new_api": "pq_begintypsend",
          "old_text": null,
          "new_text": "pq_begintypsend(&buf)",
          "old_line_content": "",
          "new_line_content": "\tpq_begintypsend(&buf);",
          "content_same": false
        },
        {
          "line": 1841,
          "old_api": null,
          "new_api": "compressed_data_send",
          "old_text": null,
          "new_text": "definitions[header->compression_algorithm].compressed_data_send(header, &buf)",
          "old_line_content": "",
          "new_line_content": "\tdefinitions[header->compression_algorithm].compressed_data_send(header, &buf);",
          "content_same": false
        },
        {
          "line": 1843,
          "old_api": null,
          "new_api": "pq_endtypsend",
          "old_text": null,
          "new_text": "pq_endtypsend(&buf)",
          "old_line_content": "",
          "new_line_content": "\tPG_RETURN_BYTEA_P(pq_endtypsend(&buf));",
          "content_same": false
        },
        {
          "line": 1849,
          "old_api": null,
          "new_api": "PG_GETARG_POINTER",
          "old_text": null,
          "new_text": "PG_GETARG_POINTER(0)",
          "old_line_content": "{",
          "new_line_content": "\tStringInfo buf = (StringInfo) PG_GETARG_POINTER(0);",
          "content_same": false
        },
        {
          "line": 1852,
          "old_api": null,
          "new_api": "pq_getmsgbyte",
          "old_text": null,
          "new_text": "pq_getmsgbyte(buf)",
          "old_line_content": "",
          "new_line_content": "\theader.compression_algorithm = pq_getmsgbyte(buf);",
          "content_same": false
        },
        {
          "line": 1855,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"invalid compression algorithm %d\", header.compression_algorithm)",
          "old_line_content": "\tif (header.compression_algorithm >= _END_COMPRESSION_ALGORITHMS)",
          "new_line_content": "\t\telog(ERROR, \"invalid compression algorithm %d\", header.compression_algorithm);",
          "content_same": false
        },
        {
          "line": 1857,
          "old_api": null,
          "new_api": "compressed_data_recv",
          "old_text": null,
          "new_text": "definitions[header.compression_algorithm].compressed_data_recv(buf)",
          "old_line_content": "",
          "new_line_content": "\treturn definitions[header.compression_algorithm].compressed_data_recv(buf);",
          "content_same": false
        },
        {
          "line": 1863,
          "old_api": null,
          "new_api": "PG_GETARG_CSTRING",
          "old_text": null,
          "new_text": "PG_GETARG_CSTRING(0)",
          "old_line_content": "{",
          "new_line_content": "\tconst char *input = PG_GETARG_CSTRING(0);",
          "content_same": false
        },
        {
          "line": 1871,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"input too long\")",
          "old_line_content": "\tif (input_len > PG_INT32_MAX)",
          "new_line_content": "\t\telog(ERROR, \"input too long\");",
          "content_same": false
        },
        {
          "line": 1873,
          "old_api": null,
          "new_api": "pg_b64_dec_len",
          "old_text": null,
          "new_text": "pg_b64_dec_len(input_len)",
          "old_line_content": "",
          "new_line_content": "\tdecoded_len = pg_b64_dec_len(input_len);",
          "content_same": false
        },
        {
          "line": 1878,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"could not decode base64-encoded compressed data\")",
          "old_line_content": "\tif (decoded_len < 0)",
          "new_line_content": "\t\telog(ERROR, \"could not decode base64-encoded compressed data\");",
          "content_same": false
        },
        {
          "line": 1887,
          "old_api": null,
          "new_api": "PointerGetDatum",
          "old_text": null,
          "new_text": "PointerGetDatum(&data)",
          "old_line_content": "",
          "new_line_content": "\tresult = DirectFunctionCall1(tsl_compressed_data_recv, PointerGetDatum(&data));",
          "content_same": false
        },
        {
          "line": 1889,
          "old_api": null,
          "new_api": "PG_RETURN_DATUM",
          "old_text": null,
          "new_text": "PG_RETURN_DATUM(result)",
          "old_line_content": "",
          "new_line_content": "\tPG_RETURN_DATUM(result);",
          "content_same": false
        },
        {
          "line": 1895,
          "old_api": null,
          "new_api": "PG_GETARG_DATUM",
          "old_text": null,
          "new_text": "PG_GETARG_DATUM(0)",
          "old_line_content": "{",
          "new_line_content": "\tDatum bytes_data = DirectFunctionCall1(tsl_compressed_data_send, PG_GETARG_DATUM(0));",
          "content_same": false
        },
        {
          "line": 1904,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"could not base64-encode compressed data\")",
          "old_line_content": "\tif (encoded_len < 0)",
          "new_line_content": "\t\telog(ERROR, \"could not base64-encode compressed data\");",
          "content_same": false
        },
        {
          "line": 1908,
          "old_api": null,
          "new_api": "PG_RETURN_CSTRING",
          "old_text": null,
          "new_text": "PG_RETURN_CSTRING(encoded)",
          "old_line_content": "",
          "new_line_content": "\tPG_RETURN_CSTRING(encoded);",
          "content_same": false
        },
        {
          "line": 1915,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"invalid compression algorithm %d\", algorithm)",
          "old_line_content": "\tif (algorithm == _INVALID_COMPRESSION_ALGORITHM || algorithm >= _END_COMPRESSION_ALGORITHMS)",
          "new_line_content": "\t\telog(ERROR, \"invalid compression algorithm %d\", algorithm);",
          "content_same": false
        },
        {
          "line": 1931,
          "old_api": null,
          "new_api": "bms_is_empty",
          "old_text": null,
          "new_text": "bms_is_empty(key_columns)",
          "old_line_content": "",
          "new_line_content": "\tif (!bms_is_empty(key_columns))",
          "content_same": false
        },
        {
          "line": 1933,
          "old_api": null,
          "new_api": "bms_num_members",
          "old_text": null,
          "new_text": "bms_num_members(key_columns)",
          "old_line_content": "\t{",
          "new_line_content": "\t\tscankeys = palloc0(bms_num_members(key_columns) * 2 * sizeof(ScanKeyData));",
          "content_same": false
        },
        {
          "line": 1935,
          "old_api": null,
          "new_api": "bms_next_member",
          "old_text": null,
          "new_text": "bms_next_member(key_columns, i)",
          "old_line_content": "\t\tint i = -1;",
          "new_line_content": "\t\twhile ((i = bms_next_member(key_columns, i)) > 0)",
          "content_same": false
        },
        {
          "line": 1938,
          "old_api": null,
          "new_api": "get_attname",
          "old_text": null,
          "new_text": "get_attname(decompressor->out_rel->rd_id, attno, false)",
          "old_line_content": "\t\t\tAttrNumber attno = i + FirstLowInvalidHeapAttributeNumber;",
          "new_line_content": "\t\t\tchar *attname = get_attname(decompressor->out_rel->rd_id, attno, false);",
          "content_same": false
        },
        {
          "line": 1940,
          "old_api": null,
          "new_api": "ts_hypertable_compression_get_by_pkey",
          "old_text": null,
          "new_text": "ts_hypertable_compression_get_by_pkey(hypertable_id, attname)",
          "old_line_content": "\t\t\tFormData_hypertable_compression *fd =",
          "new_line_content": "\t\t\t\tts_hypertable_compression_get_by_pkey(hypertable_id, attname);",
          "content_same": false
        },
        {
          "line": 1942,
          "old_api": null,
          "new_api": "get_attnum",
          "old_text": null,
          "new_text": "get_attnum(hypertable_relid, attname)",
          "old_line_content": "\t\t\tbool isnull;",
          "new_line_content": "\t\t\tAttrNumber ht_attno = get_attnum(hypertable_relid, attname);",
          "content_same": false
        },
        {
          "line": 1960,
          "old_api": null,
          "new_api": "COMPRESSIONCOL_IS_SEGMENT_BY",
          "old_text": null,
          "new_text": "COMPRESSIONCOL_IS_SEGMENT_BY(fd)",
          "old_line_content": "\t\t\t */",
          "new_line_content": "\t\t\tif (COMPRESSIONCOL_IS_SEGMENT_BY(fd))",
          "content_same": false
        },
        {
          "line": 1962,
          "old_api": null,
          "new_api": "create_segment_filter_scankey",
          "old_text": null,
          "new_text": "create_segment_filter_scankey(decompressor,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  attname,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  BTEqualStrategyNumber,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  scankeys,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  key_index,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  null_columns,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  isnull)",
          "old_line_content": "\t\t\t{",
          "new_line_content": "\t\t\t\tkey_index = create_segment_filter_scankey(decompressor,",
          "content_same": false
        },
        {
          "line": 1971,
          "old_api": null,
          "new_api": "COMPRESSIONCOL_IS_ORDER_BY",
          "old_text": null,
          "new_text": "COMPRESSIONCOL_IS_ORDER_BY(fd)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\tif (COMPRESSIONCOL_IS_ORDER_BY(fd))",
          "content_same": false
        },
        {
          "line": 1979,
          "old_api": null,
          "new_api": "create_segment_filter_scankey",
          "old_text": null,
          "new_text": "create_segment_filter_scankey(decompressor,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  compression_column_segment_min_name(fd),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  BTLessEqualStrategyNumber,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  scankeys,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  key_index,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  null_columns,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  false)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tkey_index = create_segment_filter_scankey(decompressor,",
          "content_same": false
        },
        {
          "line": 1987,
          "old_api": null,
          "new_api": "create_segment_filter_scankey",
          "old_text": null,
          "new_text": "create_segment_filter_scankey(decompressor,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  compression_column_segment_max_name(fd),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  BTGreaterEqualStrategyNumber,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  scankeys,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  key_index,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  null_columns,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  false)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t\t  false); /* is_null_check */",
          "new_line_content": "\t\t\t\tkey_index = create_segment_filter_scankey(decompressor,",
          "content_same": false
        },
        {
          "line": 2008,
          "old_api": null,
          "new_api": "get_attnum",
          "old_text": null,
          "new_text": "get_attnum(decompressor->in_rel->rd_id, segment_filter_col_name)",
          "old_line_content": "{",
          "new_line_content": "\tAttrNumber cmp_attno = get_attnum(decompressor->in_rel->rd_id, segment_filter_col_name);",
          "content_same": false
        },
        {
          "line": 2026,
          "old_api": null,
          "new_api": "bms_add_member",
          "old_text": null,
          "new_text": "bms_add_member(*null_columns, cmp_attno)",
          "old_line_content": "\t{",
          "new_line_content": "\t\t*null_columns = bms_add_member(*null_columns, cmp_attno);",
          "content_same": false
        },
        {
          "line": 2030,
          "old_api": null,
          "new_api": "AttrNumberGetAttrOffset",
          "old_text": null,
          "new_text": "AttrNumberGetAttrOffset(cmp_attno)",
          "old_line_content": "",
          "new_line_content": "\tOid atttypid = decompressor->in_desc->attrs[AttrNumberGetAttrOffset(cmp_attno)].atttypid;",
          "content_same": false
        },
        {
          "line": 2032,
          "old_api": null,
          "new_api": "lookup_type_cache",
          "old_text": null,
          "new_text": "lookup_type_cache(atttypid, TYPECACHE_BTREE_OPFAMILY)",
          "old_line_content": "",
          "new_line_content": "\tTypeCacheEntry *tce = lookup_type_cache(atttypid, TYPECACHE_BTREE_OPFAMILY);",
          "content_same": false
        },
        {
          "line": 2036,
          "old_api": null,
          "new_api": "get_opfamily_member",
          "old_text": null,
          "new_text": "get_opfamily_member(tce->btree_opf, atttypid, atttypid, strategy)",
          "old_line_content": "",
          "new_line_content": "\tOid opr = get_opfamily_member(tce->btree_opf, atttypid, atttypid, strategy);",
          "content_same": false
        },
        {
          "line": 2042,
          "old_api": null,
          "new_api": "IsBinaryCoercible",
          "old_text": null,
          "new_text": "IsBinaryCoercible(atttypid, tce->btree_opintype)",
          "old_line_content": "\t */",
          "new_line_content": "\tif (!OidIsValid(opr) && IsBinaryCoercible(atttypid, tce->btree_opintype))",
          "content_same": false
        },
        {
          "line": 2045,
          "old_api": null,
          "new_api": "get_opfamily_member",
          "old_text": null,
          "new_text": "get_opfamily_member(tce->btree_opf, tce->btree_opintype, tce->btree_opintype, strategy)",
          "old_line_content": "\t\topr =",
          "new_line_content": "\t\t\tget_opfamily_member(tce->btree_opf, tce->btree_opintype, tce->btree_opintype, strategy);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 2050,
          "old_api": "OidIsValid",
          "new_api": null,
          "old_text": "OidIsValid(opr)",
          "new_text": null,
          "old_line_content": "\tif (!OidIsValid(opr))",
          "new_line_content": "\t\treturn num_scankeys;",
          "content_same": false
        },
        {
          "line": 2054,
          "old_api": "OidIsValid",
          "new_api": null,
          "old_text": "OidIsValid(opr)",
          "new_text": null,
          "old_line_content": "\tAssert(OidIsValid(opr));",
          "new_line_content": "\t/* We should never end up here but: no opcode, no optimization */",
          "content_same": false
        },
        {
          "line": 2056,
          "old_api": "OidIsValid",
          "new_api": null,
          "old_text": "OidIsValid(opr)",
          "new_text": null,
          "old_line_content": "\tif (!OidIsValid(opr))",
          "new_line_content": "\t\treturn num_scankeys;",
          "content_same": false
        },
        {
          "line": 2059,
          "old_api": "ScanKeyEntryInitialize",
          "new_api": null,
          "old_text": "ScanKeyEntryInitialize(&scankeys[num_scankeys++],\n\t\t\t\t\t\t   0, /* flags */\n\t\t\t\t\t\t   cmp_attno,\n\t\t\t\t\t\t   strategy,\n\t\t\t\t\t\t   InvalidOid, /* No strategy subtype. */\n\t\t\t\t\t\t   decompressor->in_desc->attrs[AttrNumberGetAttrOffset(cmp_attno)]\n\t\t\t\t\t\t\t   .attcollation,\n\t\t\t\t\t\t   opr,\n\t\t\t\t\t\t   value)",
          "new_text": null,
          "old_line_content": "\tScanKeyEntryInitialize(&scankeys[num_scankeys++],",
          "new_line_content": "\t\t\t\t\t\t   0, /* flags */",
          "content_same": false
        },
        {
          "line": 2064,
          "old_api": "AttrNumberGetAttrOffset",
          "new_api": null,
          "old_text": "AttrNumberGetAttrOffset(cmp_attno)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t   decompressor->in_desc->attrs[AttrNumberGetAttrOffset(cmp_attno)]",
          "new_line_content": "\t\t\t\t\t\t\t   .attcollation,",
          "content_same": false
        },
        {
          "line": 2079,
          "old_api": "TTS_EMPTY",
          "new_api": null,
          "old_text": "TTS_EMPTY(slot)",
          "new_text": null,
          "old_line_content": "\tif (TTS_EMPTY(slot))",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 2086,
          "old_api": "ts_indexing_relation_has_primary_or_unique_index",
          "new_api": null,
          "old_text": "ts_indexing_relation_has_primary_or_unique_index(out_rel)",
          "new_text": null,
          "old_line_content": "\tif (!ts_indexing_relation_has_primary_or_unique_index(out_rel))",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 2098,
          "old_api": "errhint",
          "new_api": null,
          "old_text": "errhint(\"Set timescaledb.enable_dml_decompression to TRUE.\")",
          "new_text": null,
          "old_line_content": "\t\t\t\t errhint(\"Set timescaledb.enable_dml_decompression to TRUE.\")));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2101,
          "old_api": "relation_open",
          "new_api": null,
          "old_text": "relation_open(comp->table_id, RowExclusiveLock)",
          "new_text": null,
          "old_line_content": "\tRelation in_rel = relation_open(comp->table_id, RowExclusiveLock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2104,
          "old_api": "RelationGetIndexAttrBitmap",
          "new_api": null,
          "old_text": "RelationGetIndexAttrBitmap(out_rel, INDEX_ATTR_BITMAP_KEY)",
          "new_text": null,
          "old_line_content": "\tBitmapset *key_columns = RelationGetIndexAttrBitmap(out_rel, INDEX_ATTR_BITMAP_KEY);",
          "new_line_content": "\tBitmapset *null_columns = NULL;",
          "content_same": false
        },
        {
          "line": 2108,
          "old_api": "build_scankeys",
          "new_api": null,
          "old_text": "build_scankeys(chunk->fd.hypertable_id,\n\t\t\t\t\t\t\t\t\t\t   chunk->hypertable_relid,\n\t\t\t\t\t\t\t\t\t\t   &decompressor,\n\t\t\t\t\t\t\t\t\t\t   key_columns,\n\t\t\t\t\t\t\t\t\t\t   &null_columns,\n\t\t\t\t\t\t\t\t\t\t   slot,\n\t\t\t\t\t\t\t\t\t\t   &num_scankeys)",
          "new_text": null,
          "old_line_content": "\tScanKeyData *scankeys = build_scankeys(chunk->fd.hypertable_id,",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t   chunk->hypertable_relid,",
          "content_same": false
        },
        {
          "line": 2116,
          "old_api": "bms_free",
          "new_api": null,
          "old_text": "bms_free(key_columns)",
          "new_text": null,
          "old_line_content": "\tbms_free(key_columns);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2123,
          "old_api": "GetLatestSnapshot",
          "new_api": null,
          "old_text": "GetLatestSnapshot()",
          "new_text": null,
          "old_line_content": "\tTableScanDesc heapScan = table_beginscan(in_rel, GetLatestSnapshot(), num_scankeys, scankeys);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2125,
          "old_api": "heap_getnext",
          "new_api": null,
          "old_text": "heap_getnext(heapScan, ForwardScanDirection)",
          "new_text": null,
          "old_line_content": "\tfor (HeapTuple compressed_tuple = heap_getnext(heapScan, ForwardScanDirection);",
          "new_line_content": "\t\t compressed_tuple != NULL;",
          "content_same": false
        },
        {
          "line": 2127,
          "old_api": "heap_getnext",
          "new_api": null,
          "old_text": "heap_getnext(heapScan, ForwardScanDirection)",
          "new_text": null,
          "old_line_content": "\t\t compressed_tuple = heap_getnext(heapScan, ForwardScanDirection))",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 2129,
          "old_api": "HeapTupleIsValid",
          "new_api": null,
          "old_text": "HeapTupleIsValid(compressed_tuple)",
          "new_text": null,
          "old_line_content": "\t\tAssert(HeapTupleIsValid(compressed_tuple));",
          "new_line_content": "\t\tbool valid = true;",
          "content_same": false
        },
        {
          "line": 2137,
          "old_api": "bms_next_member",
          "new_api": null,
          "old_text": "bms_next_member(null_columns, attno)",
          "new_text": null,
          "old_line_content": "\t\t\t attno = bms_next_member(null_columns, attno))",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 2139,
          "old_api": "heap_attisnull",
          "new_api": null,
          "old_text": "heap_attisnull(compressed_tuple, attno, decompressor.in_desc)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!heap_attisnull(compressed_tuple, attno, decompressor.in_desc))",
          "new_line_content": "\t\t\t{",
          "content_same": false
        },
        {
          "line": 2152,
          "old_api": "heap_deform_tuple",
          "new_api": null,
          "old_text": "heap_deform_tuple(compressed_tuple,\n\t\t\t\t\t\t  decompressor.in_desc,\n\t\t\t\t\t\t  decompressor.compressed_datums,\n\t\t\t\t\t\t  decompressor.compressed_is_nulls)",
          "new_text": null,
          "old_line_content": "\t\theap_deform_tuple(compressed_tuple,",
          "new_line_content": "\t\t\t\t\t\t  decompressor.in_desc,",
          "content_same": false
        },
        {
          "line": 2159,
          "old_api": "write_logical_replication_msg_decompression_end",
          "new_api": null,
          "old_text": "write_logical_replication_msg_decompression_end()",
          "new_text": null,
          "old_line_content": "\t\twrite_logical_replication_msg_decompression_end();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2163,
          "old_api": "table_tuple_delete",
          "new_api": null,
          "old_text": "table_tuple_delete(in_rel,\n\t\t\t\t\t\t\t\t\t&compressed_tuple->t_self,\n\t\t\t\t\t\t\t\t\tdecompressor.mycid,\n\t\t\t\t\t\t\t\t\tGetTransactionSnapshot(),\n\t\t\t\t\t\t\t\t\tInvalidSnapshot,\n\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\t&tmfd,\n\t\t\t\t\t\t\t\t\tfalse)",
          "new_text": null,
          "old_line_content": "\t\tresult = table_tuple_delete(in_rel,",
          "new_line_content": "\t\t\t\t\t\t\t\t\t&compressed_tuple->t_self,",
          "content_same": false
        },
        {
          "line": 2166,
          "old_api": "GetTransactionSnapshot",
          "new_api": null,
          "old_text": "GetTransactionSnapshot()",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\t\tGetTransactionSnapshot(),",
          "new_line_content": "\t\t\t\t\t\t\t\t\tInvalidSnapshot,",
          "content_same": false
        },
        {
          "line": 2171,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(result == TM_Ok)",
          "new_text": null,
          "old_line_content": "\t\tAssert(result == TM_Ok);",
          "new_line_content": "\t\tcis->cds->batches_decompressed += decompressor.batches_decompressed;",
          "content_same": false
        },
        {
          "line": 2176,
          "old_api": "table_endscan",
          "new_api": null,
          "old_text": "table_endscan(heapScan)",
          "new_text": null,
          "old_line_content": "\ttable_endscan(heapScan);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2180,
          "old_api": "FreeBulkInsertState",
          "new_api": null,
          "old_text": "FreeBulkInsertState(decompressor.bistate)",
          "new_text": null,
          "old_line_content": "\tFreeBulkInsertState(decompressor.bistate);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2183,
          "old_api": "table_close",
          "new_api": null,
          "old_text": "table_close(in_rel, NoLock)",
          "new_text": null,
          "old_line_content": "\ttable_close(in_rel, NoLock);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2191,
          "old_api": "pg_strcasecmp",
          "new_api": null,
          "old_text": "pg_strcasecmp(name, \"deltadelta\")",
          "new_text": null,
          "old_line_content": "\tif (pg_strcasecmp(name, \"deltadelta\") == 0)",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 2195,
          "old_api": "pg_strcasecmp",
          "new_api": null,
          "old_text": "pg_strcasecmp(name, \"gorilla\")",
          "new_text": null,
          "old_line_content": "\telse if (pg_strcasecmp(name, \"gorilla\") == 0)",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 2200,
          "old_api": "errmsg",
          "new_api": null,
          "old_text": "errmsg(\"unknown comrpession algorithm %s\", name)",
          "new_text": null,
          "old_line_content": "\tereport(ERROR, (errmsg(\"unknown comrpession algorithm %s\", name)));",
          "new_line_content": "\treturn _INVALID_COMPRESSION_ALGORITHM;",
          "content_same": false
        },
        {
          "line": 2236,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR,\n\t\t \"no decompression function for compression algorithm %d with element type %d\",\n\t\t algo,\n\t\t type)",
          "new_text": null,
          "old_line_content": "\telog(ERROR,",
          "new_line_content": "\t\t \"no decompression function for compression algorithm %d with element type %d\",",
          "content_same": false
        },
        {
          "line": 2240,
          "old_api": "pg_unreachable",
          "new_api": null,
          "old_text": "pg_unreachable()",
          "new_text": null,
          "old_line_content": "\tpg_unreachable();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2252,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(path, \"r\")",
          "new_text": null,
          "old_line_content": "\tFILE *f = fopen(path, \"r\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2256,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"could not open the file '%s'\", path)",
          "new_text": null,
          "old_line_content": "\t\telog(ERROR, \"could not open the file '%s'\", path);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 2261,
          "old_api": "fseek",
          "new_api": null,
          "old_text": "fseek(f, 0, SEEK_SET)",
          "new_text": null,
          "old_line_content": "\tfseek(f, 0, SEEK_SET); /* same as rewind(f); */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2276,
          "old_api": "fread",
          "new_api": null,
          "old_text": "fread(string, fsize, 1, f)",
          "new_text": null,
          "old_line_content": "\tsize_t elements_read = fread(string, fsize, 1, f);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2280,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"failed to read file '%s'\", path)",
          "new_text": null,
          "old_line_content": "\t\telog(ERROR, \"failed to read file '%s'\", path);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 2283,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(f)",
          "new_text": null,
          "old_line_content": "\tfclose(f);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 238,
          "old_api": "GetCurrentCommandId",
          "new_api": null,
          "old_text": "GetCurrentCommandId(true)",
          "new_text": null,
          "old_line_content": "\tCommandId mycid = GetCurrentCommandId(true);",
          "new_line_content": "\tHeapTuple in_table_tp = NULL, index_tp = NULL;",
          "content_same": false
        },
        {
          "line": 2287,
          "old_api": "get_decompress_fn",
          "new_api": null,
          "old_text": "get_decompress_fn(algo, type)((const uint8 *) string, fsize, /* extra_checks = */ true)",
          "new_text": null,
          "old_line_content": "\t*rows = get_decompress_fn(algo, type)((const uint8 *) string, fsize, /* extra_checks = */ true);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2290,
          "old_api": "TS_FUNCTION_INFO_V1",
          "new_api": null,
          "old_text": "TS_FUNCTION_INFO_V1(ts_read_compressed_data_file)",
          "new_text": null,
          "old_line_content": "TS_FUNCTION_INFO_V1(ts_read_compressed_data_file);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 249,
          "old_api": "table_open",
          "new_api": null,
          "old_text": "table_open(in_table, ExclusiveLock)",
          "new_text": null,
          "old_line_content": "\tRelation in_rel = table_open(in_table, ExclusiveLock);",
          "new_line_content": "\t/* We are _just_ INSERTing into the out_table so in principle we could take",
          "content_same": false
        },
        {
          "line": 2300,
          "old_api": "PG_GETARG_CSTRING",
          "new_api": null,
          "old_text": "PG_GETARG_CSTRING(2)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\t   PG_GETARG_CSTRING(2),",
          "new_line_content": "\t\t\t\t\t\t\t\t   &bytes,",
          "content_same": false
        },
        {
          "line": 2303,
          "old_api": "PG_RETURN_INT32",
          "new_api": null,
          "old_text": "PG_RETURN_INT32(rows)",
          "new_text": null,
          "old_line_content": "\tPG_RETURN_INT32(rows);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 256,
          "old_api": "compress_chunk_populate_keys",
          "new_api": null,
          "old_text": "compress_chunk_populate_keys(in_table,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolumn_compression_info,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnum_compression_infos,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&n_keys,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&keys)",
          "new_text": null,
          "old_line_content": "\tint16 *in_column_offsets = compress_chunk_populate_keys(in_table,",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolumn_compression_info,",
          "content_same": false
        },
        {
          "line": 2306,
          "old_api": "TS_FUNCTION_INFO_V1",
          "new_api": null,
          "old_text": "TS_FUNCTION_INFO_V1(ts_read_compressed_data_directory)",
          "new_text": null,
          "old_line_content": "TS_FUNCTION_INFO_V1(ts_read_compressed_data_directory);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 263,
          "old_api": "RelationGetDescr",
          "new_api": null,
          "old_text": "RelationGetDescr(out_rel)",
          "new_text": null,
          "old_line_content": "\tTupleDesc out_desc = RelationGetDescr(out_rel);",
          "new_line_content": "\t/* Before calling row compressor relation should be segmented and sorted as per",
          "content_same": false
        },
        {
          "line": 264,
          "old_api": "RelationGetIndexList",
          "new_api": null,
          "old_text": "RelationGetIndexList(in_rel)",
          "new_text": null,
          "old_line_content": "\tin_rel_index_oids = RelationGetIndexList(in_rel);",
          "new_line_content": "\t * compress_segmentby and compress_orderby column/s configured in ColumnCompressionInfo.",
          "content_same": false
        },
        {
          "line": 2334,
          "old_api": "PG_GETARG_CSTRING",
          "new_api": null,
          "old_text": "PG_GETARG_CSTRING(0)",
          "new_text": null,
          "old_line_content": "\tconst int algo = get_compression_algorithm(PG_GETARG_CSTRING(0));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 293,
          "old_api": "index_open",
          "new_api": null,
          "old_text": "index_open(index_oid, AccessShareLock)",
          "new_text": null,
          "old_line_content": "\t\t\tRelation index_rel = index_open(index_oid, AccessShareLock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 294,
          "old_api": "BuildIndexInfo",
          "new_api": null,
          "old_text": "BuildIndexInfo(index_rel)",
          "new_text": null,
          "old_line_content": "\t\t\tIndexInfo *index_info = BuildIndexInfo(index_rel);",
          "new_line_content": "\t\t\tif (index_info->ii_Predicate != 0)",
          "content_same": false
        },
        {
          "line": 2341,
          "old_api": "SRF_IS_FIRSTCALL",
          "new_api": null,
          "old_text": "SRF_IS_FIRSTCALL()",
          "new_text": null,
          "old_line_content": "\tif (SRF_IS_FIRSTCALL())",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 2344,
          "old_api": "SRF_FIRSTCALL_INIT",
          "new_api": null,
          "old_text": "SRF_FIRSTCALL_INIT()",
          "new_text": null,
          "old_line_content": "\t\tfuncctx = SRF_FIRSTCALL_INIT();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2347,
          "old_api": "MemoryContextSwitchTo",
          "new_api": null,
          "old_text": "MemoryContextSwitchTo(funcctx->multi_call_memory_ctx)",
          "new_text": null,
          "old_line_content": "\t\tMemoryContextSwitchTo(funcctx->multi_call_memory_ctx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 302,
          "old_api": "index_close",
          "new_api": null,
          "old_text": "index_close(index_rel, AccessShareLock)",
          "new_text": null,
          "old_line_content": "\t\t\t\tindex_close(index_rel, AccessShareLock);",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 2353,
          "old_api": "errmsg",
          "new_api": null,
          "old_text": "errmsg(\"function returning record called in context \"\n\t\t\t\t\t\t\t\"that cannot accept type record\")",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t errmsg(\"function returning record called in context \"",
          "new_line_content": "\t\t\t\t\t\t\t\"that cannot accept type record\")));",
          "content_same": false
        },
        {
          "line": 2360,
          "old_api": "TupleDescGetAttInMetadata",
          "new_api": null,
          "old_text": "TupleDescGetAttInMetadata(funcctx->tuple_desc)",
          "new_text": null,
          "old_line_content": "\t\tfuncctx->attinmeta = TupleDescGetAttInMetadata(funcctx->tuple_desc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 313,
          "old_api": "NameStr",
          "new_api": null,
          "old_text": "NameStr(keys[i]->attname)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tint16 att_num = get_attnum(in_table, NameStr(keys[i]->attname));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2362,
          "old_api": "palloc",
          "new_api": null,
          "old_text": "palloc(sizeof(struct user_context))",
          "new_text": null,
          "old_line_content": "\t\tfuncctx->user_fctx = palloc(sizeof(struct user_context));",
          "new_line_content": "\t\tc = funcctx->user_fctx;",
          "content_same": false
        },
        {
          "line": 2365,
          "old_api": "opendir",
          "new_api": null,
          "old_text": "opendir(name)",
          "new_text": null,
          "old_line_content": "\t\tc->dp = opendir(name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 319,
          "old_api": "COMPRESSIONCOL_IS_SEGMENT_BY",
          "new_api": null,
          "old_text": "COMPRESSIONCOL_IS_SEGMENT_BY(keys[i])",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tCOMPRESSIONCOL_IS_SEGMENT_BY(keys[i]) ? true : keys[i]->orderby_asc;",
          "new_line_content": "\t\t\t\t\tbool is_null_first =",
          "content_same": false
        },
        {
          "line": 321,
          "old_api": "COMPRESSIONCOL_IS_SEGMENT_BY",
          "new_api": null,
          "old_text": "COMPRESSIONCOL_IS_SEGMENT_BY(keys[i])",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tCOMPRESSIONCOL_IS_SEGMENT_BY(keys[i]) ? false : keys[i]->orderby_nullsfirst;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2369,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"could not open directory '%s'\", name)",
          "new_text": null,
          "old_line_content": "\t\t\telog(ERROR, \"could not open directory '%s'\", name);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 2372,
          "old_api": "MemoryContextSwitchTo",
          "new_api": null,
          "old_text": "MemoryContextSwitchTo(call_memory_context)",
          "new_text": null,
          "old_line_content": "\t\tMemoryContextSwitchTo(call_memory_context);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 2375,
          "old_api": "SRF_PERCALL_SETUP",
          "new_api": null,
          "old_text": "SRF_PERCALL_SETUP()",
          "new_text": null,
          "old_line_content": "\tfuncctx = SRF_PERCALL_SETUP();",
          "new_line_content": "\tc = (struct user_context *) funcctx->user_fctx;",
          "content_same": false
        },
        {
          "line": 330,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR,\n\t\t\t\t\t\t\t \"table \\\"%s\\\" does not have column \\\"%s\\\"\",\n\t\t\t\t\t\t\t get_rel_name(in_table),\n\t\t\t\t\t\t\t NameStr(keys[i]->attname))",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\telog(ERROR,",
          "new_line_content": "\t\t\t\t\t\t\t \"table \\\"%s\\\" does not have column \\\"%s\\\"\",",
          "content_same": false
        },
        {
          "line": 333,
          "old_api": "NameStr",
          "new_api": null,
          "old_text": "NameStr(keys[i]->attname)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t NameStr(keys[i]->attname));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 337,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR,\n\t\t\t\t\t\t\t \"index \\\"%s\\\" does not have column \\\"%s\\\"\",\n\t\t\t\t\t\t\t get_rel_name(index_oid),\n\t\t\t\t\t\t\t NameStr(keys[i]->attname))",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\telog(ERROR,",
          "new_line_content": "\t\t\t\t\t\t\t \"index \\\"%s\\\" does not have column \\\"%s\\\"\",",
          "content_same": false
        },
        {
          "line": 2385,
          "old_api": "readdir",
          "new_api": null,
          "old_text": "readdir(c->dp)",
          "new_text": null,
          "old_line_content": "\twhile ((c->ep = readdir(c->dp)))",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 340,
          "old_api": "NameStr",
          "new_api": null,
          "old_text": "NameStr(keys[i]->attname)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t NameStr(keys[i]->attname));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 343,
          "old_api": "GETSTRUCT",
          "new_api": null,
          "old_text": "GETSTRUCT(index_tp)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tindex_attr_tp = (Form_pg_attribute) GETSTRUCT(index_tp);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2392,
          "old_api": "psprintf",
          "new_api": null,
          "old_text": "psprintf(\"%s/%s\", name, c->ep->d_name)",
          "new_text": null,
          "old_line_content": "\t\tchar *path = psprintf(\"%s/%s\", name, c->ep->d_name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2395,
          "old_api": "cstring_to_text",
          "new_api": null,
          "old_text": "cstring_to_text(path)",
          "new_text": null,
          "old_line_content": "\t\tvalues[out_path] = PointerGetDatum(cstring_to_text(path));",
          "new_line_content": "\t\tnulls[out_path] = false;",
          "content_same": false
        },
        {
          "line": 2400,
          "old_api": "PG_TRY",
          "new_api": null,
          "old_text": "PG_TRY()",
          "new_text": null,
          "old_line_content": "\t\tPG_TRY();",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 2403,
          "old_api": "Int32GetDatum",
          "new_api": null,
          "old_text": "Int32GetDatum(rows)",
          "new_text": null,
          "old_line_content": "\t\t\tvalues[out_rows] = Int32GetDatum(rows);",
          "new_line_content": "\t\t\tnulls[out_rows] = false;",
          "content_same": false
        },
        {
          "line": 2406,
          "old_api": "PG_CATCH",
          "new_api": null,
          "old_text": "PG_CATCH()",
          "new_text": null,
          "old_line_content": "\t\tPG_CATCH();",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 2408,
          "old_api": "MemoryContextSwitchTo",
          "new_api": null,
          "old_text": "MemoryContextSwitchTo(call_memory_context)",
          "new_text": null,
          "old_line_content": "\t\t\tMemoryContextSwitchTo(call_memory_context);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 362,
          "old_api": "ReleaseSysCache",
          "new_api": null,
          "old_text": "ReleaseSysCache(in_table_tp)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tReleaseSysCache(in_table_tp);",
          "new_line_content": "\t\t\t\t\tin_table_tp = NULL;",
          "content_same": false
        },
        {
          "line": 2410,
          "old_api": "CopyErrorData",
          "new_api": null,
          "old_text": "CopyErrorData()",
          "new_text": null,
          "old_line_content": "\t\t\tErrorData *error = CopyErrorData();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 364,
          "old_api": "ReleaseSysCache",
          "new_api": null,
          "old_text": "ReleaseSysCache(index_tp)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tReleaseSysCache(index_tp);",
          "new_line_content": "\t\t\t\t\tindex_tp = NULL;",
          "content_same": false
        },
        {
          "line": 2413,
          "old_api": "unpack_sql_state",
          "new_api": null,
          "old_text": "unpack_sql_state(error->sqlerrcode)",
          "new_text": null,
          "old_line_content": "\t\t\t\tPointerGetDatum(cstring_to_text(unpack_sql_state(error->sqlerrcode)));",
          "new_line_content": "\t\t\tnulls[out_sqlstate] = false;",
          "content_same": false
        },
        {
          "line": 2419,
          "old_api": "psprintf",
          "new_api": null,
          "old_text": "psprintf(\"%s:%d\", error->filename, error->lineno)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tcstring_to_text(psprintf(\"%s:%d\", error->filename, error->lineno)));",
          "new_line_content": "\t\t\t\tnulls[out_location] = false;",
          "content_same": false
        },
        {
          "line": 2423,
          "old_api": "FlushErrorState",
          "new_api": null,
          "old_text": "FlushErrorState()",
          "new_text": null,
          "old_line_content": "\t\t\tFlushErrorState();",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 2425,
          "old_api": "PG_END_TRY",
          "new_api": null,
          "old_text": "PG_END_TRY()",
          "new_text": null,
          "old_line_content": "\t\tPG_END_TRY();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2427,
          "old_api": "Int32GetDatum",
          "new_api": null,
          "old_text": "Int32GetDatum(bytes)",
          "new_text": null,
          "old_line_content": "\t\tvalues[out_bytes] = Int32GetDatum(bytes);",
          "new_line_content": "\t\tnulls[out_bytes] = false;",
          "content_same": false
        },
        {
          "line": 2431,
          "old_api": "heap_form_tuple",
          "new_api": null,
          "old_text": "heap_form_tuple(funcctx->tuple_desc, values, nulls)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tHeapTupleGetDatum(heap_form_tuple(funcctx->tuple_desc, values, nulls)));",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 385,
          "old_api": "HeapTupleIsValid",
          "new_api": null,
          "old_text": "HeapTupleIsValid(in_table_tp)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tif (HeapTupleIsValid(in_table_tp))",
          "new_line_content": "\t\t\t\t\t{",
          "content_same": false
        },
        {
          "line": 2434,
          "old_api": "closedir",
          "new_api": null,
          "old_text": "closedir(c->dp)",
          "new_text": null,
          "old_line_content": "\t(void) closedir(c->dp);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 387,
          "old_api": "ReleaseSysCache",
          "new_api": null,
          "old_text": "ReleaseSysCache(in_table_tp)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tReleaseSysCache(in_table_tp);",
          "new_line_content": "\t\t\t\t\t\tin_table_tp = NULL;",
          "content_same": false
        },
        {
          "line": 2436,
          "old_api": "SRF_RETURN_DONE",
          "new_api": null,
          "old_text": "SRF_RETURN_DONE(funcctx)",
          "new_text": null,
          "old_line_content": "\tSRF_RETURN_DONE(funcctx);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 390,
          "old_api": "HeapTupleIsValid",
          "new_api": null,
          "old_text": "HeapTupleIsValid(index_tp)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tif (HeapTupleIsValid(index_tp))",
          "new_line_content": "\t\t\t\t\t{",
          "content_same": false
        },
        {
          "line": 392,
          "old_api": "ReleaseSysCache",
          "new_api": null,
          "old_text": "ReleaseSysCache(index_tp)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tReleaseSysCache(index_tp);",
          "new_line_content": "\t\t\t\t\t\tindex_tp = NULL;",
          "content_same": false
        },
        {
          "line": 395,
          "old_api": "index_close",
          "new_api": null,
          "old_text": "index_close(index_rel, AccessShareLock)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tindex_close(index_rel, AccessShareLock);",
          "new_line_content": "\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 400,
          "old_api": "index_close",
          "new_api": null,
          "old_text": "index_close(index_rel, AccessShareLock)",
          "new_text": null,
          "old_line_content": "\t\t\t\tindex_close(index_rel, AccessShareLock);",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 2451,
          "old_api": "MemoryContextReset",
          "new_api": null,
          "old_text": "MemoryContextReset(CurrentMemoryContext)",
          "new_text": null,
          "old_line_content": "\tMemoryContextReset(CurrentMemoryContext);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2453,
          "old_api": "PG_TRY",
          "new_api": null,
          "old_text": "PG_TRY()",
          "new_text": null,
          "old_line_content": "\tPG_TRY();",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 406,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(num_compression_infos <= out_desc->natts)",
          "new_text": null,
          "old_line_content": "\tAssert(num_compression_infos <= out_desc->natts);",
          "new_line_content": "\tRowCompressor row_compressor;",
          "content_same": false
        },
        {
          "line": 408,
          "old_api": "row_compressor_init",
          "new_api": null,
          "old_text": "row_compressor_init(&row_compressor,\n\t\t\t\t\t\tin_desc,\n\t\t\t\t\t\tout_rel,\n\t\t\t\t\t\tnum_compression_infos,\n\t\t\t\t\t\tcolumn_compression_info,\n\t\t\t\t\t\tin_column_offsets,\n\t\t\t\t\t\tout_desc->natts,\n\t\t\t\t\t\ttrue /*need_bistate*/,\n\t\t\t\t\t\tfalse /*reset_sequence*/,\n\t\t\t\t\t\tinsert_options)",
          "new_text": null,
          "old_line_content": "\trow_compressor_init(&row_compressor,",
          "new_line_content": "\t\t\t\t\t\tin_desc,",
          "content_same": false
        },
        {
          "line": 2456,
          "old_api": "target",
          "new_api": null,
          "old_text": "target(Data, Size, /* extra_checks = */ false)",
          "new_text": null,
          "old_line_content": "\t\ttarget(Data, Size, /* extra_checks = */ false);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 2458,
          "old_api": "PG_CATCH",
          "new_api": null,
          "old_text": "PG_CATCH()",
          "new_text": null,
          "old_line_content": "\tPG_CATCH();",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 2460,
          "old_api": "FlushErrorState",
          "new_api": null,
          "old_text": "FlushErrorState()",
          "new_text": null,
          "old_line_content": "\t\tFlushErrorState();",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 2462,
          "old_api": "PG_END_TRY",
          "new_api": null,
          "old_text": "PG_END_TRY()",
          "new_text": null,
          "old_line_content": "\tPG_END_TRY();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 423,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(INFO,\n\t\t\t\t \"compress_chunk_indexscan_start matched index \\\"%s\\\"\",\n\t\t\t\t get_rel_name(matched_index_rel->rd_id))",
          "new_text": null,
          "old_line_content": "\t\t\telog(INFO,",
          "new_line_content": "\t\t\t\t \"compress_chunk_indexscan_start matched index \\\"%s\\\"\",",
          "content_same": false
        },
        {
          "line": 2471,
          "old_api": "llvm_fuzz_target_generic",
          "new_api": null,
          "old_text": "llvm_fuzz_target_generic(decompress_gorilla_float8, Data, Size)",
          "new_text": null,
          "old_line_content": "\treturn llvm_fuzz_target_generic(decompress_gorilla_float8, Data, Size);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 425,
          "old_api": "get_rel_name",
          "new_api": null,
          "old_text": "get_rel_name(matched_index_rel->rd_id)",
          "new_text": null,
          "old_line_content": "\t\t\t\t get_rel_name(matched_index_rel->rd_id));",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 2476,
          "old_api": "llvm_fuzz_target_generic",
          "new_api": null,
          "old_text": "llvm_fuzz_target_generic(decompress_deltadelta_int64, Data, Size)",
          "new_text": null,
          "old_line_content": "\treturn llvm_fuzz_target_generic(decompress_deltadelta_int64, Data, Size);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 431,
          "old_api": "index_getnext_slot",
          "new_api": null,
          "old_text": "index_getnext_slot(index_scan, indexscan_direction, slot)",
          "new_text": null,
          "old_line_content": "\t\twhile (index_getnext_slot(index_scan, indexscan_direction, slot))",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 433,
          "old_api": "row_compressor_process_ordered_slot",
          "new_api": null,
          "old_text": "row_compressor_process_ordered_slot(&row_compressor, slot, mycid)",
          "new_text": null,
          "old_line_content": "\t\t\trow_compressor_process_ordered_slot(&row_compressor, slot, mycid);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 436,
          "old_api": "run_analyze_on_chunk",
          "new_api": null,
          "old_text": "run_analyze_on_chunk(in_rel->rd_id)",
          "new_text": null,
          "old_line_content": "\t\trun_analyze_on_chunk(in_rel->rd_id);",
          "new_line_content": "\t\tif (row_compressor.rows_compressed_into_current_value > 0)",
          "content_same": false
        },
        {
          "line": 438,
          "old_api": "row_compressor_flush",
          "new_api": null,
          "old_text": "row_compressor_flush(&row_compressor, mycid, true)",
          "new_text": null,
          "old_line_content": "\t\t\trow_compressor_flush(&row_compressor, mycid, true);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2489,
          "old_api": "TS_FUNCTION_INFO_V1",
          "new_api": null,
          "old_text": "TS_FUNCTION_INFO_V1(ts_fuzz_compression)",
          "new_text": null,
          "old_line_content": "TS_FUNCTION_INFO_V1(ts_fuzz_compression);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 442,
          "old_api": "index_close",
          "new_api": null,
          "old_text": "index_close(matched_index_rel, AccessShareLock)",
          "new_text": null,
          "old_line_content": "\t\tindex_close(matched_index_rel, AccessShareLock);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 448,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(INFO, \"compress_chunk_tuplesort_start\")",
          "new_text": null,
          "old_line_content": "\t\t\telog(INFO, \"compress_chunk_tuplesort_start\");",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 453,
          "old_api": "tuplesort_end",
          "new_api": null,
          "old_text": "tuplesort_end(sorted_rel)",
          "new_text": null,
          "old_line_content": "\t\ttuplesort_end(sorted_rel);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 2504,
          "old_api": "MemoryContextSwitchTo",
          "new_api": null,
          "old_text": "MemoryContextSwitchTo(fuzzing_context)",
          "new_text": null,
          "old_line_content": "\tMemoryContext old_context = MemoryContextSwitchTo(fuzzing_context);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 458,
          "old_api": "truncate_relation",
          "new_api": null,
          "old_text": "truncate_relation(in_table)",
          "new_text": null,
          "old_line_content": "\ttruncate_relation(in_table);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 461,
          "old_api": "table_close",
          "new_api": null,
          "old_text": "table_close(in_rel, NoLock)",
          "new_text": null,
          "old_line_content": "\ttable_close(in_rel, NoLock);",
          "new_line_content": "\tcstat.rowcnt_pre_compression = row_compressor.rowcnt_pre_compression;",
          "content_same": false
        },
        {
          "line": 2515,
          "old_api": "PG_GETARG_INT32",
          "new_api": null,
          "old_text": "PG_GETARG_INT32(2)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t psprintf(\"-runs=%d\", PG_GETARG_INT32(2)),",
          "new_line_content": "\t\t\t\t\t\t \"corpus\" /* in the database directory */,",
          "content_same": false
        },
        {
          "line": 2522,
          "old_api": "PG_GETARG_OID",
          "new_api": null,
          "old_text": "PG_GETARG_OID(1)",
          "new_text": null,
          "old_line_content": "\tOid type = PG_GETARG_OID(1);",
          "new_line_content": "\tint (*target)(const uint8_t *, size_t);",
          "content_same": false
        },
        {
          "line": 477,
          "old_api": "palloc",
          "new_api": null,
          "old_text": "palloc(sizeof(*column_offsets) * n_columns)",
          "new_text": null,
          "old_line_content": "\tint16 *column_offsets = palloc(sizeof(*column_offsets) * n_columns);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 485,
          "old_api": "COMPRESSIONCOL_IS_SEGMENT_BY",
          "new_api": null,
          "old_text": "COMPRESSIONCOL_IS_SEGMENT_BY(columns[i])",
          "new_text": null,
          "old_line_content": "\t\tif (COMPRESSIONCOL_IS_SEGMENT_BY(columns[i]))",
          "new_line_content": "\t\t\tn_segment_keys += 1;",
          "content_same": false
        },
        {
          "line": 2534,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"no llvm fuzz target for compression algorithm %d and type %d\", algo, type)",
          "new_text": null,
          "old_line_content": "\t\telog(ERROR, \"no llvm fuzz target for compression algorithm %d and type %d\", algo, type);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 488,
          "old_api": "COMPRESSIONCOL_IS_ORDER_BY",
          "new_api": null,
          "old_text": "COMPRESSIONCOL_IS_ORDER_BY(columns[i])",
          "new_text": null,
          "old_line_content": "\t\tif (COMPRESSIONCOL_IS_SEGMENT_BY(columns[i]) || COMPRESSIONCOL_IS_ORDER_BY(columns[i]))",
          "new_line_content": "\t\t\t*n_keys_out += 1;",
          "content_same": false
        },
        {
          "line": 2537,
          "old_api": "LLVMFuzzerRunDriver",
          "new_api": null,
          "old_text": "LLVMFuzzerRunDriver(&argc, &argv, target)",
          "new_text": null,
          "old_line_content": "\tint res = LLVMFuzzerRunDriver(&argc, &argv, target);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2539,
          "old_api": "MemoryContextSwitchTo",
          "new_api": null,
          "old_text": "MemoryContextSwitchTo(old_context)",
          "new_text": null,
          "old_line_content": "\tMemoryContextSwitchTo(old_context);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 493,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"compression should be configured with an orderby or segment by\")",
          "new_text": null,
          "old_line_content": "\t\telog(ERROR, \"compression should be configured with an orderby or segment by\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2541,
          "old_api": "PG_RETURN_INT32",
          "new_api": null,
          "old_text": "PG_RETURN_INT32(res)",
          "new_text": null,
          "old_line_content": "\tPG_RETURN_INT32(res);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 495,
          "old_api": "palloc",
          "new_api": null,
          "old_text": "palloc(sizeof(**keys_out) * *n_keys_out)",
          "new_text": null,
          "old_line_content": "\t*keys_out = palloc(sizeof(**keys_out) * *n_keys_out);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2551,
          "old_api": "palloc0",
          "new_api": null,
          "old_text": "palloc0(sizeof(*segment_filter))",
          "new_text": null,
          "old_line_content": "\tSegmentFilter *segment_filter = palloc0(sizeof(*segment_filter));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 505,
          "old_api": "COMPRESSIONCOL_IS_SEGMENT_BY",
          "new_api": null,
          "old_text": "COMPRESSIONCOL_IS_SEGMENT_BY(column)",
          "new_text": null,
          "old_line_content": "\t\tif (COMPRESSIONCOL_IS_SEGMENT_BY(column))",
          "new_line_content": "\t\t\t(*keys_out)[segment_offset] = column;",
          "content_same": false
        },
        {
          "line": 507,
          "old_api": "COMPRESSIONCOL_IS_ORDER_BY",
          "new_api": null,
          "old_text": "COMPRESSIONCOL_IS_ORDER_BY(column)",
          "new_text": null,
          "old_line_content": "\t\telse if (COMPRESSIONCOL_IS_ORDER_BY(column))",
          "new_line_content": "\t\t\t(*keys_out)[n_segment_keys + orderby_offset] = column;",
          "content_same": false
        },
        {
          "line": 2558,
          "old_api": "namestrcpy",
          "new_api": null,
          "old_text": "namestrcpy(&segment_filter->column_name, column_name)",
          "new_text": null,
          "old_line_content": "\tnamestrcpy(&segment_filter->column_name, column_name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 512,
          "old_api": "NameStr",
          "new_api": null,
          "old_text": "NameStr(column->attname)",
          "new_text": null,
          "old_line_content": "\t\t\telog(ERROR, \"could not find compressed column for \\\"%s\\\"\", NameStr(column->attname));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 514,
          "old_api": "AttrNumberGetAttrOffset",
          "new_api": null,
          "old_text": "AttrNumberGetAttrOffset(compressed_att)",
          "new_text": null,
          "old_line_content": "\t\tcolumn_offsets[i] = AttrNumberGetAttrOffset(compressed_att);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 523,
          "old_api": "RelationGetDescr",
          "new_api": null,
          "old_text": "RelationGetDescr(in_rel)",
          "new_text": null,
          "old_line_content": "\tTupleDesc tupDesc = RelationGetDescr(in_rel);",
          "new_line_content": "\tTuplesortstate *tuplesortstate;",
          "content_same": false
        },
        {
          "line": 2577,
          "old_api": "RelationGetIndexAttrBitmap",
          "new_api": null,
          "old_text": "RelationGetIndexAttrBitmap(comp_chunk_rel, INDEX_ATTR_BITMAP_ALL)",
          "new_text": null,
          "old_line_content": "\tBitmapset *key_columns = RelationGetIndexAttrBitmap(comp_chunk_rel, INDEX_ATTR_BITMAP_ALL);",
          "new_line_content": "#else",
          "content_same": false
        },
        {
          "line": 531,
          "old_api": "palloc",
          "new_api": null,
          "old_text": "palloc(sizeof(*nulls_first) * n_keys)",
          "new_text": null,
          "old_line_content": "\tbool *nulls_first = palloc(sizeof(*nulls_first) * n_keys);",
          "new_line_content": "\tint n;",
          "content_same": false
        },
        {
          "line": 2580,
          "old_api": "RelationGetIndexAttrBitmap",
          "new_api": null,
          "old_text": "RelationGetIndexAttrBitmap(comp_chunk_rel, INDEX_ATTR_BITMAP_HOT_BLOCKING)",
          "new_text": null,
          "old_line_content": "\t\tRelationGetIndexAttrBitmap(comp_chunk_rel, INDEX_ATTR_BITMAP_HOT_BLOCKING);",
          "new_line_content": "\tkey_columns =",
          "content_same": false
        },
        {
          "line": 535,
          "old_api": "RelationGetRelid",
          "new_api": null,
          "old_text": "RelationGetRelid(in_rel)",
          "new_text": null,
          "old_line_content": "\t\tcompress_chunk_populate_sort_info_for_column(RelationGetRelid(in_rel),",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t keys[n],",
          "content_same": false
        },
        {
          "line": 2583,
          "old_api": "RelationGetIndexAttrBitmap",
          "new_api": null,
          "old_text": "RelationGetIndexAttrBitmap(comp_chunk_rel, INDEX_ATTR_BITMAP_SUMMARIZED)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tRelationGetIndexAttrBitmap(comp_chunk_rel, INDEX_ATTR_BITMAP_SUMMARIZED));",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 542,
          "old_api": "tuplesort_begin_heap",
          "new_api": null,
          "old_text": "tuplesort_begin_heap(tupDesc,\n\t\t\t\t\t\t\t\t\t\t  n_keys,\n\t\t\t\t\t\t\t\t\t\t  sort_keys,\n\t\t\t\t\t\t\t\t\t\t  sort_operators,\n\t\t\t\t\t\t\t\t\t\t  sort_collations,\n\t\t\t\t\t\t\t\t\t\t  nulls_first,\n\t\t\t\t\t\t\t\t\t\t  maintenance_work_mem,\n\t\t\t\t\t\t\t\t\t\t  NULL,\n\t\t\t\t\t\t\t\t\t\t  false /*=randomAccess*/)",
          "new_text": null,
          "old_line_content": "\ttuplesortstate = tuplesort_begin_heap(tupDesc,",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t  n_keys,",
          "content_same": false
        },
        {
          "line": 2590,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(colname, column_name)",
          "new_text": null,
          "old_line_content": "\t\tif (strcmp(colname, column_name) == 0)",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 2595,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(false)",
          "new_text": null,
          "old_line_content": "\t\t\t\tAssert(false);",
          "new_line_content": "\t\t\tvar->varattno = i + 1;",
          "content_same": false
        },
        {
          "line": 554,
          "old_api": "heap_getnext",
          "new_api": null,
          "old_text": "heap_getnext(heapScan, ForwardScanDirection)",
          "new_text": null,
          "old_line_content": "\t\t tuple = heap_getnext(heapScan, ForwardScanDirection))",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 556,
          "old_api": "HeapTupleIsValid",
          "new_api": null,
          "old_text": "HeapTupleIsValid(tuple)",
          "new_text": null,
          "old_line_content": "\t\tif (HeapTupleIsValid(tuple))",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 2607,
          "old_api": "bms_next_member",
          "new_api": null,
          "old_text": "bms_next_member(key_columns, i)",
          "new_text": null,
          "old_line_content": "\twhile ((i = bms_next_member(key_columns, i)) > 0)",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 562,
          "old_api": "ExecStoreHeapTuple",
          "new_api": null,
          "old_text": "ExecStoreHeapTuple(tuple, heap_tuple_slot, false)",
          "new_text": null,
          "old_line_content": "\t\t\tExecStoreHeapTuple(tuple, heap_tuple_slot, false);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2611,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(attname, column_name)",
          "new_text": null,
          "old_line_content": "\t\tif (strcmp(attname, column_name) == 0)",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 564,
          "old_api": "tuplesort_puttupleslot",
          "new_api": null,
          "old_text": "tuplesort_puttupleslot(tuplesortstate, heap_tuple_slot)",
          "new_text": null,
          "old_line_content": "\t\t\ttuplesort_puttupleslot(tuplesortstate, heap_tuple_slot);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 2613,
          "old_api": "lappend",
          "new_api": null,
          "old_text": "lappend(pred[attno], node)",
          "new_text": null,
          "old_line_content": "\t\t\tpred[attno] = lappend(pred[attno], node);",
          "new_line_content": "\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 568,
          "old_api": "table_endscan",
          "new_api": null,
          "old_text": "table_endscan(heapScan)",
          "new_text": null,
          "old_line_content": "\ttable_endscan(heapScan);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 574,
          "old_api": "run_analyze_on_chunk",
          "new_api": null,
          "old_text": "run_analyze_on_chunk(in_rel->rd_id)",
          "new_text": null,
          "old_line_content": "\trun_analyze_on_chunk(in_rel->rd_id);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 576,
          "old_api": "ExecDropSingleTupleTableSlot",
          "new_api": null,
          "old_text": "ExecDropSingleTupleTableSlot(heap_tuple_slot)",
          "new_text": null,
          "old_line_content": "\tExecDropSingleTupleTableSlot(heap_tuple_slot);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 578,
          "old_api": "tuplesort_performsort",
          "new_api": null,
          "old_text": "tuplesort_performsort(tuplesortstate)",
          "new_text": null,
          "old_line_content": "\ttuplesort_performsort(tuplesortstate);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 594,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR,\n\t\t\t \"table \\\"%s\\\" does not have column \\\"%s\\\"\",\n\t\t\t get_rel_name(table),\n\t\t\t NameStr(column->attname))",
          "new_text": null,
          "old_line_content": "\t\telog(ERROR,",
          "new_line_content": "\t\t\t \"table \\\"%s\\\" does not have column \\\"%s\\\"\",",
          "content_same": false
        },
        {
          "line": 597,
          "old_api": "NameStr",
          "new_api": null,
          "old_text": "NameStr(column->attname)",
          "new_text": null,
          "old_line_content": "\t\t\t NameStr(column->attname));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 599,
          "old_api": "GETSTRUCT",
          "new_api": null,
          "old_text": "GETSTRUCT(tp)",
          "new_text": null,
          "old_line_content": "\tatt_tup = (Form_pg_attribute) GETSTRUCT(tp);",
          "new_line_content": "\t/* Other valdation checks beyond just existence of a valid comparison operator could be useful",
          "content_same": false
        },
        {
          "line": 2647,
          "old_api": "lfirst",
          "new_api": null,
          "old_text": "lfirst(lf)",
          "new_text": null,
          "old_line_content": "\t\tSegmentFilter *sf = lfirst(lf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 605,
          "old_api": "COMPRESSIONCOL_IS_SEGMENT_BY",
          "new_api": null,
          "old_text": "COMPRESSIONCOL_IS_SEGMENT_BY(column)",
          "new_text": null,
          "old_line_content": "\t*nulls_first = (!(COMPRESSIONCOL_IS_SEGMENT_BY(column))) && column->orderby_nullsfirst;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2654,
          "old_api": "nodeTag",
          "new_api": null,
          "old_text": "nodeTag(node)",
          "new_text": null,
          "old_line_content": "\t\tswitch (nodeTag(node))",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 607,
          "old_api": "lookup_type_cache",
          "new_api": null,
          "old_text": "lookup_type_cache(att_tup->atttypid, TYPECACHE_LT_OPR | TYPECACHE_GT_OPR)",
          "new_text": null,
          "old_line_content": "\ttentry = lookup_type_cache(att_tup->atttypid, TYPECACHE_LT_OPR | TYPECACHE_GT_OPR);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 609,
          "old_api": "COMPRESSIONCOL_IS_SEGMENT_BY",
          "new_api": null,
          "old_text": "COMPRESSIONCOL_IS_SEGMENT_BY(column)",
          "new_text": null,
          "old_line_content": "\tif (COMPRESSIONCOL_IS_SEGMENT_BY(column) || column->orderby_asc)",
          "new_line_content": "\t\t*sort_operator = tentry->lt_opr;",
          "content_same": false
        },
        {
          "line": 615,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR,\n\t\t\t \"no valid sort operator for column \\\"%s\\\" of type \\\"%s\\\"\",\n\t\t\t NameStr(column->attname),\n\t\t\t format_type_be(att_tup->atttypid))",
          "new_text": null,
          "old_line_content": "\t\telog(ERROR,",
          "new_line_content": "\t\t\t \"no valid sort operator for column \\\"%s\\\" of type \\\"%s\\\"\",",
          "content_same": false
        },
        {
          "line": 2665,
          "old_api": "lsecond",
          "new_api": null,
          "old_text": "lsecond(opexpr->args)",
          "new_text": null,
          "old_line_content": "\t\t\t\trightop = lsecond(opexpr->args);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 618,
          "old_api": "format_type_be",
          "new_api": null,
          "old_text": "format_type_be(att_tup->atttypid)",
          "new_text": null,
          "old_line_content": "\t\t\t format_type_be(att_tup->atttypid));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2667,
          "old_api": "IsA",
          "new_api": null,
          "old_text": "IsA(leftop, RelabelType)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (IsA(leftop, RelabelType))",
          "new_line_content": "\t\t\t\t\tleftop = ((RelabelType *) leftop)->arg;",
          "content_same": false
        },
        {
          "line": 620,
          "old_api": "ReleaseSysCache",
          "new_api": null,
          "old_text": "ReleaseSysCache(tp)",
          "new_text": null,
          "old_line_content": "\tReleaseSysCache(tp);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2669,
          "old_api": "IsA",
          "new_api": null,
          "old_text": "IsA(rightop, RelabelType)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (IsA(rightop, RelabelType))",
          "new_line_content": "\t\t\t\t\trightop = ((RelabelType *) rightop)->arg;",
          "content_same": false
        },
        {
          "line": 2672,
          "old_api": "IsA",
          "new_api": null,
          "old_text": "IsA(rightop, Const)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (IsA(leftop, Var) && IsA(rightop, Const))",
          "new_line_content": "\t\t\t\t{",
          "content_same": false
        },
        {
          "line": 2677,
          "old_api": "IsA",
          "new_api": null,
          "old_text": "IsA(leftop, Const)",
          "new_text": null,
          "old_line_content": "\t\t\t\telse if (IsA(rightop, Var) && IsA(leftop, Const))",
          "new_line_content": "\t\t\t\t{",
          "content_same": false
        },
        {
          "line": 634,
          "old_api": "list_make1",
          "new_api": null,
          "old_text": "list_make1(&vr)",
          "new_text": null,
          "old_line_content": "\t\t.rels = list_make1(&vr),",
          "new_line_content": "\t\t.is_vacuumcmd = false,",
          "content_same": false
        },
        {
          "line": 639,
          "old_api": "ExecVacuum",
          "new_api": null,
          "old_text": "ExecVacuum(NULL, &vs, true)",
          "new_text": null,
          "old_line_content": "\tExecVacuum(NULL, &vs, true);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2689,
          "old_api": "copyObject",
          "new_api": null,
          "old_text": "copyObject(var)",
          "new_text": null,
          "old_line_content": "\t\t\t\tnewvar = (Expr *) copyObject(var);",
          "new_line_content": "\t\t\t\t/*",
          "content_same": false
        },
        {
          "line": 2696,
          "old_api": "lsecond",
          "new_api": null,
          "old_text": "lsecond(newclause->args)",
          "new_text": null,
          "old_line_content": "\t\t\t\tlsecond(newclause->args) = arg_value;",
          "new_line_content": "\t\t\t\tif (switch_operands)",
          "content_same": false
        },
        {
          "line": 2700,
          "old_api": "get_opcode",
          "new_api": null,
          "old_text": "get_opcode(newclause->opno)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tnewclause->opfuncid = get_opcode(newclause->opno);",
          "new_line_content": "\t\t\t\t\topno = newclause->opno;",
          "content_same": false
        },
        {
          "line": 2703,
          "old_api": "fix_index_qual",
          "new_api": null,
          "old_text": "fix_index_qual(comp_chunk_rel,\n\t\t\t\t\t\t\t   index_rel,\n\t\t\t\t\t\t\t   (Var *) newvar,\n\t\t\t\t\t\t\t   idx_filters,\n\t\t\t\t\t\t\t   sf->column_name.data,\n\t\t\t\t\t\t\t   (Node *) newclause,\n\t\t\t\t\t\t\t   opno)",
          "new_text": null,
          "old_line_content": "\t\t\t\tfix_index_qual(comp_chunk_rel,",
          "new_line_content": "\t\t\t\t\t\t\t   index_rel,",
          "content_same": false
        },
        {
          "line": 667,
          "old_api": "AttrNumberGetAttrOffset",
          "new_api": null,
          "old_text": "AttrNumberGetAttrOffset(per_column[j].segmentby_column_index)",
          "new_text": null,
          "old_line_content": "\t\t\tint index_att_offset = AttrNumberGetAttrOffset(per_column[j].segmentby_column_index);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2715,
          "old_api": "IsA",
          "new_api": null,
          "old_text": "IsA(ntest->arg, Var)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (IsA(ntest->arg, Var))",
          "new_line_content": "\t\t\t\t{",
          "content_same": false
        },
        {
          "line": 670,
          "old_api": "AttrOffsetGetAttrNumber",
          "new_api": null,
          "old_text": "AttrOffsetGetAttrNumber(uncompressed_col_to_compressed_col[j])",
          "new_text": null,
          "old_line_content": "\t\t\t\tAttrOffsetGetAttrNumber(uncompressed_col_to_compressed_col[j]))",
          "new_line_content": "\t\t\t{",
          "content_same": false
        },
        {
          "line": 2719,
          "old_api": "copyObject",
          "new_api": null,
          "old_text": "copyObject(var)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tExpr *newvar = (Expr *) copyObject(var);",
          "new_line_content": "\t\t\t\t\t((NullTest *) newclause)->arg = newvar;",
          "content_same": false
        },
        {
          "line": 2721,
          "old_api": "fix_index_qual",
          "new_api": null,
          "old_text": "fix_index_qual(comp_chunk_rel,\n\t\t\t\t\t\t\t\t   index_rel,\n\t\t\t\t\t\t\t\t   (Var *) newvar,\n\t\t\t\t\t\t\t\t   idx_filters,\n\t\t\t\t\t\t\t\t   sf->column_name.data,\n\t\t\t\t\t\t\t\t   (Node *) newclause,\n\t\t\t\t\t\t\t\t   0)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tfix_index_qual(comp_chunk_rel,",
          "new_line_content": "\t\t\t\t\t\t\t\t   index_rel,",
          "content_same": false
        },
        {
          "line": 683,
          "old_api": "namestrcmp",
          "new_api": null,
          "old_text": "namestrcmp((Name) &resultRelInfo->ri_IndexRelationDescs[i]\n\t\t\t\t\t\t   ->rd_att->attrs[num_segmentby_columns]\n\t\t\t\t\t\t   .attname,\n\t\t\t\t\t   COMPRESSION_COLUMN_METADATA_SEQUENCE_NUM_NAME)",
          "new_text": null,
          "old_line_content": "\t\t\tnamestrcmp((Name) &resultRelInfo->ri_IndexRelationDescs[i]",
          "new_line_content": "\t\t\t\t\t\t   ->rd_att->attrs[num_segmentby_columns]",
          "content_same": false
        },
        {
          "line": 2743,
          "old_api": "lfirst",
          "new_api": null,
          "old_text": "lfirst(c)",
          "new_text": null,
          "old_line_content": "\t\t\t\tordered_index_filters = lappend(ordered_index_filters, lfirst(c));",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 702,
          "old_api": "index_open",
          "new_api": null,
          "old_text": "index_open(index_oid, AccessShareLock)",
          "new_text": null,
          "old_line_content": "\tRelation index_rel = index_open(index_oid, AccessShareLock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 705,
          "old_api": "GetTransactionSnapshot",
          "new_api": null,
          "old_text": "GetTransactionSnapshot()",
          "new_text": null,
          "old_line_content": "\t\tindex_beginscan(table_rel, index_rel, GetTransactionSnapshot(), num_scankeys, 0);",
          "new_line_content": "\tindex_scan->xs_want_itup = true;",
          "content_same": false
        },
        {
          "line": 707,
          "old_api": "index_rescan",
          "new_api": null,
          "old_text": "index_rescan(index_scan, scankey, num_scankeys, NULL, 0)",
          "new_text": null,
          "old_line_content": "\tindex_rescan(index_scan, scankey, num_scankeys, NULL, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 709,
          "old_api": "index_getnext_tid",
          "new_api": null,
          "old_text": "index_getnext_tid(index_scan, BackwardScanDirection)",
          "new_text": null,
          "old_line_content": "\tif (index_getnext_tid(index_scan, BackwardScanDirection))",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 711,
          "old_api": "index_getattr",
          "new_api": null,
          "old_text": "index_getattr(index_scan->xs_itup,\n\t\t\t\t\t\t\t   index_scan->xs_itupdesc\n\t\t\t\t\t\t\t\t   ->natts, /* Last attribute of the index is sequence number. */\n\t\t\t\t\t\t\t   index_scan->xs_itupdesc,\n\t\t\t\t\t\t\t   &is_null)",
          "new_text": null,
          "old_line_content": "\t\tresult = index_getattr(index_scan->xs_itup,",
          "new_line_content": "\t\t\t\t\t\t\t   index_scan->xs_itupdesc",
          "content_same": false
        },
        {
          "line": 721,
          "old_api": "index_close",
          "new_api": null,
          "old_text": "index_close(index_rel, AccessShareLock)",
          "new_text": null,
          "old_line_content": "\tindex_close(index_rel, AccessShareLock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2774,
          "old_api": "RelationGetIndexList",
          "new_api": null,
          "old_text": "RelationGetIndexList(comp_chunk_rel)",
          "new_text": null,
          "old_line_content": "\tindex_oids = RelationGetIndexList(comp_chunk_rel);",
          "new_line_content": "\tforeach (lc, index_oids)",
          "content_same": false
        },
        {
          "line": 2778,
          "old_api": "lfirst_oid",
          "new_api": null,
          "old_text": "lfirst_oid(lc)",
          "new_text": null,
          "old_line_content": "\t\tRelation index_rel = index_open(lfirst_oid(lc), AccessShareLock);",
          "new_line_content": "\t\tif (index_rel->rd_index->indnatts < total_filters)",
          "content_same": false
        },
        {
          "line": 734,
          "old_api": "RelationGetDescr",
          "new_api": null,
          "old_text": "RelationGetDescr(table_rel)",
          "new_text": null,
          "old_line_content": "\tTupleDesc in_desc = RelationGetDescr(table_rel);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2782,
          "old_api": "index_close",
          "new_api": null,
          "old_text": "index_close(index_rel, AccessShareLock)",
          "new_text": null,
          "old_line_content": "\t\t\tindex_close(index_rel, AccessShareLock);",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 737,
          "old_api": "GetLatestSnapshot",
          "new_api": null,
          "old_text": "GetLatestSnapshot()",
          "new_text": null,
          "old_line_content": "\t\ttable_beginscan(table_rel, GetLatestSnapshot(), num_scankeys, scankey);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 740,
          "old_api": "heap_getnext",
          "new_api": null,
          "old_text": "heap_getnext(heap_scan, ForwardScanDirection)",
          "new_text": null,
          "old_line_content": "\t\t compressed_tuple = heap_getnext(heap_scan, ForwardScanDirection))",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 742,
          "old_api": "HeapTupleIsValid",
          "new_api": null,
          "old_text": "HeapTupleIsValid(compressed_tuple)",
          "new_text": null,
          "old_line_content": "\t\tAssert(HeapTupleIsValid(compressed_tuple));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 744,
          "old_api": "heap_getattr",
          "new_api": null,
          "old_text": "heap_getattr(compressed_tuple, seq_num_column_num, in_desc, &is_null)",
          "new_text": null,
          "old_line_content": "\t\tseq_num = heap_getattr(compressed_tuple, seq_num_column_num, in_desc, &is_null);",
          "new_line_content": "\t\tif (!is_null)",
          "content_same": false
        },
        {
          "line": 2792,
          "old_api": "lfirst",
          "new_api": null,
          "old_text": "lfirst(li)",
          "new_text": null,
          "old_line_content": "\t\t\t\tSegmentFilter *sf = lfirst(li);",
          "new_line_content": "\t\t\t\t/* ensure column exists in index relation */",
          "content_same": false
        },
        {
          "line": 2794,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(attname, sf->column_name.data)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (!strcmp(attname, sf->column_name.data))",
          "new_line_content": "\t\t\t\t{",
          "content_same": false
        },
        {
          "line": 747,
          "old_api": "DatumGetInt32",
          "new_api": null,
          "old_text": "DatumGetInt32(seq_num)",
          "new_text": null,
          "old_line_content": "\t\t\tcurr_seq_num = DatumGetInt32(seq_num);",
          "new_line_content": "\t\t\tif (max_seq_num < curr_seq_num)",
          "content_same": false
        },
        {
          "line": 755,
          "old_api": "table_endscan",
          "new_api": null,
          "old_text": "table_endscan(heap_scan)",
          "new_text": null,
          "old_line_content": "\ttable_endscan(heap_scan);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2803,
          "old_api": "RelationGetRelationName",
          "new_api": null,
          "old_text": "RelationGetRelationName(index_rel)",
          "new_text": null,
          "old_line_content": "\t\t\telog(DEBUG2, \"index \\\"%s\\\" is used for scan. \", RelationGetRelationName(index_rel));",
          "new_line_content": "\t\t\t/* found index which has all columns specified in WHERE */",
          "content_same": false
        },
        {
          "line": 2807,
          "old_api": "index_close",
          "new_api": null,
          "old_text": "index_close(index_rel, AccessShareLock)",
          "new_text": null,
          "old_line_content": "\t\tindex_close(index_rel, AccessShareLock);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 772,
          "old_api": "OidIsValid",
          "new_api": null,
          "old_text": "OidIsValid(index_oid)",
          "new_text": null,
          "old_line_content": "\tbool is_index_scan = OidIsValid(index_oid);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2828,
          "old_api": "lfirst",
          "new_api": null,
          "old_text": "lfirst(lc)",
          "new_text": null,
          "old_line_content": "\t\tNode *node = copyObject(lfirst(lc));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2832,
          "old_api": "nodeTag",
          "new_api": null,
          "old_text": "nodeTag(node)",
          "new_text": null,
          "old_line_content": "\t\tswitch (nodeTag(node))",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 785,
          "old_api": "AllocSetContextCreate",
          "new_api": null,
          "old_text": "AllocSetContextCreate(CurrentMemoryContext,\n\t\t\t\t\t\t\t\t\t\t\t\t   \"get max sequence number scan\",\n\t\t\t\t\t\t\t\t\t\t\t\t   ALLOCSET_DEFAULT_SIZES)",
          "new_text": null,
          "old_line_content": "\tMemoryContext scan_ctx = AllocSetContextCreate(CurrentMemoryContext,",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t   \"get max sequence number scan\",",
          "content_same": false
        },
        {
          "line": 789,
          "old_api": "MemoryContextSwitchTo",
          "new_api": null,
          "old_text": "MemoryContextSwitchTo(scan_ctx)",
          "new_text": null,
          "old_line_content": "\told_ctx = MemoryContextSwitchTo(scan_ctx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2841,
          "old_api": "lsecond",
          "new_api": null,
          "old_text": "lsecond(opexpr->args)",
          "new_text": null,
          "old_line_content": "\t\t\t\trightop = lsecond(opexpr->args);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 795,
          "old_api": "palloc0",
          "new_api": null,
          "old_text": "palloc0(sizeof(ScanKeyData) * num_scankeys)",
          "new_text": null,
          "old_line_content": "\t\tscankey = palloc0(sizeof(ScanKeyData) * num_scankeys);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2843,
          "old_api": "IsA",
          "new_api": null,
          "old_text": "IsA(leftop, RelabelType)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (IsA(leftop, RelabelType))",
          "new_line_content": "\t\t\t\t\tleftop = ((RelabelType *) leftop)->arg;",
          "content_same": false
        },
        {
          "line": 2845,
          "old_api": "IsA",
          "new_api": null,
          "old_text": "IsA(rightop, RelabelType)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (IsA(rightop, RelabelType))",
          "new_line_content": "\t\t\t\t\trightop = ((RelabelType *) rightop)->arg;",
          "content_same": false
        },
        {
          "line": 2848,
          "old_api": "IsA",
          "new_api": null,
          "old_text": "IsA(rightop, Const)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (IsA(leftop, Var) && IsA(rightop, Const))",
          "new_line_content": "\t\t\t\t{",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": "AttrOffsetGetAttrNumber",
          "new_api": null,
          "old_text": "AttrOffsetGetAttrNumber(uncompressed_col_to_compressed_col[i])",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t  AttrOffsetGetAttrNumber(uncompressed_col_to_compressed_col[i]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2853,
          "old_api": "IsA",
          "new_api": null,
          "old_text": "IsA(leftop, Const)",
          "new_text": null,
          "old_line_content": "\t\t\t\telse if (IsA(rightop, Var) && IsA(leftop, Const))",
          "new_line_content": "\t\t\t\t{",
          "content_same": false
        },
        {
          "line": 809,
          "old_api": "ScanKeyEntryInitialize",
          "new_api": null,
          "old_text": "ScanKeyEntryInitialize(&scankey[col.segmentby_column_index - 1],\n\t\t\t\t\t\t\t\t\t   SK_ISNULL | SK_SEARCHNULL,\n\t\t\t\t\t\t\t\t\t   attno,\n\t\t\t\t\t\t\t\t\t   InvalidStrategy, /* no strategy */\n\t\t\t\t\t\t\t\t\t   InvalidOid,\t\t/* no strategy subtype */\n\t\t\t\t\t\t\t\t\t   InvalidOid,\t\t/* no collation */\n\t\t\t\t\t\t\t\t\t   InvalidOid,\t\t/* no reg proc for this */\n\t\t\t\t\t\t\t\t\t   (Datum) 0)",
          "new_text": null,
          "old_line_content": "\t\t\t\tScanKeyEntryInitialize(&scankey[col.segmentby_column_index - 1],",
          "new_line_content": "\t\t\t\t\t\t\t\t\t   SK_ISNULL | SK_SEARCHNULL,",
          "content_same": false
        },
        {
          "line": 2864,
          "old_api": "get_attname",
          "new_api": null,
          "old_text": "get_attname(ch->table_id, var->varattno, false)",
          "new_text": null,
          "old_line_content": "\t\t\t\tcolumn_name = get_attname(ch->table_id, var->varattno, false);",
          "new_line_content": "\t\t\t\tFormData_hypertable_compression *fd =",
          "content_same": false
        },
        {
          "line": 820,
          "old_api": "ScanKeyEntryInitializeWithInfo",
          "new_api": null,
          "old_text": "ScanKeyEntryInitializeWithInfo(&scankey[col.segmentby_column_index - 1],\n\t\t\t\t\t\t\t\t\t\t\t   0, /* flags */\n\t\t\t\t\t\t\t\t\t\t\t   attno,\n\t\t\t\t\t\t\t\t\t\t\t   BTEqualStrategyNumber,\n\t\t\t\t\t\t\t\t\t\t\t   InvalidOid, /* No strategy subtype. */\n\t\t\t\t\t\t\t\t\t\t\t   col.segment_info->collation,\n\t\t\t\t\t\t\t\t\t\t\t   &col.segment_info->eq_fn,\n\t\t\t\t\t\t\t\t\t\t\t   col.segment_info->val)",
          "new_text": null,
          "old_line_content": "\t\t\t\tScanKeyEntryInitializeWithInfo(&scankey[col.segmentby_column_index - 1],",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t   0, /* flags */",
          "content_same": false
        },
        {
          "line": 2869,
          "old_api": "COMPRESSIONCOL_IS_SEGMENT_BY",
          "new_api": null,
          "old_text": "COMPRESSIONCOL_IS_SEGMENT_BY(fd)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (COMPRESSIONCOL_IS_SEGMENT_BY(fd))",
          "new_line_content": "\t\t\t\t{",
          "content_same": false
        },
        {
          "line": 835,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(num_scankeys > 0)",
          "new_text": null,
          "old_line_content": "\t\tAssert(num_scankeys > 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2883,
          "old_api": "add_filter_column_strategy",
          "new_api": null,
          "old_text": "add_filter_column_strategy(column_name,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   op_strategy,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   arg_value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   false)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\t\t\tadd_filter_column_strategy(column_name,",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   op_strategy,",
          "content_same": false
        },
        {
          "line": 837,
          "old_api": "index_scan_sequence_number",
          "new_api": null,
          "old_text": "index_scan_sequence_number(table_rel, index_oid, scankey, num_scankeys)",
          "new_text": null,
          "old_line_content": "\t\tresult = index_scan_sequence_number(table_rel, index_oid, scankey, num_scankeys);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 2887,
          "old_api": "lappend",
          "new_api": null,
          "old_text": "lappend(*segmentby_predicates, node)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t*segmentby_predicates = lappend(*segmentby_predicates, node);",
          "new_line_content": "\t\t\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 842,
          "old_api": "table_scan_sequence_number",
          "new_api": null,
          "old_text": "table_scan_sequence_number(table_rel, seq_num_column_num, scankey, num_scankeys)",
          "new_text": null,
          "old_line_content": "\t\tresult = table_scan_sequence_number(table_rel, seq_num_column_num, scankey, num_scankeys);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 2891,
          "old_api": "COMPRESSIONCOL_IS_ORDER_BY",
          "new_api": null,
          "old_text": "COMPRESSIONCOL_IS_ORDER_BY(fd)",
          "new_text": null,
          "old_line_content": "\t\t\t\telse if (COMPRESSIONCOL_IS_ORDER_BY(fd))",
          "new_line_content": "\t\t\t\t{",
          "content_same": false
        },
        {
          "line": 846,
          "old_api": "MemoryContextDelete",
          "new_api": null,
          "old_text": "MemoryContextDelete(scan_ctx)",
          "new_text": null,
          "old_line_content": "\tMemoryContextDelete(scan_ctx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2898,
          "old_api": "lappend",
          "new_api": null,
          "old_text": "lappend(\n\t\t\t\t\t\t\t\t*filters,\n\t\t\t\t\t\t\t\tadd_filter_column_strategy(compression_column_segment_min_name(fd),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   BTLessEqualStrategyNumber,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   arg_value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   false))",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t*filters = lappend(",
          "new_line_content": "\t\t\t\t\t\t\t\t*filters,",
          "content_same": false
        },
        {
          "line": 2900,
          "old_api": "compression_column_segment_min_name",
          "new_api": null,
          "old_text": "compression_column_segment_min_name(fd)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\tadd_filter_column_strategy(compression_column_segment_min_name(fd),",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t\t   BTLessEqualStrategyNumber,",
          "content_same": false
        },
        {
          "line": 2904,
          "old_api": "lappend",
          "new_api": null,
          "old_text": "lappend(\n\t\t\t\t\t\t\t\t*filters,\n\t\t\t\t\t\t\t\tadd_filter_column_strategy(compression_column_segment_max_name(fd),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   BTGreaterEqualStrategyNumber,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   arg_value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   false))",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t*filters = lappend(",
          "new_line_content": "\t\t\t\t\t\t\t\t*filters,",
          "content_same": false
        },
        {
          "line": 2906,
          "old_api": "compression_column_segment_max_name",
          "new_api": null,
          "old_text": "compression_column_segment_max_name(fd)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\tadd_filter_column_strategy(compression_column_segment_max_name(fd),",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t\t   BTGreaterEqualStrategyNumber,",
          "content_same": false
        },
        {
          "line": 862,
          "old_api": "RelationGetDescr",
          "new_api": null,
          "old_text": "RelationGetDescr(compressed_table)",
          "new_text": null,
          "old_line_content": "\tTupleDesc out_desc = RelationGetDescr(compressed_table);",
          "new_line_content": "\tint col;",
          "content_same": false
        },
        {
          "line": 868,
          "old_api": "CStringGetDatum",
          "new_api": null,
          "old_text": "CStringGetDatum(COMPRESSION_COLUMN_METADATA_SEQUENCE_NUM_NAME)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\tCStringGetDatum(COMPRESSION_COLUMN_METADATA_SEQUENCE_NUM_NAME)));",
          "new_line_content": "\tAttrNumber count_metadata_column_num =",
          "content_same": false
        },
        {
          "line": 2916,
          "old_api": "lappend",
          "new_api": null,
          "old_text": "lappend(\n\t\t\t\t\t\t\t\t*filters,\n\t\t\t\t\t\t\t\tadd_filter_column_strategy(compression_column_segment_min_name(fd),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   op_strategy,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   arg_value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   false))",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t*filters = lappend(",
          "new_line_content": "\t\t\t\t\t\t\t\t*filters,",
          "content_same": false
        },
        {
          "line": 870,
          "old_api": "NameStr",
          "new_api": null,
          "old_text": "NameStr(*count_metadata_name)",
          "new_text": null,
          "old_line_content": "\t\tget_attnum(compressed_table->rd_id, NameStr(*count_metadata_name));",
          "new_line_content": "\tAttrNumber sequence_num_column_num =",
          "content_same": false
        },
        {
          "line": 2918,
          "old_api": "compression_column_segment_min_name",
          "new_api": null,
          "old_text": "compression_column_segment_min_name(fd)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\tadd_filter_column_strategy(compression_column_segment_min_name(fd),",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t\t   op_strategy,",
          "content_same": false
        },
        {
          "line": 873,
          "old_api": "ts_custom_type_cache_get",
          "new_api": null,
          "old_text": "ts_custom_type_cache_get(CUSTOM_TYPE_COMPRESSED_DATA)",
          "new_text": null,
          "old_line_content": "\tOid compressed_data_type_oid = ts_custom_type_cache_get(CUSTOM_TYPE_COMPRESSED_DATA)->type_oid;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 876,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR,\n\t\t\t \"missing metadata column '%s' in compressed table\",\n\t\t\t COMPRESSION_COLUMN_METADATA_COUNT_NAME)",
          "new_text": null,
          "old_line_content": "\t\telog(ERROR,",
          "new_line_content": "\t\t\t \"missing metadata column '%s' in compressed table\",",
          "content_same": false
        },
        {
          "line": 2928,
          "old_api": "lappend",
          "new_api": null,
          "old_text": "lappend(\n\t\t\t\t\t\t\t\t*filters,\n\t\t\t\t\t\t\t\tadd_filter_column_strategy(compression_column_segment_max_name(fd),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   op_strategy,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   arg_value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   false))",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t*filters = lappend(",
          "new_line_content": "\t\t\t\t\t\t\t\t*filters,",
          "content_same": false
        },
        {
          "line": 881,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR,\n\t\t\t \"missing metadata column '%s' in compressed table\",\n\t\t\t COMPRESSION_COLUMN_METADATA_SEQUENCE_NUM_NAME)",
          "new_text": null,
          "old_line_content": "\t\telog(ERROR,",
          "new_line_content": "\t\t\t \"missing metadata column '%s' in compressed table\",",
          "content_same": false
        },
        {
          "line": 2930,
          "old_api": "compression_column_segment_max_name",
          "new_api": null,
          "old_text": "compression_column_segment_max_name(fd)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\tadd_filter_column_strategy(compression_column_segment_max_name(fd),",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t\t   op_strategy,",
          "content_same": false
        },
        {
          "line": 886,
          "old_api": "AllocSetContextCreate",
          "new_api": null,
          "old_text": "AllocSetContextCreate(CurrentMemoryContext,\n\t\t\t\t\t\t\t\t\t\t\t \"compress chunk per-row\",\n\t\t\t\t\t\t\t\t\t\t\t ALLOCSET_DEFAULT_SIZES)",
          "new_text": null,
          "old_line_content": "\t\t.per_row_ctx = AllocSetContextCreate(CurrentMemoryContext,",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t \"compress chunk per-row\",",
          "content_same": false
        },
        {
          "line": 891,
          "old_api": "ts_catalog_open_indexes",
          "new_api": null,
          "old_text": "ts_catalog_open_indexes(compressed_table)",
          "new_text": null,
          "old_line_content": "\t\t.resultRelInfo = ts_catalog_open_indexes(compressed_table),",
          "new_line_content": "\t\t.n_input_columns = uncompressed_tuple_desc->natts,",
          "content_same": false
        },
        {
          "line": 893,
          "old_api": "palloc0",
          "new_api": null,
          "old_text": "palloc0(sizeof(PerColumn) * uncompressed_tuple_desc->natts)",
          "new_text": null,
          "old_line_content": "\t\t.per_column = palloc0(sizeof(PerColumn) * uncompressed_tuple_desc->natts),",
          "new_line_content": "\t\t.uncompressed_col_to_compressed_col =",
          "content_same": false
        },
        {
          "line": 2942,
          "old_api": "IsA",
          "new_api": null,
          "old_text": "IsA(ntest->arg, Var)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (IsA(ntest->arg, Var))",
          "new_line_content": "\t\t\t\t{",
          "content_same": false
        },
        {
          "line": 895,
          "old_api": "palloc0",
          "new_api": null,
          "old_text": "palloc0(sizeof(*row_compressor->uncompressed_col_to_compressed_col) *\n\t\t\t\t\tuncompressed_tuple_desc->natts)",
          "new_text": null,
          "old_line_content": "\t\t\tpalloc0(sizeof(*row_compressor->uncompressed_col_to_compressed_col) *",
          "new_line_content": "\t\t\t\t\tuncompressed_tuple_desc->natts),",
          "content_same": false
        },
        {
          "line": 900,
          "old_api": "palloc",
          "new_api": null,
          "old_text": "palloc(sizeof(bool) * num_columns_in_compressed_table)",
          "new_text": null,
          "old_line_content": "\t\t.compressed_is_null = palloc(sizeof(bool) * num_columns_in_compressed_table),",
          "new_line_content": "\t\t.rows_compressed_into_current_value = 0,",
          "content_same": false
        },
        {
          "line": 2948,
          "old_api": "get_attname",
          "new_api": null,
          "old_text": "get_attname(ch->table_id, var->varattno, false)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tcolumn_name = get_attname(ch->table_id, var->varattno, false);",
          "new_line_content": "\t\t\t\t\tFormData_hypertable_compression *fd =",
          "content_same": false
        },
        {
          "line": 2951,
          "old_api": "COMPRESSIONCOL_IS_SEGMENT_BY",
          "new_api": null,
          "old_text": "COMPRESSIONCOL_IS_SEGMENT_BY(fd)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tif (COMPRESSIONCOL_IS_SEGMENT_BY(fd))",
          "new_line_content": "\t\t\t\t\t{",
          "content_same": false
        },
        {
          "line": 2955,
          "old_api": "add_filter_column_strategy",
          "new_api": null,
          "old_text": "add_filter_column_strategy(column_name,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   InvalidStrategy,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   NULL,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   true)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\t\tadd_filter_column_strategy(column_name,",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   InvalidStrategy,",
          "content_same": false
        },
        {
          "line": 910,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(row_compressor->compressed_is_null, 1, sizeof(bool) * num_columns_in_compressed_table)",
          "new_text": null,
          "old_line_content": "\tmemset(row_compressor->compressed_is_null, 1, sizeof(bool) * num_columns_in_compressed_table);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2959,
          "old_api": "lappend",
          "new_api": null,
          "old_text": "lappend(*segmentby_predicates, node)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t*segmentby_predicates = lappend(*segmentby_predicates, node);",
          "new_line_content": "\t\t\t\t\t\tif (ntest->nulltesttype == IS_NULL)",
          "content_same": false
        },
        {
          "line": 2961,
          "old_api": "lappend_int",
          "new_api": null,
          "old_text": "lappend_int(*is_null, 1)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t*is_null = lappend_int(*is_null, 1);",
          "new_line_content": "\t\t\t\t\t\telse",
          "content_same": false
        },
        {
          "line": 2963,
          "old_api": "lappend_int",
          "new_api": null,
          "old_text": "lappend_int(*is_null, 0)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t*is_null = lappend_int(*is_null, 0);",
          "new_line_content": "\t\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 918,
          "old_api": "TupleDescAttr",
          "new_api": null,
          "old_text": "TupleDescAttr(uncompressed_tuple_desc, in_column_offset)",
          "new_text": null,
          "old_line_content": "\t\tForm_pg_attribute column_attr = TupleDescAttr(uncompressed_tuple_desc, in_column_offset);",
          "new_line_content": "\t\tAttrNumber compressed_colnum =",
          "content_same": false
        },
        {
          "line": 920,
          "old_api": "NameStr",
          "new_api": null,
          "old_text": "NameStr(compression_info->attname)",
          "new_text": null,
          "old_line_content": "\t\t\tget_attnum(compressed_table->rd_id, NameStr(compression_info->attname));",
          "new_line_content": "\t\tForm_pg_attribute compressed_column_attr =",
          "content_same": false
        },
        {
          "line": 922,
          "old_api": "AttrNumberGetAttrOffset",
          "new_api": null,
          "old_text": "AttrNumberGetAttrOffset(compressed_colnum)",
          "new_text": null,
          "old_line_content": "\t\t\tTupleDescAttr(out_desc, AttrNumberGetAttrOffset(compressed_colnum));",
          "new_line_content": "\t\trow_compressor->uncompressed_col_to_compressed_col[in_column_offset] =",
          "content_same": false
        },
        {
          "line": 926,
          "old_api": "COMPRESSIONCOL_IS_SEGMENT_BY",
          "new_api": null,
          "old_text": "COMPRESSIONCOL_IS_SEGMENT_BY(compression_info)",
          "new_text": null,
          "old_line_content": "\t\tif (!COMPRESSIONCOL_IS_SEGMENT_BY(compression_info))",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 932,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR,\n\t\t\t\t\t \"expected column '%s' to be a compressed data type\",\n\t\t\t\t\t compression_info->attname.data)",
          "new_text": null,
          "old_line_content": "\t\t\t\telog(ERROR,",
          "new_line_content": "\t\t\t\t\t \"expected column '%s' to be a compressed data type\",",
          "content_same": false
        },
        {
          "line": 939,
          "old_api": "compression_column_segment_max_name",
          "new_api": null,
          "old_text": "compression_column_segment_max_name(compression_info)",
          "new_text": null,
          "old_line_content": "\t\t\t\tchar *segment_max_col_name = compression_column_segment_max_name(compression_info);",
          "new_line_content": "\t\t\t\tAttrNumber segment_min_attr_number =",
          "content_same": false
        },
        {
          "line": 941,
          "old_api": "get_attnum",
          "new_api": null,
          "old_text": "get_attnum(compressed_table->rd_id, segment_min_col_name)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tget_attnum(compressed_table->rd_id, segment_min_col_name);",
          "new_line_content": "\t\t\t\tAttrNumber segment_max_attr_number =",
          "content_same": false
        },
        {
          "line": 943,
          "old_api": "get_attnum",
          "new_api": null,
          "old_text": "get_attnum(compressed_table->rd_id, segment_max_col_name)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tget_attnum(compressed_table->rd_id, segment_max_col_name);",
          "new_line_content": "\t\t\t\tif (segment_min_attr_number == InvalidAttrNumber)",
          "content_same": false
        },
        {
          "line": 945,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"couldn't find metadata column \\\"%s\\\"\", segment_min_col_name)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\telog(ERROR, \"couldn't find metadata column \\\"%s\\\"\", segment_min_col_name);",
          "new_line_content": "\t\t\t\tif (segment_max_attr_number == InvalidAttrNumber)",
          "content_same": false
        },
        {
          "line": 2993,
          "old_api": "palloc0",
          "new_api": null,
          "old_text": "palloc0(filters->length * sizeof(ScanKeyData))",
          "new_text": null,
          "old_line_content": "\tScanKeyData *scankeys = palloc0(filters->length * sizeof(ScanKeyData));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 949,
          "old_api": "AttrNumberGetAttrOffset",
          "new_api": null,
          "old_text": "AttrNumberGetAttrOffset(segment_max_attr_number)",
          "new_text": null,
          "old_line_content": "\t\t\t\tsegment_max_attr_offset = AttrNumberGetAttrOffset(segment_max_attr_number);",
          "new_line_content": "\t\t\t\tsegment_min_max_builder =",
          "content_same": false
        },
        {
          "line": 2998,
          "old_api": "NameStr",
          "new_api": null,
          "old_text": "NameStr(filter->column_name)",
          "new_text": null,
          "old_line_content": "\t\tAttrNumber attno = get_attnum(decompressor->in_rel->rd_id, NameStr(filter->column_name));",
          "new_line_content": "\t\tif (attno == InvalidAttrNumber)",
          "content_same": false
        },
        {
          "line": 951,
          "old_api": "segment_meta_min_max_builder_create",
          "new_api": null,
          "old_text": "segment_meta_min_max_builder_create(column_attr->atttypid,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolumn_attr->attcollation)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tsegment_meta_min_max_builder_create(column_attr->atttypid,",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolumn_attr->attcollation);",
          "content_same": false
        },
        {
          "line": 955,
          "old_api": "compressor_for_algorithm_and_type",
          "new_api": null,
          "old_text": "compressor_for_algorithm_and_type(compression_info->algo_id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolumn_attr->atttypid)",
          "new_text": null,
          "old_line_content": "\t\t\t\t.compressor = compressor_for_algorithm_and_type(compression_info->algo_id,",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolumn_attr->atttypid),",
          "content_same": false
        },
        {
          "line": 3004,
          "old_api": "RelationGetRelationName",
          "new_api": null,
          "old_text": "RelationGetRelationName(decompressor->in_rel)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\tRelationGetRelationName(decompressor->in_rel))));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3007,
          "old_api": "NameStr",
          "new_api": null,
          "old_text": "NameStr(filter->column_name)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t  NameStr(filter->column_name),",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t  filter->strategy,",
          "content_same": false
        },
        {
          "line": 966,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR,\n\t\t\t\t\t \"expected segment by column \\\"%s\\\" to be same type as uncompressed column\",\n\t\t\t\t\t compression_info->attname.data)",
          "new_text": null,
          "old_line_content": "\t\t\t\telog(ERROR,",
          "new_line_content": "\t\t\t\t\t \"expected segment by column \\\"%s\\\" to be same type as uncompressed column\",",
          "content_same": false
        },
        {
          "line": 970,
          "old_api": "segment_info_new",
          "new_api": null,
          "old_text": "segment_info_new(column_attr)",
          "new_text": null,
          "old_line_content": "\t\t\t\t.segment_info = segment_info_new(column_attr),",
          "new_line_content": "\t\t\t\t.segmentby_column_index = compression_info->segmentby_column_index,",
          "content_same": false
        },
        {
          "line": 3024,
          "old_api": "table_tuple_delete",
          "new_api": null,
          "old_text": "table_tuple_delete(decompressor->in_rel,\n\t\t\t\t\t\t\t\t&compressed_tuple->t_self,\n\t\t\t\t\t\t\t\tdecompressor->mycid,\n\t\t\t\t\t\t\t\tGetTransactionSnapshot(),\n\t\t\t\t\t\t\t\tInvalidSnapshot,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t&tmfd,\n\t\t\t\t\t\t\t\tfalse)",
          "new_text": null,
          "old_line_content": "\tresult = table_tuple_delete(decompressor->in_rel,",
          "new_line_content": "\t\t\t\t\t\t\t\t&compressed_tuple->t_self,",
          "content_same": false
        },
        {
          "line": 979,
          "old_api": "get_compressed_chunk_index",
          "new_api": null,
          "old_text": "get_compressed_chunk_index(row_compressor->resultRelInfo,\n\t\t\t\t\t\t\t\t   row_compressor->uncompressed_col_to_compressed_col,\n\t\t\t\t\t\t\t\t   row_compressor->per_column,\n\t\t\t\t\t\t\t\t   row_compressor->n_input_columns)",
          "new_text": null,
          "old_line_content": "\t\tget_compressed_chunk_index(row_compressor->resultRelInfo,",
          "new_line_content": "\t\t\t\t\t\t\t\t   row_compressor->uncompressed_col_to_compressed_col,",
          "content_same": false
        },
        {
          "line": 3027,
          "old_api": "GetTransactionSnapshot",
          "new_api": null,
          "old_text": "GetTransactionSnapshot()",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\tGetTransactionSnapshot(),",
          "new_line_content": "\t\t\t\t\t\t\t\tInvalidSnapshot,",
          "content_same": false
        },
        {
          "line": 990,
          "old_api": "MakeTupleTableSlot",
          "new_api": null,
          "old_text": "MakeTupleTableSlot(sorted_desc, &TTSOpsMinimalTuple)",
          "new_text": null,
          "old_line_content": "\tTupleTableSlot *slot = MakeTupleTableSlot(sorted_desc, &TTSOpsMinimalTuple);",
          "new_line_content": "\tbool got_tuple;",
          "content_same": false
        },
        {
          "line": 993,
          "old_api": "tuplesort_gettupleslot",
          "new_api": null,
          "old_text": "tuplesort_gettupleslot(sorted_rel,\n\t\t\t\t\t\t\t\t\t\t\ttrue /*=forward*/,\n\t\t\t\t\t\t\t\t\t\t\tfalse /*=copy*/,\n\t\t\t\t\t\t\t\t\t\t\tslot,\n\t\t\t\t\t\t\t\t\t\t\tNULL /*=abbrev*/)",
          "new_text": null,
          "old_line_content": "\tfor (got_tuple = tuplesort_gettupleslot(sorted_rel,",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\ttrue /*=forward*/,",
          "content_same": false
        },
        {
          "line": 3042,
          "old_api": "IsolationUsesXactSnapshot",
          "new_api": null,
          "old_text": "IsolationUsesXactSnapshot()",
          "new_text": null,
          "old_line_content": "\t\t\tif (IsolationUsesXactSnapshot())",
          "new_line_content": "\t\t\t{",
          "content_same": false
        },
        {
          "line": 999,
          "old_api": "tuplesort_gettupleslot",
          "new_api": null,
          "old_text": "tuplesort_gettupleslot(sorted_rel,\n\t\t\t\t\t\t\t\t\t\t\ttrue /*=forward*/,\n\t\t\t\t\t\t\t\t\t\t\tfalse /*=copy*/,\n\t\t\t\t\t\t\t\t\t\t\tslot,\n\t\t\t\t\t\t\t\t\t\t\tNULL /*=abbrev*/)",
          "new_text": null,
          "old_line_content": "\t\t got_tuple = tuplesort_gettupleslot(sorted_rel,",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\ttrue /*=forward*/,",
          "content_same": false
        },
        {
          "line": 3047,
          "old_api": "errmsg",
          "new_api": null,
          "old_text": "errmsg(\"could not serialize access due to concurrent update\")",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t errmsg(\"could not serialize access due to concurrent update\")));",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 1005,
          "old_api": "row_compressor_process_ordered_slot",
          "new_api": null,
          "old_text": "row_compressor_process_ordered_slot(row_compressor, slot, mycid)",
          "new_text": null,
          "old_line_content": "\t\trow_compressor_process_ordered_slot(row_compressor, slot, mycid);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1009,
          "old_api": "row_compressor_flush",
          "new_api": null,
          "old_text": "row_compressor_flush(row_compressor, mycid, true)",
          "new_text": null,
          "old_line_content": "\t\trow_compressor_flush(row_compressor, mycid, true);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3057,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"tuple concurrently updated\")",
          "new_text": null,
          "old_line_content": "\t\t\telog(ERROR, \"tuple concurrently updated\");",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1011,
          "old_api": "ExecDropSingleTupleTableSlot",
          "new_api": null,
          "old_text": "ExecDropSingleTupleTableSlot(slot)",
          "new_text": null,
          "old_line_content": "\tExecDropSingleTupleTableSlot(slot);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3062,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"attempted to lock invisible tuple\")",
          "new_text": null,
          "old_line_content": "\t\t\telog(ERROR, \"attempted to lock invisible tuple\");",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1020,
          "old_api": "MemoryContextSwitchTo",
          "new_api": null,
          "old_text": "MemoryContextSwitchTo(row_compressor->per_row_ctx)",
          "new_text": null,
          "old_line_content": "\told_ctx = MemoryContextSwitchTo(row_compressor->per_row_ctx);",
          "new_line_content": "\tif (row_compressor->first_iteration)",
          "content_same": false
        },
        {
          "line": 3069,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"unexpected tuple operation result: %d\", result)",
          "new_text": null,
          "old_line_content": "\t\t\telog(ERROR, \"unexpected tuple operation result: %d\", result);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1023,
          "old_api": "row_compressor_update_group",
          "new_api": null,
          "old_text": "row_compressor_update_group(row_compressor, slot)",
          "new_text": null,
          "old_line_content": "\t\trow_compressor_update_group(row_compressor, slot);",
          "new_line_content": "\t\trow_compressor->first_iteration = false;",
          "content_same": false
        },
        {
          "line": 1026,
          "old_api": "row_compressor_new_row_is_in_new_group",
          "new_api": null,
          "old_text": "row_compressor_new_row_is_in_new_group(row_compressor, slot)",
          "new_text": null,
          "old_line_content": "\tbool changed_groups = row_compressor_new_row_is_in_new_group(row_compressor, slot);",
          "new_line_content": "\tbool compressed_row_is_full =",
          "content_same": false
        },
        {
          "line": 1032,
          "old_api": "row_compressor_flush",
          "new_api": null,
          "old_text": "row_compressor_flush(row_compressor, mycid, changed_groups)",
          "new_text": null,
          "old_line_content": "\t\t\trow_compressor_flush(row_compressor, mycid, changed_groups);",
          "new_line_content": "\t\tif (changed_groups)",
          "content_same": false
        },
        {
          "line": 1034,
          "old_api": "row_compressor_update_group",
          "new_api": null,
          "old_text": "row_compressor_update_group(row_compressor, slot)",
          "new_text": null,
          "old_line_content": "\t\t\trow_compressor_update_group(row_compressor, slot);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1039,
          "old_api": "ExecClearTuple",
          "new_api": null,
          "old_text": "ExecClearTuple(slot)",
          "new_text": null,
          "old_line_content": "\tExecClearTuple(slot);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3093,
          "old_api": "GetTransactionSnapshot",
          "new_api": null,
          "old_text": "GetTransactionSnapshot()",
          "new_text": null,
          "old_line_content": "\tSnapshot snapshot = GetTransactionSnapshot();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3097,
          "old_api": "heap_getnext",
          "new_api": null,
          "old_text": "heap_getnext(heapScan, ForwardScanDirection)",
          "new_text": null,
          "old_line_content": "\twhile ((compressed_tuple = heap_getnext(heapScan, ForwardScanDirection)) != NULL)",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 1050,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(row_compressor->n_input_columns <= row->tts_nvalid)",
          "new_text": null,
          "old_line_content": "\tAssert(row_compressor->n_input_columns <= row->tts_nvalid);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1052,
          "old_api": "MemoryContextSwitchTo",
          "new_api": null,
          "old_text": "MemoryContextSwitchTo(row_compressor->per_row_ctx->parent)",
          "new_text": null,
          "old_line_content": "\tMemoryContextSwitchTo(row_compressor->per_row_ctx->parent);",
          "new_line_content": "\tfor (col = 0; col < row_compressor->n_input_columns; col++)",
          "content_same": false
        },
        {
          "line": 3100,
          "old_api": "bms_next_member",
          "new_api": null,
          "old_text": "bms_next_member(null_columns, -1)",
          "new_text": null,
          "old_line_content": "\t\tint attrno = bms_next_member(null_columns, -1);",
          "new_line_content": "\t\tint pos = 0;",
          "content_same": false
        },
        {
          "line": 3104,
          "old_api": "bms_next_member",
          "new_api": null,
          "old_text": "bms_next_member(null_columns, attrno)",
          "new_text": null,
          "old_line_content": "\t\tfor (; attrno >= 0; attrno = bms_next_member(null_columns, attrno))",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 3107,
          "old_api": "heap_attisnull",
          "new_api": null,
          "old_text": "heap_attisnull(compressed_tuple, attrno, decompressor->in_desc)",
          "new_text": null,
          "old_line_content": "\t\t\tseg_col_is_null = heap_attisnull(compressed_tuple, attrno, decompressor->in_desc);",
          "new_line_content": "\t\t\tif ((seg_col_is_null && !is_null_condition) || (!seg_col_is_null && is_null_condition))",
          "content_same": false
        },
        {
          "line": 1062,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(column->compressor == NULL)",
          "new_text": null,
          "old_line_content": "\t\tAssert(column->compressor == NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1067,
          "old_api": "segment_info_update",
          "new_api": null,
          "old_text": "segment_info_update(column->segment_info, val, is_null)",
          "new_text": null,
          "old_line_content": "\t\tsegment_info_update(column->segment_info, val, is_null);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1070,
          "old_api": "MemoryContextSwitchTo",
          "new_api": null,
          "old_text": "MemoryContextSwitchTo(oldcontext)",
          "new_text": null,
          "old_line_content": "\tMemoryContextSwitchTo(oldcontext);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3122,
          "old_api": "heap_deform_tuple",
          "new_api": null,
          "old_text": "heap_deform_tuple(compressed_tuple,\n\t\t\t\t\t\t  decompressor->in_desc,\n\t\t\t\t\t\t  decompressor->compressed_datums,\n\t\t\t\t\t\t  decompressor->compressed_is_nulls)",
          "new_text": null,
          "old_line_content": "\t\theap_deform_tuple(compressed_tuple,",
          "new_line_content": "\t\t\t\t\t\t  decompressor->in_desc,",
          "content_same": false
        },
        {
          "line": 3127,
          "old_api": "delete_compressed_tuple",
          "new_api": null,
          "old_text": "delete_compressed_tuple(decompressor, compressed_tuple)",
          "new_text": null,
          "old_line_content": "\t\tresult = delete_compressed_tuple(decompressor, compressed_tuple);",
          "new_line_content": "\t\tif (result != TM_Ok)",
          "content_same": false
        },
        {
          "line": 1082,
          "old_api": "get_sequence_number_for_current_group",
          "new_api": null,
          "old_text": "get_sequence_number_for_current_group(row_compressor->compressed_table,\n\t\t\t\t\t\t\t\t\t\t\t\t  row_compressor->index_oid,\n\t\t\t\t\t\t\t\t\t\t\t\t  row_compressor\n\t\t\t\t\t\t\t\t\t\t\t\t\t  ->uncompressed_col_to_compressed_col,\n\t\t\t\t\t\t\t\t\t\t\t\t  row_compressor->per_column,\n\t\t\t\t\t\t\t\t\t\t\t\t  row_compressor->n_input_columns,\n\t\t\t\t\t\t\t\t\t\t\t\t  AttrOffsetGetAttrNumber(\n\t\t\t\t\t\t\t\t\t\t\t\t\t  row_compressor\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  ->sequence_num_metadata_column_offset))",
          "new_text": null,
          "old_line_content": "\t\t\tget_sequence_number_for_current_group(row_compressor->compressed_table,",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t  row_compressor->index_oid,",
          "content_same": false
        },
        {
          "line": 3131,
          "old_api": "report_error",
          "new_api": null,
          "old_text": "report_error(result)",
          "new_text": null,
          "old_line_content": "\t\t\treport_error(result);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 3133,
          "old_api": "row_decompressor_decompress_row_to_table",
          "new_api": null,
          "old_text": "row_decompressor_decompress_row_to_table(decompressor)",
          "new_text": null,
          "old_line_content": "\t\trow_decompressor_decompress_row_to_table(decompressor);",
          "new_line_content": "\t\t*chunk_status_changed = true;",
          "content_same": false
        },
        {
          "line": 1088,
          "old_api": "AttrOffsetGetAttrNumber",
          "new_api": null,
          "old_text": "AttrOffsetGetAttrNumber(\n\t\t\t\t\t\t\t\t\t\t\t\t\t  row_compressor\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  ->sequence_num_metadata_column_offset)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t  AttrOffsetGetAttrNumber(",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t  row_compressor",
          "content_same": false
        },
        {
          "line": 3138,
          "old_api": "table_endscan",
          "new_api": null,
          "old_text": "table_endscan(heapScan)",
          "new_text": null,
          "old_line_content": "\ttable_endscan(heapScan);",
          "new_line_content": "\treturn true;",
          "content_same": false
        },
        {
          "line": 1100,
          "old_api": "CharGetDatum",
          "new_api": null,
          "old_text": "CharGetDatum(0)",
          "new_text": null,
          "old_line_content": "\t\tDatum datum = CharGetDatum(0);",
          "new_line_content": "\t\tbool is_null;",
          "content_same": false
        },
        {
          "line": 3150,
          "old_api": "makeNode",
          "new_api": null,
          "old_text": "makeNode(IndexScan)",
          "new_text": null,
          "old_line_content": "\tIndexScan *node = makeNode(IndexScan);",
          "new_line_content": "\tPlan *plan = &node->scan.plan;",
          "content_same": false
        },
        {
          "line": 1106,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(column->compressor == NULL)",
          "new_text": null,
          "old_line_content": "\t\tAssert(column->compressor == NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1108,
          "old_api": "AttrOffsetGetAttrNumber",
          "new_api": null,
          "old_text": "AttrOffsetGetAttrNumber(col)",
          "new_text": null,
          "old_line_content": "\t\tdatum = slot_getattr(row, AttrOffsetGetAttrNumber(col), &is_null);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1110,
          "old_api": "segment_info_datum_is_in_group",
          "new_api": null,
          "old_text": "segment_info_datum_is_in_group(column->segment_info, datum, is_null)",
          "new_text": null,
          "old_line_content": "\t\tif (!segment_info_datum_is_in_group(column->segment_info, datum, is_null))",
          "new_line_content": "\t\t\treturn true;",
          "content_same": false
        },
        {
          "line": 3160,
          "old_api": "makeNode",
          "new_api": null,
          "old_text": "makeNode(IndexScanState)",
          "new_text": null,
          "old_line_content": "\tindexstate = makeNode(IndexScanState);",
          "new_line_content": "\tindexstate->ss.ps.plan = (Plan *) node;",
          "content_same": false
        },
        {
          "line": 3165,
          "old_api": "ExecIndexBuildScanKeys",
          "new_api": null,
          "old_text": "ExecIndexBuildScanKeys((PlanState *) indexstate,\n\t\t\t\t\t\t   indexstate->iss_RelationDesc,\n\t\t\t\t\t\t   node->indexqual,\n\t\t\t\t\t\t   false,\n\t\t\t\t\t\t   &indexstate->iss_ScanKeys,\n\t\t\t\t\t\t   &indexstate->iss_NumScanKeys,\n\t\t\t\t\t\t   &indexstate->iss_RuntimeKeys,\n\t\t\t\t\t\t   &indexstate->iss_NumRuntimeKeys,\n\t\t\t\t\t\t   NULL, /* no ArrayKeys */\n\t\t\t\t\t\t   NULL)",
          "new_text": null,
          "old_line_content": "\tExecIndexBuildScanKeys((PlanState *) indexstate,",
          "new_line_content": "\t\t\t\t\t\t   indexstate->iss_RelationDesc,",
          "content_same": false
        },
        {
          "line": 1134,
          "old_api": "AttrOffsetGetAttrNumber",
          "new_api": null,
          "old_text": "AttrOffsetGetAttrNumber(col)",
          "new_text": null,
          "old_line_content": "\t\tval = slot_getattr(row, AttrOffsetGetAttrNumber(col), &is_null);",
          "new_line_content": "\t\tif (is_null)",
          "content_same": false
        },
        {
          "line": 1137,
          "old_api": "append_null",
          "new_api": null,
          "old_text": "compressor->append_null(compressor)",
          "new_text": null,
          "old_line_content": "\t\t\tcompressor->append_null(compressor);",
          "new_line_content": "\t\t\tif (row_compressor->per_column[col].min_max_metadata_builder != NULL)",
          "content_same": false
        },
        {
          "line": 1139,
          "old_api": "segment_meta_min_max_builder_update_null",
          "new_api": null,
          "old_text": "segment_meta_min_max_builder_update_null(\n\t\t\t\t\trow_compressor->per_column[col].min_max_metadata_builder)",
          "new_text": null,
          "old_line_content": "\t\t\t\tsegment_meta_min_max_builder_update_null(",
          "new_line_content": "\t\t\t\t\trow_compressor->per_column[col].min_max_metadata_builder);",
          "content_same": false
        },
        {
          "line": 1144,
          "old_api": "append_val",
          "new_api": null,
          "old_text": "compressor->append_val(compressor, val)",
          "new_text": null,
          "old_line_content": "\t\t\tcompressor->append_val(compressor, val);",
          "new_line_content": "\t\t\tif (row_compressor->per_column[col].min_max_metadata_builder != NULL)",
          "content_same": false
        },
        {
          "line": 1146,
          "old_api": "segment_meta_min_max_builder_update_val",
          "new_api": null,
          "old_text": "segment_meta_min_max_builder_update_val(row_compressor->per_column[col]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.min_max_metadata_builder,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tval)",
          "new_text": null,
          "old_line_content": "\t\t\t\tsegment_meta_min_max_builder_update_val(row_compressor->per_column[col]",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.min_max_metadata_builder,",
          "content_same": false
        },
        {
          "line": 3197,
          "old_api": "GetTransactionSnapshot",
          "new_api": null,
          "old_text": "GetTransactionSnapshot()",
          "new_text": null,
          "old_line_content": "\tsnapshot = GetTransactionSnapshot();",
          "new_line_content": "\tIndexScanDesc scan =",
          "content_same": false
        },
        {
          "line": 3202,
          "old_api": "index_getnext_slot",
          "new_api": null,
          "old_text": "index_getnext_slot(scan, ForwardScanDirection, slot)",
          "new_text": null,
          "old_line_content": "\twhile (index_getnext_slot(scan, ForwardScanDirection, slot))",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 3206,
          "old_api": "slot_getallattrs",
          "new_api": null,
          "old_text": "slot_getallattrs(slot)",
          "new_text": null,
          "old_line_content": "\t\tslot_getallattrs(slot);",
          "new_line_content": "\t\tcompressed_tuple =",
          "content_same": false
        },
        {
          "line": 3208,
          "old_api": "heap_form_tuple",
          "new_api": null,
          "old_text": "heap_form_tuple(slot->tts_tupleDescriptor, slot->tts_values, slot->tts_isnull)",
          "new_text": null,
          "old_line_content": "\t\t\theap_form_tuple(slot->tts_tupleDescriptor, slot->tts_values, slot->tts_isnull);",
          "new_line_content": "\t\tcompressed_tuple->t_self = slot->tts_tid;",
          "content_same": false
        },
        {
          "line": 3217,
          "old_api": "RelationGetDescr",
          "new_api": null,
          "old_text": "RelationGetDescr(decompressor->in_rel)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tRelationGetDescr(decompressor->in_rel),",
          "new_line_content": "\t\t\t\t\t\tnum_scankeys,",
          "content_same": false
        },
        {
          "line": 1172,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(compressed_col >= 0)",
          "new_text": null,
          "old_line_content": "\t\tAssert(compressed_col >= 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3223,
          "old_api": "RelationGetDescr",
          "new_api": null,
          "old_text": "RelationGetDescr(decompressor->in_rel)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\tRelationGetDescr(decompressor->in_rel),",
          "new_line_content": "\t\t\t\t\t\t\t\tnum_scankeys,",
          "content_same": false
        },
        {
          "line": 1177,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(column->segment_info == NULL)",
          "new_text": null,
          "old_line_content": "\t\t\tAssert(column->segment_info == NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1179,
          "old_api": "finish",
          "new_api": null,
          "old_text": "compressor->finish(compressor)",
          "new_text": null,
          "old_line_content": "\t\t\tcompressed_data = compressor->finish(compressor);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1185,
          "old_api": "PointerGetDatum",
          "new_api": null,
          "old_text": "PointerGetDatum(compressed_data)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tPointerGetDatum(compressed_data);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3233,
          "old_api": "heap_deform_tuple",
          "new_api": null,
          "old_text": "heap_deform_tuple(compressed_tuple,\n\t\t\t\t\t\t  decompressor->in_desc,\n\t\t\t\t\t\t  decompressor->compressed_datums,\n\t\t\t\t\t\t  decompressor->compressed_is_nulls)",
          "new_text": null,
          "old_line_content": "\t\theap_deform_tuple(compressed_tuple,",
          "new_line_content": "\t\t\t\t\t\t  decompressor->in_desc,",
          "content_same": false
        },
        {
          "line": 1190,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(column->max_metadata_attr_offset >= 0)",
          "new_text": null,
          "old_line_content": "\t\t\t\tAssert(column->max_metadata_attr_offset >= 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3238,
          "old_api": "delete_compressed_tuple",
          "new_api": null,
          "old_text": "delete_compressed_tuple(decompressor, compressed_tuple)",
          "new_text": null,
          "old_line_content": "\t\tresult = delete_compressed_tuple(decompressor, compressed_tuple);",
          "new_line_content": "\t\t/* skip reporting error if isolation level is < Repeatable Read */",
          "content_same": false
        },
        {
          "line": 1192,
          "old_api": "segment_meta_min_max_builder_empty",
          "new_api": null,
          "old_text": "segment_meta_min_max_builder_empty(column->min_max_metadata_builder)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (!segment_meta_min_max_builder_empty(column->min_max_metadata_builder))",
          "new_line_content": "\t\t\t\t{",
          "content_same": false
        },
        {
          "line": 3240,
          "old_api": "IsolationUsesXactSnapshot",
          "new_api": null,
          "old_text": "IsolationUsesXactSnapshot()",
          "new_text": null,
          "old_line_content": "\t\tif (result == TM_Deleted && !IsolationUsesXactSnapshot())",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1194,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(compressed_data != NULL)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tAssert(compressed_data != NULL);",
          "new_line_content": "\t\t\t\t\trow_compressor->compressed_is_null[column->min_metadata_attr_offset] = false;",
          "content_same": false
        },
        {
          "line": 1199,
          "old_api": "segment_meta_min_max_builder_min",
          "new_api": null,
          "old_text": "segment_meta_min_max_builder_min(column->min_max_metadata_builder)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tsegment_meta_min_max_builder_min(column->min_max_metadata_builder);",
          "new_line_content": "\t\t\t\t\trow_compressor->compressed_values[column->max_metadata_attr_offset] =",
          "content_same": false
        },
        {
          "line": 3247,
          "old_api": "report_error",
          "new_api": null,
          "old_text": "report_error(result)",
          "new_text": null,
          "old_line_content": "\t\t\treport_error(result);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1201,
          "old_api": "segment_meta_min_max_builder_max",
          "new_api": null,
          "old_text": "segment_meta_min_max_builder_max(column->min_max_metadata_builder)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tsegment_meta_min_max_builder_max(column->min_max_metadata_builder);",
          "new_line_content": "\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 3250,
          "old_api": "heap_freetuple",
          "new_api": null,
          "old_text": "heap_freetuple(compressed_tuple)",
          "new_text": null,
          "old_line_content": "\t\theap_freetuple(compressed_tuple);",
          "new_line_content": "\t\t*chunk_status_changed = true;",
          "content_same": false
        },
        {
          "line": 1205,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(compressed_data == NULL)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tAssert(compressed_data == NULL);",
          "new_line_content": "\t\t\t\t\trow_compressor->compressed_is_null[column->min_metadata_attr_offset] = true;",
          "content_same": false
        },
        {
          "line": 3256,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(INFO,\n\t\t\t \"Number of compressed rows fetched from index: %d. \"\n\t\t\t \"Number of compressed rows filtered by orderby columns: %d.\",\n\t\t\t num_segmentby_filtered_rows,\n\t\t\t num_orderby_filtered_rows)",
          "new_text": null,
          "old_line_content": "\t\telog(INFO,",
          "new_line_content": "\t\t\t \"Number of compressed rows fetched from index: %d. \"",
          "content_same": false
        },
        {
          "line": 3265,
          "old_api": "CommandCounterIncrement",
          "new_api": null,
          "old_text": "CommandCounterIncrement()",
          "new_text": null,
          "old_line_content": "\tCommandCounterIncrement();",
          "new_line_content": "\treturn true;",
          "content_same": false
        },
        {
          "line": 1219,
          "old_api": "Int32GetDatum",
          "new_api": null,
          "old_text": "Int32GetDatum(row_compressor->rows_compressed_into_current_value)",
          "new_text": null,
          "old_line_content": "\t\tInt32GetDatum(row_compressor->rows_compressed_into_current_value);",
          "new_line_content": "\trow_compressor->compressed_is_null[row_compressor->count_metadata_column_offset] = false;",
          "content_same": false
        },
        {
          "line": 1223,
          "old_api": "Int32GetDatum",
          "new_api": null,
          "old_text": "Int32GetDatum(row_compressor->sequence_num)",
          "new_text": null,
          "old_line_content": "\t\tInt32GetDatum(row_compressor->sequence_num);",
          "new_line_content": "\trow_compressor->compressed_is_null[row_compressor->sequence_num_metadata_column_offset] = false;",
          "content_same": false
        },
        {
          "line": 1228,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"sequence id overflow\")",
          "new_text": null,
          "old_line_content": "\t\telog(ERROR, \"sequence id overflow\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1232,
          "old_api": "RelationGetDescr",
          "new_api": null,
          "old_text": "RelationGetDescr(row_compressor->compressed_table)",
          "new_text": null,
          "old_line_content": "\tcompressed_tuple = heap_form_tuple(RelationGetDescr(row_compressor->compressed_table),",
          "new_line_content": "\t\t\t\t\t\t\t\t\t   row_compressor->compressed_values,",
          "content_same": false
        },
        {
          "line": 1236,
          "old_api": "heap_insert",
          "new_api": null,
          "old_text": "heap_insert(row_compressor->compressed_table,\n\t\t\t\tcompressed_tuple,\n\t\t\t\tmycid,\n\t\t\t\trow_compressor->insert_options /*=options*/,\n\t\t\t\trow_compressor->bistate)",
          "new_text": null,
          "old_line_content": "\theap_insert(row_compressor->compressed_table,",
          "new_line_content": "\t\t\t\tcompressed_tuple,",
          "content_same": false
        },
        {
          "line": 1243,
          "old_api": "ts_catalog_index_insert",
          "new_api": null,
          "old_text": "ts_catalog_index_insert(row_compressor->resultRelInfo, compressed_tuple)",
          "new_text": null,
          "old_line_content": "\t\tts_catalog_index_insert(row_compressor->resultRelInfo, compressed_tuple);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1246,
          "old_api": "heap_freetuple",
          "new_api": null,
          "old_text": "heap_freetuple(compressed_tuple)",
          "new_text": null,
          "old_line_content": "\theap_freetuple(compressed_tuple);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3301,
          "old_api": "fill_predicate_context",
          "new_api": null,
          "old_text": "fill_predicate_context(chunk,\n\t\t\t\t\t\t   predicates,\n\t\t\t\t\t\t   &filters,\n\t\t\t\t\t\t   &index_filters,\n\t\t\t\t\t\t   &segmentby_predicates,\n\t\t\t\t\t\t   &is_null)",
          "new_text": null,
          "old_line_content": "\tfill_predicate_context(chunk,",
          "new_line_content": "\t\t\t\t\t\t   predicates,",
          "content_same": false
        },
        {
          "line": 1258,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(compressed_col >= 0)",
          "new_text": null,
          "old_line_content": "\t\tAssert(compressed_col >= 0);",
          "new_line_content": "\t\tif (row_compressor->compressed_is_null[compressed_col])",
          "content_same": false
        },
        {
          "line": 3311,
          "old_api": "build_decompressor",
          "new_api": null,
          "old_text": "build_decompressor(comp_chunk_rel, chunk_rel)",
          "new_text": null,
          "old_line_content": "\tdecompressor = build_decompressor(comp_chunk_rel, chunk_rel);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3313,
          "old_api": "write_logical_replication_msg_decompression_start",
          "new_api": null,
          "old_text": "write_logical_replication_msg_decompression_start()",
          "new_text": null,
          "old_line_content": "\twrite_logical_replication_msg_decompression_start();",
          "new_line_content": "\tif (filters)",
          "content_same": false
        },
        {
          "line": 1267,
          "old_api": "DatumGetPointer",
          "new_api": null,
          "old_text": "DatumGetPointer(row_compressor->compressed_values[compressed_col])",
          "new_text": null,
          "old_line_content": "\t\t\tpfree(DatumGetPointer(row_compressor->compressed_values[compressed_col]));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3317,
          "old_api": "build_update_delete_scankeys",
          "new_api": null,
          "old_text": "build_update_delete_scankeys(&decompressor, filters, &num_scankeys, &null_columns)",
          "new_text": null,
          "old_line_content": "\t\t\tbuild_update_delete_scankeys(&decompressor, filters, &num_scankeys, &null_columns);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 3324,
          "old_api": "fix_and_reorder_index_filters",
          "new_api": null,
          "old_text": "fix_and_reorder_index_filters(comp_chunk_rel,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  matching_index_rel,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  segmentby_predicates,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  index_filters)",
          "new_text": null,
          "old_line_content": "\t\tordered_index_filters = fix_and_reorder_index_filters(comp_chunk_rel,",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  matching_index_rel,",
          "content_same": false
        },
        {
          "line": 3328,
          "old_api": "build_index_scankeys",
          "new_api": null,
          "old_text": "build_index_scankeys(decompressor.in_rel,\n\t\t\t\t\t\t\t\t\t\t\t  matching_index_rel,\n\t\t\t\t\t\t\t\t\t\t\t  ordered_index_filters,\n\t\t\t\t\t\t\t\t\t\t\t  &num_index_scankeys,\n\t\t\t\t\t\t\t\t\t\t\t  estate)",
          "new_text": null,
          "old_line_content": "\t\tindex_scankeys = build_index_scankeys(decompressor.in_rel,",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t  matching_index_rel,",
          "content_same": false
        },
        {
          "line": 1282,
          "old_api": "segment_meta_min_max_builder_reset",
          "new_api": null,
          "old_text": "segment_meta_min_max_builder_reset(column->min_max_metadata_builder)",
          "new_text": null,
          "old_line_content": "\t\t\tsegment_meta_min_max_builder_reset(column->min_max_metadata_builder);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 3333,
          "old_api": "decompress_batches_using_index",
          "new_api": null,
          "old_text": "decompress_batches_using_index(&decompressor,\n\t\t\t\t\t\t\t\t\t   matching_index_rel,\n\t\t\t\t\t\t\t\t\t   index_scankeys,\n\t\t\t\t\t\t\t\t\t   num_index_scankeys,\n\t\t\t\t\t\t\t\t\t   scankeys,\n\t\t\t\t\t\t\t\t\t   num_scankeys,\n\t\t\t\t\t\t\t\t\t   &chunk_status_changed)",
          "new_text": null,
          "old_line_content": "\t\tdecompress_batches_using_index(&decompressor,",
          "new_line_content": "\t\t\t\t\t\t\t\t\t   matching_index_rel,",
          "content_same": false
        },
        {
          "line": 1292,
          "old_api": "MemoryContextReset",
          "new_api": null,
          "old_text": "MemoryContextReset(row_compressor->per_row_ctx)",
          "new_text": null,
          "old_line_content": "\tMemoryContextReset(row_compressor->per_row_ctx);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3341,
          "old_api": "index_close",
          "new_api": null,
          "old_text": "index_close(matching_index_rel, AccessShareLock)",
          "new_text": null,
          "old_line_content": "\t\tindex_close(matching_index_rel, AccessShareLock);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 3345,
          "old_api": "decompress_batches",
          "new_api": null,
          "old_text": "decompress_batches(&decompressor,\n\t\t\t\t\t\t   scankeys,\n\t\t\t\t\t\t   num_scankeys,\n\t\t\t\t\t\t   null_columns,\n\t\t\t\t\t\t   is_null,\n\t\t\t\t\t\t   &chunk_status_changed)",
          "new_text": null,
          "old_line_content": "\t\tdecompress_batches(&decompressor,",
          "new_line_content": "\t\t\t\t\t\t   scankeys,",
          "content_same": false
        },
        {
          "line": 1300,
          "old_api": "ts_catalog_close_indexes",
          "new_api": null,
          "old_text": "ts_catalog_close_indexes(row_compressor->resultRelInfo)",
          "new_text": null,
          "old_line_content": "\tts_catalog_close_indexes(row_compressor->resultRelInfo);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3352,
          "old_api": "write_logical_replication_msg_decompression_end",
          "new_api": null,
          "old_text": "write_logical_replication_msg_decompression_end()",
          "new_text": null,
          "old_line_content": "\twrite_logical_replication_msg_decompression_end();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1310,
          "old_api": "lookup_type_cache",
          "new_api": null,
          "old_text": "lookup_type_cache(column_attr->atttypid, TYPECACHE_EQ_OPR_FINFO)",
          "new_text": null,
          "old_line_content": "\tTypeCacheEntry *tce = lookup_type_cache(column_attr->atttypid, TYPECACHE_EQ_OPR_FINFO);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3359,
          "old_api": "ts_chunk_set_partial",
          "new_api": null,
          "old_text": "ts_chunk_set_partial(chunk)",
          "new_text": null,
          "old_line_content": "\t\tts_chunk_set_partial(chunk);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1313,
          "old_api": "NameStr",
          "new_api": null,
          "old_text": "NameStr(column_attr->attname)",
          "new_text": null,
          "old_line_content": "\t\telog(ERROR, \"no equality function for column \\\"%s\\\"\", NameStr(column_attr->attname));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1315,
          "old_api": "palloc",
          "new_api": null,
          "old_text": "palloc(sizeof(*segment_info))",
          "new_text": null,
          "old_line_content": "\tSegmentInfo *segment_info = palloc(sizeof(*segment_info));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3363,
          "old_api": "FreeBulkInsertState",
          "new_api": null,
          "old_text": "FreeBulkInsertState(decompressor.bistate)",
          "new_text": null,
          "old_line_content": "\tFreeBulkInsertState(decompressor.bistate);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3366,
          "old_api": "table_close",
          "new_api": null,
          "old_text": "table_close(comp_chunk_rel, NoLock)",
          "new_text": null,
          "old_line_content": "\ttable_close(comp_chunk_rel, NoLock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1322,
          "old_api": "fmgr_info_cxt",
          "new_api": null,
          "old_text": "fmgr_info_cxt(tce->eq_opr_finfo.fn_oid, &segment_info->eq_fn, CurrentMemoryContext)",
          "new_text": null,
          "old_line_content": "\tfmgr_info_cxt(tce->eq_opr_finfo.fn_oid, &segment_info->eq_fn, CurrentMemoryContext);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3371,
          "old_api": "pfree",
          "new_api": null,
          "old_text": "pfree(filter)",
          "new_text": null,
          "old_line_content": "\t\tpfree(filter);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1324,
          "old_api": "HEAP_FCINFO",
          "new_api": null,
          "old_text": "HEAP_FCINFO(2)",
          "new_text": null,
          "old_line_content": "\tsegment_info->eq_fcinfo = HEAP_FCINFO(2);",
          "new_line_content": "\tsegment_info->collation = column_attr->attcollation;",
          "content_same": false
        },
        {
          "line": 1326,
          "old_api": "InitFunctionCallInfoData",
          "new_api": null,
          "old_text": "InitFunctionCallInfoData(*segment_info->eq_fcinfo,\n\t\t\t\t\t\t\t &segment_info->eq_fn /*=Flinfo*/,\n\t\t\t\t\t\t\t 2 /*=Nargs*/,\n\t\t\t\t\t\t\t column_attr->attcollation /*=Collation*/,\n\t\t\t\t\t\t\t NULL, /*=Context*/\n\t\t\t\t\t\t\t NULL  /*=ResultInfo*/\n\t)",
          "new_text": null,
          "old_line_content": "\tInitFunctionCallInfoData(*segment_info->eq_fcinfo,",
          "new_line_content": "\t\t\t\t\t\t\t &segment_info->eq_fn /*=Flinfo*/,",
          "content_same": false
        },
        {
          "line": 1344,
          "old_api": "datumCopy",
          "new_api": null,
          "old_text": "datumCopy(val, segment_info->typ_by_val, segment_info->typlen)",
          "new_text": null,
          "old_line_content": "\t\tsegment_info->val = datumCopy(val, segment_info->typ_by_val, segment_info->typlen);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3395,
          "old_api": "castNode",
          "new_api": null,
          "old_text": "castNode(CustomScanState, ht_state)",
          "new_text": null,
          "old_line_content": "\t\tlinitial_node(ModifyTableState, castNode(CustomScanState, ht_state)->custom_ps);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3399,
          "old_api": "castNode",
          "new_api": null,
          "old_text": "castNode(ModifyTable, ps->ps.plan)",
          "new_text": null,
          "old_line_content": "\t\t.relids = castNode(ModifyTable, ps->ps.plan)->resultRelations,",
          "new_line_content": "\t};",
          "content_same": false
        },
        {
          "line": 3401,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(ctx.relids)",
          "new_text": null,
          "old_line_content": "\tAssert(ctx.relids);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3403,
          "old_api": "decompress_chunk_walker",
          "new_api": null,
          "old_text": "decompress_chunk_walker(&ps->ps, &ctx)",
          "new_text": null,
          "old_line_content": "\treturn decompress_chunk_walker(&ps->ps, &ctx);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1364,
          "old_api": "FC_SET_ARG",
          "new_api": null,
          "old_text": "FC_SET_ARG(eq_fcinfo, 1, datum)",
          "new_text": null,
          "old_line_content": "\tFC_SET_ARG(eq_fcinfo, 1, datum);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1366,
          "old_api": "FunctionCallInvoke",
          "new_api": null,
          "old_text": "FunctionCallInvoke(eq_fcinfo)",
          "new_text": null,
          "old_line_content": "\tdata_is_eq = FunctionCallInvoke(eq_fcinfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3417,
          "old_api": "nodeTag",
          "new_api": null,
          "old_text": "nodeTag(ps)",
          "new_text": null,
          "old_line_content": "\tswitch (nodeTag(ps))",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 1371,
          "old_api": "DatumGetBool",
          "new_api": null,
          "old_text": "DatumGetBool(data_is_eq)",
          "new_text": null,
          "old_line_content": "\treturn DatumGetBool(data_is_eq);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3428,
          "old_api": "list_union",
          "new_api": null,
          "old_text": "list_union(((IndexScan *) ps->plan)->indexqualorig, ps->plan->qual)",
          "new_text": null,
          "old_line_content": "\t\t\tpredicates = list_union(((IndexScan *) ps->plan)->indexqualorig, ps->plan->qual);",
          "new_line_content": "\t\t\tneeds_decompression = true;",
          "content_same": false
        },
        {
          "line": 1382,
          "old_api": "RelationGetDescr",
          "new_api": null,
          "old_text": "RelationGetDescr(out_rel)",
          "new_text": null,
          "old_line_content": "\tTupleDesc out_desc = CreateTupleDescCopyConstr(RelationGetDescr(out_rel));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3433,
          "old_api": "list_union",
          "new_api": null,
          "old_text": "list_union(((BitmapHeapScan *) ps->plan)->bitmapqualorig, ps->plan->qual)",
          "new_text": null,
          "old_line_content": "\t\t\tpredicates = list_union(((BitmapHeapScan *) ps->plan)->bitmapqualorig, ps->plan->qual);",
          "new_line_content": "\t\t\tneeds_decompression = true;",
          "content_same": false
        },
        {
          "line": 1392,
          "old_api": "ts_catalog_open_indexes",
          "new_api": null,
          "old_text": "ts_catalog_open_indexes(out_rel)",
          "new_text": null,
          "old_line_content": "\t\t.indexstate = ts_catalog_open_indexes(out_rel),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3442,
          "old_api": "list_copy",
          "new_api": null,
          "old_text": "list_copy(ps->plan->qual)",
          "new_text": null,
          "old_line_content": "\t\t\tpredicates = list_copy(ps->plan->qual);",
          "new_line_content": "\t\t\tneeds_decompression = true;",
          "content_same": false
        },
        {
          "line": 1395,
          "old_api": "GetBulkInsertState",
          "new_api": null,
          "old_text": "GetBulkInsertState()",
          "new_text": null,
          "old_line_content": "\t\t.bistate = GetBulkInsertState(),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1398,
          "old_api": "palloc",
          "new_api": null,
          "old_text": "palloc(sizeof(bool) * in_desc->natts)",
          "new_text": null,
          "old_line_content": "\t\t.compressed_is_nulls = palloc(sizeof(bool) * in_desc->natts),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1402,
          "old_api": "palloc",
          "new_api": null,
          "old_text": "palloc(sizeof(bool) * out_desc->natts)",
          "new_text": null,
          "old_line_content": "\t\t.decompressed_is_nulls = palloc(sizeof(bool) * out_desc->natts),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1404,
          "old_api": "AllocSetContextCreate",
          "new_api": null,
          "old_text": "AllocSetContextCreate(CurrentMemoryContext,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"decompress chunk per-compressed row\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tALLOCSET_DEFAULT_SIZES)",
          "new_text": null,
          "old_line_content": "\t\t.per_compressed_row_ctx = AllocSetContextCreate(CurrentMemoryContext,",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"decompress chunk per-compressed row\",",
          "content_same": false
        },
        {
          "line": 1407,
          "old_api": "CreateExecutorState",
          "new_api": null,
          "old_text": "CreateExecutorState()",
          "new_text": null,
          "old_line_content": "\t\t.estate = CreateExecutorState(),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1409,
          "old_api": "palloc0",
          "new_api": null,
          "old_text": "palloc0(sizeof(void *) * GLOBAL_MAX_ROWS_PER_COMPRESSION)",
          "new_text": null,
          "old_line_content": "\t\t.decompressed_slots = palloc0(sizeof(void *) * GLOBAL_MAX_ROWS_PER_COMPRESSION),",
          "new_line_content": "\t};",
          "content_same": false
        },
        {
          "line": 3457,
          "old_api": "list_member_int",
          "new_api": null,
          "old_text": "list_member_int(ctx->relids, scanrelid)",
          "new_text": null,
          "old_line_content": "\t\tif (list_member_int(ctx->relids, scanrelid))",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 1412,
          "old_api": "create_per_compressed_column",
          "new_api": null,
          "old_text": "create_per_compressed_column(&decompressor)",
          "new_text": null,
          "old_line_content": "\tcreate_per_compressed_column(&decompressor);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3461,
          "old_api": "ts_chunk_is_compressed",
          "new_api": null,
          "old_text": "ts_chunk_is_compressed(current_chunk)",
          "new_text": null,
          "old_line_content": "\t\t\tif (current_chunk && ts_chunk_is_compressed(current_chunk))",
          "new_line_content": "\t\t\t{",
          "content_same": false
        },
        {
          "line": 3467,
          "old_api": "errhint",
          "new_api": null,
          "old_text": "errhint(\"Set timescaledb.enable_dml_decompression to TRUE.\")",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t errhint(\"Set timescaledb.enable_dml_decompression to TRUE.\")));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1420,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(decompressor.decompressed_is_nulls, true, out_desc->natts)",
          "new_text": null,
          "old_line_content": "\tmemset(decompressor.decompressed_is_nulls, true, out_desc->natts);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3469,
          "old_api": "decompress_batches_for_update_delete",
          "new_api": null,
          "old_text": "decompress_batches_for_update_delete(ctx->ht_state,\n\t\t\t\t\t\t\t\t\t\t\t\t\t current_chunk,\n\t\t\t\t\t\t\t\t\t\t\t\t\t predicates,\n\t\t\t\t\t\t\t\t\t\t\t\t\t ps->state)",
          "new_text": null,
          "old_line_content": "\t\t\t\tdecompress_batches_for_update_delete(ctx->ht_state,",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t current_chunk,",
          "content_same": false
        },
        {
          "line": 3488,
          "old_api": "ExecReScan",
          "new_api": null,
          "old_text": "ExecReScan(ps)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tExecReScan(ps);",
          "new_line_content": "\t\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 1441,
          "old_api": "table_open",
          "new_api": null,
          "old_text": "table_open(in_table, ExclusiveLock)",
          "new_text": null,
          "old_line_content": "\tRelation in_rel = table_open(in_table, ExclusiveLock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1443,
          "old_api": "build_decompressor",
          "new_api": null,
          "old_text": "build_decompressor(in_rel, out_rel)",
          "new_text": null,
          "old_line_content": "\tRowDecompressor decompressor = build_decompressor(in_rel, out_rel);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1446,
          "old_api": "GetLatestSnapshot",
          "new_api": null,
          "old_text": "GetLatestSnapshot()",
          "new_text": null,
          "old_line_content": "\tTableScanDesc heapScan = table_beginscan(in_rel, GetLatestSnapshot(), 0, (ScanKey) NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3496,
          "old_api": "pfree",
          "new_api": null,
          "old_text": "pfree(predicates)",
          "new_text": null,
          "old_line_content": "\t\tpfree(predicates);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1449,
          "old_api": "heap_getnext",
          "new_api": null,
          "old_text": "heap_getnext(heapScan, ForwardScanDirection)",
          "new_text": null,
          "old_line_content": "\t\t compressed_tuple = heap_getnext(heapScan, ForwardScanDirection))",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 3498,
          "old_api": "planstate_tree_walker",
          "new_api": null,
          "old_text": "planstate_tree_walker(ps, decompress_chunk_walker, ctx)",
          "new_text": null,
          "old_line_content": "\treturn planstate_tree_walker(ps, decompress_chunk_walker, ctx);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1452,
          "old_api": "heap_deform_tuple",
          "new_api": null,
          "old_text": "heap_deform_tuple(compressed_tuple,\n\t\t\t\t\t\t  decompressor.in_desc,\n\t\t\t\t\t\t  decompressor.compressed_datums,\n\t\t\t\t\t\t  decompressor.compressed_is_nulls)",
          "new_text": null,
          "old_line_content": "\t\theap_deform_tuple(compressed_tuple,",
          "new_line_content": "\t\t\t\t\t\t  decompressor.in_desc,",
          "content_same": false
        },
        {
          "line": 1457,
          "old_api": "row_decompressor_decompress_row_to_table",
          "new_api": null,
          "old_text": "row_decompressor_decompress_row_to_table(&decompressor)",
          "new_text": null,
          "old_line_content": "\t\trow_decompressor_decompress_row_to_table(&decompressor);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1460,
          "old_api": "table_endscan",
          "new_api": null,
          "old_text": "table_endscan(heapScan)",
          "new_text": null,
          "old_line_content": "\ttable_endscan(heapScan);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1465,
          "old_api": "FreeExecutorState",
          "new_api": null,
          "old_text": "FreeExecutorState(decompressor.estate)",
          "new_text": null,
          "old_line_content": "\tFreeExecutorState(decompressor.estate);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1468,
          "old_api": "table_close",
          "new_api": null,
          "old_text": "table_close(in_rel, NoLock)",
          "new_text": null,
          "old_line_content": "\ttable_close(in_rel, NoLock);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1475,
          "old_api": "OidIsValid",
          "new_api": null,
          "old_text": "OidIsValid(compressed_data_type_oid)",
          "new_text": null,
          "old_line_content": "\tAssert(OidIsValid(compressed_data_type_oid));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1478,
          "old_api": "palloc",
          "new_api": null,
          "old_text": "palloc(sizeof(*decompressor->per_compressed_cols) * decompressor->in_desc->natts)",
          "new_text": null,
          "old_line_content": "\t\tpalloc(sizeof(*decompressor->per_compressed_cols) * decompressor->in_desc->natts);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1480,
          "old_api": "OidIsValid",
          "new_api": null,
          "old_text": "OidIsValid(compressed_data_type_oid)",
          "new_text": null,
          "old_line_content": "\tAssert(OidIsValid(compressed_data_type_oid));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1490,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(col_name, COMPRESSION_COLUMN_METADATA_COUNT_NAME)",
          "new_text": null,
          "old_line_content": "\t\tif (strcmp(col_name, COMPRESSION_COLUMN_METADATA_COUNT_NAME) == 0)",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 1502,
          "old_api": "AttributeNumberIsValid",
          "new_api": null,
          "old_text": "AttributeNumberIsValid(decompressed_colnum)",
          "new_text": null,
          "old_line_content": "\t\tif (!AttributeNumberIsValid(decompressed_colnum))",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 1510,
          "old_api": "AttrNumberGetAttrOffset",
          "new_api": null,
          "old_text": "AttrNumberGetAttrOffset(decompressed_colnum)",
          "new_text": null,
          "old_line_content": "\t\tdecompressed_column_offset = AttrNumberGetAttrOffset(decompressed_colnum);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1513,
          "old_api": "TupleDescAttr",
          "new_api": null,
          "old_text": "TupleDescAttr(decompressor->out_desc, decompressed_column_offset)",
          "new_text": null,
          "old_line_content": "\t\t\tTupleDescAttr(decompressor->out_desc, decompressed_column_offset)->atttypid;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1518,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR,\n\t\t\t\t \"compressed table type '%s' does not match decompressed table type '%s' for \"\n\t\t\t\t \"segment-by column \\\"%s\\\"\",\n\t\t\t\t format_type_be(compressed_attr->atttypid),\n\t\t\t\t format_type_be(decompressed_type),\n\t\t\t\t col_name)",
          "new_text": null,
          "old_line_content": "\t\t\telog(ERROR,",
          "new_line_content": "\t\t\t\t \"compressed table type '%s' does not match decompressed table type '%s' for \"",
          "content_same": false
        },
        {
          "line": 1522,
          "old_api": "format_type_be",
          "new_api": null,
          "old_text": "format_type_be(decompressed_type)",
          "new_text": null,
          "old_line_content": "\t\t\t\t format_type_be(decompressed_type),",
          "new_line_content": "\t\t\t\t col_name);",
          "content_same": false
        },
        {
          "line": 1540,
          "old_api": "MemoryContextSwitchTo",
          "new_api": null,
          "old_text": "MemoryContextSwitchTo(decompressor->per_compressed_row_ctx)",
          "new_text": null,
          "old_line_content": "\tMemoryContext old_ctx = MemoryContextSwitchTo(decompressor->per_compressed_row_ctx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1571,
          "old_api": "getmissingattr",
          "new_api": null,
          "old_text": "getmissingattr(decompressor->out_desc,\n\t\t\t\t\t\t\t   output_index + 1,\n\t\t\t\t\t\t\t   &decompressor->decompressed_is_nulls[output_index])",
          "new_text": null,
          "old_line_content": "\t\t\t\tgetmissingattr(decompressor->out_desc,",
          "new_line_content": "\t\t\t\t\t\t\t   output_index + 1,",
          "content_same": false
        },
        {
          "line": 1580,
          "old_api": "get_compressed_data_header",
          "new_api": null,
          "old_text": "get_compressed_data_header(decompressor->compressed_datums[input_column])",
          "new_text": null,
          "old_line_content": "\t\t\tget_compressed_data_header(decompressor->compressed_datums[input_column]);",
          "new_line_content": "\t\tcolumn_info->iterator =",
          "content_same": false
        },
        {
          "line": 1583,
          "old_api": "PointerGetDatum",
          "new_api": null,
          "old_text": "PointerGetDatum(header)",
          "new_text": null,
          "old_line_content": "\t\t\t\t.iterator_init_forward(PointerGetDatum(header), column_info->decompressed_type);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1592,
          "old_api": "CheckCompressedData",
          "new_api": null,
          "old_text": "CheckCompressedData(n_batch_rows <= GLOBAL_MAX_ROWS_PER_COMPRESSION)",
          "new_text": null,
          "old_line_content": "\tCheckCompressedData(n_batch_rows <= GLOBAL_MAX_ROWS_PER_COMPRESSION);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1606,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(column_info->is_compressed)",
          "new_text": null,
          "old_line_content": "\t\t\tAssert(column_info->is_compressed);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1610,
          "old_api": "CheckCompressedData",
          "new_api": null,
          "old_text": "CheckCompressedData(!value.is_done)",
          "new_text": null,
          "old_line_content": "\t\t\tCheckCompressedData(!value.is_done);",
          "new_line_content": "\t\t\tdecompressor->decompressed_datums[output_index] = value.val;",
          "content_same": false
        },
        {
          "line": 1621,
          "old_api": "MemoryContextSwitchTo",
          "new_api": null,
          "old_text": "MemoryContextSwitchTo(old_ctx)",
          "new_text": null,
          "old_line_content": "\t\t\tMemoryContextSwitchTo(old_ctx);",
          "new_line_content": "\t\t\tdecompressor->decompressed_slots[current_row] =",
          "content_same": false
        },
        {
          "line": 1624,
          "old_api": "MemoryContextSwitchTo",
          "new_api": null,
          "old_text": "MemoryContextSwitchTo(decompressor->per_compressed_row_ctx)",
          "new_text": null,
          "old_line_content": "\t\t\tMemoryContextSwitchTo(decompressor->per_compressed_row_ctx);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1628,
          "old_api": "ExecClearTuple",
          "new_api": null,
          "old_text": "ExecClearTuple(decompressor->decompressed_slots[current_row])",
          "new_text": null,
          "old_line_content": "\t\t\tExecClearTuple(decompressor->decompressed_slots[current_row]);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1633,
          "old_api": "heap_form_tuple",
          "new_api": null,
          "old_text": "heap_form_tuple(decompressor->out_desc,\n\t\t\t\t\t\t\t\t\t\t\t\t\t   decompressor->decompressed_datums,\n\t\t\t\t\t\t\t\t\t\t\t\t\t   decompressor->decompressed_is_nulls)",
          "new_text": null,
          "old_line_content": "\t\tHeapTuple decompressed_tuple = heap_form_tuple(decompressor->out_desc,",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t   decompressor->decompressed_datums,",
          "content_same": false
        },
        {
          "line": 1638,
          "old_api": "ExecStoreHeapTuple",
          "new_api": null,
          "old_text": "ExecStoreHeapTuple(decompressed_tuple, decompressed_slot, /* should_free = */ false)",
          "new_text": null,
          "old_line_content": "\t\tExecStoreHeapTuple(decompressed_tuple, decompressed_slot, /* should_free = */ false);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1654,
          "old_api": "CheckCompressedData",
          "new_api": null,
          "old_text": "CheckCompressedData(value.is_done)",
          "new_text": null,
          "old_line_content": "\t\tCheckCompressedData(value.is_done);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1656,
          "old_api": "MemoryContextSwitchTo",
          "new_api": null,
          "old_text": "MemoryContextSwitchTo(old_ctx)",
          "new_text": null,
          "old_line_content": "\tMemoryContextSwitchTo(old_ctx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1667,
          "old_api": "decompress_batch",
          "new_api": null,
          "old_text": "decompress_batch(decompressor)",
          "new_text": null,
          "old_line_content": "\tconst int n_batch_rows = decompress_batch(decompressor);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1669,
          "old_api": "MemoryContextSwitchTo",
          "new_api": null,
          "old_text": "MemoryContextSwitchTo(decompressor->per_compressed_row_ctx)",
          "new_text": null,
          "old_line_content": "\tMemoryContext old_ctx = MemoryContextSwitchTo(decompressor->per_compressed_row_ctx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1672,
          "old_api": "table_multi_insert",
          "new_api": null,
          "old_text": "table_multi_insert(decompressor->out_rel,\n\t\t\t\t\t   decompressor->decompressed_slots,\n\t\t\t\t\t   n_batch_rows,\n\t\t\t\t\t   decompressor->mycid,\n\t\t\t\t\t   /* options = */ 0,\n\t\t\t\t\t   decompressor->bistate)",
          "new_text": null,
          "old_line_content": "\ttable_multi_insert(decompressor->out_rel,",
          "new_line_content": "\t\t\t\t\t   decompressor->decompressed_slots,",
          "content_same": false
        },
        {
          "line": 1706,
          "old_api": "GetPerTupleExprContext",
          "new_api": null,
          "old_text": "GetPerTupleExprContext(estate)",
          "new_text": null,
          "old_line_content": "\t\t\t\tExprContext *econtext = GetPerTupleExprContext(estate);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1713,
          "old_api": "ExecInsertIndexTuplesCompat",
          "new_api": null,
          "old_text": "ExecInsertIndexTuplesCompat(&indexstate_copy,\n\t\t\t\t\t\t\t\t\t\t\tdecompressed_slot,\n\t\t\t\t\t\t\t\t\t\t\testate,\n\t\t\t\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\t\t\t\tNULL,\n\t\t\t\t\t\t\t\t\t\t\tNIL,\n\t\t\t\t\t\t\t\t\t\t\tfalse)",
          "new_text": null,
          "old_line_content": "\t\t\t\tExecInsertIndexTuplesCompat(&indexstate_copy,",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\tdecompressed_slot,",
          "content_same": false
        },
        {
          "line": 1726,
          "old_api": "MemoryContextReset",
          "new_api": null,
          "old_text": "MemoryContextReset(decompressor->per_compressed_row_ctx)",
          "new_text": null,
          "old_line_content": "\tMemoryContextReset(decompressor->per_compressed_row_ctx);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1733,
          "old_api": "decompress_batch",
          "new_api": null,
          "old_text": "decompress_batch(decompressor)",
          "new_text": null,
          "old_line_content": "\tconst int n_batch_rows = decompress_batch(decompressor);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1735,
          "old_api": "MemoryContextSwitchTo",
          "new_api": null,
          "old_text": "MemoryContextSwitchTo(decompressor->per_compressed_row_ctx)",
          "new_text": null,
          "old_line_content": "\tMemoryContext old_ctx = MemoryContextSwitchTo(decompressor->per_compressed_row_ctx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1739,
          "old_api": "tuplesort_puttupleslot",
          "new_api": null,
          "old_text": "tuplesort_puttupleslot(tuplesortstate, decompressor->decompressed_slots[i])",
          "new_text": null,
          "old_line_content": "\t\ttuplesort_puttupleslot(tuplesortstate, decompressor->decompressed_slots[i]);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1743,
          "old_api": "MemoryContextReset",
          "new_api": null,
          "old_text": "MemoryContextReset(decompressor->per_compressed_row_ctx)",
          "new_text": null,
          "old_line_content": "\tMemoryContextReset(decompressor->per_compressed_row_ctx);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1760,
          "old_api": "PG_RETURN_NULL",
          "new_api": null,
          "old_text": "PG_RETURN_NULL()",
          "new_text": null,
          "old_line_content": "\t\tPG_RETURN_NULL();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1762,
          "old_api": "SRF_IS_FIRSTCALL",
          "new_api": null,
          "old_text": "SRF_IS_FIRSTCALL()",
          "new_text": null,
          "old_line_content": "\tif (SRF_IS_FIRSTCALL())",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 1765,
          "old_api": "MemoryContextSwitchTo",
          "new_api": null,
          "old_text": "MemoryContextSwitchTo(funcctx->multi_call_memory_ctx)",
          "new_text": null,
          "old_line_content": "\t\toldcontext = MemoryContextSwitchTo(funcctx->multi_call_memory_ctx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1767,
          "old_api": "PG_GETARG_DATUM",
          "new_api": null,
          "old_text": "PG_GETARG_DATUM(0)",
          "new_text": null,
          "old_line_content": "\t\theader = get_compressed_data_header(PG_GETARG_DATUM(0));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1771,
          "old_api": "get_fn_expr_argtype",
          "new_api": null,
          "old_text": "get_fn_expr_argtype(fcinfo->flinfo, 1)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t  get_fn_expr_argtype(fcinfo->flinfo, 1));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1774,
          "old_api": "MemoryContextSwitchTo",
          "new_api": null,
          "old_text": "MemoryContextSwitchTo(oldcontext)",
          "new_text": null,
          "old_line_content": "\t\tMemoryContextSwitchTo(oldcontext);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1777,
          "old_api": "SRF_PERCALL_SETUP",
          "new_api": null,
          "old_text": "SRF_PERCALL_SETUP()",
          "new_text": null,
          "old_line_content": "\tfuncctx = SRF_PERCALL_SETUP();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1780,
          "old_api": "try_next",
          "new_api": null,
          "old_text": "iter->try_next(iter)",
          "new_text": null,
          "old_line_content": "\tres = iter->try_next(iter);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1783,
          "old_api": "SRF_RETURN_DONE",
          "new_api": null,
          "old_text": "SRF_RETURN_DONE(funcctx)",
          "new_text": null,
          "old_line_content": "\t\tSRF_RETURN_DONE(funcctx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1786,
          "old_api": "SRF_RETURN_NEXT_NULL",
          "new_api": null,
          "old_text": "SRF_RETURN_NEXT_NULL(funcctx)",
          "new_text": null,
          "old_line_content": "\t\tSRF_RETURN_NEXT_NULL(funcctx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1788,
          "old_api": "SRF_RETURN_NEXT",
          "new_api": null,
          "old_text": "SRF_RETURN_NEXT(funcctx, res.val)",
          "new_text": null,
          "old_line_content": "\tSRF_RETURN_NEXT(funcctx, res.val);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1801,
          "old_api": "PG_RETURN_NULL",
          "new_api": null,
          "old_text": "PG_RETURN_NULL()",
          "new_text": null,
          "old_line_content": "\t\tPG_RETURN_NULL();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1803,
          "old_api": "SRF_IS_FIRSTCALL",
          "new_api": null,
          "old_text": "SRF_IS_FIRSTCALL()",
          "new_text": null,
          "old_line_content": "\tif (SRF_IS_FIRSTCALL())",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 1806,
          "old_api": "MemoryContextSwitchTo",
          "new_api": null,
          "old_text": "MemoryContextSwitchTo(funcctx->multi_call_memory_ctx)",
          "new_text": null,
          "old_line_content": "\t\toldcontext = MemoryContextSwitchTo(funcctx->multi_call_memory_ctx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1808,
          "old_api": "PG_GETARG_DATUM",
          "new_api": null,
          "old_text": "PG_GETARG_DATUM(0)",
          "new_text": null,
          "old_line_content": "\t\theader = get_compressed_data_header(PG_GETARG_DATUM(0));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1812,
          "old_api": "get_fn_expr_argtype",
          "new_api": null,
          "old_text": "get_fn_expr_argtype(fcinfo->flinfo, 1)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t  get_fn_expr_argtype(fcinfo->flinfo, 1));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1815,
          "old_api": "MemoryContextSwitchTo",
          "new_api": null,
          "old_text": "MemoryContextSwitchTo(oldcontext)",
          "new_text": null,
          "old_line_content": "\t\tMemoryContextSwitchTo(oldcontext);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1818,
          "old_api": "SRF_PERCALL_SETUP",
          "new_api": null,
          "old_text": "SRF_PERCALL_SETUP()",
          "new_text": null,
          "old_line_content": "\tfuncctx = SRF_PERCALL_SETUP();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1821,
          "old_api": "try_next",
          "new_api": null,
          "old_text": "iter->try_next(iter)",
          "new_text": null,
          "old_line_content": "\tres = iter->try_next(iter);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1824,
          "old_api": "SRF_RETURN_DONE",
          "new_api": null,
          "old_text": "SRF_RETURN_DONE(funcctx)",
          "new_text": null,
          "old_line_content": "\t\tSRF_RETURN_DONE(funcctx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1827,
          "old_api": "SRF_RETURN_NEXT_NULL",
          "new_api": null,
          "old_text": "SRF_RETURN_NEXT_NULL(funcctx)",
          "new_text": null,
          "old_line_content": "\t\tSRF_RETURN_NEXT_NULL(funcctx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1829,
          "old_api": "SRF_RETURN_NEXT",
          "new_api": null,
          "old_text": "SRF_RETURN_NEXT(funcctx, res.val)",
          "new_text": null,
          "old_line_content": "\tSRF_RETURN_NEXT(funcctx, res.val);",
          "new_line_content": "\t;",
          "content_same": false
        },
        {
          "line": 1836,
          "old_api": "PG_GETARG_DATUM",
          "new_api": null,
          "old_text": "PG_GETARG_DATUM(0)",
          "new_text": null,
          "old_line_content": "\tCompressedDataHeader *header = get_compressed_data_header(PG_GETARG_DATUM(0));",
          "new_line_content": "\tStringInfoData buf;",
          "content_same": false
        },
        {
          "line": 1840,
          "old_api": "pq_sendbyte",
          "new_api": null,
          "old_text": "pq_sendbyte(&buf, header->compression_algorithm)",
          "new_text": null,
          "old_line_content": "\tpq_sendbyte(&buf, header->compression_algorithm);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1842,
          "old_api": "compressed_data_send",
          "new_api": null,
          "old_text": "definitions[header->compression_algorithm].compressed_data_send(header, &buf)",
          "new_text": null,
          "old_line_content": "\tdefinitions[header->compression_algorithm].compressed_data_send(header, &buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1844,
          "old_api": "pq_endtypsend",
          "new_api": null,
          "old_text": "pq_endtypsend(&buf)",
          "new_text": null,
          "old_line_content": "\tPG_RETURN_BYTEA_P(pq_endtypsend(&buf));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1850,
          "old_api": "PG_GETARG_POINTER",
          "new_api": null,
          "old_text": "PG_GETARG_POINTER(0)",
          "new_text": null,
          "old_line_content": "\tStringInfo buf = (StringInfo) PG_GETARG_POINTER(0);",
          "new_line_content": "\tCompressedDataHeader header = { .vl_len_ = { 0 } };",
          "content_same": false
        },
        {
          "line": 1853,
          "old_api": "pq_getmsgbyte",
          "new_api": null,
          "old_text": "pq_getmsgbyte(buf)",
          "new_text": null,
          "old_line_content": "\theader.compression_algorithm = pq_getmsgbyte(buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1856,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"invalid compression algorithm %d\", header.compression_algorithm)",
          "new_text": null,
          "old_line_content": "\t\telog(ERROR, \"invalid compression algorithm %d\", header.compression_algorithm);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1858,
          "old_api": "compressed_data_recv",
          "new_api": null,
          "old_text": "definitions[header.compression_algorithm].compressed_data_recv(buf)",
          "new_text": null,
          "old_line_content": "\treturn definitions[header.compression_algorithm].compressed_data_recv(buf);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1865,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(input)",
          "new_text": null,
          "old_line_content": "\tsize_t input_len = strlen(input);",
          "new_line_content": "\tint decoded_len;",
          "content_same": false
        },
        {
          "line": 1872,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"input too long\")",
          "new_text": null,
          "old_line_content": "\t\telog(ERROR, \"input too long\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1876,
          "old_api": "pg_b64_decode",
          "new_api": null,
          "old_text": "pg_b64_decode(input, input_len, decoded, decoded_len)",
          "new_text": null,
          "old_line_content": "\tdecoded_len = pg_b64_decode(input, input_len, decoded, decoded_len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1879,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"could not decode base64-encoded compressed data\")",
          "new_text": null,
          "old_line_content": "\t\telog(ERROR, \"could not decode base64-encoded compressed data\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1888,
          "old_api": "PointerGetDatum",
          "new_api": null,
          "old_text": "PointerGetDatum(&data)",
          "new_text": null,
          "old_line_content": "\tresult = DirectFunctionCall1(tsl_compressed_data_recv, PointerGetDatum(&data));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1890,
          "old_api": "PG_RETURN_DATUM",
          "new_api": null,
          "old_text": "PG_RETURN_DATUM(result)",
          "new_text": null,
          "old_line_content": "\tPG_RETURN_DATUM(result);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1902,
          "old_api": "pg_b64_encode",
          "new_api": null,
          "old_text": "pg_b64_encode(raw_data, raw_len, encoded, encoded_len)",
          "new_text": null,
          "old_line_content": "\tencoded_len = pg_b64_encode(raw_data, raw_len, encoded, encoded_len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1905,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"could not base64-encode compressed data\")",
          "new_text": null,
          "old_line_content": "\t\telog(ERROR, \"could not base64-encode compressed data\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1909,
          "old_api": "PG_RETURN_CSTRING",
          "new_api": null,
          "old_text": "PG_RETURN_CSTRING(encoded)",
          "new_text": null,
          "old_line_content": "\tPG_RETURN_CSTRING(encoded);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1916,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"invalid compression algorithm %d\", algorithm)",
          "new_text": null,
          "old_line_content": "\t\telog(ERROR, \"invalid compression algorithm %d\", algorithm);",
          "new_line_content": "\treturn definitions[algorithm].compressed_data_storage;",
          "content_same": false
        },
        {
          "line": 1932,
          "old_api": "bms_is_empty",
          "new_api": null,
          "old_text": "bms_is_empty(key_columns)",
          "new_text": null,
          "old_line_content": "\tif (!bms_is_empty(key_columns))",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 1934,
          "old_api": "bms_num_members",
          "new_api": null,
          "old_text": "bms_num_members(key_columns)",
          "new_text": null,
          "old_line_content": "\t\tscankeys = palloc0(bms_num_members(key_columns) * 2 * sizeof(ScanKeyData));",
          "new_line_content": "\t\tint i = -1;",
          "content_same": false
        },
        {
          "line": 1936,
          "old_api": "bms_next_member",
          "new_api": null,
          "old_text": "bms_next_member(key_columns, i)",
          "new_text": null,
          "old_line_content": "\t\twhile ((i = bms_next_member(key_columns, i)) > 0)",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 1939,
          "old_api": "get_attname",
          "new_api": null,
          "old_text": "get_attname(decompressor->out_rel->rd_id, attno, false)",
          "new_text": null,
          "old_line_content": "\t\t\tchar *attname = get_attname(decompressor->out_rel->rd_id, attno, false);",
          "new_line_content": "\t\t\tFormData_hypertable_compression *fd =",
          "content_same": false
        },
        {
          "line": 1941,
          "old_api": "ts_hypertable_compression_get_by_pkey",
          "new_api": null,
          "old_text": "ts_hypertable_compression_get_by_pkey(hypertable_id, attname)",
          "new_text": null,
          "old_line_content": "\t\t\t\tts_hypertable_compression_get_by_pkey(hypertable_id, attname);",
          "new_line_content": "\t\t\tbool isnull;",
          "content_same": false
        },
        {
          "line": 1944,
          "old_api": "slot_getattr",
          "new_api": null,
          "old_text": "slot_getattr(slot, ht_attno, &isnull)",
          "new_text": null,
          "old_line_content": "\t\t\tDatum value = slot_getattr(slot, ht_attno, &isnull);",
          "new_line_content": "\t\t\t/*",
          "content_same": false
        },
        {
          "line": 1961,
          "old_api": "COMPRESSIONCOL_IS_SEGMENT_BY",
          "new_api": null,
          "old_text": "COMPRESSIONCOL_IS_SEGMENT_BY(fd)",
          "new_text": null,
          "old_line_content": "\t\t\tif (COMPRESSIONCOL_IS_SEGMENT_BY(fd))",
          "new_line_content": "\t\t\t{",
          "content_same": false
        },
        {
          "line": 1963,
          "old_api": "create_segment_filter_scankey",
          "new_api": null,
          "old_text": "create_segment_filter_scankey(decompressor,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  attname,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  BTEqualStrategyNumber,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  scankeys,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  key_index,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  null_columns,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  isnull)",
          "new_text": null,
          "old_line_content": "\t\t\t\tkey_index = create_segment_filter_scankey(decompressor,",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t\t  attname,",
          "content_same": false
        },
        {
          "line": 1972,
          "old_api": "COMPRESSIONCOL_IS_ORDER_BY",
          "new_api": null,
          "old_text": "COMPRESSIONCOL_IS_ORDER_BY(fd)",
          "new_text": null,
          "old_line_content": "\t\t\tif (COMPRESSIONCOL_IS_ORDER_BY(fd))",
          "new_line_content": "\t\t\t{",
          "content_same": false
        },
        {
          "line": 1981,
          "old_api": "compression_column_segment_min_name",
          "new_api": null,
          "old_text": "compression_column_segment_min_name(fd)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t\t  compression_column_segment_min_name(fd),",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t\t  BTLessEqualStrategyNumber,",
          "content_same": false
        },
        {
          "line": 1989,
          "old_api": "compression_column_segment_max_name",
          "new_api": null,
          "old_text": "compression_column_segment_max_name(fd)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t\t  compression_column_segment_max_name(fd),",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t\t  BTGreaterEqualStrategyNumber,",
          "content_same": false
        },
        {
          "line": 2010,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(cmp_attno != InvalidAttrNumber)",
          "new_text": null,
          "old_line_content": "\tAssert(cmp_attno != InvalidAttrNumber);",
          "new_line_content": "\t/* This should never happen but if it does happen, we can't generate a scan key for",
          "content_same": false
        },
        {
          "line": 2027,
          "old_api": "bms_add_member",
          "new_api": null,
          "old_text": "bms_add_member(*null_columns, cmp_attno)",
          "new_text": null,
          "old_line_content": "\t\t*null_columns = bms_add_member(*null_columns, cmp_attno);",
          "new_line_content": "\t\treturn num_scankeys;",
          "content_same": false
        },
        {
          "line": 2031,
          "old_api": "AttrNumberGetAttrOffset",
          "new_api": null,
          "old_text": "AttrNumberGetAttrOffset(cmp_attno)",
          "new_text": null,
          "old_line_content": "\tOid atttypid = decompressor->in_desc->attrs[AttrNumberGetAttrOffset(cmp_attno)].atttypid;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2035,
          "old_api": "format_type_be",
          "new_api": null,
          "old_text": "format_type_be(atttypid)",
          "new_text": null,
          "old_line_content": "\t\telog(ERROR, \"no btree opfamily for type \\\"%s\\\"\", format_type_be(atttypid));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2037,
          "old_api": "get_opfamily_member",
          "new_api": null,
          "old_text": "get_opfamily_member(tce->btree_opf, atttypid, atttypid, strategy)",
          "new_text": null,
          "old_line_content": "\tOid opr = get_opfamily_member(tce->btree_opf, atttypid, atttypid, strategy);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2043,
          "old_api": "IsBinaryCoercible",
          "new_api": null,
          "old_text": "IsBinaryCoercible(atttypid, tce->btree_opintype)",
          "new_text": null,
          "old_line_content": "\tif (!OidIsValid(opr) && IsBinaryCoercible(atttypid, tce->btree_opintype))",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 2046,
          "old_api": "get_opfamily_member",
          "new_api": null,
          "old_text": "get_opfamily_member(tce->btree_opf, tce->btree_opintype, tce->btree_opintype, strategy)",
          "new_text": null,
          "old_line_content": "\t\t\tget_opfamily_member(tce->btree_opf, tce->btree_opintype, tce->btree_opintype, strategy);",
          "new_line_content": "\t}",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 166,
      "total_additions": 503,
      "total_deletions": 503,
      "total_api_changes": 1172
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 5,
        "api_related_lines": 1172,
        "non_api_lines": 3,
        "non_api_line_numbers": [
          265,
          234,
          309
        ]
      }
    },
    "api_calls_before": 795,
    "api_calls_after": 795,
    "diff_info": {
      "added_lines": 2,
      "removed_lines": 3,
      "total_diff_lines": 38
    }
  }
}
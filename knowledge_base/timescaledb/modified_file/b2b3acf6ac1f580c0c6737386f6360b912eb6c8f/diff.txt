diff --git a/src/import/planner.c b/src/import/planner.c
index 352a9295e..4b6d98876 100644
--- a/src/import/planner.c
+++ b/src/import/planner.c
@@ -970,6 +970,7 @@ replace_nestloop_params_mutator(Node *node, PlannerInfo *root)
 		/* Upper-level PlaceHolderVars should be long gone at this point */
 		Assert(phv->phlevelsup == 0);
 
+#if PG16_LT
 		/*
 		 * Check whether we need to replace the PHV.  We use bms_overlap as a
 		 * cheap/quick test to see if the PHV might be evaluated in the outer
@@ -977,6 +978,10 @@ replace_nestloop_params_mutator(Node *node, PlannerInfo *root)
 		 */
 		if (!bms_overlap(phv->phrels, root->curOuterRels) ||
 			!bms_is_subset(find_placeholder_info(root, phv, false)->ph_eval_at, root->curOuterRels))
+#else
+		/* Check whether we need to replace the PHV */
+		if (!bms_is_subset(find_placeholder_info(root, phv)->ph_eval_at, root->curOuterRels))
+#endif
 		{
 			/*
 			 * We can't replace the whole PHV, but we might still need to

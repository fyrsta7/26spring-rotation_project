{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tesseract/modified_file/f9860cda41fea6edce542c15dc17688efb0e5451",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tesseract/modified_file/f9860cda41fea6edce542c15dc17688efb0e5451/before.h",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tesseract/modified_file/f9860cda41fea6edce542c15dc17688efb0e5451/after.h",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tesseract/modified_file/f9860cda41fea6edce542c15dc17688efb0e5451/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 78,
          "old_api": "size",
          "new_api": "name_str",
          "old_text": "global_vec.size()",
          "new_text": "global_vec[i]->name_str()",
          "old_line_content": "    for (i = 0; i < global_vec.size(); ++i) {",
          "new_line_content": "      if (strcmp(global_vec[i]->name_str(), name) == 0) return global_vec[i];",
          "content_same": false
        },
        {
          "line": 81,
          "old_api": "size",
          "new_api": "name_str",
          "old_text": "member_vec.size()",
          "new_text": "member_vec[i]->name_str()",
          "old_line_content": "    for (i = 0; i < member_vec.size(); ++i) {",
          "new_line_content": "      if (strcmp(member_vec[i]->name_str(), name) == 0) return member_vec[i];",
          "content_same": false
        },
        {
          "line": 123,
          "old_api": "is_debug",
          "new_api": "is_init",
          "old_text": "this->is_debug()",
          "new_text": "this->is_init()",
          "old_line_content": "         !this->is_debug()) ||",
          "new_line_content": "        (constraint == SET_PARAM_CONSTRAINT_NON_INIT_ONLY && !this->is_init()));",
          "content_same": false
        },
        {
          "line": 155,
          "old_api": "size",
          "new_api": "name_str",
          "old_text": "vec->int_params.size()",
          "new_text": "vec->int_params[i]->name_str()",
          "old_line_content": "    for (int i = 0; i < vec->int_params.size(); ++i) {",
          "new_line_content": "      if (strcmp(vec->int_params[i]->name_str(), name_) == 0) {",
          "content_same": false
        },
        {
          "line": 217,
          "old_api": "length",
          "new_api": "string",
          "old_text": "value_.length()",
          "new_text": "value_.string()",
          "old_line_content": "  bool empty() { return value_.length() <= 0; }",
          "new_line_content": "  const char* c_str() const { return value_.string(); }",
          "content_same": false
        },
        {
          "line": 224,
          "old_api": "name_str",
          "new_api": "size",
          "old_text": "vec->string_params[i]->name_str()",
          "new_text": "vec->string_params.size()",
          "old_line_content": "      if (strcmp(vec->string_params[i]->name_str(), name_) == 0) {",
          "new_line_content": "    for (int i = 0; i < vec->string_params.size(); ++i) {",
          "content_same": false
        },
        {
          "line": 249,
          "old_api": "ParamUtils::RemoveParam<DoubleParam>(this, params_vec_)",
          "new_api": "push_back",
          "old_text": "ParamUtils::RemoveParam<DoubleParam>(this, params_vec_)",
          "new_text": "vec->double_params.push_back(this)",
          "old_line_content": "  ~DoubleParam() { ParamUtils::RemoveParam<DoubleParam>(this, params_vec_); }",
          "new_line_content": "    vec->double_params.push_back(this);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 129,
          "old_api": null,
          "new_api": "strstr",
          "old_text": null,
          "new_text": "strstr(name, \"display\")",
          "old_line_content": "      : name_(name), info_(comment), init_(init) {",
          "new_line_content": "    debug_ = (strstr(name, \"debug\") != nullptr) || (strstr(name, \"display\"));",
          "content_same": false
        },
        {
          "line": 258,
          "old_api": null,
          "new_api": "name_str",
          "old_text": null,
          "new_text": "vec->double_params[i]->name_str()",
          "old_line_content": "        // *vec->double_params[i]);",
          "new_line_content": "      if (strcmp(vec->double_params[i]->name_str(), name_) == 0) {",
          "content_same": false
        },
        {
          "line": 257,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "vec->double_params.size()",
          "old_line_content": "        // printf(\"overriding param %s=%f by =%f\\n\", name_, value_,",
          "new_line_content": "    for (int i = 0; i < vec->double_params.size(); ++i) {",
          "content_same": false
        },
        {
          "line": 225,
          "old_api": null,
          "new_api": "name_str",
          "old_text": null,
          "new_text": "vec->string_params[i]->name_str()",
          "old_line_content": "        // printf(\"overriding param %s=%s by =%s\\n\", name_, value_,",
          "new_line_content": "      if (strcmp(vec->string_params[i]->name_str(), name_) == 0) {",
          "content_same": false
        },
        {
          "line": 90,
          "old_api": null,
          "new_api": "remove",
          "old_text": null,
          "new_text": "vec->remove(i)",
          "old_line_content": "      if ((*vec)[i] == param_ptr) {",
          "new_line_content": "        vec->remove(i);",
          "content_same": false
        },
        {
          "line": 122,
          "old_api": null,
          "new_api": "is_debug",
          "old_text": null,
          "new_text": "this->is_debug()",
          "old_line_content": "        (constraint == SET_PARAM_CONSTRAINT_NON_DEBUG_ONLY &&",
          "new_line_content": "         !this->is_debug()) ||",
          "content_same": false
        },
        {
          "line": 218,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "value_.length()",
          "old_line_content": "  bool operator==(const STRING& other) { return value_ == other; }",
          "new_line_content": "  bool empty() { return value_.length() <= 0; }",
          "content_same": false
        },
        {
          "line": 77,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "global_vec.size()",
          "old_line_content": "    int i;",
          "new_line_content": "    for (i = 0; i < global_vec.size(); ++i) {",
          "content_same": false
        },
        {
          "line": 80,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "member_vec.size()",
          "old_line_content": "    }",
          "new_line_content": "    for (i = 0; i < member_vec.size(); ++i) {",
          "content_same": false
        },
        {
          "line": 146,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "vec->int_params.push_back(this)",
          "old_line_content": "    params_vec_ = &(vec->int_params);",
          "new_line_content": "    vec->int_params.push_back(this);",
          "content_same": false
        },
        {
          "line": 148,
          "old_api": null,
          "new_api": "ParamUtils::RemoveParam<IntParam>(this, params_vec_)",
          "old_text": null,
          "new_text": "ParamUtils::RemoveParam<IntParam>(this, params_vec_)",
          "old_line_content": "  }",
          "new_line_content": "  ~IntParam() { ParamUtils::RemoveParam<IntParam>(this, params_vec_); }",
          "content_same": false
        },
        {
          "line": 212,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "vec->string_params.push_back(this)",
          "old_line_content": "  }",
          "new_line_content": "    vec->string_params.push_back(this);",
          "content_same": false
        },
        {
          "line": 214,
          "old_api": null,
          "new_api": "ParamUtils::RemoveParam<StringParam>(this, params_vec_)",
          "old_text": null,
          "new_text": "ParamUtils::RemoveParam<StringParam>(this, params_vec_)",
          "old_line_content": "  operator STRING&() { return value_; }",
          "new_line_content": "  ~StringParam() { ParamUtils::RemoveParam<StringParam>(this, params_vec_); }",
          "content_same": false
        },
        {
          "line": 88,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "vec->size()",
          "old_line_content": "  static void RemoveParam(T* param_ptr, GenericVector<T*>* vec) {",
          "new_line_content": "    for (int i = 0; i < vec->size(); ++i) {",
          "content_same": false
        },
        {
          "line": 154,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "vec->int_params.size()",
          "old_line_content": "  void ResetFrom(const ParamsVectors* vec) {",
          "new_line_content": "    for (int i = 0; i < vec->int_params.size(); ++i) {",
          "content_same": false
        },
        {
          "line": 251,
          "old_api": null,
          "new_api": "ParamUtils::RemoveParam<DoubleParam>(this, params_vec_)",
          "old_text": null,
          "new_text": "ParamUtils::RemoveParam<DoubleParam>(this, params_vec_)",
          "old_line_content": "  void operator=(double value) { value_ = value; }",
          "new_line_content": "  ~DoubleParam() { ParamUtils::RemoveParam<DoubleParam>(this, params_vec_); }",
          "content_same": false
        },
        {
          "line": 120,
          "old_api": null,
          "new_api": "is_debug",
          "old_text": null,
          "new_text": "this->is_debug()",
          "old_line_content": "        constraint == SET_PARAM_CONSTRAINT_NONE ||",
          "new_line_content": "        (constraint == SET_PARAM_CONSTRAINT_DEBUG_ONLY && this->is_debug()) ||",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 256,
          "old_api": "name_str",
          "new_api": null,
          "old_text": "vec->double_params[i]->name_str()",
          "new_text": null,
          "old_line_content": "      if (strcmp(vec->double_params[i]->name_str(), name_) == 0) {",
          "new_line_content": "  void ResetFrom(const ParamsVectors* vec) {",
          "content_same": false
        },
        {
          "line": 121,
          "old_api": "is_debug",
          "new_api": null,
          "old_text": "this->is_debug()",
          "new_text": null,
          "old_line_content": "        (constraint == SET_PARAM_CONSTRAINT_DEBUG_ONLY && this->is_debug()) ||",
          "new_line_content": "        (constraint == SET_PARAM_CONSTRAINT_NON_DEBUG_ONLY &&",
          "content_same": false
        },
        {
          "line": 130,
          "old_api": "strstr",
          "new_api": null,
          "old_text": "strstr(name, \"display\")",
          "new_text": null,
          "old_line_content": "    debug_ = (strstr(name, \"debug\") != nullptr) || (strstr(name, \"display\"));",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 255,
          "old_api": "size",
          "new_api": null,
          "old_text": "vec->double_params.size()",
          "new_text": null,
          "old_line_content": "    for (int i = 0; i < vec->double_params.size(); ++i) {",
          "new_line_content": "  void ResetToDefault() { value_ = default_; }",
          "content_same": false
        },
        {
          "line": 247,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "vec->double_params.push_back(this)",
          "new_text": null,
          "old_line_content": "    vec->double_params.push_back(this);",
          "new_line_content": "    default_ = value;",
          "content_same": false
        },
        {
          "line": 79,
          "old_api": "name_str",
          "new_api": null,
          "old_text": "global_vec[i]->name_str()",
          "new_text": null,
          "old_line_content": "      if (strcmp(global_vec[i]->name_str(), name) == 0) return global_vec[i];",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 124,
          "old_api": "is_init",
          "new_api": null,
          "old_text": "this->is_init()",
          "new_text": null,
          "old_line_content": "        (constraint == SET_PARAM_CONSTRAINT_NON_INIT_ONLY && !this->is_init()));",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 82,
          "old_api": "name_str",
          "new_api": null,
          "old_text": "member_vec[i]->name_str()",
          "new_text": null,
          "old_line_content": "      if (strcmp(member_vec[i]->name_str(), name) == 0) return member_vec[i];",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 147,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "vec->int_params.push_back(this)",
          "new_text": null,
          "old_line_content": "    vec->int_params.push_back(this);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 211,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "vec->string_params.push_back(this)",
          "new_text": null,
          "old_line_content": "    vec->string_params.push_back(this);",
          "new_line_content": "    params_vec_ = &(vec->string_params);",
          "content_same": false
        },
        {
          "line": 149,
          "old_api": "ParamUtils::RemoveParam<IntParam>(this, params_vec_)",
          "new_api": null,
          "old_text": "ParamUtils::RemoveParam<IntParam>(this, params_vec_)",
          "new_text": null,
          "old_line_content": "  ~IntParam() { ParamUtils::RemoveParam<IntParam>(this, params_vec_); }",
          "new_line_content": "  operator int32_t() const { return value_; }",
          "content_same": false
        },
        {
          "line": 213,
          "old_api": "ParamUtils::RemoveParam<StringParam>(this, params_vec_)",
          "new_api": null,
          "old_text": "ParamUtils::RemoveParam<StringParam>(this, params_vec_)",
          "new_text": null,
          "old_line_content": "  ~StringParam() { ParamUtils::RemoveParam<StringParam>(this, params_vec_); }",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 215,
          "old_api": "string",
          "new_api": null,
          "old_text": "value_.string()",
          "new_text": null,
          "old_line_content": "  const char* string() const { return value_.string(); }",
          "new_line_content": "  operator STRING&() { return value_; }",
          "content_same": false
        },
        {
          "line": 89,
          "old_api": "size",
          "new_api": null,
          "old_text": "vec->size()",
          "new_text": null,
          "old_line_content": "    for (int i = 0; i < vec->size(); ++i) {",
          "new_line_content": "      if ((*vec)[i] == param_ptr) {",
          "content_same": false
        },
        {
          "line": 91,
          "old_api": "remove",
          "new_api": null,
          "old_text": "vec->remove(i)",
          "new_text": null,
          "old_line_content": "        vec->remove(i);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 156,
          "old_api": "name_str",
          "new_api": null,
          "old_text": "vec->int_params[i]->name_str()",
          "new_text": null,
          "old_line_content": "      if (strcmp(vec->int_params[i]->name_str(), name_) == 0) {",
          "new_line_content": "        // printf(\"overriding param %s=%d by =%d\\n\", name_, value_,",
          "content_same": false
        },
        {
          "line": 223,
          "old_api": "size",
          "new_api": null,
          "old_text": "vec->string_params.size()",
          "new_text": null,
          "old_line_content": "    for (int i = 0; i < vec->string_params.size(); ++i) {",
          "new_line_content": "  void ResetFrom(const ParamsVectors* vec) {",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 7,
      "total_additions": 17,
      "total_deletions": 17,
      "total_api_changes": 41
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 5,
        "api_related_lines": 41,
        "non_api_lines": 5,
        "non_api_line_numbers": [
          192,
          5,
          229,
          262,
          159
        ]
      }
    },
    "api_calls_before": 36,
    "api_calls_after": 36,
    "diff_info": {
      "added_lines": 4,
      "removed_lines": 1,
      "total_diff_lines": 45
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tesseract/modified_file/46c887b77eb2f8a3c356e75b340c1c2286a9cfbb",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tesseract/modified_file/46c887b77eb2f8a3c356e75b340c1c2286a9cfbb/before.h",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tesseract/modified_file/46c887b77eb2f8a3c356e75b340c1c2286a9cfbb/after.h",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tesseract/modified_file/46c887b77eb2f8a3c356e75b340c1c2286a9cfbb/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 758,
          "old_api": "Run",
          "new_api": "ASSERT_HOST",
          "old_text": "compare_cb_->Run(object, data_[i])",
          "new_text": "ASSERT_HOST(compare_cb_ != NULL)",
          "old_line_content": "    if (compare_cb_->Run(object, data_[i]))",
          "new_line_content": "    ASSERT_HOST(compare_cb_ != NULL);",
          "content_same": false
        },
        {
          "line": 809,
          "old_api": "size",
          "new_api": "reserve",
          "old_text": "other.size()",
          "new_text": "this->reserve(size_used_ + other.size_used_)",
          "old_line_content": "  for (int i = 0; i < other.size(); ++i) {",
          "new_line_content": "  this->reserve(size_used_ + other.size_used_);",
          "content_same": false
        },
        {
          "line": 810,
          "old_api": "this->operator+=(other.data_[i])",
          "new_api": "size",
          "old_text": "this->operator+=(other.data_[i])",
          "new_text": "other.size()",
          "old_line_content": "    this->operator+=(other.data_[i]);",
          "new_line_content": "  for (int i = 0; i < other.size(); ++i) {",
          "content_same": false
        },
        {
          "line": 819,
          "old_api": "this->operator+=(other)",
          "new_api": "truncate",
          "old_text": "this->operator+=(other)",
          "new_text": "this->truncate(0)",
          "old_line_content": "    this->operator+=(other);",
          "new_line_content": "    this->truncate(0);",
          "content_same": false
        },
        {
          "line": 895,
          "old_api": "reserve",
          "new_api": "FReadEndian",
          "old_text": "reserve(reserved)",
          "new_text": "f->FReadEndian(&reserved, sizeof(reserved), 1, swap)",
          "old_line_content": "  reserve(reserved);",
          "new_line_content": "  if (f->FReadEndian(&reserved, sizeof(reserved), 1, swap) != 1) return false;",
          "content_same": false
        },
        {
          "line": 896,
          "old_api": "FReadEndian",
          "new_api": "reserve",
          "old_text": "f->FReadEndian(&size_used_, sizeof(size_used_), 1, swap)",
          "new_text": "reserve(reserved)",
          "old_line_content": "  if (f->FReadEndian(&size_used_, sizeof(size_used_), 1, swap) != 1)",
          "new_line_content": "  reserve(reserved);",
          "content_same": false
        },
        {
          "line": 936,
          "old_api": "Reverse32",
          "new_api": "fread",
          "old_text": "Reverse32(&reserved)",
          "new_text": "fread(&reserved, sizeof(reserved), 1, fp)",
          "old_line_content": "  if (swap) Reverse32(&reserved);",
          "new_line_content": "  if (fread(&reserved, sizeof(reserved), 1, fp) != 1) return false;",
          "content_same": false
        },
        {
          "line": 937,
          "old_api": "reserve",
          "new_api": "Reverse32",
          "old_text": "reserve(reserved)",
          "new_text": "Reverse32(&reserved)",
          "old_line_content": "  reserve(reserved);",
          "new_line_content": "  if (swap) Reverse32(&reserved);",
          "content_same": false
        },
        {
          "line": 950,
          "old_api": "Reverse32",
          "new_api": "FRead",
          "old_text": "Reverse32(&reserved)",
          "new_text": "fp->FRead(&reserved, sizeof(reserved), 1)",
          "old_line_content": "  if (swap) Reverse32(&reserved);",
          "new_line_content": "  if (fp->FRead(&reserved, sizeof(reserved), 1) != 1) return false;",
          "content_same": false
        },
        {
          "line": 951,
          "old_api": "reserve",
          "new_api": "Reverse32",
          "old_text": "reserve(reserved)",
          "new_text": "Reverse32(&reserved)",
          "old_line_content": "  reserve(reserved);",
          "new_line_content": "  if (swap) Reverse32(&reserved);",
          "content_same": false
        },
        {
          "line": 964,
          "old_api": "Reverse32",
          "new_api": "FRead",
          "old_text": "Reverse32(&reserved)",
          "new_text": "fp->FRead(&reserved, sizeof(reserved), 1)",
          "old_line_content": "  if (swap) Reverse32(&reserved);",
          "new_line_content": "  if (fp->FRead(&reserved, sizeof(reserved), 1) != 1) return false;",
          "content_same": false
        },
        {
          "line": 965,
          "old_api": "FRead",
          "new_api": "Reverse32",
          "old_text": "fp->FRead(NULL, sizeof(T), reserved)",
          "new_text": "Reverse32(&reserved)",
          "old_line_content": "  return fp->FRead(NULL, sizeof(T), reserved) == reserved;",
          "new_line_content": "  if (swap) Reverse32(&reserved);",
          "content_same": false
        },
        {
          "line": 997,
          "old_api": "Reverse32",
          "new_api": "fread",
          "old_text": "Reverse32(&reserved)",
          "new_text": "fread(&reserved, sizeof(reserved), 1, fp)",
          "old_line_content": "  if (swap) Reverse32(&reserved);",
          "new_line_content": "  if (fread(&reserved, sizeof(reserved), 1, fp) != 1) return false;",
          "content_same": false
        },
        {
          "line": 1009,
          "old_api": "Reverse32",
          "new_api": "FRead",
          "old_text": "Reverse32(&reserved)",
          "new_text": "fp->FRead(&reserved, sizeof(reserved), 1)",
          "old_line_content": "  if (swap) Reverse32(&reserved);",
          "new_line_content": "  if (fp->FRead(&reserved, sizeof(reserved), 1) != 1) return false;",
          "content_same": false
        },
        {
          "line": 1021,
          "old_api": "Reverse32",
          "new_api": "FRead",
          "old_text": "Reverse32(&reserved)",
          "new_text": "fp->FRead(&reserved, sizeof(reserved), 1)",
          "old_line_content": "  if (swap) Reverse32(&reserved);",
          "new_line_content": "  if (fp->FRead(&reserved, sizeof(reserved), 1) != 1) return false;",
          "content_same": false
        },
        {
          "line": 1084,
          "old_api": "swap",
          "new_api": "rand_r",
          "old_text": "swap(pivot, start)",
          "new_text": "rand_r(seed)",
          "old_line_content": "  swap(pivot, start);",
          "new_line_content": "  int pivot = rand_r(seed) % num_elements + start;",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1024,
          "old_api": null,
          "new_api": "T::SkipDeSerialize(swap, fp)",
          "old_text": null,
          "new_text": "T::SkipDeSerialize(swap, fp)",
          "old_line_content": "  }",
          "new_line_content": "    if (!T::SkipDeSerialize(swap, fp)) return false;",
          "content_same": false
        },
        {
          "line": 768,
          "old_api": null,
          "new_api": "get_index",
          "old_text": null,
          "new_text": "get_index(object)",
          "old_line_content": "}",
          "new_line_content": "  return get_index(object) != -1;",
          "content_same": false
        },
        {
          "line": 897,
          "old_api": null,
          "new_api": "FReadEndian",
          "old_text": null,
          "new_text": "f->FReadEndian(&size_used_, sizeof(size_used_), 1, swap)",
          "old_line_content": "    return false;",
          "new_line_content": "  if (f->FReadEndian(&size_used_, sizeof(size_used_), 1, swap) != 1)",
          "content_same": false
        },
        {
          "line": 901,
          "old_api": null,
          "new_api": "Run",
          "old_text": null,
          "new_text": "cb->Run(f, data_ + i, swap)",
          "old_line_content": "        delete cb;",
          "new_line_content": "      if (!cb->Run(f, data_ + i, swap)) {",
          "content_same": false
        },
        {
          "line": 776,
          "old_api": null,
          "new_api": "double_the_size",
          "old_text": null,
          "new_text": "double_the_size()",
          "old_line_content": "  index = size_used_++;",
          "new_line_content": "    double_the_size();",
          "content_same": false
        },
        {
          "line": 1033,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "this->clear()",
          "old_line_content": "  this->data_ = from->data_;",
          "new_line_content": "  this->clear();",
          "content_same": false
        },
        {
          "line": 908,
          "old_api": null,
          "new_api": "FReadEndian",
          "old_text": null,
          "new_text": "f->FReadEndian(data_, sizeof(T), size_used_, swap)",
          "old_line_content": "      return false;",
          "new_line_content": "    if (f->FReadEndian(data_, sizeof(T), size_used_, swap) != size_used_)",
          "content_same": false
        },
        {
          "line": 784,
          "old_api": null,
          "new_api": "get_index",
          "old_text": null,
          "new_text": "get_index(object)",
          "old_line_content": "  if (index >= 0)",
          "new_line_content": "  int index = get_index(object);",
          "content_same": false
        },
        {
          "line": 787,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "push_back(object)",
          "old_line_content": "}",
          "new_line_content": "  return push_back(object);",
          "content_same": false
        },
        {
          "line": 919,
          "old_api": null,
          "new_api": "fwrite",
          "old_text": null,
          "new_text": "fwrite(data_, sizeof(*data_), size_used_, fp)",
          "old_line_content": "  return true;",
          "new_line_content": "  if (fwrite(data_, sizeof(*data_), size_used_, fp) != size_used_) return false;",
          "content_same": false
        },
        {
          "line": 1048,
          "old_api": null,
          "new_api": "sort",
          "old_text": null,
          "new_text": "sort(&tesseract::sort_cmp<T>)",
          "old_line_content": "}",
          "new_line_content": "  sort(&tesseract::sort_cmp<T>);",
          "content_same": false
        },
        {
          "line": 794,
          "old_api": null,
          "new_api": "double_the_size",
          "old_text": null,
          "new_text": "double_the_size()",
          "old_line_content": "  for (int i = size_used_; i > 0; --i)",
          "new_line_content": "    double_the_size();",
          "content_same": false
        },
        {
          "line": 925,
          "old_api": null,
          "new_api": "FWrite",
          "old_text": null,
          "new_text": "fp->FWrite(data_, sizeof(*data_), size_used_)",
          "old_line_content": "  return true;",
          "new_line_content": "  if (fp->FWrite(data_, sizeof(*data_), size_used_) != size_used_) return false;",
          "content_same": false
        },
        {
          "line": 673,
          "old_api": null,
          "new_api": "reserve",
          "old_text": null,
          "new_text": "reserve(kDefaultVectorSize)",
          "old_line_content": "  }",
          "new_line_content": "    reserve(kDefaultVectorSize);",
          "content_same": false
        },
        {
          "line": 676,
          "old_api": null,
          "new_api": "reserve",
          "old_text": null,
          "new_text": "reserve(2 * size_reserved_)",
          "old_line_content": "  }",
          "new_line_content": "    reserve(2 * size_reserved_);",
          "content_same": false
        },
        {
          "line": 804,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "push_back(t)",
          "old_line_content": "}",
          "new_line_content": "  push_back(t);",
          "content_same": false
        },
        {
          "line": 938,
          "old_api": null,
          "new_api": "reserve",
          "old_text": null,
          "new_text": "reserve(reserved)",
          "old_line_content": "  size_used_ = reserved;",
          "new_line_content": "  reserve(reserved);",
          "content_same": false
        },
        {
          "line": 683,
          "old_api": null,
          "new_api": "reserve",
          "old_text": null,
          "new_text": "reserve(size)",
          "old_line_content": "  size_used_ = size;",
          "new_line_content": "  reserve(size);",
          "content_same": false
        },
        {
          "line": 811,
          "old_api": null,
          "new_api": "this->operator+=(other.data_[i])",
          "old_text": null,
          "new_text": "this->operator+=(other.data_[i])",
          "old_line_content": "  }",
          "new_line_content": "    this->operator+=(other.data_[i]);",
          "content_same": false
        },
        {
          "line": 940,
          "old_api": null,
          "new_api": "fread",
          "old_text": null,
          "new_text": "fread(data_, sizeof(T), size_used_, fp)",
          "old_line_content": "  if (swap) {",
          "new_line_content": "  if (fread(data_, sizeof(T), size_used_, fp) != size_used_) return false;",
          "content_same": false
        },
        {
          "line": 943,
          "old_api": null,
          "new_api": "ReverseN",
          "old_text": null,
          "new_text": "ReverseN(&data_[i], sizeof(data_[i]))",
          "old_line_content": "  }",
          "new_line_content": "      ReverseN(&data_[i], sizeof(data_[i]));",
          "content_same": false
        },
        {
          "line": 820,
          "old_api": null,
          "new_api": "this->operator+=(other)",
          "old_text": null,
          "new_text": "this->operator+=(other)",
          "old_line_content": "  }",
          "new_line_content": "    this->operator+=(other);",
          "content_same": false
        },
        {
          "line": 693,
          "old_api": null,
          "new_api": "ASSERT_HOST",
          "old_text": null,
          "new_text": "ASSERT_HOST(index >= 0 && index < size_used_)",
          "old_line_content": "  return data_[index];",
          "new_line_content": "  ASSERT_HOST(index >= 0 && index < size_used_);",
          "content_same": false
        },
        {
          "line": 952,
          "old_api": null,
          "new_api": "reserve",
          "old_text": null,
          "new_text": "reserve(reserved)",
          "old_line_content": "  size_used_ = reserved;",
          "new_line_content": "  reserve(reserved);",
          "content_same": false
        },
        {
          "line": 1081,
          "old_api": null,
          "new_api": "srand",
          "old_text": null,
          "new_text": "srand(*seed)",
          "old_line_content": "  #define rand_r(seed) rand()",
          "new_line_content": "  srand(*seed);",
          "content_same": false
        },
        {
          "line": 954,
          "old_api": null,
          "new_api": "FRead",
          "old_text": null,
          "new_text": "fp->FRead(data_, sizeof(T), size_used_)",
          "old_line_content": "  if (swap) {",
          "new_line_content": "  if (fp->FRead(data_, sizeof(T), size_used_) != size_used_) return false;",
          "content_same": false
        },
        {
          "line": 699,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(index >= 0 && index < size_used_)",
          "old_line_content": "  return data_[index];",
          "new_line_content": "  assert(index >= 0 && index < size_used_);",
          "content_same": false
        },
        {
          "line": 1085,
          "old_api": null,
          "new_api": "swap",
          "old_text": null,
          "new_text": "swap(pivot, start)",
          "old_line_content": "  // The invariant condition here is that items [start, next_lesser) are less",
          "new_line_content": "  swap(pivot, start);",
          "content_same": false
        },
        {
          "line": 957,
          "old_api": null,
          "new_api": "ReverseN",
          "old_text": null,
          "new_text": "ReverseN(&data_[i], sizeof(data_[i]))",
          "old_line_content": "  }",
          "new_line_content": "      ReverseN(&data_[i], sizeof(data_[i]));",
          "content_same": false
        },
        {
          "line": 705,
          "old_api": null,
          "new_api": "ASSERT_HOST",
          "old_text": null,
          "new_text": "ASSERT_HOST(size_used_ > 0)",
          "old_line_content": "  return data_[size_used_ - 1];",
          "new_line_content": "  ASSERT_HOST(size_used_ > 0);",
          "content_same": false
        },
        {
          "line": 1094,
          "old_api": null,
          "new_api": "swap",
          "old_text": null,
          "new_text": "swap(next_lesser++, next_sample++)",
          "old_line_content": "    } else if (data_[next_sample] == data_[next_lesser]) {",
          "new_line_content": "      swap(next_lesser++, next_sample++);",
          "content_same": false
        },
        {
          "line": 711,
          "old_api": null,
          "new_api": "ASSERT_HOST",
          "old_text": null,
          "new_text": "ASSERT_HOST(size_used_ > 0)",
          "old_line_content": "  return data_[--size_used_];",
          "new_line_content": "  ASSERT_HOST(size_used_ > 0);",
          "content_same": false
        },
        {
          "line": 966,
          "old_api": null,
          "new_api": "FRead",
          "old_text": null,
          "new_text": "fp->FRead(NULL, sizeof(T), reserved)",
          "old_line_content": "}",
          "new_line_content": "  return fp->FRead(NULL, sizeof(T), reserved) == reserved;",
          "content_same": false
        },
        {
          "line": 1098,
          "old_api": null,
          "new_api": "swap",
          "old_text": null,
          "new_text": "swap(--prev_greater, next_sample)",
          "old_line_content": "    }",
          "new_line_content": "      swap(--prev_greater, next_sample);",
          "content_same": false
        },
        {
          "line": 718,
          "old_api": null,
          "new_api": "ASSERT_HOST",
          "old_text": null,
          "new_text": "ASSERT_HOST(index >= 0 && index < size_used_)",
          "old_line_content": "  data_[index] = t;",
          "new_line_content": "  ASSERT_HOST(index >= 0 && index < size_used_);",
          "content_same": false
        },
        {
          "line": 846,
          "old_api": null,
          "new_api": "Run",
          "old_text": null,
          "new_text": "clear_cb_->Run(data_[i])",
          "old_line_content": "    delete[] data_;",
          "new_line_content": "        clear_cb_->Run(data_[i]);",
          "content_same": false
        },
        {
          "line": 1104,
          "old_api": null,
          "new_api": "choose_nth_item",
          "old_text": null,
          "new_text": "choose_nth_item(target_index, start, next_lesser, seed)",
          "old_line_content": "  else if (target_index < prev_greater)",
          "new_line_content": "    return choose_nth_item(target_index, start, next_lesser, seed);",
          "content_same": false
        },
        {
          "line": 974,
          "old_api": null,
          "new_api": "fwrite",
          "old_text": null,
          "new_text": "fwrite(&size_used_, sizeof(size_used_), 1, fp)",
          "old_line_content": "  for (int i = 0; i < size_used_; ++i) {",
          "new_line_content": "  if (fwrite(&size_used_, sizeof(size_used_), 1, fp) != 1) return false;",
          "content_same": false
        },
        {
          "line": 976,
          "old_api": null,
          "new_api": "Serialize",
          "old_text": null,
          "new_text": "data_[i].Serialize(fp)",
          "old_line_content": "  }",
          "new_line_content": "    if (!data_[i].Serialize(fp)) return false;",
          "content_same": false
        },
        {
          "line": 1108,
          "old_api": null,
          "new_api": "choose_nth_item",
          "old_text": null,
          "new_text": "choose_nth_item(target_index, prev_greater, end, seed)",
          "old_line_content": "}",
          "new_line_content": "    return choose_nth_item(target_index, prev_greater, end, seed);",
          "content_same": false
        },
        {
          "line": 982,
          "old_api": null,
          "new_api": "FWrite",
          "old_text": null,
          "new_text": "fp->FWrite(&size_used_, sizeof(size_used_), 1)",
          "old_line_content": "  for (int i = 0; i < size_used_; ++i) {",
          "new_line_content": "  if (fp->FWrite(&size_used_, sizeof(size_used_), 1) != 1) return false;",
          "content_same": false
        },
        {
          "line": 727,
          "old_api": null,
          "new_api": "ASSERT_HOST",
          "old_text": null,
          "new_text": "ASSERT_HOST(index >= 0 && index <= size_used_)",
          "old_line_content": "  if (size_reserved_ == size_used_)",
          "new_line_content": "  ASSERT_HOST(index >= 0 && index <= size_used_);",
          "content_same": false
        },
        {
          "line": 984,
          "old_api": null,
          "new_api": "Serialize",
          "old_text": null,
          "new_text": "data_[i].Serialize(fp)",
          "old_line_content": "  }",
          "new_line_content": "    if (!data_[i].Serialize(fp)) return false;",
          "content_same": false
        },
        {
          "line": 729,
          "old_api": null,
          "new_api": "double_the_size",
          "old_text": null,
          "new_text": "double_the_size()",
          "old_line_content": "  for (int i = size_used_; i > index; --i) {",
          "new_line_content": "    double_the_size();",
          "content_same": false
        },
        {
          "line": 741,
          "old_api": null,
          "new_api": "ASSERT_HOST",
          "old_text": null,
          "new_text": "ASSERT_HOST(index >= 0 && index < size_used_)",
          "old_line_content": "  for (int i = index; i < size_used_ - 1; ++i) {",
          "new_line_content": "  ASSERT_HOST(index >= 0 && index < size_used_);",
          "content_same": false
        },
        {
          "line": 998,
          "old_api": null,
          "new_api": "Reverse32",
          "old_text": null,
          "new_text": "Reverse32(&reserved)",
          "old_line_content": "  T empty;",
          "new_line_content": "  if (swap) Reverse32(&reserved);",
          "content_same": false
        },
        {
          "line": 1000,
          "old_api": null,
          "new_api": "init_to_size",
          "old_text": null,
          "new_text": "init_to_size(reserved, empty)",
          "old_line_content": "  for (int i = 0; i < reserved; ++i) {",
          "new_line_content": "  init_to_size(reserved, empty);",
          "content_same": false
        },
        {
          "line": 1002,
          "old_api": null,
          "new_api": "DeSerialize",
          "old_text": null,
          "new_text": "data_[i].DeSerialize(swap, fp)",
          "old_line_content": "  }",
          "new_line_content": "    if (!data_[i].DeSerialize(swap, fp)) return false;",
          "content_same": false
        },
        {
          "line": 875,
          "old_api": null,
          "new_api": "fwrite",
          "old_text": null,
          "new_text": "fwrite(&size_used_, sizeof(size_used_), 1, f)",
          "old_line_content": "  if (cb != NULL) {",
          "new_line_content": "  if (fwrite(&size_used_, sizeof(size_used_), 1, f) != 1) return false;",
          "content_same": false
        },
        {
          "line": 878,
          "old_api": null,
          "new_api": "Run",
          "old_text": null,
          "new_text": "cb->Run(f, data_[i])",
          "old_line_content": "        delete cb;",
          "new_line_content": "      if (!cb->Run(f, data_[i])) {",
          "content_same": false
        },
        {
          "line": 1010,
          "old_api": null,
          "new_api": "Reverse32",
          "old_text": null,
          "new_text": "Reverse32(&reserved)",
          "old_line_content": "  T empty;",
          "new_line_content": "  if (swap) Reverse32(&reserved);",
          "content_same": false
        },
        {
          "line": 1012,
          "old_api": null,
          "new_api": "init_to_size",
          "old_text": null,
          "new_text": "init_to_size(reserved, empty)",
          "old_line_content": "  for (int i = 0; i < reserved; ++i) {",
          "new_line_content": "  init_to_size(reserved, empty);",
          "content_same": false
        },
        {
          "line": 885,
          "old_api": null,
          "new_api": "fwrite",
          "old_text": null,
          "new_text": "fwrite(data_, sizeof(T), size_used_, f)",
          "old_line_content": "  }",
          "new_line_content": "    if (fwrite(data_, sizeof(T), size_used_, f) != size_used_) return false;",
          "content_same": false
        },
        {
          "line": 1014,
          "old_api": null,
          "new_api": "DeSerialize",
          "old_text": null,
          "new_text": "data_[i].DeSerialize(swap, fp)",
          "old_line_content": "  }",
          "new_line_content": "    if (!data_[i].DeSerialize(swap, fp)) return false;",
          "content_same": false
        },
        {
          "line": 759,
          "old_api": null,
          "new_api": "Run",
          "old_text": null,
          "new_text": "compare_cb_->Run(object, data_[i])",
          "old_line_content": "      return i;",
          "new_line_content": "    if (compare_cb_->Run(object, data_[i]))",
          "content_same": false
        },
        {
          "line": 1022,
          "old_api": null,
          "new_api": "Reverse32",
          "old_text": null,
          "new_text": "Reverse32(&reserved)",
          "old_line_content": "  for (int i = 0; i < reserved; ++i) {",
          "new_line_content": "  if (swap) Reverse32(&reserved);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 900,
          "old_api": "Run",
          "new_api": null,
          "old_text": "cb->Run(f, data_ + i, swap)",
          "new_text": null,
          "old_line_content": "      if (!cb->Run(f, data_ + i, swap)) {",
          "new_line_content": "    for (int i = 0; i < size_used_; ++i) {",
          "content_same": false
        },
        {
          "line": 775,
          "old_api": "double_the_size",
          "new_api": null,
          "old_text": "double_the_size()",
          "new_text": null,
          "old_line_content": "    double_the_size();",
          "new_line_content": "  if (size_used_ == size_reserved_)",
          "content_same": false
        },
        {
          "line": 1032,
          "old_api": "clear",
          "new_api": null,
          "old_text": "this->clear()",
          "new_text": null,
          "old_line_content": "  this->clear();",
          "new_line_content": "void GenericVector<T>::move(GenericVector<T>* from) {",
          "content_same": false
        },
        {
          "line": 907,
          "old_api": "FReadEndian",
          "new_api": null,
          "old_text": "f->FReadEndian(data_, sizeof(T), size_used_, swap)",
          "new_text": null,
          "old_line_content": "    if (f->FReadEndian(data_, sizeof(T), size_used_, swap) != size_used_)",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 783,
          "old_api": "get_index",
          "new_api": null,
          "old_text": "get_index(object)",
          "new_text": null,
          "old_line_content": "  int index = get_index(object);",
          "new_line_content": "int GenericVector<T>::push_back_new(T object) {",
          "content_same": false
        },
        {
          "line": 786,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "push_back(object)",
          "new_text": null,
          "old_line_content": "  return push_back(object);",
          "new_line_content": "    return index;",
          "content_same": false
        },
        {
          "line": 917,
          "old_api": "fwrite",
          "new_api": null,
          "old_text": "fwrite(&size_used_, sizeof(size_used_), 1, fp)",
          "new_text": null,
          "old_line_content": "  if (fwrite(&size_used_, sizeof(size_used_), 1, fp) != 1) return false;",
          "new_line_content": "bool GenericVector<T>::Serialize(FILE* fp) const {",
          "content_same": false
        },
        {
          "line": 1047,
          "old_api": "sort",
          "new_api": null,
          "old_text": "sort(&tesseract::sort_cmp<T>)",
          "new_text": null,
          "old_line_content": "  sort(&tesseract::sort_cmp<T>);",
          "new_line_content": "void GenericVector<T>::sort() {",
          "content_same": false
        },
        {
          "line": 793,
          "old_api": "double_the_size",
          "new_api": null,
          "old_text": "double_the_size()",
          "new_text": null,
          "old_line_content": "    double_the_size();",
          "new_line_content": "  if (size_used_ == size_reserved_)",
          "content_same": false
        },
        {
          "line": 923,
          "old_api": "FWrite",
          "new_api": null,
          "old_text": "fp->FWrite(&size_used_, sizeof(size_used_), 1)",
          "new_text": null,
          "old_line_content": "  if (fp->FWrite(&size_used_, sizeof(size_used_), 1) != 1) return false;",
          "new_line_content": "bool GenericVector<T>::Serialize(tesseract::TFile* fp) const {",
          "content_same": false
        },
        {
          "line": 1023,
          "old_api": "T::SkipDeSerialize(swap, fp)",
          "new_api": null,
          "old_text": "T::SkipDeSerialize(swap, fp)",
          "new_text": null,
          "old_line_content": "    if (!T::SkipDeSerialize(swap, fp)) return false;",
          "new_line_content": "  for (int i = 0; i < reserved; ++i) {",
          "content_same": false
        },
        {
          "line": 672,
          "old_api": "reserve",
          "new_api": null,
          "old_text": "reserve(kDefaultVectorSize)",
          "new_text": null,
          "old_line_content": "    reserve(kDefaultVectorSize);",
          "new_line_content": "  if (size_reserved_ == 0) {",
          "content_same": false
        },
        {
          "line": 675,
          "old_api": "reserve",
          "new_api": null,
          "old_text": "reserve(2 * size_reserved_)",
          "new_text": null,
          "old_line_content": "    reserve(2 * size_reserved_);",
          "new_line_content": "  else {",
          "content_same": false
        },
        {
          "line": 803,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "push_back(t)",
          "new_text": null,
          "old_line_content": "  push_back(t);",
          "new_line_content": "void GenericVector<T>::operator+=(T t) {",
          "content_same": false
        },
        {
          "line": 935,
          "old_api": "fread",
          "new_api": null,
          "old_text": "fread(&reserved, sizeof(reserved), 1, fp)",
          "new_text": null,
          "old_line_content": "  if (fread(&reserved, sizeof(reserved), 1, fp) != 1) return false;",
          "new_line_content": "  inT32 reserved;",
          "content_same": false
        },
        {
          "line": 808,
          "old_api": "reserve",
          "new_api": null,
          "old_text": "this->reserve(size_used_ + other.size_used_)",
          "new_text": null,
          "old_line_content": "  this->reserve(size_used_ + other.size_used_);",
          "new_line_content": "GenericVector<T> &GenericVector<T>::operator+=(const GenericVector& other) {",
          "content_same": false
        },
        {
          "line": 682,
          "old_api": "reserve",
          "new_api": null,
          "old_text": "reserve(size)",
          "new_text": null,
          "old_line_content": "  reserve(size);",
          "new_line_content": "void GenericVector<T>::init_to_size(int size, T t) {",
          "content_same": false
        },
        {
          "line": 939,
          "old_api": "fread",
          "new_api": null,
          "old_text": "fread(data_, sizeof(T), size_used_, fp)",
          "new_text": null,
          "old_line_content": "  if (fread(data_, sizeof(T), size_used_, fp) != size_used_) return false;",
          "new_line_content": "  size_used_ = reserved;",
          "content_same": false
        },
        {
          "line": 942,
          "old_api": "ReverseN",
          "new_api": null,
          "old_text": "ReverseN(&data_[i], sizeof(data_[i]))",
          "new_text": null,
          "old_line_content": "      ReverseN(&data_[i], sizeof(data_[i]));",
          "new_line_content": "    for (int i = 0; i < size_used_; ++i)",
          "content_same": false
        },
        {
          "line": 818,
          "old_api": "truncate",
          "new_api": null,
          "old_text": "this->truncate(0)",
          "new_text": null,
          "old_line_content": "    this->truncate(0);",
          "new_line_content": "  if (&other != this) {",
          "content_same": false
        },
        {
          "line": 692,
          "old_api": "ASSERT_HOST",
          "new_api": null,
          "old_text": "ASSERT_HOST(index >= 0 && index < size_used_)",
          "new_text": null,
          "old_line_content": "  ASSERT_HOST(index >= 0 && index < size_used_);",
          "new_line_content": "T &GenericVector<T>::get(int index) const {",
          "content_same": false
        },
        {
          "line": 949,
          "old_api": "FRead",
          "new_api": null,
          "old_text": "fp->FRead(&reserved, sizeof(reserved), 1)",
          "new_text": null,
          "old_line_content": "  if (fp->FRead(&reserved, sizeof(reserved), 1) != 1) return false;",
          "new_line_content": "  inT32 reserved;",
          "content_same": false
        },
        {
          "line": 1080,
          "old_api": "srand",
          "new_api": null,
          "old_text": "srand(*seed)",
          "new_text": null,
          "old_line_content": "  srand(*seed);",
          "new_line_content": "  #ifndef rand_r  // _MSC_VER, ANDROID",
          "content_same": false
        },
        {
          "line": 953,
          "old_api": "FRead",
          "new_api": null,
          "old_text": "fp->FRead(data_, sizeof(T), size_used_)",
          "new_text": null,
          "old_line_content": "  if (fp->FRead(data_, sizeof(T), size_used_) != size_used_) return false;",
          "new_line_content": "  size_used_ = reserved;",
          "content_same": false
        },
        {
          "line": 698,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(index >= 0 && index < size_used_)",
          "new_text": null,
          "old_line_content": "  assert(index >= 0 && index < size_used_);",
          "new_line_content": "T &GenericVector<T>::operator[](int index) const {",
          "content_same": false
        },
        {
          "line": 1083,
          "old_api": "rand_r",
          "new_api": null,
          "old_text": "rand_r(seed)",
          "new_text": null,
          "old_line_content": "  int pivot = rand_r(seed) % num_elements + start;",
          "new_line_content": "  #endif  // _MSC_VER",
          "content_same": false
        },
        {
          "line": 956,
          "old_api": "ReverseN",
          "new_api": null,
          "old_text": "ReverseN(&data_[i], sizeof(data_[i]))",
          "new_text": null,
          "old_line_content": "      ReverseN(&data_[i], sizeof(data_[i]));",
          "new_line_content": "    for (int i = 0; i < size_used_; ++i)",
          "content_same": false
        },
        {
          "line": 704,
          "old_api": "ASSERT_HOST",
          "new_api": null,
          "old_text": "ASSERT_HOST(size_used_ > 0)",
          "new_text": null,
          "old_line_content": "  ASSERT_HOST(size_used_ > 0);",
          "new_line_content": "T &GenericVector<T>::back() const {",
          "content_same": false
        },
        {
          "line": 963,
          "old_api": "FRead",
          "new_api": null,
          "old_text": "fp->FRead(&reserved, sizeof(reserved), 1)",
          "new_text": null,
          "old_line_content": "  if (fp->FRead(&reserved, sizeof(reserved), 1) != 1) return false;",
          "new_line_content": "  inT32 reserved;",
          "content_same": false
        },
        {
          "line": 1093,
          "old_api": "swap",
          "new_api": null,
          "old_text": "swap(next_lesser++, next_sample++)",
          "new_text": null,
          "old_line_content": "      swap(next_lesser++, next_sample++);",
          "new_line_content": "    if (data_[next_sample] < data_[next_lesser]) {",
          "content_same": false
        },
        {
          "line": 710,
          "old_api": "ASSERT_HOST",
          "new_api": null,
          "old_text": "ASSERT_HOST(size_used_ > 0)",
          "new_text": null,
          "old_line_content": "  ASSERT_HOST(size_used_ > 0);",
          "new_line_content": "T GenericVector<T>::pop_back() {",
          "content_same": false
        },
        {
          "line": 1097,
          "old_api": "swap",
          "new_api": null,
          "old_text": "swap(--prev_greater, next_sample)",
          "new_text": null,
          "old_line_content": "      swap(--prev_greater, next_sample);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 717,
          "old_api": "ASSERT_HOST",
          "new_api": null,
          "old_text": "ASSERT_HOST(index >= 0 && index < size_used_)",
          "new_text": null,
          "old_line_content": "  ASSERT_HOST(index >= 0 && index < size_used_);",
          "new_line_content": "void GenericVector<T>::set(T t, int index) {",
          "content_same": false
        },
        {
          "line": 845,
          "old_api": "Run",
          "new_api": null,
          "old_text": "clear_cb_->Run(data_[i])",
          "new_text": null,
          "old_line_content": "        clear_cb_->Run(data_[i]);",
          "new_line_content": "      for (int i = 0; i < size_used_; ++i)",
          "content_same": false
        },
        {
          "line": 1103,
          "old_api": "choose_nth_item",
          "new_api": null,
          "old_text": "choose_nth_item(target_index, start, next_lesser, seed)",
          "new_text": null,
          "old_line_content": "    return choose_nth_item(target_index, start, next_lesser, seed);",
          "new_line_content": "  if (target_index < next_lesser)",
          "content_same": false
        },
        {
          "line": 973,
          "old_api": "fwrite",
          "new_api": null,
          "old_text": "fwrite(&size_used_, sizeof(size_used_), 1, fp)",
          "new_text": null,
          "old_line_content": "  if (fwrite(&size_used_, sizeof(size_used_), 1, fp) != 1) return false;",
          "new_line_content": "bool GenericVector<T>::SerializeClasses(FILE* fp) const {",
          "content_same": false
        },
        {
          "line": 975,
          "old_api": "Serialize",
          "new_api": null,
          "old_text": "data_[i].Serialize(fp)",
          "new_text": null,
          "old_line_content": "    if (!data_[i].Serialize(fp)) return false;",
          "new_line_content": "  for (int i = 0; i < size_used_; ++i) {",
          "content_same": false
        },
        {
          "line": 1107,
          "old_api": "choose_nth_item",
          "new_api": null,
          "old_text": "choose_nth_item(target_index, prev_greater, end, seed)",
          "new_text": null,
          "old_line_content": "    return choose_nth_item(target_index, prev_greater, end, seed);",
          "new_line_content": "  else",
          "content_same": false
        },
        {
          "line": 981,
          "old_api": "FWrite",
          "new_api": null,
          "old_text": "fp->FWrite(&size_used_, sizeof(size_used_), 1)",
          "new_text": null,
          "old_line_content": "  if (fp->FWrite(&size_used_, sizeof(size_used_), 1) != 1) return false;",
          "new_line_content": "bool GenericVector<T>::SerializeClasses(tesseract::TFile* fp) const {",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": "ASSERT_HOST",
          "new_api": null,
          "old_text": "ASSERT_HOST(index >= 0 && index <= size_used_)",
          "new_text": null,
          "old_line_content": "  ASSERT_HOST(index >= 0 && index <= size_used_);",
          "new_line_content": "void GenericVector<T>::insert(T t, int index) {",
          "content_same": false
        },
        {
          "line": 983,
          "old_api": "Serialize",
          "new_api": null,
          "old_text": "data_[i].Serialize(fp)",
          "new_text": null,
          "old_line_content": "    if (!data_[i].Serialize(fp)) return false;",
          "new_line_content": "  for (int i = 0; i < size_used_; ++i) {",
          "content_same": false
        },
        {
          "line": 728,
          "old_api": "double_the_size",
          "new_api": null,
          "old_text": "double_the_size()",
          "new_text": null,
          "old_line_content": "    double_the_size();",
          "new_line_content": "  if (size_reserved_ == size_used_)",
          "content_same": false
        },
        {
          "line": 740,
          "old_api": "ASSERT_HOST",
          "new_api": null,
          "old_text": "ASSERT_HOST(index >= 0 && index < size_used_)",
          "new_text": null,
          "old_line_content": "  ASSERT_HOST(index >= 0 && index < size_used_);",
          "new_line_content": "void GenericVector<T>::remove(int index) {",
          "content_same": false
        },
        {
          "line": 996,
          "old_api": "fread",
          "new_api": null,
          "old_text": "fread(&reserved, sizeof(reserved), 1, fp)",
          "new_text": null,
          "old_line_content": "  if (fread(&reserved, sizeof(reserved), 1, fp) != 1) return false;",
          "new_line_content": "  uinT32 reserved;",
          "content_same": false
        },
        {
          "line": 999,
          "old_api": "init_to_size",
          "new_api": null,
          "old_text": "init_to_size(reserved, empty)",
          "new_text": null,
          "old_line_content": "  init_to_size(reserved, empty);",
          "new_line_content": "  T empty;",
          "content_same": false
        },
        {
          "line": 873,
          "old_api": "fwrite",
          "new_api": null,
          "old_text": "fwrite(&size_reserved_, sizeof(size_reserved_), 1, f)",
          "new_text": null,
          "old_line_content": "  if (fwrite(&size_reserved_, sizeof(size_reserved_), 1, f) != 1) return false;",
          "new_line_content": "    FILE* f, TessResultCallback2<bool, FILE*, T const &>* cb) const {",
          "content_same": false
        },
        {
          "line": 1001,
          "old_api": "DeSerialize",
          "new_api": null,
          "old_text": "data_[i].DeSerialize(swap, fp)",
          "new_text": null,
          "old_line_content": "    if (!data_[i].DeSerialize(swap, fp)) return false;",
          "new_line_content": "  for (int i = 0; i < reserved; ++i) {",
          "content_same": false
        },
        {
          "line": 877,
          "old_api": "Run",
          "new_api": null,
          "old_text": "cb->Run(f, data_[i])",
          "new_text": null,
          "old_line_content": "      if (!cb->Run(f, data_[i])) {",
          "new_line_content": "    for (int i = 0; i < size_used_; ++i) {",
          "content_same": false
        },
        {
          "line": 1008,
          "old_api": "FRead",
          "new_api": null,
          "old_text": "fp->FRead(&reserved, sizeof(reserved), 1)",
          "new_text": null,
          "old_line_content": "  if (fp->FRead(&reserved, sizeof(reserved), 1) != 1) return false;",
          "new_line_content": "  uinT32 reserved;",
          "content_same": false
        },
        {
          "line": 1011,
          "old_api": "init_to_size",
          "new_api": null,
          "old_text": "init_to_size(reserved, empty)",
          "new_text": null,
          "old_line_content": "  init_to_size(reserved, empty);",
          "new_line_content": "  T empty;",
          "content_same": false
        },
        {
          "line": 884,
          "old_api": "fwrite",
          "new_api": null,
          "old_text": "fwrite(data_, sizeof(T), size_used_, f)",
          "new_text": null,
          "old_line_content": "    if (fwrite(data_, sizeof(T), size_used_, f) != size_used_) return false;",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 757,
          "old_api": "ASSERT_HOST",
          "new_api": null,
          "old_text": "ASSERT_HOST(compare_cb_ != NULL)",
          "new_text": null,
          "old_line_content": "    ASSERT_HOST(compare_cb_ != NULL);",
          "new_line_content": "  for (int i = 0; i < size_used_; ++i) {",
          "content_same": false
        },
        {
          "line": 1013,
          "old_api": "DeSerialize",
          "new_api": null,
          "old_text": "data_[i].DeSerialize(swap, fp)",
          "new_text": null,
          "old_line_content": "    if (!data_[i].DeSerialize(swap, fp)) return false;",
          "new_line_content": "  for (int i = 0; i < reserved; ++i) {",
          "content_same": false
        },
        {
          "line": 1020,
          "old_api": "FRead",
          "new_api": null,
          "old_text": "fp->FRead(&reserved, sizeof(reserved), 1)",
          "new_text": null,
          "old_line_content": "  if (fp->FRead(&reserved, sizeof(reserved), 1) != 1) return false;",
          "new_line_content": "  uinT32 reserved;",
          "content_same": false
        },
        {
          "line": 894,
          "old_api": "FReadEndian",
          "new_api": null,
          "old_text": "f->FReadEndian(&reserved, sizeof(reserved), 1, swap)",
          "new_text": null,
          "old_line_content": "  if (f->FReadEndian(&reserved, sizeof(reserved), 1, swap) != 1) return false;",
          "new_line_content": "  inT32 reserved;",
          "content_same": false
        },
        {
          "line": 767,
          "old_api": "get_index",
          "new_api": null,
          "old_text": "get_index(object)",
          "new_text": null,
          "old_line_content": "  return get_index(object) != -1;",
          "new_line_content": "bool GenericVector<T>::contains(T object) const {",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 16,
      "total_additions": 56,
      "total_deletions": 56,
      "total_api_changes": 128
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 1,
        "api_related_lines": 128,
        "non_api_lines": 1,
        "non_api_line_numbers": [
          661
        ]
      }
    },
    "api_calls_before": 163,
    "api_calls_after": 163,
    "diff_info": {
      "added_lines": 1,
      "removed_lines": 0,
      "total_diff_lines": 13
    }
  }
}
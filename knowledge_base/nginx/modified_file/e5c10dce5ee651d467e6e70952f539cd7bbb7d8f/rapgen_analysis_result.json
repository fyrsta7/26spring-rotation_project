{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/nginx/modified_file/e5c10dce5ee651d467e6e70952f539cd7bbb7d8f",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/nginx/modified_file/e5c10dce5ee651d467e6e70952f539cd7bbb7d8f/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/nginx/modified_file/e5c10dce5ee651d467e6e70952f539cd7bbb7d8f/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/nginx/modified_file/e5c10dce5ee651d467e6e70952f539cd7bbb7d8f/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 3748,
          "old_api": "SSL_quic_read_level",
          "new_api": "SSL_quic_write_level",
          "old_text": "SSL_quic_read_level(ssl_conn)",
          "new_text": "SSL_quic_write_level(ssl_conn)",
          "old_line_content": "        if (!SSL_provide_quic_data(ssl_conn, SSL_quic_read_level(ssl_conn),",
          "new_line_content": "                   (int) SSL_quic_write_level(ssl_conn));",
          "content_same": false
        },
        {
          "line": 3762,
          "old_api": "SSL_quic_write_level",
          "new_api": "SSL_do_handshake",
          "old_text": "SSL_quic_write_level(ssl_conn)",
          "new_text": "SSL_do_handshake(ssl_conn)",
          "old_line_content": "                   (int) SSL_quic_write_level(ssl_conn));",
          "new_line_content": "    n = SSL_do_handshake(ssl_conn);",
          "content_same": false
        },
        {
          "line": 3764,
          "old_api": "ngx_log_debug1",
          "new_api": "ngx_log_debug2",
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0, \"SSL_do_handshake: %d\", n)",
          "new_text": "ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic SSL_quic_read_level:%d SSL_quic_write_level:%d\",\n                   (int) SSL_quic_read_level(ssl_conn),\n                   (int) SSL_quic_write_level(ssl_conn))",
          "old_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0, \"SSL_do_handshake: %d\", n);",
          "new_line_content": "    ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3767,
          "old_api": "SSL_get_error",
          "new_api": "SSL_quic_write_level",
          "old_text": "SSL_get_error(ssl_conn, n)",
          "new_text": "SSL_quic_write_level(ssl_conn)",
          "old_line_content": "        sslerr = SSL_get_error(ssl_conn, n);",
          "new_line_content": "                   (int) SSL_quic_write_level(ssl_conn));",
          "content_same": false
        },
        {
          "line": 3785,
          "old_api": "SSL_get_cipher",
          "new_api": "SSL_in_init",
          "old_text": "SSL_get_cipher(ssl_conn)",
          "new_text": "SSL_in_init(ssl_conn)",
          "old_line_content": "                   \"quic ssl cipher:%s\", SSL_get_cipher(ssl_conn));",
          "new_line_content": "    if (SSL_in_init(ssl_conn)) {",
          "content_same": false
        },
        {
          "line": 3792,
          "old_api": "ngx_quic_alloc_frame",
          "new_api": "ngx_log_debug0",
          "old_text": "ngx_quic_alloc_frame(c)",
          "new_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic handshake completed successfully\")",
          "old_line_content": "    frame = ngx_quic_alloc_frame(c);",
          "new_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3945,
          "old_api": "ngx_cpymem",
          "new_api": "ngx_movemem",
          "old_text": "ngx_cpymem(b->last, cl->buf->pos,\n                             cl->buf->last - cl->buf->pos)",
          "new_text": "ngx_movemem(b->start, b->pos, b->last - b->pos)",
          "old_line_content": "        b->last = ngx_cpymem(b->last, cl->buf->pos,",
          "new_line_content": "        b->last = ngx_movemem(b->start, b->pos, b->last - b->pos);",
          "content_same": false
        },
        {
          "line": 4400,
          "old_api": "ngx_queue_next",
          "new_api": "ngx_queue_head",
          "old_text": "ngx_queue_next(q)",
          "new_text": "ngx_queue_head(&qc->client_ids)",
          "old_line_content": "        q = ngx_queue_next(q);",
          "new_line_content": "    q = ngx_queue_head(&qc->client_ids);",
          "content_same": false
        },
        {
          "line": 4479,
          "old_api": "ngx_queue_remove",
          "new_api": "ngx_queue_next",
          "old_text": "ngx_queue_remove(q)",
          "new_text": "ngx_queue_next(q)",
          "old_line_content": "            ngx_queue_remove(q);",
          "new_line_content": "         q = ngx_queue_next(q))",
          "content_same": false
        },
        {
          "line": 4481,
          "old_api": "ngx_rbtree_delete",
          "new_api": "ngx_queue_data",
          "old_text": "ngx_rbtree_delete(&c->listening->rbtree, &sid->udp.node)",
          "new_text": "ngx_queue_data(q, ngx_quic_server_id_t, queue)",
          "old_line_content": "            ngx_rbtree_delete(&c->listening->rbtree, &sid->udp.node);",
          "new_line_content": "        sid = ngx_queue_data(q, ngx_quic_server_id_t, queue);",
          "content_same": false
        },
        {
          "line": 4521,
          "old_api": "ngx_quic_alloc_frame",
          "new_api": "ngx_quic_insert_server_id",
          "old_text": "ngx_quic_alloc_frame(c)",
          "new_text": "ngx_quic_insert_server_id(c, &dcid)",
          "old_line_content": "        frame = ngx_quic_alloc_frame(c);",
          "new_line_content": "        sid = ngx_quic_insert_server_id(c, &dcid);",
          "content_same": false
        },
        {
          "line": 4559,
          "old_api": "ngx_queue_head",
          "new_api": "ngx_quic_get_connection",
          "old_text": "ngx_queue_head(&qc->server_ids)",
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    for (q = ngx_queue_head(&qc->server_ids);",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 4564,
          "old_api": "ngx_queue_data",
          "new_api": "ngx_queue_head",
          "old_text": "ngx_queue_data(q, ngx_quic_server_id_t, queue)",
          "new_text": "ngx_queue_head(&qc->server_ids)",
          "old_line_content": "        sid = ngx_queue_data(q, ngx_quic_server_id_t, queue);",
          "new_line_content": "    for (q = ngx_queue_head(&qc->server_ids);",
          "content_same": false
        },
        {
          "line": 4628,
          "old_api": "ngx_queue_remove",
          "new_api": "ngx_queue_empty",
          "old_text": "ngx_queue_remove(&cid->queue)",
          "new_text": "ngx_queue_empty(&qc->free_client_ids)",
          "old_line_content": "        ngx_queue_remove(&cid->queue);",
          "new_line_content": "    if (!ngx_queue_empty(&qc->free_client_ids)) {",
          "content_same": false
        },
        {
          "line": 4630,
          "old_api": "ngx_memzero",
          "new_api": "ngx_queue_head",
          "old_text": "ngx_memzero(cid, sizeof(ngx_quic_client_id_t))",
          "new_text": "ngx_queue_head(&qc->free_client_ids)",
          "old_line_content": "        ngx_memzero(cid, sizeof(ngx_quic_client_id_t));",
          "new_line_content": "        q = ngx_queue_head(&qc->free_client_ids);",
          "content_same": false
        },
        {
          "line": 4655,
          "old_api": "ngx_queue_remove",
          "new_api": "ngx_queue_empty",
          "old_text": "ngx_queue_remove(&sid->queue)",
          "new_text": "ngx_queue_empty(&qc->free_server_ids)",
          "old_line_content": "        ngx_queue_remove(&sid->queue);",
          "new_line_content": "    if (!ngx_queue_empty(&qc->free_server_ids)) {",
          "content_same": false
        },
        {
          "line": 4657,
          "old_api": "ngx_memzero",
          "new_api": "ngx_queue_head",
          "old_text": "ngx_memzero(sid, sizeof(ngx_quic_server_id_t))",
          "new_text": "ngx_queue_head(&qc->free_server_ids)",
          "old_line_content": "        ngx_memzero(sid, sizeof(ngx_quic_server_id_t));",
          "new_line_content": "        q = ngx_queue_head(&qc->free_server_ids);",
          "content_same": false
        },
        {
          "line": 4710,
          "old_api": "ngx_min",
          "new_api": "ngx_quic_get_connection",
          "old_text": "ngx_min(qc->ctp.max_udp_payload_size,\n                      NGX_QUIC_MAX_UDP_PAYLOAD_SIZE)",
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "        len = ngx_min(qc->ctp.max_udp_payload_size,",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 4782,
          "old_api": "ngx_queue_next",
          "new_api": "ngx_quic_get_connection",
          "old_text": "ngx_queue_next(q)",
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "         q = ngx_queue_next(q))",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 4787,
          "old_api": "ngx_quic_get_send_ctx",
          "new_api": "ngx_queue_next",
          "old_text": "ngx_quic_get_send_ctx(qc, ssl_encryption_handshake)",
          "new_text": "ngx_queue_next(q)",
          "old_line_content": "            ctx = ngx_quic_get_send_ctx(qc, ssl_encryption_handshake);",
          "new_line_content": "         q = ngx_queue_next(q))",
          "content_same": false
        },
        {
          "line": 4789,
          "old_api": "ngx_queue_empty",
          "new_api": "ngx_queue_data",
          "old_text": "ngx_queue_empty(&ctx->frames)",
          "new_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "old_line_content": "            if (ngx_queue_empty(&ctx->frames)) {",
          "new_line_content": "        f = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "content_same": false
        },
        {
          "line": 5001,
          "old_api": "ngx_queue_remove",
          "new_api": "ngx_queue_data",
          "old_text": "ngx_queue_remove(q)",
          "new_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "old_line_content": "                ngx_queue_remove(q);",
          "new_line_content": "            f = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "content_same": false
        },
        {
          "line": 5006,
          "old_api": "ngx_del_timer",
          "new_api": "ngx_queue_remove",
          "old_text": "ngx_del_timer(&qc->pto)",
          "new_text": "ngx_queue_remove(q)",
          "old_line_content": "                ngx_del_timer(&qc->pto);",
          "new_line_content": "                ngx_queue_remove(q);",
          "content_same": false
        },
        {
          "line": 5014,
          "old_api": "ngx_log_debug1",
          "new_api": "ngx_quic_pto",
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic congestion send if:%uz\", cg->in_flight)",
          "new_text": "ngx_quic_pto(c, ctx)",
          "old_line_content": "        ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "            ngx_add_timer(&qc->pto, ngx_quic_pto(c, ctx));",
          "content_same": false
        },
        {
          "line": 5019,
          "old_api": "ngx_queue_head",
          "new_api": "ngx_log_debug1",
          "old_text": "ngx_queue_head(&ctx->frames)",
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic congestion send if:%uz\", cg->in_flight)",
          "old_line_content": "        q = ngx_queue_head(&ctx->frames);",
          "new_line_content": "        ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 5093,
          "old_api": "ngx_queue_insert_after",
          "new_api": "ngx_quic_split_bufs",
          "old_text": "ngx_queue_insert_after(&f->queue, &nf->queue)",
          "new_text": "ngx_quic_split_bufs(c, f->data, of->length)",
          "old_line_content": "    ngx_queue_insert_after(&f->queue, &nf->queue);",
          "new_line_content": "    nf->data = ngx_quic_split_bufs(c, f->data, of->length);",
          "content_same": false
        },
        {
          "line": 5202,
          "old_api": "ngx_queue_data",
          "new_api": "ngx_queue_empty",
          "old_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "new_text": "ngx_queue_empty(&ctx->sent)",
          "old_line_content": "        start = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "new_line_content": "        if (ngx_queue_empty(&ctx->sent)) {",
          "content_same": false
        },
        {
          "line": 5231,
          "old_api": "ngx_quic_close_connection",
          "new_api": "ngx_log_debug0",
          "old_text": "ngx_quic_close_connection(c, NGX_ERROR)",
          "new_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, ev->log, 0, \"quic push timer\")",
          "old_line_content": "        ngx_quic_close_connection(c, NGX_ERROR);",
          "new_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_EVENT, ev->log, 0, \"quic push timer\");",
          "content_same": false
        },
        {
          "line": 5235,
          "old_api": "ngx_quic_connstate_dbg",
          "new_api": "ngx_quic_output",
          "old_text": "ngx_quic_connstate_dbg(c)",
          "new_text": "ngx_quic_output(c)",
          "old_line_content": "    ngx_quic_connstate_dbg(c);",
          "new_line_content": "    if (ngx_quic_output(c) != NGX_OK) {",
          "content_same": false
        },
        {
          "line": 5249,
          "old_api": "ngx_quic_close_connection",
          "new_api": "ngx_log_debug0",
          "old_text": "ngx_quic_close_connection(c, NGX_ERROR)",
          "new_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, ev->log, 0, \"quic lost timer\")",
          "old_line_content": "        ngx_quic_close_connection(c, NGX_ERROR);",
          "new_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_EVENT, ev->log, 0, \"quic lost timer\");",
          "content_same": false
        },
        {
          "line": 5271,
          "old_api": "ngx_max",
          "new_api": "ngx_quic_get_connection",
          "old_text": "ngx_max(qc->latest_rtt, qc->avg_rtt)",
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    thr = NGX_QUIC_TIME_THR * ngx_max(qc->latest_rtt, qc->avg_rtt);",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 5348,
          "old_api": "ngx_quic_congestion_lost",
          "new_api": "ngx_queue_data",
          "old_text": "ngx_quic_congestion_lost(c, start)",
          "new_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "old_line_content": "    ngx_quic_congestion_lost(c, start);",
          "new_line_content": "    start = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "content_same": false
        },
        {
          "line": 5377,
          "old_api": "ngx_quic_queue_frame",
          "new_api": "ngx_quic_free_frame",
          "old_text": "ngx_quic_queue_frame(qc, f)",
          "new_text": "ngx_quic_free_frame(c, f)",
          "old_line_content": "            ngx_quic_queue_frame(qc, f);",
          "new_line_content": "            ngx_quic_free_frame(c, f);",
          "content_same": false
        },
        {
          "line": 5638,
          "old_api": "handler",
          "new_api": "ngx_quic_create_stream",
          "old_text": "sn->c->listening->handler(sn->c)",
          "new_text": "ngx_quic_create_stream(c, min_id, n)",
          "old_line_content": "        sn->c->listening->handler(sn->c);",
          "new_line_content": "        sn = ngx_quic_create_stream(c, min_id, n);",
          "content_same": false
        },
        {
          "line": 5659,
          "old_api": "ngx_create_pool",
          "new_api": "ngx_log_debug1",
          "old_text": "ngx_create_pool(NGX_DEFAULT_POOL_SIZE, c->log)",
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic stream id:0x%xL create\", id)",
          "old_line_content": "    pool = ngx_create_pool(NGX_DEFAULT_POOL_SIZE, c->log);",
          "new_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 5664,
          "old_api": "ngx_pcalloc",
          "new_api": "ngx_create_pool",
          "old_text": "ngx_pcalloc(pool, sizeof(ngx_quic_stream_t))",
          "new_text": "ngx_create_pool(NGX_DEFAULT_POOL_SIZE, c->log)",
          "old_line_content": "    sn = ngx_pcalloc(pool, sizeof(ngx_quic_stream_t));",
          "new_line_content": "    pool = ngx_create_pool(NGX_DEFAULT_POOL_SIZE, c->log);",
          "content_same": false
        },
        {
          "line": 5790,
          "old_api": "ngx_min",
          "new_api": "ngx_log_debug1",
          "old_text": "ngx_min(b->last - b->pos, (ssize_t) size)",
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic stream id:0x%xL recv() not ready\", qs->id)",
          "old_line_content": "    len = ngx_min(b->last - b->pos, (ssize_t) size);",
          "new_line_content": "        ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 5808,
          "old_api": "ngx_quic_alloc_frame",
          "new_api": "ngx_log_debug3",
          "old_text": "ngx_quic_alloc_frame(pc)",
          "new_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic stream id:0x%xL recv len:%z of size:%uz\",\n                   qs->id, len, size)",
          "old_line_content": "        frame = ngx_quic_alloc_frame(pc);",
          "new_line_content": "    ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 5824,
          "old_api": "ngx_quic_alloc_frame",
          "new_api": "ngx_quic_queue_frame",
          "old_text": "ngx_quic_alloc_frame(pc)",
          "new_text": "ngx_quic_queue_frame(qc, frame)",
          "old_line_content": "        frame = ngx_quic_alloc_frame(pc);",
          "new_line_content": "        ngx_quic_queue_frame(qc, frame);",
          "content_same": false
        },
        {
          "line": 5907,
          "old_api": "ngx_quic_copy_chain",
          "new_api": "ngx_quic_alloc_frame",
          "old_text": "ngx_quic_copy_chain(pc, in, n)",
          "new_text": "ngx_quic_alloc_frame(pc)",
          "old_line_content": "    frame->data = ngx_quic_copy_chain(pc, in, n);",
          "new_line_content": "    frame = ngx_quic_alloc_frame(pc);",
          "content_same": false
        },
        {
          "line": 6018,
          "old_api": "ngx_rbtree_delete",
          "new_api": "ngx_quic_get_connection",
          "old_text": "ngx_rbtree_delete(&qc->streams.tree, &qs->node)",
          "new_text": "ngx_quic_get_connection(pc)",
          "old_line_content": "    ngx_rbtree_delete(&qc->streams.tree, &qs->node);",
          "new_line_content": "    qc = ngx_quic_get_connection(pc);",
          "content_same": false
        },
        {
          "line": 6023,
          "old_api": "ngx_post_event",
          "new_api": "ngx_rbtree_delete",
          "old_text": "ngx_post_event(pc->read, &ngx_posted_events)",
          "new_text": "ngx_rbtree_delete(&qc->streams.tree, &qs->node)",
          "old_line_content": "        ngx_post_event(pc->read, &ngx_posted_events);",
          "new_line_content": "    ngx_rbtree_delete(&qc->streams.tree, &qs->node);",
          "content_same": false
        },
        {
          "line": 6046,
          "old_api": "ngx_quic_alloc_frame",
          "new_api": "ngx_quic_queue_frame",
          "old_text": "ngx_quic_alloc_frame(pc)",
          "new_text": "ngx_quic_queue_frame(qc, frame)",
          "old_line_content": "        frame = ngx_quic_alloc_frame(pc);",
          "new_line_content": "            ngx_quic_queue_frame(qc, frame);",
          "content_same": false
        },
        {
          "line": 6108,
          "old_api": "ngx_queue_data",
          "new_api": "ngx_quic_get_connection",
          "old_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "        frame = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 6110,
          "old_api": "ngx_queue_remove",
          "new_api": "ngx_queue_empty",
          "old_text": "ngx_queue_remove(&frame->queue)",
          "new_text": "ngx_queue_empty(&qc->free_frames)",
          "old_line_content": "        ngx_queue_remove(&frame->queue);",
          "new_line_content": "    if (!ngx_queue_empty(&qc->free_frames)) {",
          "content_same": false
        },
        {
          "line": 6113,
          "old_api": "ngx_log_debug1",
          "new_api": "ngx_queue_data",
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic reuse frame n:%ui\", qc->nframes)",
          "new_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "old_line_content": "        ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "        frame = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "content_same": false
        },
        {
          "line": 6118,
          "old_api": "ngx_pcalloc",
          "new_api": "ngx_log_debug1",
          "old_text": "ngx_pcalloc(c->pool, sizeof(ngx_quic_frame_t))",
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic reuse frame n:%ui\", qc->nframes)",
          "old_line_content": "        frame = ngx_pcalloc(c->pool, sizeof(ngx_quic_frame_t));",
          "new_line_content": "        ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 6131,
          "old_api": "ngx_memzero",
          "new_api": "ngx_log_debug1",
          "old_text": "ngx_memzero(frame, sizeof(ngx_quic_frame_t))",
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic alloc frame n:%ui\", qc->nframes)",
          "old_line_content": "    ngx_memzero(frame, sizeof(ngx_quic_frame_t));",
          "new_line_content": "        ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 6294,
          "old_api": "ngx_create_temp_buf",
          "new_api": "ngx_alloc_chain_link",
          "old_text": "ngx_create_temp_buf(c->pool, NGX_QUIC_BUFFER_SIZE)",
          "new_text": "ngx_alloc_chain_link(c->pool)",
          "old_line_content": "    b = ngx_create_temp_buf(c->pool, NGX_QUIC_BUFFER_SIZE);",
          "new_line_content": "    cl = ngx_alloc_chain_link(c->pool);",
          "content_same": false
        },
        {
          "line": 6412,
          "old_api": "ngx_quic_alloc_buf",
          "new_api": "ngx_buf_size",
          "old_text": "ngx_quic_alloc_buf(c)",
          "new_text": "ngx_buf_size(in->buf)",
          "old_line_content": "        cl = ngx_quic_alloc_buf(c);",
          "new_line_content": "        if (!ngx_buf_in_memory(in->buf) || ngx_buf_size(in->buf) == 0) {",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 4097,
          "old_api": null,
          "new_api": "ngx_quic_find_stream",
          "old_text": null,
          "new_text": "ngx_quic_find_stream(&qc->streams.tree, f->id)",
          "old_line_content": "        if (sn == NULL) {",
          "new_line_content": "    sn = ngx_quic_find_stream(&qc->streams.tree, f->id);",
          "content_same": false
        },
        {
          "line": 4100,
          "old_api": null,
          "new_api": "ngx_quic_create_client_stream",
          "old_text": null,
          "new_text": "ngx_quic_create_client_stream(c, f->id)",
          "old_line_content": "",
          "new_line_content": "        sn = ngx_quic_create_client_stream(c, f->id);",
          "content_same": false
        },
        {
          "line": 6153,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    timer = f->last - cg->recovery_start;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 6161,
          "old_api": null,
          "new_api": "ngx_log_debug3",
          "old_text": null,
          "new_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic congestion ack recovery win:%uz ss:%z if:%uz\",\n                       cg->window, cg->ssthresh, cg->in_flight)",
          "old_line_content": "    }",
          "new_line_content": "        ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 4114,
          "old_api": null,
          "new_api": "handler",
          "old_text": null,
          "new_text": "sn->c->listening->handler(sn->c)",
          "old_line_content": "    if (f->limit <= sn->send_max_data) {",
          "new_line_content": "        sn->c->listening->handler(sn->c);",
          "content_same": false
        },
        {
          "line": 6171,
          "old_api": null,
          "new_api": "ngx_log_debug3",
          "old_text": null,
          "new_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic congestion slow start win:%uz ss:%z if:%uz\",\n                       cg->window, cg->ssthresh, cg->in_flight)",
          "old_line_content": "        cg->window += qc->tp.max_udp_payload_size * f->plen / cg->window;",
          "new_line_content": "        ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 4130,
          "old_api": null,
          "new_api": "ngx_post_event",
          "old_text": null,
          "new_text": "ngx_post_event(wev, &ngx_posted_events)",
          "old_line_content": "",
          "new_line_content": "            ngx_post_event(wev, &ngx_posted_events);",
          "content_same": false
        },
        {
          "line": 6178,
          "old_api": null,
          "new_api": "ngx_log_debug3",
          "old_text": null,
          "new_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic congestion avoidance win:%uz ss:%z if:%uz\",\n                       cg->window, cg->ssthresh, cg->in_flight)",
          "old_line_content": "    /* prevent recovery_start from wrapping */",
          "new_line_content": "        ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 4149,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "        qc->error = NGX_QUIC_ERR_STREAM_STATE_ERROR;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 6204,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 4158,
          "old_api": null,
          "new_api": "ngx_quic_find_stream",
          "old_text": null,
          "new_text": "ngx_quic_find_stream(&qc->streams.tree, f->id)",
          "old_line_content": "        if (sn == NULL) {",
          "new_line_content": "    sn = ngx_quic_find_stream(&qc->streams.tree, f->id);",
          "content_same": false
        },
        {
          "line": 4161,
          "old_api": null,
          "new_api": "ngx_quic_create_client_stream",
          "old_text": null,
          "new_text": "ngx_quic_create_client_stream(c, f->id)",
          "old_line_content": "",
          "new_line_content": "        sn = ngx_quic_create_client_stream(c, f->id);",
          "content_same": false
        },
        {
          "line": 6213,
          "old_api": null,
          "new_api": "ngx_log_debug3",
          "old_text": null,
          "new_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic congestion lost recovery win:%uz ss:%z if:%uz\",\n                       cg->window, cg->ssthresh, cg->in_flight)",
          "old_line_content": "    }",
          "new_line_content": "        ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 4177,
          "old_api": null,
          "new_api": "handler",
          "old_text": null,
          "new_text": "sc->listening->handler(sc)",
          "old_line_content": "    rev = sn->c->read;",
          "new_line_content": "        sc->listening->handler(sc);",
          "content_same": false
        },
        {
          "line": 6229,
          "old_api": null,
          "new_api": "ngx_log_debug3",
          "old_text": null,
          "new_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic congestion lost win:%uz ss:%z if:%uz\",\n                   cg->window, cg->ssthresh, cg->in_flight)",
          "old_line_content": "",
          "new_line_content": "    ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 4088,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "        qc->error = NGX_QUIC_ERR_STREAM_STATE_ERROR;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 4187,
          "old_api": null,
          "new_api": "handler",
          "old_text": null,
          "new_text": "rev->handler(rev)",
          "old_line_content": "",
          "new_line_content": "        rev->handler(rev);",
          "content_same": false
        },
        {
          "line": 6240,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 6243,
          "old_api": null,
          "new_api": "ngx_quic_free_bufs",
          "old_text": null,
          "new_text": "ngx_quic_free_bufs(c, frame->data)",
          "old_line_content": "#ifdef NGX_QUIC_DEBUG_ALLOC",
          "new_line_content": "        ngx_quic_free_bufs(c, frame->data);",
          "content_same": false
        },
        {
          "line": 6246,
          "old_api": null,
          "new_api": "ngx_queue_insert_head",
          "old_text": null,
          "new_text": "ngx_queue_insert_head(&qc->free_frames, &frame->queue)",
          "old_line_content": "#endif",
          "new_line_content": "    ngx_queue_insert_head(&qc->free_frames, &frame->queue);",
          "content_same": false
        },
        {
          "line": 6249,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic free frame n:%ui\", qc->nframes)",
          "old_line_content": "",
          "new_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 4203,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "        qc->error = NGX_QUIC_ERR_STREAM_STATE_ERROR;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 4212,
          "old_api": null,
          "new_api": "ngx_quic_find_stream",
          "old_text": null,
          "new_text": "ngx_quic_find_stream(&qc->streams.tree, f->id)",
          "old_line_content": "        if (sn == NULL) {",
          "new_line_content": "    sn = ngx_quic_find_stream(&qc->streams.tree, f->id);",
          "content_same": false
        },
        {
          "line": 6261,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "}",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 4215,
          "old_api": null,
          "new_api": "ngx_quic_create_client_stream",
          "old_text": null,
          "new_text": "ngx_quic_create_client_stream(c, f->id)",
          "old_line_content": "",
          "new_line_content": "        sn = ngx_quic_create_client_stream(c, f->id);",
          "content_same": false
        },
        {
          "line": 6276,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 4231,
          "old_api": null,
          "new_api": "handler",
          "old_text": null,
          "new_text": "sc->listening->handler(sc)",
          "old_line_content": "    wev = sn->c->write;",
          "new_line_content": "        sc->listening->handler(sc);",
          "content_same": false
        },
        {
          "line": 6287,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic reuse buffer n:%ui\", qc->nbufs)",
          "old_line_content": "    }",
          "new_line_content": "        ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 4241,
          "old_api": null,
          "new_api": "handler",
          "old_text": null,
          "new_text": "wev->handler(wev)",
          "old_line_content": "",
          "new_line_content": "        wev->handler(wev);",
          "content_same": false
        },
        {
          "line": 6299,
          "old_api": null,
          "new_api": "ngx_create_temp_buf",
          "old_text": null,
          "new_text": "ngx_create_temp_buf(c->pool, NGX_QUIC_BUFFER_SIZE)",
          "old_line_content": "    b->tag = (ngx_buf_tag_t) &ngx_quic_alloc_buf;",
          "new_line_content": "    b = ngx_create_temp_buf(c->pool, NGX_QUIC_BUFFER_SIZE);",
          "content_same": false
        },
        {
          "line": 4254,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 4260,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                           \"quic max_streams_bidi:%uL\", f->limit)",
          "old_line_content": "        if (qc->streams.server_max_streams_uni < f->limit) {",
          "new_line_content": "            ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 6311,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic alloc buffer n:%ui\", qc->nbufs)",
          "old_line_content": "}",
          "new_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 4268,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                           \"quic max_streams_uni:%uL\", f->limit)",
          "old_line_content": "    return NGX_OK;",
          "new_line_content": "            ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 6326,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "                       \"quic free buffer n:%ui\", qc->nbufs);",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 6330,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic free buffer n:%ui\", qc->nbufs)",
          "old_line_content": "        in = in->next;",
          "new_line_content": "        ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 4284,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    }",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 4286,
          "old_api": null,
          "new_api": "ngx_quic_alloc_frame",
          "old_text": null,
          "new_text": "ngx_quic_alloc_frame(c)",
          "old_line_content": "    frame->level = pkt->level;",
          "new_line_content": "    frame = ngx_quic_alloc_frame(c);",
          "content_same": false
        },
        {
          "line": 6341,
          "old_api": null,
          "new_api": "ngx_free_chain",
          "old_text": null,
          "new_text": "ngx_free_chain(c->pool, cl)",
          "old_line_content": "                shadow = b->shadow;",
          "new_line_content": "                ngx_free_chain(c->pool, cl);",
          "content_same": false
        },
        {
          "line": 4295,
          "old_api": null,
          "new_api": "ngx_quic_queue_frame",
          "old_text": null,
          "new_text": "ngx_quic_queue_frame(qc, frame)",
          "old_line_content": "",
          "new_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "content_same": false
        },
        {
          "line": 6354,
          "old_api": null,
          "new_api": "ngx_free_chain",
          "old_text": null,
          "new_text": "ngx_free_chain(c->pool, cl)",
          "old_line_content": "        }",
          "new_line_content": "                ngx_free_chain(c->pool, cl);",
          "content_same": false
        },
        {
          "line": 4309,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "         *  a sequence number smaller than the Retire Prior To field",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 4321,
          "old_api": null,
          "new_api": "ngx_quic_retire_connection_id",
          "old_text": null,
          "new_text": "ngx_quic_retire_connection_id(c, pkt->level, f->seqnum)",
          "old_line_content": "    }",
          "new_line_content": "        if (ngx_quic_retire_connection_id(c, pkt->level, f->seqnum) != NGX_OK) {",
          "content_same": false
        },
        {
          "line": 4330,
          "old_api": null,
          "new_api": "ngx_queue_head",
          "old_text": null,
          "new_text": "ngx_queue_head(&qc->client_ids)",
          "old_line_content": "",
          "new_line_content": "    for (q = ngx_queue_head(&qc->client_ids);",
          "content_same": false
        },
        {
          "line": 4331,
          "old_api": null,
          "new_api": "ngx_queue_sentinel",
          "old_text": null,
          "new_text": "ngx_queue_sentinel(&qc->client_ids)",
          "old_line_content": "        if (item->seqnum == f->seqnum) {",
          "new_line_content": "         q != ngx_queue_sentinel(&qc->client_ids);",
          "content_same": false
        },
        {
          "line": 4332,
          "old_api": null,
          "new_api": "ngx_queue_next",
          "old_text": null,
          "new_text": "ngx_queue_next(q)",
          "old_line_content": "            cid = item;",
          "new_line_content": "         q = ngx_queue_next(q))",
          "content_same": false
        },
        {
          "line": 6378,
          "old_api": null,
          "new_api": "ngx_quic_alloc_buf",
          "old_text": null,
          "new_text": "ngx_quic_alloc_buf(c)",
          "old_line_content": "        b = cl->buf;",
          "new_line_content": "        cl = ngx_quic_alloc_buf(c);",
          "content_same": false
        },
        {
          "line": 4334,
          "old_api": null,
          "new_api": "ngx_queue_data",
          "old_text": null,
          "new_text": "ngx_queue_data(q, ngx_quic_client_id_t, queue)",
          "old_line_content": "        }",
          "new_line_content": "        item = ngx_queue_data(q, ngx_quic_client_id_t, queue);",
          "content_same": false
        },
        {
          "line": 6384,
          "old_api": null,
          "new_api": "ngx_min",
          "old_text": null,
          "new_text": "ngx_min((size_t) (b->end - b->last), len)",
          "old_line_content": "        len -= n;",
          "new_line_content": "        n = ngx_min((size_t) (b->end - b->last), len);",
          "content_same": false
        },
        {
          "line": 6386,
          "old_api": null,
          "new_api": "ngx_cpymem",
          "old_text": null,
          "new_text": "ngx_cpymem(b->last, data, n)",
          "old_line_content": "        *ll = cl;",
          "new_line_content": "        b->last = ngx_cpymem(b->last, data, n);",
          "content_same": false
        },
        {
          "line": 4349,
          "old_api": null,
          "new_api": "ngx_strncmp",
          "old_text": null,
          "new_text": "ngx_strncmp(cid->id, f->cid, f->len)",
          "old_line_content": "             * the endpoint MAY treat that receipt as a connection error",
          "new_line_content": "            || ngx_strncmp(cid->id, f->cid, f->len) != 0",
          "content_same": false
        },
        {
          "line": 4350,
          "old_api": null,
          "new_api": "ngx_strncmp",
          "old_text": null,
          "new_text": "ngx_strncmp(cid->sr_token, f->srt, NGX_QUIC_SR_TOKEN_LEN)",
          "old_line_content": "             * of type PROTOCOL_VIOLATION.",
          "new_line_content": "            || ngx_strncmp(cid->sr_token, f->srt, NGX_QUIC_SR_TOKEN_LEN) != 0)",
          "content_same": false
        },
        {
          "line": 4364,
          "old_api": null,
          "new_api": "ngx_quic_alloc_client_id",
          "old_text": null,
          "new_text": "ngx_quic_alloc_client_id(c, qc)",
          "old_line_content": "        cid->seqnum = f->seqnum;",
          "new_line_content": "        cid = ngx_quic_alloc_client_id(c, qc);",
          "content_same": false
        },
        {
          "line": 6417,
          "old_api": null,
          "new_api": "ngx_quic_alloc_buf",
          "old_text": null,
          "new_text": "ngx_quic_alloc_buf(c)",
          "old_line_content": "        *ll = cl;",
          "new_line_content": "        cl = ngx_quic_alloc_buf(c);",
          "content_same": false
        },
        {
          "line": 4371,
          "old_api": null,
          "new_api": "ngx_memcpy",
          "old_text": null,
          "new_text": "ngx_memcpy(cid->id, f->cid, f->len)",
          "old_line_content": "        qc->nclient_ids++;",
          "new_line_content": "        ngx_memcpy(cid->id, f->cid, f->len);",
          "content_same": false
        },
        {
          "line": 4373,
          "old_api": null,
          "new_api": "ngx_memcpy",
          "old_text": null,
          "new_text": "ngx_memcpy(cid->sr_token, f->srt, NGX_QUIC_SR_TOKEN_LEN)",
          "old_line_content": "        /* always use latest available connection id */",
          "new_line_content": "        ngx_memcpy(cid->sr_token, f->srt, NGX_QUIC_SR_TOKEN_LEN);",
          "content_same": false
        },
        {
          "line": 4375,
          "old_api": null,
          "new_api": "ngx_queue_insert_tail",
          "old_text": null,
          "new_text": "ngx_queue_insert_tail(&qc->client_ids, &cid->queue)",
          "old_line_content": "            qc->scid.len = cid->len;",
          "new_line_content": "        ngx_queue_insert_tail(&qc->client_ids, &cid->queue);",
          "content_same": false
        },
        {
          "line": 6429,
          "old_api": null,
          "new_api": "ngx_min",
          "old_text": null,
          "new_text": "ngx_min(in->buf->last - in->buf->pos, b->end - b->last)",
          "old_line_content": "",
          "new_line_content": "            n = ngx_min(in->buf->last - in->buf->pos, b->end - b->last);",
          "content_same": false
        },
        {
          "line": 6435,
          "old_api": null,
          "new_api": "ngx_cpymem",
          "old_text": null,
          "new_text": "ngx_cpymem(b->last, in->buf->pos, n)",
          "old_line_content": "            }",
          "new_line_content": "            b->last = ngx_cpymem(b->last, in->buf->pos, n);",
          "content_same": false
        },
        {
          "line": 4402,
          "old_api": null,
          "new_api": "ngx_queue_sentinel",
          "old_text": null,
          "new_text": "ngx_queue_sentinel(&qc->client_ids)",
          "old_line_content": "        if (cid->seqnum >= f->retire) {",
          "new_line_content": "    while (q != ngx_queue_sentinel(&qc->client_ids)) {",
          "content_same": false
        },
        {
          "line": 4404,
          "old_api": null,
          "new_api": "ngx_queue_data",
          "old_text": null,
          "new_text": "ngx_queue_data(q, ngx_quic_client_id_t, queue)",
          "old_line_content": "        }",
          "new_line_content": "        cid = ngx_queue_data(q, ngx_quic_client_id_t, queue);",
          "content_same": false
        },
        {
          "line": 4405,
          "old_api": null,
          "new_api": "ngx_queue_next",
          "old_text": null,
          "new_text": "ngx_queue_next(q)",
          "old_line_content": "",
          "new_line_content": "        q = ngx_queue_next(q);",
          "content_same": false
        },
        {
          "line": 4413,
          "old_api": null,
          "new_api": "ngx_quic_retire_connection_id",
          "old_text": null,
          "new_text": "ngx_quic_retire_connection_id(c, pkt->level, cid->seqnum)",
          "old_line_content": "",
          "new_line_content": "        if (ngx_quic_retire_connection_id(c, pkt->level, cid->seqnum)",
          "content_same": false
        },
        {
          "line": 4419,
          "old_api": null,
          "new_api": "ngx_queue_remove",
          "old_text": null,
          "new_text": "ngx_queue_remove(&cid->queue)",
          "old_line_content": "done:",
          "new_line_content": "        ngx_queue_remove(&cid->queue);",
          "content_same": false
        },
        {
          "line": 4420,
          "old_api": null,
          "new_api": "ngx_queue_insert_head",
          "old_text": null,
          "new_text": "ngx_queue_insert_head(&qc->free_client_ids, &cid->queue)",
          "old_line_content": "",
          "new_line_content": "        ngx_queue_insert_head(&qc->free_client_ids, &cid->queue);",
          "content_same": false
        },
        {
          "line": 6469,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "        if (n == len) {",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 6472,
          "old_api": null,
          "new_api": "ngx_buf_size",
          "old_text": null,
          "new_text": "ngx_buf_size(in->buf)",
          "old_line_content": "            return out;",
          "new_line_content": "        n = ngx_buf_size(in->buf);",
          "content_same": false
        },
        {
          "line": 4450,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    }",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 4452,
          "old_api": null,
          "new_api": "ngx_quic_alloc_frame",
          "old_text": null,
          "new_text": "ngx_quic_alloc_frame(c)",
          "old_line_content": "    frame->level = level;",
          "new_line_content": "    frame = ngx_quic_alloc_frame(c);",
          "content_same": false
        },
        {
          "line": 6500,
          "old_api": null,
          "new_api": "ngx_alloc_buf",
          "old_text": null,
          "new_text": "ngx_alloc_buf(c->pool)",
          "old_line_content": "",
          "new_line_content": "            b = ngx_alloc_buf(c->pool);",
          "content_same": false
        },
        {
          "line": 4461,
          "old_api": null,
          "new_api": "ngx_quic_queue_frame",
          "old_text": null,
          "new_text": "ngx_quic_queue_frame(qc, frame)",
          "old_line_content": "",
          "new_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "content_same": false
        },
        {
          "line": 6512,
          "old_api": null,
          "new_api": "ngx_alloc_chain_link",
          "old_text": null,
          "new_text": "ngx_alloc_chain_link(c->pool)",
          "old_line_content": "    if (qc->free_shadow_bufs) {",
          "new_line_content": "    out = ngx_alloc_chain_link(c->pool);",
          "content_same": false
        },
        {
          "line": 6522,
          "old_api": null,
          "new_api": "ngx_alloc_buf",
          "old_text": null,
          "new_text": "ngx_alloc_buf(c->pool)",
          "old_line_content": "    }",
          "new_line_content": "        b = ngx_alloc_buf(c->pool);",
          "content_same": false
        },
        {
          "line": 4475,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    {",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 6524,
          "old_api": null,
          "new_api": "ngx_free_chain",
          "old_text": null,
          "new_text": "ngx_free_chain(c->pool, out)",
          "old_line_content": "    out->buf = b;",
          "new_line_content": "            ngx_free_chain(c->pool, out);",
          "content_same": false
        },
        {
          "line": 4477,
          "old_api": null,
          "new_api": "ngx_queue_head",
          "old_text": null,
          "new_text": "ngx_queue_head(&qc->server_ids)",
          "old_line_content": "",
          "new_line_content": "    for (q = ngx_queue_head(&qc->server_ids);",
          "content_same": false
        },
        {
          "line": 4478,
          "old_api": null,
          "new_api": "ngx_queue_sentinel",
          "old_text": null,
          "new_text": "ngx_queue_sentinel(&qc->server_ids)",
          "old_line_content": "        if (sid->seqnum == f->sequence_number) {",
          "new_line_content": "         q != ngx_queue_sentinel(&qc->server_ids);",
          "content_same": false
        },
        {
          "line": 4484,
          "old_api": null,
          "new_api": "ngx_queue_remove",
          "old_text": null,
          "new_text": "ngx_queue_remove(q)",
          "old_line_content": "        }",
          "new_line_content": "            ngx_queue_remove(q);",
          "content_same": false
        },
        {
          "line": 4485,
          "old_api": null,
          "new_api": "ngx_queue_insert_tail",
          "old_text": null,
          "new_text": "ngx_queue_insert_tail(&qc->free_server_ids, &sid->queue)",
          "old_line_content": "    }",
          "new_line_content": "            ngx_queue_insert_tail(&qc->free_server_ids, &sid->queue);",
          "content_same": false
        },
        {
          "line": 4486,
          "old_api": null,
          "new_api": "ngx_rbtree_delete",
          "old_text": null,
          "new_text": "ngx_rbtree_delete(&c->listening->rbtree, &sid->udp.node)",
          "old_line_content": "",
          "new_line_content": "            ngx_rbtree_delete(&c->listening->rbtree, &sid->udp.node);",
          "content_same": false
        },
        {
          "line": 4492,
          "old_api": null,
          "new_api": "ngx_quic_issue_server_ids",
          "old_text": null,
          "new_text": "ngx_quic_issue_server_ids(c)",
          "old_line_content": "ngx_quic_issue_server_ids(ngx_connection_t *c)",
          "new_line_content": "    return ngx_quic_issue_server_ids(c);",
          "content_same": false
        },
        {
          "line": 4506,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "                   \"quic issue server ids has:%ui max:%ui\", qc->nserver_ids, n);",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 4508,
          "old_api": null,
          "new_api": "ngx_min",
          "old_text": null,
          "new_text": "ngx_min(NGX_QUIC_MAX_SERVER_IDS, qc->ctp.active_connection_id_limit)",
          "old_line_content": "    while (qc->nserver_ids < n) {",
          "new_line_content": "    n = ngx_min(NGX_QUIC_MAX_SERVER_IDS, qc->ctp.active_connection_id_limit);",
          "content_same": false
        },
        {
          "line": 4510,
          "old_api": null,
          "new_api": "ngx_log_debug2",
          "old_text": null,
          "new_text": "ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic issue server ids has:%ui max:%ui\", qc->nserver_ids, n)",
          "old_line_content": "            return NGX_ERROR;",
          "new_line_content": "    ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 4514,
          "old_api": null,
          "new_api": "ngx_quic_create_server_id",
          "old_text": null,
          "new_text": "ngx_quic_create_server_id(c, id)",
          "old_line_content": "        dcid.data = id;",
          "new_line_content": "        if (ngx_quic_create_server_id(c, id) != NGX_OK) {",
          "content_same": false
        },
        {
          "line": 4526,
          "old_api": null,
          "new_api": "ngx_quic_alloc_frame",
          "old_text": null,
          "new_text": "ngx_quic_alloc_frame(c)",
          "old_line_content": "        frame->level = ssl_encryption_application;",
          "new_line_content": "        frame = ngx_quic_alloc_frame(c);",
          "content_same": false
        },
        {
          "line": 4536,
          "old_api": null,
          "new_api": "ngx_memcpy",
          "old_text": null,
          "new_text": "ngx_memcpy(frame->u.ncid.cid, id, NGX_QUIC_SERVER_CID_LEN)",
          "old_line_content": "        {",
          "new_line_content": "        ngx_memcpy(frame->u.ncid.cid, id, NGX_QUIC_SERVER_CID_LEN);",
          "content_same": false
        },
        {
          "line": 4538,
          "old_api": null,
          "new_api": "ngx_quic_new_sr_token",
          "old_text": null,
          "new_text": "ngx_quic_new_sr_token(c, &dcid, &qc->conf->sr_token_key,\n                                  frame->u.ncid.srt)",
          "old_line_content": "        }",
          "new_line_content": "        if (ngx_quic_new_sr_token(c, &dcid, &qc->conf->sr_token_key,",
          "content_same": false
        },
        {
          "line": 4545,
          "old_api": null,
          "new_api": "ngx_quic_queue_frame",
          "old_text": null,
          "new_text": "ngx_quic_queue_frame(qc, frame)",
          "old_line_content": "",
          "new_line_content": "        ngx_quic_queue_frame(qc, frame);",
          "content_same": false
        },
        {
          "line": 4561,
          "old_api": null,
          "new_api": "ngx_log_debug0",
          "old_text": null,
          "new_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic clear temp server ids\")",
          "old_line_content": "         q = next)",
          "new_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 4565,
          "old_api": null,
          "new_api": "ngx_queue_sentinel",
          "old_text": null,
          "new_text": "ngx_queue_sentinel(&qc->server_ids)",
          "old_line_content": "",
          "new_line_content": "         q != ngx_queue_sentinel(&qc->server_ids);",
          "content_same": false
        },
        {
          "line": 4568,
          "old_api": null,
          "new_api": "ngx_queue_next",
          "old_text": null,
          "new_text": "ngx_queue_next(q)",
          "old_line_content": "        }",
          "new_line_content": "        next = ngx_queue_next(q);",
          "content_same": false
        },
        {
          "line": 4569,
          "old_api": null,
          "new_api": "ngx_queue_data",
          "old_text": null,
          "new_text": "ngx_queue_data(q, ngx_quic_server_id_t, queue)",
          "old_line_content": "",
          "new_line_content": "        sid = ngx_queue_data(q, ngx_quic_server_id_t, queue);",
          "content_same": false
        },
        {
          "line": 4575,
          "old_api": null,
          "new_api": "ngx_queue_remove",
          "old_text": null,
          "new_text": "ngx_queue_remove(q)",
          "old_line_content": "}",
          "new_line_content": "        ngx_queue_remove(q);",
          "content_same": false
        },
        {
          "line": 4576,
          "old_api": null,
          "new_api": "ngx_queue_insert_tail",
          "old_text": null,
          "new_text": "ngx_queue_insert_tail(&qc->free_server_ids, &sid->queue)",
          "old_line_content": "",
          "new_line_content": "        ngx_queue_insert_tail(&qc->free_server_ids, &sid->queue);",
          "content_same": false
        },
        {
          "line": 4577,
          "old_api": null,
          "new_api": "ngx_rbtree_delete",
          "old_text": null,
          "new_text": "ngx_rbtree_delete(&c->listening->rbtree, &sid->udp.node)",
          "old_line_content": "",
          "new_line_content": "        ngx_rbtree_delete(&c->listening->rbtree, &sid->udp.node);",
          "content_same": false
        },
        {
          "line": 4590,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    }",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 4592,
          "old_api": null,
          "new_api": "ngx_quic_alloc_server_id",
          "old_text": null,
          "new_text": "ngx_quic_alloc_server_id(c, qc)",
          "old_line_content": "    sid->seqnum = qc->server_seqnum;",
          "new_line_content": "    sid = ngx_quic_alloc_server_id(c, qc);",
          "content_same": false
        },
        {
          "line": 4604,
          "old_api": null,
          "new_api": "ngx_memcpy",
          "old_text": null,
          "new_text": "ngx_memcpy(sid->id, id->data, id->len)",
          "old_line_content": "    dcid.data = sid->id;",
          "new_line_content": "    ngx_memcpy(sid->id, id->data, id->len);",
          "content_same": false
        },
        {
          "line": 4606,
          "old_api": null,
          "new_api": "ngx_queue_insert_tail",
          "old_text": null,
          "new_text": "ngx_queue_insert_tail(&qc->server_ids, &sid->queue)",
          "old_line_content": "",
          "new_line_content": "    ngx_queue_insert_tail(&qc->server_ids, &sid->queue);",
          "content_same": false
        },
        {
          "line": 4612,
          "old_api": null,
          "new_api": "ngx_insert_udp_connection",
          "old_text": null,
          "new_text": "ngx_insert_udp_connection(c, &sid->udp, &dcid)",
          "old_line_content": "",
          "new_line_content": "    ngx_insert_udp_connection(c, &sid->udp, &dcid);",
          "content_same": false
        },
        {
          "line": 4614,
          "old_api": null,
          "new_api": "ngx_log_debug3",
          "old_text": null,
          "new_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic insert server id seqnum:%uL id len:%uz %xV\",\n                   sid->seqnum, id->len, id)",
          "old_line_content": "}",
          "new_line_content": "    ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 4631,
          "old_api": null,
          "new_api": "ngx_queue_data",
          "old_text": null,
          "new_text": "ngx_queue_data(q, ngx_quic_client_id_t, queue)",
          "old_line_content": "",
          "new_line_content": "        cid = ngx_queue_data(q, ngx_quic_client_id_t, queue);",
          "content_same": false
        },
        {
          "line": 4633,
          "old_api": null,
          "new_api": "ngx_queue_remove",
          "old_text": null,
          "new_text": "ngx_queue_remove(&cid->queue)",
          "old_line_content": "",
          "new_line_content": "        ngx_queue_remove(&cid->queue);",
          "content_same": false
        },
        {
          "line": 4635,
          "old_api": null,
          "new_api": "ngx_memzero",
          "old_text": null,
          "new_text": "ngx_memzero(cid, sizeof(ngx_quic_client_id_t))",
          "old_line_content": "        if (cid == NULL) {",
          "new_line_content": "        ngx_memzero(cid, sizeof(ngx_quic_client_id_t));",
          "content_same": false
        },
        {
          "line": 4639,
          "old_api": null,
          "new_api": "ngx_pcalloc",
          "old_text": null,
          "new_text": "ngx_pcalloc(c->pool, sizeof(ngx_quic_client_id_t))",
          "old_line_content": "",
          "new_line_content": "        cid = ngx_pcalloc(c->pool, sizeof(ngx_quic_client_id_t));",
          "content_same": false
        },
        {
          "line": 4658,
          "old_api": null,
          "new_api": "ngx_queue_data",
          "old_text": null,
          "new_text": "ngx_queue_data(q, ngx_quic_server_id_t, queue)",
          "old_line_content": "",
          "new_line_content": "        sid = ngx_queue_data(q, ngx_quic_server_id_t, queue);",
          "content_same": false
        },
        {
          "line": 4660,
          "old_api": null,
          "new_api": "ngx_queue_remove",
          "old_text": null,
          "new_text": "ngx_queue_remove(&sid->queue)",
          "old_line_content": "",
          "new_line_content": "        ngx_queue_remove(&sid->queue);",
          "content_same": false
        },
        {
          "line": 4662,
          "old_api": null,
          "new_api": "ngx_memzero",
          "old_text": null,
          "new_text": "ngx_memzero(sid, sizeof(ngx_quic_server_id_t))",
          "old_line_content": "        if (sid == NULL) {",
          "new_line_content": "        ngx_memzero(sid, sizeof(ngx_quic_server_id_t));",
          "content_same": false
        },
        {
          "line": 4666,
          "old_api": null,
          "new_api": "ngx_pcalloc",
          "old_text": null,
          "new_text": "ngx_pcalloc(c->pool, sizeof(ngx_quic_server_id_t))",
          "old_line_content": "",
          "new_line_content": "        sid = ngx_pcalloc(c->pool, sizeof(ngx_quic_server_id_t));",
          "content_same": false
        },
        {
          "line": 4681,
          "old_api": null,
          "new_api": "ngx_quic_get_send_ctx",
          "old_text": null,
          "new_text": "ngx_quic_get_send_ctx(qc, frame->level)",
          "old_line_content": "    /* always succeeds */",
          "new_line_content": "    ctx = ngx_quic_get_send_ctx(qc, frame->level);",
          "content_same": false
        },
        {
          "line": 4683,
          "old_api": null,
          "new_api": "ngx_queue_insert_tail",
          "old_text": null,
          "new_text": "ngx_queue_insert_tail(&ctx->frames, &frame->queue)",
          "old_line_content": "    if (qc->closing) {",
          "new_line_content": "    ngx_queue_insert_tail(&ctx->frames, &frame->queue);",
          "content_same": false
        },
        {
          "line": 4685,
          "old_api": null,
          "new_api": "ngx_quic_create_frame",
          "old_text": null,
          "new_text": "ngx_quic_create_frame(NULL, frame)",
          "old_line_content": "    }",
          "new_line_content": "    frame->len = ngx_quic_create_frame(NULL, frame);",
          "content_same": false
        },
        {
          "line": 4692,
          "old_api": null,
          "new_api": "ngx_post_event",
          "old_text": null,
          "new_text": "ngx_post_event(&qc->push, &ngx_posted_events)",
          "old_line_content": "ngx_quic_output(ngx_connection_t *c)",
          "new_line_content": "    ngx_post_event(&qc->push, &ngx_posted_events);",
          "content_same": false
        },
        {
          "line": 4715,
          "old_api": null,
          "new_api": "ngx_min",
          "old_text": null,
          "new_text": "ngx_min(qc->ctp.max_udp_payload_size,\n                      NGX_QUIC_MAX_UDP_PAYLOAD_SIZE)",
          "old_line_content": "            max = (c->sent >= max) ? 0 : max - c->sent;",
          "new_line_content": "        len = ngx_min(qc->ctp.max_udp_payload_size,",
          "content_same": false
        },
        {
          "line": 4721,
          "old_api": null,
          "new_api": "ngx_min",
          "old_text": null,
          "new_text": "ngx_min(len, (size_t) max)",
          "old_line_content": "        for (i = 0; i < NGX_QUIC_SEND_CTX_LAST; i++) {",
          "new_line_content": "            len = ngx_min(len, (size_t) max);",
          "content_same": false
        },
        {
          "line": 4724,
          "old_api": null,
          "new_api": "ngx_quic_get_padding_level",
          "old_text": null,
          "new_text": "ngx_quic_get_padding_level(c)",
          "old_line_content": "",
          "new_line_content": "        pad = ngx_quic_get_padding_level(c);",
          "content_same": false
        },
        {
          "line": 4730,
          "old_api": null,
          "new_api": "ngx_quic_generate_ack",
          "old_text": null,
          "new_text": "ngx_quic_generate_ack(c, ctx)",
          "old_line_content": "                  ? NGX_QUIC_MIN_INITIAL_SIZE - (p - dst) : 0;",
          "new_line_content": "            if (ngx_quic_generate_ack(c, ctx) != NGX_OK) {",
          "content_same": false
        },
        {
          "line": 4737,
          "old_api": null,
          "new_api": "ngx_quic_output_packet",
          "old_text": null,
          "new_text": "ngx_quic_output_packet(c, ctx, p, len, min)",
          "old_line_content": "            p += n;",
          "new_line_content": "            n = ngx_quic_output_packet(c, ctx, p, len, min);",
          "content_same": false
        },
        {
          "line": 4751,
          "old_api": null,
          "new_api": "ngx_quic_send",
          "old_text": null,
          "new_text": "ngx_quic_send(c, dst, len)",
          "old_line_content": "        if (!qc->send_timer_set && !qc->closing) {",
          "new_line_content": "        n = ngx_quic_send(c, dst, len);",
          "content_same": false
        },
        {
          "line": 4758,
          "old_api": null,
          "new_api": "ngx_add_timer",
          "old_text": null,
          "new_text": "ngx_add_timer(c->read, qc->tp.max_idle_timeout)",
          "old_line_content": "}",
          "new_line_content": "            ngx_add_timer(c->read, qc->tp.max_idle_timeout);",
          "content_same": false
        },
        {
          "line": 4783,
          "old_api": null,
          "new_api": "ngx_quic_get_send_ctx",
          "old_text": null,
          "new_text": "ngx_quic_get_send_ctx(qc, ssl_encryption_initial)",
          "old_line_content": "    {",
          "new_line_content": "    ctx = ngx_quic_get_send_ctx(qc, ssl_encryption_initial);",
          "content_same": false
        },
        {
          "line": 4785,
          "old_api": null,
          "new_api": "ngx_queue_head",
          "old_text": null,
          "new_text": "ngx_queue_head(&ctx->frames)",
          "old_line_content": "",
          "new_line_content": "    for (q = ngx_queue_head(&ctx->frames);",
          "content_same": false
        },
        {
          "line": 4786,
          "old_api": null,
          "new_api": "ngx_queue_sentinel",
          "old_text": null,
          "new_text": "ngx_queue_sentinel(&ctx->frames)",
          "old_line_content": "        if (f->need_ack) {",
          "new_line_content": "         q != ngx_queue_sentinel(&ctx->frames);",
          "content_same": false
        },
        {
          "line": 4792,
          "old_api": null,
          "new_api": "ngx_quic_get_send_ctx",
          "old_text": null,
          "new_text": "ngx_quic_get_send_ctx(qc, ssl_encryption_handshake)",
          "old_line_content": "",
          "new_line_content": "            ctx = ngx_quic_get_send_ctx(qc, ssl_encryption_handshake);",
          "content_same": false
        },
        {
          "line": 4794,
          "old_api": null,
          "new_api": "ngx_queue_empty",
          "old_text": null,
          "new_text": "ngx_queue_empty(&ctx->frames)",
          "old_line_content": "        }",
          "new_line_content": "            if (ngx_queue_empty(&ctx->frames)) {",
          "content_same": false
        },
        {
          "line": 4819,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "            if (!qc->push.timer_set && !qc->closing) {",
          "new_line_content": "        qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 4825,
          "old_api": null,
          "new_api": "ngx_add_timer",
          "old_text": null,
          "new_text": "ngx_add_timer(&qc->push,\n                              qc->tp.max_ack_delay - delay)",
          "old_line_content": "        }",
          "new_line_content": "                ngx_add_timer(&qc->push,",
          "content_same": false
        },
        {
          "line": 4833,
          "old_api": null,
          "new_api": "ngx_quic_send_ack",
          "old_text": null,
          "new_text": "ngx_quic_send_ack(c, ctx)",
          "old_line_content": "",
          "new_line_content": "    if (ngx_quic_send_ack(c, ctx) != NGX_OK) {",
          "content_same": false
        },
        {
          "line": 4861,
          "old_api": null,
          "new_api": "ngx_queue_empty",
          "old_text": null,
          "new_text": "ngx_queue_empty(&ctx->frames)",
          "old_line_content": "                   \"quic output %s packet max:%uz min:%uz\",",
          "new_line_content": "    if (ngx_queue_empty(&ctx->frames)) {",
          "content_same": false
        },
        {
          "line": 4865,
          "old_api": null,
          "new_api": "ngx_log_debug3",
          "old_text": null,
          "new_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic output %s packet max:%uz min:%uz\",\n                   ngx_quic_level_name(ctx->level), max, min)",
          "old_line_content": "    cg = &qc->congestion;",
          "new_line_content": "    ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 4867,
          "old_api": null,
          "new_api": "ngx_quic_level_name",
          "old_text": null,
          "new_text": "ngx_quic_level_name(ctx->level)",
          "old_line_content": "    hlen = (ctx->level == ssl_encryption_application)",
          "new_line_content": "                   ngx_quic_level_name(ctx->level), max, min);",
          "content_same": false
        },
        {
          "line": 4869,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "           : NGX_QUIC_MAX_LONG_HEADER;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 4879,
          "old_api": null,
          "new_api": "ngx_memzero",
          "old_text": null,
          "new_text": "ngx_memzero(&pkt, sizeof(ngx_quic_header_t))",
          "old_line_content": "    len = 0;",
          "new_line_content": "    ngx_memzero(&pkt, sizeof(ngx_quic_header_t));",
          "content_same": false
        },
        {
          "line": 4886,
          "old_api": null,
          "new_api": "ngx_queue_head",
          "old_text": null,
          "new_text": "ngx_queue_head(&ctx->frames)",
          "old_line_content": "",
          "new_line_content": "    for (q = ngx_queue_head(&ctx->frames);",
          "content_same": false
        },
        {
          "line": 4887,
          "old_api": null,
          "new_api": "ngx_queue_sentinel",
          "old_text": null,
          "new_text": "ngx_queue_sentinel(&ctx->frames)",
          "old_line_content": "        if (!pkt.need_ack && f->need_ack && max > cg->window) {",
          "new_line_content": "         q != ngx_queue_sentinel(&ctx->frames);",
          "content_same": false
        },
        {
          "line": 4888,
          "old_api": null,
          "new_api": "ngx_queue_next",
          "old_text": null,
          "new_text": "ngx_queue_next(q)",
          "old_line_content": "            max = cg->window;",
          "new_line_content": "         q = ngx_queue_next(q))",
          "content_same": false
        },
        {
          "line": 4890,
          "old_api": null,
          "new_api": "ngx_queue_data",
          "old_text": null,
          "new_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "old_line_content": "",
          "new_line_content": "        f = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "content_same": false
        },
        {
          "line": 4901,
          "old_api": null,
          "new_api": "ngx_quic_split_frame",
          "old_text": null,
          "new_text": "ngx_quic_split_frame(c, f, max - hlen - len)",
          "old_line_content": "",
          "new_line_content": "            rc = ngx_quic_split_frame(c, f, max - hlen - len);",
          "content_same": false
        },
        {
          "line": 4916,
          "old_api": null,
          "new_api": "ngx_quic_log_frame",
          "old_text": null,
          "new_text": "ngx_quic_log_frame(c->log, f, 1)",
          "old_line_content": "        }",
          "new_line_content": "        ngx_quic_log_frame(c->log, f, 1);",
          "content_same": false
        },
        {
          "line": 4918,
          "old_api": null,
          "new_api": "ngx_quic_create_frame",
          "old_text": null,
          "new_text": "ngx_quic_create_frame(p, f)",
          "old_line_content": "        len += flen;",
          "new_line_content": "        flen = ngx_quic_create_frame(p, f);",
          "content_same": false
        },
        {
          "line": 4956,
          "old_api": null,
          "new_api": "ngx_quic_set_packet_number",
          "old_text": null,
          "new_text": "ngx_quic_set_packet_number(&pkt, ctx)",
          "old_line_content": "    pkt.dcid = qc->scid;",
          "new_line_content": "    ngx_quic_set_packet_number(&pkt, ctx);",
          "content_same": false
        },
        {
          "line": 4968,
          "old_api": null,
          "new_api": "ngx_quic_create_header",
          "old_text": null,
          "new_text": "ngx_quic_create_header(&pkt, NULL, out.len, NULL)",
          "old_line_content": "    }",
          "new_line_content": "               + ngx_quic_create_header(&pkt, NULL, out.len, NULL);",
          "content_same": false
        },
        {
          "line": 4976,
          "old_api": null,
          "new_api": "ngx_memset",
          "old_text": null,
          "new_text": "ngx_memset(p, NGX_QUIC_FT_PADDING, pad_len - out.len)",
          "old_line_content": "",
          "new_line_content": "        ngx_memset(p, NGX_QUIC_FT_PADDING, pad_len - out.len);",
          "content_same": false
        },
        {
          "line": 4984,
          "old_api": null,
          "new_api": "ngx_log_debug6",
          "old_text": null,
          "new_text": "ngx_log_debug6(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic packet tx %s bytes:%ui\"\n                   \" need_ack:%d number:%L encoded nl:%d trunc:0x%xD\",\n                   ngx_quic_level_name(ctx->level), out.len, pkt.need_ack,\n                   pkt.number, pkt.num_len, pkt.trunc)",
          "old_line_content": "",
          "new_line_content": "    ngx_log_debug6(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 4987,
          "old_api": null,
          "new_api": "ngx_quic_level_name",
          "old_text": null,
          "new_text": "ngx_quic_level_name(ctx->level)",
          "old_line_content": "    }",
          "new_line_content": "                   ngx_quic_level_name(ctx->level), out.len, pkt.need_ack,",
          "content_same": false
        },
        {
          "line": 4990,
          "old_api": null,
          "new_api": "ngx_quic_encrypt",
          "old_text": null,
          "new_text": "ngx_quic_encrypt(&pkt, &res)",
          "old_line_content": "",
          "new_line_content": "    if (ngx_quic_encrypt(&pkt, &res) != NGX_OK) {",
          "content_same": false
        },
        {
          "line": 5005,
          "old_api": null,
          "new_api": "ngx_queue_head",
          "old_text": null,
          "new_text": "ngx_queue_head(&ctx->frames)",
          "old_line_content": "            if (qc->pto.timer_set) {",
          "new_line_content": "                q = ngx_queue_head(&ctx->frames);",
          "content_same": false
        },
        {
          "line": 5007,
          "old_api": null,
          "new_api": "ngx_queue_insert_tail",
          "old_text": null,
          "new_text": "ngx_queue_insert_tail(&ctx->sent, q)",
          "old_line_content": "            }",
          "new_line_content": "                ngx_queue_insert_tail(&ctx->sent, q);",
          "content_same": false
        },
        {
          "line": 5011,
          "old_api": null,
          "new_api": "ngx_del_timer",
          "old_text": null,
          "new_text": "ngx_del_timer(&qc->pto)",
          "old_line_content": "",
          "new_line_content": "                ngx_del_timer(&qc->pto);",
          "content_same": false
        },
        {
          "line": 5024,
          "old_api": null,
          "new_api": "ngx_queue_head",
          "old_text": null,
          "new_text": "ngx_queue_head(&ctx->frames)",
          "old_line_content": "    }",
          "new_line_content": "        q = ngx_queue_head(&ctx->frames);",
          "content_same": false
        },
        {
          "line": 5025,
          "old_api": null,
          "new_api": "ngx_queue_data",
          "old_text": null,
          "new_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "old_line_content": "",
          "new_line_content": "        f = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "content_same": false
        },
        {
          "line": 5027,
          "old_api": null,
          "new_api": "ngx_queue_remove",
          "old_text": null,
          "new_text": "ngx_queue_remove(q)",
          "old_line_content": "}",
          "new_line_content": "        ngx_queue_remove(q);",
          "content_same": false
        },
        {
          "line": 5028,
          "old_api": null,
          "new_api": "ngx_quic_free_frame",
          "old_text": null,
          "new_text": "ngx_quic_free_frame(c, f)",
          "old_line_content": "",
          "new_line_content": "        ngx_quic_free_frame(c, f);",
          "content_same": false
        },
        {
          "line": 5064,
          "old_api": null,
          "new_api": "ngx_log_debug3",
          "old_text": null,
          "new_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic split frame now:%uz need:%uz shrink:%uz\",\n                   f->len, len, shrink)",
          "old_line_content": "",
          "new_line_content": "    ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 5075,
          "old_api": null,
          "new_api": "ngx_quic_create_frame",
          "old_text": null,
          "new_text": "ngx_quic_create_frame(NULL, f)",
          "old_line_content": "    }",
          "new_line_content": "    f->len = ngx_quic_create_frame(NULL, f);",
          "content_same": false
        },
        {
          "line": 5078,
          "old_api": null,
          "new_api": "ngx_log_error",
          "old_text": null,
          "new_text": "ngx_log_error(NGX_LOG_ERR, c->log, 0, \"could not split QUIC frame\")",
          "old_line_content": "    if (nf == NULL) {",
          "new_line_content": "        ngx_log_error(NGX_LOG_ERR, c->log, 0, \"could not split QUIC frame\");",
          "content_same": false
        },
        {
          "line": 5082,
          "old_api": null,
          "new_api": "ngx_quic_alloc_frame",
          "old_text": null,
          "new_text": "ngx_quic_alloc_frame(c)",
          "old_line_content": "    *nf = *f;",
          "new_line_content": "    nf = ngx_quic_alloc_frame(c);",
          "content_same": false
        },
        {
          "line": 5091,
          "old_api": null,
          "new_api": "ngx_quic_create_frame",
          "old_text": null,
          "new_text": "ngx_quic_create_frame(NULL, nf)",
          "old_line_content": "    }",
          "new_line_content": "    nf->len = ngx_quic_create_frame(NULL, nf);",
          "content_same": false
        },
        {
          "line": 5098,
          "old_api": null,
          "new_api": "ngx_queue_insert_after",
          "old_text": null,
          "new_text": "ngx_queue_insert_after(&f->queue, &nf->queue)",
          "old_line_content": "",
          "new_line_content": "    ngx_queue_insert_after(&f->queue, &nf->queue);",
          "content_same": false
        },
        {
          "line": 5111,
          "old_api": null,
          "new_api": "ngx_queue_head",
          "old_text": null,
          "new_text": "ngx_queue_head(frames)",
          "old_line_content": "",
          "new_line_content": "        q = ngx_queue_head(frames);",
          "content_same": false
        },
        {
          "line": 5113,
          "old_api": null,
          "new_api": "ngx_queue_sentinel",
          "old_text": null,
          "new_text": "ngx_queue_sentinel(frames)",
          "old_line_content": "",
          "new_line_content": "        if (q == ngx_queue_sentinel(frames)) {",
          "content_same": false
        },
        {
          "line": 5117,
          "old_api": null,
          "new_api": "ngx_queue_remove",
          "old_text": null,
          "new_text": "ngx_queue_remove(q)",
          "old_line_content": "    } while (1);",
          "new_line_content": "        ngx_queue_remove(q);",
          "content_same": false
        },
        {
          "line": 5119,
          "old_api": null,
          "new_api": "ngx_queue_data",
          "old_text": null,
          "new_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "old_line_content": "",
          "new_line_content": "        f = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "content_same": false
        },
        {
          "line": 5121,
          "old_api": null,
          "new_api": "ngx_quic_free_frame",
          "old_text": null,
          "new_text": "ngx_quic_free_frame(c, f)",
          "old_line_content": "static ssize_t",
          "new_line_content": "        ngx_quic_free_frame(c, f);",
          "content_same": false
        },
        {
          "line": 5132,
          "old_api": null,
          "new_api": "ngx_memzero",
          "old_text": null,
          "new_text": "ngx_memzero(&b, sizeof(ngx_buf_t))",
          "old_line_content": "    b.temporary = 1;",
          "new_line_content": "    ngx_memzero(&b, sizeof(ngx_buf_t));",
          "content_same": false
        },
        {
          "line": 5142,
          "old_api": null,
          "new_api": "send_chain",
          "old_text": null,
          "new_text": "c->send_chain(c, &cl, 0)",
          "old_line_content": "    return len;",
          "new_line_content": "    res = c->send_chain(c, &cl, 0);",
          "content_same": false
        },
        {
          "line": 5191,
          "old_api": null,
          "new_api": "ngx_log_debug0",
          "old_text": null,
          "new_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, ev->log, 0, \"quic pto timer\")",
          "old_line_content": "    qc->pto_count++;",
          "new_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_EVENT, ev->log, 0, \"quic pto timer\");",
          "content_same": false
        },
        {
          "line": 5194,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 5206,
          "old_api": null,
          "new_api": "ngx_queue_head",
          "old_text": null,
          "new_text": "ngx_queue_head(&ctx->sent)",
          "old_line_content": "        {",
          "new_line_content": "        q = ngx_queue_head(&ctx->sent);",
          "content_same": false
        },
        {
          "line": 5207,
          "old_api": null,
          "new_api": "ngx_queue_data",
          "old_text": null,
          "new_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "old_line_content": "            continue;",
          "new_line_content": "        start = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "content_same": false
        },
        {
          "line": 5215,
          "old_api": null,
          "new_api": "ngx_log_debug3",
          "old_text": null,
          "new_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic pto pnum:%uL pto_count:%ui level:%d\",\n                       start->pnum, qc->pto_count, start->level)",
          "old_line_content": "    }",
          "new_line_content": "        ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 5219,
          "old_api": null,
          "new_api": "ngx_quic_resend_frames",
          "old_text": null,
          "new_text": "ngx_quic_resend_frames(c, ctx)",
          "old_line_content": "",
          "new_line_content": "        ngx_quic_resend_frames(c, ctx);",
          "content_same": false
        },
        {
          "line": 5222,
          "old_api": null,
          "new_api": "ngx_quic_connstate_dbg",
          "old_text": null,
          "new_text": "ngx_quic_connstate_dbg(c)",
          "old_line_content": "ngx_quic_push_handler(ngx_event_t *ev)",
          "new_line_content": "    ngx_quic_connstate_dbg(c);",
          "content_same": false
        },
        {
          "line": 5236,
          "old_api": null,
          "new_api": "ngx_quic_close_connection",
          "old_text": null,
          "new_text": "ngx_quic_close_connection(c, NGX_ERROR)",
          "old_line_content": "}",
          "new_line_content": "        ngx_quic_close_connection(c, NGX_ERROR);",
          "content_same": false
        },
        {
          "line": 5240,
          "old_api": null,
          "new_api": "ngx_quic_connstate_dbg",
          "old_text": null,
          "new_text": "ngx_quic_connstate_dbg(c)",
          "old_line_content": "void ngx_quic_lost_handler(ngx_event_t *ev)",
          "new_line_content": "    ngx_quic_connstate_dbg(c);",
          "content_same": false
        },
        {
          "line": 5253,
          "old_api": null,
          "new_api": "ngx_quic_detect_lost",
          "old_text": null,
          "new_text": "ngx_quic_detect_lost(c)",
          "old_line_content": "}",
          "new_line_content": "    if (ngx_quic_detect_lost(c) != NGX_OK) {",
          "content_same": false
        },
        {
          "line": 5254,
          "old_api": null,
          "new_api": "ngx_quic_close_connection",
          "old_text": null,
          "new_text": "ngx_quic_close_connection(c, NGX_ERROR)",
          "old_line_content": "",
          "new_line_content": "        ngx_quic_close_connection(c, NGX_ERROR);",
          "content_same": false
        },
        {
          "line": 5257,
          "old_api": null,
          "new_api": "ngx_quic_connstate_dbg",
          "old_text": null,
          "new_text": "ngx_quic_connstate_dbg(c)",
          "old_line_content": "ngx_quic_detect_lost(ngx_connection_t *c)",
          "new_line_content": "    ngx_quic_connstate_dbg(c);",
          "content_same": false
        },
        {
          "line": 5276,
          "old_api": null,
          "new_api": "ngx_max",
          "old_text": null,
          "new_text": "ngx_max(qc->latest_rtt, qc->avg_rtt)",
          "old_line_content": "        ctx = &qc->send_ctx[i];",
          "new_line_content": "    thr = NGX_QUIC_TIME_THR * ngx_max(qc->latest_rtt, qc->avg_rtt);",
          "content_same": false
        },
        {
          "line": 5277,
          "old_api": null,
          "new_api": "ngx_max",
          "old_text": null,
          "new_text": "ngx_max(thr, NGX_QUIC_TIME_GRANULARITY)",
          "old_line_content": "",
          "new_line_content": "    thr = ngx_max(thr, NGX_QUIC_TIME_GRANULARITY);",
          "content_same": false
        },
        {
          "line": 5287,
          "old_api": null,
          "new_api": "ngx_queue_empty",
          "old_text": null,
          "new_text": "ngx_queue_empty(&ctx->sent)",
          "old_line_content": "            if (start->pnum > ctx->largest_ack) {",
          "new_line_content": "        while (!ngx_queue_empty(&ctx->sent)) {",
          "content_same": false
        },
        {
          "line": 5289,
          "old_api": null,
          "new_api": "ngx_queue_head",
          "old_text": null,
          "new_text": "ngx_queue_head(&ctx->sent)",
          "old_line_content": "            }",
          "new_line_content": "            q = ngx_queue_head(&ctx->sent);",
          "content_same": false
        },
        {
          "line": 5290,
          "old_api": null,
          "new_api": "ngx_queue_data",
          "old_text": null,
          "new_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "old_line_content": "",
          "new_line_content": "            start = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "content_same": false
        },
        {
          "line": 5298,
          "old_api": null,
          "new_api": "ngx_log_debug4",
          "old_text": null,
          "new_text": "ngx_log_debug4(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                           \"quic detect_lost pnum:%uL thr:%M wait:%i level:%d\",\n                           start->pnum, thr, (ngx_int_t) wait, start->level)",
          "old_line_content": "                && ctx->largest_ack - start->pnum < NGX_QUIC_PKT_THR)",
          "new_line_content": "            ngx_log_debug4(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 5313,
          "old_api": null,
          "new_api": "ngx_quic_resend_frames",
          "old_text": null,
          "new_text": "ngx_quic_resend_frames(c, ctx)",
          "old_line_content": "",
          "new_line_content": "            ngx_quic_resend_frames(c, ctx);",
          "content_same": false
        },
        {
          "line": 5327,
          "old_api": null,
          "new_api": "ngx_del_timer",
          "old_text": null,
          "new_text": "ngx_del_timer(&qc->pto)",
          "old_line_content": "    return NGX_OK;",
          "new_line_content": "        ngx_del_timer(&qc->pto);",
          "content_same": false
        },
        {
          "line": 5330,
          "old_api": null,
          "new_api": "ngx_add_timer",
          "old_text": null,
          "new_text": "ngx_add_timer(&qc->pto, min_wait)",
          "old_line_content": "",
          "new_line_content": "    ngx_add_timer(&qc->pto, min_wait);",
          "content_same": false
        },
        {
          "line": 5346,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "                   \"quic resend packet pnum:%uL\", start->pnum);",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 5347,
          "old_api": null,
          "new_api": "ngx_queue_head",
          "old_text": null,
          "new_text": "ngx_queue_head(&ctx->sent)",
          "old_line_content": "",
          "new_line_content": "    q = ngx_queue_head(&ctx->sent);",
          "content_same": false
        },
        {
          "line": 5350,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic resend packet pnum:%uL\", start->pnum)",
          "old_line_content": "    do {",
          "new_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 5353,
          "old_api": null,
          "new_api": "ngx_quic_congestion_lost",
          "old_text": null,
          "new_text": "ngx_quic_congestion_lost(c, start)",
          "old_line_content": "        if (f->pnum != start->pnum) {",
          "new_line_content": "    ngx_quic_congestion_lost(c, start);",
          "content_same": false
        },
        {
          "line": 5356,
          "old_api": null,
          "new_api": "ngx_queue_data",
          "old_text": null,
          "new_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "old_line_content": "",
          "new_line_content": "        f = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "content_same": false
        },
        {
          "line": 5362,
          "old_api": null,
          "new_api": "ngx_queue_next",
          "old_text": null,
          "new_text": "ngx_queue_next(q)",
          "old_line_content": "        case NGX_QUIC_FT_ACK:",
          "new_line_content": "        q = ngx_queue_next(q);",
          "content_same": false
        },
        {
          "line": 5364,
          "old_api": null,
          "new_api": "ngx_queue_remove",
          "old_text": null,
          "new_text": "ngx_queue_remove(&f->queue)",
          "old_line_content": "            /* force generation of most recent acknowledgment */",
          "new_line_content": "        ngx_queue_remove(&f->queue);",
          "content_same": false
        },
        {
          "line": 5371,
          "old_api": null,
          "new_api": "ngx_quic_free_frame",
          "old_text": null,
          "new_text": "ngx_quic_free_frame(c, f)",
          "old_line_content": "        case NGX_QUIC_FT_CONNECTION_CLOSE:",
          "new_line_content": "            ngx_quic_free_frame(c, f);",
          "content_same": false
        },
        {
          "line": 5382,
          "old_api": null,
          "new_api": "ngx_quic_queue_frame",
          "old_text": null,
          "new_text": "ngx_quic_queue_frame(qc, f)",
          "old_line_content": "            f->u.max_streams.limit = f->u.max_streams.bidi",
          "new_line_content": "            ngx_quic_queue_frame(qc, f);",
          "content_same": false
        },
        {
          "line": 5390,
          "old_api": null,
          "new_api": "ngx_quic_queue_frame",
          "old_text": null,
          "new_text": "ngx_quic_queue_frame(qc, f)",
          "old_line_content": "                                      f->u.max_stream_data.id);",
          "new_line_content": "            ngx_quic_queue_frame(qc, f);",
          "content_same": false
        },
        {
          "line": 5394,
          "old_api": null,
          "new_api": "ngx_quic_find_stream",
          "old_text": null,
          "new_text": "ngx_quic_find_stream(&qc->streams.tree,\n                                      f->u.max_stream_data.id)",
          "old_line_content": "            }",
          "new_line_content": "            sn = ngx_quic_find_stream(&qc->streams.tree,",
          "content_same": false
        },
        {
          "line": 5397,
          "old_api": null,
          "new_api": "ngx_quic_free_frame",
          "old_text": null,
          "new_text": "ngx_quic_free_frame(c, f)",
          "old_line_content": "            n = sn->fs.received + (b->pos - b->start) + (b->end - b->last);",
          "new_line_content": "                ngx_quic_free_frame(c, f);",
          "content_same": false
        },
        {
          "line": 5408,
          "old_api": null,
          "new_api": "ngx_quic_queue_frame",
          "old_text": null,
          "new_text": "ngx_quic_queue_frame(qc, f)",
          "old_line_content": "        case NGX_QUIC_FT_STREAM2:",
          "new_line_content": "            ngx_quic_queue_frame(qc, f);",
          "content_same": false
        },
        {
          "line": 5419,
          "old_api": null,
          "new_api": "ngx_quic_find_stream",
          "old_text": null,
          "new_text": "ngx_quic_find_stream(&qc->streams.tree, f->u.stream.stream_id)",
          "old_line_content": "                break;",
          "new_line_content": "            sn = ngx_quic_find_stream(&qc->streams.tree, f->u.stream.stream_id);",
          "content_same": false
        },
        {
          "line": 5423,
          "old_api": null,
          "new_api": "ngx_quic_free_frame",
          "old_text": null,
          "new_text": "ngx_quic_free_frame(c, f)",
          "old_line_content": "",
          "new_line_content": "                ngx_quic_free_frame(c, f);",
          "content_same": false
        },
        {
          "line": 5430,
          "old_api": null,
          "new_api": "ngx_queue_insert_tail",
          "old_text": null,
          "new_text": "ngx_queue_insert_tail(&ctx->frames, &f->queue)",
          "old_line_content": "    if (qc->closing) {",
          "new_line_content": "            ngx_queue_insert_tail(&ctx->frames, &f->queue);",
          "content_same": false
        },
        {
          "line": 5433,
          "old_api": null,
          "new_api": "ngx_queue_sentinel",
          "old_text": null,
          "new_text": "ngx_queue_sentinel(&ctx->sent)",
          "old_line_content": "",
          "new_line_content": "    } while (q != ngx_queue_sentinel(&ctx->sent));",
          "content_same": false
        },
        {
          "line": 5439,
          "old_api": null,
          "new_api": "ngx_post_event",
          "old_text": null,
          "new_text": "ngx_post_event(&qc->push, &ngx_posted_events)",
          "old_line_content": "ngx_quic_open_stream(ngx_connection_t *c, ngx_uint_t bidi)",
          "new_line_content": "    ngx_post_event(&qc->push, &ngx_posted_events);",
          "content_same": false
        },
        {
          "line": 5452,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(qs->parent)",
          "old_line_content": "        {",
          "new_line_content": "    qc = ngx_quic_get_connection(qs->parent);",
          "content_same": false
        },
        {
          "line": 5458,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                           \"quic too many server bidi streams:%uL\",\n                           qc->streams.server_streams_bidi)",
          "old_line_content": "",
          "new_line_content": "            ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 5467,
          "old_api": null,
          "new_api": "ngx_log_debug3",
          "old_text": null,
          "new_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic creating server bidi stream\"\n                       \" streams:%uL max:%uL id:0x%xL\",\n                       qc->streams.server_streams_bidi,\n                       qc->streams.server_max_streams_bidi, id)",
          "old_line_content": "",
          "new_line_content": "        ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 5480,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                           \"quic too many server uni streams:%uL\",\n                           qc->streams.server_streams_uni)",
          "old_line_content": "",
          "new_line_content": "            ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 5490,
          "old_api": null,
          "new_api": "ngx_log_debug3",
          "old_text": null,
          "new_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic creating server uni stream\"\n                       \" streams:%uL max:%uL id:0x%xL\",\n                       qc->streams.server_streams_uni,\n                       qc->streams.server_max_streams_uni, id)",
          "old_line_content": "",
          "new_line_content": "        ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 5500,
          "old_api": null,
          "new_api": "ngx_quic_create_stream",
          "old_text": null,
          "new_text": "ngx_quic_create_stream(qs->parent, id, rcvbuf_size)",
          "old_line_content": "    return sn->c;",
          "new_line_content": "    sn = ngx_quic_create_stream(qs->parent, id, rcvbuf_size);",
          "content_same": false
        },
        {
          "line": 5533,
          "old_api": null,
          "new_api": "ngx_rbt_red",
          "old_text": null,
          "new_text": "ngx_rbt_red(node)",
          "old_line_content": "ngx_quic_find_stream(ngx_rbtree_t *rbtree, uint64_t id)",
          "new_line_content": "    ngx_rbt_red(node);",
          "content_same": false
        },
        {
          "line": 5568,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic stream id:0x%xL is new\", id)",
          "old_line_content": "    if (id & NGX_QUIC_STREAM_UNIDIRECTIONAL) {",
          "new_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 5571,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "            if ((id >> 2) < qc->streams.server_streams_uni) {",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 5643,
          "old_api": null,
          "new_api": "handler",
          "old_text": null,
          "new_text": "sn->c->listening->handler(sn->c)",
          "old_line_content": "",
          "new_line_content": "        sn->c->listening->handler(sn->c);",
          "content_same": false
        },
        {
          "line": 5646,
          "old_api": null,
          "new_api": "ngx_quic_create_stream",
          "old_text": null,
          "new_text": "ngx_quic_create_stream(c, id, n)",
          "old_line_content": "ngx_quic_create_stream(ngx_connection_t *c, uint64_t id, size_t rcvbuf_size)",
          "new_line_content": "    return ngx_quic_create_stream(c, id, n);",
          "content_same": false
        },
        {
          "line": 5662,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    }",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 5669,
          "old_api": null,
          "new_api": "ngx_pcalloc",
          "old_text": null,
          "new_text": "ngx_pcalloc(pool, sizeof(ngx_quic_stream_t))",
          "old_line_content": "",
          "new_line_content": "    sn = ngx_pcalloc(pool, sizeof(ngx_quic_stream_t));",
          "content_same": false
        },
        {
          "line": 5671,
          "old_api": null,
          "new_api": "ngx_destroy_pool",
          "old_text": null,
          "new_text": "ngx_destroy_pool(pool)",
          "old_line_content": "    sn->parent = c;",
          "new_line_content": "        ngx_destroy_pool(pool);",
          "content_same": false
        },
        {
          "line": 5679,
          "old_api": null,
          "new_api": "ngx_create_temp_buf",
          "old_text": null,
          "new_text": "ngx_create_temp_buf(pool, rcvbuf_size)",
          "old_line_content": "",
          "new_line_content": "    sn->b = ngx_create_temp_buf(pool, rcvbuf_size);",
          "content_same": false
        },
        {
          "line": 5681,
          "old_api": null,
          "new_api": "ngx_destroy_pool",
          "old_text": null,
          "new_text": "ngx_destroy_pool(pool)",
          "old_line_content": "",
          "new_line_content": "        ngx_destroy_pool(pool);",
          "content_same": false
        },
        {
          "line": 5685,
          "old_api": null,
          "new_api": "ngx_queue_init",
          "old_text": null,
          "new_text": "ngx_queue_init(&sn->fs.frames)",
          "old_line_content": "        return NULL;",
          "new_line_content": "    ngx_queue_init(&sn->fs.frames);",
          "content_same": false
        },
        {
          "line": 5687,
          "old_api": null,
          "new_api": "ngx_palloc",
          "old_text": null,
          "new_text": "ngx_palloc(pool, sizeof(ngx_log_t))",
          "old_line_content": "",
          "new_line_content": "    log = ngx_palloc(pool, sizeof(ngx_log_t));",
          "content_same": false
        },
        {
          "line": 5689,
          "old_api": null,
          "new_api": "ngx_destroy_pool",
          "old_text": null,
          "new_text": "ngx_destroy_pool(pool)",
          "old_line_content": "    pool->log = log;",
          "new_line_content": "        ngx_destroy_pool(pool);",
          "content_same": false
        },
        {
          "line": 5696,
          "old_api": null,
          "new_api": "ngx_get_connection",
          "old_text": null,
          "new_text": "ngx_get_connection(-1, log)",
          "old_line_content": "",
          "new_line_content": "    sn->c = ngx_get_connection(-1, log);",
          "content_same": false
        },
        {
          "line": 5698,
          "old_api": null,
          "new_api": "ngx_destroy_pool",
          "old_text": null,
          "new_text": "ngx_destroy_pool(pool)",
          "old_line_content": "    sn->c->type = SOCK_STREAM;",
          "new_line_content": "        ngx_destroy_pool(pool);",
          "content_same": false
        },
        {
          "line": 5711,
          "old_api": null,
          "new_api": "ngx_atomic_fetch_add",
          "old_text": null,
          "new_text": "ngx_atomic_fetch_add(ngx_connection_counter, 1)",
          "old_line_content": "",
          "new_line_content": "    sn->c->number = ngx_atomic_fetch_add(ngx_connection_counter, 1);",
          "content_same": false
        },
        {
          "line": 5741,
          "old_api": null,
          "new_api": "ngx_pool_cleanup_add",
          "old_text": null,
          "new_text": "ngx_pool_cleanup_add(pool, 0)",
          "old_line_content": "    }",
          "new_line_content": "    cln = ngx_pool_cleanup_add(pool, 0);",
          "content_same": false
        },
        {
          "line": 5743,
          "old_api": null,
          "new_api": "ngx_close_connection",
          "old_text": null,
          "new_text": "ngx_close_connection(sn->c)",
          "old_line_content": "    cln->handler = ngx_quic_stream_cleanup_handler;",
          "new_line_content": "        ngx_close_connection(sn->c);",
          "content_same": false
        },
        {
          "line": 5744,
          "old_api": null,
          "new_api": "ngx_destroy_pool",
          "old_text": null,
          "new_text": "ngx_destroy_pool(pool)",
          "old_line_content": "    cln->data = sn->c;",
          "new_line_content": "        ngx_destroy_pool(pool);",
          "content_same": false
        },
        {
          "line": 5751,
          "old_api": null,
          "new_api": "ngx_rbtree_insert",
          "old_text": null,
          "new_text": "ngx_rbtree_insert(&qc->streams.tree, &sn->node)",
          "old_line_content": "",
          "new_line_content": "    ngx_rbtree_insert(&qc->streams.tree, &sn->node);",
          "content_same": false
        },
        {
          "line": 3721,
          "old_api": null,
          "new_api": "ngx_quic_get_send_ctx",
          "old_text": null,
          "new_text": "ngx_quic_get_send_ctx(qc, ssl_encryption_handshake)",
          "old_line_content": "    }",
          "new_line_content": "            ctx = ngx_quic_get_send_ctx(qc, ssl_encryption_handshake);",
          "content_same": false
        },
        {
          "line": 3722,
          "old_api": null,
          "new_api": "ngx_queue_empty",
          "old_text": null,
          "new_text": "ngx_queue_empty(&ctx->sent)",
          "old_line_content": "",
          "new_line_content": "            while (!ngx_queue_empty(&ctx->sent)) {",
          "content_same": false
        },
        {
          "line": 3723,
          "old_api": null,
          "new_api": "ngx_quic_resend_frames",
          "old_text": null,
          "new_text": "ngx_quic_resend_frames(c, ctx)",
          "old_line_content": "    return NGX_OK;",
          "new_line_content": "                ngx_quic_resend_frames(c, ctx);",
          "content_same": false
        },
        {
          "line": 5771,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(pc)",
          "old_line_content": "    }",
          "new_line_content": "    qc = ngx_quic_get_connection(pc);",
          "content_same": false
        },
        {
          "line": 5778,
          "old_api": null,
          "new_api": "ngx_log_debug3",
          "old_text": null,
          "new_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic stream recv id:0x%xL eof:%d avail:%z\",\n                   qs->id, rev->pending_eof, b->last - b->pos)",
          "old_line_content": "        rev->ready = 0;",
          "new_line_content": "    ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3741,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "                   \"quic SSL_quic_read_level:%d SSL_quic_write_level:%d\",",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 3745,
          "old_api": null,
          "new_api": "ngx_log_debug2",
          "old_text": null,
          "new_text": "ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic SSL_quic_read_level:%d SSL_quic_write_level:%d\",\n                   (int) SSL_quic_read_level(ssl_conn),\n                   (int) SSL_quic_write_level(ssl_conn))",
          "old_line_content": "    for (cl = frame->data; cl; cl = cl->next) {",
          "new_line_content": "    ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3747,
          "old_api": null,
          "new_api": "SSL_quic_read_level",
          "old_text": null,
          "new_text": "SSL_quic_read_level(ssl_conn)",
          "old_line_content": "",
          "new_line_content": "                   (int) SSL_quic_read_level(ssl_conn),",
          "content_same": false
        },
        {
          "line": 5795,
          "old_api": null,
          "new_api": "ngx_min",
          "old_text": null,
          "new_text": "ngx_min(b->last - b->pos, (ssize_t) size)",
          "old_line_content": "    qc->streams.received += len;",
          "new_line_content": "    len = ngx_min(b->last - b->pos, (ssize_t) size);",
          "content_same": false
        },
        {
          "line": 5797,
          "old_api": null,
          "new_api": "ngx_memcpy",
          "old_text": null,
          "new_text": "ngx_memcpy(buf, b->pos, len)",
          "old_line_content": "    if (b->pos == b->last) {",
          "new_line_content": "    ngx_memcpy(buf, b->pos, len);",
          "content_same": false
        },
        {
          "line": 3753,
          "old_api": null,
          "new_api": "SSL_quic_read_level",
          "old_text": null,
          "new_text": "SSL_quic_read_level(ssl_conn)",
          "old_line_content": "            return NGX_ERROR;",
          "new_line_content": "        if (!SSL_provide_quic_data(ssl_conn, SSL_quic_read_level(ssl_conn),",
          "content_same": false
        },
        {
          "line": 3756,
          "old_api": null,
          "new_api": "ngx_ssl_error",
          "old_text": null,
          "new_text": "ngx_ssl_error(NGX_LOG_INFO, c->log, 0,\n                          \"SSL_provide_quic_data() failed\")",
          "old_line_content": "",
          "new_line_content": "            ngx_ssl_error(NGX_LOG_INFO, c->log, 0,",
          "content_same": false
        },
        {
          "line": 5813,
          "old_api": null,
          "new_api": "ngx_quic_alloc_frame",
          "old_text": null,
          "new_text": "ngx_quic_alloc_frame(pc)",
          "old_line_content": "        frame->level = ssl_encryption_application;",
          "new_line_content": "        frame = ngx_quic_alloc_frame(pc);",
          "content_same": false
        },
        {
          "line": 3766,
          "old_api": null,
          "new_api": "SSL_quic_read_level",
          "old_text": null,
          "new_text": "SSL_quic_read_level(ssl_conn)",
          "old_line_content": "    if (n <= 0) {",
          "new_line_content": "                   (int) SSL_quic_read_level(ssl_conn),",
          "content_same": false
        },
        {
          "line": 3772,
          "old_api": null,
          "new_api": "SSL_get_error",
          "old_text": null,
          "new_text": "SSL_get_error(ssl_conn, n)",
          "old_line_content": "        if (sslerr != SSL_ERROR_WANT_READ) {",
          "new_line_content": "        sslerr = SSL_get_error(ssl_conn, n);",
          "content_same": false
        },
        {
          "line": 3774,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0, \"SSL_get_error: %d\",\n                       sslerr)",
          "old_line_content": "            return NGX_ERROR;",
          "new_line_content": "        ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0, \"SSL_get_error: %d\",",
          "content_same": false
        },
        {
          "line": 3778,
          "old_api": null,
          "new_api": "ngx_ssl_error",
          "old_text": null,
          "new_text": "ngx_ssl_error(NGX_LOG_ERR, c->log, 0, \"SSL_do_handshake() failed\")",
          "old_line_content": "    }",
          "new_line_content": "            ngx_ssl_error(NGX_LOG_ERR, c->log, 0, \"SSL_do_handshake() failed\");",
          "content_same": false
        },
        {
          "line": 5829,
          "old_api": null,
          "new_api": "ngx_quic_alloc_frame",
          "old_text": null,
          "new_text": "ngx_quic_alloc_frame(pc)",
          "old_line_content": "",
          "new_line_content": "        frame = ngx_quic_alloc_frame(pc);",
          "content_same": false
        },
        {
          "line": 3789,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic ssl cipher:%s\", SSL_get_cipher(ssl_conn))",
          "old_line_content": "",
          "new_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3790,
          "old_api": null,
          "new_api": "SSL_get_cipher",
          "old_text": null,
          "new_text": "SSL_get_cipher(ssl_conn)",
          "old_line_content": "    c->ssl->handshaked = 1;",
          "new_line_content": "                   \"quic ssl cipher:%s\", SSL_get_cipher(ssl_conn));",
          "content_same": false
        },
        {
          "line": 5841,
          "old_api": null,
          "new_api": "ngx_quic_queue_frame",
          "old_text": null,
          "new_text": "ngx_quic_queue_frame(qc, frame)",
          "old_line_content": "    }",
          "new_line_content": "        ngx_quic_queue_frame(qc, frame);",
          "content_same": false
        },
        {
          "line": 5843,
          "old_api": null,
          "new_api": "ngx_log_debug2",
          "old_text": null,
          "new_text": "ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic stream id:0x%xL recv: increased max_data:%uL\",\n                       qs->id, qc->streams.recv_max_data)",
          "old_line_content": "    return len;",
          "new_line_content": "        ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3797,
          "old_api": null,
          "new_api": "ngx_quic_alloc_frame",
          "old_text": null,
          "new_text": "ngx_quic_alloc_frame(c)",
          "old_line_content": "    /* 12.4 Frames and frame types, figure 8 */",
          "new_line_content": "    frame = ngx_quic_alloc_frame(c);",
          "content_same": false
        },
        {
          "line": 3805,
          "old_api": null,
          "new_api": "ngx_quic_queue_frame",
          "old_text": null,
          "new_text": "ngx_quic_queue_frame(qc, frame)",
          "old_line_content": "",
          "new_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "content_same": false
        },
        {
          "line": 3807,
          "old_api": null,
          "new_api": "ngx_quic_send_new_token",
          "old_text": null,
          "new_text": "ngx_quic_send_new_token(c)",
          "old_line_content": "     * Generating next keys before a key update is received.",
          "new_line_content": "    if (ngx_quic_send_new_token(c) != NGX_OK) {",
          "content_same": false
        },
        {
          "line": 5858,
          "old_api": null,
          "new_api": "ngx_memzero",
          "old_text": null,
          "new_text": "ngx_memzero(&b, sizeof(ngx_buf_t))",
          "old_line_content": "",
          "new_line_content": "    ngx_memzero(&b, sizeof(ngx_buf_t));",
          "content_same": false
        },
        {
          "line": 3816,
          "old_api": null,
          "new_api": "ngx_quic_keys_update",
          "old_text": null,
          "new_text": "ngx_quic_keys_update(c, qc->keys)",
          "old_line_content": "     * 4.10.2 An endpoint MUST discard its handshake keys",
          "new_line_content": "    if (ngx_quic_keys_update(c, qc->keys) != NGX_OK) {",
          "content_same": false
        },
        {
          "line": 5867,
          "old_api": null,
          "new_api": "ngx_quic_stream_send_chain",
          "old_text": null,
          "new_text": "ngx_quic_stream_send_chain(c, &cl, 0)",
          "old_line_content": "        return NGX_AGAIN;",
          "new_line_content": "    if (ngx_quic_stream_send_chain(c, &cl, 0) == NGX_CHAIN_ERROR) {",
          "content_same": false
        },
        {
          "line": 3824,
          "old_api": null,
          "new_api": "ngx_quic_discard_ctx",
          "old_text": null,
          "new_text": "ngx_quic_discard_ctx(c, ssl_encryption_handshake)",
          "old_line_content": "",
          "new_line_content": "    ngx_quic_discard_ctx(c, ssl_encryption_handshake);",
          "content_same": false
        },
        {
          "line": 3826,
          "old_api": null,
          "new_api": "ngx_quic_issue_server_ids",
          "old_text": null,
          "new_text": "ngx_quic_issue_server_ids(c)",
          "old_line_content": "}",
          "new_line_content": "    if (ngx_quic_issue_server_ids(c) != NGX_OK) {",
          "content_same": false
        },
        {
          "line": 5892,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(pc)",
          "old_line_content": "    }",
          "new_line_content": "    qc = ngx_quic_get_connection(pc);",
          "content_same": false
        },
        {
          "line": 3848,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    {",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 5899,
          "old_api": null,
          "new_api": "ngx_quic_max_stream_flow",
          "old_text": null,
          "new_text": "ngx_quic_max_stream_flow(c)",
          "old_line_content": "",
          "new_line_content": "    flow = ngx_quic_max_stream_flow(c);",
          "content_same": false
        },
        {
          "line": 3861,
          "old_api": null,
          "new_api": "ngx_quic_find_stream",
          "old_text": null,
          "new_text": "ngx_quic_find_stream(&qc->streams.tree, f->stream_id)",
          "old_line_content": "        if (sn == NULL) {",
          "new_line_content": "    sn = ngx_quic_find_stream(&qc->streams.tree, f->stream_id);",
          "content_same": false
        },
        {
          "line": 3864,
          "old_api": null,
          "new_api": "ngx_quic_create_client_stream",
          "old_text": null,
          "new_text": "ngx_quic_create_client_stream(c, f->stream_id)",
          "old_line_content": "",
          "new_line_content": "        sn = ngx_quic_create_client_stream(c, f->stream_id);",
          "content_same": false
        },
        {
          "line": 5912,
          "old_api": null,
          "new_api": "ngx_quic_copy_chain",
          "old_text": null,
          "new_text": "ngx_quic_copy_chain(pc, in, n)",
          "old_line_content": "    for (n = 0, cl = frame->data; cl; cl = cl->next) {",
          "new_line_content": "    frame->data = ngx_quic_copy_chain(pc, in, n);",
          "content_same": false
        },
        {
          "line": 5918,
          "old_api": null,
          "new_api": "ngx_buf_size",
          "old_text": null,
          "new_text": "ngx_buf_size(cl->buf)",
          "old_line_content": "    }",
          "new_line_content": "        n += ngx_buf_size(cl->buf);",
          "content_same": false
        },
        {
          "line": 5921,
          "old_api": null,
          "new_api": "ngx_buf_size",
          "old_text": null,
          "new_text": "ngx_buf_size(in->buf)",
          "old_line_content": "    frame->type = NGX_QUIC_FT_STREAM6; /* OFF=1 LEN=1 FIN=0 */",
          "new_line_content": "    while (in && ngx_buf_size(in->buf) == 0) {",
          "content_same": false
        },
        {
          "line": 3884,
          "old_api": null,
          "new_api": "ngx_quic_handle_ordered_frame",
          "old_text": null,
          "new_text": "ngx_quic_handle_ordered_frame(c, fs, frame, ngx_quic_stream_input,\n                                          sn)",
          "old_line_content": "        }",
          "new_line_content": "        if (ngx_quic_handle_ordered_frame(c, fs, frame, ngx_quic_stream_input,",
          "content_same": false
        },
        {
          "line": 3891,
          "old_api": null,
          "new_api": "handler",
          "old_text": null,
          "new_text": "sc->listening->handler(sc)",
          "old_line_content": "    fs = &sn->fs;",
          "new_line_content": "        sc->listening->handler(sc);",
          "content_same": false
        },
        {
          "line": 5939,
          "old_api": null,
          "new_api": "ngx_quic_queue_frame",
          "old_text": null,
          "new_text": "ngx_quic_queue_frame(qc, frame)",
          "old_line_content": "                   \"quic send_chain sent:%uz\", n);",
          "new_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "content_same": false
        },
        {
          "line": 5943,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic send_chain sent:%uz\", n)",
          "old_line_content": "",
          "new_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3905,
          "old_api": null,
          "new_api": "ngx_quic_handle_ordered_frame",
          "old_text": null,
          "new_text": "ngx_quic_handle_ordered_frame(c, fs, frame, ngx_quic_stream_input,\n                                         sn)",
          "old_line_content": "    pool = sc->pool;",
          "new_line_content": "    return ngx_quic_handle_ordered_frame(c, fs, frame, ngx_quic_stream_input,",
          "content_same": false
        },
        {
          "line": 5959,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(qs->parent)",
          "old_line_content": "",
          "new_line_content": "    qc = ngx_quic_get_connection(qs->parent);",
          "content_same": false
        },
        {
          "line": 3912,
          "old_api": null,
          "new_api": "ngx_close_connection",
          "old_text": null,
          "new_text": "ngx_close_connection(sc)",
          "old_line_content": "",
          "new_line_content": "    ngx_close_connection(sc);",
          "content_same": false
        },
        {
          "line": 3913,
          "old_api": null,
          "new_api": "ngx_destroy_pool",
          "old_text": null,
          "new_text": "ngx_destroy_pool(pool)",
          "old_line_content": "",
          "new_line_content": "    ngx_destroy_pool(pool);",
          "content_same": false
        },
        {
          "line": 5970,
          "old_api": null,
          "new_api": "ngx_log_debug0",
          "old_text": null,
          "new_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic send flow hit buffer size\")",
          "old_line_content": "    if (unacked + size > NGX_QUIC_STREAM_BUFSIZE) {",
          "new_line_content": "        ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3930,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 5980,
          "old_api": null,
          "new_api": "ngx_log_debug0",
          "old_text": null,
          "new_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic send flow hit MAX_DATA\")",
          "old_line_content": "    if (qc->streams.sent + size > qc->streams.send_max_data) {",
          "new_line_content": "        ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3939,
          "old_api": null,
          "new_api": "ngx_log_error",
          "old_text": null,
          "new_text": "ngx_log_error(NGX_LOG_INFO, c->log, 0,\n                      \"quic no space in stream buffer\")",
          "old_line_content": "    if ((size_t) (b->end - b->last) < f->length) {",
          "new_line_content": "        ngx_log_error(NGX_LOG_INFO, c->log, 0,",
          "content_same": false
        },
        {
          "line": 5990,
          "old_api": null,
          "new_api": "ngx_log_debug0",
          "old_text": null,
          "new_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic send flow hit MAX_STREAM_DATA\")",
          "old_line_content": "    if (sent + size > qs->send_max_data) {",
          "new_line_content": "        ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3950,
          "old_api": null,
          "new_api": "ngx_cpymem",
          "old_text": null,
          "new_text": "ngx_cpymem(b->last, cl->buf->pos,\n                             cl->buf->last - cl->buf->pos)",
          "old_line_content": "    rev->ready = 1;",
          "new_line_content": "        b->last = ngx_cpymem(b->last, cl->buf->pos,",
          "content_same": false
        },
        {
          "line": 5999,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic send flow:%uz\", size)",
          "old_line_content": "",
          "new_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3962,
          "old_api": null,
          "new_api": "handler",
          "old_text": null,
          "new_text": "rev->handler(rev)",
          "old_line_content": "        return NGX_DONE;",
          "new_line_content": "        rev->handler(rev);",
          "content_same": false
        },
        {
          "line": 3966,
          "old_api": null,
          "new_api": "ngx_quic_find_stream",
          "old_text": null,
          "new_text": "ngx_quic_find_stream(&qc->streams.tree, id)",
          "old_line_content": "}",
          "new_line_content": "    if (ngx_quic_find_stream(&qc->streams.tree, id) == NULL) {",
          "content_same": false
        },
        {
          "line": 6020,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic stream id:0x%xL cleanup\", qs->id)",
          "old_line_content": "",
          "new_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 6024,
          "old_api": null,
          "new_api": "ngx_quic_free_frames",
          "old_text": null,
          "new_text": "ngx_quic_free_frames(pc, &qs->fs.frames)",
          "old_line_content": "        return;",
          "new_line_content": "    ngx_quic_free_frames(pc, &qs->fs.frames);",
          "content_same": false
        },
        {
          "line": 6028,
          "old_api": null,
          "new_api": "ngx_post_event",
          "old_text": null,
          "new_text": "ngx_post_event(pc->read, &ngx_posted_events)",
          "old_line_content": "        || (qs->id & NGX_QUIC_STREAM_UNIDIRECTIONAL) == 0)",
          "new_line_content": "        ngx_post_event(pc->read, &ngx_posted_events);",
          "content_same": false
        },
        {
          "line": 3984,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    }",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 6036,
          "old_api": null,
          "new_api": "ngx_quic_alloc_frame",
          "old_text": null,
          "new_text": "ngx_quic_alloc_frame(pc)",
          "old_line_content": "            frame->level = ssl_encryption_application;",
          "new_line_content": "            frame = ngx_quic_alloc_frame(pc);",
          "content_same": false
        },
        {
          "line": 3993,
          "old_api": null,
          "new_api": "ngx_rbtree_min",
          "old_text": null,
          "new_text": "ngx_rbtree_min(tree->root, tree->sentinel)",
          "old_line_content": "            wev = qs->c->write;",
          "new_line_content": "        for (node = ngx_rbtree_min(tree->root, tree->sentinel);",
          "content_same": false
        },
        {
          "line": 3995,
          "old_api": null,
          "new_api": "ngx_rbtree_next",
          "old_text": null,
          "new_text": "ngx_rbtree_next(tree, node)",
          "old_line_content": "            if (wev->active) {",
          "new_line_content": "             node = ngx_rbtree_next(tree, node))",
          "content_same": false
        },
        {
          "line": 4002,
          "old_api": null,
          "new_api": "ngx_post_event",
          "old_text": null,
          "new_text": "ngx_post_event(wev, &ngx_posted_events)",
          "old_line_content": "    qc->streams.send_max_data = f->max_data;",
          "new_line_content": "                ngx_post_event(wev, &ngx_posted_events);",
          "content_same": false
        },
        {
          "line": 6051,
          "old_api": null,
          "new_api": "ngx_quic_alloc_frame",
          "old_text": null,
          "new_text": "ngx_quic_alloc_frame(pc)",
          "old_line_content": "        frame->level = ssl_encryption_application;",
          "new_line_content": "        frame = ngx_quic_alloc_frame(pc);",
          "content_same": false
        },
        {
          "line": 6068,
          "old_api": null,
          "new_api": "ngx_quic_queue_frame",
          "old_text": null,
          "new_text": "ngx_quic_queue_frame(qc, frame)",
          "old_line_content": "        }",
          "new_line_content": "        ngx_quic_queue_frame(qc, frame);",
          "content_same": false
        },
        {
          "line": 6076,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic stream id:0x%xL send fin\", qs->id)",
          "old_line_content": "        return;",
          "new_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 4031,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "        qc->error = NGX_QUIC_ERR_STREAM_STATE_ERROR;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 6079,
          "old_api": null,
          "new_api": "ngx_quic_alloc_frame",
          "old_text": null,
          "new_text": "ngx_quic_alloc_frame(pc)",
          "old_line_content": "    frame->level = ssl_encryption_application;",
          "new_line_content": "    frame = ngx_quic_alloc_frame(pc);",
          "content_same": false
        },
        {
          "line": 4040,
          "old_api": null,
          "new_api": "ngx_quic_find_stream",
          "old_text": null,
          "new_text": "ngx_quic_find_stream(&qc->streams.tree, f->id)",
          "old_line_content": "        if (sn == NULL) {",
          "new_line_content": "    sn = ngx_quic_find_stream(&qc->streams.tree, f->id);",
          "content_same": false
        },
        {
          "line": 4043,
          "old_api": null,
          "new_api": "ngx_quic_create_client_stream",
          "old_text": null,
          "new_text": "ngx_quic_create_client_stream(c, f->id)",
          "old_line_content": "",
          "new_line_content": "        sn = ngx_quic_create_client_stream(c, f->id);",
          "content_same": false
        },
        {
          "line": 6095,
          "old_api": null,
          "new_api": "ngx_quic_queue_frame",
          "old_text": null,
          "new_text": "ngx_quic_queue_frame(qc, frame)",
          "old_line_content": "",
          "new_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "content_same": false
        },
        {
          "line": 6097,
          "old_api": null,
          "new_api": "ngx_quic_output",
          "old_text": null,
          "new_text": "ngx_quic_output(pc)",
          "old_line_content": "ngx_quic_alloc_frame(ngx_connection_t *c)",
          "new_line_content": "    (void) ngx_quic_output(pc);",
          "content_same": false
        },
        {
          "line": 4056,
          "old_api": null,
          "new_api": "handler",
          "old_text": null,
          "new_text": "sn->c->listening->handler(sn->c)",
          "old_line_content": "    }",
          "new_line_content": "        sn->c->listening->handler(sn->c);",
          "content_same": false
        },
        {
          "line": 4063,
          "old_api": null,
          "new_api": "ngx_quic_alloc_frame",
          "old_text": null,
          "new_text": "ngx_quic_alloc_frame(c)",
          "old_line_content": "    frame->level = pkt->level;",
          "new_line_content": "    frame = ngx_quic_alloc_frame(c);",
          "content_same": false
        },
        {
          "line": 6112,
          "old_api": null,
          "new_api": "ngx_queue_head",
          "old_text": null,
          "new_text": "ngx_queue_head(&qc->free_frames)",
          "old_line_content": "#ifdef NGX_QUIC_DEBUG_ALLOC",
          "new_line_content": "        q = ngx_queue_head(&qc->free_frames);",
          "content_same": false
        },
        {
          "line": 6115,
          "old_api": null,
          "new_api": "ngx_queue_remove",
          "old_text": null,
          "new_text": "ngx_queue_remove(&frame->queue)",
          "old_line_content": "#endif",
          "new_line_content": "        ngx_queue_remove(&frame->queue);",
          "content_same": false
        },
        {
          "line": 4073,
          "old_api": null,
          "new_api": "ngx_quic_queue_frame",
          "old_text": null,
          "new_text": "ngx_quic_queue_frame(qc, frame)",
          "old_line_content": "",
          "new_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "content_same": false
        },
        {
          "line": 6123,
          "old_api": null,
          "new_api": "ngx_pcalloc",
          "old_text": null,
          "new_text": "ngx_pcalloc(c->pool, sizeof(ngx_quic_frame_t))",
          "old_line_content": "#ifdef NGX_QUIC_DEBUG_ALLOC",
          "new_line_content": "        frame = ngx_pcalloc(c->pool, sizeof(ngx_quic_frame_t));",
          "content_same": false
        },
        {
          "line": 6136,
          "old_api": null,
          "new_api": "ngx_memzero",
          "old_text": null,
          "new_text": "ngx_memzero(frame, sizeof(ngx_quic_frame_t))",
          "old_line_content": "",
          "new_line_content": "    ngx_memzero(frame, sizeof(ngx_quic_frame_t));",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 6148,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6156,
          "old_api": "ngx_log_debug3",
          "new_api": null,
          "old_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic congestion ack recovery win:%uz ss:%z if:%uz\",\n                       cg->window, cg->ssthresh, cg->in_flight)",
          "new_text": null,
          "old_line_content": "        ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    cg->in_flight -= f->plen;",
          "content_same": false
        },
        {
          "line": 4109,
          "old_api": "handler",
          "new_api": null,
          "old_text": "sn->c->listening->handler(sn->c)",
          "new_text": null,
          "old_line_content": "        sn->c->listening->handler(sn->c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6166,
          "old_api": "ngx_log_debug3",
          "new_api": null,
          "old_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic congestion slow start win:%uz ss:%z if:%uz\",\n                       cg->window, cg->ssthresh, cg->in_flight)",
          "new_text": null,
          "old_line_content": "        ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6173,
          "old_api": "ngx_log_debug3",
          "new_api": null,
          "old_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic congestion avoidance win:%uz ss:%z if:%uz\",\n                       cg->window, cg->ssthresh, cg->in_flight)",
          "new_text": null,
          "old_line_content": "        ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "                       cg->window, cg->ssthresh, cg->in_flight);",
          "content_same": false
        },
        {
          "line": 4125,
          "old_api": "ngx_post_event",
          "new_api": null,
          "old_text": "ngx_post_event(wev, &ngx_posted_events)",
          "new_text": null,
          "old_line_content": "            ngx_post_event(wev, &ngx_posted_events);",
          "new_line_content": "    if (sent >= sn->send_max_data) {",
          "content_same": false
        },
        {
          "line": 4144,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    ngx_event_t            *rev;",
          "content_same": false
        },
        {
          "line": 6199,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4153,
          "old_api": "ngx_quic_find_stream",
          "new_api": null,
          "old_text": "ngx_quic_find_stream(&qc->streams.tree, f->id)",
          "new_text": null,
          "old_line_content": "    sn = ngx_quic_find_stream(&qc->streams.tree, f->id);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 4156,
          "old_api": "ngx_quic_create_client_stream",
          "new_api": null,
          "old_text": "ngx_quic_create_client_stream(c, f->id)",
          "new_text": null,
          "old_line_content": "        sn = ngx_quic_create_client_stream(c, f->id);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6208,
          "old_api": "ngx_log_debug3",
          "new_api": null,
          "old_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic congestion lost recovery win:%uz ss:%z if:%uz\",\n                       cg->window, cg->ssthresh, cg->in_flight)",
          "new_text": null,
          "old_line_content": "        ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    f->plen = 0;",
          "content_same": false
        },
        {
          "line": 4172,
          "old_api": "handler",
          "new_api": null,
          "old_text": "sc->listening->handler(sc)",
          "new_text": null,
          "old_line_content": "        sc->listening->handler(sc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6224,
          "old_api": "ngx_log_debug3",
          "new_api": null,
          "old_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic congestion lost win:%uz ss:%z if:%uz\",\n                   cg->window, cg->ssthresh, cg->in_flight)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "        cg->window = qc->tp.max_udp_payload_size * 2;",
          "content_same": false
        },
        {
          "line": 4182,
          "old_api": "handler",
          "new_api": null,
          "old_text": "rev->handler(rev)",
          "new_text": null,
          "old_line_content": "        rev->handler(rev);",
          "new_line_content": "    rev = sn->c->read;",
          "content_same": false
        },
        {
          "line": 6235,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "static void",
          "content_same": false
        },
        {
          "line": 6238,
          "old_api": "ngx_quic_free_bufs",
          "new_api": null,
          "old_text": "ngx_quic_free_bufs(c, frame->data)",
          "new_text": null,
          "old_line_content": "        ngx_quic_free_bufs(c, frame->data);",
          "new_line_content": "    ngx_quic_connection_t  *qc;",
          "content_same": false
        },
        {
          "line": 6241,
          "old_api": "ngx_queue_insert_head",
          "new_api": null,
          "old_text": "ngx_queue_insert_head(&qc->free_frames, &frame->queue)",
          "new_text": null,
          "old_line_content": "    ngx_queue_insert_head(&qc->free_frames, &frame->queue);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6244,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic free frame n:%ui\", qc->nframes)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4198,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    ngx_event_t            *wev;",
          "content_same": false
        },
        {
          "line": 4207,
          "old_api": "ngx_quic_find_stream",
          "new_api": null,
          "old_text": "ngx_quic_find_stream(&qc->streams.tree, f->id)",
          "new_text": null,
          "old_line_content": "    sn = ngx_quic_find_stream(&qc->streams.tree, f->id);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 6256,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "ngx_quic_version(ngx_connection_t *c)",
          "content_same": false
        },
        {
          "line": 4210,
          "old_api": "ngx_quic_create_client_stream",
          "new_api": null,
          "old_text": "ngx_quic_create_client_stream(c, f->id)",
          "new_text": null,
          "old_line_content": "        sn = ngx_quic_create_client_stream(c, f->id);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6271,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4226,
          "old_api": "handler",
          "new_api": null,
          "old_text": "sc->listening->handler(sc)",
          "new_text": null,
          "old_line_content": "        sc->listening->handler(sc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6282,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic reuse buffer n:%ui\", qc->nbufs)",
          "new_text": null,
          "old_line_content": "        ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "        b = cl->buf;",
          "content_same": false
        },
        {
          "line": 4236,
          "old_api": "handler",
          "new_api": null,
          "old_text": "wev->handler(wev)",
          "new_text": null,
          "old_line_content": "        wev->handler(wev);",
          "new_line_content": "    wev = sn->c->write;",
          "content_same": false
        },
        {
          "line": 6289,
          "old_api": "ngx_alloc_chain_link",
          "new_api": null,
          "old_text": "ngx_alloc_chain_link(c->pool)",
          "new_text": null,
          "old_line_content": "    cl = ngx_alloc_chain_link(c->pool);",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 4249,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "ngx_quic_handle_max_streams_frame(ngx_connection_t *c,",
          "content_same": false
        },
        {
          "line": 4255,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                           \"quic max_streams_bidi:%uL\", f->limit)",
          "new_text": null,
          "old_line_content": "            ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6306,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic alloc buffer n:%ui\", qc->nbufs)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    cl->buf = b;",
          "content_same": false
        },
        {
          "line": 4263,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                           \"quic max_streams_uni:%uL\", f->limit)",
          "new_text": null,
          "old_line_content": "            ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6321,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 6325,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic free buffer n:%ui\", qc->nbufs)",
          "new_text": null,
          "old_line_content": "        ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4279,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    ngx_quic_header_t *pkt, ngx_quic_path_challenge_frame_t *f)",
          "content_same": false
        },
        {
          "line": 4281,
          "old_api": "ngx_quic_alloc_frame",
          "new_api": null,
          "old_text": "ngx_quic_alloc_frame(c)",
          "new_text": null,
          "old_line_content": "    frame = ngx_quic_alloc_frame(c);",
          "new_line_content": "    ngx_quic_frame_t       *frame;",
          "content_same": false
        },
        {
          "line": 6336,
          "old_api": "ngx_free_chain",
          "new_api": null,
          "old_text": "ngx_free_chain(c->pool, cl)",
          "new_text": null,
          "old_line_content": "                ngx_free_chain(c->pool, cl);",
          "new_line_content": "        b = cl->buf;",
          "content_same": false
        },
        {
          "line": 4290,
          "old_api": "ngx_quic_queue_frame",
          "new_api": null,
          "old_text": "ngx_quic_queue_frame(qc, frame)",
          "new_text": null,
          "old_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6349,
          "old_api": "ngx_free_chain",
          "new_api": null,
          "old_text": "ngx_free_chain(c->pool, cl)",
          "new_text": null,
          "old_line_content": "                ngx_free_chain(c->pool, cl);",
          "new_line_content": "                b = shadow;",
          "content_same": false
        },
        {
          "line": 4304,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4316,
          "old_api": "ngx_quic_retire_connection_id",
          "new_api": null,
          "old_text": "ngx_quic_retire_connection_id(c, pkt->level, f->seqnum)",
          "new_text": null,
          "old_line_content": "        if (ngx_quic_retire_connection_id(c, pkt->level, f->seqnum) != NGX_OK) {",
          "new_line_content": "         *  a corresponding RETIRE_CONNECTION_ID frame that retires",
          "content_same": false
        },
        {
          "line": 4325,
          "old_api": "ngx_queue_head",
          "new_api": null,
          "old_text": "ngx_queue_head(&qc->client_ids)",
          "new_text": null,
          "old_line_content": "    for (q = ngx_queue_head(&qc->client_ids);",
          "new_line_content": "        goto retire;",
          "content_same": false
        },
        {
          "line": 4326,
          "old_api": "ngx_queue_sentinel",
          "new_api": null,
          "old_text": "ngx_queue_sentinel(&qc->client_ids)",
          "new_text": null,
          "old_line_content": "         q != ngx_queue_sentinel(&qc->client_ids);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4327,
          "old_api": "ngx_queue_next",
          "new_api": null,
          "old_text": "ngx_queue_next(q)",
          "new_text": null,
          "old_line_content": "         q = ngx_queue_next(q))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6373,
          "old_api": "ngx_quic_alloc_buf",
          "new_api": null,
          "old_text": "ngx_quic_alloc_buf(c)",
          "new_text": null,
          "old_line_content": "        cl = ngx_quic_alloc_buf(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4329,
          "old_api": "ngx_queue_data",
          "new_api": null,
          "old_text": "ngx_queue_data(q, ngx_quic_client_id_t, queue)",
          "new_text": null,
          "old_line_content": "        item = ngx_queue_data(q, ngx_quic_client_id_t, queue);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6379,
          "old_api": "ngx_min",
          "new_api": null,
          "old_text": "ngx_min((size_t) (b->end - b->last), len)",
          "new_text": null,
          "old_line_content": "        n = ngx_min((size_t) (b->end - b->last), len);",
          "new_line_content": "        if (cl == NULL) {",
          "content_same": false
        },
        {
          "line": 6381,
          "old_api": "ngx_cpymem",
          "new_api": null,
          "old_text": "ngx_cpymem(b->last, data, n)",
          "new_text": null,
          "old_line_content": "        b->last = ngx_cpymem(b->last, data, n);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4344,
          "old_api": "ngx_strncmp",
          "new_api": null,
          "old_text": "ngx_strncmp(cid->id, f->cid, f->len)",
          "new_text": null,
          "old_line_content": "            || ngx_strncmp(cid->id, f->cid, f->len) != 0",
          "new_line_content": "         * Transmission errors, timeouts and retransmissions might cause the",
          "content_same": false
        },
        {
          "line": 4345,
          "old_api": "ngx_strncmp",
          "new_api": null,
          "old_text": "ngx_strncmp(cid->sr_token, f->srt, NGX_QUIC_SR_TOKEN_LEN)",
          "new_text": null,
          "old_line_content": "            || ngx_strncmp(cid->sr_token, f->srt, NGX_QUIC_SR_TOKEN_LEN) != 0)",
          "new_line_content": "         * same NEW_CONNECTION_ID frame to be received multiple times",
          "content_same": false
        },
        {
          "line": 4359,
          "old_api": "ngx_quic_alloc_client_id",
          "new_api": null,
          "old_text": "ngx_quic_alloc_client_id(c, qc)",
          "new_text": null,
          "old_line_content": "        cid = ngx_quic_alloc_client_id(c, qc);",
          "new_line_content": "            return NGX_ERROR;",
          "content_same": false
        },
        {
          "line": 6407,
          "old_api": "ngx_buf_size",
          "new_api": null,
          "old_text": "ngx_buf_size(in->buf)",
          "new_text": null,
          "old_line_content": "        if (!ngx_buf_in_memory(in->buf) || ngx_buf_size(in->buf) == 0) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4366,
          "old_api": "ngx_memcpy",
          "new_api": null,
          "old_text": "ngx_memcpy(cid->id, f->cid, f->len)",
          "new_text": null,
          "old_line_content": "        ngx_memcpy(cid->id, f->cid, f->len);",
          "new_line_content": "            return NGX_ERROR;",
          "content_same": false
        },
        {
          "line": 4368,
          "old_api": "ngx_memcpy",
          "new_api": null,
          "old_text": "ngx_memcpy(cid->sr_token, f->srt, NGX_QUIC_SR_TOKEN_LEN)",
          "new_text": null,
          "old_line_content": "        ngx_memcpy(cid->sr_token, f->srt, NGX_QUIC_SR_TOKEN_LEN);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4370,
          "old_api": "ngx_queue_insert_tail",
          "new_api": null,
          "old_text": "ngx_queue_insert_tail(&qc->client_ids, &cid->queue)",
          "new_text": null,
          "old_line_content": "        ngx_queue_insert_tail(&qc->client_ids, &cid->queue);",
          "new_line_content": "        cid->len = f->len;",
          "content_same": false
        },
        {
          "line": 6424,
          "old_api": "ngx_min",
          "new_api": null,
          "old_text": "ngx_min(in->buf->last - in->buf->pos, b->end - b->last)",
          "new_text": null,
          "old_line_content": "            n = ngx_min(in->buf->last - in->buf->pos, b->end - b->last);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6430,
          "old_api": "ngx_cpymem",
          "new_api": null,
          "old_text": "ngx_cpymem(b->last, in->buf->pos, n)",
          "new_text": null,
          "old_line_content": "            b->last = ngx_cpymem(b->last, in->buf->pos, n);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4395,
          "old_api": "ngx_queue_head",
          "new_api": null,
          "old_text": "ngx_queue_head(&qc->client_ids)",
          "new_text": null,
          "old_line_content": "    q = ngx_queue_head(&qc->client_ids);",
          "new_line_content": "        goto done;",
          "content_same": false
        },
        {
          "line": 4397,
          "old_api": "ngx_queue_sentinel",
          "new_api": null,
          "old_text": "ngx_queue_sentinel(&qc->client_ids)",
          "new_text": null,
          "old_line_content": "    while (q != ngx_queue_sentinel(&qc->client_ids)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4399,
          "old_api": "ngx_queue_data",
          "new_api": null,
          "old_text": "ngx_queue_data(q, ngx_quic_client_id_t, queue)",
          "new_text": null,
          "old_line_content": "        cid = ngx_queue_data(q, ngx_quic_client_id_t, queue);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4408,
          "old_api": "ngx_quic_retire_connection_id",
          "new_api": null,
          "old_text": "ngx_quic_retire_connection_id(c, pkt->level, cid->seqnum)",
          "new_text": null,
          "old_line_content": "        if (ngx_quic_retire_connection_id(c, pkt->level, cid->seqnum)",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 4414,
          "old_api": "ngx_queue_remove",
          "new_api": null,
          "old_text": "ngx_queue_remove(&cid->queue)",
          "new_text": null,
          "old_line_content": "        ngx_queue_remove(&cid->queue);",
          "new_line_content": "            != NGX_OK)",
          "content_same": false
        },
        {
          "line": 4415,
          "old_api": "ngx_queue_insert_head",
          "new_api": null,
          "old_text": "ngx_queue_insert_head(&qc->free_client_ids, &cid->queue)",
          "new_text": null,
          "old_line_content": "        ngx_queue_insert_head(&qc->free_client_ids, &cid->queue);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 6464,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    size_t                  n;",
          "content_same": false
        },
        {
          "line": 6467,
          "old_api": "ngx_buf_size",
          "new_api": null,
          "old_text": "ngx_buf_size(in->buf)",
          "new_text": null,
          "old_line_content": "        n = ngx_buf_size(in->buf);",
          "new_line_content": "    ngx_quic_connection_t  *qc;",
          "content_same": false
        },
        {
          "line": 4445,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    enum ssl_encryption_level_t level, uint64_t seqnum)",
          "content_same": false
        },
        {
          "line": 4447,
          "old_api": "ngx_quic_alloc_frame",
          "new_api": null,
          "old_text": "ngx_quic_alloc_frame(c)",
          "new_text": null,
          "old_line_content": "    frame = ngx_quic_alloc_frame(c);",
          "new_line_content": "    ngx_quic_frame_t       *frame;",
          "content_same": false
        },
        {
          "line": 6495,
          "old_api": "ngx_alloc_buf",
          "new_api": null,
          "old_text": "ngx_alloc_buf(c->pool)",
          "new_text": null,
          "old_line_content": "            b = ngx_alloc_buf(c->pool);",
          "new_line_content": "        if (qc->free_shadow_bufs) {",
          "content_same": false
        },
        {
          "line": 4456,
          "old_api": "ngx_quic_queue_frame",
          "new_api": null,
          "old_text": "ngx_quic_queue_frame(qc, frame)",
          "new_text": null,
          "old_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6507,
          "old_api": "ngx_alloc_chain_link",
          "new_api": null,
          "old_text": "ngx_alloc_chain_link(c->pool)",
          "new_text": null,
          "old_line_content": "    out = ngx_alloc_chain_link(c->pool);",
          "new_line_content": "        b->shadow = in->buf;",
          "content_same": false
        },
        {
          "line": 6517,
          "old_api": "ngx_alloc_buf",
          "new_api": null,
          "old_text": "ngx_alloc_buf(c->pool)",
          "new_text": null,
          "old_line_content": "        b = ngx_alloc_buf(c->pool);",
          "new_line_content": "    if (qc->free_shadow_bufs) {",
          "content_same": false
        },
        {
          "line": 4470,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 6519,
          "old_api": "ngx_free_chain",
          "new_api": null,
          "old_text": "ngx_free_chain(c->pool, out)",
          "new_text": null,
          "old_line_content": "            ngx_free_chain(c->pool, out);",
          "new_line_content": "        qc->free_shadow_bufs = b->shadow;",
          "content_same": false
        },
        {
          "line": 4472,
          "old_api": "ngx_queue_head",
          "new_api": null,
          "old_text": "ngx_queue_head(&qc->server_ids)",
          "new_text": null,
          "old_line_content": "    for (q = ngx_queue_head(&qc->server_ids);",
          "new_line_content": "    ngx_quic_server_id_t   *sid;",
          "content_same": false
        },
        {
          "line": 4473,
          "old_api": "ngx_queue_sentinel",
          "new_api": null,
          "old_text": "ngx_queue_sentinel(&qc->server_ids)",
          "new_text": null,
          "old_line_content": "         q != ngx_queue_sentinel(&qc->server_ids);",
          "new_line_content": "    ngx_quic_connection_t  *qc;",
          "content_same": false
        },
        {
          "line": 4474,
          "old_api": "ngx_queue_next",
          "new_api": null,
          "old_text": "ngx_queue_next(q)",
          "new_text": null,
          "old_line_content": "         q = ngx_queue_next(q))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4476,
          "old_api": "ngx_queue_data",
          "new_api": null,
          "old_text": "ngx_queue_data(q, ngx_quic_server_id_t, queue)",
          "new_text": null,
          "old_line_content": "        sid = ngx_queue_data(q, ngx_quic_server_id_t, queue);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4480,
          "old_api": "ngx_queue_insert_tail",
          "new_api": null,
          "old_text": "ngx_queue_insert_tail(&qc->free_server_ids, &sid->queue)",
          "new_text": null,
          "old_line_content": "            ngx_queue_insert_tail(&qc->free_server_ids, &sid->queue);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 4487,
          "old_api": "ngx_quic_issue_server_ids",
          "new_api": null,
          "old_text": "ngx_quic_issue_server_ids(c)",
          "new_text": null,
          "old_line_content": "    return ngx_quic_issue_server_ids(c);",
          "new_line_content": "            qc->nserver_ids--;",
          "content_same": false
        },
        {
          "line": 4501,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    ngx_quic_frame_t       *frame;",
          "content_same": false
        },
        {
          "line": 4503,
          "old_api": "ngx_min",
          "new_api": null,
          "old_text": "ngx_min(NGX_QUIC_MAX_SERVER_IDS, qc->ctp.active_connection_id_limit)",
          "new_text": null,
          "old_line_content": "    n = ngx_min(NGX_QUIC_MAX_SERVER_IDS, qc->ctp.active_connection_id_limit);",
          "new_line_content": "    ngx_quic_connection_t  *qc;",
          "content_same": false
        },
        {
          "line": 4505,
          "old_api": "ngx_log_debug2",
          "new_api": null,
          "old_text": "ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic issue server ids has:%ui max:%ui\", qc->nserver_ids, n)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4509,
          "old_api": "ngx_quic_create_server_id",
          "new_api": null,
          "old_text": "ngx_quic_create_server_id(c, id)",
          "new_text": null,
          "old_line_content": "        if (ngx_quic_create_server_id(c, id) != NGX_OK) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4516,
          "old_api": "ngx_quic_insert_server_id",
          "new_api": null,
          "old_text": "ngx_quic_insert_server_id(c, &dcid)",
          "new_text": null,
          "old_line_content": "        sid = ngx_quic_insert_server_id(c, &dcid);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4531,
          "old_api": "ngx_memcpy",
          "new_api": null,
          "old_text": "ngx_memcpy(frame->u.ncid.cid, id, NGX_QUIC_SERVER_CID_LEN)",
          "new_text": null,
          "old_line_content": "        ngx_memcpy(frame->u.ncid.cid, id, NGX_QUIC_SERVER_CID_LEN);",
          "new_line_content": "        frame->level = ssl_encryption_application;",
          "content_same": false
        },
        {
          "line": 4533,
          "old_api": "ngx_quic_new_sr_token",
          "new_api": null,
          "old_text": "ngx_quic_new_sr_token(c, &dcid, &qc->conf->sr_token_key,\n                                  frame->u.ncid.srt)",
          "new_text": null,
          "old_line_content": "        if (ngx_quic_new_sr_token(c, &dcid, &qc->conf->sr_token_key,",
          "new_line_content": "        frame->u.ncid.seqnum = sid->seqnum;",
          "content_same": false
        },
        {
          "line": 4540,
          "old_api": "ngx_quic_queue_frame",
          "new_api": null,
          "old_text": "ngx_quic_queue_frame(qc, frame)",
          "new_text": null,
          "old_line_content": "        ngx_quic_queue_frame(qc, frame);",
          "new_line_content": "            != NGX_OK)",
          "content_same": false
        },
        {
          "line": 4554,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4556,
          "old_api": "ngx_log_debug0",
          "new_api": null,
          "old_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic clear temp server ids\")",
          "new_text": null,
          "old_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    ngx_quic_server_id_t   *sid;",
          "content_same": false
        },
        {
          "line": 4560,
          "old_api": "ngx_queue_sentinel",
          "new_api": null,
          "old_text": "ngx_queue_sentinel(&qc->server_ids)",
          "new_text": null,
          "old_line_content": "         q != ngx_queue_sentinel(&qc->server_ids);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4563,
          "old_api": "ngx_queue_next",
          "new_api": null,
          "old_text": "ngx_queue_next(q)",
          "new_text": null,
          "old_line_content": "        next = ngx_queue_next(q);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4570,
          "old_api": "ngx_queue_remove",
          "new_api": null,
          "old_text": "ngx_queue_remove(q)",
          "new_text": null,
          "old_line_content": "        ngx_queue_remove(q);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4571,
          "old_api": "ngx_queue_insert_tail",
          "new_api": null,
          "old_text": "ngx_queue_insert_tail(&qc->free_server_ids, &sid->queue)",
          "new_text": null,
          "old_line_content": "        ngx_queue_insert_tail(&qc->free_server_ids, &sid->queue);",
          "new_line_content": "        if (sid->seqnum != NGX_QUIC_UNSET_PN) {",
          "content_same": false
        },
        {
          "line": 4572,
          "old_api": "ngx_rbtree_delete",
          "new_api": null,
          "old_text": "ngx_rbtree_delete(&c->listening->rbtree, &sid->udp.node)",
          "new_text": null,
          "old_line_content": "        ngx_rbtree_delete(&c->listening->rbtree, &sid->udp.node);",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 4585,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4587,
          "old_api": "ngx_quic_alloc_server_id",
          "new_api": null,
          "old_text": "ngx_quic_alloc_server_id(c, qc)",
          "new_text": null,
          "old_line_content": "    sid = ngx_quic_alloc_server_id(c, qc);",
          "new_line_content": "    ngx_quic_server_id_t   *sid;",
          "content_same": false
        },
        {
          "line": 4599,
          "old_api": "ngx_memcpy",
          "new_api": null,
          "old_text": "ngx_memcpy(sid->id, id->data, id->len)",
          "new_text": null,
          "old_line_content": "    ngx_memcpy(sid->id, id->data, id->len);",
          "new_line_content": "    if (qc->server_seqnum != NGX_QUIC_UNSET_PN) {",
          "content_same": false
        },
        {
          "line": 4601,
          "old_api": "ngx_queue_insert_tail",
          "new_api": null,
          "old_text": "ngx_queue_insert_tail(&qc->server_ids, &sid->queue)",
          "new_text": null,
          "old_line_content": "    ngx_queue_insert_tail(&qc->server_ids, &sid->queue);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4607,
          "old_api": "ngx_insert_udp_connection",
          "new_api": null,
          "old_text": "ngx_insert_udp_connection(c, &sid->udp, &dcid)",
          "new_text": null,
          "old_line_content": "    ngx_insert_udp_connection(c, &sid->udp, &dcid);",
          "new_line_content": "    qc->nserver_ids++;",
          "content_same": false
        },
        {
          "line": 4609,
          "old_api": "ngx_log_debug3",
          "new_api": null,
          "old_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic insert server id seqnum:%uL id len:%uz %xV\",\n                   sid->seqnum, id->len, id)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    dcid.data = sid->id;",
          "content_same": false
        },
        {
          "line": 4623,
          "old_api": "ngx_queue_empty",
          "new_api": null,
          "old_text": "ngx_queue_empty(&qc->free_client_ids)",
          "new_text": null,
          "old_line_content": "    if (!ngx_queue_empty(&qc->free_client_ids)) {",
          "new_line_content": "ngx_quic_alloc_client_id(ngx_connection_t *c, ngx_quic_connection_t *qc)",
          "content_same": false
        },
        {
          "line": 4625,
          "old_api": "ngx_queue_head",
          "new_api": null,
          "old_text": "ngx_queue_head(&qc->free_client_ids)",
          "new_text": null,
          "old_line_content": "        q = ngx_queue_head(&qc->free_client_ids);",
          "new_line_content": "    ngx_queue_t           *q;",
          "content_same": false
        },
        {
          "line": 4626,
          "old_api": "ngx_queue_data",
          "new_api": null,
          "old_text": "ngx_queue_data(q, ngx_quic_client_id_t, queue)",
          "new_text": null,
          "old_line_content": "        cid = ngx_queue_data(q, ngx_quic_client_id_t, queue);",
          "new_line_content": "    ngx_quic_client_id_t  *cid;",
          "content_same": false
        },
        {
          "line": 4634,
          "old_api": "ngx_pcalloc",
          "new_api": null,
          "old_text": "ngx_pcalloc(c->pool, sizeof(ngx_quic_client_id_t))",
          "new_text": null,
          "old_line_content": "        cid = ngx_pcalloc(c->pool, sizeof(ngx_quic_client_id_t));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4650,
          "old_api": "ngx_queue_empty",
          "new_api": null,
          "old_text": "ngx_queue_empty(&qc->free_server_ids)",
          "new_text": null,
          "old_line_content": "    if (!ngx_queue_empty(&qc->free_server_ids)) {",
          "new_line_content": "ngx_quic_alloc_server_id(ngx_connection_t *c, ngx_quic_connection_t *qc)",
          "content_same": false
        },
        {
          "line": 4652,
          "old_api": "ngx_queue_head",
          "new_api": null,
          "old_text": "ngx_queue_head(&qc->free_server_ids)",
          "new_text": null,
          "old_line_content": "        q = ngx_queue_head(&qc->free_server_ids);",
          "new_line_content": "    ngx_queue_t           *q;",
          "content_same": false
        },
        {
          "line": 4653,
          "old_api": "ngx_queue_data",
          "new_api": null,
          "old_text": "ngx_queue_data(q, ngx_quic_server_id_t, queue)",
          "new_text": null,
          "old_line_content": "        sid = ngx_queue_data(q, ngx_quic_server_id_t, queue);",
          "new_line_content": "    ngx_quic_server_id_t  *sid;",
          "content_same": false
        },
        {
          "line": 4661,
          "old_api": "ngx_pcalloc",
          "new_api": null,
          "old_text": "ngx_pcalloc(c->pool, sizeof(ngx_quic_server_id_t))",
          "new_text": null,
          "old_line_content": "        sid = ngx_pcalloc(c->pool, sizeof(ngx_quic_server_id_t));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4676,
          "old_api": "ngx_quic_get_send_ctx",
          "new_api": null,
          "old_text": "ngx_quic_get_send_ctx(qc, frame->level)",
          "new_text": null,
          "old_line_content": "    ctx = ngx_quic_get_send_ctx(qc, frame->level);",
          "new_line_content": "static void",
          "content_same": false
        },
        {
          "line": 4678,
          "old_api": "ngx_queue_insert_tail",
          "new_api": null,
          "old_text": "ngx_queue_insert_tail(&ctx->frames, &frame->queue)",
          "new_text": null,
          "old_line_content": "    ngx_queue_insert_tail(&ctx->frames, &frame->queue);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4680,
          "old_api": "ngx_quic_create_frame",
          "new_api": null,
          "old_text": "ngx_quic_create_frame(NULL, frame)",
          "new_text": null,
          "old_line_content": "    frame->len = ngx_quic_create_frame(NULL, frame);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4687,
          "old_api": "ngx_post_event",
          "new_api": null,
          "old_text": "ngx_post_event(&qc->push, &ngx_posted_events)",
          "new_text": null,
          "old_line_content": "    ngx_post_event(&qc->push, &ngx_posted_events);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4705,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    ngx_quic_connection_t  *qc;",
          "content_same": false
        },
        {
          "line": 4716,
          "old_api": "ngx_min",
          "new_api": null,
          "old_text": "ngx_min(len, (size_t) max)",
          "new_text": null,
          "old_line_content": "            len = ngx_min(len, (size_t) max);",
          "new_line_content": "                      NGX_QUIC_MAX_UDP_PAYLOAD_SIZE);",
          "content_same": false
        },
        {
          "line": 4719,
          "old_api": "ngx_quic_get_padding_level",
          "new_api": null,
          "old_text": "ngx_quic_get_padding_level(c)",
          "new_text": null,
          "old_line_content": "        pad = ngx_quic_get_padding_level(c);",
          "new_line_content": "            max = qc->received * 3;",
          "content_same": false
        },
        {
          "line": 4725,
          "old_api": "ngx_quic_generate_ack",
          "new_api": null,
          "old_text": "ngx_quic_generate_ack(c, ctx)",
          "new_text": null,
          "old_line_content": "            if (ngx_quic_generate_ack(c, ctx) != NGX_OK) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4732,
          "old_api": "ngx_quic_output_packet",
          "new_api": null,
          "old_text": "ngx_quic_output_packet(c, ctx, p, len, min)",
          "new_text": null,
          "old_line_content": "            n = ngx_quic_output_packet(c, ctx, p, len, min);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 4746,
          "old_api": "ngx_quic_send",
          "new_api": null,
          "old_text": "ngx_quic_send(c, dst, len)",
          "new_text": null,
          "old_line_content": "        n = ngx_quic_send(c, dst, len);",
          "new_line_content": "        len = p - dst;",
          "content_same": false
        },
        {
          "line": 4753,
          "old_api": "ngx_add_timer",
          "new_api": null,
          "old_text": "ngx_add_timer(c->read, qc->tp.max_idle_timeout)",
          "new_text": null,
          "old_line_content": "            ngx_add_timer(c->read, qc->tp.max_idle_timeout);",
          "new_line_content": "            return NGX_ERROR;",
          "content_same": false
        },
        {
          "line": 4777,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "     * Similarly, a server MUST expand the payload of all UDP datagrams",
          "content_same": false
        },
        {
          "line": 4778,
          "old_api": "ngx_quic_get_send_ctx",
          "new_api": null,
          "old_text": "ngx_quic_get_send_ctx(qc, ssl_encryption_initial)",
          "new_text": null,
          "old_line_content": "    ctx = ngx_quic_get_send_ctx(qc, ssl_encryption_initial);",
          "new_line_content": "     * carrying ack-eliciting Initial packets to at least the smallest",
          "content_same": false
        },
        {
          "line": 4780,
          "old_api": "ngx_queue_head",
          "new_api": null,
          "old_text": "ngx_queue_head(&ctx->frames)",
          "new_text": null,
          "old_line_content": "    for (q = ngx_queue_head(&ctx->frames);",
          "new_line_content": "     */",
          "content_same": false
        },
        {
          "line": 4781,
          "old_api": "ngx_queue_sentinel",
          "new_api": null,
          "old_text": "ngx_queue_sentinel(&ctx->frames)",
          "new_text": null,
          "old_line_content": "         q != ngx_queue_sentinel(&ctx->frames);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4784,
          "old_api": "ngx_queue_data",
          "new_api": null,
          "old_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "new_text": null,
          "old_line_content": "        f = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4814,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "        qc = ngx_quic_get_connection(c);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4820,
          "old_api": "ngx_add_timer",
          "new_api": null,
          "old_text": "ngx_add_timer(&qc->push,\n                              qc->tp.max_ack_delay - delay)",
          "new_text": null,
          "old_line_content": "                ngx_add_timer(&qc->push,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4828,
          "old_api": "ngx_quic_send_ack",
          "new_api": null,
          "old_text": "ngx_quic_send_ack(c, ctx)",
          "new_text": null,
          "old_line_content": "    if (ngx_quic_send_ack(c, ctx) != NGX_OK) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4856,
          "old_api": "ngx_queue_empty",
          "new_api": null,
          "old_text": "ngx_queue_empty(&ctx->frames)",
          "new_text": null,
          "old_line_content": "    if (ngx_queue_empty(&ctx->frames)) {",
          "new_line_content": "    ngx_quic_header_t       pkt;",
          "content_same": false
        },
        {
          "line": 4860,
          "old_api": "ngx_log_debug3",
          "new_api": null,
          "old_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic output %s packet max:%uz min:%uz\",\n                   ngx_quic_level_name(ctx->level), max, min)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4862,
          "old_api": "ngx_quic_level_name",
          "new_api": null,
          "old_text": "ngx_quic_level_name(ctx->level)",
          "new_text": null,
          "old_line_content": "                   ngx_quic_level_name(ctx->level), max, min);",
          "new_line_content": "        return 0;",
          "content_same": false
        },
        {
          "line": 4864,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4874,
          "old_api": "ngx_memzero",
          "new_api": null,
          "old_text": "ngx_memzero(&pkt, sizeof(ngx_quic_header_t))",
          "new_text": null,
          "old_line_content": "    ngx_memzero(&pkt, sizeof(ngx_quic_header_t));",
          "new_line_content": "           : NGX_QUIC_MAX_LONG_HEADER;",
          "content_same": false
        },
        {
          "line": 4881,
          "old_api": "ngx_queue_head",
          "new_api": null,
          "old_text": "ngx_queue_head(&ctx->frames)",
          "new_text": null,
          "old_line_content": "    for (q = ngx_queue_head(&ctx->frames);",
          "new_line_content": "    now = ngx_current_msec;",
          "content_same": false
        },
        {
          "line": 4882,
          "old_api": "ngx_queue_sentinel",
          "new_api": null,
          "old_text": "ngx_queue_sentinel(&ctx->frames)",
          "new_text": null,
          "old_line_content": "         q != ngx_queue_sentinel(&ctx->frames);",
          "new_line_content": "    nframes = 0;",
          "content_same": false
        },
        {
          "line": 4883,
          "old_api": "ngx_queue_next",
          "new_api": null,
          "old_text": "ngx_queue_next(q)",
          "new_text": null,
          "old_line_content": "         q = ngx_queue_next(q))",
          "new_line_content": "    p = src;",
          "content_same": false
        },
        {
          "line": 4885,
          "old_api": "ngx_queue_data",
          "new_api": null,
          "old_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "new_text": null,
          "old_line_content": "        f = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4896,
          "old_api": "ngx_quic_split_frame",
          "new_api": null,
          "old_text": "ngx_quic_split_frame(c, f, max - hlen - len)",
          "new_text": null,
          "old_line_content": "            rc = ngx_quic_split_frame(c, f, max - hlen - len);",
          "new_line_content": "        if (hlen + len >= max) {",
          "content_same": false
        },
        {
          "line": 4911,
          "old_api": "ngx_quic_log_frame",
          "new_api": null,
          "old_text": "ngx_quic_log_frame(c->log, f, 1)",
          "new_text": null,
          "old_line_content": "        ngx_quic_log_frame(c->log, f, 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4913,
          "old_api": "ngx_quic_create_frame",
          "new_api": null,
          "old_text": "ngx_quic_create_frame(p, f)",
          "new_text": null,
          "old_line_content": "        flen = ngx_quic_create_frame(p, f);",
          "new_line_content": "            pkt.need_ack = 1;",
          "content_same": false
        },
        {
          "line": 4951,
          "old_api": "ngx_quic_set_packet_number",
          "new_api": null,
          "old_text": "ngx_quic_set_packet_number(&pkt, ctx)",
          "new_text": null,
          "old_line_content": "    ngx_quic_set_packet_number(&pkt, ctx);",
          "new_line_content": "        if (qc->key_phase) {",
          "content_same": false
        },
        {
          "line": 4963,
          "old_api": "ngx_quic_create_header",
          "new_api": null,
          "old_text": "ngx_quic_create_header(&pkt, NULL, out.len, NULL)",
          "new_text": null,
          "old_line_content": "               + ngx_quic_create_header(&pkt, NULL, out.len, NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4971,
          "old_api": "ngx_memset",
          "new_api": null,
          "old_text": "ngx_memset(p, NGX_QUIC_FT_PADDING, pad_len - out.len)",
          "new_text": null,
          "old_line_content": "        ngx_memset(p, NGX_QUIC_FT_PADDING, pad_len - out.len);",
          "new_line_content": "            pad_len = min - hlen;",
          "content_same": false
        },
        {
          "line": 4979,
          "old_api": "ngx_log_debug6",
          "new_api": null,
          "old_text": "ngx_log_debug6(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic packet tx %s bytes:%ui\"\n                   \" need_ack:%d number:%L encoded nl:%d trunc:0x%xD\",\n                   ngx_quic_level_name(ctx->level), out.len, pkt.need_ack,\n                   pkt.number, pkt.num_len, pkt.trunc)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug6(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4982,
          "old_api": "ngx_quic_level_name",
          "new_api": null,
          "old_text": "ngx_quic_level_name(ctx->level)",
          "new_text": null,
          "old_line_content": "                   ngx_quic_level_name(ctx->level), out.len, pkt.need_ack,",
          "new_line_content": "    res.data = data;",
          "content_same": false
        },
        {
          "line": 4985,
          "old_api": "ngx_quic_encrypt",
          "new_api": null,
          "old_text": "ngx_quic_encrypt(&pkt, &res)",
          "new_text": null,
          "old_line_content": "    if (ngx_quic_encrypt(&pkt, &res) != NGX_OK) {",
          "new_line_content": "                   \"quic packet tx %s bytes:%ui\"",
          "content_same": false
        },
        {
          "line": 4995,
          "old_api": "ngx_queue_head",
          "new_api": null,
          "old_text": "ngx_queue_head(&ctx->frames)",
          "new_text": null,
          "old_line_content": "            q = ngx_queue_head(&ctx->frames);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4996,
          "old_api": "ngx_queue_data",
          "new_api": null,
          "old_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "new_text": null,
          "old_line_content": "            f = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "new_line_content": "    if (pkt.need_ack) {",
          "content_same": false
        },
        {
          "line": 5002,
          "old_api": "ngx_queue_insert_tail",
          "new_api": null,
          "old_text": "ngx_queue_insert_tail(&ctx->sent, q)",
          "new_text": null,
          "old_line_content": "                ngx_queue_insert_tail(&ctx->sent, q);",
          "new_line_content": "            f->plen = res.len;",
          "content_same": false
        },
        {
          "line": 5009,
          "old_api": "ngx_quic_pto",
          "new_api": null,
          "old_text": "ngx_quic_pto(c, ctx)",
          "new_text": null,
          "old_line_content": "            ngx_add_timer(&qc->pto, ngx_quic_pto(c, ctx));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5020,
          "old_api": "ngx_queue_data",
          "new_api": null,
          "old_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "new_text": null,
          "old_line_content": "        f = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "new_line_content": "                       \"quic congestion send if:%uz\", cg->in_flight);",
          "content_same": false
        },
        {
          "line": 5022,
          "old_api": "ngx_queue_remove",
          "new_api": null,
          "old_text": "ngx_queue_remove(q)",
          "new_text": null,
          "old_line_content": "        ngx_queue_remove(q);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5023,
          "old_api": "ngx_quic_free_frame",
          "new_api": null,
          "old_text": "ngx_quic_free_frame(c, f)",
          "new_text": null,
          "old_line_content": "        ngx_quic_free_frame(c, f);",
          "new_line_content": "    while (nframes--) {",
          "content_same": false
        },
        {
          "line": 5059,
          "old_api": "ngx_log_debug3",
          "new_api": null,
          "old_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic split frame now:%uz need:%uz shrink:%uz\",\n                   f->len, len, shrink)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "        return NGX_OK;",
          "content_same": false
        },
        {
          "line": 5070,
          "old_api": "ngx_quic_create_frame",
          "new_api": null,
          "old_text": "ngx_quic_create_frame(NULL, f)",
          "new_text": null,
          "old_line_content": "    f->len = ngx_quic_create_frame(NULL, f);",
          "new_line_content": "    if (of->length <= shrink) {",
          "content_same": false
        },
        {
          "line": 5073,
          "old_api": "ngx_log_error",
          "new_api": null,
          "old_text": "ngx_log_error(NGX_LOG_ERR, c->log, 0, \"could not split QUIC frame\")",
          "new_text": null,
          "old_line_content": "        ngx_log_error(NGX_LOG_ERR, c->log, 0, \"could not split QUIC frame\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5077,
          "old_api": "ngx_quic_alloc_frame",
          "new_api": null,
          "old_text": "ngx_quic_alloc_frame(c)",
          "new_text": null,
          "old_line_content": "    nf = ngx_quic_alloc_frame(c);",
          "new_line_content": "    if ((size_t) f->len > len) {",
          "content_same": false
        },
        {
          "line": 5086,
          "old_api": "ngx_quic_create_frame",
          "new_api": null,
          "old_text": "ngx_quic_create_frame(NULL, nf)",
          "new_text": null,
          "old_line_content": "    nf->len = ngx_quic_create_frame(NULL, nf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5088,
          "old_api": "ngx_quic_split_bufs",
          "new_api": null,
          "old_text": "ngx_quic_split_bufs(c, f->data, of->length)",
          "new_text": null,
          "old_line_content": "    nf->data = ngx_quic_split_bufs(c, f->data, of->length);",
          "new_line_content": "    onf = &nf->u.ord;",
          "content_same": false
        },
        {
          "line": 5106,
          "old_api": "ngx_queue_head",
          "new_api": null,
          "old_text": "ngx_queue_head(frames)",
          "new_text": null,
          "old_line_content": "        q = ngx_queue_head(frames);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 5108,
          "old_api": "ngx_queue_sentinel",
          "new_api": null,
          "old_text": "ngx_queue_sentinel(frames)",
          "new_text": null,
          "old_line_content": "        if (q == ngx_queue_sentinel(frames)) {",
          "new_line_content": "    ngx_quic_frame_t  *f;",
          "content_same": false
        },
        {
          "line": 5112,
          "old_api": "ngx_queue_remove",
          "new_api": null,
          "old_text": "ngx_queue_remove(q)",
          "new_text": null,
          "old_line_content": "        ngx_queue_remove(q);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5114,
          "old_api": "ngx_queue_data",
          "new_api": null,
          "old_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "new_text": null,
          "old_line_content": "        f = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 5116,
          "old_api": "ngx_quic_free_frame",
          "new_api": null,
          "old_text": "ngx_quic_free_frame(c, f)",
          "new_text": null,
          "old_line_content": "        ngx_quic_free_frame(c, f);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5127,
          "old_api": "ngx_memzero",
          "new_api": null,
          "old_text": "ngx_memzero(&b, sizeof(ngx_buf_t))",
          "new_text": null,
          "old_line_content": "    ngx_memzero(&b, sizeof(ngx_buf_t));",
          "new_line_content": "ngx_quic_send(ngx_connection_t *c, u_char *buf, size_t len)",
          "content_same": false
        },
        {
          "line": 5137,
          "old_api": "send_chain",
          "new_api": null,
          "old_text": "c->send_chain(c, &cl, 0)",
          "new_text": null,
          "old_line_content": "    res = c->send_chain(c, &cl, 0);",
          "new_line_content": "    b.temporary = 1;",
          "content_same": false
        },
        {
          "line": 5186,
          "old_api": "ngx_log_debug0",
          "new_api": null,
          "old_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, ev->log, 0, \"quic pto timer\")",
          "new_text": null,
          "old_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_EVENT, ev->log, 0, \"quic pto timer\");",
          "new_line_content": "    ngx_connection_t       *c;",
          "content_same": false
        },
        {
          "line": 5189,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    ngx_quic_connection_t  *qc;",
          "content_same": false
        },
        {
          "line": 5197,
          "old_api": "ngx_queue_empty",
          "new_api": null,
          "old_text": "ngx_queue_empty(&ctx->sent)",
          "new_text": null,
          "old_line_content": "        if (ngx_queue_empty(&ctx->sent)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5201,
          "old_api": "ngx_queue_head",
          "new_api": null,
          "old_text": "ngx_queue_head(&ctx->sent)",
          "new_text": null,
          "old_line_content": "        q = ngx_queue_head(&ctx->sent);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5210,
          "old_api": "ngx_log_debug3",
          "new_api": null,
          "old_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic pto pnum:%uL pto_count:%ui level:%d\",\n                       start->pnum, qc->pto_count, start->level)",
          "new_text": null,
          "old_line_content": "        ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "            && ctx->largest_ack != NGX_QUIC_UNSET_PN)",
          "content_same": false
        },
        {
          "line": 5214,
          "old_api": "ngx_quic_resend_frames",
          "new_api": null,
          "old_text": "ngx_quic_resend_frames(c, ctx)",
          "new_text": null,
          "old_line_content": "        ngx_quic_resend_frames(c, ctx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5217,
          "old_api": "ngx_quic_connstate_dbg",
          "new_api": null,
          "old_text": "ngx_quic_connstate_dbg(c)",
          "new_text": null,
          "old_line_content": "    ngx_quic_connstate_dbg(c);",
          "new_line_content": "                       start->pnum, qc->pto_count, start->level);",
          "content_same": false
        },
        {
          "line": 5226,
          "old_api": "ngx_log_debug0",
          "new_api": null,
          "old_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, ev->log, 0, \"quic push timer\")",
          "new_text": null,
          "old_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_EVENT, ev->log, 0, \"quic push timer\");",
          "new_line_content": "static void",
          "content_same": false
        },
        {
          "line": 5230,
          "old_api": "ngx_quic_output",
          "new_api": null,
          "old_text": "ngx_quic_output(c)",
          "new_text": null,
          "old_line_content": "    if (ngx_quic_output(c) != NGX_OK) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5244,
          "old_api": "ngx_log_debug0",
          "new_api": null,
          "old_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, ev->log, 0, \"quic lost timer\")",
          "new_text": null,
          "old_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_EVENT, ev->log, 0, \"quic lost timer\");",
          "new_line_content": "static",
          "content_same": false
        },
        {
          "line": 5248,
          "old_api": "ngx_quic_detect_lost",
          "new_api": null,
          "old_text": "ngx_quic_detect_lost(c)",
          "new_text": null,
          "old_line_content": "    if (ngx_quic_detect_lost(c) != NGX_OK) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5252,
          "old_api": "ngx_quic_connstate_dbg",
          "new_api": null,
          "old_text": "ngx_quic_connstate_dbg(c)",
          "new_text": null,
          "old_line_content": "    ngx_quic_connstate_dbg(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5266,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    ngx_queue_t            *q;",
          "content_same": false
        },
        {
          "line": 5272,
          "old_api": "ngx_max",
          "new_api": null,
          "old_text": "ngx_max(thr, NGX_QUIC_TIME_GRANULARITY)",
          "new_text": null,
          "old_line_content": "    thr = ngx_max(thr, NGX_QUIC_TIME_GRANULARITY);",
          "new_line_content": "    now = ngx_current_msec;",
          "content_same": false
        },
        {
          "line": 5282,
          "old_api": "ngx_queue_empty",
          "new_api": null,
          "old_text": "ngx_queue_empty(&ctx->sent)",
          "new_text": null,
          "old_line_content": "        while (!ngx_queue_empty(&ctx->sent)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5284,
          "old_api": "ngx_queue_head",
          "new_api": null,
          "old_text": "ngx_queue_head(&ctx->sent)",
          "new_text": null,
          "old_line_content": "            q = ngx_queue_head(&ctx->sent);",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 5285,
          "old_api": "ngx_queue_data",
          "new_api": null,
          "old_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "new_text": null,
          "old_line_content": "            start = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5293,
          "old_api": "ngx_log_debug4",
          "new_api": null,
          "old_text": "ngx_log_debug4(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                           \"quic detect_lost pnum:%uL thr:%M wait:%i level:%d\",\n                           start->pnum, thr, (ngx_int_t) wait, start->level)",
          "new_text": null,
          "old_line_content": "            ngx_log_debug4(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "                break;",
          "content_same": false
        },
        {
          "line": 5308,
          "old_api": "ngx_quic_resend_frames",
          "new_api": null,
          "old_text": "ngx_quic_resend_frames(c, ctx)",
          "new_text": null,
          "old_line_content": "            ngx_quic_resend_frames(c, ctx);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 5322,
          "old_api": "ngx_del_timer",
          "new_api": null,
          "old_text": "ngx_del_timer(&qc->pto)",
          "new_text": null,
          "old_line_content": "        ngx_del_timer(&qc->pto);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5325,
          "old_api": "ngx_add_timer",
          "new_api": null,
          "old_text": "ngx_add_timer(&qc->pto, min_wait)",
          "new_text": null,
          "old_line_content": "    ngx_add_timer(&qc->pto, min_wait);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5341,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    ngx_queue_t            *q;",
          "content_same": false
        },
        {
          "line": 5342,
          "old_api": "ngx_queue_head",
          "new_api": null,
          "old_text": "ngx_queue_head(&ctx->sent)",
          "new_text": null,
          "old_line_content": "    q = ngx_queue_head(&ctx->sent);",
          "new_line_content": "    ngx_quic_frame_t       *f, *start;",
          "content_same": false
        },
        {
          "line": 5343,
          "old_api": "ngx_queue_data",
          "new_api": null,
          "old_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "new_text": null,
          "old_line_content": "    start = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "new_line_content": "    ngx_quic_stream_t      *sn;",
          "content_same": false
        },
        {
          "line": 5345,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic resend packet pnum:%uL\", start->pnum)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5351,
          "old_api": "ngx_queue_data",
          "new_api": null,
          "old_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "new_text": null,
          "old_line_content": "        f = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "new_line_content": "                   \"quic resend packet pnum:%uL\", start->pnum);",
          "content_same": false
        },
        {
          "line": 5357,
          "old_api": "ngx_queue_next",
          "new_api": null,
          "old_text": "ngx_queue_next(q)",
          "new_text": null,
          "old_line_content": "        q = ngx_queue_next(q);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5359,
          "old_api": "ngx_queue_remove",
          "new_api": null,
          "old_text": "ngx_queue_remove(&f->queue)",
          "new_text": null,
          "old_line_content": "        ngx_queue_remove(&f->queue);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 5366,
          "old_api": "ngx_quic_free_frame",
          "new_api": null,
          "old_text": "ngx_quic_free_frame(c, f)",
          "new_text": null,
          "old_line_content": "            ngx_quic_free_frame(c, f);",
          "new_line_content": "        switch (f->type) {",
          "content_same": false
        },
        {
          "line": 5372,
          "old_api": "ngx_quic_free_frame",
          "new_api": null,
          "old_text": "ngx_quic_free_frame(c, f)",
          "new_text": null,
          "old_line_content": "            ngx_quic_free_frame(c, f);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 5385,
          "old_api": "ngx_quic_queue_frame",
          "new_api": null,
          "old_text": "ngx_quic_queue_frame(qc, f)",
          "new_text": null,
          "old_line_content": "            ngx_quic_queue_frame(qc, f);",
          "new_line_content": "        case NGX_QUIC_FT_MAX_STREAMS:",
          "content_same": false
        },
        {
          "line": 5389,
          "old_api": "ngx_quic_find_stream",
          "new_api": null,
          "old_text": "ngx_quic_find_stream(&qc->streams.tree,\n                                      f->u.max_stream_data.id)",
          "new_text": null,
          "old_line_content": "            sn = ngx_quic_find_stream(&qc->streams.tree,",
          "new_line_content": "                                     : qc->streams.client_max_streams_uni;",
          "content_same": false
        },
        {
          "line": 5392,
          "old_api": "ngx_quic_free_frame",
          "new_api": null,
          "old_text": "ngx_quic_free_frame(c, f)",
          "new_text": null,
          "old_line_content": "                ngx_quic_free_frame(c, f);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5403,
          "old_api": "ngx_quic_queue_frame",
          "new_api": null,
          "old_text": "ngx_quic_queue_frame(qc, f)",
          "new_text": null,
          "old_line_content": "            ngx_quic_queue_frame(qc, f);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5414,
          "old_api": "ngx_quic_find_stream",
          "new_api": null,
          "old_text": "ngx_quic_find_stream(&qc->streams.tree, f->u.stream.stream_id)",
          "new_text": null,
          "old_line_content": "            sn = ngx_quic_find_stream(&qc->streams.tree, f->u.stream.stream_id);",
          "new_line_content": "        case NGX_QUIC_FT_STREAM3:",
          "content_same": false
        },
        {
          "line": 5418,
          "old_api": "ngx_quic_free_frame",
          "new_api": null,
          "old_text": "ngx_quic_free_frame(c, f)",
          "new_text": null,
          "old_line_content": "                ngx_quic_free_frame(c, f);",
          "new_line_content": "        case NGX_QUIC_FT_STREAM7:",
          "content_same": false
        },
        {
          "line": 5425,
          "old_api": "ngx_queue_insert_tail",
          "new_api": null,
          "old_text": "ngx_queue_insert_tail(&ctx->frames, &f->queue)",
          "new_text": null,
          "old_line_content": "            ngx_queue_insert_tail(&ctx->frames, &f->queue);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 5428,
          "old_api": "ngx_queue_sentinel",
          "new_api": null,
          "old_text": "ngx_queue_sentinel(&ctx->sent)",
          "new_text": null,
          "old_line_content": "    } while (q != ngx_queue_sentinel(&ctx->sent));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5434,
          "old_api": "ngx_post_event",
          "new_api": null,
          "old_text": "ngx_post_event(&qc->push, &ngx_posted_events)",
          "new_text": null,
          "old_line_content": "    ngx_post_event(&qc->push, &ngx_posted_events);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5447,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(qs->parent)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(qs->parent);",
          "new_line_content": "    uint64_t                id;",
          "content_same": false
        },
        {
          "line": 5453,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                           \"quic too many server bidi streams:%uL\",\n                           qc->streams.server_streams_bidi)",
          "new_text": null,
          "old_line_content": "            ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5462,
          "old_api": "ngx_log_debug3",
          "new_api": null,
          "old_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic creating server bidi stream\"\n                       \" streams:%uL max:%uL id:0x%xL\",\n                       qc->streams.server_streams_bidi,\n                       qc->streams.server_max_streams_bidi, id)",
          "new_text": null,
          "old_line_content": "        ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5475,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                           \"quic too many server uni streams:%uL\",\n                           qc->streams.server_streams_uni)",
          "new_text": null,
          "old_line_content": "            ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5485,
          "old_api": "ngx_log_debug3",
          "new_api": null,
          "old_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic creating server uni stream\"\n                       \" streams:%uL max:%uL id:0x%xL\",\n                       qc->streams.server_streams_uni,\n                       qc->streams.server_max_streams_uni, id)",
          "new_text": null,
          "old_line_content": "        ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5495,
          "old_api": "ngx_quic_create_stream",
          "new_api": null,
          "old_text": "ngx_quic_create_stream(qs->parent, id, rcvbuf_size)",
          "new_text": null,
          "old_line_content": "    sn = ngx_quic_create_stream(qs->parent, id, rcvbuf_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5528,
          "old_api": "ngx_rbt_red",
          "new_api": null,
          "old_text": "ngx_rbt_red(node)",
          "new_text": null,
          "old_line_content": "    ngx_rbt_red(node);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5563,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic stream id:0x%xL is new\", id)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    size_t                  n;",
          "content_same": false
        },
        {
          "line": 5566,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    ngx_quic_connection_t  *qc;",
          "content_same": false
        },
        {
          "line": 5633,
          "old_api": "ngx_quic_create_stream",
          "new_api": null,
          "old_text": "ngx_quic_create_stream(c, min_id, n)",
          "new_text": null,
          "old_line_content": "        sn = ngx_quic_create_stream(c, min_id, n);",
          "new_line_content": "     *   opened.",
          "content_same": false
        },
        {
          "line": 5641,
          "old_api": "ngx_quic_create_stream",
          "new_api": null,
          "old_text": "ngx_quic_create_stream(c, id, n)",
          "new_text": null,
          "old_line_content": "    return ngx_quic_create_stream(c, id, n);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5654,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic stream id:0x%xL create\", id)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    ngx_pool_t             *pool;",
          "content_same": false
        },
        {
          "line": 5657,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    ngx_quic_connection_t  *qc;",
          "content_same": false
        },
        {
          "line": 5666,
          "old_api": "ngx_destroy_pool",
          "new_api": null,
          "old_text": "ngx_destroy_pool(pool)",
          "new_text": null,
          "old_line_content": "        ngx_destroy_pool(pool);",
          "new_line_content": "        return NULL;",
          "content_same": false
        },
        {
          "line": 5674,
          "old_api": "ngx_create_temp_buf",
          "new_api": null,
          "old_text": "ngx_create_temp_buf(pool, rcvbuf_size)",
          "new_text": null,
          "old_line_content": "    sn->b = ngx_create_temp_buf(pool, rcvbuf_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5676,
          "old_api": "ngx_destroy_pool",
          "new_api": null,
          "old_text": "ngx_destroy_pool(pool)",
          "new_text": null,
          "old_line_content": "        ngx_destroy_pool(pool);",
          "new_line_content": "    sn->parent = c;",
          "content_same": false
        },
        {
          "line": 5680,
          "old_api": "ngx_queue_init",
          "new_api": null,
          "old_text": "ngx_queue_init(&sn->fs.frames)",
          "new_text": null,
          "old_line_content": "    ngx_queue_init(&sn->fs.frames);",
          "new_line_content": "    if (sn->b == NULL) {",
          "content_same": false
        },
        {
          "line": 5682,
          "old_api": "ngx_palloc",
          "new_api": null,
          "old_text": "ngx_palloc(pool, sizeof(ngx_log_t))",
          "new_text": null,
          "old_line_content": "    log = ngx_palloc(pool, sizeof(ngx_log_t));",
          "new_line_content": "        return NULL;",
          "content_same": false
        },
        {
          "line": 5684,
          "old_api": "ngx_destroy_pool",
          "new_api": null,
          "old_text": "ngx_destroy_pool(pool)",
          "new_text": null,
          "old_line_content": "        ngx_destroy_pool(pool);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5691,
          "old_api": "ngx_get_connection",
          "new_api": null,
          "old_text": "ngx_get_connection(-1, log)",
          "new_text": null,
          "old_line_content": "    sn->c = ngx_get_connection(-1, log);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5693,
          "old_api": "ngx_destroy_pool",
          "new_api": null,
          "old_text": "ngx_destroy_pool(pool)",
          "new_text": null,
          "old_line_content": "        ngx_destroy_pool(pool);",
          "new_line_content": "    *log = *c->log;",
          "content_same": false
        },
        {
          "line": 5706,
          "old_api": "ngx_atomic_fetch_add",
          "new_api": null,
          "old_text": "ngx_atomic_fetch_add(ngx_connection_counter, 1)",
          "new_text": null,
          "old_line_content": "    sn->c->number = ngx_atomic_fetch_add(ngx_connection_counter, 1);",
          "new_line_content": "    sn->c->sockaddr = c->sockaddr;",
          "content_same": false
        },
        {
          "line": 5736,
          "old_api": "ngx_pool_cleanup_add",
          "new_api": null,
          "old_text": "ngx_pool_cleanup_add(pool, 0)",
          "new_text": null,
          "old_line_content": "    cln = ngx_pool_cleanup_add(pool, 0);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 5738,
          "old_api": "ngx_close_connection",
          "new_api": null,
          "old_text": "ngx_close_connection(sn->c)",
          "new_text": null,
          "old_line_content": "        ngx_close_connection(sn->c);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5739,
          "old_api": "ngx_destroy_pool",
          "new_api": null,
          "old_text": "ngx_destroy_pool(pool)",
          "new_text": null,
          "old_line_content": "        ngx_destroy_pool(pool);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5746,
          "old_api": "ngx_rbtree_insert",
          "new_api": null,
          "old_text": "ngx_rbtree_insert(&qc->streams.tree, &sn->node)",
          "new_text": null,
          "old_line_content": "    ngx_rbtree_insert(&qc->streams.tree, &sn->node);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5766,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(pc)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(pc);",
          "new_line_content": "    ngx_quic_connection_t  *qc;",
          "content_same": false
        },
        {
          "line": 5773,
          "old_api": "ngx_log_debug3",
          "new_api": null,
          "old_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic stream recv id:0x%xL eof:%d avail:%z\",\n                   qs->id, rev->pending_eof, b->last - b->pos)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3736,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    ngx_buf_t              *b;",
          "content_same": false
        },
        {
          "line": 5785,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic stream id:0x%xL recv() not ready\", qs->id)",
          "new_text": null,
          "old_line_content": "        ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "        if (rev->pending_eof) {",
          "content_same": false
        },
        {
          "line": 3740,
          "old_api": "ngx_log_debug2",
          "new_api": null,
          "old_text": "ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic SSL_quic_read_level:%d SSL_quic_write_level:%d\",\n                   (int) SSL_quic_read_level(ssl_conn),\n                   (int) SSL_quic_write_level(ssl_conn))",
          "new_text": null,
          "old_line_content": "    ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3742,
          "old_api": "SSL_quic_read_level",
          "new_api": null,
          "old_text": "SSL_quic_read_level(ssl_conn)",
          "new_text": null,
          "old_line_content": "                   (int) SSL_quic_read_level(ssl_conn),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3743,
          "old_api": "SSL_quic_write_level",
          "new_api": null,
          "old_text": "SSL_quic_write_level(ssl_conn)",
          "new_text": null,
          "old_line_content": "                   (int) SSL_quic_write_level(ssl_conn));",
          "new_line_content": "    ssl_conn = c->ssl->connection;",
          "content_same": false
        },
        {
          "line": 5792,
          "old_api": "ngx_memcpy",
          "new_api": null,
          "old_text": "ngx_memcpy(buf, b->pos, len)",
          "new_text": null,
          "old_line_content": "    ngx_memcpy(buf, b->pos, len);",
          "new_line_content": "        return NGX_AGAIN;",
          "content_same": false
        },
        {
          "line": 3751,
          "old_api": "ngx_ssl_error",
          "new_api": null,
          "old_text": "ngx_ssl_error(NGX_LOG_INFO, c->log, 0,\n                          \"SSL_provide_quic_data() failed\")",
          "new_text": null,
          "old_line_content": "            ngx_ssl_error(NGX_LOG_INFO, c->log, 0,",
          "new_line_content": "        b = cl->buf;",
          "content_same": false
        },
        {
          "line": 5803,
          "old_api": "ngx_log_debug3",
          "new_api": null,
          "old_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic stream id:0x%xL recv len:%z of size:%uz\",\n                   qs->id, len, size)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "        b->pos = b->start;",
          "content_same": false
        },
        {
          "line": 3757,
          "old_api": "SSL_do_handshake",
          "new_api": null,
          "old_text": "SSL_do_handshake(ssl_conn)",
          "new_text": null,
          "old_line_content": "    n = SSL_do_handshake(ssl_conn);",
          "new_line_content": "                          \"SSL_provide_quic_data() failed\");",
          "content_same": false
        },
        {
          "line": 3759,
          "old_api": "ngx_log_debug2",
          "new_api": null,
          "old_text": "ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic SSL_quic_read_level:%d SSL_quic_write_level:%d\",\n                   (int) SSL_quic_read_level(ssl_conn),\n                   (int) SSL_quic_write_level(ssl_conn))",
          "new_text": null,
          "old_line_content": "    ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3761,
          "old_api": "SSL_quic_read_level",
          "new_api": null,
          "old_text": "SSL_quic_read_level(ssl_conn)",
          "new_text": null,
          "old_line_content": "                   (int) SSL_quic_read_level(ssl_conn),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5819,
          "old_api": "ngx_quic_queue_frame",
          "new_api": null,
          "old_text": "ngx_quic_queue_frame(qc, frame)",
          "new_text": null,
          "old_line_content": "        ngx_quic_queue_frame(qc, frame);",
          "new_line_content": "        frame->type = NGX_QUIC_FT_MAX_STREAM_DATA;",
          "content_same": false
        },
        {
          "line": 3773,
          "old_api": "ngx_ssl_error",
          "new_api": null,
          "old_text": "ngx_ssl_error(NGX_LOG_ERR, c->log, 0, \"SSL_do_handshake() failed\")",
          "new_text": null,
          "old_line_content": "            ngx_ssl_error(NGX_LOG_ERR, c->log, 0, \"SSL_do_handshake() failed\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3780,
          "old_api": "SSL_in_init",
          "new_api": null,
          "old_text": "SSL_in_init(ssl_conn)",
          "new_text": null,
          "old_line_content": "    if (SSL_in_init(ssl_conn)) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3784,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic ssl cipher:%s\", SSL_get_cipher(ssl_conn))",
          "new_text": null,
          "old_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3787,
          "old_api": "ngx_log_debug0",
          "new_api": null,
          "old_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic handshake completed successfully\")",
          "new_text": null,
          "old_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5836,
          "old_api": "ngx_quic_queue_frame",
          "new_api": null,
          "old_text": "ngx_quic_queue_frame(qc, frame)",
          "new_text": null,
          "old_line_content": "        ngx_quic_queue_frame(qc, frame);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5838,
          "old_api": "ngx_log_debug2",
          "new_api": null,
          "old_text": "ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic stream id:0x%xL recv: increased max_data:%uL\",\n                       qs->id, qc->streams.recv_max_data)",
          "new_text": null,
          "old_line_content": "        ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "        frame->type = NGX_QUIC_FT_MAX_DATA;",
          "content_same": false
        },
        {
          "line": 3800,
          "old_api": "ngx_quic_queue_frame",
          "new_api": null,
          "old_text": "ngx_quic_queue_frame(qc, frame)",
          "new_text": null,
          "old_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3802,
          "old_api": "ngx_quic_send_new_token",
          "new_api": null,
          "old_text": "ngx_quic_send_new_token(c)",
          "new_text": null,
          "old_line_content": "    if (ngx_quic_send_new_token(c) != NGX_OK) {",
          "new_line_content": "    /* 12.4 Frames and frame types, figure 8 */",
          "content_same": false
        },
        {
          "line": 5853,
          "old_api": "ngx_memzero",
          "new_api": null,
          "old_text": "ngx_memzero(&b, sizeof(ngx_buf_t))",
          "new_text": null,
          "old_line_content": "    ngx_memzero(&b, sizeof(ngx_buf_t));",
          "new_line_content": "ngx_quic_stream_send(ngx_connection_t *c, u_char *buf, size_t size)",
          "content_same": false
        },
        {
          "line": 3811,
          "old_api": "ngx_quic_keys_update",
          "new_api": null,
          "old_text": "ngx_quic_keys_update(c, qc->keys)",
          "new_text": null,
          "old_line_content": "    if (ngx_quic_keys_update(c, qc->keys) != NGX_OK) {",
          "new_line_content": "    /*",
          "content_same": false
        },
        {
          "line": 5862,
          "old_api": "ngx_quic_stream_send_chain",
          "new_api": null,
          "old_text": "ngx_quic_stream_send_chain(c, &cl, 0)",
          "new_text": null,
          "old_line_content": "    if (ngx_quic_stream_send_chain(c, &cl, 0) == NGX_CHAIN_ERROR) {",
          "new_line_content": "    b.last = buf + size;",
          "content_same": false
        },
        {
          "line": 3819,
          "old_api": "ngx_quic_discard_ctx",
          "new_api": null,
          "old_text": "ngx_quic_discard_ctx(c, ssl_encryption_handshake)",
          "new_text": null,
          "old_line_content": "    ngx_quic_discard_ctx(c, ssl_encryption_handshake);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3821,
          "old_api": "ngx_quic_issue_server_ids",
          "new_api": null,
          "old_text": "ngx_quic_issue_server_ids(c)",
          "new_text": null,
          "old_line_content": "    if (ngx_quic_issue_server_ids(c) != NGX_OK) {",
          "new_line_content": "     * 4.10.2 An endpoint MUST discard its handshake keys",
          "content_same": false
        },
        {
          "line": 5887,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(pc)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(pc);",
          "new_line_content": "    ngx_quic_stream_t      *qs;",
          "content_same": false
        },
        {
          "line": 3843,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    ngx_quic_stream_t         *sn;",
          "content_same": false
        },
        {
          "line": 5894,
          "old_api": "ngx_quic_max_stream_flow",
          "new_api": null,
          "old_text": "ngx_quic_max_stream_flow(c)",
          "new_text": null,
          "old_line_content": "    flow = ngx_quic_max_stream_flow(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5902,
          "old_api": "ngx_quic_alloc_frame",
          "new_api": null,
          "old_text": "ngx_quic_alloc_frame(pc)",
          "new_text": null,
          "old_line_content": "    frame = ngx_quic_alloc_frame(pc);",
          "new_line_content": "        return in;",
          "content_same": false
        },
        {
          "line": 3856,
          "old_api": "ngx_quic_find_stream",
          "new_api": null,
          "old_text": "ngx_quic_find_stream(&qc->streams.tree, f->stream_id)",
          "new_text": null,
          "old_line_content": "    sn = ngx_quic_find_stream(&qc->streams.tree, f->stream_id);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3859,
          "old_api": "ngx_quic_create_client_stream",
          "new_api": null,
          "old_text": "ngx_quic_create_client_stream(c, f->stream_id)",
          "new_text": null,
          "old_line_content": "        sn = ngx_quic_create_client_stream(c, f->stream_id);",
          "new_line_content": "    last = f->offset + f->length;",
          "content_same": false
        },
        {
          "line": 5913,
          "old_api": "ngx_buf_size",
          "new_api": null,
          "old_text": "ngx_buf_size(cl->buf)",
          "new_text": null,
          "old_line_content": "        n += ngx_buf_size(cl->buf);",
          "new_line_content": "    if (frame->data == NGX_CHAIN_ERROR) {",
          "content_same": false
        },
        {
          "line": 5916,
          "old_api": "ngx_buf_size",
          "new_api": null,
          "old_text": "ngx_buf_size(in->buf)",
          "new_text": null,
          "old_line_content": "    while (in && ngx_buf_size(in->buf) == 0) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3879,
          "old_api": "ngx_quic_handle_ordered_frame",
          "new_api": null,
          "old_text": "ngx_quic_handle_ordered_frame(c, fs, frame, ngx_quic_stream_input,\n                                          sn)",
          "new_text": null,
          "old_line_content": "        if (ngx_quic_handle_ordered_frame(c, fs, frame, ngx_quic_stream_input,",
          "new_line_content": "        if (last > window) {",
          "content_same": false
        },
        {
          "line": 3886,
          "old_api": "handler",
          "new_api": null,
          "old_text": "sc->listening->handler(sc)",
          "new_text": null,
          "old_line_content": "        sc->listening->handler(sc);",
          "new_line_content": "            != NGX_OK)",
          "content_same": false
        },
        {
          "line": 5934,
          "old_api": "ngx_quic_queue_frame",
          "new_api": null,
          "old_text": "ngx_quic_queue_frame(qc, frame)",
          "new_text": null,
          "old_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "new_line_content": "    frame->u.stream.length = n;",
          "content_same": false
        },
        {
          "line": 5938,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic send_chain sent:%uz\", n)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3900,
          "old_api": "ngx_quic_handle_ordered_frame",
          "new_api": null,
          "old_text": "ngx_quic_handle_ordered_frame(c, fs, frame, ngx_quic_stream_input,\n                                         sn)",
          "new_text": null,
          "old_line_content": "    return ngx_quic_handle_ordered_frame(c, fs, frame, ngx_quic_stream_input,",
          "new_line_content": "    if (last > fs->received && last - fs->received > window) {",
          "content_same": false
        },
        {
          "line": 5954,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(qs->parent)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(qs->parent);",
          "new_line_content": "    uint64_t                sent, unacked;",
          "content_same": false
        },
        {
          "line": 3907,
          "old_api": "ngx_close_connection",
          "new_api": null,
          "old_text": "ngx_close_connection(sc)",
          "new_text": null,
          "old_line_content": "    ngx_close_connection(sc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3908,
          "old_api": "ngx_destroy_pool",
          "new_api": null,
          "old_text": "ngx_destroy_pool(pool)",
          "new_text": null,
          "old_line_content": "    ngx_destroy_pool(pool);",
          "new_line_content": "cleanup:",
          "content_same": false
        },
        {
          "line": 5965,
          "old_api": "ngx_log_debug0",
          "new_api": null,
          "old_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic send flow hit buffer size\")",
          "new_text": null,
          "old_line_content": "        ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    if (qc->streams.send_max_data == 0) {",
          "content_same": false
        },
        {
          "line": 3925,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    ngx_chain_t              *cl;",
          "content_same": false
        },
        {
          "line": 5975,
          "old_api": "ngx_log_debug0",
          "new_api": null,
          "old_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic send flow hit MAX_DATA\")",
          "new_text": null,
          "old_line_content": "        ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    if (unacked + size > NGX_QUIC_STREAM_BUFSIZE) {",
          "content_same": false
        },
        {
          "line": 3934,
          "old_api": "ngx_log_error",
          "new_api": null,
          "old_text": "ngx_log_error(NGX_LOG_INFO, c->log, 0,\n                      \"quic no space in stream buffer\")",
          "new_text": null,
          "old_line_content": "        ngx_log_error(NGX_LOG_INFO, c->log, 0,",
          "new_line_content": "    id = f->stream_id;",
          "content_same": false
        },
        {
          "line": 5985,
          "old_api": "ngx_log_debug0",
          "new_api": null,
          "old_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic send flow hit MAX_STREAM_DATA\")",
          "new_text": null,
          "old_line_content": "        ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    if (qc->streams.sent + size > qc->streams.send_max_data) {",
          "content_same": false
        },
        {
          "line": 3940,
          "old_api": "ngx_movemem",
          "new_api": null,
          "old_text": "ngx_movemem(b->start, b->pos, b->last - b->pos)",
          "new_text": null,
          "old_line_content": "        b->last = ngx_movemem(b->start, b->pos, b->last - b->pos);",
          "new_line_content": "                      \"quic no space in stream buffer\");",
          "content_same": false
        },
        {
          "line": 5994,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic send flow:%uz\", size)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3957,
          "old_api": "handler",
          "new_api": null,
          "old_text": "rev->handler(rev)",
          "new_text": null,
          "old_line_content": "        rev->handler(rev);",
          "new_line_content": "    if (f->fin) {",
          "content_same": false
        },
        {
          "line": 3961,
          "old_api": "ngx_quic_find_stream",
          "new_api": null,
          "old_text": "ngx_quic_find_stream(&qc->streams.tree, id)",
          "new_text": null,
          "old_line_content": "    if (ngx_quic_find_stream(&qc->streams.tree, id) == NULL) {",
          "new_line_content": "    if (rev->active) {",
          "content_same": false
        },
        {
          "line": 6013,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(pc)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(pc);",
          "new_line_content": "    ngx_quic_stream_t      *qs;",
          "content_same": false
        },
        {
          "line": 6015,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic stream id:0x%xL cleanup\", qs->id)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6019,
          "old_api": "ngx_quic_free_frames",
          "new_api": null,
          "old_text": "ngx_quic_free_frames(pc, &qs->fs.frames)",
          "new_text": null,
          "old_line_content": "    ngx_quic_free_frames(pc, &qs->fs.frames);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3979,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    ngx_rbtree_t           *tree;",
          "content_same": false
        },
        {
          "line": 6031,
          "old_api": "ngx_quic_alloc_frame",
          "new_api": null,
          "old_text": "ngx_quic_alloc_frame(pc)",
          "new_text": null,
          "old_line_content": "            frame = ngx_quic_alloc_frame(pc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3988,
          "old_api": "ngx_rbtree_min",
          "new_api": null,
          "old_text": "ngx_rbtree_min(tree->root, tree->sentinel)",
          "new_text": null,
          "old_line_content": "        for (node = ngx_rbtree_min(tree->root, tree->sentinel);",
          "new_line_content": "        return NGX_OK;",
          "content_same": false
        },
        {
          "line": 3990,
          "old_api": "ngx_rbtree_next",
          "new_api": null,
          "old_text": "ngx_rbtree_next(tree, node)",
          "new_text": null,
          "old_line_content": "             node = ngx_rbtree_next(tree, node))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6041,
          "old_api": "ngx_quic_queue_frame",
          "new_api": null,
          "old_text": "ngx_quic_queue_frame(qc, frame)",
          "new_text": null,
          "old_line_content": "            ngx_quic_queue_frame(qc, frame);",
          "new_line_content": "            frame->level = ssl_encryption_application;",
          "content_same": false
        },
        {
          "line": 3997,
          "old_api": "ngx_post_event",
          "new_api": null,
          "old_text": "ngx_post_event(wev, &ngx_posted_events)",
          "new_text": null,
          "old_line_content": "                ngx_post_event(wev, &ngx_posted_events);",
          "new_line_content": "            qs = (ngx_quic_stream_t *) node;",
          "content_same": false
        },
        {
          "line": 6063,
          "old_api": "ngx_quic_queue_frame",
          "new_api": null,
          "old_text": "ngx_quic_queue_frame(qc, frame)",
          "new_text": null,
          "old_line_content": "        ngx_quic_queue_frame(qc, frame);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 6071,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic stream id:0x%xL send fin\", qs->id)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "            /* do not send fin for client unidirectional streams */",
          "content_same": false
        },
        {
          "line": 4026,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    ngx_buf_t              *b;",
          "content_same": false
        },
        {
          "line": 6074,
          "old_api": "ngx_quic_alloc_frame",
          "new_api": null,
          "old_text": "ngx_quic_alloc_frame(pc)",
          "new_text": null,
          "old_line_content": "    frame = ngx_quic_alloc_frame(pc);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4035,
          "old_api": "ngx_quic_find_stream",
          "new_api": null,
          "old_text": "ngx_quic_find_stream(&qc->streams.tree, f->id)",
          "new_text": null,
          "old_line_content": "    sn = ngx_quic_find_stream(&qc->streams.tree, f->id);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 4038,
          "old_api": "ngx_quic_create_client_stream",
          "new_api": null,
          "old_text": "ngx_quic_create_client_stream(c, f->id)",
          "new_text": null,
          "old_line_content": "        sn = ngx_quic_create_client_stream(c, f->id);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6090,
          "old_api": "ngx_quic_queue_frame",
          "new_api": null,
          "old_text": "ngx_quic_queue_frame(qc, frame)",
          "new_text": null,
          "old_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "new_line_content": "    frame->u.stream.type = frame->type;",
          "content_same": false
        },
        {
          "line": 6092,
          "old_api": "ngx_quic_output",
          "new_api": null,
          "old_text": "ngx_quic_output(pc)",
          "new_text": null,
          "old_line_content": "    (void) ngx_quic_output(pc);",
          "new_line_content": "    frame->u.stream.offset = c->sent;",
          "content_same": false
        },
        {
          "line": 4051,
          "old_api": "handler",
          "new_api": null,
          "old_text": "sn->c->listening->handler(sn->c)",
          "new_text": null,
          "old_line_content": "        sn->c->listening->handler(sn->c);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6103,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 6105,
          "old_api": "ngx_queue_empty",
          "new_api": null,
          "old_text": "ngx_queue_empty(&qc->free_frames)",
          "new_text": null,
          "old_line_content": "    if (!ngx_queue_empty(&qc->free_frames)) {",
          "new_line_content": "    ngx_quic_frame_t       *frame;",
          "content_same": false
        },
        {
          "line": 4058,
          "old_api": "ngx_quic_alloc_frame",
          "new_api": null,
          "old_text": "ngx_quic_alloc_frame(c)",
          "new_text": null,
          "old_line_content": "    frame = ngx_quic_alloc_frame(c);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 6107,
          "old_api": "ngx_queue_head",
          "new_api": null,
          "old_text": "ngx_queue_head(&qc->free_frames)",
          "new_text": null,
          "old_line_content": "        q = ngx_queue_head(&qc->free_frames);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4068,
          "old_api": "ngx_quic_queue_frame",
          "new_api": null,
          "old_text": "ngx_quic_queue_frame(qc, frame)",
          "new_text": null,
          "old_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "new_line_content": "    frame->level = pkt->level;",
          "content_same": false
        },
        {
          "line": 6126,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic alloc frame n:%ui\", qc->nframes)",
          "new_text": null,
          "old_line_content": "        ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4083,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    uint64_t                sent;",
          "content_same": false
        },
        {
          "line": 4092,
          "old_api": "ngx_quic_find_stream",
          "new_api": null,
          "old_text": "ngx_quic_find_stream(&qc->streams.tree, f->id)",
          "new_text": null,
          "old_line_content": "    sn = ngx_quic_find_stream(&qc->streams.tree, f->id);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 4095,
          "old_api": "ngx_quic_create_client_stream",
          "new_api": null,
          "old_text": "ngx_quic_create_client_stream(c, f->id)",
          "new_text": null,
          "old_line_content": "        sn = ngx_quic_create_client_stream(c, f->id);",
          "new_line_content": "    }",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 50,
      "total_additions": 311,
      "total_deletions": 308,
      "total_api_changes": 669
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 5,
        "api_related_lines": 669,
        "non_api_lines": 2,
        "non_api_line_numbers": [
          3720,
          3724
        ]
      }
    },
    "api_calls_before": 816,
    "api_calls_after": 819,
    "diff_info": {
      "added_lines": 5,
      "removed_lines": 0,
      "total_diff_lines": 17
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/nginx/modified_file/9f90d11cf52ccb0a8d086525aa7e4218d31d529a",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/nginx/modified_file/9f90d11cf52ccb0a8d086525aa7e4218d31d529a/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/nginx/modified_file/9f90d11cf52ccb0a8d086525aa7e4218d31d529a/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/nginx/modified_file/9f90d11cf52ccb0a8d086525aa7e4218d31d529a/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 4083,
          "old_api": "ngx_pfree",
          "new_api": "ngx_http_v2_process_request_body",
          "old_text": "ngx_pfree(r->pool, buf->start)",
          "new_text": "ngx_http_v2_process_request_body(r, buf->pos,\n                                              buf->last - buf->pos, 0)",
          "old_line_content": "        ngx_pfree(r->pool, buf->start);",
          "new_line_content": "        rc = ngx_http_v2_process_request_body(r, buf->pos,",
          "content_same": false
        },
        {
          "line": 4170,
          "old_api": "ngx_http_v2_filter_request_body",
          "new_api": "ngx_log_error",
          "old_text": "ngx_http_v2_filter_request_body(r)",
          "new_text": "ngx_log_error(NGX_LOG_DEBUG, fc->log, 0,\n                              \"http2 body update chains\")",
          "old_line_content": "                rc = ngx_http_v2_filter_request_body(r);",
          "new_line_content": "                ngx_log_error(NGX_LOG_DEBUG, fc->log, 0,",
          "content_same": false
        },
        {
          "line": 4239,
          "old_api": "ngx_post_event",
          "new_api": "ngx_add_timer",
          "old_text": "ngx_post_event(fc->read, &ngx_posted_events)",
          "new_text": "ngx_add_timer(fc->read, clcf->client_body_timeout)",
          "old_line_content": "                ngx_post_event(fc->read, &ngx_posted_events);",
          "new_line_content": "            ngx_add_timer(fc->read, clcf->client_body_timeout);",
          "content_same": false
        },
        {
          "line": 4587,
          "old_api": "ngx_destroy_pool",
          "new_api": "ngx_http_free_request",
          "old_text": "ngx_destroy_pool(pool)",
          "new_text": "ngx_http_free_request(stream->request, rc)",
          "old_line_content": "        ngx_destroy_pool(pool);",
          "new_line_content": "    ngx_http_free_request(stream->request, rc);",
          "content_same": false
        },
        {
          "line": 4672,
          "old_api": "ngx_http_v2_close_stream",
          "new_api": "ngx_log_debug0",
          "old_text": "ngx_http_v2_close_stream(r->stream, 0)",
          "new_text": "ngx_log_debug0(NGX_LOG_DEBUG_HTTP, fc->log, 0,\n                   \"http2 retry close stream handler\")",
          "old_line_content": "    ngx_http_v2_close_stream(r->stream, 0);",
          "new_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_HTTP, fc->log, 0,",
          "content_same": false
        },
        {
          "line": 4723,
          "old_api": "ngx_http_v2_finalize_connection",
          "new_api": "ngx_log_debug0",
          "old_text": "ngx_http_v2_finalize_connection(h2c, NGX_HTTP_V2_NO_ERROR)",
          "new_text": "ngx_log_debug0(NGX_LOG_DEBUG_HTTP, c->log, 0, \"http2 idle handler\")",
          "old_line_content": "        ngx_http_v2_finalize_connection(h2c, NGX_HTTP_V2_NO_ERROR);",
          "new_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_HTTP, c->log, 0, \"http2 idle handler\");",
          "content_same": false
        },
        {
          "line": 4763,
          "old_api": "ngx_create_pool",
          "new_api": "ngx_http_get_module_srv_conf",
          "old_text": "ngx_create_pool(h2scf->pool_size, h2c->connection->log)",
          "new_text": "ngx_http_get_module_srv_conf(h2c->http_connection->conf_ctx,\n                                         ngx_http_v2_module)",
          "old_line_content": "    h2c->pool = ngx_create_pool(h2scf->pool_size, h2c->connection->log);",
          "new_line_content": "    h2scf = ngx_http_get_module_srv_conf(h2c->http_connection->conf_ctx,",
          "content_same": false
        },
        {
          "line": 4812,
          "old_api": "ngx_http_v2_index_size",
          "new_api": "ngx_http_get_module_srv_conf",
          "old_text": "ngx_http_v2_index_size(h2scf)",
          "new_text": "ngx_http_get_module_srv_conf(h2c->http_connection->conf_ctx,\n                                         ngx_http_v2_module)",
          "old_line_content": "    size = ngx_http_v2_index_size(h2scf);",
          "new_line_content": "    h2scf = ngx_http_get_module_srv_conf(h2c->http_connection->conf_ctx,",
          "content_same": false
        },
        {
          "line": 4876,
          "old_api": "ngx_http_v2_index_size",
          "new_api": "ngx_http_get_module_srv_conf",
          "old_text": "ngx_http_v2_index_size(h2scf)",
          "new_text": "ngx_http_get_module_srv_conf(h2c->http_connection->conf_ctx,\n                                         ngx_http_v2_module)",
          "old_line_content": "    size = ngx_http_v2_index_size(h2scf);",
          "new_line_content": "    h2scf = ngx_http_get_module_srv_conf(h2c->http_connection->conf_ctx,",
          "content_same": false
        },
        {
          "line": 4997,
          "old_api": "ngx_queue_data",
          "new_api": "ngx_queue_sentinel",
          "old_text": "ngx_queue_data(q, ngx_http_v2_node_t, queue)",
          "new_text": "ngx_queue_sentinel(children)",
          "old_line_content": "            child = ngx_queue_data(q, ngx_http_v2_node_t, queue);",
          "new_line_content": "             q != ngx_queue_sentinel(children);",
          "content_same": false
        },
        {
          "line": 5009,
          "old_api": "ngx_queue_insert_tail",
          "new_api": "ngx_queue_remove",
          "old_text": "ngx_queue_insert_tail(children, &node->queue)",
          "new_text": "ngx_queue_remove(&node->queue)",
          "old_line_content": "    ngx_queue_insert_tail(children, &node->queue);",
          "new_line_content": "        ngx_queue_remove(&node->queue);",
          "content_same": false
        },
        {
          "line": 5027,
          "old_api": "ngx_queue_data",
          "new_api": "ngx_queue_sentinel",
          "old_text": "ngx_queue_data(q, ngx_http_v2_node_t, queue)",
          "new_text": "ngx_queue_sentinel(&node->children)",
          "old_line_content": "        child = ngx_queue_data(q, ngx_http_v2_node_t, queue);",
          "new_line_content": "         q != ngx_queue_sentinel(&node->children);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 4610,
          "old_api": null,
          "new_api": "ngx_del_timer",
          "old_text": null,
          "new_text": "ngx_del_timer(ev)",
          "old_line_content": "    if (ev->posted) {",
          "new_line_content": "        ngx_del_timer(ev);",
          "content_same": false
        },
        {
          "line": 4614,
          "old_api": null,
          "new_api": "ngx_delete_posted_event",
          "old_text": null,
          "new_text": "ngx_delete_posted_event(ev)",
          "old_line_content": "    fc->data = h2c->free_fake_connections;",
          "new_line_content": "        ngx_delete_posted_event(ev);",
          "content_same": false
        },
        {
          "line": 4103,
          "old_api": null,
          "new_api": "ngx_http_v2_send_window_update",
          "old_text": null,
          "new_text": "ngx_http_v2_send_window_update(stream->connection,\n                                           stream->node->id, size)",
          "old_line_content": "        {",
          "new_line_content": "        if (ngx_http_v2_send_window_update(stream->connection,",
          "content_same": false
        },
        {
          "line": 4114,
          "old_api": null,
          "new_api": "ngx_http_v2_send_output_queue",
          "old_text": null,
          "new_text": "ngx_http_v2_send_output_queue(h2c)",
          "old_line_content": "            }",
          "new_line_content": "            if (ngx_http_v2_send_output_queue(h2c) == NGX_ERROR) {",
          "content_same": false
        },
        {
          "line": 4634,
          "old_api": null,
          "new_api": "ngx_post_event",
          "old_text": null,
          "new_text": "ngx_post_event(ev, &ngx_posted_events)",
          "old_line_content": "",
          "new_line_content": "    ngx_post_event(ev, &ngx_posted_events);",
          "content_same": false
        },
        {
          "line": 4124,
          "old_api": null,
          "new_api": "ngx_add_timer",
          "old_text": null,
          "new_text": "ngx_add_timer(r->connection->read, clcf->client_body_timeout)",
          "old_line_content": "    r->read_event_handler = ngx_http_v2_read_client_request_body_handler;",
          "new_line_content": "        ngx_add_timer(r->connection->read, clcf->client_body_timeout);",
          "content_same": false
        },
        {
          "line": 4647,
          "old_api": null,
          "new_api": "ngx_log_debug0",
          "old_text": null,
          "new_text": "ngx_log_debug0(NGX_LOG_DEBUG_HTTP, fc->log, 0,\n                   \"http2 close stream handler\")",
          "old_line_content": "    if (ev->timedout) {",
          "new_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_HTTP, fc->log, 0,",
          "content_same": false
        },
        {
          "line": 4651,
          "old_api": null,
          "new_api": "ngx_log_error",
          "old_text": null,
          "new_text": "ngx_log_error(NGX_LOG_INFO, fc->log, NGX_ETIMEDOUT, \"client timed out\")",
          "old_line_content": "",
          "new_line_content": "        ngx_log_error(NGX_LOG_INFO, fc->log, NGX_ETIMEDOUT, \"client timed out\");",
          "content_same": false
        },
        {
          "line": 4655,
          "old_api": null,
          "new_api": "ngx_http_v2_close_stream",
          "old_text": null,
          "new_text": "ngx_http_v2_close_stream(r->stream, NGX_HTTP_REQUEST_TIME_OUT)",
          "old_line_content": "",
          "new_line_content": "        ngx_http_v2_close_stream(r->stream, NGX_HTTP_REQUEST_TIME_OUT);",
          "content_same": false
        },
        {
          "line": 4147,
          "old_api": null,
          "new_api": "ngx_log_debug0",
          "old_text": null,
          "new_text": "ngx_log_debug0(NGX_LOG_DEBUG_HTTP, fc->log, 0,\n                   \"http2 process request body\")",
          "old_line_content": "    if (size == 0 && !last) {",
          "new_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_HTTP, fc->log, 0,",
          "content_same": false
        },
        {
          "line": 4659,
          "old_api": null,
          "new_api": "ngx_http_v2_close_stream",
          "old_text": null,
          "new_text": "ngx_http_v2_close_stream(r->stream, 0)",
          "old_line_content": "",
          "new_line_content": "    ngx_http_v2_close_stream(r->stream, 0);",
          "content_same": false
        },
        {
          "line": 4162,
          "old_api": null,
          "new_api": "ngx_log_error",
          "old_text": null,
          "new_text": "ngx_log_error(NGX_LOG_ALERT, fc->log, 0,\n                                  \"no space in http2 body buffer\")",
          "old_line_content": "                    return NGX_HTTP_INTERNAL_SERVER_ERROR;",
          "new_line_content": "                    ngx_log_error(NGX_LOG_ALERT, fc->log, 0,",
          "content_same": false
        },
        {
          "line": 4675,
          "old_api": null,
          "new_api": "ngx_http_v2_close_stream",
          "old_text": null,
          "new_text": "ngx_http_v2_close_stream(r->stream, 0)",
          "old_line_content": "",
          "new_line_content": "    ngx_http_v2_close_stream(r->stream, 0);",
          "content_same": false
        },
        {
          "line": 4173,
          "old_api": null,
          "new_api": "ngx_http_v2_filter_request_body",
          "old_text": null,
          "new_text": "ngx_http_v2_filter_request_body(r)",
          "old_line_content": "                    return rc;",
          "new_line_content": "                rc = ngx_http_v2_filter_request_body(r);",
          "content_same": false
        },
        {
          "line": 4685,
          "old_api": null,
          "new_api": "ngx_log_debug0",
          "old_text": null,
          "new_text": "ngx_log_debug0(NGX_LOG_DEBUG_HTTP, rev->log, 0,\n                   \"http2 handle connection handler\")",
          "old_line_content": "    c = rev->data;",
          "new_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_HTTP, rev->log, 0,",
          "content_same": false
        },
        {
          "line": 4180,
          "old_api": null,
          "new_api": "ngx_log_error",
          "old_text": null,
          "new_text": "ngx_log_error(NGX_LOG_ALERT, fc->log, 0,\n                                  \"busy buffers after request body flush\")",
          "old_line_content": "                }",
          "new_line_content": "                    ngx_log_error(NGX_LOG_ALERT, fc->log, 0,",
          "content_same": false
        },
        {
          "line": 4692,
          "old_api": null,
          "new_api": "ngx_http_v2_finalize_connection",
          "old_text": null,
          "new_text": "ngx_http_v2_finalize_connection(h2c, 0)",
          "old_line_content": "",
          "new_line_content": "        ngx_http_v2_finalize_connection(h2c, 0);",
          "content_same": false
        },
        {
          "line": 4699,
          "old_api": null,
          "new_api": "ngx_http_v2_read_handler",
          "old_text": null,
          "new_text": "ngx_http_v2_read_handler(rev)",
          "old_line_content": "",
          "new_line_content": "        ngx_http_v2_read_handler(rev);",
          "content_same": false
        },
        {
          "line": 4703,
          "old_api": null,
          "new_api": "ngx_http_v2_send_output_queue",
          "old_text": null,
          "new_text": "ngx_http_v2_send_output_queue(h2c)",
          "old_line_content": "    }",
          "new_line_content": "    if (h2c->last_out && ngx_http_v2_send_output_queue(h2c) == NGX_ERROR) {",
          "content_same": false
        },
        {
          "line": 4704,
          "old_api": null,
          "new_api": "ngx_http_v2_finalize_connection",
          "old_text": null,
          "new_text": "ngx_http_v2_finalize_connection(h2c, 0)",
          "old_line_content": "",
          "new_line_content": "        ngx_http_v2_finalize_connection(h2c, 0);",
          "content_same": false
        },
        {
          "line": 4708,
          "old_api": null,
          "new_api": "ngx_http_v2_handle_connection",
          "old_text": null,
          "new_text": "ngx_http_v2_handle_connection(c->data)",
          "old_line_content": "",
          "new_line_content": "    ngx_http_v2_handle_connection(c->data);",
          "content_same": false
        },
        {
          "line": 4197,
          "old_api": null,
          "new_api": "ngx_cpymem",
          "old_text": null,
          "new_text": "ngx_cpymem(rb->buf->last, pos, n)",
          "old_line_content": "                           \"http2 request body recv %uz\", n);",
          "new_line_content": "            rb->buf->last = ngx_cpymem(rb->buf->last, pos, n);",
          "content_same": false
        },
        {
          "line": 4199,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_HTTP, fc->log, 0,\n                           \"http2 request body recv %uz\", n)",
          "old_line_content": "            pos += n;",
          "new_line_content": "            ngx_log_debug1(NGX_LOG_DEBUG_HTTP, fc->log, 0,",
          "content_same": false
        },
        {
          "line": 4726,
          "old_api": null,
          "new_api": "ngx_http_v2_finalize_connection",
          "old_text": null,
          "new_text": "ngx_http_v2_finalize_connection(h2c, NGX_HTTP_V2_NO_ERROR)",
          "old_line_content": "",
          "new_line_content": "        ngx_http_v2_finalize_connection(h2c, NGX_HTTP_V2_NO_ERROR);",
          "content_same": false
        },
        {
          "line": 4215,
          "old_api": null,
          "new_api": "ngx_http_v2_filter_request_body",
          "old_text": null,
          "new_text": "ngx_http_v2_filter_request_body(r)",
          "old_line_content": "                return rc;",
          "new_line_content": "            rc = ngx_http_v2_filter_request_body(r);",
          "content_same": false
        },
        {
          "line": 4735,
          "old_api": null,
          "new_api": "ngx_log_error",
          "old_text": null,
          "new_text": "ngx_log_error(NGX_LOG_INFO, c->log, rev->kq_errno,\n                          \"kevent() reported that client %V closed \"\n                          \"idle connection\", &c->addr_text)",
          "old_line_content": "#if (NGX_HTTP_SSL)",
          "new_line_content": "            ngx_log_error(NGX_LOG_INFO, c->log, rev->kq_errno,",
          "content_same": false
        },
        {
          "line": 4230,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_HTTP, fc->log, 0,\n                       \"http2 request body rest %O\", rb->rest)",
          "old_line_content": "        if (rb->rest == 0) {",
          "new_line_content": "        ngx_log_debug1(NGX_LOG_DEBUG_HTTP, fc->log, 0,",
          "content_same": false
        },
        {
          "line": 4743,
          "old_api": null,
          "new_api": "ngx_http_close_connection",
          "old_text": null,
          "new_text": "ngx_http_close_connection(c)",
          "old_line_content": "    }",
          "new_line_content": "            ngx_http_close_connection(c);",
          "content_same": false
        },
        {
          "line": 4238,
          "old_api": null,
          "new_api": "ngx_http_get_module_loc_conf",
          "old_text": null,
          "new_text": "ngx_http_get_module_loc_conf(r, ngx_http_core_module)",
          "old_line_content": "            if (r->request_body_no_buffering) {",
          "new_line_content": "            clcf = ngx_http_get_module_loc_conf(r, ngx_http_core_module);",
          "content_same": false
        },
        {
          "line": 4750,
          "old_api": null,
          "new_api": "ngx_http_get_module_loc_conf",
          "old_text": null,
          "new_text": "ngx_http_get_module_loc_conf(h2c->http_connection->conf_ctx,\n                                        ngx_http_core_module)",
          "old_line_content": "    if (h2c->idle++ > 10 * clcf->keepalive_requests) {",
          "new_line_content": "    clcf = ngx_http_get_module_loc_conf(h2c->http_connection->conf_ctx,",
          "content_same": false
        },
        {
          "line": 4242,
          "old_api": null,
          "new_api": "ngx_post_event",
          "old_text": null,
          "new_text": "ngx_post_event(fc->read, &ngx_posted_events)",
          "old_line_content": "",
          "new_line_content": "                ngx_post_event(fc->read, &ngx_posted_events);",
          "content_same": false
        },
        {
          "line": 4754,
          "old_api": null,
          "new_api": "ngx_log_error",
          "old_text": null,
          "new_text": "ngx_log_error(NGX_LOG_INFO, h2c->connection->log, 0,\n                      \"http2 flood detected\")",
          "old_line_content": "        return;",
          "new_line_content": "        ngx_log_error(NGX_LOG_INFO, h2c->connection->log, 0,",
          "content_same": false
        },
        {
          "line": 4756,
          "old_api": null,
          "new_api": "ngx_http_v2_finalize_connection",
          "old_text": null,
          "new_text": "ngx_http_v2_finalize_connection(h2c, NGX_HTTP_V2_NO_ERROR)",
          "old_line_content": "",
          "new_line_content": "        ngx_http_v2_finalize_connection(h2c, NGX_HTTP_V2_NO_ERROR);",
          "content_same": false
        },
        {
          "line": 4761,
          "old_api": null,
          "new_api": "ngx_reusable_connection",
          "old_text": null,
          "new_text": "ngx_reusable_connection(c, 0)",
          "old_line_content": "                                         ngx_http_v2_module);",
          "new_line_content": "    ngx_reusable_connection(c, 0);",
          "content_same": false
        },
        {
          "line": 4251,
          "old_api": null,
          "new_api": "ngx_del_timer",
          "old_text": null,
          "new_text": "ngx_del_timer(fc->read)",
          "old_line_content": "    if (r->request_body_no_buffering) {",
          "new_line_content": "        ngx_del_timer(fc->read);",
          "content_same": false
        },
        {
          "line": 4766,
          "old_api": null,
          "new_api": "ngx_create_pool",
          "old_text": null,
          "new_text": "ngx_create_pool(h2scf->pool_size, h2c->connection->log)",
          "old_line_content": "        return;",
          "new_line_content": "    h2c->pool = ngx_create_pool(h2scf->pool_size, h2c->connection->log);",
          "content_same": false
        },
        {
          "line": 4255,
          "old_api": null,
          "new_api": "ngx_post_event",
          "old_text": null,
          "new_text": "ngx_post_event(fc->read, &ngx_posted_events)",
          "old_line_content": "",
          "new_line_content": "        ngx_post_event(fc->read, &ngx_posted_events);",
          "content_same": false
        },
        {
          "line": 4768,
          "old_api": null,
          "new_api": "ngx_http_v2_finalize_connection",
          "old_text": null,
          "new_text": "ngx_http_v2_finalize_connection(h2c, NGX_HTTP_V2_INTERNAL_ERROR)",
          "old_line_content": "",
          "new_line_content": "        ngx_http_v2_finalize_connection(h2c, NGX_HTTP_V2_INTERNAL_ERROR);",
          "content_same": false
        },
        {
          "line": 4775,
          "old_api": null,
          "new_api": "ngx_http_v2_read_handler",
          "old_text": null,
          "new_text": "ngx_http_v2_read_handler(rev)",
          "old_line_content": "",
          "new_line_content": "    ngx_http_v2_read_handler(rev);",
          "content_same": false
        },
        {
          "line": 4264,
          "old_api": null,
          "new_api": "post_handler",
          "old_text": null,
          "new_text": "rb->post_handler(r)",
          "old_line_content": "}",
          "new_line_content": "    rb->post_handler(r);",
          "content_same": false
        },
        {
          "line": 4798,
          "old_api": null,
          "new_api": "ngx_http_v2_send_goaway",
          "old_text": null,
          "new_text": "ngx_http_v2_send_goaway(h2c, status)",
          "old_line_content": "    }",
          "new_line_content": "        if (ngx_http_v2_send_goaway(h2c, status) != NGX_ERROR) {",
          "content_same": false
        },
        {
          "line": 4287,
          "old_api": null,
          "new_api": "ngx_chain_get_free_buf",
          "old_text": null,
          "new_text": "ngx_chain_get_free_buf(r->pool, &rb->free)",
          "old_line_content": "    }",
          "new_line_content": "    cl = ngx_chain_get_free_buf(r->pool, &rb->free);",
          "content_same": false
        },
        {
          "line": 4799,
          "old_api": null,
          "new_api": "ngx_http_v2_send_output_queue",
          "old_text": null,
          "new_text": "ngx_http_v2_send_output_queue(h2c)",
          "old_line_content": "",
          "new_line_content": "            (void) ngx_http_v2_send_output_queue(h2c);",
          "content_same": false
        },
        {
          "line": 4294,
          "old_api": null,
          "new_api": "ngx_memzero",
          "old_text": null,
          "new_text": "ngx_memzero(b, sizeof(ngx_buf_t))",
          "old_line_content": "        r->request_length += buf->last - buf->pos;",
          "new_line_content": "    ngx_memzero(b, sizeof(ngx_buf_t));",
          "content_same": false
        },
        {
          "line": 4302,
          "old_api": null,
          "new_api": "ngx_log_error",
          "old_text": null,
          "new_text": "ngx_log_error(NGX_LOG_INFO, r->connection->log, 0,\n                              \"client intended to send body data \"\n                              \"larger than declared\")",
          "old_line_content": "",
          "new_line_content": "                ngx_log_error(NGX_LOG_INFO, r->connection->log, 0,",
          "content_same": false
        },
        {
          "line": 4815,
          "old_api": null,
          "new_api": "ngx_http_v2_index_size",
          "old_text": null,
          "new_text": "ngx_http_v2_index_size(h2scf)",
          "old_line_content": "",
          "new_line_content": "    size = ngx_http_v2_index_size(h2scf);",
          "content_same": false
        },
        {
          "line": 4310,
          "old_api": null,
          "new_api": "ngx_http_get_module_loc_conf",
          "old_text": null,
          "new_text": "ngx_http_get_module_loc_conf(r, ngx_http_core_module)",
          "old_line_content": "                && rb->received > clcf->client_max_body_size)",
          "new_line_content": "            clcf = ngx_http_get_module_loc_conf(r, ngx_http_core_module);",
          "content_same": false
        },
        {
          "line": 4315,
          "old_api": null,
          "new_api": "ngx_log_error",
          "old_text": null,
          "new_text": "ngx_log_error(NGX_LOG_ERR, r->connection->log, 0,\n                              \"client intended to send too large chunked body: \"\n                              \"%O bytes\", rb->received)",
          "old_line_content": "",
          "new_line_content": "                ngx_log_error(NGX_LOG_ERR, r->connection->log, 0,",
          "content_same": false
        },
        {
          "line": 4845,
          "old_api": null,
          "new_api": "handler",
          "old_text": null,
          "new_text": "ev->handler(ev)",
          "old_line_content": "",
          "new_line_content": "            ev->handler(ev);",
          "content_same": false
        },
        {
          "line": 4336,
          "old_api": null,
          "new_api": "ngx_log_error",
          "old_text": null,
          "new_text": "ngx_log_error(NGX_LOG_INFO, r->connection->log, 0,\n                          \"client prematurely closed stream: \"\n                          \"only %O out of %O bytes of request body received\",\n                          rb->received, r->headers_in.content_length_n)",
          "old_line_content": "                          rb->received, r->headers_in.content_length_n);",
          "new_line_content": "            ngx_log_error(NGX_LOG_INFO, r->connection->log, 0,",
          "content_same": false
        },
        {
          "line": 4859,
          "old_api": null,
          "new_api": "ngx_http_close_connection",
          "old_text": null,
          "new_text": "ngx_http_close_connection(c)",
          "old_line_content": "",
          "new_line_content": "        ngx_http_close_connection(c);",
          "content_same": false
        },
        {
          "line": 4863,
          "old_api": null,
          "new_api": "ngx_http_v2_lingering_close",
          "old_text": null,
          "new_text": "ngx_http_v2_lingering_close(c)",
          "old_line_content": "",
          "new_line_content": "    ngx_http_v2_lingering_close(c);",
          "content_same": false
        },
        {
          "line": 4352,
          "old_api": null,
          "new_api": "ngx_http_top_request_body_filter",
          "old_text": null,
          "new_text": "ngx_http_top_request_body_filter(r, cl)",
          "old_line_content": "                            (ngx_buf_tag_t) &ngx_http_v2_filter_request_body);",
          "new_line_content": "    rc = ngx_http_top_request_body_filter(r, cl);",
          "content_same": false
        },
        {
          "line": 4354,
          "old_api": null,
          "new_api": "ngx_chain_update_chains",
          "old_text": null,
          "new_text": "ngx_chain_update_chains(r->pool, &rb->free, &rb->busy, &cl,\n                            (ngx_buf_tag_t) &ngx_http_v2_filter_request_body)",
          "old_line_content": "    return rc;",
          "new_line_content": "    ngx_chain_update_chains(r->pool, &rb->free, &rb->busy, &cl,",
          "content_same": false
        },
        {
          "line": 4879,
          "old_api": null,
          "new_api": "ngx_http_v2_index_size",
          "old_text": null,
          "new_text": "ngx_http_v2_index_size(h2scf)",
          "old_line_content": "",
          "new_line_content": "    size = ngx_http_v2_index_size(h2scf);",
          "content_same": false
        },
        {
          "line": 4368,
          "old_api": null,
          "new_api": "ngx_log_debug0",
          "old_text": null,
          "new_text": "ngx_log_debug0(NGX_LOG_DEBUG_HTTP, fc->log, 0,\n                   \"http2 read client request body handler\")",
          "old_line_content": "    if (fc->read->timedout) {",
          "new_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_HTTP, fc->log, 0,",
          "content_same": false
        },
        {
          "line": 4372,
          "old_api": null,
          "new_api": "ngx_log_error",
          "old_text": null,
          "new_text": "ngx_log_error(NGX_LOG_INFO, fc->log, NGX_ETIMEDOUT, \"client timed out\")",
          "old_line_content": "        r->stream->skip_data = 1;",
          "new_line_content": "        ngx_log_error(NGX_LOG_INFO, fc->log, NGX_ETIMEDOUT, \"client timed out\");",
          "content_same": false
        },
        {
          "line": 4377,
          "old_api": null,
          "new_api": "ngx_http_finalize_request",
          "old_text": null,
          "new_text": "ngx_http_finalize_request(r, NGX_HTTP_REQUEST_TIME_OUT)",
          "old_line_content": "",
          "new_line_content": "        ngx_http_finalize_request(r, NGX_HTTP_REQUEST_TIME_OUT);",
          "content_same": false
        },
        {
          "line": 4382,
          "old_api": null,
          "new_api": "ngx_log_error",
          "old_text": null,
          "new_text": "ngx_log_error(NGX_LOG_INFO, fc->log, 0,\n                      \"client prematurely closed stream\")",
          "old_line_content": "        r->stream->skip_data = 1;",
          "new_line_content": "        ngx_log_error(NGX_LOG_INFO, fc->log, 0,",
          "content_same": false
        },
        {
          "line": 4894,
          "old_api": null,
          "new_api": "ngx_http_v2_terminate_stream",
          "old_text": null,
          "new_text": "ngx_http_v2_terminate_stream(h2c, stream,\n                                                 NGX_HTTP_V2_FLOW_CTRL_ERROR)",
          "old_line_content": "                {",
          "new_line_content": "                if (ngx_http_v2_terminate_stream(h2c, stream,",
          "content_same": false
        },
        {
          "line": 4387,
          "old_api": null,
          "new_api": "ngx_http_finalize_request",
          "old_text": null,
          "new_text": "ngx_http_finalize_request(r, NGX_HTTP_CLIENT_CLOSED_REQUEST)",
          "old_line_content": "}",
          "new_line_content": "        ngx_http_finalize_request(r, NGX_HTTP_CLIENT_CLOSED_REQUEST);",
          "content_same": false
        },
        {
          "line": 4906,
          "old_api": null,
          "new_api": "ngx_log_debug2",
          "old_text": null,
          "new_text": "ngx_log_debug2(NGX_LOG_DEBUG_HTTP, h2c->connection->log, 0,\n                           \"http2:%ui adjusted window: %z\",\n                           node->id, stream->send_window)",
          "old_line_content": "",
          "new_line_content": "            ngx_log_debug2(NGX_LOG_DEBUG_HTTP, h2c->connection->log, 0,",
          "content_same": false
        },
        {
          "line": 4407,
          "old_api": null,
          "new_api": "ngx_log_debug0",
          "old_text": null,
          "new_text": "ngx_log_debug0(NGX_LOG_DEBUG_HTTP, fc->log, 0,\n                   \"http2 read unbuffered request body\")",
          "old_line_content": "    if (fc->read->timedout) {",
          "new_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_HTTP, fc->log, 0,",
          "content_same": false
        },
        {
          "line": 4919,
          "old_api": null,
          "new_api": "handler",
          "old_text": null,
          "new_text": "wev->handler(wev)",
          "old_line_content": "        }",
          "new_line_content": "                    wev->handler(wev);",
          "content_same": false
        },
        {
          "line": 4936,
          "old_api": null,
          "new_api": "ngx_http_v2_get_node_by_id",
          "old_text": null,
          "new_text": "ngx_http_v2_get_node_by_id(h2c, depend, 0)",
          "old_line_content": "        parent = NGX_HTTP_V2_ROOT;",
          "new_line_content": "    parent = depend ? ngx_http_v2_get_node_by_id(h2c, depend, 0) : NULL;",
          "content_same": false
        },
        {
          "line": 4426,
          "old_api": null,
          "new_api": "ngx_http_v2_filter_request_body",
          "old_text": null,
          "new_text": "ngx_http_v2_filter_request_body(r)",
          "old_line_content": "        stream->skip_data = 1;",
          "new_line_content": "    rc = ngx_http_v2_filter_request_body(r);",
          "content_same": false
        },
        {
          "line": 4961,
          "old_api": null,
          "new_api": "ngx_queue_remove",
          "old_text": null,
          "new_text": "ngx_queue_remove(&parent->queue)",
          "old_line_content": "                parent->parent = node->parent;",
          "new_line_content": "                ngx_queue_remove(&parent->queue);",
          "content_same": false
        },
        {
          "line": 4962,
          "old_api": null,
          "new_api": "ngx_queue_insert_after",
          "old_text": null,
          "new_text": "ngx_queue_insert_after(&node->queue, &parent->queue)",
          "old_line_content": "",
          "new_line_content": "                ngx_queue_insert_after(&node->queue, &parent->queue);",
          "content_same": false
        },
        {
          "line": 4455,
          "old_api": null,
          "new_api": "ngx_log_error",
          "old_text": null,
          "new_text": "ngx_log_error(NGX_LOG_ALERT, r->connection->log, 0,\n                          \"http2 negative window update\")",
          "old_line_content": "            return NGX_HTTP_INTERNAL_SERVER_ERROR;",
          "new_line_content": "            ngx_log_error(NGX_LOG_ALERT, r->connection->log, 0,",
          "content_same": false
        },
        {
          "line": 4464,
          "old_api": null,
          "new_api": "ngx_http_v2_send_window_update",
          "old_text": null,
          "new_text": "ngx_http_v2_send_window_update(h2c, stream->node->id,\n                                       window - stream->recv_window)",
          "old_line_content": "    {",
          "new_line_content": "    if (ngx_http_v2_send_window_update(h2c, stream->node->id,",
          "content_same": false
        },
        {
          "line": 4977,
          "old_api": null,
          "new_api": "ngx_http_v2_node_children_update",
          "old_text": null,
          "new_text": "ngx_http_v2_node_children_update(parent)",
          "old_line_content": "                break;",
          "new_line_content": "                    ngx_http_v2_node_children_update(parent);",
          "content_same": false
        },
        {
          "line": 4472,
          "old_api": null,
          "new_api": "ngx_http_v2_send_output_queue",
          "old_text": null,
          "new_text": "ngx_http_v2_send_output_queue(h2c)",
          "old_line_content": "    }",
          "new_line_content": "    if (ngx_http_v2_send_output_queue(h2c) == NGX_ERROR) {",
          "content_same": false
        },
        {
          "line": 4988,
          "old_api": null,
          "new_api": "ngx_queue_remove",
          "old_text": null,
          "new_text": "ngx_queue_remove(&parent->reuse)",
          "old_line_content": "",
          "new_line_content": "            ngx_queue_remove(&parent->reuse);",
          "content_same": false
        },
        {
          "line": 4989,
          "old_api": null,
          "new_api": "ngx_queue_insert_tail",
          "old_text": null,
          "new_text": "ngx_queue_insert_tail(&h2c->closed, &parent->reuse)",
          "old_line_content": "        children = &parent->children;",
          "new_line_content": "            ngx_queue_insert_tail(&h2c->closed, &parent->reuse);",
          "content_same": false
        },
        {
          "line": 4478,
          "old_api": null,
          "new_api": "ngx_http_get_module_loc_conf",
          "old_text": null,
          "new_text": "ngx_http_get_module_loc_conf(r, ngx_http_core_module)",
          "old_line_content": "",
          "new_line_content": "        clcf = ngx_http_get_module_loc_conf(r, ngx_http_core_module);",
          "content_same": false
        },
        {
          "line": 4479,
          "old_api": null,
          "new_api": "ngx_add_timer",
          "old_text": null,
          "new_text": "ngx_add_timer(fc->read, clcf->client_body_timeout)",
          "old_line_content": "    stream->recv_window = window;",
          "new_line_content": "        ngx_add_timer(fc->read, clcf->client_body_timeout);",
          "content_same": false
        },
        {
          "line": 4996,
          "old_api": null,
          "new_api": "ngx_queue_head",
          "old_text": null,
          "new_text": "ngx_queue_head(children)",
          "old_line_content": "        {",
          "new_line_content": "        for (q = ngx_queue_head(children);",
          "content_same": false
        },
        {
          "line": 4998,
          "old_api": null,
          "new_api": "ngx_queue_next",
          "old_text": null,
          "new_text": "ngx_queue_next(q)",
          "old_line_content": "            child->parent = node;",
          "new_line_content": "             q = ngx_queue_next(q))",
          "content_same": false
        },
        {
          "line": 5000,
          "old_api": null,
          "new_api": "ngx_queue_data",
          "old_text": null,
          "new_text": "ngx_queue_data(q, ngx_http_v2_node_t, queue)",
          "old_line_content": "",
          "new_line_content": "            child = ngx_queue_data(q, ngx_http_v2_node_t, queue);",
          "content_same": false
        },
        {
          "line": 5004,
          "old_api": null,
          "new_api": "ngx_queue_add",
          "old_text": null,
          "new_text": "ngx_queue_add(&node->children, children)",
          "old_line_content": "",
          "new_line_content": "        ngx_queue_add(&node->children, children);",
          "content_same": false
        },
        {
          "line": 5005,
          "old_api": null,
          "new_api": "ngx_queue_init",
          "old_text": null,
          "new_text": "ngx_queue_init(children)",
          "old_line_content": "    if (node->parent != NULL) {",
          "new_line_content": "        ngx_queue_init(children);",
          "content_same": false
        },
        {
          "line": 4499,
          "old_api": null,
          "new_api": "ngx_http_v2_send_rst_stream",
          "old_text": null,
          "new_text": "ngx_http_v2_send_rst_stream(h2c, stream->node->id, status)",
          "old_line_content": "        return NGX_ERROR;",
          "new_line_content": "    if (ngx_http_v2_send_rst_stream(h2c, stream->node->id, status)",
          "content_same": false
        },
        {
          "line": 5012,
          "old_api": null,
          "new_api": "ngx_queue_insert_tail",
          "old_text": null,
          "new_text": "ngx_queue_insert_tail(children, &node->queue)",
          "old_line_content": "",
          "new_line_content": "    ngx_queue_insert_tail(children, &node->queue);",
          "content_same": false
        },
        {
          "line": 5016,
          "old_api": null,
          "new_api": "ngx_http_v2_node_children_update",
          "old_text": null,
          "new_text": "ngx_http_v2_node_children_update(node)",
          "old_line_content": "",
          "new_line_content": "    ngx_http_v2_node_children_update(node);",
          "content_same": false
        },
        {
          "line": 4512,
          "old_api": null,
          "new_api": "handler",
          "old_text": null,
          "new_text": "rev->handler(rev)",
          "old_line_content": "}",
          "new_line_content": "    rev->handler(rev);",
          "content_same": false
        },
        {
          "line": 5026,
          "old_api": null,
          "new_api": "ngx_queue_head",
          "old_text": null,
          "new_text": "ngx_queue_head(&node->children)",
          "old_line_content": "    {",
          "new_line_content": "    for (q = ngx_queue_head(&node->children);",
          "content_same": false
        },
        {
          "line": 5028,
          "old_api": null,
          "new_api": "ngx_queue_next",
          "old_text": null,
          "new_text": "ngx_queue_next(q)",
          "old_line_content": "",
          "new_line_content": "         q = ngx_queue_next(q))",
          "content_same": false
        },
        {
          "line": 5030,
          "old_api": null,
          "new_api": "ngx_queue_data",
          "old_text": null,
          "new_text": "ngx_queue_data(q, ngx_http_v2_node_t, queue)",
          "old_line_content": "        child->rel_weight = (node->rel_weight / 256) * child->weight;",
          "new_line_content": "        child = ngx_queue_data(q, ngx_http_v2_node_t, queue);",
          "content_same": false
        },
        {
          "line": 5035,
          "old_api": null,
          "new_api": "ngx_http_v2_node_children_update",
          "old_text": null,
          "new_text": "ngx_http_v2_node_children_update(child)",
          "old_line_content": "",
          "new_line_content": "        ngx_http_v2_node_children_update(child);",
          "content_same": false
        },
        {
          "line": 4531,
          "old_api": null,
          "new_api": "ngx_log_debug4",
          "old_text": null,
          "new_text": "ngx_log_debug4(NGX_LOG_DEBUG_HTTP, h2c->connection->log, 0,\n                   \"http2 close stream %ui, queued %ui, \"\n                   \"processing %ui, pushing %ui\",\n                   node->id, stream->queued, h2c->processing, h2c->pushing)",
          "old_line_content": "                   node->id, stream->queued, h2c->processing, h2c->pushing);",
          "new_line_content": "    ngx_log_debug4(NGX_LOG_DEBUG_HTTP, h2c->connection->log, 0,",
          "content_same": false
        },
        {
          "line": 5046,
          "old_api": null,
          "new_api": "ngx_destroy_pool",
          "old_text": null,
          "new_text": "ngx_destroy_pool(h2c->state.pool)",
          "old_line_content": "    if (h2c->pool) {",
          "new_line_content": "        ngx_destroy_pool(h2c->state.pool);",
          "content_same": false
        },
        {
          "line": 5050,
          "old_api": null,
          "new_api": "ngx_destroy_pool",
          "old_text": null,
          "new_text": "ngx_destroy_pool(h2c->pool)",
          "old_line_content": "",
          "new_line_content": "        ngx_destroy_pool(h2c->pool);",
          "content_same": false
        },
        {
          "line": 4548,
          "old_api": null,
          "new_api": "ngx_http_v2_send_rst_stream",
          "old_text": null,
          "new_text": "ngx_http_v2_send_rst_stream(h2c, node->id,\n                                      fc->timedout ? NGX_HTTP_V2_PROTOCOL_ERROR\n                                                   : NGX_HTTP_V2_INTERNAL_ERROR)",
          "old_line_content": "                != NGX_OK)",
          "new_line_content": "            if (ngx_http_v2_send_rst_stream(h2c, node->id,",
          "content_same": false
        },
        {
          "line": 4557,
          "old_api": null,
          "new_api": "ngx_http_v2_send_rst_stream",
          "old_text": null,
          "new_text": "ngx_http_v2_send_rst_stream(h2c, node->id, NGX_HTTP_V2_NO_ERROR)",
          "old_line_content": "                h2c->connection->error = 1;",
          "new_line_content": "            if (ngx_http_v2_send_rst_stream(h2c, node->id, NGX_HTTP_V2_NO_ERROR)",
          "content_same": false
        },
        {
          "line": 4058,
          "old_api": null,
          "new_api": "ngx_create_temp_buf",
          "old_text": null,
          "new_text": "ngx_create_temp_buf(r->pool, (size_t) len)",
          "old_line_content": "        stream->skip_data = 1;",
          "new_line_content": "    rb->buf = ngx_create_temp_buf(r->pool, (size_t) len);",
          "content_same": false
        },
        {
          "line": 4573,
          "old_api": null,
          "new_api": "ngx_queue_insert_tail",
          "old_text": null,
          "new_text": "ngx_queue_insert_tail(&h2c->closed, &node->reuse)",
          "old_line_content": "    /*",
          "new_line_content": "    ngx_queue_insert_tail(&h2c->closed, &node->reuse);",
          "content_same": false
        },
        {
          "line": 4073,
          "old_api": null,
          "new_api": "ngx_http_v2_process_request_body",
          "old_text": null,
          "new_text": "ngx_http_v2_process_request_body(r, buf->pos,\n                                                  buf->last - buf->pos, 1)",
          "old_line_content": "            return rc;",
          "new_line_content": "            rc = ngx_http_v2_process_request_body(r, buf->pos,",
          "content_same": false
        },
        {
          "line": 4075,
          "old_api": null,
          "new_api": "ngx_pfree",
          "old_text": null,
          "new_text": "ngx_pfree(r->pool, buf->start)",
          "old_line_content": "",
          "new_line_content": "            ngx_pfree(r->pool, buf->start);",
          "content_same": false
        },
        {
          "line": 4590,
          "old_api": null,
          "new_api": "ngx_destroy_pool",
          "old_text": null,
          "new_text": "ngx_destroy_pool(pool)",
          "old_line_content": "        /* pool will be destroyed when the complete header is parsed */",
          "new_line_content": "        ngx_destroy_pool(pool);",
          "content_same": false
        },
        {
          "line": 4079,
          "old_api": null,
          "new_api": "ngx_http_v2_process_request_body",
          "old_text": null,
          "new_text": "ngx_http_v2_process_request_body(r, NULL, 0, 1)",
          "old_line_content": "    if (buf) {",
          "new_line_content": "        return ngx_http_v2_process_request_body(r, NULL, 0, 1);",
          "content_same": false
        },
        {
          "line": 4086,
          "old_api": null,
          "new_api": "ngx_pfree",
          "old_text": null,
          "new_text": "ngx_pfree(r->pool, buf->start)",
          "old_line_content": "            stream->skip_data = 1;",
          "new_line_content": "        ngx_pfree(r->pool, buf->start);",
          "content_same": false
        },
        {
          "line": 4600,
          "old_api": null,
          "new_api": "ngx_del_timer",
          "old_text": null,
          "new_text": "ngx_del_timer(ev)",
          "old_line_content": "    if (ev->posted) {",
          "new_line_content": "        ngx_del_timer(ev);",
          "content_same": false
        },
        {
          "line": 4604,
          "old_api": null,
          "new_api": "ngx_delete_posted_event",
          "old_text": null,
          "new_text": "ngx_delete_posted_event(ev)",
          "old_line_content": "    ev = fc->write;",
          "new_line_content": "        ngx_delete_posted_event(ev);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 4611,
          "old_api": "ngx_delete_posted_event",
          "new_api": null,
          "old_text": "ngx_delete_posted_event(ev)",
          "new_text": null,
          "old_line_content": "        ngx_delete_posted_event(ev);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4100,
          "old_api": "ngx_http_v2_send_window_update",
          "new_api": null,
          "old_text": "ngx_http_v2_send_window_update(stream->connection,\n                                           stream->node->id, size)",
          "new_text": null,
          "old_line_content": "        if (ngx_http_v2_send_window_update(stream->connection,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4111,
          "old_api": "ngx_http_v2_send_output_queue",
          "new_api": null,
          "old_text": "ngx_http_v2_send_output_queue(h2c)",
          "new_text": null,
          "old_line_content": "            if (ngx_http_v2_send_output_queue(h2c) == NGX_ERROR) {",
          "new_line_content": "        h2c = stream->connection;",
          "content_same": false
        },
        {
          "line": 4631,
          "old_api": "ngx_post_event",
          "new_api": null,
          "old_text": "ngx_post_event(ev, &ngx_posted_events)",
          "new_text": null,
          "old_line_content": "    ngx_post_event(ev, &ngx_posted_events);",
          "new_line_content": "    ev = h2c->connection->read;",
          "content_same": false
        },
        {
          "line": 4121,
          "old_api": "ngx_add_timer",
          "new_api": null,
          "old_text": "ngx_add_timer(r->connection->read, clcf->client_body_timeout)",
          "new_text": null,
          "old_line_content": "        ngx_add_timer(r->connection->read, clcf->client_body_timeout);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4644,
          "old_api": "ngx_log_debug0",
          "new_api": null,
          "old_text": "ngx_log_debug0(NGX_LOG_DEBUG_HTTP, fc->log, 0,\n                   \"http2 close stream handler\")",
          "new_text": null,
          "old_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_HTTP, fc->log, 0,",
          "new_line_content": "    fc = ev->data;",
          "content_same": false
        },
        {
          "line": 4648,
          "old_api": "ngx_log_error",
          "new_api": null,
          "old_text": "ngx_log_error(NGX_LOG_INFO, fc->log, NGX_ETIMEDOUT, \"client timed out\")",
          "new_text": null,
          "old_line_content": "        ngx_log_error(NGX_LOG_INFO, fc->log, NGX_ETIMEDOUT, \"client timed out\");",
          "new_line_content": "                   \"http2 close stream handler\");",
          "content_same": false
        },
        {
          "line": 4652,
          "old_api": "ngx_http_v2_close_stream",
          "new_api": null,
          "old_text": "ngx_http_v2_close_stream(r->stream, NGX_HTTP_REQUEST_TIME_OUT)",
          "new_text": null,
          "old_line_content": "        ngx_http_v2_close_stream(r->stream, NGX_HTTP_REQUEST_TIME_OUT);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4144,
          "old_api": "ngx_log_debug0",
          "new_api": null,
          "old_text": "ngx_log_debug0(NGX_LOG_DEBUG_HTTP, fc->log, 0,\n                   \"http2 process request body\")",
          "new_text": null,
          "old_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_HTTP, fc->log, 0,",
          "new_line_content": "    fc = r->connection;",
          "content_same": false
        },
        {
          "line": 4656,
          "old_api": "ngx_http_v2_close_stream",
          "new_api": null,
          "old_text": "ngx_http_v2_close_stream(r->stream, 0)",
          "new_text": null,
          "old_line_content": "    ngx_http_v2_close_stream(r->stream, 0);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 4669,
          "old_api": "ngx_log_debug0",
          "new_api": null,
          "old_text": "ngx_log_debug0(NGX_LOG_DEBUG_HTTP, fc->log, 0,\n                   \"http2 retry close stream handler\")",
          "new_text": null,
          "old_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_HTTP, fc->log, 0,",
          "new_line_content": "    fc = ev->data;",
          "content_same": false
        },
        {
          "line": 4159,
          "old_api": "ngx_log_error",
          "new_api": null,
          "old_text": "ngx_log_error(NGX_LOG_ALERT, fc->log, 0,\n                                  \"no space in http2 body buffer\")",
          "new_text": null,
          "old_line_content": "                    ngx_log_error(NGX_LOG_ALERT, fc->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4167,
          "old_api": "ngx_log_error",
          "new_api": null,
          "old_text": "ngx_log_error(NGX_LOG_DEBUG, fc->log, 0,\n                              \"http2 body update chains\")",
          "new_text": null,
          "old_line_content": "                ngx_log_error(NGX_LOG_DEBUG, fc->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4682,
          "old_api": "ngx_log_debug0",
          "new_api": null,
          "old_text": "ngx_log_debug0(NGX_LOG_DEBUG_HTTP, rev->log, 0,\n                   \"http2 handle connection handler\")",
          "new_text": null,
          "old_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_HTTP, rev->log, 0,",
          "new_line_content": "    ngx_connection_t          *c;",
          "content_same": false
        },
        {
          "line": 4177,
          "old_api": "ngx_log_error",
          "new_api": null,
          "old_text": "ngx_log_error(NGX_LOG_ALERT, fc->log, 0,\n                                  \"busy buffers after request body flush\")",
          "new_text": null,
          "old_line_content": "                    ngx_log_error(NGX_LOG_ALERT, fc->log, 0,",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 4689,
          "old_api": "ngx_http_v2_finalize_connection",
          "new_api": null,
          "old_text": "ngx_http_v2_finalize_connection(h2c, 0)",
          "new_text": null,
          "old_line_content": "        ngx_http_v2_finalize_connection(h2c, 0);",
          "new_line_content": "    h2c = c->data;",
          "content_same": false
        },
        {
          "line": 4696,
          "old_api": "ngx_http_v2_read_handler",
          "new_api": null,
          "old_text": "ngx_http_v2_read_handler(rev)",
          "new_text": null,
          "old_line_content": "        ngx_http_v2_read_handler(rev);",
          "new_line_content": "    rev->handler = ngx_http_v2_read_handler;",
          "content_same": false
        },
        {
          "line": 4700,
          "old_api": "ngx_http_v2_send_output_queue",
          "new_api": null,
          "old_text": "ngx_http_v2_send_output_queue(h2c)",
          "new_text": null,
          "old_line_content": "    if (h2c->last_out && ngx_http_v2_send_output_queue(h2c) == NGX_ERROR) {",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 4701,
          "old_api": "ngx_http_v2_finalize_connection",
          "new_api": null,
          "old_text": "ngx_http_v2_finalize_connection(h2c, 0)",
          "new_text": null,
          "old_line_content": "        ngx_http_v2_finalize_connection(h2c, 0);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4705,
          "old_api": "ngx_http_v2_handle_connection",
          "new_api": null,
          "old_text": "ngx_http_v2_handle_connection(c->data)",
          "new_text": null,
          "old_line_content": "    ngx_http_v2_handle_connection(c->data);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 4194,
          "old_api": "ngx_cpymem",
          "new_api": null,
          "old_text": "ngx_cpymem(rb->buf->last, pos, n)",
          "new_text": null,
          "old_line_content": "            rb->buf->last = ngx_cpymem(rb->buf->last, pos, n);",
          "new_line_content": "                n = size;",
          "content_same": false
        },
        {
          "line": 4196,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_HTTP, fc->log, 0,\n                           \"http2 request body recv %uz\", n)",
          "new_text": null,
          "old_line_content": "            ngx_log_debug1(NGX_LOG_DEBUG_HTTP, fc->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4720,
          "old_api": "ngx_log_debug0",
          "new_api": null,
          "old_text": "ngx_log_debug0(NGX_LOG_DEBUG_HTTP, c->log, 0, \"http2 idle handler\")",
          "new_text": null,
          "old_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_HTTP, c->log, 0, \"http2 idle handler\");",
          "new_line_content": "    c = rev->data;",
          "content_same": false
        },
        {
          "line": 4212,
          "old_api": "ngx_http_v2_filter_request_body",
          "new_api": null,
          "old_text": "ngx_http_v2_filter_request_body(r)",
          "new_text": null,
          "old_line_content": "            rc = ngx_http_v2_filter_request_body(r);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4732,
          "old_api": "ngx_log_error",
          "new_api": null,
          "old_text": "ngx_log_error(NGX_LOG_INFO, c->log, rev->kq_errno,\n                          \"kevent() reported that client %V closed \"\n                          \"idle connection\", &c->addr_text)",
          "new_text": null,
          "old_line_content": "            ngx_log_error(NGX_LOG_INFO, c->log, rev->kq_errno,",
          "new_line_content": "    if (ngx_event_flags & NGX_USE_KQUEUE_EVENT) {",
          "content_same": false
        },
        {
          "line": 4227,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_HTTP, fc->log, 0,\n                       \"http2 request body rest %O\", rb->rest)",
          "new_text": null,
          "old_line_content": "        ngx_log_debug1(NGX_LOG_DEBUG_HTTP, fc->log, 0,",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 4740,
          "old_api": "ngx_http_close_connection",
          "new_api": null,
          "old_text": "ngx_http_close_connection(c)",
          "new_text": null,
          "old_line_content": "            ngx_http_close_connection(c);",
          "new_line_content": "                c->ssl->no_send_shutdown = 1;",
          "content_same": false
        },
        {
          "line": 4235,
          "old_api": "ngx_http_get_module_loc_conf",
          "new_api": null,
          "old_text": "ngx_http_get_module_loc_conf(r, ngx_http_core_module)",
          "new_text": null,
          "old_line_content": "            clcf = ngx_http_get_module_loc_conf(r, ngx_http_core_module);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4236,
          "old_api": "ngx_add_timer",
          "new_api": null,
          "old_text": "ngx_add_timer(fc->read, clcf->client_body_timeout)",
          "new_text": null,
          "old_line_content": "            ngx_add_timer(fc->read, clcf->client_body_timeout);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4747,
          "old_api": "ngx_http_get_module_loc_conf",
          "new_api": null,
          "old_text": "ngx_http_get_module_loc_conf(h2c->http_connection->conf_ctx,\n                                        ngx_http_core_module)",
          "new_text": null,
          "old_line_content": "    clcf = ngx_http_get_module_loc_conf(h2c->http_connection->conf_ctx,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4751,
          "old_api": "ngx_log_error",
          "new_api": null,
          "old_text": "ngx_log_error(NGX_LOG_INFO, h2c->connection->log, 0,\n                      \"http2 flood detected\")",
          "new_text": null,
          "old_line_content": "        ngx_log_error(NGX_LOG_INFO, h2c->connection->log, 0,",
          "new_line_content": "                                        ngx_http_core_module);",
          "content_same": false
        },
        {
          "line": 4753,
          "old_api": "ngx_http_v2_finalize_connection",
          "new_api": null,
          "old_text": "ngx_http_v2_finalize_connection(h2c, NGX_HTTP_V2_NO_ERROR)",
          "new_text": null,
          "old_line_content": "        ngx_http_v2_finalize_connection(h2c, NGX_HTTP_V2_NO_ERROR);",
          "new_line_content": "    if (h2c->idle++ > 10 * clcf->keepalive_requests) {",
          "content_same": false
        },
        {
          "line": 4758,
          "old_api": "ngx_reusable_connection",
          "new_api": null,
          "old_text": "ngx_reusable_connection(c, 0)",
          "new_text": null,
          "old_line_content": "    ngx_reusable_connection(c, 0);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4248,
          "old_api": "ngx_del_timer",
          "new_api": null,
          "old_text": "ngx_del_timer(fc->read)",
          "new_text": null,
          "old_line_content": "        ngx_del_timer(fc->read);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4760,
          "old_api": "ngx_http_get_module_srv_conf",
          "new_api": null,
          "old_text": "ngx_http_get_module_srv_conf(h2c->http_connection->conf_ctx,\n                                         ngx_http_v2_module)",
          "new_text": null,
          "old_line_content": "    h2scf = ngx_http_get_module_srv_conf(h2c->http_connection->conf_ctx,",
          "new_line_content": "    c->destroyed = 0;",
          "content_same": false
        },
        {
          "line": 4252,
          "old_api": "ngx_post_event",
          "new_api": null,
          "old_text": "ngx_post_event(fc->read, &ngx_posted_events)",
          "new_text": null,
          "old_line_content": "        ngx_post_event(fc->read, &ngx_posted_events);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4765,
          "old_api": "ngx_http_v2_finalize_connection",
          "new_api": null,
          "old_text": "ngx_http_v2_finalize_connection(h2c, NGX_HTTP_V2_INTERNAL_ERROR)",
          "new_text": null,
          "old_line_content": "        ngx_http_v2_finalize_connection(h2c, NGX_HTTP_V2_INTERNAL_ERROR);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4772,
          "old_api": "ngx_http_v2_read_handler",
          "new_api": null,
          "old_text": "ngx_http_v2_read_handler(rev)",
          "new_text": null,
          "old_line_content": "    ngx_http_v2_read_handler(rev);",
          "new_line_content": "    c->write->handler = ngx_http_v2_write_handler;",
          "content_same": false
        },
        {
          "line": 4261,
          "old_api": "post_handler",
          "new_api": null,
          "old_text": "rb->post_handler(r)",
          "new_text": null,
          "old_line_content": "    rb->post_handler(r);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4795,
          "old_api": "ngx_http_v2_send_goaway",
          "new_api": null,
          "old_text": "ngx_http_v2_send_goaway(h2c, status)",
          "new_text": null,
          "old_line_content": "        if (ngx_http_v2_send_goaway(h2c, status) != NGX_ERROR) {",
          "new_line_content": "    if (!c->error && !h2c->goaway) {",
          "content_same": false
        },
        {
          "line": 4284,
          "old_api": "ngx_chain_get_free_buf",
          "new_api": null,
          "old_text": "ngx_chain_get_free_buf(r->pool, &rb->free)",
          "new_text": null,
          "old_line_content": "    cl = ngx_chain_get_free_buf(r->pool, &rb->free);",
          "new_line_content": "        goto update;",
          "content_same": false
        },
        {
          "line": 4796,
          "old_api": "ngx_http_v2_send_output_queue",
          "new_api": null,
          "old_text": "ngx_http_v2_send_output_queue(h2c)",
          "new_text": null,
          "old_line_content": "            (void) ngx_http_v2_send_output_queue(h2c);",
          "new_line_content": "        h2c->goaway = 1;",
          "content_same": false
        },
        {
          "line": 4291,
          "old_api": "ngx_memzero",
          "new_api": null,
          "old_text": "ngx_memzero(b, sizeof(ngx_buf_t))",
          "new_text": null,
          "old_line_content": "    ngx_memzero(b, sizeof(ngx_buf_t));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4809,
          "old_api": "ngx_http_get_module_srv_conf",
          "new_api": null,
          "old_text": "ngx_http_get_module_srv_conf(h2c->http_connection->conf_ctx,\n                                         ngx_http_v2_module)",
          "new_text": null,
          "old_line_content": "    h2scf = ngx_http_get_module_srv_conf(h2c->http_connection->conf_ctx,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4299,
          "old_api": "ngx_log_error",
          "new_api": null,
          "old_text": "ngx_log_error(NGX_LOG_INFO, r->connection->log, 0,\n                              \"client intended to send body data \"\n                              \"larger than declared\")",
          "new_text": null,
          "old_line_content": "                ngx_log_error(NGX_LOG_INFO, r->connection->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4307,
          "old_api": "ngx_http_get_module_loc_conf",
          "new_api": null,
          "old_text": "ngx_http_get_module_loc_conf(r, ngx_http_core_module)",
          "new_text": null,
          "old_line_content": "            clcf = ngx_http_get_module_loc_conf(r, ngx_http_core_module);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 4312,
          "old_api": "ngx_log_error",
          "new_api": null,
          "old_text": "ngx_log_error(NGX_LOG_ERR, r->connection->log, 0,\n                              \"client intended to send too large chunked body: \"\n                              \"%O bytes\", rb->received)",
          "new_text": null,
          "old_line_content": "                ngx_log_error(NGX_LOG_ERR, r->connection->log, 0,",
          "new_line_content": "            if (clcf->client_max_body_size",
          "content_same": false
        },
        {
          "line": 4842,
          "old_api": "handler",
          "new_api": null,
          "old_text": "ev->handler(ev)",
          "new_text": null,
          "old_line_content": "            ev->handler(ev);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 4333,
          "old_api": "ngx_log_error",
          "new_api": null,
          "old_text": "ngx_log_error(NGX_LOG_INFO, r->connection->log, 0,\n                          \"client prematurely closed stream: \"\n                          \"only %O out of %O bytes of request body received\",\n                          rb->received, r->headers_in.content_length_n)",
          "new_text": null,
          "old_line_content": "            ngx_log_error(NGX_LOG_INFO, r->connection->log, 0,",
          "new_line_content": "        if (r->headers_in.content_length_n != -1",
          "content_same": false
        },
        {
          "line": 4856,
          "old_api": "ngx_http_close_connection",
          "new_api": null,
          "old_text": "ngx_http_close_connection(c)",
          "new_text": null,
          "old_line_content": "        ngx_http_close_connection(c);",
          "new_line_content": "done:",
          "content_same": false
        },
        {
          "line": 4860,
          "old_api": "ngx_http_v2_lingering_close",
          "new_api": null,
          "old_text": "ngx_http_v2_lingering_close(c)",
          "new_text": null,
          "old_line_content": "    ngx_http_v2_lingering_close(c);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 4349,
          "old_api": "ngx_http_top_request_body_filter",
          "new_api": null,
          "old_text": "ngx_http_top_request_body_filter(r, cl)",
          "new_text": null,
          "old_line_content": "    rc = ngx_http_top_request_body_filter(r, cl);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4351,
          "old_api": "ngx_chain_update_chains",
          "new_api": null,
          "old_text": "ngx_chain_update_chains(r->pool, &rb->free, &rb->busy, &cl,\n                            (ngx_buf_tag_t) &ngx_http_v2_filter_request_body)",
          "new_text": null,
          "old_line_content": "    ngx_chain_update_chains(r->pool, &rb->free, &rb->busy, &cl,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4873,
          "old_api": "ngx_http_get_module_srv_conf",
          "new_api": null,
          "old_text": "ngx_http_get_module_srv_conf(h2c->http_connection->conf_ctx,\n                                         ngx_http_v2_module)",
          "new_text": null,
          "old_line_content": "    h2scf = ngx_http_get_module_srv_conf(h2c->http_connection->conf_ctx,",
          "new_line_content": "    ngx_http_v2_stream_t    *stream;",
          "content_same": false
        },
        {
          "line": 4365,
          "old_api": "ngx_log_debug0",
          "new_api": null,
          "old_text": "ngx_log_debug0(NGX_LOG_DEBUG_HTTP, fc->log, 0,\n                   \"http2 read client request body handler\")",
          "new_text": null,
          "old_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_HTTP, fc->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4369,
          "old_api": "ngx_log_error",
          "new_api": null,
          "old_text": "ngx_log_error(NGX_LOG_INFO, fc->log, NGX_ETIMEDOUT, \"client timed out\")",
          "new_text": null,
          "old_line_content": "        ngx_log_error(NGX_LOG_INFO, fc->log, NGX_ETIMEDOUT, \"client timed out\");",
          "new_line_content": "                   \"http2 read client request body handler\");",
          "content_same": false
        },
        {
          "line": 4374,
          "old_api": "ngx_http_finalize_request",
          "new_api": null,
          "old_text": "ngx_http_finalize_request(r, NGX_HTTP_REQUEST_TIME_OUT)",
          "new_text": null,
          "old_line_content": "        ngx_http_finalize_request(r, NGX_HTTP_REQUEST_TIME_OUT);",
          "new_line_content": "        fc->timedout = 1;",
          "content_same": false
        },
        {
          "line": 4379,
          "old_api": "ngx_log_error",
          "new_api": null,
          "old_text": "ngx_log_error(NGX_LOG_INFO, fc->log, 0,\n                      \"client prematurely closed stream\")",
          "new_text": null,
          "old_line_content": "        ngx_log_error(NGX_LOG_INFO, fc->log, 0,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4891,
          "old_api": "ngx_http_v2_terminate_stream",
          "new_api": null,
          "old_text": "ngx_http_v2_terminate_stream(h2c, stream,\n                                                 NGX_HTTP_V2_FLOW_CTRL_ERROR)",
          "new_text": null,
          "old_line_content": "                if (ngx_http_v2_terminate_stream(h2c, stream,",
          "new_line_content": "                && stream->send_window",
          "content_same": false
        },
        {
          "line": 4384,
          "old_api": "ngx_http_finalize_request",
          "new_api": null,
          "old_text": "ngx_http_finalize_request(r, NGX_HTTP_CLIENT_CLOSED_REQUEST)",
          "new_text": null,
          "old_line_content": "        ngx_http_finalize_request(r, NGX_HTTP_CLIENT_CLOSED_REQUEST);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4903,
          "old_api": "ngx_log_debug2",
          "new_api": null,
          "old_text": "ngx_log_debug2(NGX_LOG_DEBUG_HTTP, h2c->connection->log, 0,\n                           \"http2:%ui adjusted window: %z\",\n                           node->id, stream->send_window)",
          "new_text": null,
          "old_line_content": "            ngx_log_debug2(NGX_LOG_DEBUG_HTTP, h2c->connection->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4404,
          "old_api": "ngx_log_debug0",
          "new_api": null,
          "old_text": "ngx_log_debug0(NGX_LOG_DEBUG_HTTP, fc->log, 0,\n                   \"http2 read unbuffered request body\")",
          "new_text": null,
          "old_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_HTTP, fc->log, 0,",
          "new_line_content": "    stream = r->stream;",
          "content_same": false
        },
        {
          "line": 4916,
          "old_api": "handler",
          "new_api": null,
          "old_text": "wev->handler(wev)",
          "new_text": null,
          "old_line_content": "                    wev->handler(wev);",
          "new_line_content": "                wev->ready = 1;",
          "content_same": false
        },
        {
          "line": 4933,
          "old_api": "ngx_http_v2_get_node_by_id",
          "new_api": null,
          "old_text": "ngx_http_v2_get_node_by_id(h2c, depend, 0)",
          "new_text": null,
          "old_line_content": "    parent = depend ? ngx_http_v2_get_node_by_id(h2c, depend, 0) : NULL;",
          "new_line_content": "    ngx_queue_t         *children, *q;",
          "content_same": false
        },
        {
          "line": 4423,
          "old_api": "ngx_http_v2_filter_request_body",
          "new_api": null,
          "old_text": "ngx_http_v2_filter_request_body(r)",
          "new_text": null,
          "old_line_content": "    rc = ngx_http_v2_filter_request_body(r);",
          "new_line_content": "        return NGX_HTTP_BAD_REQUEST;",
          "content_same": false
        },
        {
          "line": 4958,
          "old_api": "ngx_queue_remove",
          "new_api": null,
          "old_text": "ngx_queue_remove(&parent->queue)",
          "new_text": null,
          "old_line_content": "                ngx_queue_remove(&parent->queue);",
          "new_line_content": "                    continue;",
          "content_same": false
        },
        {
          "line": 4959,
          "old_api": "ngx_queue_insert_after",
          "new_api": null,
          "old_text": "ngx_queue_insert_after(&node->queue, &parent->queue)",
          "new_text": null,
          "old_line_content": "                ngx_queue_insert_after(&node->queue, &parent->queue);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 4452,
          "old_api": "ngx_log_error",
          "new_api": null,
          "old_text": "ngx_log_error(NGX_LOG_ALERT, r->connection->log, 0,\n                          \"http2 negative window update\")",
          "new_text": null,
          "old_line_content": "            ngx_log_error(NGX_LOG_ALERT, r->connection->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4461,
          "old_api": "ngx_http_v2_send_window_update",
          "new_api": null,
          "old_text": "ngx_http_v2_send_window_update(h2c, stream->node->id,\n                                       window - stream->recv_window)",
          "new_text": null,
          "old_line_content": "    if (ngx_http_v2_send_window_update(h2c, stream->node->id,",
          "new_line_content": "        return NGX_AGAIN;",
          "content_same": false
        },
        {
          "line": 4974,
          "old_api": "ngx_http_v2_node_children_update",
          "new_api": null,
          "old_text": "ngx_http_v2_node_children_update(parent)",
          "new_text": null,
          "old_line_content": "                    ngx_http_v2_node_children_update(parent);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 4469,
          "old_api": "ngx_http_v2_send_output_queue",
          "new_api": null,
          "old_text": "ngx_http_v2_send_output_queue(h2c)",
          "new_text": null,
          "old_line_content": "    if (ngx_http_v2_send_output_queue(h2c) == NGX_ERROR) {",
          "new_line_content": "        return NGX_HTTP_INTERNAL_SERVER_ERROR;",
          "content_same": false
        },
        {
          "line": 4985,
          "old_api": "ngx_queue_remove",
          "new_api": null,
          "old_text": "ngx_queue_remove(&parent->reuse)",
          "new_text": null,
          "old_line_content": "            ngx_queue_remove(&parent->reuse);",
          "new_line_content": "        node->rel_weight = (parent->rel_weight / 256) * node->weight;",
          "content_same": false
        },
        {
          "line": 4986,
          "old_api": "ngx_queue_insert_tail",
          "new_api": null,
          "old_text": "ngx_queue_insert_tail(&h2c->closed, &parent->reuse)",
          "new_text": null,
          "old_line_content": "            ngx_queue_insert_tail(&h2c->closed, &parent->reuse);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4475,
          "old_api": "ngx_http_get_module_loc_conf",
          "new_api": null,
          "old_text": "ngx_http_get_module_loc_conf(r, ngx_http_core_module)",
          "new_text": null,
          "old_line_content": "        clcf = ngx_http_get_module_loc_conf(r, ngx_http_core_module);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4476,
          "old_api": "ngx_add_timer",
          "new_api": null,
          "old_text": "ngx_add_timer(fc->read, clcf->client_body_timeout)",
          "new_text": null,
          "old_line_content": "        ngx_add_timer(fc->read, clcf->client_body_timeout);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4993,
          "old_api": "ngx_queue_head",
          "new_api": null,
          "old_text": "ngx_queue_head(children)",
          "new_text": null,
          "old_line_content": "        for (q = ngx_queue_head(children);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4994,
          "old_api": "ngx_queue_sentinel",
          "new_api": null,
          "old_text": "ngx_queue_sentinel(children)",
          "new_text": null,
          "old_line_content": "             q != ngx_queue_sentinel(children);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4995,
          "old_api": "ngx_queue_next",
          "new_api": null,
          "old_text": "ngx_queue_next(q)",
          "new_text": null,
          "old_line_content": "             q = ngx_queue_next(q))",
          "new_line_content": "    if (exclusive) {",
          "content_same": false
        },
        {
          "line": 5001,
          "old_api": "ngx_queue_add",
          "new_api": null,
          "old_text": "ngx_queue_add(&node->children, children)",
          "new_text": null,
          "old_line_content": "        ngx_queue_add(&node->children, children);",
          "new_line_content": "            child->parent = node;",
          "content_same": false
        },
        {
          "line": 5002,
          "old_api": "ngx_queue_init",
          "new_api": null,
          "old_text": "ngx_queue_init(children)",
          "new_text": null,
          "old_line_content": "        ngx_queue_init(children);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5006,
          "old_api": "ngx_queue_remove",
          "new_api": null,
          "old_text": "ngx_queue_remove(&node->queue)",
          "new_text": null,
          "old_line_content": "        ngx_queue_remove(&node->queue);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4496,
          "old_api": "ngx_http_v2_send_rst_stream",
          "new_api": null,
          "old_text": "ngx_http_v2_send_rst_stream(h2c, stream->node->id, status)",
          "new_text": null,
          "old_line_content": "    if (ngx_http_v2_send_rst_stream(h2c, stream->node->id, status)",
          "new_line_content": "        return NGX_OK;",
          "content_same": false
        },
        {
          "line": 5013,
          "old_api": "ngx_http_v2_node_children_update",
          "new_api": null,
          "old_text": "ngx_http_v2_node_children_update(node)",
          "new_text": null,
          "old_line_content": "    ngx_http_v2_node_children_update(node);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4509,
          "old_api": "handler",
          "new_api": null,
          "old_text": "rev->handler(rev)",
          "new_text": null,
          "old_line_content": "    rev->handler(rev);",
          "new_line_content": "    fc->error = 1;",
          "content_same": false
        },
        {
          "line": 5023,
          "old_api": "ngx_queue_head",
          "new_api": null,
          "old_text": "ngx_queue_head(&node->children)",
          "new_text": null,
          "old_line_content": "    for (q = ngx_queue_head(&node->children);",
          "new_line_content": "    ngx_queue_t         *q;",
          "content_same": false
        },
        {
          "line": 5024,
          "old_api": "ngx_queue_sentinel",
          "new_api": null,
          "old_text": "ngx_queue_sentinel(&node->children)",
          "new_text": null,
          "old_line_content": "         q != ngx_queue_sentinel(&node->children);",
          "new_line_content": "    ngx_http_v2_node_t  *child;",
          "content_same": false
        },
        {
          "line": 5025,
          "old_api": "ngx_queue_next",
          "new_api": null,
          "old_text": "ngx_queue_next(q)",
          "new_text": null,
          "old_line_content": "         q = ngx_queue_next(q))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5032,
          "old_api": "ngx_http_v2_node_children_update",
          "new_api": null,
          "old_text": "ngx_http_v2_node_children_update(child)",
          "new_text": null,
          "old_line_content": "        ngx_http_v2_node_children_update(child);",
          "new_line_content": "        child->rank = node->rank + 1;",
          "content_same": false
        },
        {
          "line": 4528,
          "old_api": "ngx_log_debug4",
          "new_api": null,
          "old_text": "ngx_log_debug4(NGX_LOG_DEBUG_HTTP, h2c->connection->log, 0,\n                   \"http2 close stream %ui, queued %ui, \"\n                   \"processing %ui, pushing %ui\",\n                   node->id, stream->queued, h2c->processing, h2c->pushing)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug4(NGX_LOG_DEBUG_HTTP, h2c->connection->log, 0,",
          "new_line_content": "    h2c = stream->connection;",
          "content_same": false
        },
        {
          "line": 5043,
          "old_api": "ngx_destroy_pool",
          "new_api": null,
          "old_text": "ngx_destroy_pool(h2c->state.pool)",
          "new_text": null,
          "old_line_content": "        ngx_destroy_pool(h2c->state.pool);",
          "new_line_content": "    ngx_http_v2_connection_t  *h2c = data;",
          "content_same": false
        },
        {
          "line": 5047,
          "old_api": "ngx_destroy_pool",
          "new_api": null,
          "old_text": "ngx_destroy_pool(h2c->pool)",
          "new_text": null,
          "old_line_content": "        ngx_destroy_pool(h2c->pool);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4545,
          "old_api": "ngx_http_v2_send_rst_stream",
          "new_api": null,
          "old_text": "ngx_http_v2_send_rst_stream(h2c, node->id,\n                                      fc->timedout ? NGX_HTTP_V2_PROTOCOL_ERROR\n                                                   : NGX_HTTP_V2_INTERNAL_ERROR)",
          "new_text": null,
          "old_line_content": "            if (ngx_http_v2_send_rst_stream(h2c, node->id,",
          "new_line_content": "    if (!stream->rst_sent && !h2c->connection->error) {",
          "content_same": false
        },
        {
          "line": 4554,
          "old_api": "ngx_http_v2_send_rst_stream",
          "new_api": null,
          "old_text": "ngx_http_v2_send_rst_stream(h2c, node->id, NGX_HTTP_V2_NO_ERROR)",
          "new_text": null,
          "old_line_content": "            if (ngx_http_v2_send_rst_stream(h2c, node->id, NGX_HTTP_V2_NO_ERROR)",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 4055,
          "old_api": "ngx_create_temp_buf",
          "new_api": null,
          "old_text": "ngx_create_temp_buf(r->pool, (size_t) len)",
          "new_text": null,
          "old_line_content": "    rb->buf = ngx_create_temp_buf(r->pool, (size_t) len);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4570,
          "old_api": "ngx_queue_insert_tail",
          "new_api": null,
          "old_text": "ngx_queue_insert_tail(&h2c->closed, &node->reuse)",
          "new_text": null,
          "old_line_content": "    ngx_queue_insert_tail(&h2c->closed, &node->reuse);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4070,
          "old_api": "ngx_http_v2_process_request_body",
          "new_api": null,
          "old_text": "ngx_http_v2_process_request_body(r, buf->pos,\n                                                  buf->last - buf->pos, 1)",
          "new_text": null,
          "old_line_content": "            rc = ngx_http_v2_process_request_body(r, buf->pos,",
          "new_line_content": "        r->request_body_no_buffering = 0;",
          "content_same": false
        },
        {
          "line": 4584,
          "old_api": "ngx_http_free_request",
          "new_api": null,
          "old_text": "ngx_http_free_request(stream->request, rc)",
          "new_text": null,
          "old_line_content": "    ngx_http_free_request(stream->request, rc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4072,
          "old_api": "ngx_pfree",
          "new_api": null,
          "old_text": "ngx_pfree(r->pool, buf->start)",
          "new_text": null,
          "old_line_content": "            ngx_pfree(r->pool, buf->start);",
          "new_line_content": "        if (buf) {",
          "content_same": false
        },
        {
          "line": 4076,
          "old_api": "ngx_http_v2_process_request_body",
          "new_api": null,
          "old_text": "ngx_http_v2_process_request_body(r, NULL, 0, 1)",
          "new_text": null,
          "old_line_content": "        return ngx_http_v2_process_request_body(r, NULL, 0, 1);",
          "new_line_content": "            return rc;",
          "content_same": false
        },
        {
          "line": 4080,
          "old_api": "ngx_http_v2_process_request_body",
          "new_api": null,
          "old_text": "ngx_http_v2_process_request_body(r, buf->pos,\n                                              buf->last - buf->pos, 0)",
          "new_text": null,
          "old_line_content": "        rc = ngx_http_v2_process_request_body(r, buf->pos,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4597,
          "old_api": "ngx_del_timer",
          "new_api": null,
          "old_text": "ngx_del_timer(ev)",
          "new_text": null,
          "old_line_content": "        ngx_del_timer(ev);",
          "new_line_content": "    ev = fc->read;",
          "content_same": false
        },
        {
          "line": 4601,
          "old_api": "ngx_delete_posted_event",
          "new_api": null,
          "old_text": "ngx_delete_posted_event(ev)",
          "new_text": null,
          "old_line_content": "        ngx_delete_posted_event(ev);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4607,
          "old_api": "ngx_del_timer",
          "new_api": null,
          "old_text": "ngx_del_timer(ev)",
          "new_text": null,
          "old_line_content": "        ngx_del_timer(ev);",
          "new_line_content": "    ev = fc->write;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 12,
      "total_additions": 103,
      "total_deletions": 103,
      "total_api_changes": 218
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 3,
        "api_related_lines": 218,
        "non_api_lines": 3,
        "non_api_line_numbers": [
          4037,
          4038,
          4039
        ]
      }
    },
    "api_calls_before": 736,
    "api_calls_after": 736,
    "diff_info": {
      "added_lines": 3,
      "removed_lines": 0,
      "total_diff_lines": 15
    }
  }
}
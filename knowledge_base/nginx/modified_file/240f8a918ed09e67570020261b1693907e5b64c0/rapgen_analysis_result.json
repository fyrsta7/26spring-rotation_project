{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/nginx/modified_file/240f8a918ed09e67570020261b1693907e5b64c0",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/nginx/modified_file/240f8a918ed09e67570020261b1693907e5b64c0/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/nginx/modified_file/240f8a918ed09e67570020261b1693907e5b64c0/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/nginx/modified_file/240f8a918ed09e67570020261b1693907e5b64c0/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 3291,
          "old_api": "ngx_queue_last",
          "new_api": "ngx_queue_sentinel",
          "old_text": "ngx_queue_last(&ctx->sent)",
          "new_text": "ngx_queue_sentinel(&ctx->sent)",
          "old_line_content": "    q = ngx_queue_last(&ctx->sent);",
          "new_line_content": "    while (q != ngx_queue_sentinel(&ctx->sent)) {",
          "content_same": false
        },
        {
          "line": 3293,
          "old_api": "ngx_queue_sentinel",
          "new_api": "ngx_queue_data",
          "old_text": "ngx_queue_sentinel(&ctx->sent)",
          "new_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "old_line_content": "    while (q != ngx_queue_sentinel(&ctx->sent)) {",
          "new_line_content": "        f = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "content_same": false
        },
        {
          "line": 3528,
          "old_api": "ngx_queue_remove",
          "new_api": "ngx_log_debug1",
          "old_text": "ngx_queue_remove(q)",
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                              \"quic skipped buffered frame, total:%ui\",\n                              fs->total)",
          "old_line_content": "                ngx_queue_remove(q);",
          "new_line_content": "                ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3531,
          "old_api": "ngx_log_debug1",
          "new_api": "ngx_quic_free_frame",
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                              \"quic skipped buffered frame, total:%ui\",\n                              fs->total)",
          "new_text": "ngx_quic_free_frame(c, frame)",
          "old_line_content": "                ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "                ngx_quic_free_frame(c, frame);",
          "content_same": false
        },
        {
          "line": 3558,
          "old_api": "ngx_log_debug1",
          "new_api": "ngx_quic_free_frame",
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                      \"quic consumed buffered frame, total:%ui\", fs->total)",
          "new_text": "ngx_quic_free_frame(c, frame)",
          "old_line_content": "        ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "        ngx_quic_free_frame(c, frame);",
          "content_same": false
        },
        {
          "line": 3656,
          "old_api": "ngx_queue_sentinel",
          "new_api": "ngx_queue_data",
          "old_text": "ngx_queue_sentinel(&fs->frames)",
          "new_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "old_line_content": "         q != ngx_queue_sentinel(&fs->frames);",
          "new_line_content": "        item = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "content_same": false
        },
        {
          "line": 3706,
          "old_api": "ngx_quic_get_send_ctx",
          "new_api": "ngx_quic_resend_frames",
          "old_text": "ngx_quic_get_send_ctx(qc, pkt->level)",
          "new_text": "ngx_quic_resend_frames(c, ctx)",
          "old_line_content": "        ctx = ngx_quic_get_send_ctx(qc, pkt->level);",
          "new_line_content": "            ngx_quic_resend_frames(c, ctx);",
          "content_same": false
        },
        {
          "line": 3708,
          "old_api": "ngx_queue_empty",
          "new_api": "ngx_quic_get_send_ctx",
          "old_text": "ngx_queue_empty(&ctx->sent)",
          "new_text": "ngx_quic_get_send_ctx(qc, ssl_encryption_handshake)",
          "old_line_content": "        if (!ngx_queue_empty(&ctx->sent)) {",
          "new_line_content": "            ctx = ngx_quic_get_send_ctx(qc, ssl_encryption_handshake);",
          "content_same": false
        },
        {
          "line": 3709,
          "old_api": "ngx_quic_resend_frames",
          "new_api": "ngx_queue_empty",
          "old_text": "ngx_quic_resend_frames(c, ctx)",
          "new_text": "ngx_queue_empty(&ctx->sent)",
          "old_line_content": "            ngx_quic_resend_frames(c, ctx);",
          "new_line_content": "            while (!ngx_queue_empty(&ctx->sent)) {",
          "content_same": false
        },
        {
          "line": 3735,
          "old_api": "ngx_log_debug2",
          "new_api": "SSL_quic_write_level",
          "old_text": "ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic SSL_quic_read_level:%d SSL_quic_write_level:%d\",\n                   (int) SSL_quic_read_level(ssl_conn),\n                   (int) SSL_quic_write_level(ssl_conn))",
          "new_text": "SSL_quic_write_level(ssl_conn)",
          "old_line_content": "    ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "                   (int) SSL_quic_write_level(ssl_conn));",
          "content_same": false
        },
        {
          "line": 3743,
          "old_api": "SSL_quic_read_level",
          "new_api": "ngx_ssl_error",
          "old_text": "SSL_quic_read_level(ssl_conn)",
          "new_text": "ngx_ssl_error(NGX_LOG_INFO, c->log, 0,\n                          \"SSL_provide_quic_data() failed\")",
          "old_line_content": "        if (!SSL_provide_quic_data(ssl_conn, SSL_quic_read_level(ssl_conn),",
          "new_line_content": "            ngx_ssl_error(NGX_LOG_INFO, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3754,
          "old_api": "ngx_log_debug2",
          "new_api": "SSL_quic_write_level",
          "old_text": "ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic SSL_quic_read_level:%d SSL_quic_write_level:%d\",\n                   (int) SSL_quic_read_level(ssl_conn),\n                   (int) SSL_quic_write_level(ssl_conn))",
          "new_text": "SSL_quic_write_level(ssl_conn)",
          "old_line_content": "    ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "                   (int) SSL_quic_write_level(ssl_conn));",
          "content_same": false
        },
        {
          "line": 3756,
          "old_api": "SSL_quic_read_level",
          "new_api": "ngx_log_debug1",
          "old_text": "SSL_quic_read_level(ssl_conn)",
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0, \"SSL_do_handshake: %d\", n)",
          "old_line_content": "                   (int) SSL_quic_read_level(ssl_conn),",
          "new_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0, \"SSL_do_handshake: %d\", n);",
          "content_same": false
        },
        {
          "line": 3759,
          "old_api": "ngx_log_debug1",
          "new_api": "SSL_get_error",
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0, \"SSL_do_handshake: %d\", n)",
          "new_text": "SSL_get_error(ssl_conn, n)",
          "old_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0, \"SSL_do_handshake: %d\", n);",
          "new_line_content": "        sslerr = SSL_get_error(ssl_conn, n);",
          "content_same": false
        },
        {
          "line": 3779,
          "old_api": "ngx_log_debug1",
          "new_api": "ngx_log_debug0",
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic ssl cipher:%s\", SSL_get_cipher(ssl_conn))",
          "new_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic handshake completed successfully\")",
          "old_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3851,
          "old_api": "ngx_quic_find_stream",
          "new_api": "ngx_quic_create_client_stream",
          "old_text": "ngx_quic_find_stream(&qc->streams.tree, f->stream_id)",
          "new_text": "ngx_quic_create_client_stream(c, f->stream_id)",
          "old_line_content": "    sn = ngx_quic_find_stream(&qc->streams.tree, f->stream_id);",
          "new_line_content": "        sn = ngx_quic_create_client_stream(c, f->stream_id);",
          "content_same": false
        },
        {
          "line": 4030,
          "old_api": "ngx_quic_find_stream",
          "new_api": "ngx_quic_create_client_stream",
          "old_text": "ngx_quic_find_stream(&qc->streams.tree, f->id)",
          "new_text": "ngx_quic_create_client_stream(c, f->id)",
          "old_line_content": "    sn = ngx_quic_find_stream(&qc->streams.tree, f->id);",
          "new_line_content": "        sn = ngx_quic_create_client_stream(c, f->id);",
          "content_same": false
        },
        {
          "line": 4087,
          "old_api": "ngx_quic_find_stream",
          "new_api": "ngx_quic_create_client_stream",
          "old_text": "ngx_quic_find_stream(&qc->streams.tree, f->id)",
          "new_text": "ngx_quic_create_client_stream(c, f->id)",
          "old_line_content": "    sn = ngx_quic_find_stream(&qc->streams.tree, f->id);",
          "new_line_content": "        sn = ngx_quic_create_client_stream(c, f->id);",
          "content_same": false
        },
        {
          "line": 4148,
          "old_api": "ngx_quic_find_stream",
          "new_api": "ngx_quic_create_client_stream",
          "old_text": "ngx_quic_find_stream(&qc->streams.tree, f->id)",
          "new_text": "ngx_quic_create_client_stream(c, f->id)",
          "old_line_content": "    sn = ngx_quic_find_stream(&qc->streams.tree, f->id);",
          "new_line_content": "        sn = ngx_quic_create_client_stream(c, f->id);",
          "content_same": false
        },
        {
          "line": 4202,
          "old_api": "ngx_quic_find_stream",
          "new_api": "ngx_quic_create_client_stream",
          "old_text": "ngx_quic_find_stream(&qc->streams.tree, f->id)",
          "new_text": "ngx_quic_create_client_stream(c, f->id)",
          "old_line_content": "    sn = ngx_quic_find_stream(&qc->streams.tree, f->id);",
          "new_line_content": "        sn = ngx_quic_create_client_stream(c, f->id);",
          "content_same": false
        },
        {
          "line": 4321,
          "old_api": "ngx_queue_sentinel",
          "new_api": "ngx_queue_data",
          "old_text": "ngx_queue_sentinel(&qc->client_ids)",
          "new_text": "ngx_queue_data(q, ngx_quic_client_id_t, queue)",
          "old_line_content": "         q != ngx_queue_sentinel(&qc->client_ids);",
          "new_line_content": "        item = ngx_queue_data(q, ngx_quic_client_id_t, queue);",
          "content_same": false
        },
        {
          "line": 4392,
          "old_api": "ngx_queue_sentinel",
          "new_api": "ngx_queue_next",
          "old_text": "ngx_queue_sentinel(&qc->client_ids)",
          "new_text": "ngx_queue_next(q)",
          "old_line_content": "    while (q != ngx_queue_sentinel(&qc->client_ids)) {",
          "new_line_content": "        q = ngx_queue_next(q);",
          "content_same": false
        },
        {
          "line": 4465,
          "old_api": "ngx_quic_get_connection",
          "new_api": "ngx_queue_sentinel",
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": "ngx_queue_sentinel(&qc->server_ids)",
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "         q != ngx_queue_sentinel(&qc->server_ids);",
          "content_same": false
        },
        {
          "line": 4468,
          "old_api": "ngx_queue_sentinel",
          "new_api": "ngx_queue_data",
          "old_text": "ngx_queue_sentinel(&qc->server_ids)",
          "new_text": "ngx_queue_data(q, ngx_quic_server_id_t, queue)",
          "old_line_content": "         q != ngx_queue_sentinel(&qc->server_ids);",
          "new_line_content": "        sid = ngx_queue_data(q, ngx_quic_server_id_t, queue);",
          "content_same": false
        },
        {
          "line": 4471,
          "old_api": "ngx_queue_data",
          "new_api": "ngx_queue_remove",
          "old_text": "ngx_queue_data(q, ngx_quic_server_id_t, queue)",
          "new_text": "ngx_queue_remove(q)",
          "old_line_content": "        sid = ngx_queue_data(q, ngx_quic_server_id_t, queue);",
          "new_line_content": "            ngx_queue_remove(q);",
          "content_same": false
        },
        {
          "line": 4551,
          "old_api": "ngx_log_debug0",
          "new_api": "ngx_queue_head",
          "old_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic clear temp server ids\")",
          "new_text": "ngx_queue_head(&qc->server_ids)",
          "old_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    for (q = ngx_queue_head(&qc->server_ids);",
          "content_same": false
        },
        {
          "line": 4555,
          "old_api": "ngx_queue_sentinel",
          "new_api": "ngx_queue_next",
          "old_text": "ngx_queue_sentinel(&qc->server_ids)",
          "new_text": "ngx_queue_next(q)",
          "old_line_content": "         q != ngx_queue_sentinel(&qc->server_ids);",
          "new_line_content": "        next = ngx_queue_next(q);",
          "content_same": false
        },
        {
          "line": 4618,
          "old_api": "ngx_queue_empty",
          "new_api": "ngx_queue_data",
          "old_text": "ngx_queue_empty(&qc->free_client_ids)",
          "new_text": "ngx_queue_data(q, ngx_quic_client_id_t, queue)",
          "old_line_content": "    if (!ngx_queue_empty(&qc->free_client_ids)) {",
          "new_line_content": "        cid = ngx_queue_data(q, ngx_quic_client_id_t, queue);",
          "content_same": false
        },
        {
          "line": 4620,
          "old_api": "ngx_queue_head",
          "new_api": "ngx_queue_remove",
          "old_text": "ngx_queue_head(&qc->free_client_ids)",
          "new_text": "ngx_queue_remove(&cid->queue)",
          "old_line_content": "        q = ngx_queue_head(&qc->free_client_ids);",
          "new_line_content": "        ngx_queue_remove(&cid->queue);",
          "content_same": false
        },
        {
          "line": 4645,
          "old_api": "ngx_queue_empty",
          "new_api": "ngx_queue_data",
          "old_text": "ngx_queue_empty(&qc->free_server_ids)",
          "new_text": "ngx_queue_data(q, ngx_quic_server_id_t, queue)",
          "old_line_content": "    if (!ngx_queue_empty(&qc->free_server_ids)) {",
          "new_line_content": "        sid = ngx_queue_data(q, ngx_quic_server_id_t, queue);",
          "content_same": false
        },
        {
          "line": 4647,
          "old_api": "ngx_queue_head",
          "new_api": "ngx_queue_remove",
          "old_text": "ngx_queue_head(&qc->free_server_ids)",
          "new_text": "ngx_queue_remove(&sid->queue)",
          "old_line_content": "        q = ngx_queue_head(&qc->free_server_ids);",
          "new_line_content": "        ngx_queue_remove(&sid->queue);",
          "content_same": false
        },
        {
          "line": 4711,
          "old_api": "ngx_min",
          "new_api": "ngx_quic_get_padding_level",
          "old_text": "ngx_min(len, (size_t) max)",
          "new_text": "ngx_quic_get_padding_level(c)",
          "old_line_content": "            len = ngx_min(len, (size_t) max);",
          "new_line_content": "        pad = ngx_quic_get_padding_level(c);",
          "content_same": false
        },
        {
          "line": 4772,
          "old_api": "ngx_quic_get_connection",
          "new_api": "ngx_queue_head",
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": "ngx_queue_head(&ctx->frames)",
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    for (q = ngx_queue_head(&ctx->frames);",
          "content_same": false
        },
        {
          "line": 4773,
          "old_api": "ngx_quic_get_send_ctx",
          "new_api": "ngx_queue_sentinel",
          "old_text": "ngx_quic_get_send_ctx(qc, ssl_encryption_initial)",
          "new_text": "ngx_queue_sentinel(&ctx->frames)",
          "old_line_content": "    ctx = ngx_quic_get_send_ctx(qc, ssl_encryption_initial);",
          "new_line_content": "         q != ngx_queue_sentinel(&ctx->frames);",
          "content_same": false
        },
        {
          "line": 4776,
          "old_api": "ngx_queue_sentinel",
          "new_api": "ngx_queue_data",
          "old_text": "ngx_queue_sentinel(&ctx->frames)",
          "new_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "old_line_content": "         q != ngx_queue_sentinel(&ctx->frames);",
          "new_line_content": "        f = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "content_same": false
        },
        {
          "line": 4779,
          "old_api": "ngx_queue_data",
          "new_api": "ngx_quic_get_send_ctx",
          "old_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "new_text": "ngx_quic_get_send_ctx(qc, ssl_encryption_handshake)",
          "old_line_content": "        f = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "new_line_content": "            ctx = ngx_quic_get_send_ctx(qc, ssl_encryption_handshake);",
          "content_same": false
        },
        {
          "line": 4877,
          "old_api": "ngx_queue_sentinel",
          "new_api": "ngx_queue_data",
          "old_text": "ngx_queue_sentinel(&ctx->frames)",
          "new_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "old_line_content": "         q != ngx_queue_sentinel(&ctx->frames);",
          "new_line_content": "        f = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "content_same": false
        },
        {
          "line": 4974,
          "old_api": "ngx_log_debug6",
          "new_api": "ngx_quic_level_name",
          "old_text": "ngx_log_debug6(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic packet tx %s bytes:%ui\"\n                   \" need_ack:%d number:%L encoded nl:%d trunc:0x%xD\",\n                   ngx_quic_level_name(ctx->level), out.len, pkt.need_ack,\n                   pkt.number, pkt.num_len, pkt.trunc)",
          "new_text": "ngx_quic_level_name(ctx->level)",
          "old_line_content": "    ngx_log_debug6(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "                   ngx_quic_level_name(ctx->level), out.len, pkt.need_ack,",
          "content_same": false
        },
        {
          "line": 4977,
          "old_api": "ngx_quic_level_name",
          "new_api": "ngx_quic_encrypt",
          "old_text": "ngx_quic_level_name(ctx->level)",
          "new_text": "ngx_quic_encrypt(&pkt, &res)",
          "old_line_content": "                   ngx_quic_level_name(ctx->level), out.len, pkt.need_ack,",
          "new_line_content": "    if (ngx_quic_encrypt(&pkt, &res) != NGX_OK) {",
          "content_same": false
        },
        {
          "line": 5001,
          "old_api": "ngx_del_timer",
          "new_api": "ngx_quic_pto",
          "old_text": "ngx_del_timer(&qc->pto)",
          "new_text": "ngx_quic_pto(c, ctx)",
          "old_line_content": "                ngx_del_timer(&qc->pto);",
          "new_line_content": "            ngx_add_timer(&qc->pto, ngx_quic_pto(c, ctx));",
          "content_same": false
        },
        {
          "line": 5014,
          "old_api": "ngx_queue_head",
          "new_api": "ngx_queue_remove",
          "old_text": "ngx_queue_head(&ctx->frames)",
          "new_text": "ngx_queue_remove(q)",
          "old_line_content": "        q = ngx_queue_head(&ctx->frames);",
          "new_line_content": "        ngx_queue_remove(q);",
          "content_same": false
        },
        {
          "line": 5015,
          "old_api": "ngx_queue_data",
          "new_api": "ngx_quic_free_frame",
          "old_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "new_text": "ngx_quic_free_frame(c, f)",
          "old_line_content": "        f = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "new_line_content": "        ngx_quic_free_frame(c, f);",
          "content_same": false
        },
        {
          "line": 5065,
          "old_api": "ngx_quic_create_frame",
          "new_api": "ngx_log_error",
          "old_text": "ngx_quic_create_frame(NULL, f)",
          "new_text": "ngx_log_error(NGX_LOG_ERR, c->log, 0, \"could not split QUIC frame\")",
          "old_line_content": "    f->len = ngx_quic_create_frame(NULL, f);",
          "new_line_content": "        ngx_log_error(NGX_LOG_ERR, c->log, 0, \"could not split QUIC frame\");",
          "content_same": false
        },
        {
          "line": 5181,
          "old_api": "ngx_log_debug0",
          "new_api": "ngx_quic_get_connection",
          "old_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, ev->log, 0, \"quic pto timer\")",
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_EVENT, ev->log, 0, \"quic pto timer\");",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 5209,
          "old_api": "ngx_quic_resend_frames",
          "new_api": "ngx_quic_connstate_dbg",
          "old_text": "ngx_quic_resend_frames(c, ctx)",
          "new_text": "ngx_quic_connstate_dbg(c)",
          "old_line_content": "        ngx_quic_resend_frames(c, ctx);",
          "new_line_content": "    ngx_quic_connstate_dbg(c);",
          "content_same": false
        },
        {
          "line": 5244,
          "old_api": "ngx_quic_close_connection",
          "new_api": "ngx_quic_connstate_dbg",
          "old_text": "ngx_quic_close_connection(c, NGX_ERROR)",
          "new_text": "ngx_quic_connstate_dbg(c)",
          "old_line_content": "        ngx_quic_close_connection(c, NGX_ERROR);",
          "new_line_content": "    ngx_quic_connstate_dbg(c);",
          "content_same": false
        },
        {
          "line": 5277,
          "old_api": "ngx_queue_empty",
          "new_api": "ngx_queue_data",
          "old_text": "ngx_queue_empty(&ctx->sent)",
          "new_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "old_line_content": "        while (!ngx_queue_empty(&ctx->sent)) {",
          "new_line_content": "            start = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "content_same": false
        },
        {
          "line": 5317,
          "old_api": "ngx_del_timer",
          "new_api": "ngx_add_timer",
          "old_text": "ngx_del_timer(&qc->pto)",
          "new_text": "ngx_add_timer(&qc->pto, min_wait)",
          "old_line_content": "        ngx_del_timer(&qc->pto);",
          "new_line_content": "    ngx_add_timer(&qc->pto, min_wait);",
          "content_same": false
        },
        {
          "line": 5337,
          "old_api": "ngx_queue_head",
          "new_api": "ngx_log_debug1",
          "old_text": "ngx_queue_head(&ctx->sent)",
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic resend packet pnum:%uL\", start->pnum)",
          "old_line_content": "    q = ngx_queue_head(&ctx->sent);",
          "new_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 5340,
          "old_api": "ngx_log_debug1",
          "new_api": "ngx_quic_congestion_lost",
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic resend packet pnum:%uL\", start->pnum)",
          "new_text": "ngx_quic_congestion_lost(c, start)",
          "old_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    ngx_quic_congestion_lost(c, start);",
          "content_same": false
        },
        {
          "line": 5343,
          "old_api": "ngx_quic_congestion_lost",
          "new_api": "ngx_queue_data",
          "old_text": "ngx_quic_congestion_lost(c, start)",
          "new_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "old_line_content": "    ngx_quic_congestion_lost(c, start);",
          "new_line_content": "        f = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "content_same": false
        },
        {
          "line": 5384,
          "old_api": "ngx_quic_find_stream",
          "new_api": "ngx_quic_free_frame",
          "old_text": "ngx_quic_find_stream(&qc->streams.tree,\n                                      f->u.max_stream_data.id)",
          "new_text": "ngx_quic_free_frame(c, f)",
          "old_line_content": "            sn = ngx_quic_find_stream(&qc->streams.tree,",
          "new_line_content": "                ngx_quic_free_frame(c, f);",
          "content_same": false
        },
        {
          "line": 5420,
          "old_api": "ngx_queue_insert_tail",
          "new_api": "ngx_queue_sentinel",
          "old_text": "ngx_queue_insert_tail(&ctx->frames, &f->queue)",
          "new_text": "ngx_queue_sentinel(&ctx->sent)",
          "old_line_content": "            ngx_queue_insert_tail(&ctx->frames, &f->queue);",
          "new_line_content": "    } while (q != ngx_queue_sentinel(&ctx->sent));",
          "content_same": false
        },
        {
          "line": 5558,
          "old_api": "ngx_log_debug1",
          "new_api": "ngx_quic_get_connection",
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic stream id:0x%xL is new\", id)",
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 5633,
          "old_api": "handler",
          "new_api": "ngx_quic_create_stream",
          "old_text": "sn->c->listening->handler(sn->c)",
          "new_text": "ngx_quic_create_stream(c, id, n)",
          "old_line_content": "        sn->c->listening->handler(sn->c);",
          "new_line_content": "    return ngx_quic_create_stream(c, id, n);",
          "content_same": false
        },
        {
          "line": 5649,
          "old_api": "ngx_log_debug1",
          "new_api": "ngx_quic_get_connection",
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic stream id:0x%xL create\", id)",
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 5731,
          "old_api": "ngx_pool_cleanup_add",
          "new_api": "ngx_destroy_pool",
          "old_text": "ngx_pool_cleanup_add(pool, 0)",
          "new_text": "ngx_destroy_pool(pool)",
          "old_line_content": "    cln = ngx_pool_cleanup_add(pool, 0);",
          "new_line_content": "        ngx_destroy_pool(pool);",
          "content_same": false
        },
        {
          "line": 6010,
          "old_api": "ngx_log_debug1",
          "new_api": "ngx_rbtree_delete",
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic stream id:0x%xL cleanup\", qs->id)",
          "new_text": "ngx_rbtree_delete(&qc->streams.tree, &qs->node)",
          "old_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    ngx_rbtree_delete(&qc->streams.tree, &qs->node);",
          "content_same": false
        },
        {
          "line": 6066,
          "old_api": "ngx_log_debug1",
          "new_api": "ngx_quic_alloc_frame",
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic stream id:0x%xL send fin\", qs->id)",
          "new_text": "ngx_quic_alloc_frame(pc)",
          "old_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    frame = ngx_quic_alloc_frame(pc);",
          "content_same": false
        },
        {
          "line": 6100,
          "old_api": "ngx_queue_empty",
          "new_api": "ngx_queue_data",
          "old_text": "ngx_queue_empty(&qc->free_frames)",
          "new_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "old_line_content": "    if (!ngx_queue_empty(&qc->free_frames)) {",
          "new_line_content": "        frame = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "content_same": false
        },
        {
          "line": 6102,
          "old_api": "ngx_queue_head",
          "new_api": "ngx_queue_remove",
          "old_text": "ngx_queue_head(&qc->free_frames)",
          "new_text": "ngx_queue_remove(&frame->queue)",
          "old_line_content": "        q = ngx_queue_head(&qc->free_frames);",
          "new_line_content": "        ngx_queue_remove(&frame->queue);",
          "content_same": false
        },
        {
          "line": 6105,
          "old_api": "ngx_queue_remove",
          "new_api": "ngx_log_debug1",
          "old_text": "ngx_queue_remove(&frame->queue)",
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic reuse frame n:%ui\", qc->nframes)",
          "old_line_content": "        ngx_queue_remove(&frame->queue);",
          "new_line_content": "        ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 6230,
          "old_api": "ngx_quic_get_connection",
          "new_api": "ngx_quic_free_bufs",
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": "ngx_quic_free_bufs(c, frame->data)",
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "        ngx_quic_free_bufs(c, frame->data);",
          "content_same": false
        },
        {
          "line": 6233,
          "old_api": "ngx_quic_free_bufs",
          "new_api": "ngx_queue_insert_head",
          "old_text": "ngx_quic_free_bufs(c, frame->data)",
          "new_text": "ngx_queue_insert_head(&qc->free_frames, &frame->queue)",
          "old_line_content": "        ngx_quic_free_bufs(c, frame->data);",
          "new_line_content": "    ngx_queue_insert_head(&qc->free_frames, &frame->queue);",
          "content_same": false
        },
        {
          "line": 6236,
          "old_api": "ngx_queue_insert_head",
          "new_api": "ngx_log_debug1",
          "old_text": "ngx_queue_insert_head(&qc->free_frames, &frame->queue)",
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic free frame n:%ui\", qc->nframes)",
          "old_line_content": "    ngx_queue_insert_head(&qc->free_frames, &frame->queue);",
          "new_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 6459,
          "old_api": "ngx_quic_get_connection",
          "new_api": "ngx_buf_size",
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": "ngx_buf_size(in->buf)",
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "        n = ngx_buf_size(in->buf);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 6148,
          "old_api": null,
          "new_api": "ngx_log_debug3",
          "old_text": null,
          "new_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic congestion ack recovery win:%uz ss:%z if:%uz\",\n                       cg->window, cg->ssthresh, cg->in_flight)",
          "old_line_content": "    timer = f->last - cg->recovery_start;",
          "new_line_content": "        ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 4101,
          "old_api": null,
          "new_api": "handler",
          "old_text": null,
          "new_text": "sn->c->listening->handler(sn->c)",
          "old_line_content": "            sn->send_max_data = f->limit;",
          "new_line_content": "        sn->c->listening->handler(sn->c);",
          "content_same": false
        },
        {
          "line": 6158,
          "old_api": null,
          "new_api": "ngx_log_debug3",
          "old_text": null,
          "new_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic congestion slow start win:%uz ss:%z if:%uz\",\n                       cg->window, cg->ssthresh, cg->in_flight)",
          "old_line_content": "    if (cg->window < cg->ssthresh) {",
          "new_line_content": "        ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 6165,
          "old_api": null,
          "new_api": "ngx_log_debug3",
          "old_text": null,
          "new_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic congestion avoidance win:%uz ss:%z if:%uz\",\n                       cg->window, cg->ssthresh, cg->in_flight)",
          "old_line_content": "    } else {",
          "new_line_content": "        ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 4117,
          "old_api": null,
          "new_api": "ngx_post_event",
          "old_text": null,
          "new_text": "ngx_post_event(wev, &ngx_posted_events)",
          "old_line_content": "",
          "new_line_content": "            ngx_post_event(wev, &ngx_posted_events);",
          "content_same": false
        },
        {
          "line": 4136,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    ngx_quic_stream_t      *sn;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 6191,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "        return;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 4145,
          "old_api": null,
          "new_api": "ngx_quic_find_stream",
          "old_text": null,
          "new_text": "ngx_quic_find_stream(&qc->streams.tree, f->id)",
          "old_line_content": "        return NGX_ERROR;",
          "new_line_content": "    sn = ngx_quic_find_stream(&qc->streams.tree, f->id);",
          "content_same": false
        },
        {
          "line": 6200,
          "old_api": null,
          "new_api": "ngx_log_debug3",
          "old_text": null,
          "new_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic congestion lost recovery win:%uz ss:%z if:%uz\",\n                       cg->window, cg->ssthresh, cg->in_flight)",
          "old_line_content": "    timer = f->last - cg->recovery_start;",
          "new_line_content": "        ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 4164,
          "old_api": null,
          "new_api": "handler",
          "old_text": null,
          "new_text": "sc->listening->handler(sc)",
          "old_line_content": "        rev->error = 1;",
          "new_line_content": "        sc->listening->handler(sc);",
          "content_same": false
        },
        {
          "line": 6216,
          "old_api": null,
          "new_api": "ngx_log_debug3",
          "old_text": null,
          "new_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic congestion lost win:%uz ss:%z if:%uz\",\n                   cg->window, cg->ssthresh, cg->in_flight)",
          "old_line_content": "",
          "new_line_content": "    ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 4174,
          "old_api": null,
          "new_api": "handler",
          "old_text": null,
          "new_text": "rev->handler(rev)",
          "old_line_content": "    rev->ready = 1;",
          "new_line_content": "        rev->handler(rev);",
          "content_same": false
        },
        {
          "line": 6227,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "{",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 4190,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    ngx_quic_stream_t      *sn;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 4199,
          "old_api": null,
          "new_api": "ngx_quic_find_stream",
          "old_text": null,
          "new_text": "ngx_quic_find_stream(&qc->streams.tree, f->id)",
          "old_line_content": "        return NGX_ERROR;",
          "new_line_content": "    sn = ngx_quic_find_stream(&qc->streams.tree, f->id);",
          "content_same": false
        },
        {
          "line": 6248,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    uint32_t                version;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 6263,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    ngx_chain_t            *cl;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 4218,
          "old_api": null,
          "new_api": "handler",
          "old_text": null,
          "new_text": "sc->listening->handler(sc)",
          "old_line_content": "        wev->error = 1;",
          "new_line_content": "        sc->listening->handler(sc);",
          "content_same": false
        },
        {
          "line": 6274,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic reuse buffer n:%ui\", qc->nbufs)",
          "old_line_content": "        b->last = b->start;",
          "new_line_content": "        ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 4228,
          "old_api": null,
          "new_api": "handler",
          "old_text": null,
          "new_text": "wev->handler(wev)",
          "old_line_content": "    wev->ready = 1;",
          "new_line_content": "        wev->handler(wev);",
          "content_same": false
        },
        {
          "line": 6281,
          "old_api": null,
          "new_api": "ngx_alloc_chain_link",
          "old_text": null,
          "new_text": "ngx_alloc_chain_link(c->pool)",
          "old_line_content": "        return cl;",
          "new_line_content": "    cl = ngx_alloc_chain_link(c->pool);",
          "content_same": false
        },
        {
          "line": 6286,
          "old_api": null,
          "new_api": "ngx_create_temp_buf",
          "old_text": null,
          "new_text": "ngx_create_temp_buf(c->pool, NGX_QUIC_BUFFER_SIZE)",
          "old_line_content": "        return NULL;",
          "new_line_content": "    b = ngx_create_temp_buf(c->pool, NGX_QUIC_BUFFER_SIZE);",
          "content_same": false
        },
        {
          "line": 4241,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "{",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 4247,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                           \"quic max_streams_bidi:%uL\", f->limit)",
          "old_line_content": "        if (qc->streams.server_max_streams_bidi < f->limit) {",
          "new_line_content": "            ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 6298,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic alloc buffer n:%ui\", qc->nbufs)",
          "old_line_content": "#ifdef NGX_QUIC_DEBUG_ALLOC",
          "new_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 4255,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                           \"quic max_streams_uni:%uL\", f->limit)",
          "old_line_content": "        if (qc->streams.server_max_streams_uni < f->limit) {",
          "new_line_content": "            ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 6313,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    ngx_chain_t            *cl;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 6317,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic free buffer n:%ui\", qc->nbufs)",
          "old_line_content": "",
          "new_line_content": "        ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 4271,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    ngx_quic_frame_t       *frame;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 4273,
          "old_api": null,
          "new_api": "ngx_quic_alloc_frame",
          "old_text": null,
          "new_text": "ngx_quic_alloc_frame(c)",
          "old_line_content": "",
          "new_line_content": "    frame = ngx_quic_alloc_frame(c);",
          "content_same": false
        },
        {
          "line": 6328,
          "old_api": null,
          "new_api": "ngx_free_chain",
          "old_text": null,
          "new_text": "ngx_free_chain(c->pool, cl)",
          "old_line_content": "        if (b->shadow) {",
          "new_line_content": "                ngx_free_chain(c->pool, cl);",
          "content_same": false
        },
        {
          "line": 4282,
          "old_api": null,
          "new_api": "ngx_quic_queue_frame",
          "old_text": null,
          "new_text": "ngx_quic_queue_frame(qc, frame)",
          "old_line_content": "    frame->type = NGX_QUIC_FT_PATH_RESPONSE;",
          "new_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "content_same": false
        },
        {
          "line": 6341,
          "old_api": null,
          "new_api": "ngx_free_chain",
          "old_text": null,
          "new_text": "ngx_free_chain(c->pool, cl)",
          "old_line_content": "",
          "new_line_content": "                ngx_free_chain(c->pool, cl);",
          "content_same": false
        },
        {
          "line": 4296,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    ngx_quic_client_id_t   *cid, *item;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 4308,
          "old_api": null,
          "new_api": "ngx_quic_retire_connection_id",
          "old_text": null,
          "new_text": "ngx_quic_retire_connection_id(c, pkt->level, f->seqnum)",
          "old_line_content": "         *  done so for that sequence number.",
          "new_line_content": "        if (ngx_quic_retire_connection_id(c, pkt->level, f->seqnum) != NGX_OK) {",
          "content_same": false
        },
        {
          "line": 4317,
          "old_api": null,
          "new_api": "ngx_queue_head",
          "old_text": null,
          "new_text": "ngx_queue_head(&qc->client_ids)",
          "old_line_content": "",
          "new_line_content": "    for (q = ngx_queue_head(&qc->client_ids);",
          "content_same": false
        },
        {
          "line": 4318,
          "old_api": null,
          "new_api": "ngx_queue_sentinel",
          "old_text": null,
          "new_text": "ngx_queue_sentinel(&qc->client_ids)",
          "old_line_content": "    cid = NULL;",
          "new_line_content": "         q != ngx_queue_sentinel(&qc->client_ids);",
          "content_same": false
        },
        {
          "line": 4319,
          "old_api": null,
          "new_api": "ngx_queue_next",
          "old_text": null,
          "new_text": "ngx_queue_next(q)",
          "old_line_content": "",
          "new_line_content": "         q = ngx_queue_next(q))",
          "content_same": false
        },
        {
          "line": 6365,
          "old_api": null,
          "new_api": "ngx_quic_alloc_buf",
          "old_text": null,
          "new_text": "ngx_quic_alloc_buf(c)",
          "old_line_content": "    ll = &out;",
          "new_line_content": "        cl = ngx_quic_alloc_buf(c);",
          "content_same": false
        },
        {
          "line": 6371,
          "old_api": null,
          "new_api": "ngx_min",
          "old_text": null,
          "new_text": "ngx_min((size_t) (b->end - b->last), len)",
          "old_line_content": "        }",
          "new_line_content": "        n = ngx_min((size_t) (b->end - b->last), len);",
          "content_same": false
        },
        {
          "line": 6373,
          "old_api": null,
          "new_api": "ngx_cpymem",
          "old_text": null,
          "new_text": "ngx_cpymem(b->last, data, n)",
          "old_line_content": "        b = cl->buf;",
          "new_line_content": "        b->last = ngx_cpymem(b->last, data, n);",
          "content_same": false
        },
        {
          "line": 4336,
          "old_api": null,
          "new_api": "ngx_strncmp",
          "old_text": null,
          "new_text": "ngx_strncmp(cid->id, f->cid, f->len)",
          "old_line_content": "         */",
          "new_line_content": "            || ngx_strncmp(cid->id, f->cid, f->len) != 0",
          "content_same": false
        },
        {
          "line": 4337,
          "old_api": null,
          "new_api": "ngx_strncmp",
          "old_text": null,
          "new_text": "ngx_strncmp(cid->sr_token, f->srt, NGX_QUIC_SR_TOKEN_LEN)",
          "old_line_content": "",
          "new_line_content": "            || ngx_strncmp(cid->sr_token, f->srt, NGX_QUIC_SR_TOKEN_LEN) != 0)",
          "content_same": false
        },
        {
          "line": 6399,
          "old_api": null,
          "new_api": "ngx_buf_size",
          "old_text": null,
          "new_text": "ngx_buf_size(in->buf)",
          "old_line_content": "    ll = &out;",
          "new_line_content": "        if (!ngx_buf_in_memory(in->buf) || ngx_buf_size(in->buf) == 0) {",
          "content_same": false
        },
        {
          "line": 4351,
          "old_api": null,
          "new_api": "ngx_quic_alloc_client_id",
          "old_text": null,
          "new_text": "ngx_quic_alloc_client_id(c, qc)",
          "old_line_content": "",
          "new_line_content": "        cid = ngx_quic_alloc_client_id(c, qc);",
          "content_same": false
        },
        {
          "line": 6404,
          "old_api": null,
          "new_api": "ngx_quic_alloc_buf",
          "old_text": null,
          "new_text": "ngx_quic_alloc_buf(c)",
          "old_line_content": "            continue;",
          "new_line_content": "        cl = ngx_quic_alloc_buf(c);",
          "content_same": false
        },
        {
          "line": 4358,
          "old_api": null,
          "new_api": "ngx_memcpy",
          "old_text": null,
          "new_text": "ngx_memcpy(cid->id, f->cid, f->len)",
          "old_line_content": "",
          "new_line_content": "        ngx_memcpy(cid->id, f->cid, f->len);",
          "content_same": false
        },
        {
          "line": 4360,
          "old_api": null,
          "new_api": "ngx_memcpy",
          "old_text": null,
          "new_text": "ngx_memcpy(cid->sr_token, f->srt, NGX_QUIC_SR_TOKEN_LEN)",
          "old_line_content": "        cid->len = f->len;",
          "new_line_content": "        ngx_memcpy(cid->sr_token, f->srt, NGX_QUIC_SR_TOKEN_LEN);",
          "content_same": false
        },
        {
          "line": 4362,
          "old_api": null,
          "new_api": "ngx_queue_insert_tail",
          "old_text": null,
          "new_text": "ngx_queue_insert_tail(&qc->client_ids, &cid->queue)",
          "old_line_content": "",
          "new_line_content": "        ngx_queue_insert_tail(&qc->client_ids, &cid->queue);",
          "content_same": false
        },
        {
          "line": 6416,
          "old_api": null,
          "new_api": "ngx_min",
          "old_text": null,
          "new_text": "ngx_min(in->buf->last - in->buf->pos, b->end - b->last)",
          "old_line_content": "",
          "new_line_content": "            n = ngx_min(in->buf->last - in->buf->pos, b->end - b->last);",
          "content_same": false
        },
        {
          "line": 6422,
          "old_api": null,
          "new_api": "ngx_cpymem",
          "old_text": null,
          "new_text": "ngx_cpymem(b->last, in->buf->pos, n)",
          "old_line_content": "                n = limit;",
          "new_line_content": "            b->last = ngx_cpymem(b->last, in->buf->pos, n);",
          "content_same": false
        },
        {
          "line": 4387,
          "old_api": null,
          "new_api": "ngx_queue_head",
          "old_text": null,
          "new_text": "ngx_queue_head(&qc->client_ids)",
          "old_line_content": "",
          "new_line_content": "    q = ngx_queue_head(&qc->client_ids);",
          "content_same": false
        },
        {
          "line": 4389,
          "old_api": null,
          "new_api": "ngx_queue_sentinel",
          "old_text": null,
          "new_text": "ngx_queue_sentinel(&qc->client_ids)",
          "old_line_content": "",
          "new_line_content": "    while (q != ngx_queue_sentinel(&qc->client_ids)) {",
          "content_same": false
        },
        {
          "line": 4391,
          "old_api": null,
          "new_api": "ngx_queue_data",
          "old_text": null,
          "new_text": "ngx_queue_data(q, ngx_quic_client_id_t, queue)",
          "old_line_content": "",
          "new_line_content": "        cid = ngx_queue_data(q, ngx_quic_client_id_t, queue);",
          "content_same": false
        },
        {
          "line": 4400,
          "old_api": null,
          "new_api": "ngx_quic_retire_connection_id",
          "old_text": null,
          "new_text": "ngx_quic_retire_connection_id(c, pkt->level, cid->seqnum)",
          "old_line_content": "",
          "new_line_content": "        if (ngx_quic_retire_connection_id(c, pkt->level, cid->seqnum)",
          "content_same": false
        },
        {
          "line": 4406,
          "old_api": null,
          "new_api": "ngx_queue_remove",
          "old_text": null,
          "new_text": "ngx_queue_remove(&cid->queue)",
          "old_line_content": "            return NGX_ERROR;",
          "new_line_content": "        ngx_queue_remove(&cid->queue);",
          "content_same": false
        },
        {
          "line": 4407,
          "old_api": null,
          "new_api": "ngx_queue_insert_head",
          "old_text": null,
          "new_text": "ngx_queue_insert_head(&qc->free_client_ids, &cid->queue)",
          "old_line_content": "        }",
          "new_line_content": "        ngx_queue_insert_head(&qc->free_client_ids, &cid->queue);",
          "content_same": false
        },
        {
          "line": 6456,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    ngx_chain_t            *out;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 4437,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    ngx_quic_frame_t       *frame;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 4439,
          "old_api": null,
          "new_api": "ngx_quic_alloc_frame",
          "old_text": null,
          "new_text": "ngx_quic_alloc_frame(c)",
          "old_line_content": "",
          "new_line_content": "    frame = ngx_quic_alloc_frame(c);",
          "content_same": false
        },
        {
          "line": 6487,
          "old_api": null,
          "new_api": "ngx_alloc_buf",
          "old_text": null,
          "new_text": "ngx_alloc_buf(c->pool)",
          "old_line_content": "            qc->free_shadow_bufs = b->shadow;",
          "new_line_content": "            b = ngx_alloc_buf(c->pool);",
          "content_same": false
        },
        {
          "line": 4448,
          "old_api": null,
          "new_api": "ngx_quic_queue_frame",
          "old_text": null,
          "new_text": "ngx_quic_queue_frame(qc, frame)",
          "old_line_content": "    frame->type = NGX_QUIC_FT_RETIRE_CONNECTION_ID;",
          "new_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "content_same": false
        },
        {
          "line": 6499,
          "old_api": null,
          "new_api": "ngx_alloc_chain_link",
          "old_text": null,
          "new_text": "ngx_alloc_chain_link(c->pool)",
          "old_line_content": "        in->buf = b;",
          "new_line_content": "    out = ngx_alloc_chain_link(c->pool);",
          "content_same": false
        },
        {
          "line": 6509,
          "old_api": null,
          "new_api": "ngx_alloc_buf",
          "old_text": null,
          "new_text": "ngx_alloc_buf(c->pool)",
          "old_line_content": "        qc->free_shadow_bufs = b->shadow;",
          "new_line_content": "        b = ngx_alloc_buf(c->pool);",
          "content_same": false
        },
        {
          "line": 4462,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    ngx_quic_server_id_t   *sid;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 6511,
          "old_api": null,
          "new_api": "ngx_free_chain",
          "old_text": null,
          "new_text": "ngx_free_chain(c->pool, out)",
          "old_line_content": "    } else {",
          "new_line_content": "            ngx_free_chain(c->pool, out);",
          "content_same": false
        },
        {
          "line": 4464,
          "old_api": null,
          "new_api": "ngx_queue_head",
          "old_text": null,
          "new_text": "ngx_queue_head(&qc->server_ids)",
          "old_line_content": "",
          "new_line_content": "    for (q = ngx_queue_head(&qc->server_ids);",
          "content_same": false
        },
        {
          "line": 4466,
          "old_api": null,
          "new_api": "ngx_queue_next",
          "old_text": null,
          "new_text": "ngx_queue_next(q)",
          "old_line_content": "",
          "new_line_content": "         q = ngx_queue_next(q))",
          "content_same": false
        },
        {
          "line": 4472,
          "old_api": null,
          "new_api": "ngx_queue_insert_tail",
          "old_text": null,
          "new_text": "ngx_queue_insert_tail(&qc->free_server_ids, &sid->queue)",
          "old_line_content": "",
          "new_line_content": "            ngx_queue_insert_tail(&qc->free_server_ids, &sid->queue);",
          "content_same": false
        },
        {
          "line": 4473,
          "old_api": null,
          "new_api": "ngx_rbtree_delete",
          "old_text": null,
          "new_text": "ngx_rbtree_delete(&c->listening->rbtree, &sid->udp.node)",
          "old_line_content": "        if (sid->seqnum == f->sequence_number) {",
          "new_line_content": "            ngx_rbtree_delete(&c->listening->rbtree, &sid->udp.node);",
          "content_same": false
        },
        {
          "line": 4479,
          "old_api": null,
          "new_api": "ngx_quic_issue_server_ids",
          "old_text": null,
          "new_text": "ngx_quic_issue_server_ids(c)",
          "old_line_content": "        }",
          "new_line_content": "    return ngx_quic_issue_server_ids(c);",
          "content_same": false
        },
        {
          "line": 4493,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    ngx_quic_connection_t  *qc;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 4495,
          "old_api": null,
          "new_api": "ngx_min",
          "old_text": null,
          "new_text": "ngx_min(NGX_QUIC_MAX_SERVER_IDS, qc->ctp.active_connection_id_limit)",
          "old_line_content": "",
          "new_line_content": "    n = ngx_min(NGX_QUIC_MAX_SERVER_IDS, qc->ctp.active_connection_id_limit);",
          "content_same": false
        },
        {
          "line": 4497,
          "old_api": null,
          "new_api": "ngx_log_debug2",
          "old_text": null,
          "new_text": "ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic issue server ids has:%ui max:%ui\", qc->nserver_ids, n)",
          "old_line_content": "",
          "new_line_content": "    ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 4501,
          "old_api": null,
          "new_api": "ngx_quic_create_server_id",
          "old_text": null,
          "new_text": "ngx_quic_create_server_id(c, id)",
          "old_line_content": "                   \"quic issue server ids has:%ui max:%ui\", qc->nserver_ids, n);",
          "new_line_content": "        if (ngx_quic_create_server_id(c, id) != NGX_OK) {",
          "content_same": false
        },
        {
          "line": 4508,
          "old_api": null,
          "new_api": "ngx_quic_insert_server_id",
          "old_text": null,
          "new_text": "ngx_quic_insert_server_id(c, &dcid)",
          "old_line_content": "        dcid.len = NGX_QUIC_SERVER_CID_LEN;",
          "new_line_content": "        sid = ngx_quic_insert_server_id(c, &dcid);",
          "content_same": false
        },
        {
          "line": 4513,
          "old_api": null,
          "new_api": "ngx_quic_alloc_frame",
          "old_text": null,
          "new_text": "ngx_quic_alloc_frame(c)",
          "old_line_content": "            return NGX_ERROR;",
          "new_line_content": "        frame = ngx_quic_alloc_frame(c);",
          "content_same": false
        },
        {
          "line": 4523,
          "old_api": null,
          "new_api": "ngx_memcpy",
          "old_text": null,
          "new_text": "ngx_memcpy(frame->u.ncid.cid, id, NGX_QUIC_SERVER_CID_LEN)",
          "old_line_content": "        frame->u.ncid.seqnum = sid->seqnum;",
          "new_line_content": "        ngx_memcpy(frame->u.ncid.cid, id, NGX_QUIC_SERVER_CID_LEN);",
          "content_same": false
        },
        {
          "line": 4525,
          "old_api": null,
          "new_api": "ngx_quic_new_sr_token",
          "old_text": null,
          "new_text": "ngx_quic_new_sr_token(c, &dcid, &qc->conf->sr_token_key,\n                                  frame->u.ncid.srt)",
          "old_line_content": "        frame->u.ncid.len = NGX_QUIC_SERVER_CID_LEN;",
          "new_line_content": "        if (ngx_quic_new_sr_token(c, &dcid, &qc->conf->sr_token_key,",
          "content_same": false
        },
        {
          "line": 4532,
          "old_api": null,
          "new_api": "ngx_quic_queue_frame",
          "old_text": null,
          "new_text": "ngx_quic_queue_frame(qc, frame)",
          "old_line_content": "            return NGX_ERROR;",
          "new_line_content": "        ngx_quic_queue_frame(qc, frame);",
          "content_same": false
        },
        {
          "line": 4546,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    ngx_quic_server_id_t   *sid;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 4548,
          "old_api": null,
          "new_api": "ngx_log_debug0",
          "old_text": null,
          "new_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic clear temp server ids\")",
          "old_line_content": "",
          "new_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 4552,
          "old_api": null,
          "new_api": "ngx_queue_sentinel",
          "old_text": null,
          "new_text": "ngx_queue_sentinel(&qc->server_ids)",
          "old_line_content": "                   \"quic clear temp server ids\");",
          "new_line_content": "         q != ngx_queue_sentinel(&qc->server_ids);",
          "content_same": false
        },
        {
          "line": 4556,
          "old_api": null,
          "new_api": "ngx_queue_data",
          "old_text": null,
          "new_text": "ngx_queue_data(q, ngx_quic_server_id_t, queue)",
          "old_line_content": "         q = next)",
          "new_line_content": "        sid = ngx_queue_data(q, ngx_quic_server_id_t, queue);",
          "content_same": false
        },
        {
          "line": 4562,
          "old_api": null,
          "new_api": "ngx_queue_remove",
          "old_text": null,
          "new_text": "ngx_queue_remove(q)",
          "old_line_content": "            continue;",
          "new_line_content": "        ngx_queue_remove(q);",
          "content_same": false
        },
        {
          "line": 4563,
          "old_api": null,
          "new_api": "ngx_queue_insert_tail",
          "old_text": null,
          "new_text": "ngx_queue_insert_tail(&qc->free_server_ids, &sid->queue)",
          "old_line_content": "        }",
          "new_line_content": "        ngx_queue_insert_tail(&qc->free_server_ids, &sid->queue);",
          "content_same": false
        },
        {
          "line": 4564,
          "old_api": null,
          "new_api": "ngx_rbtree_delete",
          "old_text": null,
          "new_text": "ngx_rbtree_delete(&c->listening->rbtree, &sid->udp.node)",
          "old_line_content": "",
          "new_line_content": "        ngx_rbtree_delete(&c->listening->rbtree, &sid->udp.node);",
          "content_same": false
        },
        {
          "line": 4577,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    ngx_quic_server_id_t   *sid;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 4579,
          "old_api": null,
          "new_api": "ngx_quic_alloc_server_id",
          "old_text": null,
          "new_text": "ngx_quic_alloc_server_id(c, qc)",
          "old_line_content": "",
          "new_line_content": "    sid = ngx_quic_alloc_server_id(c, qc);",
          "content_same": false
        },
        {
          "line": 4591,
          "old_api": null,
          "new_api": "ngx_memcpy",
          "old_text": null,
          "new_text": "ngx_memcpy(sid->id, id->data, id->len)",
          "old_line_content": "    }",
          "new_line_content": "    ngx_memcpy(sid->id, id->data, id->len);",
          "content_same": false
        },
        {
          "line": 4593,
          "old_api": null,
          "new_api": "ngx_queue_insert_tail",
          "old_text": null,
          "new_text": "ngx_queue_insert_tail(&qc->server_ids, &sid->queue)",
          "old_line_content": "    sid->len = id->len;",
          "new_line_content": "    ngx_queue_insert_tail(&qc->server_ids, &sid->queue);",
          "content_same": false
        },
        {
          "line": 4599,
          "old_api": null,
          "new_api": "ngx_insert_udp_connection",
          "old_text": null,
          "new_text": "ngx_insert_udp_connection(c, &sid->udp, &dcid)",
          "old_line_content": "    dcid.data = sid->id;",
          "new_line_content": "    ngx_insert_udp_connection(c, &sid->udp, &dcid);",
          "content_same": false
        },
        {
          "line": 4601,
          "old_api": null,
          "new_api": "ngx_log_debug3",
          "old_text": null,
          "new_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic insert server id seqnum:%uL id len:%uz %xV\",\n                   sid->seqnum, id->len, id)",
          "old_line_content": "",
          "new_line_content": "    ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 4615,
          "old_api": null,
          "new_api": "ngx_queue_empty",
          "old_text": null,
          "new_text": "ngx_queue_empty(&qc->free_client_ids)",
          "old_line_content": "    ngx_queue_t           *q;",
          "new_line_content": "    if (!ngx_queue_empty(&qc->free_client_ids)) {",
          "content_same": false
        },
        {
          "line": 4617,
          "old_api": null,
          "new_api": "ngx_queue_head",
          "old_text": null,
          "new_text": "ngx_queue_head(&qc->free_client_ids)",
          "old_line_content": "",
          "new_line_content": "        q = ngx_queue_head(&qc->free_client_ids);",
          "content_same": false
        },
        {
          "line": 4622,
          "old_api": null,
          "new_api": "ngx_memzero",
          "old_text": null,
          "new_text": "ngx_memzero(cid, sizeof(ngx_quic_client_id_t))",
          "old_line_content": "",
          "new_line_content": "        ngx_memzero(cid, sizeof(ngx_quic_client_id_t));",
          "content_same": false
        },
        {
          "line": 4626,
          "old_api": null,
          "new_api": "ngx_pcalloc",
          "old_text": null,
          "new_text": "ngx_pcalloc(c->pool, sizeof(ngx_quic_client_id_t))",
          "old_line_content": "",
          "new_line_content": "        cid = ngx_pcalloc(c->pool, sizeof(ngx_quic_client_id_t));",
          "content_same": false
        },
        {
          "line": 4642,
          "old_api": null,
          "new_api": "ngx_queue_empty",
          "old_text": null,
          "new_text": "ngx_queue_empty(&qc->free_server_ids)",
          "old_line_content": "    ngx_queue_t           *q;",
          "new_line_content": "    if (!ngx_queue_empty(&qc->free_server_ids)) {",
          "content_same": false
        },
        {
          "line": 4644,
          "old_api": null,
          "new_api": "ngx_queue_head",
          "old_text": null,
          "new_text": "ngx_queue_head(&qc->free_server_ids)",
          "old_line_content": "",
          "new_line_content": "        q = ngx_queue_head(&qc->free_server_ids);",
          "content_same": false
        },
        {
          "line": 4649,
          "old_api": null,
          "new_api": "ngx_memzero",
          "old_text": null,
          "new_text": "ngx_memzero(sid, sizeof(ngx_quic_server_id_t))",
          "old_line_content": "",
          "new_line_content": "        ngx_memzero(sid, sizeof(ngx_quic_server_id_t));",
          "content_same": false
        },
        {
          "line": 4653,
          "old_api": null,
          "new_api": "ngx_pcalloc",
          "old_text": null,
          "new_text": "ngx_pcalloc(c->pool, sizeof(ngx_quic_server_id_t))",
          "old_line_content": "",
          "new_line_content": "        sid = ngx_pcalloc(c->pool, sizeof(ngx_quic_server_id_t));",
          "content_same": false
        },
        {
          "line": 4668,
          "old_api": null,
          "new_api": "ngx_quic_get_send_ctx",
          "old_text": null,
          "new_text": "ngx_quic_get_send_ctx(qc, frame->level)",
          "old_line_content": "{",
          "new_line_content": "    ctx = ngx_quic_get_send_ctx(qc, frame->level);",
          "content_same": false
        },
        {
          "line": 4670,
          "old_api": null,
          "new_api": "ngx_queue_insert_tail",
          "old_text": null,
          "new_text": "ngx_queue_insert_tail(&ctx->frames, &frame->queue)",
          "old_line_content": "",
          "new_line_content": "    ngx_queue_insert_tail(&ctx->frames, &frame->queue);",
          "content_same": false
        },
        {
          "line": 4672,
          "old_api": null,
          "new_api": "ngx_quic_create_frame",
          "old_text": null,
          "new_text": "ngx_quic_create_frame(NULL, frame)",
          "old_line_content": "",
          "new_line_content": "    frame->len = ngx_quic_create_frame(NULL, frame);",
          "content_same": false
        },
        {
          "line": 4679,
          "old_api": null,
          "new_api": "ngx_post_event",
          "old_text": null,
          "new_text": "ngx_post_event(&qc->push, &ngx_posted_events)",
          "old_line_content": "        return;",
          "new_line_content": "    ngx_post_event(&qc->push, &ngx_posted_events);",
          "content_same": false
        },
        {
          "line": 4697,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 4702,
          "old_api": null,
          "new_api": "ngx_min",
          "old_text": null,
          "new_text": "ngx_min(qc->ctp.max_udp_payload_size,\n                      NGX_QUIC_MAX_UDP_PAYLOAD_SIZE)",
          "old_line_content": "    for ( ;; ) {",
          "new_line_content": "        len = ngx_min(qc->ctp.max_udp_payload_size,",
          "content_same": false
        },
        {
          "line": 4708,
          "old_api": null,
          "new_api": "ngx_min",
          "old_text": null,
          "new_text": "ngx_min(len, (size_t) max)",
          "old_line_content": "        if (!qc->validated) {",
          "new_line_content": "            len = ngx_min(len, (size_t) max);",
          "content_same": false
        },
        {
          "line": 4717,
          "old_api": null,
          "new_api": "ngx_quic_generate_ack",
          "old_text": null,
          "new_text": "ngx_quic_generate_ack(c, ctx)",
          "old_line_content": "",
          "new_line_content": "            if (ngx_quic_generate_ack(c, ctx) != NGX_OK) {",
          "content_same": false
        },
        {
          "line": 4724,
          "old_api": null,
          "new_api": "ngx_quic_output_packet",
          "old_text": null,
          "new_text": "ngx_quic_output_packet(c, ctx, p, len, min)",
          "old_line_content": "            min = (i == pad && p - dst < NGX_QUIC_MIN_INITIAL_SIZE)",
          "new_line_content": "            n = ngx_quic_output_packet(c, ctx, p, len, min);",
          "content_same": false
        },
        {
          "line": 4738,
          "old_api": null,
          "new_api": "ngx_quic_send",
          "old_text": null,
          "new_text": "ngx_quic_send(c, dst, len)",
          "old_line_content": "            break;",
          "new_line_content": "        n = ngx_quic_send(c, dst, len);",
          "content_same": false
        },
        {
          "line": 4745,
          "old_api": null,
          "new_api": "ngx_add_timer",
          "old_text": null,
          "new_text": "ngx_add_timer(c->read, qc->tp.max_idle_timeout)",
          "old_line_content": "",
          "new_line_content": "            ngx_add_timer(c->read, qc->tp.max_idle_timeout);",
          "content_same": false
        },
        {
          "line": 4769,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "     * allowed maximum datagram size of 1200 bytes",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 4770,
          "old_api": null,
          "new_api": "ngx_quic_get_send_ctx",
          "old_text": null,
          "new_text": "ngx_quic_get_send_ctx(qc, ssl_encryption_initial)",
          "old_line_content": "     */",
          "new_line_content": "    ctx = ngx_quic_get_send_ctx(qc, ssl_encryption_initial);",
          "content_same": false
        },
        {
          "line": 4774,
          "old_api": null,
          "new_api": "ngx_queue_next",
          "old_text": null,
          "new_text": "ngx_queue_next(q)",
          "old_line_content": "",
          "new_line_content": "         q = ngx_queue_next(q))",
          "content_same": false
        },
        {
          "line": 4781,
          "old_api": null,
          "new_api": "ngx_queue_empty",
          "old_text": null,
          "new_text": "ngx_queue_empty(&ctx->frames)",
          "old_line_content": "        if (f->need_ack) {",
          "new_line_content": "            if (ngx_queue_empty(&ctx->frames)) {",
          "content_same": false
        },
        {
          "line": 4806,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    if (ctx->level == ssl_encryption_application)  {",
          "new_line_content": "        qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 4812,
          "old_api": null,
          "new_api": "ngx_add_timer",
          "old_text": null,
          "new_text": "ngx_add_timer(&qc->push,\n                              qc->tp.max_ack_delay - delay)",
          "old_line_content": "            && delay < qc->tp.max_ack_delay)",
          "new_line_content": "                ngx_add_timer(&qc->push,",
          "content_same": false
        },
        {
          "line": 4820,
          "old_api": null,
          "new_api": "ngx_quic_send_ack",
          "old_text": null,
          "new_text": "ngx_quic_send_ack(c, ctx)",
          "old_line_content": "        }",
          "new_line_content": "    if (ngx_quic_send_ack(c, ctx) != NGX_OK) {",
          "content_same": false
        },
        {
          "line": 4848,
          "old_api": null,
          "new_api": "ngx_queue_empty",
          "old_text": null,
          "new_text": "ngx_queue_empty(&ctx->frames)",
          "old_line_content": "    ngx_quic_connection_t  *qc;",
          "new_line_content": "    if (ngx_queue_empty(&ctx->frames)) {",
          "content_same": false
        },
        {
          "line": 4852,
          "old_api": null,
          "new_api": "ngx_log_debug3",
          "old_text": null,
          "new_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic output %s packet max:%uz min:%uz\",\n                   ngx_quic_level_name(ctx->level), max, min)",
          "old_line_content": "        return 0;",
          "new_line_content": "    ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 4854,
          "old_api": null,
          "new_api": "ngx_quic_level_name",
          "old_text": null,
          "new_text": "ngx_quic_level_name(ctx->level)",
          "old_line_content": "",
          "new_line_content": "                   ngx_quic_level_name(ctx->level), max, min);",
          "content_same": false
        },
        {
          "line": 4856,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "                   \"quic output %s packet max:%uz min:%uz\",",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 4866,
          "old_api": null,
          "new_api": "ngx_memzero",
          "old_text": null,
          "new_text": "ngx_memzero(&pkt, sizeof(ngx_quic_header_t))",
          "old_line_content": "    hlen += EVP_GCM_TLS_TAG_LEN;",
          "new_line_content": "    ngx_memzero(&pkt, sizeof(ngx_quic_header_t));",
          "content_same": false
        },
        {
          "line": 4873,
          "old_api": null,
          "new_api": "ngx_queue_head",
          "old_text": null,
          "new_text": "ngx_queue_head(&ctx->frames)",
          "old_line_content": "    p = src;",
          "new_line_content": "    for (q = ngx_queue_head(&ctx->frames);",
          "content_same": false
        },
        {
          "line": 4874,
          "old_api": null,
          "new_api": "ngx_queue_sentinel",
          "old_text": null,
          "new_text": "ngx_queue_sentinel(&ctx->frames)",
          "old_line_content": "    len = 0;",
          "new_line_content": "         q != ngx_queue_sentinel(&ctx->frames);",
          "content_same": false
        },
        {
          "line": 4875,
          "old_api": null,
          "new_api": "ngx_queue_next",
          "old_text": null,
          "new_text": "ngx_queue_next(q)",
          "old_line_content": "",
          "new_line_content": "         q = ngx_queue_next(q))",
          "content_same": false
        },
        {
          "line": 4888,
          "old_api": null,
          "new_api": "ngx_quic_split_frame",
          "old_text": null,
          "new_text": "ngx_quic_split_frame(c, f, max - hlen - len)",
          "old_line_content": "        }",
          "new_line_content": "            rc = ngx_quic_split_frame(c, f, max - hlen - len);",
          "content_same": false
        },
        {
          "line": 4903,
          "old_api": null,
          "new_api": "ngx_quic_log_frame",
          "old_text": null,
          "new_text": "ngx_quic_log_frame(c->log, f, 1)",
          "old_line_content": "            pkt.need_ack = 1;",
          "new_line_content": "        ngx_quic_log_frame(c->log, f, 1);",
          "content_same": false
        },
        {
          "line": 4905,
          "old_api": null,
          "new_api": "ngx_quic_create_frame",
          "old_text": null,
          "new_text": "ngx_quic_create_frame(p, f)",
          "old_line_content": "",
          "new_line_content": "        flen = ngx_quic_create_frame(p, f);",
          "content_same": false
        },
        {
          "line": 4943,
          "old_api": null,
          "new_api": "ngx_quic_set_packet_number",
          "old_text": null,
          "new_text": "ngx_quic_set_packet_number(&pkt, ctx)",
          "old_line_content": "        }",
          "new_line_content": "    ngx_quic_set_packet_number(&pkt, ctx);",
          "content_same": false
        },
        {
          "line": 4955,
          "old_api": null,
          "new_api": "ngx_quic_create_header",
          "old_text": null,
          "new_text": "ngx_quic_create_header(&pkt, NULL, out.len, NULL)",
          "old_line_content": "",
          "new_line_content": "               + ngx_quic_create_header(&pkt, NULL, out.len, NULL);",
          "content_same": false
        },
        {
          "line": 4963,
          "old_api": null,
          "new_api": "ngx_memset",
          "old_text": null,
          "new_text": "ngx_memset(p, NGX_QUIC_FT_PADDING, pad_len - out.len)",
          "old_line_content": "    }",
          "new_line_content": "        ngx_memset(p, NGX_QUIC_FT_PADDING, pad_len - out.len);",
          "content_same": false
        },
        {
          "line": 4971,
          "old_api": null,
          "new_api": "ngx_log_debug6",
          "old_text": null,
          "new_text": "ngx_log_debug6(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic packet tx %s bytes:%ui\"\n                   \" need_ack:%d number:%L encoded nl:%d trunc:0x%xD\",\n                   ngx_quic_level_name(ctx->level), out.len, pkt.need_ack,\n                   pkt.number, pkt.num_len, pkt.trunc)",
          "old_line_content": "",
          "new_line_content": "    ngx_log_debug6(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 4987,
          "old_api": null,
          "new_api": "ngx_queue_head",
          "old_text": null,
          "new_text": "ngx_queue_head(&ctx->frames)",
          "old_line_content": "        /* move frames into the sent queue to wait for ack */",
          "new_line_content": "            q = ngx_queue_head(&ctx->frames);",
          "content_same": false
        },
        {
          "line": 4988,
          "old_api": null,
          "new_api": "ngx_queue_data",
          "old_text": null,
          "new_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "old_line_content": "",
          "new_line_content": "            f = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "content_same": false
        },
        {
          "line": 4992,
          "old_api": null,
          "new_api": "ngx_queue_head",
          "old_text": null,
          "new_text": "ngx_queue_head(&ctx->frames)",
          "old_line_content": "            f->plen = res.len;",
          "new_line_content": "                q = ngx_queue_head(&ctx->frames);",
          "content_same": false
        },
        {
          "line": 4993,
          "old_api": null,
          "new_api": "ngx_queue_remove",
          "old_text": null,
          "new_text": "ngx_queue_remove(q)",
          "old_line_content": "",
          "new_line_content": "                ngx_queue_remove(q);",
          "content_same": false
        },
        {
          "line": 4994,
          "old_api": null,
          "new_api": "ngx_queue_insert_tail",
          "old_text": null,
          "new_text": "ngx_queue_insert_tail(&ctx->sent, q)",
          "old_line_content": "            do {",
          "new_line_content": "                ngx_queue_insert_tail(&ctx->sent, q);",
          "content_same": false
        },
        {
          "line": 4998,
          "old_api": null,
          "new_api": "ngx_del_timer",
          "old_text": null,
          "new_text": "ngx_del_timer(&qc->pto)",
          "old_line_content": "            } while (--nframes);",
          "new_line_content": "                ngx_del_timer(&qc->pto);",
          "content_same": false
        },
        {
          "line": 5006,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic congestion send if:%uz\", cg->in_flight)",
          "old_line_content": "",
          "new_line_content": "        ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 5011,
          "old_api": null,
          "new_api": "ngx_queue_head",
          "old_text": null,
          "new_text": "ngx_queue_head(&ctx->frames)",
          "old_line_content": "    }",
          "new_line_content": "        q = ngx_queue_head(&ctx->frames);",
          "content_same": false
        },
        {
          "line": 5012,
          "old_api": null,
          "new_api": "ngx_queue_data",
          "old_text": null,
          "new_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "old_line_content": "",
          "new_line_content": "        f = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "content_same": false
        },
        {
          "line": 5051,
          "old_api": null,
          "new_api": "ngx_log_debug3",
          "old_text": null,
          "new_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic split frame now:%uz need:%uz shrink:%uz\",\n                   f->len, len, shrink)",
          "old_line_content": "",
          "new_line_content": "    ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 5062,
          "old_api": null,
          "new_api": "ngx_quic_create_frame",
          "old_text": null,
          "new_text": "ngx_quic_create_frame(NULL, f)",
          "old_line_content": "    }",
          "new_line_content": "    f->len = ngx_quic_create_frame(NULL, f);",
          "content_same": false
        },
        {
          "line": 5069,
          "old_api": null,
          "new_api": "ngx_quic_alloc_frame",
          "old_text": null,
          "new_text": "ngx_quic_alloc_frame(c)",
          "old_line_content": "        return NGX_ERROR;",
          "new_line_content": "    nf = ngx_quic_alloc_frame(c);",
          "content_same": false
        },
        {
          "line": 5078,
          "old_api": null,
          "new_api": "ngx_quic_create_frame",
          "old_text": null,
          "new_text": "ngx_quic_create_frame(NULL, nf)",
          "old_line_content": "    onf = &nf->u.ord;",
          "new_line_content": "    nf->len = ngx_quic_create_frame(NULL, nf);",
          "content_same": false
        },
        {
          "line": 5080,
          "old_api": null,
          "new_api": "ngx_quic_split_bufs",
          "old_text": null,
          "new_text": "ngx_quic_split_bufs(c, f->data, of->length)",
          "old_line_content": "    onf->length = shrink;",
          "new_line_content": "    nf->data = ngx_quic_split_bufs(c, f->data, of->length);",
          "content_same": false
        },
        {
          "line": 5085,
          "old_api": null,
          "new_api": "ngx_queue_insert_after",
          "old_text": null,
          "new_text": "ngx_queue_insert_after(&f->queue, &nf->queue)",
          "old_line_content": "        return NGX_ERROR;",
          "new_line_content": "    ngx_queue_insert_after(&f->queue, &nf->queue);",
          "content_same": false
        },
        {
          "line": 5098,
          "old_api": null,
          "new_api": "ngx_queue_head",
          "old_text": null,
          "new_text": "ngx_queue_head(frames)",
          "old_line_content": "    ngx_quic_frame_t  *f;",
          "new_line_content": "        q = ngx_queue_head(frames);",
          "content_same": false
        },
        {
          "line": 5100,
          "old_api": null,
          "new_api": "ngx_queue_sentinel",
          "old_text": null,
          "new_text": "ngx_queue_sentinel(frames)",
          "old_line_content": "    do {",
          "new_line_content": "        if (q == ngx_queue_sentinel(frames)) {",
          "content_same": false
        },
        {
          "line": 5104,
          "old_api": null,
          "new_api": "ngx_queue_remove",
          "old_text": null,
          "new_text": "ngx_queue_remove(q)",
          "old_line_content": "            break;",
          "new_line_content": "        ngx_queue_remove(q);",
          "content_same": false
        },
        {
          "line": 5106,
          "old_api": null,
          "new_api": "ngx_queue_data",
          "old_text": null,
          "new_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "old_line_content": "",
          "new_line_content": "        f = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "content_same": false
        },
        {
          "line": 5108,
          "old_api": null,
          "new_api": "ngx_quic_free_frame",
          "old_text": null,
          "new_text": "ngx_quic_free_frame(c, f)",
          "old_line_content": "",
          "new_line_content": "        ngx_quic_free_frame(c, f);",
          "content_same": false
        },
        {
          "line": 5119,
          "old_api": null,
          "new_api": "ngx_memzero",
          "old_text": null,
          "new_text": "ngx_memzero(&b, sizeof(ngx_buf_t))",
          "old_line_content": "    ngx_buf_t    b;",
          "new_line_content": "    ngx_memzero(&b, sizeof(ngx_buf_t));",
          "content_same": false
        },
        {
          "line": 5129,
          "old_api": null,
          "new_api": "send_chain",
          "old_text": null,
          "new_text": "c->send_chain(c, &cl, 0)",
          "old_line_content": "    cl.buf = &b;",
          "new_line_content": "    res = c->send_chain(c, &cl, 0);",
          "content_same": false
        },
        {
          "line": 5178,
          "old_api": null,
          "new_api": "ngx_log_debug0",
          "old_text": null,
          "new_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, ev->log, 0, \"quic pto timer\")",
          "old_line_content": "    ngx_quic_send_ctx_t    *ctx;",
          "new_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_EVENT, ev->log, 0, \"quic pto timer\");",
          "content_same": false
        },
        {
          "line": 5189,
          "old_api": null,
          "new_api": "ngx_queue_empty",
          "old_text": null,
          "new_text": "ngx_queue_empty(&ctx->sent)",
          "old_line_content": "",
          "new_line_content": "        if (ngx_queue_empty(&ctx->sent)) {",
          "content_same": false
        },
        {
          "line": 5193,
          "old_api": null,
          "new_api": "ngx_queue_head",
          "old_text": null,
          "new_text": "ngx_queue_head(&ctx->sent)",
          "old_line_content": "            continue;",
          "new_line_content": "        q = ngx_queue_head(&ctx->sent);",
          "content_same": false
        },
        {
          "line": 5194,
          "old_api": null,
          "new_api": "ngx_queue_data",
          "old_text": null,
          "new_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "old_line_content": "        }",
          "new_line_content": "        start = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "content_same": false
        },
        {
          "line": 5202,
          "old_api": null,
          "new_api": "ngx_log_debug3",
          "old_text": null,
          "new_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic pto pnum:%uL pto_count:%ui level:%d\",\n                       start->pnum, qc->pto_count, start->level)",
          "old_line_content": "            continue;",
          "new_line_content": "        ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 5206,
          "old_api": null,
          "new_api": "ngx_quic_resend_frames",
          "old_text": null,
          "new_text": "ngx_quic_resend_frames(c, ctx)",
          "old_line_content": "                       \"quic pto pnum:%uL pto_count:%ui level:%d\",",
          "new_line_content": "        ngx_quic_resend_frames(c, ctx);",
          "content_same": false
        },
        {
          "line": 5218,
          "old_api": null,
          "new_api": "ngx_log_debug0",
          "old_text": null,
          "new_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, ev->log, 0, \"quic push timer\")",
          "old_line_content": "{",
          "new_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_EVENT, ev->log, 0, \"quic push timer\");",
          "content_same": false
        },
        {
          "line": 5222,
          "old_api": null,
          "new_api": "ngx_quic_output",
          "old_text": null,
          "new_text": "ngx_quic_output(c)",
          "old_line_content": "",
          "new_line_content": "    if (ngx_quic_output(c) != NGX_OK) {",
          "content_same": false
        },
        {
          "line": 5223,
          "old_api": null,
          "new_api": "ngx_quic_close_connection",
          "old_text": null,
          "new_text": "ngx_quic_close_connection(c, NGX_ERROR)",
          "old_line_content": "    c = ev->data;",
          "new_line_content": "        ngx_quic_close_connection(c, NGX_ERROR);",
          "content_same": false
        },
        {
          "line": 5227,
          "old_api": null,
          "new_api": "ngx_quic_connstate_dbg",
          "old_text": null,
          "new_text": "ngx_quic_connstate_dbg(c)",
          "old_line_content": "        return;",
          "new_line_content": "    ngx_quic_connstate_dbg(c);",
          "content_same": false
        },
        {
          "line": 5236,
          "old_api": null,
          "new_api": "ngx_log_debug0",
          "old_text": null,
          "new_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, ev->log, 0, \"quic lost timer\")",
          "old_line_content": "{",
          "new_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_EVENT, ev->log, 0, \"quic lost timer\");",
          "content_same": false
        },
        {
          "line": 5240,
          "old_api": null,
          "new_api": "ngx_quic_detect_lost",
          "old_text": null,
          "new_text": "ngx_quic_detect_lost(c)",
          "old_line_content": "",
          "new_line_content": "    if (ngx_quic_detect_lost(c) != NGX_OK) {",
          "content_same": false
        },
        {
          "line": 5241,
          "old_api": null,
          "new_api": "ngx_quic_close_connection",
          "old_text": null,
          "new_text": "ngx_quic_close_connection(c, NGX_ERROR)",
          "old_line_content": "    c = ev->data;",
          "new_line_content": "        ngx_quic_close_connection(c, NGX_ERROR);",
          "content_same": false
        },
        {
          "line": 5258,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    ngx_quic_send_ctx_t    *ctx;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 5263,
          "old_api": null,
          "new_api": "ngx_max",
          "old_text": null,
          "new_text": "ngx_max(qc->latest_rtt, qc->avg_rtt)",
          "old_line_content": "",
          "new_line_content": "    thr = NGX_QUIC_TIME_THR * ngx_max(qc->latest_rtt, qc->avg_rtt);",
          "content_same": false
        },
        {
          "line": 5264,
          "old_api": null,
          "new_api": "ngx_max",
          "old_text": null,
          "new_text": "ngx_max(thr, NGX_QUIC_TIME_GRANULARITY)",
          "old_line_content": "    min_wait = 0;",
          "new_line_content": "    thr = ngx_max(thr, NGX_QUIC_TIME_GRANULARITY);",
          "content_same": false
        },
        {
          "line": 5274,
          "old_api": null,
          "new_api": "ngx_queue_empty",
          "old_text": null,
          "new_text": "ngx_queue_empty(&ctx->sent)",
          "old_line_content": "            continue;",
          "new_line_content": "        while (!ngx_queue_empty(&ctx->sent)) {",
          "content_same": false
        },
        {
          "line": 5276,
          "old_api": null,
          "new_api": "ngx_queue_head",
          "old_text": null,
          "new_text": "ngx_queue_head(&ctx->sent)",
          "old_line_content": "",
          "new_line_content": "            q = ngx_queue_head(&ctx->sent);",
          "content_same": false
        },
        {
          "line": 5285,
          "old_api": null,
          "new_api": "ngx_log_debug4",
          "old_text": null,
          "new_text": "ngx_log_debug4(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                           \"quic detect_lost pnum:%uL thr:%M wait:%i level:%d\",\n                           start->pnum, thr, (ngx_int_t) wait, start->level)",
          "old_line_content": "",
          "new_line_content": "            ngx_log_debug4(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 5300,
          "old_api": null,
          "new_api": "ngx_quic_resend_frames",
          "old_text": null,
          "new_text": "ngx_quic_resend_frames(c, ctx)",
          "old_line_content": "                break;",
          "new_line_content": "            ngx_quic_resend_frames(c, ctx);",
          "content_same": false
        },
        {
          "line": 5314,
          "old_api": null,
          "new_api": "ngx_del_timer",
          "old_text": null,
          "new_text": "ngx_del_timer(&qc->pto)",
          "old_line_content": "    qc->pto.handler = ngx_quic_lost_handler;",
          "new_line_content": "        ngx_del_timer(&qc->pto);",
          "content_same": false
        },
        {
          "line": 3284,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 5333,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    ngx_quic_stream_t      *sn;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 5334,
          "old_api": null,
          "new_api": "ngx_queue_head",
          "old_text": null,
          "new_text": "ngx_queue_head(&ctx->sent)",
          "old_line_content": "    ngx_quic_connection_t  *qc;",
          "new_line_content": "    q = ngx_queue_head(&ctx->sent);",
          "content_same": false
        },
        {
          "line": 5335,
          "old_api": null,
          "new_api": "ngx_queue_data",
          "old_text": null,
          "new_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "old_line_content": "",
          "new_line_content": "    start = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "content_same": false
        },
        {
          "line": 3289,
          "old_api": null,
          "new_api": "ngx_queue_last",
          "old_text": null,
          "new_text": "ngx_queue_last(&ctx->sent)",
          "old_line_content": "    found_num = 0;",
          "new_line_content": "    q = ngx_queue_last(&ctx->sent);",
          "content_same": false
        },
        {
          "line": 3294,
          "old_api": null,
          "new_api": "ngx_queue_prev",
          "old_text": null,
          "new_text": "ngx_queue_prev(q)",
          "old_line_content": "",
          "new_line_content": "        q = ngx_queue_prev(q);",
          "content_same": false
        },
        {
          "line": 3297,
          "old_api": null,
          "new_api": "ngx_quic_congestion_ack",
          "old_text": null,
          "new_text": "ngx_quic_congestion_ack(c, f)",
          "old_line_content": "",
          "new_line_content": "            ngx_quic_congestion_ack(c, f);",
          "content_same": false
        },
        {
          "line": 5349,
          "old_api": null,
          "new_api": "ngx_queue_next",
          "old_text": null,
          "new_text": "ngx_queue_next(q)",
          "old_line_content": "            break;",
          "new_line_content": "        q = ngx_queue_next(q);",
          "content_same": false
        },
        {
          "line": 3302,
          "old_api": null,
          "new_api": "ngx_quic_drop_ack_ranges",
          "old_text": null,
          "new_text": "ngx_quic_drop_ack_ranges(c, ctx, f->u.ack.largest)",
          "old_line_content": "            case NGX_QUIC_FT_ACK:",
          "new_line_content": "                ngx_quic_drop_ack_ranges(c, ctx, f->u.ack.largest);",
          "content_same": false
        },
        {
          "line": 5351,
          "old_api": null,
          "new_api": "ngx_queue_remove",
          "old_text": null,
          "new_text": "ngx_queue_remove(&f->queue)",
          "old_line_content": "",
          "new_line_content": "        ngx_queue_remove(&f->queue);",
          "content_same": false
        },
        {
          "line": 5358,
          "old_api": null,
          "new_api": "ngx_quic_free_frame",
          "old_text": null,
          "new_text": "ngx_quic_free_frame(c, f)",
          "old_line_content": "        case NGX_QUIC_FT_ACK_ECN:",
          "new_line_content": "            ngx_quic_free_frame(c, f);",
          "content_same": false
        },
        {
          "line": 3313,
          "old_api": null,
          "new_api": "ngx_quic_handle_stream_ack",
          "old_text": null,
          "new_text": "ngx_quic_handle_stream_ack(c, f)",
          "old_line_content": "            case NGX_QUIC_FT_STREAM6:",
          "new_line_content": "                ngx_quic_handle_stream_ack(c, f);",
          "content_same": false
        },
        {
          "line": 5364,
          "old_api": null,
          "new_api": "ngx_quic_free_frame",
          "old_text": null,
          "new_text": "ngx_quic_free_frame(c, f)",
          "old_line_content": "        case NGX_QUIC_FT_PING:",
          "new_line_content": "            ngx_quic_free_frame(c, f);",
          "content_same": false
        },
        {
          "line": 3321,
          "old_api": null,
          "new_api": "ngx_queue_remove",
          "old_text": null,
          "new_text": "ngx_queue_remove(&f->queue)",
          "old_line_content": "                found_num = f->pnum;",
          "new_line_content": "            ngx_queue_remove(&f->queue);",
          "content_same": false
        },
        {
          "line": 3322,
          "old_api": null,
          "new_api": "ngx_quic_free_frame",
          "old_text": null,
          "new_text": "ngx_quic_free_frame(c, f)",
          "old_line_content": "            }",
          "new_line_content": "            ngx_quic_free_frame(c, f);",
          "content_same": false
        },
        {
          "line": 5369,
          "old_api": null,
          "new_api": "ngx_quic_queue_frame",
          "old_text": null,
          "new_text": "ngx_quic_queue_frame(qc, f)",
          "old_line_content": "",
          "new_line_content": "            ngx_quic_queue_frame(qc, f);",
          "content_same": false
        },
        {
          "line": 5377,
          "old_api": null,
          "new_api": "ngx_quic_queue_frame",
          "old_text": null,
          "new_text": "ngx_quic_queue_frame(qc, f)",
          "old_line_content": "            f->u.max_streams.limit = f->u.max_streams.bidi",
          "new_line_content": "            ngx_quic_queue_frame(qc, f);",
          "content_same": false
        },
        {
          "line": 5381,
          "old_api": null,
          "new_api": "ngx_quic_find_stream",
          "old_text": null,
          "new_text": "ngx_quic_find_stream(&qc->streams.tree,\n                                      f->u.max_stream_data.id)",
          "old_line_content": "            break;",
          "new_line_content": "            sn = ngx_quic_find_stream(&qc->streams.tree,",
          "content_same": false
        },
        {
          "line": 3334,
          "old_api": null,
          "new_api": "ngx_log_error",
          "old_text": null,
          "new_text": "ngx_log_error(NGX_LOG_INFO, c->log, 0,\n                      \"quic ACK for the packet not sent\")",
          "old_line_content": "            return NGX_OK;",
          "new_line_content": "        ngx_log_error(NGX_LOG_INFO, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3345,
          "old_api": null,
          "new_api": "ngx_post_event",
          "old_text": null,
          "new_text": "ngx_post_event(&qc->push, &ngx_posted_events)",
          "old_line_content": "    }",
          "new_line_content": "        ngx_post_event(&qc->push, &ngx_posted_events);",
          "content_same": false
        },
        {
          "line": 5395,
          "old_api": null,
          "new_api": "ngx_quic_queue_frame",
          "old_text": null,
          "new_text": "ngx_quic_queue_frame(qc, f)",
          "old_line_content": "                f->u.max_stream_data.limit = n;",
          "new_line_content": "            ngx_quic_queue_frame(qc, f);",
          "content_same": false
        },
        {
          "line": 5406,
          "old_api": null,
          "new_api": "ngx_quic_find_stream",
          "old_text": null,
          "new_text": "ngx_quic_find_stream(&qc->streams.tree, f->u.stream.stream_id)",
          "old_line_content": "        case NGX_QUIC_FT_STREAM5:",
          "new_line_content": "            sn = ngx_quic_find_stream(&qc->streams.tree, f->u.stream.stream_id);",
          "content_same": false
        },
        {
          "line": 3361,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    ngx_msec_t              latest_rtt, ack_delay, adjusted_rtt, rttvar_sample;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 5410,
          "old_api": null,
          "new_api": "ngx_quic_free_frame",
          "old_text": null,
          "new_text": "ngx_quic_free_frame(c, f)",
          "old_line_content": "",
          "new_line_content": "                ngx_quic_free_frame(c, f);",
          "content_same": false
        },
        {
          "line": 5417,
          "old_api": null,
          "new_api": "ngx_queue_insert_tail",
          "old_text": null,
          "new_text": "ngx_queue_insert_tail(&ctx->frames, &f->queue)",
          "old_line_content": "            /* fall through */",
          "new_line_content": "            ngx_queue_insert_tail(&ctx->frames, &f->queue);",
          "content_same": false
        },
        {
          "line": 3372,
          "old_api": null,
          "new_api": "ngx_min",
          "old_text": null,
          "new_text": "ngx_min(qc->min_rtt, latest_rtt)",
          "old_line_content": "        qc->rttvar = latest_rtt / 2;",
          "new_line_content": "        qc->min_rtt = ngx_min(qc->min_rtt, latest_rtt);",
          "content_same": false
        },
        {
          "line": 3377,
          "old_api": null,
          "new_api": "ngx_min",
          "old_text": null,
          "new_text": "ngx_min(ack_delay, qc->ctp.max_ack_delay)",
          "old_line_content": "        ack_delay = ack->delay * (1 << qc->ctp.ack_delay_exponent) / 1000;",
          "new_line_content": "            ack_delay = ngx_min(ack_delay, qc->ctp.max_ack_delay);",
          "content_same": false
        },
        {
          "line": 5426,
          "old_api": null,
          "new_api": "ngx_post_event",
          "old_text": null,
          "new_text": "ngx_post_event(&qc->push, &ngx_posted_events)",
          "old_line_content": "        return;",
          "new_line_content": "    ngx_post_event(&qc->push, &ngx_posted_events);",
          "content_same": false
        },
        {
          "line": 3387,
          "old_api": null,
          "new_api": "ngx_msec_int_t) (qc->avg_rtt - adjusted_rtt)",
          "old_text": null,
          "new_text": "ngx_msec_int_t) (qc->avg_rtt - adjusted_rtt)",
          "old_line_content": "        }",
          "new_line_content": "        rttvar_sample = ngx_abs((ngx_msec_int_t) (qc->avg_rtt - adjusted_rtt));",
          "content_same": false
        },
        {
          "line": 3391,
          "old_api": null,
          "new_api": "ngx_log_debug4",
          "old_text": null,
          "new_text": "ngx_log_debug4(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic rtt sample latest:%M min:%M avg:%M var:%M\",\n                   latest_rtt, qc->min_rtt, qc->avg_rtt, qc->rttvar)",
          "old_line_content": "        qc->rttvar = 0.75 * qc->rttvar + 0.25 * rttvar_sample;",
          "new_line_content": "    ngx_log_debug4(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 5439,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(qs->parent)",
          "old_line_content": "    ngx_quic_connection_t  *qc;",
          "new_line_content": "    qc = ngx_quic_get_connection(qs->parent);",
          "content_same": false
        },
        {
          "line": 5445,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                           \"quic too many server bidi streams:%uL\",\n                           qc->streams.server_streams_bidi)",
          "old_line_content": "        if (qc->streams.server_streams_bidi",
          "new_line_content": "            ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3403,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    ngx_msec_t              duration;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 5454,
          "old_api": null,
          "new_api": "ngx_log_debug3",
          "old_text": null,
          "new_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic creating server bidi stream\"\n                       \" streams:%uL max:%uL id:0x%xL\",\n                       qc->streams.server_streams_bidi,\n                       qc->streams.server_max_streams_bidi, id)",
          "old_line_content": "        id = (qc->streams.server_streams_bidi << 2)",
          "new_line_content": "        ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3408,
          "old_api": null,
          "new_api": "ngx_max",
          "old_text": null,
          "new_text": "ngx_max(4 * qc->rttvar, NGX_QUIC_TIME_GRANULARITY)",
          "old_line_content": "    /* PTO calculation: quic-recovery, Appendix 8 */",
          "new_line_content": "    duration += ngx_max(4 * qc->rttvar, NGX_QUIC_TIME_GRANULARITY);",
          "content_same": false
        },
        {
          "line": 5467,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                           \"quic too many server uni streams:%uL\",\n                           qc->streams.server_streams_uni)",
          "old_line_content": "        if (qc->streams.server_streams_uni",
          "new_line_content": "            ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 5477,
          "old_api": null,
          "new_api": "ngx_log_debug3",
          "old_text": null,
          "new_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic creating server uni stream\"\n                       \" streams:%uL max:%uL id:0x%xL\",\n                       qc->streams.server_streams_uni,\n                       qc->streams.server_max_streams_uni, id)",
          "old_line_content": "             | NGX_QUIC_STREAM_SERVER_INITIATED",
          "new_line_content": "        ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3431,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    ngx_quic_stream_t      *sn;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 3433,
          "old_api": null,
          "new_api": "ngx_quic_find_stream",
          "old_text": null,
          "new_text": "ngx_quic_find_stream(&qc->streams.tree, f->u.stream.stream_id)",
          "old_line_content": "",
          "new_line_content": "    sn = ngx_quic_find_stream(&qc->streams.tree, f->u.stream.stream_id);",
          "content_same": false
        },
        {
          "line": 5487,
          "old_api": null,
          "new_api": "ngx_quic_create_stream",
          "old_text": null,
          "new_text": "ngx_quic_create_stream(qs->parent, id, rcvbuf_size)",
          "old_line_content": "        rcvbuf_size = 0;",
          "new_line_content": "    sn = ngx_quic_create_stream(qs->parent, id, rcvbuf_size);",
          "content_same": false
        },
        {
          "line": 3444,
          "old_api": null,
          "new_api": "ngx_post_event",
          "old_text": null,
          "new_text": "ngx_post_event(wev, &ngx_posted_events)",
          "old_line_content": "",
          "new_line_content": "        ngx_post_event(wev, &ngx_posted_events);",
          "content_same": false
        },
        {
          "line": 3449,
          "old_api": null,
          "new_api": "ngx_log_debug3",
          "old_text": null,
          "new_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, sn->c->log, 0,\n                   \"quic stream ack len:%uL acked:%uL unacked:%uL\",\n                   f->u.stream.length, sn->acked, sent - sn->acked)",
          "old_line_content": "",
          "new_line_content": "    ngx_log_debug3(NGX_LOG_DEBUG_EVENT, sn->c->log, 0,",
          "content_same": false
        },
        {
          "line": 3467,
          "old_api": null,
          "new_api": "ngx_log_debug2",
          "old_text": null,
          "new_text": "ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic out-of-order frame: expecting:%uL got:%uL\",\n                       fs->received, f->offset)",
          "old_line_content": "    f = &frame->u.ord;",
          "new_line_content": "        ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3471,
          "old_api": null,
          "new_api": "ngx_quic_buffer_frame",
          "old_text": null,
          "new_text": "ngx_quic_buffer_frame(c, fs, frame)",
          "old_line_content": "                       \"quic out-of-order frame: expecting:%uL got:%uL\",",
          "new_line_content": "        return ngx_quic_buffer_frame(c, fs, frame);",
          "content_same": false
        },
        {
          "line": 5520,
          "old_api": null,
          "new_api": "ngx_rbt_red",
          "old_text": null,
          "new_text": "ngx_rbt_red(node)",
          "old_line_content": "    node->parent = temp;",
          "new_line_content": "    ngx_rbt_red(node);",
          "content_same": false
        },
        {
          "line": 3476,
          "old_api": null,
          "new_api": "ngx_quic_adjust_frame_offset",
          "old_text": null,
          "new_text": "ngx_quic_adjust_frame_offset(c, frame, fs->received)",
          "old_line_content": "",
          "new_line_content": "        if (ngx_quic_adjust_frame_offset(c, frame, fs->received)",
          "content_same": false
        },
        {
          "line": 3488,
          "old_api": null,
          "new_api": "handler",
          "old_text": null,
          "new_text": "handler(c, frame, data)",
          "old_line_content": "",
          "new_line_content": "    rc = handler(c, frame, data);",
          "content_same": false
        },
        {
          "line": 3504,
          "old_api": null,
          "new_api": "ngx_queue_head",
          "old_text": null,
          "new_text": "ngx_queue_head(&fs->frames)",
          "old_line_content": "    /* now check the queue if we can continue with buffered frames */",
          "new_line_content": "        q = ngx_queue_head(&fs->frames);",
          "content_same": false
        },
        {
          "line": 3505,
          "old_api": null,
          "new_api": "ngx_queue_sentinel",
          "old_text": null,
          "new_text": "ngx_queue_sentinel(&fs->frames)",
          "old_line_content": "",
          "new_line_content": "        if (q == ngx_queue_sentinel(&fs->frames)) {",
          "content_same": false
        },
        {
          "line": 5555,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic stream id:0x%xL is new\", id)",
          "old_line_content": "    ngx_quic_stream_t      *sn;",
          "new_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3509,
          "old_api": null,
          "new_api": "ngx_queue_data",
          "old_text": null,
          "new_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "old_line_content": "            break;",
          "new_line_content": "        frame = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "content_same": false
        },
        {
          "line": 3521,
          "old_api": null,
          "new_api": "ngx_quic_adjust_frame_offset",
          "old_text": null,
          "new_text": "ngx_quic_adjust_frame_offset(c, frame, fs->received)",
          "old_line_content": "",
          "new_line_content": "            if (ngx_quic_adjust_frame_offset(c, frame, fs->received)",
          "content_same": false
        },
        {
          "line": 3525,
          "old_api": null,
          "new_api": "ngx_queue_remove",
          "old_text": null,
          "new_text": "ngx_queue_remove(q)",
          "old_line_content": "                == NGX_DONE)",
          "new_line_content": "                ngx_queue_remove(q);",
          "content_same": false
        },
        {
          "line": 3540,
          "old_api": null,
          "new_api": "handler",
          "old_text": null,
          "new_text": "handler(c, frame, data)",
          "old_line_content": "",
          "new_line_content": "        rc = handler(c, frame, data);",
          "content_same": false
        },
        {
          "line": 3553,
          "old_api": null,
          "new_api": "ngx_queue_remove",
          "old_text": null,
          "new_text": "ngx_queue_remove(q)",
          "old_line_content": "        fs->received += f->length;",
          "new_line_content": "        ngx_queue_remove(q);",
          "content_same": false
        },
        {
          "line": 3555,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                      \"quic consumed buffered frame, total:%ui\", fs->total)",
          "old_line_content": "",
          "new_line_content": "        ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 5625,
          "old_api": null,
          "new_api": "ngx_quic_create_stream",
          "old_text": null,
          "new_text": "ngx_quic_create_stream(c, min_id, n)",
          "old_line_content": "",
          "new_line_content": "        sn = ngx_quic_create_stream(c, min_id, n);",
          "content_same": false
        },
        {
          "line": 5630,
          "old_api": null,
          "new_api": "handler",
          "old_text": null,
          "new_text": "sn->c->listening->handler(sn->c)",
          "old_line_content": "            return NULL;",
          "new_line_content": "        sn->c->listening->handler(sn->c);",
          "content_same": false
        },
        {
          "line": 3582,
          "old_api": null,
          "new_api": "ngx_log_debug0",
          "old_text": null,
          "new_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic old or duplicate data in ordered frame, ignored\")",
          "old_line_content": "    if (tail >= f->length) {",
          "new_line_content": "        ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3587,
          "old_api": null,
          "new_api": "ngx_log_debug0",
          "old_text": null,
          "new_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic adjusted ordered frame data start to expected offset\")",
          "old_line_content": "        return NGX_DONE;",
          "new_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3597,
          "old_api": null,
          "new_api": "ngx_buf_size",
          "old_text": null,
          "new_text": "ngx_buf_size(b)",
          "old_line_content": "",
          "new_line_content": "        n = ngx_buf_size(b);",
          "content_same": false
        },
        {
          "line": 5646,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic stream id:0x%xL create\", id)",
          "old_line_content": "    ngx_pool_cleanup_t     *cln;",
          "new_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 5651,
          "old_api": null,
          "new_api": "ngx_create_pool",
          "old_text": null,
          "new_text": "ngx_create_pool(NGX_DEFAULT_POOL_SIZE, c->log)",
          "old_line_content": "",
          "new_line_content": "    pool = ngx_create_pool(NGX_DEFAULT_POOL_SIZE, c->log);",
          "content_same": false
        },
        {
          "line": 5656,
          "old_api": null,
          "new_api": "ngx_pcalloc",
          "old_text": null,
          "new_text": "ngx_pcalloc(pool, sizeof(ngx_quic_stream_t))",
          "old_line_content": "        return NULL;",
          "new_line_content": "    sn = ngx_pcalloc(pool, sizeof(ngx_quic_stream_t));",
          "content_same": false
        },
        {
          "line": 5658,
          "old_api": null,
          "new_api": "ngx_destroy_pool",
          "old_text": null,
          "new_text": "ngx_destroy_pool(pool)",
          "old_line_content": "",
          "new_line_content": "        ngx_destroy_pool(pool);",
          "content_same": false
        },
        {
          "line": 5666,
          "old_api": null,
          "new_api": "ngx_create_temp_buf",
          "old_text": null,
          "new_text": "ngx_create_temp_buf(pool, rcvbuf_size)",
          "old_line_content": "    sn->parent = c;",
          "new_line_content": "    sn->b = ngx_create_temp_buf(pool, rcvbuf_size);",
          "content_same": false
        },
        {
          "line": 3620,
          "old_api": null,
          "new_api": "ngx_log_debug0",
          "old_text": null,
          "new_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic ngx_quic_buffer_frame\")",
          "old_line_content": "    ngx_quic_frame_t          *dst, *item;",
          "new_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 5668,
          "old_api": null,
          "new_api": "ngx_destroy_pool",
          "old_text": null,
          "new_text": "ngx_destroy_pool(pool)",
          "old_line_content": "",
          "new_line_content": "        ngx_destroy_pool(pool);",
          "content_same": false
        },
        {
          "line": 5672,
          "old_api": null,
          "new_api": "ngx_queue_init",
          "old_text": null,
          "new_text": "ngx_queue_init(&sn->fs.frames)",
          "old_line_content": "        return NULL;",
          "new_line_content": "    ngx_queue_init(&sn->fs.frames);",
          "content_same": false
        },
        {
          "line": 5674,
          "old_api": null,
          "new_api": "ngx_palloc",
          "old_text": null,
          "new_text": "ngx_palloc(pool, sizeof(ngx_log_t))",
          "old_line_content": "",
          "new_line_content": "    log = ngx_palloc(pool, sizeof(ngx_log_t));",
          "content_same": false
        },
        {
          "line": 3627,
          "old_api": null,
          "new_api": "ngx_quic_alloc_frame",
          "old_text": null,
          "new_text": "ngx_quic_alloc_frame(c)",
          "old_line_content": "",
          "new_line_content": "    dst = ngx_quic_alloc_frame(c);",
          "content_same": false
        },
        {
          "line": 5676,
          "old_api": null,
          "new_api": "ngx_destroy_pool",
          "old_text": null,
          "new_text": "ngx_destroy_pool(pool)",
          "old_line_content": "",
          "new_line_content": "        ngx_destroy_pool(pool);",
          "content_same": false
        },
        {
          "line": 3632,
          "old_api": null,
          "new_api": "ngx_memcpy",
          "old_text": null,
          "new_text": "ngx_memcpy(dst, frame, sizeof(ngx_quic_frame_t))",
          "old_line_content": "        return NGX_ERROR;",
          "new_line_content": "    ngx_memcpy(dst, frame, sizeof(ngx_quic_frame_t));",
          "content_same": false
        },
        {
          "line": 3634,
          "old_api": null,
          "new_api": "ngx_quic_copy_chain",
          "old_text": null,
          "new_text": "ngx_quic_copy_chain(c, frame->data, 0)",
          "old_line_content": "",
          "new_line_content": "    dst->data = ngx_quic_copy_chain(c, frame->data, 0);",
          "content_same": false
        },
        {
          "line": 5683,
          "old_api": null,
          "new_api": "ngx_get_connection",
          "old_text": null,
          "new_text": "ngx_get_connection(-1, log)",
          "old_line_content": "    *log = *c->log;",
          "new_line_content": "    sn->c = ngx_get_connection(-1, log);",
          "content_same": false
        },
        {
          "line": 5685,
          "old_api": null,
          "new_api": "ngx_destroy_pool",
          "old_text": null,
          "new_text": "ngx_destroy_pool(pool)",
          "old_line_content": "",
          "new_line_content": "        ngx_destroy_pool(pool);",
          "content_same": false
        },
        {
          "line": 3643,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                  \"quic ordered frame with unexpected offset:\"\n                  \" buffered total:%ui\", fs->total)",
          "old_line_content": "",
          "new_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3647,
          "old_api": null,
          "new_api": "ngx_queue_empty",
          "old_text": null,
          "new_text": "ngx_queue_empty(&fs->frames)",
          "old_line_content": "                  \"quic ordered frame with unexpected offset:\"",
          "new_line_content": "    if (ngx_queue_empty(&fs->frames)) {",
          "content_same": false
        },
        {
          "line": 3648,
          "old_api": null,
          "new_api": "ngx_queue_insert_after",
          "old_text": null,
          "new_text": "ngx_queue_insert_after(&fs->frames, &dst->queue)",
          "old_line_content": "                  \" buffered total:%ui\", fs->total);",
          "new_line_content": "        ngx_queue_insert_after(&fs->frames, &dst->queue);",
          "content_same": false
        },
        {
          "line": 5698,
          "old_api": null,
          "new_api": "ngx_atomic_fetch_add",
          "old_text": null,
          "new_text": "ngx_atomic_fetch_add(ngx_connection_counter, 1)",
          "old_line_content": "    sn->c->addr_text = c->addr_text;",
          "new_line_content": "    sn->c->number = ngx_atomic_fetch_add(ngx_connection_counter, 1);",
          "content_same": false
        },
        {
          "line": 3652,
          "old_api": null,
          "new_api": "ngx_queue_last",
          "old_text": null,
          "new_text": "ngx_queue_last(&fs->frames)",
          "old_line_content": "        return NGX_OK;",
          "new_line_content": "    for (q = ngx_queue_last(&fs->frames);",
          "content_same": false
        },
        {
          "line": 3653,
          "old_api": null,
          "new_api": "ngx_queue_sentinel",
          "old_text": null,
          "new_text": "ngx_queue_sentinel(&fs->frames)",
          "old_line_content": "    }",
          "new_line_content": "         q != ngx_queue_sentinel(&fs->frames);",
          "content_same": false
        },
        {
          "line": 3654,
          "old_api": null,
          "new_api": "ngx_queue_prev",
          "old_text": null,
          "new_text": "ngx_queue_prev(q)",
          "old_line_content": "",
          "new_line_content": "         q = ngx_queue_prev(q))",
          "content_same": false
        },
        {
          "line": 3660,
          "old_api": null,
          "new_api": "ngx_queue_insert_after",
          "old_text": null,
          "new_text": "ngx_queue_insert_after(q, &dst->queue)",
          "old_line_content": "        f = &item->u.ord;",
          "new_line_content": "            ngx_queue_insert_after(q, &dst->queue);",
          "content_same": false
        },
        {
          "line": 3665,
          "old_api": null,
          "new_api": "ngx_queue_insert_after",
          "old_text": null,
          "new_text": "ngx_queue_insert_after(&fs->frames, &dst->queue)",
          "old_line_content": "        }",
          "new_line_content": "    ngx_queue_insert_after(&fs->frames, &dst->queue);",
          "content_same": false
        },
        {
          "line": 5728,
          "old_api": null,
          "new_api": "ngx_pool_cleanup_add",
          "old_text": null,
          "new_text": "ngx_pool_cleanup_add(pool, 0)",
          "old_line_content": "        }",
          "new_line_content": "    cln = ngx_pool_cleanup_add(pool, 0);",
          "content_same": false
        },
        {
          "line": 3682,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    ngx_quic_crypto_frame_t   *f;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 5730,
          "old_api": null,
          "new_api": "ngx_close_connection",
          "old_text": null,
          "new_text": "ngx_close_connection(sn->c)",
          "old_line_content": "",
          "new_line_content": "        ngx_close_connection(sn->c);",
          "content_same": false
        },
        {
          "line": 5738,
          "old_api": null,
          "new_api": "ngx_rbtree_insert",
          "old_text": null,
          "new_text": "ngx_rbtree_insert(&qc->streams.tree, &sn->node)",
          "old_line_content": "    cln->handler = ngx_quic_stream_cleanup_handler;",
          "new_line_content": "    ngx_rbtree_insert(&qc->streams.tree, &sn->node);",
          "content_same": false
        },
        {
          "line": 3694,
          "old_api": null,
          "new_api": "ngx_quic_handle_ordered_frame",
          "old_text": null,
          "new_text": "ngx_quic_handle_ordered_frame(c, fs, frame, ngx_quic_crypto_input,\n                                       NULL)",
          "old_line_content": "        return NGX_ERROR;",
          "new_line_content": "    rc = ngx_quic_handle_ordered_frame(c, fs, frame, ngx_quic_crypto_input,",
          "content_same": false
        },
        {
          "line": 3703,
          "old_api": null,
          "new_api": "ngx_quic_get_send_ctx",
          "old_text": null,
          "new_text": "ngx_quic_get_send_ctx(qc, pkt->level)",
          "old_line_content": "    /* speeding up handshake completion */",
          "new_line_content": "        ctx = ngx_quic_get_send_ctx(qc, pkt->level);",
          "content_same": false
        },
        {
          "line": 3705,
          "old_api": null,
          "new_api": "ngx_queue_empty",
          "old_text": null,
          "new_text": "ngx_queue_empty(&ctx->sent)",
          "old_line_content": "    if (pkt->level == ssl_encryption_initial) {",
          "new_line_content": "        if (!ngx_queue_empty(&ctx->sent)) {",
          "content_same": false
        },
        {
          "line": 3710,
          "old_api": null,
          "new_api": "ngx_quic_resend_frames",
          "old_text": null,
          "new_text": "ngx_quic_resend_frames(c, ctx)",
          "old_line_content": "",
          "new_line_content": "                ngx_quic_resend_frames(c, ctx);",
          "content_same": false
        },
        {
          "line": 5758,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(pc)",
          "old_line_content": "    qs = c->quic;",
          "new_line_content": "    qc = ngx_quic_get_connection(pc);",
          "content_same": false
        },
        {
          "line": 5765,
          "old_api": null,
          "new_api": "ngx_log_debug3",
          "old_text": null,
          "new_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic stream recv id:0x%xL eof:%d avail:%z\",\n                   qs->id, rev->pending_eof, b->last - b->pos)",
          "old_line_content": "        return NGX_ERROR;",
          "new_line_content": "    ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3728,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    ngx_ssl_conn_t         *ssl_conn;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 5777,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic stream id:0x%xL recv() not ready\", qs->id)",
          "old_line_content": "            return 0;",
          "new_line_content": "        ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3732,
          "old_api": null,
          "new_api": "ngx_log_debug2",
          "old_text": null,
          "new_text": "ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic SSL_quic_read_level:%d SSL_quic_write_level:%d\",\n                   (int) SSL_quic_read_level(ssl_conn),\n                   (int) SSL_quic_write_level(ssl_conn))",
          "old_line_content": "",
          "new_line_content": "    ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3734,
          "old_api": null,
          "new_api": "SSL_quic_read_level",
          "old_text": null,
          "new_text": "SSL_quic_read_level(ssl_conn)",
          "old_line_content": "",
          "new_line_content": "                   (int) SSL_quic_read_level(ssl_conn),",
          "content_same": false
        },
        {
          "line": 5782,
          "old_api": null,
          "new_api": "ngx_min",
          "old_text": null,
          "new_text": "ngx_min(b->last - b->pos, (ssize_t) size)",
          "old_line_content": "        return NGX_AGAIN;",
          "new_line_content": "    len = ngx_min(b->last - b->pos, (ssize_t) size);",
          "content_same": false
        },
        {
          "line": 5784,
          "old_api": null,
          "new_api": "ngx_memcpy",
          "old_text": null,
          "new_text": "ngx_memcpy(buf, b->pos, len)",
          "old_line_content": "",
          "new_line_content": "    ngx_memcpy(buf, b->pos, len);",
          "content_same": false
        },
        {
          "line": 3740,
          "old_api": null,
          "new_api": "SSL_quic_read_level",
          "old_text": null,
          "new_text": "SSL_quic_read_level(ssl_conn)",
          "old_line_content": "    for (cl = frame->data; cl; cl = cl->next) {",
          "new_line_content": "        if (!SSL_provide_quic_data(ssl_conn, SSL_quic_read_level(ssl_conn),",
          "content_same": false
        },
        {
          "line": 5795,
          "old_api": null,
          "new_api": "ngx_log_debug3",
          "old_text": null,
          "new_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic stream id:0x%xL recv len:%z of size:%uz\",\n                   qs->id, len, size)",
          "old_line_content": "        rev->ready = rev->pending_eof;",
          "new_line_content": "    ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3749,
          "old_api": null,
          "new_api": "SSL_do_handshake",
          "old_text": null,
          "new_text": "SSL_do_handshake(ssl_conn)",
          "old_line_content": "        }",
          "new_line_content": "    n = SSL_do_handshake(ssl_conn);",
          "content_same": false
        },
        {
          "line": 3751,
          "old_api": null,
          "new_api": "ngx_log_debug2",
          "old_text": null,
          "new_text": "ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic SSL_quic_read_level:%d SSL_quic_write_level:%d\",\n                   (int) SSL_quic_read_level(ssl_conn),\n                   (int) SSL_quic_write_level(ssl_conn))",
          "old_line_content": "",
          "new_line_content": "    ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 5800,
          "old_api": null,
          "new_api": "ngx_quic_alloc_frame",
          "old_text": null,
          "new_text": "ngx_quic_alloc_frame(pc)",
          "old_line_content": "                   qs->id, len, size);",
          "new_line_content": "        frame = ngx_quic_alloc_frame(pc);",
          "content_same": false
        },
        {
          "line": 3753,
          "old_api": null,
          "new_api": "SSL_quic_read_level",
          "old_text": null,
          "new_text": "SSL_quic_read_level(ssl_conn)",
          "old_line_content": "",
          "new_line_content": "                   (int) SSL_quic_read_level(ssl_conn),",
          "content_same": false
        },
        {
          "line": 3761,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0, \"SSL_get_error: %d\",\n                       sslerr)",
          "old_line_content": "    if (n <= 0) {",
          "new_line_content": "        ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0, \"SSL_get_error: %d\",",
          "content_same": false
        },
        {
          "line": 5811,
          "old_api": null,
          "new_api": "ngx_quic_queue_frame",
          "old_text": null,
          "new_text": "ngx_quic_queue_frame(qc, frame)",
          "old_line_content": "        frame->u.max_stream_data.limit = qs->fs.received + (b->pos - b->start)",
          "new_line_content": "        ngx_quic_queue_frame(qc, frame);",
          "content_same": false
        },
        {
          "line": 3765,
          "old_api": null,
          "new_api": "ngx_ssl_error",
          "old_text": null,
          "new_text": "ngx_ssl_error(NGX_LOG_ERR, c->log, 0, \"SSL_do_handshake() failed\")",
          "old_line_content": "                       sslerr);",
          "new_line_content": "            ngx_ssl_error(NGX_LOG_ERR, c->log, 0, \"SSL_do_handshake() failed\");",
          "content_same": false
        },
        {
          "line": 5816,
          "old_api": null,
          "new_api": "ngx_quic_alloc_frame",
          "old_text": null,
          "new_text": "ngx_quic_alloc_frame(pc)",
          "old_line_content": "",
          "new_line_content": "        frame = ngx_quic_alloc_frame(pc);",
          "content_same": false
        },
        {
          "line": 3772,
          "old_api": null,
          "new_api": "SSL_in_init",
          "old_text": null,
          "new_text": "SSL_in_init(ssl_conn)",
          "old_line_content": "        return NGX_OK;",
          "new_line_content": "    if (SSL_in_init(ssl_conn)) {",
          "content_same": false
        },
        {
          "line": 3776,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic ssl cipher:%s\", SSL_get_cipher(ssl_conn))",
          "old_line_content": "        return NGX_OK;",
          "new_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3777,
          "old_api": null,
          "new_api": "SSL_get_cipher",
          "old_text": null,
          "new_text": "SSL_get_cipher(ssl_conn)",
          "old_line_content": "    }",
          "new_line_content": "                   \"quic ssl cipher:%s\", SSL_get_cipher(ssl_conn));",
          "content_same": false
        },
        {
          "line": 5828,
          "old_api": null,
          "new_api": "ngx_quic_queue_frame",
          "old_text": null,
          "new_text": "ngx_quic_queue_frame(qc, frame)",
          "old_line_content": "        frame->type = NGX_QUIC_FT_MAX_DATA;",
          "new_line_content": "        ngx_quic_queue_frame(qc, frame);",
          "content_same": false
        },
        {
          "line": 5830,
          "old_api": null,
          "new_api": "ngx_log_debug2",
          "old_text": null,
          "new_text": "ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic stream id:0x%xL recv: increased max_data:%uL\",\n                       qs->id, qc->streams.recv_max_data)",
          "old_line_content": "",
          "new_line_content": "        ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3784,
          "old_api": null,
          "new_api": "ngx_quic_alloc_frame",
          "old_text": null,
          "new_text": "ngx_quic_alloc_frame(c)",
          "old_line_content": "",
          "new_line_content": "    frame = ngx_quic_alloc_frame(c);",
          "content_same": false
        },
        {
          "line": 3792,
          "old_api": null,
          "new_api": "ngx_quic_queue_frame",
          "old_text": null,
          "new_text": "ngx_quic_queue_frame(qc, frame)",
          "old_line_content": "    /* 12.4 Frames and frame types, figure 8 */",
          "new_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "content_same": false
        },
        {
          "line": 3794,
          "old_api": null,
          "new_api": "ngx_quic_send_new_token",
          "old_text": null,
          "new_text": "ngx_quic_send_new_token(c)",
          "old_line_content": "    frame->type = NGX_QUIC_FT_HANDSHAKE_DONE;",
          "new_line_content": "    if (ngx_quic_send_new_token(c) != NGX_OK) {",
          "content_same": false
        },
        {
          "line": 5845,
          "old_api": null,
          "new_api": "ngx_memzero",
          "old_text": null,
          "new_text": "ngx_memzero(&b, sizeof(ngx_buf_t))",
          "old_line_content": "    ngx_buf_t    b;",
          "new_line_content": "    ngx_memzero(&b, sizeof(ngx_buf_t));",
          "content_same": false
        },
        {
          "line": 3803,
          "old_api": null,
          "new_api": "ngx_quic_keys_update",
          "old_text": null,
          "new_text": "ngx_quic_keys_update(c, qc->keys)",
          "old_line_content": "     * See quic-tls 9.4 Header Protection Timing Side-Channels.",
          "new_line_content": "    if (ngx_quic_keys_update(c, qc->keys) != NGX_OK) {",
          "content_same": false
        },
        {
          "line": 5854,
          "old_api": null,
          "new_api": "ngx_quic_stream_send_chain",
          "old_text": null,
          "new_text": "ngx_quic_stream_send_chain(c, &cl, 0)",
          "old_line_content": "    cl.buf = &b;",
          "new_line_content": "    if (ngx_quic_stream_send_chain(c, &cl, 0) == NGX_CHAIN_ERROR) {",
          "content_same": false
        },
        {
          "line": 3811,
          "old_api": null,
          "new_api": "ngx_quic_discard_ctx",
          "old_text": null,
          "new_text": "ngx_quic_discard_ctx(c, ssl_encryption_handshake)",
          "old_line_content": "     * 4.10.2 An endpoint MUST discard its handshake keys",
          "new_line_content": "    ngx_quic_discard_ctx(c, ssl_encryption_handshake);",
          "content_same": false
        },
        {
          "line": 3813,
          "old_api": null,
          "new_api": "ngx_quic_issue_server_ids",
          "old_text": null,
          "new_text": "ngx_quic_issue_server_ids(c)",
          "old_line_content": "     */",
          "new_line_content": "    if (ngx_quic_issue_server_ids(c) != NGX_OK) {",
          "content_same": false
        },
        {
          "line": 5879,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(pc)",
          "old_line_content": "",
          "new_line_content": "    qc = ngx_quic_get_connection(pc);",
          "content_same": false
        },
        {
          "line": 3835,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    ngx_quic_stream_frame_t   *f;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 5886,
          "old_api": null,
          "new_api": "ngx_quic_max_stream_flow",
          "old_text": null,
          "new_text": "ngx_quic_max_stream_flow(c)",
          "old_line_content": "        return NGX_CHAIN_ERROR;",
          "new_line_content": "    flow = ngx_quic_max_stream_flow(c);",
          "content_same": false
        },
        {
          "line": 5894,
          "old_api": null,
          "new_api": "ngx_quic_alloc_frame",
          "old_text": null,
          "new_text": "ngx_quic_alloc_frame(pc)",
          "old_line_content": "",
          "new_line_content": "    frame = ngx_quic_alloc_frame(pc);",
          "content_same": false
        },
        {
          "line": 3848,
          "old_api": null,
          "new_api": "ngx_quic_find_stream",
          "old_text": null,
          "new_text": "ngx_quic_find_stream(&qc->streams.tree, f->stream_id)",
          "old_line_content": "    /* no overflow since both values are 62-bit */",
          "new_line_content": "    sn = ngx_quic_find_stream(&qc->streams.tree, f->stream_id);",
          "content_same": false
        },
        {
          "line": 5899,
          "old_api": null,
          "new_api": "ngx_quic_copy_chain",
          "old_text": null,
          "new_text": "ngx_quic_copy_chain(pc, in, n)",
          "old_line_content": "        return NGX_CHAIN_ERROR;",
          "new_line_content": "    frame->data = ngx_quic_copy_chain(pc, in, n);",
          "content_same": false
        },
        {
          "line": 5905,
          "old_api": null,
          "new_api": "ngx_buf_size",
          "old_text": null,
          "new_text": "ngx_buf_size(cl->buf)",
          "old_line_content": "    }",
          "new_line_content": "        n += ngx_buf_size(cl->buf);",
          "content_same": false
        },
        {
          "line": 3871,
          "old_api": null,
          "new_api": "ngx_quic_handle_ordered_frame",
          "old_text": null,
          "new_text": "ngx_quic_handle_ordered_frame(c, fs, frame, ngx_quic_stream_input,\n                                          sn)",
          "old_line_content": "            goto cleanup;",
          "new_line_content": "        if (ngx_quic_handle_ordered_frame(c, fs, frame, ngx_quic_stream_input,",
          "content_same": false
        },
        {
          "line": 3878,
          "old_api": null,
          "new_api": "handler",
          "old_text": null,
          "new_text": "sc->listening->handler(sc)",
          "old_line_content": "            goto cleanup;",
          "new_line_content": "        sc->listening->handler(sc);",
          "content_same": false
        },
        {
          "line": 5926,
          "old_api": null,
          "new_api": "ngx_quic_queue_frame",
          "old_text": null,
          "new_text": "ngx_quic_queue_frame(qc, frame)",
          "old_line_content": "    c->sent += n;",
          "new_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "content_same": false
        },
        {
          "line": 5930,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic send_chain sent:%uz\", n)",
          "old_line_content": "",
          "new_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3892,
          "old_api": null,
          "new_api": "ngx_quic_handle_ordered_frame",
          "old_text": null,
          "new_text": "ngx_quic_handle_ordered_frame(c, fs, frame, ngx_quic_stream_input,\n                                         sn)",
          "old_line_content": "        return NGX_ERROR;",
          "new_line_content": "    return ngx_quic_handle_ordered_frame(c, fs, frame, ngx_quic_stream_input,",
          "content_same": false
        },
        {
          "line": 5946,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(qs->parent)",
          "old_line_content": "    ngx_quic_connection_t  *qc;",
          "new_line_content": "    qc = ngx_quic_get_connection(qs->parent);",
          "content_same": false
        },
        {
          "line": 3899,
          "old_api": null,
          "new_api": "ngx_close_connection",
          "old_text": null,
          "new_text": "ngx_close_connection(sc)",
          "old_line_content": "",
          "new_line_content": "    ngx_close_connection(sc);",
          "content_same": false
        },
        {
          "line": 3900,
          "old_api": null,
          "new_api": "ngx_destroy_pool",
          "old_text": null,
          "new_text": "ngx_destroy_pool(pool)",
          "old_line_content": "    pool = sc->pool;",
          "new_line_content": "    ngx_destroy_pool(pool);",
          "content_same": false
        },
        {
          "line": 5957,
          "old_api": null,
          "new_api": "ngx_log_debug0",
          "old_text": null,
          "new_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic send flow hit buffer size\")",
          "old_line_content": "    }",
          "new_line_content": "        ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3917,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    ngx_quic_connection_t    *qc;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 5967,
          "old_api": null,
          "new_api": "ngx_log_debug0",
          "old_text": null,
          "new_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic send flow hit MAX_DATA\")",
          "old_line_content": "    }",
          "new_line_content": "        ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3926,
          "old_api": null,
          "new_api": "ngx_log_error",
          "old_text": null,
          "new_text": "ngx_log_error(NGX_LOG_INFO, c->log, 0,\n                      \"quic no space in stream buffer\")",
          "old_line_content": "    b = sn->b;",
          "new_line_content": "        ngx_log_error(NGX_LOG_INFO, c->log, 0,",
          "content_same": false
        },
        {
          "line": 5977,
          "old_api": null,
          "new_api": "ngx_log_debug0",
          "old_text": null,
          "new_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic send flow hit MAX_STREAM_DATA\")",
          "old_line_content": "    }",
          "new_line_content": "        ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3932,
          "old_api": null,
          "new_api": "ngx_movemem",
          "old_text": null,
          "new_text": "ngx_movemem(b->start, b->pos, b->last - b->pos)",
          "old_line_content": "    }",
          "new_line_content": "        b->last = ngx_movemem(b->start, b->pos, b->last - b->pos);",
          "content_same": false
        },
        {
          "line": 3937,
          "old_api": null,
          "new_api": "ngx_cpymem",
          "old_text": null,
          "new_text": "ngx_cpymem(b->last, cl->buf->pos,\n                             cl->buf->last - cl->buf->pos)",
          "old_line_content": "    }",
          "new_line_content": "        b->last = ngx_cpymem(b->last, cl->buf->pos,",
          "content_same": false
        },
        {
          "line": 5986,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic send flow:%uz\", size)",
          "old_line_content": "        size = qs->send_max_data - sent;",
          "new_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 3949,
          "old_api": null,
          "new_api": "handler",
          "old_text": null,
          "new_text": "rev->handler(rev)",
          "old_line_content": "    }",
          "new_line_content": "        rev->handler(rev);",
          "content_same": false
        },
        {
          "line": 3953,
          "old_api": null,
          "new_api": "ngx_quic_find_stream",
          "old_text": null,
          "new_text": "ngx_quic_find_stream(&qc->streams.tree, id)",
          "old_line_content": "    }",
          "new_line_content": "    if (ngx_quic_find_stream(&qc->streams.tree, id) == NULL) {",
          "content_same": false
        },
        {
          "line": 6005,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(pc)",
          "old_line_content": "",
          "new_line_content": "    qc = ngx_quic_get_connection(pc);",
          "content_same": false
        },
        {
          "line": 6007,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic stream id:0x%xL cleanup\", qs->id)",
          "old_line_content": "    pc = qs->parent;",
          "new_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 6011,
          "old_api": null,
          "new_api": "ngx_quic_free_frames",
          "old_text": null,
          "new_text": "ngx_quic_free_frames(pc, &qs->fs.frames)",
          "old_line_content": "                   \"quic stream id:0x%xL cleanup\", qs->id);",
          "new_line_content": "    ngx_quic_free_frames(pc, &qs->fs.frames);",
          "content_same": false
        },
        {
          "line": 6015,
          "old_api": null,
          "new_api": "ngx_post_event",
          "old_text": null,
          "new_text": "ngx_post_event(pc->read, &ngx_posted_events)",
          "old_line_content": "",
          "new_line_content": "        ngx_post_event(pc->read, &ngx_posted_events);",
          "content_same": false
        },
        {
          "line": 3971,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    ngx_quic_stream_t      *qs;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 6023,
          "old_api": null,
          "new_api": "ngx_quic_alloc_frame",
          "old_text": null,
          "new_text": "ngx_quic_alloc_frame(pc)",
          "old_line_content": "        || (qs->id & NGX_QUIC_STREAM_UNIDIRECTIONAL) == 0)",
          "new_line_content": "            frame = ngx_quic_alloc_frame(pc);",
          "content_same": false
        },
        {
          "line": 3980,
          "old_api": null,
          "new_api": "ngx_rbtree_min",
          "old_text": null,
          "new_text": "ngx_rbtree_min(tree->root, tree->sentinel)",
          "old_line_content": "",
          "new_line_content": "        for (node = ngx_rbtree_min(tree->root, tree->sentinel);",
          "content_same": false
        },
        {
          "line": 3982,
          "old_api": null,
          "new_api": "ngx_rbtree_next",
          "old_text": null,
          "new_text": "ngx_rbtree_next(tree, node)",
          "old_line_content": "",
          "new_line_content": "             node = ngx_rbtree_next(tree, node))",
          "content_same": false
        },
        {
          "line": 6033,
          "old_api": null,
          "new_api": "ngx_quic_queue_frame",
          "old_text": null,
          "new_text": "ngx_quic_queue_frame(qc, frame)",
          "old_line_content": "            frame->u.stop_sending.id = qs->id;",
          "new_line_content": "            ngx_quic_queue_frame(qc, frame);",
          "content_same": false
        },
        {
          "line": 3989,
          "old_api": null,
          "new_api": "ngx_post_event",
          "old_text": null,
          "new_text": "ngx_post_event(wev, &ngx_posted_events)",
          "old_line_content": "",
          "new_line_content": "                ngx_post_event(wev, &ngx_posted_events);",
          "content_same": false
        },
        {
          "line": 6038,
          "old_api": null,
          "new_api": "ngx_quic_alloc_frame",
          "old_text": null,
          "new_text": "ngx_quic_alloc_frame(pc)",
          "old_line_content": "    }",
          "new_line_content": "        frame = ngx_quic_alloc_frame(pc);",
          "content_same": false
        },
        {
          "line": 6055,
          "old_api": null,
          "new_api": "ngx_quic_queue_frame",
          "old_text": null,
          "new_text": "ngx_quic_queue_frame(qc, frame)",
          "old_line_content": "            frame->u.max_streams.bidi = 1;",
          "new_line_content": "        ngx_quic_queue_frame(qc, frame);",
          "content_same": false
        },
        {
          "line": 6063,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic stream id:0x%xL send fin\", qs->id)",
          "old_line_content": "        }",
          "new_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 4018,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    ngx_quic_stream_t      *sn;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 4027,
          "old_api": null,
          "new_api": "ngx_quic_find_stream",
          "old_text": null,
          "new_text": "ngx_quic_find_stream(&qc->streams.tree, f->id)",
          "old_line_content": "        return NGX_ERROR;",
          "new_line_content": "    sn = ngx_quic_find_stream(&qc->streams.tree, f->id);",
          "content_same": false
        },
        {
          "line": 6082,
          "old_api": null,
          "new_api": "ngx_quic_queue_frame",
          "old_text": null,
          "new_text": "ngx_quic_queue_frame(qc, frame)",
          "old_line_content": "    frame->u.stream.offset = c->sent;",
          "new_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "content_same": false
        },
        {
          "line": 6084,
          "old_api": null,
          "new_api": "ngx_quic_output",
          "old_text": null,
          "new_text": "ngx_quic_output(pc)",
          "old_line_content": "",
          "new_line_content": "    (void) ngx_quic_output(pc);",
          "content_same": false
        },
        {
          "line": 4043,
          "old_api": null,
          "new_api": "handler",
          "old_text": null,
          "new_text": "sn->c->listening->handler(sn->c)",
          "old_line_content": "        b = sn->b;",
          "new_line_content": "        sn->c->listening->handler(sn->c);",
          "content_same": false
        },
        {
          "line": 6095,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    ngx_quic_frame_t       *frame;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 6097,
          "old_api": null,
          "new_api": "ngx_queue_empty",
          "old_text": null,
          "new_text": "ngx_queue_empty(&qc->free_frames)",
          "old_line_content": "",
          "new_line_content": "    if (!ngx_queue_empty(&qc->free_frames)) {",
          "content_same": false
        },
        {
          "line": 4050,
          "old_api": null,
          "new_api": "ngx_quic_alloc_frame",
          "old_text": null,
          "new_text": "ngx_quic_alloc_frame(c)",
          "old_line_content": "        n = sn->fs.received + (b->pos - b->start) + (b->end - b->last);",
          "new_line_content": "    frame = ngx_quic_alloc_frame(c);",
          "content_same": false
        },
        {
          "line": 6099,
          "old_api": null,
          "new_api": "ngx_queue_head",
          "old_text": null,
          "new_text": "ngx_queue_head(&qc->free_frames)",
          "old_line_content": "",
          "new_line_content": "        q = ngx_queue_head(&qc->free_frames);",
          "content_same": false
        },
        {
          "line": 4060,
          "old_api": null,
          "new_api": "ngx_quic_queue_frame",
          "old_text": null,
          "new_text": "ngx_quic_queue_frame(qc, frame)",
          "old_line_content": "    frame->u.max_stream_data.id = f->id;",
          "new_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "content_same": false
        },
        {
          "line": 6110,
          "old_api": null,
          "new_api": "ngx_pcalloc",
          "old_text": null,
          "new_text": "ngx_pcalloc(c->pool, sizeof(ngx_quic_frame_t))",
          "old_line_content": "#endif",
          "new_line_content": "        frame = ngx_pcalloc(c->pool, sizeof(ngx_quic_frame_t));",
          "content_same": false
        },
        {
          "line": 6118,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic alloc frame n:%ui\", qc->nframes)",
          "old_line_content": "#ifdef NGX_QUIC_DEBUG_ALLOC",
          "new_line_content": "        ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 4075,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    ngx_quic_stream_t      *sn;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 6123,
          "old_api": null,
          "new_api": "ngx_memzero",
          "old_text": null,
          "new_text": "ngx_memzero(frame, sizeof(ngx_quic_frame_t))",
          "old_line_content": "#endif",
          "new_line_content": "    ngx_memzero(frame, sizeof(ngx_quic_frame_t));",
          "content_same": false
        },
        {
          "line": 4084,
          "old_api": null,
          "new_api": "ngx_quic_find_stream",
          "old_text": null,
          "new_text": "ngx_quic_find_stream(&qc->streams.tree, f->id)",
          "old_line_content": "        return NGX_ERROR;",
          "new_line_content": "    sn = ngx_quic_find_stream(&qc->streams.tree, f->id);",
          "content_same": false
        },
        {
          "line": 6140,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "        return;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 6151,
          "old_api": "ngx_log_debug3",
          "new_api": null,
          "old_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic congestion ack recovery win:%uz ss:%z if:%uz\",\n                       cg->window, cg->ssthresh, cg->in_flight)",
          "new_text": null,
          "old_line_content": "        ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4104,
          "old_api": "handler",
          "new_api": null,
          "old_text": "sn->c->listening->handler(sn->c)",
          "new_text": null,
          "old_line_content": "        sn->c->listening->handler(sn->c);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6161,
          "old_api": "ngx_log_debug3",
          "new_api": null,
          "old_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic congestion slow start win:%uz ss:%z if:%uz\",\n                       cg->window, cg->ssthresh, cg->in_flight)",
          "new_text": null,
          "old_line_content": "        ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4120,
          "old_api": "ngx_post_event",
          "new_api": null,
          "old_text": "ngx_post_event(wev, &ngx_posted_events)",
          "new_text": null,
          "old_line_content": "            ngx_post_event(wev, &ngx_posted_events);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6168,
          "old_api": "ngx_log_debug3",
          "new_api": null,
          "old_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic congestion avoidance win:%uz ss:%z if:%uz\",\n                       cg->window, cg->ssthresh, cg->in_flight)",
          "new_text": null,
          "old_line_content": "        ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4139,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "        && (f->id & NGX_QUIC_STREAM_SERVER_INITIATED))",
          "content_same": false
        },
        {
          "line": 6194,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    cg->in_flight -= f->plen;",
          "content_same": false
        },
        {
          "line": 4151,
          "old_api": "ngx_quic_create_client_stream",
          "new_api": null,
          "old_text": "ngx_quic_create_client_stream(c, f->id)",
          "new_text": null,
          "old_line_content": "        sn = ngx_quic_create_client_stream(c, f->id);",
          "new_line_content": "            return NGX_ERROR;",
          "content_same": false
        },
        {
          "line": 6203,
          "old_api": "ngx_log_debug3",
          "new_api": null,
          "old_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic congestion lost recovery win:%uz ss:%z if:%uz\",\n                       cg->window, cg->ssthresh, cg->in_flight)",
          "new_text": null,
          "old_line_content": "        ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4167,
          "old_api": "handler",
          "new_api": null,
          "old_text": "sc->listening->handler(sc)",
          "new_text": null,
          "old_line_content": "        sc->listening->handler(sc);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6219,
          "old_api": "ngx_log_debug3",
          "new_api": null,
          "old_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic congestion lost win:%uz ss:%z if:%uz\",\n                   cg->window, cg->ssthresh, cg->in_flight)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4177,
          "old_api": "handler",
          "new_api": null,
          "old_text": "rev->handler(rev)",
          "new_text": null,
          "old_line_content": "        rev->handler(rev);",
          "new_line_content": "    return NGX_OK;",
          "content_same": false
        },
        {
          "line": 6239,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic free frame n:%ui\", qc->nframes)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4193,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "        && (f->id & NGX_QUIC_STREAM_SERVER_INITIATED) == 0)",
          "content_same": false
        },
        {
          "line": 6251,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4205,
          "old_api": "ngx_quic_create_client_stream",
          "new_api": null,
          "old_text": "ngx_quic_create_client_stream(c, f->id)",
          "new_text": null,
          "old_line_content": "        sn = ngx_quic_create_client_stream(c, f->id);",
          "new_line_content": "            return NGX_ERROR;",
          "content_same": false
        },
        {
          "line": 6266,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "        cl = qc->free_bufs;",
          "content_same": false
        },
        {
          "line": 4221,
          "old_api": "handler",
          "new_api": null,
          "old_text": "sc->listening->handler(sc)",
          "new_text": null,
          "old_line_content": "        sc->listening->handler(sc);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6277,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic reuse buffer n:%ui\", qc->nbufs)",
          "new_text": null,
          "old_line_content": "        ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4231,
          "old_api": "handler",
          "new_api": null,
          "old_text": "wev->handler(wev)",
          "new_text": null,
          "old_line_content": "        wev->handler(wev);",
          "new_line_content": "    return NGX_OK;",
          "content_same": false
        },
        {
          "line": 6284,
          "old_api": "ngx_alloc_chain_link",
          "new_api": null,
          "old_text": "ngx_alloc_chain_link(c->pool)",
          "new_text": null,
          "old_line_content": "    cl = ngx_alloc_chain_link(c->pool);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6289,
          "old_api": "ngx_create_temp_buf",
          "new_api": null,
          "old_text": "ngx_create_temp_buf(c->pool, NGX_QUIC_BUFFER_SIZE)",
          "new_text": null,
          "old_line_content": "    b = ngx_create_temp_buf(c->pool, NGX_QUIC_BUFFER_SIZE);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4244,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "        if (qc->streams.server_max_streams_bidi < f->limit) {",
          "content_same": false
        },
        {
          "line": 4250,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                           \"quic max_streams_bidi:%uL\", f->limit)",
          "new_text": null,
          "old_line_content": "            ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6301,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic alloc buffer n:%ui\", qc->nbufs)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4258,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                           \"quic max_streams_uni:%uL\", f->limit)",
          "new_text": null,
          "old_line_content": "            ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6316,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "#ifdef NGX_QUIC_DEBUG_ALLOC",
          "content_same": false
        },
        {
          "line": 6320,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic free buffer n:%ui\", qc->nbufs)",
          "new_text": null,
          "old_line_content": "        ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4274,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    if (frame == NULL) {",
          "content_same": false
        },
        {
          "line": 4276,
          "old_api": "ngx_quic_alloc_frame",
          "new_api": null,
          "old_text": "ngx_quic_alloc_frame(c)",
          "new_text": null,
          "old_line_content": "    frame = ngx_quic_alloc_frame(c);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6331,
          "old_api": "ngx_free_chain",
          "new_api": null,
          "old_text": "ngx_free_chain(c->pool, cl)",
          "new_text": null,
          "old_line_content": "                ngx_free_chain(c->pool, cl);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4285,
          "old_api": "ngx_quic_queue_frame",
          "new_api": null,
          "old_text": "ngx_quic_queue_frame(qc, frame)",
          "new_text": null,
          "old_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6344,
          "old_api": "ngx_free_chain",
          "new_api": null,
          "old_text": "ngx_free_chain(c->pool, cl)",
          "new_text": null,
          "old_line_content": "                ngx_free_chain(c->pool, cl);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4299,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "        /*",
          "content_same": false
        },
        {
          "line": 4311,
          "old_api": "ngx_quic_retire_connection_id",
          "new_api": null,
          "old_text": "ngx_quic_retire_connection_id(c, pkt->level, f->seqnum)",
          "new_text": null,
          "old_line_content": "        if (ngx_quic_retire_connection_id(c, pkt->level, f->seqnum) != NGX_OK) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4320,
          "old_api": "ngx_queue_head",
          "new_api": null,
          "old_text": "ngx_queue_head(&qc->client_ids)",
          "new_text": null,
          "old_line_content": "    for (q = ngx_queue_head(&qc->client_ids);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 6368,
          "old_api": "ngx_quic_alloc_buf",
          "new_api": null,
          "old_text": "ngx_quic_alloc_buf(c)",
          "new_text": null,
          "old_line_content": "        cl = ngx_quic_alloc_buf(c);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4322,
          "old_api": "ngx_queue_next",
          "new_api": null,
          "old_text": "ngx_queue_next(q)",
          "new_text": null,
          "old_line_content": "         q = ngx_queue_next(q))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4324,
          "old_api": "ngx_queue_data",
          "new_api": null,
          "old_text": "ngx_queue_data(q, ngx_quic_client_id_t, queue)",
          "new_text": null,
          "old_line_content": "        item = ngx_queue_data(q, ngx_quic_client_id_t, queue);",
          "new_line_content": "            cid = item;",
          "content_same": false
        },
        {
          "line": 6374,
          "old_api": "ngx_min",
          "new_api": null,
          "old_text": "ngx_min((size_t) (b->end - b->last), len)",
          "new_text": null,
          "old_line_content": "        n = ngx_min((size_t) (b->end - b->last), len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6376,
          "old_api": "ngx_cpymem",
          "new_api": null,
          "old_text": "ngx_cpymem(b->last, data, n)",
          "new_text": null,
          "old_line_content": "        b->last = ngx_cpymem(b->last, data, n);",
          "new_line_content": "        len -= n;",
          "content_same": false
        },
        {
          "line": 4339,
          "old_api": "ngx_strncmp",
          "new_api": null,
          "old_text": "ngx_strncmp(cid->id, f->cid, f->len)",
          "new_text": null,
          "old_line_content": "            || ngx_strncmp(cid->id, f->cid, f->len) != 0",
          "new_line_content": "            /*",
          "content_same": false
        },
        {
          "line": 4340,
          "old_api": "ngx_strncmp",
          "new_api": null,
          "old_text": "ngx_strncmp(cid->sr_token, f->srt, NGX_QUIC_SR_TOKEN_LEN)",
          "new_text": null,
          "old_line_content": "            || ngx_strncmp(cid->sr_token, f->srt, NGX_QUIC_SR_TOKEN_LEN) != 0)",
          "new_line_content": "             * ..a sequence number is used for different connection IDs,",
          "content_same": false
        },
        {
          "line": 4354,
          "old_api": "ngx_quic_alloc_client_id",
          "new_api": null,
          "old_text": "ngx_quic_alloc_client_id(c, qc)",
          "new_text": null,
          "old_line_content": "        cid = ngx_quic_alloc_client_id(c, qc);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6402,
          "old_api": "ngx_buf_size",
          "new_api": null,
          "old_text": "ngx_buf_size(in->buf)",
          "new_text": null,
          "old_line_content": "        if (!ngx_buf_in_memory(in->buf) || ngx_buf_size(in->buf) == 0) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6407,
          "old_api": "ngx_quic_alloc_buf",
          "new_api": null,
          "old_text": "ngx_quic_alloc_buf(c)",
          "new_text": null,
          "old_line_content": "        cl = ngx_quic_alloc_buf(c);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4361,
          "old_api": "ngx_memcpy",
          "new_api": null,
          "old_text": "ngx_memcpy(cid->id, f->cid, f->len)",
          "new_text": null,
          "old_line_content": "        ngx_memcpy(cid->id, f->cid, f->len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4363,
          "old_api": "ngx_memcpy",
          "new_api": null,
          "old_text": "ngx_memcpy(cid->sr_token, f->srt, NGX_QUIC_SR_TOKEN_LEN)",
          "new_text": null,
          "old_line_content": "        ngx_memcpy(cid->sr_token, f->srt, NGX_QUIC_SR_TOKEN_LEN);",
          "new_line_content": "        qc->nclient_ids++;",
          "content_same": false
        },
        {
          "line": 4365,
          "old_api": "ngx_queue_insert_tail",
          "new_api": null,
          "old_text": "ngx_queue_insert_tail(&qc->client_ids, &cid->queue)",
          "new_text": null,
          "old_line_content": "        ngx_queue_insert_tail(&qc->client_ids, &cid->queue);",
          "new_line_content": "        /* always use latest available connection id */",
          "content_same": false
        },
        {
          "line": 6419,
          "old_api": "ngx_min",
          "new_api": null,
          "old_text": "ngx_min(in->buf->last - in->buf->pos, b->end - b->last)",
          "new_text": null,
          "old_line_content": "            n = ngx_min(in->buf->last - in->buf->pos, b->end - b->last);",
          "new_line_content": "                n = limit;",
          "content_same": false
        },
        {
          "line": 6425,
          "old_api": "ngx_cpymem",
          "new_api": null,
          "old_text": "ngx_cpymem(b->last, in->buf->pos, n)",
          "new_text": null,
          "old_line_content": "            b->last = ngx_cpymem(b->last, in->buf->pos, n);",
          "new_line_content": "            if (in->buf->pos == in->buf->last) {",
          "content_same": false
        },
        {
          "line": 4390,
          "old_api": "ngx_queue_head",
          "new_api": null,
          "old_text": "ngx_queue_head(&qc->client_ids)",
          "new_text": null,
          "old_line_content": "    q = ngx_queue_head(&qc->client_ids);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4394,
          "old_api": "ngx_queue_data",
          "new_api": null,
          "old_text": "ngx_queue_data(q, ngx_quic_client_id_t, queue)",
          "new_text": null,
          "old_line_content": "        cid = ngx_queue_data(q, ngx_quic_client_id_t, queue);",
          "new_line_content": "        if (cid->seqnum >= f->retire) {",
          "content_same": false
        },
        {
          "line": 4395,
          "old_api": "ngx_queue_next",
          "new_api": null,
          "old_text": "ngx_queue_next(q)",
          "new_text": null,
          "old_line_content": "        q = ngx_queue_next(q);",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 4403,
          "old_api": "ngx_quic_retire_connection_id",
          "new_api": null,
          "old_text": "ngx_quic_retire_connection_id(c, pkt->level, cid->seqnum)",
          "new_text": null,
          "old_line_content": "        if (ngx_quic_retire_connection_id(c, pkt->level, cid->seqnum)",
          "new_line_content": "            return NGX_ERROR;",
          "content_same": false
        },
        {
          "line": 4409,
          "old_api": "ngx_queue_remove",
          "new_api": null,
          "old_text": "ngx_queue_remove(&cid->queue)",
          "new_text": null,
          "old_line_content": "        ngx_queue_remove(&cid->queue);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4410,
          "old_api": "ngx_queue_insert_head",
          "new_api": null,
          "old_text": "ngx_queue_insert_head(&qc->free_client_ids, &cid->queue)",
          "new_text": null,
          "old_line_content": "        ngx_queue_insert_head(&qc->free_client_ids, &cid->queue);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6462,
          "old_api": "ngx_buf_size",
          "new_api": null,
          "old_text": "ngx_buf_size(in->buf)",
          "new_text": null,
          "old_line_content": "        n = ngx_buf_size(in->buf);",
          "new_line_content": "            out = in->next;",
          "content_same": false
        },
        {
          "line": 4440,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    if (frame == NULL) {",
          "content_same": false
        },
        {
          "line": 4442,
          "old_api": "ngx_quic_alloc_frame",
          "new_api": null,
          "old_text": "ngx_quic_alloc_frame(c)",
          "new_text": null,
          "old_line_content": "    frame = ngx_quic_alloc_frame(c);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6490,
          "old_api": "ngx_alloc_buf",
          "new_api": null,
          "old_text": "ngx_alloc_buf(c->pool)",
          "new_text": null,
          "old_line_content": "            b = ngx_alloc_buf(c->pool);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 4451,
          "old_api": "ngx_quic_queue_frame",
          "new_api": null,
          "old_text": "ngx_quic_queue_frame(qc, frame)",
          "new_text": null,
          "old_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6502,
          "old_api": "ngx_alloc_chain_link",
          "new_api": null,
          "old_text": "ngx_alloc_chain_link(c->pool)",
          "new_text": null,
          "old_line_content": "    out = ngx_alloc_chain_link(c->pool);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6512,
          "old_api": "ngx_alloc_buf",
          "new_api": null,
          "old_text": "ngx_alloc_buf(c->pool)",
          "new_text": null,
          "old_line_content": "        b = ngx_alloc_buf(c->pool);",
          "new_line_content": "            return NGX_CHAIN_ERROR;",
          "content_same": false
        },
        {
          "line": 6514,
          "old_api": "ngx_free_chain",
          "new_api": null,
          "old_text": "ngx_free_chain(c->pool, out)",
          "new_text": null,
          "old_line_content": "            ngx_free_chain(c->pool, out);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4467,
          "old_api": "ngx_queue_head",
          "new_api": null,
          "old_text": "ngx_queue_head(&qc->server_ids)",
          "new_text": null,
          "old_line_content": "    for (q = ngx_queue_head(&qc->server_ids);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 4469,
          "old_api": "ngx_queue_next",
          "new_api": null,
          "old_text": "ngx_queue_next(q)",
          "new_text": null,
          "old_line_content": "         q = ngx_queue_next(q))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4474,
          "old_api": "ngx_queue_remove",
          "new_api": null,
          "old_text": "ngx_queue_remove(q)",
          "new_text": null,
          "old_line_content": "            ngx_queue_remove(q);",
          "new_line_content": "            qc->nserver_ids--;",
          "content_same": false
        },
        {
          "line": 4475,
          "old_api": "ngx_queue_insert_tail",
          "new_api": null,
          "old_text": "ngx_queue_insert_tail(&qc->free_server_ids, &sid->queue)",
          "new_text": null,
          "old_line_content": "            ngx_queue_insert_tail(&qc->free_server_ids, &sid->queue);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 4476,
          "old_api": "ngx_rbtree_delete",
          "new_api": null,
          "old_text": "ngx_rbtree_delete(&c->listening->rbtree, &sid->udp.node)",
          "new_text": null,
          "old_line_content": "            ngx_rbtree_delete(&c->listening->rbtree, &sid->udp.node);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4482,
          "old_api": "ngx_quic_issue_server_ids",
          "new_api": null,
          "old_text": "ngx_quic_issue_server_ids(c)",
          "new_text": null,
          "old_line_content": "    return ngx_quic_issue_server_ids(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4496,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4498,
          "old_api": "ngx_min",
          "new_api": null,
          "old_text": "ngx_min(NGX_QUIC_MAX_SERVER_IDS, qc->ctp.active_connection_id_limit)",
          "new_text": null,
          "old_line_content": "    n = ngx_min(NGX_QUIC_MAX_SERVER_IDS, qc->ctp.active_connection_id_limit);",
          "new_line_content": "                   \"quic issue server ids has:%ui max:%ui\", qc->nserver_ids, n);",
          "content_same": false
        },
        {
          "line": 4500,
          "old_api": "ngx_log_debug2",
          "new_api": null,
          "old_text": "ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic issue server ids has:%ui max:%ui\", qc->nserver_ids, n)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    while (qc->nserver_ids < n) {",
          "content_same": false
        },
        {
          "line": 4504,
          "old_api": "ngx_quic_create_server_id",
          "new_api": null,
          "old_text": "ngx_quic_create_server_id(c, id)",
          "new_text": null,
          "old_line_content": "        if (ngx_quic_create_server_id(c, id) != NGX_OK) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4511,
          "old_api": "ngx_quic_insert_server_id",
          "new_api": null,
          "old_text": "ngx_quic_insert_server_id(c, &dcid)",
          "new_text": null,
          "old_line_content": "        sid = ngx_quic_insert_server_id(c, &dcid);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4516,
          "old_api": "ngx_quic_alloc_frame",
          "new_api": null,
          "old_text": "ngx_quic_alloc_frame(c)",
          "new_text": null,
          "old_line_content": "        frame = ngx_quic_alloc_frame(c);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4526,
          "old_api": "ngx_memcpy",
          "new_api": null,
          "old_text": "ngx_memcpy(frame->u.ncid.cid, id, NGX_QUIC_SERVER_CID_LEN)",
          "new_text": null,
          "old_line_content": "        ngx_memcpy(frame->u.ncid.cid, id, NGX_QUIC_SERVER_CID_LEN);",
          "new_line_content": "                                  frame->u.ncid.srt)",
          "content_same": false
        },
        {
          "line": 4528,
          "old_api": "ngx_quic_new_sr_token",
          "new_api": null,
          "old_text": "ngx_quic_new_sr_token(c, &dcid, &qc->conf->sr_token_key,\n                                  frame->u.ncid.srt)",
          "new_text": null,
          "old_line_content": "        if (ngx_quic_new_sr_token(c, &dcid, &qc->conf->sr_token_key,",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 4535,
          "old_api": "ngx_quic_queue_frame",
          "new_api": null,
          "old_text": "ngx_quic_queue_frame(qc, frame)",
          "new_text": null,
          "old_line_content": "        ngx_quic_queue_frame(qc, frame);",
          "new_line_content": "    return NGX_OK;",
          "content_same": false
        },
        {
          "line": 4549,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "                   \"quic clear temp server ids\");",
          "content_same": false
        },
        {
          "line": 4554,
          "old_api": "ngx_queue_head",
          "new_api": null,
          "old_text": "ngx_queue_head(&qc->server_ids)",
          "new_text": null,
          "old_line_content": "    for (q = ngx_queue_head(&qc->server_ids);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 4558,
          "old_api": "ngx_queue_next",
          "new_api": null,
          "old_text": "ngx_queue_next(q)",
          "new_text": null,
          "old_line_content": "        next = ngx_queue_next(q);",
          "new_line_content": "        if (sid->seqnum != NGX_QUIC_UNSET_PN) {",
          "content_same": false
        },
        {
          "line": 4559,
          "old_api": "ngx_queue_data",
          "new_api": null,
          "old_text": "ngx_queue_data(q, ngx_quic_server_id_t, queue)",
          "new_text": null,
          "old_line_content": "        sid = ngx_queue_data(q, ngx_quic_server_id_t, queue);",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 4565,
          "old_api": "ngx_queue_remove",
          "new_api": null,
          "old_text": "ngx_queue_remove(q)",
          "new_text": null,
          "old_line_content": "        ngx_queue_remove(q);",
          "new_line_content": "        qc->nserver_ids--;",
          "content_same": false
        },
        {
          "line": 4566,
          "old_api": "ngx_queue_insert_tail",
          "new_api": null,
          "old_text": "ngx_queue_insert_tail(&qc->free_server_ids, &sid->queue)",
          "new_text": null,
          "old_line_content": "        ngx_queue_insert_tail(&qc->free_server_ids, &sid->queue);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4567,
          "old_api": "ngx_rbtree_delete",
          "new_api": null,
          "old_text": "ngx_rbtree_delete(&c->listening->rbtree, &sid->udp.node)",
          "new_text": null,
          "old_line_content": "        ngx_rbtree_delete(&c->listening->rbtree, &sid->udp.node);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4580,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    if (sid == NULL) {",
          "content_same": false
        },
        {
          "line": 4582,
          "old_api": "ngx_quic_alloc_server_id",
          "new_api": null,
          "old_text": "ngx_quic_alloc_server_id(c, qc)",
          "new_text": null,
          "old_line_content": "    sid = ngx_quic_alloc_server_id(c, qc);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4594,
          "old_api": "ngx_memcpy",
          "new_api": null,
          "old_text": "ngx_memcpy(sid->id, id->data, id->len)",
          "new_text": null,
          "old_line_content": "    ngx_memcpy(sid->id, id->data, id->len);",
          "new_line_content": "    qc->nserver_ids++;",
          "content_same": false
        },
        {
          "line": 4596,
          "old_api": "ngx_queue_insert_tail",
          "new_api": null,
          "old_text": "ngx_queue_insert_tail(&qc->server_ids, &sid->queue)",
          "new_text": null,
          "old_line_content": "    ngx_queue_insert_tail(&qc->server_ids, &sid->queue);",
          "new_line_content": "    dcid.data = sid->id;",
          "content_same": false
        },
        {
          "line": 4602,
          "old_api": "ngx_insert_udp_connection",
          "new_api": null,
          "old_text": "ngx_insert_udp_connection(c, &sid->udp, &dcid)",
          "new_text": null,
          "old_line_content": "    ngx_insert_udp_connection(c, &sid->udp, &dcid);",
          "new_line_content": "                   \"quic insert server id seqnum:%uL id len:%uz %xV\",",
          "content_same": false
        },
        {
          "line": 4604,
          "old_api": "ngx_log_debug3",
          "new_api": null,
          "old_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic insert server id seqnum:%uL id len:%uz %xV\",\n                   sid->seqnum, id->len, id)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4621,
          "old_api": "ngx_queue_data",
          "new_api": null,
          "old_text": "ngx_queue_data(q, ngx_quic_client_id_t, queue)",
          "new_text": null,
          "old_line_content": "        cid = ngx_queue_data(q, ngx_quic_client_id_t, queue);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4623,
          "old_api": "ngx_queue_remove",
          "new_api": null,
          "old_text": "ngx_queue_remove(&cid->queue)",
          "new_text": null,
          "old_line_content": "        ngx_queue_remove(&cid->queue);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4625,
          "old_api": "ngx_memzero",
          "new_api": null,
          "old_text": "ngx_memzero(cid, sizeof(ngx_quic_client_id_t))",
          "new_text": null,
          "old_line_content": "        ngx_memzero(cid, sizeof(ngx_quic_client_id_t));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4629,
          "old_api": "ngx_pcalloc",
          "new_api": null,
          "old_text": "ngx_pcalloc(c->pool, sizeof(ngx_quic_client_id_t))",
          "new_text": null,
          "old_line_content": "        cid = ngx_pcalloc(c->pool, sizeof(ngx_quic_client_id_t));",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4648,
          "old_api": "ngx_queue_data",
          "new_api": null,
          "old_text": "ngx_queue_data(q, ngx_quic_server_id_t, queue)",
          "new_text": null,
          "old_line_content": "        sid = ngx_queue_data(q, ngx_quic_server_id_t, queue);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4650,
          "old_api": "ngx_queue_remove",
          "new_api": null,
          "old_text": "ngx_queue_remove(&sid->queue)",
          "new_text": null,
          "old_line_content": "        ngx_queue_remove(&sid->queue);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4652,
          "old_api": "ngx_memzero",
          "new_api": null,
          "old_text": "ngx_memzero(sid, sizeof(ngx_quic_server_id_t))",
          "new_text": null,
          "old_line_content": "        ngx_memzero(sid, sizeof(ngx_quic_server_id_t));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4656,
          "old_api": "ngx_pcalloc",
          "new_api": null,
          "old_text": "ngx_pcalloc(c->pool, sizeof(ngx_quic_server_id_t))",
          "new_text": null,
          "old_line_content": "        sid = ngx_pcalloc(c->pool, sizeof(ngx_quic_server_id_t));",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4671,
          "old_api": "ngx_quic_get_send_ctx",
          "new_api": null,
          "old_text": "ngx_quic_get_send_ctx(qc, frame->level)",
          "new_text": null,
          "old_line_content": "    ctx = ngx_quic_get_send_ctx(qc, frame->level);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4673,
          "old_api": "ngx_queue_insert_tail",
          "new_api": null,
          "old_text": "ngx_queue_insert_tail(&ctx->frames, &frame->queue)",
          "new_text": null,
          "old_line_content": "    ngx_queue_insert_tail(&ctx->frames, &frame->queue);",
          "new_line_content": "    /* always succeeds */",
          "content_same": false
        },
        {
          "line": 4675,
          "old_api": "ngx_quic_create_frame",
          "new_api": null,
          "old_text": "ngx_quic_create_frame(NULL, frame)",
          "new_text": null,
          "old_line_content": "    frame->len = ngx_quic_create_frame(NULL, frame);",
          "new_line_content": "    if (qc->closing) {",
          "content_same": false
        },
        {
          "line": 4682,
          "old_api": "ngx_post_event",
          "new_api": null,
          "old_text": "ngx_post_event(&qc->push, &ngx_posted_events)",
          "new_text": null,
          "old_line_content": "    ngx_post_event(&qc->push, &ngx_posted_events);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4700,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "        p = dst;",
          "content_same": false
        },
        {
          "line": 4705,
          "old_api": "ngx_min",
          "new_api": null,
          "old_text": "ngx_min(qc->ctp.max_udp_payload_size,\n                      NGX_QUIC_MAX_UDP_PAYLOAD_SIZE)",
          "new_text": null,
          "old_line_content": "        len = ngx_min(qc->ctp.max_udp_payload_size,",
          "new_line_content": "        if (!qc->validated) {",
          "content_same": false
        },
        {
          "line": 4714,
          "old_api": "ngx_quic_get_padding_level",
          "new_api": null,
          "old_text": "ngx_quic_get_padding_level(c)",
          "new_text": null,
          "old_line_content": "        pad = ngx_quic_get_padding_level(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4720,
          "old_api": "ngx_quic_generate_ack",
          "new_api": null,
          "old_text": "ngx_quic_generate_ack(c, ctx)",
          "new_text": null,
          "old_line_content": "            if (ngx_quic_generate_ack(c, ctx) != NGX_OK) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4727,
          "old_api": "ngx_quic_output_packet",
          "new_api": null,
          "old_text": "ngx_quic_output_packet(c, ctx, p, len, min)",
          "new_text": null,
          "old_line_content": "            n = ngx_quic_output_packet(c, ctx, p, len, min);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 4741,
          "old_api": "ngx_quic_send",
          "new_api": null,
          "old_text": "ngx_quic_send(c, dst, len)",
          "new_text": null,
          "old_line_content": "        n = ngx_quic_send(c, dst, len);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4748,
          "old_api": "ngx_add_timer",
          "new_api": null,
          "old_text": "ngx_add_timer(c->read, qc->tp.max_idle_timeout)",
          "new_text": null,
          "old_line_content": "            ngx_add_timer(c->read, qc->tp.max_idle_timeout);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4775,
          "old_api": "ngx_queue_head",
          "new_api": null,
          "old_text": "ngx_queue_head(&ctx->frames)",
          "new_text": null,
          "old_line_content": "    for (q = ngx_queue_head(&ctx->frames);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 4777,
          "old_api": "ngx_queue_next",
          "new_api": null,
          "old_text": "ngx_queue_next(q)",
          "new_text": null,
          "old_line_content": "         q = ngx_queue_next(q))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4782,
          "old_api": "ngx_quic_get_send_ctx",
          "new_api": null,
          "old_text": "ngx_quic_get_send_ctx(qc, ssl_encryption_handshake)",
          "new_text": null,
          "old_line_content": "            ctx = ngx_quic_get_send_ctx(qc, ssl_encryption_handshake);",
          "new_line_content": "                return 0;",
          "content_same": false
        },
        {
          "line": 4784,
          "old_api": "ngx_queue_empty",
          "new_api": null,
          "old_text": "ngx_queue_empty(&ctx->frames)",
          "new_text": null,
          "old_line_content": "            if (ngx_queue_empty(&ctx->frames)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4809,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "        qc = ngx_quic_get_connection(c);",
          "new_line_content": "            && delay < qc->tp.max_ack_delay)",
          "content_same": false
        },
        {
          "line": 4815,
          "old_api": "ngx_add_timer",
          "new_api": null,
          "old_text": "ngx_add_timer(&qc->push,\n                              qc->tp.max_ack_delay - delay)",
          "new_text": null,
          "old_line_content": "                ngx_add_timer(&qc->push,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4823,
          "old_api": "ngx_quic_send_ack",
          "new_api": null,
          "old_text": "ngx_quic_send_ack(c, ctx)",
          "new_text": null,
          "old_line_content": "    if (ngx_quic_send_ack(c, ctx) != NGX_OK) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4851,
          "old_api": "ngx_queue_empty",
          "new_api": null,
          "old_text": "ngx_queue_empty(&ctx->frames)",
          "new_text": null,
          "old_line_content": "    if (ngx_queue_empty(&ctx->frames)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4855,
          "old_api": "ngx_log_debug3",
          "new_api": null,
          "old_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic output %s packet max:%uz min:%uz\",\n                   ngx_quic_level_name(ctx->level), max, min)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4857,
          "old_api": "ngx_quic_level_name",
          "new_api": null,
          "old_text": "ngx_quic_level_name(ctx->level)",
          "new_text": null,
          "old_line_content": "                   ngx_quic_level_name(ctx->level), max, min);",
          "new_line_content": "    cg = &qc->congestion;",
          "content_same": false
        },
        {
          "line": 4859,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    hlen = (ctx->level == ssl_encryption_application)",
          "content_same": false
        },
        {
          "line": 4869,
          "old_api": "ngx_memzero",
          "new_api": null,
          "old_text": "ngx_memzero(&pkt, sizeof(ngx_quic_header_t))",
          "new_text": null,
          "old_line_content": "    ngx_memzero(&pkt, sizeof(ngx_quic_header_t));",
          "new_line_content": "    nframes = 0;",
          "content_same": false
        },
        {
          "line": 4876,
          "old_api": "ngx_queue_head",
          "new_api": null,
          "old_text": "ngx_queue_head(&ctx->frames)",
          "new_text": null,
          "old_line_content": "    for (q = ngx_queue_head(&ctx->frames);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 4878,
          "old_api": "ngx_queue_next",
          "new_api": null,
          "old_text": "ngx_queue_next(q)",
          "new_text": null,
          "old_line_content": "         q = ngx_queue_next(q))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4880,
          "old_api": "ngx_queue_data",
          "new_api": null,
          "old_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "new_text": null,
          "old_line_content": "        f = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "new_line_content": "            max = cg->window;",
          "content_same": false
        },
        {
          "line": 4891,
          "old_api": "ngx_quic_split_frame",
          "new_api": null,
          "old_text": "ngx_quic_split_frame(c, f, max - hlen - len)",
          "new_text": null,
          "old_line_content": "            rc = ngx_quic_split_frame(c, f, max - hlen - len);",
          "new_line_content": "                return NGX_ERROR;",
          "content_same": false
        },
        {
          "line": 4906,
          "old_api": "ngx_quic_log_frame",
          "new_api": null,
          "old_text": "ngx_quic_log_frame(c->log, f, 1)",
          "new_text": null,
          "old_line_content": "        ngx_quic_log_frame(c->log, f, 1);",
          "new_line_content": "        if (flen == -1) {",
          "content_same": false
        },
        {
          "line": 4908,
          "old_api": "ngx_quic_create_frame",
          "new_api": null,
          "old_text": "ngx_quic_create_frame(p, f)",
          "new_text": null,
          "old_line_content": "        flen = ngx_quic_create_frame(p, f);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4946,
          "old_api": "ngx_quic_set_packet_number",
          "new_api": null,
          "old_text": "ngx_quic_set_packet_number(&pkt, ctx)",
          "new_text": null,
          "old_line_content": "    ngx_quic_set_packet_number(&pkt, ctx);",
          "new_line_content": "    pkt.log = c->log;",
          "content_same": false
        },
        {
          "line": 4958,
          "old_api": "ngx_quic_create_header",
          "new_api": null,
          "old_text": "ngx_quic_create_header(&pkt, NULL, out.len, NULL)",
          "new_text": null,
          "old_line_content": "               + ngx_quic_create_header(&pkt, NULL, out.len, NULL);",
          "new_line_content": "            pad_len = min - hlen;",
          "content_same": false
        },
        {
          "line": 4966,
          "old_api": "ngx_memset",
          "new_api": null,
          "old_text": "ngx_memset(p, NGX_QUIC_FT_PADDING, pad_len - out.len)",
          "new_text": null,
          "old_line_content": "        ngx_memset(p, NGX_QUIC_FT_PADDING, pad_len - out.len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4980,
          "old_api": "ngx_quic_encrypt",
          "new_api": null,
          "old_text": "ngx_quic_encrypt(&pkt, &res)",
          "new_text": null,
          "old_line_content": "    if (ngx_quic_encrypt(&pkt, &res) != NGX_OK) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4990,
          "old_api": "ngx_queue_head",
          "new_api": null,
          "old_text": "ngx_queue_head(&ctx->frames)",
          "new_text": null,
          "old_line_content": "            q = ngx_queue_head(&ctx->frames);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4991,
          "old_api": "ngx_queue_data",
          "new_api": null,
          "old_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "new_text": null,
          "old_line_content": "            f = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "new_line_content": "            do {",
          "content_same": false
        },
        {
          "line": 4995,
          "old_api": "ngx_queue_head",
          "new_api": null,
          "old_text": "ngx_queue_head(&ctx->frames)",
          "new_text": null,
          "old_line_content": "                q = ngx_queue_head(&ctx->frames);",
          "new_line_content": "            } while (--nframes);",
          "content_same": false
        },
        {
          "line": 4996,
          "old_api": "ngx_queue_remove",
          "new_api": null,
          "old_text": "ngx_queue_remove(q)",
          "new_text": null,
          "old_line_content": "                ngx_queue_remove(q);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4997,
          "old_api": "ngx_queue_insert_tail",
          "new_api": null,
          "old_text": "ngx_queue_insert_tail(&ctx->sent, q)",
          "new_text": null,
          "old_line_content": "                ngx_queue_insert_tail(&ctx->sent, q);",
          "new_line_content": "            if (qc->pto.timer_set) {",
          "content_same": false
        },
        {
          "line": 5004,
          "old_api": "ngx_quic_pto",
          "new_api": null,
          "old_text": "ngx_quic_pto(c, ctx)",
          "new_text": null,
          "old_line_content": "            ngx_add_timer(&qc->pto, ngx_quic_pto(c, ctx));",
          "new_line_content": "        cg->in_flight += res.len;",
          "content_same": false
        },
        {
          "line": 5009,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic congestion send if:%uz\", cg->in_flight)",
          "new_text": null,
          "old_line_content": "        ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5017,
          "old_api": "ngx_queue_remove",
          "new_api": null,
          "old_text": "ngx_queue_remove(q)",
          "new_text": null,
          "old_line_content": "        ngx_queue_remove(q);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5018,
          "old_api": "ngx_quic_free_frame",
          "new_api": null,
          "old_text": "ngx_quic_free_frame(c, f)",
          "new_text": null,
          "old_line_content": "        ngx_quic_free_frame(c, f);",
          "new_line_content": "    return res.len;",
          "content_same": false
        },
        {
          "line": 5054,
          "old_api": "ngx_log_debug3",
          "new_api": null,
          "old_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic split frame now:%uz need:%uz shrink:%uz\",\n                   f->len, len, shrink)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5068,
          "old_api": "ngx_log_error",
          "new_api": null,
          "old_text": "ngx_log_error(NGX_LOG_ERR, c->log, 0, \"could not split QUIC frame\")",
          "new_text": null,
          "old_line_content": "        ngx_log_error(NGX_LOG_ERR, c->log, 0, \"could not split QUIC frame\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5072,
          "old_api": "ngx_quic_alloc_frame",
          "new_api": null,
          "old_text": "ngx_quic_alloc_frame(c)",
          "new_text": null,
          "old_line_content": "    nf = ngx_quic_alloc_frame(c);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5081,
          "old_api": "ngx_quic_create_frame",
          "new_api": null,
          "old_text": "ngx_quic_create_frame(NULL, nf)",
          "new_text": null,
          "old_line_content": "    nf->len = ngx_quic_create_frame(NULL, nf);",
          "new_line_content": "    if (nf->data == NGX_CHAIN_ERROR) {",
          "content_same": false
        },
        {
          "line": 5083,
          "old_api": "ngx_quic_split_bufs",
          "new_api": null,
          "old_text": "ngx_quic_split_bufs(c, f->data, of->length)",
          "new_text": null,
          "old_line_content": "    nf->data = ngx_quic_split_bufs(c, f->data, of->length);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5088,
          "old_api": "ngx_queue_insert_after",
          "new_api": null,
          "old_text": "ngx_queue_insert_after(&f->queue, &nf->queue)",
          "new_text": null,
          "old_line_content": "    ngx_queue_insert_after(&f->queue, &nf->queue);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5101,
          "old_api": "ngx_queue_head",
          "new_api": null,
          "old_text": "ngx_queue_head(frames)",
          "new_text": null,
          "old_line_content": "        q = ngx_queue_head(frames);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 5103,
          "old_api": "ngx_queue_sentinel",
          "new_api": null,
          "old_text": "ngx_queue_sentinel(frames)",
          "new_text": null,
          "old_line_content": "        if (q == ngx_queue_sentinel(frames)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5107,
          "old_api": "ngx_queue_remove",
          "new_api": null,
          "old_text": "ngx_queue_remove(q)",
          "new_text": null,
          "old_line_content": "        ngx_queue_remove(q);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5109,
          "old_api": "ngx_queue_data",
          "new_api": null,
          "old_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "new_text": null,
          "old_line_content": "        f = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "new_line_content": "    } while (1);",
          "content_same": false
        },
        {
          "line": 5111,
          "old_api": "ngx_quic_free_frame",
          "new_api": null,
          "old_text": "ngx_quic_free_frame(c, f)",
          "new_text": null,
          "old_line_content": "        ngx_quic_free_frame(c, f);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5122,
          "old_api": "ngx_memzero",
          "new_api": null,
          "old_text": "ngx_memzero(&b, sizeof(ngx_buf_t))",
          "new_text": null,
          "old_line_content": "    ngx_memzero(&b, sizeof(ngx_buf_t));",
          "new_line_content": "    b.last = b.end = buf + len;",
          "content_same": false
        },
        {
          "line": 5132,
          "old_api": "send_chain",
          "new_api": null,
          "old_text": "c->send_chain(c, &cl, 0)",
          "new_text": null,
          "old_line_content": "    res = c->send_chain(c, &cl, 0);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5184,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5192,
          "old_api": "ngx_queue_empty",
          "new_api": null,
          "old_text": "ngx_queue_empty(&ctx->sent)",
          "new_text": null,
          "old_line_content": "        if (ngx_queue_empty(&ctx->sent)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5196,
          "old_api": "ngx_queue_head",
          "new_api": null,
          "old_text": "ngx_queue_head(&ctx->sent)",
          "new_text": null,
          "old_line_content": "        q = ngx_queue_head(&ctx->sent);",
          "new_line_content": "        if (start->pnum <= ctx->largest_ack",
          "content_same": false
        },
        {
          "line": 5197,
          "old_api": "ngx_queue_data",
          "new_api": null,
          "old_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "new_text": null,
          "old_line_content": "        start = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "new_line_content": "            && ctx->largest_ack != NGX_QUIC_UNSET_PN)",
          "content_same": false
        },
        {
          "line": 5205,
          "old_api": "ngx_log_debug3",
          "new_api": null,
          "old_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic pto pnum:%uL pto_count:%ui level:%d\",\n                       start->pnum, qc->pto_count, start->level)",
          "new_text": null,
          "old_line_content": "        ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5212,
          "old_api": "ngx_quic_connstate_dbg",
          "new_api": null,
          "old_text": "ngx_quic_connstate_dbg(c)",
          "new_text": null,
          "old_line_content": "    ngx_quic_connstate_dbg(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5221,
          "old_api": "ngx_log_debug0",
          "new_api": null,
          "old_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, ev->log, 0, \"quic push timer\")",
          "new_text": null,
          "old_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_EVENT, ev->log, 0, \"quic push timer\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5225,
          "old_api": "ngx_quic_output",
          "new_api": null,
          "old_text": "ngx_quic_output(c)",
          "new_text": null,
          "old_line_content": "    if (ngx_quic_output(c) != NGX_OK) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5226,
          "old_api": "ngx_quic_close_connection",
          "new_api": null,
          "old_text": "ngx_quic_close_connection(c, NGX_ERROR)",
          "new_text": null,
          "old_line_content": "        ngx_quic_close_connection(c, NGX_ERROR);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5230,
          "old_api": "ngx_quic_connstate_dbg",
          "new_api": null,
          "old_text": "ngx_quic_connstate_dbg(c)",
          "new_text": null,
          "old_line_content": "    ngx_quic_connstate_dbg(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5239,
          "old_api": "ngx_log_debug0",
          "new_api": null,
          "old_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, ev->log, 0, \"quic lost timer\")",
          "new_text": null,
          "old_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_EVENT, ev->log, 0, \"quic lost timer\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5243,
          "old_api": "ngx_quic_detect_lost",
          "new_api": null,
          "old_text": "ngx_quic_detect_lost(c)",
          "new_text": null,
          "old_line_content": "    if (ngx_quic_detect_lost(c) != NGX_OK) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5247,
          "old_api": "ngx_quic_connstate_dbg",
          "new_api": null,
          "old_text": "ngx_quic_connstate_dbg(c)",
          "new_text": null,
          "old_line_content": "    ngx_quic_connstate_dbg(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5261,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    min_wait = 0;",
          "content_same": false
        },
        {
          "line": 5266,
          "old_api": "ngx_max",
          "new_api": null,
          "old_text": "ngx_max(qc->latest_rtt, qc->avg_rtt)",
          "new_text": null,
          "old_line_content": "    thr = NGX_QUIC_TIME_THR * ngx_max(qc->latest_rtt, qc->avg_rtt);",
          "new_line_content": "    for (i = 0; i < NGX_QUIC_SEND_CTX_LAST; i++) {",
          "content_same": false
        },
        {
          "line": 5267,
          "old_api": "ngx_max",
          "new_api": null,
          "old_text": "ngx_max(thr, NGX_QUIC_TIME_GRANULARITY)",
          "new_text": null,
          "old_line_content": "    thr = ngx_max(thr, NGX_QUIC_TIME_GRANULARITY);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5279,
          "old_api": "ngx_queue_head",
          "new_api": null,
          "old_text": "ngx_queue_head(&ctx->sent)",
          "new_text": null,
          "old_line_content": "            q = ngx_queue_head(&ctx->sent);",
          "new_line_content": "            if (start->pnum > ctx->largest_ack) {",
          "content_same": false
        },
        {
          "line": 5280,
          "old_api": "ngx_queue_data",
          "new_api": null,
          "old_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "new_text": null,
          "old_line_content": "            start = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "new_line_content": "                break;",
          "content_same": false
        },
        {
          "line": 5288,
          "old_api": "ngx_log_debug4",
          "new_api": null,
          "old_text": "ngx_log_debug4(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                           \"quic detect_lost pnum:%uL thr:%M wait:%i level:%d\",\n                           start->pnum, thr, (ngx_int_t) wait, start->level)",
          "new_text": null,
          "old_line_content": "            ngx_log_debug4(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5303,
          "old_api": "ngx_quic_resend_frames",
          "new_api": null,
          "old_text": "ngx_quic_resend_frames(c, ctx)",
          "new_text": null,
          "old_line_content": "            ngx_quic_resend_frames(c, ctx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5320,
          "old_api": "ngx_add_timer",
          "new_api": null,
          "old_text": "ngx_add_timer(&qc->pto, min_wait)",
          "new_text": null,
          "old_line_content": "    ngx_add_timer(&qc->pto, min_wait);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3285,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5336,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5338,
          "old_api": "ngx_queue_data",
          "new_api": null,
          "old_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "new_text": null,
          "old_line_content": "    start = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "new_line_content": "                   \"quic resend packet pnum:%uL\", start->pnum);",
          "content_same": false
        },
        {
          "line": 3295,
          "old_api": "ngx_queue_data",
          "new_api": null,
          "old_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "new_text": null,
          "old_line_content": "        f = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3296,
          "old_api": "ngx_queue_prev",
          "new_api": null,
          "old_text": "ngx_queue_prev(q)",
          "new_text": null,
          "old_line_content": "        q = ngx_queue_prev(q);",
          "new_line_content": "        if (f->pnum >= min && f->pnum <= max) {",
          "content_same": false
        },
        {
          "line": 5346,
          "old_api": "ngx_queue_data",
          "new_api": null,
          "old_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "new_text": null,
          "old_line_content": "        f = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 3299,
          "old_api": "ngx_quic_congestion_ack",
          "new_api": null,
          "old_text": "ngx_quic_congestion_ack(c, f)",
          "new_text": null,
          "old_line_content": "            ngx_quic_congestion_ack(c, f);",
          "new_line_content": "            switch (f->type) {",
          "content_same": false
        },
        {
          "line": 3304,
          "old_api": "ngx_quic_drop_ack_ranges",
          "new_api": null,
          "old_text": "ngx_quic_drop_ack_ranges(c, ctx, f->u.ack.largest)",
          "new_text": null,
          "old_line_content": "                ngx_quic_drop_ack_ranges(c, ctx, f->u.ack.largest);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5352,
          "old_api": "ngx_queue_next",
          "new_api": null,
          "old_text": "ngx_queue_next(q)",
          "new_text": null,
          "old_line_content": "        q = ngx_queue_next(q);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5354,
          "old_api": "ngx_queue_remove",
          "new_api": null,
          "old_text": "ngx_queue_remove(&f->queue)",
          "new_text": null,
          "old_line_content": "        ngx_queue_remove(&f->queue);",
          "new_line_content": "        case NGX_QUIC_FT_ACK:",
          "content_same": false
        },
        {
          "line": 5361,
          "old_api": "ngx_quic_free_frame",
          "new_api": null,
          "old_text": "ngx_quic_free_frame(c, f)",
          "new_text": null,
          "old_line_content": "            ngx_quic_free_frame(c, f);",
          "new_line_content": "        case NGX_QUIC_FT_PING:",
          "content_same": false
        },
        {
          "line": 3315,
          "old_api": "ngx_quic_handle_stream_ack",
          "new_api": null,
          "old_text": "ngx_quic_handle_stream_ack(c, f)",
          "new_text": null,
          "old_line_content": "                ngx_quic_handle_stream_ack(c, f);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 5367,
          "old_api": "ngx_quic_free_frame",
          "new_api": null,
          "old_text": "ngx_quic_free_frame(c, f)",
          "new_text": null,
          "old_line_content": "            ngx_quic_free_frame(c, f);",
          "new_line_content": "        case NGX_QUIC_FT_MAX_DATA:",
          "content_same": false
        },
        {
          "line": 3324,
          "old_api": "ngx_queue_remove",
          "new_api": null,
          "old_text": "ngx_queue_remove(&f->queue)",
          "new_text": null,
          "old_line_content": "            ngx_queue_remove(&f->queue);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3325,
          "old_api": "ngx_quic_free_frame",
          "new_api": null,
          "old_text": "ngx_quic_free_frame(c, f)",
          "new_text": null,
          "old_line_content": "            ngx_quic_free_frame(c, f);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5372,
          "old_api": "ngx_quic_queue_frame",
          "new_api": null,
          "old_text": "ngx_quic_queue_frame(qc, f)",
          "new_text": null,
          "old_line_content": "            ngx_quic_queue_frame(qc, f);",
          "new_line_content": "        case NGX_QUIC_FT_MAX_STREAMS:",
          "content_same": false
        },
        {
          "line": 5380,
          "old_api": "ngx_quic_queue_frame",
          "new_api": null,
          "old_text": "ngx_quic_queue_frame(qc, f)",
          "new_text": null,
          "old_line_content": "            ngx_quic_queue_frame(qc, f);",
          "new_line_content": "        case NGX_QUIC_FT_MAX_STREAM_DATA:",
          "content_same": false
        },
        {
          "line": 3337,
          "old_api": "ngx_log_error",
          "new_api": null,
          "old_text": "ngx_log_error(NGX_LOG_INFO, c->log, 0,\n                      \"quic ACK for the packet not sent\")",
          "new_text": null,
          "old_line_content": "        ngx_log_error(NGX_LOG_INFO, c->log, 0,",
          "new_line_content": "        qc->error = NGX_QUIC_ERR_PROTOCOL_VIOLATION;",
          "content_same": false
        },
        {
          "line": 5387,
          "old_api": "ngx_quic_free_frame",
          "new_api": null,
          "old_text": "ngx_quic_free_frame(c, f)",
          "new_text": null,
          "old_line_content": "                ngx_quic_free_frame(c, f);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3348,
          "old_api": "ngx_post_event",
          "new_api": null,
          "old_text": "ngx_post_event(&qc->push, &ngx_posted_events)",
          "new_text": null,
          "old_line_content": "        ngx_post_event(&qc->push, &ngx_posted_events);",
          "new_line_content": "    qc->pto_count = 0;",
          "content_same": false
        },
        {
          "line": 5398,
          "old_api": "ngx_quic_queue_frame",
          "new_api": null,
          "old_text": "ngx_quic_queue_frame(qc, f)",
          "new_text": null,
          "old_line_content": "            ngx_quic_queue_frame(qc, f);",
          "new_line_content": "        case NGX_QUIC_FT_STREAM0:",
          "content_same": false
        },
        {
          "line": 5409,
          "old_api": "ngx_quic_find_stream",
          "new_api": null,
          "old_text": "ngx_quic_find_stream(&qc->streams.tree, f->u.stream.stream_id)",
          "new_text": null,
          "old_line_content": "            sn = ngx_quic_find_stream(&qc->streams.tree, f->u.stream.stream_id);",
          "new_line_content": "                /* RESET_STREAM was sent */",
          "content_same": false
        },
        {
          "line": 3364,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    qc->latest_rtt = latest_rtt;",
          "content_same": false
        },
        {
          "line": 5413,
          "old_api": "ngx_quic_free_frame",
          "new_api": null,
          "old_text": "ngx_quic_free_frame(c, f)",
          "new_text": null,
          "old_line_content": "                ngx_quic_free_frame(c, f);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3375,
          "old_api": "ngx_min",
          "new_api": null,
          "old_text": "ngx_min(qc->min_rtt, latest_rtt)",
          "new_text": null,
          "old_line_content": "        qc->min_rtt = ngx_min(qc->min_rtt, latest_rtt);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5423,
          "old_api": "ngx_queue_sentinel",
          "new_api": null,
          "old_text": "ngx_queue_sentinel(&ctx->sent)",
          "new_text": null,
          "old_line_content": "    } while (q != ngx_queue_sentinel(&ctx->sent));",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 3380,
          "old_api": "ngx_min",
          "new_api": null,
          "old_text": "ngx_min(ack_delay, qc->ctp.max_ack_delay)",
          "new_text": null,
          "old_line_content": "            ack_delay = ngx_min(ack_delay, qc->ctp.max_ack_delay);",
          "new_line_content": "        adjusted_rtt = latest_rtt;",
          "content_same": false
        },
        {
          "line": 5429,
          "old_api": "ngx_post_event",
          "new_api": null,
          "old_text": "ngx_post_event(&qc->push, &ngx_posted_events)",
          "new_text": null,
          "old_line_content": "    ngx_post_event(&qc->push, &ngx_posted_events);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3390,
          "old_api": "ngx_msec_int_t) (qc->avg_rtt - adjusted_rtt)",
          "new_api": null,
          "old_text": "ngx_msec_int_t) (qc->avg_rtt - adjusted_rtt)",
          "new_text": null,
          "old_line_content": "        rttvar_sample = ngx_abs((ngx_msec_int_t) (qc->avg_rtt - adjusted_rtt));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3394,
          "old_api": "ngx_log_debug4",
          "new_api": null,
          "old_text": "ngx_log_debug4(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic rtt sample latest:%M min:%M avg:%M var:%M\",\n                   latest_rtt, qc->min_rtt, qc->avg_rtt, qc->rttvar)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug4(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5442,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(qs->parent)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(qs->parent);",
          "new_line_content": "        if (qc->streams.server_streams_bidi",
          "content_same": false
        },
        {
          "line": 5448,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                           \"quic too many server bidi streams:%uL\",\n                           qc->streams.server_streams_bidi)",
          "new_text": null,
          "old_line_content": "            ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "            return NULL;",
          "content_same": false
        },
        {
          "line": 3406,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    duration = qc->avg_rtt;",
          "content_same": false
        },
        {
          "line": 5457,
          "old_api": "ngx_log_debug3",
          "new_api": null,
          "old_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic creating server bidi stream\"\n                       \" streams:%uL max:%uL id:0x%xL\",\n                       qc->streams.server_streams_bidi,\n                       qc->streams.server_max_streams_bidi, id)",
          "new_text": null,
          "old_line_content": "        ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "                       qc->streams.server_streams_bidi,",
          "content_same": false
        },
        {
          "line": 3411,
          "old_api": "ngx_max",
          "new_api": null,
          "old_text": "ngx_max(4 * qc->rttvar, NGX_QUIC_TIME_GRANULARITY)",
          "new_text": null,
          "old_line_content": "    duration += ngx_max(4 * qc->rttvar, NGX_QUIC_TIME_GRANULARITY);",
          "new_line_content": "    if (qc->congestion.in_flight == 0) { /* no in-flight packets */",
          "content_same": false
        },
        {
          "line": 5470,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                           \"quic too many server uni streams:%uL\",\n                           qc->streams.server_streams_uni)",
          "new_text": null,
          "old_line_content": "            ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "            return NULL;",
          "content_same": false
        },
        {
          "line": 5480,
          "old_api": "ngx_log_debug3",
          "new_api": null,
          "old_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic creating server uni stream\"\n                       \" streams:%uL max:%uL id:0x%xL\",\n                       qc->streams.server_streams_uni,\n                       qc->streams.server_max_streams_uni, id)",
          "new_text": null,
          "old_line_content": "        ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "                       qc->streams.server_streams_uni,",
          "content_same": false
        },
        {
          "line": 3434,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    if (sn == NULL) {",
          "content_same": false
        },
        {
          "line": 3436,
          "old_api": "ngx_quic_find_stream",
          "new_api": null,
          "old_text": "ngx_quic_find_stream(&qc->streams.tree, f->u.stream.stream_id)",
          "new_text": null,
          "old_line_content": "    sn = ngx_quic_find_stream(&qc->streams.tree, f->u.stream.stream_id);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5490,
          "old_api": "ngx_quic_create_stream",
          "new_api": null,
          "old_text": "ngx_quic_create_stream(qs->parent, id, rcvbuf_size)",
          "new_text": null,
          "old_line_content": "    sn = ngx_quic_create_stream(qs->parent, id, rcvbuf_size);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3447,
          "old_api": "ngx_post_event",
          "new_api": null,
          "old_text": "ngx_post_event(wev, &ngx_posted_events)",
          "new_text": null,
          "old_line_content": "        ngx_post_event(wev, &ngx_posted_events);",
          "new_line_content": "    sn->acked += f->u.stream.length;",
          "content_same": false
        },
        {
          "line": 3452,
          "old_api": "ngx_log_debug3",
          "new_api": null,
          "old_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, sn->c->log, 0,\n                   \"quic stream ack len:%uL acked:%uL unacked:%uL\",\n                   f->u.stream.length, sn->acked, sent - sn->acked)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug3(NGX_LOG_DEBUG_EVENT, sn->c->log, 0,",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3470,
          "old_api": "ngx_log_debug2",
          "new_api": null,
          "old_text": "ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic out-of-order frame: expecting:%uL got:%uL\",\n                       fs->received, f->offset)",
          "new_text": null,
          "old_line_content": "        ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3474,
          "old_api": "ngx_quic_buffer_frame",
          "new_api": null,
          "old_text": "ngx_quic_buffer_frame(c, fs, frame)",
          "new_text": null,
          "old_line_content": "        return ngx_quic_buffer_frame(c, fs, frame);",
          "new_line_content": "    if (f->offset < fs->received) {",
          "content_same": false
        },
        {
          "line": 5523,
          "old_api": "ngx_rbt_red",
          "new_api": null,
          "old_text": "ngx_rbt_red(node)",
          "new_text": null,
          "old_line_content": "    ngx_rbt_red(node);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3479,
          "old_api": "ngx_quic_adjust_frame_offset",
          "new_api": null,
          "old_text": "ngx_quic_adjust_frame_offset(c, frame, fs->received)",
          "new_text": null,
          "old_line_content": "        if (ngx_quic_adjust_frame_offset(c, frame, fs->received)",
          "new_line_content": "            /* old/duplicate data range */",
          "content_same": false
        },
        {
          "line": 3491,
          "old_api": "handler",
          "new_api": null,
          "old_text": "handler(c, frame, data)",
          "new_text": null,
          "old_line_content": "    rc = handler(c, frame, data);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3507,
          "old_api": "ngx_queue_head",
          "new_api": null,
          "old_text": "ngx_queue_head(&fs->frames)",
          "new_text": null,
          "old_line_content": "        q = ngx_queue_head(&fs->frames);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3508,
          "old_api": "ngx_queue_sentinel",
          "new_api": null,
          "old_text": "ngx_queue_sentinel(&fs->frames)",
          "new_text": null,
          "old_line_content": "        if (q == ngx_queue_sentinel(&fs->frames)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3512,
          "old_api": "ngx_queue_data",
          "new_api": null,
          "old_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "new_text": null,
          "old_line_content": "        frame = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "new_line_content": "        if (f->offset > fs->received) {",
          "content_same": false
        },
        {
          "line": 5561,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3524,
          "old_api": "ngx_quic_adjust_frame_offset",
          "new_api": null,
          "old_text": "ngx_quic_adjust_frame_offset(c, frame, fs->received)",
          "new_text": null,
          "old_line_content": "            if (ngx_quic_adjust_frame_offset(c, frame, fs->received)",
          "new_line_content": "                /* old/duplicate data range */",
          "content_same": false
        },
        {
          "line": 3534,
          "old_api": "ngx_quic_free_frame",
          "new_api": null,
          "old_text": "ngx_quic_free_frame(c, frame)",
          "new_text": null,
          "old_line_content": "                ngx_quic_free_frame(c, frame);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3543,
          "old_api": "handler",
          "new_api": null,
          "old_text": "handler(c, frame, data)",
          "new_text": null,
          "old_line_content": "        rc = handler(c, frame, data);",
          "new_line_content": "            return NGX_ERROR;",
          "content_same": false
        },
        {
          "line": 3556,
          "old_api": "ngx_queue_remove",
          "new_api": null,
          "old_text": "ngx_queue_remove(q)",
          "new_text": null,
          "old_line_content": "        ngx_queue_remove(q);",
          "new_line_content": "                      \"quic consumed buffered frame, total:%ui\", fs->total);",
          "content_same": false
        },
        {
          "line": 3561,
          "old_api": "ngx_quic_free_frame",
          "new_api": null,
          "old_text": "ngx_quic_free_frame(c, frame)",
          "new_text": null,
          "old_line_content": "        ngx_quic_free_frame(c, frame);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5628,
          "old_api": "ngx_quic_create_stream",
          "new_api": null,
          "old_text": "ngx_quic_create_stream(c, min_id, n)",
          "new_text": null,
          "old_line_content": "        sn = ngx_quic_create_stream(c, min_id, n);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3585,
          "old_api": "ngx_log_debug0",
          "new_api": null,
          "old_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic old or duplicate data in ordered frame, ignored\")",
          "new_text": null,
          "old_line_content": "        ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5636,
          "old_api": "ngx_quic_create_stream",
          "new_api": null,
          "old_text": "ngx_quic_create_stream(c, id, n)",
          "new_text": null,
          "old_line_content": "    return ngx_quic_create_stream(c, id, n);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3590,
          "old_api": "ngx_log_debug0",
          "new_api": null,
          "old_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic adjusted ordered frame data start to expected offset\")",
          "new_text": null,
          "old_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    /* intersecting range: adjust data size */",
          "content_same": false
        },
        {
          "line": 3600,
          "old_api": "ngx_buf_size",
          "new_api": null,
          "old_text": "ngx_buf_size(b)",
          "new_text": null,
          "old_line_content": "        n = ngx_buf_size(b);",
          "new_line_content": "            b->pos += tail;",
          "content_same": false
        },
        {
          "line": 5652,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    if (pool == NULL) {",
          "content_same": false
        },
        {
          "line": 5654,
          "old_api": "ngx_create_pool",
          "new_api": null,
          "old_text": "ngx_create_pool(NGX_DEFAULT_POOL_SIZE, c->log)",
          "new_text": null,
          "old_line_content": "    pool = ngx_create_pool(NGX_DEFAULT_POOL_SIZE, c->log);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5659,
          "old_api": "ngx_pcalloc",
          "new_api": null,
          "old_text": "ngx_pcalloc(pool, sizeof(ngx_quic_stream_t))",
          "new_text": null,
          "old_line_content": "    sn = ngx_pcalloc(pool, sizeof(ngx_quic_stream_t));",
          "new_line_content": "        return NULL;",
          "content_same": false
        },
        {
          "line": 5661,
          "old_api": "ngx_destroy_pool",
          "new_api": null,
          "old_text": "ngx_destroy_pool(pool)",
          "new_text": null,
          "old_line_content": "        ngx_destroy_pool(pool);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5669,
          "old_api": "ngx_create_temp_buf",
          "new_api": null,
          "old_text": "ngx_create_temp_buf(pool, rcvbuf_size)",
          "new_text": null,
          "old_line_content": "    sn->b = ngx_create_temp_buf(pool, rcvbuf_size);",
          "new_line_content": "        return NULL;",
          "content_same": false
        },
        {
          "line": 3623,
          "old_api": "ngx_log_debug0",
          "new_api": null,
          "old_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic ngx_quic_buffer_frame\")",
          "new_text": null,
          "old_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    f = &frame->u.ord;",
          "content_same": false
        },
        {
          "line": 5671,
          "old_api": "ngx_destroy_pool",
          "new_api": null,
          "old_text": "ngx_destroy_pool(pool)",
          "new_text": null,
          "old_line_content": "        ngx_destroy_pool(pool);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5675,
          "old_api": "ngx_queue_init",
          "new_api": null,
          "old_text": "ngx_queue_init(&sn->fs.frames)",
          "new_text": null,
          "old_line_content": "    ngx_queue_init(&sn->fs.frames);",
          "new_line_content": "    if (log == NULL) {",
          "content_same": false
        },
        {
          "line": 5677,
          "old_api": "ngx_palloc",
          "new_api": null,
          "old_text": "ngx_palloc(pool, sizeof(ngx_log_t))",
          "new_text": null,
          "old_line_content": "    log = ngx_palloc(pool, sizeof(ngx_log_t));",
          "new_line_content": "        return NULL;",
          "content_same": false
        },
        {
          "line": 3630,
          "old_api": "ngx_quic_alloc_frame",
          "new_api": null,
          "old_text": "ngx_quic_alloc_frame(c)",
          "new_text": null,
          "old_line_content": "    dst = ngx_quic_alloc_frame(c);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5679,
          "old_api": "ngx_destroy_pool",
          "new_api": null,
          "old_text": "ngx_destroy_pool(pool)",
          "new_text": null,
          "old_line_content": "        ngx_destroy_pool(pool);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3635,
          "old_api": "ngx_memcpy",
          "new_api": null,
          "old_text": "ngx_memcpy(dst, frame, sizeof(ngx_quic_frame_t))",
          "new_text": null,
          "old_line_content": "    ngx_memcpy(dst, frame, sizeof(ngx_quic_frame_t));",
          "new_line_content": "    if (dst->data == NGX_CHAIN_ERROR) {",
          "content_same": false
        },
        {
          "line": 3637,
          "old_api": "ngx_quic_copy_chain",
          "new_api": null,
          "old_text": "ngx_quic_copy_chain(c, frame->data, 0)",
          "new_text": null,
          "old_line_content": "    dst->data = ngx_quic_copy_chain(c, frame->data, 0);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5686,
          "old_api": "ngx_get_connection",
          "new_api": null,
          "old_text": "ngx_get_connection(-1, log)",
          "new_text": null,
          "old_line_content": "    sn->c = ngx_get_connection(-1, log);",
          "new_line_content": "        return NULL;",
          "content_same": false
        },
        {
          "line": 5688,
          "old_api": "ngx_destroy_pool",
          "new_api": null,
          "old_text": "ngx_destroy_pool(pool)",
          "new_text": null,
          "old_line_content": "        ngx_destroy_pool(pool);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3646,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                  \"quic ordered frame with unexpected offset:\"\n                  \" buffered total:%ui\", fs->total)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3650,
          "old_api": "ngx_queue_empty",
          "new_api": null,
          "old_text": "ngx_queue_empty(&fs->frames)",
          "new_text": null,
          "old_line_content": "    if (ngx_queue_empty(&fs->frames)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3651,
          "old_api": "ngx_queue_insert_after",
          "new_api": null,
          "old_text": "ngx_queue_insert_after(&fs->frames, &dst->queue)",
          "new_text": null,
          "old_line_content": "        ngx_queue_insert_after(&fs->frames, &dst->queue);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5701,
          "old_api": "ngx_atomic_fetch_add",
          "new_api": null,
          "old_text": "ngx_atomic_fetch_add(ngx_connection_counter, 1)",
          "new_text": null,
          "old_line_content": "    sn->c->number = ngx_atomic_fetch_add(ngx_connection_counter, 1);",
          "new_line_content": "    sn->c->send = ngx_quic_stream_send;",
          "content_same": false
        },
        {
          "line": 3655,
          "old_api": "ngx_queue_last",
          "new_api": null,
          "old_text": "ngx_queue_last(&fs->frames)",
          "new_text": null,
          "old_line_content": "    for (q = ngx_queue_last(&fs->frames);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 3657,
          "old_api": "ngx_queue_prev",
          "new_api": null,
          "old_text": "ngx_queue_prev(q)",
          "new_text": null,
          "old_line_content": "         q = ngx_queue_prev(q))",
          "new_line_content": "        f = &item->u.ord;",
          "content_same": false
        },
        {
          "line": 3659,
          "old_api": "ngx_queue_data",
          "new_api": null,
          "old_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "new_text": null,
          "old_line_content": "        item = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "new_line_content": "        if (f->offset < df->offset) {",
          "content_same": false
        },
        {
          "line": 3663,
          "old_api": "ngx_queue_insert_after",
          "new_api": null,
          "old_text": "ngx_queue_insert_after(q, &dst->queue)",
          "new_text": null,
          "old_line_content": "            ngx_queue_insert_after(q, &dst->queue);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3668,
          "old_api": "ngx_queue_insert_after",
          "new_api": null,
          "old_text": "ngx_queue_insert_after(&fs->frames, &dst->queue)",
          "new_text": null,
          "old_line_content": "    ngx_queue_insert_after(&fs->frames, &dst->queue);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3685,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5733,
          "old_api": "ngx_close_connection",
          "new_api": null,
          "old_text": "ngx_close_connection(sn->c)",
          "new_text": null,
          "old_line_content": "        ngx_close_connection(sn->c);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5734,
          "old_api": "ngx_destroy_pool",
          "new_api": null,
          "old_text": "ngx_destroy_pool(pool)",
          "new_text": null,
          "old_line_content": "        ngx_destroy_pool(pool);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5741,
          "old_api": "ngx_rbtree_insert",
          "new_api": null,
          "old_text": "ngx_rbtree_insert(&qc->streams.tree, &sn->node)",
          "new_text": null,
          "old_line_content": "    ngx_rbtree_insert(&qc->streams.tree, &sn->node);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3697,
          "old_api": "ngx_quic_handle_ordered_frame",
          "new_api": null,
          "old_text": "ngx_quic_handle_ordered_frame(c, fs, frame, ngx_quic_crypto_input,\n                                       NULL)",
          "new_text": null,
          "old_line_content": "    rc = ngx_quic_handle_ordered_frame(c, fs, frame, ngx_quic_crypto_input,",
          "new_line_content": "        return rc;",
          "content_same": false
        },
        {
          "line": 3711,
          "old_api": "ngx_quic_get_send_ctx",
          "new_api": null,
          "old_text": "ngx_quic_get_send_ctx(qc, ssl_encryption_handshake)",
          "new_text": null,
          "old_line_content": "            ctx = ngx_quic_get_send_ctx(qc, ssl_encryption_handshake);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 3712,
          "old_api": "ngx_queue_empty",
          "new_api": null,
          "old_text": "ngx_queue_empty(&ctx->sent)",
          "new_text": null,
          "old_line_content": "            while (!ngx_queue_empty(&ctx->sent)) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3713,
          "old_api": "ngx_quic_resend_frames",
          "new_api": null,
          "old_text": "ngx_quic_resend_frames(c, ctx)",
          "new_text": null,
          "old_line_content": "                ngx_quic_resend_frames(c, ctx);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5761,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(pc)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(pc);",
          "new_line_content": "    if (rev->error) {",
          "content_same": false
        },
        {
          "line": 5768,
          "old_api": "ngx_log_debug3",
          "new_api": null,
          "old_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic stream recv id:0x%xL eof:%d avail:%z\",\n                   qs->id, rev->pending_eof, b->last - b->pos)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3731,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5780,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic stream id:0x%xL recv() not ready\", qs->id)",
          "new_text": null,
          "old_line_content": "        ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3737,
          "old_api": "SSL_quic_read_level",
          "new_api": null,
          "old_text": "SSL_quic_read_level(ssl_conn)",
          "new_text": null,
          "old_line_content": "                   (int) SSL_quic_read_level(ssl_conn),",
          "new_line_content": "    for (cl = frame->data; cl; cl = cl->next) {",
          "content_same": false
        },
        {
          "line": 3738,
          "old_api": "SSL_quic_write_level",
          "new_api": null,
          "old_text": "SSL_quic_write_level(ssl_conn)",
          "new_text": null,
          "old_line_content": "                   (int) SSL_quic_write_level(ssl_conn));",
          "new_line_content": "        b = cl->buf;",
          "content_same": false
        },
        {
          "line": 5785,
          "old_api": "ngx_min",
          "new_api": null,
          "old_text": "ngx_min(b->last - b->pos, (ssize_t) size)",
          "new_text": null,
          "old_line_content": "    len = ngx_min(b->last - b->pos, (ssize_t) size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5787,
          "old_api": "ngx_memcpy",
          "new_api": null,
          "old_text": "ngx_memcpy(buf, b->pos, len)",
          "new_text": null,
          "old_line_content": "    ngx_memcpy(buf, b->pos, len);",
          "new_line_content": "    qc->streams.received += len;",
          "content_same": false
        },
        {
          "line": 3746,
          "old_api": "ngx_ssl_error",
          "new_api": null,
          "old_text": "ngx_ssl_error(NGX_LOG_INFO, c->log, 0,\n                          \"SSL_provide_quic_data() failed\")",
          "new_text": null,
          "old_line_content": "            ngx_ssl_error(NGX_LOG_INFO, c->log, 0,",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5798,
          "old_api": "ngx_log_debug3",
          "new_api": null,
          "old_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic stream id:0x%xL recv len:%z of size:%uz\",\n                   qs->id, len, size)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug3(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3752,
          "old_api": "SSL_do_handshake",
          "new_api": null,
          "old_text": "SSL_do_handshake(ssl_conn)",
          "new_text": null,
          "old_line_content": "    n = SSL_do_handshake(ssl_conn);",
          "new_line_content": "                   \"quic SSL_quic_read_level:%d SSL_quic_write_level:%d\",",
          "content_same": false
        },
        {
          "line": 5803,
          "old_api": "ngx_quic_alloc_frame",
          "new_api": null,
          "old_text": "ngx_quic_alloc_frame(pc)",
          "new_text": null,
          "old_line_content": "        frame = ngx_quic_alloc_frame(pc);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3757,
          "old_api": "SSL_quic_write_level",
          "new_api": null,
          "old_text": "SSL_quic_write_level(ssl_conn)",
          "new_text": null,
          "old_line_content": "                   (int) SSL_quic_write_level(ssl_conn));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3762,
          "old_api": "SSL_get_error",
          "new_api": null,
          "old_text": "SSL_get_error(ssl_conn, n)",
          "new_text": null,
          "old_line_content": "        sslerr = SSL_get_error(ssl_conn, n);",
          "new_line_content": "                       sslerr);",
          "content_same": false
        },
        {
          "line": 3764,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0, \"SSL_get_error: %d\",\n                       sslerr)",
          "new_text": null,
          "old_line_content": "        ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0, \"SSL_get_error: %d\",",
          "new_line_content": "        if (sslerr != SSL_ERROR_WANT_READ) {",
          "content_same": false
        },
        {
          "line": 5814,
          "old_api": "ngx_quic_queue_frame",
          "new_api": null,
          "old_text": "ngx_quic_queue_frame(qc, frame)",
          "new_text": null,
          "old_line_content": "        ngx_quic_queue_frame(qc, frame);",
          "new_line_content": "    if ((qc->streams.recv_max_data / 2) < qc->streams.received) {",
          "content_same": false
        },
        {
          "line": 3768,
          "old_api": "ngx_ssl_error",
          "new_api": null,
          "old_text": "ngx_ssl_error(NGX_LOG_ERR, c->log, 0, \"SSL_do_handshake() failed\")",
          "new_text": null,
          "old_line_content": "            ngx_ssl_error(NGX_LOG_ERR, c->log, 0, \"SSL_do_handshake() failed\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5819,
          "old_api": "ngx_quic_alloc_frame",
          "new_api": null,
          "old_text": "ngx_quic_alloc_frame(pc)",
          "new_text": null,
          "old_line_content": "        frame = ngx_quic_alloc_frame(pc);",
          "new_line_content": "            return NGX_ERROR;",
          "content_same": false
        },
        {
          "line": 3775,
          "old_api": "SSL_in_init",
          "new_api": null,
          "old_text": "SSL_in_init(ssl_conn)",
          "new_text": null,
          "old_line_content": "    if (SSL_in_init(ssl_conn)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3780,
          "old_api": "SSL_get_cipher",
          "new_api": null,
          "old_text": "SSL_get_cipher(ssl_conn)",
          "new_text": null,
          "old_line_content": "                   \"quic ssl cipher:%s\", SSL_get_cipher(ssl_conn));",
          "new_line_content": "                   \"quic handshake completed successfully\");",
          "content_same": false
        },
        {
          "line": 3782,
          "old_api": "ngx_log_debug0",
          "new_api": null,
          "old_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic handshake completed successfully\")",
          "new_text": null,
          "old_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    c->ssl->handshaked = 1;",
          "content_same": false
        },
        {
          "line": 5831,
          "old_api": "ngx_quic_queue_frame",
          "new_api": null,
          "old_text": "ngx_quic_queue_frame(qc, frame)",
          "new_text": null,
          "old_line_content": "        ngx_quic_queue_frame(qc, frame);",
          "new_line_content": "                       \"quic stream id:0x%xL recv: increased max_data:%uL\",",
          "content_same": false
        },
        {
          "line": 5833,
          "old_api": "ngx_log_debug2",
          "new_api": null,
          "old_text": "ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic stream id:0x%xL recv: increased max_data:%uL\",\n                       qs->id, qc->streams.recv_max_data)",
          "new_text": null,
          "old_line_content": "        ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3787,
          "old_api": "ngx_quic_alloc_frame",
          "new_api": null,
          "old_text": "ngx_quic_alloc_frame(c)",
          "new_text": null,
          "old_line_content": "    frame = ngx_quic_alloc_frame(c);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3795,
          "old_api": "ngx_quic_queue_frame",
          "new_api": null,
          "old_text": "ngx_quic_queue_frame(qc, frame)",
          "new_text": null,
          "old_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "new_line_content": "        return NGX_ERROR;",
          "content_same": false
        },
        {
          "line": 3797,
          "old_api": "ngx_quic_send_new_token",
          "new_api": null,
          "old_text": "ngx_quic_send_new_token(c)",
          "new_text": null,
          "old_line_content": "    if (ngx_quic_send_new_token(c) != NGX_OK) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5848,
          "old_api": "ngx_memzero",
          "new_api": null,
          "old_text": "ngx_memzero(&b, sizeof(ngx_buf_t))",
          "new_text": null,
          "old_line_content": "    ngx_memzero(&b, sizeof(ngx_buf_t));",
          "new_line_content": "    b.pos = buf;",
          "content_same": false
        },
        {
          "line": 3806,
          "old_api": "ngx_quic_keys_update",
          "new_api": null,
          "old_text": "ngx_quic_keys_update(c, qc->keys)",
          "new_text": null,
          "old_line_content": "    if (ngx_quic_keys_update(c, qc->keys) != NGX_OK) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5857,
          "old_api": "ngx_quic_stream_send_chain",
          "new_api": null,
          "old_text": "ngx_quic_stream_send_chain(c, &cl, 0)",
          "new_text": null,
          "old_line_content": "    if (ngx_quic_stream_send_chain(c, &cl, 0) == NGX_CHAIN_ERROR) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3814,
          "old_api": "ngx_quic_discard_ctx",
          "new_api": null,
          "old_text": "ngx_quic_discard_ctx(c, ssl_encryption_handshake)",
          "new_text": null,
          "old_line_content": "    ngx_quic_discard_ctx(c, ssl_encryption_handshake);",
          "new_line_content": "        return NGX_ERROR;",
          "content_same": false
        },
        {
          "line": 3816,
          "old_api": "ngx_quic_issue_server_ids",
          "new_api": null,
          "old_text": "ngx_quic_issue_server_ids(c)",
          "new_text": null,
          "old_line_content": "    if (ngx_quic_issue_server_ids(c) != NGX_OK) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5882,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(pc)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(pc);",
          "new_line_content": "    if (wev->error) {",
          "content_same": false
        },
        {
          "line": 3838,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    if ((f->stream_id & NGX_QUIC_STREAM_UNIDIRECTIONAL)",
          "content_same": false
        },
        {
          "line": 5889,
          "old_api": "ngx_quic_max_stream_flow",
          "new_api": null,
          "old_text": "ngx_quic_max_stream_flow(c)",
          "new_text": null,
          "old_line_content": "    flow = ngx_quic_max_stream_flow(c);",
          "new_line_content": "        return in;",
          "content_same": false
        },
        {
          "line": 5897,
          "old_api": "ngx_quic_alloc_frame",
          "new_api": null,
          "old_text": "ngx_quic_alloc_frame(pc)",
          "new_text": null,
          "old_line_content": "    frame = ngx_quic_alloc_frame(pc);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3854,
          "old_api": "ngx_quic_create_client_stream",
          "new_api": null,
          "old_text": "ngx_quic_create_client_stream(c, f->stream_id)",
          "new_text": null,
          "old_line_content": "        sn = ngx_quic_create_client_stream(c, f->stream_id);",
          "new_line_content": "            return NGX_ERROR;",
          "content_same": false
        },
        {
          "line": 5902,
          "old_api": "ngx_quic_copy_chain",
          "new_api": null,
          "old_text": "ngx_quic_copy_chain(pc, in, n)",
          "new_text": null,
          "old_line_content": "    frame->data = ngx_quic_copy_chain(pc, in, n);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5911,
          "old_api": "ngx_buf_size",
          "new_api": null,
          "old_text": "ngx_buf_size(in->buf)",
          "new_text": null,
          "old_line_content": "    while (in && ngx_buf_size(in->buf) == 0) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3874,
          "old_api": "ngx_quic_handle_ordered_frame",
          "new_api": null,
          "old_text": "ngx_quic_handle_ordered_frame(c, fs, frame, ngx_quic_stream_input,\n                                          sn)",
          "new_text": null,
          "old_line_content": "        if (ngx_quic_handle_ordered_frame(c, fs, frame, ngx_quic_stream_input,",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 3881,
          "old_api": "handler",
          "new_api": null,
          "old_text": "sc->listening->handler(sc)",
          "new_text": null,
          "old_line_content": "        sc->listening->handler(sc);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5929,
          "old_api": "ngx_quic_queue_frame",
          "new_api": null,
          "old_text": "ngx_quic_queue_frame(qc, frame)",
          "new_text": null,
          "old_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5933,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic send_chain sent:%uz\", n)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    return in;",
          "content_same": false
        },
        {
          "line": 3895,
          "old_api": "ngx_quic_handle_ordered_frame",
          "new_api": null,
          "old_text": "ngx_quic_handle_ordered_frame(c, fs, frame, ngx_quic_stream_input,\n                                         sn)",
          "new_text": null,
          "old_line_content": "    return ngx_quic_handle_ordered_frame(c, fs, frame, ngx_quic_stream_input,",
          "new_line_content": "cleanup:",
          "content_same": false
        },
        {
          "line": 5949,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(qs->parent)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(qs->parent);",
          "new_line_content": "    sent = c->sent;",
          "content_same": false
        },
        {
          "line": 3902,
          "old_api": "ngx_close_connection",
          "new_api": null,
          "old_text": "ngx_close_connection(sc)",
          "new_text": null,
          "old_line_content": "    ngx_close_connection(sc);",
          "new_line_content": "    return NGX_ERROR;",
          "content_same": false
        },
        {
          "line": 3903,
          "old_api": "ngx_destroy_pool",
          "new_api": null,
          "old_text": "ngx_destroy_pool(pool)",
          "new_text": null,
          "old_line_content": "    ngx_destroy_pool(pool);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5960,
          "old_api": "ngx_log_debug0",
          "new_api": null,
          "old_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic send flow hit buffer size\")",
          "new_text": null,
          "old_line_content": "        ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3920,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    f = &frame->u.stream;",
          "content_same": false
        },
        {
          "line": 5970,
          "old_api": "ngx_log_debug0",
          "new_api": null,
          "old_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic send flow hit MAX_DATA\")",
          "new_text": null,
          "old_line_content": "        ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3929,
          "old_api": "ngx_log_error",
          "new_api": null,
          "old_text": "ngx_log_error(NGX_LOG_INFO, c->log, 0,\n                      \"quic no space in stream buffer\")",
          "new_text": null,
          "old_line_content": "        ngx_log_error(NGX_LOG_INFO, c->log, 0,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5980,
          "old_api": "ngx_log_debug0",
          "new_api": null,
          "old_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic send flow hit MAX_STREAM_DATA\")",
          "new_text": null,
          "old_line_content": "        ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3935,
          "old_api": "ngx_movemem",
          "new_api": null,
          "old_text": "ngx_movemem(b->start, b->pos, b->last - b->pos)",
          "new_text": null,
          "old_line_content": "        b->last = ngx_movemem(b->start, b->pos, b->last - b->pos);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3940,
          "old_api": "ngx_cpymem",
          "new_api": null,
          "old_text": "ngx_cpymem(b->last, cl->buf->pos,\n                             cl->buf->last - cl->buf->pos)",
          "new_text": null,
          "old_line_content": "        b->last = ngx_cpymem(b->last, cl->buf->pos,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5989,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic send flow:%uz\", size)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    return size;",
          "content_same": false
        },
        {
          "line": 3952,
          "old_api": "handler",
          "new_api": null,
          "old_text": "rev->handler(rev)",
          "new_text": null,
          "old_line_content": "        rev->handler(rev);",
          "new_line_content": "    /* check if stream was destroyed by handler */",
          "content_same": false
        },
        {
          "line": 3956,
          "old_api": "ngx_quic_find_stream",
          "new_api": null,
          "old_text": "ngx_quic_find_stream(&qc->streams.tree, id)",
          "new_text": null,
          "old_line_content": "    if (ngx_quic_find_stream(&qc->streams.tree, id) == NULL) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6008,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(pc)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(pc);",
          "new_line_content": "                   \"quic stream id:0x%xL cleanup\", qs->id);",
          "content_same": false
        },
        {
          "line": 6013,
          "old_api": "ngx_rbtree_delete",
          "new_api": null,
          "old_text": "ngx_rbtree_delete(&qc->streams.tree, &qs->node)",
          "new_text": null,
          "old_line_content": "    ngx_rbtree_delete(&qc->streams.tree, &qs->node);",
          "new_line_content": "    if (qc->closing) {",
          "content_same": false
        },
        {
          "line": 6014,
          "old_api": "ngx_quic_free_frames",
          "new_api": null,
          "old_text": "ngx_quic_free_frames(pc, &qs->fs.frames)",
          "new_text": null,
          "old_line_content": "    ngx_quic_free_frames(pc, &qs->fs.frames);",
          "new_line_content": "        /* schedule handler call to continue ngx_quic_close_connection() */",
          "content_same": false
        },
        {
          "line": 6018,
          "old_api": "ngx_post_event",
          "new_api": null,
          "old_text": "ngx_post_event(pc->read, &ngx_posted_events)",
          "new_text": null,
          "old_line_content": "        ngx_post_event(pc->read, &ngx_posted_events);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3974,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    if (f->max_data <= qc->streams.send_max_data) {",
          "content_same": false
        },
        {
          "line": 6026,
          "old_api": "ngx_quic_alloc_frame",
          "new_api": null,
          "old_text": "ngx_quic_alloc_frame(pc)",
          "new_text": null,
          "old_line_content": "            frame = ngx_quic_alloc_frame(pc);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 3983,
          "old_api": "ngx_rbtree_min",
          "new_api": null,
          "old_text": "ngx_rbtree_min(tree->root, tree->sentinel)",
          "new_text": null,
          "old_line_content": "        for (node = ngx_rbtree_min(tree->root, tree->sentinel);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 3985,
          "old_api": "ngx_rbtree_next",
          "new_api": null,
          "old_text": "ngx_rbtree_next(tree, node)",
          "new_text": null,
          "old_line_content": "             node = ngx_rbtree_next(tree, node))",
          "new_line_content": "            wev = qs->c->write;",
          "content_same": false
        },
        {
          "line": 6036,
          "old_api": "ngx_quic_queue_frame",
          "new_api": null,
          "old_text": "ngx_quic_queue_frame(qc, frame)",
          "new_text": null,
          "old_line_content": "            ngx_quic_queue_frame(qc, frame);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3992,
          "old_api": "ngx_post_event",
          "new_api": null,
          "old_text": "ngx_post_event(wev, &ngx_posted_events)",
          "new_text": null,
          "old_line_content": "                ngx_post_event(wev, &ngx_posted_events);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6041,
          "old_api": "ngx_quic_alloc_frame",
          "new_api": null,
          "old_text": "ngx_quic_alloc_frame(pc)",
          "new_text": null,
          "old_line_content": "        frame = ngx_quic_alloc_frame(pc);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6058,
          "old_api": "ngx_quic_queue_frame",
          "new_api": null,
          "old_text": "ngx_quic_queue_frame(qc, frame)",
          "new_text": null,
          "old_line_content": "        ngx_quic_queue_frame(qc, frame);",
          "new_line_content": "            /* do not send fin for client unidirectional streams */",
          "content_same": false
        },
        {
          "line": 4021,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "        && (f->id & NGX_QUIC_STREAM_SERVER_INITIATED))",
          "content_same": false
        },
        {
          "line": 6069,
          "old_api": "ngx_quic_alloc_frame",
          "new_api": null,
          "old_text": "ngx_quic_alloc_frame(pc)",
          "new_text": null,
          "old_line_content": "    frame = ngx_quic_alloc_frame(pc);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4033,
          "old_api": "ngx_quic_create_client_stream",
          "new_api": null,
          "old_text": "ngx_quic_create_client_stream(c, f->id)",
          "new_text": null,
          "old_line_content": "        sn = ngx_quic_create_client_stream(c, f->id);",
          "new_line_content": "            return NGX_ERROR;",
          "content_same": false
        },
        {
          "line": 6085,
          "old_api": "ngx_quic_queue_frame",
          "new_api": null,
          "old_text": "ngx_quic_queue_frame(qc, frame)",
          "new_text": null,
          "old_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6087,
          "old_api": "ngx_quic_output",
          "new_api": null,
          "old_text": "ngx_quic_output(pc)",
          "new_text": null,
          "old_line_content": "    (void) ngx_quic_output(pc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4046,
          "old_api": "handler",
          "new_api": null,
          "old_text": "sn->c->listening->handler(sn->c)",
          "new_text": null,
          "old_line_content": "        sn->c->listening->handler(sn->c);",
          "new_line_content": "        b = sn->b;",
          "content_same": false
        },
        {
          "line": 6098,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4053,
          "old_api": "ngx_quic_alloc_frame",
          "new_api": null,
          "old_text": "ngx_quic_alloc_frame(c)",
          "new_text": null,
          "old_line_content": "    frame = ngx_quic_alloc_frame(c);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6103,
          "old_api": "ngx_queue_data",
          "new_api": null,
          "old_text": "ngx_queue_data(q, ngx_quic_frame_t, queue)",
          "new_text": null,
          "old_line_content": "        frame = ngx_queue_data(q, ngx_quic_frame_t, queue);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6108,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic reuse frame n:%ui\", qc->nframes)",
          "new_text": null,
          "old_line_content": "        ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4063,
          "old_api": "ngx_quic_queue_frame",
          "new_api": null,
          "old_text": "ngx_quic_queue_frame(qc, frame)",
          "new_text": null,
          "old_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6113,
          "old_api": "ngx_pcalloc",
          "new_api": null,
          "old_text": "ngx_pcalloc(c->pool, sizeof(ngx_quic_frame_t))",
          "new_text": null,
          "old_line_content": "        frame = ngx_pcalloc(c->pool, sizeof(ngx_quic_frame_t));",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6121,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic alloc frame n:%ui\", qc->nframes)",
          "new_text": null,
          "old_line_content": "        ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4078,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "        && (f->id & NGX_QUIC_STREAM_SERVER_INITIATED) == 0)",
          "content_same": false
        },
        {
          "line": 6126,
          "old_api": "ngx_memzero",
          "new_api": null,
          "old_text": "ngx_memzero(frame, sizeof(ngx_quic_frame_t))",
          "new_text": null,
          "old_line_content": "    ngx_memzero(frame, sizeof(ngx_quic_frame_t));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4090,
          "old_api": "ngx_quic_create_client_stream",
          "new_api": null,
          "old_text": "ngx_quic_create_client_stream(c, f->id)",
          "new_text": null,
          "old_line_content": "        sn = ngx_quic_create_client_stream(c, f->id);",
          "new_line_content": "            return NGX_ERROR;",
          "content_same": false
        },
        {
          "line": 6143,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    cg->in_flight -= f->plen;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 66,
      "total_additions": 355,
      "total_deletions": 355,
      "total_api_changes": 776
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 5,
        "api_related_lines": 776,
        "non_api_lines": 3,
        "non_api_line_numbers": [
          3319,
          3317,
          3279
        ]
      }
    },
    "api_calls_before": 819,
    "api_calls_after": 819,
    "diff_info": {
      "added_lines": 1,
      "removed_lines": 4,
      "total_diff_lines": 32
    }
  }
}
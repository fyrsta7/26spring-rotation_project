{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/nginx/modified_file/c1363247216bc5ac2862fa501d3f741ce7696422",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/nginx/modified_file/c1363247216bc5ac2862fa501d3f741ce7696422/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/nginx/modified_file/c1363247216bc5ac2862fa501d3f741ce7696422/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/nginx/modified_file/c1363247216bc5ac2862fa501d3f741ce7696422/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 517,
          "old_api": "ngx_quic_queue_frame",
          "new_api": "ngx_quic_alloc_frame",
          "old_text": "ngx_quic_queue_frame(qc, frame)",
          "new_text": "ngx_quic_alloc_frame(c)",
          "old_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "new_line_content": "    frame = ngx_quic_alloc_frame(c);",
          "content_same": false
        },
        {
          "line": 555,
          "old_api": "handler",
          "new_api": "ngx_log_debug0",
          "old_text": "c->listening->handler(c)",
          "new_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0, \"quic init stream\")",
          "old_line_content": "    c->listening->handler(c);",
          "new_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0, \"quic init stream\");",
          "content_same": false
        },
        {
          "line": 582,
          "old_api": "ngx_quic_do_init_streams",
          "new_api": "ngx_ssl_ocsp_validate",
          "old_text": "ngx_quic_do_init_streams(c)",
          "new_text": "ngx_ssl_ocsp_validate(c)",
          "old_line_content": "    return ngx_quic_do_init_streams(c);",
          "new_line_content": "    rc = ngx_ssl_ocsp_validate(c);",
          "content_same": false
        },
        {
          "line": 613,
          "old_api": "ngx_queue_sentinel",
          "new_api": "ngx_log_debug0",
          "old_text": "ngx_queue_sentinel(&qc->streams.uninitialized)",
          "new_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0, \"quic init streams\")",
          "old_line_content": "         q != ngx_queue_sentinel(&qc->streams.uninitialized);",
          "new_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0, \"quic init streams\");",
          "content_same": false
        },
        {
          "line": 654,
          "old_api": "ngx_palloc",
          "new_api": "ngx_queue_empty",
          "old_text": "ngx_palloc(c->pool, sizeof(ngx_quic_stream_t))",
          "new_text": "ngx_queue_empty(&qc->streams.free)",
          "old_line_content": "        qs = ngx_palloc(c->pool, sizeof(ngx_quic_stream_t));",
          "new_line_content": "    if (!ngx_queue_empty(&qc->streams.free)) {",
          "content_same": false
        },
        {
          "line": 685,
          "old_api": "ngx_reusable_connection",
          "new_api": "ngx_palloc",
          "old_text": "ngx_reusable_connection(c, 0)",
          "new_text": "ngx_palloc(pool, sizeof(ngx_log_t))",
          "old_line_content": "    ngx_reusable_connection(c, 0);",
          "new_line_content": "    log = ngx_palloc(pool, sizeof(ngx_log_t));",
          "content_same": false
        },
        {
          "line": 687,
          "old_api": "ngx_get_connection",
          "new_api": "ngx_destroy_pool",
          "old_text": "ngx_get_connection(c->fd, log)",
          "new_text": "ngx_destroy_pool(pool)",
          "old_line_content": "    sc = ngx_get_connection(c->fd, log);",
          "new_line_content": "        ngx_destroy_pool(pool);",
          "content_same": false
        },
        {
          "line": 1063,
          "old_api": "ngx_quic_close_connection",
          "new_api": "ngx_log_debug1",
          "old_text": "ngx_quic_close_connection(c, NGX_ERROR)",
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, qs->parent->log, 0,\n                   \"quic stream id:0x%xL cleanup\", qs->id)",
          "old_line_content": "        ngx_quic_close_connection(c, NGX_ERROR);",
          "new_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, qs->parent->log, 0,",
          "content_same": false
        },
        {
          "line": 1104,
          "old_api": "ngx_post_event",
          "new_api": "ngx_log_debug1",
          "old_text": "ngx_post_event(&qc->close, &ngx_posted_events)",
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, pc->log, 0,\n                   \"quic stream id:0x%xL close\", qs->id)",
          "old_line_content": "        ngx_post_event(&qc->close, &ngx_posted_events);",
          "new_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, pc->log, 0,",
          "content_same": false
        },
        {
          "line": 1108,
          "old_api": "ngx_quic_can_shutdown",
          "new_api": "ngx_quic_free_buffer",
          "old_text": "ngx_quic_can_shutdown(pc)",
          "new_text": "ngx_quic_free_buffer(pc, &qs->recv)",
          "old_line_content": "    if (!pc->reusable && ngx_quic_can_shutdown(pc) == NGX_OK) {",
          "new_line_content": "    ngx_quic_free_buffer(pc, &qs->recv);",
          "content_same": false
        },
        {
          "line": 1326,
          "old_api": "ngx_quic_get_connection",
          "new_api": "ngx_quic_update_max_data",
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": "ngx_quic_update_max_data(c)",
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    return ngx_quic_update_max_data(c);",
          "content_same": false
        },
        {
          "line": 1356,
          "old_api": "ngx_quic_get_connection",
          "new_api": "ngx_quic_update_max_stream_data",
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": "ngx_quic_update_max_stream_data(qs)",
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    return ngx_quic_update_max_stream_data(qs);",
          "content_same": false
        },
        {
          "line": 1455,
          "old_api": "ngx_quic_set_event",
          "new_api": "ngx_quic_update_flow",
          "old_text": "ngx_quic_set_event(rev)",
          "new_text": "ngx_quic_update_flow(qs, qs->recv_final_size)",
          "old_line_content": "    ngx_quic_set_event(rev);",
          "new_line_content": "    if (ngx_quic_update_flow(qs, qs->recv_final_size) != NGX_OK) {",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 514,
          "old_api": null,
          "new_api": "ngx_log_debug2",
          "old_text": null,
          "new_text": "ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic stream id:0x%xL reject err:0x%xL\", id, code)",
          "old_line_content": "    frame->u.reset_stream.error_code = code;",
          "new_line_content": "    ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 1548,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "        qs->send_state = NGX_QUIC_STREAM_SEND_RESET_RECVD;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 1037,
          "old_api": null,
          "new_api": "ngx_quic_queue_frame",
          "old_text": null,
          "new_text": "ngx_quic_queue_frame(qc, frame)",
          "old_line_content": "    }",
          "new_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "content_same": false
        },
        {
          "line": 1020,
          "old_api": null,
          "new_api": "ngx_quic_alloc_frame",
          "old_text": null,
          "new_text": "ngx_quic_alloc_frame(pc)",
          "old_line_content": "    frame->u.stream.fin = last;",
          "new_line_content": "    frame = ngx_quic_alloc_frame(pc);",
          "content_same": false
        },
        {
          "line": 528,
          "old_api": null,
          "new_api": "ngx_quic_queue_frame",
          "old_text": null,
          "new_text": "ngx_quic_queue_frame(qc, frame)",
          "old_line_content": "",
          "new_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "content_same": false
        },
        {
          "line": 530,
          "old_api": null,
          "new_api": "ngx_quic_alloc_frame",
          "old_text": null,
          "new_text": "ngx_quic_alloc_frame(c)",
          "old_line_content": "",
          "new_line_content": "    frame = ngx_quic_alloc_frame(c);",
          "content_same": false
        },
        {
          "line": 1042,
          "old_api": null,
          "new_api": "ngx_log_debug3",
          "old_text": null,
          "new_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, pc->log, 0,\n                   \"quic stream id:0x%xL flush len:%O last:%ui\",\n                   qs->id, len, last)",
          "old_line_content": "",
          "new_line_content": "    ngx_log_debug3(NGX_LOG_DEBUG_EVENT, pc->log, 0,",
          "content_same": false
        },
        {
          "line": 1554,
          "old_api": null,
          "new_api": "ngx_quic_find_stream",
          "old_text": null,
          "new_text": "ngx_quic_find_stream(&qc->streams.tree, f->u.reset_stream.id)",
          "old_line_content": "        break;",
          "new_line_content": "        qs = ngx_quic_find_stream(&qc->streams.tree, f->u.reset_stream.id);",
          "content_same": false
        },
        {
          "line": 1047,
          "old_api": null,
          "new_api": "ngx_quic_close_stream",
          "old_text": null,
          "new_text": "ngx_quic_close_stream(qs)",
          "old_line_content": "",
          "new_line_content": "        return ngx_quic_close_stream(qs);",
          "content_same": false
        },
        {
          "line": 1561,
          "old_api": null,
          "new_api": "ngx_log_debug2",
          "old_text": null,
          "new_text": "ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic stream id:0x%xL ack reset final_size:%uL\",\n                       qs->id, f->u.reset_stream.final_size)",
          "old_line_content": "        }",
          "new_line_content": "        ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 540,
          "old_api": null,
          "new_api": "ngx_quic_queue_frame",
          "old_text": null,
          "new_text": "ngx_quic_queue_frame(qc, frame)",
          "old_line_content": "",
          "new_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "content_same": false
        },
        {
          "line": 1569,
          "old_api": null,
          "new_api": "ngx_quic_find_stream",
          "old_text": null,
          "new_text": "ngx_quic_find_stream(&qc->streams.tree, f->u.stream.stream_id)",
          "old_line_content": "",
          "new_line_content": "        qs = ngx_quic_find_stream(&qc->streams.tree, f->u.stream.stream_id);",
          "content_same": false
        },
        {
          "line": 1066,
          "old_api": null,
          "new_api": "ngx_quic_shutdown_stream",
          "old_text": null,
          "new_text": "ngx_quic_shutdown_stream(c, NGX_RDWR_SHUTDOWN)",
          "old_line_content": "}",
          "new_line_content": "    if (ngx_quic_shutdown_stream(c, NGX_RDWR_SHUTDOWN) != NGX_OK) {",
          "content_same": false
        },
        {
          "line": 1067,
          "old_api": null,
          "new_api": "ngx_quic_close_connection",
          "old_text": null,
          "new_text": "ngx_quic_close_connection(c, NGX_ERROR)",
          "old_line_content": "",
          "new_line_content": "        ngx_quic_close_connection(c, NGX_ERROR);",
          "content_same": false
        },
        {
          "line": 1073,
          "old_api": null,
          "new_api": "ngx_quic_close_stream",
          "old_text": null,
          "new_text": "ngx_quic_close_stream(qs)",
          "old_line_content": "    ngx_quic_frame_t       *frame;",
          "new_line_content": "    if (ngx_quic_close_stream(qs) != NGX_OK) {",
          "content_same": false
        },
        {
          "line": 1074,
          "old_api": null,
          "new_api": "ngx_quic_close_connection",
          "old_text": null,
          "new_text": "ngx_quic_close_connection(c, NGX_ERROR)",
          "old_line_content": "    ngx_quic_connection_t  *qc;",
          "new_line_content": "        ngx_quic_close_connection(c, NGX_ERROR);",
          "content_same": false
        },
        {
          "line": 1587,
          "old_api": null,
          "new_api": "ngx_log_debug4",
          "old_text": null,
          "new_text": "ngx_log_debug4(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic stream id:0x%xL ack len:%uL fin:%d unacked:%uL\",\n                       qs->id, f->u.stream.length, f->u.stream.fin,\n                       qs->sent - qs->acked)",
          "old_line_content": "",
          "new_line_content": "        ngx_log_debug4(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 564,
          "old_api": null,
          "new_api": "ngx_queue_remove",
          "old_text": null,
          "new_text": "ngx_queue_remove(&qs->queue)",
          "old_line_content": "",
          "new_line_content": "    ngx_queue_remove(&qs->queue);",
          "content_same": false
        },
        {
          "line": 566,
          "old_api": null,
          "new_api": "handler",
          "old_text": null,
          "new_text": "c->listening->handler(c)",
          "old_line_content": "",
          "new_line_content": "    c->listening->handler(c);",
          "content_same": false
        },
        {
          "line": 1596,
          "old_api": null,
          "new_api": "ngx_quic_set_event",
          "old_text": null,
          "new_text": "ngx_quic_set_event(qs->connection->write)",
          "old_line_content": "    }",
          "new_line_content": "            ngx_quic_set_event(qs->connection->write);",
          "content_same": false
        },
        {
          "line": 576,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 1088,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(pc)",
          "old_line_content": "        {",
          "new_line_content": "    qc = ngx_quic_get_connection(pc);",
          "content_same": false
        },
        {
          "line": 1606,
          "old_api": null,
          "new_api": "ngx_quic_close_stream",
          "old_text": null,
          "new_text": "ngx_quic_close_stream(qs)",
          "old_line_content": "",
          "new_line_content": "        ngx_quic_close_stream(qs);",
          "content_same": false
        },
        {
          "line": 593,
          "old_api": null,
          "new_api": "ngx_quic_do_init_streams",
          "old_text": null,
          "new_text": "ngx_quic_do_init_streams(c)",
          "old_line_content": "",
          "new_line_content": "    return ngx_quic_do_init_streams(c);",
          "content_same": false
        },
        {
          "line": 1107,
          "old_api": null,
          "new_api": "ngx_quic_free_buffer",
          "old_text": null,
          "new_text": "ngx_quic_free_buffer(pc, &qs->send)",
          "old_line_content": "",
          "new_line_content": "    ngx_quic_free_buffer(pc, &qs->send);",
          "content_same": false
        },
        {
          "line": 1619,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(pc)",
          "old_line_content": "                   qc->streams.recv_max_data);",
          "new_line_content": "    qc = ngx_quic_get_connection(pc);",
          "content_same": false
        },
        {
          "line": 1110,
          "old_api": null,
          "new_api": "ngx_rbtree_delete",
          "old_text": null,
          "new_text": "ngx_rbtree_delete(&qc->streams.tree, &qs->node)",
          "old_line_content": "    }",
          "new_line_content": "    ngx_rbtree_delete(&qc->streams.tree, &qs->node);",
          "content_same": false
        },
        {
          "line": 1111,
          "old_api": null,
          "new_api": "ngx_queue_insert_tail",
          "old_text": null,
          "new_text": "ngx_queue_insert_tail(&qc->streams.free, &qs->queue)",
          "old_line_content": "",
          "new_line_content": "    ngx_queue_insert_tail(&qc->streams.free, &qs->queue);",
          "content_same": false
        },
        {
          "line": 600,
          "old_api": null,
          "new_api": "ngx_quic_do_init_streams",
          "old_text": null,
          "new_text": "ngx_quic_do_init_streams(c)",
          "old_line_content": "    ngx_quic_connection_t  *qc;",
          "new_line_content": "    if (ngx_quic_do_init_streams(c) != NGX_OK) {",
          "content_same": false
        },
        {
          "line": 601,
          "old_api": null,
          "new_api": "ngx_quic_close_connection",
          "old_text": null,
          "new_text": "ngx_quic_close_connection(c, NGX_ERROR)",
          "old_line_content": "",
          "new_line_content": "        ngx_quic_close_connection(c, NGX_ERROR);",
          "content_same": false
        },
        {
          "line": 1115,
          "old_api": null,
          "new_api": "ngx_post_event",
          "old_text": null,
          "new_text": "ngx_post_event(&qc->close, &ngx_posted_events)",
          "old_line_content": "    }",
          "new_line_content": "        ngx_post_event(&qc->close, &ngx_posted_events);",
          "content_same": false
        },
        {
          "line": 1627,
          "old_api": null,
          "new_api": "ngx_log_debug5",
          "old_text": null,
          "new_text": "ngx_log_debug5(NGX_LOG_DEBUG_EVENT, pc->log, 0,\n                   \"quic stream id:0x%xL flow control msd:%uL/%uL md:%uL/%uL\",\n                   qs->id, last, qs->recv_max_data, qc->streams.recv_last + len,\n                   qc->streams.recv_max_data)",
          "old_line_content": "        return NGX_ERROR;",
          "new_line_content": "    ngx_log_debug5(NGX_LOG_DEBUG_EVENT, pc->log, 0,",
          "content_same": false
        },
        {
          "line": 1119,
          "old_api": null,
          "new_api": "ngx_quic_can_shutdown",
          "old_text": null,
          "new_text": "ngx_quic_can_shutdown(pc)",
          "old_line_content": "        if (frame == NULL) {",
          "new_line_content": "    if (!pc->reusable && ngx_quic_can_shutdown(pc) == NGX_OK) {",
          "content_same": false
        },
        {
          "line": 1120,
          "old_api": null,
          "new_api": "ngx_reusable_connection",
          "old_text": null,
          "new_text": "ngx_reusable_connection(pc, 1)",
          "old_line_content": "            return NGX_ERROR;",
          "new_line_content": "        ngx_reusable_connection(pc, 1);",
          "content_same": false
        },
        {
          "line": 1124,
          "old_api": null,
          "new_api": "ngx_quic_shutdown_quic",
          "old_text": null,
          "new_text": "ngx_quic_shutdown_quic(pc)",
          "old_line_content": "        frame->type = NGX_QUIC_FT_MAX_STREAMS;",
          "new_line_content": "        ngx_quic_shutdown_quic(pc);",
          "content_same": false
        },
        {
          "line": 615,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    {",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 1129,
          "old_api": null,
          "new_api": "ngx_quic_alloc_frame",
          "old_text": null,
          "new_text": "ngx_quic_alloc_frame(pc)",
          "old_line_content": "",
          "new_line_content": "        frame = ngx_quic_alloc_frame(pc);",
          "content_same": false
        },
        {
          "line": 618,
          "old_api": null,
          "new_api": "init",
          "old_text": null,
          "new_text": "qc->conf->init(c)",
          "old_line_content": "    }",
          "new_line_content": "        if (qc->conf->init(c) != NGX_OK) {",
          "content_same": false
        },
        {
          "line": 623,
          "old_api": null,
          "new_api": "ngx_queue_head",
          "old_text": null,
          "new_text": "ngx_queue_head(&qc->streams.uninitialized)",
          "old_line_content": "}",
          "new_line_content": "    for (q = ngx_queue_head(&qc->streams.uninitialized);",
          "content_same": false
        },
        {
          "line": 624,
          "old_api": null,
          "new_api": "ngx_queue_sentinel",
          "old_text": null,
          "new_text": "ngx_queue_sentinel(&qc->streams.uninitialized)",
          "old_line_content": "",
          "new_line_content": "         q != ngx_queue_sentinel(&qc->streams.uninitialized);",
          "content_same": false
        },
        {
          "line": 625,
          "old_api": null,
          "new_api": "ngx_queue_next",
          "old_text": null,
          "new_text": "ngx_queue_next(q)",
          "old_line_content": "",
          "new_line_content": "         q = ngx_queue_next(q))",
          "content_same": false
        },
        {
          "line": 627,
          "old_api": null,
          "new_api": "ngx_queue_data",
          "old_text": null,
          "new_text": "ngx_queue_data(q, ngx_quic_stream_t, queue)",
          "old_line_content": "ngx_quic_create_stream(ngx_connection_t *c, uint64_t id)",
          "new_line_content": "        qs = ngx_queue_data(q, ngx_quic_stream_t, queue);",
          "content_same": false
        },
        {
          "line": 628,
          "old_api": null,
          "new_api": "ngx_post_event",
          "old_text": null,
          "new_text": "ngx_post_event(qs->connection->read, &ngx_posted_events)",
          "old_line_content": "{",
          "new_line_content": "        ngx_post_event(qs->connection->read, &ngx_posted_events);",
          "content_same": false
        },
        {
          "line": 1146,
          "old_api": null,
          "new_api": "ngx_quic_queue_frame",
          "old_text": null,
          "new_text": "ngx_quic_queue_frame(qc, frame)",
          "old_line_content": "    ngx_rbtree_node_t      *node;",
          "new_line_content": "        ngx_quic_queue_frame(qc, frame);",
          "content_same": false
        },
        {
          "line": 1660,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(pc)",
          "old_line_content": "    qs->recv_offset += len;",
          "new_line_content": "    qc = ngx_quic_get_connection(pc);",
          "content_same": false
        },
        {
          "line": 1668,
          "old_api": null,
          "new_api": "ngx_log_debug2",
          "old_text": null,
          "new_text": "ngx_log_debug2(NGX_LOG_DEBUG_EVENT, pc->log, 0,\n                   \"quic stream id:0x%xL flow update %uL\", qs->id, last)",
          "old_line_content": "    qc->streams.recv_offset += len;",
          "new_line_content": "    ngx_log_debug2(NGX_LOG_DEBUG_EVENT, pc->log, 0,",
          "content_same": false
        },
        {
          "line": 649,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic stream id:0x%xL create\", id)",
          "old_line_content": "        /*",
          "new_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 1161,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "            if (!qs->cancelable) {",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 1674,
          "old_api": null,
          "new_api": "ngx_quic_update_max_stream_data",
          "old_text": null,
          "new_text": "ngx_quic_update_max_stream_data(qs)",
          "old_line_content": "            return NGX_ERROR;",
          "new_line_content": "        if (ngx_quic_update_max_stream_data(qs) != NGX_OK) {",
          "content_same": false
        },
        {
          "line": 652,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "         */",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 1166,
          "old_api": null,
          "new_api": "ngx_rbtree_min",
          "old_text": null,
          "new_text": "ngx_rbtree_min(tree->root, tree->sentinel)",
          "old_line_content": "",
          "new_line_content": "        for (node = ngx_rbtree_min(tree->root, tree->sentinel);",
          "content_same": false
        },
        {
          "line": 655,
          "old_api": null,
          "new_api": "ngx_queue_head",
          "old_text": null,
          "new_text": "ngx_queue_head(&qc->streams.free)",
          "old_line_content": "        if (qs == NULL) {",
          "new_line_content": "        q = ngx_queue_head(&qc->streams.free);",
          "content_same": false
        },
        {
          "line": 656,
          "old_api": null,
          "new_api": "ngx_queue_data",
          "old_text": null,
          "new_text": "ngx_queue_data(q, ngx_quic_stream_t, queue)",
          "old_line_content": "            return NULL;",
          "new_line_content": "        qs = ngx_queue_data(q, ngx_quic_stream_t, queue);",
          "content_same": false
        },
        {
          "line": 657,
          "old_api": null,
          "new_api": "ngx_queue_remove",
          "old_text": null,
          "new_text": "ngx_queue_remove(&qs->queue)",
          "old_line_content": "        }",
          "new_line_content": "        ngx_queue_remove(&qs->queue);",
          "content_same": false
        },
        {
          "line": 1168,
          "old_api": null,
          "new_api": "ngx_rbtree_next",
          "old_text": null,
          "new_text": "ngx_rbtree_next(tree, node)",
          "old_line_content": "}",
          "new_line_content": "             node = ngx_rbtree_next(tree, node))",
          "content_same": false
        },
        {
          "line": 1684,
          "old_api": null,
          "new_api": "ngx_quic_update_max_data",
          "old_text": null,
          "new_text": "ngx_quic_update_max_data(pc)",
          "old_line_content": "{",
          "new_line_content": "        if (ngx_quic_update_max_data(pc) != NGX_OK) {",
          "content_same": false
        },
        {
          "line": 665,
          "old_api": null,
          "new_api": "ngx_palloc",
          "old_text": null,
          "new_text": "ngx_palloc(c->pool, sizeof(ngx_quic_stream_t))",
          "old_line_content": "    qs->send_final_size = (uint64_t) -1;",
          "new_line_content": "        qs = ngx_palloc(c->pool, sizeof(ngx_quic_stream_t));",
          "content_same": false
        },
        {
          "line": 671,
          "old_api": null,
          "new_api": "ngx_memzero",
          "old_text": null,
          "new_text": "ngx_memzero(qs, sizeof(ngx_quic_stream_t))",
          "old_line_content": "        return NULL;",
          "new_line_content": "    ngx_memzero(qs, sizeof(ngx_quic_stream_t));",
          "content_same": false
        },
        {
          "line": 1702,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(pc)",
          "old_line_content": "",
          "new_line_content": "    qc = ngx_quic_get_connection(pc);",
          "content_same": false
        },
        {
          "line": 679,
          "old_api": null,
          "new_api": "ngx_create_pool",
          "old_text": null,
          "new_text": "ngx_create_pool(NGX_DEFAULT_POOL_SIZE, c->log)",
          "old_line_content": "    }",
          "new_line_content": "    pool = ngx_create_pool(NGX_DEFAULT_POOL_SIZE, c->log);",
          "content_same": false
        },
        {
          "line": 1191,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    last = f->offset + f->length;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 681,
          "old_api": null,
          "new_api": "ngx_queue_insert_tail",
          "old_text": null,
          "new_text": "ngx_queue_insert_tail(&qc->streams.free, &qs->queue)",
          "old_line_content": "    *log = *c->log;",
          "new_line_content": "        ngx_queue_insert_tail(&qc->streams.free, &qs->queue);",
          "content_same": false
        },
        {
          "line": 688,
          "old_api": null,
          "new_api": "ngx_queue_insert_tail",
          "old_text": null,
          "new_text": "ngx_queue_insert_tail(&qc->streams.free, &qs->queue)",
          "old_line_content": "    if (sc == NULL) {",
          "new_line_content": "        ngx_queue_insert_tail(&qc->streams.free, &qs->queue);",
          "content_same": false
        },
        {
          "line": 1204,
          "old_api": null,
          "new_api": "ngx_quic_get_stream",
          "old_text": null,
          "new_text": "ngx_quic_get_stream(c, f->stream_id)",
          "old_line_content": "        && qs->recv_state != NGX_QUIC_STREAM_RECV_SIZE_KNOWN)",
          "new_line_content": "    qs = ngx_quic_get_stream(c, f->stream_id);",
          "content_same": false
        },
        {
          "line": 1716,
          "old_api": null,
          "new_api": "ngx_log_debug2",
          "old_text": null,
          "new_text": "ngx_log_debug2(NGX_LOG_DEBUG_EVENT, pc->log, 0,\n                   \"quic stream id:0x%xL flow update msd:%uL\",\n                   qs->id, qs->recv_max_data)",
          "old_line_content": "    frame->u.max_stream_data.id = qs->id;",
          "new_line_content": "    ngx_log_debug2(NGX_LOG_DEBUG_EVENT, pc->log, 0,",
          "content_same": false
        },
        {
          "line": 696,
          "old_api": null,
          "new_api": "ngx_reusable_connection",
          "old_text": null,
          "new_text": "ngx_reusable_connection(c, 0)",
          "old_line_content": "",
          "new_line_content": "    ngx_reusable_connection(c, 0);",
          "content_same": false
        },
        {
          "line": 1720,
          "old_api": null,
          "new_api": "ngx_quic_alloc_frame",
          "old_text": null,
          "new_text": "ngx_quic_alloc_frame(pc)",
          "old_line_content": "",
          "new_line_content": "    frame = ngx_quic_alloc_frame(pc);",
          "content_same": false
        },
        {
          "line": 698,
          "old_api": null,
          "new_api": "ngx_get_connection",
          "old_text": null,
          "new_text": "ngx_get_connection(c->fd, log)",
          "old_line_content": "    sc->shared = 1;",
          "new_line_content": "    sc = ngx_get_connection(c->fd, log);",
          "content_same": false
        },
        {
          "line": 700,
          "old_api": null,
          "new_api": "ngx_destroy_pool",
          "old_text": null,
          "new_text": "ngx_destroy_pool(pool)",
          "old_line_content": "    sc->pool = pool;",
          "new_line_content": "        ngx_destroy_pool(pool);",
          "content_same": false
        },
        {
          "line": 701,
          "old_api": null,
          "new_api": "ngx_queue_insert_tail",
          "old_text": null,
          "new_text": "ngx_queue_insert_tail(&qc->streams.free, &qs->queue)",
          "old_line_content": "    sc->ssl = c->ssl;",
          "new_line_content": "        ngx_queue_insert_tail(&qc->streams.free, &qs->queue);",
          "content_same": false
        },
        {
          "line": 702,
          "old_api": null,
          "new_api": "ngx_reusable_connection",
          "old_text": null,
          "new_text": "ngx_reusable_connection(c, reusable)",
          "old_line_content": "    sc->sockaddr = c->sockaddr;",
          "new_line_content": "        ngx_reusable_connection(c, reusable);",
          "content_same": false
        },
        {
          "line": 1730,
          "old_api": null,
          "new_api": "ngx_quic_queue_frame",
          "old_text": null,
          "new_text": "ngx_quic_queue_frame(qc, frame)",
          "old_line_content": "    ngx_quic_connection_t  *qc;",
          "new_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "content_same": false
        },
        {
          "line": 1220,
          "old_api": null,
          "new_api": "ngx_quic_control_flow",
          "old_text": null,
          "new_text": "ngx_quic_control_flow(qs, last)",
          "old_line_content": "    }",
          "new_line_content": "    if (ngx_quic_control_flow(qs, last) != NGX_OK) {",
          "content_same": false
        },
        {
          "line": 718,
          "old_api": null,
          "new_api": "ngx_atomic_fetch_add",
          "old_text": null,
          "new_text": "ngx_atomic_fetch_add(ngx_connection_counter, 1)",
          "old_line_content": "    sc->read->handler = ngx_quic_empty_handler;",
          "new_line_content": "    sc->number = ngx_atomic_fetch_add(ngx_connection_counter, 1);",
          "content_same": false
        },
        {
          "line": 1743,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "                   \"quic flow update md:%uL\", qc->streams.recv_max_data);",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 1753,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic flow update md:%uL\", qc->streams.recv_max_data)",
          "old_line_content": "",
          "new_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 1756,
          "old_api": null,
          "new_api": "ngx_quic_alloc_frame",
          "old_text": null,
          "new_text": "ngx_quic_alloc_frame(c)",
          "old_line_content": "    return NGX_OK;",
          "new_line_content": "    frame = ngx_quic_alloc_frame(c);",
          "content_same": false
        },
        {
          "line": 1249,
          "old_api": null,
          "new_api": "ngx_quic_write_buffer",
          "old_text": null,
          "new_text": "ngx_quic_write_buffer(c, &qs->recv, frame->data, f->length, f->offset)",
          "old_line_content": "",
          "new_line_content": "    if (ngx_quic_write_buffer(c, &qs->recv, frame->data, f->length, f->offset)",
          "content_same": false
        },
        {
          "line": 1765,
          "old_api": null,
          "new_api": "ngx_quic_queue_frame",
          "old_text": null,
          "new_text": "ngx_quic_queue_frame(qc, frame)",
          "old_line_content": "    if (ev->active) {",
          "new_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "content_same": false
        },
        {
          "line": 1262,
          "old_api": null,
          "new_api": "ngx_quic_close_stream",
          "old_text": null,
          "new_text": "ngx_quic_close_stream(qs)",
          "old_line_content": "ngx_int_t",
          "new_line_content": "        return ngx_quic_close_stream(qs);",
          "content_same": false
        },
        {
          "line": 1777,
          "old_api": null,
          "new_api": "ngx_post_event",
          "old_text": null,
          "new_text": "ngx_post_event(ev, &ngx_posted_events)",
          "old_line_content": "",
          "new_line_content": "        ngx_post_event(ev, &ngx_posted_events);",
          "content_same": false
        },
        {
          "line": 1266,
          "old_api": null,
          "new_api": "ngx_quic_set_event",
          "old_text": null,
          "new_text": "ngx_quic_set_event(qs->connection->read)",
          "old_line_content": "    ngx_rbtree_t           *tree;",
          "new_line_content": "        ngx_quic_set_event(qs->connection->read);",
          "content_same": false
        },
        {
          "line": 762,
          "old_api": null,
          "new_api": "ngx_pool_cleanup_add",
          "old_text": null,
          "new_text": "ngx_pool_cleanup_add(pool, 0)",
          "old_line_content": "",
          "new_line_content": "    cln = ngx_pool_cleanup_add(pool, 0);",
          "content_same": false
        },
        {
          "line": 764,
          "old_api": null,
          "new_api": "ngx_close_connection",
          "old_text": null,
          "new_text": "ngx_close_connection(sc)",
          "old_line_content": "",
          "new_line_content": "        ngx_close_connection(sc);",
          "content_same": false
        },
        {
          "line": 765,
          "old_api": null,
          "new_api": "ngx_destroy_pool",
          "old_text": null,
          "new_text": "ngx_destroy_pool(pool)",
          "old_line_content": "    return qs;",
          "new_line_content": "        ngx_destroy_pool(pool);",
          "content_same": false
        },
        {
          "line": 766,
          "old_api": null,
          "new_api": "ngx_queue_insert_tail",
          "old_text": null,
          "new_text": "ngx_queue_insert_tail(&qc->streams.free, &qs->queue)",
          "old_line_content": "}",
          "new_line_content": "        ngx_queue_insert_tail(&qc->streams.free, &qs->queue);",
          "content_same": false
        },
        {
          "line": 767,
          "old_api": null,
          "new_api": "ngx_reusable_connection",
          "old_text": null,
          "new_text": "ngx_reusable_connection(c, reusable)",
          "old_line_content": "",
          "new_line_content": "        ngx_reusable_connection(c, reusable);",
          "content_same": false
        },
        {
          "line": 1282,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "        qc->streams.send_max_data = f->max_data;",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 774,
          "old_api": null,
          "new_api": "ngx_rbtree_insert",
          "old_text": null,
          "new_text": "ngx_rbtree_insert(&qc->streams.tree, &qs->node)",
          "old_line_content": "    ngx_quic_connection_t  *qc;",
          "new_line_content": "    ngx_rbtree_insert(&qc->streams.tree, &qs->node);",
          "content_same": false
        },
        {
          "line": 1298,
          "old_api": null,
          "new_api": "ngx_rbtree_min",
          "old_text": null,
          "new_text": "ngx_rbtree_min(tree->root, tree->sentinel)",
          "old_line_content": "",
          "new_line_content": "    node = ngx_rbtree_min(tree->root, tree->sentinel);",
          "content_same": false
        },
        {
          "line": 789,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(pc)",
          "old_line_content": "        }",
          "new_line_content": "    qc = ngx_quic_get_connection(pc);",
          "content_same": false
        },
        {
          "line": 1303,
          "old_api": null,
          "new_api": "ngx_rbtree_next",
          "old_text": null,
          "new_text": "ngx_rbtree_next(tree, node)",
          "old_line_content": "ngx_int_t",
          "new_line_content": "        node = ngx_rbtree_next(tree, node);",
          "content_same": false
        },
        {
          "line": 1305,
          "old_api": null,
          "new_api": "ngx_quic_stream_flush",
          "old_text": null,
          "new_text": "ngx_quic_stream_flush(qs)",
          "old_line_content": "    ngx_quic_header_t *pkt, ngx_quic_streams_blocked_frame_t *f)",
          "new_line_content": "        if (ngx_quic_stream_flush(qs) != NGX_OK) {",
          "content_same": false
        },
        {
          "line": 794,
          "old_api": null,
          "new_api": "ngx_quic_can_shutdown",
          "old_text": null,
          "new_text": "ngx_quic_can_shutdown(pc)",
          "old_line_content": "static void",
          "new_line_content": "        if (ngx_quic_can_shutdown(pc) == NGX_OK) {",
          "content_same": false
        },
        {
          "line": 795,
          "old_api": null,
          "new_api": "ngx_reusable_connection",
          "old_text": null,
          "new_text": "ngx_reusable_connection(pc, 1)",
          "old_line_content": "ngx_quic_empty_handler(ngx_event_t *ev)",
          "new_line_content": "            ngx_reusable_connection(pc, 1);",
          "content_same": false
        },
        {
          "line": 798,
          "old_api": null,
          "new_api": "ngx_quic_shutdown_quic",
          "old_text": null,
          "new_text": "ngx_quic_shutdown_quic(pc)",
          "old_line_content": "",
          "new_line_content": "                ngx_quic_shutdown_quic(pc);",
          "content_same": false
        },
        {
          "line": 1337,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    if (qs == NULL) {",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 832,
          "old_api": null,
          "new_api": "ngx_log_debug2",
          "old_text": null,
          "new_text": "ngx_log_debug2(NGX_LOG_DEBUG_EVENT, pc->log, 0,\n                   \"quic stream id:0x%xL recv buf:%uz\", qs->id, size)",
          "old_line_content": "",
          "new_line_content": "    ngx_log_debug2(NGX_LOG_DEBUG_EVENT, pc->log, 0,",
          "content_same": false
        },
        {
          "line": 1346,
          "old_api": null,
          "new_api": "ngx_quic_get_stream",
          "old_text": null,
          "new_text": "ngx_quic_get_stream(c, f->id)",
          "old_line_content": "}",
          "new_line_content": "    qs = ngx_quic_get_stream(c, f->id);",
          "content_same": false
        },
        {
          "line": 839,
          "old_api": null,
          "new_api": "ngx_quic_read_buffer",
          "old_text": null,
          "new_text": "ngx_quic_read_buffer(pc, &qs->recv, size)",
          "old_line_content": "    }",
          "new_line_content": "    in = ngx_quic_read_buffer(pc, &qs->recv, size);",
          "content_same": false
        },
        {
          "line": 849,
          "old_api": null,
          "new_api": "ngx_cpymem",
          "old_text": null,
          "new_text": "ngx_cpymem(buf, b->pos, b->last - b->pos)",
          "old_line_content": "            qs->recv_state = NGX_QUIC_STREAM_RECV_DATA_READ;",
          "new_line_content": "        buf = ngx_cpymem(buf, b->pos, b->last - b->pos);",
          "content_same": false
        },
        {
          "line": 852,
          "old_api": null,
          "new_api": "ngx_quic_free_chain",
          "old_text": null,
          "new_text": "ngx_quic_free_chain(pc, in)",
          "old_line_content": "        if (qs->recv_state == NGX_QUIC_STREAM_RECV_DATA_READ) {",
          "new_line_content": "    ngx_quic_free_chain(pc, in);",
          "content_same": false
        },
        {
          "line": 1367,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    if (qs == NULL) {",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 1376,
          "old_api": null,
          "new_api": "ngx_quic_get_stream",
          "old_text": null,
          "new_text": "ngx_quic_get_stream(c, f->id)",
          "old_line_content": "        return NGX_OK;",
          "new_line_content": "    qs = ngx_quic_get_stream(c, f->id);",
          "content_same": false
        },
        {
          "line": 868,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic stream id:0x%xL recv() not ready\", qs->id)",
          "old_line_content": "",
          "new_line_content": "        ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 873,
          "old_api": null,
          "new_api": "ngx_log_debug2",
          "old_text": null,
          "new_text": "ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic stream id:0x%xL recv len:%z\", qs->id, len)",
          "old_line_content": "static ssize_t",
          "new_line_content": "    ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 876,
          "old_api": null,
          "new_api": "ngx_quic_update_flow",
          "old_text": null,
          "new_text": "ngx_quic_update_flow(qs, qs->recv_offset + len)",
          "old_line_content": "    ngx_buf_t    b;",
          "new_line_content": "    if (ngx_quic_update_flow(qs, qs->recv_offset + len) != NGX_OK) {",
          "content_same": false
        },
        {
          "line": 1398,
          "old_api": null,
          "new_api": "ngx_quic_stream_flush",
          "old_text": null,
          "new_text": "ngx_quic_stream_flush(qs)",
          "old_line_content": "",
          "new_line_content": "    return ngx_quic_stream_flush(qs);",
          "content_same": false
        },
        {
          "line": 890,
          "old_api": null,
          "new_api": "ngx_memzero",
          "old_text": null,
          "new_text": "ngx_memzero(&b, sizeof(ngx_buf_t))",
          "old_line_content": "    }",
          "new_line_content": "    ngx_memzero(&b, sizeof(ngx_buf_t));",
          "content_same": false
        },
        {
          "line": 1410,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    if (qs == NULL) {",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 899,
          "old_api": null,
          "new_api": "ngx_quic_stream_send_chain",
          "old_text": null,
          "new_text": "ngx_quic_stream_send_chain(c, &cl, 0)",
          "old_line_content": "",
          "new_line_content": "    if (ngx_quic_stream_send_chain(c, &cl, 0) == NGX_CHAIN_ERROR) {",
          "content_same": false
        },
        {
          "line": 1419,
          "old_api": null,
          "new_api": "ngx_quic_get_stream",
          "old_text": null,
          "new_text": "ngx_quic_get_stream(c, f->id)",
          "old_line_content": "        || qs->recv_state == NGX_QUIC_STREAM_RECV_RESET_READ)",
          "new_line_content": "    qs = ngx_quic_get_stream(c, f->id);",
          "content_same": false
        },
        {
          "line": 922,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(pc)",
          "old_line_content": "",
          "new_line_content": "    qc = ngx_quic_get_connection(pc);",
          "content_same": false
        },
        {
          "line": 1437,
          "old_api": null,
          "new_api": "ngx_quic_control_flow",
          "old_text": null,
          "new_text": "ngx_quic_control_flow(qs, f->final_size)",
          "old_line_content": "    if (qs->recv_last > f->final_size) {",
          "new_line_content": "    if (ngx_quic_control_flow(qs, f->final_size) != NGX_OK) {",
          "content_same": false
        },
        {
          "line": 947,
          "old_api": null,
          "new_api": "ngx_quic_write_buffer",
          "old_text": null,
          "new_text": "ngx_quic_write_buffer(pc, &qs->send, in, limit, qs->sent)",
          "old_line_content": "        wev->ready = 0;",
          "new_line_content": "    in = ngx_quic_write_buffer(pc, &qs->send, in, limit, qs->sent);",
          "content_same": false
        },
        {
          "line": 1460,
          "old_api": null,
          "new_api": "ngx_quic_close_stream",
          "old_text": null,
          "new_text": "ngx_quic_close_stream(qs)",
          "old_line_content": "",
          "new_line_content": "        return ngx_quic_close_stream(qs);",
          "content_same": false
        },
        {
          "line": 1466,
          "old_api": null,
          "new_api": "ngx_quic_set_event",
          "old_text": null,
          "new_text": "ngx_quic_set_event(rev)",
          "old_line_content": "    ngx_quic_connection_t  *qc;",
          "new_line_content": "    ngx_quic_set_event(rev);",
          "content_same": false
        },
        {
          "line": 961,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic send_chain sent:%uL\", n)",
          "old_line_content": "static ngx_int_t",
          "new_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 964,
          "old_api": null,
          "new_api": "ngx_quic_stream_flush",
          "old_text": null,
          "new_text": "ngx_quic_stream_flush(qs)",
          "old_line_content": "    off_t                   limit, len;",
          "new_line_content": "    if (ngx_quic_stream_flush(qs) != NGX_OK) {",
          "content_same": false
        },
        {
          "line": 1479,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "    if (qs == NULL) {",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 1488,
          "old_api": null,
          "new_api": "ngx_quic_get_stream",
          "old_text": null,
          "new_text": "ngx_quic_get_stream(c, f->id)",
          "old_line_content": "        return NGX_ERROR;",
          "new_line_content": "    qs = ngx_quic_get_stream(c, f->id);",
          "content_same": false
        },
        {
          "line": 1498,
          "old_api": null,
          "new_api": "ngx_quic_do_reset_stream",
          "old_text": null,
          "new_text": "ngx_quic_do_reset_stream(qs, f->error_code)",
          "old_line_content": "}",
          "new_line_content": "    if (ngx_quic_do_reset_stream(qs, f->error_code) != NGX_OK) {",
          "content_same": false
        },
        {
          "line": 987,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(pc)",
          "old_line_content": "",
          "new_line_content": "    qc = ngx_quic_get_connection(pc);",
          "content_same": false
        },
        {
          "line": 1503,
          "old_api": null,
          "new_api": "ngx_quic_close_stream",
          "old_text": null,
          "new_text": "ngx_quic_close_stream(qs)",
          "old_line_content": "    ngx_quic_header_t *pkt, ngx_quic_max_streams_frame_t *f)",
          "new_line_content": "        return ngx_quic_close_stream(qs);",
          "content_same": false
        },
        {
          "line": 993,
          "old_api": null,
          "new_api": "ngx_min",
          "old_text": null,
          "new_text": "ngx_min(qc->streams.send_max_data - qc->streams.send_offset,\n                    qs->send_max_data - qs->send_offset)",
          "old_line_content": "    }",
          "new_line_content": "    limit = ngx_min(qc->streams.send_max_data - qc->streams.send_offset,",
          "content_same": false
        },
        {
          "line": 1506,
          "old_api": null,
          "new_api": "ngx_quic_set_event",
          "old_text": null,
          "new_text": "ngx_quic_set_event(qs->connection->write)",
          "old_line_content": "",
          "new_line_content": "    ngx_quic_set_event(qs->connection->write);",
          "content_same": false
        },
        {
          "line": 483,
          "old_api": null,
          "new_api": "ngx_delete_posted_event",
          "old_text": null,
          "new_text": "ngx_delete_posted_event(&qc->push)",
          "old_line_content": "}",
          "new_line_content": "                ngx_delete_posted_event(&qc->push);",
          "content_same": false
        },
        {
          "line": 484,
          "old_api": null,
          "new_api": "ngx_post_event",
          "old_text": null,
          "new_text": "ngx_post_event(&qc->push, &ngx_posted_events)",
          "old_line_content": "",
          "new_line_content": "                ngx_post_event(&qc->push, &ngx_posted_events);",
          "content_same": false
        },
        {
          "line": 996,
          "old_api": null,
          "new_api": "ngx_log_debug2",
          "old_text": null,
          "new_text": "ngx_log_debug2(NGX_LOG_DEBUG_EVENT, pc->log, 0,\n                   \"quic stream id:0x%xL flush limit:%O\", qs->id, limit)",
          "old_line_content": "    last = 0;",
          "new_line_content": "    ngx_log_debug2(NGX_LOG_DEBUG_EVENT, pc->log, 0,",
          "content_same": false
        },
        {
          "line": 1001,
          "old_api": null,
          "new_api": "ngx_quic_read_buffer",
          "old_text": null,
          "new_text": "ngx_quic_read_buffer(pc, &qs->send, limit)",
          "old_line_content": "        qs->send_state = NGX_QUIC_STREAM_SEND_DATA_SENT;",
          "new_line_content": "    out = ngx_quic_read_buffer(pc, &qs->send, limit);",
          "content_same": false
        },
        {
          "line": 1518,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "        if (qc->streams.server_max_streams_uni < f->limit) {",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 1524,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                           \"quic max_streams_bidi:%uL\", f->limit)",
          "old_line_content": "    }",
          "new_line_content": "            ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        },
        {
          "line": 504,
          "old_api": null,
          "new_api": "ngx_quic_get_connection",
          "old_text": null,
          "new_text": "ngx_quic_get_connection(c)",
          "old_line_content": "                   \"quic stream id:0x%xL reject err:0x%xL\", id, code);",
          "new_line_content": "    qc = ngx_quic_get_connection(c);",
          "content_same": false
        },
        {
          "line": 1532,
          "old_api": null,
          "new_api": "ngx_log_debug1",
          "old_text": null,
          "new_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                           \"quic max_streams_uni:%uL\", f->limit)",
          "old_line_content": "{",
          "new_line_content": "            ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1537,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    return NGX_OK;",
          "content_same": false
        },
        {
          "line": 1026,
          "old_api": "ngx_quic_queue_frame",
          "new_api": null,
          "old_text": "ngx_quic_queue_frame(qc, frame)",
          "new_text": null,
          "old_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "new_line_content": "    frame->type = NGX_QUIC_FT_STREAM;",
          "content_same": false
        },
        {
          "line": 1031,
          "old_api": "ngx_log_debug3",
          "new_api": null,
          "old_text": "ngx_log_debug3(NGX_LOG_DEBUG_EVENT, pc->log, 0,\n                   \"quic stream id:0x%xL flush len:%O last:%ui\",\n                   qs->id, len, last)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug3(NGX_LOG_DEBUG_EVENT, pc->log, 0,",
          "new_line_content": "    frame->u.stream.fin = last;",
          "content_same": false
        },
        {
          "line": 1543,
          "old_api": "ngx_quic_find_stream",
          "new_api": null,
          "old_text": "ngx_quic_find_stream(&qc->streams.tree, f->u.reset_stream.id)",
          "new_text": null,
          "old_line_content": "        qs = ngx_quic_find_stream(&qc->streams.tree, f->u.reset_stream.id);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 519,
          "old_api": "ngx_quic_alloc_frame",
          "new_api": null,
          "old_text": "ngx_quic_alloc_frame(c)",
          "new_text": null,
          "old_line_content": "    frame = ngx_quic_alloc_frame(c);",
          "new_line_content": "        return NGX_ERROR;",
          "content_same": false
        },
        {
          "line": 1036,
          "old_api": "ngx_quic_close_stream",
          "new_api": null,
          "old_text": "ngx_quic_close_stream(qs)",
          "new_text": null,
          "old_line_content": "        return ngx_quic_close_stream(qs);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1550,
          "old_api": "ngx_log_debug2",
          "new_api": null,
          "old_text": "ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic stream id:0x%xL ack reset final_size:%uL\",\n                       qs->id, f->u.reset_stream.final_size)",
          "new_text": null,
          "old_line_content": "        ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    switch (f->type) {",
          "content_same": false
        },
        {
          "line": 529,
          "old_api": "ngx_quic_queue_frame",
          "new_api": null,
          "old_text": "ngx_quic_queue_frame(qc, frame)",
          "new_text": null,
          "old_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1558,
          "old_api": "ngx_quic_find_stream",
          "new_api": null,
          "old_text": "ngx_quic_find_stream(&qc->streams.tree, f->u.stream.stream_id)",
          "new_text": null,
          "old_line_content": "        qs = ngx_quic_find_stream(&qc->streams.tree, f->u.stream.stream_id);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1052,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, qs->parent->log, 0,\n                   \"quic stream id:0x%xL cleanup\", qs->id)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, qs->parent->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1055,
          "old_api": "ngx_quic_shutdown_stream",
          "new_api": null,
          "old_text": "ngx_quic_shutdown_stream(c, NGX_RDWR_SHUTDOWN)",
          "new_text": null,
          "old_line_content": "    if (ngx_quic_shutdown_stream(c, NGX_RDWR_SHUTDOWN) != NGX_OK) {",
          "new_line_content": "ngx_quic_stream_cleanup_handler(void *data)",
          "content_same": false
        },
        {
          "line": 544,
          "old_api": "ngx_log_debug0",
          "new_api": null,
          "old_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0, \"quic init stream\")",
          "new_text": null,
          "old_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0, \"quic init stream\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1056,
          "old_api": "ngx_quic_close_connection",
          "new_api": null,
          "old_text": "ngx_quic_close_connection(c, NGX_ERROR)",
          "new_text": null,
          "old_line_content": "        ngx_quic_close_connection(c, NGX_ERROR);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1062,
          "old_api": "ngx_quic_close_stream",
          "new_api": null,
          "old_text": "ngx_quic_close_stream(qs)",
          "new_text": null,
          "old_line_content": "    if (ngx_quic_close_stream(qs) != NGX_OK) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1576,
          "old_api": "ngx_log_debug4",
          "new_api": null,
          "old_text": "ngx_log_debug4(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic stream id:0x%xL ack len:%uL fin:%d unacked:%uL\",\n                       qs->id, f->u.stream.length, f->u.stream.fin,\n                       qs->sent - qs->acked)",
          "new_text": null,
          "old_line_content": "        ngx_log_debug4(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 553,
          "old_api": "ngx_queue_remove",
          "new_api": null,
          "old_text": "ngx_queue_remove(&qs->queue)",
          "new_text": null,
          "old_line_content": "    ngx_queue_remove(&qs->queue);",
          "new_line_content": "    qs = c->quic;",
          "content_same": false
        },
        {
          "line": 1585,
          "old_api": "ngx_quic_set_event",
          "new_api": null,
          "old_text": "ngx_quic_set_event(qs->connection->write)",
          "new_text": null,
          "old_line_content": "            ngx_quic_set_event(qs->connection->write);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 565,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1077,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(pc)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(pc);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 571,
          "old_api": "ngx_ssl_ocsp_validate",
          "new_api": null,
          "old_text": "ngx_ssl_ocsp_validate(c)",
          "new_text": null,
          "old_line_content": "    rc = ngx_ssl_ocsp_validate(c);",
          "new_line_content": "ngx_quic_init_streams(ngx_connection_t *c)",
          "content_same": false
        },
        {
          "line": 1595,
          "old_api": "ngx_quic_close_stream",
          "new_api": null,
          "old_text": "ngx_quic_close_stream(qs)",
          "new_text": null,
          "old_line_content": "        ngx_quic_close_stream(qs);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 1093,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, pc->log, 0,\n                   \"quic stream id:0x%xL close\", qs->id)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, pc->log, 0,",
          "new_line_content": "        if (qs->recv_state == NGX_QUIC_STREAM_RECV_RECV) {",
          "content_same": false
        },
        {
          "line": 1096,
          "old_api": "ngx_quic_free_buffer",
          "new_api": null,
          "old_text": "ngx_quic_free_buffer(pc, &qs->send)",
          "new_text": null,
          "old_line_content": "    ngx_quic_free_buffer(pc, &qs->send);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1097,
          "old_api": "ngx_quic_free_buffer",
          "new_api": null,
          "old_text": "ngx_quic_free_buffer(pc, &qs->recv)",
          "new_text": null,
          "old_line_content": "    ngx_quic_free_buffer(pc, &qs->recv);",
          "new_line_content": "        if (qs->send_state != NGX_QUIC_STREAM_SEND_DATA_RECVD",
          "content_same": false
        },
        {
          "line": 1608,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(pc)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(pc);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1099,
          "old_api": "ngx_rbtree_delete",
          "new_api": null,
          "old_text": "ngx_rbtree_delete(&qc->streams.tree, &qs->node)",
          "new_text": null,
          "old_line_content": "    ngx_rbtree_delete(&qc->streams.tree, &qs->node);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 1100,
          "old_api": "ngx_queue_insert_tail",
          "new_api": null,
          "old_text": "ngx_queue_insert_tail(&qc->streams.free, &qs->queue)",
          "new_text": null,
          "old_line_content": "    ngx_queue_insert_tail(&qc->streams.free, &qs->queue);",
          "new_line_content": "            return NGX_OK;",
          "content_same": false
        },
        {
          "line": 589,
          "old_api": "ngx_quic_do_init_streams",
          "new_api": null,
          "old_text": "ngx_quic_do_init_streams(c)",
          "new_text": null,
          "old_line_content": "    if (ngx_quic_do_init_streams(c) != NGX_OK) {",
          "new_line_content": "        c->ssl->handler = ngx_quic_init_streams_handler;",
          "content_same": false
        },
        {
          "line": 590,
          "old_api": "ngx_quic_close_connection",
          "new_api": null,
          "old_text": "ngx_quic_close_connection(c, NGX_ERROR)",
          "new_text": null,
          "old_line_content": "        ngx_quic_close_connection(c, NGX_ERROR);",
          "new_line_content": "        return NGX_OK;",
          "content_same": false
        },
        {
          "line": 1616,
          "old_api": "ngx_log_debug5",
          "new_api": null,
          "old_text": "ngx_log_debug5(NGX_LOG_DEBUG_EVENT, pc->log, 0,\n                   \"quic stream id:0x%xL flow control msd:%uL/%uL md:%uL/%uL\",\n                   qs->id, last, qs->recv_max_data, qc->streams.recv_last + len,\n                   qc->streams.recv_max_data)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug5(NGX_LOG_DEBUG_EVENT, pc->log, 0,",
          "new_line_content": "    ngx_quic_connection_t  *qc;",
          "content_same": false
        },
        {
          "line": 1109,
          "old_api": "ngx_reusable_connection",
          "new_api": null,
          "old_text": "ngx_reusable_connection(pc, 1)",
          "new_text": null,
          "old_line_content": "        ngx_reusable_connection(pc, 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1113,
          "old_api": "ngx_quic_shutdown_quic",
          "new_api": null,
          "old_text": "ngx_quic_shutdown_quic(pc)",
          "new_text": null,
          "old_line_content": "        ngx_quic_shutdown_quic(pc);",
          "new_line_content": "    if (qc->closing) {",
          "content_same": false
        },
        {
          "line": 602,
          "old_api": "ngx_log_debug0",
          "new_api": null,
          "old_text": "ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0, \"quic init streams\")",
          "new_text": null,
          "old_line_content": "    ngx_log_debug0(NGX_LOG_DEBUG_EVENT, c->log, 0, \"quic init streams\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 604,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1118,
          "old_api": "ngx_quic_alloc_frame",
          "new_api": null,
          "old_text": "ngx_quic_alloc_frame(pc)",
          "new_text": null,
          "old_line_content": "        frame = ngx_quic_alloc_frame(pc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 607,
          "old_api": "init",
          "new_api": null,
          "old_text": "qc->conf->init(c)",
          "new_text": null,
          "old_line_content": "        if (qc->conf->init(c) != NGX_OK) {",
          "new_line_content": "ngx_quic_do_init_streams(ngx_connection_t *c)",
          "content_same": false
        },
        {
          "line": 612,
          "old_api": "ngx_queue_head",
          "new_api": null,
          "old_text": "ngx_queue_head(&qc->streams.uninitialized)",
          "new_text": null,
          "old_line_content": "    for (q = ngx_queue_head(&qc->streams.uninitialized);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 614,
          "old_api": "ngx_queue_next",
          "new_api": null,
          "old_text": "ngx_queue_next(q)",
          "new_text": null,
          "old_line_content": "         q = ngx_queue_next(q))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 616,
          "old_api": "ngx_queue_data",
          "new_api": null,
          "old_text": "ngx_queue_data(q, ngx_quic_stream_t, queue)",
          "new_text": null,
          "old_line_content": "        qs = ngx_queue_data(q, ngx_quic_stream_t, queue);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 617,
          "old_api": "ngx_post_event",
          "new_api": null,
          "old_text": "ngx_post_event(qs->connection->read, &ngx_posted_events)",
          "new_text": null,
          "old_line_content": "        ngx_post_event(qs->connection->read, &ngx_posted_events);",
          "new_line_content": "    if (qc->conf->init) {",
          "content_same": false
        },
        {
          "line": 1135,
          "old_api": "ngx_quic_queue_frame",
          "new_api": null,
          "old_text": "ngx_quic_queue_frame(qc, frame)",
          "new_text": null,
          "old_line_content": "        ngx_quic_queue_frame(qc, frame);",
          "new_line_content": "        frame->type = NGX_QUIC_FT_MAX_STREAMS;",
          "content_same": false
        },
        {
          "line": 1649,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(pc)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(pc);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1657,
          "old_api": "ngx_log_debug2",
          "new_api": null,
          "old_text": "ngx_log_debug2(NGX_LOG_DEBUG_EVENT, pc->log, 0,\n                   \"quic stream id:0x%xL flow update %uL\", qs->id, last)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug2(NGX_LOG_DEBUG_EVENT, pc->log, 0,",
          "new_line_content": "    ngx_quic_connection_t  *qc;",
          "content_same": false
        },
        {
          "line": 1150,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 638,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic stream id:0x%xL create\", id)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "ngx_quic_create_stream(ngx_connection_t *c, uint64_t id)",
          "content_same": false
        },
        {
          "line": 1663,
          "old_api": "ngx_quic_update_max_stream_data",
          "new_api": null,
          "old_text": "ngx_quic_update_max_stream_data(qs)",
          "new_text": null,
          "old_line_content": "        if (ngx_quic_update_max_stream_data(qs) != NGX_OK) {",
          "new_line_content": "        return NGX_OK;",
          "content_same": false
        },
        {
          "line": 641,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    ngx_pool_t             *pool;",
          "content_same": false
        },
        {
          "line": 643,
          "old_api": "ngx_queue_empty",
          "new_api": null,
          "old_text": "ngx_queue_empty(&qc->streams.free)",
          "new_text": null,
          "old_line_content": "    if (!ngx_queue_empty(&qc->streams.free)) {",
          "new_line_content": "    ngx_queue_t            *q;",
          "content_same": false
        },
        {
          "line": 644,
          "old_api": "ngx_queue_head",
          "new_api": null,
          "old_text": "ngx_queue_head(&qc->streams.free)",
          "new_text": null,
          "old_line_content": "        q = ngx_queue_head(&qc->streams.free);",
          "new_line_content": "    ngx_connection_t       *sc;",
          "content_same": false
        },
        {
          "line": 645,
          "old_api": "ngx_queue_data",
          "new_api": null,
          "old_text": "ngx_queue_data(q, ngx_quic_stream_t, queue)",
          "new_text": null,
          "old_line_content": "        qs = ngx_queue_data(q, ngx_quic_stream_t, queue);",
          "new_line_content": "    ngx_quic_stream_t      *qs;",
          "content_same": false
        },
        {
          "line": 646,
          "old_api": "ngx_queue_remove",
          "new_api": null,
          "old_text": "ngx_queue_remove(&qs->queue)",
          "new_text": null,
          "old_line_content": "        ngx_queue_remove(&qs->queue);",
          "new_line_content": "    ngx_pool_cleanup_t     *cln;",
          "content_same": false
        },
        {
          "line": 1155,
          "old_api": "ngx_rbtree_min",
          "new_api": null,
          "old_text": "ngx_rbtree_min(tree->root, tree->sentinel)",
          "new_text": null,
          "old_line_content": "        for (node = ngx_rbtree_min(tree->root, tree->sentinel);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1157,
          "old_api": "ngx_rbtree_next",
          "new_api": null,
          "old_text": "ngx_rbtree_next(tree, node)",
          "new_text": null,
          "old_line_content": "             node = ngx_rbtree_next(tree, node))",
          "new_line_content": "    ngx_rbtree_node_t      *node;",
          "content_same": false
        },
        {
          "line": 1673,
          "old_api": "ngx_quic_update_max_data",
          "new_api": null,
          "old_text": "ngx_quic_update_max_data(pc)",
          "new_text": null,
          "old_line_content": "        if (ngx_quic_update_max_data(pc) != NGX_OK) {",
          "new_line_content": "    if (qs->recv_max_data <= qs->recv_offset + qs->recv_window / 2) {",
          "content_same": false
        },
        {
          "line": 660,
          "old_api": "ngx_memzero",
          "new_api": null,
          "old_text": "ngx_memzero(qs, sizeof(ngx_quic_stream_t))",
          "new_text": null,
          "old_line_content": "    ngx_memzero(qs, sizeof(ngx_quic_stream_t));",
          "new_line_content": "        /*",
          "content_same": false
        },
        {
          "line": 1691,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(pc)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(pc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 668,
          "old_api": "ngx_create_pool",
          "new_api": null,
          "old_text": "ngx_create_pool(NGX_DEFAULT_POOL_SIZE, c->log)",
          "new_text": null,
          "old_line_content": "    pool = ngx_create_pool(NGX_DEFAULT_POOL_SIZE, c->log);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1180,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 670,
          "old_api": "ngx_queue_insert_tail",
          "new_api": null,
          "old_text": "ngx_queue_insert_tail(&qc->streams.free, &qs->queue)",
          "new_text": null,
          "old_line_content": "        ngx_queue_insert_tail(&qc->streams.free, &qs->queue);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 674,
          "old_api": "ngx_palloc",
          "new_api": null,
          "old_text": "ngx_palloc(pool, sizeof(ngx_log_t))",
          "new_text": null,
          "old_line_content": "    log = ngx_palloc(pool, sizeof(ngx_log_t));",
          "new_line_content": "    qs->parent = c;",
          "content_same": false
        },
        {
          "line": 676,
          "old_api": "ngx_destroy_pool",
          "new_api": null,
          "old_text": "ngx_destroy_pool(pool)",
          "new_text": null,
          "old_line_content": "        ngx_destroy_pool(pool);",
          "new_line_content": "    qs->send_final_size = (uint64_t) -1;",
          "content_same": false
        },
        {
          "line": 677,
          "old_api": "ngx_queue_insert_tail",
          "new_api": null,
          "old_text": "ngx_queue_insert_tail(&qc->streams.free, &qs->queue)",
          "new_text": null,
          "old_line_content": "        ngx_queue_insert_tail(&qc->streams.free, &qs->queue);",
          "new_line_content": "    qs->recv_final_size = (uint64_t) -1;",
          "content_same": false
        },
        {
          "line": 1193,
          "old_api": "ngx_quic_get_stream",
          "new_api": null,
          "old_text": "ngx_quic_get_stream(c, f->stream_id)",
          "new_text": null,
          "old_line_content": "    qs = ngx_quic_get_stream(c, f->stream_id);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1705,
          "old_api": "ngx_log_debug2",
          "new_api": null,
          "old_text": "ngx_log_debug2(NGX_LOG_DEBUG_EVENT, pc->log, 0,\n                   \"quic stream id:0x%xL flow update msd:%uL\",\n                   qs->id, qs->recv_max_data)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug2(NGX_LOG_DEBUG_EVENT, pc->log, 0,",
          "new_line_content": "        return NGX_OK;",
          "content_same": false
        },
        {
          "line": 1709,
          "old_api": "ngx_quic_alloc_frame",
          "new_api": null,
          "old_text": "ngx_quic_alloc_frame(pc)",
          "new_text": null,
          "old_line_content": "    frame = ngx_quic_alloc_frame(pc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 689,
          "old_api": "ngx_destroy_pool",
          "new_api": null,
          "old_text": "ngx_destroy_pool(pool)",
          "new_text": null,
          "old_line_content": "        ngx_destroy_pool(pool);",
          "new_line_content": "        return NULL;",
          "content_same": false
        },
        {
          "line": 690,
          "old_api": "ngx_queue_insert_tail",
          "new_api": null,
          "old_text": "ngx_queue_insert_tail(&qc->streams.free, &qs->queue)",
          "new_text": null,
          "old_line_content": "        ngx_queue_insert_tail(&qc->streams.free, &qs->queue);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 691,
          "old_api": "ngx_reusable_connection",
          "new_api": null,
          "old_text": "ngx_reusable_connection(c, reusable)",
          "new_text": null,
          "old_line_content": "        ngx_reusable_connection(c, reusable);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1719,
          "old_api": "ngx_quic_queue_frame",
          "new_api": null,
          "old_text": "ngx_quic_queue_frame(qc, frame)",
          "new_text": null,
          "old_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1209,
          "old_api": "ngx_quic_control_flow",
          "new_api": null,
          "old_text": "ngx_quic_control_flow(qs, last)",
          "new_text": null,
          "old_line_content": "    if (ngx_quic_control_flow(qs, last) != NGX_OK) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 707,
          "old_api": "ngx_atomic_fetch_add",
          "new_api": null,
          "old_text": "ngx_atomic_fetch_add(ngx_connection_counter, 1)",
          "new_text": null,
          "old_line_content": "    sc->number = ngx_atomic_fetch_add(ngx_connection_counter, 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1732,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    return NGX_OK;",
          "content_same": false
        },
        {
          "line": 1742,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic flow update md:%uL\", qc->streams.recv_max_data)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1745,
          "old_api": "ngx_quic_alloc_frame",
          "new_api": null,
          "old_text": "ngx_quic_alloc_frame(c)",
          "new_text": null,
          "old_line_content": "    frame = ngx_quic_alloc_frame(c);",
          "new_line_content": "    recv_max_data = qc->streams.recv_offset + qc->streams.recv_window;",
          "content_same": false
        },
        {
          "line": 1238,
          "old_api": "ngx_quic_write_buffer",
          "new_api": null,
          "old_text": "ngx_quic_write_buffer(c, &qs->recv, frame->data, f->length, f->offset)",
          "new_text": null,
          "old_line_content": "    if (ngx_quic_write_buffer(c, &qs->recv, frame->data, f->length, f->offset)",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1754,
          "old_api": "ngx_quic_queue_frame",
          "new_api": null,
          "old_text": "ngx_quic_queue_frame(qc, frame)",
          "new_text": null,
          "old_line_content": "    ngx_quic_queue_frame(qc, frame);",
          "new_line_content": "                   \"quic flow update md:%uL\", qc->streams.recv_max_data);",
          "content_same": false
        },
        {
          "line": 1251,
          "old_api": "ngx_quic_close_stream",
          "new_api": null,
          "old_text": "ngx_quic_close_stream(qs)",
          "new_text": null,
          "old_line_content": "        return ngx_quic_close_stream(qs);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1766,
          "old_api": "ngx_post_event",
          "new_api": null,
          "old_text": "ngx_post_event(ev, &ngx_posted_events)",
          "new_text": null,
          "old_line_content": "        ngx_post_event(ev, &ngx_posted_events);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1255,
          "old_api": "ngx_quic_set_event",
          "new_api": null,
          "old_text": "ngx_quic_set_event(qs->connection->read)",
          "new_text": null,
          "old_line_content": "        ngx_quic_set_event(qs->connection->read);",
          "new_line_content": "    if (qs->recv_state == NGX_QUIC_STREAM_RECV_SIZE_KNOWN",
          "content_same": false
        },
        {
          "line": 751,
          "old_api": "ngx_pool_cleanup_add",
          "new_api": null,
          "old_text": "ngx_pool_cleanup_add(pool, 0)",
          "new_text": null,
          "old_line_content": "    cln = ngx_pool_cleanup_add(pool, 0);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 753,
          "old_api": "ngx_close_connection",
          "new_api": null,
          "old_text": "ngx_close_connection(sc)",
          "new_text": null,
          "old_line_content": "        ngx_close_connection(sc);",
          "new_line_content": "            qs->recv_max_data = qc->tp.initial_max_stream_data_bidi_remote;",
          "content_same": false
        },
        {
          "line": 754,
          "old_api": "ngx_destroy_pool",
          "new_api": null,
          "old_text": "ngx_destroy_pool(pool)",
          "new_text": null,
          "old_line_content": "        ngx_destroy_pool(pool);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 755,
          "old_api": "ngx_queue_insert_tail",
          "new_api": null,
          "old_text": "ngx_queue_insert_tail(&qc->streams.free, &qs->queue)",
          "new_text": null,
          "old_line_content": "        ngx_queue_insert_tail(&qc->streams.free, &qs->queue);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 756,
          "old_api": "ngx_reusable_connection",
          "new_api": null,
          "old_text": "ngx_reusable_connection(c, reusable)",
          "new_text": null,
          "old_line_content": "        ngx_reusable_connection(c, reusable);",
          "new_line_content": "        qs->recv_state = NGX_QUIC_STREAM_RECV_RECV;",
          "content_same": false
        },
        {
          "line": 1271,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 763,
          "old_api": "ngx_rbtree_insert",
          "new_api": null,
          "old_text": "ngx_rbtree_insert(&qc->streams.tree, &qs->node)",
          "new_text": null,
          "old_line_content": "    ngx_rbtree_insert(&qc->streams.tree, &qs->node);",
          "new_line_content": "    if (cln == NULL) {",
          "content_same": false
        },
        {
          "line": 1287,
          "old_api": "ngx_rbtree_min",
          "new_api": null,
          "old_text": "ngx_rbtree_min(tree->root, tree->sentinel)",
          "new_text": null,
          "old_line_content": "    node = ngx_rbtree_min(tree->root, tree->sentinel);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 778,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(pc)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(pc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1292,
          "old_api": "ngx_rbtree_next",
          "new_api": null,
          "old_text": "ngx_rbtree_next(tree, node)",
          "new_text": null,
          "old_line_content": "        node = ngx_rbtree_next(tree, node);",
          "new_line_content": "        /* not blocked on MAX_DATA */",
          "content_same": false
        },
        {
          "line": 1294,
          "old_api": "ngx_quic_stream_flush",
          "new_api": null,
          "old_text": "ngx_quic_stream_flush(qs)",
          "new_text": null,
          "old_line_content": "        if (ngx_quic_stream_flush(qs) != NGX_OK) {",
          "new_line_content": "        return NGX_OK;",
          "content_same": false
        },
        {
          "line": 783,
          "old_api": "ngx_quic_can_shutdown",
          "new_api": null,
          "old_text": "ngx_quic_can_shutdown(pc)",
          "new_text": null,
          "old_line_content": "        if (ngx_quic_can_shutdown(pc) == NGX_OK) {",
          "new_line_content": "    ngx_connection_t       *pc;",
          "content_same": false
        },
        {
          "line": 784,
          "old_api": "ngx_reusable_connection",
          "new_api": null,
          "old_text": "ngx_reusable_connection(pc, 1)",
          "new_text": null,
          "old_line_content": "            ngx_reusable_connection(pc, 1);",
          "new_line_content": "    ngx_quic_stream_t      *qs;",
          "content_same": false
        },
        {
          "line": 787,
          "old_api": "ngx_quic_shutdown_quic",
          "new_api": null,
          "old_text": "ngx_quic_shutdown_quic(pc)",
          "new_text": null,
          "old_line_content": "                ngx_quic_shutdown_quic(pc);",
          "new_line_content": "    qs = c->quic;",
          "content_same": false
        },
        {
          "line": 1315,
          "old_api": "ngx_quic_update_max_data",
          "new_api": null,
          "old_text": "ngx_quic_update_max_data(c)",
          "new_text": null,
          "old_line_content": "    return ngx_quic_update_max_data(c);",
          "new_line_content": "ngx_quic_handle_streams_blocked_frame(ngx_connection_t *c,",
          "content_same": false
        },
        {
          "line": 821,
          "old_api": "ngx_log_debug2",
          "new_api": null,
          "old_text": "ngx_log_debug2(NGX_LOG_DEBUG_EVENT, pc->log, 0,\n                   \"quic stream id:0x%xL recv buf:%uz\", qs->id, size)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug2(NGX_LOG_DEBUG_EVENT, pc->log, 0,",
          "new_line_content": "    qs = c->quic;",
          "content_same": false
        },
        {
          "line": 1335,
          "old_api": "ngx_quic_get_stream",
          "new_api": null,
          "old_text": "ngx_quic_get_stream(c, f->id)",
          "new_text": null,
          "old_line_content": "    qs = ngx_quic_get_stream(c, f->id);",
          "new_line_content": "    ngx_quic_connection_t  *qc;",
          "content_same": false
        },
        {
          "line": 828,
          "old_api": "ngx_quic_read_buffer",
          "new_api": null,
          "old_text": "ngx_quic_read_buffer(pc, &qs->recv, size)",
          "new_text": null,
          "old_line_content": "    in = ngx_quic_read_buffer(pc, &qs->recv, size);",
          "new_line_content": "        qs->recv_state = NGX_QUIC_STREAM_RECV_RESET_READ;",
          "content_same": false
        },
        {
          "line": 1345,
          "old_api": "ngx_quic_update_max_stream_data",
          "new_api": null,
          "old_text": "ngx_quic_update_max_stream_data(qs)",
          "new_text": null,
          "old_line_content": "    return ngx_quic_update_max_stream_data(qs);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 838,
          "old_api": "ngx_cpymem",
          "new_api": null,
          "old_text": "ngx_cpymem(buf, b->pos, b->last - b->pos)",
          "new_text": null,
          "old_line_content": "        buf = ngx_cpymem(buf, b->pos, b->last - b->pos);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 841,
          "old_api": "ngx_quic_free_chain",
          "new_api": null,
          "old_text": "ngx_quic_free_chain(pc, in)",
          "new_text": null,
          "old_line_content": "    ngx_quic_free_chain(pc, in);",
          "new_line_content": "        return NGX_ERROR;",
          "content_same": false
        },
        {
          "line": 1365,
          "old_api": "ngx_quic_get_stream",
          "new_api": null,
          "old_text": "ngx_quic_get_stream(c, f->id)",
          "new_text": null,
          "old_line_content": "    qs = ngx_quic_get_stream(c, f->id);",
          "new_line_content": "    ngx_quic_connection_t  *qc;",
          "content_same": false
        },
        {
          "line": 857,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                       \"quic stream id:0x%xL recv() not ready\", qs->id)",
          "new_text": null,
          "old_line_content": "        ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "        if (qs->recv_state == NGX_QUIC_STREAM_RECV_DATA_RECVD",
          "content_same": false
        },
        {
          "line": 862,
          "old_api": "ngx_log_debug2",
          "new_api": null,
          "old_text": "ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic stream id:0x%xL recv len:%z\", qs->id, len)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 865,
          "old_api": "ngx_quic_update_flow",
          "new_api": null,
          "old_text": "ngx_quic_update_flow(qs, qs->recv_offset + len)",
          "new_text": null,
          "old_line_content": "    if (ngx_quic_update_flow(qs, qs->recv_offset + len) != NGX_OK) {",
          "new_line_content": "            return 0;",
          "content_same": false
        },
        {
          "line": 1387,
          "old_api": "ngx_quic_stream_flush",
          "new_api": null,
          "old_text": "ngx_quic_stream_flush(qs)",
          "new_text": null,
          "old_line_content": "    return ngx_quic_stream_flush(qs);",
          "new_line_content": "        return NGX_OK;",
          "content_same": false
        },
        {
          "line": 879,
          "old_api": "ngx_memzero",
          "new_api": null,
          "old_text": "ngx_memzero(&b, sizeof(ngx_buf_t))",
          "new_text": null,
          "old_line_content": "    ngx_memzero(&b, sizeof(ngx_buf_t));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1399,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 888,
          "old_api": "ngx_quic_stream_send_chain",
          "new_api": null,
          "old_text": "ngx_quic_stream_send_chain(c, &cl, 0)",
          "new_text": null,
          "old_line_content": "    if (ngx_quic_stream_send_chain(c, &cl, 0) == NGX_CHAIN_ERROR) {",
          "new_line_content": "    ngx_chain_t  cl;",
          "content_same": false
        },
        {
          "line": 1408,
          "old_api": "ngx_quic_get_stream",
          "new_api": null,
          "old_text": "ngx_quic_get_stream(c, f->id)",
          "new_text": null,
          "old_line_content": "    qs = ngx_quic_get_stream(c, f->id);",
          "new_line_content": "    ngx_quic_connection_t  *qc;",
          "content_same": false
        },
        {
          "line": 911,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(pc)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(pc);",
          "new_line_content": "static ngx_chain_t *",
          "content_same": false
        },
        {
          "line": 1426,
          "old_api": "ngx_quic_control_flow",
          "new_api": null,
          "old_text": "ngx_quic_control_flow(qs, f->final_size)",
          "new_text": null,
          "old_line_content": "    if (ngx_quic_control_flow(qs, f->final_size) != NGX_OK) {",
          "new_line_content": "        return NGX_OK;",
          "content_same": false
        },
        {
          "line": 1444,
          "old_api": "ngx_quic_update_flow",
          "new_api": null,
          "old_text": "ngx_quic_update_flow(qs, qs->recv_final_size)",
          "new_text": null,
          "old_line_content": "    if (ngx_quic_update_flow(qs, qs->recv_final_size) != NGX_OK) {",
          "new_line_content": "        qc->error = NGX_QUIC_ERR_FINAL_SIZE_ERROR;",
          "content_same": false
        },
        {
          "line": 936,
          "old_api": "ngx_quic_write_buffer",
          "new_api": null,
          "old_text": "ngx_quic_write_buffer(pc, &qs->send, in, limit, qs->sent)",
          "new_text": null,
          "old_line_content": "    in = ngx_quic_write_buffer(pc, &qs->send, in, limit, qs->sent);",
          "new_line_content": "    if (flow == 0) {",
          "content_same": false
        },
        {
          "line": 1449,
          "old_api": "ngx_quic_close_stream",
          "new_api": null,
          "old_text": "ngx_quic_close_stream(qs)",
          "new_text": null,
          "old_line_content": "        return ngx_quic_close_stream(qs);",
          "new_line_content": "        qc->error = NGX_QUIC_ERR_FINAL_SIZE_ERROR;",
          "content_same": false
        },
        {
          "line": 950,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic send_chain sent:%uL\", n)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 953,
          "old_api": "ngx_quic_stream_flush",
          "new_api": null,
          "old_text": "ngx_quic_stream_flush(qs)",
          "new_text": null,
          "old_line_content": "    if (ngx_quic_stream_flush(qs) != NGX_OK) {",
          "new_line_content": "    c->sent += n;",
          "content_same": false
        },
        {
          "line": 1468,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    return NGX_OK;",
          "content_same": false
        },
        {
          "line": 1477,
          "old_api": "ngx_quic_get_stream",
          "new_api": null,
          "old_text": "ngx_quic_get_stream(c, f->id)",
          "new_text": null,
          "old_line_content": "    qs = ngx_quic_get_stream(c, f->id);",
          "new_line_content": "    ngx_quic_connection_t  *qc;",
          "content_same": false
        },
        {
          "line": 1487,
          "old_api": "ngx_quic_do_reset_stream",
          "new_api": null,
          "old_text": "ngx_quic_do_reset_stream(qs, f->error_code)",
          "new_text": null,
          "old_line_content": "    if (ngx_quic_do_reset_stream(qs, f->error_code) != NGX_OK) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 976,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(pc)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(pc);",
          "new_line_content": "    ngx_uint_t              last;",
          "content_same": false
        },
        {
          "line": 1492,
          "old_api": "ngx_quic_close_stream",
          "new_api": null,
          "old_text": "ngx_quic_close_stream(qs)",
          "new_text": null,
          "old_line_content": "        return ngx_quic_close_stream(qs);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 982,
          "old_api": "ngx_min",
          "new_api": null,
          "old_text": "ngx_min(qc->streams.send_max_data - qc->streams.send_offset,\n                    qs->send_max_data - qs->send_offset)",
          "new_text": null,
          "old_line_content": "    limit = ngx_min(qc->streams.send_max_data - qc->streams.send_offset,",
          "new_line_content": "    if (qs->send_state != NGX_QUIC_STREAM_SEND_SEND) {",
          "content_same": false
        },
        {
          "line": 1495,
          "old_api": "ngx_quic_set_event",
          "new_api": null,
          "old_text": "ngx_quic_set_event(qs->connection->write)",
          "new_text": null,
          "old_line_content": "    ngx_quic_set_event(qs->connection->write);",
          "new_line_content": "        return NGX_OK;",
          "content_same": false
        },
        {
          "line": 985,
          "old_api": "ngx_log_debug2",
          "new_api": null,
          "old_text": "ngx_log_debug2(NGX_LOG_DEBUG_EVENT, pc->log, 0,\n                   \"quic stream id:0x%xL flush limit:%O\", qs->id, limit)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug2(NGX_LOG_DEBUG_EVENT, pc->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 990,
          "old_api": "ngx_quic_read_buffer",
          "new_api": null,
          "old_text": "ngx_quic_read_buffer(pc, &qs->send, limit)",
          "new_text": null,
          "old_line_content": "    out = ngx_quic_read_buffer(pc, &qs->send, limit);",
          "new_line_content": "        qc->streams.send_max_data = qc->ctp.initial_max_data;",
          "content_same": false
        },
        {
          "line": 1507,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1513,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                           \"quic max_streams_bidi:%uL\", f->limit)",
          "new_text": null,
          "old_line_content": "            ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "ngx_quic_handle_max_streams_frame(ngx_connection_t *c,",
          "content_same": false
        },
        {
          "line": 493,
          "old_api": "ngx_quic_get_connection",
          "new_api": null,
          "old_text": "ngx_quic_get_connection(c)",
          "new_text": null,
          "old_line_content": "    qc = ngx_quic_get_connection(c);",
          "new_line_content": "    return qs;",
          "content_same": false
        },
        {
          "line": 1009,
          "old_api": "ngx_quic_alloc_frame",
          "new_api": null,
          "old_text": "ngx_quic_alloc_frame(pc)",
          "new_text": null,
          "old_line_content": "    frame = ngx_quic_alloc_frame(pc);",
          "new_line_content": "    if (qs->send_final_size != (uint64_t) -1",
          "content_same": false
        },
        {
          "line": 1521,
          "old_api": "ngx_log_debug1",
          "new_api": null,
          "old_text": "ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                           \"quic max_streams_uni:%uL\", f->limit)",
          "new_text": null,
          "old_line_content": "            ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "        if (qc->streams.server_max_streams_bidi < f->limit) {",
          "content_same": false
        },
        {
          "line": 503,
          "old_api": "ngx_log_debug2",
          "new_api": null,
          "old_text": "ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,\n                   \"quic stream id:0x%xL reject err:0x%xL\", id, code)",
          "new_text": null,
          "old_line_content": "    ngx_log_debug2(NGX_LOG_DEBUG_EVENT, c->log, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 506,
          "old_api": "ngx_quic_alloc_frame",
          "new_api": null,
          "old_text": "ngx_quic_alloc_frame(c)",
          "new_text": null,
          "old_line_content": "    frame = ngx_quic_alloc_frame(c);",
          "new_line_content": "    code = (id & NGX_QUIC_STREAM_UNIDIRECTIONAL)",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 13,
      "total_additions": 134,
      "total_deletions": 132,
      "total_api_changes": 279
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 11,
        "api_related_lines": 279,
        "non_api_lines": 9,
        "non_api_line_numbers": [
          480,
          481,
          482,
          485,
          475,
          476,
          477,
          478,
          479
        ]
      }
    },
    "api_calls_before": 186,
    "api_calls_after": 188,
    "diff_info": {
      "added_lines": 11,
      "removed_lines": 0,
      "total_diff_lines": 23
    }
  }
}
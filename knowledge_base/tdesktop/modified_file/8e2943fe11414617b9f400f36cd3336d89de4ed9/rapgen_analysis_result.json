{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tdesktop/modified_file/8e2943fe11414617b9f400f36cd3336d89de4ed9",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tdesktop/modified_file/8e2943fe11414617b9f400f36cd3336d89de4ed9/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tdesktop/modified_file/8e2943fe11414617b9f400f36cd3336d89de4ed9/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tdesktop/modified_file/8e2943fe11414617b9f400f36cd3336d89de4ed9/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 134,
          "old_api": "current",
          "new_api": "animating",
          "old_text": "a_phAlpha.current()",
          "new_text": "animating()",
          "old_line_content": "\t\tp.setOpacity(a_phAlpha.current());",
          "new_line_content": "\tif (animating()) {",
          "content_same": false
        },
        {
          "line": 139,
          "old_api": "rect",
          "new_api": "save",
          "old_text": "rect()",
          "new_text": "p.save()",
          "old_line_content": "\t\tp.setClipRect(rect());",
          "new_line_content": "\t\tp.save();",
          "content_same": false
        },
        {
          "line": 140,
          "old_api": "bottom",
          "new_api": "setClipRect",
          "old_text": "_st.textMrg.bottom()",
          "new_text": "p.setClipRect(r)",
          "old_line_content": "\t\tQRect phRect(_st.textMrg.left() - _fakeMargin + _st.phPos.x() + a_phLeft.current(), _st.textMrg.top() - _fakeMargin + _st.phPos.y(), width() - _st.textMrg.left() - _st.textMrg.right(), height() - _st.textMrg.top() - _st.textMrg.bottom());",
          "new_line_content": "\t\tp.setClipRect(r);",
          "content_same": false
        },
        {
          "line": 141,
          "old_api": "setFont",
          "new_api": "bottom",
          "old_text": "p.setFont(_st.font->f)",
          "new_text": "_st.textMrg.bottom()",
          "old_line_content": "\t\tp.setFont(_st.font->f);",
          "new_line_content": "\t\tQRect phRect(_st.textMrg.left() - _fakeMargin + _st.phPos.x() + a_phLeft.current(), _st.textMrg.top() - _fakeMargin + _st.phPos.y(), width() - _st.textMrg.left() - _st.textMrg.right(), height() - _st.textMrg.top() - _st.textMrg.bottom());",
          "content_same": false
        },
        {
          "line": 142,
          "old_api": "current",
          "new_api": "setFont",
          "old_text": "a_phColor.current()",
          "new_text": "p.setFont(_st.font->f)",
          "old_line_content": "\t\tp.setPen(a_phColor.current());",
          "new_line_content": "\t\tp.setFont(_st.font->f);",
          "content_same": false
        },
        {
          "line": 143,
          "old_api": "QTextOption",
          "new_api": "current",
          "old_text": "QTextOption(_st.phAlign)",
          "new_text": "a_phColor.current()",
          "old_line_content": "\t\tp.drawText(phRect, _ph, QTextOption(_st.phAlign));",
          "new_line_content": "\t\tp.setPen(a_phColor.current());",
          "content_same": false
        },
        {
          "line": 144,
          "old_api": "restore",
          "new_api": "QTextOption",
          "old_text": "p.restore()",
          "new_text": "QTextOption(_st.phAlign)",
          "old_line_content": "\t\tp.restore();",
          "new_line_content": "\t\tp.drawText(phRect, _ph, QTextOption(_st.phAlign));",
          "content_same": false
        },
        {
          "line": 151,
          "old_api": "anim::start(this)",
          "new_api": "start",
          "old_text": "anim::start(this)",
          "new_text": "a_phColor.start(_st.phFocusColor->c)",
          "old_line_content": "\tanim::start(this);",
          "new_line_content": "\ta_phColor.start(_st.phFocusColor->c);",
          "content_same": false
        },
        {
          "line": 152,
          "old_api": "QTextEdit::focusInEvent(e)",
          "new_api": "anim::start(this)",
          "old_text": "QTextEdit::focusInEvent(e)",
          "new_text": "anim::start(this)",
          "old_line_content": "\tQTextEdit::focusInEvent(e);",
          "new_line_content": "\tanim::start(this);",
          "content_same": false
        },
        {
          "line": 157,
          "old_api": "anim::start(this)",
          "new_api": "start",
          "old_text": "anim::start(this)",
          "new_text": "a_phColor.start(_st.phColor->c)",
          "old_line_content": "\tanim::start(this);",
          "new_line_content": "\ta_phColor.start(_st.phColor->c);",
          "content_same": false
        },
        {
          "line": 158,
          "old_api": "QTextEdit::focusOutEvent(e)",
          "new_api": "anim::start(this)",
          "old_text": "QTextEdit::focusOutEvent(e)",
          "new_text": "anim::start(this)",
          "old_line_content": "\tQTextEdit::focusOutEvent(e);",
          "new_line_content": "\tanim::start(this);",
          "content_same": false
        },
        {
          "line": 176,
          "old_api": "charFormat",
          "new_api": "isEmpty",
          "old_text": "fragment.charFormat()",
          "new_text": "text.isEmpty()",
          "old_line_content": "\t\tQTextCharFormat format = fragment.charFormat();",
          "new_line_content": "\tif (!text.isEmpty()) {",
          "content_same": false
        },
        {
          "line": 177,
          "old_api": "name",
          "new_api": "charFormat",
          "old_text": "static_cast<QTextImageFormat*>(&format)->name()",
          "new_text": "fragment.charFormat()",
          "old_line_content": "\t\tQString imageName = static_cast<QTextImageFormat*>(&format)->name();",
          "new_line_content": "\t\tQTextCharFormat format = fragment.charFormat();",
          "content_same": false
        },
        {
          "line": 178,
          "old_api": "qstr",
          "new_api": "name",
          "old_text": "qstr(\"emoji://e.\")",
          "new_text": "static_cast<QTextImageFormat*>(&format)->name()",
          "old_line_content": "\t\tif (imageName.startsWith(qstr(\"emoji://e.\"))) {",
          "new_line_content": "\t\tQString imageName = static_cast<QTextImageFormat*>(&format)->name();",
          "content_same": false
        },
        {
          "line": 179,
          "old_api": "emojiFromUrl",
          "new_api": "qstr",
          "old_text": "emojiFromUrl(imageName)",
          "new_text": "qstr(\"emoji://e.\")",
          "old_line_content": "\t\t\treturn emojiFromUrl(imageName);",
          "new_line_content": "\t\tif (imageName.startsWith(qstr(\"emoji://e.\"))) {",
          "content_same": false
        },
        {
          "line": 187,
          "old_api": "anchor",
          "new_api": "position",
          "old_text": "textCursor().anchor()",
          "new_text": "textCursor().position()",
          "old_line_content": "\tif (textCursor().anchor() != pos) return;",
          "new_line_content": "\tint32 pos = textCursor().position();",
          "content_same": false
        },
        {
          "line": 191,
          "old_api": "atEnd",
          "new_api": "findBlock",
          "old_text": "iter.atEnd()",
          "new_text": "doc->findBlock(pos)",
          "old_line_content": "\tfor (QTextBlock::Iterator iter = block.begin(); !iter.atEnd(); ++iter) {",
          "new_line_content": "\tQTextBlock block = doc->findBlock(pos);",
          "content_same": false
        },
        {
          "line": 192,
          "old_api": "fragment",
          "new_api": "atEnd",
          "old_text": "iter.fragment()",
          "new_text": "iter.atEnd()",
          "old_line_content": "\t\tQTextFragment fr(iter.fragment());",
          "new_line_content": "\tfor (QTextBlock::Iterator iter = block.begin(); !iter.atEnd(); ++iter) {",
          "content_same": false
        },
        {
          "line": 193,
          "old_api": "isValid",
          "new_api": "fragment",
          "old_text": "fr.isValid()",
          "new_text": "iter.fragment()",
          "old_line_content": "\t\tif (!fr.isValid()) continue;",
          "new_line_content": "\t\tQTextFragment fr(iter.fragment());",
          "content_same": false
        },
        {
          "line": 199,
          "old_api": "isImageFormat",
          "new_api": "charFormat",
          "old_text": "f.isImageFormat()",
          "new_text": "fr.charFormat()",
          "old_line_content": "\t\tif (f.isImageFormat()) continue;",
          "new_line_content": "\t\tQTextCharFormat f = fr.charFormat();",
          "content_same": false
        },
        {
          "line": 206,
          "old_api": "mid",
          "new_api": "at",
          "old_text": "t.mid(i - 1, pos - p - i + 1)",
          "new_text": "t.at(i - 2)",
          "old_line_content": "\t\t\t\t\tstart = t.mid(i - 1, pos - p - i + 1);",
          "new_line_content": "\t\t\t\tif ((pos - p - i < 1 || t.at(i).isLetter()) && (i < 2 || !(t.at(i - 2).isLetterOrNumber() || t.at(i - 2) == '_'))) {",
          "content_same": false
        },
        {
          "line": 207,
          "old_api": "at",
          "new_api": "mid",
          "old_text": "t.at(i - 2)",
          "new_text": "t.mid(i - 1, pos - p - i + 1)",
          "old_line_content": "\t\t\t\t} else if ((pos - p - i < 1 || t.at(i).isLetter()) && i > 2 && (t.at(i - 2).isLetterOrNumber() || t.at(i - 2) == '_') && !mentionInCommand) {",
          "new_line_content": "\t\t\t\t\tstart = t.mid(i - 1, pos - p - i + 1);",
          "content_same": false
        },
        {
          "line": 215,
          "old_api": "mid",
          "new_api": "at",
          "old_text": "t.mid(i - 1, pos - p - i + 1)",
          "new_text": "t.at(i - 2)",
          "old_line_content": "\t\t\t\t\tstart = t.mid(i - 1, pos - p - i + 1);",
          "new_line_content": "\t\t\t\tif (i < 2 || !(t.at(i - 2).isLetterOrNumber() || t.at(i - 2) == '_')) {",
          "content_same": false
        },
        {
          "line": 237,
          "old_api": "atEnd",
          "new_api": "findBlock",
          "old_text": "iter.atEnd()",
          "new_text": "doc->findBlock(pos)",
          "old_line_content": "\tfor (QTextBlock::Iterator iter = block.begin(); !iter.atEnd(); ++iter) {",
          "new_line_content": "\tQTextBlock block = doc->findBlock(pos);",
          "content_same": false
        },
        {
          "line": 238,
          "old_api": "fragment",
          "new_api": "atEnd",
          "old_text": "iter.fragment()",
          "new_text": "iter.atEnd()",
          "old_line_content": "\t\tQTextFragment fr(iter.fragment());",
          "new_line_content": "\tfor (QTextBlock::Iterator iter = block.begin(); !iter.atEnd(); ++iter) {",
          "content_same": false
        },
        {
          "line": 239,
          "old_api": "isValid",
          "new_api": "fragment",
          "old_text": "fr.isValid()",
          "new_text": "iter.fragment()",
          "old_line_content": "\t\tif (!fr.isValid()) continue;",
          "new_line_content": "\t\tQTextFragment fr(iter.fragment());",
          "content_same": false
        },
        {
          "line": 245,
          "old_api": "isImageFormat",
          "new_api": "charFormat",
          "old_text": "f.isImageFormat()",
          "new_text": "fr.charFormat()",
          "old_line_content": "\t\tif (f.isImageFormat()) continue;",
          "new_line_content": "\t\tQTextCharFormat f = fr.charFormat();",
          "content_same": false
        },
        {
          "line": 252,
          "old_api": "setPosition",
          "new_api": "at",
          "old_text": "c.setPosition(p + i - 1, QTextCursor::MoveAnchor)",
          "new_text": "t.at(i - 2)",
          "old_line_content": "\t\t\t\t\tc.setPosition(p + i - 1, QTextCursor::MoveAnchor);",
          "new_line_content": "\t\t\t\tif ((i == pos - p || t.at(i).isLetter() || t.at(i - 1) == '#') && (i < 2 || !(t.at(i - 2).isLetterOrNumber() || t.at(i - 2) == '_'))) {",
          "content_same": false
        },
        {
          "line": 255,
          "old_api": "at",
          "new_api": "size",
          "old_text": "str.at(till - p - i + 1).toLower()",
          "new_text": "str.size()",
          "old_line_content": "\t\t\t\t\t\tif (t.at(till - p).toLower() != str.at(till - p - i + 1).toLower()) {",
          "new_line_content": "\t\t\t\t\tfor (; (till < e) && (till - p - i + 1 < str.size()); ++till) {",
          "content_same": false
        },
        {
          "line": 263,
          "old_api": "insertText",
          "new_api": "setPosition",
          "old_text": "c.insertText(str + ' ')",
          "new_text": "c.setPosition(till, QTextCursor::KeepAnchor)",
          "old_line_content": "\t\t\t\t\tc.insertText(str + ' ');",
          "new_line_content": "\t\t\t\t\tc.setPosition(till, QTextCursor::KeepAnchor);",
          "content_same": false
        },
        {
          "line": 282,
          "old_api": "anchor",
          "new_api": "position",
          "old_text": "textCursor().anchor()",
          "new_text": "textCursor().position()",
          "old_line_content": "\tif (textCursor().anchor() != end) return;",
          "new_line_content": "\tint32 end = textCursor().position(), start = end - 1;",
          "content_same": false
        },
        {
          "line": 288,
          "old_api": "next",
          "new_api": "findBlock",
          "old_text": "till.next()",
          "new_text": "doc->findBlock(end)",
          "old_line_content": "\tif (till.isValid()) till = till.next();",
          "new_line_content": "\tQTextBlock from = doc->findBlock(start), till = doc->findBlock(end);",
          "content_same": false
        },
        {
          "line": 291,
          "old_api": "atEnd",
          "new_api": "next",
          "old_text": "iter.atEnd()",
          "new_text": "b.next()",
          "old_line_content": "\t\tfor (QTextBlock::Iterator iter = b.begin(); !iter.atEnd(); ++iter) {",
          "new_line_content": "\tfor (QTextBlock b = from; b != till; b = b.next()) {",
          "content_same": false
        },
        {
          "line": 292,
          "old_api": "fragment",
          "new_api": "atEnd",
          "old_text": "iter.fragment()",
          "new_text": "iter.atEnd()",
          "old_line_content": "\t\t\tQTextFragment fr(iter.fragment());",
          "new_line_content": "\t\tfor (QTextBlock::Iterator iter = b.begin(); !iter.atEnd(); ++iter) {",
          "content_same": false
        },
        {
          "line": 293,
          "old_api": "isValid",
          "new_api": "fragment",
          "old_text": "fr.isValid()",
          "new_text": "iter.fragment()",
          "old_line_content": "\t\t\tif (!fr.isValid()) continue;",
          "new_line_content": "\t\t\tQTextFragment fr(iter.fragment());",
          "content_same": false
        },
        {
          "line": 301,
          "old_api": "text",
          "new_api": "charFormat",
          "old_text": "fr.text()",
          "new_text": "fr.charFormat()",
          "old_line_content": "\t\t\tQString t(fr.text());",
          "new_line_content": "\t\t\tQTextCharFormat f = fr.charFormat();",
          "content_same": false
        },
        {
          "line": 308,
          "old_api": "name",
          "new_api": "at",
          "old_text": "static_cast<QTextImageFormat*>(&f)->name()",
          "new_text": "t.at(0).unicode()",
          "old_line_content": "\t\t\t\tQString imageName = static_cast<QTextImageFormat*>(&f)->name();",
          "new_line_content": "\t\t\tif (f.isImageFormat() && !t.isEmpty() && t.at(0).unicode() == QChar::ObjectReplacementCharacter) {",
          "content_same": false
        },
        {
          "line": 309,
          "old_api": "qstr",
          "new_api": "name",
          "old_text": "qstr(\"emoji://e.\")",
          "new_text": "static_cast<QTextImageFormat*>(&f)->name()",
          "old_line_content": "\t\t\t\tif (imageName.startsWith(qstr(\"emoji://e.\"))) {",
          "new_line_content": "\t\t\t\tQString imageName = static_cast<QTextImageFormat*>(&f)->name();",
          "content_same": false
        },
        {
          "line": 330,
          "old_api": "length",
          "new_api": "position",
          "old_text": "fragment.length()",
          "new_text": "fragment.position()",
          "old_line_content": "\t\tt.setPosition(fragment.position() + fragment.length(), QTextCursor::KeepAnchor);",
          "new_line_content": "\t\tt.setPosition(fragment.position());",
          "content_same": false
        },
        {
          "line": 331,
          "old_api": "removeSelectedText",
          "new_api": "length",
          "old_text": "t.removeSelectedText()",
          "new_text": "fragment.length()",
          "old_line_content": "\t\tt.removeSelectedText();",
          "new_line_content": "\t\tt.setPosition(fragment.position() + fragment.length(), QTextCursor::KeepAnchor);",
          "content_same": false
        },
        {
          "line": 332,
          "old_api": "setTextCursor",
          "new_api": "removeSelectedText",
          "old_text": "setTextCursor(t)",
          "new_text": "t.removeSelectedText()",
          "old_line_content": "\t\tsetTextCursor(t);",
          "new_line_content": "\t\tt.removeSelectedText();",
          "content_same": false
        },
        {
          "line": 344,
          "old_api": "next",
          "new_api": "findBlock",
          "old_text": "till.next()",
          "new_text": "doc->findBlock(end)",
          "old_line_content": "\tif (till.isValid()) till = till.next();",
          "new_line_content": "\tQTextBlock from = full ? doc->begin() : doc->findBlock(start), till = (end < 0) ? doc->end() : doc->findBlock(end);",
          "content_same": false
        },
        {
          "line": 348,
          "old_api": "length",
          "new_api": "next",
          "old_text": "b.length()",
          "new_text": "b.next()",
          "old_line_content": "\t\tpossibleLen += b.length();",
          "new_line_content": "\tfor (QTextBlock b = from; b != till; b = b.next()) {",
          "content_same": false
        },
        {
          "line": 357,
          "old_api": "atEnd",
          "new_api": "next",
          "old_text": "iter.atEnd()",
          "new_text": "b.next()",
          "old_line_content": "\t\tfor (QTextBlock::Iterator iter = b.begin(); !iter.atEnd(); ++iter) {",
          "new_line_content": "\tfor (QTextBlock b = from; b != till; b = b.next()) {",
          "content_same": false
        },
        {
          "line": 358,
          "old_api": "fragment",
          "new_api": "atEnd",
          "old_text": "iter.fragment()",
          "new_text": "iter.atEnd()",
          "old_line_content": "\t\t\tQTextFragment fragment(iter.fragment());",
          "new_line_content": "\t\tfor (QTextBlock::Iterator iter = b.begin(); !iter.atEnd(); ++iter) {",
          "content_same": false
        },
        {
          "line": 359,
          "old_api": "isValid",
          "new_api": "fragment",
          "old_text": "fragment.isValid()",
          "new_text": "iter.fragment()",
          "old_line_content": "\t\t\tif (!fragment.isValid()) continue;",
          "new_line_content": "\t\t\tQTextFragment fragment(iter.fragment());",
          "content_same": false
        },
        {
          "line": 392,
          "old_api": "name",
          "new_api": "isImageFormat",
          "old_text": "static_cast<QTextImageFormat*>(&f)->name()",
          "new_text": "f.isImageFormat()",
          "old_line_content": "\t\t\t\t\t\tQString imageName = static_cast<QTextImageFormat*>(&f)->name();",
          "new_line_content": "\t\t\t\t\tif (emojiText.isEmpty() && f.isImageFormat()) {",
          "content_same": false
        },
        {
          "line": 393,
          "old_api": "qstr",
          "new_api": "name",
          "old_text": "qstr(\"emoji://e.\")",
          "new_text": "static_cast<QTextImageFormat*>(&f)->name()",
          "old_line_content": "\t\t\t\t\t\tif (imageName.startsWith(qstr(\"emoji://e.\"))) {",
          "new_line_content": "\t\t\t\t\t\tQString imageName = static_cast<QTextImageFormat*>(&f)->name();",
          "content_same": false
        },
        {
          "line": 394,
          "old_api": "emojiFromUrl",
          "new_api": "qstr",
          "old_text": "emojiFromUrl(imageName)",
          "new_text": "qstr(\"emoji://e.\")",
          "old_line_content": "\t\t\t\t\t\t\tif (EmojiPtr emoji = emojiFromUrl(imageName)) {",
          "new_line_content": "\t\t\t\t\t\tif (imageName.startsWith(qstr(\"emoji://e.\"))) {",
          "content_same": false
        },
        {
          "line": 395,
          "old_api": "emojiString",
          "new_api": "emojiFromUrl",
          "old_text": "emojiString(emoji)",
          "new_text": "emojiFromUrl(imageName)",
          "old_line_content": "\t\t\t\t\t\t\t\temojiText = emojiString(emoji);",
          "new_line_content": "\t\t\t\t\t\t\tif (EmojiPtr emoji = emojiFromUrl(imageName)) {",
          "content_same": false
        },
        {
          "line": 420,
          "old_api": "fragment",
          "new_api": "atEnd",
          "old_text": "iter.fragment()",
          "new_text": "iter.atEnd()",
          "old_line_content": "\t\tQTextFragment fragment(iter.fragment());",
          "new_line_content": "\tfor (QTextBlock::Iterator iter = from.begin(); !iter.atEnd(); ++iter) {",
          "content_same": false
        },
        {
          "line": 421,
          "old_api": "isValid",
          "new_api": "fragment",
          "old_text": "fragment.isValid()",
          "new_text": "iter.fragment()",
          "old_line_content": "\t\tif (!fragment.isValid()) continue;",
          "new_line_content": "\t\tQTextFragment fragment(iter.fragment());",
          "content_same": false
        },
        {
          "line": 422,
          "old_api": "text",
          "new_api": "isValid",
          "old_text": "fragment.text().isEmpty()",
          "new_text": "fragment.isValid()",
          "old_line_content": "\t\tif (!fragment.text().isEmpty()) return true;",
          "new_line_content": "\t\tif (!fragment.isValid()) continue;",
          "content_same": false
        },
        {
          "line": 441,
          "old_api": "clear",
          "new_api": "isEmpty",
          "old_text": "_links.clear()",
          "new_text": "_links.isEmpty()",
          "old_line_content": "\t\t\t_links.clear();",
          "new_line_content": "\t\tif (!_links.isEmpty()) {",
          "content_same": false
        },
        {
          "line": 453,
          "old_api": "hasMatch",
          "new_api": "match",
          "old_text": "m.hasMatch()",
          "new_text": "reDomain().match(text, matchOffset)",
          "old_line_content": "\t\tif (!m.hasMatch()) break;",
          "new_line_content": "\t\tQRegularExpressionMatch m = reDomain().match(text, matchOffset);",
          "content_same": false
        },
        {
          "line": 464,
          "old_api": "mid",
          "new_api": "QChar",
          "old_text": "text.mid(offset, domainOffset - offset - 1)",
          "new_text": "QChar('@')",
          "old_line_content": "\t\t\tQString forMailName = text.mid(offset, domainOffset - offset - 1);",
          "new_line_content": "\t\tif (protocol.isEmpty() && domainOffset > offset + 1 && *(start + domainOffset - 1) == QChar('@')) {",
          "content_same": false
        },
        {
          "line": 465,
          "old_api": "match",
          "new_api": "mid",
          "old_text": "reMailName().match(forMailName)",
          "new_text": "text.mid(offset, domainOffset - offset - 1)",
          "old_line_content": "\t\t\tQRegularExpressionMatch mMailName = reMailName().match(forMailName);",
          "new_line_content": "\t\t\tQString forMailName = text.mid(offset, domainOffset - offset - 1);",
          "content_same": false
        },
        {
          "line": 466,
          "old_api": "hasMatch",
          "new_api": "match",
          "old_text": "mMailName.hasMatch()",
          "new_text": "reMailName().match(forMailName)",
          "old_line_content": "\t\t\tif (mMailName.hasMatch()) {",
          "new_line_content": "\t\t\tQRegularExpressionMatch mMailName = reMailName().match(forMailName);",
          "content_same": false
        },
        {
          "line": 467,
          "old_api": "capturedEnd",
          "new_api": "hasMatch",
          "old_text": "m.capturedEnd()",
          "new_text": "mMailName.hasMatch()",
          "old_line_content": "\t\t\t\toffset = matchOffset = m.capturedEnd();",
          "new_line_content": "\t\t\tif (mMailName.hasMatch()) {",
          "content_same": false
        },
        {
          "line": 481,
          "old_api": "chIsAlmostLinkEnd",
          "new_api": "chIsLinkEnd",
          "old_text": "chIsAlmostLinkEnd(ch)",
          "new_text": "chIsLinkEnd(ch)",
          "old_line_content": "\t\t\tif (chIsAlmostLinkEnd(ch)) {",
          "new_line_content": "\t\t\tif (chIsLinkEnd(ch)) break; // link finished",
          "content_same": false
        },
        {
          "line": 496,
          "old_api": "pop",
          "new_api": "isEmpty",
          "old_text": "parenth.pop()",
          "new_text": "parenth.isEmpty()",
          "old_line_content": "\t\t\t\tconst QChar *q = parenth.pop(), open(*q);",
          "new_line_content": "\t\t\t\tif (parenth.isEmpty()) break;",
          "content_same": false
        },
        {
          "line": 524,
          "old_api": "mid",
          "new_api": "cend",
          "old_text": "text.mid(i->first + 1, i->second - 2)",
          "new_text": "_links.cend()",
          "old_line_content": "\t\t\tresult.push_back(text.mid(i->first + 1, i->second - 2));",
          "new_line_content": "\t\tfor (LinkRanges::const_iterator i = _links.cbegin(), e = _links.cend(); i != e; ++i) {",
          "content_same": false
        },
        {
          "line": 540,
          "old_api": "emojiKey",
          "new_api": "cIntRetinaFactor",
          "old_text": "emojiKey(emoji)",
          "new_text": "cIntRetinaFactor()",
          "old_line_content": "\timageFormat.setName(qsl(\"emoji://e.\") + QString::number(emojiKey(emoji), 16));",
          "new_line_content": "\timageFormat.setHeight(eh / cIntRetinaFactor());",
          "content_same": false
        },
        {
          "line": 541,
          "old_api": "setVerticalAlignment",
          "new_api": "emojiKey",
          "old_text": "imageFormat.setVerticalAlignment(QTextCharFormat::AlignBaseline)",
          "new_text": "emojiKey(emoji)",
          "old_line_content": "\timageFormat.setVerticalAlignment(QTextCharFormat::AlignBaseline);",
          "new_line_content": "\timageFormat.setName(qsl(\"emoji://e.\") + QString::number(emojiKey(emoji), 16));",
          "content_same": false
        },
        {
          "line": 549,
          "old_api": "qstr",
          "new_api": "toDisplayString",
          "old_text": "qstr(\"emoji://e.\")",
          "new_text": "name.toDisplayString()",
          "old_line_content": "\tif (imageName.startsWith(qstr(\"emoji://e.\"))) {",
          "new_line_content": "\tQString imageName = name.toDisplayString();",
          "content_same": false
        },
        {
          "line": 550,
          "old_api": "emojiFromUrl",
          "new_api": "qstr",
          "old_text": "emojiFromUrl(imageName)",
          "new_text": "qstr(\"emoji://e.\")",
          "old_line_content": "\t\tif (EmojiPtr emoji = emojiFromUrl(imageName)) {",
          "new_line_content": "\tif (imageName.startsWith(qstr(\"emoji://e.\"))) {",
          "content_same": false
        },
        {
          "line": 551,
          "old_api": "App::emojiSingle(emoji, _st.font->height)",
          "new_api": "emojiFromUrl",
          "old_text": "App::emojiSingle(emoji, _st.font->height)",
          "new_text": "emojiFromUrl(imageName)",
          "old_line_content": "\t\t\treturn QVariant(App::emojiSingle(emoji, _st.font->height));",
          "new_line_content": "\t\tif (EmojiPtr emoji = emojiFromUrl(imageName)) {",
          "content_same": false
        },
        {
          "line": 566,
          "old_api": "next",
          "new_api": "findBlock",
          "old_text": "till.next()",
          "new_text": "doc->findBlock(end)",
          "old_line_content": "\t\tif (till.isValid()) till = till.next();",
          "new_line_content": "\t\tQTextBlock from = doc->findBlock(start), till = doc->findBlock(end);",
          "content_same": false
        },
        {
          "line": 569,
          "old_api": "atEnd",
          "new_api": "next",
          "old_text": "iter.atEnd()",
          "new_text": "b.next()",
          "old_line_content": "\t\t\tfor (QTextBlock::Iterator iter = b.begin(); !iter.atEnd(); ++iter) {",
          "new_line_content": "\t\tfor (QTextBlock b = from; b != till; b = b.next()) {",
          "content_same": false
        },
        {
          "line": 570,
          "old_api": "fragment",
          "new_api": "atEnd",
          "old_text": "iter.fragment()",
          "new_text": "iter.atEnd()",
          "old_line_content": "\t\t\t\tQTextFragment fragment(iter.fragment());",
          "new_line_content": "\t\t\tfor (QTextBlock::Iterator iter = b.begin(); !iter.atEnd(); ++iter) {",
          "content_same": false
        },
        {
          "line": 571,
          "old_api": "isValid",
          "new_api": "fragment",
          "old_text": "fragment.isValid()",
          "new_text": "iter.fragment()",
          "old_line_content": "\t\t\t\tif (!fragment.isValid()) continue;",
          "new_line_content": "\t\t\t\tQTextFragment fragment(iter.fragment());",
          "content_same": false
        },
        {
          "line": 579,
          "old_api": "size",
          "new_api": "text",
          "old_text": "t.size()",
          "new_text": "fragment.text()",
          "old_line_content": "\t\t\t\tconst QChar *ch = t.constData(), *e = ch + t.size();",
          "new_line_content": "\t\t\t\tQString t(fragment.text());",
          "content_same": false
        },
        {
          "line": 594,
          "old_api": "QSizeF",
          "new_api": "isNull",
          "old_text": "QSizeF(0, 0)",
          "new_text": "document()->pageSize().isNull()",
          "old_line_content": "\t\t\t\tdocument()->setPageSize(QSizeF(0, 0));",
          "new_line_content": "\t\t\tif (!document()->pageSize().isNull()) {",
          "content_same": false
        },
        {
          "line": 598,
          "old_api": "setPosition",
          "new_api": "docHandle",
          "old_text": "c.setPosition(emojiPosition + emojiLen, QTextCursor::KeepAnchor)",
          "new_text": "doc->docHandle()",
          "old_line_content": "\t\t\tc.setPosition(emojiPosition + emojiLen, QTextCursor::KeepAnchor);",
          "new_line_content": "\t\t\tQTextCursor c(doc->docHandle(), emojiPosition);",
          "content_same": false
        },
        {
          "line": 599,
          "old_api": "position",
          "new_api": "setPosition",
          "old_text": "c.position()",
          "new_text": "c.setPosition(emojiPosition + emojiLen, QTextCursor::KeepAnchor)",
          "old_line_content": "\t\t\tint32 removedUpto = c.position();",
          "new_line_content": "\t\t\tc.setPosition(emojiPosition + emojiLen, QTextCursor::KeepAnchor);",
          "content_same": false
        },
        {
          "line": 663,
          "old_api": "availableRedoSteps",
          "new_api": "isEmpty",
          "old_text": "document()->availableRedoSteps()",
          "new_text": "_insertions.isEmpty()",
          "old_line_content": "\t\tif (document()->availableRedoSteps() > 0) {",
          "new_line_content": "\tif (!_insertions.isEmpty()) {",
          "content_same": false
        },
        {
          "line": 664,
          "old_api": "clear",
          "new_api": "availableRedoSteps",
          "old_text": "_insertions.clear()",
          "new_text": "document()->availableRedoSteps()",
          "old_line_content": "\t\t\t_insertions.clear();",
          "new_line_content": "\t\tif (document()->availableRedoSteps() > 0) {",
          "content_same": false
        },
        {
          "line": 671,
          "old_api": "pop_front",
          "new_api": "front",
          "old_text": "_insertions.pop_front()",
          "new_text": "_insertions.front()",
          "old_line_content": "\t\t\t\t_insertions.pop_front();",
          "new_line_content": "\t\t\t\tInsertion i = _insertions.front();",
          "content_same": false
        },
        {
          "line": 678,
          "old_api": "setPageSize",
          "new_api": "pageSize",
          "old_text": "document()->setPageSize(s)",
          "new_text": "document()->pageSize()",
          "old_line_content": "\t\t\t\tdocument()->setPageSize(s);",
          "new_line_content": "\t\t\tif (document()->pageSize() != s) {",
          "content_same": false
        },
        {
          "line": 690,
          "old_api": "updateGlobalMenu",
          "new_api": "updatePlaceholder",
          "old_text": "App::wnd()->updateGlobalMenu()",
          "new_text": "updatePlaceholder()",
          "old_line_content": "\tif (App::wnd()) App::wnd()->updateGlobalMenu();",
          "new_line_content": "\tupdatePlaceholder();",
          "content_same": false
        },
        {
          "line": 711,
          "old_api": "current",
          "new_api": "finish",
          "old_text": "a_phLeft.current()",
          "new_text": "a_phColor.finish()",
          "old_line_content": "\t\ta_phLeft = anim::ivalue(a_phLeft.current());",
          "new_line_content": "\t\ta_phColor.finish();",
          "content_same": false
        },
        {
          "line": 733,
          "old_api": "anim::start(this)",
          "new_api": "start",
          "old_text": "anim::start(this)",
          "new_text": "a_phAlpha.start(vis ? 1 : 0)",
          "old_line_content": "\tanim::start(this);",
          "new_line_content": "\ta_phAlpha.start(vis ? 1 : 0);",
          "content_same": false
        },
        {
          "line": 751,
          "old_api": "cCtrlEnter",
          "new_api": "testFlag",
          "old_text": "cCtrlEnter()",
          "new_text": "e->modifiers().testFlag(Qt::AltModifier)",
          "old_line_content": "\tbool ctrl = e->modifiers().testFlag(Qt::ControlModifier) || e->modifiers().testFlag(Qt::MetaModifier), ctrlGood = (ctrl && cCtrlEnter()) || (!ctrl && !shift && !cCtrlEnter()) || (ctrl && shift);",
          "new_line_content": "\tbool macmeta = (cPlatform() == dbipMac) && e->modifiers().testFlag(Qt::ControlModifier) && !e->modifiers().testFlag(Qt::MetaModifier) && !e->modifiers().testFlag(Qt::AltModifier);",
          "content_same": false
        },
        {
          "line": 752,
          "old_api": "key",
          "new_api": "cCtrlEnter",
          "old_text": "e->key()",
          "new_text": "cCtrlEnter()",
          "old_line_content": "\tbool enter = (e->key() == Qt::Key_Enter || e->key() == Qt::Key_Return);",
          "new_line_content": "\tbool ctrl = e->modifiers().testFlag(Qt::ControlModifier) || e->modifiers().testFlag(Qt::MetaModifier), ctrlGood = (ctrl && cCtrlEnter()) || (!ctrl && !shift && !cCtrlEnter()) || (ctrl && shift);",
          "content_same": false
        },
        {
          "line": 757,
          "old_api": "position",
          "new_api": "movePosition",
          "old_text": "start.position()",
          "new_text": "start.movePosition(QTextCursor::StartOfLine)",
          "old_line_content": "\t\ttc.setPosition(start.position(), QTextCursor::KeepAnchor);",
          "new_line_content": "\t\tstart.movePosition(QTextCursor::StartOfLine);",
          "content_same": false
        },
        {
          "line": 758,
          "old_api": "removeSelectedText",
          "new_api": "position",
          "old_text": "tc.removeSelectedText()",
          "new_text": "start.position()",
          "old_line_content": "\t\ttc.removeSelectedText();",
          "new_line_content": "\t\ttc.setPosition(start.position(), QTextCursor::KeepAnchor);",
          "content_same": false
        },
        {
          "line": 776,
          "old_api": "size",
          "new_api": "text",
          "old_text": "t.size()",
          "new_text": "e->text()",
          "old_line_content": "\t\tif (!t.isEmpty() && t.size() < 3) {",
          "new_line_content": "\t\tQString t(e->text());",
          "content_same": false
        },
        {
          "line": 777,
          "old_api": "at",
          "new_api": "size",
          "old_text": "t.at(0)",
          "new_text": "t.size()",
          "old_line_content": "\t\t\tif (t.at(0) == '\\n' || t.at(0) == '\\r' || t.at(0).isSpace() || t.at(0) == QChar::LineSeparator) {",
          "new_line_content": "\t\tif (!t.isEmpty() && t.size() < 3) {",
          "content_same": false
        },
        {
          "line": 782,
          "old_api": "textCursor",
          "new_api": "QTextEdit::keyPressEvent(e)",
          "old_text": "textCursor()",
          "new_text": "QTextEdit::keyPressEvent(e)",
          "old_line_content": "\t\tif (tc == textCursor()) {",
          "new_line_content": "\t\tQTextEdit::keyPressEvent(e);",
          "content_same": false
        },
        {
          "line": 785,
          "old_api": "testFlag",
          "new_api": "key",
          "old_text": "e->modifiers().testFlag(Qt::ShiftModifier)",
          "new_text": "e->key()",
          "old_line_content": "\t\t\t\ttc.movePosition(QTextCursor::Start, e->modifiers().testFlag(Qt::ShiftModifier) ? QTextCursor::KeepAnchor : QTextCursor::MoveAnchor);",
          "new_line_content": "\t\t\tif (e->key() == Qt::Key_PageUp || e->key() == Qt::Key_Up) {",
          "content_same": false
        },
        {
          "line": 788,
          "old_api": "testFlag",
          "new_api": "key",
          "old_text": "e->modifiers().testFlag(Qt::ShiftModifier)",
          "new_text": "e->key()",
          "old_line_content": "\t\t\t\ttc.movePosition(QTextCursor::End, e->modifiers().testFlag(Qt::ShiftModifier) ? QTextCursor::KeepAnchor : QTextCursor::MoveAnchor);",
          "new_line_content": "\t\t\t} else if (e->key() == Qt::Key_PageDown || e->key() == Qt::Key_Down) {",
          "content_same": false
        },
        {
          "line": 793,
          "old_api": "ignore",
          "new_api": "textCursor",
          "old_text": "e->ignore()",
          "new_text": "textCursor()",
          "old_line_content": "\t\t\t\t\te->ignore();",
          "new_line_content": "\t\t\t\tif (tc == textCursor()) {",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": "QTextEdit::resizeEvent(e)",
          "new_api": "x",
          "old_text": "QTextEdit::resizeEvent(e)",
          "new_text": "_st.phPos.x()",
          "old_line_content": "\tQTextEdit::resizeEvent(e);",
          "new_line_content": "\t_phelided = _st.font->m.elidedText(_ph, Qt::ElideRight, width() - _st.textMrg.left() - _st.textMrg.right() - _st.phPos.x() - 1);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 522,
          "old_api": null,
          "new_api": "isEmpty",
          "old_text": null,
          "new_text": "_links.isEmpty()",
          "old_line_content": "\t\tQString text(toPlainText());",
          "new_line_content": "\tif (!_links.isEmpty()) {",
          "content_same": false
        },
        {
          "line": 525,
          "old_api": null,
          "new_api": "mid",
          "old_text": null,
          "new_text": "text.mid(i->first + 1, i->second - 2)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tresult.push_back(text.mid(i->first + 1, i->second - 2));",
          "content_same": false
        },
        {
          "line": 532,
          "old_api": null,
          "new_api": "QTextEdit::insertFromMimeData(source)",
          "old_text": null,
          "new_text": "QTextEdit::insertFromMimeData(source)",
          "old_line_content": "\temit spacedReturnedPasted();",
          "new_line_content": "\tQTextEdit::insertFromMimeData(source);",
          "content_same": false
        },
        {
          "line": 542,
          "old_api": null,
          "new_api": "setVerticalAlignment",
          "old_text": null,
          "new_text": "imageFormat.setVerticalAlignment(QTextCharFormat::AlignBaseline)",
          "old_line_content": "",
          "new_line_content": "\timageFormat.setVerticalAlignment(QTextCharFormat::AlignBaseline);",
          "content_same": false
        },
        {
          "line": 545,
          "old_api": null,
          "new_api": "insertText",
          "old_text": null,
          "new_text": "c.insertText(objectReplacement, imageFormat)",
          "old_line_content": "}",
          "new_line_content": "\tc.insertText(objectReplacement, imageFormat);",
          "content_same": false
        },
        {
          "line": 552,
          "old_api": null,
          "new_api": "App::emojiSingle(emoji, _st.font->height)",
          "old_text": null,
          "new_text": "App::emojiSingle(emoji, _st.font->height)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\treturn QVariant(App::emojiSingle(emoji, _st.font->height));",
          "content_same": false
        },
        {
          "line": 555,
          "old_api": null,
          "new_api": "QVariant",
          "old_text": null,
          "new_text": "QVariant()",
          "old_line_content": "}",
          "new_line_content": "\treturn QVariant();",
          "content_same": false
        },
        {
          "line": 567,
          "old_api": null,
          "new_api": "next",
          "old_text": null,
          "new_text": "till.next()",
          "old_line_content": "",
          "new_line_content": "\t\tif (till.isValid()) till = till.next();",
          "content_same": false
        },
        {
          "line": 572,
          "old_api": null,
          "new_api": "isValid",
          "old_text": null,
          "new_text": "fragment.isValid()",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tif (!fragment.isValid()) continue;",
          "content_same": false
        },
        {
          "line": 574,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "fragment.length()",
          "old_line_content": "\t\t\t\tif (fp >= end || fe <= start) {",
          "new_line_content": "\t\t\t\tint32 fp = fragment.position(), fe = fp + fragment.length();",
          "content_same": false
        },
        {
          "line": 580,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "t.size()",
          "old_line_content": "\t\t\t\tfor (; ch != e; ++ch) {",
          "new_line_content": "\t\t\t\tconst QChar *ch = t.constData(), *e = ch + t.size();",
          "content_same": false
        },
        {
          "line": 582,
          "old_api": null,
          "new_api": "emojiFromText",
          "old_text": null,
          "new_text": "emojiFromText(ch, e, emojiLen)",
          "old_line_content": "\t\t\t\t\tif (emoji) {",
          "new_line_content": "\t\t\t\t\temoji = emojiFromText(ch, e, emojiLen);",
          "content_same": false
        },
        {
          "line": 584,
          "old_api": null,
          "new_api": "constData",
          "old_text": null,
          "new_text": "t.constData()",
          "old_line_content": "\t\t\t\t\t\tbreak;",
          "new_line_content": "\t\t\t\t\t\temojiPosition = fp + (ch - t.constData());",
          "content_same": false
        },
        {
          "line": 587,
          "old_api": null,
          "new_api": "isLowSurrogate",
          "old_text": null,
          "new_text": "ch + 1)->isLowSurrogate()",
          "old_line_content": "\t\t\t\t}",
          "new_line_content": "\t\t\t\t\tif (ch + 1 < e && ch->isHighSurrogate() && (ch + 1)->isLowSurrogate()) ++ch;",
          "content_same": false
        },
        {
          "line": 595,
          "old_api": null,
          "new_api": "QSizeF",
          "old_text": null,
          "new_text": "QSizeF(0, 0)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tdocument()->setPageSize(QSizeF(0, 0));",
          "content_same": false
        },
        {
          "line": 600,
          "old_api": null,
          "new_api": "position",
          "old_text": null,
          "new_text": "c.position()",
          "old_line_content": "",
          "new_line_content": "\t\t\tint32 removedUpto = c.position();",
          "content_same": false
        },
        {
          "line": 602,
          "old_api": null,
          "new_api": "insertEmoji",
          "old_text": null,
          "new_text": "insertEmoji(emoji, c)",
          "old_line_content": "",
          "new_line_content": "\t\t\tinsertEmoji(emoji, c);",
          "content_same": false
        },
        {
          "line": 604,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "_insertions.end()",
          "old_line_content": "\t\t\t\tif (i->first >= removedUpto) {",
          "new_line_content": "\t\t\tfor (Insertions::iterator i = _insertions.begin(), e = _insertions.end(); i != e; ++i) {",
          "content_same": false
        },
        {
          "line": 611,
          "old_api": null,
          "new_api": "qMin",
          "old_text": null,
          "new_text": "qMin(removedUpto, i->first + i->second)",
          "old_line_content": "\t\t\t\t}",
          "new_line_content": "\t\t\t\t\ti->second -= qMin(removedUpto, i->first + i->second) - emojiPosition;",
          "content_same": false
        },
        {
          "line": 629,
          "old_api": null,
          "new_api": "isEmpty",
          "old_text": null,
          "new_text": "_links.isEmpty()",
          "old_line_content": "\t\tbool changed = false;",
          "new_line_content": "\tif (!_links.isEmpty()) {",
          "content_same": false
        },
        {
          "line": 631,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "_links.end()",
          "old_line_content": "\t\t\tif (i->first + i->second <= position) {",
          "new_line_content": "\t\tfor (LinkRanges::iterator i = _links.begin(); i != _links.end();) {",
          "content_same": false
        },
        {
          "line": 638,
          "old_api": null,
          "new_api": "erase",
          "old_text": null,
          "new_text": "_links.erase(i)",
          "old_line_content": "\t\t\t\tchanged = true;",
          "new_line_content": "\t\t\t\ti = _links.erase(i);",
          "content_same": false
        },
        {
          "line": 642,
          "old_api": null,
          "new_api": "linksChanged",
          "old_text": null,
          "new_text": "linksChanged()",
          "old_line_content": "\t}",
          "new_line_content": "\t\tif (changed) emit linksChanged();",
          "content_same": false
        },
        {
          "line": 132,
          "old_api": null,
          "new_api": "fillRect",
          "old_text": null,
          "new_text": "p.fillRect(r, _st.bgColor->b)",
          "old_line_content": "\tbool phDraw = _phVisible;",
          "new_line_content": "\tp.fillRect(r, _st.bgColor->b);",
          "content_same": false
        },
        {
          "line": 645,
          "old_api": null,
          "new_api": "availableRedoSteps",
          "old_text": null,
          "new_text": "document()->availableRedoSteps()",
          "old_line_content": "",
          "new_line_content": "\tif (document()->availableRedoSteps() > 0) return;",
          "content_same": false
        },
        {
          "line": 135,
          "old_api": null,
          "new_api": "current",
          "old_text": null,
          "new_text": "a_phAlpha.current()",
          "old_line_content": "\t\tphDraw = true;",
          "new_line_content": "\t\tp.setOpacity(a_phAlpha.current());",
          "content_same": false
        },
        {
          "line": 145,
          "old_api": null,
          "new_api": "restore",
          "old_text": null,
          "new_text": "p.restore()",
          "old_line_content": "\t}",
          "new_line_content": "\t\tp.restore();",
          "content_same": false
        },
        {
          "line": 657,
          "old_api": null,
          "new_api": "Insertion",
          "old_text": null,
          "new_text": "Insertion(position, charsAdded)",
          "old_line_content": "}",
          "new_line_content": "\t_insertions.push_back(Insertion(position, charsAdded));",
          "content_same": false
        },
        {
          "line": 147,
          "old_api": null,
          "new_api": "QTextEdit::paintEvent(e)",
          "old_text": null,
          "new_text": "QTextEdit::paintEvent(e)",
          "old_line_content": "}",
          "new_line_content": "\tQTextEdit::paintEvent(e);",
          "content_same": false
        },
        {
          "line": 153,
          "old_api": null,
          "new_api": "QTextEdit::focusInEvent(e)",
          "old_text": null,
          "new_text": "QTextEdit::focusInEvent(e)",
          "old_line_content": "}",
          "new_line_content": "\tQTextEdit::focusInEvent(e);",
          "content_same": false
        },
        {
          "line": 665,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "_insertions.clear()",
          "old_line_content": "\t\t} else {",
          "new_line_content": "\t\t\t_insertions.clear();",
          "content_same": false
        },
        {
          "line": 668,
          "old_api": null,
          "new_api": "pageSize",
          "old_text": null,
          "new_text": "document()->pageSize()",
          "old_line_content": "\t\t\t",
          "new_line_content": "\t\t\tQSizeF s = document()->pageSize();",
          "content_same": false
        },
        {
          "line": 159,
          "old_api": null,
          "new_api": "QTextEdit::focusOutEvent(e)",
          "old_text": null,
          "new_text": "QTextEdit::focusOutEvent(e)",
          "old_line_content": "}",
          "new_line_content": "\tQTextEdit::focusOutEvent(e);",
          "content_same": false
        },
        {
          "line": 672,
          "old_api": null,
          "new_api": "pop_front",
          "old_text": null,
          "new_text": "_insertions.pop_front()",
          "old_line_content": "\t\t\t\tif (i.second > 0) {",
          "new_line_content": "\t\t\t\t_insertions.pop_front();",
          "content_same": false
        },
        {
          "line": 674,
          "old_api": null,
          "new_api": "processDocumentContentsChange",
          "old_text": null,
          "new_text": "processDocumentContentsChange(i.first, i.second)",
          "old_line_content": "\t\t\t\t}",
          "new_line_content": "\t\t\t\t\tprocessDocumentContentsChange(i.first, i.second);",
          "content_same": false
        },
        {
          "line": 163,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "geometry().size()",
          "old_line_content": "}",
          "new_line_content": "\treturn geometry().size();",
          "content_same": false
        },
        {
          "line": 676,
          "old_api": null,
          "new_api": "isEmpty",
          "old_text": null,
          "new_text": "_insertions.isEmpty()",
          "old_line_content": "",
          "new_line_content": "\t\t\t} while (!_insertions.isEmpty());",
          "content_same": false
        },
        {
          "line": 167,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "geometry().size()",
          "old_line_content": "}",
          "new_line_content": "\treturn geometry().size();",
          "content_same": false
        },
        {
          "line": 679,
          "old_api": null,
          "new_api": "setPageSize",
          "old_text": null,
          "new_text": "document()->setPageSize(s)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tdocument()->setPageSize(s);",
          "content_same": false
        },
        {
          "line": 174,
          "old_api": null,
          "new_api": "getSingleEmojiFragment",
          "old_text": null,
          "new_text": "getSingleEmojiFragment(text, fragment)",
          "old_line_content": "\t",
          "new_line_content": "\tgetSingleEmojiFragment(text, fragment);",
          "content_same": false
        },
        {
          "line": 691,
          "old_api": null,
          "new_api": "updateGlobalMenu",
          "old_text": null,
          "new_text": "App::wnd()->updateGlobalMenu()",
          "old_line_content": "}",
          "new_line_content": "\tif (App::wnd()) App::wnd()->updateGlobalMenu();",
          "content_same": false
        },
        {
          "line": 180,
          "old_api": null,
          "new_api": "emojiFromUrl",
          "old_text": null,
          "new_text": "emojiFromUrl(imageName)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\treturn emojiFromUrl(imageName);",
          "content_same": false
        },
        {
          "line": 696,
          "old_api": null,
          "new_api": "updateGlobalMenu",
          "old_text": null,
          "new_text": "App::wnd()->updateGlobalMenu()",
          "old_line_content": "}",
          "new_line_content": "\tif (App::wnd()) App::wnd()->updateGlobalMenu();",
          "content_same": false
        },
        {
          "line": 188,
          "old_api": null,
          "new_api": "anchor",
          "old_text": null,
          "new_text": "textCursor().anchor()",
          "old_line_content": "",
          "new_line_content": "\tif (textCursor().anchor() != pos) return;",
          "content_same": false
        },
        {
          "line": 701,
          "old_api": null,
          "new_api": "updateGlobalMenu",
          "old_text": null,
          "new_text": "App::wnd()->updateGlobalMenu()",
          "old_line_content": "}",
          "new_line_content": "\tif (App::wnd()) App::wnd()->updateGlobalMenu();",
          "content_same": false
        },
        {
          "line": 194,
          "old_api": null,
          "new_api": "isValid",
          "old_text": null,
          "new_text": "fr.isValid()",
          "old_line_content": "",
          "new_line_content": "\t\tif (!fr.isValid()) continue;",
          "content_same": false
        },
        {
          "line": 196,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "fr.length()",
          "old_line_content": "\t\tif (p >= pos || e < pos) continue;",
          "new_line_content": "\t\tint32 p = fr.position(), e = (p + fr.length());",
          "content_same": false
        },
        {
          "line": 200,
          "old_api": null,
          "new_api": "isImageFormat",
          "old_text": null,
          "new_text": "f.isImageFormat()",
          "old_line_content": "",
          "new_line_content": "\t\tif (f.isImageFormat()) continue;",
          "content_same": false
        },
        {
          "line": 714,
          "old_api": null,
          "new_api": "current",
          "old_text": null,
          "new_text": "a_phColor.current()",
          "old_line_content": "\t} else {",
          "new_line_content": "\t\ta_phColor = anim::cvalue(a_phColor.current());",
          "content_same": false
        },
        {
          "line": 203,
          "old_api": null,
          "new_api": "text",
          "old_text": null,
          "new_text": "fr.text()",
          "old_line_content": "\t\tfor (int i = pos - p; i > 0; --i) {",
          "new_line_content": "\t\tQString t(fr.text());",
          "content_same": false
        },
        {
          "line": 718,
          "old_api": null,
          "new_api": "update",
          "old_text": null,
          "new_text": "a_phColor.update(dt, _st.phColorFunc)",
          "old_line_content": "\t}",
          "new_line_content": "\t\ta_phColor.update(dt, _st.phColorFunc);",
          "content_same": false
        },
        {
          "line": 208,
          "old_api": null,
          "new_api": "at",
          "old_text": null,
          "new_text": "t.at(i - 2)",
          "old_line_content": "\t\t\t\t\tmentionInCommand = true;",
          "new_line_content": "\t\t\t\t} else if ((pos - p - i < 1 || t.at(i).isLetter()) && i > 2 && (t.at(i - 2).isLetterOrNumber() || t.at(i - 2) == '_') && !mentionInCommand) {",
          "content_same": false
        },
        {
          "line": 720,
          "old_api": null,
          "new_api": "update",
          "old_text": null,
          "new_text": "update()",
          "old_line_content": "\treturn res;",
          "new_line_content": "\tupdate();",
          "content_same": false
        },
        {
          "line": 216,
          "old_api": null,
          "new_api": "mid",
          "old_text": null,
          "new_text": "t.mid(i - 1, pos - p - i + 1)",
          "old_line_content": "\t\t\t\t}",
          "new_line_content": "\t\t\t\t\tstart = t.mid(i - 1, pos - p - i + 1);",
          "content_same": false
        },
        {
          "line": 729,
          "old_api": null,
          "new_api": "isEmpty",
          "old_text": null,
          "new_text": "getLastText().isEmpty()",
          "old_line_content": "\tif (vis == _phVisible) return;",
          "new_line_content": "\tbool vis = getLastText().isEmpty();",
          "content_same": false
        },
        {
          "line": 219,
          "old_api": null,
          "new_api": "at",
          "old_text": null,
          "new_text": "t.at(i - 1)",
          "old_line_content": "\t\t\t\tif (i < 2) {",
          "new_line_content": "\t\t\t} else if (t.at(i - 1) == '/') {",
          "content_same": false
        },
        {
          "line": 221,
          "old_api": null,
          "new_api": "mid",
          "old_text": null,
          "new_text": "t.mid(i - 1, pos - p - i + 1)",
          "old_line_content": "\t\t\t\t}",
          "new_line_content": "\t\t\t\t\tstart = t.mid(i - 1, pos - p - i + 1);",
          "content_same": false
        },
        {
          "line": 734,
          "old_api": null,
          "new_api": "anim::start(this)",
          "old_text": null,
          "new_text": "anim::start(this)",
          "old_line_content": "",
          "new_line_content": "\tanim::start(this);",
          "content_same": false
        },
        {
          "line": 226,
          "old_api": null,
          "new_api": "at",
          "old_text": null,
          "new_text": "t.at(i - 1)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tif (!t.at(i - 1).isLetterOrNumber() && t.at(i - 1) != '_') break;",
          "content_same": false
        },
        {
          "line": 742,
          "old_api": null,
          "new_api": "selectionEnd",
          "old_text": null,
          "new_text": "c.selectionEnd()",
          "old_line_content": "\tif (end > start) {",
          "new_line_content": "\tint32 start = c.selectionStart(), end = c.selectionEnd();",
          "content_same": false
        },
        {
          "line": 744,
          "old_api": null,
          "new_api": "getText",
          "old_text": null,
          "new_text": "getText(start, end)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tresult->setText(getText(start, end));",
          "content_same": false
        },
        {
          "line": 234,
          "old_api": null,
          "new_api": "position",
          "old_text": null,
          "new_text": "c.position()",
          "old_line_content": "",
          "new_line_content": "\tint32 pos = c.position();",
          "content_same": false
        },
        {
          "line": 240,
          "old_api": null,
          "new_api": "isValid",
          "old_text": null,
          "new_text": "fr.isValid()",
          "old_line_content": "",
          "new_line_content": "\t\tif (!fr.isValid()) continue;",
          "content_same": false
        },
        {
          "line": 753,
          "old_api": null,
          "new_api": "key",
          "old_text": null,
          "new_text": "e->key()",
          "old_line_content": "",
          "new_line_content": "\tbool enter = (e->key() == Qt::Key_Enter || e->key() == Qt::Key_Return);",
          "content_same": false
        },
        {
          "line": 242,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "fr.length()",
          "old_line_content": "\t\tif (p >= pos || e < pos) continue;",
          "new_line_content": "\t\tint32 p = fr.position(), e = (p + fr.length());",
          "content_same": false
        },
        {
          "line": 755,
          "old_api": null,
          "new_api": "key",
          "old_text": null,
          "new_text": "e->key()",
          "old_line_content": "\t\tQTextCursor tc(textCursor()), start(tc);",
          "new_line_content": "\tif (macmeta && e->key() == Qt::Key_Backspace) {",
          "content_same": false
        },
        {
          "line": 246,
          "old_api": null,
          "new_api": "isImageFormat",
          "old_text": null,
          "new_text": "f.isImageFormat()",
          "old_line_content": "",
          "new_line_content": "\t\tif (f.isImageFormat()) continue;",
          "content_same": false
        },
        {
          "line": 759,
          "old_api": null,
          "new_api": "removeSelectedText",
          "old_text": null,
          "new_text": "tc.removeSelectedText()",
          "old_line_content": "\t} else if (enter && ctrlGood) {",
          "new_line_content": "\t\ttc.removeSelectedText();",
          "content_same": false
        },
        {
          "line": 249,
          "old_api": null,
          "new_api": "text",
          "old_text": null,
          "new_text": "fr.text()",
          "old_line_content": "\t\tfor (int i = pos - p; i > 0; --i) {",
          "new_line_content": "\t\tQString t(fr.text());",
          "content_same": false
        },
        {
          "line": 762,
          "old_api": null,
          "new_api": "key",
          "old_text": null,
          "new_text": "e->key()",
          "old_line_content": "\t\temit cancelled();",
          "new_line_content": "\t} else if (e->key() == Qt::Key_Escape) {",
          "content_same": false
        },
        {
          "line": 764,
          "old_api": null,
          "new_api": "key",
          "old_text": null,
          "new_text": "e->key()",
          "old_line_content": "\t\tif (ctrl) {",
          "new_line_content": "\t} else if (e->key() == Qt::Key_Tab || (ctrl && e->key() == Qt::Key_Backtab)) {",
          "content_same": false
        },
        {
          "line": 253,
          "old_api": null,
          "new_api": "setPosition",
          "old_text": null,
          "new_text": "c.setPosition(p + i - 1, QTextCursor::MoveAnchor)",
          "old_line_content": "\t\t\t\t\tint till = p + i;",
          "new_line_content": "\t\t\t\t\tc.setPosition(p + i - 1, QTextCursor::MoveAnchor);",
          "content_same": false
        },
        {
          "line": 766,
          "old_api": null,
          "new_api": "ignore",
          "old_text": null,
          "new_text": "e->ignore()",
          "old_line_content": "\t\t} else {",
          "new_line_content": "\t\t\te->ignore();",
          "content_same": false
        },
        {
          "line": 256,
          "old_api": null,
          "new_api": "at",
          "old_text": null,
          "new_text": "str.at(till - p - i + 1).toLower()",
          "old_line_content": "\t\t\t\t\t\t\tbreak;",
          "new_line_content": "\t\t\t\t\t\tif (t.at(till - p).toLower() != str.at(till - p - i + 1).toLower()) {",
          "content_same": false
        },
        {
          "line": 260,
          "old_api": null,
          "new_api": "at",
          "old_text": null,
          "new_text": "t.at(till - p)",
          "old_line_content": "\t\t\t\t\t\t++till;",
          "new_line_content": "\t\t\t\t\tif (till - p - i + 1 == str.size() && till < e && t.at(till - p) == ' ') {",
          "content_same": false
        },
        {
          "line": 773,
          "old_api": null,
          "new_api": "modifiers",
          "old_text": null,
          "new_text": "e->modifiers()",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\te->setModifiers(e->modifiers() & ~Qt::ControlModifier);",
          "content_same": false
        },
        {
          "line": 264,
          "old_api": null,
          "new_api": "insertText",
          "old_text": null,
          "new_text": "c.insertText(str + ' ')",
          "old_line_content": "\t\t\t\t\treturn;",
          "new_line_content": "\t\t\t\t\tc.insertText(str + ' ');",
          "content_same": false
        },
        {
          "line": 266,
          "old_api": null,
          "new_api": "at",
          "old_text": null,
          "new_text": "t.at(i - 2)",
          "old_line_content": "\t\t\t\t\tmentionInCommand = true;",
          "new_line_content": "\t\t\t\t} else if ((i == pos - p || t.at(i).isLetter()) && t.at(i - 1) == '@' && i > 2 && (t.at(i - 2).isLetterOrNumber() || t.at(i - 2) == '_') && !mentionInCommand) {",
          "content_same": false
        },
        {
          "line": 778,
          "old_api": null,
          "new_api": "at",
          "old_text": null,
          "new_text": "t.at(0)",
          "old_line_content": "\t\t\t\tspaceOrReturn = true;",
          "new_line_content": "\t\t\tif (t.at(0) == '\\n' || t.at(0) == '\\r' || t.at(0).isSpace() || t.at(0) == QChar::LineSeparator) {",
          "content_same": false
        },
        {
          "line": 783,
          "old_api": null,
          "new_api": "textCursor",
          "old_text": null,
          "new_text": "textCursor()",
          "old_line_content": "\t\t\tbool check = false;",
          "new_line_content": "\t\tif (tc == textCursor()) {",
          "content_same": false
        },
        {
          "line": 274,
          "old_api": null,
          "new_api": "at",
          "old_text": null,
          "new_text": "t.at(i - 1)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tif (!t.at(i - 1).isLetterOrNumber() && t.at(i - 1) != '_') break;",
          "content_same": false
        },
        {
          "line": 786,
          "old_api": null,
          "new_api": "testFlag",
          "old_text": null,
          "new_text": "e->modifiers().testFlag(Qt::ShiftModifier)",
          "old_line_content": "\t\t\t\tcheck = true;",
          "new_line_content": "\t\t\t\ttc.movePosition(QTextCursor::Start, e->modifiers().testFlag(Qt::ShiftModifier) ? QTextCursor::KeepAnchor : QTextCursor::MoveAnchor);",
          "content_same": false
        },
        {
          "line": 789,
          "old_api": null,
          "new_api": "testFlag",
          "old_text": null,
          "new_text": "e->modifiers().testFlag(Qt::ShiftModifier)",
          "old_line_content": "\t\t\t\tcheck = true;",
          "new_line_content": "\t\t\t\ttc.movePosition(QTextCursor::End, e->modifiers().testFlag(Qt::ShiftModifier) ? QTextCursor::KeepAnchor : QTextCursor::MoveAnchor);",
          "content_same": false
        },
        {
          "line": 278,
          "old_api": null,
          "new_api": "insertText",
          "old_text": null,
          "new_text": "c.insertText(str + ' ')",
          "old_line_content": "}",
          "new_line_content": "\tc.insertText(str + ' ');",
          "content_same": false
        },
        {
          "line": 794,
          "old_api": null,
          "new_api": "ignore",
          "old_text": null,
          "new_text": "e->ignore()",
          "old_line_content": "\t\t\t\t} else {",
          "new_line_content": "\t\t\t\t\te->ignore();",
          "content_same": false
        },
        {
          "line": 283,
          "old_api": null,
          "new_api": "anchor",
          "old_text": null,
          "new_text": "textCursor().anchor()",
          "old_line_content": "",
          "new_line_content": "\tif (textCursor().anchor() != end) return;",
          "content_same": false
        },
        {
          "line": 796,
          "old_api": null,
          "new_api": "setTextCursor",
          "old_text": null,
          "new_text": "setTextCursor(tc)",
          "old_line_content": "\t\t\t\t}",
          "new_line_content": "\t\t\t\t\tsetTextCursor(tc);",
          "content_same": false
        },
        {
          "line": 800,
          "old_api": null,
          "new_api": "spacedReturnedPasted",
          "old_text": null,
          "new_text": "spacedReturnedPasted()",
          "old_line_content": "\t}",
          "new_line_content": "\t\tif (spaceOrReturn) emit spacedReturnedPasted();",
          "content_same": false
        },
        {
          "line": 289,
          "old_api": null,
          "new_api": "next",
          "old_text": null,
          "new_text": "till.next()",
          "old_line_content": "",
          "new_line_content": "\tif (till.isValid()) till = till.next();",
          "content_same": false
        },
        {
          "line": 294,
          "old_api": null,
          "new_api": "isValid",
          "old_text": null,
          "new_text": "fr.isValid()",
          "old_line_content": "",
          "new_line_content": "\t\t\tif (!fr.isValid()) continue;",
          "content_same": false
        },
        {
          "line": 806,
          "old_api": null,
          "new_api": "QTextEdit::resizeEvent(e)",
          "old_text": null,
          "new_text": "QTextEdit::resizeEvent(e)",
          "old_line_content": "}",
          "new_line_content": "\tQTextEdit::resizeEvent(e);",
          "content_same": false
        },
        {
          "line": 296,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "fr.length()",
          "old_line_content": "\t\t\tif (p >= end || e <= start) {",
          "new_line_content": "\t\t\tint32 p = fr.position(), e = (p + fr.length());",
          "content_same": false
        },
        {
          "line": 810,
          "old_api": null,
          "new_api": "QTextEdit::mousePressEvent(e)",
          "old_text": null,
          "new_text": "QTextEdit::mousePressEvent(e)",
          "old_line_content": "}",
          "new_line_content": "\tQTextEdit::mousePressEvent(e);",
          "content_same": false
        },
        {
          "line": 302,
          "old_api": null,
          "new_api": "text",
          "old_text": null,
          "new_text": "fr.text()",
          "old_line_content": "\t\t\tif (p < start) {",
          "new_line_content": "\t\t\tQString t(fr.text());",
          "content_same": false
        },
        {
          "line": 304,
          "old_api": null,
          "new_api": "mid",
          "old_text": null,
          "new_text": "t.mid(start - p, end - start)",
          "old_line_content": "\t\t\t} else if (e > end) {",
          "new_line_content": "\t\t\t\tt = t.mid(start - p, end - start);",
          "content_same": false
        },
        {
          "line": 306,
          "old_api": null,
          "new_api": "mid",
          "old_text": null,
          "new_text": "t.mid(0, end - p)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tt = t.mid(0, end - p);",
          "content_same": false
        },
        {
          "line": 310,
          "old_api": null,
          "new_api": "qstr",
          "old_text": null,
          "new_text": "qstr(\"emoji://e.\")",
          "old_line_content": "\t\t\t\t\tfragment = fr;",
          "new_line_content": "\t\t\t\tif (imageName.startsWith(qstr(\"emoji://e.\"))) {",
          "content_same": false
        },
        {
          "line": 326,
          "old_api": null,
          "new_api": "getSingleEmojiFragment",
          "old_text": null,
          "new_text": "getSingleEmojiFragment(text, fragment)",
          "old_line_content": "",
          "new_line_content": "\tgetSingleEmojiFragment(text, fragment);",
          "content_same": false
        },
        {
          "line": 328,
          "old_api": null,
          "new_api": "isEmpty",
          "old_text": null,
          "new_text": "text.isEmpty()",
          "old_line_content": "\t\tQTextCursor t(textCursor());",
          "new_line_content": "\tif (!text.isEmpty()) {",
          "content_same": false
        },
        {
          "line": 333,
          "old_api": null,
          "new_api": "setTextCursor",
          "old_text": null,
          "new_text": "setTextCursor(t)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tsetTextCursor(t);",
          "content_same": false
        },
        {
          "line": 338,
          "old_api": null,
          "new_api": "QString",
          "old_text": null,
          "new_text": "QString()",
          "old_line_content": "",
          "new_line_content": "\tif (end >= 0 && end <= start) return QString();",
          "content_same": false
        },
        {
          "line": 345,
          "old_api": null,
          "new_api": "next",
          "old_text": null,
          "new_text": "till.next()",
          "old_line_content": "",
          "new_line_content": "\tif (till.isValid()) till = till.next();",
          "content_same": false
        },
        {
          "line": 349,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "b.length()",
          "old_line_content": "\t}",
          "new_line_content": "\t\tpossibleLen += b.length();",
          "content_same": false
        },
        {
          "line": 352,
          "old_api": null,
          "new_api": "reserve",
          "old_text": null,
          "new_text": "result.reserve(possibleLen + 1)",
          "old_line_content": "\tif (!full && end < 0) {",
          "new_line_content": "\tresult.reserve(possibleLen + 1);",
          "content_same": false
        },
        {
          "line": 360,
          "old_api": null,
          "new_api": "isValid",
          "old_text": null,
          "new_text": "fragment.isValid()",
          "old_line_content": "",
          "new_line_content": "\t\t\tif (!fragment.isValid()) continue;",
          "content_same": false
        },
        {
          "line": 362,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "fragment.length()",
          "old_line_content": "\t\t\tif (!full) {",
          "new_line_content": "\t\t\tint32 p = full ? 0 : fragment.position(), e = full ? 0 : (p + fragment.length());",
          "content_same": false
        },
        {
          "line": 369,
          "old_api": null,
          "new_api": "charFormat",
          "old_text": null,
          "new_text": "fragment.charFormat()",
          "old_line_content": "\t\t\tQString emojiText;",
          "new_line_content": "\t\t\tQTextCharFormat f = fragment.charFormat();",
          "content_same": false
        },
        {
          "line": 371,
          "old_api": null,
          "new_api": "text",
          "old_text": null,
          "new_text": "fragment.text()",
          "old_line_content": "\t\t\tif (!full) {",
          "new_line_content": "\t\t\tQString t(fragment.text());",
          "content_same": false
        },
        {
          "line": 374,
          "old_api": null,
          "new_api": "mid",
          "old_text": null,
          "new_text": "t.mid(start - p, end - start)",
          "old_line_content": "\t\t\t\t} else if (e > end) {",
          "new_line_content": "\t\t\t\t\tt = t.mid(start - p, end - start);",
          "content_same": false
        },
        {
          "line": 376,
          "old_api": null,
          "new_api": "mid",
          "old_text": null,
          "new_text": "t.mid(0, end - p)",
          "old_line_content": "\t\t\t\t}",
          "new_line_content": "\t\t\t\t\tt = t.mid(0, end - p);",
          "content_same": false
        },
        {
          "line": 379,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "t.size()",
          "old_line_content": "\t\t\tfor (; uc != ue; ++uc) {",
          "new_line_content": "\t\t\tQChar *ub = t.data(), *uc = ub, *ue = uc + t.size();",
          "content_same": false
        },
        {
          "line": 381,
          "old_api": null,
          "new_api": "unicode",
          "old_text": null,
          "new_text": "uc->unicode()",
          "old_line_content": "\t\t\t\tcase 0xfdd0: // QTextBeginningOfFrame",
          "new_line_content": "\t\t\t\tswitch (uc->unicode()) {",
          "content_same": false
        },
        {
          "line": 386,
          "old_api": null,
          "new_api": "QLatin1Char",
          "old_text": null,
          "new_text": "QLatin1Char('\\n')",
          "old_line_content": "\t\t\t\t\tbreak;",
          "new_line_content": "\t\t\t\t\t*uc = QLatin1Char('\\n');",
          "content_same": false
        },
        {
          "line": 389,
          "old_api": null,
          "new_api": "QLatin1Char",
          "old_text": null,
          "new_text": "QLatin1Char(' ')",
          "old_line_content": "\t\t\t\t\tbreak;",
          "new_line_content": "\t\t\t\t\t*uc = QLatin1Char(' ');",
          "content_same": false
        },
        {
          "line": 396,
          "old_api": null,
          "new_api": "emojiString",
          "old_text": null,
          "new_text": "emojiString(emoji)",
          "old_line_content": "\t\t\t\t\t\t\t}",
          "new_line_content": "\t\t\t\t\t\t\t\temojiText = emojiString(emoji);",
          "content_same": false
        },
        {
          "line": 401,
          "old_api": null,
          "new_api": "append",
          "old_text": null,
          "new_text": "result.append(emojiText)",
          "old_line_content": "\t\t\t\t\tub = uc + 1;",
          "new_line_content": "\t\t\t\t\tif (!emojiText.isEmpty()) result.append(emojiText);",
          "content_same": false
        },
        {
          "line": 406,
          "old_api": null,
          "new_api": "append",
          "old_text": null,
          "new_text": "result.append(ub, uc - ub)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tif (uc > ub) result.append(ub, uc - ub);",
          "content_same": false
        },
        {
          "line": 408,
          "old_api": null,
          "new_api": "append",
          "old_text": null,
          "new_text": "result.append('\\n')",
          "old_line_content": "\t}",
          "new_line_content": "\t\tresult.append('\\n');",
          "content_same": false
        },
        {
          "line": 410,
          "old_api": null,
          "new_api": "chop",
          "old_text": null,
          "new_text": "result.chop(1)",
          "old_line_content": "\treturn result;",
          "new_line_content": "\tresult.chop(1);",
          "content_same": false
        },
        {
          "line": 416,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "doc->end()",
          "old_line_content": "",
          "new_line_content": "\tQTextBlock from = doc->begin(), till = doc->end();",
          "content_same": false
        },
        {
          "line": 423,
          "old_api": null,
          "new_api": "text",
          "old_text": null,
          "new_text": "fragment.text().isEmpty()",
          "old_line_content": "\t}",
          "new_line_content": "\t\tif (!fragment.text().isEmpty()) return true;",
          "content_same": false
        },
        {
          "line": 425,
          "old_api": null,
          "new_api": "next",
          "old_text": null,
          "new_text": "from.next()",
          "old_line_content": "}",
          "new_line_content": "\treturn (from.next() != till);",
          "content_same": false
        },
        {
          "line": 442,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "_links.clear()",
          "old_line_content": "\t\t\temit linksChanged();",
          "new_line_content": "\t\t\t_links.clear();",
          "content_same": false
        },
        {
          "line": 448,
          "old_api": null,
          "new_api": "initLinkSets",
          "old_text": null,
          "new_text": "initLinkSets()",
          "old_line_content": "",
          "new_line_content": "\tinitLinkSets();",
          "content_same": false
        },
        {
          "line": 451,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "text.size()",
          "old_line_content": "\tfor (int32 offset = 0, matchOffset = offset; offset < len;) {",
          "new_line_content": "\tconst QChar *start = text.unicode(), *end = start + text.size();",
          "content_same": false
        },
        {
          "line": 454,
          "old_api": null,
          "new_api": "hasMatch",
          "old_text": null,
          "new_text": "m.hasMatch()",
          "old_line_content": "",
          "new_line_content": "\t\tif (!m.hasMatch()) break;",
          "content_same": false
        },
        {
          "line": 456,
          "old_api": null,
          "new_api": "capturedStart",
          "old_text": null,
          "new_text": "m.capturedStart()",
          "old_line_content": "",
          "new_line_content": "\t\tint32 domainOffset = m.capturedStart();",
          "content_same": false
        },
        {
          "line": 459,
          "old_api": null,
          "new_api": "captured",
          "old_text": null,
          "new_text": "m.captured(3).toLower()",
          "old_line_content": "",
          "new_line_content": "\t\tQString topDomain = m.captured(3).toLower();",
          "content_same": false
        },
        {
          "line": 462,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "topDomain.size()",
          "old_line_content": "",
          "new_line_content": "\t\tbool isTopDomainValid = !protocol.isEmpty() || validTopDomains().contains(hashCrc32(topDomain.constData(), topDomain.size() * sizeof(QChar)));",
          "content_same": false
        },
        {
          "line": 468,
          "old_api": null,
          "new_api": "capturedEnd",
          "old_text": null,
          "new_text": "m.capturedEnd()",
          "old_line_content": "\t\t\t\tcontinue;",
          "new_line_content": "\t\t\t\toffset = matchOffset = m.capturedEnd();",
          "content_same": false
        },
        {
          "line": 473,
          "old_api": null,
          "new_api": "capturedEnd",
          "old_text": null,
          "new_text": "m.capturedEnd()",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\t\toffset = matchOffset = m.capturedEnd();",
          "content_same": false
        },
        {
          "line": 478,
          "old_api": null,
          "new_api": "capturedEnd",
          "old_text": null,
          "new_text": "m.capturedEnd()",
          "old_line_content": "\t\tfor (; p < end; ++p) {",
          "new_line_content": "\t\tconst QChar *domainEnd = start + m.capturedEnd(), *p = domainEnd;",
          "content_same": false
        },
        {
          "line": 482,
          "old_api": null,
          "new_api": "chIsAlmostLinkEnd",
          "old_text": null,
          "new_text": "chIsAlmostLinkEnd(ch)",
          "old_line_content": "\t\t\t\tconst QChar *endTest = p + 1;",
          "new_line_content": "\t\t\tif (chIsAlmostLinkEnd(ch)) {",
          "content_same": false
        },
        {
          "line": 484,
          "old_api": null,
          "new_api": "chIsAlmostLinkEnd",
          "old_text": null,
          "new_text": "chIsAlmostLinkEnd(*endTest)",
          "old_line_content": "\t\t\t\t\t++endTest;",
          "new_line_content": "\t\t\t\twhile (endTest < end && chIsAlmostLinkEnd(*endTest)) {",
          "content_same": false
        },
        {
          "line": 487,
          "old_api": null,
          "new_api": "chIsLinkEnd",
          "old_text": null,
          "new_text": "chIsLinkEnd(*endTest)",
          "old_line_content": "\t\t\t\t\tbreak; // link finished at p",
          "new_line_content": "\t\t\t\tif (endTest >= end || chIsLinkEnd(*endTest)) {",
          "content_same": false
        },
        {
          "line": 494,
          "old_api": null,
          "new_api": "push",
          "old_text": null,
          "new_text": "parenth.push(p)",
          "old_line_content": "\t\t\t} else if (ch == ')' || ch == ']' || ch == '}' || ch == '>') {",
          "new_line_content": "\t\t\t\tparenth.push(p);",
          "content_same": false
        },
        {
          "line": 497,
          "old_api": null,
          "new_api": "pop",
          "old_text": null,
          "new_text": "parenth.pop()",
          "old_line_content": "\t\t\t\tif ((ch == ')' && open != '(') || (ch == ']' && open != '[') || (ch == '}' && open != '{') || (ch == '>' && open != '<')) {",
          "new_line_content": "\t\t\t\tconst QChar *q = parenth.pop(), open(*q);",
          "content_same": false
        },
        {
          "line": 505,
          "old_api": null,
          "new_api": "unicode",
          "old_text": null,
          "new_text": "domainEnd->unicode()",
          "old_line_content": "\t\t\t\tmatchOffset = domainEnd - start;",
          "new_line_content": "\t\t\tif (domainEnd->unicode() != '/' && domainEnd->unicode() != '?') {",
          "content_same": false
        },
        {
          "line": 510,
          "old_api": null,
          "new_api": "qMakePair",
          "old_text": null,
          "new_text": "qMakePair(domainOffset - 1, p - start - domainOffset + 2)",
          "old_line_content": "\t\toffset = matchOffset = p - start;",
          "new_line_content": "\t\tnewLinks.push_back(qMakePair(domainOffset - 1, p - start - domainOffset + 2));",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 521,
          "old_api": "isEmpty",
          "new_api": null,
          "old_text": "_links.isEmpty()",
          "new_text": null,
          "old_line_content": "\tif (!_links.isEmpty()) {",
          "new_line_content": "\tQStringList result;",
          "content_same": false
        },
        {
          "line": 523,
          "old_api": "cend",
          "new_api": null,
          "old_text": "_links.cend()",
          "new_text": null,
          "old_line_content": "\t\tfor (LinkRanges::const_iterator i = _links.cbegin(), e = _links.cend(); i != e; ++i) {",
          "new_line_content": "\t\tQString text(toPlainText());",
          "content_same": false
        },
        {
          "line": 531,
          "old_api": "QTextEdit::insertFromMimeData(source)",
          "new_api": null,
          "old_text": "QTextEdit::insertFromMimeData(source)",
          "new_text": null,
          "old_line_content": "\tQTextEdit::insertFromMimeData(source);",
          "new_line_content": "void FlatTextarea::insertFromMimeData(const QMimeData *source) {",
          "content_same": false
        },
        {
          "line": 537,
          "old_api": "cIntRetinaFactor",
          "new_api": null,
          "old_text": "cIntRetinaFactor()",
          "new_text": null,
          "old_line_content": "\tint32 ew = ESize + st::emojiPadding * cIntRetinaFactor() * 2, eh = _st.font->height * cIntRetinaFactor();",
          "new_line_content": "\tQTextImageFormat imageFormat;",
          "content_same": false
        },
        {
          "line": 544,
          "old_api": "insertText",
          "new_api": null,
          "old_text": "c.insertText(objectReplacement, imageFormat)",
          "new_text": null,
          "old_line_content": "\tc.insertText(objectReplacement, imageFormat);",
          "new_line_content": "\tstatic QString objectReplacement(QChar::ObjectReplacementCharacter);",
          "content_same": false
        },
        {
          "line": 548,
          "old_api": "toDisplayString",
          "new_api": null,
          "old_text": "name.toDisplayString()",
          "new_text": null,
          "old_line_content": "\tQString imageName = name.toDisplayString();",
          "new_line_content": "QVariant FlatTextarea::loadResource(int type, const QUrl &name) {",
          "content_same": false
        },
        {
          "line": 554,
          "old_api": "QVariant",
          "new_api": null,
          "old_text": "QVariant()",
          "new_text": null,
          "old_line_content": "\treturn QVariant();",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 565,
          "old_api": "findBlock",
          "new_api": null,
          "old_text": "doc->findBlock(end)",
          "new_text": null,
          "old_line_content": "\t\tQTextBlock from = doc->findBlock(start), till = doc->findBlock(end);",
          "new_line_content": "\t\tint32 start = position, end = position + charsAdded;",
          "content_same": false
        },
        {
          "line": 568,
          "old_api": "next",
          "new_api": null,
          "old_text": "b.next()",
          "new_text": null,
          "old_line_content": "\t\tfor (QTextBlock b = from; b != till; b = b.next()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 573,
          "old_api": "length",
          "new_api": null,
          "old_text": "fragment.length()",
          "new_text": null,
          "old_line_content": "\t\t\t\tint32 fp = fragment.position(), fe = fp + fragment.length();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 578,
          "old_api": "text",
          "new_api": null,
          "old_text": "fragment.text()",
          "new_text": null,
          "old_line_content": "\t\t\t\tQString t(fragment.text());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 581,
          "old_api": "emojiFromText",
          "new_api": null,
          "old_text": "emojiFromText(ch, e, emojiLen)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\temoji = emojiFromText(ch, e, emojiLen);",
          "new_line_content": "\t\t\t\tfor (; ch != e; ++ch) {",
          "content_same": false
        },
        {
          "line": 583,
          "old_api": "constData",
          "new_api": null,
          "old_text": "t.constData()",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\temojiPosition = fp + (ch - t.constData());",
          "new_line_content": "\t\t\t\t\tif (emoji) {",
          "content_same": false
        },
        {
          "line": 586,
          "old_api": "isLowSurrogate",
          "new_api": null,
          "old_text": "ch + 1)->isLowSurrogate()",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tif (ch + 1 < e && ch->isHighSurrogate() && (ch + 1)->isLowSurrogate()) ++ch;",
          "new_line_content": "\t\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 593,
          "old_api": "isNull",
          "new_api": null,
          "old_text": "document()->pageSize().isNull()",
          "new_text": null,
          "old_line_content": "\t\t\tif (!document()->pageSize().isNull()) {",
          "new_line_content": "\t\tif (emoji) {",
          "content_same": false
        },
        {
          "line": 597,
          "old_api": "docHandle",
          "new_api": null,
          "old_text": "doc->docHandle()",
          "new_text": null,
          "old_line_content": "\t\t\tQTextCursor c(doc->docHandle(), emojiPosition);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 601,
          "old_api": "insertEmoji",
          "new_api": null,
          "old_text": "insertEmoji(emoji, c)",
          "new_text": null,
          "old_line_content": "\t\t\tinsertEmoji(emoji, c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 603,
          "old_api": "end",
          "new_api": null,
          "old_text": "_insertions.end()",
          "new_text": null,
          "old_line_content": "\t\t\tfor (Insertions::iterator i = _insertions.begin(), e = _insertions.end(); i != e; ++i) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 610,
          "old_api": "qMin",
          "new_api": null,
          "old_text": "qMin(removedUpto, i->first + i->second)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\ti->second -= qMin(removedUpto, i->first + i->second) - emojiPosition;",
          "new_line_content": "\t\t\t\t} else if (i->first + i->second > emojiPosition + 1) {",
          "content_same": false
        },
        {
          "line": 628,
          "old_api": "isEmpty",
          "new_api": null,
          "old_text": "_links.isEmpty()",
          "new_text": null,
          "old_line_content": "\tif (!_links.isEmpty()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 630,
          "old_api": "end",
          "new_api": null,
          "old_text": "_links.end()",
          "new_text": null,
          "old_line_content": "\t\tfor (LinkRanges::iterator i = _links.begin(); i != _links.end();) {",
          "new_line_content": "\t\tbool changed = false;",
          "content_same": false
        },
        {
          "line": 637,
          "old_api": "erase",
          "new_api": null,
          "old_text": "_links.erase(i)",
          "new_text": null,
          "old_line_content": "\t\t\t\ti = _links.erase(i);",
          "new_line_content": "\t\t\t} else {",
          "content_same": false
        },
        {
          "line": 641,
          "old_api": "linksChanged",
          "new_api": null,
          "old_text": "linksChanged()",
          "new_text": null,
          "old_line_content": "\t\tif (changed) emit linksChanged();",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 644,
          "old_api": "availableRedoSteps",
          "new_api": null,
          "old_text": "document()->availableRedoSteps()",
          "new_text": null,
          "old_line_content": "\tif (document()->availableRedoSteps() > 0) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 133,
          "old_api": "animating",
          "new_api": null,
          "old_text": "animating()",
          "new_text": null,
          "old_line_content": "\tif (animating()) {",
          "new_line_content": "\tbool phDraw = _phVisible;",
          "content_same": false
        },
        {
          "line": 138,
          "old_api": "save",
          "new_api": null,
          "old_text": "p.save()",
          "new_text": null,
          "old_line_content": "\t\tp.save();",
          "new_line_content": "\tif (phDraw) {",
          "content_same": false
        },
        {
          "line": 656,
          "old_api": "Insertion",
          "new_api": null,
          "old_text": "Insertion(position, charsAdded)",
          "new_text": null,
          "old_line_content": "\t_insertions.push_back(Insertion(position, charsAdded));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 146,
          "old_api": "QTextEdit::paintEvent(e)",
          "new_api": null,
          "old_text": "QTextEdit::paintEvent(e)",
          "new_text": null,
          "old_line_content": "\tQTextEdit::paintEvent(e);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 150,
          "old_api": "start",
          "new_api": null,
          "old_text": "a_phColor.start(_st.phFocusColor->c)",
          "new_text": null,
          "old_line_content": "\ta_phColor.start(_st.phFocusColor->c);",
          "new_line_content": "void FlatTextarea::focusInEvent(QFocusEvent *e) {",
          "content_same": false
        },
        {
          "line": 662,
          "old_api": "isEmpty",
          "new_api": null,
          "old_text": "_insertions.isEmpty()",
          "new_text": null,
          "old_line_content": "\tif (!_insertions.isEmpty()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 667,
          "old_api": "pageSize",
          "new_api": null,
          "old_text": "document()->pageSize()",
          "new_text": null,
          "old_line_content": "\t\t\tQSizeF s = document()->pageSize();",
          "new_line_content": "\t\t\t_replacingEmojis = true;",
          "content_same": false
        },
        {
          "line": 156,
          "old_api": "start",
          "new_api": null,
          "old_text": "a_phColor.start(_st.phColor->c)",
          "new_text": null,
          "old_line_content": "\ta_phColor.start(_st.phColor->c);",
          "new_line_content": "void FlatTextarea::focusOutEvent(QFocusEvent *e) {",
          "content_same": false
        },
        {
          "line": 670,
          "old_api": "front",
          "new_api": null,
          "old_text": "_insertions.front()",
          "new_text": null,
          "old_line_content": "\t\t\t\tInsertion i = _insertions.front();",
          "new_line_content": "\t\t\tdo {",
          "content_same": false
        },
        {
          "line": 673,
          "old_api": "processDocumentContentsChange",
          "new_api": null,
          "old_text": "processDocumentContentsChange(i.first, i.second)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tprocessDocumentContentsChange(i.first, i.second);",
          "new_line_content": "\t\t\t\tif (i.second > 0) {",
          "content_same": false
        },
        {
          "line": 162,
          "old_api": "size",
          "new_api": null,
          "old_text": "geometry().size()",
          "new_text": null,
          "old_line_content": "\treturn geometry().size();",
          "new_line_content": "QSize FlatTextarea::sizeHint() const {",
          "content_same": false
        },
        {
          "line": 675,
          "old_api": "isEmpty",
          "new_api": null,
          "old_text": "_insertions.isEmpty()",
          "new_text": null,
          "old_line_content": "\t\t\t} while (!_insertions.isEmpty());",
          "new_line_content": "\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 677,
          "old_api": "pageSize",
          "new_api": null,
          "old_text": "document()->pageSize()",
          "new_text": null,
          "old_line_content": "\t\t\tif (document()->pageSize() != s) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 166,
          "old_api": "size",
          "new_api": null,
          "old_text": "geometry().size()",
          "new_text": null,
          "old_line_content": "\treturn geometry().size();",
          "new_line_content": "QSize FlatTextarea::minimumSizeHint() const {",
          "content_same": false
        },
        {
          "line": 173,
          "old_api": "getSingleEmojiFragment",
          "new_api": null,
          "old_text": "getSingleEmojiFragment(text, fragment)",
          "new_text": null,
          "old_line_content": "\tgetSingleEmojiFragment(text, fragment);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 175,
          "old_api": "isEmpty",
          "new_api": null,
          "old_text": "text.isEmpty()",
          "new_text": null,
          "old_line_content": "\tif (!text.isEmpty()) {",
          "new_line_content": "\t",
          "content_same": false
        },
        {
          "line": 689,
          "old_api": "updatePlaceholder",
          "new_api": null,
          "old_text": "updatePlaceholder()",
          "new_text": null,
          "old_line_content": "\tupdatePlaceholder();",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 695,
          "old_api": "updateGlobalMenu",
          "new_api": null,
          "old_text": "App::wnd()->updateGlobalMenu()",
          "new_text": null,
          "old_line_content": "\tif (App::wnd()) App::wnd()->updateGlobalMenu();",
          "new_line_content": "\t_undoAvailable = avail;",
          "content_same": false
        },
        {
          "line": 186,
          "old_api": "position",
          "new_api": null,
          "old_text": "textCursor().position()",
          "new_text": null,
          "old_line_content": "\tint32 pos = textCursor().position();",
          "new_line_content": "void FlatTextarea::getMentionHashtagBotCommandStart(QString &start) const {",
          "content_same": false
        },
        {
          "line": 700,
          "old_api": "updateGlobalMenu",
          "new_api": null,
          "old_text": "App::wnd()->updateGlobalMenu()",
          "new_text": null,
          "old_line_content": "\tif (App::wnd()) App::wnd()->updateGlobalMenu();",
          "new_line_content": "\t_redoAvailable = avail;",
          "content_same": false
        },
        {
          "line": 190,
          "old_api": "findBlock",
          "new_api": null,
          "old_text": "doc->findBlock(pos)",
          "new_text": null,
          "old_line_content": "\tQTextBlock block = doc->findBlock(pos);",
          "new_line_content": "\tQTextDocument *doc(document());",
          "content_same": false
        },
        {
          "line": 195,
          "old_api": "length",
          "new_api": null,
          "old_text": "fr.length()",
          "new_text": null,
          "old_line_content": "\t\tint32 p = fr.position(), e = (p + fr.length());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 708,
          "old_api": "finish",
          "new_api": null,
          "old_text": "a_phLeft.finish()",
          "new_text": null,
          "old_line_content": "\t\ta_phLeft.finish();",
          "new_line_content": "\t\tres = false;",
          "content_same": false
        },
        {
          "line": 198,
          "old_api": "charFormat",
          "new_api": null,
          "old_text": "fr.charFormat()",
          "new_text": null,
          "old_line_content": "\t\tQTextCharFormat f = fr.charFormat();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 202,
          "old_api": "text",
          "new_api": null,
          "old_text": "fr.text()",
          "new_text": null,
          "old_line_content": "\t\tQString t(fr.text());",
          "new_line_content": "\t\tbool mentionInCommand = false;",
          "content_same": false
        },
        {
          "line": 715,
          "old_api": "update",
          "new_api": null,
          "old_text": "a_phLeft.update(dt, _st.phLeftFunc)",
          "new_text": null,
          "old_line_content": "\t\ta_phLeft.update(dt, _st.phLeftFunc);",
          "new_line_content": "\t} else {",
          "content_same": false
        },
        {
          "line": 204,
          "old_api": "at",
          "new_api": null,
          "old_text": "t.at(i - 1)",
          "new_text": null,
          "old_line_content": "\t\t\tif (t.at(i - 1) == '@') {",
          "new_line_content": "\t\tfor (int i = pos - p; i > 0; --i) {",
          "content_same": false
        },
        {
          "line": 719,
          "old_api": "update",
          "new_api": null,
          "old_text": "update()",
          "new_text": null,
          "old_line_content": "\tupdate();",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 213,
          "old_api": "at",
          "new_api": null,
          "old_text": "t.at(i - 1)",
          "new_text": null,
          "old_line_content": "\t\t\t} else if (t.at(i - 1) == '#') {",
          "new_line_content": "\t\t\t\treturn;",
          "content_same": false
        },
        {
          "line": 728,
          "old_api": "isEmpty",
          "new_api": null,
          "old_text": "getLastText().isEmpty()",
          "new_text": null,
          "old_line_content": "\tbool vis = getLastText().isEmpty();",
          "new_line_content": "void FlatTextarea::updatePlaceholder() {",
          "content_same": false
        },
        {
          "line": 218,
          "old_api": "at",
          "new_api": null,
          "old_text": "t.at(i - 1)",
          "new_text": null,
          "old_line_content": "\t\t\t} else if (t.at(i - 1) == '/') {",
          "new_line_content": "\t\t\t\treturn;",
          "content_same": false
        },
        {
          "line": 731,
          "old_api": "start",
          "new_api": null,
          "old_text": "a_phLeft.start(vis ? 0 : _st.phShift)",
          "new_text": null,
          "old_line_content": "\ta_phLeft.start(vis ? 0 : _st.phShift);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 220,
          "old_api": "mid",
          "new_api": null,
          "old_text": "t.mid(i - 1, pos - p - i + 1)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tstart = t.mid(i - 1, pos - p - i + 1);",
          "new_line_content": "\t\t\t\tif (i < 2) {",
          "content_same": false
        },
        {
          "line": 225,
          "old_api": "at",
          "new_api": null,
          "old_text": "t.at(i - 1)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!t.at(i - 1).isLetterOrNumber() && t.at(i - 1) != '_') break;",
          "new_line_content": "\t\t\tif (pos - p - i > 127 || (!mentionInCommand && (pos - p - i > 63))) break;",
          "content_same": false
        },
        {
          "line": 741,
          "old_api": "selectionEnd",
          "new_api": null,
          "old_text": "c.selectionEnd()",
          "new_text": null,
          "old_line_content": "\tint32 start = c.selectionStart(), end = c.selectionEnd();",
          "new_line_content": "\tQTextCursor c(textCursor());",
          "content_same": false
        },
        {
          "line": 743,
          "old_api": "getText",
          "new_api": null,
          "old_text": "getText(start, end)",
          "new_text": null,
          "old_line_content": "\t\tresult->setText(getText(start, end));",
          "new_line_content": "\tif (end > start) {",
          "content_same": false
        },
        {
          "line": 233,
          "old_api": "position",
          "new_api": null,
          "old_text": "c.position()",
          "new_text": null,
          "old_line_content": "\tint32 pos = c.position();",
          "new_line_content": "\tQTextCursor c(textCursor());",
          "content_same": false
        },
        {
          "line": 236,
          "old_api": "findBlock",
          "new_api": null,
          "old_text": "doc->findBlock(pos)",
          "new_text": null,
          "old_line_content": "\tQTextBlock block = doc->findBlock(pos);",
          "new_line_content": "\tQTextDocument *doc(document());",
          "content_same": false
        },
        {
          "line": 749,
          "old_api": "testFlag",
          "new_api": null,
          "old_text": "e->modifiers().testFlag(Qt::ShiftModifier)",
          "new_text": null,
          "old_line_content": "\tbool shift = e->modifiers().testFlag(Qt::ShiftModifier);",
          "new_line_content": "void FlatTextarea::keyPressEvent(QKeyEvent *e) {",
          "content_same": false
        },
        {
          "line": 241,
          "old_api": "length",
          "new_api": null,
          "old_text": "fr.length()",
          "new_text": null,
          "old_line_content": "\t\tint32 p = fr.position(), e = (p + fr.length());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 754,
          "old_api": "key",
          "new_api": null,
          "old_text": "e->key()",
          "new_text": null,
          "old_line_content": "\tif (macmeta && e->key() == Qt::Key_Backspace) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 244,
          "old_api": "charFormat",
          "new_api": null,
          "old_text": "fr.charFormat()",
          "new_text": null,
          "old_line_content": "\t\tQTextCharFormat f = fr.charFormat();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 756,
          "old_api": "movePosition",
          "new_api": null,
          "old_text": "start.movePosition(QTextCursor::StartOfLine)",
          "new_text": null,
          "old_line_content": "\t\tstart.movePosition(QTextCursor::StartOfLine);",
          "new_line_content": "\t\tQTextCursor tc(textCursor()), start(tc);",
          "content_same": false
        },
        {
          "line": 248,
          "old_api": "text",
          "new_api": null,
          "old_text": "fr.text()",
          "new_text": null,
          "old_line_content": "\t\tQString t(fr.text());",
          "new_line_content": "\t\tbool mentionInCommand = false;",
          "content_same": false
        },
        {
          "line": 761,
          "old_api": "key",
          "new_api": null,
          "old_text": "e->key()",
          "new_text": null,
          "old_line_content": "\t} else if (e->key() == Qt::Key_Escape) {",
          "new_line_content": "\t\temit submitted(ctrl && shift);",
          "content_same": false
        },
        {
          "line": 250,
          "old_api": "at",
          "new_api": null,
          "old_text": "t.at(i - 1)",
          "new_text": null,
          "old_line_content": "\t\t\tif (t.at(i - 1) == '@' || t.at(i - 1) == '#' || t.at(i - 1) == '/') {",
          "new_line_content": "\t\tfor (int i = pos - p; i > 0; --i) {",
          "content_same": false
        },
        {
          "line": 763,
          "old_api": "key",
          "new_api": null,
          "old_text": "e->key()",
          "new_text": null,
          "old_line_content": "\t} else if (e->key() == Qt::Key_Tab || (ctrl && e->key() == Qt::Key_Backtab)) {",
          "new_line_content": "\t\temit cancelled();",
          "content_same": false
        },
        {
          "line": 765,
          "old_api": "ignore",
          "new_api": null,
          "old_text": "e->ignore()",
          "new_text": null,
          "old_line_content": "\t\t\te->ignore();",
          "new_line_content": "\t\tif (ctrl) {",
          "content_same": false
        },
        {
          "line": 254,
          "old_api": "size",
          "new_api": null,
          "old_text": "str.size()",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tfor (; (till < e) && (till - p - i + 1 < str.size()); ++till) {",
          "new_line_content": "\t\t\t\t\tint till = p + i;",
          "content_same": false
        },
        {
          "line": 259,
          "old_api": "at",
          "new_api": null,
          "old_text": "t.at(till - p)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tif (till - p - i + 1 == str.size() && till < e && t.at(till - p) == ' ') {",
          "new_line_content": "\t\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 772,
          "old_api": "modifiers",
          "new_api": null,
          "old_text": "e->modifiers()",
          "new_text": null,
          "old_line_content": "\t\t\te->setModifiers(e->modifiers() & ~Qt::ControlModifier);",
          "new_line_content": "\t\tif (enter && ctrl) {",
          "content_same": false
        },
        {
          "line": 262,
          "old_api": "setPosition",
          "new_api": null,
          "old_text": "c.setPosition(till, QTextCursor::KeepAnchor)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tc.setPosition(till, QTextCursor::KeepAnchor);",
          "new_line_content": "\t\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 775,
          "old_api": "text",
          "new_api": null,
          "old_text": "e->text()",
          "new_text": null,
          "old_line_content": "\t\tQString t(e->text());",
          "new_line_content": "\t\tbool spaceOrReturn = false;",
          "content_same": false
        },
        {
          "line": 265,
          "old_api": "at",
          "new_api": null,
          "old_text": "t.at(i - 2)",
          "new_text": null,
          "old_line_content": "\t\t\t\t} else if ((i == pos - p || t.at(i).isLetter()) && t.at(i - 1) == '@' && i > 2 && (t.at(i - 2).isLetterOrNumber() || t.at(i - 2) == '_') && !mentionInCommand) {",
          "new_line_content": "\t\t\t\t\treturn;",
          "content_same": false
        },
        {
          "line": 781,
          "old_api": "QTextEdit::keyPressEvent(e)",
          "new_api": null,
          "old_text": "QTextEdit::keyPressEvent(e)",
          "new_text": null,
          "old_line_content": "\t\tQTextEdit::keyPressEvent(e);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 784,
          "old_api": "key",
          "new_api": null,
          "old_text": "e->key()",
          "new_text": null,
          "old_line_content": "\t\t\tif (e->key() == Qt::Key_PageUp || e->key() == Qt::Key_Up) {",
          "new_line_content": "\t\t\tbool check = false;",
          "content_same": false
        },
        {
          "line": 273,
          "old_api": "at",
          "new_api": null,
          "old_text": "t.at(i - 1)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!t.at(i - 1).isLetterOrNumber() && t.at(i - 1) != '_') break;",
          "new_line_content": "\t\t\tif (pos - p - i > 127 || (!mentionInCommand && (pos - p - i > 63))) break;",
          "content_same": false
        },
        {
          "line": 787,
          "old_api": "key",
          "new_api": null,
          "old_text": "e->key()",
          "new_text": null,
          "old_line_content": "\t\t\t} else if (e->key() == Qt::Key_PageDown || e->key() == Qt::Key_Down) {",
          "new_line_content": "\t\t\t\tcheck = true;",
          "content_same": false
        },
        {
          "line": 277,
          "old_api": "insertText",
          "new_api": null,
          "old_text": "c.insertText(str + ' ')",
          "new_text": null,
          "old_line_content": "\tc.insertText(str + ' ');",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 792,
          "old_api": "textCursor",
          "new_api": null,
          "old_text": "textCursor()",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (tc == textCursor()) {",
          "new_line_content": "\t\t\tif (check) {",
          "content_same": false
        },
        {
          "line": 281,
          "old_api": "position",
          "new_api": null,
          "old_text": "textCursor().position()",
          "new_text": null,
          "old_line_content": "\tint32 end = textCursor().position(), start = end - 1;",
          "new_line_content": "void FlatTextarea::getSingleEmojiFragment(QString &text, QTextFragment &fragment) const {",
          "content_same": false
        },
        {
          "line": 795,
          "old_api": "setTextCursor",
          "new_api": null,
          "old_text": "setTextCursor(tc)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tsetTextCursor(tc);",
          "new_line_content": "\t\t\t\t} else {",
          "content_same": false
        },
        {
          "line": 287,
          "old_api": "findBlock",
          "new_api": null,
          "old_text": "doc->findBlock(end)",
          "new_text": null,
          "old_line_content": "\tQTextBlock from = doc->findBlock(start), till = doc->findBlock(end);",
          "new_line_content": "\tQTextDocument *doc(document());",
          "content_same": false
        },
        {
          "line": 799,
          "old_api": "spacedReturnedPasted",
          "new_api": null,
          "old_text": "spacedReturnedPasted()",
          "new_text": null,
          "old_line_content": "\t\tif (spaceOrReturn) emit spacedReturnedPasted();",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 290,
          "old_api": "next",
          "new_api": null,
          "old_text": "b.next()",
          "new_text": null,
          "old_line_content": "\tfor (QTextBlock b = from; b != till; b = b.next()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 804,
          "old_api": "x",
          "new_api": null,
          "old_text": "_st.phPos.x()",
          "new_text": null,
          "old_line_content": "\t_phelided = _st.font->m.elidedText(_ph, Qt::ElideRight, width() - _st.textMrg.left() - _st.textMrg.right() - _st.phPos.x() - 1);",
          "new_line_content": "void FlatTextarea::resizeEvent(QResizeEvent *e) {",
          "content_same": false
        },
        {
          "line": 295,
          "old_api": "length",
          "new_api": null,
          "old_text": "fr.length()",
          "new_text": null,
          "old_line_content": "\t\t\tint32 p = fr.position(), e = (p + fr.length());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 809,
          "old_api": "QTextEdit::mousePressEvent(e)",
          "new_api": null,
          "old_text": "QTextEdit::mousePressEvent(e)",
          "new_text": null,
          "old_line_content": "\tQTextEdit::mousePressEvent(e);",
          "new_line_content": "void FlatTextarea::mousePressEvent(QMouseEvent *e) {",
          "content_same": false
        },
        {
          "line": 300,
          "old_api": "charFormat",
          "new_api": null,
          "old_text": "fr.charFormat()",
          "new_text": null,
          "old_line_content": "\t\t\tQTextCharFormat f = fr.charFormat();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 303,
          "old_api": "mid",
          "new_api": null,
          "old_text": "t.mid(start - p, end - start)",
          "new_text": null,
          "old_line_content": "\t\t\t\tt = t.mid(start - p, end - start);",
          "new_line_content": "\t\t\tif (p < start) {",
          "content_same": false
        },
        {
          "line": 305,
          "old_api": "mid",
          "new_api": null,
          "old_text": "t.mid(0, end - p)",
          "new_text": null,
          "old_line_content": "\t\t\t\tt = t.mid(0, end - p);",
          "new_line_content": "\t\t\t} else if (e > end) {",
          "content_same": false
        },
        {
          "line": 307,
          "old_api": "at",
          "new_api": null,
          "old_text": "t.at(0).unicode()",
          "new_text": null,
          "old_line_content": "\t\t\tif (f.isImageFormat() && !t.isEmpty() && t.at(0).unicode() == QChar::ObjectReplacementCharacter) {",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 325,
          "old_api": "getSingleEmojiFragment",
          "new_api": null,
          "old_text": "getSingleEmojiFragment(text, fragment)",
          "new_text": null,
          "old_line_content": "\tgetSingleEmojiFragment(text, fragment);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 327,
          "old_api": "isEmpty",
          "new_api": null,
          "old_text": "text.isEmpty()",
          "new_text": null,
          "old_line_content": "\tif (!text.isEmpty()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 329,
          "old_api": "position",
          "new_api": null,
          "old_text": "fragment.position()",
          "new_text": null,
          "old_line_content": "\t\tt.setPosition(fragment.position());",
          "new_line_content": "\t\tQTextCursor t(textCursor());",
          "content_same": false
        },
        {
          "line": 337,
          "old_api": "QString",
          "new_api": null,
          "old_text": "QString()",
          "new_text": null,
          "old_line_content": "\tif (end >= 0 && end <= start) return QString();",
          "new_line_content": "QString FlatTextarea::getText(int32 start, int32 end) const {",
          "content_same": false
        },
        {
          "line": 343,
          "old_api": "findBlock",
          "new_api": null,
          "old_text": "doc->findBlock(end)",
          "new_text": null,
          "old_line_content": "\tQTextBlock from = full ? doc->begin() : doc->findBlock(start), till = (end < 0) ? doc->end() : doc->findBlock(end);",
          "new_line_content": "\tQTextDocument *doc(document());",
          "content_same": false
        },
        {
          "line": 347,
          "old_api": "next",
          "new_api": null,
          "old_text": "b.next()",
          "new_text": null,
          "old_line_content": "\tfor (QTextBlock b = from; b != till; b = b.next()) {",
          "new_line_content": "\tint32 possibleLen = 0;",
          "content_same": false
        },
        {
          "line": 351,
          "old_api": "reserve",
          "new_api": null,
          "old_text": "result.reserve(possibleLen + 1)",
          "new_text": null,
          "old_line_content": "\tresult.reserve(possibleLen + 1);",
          "new_line_content": "\tQString result;",
          "content_same": false
        },
        {
          "line": 356,
          "old_api": "next",
          "new_api": null,
          "old_text": "b.next()",
          "new_text": null,
          "old_line_content": "\tfor (QTextBlock b = from; b != till; b = b.next()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 361,
          "old_api": "length",
          "new_api": null,
          "old_text": "fragment.length()",
          "new_text": null,
          "old_line_content": "\t\t\tint32 p = full ? 0 : fragment.position(), e = full ? 0 : (p + fragment.length());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 368,
          "old_api": "charFormat",
          "new_api": null,
          "old_text": "fragment.charFormat()",
          "new_text": null,
          "old_line_content": "\t\t\tQTextCharFormat f = fragment.charFormat();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 370,
          "old_api": "text",
          "new_api": null,
          "old_text": "fragment.text()",
          "new_text": null,
          "old_line_content": "\t\t\tQString t(fragment.text());",
          "new_line_content": "\t\t\tQString emojiText;",
          "content_same": false
        },
        {
          "line": 373,
          "old_api": "mid",
          "new_api": null,
          "old_text": "t.mid(start - p, end - start)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tt = t.mid(start - p, end - start);",
          "new_line_content": "\t\t\t\tif (p < start) {",
          "content_same": false
        },
        {
          "line": 375,
          "old_api": "mid",
          "new_api": null,
          "old_text": "t.mid(0, end - p)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tt = t.mid(0, end - p);",
          "new_line_content": "\t\t\t\t} else if (e > end) {",
          "content_same": false
        },
        {
          "line": 378,
          "old_api": "size",
          "new_api": null,
          "old_text": "t.size()",
          "new_text": null,
          "old_line_content": "\t\t\tQChar *ub = t.data(), *uc = ub, *ue = uc + t.size();",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 380,
          "old_api": "unicode",
          "new_api": null,
          "old_text": "uc->unicode()",
          "new_text": null,
          "old_line_content": "\t\t\t\tswitch (uc->unicode()) {",
          "new_line_content": "\t\t\tfor (; uc != ue; ++uc) {",
          "content_same": false
        },
        {
          "line": 385,
          "old_api": "QLatin1Char",
          "new_api": null,
          "old_text": "QLatin1Char('\\n')",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t*uc = QLatin1Char('\\n');",
          "new_line_content": "\t\t\t\tcase QChar::LineSeparator:",
          "content_same": false
        },
        {
          "line": 388,
          "old_api": "QLatin1Char",
          "new_api": null,
          "old_text": "QLatin1Char(' ')",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t*uc = QLatin1Char(' ');",
          "new_line_content": "\t\t\t\tcase QChar::Nbsp:",
          "content_same": false
        },
        {
          "line": 391,
          "old_api": "isImageFormat",
          "new_api": null,
          "old_text": "f.isImageFormat()",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tif (emojiText.isEmpty() && f.isImageFormat()) {",
          "new_line_content": "\t\t\t\tcase QChar::ObjectReplacementCharacter:",
          "content_same": false
        },
        {
          "line": 399,
          "old_api": "append",
          "new_api": null,
          "old_text": "result.append(ub, uc - ub)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tif (uc > ub) result.append(ub, uc - ub);",
          "new_line_content": "\t\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 405,
          "old_api": "append",
          "new_api": null,
          "old_text": "result.append(ub, uc - ub)",
          "new_text": null,
          "old_line_content": "\t\t\tif (uc > ub) result.append(ub, uc - ub);",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 407,
          "old_api": "append",
          "new_api": null,
          "old_text": "result.append('\\n')",
          "new_text": null,
          "old_line_content": "\t\tresult.append('\\n');",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 409,
          "old_api": "chop",
          "new_api": null,
          "old_text": "result.chop(1)",
          "new_text": null,
          "old_line_content": "\tresult.chop(1);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 415,
          "old_api": "end",
          "new_api": null,
          "old_text": "doc->end()",
          "new_text": null,
          "old_line_content": "\tQTextBlock from = doc->begin(), till = doc->end();",
          "new_line_content": "\tQTextDocument *doc(document());",
          "content_same": false
        },
        {
          "line": 419,
          "old_api": "atEnd",
          "new_api": null,
          "old_text": "iter.atEnd()",
          "new_text": null,
          "old_line_content": "\tfor (QTextBlock::Iterator iter = from.begin(); !iter.atEnd(); ++iter) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 424,
          "old_api": "next",
          "new_api": null,
          "old_text": "from.next()",
          "new_text": null,
          "old_line_content": "\treturn (from.next() != till);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 439,
          "old_api": "isEmpty",
          "new_api": null,
          "old_text": "text.isEmpty()",
          "new_text": null,
          "old_line_content": "\tif (text.isEmpty()) {",
          "new_line_content": "\tQString text(toPlainText());",
          "content_same": false
        },
        {
          "line": 447,
          "old_api": "initLinkSets",
          "new_api": null,
          "old_text": "initLinkSets()",
          "new_text": null,
          "old_line_content": "\tinitLinkSets();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 449,
          "old_api": "size",
          "new_api": null,
          "old_text": "text.size()",
          "new_text": null,
          "old_line_content": "\tint32 len = text.size();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 452,
          "old_api": "match",
          "new_api": null,
          "old_text": "reDomain().match(text, matchOffset)",
          "new_text": null,
          "old_line_content": "\t\tQRegularExpressionMatch m = reDomain().match(text, matchOffset);",
          "new_line_content": "\tfor (int32 offset = 0, matchOffset = offset; offset < len;) {",
          "content_same": false
        },
        {
          "line": 455,
          "old_api": "capturedStart",
          "new_api": null,
          "old_text": "m.capturedStart()",
          "new_text": null,
          "old_line_content": "\t\tint32 domainOffset = m.capturedStart();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 457,
          "old_api": "captured",
          "new_api": null,
          "old_text": "m.captured(1).toLower()",
          "new_text": null,
          "old_line_content": "\t\tQString protocol = m.captured(1).toLower();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 460,
          "old_api": "size",
          "new_api": null,
          "old_text": "protocol.size()",
          "new_text": null,
          "old_line_content": "\t\tbool isProtocolValid = protocol.isEmpty() || validProtocols().contains(hashCrc32(protocol.constData(), protocol.size() * sizeof(QChar)));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 463,
          "old_api": "QChar",
          "new_api": null,
          "old_text": "QChar('@')",
          "new_text": null,
          "old_line_content": "\t\tif (protocol.isEmpty() && domainOffset > offset + 1 && *(start + domainOffset - 1) == QChar('@')) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 472,
          "old_api": "capturedEnd",
          "new_api": null,
          "old_text": "m.capturedEnd()",
          "new_text": null,
          "old_line_content": "\t\t\toffset = matchOffset = m.capturedEnd();",
          "new_line_content": "\t\tif (!isProtocolValid || !isTopDomainValid) {",
          "content_same": false
        },
        {
          "line": 477,
          "old_api": "capturedEnd",
          "new_api": null,
          "old_text": "m.capturedEnd()",
          "new_text": null,
          "old_line_content": "\t\tconst QChar *domainEnd = start + m.capturedEnd(), *p = domainEnd;",
          "new_line_content": "\t\tQStack<const QChar*> parenth;",
          "content_same": false
        },
        {
          "line": 480,
          "old_api": "chIsLinkEnd",
          "new_api": null,
          "old_text": "chIsLinkEnd(ch)",
          "new_text": null,
          "old_line_content": "\t\t\tif (chIsLinkEnd(ch)) break; // link finished",
          "new_line_content": "\t\t\tQChar ch(*p);",
          "content_same": false
        },
        {
          "line": 483,
          "old_api": "chIsAlmostLinkEnd",
          "new_api": null,
          "old_text": "chIsAlmostLinkEnd(*endTest)",
          "new_text": null,
          "old_line_content": "\t\t\t\twhile (endTest < end && chIsAlmostLinkEnd(*endTest)) {",
          "new_line_content": "\t\t\t\tconst QChar *endTest = p + 1;",
          "content_same": false
        },
        {
          "line": 486,
          "old_api": "chIsLinkEnd",
          "new_api": null,
          "old_text": "chIsLinkEnd(*endTest)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (endTest >= end || chIsLinkEnd(*endTest)) {",
          "new_line_content": "\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 493,
          "old_api": "push",
          "new_api": null,
          "old_text": "parenth.push(p)",
          "new_text": null,
          "old_line_content": "\t\t\t\tparenth.push(p);",
          "new_line_content": "\t\t\tif (ch == '(' || ch == '[' || ch == '{' || ch == '<') {",
          "content_same": false
        },
        {
          "line": 495,
          "old_api": "isEmpty",
          "new_api": null,
          "old_text": "parenth.isEmpty()",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (parenth.isEmpty()) break;",
          "new_line_content": "\t\t\t} else if (ch == ')' || ch == ']' || ch == '}' || ch == '>') {",
          "content_same": false
        },
        {
          "line": 504,
          "old_api": "unicode",
          "new_api": null,
          "old_text": "domainEnd->unicode()",
          "new_text": null,
          "old_line_content": "\t\t\tif (domainEnd->unicode() != '/' && domainEnd->unicode() != '?') {",
          "new_line_content": "\t\tif (p > domainEnd) { // check, that domain ended",
          "content_same": false
        },
        {
          "line": 509,
          "old_api": "qMakePair",
          "new_api": null,
          "old_text": "qMakePair(domainOffset - 1, p - start - domainOffset + 2)",
          "new_text": null,
          "old_line_content": "\t\tnewLinks.push_back(qMakePair(domainOffset - 1, p - start - domainOffset + 2));",
          "new_line_content": "\t\t}",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 93,
      "total_additions": 139,
      "total_deletions": 138,
      "total_api_changes": 370
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 4,
        "api_related_lines": 370,
        "non_api_lines": 1,
        "non_api_line_numbers": [
          131
        ]
      }
    },
    "api_calls_before": 498,
    "api_calls_after": 499,
    "diff_info": {
      "added_lines": 3,
      "removed_lines": 2,
      "total_diff_lines": 24
    }
  }
}
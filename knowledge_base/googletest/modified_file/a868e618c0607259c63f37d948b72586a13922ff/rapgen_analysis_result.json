{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/googletest/modified_file/a868e618c0607259c63f37d948b72586a13922ff",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/googletest/modified_file/a868e618c0607259c63f37d948b72586a13922ff/before.cc",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/googletest/modified_file/a868e618c0607259c63f37d948b72586a13922ff/after.cc",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/googletest/modified_file/a868e618c0607259c63f37d948b72586a13922ff/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 183,
          "old_api": "static_cast<UnsignedChar>(c)",
          "new_api": "flags",
          "old_text": "static_cast<UnsignedChar>(c)",
          "new_text": "os->flags()",
          "old_line_content": "        *os << \"\\\\x\" + String::FormatHexInt(static_cast<UnsignedChar>(c));",
          "new_line_content": "        ostream::fmtflags flags = os->flags();",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 272,
          "old_api": null,
          "new_api": "IsXDigit",
          "old_text": null,
          "new_text": "IsXDigit(cur)",
          "old_line_content": "      // disambiguate.",
          "new_line_content": "    if (is_previous_hex && IsXDigit(cur)) {",
          "content_same": false
        },
        {
          "line": 278,
          "old_api": null,
          "new_api": "PrintAsStringLiteralTo",
          "old_text": null,
          "new_text": "PrintAsStringLiteralTo(cur, os)",
          "old_line_content": "}",
          "new_line_content": "    is_previous_hex = PrintAsStringLiteralTo(cur, os) == kHexEscape;",
          "content_same": false
        },
        {
          "line": 299,
          "old_api": null,
          "new_api": "PrintCharsAsStringTo",
          "old_text": null,
          "new_text": "PrintCharsAsStringTo(begin, len - 1, os)",
          "old_line_content": "",
          "new_line_content": "    PrintCharsAsStringTo(begin, len - 1, os);",
          "content_same": false
        },
        {
          "line": 307,
          "old_api": null,
          "new_api": "PrintCharsAsStringTo",
          "old_text": null,
          "new_text": "PrintCharsAsStringTo(begin, len, os)",
          "old_line_content": "",
          "new_line_content": "  PrintCharsAsStringTo(begin, len, os);",
          "content_same": false
        },
        {
          "line": 313,
          "old_api": null,
          "new_api": "UniversalPrintCharArray",
          "old_text": null,
          "new_text": "UniversalPrintCharArray(begin, len, os)",
          "old_line_content": "// Prints a (const) wchar_t array of 'len' elements, starting at address",
          "new_line_content": "  UniversalPrintCharArray(begin, len, os);",
          "content_same": false
        },
        {
          "line": 185,
          "old_api": null,
          "new_api": "static_cast<UnsignedChar>(c)",
          "old_text": null,
          "new_text": "static_cast<UnsignedChar>(c)",
          "old_line_content": "      }",
          "new_line_content": "            << static_cast<int>(static_cast<UnsignedChar>(c));",
          "content_same": false
        },
        {
          "line": 186,
          "old_api": null,
          "new_api": "flags",
          "old_text": null,
          "new_text": "os->flags(flags)",
          "old_line_content": "  }",
          "new_line_content": "        os->flags(flags);",
          "content_same": false
        },
        {
          "line": 319,
          "old_api": null,
          "new_api": "UniversalPrintCharArray",
          "old_text": null,
          "new_text": "UniversalPrintCharArray(begin, len, os)",
          "old_line_content": "// Prints the given C string to the ostream.",
          "new_line_content": "  UniversalPrintCharArray(begin, len, os);",
          "content_same": false
        },
        {
          "line": 327,
          "old_api": null,
          "new_api": "ImplicitCast_<const void*>(s)",
          "old_text": null,
          "new_text": "ImplicitCast_<const void*>(s)",
          "old_line_content": "}",
          "new_line_content": "    *os << ImplicitCast_<const void*>(s) << \" pointing to \";",
          "content_same": false
        },
        {
          "line": 328,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(s)",
          "old_line_content": "",
          "new_line_content": "    PrintCharsAsStringTo(s, strlen(s), os);",
          "content_same": false
        },
        {
          "line": 204,
          "old_api": null,
          "new_api": "PrintAsCharLiteralTo<wchar_t>(c, os)",
          "old_text": null,
          "new_text": "PrintAsCharLiteralTo<wchar_t>(c, os)",
          "old_line_content": "",
          "new_line_content": "      return PrintAsCharLiteralTo<wchar_t>(c, os);",
          "content_same": false
        },
        {
          "line": 211,
          "old_api": null,
          "new_api": "PrintAsStringLiteralTo",
          "old_text": null,
          "new_text": "PrintAsStringLiteralTo(\n      static_cast<wchar_t>(static_cast<unsigned char>(c)), os)",
          "old_line_content": "",
          "new_line_content": "  return PrintAsStringLiteralTo(",
          "content_same": false
        },
        {
          "line": 212,
          "old_api": null,
          "new_api": "static_cast<unsigned char>(c)",
          "old_text": null,
          "new_text": "static_cast<unsigned char>(c)",
          "old_line_content": "// Prints a wide or narrow character c and its code.  '\\0' is printed",
          "new_line_content": "      static_cast<wchar_t>(static_cast<unsigned char>(c)), os);",
          "content_same": false
        },
        {
          "line": 344,
          "old_api": null,
          "new_api": "ImplicitCast_<const void*>(s)",
          "old_text": null,
          "new_text": "ImplicitCast_<const void*>(s)",
          "old_line_content": "}",
          "new_line_content": "    *os << ImplicitCast_<const void*>(s) << \" pointing to \";",
          "content_same": false
        },
        {
          "line": 345,
          "old_api": null,
          "new_api": "std::wcslen(s)",
          "old_text": null,
          "new_text": "std::wcslen(s)",
          "old_line_content": "#endif  // wchar_t is native",
          "new_line_content": "    PrintCharsAsStringTo(s, std::wcslen(s), os);",
          "content_same": false
        },
        {
          "line": 223,
          "old_api": null,
          "new_api": "PrintAsCharLiteralTo<UnsignedChar>(c, os)",
          "old_text": null,
          "new_text": "PrintAsCharLiteralTo<UnsignedChar>(c, os)",
          "old_line_content": "  // To aid user debugging, we also print c's code in decimal, unless",
          "new_line_content": "  const CharFormat format = PrintAsCharLiteralTo<UnsignedChar>(c, os);",
          "content_same": false
        },
        {
          "line": 353,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "s.size()",
          "old_line_content": "",
          "new_line_content": "  PrintCharsAsStringTo(s.data(), s.size(), os);",
          "content_same": false
        },
        {
          "line": 358,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "s.size()",
          "old_line_content": "// Prints a ::wstring object.",
          "new_line_content": "  PrintCharsAsStringTo(s.data(), s.size(), os);",
          "content_same": false
        },
        {
          "line": 231,
          "old_api": null,
          "new_api": "static_cast<int>(c)",
          "old_text": null,
          "new_text": "static_cast<int>(c)",
          "old_line_content": "  // unless c was already printed in the form '\\x##' or the code is in",
          "new_line_content": "  *os << \" (\" << static_cast<int>(c);",
          "content_same": false
        },
        {
          "line": 364,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "s.size()",
          "old_line_content": "",
          "new_line_content": "  PrintCharsAsStringTo(s.data(), s.size(), os);",
          "content_same": false
        },
        {
          "line": 239,
          "old_api": null,
          "new_api": "static_cast<UnsignedChar>(c)",
          "old_text": null,
          "new_text": "static_cast<UnsignedChar>(c)",
          "old_line_content": "}",
          "new_line_content": "    *os << \", 0x\" << String::FormatHexInt(static_cast<UnsignedChar>(c));",
          "content_same": false
        },
        {
          "line": 370,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "s.size()",
          "old_line_content": "",
          "new_line_content": "  PrintCharsAsStringTo(s.data(), s.size(), os);",
          "content_same": false
        },
        {
          "line": 248,
          "old_api": null,
          "new_api": "PrintCharAndCodeTo<unsigned char>(c, os)",
          "old_text": null,
          "new_text": "PrintCharAndCodeTo<unsigned char>(c, os)",
          "old_line_content": "// Prints a wchar_t as a symbol if it is printable or as its internal",
          "new_line_content": "  PrintCharAndCodeTo<unsigned char>(c, os);",
          "content_same": false
        },
        {
          "line": 254,
          "old_api": null,
          "new_api": "PrintCharAndCodeTo<wchar_t>(wc, os)",
          "old_text": null,
          "new_text": "PrintCharAndCodeTo<wchar_t>(wc, os)",
          "old_line_content": "// Prints the given array of characters to the ostream.  CharType must be either",
          "new_line_content": "  PrintCharAndCodeTo<wchar_t>(wc, os);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 269,
          "old_api": "IsXDigit",
          "new_api": null,
          "old_text": "IsXDigit(cur)",
          "new_text": null,
          "old_line_content": "    if (is_previous_hex && IsXDigit(cur)) {",
          "new_line_content": "  bool is_previous_hex = false;",
          "content_same": false
        },
        {
          "line": 275,
          "old_api": "PrintAsStringLiteralTo",
          "new_api": null,
          "old_text": "PrintAsStringLiteralTo(cur, os)",
          "new_text": null,
          "old_line_content": "    is_previous_hex = PrintAsStringLiteralTo(cur, os) == kHexEscape;",
          "new_line_content": "      // disambiguate.",
          "content_same": false
        },
        {
          "line": 296,
          "old_api": "PrintCharsAsStringTo",
          "new_api": null,
          "old_text": "PrintCharsAsStringTo(begin, len - 1, os)",
          "new_text": null,
          "old_line_content": "    PrintCharsAsStringTo(begin, len - 1, os);",
          "new_line_content": "  // it's '\\0', such that the output matches the string literal as it's",
          "content_same": false
        },
        {
          "line": 304,
          "old_api": "PrintCharsAsStringTo",
          "new_api": null,
          "old_text": "PrintCharsAsStringTo(begin, len, os)",
          "new_text": null,
          "old_line_content": "  PrintCharsAsStringTo(begin, len, os);",
          "new_line_content": "  //    const char kFoo[] = { 'f', 'o', 'o' };",
          "content_same": false
        },
        {
          "line": 310,
          "old_api": "UniversalPrintCharArray",
          "new_api": null,
          "old_text": "UniversalPrintCharArray(begin, len, os)",
          "new_text": null,
          "old_line_content": "  UniversalPrintCharArray(begin, len, os);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 316,
          "old_api": "UniversalPrintCharArray",
          "new_api": null,
          "old_text": "UniversalPrintCharArray(begin, len, os)",
          "new_text": null,
          "old_line_content": "  UniversalPrintCharArray(begin, len, os);",
          "new_line_content": "// Prints a (const) wchar_t array of 'len' elements, starting at address",
          "content_same": false
        },
        {
          "line": 324,
          "old_api": "ImplicitCast_<const void*>(s)",
          "new_api": null,
          "old_text": "ImplicitCast_<const void*>(s)",
          "new_text": null,
          "old_line_content": "    *os << ImplicitCast_<const void*>(s) << \" pointing to \";",
          "new_line_content": "  if (s == NULL) {",
          "content_same": false
        },
        {
          "line": 325,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(s)",
          "new_text": null,
          "old_line_content": "    PrintCharsAsStringTo(s, strlen(s), os);",
          "new_line_content": "    *os << \"NULL\";",
          "content_same": false
        },
        {
          "line": 201,
          "old_api": "PrintAsCharLiteralTo<wchar_t>(c, os)",
          "new_api": null,
          "old_text": "PrintAsCharLiteralTo<wchar_t>(c, os)",
          "new_text": null,
          "old_line_content": "      return PrintAsCharLiteralTo<wchar_t>(c, os);",
          "new_line_content": "      *os << \"\\\\\\\"\";",
          "content_same": false
        },
        {
          "line": 208,
          "old_api": "PrintAsStringLiteralTo",
          "new_api": null,
          "old_text": "PrintAsStringLiteralTo(\n      static_cast<wchar_t>(static_cast<unsigned char>(c)), os)",
          "new_text": null,
          "old_line_content": "  return PrintAsStringLiteralTo(",
          "new_line_content": "// Prints a char c as if it's part of a string literal, escaping it when",
          "content_same": false
        },
        {
          "line": 209,
          "old_api": "static_cast<unsigned char>(c)",
          "new_api": null,
          "old_text": "static_cast<unsigned char>(c)",
          "new_text": null,
          "old_line_content": "      static_cast<wchar_t>(static_cast<unsigned char>(c)), os);",
          "new_line_content": "// necessary; returns how c was formatted.",
          "content_same": false
        },
        {
          "line": 341,
          "old_api": "ImplicitCast_<const void*>(s)",
          "new_api": null,
          "old_text": "ImplicitCast_<const void*>(s)",
          "new_text": null,
          "old_line_content": "    *os << ImplicitCast_<const void*>(s) << \" pointing to \";",
          "new_line_content": "  if (s == NULL) {",
          "content_same": false
        },
        {
          "line": 342,
          "old_api": "std::wcslen(s)",
          "new_api": null,
          "old_text": "std::wcslen(s)",
          "new_text": null,
          "old_line_content": "    PrintCharsAsStringTo(s, std::wcslen(s), os);",
          "new_line_content": "    *os << \"NULL\";",
          "content_same": false
        },
        {
          "line": 220,
          "old_api": "PrintAsCharLiteralTo<UnsignedChar>(c, os)",
          "new_api": null,
          "old_text": "PrintAsCharLiteralTo<UnsignedChar>(c, os)",
          "new_text": null,
          "old_line_content": "  const CharFormat format = PrintAsCharLiteralTo<UnsignedChar>(c, os);",
          "new_line_content": "void PrintCharAndCodeTo(Char c, ostream* os) {",
          "content_same": false
        },
        {
          "line": 350,
          "old_api": "size",
          "new_api": null,
          "old_text": "s.size()",
          "new_text": null,
          "old_line_content": "  PrintCharsAsStringTo(s.data(), s.size(), os);",
          "new_line_content": "// Prints a ::string object.",
          "content_same": false
        },
        {
          "line": 355,
          "old_api": "size",
          "new_api": null,
          "old_text": "s.size()",
          "new_text": null,
          "old_line_content": "  PrintCharsAsStringTo(s.data(), s.size(), os);",
          "new_line_content": "#endif  // GTEST_HAS_GLOBAL_STRING",
          "content_same": false
        },
        {
          "line": 228,
          "old_api": "static_cast<int>(c)",
          "new_api": null,
          "old_text": "static_cast<int>(c)",
          "new_text": null,
          "old_line_content": "  *os << \" (\" << static_cast<int>(c);",
          "new_line_content": "  // obvious).",
          "content_same": false
        },
        {
          "line": 361,
          "old_api": "size",
          "new_api": null,
          "old_text": "s.size()",
          "new_text": null,
          "old_line_content": "  PrintCharsAsStringTo(s.data(), s.size(), os);",
          "new_line_content": "// Prints a ::wstring object.",
          "content_same": false
        },
        {
          "line": 236,
          "old_api": "static_cast<UnsignedChar>(c)",
          "new_api": null,
          "old_text": "static_cast<UnsignedChar>(c)",
          "new_text": null,
          "old_line_content": "    *os << \", 0x\" << String::FormatHexInt(static_cast<UnsignedChar>(c));",
          "new_line_content": "  if (format == kHexEscape || (1 <= c && c <= 9)) {",
          "content_same": false
        },
        {
          "line": 367,
          "old_api": "size",
          "new_api": null,
          "old_text": "s.size()",
          "new_text": null,
          "old_line_content": "  PrintCharsAsStringTo(s.data(), s.size(), os);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 242,
          "old_api": "PrintCharAndCodeTo<unsigned char>(c, os)",
          "new_api": null,
          "old_text": "PrintCharAndCodeTo<unsigned char>(c, os)",
          "new_text": null,
          "old_line_content": "  PrintCharAndCodeTo<unsigned char>(c, os);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 251,
          "old_api": "PrintCharAndCodeTo<wchar_t>(wc, os)",
          "new_api": null,
          "old_text": "PrintCharAndCodeTo<wchar_t>(wc, os)",
          "new_text": null,
          "old_line_content": "  PrintCharAndCodeTo<wchar_t>(wc, os);",
          "new_line_content": "// Prints a wchar_t as a symbol if it is printable or as its internal",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 1,
      "total_additions": 24,
      "total_deletions": 22,
      "total_api_changes": 47
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 5,
        "api_related_lines": 47,
        "non_api_lines": 4,
        "non_api_line_numbers": [
          193,
          187,
          189,
          191
        ]
      }
    },
    "api_calls_before": 45,
    "api_calls_after": 47,
    "diff_info": {
      "added_lines": 5,
      "removed_lines": 2,
      "total_diff_lines": 29
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/a317f55d25a69b55c07a49dde20989f1ac8aefe0",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/a317f55d25a69b55c07a49dde20989f1ac8aefe0/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/a317f55d25a69b55c07a49dde20989f1ac8aefe0/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/a317f55d25a69b55c07a49dde20989f1ac8aefe0/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 709,
          "old_api": "lpNext",
          "new_api": "lpFree",
          "old_text": "lpNext(lp,p)",
          "new_text": "lpFree(lp)",
          "old_line_content": "    p = lpNext(lp,p); /* Seek deleted field. */",
          "new_line_content": "        lpFree(lp);",
          "content_same": false
        },
        {
          "line": 710,
          "old_api": "lpGetInteger",
          "new_api": "raxRemove",
          "old_text": "lpGetInteger(p)",
          "new_text": "raxRemove(si->stream->rax,si->ri.key,si->ri.key_len,NULL)",
          "old_line_content": "    aux = lpGetInteger(p);",
          "new_line_content": "        raxRemove(si->stream->rax,si->ri.key,si->ri.key_len,NULL);",
          "content_same": false
        },
        {
          "line": 789,
          "old_api": "createStringObject",
          "new_api": "sdslen",
          "old_text": "createStringObject(\"RETRYCOUNT\",10)",
          "new_text": "sdslen(nack->consumer->name)",
          "old_line_content": "    argv[8] = createStringObject(\"RETRYCOUNT\",10);",
          "new_line_content": "    argv[3] = createStringObject(nack->consumer->name,sdslen(nack->consumer->name));",
          "content_same": false
        },
        {
          "line": 793,
          "old_api": "propagate",
          "new_api": "createStringObjectFromLongLong",
          "old_text": "propagate(server.xclaimCommand,c->db->id,argv,12,PROPAGATE_AOF|PROPAGATE_REPL)",
          "new_text": "createStringObjectFromLongLong(nack->delivery_time)",
          "old_line_content": "    propagate(server.xclaimCommand,c->db->id,argv,12,PROPAGATE_AOF|PROPAGATE_REPL);",
          "new_line_content": "    argv[7] = createStringObjectFromLongLong(nack->delivery_time);",
          "content_same": false
        },
        {
          "line": 794,
          "old_api": "decrRefCount",
          "new_api": "createStringObject",
          "old_text": "decrRefCount(argv[0])",
          "new_text": "createStringObject(\"RETRYCOUNT\",10)",
          "old_line_content": "    decrRefCount(argv[0]);",
          "new_line_content": "    argv[8] = createStringObject(\"RETRYCOUNT\",10);",
          "content_same": false
        },
        {
          "line": 795,
          "old_api": "decrRefCount",
          "new_api": "createStringObjectFromLongLong",
          "old_text": "decrRefCount(argv[3])",
          "new_text": "createStringObjectFromLongLong(nack->delivery_count)",
          "old_line_content": "    decrRefCount(argv[3]);",
          "new_line_content": "    argv[9] = createStringObjectFromLongLong(nack->delivery_count);",
          "content_same": false
        },
        {
          "line": 796,
          "old_api": "decrRefCount",
          "new_api": "createStringObject",
          "old_text": "decrRefCount(argv[4])",
          "new_text": "createStringObject(\"FORCE\",5)",
          "old_line_content": "    decrRefCount(argv[4]);",
          "new_line_content": "    argv[10] = createStringObject(\"FORCE\",5);",
          "content_same": false
        },
        {
          "line": 797,
          "old_api": "decrRefCount",
          "new_api": "createStringObject",
          "old_text": "decrRefCount(argv[6])",
          "new_text": "createStringObject(\"JUSTID\",6)",
          "old_line_content": "    decrRefCount(argv[6]);",
          "new_line_content": "    argv[11] = createStringObject(\"JUSTID\",6);",
          "content_same": false
        },
        {
          "line": 798,
          "old_api": "decrRefCount",
          "new_api": "propagate",
          "old_text": "decrRefCount(argv[7])",
          "new_text": "propagate(server.xclaimCommand,c->db->id,argv,12,PROPAGATE_AOF|PROPAGATE_REPL)",
          "old_line_content": "    decrRefCount(argv[7]);",
          "new_line_content": "    propagate(server.xclaimCommand,c->db->id,argv,12,PROPAGATE_AOF|PROPAGATE_REPL);",
          "content_same": false
        },
        {
          "line": 869,
          "old_api": "addDeferredMultiBulkLength",
          "new_api": "streamReplyWithRangeFromConsumerPEL",
          "old_text": "addDeferredMultiBulkLength(c)",
          "new_text": "streamReplyWithRangeFromConsumerPEL(c,s,start,end,count,\n                                                   consumer)",
          "old_line_content": "        arraylen_ptr = addDeferredMultiBulkLength(c);",
          "new_line_content": "        return streamReplyWithRangeFromConsumerPEL(c,s,start,end,count,",
          "content_same": false
        },
        {
          "line": 878,
          "old_api": "addReplyMultiBulkLen",
          "new_api": "streamCompareID",
          "old_text": "addReplyMultiBulkLen(c,2)",
          "new_text": "streamCompareID(&id,&group->last_id)",
          "old_line_content": "        addReplyMultiBulkLen(c,2);",
          "new_line_content": "        if (group && streamCompareID(&id,&group->last_id) > 0)",
          "content_same": false
        },
        {
          "line": 907,
          "old_api": "streamCreateNACK",
          "new_api": "streamEncodeID",
          "old_text": "streamCreateNACK(consumer)",
          "new_text": "streamEncodeID(buf,&id)",
          "old_line_content": "            streamNACK *nack = streamCreateNACK(consumer);",
          "new_line_content": "            streamEncodeID(buf,&id);",
          "content_same": false
        },
        {
          "line": 923,
          "old_api": "mstime",
          "new_api": "raxFind",
          "old_text": "mstime()",
          "new_text": "raxFind(group->pel,buf,sizeof(buf))",
          "old_line_content": "                nack->delivery_time = mstime();",
          "new_line_content": "                nack = raxFind(group->pel,buf,sizeof(buf));",
          "content_same": false
        },
        {
          "line": 928,
          "old_api": "serverPanic",
          "new_api": "mstime",
          "old_text": "serverPanic(\"NACK half-created. Should not be possible.\")",
          "new_text": "mstime()",
          "old_line_content": "                serverPanic(\"NACK half-created. Should not be possible.\");",
          "new_line_content": "                nack->delivery_time = mstime();",
          "content_same": false
        },
        {
          "line": 933,
          "old_api": "createObjectFromStreamID",
          "new_api": "serverPanic",
          "old_text": "createObjectFromStreamID(&id)",
          "new_text": "serverPanic(\"NACK half-created. Should not be possible.\")",
          "old_line_content": "                robj *idarg = createObjectFromStreamID(&id);",
          "new_line_content": "                serverPanic(\"NACK half-created. Should not be possible.\");",
          "content_same": false
        },
        {
          "line": 969,
          "old_api": "raxStart",
          "new_api": "streamEncodeID",
          "old_text": "raxStart(&ri,consumer->pel)",
          "new_text": "streamEncodeID(startkey,start)",
          "old_line_content": "    raxStart(&ri,consumer->pel);",
          "new_line_content": "    streamEncodeID(startkey,start);",
          "content_same": false
        },
        {
          "line": 970,
          "old_api": "raxSeek",
          "new_api": "streamEncodeID",
          "old_text": "raxSeek(&ri,\">=\",startkey,sizeof(startkey))",
          "new_text": "streamEncodeID(endkey,end)",
          "old_line_content": "    raxSeek(&ri,\">=\",startkey,sizeof(startkey));",
          "new_line_content": "    if (end) streamEncodeID(endkey,end);",
          "content_same": false
        },
        {
          "line": 974,
          "old_api": "streamDecodeID",
          "new_api": "raxStart",
          "old_text": "streamDecodeID(ri.key,&thisid)",
          "new_text": "raxStart(&ri,consumer->pel)",
          "old_line_content": "        streamDecodeID(ri.key,&thisid);",
          "new_line_content": "    raxStart(&ri,consumer->pel);",
          "content_same": false
        },
        {
          "line": 975,
          "old_api": "streamReplyWithRange",
          "new_api": "raxSeek",
          "old_text": "streamReplyWithRange(c,s,&thisid,NULL,1,0,NULL,NULL,\n                                 STREAM_RWR_RAWENTRIES,NULL)",
          "new_text": "raxSeek(&ri,\">=\",startkey,sizeof(startkey))",
          "old_line_content": "        if (streamReplyWithRange(c,s,&thisid,NULL,1,0,NULL,NULL,",
          "new_line_content": "    raxSeek(&ri,\">=\",startkey,sizeof(startkey));",
          "content_same": false
        },
        {
          "line": 989,
          "old_api": "mstime",
          "new_api": "streamDecodeID",
          "old_text": "mstime()",
          "new_text": "streamDecodeID(ri.key,&id)",
          "old_line_content": "            nack->delivery_time = mstime();",
          "new_line_content": "            streamDecodeID(ri.key,&id);",
          "content_same": false
        },
        {
          "line": 994,
          "old_api": "raxStop",
          "new_api": "mstime",
          "old_text": "raxStop(&ri)",
          "new_text": "mstime()",
          "old_line_content": "    raxStop(&ri);",
          "new_line_content": "            nack->delivery_time = mstime();",
          "content_same": false
        },
        {
          "line": 1155,
          "old_api": "streamTrimByLength",
          "new_api": "notifyKeyspaceEvent",
          "old_text": "streamTrimByLength(s,maxlen,approx_maxlen)",
          "new_text": "notifyKeyspaceEvent(NOTIFY_STREAM,\"xadd\",c->argv[1],c->db->id)",
          "old_line_content": "        if (!streamTrimByLength(s,maxlen,approx_maxlen)) {",
          "new_line_content": "    notifyKeyspaceEvent(NOTIFY_STREAM,\"xadd\",c->argv[1],c->db->id);",
          "content_same": false
        },
        {
          "line": 1160,
          "old_api": "rewriteClientCommandArgument",
          "new_api": "streamTrimByLength",
          "old_text": "rewriteClientCommandArgument(c,maxlen_arg_idx,zeroobj)",
          "new_text": "streamTrimByLength(s,maxlen,approx_maxlen)",
          "old_line_content": "            rewriteClientCommandArgument(c,maxlen_arg_idx,zeroobj);",
          "new_line_content": "        if (!streamTrimByLength(s,maxlen,approx_maxlen)) {",
          "content_same": false
        },
        {
          "line": 1176,
          "old_api": "signalKeyAsReady",
          "new_api": "decrRefCount",
          "old_text": "signalKeyAsReady(c->db, c->argv[1])",
          "new_text": "decrRefCount(idarg)",
          "old_line_content": "        signalKeyAsReady(c->db, c->argv[1]);",
          "new_line_content": "    decrRefCount(idarg);",
          "content_same": false
        },
        {
          "line": 1201,
          "old_api": "addReply",
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": "getLongLongFromObjectOrReply(c,c->argv[j+1],&count,NULL)",
          "old_line_content": "                addReply(c,shared.syntaxerr);",
          "new_line_content": "                if (getLongLongFromObjectOrReply(c,c->argv[j+1],&count,NULL)",
          "content_same": false
        },
        {
          "line": 1216,
          "old_api": "xrangeGenericCommand",
          "new_api": "streamReplyWithRange",
          "old_text": "xrangeGenericCommand(c,0)",
          "new_text": "streamReplyWithRange(c,s,&startid,&endid,count,rev,NULL,NULL,0,NULL)",
          "old_line_content": "    xrangeGenericCommand(c,0);",
          "new_line_content": "    streamReplyWithRange(c,s,&startid,&endid,count,rev,NULL,NULL,0,NULL);",
          "content_same": false
        },
        {
          "line": 1429,
          "old_api": "streamReplyWithRange",
          "new_api": "addReplyBulk",
          "old_text": "streamReplyWithRange(c,s,&start,NULL,count,0,\n                                 groups ? groups[i] : NULL,\n                                 consumer, noack, &spi)",
          "new_text": "addReplyBulk(c,c->argv[streams_arg+i])",
          "old_line_content": "            streamReplyWithRange(c,s,&start,NULL,count,0,",
          "new_line_content": "            addReplyBulk(c,c->argv[streams_arg+i]);",
          "content_same": false
        },
        {
          "line": 1531,
          "old_api": "raxNew",
          "new_api": "raxFind",
          "old_text": "raxNew()",
          "new_text": "raxFind(s->cgroups,(unsigned char*)name,namelen)",
          "old_line_content": "    cg->consumers = raxNew();",
          "new_line_content": "    if (raxFind(s->cgroups,(unsigned char*)name,namelen) != raxNotFound)",
          "content_same": false
        },
        {
          "line": 1563,
          "old_api": "sdsdup",
          "new_api": "raxFind",
          "old_text": "sdsdup(name)",
          "new_text": "raxFind(cg->consumers,(unsigned char*)name,\n                               sdslen(name))",
          "old_line_content": "        consumer->name = sdsdup(name);",
          "new_line_content": "    streamConsumer *consumer = raxFind(cg->consumers,(unsigned char*)name,",
          "content_same": false
        },
        {
          "line": 1564,
          "old_api": "raxNew",
          "new_api": "sdslen",
          "old_text": "raxNew()",
          "new_text": "sdslen(name)",
          "old_line_content": "        consumer->pel = raxNew();",
          "new_line_content": "                               sdslen(name));",
          "content_same": false
        },
        {
          "line": 1568,
          "old_api": "mstime",
          "new_api": "sdsdup",
          "old_text": "mstime()",
          "new_text": "sdsdup(name)",
          "old_line_content": "    consumer->seen_time = mstime();",
          "new_line_content": "        consumer->name = sdsdup(name);",
          "content_same": false
        },
        {
          "line": 1584,
          "old_api": "raxStart",
          "new_api": "raxSize",
          "old_text": "raxStart(&ri,consumer->pel)",
          "new_text": "raxSize(consumer->pel)",
          "old_line_content": "    raxStart(&ri,consumer->pel);",
          "new_line_content": "    uint64_t retval = raxSize(consumer->pel);",
          "content_same": false
        },
        {
          "line": 1589,
          "old_api": "streamFreeNACK",
          "new_api": "raxStart",
          "old_text": "streamFreeNACK(nack)",
          "new_text": "raxStart(&ri,consumer->pel)",
          "old_line_content": "        streamFreeNACK(nack);",
          "new_line_content": "    raxStart(&ri,consumer->pel);",
          "content_same": false
        },
        {
          "line": 1591,
          "old_api": "raxStop",
          "new_api": "raxNext",
          "old_text": "raxStop(&ri)",
          "new_text": "raxNext(&ri)",
          "old_line_content": "    raxStop(&ri);",
          "new_line_content": "    while(raxNext(&ri)) {",
          "content_same": false
        },
        {
          "line": 1594,
          "old_api": "sdslen",
          "new_api": "streamFreeNACK",
          "old_text": "sdslen(name)",
          "new_text": "streamFreeNACK(nack)",
          "old_line_content": "    raxRemove(cg->consumers,(unsigned char*)name,sdslen(name),NULL);",
          "new_line_content": "        streamFreeNACK(nack);",
          "content_same": false
        },
        {
          "line": 1629,
          "old_api": "streamLookupCG",
          "new_api": "checkType",
          "old_text": "streamLookupCG(s,grpname)",
          "new_text": "checkType(c,o,OBJ_STREAM)",
          "old_line_content": "        if ((cg = streamLookupCG(s,grpname)) == NULL &&",
          "new_line_content": "        if (o == NULL || checkType(c,o,OBJ_STREAM)) return;",
          "content_same": false
        },
        {
          "line": 1648,
          "old_api": "sdslen",
          "new_api": "strcmp",
          "old_text": "sdslen(grpname)",
          "new_text": "strcmp(c->argv[4]->ptr,\"$\")",
          "old_line_content": "        streamCG *cg = streamCreateCG(s,grpname,sdslen(grpname),&id);",
          "new_line_content": "        if (!strcmp(c->argv[4]->ptr,\"$\")) {",
          "content_same": false
        },
        {
          "line": 1650,
          "old_api": "addReply",
          "new_api": "streamParseIDOrReply",
          "old_text": "addReply(c,shared.ok)",
          "new_text": "streamParseIDOrReply(c,c->argv[4],&id,0)",
          "old_line_content": "            addReply(c,shared.ok);",
          "new_line_content": "        } else if (streamParseIDOrReply(c,c->argv[4],&id,0) != C_OK) {",
          "content_same": false
        },
        {
          "line": 1655,
          "old_api": "addReplySds",
          "new_api": "addReply",
          "old_text": "addReplySds(c,\n                sdsnew(\"-BUSYGROUP Consumer Group name already exists\\r\\n\"))",
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "            addReplySds(c,",
          "new_line_content": "            addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 1660,
          "old_api": "strcmp",
          "new_api": "addReplySds",
          "old_text": "strcmp(c->argv[4]->ptr,\"$\")",
          "new_text": "addReplySds(c,\n                sdsnew(\"-BUSYGROUP Consumer Group name already exists\\r\\n\"))",
          "old_line_content": "        if (!strcmp(c->argv[4]->ptr,\"$\")) {",
          "new_line_content": "            addReplySds(c,",
          "content_same": false
        },
        {
          "line": 1671,
          "old_api": "sdslen",
          "new_api": "addReply",
          "old_text": "sdslen(grpname)",
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "            raxRemove(s->cgroups,(unsigned char*)grpname,sdslen(grpname),NULL);",
          "new_line_content": "        addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 1673,
          "old_api": "addReply",
          "new_api": "notifyKeyspaceEvent",
          "old_text": "addReply(c,shared.cone)",
          "new_text": "notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-setid\",c->argv[2],c->db->id)",
          "old_line_content": "            addReply(c,shared.cone);",
          "new_line_content": "        notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-setid\",c->argv[2],c->db->id);",
          "content_same": false
        },
        {
          "line": 1680,
          "old_api": "strcasecmp",
          "new_api": "notifyKeyspaceEvent",
          "old_text": "strcasecmp(opt,\"DELCONSUMER\")",
          "new_text": "notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-destroy\",\n                                c->argv[2],c->db->id)",
          "old_line_content": "    } else if (!strcasecmp(opt,\"DELCONSUMER\") && c->argc == 5) {",
          "new_line_content": "            notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-destroy\",",
          "content_same": false
        },
        {
          "line": 1683,
          "old_api": "streamDelConsumer",
          "new_api": "addReply",
          "old_text": "streamDelConsumer(cg,c->argv[4]->ptr)",
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "        long long pending = streamDelConsumer(cg,c->argv[4]->ptr);",
          "new_line_content": "            addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 1688,
          "old_api": "strcasecmp",
          "new_api": "streamDelConsumer",
          "old_text": "strcasecmp(opt,\"HELP\")",
          "new_text": "streamDelConsumer(cg,c->argv[4]->ptr)",
          "old_line_content": "    } else if (!strcasecmp(opt,\"HELP\")) {",
          "new_line_content": "        long long pending = streamDelConsumer(cg,c->argv[4]->ptr);",
          "content_same": false
        },
        {
          "line": 1689,
          "old_api": "addReplyHelp",
          "new_api": "addReplyLongLong",
          "old_text": "addReplyHelp(c, help)",
          "new_text": "addReplyLongLong(c,pending)",
          "old_line_content": "        addReplyHelp(c, help);",
          "new_line_content": "        addReplyLongLong(c,pending);",
          "content_same": false
        },
        {
          "line": 1691,
          "old_api": "addReplySubcommandSyntaxError",
          "new_api": "notifyKeyspaceEvent",
          "old_text": "addReplySubcommandSyntaxError(c)",
          "new_text": "notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-delconsumer\",\n                            c->argv[2],c->db->id)",
          "old_line_content": "        addReplySubcommandSyntaxError(c);",
          "new_line_content": "        notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-delconsumer\",",
          "content_same": false
        },
        {
          "line": 1714,
          "old_api": "addReply",
          "new_api": "streamLookupCG",
          "old_text": "addReply(c,shared.czero)",
          "new_text": "streamLookupCG(o->ptr,c->argv[2]->ptr)",
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "        group = streamLookupCG(o->ptr,c->argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 1728,
          "old_api": "raxFind",
          "new_api": "streamEncodeID",
          "old_text": "raxFind(group->pel,buf,sizeof(buf))",
          "new_text": "streamEncodeID(buf,&id)",
          "old_line_content": "        streamNACK *nack = raxFind(group->pel,buf,sizeof(buf));",
          "new_line_content": "        streamEncodeID(buf,&id);",
          "content_same": false
        },
        {
          "line": 1737,
          "old_api": "addReplyLongLong",
          "new_api": "streamFreeNACK",
          "old_text": "addReplyLongLong(c,acknowledged)",
          "new_text": "streamFreeNACK(nack)",
          "old_line_content": "    addReplyLongLong(c,acknowledged);",
          "new_line_content": "            streamFreeNACK(nack);",
          "content_same": false
        },
        {
          "line": 1776,
          "old_api": "lookupKeyRead",
          "new_api": "streamParseIDOrReply",
          "old_text": "lookupKeyRead(c->db,c->argv[1])",
          "new_text": "streamParseIDOrReply(c,c->argv[4],&endid,UINT64_MAX)",
          "old_line_content": "    robj *o = lookupKeyRead(c->db,c->argv[1]);",
          "new_line_content": "        if (streamParseIDOrReply(c,c->argv[4],&endid,UINT64_MAX) == C_ERR)",
          "content_same": false
        },
        {
          "line": 1781,
          "old_api": "streamLookupCG",
          "new_api": "lookupKeyRead",
          "old_text": "streamLookupCG(o->ptr,groupname->ptr)",
          "new_text": "lookupKeyRead(c->db,c->argv[1])",
          "old_line_content": "        (group = streamLookupCG(o->ptr,groupname->ptr)) == NULL)",
          "new_line_content": "    robj *o = lookupKeyRead(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 1796,
          "old_api": "addReply",
          "new_api": "addReplyMultiBulkLen",
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": "addReplyMultiBulkLen(c,4)",
          "old_line_content": "            addReply(c,shared.nullbulk); /* Start. */",
          "new_line_content": "        addReplyMultiBulkLen(c,4);",
          "content_same": false
        },
        {
          "line": 1798,
          "old_api": "addReply",
          "new_api": "raxSize",
          "old_text": "addReply(c,shared.nullmultibulk)",
          "new_text": "raxSize(group->pel)",
          "old_line_content": "            addReply(c,shared.nullmultibulk); /* Clients. */",
          "new_line_content": "        addReplyLongLong(c,raxSize(group->pel));",
          "content_same": false
        },
        {
          "line": 1802,
          "old_api": "raxStart",
          "new_api": "addReply",
          "old_text": "raxStart(&ri,group->pel)",
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "            raxStart(&ri,group->pel);",
          "new_line_content": "            addReply(c,shared.nullbulk); /* End. */",
          "content_same": false
        },
        {
          "line": 1803,
          "old_api": "raxSeek",
          "new_api": "addReply",
          "old_text": "raxSeek(&ri,\"^\",NULL,0)",
          "new_text": "addReply(c,shared.nullmultibulk)",
          "old_line_content": "            raxSeek(&ri,\"^\",NULL,0);",
          "new_line_content": "            addReply(c,shared.nullmultibulk); /* Clients. */",
          "content_same": false
        },
        {
          "line": 1809,
          "old_api": "raxSeek",
          "new_api": "raxNext",
          "old_text": "raxSeek(&ri,\"$\",NULL,0)",
          "new_text": "raxNext(&ri)",
          "old_line_content": "            raxSeek(&ri,\"$\",NULL,0);",
          "new_line_content": "            raxNext(&ri);",
          "content_same": false
        },
        {
          "line": 1810,
          "old_api": "raxNext",
          "new_api": "streamDecodeID",
          "old_text": "raxNext(&ri)",
          "new_text": "streamDecodeID(ri.key,&startid)",
          "old_line_content": "            raxNext(&ri);",
          "new_line_content": "            streamDecodeID(ri.key,&startid);",
          "content_same": false
        },
        {
          "line": 1811,
          "old_api": "streamDecodeID",
          "new_api": "addReplyStreamID",
          "old_text": "streamDecodeID(ri.key,&endid)",
          "new_text": "addReplyStreamID(c,&startid)",
          "old_line_content": "            streamDecodeID(ri.key,&endid);",
          "new_line_content": "            addReplyStreamID(c,&startid);",
          "content_same": false
        },
        {
          "line": 1816,
          "old_api": "raxStart",
          "new_api": "streamDecodeID",
          "old_text": "raxStart(&ri,group->consumers)",
          "new_text": "streamDecodeID(ri.key,&endid)",
          "old_line_content": "            raxStart(&ri,group->consumers);",
          "new_line_content": "            streamDecodeID(ri.key,&endid);",
          "content_same": false
        },
        {
          "line": 1817,
          "old_api": "raxSeek",
          "new_api": "addReplyStreamID",
          "old_text": "raxSeek(&ri,\"^\",NULL,0)",
          "new_text": "addReplyStreamID(c,&endid)",
          "old_line_content": "            raxSeek(&ri,\"^\",NULL,0);",
          "new_line_content": "            addReplyStreamID(c,&endid);",
          "content_same": false
        },
        {
          "line": 1818,
          "old_api": "addDeferredMultiBulkLength",
          "new_api": "raxStop",
          "old_text": "addDeferredMultiBulkLength(c)",
          "new_text": "raxStop(&ri)",
          "old_line_content": "            void *arraylen_ptr = addDeferredMultiBulkLength(c);",
          "new_line_content": "            raxStop(&ri);",
          "content_same": false
        },
        {
          "line": 1822,
          "old_api": "raxSize",
          "new_api": "raxSeek",
          "old_text": "raxSize(consumer->pel)",
          "new_text": "raxSeek(&ri,\"^\",NULL,0)",
          "old_line_content": "                if (raxSize(consumer->pel) == 0) continue;",
          "new_line_content": "            raxSeek(&ri,\"^\",NULL,0);",
          "content_same": false
        },
        {
          "line": 1823,
          "old_api": "addReplyMultiBulkLen",
          "new_api": "addDeferredMultiBulkLength",
          "old_text": "addReplyMultiBulkLen(c,2)",
          "new_text": "addDeferredMultiBulkLength(c)",
          "old_line_content": "                addReplyMultiBulkLen(c,2);",
          "new_line_content": "            void *arraylen_ptr = addDeferredMultiBulkLength(c);",
          "content_same": false
        },
        {
          "line": 1825,
          "old_api": "raxSize",
          "new_api": "raxNext",
          "old_text": "raxSize(consumer->pel)",
          "new_text": "raxNext(&ri)",
          "old_line_content": "                addReplyBulkLongLong(c,raxSize(consumer->pel));",
          "new_line_content": "            while(raxNext(&ri)) {",
          "content_same": false
        },
        {
          "line": 1828,
          "old_api": "setDeferredMultiBulkLength",
          "new_api": "addReplyMultiBulkLen",
          "old_text": "setDeferredMultiBulkLength(c,arraylen_ptr,arraylen)",
          "new_text": "addReplyMultiBulkLen(c,2)",
          "old_line_content": "            setDeferredMultiBulkLength(c,arraylen_ptr,arraylen);",
          "new_line_content": "                addReplyMultiBulkLen(c,2);",
          "content_same": false
        },
        {
          "line": 1829,
          "old_api": "raxStop",
          "new_api": "addReplyBulkCBuffer",
          "old_text": "raxStop(&ri)",
          "new_text": "addReplyBulkCBuffer(c,ri.key,ri.key_len)",
          "old_line_content": "            raxStop(&ri);",
          "new_line_content": "                addReplyBulkCBuffer(c,ri.key,ri.key_len);",
          "content_same": false
        },
        {
          "line": 1854,
          "old_api": "raxSeek",
          "new_api": "mstime",
          "old_text": "raxSeek(&ri,\">=\",startkey,sizeof(startkey))",
          "new_text": "mstime()",
          "old_line_content": "        raxSeek(&ri,\">=\",startkey,sizeof(startkey));",
          "new_line_content": "        mstime_t now = mstime();",
          "content_same": false
        },
        {
          "line": 1858,
          "old_api": "memcmp",
          "new_api": "raxStart",
          "old_text": "memcmp(ri.key,endkey,ri.key_len)",
          "new_text": "raxStart(&ri,pel)",
          "old_line_content": "        while(count && raxNext(&ri) && memcmp(ri.key,endkey,ri.key_len) <= 0) {",
          "new_line_content": "        raxStart(&ri,pel);",
          "content_same": false
        },
        {
          "line": 1863,
          "old_api": "addReplyMultiBulkLen",
          "new_api": "memcmp",
          "old_text": "addReplyMultiBulkLen(c,4)",
          "new_text": "memcmp(ri.key,endkey,ri.key_len)",
          "old_line_content": "            addReplyMultiBulkLen(c,4);",
          "new_line_content": "        while(count && raxNext(&ri) && memcmp(ri.key,endkey,ri.key_len) <= 0) {",
          "content_same": false
        },
        {
          "line": 1868,
          "old_api": "addReplyStreamID",
          "new_api": "addReplyMultiBulkLen",
          "old_text": "addReplyStreamID(c,&id)",
          "new_text": "addReplyMultiBulkLen(c,4)",
          "old_line_content": "            addReplyStreamID(c,&id);",
          "new_line_content": "            addReplyMultiBulkLen(c,4);",
          "content_same": false
        },
        {
          "line": 1872,
          "old_api": "sdslen",
          "new_api": "streamDecodeID",
          "old_text": "sdslen(nack->consumer->name)",
          "new_text": "streamDecodeID(ri.key,&id)",
          "old_line_content": "                                sdslen(nack->consumer->name));",
          "new_line_content": "            streamDecodeID(ri.key,&id);",
          "content_same": false
        },
        {
          "line": 1877,
          "old_api": "addReplyLongLong",
          "new_api": "sdslen",
          "old_text": "addReplyLongLong(c,elapsed)",
          "new_text": "sdslen(nack->consumer->name)",
          "old_line_content": "            addReplyLongLong(c,elapsed);",
          "new_line_content": "                                sdslen(nack->consumer->name));",
          "content_same": false
        },
        {
          "line": 1882,
          "old_api": "raxStop",
          "new_api": "addReplyLongLong",
          "old_text": "raxStop(&ri)",
          "new_text": "addReplyLongLong(c,elapsed)",
          "old_line_content": "        raxStop(&ri);",
          "new_line_content": "            addReplyLongLong(c,elapsed);",
          "content_same": false
        },
        {
          "line": 2039,
          "old_api": "streamParseIDOrReply",
          "new_api": "addDeferredMultiBulkLength",
          "old_text": "streamParseIDOrReply(c,c->argv[j],&id,0)",
          "new_text": "addDeferredMultiBulkLength(c)",
          "old_line_content": "        if (streamParseIDOrReply(c,c->argv[j],&id,0) != C_OK) return;",
          "new_line_content": "    void *arraylenptr = addDeferredMultiBulkLength(c);",
          "content_same": false
        },
        {
          "line": 2057,
          "old_api": "streamIteratorStop",
          "new_api": "streamIteratorStart",
          "old_text": "streamIteratorStop(&myiterator)",
          "new_text": "streamIteratorStart(&myiterator,o->ptr,&id,&id,0)",
          "old_line_content": "            streamIteratorStop(&myiterator);",
          "new_line_content": "            streamIteratorStart(&myiterator,o->ptr,&id,&id,0);",
          "content_same": false
        },
        {
          "line": 2090,
          "old_api": "streamReplyWithRange",
          "new_api": "raxInsert",
          "old_text": "streamReplyWithRange(c,o->ptr,&id,NULL,1,0,NULL,NULL,\n                                     STREAM_RWR_RAWENTRIES,NULL)",
          "new_text": "raxInsert(consumer->pel,buf,sizeof(buf),nack,NULL)",
          "old_line_content": "                streamReplyWithRange(c,o->ptr,&id,NULL,1,0,NULL,NULL,",
          "new_line_content": "            raxInsert(consumer->pel,buf,sizeof(buf),nack,NULL);",
          "content_same": false
        },
        {
          "line": 2101,
          "old_api": "preventCommandPropagation",
          "new_api": "streamPropagateXCLAIM",
          "old_text": "preventCommandPropagation(c)",
          "new_text": "streamPropagateXCLAIM(c,c->argv[1],c->argv[3],c->argv[j],nack)",
          "old_line_content": "    preventCommandPropagation(c);",
          "new_line_content": "            streamPropagateXCLAIM(c,c->argv[1],c->argv[3],c->argv[j],nack);",
          "content_same": false
        },
        {
          "line": 2134,
          "old_api": "addReplyLongLong",
          "new_api": "streamDeleteItem",
          "old_text": "addReplyLongLong(c,deleted)",
          "new_text": "streamDeleteItem(s,&id)",
          "old_line_content": "    addReplyLongLong(c,deleted);",
          "new_line_content": "        deleted += streamDeleteItem(s,&id);",
          "content_same": false
        },
        {
          "line": 2240,
          "old_api": "strcasecmp",
          "new_api": "lookupKeyWriteOrReply",
          "old_text": "strcasecmp(opt,\"CONSUMERS\")",
          "new_text": "lookupKeyWriteOrReply(c,key,shared.nokeyerr)",
          "old_line_content": "    if (!strcasecmp(opt,\"CONSUMERS\") && c->argc == 4) {",
          "new_line_content": "    robj *o = lookupKeyWriteOrReply(c,key,shared.nokeyerr);",
          "content_same": false
        },
        {
          "line": 2255,
          "old_api": "raxNext",
          "new_api": "raxSize",
          "old_text": "raxNext(&ri)",
          "new_text": "raxSize(cg->consumers)",
          "old_line_content": "        while(raxNext(&ri)) {",
          "new_line_content": "        addReplyMultiBulkLen(c,raxSize(cg->consumers));",
          "content_same": false
        },
        {
          "line": 2260,
          "old_api": "addReplyMultiBulkLen",
          "new_api": "raxNext",
          "old_text": "addReplyMultiBulkLen(c,6)",
          "new_text": "raxNext(&ri)",
          "old_line_content": "            addReplyMultiBulkLen(c,6);",
          "new_line_content": "        while(raxNext(&ri)) {",
          "content_same": false
        },
        {
          "line": 2265,
          "old_api": "addReplyStatus",
          "new_api": "addReplyMultiBulkLen",
          "old_text": "addReplyStatus(c,\"idle\")",
          "new_text": "addReplyMultiBulkLen(c,6)",
          "old_line_content": "            addReplyStatus(c,\"idle\");",
          "new_line_content": "            addReplyMultiBulkLen(c,6);",
          "content_same": false
        },
        {
          "line": 2266,
          "old_api": "addReplyLongLong",
          "new_api": "addReplyStatus",
          "old_text": "addReplyLongLong(c,idle)",
          "new_text": "addReplyStatus(c,\"name\")",
          "old_line_content": "            addReplyLongLong(c,idle);",
          "new_line_content": "            addReplyStatus(c,\"name\");",
          "content_same": false
        },
        {
          "line": 2268,
          "old_api": "raxStop",
          "new_api": "addReplyStatus",
          "old_text": "raxStop(&ri)",
          "new_text": "addReplyStatus(c,\"pending\")",
          "old_line_content": "        raxStop(&ri);",
          "new_line_content": "            addReplyStatus(c,\"pending\");",
          "content_same": false
        },
        {
          "line": 2269,
          "old_api": "strcasecmp",
          "new_api": "raxSize",
          "old_text": "strcasecmp(opt,\"GROUPS\")",
          "new_text": "raxSize(consumer->pel)",
          "old_line_content": "    } else if (!strcasecmp(opt,\"GROUPS\") && c->argc == 3) {",
          "new_line_content": "            addReplyLongLong(c,raxSize(consumer->pel));",
          "content_same": false
        },
        {
          "line": 2283,
          "old_api": "addReplyStatus",
          "new_api": "raxStart",
          "old_text": "addReplyStatus(c,\"name\")",
          "new_text": "raxStart(&ri,s->cgroups)",
          "old_line_content": "            addReplyStatus(c,\"name\");",
          "new_line_content": "        raxStart(&ri,s->cgroups);",
          "content_same": false
        },
        {
          "line": 2284,
          "old_api": "addReplyBulkCBuffer",
          "new_api": "raxSeek",
          "old_text": "addReplyBulkCBuffer(c,ri.key,ri.key_len)",
          "new_text": "raxSeek(&ri,\"^\",NULL,0)",
          "old_line_content": "            addReplyBulkCBuffer(c,ri.key,ri.key_len);",
          "new_line_content": "        raxSeek(&ri,\"^\",NULL,0);",
          "content_same": false
        },
        {
          "line": 2285,
          "old_api": "addReplyStatus",
          "new_api": "raxNext",
          "old_text": "addReplyStatus(c,\"consumers\")",
          "new_text": "raxNext(&ri)",
          "old_line_content": "            addReplyStatus(c,\"consumers\");",
          "new_line_content": "        while(raxNext(&ri)) {",
          "content_same": false
        },
        {
          "line": 2287,
          "old_api": "addReplyStatus",
          "new_api": "addReplyMultiBulkLen",
          "old_text": "addReplyStatus(c,\"pending\")",
          "new_text": "addReplyMultiBulkLen(c,8)",
          "old_line_content": "            addReplyStatus(c,\"pending\");",
          "new_line_content": "            addReplyMultiBulkLen(c,8);",
          "content_same": false
        },
        {
          "line": 2288,
          "old_api": "raxSize",
          "new_api": "addReplyStatus",
          "old_text": "raxSize(cg->pel)",
          "new_text": "addReplyStatus(c,\"name\")",
          "old_line_content": "            addReplyLongLong(c,raxSize(cg->pel));",
          "new_line_content": "            addReplyStatus(c,\"name\");",
          "content_same": false
        },
        {
          "line": 2289,
          "old_api": "addReplyStatus",
          "new_api": "addReplyBulkCBuffer",
          "old_text": "addReplyStatus(c,\"last-delivered-id\")",
          "new_text": "addReplyBulkCBuffer(c,ri.key,ri.key_len)",
          "old_line_content": "            addReplyStatus(c,\"last-delivered-id\");",
          "new_line_content": "            addReplyBulkCBuffer(c,ri.key,ri.key_len);",
          "content_same": false
        },
        {
          "line": 2290,
          "old_api": "addReplyStreamID",
          "new_api": "addReplyStatus",
          "old_text": "addReplyStreamID(c,&cg->last_id)",
          "new_text": "addReplyStatus(c,\"consumers\")",
          "old_line_content": "            addReplyStreamID(c,&cg->last_id);",
          "new_line_content": "            addReplyStatus(c,\"consumers\");",
          "content_same": false
        },
        {
          "line": 2292,
          "old_api": "raxStop",
          "new_api": "addReplyStatus",
          "old_text": "raxStop(&ri)",
          "new_text": "addReplyStatus(c,\"pending\")",
          "old_line_content": "        raxStop(&ri);",
          "new_line_content": "            addReplyStatus(c,\"pending\");",
          "content_same": false
        },
        {
          "line": 2293,
          "old_api": "strcasecmp",
          "new_api": "raxSize",
          "old_text": "strcasecmp(opt,\"STREAM\")",
          "new_text": "raxSize(cg->pel)",
          "old_line_content": "    } else if (!strcasecmp(opt,\"STREAM\") && c->argc == 3) {",
          "new_line_content": "            addReplyLongLong(c,raxSize(cg->pel));",
          "content_same": false
        },
        {
          "line": 2295,
          "old_api": "addReplyMultiBulkLen",
          "new_api": "addReplyStreamID",
          "old_text": "addReplyMultiBulkLen(c,14)",
          "new_text": "addReplyStreamID(c,&cg->last_id)",
          "old_line_content": "        addReplyMultiBulkLen(c,14);",
          "new_line_content": "            addReplyStreamID(c,&cg->last_id);",
          "content_same": false
        },
        {
          "line": 2297,
          "old_api": "addReplyLongLong",
          "new_api": "raxStop",
          "old_text": "addReplyLongLong(c,s->length)",
          "new_text": "raxStop(&ri)",
          "old_line_content": "        addReplyLongLong(c,s->length);",
          "new_line_content": "        raxStop(&ri);",
          "content_same": false
        },
        {
          "line": 2298,
          "old_api": "addReplyStatus",
          "new_api": "strcasecmp",
          "old_text": "addReplyStatus(c,\"radix-tree-keys\")",
          "new_text": "strcasecmp(opt,\"STREAM\")",
          "old_line_content": "        addReplyStatus(c,\"radix-tree-keys\");",
          "new_line_content": "    } else if (!strcasecmp(opt,\"STREAM\") && c->argc == 3) {",
          "content_same": false
        },
        {
          "line": 2300,
          "old_api": "addReplyStatus",
          "new_api": "addReplyMultiBulkLen",
          "old_text": "addReplyStatus(c,\"radix-tree-nodes\")",
          "new_text": "addReplyMultiBulkLen(c,14)",
          "old_line_content": "        addReplyStatus(c,\"radix-tree-nodes\");",
          "new_line_content": "        addReplyMultiBulkLen(c,14);",
          "content_same": false
        },
        {
          "line": 2301,
          "old_api": "addReplyLongLong",
          "new_api": "addReplyStatus",
          "old_text": "addReplyLongLong(c,s->rax->numnodes)",
          "new_text": "addReplyStatus(c,\"length\")",
          "old_line_content": "        addReplyLongLong(c,s->rax->numnodes);",
          "new_line_content": "        addReplyStatus(c,\"length\");",
          "content_same": false
        },
        {
          "line": 2302,
          "old_api": "addReplyStatus",
          "new_api": "addReplyLongLong",
          "old_text": "addReplyStatus(c,\"groups\")",
          "new_text": "addReplyLongLong(c,s->length)",
          "old_line_content": "        addReplyStatus(c,\"groups\");",
          "new_line_content": "        addReplyLongLong(c,s->length);",
          "content_same": false
        },
        {
          "line": 2303,
          "old_api": "raxSize",
          "new_api": "addReplyStatus",
          "old_text": "raxSize(s->cgroups)",
          "new_text": "addReplyStatus(c,\"radix-tree-keys\")",
          "old_line_content": "        addReplyLongLong(c,s->cgroups ? raxSize(s->cgroups) : 0);",
          "new_line_content": "        addReplyStatus(c,\"radix-tree-keys\");",
          "content_same": false
        },
        {
          "line": 2304,
          "old_api": "addReplyStatus",
          "new_api": "raxSize",
          "old_text": "addReplyStatus(c,\"last-generated-id\")",
          "new_text": "raxSize(s->rax)",
          "old_line_content": "        addReplyStatus(c,\"last-generated-id\");",
          "new_line_content": "        addReplyLongLong(c,raxSize(s->rax));",
          "content_same": false
        },
        {
          "line": 2305,
          "old_api": "addReplyStreamID",
          "new_api": "addReplyStatus",
          "old_text": "addReplyStreamID(c,&s->last_id)",
          "new_text": "addReplyStatus(c,\"radix-tree-nodes\")",
          "old_line_content": "        addReplyStreamID(c,&s->last_id);",
          "new_line_content": "        addReplyStatus(c,\"radix-tree-nodes\");",
          "content_same": false
        },
        {
          "line": 2318,
          "old_api": "streamReplyWithRange",
          "new_api": "addReplyStatus",
          "old_text": "streamReplyWithRange(c,s,&start,&end,1,1,NULL,NULL,\n                                     STREAM_RWR_RAWENTRIES,NULL)",
          "new_text": "addReplyStatus(c,\"first-entry\")",
          "old_line_content": "        count = streamReplyWithRange(c,s,&start,&end,1,1,NULL,NULL,",
          "new_line_content": "        addReplyStatus(c,\"first-entry\");",
          "content_same": false
        },
        {
          "line": 2322,
          "old_api": "addReplySubcommandSyntaxError",
          "new_api": "addReplyStatus",
          "old_text": "addReplySubcommandSyntaxError(c)",
          "new_text": "addReplyStatus(c,\"last-entry\")",
          "old_line_content": "        addReplySubcommandSyntaxError(c);",
          "new_line_content": "        addReplyStatus(c,\"last-entry\");",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 2048,
          "old_api": null,
          "new_api": "raxFind",
          "old_text": null,
          "new_text": "raxFind(group->pel,buf,sizeof(buf))",
          "old_line_content": "         * be used to create entries in the PEL. Useful for AOF",
          "new_line_content": "        streamNACK *nack = raxFind(group->pel,buf,sizeof(buf));",
          "content_same": false
        },
        {
          "line": 1536,
          "old_api": null,
          "new_api": "raxNew",
          "old_text": null,
          "new_text": "raxNew()",
          "old_line_content": "",
          "new_line_content": "    cg->consumers = raxNew();",
          "content_same": false
        },
        {
          "line": 1538,
          "old_api": null,
          "new_api": "raxInsert",
          "old_text": null,
          "new_text": "raxInsert(s->cgroups,(unsigned char*)name,namelen,cg,NULL)",
          "old_line_content": "void streamFreeCG(streamCG *cg) {",
          "new_line_content": "    raxInsert(s->cgroups,(unsigned char*)name,namelen,cg,NULL);",
          "content_same": false
        },
        {
          "line": 1031,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(s)",
          "old_line_content": "    errno = 0;",
          "new_line_content": "    if (string2ll(s,strlen(s),&ll)) {",
          "content_same": false
        },
        {
          "line": 1544,
          "old_api": null,
          "new_api": "raxFreeWithCallback",
          "old_text": null,
          "new_text": "raxFreeWithCallback(cg->pel,(void(*)(void*))streamFreeNACK)",
          "old_line_content": "/* Lookup the consumer group in the specified stream and returns its",
          "new_line_content": "    raxFreeWithCallback(cg->pel,(void(*)(void*))streamFreeNACK);",
          "content_same": false
        },
        {
          "line": 1545,
          "old_api": null,
          "new_api": "raxFreeWithCallback",
          "old_text": null,
          "new_text": "raxFreeWithCallback(cg->consumers,(void(*)(void*))streamFreeConsumer)",
          "old_line_content": " * pointer, otherwise if there is no such group, NULL is returned. */",
          "new_line_content": "    raxFreeWithCallback(cg->consumers,(void(*)(void*))streamFreeConsumer);",
          "content_same": false
        },
        {
          "line": 1546,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(cg)",
          "old_line_content": "streamCG *streamLookupCG(stream *s, sds groupname) {",
          "new_line_content": "    zfree(cg);",
          "content_same": false
        },
        {
          "line": 2061,
          "old_api": null,
          "new_api": "streamIteratorGetID",
          "old_text": null,
          "new_text": "streamIteratorGetID(&myiterator,&item_id,&numfields)",
          "old_line_content": "",
          "new_line_content": "            if (streamIteratorGetID(&myiterator,&item_id,&numfields)) found = 1;",
          "content_same": false
        },
        {
          "line": 2062,
          "old_api": null,
          "new_api": "streamIteratorStop",
          "old_text": null,
          "new_text": "streamIteratorStop(&myiterator)",
          "old_line_content": "            /* Create the NACK. */",
          "new_line_content": "            streamIteratorStop(&myiterator);",
          "content_same": false
        },
        {
          "line": 1038,
          "old_api": null,
          "new_api": "strtoull",
          "old_text": null,
          "new_text": "strtoull(s,&endptr,10)",
          "old_line_content": "",
          "new_line_content": "    *value = strtoull(s,&endptr,10);",
          "content_same": false
        },
        {
          "line": 1553,
          "old_api": null,
          "new_api": "raxFind",
          "old_text": null,
          "new_text": "raxFind(s->cgroups,(unsigned char*)groupname,\n                           sdslen(groupname))",
          "old_line_content": "/* Lookup the consumer with the specified name in the group 'cg': if the",
          "new_line_content": "    streamCG *cg = raxFind(s->cgroups,(unsigned char*)groupname,",
          "content_same": false
        },
        {
          "line": 1554,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(groupname)",
          "old_line_content": " * consumer does not exist it is automatically created as a side effect",
          "new_line_content": "                           sdslen(groupname));",
          "content_same": false
        },
        {
          "line": 2068,
          "old_api": null,
          "new_api": "streamCreateNACK",
          "old_text": null,
          "new_text": "streamCreateNACK(NULL)",
          "old_line_content": "            /* We need to check if the minimum idle time requested",
          "new_line_content": "            nack = streamCreateNACK(NULL);",
          "content_same": false
        },
        {
          "line": 2069,
          "old_api": null,
          "new_api": "raxInsert",
          "old_text": null,
          "new_text": "raxInsert(group->pel,buf,sizeof(buf),nack,NULL)",
          "old_line_content": "             * by the caller is satisfied by this entry. */",
          "new_line_content": "            raxInsert(group->pel,buf,sizeof(buf),nack,NULL);",
          "content_same": false
        },
        {
          "line": 1567,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*consumer))",
          "old_line_content": "    }",
          "new_line_content": "        consumer = zmalloc(sizeof(*consumer));",
          "content_same": false
        },
        {
          "line": 1056,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(o->ptr)",
          "old_line_content": "        id->ms = 0;",
          "new_line_content": "    if (sdslen(o->ptr) > sizeof(buf)-1) goto invalid;",
          "content_same": false
        },
        {
          "line": 1057,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(o->ptr)",
          "old_line_content": "        id->seq = 0;",
          "new_line_content": "    memcpy(buf,o->ptr,sdslen(o->ptr)+1);",
          "content_same": false
        },
        {
          "line": 1569,
          "old_api": null,
          "new_api": "raxNew",
          "old_text": null,
          "new_text": "raxNew()",
          "old_line_content": "    return consumer;",
          "new_line_content": "        consumer->pel = raxNew();",
          "content_same": false
        },
        {
          "line": 2083,
          "old_api": null,
          "new_api": "raxRemove",
          "old_text": null,
          "new_text": "raxRemove(nack->consumer->pel,buf,sizeof(buf),NULL)",
          "old_line_content": "            if (retrycount >= 0) nack->delivery_count = retrycount;",
          "new_line_content": "                raxRemove(nack->consumer->pel,buf,sizeof(buf),NULL);",
          "content_same": false
        },
        {
          "line": 1570,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(name)",
          "old_line_content": "}",
          "new_line_content": "        raxInsert(cg->consumers,(unsigned char*)name,sdslen(name),",
          "content_same": false
        },
        {
          "line": 1573,
          "old_api": null,
          "new_api": "mstime",
          "old_text": null,
          "new_text": "mstime()",
          "old_line_content": " * may have pending messages: they are removed from the PEL, and the number",
          "new_line_content": "    consumer->seen_time = mstime();",
          "content_same": false
        },
        {
          "line": 2093,
          "old_api": null,
          "new_api": "addReplyStreamID",
          "old_text": null,
          "new_text": "addReplyStreamID(c,&id)",
          "old_line_content": "            arraylen++;",
          "new_line_content": "                addReplyStreamID(c,&id);",
          "content_same": false
        },
        {
          "line": 1581,
          "old_api": null,
          "new_api": "streamLookupConsumer",
          "old_text": null,
          "new_text": "streamLookupConsumer(cg,name,0)",
          "old_line_content": "    /* Iterate all the consumer pending messages, deleting every corresponding",
          "new_line_content": "    streamConsumer *consumer = streamLookupConsumer(cg,name,0);",
          "content_same": false
        },
        {
          "line": 2095,
          "old_api": null,
          "new_api": "streamReplyWithRange",
          "old_text": null,
          "new_text": "streamReplyWithRange(c,o->ptr,&id,NULL,1,0,NULL,NULL,\n                                     STREAM_RWR_RAWENTRIES,NULL)",
          "old_line_content": "            /* Propagate this change. */",
          "new_line_content": "                streamReplyWithRange(c,o->ptr,&id,NULL,1,0,NULL,NULL,",
          "content_same": false
        },
        {
          "line": 1071,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(buf,'-')",
          "old_line_content": "    if (!dot) seq = missing_seq;",
          "new_line_content": "    char *dot = strchr(buf,'-');",
          "content_same": false
        },
        {
          "line": 1074,
          "old_api": null,
          "new_api": "string2ull",
          "old_text": null,
          "new_text": "string2ull(buf,&ms)",
          "old_line_content": "    return C_OK;",
          "new_line_content": "    if (string2ull(buf,&ms) == 0) goto invalid;",
          "content_same": false
        },
        {
          "line": 1075,
          "old_api": null,
          "new_api": "string2ull",
          "old_text": null,
          "new_text": "string2ull(dot+1,&seq)",
          "old_line_content": "",
          "new_line_content": "    if (dot && string2ull(dot+1,&seq) == 0) goto invalid;",
          "content_same": false
        },
        {
          "line": 1590,
          "old_api": null,
          "new_api": "raxSeek",
          "old_text": null,
          "new_text": "raxSeek(&ri,\"^\",NULL,0)",
          "old_line_content": "    }",
          "new_line_content": "    raxSeek(&ri,\"^\",NULL,0);",
          "content_same": false
        },
        {
          "line": 2105,
          "old_api": null,
          "new_api": "setDeferredMultiBulkLength",
          "old_text": null,
          "new_text": "setDeferredMultiBulkLength(c,arraylenptr,arraylen)",
          "old_line_content": "/* XDEL <key> [<ID1> <ID2> ... <IDN>]",
          "new_line_content": "    setDeferredMultiBulkLength(c,arraylenptr,arraylen);",
          "content_same": false
        },
        {
          "line": 2106,
          "old_api": null,
          "new_api": "preventCommandPropagation",
          "old_text": null,
          "new_text": "preventCommandPropagation(c)",
          "old_line_content": " *",
          "new_line_content": "    preventCommandPropagation(c);",
          "content_same": false
        },
        {
          "line": 1082,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"Invalid stream ID specified as stream \"\n                           \"command argument\")",
          "old_line_content": "/* XADD key [MAXLEN <count>] <ID or *> [field value] [field value] ... */",
          "new_line_content": "    if (c) addReplyError(c,\"Invalid stream ID specified as stream \"",
          "content_same": false
        },
        {
          "line": 1593,
          "old_api": null,
          "new_api": "raxRemove",
          "old_text": null,
          "new_text": "raxRemove(cg->pel,ri.key,ri.key_len,NULL)",
          "old_line_content": "    /* Deallocate the consumer. */",
          "new_line_content": "        raxRemove(cg->pel,ri.key,ri.key_len,NULL);",
          "content_same": false
        },
        {
          "line": 1596,
          "old_api": null,
          "new_api": "raxStop",
          "old_text": null,
          "new_text": "raxStop(&ri)",
          "old_line_content": "    return retval;",
          "new_line_content": "    raxStop(&ri);",
          "content_same": false
        },
        {
          "line": 1599,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(name)",
          "old_line_content": "/* -----------------------------------------------------------------------",
          "new_line_content": "    raxRemove(cg->consumers,(unsigned char*)name,sdslen(name),NULL);",
          "content_same": false
        },
        {
          "line": 1600,
          "old_api": null,
          "new_api": "streamFreeConsumer",
          "old_text": null,
          "new_text": "streamFreeConsumer(consumer)",
          "old_line_content": " * Consumer groups commands",
          "new_line_content": "    streamFreeConsumer(consumer);",
          "content_same": false
        },
        {
          "line": 2118,
          "old_api": null,
          "new_api": "lookupKeyWriteOrReply",
          "old_text": null,
          "new_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.czero)",
          "old_line_content": "     * a big issue, it is not great that the command is only partially",
          "new_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.czero)) == NULL",
          "content_same": false
        },
        {
          "line": 2119,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,OBJ_STREAM)",
          "old_line_content": "     * executed because at some point an invalid ID is parsed. */",
          "new_line_content": "        || checkType(c,o,OBJ_STREAM)) return;",
          "content_same": false
        },
        {
          "line": 2127,
          "old_api": null,
          "new_api": "streamParseIDOrReply",
          "old_text": null,
          "new_text": "streamParseIDOrReply(c,c->argv[j],&id,0)",
          "old_line_content": "    for (int j = 2; j < c->argc; j++) {",
          "new_line_content": "        if (streamParseIDOrReply(c,c->argv[j],&id,0) != C_OK) return;",
          "content_same": false
        },
        {
          "line": 1106,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt,\"maxlen\")",
          "old_line_content": "                i++;",
          "new_line_content": "        } else if (!strcasecmp(opt,\"maxlen\") && moreargs) {",
          "content_same": false
        },
        {
          "line": 2133,
          "old_api": null,
          "new_api": "streamParseIDOrReply",
          "old_text": null,
          "new_text": "streamParseIDOrReply(c,c->argv[j],&id,0)",
          "old_line_content": "    server.dirty += deleted;",
          "new_line_content": "        streamParseIDOrReply(c,c->argv[j],&id,0); /* Retval already checked. */",
          "content_same": false
        },
        {
          "line": 2136,
          "old_api": null,
          "new_api": "signalModifiedKey",
          "old_text": null,
          "new_text": "signalModifiedKey(c->db,c->argv[1])",
          "old_line_content": "",
          "new_line_content": "    signalModifiedKey(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 2137,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_STREAM,\"xdel\",c->argv[1],c->db->id)",
          "old_line_content": "/* General form: XTRIM <key> [... options ...]",
          "new_line_content": "    notifyKeyspaceEvent(NOTIFY_STREAM,\"xdel\",c->argv[1],c->db->id);",
          "content_same": false
        },
        {
          "line": 1113,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c,c->argv[i+1],&maxlen,NULL)",
          "old_line_content": "                return;",
          "new_line_content": "            if (getLongLongFromObjectOrReply(c,c->argv[i+1],&maxlen,NULL)",
          "content_same": false
        },
        {
          "line": 2139,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,deleted)",
          "old_line_content": " * List of options:",
          "new_line_content": "    addReplyLongLong(c,deleted);",
          "content_same": false
        },
        {
          "line": 1628,
          "old_api": null,
          "new_api": "lookupKeyWriteOrReply",
          "old_text": null,
          "new_text": "lookupKeyWriteOrReply(c,c->argv[2],shared.nokeyerr)",
          "old_line_content": "        /* Certain subcommands require the group to exist. */",
          "new_line_content": "        robj *o = lookupKeyWriteOrReply(c,c->argv[2],shared.nokeyerr);",
          "content_same": false
        },
        {
          "line": 1117,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"The MAXLEN argument must be >= 0.\")",
          "old_line_content": "        } else {",
          "new_line_content": "                addReplyError(c,\"The MAXLEN argument must be >= 0.\");",
          "content_same": false
        },
        {
          "line": 1634,
          "old_api": null,
          "new_api": "streamLookupCG",
          "old_text": null,
          "new_text": "streamLookupCG(s,grpname)",
          "old_line_content": "                                   \"for key name '%s'\",",
          "new_line_content": "        if ((cg = streamLookupCG(s,grpname)) == NULL &&",
          "content_same": false
        },
        {
          "line": 1635,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt,\"SETID\")",
          "old_line_content": "                                   (char*)grpname, (char*)c->argv[2]->ptr);",
          "new_line_content": "            (!strcasecmp(opt,\"SETID\") ||",
          "content_same": false
        },
        {
          "line": 1124,
          "old_api": null,
          "new_api": "streamParseIDOrReply",
          "old_text": null,
          "new_text": "streamParseIDOrReply(c,c->argv[i],&id,0)",
          "old_line_content": "    int field_pos = i+1;",
          "new_line_content": "            if (streamParseIDOrReply(c,c->argv[i],&id,0) != C_OK) return;",
          "content_same": false
        },
        {
          "line": 1636,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt,\"DELCONSUMER\")",
          "old_line_content": "            return;",
          "new_line_content": "             !strcasecmp(opt,\"DELCONSUMER\")))",
          "content_same": false
        },
        {
          "line": 1638,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(c, \"-NOGROUP No such consumer group '%s' \"\n                                   \"for key name '%s'\",\n                                   (char*)grpname, (char*)c->argv[2]->ptr)",
          "old_line_content": "    }",
          "new_line_content": "            addReplyErrorFormat(c, \"-NOGROUP No such consumer group '%s' \"",
          "content_same": false
        },
        {
          "line": 1133,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"wrong number of arguments for XADD\")",
          "old_line_content": "    robj *o;",
          "new_line_content": "        addReplyError(c,\"wrong number of arguments for XADD\");",
          "content_same": false
        },
        {
          "line": 1646,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt,\"CREATE\")",
          "old_line_content": "            return;",
          "new_line_content": "    if (!strcasecmp(opt,\"CREATE\") && c->argc == 5) {",
          "content_same": false
        },
        {
          "line": 2159,
          "old_api": null,
          "new_api": "lookupKeyWriteOrReply",
          "old_text": null,
          "new_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.czero)",
          "old_line_content": "    int trim_strategy = TRIM_STRATEGY_NONE;",
          "new_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.czero)) == NULL",
          "content_same": false
        },
        {
          "line": 2160,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,OBJ_STREAM)",
          "old_line_content": "    long long maxlen = 0;   /* 0 means no maximum length. */",
          "new_line_content": "        || checkType(c,o,OBJ_STREAM)) return;",
          "content_same": false
        },
        {
          "line": 1140,
          "old_api": null,
          "new_api": "streamTypeLookupWriteOrCreate",
          "old_text": null,
          "new_text": "streamTypeLookupWriteOrCreate(c,c->argv[1])",
          "old_line_content": "        &id, id_given ? &id : NULL)",
          "new_line_content": "    if ((o = streamTypeLookupWriteOrCreate(c,c->argv[1])) == NULL) return;",
          "content_same": false
        },
        {
          "line": 1653,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(grpname)",
          "old_line_content": "                                c->argv[2],c->db->id);",
          "new_line_content": "        streamCG *cg = streamCreateCG(s,grpname,sdslen(grpname),&id);",
          "content_same": false
        },
        {
          "line": 1144,
          "old_api": null,
          "new_api": "streamAppendItem",
          "old_text": null,
          "new_text": "streamAppendItem(s,c->argv+field_pos,(c->argc-field_pos)/2,\n        &id, id_given ? &id : NULL)",
          "old_line_content": "                        \"target stream top item\");",
          "new_line_content": "    if (streamAppendItem(s,c->argv+field_pos,(c->argc-field_pos)/2,",
          "content_same": false
        },
        {
          "line": 1657,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-create\",\n                                c->argv[2],c->db->id)",
          "old_line_content": "        }",
          "new_line_content": "            notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-create\",",
          "content_same": false
        },
        {
          "line": 1148,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"The ID specified in XADD is equal or smaller than the \"\n                        \"target stream top item\")",
          "old_line_content": "",
          "new_line_content": "        addReplyError(c,\"The ID specified in XADD is equal or smaller than the \"",
          "content_same": false
        },
        {
          "line": 1661,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"-BUSYGROUP Consumer Group name already exists\\r\\n\")",
          "old_line_content": "            id = s->last_id;",
          "new_line_content": "                sdsnew(\"-BUSYGROUP Consumer Group name already exists\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 2174,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt,\"maxlen\")",
          "old_line_content": "                approx_maxlen = 1;",
          "new_line_content": "        if (!strcasecmp(opt,\"maxlen\") && moreargs) {",
          "content_same": false
        },
        {
          "line": 1663,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt,\"SETID\")",
          "old_line_content": "            return;",
          "new_line_content": "    } else if (!strcasecmp(opt,\"SETID\") && c->argc == 5) {",
          "content_same": false
        },
        {
          "line": 1152,
          "old_api": null,
          "new_api": "addReplyStreamID",
          "old_text": null,
          "new_text": "addReplyStreamID(c,&id)",
          "old_line_content": "",
          "new_line_content": "    addReplyStreamID(c,&id);",
          "content_same": false
        },
        {
          "line": 1665,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(c->argv[4]->ptr,\"$\")",
          "old_line_content": "        cg->last_id = id;",
          "new_line_content": "        if (!strcmp(c->argv[4]->ptr,\"$\")) {",
          "content_same": false
        },
        {
          "line": 1154,
          "old_api": null,
          "new_api": "signalModifiedKey",
          "old_text": null,
          "new_text": "signalModifiedKey(c->db,c->argv[1])",
          "old_line_content": "    if (maxlen >= 0) {",
          "new_line_content": "    signalModifiedKey(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 1667,
          "old_api": null,
          "new_api": "streamParseIDOrReply",
          "old_text": null,
          "new_text": "streamParseIDOrReply(c,c->argv[4],&id,0)",
          "old_line_content": "        server.dirty++;",
          "new_line_content": "        } else if (streamParseIDOrReply(c,c->argv[4],&id,0) != C_OK) {",
          "content_same": false
        },
        {
          "line": 2182,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c,c->argv[i+1],&maxlen,NULL)",
          "old_line_content": "            return;",
          "new_line_content": "            if (getLongLongFromObjectOrReply(c,c->argv[i+1],&maxlen,NULL)",
          "content_same": false
        },
        {
          "line": 2186,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "    /* Perform the trimming. */",
          "new_line_content": "            addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 1674,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt,\"DESTROY\")",
          "old_line_content": "            server.dirty++;",
          "new_line_content": "    } else if (!strcasecmp(opt,\"DESTROY\") && c->argc == 4) {",
          "content_same": false
        },
        {
          "line": 1164,
          "old_api": null,
          "new_api": "createStringObjectFromLongLong",
          "old_text": null,
          "new_text": "createStringObjectFromLongLong(0)",
          "old_line_content": "        }",
          "new_line_content": "            robj *zeroobj = createStringObjectFromLongLong(0);",
          "content_same": false
        },
        {
          "line": 1165,
          "old_api": null,
          "new_api": "rewriteClientCommandArgument",
          "old_text": null,
          "new_text": "rewriteClientCommandArgument(c,maxlen_arg_idx,zeroobj)",
          "old_line_content": "    }",
          "new_line_content": "            rewriteClientCommandArgument(c,maxlen_arg_idx,zeroobj);",
          "content_same": false
        },
        {
          "line": 1166,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(zeroobj)",
          "old_line_content": "",
          "new_line_content": "            decrRefCount(zeroobj);",
          "content_same": false
        },
        {
          "line": 1676,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(grpname)",
          "old_line_content": "                                c->argv[2],c->db->id);",
          "new_line_content": "            raxRemove(s->cgroups,(unsigned char*)grpname,sdslen(grpname),NULL);",
          "content_same": false
        },
        {
          "line": 1168,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_STREAM,\"xtrim\",c->argv[1],c->db->id)",
          "old_line_content": "     * AOF/replication propagation. */",
          "new_line_content": "            notifyKeyspaceEvent(NOTIFY_STREAM,\"xtrim\",c->argv[1],c->db->id);",
          "content_same": false
        },
        {
          "line": 1677,
          "old_api": null,
          "new_api": "streamFreeCG",
          "old_text": null,
          "new_text": "streamFreeCG(cg)",
          "old_line_content": "        } else {",
          "new_line_content": "            streamFreeCG(cg);",
          "content_same": false
        },
        {
          "line": 2194,
          "old_api": null,
          "new_api": "streamTrimByLength",
          "old_text": null,
          "new_text": "streamTrimByLength(s,maxlen,approx_maxlen)",
          "old_line_content": "",
          "new_line_content": "        deleted = streamTrimByLength(s,maxlen,approx_maxlen);",
          "content_same": false
        },
        {
          "line": 2196,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"XTRIM called without an option to trim the stream\")",
          "old_line_content": "    if (deleted) {",
          "new_line_content": "        addReplyError(c,\"XTRIM called without an option to trim the stream\");",
          "content_same": false
        },
        {
          "line": 1685,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt,\"DELCONSUMER\")",
          "old_line_content": "        server.dirty++;",
          "new_line_content": "    } else if (!strcasecmp(opt,\"DELCONSUMER\") && c->argc == 5) {",
          "content_same": false
        },
        {
          "line": 1174,
          "old_api": null,
          "new_api": "createObjectFromStreamID",
          "old_text": null,
          "new_text": "createObjectFromStreamID(&id)",
          "old_line_content": "     * stream. */",
          "new_line_content": "    robj *idarg = createObjectFromStreamID(&id);",
          "content_same": false
        },
        {
          "line": 1175,
          "old_api": null,
          "new_api": "rewriteClientCommandArgument",
          "old_text": null,
          "new_text": "rewriteClientCommandArgument(c,i,idarg)",
          "old_line_content": "    if (server.blocked_clients_by_type[BLOCKED_STREAM])",
          "new_line_content": "    rewriteClientCommandArgument(c,i,idarg);",
          "content_same": false
        },
        {
          "line": 2202,
          "old_api": null,
          "new_api": "signalModifiedKey",
          "old_text": null,
          "new_text": "signalModifiedKey(c->db,c->argv[1])",
          "old_line_content": "}",
          "new_line_content": "        signalModifiedKey(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 2203,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_STREAM,\"xtrim\",c->argv[1],c->db->id)",
          "old_line_content": "",
          "new_line_content": "        notifyKeyspaceEvent(NOTIFY_STREAM,\"xtrim\",c->argv[1],c->db->id);",
          "content_same": false
        },
        {
          "line": 1181,
          "old_api": null,
          "new_api": "signalKeyAsReady",
          "old_text": null,
          "new_text": "signalKeyAsReady(c->db, c->argv[1])",
          "old_line_content": "    robj *o;",
          "new_line_content": "        signalKeyAsReady(c->db, c->argv[1]);",
          "content_same": false
        },
        {
          "line": 2206,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,deleted)",
          "old_line_content": " * XINFO STREAM <key>",
          "new_line_content": "    addReplyLongLong(c,deleted);",
          "content_same": false
        },
        {
          "line": 1693,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt,\"HELP\")",
          "old_line_content": "}",
          "new_line_content": "    } else if (!strcasecmp(opt,\"HELP\")) {",
          "content_same": false
        },
        {
          "line": 1694,
          "old_api": null,
          "new_api": "addReplyHelp",
          "old_text": null,
          "new_text": "addReplyHelp(c, help)",
          "old_line_content": "",
          "new_line_content": "        addReplyHelp(c, help);",
          "content_same": false
        },
        {
          "line": 1696,
          "old_api": null,
          "new_api": "addReplySubcommandSyntaxError",
          "old_text": null,
          "new_text": "addReplySubcommandSyntaxError(c)",
          "old_line_content": " *",
          "new_line_content": "        addReplySubcommandSyntaxError(c);",
          "content_same": false
        },
        {
          "line": 1193,
          "old_api": null,
          "new_api": "streamParseIDOrReply",
          "old_text": null,
          "new_text": "streamParseIDOrReply(c,startarg,&startid,0)",
          "old_line_content": "        for (int j = 4; j < c->argc; j++) {",
          "new_line_content": "    if (streamParseIDOrReply(c,startarg,&startid,0) == C_ERR) return;",
          "content_same": false
        },
        {
          "line": 1194,
          "old_api": null,
          "new_api": "streamParseIDOrReply",
          "old_text": null,
          "new_text": "streamParseIDOrReply(c,endarg,&endid,UINT64_MAX)",
          "old_line_content": "            int additional = c->argc-j-1;",
          "new_line_content": "    if (streamParseIDOrReply(c,endarg,&endid,UINT64_MAX) == C_ERR) return;",
          "content_same": false
        },
        {
          "line": 1711,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[1])",
          "old_line_content": "",
          "new_line_content": "    robj *o = lookupKeyRead(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 1200,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"COUNT\")",
          "old_line_content": "            } else {",
          "new_line_content": "            if (strcasecmp(c->argv[j]->ptr,\"COUNT\") == 0 && additional >= 1) {",
          "content_same": false
        },
        {
          "line": 1713,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,OBJ_STREAM)",
          "old_line_content": "    if (o == NULL || group == NULL) {",
          "new_line_content": "        if (checkType(c,o,OBJ_STREAM)) return; /* Type error. */",
          "content_same": false
        },
        {
          "line": 2226,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr,\"HELP\")",
          "old_line_content": "        return;",
          "new_line_content": "    if (!strcasecmp(c->argv[1]->ptr,\"HELP\")) {",
          "content_same": false
        },
        {
          "line": 2227,
          "old_api": null,
          "new_api": "addReplyHelp",
          "old_text": null,
          "new_text": "addReplyHelp(c, help)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyHelp(c, help);",
          "content_same": false
        },
        {
          "line": 2230,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"syntax error, try 'XINFO HELP'\")",
          "old_line_content": "     * the ones are in the form of \"<subcommand> <key>\". */",
          "new_line_content": "        addReplyError(c,\"syntax error, try 'XINFO HELP'\");",
          "content_same": false
        },
        {
          "line": 1206,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "",
          "new_line_content": "                addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 1719,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "    for (int j = 3; j < c->argc; j++) {",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 1213,
          "old_api": null,
          "new_api": "lookupKeyReadOrReply",
          "old_text": null,
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.emptymultibulk)",
          "old_line_content": "",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.emptymultibulk)) == NULL",
          "content_same": false
        },
        {
          "line": 1214,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,OBJ_STREAM)",
          "old_line_content": "/* XRANGE key start end [COUNT <n>] */",
          "new_line_content": "        || checkType(c,o,OBJ_STREAM)) return;",
          "content_same": false
        },
        {
          "line": 1727,
          "old_api": null,
          "new_api": "streamParseIDOrReply",
          "old_text": null,
          "new_text": "streamParseIDOrReply(c,c->argv[j],&id,0)",
          "old_line_content": "         * we are able to remove the entry from both PELs. */",
          "new_line_content": "        if (streamParseIDOrReply(c,c->argv[j],&id,0) != C_OK) return;",
          "content_same": false
        },
        {
          "line": 2241,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,OBJ_STREAM)",
          "old_line_content": "        /* XINFO CONSUMERS <key> <group>. */",
          "new_line_content": "    if (o == NULL || checkType(c,o,OBJ_STREAM)) return;",
          "content_same": false
        },
        {
          "line": 2245,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt,\"CONSUMERS\")",
          "old_line_content": "                                   \"for key name '%s'\",",
          "new_line_content": "    if (!strcasecmp(opt,\"CONSUMERS\") && c->argc == 4) {",
          "content_same": false
        },
        {
          "line": 1733,
          "old_api": null,
          "new_api": "raxFind",
          "old_text": null,
          "new_text": "raxFind(group->pel,buf,sizeof(buf))",
          "old_line_content": "            acknowledged++;",
          "new_line_content": "        streamNACK *nack = raxFind(group->pel,buf,sizeof(buf));",
          "content_same": false
        },
        {
          "line": 2247,
          "old_api": null,
          "new_api": "streamLookupCG",
          "old_text": null,
          "new_text": "streamLookupCG(s,c->argv[3]->ptr)",
          "old_line_content": "            return;",
          "new_line_content": "        streamCG *cg = streamLookupCG(s,c->argv[3]->ptr);",
          "content_same": false
        },
        {
          "line": 712,
          "old_api": null,
          "new_api": "lpReplaceInteger",
          "old_text": null,
          "new_text": "lpReplaceInteger(lp,&p,aux-1)",
          "old_line_content": "",
          "new_line_content": "        lp = lpReplaceInteger(lp,&p,aux-1);",
          "content_same": false
        },
        {
          "line": 2249,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(c, \"-NOGROUP No such consumer group '%s' \"\n                                   \"for key name '%s'\",\n                                   (char*)c->argv[3]->ptr, (char*)key->ptr)",
          "old_line_content": "",
          "new_line_content": "            addReplyErrorFormat(c, \"-NOGROUP No such consumer group '%s' \"",
          "content_same": false
        },
        {
          "line": 713,
          "old_api": null,
          "new_api": "lpNext",
          "old_text": null,
          "new_text": "lpNext(lp,p)",
          "old_line_content": "    /* Update the number of entries counter. */",
          "new_line_content": "        p = lpNext(lp,p); /* Seek deleted field. */",
          "content_same": false
        },
        {
          "line": 714,
          "old_api": null,
          "new_api": "lpGetInteger",
          "old_text": null,
          "new_text": "lpGetInteger(p)",
          "old_line_content": "    si->stream->length--;",
          "new_line_content": "        aux = lpGetInteger(p);",
          "content_same": false
        },
        {
          "line": 715,
          "old_api": null,
          "new_api": "lpReplaceInteger",
          "old_text": null,
          "new_text": "lpReplaceInteger(lp,&p,aux+1)",
          "old_line_content": "",
          "new_line_content": "        lp = lpReplaceInteger(lp,&p,aux+1);",
          "content_same": false
        },
        {
          "line": 1226,
          "old_api": null,
          "new_api": "xrangeGenericCommand",
          "old_text": null,
          "new_text": "xrangeGenericCommand(c,1)",
          "old_line_content": "    robj *o;",
          "new_line_content": "    xrangeGenericCommand(c,1);",
          "content_same": false
        },
        {
          "line": 1735,
          "old_api": null,
          "new_api": "raxRemove",
          "old_text": null,
          "new_text": "raxRemove(group->pel,buf,sizeof(buf),NULL)",
          "old_line_content": "        }",
          "new_line_content": "            raxRemove(group->pel,buf,sizeof(buf),NULL);",
          "content_same": false
        },
        {
          "line": 1736,
          "old_api": null,
          "new_api": "raxRemove",
          "old_text": null,
          "new_text": "raxRemove(nack->consumer->pel,buf,sizeof(buf),NULL)",
          "old_line_content": "    }",
          "new_line_content": "            raxRemove(nack->consumer->pel,buf,sizeof(buf),NULL);",
          "content_same": false
        },
        {
          "line": 1232,
          "old_api": null,
          "new_api": "lookupKeyReadOrReply",
          "old_text": null,
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "old_line_content": "",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL",
          "content_same": false
        },
        {
          "line": 2257,
          "old_api": null,
          "new_api": "raxStart",
          "old_text": null,
          "new_text": "raxStart(&ri,cg->consumers)",
          "old_line_content": "            mstime_t idle = now - consumer->seen_time;",
          "new_line_content": "        raxStart(&ri,cg->consumers);",
          "content_same": false
        },
        {
          "line": 2258,
          "old_api": null,
          "new_api": "raxSeek",
          "old_text": null,
          "new_text": "raxSeek(&ri,\"^\",NULL,0)",
          "old_line_content": "            if (idle < 0) idle = 0;",
          "new_line_content": "        raxSeek(&ri,\"^\",NULL,0);",
          "content_same": false
        },
        {
          "line": 2259,
          "old_api": null,
          "new_api": "mstime",
          "old_text": null,
          "new_text": "mstime()",
          "old_line_content": "",
          "new_line_content": "        mstime_t now = mstime();",
          "content_same": false
        },
        {
          "line": 724,
          "old_api": null,
          "new_api": "streamDecodeID",
          "old_text": null,
          "new_text": "streamDecodeID(si->start_key,&start)",
          "old_line_content": "    }",
          "new_line_content": "        streamDecodeID(si->start_key,&start);",
          "content_same": false
        },
        {
          "line": 1233,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,OBJ_STREAM)",
          "old_line_content": "/* XREAD [BLOCK <milliseconds>] [COUNT <count>] STREAMS key_1 key_2 ... key_N",
          "new_line_content": "        || checkType(c,o,OBJ_STREAM)) return;",
          "content_same": false
        },
        {
          "line": 1235,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,s->length)",
          "old_line_content": " *",
          "new_line_content": "    addReplyLongLong(c,s->length);",
          "content_same": false
        },
        {
          "line": 1742,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,acknowledged)",
          "old_line_content": " * If start and stop are omitted, the command just outputs information about",
          "new_line_content": "    addReplyLongLong(c,acknowledged);",
          "content_same": false
        },
        {
          "line": 728,
          "old_api": null,
          "new_api": "streamDecodeID",
          "old_text": null,
          "new_text": "streamDecodeID(si->end_key,&end)",
          "old_line_content": "    /* TODO: perform a garbage collection here if the ration between",
          "new_line_content": "        streamDecodeID(si->end_key,&end);",
          "content_same": false
        },
        {
          "line": 730,
          "old_api": null,
          "new_api": "streamIteratorStop",
          "old_text": null,
          "new_text": "streamIteratorStop(si)",
          "old_line_content": "}",
          "new_line_content": "    streamIteratorStop(si);",
          "content_same": false
        },
        {
          "line": 2267,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(consumer->name)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyBulkCBuffer(c,consumer->name,sdslen(consumer->name));",
          "content_same": false
        },
        {
          "line": 731,
          "old_api": null,
          "new_api": "streamIteratorStart",
          "old_text": null,
          "new_text": "streamIteratorStart(si,si->stream,&start,&end,si->rev)",
          "old_line_content": "",
          "new_line_content": "    streamIteratorStart(si,si->stream,&start,&end,si->rev);",
          "content_same": false
        },
        {
          "line": 2270,
          "old_api": null,
          "new_api": "addReplyStatus",
          "old_text": null,
          "new_text": "addReplyStatus(c,\"idle\")",
          "old_line_content": "        /* XINFO GROUPS <key>. */",
          "new_line_content": "            addReplyStatus(c,\"idle\");",
          "content_same": false
        },
        {
          "line": 2271,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,idle)",
          "old_line_content": "        if (s->cgroups == NULL) {",
          "new_line_content": "            addReplyLongLong(c,idle);",
          "content_same": false
        },
        {
          "line": 2273,
          "old_api": null,
          "new_api": "raxStop",
          "old_text": null,
          "new_text": "raxStop(&ri)",
          "old_line_content": "            return;",
          "new_line_content": "        raxStop(&ri);",
          "content_same": false
        },
        {
          "line": 2274,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt,\"GROUPS\")",
          "old_line_content": "        }",
          "new_line_content": "    } else if (!strcasecmp(opt,\"GROUPS\") && c->argc == 3) {",
          "content_same": false
        },
        {
          "line": 2277,
          "old_api": null,
          "new_api": "addReplyMultiBulkLen",
          "old_text": null,
          "new_text": "addReplyMultiBulkLen(c,0)",
          "old_line_content": "        raxIterator ri;",
          "new_line_content": "            addReplyMultiBulkLen(c,0);",
          "content_same": false
        },
        {
          "line": 741,
          "old_api": null,
          "new_api": "raxStop",
          "old_text": null,
          "new_text": "raxStop(&si->ri)",
          "old_line_content": "int streamDeleteItem(stream *s, streamID *id) {",
          "new_line_content": "    raxStop(&si->ri);",
          "content_same": false
        },
        {
          "line": 1765,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "     * syntax errors before any other error. */",
          "new_line_content": "        addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 1256,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->argv[0]->ptr)",
          "old_line_content": "    for (int i = 1; i < c->argc; i++) {",
          "new_line_content": "    int xreadgroup = sdslen(c->argv[0]->ptr) == 10; /* XREAD or XREADGROUP? */",
          "content_same": false
        },
        {
          "line": 2281,
          "old_api": null,
          "new_api": "raxSize",
          "old_text": null,
          "new_text": "raxSize(s->cgroups)",
          "old_line_content": "            streamCG *cg = ri.data;",
          "new_line_content": "        addReplyMultiBulkLen(c,raxSize(s->cgroups));",
          "content_same": false
        },
        {
          "line": 1772,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c,c->argv[5],&count,NULL)",
          "old_line_content": "            return;",
          "new_line_content": "        if (getLongLongFromObjectOrReply(c,c->argv[5],&count,NULL) == C_ERR)",
          "content_same": false
        },
        {
          "line": 749,
          "old_api": null,
          "new_api": "streamIteratorStart",
          "old_text": null,
          "new_text": "streamIteratorStart(&si,s,id,id,0)",
          "old_line_content": "        deleted = 1;",
          "new_line_content": "    streamIteratorStart(&si,s,id,id,0);",
          "content_same": false
        },
        {
          "line": 1774,
          "old_api": null,
          "new_api": "streamParseIDOrReply",
          "old_text": null,
          "new_text": "streamParseIDOrReply(c,c->argv[3],&startid,0)",
          "old_line_content": "",
          "new_line_content": "        if (streamParseIDOrReply(c,c->argv[3],&startid,0) == C_ERR)",
          "content_same": false
        },
        {
          "line": 752,
          "old_api": null,
          "new_api": "streamIteratorGetID",
          "old_text": null,
          "new_text": "streamIteratorGetID(&si,&myid,&numfields)",
          "old_line_content": "}",
          "new_line_content": "    if (streamIteratorGetID(&si,&myid,&numfields)) {",
          "content_same": false
        },
        {
          "line": 753,
          "old_api": null,
          "new_api": "streamIteratorRemoveEntry",
          "old_text": null,
          "new_text": "streamIteratorRemoveEntry(&si,&myid)",
          "old_line_content": "",
          "new_line_content": "        streamIteratorRemoveEntry(&si,&myid);",
          "content_same": false
        },
        {
          "line": 1264,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(o,\"BLOCK\")",
          "old_line_content": "            i++;",
          "new_line_content": "        if (!strcasecmp(o,\"BLOCK\") && moreargs) {",
          "content_same": false
        },
        {
          "line": 2291,
          "old_api": null,
          "new_api": "raxSize",
          "old_text": null,
          "new_text": "raxSize(cg->consumers)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyLongLong(c,raxSize(cg->consumers));",
          "content_same": false
        },
        {
          "line": 1266,
          "old_api": null,
          "new_api": "getTimeoutFromObjectOrReply",
          "old_text": null,
          "new_text": "getTimeoutFromObjectOrReply(c,c->argv[i],&timeout,\n                UNIT_MILLISECONDS)",
          "old_line_content": "                return;",
          "new_line_content": "            if (getTimeoutFromObjectOrReply(c,c->argv[i],&timeout,",
          "content_same": false
        },
        {
          "line": 2294,
          "old_api": null,
          "new_api": "addReplyStatus",
          "old_text": null,
          "new_text": "addReplyStatus(c,\"last-delivered-id\")",
          "old_line_content": "        /* XINFO STREAM <key> (or the alias XINFO <key>). */",
          "new_line_content": "            addReplyStatus(c,\"last-delivered-id\");",
          "content_same": false
        },
        {
          "line": 1270,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c,c->argv[i],&count,NULL)",
          "old_line_content": "            streams_count = (c->argc-streams_arg);",
          "new_line_content": "            if (getLongLongFromObjectOrReply(c,c->argv[i],&count,NULL) != C_OK)",
          "content_same": false
        },
        {
          "line": 1784,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,OBJ_STREAM)",
          "old_line_content": "                               \"group '%s'\",",
          "new_line_content": "    if (o && checkType(c,o,OBJ_STREAM)) return;",
          "content_same": false
        },
        {
          "line": 1273,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(o,\"STREAMS\")",
          "old_line_content": "                                \"for each stream key an ID or '$' must be \"",
          "new_line_content": "        } else if (!strcasecmp(o,\"STREAMS\") && moreargs) {",
          "content_same": false
        },
        {
          "line": 1786,
          "old_api": null,
          "new_api": "streamLookupCG",
          "old_text": null,
          "new_text": "streamLookupCG(o->ptr,groupname->ptr)",
          "old_line_content": "        return;",
          "new_line_content": "        (group = streamLookupCG(o->ptr,groupname->ptr)) == NULL)",
          "content_same": false
        },
        {
          "line": 763,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": " * for replication purposes to create arguments. */",
          "new_line_content": "    sds replyid = sdscatfmt(sdsempty(),\"+%U-%U\\r\\n\",id->ms,id->seq);",
          "content_same": false
        },
        {
          "line": 764,
          "old_api": null,
          "new_api": "addReplySds",
          "old_text": null,
          "new_text": "addReplySds(c,replyid)",
          "old_line_content": "robj *createObjectFromStreamID(streamID *id) {",
          "new_line_content": "    addReplySds(c,replyid);",
          "content_same": false
        },
        {
          "line": 1277,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"Unbalanced XREAD list of streams: \"\n                                \"for each stream key an ID or '$' must be \"\n                                \"specified.\")",
          "old_line_content": "            streams_count /= 2; /* We have two arguments for each stream. */",
          "new_line_content": "                addReplyError(c,\"Unbalanced XREAD list of streams: \"",
          "content_same": false
        },
        {
          "line": 1788,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(c, \"-NOGROUP No such key '%s' or consumer \"\n                               \"group '%s'\",\n                               (char*)key->ptr,(char*)groupname->ptr)",
          "old_line_content": "",
          "new_line_content": "        addReplyErrorFormat(c, \"-NOGROUP No such key '%s' or consumer \"",
          "content_same": false
        },
        {
          "line": 2306,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,s->rax->numnodes)",
          "old_line_content": "",
          "new_line_content": "        addReplyLongLong(c,s->rax->numnodes);",
          "content_same": false
        },
        {
          "line": 2307,
          "old_api": null,
          "new_api": "addReplyStatus",
          "old_text": null,
          "new_text": "addReplyStatus(c,\"groups\")",
          "old_line_content": "        /* To emit the first/last entry we us the streamReplyWithRange()",
          "new_line_content": "        addReplyStatus(c,\"groups\");",
          "content_same": false
        },
        {
          "line": 2308,
          "old_api": null,
          "new_api": "raxSize",
          "old_text": null,
          "new_text": "raxSize(s->cgroups)",
          "old_line_content": "         * API. */",
          "new_line_content": "        addReplyLongLong(c,s->cgroups ? raxSize(s->cgroups) : 0);",
          "content_same": false
        },
        {
          "line": 2309,
          "old_api": null,
          "new_api": "addReplyStatus",
          "old_text": null,
          "new_text": "addReplyStatus(c,\"last-generated-id\")",
          "old_line_content": "        int count;",
          "new_line_content": "        addReplyStatus(c,\"last-generated-id\");",
          "content_same": false
        },
        {
          "line": 2310,
          "old_api": null,
          "new_api": "addReplyStreamID",
          "old_text": null,
          "new_text": "addReplyStreamID(c,&s->last_id)",
          "old_line_content": "        streamID start, end;",
          "new_line_content": "        addReplyStreamID(c,&s->last_id);",
          "content_same": false
        },
        {
          "line": 770,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": " * are created in the pending list of the stream and consumers. We need",
          "new_line_content": "    return createObject(OBJ_STRING, sdscatfmt(sdsempty(),\"%U-%U\",",
          "content_same": false
        },
        {
          "line": 1284,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(o,\"GROUP\")",
          "old_line_content": "            }",
          "new_line_content": "        } else if (!strcasecmp(o,\"GROUP\") && moreargs >= 2) {",
          "content_same": false
        },
        {
          "line": 1286,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"The GROUP option is only supported by \"\n                                \"XREADGROUP. You called XREAD instead.\")",
          "old_line_content": "            consumername = c->argv[i+2];",
          "new_line_content": "                addReplyError(c,\"The GROUP option is only supported by \"",
          "content_same": false
        },
        {
          "line": 1800,
          "old_api": null,
          "new_api": "raxSize",
          "old_text": null,
          "new_text": "raxSize(group->pel)",
          "old_line_content": "            /* Start. */",
          "new_line_content": "        if (raxSize(group->pel) == 0) {",
          "content_same": false
        },
        {
          "line": 1801,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "            raxIterator ri;",
          "new_line_content": "            addReply(c,shared.nullbulk); /* Start. */",
          "content_same": false
        },
        {
          "line": 1293,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(o,\"NOACK\")",
          "old_line_content": "            }",
          "new_line_content": "        } else if (!strcasecmp(o,\"NOACK\")) {",
          "content_same": false
        },
        {
          "line": 2319,
          "old_api": null,
          "new_api": "streamReplyWithRange",
          "old_text": null,
          "new_text": "streamReplyWithRange(c,s,&start,&end,1,0,NULL,NULL,\n                                     STREAM_RWR_RAWENTRIES,NULL)",
          "old_line_content": "                                     STREAM_RWR_RAWENTRIES,NULL);",
          "new_line_content": "        count = streamReplyWithRange(c,s,&start,&end,1,0,NULL,NULL,",
          "content_same": false
        },
        {
          "line": 1295,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"The NOACK option is only supported by \"\n                                \"XREADGROUP. You called XREAD instead.\")",
          "old_line_content": "        } else {",
          "new_line_content": "                addReplyError(c,\"The NOACK option is only supported by \"",
          "content_same": false
        },
        {
          "line": 2321,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "    } else {",
          "new_line_content": "        if (!count) addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 786,
          "old_api": null,
          "new_api": "createStringObject",
          "old_text": null,
          "new_text": "createStringObject(\"XCLAIM\",6)",
          "old_line_content": "    argv[5] = id;",
          "new_line_content": "    argv[0] = createStringObject(\"XCLAIM\",6);",
          "content_same": false
        },
        {
          "line": 2323,
          "old_api": null,
          "new_api": "streamReplyWithRange",
          "old_text": null,
          "new_text": "streamReplyWithRange(c,s,&start,&end,1,1,NULL,NULL,\n                                     STREAM_RWR_RAWENTRIES,NULL)",
          "old_line_content": "    }",
          "new_line_content": "        count = streamReplyWithRange(c,s,&start,&end,1,1,NULL,NULL,",
          "content_same": false
        },
        {
          "line": 1807,
          "old_api": null,
          "new_api": "raxStart",
          "old_text": null,
          "new_text": "raxStart(&ri,group->pel)",
          "old_line_content": "",
          "new_line_content": "            raxStart(&ri,group->pel);",
          "content_same": false
        },
        {
          "line": 2325,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "",
          "new_line_content": "        if (!count) addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 1301,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "    /* STREAMS option is mandatory. */",
          "new_line_content": "            addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 2327,
          "old_api": null,
          "new_api": "addReplySubcommandSyntaxError",
          "old_text": null,
          "new_text": "addReplySubcommandSyntaxError(c)",
          "old_line_content": "",
          "new_line_content": "        addReplySubcommandSyntaxError(c);",
          "content_same": false
        },
        {
          "line": 1808,
          "old_api": null,
          "new_api": "raxSeek",
          "old_text": null,
          "new_text": "raxSeek(&ri,\"^\",NULL,0)",
          "old_line_content": "            /* End. */",
          "new_line_content": "            raxSeek(&ri,\"^\",NULL,0);",
          "content_same": false
        },
        {
          "line": 1814,
          "old_api": null,
          "new_api": "raxSeek",
          "old_text": null,
          "new_text": "raxSeek(&ri,\"$\",NULL,0)",
          "old_line_content": "",
          "new_line_content": "            raxSeek(&ri,\"$\",NULL,0);",
          "content_same": false
        },
        {
          "line": 1815,
          "old_api": null,
          "new_api": "raxNext",
          "old_text": null,
          "new_text": "raxNext(&ri)",
          "old_line_content": "            /* Consumers with pending messages. */",
          "new_line_content": "            raxNext(&ri);",
          "content_same": false
        },
        {
          "line": 1308,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "     * provide the GROUP option. */",
          "new_line_content": "        addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 1821,
          "old_api": null,
          "new_api": "raxStart",
          "old_text": null,
          "new_text": "raxStart(&ri,group->consumers)",
          "old_line_content": "                streamConsumer *consumer = ri.data;",
          "new_line_content": "            raxStart(&ri,group->consumers);",
          "content_same": false
        },
        {
          "line": 803,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(argv[7])",
          "old_line_content": "}",
          "new_line_content": "    decrRefCount(argv[7]);",
          "content_same": false
        },
        {
          "line": 804,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(argv[8])",
          "old_line_content": "",
          "new_line_content": "    decrRefCount(argv[8]);",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(argv[9])",
          "old_line_content": "/* Send the specified range to the client 'c'. The range the client will",
          "new_line_content": "    decrRefCount(argv[9]);",
          "content_same": false
        },
        {
          "line": 806,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(argv[10])",
          "old_line_content": " * receive is between start and end inclusive, if 'count' is non zero, no more",
          "new_line_content": "    decrRefCount(argv[10]);",
          "content_same": false
        },
        {
          "line": 807,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(argv[11])",
          "old_line_content": " * than 'count' elemnets are sent. The 'end' pointer can be NULL to mean that",
          "new_line_content": "    decrRefCount(argv[11]);",
          "content_same": false
        },
        {
          "line": 1315,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"Missing GROUP option for XREADGROUP\")",
          "old_line_content": "    if (streams_count > STREAMID_STATIC_VECTOR_LEN)",
          "new_line_content": "        addReplyError(c,\"Missing GROUP option for XREADGROUP\");",
          "content_same": false
        },
        {
          "line": 1321,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(streamID)*streams_count)",
          "old_line_content": "         * served with just the messages that will arrive into the stream",
          "new_line_content": "        ids = zmalloc(sizeof(streamID)*streams_count);",
          "content_same": false
        },
        {
          "line": 1322,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(streamCG*)*streams_count)",
          "old_line_content": "         * starting from now. */",
          "new_line_content": "    if (groupname) groups = zmalloc(sizeof(streamCG*)*streams_count);",
          "content_same": false
        },
        {
          "line": 1827,
          "old_api": null,
          "new_api": "raxSize",
          "old_text": null,
          "new_text": "raxSize(consumer->pel)",
          "old_line_content": "            }",
          "new_line_content": "                if (raxSize(consumer->pel) == 0) continue;",
          "content_same": false
        },
        {
          "line": 1830,
          "old_api": null,
          "new_api": "raxSize",
          "old_text": null,
          "new_text": "raxSize(consumer->pel)",
          "old_line_content": "        }",
          "new_line_content": "                addReplyBulkLongLong(c,raxSize(consumer->pel));",
          "content_same": false
        },
        {
          "line": 1833,
          "old_api": null,
          "new_api": "setDeferredMultiBulkLength",
          "old_text": null,
          "new_text": "setDeferredMultiBulkLength(c,arraylen_ptr,arraylen)",
          "old_line_content": "    else {",
          "new_line_content": "            setDeferredMultiBulkLength(c,arraylen_ptr,arraylen);",
          "content_same": false
        },
        {
          "line": 1834,
          "old_api": null,
          "new_api": "raxStop",
          "old_text": null,
          "new_text": "raxStop(&ri)",
          "old_line_content": "        streamConsumer *consumer = consumername ?",
          "new_line_content": "            raxStop(&ri);",
          "content_same": false
        },
        {
          "line": 1840,
          "old_api": null,
          "new_api": "streamLookupConsumer",
          "old_text": null,
          "new_text": "streamLookupConsumer(group,consumername->ptr,0)",
          "old_line_content": "        if (consumername && consumer == NULL) {",
          "new_line_content": "                                streamLookupConsumer(group,consumername->ptr,0):",
          "content_same": false
        },
        {
          "line": 1330,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,key)",
          "old_line_content": "         * key and group actually exist. */",
          "new_line_content": "        robj *o = lookupKeyRead(c->db,key);",
          "content_same": false
        },
        {
          "line": 1331,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,OBJ_STREAM)",
          "old_line_content": "        if (groupname) {",
          "new_line_content": "        if (o && checkType(c,o,OBJ_STREAM)) goto cleanup;",
          "content_same": false
        },
        {
          "line": 1846,
          "old_api": null,
          "new_api": "addReplyMultiBulkLen",
          "old_text": null,
          "new_text": "addReplyMultiBulkLen(c,0)",
          "old_line_content": "        unsigned char startkey[sizeof(streamID)];",
          "new_line_content": "            addReplyMultiBulkLen(c,0);",
          "content_same": false
        },
        {
          "line": 1338,
          "old_api": null,
          "new_api": "streamLookupCG",
          "old_text": null,
          "new_text": "streamLookupCG(o->ptr,groupname->ptr)",
          "old_line_content": "                                    (char*)key->ptr,(char*)groupname->ptr);",
          "new_line_content": "                (group = streamLookupCG(o->ptr,groupname->ptr)) == NULL)",
          "content_same": false
        },
        {
          "line": 1340,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(c, \"-NOGROUP No such key '%s' or consumer \"\n                                       \"group '%s' in XREADGROUP with GROUP \"\n                                       \"option\",\n                                    (char*)key->ptr,(char*)groupname->ptr)",
          "old_line_content": "            }",
          "new_line_content": "                addReplyErrorFormat(c, \"-NOGROUP No such key '%s' or consumer \"",
          "content_same": false
        },
        {
          "line": 1856,
          "old_api": null,
          "new_api": "streamEncodeID",
          "old_text": null,
          "new_text": "streamEncodeID(startkey,&startid)",
          "old_line_content": "        size_t arraylen = 0;",
          "new_line_content": "        streamEncodeID(startkey,&startid);",
          "content_same": false
        },
        {
          "line": 1857,
          "old_api": null,
          "new_api": "streamEncodeID",
          "old_text": null,
          "new_text": "streamEncodeID(endkey,&endid)",
          "old_line_content": "",
          "new_line_content": "        streamEncodeID(endkey,&endid);",
          "content_same": false
        },
        {
          "line": 1859,
          "old_api": null,
          "new_api": "raxSeek",
          "old_text": null,
          "new_text": "raxSeek(&ri,\">=\",startkey,sizeof(startkey))",
          "old_line_content": "            streamNACK *nack = ri.data;",
          "new_line_content": "        raxSeek(&ri,\">=\",startkey,sizeof(startkey));",
          "content_same": false
        },
        {
          "line": 1860,
          "old_api": null,
          "new_api": "addDeferredMultiBulkLength",
          "old_text": null,
          "new_text": "addDeferredMultiBulkLength(c)",
          "old_line_content": "",
          "new_line_content": "        void *arraylen_ptr = addDeferredMultiBulkLength(c);",
          "content_same": false
        },
        {
          "line": 1349,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(c->argv[i]->ptr,\"$\")",
          "old_line_content": "                ids[id_idx].ms = 0;",
          "new_line_content": "        if (strcmp(c->argv[i]->ptr,\"$\") == 0) {",
          "content_same": false
        },
        {
          "line": 1358,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(c->argv[i]->ptr,\">\")",
          "old_line_content": "                goto cleanup;",
          "new_line_content": "        } else if (strcmp(c->argv[i]->ptr,\">\") == 0) {",
          "content_same": false
        },
        {
          "line": 1360,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"The > ID can be specified only when calling \"\n                                \"XREADGROUP using the GROUP <group> \"\n                                \"<consumer> option.\")",
          "old_line_content": "            /* We use just the maximum ID to signal this is a \">\" ID, anyway",
          "new_line_content": "                addReplyError(c,\"The > ID can be specified only when calling \"",
          "content_same": false
        },
        {
          "line": 1873,
          "old_api": null,
          "new_api": "addReplyStreamID",
          "old_text": null,
          "new_text": "addReplyStreamID(c,&id)",
          "old_line_content": "",
          "new_line_content": "            addReplyStreamID(c,&id);",
          "content_same": false
        },
        {
          "line": 1876,
          "old_api": null,
          "new_api": "addReplyBulkCBuffer",
          "old_text": null,
          "new_text": "addReplyBulkCBuffer(c,nack->consumer->name,\n                                sdslen(nack->consumer->name))",
          "old_line_content": "            if (elapsed < 0) elapsed = 0;",
          "new_line_content": "            addReplyBulkCBuffer(c,nack->consumer->name,",
          "content_same": false
        },
        {
          "line": 1372,
          "old_api": null,
          "new_api": "streamParseIDOrReply",
          "old_text": null,
          "new_text": "streamParseIDOrReply(c,c->argv[i],ids+id_idx,0)",
          "old_line_content": "    size_t arraylen = 0;",
          "new_line_content": "        if (streamParseIDOrReply(c,c->argv[i],ids+id_idx,0) != C_OK)",
          "content_same": false
        },
        {
          "line": 1885,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,nack->delivery_count)",
          "old_line_content": "}",
          "new_line_content": "            addReplyLongLong(c,nack->delivery_count);",
          "content_same": false
        },
        {
          "line": 1887,
          "old_api": null,
          "new_api": "raxStop",
          "old_text": null,
          "new_text": "raxStop(&ri)",
          "old_line_content": "/* XCLAIM <key> <group> <consumer> <min-idle-time> <ID-1> <ID-2>",
          "new_line_content": "        raxStop(&ri);",
          "content_same": false
        },
        {
          "line": 1888,
          "old_api": null,
          "new_api": "setDeferredMultiBulkLength",
          "old_text": null,
          "new_text": "setDeferredMultiBulkLength(c,arraylen_ptr,arraylen)",
          "old_line_content": " *        [IDLE <milliseconds>] [TIME <mstime>] [RETRYCOUNT <count>]",
          "new_line_content": "        setDeferredMultiBulkLength(c,arraylen_ptr,arraylen);",
          "content_same": false
        },
        {
          "line": 868,
          "old_api": null,
          "new_api": "streamCompareID",
          "old_text": null,
          "new_text": "streamCompareID(start,&group->last_id)",
          "old_line_content": "    if (!(flags & STREAM_RWR_RAWENTRIES))",
          "new_line_content": "    if (group && streamCompareID(start,&group->last_id) <= 0) {",
          "content_same": false
        },
        {
          "line": 1380,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[streams_arg+i])",
          "old_line_content": "",
          "new_line_content": "        robj *o = lookupKeyRead(c->db,c->argv[streams_arg+i]);",
          "content_same": false
        },
        {
          "line": 874,
          "old_api": null,
          "new_api": "addDeferredMultiBulkLength",
          "old_text": null,
          "new_text": "addDeferredMultiBulkLength(c)",
          "old_line_content": "            group->last_id = id;",
          "new_line_content": "        arraylen_ptr = addDeferredMultiBulkLength(c);",
          "content_same": false
        },
        {
          "line": 875,
          "old_api": null,
          "new_api": "streamIteratorStart",
          "old_text": null,
          "new_text": "streamIteratorStart(&si,s,start,end,rev)",
          "old_line_content": "",
          "new_line_content": "    streamIteratorStart(&si,s,start,end,rev);",
          "content_same": false
        },
        {
          "line": 876,
          "old_api": null,
          "new_api": "streamIteratorGetID",
          "old_text": null,
          "new_text": "streamIteratorGetID(&si,&id,&numfields)",
          "old_line_content": "        /* Emit a two elements array for each item. The first is",
          "new_line_content": "    while(streamIteratorGetID(&si,&id,&numfields)) {",
          "content_same": false
        },
        {
          "line": 883,
          "old_api": null,
          "new_api": "addReplyMultiBulkLen",
          "old_text": null,
          "new_text": "addReplyMultiBulkLen(c,2)",
          "old_line_content": "        while(numfields--) {",
          "new_line_content": "        addReplyMultiBulkLen(c,2);",
          "content_same": false
        },
        {
          "line": 884,
          "old_api": null,
          "new_api": "addReplyStreamID",
          "old_text": null,
          "new_text": "addReplyStreamID(c,&id)",
          "old_line_content": "            unsigned char *key, *value;",
          "new_line_content": "        addReplyStreamID(c,&id);",
          "content_same": false
        },
        {
          "line": 885,
          "old_api": null,
          "new_api": "addReplyMultiBulkLen",
          "old_text": null,
          "new_text": "addReplyMultiBulkLen(c,numfields*2)",
          "old_line_content": "            int64_t key_len, value_len;",
          "new_line_content": "        addReplyMultiBulkLen(c,numfields*2);",
          "content_same": false
        },
        {
          "line": 891,
          "old_api": null,
          "new_api": "streamIteratorGetField",
          "old_text": null,
          "new_text": "streamIteratorGetField(&si,&key,&value,&key_len,&value_len)",
          "old_line_content": "        /* If a group is passed, we need to create an entry in the",
          "new_line_content": "            streamIteratorGetField(&si,&key,&value,&key_len,&value_len);",
          "content_same": false
        },
        {
          "line": 892,
          "old_api": null,
          "new_api": "addReplyBulkCBuffer",
          "old_text": null,
          "new_text": "addReplyBulkCBuffer(c,key,key_len)",
          "old_line_content": "         * PEL (pending entries list) of this group *and* this consumer.",
          "new_line_content": "            addReplyBulkCBuffer(c,key,key_len);",
          "content_same": false
        },
        {
          "line": 893,
          "old_api": null,
          "new_api": "addReplyBulkCBuffer",
          "old_text": null,
          "new_text": "addReplyBulkCBuffer(c,value,value_len)",
          "old_line_content": "         *",
          "new_line_content": "            addReplyBulkCBuffer(c,value,value_len);",
          "content_same": false
        },
        {
          "line": 1419,
          "old_api": null,
          "new_api": "addDeferredMultiBulkLength",
          "old_text": null,
          "new_text": "addDeferredMultiBulkLength(c)",
          "old_line_content": "            start.seq++; /* uint64_t can't overflow in this context. */",
          "new_line_content": "            if (arraylen == 1) arraylen_ptr = addDeferredMultiBulkLength(c);",
          "content_same": false
        },
        {
          "line": 912,
          "old_api": null,
          "new_api": "streamCreateNACK",
          "old_text": null,
          "new_text": "streamCreateNACK(consumer)",
          "old_line_content": "",
          "new_line_content": "            streamNACK *nack = streamCreateNACK(consumer);",
          "content_same": false
        },
        {
          "line": 914,
          "old_api": null,
          "new_api": "raxTryInsert",
          "old_text": null,
          "new_text": "raxTryInsert(group->pel,buf,sizeof(buf),nack,NULL)",
          "old_line_content": "             * in that case reassign the entry to the new consumer,",
          "new_line_content": "                raxTryInsert(group->pel,buf,sizeof(buf),nack,NULL);",
          "content_same": false
        },
        {
          "line": 916,
          "old_api": null,
          "new_api": "raxTryInsert",
          "old_text": null,
          "new_text": "raxTryInsert(consumer->pel,buf,sizeof(buf),nack,NULL)",
          "old_line_content": "            if (group_inserted == 0) {",
          "new_line_content": "                raxTryInsert(consumer->pel,buf,sizeof(buf),nack,NULL);",
          "content_same": false
        },
        {
          "line": 1428,
          "old_api": null,
          "new_api": "addReplyMultiBulkLen",
          "old_text": null,
          "new_text": "addReplyMultiBulkLen(c,2)",
          "old_line_content": "            streamPropInfo spi = {c->argv[i+streams_arg],groupname};",
          "new_line_content": "            addReplyMultiBulkLen(c,2);",
          "content_same": false
        },
        {
          "line": 1431,
          "old_api": null,
          "new_api": "streamLookupConsumer",
          "old_text": null,
          "new_text": "streamLookupConsumer(groups[i],\n                                                        consumername->ptr,1)",
          "old_line_content": "                                 consumer, noack, &spi);",
          "new_line_content": "            if (groups) consumer = streamLookupConsumer(groups[i],",
          "content_same": false
        },
        {
          "line": 922,
          "old_api": null,
          "new_api": "streamFreeNACK",
          "old_text": null,
          "new_text": "streamFreeNACK(nack)",
          "old_line_content": "                nack->consumer = consumer;",
          "new_line_content": "                streamFreeNACK(nack);",
          "content_same": false
        },
        {
          "line": 1434,
          "old_api": null,
          "new_api": "streamReplyWithRange",
          "old_text": null,
          "new_text": "streamReplyWithRange(c,s,&start,NULL,count,0,\n                                 groups ? groups[i] : NULL,\n                                 consumer, noack, &spi)",
          "old_line_content": "    }",
          "new_line_content": "            streamReplyWithRange(c,s,&start,NULL,count,0,",
          "content_same": false
        },
        {
          "line": 924,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(nack != raxNotFound)",
          "old_line_content": "                nack->delivery_count = 1;",
          "new_line_content": "                serverAssert(nack != raxNotFound);",
          "content_same": false
        },
        {
          "line": 925,
          "old_api": null,
          "new_api": "raxRemove",
          "old_text": null,
          "new_text": "raxRemove(nack->consumer->pel,buf,sizeof(buf),NULL)",
          "old_line_content": "                /* Add the entry in the new consumer local PEL. */",
          "new_line_content": "                raxRemove(nack->consumer->pel,buf,sizeof(buf),NULL);",
          "content_same": false
        },
        {
          "line": 1952,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[1])",
          "old_line_content": "    int justid = 0;",
          "new_line_content": "    robj *o = lookupKeyRead(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 931,
          "old_api": null,
          "new_api": "raxInsert",
          "old_text": null,
          "new_text": "raxInsert(consumer->pel,buf,sizeof(buf),nack,NULL)",
          "old_line_content": "            /* Propagate as XCLAIM. */",
          "new_line_content": "                raxInsert(consumer->pel,buf,sizeof(buf),nack,NULL);",
          "content_same": false
        },
        {
          "line": 1443,
          "old_api": null,
          "new_api": "setDeferredMultiBulkLength",
          "old_text": null,
          "new_text": "setDeferredMultiBulkLength(c,arraylen_ptr,arraylen)",
          "old_line_content": "    if (timeout != -1) {",
          "new_line_content": "        setDeferredMultiBulkLength(c,arraylen_ptr,arraylen);",
          "content_same": false
        },
        {
          "line": 1960,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,OBJ_STREAM)",
          "old_line_content": "     * is mandatory. */",
          "new_line_content": "        if (checkType(c,o,OBJ_STREAM)) return; /* Type error. */",
          "content_same": false
        },
        {
          "line": 1961,
          "old_api": null,
          "new_api": "streamLookupCG",
          "old_text": null,
          "new_text": "streamLookupCG(o->ptr,c->argv[2]->ptr)",
          "old_line_content": "    if (o == NULL || group == NULL) {",
          "new_line_content": "        group = streamLookupCG(o->ptr,c->argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 938,
          "old_api": null,
          "new_api": "createObjectFromStreamID",
          "old_text": null,
          "new_text": "createObjectFromStreamID(&id)",
          "old_line_content": "",
          "new_line_content": "                robj *idarg = createObjectFromStreamID(&id);",
          "content_same": false
        },
        {
          "line": 939,
          "old_api": null,
          "new_api": "streamPropagateXCLAIM",
          "old_text": null,
          "new_text": "streamPropagateXCLAIM(c,spi->keyname,spi->groupname,idarg,nack)",
          "old_line_content": "        arraylen++;",
          "new_line_content": "                streamPropagateXCLAIM(c,spi->keyname,spi->groupname,idarg,nack);",
          "content_same": false
        },
        {
          "line": 940,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(idarg)",
          "old_line_content": "        if (count && count == arraylen) break;",
          "new_line_content": "                decrRefCount(idarg);",
          "content_same": false
        },
        {
          "line": 1452,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullmultibulk)",
          "old_line_content": "        /* If no COUNT is given and we block, set a relatively small count:",
          "new_line_content": "            addReply(c,shared.nullmultibulk);",
          "content_same": false
        },
        {
          "line": 1455,
          "old_api": null,
          "new_api": "blockForKeys",
          "old_text": null,
          "new_text": "blockForKeys(c, BLOCKED_STREAM, c->argv+streams_arg, streams_count,\n                     timeout, NULL, ids)",
          "old_line_content": "        c->bpop.xread_count = count ? count : XREAD_BLOCKED_DEFAULT_COUNT;",
          "new_line_content": "        blockForKeys(c, BLOCKED_STREAM, c->argv+streams_arg, streams_count,",
          "content_same": false
        },
        {
          "line": 1967,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(c,\"-NOGROUP No such key '%s' or \"\n                              \"consumer group '%s'\", (char*)c->argv[1]->ptr,\n                              (char*)c->argv[2]->ptr)",
          "old_line_content": "",
          "new_line_content": "        addReplyErrorFormat(c,\"-NOGROUP No such key '%s' or \"",
          "content_same": false
        },
        {
          "line": 947,
          "old_api": null,
          "new_api": "streamIteratorStop",
          "old_text": null,
          "new_text": "streamIteratorStop(&si)",
          "old_line_content": "/* This is an helper function for streamReplyWithRange() when called with",
          "new_line_content": "    streamIteratorStop(&si);",
          "content_same": false
        },
        {
          "line": 948,
          "old_api": null,
          "new_api": "setDeferredMultiBulkLength",
          "old_text": null,
          "new_text": "setDeferredMultiBulkLength(c,arraylen_ptr,arraylen)",
          "old_line_content": " * group and consumer arguments, but with a range that is referring to already",
          "new_line_content": "    if (arraylen_ptr) setDeferredMultiBulkLength(c,arraylen_ptr,arraylen);",
          "content_same": false
        },
        {
          "line": 1973,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c,c->argv[4],&minidle,\n        \"Invalid min-idle-time argument for XCLAIM\")",
          "old_line_content": "    /* Start parsing the IDs, so that we abort ASAP if there is a syntax",
          "new_line_content": "    if (getLongLongFromObjectOrReply(c,c->argv[4],&minidle,",
          "content_same": false
        },
        {
          "line": 1467,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(groupname)",
          "old_line_content": "        } else {",
          "new_line_content": "            incrRefCount(groupname);",
          "content_same": false
        },
        {
          "line": 1468,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(consumername)",
          "old_line_content": "            c->bpop.xread_group = NULL;",
          "new_line_content": "            incrRefCount(consumername);",
          "content_same": false
        },
        {
          "line": 1985,
          "old_api": null,
          "new_api": "streamParseIDOrReply",
          "old_text": null,
          "new_text": "streamParseIDOrReply(NULL,c->argv[j],&id,0)",
          "old_line_content": "     * are trailing options. */",
          "new_line_content": "        if (streamParseIDOrReply(NULL,c->argv[j],&id,0) != C_OK) break;",
          "content_same": false
        },
        {
          "line": 1991,
          "old_api": null,
          "new_api": "mstime",
          "old_text": null,
          "new_text": "mstime()",
          "old_line_content": "            force = 1;",
          "new_line_content": "    time_t now = mstime();",
          "content_same": false
        },
        {
          "line": 1481,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullmultibulk)",
          "old_line_content": "    /* The command is propagated (in the READGROUP form) as a side effect",
          "new_line_content": "    addReply(c,shared.nullmultibulk);",
          "content_same": false
        },
        {
          "line": 1995,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt,\"FORCE\")",
          "old_line_content": "            j++;",
          "new_line_content": "        if (!strcasecmp(opt,\"FORCE\")) {",
          "content_same": false
        },
        {
          "line": 973,
          "old_api": null,
          "new_api": "addDeferredMultiBulkLength",
          "old_text": null,
          "new_text": "addDeferredMultiBulkLength(c)",
          "old_line_content": "        streamID thisid;",
          "new_line_content": "    void *arraylen_ptr = addDeferredMultiBulkLength(c);",
          "content_same": false
        },
        {
          "line": 1997,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt,\"JUSTID\")",
          "old_line_content": "                \"Invalid IDLE option argument for XCLAIM\")",
          "new_line_content": "        } else if (!strcasecmp(opt,\"JUSTID\")) {",
          "content_same": false
        },
        {
          "line": 1999,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt,\"IDLE\")",
          "old_line_content": "            deliverytime = now - deliverytime;",
          "new_line_content": "        } else if (!strcasecmp(opt,\"IDLE\") && moreargs) {",
          "content_same": false
        },
        {
          "line": 976,
          "old_api": null,
          "new_api": "raxNext",
          "old_text": null,
          "new_text": "raxNext(&ri)",
          "old_line_content": "                                 STREAM_RWR_RAWENTRIES,NULL) == 0)",
          "new_line_content": "    while(raxNext(&ri) && (!count || arraylen < count)) {",
          "content_same": false
        },
        {
          "line": 977,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(ri.key,end,ri.key_len)",
          "old_line_content": "        {",
          "new_line_content": "        if (end && memcmp(ri.key,end,ri.key_len) > 0) break;",
          "content_same": false
        },
        {
          "line": 1488,
          "old_api": null,
          "new_api": "preventCommandPropagation",
          "old_text": null,
          "new_text": "preventCommandPropagation(c)",
          "old_line_content": "/* -----------------------------------------------------------------------",
          "new_line_content": "    preventCommandPropagation(c);",
          "content_same": false
        },
        {
          "line": 979,
          "old_api": null,
          "new_api": "streamDecodeID",
          "old_text": null,
          "new_text": "streamDecodeID(ri.key,&thisid)",
          "old_line_content": "             * about a message that's no longer here because was removed",
          "new_line_content": "        streamDecodeID(ri.key,&thisid);",
          "content_same": false
        },
        {
          "line": 980,
          "old_api": null,
          "new_api": "streamReplyWithRange",
          "old_text": null,
          "new_text": "streamReplyWithRange(c,s,&thisid,NULL,1,0,NULL,NULL,\n                                 STREAM_RWR_RAWENTRIES,NULL)",
          "old_line_content": "             * by the user by other means. In that case we signal it emitting",
          "new_line_content": "        if (streamReplyWithRange(c,s,&thisid,NULL,1,0,NULL,NULL,",
          "content_same": false
        },
        {
          "line": 1489,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(ids)",
          "old_line_content": " * Low level implementation of consumer groups",
          "new_line_content": "    if (ids != static_ids) zfree(ids);",
          "content_same": false
        },
        {
          "line": 1490,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(groups)",
          "old_line_content": " * ----------------------------------------------------------------------- */",
          "new_line_content": "    zfree(groups);",
          "content_same": false
        },
        {
          "line": 2001,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c,c->argv[j],&deliverytime,\n                \"Invalid IDLE option argument for XCLAIM\")",
          "old_line_content": "            j++;",
          "new_line_content": "            if (getLongLongFromObjectOrReply(c,c->argv[j],&deliverytime,",
          "content_same": false
        },
        {
          "line": 2010,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt,\"RETRYCOUNT\")",
          "old_line_content": "        } else {",
          "new_line_content": "        } else if (!strcasecmp(opt,\"RETRYCOUNT\") && moreargs) {",
          "content_same": false
        },
        {
          "line": 987,
          "old_api": null,
          "new_api": "addReplyMultiBulkLen",
          "old_text": null,
          "new_text": "addReplyMultiBulkLen(c,2)",
          "old_line_content": "        } else {",
          "new_line_content": "            addReplyMultiBulkLen(c,2);",
          "content_same": false
        },
        {
          "line": 2012,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c,c->argv[j],&retrycount,\n                \"Invalid IDLE option argument for XCLAIM\")",
          "old_line_content": "            return;",
          "new_line_content": "            if (getLongLongFromObjectOrReply(c,c->argv[j],&retrycount,",
          "content_same": false
        },
        {
          "line": 1501,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*nack))",
          "old_line_content": "}",
          "new_line_content": "    streamNACK *nack = zmalloc(sizeof(*nack));",
          "content_same": false
        },
        {
          "line": 990,
          "old_api": null,
          "new_api": "addReplyStreamID",
          "old_text": null,
          "new_text": "addReplyStreamID(c,&id)",
          "old_line_content": "            nack->delivery_count++;",
          "new_line_content": "            addReplyStreamID(c,&id);",
          "content_same": false
        },
        {
          "line": 991,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullmultibulk)",
          "old_line_content": "        }",
          "new_line_content": "            addReply(c,shared.nullmultibulk);",
          "content_same": false
        },
        {
          "line": 1502,
          "old_api": null,
          "new_api": "mstime",
          "old_text": null,
          "new_text": "mstime()",
          "old_line_content": "",
          "new_line_content": "    nack->delivery_time = mstime();",
          "content_same": false
        },
        {
          "line": 2016,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(c,\"Unrecognized XCLAIM option '%s'\",opt)",
          "old_line_content": "    if (deliverytime != -1) {",
          "new_line_content": "            addReplyErrorFormat(c,\"Unrecognized XCLAIM option '%s'\",opt);",
          "content_same": false
        },
        {
          "line": 1510,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(na)",
          "old_line_content": " * nor will delete them from the stream, so when this function is called",
          "new_line_content": "    zfree(na);",
          "content_same": false
        },
        {
          "line": 999,
          "old_api": null,
          "new_api": "raxStop",
          "old_text": null,
          "new_text": "raxStop(&ri)",
          "old_line_content": "/* -----------------------------------------------------------------------",
          "new_line_content": "    raxStop(&ri);",
          "content_same": false
        },
        {
          "line": 1000,
          "old_api": null,
          "new_api": "setDeferredMultiBulkLength",
          "old_text": null,
          "new_text": "setDeferredMultiBulkLength(c,arraylen_ptr,arraylen)",
          "old_line_content": " * Stream commands implementation",
          "new_line_content": "    setDeferredMultiBulkLength(c,arraylen_ptr,arraylen);",
          "content_same": false
        },
        {
          "line": 1519,
          "old_api": null,
          "new_api": "raxFree",
          "old_text": null,
          "new_text": "raxFree(sc->pel)",
          "old_line_content": "",
          "new_line_content": "    raxFree(sc->pel); /* No value free callback: the PEL entries are shared",
          "content_same": false
        },
        {
          "line": 1521,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(sc->name)",
          "old_line_content": " * specified name and last server ID. If a consumer group with the same name",
          "new_line_content": "    sdsfree(sc->name);",
          "content_same": false
        },
        {
          "line": 1522,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(sc)",
          "old_line_content": " * already existed NULL is returned, otherwise the pointer to the consumer",
          "new_line_content": "    zfree(sc);",
          "content_same": false
        },
        {
          "line": 1011,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,key)",
          "old_line_content": "        if (o->type != OBJ_STREAM) {",
          "new_line_content": "    robj *o = lookupKeyWrite(c->db,key);",
          "content_same": false
        },
        {
          "line": 1013,
          "old_api": null,
          "new_api": "createStreamObject",
          "old_text": null,
          "new_text": "createStreamObject()",
          "old_line_content": "            return NULL;",
          "new_line_content": "        o = createStreamObject();",
          "content_same": false
        },
        {
          "line": 1014,
          "old_api": null,
          "new_api": "dbAdd",
          "old_text": null,
          "new_text": "dbAdd(c->db,key,o)",
          "old_line_content": "        }",
          "new_line_content": "        dbAdd(c->db,key,o);",
          "content_same": false
        },
        {
          "line": 2038,
          "old_api": null,
          "new_api": "streamLookupConsumer",
          "old_text": null,
          "new_text": "streamLookupConsumer(group,c->argv[3]->ptr,1)",
          "old_line_content": "        unsigned char buf[sizeof(streamID)];",
          "new_line_content": "    streamConsumer *consumer = streamLookupConsumer(group,c->argv[3]->ptr,1);",
          "content_same": false
        },
        {
          "line": 1017,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "}",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 2044,
          "old_api": null,
          "new_api": "streamParseIDOrReply",
          "old_text": null,
          "new_text": "streamParseIDOrReply(c,c->argv[j],&id,0)",
          "old_line_content": "",
          "new_line_content": "        if (streamParseIDOrReply(c,c->argv[j],&id,0) != C_OK) return;",
          "content_same": false
        },
        {
          "line": 2045,
          "old_api": null,
          "new_api": "streamEncodeID",
          "old_text": null,
          "new_text": "streamEncodeID(buf,&id)",
          "old_line_content": "        /* If FORCE is passed, let's check if at least the entry",
          "new_line_content": "        streamEncodeID(buf,&id);",
          "content_same": false
        },
        {
          "line": 1534,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*cg))",
          "old_line_content": "    return cg;",
          "new_line_content": "    streamCG *cg = zmalloc(sizeof(*cg));",
          "content_same": false
        },
        {
          "line": 1535,
          "old_api": null,
          "new_api": "raxNew",
          "old_text": null,
          "new_text": "raxNew()",
          "old_line_content": "}",
          "new_line_content": "    cg->pel = raxNew();",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1026,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(s)",
          "new_text": null,
          "old_line_content": "    if (string2ll(s,strlen(s),&ll)) {",
          "new_line_content": " * Redis: if it fails, strtoull() is used instead. The function returns",
          "content_same": false
        },
        {
          "line": 1539,
          "old_api": "raxFreeWithCallback",
          "new_api": null,
          "old_text": "raxFreeWithCallback(cg->pel,(void(*)(void*))streamFreeNACK)",
          "new_text": null,
          "old_line_content": "    raxFreeWithCallback(cg->pel,(void(*)(void*))streamFreeNACK);",
          "new_line_content": "    return cg;",
          "content_same": false
        },
        {
          "line": 2052,
          "old_api": "streamIteratorStart",
          "new_api": null,
          "old_text": "streamIteratorStart(&myiterator,o->ptr,&id,&id,0)",
          "new_text": null,
          "old_line_content": "            streamIteratorStart(&myiterator,o->ptr,&id,&id,0);",
          "new_line_content": "         * entry in the PEL from scratch, so that XCLAIM can also",
          "content_same": false
        },
        {
          "line": 1540,
          "old_api": "raxFreeWithCallback",
          "new_api": null,
          "old_text": "raxFreeWithCallback(cg->consumers,(void(*)(void*))streamFreeConsumer)",
          "new_text": null,
          "old_line_content": "    raxFreeWithCallback(cg->consumers,(void(*)(void*))streamFreeConsumer);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1541,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(cg)",
          "new_text": null,
          "old_line_content": "    zfree(cg);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2056,
          "old_api": "streamIteratorGetID",
          "new_api": null,
          "old_text": "streamIteratorGetID(&myiterator,&item_id,&numfields)",
          "new_text": null,
          "old_line_content": "            if (streamIteratorGetID(&myiterator,&item_id,&numfields)) found = 1;",
          "new_line_content": "            streamIterator myiterator;",
          "content_same": false
        },
        {
          "line": 1033,
          "old_api": "strtoull",
          "new_api": null,
          "old_text": "strtoull(s,&endptr,10)",
          "new_text": null,
          "old_line_content": "    *value = strtoull(s,&endptr,10);",
          "new_line_content": "        *value = ll;",
          "content_same": false
        },
        {
          "line": 1548,
          "old_api": "raxFind",
          "new_api": null,
          "old_text": "raxFind(s->cgroups,(unsigned char*)groupname,\n                           sdslen(groupname))",
          "new_text": null,
          "old_line_content": "    streamCG *cg = raxFind(s->cgroups,(unsigned char*)groupname,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1549,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(groupname)",
          "new_text": null,
          "old_line_content": "                           sdslen(groupname));",
          "new_line_content": "/* Lookup the consumer group in the specified stream and returns its",
          "content_same": false
        },
        {
          "line": 2063,
          "old_api": "streamCreateNACK",
          "new_api": null,
          "old_text": "streamCreateNACK(NULL)",
          "new_text": null,
          "old_line_content": "            nack = streamCreateNACK(NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2064,
          "old_api": "raxInsert",
          "new_api": null,
          "old_text": "raxInsert(group->pel,buf,sizeof(buf),nack,NULL)",
          "new_text": null,
          "old_line_content": "            raxInsert(group->pel,buf,sizeof(buf),nack,NULL);",
          "new_line_content": "            /* Item must exist for us to create a NACK for it. */",
          "content_same": false
        },
        {
          "line": 1558,
          "old_api": "raxFind",
          "new_api": null,
          "old_text": "raxFind(cg->consumers,(unsigned char*)name,\n                               sdslen(name))",
          "new_text": null,
          "old_line_content": "    streamConsumer *consumer = raxFind(cg->consumers,(unsigned char*)name,",
          "new_line_content": "/* Lookup the consumer with the specified name in the group 'cg': if the",
          "content_same": false
        },
        {
          "line": 1559,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(name)",
          "new_text": null,
          "old_line_content": "                               sdslen(name));",
          "new_line_content": " * consumer does not exist it is automatically created as a side effect",
          "content_same": false
        },
        {
          "line": 1562,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*consumer))",
          "new_text": null,
          "old_line_content": "        consumer = zmalloc(sizeof(*consumer));",
          "new_line_content": "streamConsumer *streamLookupConsumer(streamCG *cg, sds name, int create) {",
          "content_same": false
        },
        {
          "line": 1051,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(o->ptr)",
          "new_text": null,
          "old_line_content": "    if (sdslen(o->ptr) > sizeof(buf)-1) goto invalid;",
          "new_line_content": " * that can be represented.",
          "content_same": false
        },
        {
          "line": 1052,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(o->ptr)",
          "new_text": null,
          "old_line_content": "    memcpy(buf,o->ptr,sdslen(o->ptr)+1);",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 1565,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(name)",
          "new_text": null,
          "old_line_content": "        raxInsert(cg->consumers,(unsigned char*)name,sdslen(name),",
          "new_line_content": "    if (consumer == raxNotFound) {",
          "content_same": false
        },
        {
          "line": 2078,
          "old_api": "raxRemove",
          "new_api": null,
          "old_text": "raxRemove(nack->consumer->pel,buf,sizeof(buf),NULL)",
          "new_text": null,
          "old_line_content": "                raxRemove(nack->consumer->pel,buf,sizeof(buf),NULL);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 2085,
          "old_api": "raxInsert",
          "new_api": null,
          "old_text": "raxInsert(consumer->pel,buf,sizeof(buf),nack,NULL)",
          "new_text": null,
          "old_line_content": "            raxInsert(consumer->pel,buf,sizeof(buf),nack,NULL);",
          "new_line_content": "            nack->consumer = consumer;",
          "content_same": false
        },
        {
          "line": 2088,
          "old_api": "addReplyStreamID",
          "new_api": null,
          "old_text": "addReplyStreamID(c,&id)",
          "new_text": null,
          "old_line_content": "                addReplyStreamID(c,&id);",
          "new_line_content": "            if (retrycount >= 0) nack->delivery_count = retrycount;",
          "content_same": false
        },
        {
          "line": 1576,
          "old_api": "streamLookupConsumer",
          "new_api": null,
          "old_text": "streamLookupConsumer(cg,name,0)",
          "new_text": null,
          "old_line_content": "    streamConsumer *consumer = streamLookupConsumer(cg,name,0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1066,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(buf,'-')",
          "new_text": null,
          "old_line_content": "    char *dot = strchr(buf,'-');",
          "new_line_content": "        id->seq = UINT64_MAX;",
          "content_same": false
        },
        {
          "line": 1579,
          "old_api": "raxSize",
          "new_api": null,
          "old_text": "raxSize(consumer->pel)",
          "new_text": null,
          "old_line_content": "    uint64_t retval = raxSize(consumer->pel);",
          "new_line_content": " * of pending messages \"lost\" is returned. */",
          "content_same": false
        },
        {
          "line": 1069,
          "old_api": "string2ull",
          "new_api": null,
          "old_text": "string2ull(buf,&ms)",
          "new_text": null,
          "old_line_content": "    if (string2ull(buf,&ms) == 0) goto invalid;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1070,
          "old_api": "string2ull",
          "new_api": null,
          "old_text": "string2ull(dot+1,&seq)",
          "new_text": null,
          "old_line_content": "    if (dot && string2ull(dot+1,&seq) == 0) goto invalid;",
          "new_line_content": "    /* Parse <ms>-<seq> form. */",
          "content_same": false
        },
        {
          "line": 2096,
          "old_api": "streamPropagateXCLAIM",
          "new_api": null,
          "old_text": "streamPropagateXCLAIM(c,c->argv[1],c->argv[3],c->argv[j],nack)",
          "new_text": null,
          "old_line_content": "            streamPropagateXCLAIM(c,c->argv[1],c->argv[3],c->argv[j],nack);",
          "new_line_content": "                                     STREAM_RWR_RAWENTRIES,NULL);",
          "content_same": false
        },
        {
          "line": 1585,
          "old_api": "raxSeek",
          "new_api": null,
          "old_text": "raxSeek(&ri,\"^\",NULL,0)",
          "new_text": null,
          "old_line_content": "    raxSeek(&ri,\"^\",NULL,0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1586,
          "old_api": "raxNext",
          "new_api": null,
          "old_text": "raxNext(&ri)",
          "new_text": null,
          "old_line_content": "    while(raxNext(&ri)) {",
          "new_line_content": "    /* Iterate all the consumer pending messages, deleting every corresponding",
          "content_same": false
        },
        {
          "line": 2100,
          "old_api": "setDeferredMultiBulkLength",
          "new_api": null,
          "old_text": "setDeferredMultiBulkLength(c,arraylenptr,arraylen)",
          "new_text": null,
          "old_line_content": "    setDeferredMultiBulkLength(c,arraylenptr,arraylen);",
          "new_line_content": "            /* Propagate this change. */",
          "content_same": false
        },
        {
          "line": 1077,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"Invalid stream ID specified as stream \"\n                           \"command argument\")",
          "new_text": null,
          "old_line_content": "    if (c) addReplyError(c,\"Invalid stream ID specified as stream \"",
          "new_line_content": "    id->ms = ms;",
          "content_same": false
        },
        {
          "line": 1588,
          "old_api": "raxRemove",
          "new_api": null,
          "old_text": "raxRemove(cg->pel,ri.key,ri.key_len,NULL)",
          "new_text": null,
          "old_line_content": "        raxRemove(cg->pel,ri.key,ri.key_len,NULL);",
          "new_line_content": "    raxIterator ri;",
          "content_same": false
        },
        {
          "line": 1595,
          "old_api": "streamFreeConsumer",
          "new_api": null,
          "old_text": "streamFreeConsumer(consumer)",
          "new_text": null,
          "old_line_content": "    streamFreeConsumer(consumer);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2113,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": null,
          "old_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.czero)",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.czero)) == NULL",
          "new_line_content": " * of items actually deleted, that may be different from the number",
          "content_same": false
        },
        {
          "line": 2114,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,OBJ_STREAM)",
          "new_text": null,
          "old_line_content": "        || checkType(c,o,OBJ_STREAM)) return;",
          "new_line_content": " * of IDs passed in case certain IDs do not exist. */",
          "content_same": false
        },
        {
          "line": 2122,
          "old_api": "streamParseIDOrReply",
          "new_api": null,
          "old_text": "streamParseIDOrReply(c,c->argv[j],&id,0)",
          "new_text": null,
          "old_line_content": "        if (streamParseIDOrReply(c,c->argv[j],&id,0) != C_OK) return;",
          "new_line_content": "    /* We need to sanity check the IDs passed to start. Even if not",
          "content_same": false
        },
        {
          "line": 1101,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"maxlen\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(opt,\"maxlen\") && moreargs) {",
          "new_line_content": "        char *opt = c->argv[i]->ptr;",
          "content_same": false
        },
        {
          "line": 2128,
          "old_api": "streamParseIDOrReply",
          "new_api": null,
          "old_text": "streamParseIDOrReply(c,c->argv[j],&id,0)",
          "new_text": null,
          "old_line_content": "        streamParseIDOrReply(c,c->argv[j],&id,0); /* Retval already checked. */",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2129,
          "old_api": "streamDeleteItem",
          "new_api": null,
          "old_text": "streamDeleteItem(s,&id)",
          "new_text": null,
          "old_line_content": "        deleted += streamDeleteItem(s,&id);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2131,
          "old_api": "signalModifiedKey",
          "new_api": null,
          "old_text": "signalModifiedKey(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    signalModifiedKey(c->db,c->argv[1]);",
          "new_line_content": "    int deleted = 0;",
          "content_same": false
        },
        {
          "line": 2132,
          "old_api": "notifyKeyspaceEvent",
          "new_api": null,
          "old_text": "notifyKeyspaceEvent(NOTIFY_STREAM,\"xdel\",c->argv[1],c->db->id)",
          "new_text": null,
          "old_line_content": "    notifyKeyspaceEvent(NOTIFY_STREAM,\"xdel\",c->argv[1],c->db->id);",
          "new_line_content": "    for (int j = 2; j < c->argc; j++) {",
          "content_same": false
        },
        {
          "line": 1108,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c,c->argv[i+1],&maxlen,NULL)",
          "new_text": null,
          "old_line_content": "            if (getLongLongFromObjectOrReply(c,c->argv[i+1],&maxlen,NULL)",
          "new_line_content": "            /* Check for the form MAXLEN ~ <count>. */",
          "content_same": false
        },
        {
          "line": 1623,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": null,
          "old_text": "lookupKeyWriteOrReply(c,c->argv[2],shared.nokeyerr)",
          "new_text": null,
          "old_line_content": "        robj *o = lookupKeyWriteOrReply(c,c->argv[2],shared.nokeyerr);",
          "new_line_content": "    streamCG *cg = NULL;",
          "content_same": false
        },
        {
          "line": 1112,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"The MAXLEN argument must be >= 0.\")",
          "new_text": null,
          "old_line_content": "                addReplyError(c,\"The MAXLEN argument must be >= 0.\");",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1624,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,OBJ_STREAM)",
          "new_text": null,
          "old_line_content": "        if (o == NULL || checkType(c,o,OBJ_STREAM)) return;",
          "new_line_content": "    char *opt = c->argv[1]->ptr; /* Subcommand name. */",
          "content_same": false
        },
        {
          "line": 1630,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"SETID\")",
          "new_text": null,
          "old_line_content": "            (!strcasecmp(opt,\"SETID\") ||",
          "new_line_content": "        s = o->ptr;",
          "content_same": false
        },
        {
          "line": 1119,
          "old_api": "streamParseIDOrReply",
          "new_api": null,
          "old_text": "streamParseIDOrReply(c,c->argv[i],&id,0)",
          "new_text": null,
          "old_line_content": "            if (streamParseIDOrReply(c,c->argv[i],&id,0) != C_OK) return;",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1631,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"DELCONSUMER\")",
          "new_text": null,
          "old_line_content": "             !strcasecmp(opt,\"DELCONSUMER\")))",
          "new_line_content": "        grpname = c->argv[3]->ptr;",
          "content_same": false
        },
        {
          "line": 1633,
          "old_api": "addReplyErrorFormat",
          "new_api": null,
          "old_text": "addReplyErrorFormat(c, \"-NOGROUP No such consumer group '%s' \"\n                                   \"for key name '%s'\",\n                                   (char*)grpname, (char*)c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "            addReplyErrorFormat(c, \"-NOGROUP No such consumer group '%s' \"",
          "new_line_content": "        /* Certain subcommands require the group to exist. */",
          "content_same": false
        },
        {
          "line": 1128,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"wrong number of arguments for XADD\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,\"wrong number of arguments for XADD\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1641,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"CREATE\")",
          "new_text": null,
          "old_line_content": "    if (!strcasecmp(opt,\"CREATE\") && c->argc == 5) {",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 2154,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": null,
          "old_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.czero)",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.czero)) == NULL",
          "new_line_content": "void xtrimCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 2155,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,OBJ_STREAM)",
          "new_text": null,
          "old_line_content": "        || checkType(c,o,OBJ_STREAM)) return;",
          "new_line_content": "    robj *o;",
          "content_same": false
        },
        {
          "line": 1643,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(c->argv[4]->ptr,\"$\")",
          "new_text": null,
          "old_line_content": "        if (!strcmp(c->argv[4]->ptr,\"$\")) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1645,
          "old_api": "streamParseIDOrReply",
          "new_api": null,
          "old_text": "streamParseIDOrReply(c,c->argv[4],&id,0)",
          "new_text": null,
          "old_line_content": "        } else if (streamParseIDOrReply(c,c->argv[4],&id,0) != C_OK) {",
          "new_line_content": "    /* Dispatch the different subcommands. */",
          "content_same": false
        },
        {
          "line": 1135,
          "old_api": "streamTypeLookupWriteOrCreate",
          "new_api": null,
          "old_text": "streamTypeLookupWriteOrCreate(c,c->argv[1])",
          "new_text": null,
          "old_line_content": "    if ((o = streamTypeLookupWriteOrCreate(c,c->argv[1])) == NULL) return;",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1139,
          "old_api": "streamAppendItem",
          "new_api": null,
          "old_text": "streamAppendItem(s,c->argv+field_pos,(c->argc-field_pos)/2,\n        &id, id_given ? &id : NULL)",
          "new_text": null,
          "old_line_content": "    if (streamAppendItem(s,c->argv+field_pos,(c->argc-field_pos)/2,",
          "new_line_content": "    stream *s;",
          "content_same": false
        },
        {
          "line": 1652,
          "old_api": "notifyKeyspaceEvent",
          "new_api": null,
          "old_text": "notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-create\",\n                                c->argv[2],c->db->id)",
          "new_text": null,
          "old_line_content": "            notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-create\",",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1143,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"The ID specified in XADD is equal or smaller than the \"\n                        \"target stream top item\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,\"The ID specified in XADD is equal or smaller than the \"",
          "new_line_content": "    /* Append using the low level function and return the ID. */",
          "content_same": false
        },
        {
          "line": 1656,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-BUSYGROUP Consumer Group name already exists\\r\\n\")",
          "new_text": null,
          "old_line_content": "                sdsnew(\"-BUSYGROUP Consumer Group name already exists\\r\\n\"));",
          "new_line_content": "            server.dirty++;",
          "content_same": false
        },
        {
          "line": 2169,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"maxlen\")",
          "new_text": null,
          "old_line_content": "        if (!strcasecmp(opt,\"maxlen\") && moreargs) {",
          "new_line_content": "    /* Parse options. */",
          "content_same": false
        },
        {
          "line": 1658,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"SETID\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(opt,\"SETID\") && c->argc == 5) {",
          "new_line_content": "                                c->argv[2],c->db->id);",
          "content_same": false
        },
        {
          "line": 1147,
          "old_api": "addReplyStreamID",
          "new_api": null,
          "old_text": "addReplyStreamID(c,&id)",
          "new_text": null,
          "old_line_content": "    addReplyStreamID(c,&id);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1149,
          "old_api": "signalModifiedKey",
          "new_api": null,
          "old_text": "signalModifiedKey(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    signalModifiedKey(c->db,c->argv[1]);",
          "new_line_content": "                        \"target stream top item\");",
          "content_same": false
        },
        {
          "line": 1150,
          "old_api": "notifyKeyspaceEvent",
          "new_api": null,
          "old_text": "notifyKeyspaceEvent(NOTIFY_STREAM,\"xadd\",c->argv[1],c->db->id)",
          "new_text": null,
          "old_line_content": "    notifyKeyspaceEvent(NOTIFY_STREAM,\"xadd\",c->argv[1],c->db->id);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 1662,
          "old_api": "streamParseIDOrReply",
          "new_api": null,
          "old_text": "streamParseIDOrReply(c,c->argv[4],&id,0)",
          "new_text": null,
          "old_line_content": "        } else if (streamParseIDOrReply(c,c->argv[4],&id,0) != C_OK) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2177,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c,c->argv[i+1],&maxlen,NULL)",
          "new_text": null,
          "old_line_content": "            if (getLongLongFromObjectOrReply(c,c->argv[i+1],&maxlen,NULL)",
          "new_line_content": "            /* Check for the form MAXLEN ~ <count>. */",
          "content_same": false
        },
        {
          "line": 1666,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.ok);",
          "new_line_content": "            id = s->last_id;",
          "content_same": false
        },
        {
          "line": 1668,
          "old_api": "notifyKeyspaceEvent",
          "new_api": null,
          "old_text": "notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-setid\",c->argv[2],c->db->id)",
          "new_text": null,
          "old_line_content": "        notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-setid\",c->argv[2],c->db->id);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 2181,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.syntaxerr);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1669,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"DESTROY\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(opt,\"DESTROY\") && c->argc == 4) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1159,
          "old_api": "createStringObjectFromLongLong",
          "new_api": null,
          "old_text": "createStringObjectFromLongLong(0)",
          "new_text": null,
          "old_line_content": "            robj *zeroobj = createStringObjectFromLongLong(0);",
          "new_line_content": "    if (maxlen >= 0) {",
          "content_same": false
        },
        {
          "line": 1672,
          "old_api": "streamFreeCG",
          "new_api": null,
          "old_text": "streamFreeCG(cg)",
          "new_text": null,
          "old_line_content": "            streamFreeCG(cg);",
          "new_line_content": "        server.dirty++;",
          "content_same": false
        },
        {
          "line": 1161,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(zeroobj)",
          "new_text": null,
          "old_line_content": "            decrRefCount(zeroobj);",
          "new_line_content": "            /* If no trimming was performed, for instance because approximated",
          "content_same": false
        },
        {
          "line": 1163,
          "old_api": "notifyKeyspaceEvent",
          "new_api": null,
          "old_text": "notifyKeyspaceEvent(NOTIFY_STREAM,\"xtrim\",c->argv[1],c->db->id)",
          "new_text": null,
          "old_line_content": "            notifyKeyspaceEvent(NOTIFY_STREAM,\"xtrim\",c->argv[1],c->db->id);",
          "new_line_content": "             * as zero, so that the command is propagated without trimming. */",
          "content_same": false
        },
        {
          "line": 1675,
          "old_api": "notifyKeyspaceEvent",
          "new_api": null,
          "old_text": "notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-destroy\",\n                                c->argv[2],c->db->id)",
          "new_text": null,
          "old_line_content": "            notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-destroy\",",
          "new_line_content": "        if (cg) {",
          "content_same": false
        },
        {
          "line": 2189,
          "old_api": "streamTrimByLength",
          "new_api": null,
          "old_text": "streamTrimByLength(s,maxlen,approx_maxlen)",
          "new_text": null,
          "old_line_content": "        deleted = streamTrimByLength(s,maxlen,approx_maxlen);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2191,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"XTRIM called without an option to trim the stream\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,\"XTRIM called without an option to trim the stream\");",
          "new_line_content": "    /* Perform the trimming. */",
          "content_same": false
        },
        {
          "line": 1169,
          "old_api": "createObjectFromStreamID",
          "new_api": null,
          "old_text": "createObjectFromStreamID(&id)",
          "new_text": null,
          "old_line_content": "    robj *idarg = createObjectFromStreamID(&id);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1170,
          "old_api": "rewriteClientCommandArgument",
          "new_api": null,
          "old_text": "rewriteClientCommandArgument(c,i,idarg)",
          "new_text": null,
          "old_line_content": "    rewriteClientCommandArgument(c,i,idarg);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1171,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(idarg)",
          "new_text": null,
          "old_line_content": "    decrRefCount(idarg);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1684,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c,pending)",
          "new_text": null,
          "old_line_content": "        addReplyLongLong(c,pending);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2197,
          "old_api": "signalModifiedKey",
          "new_api": null,
          "old_text": "signalModifiedKey(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "        signalModifiedKey(c->db,c->argv[1]);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 2198,
          "old_api": "notifyKeyspaceEvent",
          "new_api": null,
          "old_text": "notifyKeyspaceEvent(NOTIFY_STREAM,\"xtrim\",c->argv[1],c->db->id)",
          "new_text": null,
          "old_line_content": "        notifyKeyspaceEvent(NOTIFY_STREAM,\"xtrim\",c->argv[1],c->db->id);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1686,
          "old_api": "notifyKeyspaceEvent",
          "new_api": null,
          "old_text": "notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-delconsumer\",\n                            c->argv[2],c->db->id)",
          "new_text": null,
          "old_line_content": "        notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-delconsumer\",",
          "new_line_content": "        /* Delete the consumer and returns the number of pending messages",
          "content_same": false
        },
        {
          "line": 2201,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c,deleted)",
          "new_text": null,
          "old_line_content": "    addReplyLongLong(c,deleted);",
          "new_line_content": "    if (deleted) {",
          "content_same": false
        },
        {
          "line": 1188,
          "old_api": "streamParseIDOrReply",
          "new_api": null,
          "old_text": "streamParseIDOrReply(c,startarg,&startid,0)",
          "new_text": null,
          "old_line_content": "    if (streamParseIDOrReply(c,startarg,&startid,0) == C_ERR) return;",
          "new_line_content": "    streamID startid, endid;",
          "content_same": false
        },
        {
          "line": 1189,
          "old_api": "streamParseIDOrReply",
          "new_api": null,
          "old_text": "streamParseIDOrReply(c,endarg,&endid,UINT64_MAX)",
          "new_text": null,
          "old_line_content": "    if (streamParseIDOrReply(c,endarg,&endid,UINT64_MAX) == C_ERR) return;",
          "new_line_content": "    long long count = 0;",
          "content_same": false
        },
        {
          "line": 1706,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    robj *o = lookupKeyRead(c->db,c->argv[1]);",
          "new_line_content": " * Return value of the command is the number of messages successfully",
          "content_same": false
        },
        {
          "line": 1195,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"COUNT\")",
          "new_text": null,
          "old_line_content": "            if (strcasecmp(c->argv[j]->ptr,\"COUNT\") == 0 && additional >= 1) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1196,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c,c->argv[j+1],&count,NULL)",
          "new_text": null,
          "old_line_content": "                if (getLongLongFromObjectOrReply(c,c->argv[j+1],&count,NULL)",
          "new_line_content": "    /* Parse the COUNT option if any. */",
          "content_same": false
        },
        {
          "line": 2221,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr,\"HELP\")",
          "new_text": null,
          "old_line_content": "    if (!strcasecmp(c->argv[1]->ptr,\"HELP\")) {",
          "new_line_content": "    stream *s = NULL;",
          "content_same": false
        },
        {
          "line": 2222,
          "old_api": "addReplyHelp",
          "new_api": null,
          "old_text": "addReplyHelp(c, help)",
          "new_text": null,
          "old_line_content": "        addReplyHelp(c, help);",
          "new_line_content": "    char *opt;",
          "content_same": false
        },
        {
          "line": 1708,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,OBJ_STREAM)",
          "new_text": null,
          "old_line_content": "        if (checkType(c,o,OBJ_STREAM)) return; /* Type error. */",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 1709,
          "old_api": "streamLookupCG",
          "new_api": null,
          "old_text": "streamLookupCG(o->ptr,c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "        group = streamLookupCG(o->ptr,c->argv[2]->ptr);",
          "new_line_content": "void xackCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 2225,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"syntax error, try 'XINFO HELP'\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,\"syntax error, try 'XINFO HELP'\");",
          "new_line_content": "    /* HELP is special. Handle it ASAP. */",
          "content_same": false
        },
        {
          "line": 1208,
          "old_api": "lookupKeyReadOrReply",
          "new_api": null,
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.emptymultibulk)",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.emptymultibulk)) == NULL",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1209,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,OBJ_STREAM)",
          "new_text": null,
          "old_line_content": "        || checkType(c,o,OBJ_STREAM)) return;",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1722,
          "old_api": "streamParseIDOrReply",
          "new_api": null,
          "old_text": "streamParseIDOrReply(c,c->argv[j],&id,0)",
          "new_text": null,
          "old_line_content": "        if (streamParseIDOrReply(c,c->argv[j],&id,0) != C_OK) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2235,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": null,
          "old_text": "lookupKeyWriteOrReply(c,key,shared.nokeyerr)",
          "new_text": null,
          "old_line_content": "    robj *o = lookupKeyWriteOrReply(c,key,shared.nokeyerr);",
          "new_line_content": "     * the ones are in the form of \"<subcommand> <key>\". */",
          "content_same": false
        },
        {
          "line": 2236,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,OBJ_STREAM)",
          "new_text": null,
          "old_line_content": "    if (o == NULL || checkType(c,o,OBJ_STREAM)) return;",
          "new_line_content": "    opt = c->argv[1]->ptr;",
          "content_same": false
        },
        {
          "line": 1211,
          "old_api": "streamReplyWithRange",
          "new_api": null,
          "old_text": "streamReplyWithRange(c,s,&startid,&endid,count,rev,NULL,NULL,0,NULL)",
          "new_text": null,
          "old_line_content": "    streamReplyWithRange(c,s,&startid,&endid,count,rev,NULL,NULL,0,NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1723,
          "old_api": "streamEncodeID",
          "new_api": null,
          "old_text": "streamEncodeID(buf,&id)",
          "new_text": null,
          "old_line_content": "        streamEncodeID(buf,&id);",
          "new_line_content": "    int acknowledged = 0;",
          "content_same": false
        },
        {
          "line": 1767,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c,c->argv[5],&count,NULL)",
          "new_text": null,
          "old_line_content": "        if (getLongLongFromObjectOrReply(c,c->argv[5],&count,NULL) == C_ERR)",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2242,
          "old_api": "streamLookupCG",
          "new_api": null,
          "old_text": "streamLookupCG(s,c->argv[3]->ptr)",
          "new_text": null,
          "old_line_content": "        streamCG *cg = streamLookupCG(s,c->argv[3]->ptr);",
          "new_line_content": "    s = o->ptr;",
          "content_same": false
        },
        {
          "line": 1730,
          "old_api": "raxRemove",
          "new_api": null,
          "old_text": "raxRemove(group->pel,buf,sizeof(buf),NULL)",
          "new_text": null,
          "old_line_content": "            raxRemove(group->pel,buf,sizeof(buf),NULL);",
          "new_line_content": "        /* Lookup the ID in the group PEL: it will have a reference to the",
          "content_same": false
        },
        {
          "line": 2244,
          "old_api": "addReplyErrorFormat",
          "new_api": null,
          "old_text": "addReplyErrorFormat(c, \"-NOGROUP No such consumer group '%s' \"\n                                   \"for key name '%s'\",\n                                   (char*)c->argv[3]->ptr, (char*)key->ptr)",
          "new_text": null,
          "old_line_content": "            addReplyErrorFormat(c, \"-NOGROUP No such consumer group '%s' \"",
          "new_line_content": "    /* Dispatch the different subcommands. */",
          "content_same": false
        },
        {
          "line": 708,
          "old_api": "lpReplaceInteger",
          "new_api": null,
          "old_text": "lpReplaceInteger(lp,&p,aux-1)",
          "new_text": null,
          "old_line_content": "    lp = lpReplaceInteger(lp,&p,aux-1);",
          "new_line_content": "    if (aux == 1) {",
          "content_same": false
        },
        {
          "line": 1731,
          "old_api": "raxRemove",
          "new_api": null,
          "old_text": "raxRemove(nack->consumer->pel,buf,sizeof(buf),NULL)",
          "new_text": null,
          "old_line_content": "            raxRemove(nack->consumer->pel,buf,sizeof(buf),NULL);",
          "new_line_content": "         * NACK structure that will have a reference to the consumer, so that",
          "content_same": false
        },
        {
          "line": 711,
          "old_api": "lpReplaceInteger",
          "new_api": null,
          "old_text": "lpReplaceInteger(lp,&p,aux+1)",
          "new_text": null,
          "old_line_content": "    lp = lpReplaceInteger(lp,&p,aux+1);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1732,
          "old_api": "streamFreeNACK",
          "new_api": null,
          "old_text": "streamFreeNACK(nack)",
          "new_text": null,
          "old_line_content": "            streamFreeNACK(nack);",
          "new_line_content": "         * we are able to remove the entry from both PELs. */",
          "content_same": false
        },
        {
          "line": 2250,
          "old_api": "raxSize",
          "new_api": null,
          "old_text": "raxSize(cg->consumers)",
          "new_text": null,
          "old_line_content": "        addReplyMultiBulkLen(c,raxSize(cg->consumers));",
          "new_line_content": "                                   \"for key name '%s'\",",
          "content_same": false
        },
        {
          "line": 1227,
          "old_api": "lookupKeyReadOrReply",
          "new_api": null,
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2252,
          "old_api": "raxStart",
          "new_api": null,
          "old_text": "raxStart(&ri,cg->consumers)",
          "new_text": null,
          "old_line_content": "        raxStart(&ri,cg->consumers);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 2253,
          "old_api": "raxSeek",
          "new_api": null,
          "old_text": "raxSeek(&ri,\"^\",NULL,0)",
          "new_text": null,
          "old_line_content": "        raxSeek(&ri,\"^\",NULL,0);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2254,
          "old_api": "mstime",
          "new_api": null,
          "old_text": "mstime()",
          "new_text": null,
          "old_line_content": "        mstime_t now = mstime();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 719,
          "old_api": "streamDecodeID",
          "new_api": null,
          "old_text": "streamDecodeID(si->start_key,&start)",
          "new_text": null,
          "old_line_content": "        streamDecodeID(si->start_key,&start);",
          "new_line_content": "    si->stream->length--;",
          "content_same": false
        },
        {
          "line": 1228,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,OBJ_STREAM)",
          "new_text": null,
          "old_line_content": "        || checkType(c,o,OBJ_STREAM)) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1230,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c,s->length)",
          "new_text": null,
          "old_line_content": "    addReplyLongLong(c,s->length);",
          "new_line_content": "void xlenCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 723,
          "old_api": "streamDecodeID",
          "new_api": null,
          "old_text": "streamDecodeID(si->end_key,&end)",
          "new_text": null,
          "old_line_content": "        streamDecodeID(si->end_key,&end);",
          "new_line_content": "    if (si->rev) {",
          "content_same": false
        },
        {
          "line": 2261,
          "old_api": "addReplyStatus",
          "new_api": null,
          "old_text": "addReplyStatus(c,\"name\")",
          "new_text": null,
          "old_line_content": "            addReplyStatus(c,\"name\");",
          "new_line_content": "            streamConsumer *consumer = ri.data;",
          "content_same": false
        },
        {
          "line": 2262,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(consumer->name)",
          "new_text": null,
          "old_line_content": "            addReplyBulkCBuffer(c,consumer->name,sdslen(consumer->name));",
          "new_line_content": "            mstime_t idle = now - consumer->seen_time;",
          "content_same": false
        },
        {
          "line": 2263,
          "old_api": "addReplyStatus",
          "new_api": null,
          "old_text": "addReplyStatus(c,\"pending\")",
          "new_text": null,
          "old_line_content": "            addReplyStatus(c,\"pending\");",
          "new_line_content": "            if (idle < 0) idle = 0;",
          "content_same": false
        },
        {
          "line": 2264,
          "old_api": "raxSize",
          "new_api": null,
          "old_text": "raxSize(consumer->pel)",
          "new_text": null,
          "old_line_content": "            addReplyLongLong(c,raxSize(consumer->pel));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 725,
          "old_api": "streamIteratorStop",
          "new_api": null,
          "old_text": "streamIteratorStop(si)",
          "new_text": null,
          "old_line_content": "    streamIteratorStop(si);",
          "new_line_content": "        end = *current;",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": "streamIteratorStart",
          "new_api": null,
          "old_text": "streamIteratorStart(si,si->stream,&start,&end,si->rev)",
          "new_text": null,
          "old_line_content": "    streamIteratorStart(si,si->stream,&start,&end,si->rev);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 2272,
          "old_api": "addReplyMultiBulkLen",
          "new_api": null,
          "old_text": "addReplyMultiBulkLen(c,0)",
          "new_text": null,
          "old_line_content": "            addReplyMultiBulkLen(c,0);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 736,
          "old_api": "raxStop",
          "new_api": null,
          "old_text": "raxStop(&si->ri)",
          "new_text": null,
          "old_line_content": "    raxStop(&si->ri);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1760,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.syntaxerr);",
          "new_line_content": "    streamID startid, endid;",
          "content_same": false
        },
        {
          "line": 1251,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->argv[0]->ptr)",
          "new_text": null,
          "old_line_content": "    int xreadgroup = sdslen(c->argv[0]->ptr) == 10; /* XREAD or XREADGROUP? */",
          "new_line_content": "    int noack = 0;          /* True if NOACK option was specified. */",
          "content_same": false
        },
        {
          "line": 2276,
          "old_api": "raxSize",
          "new_api": null,
          "old_text": "raxSize(s->cgroups)",
          "new_text": null,
          "old_line_content": "        addReplyMultiBulkLen(c,raxSize(s->cgroups));",
          "new_line_content": "        if (s->cgroups == NULL) {",
          "content_same": false
        },
        {
          "line": 2278,
          "old_api": "raxStart",
          "new_api": null,
          "old_text": "raxStart(&ri,s->cgroups)",
          "new_text": null,
          "old_line_content": "        raxStart(&ri,s->cgroups);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 2279,
          "old_api": "raxSeek",
          "new_api": null,
          "old_text": "raxSeek(&ri,\"^\",NULL,0)",
          "new_text": null,
          "old_line_content": "        raxSeek(&ri,\"^\",NULL,0);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2280,
          "old_api": "raxNext",
          "new_api": null,
          "old_text": "raxNext(&ri)",
          "new_text": null,
          "old_line_content": "        while(raxNext(&ri)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 744,
          "old_api": "streamIteratorStart",
          "new_api": null,
          "old_text": "streamIteratorStart(&si,s,id,id,0)",
          "new_text": null,
          "old_line_content": "    streamIteratorStart(&si,s,id,id,0);",
          "new_line_content": "/* Delete the specified item ID from the stream, returning 1 if the item",
          "content_same": false
        },
        {
          "line": 2282,
          "old_api": "addReplyMultiBulkLen",
          "new_api": null,
          "old_text": "addReplyMultiBulkLen(c,8)",
          "new_text": null,
          "old_line_content": "            addReplyMultiBulkLen(c,8);",
          "new_line_content": "        raxIterator ri;",
          "content_same": false
        },
        {
          "line": 747,
          "old_api": "streamIteratorGetID",
          "new_api": null,
          "old_text": "streamIteratorGetID(&si,&myid,&numfields)",
          "new_text": null,
          "old_line_content": "    if (streamIteratorGetID(&si,&myid,&numfields)) {",
          "new_line_content": "    int deleted = 0;",
          "content_same": false
        },
        {
          "line": 748,
          "old_api": "streamIteratorRemoveEntry",
          "new_api": null,
          "old_text": "streamIteratorRemoveEntry(&si,&myid)",
          "new_text": null,
          "old_line_content": "        streamIteratorRemoveEntry(&si,&myid);",
          "new_line_content": "    streamIterator si;",
          "content_same": false
        },
        {
          "line": 1259,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(o,\"BLOCK\")",
          "new_text": null,
          "old_line_content": "        if (!strcasecmp(o,\"BLOCK\") && moreargs) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2286,
          "old_api": "raxSize",
          "new_api": null,
          "old_text": "raxSize(cg->consumers)",
          "new_text": null,
          "old_line_content": "            addReplyLongLong(c,raxSize(cg->consumers));",
          "new_line_content": "            streamCG *cg = ri.data;",
          "content_same": false
        },
        {
          "line": 1261,
          "old_api": "getTimeoutFromObjectOrReply",
          "new_api": null,
          "old_text": "getTimeoutFromObjectOrReply(c,c->argv[i],&timeout,\n                UNIT_MILLISECONDS)",
          "new_text": null,
          "old_line_content": "            if (getTimeoutFromObjectOrReply(c,c->argv[i],&timeout,",
          "new_line_content": "    for (int i = 1; i < c->argc; i++) {",
          "content_same": false
        },
        {
          "line": 1263,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(o,\"COUNT\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(o,\"COUNT\") && moreargs) {",
          "new_line_content": "        char *o = c->argv[i]->ptr;",
          "content_same": false
        },
        {
          "line": 1265,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c,c->argv[i],&count,NULL)",
          "new_text": null,
          "old_line_content": "            if (getLongLongFromObjectOrReply(c,c->argv[i],&count,NULL) != C_OK)",
          "new_line_content": "            i++;",
          "content_same": false
        },
        {
          "line": 1769,
          "old_api": "streamParseIDOrReply",
          "new_api": null,
          "old_text": "streamParseIDOrReply(c,c->argv[3],&startid,0)",
          "new_text": null,
          "old_line_content": "        if (streamParseIDOrReply(c,c->argv[3],&startid,0) == C_ERR)",
          "new_line_content": "    /* Parse start/end/count arguments ASAP if needed, in order to report",
          "content_same": false
        },
        {
          "line": 1771,
          "old_api": "streamParseIDOrReply",
          "new_api": null,
          "old_text": "streamParseIDOrReply(c,c->argv[4],&endid,UINT64_MAX)",
          "new_text": null,
          "old_line_content": "        if (streamParseIDOrReply(c,c->argv[4],&endid,UINT64_MAX) == C_ERR)",
          "new_line_content": "    if (c->argc >= 6) {",
          "content_same": false
        },
        {
          "line": 1779,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,OBJ_STREAM)",
          "new_text": null,
          "old_line_content": "    if (o && checkType(c,o,OBJ_STREAM)) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 758,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    sds replyid = sdscatfmt(sdsempty(),\"+%U-%U\\r\\n\",id->ms,id->seq);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 759,
          "old_api": "addReplySds",
          "new_api": null,
          "old_text": "addReplySds(c,replyid)",
          "new_text": null,
          "old_line_content": "    addReplySds(c,replyid);",
          "new_line_content": "/* Emit a reply in the client output buffer by formatting a Stream ID",
          "content_same": false
        },
        {
          "line": 2296,
          "old_api": "addReplyStatus",
          "new_api": null,
          "old_text": "addReplyStatus(c,\"length\")",
          "new_text": null,
          "old_line_content": "        addReplyStatus(c,\"length\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1272,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"Unbalanced XREAD list of streams: \"\n                                \"for each stream key an ID or '$' must be \"\n                                \"specified.\")",
          "new_text": null,
          "old_line_content": "                addReplyError(c,\"Unbalanced XREAD list of streams: \"",
          "new_line_content": "            if (count < 0) count = 0;",
          "content_same": false
        },
        {
          "line": 1783,
          "old_api": "addReplyErrorFormat",
          "new_api": null,
          "old_text": "addReplyErrorFormat(c, \"-NOGROUP No such key '%s' or consumer \"\n                               \"group '%s'\",\n                               (char*)key->ptr,(char*)groupname->ptr)",
          "new_text": null,
          "old_line_content": "        addReplyErrorFormat(c, \"-NOGROUP No such key '%s' or consumer \"",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2299,
          "old_api": "raxSize",
          "new_api": null,
          "old_text": "raxSize(s->rax)",
          "new_text": null,
          "old_line_content": "        addReplyLongLong(c,raxSize(s->rax));",
          "new_line_content": "        /* XINFO STREAM <key> (or the alias XINFO <key>). */",
          "content_same": false
        },
        {
          "line": 765,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    return createObject(OBJ_STRING, sdscatfmt(sdsempty(),\"%U-%U\",",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1279,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(o,\"GROUP\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(o,\"GROUP\") && moreargs >= 2) {",
          "new_line_content": "                                \"specified.\");",
          "content_same": false
        },
        {
          "line": 1791,
          "old_api": "addReplyMultiBulkLen",
          "new_api": null,
          "old_text": "addReplyMultiBulkLen(c,4)",
          "new_text": null,
          "old_line_content": "        addReplyMultiBulkLen(c,4);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 1281,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"The GROUP option is only supported by \"\n                                \"XREADGROUP. You called XREAD instead.\")",
          "new_text": null,
          "old_line_content": "                addReplyError(c,\"The GROUP option is only supported by \"",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1793,
          "old_api": "raxSize",
          "new_api": null,
          "old_text": "raxSize(group->pel)",
          "new_text": null,
          "old_line_content": "        addReplyLongLong(c,raxSize(group->pel));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1795,
          "old_api": "raxSize",
          "new_api": null,
          "old_text": "raxSize(group->pel)",
          "new_text": null,
          "old_line_content": "        if (raxSize(group->pel) == 0) {",
          "new_line_content": "    if (justinfo) {",
          "content_same": false
        },
        {
          "line": 1797,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.nullbulk); /* End. */",
          "new_line_content": "        /* Total number of messages in the PEL. */",
          "content_same": false
        },
        {
          "line": 1288,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(o,\"NOACK\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(o,\"NOACK\")) {",
          "new_line_content": "                return;",
          "content_same": false
        },
        {
          "line": 2313,
          "old_api": "addReplyStatus",
          "new_api": null,
          "old_text": "addReplyStatus(c,\"first-entry\")",
          "new_text": null,
          "old_line_content": "        addReplyStatus(c,\"first-entry\");",
          "new_line_content": "         * API. */",
          "content_same": false
        },
        {
          "line": 2314,
          "old_api": "streamReplyWithRange",
          "new_api": null,
          "old_text": "streamReplyWithRange(c,s,&start,&end,1,0,NULL,NULL,\n                                     STREAM_RWR_RAWENTRIES,NULL)",
          "new_text": null,
          "old_line_content": "        count = streamReplyWithRange(c,s,&start,&end,1,0,NULL,NULL,",
          "new_line_content": "        int count;",
          "content_same": false
        },
        {
          "line": 1290,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"The NOACK option is only supported by \"\n                                \"XREADGROUP. You called XREAD instead.\")",
          "new_text": null,
          "old_line_content": "                addReplyError(c,\"The NOACK option is only supported by \"",
          "new_line_content": "            groupname = c->argv[i+1];",
          "content_same": false
        },
        {
          "line": 2316,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "        if (!count) addReply(c,shared.nullbulk);",
          "new_line_content": "        start.ms = start.seq = 0;",
          "content_same": false
        },
        {
          "line": 2317,
          "old_api": "addReplyStatus",
          "new_api": null,
          "old_text": "addReplyStatus(c,\"last-entry\")",
          "new_text": null,
          "old_line_content": "        addReplyStatus(c,\"last-entry\");",
          "new_line_content": "        end.ms = end.seq = UINT64_MAX;",
          "content_same": false
        },
        {
          "line": 781,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject(\"XCLAIM\",6)",
          "new_text": null,
          "old_line_content": "    argv[0] = createStringObject(\"XCLAIM\",6);",
          "new_line_content": "     *        RETRYCOUNT <count> FORCE JUSTID.",
          "content_same": false
        },
        {
          "line": 1804,
          "old_api": "raxNext",
          "new_api": null,
          "old_text": "raxNext(&ri)",
          "new_text": null,
          "old_line_content": "            raxNext(&ri);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 2320,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "        if (!count) addReply(c,shared.nullbulk);",
          "new_line_content": "                                     STREAM_RWR_RAWENTRIES,NULL);",
          "content_same": false
        },
        {
          "line": 784,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(nack->consumer->name)",
          "new_text": null,
          "old_line_content": "    argv[3] = createStringObject(nack->consumer->name,sdslen(nack->consumer->name));",
          "new_line_content": "     * useless work in the slave side, trying to fetch the stream item. */",
          "content_same": false
        },
        {
          "line": 785,
          "old_api": "createStringObjectFromLongLong",
          "new_api": null,
          "old_text": "createStringObjectFromLongLong(0)",
          "new_text": null,
          "old_line_content": "    argv[4] = createStringObjectFromLongLong(0);",
          "new_line_content": "    robj *argv[12];",
          "content_same": false
        },
        {
          "line": 787,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject(\"TIME\",4)",
          "new_text": null,
          "old_line_content": "    argv[6] = createStringObject(\"TIME\",4);",
          "new_line_content": "    argv[1] = key;",
          "content_same": false
        },
        {
          "line": 788,
          "old_api": "createStringObjectFromLongLong",
          "new_api": null,
          "old_text": "createStringObjectFromLongLong(nack->delivery_time)",
          "new_text": null,
          "old_line_content": "    argv[7] = createStringObjectFromLongLong(nack->delivery_time);",
          "new_line_content": "    argv[2] = group;",
          "content_same": false
        },
        {
          "line": 1296,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.syntaxerr);",
          "new_line_content": "                                \"XREADGROUP. You called XREAD instead.\");",
          "content_same": false
        },
        {
          "line": 1805,
          "old_api": "streamDecodeID",
          "new_api": null,
          "old_text": "streamDecodeID(ri.key,&startid)",
          "new_text": null,
          "old_line_content": "            streamDecodeID(ri.key,&startid);",
          "new_line_content": "            /* Start. */",
          "content_same": false
        },
        {
          "line": 791,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject(\"FORCE\",5)",
          "new_text": null,
          "old_line_content": "    argv[10] = createStringObject(\"FORCE\",5);",
          "new_line_content": "    argv[5] = id;",
          "content_same": false
        },
        {
          "line": 1303,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.syntaxerr);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1812,
          "old_api": "addReplyStreamID",
          "new_api": null,
          "old_text": "addReplyStreamID(c,&endid)",
          "new_text": null,
          "old_line_content": "            addReplyStreamID(c,&endid);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1813,
          "old_api": "raxStop",
          "new_api": null,
          "old_text": "raxStop(&ri)",
          "new_text": null,
          "old_line_content": "            raxStop(&ri);",
          "new_line_content": "            /* End. */",
          "content_same": false
        },
        {
          "line": 1820,
          "old_api": "raxNext",
          "new_api": null,
          "old_text": "raxNext(&ri)",
          "new_text": null,
          "old_line_content": "            while(raxNext(&ri)) {",
          "new_line_content": "            /* Consumers with pending messages. */",
          "content_same": false
        },
        {
          "line": 1310,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"Missing GROUP option for XREADGROUP\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,\"Missing GROUP option for XREADGROUP\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1824,
          "old_api": "addReplyBulkCBuffer",
          "new_api": null,
          "old_text": "addReplyBulkCBuffer(c,ri.key,ri.key_len)",
          "new_text": null,
          "old_line_content": "                addReplyBulkCBuffer(c,ri.key,ri.key_len);",
          "new_line_content": "            size_t arraylen = 0;",
          "content_same": false
        },
        {
          "line": 1316,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(streamID)*streams_count)",
          "new_text": null,
          "old_line_content": "        ids = zmalloc(sizeof(streamID)*streams_count);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 1317,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(streamCG*)*streams_count)",
          "new_text": null,
          "old_line_content": "    if (groupname) groups = zmalloc(sizeof(streamCG*)*streams_count);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1835,
          "old_api": "streamLookupConsumer",
          "new_api": null,
          "old_text": "streamLookupConsumer(group,consumername->ptr,0)",
          "new_text": null,
          "old_line_content": "                                streamLookupConsumer(group,consumername->ptr,0):",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1325,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,key)",
          "new_text": null,
          "old_line_content": "        robj *o = lookupKeyRead(c->db,key);",
          "new_line_content": "        /* Specifying \"$\" as last-known-id means that the client wants to be",
          "content_same": false
        },
        {
          "line": 1326,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,OBJ_STREAM)",
          "new_text": null,
          "old_line_content": "        if (o && checkType(c,o,OBJ_STREAM)) goto cleanup;",
          "new_line_content": "         * served with just the messages that will arrive into the stream",
          "content_same": false
        },
        {
          "line": 1841,
          "old_api": "addReplyMultiBulkLen",
          "new_api": null,
          "old_text": "addReplyMultiBulkLen(c,0)",
          "new_text": null,
          "old_line_content": "            addReplyMultiBulkLen(c,0);",
          "new_line_content": "                                NULL;",
          "content_same": false
        },
        {
          "line": 1333,
          "old_api": "streamLookupCG",
          "new_api": null,
          "old_text": "streamLookupCG(o->ptr,groupname->ptr)",
          "new_text": null,
          "old_line_content": "                (group = streamLookupCG(o->ptr,groupname->ptr)) == NULL)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1335,
          "old_api": "addReplyErrorFormat",
          "new_api": null,
          "old_text": "addReplyErrorFormat(c, \"-NOGROUP No such key '%s' or consumer \"\n                                       \"group '%s' in XREADGROUP with GROUP \"\n                                       \"option\",\n                                    (char*)key->ptr,(char*)groupname->ptr)",
          "new_text": null,
          "old_line_content": "                addReplyErrorFormat(c, \"-NOGROUP No such key '%s' or consumer \"",
          "new_line_content": "         * key and group actually exist. */",
          "content_same": false
        },
        {
          "line": 1849,
          "old_api": "mstime",
          "new_api": null,
          "old_text": "mstime()",
          "new_text": null,
          "old_line_content": "        mstime_t now = mstime();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1851,
          "old_api": "streamEncodeID",
          "new_api": null,
          "old_text": "streamEncodeID(startkey,&startid)",
          "new_text": null,
          "old_line_content": "        streamEncodeID(startkey,&startid);",
          "new_line_content": "        unsigned char startkey[sizeof(streamID)];",
          "content_same": false
        },
        {
          "line": 1852,
          "old_api": "streamEncodeID",
          "new_api": null,
          "old_text": "streamEncodeID(endkey,&endid)",
          "new_text": null,
          "old_line_content": "        streamEncodeID(endkey,&endid);",
          "new_line_content": "        unsigned char endkey[sizeof(streamID)];",
          "content_same": false
        },
        {
          "line": 1853,
          "old_api": "raxStart",
          "new_api": null,
          "old_text": "raxStart(&ri,pel)",
          "new_text": null,
          "old_line_content": "        raxStart(&ri,pel);",
          "new_line_content": "        raxIterator ri;",
          "content_same": false
        },
        {
          "line": 1855,
          "old_api": "addDeferredMultiBulkLength",
          "new_api": null,
          "old_text": "addDeferredMultiBulkLength(c)",
          "new_text": null,
          "old_line_content": "        void *arraylen_ptr = addDeferredMultiBulkLength(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1344,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(c->argv[i]->ptr,\"$\")",
          "new_text": null,
          "old_line_content": "        if (strcmp(c->argv[i]->ptr,\"$\") == 0) {",
          "new_line_content": "                goto cleanup;",
          "content_same": false
        },
        {
          "line": 1353,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(c->argv[i]->ptr,\">\")",
          "new_text": null,
          "old_line_content": "        } else if (strcmp(c->argv[i]->ptr,\">\") == 0) {",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 1355,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"The > ID can be specified only when calling \"\n                                \"XREADGROUP using the GROUP <group> \"\n                                \"<consumer> option.\")",
          "new_text": null,
          "old_line_content": "                addReplyError(c,\"The > ID can be specified only when calling \"",
          "new_line_content": "                ids[id_idx].seq = 0;",
          "content_same": false
        },
        {
          "line": 1867,
          "old_api": "streamDecodeID",
          "new_api": null,
          "old_text": "streamDecodeID(ri.key,&id)",
          "new_text": null,
          "old_line_content": "            streamDecodeID(ri.key,&id);",
          "new_line_content": "            count--;",
          "content_same": false
        },
        {
          "line": 1871,
          "old_api": "addReplyBulkCBuffer",
          "new_api": null,
          "old_text": "addReplyBulkCBuffer(c,nack->consumer->name,\n                                sdslen(nack->consumer->name))",
          "new_text": null,
          "old_line_content": "            addReplyBulkCBuffer(c,nack->consumer->name,",
          "new_line_content": "            streamID id;",
          "content_same": false
        },
        {
          "line": 1367,
          "old_api": "streamParseIDOrReply",
          "new_api": null,
          "old_text": "streamParseIDOrReply(c,c->argv[i],ids+id_idx,0)",
          "new_text": null,
          "old_line_content": "        if (streamParseIDOrReply(c,c->argv[i],ids+id_idx,0) != C_OK)",
          "new_line_content": "             * ID later in order to match the changing consumer group last ID. */",
          "content_same": false
        },
        {
          "line": 1880,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c,nack->delivery_count)",
          "new_text": null,
          "old_line_content": "            addReplyLongLong(c,nack->delivery_count);",
          "new_line_content": "            mstime_t elapsed = now - nack->delivery_time;",
          "content_same": false
        },
        {
          "line": 1883,
          "old_api": "setDeferredMultiBulkLength",
          "new_api": null,
          "old_text": "setDeferredMultiBulkLength(c,arraylen_ptr,arraylen)",
          "new_text": null,
          "old_line_content": "        setDeferredMultiBulkLength(c,arraylen_ptr,arraylen);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 863,
          "old_api": "streamCompareID",
          "new_api": null,
          "old_text": "streamCompareID(start,&group->last_id)",
          "new_text": null,
          "old_line_content": "    if (group && streamCompareID(start,&group->last_id) <= 0) {",
          "new_line_content": "     * If instead the client is asking for some history, we serve it",
          "content_same": false
        },
        {
          "line": 864,
          "old_api": "streamReplyWithRangeFromConsumerPEL",
          "new_api": null,
          "old_text": "streamReplyWithRangeFromConsumerPEL(c,s,start,end,count,\n                                                   consumer)",
          "new_text": null,
          "old_line_content": "        return streamReplyWithRangeFromConsumerPEL(c,s,start,end,count,",
          "new_line_content": "     * using a different function, so that we return entries *solely*",
          "content_same": false
        },
        {
          "line": 1375,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[streams_arg+i])",
          "new_text": null,
          "old_line_content": "        robj *o = lookupKeyRead(c->db,c->argv[streams_arg+i]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 870,
          "old_api": "streamIteratorStart",
          "new_api": null,
          "old_text": "streamIteratorStart(&si,s,start,end,rev)",
          "new_text": null,
          "old_line_content": "    streamIteratorStart(&si,s,start,end,rev);",
          "new_line_content": "                                                   consumer);",
          "content_same": false
        },
        {
          "line": 871,
          "old_api": "streamIteratorGetID",
          "new_api": null,
          "old_text": "streamIteratorGetID(&si,&id,&numfields)",
          "new_text": null,
          "old_line_content": "    while(streamIteratorGetID(&si,&id,&numfields)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 873,
          "old_api": "streamCompareID",
          "new_api": null,
          "old_text": "streamCompareID(&id,&group->last_id)",
          "new_text": null,
          "old_line_content": "        if (group && streamCompareID(&id,&group->last_id) > 0)",
          "new_line_content": "    if (!(flags & STREAM_RWR_RAWENTRIES))",
          "content_same": false
        },
        {
          "line": 879,
          "old_api": "addReplyStreamID",
          "new_api": null,
          "old_text": "addReplyStreamID(c,&id)",
          "new_text": null,
          "old_line_content": "        addReplyStreamID(c,&id);",
          "new_line_content": "            group->last_id = id;",
          "content_same": false
        },
        {
          "line": 880,
          "old_api": "addReplyMultiBulkLen",
          "new_api": null,
          "old_text": "addReplyMultiBulkLen(c,numfields*2)",
          "new_text": null,
          "old_line_content": "        addReplyMultiBulkLen(c,numfields*2);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 886,
          "old_api": "streamIteratorGetField",
          "new_api": null,
          "old_text": "streamIteratorGetField(&si,&key,&value,&key_len,&value_len)",
          "new_text": null,
          "old_line_content": "            streamIteratorGetField(&si,&key,&value,&key_len,&value_len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 887,
          "old_api": "addReplyBulkCBuffer",
          "new_api": null,
          "old_text": "addReplyBulkCBuffer(c,key,key_len)",
          "new_text": null,
          "old_line_content": "            addReplyBulkCBuffer(c,key,key_len);",
          "new_line_content": "        /* Emit the field-value pairs. */",
          "content_same": false
        },
        {
          "line": 888,
          "old_api": "addReplyBulkCBuffer",
          "new_api": null,
          "old_text": "addReplyBulkCBuffer(c,value,value_len)",
          "new_text": null,
          "old_line_content": "            addReplyBulkCBuffer(c,value,value_len);",
          "new_line_content": "        while(numfields--) {",
          "content_same": false
        },
        {
          "line": 1806,
          "old_api": "addReplyStreamID",
          "new_api": null,
          "old_text": "addReplyStreamID(c,&startid)",
          "new_text": null,
          "old_line_content": "            addReplyStreamID(c,&startid);",
          "new_line_content": "            raxIterator ri;",
          "content_same": false
        },
        {
          "line": 902,
          "old_api": "streamEncodeID",
          "new_api": null,
          "old_text": "streamEncodeID(buf,&id)",
          "new_text": null,
          "old_line_content": "            streamEncodeID(buf,&id);",
          "new_line_content": "         * XGROUP SETID command. So if we find that there is already",
          "content_same": false
        },
        {
          "line": 1414,
          "old_api": "addDeferredMultiBulkLength",
          "new_api": null,
          "old_text": "addDeferredMultiBulkLength(c)",
          "new_text": null,
          "old_line_content": "            if (arraylen == 1) arraylen_ptr = addDeferredMultiBulkLength(c);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 909,
          "old_api": "raxTryInsert",
          "new_api": null,
          "old_text": "raxTryInsert(group->pel,buf,sizeof(buf),nack,NULL)",
          "new_text": null,
          "old_line_content": "                raxTryInsert(group->pel,buf,sizeof(buf),nack,NULL);",
          "new_line_content": "            /* Try to add a new NACK. Most of the time this will work and",
          "content_same": false
        },
        {
          "line": 911,
          "old_api": "raxTryInsert",
          "new_api": null,
          "old_text": "raxTryInsert(consumer->pel,buf,sizeof(buf),nack,NULL)",
          "new_text": null,
          "old_line_content": "                raxTryInsert(consumer->pel,buf,sizeof(buf),nack,NULL);",
          "new_line_content": "             * if we find that there is already a entry for this ID. */",
          "content_same": false
        },
        {
          "line": 1423,
          "old_api": "addReplyMultiBulkLen",
          "new_api": null,
          "old_text": "addReplyMultiBulkLen(c,2)",
          "new_text": null,
          "old_line_content": "            addReplyMultiBulkLen(c,2);",
          "new_line_content": "            streamID start = *gt;",
          "content_same": false
        },
        {
          "line": 1424,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,c->argv[streams_arg+i])",
          "new_text": null,
          "old_line_content": "            addReplyBulk(c,c->argv[streams_arg+i]);",
          "new_line_content": "            start.seq++; /* uint64_t can't overflow in this context. */",
          "content_same": false
        },
        {
          "line": 1426,
          "old_api": "streamLookupConsumer",
          "new_api": null,
          "old_text": "streamLookupConsumer(groups[i],\n                                                        consumername->ptr,1)",
          "new_text": null,
          "old_line_content": "            if (groups) consumer = streamLookupConsumer(groups[i],",
          "new_line_content": "            /* Emit the two elements sub-array consisting of the name",
          "content_same": false
        },
        {
          "line": 917,
          "old_api": "streamFreeNACK",
          "new_api": null,
          "old_text": "streamFreeNACK(nack)",
          "new_text": null,
          "old_line_content": "                streamFreeNACK(nack);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 918,
          "old_api": "raxFind",
          "new_api": null,
          "old_text": "raxFind(group->pel,buf,sizeof(buf))",
          "new_text": null,
          "old_line_content": "                nack = raxFind(group->pel,buf,sizeof(buf));",
          "new_line_content": "            /* Now we can check if the entry was already busy, and",
          "content_same": false
        },
        {
          "line": 919,
          "old_api": "serverAssert",
          "new_api": null,
          "old_text": "serverAssert(nack != raxNotFound)",
          "new_text": null,
          "old_line_content": "                serverAssert(nack != raxNotFound);",
          "new_line_content": "             * in that case reassign the entry to the new consumer,",
          "content_same": false
        },
        {
          "line": 920,
          "old_api": "raxRemove",
          "new_api": null,
          "old_text": "raxRemove(nack->consumer->pel,buf,sizeof(buf),NULL)",
          "new_text": null,
          "old_line_content": "                raxRemove(nack->consumer->pel,buf,sizeof(buf),NULL);",
          "new_line_content": "             * or update it if the consumer is the same as before. */",
          "content_same": false
        },
        {
          "line": 1947,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    robj *o = lookupKeyRead(c->db,c->argv[1]);",
          "new_line_content": " * The command returns an array of messages that the user",
          "content_same": false
        },
        {
          "line": 926,
          "old_api": "raxInsert",
          "new_api": null,
          "old_text": "raxInsert(consumer->pel,buf,sizeof(buf),nack,NULL)",
          "new_text": null,
          "old_line_content": "                raxInsert(consumer->pel,buf,sizeof(buf),nack,NULL);",
          "new_line_content": "                /* Update the consumer and NACK metadata. */",
          "content_same": false
        },
        {
          "line": 1438,
          "old_api": "setDeferredMultiBulkLength",
          "new_api": null,
          "old_text": "setDeferredMultiBulkLength(c,arraylen_ptr,arraylen)",
          "new_text": null,
          "old_line_content": "        setDeferredMultiBulkLength(c,arraylen_ptr,arraylen);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1955,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,OBJ_STREAM)",
          "new_text": null,
          "old_line_content": "        if (checkType(c,o,OBJ_STREAM)) return; /* Type error. */",
          "new_line_content": "    mstime_t deliverytime = -1;  /* -1 means IDLE/TIME options not given. */",
          "content_same": false
        },
        {
          "line": 1956,
          "old_api": "streamLookupCG",
          "new_api": null,
          "old_text": "streamLookupCG(o->ptr,c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "        group = streamLookupCG(o->ptr,c->argv[2]->ptr);",
          "new_line_content": "    int force = 0;",
          "content_same": false
        },
        {
          "line": 934,
          "old_api": "streamPropagateXCLAIM",
          "new_api": null,
          "old_text": "streamPropagateXCLAIM(c,spi->keyname,spi->groupname,idarg,nack)",
          "new_text": null,
          "old_line_content": "                streamPropagateXCLAIM(c,spi->keyname,spi->groupname,idarg,nack);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 935,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(idarg)",
          "new_text": null,
          "old_line_content": "                decrRefCount(idarg);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1447,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullmultibulk)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.nullmultibulk);",
          "new_line_content": "    /* Block if needed. */",
          "content_same": false
        },
        {
          "line": 1450,
          "old_api": "blockForKeys",
          "new_api": null,
          "old_text": "blockForKeys(c, BLOCKED_STREAM, c->argv+streams_arg, streams_count,\n                     timeout, NULL, ids)",
          "new_text": null,
          "old_line_content": "        blockForKeys(c, BLOCKED_STREAM, c->argv+streams_arg, streams_count,",
          "new_line_content": "         * we can do is treating it as a timeout (even with timeout 0). */",
          "content_same": false
        },
        {
          "line": 1962,
          "old_api": "addReplyErrorFormat",
          "new_api": null,
          "old_text": "addReplyErrorFormat(c,\"-NOGROUP No such key '%s' or \"\n                              \"consumer group '%s'\", (char*)c->argv[1]->ptr,\n                              (char*)c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "        addReplyErrorFormat(c,\"-NOGROUP No such key '%s' or \"",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 942,
          "old_api": "streamIteratorStop",
          "new_api": null,
          "old_text": "streamIteratorStop(&si)",
          "new_text": null,
          "old_line_content": "    streamIteratorStop(&si);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 943,
          "old_api": "setDeferredMultiBulkLength",
          "new_api": null,
          "old_text": "setDeferredMultiBulkLength(c,arraylen_ptr,arraylen)",
          "new_text": null,
          "old_line_content": "    if (arraylen_ptr) setDeferredMultiBulkLength(c,arraylen_ptr,arraylen);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1968,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c,c->argv[4],&minidle,\n        \"Invalid min-idle-time argument for XCLAIM\")",
          "new_text": null,
          "old_line_content": "    if (getLongLongFromObjectOrReply(c,c->argv[4],&minidle,",
          "new_line_content": "                              \"consumer group '%s'\", (char*)c->argv[1]->ptr,",
          "content_same": false
        },
        {
          "line": 1462,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(groupname)",
          "new_text": null,
          "old_line_content": "            incrRefCount(groupname);",
          "new_line_content": "        /* If this is a XREADGROUP + GROUP we need to remember for which",
          "content_same": false
        },
        {
          "line": 1463,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(consumername)",
          "new_text": null,
          "old_line_content": "            incrRefCount(consumername);",
          "new_line_content": "         * group and consumer name we are blocking, so later when one of the",
          "content_same": false
        },
        {
          "line": 1980,
          "old_api": "streamParseIDOrReply",
          "new_api": null,
          "old_text": "streamParseIDOrReply(NULL,c->argv[j],&id,0)",
          "new_text": null,
          "old_line_content": "        if (streamParseIDOrReply(NULL,c->argv[j],&id,0) != C_OK) break;",
          "new_line_content": "     * the client successfully claimed some message, so it should be",
          "content_same": false
        },
        {
          "line": 1986,
          "old_api": "mstime",
          "new_api": null,
          "old_text": "mstime()",
          "new_text": null,
          "old_line_content": "    time_t now = mstime();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 964,
          "old_api": "streamEncodeID",
          "new_api": null,
          "old_text": "streamEncodeID(startkey,start)",
          "new_text": null,
          "old_line_content": "    streamEncodeID(startkey,start);",
          "new_line_content": " * fetching the history of already retrieved messages, which is rare. */",
          "content_same": false
        },
        {
          "line": 965,
          "old_api": "streamEncodeID",
          "new_api": null,
          "old_text": "streamEncodeID(endkey,end)",
          "new_text": null,
          "old_line_content": "    if (end) streamEncodeID(endkey,end);",
          "new_line_content": "size_t streamReplyWithRangeFromConsumerPEL(client *c, stream *s, streamID *start, streamID *end, size_t count, streamConsumer *consumer) {",
          "content_same": false
        },
        {
          "line": 1476,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullmultibulk)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.nullmultibulk);",
          "new_line_content": "        goto cleanup;",
          "content_same": false
        },
        {
          "line": 1990,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"FORCE\")",
          "new_text": null,
          "old_line_content": "        if (!strcasecmp(opt,\"FORCE\")) {",
          "new_line_content": "     * are trailing options. */",
          "content_same": false
        },
        {
          "line": 968,
          "old_api": "addDeferredMultiBulkLength",
          "new_api": null,
          "old_text": "addDeferredMultiBulkLength(c)",
          "new_text": null,
          "old_line_content": "    void *arraylen_ptr = addDeferredMultiBulkLength(c);",
          "new_line_content": "    unsigned char endkey[sizeof(streamID)];",
          "content_same": false
        },
        {
          "line": 1992,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"JUSTID\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(opt,\"JUSTID\")) {",
          "new_line_content": "    for (; j < c->argc; j++) {",
          "content_same": false
        },
        {
          "line": 1994,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"IDLE\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(opt,\"IDLE\") && moreargs) {",
          "new_line_content": "        char *opt = c->argv[j]->ptr;",
          "content_same": false
        },
        {
          "line": 971,
          "old_api": "raxNext",
          "new_api": null,
          "old_text": "raxNext(&ri)",
          "new_text": null,
          "old_line_content": "    while(raxNext(&ri) && (!count || arraylen < count)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 972,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(ri.key,end,ri.key_len)",
          "new_text": null,
          "old_line_content": "        if (end && memcmp(ri.key,end,ri.key_len) > 0) break;",
          "new_line_content": "    size_t arraylen = 0;",
          "content_same": false
        },
        {
          "line": 1483,
          "old_api": "preventCommandPropagation",
          "new_api": null,
          "old_text": "preventCommandPropagation(c)",
          "new_text": null,
          "old_line_content": "    preventCommandPropagation(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1484,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(ids)",
          "new_text": null,
          "old_line_content": "    if (ids != static_ids) zfree(ids);",
          "new_line_content": "cleanup: /* Cleanup. */",
          "content_same": false
        },
        {
          "line": 1485,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(groups)",
          "new_text": null,
          "old_line_content": "    zfree(groups);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1996,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c,c->argv[j],&deliverytime,\n                \"Invalid IDLE option argument for XCLAIM\")",
          "new_text": null,
          "old_line_content": "            if (getLongLongFromObjectOrReply(c,c->argv[j],&deliverytime,",
          "new_line_content": "            force = 1;",
          "content_same": false
        },
        {
          "line": 2000,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"TIME\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(opt,\"TIME\") && moreargs) {",
          "new_line_content": "            j++;",
          "content_same": false
        },
        {
          "line": 2002,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c,c->argv[j],&deliverytime,\n                \"Invalid IDLE option argument for XCLAIM\")",
          "new_text": null,
          "old_line_content": "            if (getLongLongFromObjectOrReply(c,c->argv[j],&deliverytime,",
          "new_line_content": "                \"Invalid IDLE option argument for XCLAIM\")",
          "content_same": false
        },
        {
          "line": 982,
          "old_api": "addReplyMultiBulkLen",
          "new_api": null,
          "old_text": "addReplyMultiBulkLen(c,2)",
          "new_text": null,
          "old_line_content": "            addReplyMultiBulkLen(c,2);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 984,
          "old_api": "streamDecodeID",
          "new_api": null,
          "old_text": "streamDecodeID(ri.key,&id)",
          "new_text": null,
          "old_line_content": "            streamDecodeID(ri.key,&id);",
          "new_line_content": "             * about a message that's no longer here because was removed",
          "content_same": false
        },
        {
          "line": 985,
          "old_api": "addReplyStreamID",
          "new_api": null,
          "old_text": "addReplyStreamID(c,&id)",
          "new_text": null,
          "old_line_content": "            addReplyStreamID(c,&id);",
          "new_line_content": "             * by the user by other means. In that case we signal it emitting",
          "content_same": false
        },
        {
          "line": 986,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullmultibulk)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.nullmultibulk);",
          "new_line_content": "             * the ID but then a NULL entry for the fields. */",
          "content_same": false
        },
        {
          "line": 1496,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*nack))",
          "new_text": null,
          "old_line_content": "    streamNACK *nack = zmalloc(sizeof(*nack));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1497,
          "old_api": "mstime",
          "new_api": null,
          "old_text": "mstime()",
          "new_text": null,
          "old_line_content": "    nack->delivery_time = mstime();",
          "new_line_content": "/* Create a NACK entry setting the delivery count to 1 and the delivery",
          "content_same": false
        },
        {
          "line": 2011,
          "old_api": "addReplyErrorFormat",
          "new_api": null,
          "old_text": "addReplyErrorFormat(c,\"Unrecognized XCLAIM option '%s'\",opt)",
          "new_text": null,
          "old_line_content": "            addReplyErrorFormat(c,\"Unrecognized XCLAIM option '%s'\",opt);",
          "new_line_content": "            j++;",
          "content_same": false
        },
        {
          "line": 1505,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(na)",
          "new_text": null,
          "old_line_content": "    zfree(na);",
          "new_line_content": "    return nack;",
          "content_same": false
        },
        {
          "line": 995,
          "old_api": "setDeferredMultiBulkLength",
          "new_api": null,
          "old_text": "setDeferredMultiBulkLength(c,arraylen_ptr,arraylen)",
          "new_text": null,
          "old_line_content": "    setDeferredMultiBulkLength(c,arraylen_ptr,arraylen);",
          "new_line_content": "            nack->delivery_count++;",
          "content_same": false
        },
        {
          "line": 1514,
          "old_api": "raxFree",
          "new_api": null,
          "old_text": "raxFree(sc->pel)",
          "new_text": null,
          "old_line_content": "    raxFree(sc->pel); /* No value free callback: the PEL entries are shared",
          "new_line_content": " * will not reassign the pending messages associated with this consumer",
          "content_same": false
        },
        {
          "line": 1516,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(sc->name)",
          "new_text": null,
          "old_line_content": "    sdsfree(sc->name);",
          "new_line_content": " * to delete a consumer, and not when the whole stream is destroyed, the caller",
          "content_same": false
        },
        {
          "line": 1517,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(sc)",
          "new_text": null,
          "old_line_content": "    zfree(sc);",
          "new_line_content": " * should do some work before. */",
          "content_same": false
        },
        {
          "line": 1006,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,key)",
          "new_text": null,
          "old_line_content": "    robj *o = lookupKeyWrite(c->db,key);",
          "new_line_content": " * ----------------------------------------------------------------------- */",
          "content_same": false
        },
        {
          "line": 1008,
          "old_api": "createStreamObject",
          "new_api": null,
          "old_text": "createStreamObject()",
          "new_text": null,
          "old_line_content": "        o = createStreamObject();",
          "new_line_content": "/* Look the stream at 'key' and return the corresponding stream object.",
          "content_same": false
        },
        {
          "line": 1009,
          "old_api": "dbAdd",
          "new_api": null,
          "old_text": "dbAdd(c->db,key,o)",
          "new_text": null,
          "old_line_content": "        dbAdd(c->db,key,o);",
          "new_line_content": " * The function creates a key setting it to an empty stream if needed. */",
          "content_same": false
        },
        {
          "line": 2033,
          "old_api": "streamLookupConsumer",
          "new_api": null,
          "old_text": "streamLookupConsumer(group,c->argv[3]->ptr,1)",
          "new_text": null,
          "old_line_content": "    streamConsumer *consumer = streamLookupConsumer(group,c->argv[3]->ptr,1);",
          "new_line_content": "         * zero. */",
          "content_same": false
        },
        {
          "line": 2034,
          "old_api": "addDeferredMultiBulkLength",
          "new_api": null,
          "old_text": "addDeferredMultiBulkLength(c)",
          "new_text": null,
          "old_line_content": "    void *arraylenptr = addDeferredMultiBulkLength(c);",
          "new_line_content": "        deliverytime = now;",
          "content_same": false
        },
        {
          "line": 1012,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "    if (o == NULL) {",
          "content_same": false
        },
        {
          "line": 1525,
          "old_api": "raxNew",
          "new_api": null,
          "old_text": "raxNew()",
          "new_text": null,
          "old_line_content": "    if (s->cgroups == NULL) s->cgroups = raxNew();",
          "new_line_content": "/* Create a new consumer group in the context of the stream 's', having the",
          "content_same": false
        },
        {
          "line": 1526,
          "old_api": "raxFind",
          "new_api": null,
          "old_text": "raxFind(s->cgroups,(unsigned char*)name,namelen)",
          "new_text": null,
          "old_line_content": "    if (raxFind(s->cgroups,(unsigned char*)name,namelen) != raxNotFound)",
          "new_line_content": " * specified name and last server ID. If a consumer group with the same name",
          "content_same": false
        },
        {
          "line": 2040,
          "old_api": "streamEncodeID",
          "new_api": null,
          "old_text": "streamEncodeID(buf,&id)",
          "new_text": null,
          "old_line_content": "        streamEncodeID(buf,&id);",
          "new_line_content": "    size_t arraylen = 0;",
          "content_same": false
        },
        {
          "line": 1529,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*cg))",
          "new_text": null,
          "old_line_content": "    streamCG *cg = zmalloc(sizeof(*cg));",
          "new_line_content": "streamCG *streamCreateCG(stream *s, char *name, size_t namelen, streamID *id) {",
          "content_same": false
        },
        {
          "line": 2043,
          "old_api": "raxFind",
          "new_api": null,
          "old_text": "raxFind(group->pel,buf,sizeof(buf))",
          "new_text": null,
          "old_line_content": "        streamNACK *nack = raxFind(group->pel,buf,sizeof(buf));",
          "new_line_content": "        unsigned char buf[sizeof(streamID)];",
          "content_same": false
        },
        {
          "line": 1533,
          "old_api": "raxInsert",
          "new_api": null,
          "old_text": "raxInsert(s->cgroups,(unsigned char*)name,namelen,cg,NULL)",
          "new_text": null,
          "old_line_content": "    raxInsert(s->cgroups,(unsigned char*)name,namelen,cg,NULL);",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 106,
      "total_additions": 282,
      "total_deletions": 280,
      "total_api_changes": 668
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 11,
        "api_related_lines": 668,
        "non_api_lines": 4,
        "non_api_line_numbers": [
          721,
          729,
          717,
          727
        ]
      }
    },
    "api_calls_before": 565,
    "api_calls_after": 567,
    "diff_info": {
      "added_lines": 10,
      "removed_lines": 5,
      "total_diff_lines": 45
    }
  }
}
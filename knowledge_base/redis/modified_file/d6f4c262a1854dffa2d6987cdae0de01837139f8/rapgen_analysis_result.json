{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/d6f4c262a1854dffa2d6987cdae0de01837139f8",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/d6f4c262a1854dffa2d6987cdae0de01837139f8/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/d6f4c262a1854dffa2d6987cdae0de01837139f8/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/d6f4c262a1854dffa2d6987cdae0de01837139f8/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": true,
    "api_changes": {
      "replacements": [
        {
          "line": 4337,
          "old_api": "sdsempty",
          "new_api": "createStringObjectFromLongLong",
          "old_text": "sdsempty()",
          "new_text": "createStringObjectFromLongLong(value)",
          "old_line_content": "    o = createObject(REDIS_STRING,sdscatprintf(sdsempty(),\"%lld\",value));",
          "new_line_content": "    o = createStringObjectFromLongLong(value);",
          "content_same": false
        },
        {
          "line": 4338,
          "old_api": "tryObjectEncoding",
          "new_api": "dictAdd",
          "old_text": "tryObjectEncoding(o)",
          "new_text": "dictAdd(c->db->dict,c->argv[1],o)",
          "old_line_content": "    o = tryObjectEncoding(o);",
          "new_line_content": "    retval = dictAdd(c->db->dict,c->argv[1],o);",
          "content_same": false
        },
        {
          "line": 4341,
          "old_api": "dictReplace",
          "new_api": "removeExpire",
          "old_text": "dictReplace(c->db->dict,c->argv[1],o)",
          "new_text": "removeExpire(c->db,c->argv[1])",
          "old_line_content": "        dictReplace(c->db->dict,c->argv[1],o);",
          "new_line_content": "        removeExpire(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4363,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": "incrDecrCommand",
          "old_text": "getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL)",
          "new_text": "incrDecrCommand(c,incr)",
          "old_line_content": "    if (getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL) != REDIS_OK) return;",
          "new_line_content": "    incrDecrCommand(c,incr);",
          "content_same": false
        },
        {
          "line": 4370,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": "incrDecrCommand",
          "old_text": "getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL)",
          "new_text": "incrDecrCommand(c,-incr)",
          "old_line_content": "    if (getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL) != REDIS_OK) return;",
          "new_line_content": "    incrDecrCommand(c,-incr);",
          "content_same": false
        },
        {
          "line": 4382,
          "old_api": "dictAdd",
          "new_api": "incrRefCount",
          "old_text": "dictAdd(c->db->dict,c->argv[1],c->argv[2])",
          "new_text": "incrRefCount(c->argv[1])",
          "old_line_content": "        retval = dictAdd(c->db->dict,c->argv[1],c->argv[2]);",
          "new_line_content": "        incrRefCount(c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4384,
          "old_api": "incrRefCount",
          "new_api": "stringObjectLen",
          "old_text": "incrRefCount(c->argv[2])",
          "new_text": "stringObjectLen(c->argv[2])",
          "old_line_content": "        incrRefCount(c->argv[2]);",
          "new_line_content": "        totlen = stringObjectLen(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 4389,
          "old_api": "dictFind",
          "new_api": "assert",
          "old_text": "dictFind(c->db->dict,c->argv[1])",
          "new_text": "assert(de != NULL)",
          "old_line_content": "        de = dictFind(c->db->dict,c->argv[1]);",
          "new_line_content": "        assert(de != NULL);",
          "content_same": false
        },
        {
          "line": 4402,
          "old_api": "sdslen",
          "new_api": "decrRefCount",
          "old_text": "sdslen(decoded->ptr)",
          "new_text": "decrRefCount(decoded)",
          "old_line_content": "            o = createStringObject(decoded->ptr, sdslen(decoded->ptr));",
          "new_line_content": "            decrRefCount(decoded);",
          "content_same": false
        },
        {
          "line": 4403,
          "old_api": "decrRefCount",
          "new_api": "dictReplace",
          "old_text": "decrRefCount(decoded)",
          "new_text": "dictReplace(c->db->dict,c->argv[1],o)",
          "old_line_content": "            decrRefCount(decoded);",
          "new_line_content": "            dictReplace(c->db->dict,c->argv[1],o);",
          "content_same": false
        },
        {
          "line": 4408,
          "old_api": "sdscatlen",
          "new_api": "sdslen",
          "old_text": "sdscatlen(o->ptr,\n                c->argv[2]->ptr, sdslen(c->argv[2]->ptr))",
          "new_text": "sdslen(c->argv[2]->ptr)",
          "old_line_content": "            o->ptr = sdscatlen(o->ptr,",
          "new_line_content": "                c->argv[2]->ptr, sdslen(c->argv[2]->ptr));",
          "content_same": false
        },
        {
          "line": 4427,
          "old_api": "lookupKeyReadOrReply",
          "new_api": "checkType",
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)",
          "new_text": "checkType(c,o,REDIS_STRING)",
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "new_line_content": "        checkType(c,o,REDIS_STRING)) return;",
          "content_same": false
        },
        {
          "line": 4430,
          "old_api": "getDecodedObject",
          "new_api": "sdslen",
          "old_text": "getDecodedObject(o)",
          "new_text": "sdslen(o->ptr)",
          "old_line_content": "    o = getDecodedObject(o);",
          "new_line_content": "    strlen = sdslen(o->ptr);",
          "content_same": false
        },
        {
          "line": 4442,
          "old_api": "addReply",
          "new_api": "decrRefCount",
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": "decrRefCount(o)",
          "old_line_content": "        addReply(c,shared.nullbulk);",
          "new_line_content": "        decrRefCount(o);",
          "content_same": false
        },
        {
          "line": 4450,
          "old_api": "sdsempty",
          "new_api": "sdsnewlen",
          "old_text": "sdsempty()",
          "new_text": "sdsnewlen((char*)o->ptr+start,rangelen)",
          "old_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"$%zu\\r\\n\",rangelen));",
          "new_line_content": "    range = sdsnewlen((char*)o->ptr+start,rangelen);",
          "content_same": false
        },
        {
          "line": 4451,
          "old_api": "sdsnewlen",
          "new_api": "addReplySds",
          "old_text": "sdsnewlen((char*)o->ptr+start,rangelen)",
          "new_text": "addReplySds(c,range)",
          "old_line_content": "    range = sdsnewlen((char*)o->ptr+start,rangelen);",
          "new_line_content": "    addReplySds(c,range);",
          "content_same": false
        },
        {
          "line": 4452,
          "old_api": "addReplySds",
          "new_api": "addReply",
          "old_text": "addReplySds(c,range)",
          "new_text": "addReply(c,shared.crlf)",
          "old_line_content": "    addReplySds(c,range);",
          "new_line_content": "    addReply(c,shared.crlf);",
          "content_same": false
        },
        {
          "line": 4453,
          "old_api": "addReply",
          "new_api": "decrRefCount",
          "old_text": "addReply(c,shared.crlf)",
          "new_text": "decrRefCount(o)",
          "old_line_content": "    addReply(c,shared.crlf);",
          "new_line_content": "    decrRefCount(o);",
          "content_same": false
        },
        {
          "line": 4472,
          "old_api": "expireIfNeeded",
          "new_api": "dictFind",
          "old_text": "expireIfNeeded(c->db,c->argv[1])",
          "new_text": "dictFind(c->db->dict,c->argv[1])",
          "old_line_content": "    expireIfNeeded(c->db,c->argv[1]);",
          "new_line_content": "    if (dictFind(c->db->dict,c->argv[1])) {",
          "content_same": false
        },
        {
          "line": 4473,
          "old_api": "dictFind",
          "new_api": "addReply",
          "old_text": "dictFind(c->db->dict,c->argv[1])",
          "new_text": "addReply(c, shared.cone)",
          "old_line_content": "    if (dictFind(c->db->dict,c->argv[1])) {",
          "new_line_content": "        addReply(c, shared.cone);",
          "content_same": false
        },
        {
          "line": 4483,
          "old_api": "selectDb",
          "new_api": "sdsnew",
          "old_text": "selectDb(c,id)",
          "new_text": "sdsnew(\"-ERR invalid DB index\\r\\n\")",
          "old_line_content": "    if (selectDb(c,id) == REDIS_ERR) {",
          "new_line_content": "        addReplySds(c,sdsnew(\"-ERR invalid DB index\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 4495,
          "old_api": "dictGetRandomKey",
          "new_api": "dictGetEntryKey",
          "old_text": "dictGetRandomKey(c->db->dict)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "        de = dictGetRandomKey(c->db->dict);",
          "new_line_content": "        if (!de || expireIfNeeded(c->db,dictGetEntryKey(de)) == 0) break;",
          "content_same": false
        },
        {
          "line": 4506,
          "old_api": "dupStringObject",
          "new_api": "addReplyBulk",
          "old_text": "dupStringObject(key)",
          "new_text": "addReplyBulk(c,key)",
          "old_line_content": "        key = dupStringObject(key);",
          "new_line_content": "        addReplyBulk(c,key);",
          "content_same": false
        },
        {
          "line": 4507,
          "old_api": "addReplyBulk",
          "new_api": "decrRefCount",
          "old_text": "addReplyBulk(c,key)",
          "new_text": "decrRefCount(key)",
          "old_line_content": "        addReplyBulk(c,key);",
          "new_line_content": "        decrRefCount(key);",
          "content_same": false
        },
        {
          "line": 4522,
          "old_api": "dictGetIterator",
          "new_api": "addReply",
          "old_text": "dictGetIterator(c->db->dict)",
          "new_text": "addReply(c,lenobj)",
          "old_line_content": "    di = dictGetIterator(c->db->dict);",
          "new_line_content": "    addReply(c,lenobj);",
          "content_same": false
        },
        {
          "line": 4523,
          "old_api": "addReply",
          "new_api": "decrRefCount",
          "old_text": "addReply(c,lenobj)",
          "new_text": "decrRefCount(lenobj)",
          "old_line_content": "    addReply(c,lenobj);",
          "new_line_content": "    decrRefCount(lenobj);",
          "content_same": false
        },
        {
          "line": 4524,
          "old_api": "decrRefCount",
          "new_api": "dictNext",
          "old_text": "decrRefCount(lenobj)",
          "new_text": "dictNext(di)",
          "old_line_content": "    decrRefCount(lenobj);",
          "new_line_content": "    while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 4525,
          "old_api": "dictNext",
          "new_api": "dictGetEntryKey",
          "old_text": "dictNext(di)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "    while((de = dictNext(di)) != NULL) {",
          "new_line_content": "        robj *keyobj = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 4530,
          "old_api": "sdslen",
          "new_api": "expireIfNeeded",
          "old_text": "sdslen(key)",
          "new_text": "expireIfNeeded(c->db,keyobj)",
          "old_line_content": "            stringmatchlen(pattern,plen,key,sdslen(key),0)) {",
          "new_line_content": "            if (expireIfNeeded(c->db,keyobj) == 0) {",
          "content_same": false
        },
        {
          "line": 4531,
          "old_api": "expireIfNeeded",
          "new_api": "addReplyBulk",
          "old_text": "expireIfNeeded(c->db,keyobj)",
          "new_text": "addReplyBulk(c,keyobj)",
          "old_line_content": "            if (expireIfNeeded(c->db,keyobj) == 0) {",
          "new_line_content": "                addReplyBulk(c,keyobj);",
          "content_same": false
        },
        {
          "line": 4537,
          "old_api": "dictReleaseIterator",
          "new_api": "sdsempty",
          "old_text": "dictReleaseIterator(di)",
          "new_text": "sdsempty()",
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "    lenobj->ptr = sdscatprintf(sdsempty(),\"*%lu\\r\\n\",numkeys);",
          "content_same": false
        },
        {
          "line": 4542,
          "old_api": "addReplySds",
          "new_api": "dictSize",
          "old_text": "addReplySds(c,\n        sdscatprintf(sdsempty(),\":%lu\\r\\n\",dictSize(c->db->dict)))",
          "new_text": "dictSize(c->db->dict)",
          "old_line_content": "    addReplySds(c,",
          "new_line_content": "        sdscatprintf(sdsempty(),\":%lu\\r\\n\",dictSize(c->db->dict)));",
          "content_same": false
        },
        {
          "line": 4547,
          "old_api": "addReplySds",
          "new_api": "sdsempty",
          "old_text": "addReplySds(c,\n        sdscatprintf(sdsempty(),\":%lu\\r\\n\",server.lastsave))",
          "new_text": "sdsempty()",
          "old_line_content": "    addReplySds(c,",
          "new_line_content": "        sdscatprintf(sdsempty(),\":%lu\\r\\n\",server.lastsave));",
          "content_same": false
        },
        {
          "line": 4568,
          "old_api": "sdsnew",
          "new_api": "addReply",
          "old_text": "sdsnew(type)",
          "new_text": "addReply(c,shared.crlf)",
          "old_line_content": "    addReplySds(c,sdsnew(type));",
          "new_line_content": "    addReply(c,shared.crlf);",
          "content_same": false
        },
        {
          "line": 4577,
          "old_api": "rdbSave",
          "new_api": "addReply",
          "old_text": "rdbSave(server.dbfilename)",
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "    if (rdbSave(server.dbfilename) == REDIS_OK) {",
          "new_line_content": "        addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 4603,
          "old_api": "redisLog",
          "new_api": "kill",
          "old_text": "redisLog(REDIS_WARNING,\"There is a live saving child. Killing it!\")",
          "new_text": "kill(server.bgsavechildpid,SIGKILL)",
          "old_line_content": "        redisLog(REDIS_WARNING,\"There is a live saving child. Killing it!\");",
          "new_line_content": "        kill(server.bgsavechildpid,SIGKILL);",
          "content_same": false
        },
        {
          "line": 4604,
          "old_api": "kill",
          "new_api": "rdbRemoveTempFile",
          "old_text": "kill(server.bgsavechildpid,SIGKILL)",
          "new_text": "rdbRemoveTempFile(server.bgsavechildpid)",
          "old_line_content": "        kill(server.bgsavechildpid,SIGKILL);",
          "new_line_content": "        rdbRemoveTempFile(server.bgsavechildpid);",
          "content_same": false
        },
        {
          "line": 4609,
          "old_api": "fsync",
          "new_api": "unlink",
          "old_text": "fsync(server.appendfd)",
          "new_text": "unlink(server.vm_swap_file)",
          "old_line_content": "        fsync(server.appendfd);",
          "new_line_content": "        if (server.vm_enabled) unlink(server.vm_swap_file);",
          "content_same": false
        },
        {
          "line": 4610,
          "old_api": "unlink",
          "new_api": "exit",
          "old_text": "unlink(server.vm_swap_file)",
          "new_text": "exit(0)",
          "old_line_content": "        if (server.vm_enabled) unlink(server.vm_swap_file);",
          "new_line_content": "        exit(0);",
          "content_same": false
        },
        {
          "line": 4616,
          "old_api": "unlink",
          "new_api": "zmalloc_used_memory",
          "old_text": "unlink(server.pidfile)",
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "                unlink(server.pidfile);",
          "new_line_content": "            redisLog(REDIS_WARNING,\"%zu bytes used at exit\",zmalloc_used_memory());",
          "content_same": false
        },
        {
          "line": 4617,
          "old_api": "zmalloc_used_memory",
          "new_api": "redisLog",
          "old_text": "zmalloc_used_memory()",
          "new_text": "redisLog(REDIS_WARNING,\"Server exit now, bye bye...\")",
          "old_line_content": "            redisLog(REDIS_WARNING,\"%zu bytes used at exit\",zmalloc_used_memory());",
          "new_line_content": "            redisLog(REDIS_WARNING,\"Server exit now, bye bye...\");",
          "content_same": false
        },
        {
          "line": 4618,
          "old_api": "redisLog",
          "new_api": "exit",
          "old_text": "redisLog(REDIS_WARNING,\"Server exit now, bye bye...\")",
          "new_text": "exit(0)",
          "old_line_content": "            redisLog(REDIS_WARNING,\"Server exit now, bye bye...\");",
          "new_line_content": "            exit(0);",
          "content_same": false
        },
        {
          "line": 4626,
          "old_api": "redisLog",
          "new_api": "addReplySds",
          "old_text": "redisLog(REDIS_WARNING,\"Error trying to save the DB, can't exit\")",
          "new_text": "addReplySds(c,\n                sdsnew(\"-ERR can't quit, problems saving the DB\\r\\n\"))",
          "old_line_content": "            redisLog(REDIS_WARNING,\"Error trying to save the DB, can't exit\");",
          "new_line_content": "            addReplySds(c,",
          "content_same": false
        },
        {
          "line": 4627,
          "old_api": "addReplySds",
          "new_api": "sdsnew",
          "old_text": "addReplySds(c,\n                sdsnew(\"-ERR can't quit, problems saving the DB\\r\\n\"))",
          "new_text": "sdsnew(\"-ERR can't quit, problems saving the DB\\r\\n\")",
          "old_line_content": "            addReplySds(c,",
          "new_line_content": "                sdsnew(\"-ERR can't quit, problems saving the DB\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 4637,
          "old_api": "sdscmp",
          "new_api": "addReply",
          "old_text": "sdscmp(c->argv[1]->ptr,c->argv[2]->ptr)",
          "new_text": "addReply(c,shared.sameobjecterr)",
          "old_line_content": "    if (sdscmp(c->argv[1]->ptr,c->argv[2]->ptr) == 0) {",
          "new_line_content": "        addReply(c,shared.sameobjecterr);",
          "content_same": false
        },
        {
          "line": 4645,
          "old_api": "incrRefCount",
          "new_api": "deleteIfVolatile",
          "old_text": "incrRefCount(o)",
          "new_text": "deleteIfVolatile(c->db,c->argv[2])",
          "old_line_content": "    incrRefCount(o);",
          "new_line_content": "    deleteIfVolatile(c->db,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 4646,
          "old_api": "deleteIfVolatile",
          "new_api": "dictAdd",
          "old_text": "deleteIfVolatile(c->db,c->argv[2])",
          "new_text": "dictAdd(c->db->dict,c->argv[2],o)",
          "old_line_content": "    deleteIfVolatile(c->db,c->argv[2]);",
          "new_line_content": "    if (dictAdd(c->db->dict,c->argv[2],o) == DICT_ERR) {",
          "content_same": false
        },
        {
          "line": 4649,
          "old_api": "decrRefCount",
          "new_api": "addReply",
          "old_text": "decrRefCount(o)",
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "            decrRefCount(o);",
          "new_line_content": "            addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 4678,
          "old_api": "atoi",
          "new_api": "addReply",
          "old_text": "atoi(c->argv[2]->ptr)",
          "new_text": "addReply(c,shared.outofrangeerr)",
          "old_line_content": "    if (selectDb(c,atoi(c->argv[2]->ptr)) == REDIS_ERR) {",
          "new_line_content": "        addReply(c,shared.outofrangeerr);",
          "content_same": false
        },
        {
          "line": 4700,
          "old_api": "deleteIfVolatile",
          "new_api": "dictAdd",
          "old_text": "deleteIfVolatile(dst,c->argv[1])",
          "new_text": "dictAdd(dst->dict,c->argv[1],o)",
          "old_line_content": "    deleteIfVolatile(dst,c->argv[1]);",
          "new_line_content": "    if (dictAdd(dst->dict,c->argv[1],o) == DICT_ERR) {",
          "content_same": false
        },
        {
          "line": 4701,
          "old_api": "dictAdd",
          "new_api": "addReply",
          "old_text": "dictAdd(dst->dict,c->argv[1],o)",
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "    if (dictAdd(dst->dict,c->argv[1],o) == DICT_ERR) {",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 4721,
          "old_api": "handleClientsWaitingListPush",
          "new_api": "addReply",
          "old_text": "handleClientsWaitingListPush(c,c->argv[1],c->argv[2])",
          "new_text": "addReply(c,shared.cone)",
          "old_line_content": "        if (handleClientsWaitingListPush(c,c->argv[1],c->argv[2])) {",
          "new_line_content": "            addReply(c,shared.cone);",
          "content_same": false
        },
        {
          "line": 4732,
          "old_api": "dictAdd",
          "new_api": "incrRefCount",
          "old_text": "dictAdd(c->db->dict,c->argv[1],lobj)",
          "new_text": "incrRefCount(c->argv[1])",
          "old_line_content": "        dictAdd(c->db->dict,c->argv[1],lobj);",
          "new_line_content": "        incrRefCount(c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4740,
          "old_api": "handleClientsWaitingListPush",
          "new_api": "addReply",
          "old_text": "handleClientsWaitingListPush(c,c->argv[1],c->argv[2])",
          "new_text": "addReply(c,shared.cone)",
          "old_line_content": "        if (handleClientsWaitingListPush(c,c->argv[1],c->argv[2])) {",
          "new_line_content": "            addReply(c,shared.cone);",
          "content_same": false
        },
        {
          "line": 4768,
          "old_api": "lookupKeyReadOrReply",
          "new_api": "checkType",
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "new_text": "checkType(c,o,REDIS_LIST)",
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "new_line_content": "        checkType(c,o,REDIS_LIST)) return;",
          "content_same": false
        },
        {
          "line": 4781,
          "old_api": "lookupKeyReadOrReply",
          "new_api": "checkType",
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)",
          "new_text": "checkType(c,o,REDIS_LIST)",
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "new_line_content": "        checkType(c,o,REDIS_LIST)) return;",
          "content_same": false
        },
        {
          "line": 4789,
          "old_api": "listNodeValue",
          "new_api": "addReplyBulk",
          "old_text": "listNodeValue(ln)",
          "new_text": "addReplyBulk(c,ele)",
          "old_line_content": "        robj *ele = listNodeValue(ln);",
          "new_line_content": "        addReplyBulk(c,ele);",
          "content_same": false
        },
        {
          "line": 4800,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": "checkType",
          "old_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.nokeyerr)",
          "new_text": "checkType(c,o,REDIS_LIST)",
          "old_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.nokeyerr)) == NULL ||",
          "new_line_content": "        checkType(c,o,REDIS_LIST)) return;",
          "content_same": false
        },
        {
          "line": 4810,
          "old_api": "decrRefCount",
          "new_api": "listNodeValue",
          "old_text": "decrRefCount(ele)",
          "new_text": "listNodeValue(ln)",
          "old_line_content": "        decrRefCount(ele);",
          "new_line_content": "        listNodeValue(ln) = c->argv[3];",
          "content_same": false
        },
        {
          "line": 4811,
          "old_api": "listNodeValue",
          "new_api": "incrRefCount",
          "old_text": "listNodeValue(ln)",
          "new_text": "incrRefCount(c->argv[3])",
          "old_line_content": "        listNodeValue(ln) = c->argv[3];",
          "new_line_content": "        incrRefCount(c->argv[3]);",
          "content_same": false
        },
        {
          "line": 4812,
          "old_api": "incrRefCount",
          "new_api": "addReply",
          "old_text": "incrRefCount(c->argv[3])",
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "        incrRefCount(c->argv[3]);",
          "new_line_content": "        addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 4823,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": "checkType",
          "old_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.nullbulk)",
          "new_text": "checkType(c,o,REDIS_LIST)",
          "old_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "new_line_content": "        checkType(c,o,REDIS_LIST)) return;",
          "content_same": false
        },
        {
          "line": 4835,
          "old_api": "listNodeValue",
          "new_api": "addReplyBulk",
          "old_text": "listNodeValue(ln)",
          "new_text": "addReplyBulk(c,ele)",
          "old_line_content": "        robj *ele = listNodeValue(ln);",
          "new_line_content": "        addReplyBulk(c,ele);",
          "content_same": false
        },
        {
          "line": 4836,
          "old_api": "addReplyBulk",
          "new_api": "listDelNode",
          "old_text": "addReplyBulk(c,ele)",
          "new_text": "listDelNode(list,ln)",
          "old_line_content": "        addReplyBulk(c,ele);",
          "new_line_content": "        listDelNode(list,ln);",
          "content_same": false
        },
        {
          "line": 4837,
          "old_api": "listDelNode",
          "new_api": "deleteKey",
          "old_text": "listDelNode(list,ln)",
          "new_text": "deleteKey(c->db,c->argv[1])",
          "old_line_content": "        listDelNode(list,ln);",
          "new_line_content": "        if (listLength(list) == 0) deleteKey(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4861,
          "old_api": "lookupKeyReadOrReply",
          "new_api": "checkType",
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.emptymultibulk)",
          "new_text": "checkType(c,o,REDIS_LIST)",
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.emptymultibulk)) == NULL",
          "new_line_content": "         || checkType(c,o,REDIS_LIST)) return;",
          "content_same": false
        },
        {
          "line": 4882,
          "old_api": "listIndex",
          "new_api": "sdsempty",
          "old_text": "listIndex(list, start)",
          "new_text": "sdsempty()",
          "old_line_content": "    ln = listIndex(list, start);",
          "new_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",rangelen));",
          "content_same": false
        },
        {
          "line": 4885,
          "old_api": "listNodeValue",
          "new_api": "addReplyBulk",
          "old_text": "listNodeValue(ln)",
          "new_text": "addReplyBulk(c,ele)",
          "old_line_content": "        ele = listNodeValue(ln);",
          "new_line_content": "        addReplyBulk(c,ele);",
          "content_same": false
        },
        {
          "line": 4900,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": "checkType",
          "old_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.ok)",
          "new_text": "checkType(c,o,REDIS_LIST)",
          "old_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.ok)) == NULL ||",
          "new_line_content": "        checkType(c,o,REDIS_LIST)) return;",
          "content_same": false
        },
        {
          "line": 4924,
          "old_api": "listFirst",
          "new_api": "listDelNode",
          "old_text": "listFirst(list)",
          "new_text": "listDelNode(list,ln)",
          "old_line_content": "        ln = listFirst(list);",
          "new_line_content": "        listDelNode(list,ln);",
          "content_same": false
        },
        {
          "line": 4928,
          "old_api": "listLast",
          "new_api": "listDelNode",
          "old_text": "listLast(list)",
          "new_text": "listDelNode(list,ln)",
          "old_line_content": "        ln = listLast(list);",
          "new_line_content": "        listDelNode(list,ln);",
          "content_same": false
        },
        {
          "line": 4944,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": "checkType",
          "old_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.czero)",
          "new_text": "checkType(c,o,REDIS_LIST)",
          "old_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "new_line_content": "        checkType(c,o,REDIS_LIST)) return;",
          "content_same": false
        },
        {
          "line": 4957,
          "old_api": "equalStringObjects",
          "new_api": "listDelNode",
          "old_text": "equalStringObjects(ele,c->argv[3])",
          "new_text": "listDelNode(list,ln)",
          "old_line_content": "        if (equalStringObjects(ele,c->argv[3])) {",
          "new_line_content": "            listDelNode(list,ln);",
          "content_same": false
        },
        {
          "line": 4965,
          "old_api": "deleteKey",
          "new_api": "sdsempty",
          "old_text": "deleteKey(c->db,c->argv[1])",
          "new_text": "sdsempty()",
          "old_line_content": "    if (listLength(list) == 0) deleteKey(c->db,c->argv[1]);",
          "new_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\":%d\\r\\n\",removed));",
          "content_same": false
        },
        {
          "line": 4989,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": "checkType",
          "old_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.nullbulk)",
          "new_text": "checkType(c,sobj,REDIS_LIST)",
          "old_line_content": "    if ((sobj = lookupKeyWriteOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "new_line_content": "        checkType(c,sobj,REDIS_LIST)) return;",
          "content_same": false
        },
        {
          "line": 4997,
          "old_api": "lookupKeyWrite",
          "new_api": "listNodeValue",
          "old_text": "lookupKeyWrite(c->db,c->argv[2])",
          "new_text": "listNodeValue(ln)",
          "old_line_content": "        robj *dobj = lookupKeyWrite(c->db,c->argv[2]);",
          "new_line_content": "        robj *ele = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 5011,
          "old_api": "createListObject",
          "new_api": "dictAdd",
          "old_text": "createListObject()",
          "new_text": "dictAdd(c->db->dict,c->argv[2],dobj)",
          "old_line_content": "                dobj = createListObject();",
          "new_line_content": "                dictAdd(c->db->dict,c->argv[2],dobj);",
          "content_same": false
        },
        {
          "line": 5012,
          "old_api": "dictAdd",
          "new_api": "incrRefCount",
          "old_text": "dictAdd(c->db->dict,c->argv[2],dobj)",
          "new_text": "incrRefCount(c->argv[2])",
          "old_line_content": "                dictAdd(c->db->dict,c->argv[2],dobj);",
          "new_line_content": "                incrRefCount(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 5016,
          "old_api": "listAddNodeHead",
          "new_api": "incrRefCount",
          "old_text": "listAddNodeHead(dstlist,ele)",
          "new_text": "incrRefCount(ele)",
          "old_line_content": "            listAddNodeHead(dstlist,ele);",
          "new_line_content": "            incrRefCount(ele);",
          "content_same": false
        },
        {
          "line": 5024,
          "old_api": "listDelNode",
          "new_api": "deleteKey",
          "old_text": "listDelNode(srclist,ln)",
          "new_text": "deleteKey(c->db,c->argv[1])",
          "old_line_content": "        listDelNode(srclist,ln);",
          "new_line_content": "        if (listLength(srclist) == 0) deleteKey(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 5037,
          "old_api": "createSetObject",
          "new_api": "dictAdd",
          "old_text": "createSetObject()",
          "new_text": "dictAdd(c->db->dict,c->argv[1],set)",
          "old_line_content": "        set = createSetObject();",
          "new_line_content": "        dictAdd(c->db->dict,c->argv[1],set);",
          "content_same": false
        },
        {
          "line": 5038,
          "old_api": "dictAdd",
          "new_api": "incrRefCount",
          "old_text": "dictAdd(c->db->dict,c->argv[1],set)",
          "new_text": "incrRefCount(c->argv[1])",
          "old_line_content": "        dictAdd(c->db->dict,c->argv[1],set);",
          "new_line_content": "        incrRefCount(c->argv[1]);",
          "content_same": false
        },
        {
          "line": 5046,
          "old_api": "dictAdd",
          "new_api": "incrRefCount",
          "old_text": "dictAdd(set->ptr,c->argv[2],NULL)",
          "new_text": "incrRefCount(c->argv[2])",
          "old_line_content": "    if (dictAdd(set->ptr,c->argv[2],NULL) == DICT_OK) {",
          "new_line_content": "        incrRefCount(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 5058,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": "checkType",
          "old_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.czero)",
          "new_text": "checkType(c,set,REDIS_SET)",
          "old_line_content": "    if ((set = lookupKeyWriteOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "new_line_content": "        checkType(c,set,REDIS_SET)) return;",
          "content_same": false
        },
        {
          "line": 5063,
          "old_api": "dictResize",
          "new_api": "deleteKey",
          "old_text": "dictResize(set->ptr)",
          "new_text": "deleteKey(c->db,c->argv[1])",
          "old_line_content": "        if (htNeedsResize(set->ptr)) dictResize(set->ptr);",
          "new_line_content": "        if (dictSize((dict*)set->ptr) == 0) deleteKey(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 5064,
          "old_api": "deleteKey",
          "new_api": "addReply",
          "old_text": "deleteKey(c->db,c->argv[1])",
          "new_text": "addReply(c,shared.cone)",
          "old_line_content": "        if (dictSize((dict*)set->ptr) == 0) deleteKey(c->db,c->argv[1]);",
          "new_line_content": "        addReply(c,shared.cone);",
          "content_same": false
        },
        {
          "line": 5094,
          "old_api": "dictSize",
          "new_api": "deleteKey",
          "old_text": "dictSize((dict*)srcset->ptr)",
          "new_text": "deleteKey(c->db,c->argv[1])",
          "old_line_content": "    if (dictSize((dict*)srcset->ptr) == 0 && srcset != dstset)",
          "new_line_content": "        deleteKey(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 5099,
          "old_api": "createSetObject",
          "new_api": "dictAdd",
          "old_text": "createSetObject()",
          "new_text": "dictAdd(c->db->dict,c->argv[2],dstset)",
          "old_line_content": "        dstset = createSetObject();",
          "new_line_content": "        dictAdd(c->db->dict,c->argv[2],dstset);",
          "content_same": false
        },
        {
          "line": 5100,
          "old_api": "dictAdd",
          "new_api": "incrRefCount",
          "old_text": "dictAdd(c->db->dict,c->argv[2],dstset)",
          "new_text": "incrRefCount(c->argv[2])",
          "old_line_content": "        dictAdd(c->db->dict,c->argv[2],dstset);",
          "new_line_content": "        incrRefCount(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 5103,
          "old_api": "dictAdd",
          "new_api": "incrRefCount",
          "old_text": "dictAdd(dstset->ptr,c->argv[3],NULL)",
          "new_text": "incrRefCount(c->argv[3])",
          "old_line_content": "    if (dictAdd(dstset->ptr,c->argv[3],NULL) == DICT_OK)",
          "new_line_content": "        incrRefCount(c->argv[3]);",
          "content_same": false
        },
        {
          "line": 5104,
          "old_api": "incrRefCount",
          "new_api": "addReply",
          "old_text": "incrRefCount(c->argv[3])",
          "new_text": "addReply(c,shared.cone)",
          "old_line_content": "        incrRefCount(c->argv[3]);",
          "new_line_content": "    addReply(c,shared.cone);",
          "content_same": false
        },
        {
          "line": 5111,
          "old_api": "lookupKeyReadOrReply",
          "new_api": "checkType",
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "new_text": "checkType(c,set,REDIS_SET)",
          "old_line_content": "    if ((set = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "new_line_content": "        checkType(c,set,REDIS_SET)) return;",
          "content_same": false
        },
        {
          "line": 5114,
          "old_api": "dictFind",
          "new_api": "addReply",
          "old_text": "dictFind(set->ptr,c->argv[2])",
          "new_text": "addReply(c,shared.cone)",
          "old_line_content": "    if (dictFind(set->ptr,c->argv[2]))",
          "new_line_content": "        addReply(c,shared.cone);",
          "content_same": false
        },
        {
          "line": 5124,
          "old_api": "lookupKeyReadOrReply",
          "new_api": "checkType",
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "new_text": "checkType(c,o,REDIS_SET)",
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "new_line_content": "        checkType(c,o,REDIS_SET)) return;",
          "content_same": false
        },
        {
          "line": 5135,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": "checkType",
          "old_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.nullbulk)",
          "new_text": "checkType(c,set,REDIS_SET)",
          "old_line_content": "    if ((set = lookupKeyWriteOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "new_line_content": "        checkType(c,set,REDIS_SET)) return;",
          "content_same": false
        },
        {
          "line": 5144,
          "old_api": "addReplyBulk",
          "new_api": "dictDelete",
          "old_text": "addReplyBulk(c,ele)",
          "new_text": "dictDelete(set->ptr,ele)",
          "old_line_content": "        addReplyBulk(c,ele);",
          "new_line_content": "        dictDelete(set->ptr,ele);",
          "content_same": false
        },
        {
          "line": 5145,
          "old_api": "dictDelete",
          "new_api": "dictResize",
          "old_text": "dictDelete(set->ptr,ele)",
          "new_text": "dictResize(set->ptr)",
          "old_line_content": "        dictDelete(set->ptr,ele);",
          "new_line_content": "        if (htNeedsResize(set->ptr)) dictResize(set->ptr);",
          "content_same": false
        },
        {
          "line": 5146,
          "old_api": "dictResize",
          "new_api": "deleteKey",
          "old_text": "dictResize(set->ptr)",
          "new_text": "deleteKey(c->db,c->argv[1])",
          "old_line_content": "        if (htNeedsResize(set->ptr)) dictResize(set->ptr);",
          "new_line_content": "        if (dictSize((dict*)set->ptr) == 0) deleteKey(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 5156,
          "old_api": "lookupKeyReadOrReply",
          "new_api": "checkType",
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)",
          "new_text": "checkType(c,set,REDIS_SET)",
          "old_line_content": "    if ((set = lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "new_line_content": "        checkType(c,set,REDIS_SET)) return;",
          "content_same": false
        },
        {
          "line": 5186,
          "old_api": "lookupKeyWrite",
          "new_api": "lookupKeyRead",
          "old_text": "lookupKeyWrite(c->db,setskeys[j])",
          "new_text": "lookupKeyRead(c->db,setskeys[j])",
          "old_line_content": "                    lookupKeyWrite(c->db,setskeys[j]) :",
          "new_line_content": "                    lookupKeyRead(c->db,setskeys[j]);",
          "content_same": false
        },
        {
          "line": 5200,
          "old_api": "zfree",
          "new_api": "addReply",
          "old_text": "zfree(dv)",
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "            zfree(dv);",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 5216,
          "old_api": "createObject",
          "new_api": "addReply",
          "old_text": "createObject(REDIS_STRING,NULL)",
          "new_text": "addReply(c,lenobj)",
          "old_line_content": "        lenobj = createObject(REDIS_STRING,NULL);",
          "new_line_content": "        addReply(c,lenobj);",
          "content_same": false
        },
        {
          "line": 5217,
          "old_api": "addReply",
          "new_api": "decrRefCount",
          "old_text": "addReply(c,lenobj)",
          "new_text": "decrRefCount(lenobj)",
          "old_line_content": "        addReply(c,lenobj);",
          "new_line_content": "        decrRefCount(lenobj);",
          "content_same": false
        },
        {
          "line": 5242,
          "old_api": "dictAdd",
          "new_api": "incrRefCount",
          "old_text": "dictAdd(dstset->ptr,ele,NULL)",
          "new_text": "incrRefCount(ele)",
          "old_line_content": "            dictAdd(dstset->ptr,ele,NULL);",
          "new_line_content": "            incrRefCount(ele);",
          "content_same": false
        },
        {
          "line": 5251,
          "old_api": "deleteKey",
          "new_api": "dictSize",
          "old_text": "deleteKey(c->db,dstkey)",
          "new_text": "dictSize((dict*)dstset->ptr)",
          "old_line_content": "        deleteKey(c->db,dstkey);",
          "new_line_content": "        if (dictSize((dict*)dstset->ptr) > 0) {",
          "content_same": false
        },
        {
          "line": 5252,
          "old_api": "dictSize",
          "new_api": "dictAdd",
          "old_text": "dictSize((dict*)dstset->ptr)",
          "new_text": "dictAdd(c->db->dict,dstkey,dstset)",
          "old_line_content": "        if (dictSize((dict*)dstset->ptr) > 0) {",
          "new_line_content": "            dictAdd(c->db->dict,dstkey,dstset);",
          "content_same": false
        },
        {
          "line": 5253,
          "old_api": "dictAdd",
          "new_api": "incrRefCount",
          "old_text": "dictAdd(c->db->dict,dstkey,dstset)",
          "new_text": "incrRefCount(dstkey)",
          "old_line_content": "            dictAdd(c->db->dict,dstkey,dstset);",
          "new_line_content": "            incrRefCount(dstkey);",
          "content_same": false
        },
        {
          "line": 5254,
          "old_api": "incrRefCount",
          "new_api": "dictSize",
          "old_text": "incrRefCount(dstkey)",
          "new_text": "dictSize((dict*)dstset->ptr)",
          "old_line_content": "            incrRefCount(dstkey);",
          "new_line_content": "            addReplyLong(c,dictSize((dict*)dstset->ptr));",
          "content_same": false
        },
        {
          "line": 5257,
          "old_api": "decrRefCount",
          "new_api": "addReply",
          "old_text": "decrRefCount(dstset)",
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "            decrRefCount(dstset);",
          "new_line_content": "            addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 5290,
          "old_api": "lookupKeyWrite",
          "new_api": "lookupKeyRead",
          "old_text": "lookupKeyWrite(c->db,setskeys[j])",
          "new_text": "lookupKeyRead(c->db,setskeys[j])",
          "old_line_content": "                    lookupKeyWrite(c->db,setskeys[j]) :",
          "new_line_content": "                    lookupKeyRead(c->db,setskeys[j]);",
          "content_same": false
        },
        {
          "line": 5297,
          "old_api": "zfree",
          "new_api": "addReply",
          "old_text": "zfree(dv)",
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "            zfree(dv);",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 5323,
          "old_api": "dictAdd",
          "new_api": "incrRefCount",
          "old_text": "dictAdd(dstset->ptr,ele,NULL)",
          "new_text": "incrRefCount(ele)",
          "old_line_content": "                if (dictAdd(dstset->ptr,ele,NULL) == DICT_OK) {",
          "new_line_content": "                    incrRefCount(ele);",
          "content_same": false
        },
        {
          "line": 5341,
          "old_api": "sdsempty",
          "new_api": "dictGetIterator",
          "old_text": "sdsempty()",
          "new_text": "dictGetIterator(dstset->ptr)",
          "old_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",cardinality));",
          "new_line_content": "        di = dictGetIterator(dstset->ptr);",
          "content_same": false
        },
        {
          "line": 5342,
          "old_api": "dictGetIterator",
          "new_api": "dictNext",
          "old_text": "dictGetIterator(dstset->ptr)",
          "new_text": "dictNext(di)",
          "old_line_content": "        di = dictGetIterator(dstset->ptr);",
          "new_line_content": "        while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 5346,
          "old_api": "dictGetEntryKey",
          "new_api": "addReplyBulk",
          "old_text": "dictGetEntryKey(de)",
          "new_text": "addReplyBulk(c,ele)",
          "old_line_content": "            ele = dictGetEntryKey(de);",
          "new_line_content": "            addReplyBulk(c,ele);",
          "content_same": false
        },
        {
          "line": 5349,
          "old_api": "dictReleaseIterator",
          "new_api": "decrRefCount",
          "old_text": "dictReleaseIterator(di)",
          "new_text": "decrRefCount(dstset)",
          "old_line_content": "        dictReleaseIterator(di);",
          "new_line_content": "        decrRefCount(dstset);",
          "content_same": false
        },
        {
          "line": 5354,
          "old_api": "deleteKey",
          "new_api": "dictSize",
          "old_text": "deleteKey(c->db,dstkey)",
          "new_text": "dictSize((dict*)dstset->ptr)",
          "old_line_content": "        deleteKey(c->db,dstkey);",
          "new_line_content": "        if (dictSize((dict*)dstset->ptr) > 0) {",
          "content_same": false
        },
        {
          "line": 5355,
          "old_api": "dictSize",
          "new_api": "dictAdd",
          "old_text": "dictSize((dict*)dstset->ptr)",
          "new_text": "dictAdd(c->db->dict,dstkey,dstset)",
          "old_line_content": "        if (dictSize((dict*)dstset->ptr) > 0) {",
          "new_line_content": "            dictAdd(c->db->dict,dstkey,dstset);",
          "content_same": false
        },
        {
          "line": 5356,
          "old_api": "dictAdd",
          "new_api": "incrRefCount",
          "old_text": "dictAdd(c->db->dict,dstkey,dstset)",
          "new_text": "incrRefCount(dstkey)",
          "old_line_content": "            dictAdd(c->db->dict,dstkey,dstset);",
          "new_line_content": "            incrRefCount(dstkey);",
          "content_same": false
        },
        {
          "line": 5357,
          "old_api": "incrRefCount",
          "new_api": "dictSize",
          "old_text": "incrRefCount(dstkey)",
          "new_text": "dictSize((dict*)dstset->ptr)",
          "old_line_content": "            incrRefCount(dstkey);",
          "new_line_content": "            addReplyLong(c,dictSize((dict*)dstset->ptr));",
          "content_same": false
        },
        {
          "line": 5360,
          "old_api": "decrRefCount",
          "new_api": "addReply",
          "old_text": "decrRefCount(dstset)",
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "            decrRefCount(dstset);",
          "new_line_content": "            addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 5435,
          "old_api": "decrRefCount",
          "new_api": "zfree",
          "old_text": "decrRefCount(node->obj)",
          "new_text": "zfree(node->forward)",
          "old_line_content": "    decrRefCount(node->obj);",
          "new_line_content": "    zfree(node->forward);",
          "content_same": false
        },
        {
          "line": 5561,
          "old_api": "equalStringObjects",
          "new_api": "zslDeleteNode",
          "old_text": "equalStringObjects(x->obj,obj)",
          "new_text": "zslDeleteNode(zsl, x, update)",
          "old_line_content": "    if (x && score == x->score && equalStringObjects(x->obj,obj)) {",
          "new_line_content": "        zslDeleteNode(zsl, x, update);",
          "content_same": false
        },
        {
          "line": 5562,
          "old_api": "zslDeleteNode",
          "new_api": "zslFreeNode",
          "old_text": "zslDeleteNode(zsl, x, update)",
          "new_text": "zslFreeNode(x)",
          "old_line_content": "        zslDeleteNode(zsl, x, update);",
          "new_line_content": "        zslFreeNode(x);",
          "content_same": false
        },
        {
          "line": 5591,
          "old_api": "zslDeleteNode",
          "new_api": "dictDelete",
          "old_text": "zslDeleteNode(zsl, x, update)",
          "new_text": "dictDelete(dict,x->obj)",
          "old_line_content": "        zslDeleteNode(zsl, x, update);",
          "new_line_content": "        dictDelete(dict,x->obj);",
          "content_same": false
        },
        {
          "line": 5592,
          "old_api": "dictDelete",
          "new_api": "zslFreeNode",
          "old_text": "dictDelete(dict,x->obj)",
          "new_text": "zslFreeNode(x)",
          "old_line_content": "        dictDelete(dict,x->obj);",
          "new_line_content": "        zslFreeNode(x);",
          "content_same": false
        },
        {
          "line": 5620,
          "old_api": "zslDeleteNode",
          "new_api": "dictDelete",
          "old_text": "zslDeleteNode(zsl, x, update)",
          "new_text": "dictDelete(dict,x->obj)",
          "old_line_content": "        zslDeleteNode(zsl, x, update);",
          "new_line_content": "        dictDelete(dict,x->obj);",
          "content_same": false
        },
        {
          "line": 5621,
          "old_api": "dictDelete",
          "new_api": "zslFreeNode",
          "old_text": "dictDelete(dict,x->obj)",
          "new_text": "zslFreeNode(x)",
          "old_line_content": "        dictDelete(dict,x->obj);",
          "new_line_content": "        zslFreeNode(x);",
          "content_same": false
        },
        {
          "line": 5705,
          "old_api": "createZsetObject",
          "new_api": "dictAdd",
          "old_text": "createZsetObject()",
          "new_text": "dictAdd(c->db->dict,key,zsetobj)",
          "old_line_content": "        zsetobj = createZsetObject();",
          "new_line_content": "        dictAdd(c->db->dict,key,zsetobj);",
          "content_same": false
        },
        {
          "line": 5706,
          "old_api": "dictAdd",
          "new_api": "incrRefCount",
          "old_text": "dictAdd(c->db->dict,key,zsetobj)",
          "new_text": "incrRefCount(key)",
          "old_line_content": "        dictAdd(c->db->dict,key,zsetobj);",
          "new_line_content": "        incrRefCount(key);",
          "content_same": false
        },
        {
          "line": 5739,
          "old_api": "incrRefCount",
          "new_api": "zslInsert",
          "old_text": "incrRefCount(ele)",
          "new_text": "zslInsert(zs->zsl,*score,ele)",
          "old_line_content": "        incrRefCount(ele); /* added to hash */",
          "new_line_content": "        zslInsert(zs->zsl,*score,ele);",
          "content_same": false
        },
        {
          "line": 5740,
          "old_api": "zslInsert",
          "new_api": "incrRefCount",
          "old_text": "zslInsert(zs->zsl,*score,ele)",
          "new_text": "incrRefCount(ele)",
          "old_line_content": "        zslInsert(zs->zsl,*score,ele);",
          "new_line_content": "        incrRefCount(ele); /* added to skiplist */",
          "content_same": false
        },
        {
          "line": 5752,
          "old_api": "dictFind",
          "new_api": "redisAssert",
          "old_text": "dictFind(zs->dict,ele)",
          "new_text": "redisAssert(de != NULL)",
          "old_line_content": "        de = dictFind(zs->dict,ele);",
          "new_line_content": "        redisAssert(de != NULL);",
          "content_same": false
        },
        {
          "line": 5753,
          "old_api": "redisAssert",
          "new_api": "dictGetEntryVal",
          "old_text": "redisAssert(de != NULL)",
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "        redisAssert(de != NULL);",
          "new_line_content": "        oldscore = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 5759,
          "old_api": "zslDelete",
          "new_api": "redisAssert",
          "old_text": "zslDelete(zs->zsl,*oldscore,ele)",
          "new_text": "redisAssert(deleted != 0)",
          "old_line_content": "            deleted = zslDelete(zs->zsl,*oldscore,ele);",
          "new_line_content": "            redisAssert(deleted != 0);",
          "content_same": false
        },
        {
          "line": 5760,
          "old_api": "redisAssert",
          "new_api": "zslInsert",
          "old_text": "redisAssert(deleted != 0)",
          "new_text": "zslInsert(zs->zsl,*score,ele)",
          "old_line_content": "            redisAssert(deleted != 0);",
          "new_line_content": "            zslInsert(zs->zsl,*score,ele);",
          "content_same": false
        },
        {
          "line": 5761,
          "old_api": "zslInsert",
          "new_api": "incrRefCount",
          "old_text": "zslInsert(zs->zsl,*score,ele)",
          "new_text": "incrRefCount(ele)",
          "old_line_content": "            zslInsert(zs->zsl,*score,ele);",
          "new_line_content": "            incrRefCount(ele);",
          "content_same": false
        },
        {
          "line": 5779,
          "old_api": "getDoubleFromObjectOrReply",
          "new_api": "zaddGenericCommand",
          "old_text": "getDoubleFromObjectOrReply(c, c->argv[2], &scoreval, NULL)",
          "new_text": "zaddGenericCommand(c,c->argv[1],c->argv[3],scoreval,0)",
          "old_line_content": "    if (getDoubleFromObjectOrReply(c, c->argv[2], &scoreval, NULL) != REDIS_OK) return;",
          "new_line_content": "    zaddGenericCommand(c,c->argv[1],c->argv[3],scoreval,0);",
          "content_same": false
        },
        {
          "line": 5786,
          "old_api": "getDoubleFromObjectOrReply",
          "new_api": "zaddGenericCommand",
          "old_text": "getDoubleFromObjectOrReply(c, c->argv[2], &scoreval, NULL)",
          "new_text": "zaddGenericCommand(c,c->argv[1],c->argv[3],scoreval,1)",
          "old_line_content": "    if (getDoubleFromObjectOrReply(c, c->argv[2], &scoreval, NULL) != REDIS_OK) return;",
          "new_line_content": "    zaddGenericCommand(c,c->argv[1],c->argv[3],scoreval,1);",
          "content_same": false
        },
        {
          "line": 5797,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": "checkType",
          "old_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.czero)",
          "new_text": "checkType(c,zsetobj,REDIS_ZSET)",
          "old_line_content": "    if ((zsetobj = lookupKeyWriteOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "new_line_content": "        checkType(c,zsetobj,REDIS_ZSET)) return;",
          "content_same": false
        },
        {
          "line": 5807,
          "old_api": "dictGetEntryVal",
          "new_api": "zslDelete",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "zslDelete(zs->zsl,*oldscore,c->argv[2])",
          "old_line_content": "    oldscore = dictGetEntryVal(de);",
          "new_line_content": "    deleted = zslDelete(zs->zsl,*oldscore,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 5808,
          "old_api": "zslDelete",
          "new_api": "redisAssert",
          "old_text": "zslDelete(zs->zsl,*oldscore,c->argv[2])",
          "new_text": "redisAssert(deleted != 0)",
          "old_line_content": "    deleted = zslDelete(zs->zsl,*oldscore,c->argv[2]);",
          "new_line_content": "    redisAssert(deleted != 0);",
          "content_same": false
        },
        {
          "line": 5812,
          "old_api": "dictDelete",
          "new_api": "dictResize",
          "old_text": "dictDelete(zs->dict,c->argv[2])",
          "new_text": "dictResize(zs->dict)",
          "old_line_content": "    dictDelete(zs->dict,c->argv[2]);",
          "new_line_content": "    if (htNeedsResize(zs->dict)) dictResize(zs->dict);",
          "content_same": false
        },
        {
          "line": 5813,
          "old_api": "dictResize",
          "new_api": "deleteKey",
          "old_text": "dictResize(zs->dict)",
          "new_text": "deleteKey(c->db,c->argv[1])",
          "old_line_content": "    if (htNeedsResize(zs->dict)) dictResize(zs->dict);",
          "new_line_content": "    if (dictSize(zs->dict) == 0) deleteKey(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 5829,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": "checkType",
          "old_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.czero)",
          "new_text": "checkType(c,zsetobj,REDIS_ZSET)",
          "old_line_content": "    if ((zsetobj = lookupKeyWriteOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "new_line_content": "        checkType(c,zsetobj,REDIS_ZSET)) return;",
          "content_same": false
        },
        {
          "line": 5833,
          "old_api": "zslDeleteRangeByScore",
          "new_api": "dictResize",
          "old_text": "zslDeleteRangeByScore(zs->zsl,min,max,zs->dict)",
          "new_text": "dictResize(zs->dict)",
          "old_line_content": "    deleted = zslDeleteRangeByScore(zs->zsl,min,max,zs->dict);",
          "new_line_content": "    if (htNeedsResize(zs->dict)) dictResize(zs->dict);",
          "content_same": false
        },
        {
          "line": 5834,
          "old_api": "dictResize",
          "new_api": "deleteKey",
          "old_text": "dictResize(zs->dict)",
          "new_text": "deleteKey(c->db,c->argv[1])",
          "old_line_content": "    if (htNeedsResize(zs->dict)) dictResize(zs->dict);",
          "new_line_content": "    if (dictSize(zs->dict) == 0) deleteKey(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 5851,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": "checkType",
          "old_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.czero)",
          "new_text": "checkType(c,zsetobj,REDIS_ZSET)",
          "old_line_content": "    if ((zsetobj = lookupKeyWriteOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "new_line_content": "        checkType(c,zsetobj,REDIS_ZSET)) return;",
          "content_same": false
        },
        {
          "line": 5871,
          "old_api": "zslDeleteRangeByRank",
          "new_api": "dictResize",
          "old_text": "zslDeleteRangeByRank(zs->zsl,start+1,end+1,zs->dict)",
          "new_text": "dictResize(zs->dict)",
          "old_line_content": "    deleted = zslDeleteRangeByRank(zs->zsl,start+1,end+1,zs->dict);",
          "new_line_content": "    if (htNeedsResize(zs->dict)) dictResize(zs->dict);",
          "content_same": false
        },
        {
          "line": 5872,
          "old_api": "dictResize",
          "new_api": "deleteKey",
          "old_text": "dictResize(zs->dict)",
          "new_text": "deleteKey(c->db,c->argv[1])",
          "old_line_content": "    if (htNeedsResize(zs->dict)) dictResize(zs->dict);",
          "new_line_content": "    if (dictSize(zs->dict) == 0) deleteKey(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 5938,
          "old_api": "zfree",
          "new_api": "addReply",
          "old_text": "zfree(src)",
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "                zfree(src);",
          "new_line_content": "                addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 5969,
          "old_api": "zfree",
          "new_api": "addReply",
          "old_text": "zfree(src)",
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "                    zfree(src);",
          "new_line_content": "                    addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 5975,
          "old_api": "zfree",
          "new_api": "addReply",
          "old_text": "zfree(src)",
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "                zfree(src);",
          "new_line_content": "                addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 5994,
          "old_api": "dictGetIterator",
          "new_api": "dictNext",
          "old_text": "dictGetIterator(src[0].dict)",
          "new_text": "dictNext(di)",
          "old_line_content": "            di = dictGetIterator(src[0].dict);",
          "new_line_content": "            while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 5995,
          "old_api": "dictNext",
          "new_api": "zmalloc",
          "old_text": "dictNext(di)",
          "new_text": "zmalloc(sizeof(double))",
          "old_line_content": "            while((de = dictNext(di)) != NULL) {",
          "new_line_content": "                double *score = zmalloc(sizeof(double)), value;",
          "content_same": false
        },
        {
          "line": 5996,
          "old_api": "zmalloc",
          "new_api": "dictGetEntryVal",
          "old_text": "zmalloc(sizeof(double))",
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "                double *score = zmalloc(sizeof(double)), value;",
          "new_line_content": "                *score = src[0].weight * (*(double*)dictGetEntryVal(de));",
          "content_same": false
        },
        {
          "line": 6002,
          "old_api": "dictGetEntryVal",
          "new_api": "zunionInterAggregate",
          "old_text": "dictGetEntryVal(other)",
          "new_text": "zunionInterAggregate(score, value, aggregate)",
          "old_line_content": "                        value = src[j].weight * (*(double*)dictGetEntryVal(other));",
          "new_line_content": "                        zunionInterAggregate(score, value, aggregate);",
          "content_same": false
        },
        {
          "line": 6013,
          "old_api": "dictGetEntryKey",
          "new_api": "dictAdd",
          "old_text": "dictGetEntryKey(de)",
          "new_text": "dictAdd(dstzset->dict,o,score)",
          "old_line_content": "                    robj *o = dictGetEntryKey(de);",
          "new_line_content": "                    dictAdd(dstzset->dict,o,score);",
          "content_same": false
        },
        {
          "line": 6014,
          "old_api": "dictAdd",
          "new_api": "incrRefCount",
          "old_text": "dictAdd(dstzset->dict,o,score)",
          "new_text": "incrRefCount(o)",
          "old_line_content": "                    dictAdd(dstzset->dict,o,score);",
          "new_line_content": "                    incrRefCount(o); /* added to dictionary */",
          "content_same": false
        },
        {
          "line": 6015,
          "old_api": "incrRefCount",
          "new_api": "zslInsert",
          "old_text": "incrRefCount(o)",
          "new_text": "zslInsert(dstzset->zsl,*score,o)",
          "old_line_content": "                    incrRefCount(o); /* added to dictionary */",
          "new_line_content": "                    zslInsert(dstzset->zsl,*score,o);",
          "content_same": false
        },
        {
          "line": 6016,
          "old_api": "zslInsert",
          "new_api": "incrRefCount",
          "old_text": "zslInsert(dstzset->zsl,*score,o)",
          "new_text": "incrRefCount(o)",
          "old_line_content": "                    zslInsert(dstzset->zsl,*score,o);",
          "new_line_content": "                    incrRefCount(o); /* added to skiplist */",
          "content_same": false
        },
        {
          "line": 6026,
          "old_api": "dictGetIterator",
          "new_api": "dictNext",
          "old_text": "dictGetIterator(src[i].dict)",
          "new_text": "dictNext(di)",
          "old_line_content": "            di = dictGetIterator(src[i].dict);",
          "new_line_content": "            while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 6031,
          "old_api": "zmalloc",
          "new_api": "dictGetEntryVal",
          "old_text": "zmalloc(sizeof(double))",
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "                double *score = zmalloc(sizeof(double)), value;",
          "new_line_content": "                *score = src[i].weight * (*(double*)dictGetEntryVal(de));",
          "content_same": false
        },
        {
          "line": 6039,
          "old_api": "dictGetEntryVal",
          "new_api": "zunionInterAggregate",
          "old_text": "dictGetEntryVal(other)",
          "new_text": "zunionInterAggregate(score, value, aggregate)",
          "old_line_content": "                        value = src[j].weight * (*(double*)dictGetEntryVal(other));",
          "new_line_content": "                        zunionInterAggregate(score, value, aggregate);",
          "content_same": false
        },
        {
          "line": 6044,
          "old_api": "dictGetEntryKey",
          "new_api": "dictAdd",
          "old_text": "dictGetEntryKey(de)",
          "new_text": "dictAdd(dstzset->dict,o,score)",
          "old_line_content": "                robj *o = dictGetEntryKey(de);",
          "new_line_content": "                dictAdd(dstzset->dict,o,score);",
          "content_same": false
        },
        {
          "line": 6045,
          "old_api": "dictAdd",
          "new_api": "incrRefCount",
          "old_text": "dictAdd(dstzset->dict,o,score)",
          "new_text": "incrRefCount(o)",
          "old_line_content": "                dictAdd(dstzset->dict,o,score);",
          "new_line_content": "                incrRefCount(o); /* added to dictionary */",
          "content_same": false
        },
        {
          "line": 6046,
          "old_api": "incrRefCount",
          "new_api": "zslInsert",
          "old_text": "incrRefCount(o)",
          "new_text": "zslInsert(dstzset->zsl,*score,o)",
          "old_line_content": "                incrRefCount(o); /* added to dictionary */",
          "new_line_content": "                zslInsert(dstzset->zsl,*score,o);",
          "content_same": false
        },
        {
          "line": 6047,
          "old_api": "zslInsert",
          "new_api": "incrRefCount",
          "old_text": "zslInsert(dstzset->zsl,*score,o)",
          "new_text": "incrRefCount(o)",
          "old_line_content": "                zslInsert(dstzset->zsl,*score,o);",
          "new_line_content": "                incrRefCount(o); /* added to skiplist */",
          "content_same": false
        },
        {
          "line": 6059,
          "old_api": "dictAdd",
          "new_api": "incrRefCount",
          "old_text": "dictAdd(c->db->dict,dstkey,dstobj)",
          "new_text": "incrRefCount(dstkey)",
          "old_line_content": "        dictAdd(c->db->dict,dstkey,dstobj);",
          "new_line_content": "        incrRefCount(dstkey);",
          "content_same": false
        },
        {
          "line": 6060,
          "old_api": "incrRefCount",
          "new_api": "addReplyLong",
          "old_text": "incrRefCount(dstkey)",
          "new_text": "addReplyLong(c, dstzset->zsl->length)",
          "old_line_content": "        incrRefCount(dstkey);",
          "new_line_content": "        addReplyLong(c, dstzset->zsl->length);",
          "content_same": false
        },
        {
          "line": 6064,
          "old_api": "decrRefCount",
          "new_api": "addReply",
          "old_text": "decrRefCount(dstobj)",
          "new_text": "addReply(c, shared.czero)",
          "old_line_content": "        decrRefCount(dstobj);",
          "new_line_content": "        addReply(c, shared.czero);",
          "content_same": false
        },
        {
          "line": 6100,
          "old_api": "lookupKeyReadOrReply",
          "new_api": "checkType",
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.emptymultibulk)",
          "new_text": "checkType(c,o,REDIS_ZSET)",
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.emptymultibulk)) == NULL",
          "new_line_content": "         || checkType(c,o,REDIS_ZSET)) return;",
          "content_same": false
        },
        {
          "line": 6189,
          "old_api": "addReplySds",
          "new_api": "sdsnew",
          "old_text": "addReplySds(c,\n            sdsnew(\"-ERR wrong number of arguments for ZRANGEBYSCORE\\r\\n\"))",
          "new_text": "sdsnew(\"-ERR wrong number of arguments for ZRANGEBYSCORE\\r\\n\")",
          "old_line_content": "        addReplySds(c,",
          "new_line_content": "            sdsnew(\"-ERR wrong number of arguments for ZRANGEBYSCORE\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 6195,
          "old_api": "strcasecmp",
          "new_api": "addReply",
          "old_text": "strcasecmp(c->argv[4]->ptr,\"limit\")",
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "    if (c->argc == (7 + withscores) && strcasecmp(c->argv[4]->ptr,\"limit\")) {",
          "new_line_content": "        addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 6234,
          "old_api": "createObject",
          "new_api": "addReply",
          "old_text": "createObject(REDIS_STRING,NULL)",
          "new_text": "addReply(c,lenobj)",
          "old_line_content": "                lenobj = createObject(REDIS_STRING,NULL);",
          "new_line_content": "                addReply(c,lenobj);",
          "content_same": false
        },
        {
          "line": 6235,
          "old_api": "addReply",
          "new_api": "decrRefCount",
          "old_text": "addReply(c,lenobj)",
          "new_text": "decrRefCount(lenobj)",
          "old_line_content": "                addReply(c,lenobj);",
          "new_line_content": "                decrRefCount(lenobj);",
          "content_same": false
        },
        {
          "line": 6278,
          "old_api": "lookupKeyReadOrReply",
          "new_api": "checkType",
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "new_text": "checkType(c,o,REDIS_ZSET)",
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "new_line_content": "        checkType(c,o,REDIS_ZSET)) return;",
          "content_same": false
        },
        {
          "line": 6290,
          "old_api": "lookupKeyReadOrReply",
          "new_api": "checkType",
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)",
          "new_text": "checkType(c,o,REDIS_ZSET)",
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "new_line_content": "        checkType(c,o,REDIS_ZSET)) return;",
          "content_same": false
        },
        {
          "line": 6312,
          "old_api": "lookupKeyReadOrReply",
          "new_api": "checkType",
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)",
          "new_text": "checkType(c,o,REDIS_ZSET)",
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "new_line_content": "        checkType(c,o,REDIS_ZSET)) return;",
          "content_same": false
        },
        {
          "line": 6323,
          "old_api": "dictGetEntryVal",
          "new_api": "zslGetRank",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "zslGetRank(zsl, *score, c->argv[2])",
          "old_line_content": "    score = dictGetEntryVal(de);",
          "new_line_content": "    rank = zslGetRank(zsl, *score, c->argv[2]);",
          "content_same": false
        },
        {
          "line": 6381,
          "old_api": "getDecodedObject",
          "new_api": "sdslen",
          "old_text": "getDecodedObject(key)",
          "new_text": "sdslen(key->ptr)",
          "old_line_content": "        key = getDecodedObject(key);",
          "new_line_content": "        if (zipmapGet(o->ptr,key->ptr,sdslen(key->ptr),&v,&vlen)) {",
          "content_same": false
        },
        {
          "line": 6382,
          "old_api": "sdslen",
          "new_api": "createStringObject",
          "old_text": "sdslen(key->ptr)",
          "new_text": "createStringObject((char*)v,vlen)",
          "old_line_content": "        if (zipmapGet(o->ptr,key->ptr,sdslen(key->ptr),&v,&vlen)) {",
          "new_line_content": "            value = createStringObject((char*)v,vlen);",
          "content_same": false
        },
        {
          "line": 6389,
          "old_api": "dictGetEntryVal",
          "new_api": "incrRefCount",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "incrRefCount(value)",
          "old_line_content": "            value = dictGetEntryVal(de);",
          "new_line_content": "            incrRefCount(value);",
          "content_same": false
        },
        {
          "line": 6400,
          "old_api": "getDecodedObject",
          "new_api": "sdslen",
          "old_text": "getDecodedObject(key)",
          "new_text": "sdslen(key->ptr)",
          "old_line_content": "        key = getDecodedObject(key);",
          "new_line_content": "        if (zipmapExists(o->ptr,key->ptr,sdslen(key->ptr))) {",
          "content_same": false
        },
        {
          "line": 6401,
          "old_api": "sdslen",
          "new_api": "decrRefCount",
          "old_text": "sdslen(key->ptr)",
          "new_text": "decrRefCount(key)",
          "old_line_content": "        if (zipmapExists(o->ptr,key->ptr,sdslen(key->ptr))) {",
          "new_line_content": "            decrRefCount(key);",
          "content_same": false
        },
        {
          "line": 6420,
          "old_api": "getDecodedObject",
          "new_api": "zipmapSet",
          "old_text": "getDecodedObject(value)",
          "new_text": "zipmapSet(o->ptr,\n            key->ptr,sdslen(key->ptr),\n            value->ptr,sdslen(value->ptr), &update)",
          "old_line_content": "        value = getDecodedObject(value);",
          "new_line_content": "        o->ptr = zipmapSet(o->ptr,",
          "content_same": false
        },
        {
          "line": 6421,
          "old_api": "zipmapSet",
          "new_api": "sdslen",
          "old_text": "zipmapSet(o->ptr,\n            key->ptr,sdslen(key->ptr),\n            value->ptr,sdslen(value->ptr), &update)",
          "new_text": "sdslen(key->ptr)",
          "old_line_content": "        o->ptr = zipmapSet(o->ptr,",
          "new_line_content": "            key->ptr,sdslen(key->ptr),",
          "content_same": false
        },
        {
          "line": 6423,
          "old_api": "sdslen",
          "new_api": "decrRefCount",
          "old_text": "sdslen(value->ptr)",
          "new_text": "decrRefCount(key)",
          "old_line_content": "            value->ptr,sdslen(value->ptr), &update);",
          "new_line_content": "        decrRefCount(key);",
          "content_same": false
        },
        {
          "line": 6428,
          "old_api": "zipmapLen",
          "new_api": "convertToRealHash",
          "old_text": "zipmapLen(o->ptr)",
          "new_text": "convertToRealHash(o)",
          "old_line_content": "        if (zipmapLen(o->ptr) > server.hash_max_zipmap_entries)",
          "new_line_content": "            convertToRealHash(o);",
          "content_same": false
        },
        {
          "line": 6448,
          "old_api": "getDecodedObject",
          "new_api": "sdslen",
          "old_text": "getDecodedObject(key)",
          "new_text": "sdslen(key->ptr)",
          "old_line_content": "        key = getDecodedObject(key);",
          "new_line_content": "        o->ptr = zipmapDel(o->ptr,key->ptr,sdslen(key->ptr), &deleted);",
          "content_same": false
        },
        {
          "line": 6449,
          "old_api": "sdslen",
          "new_api": "decrRefCount",
          "old_text": "sdslen(key->ptr)",
          "new_text": "decrRefCount(key)",
          "old_line_content": "        o->ptr = zipmapDel(o->ptr,key->ptr,sdslen(key->ptr), &deleted);",
          "new_line_content": "        decrRefCount(key);",
          "content_same": false
        },
        {
          "line": 6535,
          "old_api": "createHashObject",
          "new_api": "dictAdd",
          "old_text": "createHashObject()",
          "new_text": "dictAdd(c->db->dict,key,o)",
          "old_line_content": "        o = createHashObject();",
          "new_line_content": "        dictAdd(c->db->dict,key,o);",
          "content_same": false
        },
        {
          "line": 6536,
          "old_api": "dictAdd",
          "new_api": "incrRefCount",
          "old_text": "dictAdd(c->db->dict,key,o)",
          "new_text": "incrRefCount(key)",
          "old_line_content": "        dictAdd(c->db->dict,key,o);",
          "new_line_content": "        incrRefCount(key);",
          "content_same": false
        },
        {
          "line": 6552,
          "old_api": "hashLookupWriteOrCreate",
          "new_api": "hashTryConversion",
          "old_text": "hashLookupWriteOrCreate(c,c->argv[1])",
          "new_text": "hashTryConversion(o,c->argv,2,3)",
          "old_line_content": "    if ((o = hashLookupWriteOrCreate(c,c->argv[1])) == NULL) return;",
          "new_line_content": "    hashTryConversion(o,c->argv,2,3);",
          "content_same": false
        },
        {
          "line": 6553,
          "old_api": "hashTryConversion",
          "new_api": "hashTryObjectEncoding",
          "old_text": "hashTryConversion(o,c->argv,2,3)",
          "new_text": "hashTryObjectEncoding(o,&c->argv[2], &c->argv[3])",
          "old_line_content": "    hashTryConversion(o,c->argv,2,3);",
          "new_line_content": "    hashTryObjectEncoding(o,&c->argv[2], &c->argv[3]);",
          "content_same": false
        },
        {
          "line": 6554,
          "old_api": "hashTryObjectEncoding",
          "new_api": "hashSet",
          "old_text": "hashTryObjectEncoding(o,&c->argv[2], &c->argv[3])",
          "new_text": "hashSet(o,c->argv[2],c->argv[3])",
          "old_line_content": "    hashTryObjectEncoding(o,&c->argv[2], &c->argv[3]);",
          "new_line_content": "    update = hashSet(o,c->argv[2],c->argv[3]);",
          "content_same": false
        },
        {
          "line": 6555,
          "old_api": "hashSet",
          "new_api": "addReply",
          "old_text": "hashSet(o,c->argv[2],c->argv[3])",
          "new_text": "addReply(c, update ? shared.czero : shared.cone)",
          "old_line_content": "    update = hashSet(o,c->argv[2],c->argv[3]);",
          "new_line_content": "    addReply(c, update ? shared.czero : shared.cone);",
          "content_same": false
        },
        {
          "line": 6562,
          "old_api": "hashLookupWriteOrCreate",
          "new_api": "hashTryConversion",
          "old_text": "hashLookupWriteOrCreate(c,c->argv[1])",
          "new_text": "hashTryConversion(o,c->argv,2,3)",
          "old_line_content": "    if ((o = hashLookupWriteOrCreate(c,c->argv[1])) == NULL) return;",
          "new_line_content": "    hashTryConversion(o,c->argv,2,3);",
          "content_same": false
        },
        {
          "line": 6565,
          "old_api": "hashExists",
          "new_api": "addReply",
          "old_text": "hashExists(o, c->argv[2])",
          "new_text": "addReply(c, shared.czero)",
          "old_line_content": "    if (hashExists(o, c->argv[2])) {",
          "new_line_content": "        addReply(c, shared.czero);",
          "content_same": false
        },
        {
          "line": 6568,
          "old_api": "hashTryObjectEncoding",
          "new_api": "hashSet",
          "old_text": "hashTryObjectEncoding(o,&c->argv[2], &c->argv[3])",
          "new_text": "hashSet(o,c->argv[2],c->argv[3])",
          "old_line_content": "        hashTryObjectEncoding(o,&c->argv[2], &c->argv[3]);",
          "new_line_content": "        hashSet(o,c->argv[2],c->argv[3]);",
          "content_same": false
        },
        {
          "line": 6569,
          "old_api": "hashSet",
          "new_api": "addReply",
          "old_text": "hashSet(o,c->argv[2],c->argv[3])",
          "new_text": "addReply(c, shared.cone)",
          "old_line_content": "        hashSet(o,c->argv[2],c->argv[3]);",
          "new_line_content": "        addReply(c, shared.cone);",
          "content_same": false
        },
        {
          "line": 6584,
          "old_api": "hashLookupWriteOrCreate",
          "new_api": "hashTryConversion",
          "old_text": "hashLookupWriteOrCreate(c,c->argv[1])",
          "new_text": "hashTryConversion(o,c->argv,2,c->argc-1)",
          "old_line_content": "    if ((o = hashLookupWriteOrCreate(c,c->argv[1])) == NULL) return;",
          "new_line_content": "    hashTryConversion(o,c->argv,2,c->argc-1);",
          "content_same": false
        },
        {
          "line": 6587,
          "old_api": "hashTryObjectEncoding",
          "new_api": "hashSet",
          "old_text": "hashTryObjectEncoding(o,&c->argv[i], &c->argv[i+1])",
          "new_text": "hashSet(o,c->argv[i],c->argv[i+1])",
          "old_line_content": "        hashTryObjectEncoding(o,&c->argv[i], &c->argv[i+1]);",
          "new_line_content": "        hashSet(o,c->argv[i],c->argv[i+1]);",
          "content_same": false
        },
        {
          "line": 6598,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": "hashLookupWriteOrCreate",
          "old_text": "getLongLongFromObjectOrReply(c,c->argv[3],&incr,NULL)",
          "new_text": "hashLookupWriteOrCreate(c,c->argv[1])",
          "old_line_content": "    if (getLongLongFromObjectOrReply(c,c->argv[3],&incr,NULL) != REDIS_OK) return;",
          "new_line_content": "    if ((o = hashLookupWriteOrCreate(c,c->argv[1])) == NULL) return;",
          "content_same": false
        },
        {
          "line": 6599,
          "old_api": "hashLookupWriteOrCreate",
          "new_api": "hashGet",
          "old_text": "hashLookupWriteOrCreate(c,c->argv[1])",
          "new_text": "hashGet(o,c->argv[2])",
          "old_line_content": "    if ((o = hashLookupWriteOrCreate(c,c->argv[1])) == NULL) return;",
          "new_line_content": "    if ((current = hashGet(o,c->argv[2])) != NULL) {",
          "content_same": false
        },
        {
          "line": 6600,
          "old_api": "hashGet",
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": "hashGet(o,c->argv[2])",
          "new_text": "getLongLongFromObjectOrReply(c,current,&value,\n            \"hash value is not an integer\")",
          "old_line_content": "    if ((current = hashGet(o,c->argv[2])) != NULL) {",
          "new_line_content": "        if (getLongLongFromObjectOrReply(c,current,&value,",
          "content_same": false
        },
        {
          "line": 6613,
          "old_api": "hashTryObjectEncoding",
          "new_api": "hashSet",
          "old_text": "hashTryObjectEncoding(o,&c->argv[2],NULL)",
          "new_text": "hashSet(o,c->argv[2],new)",
          "old_line_content": "    hashTryObjectEncoding(o,&c->argv[2],NULL);",
          "new_line_content": "    hashSet(o,c->argv[2],new);",
          "content_same": false
        },
        {
          "line": 6622,
          "old_api": "lookupKeyReadOrReply",
          "new_api": "checkType",
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)",
          "new_text": "checkType(c,o,REDIS_HASH)",
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "new_line_content": "        checkType(c,o,REDIS_HASH)) return;",
          "content_same": false
        },
        {
          "line": 6625,
          "old_api": "hashGet",
          "new_api": "addReplyBulk",
          "old_text": "hashGet(o,c->argv[2])",
          "new_text": "addReplyBulk(c,value)",
          "old_line_content": "    if ((value = hashGet(o,c->argv[2])) != NULL) {",
          "new_line_content": "        addReplyBulk(c,value);",
          "content_same": false
        },
        {
          "line": 6626,
          "old_api": "addReplyBulk",
          "new_api": "decrRefCount",
          "old_text": "addReplyBulk(c,value)",
          "new_text": "decrRefCount(value)",
          "old_line_content": "        addReplyBulk(c,value);",
          "new_line_content": "        decrRefCount(value);",
          "content_same": false
        },
        {
          "line": 6646,
          "old_api": "hashGet",
          "new_api": "addReplyBulk",
          "old_text": "hashGet(o,c->argv[i])",
          "new_text": "addReplyBulk(c,value)",
          "old_line_content": "        if (o != NULL && (value = hashGet(o,c->argv[i])) != NULL) {",
          "new_line_content": "            addReplyBulk(c,value);",
          "content_same": false
        },
        {
          "line": 6647,
          "old_api": "addReplyBulk",
          "new_api": "decrRefCount",
          "old_text": "addReplyBulk(c,value)",
          "new_text": "decrRefCount(value)",
          "old_line_content": "            addReplyBulk(c,value);",
          "new_line_content": "            decrRefCount(value);",
          "content_same": false
        },
        {
          "line": 6657,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": "checkType",
          "old_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.czero)",
          "new_text": "checkType(c,o,REDIS_HASH)",
          "old_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "new_line_content": "        checkType(c,o,REDIS_HASH)) return;",
          "content_same": false
        },
        {
          "line": 6660,
          "old_api": "hashDelete",
          "new_api": "deleteKey",
          "old_text": "hashDelete(o,c->argv[2])",
          "new_text": "deleteKey(c->db,c->argv[1])",
          "old_line_content": "    if (hashDelete(o,c->argv[2])) {",
          "new_line_content": "        if (hashLength(o) == 0) deleteKey(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 6661,
          "old_api": "deleteKey",
          "new_api": "addReply",
          "old_text": "deleteKey(c->db,c->argv[1])",
          "new_text": "addReply(c,shared.cone)",
          "old_line_content": "        if (hashLength(o) == 0) deleteKey(c->db,c->argv[1]);",
          "new_line_content": "        addReply(c,shared.cone);",
          "content_same": false
        },
        {
          "line": 6671,
          "old_api": "lookupKeyReadOrReply",
          "new_api": "checkType",
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "new_text": "checkType(c,o,REDIS_HASH)",
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "new_line_content": "        checkType(c,o,REDIS_HASH)) return;",
          "content_same": false
        },
        {
          "line": 6682,
          "old_api": "lookupKeyReadOrReply",
          "new_api": "checkType",
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.emptymultibulk)",
          "new_text": "checkType(c,o,REDIS_HASH)",
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.emptymultibulk)) == NULL",
          "new_line_content": "        || checkType(c,o,REDIS_HASH)) return;",
          "content_same": false
        },
        {
          "line": 6685,
          "old_api": "createObject",
          "new_api": "addReply",
          "old_text": "createObject(REDIS_STRING,NULL)",
          "new_text": "addReply(c,lenobj)",
          "old_line_content": "    lenobj = createObject(REDIS_STRING,NULL);",
          "new_line_content": "    addReply(c,lenobj);",
          "content_same": false
        },
        {
          "line": 6686,
          "old_api": "addReply",
          "new_api": "decrRefCount",
          "old_text": "addReply(c,lenobj)",
          "new_text": "decrRefCount(lenobj)",
          "old_line_content": "    addReply(c,lenobj);",
          "new_line_content": "    decrRefCount(lenobj);",
          "content_same": false
        },
        {
          "line": 6689,
          "old_api": "hashInitIterator",
          "new_api": "hashNext",
          "old_text": "hashInitIterator(o)",
          "new_text": "hashNext(hi)",
          "old_line_content": "    hi = hashInitIterator(o);",
          "new_line_content": "    while (hashNext(hi) != REDIS_ERR) {",
          "content_same": false
        },
        {
          "line": 6692,
          "old_api": "hashCurrent",
          "new_api": "addReplyBulk",
          "old_text": "hashCurrent(hi,REDIS_HASH_KEY)",
          "new_text": "addReplyBulk(c,obj)",
          "old_line_content": "            obj = hashCurrent(hi,REDIS_HASH_KEY);",
          "new_line_content": "            addReplyBulk(c,obj);",
          "content_same": false
        },
        {
          "line": 6693,
          "old_api": "addReplyBulk",
          "new_api": "decrRefCount",
          "old_text": "addReplyBulk(c,obj)",
          "new_text": "decrRefCount(obj)",
          "old_line_content": "            addReplyBulk(c,obj);",
          "new_line_content": "            decrRefCount(obj);",
          "content_same": false
        },
        {
          "line": 6698,
          "old_api": "hashCurrent",
          "new_api": "addReplyBulk",
          "old_text": "hashCurrent(hi,REDIS_HASH_VALUE)",
          "new_text": "addReplyBulk(c,obj)",
          "old_line_content": "            obj = hashCurrent(hi,REDIS_HASH_VALUE);",
          "new_line_content": "            addReplyBulk(c,obj);",
          "content_same": false
        },
        {
          "line": 6699,
          "old_api": "addReplyBulk",
          "new_api": "decrRefCount",
          "old_text": "addReplyBulk(c,obj)",
          "new_text": "decrRefCount(obj)",
          "old_line_content": "            addReplyBulk(c,obj);",
          "new_line_content": "            decrRefCount(obj);",
          "content_same": false
        },
        {
          "line": 6723,
          "old_api": "lookupKeyReadOrReply",
          "new_api": "checkType",
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "new_text": "checkType(c,o,REDIS_HASH)",
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "new_line_content": "        checkType(c,o,REDIS_HASH)) return;",
          "content_same": false
        },
        {
          "line": 6734,
          "old_api": "assert",
          "new_api": "zipmapRewind",
          "old_text": "assert(o->type == REDIS_HASH && o->encoding != REDIS_ENCODING_HT)",
          "new_text": "zipmapRewind(zm)",
          "old_line_content": "    assert(o->type == REDIS_HASH && o->encoding != REDIS_ENCODING_HT);",
          "new_line_content": "    p = zipmapRewind(zm);",
          "content_same": false
        },
        {
          "line": 6735,
          "old_api": "zipmapRewind",
          "new_api": "zipmapNext",
          "old_text": "zipmapRewind(zm)",
          "new_text": "zipmapNext(p,&key,&klen,&val,&vlen)",
          "old_line_content": "    p = zipmapRewind(zm);",
          "new_line_content": "    while((p = zipmapNext(p,&key,&klen,&val,&vlen)) != NULL) {",
          "content_same": false
        },
        {
          "line": 6740,
          "old_api": "createStringObject",
          "new_api": "tryObjectEncoding",
          "old_text": "createStringObject((char*)val,vlen)",
          "new_text": "tryObjectEncoding(keyobj)",
          "old_line_content": "        valobj = createStringObject((char*)val,vlen);",
          "new_line_content": "        keyobj = tryObjectEncoding(keyobj);",
          "content_same": false
        },
        {
          "line": 6742,
          "old_api": "tryObjectEncoding",
          "new_api": "dictAdd",
          "old_text": "tryObjectEncoding(valobj)",
          "new_text": "dictAdd(dict,keyobj,valobj)",
          "old_line_content": "        valobj = tryObjectEncoding(valobj);",
          "new_line_content": "        dictAdd(dict,keyobj,valobj);",
          "content_same": false
        },
        {
          "line": 6753,
          "old_api": "dictSize",
          "new_api": "dictEmpty",
          "old_text": "dictSize(c->db->dict)",
          "new_text": "dictEmpty(c->db->dict)",
          "old_line_content": "    server.dirty += dictSize(c->db->dict);",
          "new_line_content": "    dictEmpty(c->db->dict);",
          "content_same": false
        },
        {
          "line": 6755,
          "old_api": "dictEmpty",
          "new_api": "addReply",
          "old_text": "dictEmpty(c->db->expires)",
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "    dictEmpty(c->db->expires);",
          "new_line_content": "    addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 6760,
          "old_api": "emptyDb",
          "new_api": "addReply",
          "old_text": "emptyDb()",
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "    server.dirty += emptyDb();",
          "new_line_content": "    addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 6763,
          "old_api": "kill",
          "new_api": "rdbRemoveTempFile",
          "old_text": "kill(server.bgsavechildpid,SIGKILL)",
          "new_text": "rdbRemoveTempFile(server.bgsavechildpid)",
          "old_line_content": "        kill(server.bgsavechildpid,SIGKILL);",
          "new_line_content": "        rdbRemoveTempFile(server.bgsavechildpid);",
          "content_same": false
        },
        {
          "line": 6807,
          "old_api": "sdslen",
          "new_api": "strchr",
          "old_text": "sdslen(ssub)",
          "new_text": "strchr(spat,'*')",
          "old_line_content": "    if (sdslen(spat)+sdslen(ssub)-1 > REDIS_SORTKEY_MAX) return NULL;",
          "new_line_content": "    p = strchr(spat,'*');",
          "content_same": false
        },
        {
          "line": 6815,
          "old_api": "strstr",
          "new_api": "sdslen",
          "old_text": "strstr(p+1, \"->\")",
          "new_text": "sdslen(spat)",
          "old_line_content": "    if ((f = strstr(p+1, \"->\")) != NULL) {",
          "new_line_content": "        fieldlen = sdslen(spat)-(f-spat);",
          "content_same": false
        },
        {
          "line": 6826,
          "old_api": "sdslen",
          "new_api": "memcpy",
          "old_text": "sdslen(spat)",
          "new_text": "memcpy(keyname.buf,spat,prefixlen)",
          "old_line_content": "    postfixlen = sdslen(spat)-(prefixlen+1)-fieldlen;",
          "new_line_content": "    memcpy(keyname.buf,spat,prefixlen);",
          "content_same": false
        },
        {
          "line": 6835,
          "old_api": "initStaticStringObject",
          "new_api": "lookupKeyRead",
          "old_text": "initStaticStringObject(keyobj,((char*)&keyname)+(sizeof(long)*2))",
          "new_text": "lookupKeyRead(db,&keyobj)",
          "old_line_content": "    initStaticStringObject(keyobj,((char*)&keyname)+(sizeof(long)*2));",
          "new_line_content": "    o = lookupKeyRead(db,&keyobj);",
          "content_same": false
        },
        {
          "line": 6844,
          "old_api": "initStaticStringObject",
          "new_api": "hashGet",
          "old_text": "initStaticStringObject(fieldobj,((char*)&fieldname)+(sizeof(long)*2))",
          "new_text": "hashGet(o, &fieldobj)",
          "old_line_content": "        initStaticStringObject(fieldobj,((char*)&fieldname)+(sizeof(long)*2));",
          "new_line_content": "        o = hashGet(o, &fieldobj);",
          "content_same": false
        },
        {
          "line": 6923,
          "old_api": "listCreate",
          "new_api": "listSetFreeMethod",
          "old_text": "listCreate()",
          "new_text": "listSetFreeMethod(operations,zfree)",
          "old_line_content": "    operations = listCreate();",
          "new_line_content": "    listSetFreeMethod(operations,zfree);",
          "content_same": false
        },
        {
          "line": 6941,
          "old_api": "strcasecmp",
          "new_api": "atoi",
          "old_text": "strcasecmp(c->argv[j]->ptr,\"limit\")",
          "new_text": "atoi(c->argv[j+1]->ptr)",
          "old_line_content": "        } else if (!strcasecmp(c->argv[j]->ptr,\"limit\") && leftargs >= 2) {",
          "new_line_content": "            limit_start = atoi(c->argv[j+1]->ptr);",
          "content_same": false
        },
        {
          "line": 6954,
          "old_api": "strcasecmp",
          "new_api": "createSortOperation",
          "old_text": "strcasecmp(c->argv[j]->ptr,\"get\")",
          "new_text": "createSortOperation(\n                REDIS_SORT_GET,c->argv[j+1])",
          "old_line_content": "        } else if (!strcasecmp(c->argv[j]->ptr,\"get\") && leftargs >= 1) {",
          "new_line_content": "            listAddNodeTail(operations,createSortOperation(",
          "content_same": false
        },
        {
          "line": 6960,
          "old_api": "decrRefCount",
          "new_api": "listRelease",
          "old_text": "decrRefCount(sortval)",
          "new_text": "listRelease(operations)",
          "old_line_content": "            decrRefCount(sortval);",
          "new_line_content": "            listRelease(operations);",
          "content_same": false
        },
        {
          "line": 6961,
          "old_api": "listRelease",
          "new_api": "addReply",
          "old_text": "listRelease(operations)",
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "            listRelease(operations);",
          "new_line_content": "            addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 6970,
          "old_api": "listLength",
          "new_api": "dictSize",
          "old_text": "listLength((list*)sortval->ptr)",
          "new_text": "dictSize((dict*)sortval->ptr)",
          "old_line_content": "    case REDIS_LIST: vectorlen = listLength((list*)sortval->ptr); break;",
          "new_line_content": "    case REDIS_SET: vectorlen =  dictSize((dict*)sortval->ptr); break;",
          "content_same": false
        },
        {
          "line": 6972,
          "old_api": "dictSize",
          "new_api": "redisPanic",
          "old_text": "dictSize(((zset*)sortval->ptr)->dict)",
          "new_text": "redisPanic(\"Bad SORT type\")",
          "old_line_content": "    case REDIS_ZSET: vectorlen = dictSize(((zset*)sortval->ptr)->dict); break;",
          "new_line_content": "    default: vectorlen = 0; redisPanic(\"Bad SORT type\"); /* Avoid GCC warning */",
          "content_same": false
        },
        {
          "line": 6983,
          "old_api": "listRewind",
          "new_api": "listNext",
          "old_text": "listRewind(list,&li)",
          "new_text": "listNext(&li)",
          "old_line_content": "        listRewind(list,&li);",
          "new_line_content": "        while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 7003,
          "old_api": "dictGetIterator",
          "new_api": "dictNext",
          "old_text": "dictGetIterator(set)",
          "new_text": "dictNext(di)",
          "old_line_content": "        di = dictGetIterator(set);",
          "new_line_content": "        while((setele = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 7004,
          "old_api": "dictNext",
          "new_api": "dictGetEntryKey",
          "old_text": "dictNext(di)",
          "new_text": "dictGetEntryKey(setele)",
          "old_line_content": "        while((setele = dictNext(di)) != NULL) {",
          "new_line_content": "            vector[j].obj = dictGetEntryKey(setele);",
          "content_same": false
        },
        {
          "line": 7080,
          "old_api": "addReplyBulk",
          "new_api": "listRewind",
          "old_text": "addReplyBulk(c,vector[j].obj)",
          "new_text": "listRewind(operations,&li)",
          "old_line_content": "            if (!getop) addReplyBulk(c,vector[j].obj);",
          "new_line_content": "            listRewind(operations,&li);",
          "content_same": false
        },
        {
          "line": 7081,
          "old_api": "listRewind",
          "new_api": "listNext",
          "old_text": "listRewind(operations,&li)",
          "new_text": "listNext(&li)",
          "old_line_content": "            listRewind(operations,&li);",
          "new_line_content": "            while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 7091,
          "old_api": "addReplyBulk",
          "new_api": "decrRefCount",
          "old_text": "addReplyBulk(c,val)",
          "new_text": "decrRefCount(val)",
          "old_line_content": "                        addReplyBulk(c,val);",
          "new_line_content": "                        decrRefCount(val);",
          "content_same": false
        },
        {
          "line": 7109,
          "old_api": "listAddNodeTail",
          "new_api": "incrRefCount",
          "old_text": "listAddNodeTail(listPtr,vector[j].obj)",
          "new_text": "incrRefCount(vector[j].obj)",
          "old_line_content": "                listAddNodeTail(listPtr,vector[j].obj);",
          "new_line_content": "                incrRefCount(vector[j].obj);",
          "content_same": false
        },
        {
          "line": 7112,
          "old_api": "listRewind",
          "new_api": "listNext",
          "old_text": "listRewind(operations,&li)",
          "new_text": "listNext(&li)",
          "old_line_content": "            listRewind(operations,&li);",
          "new_line_content": "            while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 7133,
          "old_api": "dictReplace",
          "new_api": "incrRefCount",
          "old_text": "dictReplace(c->db->dict,storekey,listObject)",
          "new_text": "incrRefCount(storekey)",
          "old_line_content": "        if (dictReplace(c->db->dict,storekey,listObject)) {",
          "new_line_content": "            incrRefCount(storekey);",
          "content_same": false
        },
        {
          "line": 7144,
          "old_api": "decrRefCount",
          "new_api": "listRelease",
          "old_text": "decrRefCount(sortval)",
          "new_text": "listRelease(operations)",
          "old_line_content": "    decrRefCount(sortval);",
          "new_line_content": "    listRelease(operations);",
          "content_same": false
        },
        {
          "line": 7183,
          "old_api": "zmalloc_used_memory",
          "new_api": "sdsempty",
          "old_text": "zmalloc_used_memory()",
          "new_text": "sdsempty()",
          "old_line_content": "    bytesToHuman(hmem,zmalloc_used_memory());",
          "new_line_content": "    info = sdscatprintf(sdsempty(),",
          "content_same": false
        },
        {
          "line": 7211,
          "old_api": "aeGetApiName",
          "new_api": "getpid",
          "old_text": "aeGetApiName()",
          "new_text": "getpid()",
          "old_line_content": "        aeGetApiName(),",
          "new_line_content": "        (long) getpid(),",
          "content_same": false
        },
        {
          "line": 7229,
          "old_api": "dictSize",
          "new_api": "listLength",
          "old_text": "dictSize(server.pubsub_channels)",
          "new_text": "listLength(server.pubsub_patterns)",
          "old_line_content": "        dictSize(server.pubsub_channels),",
          "new_line_content": "        listLength(server.pubsub_patterns),",
          "content_same": false
        },
        {
          "line": 7248,
          "old_api": "lockThreadedIO",
          "new_api": "sdscatprintf",
          "old_text": "lockThreadedIO()",
          "new_text": "sdscatprintf(info,\n            \"vm_conf_max_memory:%llu\\r\\n\"\n            \"vm_conf_page_size:%llu\\r\\n\"\n            \"vm_conf_pages:%llu\\r\\n\"\n            \"vm_stats_used_pages:%llu\\r\\n\"\n            \"vm_stats_swapped_objects:%llu\\r\\n\"\n            \"vm_stats_swappin_count:%llu\\r\\n\"\n            \"vm_stats_swappout_count:%llu\\r\\n\"\n            \"vm_stats_io_newjobs_len:%lu\\r\\n\"\n            \"vm_stats_io_processing_len:%lu\\r\\n\"\n            \"vm_stats_io_processed_len:%lu\\r\\n\"\n            \"vm_stats_io_active_threads:%lu\\r\\n\"\n            \"vm_stats_blocked_clients:%lu\\r\\n\"\n            ,(unsigned long long) server.vm_max_memory,\n            (unsigned long long) server.vm_page_size,\n            (unsigned long long) server.vm_pages,\n            (unsigned long long) server.vm_stats_used_pages,\n            (unsigned long long) server.vm_stats_swapped_objects,\n            (unsigned long long) server.vm_stats_swapins,\n            (unsigned long long) server.vm_stats_swapouts,\n            (unsigned long) listLength(server.io_newjobs),\n            (unsigned long) listLength(server.io_processing),\n            (unsigned long) listLength(server.io_processed),\n            (unsigned long) server.io_active_threads,\n            (unsigned long) server.vm_blocked_clients\n        )",
          "old_line_content": "        lockThreadedIO();",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 7291,
          "old_api": "genRedisInfoString",
          "new_api": "sdsempty",
          "old_text": "genRedisInfoString()",
          "new_text": "sdsempty()",
          "old_line_content": "    sds info = genRedisInfoString();",
          "new_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"$%lu\\r\\n\",",
          "content_same": false
        },
        {
          "line": 7292,
          "old_api": "sdsempty",
          "new_api": "sdslen",
          "old_text": "sdsempty()",
          "new_text": "sdslen(info)",
          "old_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"$%lu\\r\\n\",",
          "new_line_content": "        (unsigned long)sdslen(info)));",
          "content_same": false
        },
        {
          "line": 7293,
          "old_api": "sdslen",
          "new_api": "addReplySds",
          "old_text": "sdslen(info)",
          "new_text": "addReplySds(c,info)",
          "old_line_content": "        (unsigned long)sdslen(info)));",
          "new_line_content": "    addReplySds(c,info);",
          "content_same": false
        },
        {
          "line": 7294,
          "old_api": "addReplySds",
          "new_api": "addReply",
          "old_text": "addReplySds(c,info)",
          "new_text": "addReply(c,shared.crlf)",
          "old_line_content": "    addReplySds(c,info);",
          "new_line_content": "    addReply(c,shared.crlf);",
          "content_same": false
        },
        {
          "line": 7304,
          "old_api": "listAddNodeTail",
          "new_api": "addReply",
          "old_text": "listAddNodeTail(server.monitors,c)",
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "    listAddNodeTail(server.monitors,c);",
          "new_line_content": "    addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 7332,
          "old_api": "dictSize",
          "new_api": "dictFind",
          "old_text": "dictSize(db->expires)",
          "new_text": "dictFind(db->expires,key)",
          "old_line_content": "    if (dictSize(db->expires) == 0 ||",
          "new_line_content": "       (de = dictFind(db->expires,key)) == NULL) return -1;",
          "content_same": false
        },
        {
          "line": 7343,
          "old_api": "dictSize",
          "new_api": "dictFind",
          "old_text": "dictSize(db->expires)",
          "new_text": "dictFind(db->expires,key)",
          "old_line_content": "    if (dictSize(db->expires) == 0 ||",
          "new_line_content": "       (de = dictFind(db->expires,key)) == NULL) return 0;",
          "content_same": false
        },
        {
          "line": 7347,
          "old_api": "dictGetEntryVal",
          "new_api": "time",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "time(NULL)",
          "old_line_content": "    when = (time_t) dictGetEntryVal(de);",
          "new_line_content": "    if (time(NULL) <= when) return 0;",
          "content_same": false
        },
        {
          "line": 7360,
          "old_api": "dictSize",
          "new_api": "dictFind",
          "old_text": "dictSize(db->expires)",
          "new_text": "dictFind(db->expires,key)",
          "old_line_content": "    if (dictSize(db->expires) == 0 ||",
          "new_line_content": "       (de = dictFind(db->expires,key)) == NULL) return 0;",
          "content_same": false
        },
        {
          "line": 7384,
          "old_api": "deleteKey",
          "new_api": "addReply",
          "old_text": "deleteKey(c->db,key)",
          "new_text": "addReply(c, shared.cone)",
          "old_line_content": "        if (deleteKey(c->db,key)) server.dirty++;",
          "new_line_content": "        addReply(c, shared.cone);",
          "content_same": false
        },
        {
          "line": 7388,
          "old_api": "time",
          "new_api": "setExpire",
          "old_text": "time(NULL)",
          "new_text": "setExpire(c->db,key,when)",
          "old_line_content": "        time_t when = time(NULL)+seconds;",
          "new_line_content": "        if (setExpire(c->db,key,when)) {",
          "content_same": false
        },
        {
          "line": 7389,
          "old_api": "setExpire",
          "new_api": "addReply",
          "old_text": "setExpire(c->db,key,when)",
          "new_text": "addReply(c,shared.cone)",
          "old_line_content": "        if (setExpire(c->db,key,when)) {",
          "new_line_content": "            addReply(c,shared.cone);",
          "content_same": false
        },
        {
          "line": 7436,
          "old_api": "decrRefCount",
          "new_api": "zfree",
          "old_text": "decrRefCount(mc->argv[i])",
          "new_text": "zfree(mc->argv)",
          "old_line_content": "            decrRefCount(mc->argv[i]);",
          "new_line_content": "        zfree(mc->argv);",
          "content_same": false
        },
        {
          "line": 7452,
          "old_api": "zmalloc",
          "new_api": "memcpy",
          "old_text": "zmalloc(sizeof(robj*)*c->argc)",
          "new_text": "memcpy(mc->argv,c->argv,sizeof(robj*)*c->argc)",
          "old_line_content": "    mc->argv = zmalloc(sizeof(robj*)*c->argc);",
          "new_line_content": "    memcpy(mc->argv,c->argv,sizeof(robj*)*c->argc);",
          "content_same": false
        },
        {
          "line": 7470,
          "old_api": "freeClientMultiState",
          "new_api": "initClientMultiState",
          "old_text": "freeClientMultiState(c)",
          "new_text": "initClientMultiState(c)",
          "old_line_content": "    freeClientMultiState(c);",
          "new_line_content": "    initClientMultiState(c);",
          "content_same": false
        },
        {
          "line": 7484,
          "old_api": "feedAppendOnlyFile",
          "new_api": "listLength",
          "old_text": "feedAppendOnlyFile(cmd,c->db->id,&multistring,1)",
          "new_text": "listLength(server.slaves)",
          "old_line_content": "        feedAppendOnlyFile(cmd,c->db->id,&multistring,1);",
          "new_line_content": "    if (listLength(server.slaves))",
          "content_same": false
        },
        {
          "line": 7485,
          "old_api": "listLength",
          "new_api": "replicationFeedSlaves",
          "old_text": "listLength(server.slaves)",
          "new_text": "replicationFeedSlaves(server.slaves,c->db->id,&multistring,1)",
          "old_line_content": "    if (listLength(server.slaves))",
          "new_line_content": "        replicationFeedSlaves(server.slaves,c->db->id,&multistring,1);",
          "content_same": false
        },
        {
          "line": 7486,
          "old_api": "replicationFeedSlaves",
          "new_api": "decrRefCount",
          "old_text": "replicationFeedSlaves(server.slaves,c->db->id,&multistring,1)",
          "new_text": "decrRefCount(multistring)",
          "old_line_content": "        replicationFeedSlaves(server.slaves,c->db->id,&multistring,1);",
          "new_line_content": "    decrRefCount(multistring);",
          "content_same": false
        },
        {
          "line": 7517,
          "old_api": "freeClientMultiState",
          "new_api": "initClientMultiState",
          "old_text": "freeClientMultiState(c)",
          "new_text": "initClientMultiState(c)",
          "old_line_content": "    freeClientMultiState(c);",
          "new_line_content": "    initClientMultiState(c);",
          "content_same": false
        },
        {
          "line": 7578,
          "old_api": "listCreate",
          "new_api": "dictAdd",
          "old_text": "listCreate()",
          "new_text": "dictAdd(c->db->blockingkeys,keys[j],l)",
          "old_line_content": "            l = listCreate();",
          "new_line_content": "            retval = dictAdd(c->db->blockingkeys,keys[j],l);",
          "content_same": false
        },
        {
          "line": 7579,
          "old_api": "dictAdd",
          "new_api": "incrRefCount",
          "old_text": "dictAdd(c->db->blockingkeys,keys[j],l)",
          "new_text": "incrRefCount(keys[j])",
          "old_line_content": "            retval = dictAdd(c->db->blockingkeys,keys[j],l);",
          "new_line_content": "            incrRefCount(keys[j]);",
          "content_same": false
        },
        {
          "line": 7580,
          "old_api": "incrRefCount",
          "new_api": "assert",
          "old_text": "incrRefCount(keys[j])",
          "new_text": "assert(retval == DICT_OK)",
          "old_line_content": "            incrRefCount(keys[j]);",
          "new_line_content": "            assert(retval == DICT_OK);",
          "content_same": false
        },
        {
          "line": 7602,
          "old_api": "dictFind",
          "new_api": "assert",
          "old_text": "dictFind(c->db->blockingkeys,c->blockingkeys[j])",
          "new_text": "assert(de != NULL)",
          "old_line_content": "        de = dictFind(c->db->blockingkeys,c->blockingkeys[j]);",
          "new_line_content": "        assert(de != NULL);",
          "content_same": false
        },
        {
          "line": 7603,
          "old_api": "assert",
          "new_api": "dictGetEntryVal",
          "old_text": "assert(de != NULL)",
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "        assert(de != NULL);",
          "new_line_content": "        l = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 7604,
          "old_api": "dictGetEntryVal",
          "new_api": "listSearchKey",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "listSearchKey(l,c)",
          "old_line_content": "        l = dictGetEntryVal(de);",
          "new_line_content": "        listDelNode(l,listSearchKey(l,c));",
          "content_same": false
        },
        {
          "line": 7607,
          "old_api": "listLength",
          "new_api": "dictDelete",
          "old_text": "listLength(l)",
          "new_text": "dictDelete(c->db->blockingkeys,c->blockingkeys[j])",
          "old_line_content": "        if (listLength(l) == 0)",
          "new_line_content": "            dictDelete(c->db->blockingkeys,c->blockingkeys[j]);",
          "content_same": false
        },
        {
          "line": 7608,
          "old_api": "dictDelete",
          "new_api": "decrRefCount",
          "old_text": "dictDelete(c->db->blockingkeys,c->blockingkeys[j])",
          "new_text": "decrRefCount(c->blockingkeys[j])",
          "old_line_content": "            dictDelete(c->db->blockingkeys,c->blockingkeys[j]);",
          "new_line_content": "        decrRefCount(c->blockingkeys[j]);",
          "content_same": false
        },
        {
          "line": 7642,
          "old_api": "dictGetEntryVal",
          "new_api": "listFirst",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "listFirst(l)",
          "old_line_content": "    l = dictGetEntryVal(de);",
          "new_line_content": "    ln = listFirst(l);",
          "content_same": false
        },
        {
          "line": 7643,
          "old_api": "listFirst",
          "new_api": "assert",
          "old_text": "listFirst(l)",
          "new_text": "assert(ln != NULL)",
          "old_line_content": "    ln = listFirst(l);",
          "new_line_content": "    assert(ln != NULL);",
          "content_same": false
        },
        {
          "line": 7647,
          "old_api": "sdsnew",
          "new_api": "addReplyBulk",
          "old_text": "sdsnew(\"*2\\r\\n\")",
          "new_text": "addReplyBulk(receiver,key)",
          "old_line_content": "    addReplySds(receiver,sdsnew(\"*2\\r\\n\"));",
          "new_line_content": "    addReplyBulk(receiver,key);",
          "content_same": false
        },
        {
          "line": 7649,
          "old_api": "addReplyBulk",
          "new_api": "unblockClientWaitingData",
          "old_text": "addReplyBulk(receiver,ele)",
          "new_text": "unblockClientWaitingData(receiver)",
          "old_line_content": "    addReplyBulk(receiver,ele);",
          "new_line_content": "    unblockClientWaitingData(receiver);",
          "content_same": false
        },
        {
          "line": 7687,
          "old_api": "sdsnew",
          "new_api": "addReplyBulk",
          "old_text": "sdsnew(\"*2\\r\\n\")",
          "new_text": "addReplyBulk(c,argv[1])",
          "old_line_content": "                    addReplySds(c,sdsnew(\"*2\\r\\n\"));",
          "new_line_content": "                    addReplyBulk(c,argv[1]);",
          "content_same": false
        },
        {
          "line": 7688,
          "old_api": "addReplyBulk",
          "new_api": "popGenericCommand",
          "old_text": "addReplyBulk(c,argv[1])",
          "new_text": "popGenericCommand(c,where)",
          "old_line_content": "                    addReplyBulk(c,argv[1]);",
          "new_line_content": "                    popGenericCommand(c,where);",
          "content_same": false
        },
        {
          "line": 7700,
          "old_api": "strtol",
          "new_api": "time",
          "old_text": "strtol(c->argv[c->argc-1]->ptr,NULL,10)",
          "new_text": "time(NULL)",
          "old_line_content": "    timeout = strtol(c->argv[c->argc-1]->ptr,NULL,10);",
          "new_line_content": "    if (timeout > 0) timeout += time(NULL);",
          "content_same": false
        },
        {
          "line": 7701,
          "old_api": "time",
          "new_api": "blockForKeys",
          "old_text": "time(NULL)",
          "new_text": "blockForKeys(c,c->argv+1,c->argc-2,timeout)",
          "old_line_content": "    if (timeout > 0) timeout += time(NULL);",
          "new_line_content": "    blockForKeys(c,c->argv+1,c->argc-2,timeout);",
          "content_same": false
        },
        {
          "line": 7721,
          "old_api": "aeWait",
          "new_api": "write",
          "old_text": "aeWait(fd,AE_WRITABLE,1000)",
          "new_text": "write(fd,ptr,size)",
          "old_line_content": "        if (aeWait(fd,AE_WRITABLE,1000) & AE_WRITABLE) {",
          "new_line_content": "            nwritten = write(fd,ptr,size);",
          "content_same": false
        },
        {
          "line": 7741,
          "old_api": "aeWait",
          "new_api": "read",
          "old_text": "aeWait(fd,AE_READABLE,1000)",
          "new_text": "read(fd,ptr,size)",
          "old_line_content": "        if (aeWait(fd,AE_READABLE,1000) & AE_READABLE) {",
          "new_line_content": "            nread = read(fd,ptr,size);",
          "content_same": false
        },
        {
          "line": 7785,
          "old_api": "listLength",
          "new_api": "sdsnew",
          "old_text": "listLength(c->reply)",
          "new_text": "sdsnew(\"-ERR SYNC is invalid with pending input\\r\\n\")",
          "old_line_content": "    if (listLength(c->reply) != 0) {",
          "new_line_content": "        addReplySds(c,sdsnew(\"-ERR SYNC is invalid with pending input\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 7801,
          "old_api": "listRewind",
          "new_api": "listNext",
          "old_text": "listRewind(server.slaves,&li)",
          "new_text": "listNext(&li)",
          "old_line_content": "        listRewind(server.slaves,&li);",
          "new_line_content": "        while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 7809,
          "old_api": "listRelease",
          "new_api": "listDup",
          "old_text": "listRelease(c->reply)",
          "new_text": "listDup(slave->reply)",
          "old_line_content": "            listRelease(c->reply);",
          "new_line_content": "            c->reply = listDup(slave->reply);",
          "content_same": false
        },
        {
          "line": 7821,
          "old_api": "redisLog",
          "new_api": "rdbSaveBackground",
          "old_text": "redisLog(REDIS_NOTICE,\"Starting BGSAVE for SYNC\")",
          "new_text": "rdbSaveBackground(server.dbfilename)",
          "old_line_content": "        redisLog(REDIS_NOTICE,\"Starting BGSAVE for SYNC\");",
          "new_line_content": "        if (rdbSaveBackground(server.dbfilename) != REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 7822,
          "old_api": "rdbSaveBackground",
          "new_api": "redisLog",
          "old_text": "rdbSaveBackground(server.dbfilename)",
          "new_text": "redisLog(REDIS_NOTICE,\"Replication failed, can't BGSAVE\")",
          "old_line_content": "        if (rdbSaveBackground(server.dbfilename) != REDIS_OK) {",
          "new_line_content": "            redisLog(REDIS_NOTICE,\"Replication failed, can't BGSAVE\");",
          "content_same": false
        },
        {
          "line": 7823,
          "old_api": "redisLog",
          "new_api": "sdsnew",
          "old_text": "redisLog(REDIS_NOTICE,\"Replication failed, can't BGSAVE\")",
          "new_text": "sdsnew(\"-ERR Unalbe to perform background save\\r\\n\")",
          "old_line_content": "            redisLog(REDIS_NOTICE,\"Replication failed, can't BGSAVE\");",
          "new_line_content": "            addReplySds(c,sdsnew(\"-ERR Unalbe to perform background save\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 7854,
          "old_api": "sdsfree",
          "new_api": "freeClient",
          "old_text": "sdsfree(bulkcount)",
          "new_text": "freeClient(slave)",
          "old_line_content": "            sdsfree(bulkcount);",
          "new_line_content": "            freeClient(slave);",
          "content_same": false
        },
        {
          "line": 7860,
          "old_api": "lseek",
          "new_api": "read",
          "old_text": "lseek(slave->repldbfd,slave->repldboff,SEEK_SET)",
          "new_text": "read(slave->repldbfd,buf,REDIS_IOBUF_LEN)",
          "old_line_content": "    lseek(slave->repldbfd,slave->repldboff,SEEK_SET);",
          "new_line_content": "    buflen = read(slave->repldbfd,buf,REDIS_IOBUF_LEN);",
          "content_same": false
        },
        {
          "line": 7863,
          "old_api": "redisLog",
          "new_api": "strerror",
          "old_text": "redisLog(REDIS_WARNING,\"Read error sending DB to slave: %s\",\n            (buflen == 0) ? \"premature EOF\" : strerror(errno))",
          "new_text": "strerror(errno)",
          "old_line_content": "        redisLog(REDIS_WARNING,\"Read error sending DB to slave: %s\",",
          "new_line_content": "            (buflen == 0) ? \"premature EOF\" : strerror(errno));",
          "content_same": false
        },
        {
          "line": 7864,
          "old_api": "strerror",
          "new_api": "freeClient",
          "old_text": "strerror(errno)",
          "new_text": "freeClient(slave)",
          "old_line_content": "            (buflen == 0) ? \"premature EOF\" : strerror(errno));",
          "new_line_content": "        freeClient(slave);",
          "content_same": false
        },
        {
          "line": 7868,
          "old_api": "write",
          "new_api": "redisLog",
          "old_text": "write(fd,buf,buflen)",
          "new_text": "redisLog(REDIS_VERBOSE,\"Write error sending DB to slave: %s\",\n            strerror(errno))",
          "old_line_content": "    if ((nwritten = write(fd,buf,buflen)) == -1) {",
          "new_line_content": "        redisLog(REDIS_VERBOSE,\"Write error sending DB to slave: %s\",",
          "content_same": false
        },
        {
          "line": 7869,
          "old_api": "redisLog",
          "new_api": "strerror",
          "old_text": "redisLog(REDIS_VERBOSE,\"Write error sending DB to slave: %s\",\n            strerror(errno))",
          "new_text": "strerror(errno)",
          "old_line_content": "        redisLog(REDIS_VERBOSE,\"Write error sending DB to slave: %s\",",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 7870,
          "old_api": "strerror",
          "new_api": "freeClient",
          "old_text": "strerror(errno)",
          "new_text": "freeClient(slave)",
          "old_line_content": "            strerror(errno));",
          "new_line_content": "        freeClient(slave);",
          "content_same": false
        },
        {
          "line": 7885,
          "old_api": "sdsempty",
          "new_api": "redisLog",
          "old_text": "sdsempty()",
          "new_text": "redisLog(REDIS_NOTICE,\"Synchronization with slave succeeded\")",
          "old_line_content": "        addReplySds(slave,sdsempty());",
          "new_line_content": "        redisLog(REDIS_NOTICE,\"Synchronization with slave succeeded\");",
          "content_same": false
        },
        {
          "line": 7901,
          "old_api": "listRewind",
          "new_api": "listNext",
          "old_text": "listRewind(server.slaves,&li)",
          "new_text": "listNext(&li)",
          "old_line_content": "    listRewind(server.slaves,&li);",
          "new_line_content": "    while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 7912,
          "old_api": "freeClient",
          "new_api": "redisLog",
          "old_text": "freeClient(slave)",
          "new_text": "redisLog(REDIS_WARNING,\"SYNC failed. BGSAVE child returned an error\")",
          "old_line_content": "                freeClient(slave);",
          "new_line_content": "                redisLog(REDIS_WARNING,\"SYNC failed. BGSAVE child returned an error\");",
          "content_same": false
        },
        {
          "line": 7916,
          "old_api": "open",
          "new_api": "redis_fstat",
          "old_text": "open(server.dbfilename,O_RDONLY)",
          "new_text": "redis_fstat(slave->repldbfd,&buf)",
          "old_line_content": "            if ((slave->repldbfd = open(server.dbfilename,O_RDONLY)) == -1 ||",
          "new_line_content": "                redis_fstat(slave->repldbfd,&buf) == -1) {",
          "content_same": false
        },
        {
          "line": 7917,
          "old_api": "redis_fstat",
          "new_api": "freeClient",
          "old_text": "redis_fstat(slave->repldbfd,&buf)",
          "new_text": "freeClient(slave)",
          "old_line_content": "                redis_fstat(slave->repldbfd,&buf) == -1) {",
          "new_line_content": "                freeClient(slave);",
          "content_same": false
        },
        {
          "line": 7918,
          "old_api": "freeClient",
          "new_api": "strerror",
          "old_text": "freeClient(slave)",
          "new_text": "strerror(errno)",
          "old_line_content": "                freeClient(slave);",
          "new_line_content": "                redisLog(REDIS_WARNING,\"SYNC failed. Can't open/stat DB after BGSAVE: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 7925,
          "old_api": "aeDeleteFileEvent",
          "new_api": "aeCreateFileEvent",
          "old_text": "aeDeleteFileEvent(server.el,slave->fd,AE_WRITABLE)",
          "new_text": "aeCreateFileEvent(server.el, slave->fd, AE_WRITABLE, sendBulkToSlave, slave)",
          "old_line_content": "            aeDeleteFileEvent(server.el,slave->fd,AE_WRITABLE);",
          "new_line_content": "            if (aeCreateFileEvent(server.el, slave->fd, AE_WRITABLE, sendBulkToSlave, slave) == AE_ERR) {",
          "content_same": false
        },
        {
          "line": 7926,
          "old_api": "aeCreateFileEvent",
          "new_api": "freeClient",
          "old_text": "aeCreateFileEvent(server.el, slave->fd, AE_WRITABLE, sendBulkToSlave, slave)",
          "new_text": "freeClient(slave)",
          "old_line_content": "            if (aeCreateFileEvent(server.el, slave->fd, AE_WRITABLE, sendBulkToSlave, slave) == AE_ERR) {",
          "new_line_content": "                freeClient(slave);",
          "content_same": false
        },
        {
          "line": 7936,
          "old_api": "listRewind",
          "new_api": "redisLog",
          "old_text": "listRewind(server.slaves,&li)",
          "new_text": "redisLog(REDIS_WARNING,\"SYNC failed. BGSAVE failed\")",
          "old_line_content": "            listRewind(server.slaves,&li);",
          "new_line_content": "            redisLog(REDIS_WARNING,\"SYNC failed. BGSAVE failed\");",
          "content_same": false
        },
        {
          "line": 7937,
          "old_api": "redisLog",
          "new_api": "listNext",
          "old_text": "redisLog(REDIS_WARNING,\"SYNC failed. BGSAVE failed\")",
          "new_text": "listNext(&li)",
          "old_line_content": "            redisLog(REDIS_WARNING,\"SYNC failed. BGSAVE failed\");",
          "new_line_content": "            while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 7955,
          "old_api": "redisLog",
          "new_api": "strerror",
          "old_text": "redisLog(REDIS_WARNING,\"Unable to connect to MASTER: %s\",\n            strerror(errno))",
          "new_text": "strerror(errno)",
          "old_line_content": "        redisLog(REDIS_WARNING,\"Unable to connect to MASTER: %s\",",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 7962,
          "old_api": "snprintf",
          "new_api": "strlen",
          "old_text": "snprintf(authcmd, 1024, \"AUTH %s\\r\\n\", server.masterauth)",
          "new_text": "strlen(server.masterauth)",
          "old_line_content": "    \tsnprintf(authcmd, 1024, \"AUTH %s\\r\\n\", server.masterauth);",
          "new_line_content": "    \tif (syncWrite(fd, authcmd, strlen(server.masterauth)+7, 5) == -1) {",
          "content_same": false
        },
        {
          "line": 7963,
          "old_api": "strlen",
          "new_api": "close",
          "old_text": "strlen(server.masterauth)",
          "new_text": "close(fd)",
          "old_line_content": "    \tif (syncWrite(fd, authcmd, strlen(server.masterauth)+7, 5) == -1) {",
          "new_line_content": "            close(fd);",
          "content_same": false
        },
        {
          "line": 7964,
          "old_api": "close",
          "new_api": "redisLog",
          "old_text": "close(fd)",
          "new_text": "redisLog(REDIS_WARNING,\"Unable to AUTH to MASTER: %s\",\n                strerror(errno))",
          "old_line_content": "            close(fd);",
          "new_line_content": "            redisLog(REDIS_WARNING,\"Unable to AUTH to MASTER: %s\",",
          "content_same": false
        },
        {
          "line": 7965,
          "old_api": "redisLog",
          "new_api": "strerror",
          "old_text": "redisLog(REDIS_WARNING,\"Unable to AUTH to MASTER: %s\",\n                strerror(errno))",
          "new_text": "strerror(errno)",
          "old_line_content": "            redisLog(REDIS_WARNING,\"Unable to AUTH to MASTER: %s\",",
          "new_line_content": "                strerror(errno));",
          "content_same": false
        },
        {
          "line": 7970,
          "old_api": "syncReadLine",
          "new_api": "close",
          "old_text": "syncReadLine(fd,buf,1024,3600)",
          "new_text": "close(fd)",
          "old_line_content": "        if (syncReadLine(fd,buf,1024,3600) == -1) {",
          "new_line_content": "            close(fd);",
          "content_same": false
        },
        {
          "line": 7971,
          "old_api": "close",
          "new_api": "redisLog",
          "old_text": "close(fd)",
          "new_text": "redisLog(REDIS_WARNING,\"I/O error reading auth result from MASTER: %s\",\n                strerror(errno))",
          "old_line_content": "            close(fd);",
          "new_line_content": "            redisLog(REDIS_WARNING,\"I/O error reading auth result from MASTER: %s\",",
          "content_same": false
        },
        {
          "line": 7972,
          "old_api": "redisLog",
          "new_api": "strerror",
          "old_text": "redisLog(REDIS_WARNING,\"I/O error reading auth result from MASTER: %s\",\n                strerror(errno))",
          "new_text": "strerror(errno)",
          "old_line_content": "            redisLog(REDIS_WARNING,\"I/O error reading auth result from MASTER: %s\",",
          "new_line_content": "                strerror(errno));",
          "content_same": false
        },
        {
          "line": 7977,
          "old_api": "close",
          "new_api": "redisLog",
          "old_text": "close(fd)",
          "new_text": "redisLog(REDIS_WARNING,\"Cannot AUTH to MASTER, is the masterauth password correct?\")",
          "old_line_content": "            close(fd);",
          "new_line_content": "            redisLog(REDIS_WARNING,\"Cannot AUTH to MASTER, is the masterauth password correct?\");",
          "content_same": false
        },
        {
          "line": 7984,
          "old_api": "syncWrite",
          "new_api": "close",
          "old_text": "syncWrite(fd,\"SYNC \\r\\n\",7,5)",
          "new_text": "close(fd)",
          "old_line_content": "    if (syncWrite(fd,\"SYNC \\r\\n\",7,5) == -1) {",
          "new_line_content": "        close(fd);",
          "content_same": false
        },
        {
          "line": 7985,
          "old_api": "close",
          "new_api": "redisLog",
          "old_text": "close(fd)",
          "new_text": "redisLog(REDIS_WARNING,\"I/O error writing to MASTER: %s\",\n            strerror(errno))",
          "old_line_content": "        close(fd);",
          "new_line_content": "        redisLog(REDIS_WARNING,\"I/O error writing to MASTER: %s\",",
          "content_same": false
        },
        {
          "line": 7986,
          "old_api": "redisLog",
          "new_api": "strerror",
          "old_text": "redisLog(REDIS_WARNING,\"I/O error writing to MASTER: %s\",\n            strerror(errno))",
          "new_text": "strerror(errno)",
          "old_line_content": "        redisLog(REDIS_WARNING,\"I/O error writing to MASTER: %s\",",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 7991,
          "old_api": "syncReadLine",
          "new_api": "close",
          "old_text": "syncReadLine(fd,buf,1024,3600)",
          "new_text": "close(fd)",
          "old_line_content": "    if (syncReadLine(fd,buf,1024,3600) == -1) {",
          "new_line_content": "        close(fd);",
          "content_same": false
        },
        {
          "line": 7992,
          "old_api": "close",
          "new_api": "redisLog",
          "old_text": "close(fd)",
          "new_text": "redisLog(REDIS_WARNING,\"I/O error reading bulk count from MASTER: %s\",\n            strerror(errno))",
          "old_line_content": "        close(fd);",
          "new_line_content": "        redisLog(REDIS_WARNING,\"I/O error reading bulk count from MASTER: %s\",",
          "content_same": false
        },
        {
          "line": 7993,
          "old_api": "redisLog",
          "new_api": "strerror",
          "old_text": "redisLog(REDIS_WARNING,\"I/O error reading bulk count from MASTER: %s\",\n            strerror(errno))",
          "new_text": "strerror(errno)",
          "old_line_content": "        redisLog(REDIS_WARNING,\"I/O error reading bulk count from MASTER: %s\",",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 7998,
          "old_api": "close",
          "new_api": "redisLog",
          "old_text": "close(fd)",
          "new_text": "redisLog(REDIS_WARNING,\"Bad protocol from MASTER, the first byte is not '$', are you sure the host and port are right?\")",
          "old_line_content": "        close(fd);",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Bad protocol from MASTER, the first byte is not '$', are you sure the host and port are right?\");",
          "content_same": false
        },
        {
          "line": 8002,
          "old_api": "strtol",
          "new_api": "redisLog",
          "old_text": "strtol(buf+1,NULL,10)",
          "new_text": "redisLog(REDIS_NOTICE,\"Receiving %ld bytes data dump from MASTER\",dumpsize)",
          "old_line_content": "    dumpsize = strtol(buf+1,NULL,10);",
          "new_line_content": "    redisLog(REDIS_NOTICE,\"Receiving %ld bytes data dump from MASTER\",dumpsize);",
          "content_same": false
        },
        {
          "line": 8006,
          "old_api": "snprintf",
          "new_api": "getpid",
          "old_text": "snprintf(tmpfile,256,\n            \"temp-%d.%ld.rdb\",(int)time(NULL),(long int)getpid())",
          "new_text": "getpid()",
          "old_line_content": "        snprintf(tmpfile,256,",
          "new_line_content": "            \"temp-%d.%ld.rdb\",(int)time(NULL),(long int)getpid());",
          "content_same": false
        },
        {
          "line": 8007,
          "old_api": "getpid",
          "new_api": "open",
          "old_text": "getpid()",
          "new_text": "open(tmpfile,O_CREAT|O_WRONLY|O_EXCL,0644)",
          "old_line_content": "            \"temp-%d.%ld.rdb\",(int)time(NULL),(long int)getpid());",
          "new_line_content": "        dfd = open(tmpfile,O_CREAT|O_WRONLY|O_EXCL,0644);",
          "content_same": false
        },
        {
          "line": 8013,
          "old_api": "close",
          "new_api": "strerror",
          "old_text": "close(fd)",
          "new_text": "strerror(errno)",
          "old_line_content": "        close(fd);",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Opening the temp file needed for MASTER <-> SLAVE synchronization: %s\",strerror(errno));",
          "content_same": false
        },
        {
          "line": 8022,
          "old_api": "redisLog",
          "new_api": "strerror",
          "old_text": "redisLog(REDIS_WARNING,\"I/O error trying to sync with MASTER: %s\",\n                strerror(errno))",
          "new_text": "strerror(errno)",
          "old_line_content": "            redisLog(REDIS_WARNING,\"I/O error trying to sync with MASTER: %s\",",
          "new_line_content": "                strerror(errno));",
          "content_same": false
        },
        {
          "line": 8023,
          "old_api": "strerror",
          "new_api": "close",
          "old_text": "strerror(errno)",
          "new_text": "close(fd)",
          "old_line_content": "                strerror(errno));",
          "new_line_content": "            close(fd);",
          "content_same": false
        },
        {
          "line": 8030,
          "old_api": "strerror",
          "new_api": "close",
          "old_text": "strerror(errno)",
          "new_text": "close(fd)",
          "old_line_content": "            redisLog(REDIS_WARNING,\"Write error writing to the DB dump file needed for MASTER <-> SLAVE synchrnonization: %s\", strerror(errno));",
          "new_line_content": "            close(fd);",
          "content_same": false
        },
        {
          "line": 8037,
          "old_api": "close",
          "new_api": "rename",
          "old_text": "close(dfd)",
          "new_text": "rename(tmpfile,server.dbfilename)",
          "old_line_content": "    close(dfd);",
          "new_line_content": "    if (rename(tmpfile,server.dbfilename) == -1) {",
          "content_same": false
        },
        {
          "line": 8038,
          "old_api": "rename",
          "new_api": "strerror",
          "old_text": "rename(tmpfile,server.dbfilename)",
          "new_text": "strerror(errno)",
          "old_line_content": "    if (rename(tmpfile,server.dbfilename) == -1) {",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Failed trying to rename the temp DB into dump.rdb in MASTER <-> SLAVE synchronization: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 8039,
          "old_api": "strerror",
          "new_api": "unlink",
          "old_text": "strerror(errno)",
          "new_text": "unlink(tmpfile)",
          "old_line_content": "        redisLog(REDIS_WARNING,\"Failed trying to rename the temp DB into dump.rdb in MASTER <-> SLAVE synchronization: %s\", strerror(errno));",
          "new_line_content": "        unlink(tmpfile);",
          "content_same": false
        },
        {
          "line": 8040,
          "old_api": "unlink",
          "new_api": "close",
          "old_text": "unlink(tmpfile)",
          "new_text": "close(fd)",
          "old_line_content": "        unlink(tmpfile);",
          "new_line_content": "        close(fd);",
          "content_same": false
        },
        {
          "line": 8044,
          "old_api": "emptyDb",
          "new_api": "rdbLoad",
          "old_text": "emptyDb()",
          "new_text": "rdbLoad(server.dbfilename)",
          "old_line_content": "    emptyDb();",
          "new_line_content": "    if (rdbLoad(server.dbfilename) != REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 8045,
          "old_api": "rdbLoad",
          "new_api": "redisLog",
          "old_text": "rdbLoad(server.dbfilename)",
          "new_text": "redisLog(REDIS_WARNING,\"Failed trying to load the MASTER synchronization DB from disk\")",
          "old_line_content": "    if (rdbLoad(server.dbfilename) != REDIS_OK) {",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Failed trying to load the MASTER synchronization DB from disk\");",
          "content_same": false
        },
        {
          "line": 8046,
          "old_api": "redisLog",
          "new_api": "close",
          "old_text": "redisLog(REDIS_WARNING,\"Failed trying to load the MASTER synchronization DB from disk\")",
          "new_text": "close(fd)",
          "old_line_content": "        redisLog(REDIS_WARNING,\"Failed trying to load the MASTER synchronization DB from disk\");",
          "new_line_content": "        close(fd);",
          "content_same": false
        },
        {
          "line": 8068,
          "old_api": "sdsfree",
          "new_api": "sdsdup",
          "old_text": "sdsfree(server.masterhost)",
          "new_text": "sdsdup(c->argv[1]->ptr)",
          "old_line_content": "        sdsfree(server.masterhost);",
          "new_line_content": "        server.masterhost = sdsdup(c->argv[1]->ptr);",
          "content_same": false
        },
        {
          "line": 8069,
          "old_api": "sdsdup",
          "new_api": "atoi",
          "old_text": "sdsdup(c->argv[1]->ptr)",
          "new_text": "atoi(c->argv[2]->ptr)",
          "old_line_content": "        server.masterhost = sdsdup(c->argv[1]->ptr);",
          "new_line_content": "        server.masterport = atoi(c->argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 8070,
          "old_api": "atoi",
          "new_api": "freeClient",
          "old_text": "atoi(c->argv[2]->ptr)",
          "new_text": "freeClient(server.master)",
          "old_line_content": "        server.masterport = atoi(c->argv[2]->ptr);",
          "new_line_content": "        if (server.master) freeClient(server.master);",
          "content_same": false
        },
        {
          "line": 8088,
          "old_api": "pthread_mutex_lock",
          "new_api": "listLength",
          "old_text": "pthread_mutex_lock(&server.obj_freelist_mutex)",
          "new_text": "listLength(server.objfreelist)",
          "old_line_content": "    if (server.vm_enabled) pthread_mutex_lock(&server.obj_freelist_mutex);",
          "new_line_content": "    if (listLength(server.objfreelist)) {",
          "content_same": false
        },
        {
          "line": 8089,
          "old_api": "listLength",
          "new_api": "listFirst",
          "old_text": "listLength(server.objfreelist)",
          "new_text": "listFirst(server.objfreelist)",
          "old_line_content": "    if (listLength(server.objfreelist)) {",
          "new_line_content": "        listNode *head = listFirst(server.objfreelist);",
          "content_same": false
        },
        {
          "line": 8090,
          "old_api": "listFirst",
          "new_api": "listNodeValue",
          "old_text": "listFirst(server.objfreelist)",
          "new_text": "listNodeValue(head)",
          "old_line_content": "        listNode *head = listFirst(server.objfreelist);",
          "new_line_content": "        o = listNodeValue(head);",
          "content_same": false
        },
        {
          "line": 8091,
          "old_api": "listNodeValue",
          "new_api": "listDelNode",
          "old_text": "listNodeValue(head)",
          "new_text": "listDelNode(server.objfreelist,head)",
          "old_line_content": "        o = listNodeValue(head);",
          "new_line_content": "        listDelNode(server.objfreelist,head);",
          "content_same": false
        },
        {
          "line": 8092,
          "old_api": "listDelNode",
          "new_api": "pthread_mutex_unlock",
          "old_text": "listDelNode(server.objfreelist,head)",
          "new_text": "pthread_mutex_unlock(&server.obj_freelist_mutex)",
          "old_line_content": "        listDelNode(server.objfreelist,head);",
          "new_line_content": "        if (server.vm_enabled) pthread_mutex_unlock(&server.obj_freelist_mutex);",
          "content_same": false
        },
        {
          "line": 8093,
          "old_api": "pthread_mutex_unlock",
          "new_api": "zfree",
          "old_text": "pthread_mutex_unlock(&server.obj_freelist_mutex)",
          "new_text": "zfree(o)",
          "old_line_content": "        if (server.vm_enabled) pthread_mutex_unlock(&server.obj_freelist_mutex);",
          "new_line_content": "        zfree(o);",
          "content_same": false
        },
        {
          "line": 8130,
          "old_api": "dictGetRandomKey",
          "new_api": "dictGetEntryVal",
          "old_text": "dictGetRandomKey(server.db[j].expires)",
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "                    de = dictGetRandomKey(server.db[j].expires);",
          "new_line_content": "                    t = (time_t) dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 8176,
          "old_api": "sdsfree",
          "new_api": "sdsempty",
          "old_text": "sdsfree(server.aofbuf)",
          "new_text": "sdsempty()",
          "old_line_content": "    sdsfree(server.aofbuf);",
          "new_line_content": "    server.aofbuf = sdsempty();",
          "content_same": false
        },
        {
          "line": 8196,
          "old_api": "getDecodedObject",
          "new_api": "sdslen",
          "old_text": "getDecodedObject(argv[j])",
          "new_text": "sdslen(o->ptr)",
          "old_line_content": "        robj *o = getDecodedObject(argv[j]);",
          "new_line_content": "        buf = sdscatprintf(buf,\"$%lu\\r\\n\",(unsigned long)sdslen(o->ptr));",
          "content_same": false
        },
        {
          "line": 8198,
          "old_api": "sdslen",
          "new_api": "sdscatlen",
          "old_text": "sdslen(o->ptr)",
          "new_text": "sdscatlen(buf,\"\\r\\n\",2)",
          "old_line_content": "        buf = sdscatlen(buf,o->ptr,sdslen(o->ptr));",
          "new_line_content": "        buf = sdscatlen(buf,\"\\r\\n\",2);",
          "content_same": false
        },
        {
          "line": 8199,
          "old_api": "sdscatlen",
          "new_api": "decrRefCount",
          "old_text": "sdscatlen(buf,\"\\r\\n\",2)",
          "new_text": "decrRefCount(o)",
          "old_line_content": "        buf = sdscatlen(buf,\"\\r\\n\",2);",
          "new_line_content": "        decrRefCount(o);",
          "content_same": false
        },
        {
          "line": 8211,
          "old_api": "getDecodedObject",
          "new_api": "strtol",
          "old_text": "getDecodedObject(seconds)",
          "new_text": "strtol(seconds->ptr,NULL,10)",
          "old_line_content": "    seconds = getDecodedObject(seconds);",
          "new_line_content": "    when = time(NULL)+strtol(seconds->ptr,NULL,10);",
          "content_same": false
        },
        {
          "line": 8212,
          "old_api": "strtol",
          "new_api": "decrRefCount",
          "old_text": "strtol(seconds->ptr,NULL,10)",
          "new_text": "decrRefCount(seconds)",
          "old_line_content": "    when = time(NULL)+strtol(seconds->ptr,NULL,10);",
          "new_line_content": "    decrRefCount(seconds);",
          "content_same": false
        },
        {
          "line": 8217,
          "old_api": "createObject",
          "new_api": "sdsempty",
          "old_text": "createObject(REDIS_STRING,\n        sdscatprintf(sdsempty(),\"%ld\",when))",
          "new_text": "sdsempty()",
          "old_line_content": "    argv[2] = createObject(REDIS_STRING,",
          "new_line_content": "        sdscatprintf(sdsempty(),\"%ld\",when));",
          "content_same": false
        },
        {
          "line": 8218,
          "old_api": "sdsempty",
          "new_api": "catAppendOnlyGenericCommand",
          "old_text": "sdsempty()",
          "new_text": "catAppendOnlyGenericCommand(buf, argc, argv)",
          "old_line_content": "        sdscatprintf(sdsempty(),\"%ld\",when));",
          "new_line_content": "    buf = catAppendOnlyGenericCommand(buf, argc, argv);",
          "content_same": false
        },
        {
          "line": 8219,
          "old_api": "catAppendOnlyGenericCommand",
          "new_api": "decrRefCount",
          "old_text": "catAppendOnlyGenericCommand(buf, argc, argv)",
          "new_text": "decrRefCount(argv[0])",
          "old_line_content": "    buf = catAppendOnlyGenericCommand(buf, argc, argv);",
          "new_line_content": "    decrRefCount(argv[0]);",
          "content_same": false
        },
        {
          "line": 8234,
          "old_api": "snprintf",
          "new_api": "sdscatprintf",
          "old_text": "snprintf(seldb,sizeof(seldb),\"%d\",dictid)",
          "new_text": "sdscatprintf(buf,\"*2\\r\\n$6\\r\\nSELECT\\r\\n$%lu\\r\\n%s\\r\\n\",\n            (unsigned long)strlen(seldb),seldb)",
          "old_line_content": "        snprintf(seldb,sizeof(seldb),\"%d\",dictid);",
          "new_line_content": "        buf = sdscatprintf(buf,\"*2\\r\\n$6\\r\\nSELECT\\r\\n$%lu\\r\\n%s\\r\\n\",",
          "content_same": false
        },
        {
          "line": 8235,
          "old_api": "sdscatprintf",
          "new_api": "strlen",
          "old_text": "sdscatprintf(buf,\"*2\\r\\n$6\\r\\nSELECT\\r\\n$%lu\\r\\n%s\\r\\n\",\n            (unsigned long)strlen(seldb),seldb)",
          "new_text": "strlen(seldb)",
          "old_line_content": "        buf = sdscatprintf(buf,\"*2\\r\\n$6\\r\\nSELECT\\r\\n$%lu\\r\\n%s\\r\\n\",",
          "new_line_content": "            (unsigned long)strlen(seldb),seldb);",
          "content_same": false
        },
        {
          "line": 8248,
          "old_api": "catAppendOnlyGenericCommand",
          "new_api": "decrRefCount",
          "old_text": "catAppendOnlyGenericCommand(buf,3,tmpargv)",
          "new_text": "decrRefCount(tmpargv[0])",
          "old_line_content": "        buf = catAppendOnlyGenericCommand(buf,3,tmpargv);",
          "new_line_content": "        decrRefCount(tmpargv[0]);",
          "content_same": false
        },
        {
          "line": 8249,
          "old_api": "decrRefCount",
          "new_api": "catAppendOnlyExpireAtCommand",
          "old_text": "decrRefCount(tmpargv[0])",
          "new_text": "catAppendOnlyExpireAtCommand(buf,argv[1],argv[2])",
          "old_line_content": "        decrRefCount(tmpargv[0]);",
          "new_line_content": "        buf = catAppendOnlyExpireAtCommand(buf,argv[1],argv[2]);",
          "content_same": false
        },
        {
          "line": 8284,
          "old_api": "listCreate",
          "new_api": "listSetFreeMethod",
          "old_text": "listCreate()",
          "new_text": "listSetFreeMethod(c->reply,decrRefCount)",
          "old_line_content": "    c->reply = listCreate();",
          "new_line_content": "    listSetFreeMethod(c->reply,decrRefCount);",
          "content_same": false
        },
        {
          "line": 8285,
          "old_api": "listSetFreeMethod",
          "new_api": "listSetDupMethod",
          "old_text": "listSetFreeMethod(c->reply,decrRefCount)",
          "new_text": "listSetDupMethod(c->reply,dupClientReplyValue)",
          "old_line_content": "    listSetFreeMethod(c->reply,decrRefCount);",
          "new_line_content": "    listSetDupMethod(c->reply,dupClientReplyValue);",
          "content_same": false
        },
        {
          "line": 8286,
          "old_api": "listSetDupMethod",
          "new_api": "initClientMultiState",
          "old_text": "listSetDupMethod(c->reply,dupClientReplyValue)",
          "new_text": "initClientMultiState(c)",
          "old_line_content": "    listSetDupMethod(c->reply,dupClientReplyValue);",
          "new_line_content": "    initClientMultiState(c);",
          "content_same": false
        },
        {
          "line": 8292,
          "old_api": "sdsfree",
          "new_api": "listRelease",
          "old_text": "sdsfree(c->querybuf)",
          "new_text": "listRelease(c->reply)",
          "old_line_content": "    sdsfree(c->querybuf);",
          "new_line_content": "    listRelease(c->reply);",
          "content_same": false
        },
        {
          "line": 8293,
          "old_api": "listRelease",
          "new_api": "freeClientMultiState",
          "old_text": "listRelease(c->reply)",
          "new_text": "freeClientMultiState(c)",
          "old_line_content": "    listRelease(c->reply);",
          "new_line_content": "    freeClientMultiState(c);",
          "content_same": false
        },
        {
          "line": 8294,
          "old_api": "freeClientMultiState",
          "new_api": "zfree",
          "old_text": "freeClientMultiState(c)",
          "new_text": "zfree(c)",
          "old_line_content": "    freeClientMultiState(c);",
          "new_line_content": "    zfree(c);",
          "content_same": false
        },
        {
          "line": 8312,
          "old_api": "strerror",
          "new_api": "exit",
          "old_text": "strerror(errno)",
          "new_text": "exit(1)",
          "old_line_content": "        redisLog(REDIS_WARNING,\"Fatal error: can't open the append log file for reading: %s\",strerror(errno));",
          "new_line_content": "        exit(1);",
          "content_same": false
        },
        {
          "line": 8329,
          "old_api": "fgets",
          "new_api": "feof",
          "old_text": "fgets(buf,sizeof(buf),fp)",
          "new_text": "feof(fp)",
          "old_line_content": "        if (fgets(buf,sizeof(buf),fp) == NULL) {",
          "new_line_content": "            if (feof(fp))",
          "content_same": false
        },
        {
          "line": 8336,
          "old_api": "atoi",
          "new_api": "zmalloc",
          "old_text": "atoi(buf+1)",
          "new_text": "zmalloc(sizeof(robj*)*argc)",
          "old_line_content": "        argc = atoi(buf+1);",
          "new_line_content": "        argv = zmalloc(sizeof(robj*)*argc);",
          "content_same": false
        },
        {
          "line": 8341,
          "old_api": "strtol",
          "new_api": "sdsnewlen",
          "old_text": "strtol(buf+1,NULL,10)",
          "new_text": "sdsnewlen(NULL,len)",
          "old_line_content": "            len = strtol(buf+1,NULL,10);",
          "new_line_content": "            argsds = sdsnewlen(NULL,len);",
          "content_same": false
        },
        {
          "line": 8342,
          "old_api": "sdsnewlen",
          "new_api": "fread",
          "old_text": "sdsnewlen(NULL,len)",
          "new_text": "fread(argsds,len,1,fp)",
          "old_line_content": "            argsds = sdsnewlen(NULL,len);",
          "new_line_content": "            if (len && fread(argsds,len,1,fp) == 0) goto fmterr;",
          "content_same": false
        },
        {
          "line": 8343,
          "old_api": "fread",
          "new_api": "createObject",
          "old_text": "fread(argsds,len,1,fp)",
          "new_text": "createObject(REDIS_STRING,argsds)",
          "old_line_content": "            if (len && fread(argsds,len,1,fp) == 0) goto fmterr;",
          "new_line_content": "            argv[j] = createObject(REDIS_STRING,argsds);",
          "content_same": false
        },
        {
          "line": 8344,
          "old_api": "createObject",
          "new_api": "fread",
          "old_text": "createObject(REDIS_STRING,argsds)",
          "new_text": "fread(buf,2,1,fp)",
          "old_line_content": "            argv[j] = createObject(REDIS_STRING,argsds);",
          "new_line_content": "            if (fread(buf,2,1,fp) == 0) goto fmterr; /* discard CRLF */",
          "content_same": false
        },
        {
          "line": 8351,
          "old_api": "redisLog",
          "new_api": "exit",
          "old_text": "redisLog(REDIS_WARNING,\"Unknown command '%s' reading the append only file\", argv[0]->ptr)",
          "new_text": "exit(1)",
          "old_line_content": "            redisLog(REDIS_WARNING,\"Unknown command '%s' reading the append only file\", argv[0]->ptr);",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 8362,
          "old_api": "listLength",
          "new_api": "listFirst",
          "old_text": "listLength(fakeClient->reply)",
          "new_text": "listFirst(fakeClient->reply)",
          "old_line_content": "        while(listLength(fakeClient->reply))",
          "new_line_content": "            listDelNode(fakeClient->reply,listFirst(fakeClient->reply));",
          "content_same": false
        },
        {
          "line": 8365,
          "old_api": "decrRefCount",
          "new_api": "zfree",
          "old_text": "decrRefCount(argv[j])",
          "new_text": "zfree(argv)",
          "old_line_content": "        for (j = 0; j < argc; j++) decrRefCount(argv[j]);",
          "new_line_content": "        zfree(argv);",
          "content_same": false
        },
        {
          "line": 8370,
          "old_api": "zmalloc_used_memory",
          "new_api": "vmSwapOneObjectBlocking",
          "old_text": "zmalloc_used_memory()",
          "new_text": "vmSwapOneObjectBlocking()",
          "old_line_content": "            while (zmalloc_used_memory() > server.vm_max_memory) {",
          "new_line_content": "                if (vmSwapOneObjectBlocking() == REDIS_ERR) break;",
          "content_same": false
        },
        {
          "line": 8380,
          "old_api": "fclose",
          "new_api": "freeFakeClient",
          "old_text": "fclose(fp)",
          "new_text": "freeFakeClient(fakeClient)",
          "old_line_content": "    fclose(fp);",
          "new_line_content": "    freeFakeClient(fakeClient);",
          "content_same": false
        },
        {
          "line": 8386,
          "old_api": "feof",
          "new_api": "redisLog",
          "old_text": "feof(fp)",
          "new_text": "redisLog(REDIS_WARNING,\"Unexpected end of file reading the append only file\")",
          "old_line_content": "    if (feof(fp)) {",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Unexpected end of file reading the append only file\");",
          "content_same": false
        },
        {
          "line": 8393,
          "old_api": "redisLog",
          "new_api": "exit",
          "old_text": "redisLog(REDIS_WARNING,\"Bad file format reading the append only file\")",
          "new_text": "exit(1)",
          "old_line_content": "    redisLog(REDIS_WARNING,\"Bad file format reading the append only file\");",
          "new_line_content": "    exit(1);",
          "content_same": false
        },
        {
          "line": 8411,
          "old_api": "sdslen",
          "new_api": "strlen",
          "old_text": "sdslen(obj->ptr)",
          "new_text": "strlen(buf)",
          "old_line_content": "    snprintf(buf,sizeof(buf),\"$%ld\\r\\n\",(long)sdslen(obj->ptr));",
          "new_line_content": "    if (fwrite(buf,strlen(buf),1,fp) == 0) goto err;",
          "content_same": false
        },
        {
          "line": 8412,
          "old_api": "strlen",
          "new_api": "sdslen",
          "old_text": "strlen(buf)",
          "new_text": "sdslen(obj->ptr)",
          "old_line_content": "    if (fwrite(buf,strlen(buf),1,fp) == 0) goto err;",
          "new_line_content": "    if (sdslen(obj->ptr) && fwrite(obj->ptr,sdslen(obj->ptr),1,fp) == 0)",
          "content_same": false
        },
        {
          "line": 8415,
          "old_api": "fwrite",
          "new_api": "decrRefCount",
          "old_text": "fwrite(\"\\r\\n\",2,1,fp)",
          "new_text": "decrRefCount(obj)",
          "old_line_content": "    if (fwrite(\"\\r\\n\",2,1,fp) == 0) goto err;",
          "new_line_content": "    if (decrrc) decrRefCount(obj);",
          "content_same": false
        },
        {
          "line": 8428,
          "old_api": "snprintf",
          "new_api": "strlen",
          "old_text": "snprintf(buf,sizeof(buf),\"$%ld\\r\\n\",(unsigned long)len)",
          "new_text": "strlen(buf)",
          "old_line_content": "    snprintf(buf,sizeof(buf),\"$%ld\\r\\n\",(unsigned long)len);",
          "new_line_content": "    if (fwrite(buf,strlen(buf),1,fp) == 0) return 0;",
          "content_same": false
        },
        {
          "line": 8429,
          "old_api": "strlen",
          "new_api": "fwrite",
          "old_text": "strlen(buf)",
          "new_text": "fwrite(s,len,1,fp)",
          "old_line_content": "    if (fwrite(buf,strlen(buf),1,fp) == 0) return 0;",
          "new_line_content": "    if (len && fwrite(s,len,1,fp) == 0) return 0;",
          "content_same": false
        },
        {
          "line": 8439,
          "old_api": "snprintf",
          "new_api": "strlen",
          "old_text": "snprintf(dbuf,sizeof(dbuf),\"%.17g\\r\\n\",d)",
          "new_text": "strlen(dbuf)",
          "old_line_content": "    snprintf(dbuf,sizeof(dbuf),\"%.17g\\r\\n\",d);",
          "new_line_content": "    snprintf(buf,sizeof(buf),\"$%lu\\r\\n\",(unsigned long)strlen(dbuf)-2);",
          "content_same": false
        },
        {
          "line": 8450,
          "old_api": "snprintf",
          "new_api": "strlen",
          "old_text": "snprintf(lbuf,sizeof(lbuf),\"%ld\\r\\n\",l)",
          "new_text": "strlen(lbuf)",
          "old_line_content": "    snprintf(lbuf,sizeof(lbuf),\"%ld\\r\\n\",l);",
          "new_line_content": "    snprintf(buf,sizeof(buf),\"$%lu\\r\\n\",(unsigned long)strlen(lbuf)-2);",
          "content_same": false
        },
        {
          "line": 8469,
          "old_api": "getpid",
          "new_api": "fopen",
          "old_text": "getpid()",
          "new_text": "fopen(tmpfile,\"w\")",
          "old_line_content": "    snprintf(tmpfile,256,\"temp-rewriteaof-%d.aof\", (int) getpid());",
          "new_line_content": "    fp = fopen(tmpfile,\"w\");",
          "content_same": false
        },
        {
          "line": 8479,
          "old_api": "dictSize",
          "new_api": "dictGetIterator",
          "old_text": "dictSize(d)",
          "new_text": "dictGetIterator(d)",
          "old_line_content": "        if (dictSize(d) == 0) continue;",
          "new_line_content": "        di = dictGetIterator(d);",
          "content_same": false
        },
        {
          "line": 8487,
          "old_api": "fwrite",
          "new_api": "fwriteBulkLong",
          "old_text": "fwrite(selectcmd,sizeof(selectcmd)-1,1,fp)",
          "new_text": "fwriteBulkLong(fp,j)",
          "old_line_content": "        if (fwrite(selectcmd,sizeof(selectcmd)-1,1,fp) == 0) goto werr;",
          "new_line_content": "        if (fwriteBulkLong(fp,j) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8525,
          "old_api": "listRewind",
          "new_api": "listNext",
          "old_text": "listRewind(list,&li)",
          "new_text": "listNext(&li)",
          "old_line_content": "                listRewind(list,&li);",
          "new_line_content": "                while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 8530,
          "old_api": "fwrite",
          "new_api": "fwriteBulkObject",
          "old_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "new_text": "fwriteBulkObject(fp,key)",
          "old_line_content": "                    if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "new_line_content": "                    if (fwriteBulkObject(fp,key) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8544,
          "old_api": "fwrite",
          "new_api": "fwriteBulkObject",
          "old_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "new_text": "fwriteBulkObject(fp,key)",
          "old_line_content": "                    if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "new_line_content": "                    if (fwriteBulkObject(fp,key) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8557,
          "old_api": "dictGetEntryKey",
          "new_api": "dictGetEntryVal",
          "old_text": "dictGetEntryKey(de)",
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "                    robj *eleobj = dictGetEntryKey(de);",
          "new_line_content": "                    double *score = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 8560,
          "old_api": "fwrite",
          "new_api": "fwriteBulkObject",
          "old_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "new_text": "fwriteBulkObject(fp,key)",
          "old_line_content": "                    if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "new_line_content": "                    if (fwriteBulkObject(fp,key) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8561,
          "old_api": "fwriteBulkObject",
          "new_api": "fwriteBulkDouble",
          "old_text": "fwriteBulkObject(fp,key)",
          "new_text": "fwriteBulkDouble(fp,*score)",
          "old_line_content": "                    if (fwriteBulkObject(fp,key) == 0) goto werr;",
          "new_line_content": "                    if (fwriteBulkDouble(fp,*score) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8562,
          "old_api": "fwriteBulkDouble",
          "new_api": "fwriteBulkObject",
          "old_text": "fwriteBulkDouble(fp,*score)",
          "new_text": "fwriteBulkObject(fp,eleobj)",
          "old_line_content": "                    if (fwriteBulkDouble(fp,*score) == 0) goto werr;",
          "new_line_content": "                    if (fwriteBulkObject(fp,eleobj) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8575,
          "old_api": "zipmapNext",
          "new_api": "fwrite",
          "old_text": "zipmapNext(p,&field,&flen,&val,&vlen)",
          "new_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "old_line_content": "                    while((p = zipmapNext(p,&field,&flen,&val,&vlen)) != NULL) {",
          "new_line_content": "                        if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8576,
          "old_api": "fwrite",
          "new_api": "fwriteBulkObject",
          "old_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "new_text": "fwriteBulkObject(fp,key)",
          "old_line_content": "                        if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "new_line_content": "                        if (fwriteBulkObject(fp,key) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8577,
          "old_api": "fwriteBulkObject",
          "new_api": "fwriteBulkString",
          "old_text": "fwriteBulkObject(fp,key)",
          "new_text": "fwriteBulkString(fp,(char*)field,flen)",
          "old_line_content": "                        if (fwriteBulkObject(fp,key) == 0) goto werr;",
          "new_line_content": "                        if (fwriteBulkString(fp,(char*)field,flen) == -1)",
          "content_same": false
        },
        {
          "line": 8587,
          "old_api": "dictNext",
          "new_api": "dictGetEntryKey",
          "old_text": "dictNext(di)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "                    while((de = dictNext(di)) != NULL) {",
          "new_line_content": "                        robj *field = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 8588,
          "old_api": "dictGetEntryKey",
          "new_api": "dictGetEntryVal",
          "old_text": "dictGetEntryKey(de)",
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "                        robj *field = dictGetEntryKey(de);",
          "new_line_content": "                        robj *val = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 8591,
          "old_api": "fwrite",
          "new_api": "fwriteBulkObject",
          "old_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "new_text": "fwriteBulkObject(fp,key)",
          "old_line_content": "                        if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "new_line_content": "                        if (fwriteBulkObject(fp,key) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8606,
          "old_api": "fwrite",
          "new_api": "fwriteBulkObject",
          "old_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "new_text": "fwriteBulkObject(fp,key)",
          "old_line_content": "                if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "new_line_content": "                if (fwriteBulkObject(fp,key) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8607,
          "old_api": "fwriteBulkObject",
          "new_api": "fwriteBulkLong",
          "old_text": "fwriteBulkObject(fp,key)",
          "new_text": "fwriteBulkLong(fp,expiretime)",
          "old_line_content": "                if (fwriteBulkObject(fp,key) == 0) goto werr;",
          "new_line_content": "                if (fwriteBulkLong(fp,expiretime) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8616,
          "old_api": "fflush",
          "new_api": "fileno",
          "old_text": "fflush(fp)",
          "new_text": "fileno(fp)",
          "old_line_content": "    fflush(fp);",
          "new_line_content": "    fsync(fileno(fp));",
          "content_same": false
        },
        {
          "line": 8617,
          "old_api": "fileno",
          "new_api": "fclose",
          "old_text": "fileno(fp)",
          "new_text": "fclose(fp)",
          "old_line_content": "    fsync(fileno(fp));",
          "new_line_content": "    fclose(fp);",
          "content_same": false
        },
        {
          "line": 8622,
          "old_api": "rename",
          "new_api": "strerror",
          "old_text": "rename(tmpfile,filename)",
          "new_text": "strerror(errno)",
          "old_line_content": "    if (rename(tmpfile,filename) == -1) {",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Error moving temp append only file on the final destination: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 8623,
          "old_api": "strerror",
          "new_api": "unlink",
          "old_text": "strerror(errno)",
          "new_text": "unlink(tmpfile)",
          "old_line_content": "        redisLog(REDIS_WARNING,\"Error moving temp append only file on the final destination: %s\", strerror(errno));",
          "new_line_content": "        unlink(tmpfile);",
          "content_same": false
        },
        {
          "line": 8631,
          "old_api": "fclose",
          "new_api": "unlink",
          "old_text": "fclose(fp)",
          "new_text": "unlink(tmpfile)",
          "old_line_content": "    fclose(fp);",
          "new_line_content": "    unlink(tmpfile);",
          "content_same": false
        },
        {
          "line": 8632,
          "old_api": "unlink",
          "new_api": "strerror",
          "old_text": "unlink(tmpfile)",
          "new_text": "strerror(errno)",
          "old_line_content": "    unlink(tmpfile);",
          "new_line_content": "    redisLog(REDIS_WARNING,\"Write error writing append only file on disk: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 8633,
          "old_api": "strerror",
          "new_api": "dictReleaseIterator",
          "old_text": "strerror(errno)",
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "    redisLog(REDIS_WARNING,\"Write error writing append only file on disk: %s\", strerror(errno));",
          "new_line_content": "    if (di) dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 8654,
          "old_api": "waitEmptyIOJobsQueue",
          "new_api": "fork",
          "old_text": "waitEmptyIOJobsQueue()",
          "new_text": "fork()",
          "old_line_content": "    if (server.vm_enabled) waitEmptyIOJobsQueue();",
          "new_line_content": "    if ((childpid = fork()) == 0) {",
          "content_same": false
        },
        {
          "line": 8659,
          "old_api": "vmReopenSwapFile",
          "new_api": "close",
          "old_text": "vmReopenSwapFile()",
          "new_text": "close(server.fd)",
          "old_line_content": "        if (server.vm_enabled) vmReopenSwapFile();",
          "new_line_content": "        close(server.fd);",
          "content_same": false
        },
        {
          "line": 8660,
          "old_api": "close",
          "new_api": "getpid",
          "old_text": "close(server.fd)",
          "new_text": "getpid()",
          "old_line_content": "        close(server.fd);",
          "new_line_content": "        snprintf(tmpfile,256,\"temp-rewriteaof-bg-%d.aof\", (int) getpid());",
          "content_same": false
        },
        {
          "line": 8661,
          "old_api": "getpid",
          "new_api": "rewriteAppendOnlyFile",
          "old_text": "getpid()",
          "new_text": "rewriteAppendOnlyFile(tmpfile)",
          "old_line_content": "        snprintf(tmpfile,256,\"temp-rewriteaof-bg-%d.aof\", (int) getpid());",
          "new_line_content": "        if (rewriteAppendOnlyFile(tmpfile) == REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 8662,
          "old_api": "rewriteAppendOnlyFile",
          "new_api": "_exit",
          "old_text": "rewriteAppendOnlyFile(tmpfile)",
          "new_text": "_exit(0)",
          "old_line_content": "        if (rewriteAppendOnlyFile(tmpfile) == REDIS_OK) {",
          "new_line_content": "            _exit(0);",
          "content_same": false
        },
        {
          "line": 8705,
          "old_api": "snprintf",
          "new_api": "unlink",
          "old_text": "snprintf(tmpfile,256,\"temp-rewriteaof-bg-%d.aof\", (int) childpid)",
          "new_text": "unlink(tmpfile)",
          "old_line_content": "    snprintf(tmpfile,256,\"temp-rewriteaof-bg-%d.aof\", (int) childpid);",
          "new_line_content": "    unlink(tmpfile);",
          "content_same": false
        },
        {
          "line": 8749,
          "old_api": "strerror",
          "new_api": "exit",
          "old_text": "strerror(errno)",
          "new_text": "exit(1)",
          "old_line_content": "            strerror(errno));",
          "new_line_content": "        exit(1);",
          "content_same": false
        },
        {
          "line": 8758,
          "old_api": "fcntl",
          "new_api": "redisLog",
          "old_text": "fcntl(server.vm_fd,F_SETLK,&fl)",
          "new_text": "redisLog(REDIS_WARNING,\n            \"Can't lock the swap file at '%s': %s. Make sure it is not used by another Redis instance.\", server.vm_swap_file, strerror(errno))",
          "old_line_content": "    if (fcntl(server.vm_fd,F_SETLK,&fl) == -1) {",
          "new_line_content": "        redisLog(REDIS_WARNING,",
          "content_same": false
        },
        {
          "line": 8759,
          "old_api": "redisLog",
          "new_api": "strerror",
          "old_text": "redisLog(REDIS_WARNING,\n            \"Can't lock the swap file at '%s': %s. Make sure it is not used by another Redis instance.\", server.vm_swap_file, strerror(errno))",
          "new_text": "strerror(errno)",
          "old_line_content": "        redisLog(REDIS_WARNING,",
          "new_line_content": "            \"Can't lock the swap file at '%s': %s. Make sure it is not used by another Redis instance.\", server.vm_swap_file, strerror(errno));",
          "content_same": false
        },
        {
          "line": 8760,
          "old_api": "strerror",
          "new_api": "exit",
          "old_text": "strerror(errno)",
          "new_text": "exit(1)",
          "old_line_content": "            \"Can't lock the swap file at '%s': %s. Make sure it is not used by another Redis instance.\", server.vm_swap_file, strerror(errno));",
          "new_line_content": "        exit(1);",
          "content_same": false
        },
        {
          "line": 8771,
          "old_api": "redisLog",
          "new_api": "ftruncate",
          "old_text": "redisLog(REDIS_NOTICE,\"Allocating %lld bytes of swap file\",totsize)",
          "new_text": "ftruncate(server.vm_fd,totsize)",
          "old_line_content": "    redisLog(REDIS_NOTICE,\"Allocating %lld bytes of swap file\",totsize);",
          "new_line_content": "    if (ftruncate(server.vm_fd,totsize) == -1) {",
          "content_same": false
        },
        {
          "line": 8772,
          "old_api": "ftruncate",
          "new_api": "redisLog",
          "old_text": "ftruncate(server.vm_fd,totsize)",
          "new_text": "redisLog(REDIS_WARNING,\"Can't ftruncate swap file: %s. Exiting.\",\n            strerror(errno))",
          "old_line_content": "    if (ftruncate(server.vm_fd,totsize) == -1) {",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Can't ftruncate swap file: %s. Exiting.\",",
          "content_same": false
        },
        {
          "line": 8773,
          "old_api": "redisLog",
          "new_api": "strerror",
          "old_text": "redisLog(REDIS_WARNING,\"Can't ftruncate swap file: %s. Exiting.\",\n            strerror(errno))",
          "new_text": "strerror(errno)",
          "old_line_content": "        redisLog(REDIS_WARNING,\"Can't ftruncate swap file: %s. Exiting.\",",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 8774,
          "old_api": "strerror",
          "new_api": "exit",
          "old_text": "strerror(errno)",
          "new_text": "exit(1)",
          "old_line_content": "            strerror(errno));",
          "new_line_content": "        exit(1);",
          "content_same": false
        },
        {
          "line": 8779,
          "old_api": "zmalloc",
          "new_api": "redisLog",
          "old_text": "zmalloc((server.vm_pages+7)/8)",
          "new_text": "redisLog(REDIS_VERBOSE,\"Allocated %lld bytes page table for %lld pages\",\n        (long long) (server.vm_pages+7)/8, server.vm_pages)",
          "old_line_content": "    server.vm_bitmap = zmalloc((server.vm_pages+7)/8);",
          "new_line_content": "    redisLog(REDIS_VERBOSE,\"Allocated %lld bytes page table for %lld pages\",",
          "content_same": false
        },
        {
          "line": 8788,
          "old_api": "listCreate",
          "new_api": "pthread_mutex_init",
          "old_text": "listCreate()",
          "new_text": "pthread_mutex_init(&server.io_mutex,NULL)",
          "old_line_content": "    server.io_ready_clients = listCreate();",
          "new_line_content": "    pthread_mutex_init(&server.io_mutex,NULL);",
          "content_same": false
        },
        {
          "line": 8793,
          "old_api": "pipe",
          "new_api": "redisLog",
          "old_text": "pipe(pipefds)",
          "new_text": "redisLog(REDIS_WARNING,\"Unable to intialized VM: pipe(2): %s. Exiting.\"\n            ,strerror(errno))",
          "old_line_content": "    if (pipe(pipefds) == -1) {",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Unable to intialized VM: pipe(2): %s. Exiting.\"",
          "content_same": false
        },
        {
          "line": 8794,
          "old_api": "redisLog",
          "new_api": "strerror",
          "old_text": "redisLog(REDIS_WARNING,\"Unable to intialized VM: pipe(2): %s. Exiting.\"\n            ,strerror(errno))",
          "new_text": "strerror(errno)",
          "old_line_content": "        redisLog(REDIS_WARNING,\"Unable to intialized VM: pipe(2): %s. Exiting.\"",
          "new_line_content": "            ,strerror(errno));",
          "content_same": false
        },
        {
          "line": 8795,
          "old_api": "strerror",
          "new_api": "exit",
          "old_text": "strerror(errno)",
          "new_text": "exit(1)",
          "old_line_content": "            ,strerror(errno));",
          "new_line_content": "        exit(1);",
          "content_same": false
        },
        {
          "line": 8802,
          "old_api": "pthread_attr_init",
          "new_api": "pthread_attr_getstacksize",
          "old_text": "pthread_attr_init(&server.io_threads_attr)",
          "new_text": "pthread_attr_getstacksize(&server.io_threads_attr, &stacksize)",
          "old_line_content": "    pthread_attr_init(&server.io_threads_attr);",
          "new_line_content": "    pthread_attr_getstacksize(&server.io_threads_attr, &stacksize);",
          "content_same": false
        },
        {
          "line": 8932,
          "old_api": "pthread_mutex_lock",
          "new_api": "fseeko",
          "old_text": "pthread_mutex_lock(&server.io_swapfile_mutex)",
          "new_text": "fseeko(server.vm_fp,page*server.vm_page_size,SEEK_SET)",
          "old_line_content": "    if (server.vm_enabled) pthread_mutex_lock(&server.io_swapfile_mutex);",
          "new_line_content": "    if (fseeko(server.vm_fp,page*server.vm_page_size,SEEK_SET) == -1) {",
          "content_same": false
        },
        {
          "line": 8933,
          "old_api": "fseeko",
          "new_api": "pthread_mutex_unlock",
          "old_text": "fseeko(server.vm_fp,page*server.vm_page_size,SEEK_SET)",
          "new_text": "pthread_mutex_unlock(&server.io_swapfile_mutex)",
          "old_line_content": "    if (fseeko(server.vm_fp,page*server.vm_page_size,SEEK_SET) == -1) {",
          "new_line_content": "        if (server.vm_enabled) pthread_mutex_unlock(&server.io_swapfile_mutex);",
          "content_same": false
        },
        {
          "line": 8934,
          "old_api": "pthread_mutex_unlock",
          "new_api": "redisLog",
          "old_text": "pthread_mutex_unlock(&server.io_swapfile_mutex)",
          "new_text": "redisLog(REDIS_WARNING,\n            \"Critical VM problem in vmWriteObjectOnSwap(): can't seek: %s\",\n            strerror(errno))",
          "old_line_content": "        if (server.vm_enabled) pthread_mutex_unlock(&server.io_swapfile_mutex);",
          "new_line_content": "        redisLog(REDIS_WARNING,",
          "content_same": false
        },
        {
          "line": 8940,
          "old_api": "rdbSaveObject",
          "new_api": "fflush",
          "old_text": "rdbSaveObject(server.vm_fp,o)",
          "new_text": "fflush(server.vm_fp)",
          "old_line_content": "    rdbSaveObject(server.vm_fp,o);",
          "new_line_content": "    fflush(server.vm_fp);",
          "content_same": false
        },
        {
          "line": 8941,
          "old_api": "fflush",
          "new_api": "pthread_mutex_unlock",
          "old_text": "fflush(server.vm_fp)",
          "new_text": "pthread_mutex_unlock(&server.io_swapfile_mutex)",
          "old_line_content": "    fflush(server.vm_fp);",
          "new_line_content": "    if (server.vm_enabled) pthread_mutex_unlock(&server.io_swapfile_mutex);",
          "content_same": false
        },
        {
          "line": 8955,
          "old_api": "assert",
          "new_api": "vmFindContiguousPages",
          "old_text": "assert(key->refcount == 1)",
          "new_text": "vmFindContiguousPages(&page,pages)",
          "old_line_content": "    assert(key->refcount == 1);",
          "new_line_content": "    if (vmFindContiguousPages(&page,pages) == REDIS_ERR) return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 8956,
          "old_api": "vmFindContiguousPages",
          "new_api": "vmWriteObjectOnSwap",
          "old_text": "vmFindContiguousPages(&page,pages)",
          "new_text": "vmWriteObjectOnSwap(val,page)",
          "old_line_content": "    if (vmFindContiguousPages(&page,pages) == REDIS_ERR) return REDIS_ERR;",
          "new_line_content": "    if (vmWriteObjectOnSwap(val,page) == REDIS_ERR) return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 8962,
          "old_api": "decrRefCount",
          "new_api": "vmMarkPagesUsed",
          "old_text": "decrRefCount(val)",
          "new_text": "vmMarkPagesUsed(page,pages)",
          "old_line_content": "    decrRefCount(val); /* Deallocate the object from memory. */",
          "new_line_content": "    vmMarkPagesUsed(page,pages);",
          "content_same": false
        },
        {
          "line": 8963,
          "old_api": "vmMarkPagesUsed",
          "new_api": "redisLog",
          "old_text": "vmMarkPagesUsed(page,pages)",
          "new_text": "redisLog(REDIS_DEBUG,\"VM: object %s swapped out at %lld (%lld pages)\",\n        (unsigned char*) key->ptr,\n        (unsigned long long) page, (unsigned long long) pages)",
          "old_line_content": "    vmMarkPagesUsed(page,pages);",
          "new_line_content": "    redisLog(REDIS_DEBUG,\"VM: object %s swapped out at %lld (%lld pages)\",",
          "content_same": false
        },
        {
          "line": 8975,
          "old_api": "pthread_mutex_lock",
          "new_api": "fseeko",
          "old_text": "pthread_mutex_lock(&server.io_swapfile_mutex)",
          "new_text": "fseeko(server.vm_fp,page*server.vm_page_size,SEEK_SET)",
          "old_line_content": "    if (server.vm_enabled) pthread_mutex_lock(&server.io_swapfile_mutex);",
          "new_line_content": "    if (fseeko(server.vm_fp,page*server.vm_page_size,SEEK_SET) == -1) {",
          "content_same": false
        },
        {
          "line": 8976,
          "old_api": "fseeko",
          "new_api": "redisLog",
          "old_text": "fseeko(server.vm_fp,page*server.vm_page_size,SEEK_SET)",
          "new_text": "redisLog(REDIS_WARNING,\n            \"Unrecoverable VM problem in vmReadObjectFromSwap(): can't seek: %s\",\n            strerror(errno))",
          "old_line_content": "    if (fseeko(server.vm_fp,page*server.vm_page_size,SEEK_SET) == -1) {",
          "new_line_content": "        redisLog(REDIS_WARNING,",
          "content_same": false
        },
        {
          "line": 8979,
          "old_api": "strerror",
          "new_api": "_exit",
          "old_text": "strerror(errno)",
          "new_text": "_exit(1)",
          "old_line_content": "            strerror(errno));",
          "new_line_content": "        _exit(1);",
          "content_same": false
        },
        {
          "line": 8984,
          "old_api": "strerror",
          "new_api": "_exit",
          "old_text": "strerror(errno)",
          "new_text": "_exit(1)",
          "old_line_content": "        redisLog(REDIS_WARNING, \"Unrecoverable VM problem in vmReadObjectFromSwap(): can't load object from swap file: %s\", strerror(errno));",
          "new_line_content": "        _exit(1);",
          "content_same": false
        },
        {
          "line": 8999,
          "old_api": "redisAssert",
          "new_api": "vmReadObjectFromSwap",
          "old_text": "redisAssert(key->storage == REDIS_VM_SWAPPED || key->storage == REDIS_VM_LOADING)",
          "new_text": "vmReadObjectFromSwap(key->vm.page,key->vtype)",
          "old_line_content": "    redisAssert(key->storage == REDIS_VM_SWAPPED || key->storage == REDIS_VM_LOADING);",
          "new_line_content": "    val = vmReadObjectFromSwap(key->vm.page,key->vtype);",
          "content_same": false
        },
        {
          "line": 9004,
          "old_api": "vmMarkPagesFree",
          "new_api": "redisLog",
          "old_text": "vmMarkPagesFree(key->vm.page,key->vm.usedpages)",
          "new_text": "redisLog(REDIS_DEBUG, \"VM: object %s loaded from disk\",\n            (unsigned char*) key->ptr)",
          "old_line_content": "        vmMarkPagesFree(key->vm.page,key->vm.usedpages);",
          "new_line_content": "        redisLog(REDIS_DEBUG, \"VM: object %s loaded from disk\",",
          "content_same": false
        },
        {
          "line": 9021,
          "old_api": "vmCancelThreadedIOJob",
          "new_api": "vmGenericLoadObject",
          "old_text": "vmCancelThreadedIOJob(key)",
          "new_text": "vmGenericLoadObject(key,0)",
          "old_line_content": "        vmCancelThreadedIOJob(key);",
          "new_line_content": "    return vmGenericLoadObject(key,0);",
          "content_same": false
        },
        {
          "line": 9087,
          "old_api": "dictGetRandomKey",
          "new_api": "dictGetEntryKey",
          "old_text": "dictGetRandomKey(d)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "            de = dictGetRandomKey(d);",
          "new_line_content": "            ele = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 9098,
          "old_api": "zipmapRewind",
          "new_api": "zipmapLen",
          "old_text": "zipmapRewind((unsigned char*)o->ptr)",
          "new_text": "zipmapLen((unsigned char*)o->ptr)",
          "old_line_content": "            unsigned char *p = zipmapRewind((unsigned char*)o->ptr);",
          "new_line_content": "            unsigned int len = zipmapLen((unsigned char*)o->ptr);",
          "content_same": false
        },
        {
          "line": 9110,
          "old_api": "dictSlots",
          "new_api": "dictSize",
          "old_text": "dictSlots(d)",
          "new_text": "dictSize(d)",
          "old_line_content": "            asize = sizeof(dict)+(sizeof(struct dictEntry*)*dictSlots(d));",
          "new_line_content": "            if (dictSize(d)) {",
          "content_same": false
        },
        {
          "line": 9115,
          "old_api": "dictGetRandomKey",
          "new_api": "dictGetEntryKey",
          "old_text": "dictGetRandomKey(d)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "                de = dictGetRandomKey(d);",
          "new_line_content": "                ele = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 9158,
          "old_api": "dictGetRandomKey",
          "new_api": "dictGetEntryKey",
          "old_text": "dictGetRandomKey(db->dict)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "            de = dictGetRandomKey(db->dict);",
          "new_line_content": "            key = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 9159,
          "old_api": "dictGetEntryKey",
          "new_api": "dictGetEntryVal",
          "old_text": "dictGetEntryKey(de)",
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "            key = dictGetEntryKey(de);",
          "new_line_content": "            val = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 9181,
          "old_api": "dictGetEntryKey",
          "new_api": "dictGetEntryVal",
          "old_text": "dictGetEntryKey(best)",
          "new_text": "dictGetEntryVal(best)",
          "old_line_content": "    key = dictGetEntryKey(best);",
          "new_line_content": "    val = dictGetEntryVal(best);",
          "content_same": false
        },
        {
          "line": 9189,
          "old_api": "dupStringObject",
          "new_api": "decrRefCount",
          "old_text": "dupStringObject(key)",
          "new_text": "decrRefCount(key)",
          "old_line_content": "        robj *newkey = dupStringObject(key);",
          "new_line_content": "        decrRefCount(key);",
          "content_same": false
        },
        {
          "line": 9190,
          "old_api": "decrRefCount",
          "new_api": "dictGetEntryKey",
          "old_text": "decrRefCount(key)",
          "new_text": "dictGetEntryKey(best)",
          "old_line_content": "        decrRefCount(key);",
          "new_line_content": "        key = dictGetEntryKey(best) = newkey;",
          "content_same": false
        },
        {
          "line": 9198,
          "old_api": "vmSwapObjectBlocking",
          "new_api": "dictGetEntryVal",
          "old_text": "vmSwapObjectBlocking(key,val)",
          "new_text": "dictGetEntryVal(best)",
          "old_line_content": "        if (vmSwapObjectBlocking(key,val) == REDIS_OK) {",
          "new_line_content": "            dictGetEntryVal(best) = NULL;",
          "content_same": false
        },
        {
          "line": 9228,
          "old_api": "dictFind",
          "new_api": "dictGetEntryKey",
          "old_text": "dictFind(db->dict,key)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "    if ((de = dictFind(db->dict,key)) == NULL) return 0;",
          "new_line_content": "    foundkey = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 9272,
          "old_api": "lockThreadedIO",
          "new_api": "listLength",
          "old_text": "lockThreadedIO()",
          "new_text": "listLength(server.io_processed)",
          "old_line_content": "        lockThreadedIO();",
          "new_line_content": "        assert(listLength(server.io_processed) != 0);",
          "content_same": false
        },
        {
          "line": 9280,
          "old_api": "listDelNode",
          "new_api": "unlockThreadedIO",
          "old_text": "listDelNode(server.io_processed,ln)",
          "new_text": "unlockThreadedIO()",
          "old_line_content": "        listDelNode(server.io_processed,ln);",
          "new_line_content": "        unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 9289,
          "old_api": "redisLog",
          "new_api": "dictFind",
          "old_text": "redisLog(REDIS_DEBUG,\"Job %p type: %d, key at %p (%s) refcount: %d\\n\", (void*) j, j->type, (void*)j->key, (char*)j->key->ptr, j->key->refcount)",
          "new_text": "dictFind(j->db->dict,j->key)",
          "old_line_content": "        redisLog(REDIS_DEBUG,\"Job %p type: %d, key at %p (%s) refcount: %d\\n\", (void*) j, j->type, (void*)j->key, (char*)j->key->ptr, j->key->refcount);",
          "new_line_content": "        de = dictFind(j->db->dict,j->key);",
          "content_same": false
        },
        {
          "line": 9290,
          "old_api": "dictFind",
          "new_api": "assert",
          "old_text": "dictFind(j->db->dict,j->key)",
          "new_text": "assert(de != NULL)",
          "old_line_content": "        de = dictFind(j->db->dict,j->key);",
          "new_line_content": "        assert(de != NULL);",
          "content_same": false
        },
        {
          "line": 9291,
          "old_api": "assert",
          "new_api": "dictGetEntryKey",
          "old_text": "assert(de != NULL)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "        assert(de != NULL);",
          "new_line_content": "        key = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 9299,
          "old_api": "vmMarkPagesFree",
          "new_api": "redisLog",
          "old_text": "vmMarkPagesFree(key->vm.page,key->vm.usedpages)",
          "new_text": "redisLog(REDIS_DEBUG, \"VM: object %s loaded from disk (threaded)\",\n                (unsigned char*) key->ptr)",
          "old_line_content": "            vmMarkPagesFree(key->vm.page,key->vm.usedpages);",
          "new_line_content": "            redisLog(REDIS_DEBUG, \"VM: object %s loaded from disk (threaded)\",",
          "content_same": false
        },
        {
          "line": 9304,
          "old_api": "dictGetEntryVal",
          "new_api": "incrRefCount",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "incrRefCount(j->val)",
          "old_line_content": "            dictGetEntryVal(de) = j->val;",
          "new_line_content": "            incrRefCount(j->val);",
          "content_same": false
        },
        {
          "line": 9314,
          "old_api": "vmCanSwapOut",
          "new_api": "vmFindContiguousPages",
          "old_text": "vmCanSwapOut()",
          "new_text": "vmFindContiguousPages(&j->page,j->pages)",
          "old_line_content": "            if (!vmCanSwapOut() ||",
          "new_line_content": "                vmFindContiguousPages(&j->page,j->pages) == REDIS_ERR)",
          "content_same": false
        },
        {
          "line": 9327,
          "old_api": "lockThreadedIO",
          "new_api": "queueIOJob",
          "old_text": "lockThreadedIO()",
          "new_text": "queueIOJob(j)",
          "old_line_content": "                lockThreadedIO();",
          "new_line_content": "                queueIOJob(j);",
          "content_same": false
        },
        {
          "line": 9328,
          "old_api": "queueIOJob",
          "new_api": "unlockThreadedIO",
          "old_text": "queueIOJob(j)",
          "new_text": "unlockThreadedIO()",
          "old_line_content": "                queueIOJob(j);",
          "new_line_content": "                unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 9343,
          "old_api": "redisAssert",
          "new_api": "dictGetEntryVal",
          "old_text": "redisAssert(key->storage == REDIS_VM_SWAPPING)",
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "            redisAssert(key->storage == REDIS_VM_SWAPPING);",
          "new_line_content": "            val = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 9349,
          "old_api": "decrRefCount",
          "new_api": "dictGetEntryVal",
          "old_text": "decrRefCount(val)",
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "            decrRefCount(val); /* Deallocate the object from memory. */",
          "new_line_content": "            dictGetEntryVal(de) = NULL;",
          "content_same": false
        },
        {
          "line": 9350,
          "old_api": "dictGetEntryVal",
          "new_api": "redisLog",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "redisLog(REDIS_DEBUG,\n                \"VM: object %s swapped out at %lld (%lld pages) (threaded)\",\n                (unsigned char*) key->ptr,\n                (unsigned long long) j->page, (unsigned long long) j->pages)",
          "old_line_content": "            dictGetEntryVal(de) = NULL;",
          "new_line_content": "            redisLog(REDIS_DEBUG,",
          "content_same": false
        },
        {
          "line": 9360,
          "old_api": "vmCanSwapOut",
          "new_api": "zmalloc_used_memory",
          "old_text": "vmCanSwapOut()",
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "            if (trytoswap && vmCanSwapOut() &&",
          "new_line_content": "                zmalloc_used_memory() > server.vm_max_memory)",
          "content_same": false
        },
        {
          "line": 9365,
          "old_api": "lockThreadedIO",
          "new_api": "listLength",
          "old_text": "lockThreadedIO()",
          "new_text": "listLength(server.io_newjobs)",
          "old_line_content": "                    lockThreadedIO();",
          "new_line_content": "                    more = listLength(server.io_newjobs) <",
          "content_same": false
        },
        {
          "line": 9413,
          "old_api": "listRewind",
          "new_api": "listNext",
          "old_text": "listRewind(lists[i],&li)",
          "new_text": "listNext(&li)",
          "old_line_content": "        listRewind(lists[i],&li);",
          "new_line_content": "        while ((ln = listNext(&li)) != NULL) {",
          "content_same": false
        },
        {
          "line": 9431,
          "old_api": "freeIOJob",
          "new_api": "listDelNode",
          "old_text": "freeIOJob(job)",
          "new_text": "listDelNode(lists[i],ln)",
          "old_line_content": "                    freeIOJob(job);",
          "new_line_content": "                    listDelNode(lists[i],ln);",
          "content_same": false
        },
        {
          "line": 9472,
          "old_api": "unlockThreadedIO",
          "new_api": "assert",
          "old_text": "unlockThreadedIO()",
          "new_text": "assert(1 != 1)",
          "old_line_content": "    unlockThreadedIO();",
          "new_line_content": "    assert(1 != 1); /* We should never reach this */",
          "content_same": false
        },
        {
          "line": 9484,
          "old_api": "lockThreadedIO",
          "new_api": "listLength",
          "old_text": "lockThreadedIO()",
          "new_text": "listLength(server.io_newjobs)",
          "old_line_content": "        lockThreadedIO();",
          "new_line_content": "        if (listLength(server.io_newjobs) == 0) {",
          "content_same": false
        },
        {
          "line": 9487,
          "old_api": "redisLog",
          "new_api": "pthread_self",
          "old_text": "redisLog(REDIS_DEBUG,\"Thread %ld exiting, nothing to do\",\n                (long) pthread_self())",
          "new_text": "pthread_self()",
          "old_line_content": "            redisLog(REDIS_DEBUG,\"Thread %ld exiting, nothing to do\",",
          "new_line_content": "                (long) pthread_self());",
          "content_same": false
        },
        {
          "line": 9497,
          "old_api": "pthread_self",
          "new_api": "listAddNodeTail",
          "old_text": "pthread_self()",
          "new_text": "listAddNodeTail(server.io_processing,j)",
          "old_line_content": "        j->thread = pthread_self();",
          "new_line_content": "        listAddNodeTail(server.io_processing,j);",
          "content_same": false
        },
        {
          "line": 9498,
          "old_api": "listAddNodeTail",
          "new_api": "listLast",
          "old_text": "listAddNodeTail(server.io_processing,j)",
          "new_text": "listLast(server.io_processing)",
          "old_line_content": "        listAddNodeTail(server.io_processing,j);",
          "new_line_content": "        ln = listLast(server.io_processing); /* We use ln later to remove it */",
          "content_same": false
        },
        {
          "line": 9499,
          "old_api": "listLast",
          "new_api": "unlockThreadedIO",
          "old_text": "listLast(server.io_processing)",
          "new_text": "unlockThreadedIO()",
          "old_line_content": "        ln = listLast(server.io_processing); /* We use ln later to remove it */",
          "new_line_content": "        unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 9500,
          "old_api": "unlockThreadedIO",
          "new_api": "redisLog",
          "old_text": "unlockThreadedIO()",
          "new_text": "redisLog(REDIS_DEBUG,\"Thread %ld got a new job (type %d): %p about key '%s'\",\n            (long) pthread_self(), j->type, (void*)j, (char*)j->key->ptr)",
          "old_line_content": "        unlockThreadedIO();",
          "new_line_content": "        redisLog(REDIS_DEBUG,\"Thread %ld got a new job (type %d): %p about key '%s'\",",
          "content_same": false
        },
        {
          "line": 9501,
          "old_api": "redisLog",
          "new_api": "pthread_self",
          "old_text": "redisLog(REDIS_DEBUG,\"Thread %ld got a new job (type %d): %p about key '%s'\",\n            (long) pthread_self(), j->type, (void*)j, (char*)j->key->ptr)",
          "new_text": "pthread_self()",
          "old_line_content": "        redisLog(REDIS_DEBUG,\"Thread %ld got a new job (type %d): %p about key '%s'\",",
          "new_line_content": "            (long) pthread_self(), j->type, (void*)j, (char*)j->key->ptr);",
          "content_same": false
        },
        {
          "line": 9508,
          "old_api": "fopen",
          "new_api": "rdbSavedObjectPages",
          "old_text": "fopen(\"/dev/null\",\"w+\")",
          "new_text": "rdbSavedObjectPages(j->val,fp)",
          "old_line_content": "            FILE *fp = fopen(\"/dev/null\",\"w+\");",
          "new_line_content": "            j->pages = rdbSavedObjectPages(j->val,fp);",
          "content_same": false
        },
        {
          "line": 9509,
          "old_api": "rdbSavedObjectPages",
          "new_api": "fclose",
          "old_text": "rdbSavedObjectPages(j->val,fp)",
          "new_text": "fclose(fp)",
          "old_line_content": "            j->pages = rdbSavedObjectPages(j->val,fp);",
          "new_line_content": "            fclose(fp);",
          "content_same": false
        },
        {
          "line": 9517,
          "old_api": "redisLog",
          "new_api": "pthread_self",
          "old_text": "redisLog(REDIS_DEBUG,\"Thread %ld completed the job: %p (key %s)\",\n            (long) pthread_self(), (void*)j, (char*)j->key->ptr)",
          "new_text": "pthread_self()",
          "old_line_content": "        redisLog(REDIS_DEBUG,\"Thread %ld completed the job: %p (key %s)\",",
          "new_line_content": "            (long) pthread_self(), (void*)j, (char*)j->key->ptr);",
          "content_same": false
        },
        {
          "line": 9518,
          "old_api": "pthread_self",
          "new_api": "lockThreadedIO",
          "old_text": "pthread_self()",
          "new_text": "lockThreadedIO()",
          "old_line_content": "            (long) pthread_self(), (void*)j, (char*)j->key->ptr);",
          "new_line_content": "        lockThreadedIO();",
          "content_same": false
        },
        {
          "line": 9519,
          "old_api": "lockThreadedIO",
          "new_api": "listDelNode",
          "old_text": "lockThreadedIO()",
          "new_text": "listDelNode(server.io_processing,ln)",
          "old_line_content": "        lockThreadedIO();",
          "new_line_content": "        listDelNode(server.io_processing,ln);",
          "content_same": false
        },
        {
          "line": 9520,
          "old_api": "listDelNode",
          "new_api": "listAddNodeTail",
          "old_text": "listDelNode(server.io_processing,ln)",
          "new_text": "listAddNodeTail(server.io_processed,j)",
          "old_line_content": "        listDelNode(server.io_processing,ln);",
          "new_line_content": "        listAddNodeTail(server.io_processed,j);",
          "content_same": false
        },
        {
          "line": 9521,
          "old_api": "listAddNodeTail",
          "new_api": "unlockThreadedIO",
          "old_text": "listAddNodeTail(server.io_processed,j)",
          "new_text": "unlockThreadedIO()",
          "old_line_content": "        listAddNodeTail(server.io_processed,j);",
          "new_line_content": "        unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 9535,
          "old_api": "sigemptyset",
          "new_api": "sigaddset",
          "old_text": "sigemptyset(&mask)",
          "new_text": "sigaddset(&mask,SIGCHLD)",
          "old_line_content": "    sigemptyset(&mask);",
          "new_line_content": "    sigaddset(&mask,SIGCHLD);",
          "content_same": false
        },
        {
          "line": 9538,
          "old_api": "sigaddset",
          "new_api": "pthread_sigmask",
          "old_text": "sigaddset(&mask,SIGPIPE)",
          "new_text": "pthread_sigmask(SIG_SETMASK, &mask, &omask)",
          "old_line_content": "    sigaddset(&mask,SIGPIPE);",
          "new_line_content": "    pthread_sigmask(SIG_SETMASK, &mask, &omask);",
          "content_same": false
        },
        {
          "line": 9539,
          "old_api": "pthread_sigmask",
          "new_api": "pthread_create",
          "old_text": "pthread_sigmask(SIG_SETMASK, &mask, &omask)",
          "new_text": "pthread_create(&thread,&server.io_threads_attr,IOThreadEntryPoint,NULL)",
          "old_line_content": "    pthread_sigmask(SIG_SETMASK, &mask, &omask);",
          "new_line_content": "    while ((err = pthread_create(&thread,&server.io_threads_attr,IOThreadEntryPoint,NULL)) != 0) {",
          "content_same": false
        },
        {
          "line": 9540,
          "old_api": "pthread_create",
          "new_api": "redisLog",
          "old_text": "pthread_create(&thread,&server.io_threads_attr,IOThreadEntryPoint,NULL)",
          "new_text": "redisLog(REDIS_WARNING,\"Unable to spawn an I/O thread: %s\",\n            strerror(err))",
          "old_line_content": "    while ((err = pthread_create(&thread,&server.io_threads_attr,IOThreadEntryPoint,NULL)) != 0) {",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Unable to spawn an I/O thread: %s\",",
          "content_same": false
        },
        {
          "line": 9541,
          "old_api": "redisLog",
          "new_api": "strerror",
          "old_text": "redisLog(REDIS_WARNING,\"Unable to spawn an I/O thread: %s\",\n            strerror(err))",
          "new_text": "strerror(err)",
          "old_line_content": "        redisLog(REDIS_WARNING,\"Unable to spawn an I/O thread: %s\",",
          "new_line_content": "            strerror(err));",
          "content_same": false
        },
        {
          "line": 9542,
          "old_api": "strerror",
          "new_api": "usleep",
          "old_text": "strerror(err)",
          "new_text": "usleep(1000000)",
          "old_line_content": "            strerror(err));",
          "new_line_content": "        usleep(1000000);",
          "content_same": false
        },
        {
          "line": 9555,
          "old_api": "lockThreadedIO",
          "new_api": "listLength",
          "old_text": "lockThreadedIO()",
          "new_text": "listLength(server.io_newjobs)",
          "old_line_content": "        lockThreadedIO();",
          "new_line_content": "        if (listLength(server.io_newjobs) == 0 &&",
          "content_same": false
        },
        {
          "line": 9567,
          "old_api": "listLength",
          "new_api": "unlockThreadedIO",
          "old_text": "listLength(server.io_processed)",
          "new_text": "unlockThreadedIO()",
          "old_line_content": "        io_processed_len = listLength(server.io_processed);",
          "new_line_content": "        unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 9570,
          "old_api": "vmThreadedIOCompletedJob",
          "new_api": "usleep",
          "old_text": "vmThreadedIOCompletedJob(NULL,server.io_ready_pipe_read,NULL,0)",
          "new_text": "usleep(1000)",
          "old_line_content": "            vmThreadedIOCompletedJob(NULL,server.io_ready_pipe_read,NULL,0);",
          "new_line_content": "            usleep(1000); /* 1 millisecond */",
          "content_same": false
        },
        {
          "line": 9615,
          "old_api": "lockThreadedIO",
          "new_api": "queueIOJob",
          "old_text": "lockThreadedIO()",
          "new_text": "queueIOJob(j)",
          "old_line_content": "    lockThreadedIO();",
          "new_line_content": "    queueIOJob(j);",
          "content_same": false
        },
        {
          "line": 9616,
          "old_api": "queueIOJob",
          "new_api": "unlockThreadedIO",
          "old_text": "queueIOJob(j)",
          "new_text": "unlockThreadedIO()",
          "old_line_content": "    queueIOJob(j);",
          "new_line_content": "    unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 9650,
          "old_api": "listAddNodeTail",
          "new_api": "incrRefCount",
          "old_text": "listAddNodeTail(c->io_keys,key)",
          "new_text": "incrRefCount(key)",
          "old_line_content": "    listAddNodeTail(c->io_keys,key);",
          "new_line_content": "    incrRefCount(key);",
          "content_same": false
        },
        {
          "line": 9659,
          "old_api": "listCreate",
          "new_api": "dictAdd",
          "old_text": "listCreate()",
          "new_text": "dictAdd(c->db->io_keys,key,l)",
          "old_line_content": "        l = listCreate();",
          "new_line_content": "        retval = dictAdd(c->db->io_keys,key,l);",
          "content_same": false
        },
        {
          "line": 9660,
          "old_api": "dictAdd",
          "new_api": "incrRefCount",
          "old_text": "dictAdd(c->db->io_keys,key,l)",
          "new_text": "incrRefCount(key)",
          "old_line_content": "        retval = dictAdd(c->db->io_keys,key,l);",
          "new_line_content": "        incrRefCount(key);",
          "content_same": false
        },
        {
          "line": 9661,
          "old_api": "incrRefCount",
          "new_api": "assert",
          "old_text": "incrRefCount(key)",
          "new_text": "assert(retval == DICT_OK)",
          "old_line_content": "        incrRefCount(key);",
          "new_line_content": "        assert(retval == DICT_OK);",
          "content_same": false
        },
        {
          "line": 9682,
          "old_api": "lockThreadedIO",
          "new_api": "queueIOJob",
          "old_text": "lockThreadedIO()",
          "new_text": "queueIOJob(j)",
          "old_line_content": "        lockThreadedIO();",
          "new_line_content": "        queueIOJob(j);",
          "content_same": false
        },
        {
          "line": 9683,
          "old_api": "queueIOJob",
          "new_api": "unlockThreadedIO",
          "old_text": "queueIOJob(j)",
          "new_text": "unlockThreadedIO()",
          "old_line_content": "        queueIOJob(j);",
          "new_line_content": "        unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 9697,
          "old_api": "redisAssert",
          "new_api": "waitForSwappedKey",
          "old_text": "redisAssert(j < argc)",
          "new_text": "waitForSwappedKey(c,argv[j])",
          "old_line_content": "        redisAssert(j < argc);",
          "new_line_content": "        waitForSwappedKey(c,argv[j]);",
          "content_same": false
        },
        {
          "line": 9781,
          "old_api": "listRewind",
          "new_api": "listNext",
          "old_text": "listRewind(c->io_keys,&li)",
          "new_text": "listNext(&li)",
          "old_line_content": "    listRewind(c->io_keys,&li);",
          "new_line_content": "    while ((ln = listNext(&li)) != NULL) {",
          "content_same": false
        },
        {
          "line": 9782,
          "old_api": "listNext",
          "new_api": "equalStringObjects",
          "old_text": "listNext(&li)",
          "new_text": "equalStringObjects(ln->value,key)",
          "old_line_content": "    while ((ln = listNext(&li)) != NULL) {",
          "new_line_content": "        if (equalStringObjects(ln->value,key)) {",
          "content_same": false
        },
        {
          "line": 9783,
          "old_api": "equalStringObjects",
          "new_api": "listDelNode",
          "old_text": "equalStringObjects(ln->value,key)",
          "new_text": "listDelNode(c->io_keys,ln)",
          "old_line_content": "        if (equalStringObjects(ln->value,key)) {",
          "new_line_content": "            listDelNode(c->io_keys,ln);",
          "content_same": false
        },
        {
          "line": 9791,
          "old_api": "dictFind",
          "new_api": "assert",
          "old_text": "dictFind(c->db->io_keys,key)",
          "new_text": "assert(de != NULL)",
          "old_line_content": "    de = dictFind(c->db->io_keys,key);",
          "new_line_content": "    assert(de != NULL);",
          "content_same": false
        },
        {
          "line": 9792,
          "old_api": "assert",
          "new_api": "dictGetEntryVal",
          "old_text": "assert(de != NULL)",
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "    assert(de != NULL);",
          "new_line_content": "    l = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 9793,
          "old_api": "dictGetEntryVal",
          "new_api": "listSearchKey",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "listSearchKey(l,c)",
          "old_line_content": "    l = dictGetEntryVal(de);",
          "new_line_content": "    ln = listSearchKey(l,c);",
          "content_same": false
        },
        {
          "line": 9794,
          "old_api": "listSearchKey",
          "new_api": "assert",
          "old_text": "listSearchKey(l,c)",
          "new_text": "assert(ln != NULL)",
          "old_line_content": "    ln = listSearchKey(l,c);",
          "new_line_content": "    assert(ln != NULL);",
          "content_same": false
        },
        {
          "line": 9795,
          "old_api": "assert",
          "new_api": "listDelNode",
          "old_text": "assert(ln != NULL)",
          "new_text": "listDelNode(l,ln)",
          "old_line_content": "    assert(ln != NULL);",
          "new_line_content": "    listDelNode(l,ln);",
          "content_same": false
        },
        {
          "line": 9796,
          "old_api": "listDelNode",
          "new_api": "listLength",
          "old_text": "listDelNode(l,ln)",
          "new_text": "listLength(l)",
          "old_line_content": "    listDelNode(l,ln);",
          "new_line_content": "    if (listLength(l) == 0)",
          "content_same": false
        },
        {
          "line": 9797,
          "old_api": "listLength",
          "new_api": "dictDelete",
          "old_text": "listLength(l)",
          "new_text": "dictDelete(c->db->io_keys,key)",
          "old_line_content": "    if (listLength(l) == 0)",
          "new_line_content": "        dictDelete(c->db->io_keys,key);",
          "content_same": false
        },
        {
          "line": 9812,
          "old_api": "dictGetEntryVal",
          "new_api": "listLength",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "listLength(l)",
          "old_line_content": "    l = dictGetEntryVal(de);",
          "new_line_content": "    len = listLength(l);",
          "content_same": false
        },
        {
          "line": 9831,
          "old_api": "getDecodedObject",
          "new_api": "strcasecmp",
          "old_text": "getDecodedObject(c->argv[3])",
          "new_text": "strcasecmp(c->argv[2]->ptr,\"dbfilename\")",
          "old_line_content": "    robj *o = getDecodedObject(c->argv[3]);",
          "new_line_content": "    if (!strcasecmp(c->argv[2]->ptr,\"dbfilename\")) {",
          "content_same": false
        },
        {
          "line": 9832,
          "old_api": "strcasecmp",
          "new_api": "zfree",
          "old_text": "strcasecmp(c->argv[2]->ptr,\"dbfilename\")",
          "new_text": "zfree(server.dbfilename)",
          "old_line_content": "    if (!strcasecmp(c->argv[2]->ptr,\"dbfilename\")) {",
          "new_line_content": "        zfree(server.dbfilename);",
          "content_same": false
        },
        {
          "line": 9833,
          "old_api": "zfree",
          "new_api": "zstrdup",
          "old_text": "zfree(server.dbfilename)",
          "new_text": "zstrdup(o->ptr)",
          "old_line_content": "        zfree(server.dbfilename);",
          "new_line_content": "        server.dbfilename = zstrdup(o->ptr);",
          "content_same": false
        },
        {
          "line": 9834,
          "old_api": "zstrdup",
          "new_api": "strcasecmp",
          "old_text": "zstrdup(o->ptr)",
          "new_text": "strcasecmp(c->argv[2]->ptr,\"requirepass\")",
          "old_line_content": "        server.dbfilename = zstrdup(o->ptr);",
          "new_line_content": "    } else if (!strcasecmp(c->argv[2]->ptr,\"requirepass\")) {",
          "content_same": false
        },
        {
          "line": 9835,
          "old_api": "strcasecmp",
          "new_api": "zfree",
          "old_text": "strcasecmp(c->argv[2]->ptr,\"requirepass\")",
          "new_text": "zfree(server.requirepass)",
          "old_line_content": "    } else if (!strcasecmp(c->argv[2]->ptr,\"requirepass\")) {",
          "new_line_content": "        zfree(server.requirepass);",
          "content_same": false
        },
        {
          "line": 9836,
          "old_api": "zfree",
          "new_api": "zstrdup",
          "old_text": "zfree(server.requirepass)",
          "new_text": "zstrdup(o->ptr)",
          "old_line_content": "        zfree(server.requirepass);",
          "new_line_content": "        server.requirepass = zstrdup(o->ptr);",
          "content_same": false
        },
        {
          "line": 9837,
          "old_api": "zstrdup",
          "new_api": "strcasecmp",
          "old_text": "zstrdup(o->ptr)",
          "new_text": "strcasecmp(c->argv[2]->ptr,\"masterauth\")",
          "old_line_content": "        server.requirepass = zstrdup(o->ptr);",
          "new_line_content": "    } else if (!strcasecmp(c->argv[2]->ptr,\"masterauth\")) {",
          "content_same": false
        },
        {
          "line": 9838,
          "old_api": "strcasecmp",
          "new_api": "zfree",
          "old_text": "strcasecmp(c->argv[2]->ptr,\"masterauth\")",
          "new_text": "zfree(server.masterauth)",
          "old_line_content": "    } else if (!strcasecmp(c->argv[2]->ptr,\"masterauth\")) {",
          "new_line_content": "        zfree(server.masterauth);",
          "content_same": false
        },
        {
          "line": 9839,
          "old_api": "zfree",
          "new_api": "zstrdup",
          "old_text": "zfree(server.masterauth)",
          "new_text": "zstrdup(o->ptr)",
          "old_line_content": "        zfree(server.masterauth);",
          "new_line_content": "        server.masterauth = zstrdup(o->ptr);",
          "content_same": false
        },
        {
          "line": 9840,
          "old_api": "zstrdup",
          "new_api": "strcasecmp",
          "old_text": "zstrdup(o->ptr)",
          "new_text": "strcasecmp(c->argv[2]->ptr,\"maxmemory\")",
          "old_line_content": "        server.masterauth = zstrdup(o->ptr);",
          "new_line_content": "    } else if (!strcasecmp(c->argv[2]->ptr,\"maxmemory\")) {",
          "content_same": false
        },
        {
          "line": 9841,
          "old_api": "strcasecmp",
          "new_api": "strtoll",
          "old_text": "strcasecmp(c->argv[2]->ptr,\"maxmemory\")",
          "new_text": "strtoll(o->ptr, NULL, 10)",
          "old_line_content": "    } else if (!strcasecmp(c->argv[2]->ptr,\"maxmemory\")) {",
          "new_line_content": "        server.maxmemory = strtoll(o->ptr, NULL, 10);",
          "content_same": false
        },
        {
          "line": 9842,
          "old_api": "strtoll",
          "new_api": "strcasecmp",
          "old_text": "strtoll(o->ptr, NULL, 10)",
          "new_text": "strcasecmp(c->argv[2]->ptr,\"appendfsync\")",
          "old_line_content": "        server.maxmemory = strtoll(o->ptr, NULL, 10);",
          "new_line_content": "    } else if (!strcasecmp(c->argv[2]->ptr,\"appendfsync\")) {",
          "content_same": false
        },
        {
          "line": 9883,
          "old_api": "strtoll",
          "new_api": "appendServerSaveParams",
          "old_text": "strtoll(v[j+1],NULL,10)",
          "new_text": "appendServerSaveParams(seconds, changes)",
          "old_line_content": "            changes = strtoll(v[j+1],NULL,10);",
          "new_line_content": "            appendServerSaveParams(seconds, changes);",
          "content_same": false
        },
        {
          "line": 9894,
          "old_api": "decrRefCount",
          "new_api": "addReply",
          "old_text": "decrRefCount(o)",
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "    decrRefCount(o);",
          "new_line_content": "    addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 9907,
          "old_api": "getDecodedObject",
          "new_api": "createObject",
          "old_text": "getDecodedObject(c->argv[2])",
          "new_text": "createObject(REDIS_STRING,NULL)",
          "old_line_content": "    robj *o = getDecodedObject(c->argv[2]);",
          "new_line_content": "    robj *lenobj = createObject(REDIS_STRING,NULL);",
          "content_same": false
        },
        {
          "line": 9912,
          "old_api": "addReply",
          "new_api": "decrRefCount",
          "old_text": "addReply(c,lenobj)",
          "new_text": "decrRefCount(lenobj)",
          "old_line_content": "    addReply(c,lenobj);",
          "new_line_content": "    decrRefCount(lenobj);",
          "content_same": false
        },
        {
          "line": 9915,
          "old_api": "stringmatch",
          "new_api": "addReplyBulkCString",
          "old_text": "stringmatch(pattern,\"dbfilename\",0)",
          "new_text": "addReplyBulkCString(c,\"dbfilename\")",
          "old_line_content": "    if (stringmatch(pattern,\"dbfilename\",0)) {",
          "new_line_content": "        addReplyBulkCString(c,\"dbfilename\");",
          "content_same": false
        },
        {
          "line": 9920,
          "old_api": "stringmatch",
          "new_api": "addReplyBulkCString",
          "old_text": "stringmatch(pattern,\"requirepass\",0)",
          "new_text": "addReplyBulkCString(c,\"requirepass\")",
          "old_line_content": "    if (stringmatch(pattern,\"requirepass\",0)) {",
          "new_line_content": "        addReplyBulkCString(c,\"requirepass\");",
          "content_same": false
        },
        {
          "line": 9925,
          "old_api": "stringmatch",
          "new_api": "addReplyBulkCString",
          "old_text": "stringmatch(pattern,\"masterauth\",0)",
          "new_text": "addReplyBulkCString(c,\"masterauth\")",
          "old_line_content": "    if (stringmatch(pattern,\"masterauth\",0)) {",
          "new_line_content": "        addReplyBulkCString(c,\"masterauth\");",
          "content_same": false
        },
        {
          "line": 9933,
          "old_api": "snprintf",
          "new_api": "addReplyBulkCString",
          "old_text": "snprintf(buf,128,\"%llu\\n\",server.maxmemory)",
          "new_text": "addReplyBulkCString(c,\"maxmemory\")",
          "old_line_content": "        snprintf(buf,128,\"%llu\\n\",server.maxmemory);",
          "new_line_content": "        addReplyBulkCString(c,\"maxmemory\");",
          "content_same": false
        },
        {
          "line": 9951,
          "old_api": "stringmatch",
          "new_api": "sdsempty",
          "old_text": "stringmatch(pattern,\"save\",0)",
          "new_text": "sdsempty()",
          "old_line_content": "    if (stringmatch(pattern,\"save\",0)) {",
          "new_line_content": "        sds buf = sdsempty();",
          "content_same": false
        },
        {
          "line": 9963,
          "old_api": "addReplyBulkCString",
          "new_api": "sdsfree",
          "old_text": "addReplyBulkCString(c,buf)",
          "new_text": "sdsfree(buf)",
          "old_line_content": "        addReplyBulkCString(c,buf);",
          "new_line_content": "        sdsfree(buf);",
          "content_same": false
        },
        {
          "line": 9967,
          "old_api": "decrRefCount",
          "new_api": "sdsempty",
          "old_text": "decrRefCount(o)",
          "new_text": "sdsempty()",
          "old_line_content": "    decrRefCount(o);",
          "new_line_content": "    lenobj->ptr = sdscatprintf(sdsempty(),\"*%d\\r\\n\",matches*2);",
          "content_same": false
        },
        {
          "line": 9974,
          "old_api": "configSetCommand",
          "new_api": "strcasecmp",
          "old_text": "configSetCommand(c)",
          "new_text": "strcasecmp(c->argv[1]->ptr,\"get\")",
          "old_line_content": "        configSetCommand(c);",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"get\")) {",
          "content_same": false
        },
        {
          "line": 9977,
          "old_api": "configGetCommand",
          "new_api": "strcasecmp",
          "old_text": "configGetCommand(c)",
          "new_text": "strcasecmp(c->argv[1]->ptr,\"resetstat\")",
          "old_line_content": "        configGetCommand(c);",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"resetstat\")) {",
          "content_same": false
        },
        {
          "line": 9983,
          "old_api": "time",
          "new_api": "addReply",
          "old_text": "time(NULL)",
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "        server.stat_starttime = time(NULL);",
          "new_line_content": "        addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 10002,
          "old_api": "decrRefCount",
          "new_api": "zfree",
          "old_text": "decrRefCount(pat->pattern)",
          "new_text": "zfree(pat)",
          "old_line_content": "    decrRefCount(pat->pattern);",
          "new_line_content": "    zfree(pat);",
          "content_same": false
        },
        {
          "line": 10027,
          "old_api": "listCreate",
          "new_api": "dictAdd",
          "old_text": "listCreate()",
          "new_text": "dictAdd(server.pubsub_channels,channel,clients)",
          "old_line_content": "            clients = listCreate();",
          "new_line_content": "            dictAdd(server.pubsub_channels,channel,clients);",
          "content_same": false
        },
        {
          "line": 10028,
          "old_api": "dictAdd",
          "new_api": "incrRefCount",
          "old_text": "dictAdd(server.pubsub_channels,channel,clients)",
          "new_text": "incrRefCount(channel)",
          "old_line_content": "            dictAdd(server.pubsub_channels,channel,clients);",
          "new_line_content": "            incrRefCount(channel);",
          "content_same": false
        },
        {
          "line": 10037,
          "old_api": "addReply",
          "new_api": "addReplyBulk",
          "old_text": "addReply(c,shared.subscribebulk)",
          "new_text": "addReplyBulk(c,channel)",
          "old_line_content": "    addReply(c,shared.subscribebulk);",
          "new_line_content": "    addReplyBulk(c,channel);",
          "content_same": false
        },
        {
          "line": 10038,
          "old_api": "addReplyBulk",
          "new_api": "listLength",
          "old_text": "addReplyBulk(c,channel)",
          "new_text": "listLength(c->pubsub_patterns)",
          "old_line_content": "    addReplyBulk(c,channel);",
          "new_line_content": "    addReplyLong(c,dictSize(c->pubsub_channels)+listLength(c->pubsub_patterns));",
          "content_same": false
        },
        {
          "line": 10057,
          "old_api": "dictFind",
          "new_api": "assert",
          "old_text": "dictFind(server.pubsub_channels,channel)",
          "new_text": "assert(de != NULL)",
          "old_line_content": "        de = dictFind(server.pubsub_channels,channel);",
          "new_line_content": "        assert(de != NULL);",
          "content_same": false
        },
        {
          "line": 10058,
          "old_api": "assert",
          "new_api": "dictGetEntryVal",
          "old_text": "assert(de != NULL)",
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "        assert(de != NULL);",
          "new_line_content": "        clients = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 10059,
          "old_api": "dictGetEntryVal",
          "new_api": "listSearchKey",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "listSearchKey(clients,c)",
          "old_line_content": "        clients = dictGetEntryVal(de);",
          "new_line_content": "        ln = listSearchKey(clients,c);",
          "content_same": false
        },
        {
          "line": 10060,
          "old_api": "listSearchKey",
          "new_api": "assert",
          "old_text": "listSearchKey(clients,c)",
          "new_text": "assert(ln != NULL)",
          "old_line_content": "        ln = listSearchKey(clients,c);",
          "new_line_content": "        assert(ln != NULL);",
          "content_same": false
        },
        {
          "line": 10061,
          "old_api": "assert",
          "new_api": "listDelNode",
          "old_text": "assert(ln != NULL)",
          "new_text": "listDelNode(clients,ln)",
          "old_line_content": "        assert(ln != NULL);",
          "new_line_content": "        listDelNode(clients,ln);",
          "content_same": false
        },
        {
          "line": 10062,
          "old_api": "listDelNode",
          "new_api": "listLength",
          "old_text": "listDelNode(clients,ln)",
          "new_text": "listLength(clients)",
          "old_line_content": "        listDelNode(clients,ln);",
          "new_line_content": "        if (listLength(clients) == 0) {",
          "content_same": false
        },
        {
          "line": 10073,
          "old_api": "addReply",
          "new_api": "addReplyBulk",
          "old_text": "addReply(c,shared.unsubscribebulk)",
          "new_text": "addReplyBulk(c,channel)",
          "old_line_content": "        addReply(c,shared.unsubscribebulk);",
          "new_line_content": "        addReplyBulk(c,channel);",
          "content_same": false
        },
        {
          "line": 10074,
          "old_api": "addReplyBulk",
          "new_api": "dictSize",
          "old_text": "addReplyBulk(c,channel)",
          "new_text": "dictSize(c->pubsub_channels)",
          "old_line_content": "        addReplyBulk(c,channel);",
          "new_line_content": "        addReplyLong(c,dictSize(c->pubsub_channels)+",
          "content_same": false
        },
        {
          "line": 10075,
          "old_api": "dictSize",
          "new_api": "listLength",
          "old_text": "dictSize(c->pubsub_channels)",
          "new_text": "listLength(c->pubsub_patterns)",
          "old_line_content": "        addReplyLong(c,dictSize(c->pubsub_channels)+",
          "new_line_content": "                       listLength(c->pubsub_patterns));",
          "content_same": false
        },
        {
          "line": 10090,
          "old_api": "listAddNodeTail",
          "new_api": "incrRefCount",
          "old_text": "listAddNodeTail(c->pubsub_patterns,pattern)",
          "new_text": "incrRefCount(pattern)",
          "old_line_content": "        listAddNodeTail(c->pubsub_patterns,pattern);",
          "new_line_content": "        incrRefCount(pattern);",
          "content_same": false
        },
        {
          "line": 10091,
          "old_api": "incrRefCount",
          "new_api": "zmalloc",
          "old_text": "incrRefCount(pattern)",
          "new_text": "zmalloc(sizeof(*pat))",
          "old_line_content": "        incrRefCount(pattern);",
          "new_line_content": "        pat = zmalloc(sizeof(*pat));",
          "content_same": false
        },
        {
          "line": 10092,
          "old_api": "zmalloc",
          "new_api": "getDecodedObject",
          "old_text": "zmalloc(sizeof(*pat))",
          "new_text": "getDecodedObject(pattern)",
          "old_line_content": "        pat = zmalloc(sizeof(*pat));",
          "new_line_content": "        pat->pattern = getDecodedObject(pattern);",
          "content_same": false
        },
        {
          "line": 10099,
          "old_api": "addReply",
          "new_api": "addReplyBulk",
          "old_text": "addReply(c,shared.psubscribebulk)",
          "new_text": "addReplyBulk(c,pattern)",
          "old_line_content": "    addReply(c,shared.psubscribebulk);",
          "new_line_content": "    addReplyBulk(c,pattern);",
          "content_same": false
        },
        {
          "line": 10100,
          "old_api": "addReplyBulk",
          "new_api": "listLength",
          "old_text": "addReplyBulk(c,pattern)",
          "new_text": "listLength(c->pubsub_patterns)",
          "old_line_content": "    addReplyBulk(c,pattern);",
          "new_line_content": "    addReplyLong(c,dictSize(c->pubsub_channels)+listLength(c->pubsub_patterns));",
          "content_same": false
        },
        {
          "line": 10112,
          "old_api": "incrRefCount",
          "new_api": "listSearchKey",
          "old_text": "incrRefCount(pattern)",
          "new_text": "listSearchKey(c->pubsub_patterns,pattern)",
          "old_line_content": "    incrRefCount(pattern); /* Protect the object. May be the same we remove */",
          "new_line_content": "    if ((ln = listSearchKey(c->pubsub_patterns,pattern)) != NULL) {",
          "content_same": false
        },
        {
          "line": 10118,
          "old_api": "listSearchKey",
          "new_api": "listDelNode",
          "old_text": "listSearchKey(server.pubsub_patterns,&pat)",
          "new_text": "listDelNode(server.pubsub_patterns,ln)",
          "old_line_content": "        ln = listSearchKey(server.pubsub_patterns,&pat);",
          "new_line_content": "        listDelNode(server.pubsub_patterns,ln);",
          "content_same": false
        },
        {
          "line": 10124,
          "old_api": "addReply",
          "new_api": "addReplyBulk",
          "old_text": "addReply(c,shared.punsubscribebulk)",
          "new_text": "addReplyBulk(c,pattern)",
          "old_line_content": "        addReply(c,shared.punsubscribebulk);",
          "new_line_content": "        addReplyBulk(c,pattern);",
          "content_same": false
        },
        {
          "line": 10125,
          "old_api": "addReplyBulk",
          "new_api": "dictSize",
          "old_text": "addReplyBulk(c,pattern)",
          "new_text": "dictSize(c->pubsub_channels)",
          "old_line_content": "        addReplyBulk(c,pattern);",
          "new_line_content": "        addReplyLong(c,dictSize(c->pubsub_channels)+",
          "content_same": false
        },
        {
          "line": 10126,
          "old_api": "dictSize",
          "new_api": "listLength",
          "old_text": "dictSize(c->pubsub_channels)",
          "new_text": "listLength(c->pubsub_patterns)",
          "old_line_content": "        addReplyLong(c,dictSize(c->pubsub_channels)+",
          "new_line_content": "                       listLength(c->pubsub_patterns));",
          "content_same": false
        },
        {
          "line": 10140,
          "old_api": "dictNext",
          "new_api": "dictGetEntryKey",
          "old_text": "dictNext(di)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "    while((de = dictNext(di)) != NULL) {",
          "new_line_content": "        robj *channel = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 10156,
          "old_api": "listRewind",
          "new_api": "listNext",
          "old_text": "listRewind(c->pubsub_patterns,&li)",
          "new_text": "listNext(&li)",
          "old_line_content": "    listRewind(c->pubsub_patterns,&li);",
          "new_line_content": "    while ((ln = listNext(&li)) != NULL) {",
          "content_same": false
        },
        {
          "line": 10179,
          "old_api": "listRewind",
          "new_api": "listNext",
          "old_text": "listRewind(list,&li)",
          "new_text": "listNext(&li)",
          "old_line_content": "        listRewind(list,&li);",
          "new_line_content": "        while ((ln = listNext(&li)) != NULL) {",
          "content_same": false
        },
        {
          "line": 10184,
          "old_api": "addReply",
          "new_api": "addReplyBulk",
          "old_text": "addReply(c,shared.messagebulk)",
          "new_text": "addReplyBulk(c,channel)",
          "old_line_content": "            addReply(c,shared.messagebulk);",
          "new_line_content": "            addReplyBulk(c,channel);",
          "content_same": false
        },
        {
          "line": 10191,
          "old_api": "listLength",
          "new_api": "listRewind",
          "old_text": "listLength(server.pubsub_patterns)",
          "new_text": "listRewind(server.pubsub_patterns,&li)",
          "old_line_content": "    if (listLength(server.pubsub_patterns)) {",
          "new_line_content": "        listRewind(server.pubsub_patterns,&li);",
          "content_same": false
        },
        {
          "line": 10192,
          "old_api": "listRewind",
          "new_api": "getDecodedObject",
          "old_text": "listRewind(server.pubsub_patterns,&li)",
          "new_text": "getDecodedObject(channel)",
          "old_line_content": "        listRewind(server.pubsub_patterns,&li);",
          "new_line_content": "        channel = getDecodedObject(channel);",
          "content_same": false
        },
        {
          "line": 10193,
          "old_api": "getDecodedObject",
          "new_api": "listNext",
          "old_text": "getDecodedObject(channel)",
          "new_text": "listNext(&li)",
          "old_line_content": "        channel = getDecodedObject(channel);",
          "new_line_content": "        while ((ln = listNext(&li)) != NULL) {",
          "content_same": false
        },
        {
          "line": 10197,
          "old_api": "stringmatchlen",
          "new_api": "sdslen",
          "old_text": "stringmatchlen((char*)pat->pattern->ptr,\n                                sdslen(pat->pattern->ptr),\n                                (char*)channel->ptr,\n                                sdslen(channel->ptr),0)",
          "new_text": "sdslen(pat->pattern->ptr)",
          "old_line_content": "            if (stringmatchlen((char*)pat->pattern->ptr,",
          "new_line_content": "                                sdslen(pat->pattern->ptr),",
          "content_same": false
        },
        {
          "line": 10200,
          "old_api": "sdslen",
          "new_api": "addReply",
          "old_text": "sdslen(channel->ptr)",
          "new_text": "addReply(pat->client,shared.mbulk4)",
          "old_line_content": "                                sdslen(channel->ptr),0)) {",
          "new_line_content": "                addReply(pat->client,shared.mbulk4);",
          "content_same": false
        },
        {
          "line": 10202,
          "old_api": "addReply",
          "new_api": "addReplyBulk",
          "old_text": "addReply(pat->client,shared.pmessagebulk)",
          "new_text": "addReplyBulk(pat->client,pat->pattern)",
          "old_line_content": "                addReply(pat->client,shared.pmessagebulk);",
          "new_line_content": "                addReplyBulk(pat->client,pat->pattern);",
          "content_same": false
        },
        {
          "line": 10253,
          "old_api": "pubsubPublishMessage",
          "new_api": "addReplyLong",
          "old_text": "pubsubPublishMessage(c->argv[1],c->argv[2])",
          "new_text": "addReplyLong(c,receivers)",
          "old_line_content": "    int receivers = pubsubPublishMessage(c->argv[1],c->argv[2]);",
          "new_line_content": "    addReplyLong(c,receivers);",
          "content_same": false
        },
        {
          "line": 10270,
          "old_api": "SHA1Init",
          "new_api": "SHA1Update",
          "old_text": "SHA1Init(&ctx)",
          "new_text": "SHA1Update(&ctx,s,len)",
          "old_line_content": "    SHA1Init(&ctx);",
          "new_line_content": "    SHA1Update(&ctx,s,len);",
          "content_same": false
        },
        {
          "line": 10271,
          "old_api": "SHA1Update",
          "new_api": "SHA1Final",
          "old_text": "SHA1Update(&ctx,s,len)",
          "new_text": "SHA1Final(hash,&ctx)",
          "old_line_content": "    SHA1Update(&ctx,s,len);",
          "new_line_content": "    SHA1Final(hash,&ctx);",
          "content_same": false
        },
        {
          "line": 10279,
          "old_api": "getDecodedObject",
          "new_api": "sdslen",
          "old_text": "getDecodedObject(o)",
          "new_text": "sdslen(o->ptr)",
          "old_line_content": "    o = getDecodedObject(o);",
          "new_line_content": "    xorDigest(digest,o->ptr,sdslen(o->ptr));",
          "content_same": false
        },
        {
          "line": 10280,
          "old_api": "sdslen",
          "new_api": "decrRefCount",
          "old_text": "sdslen(o->ptr)",
          "new_text": "decrRefCount(o)",
          "old_line_content": "    xorDigest(digest,o->ptr,sdslen(o->ptr));",
          "new_line_content": "    decrRefCount(o);",
          "content_same": false
        },
        {
          "line": 10302,
          "old_api": "xorDigest",
          "new_api": "SHA1Init",
          "old_text": "xorDigest(digest,s,len)",
          "new_text": "SHA1Init(&ctx)",
          "old_line_content": "    xorDigest(digest,s,len);",
          "new_line_content": "    SHA1Init(&ctx);",
          "content_same": false
        },
        {
          "line": 10303,
          "old_api": "SHA1Init",
          "new_api": "SHA1Update",
          "old_text": "SHA1Init(&ctx)",
          "new_text": "SHA1Update(&ctx,digest,20)",
          "old_line_content": "    SHA1Init(&ctx);",
          "new_line_content": "    SHA1Update(&ctx,digest,20);",
          "content_same": false
        },
        {
          "line": 10304,
          "old_api": "SHA1Update",
          "new_api": "SHA1Final",
          "old_text": "SHA1Update(&ctx,digest,20)",
          "new_text": "SHA1Final(digest,&ctx)",
          "old_line_content": "    SHA1Update(&ctx,digest,20);",
          "new_line_content": "    SHA1Final(digest,&ctx);",
          "content_same": false
        },
        {
          "line": 10309,
          "old_api": "getDecodedObject",
          "new_api": "sdslen",
          "old_text": "getDecodedObject(o)",
          "new_text": "sdslen(o->ptr)",
          "old_line_content": "    o = getDecodedObject(o);",
          "new_line_content": "    mixDigest(digest,o->ptr,sdslen(o->ptr));",
          "content_same": false
        },
        {
          "line": 10310,
          "old_api": "sdslen",
          "new_api": "decrRefCount",
          "old_text": "sdslen(o->ptr)",
          "new_text": "decrRefCount(o)",
          "old_line_content": "    mixDigest(digest,o->ptr,sdslen(o->ptr));",
          "new_line_content": "    decrRefCount(o);",
          "content_same": false
        },
        {
          "line": 10333,
          "old_api": "dictSize",
          "new_api": "dictGetIterator",
          "old_text": "dictSize(db->dict)",
          "new_text": "dictGetIterator(db->dict)",
          "old_line_content": "        if (dictSize(db->dict) == 0) continue;",
          "new_line_content": "        di = dictGetIterator(db->dict);",
          "content_same": false
        },
        {
          "line": 10338,
          "old_api": "htonl",
          "new_api": "mixDigest",
          "old_text": "htonl(j)",
          "new_text": "mixDigest(final,&aux,sizeof(aux))",
          "old_line_content": "        aux = htonl(j);",
          "new_line_content": "        mixDigest(final,&aux,sizeof(aux));",
          "content_same": false
        },
        {
          "line": 10346,
          "old_api": "memset",
          "new_api": "dictGetEntryKey",
          "old_text": "memset(digest,0,20)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "            memset(digest,0,20); /* This key-val digest */",
          "new_line_content": "            key = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 10347,
          "old_api": "dictGetEntryKey",
          "new_api": "mixObjectDigest",
          "old_text": "dictGetEntryKey(de)",
          "new_text": "mixObjectDigest(digest,key)",
          "old_line_content": "            key = dictGetEntryKey(de);",
          "new_line_content": "            mixObjectDigest(digest,key);",
          "content_same": false
        },
        {
          "line": 10351,
          "old_api": "dictGetEntryVal",
          "new_api": "incrRefCount",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "incrRefCount(o)",
          "old_line_content": "                o = dictGetEntryVal(de);",
          "new_line_content": "                incrRefCount(o);",
          "content_same": false
        },
        {
          "line": 10356,
          "old_api": "htonl",
          "new_api": "mixDigest",
          "old_text": "htonl(o->type)",
          "new_text": "mixDigest(digest,&aux,sizeof(aux))",
          "old_line_content": "            aux = htonl(o->type);",
          "new_line_content": "            mixDigest(digest,&aux,sizeof(aux));",
          "content_same": false
        },
        {
          "line": 10357,
          "old_api": "mixDigest",
          "new_api": "getExpire",
          "old_text": "mixDigest(digest,&aux,sizeof(aux))",
          "new_text": "getExpire(db,key)",
          "old_line_content": "            mixDigest(digest,&aux,sizeof(aux));",
          "new_line_content": "            expiretime = getExpire(db,key);",
          "content_same": false
        },
        {
          "line": 10368,
          "old_api": "listRewind",
          "new_api": "listNext",
          "old_text": "listRewind(list,&li)",
          "new_text": "listNext(&li)",
          "old_line_content": "                listRewind(list,&li);",
          "new_line_content": "                while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 10369,
          "old_api": "listNext",
          "new_api": "listNodeValue",
          "old_text": "listNext(&li)",
          "new_text": "listNodeValue(ln)",
          "old_line_content": "                while((ln = listNext(&li))) {",
          "new_line_content": "                    robj *eleobj = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 10379,
          "old_api": "dictNext",
          "new_api": "dictGetEntryKey",
          "old_text": "dictNext(di)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "                while((de = dictNext(di)) != NULL) {",
          "new_line_content": "                    robj *eleobj = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 10390,
          "old_api": "dictNext",
          "new_api": "dictGetEntryKey",
          "old_text": "dictNext(di)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "                while((de = dictNext(di)) != NULL) {",
          "new_line_content": "                    robj *eleobj = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 10391,
          "old_api": "dictGetEntryKey",
          "new_api": "dictGetEntryVal",
          "old_text": "dictGetEntryKey(de)",
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "                    robj *eleobj = dictGetEntryKey(de);",
          "new_line_content": "                    double *score = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 10395,
          "old_api": "snprintf",
          "new_api": "memset",
          "old_text": "snprintf(buf,sizeof(buf),\"%.17g\",*score)",
          "new_text": "memset(eledigest,0,20)",
          "old_line_content": "                    snprintf(buf,sizeof(buf),\"%.17g\",*score);",
          "new_line_content": "                    memset(eledigest,0,20);",
          "content_same": false
        },
        {
          "line": 10396,
          "old_api": "memset",
          "new_api": "mixObjectDigest",
          "old_text": "memset(eledigest,0,20)",
          "new_text": "mixObjectDigest(eledigest,eleobj)",
          "old_line_content": "                    memset(eledigest,0,20);",
          "new_line_content": "                    mixObjectDigest(eledigest,eleobj);",
          "content_same": false
        },
        {
          "line": 10397,
          "old_api": "mixObjectDigest",
          "new_api": "strlen",
          "old_text": "mixObjectDigest(eledigest,eleobj)",
          "new_text": "strlen(buf)",
          "old_line_content": "                    mixObjectDigest(eledigest,eleobj);",
          "new_line_content": "                    mixDigest(eledigest,buf,strlen(buf));",
          "content_same": false
        },
        {
          "line": 10398,
          "old_api": "strlen",
          "new_api": "xorDigest",
          "old_text": "strlen(buf)",
          "new_text": "xorDigest(digest,eledigest,20)",
          "old_line_content": "                    mixDigest(eledigest,buf,strlen(buf));",
          "new_line_content": "                    xorDigest(digest,eledigest,20);",
          "content_same": false
        },
        {
          "line": 10406,
          "old_api": "hashInitIterator",
          "new_api": "hashNext",
          "old_text": "hashInitIterator(o)",
          "new_text": "hashNext(hi)",
          "old_line_content": "                hi = hashInitIterator(o);",
          "new_line_content": "                while (hashNext(hi) != REDIS_ERR) {",
          "content_same": false
        },
        {
          "line": 10410,
          "old_api": "memset",
          "new_api": "hashCurrent",
          "old_text": "memset(eledigest,0,20)",
          "new_text": "hashCurrent(hi,REDIS_HASH_KEY)",
          "old_line_content": "                    memset(eledigest,0,20);",
          "new_line_content": "                    obj = hashCurrent(hi,REDIS_HASH_KEY);",
          "content_same": false
        },
        {
          "line": 10411,
          "old_api": "hashCurrent",
          "new_api": "mixObjectDigest",
          "old_text": "hashCurrent(hi,REDIS_HASH_KEY)",
          "new_text": "mixObjectDigest(eledigest,obj)",
          "old_line_content": "                    obj = hashCurrent(hi,REDIS_HASH_KEY);",
          "new_line_content": "                    mixObjectDigest(eledigest,obj);",
          "content_same": false
        },
        {
          "line": 10412,
          "old_api": "mixObjectDigest",
          "new_api": "decrRefCount",
          "old_text": "mixObjectDigest(eledigest,obj)",
          "new_text": "decrRefCount(obj)",
          "old_line_content": "                    mixObjectDigest(eledigest,obj);",
          "new_line_content": "                    decrRefCount(obj);",
          "content_same": false
        },
        {
          "line": 10413,
          "old_api": "decrRefCount",
          "new_api": "hashCurrent",
          "old_text": "decrRefCount(obj)",
          "new_text": "hashCurrent(hi,REDIS_HASH_VALUE)",
          "old_line_content": "                    decrRefCount(obj);",
          "new_line_content": "                    obj = hashCurrent(hi,REDIS_HASH_VALUE);",
          "content_same": false
        },
        {
          "line": 10414,
          "old_api": "hashCurrent",
          "new_api": "mixObjectDigest",
          "old_text": "hashCurrent(hi,REDIS_HASH_VALUE)",
          "new_text": "mixObjectDigest(eledigest,obj)",
          "old_line_content": "                    obj = hashCurrent(hi,REDIS_HASH_VALUE);",
          "new_line_content": "                    mixObjectDigest(eledigest,obj);",
          "content_same": false
        },
        {
          "line": 10415,
          "old_api": "mixObjectDigest",
          "new_api": "decrRefCount",
          "old_text": "mixObjectDigest(eledigest,obj)",
          "new_text": "decrRefCount(obj)",
          "old_line_content": "                    mixObjectDigest(eledigest,obj);",
          "new_line_content": "                    decrRefCount(obj);",
          "content_same": false
        },
        {
          "line": 10416,
          "old_api": "decrRefCount",
          "new_api": "xorDigest",
          "old_text": "decrRefCount(obj)",
          "new_text": "xorDigest(digest,eledigest,20)",
          "old_line_content": "                    decrRefCount(obj);",
          "new_line_content": "                    xorDigest(digest,eledigest,20);",
          "content_same": false
        },
        {
          "line": 10436,
          "old_api": "strcasecmp",
          "new_api": "rdbSave",
          "old_text": "strcasecmp(c->argv[1]->ptr,\"reload\")",
          "new_text": "rdbSave(server.dbfilename)",
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"reload\")) {",
          "new_line_content": "        if (rdbSave(server.dbfilename) != REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 10437,
          "old_api": "rdbSave",
          "new_api": "addReply",
          "old_text": "rdbSave(server.dbfilename)",
          "new_text": "addReply(c,shared.err)",
          "old_line_content": "        if (rdbSave(server.dbfilename) != REDIS_OK) {",
          "new_line_content": "            addReply(c,shared.err);",
          "content_same": false
        },
        {
          "line": 10441,
          "old_api": "emptyDb",
          "new_api": "rdbLoad",
          "old_text": "emptyDb()",
          "new_text": "rdbLoad(server.dbfilename)",
          "old_line_content": "        emptyDb();",
          "new_line_content": "        if (rdbLoad(server.dbfilename) != REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 10442,
          "old_api": "rdbLoad",
          "new_api": "addReply",
          "old_text": "rdbLoad(server.dbfilename)",
          "new_text": "addReply(c,shared.err)",
          "old_line_content": "        if (rdbLoad(server.dbfilename) != REDIS_OK) {",
          "new_line_content": "            addReply(c,shared.err);",
          "content_same": false
        },
        {
          "line": 10446,
          "old_api": "redisLog",
          "new_api": "addReply",
          "old_text": "redisLog(REDIS_WARNING,\"DB reloaded by DEBUG RELOAD\")",
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "        redisLog(REDIS_WARNING,\"DB reloaded by DEBUG RELOAD\");",
          "new_line_content": "        addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 10447,
          "old_api": "addReply",
          "new_api": "strcasecmp",
          "old_text": "addReply(c,shared.ok)",
          "new_text": "strcasecmp(c->argv[1]->ptr,\"loadaof\")",
          "old_line_content": "        addReply(c,shared.ok);",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"loadaof\")) {",
          "content_same": false
        },
        {
          "line": 10448,
          "old_api": "strcasecmp",
          "new_api": "emptyDb",
          "old_text": "strcasecmp(c->argv[1]->ptr,\"loadaof\")",
          "new_text": "emptyDb()",
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"loadaof\")) {",
          "new_line_content": "        emptyDb();",
          "content_same": false
        },
        {
          "line": 10449,
          "old_api": "emptyDb",
          "new_api": "loadAppendOnlyFile",
          "old_text": "emptyDb()",
          "new_text": "loadAppendOnlyFile(server.appendfilename)",
          "old_line_content": "        emptyDb();",
          "new_line_content": "        if (loadAppendOnlyFile(server.appendfilename) != REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 10450,
          "old_api": "loadAppendOnlyFile",
          "new_api": "addReply",
          "old_text": "loadAppendOnlyFile(server.appendfilename)",
          "new_text": "addReply(c,shared.err)",
          "old_line_content": "        if (loadAppendOnlyFile(server.appendfilename) != REDIS_OK) {",
          "new_line_content": "            addReply(c,shared.err);",
          "content_same": false
        },
        {
          "line": 10454,
          "old_api": "redisLog",
          "new_api": "addReply",
          "old_text": "redisLog(REDIS_WARNING,\"Append Only File loaded by DEBUG LOADAOF\")",
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "        redisLog(REDIS_WARNING,\"Append Only File loaded by DEBUG LOADAOF\");",
          "new_line_content": "        addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 10455,
          "old_api": "addReply",
          "new_api": "strcasecmp",
          "old_text": "addReply(c,shared.ok)",
          "new_text": "strcasecmp(c->argv[1]->ptr,\"object\")",
          "old_line_content": "        addReply(c,shared.ok);",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"object\") && c->argc == 3) {",
          "content_same": false
        },
        {
          "line": 10456,
          "old_api": "strcasecmp",
          "new_api": "dictFind",
          "old_text": "strcasecmp(c->argv[1]->ptr,\"object\")",
          "new_text": "dictFind(c->db->dict,c->argv[2])",
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"object\") && c->argc == 3) {",
          "new_line_content": "        dictEntry *de = dictFind(c->db->dict,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 10464,
          "old_api": "dictGetEntryKey",
          "new_api": "dictGetEntryVal",
          "old_text": "dictGetEntryKey(de)",
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "        key = dictGetEntryKey(de);",
          "new_line_content": "        val = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 10489,
          "old_api": "strcasecmp",
          "new_api": "lookupKeyRead",
          "old_text": "strcasecmp(c->argv[1]->ptr,\"swapin\")",
          "new_text": "lookupKeyRead(c->db,c->argv[2])",
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"swapin\") && c->argc == 3) {",
          "new_line_content": "        lookupKeyRead(c->db,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 10490,
          "old_api": "lookupKeyRead",
          "new_api": "addReply",
          "old_text": "lookupKeyRead(c->db,c->argv[2])",
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "        lookupKeyRead(c->db,c->argv[2]);",
          "new_line_content": "        addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 10491,
          "old_api": "addReply",
          "new_api": "strcasecmp",
          "old_text": "addReply(c,shared.ok)",
          "new_text": "strcasecmp(c->argv[1]->ptr,\"swapout\")",
          "old_line_content": "        addReply(c,shared.ok);",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"swapout\") && c->argc == 3) {",
          "content_same": false
        },
        {
          "line": 10492,
          "old_api": "strcasecmp",
          "new_api": "dictFind",
          "old_text": "strcasecmp(c->argv[1]->ptr,\"swapout\")",
          "new_text": "dictFind(c->db->dict,c->argv[2])",
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"swapout\") && c->argc == 3) {",
          "new_line_content": "        dictEntry *de = dictFind(c->db->dict,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 10504,
          "old_api": "dictGetEntryKey",
          "new_api": "dictGetEntryVal",
          "old_text": "dictGetEntryKey(de)",
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "        key = dictGetEntryKey(de);",
          "new_line_content": "        val = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 10508,
          "old_api": "dupStringObject",
          "new_api": "decrRefCount",
          "old_text": "dupStringObject(key)",
          "new_text": "decrRefCount(key)",
          "old_line_content": "            robj *newkey = dupStringObject(key);",
          "new_line_content": "            decrRefCount(key);",
          "content_same": false
        },
        {
          "line": 10509,
          "old_api": "decrRefCount",
          "new_api": "dictGetEntryKey",
          "old_text": "decrRefCount(key)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "            decrRefCount(key);",
          "new_line_content": "            key = dictGetEntryKey(de) = newkey;",
          "content_same": false
        },
        {
          "line": 10514,
          "old_api": "sdsnew",
          "new_api": "vmSwapObjectBlocking",
          "old_text": "sdsnew(\"-ERR This key is not in memory\\r\\n\")",
          "new_text": "vmSwapObjectBlocking(key,val)",
          "old_line_content": "            addReplySds(c,sdsnew(\"-ERR This key is not in memory\\r\\n\"));",
          "new_line_content": "        } else if (vmSwapObjectBlocking(key,val) == REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 10515,
          "old_api": "vmSwapObjectBlocking",
          "new_api": "dictGetEntryVal",
          "old_text": "vmSwapObjectBlocking(key,val)",
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "        } else if (vmSwapObjectBlocking(key,val) == REDIS_OK) {",
          "new_line_content": "            dictGetEntryVal(de) = NULL;",
          "content_same": false
        },
        {
          "line": 10516,
          "old_api": "dictGetEntryVal",
          "new_api": "addReply",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "            dictGetEntryVal(de) = NULL;",
          "new_line_content": "            addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 10529,
          "old_api": "snprintf",
          "new_api": "strlen",
          "old_text": "snprintf(buf,sizeof(buf),\"key:%lu\",j)",
          "new_text": "strlen(buf)",
          "old_line_content": "            snprintf(buf,sizeof(buf),\"key:%lu\",j);",
          "new_line_content": "            key = createStringObject(buf,strlen(buf));",
          "content_same": false
        },
        {
          "line": 10530,
          "old_api": "strlen",
          "new_api": "lookupKeyRead",
          "old_text": "strlen(buf)",
          "new_text": "lookupKeyRead(c->db,key)",
          "old_line_content": "            key = createStringObject(buf,strlen(buf));",
          "new_line_content": "            if (lookupKeyRead(c->db,key) != NULL) {",
          "content_same": false
        },
        {
          "line": 10531,
          "old_api": "lookupKeyRead",
          "new_api": "decrRefCount",
          "old_text": "lookupKeyRead(c->db,key)",
          "new_text": "decrRefCount(key)",
          "old_line_content": "            if (lookupKeyRead(c->db,key) != NULL) {",
          "new_line_content": "                decrRefCount(key);",
          "content_same": false
        },
        {
          "line": 10535,
          "old_api": "snprintf",
          "new_api": "strlen",
          "old_text": "snprintf(buf,sizeof(buf),\"value:%lu\",j)",
          "new_text": "strlen(buf)",
          "old_line_content": "            snprintf(buf,sizeof(buf),\"value:%lu\",j);",
          "new_line_content": "            val = createStringObject(buf,strlen(buf));",
          "content_same": false
        },
        {
          "line": 10536,
          "old_api": "strlen",
          "new_api": "dictAdd",
          "old_text": "strlen(buf)",
          "new_text": "dictAdd(c->db->dict,key,val)",
          "old_line_content": "            val = createStringObject(buf,strlen(buf));",
          "new_line_content": "            dictAdd(c->db->dict,key,val);",
          "content_same": false
        },
        {
          "line": 10539,
          "old_api": "addReply",
          "new_api": "strcasecmp",
          "old_text": "addReply(c,shared.ok)",
          "new_text": "strcasecmp(c->argv[1]->ptr,\"digest\")",
          "old_line_content": "        addReply(c,shared.ok);",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"digest\") && c->argc == 2) {",
          "content_same": false
        },
        {
          "line": 10549,
          "old_api": "sdscatlen",
          "new_api": "addReplySds",
          "old_text": "sdscatlen(d,\"\\r\\n\",2)",
          "new_text": "addReplySds(c,d)",
          "old_line_content": "        d = sdscatlen(d,\"\\r\\n\",2);",
          "new_line_content": "        addReplySds(c,d);",
          "content_same": false
        },
        {
          "line": 10583,
          "old_api": "fgets",
          "new_api": "fclose",
          "old_text": "fgets(buf,64,fp)",
          "new_text": "fclose(fp)",
          "old_line_content": "    if (fgets(buf,64,fp) == NULL) {",
          "new_line_content": "        fclose(fp);",
          "content_same": false
        },
        {
          "line": 10593,
          "old_api": "linuxOvercommitMemoryValue",
          "new_api": "redisLog",
          "old_text": "linuxOvercommitMemoryValue()",
          "new_text": "redisLog(REDIS_WARNING,\"WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\")",
          "old_line_content": "    if (linuxOvercommitMemoryValue() == 0) {",
          "new_line_content": "        redisLog(REDIS_WARNING,\"WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\");",
          "content_same": false
        },
        {
          "line": 10603,
          "old_api": "exit",
          "new_api": "setsid",
          "old_text": "exit(0)",
          "new_text": "setsid()",
          "old_line_content": "    if (fork() != 0) exit(0); /* parent exits */",
          "new_line_content": "    setsid(); /* create a new session */",
          "content_same": false
        },
        {
          "line": 10609,
          "old_api": "open",
          "new_api": "dup2",
          "old_text": "open(\"/dev/null\", O_RDWR, 0)",
          "new_text": "dup2(fd, STDIN_FILENO)",
          "old_line_content": "    if ((fd = open(\"/dev/null\", O_RDWR, 0)) != -1) {",
          "new_line_content": "        dup2(fd, STDIN_FILENO);",
          "content_same": false
        },
        {
          "line": 10612,
          "old_api": "dup2",
          "new_api": "close",
          "old_text": "dup2(fd, STDERR_FILENO)",
          "new_text": "close(fd)",
          "old_line_content": "        dup2(fd, STDERR_FILENO);",
          "new_line_content": "        if (fd > STDERR_FILENO) close(fd);",
          "content_same": false
        },
        {
          "line": 10618,
          "old_api": "getpid",
          "new_api": "fclose",
          "old_text": "getpid()",
          "new_text": "fclose(fp)",
          "old_line_content": "        fprintf(fp,\"%d\\n\",getpid());",
          "new_line_content": "        fclose(fp);",
          "content_same": false
        },
        {
          "line": 10624,
          "old_api": "printf",
          "new_api": "exit",
          "old_text": "printf(\"Redis server version %s\\n\", REDIS_VERSION)",
          "new_text": "exit(0)",
          "old_line_content": "    printf(\"Redis server version %s\\n\", REDIS_VERSION);",
          "new_line_content": "    exit(0);",
          "content_same": false
        },
        {
          "line": 10630,
          "old_api": "fprintf",
          "new_api": "exit",
          "old_text": "fprintf(stderr,\"       ./redis-server - (read config from stdin)\\n\")",
          "new_text": "exit(1)",
          "old_line_content": "    fprintf(stderr,\"       ./redis-server - (read config from stdin)\\n\");",
          "new_line_content": "    exit(1);",
          "content_same": false
        },
        {
          "line": 10639,
          "old_api": "strcmp",
          "new_api": "version",
          "old_text": "strcmp(argv[1], \"-v\")",
          "new_text": "version()",
          "old_line_content": "        if (strcmp(argv[1], \"-v\") == 0 ||",
          "new_line_content": "            strcmp(argv[1], \"--version\") == 0) version();",
          "content_same": false
        },
        {
          "line": 10640,
          "old_api": "version",
          "new_api": "usage",
          "old_text": "version()",
          "new_text": "usage()",
          "old_line_content": "            strcmp(argv[1], \"--version\") == 0) version();",
          "new_line_content": "        if (strcmp(argv[1], \"--help\") == 0) usage();",
          "content_same": false
        },
        {
          "line": 10641,
          "old_api": "usage",
          "new_api": "resetServerSaveParams",
          "old_text": "usage()",
          "new_text": "resetServerSaveParams()",
          "old_line_content": "        if (strcmp(argv[1], \"--help\") == 0) usage();",
          "new_line_content": "        resetServerSaveParams();",
          "content_same": false
        },
        {
          "line": 10642,
          "old_api": "resetServerSaveParams",
          "new_api": "loadServerConfig",
          "old_text": "resetServerSaveParams()",
          "new_text": "loadServerConfig(argv[1])",
          "old_line_content": "        resetServerSaveParams();",
          "new_line_content": "        loadServerConfig(argv[1]);",
          "content_same": false
        },
        {
          "line": 10649,
          "old_api": "daemonize",
          "new_api": "initServer",
          "old_text": "daemonize()",
          "new_text": "initServer()",
          "old_line_content": "    if (server.daemonize) daemonize();",
          "new_line_content": "    initServer();",
          "content_same": false
        },
        {
          "line": 10650,
          "old_api": "initServer",
          "new_api": "redisLog",
          "old_text": "initServer()",
          "new_text": "redisLog(REDIS_NOTICE,\"Server started, Redis version \" REDIS_VERSION)",
          "old_line_content": "    initServer();",
          "new_line_content": "    redisLog(REDIS_NOTICE,\"Server started, Redis version \" REDIS_VERSION);",
          "content_same": false
        },
        {
          "line": 10657,
          "old_api": "loadAppendOnlyFile",
          "new_api": "time",
          "old_text": "loadAppendOnlyFile(server.appendfilename)",
          "new_text": "time(NULL)",
          "old_line_content": "        if (loadAppendOnlyFile(server.appendfilename) == REDIS_OK)",
          "new_line_content": "            redisLog(REDIS_NOTICE,\"DB loaded from append only file: %ld seconds\",time(NULL)-start);",
          "content_same": false
        },
        {
          "line": 10660,
          "old_api": "rdbLoad",
          "new_api": "time",
          "old_text": "rdbLoad(server.dbfilename)",
          "new_text": "time(NULL)",
          "old_line_content": "        if (rdbLoad(server.dbfilename) == REDIS_OK)",
          "new_line_content": "            redisLog(REDIS_NOTICE,\"DB loaded from disk: %ld seconds\",time(NULL)-start);",
          "content_same": false
        },
        {
          "line": 10663,
          "old_api": "redisLog",
          "new_api": "aeSetBeforeSleepProc",
          "old_text": "redisLog(REDIS_NOTICE,\"The server is now ready to accept connections on port %d\", server.port)",
          "new_text": "aeSetBeforeSleepProc(server.el,beforeSleep)",
          "old_line_content": "    redisLog(REDIS_NOTICE,\"The server is now ready to accept connections on port %d\", server.port);",
          "new_line_content": "    aeSetBeforeSleepProc(server.el,beforeSleep);",
          "content_same": false
        },
        {
          "line": 10664,
          "old_api": "aeSetBeforeSleepProc",
          "new_api": "aeMain",
          "old_text": "aeSetBeforeSleepProc(server.el,beforeSleep)",
          "new_text": "aeMain(server.el)",
          "old_line_content": "    aeSetBeforeSleepProc(server.el,beforeSleep);",
          "new_line_content": "    aeMain(server.el);",
          "content_same": false
        },
        {
          "line": 10665,
          "old_api": "aeMain",
          "new_api": "aeDeleteEventLoop",
          "old_text": "aeMain(server.el)",
          "new_text": "aeDeleteEventLoop(server.el)",
          "old_line_content": "    aeMain(server.el);",
          "new_line_content": "    aeDeleteEventLoop(server.el);",
          "content_same": false
        },
        {
          "line": 10712,
          "old_api": "genRedisInfoString",
          "new_api": "redisLog",
          "old_text": "genRedisInfoString()",
          "new_text": "redisLog(REDIS_WARNING, \"%s\",infostring)",
          "old_line_content": "    infostring = genRedisInfoString();",
          "new_line_content": "    redisLog(REDIS_WARNING, \"%s\",infostring);",
          "content_same": false
        },
        {
          "line": 10727,
          "old_api": "strchr",
          "new_api": "strtol",
          "old_text": "strchr(messages[i],'+')",
          "new_text": "strtol(p+1,NULL,10)",
          "old_line_content": "        p = strchr(messages[i],'+');",
          "new_line_content": "        if (!fn || (p && ((unsigned long)strtol(p+1,NULL,10)) < offset)) {",
          "content_same": false
        },
        {
          "line": 10728,
          "old_api": "strtol",
          "new_api": "redisLog",
          "old_text": "strtol(p+1,NULL,10)",
          "new_text": "redisLog(REDIS_WARNING,\"%s\", messages[i])",
          "old_line_content": "        if (!fn || (p && ((unsigned long)strtol(p+1,NULL,10)) < offset)) {",
          "new_line_content": "            redisLog(REDIS_WARNING,\"%s\", messages[i]);",
          "content_same": false
        },
        {
          "line": 10746,
          "old_api": "sigaction (SIGSEGV, &act, NULL)",
          "new_api": "sigaction (SIGBUS, &act, NULL)",
          "old_text": "sigaction (SIGSEGV, &act, NULL)",
          "new_text": "sigaction (SIGBUS, &act, NULL)",
          "old_line_content": "    sigaction (SIGSEGV, &act, NULL);",
          "new_line_content": "    sigaction (SIGBUS, &act, NULL);",
          "content_same": false
        },
        {
          "line": 10747,
          "old_api": "sigaction (SIGBUS, &act, NULL)",
          "new_api": "sigaction (SIGFPE, &act, NULL)",
          "old_text": "sigaction (SIGBUS, &act, NULL)",
          "new_text": "sigaction (SIGFPE, &act, NULL)",
          "old_line_content": "    sigaction (SIGBUS, &act, NULL);",
          "new_line_content": "    sigaction (SIGFPE, &act, NULL);",
          "content_same": false
        },
        {
          "line": 10748,
          "old_api": "sigaction (SIGFPE, &act, NULL)",
          "new_api": "sigaction (SIGILL, &act, NULL)",
          "old_text": "sigaction (SIGFPE, &act, NULL)",
          "new_text": "sigaction (SIGILL, &act, NULL)",
          "old_line_content": "    sigaction (SIGFPE, &act, NULL);",
          "new_line_content": "    sigaction (SIGILL, &act, NULL);",
          "content_same": false
        },
        {
          "line": 10749,
          "old_api": "sigaction (SIGILL, &act, NULL)",
          "new_api": "sigaction (SIGBUS, &act, NULL)",
          "old_text": "sigaction (SIGILL, &act, NULL)",
          "new_text": "sigaction (SIGBUS, &act, NULL)",
          "old_line_content": "    sigaction (SIGILL, &act, NULL);",
          "new_line_content": "    sigaction (SIGBUS, &act, NULL);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 8193,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(buf,\"*%d\\r\\n\",argc)",
          "old_line_content": "    int j;",
          "new_line_content": "    buf = sdscatprintf(buf,\"*%d\\r\\n\",argc);",
          "content_same": false
        },
        {
          "line": 10241,
          "old_api": null,
          "new_api": "pubsubUnsubscribeAllPatterns",
          "old_text": null,
          "new_text": "pubsubUnsubscribeAllPatterns(c,1)",
          "old_line_content": "    if (c->argc == 1) {",
          "new_line_content": "        pubsubUnsubscribeAllPatterns(c,1);",
          "content_same": false
        },
        {
          "line": 8195,
          "old_api": null,
          "new_api": "getDecodedObject",
          "old_text": null,
          "new_text": "getDecodedObject(argv[j])",
          "old_line_content": "    for (j = 0; j < argc; j++) {",
          "new_line_content": "        robj *o = getDecodedObject(argv[j]);",
          "content_same": false
        },
        {
          "line": 6146,
          "old_api": null,
          "new_api": "zrangeGenericCommand",
          "old_text": null,
          "new_text": "zrangeGenericCommand(c,1)",
          "old_line_content": "static void zrevrangeCommand(redisClient *c) {",
          "new_line_content": "    zrangeGenericCommand(c,1);",
          "content_same": false
        },
        {
          "line": 10247,
          "old_api": null,
          "new_api": "pubsubUnsubscribePattern",
          "old_text": null,
          "new_text": "pubsubUnsubscribePattern(c,c->argv[j],1)",
          "old_line_content": "        for (j = 1; j < c->argc; j++)",
          "new_line_content": "            pubsubUnsubscribePattern(c,c->argv[j],1);",
          "content_same": false
        },
        {
          "line": 10252,
          "old_api": null,
          "new_api": "pubsubPublishMessage",
          "old_text": null,
          "new_text": "pubsubPublishMessage(c->argv[1],c->argv[2])",
          "old_line_content": "static void publishCommand(redisClient *c) {",
          "new_line_content": "    int receivers = pubsubPublishMessage(c->argv[1],c->argv[2]);",
          "content_same": false
        },
        {
          "line": 8210,
          "old_api": null,
          "new_api": "getDecodedObject",
          "old_text": null,
          "new_text": "getDecodedObject(seconds)",
          "old_line_content": "    /* Make sure we can use strtol */",
          "new_line_content": "    seconds = getDecodedObject(seconds);",
          "content_same": false
        },
        {
          "line": 6164,
          "old_api": null,
          "new_api": "strtod",
          "old_text": null,
          "new_text": "strtod((char*)c->argv[2]->ptr+1,NULL)",
          "old_line_content": "    if (((char*)c->argv[2]->ptr)[0] == '(') {",
          "new_line_content": "        min = strtod((char*)c->argv[2]->ptr+1,NULL);",
          "content_same": false
        },
        {
          "line": 8214,
          "old_api": null,
          "new_api": "createStringObject",
          "old_text": null,
          "new_text": "createStringObject(\"EXPIREAT\",8)",
          "old_line_content": "",
          "new_line_content": "    argv[0] = createStringObject(\"EXPIREAT\",8);",
          "content_same": false
        },
        {
          "line": 6167,
          "old_api": null,
          "new_api": "strtod",
          "old_text": null,
          "new_text": "strtod(c->argv[2]->ptr,NULL)",
          "old_line_content": "    } else {",
          "new_line_content": "        min = strtod(c->argv[2]->ptr,NULL);",
          "content_same": false
        },
        {
          "line": 8216,
          "old_api": null,
          "new_api": "createObject",
          "old_text": null,
          "new_text": "createObject(REDIS_STRING,\n        sdscatprintf(sdsempty(),\"%ld\",when))",
          "old_line_content": "    argv[1] = key;",
          "new_line_content": "    argv[2] = createObject(REDIS_STRING,",
          "content_same": false
        },
        {
          "line": 6170,
          "old_api": null,
          "new_api": "strtod",
          "old_text": null,
          "new_text": "strtod((char*)c->argv[3]->ptr+1,NULL)",
          "old_line_content": "    if (((char*)c->argv[3]->ptr)[0] == '(') {",
          "new_line_content": "        max = strtod((char*)c->argv[3]->ptr+1,NULL);",
          "content_same": false
        },
        {
          "line": 10269,
          "old_api": null,
          "new_api": "SHA1Init",
          "old_text": null,
          "new_text": "SHA1Init(&ctx)",
          "old_line_content": "",
          "new_line_content": "    SHA1Init(&ctx);",
          "content_same": false
        },
        {
          "line": 6173,
          "old_api": null,
          "new_api": "strtod",
          "old_text": null,
          "new_text": "strtod(c->argv[3]->ptr,NULL)",
          "old_line_content": "    } else {",
          "new_line_content": "        max = strtod(c->argv[3]->ptr,NULL);",
          "content_same": false
        },
        {
          "line": 8225,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "static void feedAppendOnlyFile(struct redisCommand *cmd, int dictid, robj **argv, int argc) {",
          "new_line_content": "    sds buf = sdsempty();",
          "content_same": false
        },
        {
          "line": 6180,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[c->argc-1]->ptr,\"withscores\")",
          "old_line_content": "    if (c->argc == 5 || c->argc == 8) {",
          "new_line_content": "        if (strcasecmp(c->argv[c->argc-1]->ptr,\"withscores\") == 0)",
          "content_same": false
        },
        {
          "line": 10278,
          "old_api": null,
          "new_api": "getDecodedObject",
          "old_text": null,
          "new_text": "getDecodedObject(o)",
          "old_line_content": "static void xorObjectDigest(unsigned char *digest, robj *o) {",
          "new_line_content": "    o = getDecodedObject(o);",
          "content_same": false
        },
        {
          "line": 8233,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(seldb,sizeof(seldb),\"%d\",dictid)",
          "old_line_content": "",
          "new_line_content": "        snprintf(seldb,sizeof(seldb),\"%d\",dictid);",
          "content_same": false
        },
        {
          "line": 6188,
          "old_api": null,
          "new_api": "addReplySds",
          "old_text": null,
          "new_text": "addReplySds(c,\n            sdsnew(\"-ERR wrong number of arguments for ZRANGEBYSCORE\\r\\n\"))",
          "old_line_content": "    if (badsyntax) {",
          "new_line_content": "        addReplySds(c,",
          "content_same": false
        },
        {
          "line": 8241,
          "old_api": null,
          "new_api": "catAppendOnlyExpireAtCommand",
          "old_text": null,
          "new_text": "catAppendOnlyExpireAtCommand(buf,argv[1],argv[2])",
          "old_line_content": "        /* Translate EXPIRE into EXPIREAT */",
          "new_line_content": "        buf = catAppendOnlyExpireAtCommand(buf,argv[1],argv[2]);",
          "content_same": false
        },
        {
          "line": 6194,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[4]->ptr,\"limit\")",
          "old_line_content": "    /* Parse \"LIMIT\" */",
          "new_line_content": "    if (c->argc == (7 + withscores) && strcasecmp(c->argv[4]->ptr,\"limit\")) {",
          "content_same": false
        },
        {
          "line": 8244,
          "old_api": null,
          "new_api": "createStringObject",
          "old_text": null,
          "new_text": "createStringObject(\"SET\",3)",
          "old_line_content": "        /* Translate SETEX to SET and EXPIREAT */",
          "new_line_content": "        tmpargv[0] = createStringObject(\"SET\",3);",
          "content_same": false
        },
        {
          "line": 6198,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[5]->ptr)",
          "old_line_content": "    } else if (c->argc == (7 + withscores)) {",
          "new_line_content": "        offset = atoi(c->argv[5]->ptr);",
          "content_same": false
        },
        {
          "line": 8247,
          "old_api": null,
          "new_api": "catAppendOnlyGenericCommand",
          "old_text": null,
          "new_text": "catAppendOnlyGenericCommand(buf,3,tmpargv)",
          "old_line_content": "        tmpargv[2] = argv[3];",
          "new_line_content": "        buf = catAppendOnlyGenericCommand(buf,3,tmpargv);",
          "content_same": false
        },
        {
          "line": 8251,
          "old_api": null,
          "new_api": "catAppendOnlyGenericCommand",
          "old_text": null,
          "new_text": "catAppendOnlyGenericCommand(buf,argc,argv)",
          "old_line_content": "    } else {",
          "new_line_content": "        buf = catAppendOnlyGenericCommand(buf,argc,argv);",
          "content_same": false
        },
        {
          "line": 6204,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[1])",
          "old_line_content": "    /* Ok, lookup the key and get the range */",
          "new_line_content": "    o = lookupKeyRead(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 10301,
          "old_api": null,
          "new_api": "xorDigest",
          "old_text": null,
          "new_text": "xorDigest(digest,s,len)",
          "old_line_content": "",
          "new_line_content": "    xorDigest(digest,s,len);",
          "content_same": false
        },
        {
          "line": 6206,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,justcount ? shared.czero : shared.emptymultibulk)",
          "old_line_content": "    if (o == NULL) {",
          "new_line_content": "        addReply(c,justcount ? shared.czero : shared.emptymultibulk);",
          "content_same": false
        },
        {
          "line": 8257,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(buf)",
          "old_line_content": "     * positive reply about the operation performed. */",
          "new_line_content": "    server.aofbuf = sdscatlen(server.aofbuf,buf,sdslen(buf));",
          "content_same": false
        },
        {
          "line": 6209,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "        if (o->type != REDIS_ZSET) {",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 10308,
          "old_api": null,
          "new_api": "getDecodedObject",
          "old_text": null,
          "new_text": "getDecodedObject(o)",
          "old_line_content": "static void mixObjectDigest(unsigned char *digest, robj *o) {",
          "new_line_content": "    o = getDecodedObject(o);",
          "content_same": false
        },
        {
          "line": 8264,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(buf)",
          "old_line_content": "    if (server.bgrewritechildpid != -1)",
          "new_line_content": "        server.bgrewritebuf = sdscatlen(server.bgrewritebuf,buf,sdslen(buf));",
          "content_same": false
        },
        {
          "line": 8266,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(buf)",
          "old_line_content": "",
          "new_line_content": "    sdsfree(buf);",
          "content_same": false
        },
        {
          "line": 6219,
          "old_api": null,
          "new_api": "zslFirstWithScore",
          "old_text": null,
          "new_text": "zslFirstWithScore(zsl,min)",
          "old_line_content": "             * score > min if 'minex' is true. */",
          "new_line_content": "            ln = zslFirstWithScore(zsl,min);",
          "content_same": false
        },
        {
          "line": 8272,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*c))",
          "old_line_content": "static struct redisClient *createFakeClient(void) {",
          "new_line_content": "    struct redisClient *c = zmalloc(sizeof(*c));",
          "content_same": false
        },
        {
          "line": 6224,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,justcount ? shared.czero : shared.emptymultibulk)",
          "old_line_content": "                /* No element matching the speciifed interval */",
          "new_line_content": "                addReply(c,justcount ? shared.czero : shared.emptymultibulk);",
          "content_same": false
        },
        {
          "line": 8274,
          "old_api": null,
          "new_api": "selectDb",
          "old_text": null,
          "new_text": "selectDb(c,0)",
          "old_line_content": "",
          "new_line_content": "    selectDb(c,0);",
          "content_same": false
        },
        {
          "line": 8276,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "    c->fd = -1;",
          "new_line_content": "    c->querybuf = sdsempty();",
          "content_same": false
        },
        {
          "line": 10327,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(final,0,20)",
          "old_line_content": "",
          "new_line_content": "    memset(final,0,20); /* Start with a clean result */",
          "content_same": false
        },
        {
          "line": 6233,
          "old_api": null,
          "new_api": "createObject",
          "old_text": null,
          "new_text": "createObject(REDIS_STRING,NULL)",
          "old_line_content": "            if (!justcount) {",
          "new_line_content": "                lenobj = createObject(REDIS_STRING,NULL);",
          "content_same": false
        },
        {
          "line": 8283,
          "old_api": null,
          "new_api": "listCreate",
          "old_text": null,
          "new_text": "listCreate()",
          "old_line_content": "    c->replstate = REDIS_REPL_WAIT_BGSAVE_START;",
          "new_line_content": "    c->reply = listCreate();",
          "content_same": false
        },
        {
          "line": 10332,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(db->dict)",
          "old_line_content": "",
          "new_line_content": "        if (dictSize(db->dict) == 0) continue;",
          "content_same": false
        },
        {
          "line": 10337,
          "old_api": null,
          "new_api": "htonl",
          "old_text": null,
          "new_text": "htonl(j)",
          "old_line_content": "         * DB will lead to a different digest */",
          "new_line_content": "        aux = htonl(j);",
          "content_same": false
        },
        {
          "line": 8291,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(c->querybuf)",
          "old_line_content": "static void freeFakeClient(struct redisClient *c) {",
          "new_line_content": "    sdsfree(c->querybuf);",
          "content_same": false
        },
        {
          "line": 10341,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "        /* Iterate this DB writing every entry */",
          "new_line_content": "        while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 6247,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,ele)",
          "old_line_content": "                    ele = ln->obj;",
          "new_line_content": "                    addReplyBulk(c,ele);",
          "content_same": false
        },
        {
          "line": 10345,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(digest,0,20)",
          "old_line_content": "",
          "new_line_content": "            memset(digest,0,20); /* This key-val digest */",
          "content_same": false
        },
        {
          "line": 6249,
          "old_api": null,
          "new_api": "addReplyDouble",
          "old_text": null,
          "new_text": "addReplyDouble(c,ln->score)",
          "old_line_content": "                    if (withscores)",
          "new_line_content": "                        addReplyDouble(c,ln->score);",
          "content_same": false
        },
        {
          "line": 8302,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(filename,\"r\")",
          "old_line_content": "    struct redisClient *fakeClient;",
          "new_line_content": "    FILE *fp = fopen(filename,\"r\");",
          "content_same": false
        },
        {
          "line": 10350,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "                key->storage == REDIS_VM_SWAPPING) {",
          "new_line_content": "                o = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 6256,
          "old_api": null,
          "new_api": "addReplyLong",
          "old_text": null,
          "new_text": "addReplyLong(c,(long)rangelen)",
          "old_line_content": "            if (justcount) {",
          "new_line_content": "                addReplyLong(c,(long)rangelen);",
          "content_same": false
        },
        {
          "line": 10353,
          "old_api": null,
          "new_api": "vmPreviewObject",
          "old_text": null,
          "new_text": "vmPreviewObject(key)",
          "old_line_content": "            } else {",
          "new_line_content": "                o = vmPreviewObject(key);",
          "content_same": false
        },
        {
          "line": 6258,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "            } else {",
          "new_line_content": "                lenobj->ptr = sdscatprintf(sdsempty(),\"*%lu\\r\\n\",",
          "content_same": false
        },
        {
          "line": 8307,
          "old_api": null,
          "new_api": "fileno",
          "old_text": null,
          "new_text": "fileno(fp)",
          "old_line_content": "",
          "new_line_content": "    if (redis_fstat(fileno(fp),&sb) != -1 && sb.st_size == 0)",
          "content_same": false
        },
        {
          "line": 10355,
          "old_api": null,
          "new_api": "htonl",
          "old_text": null,
          "new_text": "htonl(o->type)",
          "old_line_content": "            }",
          "new_line_content": "            aux = htonl(o->type);",
          "content_same": false
        },
        {
          "line": 8311,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "    if (fp == NULL) {",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Fatal error: can't open the append log file for reading: %s\",strerror(errno));",
          "content_same": false
        },
        {
          "line": 10361,
          "old_api": null,
          "new_api": "mixObjectDigest",
          "old_text": null,
          "new_text": "mixObjectDigest(digest,o)",
          "old_line_content": "            if (o->type == REDIS_STRING) {",
          "new_line_content": "                mixObjectDigest(digest,o);",
          "content_same": false
        },
        {
          "line": 6266,
          "old_api": null,
          "new_api": "genericZrangebyscoreCommand",
          "old_text": null,
          "new_text": "genericZrangebyscoreCommand(c,0)",
          "old_line_content": "static void zrangebyscoreCommand(redisClient *c) {",
          "new_line_content": "    genericZrangebyscoreCommand(c,0);",
          "content_same": false
        },
        {
          "line": 6270,
          "old_api": null,
          "new_api": "genericZrangebyscoreCommand",
          "old_text": null,
          "new_text": "genericZrangebyscoreCommand(c,1)",
          "old_line_content": "static void zcountCommand(redisClient *c) {",
          "new_line_content": "    genericZrangebyscoreCommand(c,1);",
          "content_same": false
        },
        {
          "line": 8319,
          "old_api": null,
          "new_api": "createFakeClient",
          "old_text": null,
          "new_text": "createFakeClient()",
          "old_line_content": "",
          "new_line_content": "    fakeClient = createFakeClient();",
          "content_same": false
        },
        {
          "line": 10367,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(list,&li)",
          "old_line_content": "",
          "new_line_content": "                listRewind(list,&li);",
          "content_same": false
        },
        {
          "line": 10371,
          "old_api": null,
          "new_api": "mixObjectDigest",
          "old_text": null,
          "new_text": "mixObjectDigest(digest,eleobj)",
          "old_line_content": "",
          "new_line_content": "                    mixObjectDigest(digest,eleobj);",
          "content_same": false
        },
        {
          "line": 6277,
          "old_api": null,
          "new_api": "lookupKeyReadOrReply",
          "old_text": null,
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "old_line_content": "",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "content_same": false
        },
        {
          "line": 10375,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(set)",
          "old_line_content": "                dict *set = o->ptr;",
          "new_line_content": "                dictIterator *di = dictGetIterator(set);",
          "content_same": false
        },
        {
          "line": 8328,
          "old_api": null,
          "new_api": "fgets",
          "old_text": null,
          "new_text": "fgets(buf,sizeof(buf),fp)",
          "old_line_content": "",
          "new_line_content": "        if (fgets(buf,sizeof(buf),fp) == NULL) {",
          "content_same": false
        },
        {
          "line": 6281,
          "old_api": null,
          "new_api": "addReplyUlong",
          "old_text": null,
          "new_text": "addReplyUlong(c,zs->zsl->length)",
          "old_line_content": "    zs = o->ptr;",
          "new_line_content": "    addReplyUlong(c,zs->zsl->length);",
          "content_same": false
        },
        {
          "line": 10378,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "",
          "new_line_content": "                while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 10381,
          "old_api": null,
          "new_api": "xorObjectDigest",
          "old_text": null,
          "new_text": "xorObjectDigest(digest,eleobj)",
          "old_line_content": "",
          "new_line_content": "                    xorObjectDigest(digest,eleobj);",
          "content_same": false
        },
        {
          "line": 8335,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(buf+1)",
          "old_line_content": "        if (buf[0] != '*') goto fmterr;",
          "new_line_content": "        argc = atoi(buf+1);",
          "content_same": false
        },
        {
          "line": 10383,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "                }",
          "new_line_content": "                dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 6289,
          "old_api": null,
          "new_api": "lookupKeyReadOrReply",
          "old_text": null,
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)",
          "old_line_content": "",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "content_same": false
        },
        {
          "line": 8338,
          "old_api": null,
          "new_api": "fgets",
          "old_text": null,
          "new_text": "fgets(buf,sizeof(buf),fp)",
          "old_line_content": "        for (j = 0; j < argc; j++) {",
          "new_line_content": "            if (fgets(buf,sizeof(buf),fp) == NULL) goto readerr;",
          "content_same": false
        },
        {
          "line": 10386,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(zs->dict)",
          "old_line_content": "                zset *zs = o->ptr;",
          "new_line_content": "                dictIterator *di = dictGetIterator(zs->dict);",
          "content_same": false
        },
        {
          "line": 8340,
          "old_api": null,
          "new_api": "strtol",
          "old_text": null,
          "new_text": "strtol(buf+1,NULL,10)",
          "old_line_content": "            if (buf[0] != '$') goto fmterr;",
          "new_line_content": "            len = strtol(buf+1,NULL,10);",
          "content_same": false
        },
        {
          "line": 10389,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "",
          "new_line_content": "                while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 6293,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(zs->dict,c->argv[2])",
          "old_line_content": "    zs = o->ptr;",
          "new_line_content": "    de = dictFind(zs->dict,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 6295,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "    if (!de) {",
          "new_line_content": "        addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 6297,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "    } else {",
          "new_line_content": "        double *score = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 10394,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(buf,sizeof(buf),\"%.17g\",*score)",
          "old_line_content": "",
          "new_line_content": "                    snprintf(buf,sizeof(buf),\"%.17g\",*score);",
          "content_same": false
        },
        {
          "line": 6299,
          "old_api": null,
          "new_api": "addReplyDouble",
          "old_text": null,
          "new_text": "addReplyDouble(c,*score)",
          "old_line_content": "",
          "new_line_content": "        addReplyDouble(c,*score);",
          "content_same": false
        },
        {
          "line": 8348,
          "old_api": null,
          "new_api": "lookupCommand",
          "old_text": null,
          "new_text": "lookupCommand(argv[0]->ptr)",
          "old_line_content": "        /* Command lookup */",
          "new_line_content": "        cmd = lookupCommand(argv[0]->ptr);",
          "content_same": false
        },
        {
          "line": 8350,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Unknown command '%s' reading the append only file\", argv[0]->ptr)",
          "old_line_content": "        if (!cmd) {",
          "new_line_content": "            redisLog(REDIS_WARNING,\"Unknown command '%s' reading the append only file\", argv[0]->ptr);",
          "content_same": false
        },
        {
          "line": 10400,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "                }",
          "new_line_content": "                dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 8355,
          "old_api": null,
          "new_api": "tryObjectEncoding",
          "old_text": null,
          "new_text": "tryObjectEncoding(argv[argc-1])",
          "old_line_content": "        if (cmd->flags & REDIS_CMD_BULK)",
          "new_line_content": "            argv[argc-1] = tryObjectEncoding(argv[argc-1]);",
          "content_same": false
        },
        {
          "line": 10405,
          "old_api": null,
          "new_api": "hashInitIterator",
          "old_text": null,
          "new_text": "hashInitIterator(o)",
          "old_line_content": "",
          "new_line_content": "                hi = hashInitIterator(o);",
          "content_same": false
        },
        {
          "line": 8359,
          "old_api": null,
          "new_api": "proc",
          "old_text": null,
          "new_text": "cmd->proc(fakeClient)",
          "old_line_content": "        fakeClient->argv = argv;",
          "new_line_content": "        cmd->proc(fakeClient);",
          "content_same": false
        },
        {
          "line": 6311,
          "old_api": null,
          "new_api": "lookupKeyReadOrReply",
          "old_text": null,
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)",
          "old_line_content": "",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "content_same": false
        },
        {
          "line": 8361,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(fakeClient->reply)",
          "old_line_content": "        /* Discard the reply objects list from the fake client */",
          "new_line_content": "        while(listLength(fakeClient->reply))",
          "content_same": false
        },
        {
          "line": 10409,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(eledigest,0,20)",
          "old_line_content": "",
          "new_line_content": "                    memset(eledigest,0,20);",
          "content_same": false
        },
        {
          "line": 8364,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(argv[j])",
          "old_line_content": "        /* Clean up, ready for the next command */",
          "new_line_content": "        for (j = 0; j < argc; j++) decrRefCount(argv[j]);",
          "content_same": false
        },
        {
          "line": 6316,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(zs->dict,c->argv[2])",
          "old_line_content": "    zsl = zs->zsl;",
          "new_line_content": "    de = dictFind(zs->dict,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 6318,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "    if (!de) {",
          "new_line_content": "        addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 8369,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "        if (server.vm_enabled && (loadedkeys % 5000) == 0) {",
          "new_line_content": "            while (zmalloc_used_memory() > server.vm_max_memory) {",
          "content_same": false
        },
        {
          "line": 10418,
          "old_api": null,
          "new_api": "hashReleaseIterator",
          "old_text": null,
          "new_text": "hashReleaseIterator(hi)",
          "old_line_content": "                }",
          "new_line_content": "                hashReleaseIterator(hi);",
          "content_same": false
        },
        {
          "line": 6322,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "",
          "new_line_content": "    score = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 10420,
          "old_api": null,
          "new_api": "redisPanic",
          "old_text": null,
          "new_text": "redisPanic(\"Unknown object type\")",
          "old_line_content": "            } else {",
          "new_line_content": "                redisPanic(\"Unknown object type\");",
          "content_same": false
        },
        {
          "line": 10422,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(o)",
          "old_line_content": "            }",
          "new_line_content": "            decrRefCount(o);",
          "content_same": false
        },
        {
          "line": 6326,
          "old_api": null,
          "new_api": "addReplyLong",
          "old_text": null,
          "new_text": "addReplyLong(c, zsl->length - rank)",
          "old_line_content": "        if (reverse) {",
          "new_line_content": "            addReplyLong(c, zsl->length - rank);",
          "content_same": false
        },
        {
          "line": 10424,
          "old_api": null,
          "new_api": "xorDigest",
          "old_text": null,
          "new_text": "xorDigest(digest,\"!!expire!!\",10)",
          "old_line_content": "            /* If the key has an expire, add it to the mix */",
          "new_line_content": "            if (expiretime != -1) xorDigest(digest,\"!!expire!!\",10);",
          "content_same": false
        },
        {
          "line": 6328,
          "old_api": null,
          "new_api": "addReplyLong",
          "old_text": null,
          "new_text": "addReplyLong(c, rank-1)",
          "old_line_content": "        } else {",
          "new_line_content": "            addReplyLong(c, rank-1);",
          "content_same": false
        },
        {
          "line": 10426,
          "old_api": null,
          "new_api": "xorDigest",
          "old_text": null,
          "new_text": "xorDigest(final,digest,20)",
          "old_line_content": "            /* We can finally xor the key-val digest to the final digest */",
          "new_line_content": "            xorDigest(final,digest,20);",
          "content_same": false
        },
        {
          "line": 8379,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "",
          "new_line_content": "    fclose(fp);",
          "content_same": false
        },
        {
          "line": 10428,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "        }",
          "new_line_content": "        dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 6331,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "    } else {",
          "new_line_content": "        addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 6336,
          "old_api": null,
          "new_api": "zrankGenericCommand",
          "old_text": null,
          "new_text": "zrankGenericCommand(c, 0)",
          "old_line_content": "static void zrankCommand(redisClient *c) {",
          "new_line_content": "    zrankGenericCommand(c, 0);",
          "content_same": false
        },
        {
          "line": 8385,
          "old_api": null,
          "new_api": "feof",
          "old_text": null,
          "new_text": "feof(fp)",
          "old_line_content": "readerr:",
          "new_line_content": "    if (feof(fp)) {",
          "content_same": false
        },
        {
          "line": 10433,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr,\"segfault\")",
          "old_line_content": "static void debugCommand(redisClient *c) {",
          "new_line_content": "    if (!strcasecmp(c->argv[1]->ptr,\"segfault\")) {",
          "content_same": false
        },
        {
          "line": 10435,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr,\"reload\")",
          "old_line_content": "        *((char*)-1) = 'x';",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"reload\")) {",
          "content_same": false
        },
        {
          "line": 8388,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "    } else {",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Unrecoverable error reading the append only file: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 6340,
          "old_api": null,
          "new_api": "zrankGenericCommand",
          "old_text": null,
          "new_text": "zrankGenericCommand(c, 1)",
          "old_line_content": "static void zrevrankCommand(redisClient *c) {",
          "new_line_content": "    zrankGenericCommand(c, 1);",
          "content_same": false
        },
        {
          "line": 8390,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "    }",
          "new_line_content": "    exit(1);",
          "content_same": false
        },
        {
          "line": 8392,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Bad file format reading the append only file\")",
          "old_line_content": "fmterr:",
          "new_line_content": "    redisLog(REDIS_WARNING,\"Bad file format reading the append only file\");",
          "content_same": false
        },
        {
          "line": 10440,
          "old_api": null,
          "new_api": "emptyDb",
          "old_text": null,
          "new_text": "emptyDb()",
          "old_line_content": "        }",
          "new_line_content": "        emptyDb();",
          "content_same": false
        },
        {
          "line": 10445,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"DB reloaded by DEBUG RELOAD\")",
          "old_line_content": "        }",
          "new_line_content": "        redisLog(REDIS_WARNING,\"DB reloaded by DEBUG RELOAD\");",
          "content_same": false
        },
        {
          "line": 6356,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(argv[i]->ptr)",
          "old_line_content": "        if (argv[i]->encoding == REDIS_ENCODING_RAW &&",
          "new_line_content": "            sdslen(argv[i]->ptr) > server.hash_max_zipmap_value)",
          "content_same": false
        },
        {
          "line": 10453,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Append Only File loaded by DEBUG LOADAOF\")",
          "old_line_content": "        }",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Append Only File loaded by DEBUG LOADAOF\");",
          "content_same": false
        },
        {
          "line": 6358,
          "old_api": null,
          "new_api": "convertToRealHash",
          "old_text": null,
          "new_text": "convertToRealHash(subject)",
          "old_line_content": "        {",
          "new_line_content": "            convertToRealHash(subject);",
          "content_same": false
        },
        {
          "line": 8407,
          "old_api": null,
          "new_api": "getDecodedObject",
          "old_text": null,
          "new_text": "getDecodedObject(obj)",
          "old_line_content": "    if (obj->encoding != REDIS_ENCODING_RAW) {",
          "new_line_content": "        obj = getDecodedObject(obj);",
          "content_same": false
        },
        {
          "line": 8410,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(obj->ptr)",
          "old_line_content": "    }",
          "new_line_content": "    snprintf(buf,sizeof(buf),\"$%ld\\r\\n\",(long)sdslen(obj->ptr));",
          "content_same": false
        },
        {
          "line": 10460,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nokeyerr)",
          "old_line_content": "        if (!de) {",
          "new_line_content": "            addReply(c,shared.nokeyerr);",
          "content_same": false
        },
        {
          "line": 8414,
          "old_api": null,
          "new_api": "fwrite",
          "old_text": null,
          "new_text": "fwrite(\"\\r\\n\",2,1,fp)",
          "old_line_content": "        goto err;",
          "new_line_content": "    if (fwrite(\"\\r\\n\",2,1,fp) == 0) goto err;",
          "content_same": false
        },
        {
          "line": 10463,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "        }",
          "new_line_content": "        key = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 6367,
          "old_api": null,
          "new_api": "tryObjectEncoding",
          "old_text": null,
          "new_text": "tryObjectEncoding(*o1)",
          "old_line_content": "    if (subject->encoding == REDIS_ENCODING_HT) {",
          "new_line_content": "        if (o1) *o1 = tryObjectEncoding(*o1);",
          "content_same": false
        },
        {
          "line": 8418,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(obj)",
          "old_line_content": "err:",
          "new_line_content": "    if (decrrc) decrRefCount(obj);",
          "content_same": false
        },
        {
          "line": 10473,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(buf,64,\"unknown encoding %d\\n\", val->encoding)",
          "old_line_content": "            } else {",
          "new_line_content": "                snprintf(buf,64,\"unknown encoding %d\\n\", val->encoding);",
          "content_same": false
        },
        {
          "line": 8427,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(buf,sizeof(buf),\"$%ld\\r\\n\",(unsigned long)len)",
          "old_line_content": "",
          "new_line_content": "    snprintf(buf,sizeof(buf),\"$%ld\\r\\n\",(unsigned long)len);",
          "content_same": false
        },
        {
          "line": 10476,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "            }",
          "new_line_content": "            addReplySds(c,sdscatprintf(sdsempty(),",
          "content_same": false
        },
        {
          "line": 6380,
          "old_api": null,
          "new_api": "getDecodedObject",
          "old_text": null,
          "new_text": "getDecodedObject(key)",
          "old_line_content": "        unsigned int vlen;",
          "new_line_content": "        key = getDecodedObject(key);",
          "content_same": false
        },
        {
          "line": 10480,
          "old_api": null,
          "new_api": "rdbSavedObjectLen",
          "old_text": null,
          "new_text": "rdbSavedObjectLen(val,NULL)",
          "old_line_content": "                (void*)key, key->refcount, (void*)val, val->refcount,",
          "new_line_content": "                strenc, (long long) rdbSavedObjectLen(val,NULL)));",
          "content_same": false
        },
        {
          "line": 6384,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(key)",
          "old_line_content": "        }",
          "new_line_content": "        decrRefCount(key);",
          "content_same": false
        },
        {
          "line": 10482,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "        } else {",
          "new_line_content": "            addReplySds(c,sdscatprintf(sdsempty(),",
          "content_same": false
        },
        {
          "line": 6386,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(o->ptr,key)",
          "old_line_content": "    } else {",
          "new_line_content": "        dictEntry *de = dictFind(o->ptr,key);",
          "content_same": false
        },
        {
          "line": 4340,
          "old_api": null,
          "new_api": "dictReplace",
          "old_text": null,
          "new_text": "dictReplace(c->db->dict,c->argv[1],o)",
          "old_line_content": "    if (retval == DICT_ERR) {",
          "new_line_content": "        dictReplace(c->db->dict,c->argv[1],o);",
          "content_same": false
        },
        {
          "line": 6388,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "        if (de != NULL) {",
          "new_line_content": "            value = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 8438,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(dbuf,sizeof(dbuf),\"%.17g\\r\\n\",d)",
          "old_line_content": "",
          "new_line_content": "    snprintf(dbuf,sizeof(dbuf),\"%.17g\\r\\n\",d);",
          "content_same": false
        },
        {
          "line": 4343,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(c->argv[1])",
          "old_line_content": "    } else {",
          "new_line_content": "        incrRefCount(c->argv[1]);",
          "content_same": false
        },
        {
          "line": 10488,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr,\"swapin\")",
          "old_line_content": "        }",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"swapin\") && c->argc == 3) {",
          "content_same": false
        },
        {
          "line": 4346,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.colon)",
          "old_line_content": "    server.dirty++;",
          "new_line_content": "    addReply(c,shared.colon);",
          "content_same": false
        },
        {
          "line": 6399,
          "old_api": null,
          "new_api": "getDecodedObject",
          "old_text": null,
          "new_text": "getDecodedObject(key)",
          "old_line_content": "    if (o->encoding == REDIS_ENCODING_ZIPMAP) {",
          "new_line_content": "        key = getDecodedObject(key);",
          "content_same": false
        },
        {
          "line": 10496,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"-ERR Virtual Memory is disabled\\r\\n\")",
          "old_line_content": "        if (!server.vm_enabled) {",
          "new_line_content": "            addReplySds(c,sdsnew(\"-ERR Virtual Memory is disabled\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 8449,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(lbuf,sizeof(lbuf),\"%ld\\r\\n\",l)",
          "old_line_content": "",
          "new_line_content": "    snprintf(lbuf,sizeof(lbuf),\"%ld\\r\\n\",l);",
          "content_same": false
        },
        {
          "line": 4352,
          "old_api": null,
          "new_api": "incrDecrCommand",
          "old_text": null,
          "new_text": "incrDecrCommand(c,1)",
          "old_line_content": "static void incrCommand(redisClient *c) {",
          "new_line_content": "    incrDecrCommand(c,1);",
          "content_same": false
        },
        {
          "line": 10500,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nokeyerr)",
          "old_line_content": "        if (!de) {",
          "new_line_content": "            addReply(c,shared.nokeyerr);",
          "content_same": false
        },
        {
          "line": 4356,
          "old_api": null,
          "new_api": "incrDecrCommand",
          "old_text": null,
          "new_text": "incrDecrCommand(c,-1)",
          "old_line_content": "static void decrCommand(redisClient *c) {",
          "new_line_content": "    incrDecrCommand(c,-1);",
          "content_same": false
        },
        {
          "line": 6404,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(key)",
          "old_line_content": "        }",
          "new_line_content": "        decrRefCount(key);",
          "content_same": false
        },
        {
          "line": 10503,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "        }",
          "new_line_content": "        key = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 6406,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(o->ptr,key)",
          "old_line_content": "    } else {",
          "new_line_content": "        if (dictFind(o->ptr,key) != NULL) {",
          "content_same": false
        },
        {
          "line": 4362,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL)",
          "old_line_content": "",
          "new_line_content": "    if (getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL) != REDIS_OK) return;",
          "content_same": false
        },
        {
          "line": 10507,
          "old_api": null,
          "new_api": "dupStringObject",
          "old_text": null,
          "new_text": "dupStringObject(key)",
          "old_line_content": "        if (key->refcount > 1) {",
          "new_line_content": "            robj *newkey = dupStringObject(key);",
          "content_same": false
        },
        {
          "line": 8464,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    int j;",
          "new_line_content": "    time_t now = time(NULL);",
          "content_same": false
        },
        {
          "line": 10513,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"-ERR This key is not in memory\\r\\n\")",
          "old_line_content": "        if (key->storage != REDIS_VM_MEMORY) {",
          "new_line_content": "            addReplySds(c,sdsnew(\"-ERR This key is not in memory\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 4369,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL)",
          "old_line_content": "",
          "new_line_content": "    if (getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL) != REDIS_OK) return;",
          "content_same": false
        },
        {
          "line": 6418,
          "old_api": null,
          "new_api": "getDecodedObject",
          "old_text": null,
          "new_text": "getDecodedObject(key)",
          "old_line_content": "    if (o->encoding == REDIS_ENCODING_ZIPMAP) {",
          "new_line_content": "        key = getDecodedObject(key);",
          "content_same": false
        },
        {
          "line": 8468,
          "old_api": null,
          "new_api": "getpid",
          "old_text": null,
          "new_text": "getpid()",
          "old_line_content": "     * one used by rewriteAppendOnlyFileBackground() function. */",
          "new_line_content": "    snprintf(tmpfile,256,\"temp-rewriteaof-%d.aof\", (int) getpid());",
          "content_same": false
        },
        {
          "line": 10518,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.err)",
          "old_line_content": "        } else {",
          "new_line_content": "            addReply(c,shared.err);",
          "content_same": false
        },
        {
          "line": 8471,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "    if (!fp) {",
          "new_line_content": "        redisLog(REDIS_WARNING, \"Failed rewriting the append only file: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 10520,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr,\"populate\")",
          "old_line_content": "        }",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"populate\") && c->argc == 3) {",
          "content_same": false
        },
        {
          "line": 4378,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "",
          "new_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 6427,
          "old_api": null,
          "new_api": "zipmapLen",
          "old_text": null,
          "new_text": "zipmapLen(o->ptr)",
          "old_line_content": "        /* Check if the zipmap needs to be upgraded to a real hash table */",
          "new_line_content": "        if (zipmapLen(o->ptr) > server.hash_max_zipmap_entries)",
          "content_same": false
        },
        {
          "line": 10525,
          "old_api": null,
          "new_api": "getLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongFromObjectOrReply(c, c->argv[2], &keys, NULL)",
          "old_line_content": "",
          "new_line_content": "        if (getLongFromObjectOrReply(c, c->argv[2], &keys, NULL) != REDIS_OK)",
          "content_same": false
        },
        {
          "line": 8478,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(d)",
          "old_line_content": "        dict *d = db->dict;",
          "new_line_content": "        if (dictSize(d) == 0) continue;",
          "content_same": false
        },
        {
          "line": 4381,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(c->db->dict,c->argv[1],c->argv[2])",
          "old_line_content": "        /* Create the key */",
          "new_line_content": "        retval = dictAdd(c->db->dict,c->argv[1],c->argv[2]);",
          "content_same": false
        },
        {
          "line": 10528,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(buf,sizeof(buf),\"key:%lu\",j)",
          "old_line_content": "        for (j = 0; j < keys; j++) {",
          "new_line_content": "            snprintf(buf,sizeof(buf),\"key:%lu\",j);",
          "content_same": false
        },
        {
          "line": 8481,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "        if (!di) {",
          "new_line_content": "            fclose(fp);",
          "content_same": false
        },
        {
          "line": 6430,
          "old_api": null,
          "new_api": "dictReplace",
          "old_text": null,
          "new_text": "dictReplace(o->ptr,key,value)",
          "old_line_content": "    } else {",
          "new_line_content": "        if (dictReplace(o->ptr,key,value)) {",
          "content_same": false
        },
        {
          "line": 6432,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(key)",
          "old_line_content": "            /* Insert */",
          "new_line_content": "            incrRefCount(key);",
          "content_same": false
        },
        {
          "line": 4388,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(c->db->dict,c->argv[1])",
          "old_line_content": "",
          "new_line_content": "        de = dictFind(c->db->dict,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 6437,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(value)",
          "old_line_content": "        }",
          "new_line_content": "        incrRefCount(value);",
          "content_same": false
        },
        {
          "line": 8486,
          "old_api": null,
          "new_api": "fwrite",
          "old_text": null,
          "new_text": "fwrite(selectcmd,sizeof(selectcmd)-1,1,fp)",
          "old_line_content": "        /* SELECT the new DB */",
          "new_line_content": "        if (fwrite(selectcmd,sizeof(selectcmd)-1,1,fp) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 10534,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(buf,sizeof(buf),\"value:%lu\",j)",
          "old_line_content": "            }",
          "new_line_content": "            snprintf(buf,sizeof(buf),\"value:%lu\",j);",
          "content_same": false
        },
        {
          "line": 4391,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "",
          "new_line_content": "        o = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 4393,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "        if (o->type != REDIS_STRING) {",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 8490,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "        /* Iterate this DB writing every entry */",
          "new_line_content": "        while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 10538,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "        }",
          "new_line_content": "        addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 10541,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"+\")",
          "old_line_content": "        unsigned char digest[20];",
          "new_line_content": "        sds d = sdsnew(\"+\");",
          "content_same": false
        },
        {
          "line": 8495,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "",
          "new_line_content": "            key = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 10544,
          "old_api": null,
          "new_api": "computeDatasetDigest",
          "old_text": null,
          "new_text": "computeDatasetDigest(digest)",
          "old_line_content": "",
          "new_line_content": "        computeDatasetDigest(digest);",
          "content_same": false
        },
        {
          "line": 4399,
          "old_api": null,
          "new_api": "getDecodedObject",
          "old_text": null,
          "new_text": "getDecodedObject(o)",
          "old_line_content": "        if (o->refcount != 1 || o->encoding != REDIS_ENCODING_RAW) {",
          "new_line_content": "            robj *decoded = getDecodedObject(o);",
          "content_same": false
        },
        {
          "line": 10546,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(d, \"%02x\",digest[j])",
          "old_line_content": "        for (j = 0; j < 20; j++)",
          "new_line_content": "            d = sdscatprintf(d, \"%02x\",digest[j]);",
          "content_same": false
        },
        {
          "line": 4401,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(decoded->ptr)",
          "old_line_content": "",
          "new_line_content": "            o = createStringObject(decoded->ptr, sdslen(decoded->ptr));",
          "content_same": false
        },
        {
          "line": 10548,
          "old_api": null,
          "new_api": "sdscatlen",
          "old_text": null,
          "new_text": "sdscatlen(d,\"\\r\\n\",2)",
          "old_line_content": "",
          "new_line_content": "        d = sdscatlen(d,\"\\r\\n\",2);",
          "content_same": false
        },
        {
          "line": 6447,
          "old_api": null,
          "new_api": "getDecodedObject",
          "old_text": null,
          "new_text": "getDecodedObject(key)",
          "old_line_content": "    if (o->encoding == REDIS_ENCODING_ZIPMAP) {",
          "new_line_content": "        key = getDecodedObject(key);",
          "content_same": false
        },
        {
          "line": 8502,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "                key->storage == REDIS_VM_SWAPPING) {",
          "new_line_content": "                o = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 10551,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\n            \"-ERR Syntax error, try DEBUG [SEGFAULT|OBJECT <key>|SWAPIN <key>|SWAPOUT <key>|RELOAD]\\r\\n\")",
          "old_line_content": "    } else {",
          "new_line_content": "        addReplySds(c,sdsnew(",
          "content_same": false
        },
        {
          "line": 4407,
          "old_api": null,
          "new_api": "sdscatlen",
          "old_text": null,
          "new_text": "sdscatlen(o->ptr,\n                c->argv[2]->ptr, sdslen(c->argv[2]->ptr))",
          "old_line_content": "        if (c->argv[2]->encoding == REDIS_ENCODING_RAW) {",
          "new_line_content": "            o->ptr = sdscatlen(o->ptr,",
          "content_same": false
        },
        {
          "line": 8505,
          "old_api": null,
          "new_api": "vmPreviewObject",
          "old_text": null,
          "new_text": "vmPreviewObject(key)",
          "old_line_content": "            } else {",
          "new_line_content": "                o = vmPreviewObject(key);",
          "content_same": false
        },
        {
          "line": 4410,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(o->ptr, \"%ld\",\n                (unsigned long) c->argv[2]->ptr)",
          "old_line_content": "        } else {",
          "new_line_content": "            o->ptr = sdscatprintf(o->ptr, \"%ld\",",
          "content_same": false
        },
        {
          "line": 6451,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete((dict*)o->ptr,key)",
          "old_line_content": "    } else {",
          "new_line_content": "        deleted = dictDelete((dict*)o->ptr,key) == DICT_OK;",
          "content_same": false
        },
        {
          "line": 8508,
          "old_api": null,
          "new_api": "getExpire",
          "old_text": null,
          "new_text": "getExpire(db,key)",
          "old_line_content": "            }",
          "new_line_content": "            expiretime = getExpire(db,key);",
          "content_same": false
        },
        {
          "line": 10557,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"=== ASSERTION FAILED ===\")",
          "old_line_content": "static void _redisAssert(char *estr, char *file, int line) {",
          "new_line_content": "    redisLog(REDIS_WARNING,\"=== ASSERTION FAILED ===\");",
          "content_same": false
        },
        {
          "line": 4413,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(o->ptr)",
          "old_line_content": "        }",
          "new_line_content": "        totlen = sdslen(o->ptr);",
          "content_same": false
        },
        {
          "line": 6461,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize((dict*)o->ptr)",
          "old_line_content": "    return (o->encoding == REDIS_ENCODING_ZIPMAP) ?",
          "new_line_content": "        zipmapLen((unsigned char*)o->ptr) : dictSize((dict*)o->ptr);",
          "content_same": false
        },
        {
          "line": 10560,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"(forcing SIGSEGV in order to print the stack trace)\")",
          "old_line_content": "#ifdef HAVE_BACKTRACE",
          "new_line_content": "    redisLog(REDIS_WARNING,\"(forcing SIGSEGV in order to print the stack trace)\");",
          "content_same": false
        },
        {
          "line": 4416,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "    server.dirty++;",
          "new_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\":%lu\\r\\n\",(unsigned long)totlen));",
          "content_same": false
        },
        {
          "line": 8514,
          "old_api": null,
          "new_api": "fwrite",
          "old_text": null,
          "new_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "old_line_content": "                char cmd[]=\"*3\\r\\n$3\\r\\nSET\\r\\n\";",
          "new_line_content": "                if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8516,
          "old_api": null,
          "new_api": "fwriteBulkObject",
          "old_text": null,
          "new_text": "fwriteBulkObject(fp,key)",
          "old_line_content": "                /* Key and value */",
          "new_line_content": "                if (fwriteBulkObject(fp,key) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 4421,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[2]->ptr)",
          "old_line_content": "    robj *o;",
          "new_line_content": "    long start = atoi(c->argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 10566,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"!!! Software Failure. Press left mouse button to continue\")",
          "old_line_content": "static void _redisPanic(char *msg, char *file, int line) {",
          "new_line_content": "    redisLog(REDIS_WARNING,\"!!! Software Failure. Press left mouse button to continue\");",
          "content_same": false
        },
        {
          "line": 10569,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"(forcing SIGSEGV in order to print the stack trace)\")",
          "old_line_content": "#ifdef HAVE_BACKTRACE",
          "new_line_content": "    redisLog(REDIS_WARNING,\"(forcing SIGSEGV in order to print the stack trace)\");",
          "content_same": false
        },
        {
          "line": 4426,
          "old_api": null,
          "new_api": "lookupKeyReadOrReply",
          "old_text": null,
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)",
          "old_line_content": "",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "content_same": false
        },
        {
          "line": 8524,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(list,&li)",
          "old_line_content": "",
          "new_line_content": "                listRewind(list,&li);",
          "content_same": false
        },
        {
          "line": 4429,
          "old_api": null,
          "new_api": "getDecodedObject",
          "old_text": null,
          "new_text": "getDecodedObject(o)",
          "old_line_content": "",
          "new_line_content": "    o = getDecodedObject(o);",
          "content_same": false
        },
        {
          "line": 8527,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(ln)",
          "old_line_content": "                    char cmd[]=\"*3\\r\\n$5\\r\\nRPUSH\\r\\n\";",
          "new_line_content": "                    robj *eleobj = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 6479,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(hashIterator))",
          "old_line_content": "static hashIterator *hashInitIterator(robj *subject) {",
          "new_line_content": "    hashIterator *hi = zmalloc(sizeof(hashIterator));",
          "content_same": false
        },
        {
          "line": 8529,
          "old_api": null,
          "new_api": "fwrite",
          "old_text": null,
          "new_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "old_line_content": "",
          "new_line_content": "                    if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 10578,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(\"/proc/sys/vm/overcommit_memory\",\"r\")",
          "old_line_content": "int linuxOvercommitMemoryValue(void) {",
          "new_line_content": "    FILE *fp = fopen(\"/proc/sys/vm/overcommit_memory\",\"r\");",
          "content_same": false
        },
        {
          "line": 6482,
          "old_api": null,
          "new_api": "zipmapRewind",
          "old_text": null,
          "new_text": "zipmapRewind(subject->ptr)",
          "old_line_content": "    if (hi->encoding == REDIS_ENCODING_ZIPMAP) {",
          "new_line_content": "        hi->zi = zipmapRewind(subject->ptr);",
          "content_same": false
        },
        {
          "line": 6484,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(subject->ptr)",
          "old_line_content": "    } else if (hi->encoding == REDIS_ENCODING_HT) {",
          "new_line_content": "        hi->di = dictGetIterator(subject->ptr);",
          "content_same": false
        },
        {
          "line": 10582,
          "old_api": null,
          "new_api": "fgets",
          "old_text": null,
          "new_text": "fgets(buf,64,fp)",
          "old_line_content": "    if (!fp) return -1;",
          "new_line_content": "    if (fgets(buf,64,fp) == NULL) {",
          "content_same": false
        },
        {
          "line": 6486,
          "old_api": null,
          "new_api": "redisAssert",
          "old_text": null,
          "new_text": "redisAssert(NULL)",
          "old_line_content": "    } else {",
          "new_line_content": "        redisAssert(NULL);",
          "content_same": false
        },
        {
          "line": 8536,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(set)",
          "old_line_content": "                dict *set = o->ptr;",
          "new_line_content": "                dictIterator *di = dictGetIterator(set);",
          "content_same": false
        },
        {
          "line": 4441,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "        /* Out of range start or start > end result in null reply */",
          "new_line_content": "        addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 10586,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "    }",
          "new_line_content": "    fclose(fp);",
          "content_same": false
        },
        {
          "line": 8539,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "",
          "new_line_content": "                while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 10588,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(buf)",
          "old_line_content": "",
          "new_line_content": "    return atoi(buf);",
          "content_same": false
        },
        {
          "line": 8541,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "                    char cmd[]=\"*3\\r\\n$4\\r\\nSADD\\r\\n\";",
          "new_line_content": "                    robj *eleobj = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 6493,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(hi->di)",
          "old_line_content": "    if (hi->encoding == REDIS_ENCODING_HT) {",
          "new_line_content": "        dictReleaseIterator(hi->di);",
          "content_same": false
        },
        {
          "line": 8543,
          "old_api": null,
          "new_api": "fwrite",
          "old_text": null,
          "new_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "old_line_content": "",
          "new_line_content": "                    if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 10592,
          "old_api": null,
          "new_api": "linuxOvercommitMemoryValue",
          "old_text": null,
          "new_text": "linuxOvercommitMemoryValue()",
          "old_line_content": "void linuxOvercommitMemoryWarning(void) {",
          "new_line_content": "    if (linuxOvercommitMemoryValue() == 0) {",
          "content_same": false
        },
        {
          "line": 4449,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "    /* Return the result */",
          "new_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"$%zu\\r\\n\",rangelen));",
          "content_same": false
        },
        {
          "line": 6495,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(hi)",
          "old_line_content": "    }",
          "new_line_content": "    zfree(hi);",
          "content_same": false
        },
        {
          "line": 8547,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "                }",
          "new_line_content": "                dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 6502,
          "old_api": null,
          "new_api": "zipmapNext",
          "old_text": null,
          "new_text": "zipmapNext(hi->zi, &hi->zk, &hi->zklen,\n            &hi->zv, &hi->zvlen)",
          "old_line_content": "    if (hi->encoding == REDIS_ENCODING_ZIPMAP) {",
          "new_line_content": "        if ((hi->zi = zipmapNext(hi->zi, &hi->zk, &hi->zklen,",
          "content_same": false
        },
        {
          "line": 8551,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(zs->dict)",
          "old_line_content": "                zset *zs = o->ptr;",
          "new_line_content": "                dictIterator *di = dictGetIterator(zs->dict);",
          "content_same": false
        },
        {
          "line": 6505,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(hi->di)",
          "old_line_content": "    } else {",
          "new_line_content": "        if ((hi->de = dictNext(hi->di)) == NULL) return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 8554,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "",
          "new_line_content": "                while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 10602,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(0)",
          "old_line_content": "",
          "new_line_content": "    if (fork() != 0) exit(0); /* parent exits */",
          "content_same": false
        },
        {
          "line": 8556,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "                    char cmd[]=\"*4\\r\\n$4\\r\\nZADD\\r\\n\";",
          "new_line_content": "                    robj *eleobj = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 4462,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(c->db,c->argv[j])",
          "old_line_content": "    for (j = 1; j < c->argc; j++) {",
          "new_line_content": "        if (deleteKey(c->db,c->argv[j])) {",
          "content_same": false
        },
        {
          "line": 8559,
          "old_api": null,
          "new_api": "fwrite",
          "old_text": null,
          "new_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "old_line_content": "",
          "new_line_content": "                    if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 10608,
          "old_api": null,
          "new_api": "open",
          "old_text": null,
          "new_text": "open(\"/dev/null\", O_RDWR, 0)",
          "old_line_content": "     * it will not log at all. */",
          "new_line_content": "    if ((fd = open(\"/dev/null\", O_RDWR, 0)) != -1) {",
          "content_same": false
        },
        {
          "line": 4467,
          "old_api": null,
          "new_api": "addReplyLong",
          "old_text": null,
          "new_text": "addReplyLong(c,deleted)",
          "old_line_content": "    }",
          "new_line_content": "    addReplyLong(c,deleted);",
          "content_same": false
        },
        {
          "line": 8564,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "                }",
          "new_line_content": "                dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 6516,
          "old_api": null,
          "new_api": "createStringObject",
          "old_text": null,
          "new_text": "createStringObject((char*)hi->zk,hi->zklen)",
          "old_line_content": "        if (what & REDIS_HASH_KEY) {",
          "new_line_content": "            o = createStringObject((char*)hi->zk,hi->zklen);",
          "content_same": false
        },
        {
          "line": 6518,
          "old_api": null,
          "new_api": "createStringObject",
          "old_text": null,
          "new_text": "createStringObject((char*)hi->zv,hi->zvlen)",
          "old_line_content": "        } else {",
          "new_line_content": "            o = createStringObject((char*)hi->zv,hi->zvlen);",
          "content_same": false
        },
        {
          "line": 10615,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(server.pidfile,\"w\")",
          "old_line_content": "    /* Try to write the pid file */",
          "new_line_content": "    fp = fopen(server.pidfile,\"w\");",
          "content_same": false
        },
        {
          "line": 4471,
          "old_api": null,
          "new_api": "expireIfNeeded",
          "old_text": null,
          "new_text": "expireIfNeeded(c->db,c->argv[1])",
          "old_line_content": "static void existsCommand(redisClient *c) {",
          "new_line_content": "    expireIfNeeded(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 10617,
          "old_api": null,
          "new_api": "getpid",
          "old_text": null,
          "new_text": "getpid()",
          "old_line_content": "    if (fp) {",
          "new_line_content": "        fprintf(fp,\"%d\\n\",getpid());",
          "content_same": false
        },
        {
          "line": 8570,
          "old_api": null,
          "new_api": "zipmapRewind",
          "old_text": null,
          "new_text": "zipmapRewind(o->ptr)",
          "old_line_content": "                if (o->encoding == REDIS_ENCODING_ZIPMAP) {",
          "new_line_content": "                    unsigned char *p = zipmapRewind(o->ptr);",
          "content_same": false
        },
        {
          "line": 4475,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.czero)",
          "old_line_content": "    } else {",
          "new_line_content": "        addReply(c, shared.czero);",
          "content_same": false
        },
        {
          "line": 6522,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(hi->de)",
          "old_line_content": "        if (what & REDIS_HASH_KEY) {",
          "new_line_content": "            o = dictGetEntryKey(hi->de);",
          "content_same": false
        },
        {
          "line": 6524,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(hi->de)",
          "old_line_content": "        } else {",
          "new_line_content": "            o = dictGetEntryVal(hi->de);",
          "content_same": false
        },
        {
          "line": 8574,
          "old_api": null,
          "new_api": "zipmapNext",
          "old_text": null,
          "new_text": "zipmapNext(p,&field,&flen,&val,&vlen)",
          "old_line_content": "",
          "new_line_content": "                    while((p = zipmapNext(p,&field,&flen,&val,&vlen)) != NULL) {",
          "content_same": false
        },
        {
          "line": 10623,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"Redis server version %s\\n\", REDIS_VERSION)",
          "old_line_content": "static void version() {",
          "new_line_content": "    printf(\"Redis server version %s\\n\", REDIS_VERSION);",
          "content_same": false
        },
        {
          "line": 4480,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[1]->ptr)",
          "old_line_content": "static void selectCommand(redisClient *c) {",
          "new_line_content": "    int id = atoi(c->argv[1]->ptr);",
          "content_same": false
        },
        {
          "line": 6526,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(o)",
          "old_line_content": "        }",
          "new_line_content": "        incrRefCount(o);",
          "content_same": false
        },
        {
          "line": 4482,
          "old_api": null,
          "new_api": "selectDb",
          "old_text": null,
          "new_text": "selectDb(c,id)",
          "old_line_content": "",
          "new_line_content": "    if (selectDb(c,id) == REDIS_ERR) {",
          "content_same": false
        },
        {
          "line": 8579,
          "old_api": null,
          "new_api": "fwriteBulkString",
          "old_text": null,
          "new_text": "fwriteBulkString(fp,(char*)val,vlen)",
          "old_line_content": "                            return -1;",
          "new_line_content": "                        if (fwriteBulkString(fp,(char*)val,vlen) == -1)",
          "content_same": false
        },
        {
          "line": 10628,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\"Usage: ./redis-server [/path/to/redis.conf]\\n\")",
          "old_line_content": "static void usage() {",
          "new_line_content": "    fprintf(stderr,\"Usage: ./redis-server [/path/to/redis.conf]\\n\");",
          "content_same": false
        },
        {
          "line": 4485,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "    } else {",
          "new_line_content": "        addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 6532,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,key)",
          "old_line_content": "static robj *hashLookupWriteOrCreate(redisClient *c, robj *key) {",
          "new_line_content": "    robj *o = lookupKeyWrite(c->db,key);",
          "content_same": false
        },
        {
          "line": 8583,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(o->ptr)",
          "old_line_content": "                } else {",
          "new_line_content": "                    dictIterator *di = dictGetIterator(o->ptr);",
          "content_same": false
        },
        {
          "line": 6534,
          "old_api": null,
          "new_api": "createHashObject",
          "old_text": null,
          "new_text": "createHashObject()",
          "old_line_content": "    if (o == NULL) {",
          "new_line_content": "        o = createHashObject();",
          "content_same": false
        },
        {
          "line": 8586,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "",
          "new_line_content": "                    while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 6539,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "        if (o->type != REDIS_HASH) {",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 10636,
          "old_api": null,
          "new_api": "initServerConfig",
          "old_text": null,
          "new_text": "initServerConfig()",
          "old_line_content": "",
          "new_line_content": "    initServerConfig();",
          "content_same": false
        },
        {
          "line": 8590,
          "old_api": null,
          "new_api": "fwrite",
          "old_text": null,
          "new_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "old_line_content": "",
          "new_line_content": "                        if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 10638,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(argv[1], \"-v\")",
          "old_line_content": "    if (argc == 2) {",
          "new_line_content": "        if (strcmp(argv[1], \"-v\") == 0 ||",
          "content_same": false
        },
        {
          "line": 4494,
          "old_api": null,
          "new_api": "dictGetRandomKey",
          "old_text": null,
          "new_text": "dictGetRandomKey(c->db->dict)",
          "old_line_content": "    while(1) {",
          "new_line_content": "        de = dictGetRandomKey(c->db->dict);",
          "content_same": false
        },
        {
          "line": 8595,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "                    }",
          "new_line_content": "                    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 10644,
          "old_api": null,
          "new_api": "usage",
          "old_text": null,
          "new_text": "usage()",
          "old_line_content": "    } else if ((argc > 2)) {",
          "new_line_content": "        usage();",
          "content_same": false
        },
        {
          "line": 4499,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "    if (de == NULL) {",
          "new_line_content": "        addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 8598,
          "old_api": null,
          "new_api": "redisPanic",
          "old_text": null,
          "new_text": "redisPanic(\"Unknown object type\")",
          "old_line_content": "            } else {",
          "new_line_content": "                redisPanic(\"Unknown object type\");",
          "content_same": false
        },
        {
          "line": 10646,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Warning: no config file specified, using the default config. In order to specify a config file use 'redis-server /path/to/redis.conf'\")",
          "old_line_content": "    } else {",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Warning: no config file specified, using the default config. In order to specify a config file use 'redis-server /path/to/redis.conf'\");",
          "content_same": false
        },
        {
          "line": 10648,
          "old_api": null,
          "new_api": "daemonize",
          "old_text": null,
          "new_text": "daemonize()",
          "old_line_content": "    }",
          "new_line_content": "    if (server.daemonize) daemonize();",
          "content_same": false
        },
        {
          "line": 4503,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "",
          "new_line_content": "    key = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 4505,
          "old_api": null,
          "new_api": "dupStringObject",
          "old_text": null,
          "new_text": "dupStringObject(key)",
          "old_line_content": "    if (server.vm_enabled) {",
          "new_line_content": "        key = dupStringObject(key);",
          "content_same": false
        },
        {
          "line": 6551,
          "old_api": null,
          "new_api": "hashLookupWriteOrCreate",
          "old_text": null,
          "new_text": "hashLookupWriteOrCreate(c,c->argv[1])",
          "old_line_content": "",
          "new_line_content": "    if ((o = hashLookupWriteOrCreate(c,c->argv[1])) == NULL) return;",
          "content_same": false
        },
        {
          "line": 10652,
          "old_api": null,
          "new_api": "linuxOvercommitMemoryWarning",
          "old_text": null,
          "new_text": "linuxOvercommitMemoryWarning()",
          "old_line_content": "#ifdef __linux__",
          "new_line_content": "    linuxOvercommitMemoryWarning();",
          "content_same": false
        },
        {
          "line": 8605,
          "old_api": null,
          "new_api": "fwrite",
          "old_text": null,
          "new_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "old_line_content": "                if (expiretime < now) continue;",
          "new_line_content": "                if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 10654,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "#endif",
          "new_line_content": "    start = time(NULL);",
          "content_same": false
        },
        {
          "line": 4509,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,key)",
          "old_line_content": "    } else {",
          "new_line_content": "        addReplyBulk(c,key);",
          "content_same": false
        },
        {
          "line": 10656,
          "old_api": null,
          "new_api": "loadAppendOnlyFile",
          "old_text": null,
          "new_text": "loadAppendOnlyFile(server.appendfilename)",
          "old_line_content": "    if (server.appendonly) {",
          "new_line_content": "        if (loadAppendOnlyFile(server.appendfilename) == REDIS_OK)",
          "content_same": false
        },
        {
          "line": 8609,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(o)",
          "old_line_content": "            }",
          "new_line_content": "            if (swapped) decrRefCount(o);",
          "content_same": false
        },
        {
          "line": 6561,
          "old_api": null,
          "new_api": "hashLookupWriteOrCreate",
          "old_text": null,
          "new_text": "hashLookupWriteOrCreate(c,c->argv[1])",
          "old_line_content": "    robj *o;",
          "new_line_content": "    if ((o = hashLookupWriteOrCreate(c,c->argv[1])) == NULL) return;",
          "content_same": false
        },
        {
          "line": 8611,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "        }",
          "new_line_content": "        dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 10659,
          "old_api": null,
          "new_api": "rdbLoad",
          "old_text": null,
          "new_text": "rdbLoad(server.dbfilename)",
          "old_line_content": "    } else {",
          "new_line_content": "        if (rdbLoad(server.dbfilename) == REDIS_OK)",
          "content_same": false
        },
        {
          "line": 4517,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(pattern)",
          "old_line_content": "    sds pattern = c->argv[1]->ptr;",
          "new_line_content": "    int plen = sdslen(pattern);",
          "content_same": false
        },
        {
          "line": 10662,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"The server is now ready to accept connections on port %d\", server.port)",
          "old_line_content": "    }",
          "new_line_content": "    redisLog(REDIS_NOTICE,\"The server is now ready to accept connections on port %d\", server.port);",
          "content_same": false
        },
        {
          "line": 8615,
          "old_api": null,
          "new_api": "fflush",
          "old_text": null,
          "new_text": "fflush(fp)",
          "old_line_content": "    /* Make sure data will not remain on the OS's output buffers */",
          "new_line_content": "    fflush(fp);",
          "content_same": false
        },
        {
          "line": 4519,
          "old_api": null,
          "new_api": "createObject",
          "old_text": null,
          "new_text": "createObject(REDIS_STRING,NULL)",
          "old_line_content": "    unsigned long numkeys = 0;",
          "new_line_content": "    robj *lenobj = createObject(REDIS_STRING,NULL);",
          "content_same": false
        },
        {
          "line": 4521,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(c->db->dict)",
          "old_line_content": "",
          "new_line_content": "    di = dictGetIterator(c->db->dict);",
          "content_same": false
        },
        {
          "line": 6564,
          "old_api": null,
          "new_api": "hashExists",
          "old_text": null,
          "new_text": "hashExists(o, c->argv[2])",
          "old_line_content": "",
          "new_line_content": "    if (hashExists(o, c->argv[2])) {",
          "content_same": false
        },
        {
          "line": 6567,
          "old_api": null,
          "new_api": "hashTryObjectEncoding",
          "old_text": null,
          "new_text": "hashTryObjectEncoding(o,&c->argv[2], &c->argv[3])",
          "old_line_content": "    } else {",
          "new_line_content": "        hashTryObjectEncoding(o,&c->argv[2], &c->argv[3]);",
          "content_same": false
        },
        {
          "line": 8621,
          "old_api": null,
          "new_api": "rename",
          "old_text": null,
          "new_text": "rename(tmpfile,filename)",
          "old_line_content": "     * if the generate DB file is ok. */",
          "new_line_content": "    if (rename(tmpfile,filename) == -1) {",
          "content_same": false
        },
        {
          "line": 4529,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(key)",
          "old_line_content": "        if ((pattern[0] == '*' && pattern[1] == '\\0') ||",
          "new_line_content": "            stringmatchlen(pattern,plen,key,sdslen(key),0)) {",
          "content_same": false
        },
        {
          "line": 8626,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"SYNC append only file rewrite performed\")",
          "old_line_content": "    }",
          "new_line_content": "    redisLog(REDIS_NOTICE,\"SYNC append only file rewrite performed\");",
          "content_same": false
        },
        {
          "line": 6579,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"-ERR wrong number of arguments for HMSET\\r\\n\")",
          "old_line_content": "    if ((c->argc % 2) == 1) {",
          "new_line_content": "        addReplySds(c,sdsnew(\"-ERR wrong number of arguments for HMSET\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 8630,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "werr:",
          "new_line_content": "    fclose(fp);",
          "content_same": false
        },
        {
          "line": 6583,
          "old_api": null,
          "new_api": "hashLookupWriteOrCreate",
          "old_text": null,
          "new_text": "hashLookupWriteOrCreate(c,c->argv[1])",
          "old_line_content": "",
          "new_line_content": "    if ((o = hashLookupWriteOrCreate(c,c->argv[1])) == NULL) return;",
          "content_same": false
        },
        {
          "line": 4536,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "    }",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 6586,
          "old_api": null,
          "new_api": "hashTryObjectEncoding",
          "old_text": null,
          "new_text": "hashTryObjectEncoding(o,&c->argv[i], &c->argv[i+1])",
          "old_line_content": "    for (i = 2; i < c->argc; i += 2) {",
          "new_line_content": "        hashTryObjectEncoding(o,&c->argv[i], &c->argv[i+1]);",
          "content_same": false
        },
        {
          "line": 4541,
          "old_api": null,
          "new_api": "addReplySds",
          "old_text": null,
          "new_text": "addReplySds(c,\n        sdscatprintf(sdsempty(),\":%lu\\r\\n\",dictSize(c->db->dict)))",
          "old_line_content": "static void dbsizeCommand(redisClient *c) {",
          "new_line_content": "    addReplySds(c,",
          "content_same": false
        },
        {
          "line": 6589,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.ok)",
          "old_line_content": "    }",
          "new_line_content": "    addReply(c, shared.ok);",
          "content_same": false
        },
        {
          "line": 4546,
          "old_api": null,
          "new_api": "addReplySds",
          "old_text": null,
          "new_text": "addReplySds(c,\n        sdscatprintf(sdsempty(),\":%lu\\r\\n\",server.lastsave))",
          "old_line_content": "static void lastsaveCommand(redisClient *c) {",
          "new_line_content": "    addReplySds(c,",
          "content_same": false
        },
        {
          "line": 6597,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c,c->argv[3],&incr,NULL)",
          "old_line_content": "",
          "new_line_content": "    if (getLongLongFromObjectOrReply(c,c->argv[3],&incr,NULL) != REDIS_OK) return;",
          "content_same": false
        },
        {
          "line": 4554,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[1])",
          "old_line_content": "",
          "new_line_content": "    o = lookupKeyRead(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 6602,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(current)",
          "old_line_content": "            \"hash value is not an integer\") != REDIS_OK) {",
          "new_line_content": "            decrRefCount(current);",
          "content_same": false
        },
        {
          "line": 8653,
          "old_api": null,
          "new_api": "waitEmptyIOJobsQueue",
          "old_text": null,
          "new_text": "waitEmptyIOJobsQueue()",
          "old_line_content": "    if (server.bgrewritechildpid != -1) return REDIS_ERR;",
          "new_line_content": "    if (server.vm_enabled) waitEmptyIOJobsQueue();",
          "content_same": false
        },
        {
          "line": 6605,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(current)",
          "old_line_content": "        }",
          "new_line_content": "        decrRefCount(current);",
          "content_same": false
        },
        {
          "line": 8658,
          "old_api": null,
          "new_api": "vmReopenSwapFile",
          "old_text": null,
          "new_text": "vmReopenSwapFile()",
          "old_line_content": "",
          "new_line_content": "        if (server.vm_enabled) vmReopenSwapFile();",
          "content_same": false
        },
        {
          "line": 10707,
          "old_api": null,
          "new_api": "REDIS_NOTUSED",
          "old_text": null,
          "new_text": "REDIS_NOTUSED(info)",
          "old_line_content": "    sds infostring;",
          "new_line_content": "    REDIS_NOTUSED(info);",
          "content_same": false
        },
        {
          "line": 6612,
          "old_api": null,
          "new_api": "hashTryObjectEncoding",
          "old_text": null,
          "new_text": "hashTryObjectEncoding(o,&c->argv[2],NULL)",
          "old_line_content": "    new = createStringObjectFromLongLong(value);",
          "new_line_content": "    hashTryObjectEncoding(o,&c->argv[2],NULL);",
          "content_same": false
        },
        {
          "line": 10709,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\n        \"======= Ooops! Redis %s got signal: -%d- =======\", REDIS_VERSION, sig)",
          "old_line_content": "",
          "new_line_content": "    redisLog(REDIS_WARNING,",
          "content_same": false
        },
        {
          "line": 10711,
          "old_api": null,
          "new_api": "genRedisInfoString",
          "old_text": null,
          "new_text": "genRedisInfoString()",
          "old_line_content": "        \"======= Ooops! Redis %s got signal: -%d- =======\", REDIS_VERSION, sig);",
          "new_line_content": "    infostring = genRedisInfoString();",
          "content_same": false
        },
        {
          "line": 8664,
          "old_api": null,
          "new_api": "_exit",
          "old_text": null,
          "new_text": "_exit(1)",
          "old_line_content": "        } else {",
          "new_line_content": "            _exit(1);",
          "content_same": false
        },
        {
          "line": 4567,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(type)",
          "old_line_content": "    }",
          "new_line_content": "    addReplySds(c,sdsnew(type));",
          "content_same": false
        },
        {
          "line": 6615,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,value)",
          "old_line_content": "    decrRefCount(new);",
          "new_line_content": "    addReplyLongLong(c,value);",
          "content_same": false
        },
        {
          "line": 10716,
          "old_api": null,
          "new_api": "backtrace",
          "old_text": null,
          "new_text": "backtrace(trace, 100)",
          "old_line_content": "",
          "new_line_content": "    trace_size = backtrace(trace, 100);",
          "content_same": false
        },
        {
          "line": 8669,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\n                \"Can't rewrite append only file in background: fork: %s\",\n                strerror(errno))",
          "old_line_content": "        if (childpid == -1) {",
          "new_line_content": "            redisLog(REDIS_WARNING,",
          "content_same": false
        },
        {
          "line": 10718,
          "old_api": null,
          "new_api": "getMcontextEip",
          "old_text": null,
          "new_text": "getMcontextEip(uc)",
          "old_line_content": "    /* overwrite sigaction with caller's address */",
          "new_line_content": "    if (getMcontextEip(uc) != NULL) {",
          "content_same": false
        },
        {
          "line": 8671,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "                \"Can't rewrite append only file in background: fork: %s\",",
          "new_line_content": "                strerror(errno));",
          "content_same": false
        },
        {
          "line": 4573,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"-ERR background save in progress\\r\\n\")",
          "old_line_content": "    if (server.bgsavechildpid != -1) {",
          "new_line_content": "        addReplySds(c,sdsnew(\"-ERR background save in progress\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 10721,
          "old_api": null,
          "new_api": "backtrace_symbols",
          "old_text": null,
          "new_text": "backtrace_symbols(trace, trace_size)",
          "old_line_content": "    }",
          "new_line_content": "    messages = backtrace_symbols(trace, trace_size);",
          "content_same": false
        },
        {
          "line": 8674,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\n            \"Background append only file rewriting started by pid %d\",childpid)",
          "old_line_content": "        }",
          "new_line_content": "        redisLog(REDIS_NOTICE,",
          "content_same": false
        },
        {
          "line": 4576,
          "old_api": null,
          "new_api": "rdbSave",
          "old_text": null,
          "new_text": "rdbSave(server.dbfilename)",
          "old_line_content": "    }",
          "new_line_content": "    if (rdbSave(server.dbfilename) == REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 10724,
          "old_api": null,
          "new_api": "findFuncName",
          "old_text": null,
          "new_text": "findFuncName(trace[i], &offset)",
          "old_line_content": "    for (i=1; i<trace_size; ++i) {",
          "new_line_content": "        char *fn = findFuncName(trace[i], &offset), *p;",
          "content_same": false
        },
        {
          "line": 8677,
          "old_api": null,
          "new_api": "updateDictResizePolicy",
          "old_text": null,
          "new_text": "updateDictResizePolicy()",
          "old_line_content": "        server.bgrewritechildpid = childpid;",
          "new_line_content": "        updateDictResizePolicy();",
          "content_same": false
        },
        {
          "line": 10726,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(messages[i],'+')",
          "old_line_content": "",
          "new_line_content": "        p = strchr(messages[i],'+');",
          "content_same": false
        },
        {
          "line": 4579,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.err)",
          "old_line_content": "    } else {",
          "new_line_content": "        addReply(c,shared.err);",
          "content_same": false
        },
        {
          "line": 6624,
          "old_api": null,
          "new_api": "hashGet",
          "old_text": null,
          "new_text": "hashGet(o,c->argv[2])",
          "old_line_content": "",
          "new_line_content": "    if ((value = hashGet(o,c->argv[2])) != NULL) {",
          "content_same": false
        },
        {
          "line": 4585,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"-ERR background save already in progress\\r\\n\")",
          "old_line_content": "    if (server.bgsavechildpid != -1) {",
          "new_line_content": "        addReplySds(c,sdsnew(\"-ERR background save already in progress\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 10730,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"%d redis-server %p %s + %d\", i, trace[i], fn, (unsigned int)offset)",
          "old_line_content": "        } else {",
          "new_line_content": "            redisLog(REDIS_WARNING,\"%d redis-server %p %s + %d\", i, trace[i], fn, (unsigned int)offset);",
          "content_same": false
        },
        {
          "line": 6628,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "    } else {",
          "new_line_content": "        addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 4588,
          "old_api": null,
          "new_api": "rdbSaveBackground",
          "old_text": null,
          "new_text": "rdbSaveBackground(server.dbfilename)",
          "old_line_content": "    }",
          "new_line_content": "    if (rdbSaveBackground(server.dbfilename) == REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 6635,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[1])",
          "old_line_content": "    robj *o, *value;",
          "new_line_content": "    o = lookupKeyRead(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 10734,
          "old_api": null,
          "new_api": "_exit",
          "old_text": null,
          "new_text": "_exit(0)",
          "old_line_content": "    /* free(messages); Don't call free() with possibly corrupted memory. */",
          "new_line_content": "    _exit(0);",
          "content_same": false
        },
        {
          "line": 4590,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(status)",
          "old_line_content": "        char *status = \"+Background saving started\\r\\n\";",
          "new_line_content": "        addReplySds(c,sdsnew(status));",
          "content_same": false
        },
        {
          "line": 4592,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.err)",
          "old_line_content": "    } else {",
          "new_line_content": "        addReply(c,shared.err);",
          "content_same": false
        },
        {
          "line": 6637,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "    if (o != NULL && o->type != REDIS_HASH) {",
          "new_line_content": "        addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 8690,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"-ERR background append only file rewriting already in progress\\r\\n\")",
          "old_line_content": "    if (server.bgrewritechildpid != -1) {",
          "new_line_content": "        addReplySds(c,sdsnew(\"-ERR background append only file rewriting already in progress\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 6643,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "     * an empty hash. The reply should then be a series of NULLs. */",
          "new_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",c->argc-2));",
          "content_same": false
        },
        {
          "line": 10740,
          "old_api": null,
          "new_api": "sigemptyset (&act.sa_mask)",
          "old_text": null,
          "new_text": "sigemptyset (&act.sa_mask)",
          "old_line_content": "",
          "new_line_content": "    sigemptyset (&act.sa_mask);",
          "content_same": false
        },
        {
          "line": 8693,
          "old_api": null,
          "new_api": "rewriteAppendOnlyFileBackground",
          "old_text": null,
          "new_text": "rewriteAppendOnlyFileBackground()",
          "old_line_content": "    }",
          "new_line_content": "    if (rewriteAppendOnlyFileBackground() == REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 4597,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"User requested shutdown, saving DB...\")",
          "old_line_content": "static void shutdownCommand(redisClient *c) {",
          "new_line_content": "    redisLog(REDIS_WARNING,\"User requested shutdown, saving DB...\");",
          "content_same": false
        },
        {
          "line": 8695,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(status)",
          "old_line_content": "        char *status = \"+Background append only file rewriting started\\r\\n\";",
          "new_line_content": "        addReplySds(c,sdsnew(status));",
          "content_same": false
        },
        {
          "line": 6645,
          "old_api": null,
          "new_api": "hashGet",
          "old_text": null,
          "new_text": "hashGet(o,c->argv[i])",
          "old_line_content": "    for (i = 2; i < c->argc; i++) {",
          "new_line_content": "        if (o != NULL && (value = hashGet(o,c->argv[i])) != NULL) {",
          "content_same": false
        },
        {
          "line": 8697,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.err)",
          "old_line_content": "    } else {",
          "new_line_content": "        addReply(c,shared.err);",
          "content_same": false
        },
        {
          "line": 10745,
          "old_api": null,
          "new_api": "sigaction (SIGSEGV, &act, NULL)",
          "old_text": null,
          "new_text": "sigaction (SIGSEGV, &act, NULL)",
          "old_line_content": "    act.sa_sigaction = segvHandler;",
          "new_line_content": "    sigaction (SIGSEGV, &act, NULL);",
          "content_same": false
        },
        {
          "line": 4602,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"There is a live saving child. Killing it!\")",
          "old_line_content": "    if (server.bgsavechildpid != -1) {",
          "new_line_content": "        redisLog(REDIS_WARNING,\"There is a live saving child. Killing it!\");",
          "content_same": false
        },
        {
          "line": 6649,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "        } else {",
          "new_line_content": "            addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 8704,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(tmpfile,256,\"temp-rewriteaof-bg-%d.aof\", (int) childpid)",
          "old_line_content": "",
          "new_line_content": "    snprintf(tmpfile,256,\"temp-rewriteaof-bg-%d.aof\", (int) childpid);",
          "content_same": false
        },
        {
          "line": 4608,
          "old_api": null,
          "new_api": "fsync",
          "old_text": null,
          "new_text": "fsync(server.appendfd)",
          "old_line_content": "        /* Append only file: fsync() the AOF and exit */",
          "new_line_content": "        fsync(server.appendfd);",
          "content_same": false
        },
        {
          "line": 6656,
          "old_api": null,
          "new_api": "lookupKeyWriteOrReply",
          "old_text": null,
          "new_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.czero)",
          "old_line_content": "    robj *o;",
          "new_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "content_same": false
        },
        {
          "line": 6659,
          "old_api": null,
          "new_api": "hashDelete",
          "old_text": null,
          "new_text": "hashDelete(o,c->argv[2])",
          "old_line_content": "",
          "new_line_content": "    if (hashDelete(o,c->argv[2])) {",
          "content_same": false
        },
        {
          "line": 4613,
          "old_api": null,
          "new_api": "rdbSave",
          "old_text": null,
          "new_text": "rdbSave(server.dbfilename)",
          "old_line_content": "        /* Snapshotting. Perform a SYNC SAVE and exit */",
          "new_line_content": "        if (rdbSave(server.dbfilename) == REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 4615,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(server.pidfile)",
          "old_line_content": "            if (server.daemonize)",
          "new_line_content": "                unlink(server.pidfile);",
          "content_same": false
        },
        {
          "line": 6664,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "    } else {",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 6670,
          "old_api": null,
          "new_api": "lookupKeyReadOrReply",
          "old_text": null,
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "old_line_content": "    robj *o;",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "content_same": false
        },
        {
          "line": 4625,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Error trying to save the DB, can't exit\")",
          "old_line_content": "             * synchronization... */",
          "new_line_content": "            redisLog(REDIS_WARNING,\"Error trying to save the DB, can't exit\");",
          "content_same": false
        },
        {
          "line": 6673,
          "old_api": null,
          "new_api": "hashLength",
          "old_text": null,
          "new_text": "hashLength(o)",
          "old_line_content": "",
          "new_line_content": "    addReplyUlong(c,hashLength(o));",
          "content_same": false
        },
        {
          "line": 6681,
          "old_api": null,
          "new_api": "lookupKeyReadOrReply",
          "old_text": null,
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.emptymultibulk)",
          "old_line_content": "",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.emptymultibulk)) == NULL",
          "content_same": false
        },
        {
          "line": 4636,
          "old_api": null,
          "new_api": "sdscmp",
          "old_text": null,
          "new_text": "sdscmp(c->argv[1]->ptr,c->argv[2]->ptr)",
          "old_line_content": "    /* To use the same key as src and dst is probably an error */",
          "new_line_content": "    if (sdscmp(c->argv[1]->ptr,c->argv[2]->ptr) == 0) {",
          "content_same": false
        },
        {
          "line": 6684,
          "old_api": null,
          "new_api": "createObject",
          "old_text": null,
          "new_text": "createObject(REDIS_STRING,NULL)",
          "old_line_content": "",
          "new_line_content": "    lenobj = createObject(REDIS_STRING,NULL);",
          "content_same": false
        },
        {
          "line": 6621,
          "old_api": null,
          "new_api": "lookupKeyReadOrReply",
          "old_text": null,
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)",
          "old_line_content": "    robj *o, *value;",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "content_same": false
        },
        {
          "line": 4641,
          "old_api": null,
          "new_api": "lookupKeyWriteOrReply",
          "old_text": null,
          "new_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.nokeyerr)",
          "old_line_content": "",
          "new_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.nokeyerr)) == NULL)",
          "content_same": false
        },
        {
          "line": 8738,
          "old_api": null,
          "new_api": "zmalloc_enable_thread_safeness",
          "old_text": null,
          "new_text": "zmalloc_enable_thread_safeness()",
          "old_line_content": "    if (server.vm_max_threads != 0)",
          "new_line_content": "        zmalloc_enable_thread_safeness(); /* we need thread safe zmalloc() */",
          "content_same": false
        },
        {
          "line": 6688,
          "old_api": null,
          "new_api": "hashInitIterator",
          "old_text": null,
          "new_text": "hashInitIterator(o)",
          "old_line_content": "",
          "new_line_content": "    hi = hashInitIterator(o);",
          "content_same": false
        },
        {
          "line": 8740,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Using '%s' as swap file\",server.vm_swap_file)",
          "old_line_content": "",
          "new_line_content": "    redisLog(REDIS_NOTICE,\"Using '%s' as swap file\",server.vm_swap_file);",
          "content_same": false
        },
        {
          "line": 4644,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(o)",
          "old_line_content": "",
          "new_line_content": "    incrRefCount(o);",
          "content_same": false
        },
        {
          "line": 8742,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(server.vm_swap_file,\"r+b\")",
          "old_line_content": "    /* Try to open the old swap file, otherwise create it */",
          "new_line_content": "    if ((server.vm_fp = fopen(server.vm_swap_file,\"r+b\")) == NULL) {",
          "content_same": false
        },
        {
          "line": 6691,
          "old_api": null,
          "new_api": "hashCurrent",
          "old_text": null,
          "new_text": "hashCurrent(hi,REDIS_HASH_KEY)",
          "old_line_content": "        if (flags & REDIS_HASH_KEY) {",
          "new_line_content": "            obj = hashCurrent(hi,REDIS_HASH_KEY);",
          "content_same": false
        },
        {
          "line": 4648,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(o)",
          "old_line_content": "        if (nx) {",
          "new_line_content": "            decrRefCount(o);",
          "content_same": false
        },
        {
          "line": 6697,
          "old_api": null,
          "new_api": "hashCurrent",
          "old_text": null,
          "new_text": "hashCurrent(hi,REDIS_HASH_VALUE)",
          "old_line_content": "        if (flags & REDIS_HASH_VALUE) {",
          "new_line_content": "            obj = hashCurrent(hi,REDIS_HASH_VALUE);",
          "content_same": false
        },
        {
          "line": 8746,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\n            \"Can't open the swap file: %s. Exiting.\",\n            strerror(errno))",
          "old_line_content": "    if (server.vm_fp == NULL) {",
          "new_line_content": "        redisLog(REDIS_WARNING,",
          "content_same": false
        },
        {
          "line": 8748,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "            \"Can't open the swap file: %s. Exiting.\",",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 4652,
          "old_api": null,
          "new_api": "dictReplace",
          "old_text": null,
          "new_text": "dictReplace(c->db->dict,c->argv[2],o)",
          "old_line_content": "        }",
          "new_line_content": "        dictReplace(c->db->dict,c->argv[2],o);",
          "content_same": false
        },
        {
          "line": 4654,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(c->argv[2])",
          "old_line_content": "    } else {",
          "new_line_content": "        incrRefCount(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 8751,
          "old_api": null,
          "new_api": "fileno",
          "old_text": null,
          "new_text": "fileno(server.vm_fp)",
          "old_line_content": "    }",
          "new_line_content": "    server.vm_fd = fileno(server.vm_fp);",
          "content_same": false
        },
        {
          "line": 4656,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(c->db,c->argv[1])",
          "old_line_content": "    }",
          "new_line_content": "    deleteKey(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 6703,
          "old_api": null,
          "new_api": "hashReleaseIterator",
          "old_text": null,
          "new_text": "hashReleaseIterator(hi)",
          "old_line_content": "    }",
          "new_line_content": "    hashReleaseIterator(hi);",
          "content_same": false
        },
        {
          "line": 4658,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,nx ? shared.cone : shared.ok)",
          "old_line_content": "    server.dirty++;",
          "new_line_content": "    addReply(c,nx ? shared.cone : shared.ok);",
          "content_same": false
        },
        {
          "line": 6705,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "",
          "new_line_content": "    lenobj->ptr = sdscatprintf(sdsempty(),\"*%lu\\r\\n\",count);",
          "content_same": false
        },
        {
          "line": 8757,
          "old_api": null,
          "new_api": "fcntl",
          "old_text": null,
          "new_text": "fcntl(server.vm_fd,F_SETLK,&fl)",
          "old_line_content": "    fl.l_start = fl.l_len = 0;",
          "new_line_content": "    if (fcntl(server.vm_fd,F_SETLK,&fl) == -1) {",
          "content_same": false
        },
        {
          "line": 4662,
          "old_api": null,
          "new_api": "renameGenericCommand",
          "old_text": null,
          "new_text": "renameGenericCommand(c,0)",
          "old_line_content": "static void renameCommand(redisClient *c) {",
          "new_line_content": "    renameGenericCommand(c,0);",
          "content_same": false
        },
        {
          "line": 6709,
          "old_api": null,
          "new_api": "genericHgetallCommand",
          "old_text": null,
          "new_text": "genericHgetallCommand(c,REDIS_HASH_KEY)",
          "old_line_content": "static void hkeysCommand(redisClient *c) {",
          "new_line_content": "    genericHgetallCommand(c,REDIS_HASH_KEY);",
          "content_same": false
        },
        {
          "line": 6713,
          "old_api": null,
          "new_api": "genericHgetallCommand",
          "old_text": null,
          "new_text": "genericHgetallCommand(c,REDIS_HASH_VALUE)",
          "old_line_content": "static void hvalsCommand(redisClient *c) {",
          "new_line_content": "    genericHgetallCommand(c,REDIS_HASH_VALUE);",
          "content_same": false
        },
        {
          "line": 4666,
          "old_api": null,
          "new_api": "renameGenericCommand",
          "old_text": null,
          "new_text": "renameGenericCommand(c,1)",
          "old_line_content": "static void renamenxCommand(redisClient *c) {",
          "new_line_content": "    renameGenericCommand(c,1);",
          "content_same": false
        },
        {
          "line": 6717,
          "old_api": null,
          "new_api": "genericHgetallCommand",
          "old_text": null,
          "new_text": "genericHgetallCommand(c,REDIS_HASH_KEY|REDIS_HASH_VALUE)",
          "old_line_content": "static void hgetallCommand(redisClient *c) {",
          "new_line_content": "    genericHgetallCommand(c,REDIS_HASH_KEY|REDIS_HASH_VALUE);",
          "content_same": false
        },
        {
          "line": 8770,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Allocating %lld bytes of swap file\",totsize)",
          "old_line_content": "    totsize = server.vm_pages*server.vm_page_size;",
          "new_line_content": "    redisLog(REDIS_NOTICE,\"Allocating %lld bytes of swap file\",totsize);",
          "content_same": false
        },
        {
          "line": 6722,
          "old_api": null,
          "new_api": "lookupKeyReadOrReply",
          "old_text": null,
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "old_line_content": "    robj *o;",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "content_same": false
        },
        {
          "line": 4677,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[2]->ptr)",
          "old_line_content": "    srcid = c->db->id;",
          "new_line_content": "    if (selectDb(c,atoi(c->argv[2]->ptr)) == REDIS_ERR) {",
          "content_same": false
        },
        {
          "line": 6725,
          "old_api": null,
          "new_api": "hashExists",
          "old_text": null,
          "new_text": "hashExists(o,c->argv[2])",
          "old_line_content": "",
          "new_line_content": "    addReply(c, hashExists(o,c->argv[2]) ? shared.cone : shared.czero);",
          "content_same": false
        },
        {
          "line": 8776,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Swap file allocated with success\")",
          "old_line_content": "    } else {",
          "new_line_content": "        redisLog(REDIS_NOTICE,\"Swap file allocated with success\");",
          "content_same": false
        },
        {
          "line": 8778,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc((server.vm_pages+7)/8)",
          "old_line_content": "    }",
          "new_line_content": "    server.vm_bitmap = zmalloc((server.vm_pages+7)/8);",
          "content_same": false
        },
        {
          "line": 4682,
          "old_api": null,
          "new_api": "selectDb",
          "old_text": null,
          "new_text": "selectDb(c,srcid)",
          "old_line_content": "    dst = c->db;",
          "new_line_content": "    selectDb(c,srcid); /* Back to the source DB */",
          "content_same": false
        },
        {
          "line": 6731,
          "old_api": null,
          "new_api": "dictCreate",
          "old_text": null,
          "new_text": "dictCreate(&hashDictType,NULL)",
          "old_line_content": "    unsigned int klen, vlen;",
          "new_line_content": "    dict *dict = dictCreate(&hashDictType,NULL);",
          "content_same": false
        },
        {
          "line": 8781,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(server.vm_bitmap,0,(server.vm_pages+7)/8)",
          "old_line_content": "        (long long) (server.vm_pages+7)/8, server.vm_pages);",
          "new_line_content": "    memset(server.vm_bitmap,0,(server.vm_pages+7)/8);",
          "content_same": false
        },
        {
          "line": 6733,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(o->type == REDIS_HASH && o->encoding != REDIS_ENCODING_HT)",
          "old_line_content": "",
          "new_line_content": "    assert(o->type == REDIS_HASH && o->encoding != REDIS_ENCODING_HT);",
          "content_same": false
        },
        {
          "line": 4687,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.sameobjecterr)",
          "old_line_content": "    if (src == dst) {",
          "new_line_content": "        addReply(c,shared.sameobjecterr);",
          "content_same": false
        },
        {
          "line": 8784,
          "old_api": null,
          "new_api": "listCreate",
          "old_text": null,
          "new_text": "listCreate()",
          "old_line_content": "    /* Initialize threaded I/O (used by Virtual Memory) */",
          "new_line_content": "    server.io_newjobs = listCreate();",
          "content_same": false
        },
        {
          "line": 6738,
          "old_api": null,
          "new_api": "createStringObject",
          "old_text": null,
          "new_text": "createStringObject((char*)key,klen)",
          "old_line_content": "",
          "new_line_content": "        keyobj = createStringObject((char*)key,klen);",
          "content_same": false
        },
        {
          "line": 4692,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "    /* Check if the element exists and get a reference */",
          "new_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4694,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "    if (!o) {",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 8792,
          "old_api": null,
          "new_api": "pipe",
          "old_text": null,
          "new_text": "pipe(pipefds)",
          "old_line_content": "    server.io_active_threads = 0;",
          "new_line_content": "    if (pipe(pipefds) == -1) {",
          "content_same": false
        },
        {
          "line": 6746,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(zm)",
          "old_line_content": "    o->ptr = dict;",
          "new_line_content": "    zfree(zm);",
          "content_same": false
        },
        {
          "line": 4699,
          "old_api": null,
          "new_api": "deleteIfVolatile",
          "old_text": null,
          "new_text": "deleteIfVolatile(dst,c->argv[1])",
          "old_line_content": "    /* Try to add the element to the target DB */",
          "new_line_content": "    deleteIfVolatile(dst,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 8799,
          "old_api": null,
          "new_api": "anetNonBlock",
          "old_text": null,
          "new_text": "anetNonBlock(NULL,server.io_ready_pipe_read)",
          "old_line_content": "    server.io_ready_pipe_write = pipefds[1];",
          "new_line_content": "    redisAssert(anetNonBlock(NULL,server.io_ready_pipe_read) != ANET_ERR);",
          "content_same": false
        },
        {
          "line": 4704,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(c->argv[1])",
          "old_line_content": "    }",
          "new_line_content": "    incrRefCount(c->argv[1]);",
          "content_same": false
        },
        {
          "line": 8801,
          "old_api": null,
          "new_api": "pthread_attr_init",
          "old_text": null,
          "new_text": "pthread_attr_init(&server.io_threads_attr)",
          "old_line_content": "    /* LZF requires a lot of stack */",
          "new_line_content": "    pthread_attr_init(&server.io_threads_attr);",
          "content_same": false
        },
        {
          "line": 6752,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(c->db->dict)",
          "old_line_content": "static void flushdbCommand(redisClient *c) {",
          "new_line_content": "    server.dirty += dictSize(c->db->dict);",
          "content_same": false
        },
        {
          "line": 8804,
          "old_api": null,
          "new_api": "pthread_attr_setstacksize",
          "old_text": null,
          "new_text": "pthread_attr_setstacksize(&server.io_threads_attr, stacksize)",
          "old_line_content": "    while (stacksize < REDIS_THREAD_STACK_SIZE) stacksize *= 2;",
          "new_line_content": "    pthread_attr_setstacksize(&server.io_threads_attr, stacksize);",
          "content_same": false
        },
        {
          "line": 4708,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(src,c->argv[1])",
          "old_line_content": "    /* OK! key moved, free the entry in the source DB */",
          "new_line_content": "    deleteKey(src,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 8806,
          "old_api": null,
          "new_api": "aeCreateFileEvent",
          "old_text": null,
          "new_text": "aeCreateFileEvent(server.el, server.io_ready_pipe_read, AE_READABLE,\n        vmThreadedIOCompletedJob, NULL)",
          "old_line_content": "    /* Listen for events in the threaded I/O pipe */",
          "new_line_content": "    if (aeCreateFileEvent(server.el, server.io_ready_pipe_read, AE_READABLE,",
          "content_same": false
        },
        {
          "line": 4710,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.cone)",
          "old_line_content": "    server.dirty++;",
          "new_line_content": "    addReply(c,shared.cone);",
          "content_same": false
        },
        {
          "line": 8808,
          "old_api": null,
          "new_api": "oom",
          "old_text": null,
          "new_text": "oom(\"creating file event\")",
          "old_line_content": "        vmThreadedIOCompletedJob, NULL) == AE_ERR)",
          "new_line_content": "        oom(\"creating file event\");",
          "content_same": false
        },
        {
          "line": 6759,
          "old_api": null,
          "new_api": "emptyDb",
          "old_text": null,
          "new_text": "emptyDb()",
          "old_line_content": "static void flushallCommand(redisClient *c) {",
          "new_line_content": "    server.dirty += emptyDb();",
          "content_same": false
        },
        {
          "line": 6762,
          "old_api": null,
          "new_api": "kill",
          "old_text": null,
          "new_text": "kill(server.bgsavechildpid,SIGKILL)",
          "old_line_content": "    if (server.bgsavechildpid != -1) {",
          "new_line_content": "        kill(server.bgsavechildpid,SIGKILL);",
          "content_same": false
        },
        {
          "line": 6765,
          "old_api": null,
          "new_api": "rdbSave",
          "old_text": null,
          "new_text": "rdbSave(server.dbfilename)",
          "old_line_content": "    }",
          "new_line_content": "    rdbSave(server.dbfilename);",
          "content_same": false
        },
        {
          "line": 4718,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "",
          "new_line_content": "    lobj = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 8815,
          "old_api": null,
          "new_api": "vmFreePage",
          "old_text": null,
          "new_text": "vmFreePage(page)",
          "old_line_content": "    int bit = page&7;",
          "new_line_content": "    redisAssert(vmFreePage(page) == 1);",
          "content_same": false
        },
        {
          "line": 4720,
          "old_api": null,
          "new_api": "handleClientsWaitingListPush",
          "old_text": null,
          "new_text": "handleClientsWaitingListPush(c,c->argv[1],c->argv[2])",
          "old_line_content": "    if (lobj == NULL) {",
          "new_line_content": "        if (handleClientsWaitingListPush(c,c->argv[1],c->argv[2])) {",
          "content_same": false
        },
        {
          "line": 6770,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*so))",
          "old_line_content": "static redisSortOperation *createSortOperation(int type, robj *pattern) {",
          "new_line_content": "    redisSortOperation *so = zmalloc(sizeof(*so));",
          "content_same": false
        },
        {
          "line": 4724,
          "old_api": null,
          "new_api": "createListObject",
          "old_text": null,
          "new_text": "createListObject()",
          "old_line_content": "        }",
          "new_line_content": "        lobj = createListObject();",
          "content_same": false
        },
        {
          "line": 4727,
          "old_api": null,
          "new_api": "listAddNodeHead",
          "old_text": null,
          "new_text": "listAddNodeHead(list,c->argv[2])",
          "old_line_content": "        if (where == REDIS_HEAD) {",
          "new_line_content": "            listAddNodeHead(list,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 8824,
          "old_api": null,
          "new_api": "vmMarkPageUsed",
          "old_text": null,
          "new_text": "vmMarkPageUsed(page+j)",
          "old_line_content": "    for (j = 0; j < count; j++)",
          "new_line_content": "        vmMarkPageUsed(page+j);",
          "content_same": false
        },
        {
          "line": 4729,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(list,c->argv[2])",
          "old_line_content": "        } else {",
          "new_line_content": "            listAddNodeTail(list,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 8826,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_DEBUG,\"Mark USED pages: %lld pages at %lld\\n\",\n        (long long)count, (long long)page)",
          "old_line_content": "    server.vm_stats_used_pages += count;",
          "new_line_content": "    redisLog(REDIS_DEBUG,\"Mark USED pages: %lld pages at %lld\\n\",",
          "content_same": false
        },
        {
          "line": 4731,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(c->db->dict,c->argv[1],lobj)",
          "old_line_content": "        }",
          "new_line_content": "        dictAdd(c->db->dict,c->argv[1],lobj);",
          "content_same": false
        },
        {
          "line": 4736,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "        if (lobj->type != REDIS_LIST) {",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 8834,
          "old_api": null,
          "new_api": "vmFreePage",
          "old_text": null,
          "new_text": "vmFreePage(page)",
          "old_line_content": "    int bit = page&7;",
          "new_line_content": "    redisAssert(vmFreePage(page) == 0);",
          "content_same": false
        },
        {
          "line": 4739,
          "old_api": null,
          "new_api": "handleClientsWaitingListPush",
          "old_text": null,
          "new_text": "handleClientsWaitingListPush(c,c->argv[1],c->argv[2])",
          "old_line_content": "        }",
          "new_line_content": "        if (handleClientsWaitingListPush(c,c->argv[1],c->argv[2])) {",
          "content_same": false
        },
        {
          "line": 4745,
          "old_api": null,
          "new_api": "listAddNodeHead",
          "old_text": null,
          "new_text": "listAddNodeHead(list,c->argv[2])",
          "old_line_content": "        if (where == REDIS_HEAD) {",
          "new_line_content": "            listAddNodeHead(list,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 8843,
          "old_api": null,
          "new_api": "vmMarkPageFree",
          "old_text": null,
          "new_text": "vmMarkPageFree(page+j)",
          "old_line_content": "    for (j = 0; j < count; j++)",
          "new_line_content": "        vmMarkPageFree(page+j);",
          "content_same": false
        },
        {
          "line": 4747,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(list,c->argv[2])",
          "old_line_content": "        } else {",
          "new_line_content": "            listAddNodeTail(list,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 8845,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_DEBUG,\"Mark FREE pages: %lld pages at %lld\\n\",\n        (long long)count, (long long)page)",
          "old_line_content": "    server.vm_stats_used_pages -= count;",
          "new_line_content": "    redisLog(REDIS_DEBUG,\"Mark FREE pages: %lld pages at %lld\\n\",",
          "content_same": false
        },
        {
          "line": 4749,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(c->argv[2])",
          "old_line_content": "        }",
          "new_line_content": "        incrRefCount(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 6796,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(subst)",
          "old_line_content": "    if (spat[0] == '#' && spat[1] == '\\0') {",
          "new_line_content": "        incrRefCount(subst);",
          "content_same": false
        },
        {
          "line": 4752,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(list)",
          "old_line_content": "    server.dirty++;",
          "new_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\":%d\\r\\n\",listLength(list)));",
          "content_same": false
        },
        {
          "line": 6803,
          "old_api": null,
          "new_api": "getDecodedObject",
          "old_text": null,
          "new_text": "getDecodedObject(subst)",
          "old_line_content": "     * increment the ref count, that we'll decrement later. */",
          "new_line_content": "    subst = getDecodedObject(subst);",
          "content_same": false
        },
        {
          "line": 4756,
          "old_api": null,
          "new_api": "pushGenericCommand",
          "old_text": null,
          "new_text": "pushGenericCommand(c,REDIS_HEAD)",
          "old_line_content": "static void lpushCommand(redisClient *c) {",
          "new_line_content": "    pushGenericCommand(c,REDIS_HEAD);",
          "content_same": false
        },
        {
          "line": 6806,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(ssub)",
          "old_line_content": "    ssub = subst->ptr;",
          "new_line_content": "    if (sdslen(spat)+sdslen(ssub)-1 > REDIS_SORTKEY_MAX) return NULL;",
          "content_same": false
        },
        {
          "line": 4760,
          "old_api": null,
          "new_api": "pushGenericCommand",
          "old_text": null,
          "new_text": "pushGenericCommand(c,REDIS_TAIL)",
          "old_line_content": "static void rpushCommand(redisClient *c) {",
          "new_line_content": "    pushGenericCommand(c,REDIS_TAIL);",
          "content_same": false
        },
        {
          "line": 6809,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(subst)",
          "old_line_content": "    if (!p) {",
          "new_line_content": "        decrRefCount(subst);",
          "content_same": false
        },
        {
          "line": 6814,
          "old_api": null,
          "new_api": "strstr",
          "old_text": null,
          "new_text": "strstr(p+1, \"->\")",
          "old_line_content": "    /* Find out if we're dealing with a hash dereference. */",
          "new_line_content": "    if ((f = strstr(p+1, \"->\")) != NULL) {",
          "content_same": false
        },
        {
          "line": 4767,
          "old_api": null,
          "new_api": "lookupKeyReadOrReply",
          "old_text": null,
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "old_line_content": "",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "content_same": false
        },
        {
          "line": 6817,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(fieldname.buf,f+2,fieldlen-1)",
          "old_line_content": "        /* this also copies \\0 character */",
          "new_line_content": "        memcpy(fieldname.buf,f+2,fieldlen-1);",
          "content_same": false
        },
        {
          "line": 4771,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(l)",
          "old_line_content": "    l = o->ptr;",
          "new_line_content": "    addReplyUlong(c,listLength(l));",
          "content_same": false
        },
        {
          "line": 4776,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[2]->ptr)",
          "old_line_content": "    robj *o;",
          "new_line_content": "    int index = atoi(c->argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 6824,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(ssub)",
          "old_line_content": "    prefixlen = p-spat;",
          "new_line_content": "    sublen = sdslen(ssub);",
          "content_same": false
        },
        {
          "line": 4780,
          "old_api": null,
          "new_api": "lookupKeyReadOrReply",
          "old_text": null,
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)",
          "old_line_content": "",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "content_same": false
        },
        {
          "line": 6831,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(subst)",
          "old_line_content": "    keyname.len = prefixlen+sublen+postfixlen;",
          "new_line_content": "    decrRefCount(subst);",
          "content_same": false
        },
        {
          "line": 4784,
          "old_api": null,
          "new_api": "listIndex",
          "old_text": null,
          "new_text": "listIndex(list, index)",
          "old_line_content": "",
          "new_line_content": "    ln = listIndex(list, index);",
          "content_same": false
        },
        {
          "line": 4786,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "    if (ln == NULL) {",
          "new_line_content": "        addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 6834,
          "old_api": null,
          "new_api": "initStaticStringObject",
          "old_text": null,
          "new_text": "initStaticStringObject(keyobj,((char*)&keyname)+(sizeof(long)*2))",
          "old_line_content": "    /* Lookup substituted key */",
          "new_line_content": "    initStaticStringObject(keyobj,((char*)&keyname)+(sizeof(long)*2));",
          "content_same": false
        },
        {
          "line": 4788,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(ln)",
          "old_line_content": "    } else {",
          "new_line_content": "        robj *ele = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 4795,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[2]->ptr)",
          "old_line_content": "    robj *o;",
          "new_line_content": "    int index = atoi(c->argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 6843,
          "old_api": null,
          "new_api": "initStaticStringObject",
          "old_text": null,
          "new_text": "initStaticStringObject(fieldobj,((char*)&fieldname)+(sizeof(long)*2))",
          "old_line_content": "         * already increases the refcount of the returned object. */",
          "new_line_content": "        initStaticStringObject(fieldobj,((char*)&fieldname)+(sizeof(long)*2));",
          "content_same": false
        },
        {
          "line": 4799,
          "old_api": null,
          "new_api": "lookupKeyWriteOrReply",
          "old_text": null,
          "new_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.nokeyerr)",
          "old_line_content": "",
          "new_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.nokeyerr)) == NULL ||",
          "content_same": false
        },
        {
          "line": 8897,
          "old_api": null,
          "new_api": "vmFreePage",
          "old_text": null,
          "new_text": "vmFreePage(this)",
          "old_line_content": "        }",
          "new_line_content": "        if (vmFreePage(this)) {",
          "content_same": false
        },
        {
          "line": 6850,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(o)",
          "old_line_content": "         * increased. sortCommand decreases it again. */",
          "new_line_content": "        incrRefCount(o);",
          "content_same": false
        },
        {
          "line": 4803,
          "old_api": null,
          "new_api": "listIndex",
          "old_text": null,
          "new_text": "listIndex(list, index)",
          "old_line_content": "",
          "new_line_content": "    ln = listIndex(list, index);",
          "content_same": false
        },
        {
          "line": 4805,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.outofrangeerr)",
          "old_line_content": "    if (ln == NULL) {",
          "new_line_content": "        addReply(c,shared.outofrangeerr);",
          "content_same": false
        },
        {
          "line": 4807,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(ln)",
          "old_line_content": "    } else {",
          "new_line_content": "        robj *ele = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 8904,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_DEBUG, \"FOUND CONTIGUOUS PAGES: %lld pages at %lld\\n\", (long long) n, (long long) *first)",
          "old_line_content": "                server.vm_next_page = this+1;",
          "new_line_content": "                redisLog(REDIS_DEBUG, \"FOUND CONTIGUOUS PAGES: %lld pages at %lld\\n\", (long long) n, (long long) *first);",
          "content_same": false
        },
        {
          "line": 4809,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(ele)",
          "old_line_content": "",
          "new_line_content": "        decrRefCount(ele);",
          "content_same": false
        },
        {
          "line": 8916,
          "old_api": null,
          "new_api": "random",
          "old_text": null,
          "new_text": "random()",
          "old_line_content": "        if (!numfree && since_jump >= REDIS_VM_MAX_RANDOM_JUMP/4) {",
          "new_line_content": "            offset += random() % REDIS_VM_MAX_RANDOM_JUMP;",
          "content_same": false
        },
        {
          "line": 4822,
          "old_api": null,
          "new_api": "lookupKeyWriteOrReply",
          "old_text": null,
          "new_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.nullbulk)",
          "old_line_content": "",
          "new_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "content_same": false
        },
        {
          "line": 4827,
          "old_api": null,
          "new_api": "listFirst",
          "old_text": null,
          "new_text": "listFirst(list)",
          "old_line_content": "    if (where == REDIS_HEAD)",
          "new_line_content": "        ln = listFirst(list);",
          "content_same": false
        },
        {
          "line": 4829,
          "old_api": null,
          "new_api": "listLast",
          "old_text": null,
          "new_text": "listLast(list)",
          "old_line_content": "    else",
          "new_line_content": "        ln = listLast(list);",
          "content_same": false
        },
        {
          "line": 4832,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "    if (ln == NULL) {",
          "new_line_content": "        addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 4834,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(ln)",
          "old_line_content": "    } else {",
          "new_line_content": "        robj *ele = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 8931,
          "old_api": null,
          "new_api": "pthread_mutex_lock",
          "old_text": null,
          "new_text": "pthread_mutex_lock(&server.io_swapfile_mutex)",
          "old_line_content": "static int vmWriteObjectOnSwap(robj *o, off_t page) {",
          "new_line_content": "    if (server.vm_enabled) pthread_mutex_lock(&server.io_swapfile_mutex);",
          "content_same": false
        },
        {
          "line": 6885,
          "old_api": null,
          "new_api": "strcoll",
          "old_text": null,
          "new_text": "strcoll(so1->u.cmpobj->ptr,so2->u.cmpobj->ptr)",
          "old_line_content": "                /* We have both the objects, use strcoll */",
          "new_line_content": "                cmp = strcoll(so1->u.cmpobj->ptr,so2->u.cmpobj->ptr);",
          "content_same": false
        },
        {
          "line": 8936,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "            \"Critical VM problem in vmWriteObjectOnSwap(): can't seek: %s\",",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 6889,
          "old_api": null,
          "new_api": "compareStringObjects",
          "old_text": null,
          "new_text": "compareStringObjects(so1->obj,so2->obj)",
          "old_line_content": "            /* Compare elements directly. */",
          "new_line_content": "            cmp = compareStringObjects(so1->obj,so2->obj);",
          "content_same": false
        },
        {
          "line": 8939,
          "old_api": null,
          "new_api": "rdbSaveObject",
          "old_text": null,
          "new_text": "rdbSaveObject(server.vm_fp,o)",
          "old_line_content": "    }",
          "new_line_content": "    rdbSaveObject(server.vm_fp,o);",
          "content_same": false
        },
        {
          "line": 4843,
          "old_api": null,
          "new_api": "popGenericCommand",
          "old_text": null,
          "new_text": "popGenericCommand(c,REDIS_HEAD)",
          "old_line_content": "static void lpopCommand(redisClient *c) {",
          "new_line_content": "    popGenericCommand(c,REDIS_HEAD);",
          "content_same": false
        },
        {
          "line": 4847,
          "old_api": null,
          "new_api": "popGenericCommand",
          "old_text": null,
          "new_text": "popGenericCommand(c,REDIS_TAIL)",
          "old_line_content": "static void rpopCommand(redisClient *c) {",
          "new_line_content": "    popGenericCommand(c,REDIS_TAIL);",
          "content_same": false
        },
        {
          "line": 4852,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[2]->ptr)",
          "old_line_content": "    robj *o;",
          "new_line_content": "    int start = atoi(c->argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 8950,
          "old_api": null,
          "new_api": "rdbSavedObjectPages",
          "old_text": null,
          "new_text": "rdbSavedObjectPages(val,NULL)",
          "old_line_content": "static int vmSwapObjectBlocking(robj *key, robj *val) {",
          "new_line_content": "    off_t pages = rdbSavedObjectPages(val,NULL);",
          "content_same": false
        },
        {
          "line": 8953,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(key->storage == REDIS_VM_MEMORY)",
          "old_line_content": "",
          "new_line_content": "    assert(key->storage == REDIS_VM_MEMORY);",
          "content_same": false
        },
        {
          "line": 4860,
          "old_api": null,
          "new_api": "lookupKeyReadOrReply",
          "old_text": null,
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.emptymultibulk)",
          "old_line_content": "",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.emptymultibulk)) == NULL",
          "content_same": false
        },
        {
          "line": 6908,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[1])",
          "old_line_content": "    /* Lookup the key to sort. It must be of the right types */",
          "new_line_content": "    sortval = lookupKeyRead(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 6910,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.emptymultibulk)",
          "old_line_content": "    if (sortval == NULL) {",
          "new_line_content": "        addReply(c,shared.emptymultibulk);",
          "content_same": false
        },
        {
          "line": 4863,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(list)",
          "old_line_content": "    list = o->ptr;",
          "new_line_content": "    llen = listLength(list);",
          "content_same": false
        },
        {
          "line": 8961,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(val)",
          "old_line_content": "    key->vtype = val->type;",
          "new_line_content": "    decrRefCount(val); /* Deallocate the object from memory. */",
          "content_same": false
        },
        {
          "line": 6916,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "    {",
          "new_line_content": "        addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 4874,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.emptymultibulk)",
          "old_line_content": "        /* Out of range start or start > end result in empty list */",
          "new_line_content": "        addReply(c,shared.emptymultibulk);",
          "content_same": false
        },
        {
          "line": 6922,
          "old_api": null,
          "new_api": "listCreate",
          "old_text": null,
          "new_text": "listCreate()",
          "old_line_content": "     * Operations can be GET/DEL/INCR/DECR */",
          "new_line_content": "    operations = listCreate();",
          "content_same": false
        },
        {
          "line": 8974,
          "old_api": null,
          "new_api": "pthread_mutex_lock",
          "old_text": null,
          "new_text": "pthread_mutex_lock(&server.io_swapfile_mutex)",
          "old_line_content": "",
          "new_line_content": "    if (server.vm_enabled) pthread_mutex_lock(&server.io_swapfile_mutex);",
          "content_same": false
        },
        {
          "line": 4881,
          "old_api": null,
          "new_api": "listIndex",
          "old_text": null,
          "new_text": "listIndex(list, start)",
          "old_line_content": "    /* Return the result in form of a multi-bulk reply */",
          "new_line_content": "    ln = listIndex(list, start);",
          "content_same": false
        },
        {
          "line": 8978,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "            \"Unrecoverable VM problem in vmReadObjectFromSwap(): can't seek: %s\",",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 6929,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(sortval)",
          "old_line_content": "     * and the sorted key itself may get destroied */",
          "new_line_content": "    incrRefCount(sortval);",
          "content_same": false
        },
        {
          "line": 4884,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(ln)",
          "old_line_content": "    for (j = 0; j < rangelen; j++) {",
          "new_line_content": "        ele = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 8981,
          "old_api": null,
          "new_api": "rdbLoadObject",
          "old_text": null,
          "new_text": "rdbLoadObject(type,server.vm_fp)",
          "old_line_content": "    }",
          "new_line_content": "    o = rdbLoadObject(type,server.vm_fp);",
          "content_same": false
        },
        {
          "line": 6934,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"asc\")",
          "old_line_content": "        int leftargs = c->argc-j-1;",
          "new_line_content": "        if (!strcasecmp(c->argv[j]->ptr,\"asc\")) {",
          "content_same": false
        },
        {
          "line": 8983,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "    if (o == NULL) {",
          "new_line_content": "        redisLog(REDIS_WARNING, \"Unrecoverable VM problem in vmReadObjectFromSwap(): can't load object from swap file: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 6936,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"desc\")",
          "old_line_content": "            desc = 0;",
          "new_line_content": "        } else if (!strcasecmp(c->argv[j]->ptr,\"desc\")) {",
          "content_same": false
        },
        {
          "line": 8986,
          "old_api": null,
          "new_api": "pthread_mutex_unlock",
          "old_text": null,
          "new_text": "pthread_mutex_unlock(&server.io_swapfile_mutex)",
          "old_line_content": "    }",
          "new_line_content": "    if (server.vm_enabled) pthread_mutex_unlock(&server.io_swapfile_mutex);",
          "content_same": false
        },
        {
          "line": 6938,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"alpha\")",
          "old_line_content": "            desc = 1;",
          "new_line_content": "        } else if (!strcasecmp(c->argv[j]->ptr,\"alpha\")) {",
          "content_same": false
        },
        {
          "line": 4892,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[2]->ptr)",
          "old_line_content": "    robj *o;",
          "new_line_content": "    int start = atoi(c->argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 6940,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"limit\")",
          "old_line_content": "            alpha = 1;",
          "new_line_content": "        } else if (!strcasecmp(c->argv[j]->ptr,\"limit\") && leftargs >= 2) {",
          "content_same": false
        },
        {
          "line": 6944,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"store\")",
          "old_line_content": "            j+=2;",
          "new_line_content": "        } else if (!strcasecmp(c->argv[j]->ptr,\"store\") && leftargs >= 1) {",
          "content_same": false
        },
        {
          "line": 4899,
          "old_api": null,
          "new_api": "lookupKeyWriteOrReply",
          "old_text": null,
          "new_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.ok)",
          "old_line_content": "",
          "new_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.ok)) == NULL ||",
          "content_same": false
        },
        {
          "line": 6947,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"by\")",
          "old_line_content": "            j++;",
          "new_line_content": "        } else if (!strcasecmp(c->argv[j]->ptr,\"by\") && leftargs >= 1) {",
          "content_same": false
        },
        {
          "line": 8998,
          "old_api": null,
          "new_api": "redisAssert",
          "old_text": null,
          "new_text": "redisAssert(key->storage == REDIS_VM_SWAPPED || key->storage == REDIS_VM_LOADING)",
          "old_line_content": "",
          "new_line_content": "    redisAssert(key->storage == REDIS_VM_SWAPPED || key->storage == REDIS_VM_LOADING);",
          "content_same": false
        },
        {
          "line": 4902,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(list)",
          "old_line_content": "    list = o->ptr;",
          "new_line_content": "    llen = listLength(list);",
          "content_same": false
        },
        {
          "line": 6951,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(c->argv[j+1]->ptr,'*')",
          "old_line_content": "             * we don't need to sort nor to lookup the weight keys. */",
          "new_line_content": "            if (strchr(c->argv[j+1]->ptr,'*') == NULL) dontsort = 1;",
          "content_same": false
        },
        {
          "line": 6953,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"get\")",
          "old_line_content": "            j++;",
          "new_line_content": "        } else if (!strcasecmp(c->argv[j]->ptr,\"get\") && leftargs >= 1) {",
          "content_same": false
        },
        {
          "line": 9003,
          "old_api": null,
          "new_api": "vmMarkPagesFree",
          "old_text": null,
          "new_text": "vmMarkPagesFree(key->vm.page,key->vm.usedpages)",
          "old_line_content": "        key->vm.atime = server.unixtime;",
          "new_line_content": "        vmMarkPagesFree(key->vm.page,key->vm.usedpages);",
          "content_same": false
        },
        {
          "line": 6959,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(sortval)",
          "old_line_content": "        } else {",
          "new_line_content": "            decrRefCount(sortval);",
          "content_same": false
        },
        {
          "line": 9008,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_DEBUG, \"VM: object %s previewed from disk\",\n            (unsigned char*) key->ptr)",
          "old_line_content": "    } else {",
          "new_line_content": "        redisLog(REDIS_DEBUG, \"VM: object %s previewed from disk\",",
          "content_same": false
        },
        {
          "line": 6969,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength((list*)sortval->ptr)",
          "old_line_content": "    switch(sortval->type) {",
          "new_line_content": "    case REDIS_LIST: vectorlen = listLength((list*)sortval->ptr); break;",
          "content_same": false
        },
        {
          "line": 4923,
          "old_api": null,
          "new_api": "listFirst",
          "old_text": null,
          "new_text": "listFirst(list)",
          "old_line_content": "    for (j = 0; j < ltrim; j++) {",
          "new_line_content": "        ln = listFirst(list);",
          "content_same": false
        },
        {
          "line": 9020,
          "old_api": null,
          "new_api": "vmCancelThreadedIOJob",
          "old_text": null,
          "new_text": "vmCancelThreadedIOJob(key)",
          "old_line_content": "    if (key->storage == REDIS_VM_LOADING)",
          "new_line_content": "        vmCancelThreadedIOJob(key);",
          "content_same": false
        },
        {
          "line": 6974,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(redisSortObject)*vectorlen)",
          "old_line_content": "    }",
          "new_line_content": "    vector = zmalloc(sizeof(redisSortObject)*vectorlen);",
          "content_same": false
        },
        {
          "line": 4927,
          "old_api": null,
          "new_api": "listLast",
          "old_text": null,
          "new_text": "listLast(list)",
          "old_line_content": "    for (j = 0; j < rtrim; j++) {",
          "new_line_content": "        ln = listLast(list);",
          "content_same": false
        },
        {
          "line": 4930,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(c->db,c->argv[1])",
          "old_line_content": "    }",
          "new_line_content": "    if (listLength(list) == 0) deleteKey(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4932,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "    server.dirty++;",
          "new_line_content": "    addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 9029,
          "old_api": null,
          "new_api": "vmGenericLoadObject",
          "old_text": null,
          "new_text": "vmGenericLoadObject(key,1)",
          "old_line_content": "static robj *vmPreviewObject(robj *key) {",
          "new_line_content": "    return vmGenericLoadObject(key,1);",
          "content_same": false
        },
        {
          "line": 6982,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(list,&li)",
          "old_line_content": "",
          "new_line_content": "        listRewind(list,&li);",
          "content_same": false
        },
        {
          "line": 4939,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[2]->ptr)",
          "old_line_content": "    listNode *ln, *next;",
          "new_line_content": "    int toremove = atoi(c->argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 4943,
          "old_api": null,
          "new_api": "lookupKeyWriteOrReply",
          "old_text": null,
          "new_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.czero)",
          "old_line_content": "",
          "new_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "content_same": false
        },
        {
          "line": 4953,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(ln)",
          "old_line_content": "    while (ln) {",
          "new_line_content": "        robj *ele = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 7002,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(set)",
          "old_line_content": "",
          "new_line_content": "        di = dictGetIterator(set);",
          "content_same": false
        },
        {
          "line": 4956,
          "old_api": null,
          "new_api": "equalStringObjects",
          "old_text": null,
          "new_text": "equalStringObjects(ele,c->argv[3])",
          "old_line_content": "        next = fromtail ? ln->prev : ln->next;",
          "new_line_content": "        if (equalStringObjects(ele,c->argv[3])) {",
          "content_same": false
        },
        {
          "line": 9057,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(o->ptr)",
          "old_line_content": "        } else {",
          "new_line_content": "            asize = sdslen(o->ptr)+sizeof(*o)+sizeof(long)*2;",
          "content_same": false
        },
        {
          "line": 7009,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "        }",
          "new_line_content": "        dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 7011,
          "old_api": null,
          "new_api": "redisAssert",
          "old_text": null,
          "new_text": "redisAssert(j == vectorlen)",
          "old_line_content": "    }",
          "new_line_content": "    redisAssert(j == vectorlen);",
          "content_same": false
        },
        {
          "line": 4964,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(c->db,c->argv[1])",
          "old_line_content": "    }",
          "new_line_content": "    if (listLength(list) == 0) deleteKey(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 9062,
          "old_api": null,
          "new_api": "listFirst",
          "old_text": null,
          "new_text": "listFirst(l)",
          "old_line_content": "        l = o->ptr;",
          "new_line_content": "        listNode *ln = listFirst(l);",
          "content_same": false
        },
        {
          "line": 7019,
          "old_api": null,
          "new_api": "lookupKeyByPattern",
          "old_text": null,
          "new_text": "lookupKeyByPattern(c->db,sortby,vector[j].obj)",
          "old_line_content": "                /* lookup value to sort by */",
          "new_line_content": "                byval = lookupKeyByPattern(c->db,sortby,vector[j].obj);",
          "content_same": false
        },
        {
          "line": 9070,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(ele->ptr)",
          "old_line_content": "            elesize = (ele->encoding == REDIS_ENCODING_RAW) ?",
          "new_line_content": "                            (sizeof(*o)+sdslen(ele->ptr)) :",
          "content_same": false
        },
        {
          "line": 9072,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(l)",
          "old_line_content": "                            sizeof(*o);",
          "new_line_content": "            asize += (sizeof(listNode)+elesize)*listLength(l);",
          "content_same": false
        },
        {
          "line": 7027,
          "old_api": null,
          "new_api": "getDecodedObject",
          "old_text": null,
          "new_text": "getDecodedObject(byval)",
          "old_line_content": "            if (alpha) {",
          "new_line_content": "                if (sortby) vector[j].u.cmpobj = getDecodedObject(byval);",
          "content_same": false
        },
        {
          "line": 7030,
          "old_api": null,
          "new_api": "strtod",
          "old_text": null,
          "new_text": "strtod(byval->ptr,NULL)",
          "old_line_content": "                if (byval->encoding == REDIS_ENCODING_RAW) {",
          "new_line_content": "                    vector[j].u.score = strtod(byval->ptr,NULL);",
          "content_same": false
        },
        {
          "line": 9080,
          "old_api": null,
          "new_api": "dictSlots",
          "old_text": null,
          "new_text": "dictSlots(d)",
          "old_line_content": "",
          "new_line_content": "        asize = sizeof(dict)+(sizeof(struct dictEntry*)*dictSlots(d));",
          "content_same": false
        },
        {
          "line": 9082,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(d)",
          "old_line_content": "        if (z) asize += sizeof(zset)-sizeof(dict);",
          "new_line_content": "        if (dictSize(d)) {",
          "content_same": false
        },
        {
          "line": 4988,
          "old_api": null,
          "new_api": "lookupKeyWriteOrReply",
          "old_text": null,
          "new_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.nullbulk)",
          "old_line_content": "",
          "new_line_content": "    if ((sobj = lookupKeyWriteOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "content_same": false
        },
        {
          "line": 7037,
          "old_api": null,
          "new_api": "redisAssert",
          "old_text": null,
          "new_text": "redisAssert(1 != 1)",
          "old_line_content": "                } else {",
          "new_line_content": "                    redisAssert(1 != 1);",
          "content_same": false
        },
        {
          "line": 9086,
          "old_api": null,
          "new_api": "dictGetRandomKey",
          "old_text": null,
          "new_text": "dictGetRandomKey(d)",
          "old_line_content": "",
          "new_line_content": "            de = dictGetRandomKey(d);",
          "content_same": false
        },
        {
          "line": 4991,
          "old_api": null,
          "new_api": "listLast",
          "old_text": null,
          "new_text": "listLast(srclist)",
          "old_line_content": "    srclist = sobj->ptr;",
          "new_line_content": "    ln = listLast(srclist);",
          "content_same": false
        },
        {
          "line": 9089,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(ele->ptr)",
          "old_line_content": "            elesize = (ele->encoding == REDIS_ENCODING_RAW) ?",
          "new_line_content": "                            (sizeof(*o)+sdslen(ele->ptr)) :",
          "content_same": false
        },
        {
          "line": 4994,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "    if (ln == NULL) {",
          "new_line_content": "        addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 9091,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(d)",
          "old_line_content": "                            sizeof(*o);",
          "new_line_content": "            asize += (sizeof(struct dictEntry)+elesize)*dictSize(d);",
          "content_same": false
        },
        {
          "line": 4996,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[2])",
          "old_line_content": "    } else {",
          "new_line_content": "        robj *dobj = lookupKeyWrite(c->db,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 7044,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(byval)",
          "old_line_content": "            if (sortby) {",
          "new_line_content": "                decrRefCount(byval);",
          "content_same": false
        },
        {
          "line": 9097,
          "old_api": null,
          "new_api": "zipmapRewind",
          "old_text": null,
          "new_text": "zipmapRewind((unsigned char*)o->ptr)",
          "old_line_content": "        if (o->encoding == REDIS_ENCODING_ZIPMAP) {",
          "new_line_content": "            unsigned char *p = zipmapRewind((unsigned char*)o->ptr);",
          "content_same": false
        },
        {
          "line": 5001,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "        if (dobj && dobj->type != REDIS_LIST) {",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 9102,
          "old_api": null,
          "new_api": "zipmapNext",
          "old_text": null,
          "new_text": "zipmapNext(p,&key,&klen,&val,&vlen)",
          "old_line_content": "",
          "new_line_content": "            if ((p = zipmapNext(p,&key,&klen,&val,&vlen)) == NULL) {",
          "content_same": false
        },
        {
          "line": 5007,
          "old_api": null,
          "new_api": "handleClientsWaitingListPush",
          "old_text": null,
          "new_text": "handleClientsWaitingListPush(c,c->argv[2],ele)",
          "old_line_content": "         * passed to some BLPOP-ing client */",
          "new_line_content": "        if (!handleClientsWaitingListPush(c,c->argv[2],ele)) {",
          "content_same": false
        },
        {
          "line": 5010,
          "old_api": null,
          "new_api": "createListObject",
          "old_text": null,
          "new_text": "createListObject()",
          "old_line_content": "                /* Create the list if the key does not exist */",
          "new_line_content": "                dobj = createListObject();",
          "content_same": false
        },
        {
          "line": 9109,
          "old_api": null,
          "new_api": "dictSlots",
          "old_text": null,
          "new_text": "dictSlots(d)",
          "old_line_content": "            d = o->ptr;",
          "new_line_content": "            asize = sizeof(dict)+(sizeof(struct dictEntry*)*dictSlots(d));",
          "content_same": false
        },
        {
          "line": 5015,
          "old_api": null,
          "new_api": "listAddNodeHead",
          "old_text": null,
          "new_text": "listAddNodeHead(dstlist,ele)",
          "old_line_content": "            dstlist = dobj->ptr;",
          "new_line_content": "            listAddNodeHead(dstlist,ele);",
          "content_same": false
        },
        {
          "line": 7064,
          "old_api": null,
          "new_api": "pqsort",
          "old_text": null,
          "new_text": "pqsort(vector,vectorlen,sizeof(redisSortObject),sortCompare, start,end)",
          "old_line_content": "        if (sortby && (start != 0 || end != vectorlen-1))",
          "new_line_content": "            pqsort(vector,vectorlen,sizeof(redisSortObject),sortCompare, start,end);",
          "content_same": false
        },
        {
          "line": 9114,
          "old_api": null,
          "new_api": "dictGetRandomKey",
          "old_text": null,
          "new_text": "dictGetRandomKey(d)",
          "old_line_content": "",
          "new_line_content": "                de = dictGetRandomKey(d);",
          "content_same": false
        },
        {
          "line": 7066,
          "old_api": null,
          "new_api": "qsort",
          "old_text": null,
          "new_text": "qsort(vector,vectorlen,sizeof(redisSortObject),sortCompare)",
          "old_line_content": "        else",
          "new_line_content": "            qsort(vector,vectorlen,sizeof(redisSortObject),sortCompare);",
          "content_same": false
        },
        {
          "line": 5020,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,ele)",
          "old_line_content": "        /* Send the element to the client as reply as well */",
          "new_line_content": "        addReplyBulk(c,ele);",
          "content_same": false
        },
        {
          "line": 9117,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(ele->ptr)",
          "old_line_content": "                elesize = (ele->encoding == REDIS_ENCODING_RAW) ?",
          "new_line_content": "                                (sizeof(*o)+sdslen(ele->ptr)) :",
          "content_same": false
        },
        {
          "line": 9119,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "                                sizeof(*o);",
          "new_line_content": "                ele = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 5023,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(srclist,ln)",
          "old_line_content": "        /* Finally remove the element from the source list */",
          "new_line_content": "        listDelNode(srclist,ln);",
          "content_same": false
        },
        {
          "line": 9121,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(ele->ptr)",
          "old_line_content": "                elesize = (ele->encoding == REDIS_ENCODING_RAW) ?",
          "new_line_content": "                                (sizeof(*o)+sdslen(ele->ptr)) :",
          "content_same": false
        },
        {
          "line": 7074,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "        /* STORE option not specified, sent the sorting result to client */",
          "new_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",outputlen));",
          "content_same": false
        },
        {
          "line": 9123,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(d)",
          "old_line_content": "                                sizeof(*o);",
          "new_line_content": "                asize += (sizeof(struct dictEntry)+elesize)*dictSize(d);",
          "content_same": false
        },
        {
          "line": 7079,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,vector[j].obj)",
          "old_line_content": "",
          "new_line_content": "            if (!getop) addReplyBulk(c,vector[j].obj);",
          "content_same": false
        },
        {
          "line": 9128,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log(1+asize)",
          "old_line_content": "    }",
          "new_line_content": "    return (double)age*log(1+asize);",
          "content_same": false
        },
        {
          "line": 5034,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "",
          "new_line_content": "    set = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 7083,
          "old_api": null,
          "new_api": "lookupKeyByPattern",
          "old_text": null,
          "new_text": "lookupKeyByPattern(c->db,sop->pattern,\n                    vector[j].obj)",
          "old_line_content": "                redisSortOperation *sop = ln->value;",
          "new_line_content": "                robj *val = lookupKeyByPattern(c->db,sop->pattern,",
          "content_same": false
        },
        {
          "line": 5036,
          "old_api": null,
          "new_api": "createSetObject",
          "old_text": null,
          "new_text": "createSetObject()",
          "old_line_content": "    if (set == NULL) {",
          "new_line_content": "        set = createSetObject();",
          "content_same": false
        },
        {
          "line": 7088,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "                    if (!val) {",
          "new_line_content": "                        addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 5041,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "        if (set->type != REDIS_SET) {",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 7090,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,val)",
          "old_line_content": "                    } else {",
          "new_line_content": "                        addReplyBulk(c,val);",
          "content_same": false
        },
        {
          "line": 5045,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(set->ptr,c->argv[2],NULL)",
          "old_line_content": "    }",
          "new_line_content": "    if (dictAdd(set->ptr,c->argv[2],NULL) == DICT_OK) {",
          "content_same": false
        },
        {
          "line": 7094,
          "old_api": null,
          "new_api": "redisAssert",
          "old_text": null,
          "new_text": "redisAssert(sop->type == REDIS_SORT_GET)",
          "old_line_content": "                } else {",
          "new_line_content": "                    redisAssert(sop->type == REDIS_SORT_GET); /* always fails */",
          "content_same": false
        },
        {
          "line": 5048,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.cone)",
          "old_line_content": "        server.dirty++;",
          "new_line_content": "        addReply(c,shared.cone);",
          "content_same": false
        },
        {
          "line": 5050,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "    } else {",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 7099,
          "old_api": null,
          "new_api": "createListObject",
          "old_text": null,
          "new_text": "createListObject()",
          "old_line_content": "    } else {",
          "new_line_content": "        robj *listObject = createListObject();",
          "content_same": false
        },
        {
          "line": 9151,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(db->dict)",
          "old_line_content": "",
          "new_line_content": "        if (dictSize(db->dict) == 0) continue;",
          "content_same": false
        },
        {
          "line": 5057,
          "old_api": null,
          "new_api": "lookupKeyWriteOrReply",
          "old_text": null,
          "new_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.czero)",
          "old_line_content": "",
          "new_line_content": "    if ((set = lookupKeyWriteOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "content_same": false
        },
        {
          "line": 5060,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(set->ptr,c->argv[2])",
          "old_line_content": "",
          "new_line_content": "    if (dictDelete(set->ptr,c->argv[2]) == DICT_OK) {",
          "content_same": false
        },
        {
          "line": 9157,
          "old_api": null,
          "new_api": "dictGetRandomKey",
          "old_text": null,
          "new_text": "dictGetRandomKey(db->dict)",
          "old_line_content": "            if (maxtries) maxtries--;",
          "new_line_content": "            de = dictGetRandomKey(db->dict);",
          "content_same": false
        },
        {
          "line": 5062,
          "old_api": null,
          "new_api": "dictResize",
          "old_text": null,
          "new_text": "dictResize(set->ptr)",
          "old_line_content": "        server.dirty++;",
          "new_line_content": "        if (htNeedsResize(set->ptr)) dictResize(set->ptr);",
          "content_same": false
        },
        {
          "line": 7108,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(listPtr,vector[j].obj)",
          "old_line_content": "            if (!getop) {",
          "new_line_content": "                listAddNodeTail(listPtr,vector[j].obj);",
          "content_same": false
        },
        {
          "line": 7111,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(operations,&li)",
          "old_line_content": "            }",
          "new_line_content": "            listRewind(operations,&li);",
          "content_same": false
        },
        {
          "line": 5066,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "    } else {",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 7114,
          "old_api": null,
          "new_api": "lookupKeyByPattern",
          "old_text": null,
          "new_text": "lookupKeyByPattern(c->db,sop->pattern,\n                    vector[j].obj)",
          "old_line_content": "                redisSortOperation *sop = ln->value;",
          "new_line_content": "                robj *val = lookupKeyByPattern(c->db,sop->pattern,",
          "content_same": false
        },
        {
          "line": 7119,
          "old_api": null,
          "new_api": "createStringObject",
          "old_text": null,
          "new_text": "createStringObject(\"\",0)",
          "old_line_content": "                    if (!val) {",
          "new_line_content": "                        listAddNodeTail(listPtr,createStringObject(\"\",0));",
          "content_same": false
        },
        {
          "line": 5073,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "",
          "new_line_content": "    srcset = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 9171,
          "old_api": null,
          "new_api": "computeObjectSwappability",
          "old_text": null,
          "new_text": "computeObjectSwappability(val)",
          "old_line_content": "            }",
          "new_line_content": "            swappability = computeObjectSwappability(val);",
          "content_same": false
        },
        {
          "line": 7125,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(listPtr,val)",
          "old_line_content": "                         * in doing nothing at all. */",
          "new_line_content": "                        listAddNodeTail(listPtr,val);",
          "content_same": false
        },
        {
          "line": 5079,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, srcset ? shared.wrongtypeerr : shared.czero)",
          "old_line_content": "    if (srcset == NULL || srcset->type != REDIS_SET) {",
          "new_line_content": "        addReply(c, srcset ? shared.wrongtypeerr : shared.czero);",
          "content_same": false
        },
        {
          "line": 7128,
          "old_api": null,
          "new_api": "redisAssert",
          "old_text": null,
          "new_text": "redisAssert(sop->type == REDIS_SORT_GET)",
          "old_line_content": "                } else {",
          "new_line_content": "                    redisAssert(sop->type == REDIS_SORT_GET); /* always fails */",
          "content_same": false
        },
        {
          "line": 9180,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(best)",
          "old_line_content": "    if (best == NULL) return REDIS_ERR;",
          "new_line_content": "    key = dictGetEntryKey(best);",
          "content_same": false
        },
        {
          "line": 5084,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "    if (dstset && dstset->type != REDIS_SET) {",
          "new_line_content": "        addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 7132,
          "old_api": null,
          "new_api": "dictReplace",
          "old_text": null,
          "new_text": "dictReplace(c->db->dict,storekey,listObject)",
          "old_line_content": "        }",
          "new_line_content": "        if (dictReplace(c->db->dict,storekey,listObject)) {",
          "content_same": false
        },
        {
          "line": 9183,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_DEBUG,\"Key with best swappability: %s, %f\",\n        key->ptr, best_swappability)",
          "old_line_content": "",
          "new_line_content": "    redisLog(REDIS_DEBUG,\"Key with best swappability: %s, %f\",",
          "content_same": false
        },
        {
          "line": 5088,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(srcset->ptr,c->argv[3])",
          "old_line_content": "    /* Remove the element from the source set */",
          "new_line_content": "    if (dictDelete(srcset->ptr,c->argv[3]) == DICT_ERR) {",
          "content_same": false
        },
        {
          "line": 5090,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "        /* Key not found in the src set! return zero */",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 7139,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "        server.dirty += 1+outputlen;",
          "new_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),\":%d\\r\\n\",outputlen));",
          "content_same": false
        },
        {
          "line": 9188,
          "old_api": null,
          "new_api": "dupStringObject",
          "old_text": null,
          "new_text": "dupStringObject(key)",
          "old_line_content": "    if (key->refcount > 1) {",
          "new_line_content": "        robj *newkey = dupStringObject(key);",
          "content_same": false
        },
        {
          "line": 5093,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize((dict*)srcset->ptr)",
          "old_line_content": "    }",
          "new_line_content": "    if (dictSize((dict*)srcset->ptr) == 0 && srcset != dstset)",
          "content_same": false
        },
        {
          "line": 7143,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(sortval)",
          "old_line_content": "    /* Cleanup */",
          "new_line_content": "    decrRefCount(sortval);",
          "content_same": false
        },
        {
          "line": 9194,
          "old_api": null,
          "new_api": "vmSwapObjectThreaded",
          "old_text": null,
          "new_text": "vmSwapObjectThreaded(key,val,best_db)",
          "old_line_content": "    if (usethreads) {",
          "new_line_content": "        vmSwapObjectThreaded(key,val,best_db);",
          "content_same": false
        },
        {
          "line": 5098,
          "old_api": null,
          "new_api": "createSetObject",
          "old_text": null,
          "new_text": "createSetObject()",
          "old_line_content": "    if (!dstset) {",
          "new_line_content": "        dstset = createSetObject();",
          "content_same": false
        },
        {
          "line": 7147,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(vector[j].u.cmpobj)",
          "old_line_content": "        if (alpha && vector[j].u.cmpobj)",
          "new_line_content": "            decrRefCount(vector[j].u.cmpobj);",
          "content_same": false
        },
        {
          "line": 9197,
          "old_api": null,
          "new_api": "vmSwapObjectBlocking",
          "old_text": null,
          "new_text": "vmSwapObjectBlocking(key,val)",
          "old_line_content": "    } else {",
          "new_line_content": "        if (vmSwapObjectBlocking(key,val) == REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 5102,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(dstset->ptr,c->argv[3],NULL)",
          "old_line_content": "    }",
          "new_line_content": "    if (dictAdd(dstset->ptr,c->argv[3],NULL) == DICT_OK)",
          "content_same": false
        },
        {
          "line": 7149,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(vector)",
          "old_line_content": "    }",
          "new_line_content": "    zfree(vector);",
          "content_same": false
        },
        {
          "line": 5110,
          "old_api": null,
          "new_api": "lookupKeyReadOrReply",
          "old_text": null,
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "old_line_content": "",
          "new_line_content": "    if ((set = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "content_same": false
        },
        {
          "line": 9207,
          "old_api": null,
          "new_api": "vmSwapOneObject",
          "old_text": null,
          "new_text": "vmSwapOneObject(0)",
          "old_line_content": "static int vmSwapOneObjectBlocking() {",
          "new_line_content": "    return vmSwapOneObject(0);",
          "content_same": false
        },
        {
          "line": 7159,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(s,\"%lluB\",n)",
          "old_line_content": "        /* Bytes */",
          "new_line_content": "        sprintf(s,\"%lluB\",n);",
          "content_same": false
        },
        {
          "line": 5113,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(set->ptr,c->argv[2])",
          "old_line_content": "",
          "new_line_content": "    if (dictFind(set->ptr,c->argv[2]))",
          "content_same": false
        },
        {
          "line": 9211,
          "old_api": null,
          "new_api": "vmSwapOneObject",
          "old_text": null,
          "new_text": "vmSwapOneObject(1)",
          "old_line_content": "static int vmSwapOneObjectThreaded() {",
          "new_line_content": "    return vmSwapOneObject(1);",
          "content_same": false
        },
        {
          "line": 5116,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "    else",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 7163,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(s,\"%.2fK\",d)",
          "old_line_content": "        d = (double)n/(1024);",
          "new_line_content": "        sprintf(s,\"%.2fK\",d);",
          "content_same": false
        },
        {
          "line": 7166,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(s,\"%.2fM\",d)",
          "old_line_content": "        d = (double)n/(1024*1024);",
          "new_line_content": "        sprintf(s,\"%.2fM\",d);",
          "content_same": false
        },
        {
          "line": 7169,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(s,\"%.2fG\",d)",
          "old_line_content": "        d = (double)n/(1024LL*1024*1024);",
          "new_line_content": "        sprintf(s,\"%.2fG\",d);",
          "content_same": false
        },
        {
          "line": 5123,
          "old_api": null,
          "new_api": "lookupKeyReadOrReply",
          "old_text": null,
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "old_line_content": "",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "content_same": false
        },
        {
          "line": 5127,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(s)",
          "old_line_content": "    s = o->ptr;",
          "new_line_content": "    addReplyUlong(c,dictSize(s));",
          "content_same": false
        },
        {
          "line": 7178,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    sds info;",
          "new_line_content": "    time_t uptime = time(NULL)-server.stat_starttime;",
          "content_same": false
        },
        {
          "line": 9227,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(db->dict,key)",
          "old_line_content": "",
          "new_line_content": "    if ((de = dictFind(db->dict,key)) == NULL) return 0;",
          "content_same": false
        },
        {
          "line": 9230,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(db,key)",
          "old_line_content": "    if (foundkey->storage == REDIS_VM_MEMORY) return 0;",
          "new_line_content": "    deleteKey(db,key);",
          "content_same": false
        },
        {
          "line": 5134,
          "old_api": null,
          "new_api": "lookupKeyWriteOrReply",
          "old_text": null,
          "new_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.nullbulk)",
          "old_line_content": "",
          "new_line_content": "    if ((set = lookupKeyWriteOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "content_same": false
        },
        {
          "line": 7182,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "",
          "new_line_content": "    bytesToHuman(hmem,zmalloc_used_memory());",
          "content_same": false
        },
        {
          "line": 5137,
          "old_api": null,
          "new_api": "dictGetRandomKey",
          "old_text": null,
          "new_text": "dictGetRandomKey(set->ptr)",
          "old_line_content": "",
          "new_line_content": "    de = dictGetRandomKey(set->ptr);",
          "content_same": false
        },
        {
          "line": 5139,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "    if (de == NULL) {",
          "new_line_content": "        addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 5141,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "    } else {",
          "new_line_content": "        robj *ele = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 5143,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,ele)",
          "old_line_content": "",
          "new_line_content": "        addReplyBulk(c,ele);",
          "content_same": false
        },
        {
          "line": 9240,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(j->val)",
          "old_line_content": "        j->type == REDIS_IOJOB_LOAD) && j->val != NULL)",
          "new_line_content": "        decrRefCount(j->val);",
          "content_same": false
        },
        {
          "line": 9245,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(j)",
          "old_line_content": "     * never be touched again. */",
          "new_line_content": "    zfree(j);",
          "content_same": false
        },
        {
          "line": 5155,
          "old_api": null,
          "new_api": "lookupKeyReadOrReply",
          "old_text": null,
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)",
          "old_line_content": "",
          "new_line_content": "    if ((set = lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "content_same": false
        },
        {
          "line": 5158,
          "old_api": null,
          "new_api": "dictGetRandomKey",
          "old_text": null,
          "new_text": "dictGetRandomKey(set->ptr)",
          "old_line_content": "",
          "new_line_content": "    de = dictGetRandomKey(set->ptr);",
          "content_same": false
        },
        {
          "line": 9256,
          "old_api": null,
          "new_api": "REDIS_NOTUSED",
          "old_text": null,
          "new_text": "REDIS_NOTUSED(el)",
          "old_line_content": "    int retval, processed = 0, toprocess = -1, trytoswap = 1;",
          "new_line_content": "    REDIS_NOTUSED(el);",
          "content_same": false
        },
        {
          "line": 5160,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "    if (de == NULL) {",
          "new_line_content": "        addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 5162,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "    } else {",
          "new_line_content": "        robj *ele = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 7210,
          "old_api": null,
          "new_api": "aeGetApiName",
          "old_text": null,
          "new_text": "aeGetApiName()",
          "old_line_content": "        (sizeof(long) == 8) ? \"64\" : \"32\",",
          "new_line_content": "        aeGetApiName(),",
          "content_same": false
        },
        {
          "line": 5164,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,ele)",
          "old_line_content": "",
          "new_line_content": "        addReplyBulk(c,ele);",
          "content_same": false
        },
        {
          "line": 9262,
          "old_api": null,
          "new_api": "read",
          "old_text": null,
          "new_text": "read(fd,buf,1)",
          "old_line_content": "     * I/O job completed to process. */",
          "new_line_content": "    while((retval = read(fd,buf,1)) == 1) {",
          "content_same": false
        },
        {
          "line": 7214,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.slaves)",
          "old_line_content": "        uptime/(3600*24),",
          "new_line_content": "        listLength(server.clients)-listLength(server.slaves),",
          "content_same": false
        },
        {
          "line": 7217,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "        server.blpop_blocked_clients,",
          "new_line_content": "        zmalloc_used_memory(),",
          "content_same": false
        },
        {
          "line": 5171,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(*d2)",
          "old_line_content": "",
          "new_line_content": "    return dictSize(*d1)-dictSize(*d2);",
          "content_same": false
        },
        {
          "line": 9268,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_DEBUG,\"Processing I/O completed job\")",
          "old_line_content": "",
          "new_line_content": "        redisLog(REDIS_DEBUG,\"Processing I/O completed job\");",
          "content_same": false
        },
        {
          "line": 9271,
          "old_api": null,
          "new_api": "lockThreadedIO",
          "old_text": null,
          "new_text": "lockThreadedIO()",
          "old_line_content": "        /* Get the processed element (the oldest one) */",
          "new_line_content": "        lockThreadedIO();",
          "content_same": false
        },
        {
          "line": 5175,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(dict*)*setsnum)",
          "old_line_content": "static void sinterGenericCommand(redisClient *c, robj **setskeys, unsigned long setsnum, robj *dstkey) {",
          "new_line_content": "    dict **dv = zmalloc(sizeof(dict*)*setsnum);",
          "content_same": false
        },
        {
          "line": 9274,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.io_processed)",
          "old_line_content": "        if (toprocess == -1) {",
          "new_line_content": "            toprocess = (listLength(server.io_processed)*REDIS_MAX_COMPLETED_JOBS_PROCESSED)/100;",
          "content_same": false
        },
        {
          "line": 7228,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(server.pubsub_channels)",
          "old_line_content": "        server.hash_max_zipmap_value,",
          "new_line_content": "        dictSize(server.pubsub_channels),",
          "content_same": false
        },
        {
          "line": 9277,
          "old_api": null,
          "new_api": "listFirst",
          "old_text": null,
          "new_text": "listFirst(server.io_processed)",
          "old_line_content": "        }",
          "new_line_content": "        ln = listFirst(server.io_processed);",
          "content_same": false
        },
        {
          "line": 9279,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(server.io_processed,ln)",
          "old_line_content": "        j = ln->value;",
          "new_line_content": "        listDelNode(server.io_processed,ln);",
          "content_same": false
        },
        {
          "line": 5185,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,setskeys[j])",
          "old_line_content": "        setobj = dstkey ?",
          "new_line_content": "                    lookupKeyWrite(c->db,setskeys[j]) :",
          "content_same": false
        },
        {
          "line": 7234,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"master_host:%s\\r\\n\"\n            \"master_port:%d\\r\\n\"\n            \"master_link_status:%s\\r\\n\"\n            \"master_last_io_seconds_ago:%d\\r\\n\"\n            ,server.masterhost,\n            server.masterport,\n            (server.replstate == REDIS_REPL_CONNECTED) ?\n                \"up\" : \"down\",\n            server.master ? ((int)(time(NULL)-server.master->lastinteraction)) : -1\n        )",
          "old_line_content": "    if (server.masterhost) {",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 9283,
          "old_api": null,
          "new_api": "freeIOJob",
          "old_text": null,
          "new_text": "freeIOJob(j)",
          "old_line_content": "        if (j->canceled) {",
          "new_line_content": "            freeIOJob(j);",
          "content_same": false
        },
        {
          "line": 5188,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(dv)",
          "old_line_content": "        if (!setobj) {",
          "new_line_content": "            zfree(dv);",
          "content_same": false
        },
        {
          "line": 5190,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(c->db,dstkey)",
          "old_line_content": "            if (dstkey) {",
          "new_line_content": "                if (deleteKey(c->db,dstkey))",
          "content_same": false
        },
        {
          "line": 9288,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_DEBUG,\"Job %p type: %d, key at %p (%s) refcount: %d\\n\", (void*) j, j->type, (void*)j->key, (char*)j->key->ptr, j->key->refcount)",
          "old_line_content": "         * can do just here to avoid race conditions and/or invasive locks */",
          "new_line_content": "        redisLog(REDIS_DEBUG,\"Job %p type: %d, key at %p (%s) refcount: %d\\n\", (void*) j, j->type, (void*)j->key, (char*)j->key->ptr, j->key->refcount);",
          "content_same": false
        },
        {
          "line": 5192,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "                    server.dirty++;",
          "new_line_content": "                addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 5194,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.emptymultibulk)",
          "old_line_content": "            } else {",
          "new_line_content": "                addReply(c,shared.emptymultibulk);",
          "content_same": false
        },
        {
          "line": 7243,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "                \"up\" : \"down\",",
          "new_line_content": "            server.master ? ((int)(time(NULL)-server.master->lastinteraction)) : -1",
          "content_same": false
        },
        {
          "line": 5199,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(dv)",
          "old_line_content": "        if (setobj->type != REDIS_SET) {",
          "new_line_content": "            zfree(dv);",
          "content_same": false
        },
        {
          "line": 7247,
          "old_api": null,
          "new_api": "lockThreadedIO",
          "old_text": null,
          "new_text": "lockThreadedIO()",
          "old_line_content": "    if (server.vm_enabled) {",
          "new_line_content": "        lockThreadedIO();",
          "content_same": false
        },
        {
          "line": 9298,
          "old_api": null,
          "new_api": "vmMarkPagesFree",
          "old_text": null,
          "new_text": "vmMarkPagesFree(key->vm.page,key->vm.usedpages)",
          "old_line_content": "            key->vm.atime = server.unixtime;",
          "new_line_content": "            vmMarkPagesFree(key->vm.page,key->vm.usedpages);",
          "content_same": false
        },
        {
          "line": 9303,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "            server.vm_stats_swapins++;",
          "new_line_content": "            dictGetEntryVal(de) = j->val;",
          "content_same": false
        },
        {
          "line": 5207,
          "old_api": null,
          "new_api": "qsort",
          "old_text": null,
          "new_text": "qsort(dv,setsnum,sizeof(dict*),qsortCompareSetsByCardinality)",
          "old_line_content": "     * algorithm's performace */",
          "new_line_content": "    qsort(dv,setsnum,sizeof(dict*),qsortCompareSetsByCardinality);",
          "content_same": false
        },
        {
          "line": 9306,
          "old_api": null,
          "new_api": "freeIOJob",
          "old_text": null,
          "new_text": "freeIOJob(j)",
          "old_line_content": "            db = j->db;",
          "new_line_content": "            freeIOJob(j);",
          "content_same": false
        },
        {
          "line": 9308,
          "old_api": null,
          "new_api": "handleClientsBlockedOnSwappedKey",
          "old_text": null,
          "new_text": "handleClientsBlockedOnSwappedKey(db,key)",
          "old_line_content": "            /* Handle clients waiting for this key to be loaded. */",
          "new_line_content": "            handleClientsBlockedOnSwappedKey(db,key);",
          "content_same": false
        },
        {
          "line": 5215,
          "old_api": null,
          "new_api": "createObject",
          "old_text": null,
          "new_text": "createObject(REDIS_STRING,NULL)",
          "old_line_content": "    if (!dstkey) {",
          "new_line_content": "        lenobj = createObject(REDIS_STRING,NULL);",
          "content_same": false
        },
        {
          "line": 9313,
          "old_api": null,
          "new_api": "vmCanSwapOut",
          "old_text": null,
          "new_text": "vmCanSwapOut()",
          "old_line_content": "             * rebranded as REDIS_IOJOB_DO_SWAP. */",
          "new_line_content": "            if (!vmCanSwapOut() ||",
          "content_same": false
        },
        {
          "line": 7268,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.io_newjobs)",
          "old_line_content": "            (unsigned long long) server.vm_stats_swapouts,",
          "new_line_content": "            (unsigned long) listLength(server.io_newjobs),",
          "content_same": false
        },
        {
          "line": 5221,
          "old_api": null,
          "new_api": "createSetObject",
          "old_text": null,
          "new_text": "createSetObject()",
          "old_line_content": "         * create this key with an empty set inside */",
          "new_line_content": "        dstset = createSetObject();",
          "content_same": false
        },
        {
          "line": 9318,
          "old_api": null,
          "new_api": "freeIOJob",
          "old_text": null,
          "new_text": "freeIOJob(j)",
          "old_line_content": "                 * a fork()ed Redis trying to save stuff on disk. */",
          "new_line_content": "                freeIOJob(j);",
          "content_same": false
        },
        {
          "line": 7274,
          "old_api": null,
          "new_api": "unlockThreadedIO",
          "old_text": null,
          "new_text": "unlockThreadedIO()",
          "old_line_content": "        );",
          "new_line_content": "        unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 5227,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(dv[0])",
          "old_line_content": "     * not include the element it is discarded */",
          "new_line_content": "    di = dictGetIterator(dv[0]);",
          "content_same": false
        },
        {
          "line": 9324,
          "old_api": null,
          "new_api": "vmMarkPagesUsed",
          "old_text": null,
          "new_text": "vmMarkPagesUsed(j->page,j->pages)",
          "old_line_content": "                 * again. */",
          "new_line_content": "                vmMarkPagesUsed(j->page,j->pages);",
          "content_same": false
        },
        {
          "line": 5229,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "",
          "new_line_content": "    while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 9326,
          "old_api": null,
          "new_api": "lockThreadedIO",
          "old_text": null,
          "new_text": "lockThreadedIO()",
          "old_line_content": "                j->type = REDIS_IOJOB_DO_SWAP;",
          "new_line_content": "                lockThreadedIO();",
          "content_same": false
        },
        {
          "line": 7279,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(server.db[j].dict)",
          "old_line_content": "",
          "new_line_content": "        keys = dictSize(server.db[j].dict);",
          "content_same": false
        },
        {
          "line": 5233,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "        for (j = 1; j < setsnum; j++)",
          "new_line_content": "            if (dictFind(dv[j],dictGetEntryKey(de)) == NULL) break;",
          "content_same": false
        },
        {
          "line": 7282,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info, \"db%d:keys=%lld,expires=%lld\\r\\n\",\n                j, keys, vkeys)",
          "old_line_content": "        if (keys || vkeys) {",
          "new_line_content": "            info = sdscatprintf(info, \"db%d:keys=%lld,expires=%lld\\r\\n\",",
          "content_same": false
        },
        {
          "line": 5236,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "            continue; /* at least one set does not contain the member */",
          "new_line_content": "        ele = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 5238,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,ele)",
          "old_line_content": "        if (!dstkey) {",
          "new_line_content": "            addReplyBulk(c,ele);",
          "content_same": false
        },
        {
          "line": 9335,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"key->storage: %d\\n\",key->storage)",
          "old_line_content": "            if (key->storage != REDIS_VM_SWAPPING) {",
          "new_line_content": "                printf(\"key->storage: %d\\n\",key->storage);",
          "content_same": false
        },
        {
          "line": 5241,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(dstset->ptr,ele,NULL)",
          "old_line_content": "        } else {",
          "new_line_content": "            dictAdd(dstset->ptr,ele,NULL);",
          "content_same": false
        },
        {
          "line": 7290,
          "old_api": null,
          "new_api": "genRedisInfoString",
          "old_text": null,
          "new_text": "genRedisInfoString()",
          "old_line_content": "static void infoCommand(redisClient *c) {",
          "new_line_content": "    sds info = genRedisInfoString();",
          "content_same": false
        },
        {
          "line": 5245,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "    }",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 9342,
          "old_api": null,
          "new_api": "redisAssert",
          "old_text": null,
          "new_text": "redisAssert(key->storage == REDIS_VM_SWAPPING)",
          "old_line_content": "            }",
          "new_line_content": "            redisAssert(key->storage == REDIS_VM_SWAPPING);",
          "content_same": false
        },
        {
          "line": 5250,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(c->db,dstkey)",
          "old_line_content": "         * is not an empty set. */",
          "new_line_content": "        deleteKey(c->db,dstkey);",
          "content_same": false
        },
        {
          "line": 9348,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(val)",
          "old_line_content": "            key->vtype = j->val->type;",
          "new_line_content": "            decrRefCount(val); /* Deallocate the object from memory. */",
          "content_same": false
        },
        {
          "line": 7303,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(server.monitors,c)",
          "old_line_content": "    c->slaveseldb = 0;",
          "new_line_content": "    listAddNodeTail(server.monitors,c);",
          "content_same": false
        },
        {
          "line": 5256,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(dstset)",
          "old_line_content": "        } else {",
          "new_line_content": "            decrRefCount(dstset);",
          "content_same": false
        },
        {
          "line": 9356,
          "old_api": null,
          "new_api": "freeIOJob",
          "old_text": null,
          "new_text": "freeIOJob(j)",
          "old_line_content": "            server.vm_stats_swapouts++;",
          "new_line_content": "            freeIOJob(j);",
          "content_same": false
        },
        {
          "line": 5261,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "    } else {",
          "new_line_content": "        lenobj->ptr = sdscatprintf(sdsempty(),\"*%lu\\r\\n\",cardinality);",
          "content_same": false
        },
        {
          "line": 7309,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(db->expires,key)",
          "old_line_content": "static int removeExpire(redisDb *db, robj *key) {",
          "new_line_content": "    if (dictDelete(db->expires,key) == DICT_OK) {",
          "content_same": false
        },
        {
          "line": 9359,
          "old_api": null,
          "new_api": "vmCanSwapOut",
          "old_text": null,
          "new_text": "vmCanSwapOut()",
          "old_line_content": "             * out of memory */",
          "new_line_content": "            if (trytoswap && vmCanSwapOut() &&",
          "content_same": false
        },
        {
          "line": 5263,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(dv)",
          "old_line_content": "    }",
          "new_line_content": "    zfree(dv);",
          "content_same": false
        },
        {
          "line": 5267,
          "old_api": null,
          "new_api": "sinterGenericCommand",
          "old_text": null,
          "new_text": "sinterGenericCommand(c,c->argv+1,c->argc-1,NULL)",
          "old_line_content": "static void sinterCommand(redisClient *c) {",
          "new_line_content": "    sinterGenericCommand(c,c->argv+1,c->argc-1,NULL);",
          "content_same": false
        },
        {
          "line": 9364,
          "old_api": null,
          "new_api": "lockThreadedIO",
          "old_text": null,
          "new_text": "lockThreadedIO()",
          "old_line_content": "                while(more) {",
          "new_line_content": "                    lockThreadedIO();",
          "content_same": false
        },
        {
          "line": 7317,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(db->expires,key,(void*)when)",
          "old_line_content": "static int setExpire(redisDb *db, robj *key, time_t when) {",
          "new_line_content": "    if (dictAdd(db->expires,key,(void*)when) == DICT_ERR) {",
          "content_same": false
        },
        {
          "line": 9367,
          "old_api": null,
          "new_api": "unlockThreadedIO",
          "old_text": null,
          "new_text": "unlockThreadedIO()",
          "old_line_content": "                            (unsigned) server.vm_max_threads;",
          "new_line_content": "                    unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 5271,
          "old_api": null,
          "new_api": "sinterGenericCommand",
          "old_text": null,
          "new_text": "sinterGenericCommand(c,c->argv+2,c->argc-2,c->argv[1])",
          "old_line_content": "static void sinterstoreCommand(redisClient *c) {",
          "new_line_content": "    sinterGenericCommand(c,c->argv+2,c->argc-2,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 9369,
          "old_api": null,
          "new_api": "vmSwapOneObjectThreaded",
          "old_text": null,
          "new_text": "vmSwapOneObjectThreaded()",
          "old_line_content": "                    /* Don't waste CPU time if swappable objects are rare. */",
          "new_line_content": "                    if (vmSwapOneObjectThreaded() == REDIS_ERR) {",
          "content_same": false
        },
        {
          "line": 7320,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(key)",
          "old_line_content": "    } else {",
          "new_line_content": "        incrRefCount(key);",
          "content_same": false
        },
        {
          "line": 5279,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(dict*)*setsnum)",
          "old_line_content": "static void sunionDiffGenericCommand(redisClient *c, robj **setskeys, int setsnum, robj *dstkey, int op) {",
          "new_line_content": "    dict **dv = zmalloc(sizeof(dict*)*setsnum);",
          "content_same": false
        },
        {
          "line": 7331,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(db->expires)",
          "old_line_content": "    /* No expire? return ASAP */",
          "new_line_content": "    if (dictSize(db->expires) == 0 ||",
          "content_same": false
        },
        {
          "line": 9380,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\n            \"WARNING: read(2) error in vmThreadedIOCompletedJob() %s\",\n            strerror(errno))",
          "old_line_content": "    if (retval < 0 && errno != EAGAIN) {",
          "new_line_content": "        redisLog(REDIS_WARNING,",
          "content_same": false
        },
        {
          "line": 9382,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "            \"WARNING: read(2) error in vmThreadedIOCompletedJob() %s\",",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 7334,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "",
          "new_line_content": "    return (time_t) dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 5289,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,setskeys[j])",
          "old_line_content": "        setobj = dstkey ?",
          "new_line_content": "                    lookupKeyWrite(c->db,setskeys[j]) :",
          "content_same": false
        },
        {
          "line": 9387,
          "old_api": null,
          "new_api": "pthread_mutex_lock",
          "old_text": null,
          "new_text": "pthread_mutex_lock(&server.io_mutex)",
          "old_line_content": "static void lockThreadedIO(void) {",
          "new_line_content": "    pthread_mutex_lock(&server.io_mutex);",
          "content_same": false
        },
        {
          "line": 7342,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(db->expires)",
          "old_line_content": "    /* No expire? return ASAP */",
          "new_line_content": "    if (dictSize(db->expires) == 0 ||",
          "content_same": false
        },
        {
          "line": 9391,
          "old_api": null,
          "new_api": "pthread_mutex_unlock",
          "old_text": null,
          "new_text": "pthread_mutex_unlock(&server.io_mutex)",
          "old_line_content": "static void unlockThreadedIO(void) {",
          "new_line_content": "    pthread_mutex_unlock(&server.io_mutex);",
          "content_same": false
        },
        {
          "line": 5296,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(dv)",
          "old_line_content": "        if (setobj->type != REDIS_SET) {",
          "new_line_content": "            zfree(dv);",
          "content_same": false
        },
        {
          "line": 7346,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "    /* Lookup the expire */",
          "new_line_content": "    when = (time_t) dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 7350,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(db->expires,key)",
          "old_line_content": "    /* Delete the key */",
          "new_line_content": "    dictDelete(db->expires,key);",
          "content_same": false
        },
        {
          "line": 7352,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(db->dict,key)",
          "old_line_content": "    server.stat_expiredkeys++;",
          "new_line_content": "    return dictDelete(db->dict,key) == DICT_OK;",
          "content_same": false
        },
        {
          "line": 5306,
          "old_api": null,
          "new_api": "createSetObject",
          "old_text": null,
          "new_text": "createSetObject()",
          "old_line_content": "     * this set object will be the resulting object to set into the target key*/",
          "new_line_content": "    dstset = createSetObject();",
          "content_same": false
        },
        {
          "line": 9404,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(o->storage == REDIS_VM_LOADING || o->storage == REDIS_VM_SWAPPING)",
          "old_line_content": "",
          "new_line_content": "    assert(o->storage == REDIS_VM_LOADING || o->storage == REDIS_VM_SWAPPING);",
          "content_same": false
        },
        {
          "line": 9406,
          "old_api": null,
          "new_api": "lockThreadedIO",
          "old_text": null,
          "new_text": "lockThreadedIO()",
          "old_line_content": "again:",
          "new_line_content": "    lockThreadedIO();",
          "content_same": false
        },
        {
          "line": 7359,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(db->expires)",
          "old_line_content": "    /* No expire? return ASAP */",
          "new_line_content": "    if (dictSize(db->expires) == 0 ||",
          "content_same": false
        },
        {
          "line": 5314,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(dv[j])",
          "old_line_content": "",
          "new_line_content": "        di = dictGetIterator(dv[j]);",
          "content_same": false
        },
        {
          "line": 9412,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(lists[i],&li)",
          "old_line_content": "",
          "new_line_content": "        listRewind(lists[i],&li);",
          "content_same": false
        },
        {
          "line": 5316,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "",
          "new_line_content": "        while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 7365,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(db->expires,key)",
          "old_line_content": "    server.stat_expiredkeys++;",
          "new_line_content": "    dictDelete(db->expires,key);",
          "content_same": false
        },
        {
          "line": 5320,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "            /* dictAdd will not add the same element multiple times */",
          "new_line_content": "            ele = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 9418,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_DEBUG,\"*** CANCELED %p (%s) (type %d) (LIST ID %d)\\n\",\n                    (void*)job, (char*)o->ptr, job->type, i)",
          "old_line_content": "            if (job->key == o) {",
          "new_line_content": "                redisLog(REDIS_DEBUG,\"*** CANCELED %p (%s) (type %d) (LIST ID %d)\\n\",",
          "content_same": false
        },
        {
          "line": 5322,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(dstset->ptr,ele,NULL)",
          "old_line_content": "            if (op == REDIS_OP_UNION || j == 0) {",
          "new_line_content": "                if (dictAdd(dstset->ptr,ele,NULL) == DICT_OK) {",
          "content_same": false
        },
        {
          "line": 7373,
          "old_api": null,
          "new_api": "getLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongFromObjectOrReply(c, param, &seconds, NULL)",
          "old_line_content": "",
          "new_line_content": "    if (getLongFromObjectOrReply(c, param, &seconds, NULL) != REDIS_OK) return;",
          "content_same": false
        },
        {
          "line": 9423,
          "old_api": null,
          "new_api": "vmMarkPagesFree",
          "old_text": null,
          "new_text": "vmMarkPagesFree(job->page,job->pages)",
          "old_line_content": "                if (i != 1 && job->type == REDIS_IOJOB_DO_SWAP)",
          "new_line_content": "                    vmMarkPagesFree(job->page,job->pages);",
          "content_same": false
        },
        {
          "line": 5327,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(dstset->ptr,ele)",
          "old_line_content": "            } else if (op == REDIS_OP_DIFF) {",
          "new_line_content": "                if (dictDelete(dstset->ptr,ele) == DICT_OK) {",
          "content_same": false
        },
        {
          "line": 7377,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(c->db->dict,key)",
          "old_line_content": "",
          "new_line_content": "    de = dictFind(c->db->dict,key);",
          "content_same": false
        },
        {
          "line": 7379,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "    if (de == NULL) {",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 5332,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "        }",
          "new_line_content": "        dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 9430,
          "old_api": null,
          "new_api": "freeIOJob",
          "old_text": null,
          "new_text": "freeIOJob(job)",
          "old_line_content": "                     * is to remove it from the queue at all */",
          "new_line_content": "                    freeIOJob(job);",
          "content_same": false
        },
        {
          "line": 7383,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(c->db,key)",
          "old_line_content": "    if (seconds <= 0) {",
          "new_line_content": "        if (deleteKey(c->db,key)) server.dirty++;",
          "content_same": false
        },
        {
          "line": 7387,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    } else {",
          "new_line_content": "        time_t when = time(NULL)+seconds;",
          "content_same": false
        },
        {
          "line": 5340,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "    if (!dstkey) {",
          "new_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",cardinality));",
          "content_same": false
        },
        {
          "line": 7392,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "        } else {",
          "new_line_content": "            addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 5345,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "",
          "new_line_content": "            ele = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 5348,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "        }",
          "new_line_content": "        dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 9447,
          "old_api": null,
          "new_api": "unlockThreadedIO",
          "old_text": null,
          "new_text": "unlockThreadedIO()",
          "old_line_content": "                    /* We try again and again until the job is completed. */",
          "new_line_content": "                    unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 7399,
          "old_api": null,
          "new_api": "expireGenericCommand",
          "old_text": null,
          "new_text": "expireGenericCommand(c,c->argv[1],c->argv[2],0)",
          "old_line_content": "static void expireCommand(redisClient *c) {",
          "new_line_content": "    expireGenericCommand(c,c->argv[1],c->argv[2],0);",
          "content_same": false
        },
        {
          "line": 5353,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(c->db,dstkey)",
          "old_line_content": "         * create this key with the result set inside */",
          "new_line_content": "        deleteKey(c->db,dstkey);",
          "content_same": false
        },
        {
          "line": 9451,
          "old_api": null,
          "new_api": "usleep",
          "old_text": null,
          "new_text": "usleep(1)",
          "old_line_content": "                     * should be very rare. */",
          "new_line_content": "                    usleep(1);",
          "content_same": false
        },
        {
          "line": 7403,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "static void expireatCommand(redisClient *c) {",
          "new_line_content": "    expireGenericCommand(c,c->argv[1],c->argv[2],time(NULL));",
          "content_same": false
        },
        {
          "line": 5359,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(dstset)",
          "old_line_content": "        } else {",
          "new_line_content": "            decrRefCount(dstset);",
          "content_same": false
        },
        {
          "line": 7410,
          "old_api": null,
          "new_api": "getExpire",
          "old_text": null,
          "new_text": "getExpire(c->db,c->argv[1])",
          "old_line_content": "",
          "new_line_content": "    expire = getExpire(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 5364,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(dv)",
          "old_line_content": "    }",
          "new_line_content": "    zfree(dv);",
          "content_same": false
        },
        {
          "line": 7412,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    if (expire != -1) {",
          "new_line_content": "        ttl = (int) (expire-time(NULL));",
          "content_same": false
        },
        {
          "line": 7415,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "    }",
          "new_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\":%d\\r\\n\",ttl));",
          "content_same": false
        },
        {
          "line": 5368,
          "old_api": null,
          "new_api": "sunionDiffGenericCommand",
          "old_text": null,
          "new_text": "sunionDiffGenericCommand(c,c->argv+1,c->argc-1,NULL,REDIS_OP_UNION)",
          "old_line_content": "static void sunionCommand(redisClient *c) {",
          "new_line_content": "    sunionDiffGenericCommand(c,c->argv+1,c->argc-1,NULL,REDIS_OP_UNION);",
          "content_same": false
        },
        {
          "line": 9466,
          "old_api": null,
          "new_api": "unlockThreadedIO",
          "old_text": null,
          "new_text": "unlockThreadedIO()",
          "old_line_content": "                    o->storage = REDIS_VM_MEMORY;",
          "new_line_content": "                unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 5372,
          "old_api": null,
          "new_api": "sunionDiffGenericCommand",
          "old_text": null,
          "new_text": "sunionDiffGenericCommand(c,c->argv+2,c->argc-2,c->argv[1],REDIS_OP_UNION)",
          "old_line_content": "static void sunionstoreCommand(redisClient *c) {",
          "new_line_content": "    sunionDiffGenericCommand(c,c->argv+2,c->argc-2,c->argv[1],REDIS_OP_UNION);",
          "content_same": false
        },
        {
          "line": 9471,
          "old_api": null,
          "new_api": "unlockThreadedIO",
          "old_text": null,
          "new_text": "unlockThreadedIO()",
          "old_line_content": "    }",
          "new_line_content": "    unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 5376,
          "old_api": null,
          "new_api": "sunionDiffGenericCommand",
          "old_text": null,
          "new_text": "sunionDiffGenericCommand(c,c->argv+1,c->argc-1,NULL,REDIS_OP_DIFF)",
          "old_line_content": "static void sdiffCommand(redisClient *c) {",
          "new_line_content": "    sunionDiffGenericCommand(c,c->argv+1,c->argc-1,NULL,REDIS_OP_DIFF);",
          "content_same": false
        },
        {
          "line": 5380,
          "old_api": null,
          "new_api": "sunionDiffGenericCommand",
          "old_text": null,
          "new_text": "sunionDiffGenericCommand(c,c->argv+2,c->argc-2,c->argv[1],REDIS_OP_DIFF)",
          "old_line_content": "static void sdiffstoreCommand(redisClient *c) {",
          "new_line_content": "    sunionDiffGenericCommand(c,c->argv+2,c->argc-2,c->argv[1],REDIS_OP_DIFF);",
          "content_same": false
        },
        {
          "line": 9478,
          "old_api": null,
          "new_api": "REDIS_NOTUSED",
          "old_text": null,
          "new_text": "REDIS_NOTUSED(arg)",
          "old_line_content": "    listNode *ln;",
          "new_line_content": "    REDIS_NOTUSED(arg);",
          "content_same": false
        },
        {
          "line": 9480,
          "old_api": null,
          "new_api": "pthread_self",
          "old_text": null,
          "new_text": "pthread_self()",
          "old_line_content": "",
          "new_line_content": "    pthread_detach(pthread_self());",
          "content_same": false
        },
        {
          "line": 9483,
          "old_api": null,
          "new_api": "lockThreadedIO",
          "old_text": null,
          "new_text": "lockThreadedIO()",
          "old_line_content": "        /* Get a new job to process */",
          "new_line_content": "        lockThreadedIO();",
          "content_same": false
        },
        {
          "line": 7435,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(mc->argv[i])",
          "old_line_content": "        for (i = 0; i < mc->argc; i++)",
          "new_line_content": "            decrRefCount(mc->argv[i]);",
          "content_same": false
        },
        {
          "line": 9486,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_DEBUG,\"Thread %ld exiting, nothing to do\",\n                (long) pthread_self())",
          "old_line_content": "            /* No new jobs in queue, exit. */",
          "new_line_content": "            redisLog(REDIS_DEBUG,\"Thread %ld exiting, nothing to do\",",
          "content_same": false
        },
        {
          "line": 7438,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(c->mstate.commands)",
          "old_line_content": "    }",
          "new_line_content": "    zfree(c->mstate.commands);",
          "content_same": false
        },
        {
          "line": 9489,
          "old_api": null,
          "new_api": "unlockThreadedIO",
          "old_text": null,
          "new_text": "unlockThreadedIO()",
          "old_line_content": "            server.io_active_threads--;",
          "new_line_content": "            unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 9492,
          "old_api": null,
          "new_api": "listFirst",
          "old_text": null,
          "new_text": "listFirst(server.io_newjobs)",
          "old_line_content": "        }",
          "new_line_content": "        ln = listFirst(server.io_newjobs);",
          "content_same": false
        },
        {
          "line": 9494,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(server.io_newjobs,ln)",
          "old_line_content": "        j = ln->value;",
          "new_line_content": "        listDelNode(server.io_newjobs,ln);",
          "content_same": false
        },
        {
          "line": 7446,
          "old_api": null,
          "new_api": "zrealloc",
          "old_text": null,
          "new_text": "zrealloc(c->mstate.commands,\n            sizeof(multiCmd)*(c->mstate.count+1))",
          "old_line_content": "",
          "new_line_content": "    c->mstate.commands = zrealloc(c->mstate.commands,",
          "content_same": false
        },
        {
          "line": 9496,
          "old_api": null,
          "new_api": "pthread_self",
          "old_text": null,
          "new_text": "pthread_self()",
          "old_line_content": "        /* Add the job in the processing queue */",
          "new_line_content": "        j->thread = pthread_self();",
          "content_same": false
        },
        {
          "line": 5403,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*zn))",
          "old_line_content": "static zskiplistNode *zslCreateNode(int level, double score, robj *obj) {",
          "new_line_content": "    zskiplistNode *zn = zmalloc(sizeof(*zn));",
          "content_same": false
        },
        {
          "line": 7451,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(robj*)*c->argc)",
          "old_line_content": "    mc->argc = c->argc;",
          "new_line_content": "    mc->argv = zmalloc(sizeof(robj*)*c->argc);",
          "content_same": false
        },
        {
          "line": 5405,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(zskiplistNode*) * level)",
          "old_line_content": "",
          "new_line_content": "    zn->forward = zmalloc(sizeof(zskiplistNode*) * level);",
          "content_same": false
        },
        {
          "line": 7454,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(mc->argv[j])",
          "old_line_content": "    for (j = 0; j < c->argc; j++)",
          "new_line_content": "        incrRefCount(mc->argv[j]);",
          "content_same": false
        },
        {
          "line": 5407,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(unsigned int) * (level - 1))",
          "old_line_content": "    if (level > 0)",
          "new_line_content": "        zn->span = zmalloc(sizeof(unsigned int) * (level - 1));",
          "content_same": false
        },
        {
          "line": 9505,
          "old_api": null,
          "new_api": "vmReadObjectFromSwap",
          "old_text": null,
          "new_text": "vmReadObjectFromSwap(j->page,j->key->vtype)",
          "old_line_content": "        if (j->type == REDIS_IOJOB_LOAD) {",
          "new_line_content": "            j->val = vmReadObjectFromSwap(j->page,j->key->vtype);",
          "content_same": false
        },
        {
          "line": 9507,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(\"/dev/null\",\"w+\")",
          "old_line_content": "        } else if (j->type == REDIS_IOJOB_PREPARE_SWAP) {",
          "new_line_content": "            FILE *fp = fopen(\"/dev/null\",\"w+\");",
          "content_same": false
        },
        {
          "line": 7460,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "    c->flags |= REDIS_MULTI;",
          "new_line_content": "    addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 9511,
          "old_api": null,
          "new_api": "vmWriteObjectOnSwap",
          "old_text": null,
          "new_text": "vmWriteObjectOnSwap(j->val,j->page)",
          "old_line_content": "        } else if (j->type == REDIS_IOJOB_DO_SWAP) {",
          "new_line_content": "            if (vmWriteObjectOnSwap(j->val,j->page) == REDIS_ERR)",
          "content_same": false
        },
        {
          "line": 5417,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*zsl))",
          "old_line_content": "",
          "new_line_content": "    zsl = zmalloc(sizeof(*zsl));",
          "content_same": false
        },
        {
          "line": 7465,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"-ERR DISCARD without MULTI\\r\\n\")",
          "old_line_content": "    if (!(c->flags & REDIS_MULTI)) {",
          "new_line_content": "        addReplySds(c,sdsnew(\"-ERR DISCARD without MULTI\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 9516,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_DEBUG,\"Thread %ld completed the job: %p (key %s)\",\n            (long) pthread_self(), (void*)j, (char*)j->key->ptr)",
          "old_line_content": "        /* Done: insert the job into the processed queue */",
          "new_line_content": "        redisLog(REDIS_DEBUG,\"Thread %ld completed the job: %p (key %s)\",",
          "content_same": false
        },
        {
          "line": 5420,
          "old_api": null,
          "new_api": "zslCreateNode",
          "old_text": null,
          "new_text": "zslCreateNode(ZSKIPLIST_MAXLEVEL,0,NULL)",
          "old_line_content": "    zsl->length = 0;",
          "new_line_content": "    zsl->header = zslCreateNode(ZSKIPLIST_MAXLEVEL,0,NULL);",
          "content_same": false
        },
        {
          "line": 7469,
          "old_api": null,
          "new_api": "freeClientMultiState",
          "old_text": null,
          "new_text": "freeClientMultiState(c)",
          "old_line_content": "",
          "new_line_content": "    freeClientMultiState(c);",
          "content_same": false
        },
        {
          "line": 7472,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "    c->flags &= (~REDIS_MULTI);",
          "new_line_content": "    addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 9524,
          "old_api": null,
          "new_api": "write",
          "old_text": null,
          "new_text": "write(server.io_ready_pipe_write,\"x\",1)",
          "old_line_content": "        /* Signal the main thread there is new stuff to process */",
          "new_line_content": "        assert(write(server.io_ready_pipe_write,\"x\",1) == 1);",
          "content_same": false
        },
        {
          "line": 7479,
          "old_api": null,
          "new_api": "createStringObject",
          "old_text": null,
          "new_text": "createStringObject(\"MULTI\",5)",
          "old_line_content": "    struct redisCommand *cmd;",
          "new_line_content": "    robj *multistring = createStringObject(\"MULTI\",5);",
          "content_same": false
        },
        {
          "line": 7481,
          "old_api": null,
          "new_api": "lookupCommand",
          "old_text": null,
          "new_text": "lookupCommand(\"multi\")",
          "old_line_content": "",
          "new_line_content": "    cmd = lookupCommand(\"multi\");",
          "content_same": false
        },
        {
          "line": 5434,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(node->obj)",
          "old_line_content": "static void zslFreeNode(zskiplistNode *node) {",
          "new_line_content": "    decrRefCount(node->obj);",
          "content_same": false
        },
        {
          "line": 7483,
          "old_api": null,
          "new_api": "feedAppendOnlyFile",
          "old_text": null,
          "new_text": "feedAppendOnlyFile(cmd,c->db->id,&multistring,1)",
          "old_line_content": "    if (server.appendonly)",
          "new_line_content": "        feedAppendOnlyFile(cmd,c->db->id,&multistring,1);",
          "content_same": false
        },
        {
          "line": 9534,
          "old_api": null,
          "new_api": "sigemptyset",
          "old_text": null,
          "new_text": "sigemptyset(&mask)",
          "old_line_content": "",
          "new_line_content": "    sigemptyset(&mask);",
          "content_same": false
        },
        {
          "line": 5443,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(zsl->header->forward)",
          "old_line_content": "",
          "new_line_content": "    zfree(zsl->header->forward);",
          "content_same": false
        },
        {
          "line": 7495,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"-ERR EXEC without MULTI\\r\\n\")",
          "old_line_content": "    if (!(c->flags & REDIS_MULTI)) {",
          "new_line_content": "        addReplySds(c,sdsnew(\"-ERR EXEC without MULTI\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 9544,
          "old_api": null,
          "new_api": "pthread_sigmask",
          "old_text": null,
          "new_text": "pthread_sigmask(SIG_SETMASK, &omask, NULL)",
          "old_line_content": "    }",
          "new_line_content": "    pthread_sigmask(SIG_SETMASK, &omask, NULL);",
          "content_same": false
        },
        {
          "line": 5448,
          "old_api": null,
          "new_api": "zslFreeNode",
          "old_text": null,
          "new_text": "zslFreeNode(node)",
          "old_line_content": "        next = node->forward[0];",
          "new_line_content": "        zslFreeNode(node);",
          "content_same": false
        },
        {
          "line": 5451,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(zsl)",
          "old_line_content": "    }",
          "new_line_content": "    zfree(zsl);",
          "content_same": false
        },
        {
          "line": 7503,
          "old_api": null,
          "new_api": "execCommandReplicateMulti",
          "old_text": null,
          "new_text": "execCommandReplicateMulti(c)",
          "old_line_content": "     * and atomicity guarantees. */",
          "new_line_content": "    execCommandReplicateMulti(c);",
          "content_same": false
        },
        {
          "line": 5456,
          "old_api": null,
          "new_api": "random",
          "old_text": null,
          "new_text": "random()",
          "old_line_content": "    int level = 1;",
          "new_line_content": "    while ((random()&0xFFFF) < (ZSKIPLIST_P * 0xFFFF))",
          "content_same": false
        },
        {
          "line": 9554,
          "old_api": null,
          "new_api": "lockThreadedIO",
          "old_text": null,
          "new_text": "lockThreadedIO()",
          "old_line_content": "",
          "new_line_content": "        lockThreadedIO();",
          "content_same": false
        },
        {
          "line": 7508,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "    orig_argc = c->argc;",
          "new_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",c->mstate.count));",
          "content_same": false
        },
        {
          "line": 9559,
          "old_api": null,
          "new_api": "unlockThreadedIO",
          "old_text": null,
          "new_text": "unlockThreadedIO()",
          "old_line_content": "        {",
          "new_line_content": "            unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 7512,
          "old_api": null,
          "new_api": "call",
          "old_text": null,
          "new_text": "call(c,c->mstate.commands[j].cmd)",
          "old_line_content": "        c->argv = c->mstate.commands[j].argv;",
          "new_line_content": "        call(c,c->mstate.commands[j].cmd);",
          "content_same": false
        },
        {
          "line": 7516,
          "old_api": null,
          "new_api": "freeClientMultiState",
          "old_text": null,
          "new_text": "freeClientMultiState(c)",
          "old_line_content": "    c->argc = orig_argc;",
          "new_line_content": "    freeClientMultiState(c);",
          "content_same": false
        },
        {
          "line": 9566,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.io_processed)",
          "old_line_content": "         * it's blocking. */",
          "new_line_content": "        io_processed_len = listLength(server.io_processed);",
          "content_same": false
        },
        {
          "line": 9569,
          "old_api": null,
          "new_api": "vmThreadedIOCompletedJob",
          "old_text": null,
          "new_text": "vmThreadedIOCompletedJob(NULL,server.io_ready_pipe_read,NULL,0)",
          "old_line_content": "        if (io_processed_len) {",
          "new_line_content": "            vmThreadedIOCompletedJob(NULL,server.io_ready_pipe_read,NULL,0);",
          "content_same": false
        },
        {
          "line": 5474,
          "old_api": null,
          "new_api": "compareStringObjects",
          "old_text": null,
          "new_text": "compareStringObjects(x->forward[i]->obj,obj)",
          "old_line_content": "                (x->forward[i]->score == score &&",
          "new_line_content": "                compareStringObjects(x->forward[i]->obj,obj) < 0))) {",
          "content_same": false
        },
        {
          "line": 9572,
          "old_api": null,
          "new_api": "usleep",
          "old_text": null,
          "new_text": "usleep(10000)",
          "old_line_content": "        } else {",
          "new_line_content": "            usleep(10000); /* 10 milliseconds */",
          "content_same": false
        },
        {
          "line": 9580,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(server.vm_swap_file,\"r+b\")",
          "old_line_content": "     * and don't want to mess at all with the original file object. */",
          "new_line_content": "    server.vm_fp = fopen(server.vm_swap_file,\"r+b\");",
          "content_same": false
        },
        {
          "line": 5484,
          "old_api": null,
          "new_api": "zslRandomLevel",
          "old_text": null,
          "new_text": "zslRandomLevel()",
          "old_line_content": "     * if the element is already inside or not. */",
          "new_line_content": "    level = zslRandomLevel();",
          "content_same": false
        },
        {
          "line": 9582,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Can't re-open the VM swap file: %s. Exiting.\",\n            server.vm_swap_file)",
          "old_line_content": "    if (server.vm_fp == NULL) {",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Can't re-open the VM swap file: %s. Exiting.\",",
          "content_same": false
        },
        {
          "line": 9584,
          "old_api": null,
          "new_api": "_exit",
          "old_text": null,
          "new_text": "_exit(1)",
          "old_line_content": "            server.vm_swap_file);",
          "new_line_content": "        _exit(1);",
          "content_same": false
        },
        {
          "line": 9586,
          "old_api": null,
          "new_api": "fileno",
          "old_text": null,
          "new_text": "fileno(server.vm_fp)",
          "old_line_content": "    }",
          "new_line_content": "    server.vm_fd = fileno(server.vm_fp);",
          "content_same": false
        },
        {
          "line": 5493,
          "old_api": null,
          "new_api": "zslCreateNode",
          "old_text": null,
          "new_text": "zslCreateNode(level,score,obj)",
          "old_line_content": "    }",
          "new_line_content": "    x = zslCreateNode(level,score,obj);",
          "content_same": false
        },
        {
          "line": 9591,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_DEBUG,\"Queued IO Job %p type %d about key '%s'\\n\",\n        (void*)j, j->type, (char*)j->key->ptr)",
          "old_line_content": "static void queueIOJob(iojob *j) {",
          "new_line_content": "    redisLog(REDIS_DEBUG,\"Queued IO Job %p type %d about key '%s'\\n\",",
          "content_same": false
        },
        {
          "line": 9593,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(server.io_newjobs,j)",
          "old_line_content": "        (void*)j, j->type, (char*)j->key->ptr);",
          "new_line_content": "    listAddNodeTail(server.io_newjobs,j);",
          "content_same": false
        },
        {
          "line": 9595,
          "old_api": null,
          "new_api": "spawnIOThread",
          "old_text": null,
          "new_text": "spawnIOThread()",
          "old_line_content": "    if (server.io_active_threads < server.vm_max_threads)",
          "new_line_content": "        spawnIOThread();",
          "content_same": false
        },
        {
          "line": 9601,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(key->storage == REDIS_VM_MEMORY)",
          "old_line_content": "",
          "new_line_content": "    assert(key->storage == REDIS_VM_MEMORY);",
          "content_same": false
        },
        {
          "line": 9604,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*j))",
          "old_line_content": "",
          "new_line_content": "    j = zmalloc(sizeof(*j));",
          "content_same": false
        },
        {
          "line": 9609,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(val)",
          "old_line_content": "    j->val = val;",
          "new_line_content": "    incrRefCount(val);",
          "content_same": false
        },
        {
          "line": 7563,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(robj*)*numkeys)",
          "old_line_content": "",
          "new_line_content": "    c->blockingkeys = zmalloc(sizeof(robj*)*numkeys);",
          "content_same": false
        },
        {
          "line": 9614,
          "old_api": null,
          "new_api": "lockThreadedIO",
          "old_text": null,
          "new_text": "lockThreadedIO()",
          "old_line_content": "",
          "new_line_content": "    lockThreadedIO();",
          "content_same": false
        },
        {
          "line": 7569,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(keys[j])",
          "old_line_content": "        c->blockingkeys[j] = keys[j];",
          "new_line_content": "        incrRefCount(keys[j]);",
          "content_same": false
        },
        {
          "line": 7572,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(c->db->blockingkeys,keys[j])",
          "old_line_content": "        /* And in the other \"side\", to map keys -> clients */",
          "new_line_content": "        de = dictFind(c->db->blockingkeys,keys[j]);",
          "content_same": false
        },
        {
          "line": 7577,
          "old_api": null,
          "new_api": "listCreate",
          "old_text": null,
          "new_text": "listCreate()",
          "old_line_content": "            /* For every key we take a list of clients blocked for it */",
          "new_line_content": "            l = listCreate();",
          "content_same": false
        },
        {
          "line": 7582,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "        } else {",
          "new_line_content": "            l = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 7584,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(l,c)",
          "old_line_content": "        }",
          "new_line_content": "        listAddNodeTail(l,c);",
          "content_same": false
        },
        {
          "line": 9634,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(c->db->dict,key)",
          "old_line_content": "     * block the client at all. */",
          "new_line_content": "    de = dictFind(c->db->dict,key);",
          "content_same": false
        },
        {
          "line": 9636,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "    if (de == NULL) return 0;",
          "new_line_content": "    o = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 9641,
          "old_api": null,
          "new_api": "vmCancelThreadedIOJob",
          "old_text": null,
          "new_text": "vmCancelThreadedIOJob(o)",
          "old_line_content": "        /* We were swapping the key, undo it! */",
          "new_line_content": "        vmCancelThreadedIOJob(o);",
          "content_same": false
        },
        {
          "line": 7597,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(c->blockingkeys != NULL)",
          "old_line_content": "",
          "new_line_content": "    assert(c->blockingkeys != NULL);",
          "content_same": false
        },
        {
          "line": 9649,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(c->io_keys,key)",
          "old_line_content": "     * This maps clients to keys they are waiting for. */",
          "new_line_content": "    listAddNodeTail(c->io_keys,key);",
          "content_same": false
        },
        {
          "line": 5553,
          "old_api": null,
          "new_api": "compareStringObjects",
          "old_text": null,
          "new_text": "compareStringObjects(x->forward[i]->obj,obj)",
          "old_line_content": "                (x->forward[i]->score == score &&",
          "new_line_content": "                compareStringObjects(x->forward[i]->obj,obj) < 0)))",
          "content_same": false
        },
        {
          "line": 7601,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(c->db->blockingkeys,c->blockingkeys[j])",
          "old_line_content": "        /* Remove this client from the list of clients waiting for this key. */",
          "new_line_content": "        de = dictFind(c->db->blockingkeys,c->blockingkeys[j]);",
          "content_same": false
        },
        {
          "line": 9653,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(c->db->io_keys,key)",
          "old_line_content": "    /* Add the client to the swapped keys => clients waiting map. */",
          "new_line_content": "    de = dictFind(c->db->io_keys,key);",
          "content_same": false
        },
        {
          "line": 7606,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(l)",
          "old_line_content": "        /* If the list is empty we need to remove it to avoid wasting memory */",
          "new_line_content": "        if (listLength(l) == 0)",
          "content_same": false
        },
        {
          "line": 5560,
          "old_api": null,
          "new_api": "equalStringObjects",
          "old_text": null,
          "new_text": "equalStringObjects(x->obj,obj)",
          "old_line_content": "    x = x->forward[0];",
          "new_line_content": "    if (x && score == x->score && equalStringObjects(x->obj,obj)) {",
          "content_same": false
        },
        {
          "line": 9658,
          "old_api": null,
          "new_api": "listCreate",
          "old_text": null,
          "new_text": "listCreate()",
          "old_line_content": "        /* For every key we take a list of clients blocked for it */",
          "new_line_content": "        l = listCreate();",
          "content_same": false
        },
        {
          "line": 7611,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(c->blockingkeys)",
          "old_line_content": "    /* Cleanup the client structure */",
          "new_line_content": "    zfree(c->blockingkeys);",
          "content_same": false
        },
        {
          "line": 9663,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "    } else {",
          "new_line_content": "        l = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 9665,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(l,c)",
          "old_line_content": "    }",
          "new_line_content": "    listAddNodeTail(l,c);",
          "content_same": false
        },
        {
          "line": 7620,
          "old_api": null,
          "new_api": "processInputBuffer",
          "old_text": null,
          "new_text": "processInputBuffer(c)",
          "old_line_content": "     * *after* c->querybuf was set to NULL. */",
          "new_line_content": "    if (c->querybuf && sdslen(c->querybuf) > 0) processInputBuffer(c);",
          "content_same": false
        },
        {
          "line": 9672,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*j))",
          "old_line_content": "        o->storage = REDIS_VM_LOADING;",
          "new_line_content": "        j = zmalloc(sizeof(*j));",
          "content_same": false
        },
        {
          "line": 9681,
          "old_api": null,
          "new_api": "lockThreadedIO",
          "old_text": null,
          "new_text": "lockThreadedIO()",
          "old_line_content": "        j->thread = (pthread_t) -1;",
          "new_line_content": "        lockThreadedIO();",
          "content_same": false
        },
        {
          "line": 5590,
          "old_api": null,
          "new_api": "zslDeleteNode",
          "old_text": null,
          "new_text": "zslDeleteNode(zsl, x, update)",
          "old_line_content": "        zskiplistNode *next = x->forward[0];",
          "new_line_content": "        zslDeleteNode(zsl, x, update);",
          "content_same": false
        },
        {
          "line": 7639,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(c->db->blockingkeys,key)",
          "old_line_content": "",
          "new_line_content": "    de = dictFind(c->db->blockingkeys,key);",
          "content_same": false
        },
        {
          "line": 7641,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "    if (de == NULL) return 0;",
          "new_line_content": "    l = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 7646,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"*2\\r\\n\")",
          "old_line_content": "",
          "new_line_content": "    addReplySds(receiver,sdsnew(\"*2\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 9696,
          "old_api": null,
          "new_api": "redisAssert",
          "old_text": null,
          "new_text": "redisAssert(j < argc)",
          "old_line_content": "    for (j = cmd->vm_firstkey; j <= last; j += cmd->vm_keystep) {",
          "new_line_content": "        redisAssert(j < argc);",
          "content_same": false
        },
        {
          "line": 9706,
          "old_api": null,
          "new_api": "REDIS_NOTUSED",
          "old_text": null,
          "new_text": "REDIS_NOTUSED(cmd)",
          "old_line_content": "    int i, num;",
          "new_line_content": "    REDIS_NOTUSED(cmd);",
          "content_same": false
        },
        {
          "line": 9708,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(argv[2]->ptr)",
          "old_line_content": "",
          "new_line_content": "    num = atoi(argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 7660,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[j])",
          "old_line_content": "    for (j = 1; j < c->argc-1; j++) {",
          "new_line_content": "        o = lookupKeyWrite(c->db,c->argv[j]);",
          "content_same": false
        },
        {
          "line": 9711,
          "old_api": null,
          "new_api": "waitForSwappedKey",
          "old_text": null,
          "new_text": "waitForSwappedKey(c,argv[3+i])",
          "old_line_content": "    for (i = 0; i < num; i++) {",
          "new_line_content": "        waitForSwappedKey(c,argv[3+i]);",
          "content_same": false
        },
        {
          "line": 7663,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "            if (o->type != REDIS_LIST) {",
          "new_line_content": "                addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 5619,
          "old_api": null,
          "new_api": "zslDeleteNode",
          "old_text": null,
          "new_text": "zslDeleteNode(zsl, x, update)",
          "old_line_content": "        zskiplistNode *next = x->forward[0];",
          "new_line_content": "        zslDeleteNode(zsl, x, update);",
          "content_same": false
        },
        {
          "line": 7667,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(list)",
          "old_line_content": "                list *list = o->ptr;",
          "new_line_content": "                if (listLength(list) != 0) {",
          "content_same": false
        },
        {
          "line": 9723,
          "old_api": null,
          "new_api": "REDIS_NOTUSED",
          "old_text": null,
          "new_text": "REDIS_NOTUSED(cmd)",
          "old_line_content": "    robj **margv;",
          "new_line_content": "    REDIS_NOTUSED(cmd);",
          "content_same": false
        },
        {
          "line": 9734,
          "old_api": null,
          "new_api": "vm_preload_proc",
          "old_text": null,
          "new_text": "mcmd->vm_preload_proc(c,mcmd,margc,margv)",
          "old_line_content": "        if (mcmd->vm_preload_proc != NULL) {",
          "new_line_content": "            mcmd->vm_preload_proc(c,mcmd,margc,margv);",
          "content_same": false
        },
        {
          "line": 7686,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"*2\\r\\n\")",
          "old_line_content": "                     * because it is... */",
          "new_line_content": "                    addReplySds(c,sdsnew(\"*2\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 9736,
          "old_api": null,
          "new_api": "waitForMultipleSwappedKeys",
          "old_text": null,
          "new_text": "waitForMultipleSwappedKeys(c,mcmd,margc,margv)",
          "old_line_content": "        } else {",
          "new_line_content": "            waitForMultipleSwappedKeys(c,mcmd,margc,margv);",
          "content_same": false
        },
        {
          "line": 7699,
          "old_api": null,
          "new_api": "strtol",
          "old_text": null,
          "new_text": "strtol(c->argv[c->argc-1]->ptr,NULL,10)",
          "old_line_content": "    /* If the list is empty or the key does not exists we must block */",
          "new_line_content": "    timeout = strtol(c->argv[c->argc-1]->ptr,NULL,10);",
          "content_same": false
        },
        {
          "line": 9753,
          "old_api": null,
          "new_api": "vm_preload_proc",
          "old_text": null,
          "new_text": "cmd->vm_preload_proc(c,cmd,c->argc,c->argv)",
          "old_line_content": "    if (cmd->vm_preload_proc != NULL) {",
          "new_line_content": "        cmd->vm_preload_proc(c,cmd,c->argc,c->argv);",
          "content_same": false
        },
        {
          "line": 7705,
          "old_api": null,
          "new_api": "blockingPopGenericCommand",
          "old_text": null,
          "new_text": "blockingPopGenericCommand(c,REDIS_HEAD)",
          "old_line_content": "static void blpopCommand(redisClient *c) {",
          "new_line_content": "    blockingPopGenericCommand(c,REDIS_HEAD);",
          "content_same": false
        },
        {
          "line": 9755,
          "old_api": null,
          "new_api": "waitForMultipleSwappedKeys",
          "old_text": null,
          "new_text": "waitForMultipleSwappedKeys(c,cmd,c->argc,c->argv)",
          "old_line_content": "    } else {",
          "new_line_content": "        waitForMultipleSwappedKeys(c,cmd,c->argc,c->argv);",
          "content_same": false
        },
        {
          "line": 5659,
          "old_api": null,
          "new_api": "compareStringObjects",
          "old_text": null,
          "new_text": "compareStringObjects(x->forward[i]->obj,o)",
          "old_line_content": "                (x->forward[i]->score == score &&",
          "new_line_content": "                compareStringObjects(x->forward[i]->obj,o) <= 0))) {",
          "content_same": false
        },
        {
          "line": 7709,
          "old_api": null,
          "new_api": "blockingPopGenericCommand",
          "old_text": null,
          "new_text": "blockingPopGenericCommand(c,REDIS_TAIL)",
          "old_line_content": "static void brpopCommand(redisClient *c) {",
          "new_line_content": "    blockingPopGenericCommand(c,REDIS_TAIL);",
          "content_same": false
        },
        {
          "line": 9759,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(c->io_keys)",
          "old_line_content": "    /* If the client was blocked for at least one key, mark it as blocked. */",
          "new_line_content": "    if (listLength(c->io_keys)) {",
          "content_same": false
        },
        {
          "line": 9761,
          "old_api": null,
          "new_api": "aeDeleteFileEvent",
          "old_text": null,
          "new_text": "aeDeleteFileEvent(server.el,c->fd,AE_READABLE)",
          "old_line_content": "        c->flags |= REDIS_IO_WAIT;",
          "new_line_content": "        aeDeleteFileEvent(server.el,c->fd,AE_READABLE);",
          "content_same": false
        },
        {
          "line": 5665,
          "old_api": null,
          "new_api": "equalStringObjects",
          "old_text": null,
          "new_text": "equalStringObjects(x->obj,o)",
          "old_line_content": "        /* x might be equal to zsl->header, so test if obj is non-NULL */",
          "new_line_content": "        if (x->obj && equalStringObjects(x->obj,o)) {",
          "content_same": false
        },
        {
          "line": 7716,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    ssize_t nwritten, ret = size;",
          "new_line_content": "    time_t start = time(NULL);",
          "content_same": false
        },
        {
          "line": 7720,
          "old_api": null,
          "new_api": "aeWait",
          "old_text": null,
          "new_text": "aeWait(fd,AE_WRITABLE,1000)",
          "old_line_content": "    while(size) {",
          "new_line_content": "        if (aeWait(fd,AE_WRITABLE,1000) & AE_WRITABLE) {",
          "content_same": false
        },
        {
          "line": 7726,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "        }",
          "new_line_content": "        if ((time(NULL)-start) > timeout) {",
          "content_same": false
        },
        {
          "line": 9780,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(c->io_keys,&li)",
          "old_line_content": "    /* Remove the key from the list of keys this client is waiting for. */",
          "new_line_content": "    listRewind(c->io_keys,&li);",
          "content_same": false
        },
        {
          "line": 7736,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    ssize_t nread, totread = 0;",
          "new_line_content": "    time_t start = time(NULL);",
          "content_same": false
        },
        {
          "line": 9787,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(ln != NULL)",
          "old_line_content": "    }",
          "new_line_content": "    assert(ln != NULL);",
          "content_same": false
        },
        {
          "line": 7740,
          "old_api": null,
          "new_api": "aeWait",
          "old_text": null,
          "new_text": "aeWait(fd,AE_READABLE,1000)",
          "old_line_content": "    while(size) {",
          "new_line_content": "        if (aeWait(fd,AE_READABLE,1000) & AE_READABLE) {",
          "content_same": false
        },
        {
          "line": 9790,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(c->db->io_keys,key)",
          "old_line_content": "    /* Remove the client form the key => waiting clients map. */",
          "new_line_content": "    de = dictFind(c->db->io_keys,key);",
          "content_same": false
        },
        {
          "line": 7747,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "        }",
          "new_line_content": "        if ((time(NULL)-start) > timeout) {",
          "content_same": false
        },
        {
          "line": 5702,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,key)",
          "old_line_content": "",
          "new_line_content": "    zsetobj = lookupKeyWrite(c->db,key);",
          "content_same": false
        },
        {
          "line": 9799,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(c->io_keys)",
          "old_line_content": "",
          "new_line_content": "    return listLength(c->io_keys) == 0;",
          "content_same": false
        },
        {
          "line": 5704,
          "old_api": null,
          "new_api": "createZsetObject",
          "old_text": null,
          "new_text": "createZsetObject()",
          "old_line_content": "    if (zsetobj == NULL) {",
          "new_line_content": "        zsetobj = createZsetObject();",
          "content_same": false
        },
        {
          "line": 5709,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "        if (zsetobj->type != REDIS_ZSET) {",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 9808,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(db->io_keys,key)",
          "old_line_content": "",
          "new_line_content": "    de = dictFind(db->io_keys,key);",
          "content_same": false
        },
        {
          "line": 7762,
          "old_api": null,
          "new_api": "syncRead",
          "old_text": null,
          "new_text": "syncRead(fd,&c,1,timeout)",
          "old_line_content": "",
          "new_line_content": "        if (syncRead(fd,&c,1,timeout) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 9811,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "",
          "new_line_content": "    l = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 5718,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(double))",
          "old_line_content": "     * '*score', that is, the new score to set, to the right value. */",
          "new_line_content": "    score = zmalloc(sizeof(double));",
          "content_same": false
        },
        {
          "line": 9816,
          "old_api": null,
          "new_api": "listFirst",
          "old_text": null,
          "new_text": "listFirst(l)",
          "old_line_content": "    while (len--) {",
          "new_line_content": "        ln = listFirst(l);",
          "content_same": false
        },
        {
          "line": 9819,
          "old_api": null,
          "new_api": "dontWaitForSwappedKey",
          "old_text": null,
          "new_text": "dontWaitForSwappedKey(c,key)",
          "old_line_content": "",
          "new_line_content": "        if (dontWaitForSwappedKey(c,key)) {",
          "content_same": false
        },
        {
          "line": 5723,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(zs->dict,ele)",
          "old_line_content": "        /* Read the old score. If the element was not present starts from 0 */",
          "new_line_content": "        de = dictFind(zs->dict,ele);",
          "content_same": false
        },
        {
          "line": 5725,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "        if (de) {",
          "new_line_content": "            double *oldscore = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 9822,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(server.io_ready_clients,c)",
          "old_line_content": "             * loaded all the keys about it. */",
          "new_line_content": "            listAddNodeTail(server.io_ready_clients,c);",
          "content_same": false
        },
        {
          "line": 9830,
          "old_api": null,
          "new_api": "getDecodedObject",
          "old_text": null,
          "new_text": "getDecodedObject(c->argv[3])",
          "old_line_content": "static void configSetCommand(redisClient *c) {",
          "new_line_content": "    robj *o = getDecodedObject(c->argv[3]);",
          "content_same": false
        },
        {
          "line": 5736,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(zs->dict,ele,score)",
          "old_line_content": "     * to both ZADD and ZINCRBY... */",
          "new_line_content": "    if (dictAdd(zs->dict,ele,score) == DICT_OK) {",
          "content_same": false
        },
        {
          "line": 7784,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(c->reply)",
          "old_line_content": "     * dataset, so that we can copy to other slaves if needed. */",
          "new_line_content": "    if (listLength(c->reply) != 0) {",
          "content_same": false
        },
        {
          "line": 5738,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(ele)",
          "old_line_content": "        /* case 1: New element */",
          "new_line_content": "        incrRefCount(ele); /* added to hash */",
          "content_same": false
        },
        {
          "line": 7789,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Slave ask for synchronization\")",
          "old_line_content": "",
          "new_line_content": "    redisLog(REDIS_NOTICE,\"Slave ask for synchronization\");",
          "content_same": false
        },
        {
          "line": 5743,
          "old_api": null,
          "new_api": "addReplyDouble",
          "old_text": null,
          "new_text": "addReplyDouble(c,*score)",
          "old_line_content": "        if (doincrement)",
          "new_line_content": "            addReplyDouble(c,*score);",
          "content_same": false
        },
        {
          "line": 5745,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.cone)",
          "old_line_content": "        else",
          "new_line_content": "            addReply(c,shared.cone);",
          "content_same": false
        },
        {
          "line": 9845,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(o->ptr,\"everysec\")",
          "old_line_content": "            server.appendfsync = APPENDFSYNC_NO;",
          "new_line_content": "        } else if (!strcasecmp(o->ptr,\"everysec\")) {",
          "content_same": false
        },
        {
          "line": 9847,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(o->ptr,\"always\")",
          "old_line_content": "            server.appendfsync = APPENDFSYNC_EVERYSEC;",
          "new_line_content": "        } else if (!strcasecmp(o->ptr,\"always\")) {",
          "content_same": false
        },
        {
          "line": 5751,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(zs->dict,ele)",
          "old_line_content": "        /* case 2: Score update operation */",
          "new_line_content": "        de = dictFind(zs->dict,ele);",
          "content_same": false
        },
        {
          "line": 7800,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(server.slaves,&li)",
          "old_line_content": "",
          "new_line_content": "        listRewind(server.slaves,&li);",
          "content_same": false
        },
        {
          "line": 9852,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[2]->ptr,\"save\")",
          "old_line_content": "        }",
          "new_line_content": "    } else if (!strcasecmp(c->argv[2]->ptr,\"save\")) {",
          "content_same": false
        },
        {
          "line": 9854,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(o->ptr)",
          "old_line_content": "        int vlen, j;",
          "new_line_content": "        sds *v = sdssplitlen(o->ptr,sdslen(o->ptr),\" \",1,&vlen);",
          "content_same": false
        },
        {
          "line": 5758,
          "old_api": null,
          "new_api": "zslDelete",
          "old_text": null,
          "new_text": "zslDelete(zs->zsl,*oldscore,ele)",
          "old_line_content": "            /* Remove and insert the element in the skip list with new score */",
          "new_line_content": "            deleted = zslDelete(zs->zsl,*oldscore,ele);",
          "content_same": false
        },
        {
          "line": 7808,
          "old_api": null,
          "new_api": "listRelease",
          "old_text": null,
          "new_text": "listRelease(c->reply)",
          "old_line_content": "             * another slave. Set the right state, and copy the buffer. */",
          "new_line_content": "            listRelease(c->reply);",
          "content_same": false
        },
        {
          "line": 5763,
          "old_api": null,
          "new_api": "dictReplace",
          "old_text": null,
          "new_text": "dictReplace(zs->dict,ele,score)",
          "old_line_content": "            /* Update the score in the hash table */",
          "new_line_content": "            dictReplace(zs->dict,ele,score);",
          "content_same": false
        },
        {
          "line": 9860,
          "old_api": null,
          "new_api": "sdsfreesplitres",
          "old_text": null,
          "new_text": "sdsfreesplitres(v,vlen)",
          "old_line_content": "        if (vlen & 1) {",
          "new_line_content": "            sdsfreesplitres(v,vlen);",
          "content_same": false
        },
        {
          "line": 7811,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Waiting for end of BGSAVE for SYNC\")",
          "old_line_content": "            c->replstate = REDIS_REPL_WAIT_BGSAVE_END;",
          "new_line_content": "            redisLog(REDIS_NOTICE,\"Waiting for end of BGSAVE for SYNC\");",
          "content_same": false
        },
        {
          "line": 5766,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(score)",
          "old_line_content": "        } else {",
          "new_line_content": "            zfree(score);",
          "content_same": false
        },
        {
          "line": 7816,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Waiting for next BGSAVE for SYNC\")",
          "old_line_content": "            c->replstate = REDIS_REPL_WAIT_BGSAVE_START;",
          "new_line_content": "            redisLog(REDIS_NOTICE,\"Waiting for next BGSAVE for SYNC\");",
          "content_same": false
        },
        {
          "line": 5769,
          "old_api": null,
          "new_api": "addReplyDouble",
          "old_text": null,
          "new_text": "addReplyDouble(c,*score)",
          "old_line_content": "        if (doincrement)",
          "new_line_content": "            addReplyDouble(c,*score);",
          "content_same": false
        },
        {
          "line": 9867,
          "old_api": null,
          "new_api": "strtoll",
          "old_text": null,
          "new_text": "strtoll(v[j], &eptr, 10)",
          "old_line_content": "",
          "new_line_content": "            val = strtoll(v[j], &eptr, 10);",
          "content_same": false
        },
        {
          "line": 5771,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "        else",
          "new_line_content": "            addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 7820,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Starting BGSAVE for SYNC\")",
          "old_line_content": "        /* Ok we don't have a BGSAVE in progress, let's start one */",
          "new_line_content": "        redisLog(REDIS_NOTICE,\"Starting BGSAVE for SYNC\");",
          "content_same": false
        },
        {
          "line": 9871,
          "old_api": null,
          "new_api": "sdsfreesplitres",
          "old_text": null,
          "new_text": "sdsfreesplitres(v,vlen)",
          "old_line_content": "                ((j & 1) == 1 && val < 0)) {",
          "new_line_content": "                sdsfreesplitres(v,vlen);",
          "content_same": false
        },
        {
          "line": 5778,
          "old_api": null,
          "new_api": "getDoubleFromObjectOrReply",
          "old_text": null,
          "new_text": "getDoubleFromObjectOrReply(c, c->argv[2], &scoreval, NULL)",
          "old_line_content": "",
          "new_line_content": "    if (getDoubleFromObjectOrReply(c, c->argv[2], &scoreval, NULL) != REDIS_OK) return;",
          "content_same": false
        },
        {
          "line": 9876,
          "old_api": null,
          "new_api": "resetServerSaveParams",
          "old_text": null,
          "new_text": "resetServerSaveParams()",
          "old_line_content": "        /* Finally set the new config */",
          "new_line_content": "        resetServerSaveParams();",
          "content_same": false
        },
        {
          "line": 7831,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(server.slaves,c)",
          "old_line_content": "    c->slaveseldb = 0;",
          "new_line_content": "    listAddNodeTail(server.slaves,c);",
          "content_same": false
        },
        {
          "line": 9881,
          "old_api": null,
          "new_api": "strtoll",
          "old_text": null,
          "new_text": "strtoll(v[j],NULL,10)",
          "old_line_content": "",
          "new_line_content": "            seconds = strtoll(v[j],NULL,10);",
          "content_same": false
        },
        {
          "line": 5785,
          "old_api": null,
          "new_api": "getDoubleFromObjectOrReply",
          "old_text": null,
          "new_text": "getDoubleFromObjectOrReply(c, c->argv[2], &scoreval, NULL)",
          "old_line_content": "",
          "new_line_content": "    if (getDoubleFromObjectOrReply(c, c->argv[2], &scoreval, NULL) != REDIS_OK) return;",
          "content_same": false
        },
        {
          "line": 9885,
          "old_api": null,
          "new_api": "sdsfreesplitres",
          "old_text": null,
          "new_text": "sdsfreesplitres(v,vlen)",
          "old_line_content": "        }",
          "new_line_content": "        sdsfreesplitres(v,vlen);",
          "content_same": false
        },
        {
          "line": 7837,
          "old_api": null,
          "new_api": "REDIS_NOTUSED",
          "old_text": null,
          "new_text": "REDIS_NOTUSED(el)",
          "old_line_content": "    redisClient *slave = privdata;",
          "new_line_content": "    REDIS_NOTUSED(el);",
          "content_same": false
        },
        {
          "line": 9887,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "    } else {",
          "new_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),",
          "content_same": false
        },
        {
          "line": 9890,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(o)",
          "old_line_content": "            (char*)c->argv[2]->ptr));",
          "new_line_content": "        decrRefCount(o);",
          "content_same": false
        },
        {
          "line": 5796,
          "old_api": null,
          "new_api": "lookupKeyWriteOrReply",
          "old_text": null,
          "new_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.czero)",
          "old_line_content": "",
          "new_line_content": "    if ((zsetobj = lookupKeyWriteOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "content_same": false
        },
        {
          "line": 9893,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(o)",
          "old_line_content": "    }",
          "new_line_content": "    decrRefCount(o);",
          "content_same": false
        },
        {
          "line": 5800,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(zs->dict,c->argv[2])",
          "old_line_content": "    zs = zsetobj->ptr;",
          "new_line_content": "    de = dictFind(zs->dict,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 7849,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "",
          "new_line_content": "        bulkcount = sdscatprintf(sdsempty(),\"$%lld\\r\\n\",(unsigned long long)",
          "content_same": false
        },
        {
          "line": 9898,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "badfmt: /* Bad format errors */",
          "new_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),",
          "content_same": false
        },
        {
          "line": 5802,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "    if (de == NULL) {",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 7851,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(bulkcount)",
          "old_line_content": "            slave->repldbsize);",
          "new_line_content": "        if (write(fd,bulkcount,sdslen(bulkcount)) != (signed)sdslen(bulkcount))",
          "content_same": false
        },
        {
          "line": 7853,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(bulkcount)",
          "old_line_content": "        {",
          "new_line_content": "            sdsfree(bulkcount);",
          "content_same": false
        },
        {
          "line": 9902,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(o)",
          "old_line_content": "            (char*)c->argv[2]->ptr));",
          "new_line_content": "    decrRefCount(o);",
          "content_same": false
        },
        {
          "line": 5806,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "    /* Delete from the skiplist */",
          "new_line_content": "    oldscore = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 7857,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(bulkcount)",
          "old_line_content": "        }",
          "new_line_content": "        sdsfree(bulkcount);",
          "content_same": false
        },
        {
          "line": 9906,
          "old_api": null,
          "new_api": "getDecodedObject",
          "old_text": null,
          "new_text": "getDecodedObject(c->argv[2])",
          "old_line_content": "static void configGetCommand(redisClient *c) {",
          "new_line_content": "    robj *o = getDecodedObject(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 5811,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(zs->dict,c->argv[2])",
          "old_line_content": "    /* Delete from the hash table */",
          "new_line_content": "    dictDelete(zs->dict,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 7859,
          "old_api": null,
          "new_api": "lseek",
          "old_text": null,
          "new_text": "lseek(slave->repldbfd,slave->repldboff,SEEK_SET)",
          "old_line_content": "    }",
          "new_line_content": "    lseek(slave->repldbfd,slave->repldboff,SEEK_SET);",
          "content_same": false
        },
        {
          "line": 7862,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Read error sending DB to slave: %s\",\n            (buflen == 0) ? \"premature EOF\" : strerror(errno))",
          "old_line_content": "    if (buflen <= 0) {",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Read error sending DB to slave: %s\",",
          "content_same": false
        },
        {
          "line": 9911,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,lenobj)",
          "old_line_content": "",
          "new_line_content": "    addReply(c,lenobj);",
          "content_same": false
        },
        {
          "line": 5815,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.cone)",
          "old_line_content": "    server.dirty++;",
          "new_line_content": "    addReply(c,shared.cone);",
          "content_same": false
        },
        {
          "line": 9914,
          "old_api": null,
          "new_api": "stringmatch",
          "old_text": null,
          "new_text": "stringmatch(pattern,\"dbfilename\",0)",
          "old_line_content": "",
          "new_line_content": "    if (stringmatch(pattern,\"dbfilename\",0)) {",
          "content_same": false
        },
        {
          "line": 7867,
          "old_api": null,
          "new_api": "write",
          "old_text": null,
          "new_text": "write(fd,buf,buflen)",
          "old_line_content": "    }",
          "new_line_content": "    if ((nwritten = write(fd,buf,buflen)) == -1) {",
          "content_same": false
        },
        {
          "line": 9919,
          "old_api": null,
          "new_api": "stringmatch",
          "old_text": null,
          "new_text": "stringmatch(pattern,\"requirepass\",0)",
          "old_line_content": "    }",
          "new_line_content": "    if (stringmatch(pattern,\"requirepass\",0)) {",
          "content_same": false
        },
        {
          "line": 5825,
          "old_api": null,
          "new_api": "getDoubleFromObjectOrReply",
          "old_text": null,
          "new_text": "getDoubleFromObjectOrReply(c, c->argv[2], &min, NULL)",
          "old_line_content": "",
          "new_line_content": "    if ((getDoubleFromObjectOrReply(c, c->argv[2], &min, NULL) != REDIS_OK) ||",
          "content_same": false
        },
        {
          "line": 7875,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(slave->repldbfd)",
          "old_line_content": "    if (slave->repldboff == slave->repldbsize) {",
          "new_line_content": "        close(slave->repldbfd);",
          "content_same": false
        },
        {
          "line": 9924,
          "old_api": null,
          "new_api": "stringmatch",
          "old_text": null,
          "new_text": "stringmatch(pattern,\"masterauth\",0)",
          "old_line_content": "    }",
          "new_line_content": "    if (stringmatch(pattern,\"masterauth\",0)) {",
          "content_same": false
        },
        {
          "line": 5828,
          "old_api": null,
          "new_api": "lookupKeyWriteOrReply",
          "old_text": null,
          "new_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.czero)",
          "old_line_content": "",
          "new_line_content": "    if ((zsetobj = lookupKeyWriteOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "content_same": false
        },
        {
          "line": 7877,
          "old_api": null,
          "new_api": "aeDeleteFileEvent",
          "old_text": null,
          "new_text": "aeDeleteFileEvent(server.el,slave->fd,AE_WRITABLE)",
          "old_line_content": "        slave->repldbfd = -1;",
          "new_line_content": "        aeDeleteFileEvent(server.el,slave->fd,AE_WRITABLE);",
          "content_same": false
        },
        {
          "line": 7879,
          "old_api": null,
          "new_api": "aeCreateFileEvent",
          "old_text": null,
          "new_text": "aeCreateFileEvent(server.el, slave->fd, AE_WRITABLE,\n            sendReplyToClient, slave)",
          "old_line_content": "        slave->replstate = REDIS_REPL_ONLINE;",
          "new_line_content": "        if (aeCreateFileEvent(server.el, slave->fd, AE_WRITABLE,",
          "content_same": false
        },
        {
          "line": 5832,
          "old_api": null,
          "new_api": "zslDeleteRangeByScore",
          "old_text": null,
          "new_text": "zslDeleteRangeByScore(zs->zsl,min,max,zs->dict)",
          "old_line_content": "    zs = zsetobj->ptr;",
          "new_line_content": "    deleted = zslDeleteRangeByScore(zs->zsl,min,max,zs->dict);",
          "content_same": false
        },
        {
          "line": 9929,
          "old_api": null,
          "new_api": "stringmatch",
          "old_text": null,
          "new_text": "stringmatch(pattern,\"maxmemory\",0)",
          "old_line_content": "    }",
          "new_line_content": "    if (stringmatch(pattern,\"maxmemory\",0)) {",
          "content_same": false
        },
        {
          "line": 7881,
          "old_api": null,
          "new_api": "freeClient",
          "old_text": null,
          "new_text": "freeClient(slave)",
          "old_line_content": "            sendReplyToClient, slave) == AE_ERR) {",
          "new_line_content": "            freeClient(slave);",
          "content_same": false
        },
        {
          "line": 9932,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(buf,128,\"%llu\\n\",server.maxmemory)",
          "old_line_content": "",
          "new_line_content": "        snprintf(buf,128,\"%llu\\n\",server.maxmemory);",
          "content_same": false
        },
        {
          "line": 5836,
          "old_api": null,
          "new_api": "addReplyLong",
          "old_text": null,
          "new_text": "addReplyLong(c,deleted)",
          "old_line_content": "    server.dirty += deleted;",
          "new_line_content": "    addReplyLong(c,deleted);",
          "content_same": false
        },
        {
          "line": 7884,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "        }",
          "new_line_content": "        addReplySds(slave,sdsempty());",
          "content_same": false
        },
        {
          "line": 9937,
          "old_api": null,
          "new_api": "stringmatch",
          "old_text": null,
          "new_text": "stringmatch(pattern,\"appendfsync\",0)",
          "old_line_content": "    }",
          "new_line_content": "    if (stringmatch(pattern,\"appendfsync\",0)) {",
          "content_same": false
        },
        {
          "line": 6453,
          "old_api": null,
          "new_api": "dictResize",
          "old_text": null,
          "new_text": "dictResize(o->ptr)",
          "old_line_content": "        /* Always check if the dictionary needs a resize after a delete. */",
          "new_line_content": "        if (deleted && htNeedsResize(o->ptr)) dictResize(o->ptr);",
          "content_same": false
        },
        {
          "line": 5847,
          "old_api": null,
          "new_api": "getLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongFromObjectOrReply(c, c->argv[2], &start, NULL)",
          "old_line_content": "",
          "new_line_content": "    if ((getLongFromObjectOrReply(c, c->argv[2], &start, NULL) != REDIS_OK) ||",
          "content_same": false
        },
        {
          "line": 9946,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c,\"appendfsync\")",
          "old_line_content": "        }",
          "new_line_content": "        addReplyBulkCString(c,\"appendfsync\");",
          "content_same": false
        },
        {
          "line": 5850,
          "old_api": null,
          "new_api": "lookupKeyWriteOrReply",
          "old_text": null,
          "new_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.czero)",
          "old_line_content": "",
          "new_line_content": "    if ((zsetobj = lookupKeyWriteOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "content_same": false
        },
        {
          "line": 7900,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(server.slaves,&li)",
          "old_line_content": "",
          "new_line_content": "    listRewind(server.slaves,&li);",
          "content_same": false
        },
        {
          "line": 9950,
          "old_api": null,
          "new_api": "stringmatch",
          "old_text": null,
          "new_text": "stringmatch(pattern,\"save\",0)",
          "old_line_content": "    }",
          "new_line_content": "    if (stringmatch(pattern,\"save\",0)) {",
          "content_same": false
        },
        {
          "line": 9955,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(buf,\"%ld %d\",\n                    server.saveparams[j].seconds,\n                    server.saveparams[j].changes)",
          "old_line_content": "        for (j = 0; j < server.saveparamslen; j++) {",
          "new_line_content": "            buf = sdscatprintf(buf,\"%ld %d\",",
          "content_same": false
        },
        {
          "line": 9959,
          "old_api": null,
          "new_api": "sdscatlen",
          "old_text": null,
          "new_text": "sdscatlen(buf,\" \",1)",
          "old_line_content": "            if (j != server.saveparamslen-1)",
          "new_line_content": "                buf = sdscatlen(buf,\" \",1);",
          "content_same": false
        },
        {
          "line": 5863,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "    if (start > end || start >= llen) {",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 9961,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c,\"save\")",
          "old_line_content": "        }",
          "new_line_content": "        addReplyBulkCString(c,\"save\");",
          "content_same": false
        },
        {
          "line": 7911,
          "old_api": null,
          "new_api": "freeClient",
          "old_text": null,
          "new_text": "freeClient(slave)",
          "old_line_content": "            if (bgsaveerr != REDIS_OK) {",
          "new_line_content": "                freeClient(slave);",
          "content_same": false
        },
        {
          "line": 7915,
          "old_api": null,
          "new_api": "open",
          "old_text": null,
          "new_text": "open(server.dbfilename,O_RDONLY)",
          "old_line_content": "            }",
          "new_line_content": "            if ((slave->repldbfd = open(server.dbfilename,O_RDONLY)) == -1 ||",
          "content_same": false
        },
        {
          "line": 9966,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(o)",
          "old_line_content": "    }",
          "new_line_content": "    decrRefCount(o);",
          "content_same": false
        },
        {
          "line": 5870,
          "old_api": null,
          "new_api": "zslDeleteRangeByRank",
          "old_text": null,
          "new_text": "zslDeleteRangeByRank(zs->zsl,start+1,end+1,zs->dict)",
          "old_line_content": "     * use 1-based rank */",
          "new_line_content": "    deleted = zslDeleteRangeByRank(zs->zsl,start+1,end+1,zs->dict);",
          "content_same": false
        },
        {
          "line": 5874,
          "old_api": null,
          "new_api": "addReplyLong",
          "old_text": null,
          "new_text": "addReplyLong(c, deleted)",
          "old_line_content": "    server.dirty += deleted;",
          "new_line_content": "    addReplyLong(c, deleted);",
          "content_same": false
        },
        {
          "line": 9971,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr,\"set\")",
          "old_line_content": "static void configCommand(redisClient *c) {",
          "new_line_content": "    if (!strcasecmp(c->argv[1]->ptr,\"set\")) {",
          "content_same": false
        },
        {
          "line": 7924,
          "old_api": null,
          "new_api": "aeDeleteFileEvent",
          "old_text": null,
          "new_text": "aeDeleteFileEvent(server.el,slave->fd,AE_WRITABLE)",
          "old_line_content": "            slave->replstate = REDIS_REPL_SEND_BULK;",
          "new_line_content": "            aeDeleteFileEvent(server.el,slave->fd,AE_WRITABLE);",
          "content_same": false
        },
        {
          "line": 9973,
          "old_api": null,
          "new_api": "configSetCommand",
          "old_text": null,
          "new_text": "configSetCommand(c)",
          "old_line_content": "        if (c->argc != 4) goto badarity;",
          "new_line_content": "        configSetCommand(c);",
          "content_same": false
        },
        {
          "line": 9976,
          "old_api": null,
          "new_api": "configGetCommand",
          "old_text": null,
          "new_text": "configGetCommand(c)",
          "old_line_content": "        if (c->argc != 3) goto badarity;",
          "new_line_content": "        configGetCommand(c);",
          "content_same": false
        },
        {
          "line": 7932,
          "old_api": null,
          "new_api": "rdbSaveBackground",
          "old_text": null,
          "new_text": "rdbSaveBackground(server.dbfilename)",
          "old_line_content": "    if (startbgsave) {",
          "new_line_content": "        if (rdbSaveBackground(server.dbfilename) != REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 5885,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(d1->dict)",
          "old_line_content": "    unsigned long size1, size2;",
          "new_line_content": "    size1 = d1->dict ? dictSize(d1->dict) : 0;",
          "content_same": false
        },
        {
          "line": 9982,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "        server.stat_expiredkeys = 0;",
          "new_line_content": "        server.stat_starttime = time(NULL);",
          "content_same": false
        },
        {
          "line": 7935,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(server.slaves,&li)",
          "old_line_content": "",
          "new_line_content": "            listRewind(server.slaves,&li);",
          "content_same": false
        },
        {
          "line": 9985,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "    } else {",
          "new_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),",
          "content_same": false
        },
        {
          "line": 7941,
          "old_api": null,
          "new_api": "freeClient",
          "old_text": null,
          "new_text": "freeClient(slave)",
          "old_line_content": "                if (slave->replstate == REDIS_REPL_WAIT_BGSAVE_START)",
          "new_line_content": "                    freeClient(slave);",
          "content_same": false
        },
        {
          "line": 9991,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "badarity:",
          "new_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),",
          "content_same": false
        },
        {
          "line": 7950,
          "old_api": null,
          "new_api": "anetTcpConnect",
          "old_text": null,
          "new_text": "anetTcpConnect(NULL,server.masterhost,server.masterport)",
          "old_line_content": "    long dumpsize;",
          "new_line_content": "    int fd = anetTcpConnect(NULL,server.masterhost,server.masterport);",
          "content_same": false
        },
        {
          "line": 5903,
          "old_api": null,
          "new_api": "redisPanic",
          "old_text": null,
          "new_text": "redisPanic(\"Unknown ZUNION/INTER aggregate type\")",
          "old_line_content": "        /* safety net */",
          "new_line_content": "        redisPanic(\"Unknown ZUNION/INTER aggregate type\");",
          "content_same": false
        },
        {
          "line": 10001,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(pat->pattern)",
          "old_line_content": "",
          "new_line_content": "    decrRefCount(pat->pattern);",
          "content_same": false
        },
        {
          "line": 7954,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Unable to connect to MASTER: %s\",\n            strerror(errno))",
          "old_line_content": "    if (fd == -1) {",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Unable to connect to MASTER: %s\",",
          "content_same": false
        },
        {
          "line": 10009,
          "old_api": null,
          "new_api": "equalStringObjects",
          "old_text": null,
          "new_text": "equalStringObjects(pa->pattern,pb->pattern)",
          "old_line_content": "    return (pa->client == pb->client) &&",
          "new_line_content": "           (equalStringObjects(pa->pattern,pb->pattern));",
          "content_same": false
        },
        {
          "line": 7961,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(authcmd, 1024, \"AUTH %s\\r\\n\", server.masterauth)",
          "old_line_content": "    if(server.masterauth) {",
          "new_line_content": "    \tsnprintf(authcmd, 1024, \"AUTH %s\\r\\n\", server.masterauth);",
          "content_same": false
        },
        {
          "line": 5917,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[2]->ptr)",
          "old_line_content": "    /* expect zsetnum input keys to be given */",
          "new_line_content": "    zsetnum = atoi(c->argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 5919,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"-ERR at least 1 input key is needed for ZUNIONSTORE/ZINTERSTORE\\r\\n\")",
          "old_line_content": "    if (zsetnum < 1) {",
          "new_line_content": "        addReplySds(c,sdsnew(\"-ERR at least 1 input key is needed for ZUNIONSTORE/ZINTERSTORE\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 7969,
          "old_api": null,
          "new_api": "syncReadLine",
          "old_text": null,
          "new_text": "syncReadLine(fd,buf,1024,3600)",
          "old_line_content": "        /* Read the AUTH result.  */",
          "new_line_content": "        if (syncReadLine(fd,buf,1024,3600) == -1) {",
          "content_same": false
        },
        {
          "line": 10020,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(c->pubsub_channels,channel,NULL)",
          "old_line_content": "    /* Add the channel to the client -> channels hash table */",
          "new_line_content": "    if (dictAdd(c->pubsub_channels,channel,NULL) == DICT_OK) {",
          "content_same": false
        },
        {
          "line": 5925,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "    if (3+zsetnum > c->argc) {",
          "new_line_content": "        addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 10022,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(channel)",
          "old_line_content": "        retval = 1;",
          "new_line_content": "        incrRefCount(channel);",
          "content_same": false
        },
        {
          "line": 10024,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(server.pubsub_channels,channel)",
          "old_line_content": "        /* Add the client to the channel -> list of clients hash table */",
          "new_line_content": "        de = dictFind(server.pubsub_channels,channel);",
          "content_same": false
        },
        {
          "line": 7976,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "        if (buf[0] != '+') {",
          "new_line_content": "            close(fd);",
          "content_same": false
        },
        {
          "line": 10026,
          "old_api": null,
          "new_api": "listCreate",
          "old_text": null,
          "new_text": "listCreate()",
          "old_line_content": "        if (de == NULL) {",
          "new_line_content": "            clients = listCreate();",
          "content_same": false
        },
        {
          "line": 5930,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(zsetopsrc) * zsetnum)",
          "old_line_content": "    /* read keys to be used for input */",
          "new_line_content": "    src = zmalloc(sizeof(zsetopsrc) * zsetnum);",
          "content_same": false
        },
        {
          "line": 5932,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[j])",
          "old_line_content": "    for (i = 0, j = 3; i < zsetnum; i++, j++) {",
          "new_line_content": "        robj *zsetobj = lookupKeyWrite(c->db,c->argv[j]);",
          "content_same": false
        },
        {
          "line": 10030,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "        } else {",
          "new_line_content": "            clients = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 7983,
          "old_api": null,
          "new_api": "syncWrite",
          "old_text": null,
          "new_text": "syncWrite(fd,\"SYNC \\r\\n\",7,5)",
          "old_line_content": "    /* Issue the SYNC command */",
          "new_line_content": "    if (syncWrite(fd,\"SYNC \\r\\n\",7,5) == -1) {",
          "content_same": false
        },
        {
          "line": 10032,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(clients,c)",
          "old_line_content": "        }",
          "new_line_content": "        listAddNodeTail(clients,c);",
          "content_same": false
        },
        {
          "line": 5937,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(src)",
          "old_line_content": "            if (zsetobj->type != REDIS_ZSET) {",
          "new_line_content": "                zfree(src);",
          "content_same": false
        },
        {
          "line": 10035,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.mbulk3)",
          "old_line_content": "    /* Notify the client */",
          "new_line_content": "    addReply(c,shared.mbulk3);",
          "content_same": false
        },
        {
          "line": 7990,
          "old_api": null,
          "new_api": "syncReadLine",
          "old_text": null,
          "new_text": "syncReadLine(fd,buf,1024,3600)",
          "old_line_content": "    /* Read the bulk write count */",
          "new_line_content": "    if (syncReadLine(fd,buf,1024,3600) == -1) {",
          "content_same": false
        },
        {
          "line": 7997,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "    if (buf[0] != '$') {",
          "new_line_content": "        close(fd);",
          "content_same": false
        },
        {
          "line": 5953,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"weights\")",
          "old_line_content": "        while (remaining) {",
          "new_line_content": "            if (remaining >= (zsetnum + 1) && !strcasecmp(c->argv[j]->ptr,\"weights\")) {",
          "content_same": false
        },
        {
          "line": 8001,
          "old_api": null,
          "new_api": "strtol",
          "old_text": null,
          "new_text": "strtol(buf+1,NULL,10)",
          "old_line_content": "    }",
          "new_line_content": "    dumpsize = strtol(buf+1,NULL,10);",
          "content_same": false
        },
        {
          "line": 10051,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(channel)",
          "old_line_content": "    /* Remove the channel from the client -> channels hash table */",
          "new_line_content": "    incrRefCount(channel); /* channel may be just a pointer to the same object",
          "content_same": false
        },
        {
          "line": 5956,
          "old_api": null,
          "new_api": "getDoubleFromObjectOrReply",
          "old_text": null,
          "new_text": "getDoubleFromObjectOrReply(c, c->argv[j], &src[i].weight, NULL)",
          "old_line_content": "                for (i = 0; i < zsetnum; i++, j++, remaining--) {",
          "new_line_content": "                    if (getDoubleFromObjectOrReply(c, c->argv[j], &src[i].weight, NULL) != REDIS_OK)",
          "content_same": false
        },
        {
          "line": 10053,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(c->pubsub_channels,channel)",
          "old_line_content": "                            we have in the hash tables. Protect it... */",
          "new_line_content": "    if (dictDelete(c->pubsub_channels,channel) == DICT_OK) {",
          "content_same": false
        },
        {
          "line": 8005,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(tmpfile,256,\n            \"temp-%d.%ld.rdb\",(int)time(NULL),(long int)getpid())",
          "old_line_content": "    while(maxtries--) {",
          "new_line_content": "        snprintf(tmpfile,256,",
          "content_same": false
        },
        {
          "line": 5959,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"aggregate\")",
          "old_line_content": "                }",
          "new_line_content": "            } else if (remaining >= 2 && !strcasecmp(c->argv[j]->ptr,\"aggregate\")) {",
          "content_same": false
        },
        {
          "line": 10056,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(server.pubsub_channels,channel)",
          "old_line_content": "        /* Remove the client from the channel -> clients list hash table */",
          "new_line_content": "        de = dictFind(server.pubsub_channels,channel);",
          "content_same": false
        },
        {
          "line": 5961,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"sum\")",
          "old_line_content": "                j++; remaining--;",
          "new_line_content": "                if (!strcasecmp(c->argv[j]->ptr,\"sum\")) {",
          "content_same": false
        },
        {
          "line": 8009,
          "old_api": null,
          "new_api": "sleep",
          "old_text": null,
          "new_text": "sleep(1)",
          "old_line_content": "        if (dfd != -1) break;",
          "new_line_content": "        sleep(1);",
          "content_same": false
        },
        {
          "line": 5963,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"min\")",
          "old_line_content": "                    aggregate = REDIS_AGGR_SUM;",
          "new_line_content": "                } else if (!strcasecmp(c->argv[j]->ptr,\"min\")) {",
          "content_same": false
        },
        {
          "line": 8012,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "    if (dfd == -1) {",
          "new_line_content": "        close(fd);",
          "content_same": false
        },
        {
          "line": 5965,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"max\")",
          "old_line_content": "                    aggregate = REDIS_AGGR_MIN;",
          "new_line_content": "                } else if (!strcasecmp(c->argv[j]->ptr,\"max\")) {",
          "content_same": false
        },
        {
          "line": 5968,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(src)",
          "old_line_content": "                } else {",
          "new_line_content": "                    zfree(src);",
          "content_same": false
        },
        {
          "line": 10066,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(server.pubsub_channels,channel)",
          "old_line_content": "             * Redis PUBSUB creating millions of channels. */",
          "new_line_content": "            dictDelete(server.pubsub_channels,channel);",
          "content_same": false
        },
        {
          "line": 8019,
          "old_api": null,
          "new_api": "read",
          "old_text": null,
          "new_text": "read(fd,buf,(dumpsize < 1024)?dumpsize:1024)",
          "old_line_content": "",
          "new_line_content": "        nread = read(fd,buf,(dumpsize < 1024)?dumpsize:1024);",
          "content_same": false
        },
        {
          "line": 8021,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"I/O error trying to sync with MASTER: %s\",\n                strerror(errno))",
          "old_line_content": "        if (nread == -1) {",
          "new_line_content": "            redisLog(REDIS_WARNING,\"I/O error trying to sync with MASTER: %s\",",
          "content_same": false
        },
        {
          "line": 5974,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(src)",
          "old_line_content": "            } else {",
          "new_line_content": "                zfree(src);",
          "content_same": false
        },
        {
          "line": 10071,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.mbulk3)",
          "old_line_content": "    if (notify) {",
          "new_line_content": "        addReply(c,shared.mbulk3);",
          "content_same": false
        },
        {
          "line": 8027,
          "old_api": null,
          "new_api": "write",
          "old_text": null,
          "new_text": "write(dfd,buf,nread)",
          "old_line_content": "        }",
          "new_line_content": "        nwritten = write(dfd,buf,nread);",
          "content_same": false
        },
        {
          "line": 8029,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "        if (nwritten == -1) {",
          "new_line_content": "            redisLog(REDIS_WARNING,\"Write error writing to the DB dump file needed for MASTER <-> SLAVE synchrnonization: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 10078,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(channel)",
          "old_line_content": "    }",
          "new_line_content": "    decrRefCount(channel); /* it is finally safe to release it */",
          "content_same": false
        },
        {
          "line": 5983,
          "old_api": null,
          "new_api": "qsort",
          "old_text": null,
          "new_text": "qsort(src,zsetnum,sizeof(zsetopsrc), qsortCompareZsetopsrcByCardinality)",
          "old_line_content": "     * algorithm's performance */",
          "new_line_content": "    qsort(src,zsetnum,sizeof(zsetopsrc), qsortCompareZsetopsrcByCardinality);",
          "content_same": false
        },
        {
          "line": 5985,
          "old_api": null,
          "new_api": "createZsetObject",
          "old_text": null,
          "new_text": "createZsetObject()",
          "old_line_content": "",
          "new_line_content": "    dstobj = createZsetObject();",
          "content_same": false
        },
        {
          "line": 8036,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(dfd)",
          "old_line_content": "    }",
          "new_line_content": "    close(dfd);",
          "content_same": false
        },
        {
          "line": 10086,
          "old_api": null,
          "new_api": "listSearchKey",
          "old_text": null,
          "new_text": "listSearchKey(c->pubsub_patterns,pattern)",
          "old_line_content": "",
          "new_line_content": "    if (listSearchKey(c->pubsub_patterns,pattern) == NULL) {",
          "content_same": false
        },
        {
          "line": 5990,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(src[0].dict)",
          "old_line_content": "        /* skip going over all entries if the smallest zset is NULL or empty */",
          "new_line_content": "        if (src[0].dict && dictSize(src[0].dict) > 0) {",
          "content_same": false
        },
        {
          "line": 10089,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(c->pubsub_patterns,pattern)",
          "old_line_content": "        pubsubPattern *pat;",
          "new_line_content": "        listAddNodeTail(c->pubsub_patterns,pattern);",
          "content_same": false
        },
        {
          "line": 5993,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(src[0].dict)",
          "old_line_content": "             * from small to large, all src[i > 0].dict are non-empty too */",
          "new_line_content": "            di = dictGetIterator(src[0].dict);",
          "content_same": false
        },
        {
          "line": 8043,
          "old_api": null,
          "new_api": "emptyDb",
          "old_text": null,
          "new_text": "emptyDb()",
          "old_line_content": "    }",
          "new_line_content": "    emptyDb();",
          "content_same": false
        },
        {
          "line": 10094,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(server.pubsub_patterns,pat)",
          "old_line_content": "        pat->client = c;",
          "new_line_content": "        listAddNodeTail(server.pubsub_patterns,pat);",
          "content_same": false
        },
        {
          "line": 5999,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "                for (j = 1; j < zsetnum; j++) {",
          "new_line_content": "                    dictEntry *other = dictFind(src[j].dict,dictGetEntryKey(de));",
          "content_same": false
        },
        {
          "line": 10097,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.mbulk3)",
          "old_line_content": "    /* Notify the client */",
          "new_line_content": "    addReply(c,shared.mbulk3);",
          "content_same": false
        },
        {
          "line": 6001,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(other)",
          "old_line_content": "                    if (other) {",
          "new_line_content": "                        value = src[j].weight * (*(double*)dictGetEntryVal(other));",
          "content_same": false
        },
        {
          "line": 8049,
          "old_api": null,
          "new_api": "createClient",
          "old_text": null,
          "new_text": "createClient(fd)",
          "old_line_content": "    }",
          "new_line_content": "    server.master = createClient(fd);",
          "content_same": false
        },
        {
          "line": 8057,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr,\"no\")",
          "old_line_content": "static void slaveofCommand(redisClient *c) {",
          "new_line_content": "    if (!strcasecmp(c->argv[1]->ptr,\"no\") &&",
          "content_same": false
        },
        {
          "line": 6010,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(score)",
          "old_line_content": "                if (j != zsetnum) {",
          "new_line_content": "                    zfree(score);",
          "content_same": false
        },
        {
          "line": 6012,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "                } else {",
          "new_line_content": "                    robj *o = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 8060,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(server.masterhost)",
          "old_line_content": "        if (server.masterhost) {",
          "new_line_content": "            sdsfree(server.masterhost);",
          "content_same": false
        },
        {
          "line": 8062,
          "old_api": null,
          "new_api": "freeClient",
          "old_text": null,
          "new_text": "freeClient(server.master)",
          "old_line_content": "            server.masterhost = NULL;",
          "new_line_content": "            if (server.master) freeClient(server.master);",
          "content_same": false
        },
        {
          "line": 10111,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(pattern)",
          "old_line_content": "",
          "new_line_content": "    incrRefCount(pattern); /* Protect the object. May be the same we remove */",
          "content_same": false
        },
        {
          "line": 8064,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"MASTER MODE enabled (user request)\")",
          "old_line_content": "            server.replstate = REDIS_REPL_NONE;",
          "new_line_content": "            redisLog(REDIS_NOTICE,\"MASTER MODE enabled (user request)\");",
          "content_same": false
        },
        {
          "line": 10114,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(c->pubsub_patterns,ln)",
          "old_line_content": "        retval = 1;",
          "new_line_content": "        listDelNode(c->pubsub_patterns,ln);",
          "content_same": false
        },
        {
          "line": 6019,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "            }",
          "new_line_content": "            dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 8067,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(server.masterhost)",
          "old_line_content": "    } else {",
          "new_line_content": "        sdsfree(server.masterhost);",
          "content_same": false
        },
        {
          "line": 10117,
          "old_api": null,
          "new_api": "listSearchKey",
          "old_text": null,
          "new_text": "listSearchKey(server.pubsub_patterns,&pat)",
          "old_line_content": "        pat.pattern = pattern;",
          "new_line_content": "        ln = listSearchKey(server.pubsub_patterns,&pat);",
          "content_same": false
        },
        {
          "line": 8072,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"SLAVE OF %s:%d enabled (user request)\",\n            server.masterhost, server.masterport)",
          "old_line_content": "        server.replstate = REDIS_REPL_CONNECT;",
          "new_line_content": "        redisLog(REDIS_NOTICE,\"SLAVE OF %s:%d enabled (user request)\",",
          "content_same": false
        },
        {
          "line": 6025,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(src[i].dict)",
          "old_line_content": "",
          "new_line_content": "            di = dictGetIterator(src[i].dict);",
          "content_same": false
        },
        {
          "line": 10122,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.mbulk3)",
          "old_line_content": "    if (notify) {",
          "new_line_content": "        addReply(c,shared.mbulk3);",
          "content_same": false
        },
        {
          "line": 8075,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "    }",
          "new_line_content": "    addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 6028,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "                /* skip key when already processed */",
          "new_line_content": "                if (dictFind(dstzset->dict,dictGetEntryKey(de)) != NULL) continue;",
          "content_same": false
        },
        {
          "line": 6030,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(double))",
          "old_line_content": "",
          "new_line_content": "                double *score = zmalloc(sizeof(double)), value;",
          "content_same": false
        },
        {
          "line": 10128,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(pattern)",
          "old_line_content": "    }",
          "new_line_content": "    decrRefCount(pattern);",
          "content_same": false
        },
        {
          "line": 6036,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "                for (j = (i+1); j < zsetnum; j++) {",
          "new_line_content": "                    dictEntry *other = dictFind(src[j].dict,dictGetEntryKey(de));",
          "content_same": false
        },
        {
          "line": 6038,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(other)",
          "old_line_content": "                    if (other) {",
          "new_line_content": "                        value = src[j].weight * (*(double*)dictGetEntryVal(other));",
          "content_same": false
        },
        {
          "line": 10135,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(c->pubsub_channels)",
          "old_line_content": "static int pubsubUnsubscribeAllChannels(redisClient *c, int notify) {",
          "new_line_content": "    dictIterator *di = dictGetIterator(c->pubsub_channels);",
          "content_same": false
        },
        {
          "line": 8087,
          "old_api": null,
          "new_api": "pthread_mutex_lock",
          "old_text": null,
          "new_text": "pthread_mutex_lock(&server.obj_freelist_mutex)",
          "old_line_content": "",
          "new_line_content": "    if (server.vm_enabled) pthread_mutex_lock(&server.obj_freelist_mutex);",
          "content_same": false
        },
        {
          "line": 10139,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "",
          "new_line_content": "    while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 6043,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "",
          "new_line_content": "                robj *o = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 10142,
          "old_api": null,
          "new_api": "pubsubUnsubscribeChannel",
          "old_text": null,
          "new_text": "pubsubUnsubscribeChannel(c,channel,notify)",
          "old_line_content": "",
          "new_line_content": "        count += pubsubUnsubscribeChannel(c,channel,notify);",
          "content_same": false
        },
        {
          "line": 10144,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "    }",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 6049,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "            }",
          "new_line_content": "            dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 8096,
          "old_api": null,
          "new_api": "pthread_mutex_unlock",
          "old_text": null,
          "new_text": "pthread_mutex_unlock(&server.obj_freelist_mutex)",
          "old_line_content": "    } else {",
          "new_line_content": "        if (server.vm_enabled) pthread_mutex_unlock(&server.obj_freelist_mutex);",
          "content_same": false
        },
        {
          "line": 6053,
          "old_api": null,
          "new_api": "redisAssert",
          "old_text": null,
          "new_text": "redisAssert(op == REDIS_OP_INTER || op == REDIS_OP_UNION)",
          "old_line_content": "        /* unknown operator */",
          "new_line_content": "        redisAssert(op == REDIS_OP_INTER || op == REDIS_OP_UNION);",
          "content_same": false
        },
        {
          "line": 6056,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(c->db,dstkey)",
          "old_line_content": "",
          "new_line_content": "    deleteKey(c->db,dstkey);",
          "content_same": false
        },
        {
          "line": 6058,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(c->db->dict,dstkey,dstobj)",
          "old_line_content": "    if (dstzset->zsl->length) {",
          "new_line_content": "        dictAdd(c->db->dict,dstkey,dstobj);",
          "content_same": false
        },
        {
          "line": 10155,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(c->pubsub_patterns,&li)",
          "old_line_content": "",
          "new_line_content": "    listRewind(c->pubsub_patterns,&li);",
          "content_same": false
        },
        {
          "line": 10159,
          "old_api": null,
          "new_api": "pubsubUnsubscribePattern",
          "old_text": null,
          "new_text": "pubsubUnsubscribePattern(c,pattern,notify)",
          "old_line_content": "",
          "new_line_content": "        count += pubsubUnsubscribePattern(c,pattern,notify);",
          "content_same": false
        },
        {
          "line": 6063,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(dstobj)",
          "old_line_content": "    } else {",
          "new_line_content": "        decrRefCount(dstobj);",
          "content_same": false
        },
        {
          "line": 8113,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "static void freeMemoryIfNeeded(void) {",
          "new_line_content": "    while (server.maxmemory && zmalloc_used_memory() > server.maxmemory) {",
          "content_same": false
        },
        {
          "line": 6066,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(src)",
          "old_line_content": "    }",
          "new_line_content": "    zfree(src);",
          "content_same": false
        },
        {
          "line": 8116,
          "old_api": null,
          "new_api": "tryFreeOneObjectFromFreelist",
          "old_text": null,
          "new_text": "tryFreeOneObjectFromFreelist()",
          "old_line_content": "",
          "new_line_content": "        if (tryFreeOneObjectFromFreelist() == REDIS_OK) continue;",
          "content_same": false
        },
        {
          "line": 6070,
          "old_api": null,
          "new_api": "zunionInterGenericCommand",
          "old_text": null,
          "new_text": "zunionInterGenericCommand(c,c->argv[1], REDIS_OP_UNION)",
          "old_line_content": "static void zunionstoreCommand(redisClient *c) {",
          "new_line_content": "    zunionInterGenericCommand(c,c->argv[1], REDIS_OP_UNION);",
          "content_same": false
        },
        {
          "line": 6074,
          "old_api": null,
          "new_api": "zunionInterGenericCommand",
          "old_text": null,
          "new_text": "zunionInterGenericCommand(c,c->argv[1], REDIS_OP_INTER)",
          "old_line_content": "static void zinterstoreCommand(redisClient *c) {",
          "new_line_content": "    zunionInterGenericCommand(c,c->argv[1], REDIS_OP_INTER);",
          "content_same": false
        },
        {
          "line": 8122,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(server.db[j].expires)",
          "old_line_content": "",
          "new_line_content": "            if (dictSize(server.db[j].expires)) {",
          "content_same": false
        },
        {
          "line": 10172,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(server.pubsub_channels,channel)",
          "old_line_content": "    /* Send to clients listening for that channel */",
          "new_line_content": "    de = dictFind(server.pubsub_channels,channel);",
          "content_same": false
        },
        {
          "line": 10174,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "    if (de) {",
          "new_line_content": "        list *list = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 8129,
          "old_api": null,
          "new_api": "dictGetRandomKey",
          "old_text": null,
          "new_text": "dictGetRandomKey(server.db[j].expires)",
          "old_line_content": "",
          "new_line_content": "                    de = dictGetRandomKey(server.db[j].expires);",
          "content_same": false
        },
        {
          "line": 10178,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(list,&li)",
          "old_line_content": "",
          "new_line_content": "        listRewind(list,&li);",
          "content_same": false
        },
        {
          "line": 8132,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "                    if (minttl == -1 || t < minttl) {",
          "new_line_content": "                        minkey = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 10182,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.mbulk3)",
          "old_line_content": "",
          "new_line_content": "            addReply(c,shared.mbulk3);",
          "content_same": false
        },
        {
          "line": 8136,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(server.db+j,minkey)",
          "old_line_content": "                }",
          "new_line_content": "                deleteKey(server.db+j,minkey);",
          "content_same": false
        },
        {
          "line": 6089,
          "old_api": null,
          "new_api": "getLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongFromObjectOrReply(c, c->argv[2], &start, NULL)",
          "old_line_content": "",
          "new_line_content": "    if ((getLongFromObjectOrReply(c, c->argv[2], &start, NULL) != REDIS_OK) ||",
          "content_same": false
        },
        {
          "line": 6092,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[4]->ptr,\"withscores\")",
          "old_line_content": "",
          "new_line_content": "    if (c->argc == 5 && !strcasecmp(c->argv[4]->ptr,\"withscores\")) {",
          "content_same": false
        },
        {
          "line": 10190,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.pubsub_patterns)",
          "old_line_content": "    /* Send to clients listening to matching channels */",
          "new_line_content": "    if (listLength(server.pubsub_patterns)) {",
          "content_same": false
        },
        {
          "line": 6095,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "    } else if (c->argc >= 5) {",
          "new_line_content": "        addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 6099,
          "old_api": null,
          "new_api": "lookupKeyReadOrReply",
          "old_text": null,
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.emptymultibulk)",
          "old_line_content": "",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.emptymultibulk)) == NULL",
          "content_same": false
        },
        {
          "line": 10196,
          "old_api": null,
          "new_api": "stringmatchlen",
          "old_text": null,
          "new_text": "stringmatchlen((char*)pat->pattern->ptr,\n                                sdslen(pat->pattern->ptr),\n                                (char*)channel->ptr,\n                                sdslen(channel->ptr),0)",
          "old_line_content": "",
          "new_line_content": "            if (stringmatchlen((char*)pat->pattern->ptr,",
          "content_same": false
        },
        {
          "line": 10199,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(channel->ptr)",
          "old_line_content": "                                (char*)channel->ptr,",
          "new_line_content": "                                sdslen(channel->ptr),0)) {",
          "content_same": false
        },
        {
          "line": 8156,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(server.aofbuf)",
          "old_line_content": "",
          "new_line_content": "    if (sdslen(server.aofbuf) == 0) return;",
          "content_same": false
        },
        {
          "line": 10208,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(channel)",
          "old_line_content": "        }",
          "new_line_content": "        decrRefCount(channel);",
          "content_same": false
        },
        {
          "line": 6114,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.emptymultibulk)",
          "old_line_content": "        /* Out of range start or start > end result in empty list */",
          "new_line_content": "        addReply(c,shared.emptymultibulk);",
          "content_same": false
        },
        {
          "line": 8163,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(server.aofbuf)",
          "old_line_content": "     * or alike */",
          "new_line_content": "     nwritten = write(server.appendfd,server.aofbuf,sdslen(server.aofbuf));",
          "content_same": false
        },
        {
          "line": 10217,
          "old_api": null,
          "new_api": "pubsubSubscribeChannel",
          "old_text": null,
          "new_text": "pubsubSubscribeChannel(c,c->argv[j])",
          "old_line_content": "    for (j = 1; j < c->argc; j++)",
          "new_line_content": "        pubsubSubscribeChannel(c,c->argv[j]);",
          "content_same": false
        },
        {
          "line": 8169,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "         if (nwritten == -1) {",
          "new_line_content": "            redisLog(REDIS_WARNING,\"Exiting on error writing to the append-only file: %s\",strerror(errno));",
          "content_same": false
        },
        {
          "line": 6123,
          "old_api": null,
          "new_api": "zslGetElementByRank",
          "old_text": null,
          "new_text": "zslGetElementByRank(zsl, llen-start)",
          "old_line_content": "    if (reverse) {",
          "new_line_content": "        ln = start == 0 ? zsl->tail : zslGetElementByRank(zsl, llen-start);",
          "content_same": false
        },
        {
          "line": 8171,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "         } else {",
          "new_line_content": "            redisLog(REDIS_WARNING,\"Exiting on short write while writing to the append-only file: %s\",strerror(errno));",
          "content_same": false
        },
        {
          "line": 8173,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "         }",
          "new_line_content": "         exit(1);",
          "content_same": false
        },
        {
          "line": 10222,
          "old_api": null,
          "new_api": "pubsubUnsubscribeAllChannels",
          "old_text": null,
          "new_text": "pubsubUnsubscribeAllChannels(c,1)",
          "old_line_content": "    if (c->argc == 1) {",
          "new_line_content": "        pubsubUnsubscribeAllChannels(c,1);",
          "content_same": false
        },
        {
          "line": 6126,
          "old_api": null,
          "new_api": "zslGetElementByRank",
          "old_text": null,
          "new_text": "zslGetElementByRank(zsl, start+1)",
          "old_line_content": "        ln = start == 0 ?",
          "new_line_content": "            zsl->header->forward[0] : zslGetElementByRank(zsl, start+1);",
          "content_same": false
        },
        {
          "line": 8175,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(server.aofbuf)",
          "old_line_content": "    }",
          "new_line_content": "    sdsfree(server.aofbuf);",
          "content_same": false
        },
        {
          "line": 6130,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "    /* Return the result in form of a multi-bulk reply */",
          "new_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",",
          "content_same": false
        },
        {
          "line": 8179,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    /* Fsync if needed */",
          "new_line_content": "    now = time(NULL);",
          "content_same": false
        },
        {
          "line": 10228,
          "old_api": null,
          "new_api": "pubsubUnsubscribeChannel",
          "old_text": null,
          "new_text": "pubsubUnsubscribeChannel(c,c->argv[j],1)",
          "old_line_content": "        for (j = 1; j < c->argc; j++)",
          "new_line_content": "            pubsubUnsubscribeChannel(c,c->argv[j],1);",
          "content_same": false
        },
        {
          "line": 6134,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,ele)",
          "old_line_content": "        ele = ln->obj;",
          "new_line_content": "        addReplyBulk(c,ele);",
          "content_same": false
        },
        {
          "line": 6136,
          "old_api": null,
          "new_api": "addReplyDouble",
          "old_text": null,
          "new_text": "addReplyDouble(c,ln->score)",
          "old_line_content": "        if (withscores)",
          "new_line_content": "            addReplyDouble(c,ln->score);",
          "content_same": false
        },
        {
          "line": 8186,
          "old_api": null,
          "new_api": "aof_fsync",
          "old_text": null,
          "new_text": "aof_fsync(server.appendfd)",
          "old_line_content": "         * flushing metadata. */",
          "new_line_content": "        aof_fsync(server.appendfd); /* Let's try to get this data on the disk */",
          "content_same": false
        },
        {
          "line": 10236,
          "old_api": null,
          "new_api": "pubsubSubscribePattern",
          "old_text": null,
          "new_text": "pubsubSubscribePattern(c,c->argv[j])",
          "old_line_content": "    for (j = 1; j < c->argc; j++)",
          "new_line_content": "        pubsubSubscribePattern(c,c->argv[j]);",
          "content_same": false
        },
        {
          "line": 6142,
          "old_api": null,
          "new_api": "zrangeGenericCommand",
          "old_text": null,
          "new_text": "zrangeGenericCommand(c,0)",
          "old_line_content": "static void zrangeCommand(redisClient *c) {",
          "new_line_content": "    zrangeGenericCommand(c,0);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 8194,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(buf,\"*%d\\r\\n\",argc)",
          "new_text": null,
          "old_line_content": "    buf = sdscatprintf(buf,\"*%d\\r\\n\",argc);",
          "new_line_content": "    for (j = 0; j < argc; j++) {",
          "content_same": false
        },
        {
          "line": 10242,
          "old_api": "pubsubUnsubscribeAllPatterns",
          "new_api": null,
          "old_text": "pubsubUnsubscribeAllPatterns(c,1)",
          "new_text": null,
          "old_line_content": "        pubsubUnsubscribeAllPatterns(c,1);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 6147,
          "old_api": "zrangeGenericCommand",
          "new_api": null,
          "old_text": "zrangeGenericCommand(c,1)",
          "new_text": null,
          "old_line_content": "    zrangeGenericCommand(c,1);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 8200,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(o)",
          "new_text": null,
          "old_line_content": "        decrRefCount(o);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 10248,
          "old_api": "pubsubUnsubscribePattern",
          "new_api": null,
          "old_text": "pubsubUnsubscribePattern(c,c->argv[j],1)",
          "new_text": null,
          "old_line_content": "            pubsubUnsubscribePattern(c,c->argv[j],1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 10254,
          "old_api": "addReplyLong",
          "new_api": null,
          "old_text": "addReplyLong(c,receivers)",
          "new_text": null,
          "old_line_content": "    addReplyLong(c,receivers);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 8213,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(seconds)",
          "new_text": null,
          "old_line_content": "    decrRefCount(seconds);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6165,
          "old_api": "strtod",
          "new_api": null,
          "old_text": "strtod((char*)c->argv[2]->ptr+1,NULL)",
          "new_text": null,
          "old_line_content": "        min = strtod((char*)c->argv[2]->ptr+1,NULL);",
          "new_line_content": "        minex = 1;",
          "content_same": false
        },
        {
          "line": 8215,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject(\"EXPIREAT\",8)",
          "new_text": null,
          "old_line_content": "    argv[0] = createStringObject(\"EXPIREAT\",8);",
          "new_line_content": "    argv[1] = key;",
          "content_same": false
        },
        {
          "line": 6168,
          "old_api": "strtod",
          "new_api": null,
          "old_text": "strtod(c->argv[2]->ptr,NULL)",
          "new_text": null,
          "old_line_content": "        min = strtod(c->argv[2]->ptr,NULL);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6171,
          "old_api": "strtod",
          "new_api": null,
          "old_text": "strtod((char*)c->argv[3]->ptr+1,NULL)",
          "new_text": null,
          "old_line_content": "        max = strtod((char*)c->argv[3]->ptr+1,NULL);",
          "new_line_content": "        maxex = 1;",
          "content_same": false
        },
        {
          "line": 8221,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(argv[2])",
          "new_text": null,
          "old_line_content": "    decrRefCount(argv[2]);",
          "new_line_content": "    return buf;",
          "content_same": false
        },
        {
          "line": 6174,
          "old_api": "strtod",
          "new_api": null,
          "old_text": "strtod(c->argv[3]->ptr,NULL)",
          "new_text": null,
          "old_line_content": "        max = strtod(c->argv[3]->ptr,NULL);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 10272,
          "old_api": "SHA1Final",
          "new_api": null,
          "old_text": "SHA1Final(hash,&ctx)",
          "new_text": null,
          "old_line_content": "    SHA1Final(hash,&ctx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8226,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    sds buf = sdsempty();",
          "new_line_content": "    robj *tmpargv[3];",
          "content_same": false
        },
        {
          "line": 6181,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[c->argc-1]->ptr,\"withscores\")",
          "new_text": null,
          "old_line_content": "        if (strcasecmp(c->argv[c->argc-1]->ptr,\"withscores\") == 0)",
          "new_line_content": "            withscores = 1;",
          "content_same": false
        },
        {
          "line": 10281,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(o)",
          "new_text": null,
          "old_line_content": "    decrRefCount(o);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 8236,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(seldb)",
          "new_text": null,
          "old_line_content": "            (unsigned long)strlen(seldb),seldb);",
          "new_line_content": "        server.appendseldb = dictid;",
          "content_same": false
        },
        {
          "line": 6190,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR wrong number of arguments for ZRANGEBYSCORE\\r\\n\")",
          "new_text": null,
          "old_line_content": "            sdsnew(\"-ERR wrong number of arguments for ZRANGEBYSCORE\\r\\n\"));",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 8242,
          "old_api": "catAppendOnlyExpireAtCommand",
          "new_api": null,
          "old_text": "catAppendOnlyExpireAtCommand(buf,argv[1],argv[2])",
          "new_text": null,
          "old_line_content": "        buf = catAppendOnlyExpireAtCommand(buf,argv[1],argv[2]);",
          "new_line_content": "    } else if (cmd->proc == setexCommand) {",
          "content_same": false
        },
        {
          "line": 6196,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.syntaxerr);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 8245,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject(\"SET\",3)",
          "new_text": null,
          "old_line_content": "        tmpargv[0] = createStringObject(\"SET\",3);",
          "new_line_content": "        tmpargv[1] = argv[1];",
          "content_same": false
        },
        {
          "line": 6200,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[6]->ptr)",
          "new_text": null,
          "old_line_content": "        limit = atoi(c->argv[6]->ptr);",
          "new_line_content": "        if (offset < 0) offset = 0;",
          "content_same": false
        },
        {
          "line": 8250,
          "old_api": "catAppendOnlyExpireAtCommand",
          "new_api": null,
          "old_text": "catAppendOnlyExpireAtCommand(buf,argv[1],argv[2])",
          "new_text": null,
          "old_line_content": "        buf = catAppendOnlyExpireAtCommand(buf,argv[1],argv[2]);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 8252,
          "old_api": "catAppendOnlyGenericCommand",
          "new_api": null,
          "old_text": "catAppendOnlyGenericCommand(buf,argc,argv)",
          "new_text": null,
          "old_line_content": "        buf = catAppendOnlyGenericCommand(buf,argc,argv);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6205,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    o = lookupKeyRead(c->db,c->argv[1]);",
          "new_line_content": "    if (o == NULL) {",
          "content_same": false
        },
        {
          "line": 6207,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,justcount ? shared.czero : shared.emptymultibulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,justcount ? shared.czero : shared.emptymultibulk);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 10305,
          "old_api": "SHA1Final",
          "new_api": null,
          "old_text": "SHA1Final(digest,&ctx)",
          "new_text": null,
          "old_line_content": "    SHA1Final(digest,&ctx);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 8258,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(buf)",
          "new_text": null,
          "old_line_content": "    server.aofbuf = sdscatlen(server.aofbuf,buf,sdslen(buf));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6210,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 10311,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(o)",
          "new_text": null,
          "old_line_content": "    decrRefCount(o);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 8265,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(buf)",
          "new_text": null,
          "old_line_content": "        server.bgrewritebuf = sdscatlen(server.bgrewritebuf,buf,sdslen(buf));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8267,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(buf)",
          "new_text": null,
          "old_line_content": "    sdsfree(buf);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6220,
          "old_api": "zslFirstWithScore",
          "new_api": null,
          "old_text": "zslFirstWithScore(zsl,min)",
          "new_text": null,
          "old_line_content": "            ln = zslFirstWithScore(zsl,min);",
          "new_line_content": "            while (minex && ln && ln->score == min) ln = ln->forward[0];",
          "content_same": false
        },
        {
          "line": 8273,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*c))",
          "new_text": null,
          "old_line_content": "    struct redisClient *c = zmalloc(sizeof(*c));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6225,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,justcount ? shared.czero : shared.emptymultibulk)",
          "new_text": null,
          "old_line_content": "                addReply(c,justcount ? shared.czero : shared.emptymultibulk);",
          "new_line_content": "                return;",
          "content_same": false
        },
        {
          "line": 8275,
          "old_api": "selectDb",
          "new_api": null,
          "old_text": "selectDb(c,0)",
          "new_text": null,
          "old_line_content": "    selectDb(c,0);",
          "new_line_content": "    c->fd = -1;",
          "content_same": false
        },
        {
          "line": 8277,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    c->querybuf = sdsempty();",
          "new_line_content": "    c->argc = 0;",
          "content_same": false
        },
        {
          "line": 10328,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(final,0,20)",
          "new_text": null,
          "old_line_content": "    memset(final,0,20); /* Start with a clean result */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6236,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(lenobj)",
          "new_text": null,
          "old_line_content": "                decrRefCount(lenobj);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 10334,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(db->dict)",
          "new_text": null,
          "old_line_content": "        di = dictGetIterator(db->dict);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8287,
          "old_api": "initClientMultiState",
          "new_api": null,
          "old_text": "initClientMultiState(c)",
          "new_text": null,
          "old_line_content": "    initClientMultiState(c);",
          "new_line_content": "    return c;",
          "content_same": false
        },
        {
          "line": 10339,
          "old_api": "mixDigest",
          "new_api": null,
          "old_text": "mixDigest(final,&aux,sizeof(aux))",
          "new_text": null,
          "old_line_content": "        mixDigest(final,&aux,sizeof(aux));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 10342,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "        while((de = dictNext(di)) != NULL) {",
          "new_line_content": "            robj *key, *o;",
          "content_same": false
        },
        {
          "line": 8295,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(c)",
          "new_text": null,
          "old_line_content": "    zfree(c);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6248,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,ele)",
          "new_text": null,
          "old_line_content": "                    addReplyBulk(c,ele);",
          "new_line_content": "                    if (withscores)",
          "content_same": false
        },
        {
          "line": 6250,
          "old_api": "addReplyDouble",
          "new_api": null,
          "old_text": "addReplyDouble(c,ln->score)",
          "new_text": null,
          "old_line_content": "                        addReplyDouble(c,ln->score);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 10348,
          "old_api": "mixObjectDigest",
          "new_api": null,
          "old_text": "mixObjectDigest(digest,key)",
          "new_text": null,
          "old_line_content": "            mixObjectDigest(digest,key);",
          "new_line_content": "            if (!server.vm_enabled || key->storage == REDIS_VM_MEMORY ||",
          "content_same": false
        },
        {
          "line": 8303,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(filename,\"r\")",
          "new_text": null,
          "old_line_content": "    FILE *fp = fopen(filename,\"r\");",
          "new_line_content": "    struct redis_stat sb;",
          "content_same": false
        },
        {
          "line": 10352,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(o)",
          "new_text": null,
          "old_line_content": "                incrRefCount(o);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 6257,
          "old_api": "addReplyLong",
          "new_api": null,
          "old_text": "addReplyLong(c,(long)rangelen)",
          "new_text": null,
          "old_line_content": "                addReplyLong(c,(long)rangelen);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 10354,
          "old_api": "vmPreviewObject",
          "new_api": null,
          "old_text": "vmPreviewObject(key)",
          "new_text": null,
          "old_line_content": "                o = vmPreviewObject(key);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 6259,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "                lenobj->ptr = sdscatprintf(sdsempty(),\"*%lu\\r\\n\",",
          "new_line_content": "                     withscores ? (rangelen*2) : rangelen);",
          "content_same": false
        },
        {
          "line": 8308,
          "old_api": "fileno",
          "new_api": null,
          "old_text": "fileno(fp)",
          "new_text": null,
          "old_line_content": "    if (redis_fstat(fileno(fp),&sb) != -1 && sb.st_size == 0)",
          "new_line_content": "        return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 10358,
          "old_api": "getExpire",
          "new_api": null,
          "old_text": "getExpire(db,key)",
          "new_text": null,
          "old_line_content": "            expiretime = getExpire(db,key);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8313,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "        exit(1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 10362,
          "old_api": "mixObjectDigest",
          "new_api": null,
          "old_text": "mixObjectDigest(digest,o)",
          "new_text": null,
          "old_line_content": "                mixObjectDigest(digest,o);",
          "new_line_content": "            } else if (o->type == REDIS_LIST) {",
          "content_same": false
        },
        {
          "line": 6267,
          "old_api": "genericZrangebyscoreCommand",
          "new_api": null,
          "old_text": "genericZrangebyscoreCommand(c,0)",
          "new_text": null,
          "old_line_content": "    genericZrangebyscoreCommand(c,0);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6271,
          "old_api": "genericZrangebyscoreCommand",
          "new_api": null,
          "old_text": "genericZrangebyscoreCommand(c,1)",
          "new_text": null,
          "old_line_content": "    genericZrangebyscoreCommand(c,1);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 8320,
          "old_api": "createFakeClient",
          "new_api": null,
          "old_text": "createFakeClient()",
          "new_text": null,
          "old_line_content": "    fakeClient = createFakeClient();",
          "new_line_content": "    while(1) {",
          "content_same": false
        },
        {
          "line": 10370,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(ln)",
          "new_text": null,
          "old_line_content": "                    robj *eleobj = listNodeValue(ln);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 10372,
          "old_api": "mixObjectDigest",
          "new_api": null,
          "old_text": "mixObjectDigest(digest,eleobj)",
          "new_text": null,
          "old_line_content": "                    mixObjectDigest(digest,eleobj);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 6279,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_ZSET)",
          "new_text": null,
          "old_line_content": "        checkType(c,o,REDIS_ZSET)) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 10376,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(set)",
          "new_text": null,
          "old_line_content": "                dictIterator *di = dictGetIterator(set);",
          "new_line_content": "                dictEntry *de;",
          "content_same": false
        },
        {
          "line": 8330,
          "old_api": "feof",
          "new_api": null,
          "old_text": "feof(fp)",
          "new_text": null,
          "old_line_content": "            if (feof(fp))",
          "new_line_content": "                break;",
          "content_same": false
        },
        {
          "line": 6282,
          "old_api": "addReplyUlong",
          "new_api": null,
          "old_text": "addReplyUlong(c,zs->zsl->length)",
          "new_text": null,
          "old_line_content": "    addReplyUlong(c,zs->zsl->length);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 10380,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "                    robj *eleobj = dictGetEntryKey(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 10382,
          "old_api": "xorObjectDigest",
          "new_api": null,
          "old_text": "xorObjectDigest(digest,eleobj)",
          "new_text": null,
          "old_line_content": "                    xorObjectDigest(digest,eleobj);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 10384,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "                dictReleaseIterator(di);",
          "new_line_content": "            } else if (o->type == REDIS_ZSET) {",
          "content_same": false
        },
        {
          "line": 8337,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(robj*)*argc)",
          "new_text": null,
          "old_line_content": "        argv = zmalloc(sizeof(robj*)*argc);",
          "new_line_content": "        for (j = 0; j < argc; j++) {",
          "content_same": false
        },
        {
          "line": 8339,
          "old_api": "fgets",
          "new_api": null,
          "old_text": "fgets(buf,sizeof(buf),fp)",
          "new_text": null,
          "old_line_content": "            if (fgets(buf,sizeof(buf),fp) == NULL) goto readerr;",
          "new_line_content": "            if (buf[0] != '$') goto fmterr;",
          "content_same": false
        },
        {
          "line": 10387,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(zs->dict)",
          "new_text": null,
          "old_line_content": "                dictIterator *di = dictGetIterator(zs->dict);",
          "new_line_content": "                dictEntry *de;",
          "content_same": false
        },
        {
          "line": 6291,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_ZSET)",
          "new_text": null,
          "old_line_content": "        checkType(c,o,REDIS_ZSET)) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6294,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(zs->dict,c->argv[2])",
          "new_text": null,
          "old_line_content": "    de = dictFind(zs->dict,c->argv[2]);",
          "new_line_content": "    if (!de) {",
          "content_same": false
        },
        {
          "line": 10392,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "                    double *score = dictGetEntryVal(de);",
          "new_line_content": "                    unsigned char eledigest[20];",
          "content_same": false
        },
        {
          "line": 8345,
          "old_api": "fread",
          "new_api": null,
          "old_text": "fread(buf,2,1,fp)",
          "new_text": null,
          "old_line_content": "            if (fread(buf,2,1,fp) == 0) goto fmterr; /* discard CRLF */",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6296,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.nullbulk);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 6298,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "        double *score = dictGetEntryVal(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6300,
          "old_api": "addReplyDouble",
          "new_api": null,
          "old_text": "addReplyDouble(c,*score)",
          "new_text": null,
          "old_line_content": "        addReplyDouble(c,*score);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 8349,
          "old_api": "lookupCommand",
          "new_api": null,
          "old_text": "lookupCommand(argv[0]->ptr)",
          "new_text": null,
          "old_line_content": "        cmd = lookupCommand(argv[0]->ptr);",
          "new_line_content": "        if (!cmd) {",
          "content_same": false
        },
        {
          "line": 10399,
          "old_api": "xorDigest",
          "new_api": null,
          "old_text": "xorDigest(digest,eledigest,20)",
          "new_text": null,
          "old_line_content": "                    xorDigest(digest,eledigest,20);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 8352,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "            exit(1);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 10401,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "                dictReleaseIterator(di);",
          "new_line_content": "            } else if (o->type == REDIS_HASH) {",
          "content_same": false
        },
        {
          "line": 8356,
          "old_api": "tryObjectEncoding",
          "new_api": null,
          "old_text": "tryObjectEncoding(argv[argc-1])",
          "new_text": null,
          "old_line_content": "            argv[argc-1] = tryObjectEncoding(argv[argc-1]);",
          "new_line_content": "        /* Run the command in the context of a fake client */",
          "content_same": false
        },
        {
          "line": 10407,
          "old_api": "hashNext",
          "new_api": null,
          "old_text": "hashNext(hi)",
          "new_text": null,
          "old_line_content": "                while (hashNext(hi) != REDIS_ERR) {",
          "new_line_content": "                    unsigned char eledigest[20];",
          "content_same": false
        },
        {
          "line": 8360,
          "old_api": "proc",
          "new_api": null,
          "old_text": "cmd->proc(fakeClient)",
          "new_text": null,
          "old_line_content": "        cmd->proc(fakeClient);",
          "new_line_content": "        /* Discard the reply objects list from the fake client */",
          "content_same": false
        },
        {
          "line": 6313,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_ZSET)",
          "new_text": null,
          "old_line_content": "        checkType(c,o,REDIS_ZSET)) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8363,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(fakeClient->reply)",
          "new_text": null,
          "old_line_content": "            listDelNode(fakeClient->reply,listFirst(fakeClient->reply));",
          "new_line_content": "        /* Clean up, ready for the next command */",
          "content_same": false
        },
        {
          "line": 6317,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(zs->dict,c->argv[2])",
          "new_text": null,
          "old_line_content": "    de = dictFind(zs->dict,c->argv[2]);",
          "new_line_content": "    if (!de) {",
          "content_same": false
        },
        {
          "line": 8366,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(argv)",
          "new_text": null,
          "old_line_content": "        zfree(argv);",
          "new_line_content": "        /* Handle swapping while loading big datasets when VM is on */",
          "content_same": false
        },
        {
          "line": 6319,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.nullbulk);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 10417,
          "old_api": "xorDigest",
          "new_api": null,
          "old_text": "xorDigest(digest,eledigest,20)",
          "new_text": null,
          "old_line_content": "                    xorDigest(digest,eledigest,20);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 8371,
          "old_api": "vmSwapOneObjectBlocking",
          "new_api": null,
          "old_text": "vmSwapOneObjectBlocking()",
          "new_text": null,
          "old_line_content": "                if (vmSwapOneObjectBlocking() == REDIS_ERR) break;",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 10419,
          "old_api": "hashReleaseIterator",
          "new_api": null,
          "old_text": "hashReleaseIterator(hi)",
          "new_text": null,
          "old_line_content": "                hashReleaseIterator(hi);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 10421,
          "old_api": "redisPanic",
          "new_api": null,
          "old_text": "redisPanic(\"Unknown object type\")",
          "new_text": null,
          "old_line_content": "                redisPanic(\"Unknown object type\");",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 6324,
          "old_api": "zslGetRank",
          "new_api": null,
          "old_text": "zslGetRank(zsl, *score, c->argv[2])",
          "new_text": null,
          "old_line_content": "    rank = zslGetRank(zsl, *score, c->argv[2]);",
          "new_line_content": "    if (rank) {",
          "content_same": false
        },
        {
          "line": 10423,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(o)",
          "new_text": null,
          "old_line_content": "            decrRefCount(o);",
          "new_line_content": "            /* If the key has an expire, add it to the mix */",
          "content_same": false
        },
        {
          "line": 6327,
          "old_api": "addReplyLong",
          "new_api": null,
          "old_text": "addReplyLong(c, zsl->length - rank)",
          "new_text": null,
          "old_line_content": "            addReplyLong(c, zsl->length - rank);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 10425,
          "old_api": "xorDigest",
          "new_api": null,
          "old_text": "xorDigest(digest,\"!!expire!!\",10)",
          "new_text": null,
          "old_line_content": "            if (expiretime != -1) xorDigest(digest,\"!!expire!!\",10);",
          "new_line_content": "            /* We can finally xor the key-val digest to the final digest */",
          "content_same": false
        },
        {
          "line": 6329,
          "old_api": "addReplyLong",
          "new_api": null,
          "old_text": "addReplyLong(c, rank-1)",
          "new_text": null,
          "old_line_content": "            addReplyLong(c, rank-1);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 10427,
          "old_api": "xorDigest",
          "new_api": null,
          "old_text": "xorDigest(final,digest,20)",
          "new_text": null,
          "old_line_content": "            xorDigest(final,digest,20);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6332,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.nullbulk);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 8381,
          "old_api": "freeFakeClient",
          "new_api": null,
          "old_text": "freeFakeClient(fakeClient)",
          "new_text": null,
          "old_line_content": "    freeFakeClient(fakeClient);",
          "new_line_content": "    server.appendonly = appendonly;",
          "content_same": false
        },
        {
          "line": 10429,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "        dictReleaseIterator(di);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6337,
          "old_api": "zrankGenericCommand",
          "new_api": null,
          "old_text": "zrankGenericCommand(c, 0)",
          "new_text": null,
          "old_line_content": "    zrankGenericCommand(c, 0);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 10434,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr,\"segfault\")",
          "new_text": null,
          "old_line_content": "    if (!strcasecmp(c->argv[1]->ptr,\"segfault\")) {",
          "new_line_content": "        *((char*)-1) = 'x';",
          "content_same": false
        },
        {
          "line": 8387,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Unexpected end of file reading the append only file\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Unexpected end of file reading the append only file\");",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 8389,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Unrecoverable error reading the append only file: %s\", strerror(errno));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 10438,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.err)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.err);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 8391,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "    exit(1);",
          "new_line_content": "fmterr:",
          "content_same": false
        },
        {
          "line": 6341,
          "old_api": "zrankGenericCommand",
          "new_api": null,
          "old_text": "zrankGenericCommand(c, 1)",
          "new_text": null,
          "old_line_content": "    zrankGenericCommand(c, 1);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 8394,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "    exit(1);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 10443,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.err)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.err);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 10451,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.err)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.err);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 6357,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(argv[i]->ptr)",
          "new_text": null,
          "old_line_content": "            sdslen(argv[i]->ptr) > server.hash_max_zipmap_value)",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 6359,
          "old_api": "convertToRealHash",
          "new_api": null,
          "old_text": "convertToRealHash(subject)",
          "new_text": null,
          "old_line_content": "            convertToRealHash(subject);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 8408,
          "old_api": "getDecodedObject",
          "new_api": null,
          "old_text": "getDecodedObject(obj)",
          "new_text": null,
          "old_line_content": "        obj = getDecodedObject(obj);",
          "new_line_content": "        decrrc = 1;",
          "content_same": false
        },
        {
          "line": 10457,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(c->db->dict,c->argv[2])",
          "new_text": null,
          "old_line_content": "        dictEntry *de = dictFind(c->db->dict,c->argv[2]);",
          "new_line_content": "        robj *key, *val;",
          "content_same": false
        },
        {
          "line": 8413,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(obj->ptr)",
          "new_text": null,
          "old_line_content": "    if (sdslen(obj->ptr) && fwrite(obj->ptr,sdslen(obj->ptr),1,fp) == 0)",
          "new_line_content": "        goto err;",
          "content_same": false
        },
        {
          "line": 10461,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nokeyerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.nokeyerr);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 8416,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(obj)",
          "new_text": null,
          "old_line_content": "    if (decrrc) decrRefCount(obj);",
          "new_line_content": "    return 1;",
          "content_same": false
        },
        {
          "line": 10465,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "        val = dictGetEntryVal(de);",
          "new_line_content": "        if (!server.vm_enabled || (key->storage == REDIS_VM_MEMORY ||",
          "content_same": false
        },
        {
          "line": 6369,
          "old_api": "tryObjectEncoding",
          "new_api": null,
          "old_text": "tryObjectEncoding(*o2)",
          "new_text": null,
          "old_line_content": "        if (o2) *o2 = tryObjectEncoding(*o2);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 8419,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(obj)",
          "new_text": null,
          "old_line_content": "    if (decrrc) decrRefCount(obj);",
          "new_line_content": "    return 0;",
          "content_same": false
        },
        {
          "line": 10474,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(buf,64,\"unknown encoding %d\\n\", val->encoding)",
          "new_text": null,
          "old_line_content": "                snprintf(buf,64,\"unknown encoding %d\\n\", val->encoding);",
          "new_line_content": "                strenc = buf;",
          "content_same": false
        },
        {
          "line": 10477,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "            addReplySds(c,sdscatprintf(sdsempty(),",
          "new_line_content": "                \"+Key at:%p refcount:%d, value at:%p refcount:%d \"",
          "content_same": false
        },
        {
          "line": 8431,
          "old_api": "fwrite",
          "new_api": null,
          "old_text": "fwrite(\"\\r\\n\",2,1,fp)",
          "new_text": null,
          "old_line_content": "    if (fwrite(\"\\r\\n\",2,1,fp) == 0) return 0;",
          "new_line_content": "    return 1;",
          "content_same": false
        },
        {
          "line": 6383,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject((char*)v,vlen)",
          "new_text": null,
          "old_line_content": "            value = createStringObject((char*)v,vlen);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 10481,
          "old_api": "rdbSavedObjectLen",
          "new_api": null,
          "old_text": "rdbSavedObjectLen(val,NULL)",
          "new_text": null,
          "old_line_content": "                strenc, (long long) rdbSavedObjectLen(val,NULL)));",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 6385,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(key)",
          "new_text": null,
          "old_line_content": "        decrRefCount(key);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 10483,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "            addReplySds(c,sdscatprintf(sdsempty(),",
          "new_line_content": "                \"+Key at:%p refcount:%d, value swapped at: page %llu \"",
          "content_same": false
        },
        {
          "line": 4339,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(c->db->dict,c->argv[1],o)",
          "new_text": null,
          "old_line_content": "    retval = dictAdd(c->db->dict,c->argv[1],o);",
          "new_line_content": "    if (retval == DICT_ERR) {",
          "content_same": false
        },
        {
          "line": 6387,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(o->ptr,key)",
          "new_text": null,
          "old_line_content": "        dictEntry *de = dictFind(o->ptr,key);",
          "new_line_content": "        if (de != NULL) {",
          "content_same": false
        },
        {
          "line": 4342,
          "old_api": "removeExpire",
          "new_api": null,
          "old_text": "removeExpire(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "        removeExpire(c->db,c->argv[1]);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 6390,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(value)",
          "new_text": null,
          "old_line_content": "            incrRefCount(value);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4344,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(c->argv[1])",
          "new_text": null,
          "old_line_content": "        incrRefCount(c->argv[1]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 8442,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(dbuf)",
          "new_text": null,
          "old_line_content": "    if (fwrite(dbuf,strlen(dbuf),1,fp) == 0) return 0;",
          "new_line_content": "    return 1;",
          "content_same": false
        },
        {
          "line": 10493,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(c->db->dict,c->argv[2])",
          "new_text": null,
          "old_line_content": "        dictEntry *de = dictFind(c->db->dict,c->argv[2]);",
          "new_line_content": "        robj *key, *val;",
          "content_same": false
        },
        {
          "line": 4349,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.crlf)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.crlf);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 10497,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR Virtual Memory is disabled\\r\\n\")",
          "new_text": null,
          "old_line_content": "            addReplySds(c,sdsnew(\"-ERR Virtual Memory is disabled\\r\\n\"));",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 4353,
          "old_api": "incrDecrCommand",
          "new_api": null,
          "old_text": "incrDecrCommand(c,1)",
          "new_text": null,
          "old_line_content": "    incrDecrCommand(c,1);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6402,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(key)",
          "new_text": null,
          "old_line_content": "            decrRefCount(key);",
          "new_line_content": "            return 1;",
          "content_same": false
        },
        {
          "line": 8453,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(lbuf)",
          "new_text": null,
          "old_line_content": "    if (fwrite(lbuf,strlen(lbuf),1,fp) == 0) return 0;",
          "new_line_content": "    return 1;",
          "content_same": false
        },
        {
          "line": 10501,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nokeyerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.nokeyerr);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 4357,
          "old_api": "incrDecrCommand",
          "new_api": null,
          "old_text": "incrDecrCommand(c,-1)",
          "new_text": null,
          "old_line_content": "    incrDecrCommand(c,-1);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6405,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(key)",
          "new_text": null,
          "old_line_content": "        decrRefCount(key);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 10505,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "        val = dictGetEntryVal(de);",
          "new_line_content": "        /* If the key is shared we want to create a copy */",
          "content_same": false
        },
        {
          "line": 6407,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(o->ptr,key)",
          "new_text": null,
          "old_line_content": "        if (dictFind(o->ptr,key) != NULL) {",
          "new_line_content": "            return 1;",
          "content_same": false
        },
        {
          "line": 4364,
          "old_api": "incrDecrCommand",
          "new_api": null,
          "old_text": "incrDecrCommand(c,incr)",
          "new_text": null,
          "old_line_content": "    incrDecrCommand(c,incr);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 10510,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "            key = dictGetEntryKey(de) = newkey;",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 8465,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    time_t now = time(NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4371,
          "old_api": "incrDecrCommand",
          "new_api": null,
          "old_text": "incrDecrCommand(c,-incr)",
          "new_text": null,
          "old_line_content": "    incrDecrCommand(c,-incr);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 10517,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.ok);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 8470,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(tmpfile,\"w\")",
          "new_text": null,
          "old_line_content": "    fp = fopen(tmpfile,\"w\");",
          "new_line_content": "    if (!fp) {",
          "content_same": false
        },
        {
          "line": 10519,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.err)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.err);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 8472,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING, \"Failed rewriting the append only file: %s\", strerror(errno));",
          "new_line_content": "        return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 10521,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr,\"populate\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"populate\") && c->argc == 3) {",
          "new_line_content": "        long keys, j;",
          "content_same": false
        },
        {
          "line": 6425,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(value)",
          "new_text": null,
          "old_line_content": "        decrRefCount(value);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4379,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "    if (o == NULL) {",
          "content_same": false
        },
        {
          "line": 6429,
          "old_api": "convertToRealHash",
          "new_api": null,
          "old_text": "convertToRealHash(o)",
          "new_text": null,
          "old_line_content": "            convertToRealHash(o);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 10526,
          "old_api": "getLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongFromObjectOrReply(c, c->argv[2], &keys, NULL)",
          "new_text": null,
          "old_line_content": "        if (getLongFromObjectOrReply(c, c->argv[2], &keys, NULL) != REDIS_OK)",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 6431,
          "old_api": "dictReplace",
          "new_api": null,
          "old_text": "dictReplace(o->ptr,key,value)",
          "new_text": null,
          "old_line_content": "        if (dictReplace(o->ptr,key,value)) {",
          "new_line_content": "            /* Insert */",
          "content_same": false
        },
        {
          "line": 8480,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(d)",
          "new_text": null,
          "old_line_content": "        di = dictGetIterator(d);",
          "new_line_content": "        if (!di) {",
          "content_same": false
        },
        {
          "line": 4385,
          "old_api": "stringObjectLen",
          "new_api": null,
          "old_text": "stringObjectLen(c->argv[2])",
          "new_text": null,
          "old_line_content": "        totlen = stringObjectLen(c->argv[2]);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 8482,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "            fclose(fp);",
          "new_line_content": "            return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 6433,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(key)",
          "new_text": null,
          "old_line_content": "            incrRefCount(key);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 10532,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(key)",
          "new_text": null,
          "old_line_content": "                decrRefCount(key);",
          "new_line_content": "                continue;",
          "content_same": false
        },
        {
          "line": 4390,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(de != NULL)",
          "new_text": null,
          "old_line_content": "        assert(de != NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6438,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(value)",
          "new_text": null,
          "old_line_content": "        incrRefCount(value);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 8488,
          "old_api": "fwriteBulkLong",
          "new_api": null,
          "old_text": "fwriteBulkLong(fp,j)",
          "new_text": null,
          "old_line_content": "        if (fwriteBulkLong(fp,j) == 0) goto werr;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 10537,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(c->db->dict,key,val)",
          "new_text": null,
          "old_line_content": "            dictAdd(c->db->dict,key,val);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4392,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "        o = dictGetEntryVal(de);",
          "new_line_content": "        if (o->type != REDIS_STRING) {",
          "content_same": false
        },
        {
          "line": 8491,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "        while((de = dictNext(di)) != NULL) {",
          "new_line_content": "            robj *key, *o;",
          "content_same": false
        },
        {
          "line": 10540,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr,\"digest\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"digest\") && c->argc == 2) {",
          "new_line_content": "        unsigned char digest[20];",
          "content_same": false
        },
        {
          "line": 4394,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 10542,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"+\")",
          "new_text": null,
          "old_line_content": "        sds d = sdsnew(\"+\");",
          "new_line_content": "        int j;",
          "content_same": false
        },
        {
          "line": 8496,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "            key = dictGetEntryKey(de);",
          "new_line_content": "            /* If the value for this key is swapped, load a preview in memory.",
          "content_same": false
        },
        {
          "line": 10545,
          "old_api": "computeDatasetDigest",
          "new_api": null,
          "old_text": "computeDatasetDigest(digest)",
          "new_text": null,
          "old_line_content": "        computeDatasetDigest(digest);",
          "new_line_content": "        for (j = 0; j < 20; j++)",
          "content_same": false
        },
        {
          "line": 4400,
          "old_api": "getDecodedObject",
          "new_api": null,
          "old_text": "getDecodedObject(o)",
          "new_text": null,
          "old_line_content": "            robj *decoded = getDecodedObject(o);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 10547,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(d, \"%02x\",digest[j])",
          "new_text": null,
          "old_line_content": "            d = sdscatprintf(d, \"%02x\",digest[j]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4404,
          "old_api": "dictReplace",
          "new_api": null,
          "old_text": "dictReplace(c->db->dict,c->argv[1],o)",
          "new_text": null,
          "old_line_content": "            dictReplace(c->db->dict,c->argv[1],o);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6450,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(key)",
          "new_text": null,
          "old_line_content": "        decrRefCount(key);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 10550,
          "old_api": "addReplySds",
          "new_api": null,
          "old_text": "addReplySds(c,d)",
          "new_text": null,
          "old_line_content": "        addReplySds(c,d);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 8503,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "                o = dictGetEntryVal(de);",
          "new_line_content": "                swapped = 0;",
          "content_same": false
        },
        {
          "line": 10552,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\n            \"-ERR Syntax error, try DEBUG [SEGFAULT|OBJECT <key>|SWAPIN <key>|SWAPOUT <key>|RELOAD]\\r\\n\")",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(",
          "new_line_content": "            \"-ERR Syntax error, try DEBUG [SEGFAULT|OBJECT <key>|SWAPIN <key>|SWAPOUT <key>|RELOAD]\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 4409,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "                c->argv[2]->ptr, sdslen(c->argv[2]->ptr));",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 8506,
          "old_api": "vmPreviewObject",
          "new_api": null,
          "old_text": "vmPreviewObject(key)",
          "new_text": null,
          "old_line_content": "                o = vmPreviewObject(key);",
          "new_line_content": "                swapped = 1;",
          "content_same": false
        },
        {
          "line": 4411,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(o->ptr, \"%ld\",\n                (unsigned long) c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "            o->ptr = sdscatprintf(o->ptr, \"%ld\",",
          "new_line_content": "                (unsigned long) c->argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 6452,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete((dict*)o->ptr,key)",
          "new_text": null,
          "old_line_content": "        deleted = dictDelete((dict*)o->ptr,key) == DICT_OK;",
          "new_line_content": "        /* Always check if the dictionary needs a resize after a delete. */",
          "content_same": false
        },
        {
          "line": 8509,
          "old_api": "getExpire",
          "new_api": null,
          "old_text": "getExpire(db,key)",
          "new_text": null,
          "old_line_content": "            expiretime = getExpire(db,key);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4414,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(o->ptr)",
          "new_text": null,
          "old_line_content": "        totlen = sdslen(o->ptr);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 10559,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"==> %s:%d '%s' is not true\\n\",file,line,estr)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_WARNING,\"==> %s:%d '%s' is not true\\n\",file,line,estr);",
          "new_line_content": "#ifdef HAVE_BACKTRACE",
          "content_same": false
        },
        {
          "line": 6462,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize((dict*)o->ptr)",
          "new_text": null,
          "old_line_content": "        zipmapLen((unsigned char*)o->ptr) : dictSize((dict*)o->ptr);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 10561,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"(forcing SIGSEGV in order to print the stack trace)\")",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_WARNING,\"(forcing SIGSEGV in order to print the stack trace)\");",
          "new_line_content": "    *((char*)-1) = 'x';",
          "content_same": false
        },
        {
          "line": 4417,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\":%lu\\r\\n\",(unsigned long)totlen));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 8515,
          "old_api": "fwrite",
          "new_api": null,
          "old_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "new_text": null,
          "old_line_content": "                if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "new_line_content": "                /* Key and value */",
          "content_same": false
        },
        {
          "line": 8518,
          "old_api": "fwriteBulkObject",
          "new_api": null,
          "old_text": "fwriteBulkObject(fp,o)",
          "new_text": null,
          "old_line_content": "                if (fwriteBulkObject(fp,o) == 0) goto werr;",
          "new_line_content": "            } else if (o->type == REDIS_LIST) {",
          "content_same": false
        },
        {
          "line": 4423,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[3]->ptr)",
          "new_text": null,
          "old_line_content": "    long end = atoi(c->argv[3]->ptr);",
          "new_line_content": "    size_t rangelen, strlen;",
          "content_same": false
        },
        {
          "line": 10568,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Guru Meditation: %s #%s:%d\",msg,file,line)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_WARNING,\"Guru Meditation: %s #%s:%d\",msg,file,line);",
          "new_line_content": "#ifdef HAVE_BACKTRACE",
          "content_same": false
        },
        {
          "line": 10570,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"(forcing SIGSEGV in order to print the stack trace)\")",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_WARNING,\"(forcing SIGSEGV in order to print the stack trace)\");",
          "new_line_content": "    *((char*)-1) = 'x';",
          "content_same": false
        },
        {
          "line": 4428,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_STRING)",
          "new_text": null,
          "old_line_content": "        checkType(c,o,REDIS_STRING)) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8526,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "                while((ln = listNext(&li))) {",
          "new_line_content": "                    char cmd[]=\"*3\\r\\n$5\\r\\nRPUSH\\r\\n\";",
          "content_same": false
        },
        {
          "line": 4431,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(o->ptr)",
          "new_text": null,
          "old_line_content": "    strlen = sdslen(o->ptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8528,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(ln)",
          "new_text": null,
          "old_line_content": "                    robj *eleobj = listNodeValue(ln);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6480,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(hashIterator))",
          "new_text": null,
          "old_line_content": "    hashIterator *hi = zmalloc(sizeof(hashIterator));",
          "new_line_content": "    hi->encoding = subject->encoding;",
          "content_same": false
        },
        {
          "line": 10579,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(\"/proc/sys/vm/overcommit_memory\",\"r\")",
          "new_text": null,
          "old_line_content": "    FILE *fp = fopen(\"/proc/sys/vm/overcommit_memory\",\"r\");",
          "new_line_content": "    char buf[64];",
          "content_same": false
        },
        {
          "line": 8532,
          "old_api": "fwriteBulkObject",
          "new_api": null,
          "old_text": "fwriteBulkObject(fp,eleobj)",
          "new_text": null,
          "old_line_content": "                    if (fwriteBulkObject(fp,eleobj) == 0) goto werr;",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 6483,
          "old_api": "zipmapRewind",
          "new_api": null,
          "old_text": "zipmapRewind(subject->ptr)",
          "new_text": null,
          "old_line_content": "        hi->zi = zipmapRewind(subject->ptr);",
          "new_line_content": "    } else if (hi->encoding == REDIS_ENCODING_HT) {",
          "content_same": false
        },
        {
          "line": 6485,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(subject->ptr)",
          "new_text": null,
          "old_line_content": "        hi->di = dictGetIterator(subject->ptr);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 6487,
          "old_api": "redisAssert",
          "new_api": null,
          "old_text": "redisAssert(NULL)",
          "new_text": null,
          "old_line_content": "        redisAssert(NULL);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 10584,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "        fclose(fp);",
          "new_line_content": "        return -1;",
          "content_same": false
        },
        {
          "line": 8537,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(set)",
          "new_text": null,
          "old_line_content": "                dictIterator *di = dictGetIterator(set);",
          "new_line_content": "                dictEntry *de;",
          "content_same": false
        },
        {
          "line": 10587,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "    fclose(fp);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8540,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "                while((de = dictNext(di)) != NULL) {",
          "new_line_content": "                    char cmd[]=\"*3\\r\\n$4\\r\\nSADD\\r\\n\";",
          "content_same": false
        },
        {
          "line": 10589,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(buf)",
          "new_text": null,
          "old_line_content": "    return atoi(buf);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 8542,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "                    robj *eleobj = dictGetEntryKey(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4443,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(o)",
          "new_text": null,
          "old_line_content": "        decrRefCount(o);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 6494,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(hi->di)",
          "new_text": null,
          "old_line_content": "        dictReleaseIterator(hi->di);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6496,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(hi)",
          "new_text": null,
          "old_line_content": "    zfree(hi);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 8546,
          "old_api": "fwriteBulkObject",
          "new_api": null,
          "old_text": "fwriteBulkObject(fp,eleobj)",
          "new_text": null,
          "old_line_content": "                    if (fwriteBulkObject(fp,eleobj) == 0) goto werr;",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 10594,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 8548,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "                dictReleaseIterator(di);",
          "new_line_content": "            } else if (o->type == REDIS_ZSET) {",
          "content_same": false
        },
        {
          "line": 4454,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(o)",
          "new_text": null,
          "old_line_content": "    decrRefCount(o);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6503,
          "old_api": "zipmapNext",
          "new_api": null,
          "old_text": "zipmapNext(hi->zi, &hi->zk, &hi->zklen,\n            &hi->zv, &hi->zvlen)",
          "new_text": null,
          "old_line_content": "        if ((hi->zi = zipmapNext(hi->zi, &hi->zk, &hi->zklen,",
          "new_line_content": "            &hi->zv, &hi->zvlen)) == NULL) return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 8552,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(zs->dict)",
          "new_text": null,
          "old_line_content": "                dictIterator *di = dictGetIterator(zs->dict);",
          "new_line_content": "                dictEntry *de;",
          "content_same": false
        },
        {
          "line": 6506,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(hi->di)",
          "new_text": null,
          "old_line_content": "        if ((hi->de = dictNext(hi->di)) == NULL) return REDIS_ERR;",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 8555,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "                while((de = dictNext(di)) != NULL) {",
          "new_line_content": "                    char cmd[]=\"*4\\r\\n$4\\r\\nZADD\\r\\n\";",
          "content_same": false
        },
        {
          "line": 10604,
          "old_api": "setsid",
          "new_api": null,
          "old_text": "setsid()",
          "new_text": null,
          "old_line_content": "    setsid(); /* create a new session */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8558,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "                    double *score = dictGetEntryVal(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4463,
          "old_api": "deleteKey",
          "new_api": null,
          "old_text": "deleteKey(c->db,c->argv[j])",
          "new_text": null,
          "old_line_content": "        if (deleteKey(c->db,c->argv[j])) {",
          "new_line_content": "            server.dirty++;",
          "content_same": false
        },
        {
          "line": 8563,
          "old_api": "fwriteBulkObject",
          "new_api": null,
          "old_text": "fwriteBulkObject(fp,eleobj)",
          "new_text": null,
          "old_line_content": "                    if (fwriteBulkObject(fp,eleobj) == 0) goto werr;",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 4468,
          "old_api": "addReplyLong",
          "new_api": null,
          "old_text": "addReplyLong(c,deleted)",
          "new_text": null,
          "old_line_content": "    addReplyLong(c,deleted);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 8565,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "                dictReleaseIterator(di);",
          "new_line_content": "            } else if (o->type == REDIS_HASH) {",
          "content_same": false
        },
        {
          "line": 10613,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd)",
          "new_text": null,
          "old_line_content": "        if (fd > STDERR_FILENO) close(fd);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6517,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject((char*)hi->zk,hi->zklen)",
          "new_text": null,
          "old_line_content": "            o = createStringObject((char*)hi->zk,hi->zklen);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 10616,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(server.pidfile,\"w\")",
          "new_text": null,
          "old_line_content": "    fp = fopen(server.pidfile,\"w\");",
          "new_line_content": "    if (fp) {",
          "content_same": false
        },
        {
          "line": 6519,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject((char*)hi->zv,hi->zvlen)",
          "new_text": null,
          "old_line_content": "            o = createStringObject((char*)hi->zv,hi->zvlen);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4474,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.cone)",
          "new_text": null,
          "old_line_content": "        addReply(c, shared.cone);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 8571,
          "old_api": "zipmapRewind",
          "new_api": null,
          "old_text": "zipmapRewind(o->ptr)",
          "new_text": null,
          "old_line_content": "                    unsigned char *p = zipmapRewind(o->ptr);",
          "new_line_content": "                    unsigned char *field, *val;",
          "content_same": false
        },
        {
          "line": 10619,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "        fclose(fp);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4476,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c, shared.czero);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6523,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(hi->de)",
          "new_text": null,
          "old_line_content": "            o = dictGetEntryKey(hi->de);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 6525,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(hi->de)",
          "new_text": null,
          "old_line_content": "            o = dictGetEntryVal(hi->de);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6527,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(o)",
          "new_text": null,
          "old_line_content": "        incrRefCount(o);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 10625,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(0)",
          "new_text": null,
          "old_line_content": "    exit(0);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 8578,
          "old_api": "fwriteBulkString",
          "new_api": null,
          "old_text": "fwriteBulkString(fp,(char*)field,flen)",
          "new_text": null,
          "old_line_content": "                        if (fwriteBulkString(fp,(char*)field,flen) == -1)",
          "new_line_content": "                            return -1;",
          "content_same": false
        },
        {
          "line": 4481,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[1]->ptr)",
          "new_text": null,
          "old_line_content": "    int id = atoi(c->argv[1]->ptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8580,
          "old_api": "fwriteBulkString",
          "new_api": null,
          "old_text": "fwriteBulkString(fp,(char*)val,vlen)",
          "new_text": null,
          "old_line_content": "                        if (fwriteBulkString(fp,(char*)val,vlen) == -1)",
          "new_line_content": "                            return -1;",
          "content_same": false
        },
        {
          "line": 4484,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR invalid DB index\\r\\n\")",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(\"-ERR invalid DB index\\r\\n\"));",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 4486,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.ok);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 10631,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "    exit(1);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 8584,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(o->ptr)",
          "new_text": null,
          "old_line_content": "                    dictIterator *di = dictGetIterator(o->ptr);",
          "new_line_content": "                    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 6533,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,key)",
          "new_text": null,
          "old_line_content": "    robj *o = lookupKeyWrite(c->db,key);",
          "new_line_content": "    if (o == NULL) {",
          "content_same": false
        },
        {
          "line": 6537,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(key)",
          "new_text": null,
          "old_line_content": "        incrRefCount(key);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 6540,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "            return NULL;",
          "content_same": false
        },
        {
          "line": 8589,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "                        robj *val = dictGetEntryVal(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 10637,
          "old_api": "initServerConfig",
          "new_api": null,
          "old_text": "initServerConfig()",
          "new_text": null,
          "old_line_content": "    initServerConfig();",
          "new_line_content": "    if (argc == 2) {",
          "content_same": false
        },
        {
          "line": 4496,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "        if (!de || expireIfNeeded(c->db,dictGetEntryKey(de)) == 0) break;",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 8594,
          "old_api": "fwriteBulkObject",
          "new_api": null,
          "old_text": "fwriteBulkObject(fp,val)",
          "new_text": null,
          "old_line_content": "                        if (fwriteBulkObject(fp,val) == -1) return -1;",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 10643,
          "old_api": "loadServerConfig",
          "new_api": null,
          "old_text": "loadServerConfig(argv[1])",
          "new_text": null,
          "old_line_content": "        loadServerConfig(argv[1]);",
          "new_line_content": "    } else if ((argc > 2)) {",
          "content_same": false
        },
        {
          "line": 8596,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "                    dictReleaseIterator(di);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 10645,
          "old_api": "usage",
          "new_api": null,
          "old_text": "usage()",
          "new_text": null,
          "old_line_content": "        usage();",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 4500,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.nullbulk);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 8599,
          "old_api": "redisPanic",
          "new_api": null,
          "old_text": "redisPanic(\"Unknown object type\")",
          "new_text": null,
          "old_line_content": "                redisPanic(\"Unknown object type\");",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 10647,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Warning: no config file specified, using the default config. In order to specify a config file use 'redis-server /path/to/redis.conf'\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Warning: no config file specified, using the default config. In order to specify a config file use 'redis-server /path/to/redis.conf'\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4504,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "    key = dictGetEntryKey(de);",
          "new_line_content": "    if (server.vm_enabled) {",
          "content_same": false
        },
        {
          "line": 10651,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Server started, Redis version \" REDIS_VERSION)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_NOTICE,\"Server started, Redis version \" REDIS_VERSION);",
          "new_line_content": "#ifdef __linux__",
          "content_same": false
        },
        {
          "line": 4508,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(key)",
          "new_text": null,
          "old_line_content": "        decrRefCount(key);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 10653,
          "old_api": "linuxOvercommitMemoryWarning",
          "new_api": null,
          "old_text": "linuxOvercommitMemoryWarning()",
          "new_text": null,
          "old_line_content": "    linuxOvercommitMemoryWarning();",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 4510,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,key)",
          "new_text": null,
          "old_line_content": "        addReplyBulk(c,key);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 10655,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    start = time(NULL);",
          "new_line_content": "    if (server.appendonly) {",
          "content_same": false
        },
        {
          "line": 8608,
          "old_api": "fwriteBulkLong",
          "new_api": null,
          "old_text": "fwriteBulkLong(fp,expiretime)",
          "new_text": null,
          "old_line_content": "                if (fwriteBulkLong(fp,expiretime) == 0) goto werr;",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 6556,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, update ? shared.czero : shared.cone)",
          "new_text": null,
          "old_line_content": "    addReply(c, update ? shared.czero : shared.cone);",
          "new_line_content": "    server.dirty++;",
          "content_same": false
        },
        {
          "line": 8610,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(o)",
          "new_text": null,
          "old_line_content": "            if (swapped) decrRefCount(o);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 10658,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_NOTICE,\"DB loaded from append only file: %ld seconds\",time(NULL)-start);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 8612,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "        dictReleaseIterator(di);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 10661,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_NOTICE,\"DB loaded from disk: %ld seconds\",time(NULL)-start);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4518,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(pattern)",
          "new_text": null,
          "old_line_content": "    int plen = sdslen(pattern);",
          "new_line_content": "    unsigned long numkeys = 0;",
          "content_same": false
        },
        {
          "line": 6563,
          "old_api": "hashTryConversion",
          "new_api": null,
          "old_text": "hashTryConversion(o,c->argv,2,3)",
          "new_text": null,
          "old_line_content": "    hashTryConversion(o,c->argv,2,3);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4520,
          "old_api": "createObject",
          "new_api": null,
          "old_text": "createObject(REDIS_STRING,NULL)",
          "new_text": null,
          "old_line_content": "    robj *lenobj = createObject(REDIS_STRING,NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6566,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c, shared.czero);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 8618,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "    fclose(fp);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 10666,
          "old_api": "aeDeleteEventLoop",
          "new_api": null,
          "old_text": "aeDeleteEventLoop(server.el)",
          "new_text": null,
          "old_line_content": "    aeDeleteEventLoop(server.el);",
          "new_line_content": "    return 0;",
          "content_same": false
        },
        {
          "line": 6570,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.cone)",
          "new_text": null,
          "old_line_content": "        addReply(c, shared.cone);",
          "new_line_content": "        server.dirty++;",
          "content_same": false
        },
        {
          "line": 4526,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "        robj *keyobj = dictGetEntryKey(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8624,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(tmpfile)",
          "new_text": null,
          "old_line_content": "        unlink(tmpfile);",
          "new_line_content": "        return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 8627,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"SYNC append only file rewrite performed\")",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_NOTICE,\"SYNC append only file rewrite performed\");",
          "new_line_content": "    return REDIS_OK;",
          "content_same": false
        },
        {
          "line": 4532,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,keyobj)",
          "new_text": null,
          "old_line_content": "                addReplyBulk(c,keyobj);",
          "new_line_content": "                numkeys++;",
          "content_same": false
        },
        {
          "line": 6580,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR wrong number of arguments for HMSET\\r\\n\")",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(\"-ERR wrong number of arguments for HMSET\\r\\n\"));",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 6585,
          "old_api": "hashTryConversion",
          "new_api": null,
          "old_text": "hashTryConversion(o,c->argv,2,c->argc-1)",
          "new_text": null,
          "old_line_content": "    hashTryConversion(o,c->argv,2,c->argc-1);",
          "new_line_content": "    for (i = 2; i < c->argc; i += 2) {",
          "content_same": false
        },
        {
          "line": 8634,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "    if (di) dictReleaseIterator(di);",
          "new_line_content": "    return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 4538,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    lenobj->ptr = sdscatprintf(sdsempty(),\"*%lu\\r\\n\",numkeys);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6588,
          "old_api": "hashSet",
          "new_api": null,
          "old_text": "hashSet(o,c->argv[i],c->argv[i+1])",
          "new_text": null,
          "old_line_content": "        hashSet(o,c->argv[i],c->argv[i+1]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6590,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.ok)",
          "new_text": null,
          "old_line_content": "    addReply(c, shared.ok);",
          "new_line_content": "    server.dirty++;",
          "content_same": false
        },
        {
          "line": 4543,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(c->db->dict)",
          "new_text": null,
          "old_line_content": "        sdscatprintf(sdsempty(),\":%lu\\r\\n\",dictSize(c->db->dict)));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4548,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        sdscatprintf(sdsempty(),\":%lu\\r\\n\",server.lastsave));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6601,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c,current,&value,\n            \"hash value is not an integer\")",
          "new_text": null,
          "old_line_content": "        if (getLongLongFromObjectOrReply(c,current,&value,",
          "new_line_content": "            \"hash value is not an integer\") != REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 4555,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    o = lookupKeyRead(c->db,c->argv[1]);",
          "new_line_content": "    if (o == NULL) {",
          "content_same": false
        },
        {
          "line": 6603,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(current)",
          "new_text": null,
          "old_line_content": "            decrRefCount(current);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 6606,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(current)",
          "new_text": null,
          "old_line_content": "        decrRefCount(current);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 8655,
          "old_api": "fork",
          "new_api": null,
          "old_text": "fork()",
          "new_text": null,
          "old_line_content": "    if ((childpid = fork()) == 0) {",
          "new_line_content": "        /* Child */",
          "content_same": false
        },
        {
          "line": 10708,
          "old_api": "REDIS_NOTUSED",
          "new_api": null,
          "old_text": "REDIS_NOTUSED(info)",
          "new_text": null,
          "old_line_content": "    REDIS_NOTUSED(info);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 10710,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\n        \"======= Ooops! Redis %s got signal: -%d- =======\", REDIS_VERSION, sig)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_WARNING,",
          "new_line_content": "        \"======= Ooops! Redis %s got signal: -%d- =======\", REDIS_VERSION, sig);",
          "content_same": false
        },
        {
          "line": 8663,
          "old_api": "_exit",
          "new_api": null,
          "old_text": "_exit(0)",
          "new_text": null,
          "old_line_content": "            _exit(0);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 6614,
          "old_api": "hashSet",
          "new_api": null,
          "old_text": "hashSet(o,c->argv[2],new)",
          "new_text": null,
          "old_line_content": "    hashSet(o,c->argv[2],new);",
          "new_line_content": "    decrRefCount(new);",
          "content_same": false
        },
        {
          "line": 8665,
          "old_api": "_exit",
          "new_api": null,
          "old_text": "_exit(1)",
          "new_text": null,
          "old_line_content": "            _exit(1);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 10713,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING, \"%s\",infostring)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_WARNING, \"%s\",infostring);",
          "new_line_content": "    /* It's not safe to sdsfree() the returned string under memory",
          "content_same": false
        },
        {
          "line": 4569,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.crlf)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.crlf);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6616,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c,value)",
          "new_text": null,
          "old_line_content": "    addReplyLongLong(c,value);",
          "new_line_content": "    server.dirty++;",
          "content_same": false
        },
        {
          "line": 10717,
          "old_api": "backtrace",
          "new_api": null,
          "old_text": "backtrace(trace, 100)",
          "new_text": null,
          "old_line_content": "    trace_size = backtrace(trace, 100);",
          "new_line_content": "    /* overwrite sigaction with caller's address */",
          "content_same": false
        },
        {
          "line": 8670,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\n                \"Can't rewrite append only file in background: fork: %s\",\n                strerror(errno))",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,",
          "new_line_content": "                \"Can't rewrite append only file in background: fork: %s\",",
          "content_same": false
        },
        {
          "line": 4574,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR background save in progress\\r\\n\")",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(\"-ERR background save in progress\\r\\n\"));",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 8672,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "                strerror(errno));",
          "new_line_content": "            return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 10720,
          "old_api": "getMcontextEip",
          "new_api": null,
          "old_text": "getMcontextEip(uc)",
          "new_text": null,
          "old_line_content": "        trace[1] = getMcontextEip(uc);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 10722,
          "old_api": "backtrace_symbols",
          "new_api": null,
          "old_text": "backtrace_symbols(trace, trace_size)",
          "new_text": null,
          "old_line_content": "    messages = backtrace_symbols(trace, trace_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8675,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\n            \"Background append only file rewriting started by pid %d\",childpid)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_NOTICE,",
          "new_line_content": "            \"Background append only file rewriting started by pid %d\",childpid);",
          "content_same": false
        },
        {
          "line": 4578,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.ok);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 10725,
          "old_api": "findFuncName",
          "new_api": null,
          "old_text": "findFuncName(trace[i], &offset)",
          "new_text": null,
          "old_line_content": "        char *fn = findFuncName(trace[i], &offset), *p;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8678,
          "old_api": "updateDictResizePolicy",
          "new_api": null,
          "old_text": "updateDictResizePolicy()",
          "new_text": null,
          "old_line_content": "        updateDictResizePolicy();",
          "new_line_content": "        /* We set appendseldb to -1 in order to force the next call to the",
          "content_same": false
        },
        {
          "line": 4580,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.err)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.err);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6623,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_HASH)",
          "new_text": null,
          "old_line_content": "        checkType(c,o,REDIS_HASH)) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 10729,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"%s\", messages[i])",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,\"%s\", messages[i]);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 4586,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR background save already in progress\\r\\n\")",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(\"-ERR background save already in progress\\r\\n\"));",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 10731,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"%d redis-server %p %s + %d\", i, trace[i], fn, (unsigned int)offset)",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,\"%d redis-server %p %s + %d\", i, trace[i], fn, (unsigned int)offset);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6627,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(value)",
          "new_text": null,
          "old_line_content": "        decrRefCount(value);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 4589,
          "old_api": "rdbSaveBackground",
          "new_api": null,
          "old_text": "rdbSaveBackground(server.dbfilename)",
          "new_text": null,
          "old_line_content": "    if (rdbSaveBackground(server.dbfilename) == REDIS_OK) {",
          "new_line_content": "        char *status = \"+Background saving started\\r\\n\";",
          "content_same": false
        },
        {
          "line": 6629,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.nullbulk);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 10735,
          "old_api": "_exit",
          "new_api": null,
          "old_text": "_exit(0)",
          "new_text": null,
          "old_line_content": "    _exit(0);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4591,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(status)",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(status));",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 4593,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.err)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.err);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6636,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    o = lookupKeyRead(c->db,c->argv[1]);",
          "new_line_content": "    if (o != NULL && o->type != REDIS_HASH) {",
          "content_same": false
        },
        {
          "line": 8691,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR background append only file rewriting already in progress\\r\\n\")",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(\"-ERR background append only file rewriting already in progress\\r\\n\"));",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 6638,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.wrongtypeerr);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 10741,
          "old_api": "sigemptyset (&act.sa_mask)",
          "new_api": null,
          "old_text": "sigemptyset (&act.sa_mask)",
          "new_text": null,
          "old_line_content": "    sigemptyset (&act.sa_mask);",
          "new_line_content": "    /* When the SA_SIGINFO flag is set in sa_flags then sa_sigaction",
          "content_same": false
        },
        {
          "line": 8694,
          "old_api": "rewriteAppendOnlyFileBackground",
          "new_api": null,
          "old_text": "rewriteAppendOnlyFileBackground()",
          "new_text": null,
          "old_line_content": "    if (rewriteAppendOnlyFileBackground() == REDIS_OK) {",
          "new_line_content": "        char *status = \"+Background append only file rewriting started\\r\\n\";",
          "content_same": false
        },
        {
          "line": 4598,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"User requested shutdown, saving DB...\")",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_WARNING,\"User requested shutdown, saving DB...\");",
          "new_line_content": "    /* Kill the saving child if there is a background saving in progress.",
          "content_same": false
        },
        {
          "line": 8696,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(status)",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(status));",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 6644,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",c->argc-2));",
          "new_line_content": "    for (i = 2; i < c->argc; i++) {",
          "content_same": false
        },
        {
          "line": 8698,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.err)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.err);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6648,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(value)",
          "new_text": null,
          "old_line_content": "            decrRefCount(value);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 6650,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.nullbulk);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4605,
          "old_api": "rdbRemoveTempFile",
          "new_api": null,
          "old_text": "rdbRemoveTempFile(server.bgsavechildpid)",
          "new_text": null,
          "old_line_content": "        rdbRemoveTempFile(server.bgsavechildpid);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 10750,
          "old_api": "sigaction (SIGBUS, &act, NULL)",
          "new_api": null,
          "old_text": "sigaction (SIGBUS, &act, NULL)",
          "new_text": null,
          "old_line_content": "    sigaction (SIGBUS, &act, NULL);",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 8706,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(tmpfile)",
          "new_text": null,
          "old_line_content": "    unlink(tmpfile);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4611,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(0)",
          "new_text": null,
          "old_line_content": "        exit(0);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 6658,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_HASH)",
          "new_text": null,
          "old_line_content": "        checkType(c,o,REDIS_HASH)) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4614,
          "old_api": "rdbSave",
          "new_api": null,
          "old_text": "rdbSave(server.dbfilename)",
          "new_text": null,
          "old_line_content": "        if (rdbSave(server.dbfilename) == REDIS_OK) {",
          "new_line_content": "            if (server.daemonize)",
          "content_same": false
        },
        {
          "line": 6662,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.cone)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.cone);",
          "new_line_content": "        server.dirty++;",
          "content_same": false
        },
        {
          "line": 6665,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4619,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(0)",
          "new_text": null,
          "old_line_content": "            exit(0);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 6672,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_HASH)",
          "new_text": null,
          "old_line_content": "        checkType(c,o,REDIS_HASH)) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6674,
          "old_api": "hashLength",
          "new_api": null,
          "old_text": "hashLength(o)",
          "new_text": null,
          "old_line_content": "    addReplyUlong(c,hashLength(o));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4628,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR can't quit, problems saving the DB\\r\\n\")",
          "new_text": null,
          "old_line_content": "                sdsnew(\"-ERR can't quit, problems saving the DB\\r\\n\"));",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6683,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_HASH)",
          "new_text": null,
          "old_line_content": "        || checkType(c,o,REDIS_HASH)) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4638,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.sameobjecterr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.sameobjecterr);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 6687,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(lenobj)",
          "new_text": null,
          "old_line_content": "    decrRefCount(lenobj);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4642,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": null,
          "old_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.nokeyerr)",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.nokeyerr)) == NULL)",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 8739,
          "old_api": "zmalloc_enable_thread_safeness",
          "new_api": null,
          "old_text": "zmalloc_enable_thread_safeness()",
          "new_text": null,
          "old_line_content": "        zmalloc_enable_thread_safeness(); /* we need thread safe zmalloc() */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6690,
          "old_api": "hashNext",
          "new_api": null,
          "old_text": "hashNext(hi)",
          "new_text": null,
          "old_line_content": "    while (hashNext(hi) != REDIS_ERR) {",
          "new_line_content": "        if (flags & REDIS_HASH_KEY) {",
          "content_same": false
        },
        {
          "line": 8741,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Using '%s' as swap file\",server.vm_swap_file)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_NOTICE,\"Using '%s' as swap file\",server.vm_swap_file);",
          "new_line_content": "    /* Try to open the old swap file, otherwise create it */",
          "content_same": false
        },
        {
          "line": 6694,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(obj)",
          "new_text": null,
          "old_line_content": "            decrRefCount(obj);",
          "new_line_content": "            count++;",
          "content_same": false
        },
        {
          "line": 4647,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(c->db->dict,c->argv[2],o)",
          "new_text": null,
          "old_line_content": "    if (dictAdd(c->db->dict,c->argv[2],o) == DICT_ERR) {",
          "new_line_content": "        if (nx) {",
          "content_same": false
        },
        {
          "line": 8744,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(server.vm_swap_file,\"w+b\")",
          "new_text": null,
          "old_line_content": "        server.vm_fp = fopen(server.vm_swap_file,\"w+b\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4650,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.czero);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 8747,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\n            \"Can't open the swap file: %s. Exiting.\",\n            strerror(errno))",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,",
          "new_line_content": "            \"Can't open the swap file: %s. Exiting.\",",
          "content_same": false
        },
        {
          "line": 6700,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(obj)",
          "new_text": null,
          "old_line_content": "            decrRefCount(obj);",
          "new_line_content": "            count++;",
          "content_same": false
        },
        {
          "line": 4653,
          "old_api": "dictReplace",
          "new_api": null,
          "old_text": "dictReplace(c->db->dict,c->argv[2],o)",
          "new_text": null,
          "old_line_content": "        dictReplace(c->db->dict,c->argv[2],o);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 8750,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "        exit(1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4655,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(c->argv[2])",
          "new_text": null,
          "old_line_content": "        incrRefCount(c->argv[2]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 8752,
          "old_api": "fileno",
          "new_api": null,
          "old_text": "fileno(server.vm_fp)",
          "new_text": null,
          "old_line_content": "    server.vm_fd = fileno(server.vm_fp);",
          "new_line_content": "    /* Lock the swap file for writing, this is useful in order to avoid",
          "content_same": false
        },
        {
          "line": 4657,
          "old_api": "deleteKey",
          "new_api": null,
          "old_text": "deleteKey(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    deleteKey(c->db,c->argv[1]);",
          "new_line_content": "    server.dirty++;",
          "content_same": false
        },
        {
          "line": 6704,
          "old_api": "hashReleaseIterator",
          "new_api": null,
          "old_text": "hashReleaseIterator(hi)",
          "new_text": null,
          "old_line_content": "    hashReleaseIterator(hi);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4659,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,nx ? shared.cone : shared.ok)",
          "new_text": null,
          "old_line_content": "    addReply(c,nx ? shared.cone : shared.ok);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6706,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    lenobj->ptr = sdscatprintf(sdsempty(),\"*%lu\\r\\n\",count);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6710,
          "old_api": "genericHgetallCommand",
          "new_api": null,
          "old_text": "genericHgetallCommand(c,REDIS_HASH_KEY)",
          "new_text": null,
          "old_line_content": "    genericHgetallCommand(c,REDIS_HASH_KEY);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4663,
          "old_api": "renameGenericCommand",
          "new_api": null,
          "old_text": "renameGenericCommand(c,0)",
          "new_text": null,
          "old_line_content": "    renameGenericCommand(c,0);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 8761,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "        exit(1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6714,
          "old_api": "genericHgetallCommand",
          "new_api": null,
          "old_text": "genericHgetallCommand(c,REDIS_HASH_VALUE)",
          "new_text": null,
          "old_line_content": "    genericHgetallCommand(c,REDIS_HASH_VALUE);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4667,
          "old_api": "renameGenericCommand",
          "new_api": null,
          "old_text": "renameGenericCommand(c,1)",
          "new_text": null,
          "old_line_content": "    renameGenericCommand(c,1);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6718,
          "old_api": "genericHgetallCommand",
          "new_api": null,
          "old_text": "genericHgetallCommand(c,REDIS_HASH_KEY|REDIS_HASH_VALUE)",
          "new_text": null,
          "old_line_content": "    genericHgetallCommand(c,REDIS_HASH_KEY|REDIS_HASH_VALUE);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6724,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_HASH)",
          "new_text": null,
          "old_line_content": "        checkType(c,o,REDIS_HASH)) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6726,
          "old_api": "hashExists",
          "new_api": null,
          "old_text": "hashExists(o,c->argv[2])",
          "new_text": null,
          "old_line_content": "    addReply(c, hashExists(o,c->argv[2]) ? shared.cone : shared.czero);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 8775,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "        exit(1);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 4679,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.outofrangeerr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.outofrangeerr);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 8777,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Swap file allocated with success\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_NOTICE,\"Swap file allocated with success\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4683,
          "old_api": "selectDb",
          "new_api": null,
          "old_text": "selectDb(c,srcid)",
          "new_text": null,
          "old_line_content": "    selectDb(c,srcid); /* Back to the source DB */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8780,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_VERBOSE,\"Allocated %lld bytes page table for %lld pages\",\n        (long long) (server.vm_pages+7)/8, server.vm_pages)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_VERBOSE,\"Allocated %lld bytes page table for %lld pages\",",
          "new_line_content": "        (long long) (server.vm_pages+7)/8, server.vm_pages);",
          "content_same": false
        },
        {
          "line": 6732,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&hashDictType,NULL)",
          "new_text": null,
          "old_line_content": "    dict *dict = dictCreate(&hashDictType,NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8782,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(server.vm_bitmap,0,(server.vm_pages+7)/8)",
          "new_text": null,
          "old_line_content": "    memset(server.vm_bitmap,0,(server.vm_pages+7)/8);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4688,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.sameobjecterr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.sameobjecterr);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 6736,
          "old_api": "zipmapNext",
          "new_api": null,
          "old_text": "zipmapNext(p,&key,&klen,&val,&vlen)",
          "new_text": null,
          "old_line_content": "    while((p = zipmapNext(p,&key,&klen,&val,&vlen)) != NULL) {",
          "new_line_content": "        robj *keyobj, *valobj;",
          "content_same": false
        },
        {
          "line": 4693,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "    if (!o) {",
          "content_same": false
        },
        {
          "line": 8791,
          "old_api": "pthread_mutex_init",
          "new_api": null,
          "old_text": "pthread_mutex_init(&server.io_swapfile_mutex,NULL)",
          "new_text": null,
          "old_line_content": "    pthread_mutex_init(&server.io_swapfile_mutex,NULL);",
          "new_line_content": "    server.io_active_threads = 0;",
          "content_same": false
        },
        {
          "line": 4695,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 6743,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(dict,keyobj,valobj)",
          "new_text": null,
          "old_line_content": "        dictAdd(dict,keyobj,valobj);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6747,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(zm)",
          "new_text": null,
          "old_line_content": "    zfree(zm);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 8796,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "        exit(1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4702,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 8800,
          "old_api": "anetNonBlock",
          "new_api": null,
          "old_text": "anetNonBlock(NULL,server.io_ready_pipe_read)",
          "new_text": null,
          "old_line_content": "    redisAssert(anetNonBlock(NULL,server.io_ready_pipe_read) != ANET_ERR);",
          "new_line_content": "    /* LZF requires a lot of stack */",
          "content_same": false
        },
        {
          "line": 4706,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(o)",
          "new_text": null,
          "old_line_content": "    incrRefCount(o);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8803,
          "old_api": "pthread_attr_getstacksize",
          "new_api": null,
          "old_text": "pthread_attr_getstacksize(&server.io_threads_attr, &stacksize)",
          "new_text": null,
          "old_line_content": "    pthread_attr_getstacksize(&server.io_threads_attr, &stacksize);",
          "new_line_content": "    while (stacksize < REDIS_THREAD_STACK_SIZE) stacksize *= 2;",
          "content_same": false
        },
        {
          "line": 6756,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.ok);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 8805,
          "old_api": "pthread_attr_setstacksize",
          "new_api": null,
          "old_text": "pthread_attr_setstacksize(&server.io_threads_attr, stacksize)",
          "new_text": null,
          "old_line_content": "    pthread_attr_setstacksize(&server.io_threads_attr, stacksize);",
          "new_line_content": "    /* Listen for events in the threaded I/O pipe */",
          "content_same": false
        },
        {
          "line": 4709,
          "old_api": "deleteKey",
          "new_api": null,
          "old_text": "deleteKey(src,c->argv[1])",
          "new_text": null,
          "old_line_content": "    deleteKey(src,c->argv[1]);",
          "new_line_content": "    server.dirty++;",
          "content_same": false
        },
        {
          "line": 8807,
          "old_api": "aeCreateFileEvent",
          "new_api": null,
          "old_text": "aeCreateFileEvent(server.el, server.io_ready_pipe_read, AE_READABLE,\n        vmThreadedIOCompletedJob, NULL)",
          "new_text": null,
          "old_line_content": "    if (aeCreateFileEvent(server.el, server.io_ready_pipe_read, AE_READABLE,",
          "new_line_content": "        vmThreadedIOCompletedJob, NULL) == AE_ERR)",
          "content_same": false
        },
        {
          "line": 4711,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.cone)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.cone);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 8809,
          "old_api": "oom",
          "new_api": null,
          "old_text": "oom(\"creating file event\")",
          "new_text": null,
          "old_line_content": "        oom(\"creating file event\");",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6761,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.ok);",
          "new_line_content": "    if (server.bgsavechildpid != -1) {",
          "content_same": false
        },
        {
          "line": 6764,
          "old_api": "rdbRemoveTempFile",
          "new_api": null,
          "old_text": "rdbRemoveTempFile(server.bgsavechildpid)",
          "new_text": null,
          "old_line_content": "        rdbRemoveTempFile(server.bgsavechildpid);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6766,
          "old_api": "rdbSave",
          "new_api": null,
          "old_text": "rdbSave(server.dbfilename)",
          "new_text": null,
          "old_line_content": "    rdbSave(server.dbfilename);",
          "new_line_content": "    server.dirty++;",
          "content_same": false
        },
        {
          "line": 4719,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    lobj = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "    if (lobj == NULL) {",
          "content_same": false
        },
        {
          "line": 8816,
          "old_api": "vmFreePage",
          "new_api": null,
          "old_text": "vmFreePage(page)",
          "new_text": null,
          "old_line_content": "    redisAssert(vmFreePage(page) == 1);",
          "new_line_content": "    server.vm_bitmap[byte] |= 1<<bit;",
          "content_same": false
        },
        {
          "line": 4722,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.cone)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.cone);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 6771,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*so))",
          "new_text": null,
          "old_line_content": "    redisSortOperation *so = zmalloc(sizeof(*so));",
          "new_line_content": "    so->type = type;",
          "content_same": false
        },
        {
          "line": 4725,
          "old_api": "createListObject",
          "new_api": null,
          "old_text": "createListObject()",
          "new_text": null,
          "old_line_content": "        lobj = createListObject();",
          "new_line_content": "        list = lobj->ptr;",
          "content_same": false
        },
        {
          "line": 4728,
          "old_api": "listAddNodeHead",
          "new_api": null,
          "old_text": "listAddNodeHead(list,c->argv[2])",
          "new_text": null,
          "old_line_content": "            listAddNodeHead(list,c->argv[2]);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 8825,
          "old_api": "vmMarkPageUsed",
          "new_api": null,
          "old_text": "vmMarkPageUsed(page+j)",
          "new_text": null,
          "old_line_content": "        vmMarkPageUsed(page+j);",
          "new_line_content": "    server.vm_stats_used_pages += count;",
          "content_same": false
        },
        {
          "line": 4730,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(list,c->argv[2])",
          "new_text": null,
          "old_line_content": "            listAddNodeTail(list,c->argv[2]);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 8827,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG,\"Mark USED pages: %lld pages at %lld\\n\",\n        (long long)count, (long long)page)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_DEBUG,\"Mark USED pages: %lld pages at %lld\\n\",",
          "new_line_content": "        (long long)count, (long long)page);",
          "content_same": false
        },
        {
          "line": 4734,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(c->argv[2])",
          "new_text": null,
          "old_line_content": "        incrRefCount(c->argv[2]);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 4737,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 8835,
          "old_api": "vmFreePage",
          "new_api": null,
          "old_text": "vmFreePage(page)",
          "new_text": null,
          "old_line_content": "    redisAssert(vmFreePage(page) == 0);",
          "new_line_content": "    server.vm_bitmap[byte] &= ~(1<<bit);",
          "content_same": false
        },
        {
          "line": 4741,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.cone)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.cone);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 4746,
          "old_api": "listAddNodeHead",
          "new_api": null,
          "old_text": "listAddNodeHead(list,c->argv[2])",
          "new_text": null,
          "old_line_content": "            listAddNodeHead(list,c->argv[2]);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 8844,
          "old_api": "vmMarkPageFree",
          "new_api": null,
          "old_text": "vmMarkPageFree(page+j)",
          "new_text": null,
          "old_line_content": "        vmMarkPageFree(page+j);",
          "new_line_content": "    server.vm_stats_used_pages -= count;",
          "content_same": false
        },
        {
          "line": 4748,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(list,c->argv[2])",
          "new_text": null,
          "old_line_content": "            listAddNodeTail(list,c->argv[2]);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 8846,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG,\"Mark FREE pages: %lld pages at %lld\\n\",\n        (long long)count, (long long)page)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_DEBUG,\"Mark FREE pages: %lld pages at %lld\\n\",",
          "new_line_content": "        (long long)count, (long long)page);",
          "content_same": false
        },
        {
          "line": 4750,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(c->argv[2])",
          "new_text": null,
          "old_line_content": "        incrRefCount(c->argv[2]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6797,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(subst)",
          "new_text": null,
          "old_line_content": "        incrRefCount(subst);",
          "new_line_content": "        return subst;",
          "content_same": false
        },
        {
          "line": 4753,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(list)",
          "new_text": null,
          "old_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\":%d\\r\\n\",listLength(list)));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6804,
          "old_api": "getDecodedObject",
          "new_api": null,
          "old_text": "getDecodedObject(subst)",
          "new_text": null,
          "old_line_content": "    subst = getDecodedObject(subst);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4757,
          "old_api": "pushGenericCommand",
          "new_api": null,
          "old_text": "pushGenericCommand(c,REDIS_HEAD)",
          "new_text": null,
          "old_line_content": "    pushGenericCommand(c,REDIS_HEAD);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6808,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(spat,'*')",
          "new_text": null,
          "old_line_content": "    p = strchr(spat,'*');",
          "new_line_content": "    if (!p) {",
          "content_same": false
        },
        {
          "line": 4761,
          "old_api": "pushGenericCommand",
          "new_api": null,
          "old_text": "pushGenericCommand(c,REDIS_TAIL)",
          "new_text": null,
          "old_line_content": "    pushGenericCommand(c,REDIS_TAIL);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6810,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(subst)",
          "new_text": null,
          "old_line_content": "        decrRefCount(subst);",
          "new_line_content": "        return NULL;",
          "content_same": false
        },
        {
          "line": 6816,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(spat)",
          "new_text": null,
          "old_line_content": "        fieldlen = sdslen(spat)-(f-spat);",
          "new_line_content": "        /* this also copies \\0 character */",
          "content_same": false
        },
        {
          "line": 4769,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_LIST)",
          "new_text": null,
          "old_line_content": "        checkType(c,o,REDIS_LIST)) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6818,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(fieldname.buf,f+2,fieldlen-1)",
          "new_text": null,
          "old_line_content": "        memcpy(fieldname.buf,f+2,fieldlen-1);",
          "new_line_content": "        fieldname.len = fieldlen-2;",
          "content_same": false
        },
        {
          "line": 4772,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(l)",
          "new_text": null,
          "old_line_content": "    addReplyUlong(c,listLength(l));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4777,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "    int index = atoi(c->argv[2]->ptr);",
          "new_line_content": "    list *list;",
          "content_same": false
        },
        {
          "line": 6829,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(keyname.buf+prefixlen+sublen,p+1,postfixlen)",
          "new_text": null,
          "old_line_content": "    memcpy(keyname.buf+prefixlen+sublen,p+1,postfixlen);",
          "new_line_content": "    keyname.buf[prefixlen+sublen+postfixlen] = '\\0';",
          "content_same": false
        },
        {
          "line": 4782,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_LIST)",
          "new_text": null,
          "old_line_content": "        checkType(c,o,REDIS_LIST)) return;",
          "new_line_content": "    list = o->ptr;",
          "content_same": false
        },
        {
          "line": 6832,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(subst)",
          "new_text": null,
          "old_line_content": "    decrRefCount(subst);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4785,
          "old_api": "listIndex",
          "new_api": null,
          "old_text": "listIndex(list, index)",
          "new_text": null,
          "old_line_content": "    ln = listIndex(list, index);",
          "new_line_content": "    if (ln == NULL) {",
          "content_same": false
        },
        {
          "line": 4787,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.nullbulk);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 6836,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(db,&keyobj)",
          "new_text": null,
          "old_line_content": "    o = lookupKeyRead(db,&keyobj);",
          "new_line_content": "    if (o == NULL) return NULL;",
          "content_same": false
        },
        {
          "line": 4790,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,ele)",
          "new_text": null,
          "old_line_content": "        addReplyBulk(c,ele);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4796,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "    int index = atoi(c->argv[2]->ptr);",
          "new_line_content": "    list *list;",
          "content_same": false
        },
        {
          "line": 6845,
          "old_api": "hashGet",
          "new_api": null,
          "old_text": "hashGet(o, &fieldobj)",
          "new_text": null,
          "old_line_content": "        o = hashGet(o, &fieldobj);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 4801,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_LIST)",
          "new_text": null,
          "old_line_content": "        checkType(c,o,REDIS_LIST)) return;",
          "new_line_content": "    list = o->ptr;",
          "content_same": false
        },
        {
          "line": 8898,
          "old_api": "vmFreePage",
          "new_api": null,
          "old_text": "vmFreePage(this)",
          "new_text": null,
          "old_line_content": "        if (vmFreePage(this)) {",
          "new_line_content": "            /* This is a free page */",
          "content_same": false
        },
        {
          "line": 6851,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(o)",
          "new_text": null,
          "old_line_content": "        incrRefCount(o);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4804,
          "old_api": "listIndex",
          "new_api": null,
          "old_text": "listIndex(list, index)",
          "new_text": null,
          "old_line_content": "    ln = listIndex(list, index);",
          "new_line_content": "    if (ln == NULL) {",
          "content_same": false
        },
        {
          "line": 4806,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.outofrangeerr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.outofrangeerr);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 4808,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(ln)",
          "new_text": null,
          "old_line_content": "        robj *ele = listNodeValue(ln);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8905,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG, \"FOUND CONTIGUOUS PAGES: %lld pages at %lld\\n\", (long long) n, (long long) *first)",
          "new_text": null,
          "old_line_content": "                redisLog(REDIS_DEBUG, \"FOUND CONTIGUOUS PAGES: %lld pages at %lld\\n\", (long long) n, (long long) *first);",
          "new_line_content": "                return REDIS_OK;",
          "content_same": false
        },
        {
          "line": 4813,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.ok);",
          "new_line_content": "        server.dirty++;",
          "content_same": false
        },
        {
          "line": 8917,
          "old_api": "random",
          "new_api": null,
          "old_text": "random()",
          "new_text": null,
          "old_line_content": "            offset += random() % REDIS_VM_MAX_RANDOM_JUMP;",
          "new_line_content": "            since_jump = 0;",
          "content_same": false
        },
        {
          "line": 4824,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_LIST)",
          "new_text": null,
          "old_line_content": "        checkType(c,o,REDIS_LIST)) return;",
          "new_line_content": "    list = o->ptr;",
          "content_same": false
        },
        {
          "line": 4828,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(list)",
          "new_text": null,
          "old_line_content": "        ln = listFirst(list);",
          "new_line_content": "    else",
          "content_same": false
        },
        {
          "line": 4830,
          "old_api": "listLast",
          "new_api": null,
          "old_text": "listLast(list)",
          "new_text": null,
          "old_line_content": "        ln = listLast(list);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4833,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.nullbulk);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 4838,
          "old_api": "deleteKey",
          "new_api": null,
          "old_text": "deleteKey(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "        if (listLength(list) == 0) deleteKey(c->db,c->argv[1]);",
          "new_line_content": "        server.dirty++;",
          "content_same": false
        },
        {
          "line": 8935,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\n            \"Critical VM problem in vmWriteObjectOnSwap(): can't seek: %s\",\n            strerror(errno))",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,",
          "new_line_content": "            \"Critical VM problem in vmWriteObjectOnSwap(): can't seek: %s\",",
          "content_same": false
        },
        {
          "line": 6886,
          "old_api": "strcoll",
          "new_api": null,
          "old_text": "strcoll(so1->u.cmpobj->ptr,so2->u.cmpobj->ptr)",
          "new_text": null,
          "old_line_content": "                cmp = strcoll(so1->u.cmpobj->ptr,so2->u.cmpobj->ptr);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 8937,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "            strerror(errno));",
          "new_line_content": "        return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 6890,
          "old_api": "compareStringObjects",
          "new_api": null,
          "old_text": "compareStringObjects(so1->obj,so2->obj)",
          "new_text": null,
          "old_line_content": "            cmp = compareStringObjects(so1->obj,so2->obj);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4844,
          "old_api": "popGenericCommand",
          "new_api": null,
          "old_text": "popGenericCommand(c,REDIS_HEAD)",
          "new_text": null,
          "old_line_content": "    popGenericCommand(c,REDIS_HEAD);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 8942,
          "old_api": "pthread_mutex_unlock",
          "new_api": null,
          "old_text": "pthread_mutex_unlock(&server.io_swapfile_mutex)",
          "new_text": null,
          "old_line_content": "    if (server.vm_enabled) pthread_mutex_unlock(&server.io_swapfile_mutex);",
          "new_line_content": "    return REDIS_OK;",
          "content_same": false
        },
        {
          "line": 4848,
          "old_api": "popGenericCommand",
          "new_api": null,
          "old_text": "popGenericCommand(c,REDIS_TAIL)",
          "new_text": null,
          "old_line_content": "    popGenericCommand(c,REDIS_TAIL);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4854,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[3]->ptr)",
          "new_text": null,
          "old_line_content": "    int end = atoi(c->argv[3]->ptr);",
          "new_line_content": "    int llen;",
          "content_same": false
        },
        {
          "line": 8951,
          "old_api": "rdbSavedObjectPages",
          "new_api": null,
          "old_text": "rdbSavedObjectPages(val,NULL)",
          "new_text": null,
          "old_line_content": "    off_t pages = rdbSavedObjectPages(val,NULL);",
          "new_line_content": "    off_t page;",
          "content_same": false
        },
        {
          "line": 8957,
          "old_api": "vmWriteObjectOnSwap",
          "new_api": null,
          "old_text": "vmWriteObjectOnSwap(val,page)",
          "new_text": null,
          "old_line_content": "    if (vmWriteObjectOnSwap(val,page) == REDIS_ERR) return REDIS_ERR;",
          "new_line_content": "    key->vm.page = page;",
          "content_same": false
        },
        {
          "line": 4862,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_LIST)",
          "new_text": null,
          "old_line_content": "         || checkType(c,o,REDIS_LIST)) return;",
          "new_line_content": "    list = o->ptr;",
          "content_same": false
        },
        {
          "line": 6909,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    sortval = lookupKeyRead(c->db,c->argv[1]);",
          "new_line_content": "    if (sortval == NULL) {",
          "content_same": false
        },
        {
          "line": 4864,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(list)",
          "new_text": null,
          "old_line_content": "    llen = listLength(list);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6911,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.emptymultibulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.emptymultibulk);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 8964,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG,\"VM: object %s swapped out at %lld (%lld pages)\",\n        (unsigned char*) key->ptr,\n        (unsigned long long) page, (unsigned long long) pages)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_DEBUG,\"VM: object %s swapped out at %lld (%lld pages)\",",
          "new_line_content": "        (unsigned char*) key->ptr,",
          "content_same": false
        },
        {
          "line": 6917,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.wrongtypeerr);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 4875,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.emptymultibulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.emptymultibulk);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 6924,
          "old_api": "listSetFreeMethod",
          "new_api": null,
          "old_text": "listSetFreeMethod(operations,zfree)",
          "new_text": null,
          "old_line_content": "    listSetFreeMethod(operations,zfree);",
          "new_line_content": "    j = 2;",
          "content_same": false
        },
        {
          "line": 8977,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\n            \"Unrecoverable VM problem in vmReadObjectFromSwap(): can't seek: %s\",\n            strerror(errno))",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,",
          "new_line_content": "            \"Unrecoverable VM problem in vmReadObjectFromSwap(): can't seek: %s\",",
          "content_same": false
        },
        {
          "line": 6930,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(sortval)",
          "new_text": null,
          "old_line_content": "    incrRefCount(sortval);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4883,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",rangelen));",
          "new_line_content": "    for (j = 0; j < rangelen; j++) {",
          "content_same": false
        },
        {
          "line": 8980,
          "old_api": "_exit",
          "new_api": null,
          "old_text": "_exit(1)",
          "new_text": null,
          "old_line_content": "        _exit(1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 8982,
          "old_api": "rdbLoadObject",
          "new_api": null,
          "old_text": "rdbLoadObject(type,server.vm_fp)",
          "new_text": null,
          "old_line_content": "    o = rdbLoadObject(type,server.vm_fp);",
          "new_line_content": "    if (o == NULL) {",
          "content_same": false
        },
        {
          "line": 4886,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,ele)",
          "new_text": null,
          "old_line_content": "        addReplyBulk(c,ele);",
          "new_line_content": "        ln = ln->next;",
          "content_same": false
        },
        {
          "line": 6935,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"asc\")",
          "new_text": null,
          "old_line_content": "        if (!strcasecmp(c->argv[j]->ptr,\"asc\")) {",
          "new_line_content": "            desc = 0;",
          "content_same": false
        },
        {
          "line": 8985,
          "old_api": "_exit",
          "new_api": null,
          "old_text": "_exit(1)",
          "new_text": null,
          "old_line_content": "        _exit(1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6937,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"desc\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(c->argv[j]->ptr,\"desc\")) {",
          "new_line_content": "            desc = 1;",
          "content_same": false
        },
        {
          "line": 8987,
          "old_api": "pthread_mutex_unlock",
          "new_api": null,
          "old_text": "pthread_mutex_unlock(&server.io_swapfile_mutex)",
          "new_text": null,
          "old_line_content": "    if (server.vm_enabled) pthread_mutex_unlock(&server.io_swapfile_mutex);",
          "new_line_content": "    return o;",
          "content_same": false
        },
        {
          "line": 6939,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"alpha\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(c->argv[j]->ptr,\"alpha\")) {",
          "new_line_content": "            alpha = 1;",
          "content_same": false
        },
        {
          "line": 4894,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[3]->ptr)",
          "new_text": null,
          "old_line_content": "    int end = atoi(c->argv[3]->ptr);",
          "new_line_content": "    int llen;",
          "content_same": false
        },
        {
          "line": 6943,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[j+2]->ptr)",
          "new_text": null,
          "old_line_content": "            limit_count = atoi(c->argv[j+2]->ptr);",
          "new_line_content": "            j+=2;",
          "content_same": false
        },
        {
          "line": 6945,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"store\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(c->argv[j]->ptr,\"store\") && leftargs >= 1) {",
          "new_line_content": "            storekey = c->argv[j+1];",
          "content_same": false
        },
        {
          "line": 6948,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"by\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(c->argv[j]->ptr,\"by\") && leftargs >= 1) {",
          "new_line_content": "            sortby = c->argv[j+1];",
          "content_same": false
        },
        {
          "line": 4901,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_LIST)",
          "new_text": null,
          "old_line_content": "        checkType(c,o,REDIS_LIST)) return;",
          "new_line_content": "    list = o->ptr;",
          "content_same": false
        },
        {
          "line": 4903,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(list)",
          "new_text": null,
          "old_line_content": "    llen = listLength(list);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9000,
          "old_api": "vmReadObjectFromSwap",
          "new_api": null,
          "old_text": "vmReadObjectFromSwap(key->vm.page,key->vtype)",
          "new_text": null,
          "old_line_content": "    val = vmReadObjectFromSwap(key->vm.page,key->vtype);",
          "new_line_content": "    if (!preview) {",
          "content_same": false
        },
        {
          "line": 6952,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(c->argv[j+1]->ptr,'*')",
          "new_text": null,
          "old_line_content": "            if (strchr(c->argv[j+1]->ptr,'*') == NULL) dontsort = 1;",
          "new_line_content": "            j++;",
          "content_same": false
        },
        {
          "line": 6955,
          "old_api": "createSortOperation",
          "new_api": null,
          "old_text": "createSortOperation(\n                REDIS_SORT_GET,c->argv[j+1])",
          "new_text": null,
          "old_line_content": "            listAddNodeTail(operations,createSortOperation(",
          "new_line_content": "                REDIS_SORT_GET,c->argv[j+1]));",
          "content_same": false
        },
        {
          "line": 9005,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG, \"VM: object %s loaded from disk\",\n            (unsigned char*) key->ptr)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_DEBUG, \"VM: object %s loaded from disk\",",
          "new_line_content": "            (unsigned char*) key->ptr);",
          "content_same": false
        },
        {
          "line": 9009,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG, \"VM: object %s previewed from disk\",\n            (unsigned char*) key->ptr)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_DEBUG, \"VM: object %s previewed from disk\",",
          "new_line_content": "            (unsigned char*) key->ptr);",
          "content_same": false
        },
        {
          "line": 6962,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.syntaxerr);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 4925,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(list,ln)",
          "new_text": null,
          "old_line_content": "        listDelNode(list,ln);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 9022,
          "old_api": "vmGenericLoadObject",
          "new_api": null,
          "old_text": "vmGenericLoadObject(key,0)",
          "new_text": null,
          "old_line_content": "    return vmGenericLoadObject(key,0);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6973,
          "old_api": "redisPanic",
          "new_api": null,
          "old_text": "redisPanic(\"Bad SORT type\")",
          "new_text": null,
          "old_line_content": "    default: vectorlen = 0; redisPanic(\"Bad SORT type\"); /* Avoid GCC warning */",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6975,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(redisSortObject)*vectorlen)",
          "new_text": null,
          "old_line_content": "    vector = zmalloc(sizeof(redisSortObject)*vectorlen);",
          "new_line_content": "    j = 0;",
          "content_same": false
        },
        {
          "line": 4929,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(list,ln)",
          "new_text": null,
          "old_line_content": "        listDelNode(list,ln);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4931,
          "old_api": "deleteKey",
          "new_api": null,
          "old_text": "deleteKey(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    if (listLength(list) == 0) deleteKey(c->db,c->argv[1]);",
          "new_line_content": "    server.dirty++;",
          "content_same": false
        },
        {
          "line": 4933,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.ok);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 9030,
          "old_api": "vmGenericLoadObject",
          "new_api": null,
          "old_text": "vmGenericLoadObject(key,1)",
          "new_text": null,
          "old_line_content": "    return vmGenericLoadObject(key,1);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6984,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "        while((ln = listNext(&li))) {",
          "new_line_content": "            robj *ele = ln->value;",
          "content_same": false
        },
        {
          "line": 4940,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "    int toremove = atoi(c->argv[2]->ptr);",
          "new_line_content": "    int removed = 0;",
          "content_same": false
        },
        {
          "line": 4945,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_LIST)",
          "new_text": null,
          "old_line_content": "        checkType(c,o,REDIS_LIST)) return;",
          "new_line_content": "    list = o->ptr;",
          "content_same": false
        },
        {
          "line": 4954,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(ln)",
          "new_text": null,
          "old_line_content": "        robj *ele = listNodeValue(ln);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7005,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(setele)",
          "new_text": null,
          "old_line_content": "            vector[j].obj = dictGetEntryKey(setele);",
          "new_line_content": "            vector[j].u.score = 0;",
          "content_same": false
        },
        {
          "line": 4958,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(list,ln)",
          "new_text": null,
          "old_line_content": "            listDelNode(list,ln);",
          "new_line_content": "            server.dirty++;",
          "content_same": false
        },
        {
          "line": 9058,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(o->ptr)",
          "new_text": null,
          "old_line_content": "            asize = sdslen(o->ptr)+sizeof(*o)+sizeof(long)*2;",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 7010,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "        dictReleaseIterator(di);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7012,
          "old_api": "redisAssert",
          "new_api": null,
          "old_text": "redisAssert(j == vectorlen)",
          "new_text": null,
          "old_line_content": "    redisAssert(j == vectorlen);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4966,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\":%d\\r\\n\",removed));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 9063,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(l)",
          "new_text": null,
          "old_line_content": "        listNode *ln = listFirst(l);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7020,
          "old_api": "lookupKeyByPattern",
          "new_api": null,
          "old_text": "lookupKeyByPattern(c->db,sortby,vector[j].obj)",
          "new_text": null,
          "old_line_content": "                byval = lookupKeyByPattern(c->db,sortby,vector[j].obj);",
          "new_line_content": "                if (!byval) continue;",
          "content_same": false
        },
        {
          "line": 9071,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(ele->ptr)",
          "new_text": null,
          "old_line_content": "                            (sizeof(*o)+sdslen(ele->ptr)) :",
          "new_line_content": "                            sizeof(*o);",
          "content_same": false
        },
        {
          "line": 9073,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(l)",
          "new_text": null,
          "old_line_content": "            asize += (sizeof(listNode)+elesize)*listLength(l);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 7028,
          "old_api": "getDecodedObject",
          "new_api": null,
          "old_text": "getDecodedObject(byval)",
          "new_text": null,
          "old_line_content": "                if (sortby) vector[j].u.cmpobj = getDecodedObject(byval);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 7031,
          "old_api": "strtod",
          "new_api": null,
          "old_text": "strtod(byval->ptr,NULL)",
          "new_text": null,
          "old_line_content": "                    vector[j].u.score = strtod(byval->ptr,NULL);",
          "new_line_content": "                } else if (byval->encoding == REDIS_ENCODING_INT) {",
          "content_same": false
        },
        {
          "line": 9081,
          "old_api": "dictSlots",
          "new_api": null,
          "old_text": "dictSlots(d)",
          "new_text": null,
          "old_line_content": "        asize = sizeof(dict)+(sizeof(struct dictEntry*)*dictSlots(d));",
          "new_line_content": "        if (z) asize += sizeof(zset)-sizeof(dict);",
          "content_same": false
        },
        {
          "line": 9083,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(d)",
          "new_text": null,
          "old_line_content": "        if (dictSize(d)) {",
          "new_line_content": "            long elesize;",
          "content_same": false
        },
        {
          "line": 4990,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,sobj,REDIS_LIST)",
          "new_text": null,
          "old_line_content": "        checkType(c,sobj,REDIS_LIST)) return;",
          "new_line_content": "    srclist = sobj->ptr;",
          "content_same": false
        },
        {
          "line": 7038,
          "old_api": "redisAssert",
          "new_api": null,
          "old_text": "redisAssert(1 != 1)",
          "new_text": null,
          "old_line_content": "                    redisAssert(1 != 1);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 9088,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "            ele = dictGetEntryKey(de);",
          "new_line_content": "            elesize = (ele->encoding == REDIS_ENCODING_RAW) ?",
          "content_same": false
        },
        {
          "line": 4992,
          "old_api": "listLast",
          "new_api": null,
          "old_text": "listLast(srclist)",
          "new_text": null,
          "old_line_content": "    ln = listLast(srclist);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9090,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(ele->ptr)",
          "new_text": null,
          "old_line_content": "                            (sizeof(*o)+sdslen(ele->ptr)) :",
          "new_line_content": "                            sizeof(*o);",
          "content_same": false
        },
        {
          "line": 4995,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.nullbulk);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 9093,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(d)",
          "new_text": null,
          "old_line_content": "            if (z) asize += sizeof(zskiplistNode)*dictSize(d);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4998,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(ln)",
          "new_text": null,
          "old_line_content": "        robj *ele = listNodeValue(ln);",
          "new_line_content": "        list *dstlist;",
          "content_same": false
        },
        {
          "line": 7045,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(byval)",
          "new_text": null,
          "old_line_content": "                decrRefCount(byval);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 5002,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 9099,
          "old_api": "zipmapLen",
          "new_api": null,
          "old_text": "zipmapLen((unsigned char*)o->ptr)",
          "new_text": null,
          "old_line_content": "            unsigned int len = zipmapLen((unsigned char*)o->ptr);",
          "new_line_content": "            unsigned int klen, vlen;",
          "content_same": false
        },
        {
          "line": 9103,
          "old_api": "zipmapNext",
          "new_api": null,
          "old_text": "zipmapNext(p,&key,&klen,&val,&vlen)",
          "new_text": null,
          "old_line_content": "            if ((p = zipmapNext(p,&key,&klen,&val,&vlen)) == NULL) {",
          "new_line_content": "                klen = 0;",
          "content_same": false
        },
        {
          "line": 5008,
          "old_api": "handleClientsWaitingListPush",
          "new_api": null,
          "old_text": "handleClientsWaitingListPush(c,c->argv[2],ele)",
          "new_text": null,
          "old_line_content": "        if (!handleClientsWaitingListPush(c,c->argv[2],ele)) {",
          "new_line_content": "            if (dobj == NULL) {",
          "content_same": false
        },
        {
          "line": 5013,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(c->argv[2])",
          "new_text": null,
          "old_line_content": "                incrRefCount(c->argv[2]);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 9111,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(d)",
          "new_text": null,
          "old_line_content": "            if (dictSize(d)) {",
          "new_line_content": "                long elesize;",
          "content_same": false
        },
        {
          "line": 5017,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(ele)",
          "new_text": null,
          "old_line_content": "            incrRefCount(ele);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 7065,
          "old_api": "pqsort",
          "new_api": null,
          "old_text": "pqsort(vector,vectorlen,sizeof(redisSortObject),sortCompare, start,end)",
          "new_text": null,
          "old_line_content": "            pqsort(vector,vectorlen,sizeof(redisSortObject),sortCompare, start,end);",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 7067,
          "old_api": "qsort",
          "new_api": null,
          "old_text": "qsort(vector,vectorlen,sizeof(redisSortObject),sortCompare)",
          "new_text": null,
          "old_line_content": "            qsort(vector,vectorlen,sizeof(redisSortObject),sortCompare);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 9116,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "                ele = dictGetEntryKey(de);",
          "new_line_content": "                elesize = (ele->encoding == REDIS_ENCODING_RAW) ?",
          "content_same": false
        },
        {
          "line": 5021,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,ele)",
          "new_text": null,
          "old_line_content": "        addReplyBulk(c,ele);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9118,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(ele->ptr)",
          "new_text": null,
          "old_line_content": "                                (sizeof(*o)+sdslen(ele->ptr)) :",
          "new_line_content": "                                sizeof(*o);",
          "content_same": false
        },
        {
          "line": 9120,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "                ele = dictGetEntryVal(de);",
          "new_line_content": "                elesize = (ele->encoding == REDIS_ENCODING_RAW) ?",
          "content_same": false
        },
        {
          "line": 5025,
          "old_api": "deleteKey",
          "new_api": null,
          "old_text": "deleteKey(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "        if (listLength(srclist) == 0) deleteKey(c->db,c->argv[1]);",
          "new_line_content": "        server.dirty++;",
          "content_same": false
        },
        {
          "line": 9122,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(ele->ptr)",
          "new_text": null,
          "old_line_content": "                                (sizeof(*o)+sdslen(ele->ptr)) :",
          "new_line_content": "                                sizeof(*o);",
          "content_same": false
        },
        {
          "line": 7075,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",outputlen));",
          "new_line_content": "        for (j = start; j <= end; j++) {",
          "content_same": false
        },
        {
          "line": 9124,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(d)",
          "new_text": null,
          "old_line_content": "                asize += (sizeof(struct dictEntry)+elesize)*dictSize(d);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 9129,
          "old_api": "log",
          "new_api": null,
          "old_text": "log(1+asize)",
          "new_text": null,
          "old_line_content": "    return (double)age*log(1+asize);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 7082,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "            while((ln = listNext(&li))) {",
          "new_line_content": "                redisSortOperation *sop = ln->value;",
          "content_same": false
        },
        {
          "line": 5035,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    set = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "    if (set == NULL) {",
          "content_same": false
        },
        {
          "line": 7084,
          "old_api": "lookupKeyByPattern",
          "new_api": null,
          "old_text": "lookupKeyByPattern(c->db,sop->pattern,\n                    vector[j].obj)",
          "new_text": null,
          "old_line_content": "                robj *val = lookupKeyByPattern(c->db,sop->pattern,",
          "new_line_content": "                    vector[j].obj);",
          "content_same": false
        },
        {
          "line": 5039,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(c->argv[1])",
          "new_text": null,
          "old_line_content": "        incrRefCount(c->argv[1]);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 7089,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "                        addReply(c,shared.nullbulk);",
          "new_line_content": "                    } else {",
          "content_same": false
        },
        {
          "line": 5042,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 7092,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(val)",
          "new_text": null,
          "old_line_content": "                        decrRefCount(val);",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 5047,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(c->argv[2])",
          "new_text": null,
          "old_line_content": "        incrRefCount(c->argv[2]);",
          "new_line_content": "        server.dirty++;",
          "content_same": false
        },
        {
          "line": 7095,
          "old_api": "redisAssert",
          "new_api": null,
          "old_text": "redisAssert(sop->type == REDIS_SORT_GET)",
          "new_text": null,
          "old_line_content": "                    redisAssert(sop->type == REDIS_SORT_GET); /* always fails */",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 5049,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.cone)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.cone);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 5051,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7100,
          "old_api": "createListObject",
          "new_api": null,
          "old_text": "createListObject()",
          "new_text": null,
          "old_line_content": "        robj *listObject = createListObject();",
          "new_line_content": "        list *listPtr = (list*) listObject->ptr;",
          "content_same": false
        },
        {
          "line": 9152,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(db->dict)",
          "new_text": null,
          "old_line_content": "        if (dictSize(db->dict) == 0) continue;",
          "new_line_content": "        for (i = 0; i < 5; i++) {",
          "content_same": false
        },
        {
          "line": 5059,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,set,REDIS_SET)",
          "new_text": null,
          "old_line_content": "        checkType(c,set,REDIS_SET)) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5061,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(set->ptr,c->argv[2])",
          "new_text": null,
          "old_line_content": "    if (dictDelete(set->ptr,c->argv[2]) == DICT_OK) {",
          "new_line_content": "        server.dirty++;",
          "content_same": false
        },
        {
          "line": 7110,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(vector[j].obj)",
          "new_text": null,
          "old_line_content": "                incrRefCount(vector[j].obj);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 9160,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "            val = dictGetEntryVal(de);",
          "new_line_content": "            /* Only swap objects that are currently in memory.",
          "content_same": false
        },
        {
          "line": 5065,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.cone)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.cone);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 7113,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "            while((ln = listNext(&li))) {",
          "new_line_content": "                redisSortOperation *sop = ln->value;",
          "content_same": false
        },
        {
          "line": 5067,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7115,
          "old_api": "lookupKeyByPattern",
          "new_api": null,
          "old_text": "lookupKeyByPattern(c->db,sop->pattern,\n                    vector[j].obj)",
          "new_text": null,
          "old_line_content": "                robj *val = lookupKeyByPattern(c->db,sop->pattern,",
          "new_line_content": "                    vector[j].obj);",
          "content_same": false
        },
        {
          "line": 7120,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject(\"\",0)",
          "new_text": null,
          "old_line_content": "                        listAddNodeTail(listPtr,createStringObject(\"\",0));",
          "new_line_content": "                    } else {",
          "content_same": false
        },
        {
          "line": 5075,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[2])",
          "new_text": null,
          "old_line_content": "    dstset = lookupKeyWrite(c->db,c->argv[2]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9172,
          "old_api": "computeObjectSwappability",
          "new_api": null,
          "old_text": "computeObjectSwappability(val)",
          "new_text": null,
          "old_line_content": "            swappability = computeObjectSwappability(val);",
          "new_line_content": "            if (!best || swappability > best_swappability) {",
          "content_same": false
        },
        {
          "line": 7126,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(listPtr,val)",
          "new_text": null,
          "old_line_content": "                        listAddNodeTail(listPtr,val);",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 5080,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, srcset ? shared.wrongtypeerr : shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c, srcset ? shared.wrongtypeerr : shared.czero);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 7129,
          "old_api": "redisAssert",
          "new_api": null,
          "old_text": "redisAssert(sop->type == REDIS_SORT_GET)",
          "new_text": null,
          "old_line_content": "                    redisAssert(sop->type == REDIS_SORT_GET); /* always fails */",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 5085,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.wrongtypeerr);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 9182,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(best)",
          "new_text": null,
          "old_line_content": "    val = dictGetEntryVal(best);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7134,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(storekey)",
          "new_text": null,
          "old_line_content": "            incrRefCount(storekey);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 9184,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG,\"Key with best swappability: %s, %f\",\n        key->ptr, best_swappability)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_DEBUG,\"Key with best swappability: %s, %f\",",
          "new_line_content": "        key->ptr, best_swappability);",
          "content_same": false
        },
        {
          "line": 5089,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(srcset->ptr,c->argv[3])",
          "new_text": null,
          "old_line_content": "    if (dictDelete(srcset->ptr,c->argv[3]) == DICT_ERR) {",
          "new_line_content": "        /* Key not found in the src set! return zero */",
          "content_same": false
        },
        {
          "line": 5091,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 7140,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),\":%d\\r\\n\",outputlen));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 9191,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(best)",
          "new_text": null,
          "old_line_content": "        key = dictGetEntryKey(best) = newkey;",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5095,
          "old_api": "deleteKey",
          "new_api": null,
          "old_text": "deleteKey(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "        deleteKey(c->db,c->argv[1]);",
          "new_line_content": "    server.dirty++;",
          "content_same": false
        },
        {
          "line": 7145,
          "old_api": "listRelease",
          "new_api": null,
          "old_text": "listRelease(operations)",
          "new_text": null,
          "old_line_content": "    listRelease(operations);",
          "new_line_content": "    for (j = 0; j < vectorlen; j++) {",
          "content_same": false
        },
        {
          "line": 9195,
          "old_api": "vmSwapObjectThreaded",
          "new_api": null,
          "old_text": "vmSwapObjectThreaded(key,val,best_db)",
          "new_text": null,
          "old_line_content": "        vmSwapObjectThreaded(key,val,best_db);",
          "new_line_content": "        return REDIS_OK;",
          "content_same": false
        },
        {
          "line": 7148,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(vector[j].u.cmpobj)",
          "new_text": null,
          "old_line_content": "            decrRefCount(vector[j].u.cmpobj);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5101,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(c->argv[2])",
          "new_text": null,
          "old_line_content": "        incrRefCount(c->argv[2]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7150,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(vector)",
          "new_text": null,
          "old_line_content": "    zfree(vector);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 9199,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(best)",
          "new_text": null,
          "old_line_content": "            dictGetEntryVal(best) = NULL;",
          "new_line_content": "            return REDIS_OK;",
          "content_same": false
        },
        {
          "line": 5105,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.cone)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.cone);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 9208,
          "old_api": "vmSwapOneObject",
          "new_api": null,
          "old_text": "vmSwapOneObject(0)",
          "new_text": null,
          "old_line_content": "    return vmSwapOneObject(0);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5112,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,set,REDIS_SET)",
          "new_text": null,
          "old_line_content": "        checkType(c,set,REDIS_SET)) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7160,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(s,\"%lluB\",n)",
          "new_text": null,
          "old_line_content": "        sprintf(s,\"%lluB\",n);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 5115,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.cone)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.cone);",
          "new_line_content": "    else",
          "content_same": false
        },
        {
          "line": 9212,
          "old_api": "vmSwapOneObject",
          "new_api": null,
          "old_text": "vmSwapOneObject(1)",
          "new_text": null,
          "old_line_content": "    return vmSwapOneObject(1);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5117,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 7164,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(s,\"%.2fK\",d)",
          "new_text": null,
          "old_line_content": "        sprintf(s,\"%.2fK\",d);",
          "new_line_content": "    } else if (n < (1024LL*1024*1024)) {",
          "content_same": false
        },
        {
          "line": 7167,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(s,\"%.2fM\",d)",
          "new_text": null,
          "old_line_content": "        sprintf(s,\"%.2fM\",d);",
          "new_line_content": "    } else if (n < (1024LL*1024*1024*1024)) {",
          "content_same": false
        },
        {
          "line": 7170,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(s,\"%.2fG\",d)",
          "new_text": null,
          "old_line_content": "        sprintf(s,\"%.2fG\",d);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5125,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_SET)",
          "new_text": null,
          "old_line_content": "        checkType(c,o,REDIS_SET)) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5128,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(s)",
          "new_text": null,
          "old_line_content": "    addReplyUlong(c,dictSize(s));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 7179,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    time_t uptime = time(NULL)-server.stat_starttime;",
          "new_line_content": "    int j;",
          "content_same": false
        },
        {
          "line": 9229,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "    foundkey = dictGetEntryKey(de);",
          "new_line_content": "    if (foundkey->storage == REDIS_VM_MEMORY) return 0;",
          "content_same": false
        },
        {
          "line": 9231,
          "old_api": "deleteKey",
          "new_api": null,
          "old_text": "deleteKey(db,key)",
          "new_text": null,
          "old_line_content": "    deleteKey(db,key);",
          "new_line_content": "    return 1;",
          "content_same": false
        },
        {
          "line": 5136,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,set,REDIS_SET)",
          "new_text": null,
          "old_line_content": "        checkType(c,set,REDIS_SET)) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7184,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    info = sdscatprintf(sdsempty(),",
          "new_line_content": "        \"redis_version:%s\\r\\n\"",
          "content_same": false
        },
        {
          "line": 5138,
          "old_api": "dictGetRandomKey",
          "new_api": null,
          "old_text": "dictGetRandomKey(set->ptr)",
          "new_text": null,
          "old_line_content": "    de = dictGetRandomKey(set->ptr);",
          "new_line_content": "    if (de == NULL) {",
          "content_same": false
        },
        {
          "line": 5140,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.nullbulk);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 5142,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "        robj *ele = dictGetEntryKey(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9241,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(j->val)",
          "new_text": null,
          "old_line_content": "        decrRefCount(j->val);",
          "new_line_content": "    /* We don't decrRefCount the j->key field as we did't incremented",
          "content_same": false
        },
        {
          "line": 5147,
          "old_api": "deleteKey",
          "new_api": null,
          "old_text": "deleteKey(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "        if (dictSize((dict*)set->ptr) == 0) deleteKey(c->db,c->argv[1]);",
          "new_line_content": "        server.dirty++;",
          "content_same": false
        },
        {
          "line": 9246,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(j)",
          "new_text": null,
          "old_line_content": "    zfree(j);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5157,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,set,REDIS_SET)",
          "new_text": null,
          "old_line_content": "        checkType(c,set,REDIS_SET)) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5159,
          "old_api": "dictGetRandomKey",
          "new_api": null,
          "old_text": "dictGetRandomKey(set->ptr)",
          "new_text": null,
          "old_line_content": "    de = dictGetRandomKey(set->ptr);",
          "new_line_content": "    if (de == NULL) {",
          "content_same": false
        },
        {
          "line": 5161,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.nullbulk);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 9259,
          "old_api": "REDIS_NOTUSED",
          "new_api": null,
          "old_text": "REDIS_NOTUSED(privdata)",
          "new_text": null,
          "old_line_content": "    REDIS_NOTUSED(privdata);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5163,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "        robj *ele = dictGetEntryKey(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5165,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,ele)",
          "new_text": null,
          "old_line_content": "        addReplyBulk(c,ele);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7212,
          "old_api": "getpid",
          "new_api": null,
          "old_text": "getpid()",
          "new_text": null,
          "old_line_content": "        (long) getpid(),",
          "new_line_content": "        uptime,",
          "content_same": false
        },
        {
          "line": 9263,
          "old_api": "read",
          "new_api": null,
          "old_text": "read(fd,buf,1)",
          "new_text": null,
          "old_line_content": "    while((retval = read(fd,buf,1)) == 1) {",
          "new_line_content": "        iojob *j;",
          "content_same": false
        },
        {
          "line": 7216,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.slaves)",
          "new_text": null,
          "old_line_content": "        listLength(server.slaves),",
          "new_line_content": "        server.blpop_blocked_clients,",
          "content_same": false
        },
        {
          "line": 7218,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "        zmalloc_used_memory(),",
          "new_line_content": "        hmem,",
          "content_same": false
        },
        {
          "line": 5172,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(*d2)",
          "new_text": null,
          "old_line_content": "    return dictSize(*d1)-dictSize(*d2);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 9269,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG,\"Processing I/O completed job\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_DEBUG,\"Processing I/O completed job\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5176,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(dict*)*setsnum)",
          "new_text": null,
          "old_line_content": "    dict **dv = zmalloc(sizeof(dict*)*setsnum);",
          "new_line_content": "    dictIterator *di;",
          "content_same": false
        },
        {
          "line": 9273,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.io_processed)",
          "new_text": null,
          "old_line_content": "        assert(listLength(server.io_processed) != 0);",
          "new_line_content": "        if (toprocess == -1) {",
          "content_same": false
        },
        {
          "line": 9275,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.io_processed)",
          "new_text": null,
          "old_line_content": "            toprocess = (listLength(server.io_processed)*REDIS_MAX_COMPLETED_JOBS_PROCESSED)/100;",
          "new_line_content": "            if (toprocess <= 0) toprocess = 1;",
          "content_same": false
        },
        {
          "line": 9278,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(server.io_processed)",
          "new_text": null,
          "old_line_content": "        ln = listFirst(server.io_processed);",
          "new_line_content": "        j = ln->value;",
          "content_same": false
        },
        {
          "line": 7230,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.pubsub_patterns)",
          "new_text": null,
          "old_line_content": "        listLength(server.pubsub_patterns),",
          "new_line_content": "        server.vm_enabled != 0,",
          "content_same": false
        },
        {
          "line": 9281,
          "old_api": "unlockThreadedIO",
          "new_api": null,
          "old_text": "unlockThreadedIO()",
          "new_text": null,
          "old_line_content": "        unlockThreadedIO();",
          "new_line_content": "        /* If this job is marked as canceled, just ignore it */",
          "content_same": false
        },
        {
          "line": 5187,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,setskeys[j])",
          "new_text": null,
          "old_line_content": "                    lookupKeyRead(c->db,setskeys[j]);",
          "new_line_content": "        if (!setobj) {",
          "content_same": false
        },
        {
          "line": 9284,
          "old_api": "freeIOJob",
          "new_api": null,
          "old_text": "freeIOJob(j)",
          "new_text": null,
          "old_line_content": "            freeIOJob(j);",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 5189,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(dv)",
          "new_text": null,
          "old_line_content": "            zfree(dv);",
          "new_line_content": "            if (dstkey) {",
          "content_same": false
        },
        {
          "line": 7235,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n            \"master_host:%s\\r\\n\"\n            \"master_port:%d\\r\\n\"\n            \"master_link_status:%s\\r\\n\"\n            \"master_last_io_seconds_ago:%d\\r\\n\"\n            ,server.masterhost,\n            server.masterport,\n            (server.replstate == REDIS_REPL_CONNECTED) ?\n                \"up\" : \"down\",\n            server.master ? ((int)(time(NULL)-server.master->lastinteraction)) : -1\n        )",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "            \"master_host:%s\\r\\n\"",
          "content_same": false
        },
        {
          "line": 5191,
          "old_api": "deleteKey",
          "new_api": null,
          "old_text": "deleteKey(c->db,dstkey)",
          "new_text": null,
          "old_line_content": "                if (deleteKey(c->db,dstkey))",
          "new_line_content": "                    server.dirty++;",
          "content_same": false
        },
        {
          "line": 5193,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "                addReply(c,shared.czero);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 5195,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.emptymultibulk)",
          "new_text": null,
          "old_line_content": "                addReply(c,shared.emptymultibulk);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 9292,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "        key = dictGetEntryKey(de);",
          "new_line_content": "        if (j->type == REDIS_IOJOB_LOAD) {",
          "content_same": false
        },
        {
          "line": 7244,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "            server.master ? ((int)(time(NULL)-server.master->lastinteraction)) : -1",
          "new_line_content": "        );",
          "content_same": false
        },
        {
          "line": 5201,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 7249,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n            \"vm_conf_max_memory:%llu\\r\\n\"\n            \"vm_conf_page_size:%llu\\r\\n\"\n            \"vm_conf_pages:%llu\\r\\n\"\n            \"vm_stats_used_pages:%llu\\r\\n\"\n            \"vm_stats_swapped_objects:%llu\\r\\n\"\n            \"vm_stats_swappin_count:%llu\\r\\n\"\n            \"vm_stats_swappout_count:%llu\\r\\n\"\n            \"vm_stats_io_newjobs_len:%lu\\r\\n\"\n            \"vm_stats_io_processing_len:%lu\\r\\n\"\n            \"vm_stats_io_processed_len:%lu\\r\\n\"\n            \"vm_stats_io_active_threads:%lu\\r\\n\"\n            \"vm_stats_blocked_clients:%lu\\r\\n\"\n            ,(unsigned long long) server.vm_max_memory,\n            (unsigned long long) server.vm_page_size,\n            (unsigned long long) server.vm_pages,\n            (unsigned long long) server.vm_stats_used_pages,\n            (unsigned long long) server.vm_stats_swapped_objects,\n            (unsigned long long) server.vm_stats_swapins,\n            (unsigned long long) server.vm_stats_swapouts,\n            (unsigned long) listLength(server.io_newjobs),\n            (unsigned long) listLength(server.io_processing),\n            (unsigned long) listLength(server.io_processed),\n            (unsigned long) server.io_active_threads,\n            (unsigned long) server.vm_blocked_clients\n        )",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "            \"vm_conf_max_memory:%llu\\r\\n\"",
          "content_same": false
        },
        {
          "line": 9300,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG, \"VM: object %s loaded from disk (threaded)\",\n                (unsigned char*) key->ptr)",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_DEBUG, \"VM: object %s loaded from disk (threaded)\",",
          "new_line_content": "                (unsigned char*) key->ptr);",
          "content_same": false
        },
        {
          "line": 5208,
          "old_api": "qsort",
          "new_api": null,
          "old_text": "qsort(dv,setsnum,sizeof(dict*),qsortCompareSetsByCardinality)",
          "new_text": null,
          "old_line_content": "    qsort(dv,setsnum,sizeof(dict*),qsortCompareSetsByCardinality);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9305,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(j->val)",
          "new_text": null,
          "old_line_content": "            incrRefCount(j->val);",
          "new_line_content": "            db = j->db;",
          "content_same": false
        },
        {
          "line": 9307,
          "old_api": "freeIOJob",
          "new_api": null,
          "old_text": "freeIOJob(j)",
          "new_text": null,
          "old_line_content": "            freeIOJob(j);",
          "new_line_content": "            /* Handle clients waiting for this key to be loaded. */",
          "content_same": false
        },
        {
          "line": 9309,
          "old_api": "handleClientsBlockedOnSwappedKey",
          "new_api": null,
          "old_text": "handleClientsBlockedOnSwappedKey(db,key)",
          "new_text": null,
          "old_line_content": "            handleClientsBlockedOnSwappedKey(db,key);",
          "new_line_content": "        } else if (j->type == REDIS_IOJOB_PREPARE_SWAP) {",
          "content_same": false
        },
        {
          "line": 5218,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(lenobj)",
          "new_text": null,
          "old_line_content": "        decrRefCount(lenobj);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 9315,
          "old_api": "vmFindContiguousPages",
          "new_api": null,
          "old_text": "vmFindContiguousPages(&j->page,j->pages)",
          "new_text": null,
          "old_line_content": "                vmFindContiguousPages(&j->page,j->pages) == REDIS_ERR)",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 5222,
          "old_api": "createSetObject",
          "new_api": null,
          "old_text": "createSetObject()",
          "new_text": null,
          "old_line_content": "        dstset = createSetObject();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 9319,
          "old_api": "freeIOJob",
          "new_api": null,
          "old_text": "freeIOJob(j)",
          "new_text": null,
          "old_line_content": "                freeIOJob(j);",
          "new_line_content": "                key->storage = REDIS_VM_MEMORY; /* undo operation */",
          "content_same": false
        },
        {
          "line": 7271,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.io_processed)",
          "new_text": null,
          "old_line_content": "            (unsigned long) listLength(server.io_processed),",
          "new_line_content": "            (unsigned long) server.io_active_threads,",
          "content_same": false
        },
        {
          "line": 7275,
          "old_api": "unlockThreadedIO",
          "new_api": null,
          "old_text": "unlockThreadedIO()",
          "new_text": null,
          "old_line_content": "        unlockThreadedIO();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5228,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(dv[0])",
          "new_text": null,
          "old_line_content": "    di = dictGetIterator(dv[0]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9325,
          "old_api": "vmMarkPagesUsed",
          "new_api": null,
          "old_text": "vmMarkPagesUsed(j->page,j->pages)",
          "new_text": null,
          "old_line_content": "                vmMarkPagesUsed(j->page,j->pages);",
          "new_line_content": "                j->type = REDIS_IOJOB_DO_SWAP;",
          "content_same": false
        },
        {
          "line": 5230,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "    while((de = dictNext(di)) != NULL) {",
          "new_line_content": "        robj *ele;",
          "content_same": false
        },
        {
          "line": 9329,
          "old_api": "unlockThreadedIO",
          "new_api": null,
          "old_text": "unlockThreadedIO()",
          "new_text": null,
          "old_line_content": "                unlockThreadedIO();",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 5234,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "            if (dictFind(dv[j],dictGetEntryKey(de)) == NULL) break;",
          "new_line_content": "        if (j != setsnum)",
          "content_same": false
        },
        {
          "line": 7281,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.db[j].expires)",
          "new_text": null,
          "old_line_content": "        vkeys = dictSize(server.db[j].expires);",
          "new_line_content": "        if (keys || vkeys) {",
          "content_same": false
        },
        {
          "line": 7283,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info, \"db%d:keys=%lld,expires=%lld\\r\\n\",\n                j, keys, vkeys)",
          "new_text": null,
          "old_line_content": "            info = sdscatprintf(info, \"db%d:keys=%lld,expires=%lld\\r\\n\",",
          "new_line_content": "                j, keys, vkeys);",
          "content_same": false
        },
        {
          "line": 5237,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "        ele = dictGetEntryKey(de);",
          "new_line_content": "        if (!dstkey) {",
          "content_same": false
        },
        {
          "line": 5239,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,ele)",
          "new_text": null,
          "old_line_content": "            addReplyBulk(c,ele);",
          "new_line_content": "            cardinality++;",
          "content_same": false
        },
        {
          "line": 5243,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(ele)",
          "new_text": null,
          "old_line_content": "            incrRefCount(ele);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 9341,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"val->ptr: %s\\n\",(char*)j->val->ptr)",
          "new_text": null,
          "old_line_content": "                printf(\"val->ptr: %s\\n\",(char*)j->val->ptr);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 5246,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7295,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.crlf)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.crlf);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 9344,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "            val = dictGetEntryVal(de);",
          "new_line_content": "            key->vm.page = j->page;",
          "content_same": false
        },
        {
          "line": 9351,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG,\n                \"VM: object %s swapped out at %lld (%lld pages) (threaded)\",\n                (unsigned char*) key->ptr,\n                (unsigned long long) j->page, (unsigned long long) j->pages)",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_DEBUG,",
          "new_line_content": "                \"VM: object %s swapped out at %lld (%lld pages) (threaded)\",",
          "content_same": false
        },
        {
          "line": 5255,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize((dict*)dstset->ptr)",
          "new_text": null,
          "old_line_content": "            addReplyLong(c,dictSize((dict*)dstset->ptr));",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 7305,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.ok);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5258,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.czero);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 9357,
          "old_api": "freeIOJob",
          "new_api": null,
          "old_text": "freeIOJob(j)",
          "new_text": null,
          "old_line_content": "            freeIOJob(j);",
          "new_line_content": "            /* Put a few more swap requests in queue if we are still",
          "content_same": false
        },
        {
          "line": 5262,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        lenobj->ptr = sdscatprintf(sdsempty(),\"*%lu\\r\\n\",cardinality);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7310,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(db->expires,key)",
          "new_text": null,
          "old_line_content": "    if (dictDelete(db->expires,key) == DICT_OK) {",
          "new_line_content": "        return 1;",
          "content_same": false
        },
        {
          "line": 5264,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(dv)",
          "new_text": null,
          "old_line_content": "    zfree(dv);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 9361,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "                zmalloc_used_memory() > server.vm_max_memory)",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 5268,
          "old_api": "sinterGenericCommand",
          "new_api": null,
          "old_text": "sinterGenericCommand(c,c->argv+1,c->argc-1,NULL)",
          "new_text": null,
          "old_line_content": "    sinterGenericCommand(c,c->argv+1,c->argc-1,NULL);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 9366,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.io_newjobs)",
          "new_text": null,
          "old_line_content": "                    more = listLength(server.io_newjobs) <",
          "new_line_content": "                            (unsigned) server.vm_max_threads;",
          "content_same": false
        },
        {
          "line": 7318,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(db->expires,key,(void*)when)",
          "new_text": null,
          "old_line_content": "    if (dictAdd(db->expires,key,(void*)when) == DICT_ERR) {",
          "new_line_content": "        return 0;",
          "content_same": false
        },
        {
          "line": 9368,
          "old_api": "unlockThreadedIO",
          "new_api": null,
          "old_text": "unlockThreadedIO()",
          "new_text": null,
          "old_line_content": "                    unlockThreadedIO();",
          "new_line_content": "                    /* Don't waste CPU time if swappable objects are rare. */",
          "content_same": false
        },
        {
          "line": 5272,
          "old_api": "sinterGenericCommand",
          "new_api": null,
          "old_text": "sinterGenericCommand(c,c->argv+2,c->argc-2,c->argv[1])",
          "new_text": null,
          "old_line_content": "    sinterGenericCommand(c,c->argv+2,c->argc-2,c->argv[1]);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 9370,
          "old_api": "vmSwapOneObjectThreaded",
          "new_api": null,
          "old_text": "vmSwapOneObjectThreaded()",
          "new_text": null,
          "old_line_content": "                    if (vmSwapOneObjectThreaded() == REDIS_ERR) {",
          "new_line_content": "                        trytoswap = 0;",
          "content_same": false
        },
        {
          "line": 7321,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(key)",
          "new_text": null,
          "old_line_content": "        incrRefCount(key);",
          "new_line_content": "        return 1;",
          "content_same": false
        },
        {
          "line": 5280,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(dict*)*setsnum)",
          "new_text": null,
          "old_line_content": "    dict **dv = zmalloc(sizeof(dict*)*setsnum);",
          "new_line_content": "    dictIterator *di;",
          "content_same": false
        },
        {
          "line": 9381,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\n            \"WARNING: read(2) error in vmThreadedIOCompletedJob() %s\",\n            strerror(errno))",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,",
          "new_line_content": "            \"WARNING: read(2) error in vmThreadedIOCompletedJob() %s\",",
          "content_same": false
        },
        {
          "line": 7333,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(db->expires,key)",
          "new_text": null,
          "old_line_content": "       (de = dictFind(db->expires,key)) == NULL) return -1;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9383,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "            strerror(errno));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7335,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "    return (time_t) dictGetEntryVal(de);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5291,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,setskeys[j])",
          "new_text": null,
          "old_line_content": "                    lookupKeyRead(c->db,setskeys[j]);",
          "new_line_content": "        if (!setobj) {",
          "content_same": false
        },
        {
          "line": 9388,
          "old_api": "pthread_mutex_lock",
          "new_api": null,
          "old_text": "pthread_mutex_lock(&server.io_mutex)",
          "new_text": null,
          "old_line_content": "    pthread_mutex_lock(&server.io_mutex);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 9392,
          "old_api": "pthread_mutex_unlock",
          "new_api": null,
          "old_text": "pthread_mutex_unlock(&server.io_mutex)",
          "new_text": null,
          "old_line_content": "    pthread_mutex_unlock(&server.io_mutex);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 7344,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(db->expires,key)",
          "new_text": null,
          "old_line_content": "       (de = dictFind(db->expires,key)) == NULL) return 0;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5298,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 7348,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    if (time(NULL) <= when) return 0;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7351,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(db->expires,key)",
          "new_text": null,
          "old_line_content": "    dictDelete(db->expires,key);",
          "new_line_content": "    server.stat_expiredkeys++;",
          "content_same": false
        },
        {
          "line": 7353,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(db->dict,key)",
          "new_text": null,
          "old_line_content": "    return dictDelete(db->dict,key) == DICT_OK;",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5307,
          "old_api": "createSetObject",
          "new_api": null,
          "old_text": "createSetObject()",
          "new_text": null,
          "old_line_content": "    dstset = createSetObject();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9405,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(o->storage == REDIS_VM_LOADING || o->storage == REDIS_VM_SWAPPING)",
          "new_text": null,
          "old_line_content": "    assert(o->storage == REDIS_VM_LOADING || o->storage == REDIS_VM_SWAPPING);",
          "new_line_content": "again:",
          "content_same": false
        },
        {
          "line": 9407,
          "old_api": "lockThreadedIO",
          "new_api": null,
          "old_text": "lockThreadedIO()",
          "new_text": null,
          "old_line_content": "    lockThreadedIO();",
          "new_line_content": "    /* Search for a matching key in one of the queues */",
          "content_same": false
        },
        {
          "line": 7361,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(db->expires,key)",
          "new_text": null,
          "old_line_content": "       (de = dictFind(db->expires,key)) == NULL) return 0;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5315,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(dv[j])",
          "new_text": null,
          "old_line_content": "        di = dictGetIterator(dv[j]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5317,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "        while((de = dictNext(di)) != NULL) {",
          "new_line_content": "            robj *ele;",
          "content_same": false
        },
        {
          "line": 9414,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "        while ((ln = listNext(&li)) != NULL) {",
          "new_line_content": "            iojob *job = ln->value;",
          "content_same": false
        },
        {
          "line": 7367,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(db->dict,key)",
          "new_text": null,
          "old_line_content": "    return dictDelete(db->dict,key) == DICT_OK;",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5321,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "            ele = dictGetEntryKey(de);",
          "new_line_content": "            if (op == REDIS_OP_UNION || j == 0) {",
          "content_same": false
        },
        {
          "line": 9419,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG,\"*** CANCELED %p (%s) (type %d) (LIST ID %d)\\n\",\n                    (void*)job, (char*)o->ptr, job->type, i)",
          "new_text": null,
          "old_line_content": "                redisLog(REDIS_DEBUG,\"*** CANCELED %p (%s) (type %d) (LIST ID %d)\\n\",",
          "new_line_content": "                    (void*)job, (char*)o->ptr, job->type, i);",
          "content_same": false
        },
        {
          "line": 5324,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(ele)",
          "new_text": null,
          "old_line_content": "                    incrRefCount(ele);",
          "new_line_content": "                    cardinality++;",
          "content_same": false
        },
        {
          "line": 7374,
          "old_api": "getLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongFromObjectOrReply(c, param, &seconds, NULL)",
          "new_text": null,
          "old_line_content": "    if (getLongFromObjectOrReply(c, param, &seconds, NULL) != REDIS_OK) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9424,
          "old_api": "vmMarkPagesFree",
          "new_api": null,
          "old_text": "vmMarkPagesFree(job->page,job->pages)",
          "new_text": null,
          "old_line_content": "                    vmMarkPagesFree(job->page,job->pages);",
          "new_line_content": "                /* Cancel the job. It depends on the list the job is",
          "content_same": false
        },
        {
          "line": 5328,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(dstset->ptr,ele)",
          "new_text": null,
          "old_line_content": "                if (dictDelete(dstset->ptr,ele) == DICT_OK) {",
          "new_line_content": "                    cardinality--;",
          "content_same": false
        },
        {
          "line": 7378,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(c->db->dict,key)",
          "new_text": null,
          "old_line_content": "    de = dictFind(c->db->dict,key);",
          "new_line_content": "    if (de == NULL) {",
          "content_same": false
        },
        {
          "line": 7380,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 5333,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "        dictReleaseIterator(di);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9432,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(lists[i],ln)",
          "new_text": null,
          "old_line_content": "                    listDelNode(lists[i],ln);",
          "new_line_content": "                    break;",
          "content_same": false
        },
        {
          "line": 7385,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.cone)",
          "new_text": null,
          "old_line_content": "        addReply(c, shared.cone);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 7390,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.cone)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.cone);",
          "new_line_content": "            server.dirty++;",
          "content_same": false
        },
        {
          "line": 5343,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "        while((de = dictNext(di)) != NULL) {",
          "new_line_content": "            robj *ele;",
          "content_same": false
        },
        {
          "line": 7393,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.czero);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5347,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,ele)",
          "new_text": null,
          "old_line_content": "            addReplyBulk(c,ele);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5350,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(dstset)",
          "new_text": null,
          "old_line_content": "        decrRefCount(dstset);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 9448,
          "old_api": "unlockThreadedIO",
          "new_api": null,
          "old_text": "unlockThreadedIO()",
          "new_text": null,
          "old_line_content": "                    unlockThreadedIO();",
          "new_line_content": "                    /* But let's wait some time for the I/O thread",
          "content_same": false
        },
        {
          "line": 7400,
          "old_api": "expireGenericCommand",
          "new_api": null,
          "old_text": "expireGenericCommand(c,c->argv[1],c->argv[2],0)",
          "new_text": null,
          "old_line_content": "    expireGenericCommand(c,c->argv[1],c->argv[2],0);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 9452,
          "old_api": "usleep",
          "new_api": null,
          "old_text": "usleep(1)",
          "new_text": null,
          "old_line_content": "                    usleep(1);",
          "new_line_content": "                    goto again;",
          "content_same": false
        },
        {
          "line": 7404,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    expireGenericCommand(c,c->argv[1],c->argv[2],time(NULL));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5358,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize((dict*)dstset->ptr)",
          "new_text": null,
          "old_line_content": "            addReplyLong(c,dictSize((dict*)dstset->ptr));",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 5361,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.czero);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 7411,
          "old_api": "getExpire",
          "new_api": null,
          "old_text": "getExpire(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    expire = getExpire(c->db,c->argv[1]);",
          "new_line_content": "    if (expire != -1) {",
          "content_same": false
        },
        {
          "line": 5365,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(dv)",
          "new_text": null,
          "old_line_content": "    zfree(dv);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 7413,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "        ttl = (int) (expire-time(NULL));",
          "new_line_content": "        if (ttl < 0) ttl = -1;",
          "content_same": false
        },
        {
          "line": 7416,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\":%d\\r\\n\",ttl));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5369,
          "old_api": "sunionDiffGenericCommand",
          "new_api": null,
          "old_text": "sunionDiffGenericCommand(c,c->argv+1,c->argc-1,NULL,REDIS_OP_UNION)",
          "new_text": null,
          "old_line_content": "    sunionDiffGenericCommand(c,c->argv+1,c->argc-1,NULL,REDIS_OP_UNION);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 9467,
          "old_api": "unlockThreadedIO",
          "new_api": null,
          "old_text": "unlockThreadedIO()",
          "new_text": null,
          "old_line_content": "                unlockThreadedIO();",
          "new_line_content": "                return;",
          "content_same": false
        },
        {
          "line": 5373,
          "old_api": "sunionDiffGenericCommand",
          "new_api": null,
          "old_text": "sunionDiffGenericCommand(c,c->argv+2,c->argc-2,c->argv[1],REDIS_OP_UNION)",
          "new_text": null,
          "old_line_content": "    sunionDiffGenericCommand(c,c->argv+2,c->argc-2,c->argv[1],REDIS_OP_UNION);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 9473,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(1 != 1)",
          "new_text": null,
          "old_line_content": "    assert(1 != 1); /* We should never reach this */",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5377,
          "old_api": "sunionDiffGenericCommand",
          "new_api": null,
          "old_text": "sunionDiffGenericCommand(c,c->argv+1,c->argc-1,NULL,REDIS_OP_DIFF)",
          "new_text": null,
          "old_line_content": "    sunionDiffGenericCommand(c,c->argv+1,c->argc-1,NULL,REDIS_OP_DIFF);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5381,
          "old_api": "sunionDiffGenericCommand",
          "new_api": null,
          "old_text": "sunionDiffGenericCommand(c,c->argv+2,c->argc-2,c->argv[1],REDIS_OP_DIFF)",
          "new_text": null,
          "old_line_content": "    sunionDiffGenericCommand(c,c->argv+2,c->argc-2,c->argv[1],REDIS_OP_DIFF);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 9479,
          "old_api": "REDIS_NOTUSED",
          "new_api": null,
          "old_text": "REDIS_NOTUSED(arg)",
          "new_text": null,
          "old_line_content": "    REDIS_NOTUSED(arg);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9481,
          "old_api": "pthread_self",
          "new_api": null,
          "old_text": "pthread_self()",
          "new_text": null,
          "old_line_content": "    pthread_detach(pthread_self());",
          "new_line_content": "    while(1) {",
          "content_same": false
        },
        {
          "line": 9485,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.io_newjobs)",
          "new_text": null,
          "old_line_content": "        if (listLength(server.io_newjobs) == 0) {",
          "new_line_content": "            /* No new jobs in queue, exit. */",
          "content_same": false
        },
        {
          "line": 7437,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(mc->argv)",
          "new_text": null,
          "old_line_content": "        zfree(mc->argv);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7439,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(c->mstate.commands)",
          "new_text": null,
          "old_line_content": "    zfree(c->mstate.commands);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 9488,
          "old_api": "pthread_self",
          "new_api": null,
          "old_text": "pthread_self()",
          "new_text": null,
          "old_line_content": "                (long) pthread_self());",
          "new_line_content": "            server.io_active_threads--;",
          "content_same": false
        },
        {
          "line": 9490,
          "old_api": "unlockThreadedIO",
          "new_api": null,
          "old_text": "unlockThreadedIO()",
          "new_text": null,
          "old_line_content": "            unlockThreadedIO();",
          "new_line_content": "            return NULL;",
          "content_same": false
        },
        {
          "line": 9493,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(server.io_newjobs)",
          "new_text": null,
          "old_line_content": "        ln = listFirst(server.io_newjobs);",
          "new_line_content": "        j = ln->value;",
          "content_same": false
        },
        {
          "line": 9495,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(server.io_newjobs,ln)",
          "new_text": null,
          "old_line_content": "        listDelNode(server.io_newjobs,ln);",
          "new_line_content": "        /* Add the job in the processing queue */",
          "content_same": false
        },
        {
          "line": 7447,
          "old_api": "zrealloc",
          "new_api": null,
          "old_text": "zrealloc(c->mstate.commands,\n            sizeof(multiCmd)*(c->mstate.count+1))",
          "new_text": null,
          "old_line_content": "    c->mstate.commands = zrealloc(c->mstate.commands,",
          "new_line_content": "            sizeof(multiCmd)*(c->mstate.count+1));",
          "content_same": false
        },
        {
          "line": 5404,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*zn))",
          "new_text": null,
          "old_line_content": "    zskiplistNode *zn = zmalloc(sizeof(*zn));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7453,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(mc->argv,c->argv,sizeof(robj*)*c->argc)",
          "new_text": null,
          "old_line_content": "    memcpy(mc->argv,c->argv,sizeof(robj*)*c->argc);",
          "new_line_content": "    for (j = 0; j < c->argc; j++)",
          "content_same": false
        },
        {
          "line": 9502,
          "old_api": "pthread_self",
          "new_api": null,
          "old_text": "pthread_self()",
          "new_text": null,
          "old_line_content": "            (long) pthread_self(), j->type, (void*)j, (char*)j->key->ptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5406,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(zskiplistNode*) * level)",
          "new_text": null,
          "old_line_content": "    zn->forward = zmalloc(sizeof(zskiplistNode*) * level);",
          "new_line_content": "    if (level > 0)",
          "content_same": false
        },
        {
          "line": 5408,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(unsigned int) * (level - 1))",
          "new_text": null,
          "old_line_content": "        zn->span = zmalloc(sizeof(unsigned int) * (level - 1));",
          "new_line_content": "    zn->score = score;",
          "content_same": false
        },
        {
          "line": 7455,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(mc->argv[j])",
          "new_text": null,
          "old_line_content": "        incrRefCount(mc->argv[j]);",
          "new_line_content": "    c->mstate.count++;",
          "content_same": false
        },
        {
          "line": 9506,
          "old_api": "vmReadObjectFromSwap",
          "new_api": null,
          "old_text": "vmReadObjectFromSwap(j->page,j->key->vtype)",
          "new_text": null,
          "old_line_content": "            j->val = vmReadObjectFromSwap(j->page,j->key->vtype);",
          "new_line_content": "        } else if (j->type == REDIS_IOJOB_PREPARE_SWAP) {",
          "content_same": false
        },
        {
          "line": 7461,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.ok);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 9510,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "            fclose(fp);",
          "new_line_content": "        } else if (j->type == REDIS_IOJOB_DO_SWAP) {",
          "content_same": false
        },
        {
          "line": 9512,
          "old_api": "vmWriteObjectOnSwap",
          "new_api": null,
          "old_text": "vmWriteObjectOnSwap(j->val,j->page)",
          "new_text": null,
          "old_line_content": "            if (vmWriteObjectOnSwap(j->val,j->page) == REDIS_ERR)",
          "new_line_content": "                j->canceled = 1;",
          "content_same": false
        },
        {
          "line": 5418,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*zsl))",
          "new_text": null,
          "old_line_content": "    zsl = zmalloc(sizeof(*zsl));",
          "new_line_content": "    zsl->level = 1;",
          "content_same": false
        },
        {
          "line": 7466,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR DISCARD without MULTI\\r\\n\")",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(\"-ERR DISCARD without MULTI\\r\\n\"));",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 5421,
          "old_api": "zslCreateNode",
          "new_api": null,
          "old_text": "zslCreateNode(ZSKIPLIST_MAXLEVEL,0,NULL)",
          "new_text": null,
          "old_line_content": "    zsl->header = zslCreateNode(ZSKIPLIST_MAXLEVEL,0,NULL);",
          "new_line_content": "    for (j = 0; j < ZSKIPLIST_MAXLEVEL; j++) {",
          "content_same": false
        },
        {
          "line": 7471,
          "old_api": "initClientMultiState",
          "new_api": null,
          "old_text": "initClientMultiState(c)",
          "new_text": null,
          "old_line_content": "    initClientMultiState(c);",
          "new_line_content": "    c->flags &= (~REDIS_MULTI);",
          "content_same": false
        },
        {
          "line": 7473,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.ok);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 9522,
          "old_api": "unlockThreadedIO",
          "new_api": null,
          "old_text": "unlockThreadedIO()",
          "new_text": null,
          "old_line_content": "        unlockThreadedIO();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9525,
          "old_api": "write",
          "new_api": null,
          "old_text": "write(server.io_ready_pipe_write,\"x\",1)",
          "new_text": null,
          "old_line_content": "        assert(write(server.io_ready_pipe_write,\"x\",1) == 1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7480,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject(\"MULTI\",5)",
          "new_text": null,
          "old_line_content": "    robj *multistring = createStringObject(\"MULTI\",5);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7482,
          "old_api": "lookupCommand",
          "new_api": null,
          "old_text": "lookupCommand(\"multi\")",
          "new_text": null,
          "old_line_content": "    cmd = lookupCommand(\"multi\");",
          "new_line_content": "    if (server.appendonly)",
          "content_same": false
        },
        {
          "line": 5438,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(node)",
          "new_text": null,
          "old_line_content": "    zfree(node);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 7487,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(multistring)",
          "new_text": null,
          "old_line_content": "    decrRefCount(multistring);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5446,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(zsl->header)",
          "new_text": null,
          "old_line_content": "    zfree(zsl->header);",
          "new_line_content": "    while(node) {",
          "content_same": false
        },
        {
          "line": 9543,
          "old_api": "usleep",
          "new_api": null,
          "old_text": "usleep(1000000)",
          "new_text": null,
          "old_line_content": "        usleep(1000000);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7496,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR EXEC without MULTI\\r\\n\")",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(\"-ERR EXEC without MULTI\\r\\n\"));",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 9545,
          "old_api": "pthread_sigmask",
          "new_api": null,
          "old_text": "pthread_sigmask(SIG_SETMASK, &omask, NULL)",
          "new_text": null,
          "old_line_content": "    pthread_sigmask(SIG_SETMASK, &omask, NULL);",
          "new_line_content": "    server.io_active_threads++;",
          "content_same": false
        },
        {
          "line": 5449,
          "old_api": "zslFreeNode",
          "new_api": null,
          "old_text": "zslFreeNode(node)",
          "new_text": null,
          "old_line_content": "        zslFreeNode(node);",
          "new_line_content": "        node = next;",
          "content_same": false
        },
        {
          "line": 5452,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(zsl)",
          "new_text": null,
          "old_line_content": "    zfree(zsl);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 7504,
          "old_api": "execCommandReplicateMulti",
          "new_api": null,
          "old_text": "execCommandReplicateMulti(c)",
          "new_text": null,
          "old_line_content": "    execCommandReplicateMulti(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5457,
          "old_api": "random",
          "new_api": null,
          "old_text": "random()",
          "new_text": null,
          "old_line_content": "    while ((random()&0xFFFF) < (ZSKIPLIST_P * 0xFFFF))",
          "new_line_content": "        level += 1;",
          "content_same": false
        },
        {
          "line": 9557,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.io_processing)",
          "new_text": null,
          "old_line_content": "            listLength(server.io_processing) == 0 &&",
          "new_line_content": "            server.io_active_threads == 0)",
          "content_same": false
        },
        {
          "line": 7509,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",c->mstate.count));",
          "new_line_content": "    for (j = 0; j < c->mstate.count; j++) {",
          "content_same": false
        },
        {
          "line": 9560,
          "old_api": "unlockThreadedIO",
          "new_api": null,
          "old_text": "unlockThreadedIO()",
          "new_text": null,
          "old_line_content": "            unlockThreadedIO();",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 7513,
          "old_api": "call",
          "new_api": null,
          "old_text": "call(c,c->mstate.commands[j].cmd)",
          "new_text": null,
          "old_line_content": "        call(c,c->mstate.commands[j].cmd);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7518,
          "old_api": "initClientMultiState",
          "new_api": null,
          "old_text": "initClientMultiState(c)",
          "new_text": null,
          "old_line_content": "    initClientMultiState(c);",
          "new_line_content": "    c->flags &= (~REDIS_MULTI);",
          "content_same": false
        },
        {
          "line": 9568,
          "old_api": "unlockThreadedIO",
          "new_api": null,
          "old_text": "unlockThreadedIO()",
          "new_text": null,
          "old_line_content": "        unlockThreadedIO();",
          "new_line_content": "        if (io_processed_len) {",
          "content_same": false
        },
        {
          "line": 9571,
          "old_api": "usleep",
          "new_api": null,
          "old_text": "usleep(1000)",
          "new_text": null,
          "old_line_content": "            usleep(1000); /* 1 millisecond */",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 5475,
          "old_api": "compareStringObjects",
          "new_api": null,
          "old_text": "compareStringObjects(x->forward[i]->obj,obj)",
          "new_text": null,
          "old_line_content": "                compareStringObjects(x->forward[i]->obj,obj) < 0))) {",
          "new_line_content": "            rank[i] += i > 0 ? x->span[i-1] : 1;",
          "content_same": false
        },
        {
          "line": 9573,
          "old_api": "usleep",
          "new_api": null,
          "old_text": "usleep(10000)",
          "new_text": null,
          "old_line_content": "            usleep(10000); /* 10 milliseconds */",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 9581,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(server.vm_swap_file,\"r+b\")",
          "new_text": null,
          "old_line_content": "    server.vm_fp = fopen(server.vm_swap_file,\"r+b\");",
          "new_line_content": "    if (server.vm_fp == NULL) {",
          "content_same": false
        },
        {
          "line": 5485,
          "old_api": "zslRandomLevel",
          "new_api": null,
          "old_text": "zslRandomLevel()",
          "new_text": null,
          "old_line_content": "    level = zslRandomLevel();",
          "new_line_content": "    if (level > zsl->level) {",
          "content_same": false
        },
        {
          "line": 9583,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Can't re-open the VM swap file: %s. Exiting.\",\n            server.vm_swap_file)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Can't re-open the VM swap file: %s. Exiting.\",",
          "new_line_content": "            server.vm_swap_file);",
          "content_same": false
        },
        {
          "line": 9585,
          "old_api": "_exit",
          "new_api": null,
          "old_text": "_exit(1)",
          "new_text": null,
          "old_line_content": "        _exit(1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 9587,
          "old_api": "fileno",
          "new_api": null,
          "old_text": "fileno(server.vm_fp)",
          "new_text": null,
          "old_line_content": "    server.vm_fd = fileno(server.vm_fp);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5494,
          "old_api": "zslCreateNode",
          "new_api": null,
          "old_text": "zslCreateNode(level,score,obj)",
          "new_text": null,
          "old_line_content": "    x = zslCreateNode(level,score,obj);",
          "new_line_content": "    for (i = 0; i < level; i++) {",
          "content_same": false
        },
        {
          "line": 9592,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG,\"Queued IO Job %p type %d about key '%s'\\n\",\n        (void*)j, j->type, (char*)j->key->ptr)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_DEBUG,\"Queued IO Job %p type %d about key '%s'\\n\",",
          "new_line_content": "        (void*)j, j->type, (char*)j->key->ptr);",
          "content_same": false
        },
        {
          "line": 9594,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(server.io_newjobs,j)",
          "new_text": null,
          "old_line_content": "    listAddNodeTail(server.io_newjobs,j);",
          "new_line_content": "    if (server.io_active_threads < server.vm_max_threads)",
          "content_same": false
        },
        {
          "line": 9596,
          "old_api": "spawnIOThread",
          "new_api": null,
          "old_text": "spawnIOThread()",
          "new_text": null,
          "old_line_content": "        spawnIOThread();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 9603,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(key->refcount == 1)",
          "new_text": null,
          "old_line_content": "    assert(key->refcount == 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9605,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*j))",
          "new_text": null,
          "old_line_content": "    j = zmalloc(sizeof(*j));",
          "new_line_content": "    j->type = REDIS_IOJOB_PREPARE_SWAP;",
          "content_same": false
        },
        {
          "line": 9610,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(val)",
          "new_text": null,
          "old_line_content": "    incrRefCount(val);",
          "new_line_content": "    j->canceled = 0;",
          "content_same": false
        },
        {
          "line": 7564,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(robj*)*numkeys)",
          "new_text": null,
          "old_line_content": "    c->blockingkeys = zmalloc(sizeof(robj*)*numkeys);",
          "new_line_content": "    c->blockingkeysnum = numkeys;",
          "content_same": false
        },
        {
          "line": 9617,
          "old_api": "unlockThreadedIO",
          "new_api": null,
          "old_text": "unlockThreadedIO()",
          "new_text": null,
          "old_line_content": "    unlockThreadedIO();",
          "new_line_content": "    return REDIS_OK;",
          "content_same": false
        },
        {
          "line": 7570,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(keys[j])",
          "new_text": null,
          "old_line_content": "        incrRefCount(keys[j]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7573,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(c->db->blockingkeys,keys[j])",
          "new_text": null,
          "old_line_content": "        de = dictFind(c->db->blockingkeys,keys[j]);",
          "new_line_content": "        if (de == NULL) {",
          "content_same": false
        },
        {
          "line": 7581,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(retval == DICT_OK)",
          "new_text": null,
          "old_line_content": "            assert(retval == DICT_OK);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 7583,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "            l = dictGetEntryVal(de);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 7585,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(l,c)",
          "new_text": null,
          "old_line_content": "        listAddNodeTail(l,c);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 9635,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(c->db->dict,key)",
          "new_text": null,
          "old_line_content": "    de = dictFind(c->db->dict,key);",
          "new_line_content": "    if (de == NULL) return 0;",
          "content_same": false
        },
        {
          "line": 9637,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "    o = dictGetEntryKey(de);",
          "new_line_content": "    if (o->storage == REDIS_VM_MEMORY) {",
          "content_same": false
        },
        {
          "line": 9642,
          "old_api": "vmCancelThreadedIOJob",
          "new_api": null,
          "old_text": "vmCancelThreadedIOJob(o)",
          "new_text": null,
          "old_line_content": "        vmCancelThreadedIOJob(o);",
          "new_line_content": "        return 0;",
          "content_same": false
        },
        {
          "line": 7598,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(c->blockingkeys != NULL)",
          "new_text": null,
          "old_line_content": "    assert(c->blockingkeys != NULL);",
          "new_line_content": "    /* The client may wait for multiple keys, so unblock it for every key. */",
          "content_same": false
        },
        {
          "line": 5554,
          "old_api": "compareStringObjects",
          "new_api": null,
          "old_text": "compareStringObjects(x->forward[i]->obj,obj)",
          "new_text": null,
          "old_line_content": "                compareStringObjects(x->forward[i]->obj,obj) < 0)))",
          "new_line_content": "            x = x->forward[i];",
          "content_same": false
        },
        {
          "line": 9651,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(key)",
          "new_text": null,
          "old_line_content": "    incrRefCount(key);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7605,
          "old_api": "listSearchKey",
          "new_api": null,
          "old_text": "listSearchKey(l,c)",
          "new_text": null,
          "old_line_content": "        listDelNode(l,listSearchKey(l,c));",
          "new_line_content": "        /* If the list is empty we need to remove it to avoid wasting memory */",
          "content_same": false
        },
        {
          "line": 9654,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(c->db->io_keys,key)",
          "new_text": null,
          "old_line_content": "    de = dictFind(c->db->io_keys,key);",
          "new_line_content": "    if (de == NULL) {",
          "content_same": false
        },
        {
          "line": 7609,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(c->blockingkeys[j])",
          "new_text": null,
          "old_line_content": "        decrRefCount(c->blockingkeys[j]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5563,
          "old_api": "zslFreeNode",
          "new_api": null,
          "old_text": "zslFreeNode(x)",
          "new_text": null,
          "old_line_content": "        zslFreeNode(x);",
          "new_line_content": "        return 1;",
          "content_same": false
        },
        {
          "line": 7612,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(c->blockingkeys)",
          "new_text": null,
          "old_line_content": "    zfree(c->blockingkeys);",
          "new_line_content": "    c->blockingkeys = NULL;",
          "content_same": false
        },
        {
          "line": 9662,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(retval == DICT_OK)",
          "new_text": null,
          "old_line_content": "        assert(retval == DICT_OK);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 9664,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "        l = dictGetEntryVal(de);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 9666,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(l,c)",
          "new_text": null,
          "old_line_content": "    listAddNodeTail(l,c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7621,
          "old_api": "processInputBuffer",
          "new_api": null,
          "old_text": "processInputBuffer(c)",
          "new_text": null,
          "old_line_content": "    if (c->querybuf && sdslen(c->querybuf) > 0) processInputBuffer(c);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 9673,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*j))",
          "new_text": null,
          "old_line_content": "        j = zmalloc(sizeof(*j));",
          "new_line_content": "        j->type = REDIS_IOJOB_LOAD;",
          "content_same": false
        },
        {
          "line": 9684,
          "old_api": "unlockThreadedIO",
          "new_api": null,
          "old_text": "unlockThreadedIO()",
          "new_text": null,
          "old_line_content": "        unlockThreadedIO();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7640,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(c->db->blockingkeys,key)",
          "new_text": null,
          "old_line_content": "    de = dictFind(c->db->blockingkeys,key);",
          "new_line_content": "    if (de == NULL) return 0;",
          "content_same": false
        },
        {
          "line": 5593,
          "old_api": "zslFreeNode",
          "new_api": null,
          "old_text": "zslFreeNode(x)",
          "new_text": null,
          "old_line_content": "        zslFreeNode(x);",
          "new_line_content": "        removed++;",
          "content_same": false
        },
        {
          "line": 7644,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(ln != NULL)",
          "new_text": null,
          "old_line_content": "    assert(ln != NULL);",
          "new_line_content": "    receiver = ln->value;",
          "content_same": false
        },
        {
          "line": 9698,
          "old_api": "waitForSwappedKey",
          "new_api": null,
          "old_text": "waitForSwappedKey(c,argv[j])",
          "new_text": null,
          "old_line_content": "        waitForSwappedKey(c,argv[j]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7650,
          "old_api": "unblockClientWaitingData",
          "new_api": null,
          "old_text": "unblockClientWaitingData(receiver)",
          "new_text": null,
          "old_line_content": "    unblockClientWaitingData(receiver);",
          "new_line_content": "    return 1;",
          "content_same": false
        },
        {
          "line": 9707,
          "old_api": "REDIS_NOTUSED",
          "new_api": null,
          "old_text": "REDIS_NOTUSED(cmd)",
          "new_text": null,
          "old_line_content": "    REDIS_NOTUSED(cmd);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9709,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "    num = atoi(argv[2]->ptr);",
          "new_line_content": "    if (num > (argc-3)) return;",
          "content_same": false
        },
        {
          "line": 7661,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[j])",
          "new_text": null,
          "old_line_content": "        o = lookupKeyWrite(c->db,c->argv[j]);",
          "new_line_content": "        if (o != NULL) {",
          "content_same": false
        },
        {
          "line": 9712,
          "old_api": "waitForSwappedKey",
          "new_api": null,
          "old_text": "waitForSwappedKey(c,argv[3+i])",
          "new_text": null,
          "old_line_content": "        waitForSwappedKey(c,argv[3+i]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7664,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "                addReply(c,shared.wrongtypeerr);",
          "new_line_content": "                return;",
          "content_same": false
        },
        {
          "line": 7668,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(list)",
          "new_text": null,
          "old_line_content": "                if (listLength(list) != 0) {",
          "new_line_content": "                    /* If the list contains elements fall back to the usual",
          "content_same": false
        },
        {
          "line": 5622,
          "old_api": "zslFreeNode",
          "new_api": null,
          "old_text": "zslFreeNode(x)",
          "new_text": null,
          "old_line_content": "        zslFreeNode(x);",
          "new_line_content": "        removed++;",
          "content_same": false
        },
        {
          "line": 9726,
          "old_api": "REDIS_NOTUSED",
          "new_api": null,
          "old_text": "REDIS_NOTUSED(argv)",
          "new_text": null,
          "old_line_content": "    REDIS_NOTUSED(argv);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9735,
          "old_api": "vm_preload_proc",
          "new_api": null,
          "old_text": "mcmd->vm_preload_proc(c,mcmd,margc,margv)",
          "new_text": null,
          "old_line_content": "            mcmd->vm_preload_proc(c,mcmd,margc,margv);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 9737,
          "old_api": "waitForMultipleSwappedKeys",
          "new_api": null,
          "old_text": "waitForMultipleSwappedKeys(c,mcmd,margc,margv)",
          "new_text": null,
          "old_line_content": "            waitForMultipleSwappedKeys(c,mcmd,margc,margv);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 7689,
          "old_api": "popGenericCommand",
          "new_api": null,
          "old_text": "popGenericCommand(c,where)",
          "new_text": null,
          "old_line_content": "                    popGenericCommand(c,where);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7702,
          "old_api": "blockForKeys",
          "new_api": null,
          "old_text": "blockForKeys(c,c->argv+1,c->argc-2,timeout)",
          "new_text": null,
          "old_line_content": "    blockForKeys(c,c->argv+1,c->argc-2,timeout);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 9754,
          "old_api": "vm_preload_proc",
          "new_api": null,
          "old_text": "cmd->vm_preload_proc(c,cmd,c->argc,c->argv)",
          "new_text": null,
          "old_line_content": "        cmd->vm_preload_proc(c,cmd,c->argc,c->argv);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 7706,
          "old_api": "blockingPopGenericCommand",
          "new_api": null,
          "old_text": "blockingPopGenericCommand(c,REDIS_HEAD)",
          "new_text": null,
          "old_line_content": "    blockingPopGenericCommand(c,REDIS_HEAD);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 9756,
          "old_api": "waitForMultipleSwappedKeys",
          "new_api": null,
          "old_text": "waitForMultipleSwappedKeys(c,cmd,c->argc,c->argv)",
          "new_text": null,
          "old_line_content": "        waitForMultipleSwappedKeys(c,cmd,c->argc,c->argv);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5660,
          "old_api": "compareStringObjects",
          "new_api": null,
          "old_text": "compareStringObjects(x->forward[i]->obj,o)",
          "new_text": null,
          "old_line_content": "                compareStringObjects(x->forward[i]->obj,o) <= 0))) {",
          "new_line_content": "            rank += i > 0 ? x->span[i-1] : 1;",
          "content_same": false
        },
        {
          "line": 7710,
          "old_api": "blockingPopGenericCommand",
          "new_api": null,
          "old_text": "blockingPopGenericCommand(c,REDIS_TAIL)",
          "new_text": null,
          "old_line_content": "    blockingPopGenericCommand(c,REDIS_TAIL);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 9760,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(c->io_keys)",
          "new_text": null,
          "old_line_content": "    if (listLength(c->io_keys)) {",
          "new_line_content": "        c->flags |= REDIS_IO_WAIT;",
          "content_same": false
        },
        {
          "line": 9762,
          "old_api": "aeDeleteFileEvent",
          "new_api": null,
          "old_text": "aeDeleteFileEvent(server.el,c->fd,AE_READABLE)",
          "new_text": null,
          "old_line_content": "        aeDeleteFileEvent(server.el,c->fd,AE_READABLE);",
          "new_line_content": "        server.vm_blocked_clients++;",
          "content_same": false
        },
        {
          "line": 5666,
          "old_api": "equalStringObjects",
          "new_api": null,
          "old_text": "equalStringObjects(x->obj,o)",
          "new_text": null,
          "old_line_content": "        if (x->obj && equalStringObjects(x->obj,o)) {",
          "new_line_content": "            return rank;",
          "content_same": false
        },
        {
          "line": 7717,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    time_t start = time(NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7722,
          "old_api": "write",
          "new_api": null,
          "old_text": "write(fd,ptr,size)",
          "new_text": null,
          "old_line_content": "            nwritten = write(fd,ptr,size);",
          "new_line_content": "            if (nwritten == -1) return -1;",
          "content_same": false
        },
        {
          "line": 7727,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "        if ((time(NULL)-start) > timeout) {",
          "new_line_content": "            errno = ETIMEDOUT;",
          "content_same": false
        },
        {
          "line": 9784,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(c->io_keys,ln)",
          "new_text": null,
          "old_line_content": "            listDelNode(c->io_keys,ln);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 7737,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    time_t start = time(NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9788,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(ln != NULL)",
          "new_text": null,
          "old_line_content": "    assert(ln != NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7742,
          "old_api": "read",
          "new_api": null,
          "old_text": "read(fd,ptr,size)",
          "new_text": null,
          "old_line_content": "            nread = read(fd,ptr,size);",
          "new_line_content": "            if (nread == -1) return -1;",
          "content_same": false
        },
        {
          "line": 7748,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "        if ((time(NULL)-start) > timeout) {",
          "new_line_content": "            errno = ETIMEDOUT;",
          "content_same": false
        },
        {
          "line": 9798,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(c->db->io_keys,key)",
          "new_text": null,
          "old_line_content": "        dictDelete(c->db->io_keys,key);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5703,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,key)",
          "new_text": null,
          "old_line_content": "    zsetobj = lookupKeyWrite(c->db,key);",
          "new_line_content": "    if (zsetobj == NULL) {",
          "content_same": false
        },
        {
          "line": 9800,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(c->io_keys)",
          "new_text": null,
          "old_line_content": "    return listLength(c->io_keys) == 0;",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5707,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(key)",
          "new_text": null,
          "old_line_content": "        incrRefCount(key);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 5710,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 9809,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(db->io_keys,key)",
          "new_text": null,
          "old_line_content": "    de = dictFind(db->io_keys,key);",
          "new_line_content": "    if (!de) return;",
          "content_same": false
        },
        {
          "line": 7763,
          "old_api": "syncRead",
          "new_api": null,
          "old_text": "syncRead(fd,&c,1,timeout)",
          "new_text": null,
          "old_line_content": "        if (syncRead(fd,&c,1,timeout) == -1) return -1;",
          "new_line_content": "        if (c == '\\n') {",
          "content_same": false
        },
        {
          "line": 9813,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(l)",
          "new_text": null,
          "old_line_content": "    len = listLength(l);",
          "new_line_content": "    /* Note: we can't use something like while(listLength(l)) as the list",
          "content_same": false
        },
        {
          "line": 5719,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(double))",
          "new_text": null,
          "old_line_content": "    score = zmalloc(sizeof(double));",
          "new_line_content": "    if (doincrement) {",
          "content_same": false
        },
        {
          "line": 9817,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(l)",
          "new_text": null,
          "old_line_content": "        ln = listFirst(l);",
          "new_line_content": "        redisClient *c = ln->value;",
          "content_same": false
        },
        {
          "line": 9820,
          "old_api": "dontWaitForSwappedKey",
          "new_api": null,
          "old_text": "dontWaitForSwappedKey(c,key)",
          "new_text": null,
          "old_line_content": "        if (dontWaitForSwappedKey(c,key)) {",
          "new_line_content": "            /* Put the client in the list of clients ready to go as we",
          "content_same": false
        },
        {
          "line": 5724,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(zs->dict,ele)",
          "new_text": null,
          "old_line_content": "        de = dictFind(zs->dict,ele);",
          "new_line_content": "        if (de) {",
          "content_same": false
        },
        {
          "line": 5726,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "            double *oldscore = dictGetEntryVal(de);",
          "new_line_content": "            *score = *oldscore + scoreval;",
          "content_same": false
        },
        {
          "line": 9823,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(server.io_ready_clients,c)",
          "new_text": null,
          "old_line_content": "            listAddNodeTail(server.io_ready_clients,c);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5737,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(zs->dict,ele,score)",
          "new_text": null,
          "old_line_content": "    if (dictAdd(zs->dict,ele,score) == DICT_OK) {",
          "new_line_content": "        /* case 1: New element */",
          "content_same": false
        },
        {
          "line": 7786,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR SYNC is invalid with pending input\\r\\n\")",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(\"-ERR SYNC is invalid with pending input\\r\\n\"));",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 5741,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(ele)",
          "new_text": null,
          "old_line_content": "        incrRefCount(ele); /* added to skiplist */",
          "new_line_content": "        server.dirty++;",
          "content_same": false
        },
        {
          "line": 7790,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Slave ask for synchronization\")",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_NOTICE,\"Slave ask for synchronization\");",
          "new_line_content": "    /* Here we need to check if there is a background saving operation",
          "content_same": false
        },
        {
          "line": 5744,
          "old_api": "addReplyDouble",
          "new_api": null,
          "old_text": "addReplyDouble(c,*score)",
          "new_text": null,
          "old_line_content": "            addReplyDouble(c,*score);",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 5746,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.cone)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.cone);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 9844,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(o->ptr,\"no\")",
          "new_text": null,
          "old_line_content": "        if (!strcasecmp(o->ptr,\"no\")) {",
          "new_line_content": "            server.appendfsync = APPENDFSYNC_NO;",
          "content_same": false
        },
        {
          "line": 9846,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(o->ptr,\"everysec\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(o->ptr,\"everysec\")) {",
          "new_line_content": "            server.appendfsync = APPENDFSYNC_EVERYSEC;",
          "content_same": false
        },
        {
          "line": 9848,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(o->ptr,\"always\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(o->ptr,\"always\")) {",
          "new_line_content": "            server.appendfsync = APPENDFSYNC_ALWAYS;",
          "content_same": false
        },
        {
          "line": 5754,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "        oldscore = dictGetEntryVal(de);",
          "new_line_content": "        if (*score != *oldscore) {",
          "content_same": false
        },
        {
          "line": 7802,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "        while((ln = listNext(&li))) {",
          "new_line_content": "            slave = ln->value;",
          "content_same": false
        },
        {
          "line": 9853,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[2]->ptr,\"save\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(c->argv[2]->ptr,\"save\")) {",
          "new_line_content": "        int vlen, j;",
          "content_same": false
        },
        {
          "line": 9855,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(o->ptr)",
          "new_text": null,
          "old_line_content": "        sds *v = sdssplitlen(o->ptr,sdslen(o->ptr),\" \",1,&vlen);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5762,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(ele)",
          "new_text": null,
          "old_line_content": "            incrRefCount(ele);",
          "new_line_content": "            /* Update the score in the hash table */",
          "content_same": false
        },
        {
          "line": 7810,
          "old_api": "listDup",
          "new_api": null,
          "old_text": "listDup(slave->reply)",
          "new_text": null,
          "old_line_content": "            c->reply = listDup(slave->reply);",
          "new_line_content": "            c->replstate = REDIS_REPL_WAIT_BGSAVE_END;",
          "content_same": false
        },
        {
          "line": 5764,
          "old_api": "dictReplace",
          "new_api": null,
          "old_text": "dictReplace(zs->dict,ele,score)",
          "new_text": null,
          "old_line_content": "            dictReplace(zs->dict,ele,score);",
          "new_line_content": "            server.dirty++;",
          "content_same": false
        },
        {
          "line": 9861,
          "old_api": "sdsfreesplitres",
          "new_api": null,
          "old_text": "sdsfreesplitres(v,vlen)",
          "new_text": null,
          "old_line_content": "            sdsfreesplitres(v,vlen);",
          "new_line_content": "            goto badfmt;",
          "content_same": false
        },
        {
          "line": 7812,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Waiting for end of BGSAVE for SYNC\")",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_NOTICE,\"Waiting for end of BGSAVE for SYNC\");",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 5767,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(score)",
          "new_text": null,
          "old_line_content": "            zfree(score);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 7817,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Waiting for next BGSAVE for SYNC\")",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_NOTICE,\"Waiting for next BGSAVE for SYNC\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5770,
          "old_api": "addReplyDouble",
          "new_api": null,
          "old_text": "addReplyDouble(c,*score)",
          "new_text": null,
          "old_line_content": "            addReplyDouble(c,*score);",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 9868,
          "old_api": "strtoll",
          "new_api": null,
          "old_text": "strtoll(v[j], &eptr, 10)",
          "new_text": null,
          "old_line_content": "            val = strtoll(v[j], &eptr, 10);",
          "new_line_content": "            if (eptr[0] != '\\0' ||",
          "content_same": false
        },
        {
          "line": 5772,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.czero);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 9872,
          "old_api": "sdsfreesplitres",
          "new_api": null,
          "old_text": "sdsfreesplitres(v,vlen)",
          "new_text": null,
          "old_line_content": "                sdsfreesplitres(v,vlen);",
          "new_line_content": "                goto badfmt;",
          "content_same": false
        },
        {
          "line": 7824,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR Unalbe to perform background save\\r\\n\")",
          "new_text": null,
          "old_line_content": "            addReplySds(c,sdsnew(\"-ERR Unalbe to perform background save\\r\\n\"));",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 5780,
          "old_api": "zaddGenericCommand",
          "new_api": null,
          "old_text": "zaddGenericCommand(c,c->argv[1],c->argv[3],scoreval,0)",
          "new_text": null,
          "old_line_content": "    zaddGenericCommand(c,c->argv[1],c->argv[3],scoreval,0);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 9877,
          "old_api": "resetServerSaveParams",
          "new_api": null,
          "old_text": "resetServerSaveParams()",
          "new_text": null,
          "old_line_content": "        resetServerSaveParams();",
          "new_line_content": "        for (j = 0; j < vlen; j += 2) {",
          "content_same": false
        },
        {
          "line": 7832,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(server.slaves,c)",
          "new_text": null,
          "old_line_content": "    listAddNodeTail(server.slaves,c);",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 5787,
          "old_api": "zaddGenericCommand",
          "new_api": null,
          "old_text": "zaddGenericCommand(c,c->argv[1],c->argv[3],scoreval,1)",
          "new_text": null,
          "old_line_content": "    zaddGenericCommand(c,c->argv[1],c->argv[3],scoreval,1);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 9884,
          "old_api": "appendServerSaveParams",
          "new_api": null,
          "old_text": "appendServerSaveParams(seconds, changes)",
          "new_text": null,
          "old_line_content": "            appendServerSaveParams(seconds, changes);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 9886,
          "old_api": "sdsfreesplitres",
          "new_api": null,
          "old_text": "sdsfreesplitres(v,vlen)",
          "new_text": null,
          "old_line_content": "        sdsfreesplitres(v,vlen);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 7839,
          "old_api": "REDIS_NOTUSED",
          "new_api": null,
          "old_text": "REDIS_NOTUSED(mask)",
          "new_text": null,
          "old_line_content": "    REDIS_NOTUSED(mask);",
          "new_line_content": "    char buf[REDIS_IOBUF_LEN];",
          "content_same": false
        },
        {
          "line": 9888,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),",
          "new_line_content": "            \"-ERR not supported CONFIG parameter %s\\r\\n\",",
          "content_same": false
        },
        {
          "line": 9891,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(o)",
          "new_text": null,
          "old_line_content": "        decrRefCount(o);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 5798,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,zsetobj,REDIS_ZSET)",
          "new_text": null,
          "old_line_content": "        checkType(c,zsetobj,REDIS_ZSET)) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9895,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.ok);",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 5801,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(zs->dict,c->argv[2])",
          "new_text": null,
          "old_line_content": "    de = dictFind(zs->dict,c->argv[2]);",
          "new_line_content": "    if (de == NULL) {",
          "content_same": false
        },
        {
          "line": 7850,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        bulkcount = sdscatprintf(sdsempty(),\"$%lld\\r\\n\",(unsigned long long)",
          "new_line_content": "            slave->repldbsize);",
          "content_same": false
        },
        {
          "line": 9899,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),",
          "new_line_content": "        \"-ERR invalid argument '%s' for CONFIG SET '%s'\\r\\n\",",
          "content_same": false
        },
        {
          "line": 5803,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 7852,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(bulkcount)",
          "new_text": null,
          "old_line_content": "        if (write(fd,bulkcount,sdslen(bulkcount)) != (signed)sdslen(bulkcount))",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 9903,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(o)",
          "new_text": null,
          "old_line_content": "    decrRefCount(o);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 7855,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(slave)",
          "new_text": null,
          "old_line_content": "            freeClient(slave);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 5809,
          "old_api": "redisAssert",
          "new_api": null,
          "old_text": "redisAssert(deleted != 0)",
          "new_text": null,
          "old_line_content": "    redisAssert(deleted != 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7858,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(bulkcount)",
          "new_text": null,
          "old_line_content": "        sdsfree(bulkcount);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 9908,
          "old_api": "createObject",
          "new_api": null,
          "old_text": "createObject(REDIS_STRING,NULL)",
          "new_text": null,
          "old_line_content": "    robj *lenobj = createObject(REDIS_STRING,NULL);",
          "new_line_content": "    char *pattern = o->ptr;",
          "content_same": false
        },
        {
          "line": 7861,
          "old_api": "read",
          "new_api": null,
          "old_text": "read(slave->repldbfd,buf,REDIS_IOBUF_LEN)",
          "new_text": null,
          "old_line_content": "    buflen = read(slave->repldbfd,buf,REDIS_IOBUF_LEN);",
          "new_line_content": "    if (buflen <= 0) {",
          "content_same": false
        },
        {
          "line": 5814,
          "old_api": "deleteKey",
          "new_api": null,
          "old_text": "deleteKey(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    if (dictSize(zs->dict) == 0) deleteKey(c->db,c->argv[1]);",
          "new_line_content": "    server.dirty++;",
          "content_same": false
        },
        {
          "line": 5816,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.cone)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.cone);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 9913,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(lenobj)",
          "new_text": null,
          "old_line_content": "    decrRefCount(lenobj);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7865,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(slave)",
          "new_text": null,
          "old_line_content": "        freeClient(slave);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 9917,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,server.dbfilename)",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c,server.dbfilename);",
          "new_line_content": "        matches++;",
          "content_same": false
        },
        {
          "line": 7871,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(slave)",
          "new_text": null,
          "old_line_content": "        freeClient(slave);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 9922,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,server.requirepass)",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c,server.requirepass);",
          "new_line_content": "        matches++;",
          "content_same": false
        },
        {
          "line": 5827,
          "old_api": "getDoubleFromObjectOrReply",
          "new_api": null,
          "old_text": "getDoubleFromObjectOrReply(c, c->argv[3], &max, NULL)",
          "new_text": null,
          "old_line_content": "        (getDoubleFromObjectOrReply(c, c->argv[3], &max, NULL) != REDIS_OK)) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7876,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(slave->repldbfd)",
          "new_text": null,
          "old_line_content": "        close(slave->repldbfd);",
          "new_line_content": "        slave->repldbfd = -1;",
          "content_same": false
        },
        {
          "line": 5830,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,zsetobj,REDIS_ZSET)",
          "new_text": null,
          "old_line_content": "        checkType(c,zsetobj,REDIS_ZSET)) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9927,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,server.masterauth)",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c,server.masterauth);",
          "new_line_content": "        matches++;",
          "content_same": false
        },
        {
          "line": 7878,
          "old_api": "aeDeleteFileEvent",
          "new_api": null,
          "old_text": "aeDeleteFileEvent(server.el,slave->fd,AE_WRITABLE)",
          "new_text": null,
          "old_line_content": "        aeDeleteFileEvent(server.el,slave->fd,AE_WRITABLE);",
          "new_line_content": "        slave->replstate = REDIS_REPL_ONLINE;",
          "content_same": false
        },
        {
          "line": 7880,
          "old_api": "aeCreateFileEvent",
          "new_api": null,
          "old_text": "aeCreateFileEvent(server.el, slave->fd, AE_WRITABLE,\n            sendReplyToClient, slave)",
          "new_text": null,
          "old_line_content": "        if (aeCreateFileEvent(server.el, slave->fd, AE_WRITABLE,",
          "new_line_content": "            sendReplyToClient, slave) == AE_ERR) {",
          "content_same": false
        },
        {
          "line": 9930,
          "old_api": "stringmatch",
          "new_api": null,
          "old_text": "stringmatch(pattern,\"maxmemory\",0)",
          "new_text": null,
          "old_line_content": "    if (stringmatch(pattern,\"maxmemory\",0)) {",
          "new_line_content": "        char buf[128];",
          "content_same": false
        },
        {
          "line": 5835,
          "old_api": "deleteKey",
          "new_api": null,
          "old_text": "deleteKey(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    if (dictSize(zs->dict) == 0) deleteKey(c->db,c->argv[1]);",
          "new_line_content": "    server.dirty += deleted;",
          "content_same": false
        },
        {
          "line": 7882,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(slave)",
          "new_text": null,
          "old_line_content": "            freeClient(slave);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 5837,
          "old_api": "addReplyLong",
          "new_api": null,
          "old_text": "addReplyLong(c,deleted)",
          "new_text": null,
          "old_line_content": "    addReplyLong(c,deleted);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 7886,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Synchronization with slave succeeded\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_NOTICE,\"Synchronization with slave succeeded\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 9935,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,buf)",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c,buf);",
          "new_line_content": "        matches++;",
          "content_same": false
        },
        {
          "line": 9938,
          "old_api": "stringmatch",
          "new_api": null,
          "old_text": "stringmatch(pattern,\"appendfsync\",0)",
          "new_text": null,
          "old_line_content": "    if (stringmatch(pattern,\"appendfsync\",0)) {",
          "new_line_content": "        char *policy;",
          "content_same": false
        },
        {
          "line": 6454,
          "old_api": "dictResize",
          "new_api": null,
          "old_text": "dictResize(o->ptr)",
          "new_text": null,
          "old_line_content": "        if (deleted && htNeedsResize(o->ptr)) dictResize(o->ptr);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5849,
          "old_api": "getLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongFromObjectOrReply(c, c->argv[3], &end, NULL)",
          "new_text": null,
          "old_line_content": "        (getLongFromObjectOrReply(c, c->argv[3], &end, NULL) != REDIS_OK)) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9948,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,policy)",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c,policy);",
          "new_line_content": "        matches++;",
          "content_same": false
        },
        {
          "line": 5852,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,zsetobj,REDIS_ZSET)",
          "new_text": null,
          "old_line_content": "        checkType(c,zsetobj,REDIS_ZSET)) return;",
          "new_line_content": "    zs = zsetobj->ptr;",
          "content_same": false
        },
        {
          "line": 7902,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "    while((ln = listNext(&li))) {",
          "new_line_content": "        redisClient *slave = ln->value;",
          "content_same": false
        },
        {
          "line": 9952,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        sds buf = sdsempty();",
          "new_line_content": "        int j;",
          "content_same": false
        },
        {
          "line": 9956,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(buf,\"%ld %d\",\n                    server.saveparams[j].seconds,\n                    server.saveparams[j].changes)",
          "new_text": null,
          "old_line_content": "            buf = sdscatprintf(buf,\"%ld %d\",",
          "new_line_content": "                    server.saveparams[j].seconds,",
          "content_same": false
        },
        {
          "line": 9960,
          "old_api": "sdscatlen",
          "new_api": null,
          "old_text": "sdscatlen(buf,\" \",1)",
          "new_text": null,
          "old_line_content": "                buf = sdscatlen(buf,\" \",1);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5864,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 7913,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"SYNC failed. BGSAVE child returned an error\")",
          "new_text": null,
          "old_line_content": "                redisLog(REDIS_WARNING,\"SYNC failed. BGSAVE child returned an error\");",
          "new_line_content": "                continue;",
          "content_same": false
        },
        {
          "line": 9964,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(buf)",
          "new_text": null,
          "old_line_content": "        sdsfree(buf);",
          "new_line_content": "        matches++;",
          "content_same": false
        },
        {
          "line": 7919,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "                redisLog(REDIS_WARNING,\"SYNC failed. Can't open/stat DB after BGSAVE: %s\", strerror(errno));",
          "new_line_content": "                continue;",
          "content_same": false
        },
        {
          "line": 9968,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    lenobj->ptr = sdscatprintf(sdsempty(),\"*%d\\r\\n\",matches*2);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5873,
          "old_api": "deleteKey",
          "new_api": null,
          "old_text": "deleteKey(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    if (dictSize(zs->dict) == 0) deleteKey(c->db,c->argv[1]);",
          "new_line_content": "    server.dirty += deleted;",
          "content_same": false
        },
        {
          "line": 5875,
          "old_api": "addReplyLong",
          "new_api": null,
          "old_text": "addReplyLong(c, deleted)",
          "new_text": null,
          "old_line_content": "    addReplyLong(c, deleted);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 9972,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr,\"set\")",
          "new_text": null,
          "old_line_content": "    if (!strcasecmp(c->argv[1]->ptr,\"set\")) {",
          "new_line_content": "        if (c->argc != 4) goto badarity;",
          "content_same": false
        },
        {
          "line": 9975,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr,\"get\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"get\")) {",
          "new_line_content": "        if (c->argc != 3) goto badarity;",
          "content_same": false
        },
        {
          "line": 7927,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(slave)",
          "new_text": null,
          "old_line_content": "                freeClient(slave);",
          "new_line_content": "                continue;",
          "content_same": false
        },
        {
          "line": 9978,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr,\"resetstat\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"resetstat\")) {",
          "new_line_content": "        if (c->argc != 2) goto badarity;",
          "content_same": false
        },
        {
          "line": 7933,
          "old_api": "rdbSaveBackground",
          "new_api": null,
          "old_text": "rdbSaveBackground(server.dbfilename)",
          "new_text": null,
          "old_line_content": "        if (rdbSaveBackground(server.dbfilename) != REDIS_OK) {",
          "new_line_content": "            listIter li;",
          "content_same": false
        },
        {
          "line": 5887,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(d2->dict)",
          "new_text": null,
          "old_line_content": "    size2 = d2->dict ? dictSize(d2->dict) : 0;",
          "new_line_content": "    return size1 - size2;",
          "content_same": false
        },
        {
          "line": 9984,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.ok);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 9986,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),",
          "new_line_content": "            \"-ERR CONFIG subcommand must be one of GET, SET, RESETSTAT\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 7938,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "            while((ln = listNext(&li))) {",
          "new_line_content": "                redisClient *slave = ln->value;",
          "content_same": false
        },
        {
          "line": 7942,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(slave)",
          "new_text": null,
          "old_line_content": "                    freeClient(slave);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 9992,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),",
          "new_line_content": "        \"-ERR Wrong number of arguments for CONFIG %s\\r\\n\",",
          "content_same": false
        },
        {
          "line": 7951,
          "old_api": "anetTcpConnect",
          "new_api": null,
          "old_text": "anetTcpConnect(NULL,server.masterhost,server.masterport)",
          "new_text": null,
          "old_line_content": "    int fd = anetTcpConnect(NULL,server.masterhost,server.masterport);",
          "new_line_content": "    int dfd, maxtries = 5;",
          "content_same": false
        },
        {
          "line": 5904,
          "old_api": "redisPanic",
          "new_api": null,
          "old_text": "redisPanic(\"Unknown ZUNION/INTER aggregate type\")",
          "new_text": null,
          "old_line_content": "        redisPanic(\"Unknown ZUNION/INTER aggregate type\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 10003,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(pat)",
          "new_text": null,
          "old_line_content": "    zfree(pat);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 7956,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "            strerror(errno));",
          "new_line_content": "        return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 10010,
          "old_api": "equalStringObjects",
          "new_api": null,
          "old_text": "equalStringObjects(pa->pattern,pb->pattern)",
          "new_text": null,
          "old_line_content": "           (equalStringObjects(pa->pattern,pb->pattern));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5918,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "    zsetnum = atoi(c->argv[2]->ptr);",
          "new_line_content": "    if (zsetnum < 1) {",
          "content_same": false
        },
        {
          "line": 7966,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "                strerror(errno));",
          "new_line_content": "            return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 5920,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR at least 1 input key is needed for ZUNIONSTORE/ZINTERSTORE\\r\\n\")",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(\"-ERR at least 1 input key is needed for ZUNIONSTORE/ZINTERSTORE\\r\\n\"));",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 10021,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(c->pubsub_channels,channel,NULL)",
          "new_text": null,
          "old_line_content": "    if (dictAdd(c->pubsub_channels,channel,NULL) == DICT_OK) {",
          "new_line_content": "        retval = 1;",
          "content_same": false
        },
        {
          "line": 5926,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.syntaxerr);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 10023,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(channel)",
          "new_text": null,
          "old_line_content": "        incrRefCount(channel);",
          "new_line_content": "        /* Add the client to the channel -> list of clients hash table */",
          "content_same": false
        },
        {
          "line": 7973,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "                strerror(errno));",
          "new_line_content": "            return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 10025,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(server.pubsub_channels,channel)",
          "new_text": null,
          "old_line_content": "        de = dictFind(server.pubsub_channels,channel);",
          "new_line_content": "        if (de == NULL) {",
          "content_same": false
        },
        {
          "line": 7978,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Cannot AUTH to MASTER, is the masterauth password correct?\")",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,\"Cannot AUTH to MASTER, is the masterauth password correct?\");",
          "new_line_content": "            return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 5931,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(zsetopsrc) * zsetnum)",
          "new_text": null,
          "old_line_content": "    src = zmalloc(sizeof(zsetopsrc) * zsetnum);",
          "new_line_content": "    for (i = 0, j = 3; i < zsetnum; i++, j++) {",
          "content_same": false
        },
        {
          "line": 10029,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(channel)",
          "new_text": null,
          "old_line_content": "            incrRefCount(channel);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 5933,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[j])",
          "new_text": null,
          "old_line_content": "        robj *zsetobj = lookupKeyWrite(c->db,c->argv[j]);",
          "new_line_content": "        if (!zsetobj) {",
          "content_same": false
        },
        {
          "line": 10031,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "            clients = dictGetEntryVal(de);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 10033,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(clients,c)",
          "new_text": null,
          "old_line_content": "        listAddNodeTail(clients,c);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5939,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "                addReply(c,shared.wrongtypeerr);",
          "new_line_content": "                return;",
          "content_same": false
        },
        {
          "line": 7987,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "            strerror(errno));",
          "new_line_content": "        return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 10039,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(c->pubsub_patterns)",
          "new_text": null,
          "old_line_content": "    addReplyLong(c,dictSize(c->pubsub_channels)+listLength(c->pubsub_patterns));",
          "new_line_content": "    return retval;",
          "content_same": false
        },
        {
          "line": 7994,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "            strerror(errno));",
          "new_line_content": "        return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 7999,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Bad protocol from MASTER, the first byte is not '$', are you sure the host and port are right?\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Bad protocol from MASTER, the first byte is not '$', are you sure the host and port are right?\");",
          "new_line_content": "        return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 5954,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"weights\")",
          "new_text": null,
          "old_line_content": "            if (remaining >= (zsetnum + 1) && !strcasecmp(c->argv[j]->ptr,\"weights\")) {",
          "new_line_content": "                j++; remaining--;",
          "content_same": false
        },
        {
          "line": 8003,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Receiving %ld bytes data dump from MASTER\",dumpsize)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_NOTICE,\"Receiving %ld bytes data dump from MASTER\",dumpsize);",
          "new_line_content": "    /* Read the bulk write data on a temp file */",
          "content_same": false
        },
        {
          "line": 10052,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(channel)",
          "new_text": null,
          "old_line_content": "    incrRefCount(channel); /* channel may be just a pointer to the same object",
          "new_line_content": "                            we have in the hash tables. Protect it... */",
          "content_same": false
        },
        {
          "line": 5957,
          "old_api": "getDoubleFromObjectOrReply",
          "new_api": null,
          "old_text": "getDoubleFromObjectOrReply(c, c->argv[j], &src[i].weight, NULL)",
          "new_text": null,
          "old_line_content": "                    if (getDoubleFromObjectOrReply(c, c->argv[j], &src[i].weight, NULL) != REDIS_OK)",
          "new_line_content": "                        return;",
          "content_same": false
        },
        {
          "line": 10054,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(c->pubsub_channels,channel)",
          "new_text": null,
          "old_line_content": "    if (dictDelete(c->pubsub_channels,channel) == DICT_OK) {",
          "new_line_content": "        retval = 1;",
          "content_same": false
        },
        {
          "line": 5960,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"aggregate\")",
          "new_text": null,
          "old_line_content": "            } else if (remaining >= 2 && !strcasecmp(c->argv[j]->ptr,\"aggregate\")) {",
          "new_line_content": "                j++; remaining--;",
          "content_same": false
        },
        {
          "line": 8008,
          "old_api": "open",
          "new_api": null,
          "old_text": "open(tmpfile,O_CREAT|O_WRONLY|O_EXCL,0644)",
          "new_text": null,
          "old_line_content": "        dfd = open(tmpfile,O_CREAT|O_WRONLY|O_EXCL,0644);",
          "new_line_content": "        if (dfd != -1) break;",
          "content_same": false
        },
        {
          "line": 5962,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"sum\")",
          "new_text": null,
          "old_line_content": "                if (!strcasecmp(c->argv[j]->ptr,\"sum\")) {",
          "new_line_content": "                    aggregate = REDIS_AGGR_SUM;",
          "content_same": false
        },
        {
          "line": 8010,
          "old_api": "sleep",
          "new_api": null,
          "old_text": "sleep(1)",
          "new_text": null,
          "old_line_content": "        sleep(1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5964,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"min\")",
          "new_text": null,
          "old_line_content": "                } else if (!strcasecmp(c->argv[j]->ptr,\"min\")) {",
          "new_line_content": "                    aggregate = REDIS_AGGR_MIN;",
          "content_same": false
        },
        {
          "line": 5966,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"max\")",
          "new_text": null,
          "old_line_content": "                } else if (!strcasecmp(c->argv[j]->ptr,\"max\")) {",
          "new_line_content": "                    aggregate = REDIS_AGGR_MAX;",
          "content_same": false
        },
        {
          "line": 10063,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(clients)",
          "new_text": null,
          "old_line_content": "        if (listLength(clients) == 0) {",
          "new_line_content": "            /* Free the list and associated hash entry at all if this was",
          "content_same": false
        },
        {
          "line": 8014,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Opening the temp file needed for MASTER <-> SLAVE synchronization: %s\",strerror(errno));",
          "new_line_content": "        return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 5970,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "                    addReply(c,shared.syntaxerr);",
          "new_line_content": "                    return;",
          "content_same": false
        },
        {
          "line": 10067,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(server.pubsub_channels,channel)",
          "new_text": null,
          "old_line_content": "            dictDelete(server.pubsub_channels,channel);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 8020,
          "old_api": "read",
          "new_api": null,
          "old_text": "read(fd,buf,(dumpsize < 1024)?dumpsize:1024)",
          "new_text": null,
          "old_line_content": "        nread = read(fd,buf,(dumpsize < 1024)?dumpsize:1024);",
          "new_line_content": "        if (nread == -1) {",
          "content_same": false
        },
        {
          "line": 5976,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "                addReply(c,shared.syntaxerr);",
          "new_line_content": "                return;",
          "content_same": false
        },
        {
          "line": 8025,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(dfd)",
          "new_text": null,
          "old_line_content": "            close(dfd);",
          "new_line_content": "            return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 10076,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(c->pubsub_patterns)",
          "new_text": null,
          "old_line_content": "                       listLength(c->pubsub_patterns));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8028,
          "old_api": "write",
          "new_api": null,
          "old_text": "write(dfd,buf,nread)",
          "new_text": null,
          "old_line_content": "        nwritten = write(dfd,buf,nread);",
          "new_line_content": "        if (nwritten == -1) {",
          "content_same": false
        },
        {
          "line": 10079,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(channel)",
          "new_text": null,
          "old_line_content": "    decrRefCount(channel); /* it is finally safe to release it */",
          "new_line_content": "    return retval;",
          "content_same": false
        },
        {
          "line": 5984,
          "old_api": "qsort",
          "new_api": null,
          "old_text": "qsort(src,zsetnum,sizeof(zsetopsrc), qsortCompareZsetopsrcByCardinality)",
          "new_text": null,
          "old_line_content": "    qsort(src,zsetnum,sizeof(zsetopsrc), qsortCompareZsetopsrcByCardinality);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8032,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(dfd)",
          "new_text": null,
          "old_line_content": "            close(dfd);",
          "new_line_content": "            return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 5986,
          "old_api": "createZsetObject",
          "new_api": null,
          "old_text": "createZsetObject()",
          "new_text": null,
          "old_line_content": "    dstobj = createZsetObject();",
          "new_line_content": "    dstzset = dstobj->ptr;",
          "content_same": false
        },
        {
          "line": 10087,
          "old_api": "listSearchKey",
          "new_api": null,
          "old_text": "listSearchKey(c->pubsub_patterns,pattern)",
          "new_text": null,
          "old_line_content": "    if (listSearchKey(c->pubsub_patterns,pattern) == NULL) {",
          "new_line_content": "        retval = 1;",
          "content_same": false
        },
        {
          "line": 5991,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(src[0].dict)",
          "new_text": null,
          "old_line_content": "        if (src[0].dict && dictSize(src[0].dict) > 0) {",
          "new_line_content": "            /* precondition: as src[0].dict is non-empty and the zsets are ordered",
          "content_same": false
        },
        {
          "line": 8041,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd)",
          "new_text": null,
          "old_line_content": "        close(fd);",
          "new_line_content": "        return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 10093,
          "old_api": "getDecodedObject",
          "new_api": null,
          "old_text": "getDecodedObject(pattern)",
          "new_text": null,
          "old_line_content": "        pat->pattern = getDecodedObject(pattern);",
          "new_line_content": "        pat->client = c;",
          "content_same": false
        },
        {
          "line": 5997,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "                *score = src[0].weight * (*(double*)dictGetEntryVal(de));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 10095,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(server.pubsub_patterns,pat)",
          "new_text": null,
          "old_line_content": "        listAddNodeTail(server.pubsub_patterns,pat);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6000,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "                    dictEntry *other = dictFind(src[j].dict,dictGetEntryKey(de));",
          "new_line_content": "                    if (other) {",
          "content_same": false
        },
        {
          "line": 8047,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd)",
          "new_text": null,
          "old_line_content": "        close(fd);",
          "new_line_content": "        return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 8050,
          "old_api": "createClient",
          "new_api": null,
          "old_text": "createClient(fd)",
          "new_text": null,
          "old_line_content": "    server.master = createClient(fd);",
          "new_line_content": "    server.master->flags |= REDIS_MASTER;",
          "content_same": false
        },
        {
          "line": 6003,
          "old_api": "zunionInterAggregate",
          "new_api": null,
          "old_text": "zunionInterAggregate(score, value, aggregate)",
          "new_text": null,
          "old_line_content": "                        zunionInterAggregate(score, value, aggregate);",
          "new_line_content": "                    } else {",
          "content_same": false
        },
        {
          "line": 10101,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(c->pubsub_patterns)",
          "new_text": null,
          "old_line_content": "    addReplyLong(c,dictSize(c->pubsub_channels)+listLength(c->pubsub_patterns));",
          "new_line_content": "    return retval;",
          "content_same": false
        },
        {
          "line": 6011,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(score)",
          "new_text": null,
          "old_line_content": "                    zfree(score);",
          "new_line_content": "                } else {",
          "content_same": false
        },
        {
          "line": 8059,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[2]->ptr,\"one\")",
          "new_text": null,
          "old_line_content": "        !strcasecmp(c->argv[2]->ptr,\"one\")) {",
          "new_line_content": "        if (server.masterhost) {",
          "content_same": false
        },
        {
          "line": 8061,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(server.masterhost)",
          "new_text": null,
          "old_line_content": "            sdsfree(server.masterhost);",
          "new_line_content": "            server.masterhost = NULL;",
          "content_same": false
        },
        {
          "line": 8063,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(server.master)",
          "new_text": null,
          "old_line_content": "            if (server.master) freeClient(server.master);",
          "new_line_content": "            server.replstate = REDIS_REPL_NONE;",
          "content_same": false
        },
        {
          "line": 10113,
          "old_api": "listSearchKey",
          "new_api": null,
          "old_text": "listSearchKey(c->pubsub_patterns,pattern)",
          "new_text": null,
          "old_line_content": "    if ((ln = listSearchKey(c->pubsub_patterns,pattern)) != NULL) {",
          "new_line_content": "        retval = 1;",
          "content_same": false
        },
        {
          "line": 6017,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(o)",
          "new_text": null,
          "old_line_content": "                    incrRefCount(o); /* added to skiplist */",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 10115,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(c->pubsub_patterns,ln)",
          "new_text": null,
          "old_line_content": "        listDelNode(c->pubsub_patterns,ln);",
          "new_line_content": "        pat.client = c;",
          "content_same": false
        },
        {
          "line": 6020,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "            dictReleaseIterator(di);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 8065,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"MASTER MODE enabled (user request)\")",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_NOTICE,\"MASTER MODE enabled (user request)\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 10119,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(server.pubsub_patterns,ln)",
          "new_text": null,
          "old_line_content": "        listDelNode(server.pubsub_patterns,ln);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 8071,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(server.master)",
          "new_text": null,
          "old_line_content": "        if (server.master) freeClient(server.master);",
          "new_line_content": "        server.replstate = REDIS_REPL_CONNECT;",
          "content_same": false
        },
        {
          "line": 8073,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"SLAVE OF %s:%d enabled (user request)\",\n            server.masterhost, server.masterport)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_NOTICE,\"SLAVE OF %s:%d enabled (user request)\",",
          "new_line_content": "            server.masterhost, server.masterport);",
          "content_same": false
        },
        {
          "line": 6027,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "            while((de = dictNext(di)) != NULL) {",
          "new_line_content": "                /* skip key when already processed */",
          "content_same": false
        },
        {
          "line": 8076,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.ok);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6029,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "                if (dictFind(dstzset->dict,dictGetEntryKey(de)) != NULL) continue;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 10127,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(c->pubsub_patterns)",
          "new_text": null,
          "old_line_content": "                       listLength(c->pubsub_patterns));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6032,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "                *score = src[i].weight * (*(double*)dictGetEntryVal(de));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 10129,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(pattern)",
          "new_text": null,
          "old_line_content": "    decrRefCount(pattern);",
          "new_line_content": "    return retval;",
          "content_same": false
        },
        {
          "line": 6037,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "                    dictEntry *other = dictFind(src[j].dict,dictGetEntryKey(de));",
          "new_line_content": "                    if (other) {",
          "content_same": false
        },
        {
          "line": 10136,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(c->pubsub_channels)",
          "new_text": null,
          "old_line_content": "    dictIterator *di = dictGetIterator(c->pubsub_channels);",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 6040,
          "old_api": "zunionInterAggregate",
          "new_api": null,
          "old_text": "zunionInterAggregate(score, value, aggregate)",
          "new_text": null,
          "old_line_content": "                        zunionInterAggregate(score, value, aggregate);",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 10141,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "        robj *channel = dictGetEntryKey(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8094,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(o)",
          "new_text": null,
          "old_line_content": "        zfree(o);",
          "new_line_content": "        return REDIS_OK;",
          "content_same": false
        },
        {
          "line": 10143,
          "old_api": "pubsubUnsubscribeChannel",
          "new_api": null,
          "old_text": "pubsubUnsubscribeChannel(c,channel,notify)",
          "new_text": null,
          "old_line_content": "        count += pubsubUnsubscribeChannel(c,channel,notify);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6048,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(o)",
          "new_text": null,
          "old_line_content": "                incrRefCount(o); /* added to skiplist */",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 10145,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "    return count;",
          "content_same": false
        },
        {
          "line": 6050,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "            dictReleaseIterator(di);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 8097,
          "old_api": "pthread_mutex_unlock",
          "new_api": null,
          "old_text": "pthread_mutex_unlock(&server.obj_freelist_mutex)",
          "new_text": null,
          "old_line_content": "        if (server.vm_enabled) pthread_mutex_unlock(&server.obj_freelist_mutex);",
          "new_line_content": "        return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 6054,
          "old_api": "redisAssert",
          "new_api": null,
          "old_text": "redisAssert(op == REDIS_OP_INTER || op == REDIS_OP_UNION)",
          "new_text": null,
          "old_line_content": "        redisAssert(op == REDIS_OP_INTER || op == REDIS_OP_UNION);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6057,
          "old_api": "deleteKey",
          "new_api": null,
          "old_text": "deleteKey(c->db,dstkey)",
          "new_text": null,
          "old_line_content": "    deleteKey(c->db,dstkey);",
          "new_line_content": "    if (dstzset->zsl->length) {",
          "content_same": false
        },
        {
          "line": 10157,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "    while ((ln = listNext(&li)) != NULL) {",
          "new_line_content": "        robj *pattern = ln->value;",
          "content_same": false
        },
        {
          "line": 6061,
          "old_api": "addReplyLong",
          "new_api": null,
          "old_text": "addReplyLong(c, dstzset->zsl->length)",
          "new_text": null,
          "old_line_content": "        addReplyLong(c, dstzset->zsl->length);",
          "new_line_content": "        server.dirty++;",
          "content_same": false
        },
        {
          "line": 10160,
          "old_api": "pubsubUnsubscribePattern",
          "new_api": null,
          "old_text": "pubsubUnsubscribePattern(c,pattern,notify)",
          "new_text": null,
          "old_line_content": "        count += pubsubUnsubscribePattern(c,pattern,notify);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6065,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c, shared.czero);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 8114,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "    while (server.maxmemory && zmalloc_used_memory() > server.maxmemory) {",
          "new_line_content": "        int j, k, freed = 0;",
          "content_same": false
        },
        {
          "line": 6067,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(src)",
          "new_text": null,
          "old_line_content": "    zfree(src);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 8117,
          "old_api": "tryFreeOneObjectFromFreelist",
          "new_api": null,
          "old_text": "tryFreeOneObjectFromFreelist()",
          "new_text": null,
          "old_line_content": "        if (tryFreeOneObjectFromFreelist() == REDIS_OK) continue;",
          "new_line_content": "        for (j = 0; j < server.dbnum; j++) {",
          "content_same": false
        },
        {
          "line": 6071,
          "old_api": "zunionInterGenericCommand",
          "new_api": null,
          "old_text": "zunionInterGenericCommand(c,c->argv[1], REDIS_OP_UNION)",
          "new_text": null,
          "old_line_content": "    zunionInterGenericCommand(c,c->argv[1], REDIS_OP_UNION);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6075,
          "old_api": "zunionInterGenericCommand",
          "new_api": null,
          "old_text": "zunionInterGenericCommand(c,c->argv[1], REDIS_OP_INTER)",
          "new_text": null,
          "old_line_content": "    zunionInterGenericCommand(c,c->argv[1], REDIS_OP_INTER);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 8123,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.db[j].expires)",
          "new_text": null,
          "old_line_content": "            if (dictSize(server.db[j].expires)) {",
          "new_line_content": "                freed = 1;",
          "content_same": false
        },
        {
          "line": 10173,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(server.pubsub_channels,channel)",
          "new_text": null,
          "old_line_content": "    de = dictFind(server.pubsub_channels,channel);",
          "new_line_content": "    if (de) {",
          "content_same": false
        },
        {
          "line": 10175,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "        list *list = dictGetEntryVal(de);",
          "new_line_content": "        listNode *ln;",
          "content_same": false
        },
        {
          "line": 8131,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "                    t = (time_t) dictGetEntryVal(de);",
          "new_line_content": "                    if (minttl == -1 || t < minttl) {",
          "content_same": false
        },
        {
          "line": 10180,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "        while ((ln = listNext(&li)) != NULL) {",
          "new_line_content": "            redisClient *c = ln->value;",
          "content_same": false
        },
        {
          "line": 8133,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "                        minkey = dictGetEntryKey(de);",
          "new_line_content": "                        minttl = t;",
          "content_same": false
        },
        {
          "line": 8137,
          "old_api": "deleteKey",
          "new_api": null,
          "old_text": "deleteKey(server.db+j,minkey)",
          "new_text": null,
          "old_line_content": "                deleteKey(server.db+j,minkey);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 10186,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,message)",
          "new_text": null,
          "old_line_content": "            addReplyBulk(c,message);",
          "new_line_content": "            receivers++;",
          "content_same": false
        },
        {
          "line": 6091,
          "old_api": "getLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongFromObjectOrReply(c, c->argv[3], &end, NULL)",
          "new_text": null,
          "old_line_content": "        (getLongFromObjectOrReply(c, c->argv[3], &end, NULL) != REDIS_OK)) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6093,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[4]->ptr,\"withscores\")",
          "new_text": null,
          "old_line_content": "    if (c->argc == 5 && !strcasecmp(c->argv[4]->ptr,\"withscores\")) {",
          "new_line_content": "        withscores = 1;",
          "content_same": false
        },
        {
          "line": 6096,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.syntaxerr);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 10194,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "        while ((ln = listNext(&li)) != NULL) {",
          "new_line_content": "            pubsubPattern *pat = ln->value;",
          "content_same": false
        },
        {
          "line": 6101,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_ZSET)",
          "new_text": null,
          "old_line_content": "         || checkType(c,o,REDIS_ZSET)) return;",
          "new_line_content": "    zsetobj = o->ptr;",
          "content_same": false
        },
        {
          "line": 10198,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(pat->pattern->ptr)",
          "new_text": null,
          "old_line_content": "                                sdslen(pat->pattern->ptr),",
          "new_line_content": "                                (char*)channel->ptr,",
          "content_same": false
        },
        {
          "line": 10205,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(pat->client,message)",
          "new_text": null,
          "old_line_content": "                addReplyBulk(pat->client,message);",
          "new_line_content": "                receivers++;",
          "content_same": false
        },
        {
          "line": 8157,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(server.aofbuf)",
          "new_text": null,
          "old_line_content": "    if (sdslen(server.aofbuf) == 0) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 10209,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(channel)",
          "new_text": null,
          "old_line_content": "        decrRefCount(channel);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6115,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.emptymultibulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.emptymultibulk);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 8165,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(server.aofbuf)",
          "new_text": null,
          "old_line_content": "     if (nwritten != (signed)sdslen(server.aofbuf)) {",
          "new_line_content": "        /* Ooops, we are in troubles. The best thing to do for now is",
          "content_same": false
        },
        {
          "line": 10218,
          "old_api": "pubsubSubscribeChannel",
          "new_api": null,
          "old_text": "pubsubSubscribeChannel(c,c->argv[j])",
          "new_text": null,
          "old_line_content": "        pubsubSubscribeChannel(c,c->argv[j]);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 8170,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,\"Exiting on error writing to the append-only file: %s\",strerror(errno));",
          "new_line_content": "         } else {",
          "content_same": false
        },
        {
          "line": 6124,
          "old_api": "zslGetElementByRank",
          "new_api": null,
          "old_text": "zslGetElementByRank(zsl, llen-start)",
          "new_text": null,
          "old_line_content": "        ln = start == 0 ? zsl->tail : zslGetElementByRank(zsl, llen-start);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 8172,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,\"Exiting on short write while writing to the append-only file: %s\",strerror(errno));",
          "new_line_content": "         }",
          "content_same": false
        },
        {
          "line": 8174,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "         exit(1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 10223,
          "old_api": "pubsubUnsubscribeAllChannels",
          "new_api": null,
          "old_text": "pubsubUnsubscribeAllChannels(c,1)",
          "new_text": null,
          "old_line_content": "        pubsubUnsubscribeAllChannels(c,1);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 6127,
          "old_api": "zslGetElementByRank",
          "new_api": null,
          "old_text": "zslGetElementByRank(zsl, start+1)",
          "new_text": null,
          "old_line_content": "            zsl->header->forward[0] : zslGetElementByRank(zsl, start+1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 8177,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    server.aofbuf = sdsempty();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6131,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",",
          "new_line_content": "        withscores ? (rangelen*2) : rangelen));",
          "content_same": false
        },
        {
          "line": 8180,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    now = time(NULL);",
          "new_line_content": "    if (server.appendfsync == APPENDFSYNC_ALWAYS ||",
          "content_same": false
        },
        {
          "line": 10229,
          "old_api": "pubsubUnsubscribeChannel",
          "new_api": null,
          "old_text": "pubsubUnsubscribeChannel(c,c->argv[j],1)",
          "new_text": null,
          "old_line_content": "            pubsubUnsubscribeChannel(c,c->argv[j],1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6135,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,ele)",
          "new_text": null,
          "old_line_content": "        addReplyBulk(c,ele);",
          "new_line_content": "        if (withscores)",
          "content_same": false
        },
        {
          "line": 6137,
          "old_api": "addReplyDouble",
          "new_api": null,
          "old_text": "addReplyDouble(c,ln->score)",
          "new_text": null,
          "old_line_content": "            addReplyDouble(c,ln->score);",
          "new_line_content": "        ln = reverse ? ln->backward : ln->forward[0];",
          "content_same": false
        },
        {
          "line": 8187,
          "old_api": "aof_fsync",
          "new_api": null,
          "old_text": "aof_fsync(server.appendfd)",
          "new_text": null,
          "old_line_content": "        aof_fsync(server.appendfd); /* Let's try to get this data on the disk */",
          "new_line_content": "        server.lastfsync = now;",
          "content_same": false
        },
        {
          "line": 10237,
          "old_api": "pubsubSubscribePattern",
          "new_api": null,
          "old_text": "pubsubSubscribePattern(c,c->argv[j])",
          "new_text": null,
          "old_line_content": "        pubsubSubscribePattern(c,c->argv[j]);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6143,
          "old_api": "zrangeGenericCommand",
          "new_api": null,
          "old_text": "zrangeGenericCommand(c,0)",
          "new_text": null,
          "old_line_content": "    zrangeGenericCommand(c,0);",
          "new_line_content": "}",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 682,
      "total_additions": 1101,
      "total_deletions": 1102,
      "total_api_changes": 2885
    },
    "non_api_changes": {
      "has_non_api_changes": false,
      "evidence": {
        "total_diff_lines": 2,
        "api_related_lines": 2885,
        "non_api_lines": 0,
        "non_api_line_numbers": []
      }
    },
    "api_calls_before": 3176,
    "api_calls_after": 3173,
    "diff_info": {
      "added_lines": 1,
      "removed_lines": 2,
      "total_diff_lines": 15
    }
  }
}
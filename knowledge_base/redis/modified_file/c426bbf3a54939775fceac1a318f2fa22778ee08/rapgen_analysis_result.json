{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/c426bbf3a54939775fceac1a318f2fa22778ee08",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/c426bbf3a54939775fceac1a318f2fa22778ee08/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/c426bbf3a54939775fceac1a318f2fa22778ee08/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/c426bbf3a54939775fceac1a318f2fa22778ee08/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 1392,
          "old_api": "addReplyBulkCBuffer",
          "new_api": "addReply",
          "old_text": "addReplyBulkCBuffer(c, \"\", 0)",
          "new_text": "addReply(c,shared.emptybulk)",
          "old_line_content": "    addReplyBulkCBuffer(c, \"\", 0);",
          "new_line_content": "    addReply(c,shared.emptybulk);",
          "content_same": false
        },
        {
          "line": 1427,
          "old_api": "sdsnewlen",
          "new_api": "addReplySds",
          "old_text": "sdsnewlen(reply->proto, reply->protolen)",
          "new_text": "addReplySds(c,proto)",
          "old_line_content": "    sds proto = sdsnewlen(reply->proto, reply->protolen);",
          "new_line_content": "    addReplySds(c,proto);",
          "content_same": false
        },
        {
          "line": 1520,
          "old_api": "va_start",
          "new_api": "moduleCreateArgvFromUserFormat",
          "old_text": "va_start(ap, fmt)",
          "new_text": "moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap)",
          "old_line_content": "    va_start(ap, fmt);",
          "new_line_content": "    argv = moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap);",
          "content_same": false
        },
        {
          "line": 1521,
          "old_api": "moduleCreateArgvFromUserFormat",
          "new_api": "va_end",
          "old_text": "moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap)",
          "new_text": "va_end(ap)",
          "old_line_content": "    argv = moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap);",
          "new_line_content": "    va_end(ap);",
          "content_same": false
        },
        {
          "line": 1539,
          "old_api": "moduleReplicateMultiIfNeeded",
          "new_api": "alsoPropagate",
          "old_text": "moduleReplicateMultiIfNeeded(ctx)",
          "new_text": "alsoPropagate(cmd,ctx->client->db->id,argv,argc,target)",
          "old_line_content": "        moduleReplicateMultiIfNeeded(ctx);",
          "new_line_content": "        alsoPropagate(cmd,ctx->client->db->id,argv,argc,target);",
          "content_same": false
        },
        {
          "line": 1544,
          "old_api": "decrRefCount",
          "new_api": "zfree",
          "old_text": "decrRefCount(argv[j])",
          "new_text": "zfree(argv)",
          "old_line_content": "    for (j = 0; j < argc; j++) decrRefCount(argv[j]);",
          "new_line_content": "    zfree(argv);",
          "content_same": false
        },
        {
          "line": 1703,
          "old_api": "UNUSED",
          "new_api": "pubsubPublishMessage",
          "old_text": "UNUSED(ctx)",
          "new_text": "pubsubPublishMessage(channel, message)",
          "old_line_content": "    UNUSED(ctx);",
          "new_line_content": "    int receivers = pubsubPublishMessage(channel, message);",
          "content_same": false
        },
        {
          "line": 1888,
          "old_api": "zsetKeyReset",
          "new_api": "autoMemoryAdd",
          "old_text": "zsetKeyReset(kp)",
          "new_text": "autoMemoryAdd(ctx,REDISMODULE_AM_KEY,kp)",
          "old_line_content": "    zsetKeyReset(kp);",
          "new_line_content": "    autoMemoryAdd(ctx,REDISMODULE_AM_KEY,kp);",
          "content_same": false
        },
        {
          "line": 1900,
          "old_api": "RM_ZsetRangeStop",
          "new_api": "decrRefCount",
          "old_text": "RM_ZsetRangeStop(key)",
          "new_text": "decrRefCount(key->key)",
          "old_line_content": "    RM_ZsetRangeStop(key);",
          "new_line_content": "    decrRefCount(key->key);",
          "content_same": false
        },
        {
          "line": 1901,
          "old_api": "decrRefCount",
          "new_api": "autoMemoryFreed",
          "old_text": "decrRefCount(key->key)",
          "new_text": "autoMemoryFreed(key->ctx,REDISMODULE_AM_KEY,key)",
          "old_line_content": "    decrRefCount(key->key);",
          "new_line_content": "    autoMemoryFreed(key->ctx,REDISMODULE_AM_KEY,key);",
          "content_same": false
        },
        {
          "line": 1902,
          "old_api": "autoMemoryFreed",
          "new_api": "zfree",
          "old_text": "autoMemoryFreed(key->ctx,REDISMODULE_AM_KEY,key)",
          "new_text": "zfree(key)",
          "old_line_content": "    autoMemoryFreed(key->ctx,REDISMODULE_AM_KEY,key);",
          "new_line_content": "    zfree(key);",
          "content_same": false
        },
        {
          "line": 1931,
          "old_api": "stringObjectLen",
          "new_api": "listTypeLength",
          "old_text": "stringObjectLen(key->value)",
          "new_text": "listTypeLength(key->value)",
          "old_line_content": "    case OBJ_STRING: return stringObjectLen(key->value);",
          "new_line_content": "    case OBJ_LIST: return listTypeLength(key->value);",
          "content_same": false
        },
        {
          "line": 1932,
          "old_api": "listTypeLength",
          "new_api": "setTypeSize",
          "old_text": "listTypeLength(key->value)",
          "new_text": "setTypeSize(key->value)",
          "old_line_content": "    case OBJ_LIST: return listTypeLength(key->value);",
          "new_line_content": "    case OBJ_SET: return setTypeSize(key->value);",
          "content_same": false
        },
        {
          "line": 1933,
          "old_api": "setTypeSize",
          "new_api": "zsetLength",
          "old_text": "setTypeSize(key->value)",
          "new_text": "zsetLength(key->value)",
          "old_line_content": "    case OBJ_SET: return setTypeSize(key->value);",
          "new_line_content": "    case OBJ_ZSET: return zsetLength(key->value);",
          "content_same": false
        },
        {
          "line": 1934,
          "old_api": "zsetLength",
          "new_api": "hashTypeLength",
          "old_text": "zsetLength(key->value)",
          "new_text": "hashTypeLength(key->value)",
          "old_line_content": "    case OBJ_ZSET: return zsetLength(key->value);",
          "new_line_content": "    case OBJ_HASH: return hashTypeLength(key->value);",
          "content_same": false
        },
        {
          "line": 1990,
          "old_api": "mstime",
          "new_api": "setExpire",
          "old_text": "mstime()",
          "new_text": "setExpire(key->ctx->client,key->db,key->key,expire)",
          "old_line_content": "        expire += mstime();",
          "new_line_content": "        setExpire(key->ctx->client,key->db,key->key,expire);",
          "content_same": false
        },
        {
          "line": 2003,
          "old_api": "stopAppendOnly",
          "new_api": "flushAllDataAndResetRDB",
          "old_text": "stopAppendOnly()",
          "new_text": "flushAllDataAndResetRDB(async? EMPTYDB_ASYNC: EMPTYDB_NO_FLAGS)",
          "old_line_content": "    if (restart_aof && server.aof_state != AOF_OFF) stopAppendOnly();",
          "new_line_content": "    flushAllDataAndResetRDB(async? EMPTYDB_ASYNC: EMPTYDB_NO_FLAGS);",
          "content_same": false
        },
        {
          "line": 2004,
          "old_api": "flushAllDataAndResetRDB",
          "new_api": "restartAOFAfterSYNC",
          "old_text": "flushAllDataAndResetRDB(async? EMPTYDB_ASYNC: EMPTYDB_NO_FLAGS)",
          "new_text": "restartAOFAfterSYNC()",
          "old_line_content": "    flushAllDataAndResetRDB(async? EMPTYDB_ASYNC: EMPTYDB_NO_FLAGS);",
          "new_line_content": "    if (server.aof_enabled && restart_aof) restartAOFAfterSYNC();",
          "content_same": false
        },
        {
          "line": 2015,
          "old_api": "dbRandomKey",
          "new_api": "autoMemoryAdd",
          "old_text": "dbRandomKey(ctx->client->db)",
          "new_text": "autoMemoryAdd(ctx,REDISMODULE_AM_STRING,key)",
          "old_line_content": "    robj *key = dbRandomKey(ctx->client->db);",
          "new_line_content": "    autoMemoryAdd(ctx,REDISMODULE_AM_STRING,key);",
          "content_same": false
        },
        {
          "line": 2030,
          "old_api": "RM_DeleteKey",
          "new_api": "setKey",
          "old_text": "RM_DeleteKey(key)",
          "new_text": "setKey(key->db,key->key,str)",
          "old_line_content": "    RM_DeleteKey(key);",
          "new_line_content": "    setKey(key->db,key->key,str);",
          "content_same": false
        },
        {
          "line": 2110,
          "old_api": "sdsnewlen",
          "new_api": "setKey",
          "old_text": "sdsnewlen(NULL, newlen)",
          "new_text": "setKey(key->db,key->key,o)",
          "old_line_content": "        robj *o = createObject(OBJ_STRING,sdsnewlen(NULL, newlen));",
          "new_line_content": "        setKey(key->db,key->key,o);",
          "content_same": false
        },
        {
          "line": 2116,
          "old_api": "dbUnshareStringValue",
          "new_api": "sdslen",
          "old_text": "dbUnshareStringValue(key->db, key->key, key->value)",
          "new_text": "sdslen(key->value->ptr)",
          "old_line_content": "        key->value = dbUnshareStringValue(key->db, key->key, key->value);",
          "new_line_content": "        size_t curlen = sdslen(key->value->ptr);",
          "content_same": false
        },
        {
          "line": 2123,
          "old_api": "sdsavail",
          "new_api": "sdsRemoveFreeSpace",
          "old_text": "sdsavail(key->value->ptr)",
          "new_text": "sdsRemoveFreeSpace(key->value->ptr)",
          "old_line_content": "            if (sdslen(key->value->ptr) < sdsavail(key->value->ptr))",
          "new_line_content": "                key->value->ptr = sdsRemoveFreeSpace(key->value->ptr);",
          "content_same": false
        },
        {
          "line": 2141,
          "old_api": "moduleCreateEmptyKey",
          "new_api": "listTypePush",
          "old_text": "moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_LIST)",
          "new_text": "listTypePush(key->value, ele,\n        (where == REDISMODULE_LIST_HEAD) ? QUICKLIST_HEAD : QUICKLIST_TAIL)",
          "old_line_content": "    if (key->value == NULL) moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_LIST);",
          "new_line_content": "    listTypePush(key->value, ele,",
          "content_same": false
        },
        {
          "line": 2160,
          "old_api": "getDecodedObject",
          "new_api": "decrRefCount",
          "old_text": "getDecodedObject(ele)",
          "new_text": "decrRefCount(ele)",
          "old_line_content": "    robj *decoded = getDecodedObject(ele);",
          "new_line_content": "    decrRefCount(ele);",
          "content_same": false
        },
        {
          "line": 2161,
          "old_api": "decrRefCount",
          "new_api": "moduleDelKeyIfEmpty",
          "old_text": "decrRefCount(ele)",
          "new_text": "moduleDelKeyIfEmpty(key)",
          "old_line_content": "    decrRefCount(ele);",
          "new_line_content": "    moduleDelKeyIfEmpty(key);",
          "content_same": false
        },
        {
          "line": 2162,
          "old_api": "moduleDelKeyIfEmpty",
          "new_api": "autoMemoryAdd",
          "old_text": "moduleDelKeyIfEmpty(key)",
          "new_text": "autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,decoded)",
          "old_line_content": "    moduleDelKeyIfEmpty(key);",
          "new_line_content": "    autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,decoded);",
          "content_same": false
        },
        {
          "line": 2221,
          "old_api": "moduleCreateEmptyKey",
          "new_api": "RM_ZsetAddFlagsToCoreFlags",
          "old_text": "moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_ZSET)",
          "new_text": "RM_ZsetAddFlagsToCoreFlags(*flagsptr)",
          "old_line_content": "    if (key->value == NULL) moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_ZSET);",
          "new_line_content": "    if (flagsptr) flags = RM_ZsetAddFlagsToCoreFlags(*flagsptr);",
          "content_same": false
        },
        {
          "line": 2222,
          "old_api": "RM_ZsetAddFlagsToCoreFlags",
          "new_api": "zsetAdd",
          "old_text": "RM_ZsetAddFlagsToCoreFlags(*flagsptr)",
          "new_text": "zsetAdd(key->value,score,ele->ptr,&flags,NULL)",
          "old_line_content": "    if (flagsptr) flags = RM_ZsetAddFlagsToCoreFlags(*flagsptr);",
          "new_line_content": "    if (zsetAdd(key->value,score,ele->ptr,&flags,NULL) == 0) {",
          "content_same": false
        },
        {
          "line": 2248,
          "old_api": "moduleCreateEmptyKey",
          "new_api": "RM_ZsetAddFlagsToCoreFlags",
          "old_text": "moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_ZSET)",
          "new_text": "RM_ZsetAddFlagsToCoreFlags(*flagsptr)",
          "old_line_content": "    if (key->value == NULL) moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_ZSET);",
          "new_line_content": "    if (flagsptr) flags = RM_ZsetAddFlagsToCoreFlags(*flagsptr);",
          "content_same": false
        },
        {
          "line": 2356,
          "old_api": "zzlFirstInRange",
          "new_api": "zzlLastInRange",
          "old_text": "zzlFirstInRange(key->value->ptr,zrs)",
          "new_text": "zzlLastInRange(key->value->ptr,zrs)",
          "old_line_content": "        key->zcurrent = first ? zzlFirstInRange(key->value->ptr,zrs) :",
          "new_line_content": "                                zzlLastInRange(key->value->ptr,zrs);",
          "content_same": false
        },
        {
          "line": 2361,
          "old_api": "zslFirstInRange",
          "new_api": "zslLastInRange",
          "old_text": "zslFirstInRange(zsl,zrs)",
          "new_text": "zslLastInRange(zsl,zrs)",
          "old_line_content": "        key->zcurrent = first ? zslFirstInRange(zsl,zrs) :",
          "new_line_content": "                                zslLastInRange(zsl,zrs);",
          "content_same": false
        },
        {
          "line": 2420,
          "old_api": "zzlFirstInLexRange",
          "new_api": "zzlLastInLexRange",
          "old_text": "zzlFirstInLexRange(key->value->ptr,zlrs)",
          "new_text": "zzlLastInLexRange(key->value->ptr,zlrs)",
          "old_line_content": "        key->zcurrent = first ? zzlFirstInLexRange(key->value->ptr,zlrs) :",
          "new_line_content": "                                zzlLastInLexRange(key->value->ptr,zlrs);",
          "content_same": false
        },
        {
          "line": 2425,
          "old_api": "zslFirstInLexRange",
          "new_api": "zslLastInLexRange",
          "old_text": "zslFirstInLexRange(zsl,zlrs)",
          "new_text": "zslLastInLexRange(zsl,zlrs)",
          "old_line_content": "        key->zcurrent = first ? zslFirstInLexRange(zsl,zlrs) :",
          "new_line_content": "                                zslLastInLexRange(zsl,zlrs);",
          "content_same": false
        },
        {
          "line": 2469,
          "old_api": "ziplistNext",
          "new_api": "zzlGetScore",
          "old_text": "ziplistNext(key->value->ptr,eptr)",
          "new_text": "zzlGetScore(sptr)",
          "old_line_content": "            sptr = ziplistNext(key->value->ptr,eptr);",
          "new_line_content": "            *score = zzlGetScore(sptr);",
          "content_same": false
        },
        {
          "line": 2505,
          "old_api": "ziplistNext",
          "new_api": "zzlGetScore",
          "old_text": "ziplistNext(zl,next)",
          "new_text": "zzlGetScore(next)",
          "old_line_content": "                next = ziplistNext(zl,next); /* Skip next element. */",
          "new_line_content": "                double score = zzlGetScore(next); /* Obtain the next score. */",
          "content_same": false
        },
        {
          "line": 2506,
          "old_api": "zzlGetScore",
          "new_api": "zslValueLteMax",
          "old_text": "zzlGetScore(next)",
          "new_text": "zslValueLteMax(score,&key->zrs)",
          "old_line_content": "                double score = zzlGetScore(next); /* Obtain the next score. */",
          "new_line_content": "                if (!zslValueLteMax(score,&key->zrs)) {",
          "content_same": false
        },
        {
          "line": 2568,
          "old_api": "ziplistNext",
          "new_api": "zzlGetScore",
          "old_text": "ziplistNext(zl,prev)",
          "new_text": "zzlGetScore(prev)",
          "old_line_content": "                prev = ziplistNext(zl,prev); /* Skip element to get the score.*/",
          "new_line_content": "                double score = zzlGetScore(prev); /* Obtain the prev score. */",
          "content_same": false
        },
        {
          "line": 2569,
          "old_api": "zzlGetScore",
          "new_api": "zslValueGteMin",
          "old_text": "zzlGetScore(prev)",
          "new_text": "zslValueGteMin(score,&key->zrs)",
          "old_line_content": "                double score = zzlGetScore(prev); /* Obtain the prev score. */",
          "new_line_content": "                if (!zslValueGteMin(score,&key->zrs)) {",
          "content_same": false
        },
        {
          "line": 2700,
          "old_api": "hashTypeDelete",
          "new_api": "decrRefCount",
          "old_text": "hashTypeDelete(key->value, field->ptr)",
          "new_text": "decrRefCount(field)",
          "old_line_content": "            updated += hashTypeDelete(key->value, field->ptr);",
          "new_line_content": "            if (flags & REDISMODULE_HASH_CFIELDS) decrRefCount(field);",
          "content_same": false
        },
        {
          "line": 2713,
          "old_api": "hashTypeTryConversion",
          "new_api": "hashTypeSet",
          "old_text": "hashTypeTryConversion(key->value,argv,0,1)",
          "new_text": "hashTypeSet(key->value, field->ptr, value->ptr, low_flags)",
          "old_line_content": "        hashTypeTryConversion(key->value,argv,0,1);",
          "new_line_content": "        updated += hashTypeSet(key->value, field->ptr, value->ptr, low_flags);",
          "content_same": false
        },
        {
          "line": 2723,
          "old_api": "va_end",
          "new_api": "moduleDelKeyIfEmpty",
          "old_text": "va_end(ap)",
          "new_text": "moduleDelKeyIfEmpty(key)",
          "old_line_content": "    va_end(ap);",
          "new_line_content": "    moduleDelKeyIfEmpty(key);",
          "content_same": false
        },
        {
          "line": 2799,
          "old_api": "getDecodedObject",
          "new_api": "decrRefCount",
          "old_text": "getDecodedObject(*valueptr)",
          "new_text": "decrRefCount(*valueptr)",
          "old_line_content": "                    robj *decoded = getDecodedObject(*valueptr);",
          "new_line_content": "                    decrRefCount(*valueptr);",
          "content_same": false
        },
        {
          "line": 2857,
          "old_api": "moduleParseCallReply_Int",
          "new_api": "moduleParseCallReply_BulkString",
          "old_text": "moduleParseCallReply_Int(reply)",
          "new_text": "moduleParseCallReply_BulkString(reply)",
          "old_line_content": "    case ':': moduleParseCallReply_Int(reply); break;",
          "new_line_content": "    case '$': moduleParseCallReply_BulkString(reply); break;",
          "content_same": false
        },
        {
          "line": 2860,
          "old_api": "moduleParseCallReply_SimpleString",
          "new_api": "moduleParseCallReply_Array",
          "old_text": "moduleParseCallReply_SimpleString(reply)",
          "new_text": "moduleParseCallReply_Array(reply)",
          "old_line_content": "    case '+': moduleParseCallReply_SimpleString(reply); break;",
          "new_line_content": "    case '*': moduleParseCallReply_Array(reply); break;",
          "content_same": false
        },
        {
          "line": 2943,
          "old_api": "RM_FreeCallReply_Rec",
          "new_api": "zfree",
          "old_text": "RM_FreeCallReply_Rec(reply->val.array+j,1)",
          "new_text": "zfree(reply->val.array)",
          "old_line_content": "                RM_FreeCallReply_Rec(reply->val.array+j,1);",
          "new_line_content": "            zfree(reply->val.array);",
          "content_same": false
        },
        {
          "line": 2953,
          "old_api": "sdsfree",
          "new_api": "zfree",
          "old_text": "sdsfree(reply->proto)",
          "new_text": "zfree(reply)",
          "old_line_content": "        if (reply->proto) sdsfree(reply->proto);",
          "new_line_content": "        zfree(reply);",
          "content_same": false
        },
        {
          "line": 2964,
          "old_api": "RM_FreeCallReply_Rec",
          "new_api": "autoMemoryFreed",
          "old_text": "RM_FreeCallReply_Rec(reply,0)",
          "new_text": "autoMemoryFreed(ctx,REDISMODULE_AM_REPLY,reply)",
          "old_line_content": "    RM_FreeCallReply_Rec(reply,0);",
          "new_line_content": "    autoMemoryFreed(ctx,REDISMODULE_AM_REPLY,reply);",
          "content_same": false
        },
        {
          "line": 3022,
          "old_api": "ll2string",
          "new_api": "RM_CreateString",
          "old_text": "ll2string(buf,sizeof(buf),reply->val.ll)",
          "new_text": "RM_CreateString(reply->ctx,buf,len)",
          "old_line_content": "        int len = ll2string(buf,sizeof(buf),reply->val.ll);",
          "new_line_content": "        return RM_CreateString(reply->ctx,buf,len);",
          "content_same": false
        },
        {
          "line": 3048,
          "old_api": "strlen",
          "new_api": "zrealloc",
          "old_text": "strlen(fmt)",
          "new_text": "zrealloc(argv,sizeof(robj*)*argv_size)",
          "old_line_content": "    argv_size = strlen(fmt)+1; /* +1 because of the command name. */",
          "new_line_content": "    argv = zrealloc(argv,sizeof(robj*)*argv_size);",
          "content_same": false
        },
        {
          "line": 3059,
          "old_api": "va_arg",
          "new_api": "strlen",
          "old_text": "va_arg(ap,char*)",
          "new_text": "strlen(cstr)",
          "old_line_content": "            char *cstr = va_arg(ap,char*);",
          "new_line_content": "            argv[argc++] = createStringObject(cstr,strlen(cstr));",
          "content_same": false
        },
        {
          "line": 3067,
          "old_api": "va_arg",
          "new_api": "createStringObject",
          "old_text": "va_arg(ap,size_t)",
          "new_text": "createStringObject(buf,len)",
          "old_line_content": "            size_t len = va_arg(ap,size_t);",
          "new_line_content": "            argv[argc++] = createStringObject(buf,len);",
          "content_same": false
        },
        {
          "line": 3070,
          "old_api": "va_arg",
          "new_api": "sdsfromlonglong",
          "old_text": "va_arg(ap,long long)",
          "new_text": "sdsfromlonglong(ll)",
          "old_line_content": "            long long ll = va_arg(ap,long long);",
          "new_line_content": "            argv[argc++] = createObject(OBJ_STRING,sdsfromlonglong(ll));",
          "content_same": false
        },
        {
          "line": 3104,
          "old_api": "decrRefCount",
          "new_api": "zfree",
          "old_text": "decrRefCount(argv[j])",
          "new_text": "zfree(argv)",
          "old_line_content": "        decrRefCount(argv[j]);",
          "new_line_content": "    zfree(argv);",
          "content_same": false
        },
        {
          "line": 3128,
          "old_api": "va_start",
          "new_api": "createClient",
          "old_text": "va_start(ap, fmt)",
          "new_text": "createClient(NULL)",
          "old_line_content": "    va_start(ap, fmt);",
          "new_line_content": "    c = createClient(NULL);",
          "content_same": false
        },
        {
          "line": 3203,
          "old_api": "listLength",
          "new_api": "listFirst",
          "old_text": "listLength(c->reply)",
          "new_text": "listFirst(c->reply)",
          "old_line_content": "    while(listLength(c->reply)) {",
          "new_line_content": "        clientReplyBlock *o = listNodeValue(listFirst(c->reply));",
          "content_same": false
        },
        {
          "line": 3206,
          "old_api": "sdscatlen",
          "new_api": "listFirst",
          "old_text": "sdscatlen(proto,o->buf,o->used)",
          "new_text": "listFirst(c->reply)",
          "old_line_content": "        proto = sdscatlen(proto,o->buf,o->used);",
          "new_line_content": "        listDelNode(c->reply,listFirst(c->reply));",
          "content_same": false
        },
        {
          "line": 3209,
          "old_api": "moduleCreateCallReplyFromProto",
          "new_api": "autoMemoryAdd",
          "old_text": "moduleCreateCallReplyFromProto(ctx,proto)",
          "new_text": "autoMemoryAdd(ctx,REDISMODULE_AM_REPLY,reply)",
          "old_line_content": "    reply = moduleCreateCallReplyFromProto(ctx,proto);",
          "new_line_content": "    autoMemoryAdd(ctx,REDISMODULE_AM_REPLY,reply);",
          "content_same": false
        },
        {
          "line": 3288,
          "old_api": "dictNext",
          "new_api": "dictGetVal",
          "old_text": "dictNext(di)",
          "new_text": "dictGetVal(de)",
          "old_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "new_line_content": "        struct RedisModule *module = dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 3293,
          "old_api": "listRewind",
          "new_api": "listNext",
          "old_text": "listRewind(module->types,&li)",
          "new_text": "listNext(&li)",
          "old_line_content": "        listRewind(module->types,&li);",
          "new_line_content": "        while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 3296,
          "old_api": "memcmp",
          "new_api": "dictReleaseIterator",
          "old_text": "memcmp(name,mt->name,sizeof(mt->name))",
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "            if (memcmp(name,mt->name,sizeof(mt->name)) == 0) {",
          "new_line_content": "                dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 3327,
          "old_api": "dictNext",
          "new_api": "dictGetVal",
          "old_text": "dictNext(di)",
          "new_text": "dictGetVal(de)",
          "old_line_content": "    while ((de = dictNext(di)) != NULL && mt == NULL) {",
          "new_line_content": "        struct RedisModule *module = dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 3332,
          "old_api": "listRewind",
          "new_api": "listNext",
          "old_text": "listRewind(module->types,&li)",
          "new_text": "listNext(&li)",
          "old_line_content": "        listRewind(module->types,&li);",
          "new_line_content": "        while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 3470,
          "old_api": "memcpy",
          "new_api": "listAddNodeTail",
          "old_text": "memcpy(mt->name,name,sizeof(mt->name))",
          "new_text": "listAddNodeTail(ctx->module->types,mt)",
          "old_line_content": "    memcpy(mt->name,name,sizeof(mt->name));",
          "new_line_content": "    listAddNodeTail(ctx->module->types,mt);",
          "content_same": false
        },
        {
          "line": 3481,
          "old_api": "RM_DeleteKey",
          "new_api": "createModuleObject",
          "old_text": "RM_DeleteKey(key)",
          "new_text": "createModuleObject(mt,value)",
          "old_line_content": "    RM_DeleteKey(key);",
          "new_line_content": "    robj *o = createModuleObject(mt,value);",
          "content_same": false
        },
        {
          "line": 3482,
          "old_api": "createModuleObject",
          "new_api": "setKey",
          "old_text": "createModuleObject(mt,value)",
          "new_text": "setKey(key->db,key->key,o)",
          "old_line_content": "    robj *o = createModuleObject(mt,value);",
          "new_line_content": "    setKey(key->db,key->key,o);",
          "content_same": false
        },
        {
          "line": 3483,
          "old_api": "setKey",
          "new_api": "decrRefCount",
          "old_text": "setKey(key->db,key->key,o)",
          "new_text": "decrRefCount(o)",
          "old_line_content": "    setKey(key->db,key->key,o);",
          "new_line_content": "    decrRefCount(o);",
          "content_same": false
        },
        {
          "line": 3545,
          "old_api": "dictNext",
          "new_api": "dictGetVal",
          "old_text": "dictNext(di)",
          "new_text": "dictGetVal(de)",
          "old_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "new_line_content": "        struct RedisModule *module = dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 3546,
          "old_api": "dictGetVal",
          "new_api": "listLength",
          "old_text": "dictGetVal(de)",
          "new_text": "listLength(module->types)",
          "old_line_content": "        struct RedisModule *module = dictGetVal(de);",
          "new_line_content": "        if (listLength(module->types) &&",
          "content_same": false
        },
        {
          "line": 3780,
          "old_api": "ld2string",
          "new_api": "RM_SaveStringBuffer",
          "old_text": "ld2string(buf,sizeof(buf),value,LD_STR_HEX)",
          "new_text": "RM_SaveStringBuffer(io,buf,len+1)",
          "old_line_content": "    size_t len = ld2string(buf,sizeof(buf),value,LD_STR_HEX);",
          "new_line_content": "    RM_SaveStringBuffer(io,buf,len+1); /* len+1 for '\\0' */",
          "content_same": false
        },
        {
          "line": 3792,
          "old_api": "string2ld",
          "new_api": "RM_Free",
          "old_text": "string2ld(str,len,&value)",
          "new_text": "RM_Free(str)",
          "old_line_content": "    string2ld(str,len,&value);",
          "new_line_content": "    RM_Free(str);",
          "content_same": false
        },
        {
          "line": 3804,
          "old_api": "dictNext",
          "new_api": "dictGetVal",
          "old_text": "dictNext(di)",
          "new_text": "dictGetVal(de)",
          "old_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "new_line_content": "        struct RedisModule *module = dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 3809,
          "old_api": "listRewind",
          "new_api": "listNext",
          "old_text": "listRewind(module->types,&li)",
          "new_text": "listNext(&li)",
          "old_line_content": "        listRewind(module->types,&li);",
          "new_line_content": "        while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 3877,
          "old_api": "ll2string",
          "new_api": "mixDigest",
          "old_text": "ll2string(buf,sizeof(buf),ll)",
          "new_text": "mixDigest(md->o,buf,len)",
          "old_line_content": "    size_t len = ll2string(buf,sizeof(buf),ll);",
          "new_line_content": "    mixDigest(md->o,buf,len);",
          "content_same": false
        },
        {
          "line": 3883,
          "old_api": "xorDigest",
          "new_api": "memset",
          "old_text": "xorDigest(md->x,md->o,sizeof(md->o))",
          "new_text": "memset(md->o,0,sizeof(md->o))",
          "old_line_content": "    xorDigest(md->x,md->o,sizeof(md->o));",
          "new_line_content": "    memset(md->o,0,sizeof(md->o));",
          "content_same": false
        },
        {
          "line": 3915,
          "old_api": "va_start",
          "new_api": "moduleCreateArgvFromUserFormat",
          "old_text": "va_start(ap, fmt)",
          "new_text": "moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap)",
          "old_line_content": "    va_start(ap, fmt);",
          "new_line_content": "    argv = moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap);",
          "content_same": false
        },
        {
          "line": 3916,
          "old_api": "moduleCreateArgvFromUserFormat",
          "new_api": "va_end",
          "old_text": "moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap)",
          "new_text": "va_end(ap)",
          "old_line_content": "    argv = moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap);",
          "new_line_content": "    va_end(ap);",
          "content_same": false
        },
        {
          "line": 3992,
          "old_api": "snprintf",
          "new_api": "vsnprintf",
          "old_text": "snprintf(msg, sizeof(msg),\"<%s> \", module? module->name: \"module\")",
          "new_text": "vsnprintf(msg + name_len, sizeof(msg) - name_len, fmt, ap)",
          "old_line_content": "    name_len = snprintf(msg, sizeof(msg),\"<%s> \", module? module->name: \"module\");",
          "new_line_content": "    vsnprintf(msg + name_len, sizeof(msg) - name_len, fmt, ap);",
          "content_same": false
        },
        {
          "line": 3993,
          "old_api": "vsnprintf",
          "new_api": "serverLogRaw",
          "old_text": "vsnprintf(msg + name_len, sizeof(msg) - name_len, fmt, ap)",
          "new_text": "serverLogRaw(level,msg)",
          "old_line_content": "    vsnprintf(msg + name_len, sizeof(msg) - name_len, fmt, ap);",
          "new_line_content": "    serverLogRaw(level,msg);",
          "content_same": false
        },
        {
          "line": 4017,
          "old_api": "va_start",
          "new_api": "RM_LogRaw",
          "old_text": "va_start(ap, fmt)",
          "new_text": "RM_LogRaw(ctx? ctx->module: NULL,levelstr,fmt,ap)",
          "old_line_content": "    va_start(ap, fmt);",
          "new_line_content": "    RM_LogRaw(ctx? ctx->module: NULL,levelstr,fmt,ap);",
          "content_same": false
        },
        {
          "line": 4018,
          "old_api": "RM_LogRaw",
          "new_api": "va_end",
          "old_text": "RM_LogRaw(ctx? ctx->module: NULL,levelstr,fmt,ap)",
          "new_text": "va_end(ap)",
          "old_line_content": "    RM_LogRaw(ctx? ctx->module: NULL,levelstr,fmt,ap);",
          "new_line_content": "    va_end(ap);",
          "content_same": false
        },
        {
          "line": 4029,
          "old_api": "va_start",
          "new_api": "RM_LogRaw",
          "old_text": "va_start(ap, fmt)",
          "new_text": "RM_LogRaw(io->type->module,levelstr,fmt,ap)",
          "old_line_content": "    va_start(ap, fmt);",
          "new_line_content": "    RM_LogRaw(io->type->module,levelstr,fmt,ap);",
          "content_same": false
        },
        {
          "line": 4030,
          "old_api": "RM_LogRaw",
          "new_api": "va_end",
          "old_text": "RM_LogRaw(io->type->module,levelstr,fmt,ap)",
          "new_text": "va_end(ap)",
          "old_line_content": "    RM_LogRaw(io->type->module,levelstr,fmt,ap);",
          "new_line_content": "    va_end(ap);",
          "content_same": false
        },
        {
          "line": 4087,
          "old_api": "disconnect_callback",
          "new_api": "moduleFreeContext",
          "old_text": "bc->disconnect_callback(&ctx,bc)",
          "new_text": "moduleFreeContext(&ctx)",
          "old_line_content": "        bc->disconnect_callback(&ctx,bc);",
          "new_line_content": "        moduleFreeContext(&ctx);",
          "content_same": false
        },
        {
          "line": 4274,
          "old_api": "listAddNodeTail",
          "new_api": "write",
          "old_text": "listAddNodeTail(moduleUnblockedClients,bc)",
          "new_text": "write(server.module_blocked_pipe[1],\"A\",1)",
          "old_line_content": "    listAddNodeTail(moduleUnblockedClients,bc);",
          "new_line_content": "    if (write(server.module_blocked_pipe[1],\"A\",1) != 1) {",
          "content_same": false
        },
        {
          "line": 4372,
          "old_api": "read",
          "new_api": "listLength",
          "old_text": "read(server.module_blocked_pipe[0],buf,1)",
          "new_text": "listLength(moduleUnblockedClients)",
          "old_line_content": "    while (read(server.module_blocked_pipe[0],buf,1) == 1);",
          "new_line_content": "    while (listLength(moduleUnblockedClients)) {",
          "content_same": false
        },
        {
          "line": 4373,
          "old_api": "listLength",
          "new_api": "listFirst",
          "old_text": "listLength(moduleUnblockedClients)",
          "new_text": "listFirst(moduleUnblockedClients)",
          "old_line_content": "    while (listLength(moduleUnblockedClients)) {",
          "new_line_content": "        ln = listFirst(moduleUnblockedClients);",
          "content_same": false
        },
        {
          "line": 4377,
          "old_api": "listDelNode",
          "new_api": "pthread_mutex_unlock",
          "old_text": "listDelNode(moduleUnblockedClients,ln)",
          "new_text": "pthread_mutex_unlock(&moduleUnblockedClientsMutex)",
          "old_line_content": "        listDelNode(moduleUnblockedClients,ln);",
          "new_line_content": "        pthread_mutex_unlock(&moduleUnblockedClientsMutex);",
          "content_same": false
        },
        {
          "line": 4396,
          "old_api": "reply_callback",
          "new_api": "moduleFreeContext",
          "old_text": "bc->reply_callback(&ctx,(void**)c->argv,c->argc)",
          "new_text": "moduleFreeContext(&ctx)",
          "old_line_content": "            bc->reply_callback(&ctx,(void**)c->argv,c->argc);",
          "new_line_content": "            moduleFreeContext(&ctx);",
          "content_same": false
        },
        {
          "line": 4408,
          "old_api": "free_privdata",
          "new_api": "moduleFreeContext",
          "old_text": "bc->free_privdata(&ctx,bc->privdata)",
          "new_text": "moduleFreeContext(&ctx)",
          "old_line_content": "            bc->free_privdata(&ctx,bc->privdata);",
          "new_line_content": "            moduleFreeContext(&ctx);",
          "content_same": false
        },
        {
          "line": 4416,
          "old_api": "AddReplyFromClient",
          "new_api": "freeClient",
          "old_text": "AddReplyFromClient(c, bc->reply_client)",
          "new_text": "freeClient(bc->reply_client)",
          "old_line_content": "        if (c) AddReplyFromClient(c, bc->reply_client);",
          "new_line_content": "        freeClient(bc->reply_client);",
          "content_same": false
        },
        {
          "line": 4459,
          "old_api": "timeout_callback",
          "new_api": "moduleFreeContext",
          "old_text": "bc->timeout_callback(&ctx,(void**)c->argv,c->argc)",
          "new_text": "moduleFreeContext(&ctx)",
          "old_line_content": "    bc->timeout_callback(&ctx,(void**)c->argv,c->argc);",
          "new_line_content": "    moduleFreeContext(&ctx);",
          "content_same": false
        },
        {
          "line": 4551,
          "old_api": "moduleFreeContext",
          "new_api": "zfree",
          "old_text": "moduleFreeContext(ctx)",
          "new_text": "zfree(ctx)",
          "old_line_content": "    moduleFreeContext(ctx);",
          "new_line_content": "    zfree(ctx);",
          "content_same": false
        },
        {
          "line": 4559,
          "old_api": "UNUSED",
          "new_api": "moduleAcquireGIL",
          "old_text": "UNUSED(ctx)",
          "new_text": "moduleAcquireGIL()",
          "old_line_content": "    UNUSED(ctx);",
          "new_line_content": "    moduleAcquireGIL();",
          "content_same": false
        },
        {
          "line": 4565,
          "old_api": "UNUSED",
          "new_api": "moduleReleaseGIL",
          "old_text": "UNUSED(ctx)",
          "new_text": "moduleReleaseGIL()",
          "old_line_content": "    UNUSED(ctx);",
          "new_line_content": "    moduleReleaseGIL();",
          "content_same": false
        },
        {
          "line": 4695,
          "old_api": "listRewind",
          "new_api": "listNext",
          "old_text": "listRewind(moduleKeyspaceSubscribers,&li)",
          "new_text": "listNext(&li)",
          "old_line_content": "    listRewind(moduleKeyspaceSubscribers,&li);",
          "new_line_content": "    while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 4699,
          "old_api": "listDelNode",
          "new_api": "zfree",
          "old_text": "listDelNode(moduleKeyspaceSubscribers, ln)",
          "new_text": "zfree(sub)",
          "old_line_content": "            listDelNode(moduleKeyspaceSubscribers, ln);",
          "new_line_content": "            zfree(sub);",
          "content_same": false
        },
        {
          "line": 4741,
          "old_api": "selectDb",
          "new_api": "callback",
          "old_text": "selectDb(ctx.client, 0)",
          "new_text": "r->callback(&ctx,sender_id,type,payload,len)",
          "old_line_content": "            selectDb(ctx.client, 0);",
          "new_line_content": "            r->callback(&ctx,sender_id,type,payload,len);",
          "content_same": false
        },
        {
          "line": 4742,
          "old_api": "callback",
          "new_api": "moduleFreeContext",
          "old_text": "r->callback(&ctx,sender_id,type,payload,len)",
          "new_text": "moduleFreeContext(&ctx)",
          "old_line_content": "            r->callback(&ctx,sender_id,type,payload,len);",
          "new_line_content": "            moduleFreeContext(&ctx);",
          "content_same": false
        },
        {
          "line": 4801,
          "old_api": "moduleTypeEncodeId",
          "new_api": "clusterSendModuleMessageToTarget",
          "old_text": "moduleTypeEncodeId(ctx->module->name,0)",
          "new_text": "clusterSendModuleMessageToTarget(target_id,module_id,type,msg,len)",
          "old_line_content": "    uint64_t module_id = moduleTypeEncodeId(ctx->module->name,0);",
          "new_line_content": "    if (clusterSendModuleMessageToTarget(target_id,module_id,type,msg,len) == C_OK)",
          "content_same": false
        },
        {
          "line": 4834,
          "old_api": "dictSize",
          "new_api": "zmalloc",
          "old_text": "dictSize(server.cluster->nodes)",
          "new_text": "zmalloc((count+1)*REDISMODULE_NODE_ID_LEN)",
          "old_line_content": "    size_t count = dictSize(server.cluster->nodes);",
          "new_line_content": "    char **ids = zmalloc((count+1)*REDISMODULE_NODE_ID_LEN);",
          "content_same": false
        },
        {
          "line": 4835,
          "old_api": "zmalloc",
          "new_api": "dictGetIterator",
          "old_text": "zmalloc((count+1)*REDISMODULE_NODE_ID_LEN)",
          "new_text": "dictGetIterator(server.cluster->nodes)",
          "old_line_content": "    char **ids = zmalloc((count+1)*REDISMODULE_NODE_ID_LEN);",
          "new_line_content": "    dictIterator *di = dictGetIterator(server.cluster->nodes);",
          "content_same": false
        },
        {
          "line": 4839,
          "old_api": "dictNext",
          "new_api": "dictGetVal",
          "old_text": "dictNext(di)",
          "new_text": "dictGetVal(de)",
          "old_line_content": "    while((de = dictNext(di)) != NULL) {",
          "new_line_content": "        clusterNode *node = dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 4842,
          "old_api": "zmalloc",
          "new_api": "memcpy",
          "old_text": "zmalloc(REDISMODULE_NODE_ID_LEN)",
          "new_text": "memcpy(ids[j],node->name,REDISMODULE_NODE_ID_LEN)",
          "old_line_content": "        ids[j] = zmalloc(REDISMODULE_NODE_ID_LEN);",
          "new_line_content": "        memcpy(ids[j],node->name,REDISMODULE_NODE_ID_LEN);",
          "content_same": false
        },
        {
          "line": 4999,
          "old_api": "raxStart",
          "new_api": "ustime",
          "old_text": "raxStart(&ri,Timers)",
          "new_text": "ustime()",
          "old_line_content": "    raxStart(&ri,Timers);",
          "new_line_content": "    uint64_t now = ustime();",
          "content_same": false
        },
        {
          "line": 5003,
          "old_api": "raxSeek",
          "new_api": "raxNext",
          "old_text": "raxSeek(&ri,\"^\",NULL,0)",
          "new_text": "raxNext(&ri)",
          "old_line_content": "        raxSeek(&ri,\"^\",NULL,0);",
          "new_line_content": "        if (!raxNext(&ri)) break;",
          "content_same": false
        },
        {
          "line": 5006,
          "old_api": "memcpy",
          "new_api": "ntohu64",
          "old_text": "memcpy(&expiretime,ri.key,sizeof(expiretime))",
          "new_text": "ntohu64(expiretime)",
          "old_line_content": "        memcpy(&expiretime,ri.key,sizeof(expiretime));",
          "new_line_content": "        expiretime = ntohu64(expiretime);",
          "content_same": false
        },
        {
          "line": 5014,
          "old_api": "selectDb",
          "new_api": "callback",
          "old_text": "selectDb(ctx.client, timer->dbid)",
          "new_text": "timer->callback(&ctx,timer->data)",
          "old_line_content": "            selectDb(ctx.client, timer->dbid);",
          "new_line_content": "            timer->callback(&ctx,timer->data);",
          "content_same": false
        },
        {
          "line": 5015,
          "old_api": "callback",
          "new_api": "moduleFreeContext",
          "old_text": "timer->callback(&ctx,timer->data)",
          "new_text": "moduleFreeContext(&ctx)",
          "old_line_content": "            timer->callback(&ctx,timer->data);",
          "new_line_content": "            moduleFreeContext(&ctx);",
          "content_same": false
        },
        {
          "line": 5016,
          "old_api": "moduleFreeContext",
          "new_api": "raxRemove",
          "old_text": "moduleFreeContext(&ctx)",
          "new_text": "raxRemove(Timers,(unsigned char*)ri.key,ri.key_len,NULL)",
          "old_line_content": "            moduleFreeContext(&ctx);",
          "new_line_content": "            raxRemove(Timers,(unsigned char*)ri.key,ri.key_len,NULL);",
          "content_same": false
        },
        {
          "line": 5017,
          "old_api": "raxRemove",
          "new_api": "zfree",
          "old_text": "raxRemove(Timers,(unsigned char*)ri.key,ri.key_len,NULL)",
          "new_text": "zfree(timer)",
          "old_line_content": "            raxRemove(Timers,(unsigned char*)ri.key,ri.key_len,NULL);",
          "new_line_content": "            zfree(timer);",
          "content_same": false
        },
        {
          "line": 5044,
          "old_api": "htonu64",
          "new_api": "raxFind",
          "old_text": "htonu64(expiretime)",
          "new_text": "raxFind(Timers, (unsigned char*)&key,sizeof(key))",
          "old_line_content": "        key = htonu64(expiretime);",
          "new_line_content": "        if (raxFind(Timers, (unsigned char*)&key,sizeof(key)) == raxNotFound) {",
          "content_same": false
        },
        {
          "line": 5045,
          "old_api": "raxFind",
          "new_api": "raxInsert",
          "old_text": "raxFind(Timers, (unsigned char*)&key,sizeof(key))",
          "new_text": "raxInsert(Timers,(unsigned char*)&key,sizeof(key),timer,NULL)",
          "old_line_content": "        if (raxFind(Timers, (unsigned char*)&key,sizeof(key)) == raxNotFound) {",
          "new_line_content": "            raxInsert(Timers,(unsigned char*)&key,sizeof(key),timer,NULL);",
          "content_same": false
        },
        {
          "line": 5058,
          "old_api": "raxStart",
          "new_api": "raxSeek",
          "old_text": "raxStart(&ri,Timers)",
          "new_text": "raxSeek(&ri,\"^\",NULL,0)",
          "old_line_content": "        raxStart(&ri,Timers);",
          "new_line_content": "        raxSeek(&ri,\"^\",NULL,0);",
          "content_same": false
        },
        {
          "line": 5059,
          "old_api": "raxSeek",
          "new_api": "raxNext",
          "old_text": "raxSeek(&ri,\"^\",NULL,0)",
          "new_text": "raxNext(&ri)",
          "old_line_content": "        raxSeek(&ri,\"^\",NULL,0);",
          "new_line_content": "        raxNext(&ri);",
          "content_same": false
        },
        {
          "line": 5060,
          "old_api": "raxNext",
          "new_api": "memcmp",
          "old_text": "raxNext(&ri)",
          "new_text": "memcmp(ri.key,&key,sizeof(key))",
          "old_line_content": "        raxNext(&ri);",
          "new_line_content": "        if (memcmp(ri.key,&key,sizeof(key)) == 0) {",
          "content_same": false
        },
        {
          "line": 5087,
          "old_api": "raxRemove",
          "new_api": "zfree",
          "old_text": "raxRemove(Timers,(unsigned char*)&id,sizeof(id),NULL)",
          "new_text": "zfree(timer)",
          "old_line_content": "    raxRemove(Timers,(unsigned char*)&id,sizeof(id),NULL);",
          "new_line_content": "    zfree(timer);",
          "content_same": false
        },
        {
          "line": 5133,
          "old_api": "zmalloc",
          "new_api": "raxNew",
          "old_text": "zmalloc(sizeof(*d))",
          "new_text": "raxNew()",
          "old_line_content": "    struct RedisModuleDict *d = zmalloc(sizeof(*d));",
          "new_line_content": "    d->rax = raxNew();",
          "content_same": false
        },
        {
          "line": 5134,
          "old_api": "raxNew",
          "new_api": "autoMemoryAdd",
          "old_text": "raxNew()",
          "new_text": "autoMemoryAdd(ctx,REDISMODULE_AM_DICT,d)",
          "old_line_content": "    d->rax = raxNew();",
          "new_line_content": "    if (ctx != NULL) autoMemoryAdd(ctx,REDISMODULE_AM_DICT,d);",
          "content_same": false
        },
        {
          "line": 5143,
          "old_api": "autoMemoryFreed",
          "new_api": "raxFree",
          "old_text": "autoMemoryFreed(ctx,REDISMODULE_AM_DICT,d)",
          "new_text": "raxFree(d->rax)",
          "old_line_content": "    if (ctx != NULL) autoMemoryFreed(ctx,REDISMODULE_AM_DICT,d);",
          "new_line_content": "    raxFree(d->rax);",
          "content_same": false
        },
        {
          "line": 5144,
          "old_api": "raxFree",
          "new_api": "zfree",
          "old_text": "raxFree(d->rax)",
          "new_text": "zfree(d)",
          "old_line_content": "    raxFree(d->rax);",
          "new_line_content": "    zfree(d);",
          "content_same": false
        },
        {
          "line": 5235,
          "old_api": "raxStart",
          "new_api": "raxSeek",
          "old_text": "raxStart(&di->ri,d->rax)",
          "new_text": "raxSeek(&di->ri,op,key,keylen)",
          "old_line_content": "    raxStart(&di->ri,d->rax);",
          "new_line_content": "    raxSeek(&di->ri,op,key,keylen);",
          "content_same": false
        },
        {
          "line": 5249,
          "old_api": "raxStop",
          "new_api": "zfree",
          "old_text": "raxStop(&di->ri)",
          "new_text": "zfree(di)",
          "old_line_content": "    raxStop(&di->ri);",
          "new_line_content": "    zfree(di);",
          "content_same": false
        },
        {
          "line": 5349,
          "old_api": "raxEOF",
          "new_api": "raxCompare",
          "old_text": "raxEOF(&di->ri)",
          "new_text": "raxCompare(&di->ri,op,key,keylen)",
          "old_line_content": "    if (raxEOF(&di->ri)) return REDISMODULE_ERR;",
          "new_line_content": "    int res = raxCompare(&di->ri,op,key,keylen);",
          "content_same": false
        },
        {
          "line": 5357,
          "old_api": "raxEOF",
          "new_api": "sdslen",
          "old_text": "raxEOF(&di->ri)",
          "new_text": "sdslen(key->ptr)",
          "old_line_content": "    if (raxEOF(&di->ri)) return REDISMODULE_ERR;",
          "new_line_content": "    int res = raxCompare(&di->ri,op,key->ptr,sdslen(key->ptr));",
          "content_same": false
        },
        {
          "line": 5376,
          "old_api": "sdsdup",
          "new_api": "strlen",
          "old_text": "sdsdup(ctx->module->name)",
          "new_text": "strlen(name)",
          "old_line_content": "    sds full_name = sdsdup(ctx->module->name);",
          "new_line_content": "    if (name != NULL && strlen(name) > 0)",
          "content_same": false
        },
        {
          "line": 5377,
          "old_api": "strlen",
          "new_api": "sdscatfmt",
          "old_text": "strlen(name)",
          "new_text": "sdscatfmt(full_name, \"_%s\", name)",
          "old_line_content": "    if (name != NULL && strlen(name) > 0)",
          "new_line_content": "        full_name = sdscatfmt(full_name, \"_%s\", name);",
          "content_same": false
        },
        {
          "line": 5390,
          "old_api": "strcasecmp",
          "new_api": "sdsfree",
          "old_text": "strcasecmp(ctx->requested_section, ctx->module->name)",
          "new_text": "sdsfree(full_name)",
          "old_line_content": "            strcasecmp(ctx->requested_section, ctx->module->name)) {",
          "new_line_content": "            sdsfree(full_name);",
          "content_same": false
        },
        {
          "line": 5396,
          "old_api": "sdscat",
          "new_api": "sdscatfmt",
          "old_text": "sdscat(ctx->info,\"\\r\\n\")",
          "new_text": "sdscatfmt(ctx->info, \"# %S\\r\\n\", full_name)",
          "old_line_content": "    if (ctx->sections++) ctx->info = sdscat(ctx->info,\"\\r\\n\");",
          "new_line_content": "    ctx->info = sdscatfmt(ctx->info, \"# %S\\r\\n\", full_name);",
          "content_same": false
        },
        {
          "line": 5411,
          "old_api": "RM_InfoEndDictField",
          "new_api": "sdscatfmt",
          "old_text": "RM_InfoEndDictField(ctx)",
          "new_text": "sdscatfmt(ctx->info,\n        \"%s_%s:\",\n        ctx->module->name,\n        name)",
          "old_line_content": "        RM_InfoEndDictField(ctx);",
          "new_line_content": "    ctx->info = sdscatfmt(ctx->info,",
          "content_same": false
        },
        {
          "line": 5425,
          "old_api": "sdslen",
          "new_api": "sdsIncrLen",
          "old_text": "sdslen(ctx->info)",
          "new_text": "sdsIncrLen(ctx->info, -1)",
          "old_line_content": "    if (ctx->info[sdslen(ctx->info)-1]==',')",
          "new_line_content": "        sdsIncrLen(ctx->info, -1);",
          "content_same": false
        },
        {
          "line": 5426,
          "old_api": "sdsIncrLen",
          "new_api": "sdscat",
          "old_text": "sdsIncrLen(ctx->info, -1)",
          "new_text": "sdscat(ctx->info, \"\\r\\n\")",
          "old_line_content": "        sdsIncrLen(ctx->info, -1);",
          "new_line_content": "    ctx->info = sdscat(ctx->info, \"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 5534,
          "old_api": "dictNext",
          "new_api": "dictGetVal",
          "old_text": "dictNext(di)",
          "new_text": "dictGetVal(de)",
          "old_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "new_line_content": "        struct RedisModule *module = dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 5589,
          "old_api": "dictAdd",
          "new_api": "zfree",
          "old_text": "dictAdd(server.sharedapi, (char*)apiname, sapi)",
          "new_text": "zfree(sapi)",
          "old_line_content": "    if (dictAdd(server.sharedapi, (char*)apiname, sapi) != DICT_OK) {",
          "new_line_content": "        zfree(sapi);",
          "content_same": false
        },
        {
          "line": 5632,
          "old_api": "dictGetVal",
          "new_api": "listSearchKey",
          "old_text": "dictGetVal(de)",
          "new_text": "listSearchKey(sapi->module->usedby,ctx->module)",
          "old_line_content": "    RedisModuleSharedAPI *sapi = dictGetVal(de);",
          "new_line_content": "    if (listSearchKey(sapi->module->usedby,ctx->module) == NULL) {",
          "content_same": false
        },
        {
          "line": 5633,
          "old_api": "listSearchKey",
          "new_api": "listAddNodeTail",
          "old_text": "listSearchKey(sapi->module->usedby,ctx->module)",
          "new_text": "listAddNodeTail(sapi->module->usedby,ctx->module)",
          "old_line_content": "    if (listSearchKey(sapi->module->usedby,ctx->module) == NULL) {",
          "new_line_content": "        listAddNodeTail(sapi->module->usedby,ctx->module);",
          "content_same": false
        },
        {
          "line": 5650,
          "old_api": "dictNext",
          "new_api": "dictGetKey",
          "old_text": "dictNext(di)",
          "new_text": "dictGetKey(de)",
          "old_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "new_line_content": "        const char *apiname = dictGetKey(de);",
          "content_same": false
        },
        {
          "line": 5651,
          "old_api": "dictGetKey",
          "new_api": "dictGetVal",
          "old_text": "dictGetKey(de)",
          "new_text": "dictGetVal(de)",
          "old_line_content": "        const char *apiname = dictGetKey(de);",
          "new_line_content": "        RedisModuleSharedAPI *sapi = dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 5654,
          "old_api": "dictDelete",
          "new_api": "zfree",
          "old_text": "dictDelete(server.sharedapi,apiname)",
          "new_text": "zfree(sapi)",
          "old_line_content": "            dictDelete(server.sharedapi,apiname);",
          "new_line_content": "            zfree(sapi);",
          "content_same": false
        },
        {
          "line": 5672,
          "old_api": "listRewind",
          "new_api": "listNext",
          "old_text": "listRewind(module->using,&li)",
          "new_text": "listNext(&li)",
          "old_line_content": "    listRewind(module->using,&li);",
          "new_line_content": "    while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 5693,
          "old_api": "listRewind",
          "new_api": "listNext",
          "old_text": "listRewind(module->filters,&li)",
          "new_text": "listNext(&li)",
          "old_line_content": "    listRewind(module->filters,&li);",
          "new_line_content": "    while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 5915,
          "old_api": "openChildInfoPipe",
          "new_api": "redisFork",
          "old_text": "openChildInfoPipe()",
          "new_text": "redisFork()",
          "old_line_content": "    openChildInfoPipe();",
          "new_line_content": "    if ((childpid = redisFork()) == 0) {",
          "content_same": false
        },
        {
          "line": 5920,
          "old_api": "closeChildInfoPipe",
          "new_api": "strerror",
          "old_text": "closeChildInfoPipe()",
          "new_text": "strerror(errno)",
          "old_line_content": "        closeChildInfoPipe();",
          "new_line_content": "        serverLog(LL_WARNING,\"Can't fork for module: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 5936,
          "old_api": "sendChildCOWInfo",
          "new_api": "exitFromChild",
          "old_text": "sendChildCOWInfo(CHILD_INFO_TYPE_MODULE, \"Module fork\")",
          "new_text": "exitFromChild(retcode)",
          "old_line_content": "    sendChildCOWInfo(CHILD_INFO_TYPE_MODULE, \"Module fork\");",
          "new_line_content": "    exitFromChild(retcode);",
          "content_same": false
        },
        {
          "line": 5952,
          "old_api": "kill",
          "new_api": "wait4",
          "old_text": "kill(server.module_child_pid,SIGUSR1)",
          "new_text": "wait4(server.module_child_pid,&statloc,0,NULL)",
          "old_line_content": "    if (kill(server.module_child_pid,SIGUSR1) != -1 && wait) {",
          "new_line_content": "        while(wait4(server.module_child_pid,&statloc,0,NULL) !=",
          "content_same": false
        },
        {
          "line": 5960,
          "old_api": "closeChildInfoPipe",
          "new_api": "updateDictResizePolicy",
          "old_text": "closeChildInfoPipe()",
          "new_text": "updateDictResizePolicy()",
          "old_line_content": "    closeChildInfoPipe();",
          "new_line_content": "    updateDictResizePolicy();",
          "content_same": false
        },
        {
          "line": 6203,
          "old_api": "listRewind",
          "new_api": "listNext",
          "old_text": "listRewind(RedisModule_EventListeners,&li)",
          "new_text": "listNext(&li)",
          "old_line_content": "    listRewind(RedisModule_EventListeners,&li);",
          "new_line_content": "    while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 6213,
          "old_api": "listDelNode",
          "new_api": "zfree",
          "old_text": "listDelNode(RedisModule_EventListeners,ln)",
          "new_text": "zfree(el)",
          "old_line_content": "            listDelNode(RedisModule_EventListeners,ln);",
          "new_line_content": "            zfree(el);",
          "content_same": false
        },
        {
          "line": 6245,
          "old_api": "listRewind",
          "new_api": "listNext",
          "old_text": "listRewind(RedisModule_EventListeners,&li)",
          "new_text": "listNext(&li)",
          "old_line_content": "    listRewind(RedisModule_EventListeners,&li);",
          "new_line_content": "    while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 6303,
          "old_api": "freeClient",
          "new_api": "moduleFreeContext",
          "old_text": "freeClient(ctx.client)",
          "new_text": "moduleFreeContext(&ctx)",
          "old_line_content": "            if (ModulesInHooks != 0) freeClient(ctx.client);",
          "new_line_content": "            moduleFreeContext(&ctx);",
          "content_same": false
        },
        {
          "line": 6320,
          "old_api": "listDelNode",
          "new_api": "zfree",
          "old_text": "listDelNode(RedisModule_EventListeners,ln)",
          "new_text": "zfree(el)",
          "old_line_content": "            listDelNode(RedisModule_EventListeners,ln);",
          "new_line_content": "            zfree(el);",
          "content_same": false
        },
        {
          "line": 6359,
          "old_api": "UNUSED",
          "new_api": "strcmp",
          "old_text": "UNUSED(privdata)",
          "new_text": "strcmp(key1,key2)",
          "old_line_content": "    UNUSED(privdata);",
          "new_line_content": "    return strcmp(key1,key2) == 0;",
          "content_same": false
        },
        {
          "line": 6384,
          "old_api": "listCreate",
          "new_api": "dictCreate",
          "old_text": "listCreate()",
          "new_text": "dictCreate(&modulesDictType,NULL)",
          "old_line_content": "    server.loadmodule_queue = listCreate();",
          "new_line_content": "    modules = dictCreate(&modulesDictType,NULL);",
          "content_same": false
        },
        {
          "line": 6388,
          "old_api": "listCreate",
          "new_api": "createClient",
          "old_text": "listCreate()",
          "new_text": "createClient(NULL)",
          "old_line_content": "    moduleKeyspaceSubscribers = listCreate();",
          "new_line_content": "    moduleFreeContextReusedClient = createClient(NULL);",
          "content_same": false
        },
        {
          "line": 6396,
          "old_api": "moduleRegisterCoreAPI",
          "new_api": "pipe",
          "old_text": "moduleRegisterCoreAPI()",
          "new_text": "pipe(server.module_blocked_pipe)",
          "old_line_content": "    moduleRegisterCoreAPI();",
          "new_line_content": "    if (pipe(server.module_blocked_pipe) == -1) {",
          "content_same": false
        },
        {
          "line": 6397,
          "old_api": "pipe",
          "new_api": "serverLog",
          "old_text": "pipe(server.module_blocked_pipe)",
          "new_text": "serverLog(LL_WARNING,\n            \"Can't create the pipe for module blocking commands: %s\",\n            strerror(errno))",
          "old_line_content": "    if (pipe(server.module_blocked_pipe) == -1) {",
          "new_line_content": "        serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 6400,
          "old_api": "strerror",
          "new_api": "exit",
          "old_text": "strerror(errno)",
          "new_text": "exit(1)",
          "old_line_content": "            strerror(errno));",
          "new_line_content": "        exit(1);",
          "content_same": false
        },
        {
          "line": 6432,
          "old_api": "listRewind",
          "new_api": "listNext",
          "old_text": "listRewind(server.loadmodule_queue,&li)",
          "new_text": "listNext(&li)",
          "old_line_content": "    listRewind(server.loadmodule_queue,&li);",
          "new_line_content": "    while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 6450,
          "old_api": "listRelease",
          "new_api": "sdsfree",
          "old_text": "listRelease(module->using)",
          "new_text": "sdsfree(module->name)",
          "old_line_content": "    listRelease(module->using);",
          "new_line_content": "    sdsfree(module->name);",
          "content_same": false
        },
        {
          "line": 6451,
          "old_api": "sdsfree",
          "new_api": "zfree",
          "old_text": "sdsfree(module->name)",
          "new_text": "zfree(module)",
          "old_line_content": "    sdsfree(module->name);",
          "new_line_content": "    zfree(module);",
          "content_same": false
        },
        {
          "line": 6459,
          "old_api": "dictNext",
          "new_api": "dictGetVal",
          "old_text": "dictNext(di)",
          "new_text": "dictGetVal(de)",
          "old_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "new_line_content": "        struct redisCommand *cmd = dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 6467,
          "old_api": "dictDelete",
          "new_api": "sdsfree",
          "old_text": "dictDelete(server.orig_commands,cmdname)",
          "new_text": "sdsfree(cmdname)",
          "old_line_content": "                dictDelete(server.orig_commands,cmdname);",
          "new_line_content": "                sdsfree(cmdname);",
          "content_same": false
        },
        {
          "line": 6468,
          "old_api": "sdsfree",
          "new_api": "zfree",
          "old_text": "sdsfree(cmdname)",
          "new_text": "zfree(cp->rediscmd)",
          "old_line_content": "                sdsfree(cmdname);",
          "new_line_content": "                zfree(cp->rediscmd);",
          "content_same": false
        },
        {
          "line": 6491,
          "old_api": "dlclose",
          "new_api": "serverLog",
          "old_text": "dlclose(handle)",
          "new_text": "serverLog(LL_WARNING,\n            \"Module %s does not export RedisModule_OnLoad() \"\n            \"symbol. Module not loaded.\",path)",
          "old_line_content": "        dlclose(handle);",
          "new_line_content": "        serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 6499,
          "old_api": "moduleUnregisterCommands",
          "new_api": "moduleUnregisterSharedAPI",
          "old_text": "moduleUnregisterCommands(ctx.module)",
          "new_text": "moduleUnregisterSharedAPI(ctx.module)",
          "old_line_content": "            moduleUnregisterCommands(ctx.module);",
          "new_line_content": "            moduleUnregisterSharedAPI(ctx.module);",
          "content_same": false
        },
        {
          "line": 6500,
          "old_api": "moduleUnregisterSharedAPI",
          "new_api": "moduleUnregisterUsedAPI",
          "old_text": "moduleUnregisterSharedAPI(ctx.module)",
          "new_text": "moduleUnregisterUsedAPI(ctx.module)",
          "old_line_content": "            moduleUnregisterSharedAPI(ctx.module);",
          "new_line_content": "            moduleUnregisterUsedAPI(ctx.module);",
          "content_same": false
        },
        {
          "line": 6501,
          "old_api": "moduleUnregisterUsedAPI",
          "new_api": "moduleFreeModuleStructure",
          "old_text": "moduleUnregisterUsedAPI(ctx.module)",
          "new_text": "moduleFreeModuleStructure(ctx.module)",
          "old_line_content": "            moduleUnregisterUsedAPI(ctx.module);",
          "new_line_content": "            moduleFreeModuleStructure(ctx.module);",
          "content_same": false
        },
        {
          "line": 6504,
          "old_api": "dlclose",
          "new_api": "serverLog",
          "old_text": "dlclose(handle)",
          "new_text": "serverLog(LL_WARNING,\n            \"Module %s initialization failed. Module not loaded\",path)",
          "old_line_content": "        dlclose(handle);",
          "new_line_content": "        serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 6555,
          "old_api": "onunload",
          "new_api": "moduleFreeContext",
          "old_text": "onunload((void*)&ctx)",
          "new_text": "moduleFreeContext(&ctx)",
          "old_line_content": "        int unload_status = onunload((void*)&ctx);",
          "new_line_content": "        moduleFreeContext(&ctx);",
          "content_same": false
        },
        {
          "line": 6565,
          "old_api": "moduleUnregisterCommands",
          "new_api": "moduleUnregisterSharedAPI",
          "old_text": "moduleUnregisterCommands(module)",
          "new_text": "moduleUnregisterSharedAPI(module)",
          "old_line_content": "    moduleUnregisterCommands(module);",
          "new_line_content": "    moduleUnregisterSharedAPI(module);",
          "content_same": false
        },
        {
          "line": 6566,
          "old_api": "moduleUnregisterSharedAPI",
          "new_api": "moduleUnregisterUsedAPI",
          "old_text": "moduleUnregisterSharedAPI(module)",
          "new_text": "moduleUnregisterUsedAPI(module)",
          "old_line_content": "    moduleUnregisterSharedAPI(module);",
          "new_line_content": "    moduleUnregisterUsedAPI(module);",
          "content_same": false
        },
        {
          "line": 6567,
          "old_api": "moduleUnregisterUsedAPI",
          "new_api": "moduleUnregisterFilters",
          "old_text": "moduleUnregisterUsedAPI(module)",
          "new_text": "moduleUnregisterFilters(module)",
          "old_line_content": "    moduleUnregisterUsedAPI(module);",
          "new_line_content": "    moduleUnregisterFilters(module);",
          "content_same": false
        },
        {
          "line": 6571,
          "old_api": "moduleUnsubscribeNotifications",
          "new_api": "moduleUnsubscribeAllServerEvents",
          "old_text": "moduleUnsubscribeNotifications(module)",
          "new_text": "moduleUnsubscribeAllServerEvents(module)",
          "old_line_content": "    moduleUnsubscribeNotifications(module);",
          "new_line_content": "    moduleUnsubscribeAllServerEvents(module);",
          "content_same": false
        },
        {
          "line": 6575,
          "old_api": "dlclose",
          "new_api": "dlerror",
          "old_text": "dlclose(module->handle)",
          "new_text": "dlerror()",
          "old_line_content": "    if (dlclose(module->handle) == -1) {",
          "new_line_content": "        char *error = dlerror();",
          "content_same": false
        },
        {
          "line": 6588,
          "old_api": "serverLog",
          "new_api": "dictDelete",
          "old_text": "serverLog(LL_NOTICE,\"Module %s unloaded\",module->name)",
          "new_text": "dictDelete(modules,module->name)",
          "old_line_content": "    serverLog(LL_NOTICE,\"Module %s unloaded\",module->name);",
          "new_line_content": "    dictDelete(modules,module->name);",
          "content_same": false
        },
        {
          "line": 6602,
          "old_api": "dictSize",
          "new_api": "dictNext",
          "old_text": "dictSize(modules)",
          "new_text": "dictNext(di)",
          "old_line_content": "    addReplyArrayLen(c,dictSize(modules));",
          "new_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 6603,
          "old_api": "dictNext",
          "new_api": "dictGetKey",
          "old_text": "dictNext(di)",
          "new_text": "dictGetKey(de)",
          "old_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "new_line_content": "        sds name = dictGetKey(de);",
          "content_same": false
        },
        {
          "line": 6604,
          "old_api": "dictGetKey",
          "new_api": "dictGetVal",
          "old_text": "dictGetKey(de)",
          "new_text": "dictGetVal(de)",
          "old_line_content": "        sds name = dictGetKey(de);",
          "new_line_content": "        struct RedisModule *module = dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 6605,
          "old_api": "dictGetVal",
          "new_api": "addReplyMapLen",
          "old_text": "dictGetVal(de)",
          "new_text": "addReplyMapLen(c,2)",
          "old_line_content": "        struct RedisModule *module = dictGetVal(de);",
          "new_line_content": "        addReplyMapLen(c,2);",
          "content_same": false
        },
        {
          "line": 6606,
          "old_api": "addReplyMapLen",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyMapLen(c,2)",
          "new_text": "addReplyBulkCString(c,\"name\")",
          "old_line_content": "        addReplyMapLen(c,2);",
          "new_line_content": "        addReplyBulkCString(c,\"name\");",
          "content_same": false
        },
        {
          "line": 6607,
          "old_api": "addReplyBulkCString",
          "new_api": "sdslen",
          "old_text": "addReplyBulkCString(c,\"name\")",
          "new_text": "sdslen(name)",
          "old_line_content": "        addReplyBulkCString(c,\"name\");",
          "new_line_content": "        addReplyBulkCBuffer(c,name,sdslen(name));",
          "content_same": false
        },
        {
          "line": 6608,
          "old_api": "sdslen",
          "new_api": "addReplyBulkCString",
          "old_text": "sdslen(name)",
          "new_text": "addReplyBulkCString(c,\"ver\")",
          "old_line_content": "        addReplyBulkCBuffer(c,name,sdslen(name));",
          "new_line_content": "        addReplyBulkCString(c,\"ver\");",
          "content_same": false
        },
        {
          "line": 6609,
          "old_api": "addReplyBulkCString",
          "new_api": "addReplyLongLong",
          "old_text": "addReplyBulkCString(c,\"ver\")",
          "new_text": "addReplyLongLong(c,module->ver)",
          "old_line_content": "        addReplyBulkCString(c,\"ver\");",
          "new_line_content": "        addReplyLongLong(c,module->ver);",
          "content_same": false
        },
        {
          "line": 6620,
          "old_api": "listRewind",
          "new_api": "sdsnew",
          "old_text": "listRewind(l,&li)",
          "new_text": "sdsnew(\"[\")",
          "old_line_content": "    listRewind(l,&li);",
          "new_line_content": "    sds output = sdsnew(\"[\");",
          "content_same": false
        },
        {
          "line": 6621,
          "old_api": "sdsnew",
          "new_api": "listNext",
          "old_text": "sdsnew(\"[\")",
          "new_text": "listNext(&li)",
          "old_line_content": "    sds output = sdsnew(\"[\");",
          "new_line_content": "    while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 6626,
          "old_api": "sdstrim",
          "new_api": "sdscat",
          "old_text": "sdstrim(output,\"|\")",
          "new_text": "sdscat(output,\"]\")",
          "old_line_content": "    output = sdstrim(output,\"|\");",
          "new_line_content": "    output = sdscat(output,\"]\");",
          "content_same": false
        },
        {
          "line": 6635,
          "old_api": "sdscat",
          "new_api": "sdstrim",
          "old_text": "sdscat(output,\"handle-io-errors|\")",
          "new_text": "sdstrim(output,\"|\")",
          "old_line_content": "        output = sdscat(output,\"handle-io-errors|\");",
          "new_line_content": "    output = sdstrim(output,\"|\");",
          "content_same": false
        },
        {
          "line": 6636,
          "old_api": "sdstrim",
          "new_api": "sdscat",
          "old_text": "sdstrim(output,\"|\")",
          "new_text": "sdscat(output,\"]\")",
          "old_line_content": "    output = sdstrim(output,\"|\");",
          "new_line_content": "    output = sdscat(output,\"]\");",
          "content_same": false
        },
        {
          "line": 6651,
          "old_api": "dictNext",
          "new_api": "dictGetKey",
          "old_text": "dictNext(di)",
          "new_text": "dictGetKey(de)",
          "old_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "new_line_content": "        sds name = dictGetKey(de);",
          "content_same": false
        },
        {
          "line": 6652,
          "old_api": "dictGetKey",
          "new_api": "dictGetVal",
          "old_text": "dictGetKey(de)",
          "new_text": "dictGetVal(de)",
          "old_line_content": "        sds name = dictGetKey(de);",
          "new_line_content": "        struct RedisModule *module = dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 6656,
          "old_api": "genModulesInfoStringRenderModulesList",
          "new_api": "genModulesInfoStringRenderModuleOptions",
          "old_text": "genModulesInfoStringRenderModulesList(module->using)",
          "new_text": "genModulesInfoStringRenderModuleOptions(module)",
          "old_line_content": "        sds using = genModulesInfoStringRenderModulesList(module->using);",
          "new_line_content": "        sds options = genModulesInfoStringRenderModuleOptions(module);",
          "content_same": false
        },
        {
          "line": 6657,
          "old_api": "genModulesInfoStringRenderModuleOptions",
          "new_api": "sdscatfmt",
          "old_text": "genModulesInfoStringRenderModuleOptions(module)",
          "new_text": "sdscatfmt(info,\n            \"module:name=%S,ver=%i,api=%i,filters=%i,\"\n            \"usedby=%S,using=%S,options=%S\\r\\n\",\n                name, module->ver, module->apiver,\n                (int)listLength(module->filters), usedby, using, options)",
          "old_line_content": "        sds options = genModulesInfoStringRenderModuleOptions(module);",
          "new_line_content": "        info = sdscatfmt(info,",
          "content_same": false
        },
        {
          "line": 6662,
          "old_api": "listLength",
          "new_api": "sdsfree",
          "old_text": "listLength(module->filters)",
          "new_text": "sdsfree(usedby)",
          "old_line_content": "                (int)listLength(module->filters), usedby, using, options);",
          "new_line_content": "        sdsfree(usedby);",
          "content_same": false
        },
        {
          "line": 6694,
          "old_api": "moduleLoad",
          "new_api": "addReply",
          "old_text": "moduleLoad(c->argv[2]->ptr,(void **)argv,argc)",
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "        if (moduleLoad(c->argv[2]->ptr,(void **)argv,argc) == C_OK)",
          "new_line_content": "            addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 6699,
          "old_api": "strcasecmp",
          "new_api": "moduleUnload",
          "old_text": "strcasecmp(subcmd,\"unload\")",
          "new_text": "moduleUnload(c->argv[2]->ptr)",
          "old_line_content": "    } else if (!strcasecmp(subcmd,\"unload\") && c->argc == 3) {",
          "new_line_content": "        if (moduleUnload(c->argv[2]->ptr) == C_OK)",
          "content_same": false
        },
        {
          "line": 6700,
          "old_api": "moduleUnload",
          "new_api": "addReply",
          "old_text": "moduleUnload(c->argv[2]->ptr)",
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "        if (moduleUnload(c->argv[2]->ptr) == C_OK)",
          "new_line_content": "            addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 6726,
          "old_api": "strcasecmp",
          "new_api": "addReplyLoadedModules",
          "old_text": "strcasecmp(subcmd,\"list\")",
          "new_text": "addReplyLoadedModules(c)",
          "old_line_content": "    } else if (!strcasecmp(subcmd,\"list\") && c->argc == 2) {",
          "new_line_content": "        addReplyLoadedModules(c);",
          "content_same": false
        },
        {
          "line": 6775,
          "old_api": "dictCreate",
          "new_api": "REGISTER_API",
          "old_text": "dictCreate(&moduleAPIDictType,NULL)",
          "new_text": "REGISTER_API(Alloc)",
          "old_line_content": "    server.sharedapi = dictCreate(&moduleAPIDictType,NULL);",
          "new_line_content": "    REGISTER_API(Alloc);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 4122,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(RedisModuleBlockedClient))",
          "old_line_content": "",
          "new_line_content": "    c->bpop.module_blocked_handle = zmalloc(sizeof(RedisModuleBlockedClient));",
          "content_same": false
        },
        {
          "line": 2080,
          "old_api": null,
          "new_api": "dbUnshareStringValue",
          "old_text": null,
          "new_text": "dbUnshareStringValue(key->db, key->key, key->value)",
          "old_line_content": "    if ((mode & REDISMODULE_WRITE) || key->value->encoding != OBJ_ENCODING_RAW)",
          "new_line_content": "        key->value = dbUnshareStringValue(key->db, key->key, key->value);",
          "content_same": false
        },
        {
          "line": 4130,
          "old_api": null,
          "new_api": "mstime",
          "old_text": null,
          "new_text": "mstime()",
          "old_line_content": "     * an error. */",
          "new_line_content": "    mstime_t timeout = timeout_ms ? (mstime()+timeout_ms) : 0;",
          "content_same": false
        },
        {
          "line": 2082,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(key->value->ptr)",
          "old_line_content": "",
          "new_line_content": "    *len = sdslen(key->value->ptr);",
          "content_same": false
        },
        {
          "line": 4138,
          "old_api": null,
          "new_api": "createClient",
          "old_text": null,
          "new_text": "createClient(NULL)",
          "old_line_content": "    bc->privdata = privdata;",
          "new_line_content": "    bc->reply_client = createClient(NULL);",
          "content_same": false
        },
        {
          "line": 4147,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, islua ?\n            \"Blocking module command called from Lua script\" :\n            \"Blocking module command called from transaction\")",
          "old_line_content": "        c->bpop.module_blocked_handle = NULL;",
          "new_line_content": "        addReplyError(c, islua ?",
          "content_same": false
        },
        {
          "line": 4152,
          "old_api": null,
          "new_api": "blockForKeys",
          "old_text": null,
          "new_text": "blockForKeys(c,BLOCKED_MODULE,keys,numkeys,timeout,NULL,NULL)",
          "old_line_content": "        if (keys) {",
          "new_line_content": "            blockForKeys(c,BLOCKED_MODULE,keys,numkeys,timeout,NULL,NULL);",
          "content_same": false
        },
        {
          "line": 4154,
          "old_api": null,
          "new_api": "blockClient",
          "old_text": null,
          "new_text": "blockClient(c,BLOCKED_MODULE)",
          "old_line_content": "        } else {",
          "new_line_content": "            blockClient(c,BLOCKED_MODULE);",
          "content_same": false
        },
        {
          "line": 6202,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(RedisModule_EventListeners,&li)",
          "old_line_content": "    listNode *ln;",
          "new_line_content": "    listRewind(RedisModule_EventListeners,&li);",
          "content_same": false
        },
        {
          "line": 2109,
          "old_api": null,
          "new_api": "sdsnewlen",
          "old_text": null,
          "new_text": "sdsnewlen(NULL, newlen)",
          "old_line_content": "        /* Empty key: create it with the new size. */",
          "new_line_content": "        robj *o = createObject(OBJ_STRING,sdsnewlen(NULL, newlen));",
          "content_same": false
        },
        {
          "line": 2112,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(o)",
          "old_line_content": "        key->value = o;",
          "new_line_content": "        decrRefCount(o);",
          "content_same": false
        },
        {
          "line": 2115,
          "old_api": null,
          "new_api": "dbUnshareStringValue",
          "old_text": null,
          "new_text": "dbUnshareStringValue(key->db, key->key, key->value)",
          "old_line_content": "        /* Unshare and resize. */",
          "new_line_content": "        key->value = dbUnshareStringValue(key->db, key->key, key->value);",
          "content_same": false
        },
        {
          "line": 6212,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(RedisModule_EventListeners,ln)",
          "old_line_content": "        if (callback == NULL) {",
          "new_line_content": "            listDelNode(RedisModule_EventListeners,ln);",
          "content_same": false
        },
        {
          "line": 2118,
          "old_api": null,
          "new_api": "sdsgrowzero",
          "old_text": null,
          "new_text": "sdsgrowzero(key->value->ptr,newlen)",
          "old_line_content": "        if (newlen > curlen) {",
          "new_line_content": "            key->value->ptr = sdsgrowzero(key->value->ptr,newlen);",
          "content_same": false
        },
        {
          "line": 2120,
          "old_api": null,
          "new_api": "sdsrange",
          "old_text": null,
          "new_text": "sdsrange(key->value->ptr,0,newlen-1)",
          "old_line_content": "        } else if (newlen < curlen) {",
          "new_line_content": "            sdsrange(key->value->ptr,0,newlen-1);",
          "content_same": false
        },
        {
          "line": 2122,
          "old_api": null,
          "new_api": "sdsavail",
          "old_text": null,
          "new_text": "sdsavail(key->value->ptr)",
          "old_line_content": "            /* If the string is too wasteful, reallocate it. */",
          "new_line_content": "            if (sdslen(key->value->ptr) < sdsavail(key->value->ptr))",
          "content_same": false
        },
        {
          "line": 6221,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*el))",
          "old_line_content": "    /* No event found, we need to add a new one. */",
          "new_line_content": "    el = zmalloc(sizeof(*el));",
          "content_same": false
        },
        {
          "line": 6225,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(RedisModule_EventListeners,el)",
          "old_line_content": "    el->callback = callback;",
          "new_line_content": "    listAddNodeTail(RedisModule_EventListeners,el);",
          "content_same": false
        },
        {
          "line": 4180,
          "old_api": null,
          "new_api": "reply_callback",
          "old_text": null,
          "new_text": "bc->reply_callback(&ctx,(void**)c->argv,c->argc)",
          "old_line_content": "    ctx.blocked_client = bc;",
          "new_line_content": "    if (bc->reply_callback(&ctx,(void**)c->argv,c->argc) == REDISMODULE_OK)",
          "content_same": false
        },
        {
          "line": 4182,
          "old_api": null,
          "new_api": "moduleFreeContext",
          "old_text": null,
          "new_text": "moduleFreeContext(&ctx)",
          "old_line_content": "        served = 1;",
          "new_line_content": "    moduleFreeContext(&ctx);",
          "content_same": false
        },
        {
          "line": 2140,
          "old_api": null,
          "new_api": "moduleCreateEmptyKey",
          "old_text": null,
          "new_text": "moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_LIST)",
          "old_line_content": "    if (key->value && key->value->type != OBJ_LIST) return REDISMODULE_ERR;",
          "new_line_content": "    if (key->value == NULL) moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_LIST);",
          "content_same": false
        },
        {
          "line": 6240,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(RedisModule_EventListeners)",
          "old_line_content": "     * cheap if there are no registered modules. */",
          "new_line_content": "    if (listLength(RedisModule_EventListeners) == 0) return;",
          "content_same": false
        },
        {
          "line": 6244,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(RedisModule_EventListeners,&li)",
          "old_line_content": "    listNode *ln;",
          "new_line_content": "    listRewind(RedisModule_EventListeners,&li);",
          "content_same": false
        },
        {
          "line": 4203,
          "old_api": null,
          "new_api": "moduleBlockClient",
          "old_text": null,
          "new_text": "moduleBlockClient(ctx,reply_callback,timeout_callback,free_privdata,timeout_ms, NULL,0,NULL)",
          "old_line_content": "RedisModuleBlockedClient *RM_BlockClient(RedisModuleCtx *ctx, RedisModuleCmdFunc reply_callback, RedisModuleCmdFunc timeout_callback, void (*free_privdata)(RedisModuleCtx*,void*), long long timeout_ms) {",
          "new_line_content": "    return moduleBlockClient(ctx,reply_callback,timeout_callback,free_privdata,timeout_ms, NULL,0,NULL);",
          "content_same": false
        },
        {
          "line": 2157,
          "old_api": null,
          "new_api": "listTypePop",
          "old_text": null,
          "new_text": "listTypePop(key->value,\n        (where == REDISMODULE_LIST_HEAD) ? QUICKLIST_HEAD : QUICKLIST_TAIL)",
          "old_line_content": "        key->value->type != OBJ_LIST) return NULL;",
          "new_line_content": "    robj *ele = listTypePop(key->value,",
          "content_same": false
        },
        {
          "line": 6254,
          "old_api": null,
          "new_api": "createClient",
          "old_text": null,
          "new_text": "createClient(NULL)",
          "old_line_content": "            } else {",
          "new_line_content": "                ctx.client = createClient(NULL);",
          "content_same": false
        },
        {
          "line": 2159,
          "old_api": null,
          "new_api": "getDecodedObject",
          "old_text": null,
          "new_text": "getDecodedObject(ele)",
          "old_line_content": "        (where == REDISMODULE_LIST_HEAD) ? QUICKLIST_HEAD : QUICKLIST_TAIL);",
          "new_line_content": "    robj *decoded = getDecodedObject(ele);",
          "content_same": false
        },
        {
          "line": 6267,
          "old_api": null,
          "new_api": "selectDb",
          "old_text": null,
          "new_text": "selectDb(ctx.client, 0)",
          "old_line_content": "             * DB automatically. */",
          "new_line_content": "            selectDb(ctx.client, 0);",
          "content_same": false
        },
        {
          "line": 6271,
          "old_api": null,
          "new_api": "modulePopulateClientInfoStructure",
          "old_text": null,
          "new_text": "modulePopulateClientInfoStructure(&civ1,data,\n                                                  el->event.dataver)",
          "old_line_content": "            if (eid == REDISMODULE_EVENT_CLIENT_CHANGE) {",
          "new_line_content": "                modulePopulateClientInfoStructure(&civ1,data,",
          "content_same": false
        },
        {
          "line": 6275,
          "old_api": null,
          "new_api": "modulePopulateReplicationInfoStructure",
          "old_text": null,
          "new_text": "modulePopulateReplicationInfoStructure(&riv1,el->event.dataver)",
          "old_line_content": "            } else if (eid == REDISMODULE_EVENT_REPLICATION_ROLE_CHANGED) {",
          "new_line_content": "                modulePopulateReplicationInfoStructure(&riv1,el->event.dataver);",
          "content_same": false
        },
        {
          "line": 6281,
          "old_api": null,
          "new_api": "selectDb",
          "old_text": null,
          "new_text": "selectDb(ctx.client, fi->dbnum)",
          "old_line_content": "                if (fi->dbnum != -1)",
          "new_line_content": "                    selectDb(ctx.client, fi->dbnum);",
          "content_same": false
        },
        {
          "line": 6298,
          "old_api": null,
          "new_api": "callback",
          "old_text": null,
          "new_text": "el->callback(&ctx,el->event,subid,moduledata)",
          "old_line_content": "            el->module->in_hook++;",
          "new_line_content": "            el->callback(&ctx,el->event,subid,moduledata);",
          "content_same": false
        },
        {
          "line": 6302,
          "old_api": null,
          "new_api": "freeClient",
          "old_text": null,
          "new_text": "freeClient(ctx.client)",
          "old_line_content": "",
          "new_line_content": "            if (ModulesInHooks != 0) freeClient(ctx.client);",
          "content_same": false
        },
        {
          "line": 4257,
          "old_api": null,
          "new_api": "moduleBlockClient",
          "old_text": null,
          "new_text": "moduleBlockClient(ctx,reply_callback,timeout_callback,free_privdata,timeout_ms, keys,numkeys,privdata)",
          "old_line_content": "RedisModuleBlockedClient *RM_BlockClientOnKeys(RedisModuleCtx *ctx, RedisModuleCmdFunc reply_callback, RedisModuleCmdFunc timeout_callback, void (*free_privdata)(RedisModuleCtx*,void*), long long timeout_ms, RedisModuleString **keys, int numkeys, void *privdata) {",
          "new_line_content": "    return moduleBlockClient(ctx,reply_callback,timeout_callback,free_privdata,timeout_ms, keys,numkeys,privdata);",
          "content_same": false
        },
        {
          "line": 4265,
          "old_api": null,
          "new_api": "signalKeyAsReady",
          "old_text": null,
          "new_text": "signalKeyAsReady(ctx->client->db, key)",
          "old_line_content": "void RM_SignalKeyAsReady(RedisModuleCtx *ctx, RedisModuleString *key) {",
          "new_line_content": "    signalKeyAsReady(ctx->client->db, key);",
          "content_same": false
        },
        {
          "line": 6314,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(RedisModule_EventListeners,&li)",
          "old_line_content": "    listNode *ln;",
          "new_line_content": "    listRewind(RedisModule_EventListeners,&li);",
          "content_same": false
        },
        {
          "line": 2220,
          "old_api": null,
          "new_api": "moduleCreateEmptyKey",
          "old_text": null,
          "new_text": "moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_ZSET)",
          "old_line_content": "    if (key->value && key->value->type != OBJ_ZSET) return REDISMODULE_ERR;",
          "new_line_content": "    if (key->value == NULL) moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_ZSET);",
          "content_same": false
        },
        {
          "line": 6316,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&li)",
          "old_line_content": "",
          "new_line_content": "    while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 4270,
          "old_api": null,
          "new_api": "pthread_mutex_lock",
          "old_text": null,
          "new_text": "pthread_mutex_lock(&moduleUnblockedClientsMutex)",
          "old_line_content": "int moduleUnblockClientByHandle(RedisModuleBlockedClient *bc, void *privdata) {",
          "new_line_content": "    pthread_mutex_lock(&moduleUnblockedClientsMutex);",
          "content_same": false
        },
        {
          "line": 6319,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(RedisModule_EventListeners,ln)",
          "old_line_content": "        if (el->module == module) {",
          "new_line_content": "            listDelNode(RedisModule_EventListeners,ln);",
          "content_same": false
        },
        {
          "line": 4273,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(moduleUnblockedClients,bc)",
          "old_line_content": "    bc->unblocked = 1;",
          "new_line_content": "    listAddNodeTail(moduleUnblockedClients,bc);",
          "content_same": false
        },
        {
          "line": 2226,
          "old_api": null,
          "new_api": "RM_ZsetAddFlagsFromCoreFlags",
          "old_text": null,
          "new_text": "RM_ZsetAddFlagsFromCoreFlags(flags)",
          "old_line_content": "    }",
          "new_line_content": "    if (flagsptr) *flagsptr = RM_ZsetAddFlagsFromCoreFlags(flags);",
          "content_same": false
        },
        {
          "line": 4277,
          "old_api": null,
          "new_api": "pthread_mutex_unlock",
          "old_text": null,
          "new_text": "pthread_mutex_unlock(&moduleUnblockedClientsMutex)",
          "old_line_content": "    }",
          "new_line_content": "    pthread_mutex_unlock(&moduleUnblockedClientsMutex);",
          "content_same": false
        },
        {
          "line": 6326,
          "old_api": null,
          "new_api": "ustime",
          "old_text": null,
          "new_text": "ustime()",
          "old_line_content": "void processModuleLoadingProgressEvent(int is_aof) {",
          "new_line_content": "    long long now = ustime();",
          "content_same": false
        },
        {
          "line": 4285,
          "old_api": null,
          "new_api": "moduleUnblockClientByHandle",
          "old_text": null,
          "new_text": "moduleUnblockClientByHandle(bc,NULL)",
          "old_line_content": "    RedisModuleBlockedClient *bc = c->bpop.module_blocked_handle;",
          "new_line_content": "    moduleUnblockClientByHandle(bc,NULL);",
          "content_same": false
        },
        {
          "line": 6336,
          "old_api": null,
          "new_api": "moduleFireServerEvent",
          "old_text": null,
          "new_text": "moduleFireServerEvent(REDISMODULE_EVENT_LOADING_PROGRESS,\n                              is_aof?\n                                REDISMODULE_SUBEVENT_LOADING_PROGRESS_AOF:\n                                REDISMODULE_SUBEVENT_LOADING_PROGRESS_RDB,\n                              &fi)",
          "old_line_content": "                                     progress};",
          "new_line_content": "        moduleFireServerEvent(REDISMODULE_EVENT_LOADING_PROGRESS,",
          "content_same": false
        },
        {
          "line": 2247,
          "old_api": null,
          "new_api": "moduleCreateEmptyKey",
          "old_text": null,
          "new_text": "moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_ZSET)",
          "old_line_content": "    if (key->value && key->value->type != OBJ_ZSET) return REDISMODULE_ERR;",
          "new_line_content": "    if (key->value == NULL) moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_ZSET);",
          "content_same": false
        },
        {
          "line": 2250,
          "old_api": null,
          "new_api": "zsetAdd",
          "old_text": null,
          "new_text": "zsetAdd(key->value,score,ele->ptr,&flags,newscore)",
          "old_line_content": "    flags |= ZADD_INCR;",
          "new_line_content": "    if (zsetAdd(key->value,score,ele->ptr,&flags,newscore) == 0) {",
          "content_same": false
        },
        {
          "line": 6354,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen((char*)key)",
          "old_line_content": "uint64_t dictCStringKeyHash(const void *key) {",
          "new_line_content": "    return dictGenHashFunction((unsigned char*)key, strlen((char*)key));",
          "content_same": false
        },
        {
          "line": 2259,
          "old_api": null,
          "new_api": "RM_ZsetAddFlagsFromCoreFlags",
          "old_text": null,
          "new_text": "RM_ZsetAddFlagsFromCoreFlags(flags)",
          "old_line_content": "    }",
          "new_line_content": "    if (flagsptr) *flagsptr = RM_ZsetAddFlagsFromCoreFlags(flags);",
          "content_same": false
        },
        {
          "line": 6358,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(privdata)",
          "old_line_content": "int dictCStringKeyCompare(void *privdata, const void *key1, const void *key2) {",
          "new_line_content": "    UNUSED(privdata);",
          "content_same": false
        },
        {
          "line": 4321,
          "old_api": null,
          "new_api": "moduleBlockedClientTimedOut",
          "old_text": null,
          "new_text": "moduleBlockedClientTimedOut(bc->client)",
          "old_line_content": "        if (bc->unblocked) return REDISMODULE_OK;",
          "new_line_content": "        if (bc->client) moduleBlockedClientTimedOut(bc->client);",
          "content_same": false
        },
        {
          "line": 4323,
          "old_api": null,
          "new_api": "moduleUnblockClientByHandle",
          "old_text": null,
          "new_text": "moduleUnblockClientByHandle(bc,privdata)",
          "old_line_content": "    }",
          "new_line_content": "    moduleUnblockClientByHandle(bc,privdata);",
          "content_same": false
        },
        {
          "line": 6372,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(server.moduleapi, (char*)funcname, funcptr)",
          "old_line_content": "int moduleRegisterApi(const char *funcname, void *funcptr) {",
          "new_line_content": "    return dictAdd(server.moduleapi, (char*)funcname, funcptr);",
          "content_same": false
        },
        {
          "line": 2284,
          "old_api": null,
          "new_api": "zsetDel",
          "old_text": null,
          "new_text": "zsetDel(key->value,ele->ptr)",
          "old_line_content": "    if (key->value && key->value->type != OBJ_ZSET) return REDISMODULE_ERR;",
          "new_line_content": "    if (key->value != NULL && zsetDel(key->value,ele->ptr)) {",
          "content_same": false
        },
        {
          "line": 4332,
          "old_api": null,
          "new_api": "RM_UnblockClient",
          "old_text": null,
          "new_text": "RM_UnblockClient(bc,NULL)",
          "old_line_content": "    bc->disconnect_callback = NULL;",
          "new_line_content": "    return RM_UnblockClient(bc,NULL);",
          "content_same": false
        },
        {
          "line": 6382,
          "old_api": null,
          "new_api": "listCreate",
          "old_text": null,
          "new_text": "listCreate()",
          "old_line_content": "void moduleInitModulesSystem(void) {",
          "new_line_content": "    moduleUnblockedClients = listCreate();",
          "content_same": false
        },
        {
          "line": 6387,
          "old_api": null,
          "new_api": "listCreate",
          "old_text": null,
          "new_text": "listCreate()",
          "old_line_content": "    /* Set up the keyspace notification susbscriber list and static client */",
          "new_line_content": "    moduleKeyspaceSubscribers = listCreate();",
          "content_same": false
        },
        {
          "line": 6393,
          "old_api": null,
          "new_api": "listCreate",
          "old_text": null,
          "new_text": "listCreate()",
          "old_line_content": "    /* Set up filter list */",
          "new_line_content": "    moduleCommandFilters = listCreate();",
          "content_same": false
        },
        {
          "line": 6395,
          "old_api": null,
          "new_api": "moduleRegisterCoreAPI",
          "old_text": null,
          "new_text": "moduleRegisterCoreAPI()",
          "old_line_content": "",
          "new_line_content": "    moduleRegisterCoreAPI();",
          "content_same": false
        },
        {
          "line": 2303,
          "old_api": null,
          "new_api": "zsetScore",
          "old_text": null,
          "new_text": "zsetScore(key->value,ele->ptr,score)",
          "old_line_content": "    if (key->value->type != OBJ_ZSET) return REDISMODULE_ERR;",
          "new_line_content": "    if (zsetScore(key->value,ele->ptr,score) == C_ERR) return REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 6399,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "            \"Can't create the pipe for module blocking commands: %s\",",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 6404,
          "old_api": null,
          "new_api": "anetNonBlock",
          "old_text": null,
          "new_text": "anetNonBlock(NULL,server.module_blocked_pipe[0])",
          "old_line_content": "     * and we do not want to block not in the read nor in the write half. */",
          "new_line_content": "    anetNonBlock(NULL,server.module_blocked_pipe[0]);",
          "content_same": false
        },
        {
          "line": 6408,
          "old_api": null,
          "new_api": "raxNew",
          "old_text": null,
          "new_text": "raxNew()",
          "old_line_content": "    /* Create the timers radix tree. */",
          "new_line_content": "    Timers = raxNew();",
          "content_same": false
        },
        {
          "line": 6411,
          "old_api": null,
          "new_api": "listCreate",
          "old_text": null,
          "new_text": "listCreate()",
          "old_line_content": "    /* Setup the event listeners data structures. */",
          "new_line_content": "    RedisModule_EventListeners = listCreate();",
          "content_same": false
        },
        {
          "line": 4367,
          "old_api": null,
          "new_api": "pthread_mutex_lock",
          "old_text": null,
          "new_text": "pthread_mutex_lock(&moduleUnblockedClientsMutex)",
          "old_line_content": "",
          "new_line_content": "    pthread_mutex_lock(&moduleUnblockedClientsMutex);",
          "content_same": false
        },
        {
          "line": 6415,
          "old_api": null,
          "new_api": "pthread_mutex_lock",
          "old_text": null,
          "new_text": "pthread_mutex_lock(&moduleGIL)",
          "old_line_content": "     * it is just unlocked when it's safe. */",
          "new_line_content": "    pthread_mutex_lock(&moduleGIL);",
          "content_same": false
        },
        {
          "line": 2321,
          "old_api": null,
          "new_api": "zslFreeLexRange",
          "old_text": null,
          "new_text": "zslFreeLexRange(&key->zlrs)",
          "old_line_content": "    if (key->ztype == REDISMODULE_ZSET_RANGE_LEX)",
          "new_line_content": "        zslFreeLexRange(&key->zlrs);",
          "content_same": false
        },
        {
          "line": 4371,
          "old_api": null,
          "new_api": "read",
          "old_text": null,
          "new_text": "read(server.module_blocked_pipe[0],buf,1)",
          "old_line_content": "    char buf[1];",
          "new_line_content": "    while (read(server.module_blocked_pipe[0],buf,1) == 1);",
          "content_same": false
        },
        {
          "line": 2325,
          "old_api": null,
          "new_api": "zsetKeyReset",
          "old_text": null,
          "new_text": "zsetKeyReset(key)",
          "old_line_content": "     * than crashing. */",
          "new_line_content": "    zsetKeyReset(key);",
          "content_same": false
        },
        {
          "line": 4376,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(moduleUnblockedClients,ln)",
          "old_line_content": "        client *c = bc->client;",
          "new_line_content": "        listDelNode(moduleUnblockedClients,ln);",
          "content_same": false
        },
        {
          "line": 6431,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(server.loadmodule_queue,&li)",
          "old_line_content": "",
          "new_line_content": "    listRewind(server.loadmodule_queue,&li);",
          "content_same": false
        },
        {
          "line": 6434,
          "old_api": null,
          "new_api": "moduleLoad",
          "old_text": null,
          "new_text": "moduleLoad(loadmod->path,(void **)loadmod->argv,loadmod->argc)",
          "old_line_content": "        struct moduleLoadQueueEntry *loadmod = ln->value;",
          "new_line_content": "        if (moduleLoad(loadmod->path,(void **)loadmod->argv,loadmod->argc)",
          "content_same": false
        },
        {
          "line": 6437,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n                \"Can't load module from %s: server aborting\",\n                loadmod->path)",
          "old_line_content": "        {",
          "new_line_content": "            serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 2342,
          "old_api": null,
          "new_api": "RM_ZsetRangeStop",
          "old_text": null,
          "new_text": "RM_ZsetRangeStop(key)",
          "old_line_content": "",
          "new_line_content": "    RM_ZsetRangeStop(key);",
          "content_same": false
        },
        {
          "line": 6440,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "                loadmod->path);",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 4395,
          "old_api": null,
          "new_api": "reply_callback",
          "old_text": null,
          "new_text": "bc->reply_callback(&ctx,(void**)c->argv,c->argc)",
          "old_line_content": "            ctx.blocked_client = bc;",
          "new_line_content": "            bc->reply_callback(&ctx,(void**)c->argv,c->argc);",
          "content_same": false
        },
        {
          "line": 6446,
          "old_api": null,
          "new_api": "listRelease",
          "old_text": null,
          "new_text": "listRelease(module->types)",
          "old_line_content": "void moduleFreeModuleStructure(struct RedisModule *module) {",
          "new_line_content": "    listRelease(module->types);",
          "content_same": false
        },
        {
          "line": 2355,
          "old_api": null,
          "new_api": "zzlFirstInRange",
          "old_text": null,
          "new_text": "zzlFirstInRange(key->value->ptr,zrs)",
          "old_line_content": "    if (key->value->encoding == OBJ_ENCODING_ZIPLIST) {",
          "new_line_content": "        key->zcurrent = first ? zzlFirstInRange(key->value->ptr,zrs) :",
          "content_same": false
        },
        {
          "line": 4407,
          "old_api": null,
          "new_api": "free_privdata",
          "old_text": null,
          "new_text": "bc->free_privdata(&ctx,bc->privdata)",
          "old_line_content": "            ctx.client = bc->client;",
          "new_line_content": "            bc->free_privdata(&ctx,bc->privdata);",
          "content_same": false
        },
        {
          "line": 2360,
          "old_api": null,
          "new_api": "zslFirstInRange",
          "old_text": null,
          "new_text": "zslFirstInRange(zsl,zrs)",
          "old_line_content": "        zskiplist *zsl = zs->zsl;",
          "new_line_content": "        key->zcurrent = first ? zslFirstInRange(zsl,zrs) :",
          "content_same": false
        },
        {
          "line": 6456,
          "old_api": null,
          "new_api": "dictGetSafeIterator",
          "old_text": null,
          "new_text": "dictGetSafeIterator(server.commands)",
          "old_line_content": "    /* Unregister all the commands registered by this module. */",
          "new_line_content": "    dictIterator *di = dictGetSafeIterator(server.commands);",
          "content_same": false
        },
        {
          "line": 6458,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "    dictEntry *de;",
          "new_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 2363,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unsupported zset encoding\")",
          "old_line_content": "    } else {",
          "new_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "content_same": false
        },
        {
          "line": 4415,
          "old_api": null,
          "new_api": "AddReplyFromClient",
          "old_text": null,
          "new_text": "AddReplyFromClient(c, bc->reply_client)",
          "old_line_content": "         * free the temporary client we just used for the replies. */",
          "new_line_content": "        if (c) AddReplyFromClient(c, bc->reply_client);",
          "content_same": false
        },
        {
          "line": 6465,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(server.commands,cmdname)",
          "old_line_content": "            if (cp->module == module) {",
          "new_line_content": "                dictDelete(server.commands,cmdname);",
          "content_same": false
        },
        {
          "line": 4423,
          "old_api": null,
          "new_api": "unblockClient",
          "old_text": null,
          "new_text": "unblockClient(c)",
          "old_line_content": "            bc->disconnect_callback = NULL;",
          "new_line_content": "            unblockClient(c);",
          "content_same": false
        },
        {
          "line": 6473,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "    }",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 4427,
          "old_api": null,
          "new_api": "clientHasPendingReplies",
          "old_text": null,
          "new_text": "clientHasPendingReplies(c)",
          "old_line_content": "             * during a non blocking command the client may receive output. */",
          "new_line_content": "            if (clientHasPendingReplies(c) &&",
          "content_same": false
        },
        {
          "line": 4431,
          "old_api": null,
          "new_api": "listAddNodeHead",
          "old_text": null,
          "new_text": "listAddNodeHead(server.clients_pending_write,c)",
          "old_line_content": "                c->flags |= CLIENT_PENDING_WRITE;",
          "new_line_content": "                listAddNodeHead(server.clients_pending_write,c);",
          "content_same": false
        },
        {
          "line": 2385,
          "old_api": null,
          "new_api": "zsetInitScoreRange",
          "old_text": null,
          "new_text": "zsetInitScoreRange(key,min,max,minex,maxex,1)",
          "old_line_content": "int RM_ZsetFirstInScoreRange(RedisModuleKey *key, double min, double max, int minex, int maxex) {",
          "new_line_content": "    return zsetInitScoreRange(key,min,max,minex,maxex,1);",
          "content_same": false
        },
        {
          "line": 6483,
          "old_api": null,
          "new_api": "dlopen",
          "old_text": null,
          "new_text": "dlopen(path,RTLD_NOW|RTLD_LOCAL)",
          "old_line_content": "",
          "new_line_content": "    handle = dlopen(path,RTLD_NOW|RTLD_LOCAL);",
          "content_same": false
        },
        {
          "line": 6485,
          "old_api": null,
          "new_api": "dlerror",
          "old_text": null,
          "new_text": "dlerror()",
          "old_line_content": "    if (handle == NULL) {",
          "new_line_content": "        serverLog(LL_WARNING, \"Module %s failed to load: %s\", path, dlerror());",
          "content_same": false
        },
        {
          "line": 2391,
          "old_api": null,
          "new_api": "zsetInitScoreRange",
          "old_text": null,
          "new_text": "zsetInitScoreRange(key,min,max,minex,maxex,0)",
          "old_line_content": "int RM_ZsetLastInScoreRange(RedisModuleKey *key, double min, double max, int minex, int maxex) {",
          "new_line_content": "    return zsetInitScoreRange(key,min,max,minex,maxex,0);",
          "content_same": false
        },
        {
          "line": 4439,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(bc)",
          "old_line_content": "        bc->module->blocked_clients--;",
          "new_line_content": "        zfree(bc);",
          "content_same": false
        },
        {
          "line": 6488,
          "old_api": null,
          "new_api": "dlsym",
          "old_text": null,
          "new_text": "dlsym(handle,\"RedisModule_OnLoad\")",
          "old_line_content": "    }",
          "new_line_content": "    onload = (int (*)(void *, void **, int))(unsigned long) dlsym(handle,\"RedisModule_OnLoad\");",
          "content_same": false
        },
        {
          "line": 4442,
          "old_api": null,
          "new_api": "pthread_mutex_lock",
          "old_text": null,
          "new_text": "pthread_mutex_lock(&moduleUnblockedClientsMutex)",
          "old_line_content": "        /* Lock again before to iterate the loop. */",
          "new_line_content": "        pthread_mutex_lock(&moduleUnblockedClientsMutex);",
          "content_same": false
        },
        {
          "line": 6490,
          "old_api": null,
          "new_api": "dlclose",
          "old_text": null,
          "new_text": "dlclose(handle)",
          "old_line_content": "    if (onload == NULL) {",
          "new_line_content": "        dlclose(handle);",
          "content_same": false
        },
        {
          "line": 4444,
          "old_api": null,
          "new_api": "pthread_mutex_unlock",
          "old_text": null,
          "new_text": "pthread_mutex_unlock(&moduleUnblockedClientsMutex)",
          "old_line_content": "    }",
          "new_line_content": "    pthread_mutex_unlock(&moduleUnblockedClientsMutex);",
          "content_same": false
        },
        {
          "line": 6496,
          "old_api": null,
          "new_api": "onload",
          "old_text": null,
          "new_text": "onload((void*)&ctx,module_argv,module_argc)",
          "old_line_content": "    }",
          "new_line_content": "    if (onload((void*)&ctx,module_argv,module_argc) == REDISMODULE_ERR) {",
          "content_same": false
        },
        {
          "line": 6498,
          "old_api": null,
          "new_api": "moduleUnregisterCommands",
          "old_text": null,
          "new_text": "moduleUnregisterCommands(ctx.module)",
          "old_line_content": "        if (ctx.module) {",
          "new_line_content": "            moduleUnregisterCommands(ctx.module);",
          "content_same": false
        },
        {
          "line": 2406,
          "old_api": null,
          "new_api": "RM_ZsetRangeStop",
          "old_text": null,
          "new_text": "RM_ZsetRangeStop(key)",
          "old_line_content": "",
          "new_line_content": "    RM_ZsetRangeStop(key);",
          "content_same": false
        },
        {
          "line": 6503,
          "old_api": null,
          "new_api": "dlclose",
          "old_text": null,
          "new_text": "dlclose(handle)",
          "old_line_content": "        }",
          "new_line_content": "        dlclose(handle);",
          "content_same": false
        },
        {
          "line": 4458,
          "old_api": null,
          "new_api": "timeout_callback",
          "old_text": null,
          "new_text": "bc->timeout_callback(&ctx,(void**)c->argv,c->argc)",
          "old_line_content": "    ctx.blocked_client = bc;",
          "new_line_content": "    bc->timeout_callback(&ctx,(void**)c->argv,c->argc);",
          "content_same": false
        },
        {
          "line": 2412,
          "old_api": null,
          "new_api": "zslParseLexRange",
          "old_text": null,
          "new_text": "zslParseLexRange(min, max, zlrs)",
          "old_line_content": "    zlexrangespec *zlrs = &key->zlrs;",
          "new_line_content": "    if (zslParseLexRange(min, max, zlrs) == C_ERR) return REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 6510,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(modules,ctx.module->name,ctx.module)",
          "old_line_content": "    /* Redis module loaded! Register it. */",
          "new_line_content": "    dictAdd(modules,ctx.module->name,ctx.module);",
          "content_same": false
        },
        {
          "line": 6513,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE,\"Module '%s' loaded from %s\",ctx.module->name,path)",
          "old_line_content": "    ctx.module->handle = handle;",
          "new_line_content": "    serverLog(LL_NOTICE,\"Module '%s' loaded from %s\",ctx.module->name,path);",
          "content_same": false
        },
        {
          "line": 2419,
          "old_api": null,
          "new_api": "zzlFirstInLexRange",
          "old_text": null,
          "new_text": "zzlFirstInLexRange(key->value->ptr,zlrs)",
          "old_line_content": "    if (key->value->encoding == OBJ_ENCODING_ZIPLIST) {",
          "new_line_content": "        key->zcurrent = first ? zzlFirstInLexRange(key->value->ptr,zlrs) :",
          "content_same": false
        },
        {
          "line": 6515,
          "old_api": null,
          "new_api": "moduleFireServerEvent",
          "old_text": null,
          "new_text": "moduleFireServerEvent(REDISMODULE_EVENT_MODULE_CHANGE,\n                          REDISMODULE_SUBEVENT_MODULE_LOADED,\n                          ctx.module)",
          "old_line_content": "    /* Fire the loaded modules event. */",
          "new_line_content": "    moduleFireServerEvent(REDISMODULE_EVENT_MODULE_CHANGE,",
          "content_same": false
        },
        {
          "line": 6519,
          "old_api": null,
          "new_api": "moduleFreeContext",
          "old_text": null,
          "new_text": "moduleFreeContext(&ctx)",
          "old_line_content": "",
          "new_line_content": "    moduleFreeContext(&ctx);",
          "content_same": false
        },
        {
          "line": 2424,
          "old_api": null,
          "new_api": "zslFirstInLexRange",
          "old_text": null,
          "new_text": "zslFirstInLexRange(zsl,zlrs)",
          "old_line_content": "        zskiplist *zsl = zs->zsl;",
          "new_line_content": "        key->zcurrent = first ? zslFirstInLexRange(zsl,zlrs) :",
          "content_same": false
        },
        {
          "line": 2427,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unsupported zset encoding\")",
          "old_line_content": "    } else {",
          "new_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "content_same": false
        },
        {
          "line": 6531,
          "old_api": null,
          "new_api": "dictFetchValue",
          "old_text": null,
          "new_text": "dictFetchValue(modules,name)",
          "old_line_content": "int moduleUnload(sds name) {",
          "new_line_content": "    struct RedisModule *module = dictFetchValue(modules,name);",
          "content_same": false
        },
        {
          "line": 6536,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(module->types)",
          "old_line_content": "        return REDISMODULE_ERR;",
          "new_line_content": "    } else if (listLength(module->types)) {",
          "content_same": false
        },
        {
          "line": 6539,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(module->usedby)",
          "old_line_content": "        return REDISMODULE_ERR;",
          "new_line_content": "    } else if (listLength(module->usedby)) {",
          "content_same": false
        },
        {
          "line": 2447,
          "old_api": null,
          "new_api": "zsetInitLexRange",
          "old_text": null,
          "new_text": "zsetInitLexRange(key,min,max,1)",
          "old_line_content": "int RM_ZsetFirstInLexRange(RedisModuleKey *key, RedisModuleString *min, RedisModuleString *max) {",
          "new_line_content": "    return zsetInitLexRange(key,min,max,1);",
          "content_same": false
        },
        {
          "line": 2453,
          "old_api": null,
          "new_api": "zsetInitLexRange",
          "old_text": null,
          "new_text": "zsetInitLexRange(key,min,max,0)",
          "old_line_content": "int RM_ZsetLastInLexRange(RedisModuleKey *key, RedisModuleString *min, RedisModuleString *max) {",
          "new_line_content": "    return zsetInitLexRange(key,min,max,0);",
          "content_same": false
        },
        {
          "line": 6549,
          "old_api": null,
          "new_api": "dlsym",
          "old_text": null,
          "new_text": "dlsym(module->handle, \"RedisModule_OnUnload\")",
          "old_line_content": "    int (*onunload)(void *);",
          "new_line_content": "    onunload = (int (*)(void *))(unsigned long) dlsym(module->handle, \"RedisModule_OnUnload\");",
          "content_same": false
        },
        {
          "line": 6554,
          "old_api": null,
          "new_api": "onunload",
          "old_text": null,
          "new_text": "onunload((void*)&ctx)",
          "old_line_content": "        ctx.client = moduleFreeContextReusedClient;",
          "new_line_content": "        int unload_status = onunload((void*)&ctx);",
          "content_same": false
        },
        {
          "line": 6558,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING, \"Module %s OnUnload failed.  Unload canceled.\", name)",
          "old_line_content": "        if (unload_status == REDISMODULE_ERR) {",
          "new_line_content": "            serverLog(LL_WARNING, \"Module %s OnUnload failed.  Unload canceled.\", name);",
          "content_same": false
        },
        {
          "line": 2466,
          "old_api": null,
          "new_api": "ziplistGetObject",
          "old_text": null,
          "new_text": "ziplistGetObject(eptr)",
          "old_line_content": "        eptr = key->zcurrent;",
          "new_line_content": "        sds ele = ziplistGetObject(eptr);",
          "content_same": false
        },
        {
          "line": 2468,
          "old_api": null,
          "new_api": "ziplistNext",
          "old_text": null,
          "new_text": "ziplistNext(key->value->ptr,eptr)",
          "old_line_content": "        if (score) {",
          "new_line_content": "            sptr = ziplistNext(key->value->ptr,eptr);",
          "content_same": false
        },
        {
          "line": 6564,
          "old_api": null,
          "new_api": "moduleUnregisterCommands",
          "old_text": null,
          "new_text": "moduleUnregisterCommands(module)",
          "old_line_content": "",
          "new_line_content": "    moduleUnregisterCommands(module);",
          "content_same": false
        },
        {
          "line": 2471,
          "old_api": null,
          "new_api": "createObject",
          "old_text": null,
          "new_text": "createObject(OBJ_STRING,ele)",
          "old_line_content": "        }",
          "new_line_content": "        str = createObject(OBJ_STRING,ele);",
          "content_same": false
        },
        {
          "line": 6570,
          "old_api": null,
          "new_api": "moduleUnsubscribeNotifications",
          "old_text": null,
          "new_text": "moduleUnsubscribeNotifications(module)",
          "old_line_content": "    /* Remove any notification subscribers this module might have */",
          "new_line_content": "    moduleUnsubscribeNotifications(module);",
          "content_same": false
        },
        {
          "line": 2475,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(ln->ele)",
          "old_line_content": "        if (score) *score = ln->score;",
          "new_line_content": "        str = createStringObject(ln->ele,sdslen(ln->ele));",
          "content_same": false
        },
        {
          "line": 2477,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unsupported zset encoding\")",
          "old_line_content": "    } else {",
          "new_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "content_same": false
        },
        {
          "line": 6574,
          "old_api": null,
          "new_api": "dlclose",
          "old_text": null,
          "new_text": "dlclose(module->handle)",
          "old_line_content": "    /* Unload the dynamic library. */",
          "new_line_content": "    if (dlclose(module->handle) == -1) {",
          "content_same": false
        },
        {
          "line": 2479,
          "old_api": null,
          "new_api": "autoMemoryAdd",
          "old_text": null,
          "new_text": "autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,str)",
          "old_line_content": "    }",
          "new_line_content": "    autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,str);",
          "content_same": false
        },
        {
          "line": 4528,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*ctx))",
          "old_line_content": "RedisModuleCtx *RM_GetThreadSafeContext(RedisModuleBlockedClient *bc) {",
          "new_line_content": "    RedisModuleCtx *ctx = zmalloc(sizeof(*ctx));",
          "content_same": false
        },
        {
          "line": 6577,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"Error when trying to close the %s module: %s\",\n            module->name, error)",
          "old_line_content": "        if (error == NULL) error = \"Unknown error\";",
          "new_line_content": "        serverLog(LL_WARNING,\"Error when trying to close the %s module: %s\",",
          "content_same": false
        },
        {
          "line": 4530,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(ctx,&empty,sizeof(empty))",
          "old_line_content": "    RedisModuleCtx empty = REDISMODULE_CTX_INIT;",
          "new_line_content": "    memcpy(ctx,&empty,sizeof(empty));",
          "content_same": false
        },
        {
          "line": 6582,
          "old_api": null,
          "new_api": "moduleFireServerEvent",
          "old_text": null,
          "new_text": "moduleFireServerEvent(REDISMODULE_EVENT_MODULE_CHANGE,\n                          REDISMODULE_SUBEVENT_MODULE_UNLOADED,\n                          module)",
          "old_line_content": "    /* Fire the unloaded modules event. */",
          "new_line_content": "    moduleFireServerEvent(REDISMODULE_EVENT_MODULE_CHANGE,",
          "content_same": false
        },
        {
          "line": 6587,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE,\"Module %s unloaded\",module->name)",
          "old_line_content": "    /* Remove from list of modules. */",
          "new_line_content": "    serverLog(LL_NOTICE,\"Module %s unloaded\",module->name);",
          "content_same": false
        },
        {
          "line": 4540,
          "old_api": null,
          "new_api": "createClient",
          "old_text": null,
          "new_text": "createClient(NULL)",
          "old_line_content": "     * things. */",
          "new_line_content": "    ctx->client = createClient(NULL);",
          "content_same": false
        },
        {
          "line": 2493,
          "old_api": null,
          "new_api": "ziplistNext",
          "old_text": null,
          "new_text": "ziplistNext(zl,eptr)",
          "old_line_content": "        unsigned char *next;",
          "new_line_content": "        next = ziplistNext(zl,eptr); /* Skip element. */",
          "content_same": false
        },
        {
          "line": 4542,
          "old_api": null,
          "new_api": "selectDb",
          "old_text": null,
          "new_text": "selectDb(ctx->client,bc->dbid)",
          "old_line_content": "    if (bc) {",
          "new_line_content": "        selectDb(ctx->client,bc->dbid);",
          "content_same": false
        },
        {
          "line": 6590,
          "old_api": null,
          "new_api": "moduleFreeModuleStructure",
          "old_text": null,
          "new_text": "moduleFreeModuleStructure(module)",
          "old_line_content": "    module->name = NULL; /* The name was already freed by dictDelete(). */",
          "new_line_content": "    moduleFreeModuleStructure(module);",
          "content_same": false
        },
        {
          "line": 4550,
          "old_api": null,
          "new_api": "moduleFreeContext",
          "old_text": null,
          "new_text": "moduleFreeContext(ctx)",
          "old_line_content": "void RM_FreeThreadSafeContext(RedisModuleCtx *ctx) {",
          "new_line_content": "    moduleFreeContext(ctx);",
          "content_same": false
        },
        {
          "line": 6598,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(modules)",
          "old_line_content": "void addReplyLoadedModules(client *c) {",
          "new_line_content": "    dictIterator *di = dictGetIterator(modules);",
          "content_same": false
        },
        {
          "line": 2504,
          "old_api": null,
          "new_api": "ziplistNext",
          "old_text": null,
          "new_text": "ziplistNext(zl,next)",
          "old_line_content": "                unsigned char *saved_next = next;",
          "new_line_content": "                next = ziplistNext(zl,next); /* Skip next element. */",
          "content_same": false
        },
        {
          "line": 6601,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(modules)",
          "old_line_content": "",
          "new_line_content": "    addReplyArrayLen(c,dictSize(modules));",
          "content_same": false
        },
        {
          "line": 4558,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(ctx)",
          "old_line_content": "void RM_ThreadSafeContextLock(RedisModuleCtx *ctx) {",
          "new_line_content": "    UNUSED(ctx);",
          "content_same": false
        },
        {
          "line": 2512,
          "old_api": null,
          "new_api": "zzlLexValueLteMax",
          "old_text": null,
          "new_text": "zzlLexValueLteMax(next,&key->zlrs)",
          "old_line_content": "            } else if (key->ztype == REDISMODULE_ZSET_RANGE_LEX) {",
          "new_line_content": "                if (!zzlLexValueLteMax(next,&key->zlrs)) {",
          "content_same": false
        },
        {
          "line": 6611,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "    }",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 4564,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(ctx)",
          "old_line_content": "void RM_ThreadSafeContextUnlock(RedisModuleCtx *ctx) {",
          "new_line_content": "    UNUSED(ctx);",
          "content_same": false
        },
        {
          "line": 4569,
          "old_api": null,
          "new_api": "pthread_mutex_lock",
          "old_text": null,
          "new_text": "pthread_mutex_lock(&moduleGIL)",
          "old_line_content": "void moduleAcquireGIL(void) {",
          "new_line_content": "    pthread_mutex_lock(&moduleGIL);",
          "content_same": false
        },
        {
          "line": 6619,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(l,&li)",
          "old_line_content": "    listNode *ln;",
          "new_line_content": "    listRewind(l,&li);",
          "content_same": false
        },
        {
          "line": 4573,
          "old_api": null,
          "new_api": "pthread_mutex_unlock",
          "old_text": null,
          "new_text": "pthread_mutex_unlock(&moduleGIL)",
          "old_line_content": "void moduleReleaseGIL(void) {",
          "new_line_content": "    pthread_mutex_unlock(&moduleGIL);",
          "content_same": false
        },
        {
          "line": 6623,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(output,module->name)",
          "old_line_content": "        RedisModule *module = ln->value;",
          "new_line_content": "        output = sdscat(output,module->name);",
          "content_same": false
        },
        {
          "line": 2528,
          "old_api": null,
          "new_api": "zslValueLteMax",
          "old_text": null,
          "new_text": "zslValueLteMax(next->score,&key->zrs)",
          "old_line_content": "            if (key->ztype == REDISMODULE_ZSET_RANGE_SCORE &&",
          "new_line_content": "                !zslValueLteMax(next->score,&key->zrs))",
          "content_same": false
        },
        {
          "line": 6625,
          "old_api": null,
          "new_api": "sdstrim",
          "old_text": null,
          "new_text": "sdstrim(output,\"|\")",
          "old_line_content": "    }",
          "new_line_content": "    output = sdstrim(output,\"|\");",
          "content_same": false
        },
        {
          "line": 2533,
          "old_api": null,
          "new_api": "zslLexValueLteMax",
          "old_text": null,
          "new_text": "zslLexValueLteMax(next->ele,&key->zlrs)",
          "old_line_content": "            } else if (key->ztype == REDISMODULE_ZSET_RANGE_LEX) {",
          "new_line_content": "                if (!zslLexValueLteMax(next->ele,&key->zlrs)) {",
          "content_same": false
        },
        {
          "line": 6632,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"[\")",
          "old_line_content": "sds genModulesInfoStringRenderModuleOptions(struct RedisModule *module) {",
          "new_line_content": "    sds output = sdsnew(\"[\");",
          "content_same": false
        },
        {
          "line": 6634,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(output,\"handle-io-errors|\")",
          "old_line_content": "    if (module->options & REDISMODULE_OPTIONS_HANDLE_IO_ERRORS)",
          "new_line_content": "        output = sdscat(output,\"handle-io-errors|\");",
          "content_same": false
        },
        {
          "line": 2542,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unsupported zset encoding\")",
          "old_line_content": "    } else {",
          "new_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "content_same": false
        },
        {
          "line": 6647,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(modules)",
          "old_line_content": "sds genModulesInfoString(sds info) {",
          "new_line_content": "    dictIterator *di = dictGetIterator(modules);",
          "content_same": false
        },
        {
          "line": 6650,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "",
          "new_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 2556,
          "old_api": null,
          "new_api": "ziplistPrev",
          "old_text": null,
          "new_text": "ziplistPrev(zl,eptr)",
          "old_line_content": "        unsigned char *prev;",
          "new_line_content": "        prev = ziplistPrev(zl,eptr); /* Go back to previous score. */",
          "content_same": false
        },
        {
          "line": 6654,
          "old_api": null,
          "new_api": "genModulesInfoStringRenderModulesList",
          "old_text": null,
          "new_text": "genModulesInfoStringRenderModulesList(module->usedby)",
          "old_line_content": "",
          "new_line_content": "        sds usedby = genModulesInfoStringRenderModulesList(module->usedby);",
          "content_same": false
        },
        {
          "line": 6661,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(module->filters)",
          "old_line_content": "                name, module->ver, module->apiver,",
          "new_line_content": "                (int)listLength(module->filters), usedby, using, options);",
          "content_same": false
        },
        {
          "line": 2567,
          "old_api": null,
          "new_api": "ziplistNext",
          "old_text": null,
          "new_text": "ziplistNext(zl,prev)",
          "old_line_content": "                unsigned char *saved_prev = prev;",
          "new_line_content": "                prev = ziplistNext(zl,prev); /* Skip element to get the score.*/",
          "content_same": false
        },
        {
          "line": 6666,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "    }",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 2575,
          "old_api": null,
          "new_api": "zzlLexValueGteMin",
          "old_text": null,
          "new_text": "zzlLexValueGteMin(prev,&key->zlrs)",
          "old_line_content": "            } else if (key->ztype == REDISMODULE_ZSET_RANGE_LEX) {",
          "new_line_content": "                if (!zzlLexValueGteMin(prev,&key->zlrs)) {",
          "content_same": false
        },
        {
          "line": 6675,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(subcmd,\"help\")",
          "old_line_content": "    char *subcmd = c->argv[1]->ptr;",
          "new_line_content": "    if (c->argc == 2 && !strcasecmp(subcmd,\"help\")) {",
          "content_same": false
        },
        {
          "line": 4631,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*sub))",
          "old_line_content": "int RM_SubscribeToKeyspaceEvents(RedisModuleCtx *ctx, int types, RedisModuleNotificationFunc callback) {",
          "new_line_content": "    RedisModuleKeyspaceSubscriber *sub = zmalloc(sizeof(*sub));",
          "content_same": false
        },
        {
          "line": 6682,
          "old_api": null,
          "new_api": "addReplyHelp",
          "old_text": null,
          "new_text": "addReplyHelp(c, help)",
          "old_line_content": "        };",
          "new_line_content": "        addReplyHelp(c, help);",
          "content_same": false
        },
        {
          "line": 6684,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(subcmd,\"load\")",
          "old_line_content": "    } else",
          "new_line_content": "    if (!strcasecmp(subcmd,\"load\") && c->argc >= 3) {",
          "content_same": false
        },
        {
          "line": 4637,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(moduleKeyspaceSubscribers, sub)",
          "old_line_content": "",
          "new_line_content": "    listAddNodeTail(moduleKeyspaceSubscribers, sub);",
          "content_same": false
        },
        {
          "line": 2591,
          "old_api": null,
          "new_api": "zslValueGteMin",
          "old_text": null,
          "new_text": "zslValueGteMin(prev->score,&key->zrs)",
          "old_line_content": "            if (key->ztype == REDISMODULE_ZSET_RANGE_SCORE &&",
          "new_line_content": "                !zslValueGteMin(prev->score,&key->zrs))",
          "content_same": false
        },
        {
          "line": 2596,
          "old_api": null,
          "new_api": "zslLexValueGteMin",
          "old_text": null,
          "new_text": "zslLexValueGteMin(prev->ele,&key->zlrs)",
          "old_line_content": "            } else if (key->ztype == REDISMODULE_ZSET_RANGE_LEX) {",
          "new_line_content": "                if (!zslLexValueGteMin(prev->ele,&key->zlrs)) {",
          "content_same": false
        },
        {
          "line": 6693,
          "old_api": null,
          "new_api": "moduleLoad",
          "old_text": null,
          "new_text": "moduleLoad(c->argv[2]->ptr,(void **)argv,argc)",
          "old_line_content": "",
          "new_line_content": "        if (moduleLoad(c->argv[2]->ptr,(void **)argv,argc) == C_OK)",
          "content_same": false
        },
        {
          "line": 6696,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\n                \"Error loading the extension. Please check the server logs.\")",
          "old_line_content": "        else",
          "new_line_content": "            addReplyError(c,",
          "content_same": false
        },
        {
          "line": 6698,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(subcmd,\"unload\")",
          "old_line_content": "                \"Error loading the extension. Please check the server logs.\");",
          "new_line_content": "    } else if (!strcasecmp(subcmd,\"unload\") && c->argc == 3) {",
          "content_same": false
        },
        {
          "line": 4651,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(type, (char *)event, key, ctx->client->db->id)",
          "old_line_content": "        return REDISMODULE_ERR;",
          "new_line_content": "    notifyKeyspaceEvent(type, (char *)event, key, ctx->client->db->id);",
          "content_same": false
        },
        {
          "line": 2605,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unsupported zset encoding\")",
          "old_line_content": "    } else {",
          "new_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "content_same": false
        },
        {
          "line": 4660,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(moduleKeyspaceSubscribers)",
          "old_line_content": "    /* Don't do anything if there aren't any subscribers */",
          "new_line_content": "    if (listLength(moduleKeyspaceSubscribers) == 0) return;",
          "content_same": false
        },
        {
          "line": 4664,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(moduleKeyspaceSubscribers,&li)",
          "old_line_content": "    listNode *ln;",
          "new_line_content": "    listRewind(moduleKeyspaceSubscribers,&li);",
          "content_same": false
        },
        {
          "line": 4669,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&li)",
          "old_line_content": "",
          "new_line_content": "    while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 6723,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(c,\"Error unloading module: %s\",errmsg)",
          "old_line_content": "            }",
          "new_line_content": "            addReplyErrorFormat(c,\"Error unloading module: %s\",errmsg);",
          "content_same": false
        },
        {
          "line": 4677,
          "old_api": null,
          "new_api": "selectDb",
          "old_text": null,
          "new_text": "selectDb(ctx.client, dbid)",
          "old_line_content": "            ctx.client = moduleFreeContextReusedClient;",
          "new_line_content": "            selectDb(ctx.client, dbid);",
          "content_same": false
        },
        {
          "line": 6725,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(subcmd,\"list\")",
          "old_line_content": "        }",
          "new_line_content": "    } else if (!strcasecmp(subcmd,\"list\") && c->argc == 2) {",
          "content_same": false
        },
        {
          "line": 6728,
          "old_api": null,
          "new_api": "addReplySubcommandSyntaxError",
          "old_text": null,
          "new_text": "addReplySubcommandSyntaxError(c)",
          "old_line_content": "    } else {",
          "new_line_content": "        addReplySubcommandSyntaxError(c);",
          "content_same": false
        },
        {
          "line": 4683,
          "old_api": null,
          "new_api": "notify_callback",
          "old_text": null,
          "new_text": "sub->notify_callback(&ctx, type, event, key)",
          "old_line_content": "            sub->active = 1;",
          "new_line_content": "            sub->notify_callback(&ctx, type, event, key);",
          "content_same": false
        },
        {
          "line": 4685,
          "old_api": null,
          "new_api": "moduleFreeContext",
          "old_text": null,
          "new_text": "moduleFreeContext(&ctx)",
          "old_line_content": "            sub->active = 0;",
          "new_line_content": "            moduleFreeContext(&ctx);",
          "content_same": false
        },
        {
          "line": 6735,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(modules)",
          "old_line_content": "size_t moduleCount(void) {",
          "new_line_content": "    return dictSize(modules);",
          "content_same": false
        },
        {
          "line": 4694,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(moduleKeyspaceSubscribers,&li)",
          "old_line_content": "    listNode *ln;",
          "new_line_content": "    listRewind(moduleKeyspaceSubscribers,&li);",
          "content_same": false
        },
        {
          "line": 4698,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(moduleKeyspaceSubscribers, ln)",
          "old_line_content": "        if (sub->module == module) {",
          "new_line_content": "            listDelNode(moduleKeyspaceSubscribers, ln);",
          "content_same": false
        },
        {
          "line": 6749,
          "old_api": null,
          "new_api": "LRU_CLOCK",
          "old_text": null,
          "new_text": "LRU_CLOCK()",
          "old_line_content": "        return REDISMODULE_ERR;",
          "new_line_content": "    if (objectSetLRUOrLFU(key->value, lfu_freq, lru_idle, lru_idle>=0 ? LRU_CLOCK() : 0))",
          "content_same": false
        },
        {
          "line": 6763,
          "old_api": null,
          "new_api": "LFUDecrAndReturn",
          "old_text": null,
          "new_text": "LFUDecrAndReturn(key->value)",
          "old_line_content": "    if (server.maxmemory_policy & MAXMEMORY_FLAG_LFU) {",
          "new_line_content": "        *lfu_freq = LFUDecrAndReturn(key->value);",
          "content_same": false
        },
        {
          "line": 2669,
          "old_api": null,
          "new_api": "moduleCreateEmptyKey",
          "old_text": null,
          "new_text": "moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_HASH)",
          "old_line_content": "    if (key->value && key->value->type != OBJ_HASH) return 0;",
          "new_line_content": "    if (key->value == NULL) moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_HASH);",
          "content_same": false
        },
        {
          "line": 6765,
          "old_api": null,
          "new_api": "estimateObjectIdleTime",
          "old_text": null,
          "new_text": "estimateObjectIdleTime(key->value)",
          "old_line_content": "    } else {",
          "new_line_content": "        *lru_idle = estimateObjectIdleTime(key->value)/1000;",
          "content_same": false
        },
        {
          "line": 2672,
          "old_api": null,
          "new_api": "va_start",
          "old_text": null,
          "new_text": "va_start(ap, flags)",
          "old_line_content": "    int updated = 0;",
          "new_line_content": "    va_start(ap, flags);",
          "content_same": false
        },
        {
          "line": 2677,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap,char*)",
          "old_line_content": "        if (flags & REDISMODULE_HASH_CFIELDS) {",
          "new_line_content": "            char *cfield = va_arg(ap,char*);",
          "content_same": false
        },
        {
          "line": 6773,
          "old_api": null,
          "new_api": "dictCreate",
          "old_text": null,
          "new_text": "dictCreate(&moduleAPIDictType,NULL)",
          "old_line_content": "void moduleRegisterCoreAPI(void) {",
          "new_line_content": "    server.moduleapi = dictCreate(&moduleAPIDictType,NULL);",
          "content_same": false
        },
        {
          "line": 2679,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(cfield)",
          "old_line_content": "            if (cfield == NULL) break;",
          "new_line_content": "            field = createRawStringObject(cfield,strlen(cfield));",
          "content_same": false
        },
        {
          "line": 2681,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap,RedisModuleString*)",
          "old_line_content": "        } else {",
          "new_line_content": "            field = va_arg(ap,RedisModuleString*);",
          "content_same": false
        },
        {
          "line": 2684,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap,RedisModuleString*)",
          "old_line_content": "        }",
          "new_line_content": "        value = va_arg(ap,RedisModuleString*);",
          "content_same": false
        },
        {
          "line": 2688,
          "old_api": null,
          "new_api": "hashTypeExists",
          "old_text": null,
          "new_text": "hashTypeExists(key->value, field->ptr)",
          "old_line_content": "        if (flags & (REDISMODULE_HASH_XX|REDISMODULE_HASH_NX)) {",
          "new_line_content": "            int exists = hashTypeExists(key->value, field->ptr);",
          "content_same": false
        },
        {
          "line": 2692,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(field)",
          "old_line_content": "            {",
          "new_line_content": "                if (flags & REDISMODULE_HASH_CFIELDS) decrRefCount(field);",
          "content_same": false
        },
        {
          "line": 4740,
          "old_api": null,
          "new_api": "selectDb",
          "old_text": null,
          "new_text": "selectDb(ctx.client, 0)",
          "old_line_content": "            ctx.client = moduleFreeContextReusedClient;",
          "new_line_content": "            selectDb(ctx.client, 0);",
          "content_same": false
        },
        {
          "line": 2699,
          "old_api": null,
          "new_api": "hashTypeDelete",
          "old_text": null,
          "new_text": "hashTypeDelete(key->value, field->ptr)",
          "old_line_content": "        if (value == REDISMODULE_HASH_DELETE) {",
          "new_line_content": "            updated += hashTypeDelete(key->value, field->ptr);",
          "content_same": false
        },
        {
          "line": 4757,
          "old_api": null,
          "new_api": "moduleTypeEncodeId",
          "old_text": null,
          "new_text": "moduleTypeEncodeId(ctx->module->name,0)",
          "old_line_content": "",
          "new_line_content": "    uint64_t module_id = moduleTypeEncodeId(ctx->module->name,0);",
          "content_same": false
        },
        {
          "line": 2712,
          "old_api": null,
          "new_api": "hashTypeTryConversion",
          "old_text": null,
          "new_text": "hashTypeTryConversion(key->value,argv,0,1)",
          "old_line_content": "        robj *argv[2] = {field,value};",
          "new_line_content": "        hashTypeTryConversion(key->value,argv,0,1);",
          "content_same": false
        },
        {
          "line": 2719,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(field)",
          "old_line_content": "           field->ptr = NULL; /* Prevent the SDS string from being freed. */",
          "new_line_content": "           decrRefCount(field);",
          "content_same": false
        },
        {
          "line": 2722,
          "old_api": null,
          "new_api": "va_end",
          "old_text": null,
          "new_text": "va_end(ap)",
          "old_line_content": "    }",
          "new_line_content": "    va_end(ap);",
          "content_same": false
        },
        {
          "line": 4772,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(r)",
          "old_line_content": "                    clusterReceivers[type]->next = r->next;",
          "new_line_content": "                zfree(r);",
          "content_same": false
        },
        {
          "line": 4782,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*r))",
          "old_line_content": "    if (callback) {",
          "new_line_content": "        r = zmalloc(sizeof(*r));",
          "content_same": false
        },
        {
          "line": 4800,
          "old_api": null,
          "new_api": "moduleTypeEncodeId",
          "old_text": null,
          "new_text": "moduleTypeEncodeId(ctx->module->name,0)",
          "old_line_content": "    if (!server.cluster_enabled) return REDISMODULE_ERR;",
          "new_line_content": "    uint64_t module_id = moduleTypeEncodeId(ctx->module->name,0);",
          "content_same": false
        },
        {
          "line": 2772,
          "old_api": null,
          "new_api": "va_start",
          "old_text": null,
          "new_text": "va_start(ap, flags)",
          "old_line_content": "",
          "new_line_content": "    va_start(ap, flags);",
          "content_same": false
        },
        {
          "line": 2778,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap,char*)",
          "old_line_content": "        if (flags & REDISMODULE_HASH_CFIELDS) {",
          "new_line_content": "            char *cfield = va_arg(ap,char*);",
          "content_same": false
        },
        {
          "line": 2780,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(cfield)",
          "old_line_content": "            if (cfield == NULL) break;",
          "new_line_content": "            field = createRawStringObject(cfield,strlen(cfield));",
          "content_same": false
        },
        {
          "line": 2782,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap,RedisModuleString*)",
          "old_line_content": "        } else {",
          "new_line_content": "            field = va_arg(ap,RedisModuleString*);",
          "content_same": false
        },
        {
          "line": 4830,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(ctx)",
          "old_line_content": "char **RM_GetClusterNodesList(RedisModuleCtx *ctx, size_t *numnodes) {",
          "new_line_content": "    UNUSED(ctx);",
          "content_same": false
        },
        {
          "line": 4833,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(server.cluster->nodes)",
          "old_line_content": "    if (!server.cluster_enabled) return NULL;",
          "new_line_content": "    size_t count = dictSize(server.cluster->nodes);",
          "content_same": false
        },
        {
          "line": 2788,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap,int*)",
          "old_line_content": "        if (flags & REDISMODULE_HASH_EXISTS) {",
          "new_line_content": "            existsptr = va_arg(ap,int*);",
          "content_same": false
        },
        {
          "line": 2790,
          "old_api": null,
          "new_api": "hashTypeExists",
          "old_text": null,
          "new_text": "hashTypeExists(key->value,field->ptr)",
          "old_line_content": "            if (key->value)",
          "new_line_content": "                *existsptr = hashTypeExists(key->value,field->ptr);",
          "content_same": false
        },
        {
          "line": 4838,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "    int j = 0;",
          "new_line_content": "    while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 4841,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(REDISMODULE_NODE_ID_LEN)",
          "old_line_content": "        if (node->flags & (CLUSTER_NODE_NOADDR|CLUSTER_NODE_HANDSHAKE)) continue;",
          "new_line_content": "        ids[j] = zmalloc(REDISMODULE_NODE_ID_LEN);",
          "content_same": false
        },
        {
          "line": 2794,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap,RedisModuleString**)",
          "old_line_content": "        } else {",
          "new_line_content": "            valueptr = va_arg(ap,RedisModuleString**);",
          "content_same": false
        },
        {
          "line": 2796,
          "old_api": null,
          "new_api": "hashTypeGetValueObject",
          "old_text": null,
          "new_text": "hashTypeGetValueObject(key->value,field->ptr)",
          "old_line_content": "            if (key->value) {",
          "new_line_content": "                *valueptr = hashTypeGetValueObject(key->value,field->ptr);",
          "content_same": false
        },
        {
          "line": 2798,
          "old_api": null,
          "new_api": "getDecodedObject",
          "old_text": null,
          "new_text": "getDecodedObject(*valueptr)",
          "old_line_content": "                if (*valueptr) {",
          "new_line_content": "                    robj *decoded = getDecodedObject(*valueptr);",
          "content_same": false
        },
        {
          "line": 4848,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "                    * to also get the count argument. */",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 2803,
          "old_api": null,
          "new_api": "autoMemoryAdd",
          "old_text": null,
          "new_text": "autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,*valueptr)",
          "old_line_content": "                if (*valueptr)",
          "new_line_content": "                    autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,*valueptr);",
          "content_same": false
        },
        {
          "line": 4855,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(ids[j])",
          "old_line_content": "    if (ids == NULL) return;",
          "new_line_content": "    for (int j = 0; ids[j]; j++) zfree(ids[j]);",
          "content_same": false
        },
        {
          "line": 2810,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(field)",
          "old_line_content": "        /* Cleanup */",
          "new_line_content": "        if (flags & REDISMODULE_HASH_CFIELDS) decrRefCount(field);",
          "content_same": false
        },
        {
          "line": 2812,
          "old_api": null,
          "new_api": "va_end",
          "old_text": null,
          "new_text": "va_end(ap)",
          "old_line_content": "    }",
          "new_line_content": "    va_end(ap);",
          "content_same": false
        },
        {
          "line": 4872,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(server.cluster->nodes)",
          "old_line_content": "    if (!server.cluster_enabled) return 0;",
          "new_line_content": "    return dictSize(server.cluster->nodes);",
          "content_same": false
        },
        {
          "line": 2825,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*reply))",
          "old_line_content": "RedisModuleCallReply *moduleCreateCallReplyFromProto(RedisModuleCtx *ctx, sds proto) {",
          "new_line_content": "    RedisModuleCallReply *reply = zmalloc(sizeof(*reply));",
          "content_same": false
        },
        {
          "line": 2828,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(proto)",
          "old_line_content": "    reply->proto = proto;",
          "new_line_content": "    reply->protolen = sdslen(proto);",
          "content_same": false
        },
        {
          "line": 4898,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(ctx)",
          "old_line_content": "int RM_GetClusterNodeInfo(RedisModuleCtx *ctx, const char *id, char *ip, char *master_id, int *port, int *flags) {",
          "new_line_content": "    UNUSED(ctx);",
          "content_same": false
        },
        {
          "line": 4900,
          "old_api": null,
          "new_api": "clusterLookupNode",
          "old_text": null,
          "new_text": "clusterLookupNode(id)",
          "old_line_content": "",
          "new_line_content": "    clusterNode *node = clusterLookupNode(id);",
          "content_same": false
        },
        {
          "line": 2856,
          "old_api": null,
          "new_api": "moduleParseCallReply_Int",
          "old_text": null,
          "new_text": "moduleParseCallReply_Int(reply)",
          "old_line_content": "    switch(reply->proto[0]) {",
          "new_line_content": "    case ':': moduleParseCallReply_Int(reply); break;",
          "content_same": false
        },
        {
          "line": 4904,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(ip,node->name,REDISMODULE_NODE_ID_LEN)",
          "old_line_content": "",
          "new_line_content": "    if (ip) memcpy(ip,node->name,REDISMODULE_NODE_ID_LEN);",
          "content_same": false
        },
        {
          "line": 2859,
          "old_api": null,
          "new_api": "moduleParseCallReply_SimpleString",
          "old_text": null,
          "new_text": "moduleParseCallReply_SimpleString(reply)",
          "old_line_content": "    case '-': /* handled by next item. */",
          "new_line_content": "    case '+': moduleParseCallReply_SimpleString(reply); break;",
          "content_same": false
        },
        {
          "line": 4911,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(master_id,node->slaveof->name,REDISMODULE_NODE_ID_LEN)",
          "old_line_content": "        if (node->flags & CLUSTER_NODE_MASTER && node->slaveof)",
          "new_line_content": "            memcpy(master_id,node->slaveof->name,REDISMODULE_NODE_ID_LEN);",
          "content_same": false
        },
        {
          "line": 4913,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(master_id,0,REDISMODULE_NODE_ID_LEN)",
          "old_line_content": "        else",
          "new_line_content": "            memset(master_id,0,REDISMODULE_NODE_ID_LEN);",
          "content_same": false
        },
        {
          "line": 2866,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(proto+1,'\\r')",
          "old_line_content": "    char *proto = reply->proto;",
          "new_line_content": "    char *p = strchr(proto+1,'\\r');",
          "content_same": false
        },
        {
          "line": 2868,
          "old_api": null,
          "new_api": "string2ll",
          "old_text": null,
          "new_text": "string2ll(proto+1,p-proto-1,&reply->val.ll)",
          "old_line_content": "",
          "new_line_content": "    string2ll(proto+1,p-proto-1,&reply->val.ll);",
          "content_same": false
        },
        {
          "line": 2875,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(proto+1,'\\r')",
          "old_line_content": "    char *proto = reply->proto;",
          "new_line_content": "    char *p = strchr(proto+1,'\\r');",
          "content_same": false
        },
        {
          "line": 2878,
          "old_api": null,
          "new_api": "string2ll",
          "old_text": null,
          "new_text": "string2ll(proto+1,p-proto-1,&bulklen)",
          "old_line_content": "",
          "new_line_content": "    string2ll(proto+1,p-proto-1,&bulklen);",
          "content_same": false
        },
        {
          "line": 2892,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(proto+1,'\\r')",
          "old_line_content": "    char *proto = reply->proto;",
          "new_line_content": "    char *p = strchr(proto+1,'\\r');",
          "content_same": false
        },
        {
          "line": 4950,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(ctx)",
          "old_line_content": "void RM_SetClusterFlags(RedisModuleCtx *ctx, uint64_t flags) {",
          "new_line_content": "    UNUSED(ctx);",
          "content_same": false
        },
        {
          "line": 2903,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(proto+1,'\\r')",
          "old_line_content": "    char *proto = reply->proto;",
          "new_line_content": "    char *p = strchr(proto+1,'\\r');",
          "content_same": false
        },
        {
          "line": 2906,
          "old_api": null,
          "new_api": "string2ll",
          "old_text": null,
          "new_text": "string2ll(proto+1,p-proto-1,&arraylen)",
          "old_line_content": "",
          "new_line_content": "    string2ll(proto+1,p-proto-1,&arraylen);",
          "content_same": false
        },
        {
          "line": 2915,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(RedisModuleCallReply)*arraylen)",
          "old_line_content": "",
          "new_line_content": "    reply->val.array = zmalloc(sizeof(RedisModuleCallReply)*arraylen);",
          "content_same": false
        },
        {
          "line": 2923,
          "old_api": null,
          "new_api": "moduleParseCallReply",
          "old_text": null,
          "new_text": "moduleParseCallReply(ele)",
          "old_line_content": "        ele->ctx = reply->ctx;",
          "new_line_content": "        moduleParseCallReply(ele);",
          "content_same": false
        },
        {
          "line": 2942,
          "old_api": null,
          "new_api": "RM_FreeCallReply_Rec",
          "old_text": null,
          "new_text": "RM_FreeCallReply_Rec(reply->val.array+j,1)",
          "old_line_content": "            for (j = 0; j < reply->len; j++)",
          "new_line_content": "                RM_FreeCallReply_Rec(reply->val.array+j,1);",
          "content_same": false
        },
        {
          "line": 4992,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(eventLoop)",
          "old_line_content": "int moduleTimerHandler(struct aeEventLoop *eventLoop, long long id, void *clientData) {",
          "new_line_content": "    UNUSED(eventLoop);",
          "content_same": false
        },
        {
          "line": 4998,
          "old_api": null,
          "new_api": "raxStart",
          "old_text": null,
          "new_text": "raxStart(&ri,Timers)",
          "old_line_content": "    raxIterator ri;",
          "new_line_content": "    raxStart(&ri,Timers);",
          "content_same": false
        },
        {
          "line": 2952,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(reply->proto)",
          "old_line_content": "    if (!(reply->flags & REDISMODULE_REPLYFLAG_NESTED)) {",
          "new_line_content": "        if (reply->proto) sdsfree(reply->proto);",
          "content_same": false
        },
        {
          "line": 5002,
          "old_api": null,
          "new_api": "raxSeek",
          "old_text": null,
          "new_text": "raxSeek(&ri,\"^\",NULL,0)",
          "old_line_content": "    while(1) {",
          "new_line_content": "        raxSeek(&ri,\"^\",NULL,0);",
          "content_same": false
        },
        {
          "line": 5005,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(&expiretime,ri.key,sizeof(expiretime))",
          "old_line_content": "        uint64_t expiretime;",
          "new_line_content": "        memcpy(&expiretime,ri.key,sizeof(expiretime));",
          "content_same": false
        },
        {
          "line": 2963,
          "old_api": null,
          "new_api": "RM_FreeCallReply_Rec",
          "old_text": null,
          "new_text": "RM_FreeCallReply_Rec(reply,0)",
          "old_line_content": "    RedisModuleCtx *ctx = reply->ctx;",
          "new_line_content": "    RM_FreeCallReply_Rec(reply,0);",
          "content_same": false
        },
        {
          "line": 5013,
          "old_api": null,
          "new_api": "selectDb",
          "old_text": null,
          "new_text": "selectDb(ctx.client, timer->dbid)",
          "old_line_content": "            ctx.client = moduleFreeContextReusedClient;",
          "new_line_content": "            selectDb(ctx.client, timer->dbid);",
          "content_same": false
        },
        {
          "line": 2975,
          "old_api": null,
          "new_api": "moduleParseCallReply",
          "old_text": null,
          "new_text": "moduleParseCallReply(reply)",
          "old_line_content": "size_t RM_CallReplyLength(RedisModuleCallReply *reply) {",
          "new_line_content": "    moduleParseCallReply(reply);",
          "content_same": false
        },
        {
          "line": 5023,
          "old_api": null,
          "new_api": "raxStop",
          "old_text": null,
          "new_text": "raxStop(&ri)",
          "old_line_content": "    }",
          "new_line_content": "    raxStop(&ri);",
          "content_same": false
        },
        {
          "line": 5027,
          "old_api": null,
          "new_api": "raxSize",
          "old_text": null,
          "new_text": "raxSize(Timers)",
          "old_line_content": "    if (next_period <= 0) next_period = 1;",
          "new_line_content": "    return (raxSize(Timers) > 0) ? next_period : AE_NOMORE;",
          "content_same": false
        },
        {
          "line": 5034,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*timer))",
          "old_line_content": "RedisModuleTimerID RM_CreateTimer(RedisModuleCtx *ctx, mstime_t period, RedisModuleTimerProc callback, void *data) {",
          "new_line_content": "    RedisModuleTimer *timer = zmalloc(sizeof(*timer));",
          "content_same": false
        },
        {
          "line": 2989,
          "old_api": null,
          "new_api": "moduleParseCallReply",
          "old_text": null,
          "new_text": "moduleParseCallReply(reply)",
          "old_line_content": "RedisModuleCallReply *RM_CallReplyArrayElement(RedisModuleCallReply *reply, size_t idx) {",
          "new_line_content": "    moduleParseCallReply(reply);",
          "content_same": false
        },
        {
          "line": 5039,
          "old_api": null,
          "new_api": "ustime",
          "old_text": null,
          "new_text": "ustime()",
          "old_line_content": "    timer->dbid = ctx->client->db->id;",
          "new_line_content": "    uint64_t expiretime = ustime()+period*1000;",
          "content_same": false
        },
        {
          "line": 5043,
          "old_api": null,
          "new_api": "htonu64",
          "old_text": null,
          "new_text": "htonu64(expiretime)",
          "old_line_content": "    while(1) {",
          "new_line_content": "        key = htonu64(expiretime);",
          "content_same": false
        },
        {
          "line": 2997,
          "old_api": null,
          "new_api": "moduleParseCallReply",
          "old_text": null,
          "new_text": "moduleParseCallReply(reply)",
          "old_line_content": "long long RM_CallReplyInteger(RedisModuleCallReply *reply) {",
          "new_line_content": "    moduleParseCallReply(reply);",
          "content_same": false
        },
        {
          "line": 3004,
          "old_api": null,
          "new_api": "moduleParseCallReply",
          "old_text": null,
          "new_text": "moduleParseCallReply(reply)",
          "old_line_content": "const char *RM_CallReplyStringPtr(RedisModuleCallReply *reply, size_t *len) {",
          "new_line_content": "    moduleParseCallReply(reply);",
          "content_same": false
        },
        {
          "line": 5057,
          "old_api": null,
          "new_api": "raxStart",
          "old_text": null,
          "new_text": "raxStart(&ri,Timers)",
          "old_line_content": "        raxIterator ri;",
          "new_line_content": "        raxStart(&ri,Timers);",
          "content_same": false
        },
        {
          "line": 3014,
          "old_api": null,
          "new_api": "moduleParseCallReply",
          "old_text": null,
          "new_text": "moduleParseCallReply(reply)",
          "old_line_content": "RedisModuleString *RM_CreateStringFromCallReply(RedisModuleCallReply *reply) {",
          "new_line_content": "    moduleParseCallReply(reply);",
          "content_same": false
        },
        {
          "line": 5063,
          "old_api": null,
          "new_api": "aeDeleteTimeEvent",
          "old_text": null,
          "new_text": "aeDeleteTimeEvent(server.el,aeTimer)",
          "old_line_content": "             * to the just added event. */",
          "new_line_content": "            aeDeleteTimeEvent(server.el,aeTimer);",
          "content_same": false
        },
        {
          "line": 3018,
          "old_api": null,
          "new_api": "RM_CreateString",
          "old_text": null,
          "new_text": "RM_CreateString(reply->ctx,reply->val.str,reply->len)",
          "old_line_content": "    case REDISMODULE_REPLY_ERROR:",
          "new_line_content": "        return RM_CreateString(reply->ctx,reply->val.str,reply->len);",
          "content_same": false
        },
        {
          "line": 5066,
          "old_api": null,
          "new_api": "raxStop",
          "old_text": null,
          "new_text": "raxStop(&ri)",
          "old_line_content": "        }",
          "new_line_content": "        raxStop(&ri);",
          "content_same": false
        },
        {
          "line": 3021,
          "old_api": null,
          "new_api": "ll2string",
          "old_text": null,
          "new_text": "ll2string(buf,sizeof(buf),reply->val.ll)",
          "old_line_content": "        char buf[64];",
          "new_line_content": "        int len = ll2string(buf,sizeof(buf),reply->val.ll);",
          "content_same": false
        },
        {
          "line": 5072,
          "old_api": null,
          "new_api": "aeCreateTimeEvent",
          "old_text": null,
          "new_text": "aeCreateTimeEvent(server.el,period,moduleTimerHandler,NULL,NULL)",
          "old_line_content": "    if (aeTimer == -1)",
          "new_line_content": "        aeTimer = aeCreateTimeEvent(server.el,period,moduleTimerHandler,NULL,NULL);",
          "content_same": false
        },
        {
          "line": 5082,
          "old_api": null,
          "new_api": "raxFind",
          "old_text": null,
          "new_text": "raxFind(Timers,(unsigned char*)&id,sizeof(id))",
          "old_line_content": "int RM_StopTimer(RedisModuleCtx *ctx, RedisModuleTimerID id, void **data) {",
          "new_line_content": "    RedisModuleTimer *timer = raxFind(Timers,(unsigned char*)&id,sizeof(id));",
          "content_same": false
        },
        {
          "line": 5086,
          "old_api": null,
          "new_api": "raxRemove",
          "old_text": null,
          "new_text": "raxRemove(Timers,(unsigned char*)&id,sizeof(id),NULL)",
          "old_line_content": "    if (data) *data = timer->data;",
          "new_line_content": "    raxRemove(Timers,(unsigned char*)&id,sizeof(id),NULL);",
          "content_same": false
        },
        {
          "line": 3047,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(fmt)",
          "old_line_content": "     * hold one argument for each char specifier in 'fmt'. */",
          "new_line_content": "    argv_size = strlen(fmt)+1; /* +1 because of the command name. */",
          "content_same": false
        },
        {
          "line": 5098,
          "old_api": null,
          "new_api": "raxFind",
          "old_text": null,
          "new_text": "raxFind(Timers,(unsigned char*)&id,sizeof(id))",
          "old_line_content": "int RM_GetTimerInfo(RedisModuleCtx *ctx, RedisModuleTimerID id, uint64_t *remaining, void **data) {",
          "new_line_content": "    RedisModuleTimer *timer = raxFind(Timers,(unsigned char*)&id,sizeof(id));",
          "content_same": false
        },
        {
          "line": 3051,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(cmdname)",
          "old_line_content": "    /* Build the arguments vector based on the format specifier. */",
          "new_line_content": "    argv[0] = createStringObject(cmdname,strlen(cmdname));",
          "content_same": false
        },
        {
          "line": 5102,
          "old_api": null,
          "new_api": "ustime",
          "old_text": null,
          "new_text": "ustime()",
          "old_line_content": "    if (remaining) {",
          "new_line_content": "        int64_t rem = ntohu64(id)-ustime();",
          "content_same": false
        },
        {
          "line": 3058,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap,char*)",
          "old_line_content": "        if (*p == 'c') {",
          "new_line_content": "            char *cstr = va_arg(ap,char*);",
          "content_same": false
        },
        {
          "line": 3061,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap,void*)",
          "old_line_content": "        } else if (*p == 's') {",
          "new_line_content": "            robj *obj = va_arg(ap,void*);",
          "content_same": false
        },
        {
          "line": 3063,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(obj)",
          "old_line_content": "            argv[argc++] = obj;",
          "new_line_content": "            incrRefCount(obj);",
          "content_same": false
        },
        {
          "line": 3065,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap,char*)",
          "old_line_content": "        } else if (*p == 'b') {",
          "new_line_content": "            char *buf = va_arg(ap,char*);",
          "content_same": false
        },
        {
          "line": 3069,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap,long long)",
          "old_line_content": "        } else if (*p == 'l') {",
          "new_line_content": "            long long ll = va_arg(ap,long long);",
          "content_same": false
        },
        {
          "line": 3073,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap, void*)",
          "old_line_content": "             /* A vector of strings */",
          "new_line_content": "             robj **v = va_arg(ap, void*);",
          "content_same": false
        },
        {
          "line": 3080,
          "old_api": null,
          "new_api": "zrealloc",
          "old_text": null,
          "new_text": "zrealloc(argv,sizeof(robj*)*argv_size)",
          "old_line_content": "             argv_size += vlen-1;",
          "new_line_content": "             argv = zrealloc(argv,sizeof(robj*)*argv_size);",
          "content_same": false
        },
        {
          "line": 3084,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(v[i])",
          "old_line_content": "             for (i = 0; i < vlen; i++) {",
          "new_line_content": "                 incrRefCount(v[i]);",
          "content_same": false
        },
        {
          "line": 5132,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*d))",
          "old_line_content": "RedisModuleDict *RM_CreateDict(RedisModuleCtx *ctx) {",
          "new_line_content": "    struct RedisModuleDict *d = zmalloc(sizeof(*d));",
          "content_same": false
        },
        {
          "line": 5142,
          "old_api": null,
          "new_api": "autoMemoryFreed",
          "old_text": null,
          "new_text": "autoMemoryFreed(ctx,REDISMODULE_AM_DICT,d)",
          "old_line_content": "void RM_FreeDict(RedisModuleCtx *ctx, RedisModuleDict *d) {",
          "new_line_content": "    if (ctx != NULL) autoMemoryFreed(ctx,REDISMODULE_AM_DICT,d);",
          "content_same": false
        },
        {
          "line": 5149,
          "old_api": null,
          "new_api": "raxSize",
          "old_text": null,
          "new_text": "raxSize(d->rax)",
          "old_line_content": "uint64_t RM_DictSize(RedisModuleDict *d) {",
          "new_line_content": "    return raxSize(d->rax);",
          "content_same": false
        },
        {
          "line": 3103,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(argv[j])",
          "old_line_content": "    for (j = 0; j < argc; j++)",
          "new_line_content": "        decrRefCount(argv[j]);",
          "content_same": false
        },
        {
          "line": 5157,
          "old_api": null,
          "new_api": "raxTryInsert",
          "old_text": null,
          "new_text": "raxTryInsert(d->rax,key,keylen,ptr,NULL)",
          "old_line_content": "int RM_DictSetC(RedisModuleDict *d, void *key, size_t keylen, void *ptr) {",
          "new_line_content": "    int retval = raxTryInsert(d->rax,key,keylen,ptr,NULL);",
          "content_same": false
        },
        {
          "line": 5164,
          "old_api": null,
          "new_api": "raxInsert",
          "old_text": null,
          "new_text": "raxInsert(d->rax,key,keylen,ptr,NULL)",
          "old_line_content": "int RM_DictReplaceC(RedisModuleDict *d, void *key, size_t keylen, void *ptr) {",
          "new_line_content": "    int retval = raxInsert(d->rax,key,keylen,ptr,NULL);",
          "content_same": false
        },
        {
          "line": 5170,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(key->ptr)",
          "old_line_content": "int RM_DictSet(RedisModuleDict *d, RedisModuleString *key, void *ptr) {",
          "new_line_content": "    return RM_DictSetC(d,key->ptr,sdslen(key->ptr),ptr);",
          "content_same": false
        },
        {
          "line": 3127,
          "old_api": null,
          "new_api": "va_start",
          "old_text": null,
          "new_text": "va_start(ap, fmt)",
          "old_line_content": "    /* Create the client and dispatch the command. */",
          "new_line_content": "    va_start(ap, fmt);",
          "content_same": false
        },
        {
          "line": 5175,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(key->ptr)",
          "old_line_content": "int RM_DictReplace(RedisModuleDict *d, RedisModuleString *key, void *ptr) {",
          "new_line_content": "    return RM_DictReplaceC(d,key->ptr,sdslen(key->ptr),ptr);",
          "content_same": false
        },
        {
          "line": 3130,
          "old_api": null,
          "new_api": "moduleCreateArgvFromUserFormat",
          "old_text": null,
          "new_text": "moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap)",
          "old_line_content": "    c->user = NULL; /* Root user. */",
          "new_line_content": "    argv = moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap);",
          "content_same": false
        },
        {
          "line": 3132,
          "old_api": null,
          "new_api": "va_end",
          "old_text": null,
          "new_text": "va_end(ap)",
          "old_line_content": "    replicate = flags & REDISMODULE_ARGV_REPLICATE;",
          "new_line_content": "    va_end(ap);",
          "content_same": false
        },
        {
          "line": 5184,
          "old_api": null,
          "new_api": "raxFind",
          "old_text": null,
          "new_text": "raxFind(d->rax,key,keylen)",
          "old_line_content": "void *RM_DictGetC(RedisModuleDict *d, void *key, size_t keylen, int *nokey) {",
          "new_line_content": "    void *res = raxFind(d->rax,key,keylen);",
          "content_same": false
        },
        {
          "line": 5191,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(key->ptr)",
          "old_line_content": "void *RM_DictGet(RedisModuleDict *d, RedisModuleString *key, int *nokey) {",
          "new_line_content": "    return RM_DictGetC(d,key->ptr,sdslen(key->ptr),nokey);",
          "content_same": false
        },
        {
          "line": 3149,
          "old_api": null,
          "new_api": "moduleCallCommandFilters",
          "old_text": null,
          "new_text": "moduleCallCommandFilters(c)",
          "old_line_content": "    /* Call command filters */",
          "new_line_content": "    moduleCallCommandFilters(c);",
          "content_same": false
        },
        {
          "line": 3154,
          "old_api": null,
          "new_api": "lookupCommand",
          "old_text": null,
          "new_text": "lookupCommand(c->argv[0]->ptr)",
          "old_line_content": "     */",
          "new_line_content": "    cmd = lookupCommand(c->argv[0]->ptr);",
          "content_same": false
        },
        {
          "line": 5202,
          "old_api": null,
          "new_api": "raxRemove",
          "old_text": null,
          "new_text": "raxRemove(d->rax,key,keylen,oldval)",
          "old_line_content": "int RM_DictDelC(RedisModuleDict *d, void *key, size_t keylen, void *oldval) {",
          "new_line_content": "    int retval = raxRemove(d->rax,key,keylen,oldval);",
          "content_same": false
        },
        {
          "line": 5208,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(key->ptr)",
          "old_line_content": "int RM_DictDel(RedisModuleDict *d, RedisModuleString *key, void *oldval) {",
          "new_line_content": "    return RM_DictDelC(d,key->ptr,sdslen(key->ptr),oldval);",
          "content_same": false
        },
        {
          "line": 3174,
          "old_api": null,
          "new_api": "getNodeByQuery",
          "old_text": null,
          "new_text": "getNodeByQuery(c,c->cmd,c->argv,c->argc,NULL,NULL)",
          "old_line_content": "        c->flags |= ctx->client->flags & (CLIENT_READONLY|CLIENT_ASKING);",
          "new_line_content": "        if (getNodeByQuery(c,c->cmd,c->argv,c->argc,NULL,NULL) !=",
          "content_same": false
        },
        {
          "line": 5232,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*di))",
          "old_line_content": "RedisModuleDictIter *RM_DictIteratorStartC(RedisModuleDict *d, const char *op, void *key, size_t keylen) {",
          "new_line_content": "    RedisModuleDictIter *di = zmalloc(sizeof(*di));",
          "content_same": false
        },
        {
          "line": 3185,
          "old_api": null,
          "new_api": "moduleReplicateMultiIfNeeded",
          "old_text": null,
          "new_text": "moduleReplicateMultiIfNeeded(ctx)",
          "old_line_content": "     * a Lua script in the context of AOF and slaves. */",
          "new_line_content": "    if (replicate) moduleReplicateMultiIfNeeded(ctx);",
          "content_same": false
        },
        {
          "line": 5234,
          "old_api": null,
          "new_api": "raxStart",
          "old_text": null,
          "new_text": "raxStart(&di->ri,d->rax)",
          "old_line_content": "    di->dict = d;",
          "new_line_content": "    raxStart(&di->ri,d->rax);",
          "content_same": false
        },
        {
          "line": 5242,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(key->ptr)",
          "old_line_content": "RedisModuleDictIter *RM_DictIteratorStart(RedisModuleDict *d, const char *op, RedisModuleString *key) {",
          "new_line_content": "    return RM_DictIteratorStartC(d,op,key->ptr,sdslen(key->ptr));",
          "content_same": false
        },
        {
          "line": 3195,
          "old_api": null,
          "new_api": "call",
          "old_text": null,
          "new_text": "call(c,call_flags)",
          "old_line_content": "    }",
          "new_line_content": "    call(c,call_flags);",
          "content_same": false
        },
        {
          "line": 3200,
          "old_api": null,
          "new_api": "sdsnewlen",
          "old_text": null,
          "new_text": "sdsnewlen(c->buf,c->bufpos)",
          "old_line_content": "     * output buffers. */",
          "new_line_content": "    sds proto = sdsnewlen(c->buf,c->bufpos);",
          "content_same": false
        },
        {
          "line": 5248,
          "old_api": null,
          "new_api": "raxStop",
          "old_text": null,
          "new_text": "raxStop(&di->ri)",
          "old_line_content": "void RM_DictIteratorStop(RedisModuleDictIter *di) {",
          "new_line_content": "    raxStop(&di->ri);",
          "content_same": false
        },
        {
          "line": 3202,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(c->reply)",
          "old_line_content": "    c->bufpos = 0;",
          "new_line_content": "    while(listLength(c->reply)) {",
          "content_same": false
        },
        {
          "line": 3205,
          "old_api": null,
          "new_api": "sdscatlen",
          "old_text": null,
          "new_text": "sdscatlen(proto,o->buf,o->used)",
          "old_line_content": "",
          "new_line_content": "        proto = sdscatlen(proto,o->buf,o->used);",
          "content_same": false
        },
        {
          "line": 3208,
          "old_api": null,
          "new_api": "moduleCreateCallReplyFromProto",
          "old_text": null,
          "new_text": "moduleCreateCallReplyFromProto(ctx,proto)",
          "old_line_content": "    }",
          "new_line_content": "    reply = moduleCreateCallReplyFromProto(ctx,proto);",
          "content_same": false
        },
        {
          "line": 5260,
          "old_api": null,
          "new_api": "raxSeek",
          "old_text": null,
          "new_text": "raxSeek(&di->ri,op,key,keylen)",
          "old_line_content": "int RM_DictIteratorReseekC(RedisModuleDictIter *di, const char *op, void *key, size_t keylen) {",
          "new_line_content": "    return raxSeek(&di->ri,op,key,keylen);",
          "content_same": false
        },
        {
          "line": 3213,
          "old_api": null,
          "new_api": "freeClient",
          "old_text": null,
          "new_text": "freeClient(c)",
          "old_line_content": "    if (ctx->module) ctx->module->in_call--;",
          "new_line_content": "    freeClient(c);",
          "content_same": false
        },
        {
          "line": 5266,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(key->ptr)",
          "old_line_content": "int RM_DictIteratorReseek(RedisModuleDictIter *di, const char *op, RedisModuleString *key) {",
          "new_line_content": "    return RM_DictIteratorReseekC(di,op,key->ptr,sdslen(key->ptr));",
          "content_same": false
        },
        {
          "line": 3220,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(reply->proto)",
          "old_line_content": "const char *RM_CallReplyProto(RedisModuleCallReply *reply, size_t *len) {",
          "new_line_content": "    if (reply->proto) *len = sdslen(reply->proto);",
          "content_same": false
        },
        {
          "line": 5295,
          "old_api": null,
          "new_api": "raxNext",
          "old_text": null,
          "new_text": "raxNext(&di->ri)",
          "old_line_content": "void *RM_DictNextC(RedisModuleDictIter *di, size_t *keylen, void **dataptr) {",
          "new_line_content": "    if (!raxNext(&di->ri)) return NULL;",
          "content_same": false
        },
        {
          "line": 5305,
          "old_api": null,
          "new_api": "raxPrev",
          "old_text": null,
          "new_text": "raxPrev(&di->ri)",
          "old_line_content": "void *RM_DictPrevC(RedisModuleDictIter *di, size_t *keylen, void **dataptr) {",
          "new_line_content": "    if (!raxPrev(&di->ri)) return NULL;",
          "content_same": false
        },
        {
          "line": 3266,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(name)",
          "old_line_content": "    const char *cset = ModuleTypeNameCharSet;",
          "new_line_content": "    if (strlen(name) != 9) return 0;",
          "content_same": false
        },
        {
          "line": 3271,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(cset,name[j])",
          "old_line_content": "    for (int j = 0; j < 9; j++) {",
          "new_line_content": "        char *p = strchr(cset,name[j]);",
          "content_same": false
        },
        {
          "line": 5320,
          "old_api": null,
          "new_api": "RM_DictNextC",
          "old_text": null,
          "new_text": "RM_DictNextC(di,&keylen,dataptr)",
          "old_line_content": "    size_t keylen;",
          "new_line_content": "    void *key = RM_DictNextC(di,&keylen,dataptr);",
          "content_same": false
        },
        {
          "line": 5322,
          "old_api": null,
          "new_api": "RM_CreateString",
          "old_text": null,
          "new_text": "RM_CreateString(ctx,key,keylen)",
          "old_line_content": "    if (key == NULL) return NULL;",
          "new_line_content": "    return RM_CreateString(ctx,key,keylen);",
          "content_same": false
        },
        {
          "line": 5330,
          "old_api": null,
          "new_api": "RM_DictPrevC",
          "old_text": null,
          "new_text": "RM_DictPrevC(di,&keylen,dataptr)",
          "old_line_content": "    size_t keylen;",
          "new_line_content": "    void *key = RM_DictPrevC(di,&keylen,dataptr);",
          "content_same": false
        },
        {
          "line": 3284,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(modules)",
          "old_line_content": "moduleType *moduleTypeLookupModuleByName(const char *name) {",
          "new_line_content": "    dictIterator *di = dictGetIterator(modules);",
          "content_same": false
        },
        {
          "line": 5332,
          "old_api": null,
          "new_api": "RM_CreateString",
          "old_text": null,
          "new_text": "RM_CreateString(ctx,key,keylen)",
          "old_line_content": "    if (key == NULL) return NULL;",
          "new_line_content": "    return RM_CreateString(ctx,key,keylen);",
          "content_same": false
        },
        {
          "line": 3287,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "",
          "new_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 3292,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(module->types,&li)",
          "old_line_content": "",
          "new_line_content": "        listRewind(module->types,&li);",
          "content_same": false
        },
        {
          "line": 3295,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(name,mt->name,sizeof(mt->name))",
          "old_line_content": "            moduleType *mt = ln->value;",
          "new_line_content": "            if (memcmp(name,mt->name,sizeof(mt->name)) == 0) {",
          "content_same": false
        },
        {
          "line": 5348,
          "old_api": null,
          "new_api": "raxEOF",
          "old_text": null,
          "new_text": "raxEOF(&di->ri)",
          "old_line_content": "int RM_DictCompareC(RedisModuleDictIter *di, const char *op, void *key, size_t keylen) {",
          "new_line_content": "    if (raxEOF(&di->ri)) return REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 3301,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "    }",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 5356,
          "old_api": null,
          "new_api": "raxEOF",
          "old_text": null,
          "new_text": "raxEOF(&di->ri)",
          "old_line_content": "int RM_DictCompare(RedisModuleDictIter *di, const char *op, RedisModuleString *key) {",
          "new_line_content": "    if (raxEOF(&di->ri)) return REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 3323,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(modules)",
          "old_line_content": "    moduleType *mt = NULL;",
          "new_line_content": "    dictIterator *di = dictGetIterator(modules);",
          "content_same": false
        },
        {
          "line": 3326,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "",
          "new_line_content": "    while ((de = dictNext(di)) != NULL && mt == NULL) {",
          "content_same": false
        },
        {
          "line": 5375,
          "old_api": null,
          "new_api": "sdsdup",
          "old_text": null,
          "new_text": "sdsdup(ctx->module->name)",
          "old_line_content": "int RM_InfoAddSection(RedisModuleInfoCtx *ctx, char *name) {",
          "new_line_content": "    sds full_name = sdsdup(ctx->module->name);",
          "content_same": false
        },
        {
          "line": 3331,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(module->types,&li)",
          "old_line_content": "",
          "new_line_content": "        listRewind(module->types,&li);",
          "content_same": false
        },
        {
          "line": 5381,
          "old_api": null,
          "new_api": "RM_InfoEndDictField",
          "old_text": null,
          "new_text": "RM_InfoEndDictField(ctx)",
          "old_line_content": "    if (ctx->in_dict_field)",
          "new_line_content": "        RM_InfoEndDictField(ctx);",
          "content_same": false
        },
        {
          "line": 5388,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(ctx->requested_section, full_name)",
          "old_line_content": "    if (ctx->requested_section) {",
          "new_line_content": "        if (strcasecmp(ctx->requested_section, full_name) &&",
          "content_same": false
        },
        {
          "line": 3342,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "    }",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 5395,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(ctx->info,\"\\r\\n\")",
          "old_line_content": "    }",
          "new_line_content": "    if (ctx->sections++) ctx->info = sdscat(ctx->info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 5398,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(full_name)",
          "old_line_content": "    ctx->in_section = 1;",
          "new_line_content": "    sdsfree(full_name);",
          "content_same": false
        },
        {
          "line": 5410,
          "old_api": null,
          "new_api": "RM_InfoEndDictField",
          "old_text": null,
          "new_text": "RM_InfoEndDictField(ctx)",
          "old_line_content": "    if (ctx->in_dict_field)",
          "new_line_content": "        RM_InfoEndDictField(ctx);",
          "content_same": false
        },
        {
          "line": 5424,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(ctx->info)",
          "old_line_content": "    /* trim the last ',' if found. */",
          "new_line_content": "    if (ctx->info[sdslen(ctx->info)-1]==',')",
          "content_same": false
        },
        {
          "line": 5438,
          "old_api": null,
          "new_api": "sdscatfmt",
          "old_text": null,
          "new_text": "sdscatfmt(ctx->info,\n            \"%s=%S,\",\n            field,\n            (sds)value->ptr)",
          "old_line_content": "    if (ctx->in_dict_field) {",
          "new_line_content": "        ctx->info = sdscatfmt(ctx->info,",
          "content_same": false
        },
        {
          "line": 5444,
          "old_api": null,
          "new_api": "sdscatfmt",
          "old_text": null,
          "new_text": "sdscatfmt(ctx->info,\n        \"%s_%s:%S\\r\\n\",\n        ctx->module->name,\n        field,\n        (sds)value->ptr)",
          "old_line_content": "    }",
          "new_line_content": "    ctx->info = sdscatfmt(ctx->info,",
          "content_same": false
        },
        {
          "line": 5456,
          "old_api": null,
          "new_api": "sdscatfmt",
          "old_text": null,
          "new_text": "sdscatfmt(ctx->info,\n            \"%s=%s,\",\n            field,\n            value)",
          "old_line_content": "    if (ctx->in_dict_field) {",
          "new_line_content": "        ctx->info = sdscatfmt(ctx->info,",
          "content_same": false
        },
        {
          "line": 5462,
          "old_api": null,
          "new_api": "sdscatfmt",
          "old_text": null,
          "new_text": "sdscatfmt(ctx->info,\n        \"%s_%s:%s\\r\\n\",\n        ctx->module->name,\n        field,\n        value)",
          "old_line_content": "    }",
          "new_line_content": "    ctx->info = sdscatfmt(ctx->info,",
          "content_same": false
        },
        {
          "line": 5474,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(ctx->info,\n            \"%s=%.17g,\",\n            field,\n            value)",
          "old_line_content": "    if (ctx->in_dict_field) {",
          "new_line_content": "        ctx->info = sdscatprintf(ctx->info,",
          "content_same": false
        },
        {
          "line": 5480,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(ctx->info,\n        \"%s_%s:%.17g\\r\\n\",\n        ctx->module->name,\n        field,\n        value)",
          "old_line_content": "    }",
          "new_line_content": "    ctx->info = sdscatprintf(ctx->info,",
          "content_same": false
        },
        {
          "line": 3433,
          "old_api": null,
          "new_api": "moduleTypeEncodeId",
          "old_text": null,
          "new_text": "moduleTypeEncodeId(name,encver)",
          "old_line_content": "moduleType *RM_CreateDataType(RedisModuleCtx *ctx, const char *name, int encver, void *typemethods_ptr) {",
          "new_line_content": "    uint64_t id = moduleTypeEncodeId(name,encver);",
          "content_same": false
        },
        {
          "line": 3435,
          "old_api": null,
          "new_api": "moduleTypeLookupModuleByName",
          "old_text": null,
          "new_text": "moduleTypeLookupModuleByName(name)",
          "old_line_content": "    if (id == 0) return NULL;",
          "new_line_content": "    if (moduleTypeLookupModuleByName(name) != NULL) return NULL;",
          "content_same": false
        },
        {
          "line": 5492,
          "old_api": null,
          "new_api": "sdscatfmt",
          "old_text": null,
          "new_text": "sdscatfmt(ctx->info,\n            \"%s=%I,\",\n            field,\n            value)",
          "old_line_content": "    if (ctx->in_dict_field) {",
          "new_line_content": "        ctx->info = sdscatfmt(ctx->info,",
          "content_same": false
        },
        {
          "line": 5498,
          "old_api": null,
          "new_api": "sdscatfmt",
          "old_text": null,
          "new_text": "sdscatfmt(ctx->info,\n        \"%s_%s:%I\\r\\n\",\n        ctx->module->name,\n        field,\n        value)",
          "old_line_content": "    }",
          "new_line_content": "    ctx->info = sdscatfmt(ctx->info,",
          "content_same": false
        },
        {
          "line": 3455,
          "old_api": null,
          "new_api": "zcalloc",
          "old_text": null,
          "new_text": "zcalloc(sizeof(*mt))",
          "old_line_content": "",
          "new_line_content": "    moduleType *mt = zcalloc(sizeof(*mt));",
          "content_same": false
        },
        {
          "line": 1411,
          "old_api": null,
          "new_api": "moduleGetReplyClient",
          "old_text": null,
          "new_text": "moduleGetReplyClient(ctx)",
          "old_line_content": "int RM_ReplyWithNull(RedisModuleCtx *ctx) {",
          "new_line_content": "    client *c = moduleGetReplyClient(ctx);",
          "content_same": false
        },
        {
          "line": 1413,
          "old_api": null,
          "new_api": "addReplyNull",
          "old_text": null,
          "new_text": "addReplyNull(c)",
          "old_line_content": "    if (c == NULL) return REDISMODULE_OK;",
          "new_line_content": "    addReplyNull(c);",
          "content_same": false
        },
        {
          "line": 5510,
          "old_api": null,
          "new_api": "sdscatfmt",
          "old_text": null,
          "new_text": "sdscatfmt(ctx->info,\n            \"%s=%U,\",\n            field,\n            value)",
          "old_line_content": "    if (ctx->in_dict_field) {",
          "new_line_content": "        ctx->info = sdscatfmt(ctx->info,",
          "content_same": false
        },
        {
          "line": 5516,
          "old_api": null,
          "new_api": "sdscatfmt",
          "old_text": null,
          "new_text": "sdscatfmt(ctx->info,\n        \"%s_%s:%U\\r\\n\",\n        ctx->module->name,\n        field,\n        value)",
          "old_line_content": "    }",
          "new_line_content": "    ctx->info = sdscatfmt(ctx->info,",
          "content_same": false
        },
        {
          "line": 3469,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(mt->name,name,sizeof(mt->name))",
          "old_line_content": "    }",
          "new_line_content": "    memcpy(mt->name,name,sizeof(mt->name));",
          "content_same": false
        },
        {
          "line": 1424,
          "old_api": null,
          "new_api": "moduleGetReplyClient",
          "old_text": null,
          "new_text": "moduleGetReplyClient(ctx)",
          "old_line_content": "int RM_ReplyWithCallReply(RedisModuleCtx *ctx, RedisModuleCallReply *reply) {",
          "new_line_content": "    client *c = moduleGetReplyClient(ctx);",
          "content_same": false
        },
        {
          "line": 1426,
          "old_api": null,
          "new_api": "sdsnewlen",
          "old_text": null,
          "new_text": "sdsnewlen(reply->proto, reply->protolen)",
          "old_line_content": "    if (c == NULL) return REDISMODULE_OK;",
          "new_line_content": "    sds proto = sdsnewlen(reply->proto, reply->protolen);",
          "content_same": false
        },
        {
          "line": 3480,
          "old_api": null,
          "new_api": "RM_DeleteKey",
          "old_text": null,
          "new_text": "RM_DeleteKey(key)",
          "old_line_content": "    if (!(key->mode & REDISMODULE_WRITE) || key->iter) return REDISMODULE_ERR;",
          "new_line_content": "    RM_DeleteKey(key);",
          "content_same": false
        },
        {
          "line": 5530,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(modules)",
          "old_line_content": "sds modulesCollectInfo(sds info, sds section, int for_crash_report, int sections) {",
          "new_line_content": "    dictIterator *di = dictGetIterator(modules);",
          "content_same": false
        },
        {
          "line": 5533,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "",
          "new_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 1438,
          "old_api": null,
          "new_api": "moduleGetReplyClient",
          "old_text": null,
          "new_text": "moduleGetReplyClient(ctx)",
          "old_line_content": "int RM_ReplyWithDouble(RedisModuleCtx *ctx, double d) {",
          "new_line_content": "    client *c = moduleGetReplyClient(ctx);",
          "content_same": false
        },
        {
          "line": 1440,
          "old_api": null,
          "new_api": "addReplyDouble",
          "old_text": null,
          "new_text": "addReplyDouble(c,d)",
          "old_line_content": "    if (c == NULL) return REDISMODULE_OK;",
          "new_line_content": "    addReplyDouble(c,d);",
          "content_same": false
        },
        {
          "line": 5538,
          "old_api": null,
          "new_api": "info_cb",
          "old_text": null,
          "new_text": "module->info_cb(&info_ctx, for_crash_report)",
          "old_line_content": "        RedisModuleInfoCtx info_ctx = {module, section, info, sections, 0};",
          "new_line_content": "        module->info_cb(&info_ctx, for_crash_report);",
          "content_same": false
        },
        {
          "line": 5541,
          "old_api": null,
          "new_api": "RM_InfoEndDictField",
          "old_text": null,
          "new_text": "RM_InfoEndDictField(&info_ctx)",
          "old_line_content": "        if (info_ctx.in_dict_field)",
          "new_line_content": "            RM_InfoEndDictField(&info_ctx);",
          "content_same": false
        },
        {
          "line": 3496,
          "old_api": null,
          "new_api": "RM_KeyType",
          "old_text": null,
          "new_text": "RM_KeyType(key)",
          "old_line_content": "        key->value == NULL ||",
          "new_line_content": "        RM_KeyType(key) != REDISMODULE_KEYTYPE_MODULE) return NULL;",
          "content_same": false
        },
        {
          "line": 5545,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "    }",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 3510,
          "old_api": null,
          "new_api": "RM_KeyType",
          "old_text": null,
          "new_text": "RM_KeyType(key)",
          "old_line_content": "        key->value == NULL ||",
          "new_line_content": "        RM_KeyType(key) != REDISMODULE_KEYTYPE_MODULE) return NULL;",
          "content_same": false
        },
        {
          "line": 5558,
          "old_api": null,
          "new_api": "getRandomBytes",
          "old_text": null,
          "new_text": "getRandomBytes(dst,len)",
          "old_line_content": "void RM_GetRandomBytes(unsigned char *dst, size_t len) {",
          "new_line_content": "    getRandomBytes(dst,len);",
          "content_same": false
        },
        {
          "line": 1466,
          "old_api": null,
          "new_api": "redisOpArrayInit",
          "old_text": null,
          "new_text": "redisOpArrayInit(&server.also_propagate)",
          "old_line_content": "        ctx->saved_oparray = server.also_propagate;",
          "new_line_content": "        redisOpArrayInit(&server.also_propagate);",
          "content_same": false
        },
        {
          "line": 1468,
          "old_api": null,
          "new_api": "execCommandPropagateMulti",
          "old_text": null,
          "new_text": "execCommandPropagateMulti(ctx->client)",
          "old_line_content": "    }",
          "new_line_content": "    execCommandPropagateMulti(ctx->client);",
          "content_same": false
        },
        {
          "line": 5565,
          "old_api": null,
          "new_api": "getRandomHexChars",
          "old_text": null,
          "new_text": "getRandomHexChars(dst,len)",
          "old_line_content": "void RM_GetRandomHexChars(char *dst, size_t len) {",
          "new_line_content": "    getRandomHexChars(dst,len);",
          "content_same": false
        },
        {
          "line": 3527,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n        \"Error loading data from RDB (short read or EOF). \"\n        \"Read performed by module '%s' about type '%s' \"\n        \"after reading '%llu' bytes of a value.\",\n        io->type->module->name,\n        io->type->name,\n        (unsigned long long)io->bytes)",
          "old_line_content": "    }",
          "new_line_content": "    serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 3534,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "        (unsigned long long)io->bytes);",
          "new_line_content": "    exit(1);",
          "content_same": false
        },
        {
          "line": 5585,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*sapi))",
          "old_line_content": "int RM_ExportSharedAPI(RedisModuleCtx *ctx, const char *apiname, void *func) {",
          "new_line_content": "    RedisModuleSharedAPI *sapi = zmalloc(sizeof(*sapi));",
          "content_same": false
        },
        {
          "line": 5588,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(server.sharedapi, (char*)apiname, sapi)",
          "old_line_content": "    sapi->func = func;",
          "new_line_content": "    if (dictAdd(server.sharedapi, (char*)apiname, sapi) != DICT_OK) {",
          "content_same": false
        },
        {
          "line": 3541,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(modules)",
          "old_line_content": "int moduleAllDatatypesHandleErrors() {",
          "new_line_content": "    dictIterator *di = dictGetIterator(modules);",
          "content_same": false
        },
        {
          "line": 3544,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "",
          "new_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 3549,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "        {",
          "new_line_content": "            dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 3553,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "    }",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 1515,
          "old_api": null,
          "new_api": "lookupCommandByCString",
          "old_text": null,
          "new_text": "lookupCommandByCString((char*)cmdname)",
          "old_line_content": "",
          "new_line_content": "    cmd = lookupCommandByCString((char*)cmdname);",
          "content_same": false
        },
        {
          "line": 1519,
          "old_api": null,
          "new_api": "va_start",
          "old_text": null,
          "new_text": "va_start(ap, fmt)",
          "old_line_content": "    /* Create the client and dispatch the command. */",
          "new_line_content": "    va_start(ap, fmt);",
          "content_same": false
        },
        {
          "line": 3570,
          "old_api": null,
          "new_api": "rdbSaveLen",
          "old_text": null,
          "new_text": "rdbSaveLen(io->rio, RDB_MODULE_OPCODE_UINT)",
          "old_line_content": "    /* Save opcode. */",
          "new_line_content": "    int retval = rdbSaveLen(io->rio, RDB_MODULE_OPCODE_UINT);",
          "content_same": false
        },
        {
          "line": 3574,
          "old_api": null,
          "new_api": "rdbSaveLen",
          "old_text": null,
          "new_text": "rdbSaveLen(io->rio, value)",
          "old_line_content": "    /* Save value. */",
          "new_line_content": "    retval = rdbSaveLen(io->rio, value);",
          "content_same": false
        },
        {
          "line": 5629,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(server.sharedapi, apiname)",
          "old_line_content": "void *RM_GetSharedAPI(RedisModuleCtx *ctx, const char *apiname) {",
          "new_line_content": "    dictEntry *de = dictFind(server.sharedapi, apiname);",
          "content_same": false
        },
        {
          "line": 5631,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "    if (de == NULL) return NULL;",
          "new_line_content": "    RedisModuleSharedAPI *sapi = dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 1536,
          "old_api": null,
          "new_api": "propagate",
          "old_text": null,
          "new_text": "propagate(cmd,ctx->client->db->id,argv,argc,target)",
          "old_line_content": "    if (ctx->flags & REDISMODULE_CTX_THREAD_SAFE) {",
          "new_line_content": "        propagate(cmd,ctx->client->db->id,argv,argc,target);",
          "content_same": false
        },
        {
          "line": 1538,
          "old_api": null,
          "new_api": "moduleReplicateMultiIfNeeded",
          "old_text": null,
          "new_text": "moduleReplicateMultiIfNeeded(ctx)",
          "old_line_content": "    } else {",
          "new_line_content": "        moduleReplicateMultiIfNeeded(ctx);",
          "content_same": false
        },
        {
          "line": 3589,
          "old_api": null,
          "new_api": "rdbLoadLen",
          "old_text": null,
          "new_text": "rdbLoadLen(io->rio,NULL)",
          "old_line_content": "    if (io->ver == 2) {",
          "new_line_content": "        uint64_t opcode = rdbLoadLen(io->rio,NULL);",
          "content_same": false
        },
        {
          "line": 1543,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(argv[j])",
          "old_line_content": "    /* Release the argv. */",
          "new_line_content": "    for (j = 0; j < argc; j++) decrRefCount(argv[j]);",
          "content_same": false
        },
        {
          "line": 3593,
          "old_api": null,
          "new_api": "rdbLoadLenByRef",
          "old_text": null,
          "new_text": "rdbLoadLenByRef(io->rio, NULL, &value)",
          "old_line_content": "    uint64_t value;",
          "new_line_content": "    int retval = rdbLoadLenByRef(io->rio, NULL, &value);",
          "content_same": false
        },
        {
          "line": 3598,
          "old_api": null,
          "new_api": "moduleRDBLoadError",
          "old_text": null,
          "new_text": "moduleRDBLoadError(io)",
          "old_line_content": "loaderr:",
          "new_line_content": "    moduleRDBLoadError(io);",
          "content_same": false
        },
        {
          "line": 5647,
          "old_api": null,
          "new_api": "dictGetSafeIterator",
          "old_text": null,
          "new_text": "dictGetSafeIterator(server.sharedapi)",
          "old_line_content": "    int count = 0;",
          "new_line_content": "    dictIterator *di = dictGetSafeIterator(server.sharedapi);",
          "content_same": false
        },
        {
          "line": 5649,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "    dictEntry *de;",
          "new_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 5653,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(server.sharedapi,apiname)",
          "old_line_content": "        if (sapi->module == module) {",
          "new_line_content": "            dictDelete(server.sharedapi,apiname);",
          "content_same": false
        },
        {
          "line": 3606,
          "old_api": null,
          "new_api": "RM_SaveUnsigned",
          "old_text": null,
          "new_text": "RM_SaveUnsigned(io,conv.u)",
          "old_line_content": "    conv.i = value;",
          "new_line_content": "    RM_SaveUnsigned(io,conv.u);",
          "content_same": false
        },
        {
          "line": 1561,
          "old_api": null,
          "new_api": "alsoPropagate",
          "old_text": null,
          "new_text": "alsoPropagate(ctx->client->cmd,ctx->client->db->id,\n        ctx->client->argv,ctx->client->argc,\n        PROPAGATE_AOF|PROPAGATE_REPL)",
          "old_line_content": "int RM_ReplicateVerbatim(RedisModuleCtx *ctx) {",
          "new_line_content": "    alsoPropagate(ctx->client->cmd,ctx->client->db->id,",
          "content_same": false
        },
        {
          "line": 5658,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "    }",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 3612,
          "old_api": null,
          "new_api": "RM_LoadUnsigned",
          "old_text": null,
          "new_text": "RM_LoadUnsigned(io)",
          "old_line_content": "    union {uint64_t u; int64_t i;} conv;",
          "new_line_content": "    conv.u = RM_LoadUnsigned(io);",
          "content_same": false
        },
        {
          "line": 5671,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(module->using,&li)",
          "old_line_content": "",
          "new_line_content": "    listRewind(module->using,&li);",
          "content_same": false
        },
        {
          "line": 3625,
          "old_api": null,
          "new_api": "rdbSaveLen",
          "old_text": null,
          "new_text": "rdbSaveLen(io->rio, RDB_MODULE_OPCODE_STRING)",
          "old_line_content": "    /* Save opcode. */",
          "new_line_content": "    ssize_t retval = rdbSaveLen(io->rio, RDB_MODULE_OPCODE_STRING);",
          "content_same": false
        },
        {
          "line": 5674,
          "old_api": null,
          "new_api": "listSearchKey",
          "old_text": null,
          "new_text": "listSearchKey(used->usedby,module)",
          "old_line_content": "        RedisModule *used = ln->value;",
          "new_line_content": "        listNode *ln = listSearchKey(used->usedby,module);",
          "content_same": false
        },
        {
          "line": 5676,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(module->using,ln)",
          "old_line_content": "        if (ln) {",
          "new_line_content": "            listDelNode(module->using,ln);",
          "content_same": false
        },
        {
          "line": 3629,
          "old_api": null,
          "new_api": "rdbSaveStringObject",
          "old_text": null,
          "new_text": "rdbSaveStringObject(io->rio, s)",
          "old_line_content": "    /* Save value. */",
          "new_line_content": "    retval = rdbSaveStringObject(io->rio, s);",
          "content_same": false
        },
        {
          "line": 3643,
          "old_api": null,
          "new_api": "rdbSaveLen",
          "old_text": null,
          "new_text": "rdbSaveLen(io->rio, RDB_MODULE_OPCODE_STRING)",
          "old_line_content": "    /* Save opcode. */",
          "new_line_content": "    ssize_t retval = rdbSaveLen(io->rio, RDB_MODULE_OPCODE_STRING);",
          "content_same": false
        },
        {
          "line": 5692,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(module->filters,&li)",
          "old_line_content": "",
          "new_line_content": "    listRewind(module->filters,&li);",
          "content_same": false
        },
        {
          "line": 3647,
          "old_api": null,
          "new_api": "rdbSaveRawString",
          "old_text": null,
          "new_text": "rdbSaveRawString(io->rio, (unsigned char*)str,len)",
          "old_line_content": "    /* Save value. */",
          "new_line_content": "    retval = rdbSaveRawString(io->rio, (unsigned char*)str,len);",
          "content_same": false
        },
        {
          "line": 5695,
          "old_api": null,
          "new_api": "listSearchKey",
          "old_text": null,
          "new_text": "listSearchKey(moduleCommandFilters,filter)",
          "old_line_content": "        RedisModuleCommandFilter *filter = ln->value;",
          "new_line_content": "        listNode *ln = listSearchKey(moduleCommandFilters,filter);",
          "content_same": false
        },
        {
          "line": 5697,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(moduleCommandFilters,ln)",
          "old_line_content": "        if (ln) {",
          "new_line_content": "            listDelNode(moduleCommandFilters,ln);",
          "content_same": false
        },
        {
          "line": 5700,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(filter)",
          "old_line_content": "        }",
          "new_line_content": "        zfree(filter);",
          "content_same": false
        },
        {
          "line": 1606,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(ci1,0,sizeof(*ci1))",
          "old_line_content": "    RedisModuleClientInfoV1 *ci1 = ci;",
          "new_line_content": "    memset(ci1,0,sizeof(*ci1));",
          "content_same": false
        },
        {
          "line": 3660,
          "old_api": null,
          "new_api": "rdbLoadLen",
          "old_text": null,
          "new_text": "rdbLoadLen(io->rio,NULL)",
          "old_line_content": "    if (io->ver == 2) {",
          "new_line_content": "        uint64_t opcode = rdbLoadLen(io->rio,NULL);",
          "content_same": false
        },
        {
          "line": 3663,
          "old_api": null,
          "new_api": "rdbGenericLoadStringObject",
          "old_text": null,
          "new_text": "rdbGenericLoadStringObject(io->rio,\n              plain ? RDB_LOAD_PLAIN : RDB_LOAD_NONE, lenptr)",
          "old_line_content": "    }",
          "new_line_content": "    void *s = rdbGenericLoadStringObject(io->rio,",
          "content_same": false
        },
        {
          "line": 1620,
          "old_api": null,
          "new_api": "connPeerToString",
          "old_text": null,
          "new_text": "connPeerToString(client->conn,ci1->addr,sizeof(ci1->addr),&port)",
          "old_line_content": "    int port;",
          "new_line_content": "    connPeerToString(client->conn,ci1->addr,sizeof(ci1->addr),&port);",
          "content_same": false
        },
        {
          "line": 3669,
          "old_api": null,
          "new_api": "moduleRDBLoadError",
          "old_text": null,
          "new_text": "moduleRDBLoadError(io)",
          "old_line_content": "loaderr:",
          "new_line_content": "    moduleRDBLoadError(io);",
          "content_same": false
        },
        {
          "line": 3683,
          "old_api": null,
          "new_api": "moduleLoadString",
          "old_text": null,
          "new_text": "moduleLoadString(io,0,NULL)",
          "old_line_content": "RedisModuleString *RM_LoadString(RedisModuleIO *io) {",
          "new_line_content": "    return moduleLoadString(io,0,NULL);",
          "content_same": false
        },
        {
          "line": 1636,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(ri1,0,sizeof(*ri1))",
          "old_line_content": "    RedisModuleReplicationInfoV1 *ri1 = ri;",
          "new_line_content": "    memset(ri1,0,sizeof(*ri1));",
          "content_same": false
        },
        {
          "line": 3694,
          "old_api": null,
          "new_api": "moduleLoadString",
          "old_text": null,
          "new_text": "moduleLoadString(io,1,lenptr)",
          "old_line_content": "char *RM_LoadStringBuffer(RedisModuleIO *io, size_t *lenptr) {",
          "new_line_content": "    return moduleLoadString(io,1,lenptr);",
          "content_same": false
        },
        {
          "line": 3703,
          "old_api": null,
          "new_api": "rdbSaveLen",
          "old_text": null,
          "new_text": "rdbSaveLen(io->rio, RDB_MODULE_OPCODE_DOUBLE)",
          "old_line_content": "    /* Save opcode. */",
          "new_line_content": "    int retval = rdbSaveLen(io->rio, RDB_MODULE_OPCODE_DOUBLE);",
          "content_same": false
        },
        {
          "line": 3707,
          "old_api": null,
          "new_api": "rdbSaveBinaryDoubleValue",
          "old_text": null,
          "new_text": "rdbSaveBinaryDoubleValue(io->rio, value)",
          "old_line_content": "    /* Save value. */",
          "new_line_content": "    retval = rdbSaveBinaryDoubleValue(io->rio, value);",
          "content_same": false
        },
        {
          "line": 5762,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*filter))",
          "old_line_content": "RedisModuleCommandFilter *RM_RegisterCommandFilter(RedisModuleCtx *ctx, RedisModuleCommandFilterFunc callback, int flags) {",
          "new_line_content": "    RedisModuleCommandFilter *filter = zmalloc(sizeof(*filter));",
          "content_same": false
        },
        {
          "line": 5767,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(moduleCommandFilters, filter)",
          "old_line_content": "",
          "new_line_content": "    listAddNodeTail(moduleCommandFilters, filter);",
          "content_same": false
        },
        {
          "line": 3721,
          "old_api": null,
          "new_api": "rdbLoadLen",
          "old_text": null,
          "new_text": "rdbLoadLen(io->rio,NULL)",
          "old_line_content": "    if (io->ver == 2) {",
          "new_line_content": "        uint64_t opcode = rdbLoadLen(io->rio,NULL);",
          "content_same": false
        },
        {
          "line": 3725,
          "old_api": null,
          "new_api": "rdbLoadBinaryDoubleValue",
          "old_text": null,
          "new_text": "rdbLoadBinaryDoubleValue(io->rio, &value)",
          "old_line_content": "    double value;",
          "new_line_content": "    int retval = rdbLoadBinaryDoubleValue(io->rio, &value);",
          "content_same": false
        },
        {
          "line": 3730,
          "old_api": null,
          "new_api": "moduleRDBLoadError",
          "old_text": null,
          "new_text": "moduleRDBLoadError(io)",
          "old_line_content": "loaderr:",
          "new_line_content": "    moduleRDBLoadError(io);",
          "content_same": false
        },
        {
          "line": 5780,
          "old_api": null,
          "new_api": "listSearchKey",
          "old_text": null,
          "new_text": "listSearchKey(moduleCommandFilters,filter)",
          "old_line_content": "",
          "new_line_content": "    ln = listSearchKey(moduleCommandFilters,filter);",
          "content_same": false
        },
        {
          "line": 5782,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(moduleCommandFilters,ln)",
          "old_line_content": "    if (!ln) return REDISMODULE_ERR;",
          "new_line_content": "    listDelNode(moduleCommandFilters,ln);",
          "content_same": false
        },
        {
          "line": 5784,
          "old_api": null,
          "new_api": "listSearchKey",
          "old_text": null,
          "new_text": "listSearchKey(ctx->module->filters,filter)",
          "old_line_content": "",
          "new_line_content": "    ln = listSearchKey(ctx->module->filters,filter);",
          "content_same": false
        },
        {
          "line": 5786,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(ctx->module->filters,ln)",
          "old_line_content": "    if (!ln) return REDISMODULE_ERR;    /* Shouldn't happen */",
          "new_line_content": "    listDelNode(ctx->module->filters,ln);",
          "content_same": false
        },
        {
          "line": 1691,
          "old_api": null,
          "new_api": "lookupClientByID",
          "old_text": null,
          "new_text": "lookupClientByID(id)",
          "old_line_content": "int RM_GetClientInfoById(void *ci, uint64_t id) {",
          "new_line_content": "    client *client = lookupClientByID(id);",
          "content_same": false
        },
        {
          "line": 3740,
          "old_api": null,
          "new_api": "rdbSaveLen",
          "old_text": null,
          "new_text": "rdbSaveLen(io->rio, RDB_MODULE_OPCODE_FLOAT)",
          "old_line_content": "    /* Save opcode. */",
          "new_line_content": "    int retval = rdbSaveLen(io->rio, RDB_MODULE_OPCODE_FLOAT);",
          "content_same": false
        },
        {
          "line": 5788,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(filter)",
          "old_line_content": "",
          "new_line_content": "    zfree(filter);",
          "content_same": false
        },
        {
          "line": 3744,
          "old_api": null,
          "new_api": "rdbSaveBinaryFloatValue",
          "old_text": null,
          "new_text": "rdbSaveBinaryFloatValue(io->rio, value)",
          "old_line_content": "    /* Save value. */",
          "new_line_content": "    retval = rdbSaveBinaryFloatValue(io->rio, value);",
          "content_same": false
        },
        {
          "line": 1697,
          "old_api": null,
          "new_api": "modulePopulateClientInfoStructure",
          "old_text": null,
          "new_text": "modulePopulateClientInfoStructure(ci,client,structver)",
          "old_line_content": "    uint64_t structver = ((uint64_t*)ci)[0];",
          "new_line_content": "    return modulePopulateClientInfoStructure(ci,client,structver);",
          "content_same": false
        },
        {
          "line": 5794,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(moduleCommandFilters)",
          "old_line_content": "void moduleCallCommandFilters(client *c) {",
          "new_line_content": "    if (listLength(moduleCommandFilters) == 0) return;",
          "content_same": false
        },
        {
          "line": 1702,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(ctx)",
          "old_line_content": "int RM_PublishMessage(RedisModuleCtx *ctx, RedisModuleString *channel, RedisModuleString *message) {",
          "new_line_content": "    UNUSED(ctx);",
          "content_same": false
        },
        {
          "line": 5798,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(moduleCommandFilters,&li)",
          "old_line_content": "    listNode *ln;",
          "new_line_content": "    listRewind(moduleCommandFilters,&li);",
          "content_same": false
        },
        {
          "line": 1705,
          "old_api": null,
          "new_api": "clusterPropagatePublish",
          "old_text": null,
          "new_text": "clusterPropagatePublish(channel, message)",
          "old_line_content": "    if (server.cluster_enabled)",
          "new_line_content": "        clusterPropagatePublish(channel, message);",
          "content_same": false
        },
        {
          "line": 5805,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&li)",
          "old_line_content": "",
          "new_line_content": "    while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 3758,
          "old_api": null,
          "new_api": "rdbLoadLen",
          "old_text": null,
          "new_text": "rdbLoadLen(io->rio,NULL)",
          "old_line_content": "    if (io->ver == 2) {",
          "new_line_content": "        uint64_t opcode = rdbLoadLen(io->rio,NULL);",
          "content_same": false
        },
        {
          "line": 3762,
          "old_api": null,
          "new_api": "rdbLoadBinaryFloatValue",
          "old_text": null,
          "new_text": "rdbLoadBinaryFloatValue(io->rio, &value)",
          "old_line_content": "    float value;",
          "new_line_content": "    int retval = rdbLoadBinaryFloatValue(io->rio, &value);",
          "content_same": false
        },
        {
          "line": 5814,
          "old_api": null,
          "new_api": "callback",
          "old_text": null,
          "new_text": "f->callback(&filter)",
          "old_line_content": "        /* Call filter */",
          "new_line_content": "        f->callback(&filter);",
          "content_same": false
        },
        {
          "line": 3767,
          "old_api": null,
          "new_api": "moduleRDBLoadError",
          "old_text": null,
          "new_text": "moduleRDBLoadError(io)",
          "old_line_content": "loaderr:",
          "new_line_content": "    moduleRDBLoadError(io);",
          "content_same": false
        },
        {
          "line": 3779,
          "old_api": null,
          "new_api": "ld2string",
          "old_text": null,
          "new_text": "ld2string(buf,sizeof(buf),value,LD_STR_HEX)",
          "old_line_content": "     * save it as a string type. */",
          "new_line_content": "    size_t len = ld2string(buf,sizeof(buf),value,LD_STR_HEX);",
          "content_same": false
        },
        {
          "line": 3789,
          "old_api": null,
          "new_api": "RM_LoadStringBuffer",
          "old_text": null,
          "new_text": "RM_LoadStringBuffer(io,&len)",
          "old_line_content": "    size_t len;",
          "new_line_content": "    char* str = RM_LoadStringBuffer(io,&len);",
          "content_same": false
        },
        {
          "line": 3791,
          "old_api": null,
          "new_api": "string2ld",
          "old_text": null,
          "new_text": "string2ld(str,len,&value)",
          "old_line_content": "    if (!str) return 0;",
          "new_line_content": "    string2ld(str,len,&value);",
          "content_same": false
        },
        {
          "line": 3800,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(modules)",
          "old_line_content": "    size_t total_written = 0;",
          "new_line_content": "    dictIterator *di = dictGetIterator(modules);",
          "content_same": false
        },
        {
          "line": 5850,
          "old_api": null,
          "new_api": "zrealloc",
          "old_text": null,
          "new_text": "zrealloc(fctx->argv, (fctx->argc+1)*sizeof(RedisModuleString *))",
          "old_line_content": "",
          "new_line_content": "    fctx->argv = zrealloc(fctx->argv, (fctx->argc+1)*sizeof(RedisModuleString *));",
          "content_same": false
        },
        {
          "line": 3803,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "",
          "new_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 3808,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(module->types,&li)",
          "old_line_content": "",
          "new_line_content": "        listRewind(module->types,&li);",
          "content_same": false
        },
        {
          "line": 3813,
          "old_api": null,
          "new_api": "rdbSaveSingleModuleAux",
          "old_text": null,
          "new_text": "rdbSaveSingleModuleAux(rdb, when, mt)",
          "old_line_content": "                continue;",
          "new_line_content": "            ssize_t ret = rdbSaveSingleModuleAux(rdb, when, mt);",
          "content_same": false
        },
        {
          "line": 3815,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "            if (ret==-1) {",
          "new_line_content": "                dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 3822,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 5870,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(fctx->argv[pos])",
          "old_line_content": "",
          "new_line_content": "    decrRefCount(fctx->argv[pos]);",
          "content_same": false
        },
        {
          "line": 5884,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(fctx->argv[pos])",
          "old_line_content": "",
          "new_line_content": "    decrRefCount(fctx->argv[pos]);",
          "content_same": false
        },
        {
          "line": 5910,
          "old_api": null,
          "new_api": "hasActiveChildProcess",
          "old_text": null,
          "new_text": "hasActiveChildProcess()",
          "old_line_content": "    pid_t childpid;",
          "new_line_content": "    if (hasActiveChildProcess()) {",
          "content_same": false
        },
        {
          "line": 5914,
          "old_api": null,
          "new_api": "openChildInfoPipe",
          "old_text": null,
          "new_text": "openChildInfoPipe()",
          "old_line_content": "",
          "new_line_content": "    openChildInfoPipe();",
          "content_same": false
        },
        {
          "line": 3869,
          "old_api": null,
          "new_api": "mixDigest",
          "old_text": null,
          "new_text": "mixDigest(md->o,ele,len)",
          "old_line_content": "void RM_DigestAddStringBuffer(RedisModuleDigest *md, unsigned char *ele, size_t len) {",
          "new_line_content": "    mixDigest(md->o,ele,len);",
          "content_same": false
        },
        {
          "line": 5917,
          "old_api": null,
          "new_api": "redisSetProcTitle",
          "old_text": null,
          "new_text": "redisSetProcTitle(\"redis-module-fork\")",
          "old_line_content": "        /* Child */",
          "new_line_content": "        redisSetProcTitle(\"redis-module-fork\");",
          "content_same": false
        },
        {
          "line": 5919,
          "old_api": null,
          "new_api": "closeChildInfoPipe",
          "old_text": null,
          "new_text": "closeChildInfoPipe()",
          "old_line_content": "    } else if (childpid == -1) {",
          "new_line_content": "        closeChildInfoPipe();",
          "content_same": false
        },
        {
          "line": 1825,
          "old_api": null,
          "new_api": "getMaxmemoryState",
          "old_text": null,
          "new_text": "getMaxmemoryState(NULL,NULL,NULL,&level)",
          "old_line_content": "    float level;",
          "new_line_content": "    int retval = getMaxmemoryState(NULL,NULL,NULL,&level);",
          "content_same": false
        },
        {
          "line": 3876,
          "old_api": null,
          "new_api": "ll2string",
          "old_text": null,
          "new_text": "ll2string(buf,sizeof(buf),ll)",
          "old_line_content": "    char buf[LONG_STR_SIZE];",
          "new_line_content": "    size_t len = ll2string(buf,sizeof(buf),ll);",
          "content_same": false
        },
        {
          "line": 1830,
          "old_api": null,
          "new_api": "hasActiveChildProcess",
          "old_text": null,
          "new_text": "hasActiveChildProcess()",
          "old_line_content": "    /* Presence of children processes. */",
          "new_line_content": "    if (hasActiveChildProcess()) flags |= REDISMODULE_CTX_FLAGS_ACTIVE_CHILD;",
          "content_same": false
        },
        {
          "line": 5926,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE, \"Module fork started pid: %d \", childpid)",
          "old_line_content": "        moduleForkInfo.done_handler_user_data = user_data;",
          "new_line_content": "        serverLog(LL_NOTICE, \"Module fork started pid: %d \", childpid);",
          "content_same": false
        },
        {
          "line": 3882,
          "old_api": null,
          "new_api": "xorDigest",
          "old_text": null,
          "new_text": "xorDigest(md->x,md->o,sizeof(md->o))",
          "old_line_content": "void RM_DigestEndSequence(RedisModuleDigest *md) {",
          "new_line_content": "    xorDigest(md->x,md->o,sizeof(md->o));",
          "content_same": false
        },
        {
          "line": 5935,
          "old_api": null,
          "new_api": "sendChildCOWInfo",
          "old_text": null,
          "new_text": "sendChildCOWInfo(CHILD_INFO_TYPE_MODULE, \"Module fork\")",
          "old_line_content": "int RM_ExitFromChild(int retcode) {",
          "new_line_content": "    sendChildCOWInfo(CHILD_INFO_TYPE_MODULE, \"Module fork\");",
          "content_same": false
        },
        {
          "line": 1846,
          "old_api": null,
          "new_api": "selectDb",
          "old_text": null,
          "new_text": "selectDb(ctx->client,newid)",
          "old_line_content": "int RM_SelectDb(RedisModuleCtx *ctx, int newid) {",
          "new_line_content": "    int retval = selectDb(ctx->client,newid);",
          "content_same": false
        },
        {
          "line": 5949,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE,\"Killing running module fork child: %ld\",\n        (long) server.module_child_pid)",
          "old_line_content": "    int statloc;",
          "new_line_content": "    serverLog(LL_NOTICE,\"Killing running module fork child: %ld\",",
          "content_same": false
        },
        {
          "line": 3902,
          "old_api": null,
          "new_api": "lookupCommandByCString",
          "old_text": null,
          "new_text": "lookupCommandByCString((char*)cmdname)",
          "old_line_content": "",
          "new_line_content": "    cmd = lookupCommandByCString((char*)cmdname);",
          "content_same": false
        },
        {
          "line": 5951,
          "old_api": null,
          "new_api": "kill",
          "old_text": null,
          "new_text": "kill(server.module_child_pid,SIGUSR1)",
          "old_line_content": "        (long) server.module_child_pid);",
          "new_line_content": "    if (kill(server.module_child_pid,SIGUSR1) != -1 && wait) {",
          "content_same": false
        },
        {
          "line": 3904,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n            \"Fatal: AOF method for module data type '%s' tried to \"\n            \"emit unknown command '%s'\",\n            io->type->name, cmdname)",
          "old_line_content": "    if (!cmd) {",
          "new_line_content": "        serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 5959,
          "old_api": null,
          "new_api": "closeChildInfoPipe",
          "old_text": null,
          "new_text": "closeChildInfoPipe()",
          "old_line_content": "    moduleForkInfo.done_handler_user_data = NULL;",
          "new_line_content": "    closeChildInfoPipe();",
          "content_same": false
        },
        {
          "line": 3914,
          "old_api": null,
          "new_api": "va_start",
          "old_text": null,
          "new_text": "va_start(ap, fmt)",
          "old_line_content": "    /* Emit the arguments into the AOF in Redis protocol format. */",
          "new_line_content": "    va_start(ap, fmt);",
          "content_same": false
        },
        {
          "line": 1870,
          "old_api": null,
          "new_api": "lookupKeyWriteWithFlags",
          "old_text": null,
          "new_text": "lookupKeyWriteWithFlags(ctx->client->db,keyname, flags)",
          "old_line_content": "    if (mode & REDISMODULE_WRITE) {",
          "new_line_content": "        value = lookupKeyWriteWithFlags(ctx->client->db,keyname, flags);",
          "content_same": false
        },
        {
          "line": 3918,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n            \"Fatal: AOF method for module data type '%s' tried to \"\n            \"call RedisModule_EmitAOF() with wrong format specifiers '%s'\",\n            io->type->name, fmt)",
          "old_line_content": "    if (argv == NULL) {",
          "new_line_content": "        serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 1872,
          "old_api": null,
          "new_api": "lookupKeyReadWithFlags",
          "old_text": null,
          "new_text": "lookupKeyReadWithFlags(ctx->client->db,keyname, flags)",
          "old_line_content": "    } else {",
          "new_line_content": "        value = lookupKeyReadWithFlags(ctx->client->db,keyname, flags);",
          "content_same": false
        },
        {
          "line": 5968,
          "old_api": null,
          "new_api": "TerminateModuleForkChild",
          "old_text": null,
          "new_text": "TerminateModuleForkChild(child_pid,1)",
          "old_line_content": "    /* Kill module child, wait for child exit. */",
          "new_line_content": "    if (TerminateModuleForkChild(child_pid,1) == C_OK)",
          "content_same": false
        },
        {
          "line": 1879,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*kp))",
          "old_line_content": "    /* Setup the key handle. */",
          "new_line_content": "    kp = zmalloc(sizeof(*kp));",
          "content_same": false
        },
        {
          "line": 3928,
          "old_api": null,
          "new_api": "rioWriteBulkCount",
          "old_text": null,
          "new_text": "rioWriteBulkCount(io->rio,'*',argc)",
          "old_line_content": "    /* Bulk count. */",
          "new_line_content": "    if (!io->error && rioWriteBulkCount(io->rio,'*',argc) == 0)",
          "content_same": false
        },
        {
          "line": 5975,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE,\n        \"Module fork exited pid: %d, retcode: %d, bysignal: %d\",\n        server.module_child_pid, exitcode, bysignal)",
          "old_line_content": "void ModuleForkDoneHandler(int exitcode, int bysignal) {",
          "new_line_content": "    serverLog(LL_NOTICE,",
          "content_same": false
        },
        {
          "line": 1883,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(keyname)",
          "old_line_content": "    kp->key = keyname;",
          "new_line_content": "    incrRefCount(keyname);",
          "content_same": false
        },
        {
          "line": 5979,
          "old_api": null,
          "new_api": "done_handler",
          "old_text": null,
          "new_text": "moduleForkInfo.done_handler(exitcode, bysignal,\n            moduleForkInfo.done_handler_user_data)",
          "old_line_content": "    if (moduleForkInfo.done_handler) {",
          "new_line_content": "        moduleForkInfo.done_handler(exitcode, bysignal,",
          "content_same": false
        },
        {
          "line": 3933,
          "old_api": null,
          "new_api": "rioWriteBulkObject",
          "old_text": null,
          "new_text": "rioWriteBulkObject(io->rio,argv[j])",
          "old_line_content": "    for (j = 0; j < argc; j++) {",
          "new_line_content": "        if (!io->error && rioWriteBulkObject(io->rio,argv[j]) == 0)",
          "content_same": false
        },
        {
          "line": 1887,
          "old_api": null,
          "new_api": "zsetKeyReset",
          "old_text": null,
          "new_text": "zsetKeyReset(kp)",
          "old_line_content": "    kp->mode = mode;",
          "new_line_content": "    zsetKeyReset(kp);",
          "content_same": false
        },
        {
          "line": 3935,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(argv[j])",
          "old_line_content": "            io->error = 1;",
          "new_line_content": "        decrRefCount(argv[j]);",
          "content_same": false
        },
        {
          "line": 3937,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(argv)",
          "old_line_content": "    }",
          "new_line_content": "    zfree(argv);",
          "content_same": false
        },
        {
          "line": 1895,
          "old_api": null,
          "new_api": "SHOULD_SIGNAL_MODIFIED_KEYS",
          "old_text": null,
          "new_text": "SHOULD_SIGNAL_MODIFIED_KEYS(key->ctx)",
          "old_line_content": "    if (key == NULL) return;",
          "new_line_content": "    int signal = SHOULD_SIGNAL_MODIFIED_KEYS(key->ctx);",
          "content_same": false
        },
        {
          "line": 1897,
          "old_api": null,
          "new_api": "signalModifiedKey",
          "old_text": null,
          "new_text": "signalModifiedKey(key->db,key->key)",
          "old_line_content": "    if ((key->mode & REDISMODULE_WRITE) && signal)",
          "new_line_content": "        signalModifiedKey(key->db,key->key);",
          "content_same": false
        },
        {
          "line": 1899,
          "old_api": null,
          "new_api": "RM_ZsetRangeStop",
          "old_text": null,
          "new_text": "RM_ZsetRangeStop(key)",
          "old_line_content": "    /* TODO: if (key->iter) RM_KeyIteratorStop(kp); */",
          "new_line_content": "    RM_ZsetRangeStop(key);",
          "content_same": false
        },
        {
          "line": 3948,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(RedisModuleCtx))",
          "old_line_content": "    RedisModuleCtx ctxtemplate = REDISMODULE_CTX_INIT;",
          "new_line_content": "    io->ctx = zmalloc(sizeof(RedisModuleCtx));",
          "content_same": false
        },
        {
          "line": 1930,
          "old_api": null,
          "new_api": "stringObjectLen",
          "old_text": null,
          "new_text": "stringObjectLen(key->value)",
          "old_line_content": "    switch(key->value->type) {",
          "new_line_content": "    case OBJ_STRING: return stringObjectLen(key->value);",
          "content_same": false
        },
        {
          "line": 3983,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(levelstr,\"debug\")",
          "old_line_content": "",
          "new_line_content": "    if (!strcasecmp(levelstr,\"debug\")) level = LL_DEBUG;",
          "content_same": false
        },
        {
          "line": 3991,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(msg, sizeof(msg),\"<%s> \", module? module->name: \"module\")",
          "old_line_content": "",
          "new_line_content": "    name_len = snprintf(msg, sizeof(msg),\"<%s> \", module? module->name: \"module\");",
          "content_same": false
        },
        {
          "line": 1946,
          "old_api": null,
          "new_api": "dbDelete",
          "old_text": null,
          "new_text": "dbDelete(key->db,key->key)",
          "old_line_content": "    if (key->value) {",
          "new_line_content": "        dbDelete(key->db,key->key);",
          "content_same": false
        },
        {
          "line": 1960,
          "old_api": null,
          "new_api": "dbAsyncDelete",
          "old_text": null,
          "new_text": "dbAsyncDelete(key->db,key->key)",
          "old_line_content": "    if (key->value) {",
          "new_line_content": "        dbAsyncDelete(key->db,key->key);",
          "content_same": false
        },
        {
          "line": 4016,
          "old_api": null,
          "new_api": "va_start",
          "old_text": null,
          "new_text": "va_start(ap, fmt)",
          "old_line_content": "    va_list ap;",
          "new_line_content": "    va_start(ap, fmt);",
          "content_same": false
        },
        {
          "line": 1970,
          "old_api": null,
          "new_api": "getExpire",
          "old_text": null,
          "new_text": "getExpire(key->db,key->key)",
          "old_line_content": "mstime_t RM_GetExpire(RedisModuleKey *key) {",
          "new_line_content": "    mstime_t expire = getExpire(key->db,key->key);",
          "content_same": false
        },
        {
          "line": 1972,
          "old_api": null,
          "new_api": "mstime",
          "old_text": null,
          "new_text": "mstime()",
          "old_line_content": "    if (expire == -1 || key->value == NULL) return -1;",
          "new_line_content": "    expire -= mstime();",
          "content_same": false
        },
        {
          "line": 4028,
          "old_api": null,
          "new_api": "va_start",
          "old_text": null,
          "new_text": "va_start(ap, fmt)",
          "old_line_content": "    va_list ap;",
          "new_line_content": "    va_start(ap, fmt);",
          "content_same": false
        },
        {
          "line": 1989,
          "old_api": null,
          "new_api": "mstime",
          "old_text": null,
          "new_text": "mstime()",
          "old_line_content": "    if (expire != REDISMODULE_NO_EXPIRE) {",
          "new_line_content": "        expire += mstime();",
          "content_same": false
        },
        {
          "line": 4039,
          "old_api": null,
          "new_api": "_serverAssert",
          "old_text": null,
          "new_text": "_serverAssert(estr, file, line)",
          "old_line_content": "void RM__Assert(const char *estr, const char *file, int line) {",
          "new_line_content": "    _serverAssert(estr, file, line);",
          "content_same": false
        },
        {
          "line": 1992,
          "old_api": null,
          "new_api": "removeExpire",
          "old_text": null,
          "new_text": "removeExpire(key->db,key->key)",
          "old_line_content": "    } else {",
          "new_line_content": "        removeExpire(key->db,key->key);",
          "content_same": false
        },
        {
          "line": 4047,
          "old_api": null,
          "new_api": "latencyAddSample",
          "old_text": null,
          "new_text": "latencyAddSample(event, latency)",
          "old_line_content": "    if (latency >= server.latency_monitor_threshold)",
          "new_line_content": "        latencyAddSample(event, latency);",
          "content_same": false
        },
        {
          "line": 2002,
          "old_api": null,
          "new_api": "stopAppendOnly",
          "old_text": null,
          "new_text": "stopAppendOnly()",
          "old_line_content": "void RM_ResetDataset(int restart_aof, int async) {",
          "new_line_content": "    if (restart_aof && server.aof_state != AOF_OFF) stopAppendOnly();",
          "content_same": false
        },
        {
          "line": 2009,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(ctx->client->db->dict)",
          "old_line_content": "unsigned long long RM_DbSize(RedisModuleCtx *ctx) {",
          "new_line_content": "    return dictSize(ctx->client->db->dict);",
          "content_same": false
        },
        {
          "line": 4059,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(el)",
          "old_line_content": "void moduleBlockedClientPipeReadable(aeEventLoop *el, int fd, void *privdata, int mask) {",
          "new_line_content": "    UNUSED(el);",
          "content_same": false
        },
        {
          "line": 2014,
          "old_api": null,
          "new_api": "dbRandomKey",
          "old_text": null,
          "new_text": "dbRandomKey(ctx->client->db)",
          "old_line_content": "RedisModuleString *RM_RandomKey(RedisModuleCtx *ctx) {",
          "new_line_content": "    robj *key = dbRandomKey(ctx->client->db);",
          "content_same": false
        },
        {
          "line": 2029,
          "old_api": null,
          "new_api": "RM_DeleteKey",
          "old_text": null,
          "new_text": "RM_DeleteKey(key)",
          "old_line_content": "    if (!(key->mode & REDISMODULE_WRITE) || key->iter) return REDISMODULE_ERR;",
          "new_line_content": "    RM_DeleteKey(key);",
          "content_same": false
        },
        {
          "line": 4086,
          "old_api": null,
          "new_api": "disconnect_callback",
          "old_text": null,
          "new_text": "bc->disconnect_callback(&ctx,bc)",
          "old_line_content": "        ctx.client = bc->client;",
          "new_line_content": "        bc->disconnect_callback(&ctx,bc);",
          "content_same": false
        },
        {
          "line": 4095,
          "old_api": null,
          "new_api": "resetClient",
          "old_text": null,
          "new_text": "resetClient(c)",
          "old_line_content": "     * vector from callbacks. */",
          "new_line_content": "    resetClient(c);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 4096,
          "old_api": "resetClient",
          "new_api": null,
          "old_text": "resetClient(c)",
          "new_text": null,
          "old_line_content": "    resetClient(c);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4123,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(RedisModuleBlockedClient))",
          "new_text": null,
          "old_line_content": "    c->bpop.module_blocked_handle = zmalloc(sizeof(RedisModuleBlockedClient));",
          "new_line_content": "    RedisModuleBlockedClient *bc = c->bpop.module_blocked_handle;",
          "content_same": false
        },
        {
          "line": 2081,
          "old_api": "dbUnshareStringValue",
          "new_api": null,
          "old_text": "dbUnshareStringValue(key->db, key->key, key->value)",
          "new_text": null,
          "old_line_content": "        key->value = dbUnshareStringValue(key->db, key->key, key->value);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4131,
          "old_api": "mstime",
          "new_api": null,
          "old_text": "mstime()",
          "new_text": null,
          "old_line_content": "    mstime_t timeout = timeout_ms ? (mstime()+timeout_ms) : 0;",
          "new_line_content": "    bc->client = (islua || ismulti) ? NULL : c;",
          "content_same": false
        },
        {
          "line": 2083,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(key->value->ptr)",
          "new_text": null,
          "old_line_content": "    *len = sdslen(key->value->ptr);",
          "new_line_content": "    return key->value->ptr;",
          "content_same": false
        },
        {
          "line": 4139,
          "old_api": "createClient",
          "new_api": null,
          "old_text": "createClient(NULL)",
          "new_text": null,
          "old_line_content": "    bc->reply_client = createClient(NULL);",
          "new_line_content": "    bc->reply_client->flags |= CLIENT_MODULE;",
          "content_same": false
        },
        {
          "line": 4148,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c, islua ?\n            \"Blocking module command called from Lua script\" :\n            \"Blocking module command called from transaction\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c, islua ?",
          "new_line_content": "            \"Blocking module command called from Lua script\" :",
          "content_same": false
        },
        {
          "line": 4153,
          "old_api": "blockForKeys",
          "new_api": null,
          "old_text": "blockForKeys(c,BLOCKED_MODULE,keys,numkeys,timeout,NULL,NULL)",
          "new_text": null,
          "old_line_content": "            blockForKeys(c,BLOCKED_MODULE,keys,numkeys,timeout,NULL,NULL);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 4155,
          "old_api": "blockClient",
          "new_api": null,
          "old_text": "blockClient(c,BLOCKED_MODULE)",
          "new_text": null,
          "old_line_content": "            blockClient(c,BLOCKED_MODULE);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6204,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "    while((ln = listNext(&li))) {",
          "new_line_content": "        el = ln->value;",
          "content_same": false
        },
        {
          "line": 2111,
          "old_api": "setKey",
          "new_api": null,
          "old_text": "setKey(key->db,key->key,o)",
          "new_text": null,
          "old_line_content": "        setKey(key->db,key->key,o);",
          "new_line_content": "        key->value = o;",
          "content_same": false
        },
        {
          "line": 2113,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(o)",
          "new_text": null,
          "old_line_content": "        decrRefCount(o);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 2117,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(key->value->ptr)",
          "new_text": null,
          "old_line_content": "        size_t curlen = sdslen(key->value->ptr);",
          "new_line_content": "        if (newlen > curlen) {",
          "content_same": false
        },
        {
          "line": 6214,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(el)",
          "new_text": null,
          "old_line_content": "            zfree(el);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 2119,
          "old_api": "sdsgrowzero",
          "new_api": null,
          "old_text": "sdsgrowzero(key->value->ptr,newlen)",
          "new_text": null,
          "old_line_content": "            key->value->ptr = sdsgrowzero(key->value->ptr,newlen);",
          "new_line_content": "        } else if (newlen < curlen) {",
          "content_same": false
        },
        {
          "line": 2121,
          "old_api": "sdsrange",
          "new_api": null,
          "old_text": "sdsrange(key->value->ptr,0,newlen-1)",
          "new_text": null,
          "old_line_content": "            sdsrange(key->value->ptr,0,newlen-1);",
          "new_line_content": "            /* If the string is too wasteful, reallocate it. */",
          "content_same": false
        },
        {
          "line": 2124,
          "old_api": "sdsRemoveFreeSpace",
          "new_api": null,
          "old_text": "sdsRemoveFreeSpace(key->value->ptr)",
          "new_text": null,
          "old_line_content": "                key->value->ptr = sdsRemoveFreeSpace(key->value->ptr);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6222,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*el))",
          "new_text": null,
          "old_line_content": "    el = zmalloc(sizeof(*el));",
          "new_line_content": "    el->module = ctx->module;",
          "content_same": false
        },
        {
          "line": 6226,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(RedisModule_EventListeners,el)",
          "new_text": null,
          "old_line_content": "    listAddNodeTail(RedisModule_EventListeners,el);",
          "new_line_content": "    return REDISMODULE_OK;",
          "content_same": false
        },
        {
          "line": 4181,
          "old_api": "reply_callback",
          "new_api": null,
          "old_text": "bc->reply_callback(&ctx,(void**)c->argv,c->argc)",
          "new_text": null,
          "old_line_content": "    if (bc->reply_callback(&ctx,(void**)c->argv,c->argc) == REDISMODULE_OK)",
          "new_line_content": "        served = 1;",
          "content_same": false
        },
        {
          "line": 4183,
          "old_api": "moduleFreeContext",
          "new_api": null,
          "old_text": "moduleFreeContext(&ctx)",
          "new_text": null,
          "old_line_content": "    moduleFreeContext(&ctx);",
          "new_line_content": "    return served;",
          "content_same": false
        },
        {
          "line": 2142,
          "old_api": "listTypePush",
          "new_api": null,
          "old_text": "listTypePush(key->value, ele,\n        (where == REDISMODULE_LIST_HEAD) ? QUICKLIST_HEAD : QUICKLIST_TAIL)",
          "new_text": null,
          "old_line_content": "    listTypePush(key->value, ele,",
          "new_line_content": "        (where == REDISMODULE_LIST_HEAD) ? QUICKLIST_HEAD : QUICKLIST_TAIL);",
          "content_same": false
        },
        {
          "line": 6241,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(RedisModule_EventListeners)",
          "new_text": null,
          "old_line_content": "    if (listLength(RedisModule_EventListeners) == 0) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6246,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "    while((ln = listNext(&li))) {",
          "new_line_content": "        RedisModuleEventListener *el = ln->value;",
          "content_same": false
        },
        {
          "line": 4204,
          "old_api": "moduleBlockClient",
          "new_api": null,
          "old_text": "moduleBlockClient(ctx,reply_callback,timeout_callback,free_privdata,timeout_ms, NULL,0,NULL)",
          "new_text": null,
          "old_line_content": "    return moduleBlockClient(ctx,reply_callback,timeout_callback,free_privdata,timeout_ms, NULL,0,NULL);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2158,
          "old_api": "listTypePop",
          "new_api": null,
          "old_text": "listTypePop(key->value,\n        (where == REDISMODULE_LIST_HEAD) ? QUICKLIST_HEAD : QUICKLIST_TAIL)",
          "new_text": null,
          "old_line_content": "    robj *ele = listTypePop(key->value,",
          "new_line_content": "        (where == REDISMODULE_LIST_HEAD) ? QUICKLIST_HEAD : QUICKLIST_TAIL);",
          "content_same": false
        },
        {
          "line": 6255,
          "old_api": "createClient",
          "new_api": null,
          "old_text": "createClient(NULL)",
          "new_text": null,
          "old_line_content": "                ctx.client = createClient(NULL);",
          "new_line_content": "                ctx.client->flags |= CLIENT_MODULE;",
          "content_same": false
        },
        {
          "line": 2163,
          "old_api": "autoMemoryAdd",
          "new_api": null,
          "old_text": "autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,decoded)",
          "new_text": null,
          "old_line_content": "    autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,decoded);",
          "new_line_content": "    return decoded;",
          "content_same": false
        },
        {
          "line": 6268,
          "old_api": "selectDb",
          "new_api": null,
          "old_text": "selectDb(ctx.client, 0)",
          "new_text": null,
          "old_line_content": "            selectDb(ctx.client, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6272,
          "old_api": "modulePopulateClientInfoStructure",
          "new_api": null,
          "old_text": "modulePopulateClientInfoStructure(&civ1,data,\n                                                  el->event.dataver)",
          "new_text": null,
          "old_line_content": "                modulePopulateClientInfoStructure(&civ1,data,",
          "new_line_content": "                                                  el->event.dataver);",
          "content_same": false
        },
        {
          "line": 6276,
          "old_api": "modulePopulateReplicationInfoStructure",
          "new_api": null,
          "old_text": "modulePopulateReplicationInfoStructure(&riv1,el->event.dataver)",
          "new_text": null,
          "old_line_content": "                modulePopulateReplicationInfoStructure(&riv1,el->event.dataver);",
          "new_line_content": "                moduledata = &riv1;",
          "content_same": false
        },
        {
          "line": 6282,
          "old_api": "selectDb",
          "new_api": null,
          "old_text": "selectDb(ctx.client, fi->dbnum)",
          "new_text": null,
          "old_line_content": "                    selectDb(ctx.client, fi->dbnum);",
          "new_line_content": "            } else if (eid == REDISMODULE_EVENT_MODULE_CHANGE) {",
          "content_same": false
        },
        {
          "line": 6299,
          "old_api": "callback",
          "new_api": null,
          "old_text": "el->callback(&ctx,el->event,subid,moduledata)",
          "new_text": null,
          "old_line_content": "            el->callback(&ctx,el->event,subid,moduledata);",
          "new_line_content": "            el->module->in_hook--;",
          "content_same": false
        },
        {
          "line": 6304,
          "old_api": "moduleFreeContext",
          "new_api": null,
          "old_text": "moduleFreeContext(&ctx)",
          "new_text": null,
          "old_line_content": "            moduleFreeContext(&ctx);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4258,
          "old_api": "moduleBlockClient",
          "new_api": null,
          "old_text": "moduleBlockClient(ctx,reply_callback,timeout_callback,free_privdata,timeout_ms, keys,numkeys,privdata)",
          "new_text": null,
          "old_line_content": "    return moduleBlockClient(ctx,reply_callback,timeout_callback,free_privdata,timeout_ms, keys,numkeys,privdata);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4266,
          "old_api": "signalKeyAsReady",
          "new_api": null,
          "old_text": "signalKeyAsReady(ctx->client->db, key)",
          "new_text": null,
          "old_line_content": "    signalKeyAsReady(ctx->client->db, key);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6315,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(RedisModule_EventListeners,&li)",
          "new_text": null,
          "old_line_content": "    listRewind(RedisModule_EventListeners,&li);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6317,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "    while((ln = listNext(&li))) {",
          "new_line_content": "        el = ln->value;",
          "content_same": false
        },
        {
          "line": 2223,
          "old_api": "zsetAdd",
          "new_api": null,
          "old_text": "zsetAdd(key->value,score,ele->ptr,&flags,NULL)",
          "new_text": null,
          "old_line_content": "    if (zsetAdd(key->value,score,ele->ptr,&flags,NULL) == 0) {",
          "new_line_content": "        if (flagsptr) *flagsptr = 0;",
          "content_same": false
        },
        {
          "line": 4271,
          "old_api": "pthread_mutex_lock",
          "new_api": null,
          "old_text": "pthread_mutex_lock(&moduleUnblockedClientsMutex)",
          "new_text": null,
          "old_line_content": "    pthread_mutex_lock(&moduleUnblockedClientsMutex);",
          "new_line_content": "    if (!bc->blocked_on_keys) bc->privdata = privdata;",
          "content_same": false
        },
        {
          "line": 6321,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(el)",
          "new_text": null,
          "old_line_content": "            zfree(el);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2227,
          "old_api": "RM_ZsetAddFlagsFromCoreFlags",
          "new_api": null,
          "old_text": "RM_ZsetAddFlagsFromCoreFlags(flags)",
          "new_text": null,
          "old_line_content": "    if (flagsptr) *flagsptr = RM_ZsetAddFlagsFromCoreFlags(flags);",
          "new_line_content": "    return REDISMODULE_OK;",
          "content_same": false
        },
        {
          "line": 4275,
          "old_api": "write",
          "new_api": null,
          "old_text": "write(server.module_blocked_pipe[1],\"A\",1)",
          "new_text": null,
          "old_line_content": "    if (write(server.module_blocked_pipe[1],\"A\",1) != 1) {",
          "new_line_content": "        /* Ignore the error, this is best-effort. */",
          "content_same": false
        },
        {
          "line": 4278,
          "old_api": "pthread_mutex_unlock",
          "new_api": null,
          "old_text": "pthread_mutex_unlock(&moduleUnblockedClientsMutex)",
          "new_text": null,
          "old_line_content": "    pthread_mutex_unlock(&moduleUnblockedClientsMutex);",
          "new_line_content": "    return REDISMODULE_OK;",
          "content_same": false
        },
        {
          "line": 6327,
          "old_api": "ustime",
          "new_api": null,
          "old_text": "ustime()",
          "new_text": null,
          "old_line_content": "    long long now = ustime();",
          "new_line_content": "    static long long next_event = 0;",
          "content_same": false
        },
        {
          "line": 4286,
          "old_api": "moduleUnblockClientByHandle",
          "new_api": null,
          "old_text": "moduleUnblockClientByHandle(bc,NULL)",
          "new_text": null,
          "old_line_content": "    moduleUnblockClientByHandle(bc,NULL);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6337,
          "old_api": "moduleFireServerEvent",
          "new_api": null,
          "old_text": "moduleFireServerEvent(REDISMODULE_EVENT_LOADING_PROGRESS,\n                              is_aof?\n                                REDISMODULE_SUBEVENT_LOADING_PROGRESS_AOF:\n                                REDISMODULE_SUBEVENT_LOADING_PROGRESS_RDB,\n                              &fi)",
          "new_text": null,
          "old_line_content": "        moduleFireServerEvent(REDISMODULE_EVENT_LOADING_PROGRESS,",
          "new_line_content": "                              is_aof?",
          "content_same": false
        },
        {
          "line": 2249,
          "old_api": "RM_ZsetAddFlagsToCoreFlags",
          "new_api": null,
          "old_text": "RM_ZsetAddFlagsToCoreFlags(*flagsptr)",
          "new_text": null,
          "old_line_content": "    if (flagsptr) flags = RM_ZsetAddFlagsToCoreFlags(*flagsptr);",
          "new_line_content": "    flags |= ZADD_INCR;",
          "content_same": false
        },
        {
          "line": 2251,
          "old_api": "zsetAdd",
          "new_api": null,
          "old_text": "zsetAdd(key->value,score,ele->ptr,&flags,newscore)",
          "new_text": null,
          "old_line_content": "    if (zsetAdd(key->value,score,ele->ptr,&flags,newscore) == 0) {",
          "new_line_content": "        if (flagsptr) *flagsptr = 0;",
          "content_same": false
        },
        {
          "line": 6355,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen((char*)key)",
          "new_text": null,
          "old_line_content": "    return dictGenHashFunction((unsigned char*)key, strlen((char*)key));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2260,
          "old_api": "RM_ZsetAddFlagsFromCoreFlags",
          "new_api": null,
          "old_text": "RM_ZsetAddFlagsFromCoreFlags(flags)",
          "new_text": null,
          "old_line_content": "    if (flagsptr) *flagsptr = RM_ZsetAddFlagsFromCoreFlags(flags);",
          "new_line_content": "    return REDISMODULE_OK;",
          "content_same": false
        },
        {
          "line": 6360,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(key1,key2)",
          "new_text": null,
          "old_line_content": "    return strcmp(key1,key2) == 0;",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4322,
          "old_api": "moduleBlockedClientTimedOut",
          "new_api": null,
          "old_text": "moduleBlockedClientTimedOut(bc->client)",
          "new_text": null,
          "old_line_content": "        if (bc->client) moduleBlockedClientTimedOut(bc->client);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4324,
          "old_api": "moduleUnblockClientByHandle",
          "new_api": null,
          "old_text": "moduleUnblockClientByHandle(bc,privdata)",
          "new_text": null,
          "old_line_content": "    moduleUnblockClientByHandle(bc,privdata);",
          "new_line_content": "    return REDISMODULE_OK;",
          "content_same": false
        },
        {
          "line": 6373,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(server.moduleapi, (char*)funcname, funcptr)",
          "new_text": null,
          "old_line_content": "    return dictAdd(server.moduleapi, (char*)funcname, funcptr);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2285,
          "old_api": "zsetDel",
          "new_api": null,
          "old_text": "zsetDel(key->value,ele->ptr)",
          "new_text": null,
          "old_line_content": "    if (key->value != NULL && zsetDel(key->value,ele->ptr)) {",
          "new_line_content": "        if (deleted) *deleted = 1;",
          "content_same": false
        },
        {
          "line": 4333,
          "old_api": "RM_UnblockClient",
          "new_api": null,
          "old_text": "RM_UnblockClient(bc,NULL)",
          "new_text": null,
          "old_line_content": "    return RM_UnblockClient(bc,NULL);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6385,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&modulesDictType,NULL)",
          "new_text": null,
          "old_line_content": "    modules = dictCreate(&modulesDictType,NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6389,
          "old_api": "createClient",
          "new_api": null,
          "old_text": "createClient(NULL)",
          "new_text": null,
          "old_line_content": "    moduleFreeContextReusedClient = createClient(NULL);",
          "new_line_content": "    moduleFreeContextReusedClient->flags |= CLIENT_MODULE;",
          "content_same": false
        },
        {
          "line": 6394,
          "old_api": "listCreate",
          "new_api": null,
          "old_text": "listCreate()",
          "new_text": null,
          "old_line_content": "    moduleCommandFilters = listCreate();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6398,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n            \"Can't create the pipe for module blocking commands: %s\",\n            strerror(errno))",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,",
          "new_line_content": "            \"Can't create the pipe for module blocking commands: %s\",",
          "content_same": false
        },
        {
          "line": 2304,
          "old_api": "zsetScore",
          "new_api": null,
          "old_text": "zsetScore(key->value,ele->ptr,score)",
          "new_text": null,
          "old_line_content": "    if (zsetScore(key->value,ele->ptr,score) == C_ERR) return REDISMODULE_ERR;",
          "new_line_content": "    return REDISMODULE_OK;",
          "content_same": false
        },
        {
          "line": 6401,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "        exit(1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6406,
          "old_api": "anetNonBlock",
          "new_api": null,
          "old_text": "anetNonBlock(NULL,server.module_blocked_pipe[1])",
          "new_text": null,
          "old_line_content": "    anetNonBlock(NULL,server.module_blocked_pipe[1]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6409,
          "old_api": "raxNew",
          "new_api": null,
          "old_text": "raxNew()",
          "new_text": null,
          "old_line_content": "    Timers = raxNew();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6412,
          "old_api": "listCreate",
          "new_api": null,
          "old_text": "listCreate()",
          "new_text": null,
          "old_line_content": "    RedisModule_EventListeners = listCreate();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4368,
          "old_api": "pthread_mutex_lock",
          "new_api": null,
          "old_text": "pthread_mutex_lock(&moduleUnblockedClientsMutex)",
          "new_text": null,
          "old_line_content": "    pthread_mutex_lock(&moduleUnblockedClientsMutex);",
          "new_line_content": "    /* Here we unblock all the pending clients blocked in modules operations",
          "content_same": false
        },
        {
          "line": 6416,
          "old_api": "pthread_mutex_lock",
          "new_api": null,
          "old_text": "pthread_mutex_lock(&moduleGIL)",
          "new_text": null,
          "old_line_content": "    pthread_mutex_lock(&moduleGIL);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2322,
          "old_api": "zslFreeLexRange",
          "new_api": null,
          "old_text": "zslFreeLexRange(&key->zlrs)",
          "new_text": null,
          "old_line_content": "        zslFreeLexRange(&key->zlrs);",
          "new_line_content": "    /* Setup sensible values so that misused iteration API calls when an",
          "content_same": false
        },
        {
          "line": 2326,
          "old_api": "zsetKeyReset",
          "new_api": null,
          "old_text": "zsetKeyReset(key)",
          "new_text": null,
          "old_line_content": "    zsetKeyReset(key);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4374,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(moduleUnblockedClients)",
          "new_text": null,
          "old_line_content": "        ln = listFirst(moduleUnblockedClients);",
          "new_line_content": "        bc = ln->value;",
          "content_same": false
        },
        {
          "line": 4378,
          "old_api": "pthread_mutex_unlock",
          "new_api": null,
          "old_text": "pthread_mutex_unlock(&moduleUnblockedClientsMutex)",
          "new_text": null,
          "old_line_content": "        pthread_mutex_unlock(&moduleUnblockedClientsMutex);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6433,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "    while((ln = listNext(&li))) {",
          "new_line_content": "        struct moduleLoadQueueEntry *loadmod = ln->value;",
          "content_same": false
        },
        {
          "line": 6435,
          "old_api": "moduleLoad",
          "new_api": null,
          "old_text": "moduleLoad(loadmod->path,(void **)loadmod->argv,loadmod->argc)",
          "new_text": null,
          "old_line_content": "        if (moduleLoad(loadmod->path,(void **)loadmod->argv,loadmod->argc)",
          "new_line_content": "            == C_ERR)",
          "content_same": false
        },
        {
          "line": 6438,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n                \"Can't load module from %s: server aborting\",\n                loadmod->path)",
          "new_text": null,
          "old_line_content": "            serverLog(LL_WARNING,",
          "new_line_content": "                \"Can't load module from %s: server aborting\",",
          "content_same": false
        },
        {
          "line": 2343,
          "old_api": "RM_ZsetRangeStop",
          "new_api": null,
          "old_text": "RM_ZsetRangeStop(key)",
          "new_text": null,
          "old_line_content": "    RM_ZsetRangeStop(key);",
          "new_line_content": "    key->ztype = REDISMODULE_ZSET_RANGE_SCORE;",
          "content_same": false
        },
        {
          "line": 6441,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "            exit(1);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4397,
          "old_api": "moduleFreeContext",
          "new_api": null,
          "old_text": "moduleFreeContext(&ctx)",
          "new_text": null,
          "old_line_content": "            moduleFreeContext(&ctx);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6452,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(module)",
          "new_text": null,
          "old_line_content": "    zfree(module);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2357,
          "old_api": "zzlLastInRange",
          "new_api": null,
          "old_text": "zzlLastInRange(key->value->ptr,zrs)",
          "new_text": null,
          "old_line_content": "                                zzlLastInRange(key->value->ptr,zrs);",
          "new_line_content": "    } else if (key->value->encoding == OBJ_ENCODING_SKIPLIST) {",
          "content_same": false
        },
        {
          "line": 4409,
          "old_api": "moduleFreeContext",
          "new_api": null,
          "old_text": "moduleFreeContext(&ctx)",
          "new_text": null,
          "old_line_content": "            moduleFreeContext(&ctx);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2362,
          "old_api": "zslLastInRange",
          "new_api": null,
          "old_text": "zslLastInRange(zsl,zrs)",
          "new_text": null,
          "old_line_content": "                                zslLastInRange(zsl,zrs);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 6457,
          "old_api": "dictGetSafeIterator",
          "new_api": null,
          "old_text": "dictGetSafeIterator(server.commands)",
          "new_text": null,
          "old_line_content": "    dictIterator *di = dictGetSafeIterator(server.commands);",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 2364,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unsupported zset encoding\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6460,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "        struct redisCommand *cmd = dictGetVal(de);",
          "new_line_content": "        if (cmd->proc == RedisModuleCommandDispatcher) {",
          "content_same": false
        },
        {
          "line": 4417,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(bc->reply_client)",
          "new_text": null,
          "old_line_content": "        freeClient(bc->reply_client);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6470,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(cp)",
          "new_text": null,
          "old_line_content": "                zfree(cp);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 4424,
          "old_api": "unblockClient",
          "new_api": null,
          "old_text": "unblockClient(c)",
          "new_text": null,
          "old_line_content": "            unblockClient(c);",
          "new_line_content": "            /* Put the client in the list of clients that need to write",
          "content_same": false
        },
        {
          "line": 6474,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4428,
          "old_api": "clientHasPendingReplies",
          "new_api": null,
          "old_text": "clientHasPendingReplies(c)",
          "new_text": null,
          "old_line_content": "            if (clientHasPendingReplies(c) &&",
          "new_line_content": "                !(c->flags & CLIENT_PENDING_WRITE))",
          "content_same": false
        },
        {
          "line": 4432,
          "old_api": "listAddNodeHead",
          "new_api": null,
          "old_text": "listAddNodeHead(server.clients_pending_write,c)",
          "new_text": null,
          "old_line_content": "                listAddNodeHead(server.clients_pending_write,c);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 2386,
          "old_api": "zsetInitScoreRange",
          "new_api": null,
          "old_text": "zsetInitScoreRange(key,min,max,minex,maxex,1)",
          "new_text": null,
          "old_line_content": "    return zsetInitScoreRange(key,min,max,minex,maxex,1);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6484,
          "old_api": "dlopen",
          "new_api": null,
          "old_text": "dlopen(path,RTLD_NOW|RTLD_LOCAL)",
          "new_text": null,
          "old_line_content": "    handle = dlopen(path,RTLD_NOW|RTLD_LOCAL);",
          "new_line_content": "    if (handle == NULL) {",
          "content_same": false
        },
        {
          "line": 6486,
          "old_api": "dlerror",
          "new_api": null,
          "old_text": "dlerror()",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING, \"Module %s failed to load: %s\", path, dlerror());",
          "new_line_content": "        return C_ERR;",
          "content_same": false
        },
        {
          "line": 2392,
          "old_api": "zsetInitScoreRange",
          "new_api": null,
          "old_text": "zsetInitScoreRange(key,min,max,minex,maxex,0)",
          "new_text": null,
          "old_line_content": "    return zsetInitScoreRange(key,min,max,minex,maxex,0);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4440,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(bc)",
          "new_text": null,
          "old_line_content": "        zfree(bc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6489,
          "old_api": "dlsym",
          "new_api": null,
          "old_text": "dlsym(handle,\"RedisModule_OnLoad\")",
          "new_text": null,
          "old_line_content": "    onload = (int (*)(void *, void **, int))(unsigned long) dlsym(handle,\"RedisModule_OnLoad\");",
          "new_line_content": "    if (onload == NULL) {",
          "content_same": false
        },
        {
          "line": 4443,
          "old_api": "pthread_mutex_lock",
          "new_api": null,
          "old_text": "pthread_mutex_lock(&moduleUnblockedClientsMutex)",
          "new_text": null,
          "old_line_content": "        pthread_mutex_lock(&moduleUnblockedClientsMutex);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6492,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n            \"Module %s does not export RedisModule_OnLoad() \"\n            \"symbol. Module not loaded.\",path)",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,",
          "new_line_content": "            \"Module %s does not export RedisModule_OnLoad() \"",
          "content_same": false
        },
        {
          "line": 4445,
          "old_api": "pthread_mutex_unlock",
          "new_api": null,
          "old_text": "pthread_mutex_unlock(&moduleUnblockedClientsMutex)",
          "new_text": null,
          "old_line_content": "    pthread_mutex_unlock(&moduleUnblockedClientsMutex);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6497,
          "old_api": "onload",
          "new_api": null,
          "old_text": "onload((void*)&ctx,module_argv,module_argc)",
          "new_text": null,
          "old_line_content": "    if (onload((void*)&ctx,module_argv,module_argc) == REDISMODULE_ERR) {",
          "new_line_content": "        if (ctx.module) {",
          "content_same": false
        },
        {
          "line": 6502,
          "old_api": "moduleFreeModuleStructure",
          "new_api": null,
          "old_text": "moduleFreeModuleStructure(ctx.module)",
          "new_text": null,
          "old_line_content": "            moduleFreeModuleStructure(ctx.module);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2407,
          "old_api": "RM_ZsetRangeStop",
          "new_api": null,
          "old_text": "RM_ZsetRangeStop(key)",
          "new_text": null,
          "old_line_content": "    RM_ZsetRangeStop(key);",
          "new_line_content": "    key->zer = 0;",
          "content_same": false
        },
        {
          "line": 6505,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n            \"Module %s initialization failed. Module not loaded\",path)",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,",
          "new_line_content": "            \"Module %s initialization failed. Module not loaded\",path);",
          "content_same": false
        },
        {
          "line": 4460,
          "old_api": "moduleFreeContext",
          "new_api": null,
          "old_text": "moduleFreeContext(&ctx)",
          "new_text": null,
          "old_line_content": "    moduleFreeContext(&ctx);",
          "new_line_content": "    /* For timeout events, we do not want to call the disconnect callback,",
          "content_same": false
        },
        {
          "line": 2413,
          "old_api": "zslParseLexRange",
          "new_api": null,
          "old_text": "zslParseLexRange(min, max, zlrs)",
          "new_text": null,
          "old_line_content": "    if (zslParseLexRange(min, max, zlrs) == C_ERR) return REDISMODULE_ERR;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6511,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(modules,ctx.module->name,ctx.module)",
          "new_text": null,
          "old_line_content": "    dictAdd(modules,ctx.module->name,ctx.module);",
          "new_line_content": "    ctx.module->blocked_clients = 0;",
          "content_same": false
        },
        {
          "line": 6514,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\"Module '%s' loaded from %s\",ctx.module->name,path)",
          "new_text": null,
          "old_line_content": "    serverLog(LL_NOTICE,\"Module '%s' loaded from %s\",ctx.module->name,path);",
          "new_line_content": "    /* Fire the loaded modules event. */",
          "content_same": false
        },
        {
          "line": 6516,
          "old_api": "moduleFireServerEvent",
          "new_api": null,
          "old_text": "moduleFireServerEvent(REDISMODULE_EVENT_MODULE_CHANGE,\n                          REDISMODULE_SUBEVENT_MODULE_LOADED,\n                          ctx.module)",
          "new_text": null,
          "old_line_content": "    moduleFireServerEvent(REDISMODULE_EVENT_MODULE_CHANGE,",
          "new_line_content": "                          REDISMODULE_SUBEVENT_MODULE_LOADED,",
          "content_same": false
        },
        {
          "line": 2421,
          "old_api": "zzlLastInLexRange",
          "new_api": null,
          "old_text": "zzlLastInLexRange(key->value->ptr,zlrs)",
          "new_text": null,
          "old_line_content": "                                zzlLastInLexRange(key->value->ptr,zlrs);",
          "new_line_content": "    } else if (key->value->encoding == OBJ_ENCODING_SKIPLIST) {",
          "content_same": false
        },
        {
          "line": 6520,
          "old_api": "moduleFreeContext",
          "new_api": null,
          "old_text": "moduleFreeContext(&ctx)",
          "new_text": null,
          "old_line_content": "    moduleFreeContext(&ctx);",
          "new_line_content": "    return C_OK;",
          "content_same": false
        },
        {
          "line": 2426,
          "old_api": "zslLastInLexRange",
          "new_api": null,
          "old_text": "zslLastInLexRange(zsl,zlrs)",
          "new_text": null,
          "old_line_content": "                                zslLastInLexRange(zsl,zlrs);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 2428,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unsupported zset encoding\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6532,
          "old_api": "dictFetchValue",
          "new_api": null,
          "old_text": "dictFetchValue(modules,name)",
          "new_text": null,
          "old_line_content": "    struct RedisModule *module = dictFetchValue(modules,name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6537,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(module->types)",
          "new_text": null,
          "old_line_content": "    } else if (listLength(module->types)) {",
          "new_line_content": "        errno = EBUSY;",
          "content_same": false
        },
        {
          "line": 6540,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(module->usedby)",
          "new_text": null,
          "old_line_content": "    } else if (listLength(module->usedby)) {",
          "new_line_content": "        errno = EPERM;",
          "content_same": false
        },
        {
          "line": 2448,
          "old_api": "zsetInitLexRange",
          "new_api": null,
          "old_text": "zsetInitLexRange(key,min,max,1)",
          "new_text": null,
          "old_line_content": "    return zsetInitLexRange(key,min,max,1);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2454,
          "old_api": "zsetInitLexRange",
          "new_api": null,
          "old_text": "zsetInitLexRange(key,min,max,0)",
          "new_text": null,
          "old_line_content": "    return zsetInitLexRange(key,min,max,0);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6550,
          "old_api": "dlsym",
          "new_api": null,
          "old_text": "dlsym(module->handle, \"RedisModule_OnUnload\")",
          "new_text": null,
          "old_line_content": "    onunload = (int (*)(void *))(unsigned long) dlsym(module->handle, \"RedisModule_OnUnload\");",
          "new_line_content": "    if (onunload) {",
          "content_same": false
        },
        {
          "line": 6556,
          "old_api": "moduleFreeContext",
          "new_api": null,
          "old_text": "moduleFreeContext(&ctx)",
          "new_text": null,
          "old_line_content": "        moduleFreeContext(&ctx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6559,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"Module %s OnUnload failed.  Unload canceled.\", name)",
          "new_text": null,
          "old_line_content": "            serverLog(LL_WARNING, \"Module %s OnUnload failed.  Unload canceled.\", name);",
          "new_line_content": "            errno = ECANCELED;",
          "content_same": false
        },
        {
          "line": 2467,
          "old_api": "ziplistGetObject",
          "new_api": null,
          "old_text": "ziplistGetObject(eptr)",
          "new_text": null,
          "old_line_content": "        sds ele = ziplistGetObject(eptr);",
          "new_line_content": "        if (score) {",
          "content_same": false
        },
        {
          "line": 2470,
          "old_api": "zzlGetScore",
          "new_api": null,
          "old_text": "zzlGetScore(sptr)",
          "new_text": null,
          "old_line_content": "            *score = zzlGetScore(sptr);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2472,
          "old_api": "createObject",
          "new_api": null,
          "old_text": "createObject(OBJ_STRING,ele)",
          "new_text": null,
          "old_line_content": "        str = createObject(OBJ_STRING,ele);",
          "new_line_content": "    } else if (key->value->encoding == OBJ_ENCODING_SKIPLIST) {",
          "content_same": false
        },
        {
          "line": 6568,
          "old_api": "moduleUnregisterFilters",
          "new_api": null,
          "old_text": "moduleUnregisterFilters(module)",
          "new_text": null,
          "old_line_content": "    moduleUnregisterFilters(module);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2476,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(ln->ele)",
          "new_text": null,
          "old_line_content": "        str = createStringObject(ln->ele,sdslen(ln->ele));",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 6572,
          "old_api": "moduleUnsubscribeAllServerEvents",
          "new_api": null,
          "old_text": "moduleUnsubscribeAllServerEvents(module)",
          "new_text": null,
          "old_line_content": "    moduleUnsubscribeAllServerEvents(module);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2478,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unsupported zset encoding\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2480,
          "old_api": "autoMemoryAdd",
          "new_api": null,
          "old_text": "autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,str)",
          "new_text": null,
          "old_line_content": "    autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,str);",
          "new_line_content": "    return str;",
          "content_same": false
        },
        {
          "line": 4529,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*ctx))",
          "new_text": null,
          "old_line_content": "    RedisModuleCtx *ctx = zmalloc(sizeof(*ctx));",
          "new_line_content": "    RedisModuleCtx empty = REDISMODULE_CTX_INIT;",
          "content_same": false
        },
        {
          "line": 6576,
          "old_api": "dlerror",
          "new_api": null,
          "old_text": "dlerror()",
          "new_text": null,
          "old_line_content": "        char *error = dlerror();",
          "new_line_content": "        if (error == NULL) error = \"Unknown error\";",
          "content_same": false
        },
        {
          "line": 4531,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(ctx,&empty,sizeof(empty))",
          "new_text": null,
          "old_line_content": "    memcpy(ctx,&empty,sizeof(empty));",
          "new_line_content": "    if (bc) {",
          "content_same": false
        },
        {
          "line": 6578,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"Error when trying to close the %s module: %s\",\n            module->name, error)",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,\"Error when trying to close the %s module: %s\",",
          "new_line_content": "            module->name, error);",
          "content_same": false
        },
        {
          "line": 6583,
          "old_api": "moduleFireServerEvent",
          "new_api": null,
          "old_text": "moduleFireServerEvent(REDISMODULE_EVENT_MODULE_CHANGE,\n                          REDISMODULE_SUBEVENT_MODULE_UNLOADED,\n                          module)",
          "new_text": null,
          "old_line_content": "    moduleFireServerEvent(REDISMODULE_EVENT_MODULE_CHANGE,",
          "new_line_content": "                          REDISMODULE_SUBEVENT_MODULE_UNLOADED,",
          "content_same": false
        },
        {
          "line": 4541,
          "old_api": "createClient",
          "new_api": null,
          "old_text": "createClient(NULL)",
          "new_text": null,
          "old_line_content": "    ctx->client = createClient(NULL);",
          "new_line_content": "    if (bc) {",
          "content_same": false
        },
        {
          "line": 6589,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(modules,module->name)",
          "new_text": null,
          "old_line_content": "    dictDelete(modules,module->name);",
          "new_line_content": "    module->name = NULL; /* The name was already freed by dictDelete(). */",
          "content_same": false
        },
        {
          "line": 2495,
          "old_api": "ziplistNext",
          "new_api": null,
          "old_text": "ziplistNext(zl,next)",
          "new_text": null,
          "old_line_content": "        if (next) next = ziplistNext(zl,next); /* Skip score. */",
          "new_line_content": "        if (next == NULL) {",
          "content_same": false
        },
        {
          "line": 4543,
          "old_api": "selectDb",
          "new_api": null,
          "old_text": "selectDb(ctx->client,bc->dbid)",
          "new_text": null,
          "old_line_content": "        selectDb(ctx->client,bc->dbid);",
          "new_line_content": "        if (bc->client) ctx->client->id = bc->client->id;",
          "content_same": false
        },
        {
          "line": 6591,
          "old_api": "moduleFreeModuleStructure",
          "new_api": null,
          "old_text": "moduleFreeModuleStructure(module)",
          "new_text": null,
          "old_line_content": "    moduleFreeModuleStructure(module);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6599,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(modules)",
          "new_text": null,
          "old_line_content": "    dictIterator *di = dictGetIterator(modules);",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 4552,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(ctx)",
          "new_text": null,
          "old_line_content": "    zfree(ctx);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2507,
          "old_api": "zslValueLteMax",
          "new_api": null,
          "old_text": "zslValueLteMax(score,&key->zrs)",
          "new_text": null,
          "old_line_content": "                if (!zslValueLteMax(score,&key->zrs)) {",
          "new_line_content": "                    key->zer = 1;",
          "content_same": false
        },
        {
          "line": 4560,
          "old_api": "moduleAcquireGIL",
          "new_api": null,
          "old_text": "moduleAcquireGIL()",
          "new_text": null,
          "old_line_content": "    moduleAcquireGIL();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2513,
          "old_api": "zzlLexValueLteMax",
          "new_api": null,
          "old_text": "zzlLexValueLteMax(next,&key->zlrs)",
          "new_text": null,
          "old_line_content": "                if (!zzlLexValueLteMax(next,&key->zlrs)) {",
          "new_line_content": "                    key->zer = 1;",
          "content_same": false
        },
        {
          "line": 6610,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c,module->ver)",
          "new_text": null,
          "old_line_content": "        addReplyLongLong(c,module->ver);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6612,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4566,
          "old_api": "moduleReleaseGIL",
          "new_api": null,
          "old_text": "moduleReleaseGIL()",
          "new_text": null,
          "old_line_content": "    moduleReleaseGIL();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4570,
          "old_api": "pthread_mutex_lock",
          "new_api": null,
          "old_text": "pthread_mutex_lock(&moduleGIL)",
          "new_text": null,
          "old_line_content": "    pthread_mutex_lock(&moduleGIL);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4574,
          "old_api": "pthread_mutex_unlock",
          "new_api": null,
          "old_text": "pthread_mutex_unlock(&moduleGIL)",
          "new_text": null,
          "old_line_content": "    pthread_mutex_unlock(&moduleGIL);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6622,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "    while((ln = listNext(&li))) {",
          "new_line_content": "        RedisModule *module = ln->value;",
          "content_same": false
        },
        {
          "line": 6624,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(output,module->name)",
          "new_text": null,
          "old_line_content": "        output = sdscat(output,module->name);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2529,
          "old_api": "zslValueLteMax",
          "new_api": null,
          "old_text": "zslValueLteMax(next->score,&key->zrs)",
          "new_text": null,
          "old_line_content": "                !zslValueLteMax(next->score,&key->zrs))",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 6627,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(output,\"]\")",
          "new_text": null,
          "old_line_content": "    output = sdscat(output,\"]\");",
          "new_line_content": "    return output;",
          "content_same": false
        },
        {
          "line": 2534,
          "old_api": "zslLexValueLteMax",
          "new_api": null,
          "old_text": "zslLexValueLteMax(next->ele,&key->zlrs)",
          "new_text": null,
          "old_line_content": "                if (!zslLexValueLteMax(next->ele,&key->zlrs)) {",
          "new_line_content": "                    key->zer = 1;",
          "content_same": false
        },
        {
          "line": 6633,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"[\")",
          "new_text": null,
          "old_line_content": "    sds output = sdsnew(\"[\");",
          "new_line_content": "    if (module->options & REDISMODULE_OPTIONS_HANDLE_IO_ERRORS)",
          "content_same": false
        },
        {
          "line": 6637,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(output,\"]\")",
          "new_text": null,
          "old_line_content": "    output = sdscat(output,\"]\");",
          "new_line_content": "    return output;",
          "content_same": false
        },
        {
          "line": 2543,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unsupported zset encoding\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6648,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(modules)",
          "new_text": null,
          "old_line_content": "    dictIterator *di = dictGetIterator(modules);",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 6653,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "        struct RedisModule *module = dictGetVal(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2558,
          "old_api": "ziplistPrev",
          "new_api": null,
          "old_text": "ziplistPrev(zl,prev)",
          "new_text": null,
          "old_line_content": "        if (prev) prev = ziplistPrev(zl,prev); /* Back to previous ele. */",
          "new_line_content": "        if (prev == NULL) {",
          "content_same": false
        },
        {
          "line": 6658,
          "old_api": "sdscatfmt",
          "new_api": null,
          "old_text": "sdscatfmt(info,\n            \"module:name=%S,ver=%i,api=%i,filters=%i,\"\n            \"usedby=%S,using=%S,options=%S\\r\\n\",\n                name, module->ver, module->apiver,\n                (int)listLength(module->filters), usedby, using, options)",
          "new_text": null,
          "old_line_content": "        info = sdscatfmt(info,",
          "new_line_content": "            \"module:name=%S,ver=%i,api=%i,filters=%i,\"",
          "content_same": false
        },
        {
          "line": 6665,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(options)",
          "new_text": null,
          "old_line_content": "        sdsfree(options);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2570,
          "old_api": "zslValueGteMin",
          "new_api": null,
          "old_text": "zslValueGteMin(score,&key->zrs)",
          "new_text": null,
          "old_line_content": "                if (!zslValueGteMin(score,&key->zrs)) {",
          "new_line_content": "                    key->zer = 1;",
          "content_same": false
        },
        {
          "line": 6667,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "    return info;",
          "content_same": false
        },
        {
          "line": 2576,
          "old_api": "zzlLexValueGteMin",
          "new_api": null,
          "old_text": "zzlLexValueGteMin(prev,&key->zlrs)",
          "new_text": null,
          "old_line_content": "                if (!zzlLexValueGteMin(prev,&key->zlrs)) {",
          "new_line_content": "                    key->zer = 1;",
          "content_same": false
        },
        {
          "line": 6676,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(subcmd,\"help\")",
          "new_text": null,
          "old_line_content": "    if (c->argc == 2 && !strcasecmp(subcmd,\"help\")) {",
          "new_line_content": "        const char *help[] = {",
          "content_same": false
        },
        {
          "line": 4632,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*sub))",
          "new_text": null,
          "old_line_content": "    RedisModuleKeyspaceSubscriber *sub = zmalloc(sizeof(*sub));",
          "new_line_content": "    sub->module = ctx->module;",
          "content_same": false
        },
        {
          "line": 6683,
          "old_api": "addReplyHelp",
          "new_api": null,
          "old_text": "addReplyHelp(c, help)",
          "new_text": null,
          "old_line_content": "        addReplyHelp(c, help);",
          "new_line_content": "    } else",
          "content_same": false
        },
        {
          "line": 6685,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(subcmd,\"load\")",
          "new_text": null,
          "old_line_content": "    if (!strcasecmp(subcmd,\"load\") && c->argc >= 3) {",
          "new_line_content": "        robj **argv = NULL;",
          "content_same": false
        },
        {
          "line": 4638,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(moduleKeyspaceSubscribers, sub)",
          "new_text": null,
          "old_line_content": "    listAddNodeTail(moduleKeyspaceSubscribers, sub);",
          "new_line_content": "    return REDISMODULE_OK;",
          "content_same": false
        },
        {
          "line": 2592,
          "old_api": "zslValueGteMin",
          "new_api": null,
          "old_text": "zslValueGteMin(prev->score,&key->zrs)",
          "new_text": null,
          "old_line_content": "                !zslValueGteMin(prev->score,&key->zrs))",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 2597,
          "old_api": "zslLexValueGteMin",
          "new_api": null,
          "old_text": "zslLexValueGteMin(prev->ele,&key->zlrs)",
          "new_text": null,
          "old_line_content": "                if (!zslLexValueGteMin(prev->ele,&key->zlrs)) {",
          "new_line_content": "                    key->zer = 1;",
          "content_same": false
        },
        {
          "line": 6695,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.ok);",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 6697,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\n                \"Error loading the extension. Please check the server logs.\")",
          "new_text": null,
          "old_line_content": "            addReplyError(c,",
          "new_line_content": "                \"Error loading the extension. Please check the server logs.\");",
          "content_same": false
        },
        {
          "line": 4652,
          "old_api": "notifyKeyspaceEvent",
          "new_api": null,
          "old_text": "notifyKeyspaceEvent(type, (char *)event, key, ctx->client->db->id)",
          "new_text": null,
          "old_line_content": "    notifyKeyspaceEvent(type, (char *)event, key, ctx->client->db->id);",
          "new_line_content": "    return REDISMODULE_OK;",
          "content_same": false
        },
        {
          "line": 6701,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.ok);",
          "new_line_content": "        else {",
          "content_same": false
        },
        {
          "line": 2606,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unsupported zset encoding\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4661,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(moduleKeyspaceSubscribers)",
          "new_text": null,
          "old_line_content": "    if (listLength(moduleKeyspaceSubscribers) == 0) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4665,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(moduleKeyspaceSubscribers,&li)",
          "new_text": null,
          "old_line_content": "    listRewind(moduleKeyspaceSubscribers,&li);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4670,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "    while((ln = listNext(&li))) {",
          "new_line_content": "        RedisModuleKeyspaceSubscriber *sub = ln->value;",
          "content_same": false
        },
        {
          "line": 6724,
          "old_api": "addReplyErrorFormat",
          "new_api": null,
          "old_text": "addReplyErrorFormat(c,\"Error unloading module: %s\",errmsg)",
          "new_text": null,
          "old_line_content": "            addReplyErrorFormat(c,\"Error unloading module: %s\",errmsg);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4678,
          "old_api": "selectDb",
          "new_api": null,
          "old_text": "selectDb(ctx.client, dbid)",
          "new_text": null,
          "old_line_content": "            selectDb(ctx.client, dbid);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6727,
          "old_api": "addReplyLoadedModules",
          "new_api": null,
          "old_text": "addReplyLoadedModules(c)",
          "new_text": null,
          "old_line_content": "        addReplyLoadedModules(c);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 6729,
          "old_api": "addReplySubcommandSyntaxError",
          "new_api": null,
          "old_text": "addReplySubcommandSyntaxError(c)",
          "new_text": null,
          "old_line_content": "        addReplySubcommandSyntaxError(c);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 4684,
          "old_api": "notify_callback",
          "new_api": null,
          "old_text": "sub->notify_callback(&ctx, type, event, key)",
          "new_text": null,
          "old_line_content": "            sub->notify_callback(&ctx, type, event, key);",
          "new_line_content": "            sub->active = 0;",
          "content_same": false
        },
        {
          "line": 4686,
          "old_api": "moduleFreeContext",
          "new_api": null,
          "old_text": "moduleFreeContext(&ctx)",
          "new_text": null,
          "old_line_content": "            moduleFreeContext(&ctx);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6736,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(modules)",
          "new_text": null,
          "old_line_content": "    return dictSize(modules);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4696,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "    while((ln = listNext(&li))) {",
          "new_line_content": "        RedisModuleKeyspaceSubscriber *sub = ln->value;",
          "content_same": false
        },
        {
          "line": 4700,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(sub)",
          "new_text": null,
          "old_line_content": "            zfree(sub);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6750,
          "old_api": "LRU_CLOCK",
          "new_api": null,
          "old_text": "LRU_CLOCK()",
          "new_text": null,
          "old_line_content": "    if (objectSetLRUOrLFU(key->value, lfu_freq, lru_idle, lru_idle>=0 ? LRU_CLOCK() : 0))",
          "new_line_content": "        return REDISMODULE_OK;",
          "content_same": false
        },
        {
          "line": 6764,
          "old_api": "LFUDecrAndReturn",
          "new_api": null,
          "old_text": "LFUDecrAndReturn(key->value)",
          "new_text": null,
          "old_line_content": "        *lfu_freq = LFUDecrAndReturn(key->value);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 2670,
          "old_api": "moduleCreateEmptyKey",
          "new_api": null,
          "old_text": "moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_HASH)",
          "new_text": null,
          "old_line_content": "    if (key->value == NULL) moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_HASH);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6766,
          "old_api": "estimateObjectIdleTime",
          "new_api": null,
          "old_text": "estimateObjectIdleTime(key->value)",
          "new_text": null,
          "old_line_content": "        *lru_idle = estimateObjectIdleTime(key->value)/1000;",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2673,
          "old_api": "va_start",
          "new_api": null,
          "old_text": "va_start(ap, flags)",
          "new_text": null,
          "old_line_content": "    va_start(ap, flags);",
          "new_line_content": "    while(1) {",
          "content_same": false
        },
        {
          "line": 2678,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap,char*)",
          "new_text": null,
          "old_line_content": "            char *cfield = va_arg(ap,char*);",
          "new_line_content": "            if (cfield == NULL) break;",
          "content_same": false
        },
        {
          "line": 2680,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(cfield)",
          "new_text": null,
          "old_line_content": "            field = createRawStringObject(cfield,strlen(cfield));",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 2682,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap,RedisModuleString*)",
          "new_text": null,
          "old_line_content": "            field = va_arg(ap,RedisModuleString*);",
          "new_line_content": "            if (field == NULL) break;",
          "content_same": false
        },
        {
          "line": 2685,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap,RedisModuleString*)",
          "new_text": null,
          "old_line_content": "        value = va_arg(ap,RedisModuleString*);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2689,
          "old_api": "hashTypeExists",
          "new_api": null,
          "old_text": "hashTypeExists(key->value, field->ptr)",
          "new_text": null,
          "old_line_content": "            int exists = hashTypeExists(key->value, field->ptr);",
          "new_line_content": "            if (((flags & REDISMODULE_HASH_XX) && !exists) ||",
          "content_same": false
        },
        {
          "line": 2693,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(field)",
          "new_text": null,
          "old_line_content": "                if (flags & REDISMODULE_HASH_CFIELDS) decrRefCount(field);",
          "new_line_content": "                continue;",
          "content_same": false
        },
        {
          "line": 4743,
          "old_api": "moduleFreeContext",
          "new_api": null,
          "old_text": "moduleFreeContext(&ctx)",
          "new_text": null,
          "old_line_content": "            moduleFreeContext(&ctx);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 2701,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(field)",
          "new_text": null,
          "old_line_content": "            if (flags & REDISMODULE_HASH_CFIELDS) decrRefCount(field);",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 4758,
          "old_api": "moduleTypeEncodeId",
          "new_api": null,
          "old_text": "moduleTypeEncodeId(ctx->module->name,0)",
          "new_text": null,
          "old_line_content": "    uint64_t module_id = moduleTypeEncodeId(ctx->module->name,0);",
          "new_line_content": "    moduleClusterReceiver *r = clusterReceivers[type], *prev = NULL;",
          "content_same": false
        },
        {
          "line": 2714,
          "old_api": "hashTypeSet",
          "new_api": null,
          "old_text": "hashTypeSet(key->value, field->ptr, value->ptr, low_flags)",
          "new_text": null,
          "old_line_content": "        updated += hashTypeSet(key->value, field->ptr, value->ptr, low_flags);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2720,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(field)",
          "new_text": null,
          "old_line_content": "           decrRefCount(field);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2724,
          "old_api": "moduleDelKeyIfEmpty",
          "new_api": null,
          "old_text": "moduleDelKeyIfEmpty(key)",
          "new_text": null,
          "old_line_content": "    moduleDelKeyIfEmpty(key);",
          "new_line_content": "    return updated;",
          "content_same": false
        },
        {
          "line": 4773,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(r)",
          "new_text": null,
          "old_line_content": "                zfree(r);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 4783,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*r))",
          "new_text": null,
          "old_line_content": "        r = zmalloc(sizeof(*r));",
          "new_line_content": "        r->module_id = module_id;",
          "content_same": false
        },
        {
          "line": 4802,
          "old_api": "clusterSendModuleMessageToTarget",
          "new_api": null,
          "old_text": "clusterSendModuleMessageToTarget(target_id,module_id,type,msg,len)",
          "new_text": null,
          "old_line_content": "    if (clusterSendModuleMessageToTarget(target_id,module_id,type,msg,len) == C_OK)",
          "new_line_content": "        return REDISMODULE_OK;",
          "content_same": false
        },
        {
          "line": 2773,
          "old_api": "va_start",
          "new_api": null,
          "old_text": "va_start(ap, flags)",
          "new_text": null,
          "old_line_content": "    va_start(ap, flags);",
          "new_line_content": "    while(1) {",
          "content_same": false
        },
        {
          "line": 2779,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap,char*)",
          "new_text": null,
          "old_line_content": "            char *cfield = va_arg(ap,char*);",
          "new_line_content": "            if (cfield == NULL) break;",
          "content_same": false
        },
        {
          "line": 2781,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(cfield)",
          "new_text": null,
          "old_line_content": "            field = createRawStringObject(cfield,strlen(cfield));",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 2783,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap,RedisModuleString*)",
          "new_text": null,
          "old_line_content": "            field = va_arg(ap,RedisModuleString*);",
          "new_line_content": "            if (field == NULL) break;",
          "content_same": false
        },
        {
          "line": 4831,
          "old_api": "UNUSED",
          "new_api": null,
          "old_text": "UNUSED(ctx)",
          "new_text": null,
          "old_line_content": "    UNUSED(ctx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4836,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(server.cluster->nodes)",
          "new_text": null,
          "old_line_content": "    dictIterator *di = dictGetIterator(server.cluster->nodes);",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 2789,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap,int*)",
          "new_text": null,
          "old_line_content": "            existsptr = va_arg(ap,int*);",
          "new_line_content": "            if (key->value)",
          "content_same": false
        },
        {
          "line": 2791,
          "old_api": "hashTypeExists",
          "new_api": null,
          "old_text": "hashTypeExists(key->value,field->ptr)",
          "new_text": null,
          "old_line_content": "                *existsptr = hashTypeExists(key->value,field->ptr);",
          "new_line_content": "            else",
          "content_same": false
        },
        {
          "line": 4840,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "        clusterNode *node = dictGetVal(de);",
          "new_line_content": "        if (node->flags & (CLUSTER_NODE_NOADDR|CLUSTER_NODE_HANDSHAKE)) continue;",
          "content_same": false
        },
        {
          "line": 2795,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap,RedisModuleString**)",
          "new_text": null,
          "old_line_content": "            valueptr = va_arg(ap,RedisModuleString**);",
          "new_line_content": "            if (key->value) {",
          "content_same": false
        },
        {
          "line": 4843,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(ids[j],node->name,REDISMODULE_NODE_ID_LEN)",
          "new_text": null,
          "old_line_content": "        memcpy(ids[j],node->name,REDISMODULE_NODE_ID_LEN);",
          "new_line_content": "        j++;",
          "content_same": false
        },
        {
          "line": 2797,
          "old_api": "hashTypeGetValueObject",
          "new_api": null,
          "old_text": "hashTypeGetValueObject(key->value,field->ptr)",
          "new_text": null,
          "old_line_content": "                *valueptr = hashTypeGetValueObject(key->value,field->ptr);",
          "new_line_content": "                if (*valueptr) {",
          "content_same": false
        },
        {
          "line": 2800,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(*valueptr)",
          "new_text": null,
          "old_line_content": "                    decrRefCount(*valueptr);",
          "new_line_content": "                    *valueptr = decoded;",
          "content_same": false
        },
        {
          "line": 4849,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "    return ids;",
          "content_same": false
        },
        {
          "line": 2804,
          "old_api": "autoMemoryAdd",
          "new_api": null,
          "old_text": "autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,*valueptr)",
          "new_text": null,
          "old_line_content": "                    autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,*valueptr);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 4857,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(ids)",
          "new_text": null,
          "old_line_content": "    zfree(ids);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2811,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(field)",
          "new_text": null,
          "old_line_content": "        if (flags & REDISMODULE_HASH_CFIELDS) decrRefCount(field);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2813,
          "old_api": "va_end",
          "new_api": null,
          "old_text": "va_end(ap)",
          "new_text": null,
          "old_line_content": "    va_end(ap);",
          "new_line_content": "    return REDISMODULE_OK;",
          "content_same": false
        },
        {
          "line": 4873,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.cluster->nodes)",
          "new_text": null,
          "old_line_content": "    return dictSize(server.cluster->nodes);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2826,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*reply))",
          "new_text": null,
          "old_line_content": "    RedisModuleCallReply *reply = zmalloc(sizeof(*reply));",
          "new_line_content": "    reply->ctx = ctx;",
          "content_same": false
        },
        {
          "line": 2829,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(proto)",
          "new_text": null,
          "old_line_content": "    reply->protolen = sdslen(proto);",
          "new_line_content": "    reply->flags = REDISMODULE_REPLYFLAG_TOPARSE; /* Lazy parsing. */",
          "content_same": false
        },
        {
          "line": 4899,
          "old_api": "UNUSED",
          "new_api": null,
          "old_text": "UNUSED(ctx)",
          "new_text": null,
          "old_line_content": "    UNUSED(ctx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4901,
          "old_api": "clusterLookupNode",
          "new_api": null,
          "old_text": "clusterLookupNode(id)",
          "new_text": null,
          "old_line_content": "    clusterNode *node = clusterLookupNode(id);",
          "new_line_content": "    if (node->flags & (CLUSTER_NODE_NOADDR|CLUSTER_NODE_HANDSHAKE))",
          "content_same": false
        },
        {
          "line": 4905,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(ip,node->name,REDISMODULE_NODE_ID_LEN)",
          "new_text": null,
          "old_line_content": "    if (ip) memcpy(ip,node->name,REDISMODULE_NODE_ID_LEN);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2858,
          "old_api": "moduleParseCallReply_BulkString",
          "new_api": null,
          "old_text": "moduleParseCallReply_BulkString(reply)",
          "new_text": null,
          "old_line_content": "    case '$': moduleParseCallReply_BulkString(reply); break;",
          "new_line_content": "    case '-': /* handled by next item. */",
          "content_same": false
        },
        {
          "line": 2861,
          "old_api": "moduleParseCallReply_Array",
          "new_api": null,
          "old_text": "moduleParseCallReply_Array(reply)",
          "new_text": null,
          "old_line_content": "    case '*': moduleParseCallReply_Array(reply); break;",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4912,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(master_id,node->slaveof->name,REDISMODULE_NODE_ID_LEN)",
          "new_text": null,
          "old_line_content": "            memcpy(master_id,node->slaveof->name,REDISMODULE_NODE_ID_LEN);",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 4914,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(master_id,0,REDISMODULE_NODE_ID_LEN)",
          "new_text": null,
          "old_line_content": "            memset(master_id,0,REDISMODULE_NODE_ID_LEN);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2867,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(proto+1,'\\r')",
          "new_text": null,
          "old_line_content": "    char *p = strchr(proto+1,'\\r');",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2869,
          "old_api": "string2ll",
          "new_api": null,
          "old_text": "string2ll(proto+1,p-proto-1,&reply->val.ll)",
          "new_text": null,
          "old_line_content": "    string2ll(proto+1,p-proto-1,&reply->val.ll);",
          "new_line_content": "    reply->protolen = p-proto+2;",
          "content_same": false
        },
        {
          "line": 2876,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(proto+1,'\\r')",
          "new_text": null,
          "old_line_content": "    char *p = strchr(proto+1,'\\r');",
          "new_line_content": "    long long bulklen;",
          "content_same": false
        },
        {
          "line": 6973,
          "old_api": "REGISTER_API",
          "new_api": null,
          "old_text": "REGISTER_API(GetBlockedClientReadyKey)",
          "new_text": null,
          "old_line_content": "    REGISTER_API(GetBlockedClientReadyKey);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2879,
          "old_api": "string2ll",
          "new_api": null,
          "old_text": "string2ll(proto+1,p-proto-1,&bulklen)",
          "new_text": null,
          "old_line_content": "    string2ll(proto+1,p-proto-1,&bulklen);",
          "new_line_content": "    if (bulklen == -1) {",
          "content_same": false
        },
        {
          "line": 2893,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(proto+1,'\\r')",
          "new_text": null,
          "old_line_content": "    char *p = strchr(proto+1,'\\r');",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4951,
          "old_api": "UNUSED",
          "new_api": null,
          "old_text": "UNUSED(ctx)",
          "new_text": null,
          "old_line_content": "    UNUSED(ctx);",
          "new_line_content": "    if (flags & REDISMODULE_CLUSTER_FLAG_NO_FAILOVER)",
          "content_same": false
        },
        {
          "line": 2904,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(proto+1,'\\r')",
          "new_text": null,
          "old_line_content": "    char *p = strchr(proto+1,'\\r');",
          "new_line_content": "    long long arraylen, j;",
          "content_same": false
        },
        {
          "line": 2907,
          "old_api": "string2ll",
          "new_api": null,
          "old_text": "string2ll(proto+1,p-proto-1,&arraylen)",
          "new_text": null,
          "old_line_content": "    string2ll(proto+1,p-proto-1,&arraylen);",
          "new_line_content": "    p += 2;",
          "content_same": false
        },
        {
          "line": 2916,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(RedisModuleCallReply)*arraylen)",
          "new_text": null,
          "old_line_content": "    reply->val.array = zmalloc(sizeof(RedisModuleCallReply)*arraylen);",
          "new_line_content": "    reply->len = arraylen;",
          "content_same": false
        },
        {
          "line": 2924,
          "old_api": "moduleParseCallReply",
          "new_api": null,
          "old_text": "moduleParseCallReply(ele)",
          "new_text": null,
          "old_line_content": "        moduleParseCallReply(ele);",
          "new_line_content": "        p += ele->protolen;",
          "content_same": false
        },
        {
          "line": 2944,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(reply->val.array)",
          "new_text": null,
          "old_line_content": "            zfree(reply->val.array);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4995,
          "old_api": "UNUSED",
          "new_api": null,
          "old_text": "UNUSED(clientData)",
          "new_text": null,
          "old_line_content": "    UNUSED(clientData);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5000,
          "old_api": "ustime",
          "new_api": null,
          "old_text": "ustime()",
          "new_text": null,
          "old_line_content": "    uint64_t now = ustime();",
          "new_line_content": "    long long next_period = 0;",
          "content_same": false
        },
        {
          "line": 2954,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(reply)",
          "new_text": null,
          "old_line_content": "        zfree(reply);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5004,
          "old_api": "raxNext",
          "new_api": null,
          "old_text": "raxNext(&ri)",
          "new_text": null,
          "old_line_content": "        if (!raxNext(&ri)) break;",
          "new_line_content": "        uint64_t expiretime;",
          "content_same": false
        },
        {
          "line": 5007,
          "old_api": "ntohu64",
          "new_api": null,
          "old_text": "ntohu64(expiretime)",
          "new_text": null,
          "old_line_content": "        expiretime = ntohu64(expiretime);",
          "new_line_content": "        if (now >= expiretime) {",
          "content_same": false
        },
        {
          "line": 2965,
          "old_api": "autoMemoryFreed",
          "new_api": null,
          "old_text": "autoMemoryFreed(ctx,REDISMODULE_AM_REPLY,reply)",
          "new_text": null,
          "old_line_content": "    autoMemoryFreed(ctx,REDISMODULE_AM_REPLY,reply);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5018,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(timer)",
          "new_text": null,
          "old_line_content": "            zfree(timer);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 2976,
          "old_api": "moduleParseCallReply",
          "new_api": null,
          "old_text": "moduleParseCallReply(reply)",
          "new_text": null,
          "old_line_content": "    moduleParseCallReply(reply);",
          "new_line_content": "    switch(reply->type) {",
          "content_same": false
        },
        {
          "line": 5024,
          "old_api": "raxStop",
          "new_api": null,
          "old_text": "raxStop(&ri)",
          "new_text": null,
          "old_line_content": "    raxStop(&ri);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5028,
          "old_api": "raxSize",
          "new_api": null,
          "old_text": "raxSize(Timers)",
          "new_text": null,
          "old_line_content": "    return (raxSize(Timers) > 0) ? next_period : AE_NOMORE;",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5035,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*timer))",
          "new_text": null,
          "old_line_content": "    RedisModuleTimer *timer = zmalloc(sizeof(*timer));",
          "new_line_content": "    timer->module = ctx->module;",
          "content_same": false
        },
        {
          "line": 2990,
          "old_api": "moduleParseCallReply",
          "new_api": null,
          "old_text": "moduleParseCallReply(reply)",
          "new_text": null,
          "old_line_content": "    moduleParseCallReply(reply);",
          "new_line_content": "    if (reply->type != REDISMODULE_REPLY_ARRAY) return NULL;",
          "content_same": false
        },
        {
          "line": 5040,
          "old_api": "ustime",
          "new_api": null,
          "old_text": "ustime()",
          "new_text": null,
          "old_line_content": "    uint64_t expiretime = ustime()+period*1000;",
          "new_line_content": "    uint64_t key;",
          "content_same": false
        },
        {
          "line": 2998,
          "old_api": "moduleParseCallReply",
          "new_api": null,
          "old_text": "moduleParseCallReply(reply)",
          "new_text": null,
          "old_line_content": "    moduleParseCallReply(reply);",
          "new_line_content": "    if (reply->type != REDISMODULE_REPLY_INTEGER) return LLONG_MIN;",
          "content_same": false
        },
        {
          "line": 5046,
          "old_api": "raxInsert",
          "new_api": null,
          "old_text": "raxInsert(Timers,(unsigned char*)&key,sizeof(key),timer,NULL)",
          "new_text": null,
          "old_line_content": "            raxInsert(Timers,(unsigned char*)&key,sizeof(key),timer,NULL);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 3005,
          "old_api": "moduleParseCallReply",
          "new_api": null,
          "old_text": "moduleParseCallReply(reply)",
          "new_text": null,
          "old_line_content": "    moduleParseCallReply(reply);",
          "new_line_content": "    if (reply->type != REDISMODULE_REPLY_STRING &&",
          "content_same": false
        },
        {
          "line": 5061,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(ri.key,&key,sizeof(key))",
          "new_text": null,
          "old_line_content": "        if (memcmp(ri.key,&key,sizeof(key)) == 0) {",
          "new_line_content": "            /* This is the first key, we need to re-install the timer according",
          "content_same": false
        },
        {
          "line": 3015,
          "old_api": "moduleParseCallReply",
          "new_api": null,
          "old_text": "moduleParseCallReply(reply)",
          "new_text": null,
          "old_line_content": "    moduleParseCallReply(reply);",
          "new_line_content": "    switch(reply->type) {",
          "content_same": false
        },
        {
          "line": 5064,
          "old_api": "aeDeleteTimeEvent",
          "new_api": null,
          "old_text": "aeDeleteTimeEvent(server.el,aeTimer)",
          "new_text": null,
          "old_line_content": "            aeDeleteTimeEvent(server.el,aeTimer);",
          "new_line_content": "            aeTimer = -1;",
          "content_same": false
        },
        {
          "line": 3019,
          "old_api": "RM_CreateString",
          "new_api": null,
          "old_text": "RM_CreateString(reply->ctx,reply->val.str,reply->len)",
          "new_text": null,
          "old_line_content": "        return RM_CreateString(reply->ctx,reply->val.str,reply->len);",
          "new_line_content": "    case REDISMODULE_REPLY_INTEGER: {",
          "content_same": false
        },
        {
          "line": 5067,
          "old_api": "raxStop",
          "new_api": null,
          "old_text": "raxStop(&ri)",
          "new_text": null,
          "old_line_content": "        raxStop(&ri);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3023,
          "old_api": "RM_CreateString",
          "new_api": null,
          "old_text": "RM_CreateString(reply->ctx,buf,len)",
          "new_text": null,
          "old_line_content": "        return RM_CreateString(reply->ctx,buf,len);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5073,
          "old_api": "aeCreateTimeEvent",
          "new_api": null,
          "old_text": "aeCreateTimeEvent(server.el,period,moduleTimerHandler,NULL,NULL)",
          "new_text": null,
          "old_line_content": "        aeTimer = aeCreateTimeEvent(server.el,period,moduleTimerHandler,NULL,NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5083,
          "old_api": "raxFind",
          "new_api": null,
          "old_text": "raxFind(Timers,(unsigned char*)&id,sizeof(id))",
          "new_text": null,
          "old_line_content": "    RedisModuleTimer *timer = raxFind(Timers,(unsigned char*)&id,sizeof(id));",
          "new_line_content": "    if (timer == raxNotFound || timer->module != ctx->module)",
          "content_same": false
        },
        {
          "line": 5088,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(timer)",
          "new_text": null,
          "old_line_content": "    zfree(timer);",
          "new_line_content": "    return REDISMODULE_OK;",
          "content_same": false
        },
        {
          "line": 3049,
          "old_api": "zrealloc",
          "new_api": null,
          "old_text": "zrealloc(argv,sizeof(robj*)*argv_size)",
          "new_text": null,
          "old_line_content": "    argv = zrealloc(argv,sizeof(robj*)*argv_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5099,
          "old_api": "raxFind",
          "new_api": null,
          "old_text": "raxFind(Timers,(unsigned char*)&id,sizeof(id))",
          "new_text": null,
          "old_line_content": "    RedisModuleTimer *timer = raxFind(Timers,(unsigned char*)&id,sizeof(id));",
          "new_line_content": "    if (timer == raxNotFound || timer->module != ctx->module)",
          "content_same": false
        },
        {
          "line": 3052,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(cmdname)",
          "new_text": null,
          "old_line_content": "    argv[0] = createStringObject(cmdname,strlen(cmdname));",
          "new_line_content": "    argc++;",
          "content_same": false
        },
        {
          "line": 5103,
          "old_api": "ustime",
          "new_api": null,
          "old_text": "ustime()",
          "new_text": null,
          "old_line_content": "        int64_t rem = ntohu64(id)-ustime();",
          "new_line_content": "        if (rem < 0) rem = 0;",
          "content_same": false
        },
        {
          "line": 3060,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(cstr)",
          "new_text": null,
          "old_line_content": "            argv[argc++] = createStringObject(cstr,strlen(cstr));",
          "new_line_content": "        } else if (*p == 's') {",
          "content_same": false
        },
        {
          "line": 3062,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap,void*)",
          "new_text": null,
          "old_line_content": "            robj *obj = va_arg(ap,void*);",
          "new_line_content": "            argv[argc++] = obj;",
          "content_same": false
        },
        {
          "line": 3064,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(obj)",
          "new_text": null,
          "old_line_content": "            incrRefCount(obj);",
          "new_line_content": "        } else if (*p == 'b') {",
          "content_same": false
        },
        {
          "line": 3068,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject(buf,len)",
          "new_text": null,
          "old_line_content": "            argv[argc++] = createStringObject(buf,len);",
          "new_line_content": "        } else if (*p == 'l') {",
          "content_same": false
        },
        {
          "line": 3071,
          "old_api": "sdsfromlonglong",
          "new_api": null,
          "old_text": "sdsfromlonglong(ll)",
          "new_text": null,
          "old_line_content": "            argv[argc++] = createObject(OBJ_STRING,sdsfromlonglong(ll));",
          "new_line_content": "        } else if (*p == 'v') {",
          "content_same": false
        },
        {
          "line": 3075,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap, size_t)",
          "new_text": null,
          "old_line_content": "             size_t vlen = va_arg(ap, size_t);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3081,
          "old_api": "zrealloc",
          "new_api": null,
          "old_text": "zrealloc(argv,sizeof(robj*)*argv_size)",
          "new_text": null,
          "old_line_content": "             argv = zrealloc(argv,sizeof(robj*)*argv_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3085,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(v[i])",
          "new_text": null,
          "old_line_content": "                 incrRefCount(v[i]);",
          "new_line_content": "                 argv[argc++] = v[i];",
          "content_same": false
        },
        {
          "line": 5135,
          "old_api": "autoMemoryAdd",
          "new_api": null,
          "old_text": "autoMemoryAdd(ctx,REDISMODULE_AM_DICT,d)",
          "new_text": null,
          "old_line_content": "    if (ctx != NULL) autoMemoryAdd(ctx,REDISMODULE_AM_DICT,d);",
          "new_line_content": "    return d;",
          "content_same": false
        },
        {
          "line": 5145,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(d)",
          "new_text": null,
          "old_line_content": "    zfree(d);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5150,
          "old_api": "raxSize",
          "new_api": null,
          "old_text": "raxSize(d->rax)",
          "new_text": null,
          "old_line_content": "    return raxSize(d->rax);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3105,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(argv)",
          "new_text": null,
          "old_line_content": "    zfree(argv);",
          "new_line_content": "    return NULL;",
          "content_same": false
        },
        {
          "line": 5158,
          "old_api": "raxTryInsert",
          "new_api": null,
          "old_text": "raxTryInsert(d->rax,key,keylen,ptr,NULL)",
          "new_text": null,
          "old_line_content": "    int retval = raxTryInsert(d->rax,key,keylen,ptr,NULL);",
          "new_line_content": "    return (retval == 1) ? REDISMODULE_OK : REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 5165,
          "old_api": "raxInsert",
          "new_api": null,
          "old_text": "raxInsert(d->rax,key,keylen,ptr,NULL)",
          "new_text": null,
          "old_line_content": "    int retval = raxInsert(d->rax,key,keylen,ptr,NULL);",
          "new_line_content": "    return (retval == 1) ? REDISMODULE_OK : REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 5171,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(key->ptr)",
          "new_text": null,
          "old_line_content": "    return RM_DictSetC(d,key->ptr,sdslen(key->ptr),ptr);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5176,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(key->ptr)",
          "new_text": null,
          "old_line_content": "    return RM_DictReplaceC(d,key->ptr,sdslen(key->ptr),ptr);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3129,
          "old_api": "createClient",
          "new_api": null,
          "old_text": "createClient(NULL)",
          "new_text": null,
          "old_line_content": "    c = createClient(NULL);",
          "new_line_content": "    c->user = NULL; /* Root user. */",
          "content_same": false
        },
        {
          "line": 3131,
          "old_api": "moduleCreateArgvFromUserFormat",
          "new_api": null,
          "old_text": "moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap)",
          "new_text": null,
          "old_line_content": "    argv = moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap);",
          "new_line_content": "    replicate = flags & REDISMODULE_ARGV_REPLICATE;",
          "content_same": false
        },
        {
          "line": 3133,
          "old_api": "va_end",
          "new_api": null,
          "old_text": "va_end(ap)",
          "new_text": null,
          "old_line_content": "    va_end(ap);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5185,
          "old_api": "raxFind",
          "new_api": null,
          "old_text": "raxFind(d->rax,key,keylen)",
          "new_text": null,
          "old_line_content": "    void *res = raxFind(d->rax,key,keylen);",
          "new_line_content": "    if (nokey) *nokey = (res == raxNotFound);",
          "content_same": false
        },
        {
          "line": 5192,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(key->ptr)",
          "new_text": null,
          "old_line_content": "    return RM_DictGetC(d,key->ptr,sdslen(key->ptr),nokey);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3150,
          "old_api": "moduleCallCommandFilters",
          "new_api": null,
          "old_text": "moduleCallCommandFilters(c)",
          "new_text": null,
          "old_line_content": "    moduleCallCommandFilters(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3155,
          "old_api": "lookupCommand",
          "new_api": null,
          "old_text": "lookupCommand(c->argv[0]->ptr)",
          "new_text": null,
          "old_line_content": "    cmd = lookupCommand(c->argv[0]->ptr);",
          "new_line_content": "    if (!cmd) {",
          "content_same": false
        },
        {
          "line": 5203,
          "old_api": "raxRemove",
          "new_api": null,
          "old_text": "raxRemove(d->rax,key,keylen,oldval)",
          "new_text": null,
          "old_line_content": "    int retval = raxRemove(d->rax,key,keylen,oldval);",
          "new_line_content": "    return retval ? REDISMODULE_OK : REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 5209,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(key->ptr)",
          "new_text": null,
          "old_line_content": "    return RM_DictDelC(d,key->ptr,sdslen(key->ptr),oldval);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3175,
          "old_api": "getNodeByQuery",
          "new_api": null,
          "old_text": "getNodeByQuery(c,c->cmd,c->argv,c->argc,NULL,NULL)",
          "new_text": null,
          "old_line_content": "        if (getNodeByQuery(c,c->cmd,c->argv,c->argc,NULL,NULL) !=",
          "new_line_content": "                           server.cluster->myself)",
          "content_same": false
        },
        {
          "line": 5233,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*di))",
          "new_text": null,
          "old_line_content": "    RedisModuleDictIter *di = zmalloc(sizeof(*di));",
          "new_line_content": "    di->dict = d;",
          "content_same": false
        },
        {
          "line": 3186,
          "old_api": "moduleReplicateMultiIfNeeded",
          "new_api": null,
          "old_text": "moduleReplicateMultiIfNeeded(ctx)",
          "new_text": null,
          "old_line_content": "    if (replicate) moduleReplicateMultiIfNeeded(ctx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5236,
          "old_api": "raxSeek",
          "new_api": null,
          "old_text": "raxSeek(&di->ri,op,key,keylen)",
          "new_text": null,
          "old_line_content": "    raxSeek(&di->ri,op,key,keylen);",
          "new_line_content": "    return di;",
          "content_same": false
        },
        {
          "line": 5243,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(key->ptr)",
          "new_text": null,
          "old_line_content": "    return RM_DictIteratorStartC(d,op,key->ptr,sdslen(key->ptr));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3196,
          "old_api": "call",
          "new_api": null,
          "old_text": "call(c,call_flags)",
          "new_text": null,
          "old_line_content": "    call(c,call_flags);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3201,
          "old_api": "sdsnewlen",
          "new_api": null,
          "old_text": "sdsnewlen(c->buf,c->bufpos)",
          "new_text": null,
          "old_line_content": "    sds proto = sdsnewlen(c->buf,c->bufpos);",
          "new_line_content": "    c->bufpos = 0;",
          "content_same": false
        },
        {
          "line": 5250,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(di)",
          "new_text": null,
          "old_line_content": "    zfree(di);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3204,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(c->reply)",
          "new_text": null,
          "old_line_content": "        clientReplyBlock *o = listNodeValue(listFirst(c->reply));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3207,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(c->reply)",
          "new_text": null,
          "old_line_content": "        listDelNode(c->reply,listFirst(c->reply));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3210,
          "old_api": "autoMemoryAdd",
          "new_api": null,
          "old_text": "autoMemoryAdd(ctx,REDISMODULE_AM_REPLY,reply)",
          "new_text": null,
          "old_line_content": "    autoMemoryAdd(ctx,REDISMODULE_AM_REPLY,reply);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5261,
          "old_api": "raxSeek",
          "new_api": null,
          "old_text": "raxSeek(&di->ri,op,key,keylen)",
          "new_text": null,
          "old_line_content": "    return raxSeek(&di->ri,op,key,keylen);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3214,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(c)",
          "new_text": null,
          "old_line_content": "    freeClient(c);",
          "new_line_content": "    return reply;",
          "content_same": false
        },
        {
          "line": 5267,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(key->ptr)",
          "new_text": null,
          "old_line_content": "    return RM_DictIteratorReseekC(di,op,key->ptr,sdslen(key->ptr));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3221,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(reply->proto)",
          "new_text": null,
          "old_line_content": "    if (reply->proto) *len = sdslen(reply->proto);",
          "new_line_content": "    return reply->proto;",
          "content_same": false
        },
        {
          "line": 5296,
          "old_api": "raxNext",
          "new_api": null,
          "old_text": "raxNext(&di->ri)",
          "new_text": null,
          "old_line_content": "    if (!raxNext(&di->ri)) return NULL;",
          "new_line_content": "    if (keylen) *keylen = di->ri.key_len;",
          "content_same": false
        },
        {
          "line": 5306,
          "old_api": "raxPrev",
          "new_api": null,
          "old_text": "raxPrev(&di->ri)",
          "new_text": null,
          "old_line_content": "    if (!raxPrev(&di->ri)) return NULL;",
          "new_line_content": "    if (keylen) *keylen = di->ri.key_len;",
          "content_same": false
        },
        {
          "line": 3267,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(name)",
          "new_text": null,
          "old_line_content": "    if (strlen(name) != 9) return 0;",
          "new_line_content": "    if (encver < 0 || encver > 1023) return 0;",
          "content_same": false
        },
        {
          "line": 3272,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(cset,name[j])",
          "new_text": null,
          "old_line_content": "        char *p = strchr(cset,name[j]);",
          "new_line_content": "        if (!p) return 0;",
          "content_same": false
        },
        {
          "line": 5321,
          "old_api": "RM_DictNextC",
          "new_api": null,
          "old_text": "RM_DictNextC(di,&keylen,dataptr)",
          "new_text": null,
          "old_line_content": "    void *key = RM_DictNextC(di,&keylen,dataptr);",
          "new_line_content": "    if (key == NULL) return NULL;",
          "content_same": false
        },
        {
          "line": 5323,
          "old_api": "RM_CreateString",
          "new_api": null,
          "old_text": "RM_CreateString(ctx,key,keylen)",
          "new_text": null,
          "old_line_content": "    return RM_CreateString(ctx,key,keylen);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5331,
          "old_api": "RM_DictPrevC",
          "new_api": null,
          "old_text": "RM_DictPrevC(di,&keylen,dataptr)",
          "new_text": null,
          "old_line_content": "    void *key = RM_DictPrevC(di,&keylen,dataptr);",
          "new_line_content": "    if (key == NULL) return NULL;",
          "content_same": false
        },
        {
          "line": 3285,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(modules)",
          "new_text": null,
          "old_line_content": "    dictIterator *di = dictGetIterator(modules);",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 5333,
          "old_api": "RM_CreateString",
          "new_api": null,
          "old_text": "RM_CreateString(ctx,key,keylen)",
          "new_text": null,
          "old_line_content": "    return RM_CreateString(ctx,key,keylen);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3289,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "        struct RedisModule *module = dictGetVal(de);",
          "new_line_content": "        listIter li;",
          "content_same": false
        },
        {
          "line": 3294,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "        while((ln = listNext(&li))) {",
          "new_line_content": "            moduleType *mt = ln->value;",
          "content_same": false
        },
        {
          "line": 3297,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "                dictReleaseIterator(di);",
          "new_line_content": "                return mt;",
          "content_same": false
        },
        {
          "line": 3302,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "    return NULL;",
          "content_same": false
        },
        {
          "line": 5350,
          "old_api": "raxCompare",
          "new_api": null,
          "old_text": "raxCompare(&di->ri,op,key,keylen)",
          "new_text": null,
          "old_line_content": "    int res = raxCompare(&di->ri,op,key,keylen);",
          "new_line_content": "    return res ? REDISMODULE_OK : REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 5358,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(key->ptr)",
          "new_text": null,
          "old_line_content": "    int res = raxCompare(&di->ri,op,key->ptr,sdslen(key->ptr));",
          "new_line_content": "    return res ? REDISMODULE_OK : REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 3324,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(modules)",
          "new_text": null,
          "old_line_content": "    dictIterator *di = dictGetIterator(modules);",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 3328,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "        struct RedisModule *module = dictGetVal(de);",
          "new_line_content": "        listIter li;",
          "content_same": false
        },
        {
          "line": 5378,
          "old_api": "sdscatfmt",
          "new_api": null,
          "old_text": "sdscatfmt(full_name, \"_%s\", name)",
          "new_text": null,
          "old_line_content": "        full_name = sdscatfmt(full_name, \"_%s\", name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3333,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "        while((ln = listNext(&li))) {",
          "new_line_content": "            moduleType *this_mt = ln->value;",
          "content_same": false
        },
        {
          "line": 5382,
          "old_api": "RM_InfoEndDictField",
          "new_api": null,
          "old_text": "RM_InfoEndDictField(ctx)",
          "new_text": null,
          "old_line_content": "        RM_InfoEndDictField(ctx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3343,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5391,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(full_name)",
          "new_text": null,
          "old_line_content": "            sdsfree(full_name);",
          "new_line_content": "            ctx->in_section = 0;",
          "content_same": false
        },
        {
          "line": 5397,
          "old_api": "sdscatfmt",
          "new_api": null,
          "old_text": "sdscatfmt(ctx->info, \"# %S\\r\\n\", full_name)",
          "new_text": null,
          "old_line_content": "    ctx->info = sdscatfmt(ctx->info, \"# %S\\r\\n\", full_name);",
          "new_line_content": "    ctx->in_section = 1;",
          "content_same": false
        },
        {
          "line": 5399,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(full_name)",
          "new_text": null,
          "old_line_content": "    sdsfree(full_name);",
          "new_line_content": "    return REDISMODULE_OK;",
          "content_same": false
        },
        {
          "line": 5412,
          "old_api": "sdscatfmt",
          "new_api": null,
          "old_text": "sdscatfmt(ctx->info,\n        \"%s_%s:\",\n        ctx->module->name,\n        name)",
          "new_text": null,
          "old_line_content": "    ctx->info = sdscatfmt(ctx->info,",
          "new_line_content": "        \"%s_%s:\",",
          "content_same": false
        },
        {
          "line": 5427,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(ctx->info, \"\\r\\n\")",
          "new_text": null,
          "old_line_content": "    ctx->info = sdscat(ctx->info, \"\\r\\n\");",
          "new_line_content": "    ctx->in_dict_field = 0;",
          "content_same": false
        },
        {
          "line": 5439,
          "old_api": "sdscatfmt",
          "new_api": null,
          "old_text": "sdscatfmt(ctx->info,\n            \"%s=%S,\",\n            field,\n            (sds)value->ptr)",
          "new_text": null,
          "old_line_content": "        ctx->info = sdscatfmt(ctx->info,",
          "new_line_content": "            \"%s=%S,\",",
          "content_same": false
        },
        {
          "line": 5445,
          "old_api": "sdscatfmt",
          "new_api": null,
          "old_text": "sdscatfmt(ctx->info,\n        \"%s_%s:%S\\r\\n\",\n        ctx->module->name,\n        field,\n        (sds)value->ptr)",
          "new_text": null,
          "old_line_content": "    ctx->info = sdscatfmt(ctx->info,",
          "new_line_content": "        \"%s_%s:%S\\r\\n\",",
          "content_same": false
        },
        {
          "line": 5457,
          "old_api": "sdscatfmt",
          "new_api": null,
          "old_text": "sdscatfmt(ctx->info,\n            \"%s=%s,\",\n            field,\n            value)",
          "new_text": null,
          "old_line_content": "        ctx->info = sdscatfmt(ctx->info,",
          "new_line_content": "            \"%s=%s,\",",
          "content_same": false
        },
        {
          "line": 5463,
          "old_api": "sdscatfmt",
          "new_api": null,
          "old_text": "sdscatfmt(ctx->info,\n        \"%s_%s:%s\\r\\n\",\n        ctx->module->name,\n        field,\n        value)",
          "new_text": null,
          "old_line_content": "    ctx->info = sdscatfmt(ctx->info,",
          "new_line_content": "        \"%s_%s:%s\\r\\n\",",
          "content_same": false
        },
        {
          "line": 5475,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(ctx->info,\n            \"%s=%.17g,\",\n            field,\n            value)",
          "new_text": null,
          "old_line_content": "        ctx->info = sdscatprintf(ctx->info,",
          "new_line_content": "            \"%s=%.17g,\",",
          "content_same": false
        },
        {
          "line": 5481,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(ctx->info,\n        \"%s_%s:%.17g\\r\\n\",\n        ctx->module->name,\n        field,\n        value)",
          "new_text": null,
          "old_line_content": "    ctx->info = sdscatprintf(ctx->info,",
          "new_line_content": "        \"%s_%s:%.17g\\r\\n\",",
          "content_same": false
        },
        {
          "line": 3434,
          "old_api": "moduleTypeEncodeId",
          "new_api": null,
          "old_text": "moduleTypeEncodeId(name,encver)",
          "new_text": null,
          "old_line_content": "    uint64_t id = moduleTypeEncodeId(name,encver);",
          "new_line_content": "    if (id == 0) return NULL;",
          "content_same": false
        },
        {
          "line": 3436,
          "old_api": "moduleTypeLookupModuleByName",
          "new_api": null,
          "old_text": "moduleTypeLookupModuleByName(name)",
          "new_text": null,
          "old_line_content": "    if (moduleTypeLookupModuleByName(name) != NULL) return NULL;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5493,
          "old_api": "sdscatfmt",
          "new_api": null,
          "old_text": "sdscatfmt(ctx->info,\n            \"%s=%I,\",\n            field,\n            value)",
          "new_text": null,
          "old_line_content": "        ctx->info = sdscatfmt(ctx->info,",
          "new_line_content": "            \"%s=%I,\",",
          "content_same": false
        },
        {
          "line": 5499,
          "old_api": "sdscatfmt",
          "new_api": null,
          "old_text": "sdscatfmt(ctx->info,\n        \"%s_%s:%I\\r\\n\",\n        ctx->module->name,\n        field,\n        value)",
          "new_text": null,
          "old_line_content": "    ctx->info = sdscatfmt(ctx->info,",
          "new_line_content": "        \"%s_%s:%I\\r\\n\",",
          "content_same": false
        },
        {
          "line": 3456,
          "old_api": "zcalloc",
          "new_api": null,
          "old_text": "zcalloc(sizeof(*mt))",
          "new_text": null,
          "old_line_content": "    moduleType *mt = zcalloc(sizeof(*mt));",
          "new_line_content": "    mt->id = id;",
          "content_same": false
        },
        {
          "line": 1412,
          "old_api": "moduleGetReplyClient",
          "new_api": null,
          "old_text": "moduleGetReplyClient(ctx)",
          "new_text": null,
          "old_line_content": "    client *c = moduleGetReplyClient(ctx);",
          "new_line_content": "    if (c == NULL) return REDISMODULE_OK;",
          "content_same": false
        },
        {
          "line": 1414,
          "old_api": "addReplyNull",
          "new_api": null,
          "old_text": "addReplyNull(c)",
          "new_text": null,
          "old_line_content": "    addReplyNull(c);",
          "new_line_content": "    return REDISMODULE_OK;",
          "content_same": false
        },
        {
          "line": 5511,
          "old_api": "sdscatfmt",
          "new_api": null,
          "old_text": "sdscatfmt(ctx->info,\n            \"%s=%U,\",\n            field,\n            value)",
          "new_text": null,
          "old_line_content": "        ctx->info = sdscatfmt(ctx->info,",
          "new_line_content": "            \"%s=%U,\",",
          "content_same": false
        },
        {
          "line": 5517,
          "old_api": "sdscatfmt",
          "new_api": null,
          "old_text": "sdscatfmt(ctx->info,\n        \"%s_%s:%U\\r\\n\",\n        ctx->module->name,\n        field,\n        value)",
          "new_text": null,
          "old_line_content": "    ctx->info = sdscatfmt(ctx->info,",
          "new_line_content": "        \"%s_%s:%U\\r\\n\",",
          "content_same": false
        },
        {
          "line": 3471,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(ctx->module->types,mt)",
          "new_text": null,
          "old_line_content": "    listAddNodeTail(ctx->module->types,mt);",
          "new_line_content": "    return mt;",
          "content_same": false
        },
        {
          "line": 1425,
          "old_api": "moduleGetReplyClient",
          "new_api": null,
          "old_text": "moduleGetReplyClient(ctx)",
          "new_text": null,
          "old_line_content": "    client *c = moduleGetReplyClient(ctx);",
          "new_line_content": "    if (c == NULL) return REDISMODULE_OK;",
          "content_same": false
        },
        {
          "line": 1428,
          "old_api": "addReplySds",
          "new_api": null,
          "old_text": "addReplySds(c,proto)",
          "new_text": null,
          "old_line_content": "    addReplySds(c,proto);",
          "new_line_content": "    return REDISMODULE_OK;",
          "content_same": false
        },
        {
          "line": 5531,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(modules)",
          "new_text": null,
          "old_line_content": "    dictIterator *di = dictGetIterator(modules);",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 3484,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(o)",
          "new_text": null,
          "old_line_content": "    decrRefCount(o);",
          "new_line_content": "    key->value = o;",
          "content_same": false
        },
        {
          "line": 1439,
          "old_api": "moduleGetReplyClient",
          "new_api": null,
          "old_text": "moduleGetReplyClient(ctx)",
          "new_text": null,
          "old_line_content": "    client *c = moduleGetReplyClient(ctx);",
          "new_line_content": "    if (c == NULL) return REDISMODULE_OK;",
          "content_same": false
        },
        {
          "line": 5535,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "        struct RedisModule *module = dictGetVal(de);",
          "new_line_content": "        if (!module->info_cb)",
          "content_same": false
        },
        {
          "line": 1441,
          "old_api": "addReplyDouble",
          "new_api": null,
          "old_text": "addReplyDouble(c,d)",
          "new_text": null,
          "old_line_content": "    addReplyDouble(c,d);",
          "new_line_content": "    return REDISMODULE_OK;",
          "content_same": false
        },
        {
          "line": 5539,
          "old_api": "info_cb",
          "new_api": null,
          "old_text": "module->info_cb(&info_ctx, for_crash_report)",
          "new_text": null,
          "old_line_content": "        module->info_cb(&info_ctx, for_crash_report);",
          "new_line_content": "        /* Implicitly end dicts (no way to handle errors, and we must add the newline). */",
          "content_same": false
        },
        {
          "line": 5542,
          "old_api": "RM_InfoEndDictField",
          "new_api": null,
          "old_text": "RM_InfoEndDictField(&info_ctx)",
          "new_text": null,
          "old_line_content": "            RM_InfoEndDictField(&info_ctx);",
          "new_line_content": "        info = info_ctx.info;",
          "content_same": false
        },
        {
          "line": 3497,
          "old_api": "RM_KeyType",
          "new_api": null,
          "old_text": "RM_KeyType(key)",
          "new_text": null,
          "old_line_content": "        RM_KeyType(key) != REDISMODULE_KEYTYPE_MODULE) return NULL;",
          "new_line_content": "    moduleValue *mv = key->value->ptr;",
          "content_same": false
        },
        {
          "line": 5546,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "    return info;",
          "content_same": false
        },
        {
          "line": 3511,
          "old_api": "RM_KeyType",
          "new_api": null,
          "old_text": "RM_KeyType(key)",
          "new_text": null,
          "old_line_content": "        RM_KeyType(key) != REDISMODULE_KEYTYPE_MODULE) return NULL;",
          "new_line_content": "    moduleValue *mv = key->value->ptr;",
          "content_same": false
        },
        {
          "line": 5559,
          "old_api": "getRandomBytes",
          "new_api": null,
          "old_text": "getRandomBytes(dst,len)",
          "new_text": null,
          "old_line_content": "    getRandomBytes(dst,len);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1467,
          "old_api": "redisOpArrayInit",
          "new_api": null,
          "old_text": "redisOpArrayInit(&server.also_propagate)",
          "new_text": null,
          "old_line_content": "        redisOpArrayInit(&server.also_propagate);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1469,
          "old_api": "execCommandPropagateMulti",
          "new_api": null,
          "old_text": "execCommandPropagateMulti(ctx->client)",
          "new_text": null,
          "old_line_content": "    execCommandPropagateMulti(ctx->client);",
          "new_line_content": "    ctx->flags |= REDISMODULE_CTX_MULTI_EMITTED;",
          "content_same": false
        },
        {
          "line": 5566,
          "old_api": "getRandomHexChars",
          "new_api": null,
          "old_text": "getRandomHexChars(dst,len)",
          "new_text": null,
          "old_line_content": "    getRandomHexChars(dst,len);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3528,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n        \"Error loading data from RDB (short read or EOF). \"\n        \"Read performed by module '%s' about type '%s' \"\n        \"after reading '%llu' bytes of a value.\",\n        io->type->module->name,\n        io->type->name,\n        (unsigned long long)io->bytes)",
          "new_text": null,
          "old_line_content": "    serverLog(LL_WARNING,",
          "new_line_content": "        \"Error loading data from RDB (short read or EOF). \"",
          "content_same": false
        },
        {
          "line": 3535,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "    exit(1);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5586,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*sapi))",
          "new_text": null,
          "old_line_content": "    RedisModuleSharedAPI *sapi = zmalloc(sizeof(*sapi));",
          "new_line_content": "    sapi->module = ctx->module;",
          "content_same": false
        },
        {
          "line": 3542,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(modules)",
          "new_text": null,
          "old_line_content": "    dictIterator *di = dictGetIterator(modules);",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 5590,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(sapi)",
          "new_text": null,
          "old_line_content": "        zfree(sapi);",
          "new_line_content": "        return REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 3547,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(module->types)",
          "new_text": null,
          "old_line_content": "        if (listLength(module->types) &&",
          "new_line_content": "            !(module->options & REDISMODULE_OPTIONS_HANDLE_IO_ERRORS))",
          "content_same": false
        },
        {
          "line": 3550,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "            dictReleaseIterator(di);",
          "new_line_content": "            return 0;",
          "content_same": false
        },
        {
          "line": 3554,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "    return 1;",
          "content_same": false
        },
        {
          "line": 1516,
          "old_api": "lookupCommandByCString",
          "new_api": null,
          "old_text": "lookupCommandByCString((char*)cmdname)",
          "new_text": null,
          "old_line_content": "    cmd = lookupCommandByCString((char*)cmdname);",
          "new_line_content": "    if (!cmd) return REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 1522,
          "old_api": "va_end",
          "new_api": null,
          "old_text": "va_end(ap)",
          "new_text": null,
          "old_line_content": "    va_end(ap);",
          "new_line_content": "    if (argv == NULL) return REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 3571,
          "old_api": "rdbSaveLen",
          "new_api": null,
          "old_text": "rdbSaveLen(io->rio, RDB_MODULE_OPCODE_UINT)",
          "new_text": null,
          "old_line_content": "    int retval = rdbSaveLen(io->rio, RDB_MODULE_OPCODE_UINT);",
          "new_line_content": "    if (retval == -1) goto saveerr;",
          "content_same": false
        },
        {
          "line": 3575,
          "old_api": "rdbSaveLen",
          "new_api": null,
          "old_text": "rdbSaveLen(io->rio, value)",
          "new_text": null,
          "old_line_content": "    retval = rdbSaveLen(io->rio, value);",
          "new_line_content": "    if (retval == -1) goto saveerr;",
          "content_same": false
        },
        {
          "line": 5630,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(server.sharedapi, apiname)",
          "new_text": null,
          "old_line_content": "    dictEntry *de = dictFind(server.sharedapi, apiname);",
          "new_line_content": "    if (de == NULL) return NULL;",
          "content_same": false
        },
        {
          "line": 1537,
          "old_api": "propagate",
          "new_api": null,
          "old_text": "propagate(cmd,ctx->client->db->id,argv,argc,target)",
          "new_text": null,
          "old_line_content": "        propagate(cmd,ctx->client->db->id,argv,argc,target);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 5635,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(ctx->module->using,sapi->module)",
          "new_text": null,
          "old_line_content": "        listAddNodeTail(ctx->module->using,sapi->module);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1540,
          "old_api": "alsoPropagate",
          "new_api": null,
          "old_text": "alsoPropagate(cmd,ctx->client->db->id,argv,argc,target)",
          "new_text": null,
          "old_line_content": "        alsoPropagate(cmd,ctx->client->db->id,argv,argc,target);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3590,
          "old_api": "rdbLoadLen",
          "new_api": null,
          "old_text": "rdbLoadLen(io->rio,NULL)",
          "new_text": null,
          "old_line_content": "        uint64_t opcode = rdbLoadLen(io->rio,NULL);",
          "new_line_content": "        if (opcode != RDB_MODULE_OPCODE_UINT) goto loaderr;",
          "content_same": false
        },
        {
          "line": 1545,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(argv)",
          "new_text": null,
          "old_line_content": "    zfree(argv);",
          "new_line_content": "    server.dirty++;",
          "content_same": false
        },
        {
          "line": 3594,
          "old_api": "rdbLoadLenByRef",
          "new_api": null,
          "old_text": "rdbLoadLenByRef(io->rio, NULL, &value)",
          "new_text": null,
          "old_line_content": "    int retval = rdbLoadLenByRef(io->rio, NULL, &value);",
          "new_line_content": "    if (retval == -1) goto loaderr;",
          "content_same": false
        },
        {
          "line": 3599,
          "old_api": "moduleRDBLoadError",
          "new_api": null,
          "old_text": "moduleRDBLoadError(io)",
          "new_text": null,
          "old_line_content": "    moduleRDBLoadError(io);",
          "new_line_content": "    return 0;",
          "content_same": false
        },
        {
          "line": 5648,
          "old_api": "dictGetSafeIterator",
          "new_api": null,
          "old_text": "dictGetSafeIterator(server.sharedapi)",
          "new_text": null,
          "old_line_content": "    dictIterator *di = dictGetSafeIterator(server.sharedapi);",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 5652,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "        RedisModuleSharedAPI *sapi = dictGetVal(de);",
          "new_line_content": "        if (sapi->module == module) {",
          "content_same": false
        },
        {
          "line": 3607,
          "old_api": "RM_SaveUnsigned",
          "new_api": null,
          "old_text": "RM_SaveUnsigned(io,conv.u)",
          "new_text": null,
          "old_line_content": "    RM_SaveUnsigned(io,conv.u);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5655,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(sapi)",
          "new_text": null,
          "old_line_content": "            zfree(sapi);",
          "new_line_content": "            count++;",
          "content_same": false
        },
        {
          "line": 1562,
          "old_api": "alsoPropagate",
          "new_api": null,
          "old_text": "alsoPropagate(ctx->client->cmd,ctx->client->db->id,\n        ctx->client->argv,ctx->client->argc,\n        PROPAGATE_AOF|PROPAGATE_REPL)",
          "new_text": null,
          "old_line_content": "    alsoPropagate(ctx->client->cmd,ctx->client->db->id,",
          "new_line_content": "        ctx->client->argv,ctx->client->argc,",
          "content_same": false
        },
        {
          "line": 5659,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "    return count;",
          "content_same": false
        },
        {
          "line": 3613,
          "old_api": "RM_LoadUnsigned",
          "new_api": null,
          "old_text": "RM_LoadUnsigned(io)",
          "new_text": null,
          "old_line_content": "    conv.u = RM_LoadUnsigned(io);",
          "new_line_content": "    return conv.i;",
          "content_same": false
        },
        {
          "line": 5673,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "    while((ln = listNext(&li))) {",
          "new_line_content": "        RedisModule *used = ln->value;",
          "content_same": false
        },
        {
          "line": 3626,
          "old_api": "rdbSaveLen",
          "new_api": null,
          "old_text": "rdbSaveLen(io->rio, RDB_MODULE_OPCODE_STRING)",
          "new_text": null,
          "old_line_content": "    ssize_t retval = rdbSaveLen(io->rio, RDB_MODULE_OPCODE_STRING);",
          "new_line_content": "    if (retval == -1) goto saveerr;",
          "content_same": false
        },
        {
          "line": 5675,
          "old_api": "listSearchKey",
          "new_api": null,
          "old_text": "listSearchKey(used->usedby,module)",
          "new_text": null,
          "old_line_content": "        listNode *ln = listSearchKey(used->usedby,module);",
          "new_line_content": "        if (ln) {",
          "content_same": false
        },
        {
          "line": 5677,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(module->using,ln)",
          "new_text": null,
          "old_line_content": "            listDelNode(module->using,ln);",
          "new_line_content": "            count++;",
          "content_same": false
        },
        {
          "line": 3630,
          "old_api": "rdbSaveStringObject",
          "new_api": null,
          "old_text": "rdbSaveStringObject(io->rio, s)",
          "new_text": null,
          "old_line_content": "    retval = rdbSaveStringObject(io->rio, s);",
          "new_line_content": "    if (retval == -1) goto saveerr;",
          "content_same": false
        },
        {
          "line": 3644,
          "old_api": "rdbSaveLen",
          "new_api": null,
          "old_text": "rdbSaveLen(io->rio, RDB_MODULE_OPCODE_STRING)",
          "new_text": null,
          "old_line_content": "    ssize_t retval = rdbSaveLen(io->rio, RDB_MODULE_OPCODE_STRING);",
          "new_line_content": "    if (retval == -1) goto saveerr;",
          "content_same": false
        },
        {
          "line": 5694,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "    while((ln = listNext(&li))) {",
          "new_line_content": "        RedisModuleCommandFilter *filter = ln->value;",
          "content_same": false
        },
        {
          "line": 3648,
          "old_api": "rdbSaveRawString",
          "new_api": null,
          "old_text": "rdbSaveRawString(io->rio, (unsigned char*)str,len)",
          "new_text": null,
          "old_line_content": "    retval = rdbSaveRawString(io->rio, (unsigned char*)str,len);",
          "new_line_content": "    if (retval == -1) goto saveerr;",
          "content_same": false
        },
        {
          "line": 5696,
          "old_api": "listSearchKey",
          "new_api": null,
          "old_text": "listSearchKey(moduleCommandFilters,filter)",
          "new_text": null,
          "old_line_content": "        listNode *ln = listSearchKey(moduleCommandFilters,filter);",
          "new_line_content": "        if (ln) {",
          "content_same": false
        },
        {
          "line": 5698,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(moduleCommandFilters,ln)",
          "new_text": null,
          "old_line_content": "            listDelNode(moduleCommandFilters,ln);",
          "new_line_content": "            count++;",
          "content_same": false
        },
        {
          "line": 5701,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(filter)",
          "new_text": null,
          "old_line_content": "        zfree(filter);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1607,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(ci1,0,sizeof(*ci1))",
          "new_text": null,
          "old_line_content": "    memset(ci1,0,sizeof(*ci1));",
          "new_line_content": "    ci1->version = structver;",
          "content_same": false
        },
        {
          "line": 3661,
          "old_api": "rdbLoadLen",
          "new_api": null,
          "old_text": "rdbLoadLen(io->rio,NULL)",
          "new_text": null,
          "old_line_content": "        uint64_t opcode = rdbLoadLen(io->rio,NULL);",
          "new_line_content": "        if (opcode != RDB_MODULE_OPCODE_STRING) goto loaderr;",
          "content_same": false
        },
        {
          "line": 3664,
          "old_api": "rdbGenericLoadStringObject",
          "new_api": null,
          "old_text": "rdbGenericLoadStringObject(io->rio,\n              plain ? RDB_LOAD_PLAIN : RDB_LOAD_NONE, lenptr)",
          "new_text": null,
          "old_line_content": "    void *s = rdbGenericLoadStringObject(io->rio,",
          "new_line_content": "              plain ? RDB_LOAD_PLAIN : RDB_LOAD_NONE, lenptr);",
          "content_same": false
        },
        {
          "line": 1621,
          "old_api": "connPeerToString",
          "new_api": null,
          "old_text": "connPeerToString(client->conn,ci1->addr,sizeof(ci1->addr),&port)",
          "new_text": null,
          "old_line_content": "    connPeerToString(client->conn,ci1->addr,sizeof(ci1->addr),&port);",
          "new_line_content": "    ci1->port = port;",
          "content_same": false
        },
        {
          "line": 3670,
          "old_api": "moduleRDBLoadError",
          "new_api": null,
          "old_text": "moduleRDBLoadError(io)",
          "new_text": null,
          "old_line_content": "    moduleRDBLoadError(io);",
          "new_line_content": "    return NULL;",
          "content_same": false
        },
        {
          "line": 3684,
          "old_api": "moduleLoadString",
          "new_api": null,
          "old_text": "moduleLoadString(io,0,NULL)",
          "new_text": null,
          "old_line_content": "    return moduleLoadString(io,0,NULL);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1637,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(ri1,0,sizeof(*ri1))",
          "new_text": null,
          "old_line_content": "    memset(ri1,0,sizeof(*ri1));",
          "new_line_content": "    ri1->version = structver;",
          "content_same": false
        },
        {
          "line": 3695,
          "old_api": "moduleLoadString",
          "new_api": null,
          "old_text": "moduleLoadString(io,1,lenptr)",
          "new_text": null,
          "old_line_content": "    return moduleLoadString(io,1,lenptr);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3704,
          "old_api": "rdbSaveLen",
          "new_api": null,
          "old_text": "rdbSaveLen(io->rio, RDB_MODULE_OPCODE_DOUBLE)",
          "new_text": null,
          "old_line_content": "    int retval = rdbSaveLen(io->rio, RDB_MODULE_OPCODE_DOUBLE);",
          "new_line_content": "    if (retval == -1) goto saveerr;",
          "content_same": false
        },
        {
          "line": 3708,
          "old_api": "rdbSaveBinaryDoubleValue",
          "new_api": null,
          "old_text": "rdbSaveBinaryDoubleValue(io->rio, value)",
          "new_text": null,
          "old_line_content": "    retval = rdbSaveBinaryDoubleValue(io->rio, value);",
          "new_line_content": "    if (retval == -1) goto saveerr;",
          "content_same": false
        },
        {
          "line": 5763,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*filter))",
          "new_text": null,
          "old_line_content": "    RedisModuleCommandFilter *filter = zmalloc(sizeof(*filter));",
          "new_line_content": "    filter->module = ctx->module;",
          "content_same": false
        },
        {
          "line": 5769,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(ctx->module->filters, filter)",
          "new_text": null,
          "old_line_content": "    listAddNodeTail(ctx->module->filters, filter);",
          "new_line_content": "    return filter;",
          "content_same": false
        },
        {
          "line": 3722,
          "old_api": "rdbLoadLen",
          "new_api": null,
          "old_text": "rdbLoadLen(io->rio,NULL)",
          "new_text": null,
          "old_line_content": "        uint64_t opcode = rdbLoadLen(io->rio,NULL);",
          "new_line_content": "        if (opcode != RDB_MODULE_OPCODE_DOUBLE) goto loaderr;",
          "content_same": false
        },
        {
          "line": 3726,
          "old_api": "rdbLoadBinaryDoubleValue",
          "new_api": null,
          "old_text": "rdbLoadBinaryDoubleValue(io->rio, &value)",
          "new_text": null,
          "old_line_content": "    int retval = rdbLoadBinaryDoubleValue(io->rio, &value);",
          "new_line_content": "    if (retval == -1) goto loaderr;",
          "content_same": false
        },
        {
          "line": 3731,
          "old_api": "moduleRDBLoadError",
          "new_api": null,
          "old_text": "moduleRDBLoadError(io)",
          "new_text": null,
          "old_line_content": "    moduleRDBLoadError(io);",
          "new_line_content": "    return 0;",
          "content_same": false
        },
        {
          "line": 5781,
          "old_api": "listSearchKey",
          "new_api": null,
          "old_text": "listSearchKey(moduleCommandFilters,filter)",
          "new_text": null,
          "old_line_content": "    ln = listSearchKey(moduleCommandFilters,filter);",
          "new_line_content": "    if (!ln) return REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 5783,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(moduleCommandFilters,ln)",
          "new_text": null,
          "old_line_content": "    listDelNode(moduleCommandFilters,ln);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5785,
          "old_api": "listSearchKey",
          "new_api": null,
          "old_text": "listSearchKey(ctx->module->filters,filter)",
          "new_text": null,
          "old_line_content": "    ln = listSearchKey(ctx->module->filters,filter);",
          "new_line_content": "    if (!ln) return REDISMODULE_ERR;    /* Shouldn't happen */",
          "content_same": false
        },
        {
          "line": 5787,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(ctx->module->filters,ln)",
          "new_text": null,
          "old_line_content": "    listDelNode(ctx->module->filters,ln);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1692,
          "old_api": "lookupClientByID",
          "new_api": null,
          "old_text": "lookupClientByID(id)",
          "new_text": null,
          "old_line_content": "    client *client = lookupClientByID(id);",
          "new_line_content": "    if (client == NULL) return REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 3741,
          "old_api": "rdbSaveLen",
          "new_api": null,
          "old_text": "rdbSaveLen(io->rio, RDB_MODULE_OPCODE_FLOAT)",
          "new_text": null,
          "old_line_content": "    int retval = rdbSaveLen(io->rio, RDB_MODULE_OPCODE_FLOAT);",
          "new_line_content": "    if (retval == -1) goto saveerr;",
          "content_same": false
        },
        {
          "line": 5789,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(filter)",
          "new_text": null,
          "old_line_content": "    zfree(filter);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3745,
          "old_api": "rdbSaveBinaryFloatValue",
          "new_api": null,
          "old_text": "rdbSaveBinaryFloatValue(io->rio, value)",
          "new_text": null,
          "old_line_content": "    retval = rdbSaveBinaryFloatValue(io->rio, value);",
          "new_line_content": "    if (retval == -1) goto saveerr;",
          "content_same": false
        },
        {
          "line": 1698,
          "old_api": "modulePopulateClientInfoStructure",
          "new_api": null,
          "old_text": "modulePopulateClientInfoStructure(ci,client,structver)",
          "new_text": null,
          "old_line_content": "    return modulePopulateClientInfoStructure(ci,client,structver);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5795,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(moduleCommandFilters)",
          "new_text": null,
          "old_line_content": "    if (listLength(moduleCommandFilters) == 0) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5799,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(moduleCommandFilters,&li)",
          "new_text": null,
          "old_line_content": "    listRewind(moduleCommandFilters,&li);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1704,
          "old_api": "pubsubPublishMessage",
          "new_api": null,
          "old_text": "pubsubPublishMessage(channel, message)",
          "new_text": null,
          "old_line_content": "    int receivers = pubsubPublishMessage(channel, message);",
          "new_line_content": "    if (server.cluster_enabled)",
          "content_same": false
        },
        {
          "line": 1706,
          "old_api": "clusterPropagatePublish",
          "new_api": null,
          "old_text": "clusterPropagatePublish(channel, message)",
          "new_text": null,
          "old_line_content": "        clusterPropagatePublish(channel, message);",
          "new_line_content": "    return receivers;",
          "content_same": false
        },
        {
          "line": 5806,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "    while((ln = listNext(&li))) {",
          "new_line_content": "        RedisModuleCommandFilter *f = ln->value;",
          "content_same": false
        },
        {
          "line": 3759,
          "old_api": "rdbLoadLen",
          "new_api": null,
          "old_text": "rdbLoadLen(io->rio,NULL)",
          "new_text": null,
          "old_line_content": "        uint64_t opcode = rdbLoadLen(io->rio,NULL);",
          "new_line_content": "        if (opcode != RDB_MODULE_OPCODE_FLOAT) goto loaderr;",
          "content_same": false
        },
        {
          "line": 3763,
          "old_api": "rdbLoadBinaryFloatValue",
          "new_api": null,
          "old_text": "rdbLoadBinaryFloatValue(io->rio, &value)",
          "new_text": null,
          "old_line_content": "    int retval = rdbLoadBinaryFloatValue(io->rio, &value);",
          "new_line_content": "    if (retval == -1) goto loaderr;",
          "content_same": false
        },
        {
          "line": 5815,
          "old_api": "callback",
          "new_api": null,
          "old_text": "f->callback(&filter)",
          "new_text": null,
          "old_line_content": "        f->callback(&filter);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3768,
          "old_api": "moduleRDBLoadError",
          "new_api": null,
          "old_text": "moduleRDBLoadError(io)",
          "new_text": null,
          "old_line_content": "    moduleRDBLoadError(io);",
          "new_line_content": "    return 0;",
          "content_same": false
        },
        {
          "line": 3781,
          "old_api": "RM_SaveStringBuffer",
          "new_api": null,
          "old_text": "RM_SaveStringBuffer(io,buf,len+1)",
          "new_text": null,
          "old_line_content": "    RM_SaveStringBuffer(io,buf,len+1); /* len+1 for '\\0' */",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3790,
          "old_api": "RM_LoadStringBuffer",
          "new_api": null,
          "old_text": "RM_LoadStringBuffer(io,&len)",
          "new_text": null,
          "old_line_content": "    char* str = RM_LoadStringBuffer(io,&len);",
          "new_line_content": "    if (!str) return 0;",
          "content_same": false
        },
        {
          "line": 3793,
          "old_api": "RM_Free",
          "new_api": null,
          "old_text": "RM_Free(str)",
          "new_text": null,
          "old_line_content": "    RM_Free(str);",
          "new_line_content": "    return value;",
          "content_same": false
        },
        {
          "line": 3801,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(modules)",
          "new_text": null,
          "old_line_content": "    dictIterator *di = dictGetIterator(modules);",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 5851,
          "old_api": "zrealloc",
          "new_api": null,
          "old_text": "zrealloc(fctx->argv, (fctx->argc+1)*sizeof(RedisModuleString *))",
          "new_text": null,
          "old_line_content": "    fctx->argv = zrealloc(fctx->argv, (fctx->argc+1)*sizeof(RedisModuleString *));",
          "new_line_content": "    for (i = fctx->argc; i > pos; i--) {",
          "content_same": false
        },
        {
          "line": 3805,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "        struct RedisModule *module = dictGetVal(de);",
          "new_line_content": "        listIter li;",
          "content_same": false
        },
        {
          "line": 3810,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "        while((ln = listNext(&li))) {",
          "new_line_content": "            moduleType *mt = ln->value;",
          "content_same": false
        },
        {
          "line": 3814,
          "old_api": "rdbSaveSingleModuleAux",
          "new_api": null,
          "old_text": "rdbSaveSingleModuleAux(rdb, when, mt)",
          "new_text": null,
          "old_line_content": "            ssize_t ret = rdbSaveSingleModuleAux(rdb, when, mt);",
          "new_line_content": "            if (ret==-1) {",
          "content_same": false
        },
        {
          "line": 3816,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "                dictReleaseIterator(di);",
          "new_line_content": "                return -1;",
          "content_same": false
        },
        {
          "line": 3823,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "    return total_written;",
          "content_same": false
        },
        {
          "line": 5871,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(fctx->argv[pos])",
          "new_text": null,
          "old_line_content": "    decrRefCount(fctx->argv[pos]);",
          "new_line_content": "    fctx->argv[pos] = arg;",
          "content_same": false
        },
        {
          "line": 5885,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(fctx->argv[pos])",
          "new_text": null,
          "old_line_content": "    decrRefCount(fctx->argv[pos]);",
          "new_line_content": "    for (i = pos; i < fctx->argc-1; i++) {",
          "content_same": false
        },
        {
          "line": 5911,
          "old_api": "hasActiveChildProcess",
          "new_api": null,
          "old_text": "hasActiveChildProcess()",
          "new_text": null,
          "old_line_content": "    if (hasActiveChildProcess()) {",
          "new_line_content": "        return -1;",
          "content_same": false
        },
        {
          "line": 5916,
          "old_api": "redisFork",
          "new_api": null,
          "old_text": "redisFork()",
          "new_text": null,
          "old_line_content": "    if ((childpid = redisFork()) == 0) {",
          "new_line_content": "        /* Child */",
          "content_same": false
        },
        {
          "line": 3870,
          "old_api": "mixDigest",
          "new_api": null,
          "old_text": "mixDigest(md->o,ele,len)",
          "new_text": null,
          "old_line_content": "    mixDigest(md->o,ele,len);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5918,
          "old_api": "redisSetProcTitle",
          "new_api": null,
          "old_text": "redisSetProcTitle(\"redis-module-fork\")",
          "new_text": null,
          "old_line_content": "        redisSetProcTitle(\"redis-module-fork\");",
          "new_line_content": "    } else if (childpid == -1) {",
          "content_same": false
        },
        {
          "line": 5921,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,\"Can't fork for module: %s\", strerror(errno));",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1826,
          "old_api": "getMaxmemoryState",
          "new_api": null,
          "old_text": "getMaxmemoryState(NULL,NULL,NULL,&level)",
          "new_text": null,
          "old_line_content": "    int retval = getMaxmemoryState(NULL,NULL,NULL,&level);",
          "new_line_content": "    if (retval == C_ERR) flags |= REDISMODULE_CTX_FLAGS_OOM;",
          "content_same": false
        },
        {
          "line": 3878,
          "old_api": "mixDigest",
          "new_api": null,
          "old_text": "mixDigest(md->o,buf,len)",
          "new_text": null,
          "old_line_content": "    mixDigest(md->o,buf,len);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1831,
          "old_api": "hasActiveChildProcess",
          "new_api": null,
          "old_text": "hasActiveChildProcess()",
          "new_text": null,
          "old_line_content": "    if (hasActiveChildProcess()) flags |= REDISMODULE_CTX_FLAGS_ACTIVE_CHILD;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5927,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE, \"Module fork started pid: %d \", childpid)",
          "new_text": null,
          "old_line_content": "        serverLog(LL_NOTICE, \"Module fork started pid: %d \", childpid);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3884,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(md->o,0,sizeof(md->o))",
          "new_text": null,
          "old_line_content": "    memset(md->o,0,sizeof(md->o));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5937,
          "old_api": "exitFromChild",
          "new_api": null,
          "old_text": "exitFromChild(retcode)",
          "new_text": null,
          "old_line_content": "    exitFromChild(retcode);",
          "new_line_content": "    return REDISMODULE_OK;",
          "content_same": false
        },
        {
          "line": 1847,
          "old_api": "selectDb",
          "new_api": null,
          "old_text": "selectDb(ctx->client,newid)",
          "new_text": null,
          "old_line_content": "    int retval = selectDb(ctx->client,newid);",
          "new_line_content": "    return (retval == C_OK) ? REDISMODULE_OK : REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 5950,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\"Killing running module fork child: %ld\",\n        (long) server.module_child_pid)",
          "new_text": null,
          "old_line_content": "    serverLog(LL_NOTICE,\"Killing running module fork child: %ld\",",
          "new_line_content": "        (long) server.module_child_pid);",
          "content_same": false
        },
        {
          "line": 3903,
          "old_api": "lookupCommandByCString",
          "new_api": null,
          "old_text": "lookupCommandByCString((char*)cmdname)",
          "new_text": null,
          "old_line_content": "    cmd = lookupCommandByCString((char*)cmdname);",
          "new_line_content": "    if (!cmd) {",
          "content_same": false
        },
        {
          "line": 3905,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n            \"Fatal: AOF method for module data type '%s' tried to \"\n            \"emit unknown command '%s'\",\n            io->type->name, cmdname)",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,",
          "new_line_content": "            \"Fatal: AOF method for module data type '%s' tried to \"",
          "content_same": false
        },
        {
          "line": 5953,
          "old_api": "wait4",
          "new_api": null,
          "old_text": "wait4(server.module_child_pid,&statloc,0,NULL)",
          "new_text": null,
          "old_line_content": "        while(wait4(server.module_child_pid,&statloc,0,NULL) !=",
          "new_line_content": "              server.module_child_pid);",
          "content_same": false
        },
        {
          "line": 5961,
          "old_api": "updateDictResizePolicy",
          "new_api": null,
          "old_text": "updateDictResizePolicy()",
          "new_text": null,
          "old_line_content": "    updateDictResizePolicy();",
          "new_line_content": "    return C_OK;",
          "content_same": false
        },
        {
          "line": 3917,
          "old_api": "va_end",
          "new_api": null,
          "old_text": "va_end(ap)",
          "new_text": null,
          "old_line_content": "    va_end(ap);",
          "new_line_content": "    if (argv == NULL) {",
          "content_same": false
        },
        {
          "line": 1871,
          "old_api": "lookupKeyWriteWithFlags",
          "new_api": null,
          "old_text": "lookupKeyWriteWithFlags(ctx->client->db,keyname, flags)",
          "new_text": null,
          "old_line_content": "        value = lookupKeyWriteWithFlags(ctx->client->db,keyname, flags);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 3919,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n            \"Fatal: AOF method for module data type '%s' tried to \"\n            \"call RedisModule_EmitAOF() with wrong format specifiers '%s'\",\n            io->type->name, fmt)",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,",
          "new_line_content": "            \"Fatal: AOF method for module data type '%s' tried to \"",
          "content_same": false
        },
        {
          "line": 1873,
          "old_api": "lookupKeyReadWithFlags",
          "new_api": null,
          "old_text": "lookupKeyReadWithFlags(ctx->client->db,keyname, flags)",
          "new_text": null,
          "old_line_content": "        value = lookupKeyReadWithFlags(ctx->client->db,keyname, flags);",
          "new_line_content": "        if (value == NULL) {",
          "content_same": false
        },
        {
          "line": 5969,
          "old_api": "TerminateModuleForkChild",
          "new_api": null,
          "old_text": "TerminateModuleForkChild(child_pid,1)",
          "new_text": null,
          "old_line_content": "    if (TerminateModuleForkChild(child_pid,1) == C_OK)",
          "new_line_content": "        return REDISMODULE_OK;",
          "content_same": false
        },
        {
          "line": 1880,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*kp))",
          "new_text": null,
          "old_line_content": "    kp = zmalloc(sizeof(*kp));",
          "new_line_content": "    kp->ctx = ctx;",
          "content_same": false
        },
        {
          "line": 3929,
          "old_api": "rioWriteBulkCount",
          "new_api": null,
          "old_text": "rioWriteBulkCount(io->rio,'*',argc)",
          "new_text": null,
          "old_line_content": "    if (!io->error && rioWriteBulkCount(io->rio,'*',argc) == 0)",
          "new_line_content": "        io->error = 1;",
          "content_same": false
        },
        {
          "line": 5976,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\n        \"Module fork exited pid: %d, retcode: %d, bysignal: %d\",\n        server.module_child_pid, exitcode, bysignal)",
          "new_text": null,
          "old_line_content": "    serverLog(LL_NOTICE,",
          "new_line_content": "        \"Module fork exited pid: %d, retcode: %d, bysignal: %d\",",
          "content_same": false
        },
        {
          "line": 1884,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(keyname)",
          "new_text": null,
          "old_line_content": "    incrRefCount(keyname);",
          "new_line_content": "    kp->value = value;",
          "content_same": false
        },
        {
          "line": 5980,
          "old_api": "done_handler",
          "new_api": null,
          "old_text": "moduleForkInfo.done_handler(exitcode, bysignal,\n            moduleForkInfo.done_handler_user_data)",
          "new_text": null,
          "old_line_content": "        moduleForkInfo.done_handler(exitcode, bysignal,",
          "new_line_content": "            moduleForkInfo.done_handler_user_data);",
          "content_same": false
        },
        {
          "line": 3934,
          "old_api": "rioWriteBulkObject",
          "new_api": null,
          "old_text": "rioWriteBulkObject(io->rio,argv[j])",
          "new_text": null,
          "old_line_content": "        if (!io->error && rioWriteBulkObject(io->rio,argv[j]) == 0)",
          "new_line_content": "            io->error = 1;",
          "content_same": false
        },
        {
          "line": 3936,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(argv[j])",
          "new_text": null,
          "old_line_content": "        decrRefCount(argv[j]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1889,
          "old_api": "autoMemoryAdd",
          "new_api": null,
          "old_text": "autoMemoryAdd(ctx,REDISMODULE_AM_KEY,kp)",
          "new_text": null,
          "old_line_content": "    autoMemoryAdd(ctx,REDISMODULE_AM_KEY,kp);",
          "new_line_content": "    return (void*)kp;",
          "content_same": false
        },
        {
          "line": 3938,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(argv)",
          "new_text": null,
          "old_line_content": "    zfree(argv);",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 1896,
          "old_api": "SHOULD_SIGNAL_MODIFIED_KEYS",
          "new_api": null,
          "old_text": "SHOULD_SIGNAL_MODIFIED_KEYS(key->ctx)",
          "new_text": null,
          "old_line_content": "    int signal = SHOULD_SIGNAL_MODIFIED_KEYS(key->ctx);",
          "new_line_content": "    if ((key->mode & REDISMODULE_WRITE) && signal)",
          "content_same": false
        },
        {
          "line": 1898,
          "old_api": "signalModifiedKey",
          "new_api": null,
          "old_text": "signalModifiedKey(key->db,key->key)",
          "new_text": null,
          "old_line_content": "        signalModifiedKey(key->db,key->key);",
          "new_line_content": "    /* TODO: if (key->iter) RM_KeyIteratorStop(kp); */",
          "content_same": false
        },
        {
          "line": 3949,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(RedisModuleCtx))",
          "new_text": null,
          "old_line_content": "    io->ctx = zmalloc(sizeof(RedisModuleCtx));",
          "new_line_content": "    *(io->ctx) = ctxtemplate;",
          "content_same": false
        },
        {
          "line": 1903,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(key)",
          "new_text": null,
          "old_line_content": "    zfree(key);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1935,
          "old_api": "hashTypeLength",
          "new_api": null,
          "old_text": "hashTypeLength(key->value)",
          "new_text": null,
          "old_line_content": "    case OBJ_HASH: return hashTypeLength(key->value);",
          "new_line_content": "    default: return 0;",
          "content_same": false
        },
        {
          "line": 3987,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(levelstr,\"warning\")",
          "new_text": null,
          "old_line_content": "    else if (!strcasecmp(levelstr,\"warning\")) level = LL_WARNING;",
          "new_line_content": "    else level = LL_VERBOSE; /* Default. */",
          "content_same": false
        },
        {
          "line": 3994,
          "old_api": "serverLogRaw",
          "new_api": null,
          "old_text": "serverLogRaw(level,msg)",
          "new_text": null,
          "old_line_content": "    serverLogRaw(level,msg);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1947,
          "old_api": "dbDelete",
          "new_api": null,
          "old_text": "dbDelete(key->db,key->key)",
          "new_text": null,
          "old_line_content": "        dbDelete(key->db,key->key);",
          "new_line_content": "        key->value = NULL;",
          "content_same": false
        },
        {
          "line": 1961,
          "old_api": "dbAsyncDelete",
          "new_api": null,
          "old_text": "dbAsyncDelete(key->db,key->key)",
          "new_text": null,
          "old_line_content": "        dbAsyncDelete(key->db,key->key);",
          "new_line_content": "        key->value = NULL;",
          "content_same": false
        },
        {
          "line": 1971,
          "old_api": "getExpire",
          "new_api": null,
          "old_text": "getExpire(key->db,key->key)",
          "new_text": null,
          "old_line_content": "    mstime_t expire = getExpire(key->db,key->key);",
          "new_line_content": "    if (expire == -1 || key->value == NULL) return -1;",
          "content_same": false
        },
        {
          "line": 4019,
          "old_api": "va_end",
          "new_api": null,
          "old_text": "va_end(ap)",
          "new_text": null,
          "old_line_content": "    va_end(ap);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1973,
          "old_api": "mstime",
          "new_api": null,
          "old_text": "mstime()",
          "new_text": null,
          "old_line_content": "    expire -= mstime();",
          "new_line_content": "    return expire >= 0 ? expire : 0;",
          "content_same": false
        },
        {
          "line": 4031,
          "old_api": "va_end",
          "new_api": null,
          "old_text": "va_end(ap)",
          "new_text": null,
          "old_line_content": "    va_end(ap);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1991,
          "old_api": "setExpire",
          "new_api": null,
          "old_text": "setExpire(key->ctx->client,key->db,key->key,expire)",
          "new_text": null,
          "old_line_content": "        setExpire(key->ctx->client,key->db,key->key,expire);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 4040,
          "old_api": "_serverAssert",
          "new_api": null,
          "old_text": "_serverAssert(estr, file, line)",
          "new_text": null,
          "old_line_content": "    _serverAssert(estr, file, line);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1993,
          "old_api": "removeExpire",
          "new_api": null,
          "old_text": "removeExpire(key->db,key->key)",
          "new_text": null,
          "old_line_content": "        removeExpire(key->db,key->key);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4048,
          "old_api": "latencyAddSample",
          "new_api": null,
          "old_text": "latencyAddSample(event, latency)",
          "new_text": null,
          "old_line_content": "        latencyAddSample(event, latency);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2005,
          "old_api": "restartAOFAfterSYNC",
          "new_api": null,
          "old_text": "restartAOFAfterSYNC()",
          "new_text": null,
          "old_line_content": "    if (server.aof_enabled && restart_aof) restartAOFAfterSYNC();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2010,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(ctx->client->db->dict)",
          "new_text": null,
          "old_line_content": "    return dictSize(ctx->client->db->dict);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4063,
          "old_api": "UNUSED",
          "new_api": null,
          "old_text": "UNUSED(privdata)",
          "new_text": null,
          "old_line_content": "    UNUSED(privdata);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2016,
          "old_api": "autoMemoryAdd",
          "new_api": null,
          "old_text": "autoMemoryAdd(ctx,REDISMODULE_AM_STRING,key)",
          "new_text": null,
          "old_line_content": "    autoMemoryAdd(ctx,REDISMODULE_AM_STRING,key);",
          "new_line_content": "    return key;",
          "content_same": false
        },
        {
          "line": 2031,
          "old_api": "setKey",
          "new_api": null,
          "old_text": "setKey(key->db,key->key,str)",
          "new_text": null,
          "old_line_content": "    setKey(key->db,key->key,str);",
          "new_line_content": "    key->value = str;",
          "content_same": false
        },
        {
          "line": 4088,
          "old_api": "moduleFreeContext",
          "new_api": null,
          "old_text": "moduleFreeContext(&ctx)",
          "new_text": null,
          "old_line_content": "        moduleFreeContext(&ctx);",
          "new_line_content": "    }",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 198,
      "total_additions": 513,
      "total_deletions": 513,
      "total_api_changes": 1224
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 3,
        "api_related_lines": 1224,
        "non_api_lines": 2,
        "non_api_line_numbers": [
          1408,
          1407
        ]
      }
    },
    "api_calls_before": 1100,
    "api_calls_after": 1100,
    "diff_info": {
      "added_lines": 2,
      "removed_lines": 3,
      "total_diff_lines": 24
    }
  }
}
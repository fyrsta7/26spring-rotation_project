{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/b3624f5a160c2a3372ef1a0ab1858a804b7cbfc0",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/b3624f5a160c2a3372ef1a0ab1858a804b7cbfc0/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/b3624f5a160c2a3372ef1a0ab1858a804b7cbfc0/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/b3624f5a160c2a3372ef1a0ab1858a804b7cbfc0/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 667,
          "old_api": "dictGetKey",
          "new_api": "dictGetSignedIntegerVal",
          "old_text": "dictGetKey(de)",
          "new_text": "dictGetSignedIntegerVal(de)",
          "old_line_content": "                    sds key = dictGetKey(de);",
          "new_line_content": "                t = dictGetSignedIntegerVal(de);",
          "content_same": false
        },
        {
          "line": 670,
          "old_api": "propagateExpire",
          "new_api": "sdslen",
          "old_text": "propagateExpire(db,keyobj)",
          "new_text": "sdslen(key)",
          "old_line_content": "                    propagateExpire(db,keyobj);",
          "new_line_content": "                    robj *keyobj = createStringObject(key,sdslen(key));",
          "content_same": false
        },
        {
          "line": 672,
          "old_api": "decrRefCount",
          "new_api": "propagateExpire",
          "old_text": "decrRefCount(keyobj)",
          "new_text": "propagateExpire(db,keyobj)",
          "old_line_content": "                    decrRefCount(keyobj);",
          "new_line_content": "                    propagateExpire(db,keyobj);",
          "content_same": false
        },
        {
          "line": 787,
          "old_api": "listNodeValue",
          "new_api": "listRotate",
          "old_text": "listNodeValue(head)",
          "new_text": "listRotate(server.clients)",
          "old_line_content": "        c = listNodeValue(head);",
          "new_line_content": "        listRotate(server.clients);",
          "content_same": false
        },
        {
          "line": 836,
          "old_api": "trackOperationsPerSecond",
          "new_api": "time",
          "old_text": "trackOperationsPerSecond()",
          "new_text": "time(NULL)",
          "old_line_content": "    run_with_period(100) trackOperationsPerSecond();",
          "new_line_content": "    server.unixtime = time(NULL);",
          "content_same": false
        },
        {
          "line": 870,
          "old_api": "dictSize",
          "new_api": "dictSlots",
          "old_text": "dictSize(server.db[j].expires)",
          "new_text": "dictSlots(server.db[j].dict)",
          "old_line_content": "            vkeys = dictSize(server.db[j].expires);",
          "new_line_content": "            size = dictSlots(server.db[j].dict);",
          "content_same": false
        },
        {
          "line": 872,
          "old_api": "redisLog",
          "new_api": "dictSize",
          "old_text": "redisLog(REDIS_VERBOSE,\"DB %d: %lld keys (%lld volatile) in %lld slots HT.\",j,used,vkeys,size)",
          "new_text": "dictSize(server.db[j].expires)",
          "old_line_content": "                redisLog(REDIS_VERBOSE,\"DB %d: %lld keys (%lld volatile) in %lld slots HT.\",j,used,vkeys,size);",
          "new_line_content": "            vkeys = dictSize(server.db[j].expires);",
          "content_same": false
        },
        {
          "line": 892,
          "old_api": "listLength",
          "new_api": "run_with_period",
          "old_text": "listLength(server.slaves)",
          "new_text": "run_with_period(5000)",
          "old_line_content": "            listLength(server.clients)-listLength(server.slaves),",
          "new_line_content": "    run_with_period(5000) {",
          "content_same": false
        },
        {
          "line": 893,
          "old_api": "listLength",
          "new_api": "redisLog",
          "old_text": "listLength(server.slaves)",
          "new_text": "redisLog(REDIS_VERBOSE,\"%d clients connected (%d slaves), %zu bytes in use\",\n            listLength(server.clients)-listLength(server.slaves),\n            listLength(server.slaves),\n            zmalloc_used_memory())",
          "old_line_content": "            listLength(server.slaves),",
          "new_line_content": "        redisLog(REDIS_VERBOSE,\"%d clients connected (%d slaves), %zu bytes in use\",",
          "content_same": false
        },
        {
          "line": 894,
          "old_api": "zmalloc_used_memory",
          "new_api": "listLength",
          "old_text": "zmalloc_used_memory()",
          "new_text": "listLength(server.slaves)",
          "old_line_content": "            zmalloc_used_memory());",
          "new_line_content": "            listLength(server.clients)-listLength(server.slaves),",
          "content_same": false
        },
        {
          "line": 922,
          "old_api": "backgroundRewriteDoneHandler",
          "new_api": "backgroundSaveDoneHandler",
          "old_text": "backgroundRewriteDoneHandler(exitcode,bysignal)",
          "new_text": "backgroundSaveDoneHandler(exitcode,bysignal)",
          "old_line_content": "                backgroundRewriteDoneHandler(exitcode,bysignal);",
          "new_line_content": "                backgroundSaveDoneHandler(exitcode,bysignal);",
          "content_same": false
        },
        {
          "line": 924,
          "old_api": "updateDictResizePolicy",
          "new_api": "backgroundRewriteDoneHandler",
          "old_text": "updateDictResizePolicy()",
          "new_text": "backgroundRewriteDoneHandler(exitcode,bysignal)",
          "old_line_content": "            updateDictResizePolicy();",
          "new_line_content": "                backgroundRewriteDoneHandler(exitcode,bysignal);",
          "content_same": false
        },
        {
          "line": 936,
          "old_api": "rdbSaveBackground",
          "new_api": "redisLog",
          "old_text": "rdbSaveBackground(server.rdb_filename)",
          "new_text": "redisLog(REDIS_NOTICE,\"%d changes in %d seconds. Saving...\",\n                    sp->changes, sp->seconds)",
          "old_line_content": "                rdbSaveBackground(server.rdb_filename);",
          "new_line_content": "                redisLog(REDIS_NOTICE,\"%d changes in %d seconds. Saving...\",",
          "content_same": false
        },
        {
          "line": 994,
          "old_api": "redisAssert",
          "new_api": "listLength",
          "old_text": "redisAssert(ln != NULL)",
          "new_text": "listLength(server.unblocked_clients)",
          "old_line_content": "        redisAssert(ln != NULL);",
          "new_line_content": "    while (listLength(server.unblocked_clients)) {",
          "content_same": false
        },
        {
          "line": 996,
          "old_api": "listDelNode",
          "new_api": "redisAssert",
          "old_text": "listDelNode(server.unblocked_clients,ln)",
          "new_text": "redisAssert(ln != NULL)",
          "old_line_content": "        listDelNode(server.unblocked_clients,ln);",
          "new_line_content": "        redisAssert(ln != NULL);",
          "content_same": false
        },
        {
          "line": 1002,
          "old_api": "processInputBuffer",
          "new_api": "sdslen",
          "old_text": "processInputBuffer(c)",
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "            processInputBuffer(c);",
          "new_line_content": "        if (c->querybuf && sdslen(c->querybuf) > 0) {",
          "content_same": false
        },
        {
          "line": 1060,
          "old_api": "createStringObject",
          "new_api": "sdsempty",
          "old_text": "createStringObject(\"$7\\r\\nmessage\\r\\n\",13)",
          "new_text": "sdsempty()",
          "old_line_content": "    shared.messagebulk = createStringObject(\"$7\\r\\nmessage\\r\\n\",13);",
          "new_line_content": "            sdscatprintf(sdsempty(),\"select %d\\r\\n\", j));",
          "content_same": false
        },
        {
          "line": 1070,
          "old_api": "createObject",
          "new_api": "createStringObject",
          "old_text": "createObject(REDIS_STRING,(void*)(long)j)",
          "new_text": "createStringObject(\"LPOP\",4)",
          "old_line_content": "        shared.integers[j] = createObject(REDIS_STRING,(void*)(long)j);",
          "new_line_content": "    shared.lpop = createStringObject(\"LPOP\",4);",
          "content_same": false
        },
        {
          "line": 1146,
          "old_api": "appendServerSaveParams",
          "new_api": "resetServerSaveParams",
          "old_text": "appendServerSaveParams(60*60,1)",
          "new_text": "resetServerSaveParams()",
          "old_line_content": "    appendServerSaveParams(60*60,1);  /* save after 1 hour and 1 change */",
          "new_line_content": "    resetServerSaveParams();",
          "content_same": false
        },
        {
          "line": 1182,
          "old_api": "lookupCommandByCString",
          "new_api": "dictCreate",
          "old_text": "lookupCommandByCString(\"del\")",
          "new_text": "dictCreate(&commandTableDictType,NULL)",
          "old_line_content": "    server.delCommand = lookupCommandByCString(\"del\");",
          "new_line_content": "    server.commands = dictCreate(&commandTableDictType,NULL);",
          "content_same": false
        },
        {
          "line": 1183,
          "old_api": "lookupCommandByCString",
          "new_api": "populateCommandTable",
          "old_text": "lookupCommandByCString(\"multi\")",
          "new_text": "populateCommandTable()",
          "old_line_content": "    server.multiCommand = lookupCommandByCString(\"multi\");",
          "new_line_content": "    populateCommandTable();",
          "content_same": false
        },
        {
          "line": 1212,
          "old_api": "strerror",
          "new_api": "getrlimit",
          "old_text": "strerror(errno)",
          "new_text": "getrlimit(RLIMIT_NOFILE,&limit)",
          "old_line_content": "            strerror(errno));",
          "new_line_content": "    if (getrlimit(RLIMIT_NOFILE,&limit) == -1) {",
          "content_same": false
        },
        {
          "line": 1235,
          "old_api": "redisLog",
          "new_api": "strerror",
          "old_text": "redisLog(REDIS_NOTICE,\"Max number of open files set to %d\",\n                    (int) maxfiles)",
          "new_text": "strerror(errno)",
          "old_line_content": "                redisLog(REDIS_NOTICE,\"Max number of open files set to %d\",",
          "new_line_content": "                    (int) maxfiles, strerror(errno), (int) server.maxclients);",
          "content_same": false
        },
        {
          "line": 1247,
          "old_api": "setupSignalHandlers",
          "new_api": "signal",
          "old_text": "setupSignalHandlers()",
          "new_text": "signal(SIGHUP, SIG_IGN)",
          "old_line_content": "    setupSignalHandlers();",
          "new_line_content": "    signal(SIGHUP, SIG_IGN);",
          "content_same": false
        },
        {
          "line": 1261,
          "old_api": "createSharedObjects",
          "new_api": "listCreate",
          "old_text": "createSharedObjects()",
          "new_text": "listCreate()",
          "old_line_content": "    createSharedObjects();",
          "new_line_content": "    server.unblocked_clients = listCreate();",
          "content_same": false
        },
        {
          "line": 1263,
          "old_api": "aeCreateEventLoop",
          "new_api": "createSharedObjects",
          "old_text": "aeCreateEventLoop(server.maxclients+1024)",
          "new_text": "createSharedObjects()",
          "old_line_content": "    server.el = aeCreateEventLoop(server.maxclients+1024);",
          "new_line_content": "    createSharedObjects();",
          "content_same": false
        },
        {
          "line": 1264,
          "old_api": "zmalloc",
          "new_api": "adjustOpenFilesLimit",
          "old_text": "zmalloc(sizeof(redisDb)*server.dbnum)",
          "new_text": "adjustOpenFilesLimit()",
          "old_line_content": "    server.db = zmalloc(sizeof(redisDb)*server.dbnum);",
          "new_line_content": "    adjustOpenFilesLimit();",
          "content_same": false
        },
        {
          "line": 1269,
          "old_api": "redisLog",
          "new_api": "anetTcpServer",
          "old_text": "redisLog(REDIS_WARNING, \"Opening port %d: %s\",\n                server.port, server.neterr)",
          "new_text": "anetTcpServer(server.neterr,server.port,server.bindaddr)",
          "old_line_content": "            redisLog(REDIS_WARNING, \"Opening port %d: %s\",",
          "new_line_content": "        server.ipfd = anetTcpServer(server.neterr,server.port,server.bindaddr);",
          "content_same": false
        },
        {
          "line": 1271,
          "old_api": "exit",
          "new_api": "redisLog",
          "old_text": "exit(1)",
          "new_text": "redisLog(REDIS_WARNING, \"Opening port %d: %s\",\n                server.port, server.neterr)",
          "old_line_content": "            exit(1);",
          "new_line_content": "            redisLog(REDIS_WARNING, \"Opening port %d: %s\",",
          "content_same": false
        },
        {
          "line": 1278,
          "old_api": "redisLog",
          "new_api": "anetUnixServer",
          "old_text": "redisLog(REDIS_WARNING, \"Opening socket: %s\", server.neterr)",
          "new_text": "anetUnixServer(server.neterr,server.unixsocket,server.unixsocketperm)",
          "old_line_content": "            redisLog(REDIS_WARNING, \"Opening socket: %s\", server.neterr);",
          "new_line_content": "        server.sofd = anetUnixServer(server.neterr,server.unixsocket,server.unixsocketperm);",
          "content_same": false
        },
        {
          "line": 1295,
          "old_api": "listSetFreeMethod",
          "new_api": "dictCreate",
          "old_text": "listSetFreeMethod(server.pubsub_patterns,freePubsubPattern)",
          "new_text": "dictCreate(&keylistDictType,NULL)",
          "old_line_content": "    listSetFreeMethod(server.pubsub_patterns,freePubsubPattern);",
          "new_line_content": "    server.pubsub_channels = dictCreate(&keylistDictType,NULL);",
          "content_same": false
        },
        {
          "line": 1296,
          "old_api": "listSetMatchMethod",
          "new_api": "listCreate",
          "old_text": "listSetMatchMethod(server.pubsub_patterns,listMatchPubsubPattern)",
          "new_text": "listCreate()",
          "old_line_content": "    listSetMatchMethod(server.pubsub_patterns,listMatchPubsubPattern);",
          "new_line_content": "    server.pubsub_patterns = listCreate();",
          "content_same": false
        },
        {
          "line": 1302,
          "old_api": "time",
          "new_api": "sdsempty",
          "old_text": "time(NULL)",
          "new_text": "sdsempty()",
          "old_line_content": "    server.lastsave = time(NULL);",
          "new_line_content": "    server.aof_rewrite_buf = sdsempty();",
          "content_same": false
        },
        {
          "line": 1316,
          "old_api": "mstime",
          "new_api": "memset",
          "old_text": "mstime()",
          "new_text": "memset(server.ops_sec_samples,0,sizeof(server.ops_sec_samples))",
          "old_line_content": "    server.ops_sec_last_sample_time = mstime();",
          "new_line_content": "    memset(server.ops_sec_samples,0,sizeof(server.ops_sec_samples));",
          "content_same": false
        },
        {
          "line": 1318,
          "old_api": "time",
          "new_api": "mstime",
          "old_text": "time(NULL)",
          "new_text": "mstime()",
          "old_line_content": "    server.unixtime = time(NULL);",
          "new_line_content": "    server.ops_sec_last_sample_time = mstime();",
          "content_same": false
        },
        {
          "line": 1323,
          "old_api": "oom",
          "new_api": "aeCreateTimeEvent",
          "old_text": "oom(\"creating file event\")",
          "new_text": "aeCreateTimeEvent(server.el, 1, serverCron, NULL, NULL)",
          "old_line_content": "        acceptTcpHandler,NULL) == AE_ERR) oom(\"creating file event\");",
          "new_line_content": "    aeCreateTimeEvent(server.el, 1, serverCron, NULL, NULL);",
          "content_same": false
        },
        {
          "line": 1333,
          "old_api": "exit",
          "new_api": "redisLog",
          "old_text": "exit(1)",
          "new_text": "redisLog(REDIS_WARNING, \"Can't open the append-only file: %s\",\n                strerror(errno))",
          "old_line_content": "            exit(1);",
          "new_line_content": "            redisLog(REDIS_WARNING, \"Can't open the append-only file: %s\",",
          "content_same": false
        },
        {
          "line": 1349,
          "old_api": "slowlogInit",
          "new_api": "clusterInit",
          "old_text": "slowlogInit()",
          "new_text": "clusterInit()",
          "old_line_content": "    slowlogInit();",
          "new_line_content": "    if (server.cluster_enabled) clusterInit();",
          "content_same": false
        },
        {
          "line": 1350,
          "old_api": "bioInit",
          "new_api": "scriptingInit",
          "old_text": "bioInit()",
          "new_text": "scriptingInit()",
          "old_line_content": "    bioInit();",
          "new_line_content": "    scriptingInit();",
          "content_same": false
        },
        {
          "line": 1444,
          "old_api": "dictFetchValue",
          "new_api": "sdsnew",
          "old_text": "dictFetchValue(server.commands, name)",
          "new_text": "sdsnew(s)",
          "old_line_content": "    cmd = dictFetchValue(server.commands, name);",
          "new_line_content": "    sds name = sdsnew(s);",
          "content_same": false
        },
        {
          "line": 1463,
          "old_api": "replicationFeedSlaves",
          "new_api": "feedAppendOnlyFile",
          "old_text": "replicationFeedSlaves(server.slaves,dbid,argv,argc)",
          "new_text": "feedAppendOnlyFile(cmd,dbid,argv,argc)",
          "old_line_content": "        replicationFeedSlaves(server.slaves,dbid,argv,argc);",
          "new_line_content": "        feedAppendOnlyFile(cmd,dbid,argv,argc);",
          "content_same": false
        },
        {
          "line": 1486,
          "old_api": "proc",
          "new_api": "redisOpArrayInit",
          "old_text": "c->cmd->proc(c)",
          "new_text": "redisOpArrayInit(&server.also_propagate)",
          "old_line_content": "    c->cmd->proc(c);",
          "new_line_content": "    redisOpArrayInit(&server.also_propagate);",
          "content_same": false
        },
        {
          "line": 1488,
          "old_api": "ustime",
          "new_api": "proc",
          "old_text": "ustime()",
          "new_text": "c->cmd->proc(c)",
          "old_line_content": "    duration = ustime()-start;",
          "new_line_content": "    c->cmd->proc(c);",
          "content_same": false
        },
        {
          "line": 1525,
          "old_api": "redisOpArrayFree",
          "new_api": "propagate",
          "old_text": "redisOpArrayFree(&server.also_propagate)",
          "new_text": "propagate(rop->cmd, rop->dbid, rop->argv, rop->argc, rop->target)",
          "old_line_content": "        redisOpArrayFree(&server.also_propagate);",
          "new_line_content": "            propagate(rop->cmd, rop->dbid, rop->argv, rop->argc, rop->target);",
          "content_same": false
        },
        {
          "line": 1553,
          "old_api": "addReplyErrorFormat",
          "new_api": "lookupCommand",
          "old_text": "addReplyErrorFormat(c,\"unknown command '%s'\",\n            (char*)c->argv[0]->ptr)",
          "new_text": "lookupCommand(c->argv[0]->ptr)",
          "old_line_content": "        addReplyErrorFormat(c,\"unknown command '%s'\",",
          "new_line_content": "    c->cmd = c->lastcmd = lookupCommand(c->argv[0]->ptr);",
          "content_same": false
        },
        {
          "line": 1582,
          "old_api": "addReplyError",
          "new_api": "getNodeByQuery",
          "old_text": "addReplyError(c,\"Multi keys request invalid in cluster\")",
          "new_text": "getNodeByQuery(c,c->cmd,c->argv,c->argc,&hashslot,&ask)",
          "old_line_content": "                addReplyError(c,\"Multi keys request invalid in cluster\");",
          "new_line_content": "            clusterNode *n = getNodeByQuery(c,c->cmd,c->argv,c->argc,&hashslot,&ask);",
          "content_same": false
        },
        {
          "line": 1601,
          "old_api": "addReply",
          "new_api": "freeMemoryIfNeeded",
          "old_text": "addReply(c, shared.oomerr)",
          "new_text": "freeMemoryIfNeeded()",
          "old_line_content": "            addReply(c, shared.oomerr);",
          "new_line_content": "        int retval = freeMemoryIfNeeded();",
          "content_same": false
        },
        {
          "line": 1662,
          "old_api": "addReply",
          "new_api": "tolower",
          "old_text": "addReply(c, shared.slowscripterr)",
          "new_text": "tolower(((char*)c->argv[1]->ptr)[0])",
          "old_line_content": "        addReply(c, shared.slowscripterr);",
          "new_line_content": "          tolower(((char*)c->argv[1]->ptr)[0]) == 'k'))",
          "content_same": false
        },
        {
          "line": 1674,
          "old_api": "call",
          "new_api": "addReply",
          "old_text": "call(c,REDIS_CALL_FULL)",
          "new_text": "addReply(c,shared.queued)",
          "old_line_content": "        call(c,REDIS_CALL_FULL);",
          "new_line_content": "        addReply(c,shared.queued);",
          "content_same": false
        },
        {
          "line": 1692,
          "old_api": "rdbRemoveTempFile",
          "new_api": "redisLog",
          "old_text": "rdbRemoveTempFile(server.rdb_child_pid)",
          "new_text": "redisLog(REDIS_WARNING,\"There is a child saving an .rdb. Killing it!\")",
          "old_line_content": "        rdbRemoveTempFile(server.rdb_child_pid);",
          "new_line_content": "        redisLog(REDIS_WARNING,\"There is a child saving an .rdb. Killing it!\");",
          "content_same": false
        },
        {
          "line": 1700,
          "old_api": "kill",
          "new_api": "redisLog",
          "old_text": "kill(server.aof_child_pid,SIGKILL)",
          "new_text": "redisLog(REDIS_WARNING,\n                \"There is a child rewriting the AOF. Killing it!\")",
          "old_line_content": "            kill(server.aof_child_pid,SIGKILL);",
          "new_line_content": "            redisLog(REDIS_WARNING,",
          "content_same": false
        },
        {
          "line": 1709,
          "old_api": "rdbSave",
          "new_api": "redisLog",
          "old_text": "rdbSave(server.rdb_filename)",
          "new_text": "redisLog(REDIS_NOTICE,\"Saving the final RDB snapshot before exiting.\")",
          "old_line_content": "        if (rdbSave(server.rdb_filename) != REDIS_OK) {",
          "new_line_content": "        redisLog(REDIS_NOTICE,\"Saving the final RDB snapshot before exiting.\");",
          "content_same": false
        },
        {
          "line": 1727,
          "old_api": "redisLog",
          "new_api": "close",
          "old_text": "redisLog(REDIS_NOTICE,\"Removing the unix socket file.\")",
          "new_text": "close(server.sofd)",
          "old_line_content": "        redisLog(REDIS_NOTICE,\"Removing the unix socket file.\");",
          "new_line_content": "    if (server.sofd != -1) close(server.sofd);",
          "content_same": false
        },
        {
          "line": 1742,
          "old_api": "addReply",
          "new_api": "strcmp",
          "old_text": "addReply(c,shared.ok)",
          "new_text": "strcmp(c->argv[1]->ptr, server.requirepass)",
          "old_line_content": "      addReply(c,shared.ok);",
          "new_line_content": "    } else if (!strcmp(c->argv[1]->ptr, server.requirepass)) {",
          "content_same": false
        },
        {
          "line": 1764,
          "old_api": "addReplyBulkLongLong",
          "new_api": "gettimeofday",
          "old_text": "addReplyBulkLongLong(c,tv.tv_sec)",
          "new_text": "gettimeofday(&tv,NULL)",
          "old_line_content": "    addReplyBulkLongLong(c,tv.tv_sec);",
          "new_line_content": "    gettimeofday(&tv,NULL);",
          "content_same": false
        },
        {
          "line": 1765,
          "old_api": "addReplyBulkLongLong",
          "new_api": "addReplyMultiBulkLen",
          "old_text": "addReplyBulkLongLong(c,tv.tv_usec)",
          "new_text": "addReplyMultiBulkLen(c,2)",
          "old_line_content": "    addReplyBulkLongLong(c,tv.tv_usec);",
          "new_line_content": "    addReplyMultiBulkLen(c,2);",
          "content_same": false
        },
        {
          "line": 1808,
          "old_api": "getClientsMaxBuffers",
          "new_api": "getrusage",
          "old_text": "getClientsMaxBuffers(&lol,&bib)",
          "new_text": "getrusage(RUSAGE_SELF, &self_ru)",
          "old_line_content": "    getClientsMaxBuffers(&lol,&bib);",
          "new_line_content": "    getrusage(RUSAGE_SELF, &self_ru);",
          "content_same": false
        },
        {
          "line": 1816,
          "old_api": "sdscatprintf",
          "new_api": "sdscat",
          "old_text": "sdscatprintf(info,\n            \"# Server\\r\\n\"\n            \"redis_version:%s\\r\\n\"\n            \"redis_git_sha1:%s\\r\\n\"\n            \"redis_git_dirty:%d\\r\\n\"\n            \"os:%s %s %s\\r\\n\"\n            \"arch_bits:%d\\r\\n\"\n            \"multiplexing_api:%s\\r\\n\"\n            \"gcc_version:%d.%d.%d\\r\\n\"\n            \"process_id:%ld\\r\\n\"\n            \"run_id:%s\\r\\n\"\n            \"tcp_port:%d\\r\\n\"\n            \"uptime_in_seconds:%ld\\r\\n\"\n            \"uptime_in_days:%ld\\r\\n\"\n            \"lru_clock:%ld\\r\\n\",\n            REDIS_VERSION,\n            redisGitSHA1(),\n            strtol(redisGitDirty(),NULL,10) > 0,\n            name.sysname, name.release, name.machine,\n            server.arch_bits,\n            aeGetApiName(),\n#ifdef __GNUC__\n            __GNUC__,__GNUC_MINOR__,__GNUC_PATCHLEVEL__,\n#else\n            0,0,0,\n#endif\n            (long) getpid(),\n            server.runid,\n            server.port,\n            uptime,\n            uptime/(3600*24),\n            (unsigned long) server.lruclock)",
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 1853,
          "old_api": "sdscatprintf",
          "new_api": "strcasecmp",
          "old_text": "sdscatprintf(info,\n            \"# Clients\\r\\n\"\n            \"connected_clients:%lu\\r\\n\"\n            \"client_longest_output_list:%lu\\r\\n\"\n            \"client_biggest_input_buf:%lu\\r\\n\"\n            \"blocked_clients:%d\\r\\n\",\n            listLength(server.clients)-listLength(server.slaves),\n            lol, bib,\n            server.bpop_blocked_clients)",
          "new_text": "strcasecmp(section,\"clients\")",
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"clients\")) {",
          "content_same": false
        },
        {
          "line": 1871,
          "old_api": "sdscat",
          "new_api": "zmalloc_used_memory",
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "        bytesToHuman(hmem,zmalloc_used_memory());",
          "content_same": false
        },
        {
          "line": 1872,
          "old_api": "sdscatprintf",
          "new_api": "bytesToHuman",
          "old_text": "sdscatprintf(info,\n            \"# Memory\\r\\n\"\n            \"used_memory:%zu\\r\\n\"\n            \"used_memory_human:%s\\r\\n\"\n            \"used_memory_rss:%zu\\r\\n\"\n            \"used_memory_peak:%zu\\r\\n\"\n            \"used_memory_peak_human:%s\\r\\n\"\n            \"used_memory_lua:%lld\\r\\n\"\n            \"mem_fragmentation_ratio:%.2f\\r\\n\"\n            \"mem_allocator:%s\\r\\n\",\n            zmalloc_used_memory(),\n            hmem,\n            zmalloc_get_rss(),\n            server.stat_peak_memory,\n            peak_hmem,\n            ((long long)lua_gc(server.lua,LUA_GCCOUNT,0))*1024LL,\n            zmalloc_get_fragmentation_ratio(),\n            ZMALLOC_LIB\n            )",
          "new_text": "bytesToHuman(peak_hmem,server.stat_peak_memory)",
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "        bytesToHuman(peak_hmem,server.stat_peak_memory);",
          "content_same": false
        },
        {
          "line": 1884,
          "old_api": "zmalloc_get_rss",
          "new_api": "zmalloc_used_memory",
          "old_text": "zmalloc_get_rss()",
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "            zmalloc_get_rss(),",
          "new_line_content": "            zmalloc_used_memory(),",
          "content_same": false
        },
        {
          "line": 1896,
          "old_api": "sdscatprintf",
          "new_api": "strcasecmp",
          "old_text": "sdscatprintf(info,\n            \"# Persistence\\r\\n\"\n            \"loading:%d\\r\\n\"\n            \"aof_enabled:%d\\r\\n\"\n            \"changes_since_last_save:%lld\\r\\n\"\n            \"bgsave_in_progress:%d\\r\\n\"\n            \"last_save_time:%ld\\r\\n\"\n            \"last_bgsave_status:%s\\r\\n\"\n            \"bgrewriteaof_in_progress:%d\\r\\n\"\n            \"bgrewriteaof_scheduled:%d\\r\\n\",\n            server.loading,\n            server.aof_state != REDIS_AOF_OFF,\n            server.dirty,\n            server.rdb_child_pid != -1,\n            server.lastsave,\n            server.lastbgsave_status == REDIS_OK ? \"ok\" : \"err\",\n            server.aof_child_pid != -1,\n            server.aof_rewrite_scheduled)",
          "new_text": "strcasecmp(section,\"persistence\")",
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"persistence\")) {",
          "content_same": false
        },
        {
          "line": 1966,
          "old_api": "sdscatprintf",
          "new_api": "strcasecmp",
          "old_text": "sdscatprintf(info,\n            \"# Stats\\r\\n\"\n            \"total_connections_received:%lld\\r\\n\"\n            \"total_commands_processed:%lld\\r\\n\"\n            \"instantaneous_ops_per_sec:%lld\\r\\n\"\n            \"rejected_connections:%lld\\r\\n\"\n            \"expired_keys:%lld\\r\\n\"\n            \"evicted_keys:%lld\\r\\n\"\n            \"keyspace_hits:%lld\\r\\n\"\n            \"keyspace_misses:%lld\\r\\n\"\n            \"pubsub_channels:%ld\\r\\n\"\n            \"pubsub_patterns:%lu\\r\\n\"\n            \"latest_fork_usec:%lld\\r\\n\",\n            server.stat_numconnections,\n            server.stat_numcommands,\n            getOperationsPerSecond(),\n            server.stat_rejected_conn,\n            server.stat_expiredkeys,\n            server.stat_evictedkeys,\n            server.stat_keyspace_hits,\n            server.stat_keyspace_misses,\n            dictSize(server.pubsub_channels),\n            listLength(server.pubsub_patterns),\n            server.stat_fork_time)",
          "new_text": "strcasecmp(section,\"stats\")",
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"stats\")) {",
          "content_same": false
        },
        {
          "line": 1995,
          "old_api": "sdscatprintf",
          "new_api": "strcasecmp",
          "old_text": "sdscatprintf(info,\n            \"# Replication\\r\\n\"\n            \"role:%s\\r\\n\",\n            server.masterhost == NULL ? \"master\" : \"slave\")",
          "new_text": "strcasecmp(section,\"replication\")",
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"replication\")) {",
          "content_same": false
        },
        {
          "line": 2032,
          "old_api": "listLength",
          "new_api": "sdscatprintf",
          "old_text": "listLength(server.slaves)",
          "new_text": "sdscatprintf(info,\n            \"connected_slaves:%lu\\r\\n\",\n            listLength(server.slaves))",
          "old_line_content": "            listLength(server.slaves));",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2040,
          "old_api": "listNodeValue",
          "new_api": "listRewind",
          "old_text": "listNodeValue(ln)",
          "new_text": "listRewind(server.slaves,&li)",
          "old_line_content": "                redisClient *slave = listNodeValue(ln);",
          "new_line_content": "            listRewind(server.slaves,&li);",
          "content_same": false
        },
        {
          "line": 2069,
          "old_api": "sdscatprintf",
          "new_api": "strcasecmp",
          "old_text": "sdscatprintf(info,\n        \"# CPU\\r\\n\"\n        \"used_cpu_sys:%.2f\\r\\n\"\n        \"used_cpu_user:%.2f\\r\\n\"\n        \"used_cpu_sys_children:%.2f\\r\\n\"\n        \"used_cpu_user_children:%.2f\\r\\n\",\n        (float)self_ru.ru_stime.tv_sec+(float)self_ru.ru_stime.tv_usec/1000000,\n        (float)self_ru.ru_utime.tv_sec+(float)self_ru.ru_utime.tv_usec/1000000,\n        (float)c_ru.ru_stime.tv_sec+(float)c_ru.ru_stime.tv_usec/1000000,\n        (float)c_ru.ru_utime.tv_sec+(float)c_ru.ru_utime.tv_usec/1000000)",
          "new_text": "strcasecmp(section,\"cpu\")",
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"cpu\")) {",
          "content_same": false
        },
        {
          "line": 2084,
          "old_api": "sdscatprintf",
          "new_api": "strcasecmp",
          "old_text": "sdscatprintf(info, \"# Commandstats\\r\\n\")",
          "new_text": "strcasecmp(section,\"commandstats\")",
          "old_line_content": "        info = sdscatprintf(info, \"# Commandstats\\r\\n\");",
          "new_line_content": "    if (allsections || !strcasecmp(section,\"commandstats\")) {",
          "content_same": false
        },
        {
          "line": 2100,
          "old_api": "sdscatprintf",
          "new_api": "strcasecmp",
          "old_text": "sdscatprintf(info,\n        \"# Cluster\\r\\n\"\n        \"cluster_enabled:%d\\r\\n\",\n        server.cluster_enabled)",
          "new_text": "strcasecmp(section,\"cluster\")",
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"cluster\")) {",
          "content_same": false
        },
        {
          "line": 2109,
          "old_api": "sdscatprintf",
          "new_api": "strcasecmp",
          "old_text": "sdscatprintf(info, \"# Keyspace\\r\\n\")",
          "new_text": "strcasecmp(section,\"keyspace\")",
          "old_line_content": "        info = sdscatprintf(info, \"# Keyspace\\r\\n\");",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"keyspace\")) {",
          "content_same": false
        },
        {
          "line": 2116,
          "old_api": "sdscatprintf",
          "new_api": "dictSize",
          "old_text": "sdscatprintf(info, \"db%d:keys=%lld,expires=%lld\\r\\n\",\n                    j, keys, vkeys)",
          "new_text": "dictSize(server.db[j].expires)",
          "old_line_content": "                info = sdscatprintf(info, \"db%d:keys=%lld,expires=%lld\\r\\n\",",
          "new_line_content": "            vkeys = dictSize(server.db[j].expires);",
          "content_same": false
        },
        {
          "line": 2133,
          "old_api": "sdslen",
          "new_api": "genRedisInfoString",
          "old_text": "sdslen(info)",
          "new_text": "genRedisInfoString(section)",
          "old_line_content": "        (unsigned long)sdslen(info)));",
          "new_line_content": "    sds info = genRedisInfoString(section);",
          "content_same": false
        },
        {
          "line": 2134,
          "old_api": "addReplySds",
          "new_api": "sdsempty",
          "old_text": "addReplySds(c,info)",
          "new_text": "sdsempty()",
          "old_line_content": "    addReplySds(c,info);",
          "new_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"$%lu\\r\\n\",",
          "content_same": false
        },
        {
          "line": 2135,
          "old_api": "addReply",
          "new_api": "sdslen",
          "old_text": "addReply(c,shared.crlf)",
          "new_text": "sdslen(info)",
          "old_line_content": "    addReply(c,shared.crlf);",
          "new_line_content": "        (unsigned long)sdslen(info)));",
          "content_same": false
        },
        {
          "line": 2178,
          "old_api": "listNodeValue",
          "new_api": "listRewind",
          "old_text": "listNodeValue(ln)",
          "new_text": "listRewind(server.slaves,&li)",
          "old_line_content": "            redisClient *slave = listNodeValue(ln);",
          "new_line_content": "        listRewind(server.slaves,&li);",
          "content_same": false
        },
        {
          "line": 2179,
          "old_api": "getClientOutputBufferMemoryUsage",
          "new_api": "listNext",
          "old_text": "getClientOutputBufferMemoryUsage(slave)",
          "new_text": "listNext(&li)",
          "old_line_content": "            unsigned long obuf_bytes = getClientOutputBufferMemoryUsage(slave);",
          "new_line_content": "        while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 2243,
          "old_api": "estimateObjectIdleTime",
          "new_api": "dictFind",
          "old_text": "estimateObjectIdleTime(o)",
          "new_text": "dictFind(db->dict, thiskey)",
          "old_line_content": "                    thisval = estimateObjectIdleTime(o);",
          "new_line_content": "                        de = dictFind(db->dict, thiskey);",
          "content_same": false
        },
        {
          "line": 2261,
          "old_api": "dictGetVal",
          "new_api": "dictGetRandomKey",
          "old_text": "dictGetVal(de)",
          "new_text": "dictGetRandomKey(dict)",
          "old_line_content": "                    thisval = (long) dictGetVal(de);",
          "new_line_content": "                    de = dictGetRandomKey(dict);",
          "content_same": false
        },
        {
          "line": 2320,
          "old_api": "atoi",
          "new_api": "fclose",
          "old_text": "atoi(buf)",
          "new_text": "fclose(fp)",
          "old_line_content": "    return atoi(buf);",
          "new_line_content": "    fclose(fp);",
          "content_same": false
        },
        {
          "line": 2334,
          "old_api": "getpid",
          "new_api": "fopen",
          "old_text": "getpid()",
          "new_text": "fopen(server.pidfile,\"w\")",
          "old_line_content": "        fprintf(fp,\"%d\\n\",(int)getpid());",
          "new_line_content": "    FILE *fp = fopen(server.pidfile,\"w\");",
          "content_same": false
        },
        {
          "line": 2350,
          "old_api": "dup2",
          "new_api": "open",
          "old_text": "dup2(fd, STDOUT_FILENO)",
          "new_text": "open(\"/dev/null\", O_RDWR, 0)",
          "old_line_content": "        dup2(fd, STDOUT_FILENO);",
          "new_line_content": "    if ((fd = open(\"/dev/null\", O_RDWR, 0)) != -1) {",
          "content_same": false
        },
        {
          "line": 2352,
          "old_api": "close",
          "new_api": "dup2",
          "old_text": "close(fd)",
          "new_text": "dup2(fd, STDOUT_FILENO)",
          "old_line_content": "        if (fd > STDERR_FILENO) close(fd);",
          "new_line_content": "        dup2(fd, STDOUT_FILENO);",
          "content_same": false
        },
        {
          "line": 2359,
          "old_api": "redisGitSHA1",
          "new_api": "printf",
          "old_text": "redisGitSHA1()",
          "new_text": "printf(\"Redis server v=%s sha=%s:%d malloc=%s bits=%d\\n\",\n        REDIS_VERSION,\n        redisGitSHA1(),\n        atoi(redisGitDirty()) > 0,\n        ZMALLOC_LIB,\n        sizeof(long) == 4 ? 32 : 64)",
          "old_line_content": "        redisGitSHA1(),",
          "new_line_content": "    printf(\"Redis server v=%s sha=%s:%d malloc=%s bits=%d\\n\",",
          "content_same": false
        },
        {
          "line": 2378,
          "old_api": "exit",
          "new_api": "fprintf",
          "old_text": "exit(1)",
          "new_text": "fprintf(stderr,\"       ./redis-server --port 7777 --slaveof 127.0.0.1 8888\\n\")",
          "old_line_content": "    exit(1);",
          "new_line_content": "    fprintf(stderr,\"       ./redis-server --port 7777 --slaveof 127.0.0.1 8888\\n\");",
          "content_same": false
        },
        {
          "line": 2385,
          "old_api": "snprintf",
          "new_api": "zmalloc",
          "old_text": "snprintf(buf,1024*16,ascii_logo,\n        REDIS_VERSION,\n        redisGitSHA1(),\n        strtol(redisGitDirty(),NULL,10) > 0,\n        (sizeof(long) == 8) ? \"64\" : \"32\",\n        server.cluster_enabled ? \"cluster\" : \"stand alone\",\n        server.port,\n        (long) getpid()\n    )",
          "new_text": "zmalloc(1024*16)",
          "old_line_content": "    snprintf(buf,1024*16,ascii_logo,",
          "new_line_content": "    char *buf = zmalloc(1024*16);",
          "content_same": false
        },
        {
          "line": 2387,
          "old_api": "redisGitSHA1",
          "new_api": "snprintf",
          "old_text": "redisGitSHA1()",
          "new_text": "snprintf(buf,1024*16,ascii_logo,\n        REDIS_VERSION,\n        redisGitSHA1(),\n        strtol(redisGitDirty(),NULL,10) > 0,\n        (sizeof(long) == 8) ? \"64\" : \"32\",\n        server.cluster_enabled ? \"cluster\" : \"stand alone\",\n        server.port,\n        (long) getpid()\n    )",
          "old_line_content": "        redisGitSHA1(),",
          "new_line_content": "    snprintf(buf,1024*16,ascii_logo,",
          "content_same": false
        },
        {
          "line": 2394,
          "old_api": "redisLogRaw",
          "new_api": "getpid",
          "old_text": "redisLogRaw(REDIS_NOTICE|REDIS_LOG_RAW,buf)",
          "new_text": "getpid()",
          "old_line_content": "    redisLogRaw(REDIS_NOTICE|REDIS_LOG_RAW,buf);",
          "new_line_content": "        (long) getpid()",
          "content_same": false
        },
        {
          "line": 2401,
          "old_api": "redisLogFromHandler",
          "new_api": "REDIS_NOTUSED",
          "old_text": "redisLogFromHandler(REDIS_WARNING,\"Received SIGTERM, scheduling shutdown...\")",
          "new_text": "REDIS_NOTUSED(sig)",
          "old_line_content": "    redisLogFromHandler(REDIS_WARNING,\"Received SIGTERM, scheduling shutdown...\");",
          "new_line_content": "    REDIS_NOTUSED(sig);",
          "content_same": false
        },
        {
          "line": 2436,
          "old_api": "gettimeofday",
          "new_api": "zmalloc_enable_thread_safeness",
          "old_text": "gettimeofday(&tv,NULL)",
          "new_text": "zmalloc_enable_thread_safeness()",
          "old_line_content": "    gettimeofday(&tv,NULL);",
          "new_line_content": "    zmalloc_enable_thread_safeness();",
          "content_same": false
        },
        {
          "line": 2438,
          "old_api": "initServerConfig",
          "new_api": "gettimeofday",
          "old_text": "initServerConfig()",
          "new_text": "gettimeofday(&tv,NULL)",
          "old_line_content": "    initServerConfig();",
          "new_line_content": "    gettimeofday(&tv,NULL);",
          "content_same": false
        },
        {
          "line": 2449,
          "old_api": "usage",
          "new_api": "version",
          "old_text": "usage()",
          "new_text": "version()",
          "old_line_content": "            strcmp(argv[1], \"-h\") == 0) usage();",
          "new_line_content": "            strcmp(argv[1], \"--version\") == 0) version();",
          "content_same": false
        },
        {
          "line": 2452,
          "old_api": "atoi",
          "new_api": "strcmp",
          "old_text": "atoi(argv[2])",
          "new_text": "strcmp(argv[1], \"--test-memory\")",
          "old_line_content": "                memtest(atoi(argv[2]),50);",
          "new_line_content": "        if (strcmp(argv[1], \"--test-memory\") == 0) {",
          "content_same": false
        },
        {
          "line": 2455,
          "old_api": "fprintf",
          "new_api": "exit",
          "old_text": "fprintf(stderr,\"Please specify the amount of memory to test in megabytes.\\n\")",
          "new_text": "exit(0)",
          "old_line_content": "                fprintf(stderr,\"Please specify the amount of memory to test in megabytes.\\n\");",
          "new_line_content": "                exit(0);",
          "content_same": false
        },
        {
          "line": 2457,
          "old_api": "exit",
          "new_api": "fprintf",
          "old_text": "exit(1)",
          "new_text": "fprintf(stderr,\"Please specify the amount of memory to test in megabytes.\\n\")",
          "old_line_content": "                exit(1);",
          "new_line_content": "                fprintf(stderr,\"Please specify the amount of memory to test in megabytes.\\n\");",
          "content_same": false
        },
        {
          "line": 2483,
          "old_api": "sdsfree",
          "new_api": "resetServerSaveParams",
          "old_text": "sdsfree(options)",
          "new_text": "resetServerSaveParams()",
          "old_line_content": "        sdsfree(options);",
          "new_line_content": "        resetServerSaveParams();",
          "content_same": false
        },
        {
          "line": 2485,
          "old_api": "redisLog",
          "new_api": "sdsfree",
          "old_text": "redisLog(REDIS_WARNING,\"Warning: no config file specified, using the default config. In order to specify a config file use 'redis-server /path/to/redis.conf'\")",
          "new_text": "sdsfree(options)",
          "old_line_content": "        redisLog(REDIS_WARNING,\"Warning: no config file specified, using the default config. In order to specify a config file use 'redis-server /path/to/redis.conf'\");",
          "new_line_content": "        sdsfree(options);",
          "content_same": false
        },
        {
          "line": 2487,
          "old_api": "daemonize",
          "new_api": "redisLog",
          "old_text": "daemonize()",
          "new_text": "redisLog(REDIS_WARNING,\"Warning: no config file specified, using the default config. In order to specify a config file use 'redis-server /path/to/redis.conf'\")",
          "old_line_content": "    if (server.daemonize) daemonize();",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Warning: no config file specified, using the default config. In order to specify a config file use 'redis-server /path/to/redis.conf'\");",
          "content_same": false
        },
        {
          "line": 2489,
          "old_api": "createPidFile",
          "new_api": "daemonize",
          "old_text": "createPidFile()",
          "new_text": "daemonize()",
          "old_line_content": "    if (server.daemonize) createPidFile();",
          "new_line_content": "    if (server.daemonize) daemonize();",
          "content_same": false
        },
        {
          "line": 2490,
          "old_api": "redisAsciiArt",
          "new_api": "initServer",
          "old_text": "redisAsciiArt()",
          "new_text": "initServer()",
          "old_line_content": "    redisAsciiArt();",
          "new_line_content": "    initServer();",
          "content_same": false
        },
        {
          "line": 2491,
          "old_api": "redisLog",
          "new_api": "createPidFile",
          "old_text": "redisLog(REDIS_WARNING,\"Server started, Redis version \" REDIS_VERSION)",
          "new_text": "createPidFile()",
          "old_line_content": "    redisLog(REDIS_WARNING,\"Server started, Redis version \" REDIS_VERSION);",
          "new_line_content": "    if (server.daemonize) createPidFile();",
          "content_same": false
        },
        {
          "line": 2493,
          "old_api": "linuxOvercommitMemoryWarning",
          "new_api": "redisLog",
          "old_text": "linuxOvercommitMemoryWarning()",
          "new_text": "redisLog(REDIS_WARNING,\"Server started, Redis version \" REDIS_VERSION)",
          "old_line_content": "    linuxOvercommitMemoryWarning();",
          "new_line_content": "    redisLog(REDIS_WARNING,\"Server started, Redis version \" REDIS_VERSION);",
          "content_same": false
        },
        {
          "line": 2495,
          "old_api": "ustime",
          "new_api": "linuxOvercommitMemoryWarning",
          "old_text": "ustime()",
          "new_text": "linuxOvercommitMemoryWarning()",
          "old_line_content": "    start = ustime();",
          "new_line_content": "    linuxOvercommitMemoryWarning();",
          "content_same": false
        },
        {
          "line": 2497,
          "old_api": "loadAppendOnlyFile",
          "new_api": "ustime",
          "old_text": "loadAppendOnlyFile(server.aof_filename)",
          "new_text": "ustime()",
          "old_line_content": "        if (loadAppendOnlyFile(server.aof_filename) == REDIS_OK)",
          "new_line_content": "    start = ustime();",
          "content_same": false
        },
        {
          "line": 2500,
          "old_api": "rdbLoad",
          "new_api": "ustime",
          "old_text": "rdbLoad(server.rdb_filename)",
          "new_text": "ustime()",
          "old_line_content": "        if (rdbLoad(server.rdb_filename) == REDIS_OK) {",
          "new_line_content": "            redisLog(REDIS_NOTICE,\"DB loaded from append only file: %.3f seconds\",(float)(ustime()-start)/1000000);",
          "content_same": false
        },
        {
          "line": 2502,
          "old_api": "ustime",
          "new_api": "rdbLoad",
          "old_text": "ustime()",
          "new_text": "rdbLoad(server.rdb_filename)",
          "old_line_content": "                (float)(ustime()-start)/1000000);",
          "new_line_content": "        if (rdbLoad(server.rdb_filename) == REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 2504,
          "old_api": "redisLog",
          "new_api": "ustime",
          "old_text": "redisLog(REDIS_WARNING,\"Fatal error loading the DB. Exiting.\")",
          "new_text": "ustime()",
          "old_line_content": "            redisLog(REDIS_WARNING,\"Fatal error loading the DB. Exiting.\");",
          "new_line_content": "                (float)(ustime()-start)/1000000);",
          "content_same": false
        },
        {
          "line": 2513,
          "old_api": "aeMain",
          "new_api": "redisLog",
          "old_text": "aeMain(server.el)",
          "new_text": "redisLog(REDIS_NOTICE,\"The server is now ready to accept connections at %s\", server.unixsocket)",
          "old_line_content": "    aeMain(server.el);",
          "new_line_content": "        redisLog(REDIS_NOTICE,\"The server is now ready to accept connections at %s\", server.unixsocket);",
          "content_same": false
        },
        {
          "line": 2514,
          "old_api": "aeDeleteEventLoop",
          "new_api": "aeSetBeforeSleepProc",
          "old_text": "aeDeleteEventLoop(server.el)",
          "new_text": "aeSetBeforeSleepProc(server.el,beforeSleep)",
          "old_line_content": "    aeDeleteEventLoop(server.el);",
          "new_line_content": "    aeSetBeforeSleepProc(server.el,beforeSleep);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1029,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"+QUEUED\\r\\n\")",
          "old_line_content": "        \"-ERR Operation against a key holding the wrong kind of value\\r\\n\"));",
          "new_line_content": "    shared.queued = createObject(REDIS_STRING,sdsnew(\"+QUEUED\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 1545,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[0]->ptr,\"quit\")",
          "old_line_content": "        c->flags |= REDIS_CLOSE_AFTER_REPLY;",
          "new_line_content": "    if (!strcasecmp(c->argv[0]->ptr,\"quit\")) {",
          "content_same": false
        },
        {
          "line": 1546,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "        return REDIS_ERR;",
          "new_line_content": "        addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 2061,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\"slave%d:%s,%d,%s\\r\\n\",\n                    slaveid,ip,port,state)",
          "old_line_content": "                slaveid++;",
          "new_line_content": "                info = sdscatprintf(info,\"slave%d:%s,%d,%s\\r\\n\",",
          "content_same": false
        },
        {
          "line": 1555,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(c,\"unknown command '%s'\",\n            (char*)c->argv[0]->ptr)",
          "old_line_content": "        return REDIS_OK;",
          "new_line_content": "        addReplyErrorFormat(c,\"unknown command '%s'\",",
          "content_same": false
        },
        {
          "line": 2070,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "        \"# CPU\\r\\n\"",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 2071,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n        \"# CPU\\r\\n\"\n        \"used_cpu_sys:%.2f\\r\\n\"\n        \"used_cpu_user:%.2f\\r\\n\"\n        \"used_cpu_sys_children:%.2f\\r\\n\"\n        \"used_cpu_user_children:%.2f\\r\\n\",\n        (float)self_ru.ru_stime.tv_sec+(float)self_ru.ru_stime.tv_usec/1000000,\n        (float)self_ru.ru_utime.tv_sec+(float)self_ru.ru_utime.tv_usec/1000000,\n        (float)c_ru.ru_stime.tv_sec+(float)c_ru.ru_stime.tv_usec/1000000,\n        (float)c_ru.ru_utime.tv_sec+(float)c_ru.ru_utime.tv_usec/1000000)",
          "old_line_content": "        \"used_cpu_sys:%.2f\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 1560,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(c,\"wrong number of arguments for '%s' command\",\n            c->cmd->name)",
          "old_line_content": "        return REDIS_OK;",
          "new_line_content": "        addReplyErrorFormat(c,\"wrong number of arguments for '%s' command\",",
          "content_same": false
        },
        {
          "line": 1055,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\":\")",
          "old_line_content": "",
          "new_line_content": "    shared.colon = createObject(REDIS_STRING,sdsnew(\":\"));",
          "content_same": false
        },
        {
          "line": 1056,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"+\")",
          "old_line_content": "    for (j = 0; j < REDIS_SHARED_SELECT_CMDS; j++) {",
          "new_line_content": "    shared.plus = createObject(REDIS_STRING,sdsnew(\"+\"));",
          "content_same": false
        },
        {
          "line": 1568,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"operation not permitted\")",
          "old_line_content": "    }",
          "new_line_content": "        addReplyError(c,\"operation not permitted\");",
          "content_same": false
        },
        {
          "line": 1059,
          "old_api": null,
          "new_api": "createObject",
          "old_text": null,
          "new_text": "createObject(REDIS_STRING,\n            sdscatprintf(sdsempty(),\"select %d\\r\\n\", j))",
          "old_line_content": "    }",
          "new_line_content": "        shared.select[j] = createObject(REDIS_STRING,",
          "content_same": false
        },
        {
          "line": 2085,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "        numcommands = sizeof(redisCommandTable)/sizeof(struct redisCommand);",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 2086,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info, \"# Commandstats\\r\\n\")",
          "old_line_content": "        for (j = 0; j < numcommands; j++) {",
          "new_line_content": "        info = sdscatprintf(info, \"# Commandstats\\r\\n\");",
          "content_same": false
        },
        {
          "line": 1578,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"The cluster is down. Check with CLUSTER INFO for more information\")",
          "old_line_content": "        } else {",
          "new_line_content": "            addReplyError(c,\"The cluster is down. Check with CLUSTER INFO for more information\");",
          "content_same": false
        },
        {
          "line": 2092,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                \"cmdstat_%s:calls=%lld,usec=%lld,usec_per_call=%.2f\\r\\n\",\n                c->name, c->calls, c->microseconds,\n                (c->calls == 0) ? 0 : ((float)c->microseconds/c->calls))",
          "old_line_content": "                c->name, c->calls, c->microseconds,",
          "new_line_content": "            info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 1069,
          "old_api": null,
          "new_api": "createStringObject",
          "old_text": null,
          "new_text": "createStringObject(\"RPOP\",4)",
          "old_line_content": "    for (j = 0; j < REDIS_SHARED_INTEGERS; j++) {",
          "new_line_content": "    shared.rpop = createStringObject(\"RPOP\",4);",
          "content_same": false
        },
        {
          "line": 1072,
          "old_api": null,
          "new_api": "createObject",
          "old_text": null,
          "new_text": "createObject(REDIS_STRING,(void*)(long)j)",
          "old_line_content": "    }",
          "new_line_content": "        shared.integers[j] = createObject(REDIS_STRING,(void*)(long)j);",
          "content_same": false
        },
        {
          "line": 1584,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"Multi keys request invalid in cluster\")",
          "old_line_content": "            } else if (n != server.cluster.myself) {",
          "new_line_content": "                addReplyError(c,\"Multi keys request invalid in cluster\");",
          "content_same": false
        },
        {
          "line": 1587,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "                    hashslot,n->ip,n->port));",
          "new_line_content": "                addReplySds(c,sdscatprintf(sdsempty(),",
          "content_same": false
        },
        {
          "line": 2101,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "        \"# Cluster\\r\\n\"",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 2102,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n        \"# Cluster\\r\\n\"\n        \"cluster_enabled:%d\\r\\n\",\n        server.cluster_enabled)",
          "old_line_content": "        \"cluster_enabled:%d\\r\\n\",",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 1078,
          "old_api": null,
          "new_api": "createObject",
          "old_text": null,
          "new_text": "createObject(REDIS_STRING,\n            sdscatprintf(sdsempty(),\"$%d\\r\\n\",j))",
          "old_line_content": "    }",
          "new_line_content": "        shared.bulkhdr[j] = createObject(REDIS_STRING,",
          "content_same": false
        },
        {
          "line": 1079,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "}",
          "new_line_content": "            sdscatprintf(sdsempty(),\"$%d\\r\\n\",j));",
          "content_same": false
        },
        {
          "line": 1084,
          "old_api": null,
          "new_api": "getRandomHexChars",
          "old_text": null,
          "new_text": "getRandomHexChars(server.runid,REDIS_RUN_ID_SIZE)",
          "old_line_content": "    server.arch_bits = (sizeof(long) == 8) ? 64 : 32;",
          "new_line_content": "    getRandomHexChars(server.runid,REDIS_RUN_ID_SIZE);",
          "content_same": false
        },
        {
          "line": 2110,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "        for (j = 0; j < server.dbnum; j++) {",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 2111,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info, \"# Keyspace\\r\\n\")",
          "old_line_content": "            long long keys, vkeys;",
          "new_line_content": "        info = sdscatprintf(info, \"# Keyspace\\r\\n\");",
          "content_same": false
        },
        {
          "line": 2115,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(server.db[j].dict)",
          "old_line_content": "            if (keys || vkeys) {",
          "new_line_content": "            keys = dictSize(server.db[j].dict);",
          "content_same": false
        },
        {
          "line": 1603,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.oomerr)",
          "old_line_content": "        }",
          "new_line_content": "            addReply(c, shared.oomerr);",
          "content_same": false
        },
        {
          "line": 2118,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info, \"db%d:keys=%lld,expires=%lld\\r\\n\",\n                    j, keys, vkeys)",
          "old_line_content": "            }",
          "new_line_content": "                info = sdscatprintf(info, \"db%d:keys=%lld,expires=%lld\\r\\n\",",
          "content_same": false
        },
        {
          "line": 1101,
          "old_api": null,
          "new_api": "zstrdup",
          "old_text": null,
          "new_text": "zstrdup(\"redis\")",
          "old_line_content": "    server.daemonize = 0;",
          "new_line_content": "    server.syslog_ident = zstrdup(\"redis\");",
          "content_same": false
        },
        {
          "line": 1614,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.bgsaveerr)",
          "old_line_content": "    }",
          "new_line_content": "        addReply(c, shared.bgsaveerr);",
          "content_same": false
        },
        {
          "line": 2130,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "    }",
          "new_line_content": "        addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 1111,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    server.aof_fd = -1;",
          "new_line_content": "    server.aof_last_fsync = time(NULL);",
          "content_same": false
        },
        {
          "line": 2136,
          "old_api": null,
          "new_api": "addReplySds",
          "old_text": null,
          "new_text": "addReplySds(c,info)",
          "old_line_content": "}",
          "new_line_content": "    addReplySds(c,info);",
          "content_same": false
        },
        {
          "line": 2137,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.crlf)",
          "old_line_content": "",
          "new_line_content": "    addReply(c,shared.crlf);",
          "content_same": false
        },
        {
          "line": 1624,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.roslaveerr)",
          "old_line_content": "    }",
          "new_line_content": "        addReply(c, shared.roslaveerr);",
          "content_same": false
        },
        {
          "line": 1117,
          "old_api": null,
          "new_api": "zstrdup",
          "old_text": null,
          "new_text": "zstrdup(\"dump.rdb\")",
          "old_line_content": "    server.requirepass = NULL;",
          "new_line_content": "    server.rdb_filename = zstrdup(\"dump.rdb\");",
          "content_same": false
        },
        {
          "line": 1118,
          "old_api": null,
          "new_api": "zstrdup",
          "old_text": null,
          "new_text": "zstrdup(\"appendonly.aof\")",
          "old_line_content": "    server.rdb_compression = 1;",
          "new_line_content": "    server.aof_filename = zstrdup(\"appendonly.aof\");",
          "content_same": false
        },
        {
          "line": 1629,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(c->pubsub_patterns)",
          "old_line_content": "        c->cmd->proc != subscribeCommand &&",
          "new_line_content": "    if ((dictSize(c->pubsub_channels) > 0 || listLength(c->pubsub_patterns) > 0)",
          "content_same": false
        },
        {
          "line": 2146,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(server.monitors,c)",
          "old_line_content": "}",
          "new_line_content": "    listAddNodeTail(server.monitors,c);",
          "content_same": false
        },
        {
          "line": 2147,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "",
          "new_line_content": "    addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 1635,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"only (P)SUBSCRIBE / (P)UNSUBSCRIBE / QUIT allowed in this context\")",
          "old_line_content": "    }",
          "new_line_content": "        addReplyError(c,\"only (P)SUBSCRIBE / (P)UNSUBSCRIBE / QUIT allowed in this context\");",
          "content_same": false
        },
        {
          "line": 1645,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.masterdownerr)",
          "old_line_content": "    }",
          "new_line_content": "        addReply(c, shared.masterdownerr);",
          "content_same": false
        },
        {
          "line": 1139,
          "old_api": null,
          "new_api": "zstrdup",
          "old_text": null,
          "new_text": "zstrdup(\"nodes.conf\")",
          "old_line_content": "    server.lua_time_limit = REDIS_LUA_TIME_LIMIT;",
          "new_line_content": "    server.cluster.configfile = zstrdup(\"nodes.conf\");",
          "content_same": false
        },
        {
          "line": 1651,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.loadingerr)",
          "old_line_content": "    }",
          "new_line_content": "        addReply(c, shared.loadingerr);",
          "content_same": false
        },
        {
          "line": 2169,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.slaves)",
          "old_line_content": "    /* Remove the size of slaves output buffers and AOF buffer from the",
          "new_line_content": "    int slaves = listLength(server.slaves);",
          "content_same": false
        },
        {
          "line": 1145,
          "old_api": null,
          "new_api": "updateLRUClock",
          "old_text": null,
          "new_text": "updateLRUClock()",
          "old_line_content": "",
          "new_line_content": "    updateLRUClock();",
          "content_same": false
        },
        {
          "line": 1659,
          "old_api": null,
          "new_api": "tolower",
          "old_text": null,
          "new_text": "tolower(((char*)c->argv[1]->ptr)[0])",
          "old_line_content": "          c->argc == 2 &&",
          "new_line_content": "          tolower(((char*)c->argv[1]->ptr)[0]) == 'n') &&",
          "content_same": false
        },
        {
          "line": 2173,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "        listIter li;",
          "new_line_content": "    mem_used = zmalloc_used_memory();",
          "content_same": false
        },
        {
          "line": 1149,
          "old_api": null,
          "new_api": "appendServerSaveParams",
          "old_text": null,
          "new_text": "appendServerSaveParams(300,100)",
          "old_line_content": "    /* Replication related */",
          "new_line_content": "    appendServerSaveParams(300,100);  /* save after 5 minutes and 100 changes */",
          "content_same": false
        },
        {
          "line": 1150,
          "old_api": null,
          "new_api": "appendServerSaveParams",
          "old_text": null,
          "new_text": "appendServerSaveParams(60,10000)",
          "old_line_content": "    server.masterauth = NULL;",
          "new_line_content": "    appendServerSaveParams(60,10000); /* save after 1 minute and 10000 changes */",
          "content_same": false
        },
        {
          "line": 1664,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.slowscripterr)",
          "old_line_content": "    }",
          "new_line_content": "        addReply(c, shared.slowscripterr);",
          "content_same": false
        },
        {
          "line": 2180,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(ln)",
          "old_line_content": "            if (obuf_bytes > mem_used)",
          "new_line_content": "            redisClient *slave = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 2181,
          "old_api": null,
          "new_api": "getClientOutputBufferMemoryUsage",
          "old_text": null,
          "new_text": "getClientOutputBufferMemoryUsage(slave)",
          "old_line_content": "                mem_used = 0;",
          "new_line_content": "            unsigned long obuf_bytes = getClientOutputBufferMemoryUsage(slave);",
          "content_same": false
        },
        {
          "line": 1160,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    /* Client output buffer limits */",
          "new_line_content": "    server.repl_down_since = time(NULL);",
          "content_same": false
        },
        {
          "line": 1673,
          "old_api": null,
          "new_api": "queueMultiCommand",
          "old_text": null,
          "new_text": "queueMultiCommand(c)",
          "old_line_content": "    } else {",
          "new_line_content": "        queueMultiCommand(c);",
          "content_same": false
        },
        {
          "line": 1676,
          "old_api": null,
          "new_api": "call",
          "old_text": null,
          "new_text": "call(c,REDIS_CALL_FULL)",
          "old_line_content": "    return REDIS_OK;",
          "new_line_content": "        call(c,REDIS_CALL_FULL);",
          "content_same": false
        },
        {
          "line": 2189,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(server.aof_buf)",
          "old_line_content": "    }",
          "new_line_content": "        mem_used -= sdslen(server.aof_buf);",
          "content_same": false
        },
        {
          "line": 2190,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(server.aof_rewrite_buf)",
          "old_line_content": "",
          "new_line_content": "        mem_used -= sdslen(server.aof_rewrite_buf);",
          "content_same": false
        },
        {
          "line": 1687,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"User requested shutdown...\")",
          "old_line_content": "       We want to avoid race conditions, for instance our saving child may",
          "new_line_content": "    redisLog(REDIS_WARNING,\"User requested shutdown...\");",
          "content_same": false
        },
        {
          "line": 666,
          "old_api": null,
          "new_api": "dictGetRandomKey",
          "old_text": null,
          "new_text": "dictGetRandomKey(db->expires)",
          "old_line_content": "                if (now > t) {",
          "new_line_content": "                if ((de = dictGetRandomKey(db->expires)) == NULL) break;",
          "content_same": false
        },
        {
          "line": 669,
          "old_api": null,
          "new_api": "dictGetKey",
          "old_text": null,
          "new_text": "dictGetKey(de)",
          "old_line_content": "",
          "new_line_content": "                    sds key = dictGetKey(de);",
          "content_same": false
        },
        {
          "line": 1693,
          "old_api": null,
          "new_api": "kill",
          "old_text": null,
          "new_text": "kill(server.rdb_child_pid,SIGKILL)",
          "old_line_content": "    }",
          "new_line_content": "        kill(server.rdb_child_pid,SIGKILL);",
          "content_same": false
        },
        {
          "line": 1694,
          "old_api": null,
          "new_api": "rdbRemoveTempFile",
          "old_text": null,
          "new_text": "rdbRemoveTempFile(server.rdb_child_pid)",
          "old_line_content": "    if (server.aof_state != REDIS_AOF_OFF) {",
          "new_line_content": "        rdbRemoveTempFile(server.rdb_child_pid);",
          "content_same": false
        },
        {
          "line": 673,
          "old_api": null,
          "new_api": "dbDelete",
          "old_text": null,
          "new_text": "dbDelete(db,keyobj)",
          "old_line_content": "                    expired++;",
          "new_line_content": "                    dbDelete(db,keyobj);",
          "content_same": false
        },
        {
          "line": 674,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(keyobj)",
          "old_line_content": "                    server.stat_expiredkeys++;",
          "new_line_content": "                    decrRefCount(keyobj);",
          "content_same": false
        },
        {
          "line": 1185,
          "old_api": null,
          "new_api": "lookupCommandByCString",
          "old_text": null,
          "new_text": "lookupCommandByCString(\"multi\")",
          "old_line_content": "    ",
          "new_line_content": "    server.multiCommand = lookupCommandByCString(\"multi\");",
          "content_same": false
        },
        {
          "line": 1186,
          "old_api": null,
          "new_api": "lookupCommandByCString",
          "old_text": null,
          "new_text": "lookupCommandByCString(\"lpush\")",
          "old_line_content": "    /* Slow log */",
          "new_line_content": "    server.lpushCommand = lookupCommandByCString(\"lpush\");",
          "content_same": false
        },
        {
          "line": 1702,
          "old_api": null,
          "new_api": "kill",
          "old_text": null,
          "new_text": "kill(server.aof_child_pid,SIGKILL)",
          "old_line_content": "        /* Append only file: fsync() the AOF and exit */",
          "new_line_content": "            kill(server.aof_child_pid,SIGKILL);",
          "content_same": false
        },
        {
          "line": 1705,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Calling fsync() on the AOF file.\")",
          "old_line_content": "    }",
          "new_line_content": "        redisLog(REDIS_NOTICE,\"Calling fsync() on the AOF file.\");",
          "content_same": false
        },
        {
          "line": 1706,
          "old_api": null,
          "new_api": "aof_fsync",
          "old_text": null,
          "new_text": "aof_fsync(server.aof_fd)",
          "old_line_content": "    if ((server.saveparamslen > 0 && !nosave) || save) {",
          "new_line_content": "        aof_fsync(server.aof_fd);",
          "content_same": false
        },
        {
          "line": 2219,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(dict)",
          "old_line_content": "            /* volatile-random and allkeys-random policy */",
          "new_line_content": "            if (dictSize(dict) == 0) continue;",
          "content_same": false
        },
        {
          "line": 684,
          "old_api": null,
          "new_api": "ustime",
          "old_text": null,
          "new_text": "ustime()",
          "old_line_content": "    }",
          "new_line_content": "                (ustime()-start) > timelimit) return;",
          "content_same": false
        },
        {
          "line": 1711,
          "old_api": null,
          "new_api": "rdbSave",
          "old_text": null,
          "new_text": "rdbSave(server.rdb_filename)",
          "old_line_content": "             * operating. Note that if there was a background saving process,",
          "new_line_content": "        if (rdbSave(server.rdb_filename) != REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 2225,
          "old_api": null,
          "new_api": "dictGetRandomKey",
          "old_text": null,
          "new_text": "dictGetRandomKey(dict)",
          "old_line_content": "            }",
          "new_line_content": "                de = dictGetRandomKey(dict);",
          "content_same": false
        },
        {
          "line": 2226,
          "old_api": null,
          "new_api": "dictGetKey",
          "old_text": null,
          "new_text": "dictGetKey(de)",
          "old_line_content": "",
          "new_line_content": "                bestkey = dictGetKey(de);",
          "content_same": false
        },
        {
          "line": 1717,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Error trying to save the DB, can't exit.\")",
          "old_line_content": "        }",
          "new_line_content": "            redisLog(REDIS_WARNING,\"Error trying to save the DB, can't exit.\");",
          "content_same": false
        },
        {
          "line": 697,
          "old_api": null,
          "new_api": "mstime",
          "old_text": null,
          "new_text": "mstime()",
          "old_line_content": "    long long ops_sec;",
          "new_line_content": "    long long t = mstime() - server.ops_sec_last_sample_time;",
          "content_same": false
        },
        {
          "line": 1722,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Removing the pid file.\")",
          "old_line_content": "    }",
          "new_line_content": "        redisLog(REDIS_NOTICE,\"Removing the pid file.\");",
          "content_same": false
        },
        {
          "line": 1723,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(server.pidfile)",
          "old_line_content": "    /* Close the listening sockets. Apparently this allows faster restarts. */",
          "new_line_content": "        unlink(server.pidfile);",
          "content_same": false
        },
        {
          "line": 1213,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Unable to obtain the current NOFILE limit (%s), assuming 1024 and setting the max clients configuration accordingly.\",\n            strerror(errno))",
          "old_line_content": "        server.maxclients = 1024-32;",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Unable to obtain the current NOFILE limit (%s), assuming 1024 and setting the max clients configuration accordingly.\",",
          "content_same": false
        },
        {
          "line": 2238,
          "old_api": null,
          "new_api": "dictGetRandomKey",
          "old_text": null,
          "new_text": "dictGetRandomKey(dict)",
          "old_line_content": "                    /* When policy is volatile-lru we need an additonal lookup",
          "new_line_content": "                    de = dictGetRandomKey(dict);",
          "content_same": false
        },
        {
          "line": 2239,
          "old_api": null,
          "new_api": "dictGetKey",
          "old_text": null,
          "new_text": "dictGetKey(de)",
          "old_line_content": "                     * to locate the real key, as dict is set to db->expires. */",
          "new_line_content": "                    thiskey = dictGetKey(de);",
          "content_same": false
        },
        {
          "line": 1214,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "    } else {",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 705,
          "old_api": null,
          "new_api": "mstime",
          "old_text": null,
          "new_text": "mstime()",
          "old_line_content": "}",
          "new_line_content": "    server.ops_sec_last_sample_time = mstime();",
          "content_same": false
        },
        {
          "line": 1726,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(server.ipfd)",
          "old_line_content": "    if (server.unixsocket) {",
          "new_line_content": "    if (server.ipfd != -1) close(server.ipfd);",
          "content_same": false
        },
        {
          "line": 1729,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Removing the unix socket file.\")",
          "old_line_content": "    }",
          "new_line_content": "        redisLog(REDIS_NOTICE,\"Removing the unix socket file.\");",
          "content_same": false
        },
        {
          "line": 2244,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "",
          "new_line_content": "                    o = dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 2245,
          "old_api": null,
          "new_api": "estimateObjectIdleTime",
          "old_text": null,
          "new_text": "estimateObjectIdleTime(o)",
          "old_line_content": "                    /* Higher idle time is better candidate for deletion */",
          "new_line_content": "                    thisval = estimateObjectIdleTime(o);",
          "content_same": false
        },
        {
          "line": 1730,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(server.unixsocket)",
          "old_line_content": "",
          "new_line_content": "        unlink(server.unixsocket); /* don't care if this fails */",
          "content_same": false
        },
        {
          "line": 1733,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Redis is now ready to exit, bye bye...\")",
          "old_line_content": "}",
          "new_line_content": "    redisLog(REDIS_WARNING,\"Redis is now ready to exit, bye bye...\");",
          "content_same": false
        },
        {
          "line": 1228,
          "old_api": null,
          "new_api": "setrlimit",
          "old_text": null,
          "new_text": "setrlimit(RLIMIT_NOFILE,&limit)",
          "old_line_content": "            }",
          "new_line_content": "                if (setrlimit(RLIMIT_NOFILE,&limit) != -1) break;",
          "content_same": false
        },
        {
          "line": 1741,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"Client sent AUTH, but no password is set\")",
          "old_line_content": "      c->authenticated = 1;",
          "new_line_content": "        addReplyError(c,\"Client sent AUTH, but no password is set\");",
          "content_same": false
        },
        {
          "line": 1744,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "      c->authenticated = 0;",
          "new_line_content": "      addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 1234,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Unable to set the max number of files limit to %d (%s), setting the max clients configuration to %d.\",\n                    (int) maxfiles, strerror(errno), (int) server.maxclients)",
          "old_line_content": "            } else {",
          "new_line_content": "                redisLog(REDIS_WARNING,\"Unable to set the max number of files limit to %d (%s), setting the max clients configuration to %d.\",",
          "content_same": false
        },
        {
          "line": 1747,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"invalid password\")",
          "old_line_content": "}",
          "new_line_content": "      addReplyError(c,\"invalid password\");",
          "content_same": false
        },
        {
          "line": 1237,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Max number of open files set to %d\",\n                    (int) maxfiles)",
          "old_line_content": "            }",
          "new_line_content": "                redisLog(REDIS_NOTICE,\"Max number of open files set to %d\",",
          "content_same": false
        },
        {
          "line": 2262,
          "old_api": null,
          "new_api": "dictGetKey",
          "old_text": null,
          "new_text": "dictGetKey(de)",
          "old_line_content": "",
          "new_line_content": "                    thiskey = dictGetKey(de);",
          "content_same": false
        },
        {
          "line": 2263,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "                    /* Expire sooner (minor expire unix timestamp) is better",
          "new_line_content": "                    thisval = (long) dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 727,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(c->pubsub_channels)",
          "old_line_content": "        (now - c->lastinteraction > server.maxidletime))",
          "new_line_content": "        dictSize(c->pubsub_channels) == 0 && /* no timeout for pubsub */",
          "content_same": false
        },
        {
          "line": 728,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(c->pubsub_patterns)",
          "old_line_content": "    {",
          "new_line_content": "        listLength(c->pubsub_patterns) == 0 &&",
          "content_same": false
        },
        {
          "line": 1752,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.pong)",
          "old_line_content": "",
          "new_line_content": "    addReply(c,shared.pong);",
          "content_same": false
        },
        {
          "line": 731,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_VERBOSE,\"Closing idle client\")",
          "old_line_content": "        return 1;",
          "new_line_content": "        redisLog(REDIS_VERBOSE,\"Closing idle client\");",
          "content_same": false
        },
        {
          "line": 732,
          "old_api": null,
          "new_api": "freeClient",
          "old_text": null,
          "new_text": "freeClient(c)",
          "old_line_content": "    } else if (c->flags & REDIS_BLOCKED) {",
          "new_line_content": "        freeClient(c);",
          "content_same": false
        },
        {
          "line": 1756,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,c->argv[1])",
          "old_line_content": "",
          "new_line_content": "    addReplyBulk(c,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 736,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullmultibulk)",
          "old_line_content": "        }",
          "new_line_content": "            addReply(c,shared.nullmultibulk);",
          "content_same": false
        },
        {
          "line": 737,
          "old_api": null,
          "new_api": "unblockClientWaitingData",
          "old_text": null,
          "new_text": "unblockClientWaitingData(c)",
          "old_line_content": "    }",
          "new_line_content": "            unblockClientWaitingData(c);",
          "content_same": false
        },
        {
          "line": 1248,
          "old_api": null,
          "new_api": "signal",
          "old_text": null,
          "new_text": "signal(SIGPIPE, SIG_IGN)",
          "old_line_content": "",
          "new_line_content": "    signal(SIGPIPE, SIG_IGN);",
          "content_same": false
        },
        {
          "line": 1249,
          "old_api": null,
          "new_api": "setupSignalHandlers",
          "old_text": null,
          "new_text": "setupSignalHandlers()",
          "old_line_content": "    if (server.syslog_enabled) {",
          "new_line_content": "    setupSignalHandlers();",
          "content_same": false
        },
        {
          "line": 1252,
          "old_api": null,
          "new_api": "openlog",
          "old_text": null,
          "new_text": "openlog(server.syslog_ident, LOG_PID | LOG_NDELAY | LOG_NOWAIT,\n            server.syslog_facility)",
          "old_line_content": "    }",
          "new_line_content": "        openlog(server.syslog_ident, LOG_PID | LOG_NDELAY | LOG_NOWAIT,",
          "content_same": false
        },
        {
          "line": 2278,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(bestkey)",
          "old_line_content": "                /* We compute the amount of memory freed by dbDelete() alone.",
          "new_line_content": "                robj *keyobj = createStringObject(bestkey,sdslen(bestkey));",
          "content_same": false
        },
        {
          "line": 2279,
          "old_api": null,
          "new_api": "propagateExpire",
          "old_text": null,
          "new_text": "propagateExpire(db,keyobj)",
          "old_line_content": "                 * It is possible that actually the memory needed to propagate",
          "new_line_content": "                propagateExpire(db,keyobj);",
          "content_same": false
        },
        {
          "line": 1766,
          "old_api": null,
          "new_api": "addReplyBulkLongLong",
          "old_text": null,
          "new_text": "addReplyBulkLongLong(c,tv.tv_sec)",
          "old_line_content": "}",
          "new_line_content": "    addReplyBulkLongLong(c,tv.tv_sec);",
          "content_same": false
        },
        {
          "line": 1767,
          "old_api": null,
          "new_api": "addReplyBulkLongLong",
          "old_text": null,
          "new_text": "addReplyBulkLongLong(c,tv.tv_usec)",
          "old_line_content": "",
          "new_line_content": "    addReplyBulkLongLong(c,tv.tv_usec);",
          "content_same": false
        },
        {
          "line": 748,
          "old_api": null,
          "new_api": "sdsAllocSize",
          "old_text": null,
          "new_text": "sdsAllocSize(c->querybuf)",
          "old_line_content": "",
          "new_line_content": "    size_t querybuf_size = sdsAllocSize(c->querybuf);",
          "content_same": false
        },
        {
          "line": 1260,
          "old_api": null,
          "new_api": "listCreate",
          "old_text": null,
          "new_text": "listCreate()",
          "old_line_content": "",
          "new_line_content": "    server.monitors = listCreate();",
          "content_same": false
        },
        {
          "line": 2289,
          "old_api": null,
          "new_api": "dbDelete",
          "old_text": null,
          "new_text": "dbDelete(db,keyobj)",
          "old_line_content": "                mem_freed += delta;",
          "new_line_content": "                dbDelete(db,keyobj);",
          "content_same": false
        },
        {
          "line": 2290,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "                server.stat_evictedkeys++;",
          "new_line_content": "                delta -= (long long) zmalloc_used_memory();",
          "content_same": false
        },
        {
          "line": 1265,
          "old_api": null,
          "new_api": "aeCreateEventLoop",
          "old_text": null,
          "new_text": "aeCreateEventLoop(server.maxclients+1024)",
          "old_line_content": "",
          "new_line_content": "    server.el = aeCreateEventLoop(server.maxclients+1024);",
          "content_same": false
        },
        {
          "line": 1266,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(redisDb)*server.dbnum)",
          "old_line_content": "    if (server.port != 0) {",
          "new_line_content": "    server.db = zmalloc(sizeof(redisDb)*server.dbnum);",
          "content_same": false
        },
        {
          "line": 2293,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(keyobj)",
          "old_line_content": "",
          "new_line_content": "                decrRefCount(keyobj);",
          "content_same": false
        },
        {
          "line": 1777,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(s,\"%lluB\",n)",
          "old_line_content": "    } else if (n < (1024*1024)) {",
          "new_line_content": "        sprintf(s,\"%lluB\",n);",
          "content_same": false
        },
        {
          "line": 759,
          "old_api": null,
          "new_api": "sdsavail",
          "old_text": null,
          "new_text": "sdsavail(c->querybuf)",
          "old_line_content": "        }",
          "new_line_content": "        if (sdsavail(c->querybuf) > 1024) {",
          "content_same": false
        },
        {
          "line": 760,
          "old_api": null,
          "new_api": "sdsRemoveFreeSpace",
          "old_text": null,
          "new_text": "sdsRemoveFreeSpace(c->querybuf)",
          "old_line_content": "    }",
          "new_line_content": "            c->querybuf = sdsRemoveFreeSpace(c->querybuf);",
          "content_same": false
        },
        {
          "line": 1273,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "    }",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 1781,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(s,\"%.2fK\",d)",
          "old_line_content": "        d = (double)n/(1024*1024);",
          "new_line_content": "        sprintf(s,\"%.2fK\",d);",
          "content_same": false
        },
        {
          "line": 1784,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(s,\"%.2fM\",d)",
          "old_line_content": "        d = (double)n/(1024LL*1024*1024);",
          "new_line_content": "        sprintf(s,\"%.2fM\",d);",
          "content_same": false
        },
        {
          "line": 2300,
          "old_api": null,
          "new_api": "flushSlavesOutputBuffers",
          "old_text": null,
          "new_text": "flushSlavesOutputBuffers()",
          "old_line_content": "        }",
          "new_line_content": "                if (slaves) flushSlavesOutputBuffers();",
          "content_same": false
        },
        {
          "line": 1277,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(server.unixsocket)",
          "old_line_content": "        if (server.sofd == ANET_ERR) {",
          "new_line_content": "        unlink(server.unixsocket); /* don't care if this fails */",
          "content_same": false
        },
        {
          "line": 1787,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(s,\"%.2fG\",d)",
          "old_line_content": "}",
          "new_line_content": "        sprintf(s,\"%.2fG\",d);",
          "content_same": false
        },
        {
          "line": 1280,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING, \"Opening socket: %s\", server.neterr)",
          "old_line_content": "        }",
          "new_line_content": "            redisLog(REDIS_WARNING, \"Opening socket: %s\", server.neterr);",
          "content_same": false
        },
        {
          "line": 1281,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "    }",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 1795,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "    int j, numcommands;",
          "new_line_content": "    sds info = sdsempty();",
          "content_same": false
        },
        {
          "line": 1285,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING, \"Configured to not listen anywhere, exiting.\")",
          "old_line_content": "    }",
          "new_line_content": "        redisLog(REDIS_WARNING, \"Configured to not listen anywhere, exiting.\");",
          "content_same": false
        },
        {
          "line": 1286,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "    for (j = 0; j < server.dbnum; j++) {",
          "new_line_content": "        exit(1);",
          "content_same": false
        },
        {
          "line": 775,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.clients)",
          "old_line_content": "",
          "new_line_content": "    int numclients = listLength(server.clients);",
          "content_same": false
        },
        {
          "line": 2312,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(\"/proc/sys/vm/overcommit_memory\",\"r\")",
          "old_line_content": "",
          "new_line_content": "    FILE *fp = fopen(\"/proc/sys/vm/overcommit_memory\",\"r\");",
          "content_same": false
        },
        {
          "line": 1291,
          "old_api": null,
          "new_api": "dictCreate",
          "old_text": null,
          "new_text": "dictCreate(&keylistDictType,NULL)",
          "old_line_content": "        server.db[j].id = j;",
          "new_line_content": "        server.db[j].blocking_keys = dictCreate(&keylistDictType,NULL);",
          "content_same": false
        },
        {
          "line": 2316,
          "old_api": null,
          "new_api": "fgets",
          "old_text": null,
          "new_text": "fgets(buf,64,fp)",
          "old_line_content": "        return -1;",
          "new_line_content": "    if (fgets(buf,64,fp) == NULL) {",
          "content_same": false
        },
        {
          "line": 2317,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "    }",
          "new_line_content": "        fclose(fp);",
          "content_same": false
        },
        {
          "line": 780,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.clients)",
          "old_line_content": "        listNode *head;",
          "new_line_content": "    while(listLength(server.clients) && iterations--) {",
          "content_same": false
        },
        {
          "line": 1292,
          "old_api": null,
          "new_api": "dictCreate",
          "old_text": null,
          "new_text": "dictCreate(&keylistDictType,NULL)",
          "old_line_content": "    }",
          "new_line_content": "        server.db[j].watched_keys = dictCreate(&keylistDictType,NULL);",
          "content_same": false
        },
        {
          "line": 1804,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(section,\"all\")",
          "old_line_content": "    }",
          "new_line_content": "        allsections = strcasecmp(section,\"all\") == 0;",
          "content_same": false
        },
        {
          "line": 1297,
          "old_api": null,
          "new_api": "listSetFreeMethod",
          "old_text": null,
          "new_text": "listSetFreeMethod(server.pubsub_patterns,freePubsubPattern)",
          "old_line_content": "    server.cronloops = 0;",
          "new_line_content": "    listSetFreeMethod(server.pubsub_patterns,freePubsubPattern);",
          "content_same": false
        },
        {
          "line": 2322,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(buf)",
          "old_line_content": "",
          "new_line_content": "    return atoi(buf);",
          "content_same": false
        },
        {
          "line": 1298,
          "old_api": null,
          "new_api": "listSetMatchMethod",
          "old_text": null,
          "new_text": "listSetMatchMethod(server.pubsub_patterns,listMatchPubsubPattern)",
          "old_line_content": "    server.rdb_child_pid = -1;",
          "new_line_content": "    listSetMatchMethod(server.pubsub_patterns,listMatchPubsubPattern);",
          "content_same": false
        },
        {
          "line": 788,
          "old_api": null,
          "new_api": "listFirst",
          "old_text": null,
          "new_text": "listFirst(server.clients)",
          "old_line_content": "        /* The following functions do different service checks on the client.",
          "new_line_content": "        head = listFirst(server.clients);",
          "content_same": false
        },
        {
          "line": 789,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(head)",
          "old_line_content": "         * The protocol is that they return non-zero if the client was",
          "new_line_content": "        c = listNodeValue(head);",
          "content_same": false
        },
        {
          "line": 2326,
          "old_api": null,
          "new_api": "linuxOvercommitMemoryValue",
          "old_text": null,
          "new_text": "linuxOvercommitMemoryValue()",
          "old_line_content": "    }",
          "new_line_content": "    if (linuxOvercommitMemoryValue() == 0) {",
          "content_same": false
        },
        {
          "line": 2327,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\")",
          "old_line_content": "}",
          "new_line_content": "        redisLog(REDIS_WARNING,\"WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\");",
          "content_same": false
        },
        {
          "line": 1303,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "    server.dirty = 0;",
          "new_line_content": "    server.aof_buf = sdsempty();",
          "content_same": false
        },
        {
          "line": 793,
          "old_api": null,
          "new_api": "clientsCronHandleTimeout",
          "old_text": null,
          "new_text": "clientsCronHandleTimeout(c)",
          "old_line_content": "    }",
          "new_line_content": "        if (clientsCronHandleTimeout(c)) continue;",
          "content_same": false
        },
        {
          "line": 794,
          "old_api": null,
          "new_api": "clientsCronResizeQueryBuffer",
          "old_text": null,
          "new_text": "clientsCronResizeQueryBuffer(c)",
          "old_line_content": "}",
          "new_line_content": "        if (clientsCronResizeQueryBuffer(c)) continue;",
          "content_same": false
        },
        {
          "line": 1304,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    server.stat_numcommands = 0;",
          "new_line_content": "    server.lastsave = time(NULL);",
          "content_same": false
        },
        {
          "line": 1813,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(section,\"server\")",
          "old_line_content": "",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"server\")) {",
          "content_same": false
        },
        {
          "line": 1817,
          "old_api": null,
          "new_api": "uname",
          "old_text": null,
          "new_text": "uname(&name)",
          "old_line_content": "            \"# Server\\r\\n\"",
          "new_line_content": "        uname(&name);",
          "content_same": false
        },
        {
          "line": 1310,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    server.stat_keyspace_hits = 0;",
          "new_line_content": "    server.stat_starttime = time(NULL);",
          "content_same": false
        },
        {
          "line": 1818,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"# Server\\r\\n\"\n            \"redis_version:%s\\r\\n\"\n            \"redis_git_sha1:%s\\r\\n\"\n            \"redis_git_dirty:%d\\r\\n\"\n            \"os:%s %s %s\\r\\n\"\n            \"arch_bits:%d\\r\\n\"\n            \"multiplexing_api:%s\\r\\n\"\n            \"gcc_version:%d.%d.%d\\r\\n\"\n            \"process_id:%ld\\r\\n\"\n            \"run_id:%s\\r\\n\"\n            \"tcp_port:%d\\r\\n\"\n            \"uptime_in_seconds:%ld\\r\\n\"\n            \"uptime_in_days:%ld\\r\\n\"\n            \"lru_clock:%ld\\r\\n\",\n            REDIS_VERSION,\n            redisGitSHA1(),\n            strtol(redisGitDirty(),NULL,10) > 0,\n            name.sysname, name.release, name.machine,\n            server.arch_bits,\n            aeGetApiName(),\n#ifdef __GNUC__\n            __GNUC__,__GNUC_MINOR__,__GNUC_PATCHLEVEL__,\n#else\n            0,0,0,\n#endif\n            (long) getpid(),\n            server.runid,\n            server.port,\n            uptime,\n            uptime/(3600*24),\n            (unsigned long) server.lruclock)",
          "old_line_content": "            \"redis_version:%s\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2336,
          "old_api": null,
          "new_api": "getpid",
          "old_text": null,
          "new_text": "getpid()",
          "old_line_content": "    }",
          "new_line_content": "        fprintf(fp,\"%d\\n\",(int)getpid());",
          "content_same": false
        },
        {
          "line": 2337,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "}",
          "new_line_content": "        fclose(fp);",
          "content_same": false
        },
        {
          "line": 2344,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(0)",
          "old_line_content": "",
          "new_line_content": "    if (fork() != 0) exit(0); /* parent exits */",
          "content_same": false
        },
        {
          "line": 2345,
          "old_api": null,
          "new_api": "setsid",
          "old_text": null,
          "new_text": "setsid()",
          "old_line_content": "    /* Every output goes to /dev/null. If Redis is daemonized but",
          "new_line_content": "    setsid(); /* create a new session */",
          "content_same": false
        },
        {
          "line": 1320,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    server.stop_writes_on_bgsave_err = 1;",
          "new_line_content": "    server.unixtime = time(NULL);",
          "content_same": false
        },
        {
          "line": 1834,
          "old_api": null,
          "new_api": "redisGitSHA1",
          "old_text": null,
          "new_text": "redisGitSHA1()",
          "old_line_content": "            name.sysname, name.release, name.machine,",
          "new_line_content": "            redisGitSHA1(),",
          "content_same": false
        },
        {
          "line": 1835,
          "old_api": null,
          "new_api": "redisGitDirty",
          "old_text": null,
          "new_text": "redisGitDirty()",
          "old_line_content": "            server.arch_bits,",
          "new_line_content": "            strtol(redisGitDirty(),NULL,10) > 0,",
          "content_same": false
        },
        {
          "line": 1326,
          "old_api": null,
          "new_api": "aeCreateFileEvent",
          "old_text": null,
          "new_text": "aeCreateFileEvent(server.el,server.sofd,AE_READABLE,\n        acceptUnixHandler,NULL)",
          "old_line_content": "",
          "new_line_content": "    if (server.sofd > 0 && aeCreateFileEvent(server.el,server.sofd,AE_READABLE,",
          "content_same": false
        },
        {
          "line": 1327,
          "old_api": null,
          "new_api": "oom",
          "old_text": null,
          "new_text": "oom(\"creating file event\")",
          "old_line_content": "    if (server.aof_state == REDIS_AOF_ON) {",
          "new_line_content": "        acceptUnixHandler,NULL) == AE_ERR) oom(\"creating file event\");",
          "content_same": false
        },
        {
          "line": 1838,
          "old_api": null,
          "new_api": "aeGetApiName",
          "old_text": null,
          "new_text": "aeGetApiName()",
          "old_line_content": "            __GNUC__,__GNUC_MINOR__,__GNUC_PATCHLEVEL__,",
          "new_line_content": "            aeGetApiName(),",
          "content_same": false
        },
        {
          "line": 2353,
          "old_api": null,
          "new_api": "dup2",
          "old_text": null,
          "new_text": "dup2(fd, STDERR_FILENO)",
          "old_line_content": "    }",
          "new_line_content": "        dup2(fd, STDERR_FILENO);",
          "content_same": false
        },
        {
          "line": 2354,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "}",
          "new_line_content": "        if (fd > STDERR_FILENO) close(fd);",
          "content_same": false
        },
        {
          "line": 1330,
          "old_api": null,
          "new_api": "open",
          "old_text": null,
          "new_text": "open(server.aof_filename,\n                               O_WRONLY|O_APPEND|O_CREAT,0644)",
          "old_line_content": "        if (server.aof_fd == -1) {",
          "new_line_content": "        server.aof_fd = open(server.aof_filename,",
          "content_same": false
        },
        {
          "line": 1844,
          "old_api": null,
          "new_api": "getpid",
          "old_text": null,
          "new_text": "getpid()",
          "old_line_content": "            server.port,",
          "new_line_content": "            (long) getpid(),",
          "content_same": false
        },
        {
          "line": 1334,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "        }",
          "new_line_content": "                strerror(errno));",
          "content_same": false
        },
        {
          "line": 1335,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "    }",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 2361,
          "old_api": null,
          "new_api": "redisGitSHA1",
          "old_text": null,
          "new_text": "redisGitSHA1()",
          "old_line_content": "        ZMALLOC_LIB,",
          "new_line_content": "        redisGitSHA1(),",
          "content_same": false
        },
        {
          "line": 2362,
          "old_api": null,
          "new_api": "redisGitDirty",
          "old_text": null,
          "new_text": "redisGitDirty()",
          "old_line_content": "        sizeof(long) == 4 ? 32 : 64);",
          "new_line_content": "        atoi(redisGitDirty()) > 0,",
          "content_same": false
        },
        {
          "line": 825,
          "old_api": null,
          "new_api": "REDIS_NOTUSED",
          "old_text": null,
          "new_text": "REDIS_NOTUSED(id)",
          "old_line_content": "",
          "new_line_content": "    REDIS_NOTUSED(id);",
          "content_same": false
        },
        {
          "line": 826,
          "old_api": null,
          "new_api": "REDIS_NOTUSED",
          "old_text": null,
          "new_text": "REDIS_NOTUSED(clientData)",
          "old_line_content": "    /* Software watchdog: deliver the SIGALRM that will reach the signal",
          "new_line_content": "    REDIS_NOTUSED(clientData);",
          "content_same": false
        },
        {
          "line": 2365,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(0)",
          "old_line_content": "",
          "new_line_content": "    exit(0);",
          "content_same": false
        },
        {
          "line": 830,
          "old_api": null,
          "new_api": "watchdogScheduleSignal",
          "old_text": null,
          "new_text": "watchdogScheduleSignal(server.watchdog_period)",
          "old_line_content": "    /* We take a cached value of the unix time in the global state because",
          "new_line_content": "    if (server.watchdog_period) watchdogScheduleSignal(server.watchdog_period);",
          "content_same": false
        },
        {
          "line": 1854,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "            \"# Clients\\r\\n\"",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 1344,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Warning: 32 bit instance detected but no memory limit set. Setting 3.5 GB maxmemory limit with 'noeviction' policy now.\")",
          "old_line_content": "        server.maxmemory_policy = REDIS_MAXMEMORY_NO_EVICTION;",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Warning: 32 bit instance detected but no memory limit set. Setting 3.5 GB maxmemory limit with 'noeviction' policy now.\");",
          "content_same": false
        },
        {
          "line": 1855,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"# Clients\\r\\n\"\n            \"connected_clients:%lu\\r\\n\"\n            \"client_longest_output_list:%lu\\r\\n\"\n            \"client_biggest_input_buf:%lu\\r\\n\"\n            \"blocked_clients:%d\\r\\n\",\n            listLength(server.clients)-listLength(server.slaves),\n            lol, bib,\n            server.bpop_blocked_clients)",
          "old_line_content": "            \"connected_clients:%lu\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 1861,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.slaves)",
          "old_line_content": "            server.bpop_blocked_clients);",
          "new_line_content": "            listLength(server.clients)-listLength(server.slaves),",
          "content_same": false
        },
        {
          "line": 838,
          "old_api": null,
          "new_api": "trackOperationsPerSecond",
          "old_text": null,
          "new_text": "trackOperationsPerSecond()",
          "old_line_content": "    /* We have just 22 bits per object for LRU information.",
          "new_line_content": "    run_with_period(100) trackOperationsPerSecond();",
          "content_same": false
        },
        {
          "line": 1351,
          "old_api": null,
          "new_api": "slowlogInit",
          "old_text": null,
          "new_text": "slowlogInit()",
          "old_line_content": "}",
          "new_line_content": "    slowlogInit();",
          "content_same": false
        },
        {
          "line": 1352,
          "old_api": null,
          "new_api": "bioInit",
          "old_text": null,
          "new_text": "bioInit()",
          "old_line_content": "",
          "new_line_content": "    bioInit();",
          "content_same": false
        },
        {
          "line": 2379,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\"       ./redis-server /etc/myredis.conf --loglevel verbose\\n\")",
          "old_line_content": "}",
          "new_line_content": "    fprintf(stderr,\"       ./redis-server /etc/myredis.conf --loglevel verbose\\n\");",
          "content_same": false
        },
        {
          "line": 2380,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "",
          "new_line_content": "    exit(1);",
          "content_same": false
        },
        {
          "line": 1867,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(section,\"memory\")",
          "old_line_content": "        char peak_hmem[64];",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"memory\")) {",
          "content_same": false
        },
        {
          "line": 1873,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "            \"# Memory\\r\\n\"",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 1874,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"# Memory\\r\\n\"\n            \"used_memory:%zu\\r\\n\"\n            \"used_memory_human:%s\\r\\n\"\n            \"used_memory_rss:%zu\\r\\n\"\n            \"used_memory_peak:%zu\\r\\n\"\n            \"used_memory_peak_human:%s\\r\\n\"\n            \"used_memory_lua:%lld\\r\\n\"\n            \"mem_fragmentation_ratio:%.2f\\r\\n\"\n            \"mem_allocator:%s\\r\\n\",\n            zmalloc_used_memory(),\n            hmem,\n            zmalloc_get_rss(),\n            server.stat_peak_memory,\n            peak_hmem,\n            ((long long)lua_gc(server.lua,LUA_GCCOUNT,0))*1024LL,\n            zmalloc_get_fragmentation_ratio(),\n            ZMALLOC_LIB\n            )",
          "old_line_content": "            \"used_memory:%zu\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 852,
          "old_api": null,
          "new_api": "updateLRUClock",
          "old_text": null,
          "new_text": "updateLRUClock()",
          "old_line_content": "    /* Record the max memory used since the server was started. */",
          "new_line_content": "    updateLRUClock();",
          "content_same": false
        },
        {
          "line": 2389,
          "old_api": null,
          "new_api": "redisGitSHA1",
          "old_text": null,
          "new_text": "redisGitSHA1()",
          "old_line_content": "        (sizeof(long) == 8) ? \"64\" : \"32\",",
          "new_line_content": "        redisGitSHA1(),",
          "content_same": false
        },
        {
          "line": 2390,
          "old_api": null,
          "new_api": "redisGitDirty",
          "old_text": null,
          "new_text": "redisGitDirty()",
          "old_line_content": "        server.cluster_enabled ? \"cluster\" : \"stand alone\",",
          "new_line_content": "        strtol(redisGitDirty(),NULL,10) > 0,",
          "content_same": false
        },
        {
          "line": 855,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "",
          "new_line_content": "    if (zmalloc_used_memory() > server.stat_peak_memory)",
          "content_same": false
        },
        {
          "line": 856,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "    /* We received a SIGTERM, shutting down here in a safe way, as it is",
          "new_line_content": "        server.stat_peak_memory = zmalloc_used_memory();",
          "content_same": false
        },
        {
          "line": 2396,
          "old_api": null,
          "new_api": "redisLogRaw",
          "old_text": null,
          "new_text": "redisLogRaw(REDIS_NOTICE|REDIS_LOG_RAW,buf)",
          "old_line_content": "}",
          "new_line_content": "    redisLogRaw(REDIS_NOTICE|REDIS_LOG_RAW,buf);",
          "content_same": false
        },
        {
          "line": 2397,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(buf)",
          "old_line_content": "",
          "new_line_content": "    zfree(buf);",
          "content_same": false
        },
        {
          "line": 861,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(0)",
          "old_line_content": "    }",
          "new_line_content": "        if (prepareForShutdown(0) == REDIS_OK) exit(0);",
          "content_same": false
        },
        {
          "line": 862,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"SIGTERM received but errors trying to shut down the server, check the logs for more information\")",
          "old_line_content": "",
          "new_line_content": "        redisLog(REDIS_WARNING,\"SIGTERM received but errors trying to shut down the server, check the logs for more information\");",
          "content_same": false
        },
        {
          "line": 1886,
          "old_api": null,
          "new_api": "zmalloc_get_rss",
          "old_text": null,
          "new_text": "zmalloc_get_rss()",
          "old_line_content": "            peak_hmem,",
          "new_line_content": "            zmalloc_get_rss(),",
          "content_same": false
        },
        {
          "line": 1377,
          "old_api": null,
          "new_api": "redisPanic",
          "old_text": null,
          "new_text": "redisPanic(\"Unsupported command flag\")",
          "old_line_content": "            f++;",
          "new_line_content": "            default: redisPanic(\"Unsupported command flag\"); break;",
          "content_same": false
        },
        {
          "line": 866,
          "old_api": null,
          "new_api": "run_with_period",
          "old_text": null,
          "new_text": "run_with_period(5000)",
          "old_line_content": "            long long size, used, vkeys;",
          "new_line_content": "    run_with_period(5000) {",
          "content_same": false
        },
        {
          "line": 2403,
          "old_api": null,
          "new_api": "redisLogFromHandler",
          "old_text": null,
          "new_text": "redisLogFromHandler(REDIS_WARNING,\"Received SIGTERM, scheduling shutdown...\")",
          "old_line_content": "}",
          "new_line_content": "    redisLogFromHandler(REDIS_WARNING,\"Received SIGTERM, scheduling shutdown...\");",
          "content_same": false
        },
        {
          "line": 1889,
          "old_api": null,
          "new_api": "lua_gc",
          "old_text": null,
          "new_text": "lua_gc(server.lua,LUA_GCCOUNT,0)",
          "old_line_content": "            ZMALLOC_LIB",
          "new_line_content": "            ((long long)lua_gc(server.lua,LUA_GCCOUNT,0))*1024LL,",
          "content_same": false
        },
        {
          "line": 1890,
          "old_api": null,
          "new_api": "zmalloc_get_fragmentation_ratio",
          "old_text": null,
          "new_text": "zmalloc_get_fragmentation_ratio()",
          "old_line_content": "            );",
          "new_line_content": "            zmalloc_get_fragmentation_ratio(),",
          "content_same": false
        },
        {
          "line": 1382,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(c->name)",
          "old_line_content": "    }",
          "new_line_content": "        retval = dictAdd(server.commands, sdsnew(c->name), c);",
          "content_same": false
        },
        {
          "line": 871,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(server.db[j].dict)",
          "old_line_content": "            if (used || vkeys) {",
          "new_line_content": "            used = dictSize(server.db[j].dict);",
          "content_same": false
        },
        {
          "line": 1383,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(retval == DICT_OK)",
          "old_line_content": "}",
          "new_line_content": "        assert(retval == DICT_OK);",
          "content_same": false
        },
        {
          "line": 1897,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "            \"# Persistence\\r\\n\"",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 874,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_VERBOSE,\"DB %d: %lld keys (%lld volatile) in %lld slots HT.\",j,used,vkeys,size)",
          "old_line_content": "            }",
          "new_line_content": "                redisLog(REDIS_VERBOSE,\"DB %d: %lld keys (%lld volatile) in %lld slots HT.\",j,used,vkeys,size);",
          "content_same": false
        },
        {
          "line": 1898,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"# Persistence\\r\\n\"\n            \"loading:%d\\r\\n\"\n            \"aof_enabled:%d\\r\\n\"\n            \"changes_since_last_save:%lld\\r\\n\"\n            \"bgsave_in_progress:%d\\r\\n\"\n            \"last_save_time:%ld\\r\\n\"\n            \"last_bgsave_status:%s\\r\\n\"\n            \"bgrewriteaof_in_progress:%d\\r\\n\"\n            \"bgrewriteaof_scheduled:%d\\r\\n\",\n            server.loading,\n            server.aof_state != REDIS_AOF_OFF,\n            server.dirty,\n            server.rdb_child_pid != -1,\n            server.lastsave,\n            server.lastbgsave_status == REDIS_OK ? \"ok\" : \"err\",\n            server.aof_child_pid != -1,\n            server.aof_rewrite_scheduled)",
          "old_line_content": "            \"loading:%d\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2412,
          "old_api": null,
          "new_api": "sigemptyset",
          "old_text": null,
          "new_text": "sigemptyset(&act.sa_mask)",
          "old_line_content": "    act.sa_handler = sigtermHandler;",
          "new_line_content": "    sigemptyset(&act.sa_mask);",
          "content_same": false
        },
        {
          "line": 2415,
          "old_api": null,
          "new_api": "sigaction",
          "old_text": null,
          "new_text": "sigaction(SIGTERM, &act, NULL)",
          "old_line_content": "#ifdef HAVE_BACKTRACE",
          "new_line_content": "    sigaction(SIGTERM, &act, NULL);",
          "content_same": false
        },
        {
          "line": 2418,
          "old_api": null,
          "new_api": "sigemptyset",
          "old_text": null,
          "new_text": "sigemptyset(&act.sa_mask)",
          "old_line_content": "    act.sa_sigaction = sigsegvHandler;",
          "new_line_content": "    sigemptyset(&act.sa_mask);",
          "content_same": false
        },
        {
          "line": 2423,
          "old_api": null,
          "new_api": "sigaction",
          "old_text": null,
          "new_text": "sigaction(SIGFPE, &act, NULL)",
          "old_line_content": "#endif",
          "new_line_content": "    sigaction(SIGFPE, &act, NULL);",
          "content_same": false
        },
        {
          "line": 2424,
          "old_api": null,
          "new_api": "sigaction",
          "old_text": null,
          "new_text": "sigaction(SIGILL, &act, NULL)",
          "old_line_content": "    return;",
          "new_line_content": "    sigaction(SIGILL, &act, NULL);",
          "content_same": false
        },
        {
          "line": 887,
          "old_api": null,
          "new_api": "tryResizeHashTables",
          "old_text": null,
          "new_text": "tryResizeHashTables()",
          "old_line_content": "    }",
          "new_line_content": "        tryResizeHashTables();",
          "content_same": false
        },
        {
          "line": 888,
          "old_api": null,
          "new_api": "incrementallyRehash",
          "old_text": null,
          "new_text": "incrementallyRehash()",
          "old_line_content": "",
          "new_line_content": "        if (server.activerehashing) incrementallyRehash();",
          "content_same": false
        },
        {
          "line": 1805,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(section,\"default\")",
          "old_line_content": "",
          "new_line_content": "        defsections = strcasecmp(section,\"default\") == 0;",
          "content_same": false
        },
        {
          "line": 1918,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                \"aof_current_size:%lld\\r\\n\"\n                \"aof_base_size:%lld\\r\\n\"\n                \"aof_pending_rewrite:%d\\r\\n\"\n                \"aof_buffer_length:%zu\\r\\n\"\n                \"aof_pending_bio_fsync:%llu\\r\\n\"\n                \"aof_delayed_fsync:%lu\\r\\n\",\n                (long long) server.aof_current_size,\n                (long long) server.aof_rewrite_base_size,\n                server.aof_rewrite_scheduled,\n                sdslen(server.aof_buf),\n                bioPendingJobsOfType(REDIS_BIO_AOF_FSYNC),\n                server.aof_delayed_fsync)",
          "old_line_content": "                \"aof_base_size:%lld\\r\\n\"",
          "new_line_content": "            info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 895,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.slaves)",
          "old_line_content": "    }",
          "new_line_content": "            listLength(server.slaves),",
          "content_same": false
        },
        {
          "line": 896,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "",
          "new_line_content": "            zmalloc_used_memory());",
          "content_same": false
        },
        {
          "line": 1411,
          "old_api": null,
          "new_api": "zrealloc",
          "old_text": null,
          "new_text": "zrealloc(oa->ops,sizeof(redisOp)*(oa->numops+1))",
          "old_line_content": "    op->cmd = cmd;",
          "new_line_content": "    oa->ops = zrealloc(oa->ops,sizeof(redisOp)*(oa->numops+1));",
          "content_same": false
        },
        {
          "line": 900,
          "old_api": null,
          "new_api": "clientsCron",
          "old_text": null,
          "new_text": "clientsCron()",
          "old_line_content": "    /* Start a scheduled AOF rewrite if this was requested by the user while",
          "new_line_content": "    clientsCron();",
          "content_same": false
        },
        {
          "line": 2439,
          "old_api": null,
          "new_api": "getpid",
          "old_text": null,
          "new_text": "getpid()",
          "old_line_content": "",
          "new_line_content": "    dictSetHashFunctionSeed(tv.tv_sec^tv.tv_usec^getpid());",
          "content_same": false
        },
        {
          "line": 2440,
          "old_api": null,
          "new_api": "initServerConfig",
          "old_text": null,
          "new_text": "initServerConfig()",
          "old_line_content": "    if (argc >= 2) {",
          "new_line_content": "    initServerConfig();",
          "content_same": false
        },
        {
          "line": 1928,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(server.aof_buf)",
          "old_line_content": "                server.aof_delayed_fsync);",
          "new_line_content": "                sdslen(server.aof_buf),",
          "content_same": false
        },
        {
          "line": 1929,
          "old_api": null,
          "new_api": "bioPendingJobsOfType",
          "old_text": null,
          "new_text": "bioPendingJobsOfType(REDIS_BIO_AOF_FSYNC)",
          "old_line_content": "        }",
          "new_line_content": "                bioPendingJobsOfType(REDIS_BIO_AOF_FSYNC),",
          "content_same": false
        },
        {
          "line": 907,
          "old_api": null,
          "new_api": "rewriteAppendOnlyFileBackground",
          "old_text": null,
          "new_text": "rewriteAppendOnlyFileBackground()",
          "old_line_content": "",
          "new_line_content": "        rewriteAppendOnlyFileBackground();",
          "content_same": false
        },
        {
          "line": 2444,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "",
          "new_line_content": "        sds options = sdsempty();",
          "content_same": false
        },
        {
          "line": 1809,
          "old_api": null,
          "new_api": "getrusage",
          "old_text": null,
          "new_text": "getrusage(RUSAGE_CHILDREN, &c_ru)",
          "old_line_content": "",
          "new_line_content": "    getrusage(RUSAGE_CHILDREN, &c_ru);",
          "content_same": false
        },
        {
          "line": 2451,
          "old_api": null,
          "new_api": "usage",
          "old_text": null,
          "new_text": "usage()",
          "old_line_content": "            if (argc == 3) {",
          "new_line_content": "            strcmp(argv[1], \"-h\") == 0) usage();",
          "content_same": false
        },
        {
          "line": 915,
          "old_api": null,
          "new_api": "wait3",
          "old_text": null,
          "new_text": "wait3(&statloc,WNOHANG,NULL)",
          "old_line_content": "            int bysignal = 0;",
          "new_line_content": "        if ((pid = wait3(&statloc,WNOHANG,NULL)) != 0) {",
          "content_same": false
        },
        {
          "line": 916,
          "old_api": null,
          "new_api": "WEXITSTATUS",
          "old_text": null,
          "new_text": "WEXITSTATUS(statloc)",
          "old_line_content": "            ",
          "new_line_content": "            int exitcode = WEXITSTATUS(statloc);",
          "content_same": false
        },
        {
          "line": 2454,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(argv[2])",
          "old_line_content": "            } else {",
          "new_line_content": "                memtest(atoi(argv[2]),50);",
          "content_same": false
        },
        {
          "line": 919,
          "old_api": null,
          "new_api": "WTERMSIG",
          "old_text": null,
          "new_text": "WTERMSIG(statloc)",
          "old_line_content": "            if (pid == server.rdb_child_pid) {",
          "new_line_content": "            if (WIFSIGNALED(statloc)) bysignal = WTERMSIG(statloc);",
          "content_same": false
        },
        {
          "line": 1430,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(op->argv[j])",
          "old_line_content": "    }",
          "new_line_content": "            decrRefCount(op->argv[j]);",
          "content_same": false
        },
        {
          "line": 1433,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(oa->ops)",
          "old_line_content": "",
          "new_line_content": "    zfree(oa->ops);",
          "content_same": false
        },
        {
          "line": 2458,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\"Example: ./redis-server --test-memory 4096\\n\\n\")",
          "old_line_content": "            }",
          "new_line_content": "                fprintf(stderr,\"Example: ./redis-server --test-memory 4096\\n\\n\");",
          "content_same": false
        },
        {
          "line": 2459,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "        }",
          "new_line_content": "                exit(1);",
          "content_same": false
        },
        {
          "line": 1810,
          "old_api": null,
          "new_api": "getClientsMaxBuffers",
          "old_text": null,
          "new_text": "getClientsMaxBuffers(&lol,&bib)",
          "old_line_content": "    /* Server */",
          "new_line_content": "    getClientsMaxBuffers(&lol,&bib);",
          "content_same": false
        },
        {
          "line": 926,
          "old_api": null,
          "new_api": "updateDictResizePolicy",
          "old_text": null,
          "new_text": "updateDictResizePolicy()",
          "old_line_content": "    } else {",
          "new_line_content": "            updateDictResizePolicy();",
          "content_same": false
        },
        {
          "line": 1439,
          "old_api": null,
          "new_api": "dictFetchValue",
          "old_text": null,
          "new_text": "dictFetchValue(server.commands, name)",
          "old_line_content": "",
          "new_line_content": "    return dictFetchValue(server.commands, name);",
          "content_same": false
        },
        {
          "line": 1950,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                \"loading_start_time:%ld\\r\\n\"\n                \"loading_total_bytes:%llu\\r\\n\"\n                \"loading_loaded_bytes:%llu\\r\\n\"\n                \"loading_loaded_perc:%.2f\\r\\n\"\n                \"loading_eta_seconds:%ld\\r\\n\"\n                ,(unsigned long) server.loading_start_time,\n                (unsigned long long) server.loading_total_bytes,\n                (unsigned long long) server.loading_loaded_bytes,\n                perc,\n                eta\n            )",
          "old_line_content": "                \"loading_total_bytes:%llu\\r\\n\"",
          "new_line_content": "            info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 1446,
          "old_api": null,
          "new_api": "dictFetchValue",
          "old_text": null,
          "new_text": "dictFetchValue(server.commands, name)",
          "old_line_content": "    return cmd;",
          "new_line_content": "    cmd = dictFetchValue(server.commands, name);",
          "content_same": false
        },
        {
          "line": 1447,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(name)",
          "old_line_content": "}",
          "new_line_content": "    sdsfree(name);",
          "content_same": false
        },
        {
          "line": 2474,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(options,argv[j]+2)",
          "old_line_content": "            } else {",
          "new_line_content": "                options = sdscat(options,argv[j]+2);",
          "content_same": false
        },
        {
          "line": 2475,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(options,\" \")",
          "old_line_content": "                /* Option argument */",
          "new_line_content": "                options = sdscat(options,\" \");",
          "content_same": false
        },
        {
          "line": 938,
          "old_api": null,
          "new_api": "rdbSaveBackground",
          "old_text": null,
          "new_text": "rdbSaveBackground(server.rdb_filename)",
          "old_line_content": "            }",
          "new_line_content": "                rdbSaveBackground(server.rdb_filename);",
          "content_same": false
        },
        {
          "line": 2478,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(argv[j])",
          "old_line_content": "            }",
          "new_line_content": "                options = sdscatrepr(options,argv[j],strlen(argv[j]));",
          "content_same": false
        },
        {
          "line": 2479,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(options,\" \")",
          "old_line_content": "            j++;",
          "new_line_content": "                options = sdscat(options,\" \");",
          "content_same": false
        },
        {
          "line": 1967,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "            \"# Stats\\r\\n\"",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 1968,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"# Stats\\r\\n\"\n            \"total_connections_received:%lld\\r\\n\"\n            \"total_commands_processed:%lld\\r\\n\"\n            \"instantaneous_ops_per_sec:%lld\\r\\n\"\n            \"rejected_connections:%lld\\r\\n\"\n            \"expired_keys:%lld\\r\\n\"\n            \"evicted_keys:%lld\\r\\n\"\n            \"keyspace_hits:%lld\\r\\n\"\n            \"keyspace_misses:%lld\\r\\n\"\n            \"pubsub_channels:%ld\\r\\n\"\n            \"pubsub_patterns:%lu\\r\\n\"\n            \"latest_fork_usec:%lld\\r\\n\",\n            server.stat_numconnections,\n            server.stat_numcommands,\n            getOperationsPerSecond(),\n            server.stat_rejected_conn,\n            server.stat_expiredkeys,\n            server.stat_evictedkeys,\n            server.stat_keyspace_hits,\n            server.stat_keyspace_misses,\n            dictSize(server.pubsub_channels),\n            listLength(server.pubsub_patterns),\n            server.stat_fork_time)",
          "old_line_content": "            \"total_connections_received:%lld\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2484,
          "old_api": null,
          "new_api": "loadServerConfig",
          "old_text": null,
          "new_text": "loadServerConfig(configfile,options)",
          "old_line_content": "    } else {",
          "new_line_content": "        loadServerConfig(configfile,options);",
          "content_same": false
        },
        {
          "line": 1464,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.slaves)",
          "old_line_content": "}",
          "new_line_content": "    if (flags & REDIS_PROPAGATE_REPL && listLength(server.slaves))",
          "content_same": false
        },
        {
          "line": 953,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Starting automatic rewriting of AOF on %lld%% growth\",growth)",
          "old_line_content": "            }",
          "new_line_content": "                redisLog(REDIS_NOTICE,\"Starting automatic rewriting of AOF on %lld%% growth\",growth);",
          "content_same": false
        },
        {
          "line": 954,
          "old_api": null,
          "new_api": "rewriteAppendOnlyFileBackground",
          "old_text": null,
          "new_text": "rewriteAppendOnlyFileBackground()",
          "old_line_content": "         }",
          "new_line_content": "                rewriteAppendOnlyFileBackground();",
          "content_same": false
        },
        {
          "line": 1465,
          "old_api": null,
          "new_api": "replicationFeedSlaves",
          "old_text": null,
          "new_text": "replicationFeedSlaves(server.slaves,dbid,argv,argc)",
          "old_line_content": "",
          "new_line_content": "        replicationFeedSlaves(server.slaves,dbid,argv,argc);",
          "content_same": false
        },
        {
          "line": 2492,
          "old_api": null,
          "new_api": "redisAsciiArt",
          "old_text": null,
          "new_text": "redisAsciiArt()",
          "old_line_content": "#ifdef __linux__",
          "new_line_content": "    redisAsciiArt();",
          "content_same": false
        },
        {
          "line": 1983,
          "old_api": null,
          "new_api": "getOperationsPerSecond",
          "old_text": null,
          "new_text": "getOperationsPerSecond()",
          "old_line_content": "            server.stat_expiredkeys,",
          "new_line_content": "            getOperationsPerSecond(),",
          "content_same": false
        },
        {
          "line": 1473,
          "old_api": null,
          "new_api": "redisOpArrayAppend",
          "old_text": null,
          "new_text": "redisOpArrayAppend(&server.also_propagate,cmd,dbid,argv,argc,target)",
          "old_line_content": "",
          "new_line_content": "    redisOpArrayAppend(&server.also_propagate,cmd,dbid,argv,argc,target);",
          "content_same": false
        },
        {
          "line": 962,
          "old_api": null,
          "new_api": "flushAppendOnlyFile",
          "old_text": null,
          "new_text": "flushAppendOnlyFile(0)",
          "old_line_content": "    /* Expire a few keys per cycle, only if this is a master.",
          "new_line_content": "    if (server.aof_flush_postponed_start) flushAppendOnlyFile(0);",
          "content_same": false
        },
        {
          "line": 2499,
          "old_api": null,
          "new_api": "loadAppendOnlyFile",
          "old_text": null,
          "new_text": "loadAppendOnlyFile(server.aof_filename)",
          "old_line_content": "    } else {",
          "new_line_content": "        if (loadAppendOnlyFile(server.aof_filename) == REDIS_OK)",
          "content_same": false
        },
        {
          "line": 1989,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(server.pubsub_channels)",
          "old_line_content": "            server.stat_fork_time);",
          "new_line_content": "            dictSize(server.pubsub_channels),",
          "content_same": false
        },
        {
          "line": 1478,
          "old_api": null,
          "new_api": "ustime",
          "old_text": null,
          "new_text": "ustime()",
          "old_line_content": "    /* Sent the command to clients in MONITOR mode, only if the commands are",
          "new_line_content": "    long long dirty, start = ustime(), duration;",
          "content_same": false
        },
        {
          "line": 2503,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"DB loaded from disk: %.3f seconds\",\n                (float)(ustime()-start)/1000000)",
          "old_line_content": "        } else if (errno != ENOENT) {",
          "new_line_content": "            redisLog(REDIS_NOTICE,\"DB loaded from disk: %.3f seconds\",",
          "content_same": false
        },
        {
          "line": 967,
          "old_api": null,
          "new_api": "activeExpireCycle",
          "old_text": null,
          "new_text": "activeExpireCycle()",
          "old_line_content": "    /* Close clients that need to be closed asynchronous */",
          "new_line_content": "    if (server.masterhost == NULL) activeExpireCycle();",
          "content_same": false
        },
        {
          "line": 1990,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.pubsub_patterns)",
          "old_line_content": "    }",
          "new_line_content": "            listLength(server.pubsub_patterns),",
          "content_same": false
        },
        {
          "line": 2506,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Fatal error loading the DB. Exiting.\")",
          "old_line_content": "        }",
          "new_line_content": "            redisLog(REDIS_WARNING,\"Fatal error loading the DB. Exiting.\");",
          "content_same": false
        },
        {
          "line": 2507,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "    }",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 970,
          "old_api": null,
          "new_api": "freeClientsInAsyncFreeQueue",
          "old_text": null,
          "new_text": "freeClientsInAsyncFreeQueue()",
          "old_line_content": "    /* Replication cron function -- used to reconnect to master and",
          "new_line_content": "    freeClientsInAsyncFreeQueue();",
          "content_same": false
        },
        {
          "line": 1482,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.monitors)",
          "old_line_content": "",
          "new_line_content": "    if (listLength(server.monitors) && !server.loading)",
          "content_same": false
        },
        {
          "line": 974,
          "old_api": null,
          "new_api": "replicationCron",
          "old_text": null,
          "new_text": "replicationCron()",
          "old_line_content": "    /* Run other sub-systems specific cron jobs */",
          "new_line_content": "    run_with_period(1000) replicationCron();",
          "content_same": false
        },
        {
          "line": 1483,
          "old_api": null,
          "new_api": "replicationFeedMonitors",
          "old_text": null,
          "new_text": "replicationFeedMonitors(c,server.monitors,c->db->id,c->argv,c->argc)",
          "old_line_content": "    /* Call the command. */",
          "new_line_content": "        replicationFeedMonitors(c,server.monitors,c->db->id,c->argv,c->argc);",
          "content_same": false
        },
        {
          "line": 1996,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "            \"# Replication\\r\\n\"",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 977,
          "old_api": null,
          "new_api": "run_with_period",
          "old_text": null,
          "new_text": "run_with_period(1000)",
          "old_line_content": "    }",
          "new_line_content": "    run_with_period(1000) {",
          "content_same": false
        },
        {
          "line": 978,
          "old_api": null,
          "new_api": "clusterCron",
          "old_text": null,
          "new_text": "clusterCron()",
          "old_line_content": "",
          "new_line_content": "        if (server.cluster_enabled) clusterCron();",
          "content_same": false
        },
        {
          "line": 2515,
          "old_api": null,
          "new_api": "aeMain",
          "old_text": null,
          "new_text": "aeMain(server.el)",
          "old_line_content": "    return 0;",
          "new_line_content": "    aeMain(server.el);",
          "content_same": false
        },
        {
          "line": 2516,
          "old_api": null,
          "new_api": "aeDeleteEventLoop",
          "old_text": null,
          "new_text": "aeDeleteEventLoop(server.el)",
          "old_line_content": "}",
          "new_line_content": "    aeDeleteEventLoop(server.el);",
          "content_same": false
        },
        {
          "line": 1490,
          "old_api": null,
          "new_api": "ustime",
          "old_text": null,
          "new_text": "ustime()",
          "old_line_content": "    /* When EVAL is called loading the AOF we don't want commands called",
          "new_line_content": "    duration = ustime()-start;",
          "content_same": false
        },
        {
          "line": 1997,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"# Replication\\r\\n\"\n            \"role:%s\\r\\n\",\n            server.masterhost == NULL ? \"master\" : \"slave\")",
          "old_line_content": "            \"role:%s\\r\\n\",",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2002,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                \"master_host:%s\\r\\n\"\n                \"master_port:%d\\r\\n\"\n                \"master_link_status:%s\\r\\n\"\n                \"master_last_io_seconds_ago:%d\\r\\n\"\n                \"master_sync_in_progress:%d\\r\\n\"\n                ,server.masterhost,\n                server.masterport,\n                (server.repl_state == REDIS_REPL_CONNECTED) ?\n                    \"up\" : \"down\",\n                server.master ?\n                ((int)(server.unixtime-server.master->lastinteraction)) : -1,\n                server.repl_state == REDIS_REPL_TRANSFER\n            )",
          "old_line_content": "                \"master_port:%d\\r\\n\"",
          "new_line_content": "            info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 1500,
          "old_api": null,
          "new_api": "slowlogPushEntryIfNeeded",
          "old_text": null,
          "new_text": "slowlogPushEntryIfNeeded(c->argv,c->argc,duration)",
          "old_line_content": "        c->cmd->microseconds += duration;",
          "new_line_content": "        slowlogPushEntryIfNeeded(c->argv,c->argc,duration);",
          "content_same": false
        },
        {
          "line": 989,
          "old_api": null,
          "new_api": "REDIS_NOTUSED",
          "old_text": null,
          "new_text": "REDIS_NOTUSED(eventLoop)",
          "old_line_content": "    redisClient *c;",
          "new_line_content": "    REDIS_NOTUSED(eventLoop);",
          "content_same": false
        },
        {
          "line": 2018,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                    \"master_sync_left_bytes:%ld\\r\\n\"\n                    \"master_sync_last_io_seconds_ago:%d\\r\\n\"\n                    ,(long)server.repl_transfer_left,\n                    (int)(server.unixtime-server.repl_transfer_lastio)\n                )",
          "old_line_content": "                    \"master_sync_last_io_seconds_ago:%d\\r\\n\"",
          "new_line_content": "                info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 995,
          "old_api": null,
          "new_api": "listFirst",
          "old_text": null,
          "new_text": "listFirst(server.unblocked_clients)",
          "old_line_content": "        c = ln->value;",
          "new_line_content": "        ln = listFirst(server.unblocked_clients);",
          "content_same": false
        },
        {
          "line": 998,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(server.unblocked_clients,ln)",
          "old_line_content": "",
          "new_line_content": "        listDelNode(server.unblocked_clients,ln);",
          "content_same": false
        },
        {
          "line": 1515,
          "old_api": null,
          "new_api": "propagate",
          "old_text": null,
          "new_text": "propagate(c->cmd,c->db->id,c->argv,c->argc,flags)",
          "old_line_content": "    /* Commands such as LPUSH or BRPOPLPUSH may propagate an additional",
          "new_line_content": "            propagate(c->cmd,c->db->id,c->argv,c->argc,flags);",
          "content_same": false
        },
        {
          "line": 1004,
          "old_api": null,
          "new_api": "processInputBuffer",
          "old_text": null,
          "new_text": "processInputBuffer(c)",
          "old_line_content": "        }",
          "new_line_content": "            processInputBuffer(c);",
          "content_same": false
        },
        {
          "line": 2027,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                    \"master_link_down_since_seconds:%ld\\r\\n\",\n                    (long)server.unixtime-server.repl_down_since)",
          "old_line_content": "                    (long)server.unixtime-server.repl_down_since);",
          "new_line_content": "                info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 1010,
          "old_api": null,
          "new_api": "flushAppendOnlyFile",
          "old_text": null,
          "new_text": "flushAppendOnlyFile(0)",
          "old_line_content": "",
          "new_line_content": "    flushAppendOnlyFile(0);",
          "content_same": false
        },
        {
          "line": 2034,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.slaves)",
          "old_line_content": "            int slaveid = 0;",
          "new_line_content": "            listLength(server.slaves));",
          "content_same": false
        },
        {
          "line": 2035,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.slaves)",
          "old_line_content": "            listNode *ln;",
          "new_line_content": "        if (listLength(server.slaves)) {",
          "content_same": false
        },
        {
          "line": 1527,
          "old_api": null,
          "new_api": "redisOpArrayFree",
          "old_text": null,
          "new_text": "redisOpArrayFree(&server.also_propagate)",
          "old_line_content": "    server.stat_numcommands++;",
          "new_line_content": "        redisOpArrayFree(&server.also_propagate);",
          "content_same": false
        },
        {
          "line": 2041,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&li)",
          "old_line_content": "                char *state = NULL;",
          "new_line_content": "            while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 2042,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(ln)",
          "old_line_content": "                char ip[32];",
          "new_line_content": "                redisClient *slave = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 2047,
          "old_api": null,
          "new_api": "anetPeerToString",
          "old_text": null,
          "new_text": "anetPeerToString(slave->fd,ip,&port)",
          "old_line_content": "                case REDIS_REPL_WAIT_BGSAVE_START:",
          "new_line_content": "                if (anetPeerToString(slave->fd,ip,&port) == -1) continue;",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1543,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[0]->ptr,\"quit\")",
          "new_text": null,
          "old_line_content": "    if (!strcasecmp(c->argv[0]->ptr,\"quit\")) {",
          "new_line_content": "     * when FORCE_REPLICATION is enabled and would be implemented in",
          "content_same": false
        },
        {
          "line": 1544,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.ok);",
          "new_line_content": "     * a regular command proc. */",
          "content_same": false
        },
        {
          "line": 2059,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\"slave%d:%s,%d,%s\\r\\n\",\n                    slaveid,ip,port,state)",
          "new_text": null,
          "old_line_content": "                info = sdscatprintf(info,\"slave%d:%s,%d,%s\\r\\n\",",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1551,
          "old_api": "lookupCommand",
          "new_api": null,
          "old_text": "lookupCommand(c->argv[0]->ptr)",
          "new_text": null,
          "old_line_content": "    c->cmd = c->lastcmd = lookupCommand(c->argv[0]->ptr);",
          "new_line_content": "    /* Now lookup the command and check ASAP about trivial error conditions",
          "content_same": false
        },
        {
          "line": 2067,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"cpu\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"cpu\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2068,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "    /* CPU */",
          "content_same": false
        },
        {
          "line": 1558,
          "old_api": "addReplyErrorFormat",
          "new_api": null,
          "old_text": "addReplyErrorFormat(c,\"wrong number of arguments for '%s' command\",\n            c->cmd->name)",
          "new_text": null,
          "old_line_content": "        addReplyErrorFormat(c,\"wrong number of arguments for '%s' command\",",
          "new_line_content": "    } else if ((c->cmd->arity > 0 && c->cmd->arity != c->argc) ||",
          "content_same": false
        },
        {
          "line": 1053,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\":\")",
          "new_text": null,
          "old_line_content": "    shared.colon = createObject(REDIS_STRING,sdsnew(\":\"));",
          "new_line_content": "        \"-OOM command not allowed when used memory > 'maxmemory'.\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 1566,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"operation not permitted\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,\"operation not permitted\");",
          "new_line_content": "    if (server.requirepass && !c->authenticated && c->cmd->proc != authCommand)",
          "content_same": false
        },
        {
          "line": 1057,
          "old_api": "createObject",
          "new_api": null,
          "old_text": "createObject(REDIS_STRING,\n            sdscatprintf(sdsempty(),\"select %d\\r\\n\", j))",
          "new_text": null,
          "old_line_content": "        shared.select[j] = createObject(REDIS_STRING,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2082,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"commandstats\")",
          "new_text": null,
          "old_line_content": "    if (allsections || !strcasecmp(section,\"commandstats\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2083,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "    /* cmdtime */",
          "content_same": false
        },
        {
          "line": 1058,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "            sdscatprintf(sdsempty(),\"select %d\\r\\n\", j));",
          "new_line_content": "    for (j = 0; j < REDIS_SHARED_SELECT_CMDS; j++) {",
          "content_same": false
        },
        {
          "line": 1061,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject(\"$8\\r\\npmessage\\r\\n\",14)",
          "new_text": null,
          "old_line_content": "    shared.pmessagebulk = createStringObject(\"$8\\r\\npmessage\\r\\n\",14);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1576,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"The cluster is down. Check with CLUSTER INFO for more information\")",
          "new_text": null,
          "old_line_content": "            addReplyError(c,\"The cluster is down. Check with CLUSTER INFO for more information\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2090,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                \"cmdstat_%s:calls=%lld,usec=%lld,usec_per_call=%.2f\\r\\n\",\n                c->name, c->calls, c->microseconds,\n                (c->calls == 0) ? 0 : ((float)c->microseconds/c->calls))",
          "new_text": null,
          "old_line_content": "            info = sdscatprintf(info,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1580,
          "old_api": "getNodeByQuery",
          "new_api": null,
          "old_text": "getNodeByQuery(c,c->cmd,c->argv,c->argc,&hashslot,&ask)",
          "new_text": null,
          "old_line_content": "            clusterNode *n = getNodeByQuery(c,c->cmd,c->argv,c->argc,&hashslot,&ask);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1585,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "                addReplySds(c,sdscatprintf(sdsempty(),",
          "new_line_content": "                return REDIS_OK;",
          "content_same": false
        },
        {
          "line": 2098,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"cluster\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"cluster\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2099,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "    /* Cluster */",
          "content_same": false
        },
        {
          "line": 1074,
          "old_api": "createObject",
          "new_api": null,
          "old_text": "createObject(REDIS_STRING,\n            sdscatprintf(sdsempty(),\"*%d\\r\\n\",j))",
          "new_text": null,
          "old_line_content": "        shared.mbulkhdr[j] = createObject(REDIS_STRING,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1075,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "            sdscatprintf(sdsempty(),\"*%d\\r\\n\",j));",
          "new_line_content": "    for (j = 0; j < REDIS_SHARED_BULKHDR_LEN; j++) {",
          "content_same": false
        },
        {
          "line": 1082,
          "old_api": "getRandomHexChars",
          "new_api": null,
          "old_text": "getRandomHexChars(server.runid,REDIS_RUN_ID_SIZE)",
          "new_text": null,
          "old_line_content": "    getRandomHexChars(server.runid,REDIS_RUN_ID_SIZE);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2107,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"keyspace\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"keyspace\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2108,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "    /* Key space */",
          "content_same": false
        },
        {
          "line": 1599,
          "old_api": "freeMemoryIfNeeded",
          "new_api": null,
          "old_text": "freeMemoryIfNeeded()",
          "new_text": null,
          "old_line_content": "        int retval = freeMemoryIfNeeded();",
          "new_line_content": "     * is returning an error. */",
          "content_same": false
        },
        {
          "line": 2113,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.db[j].dict)",
          "new_text": null,
          "old_line_content": "            keys = dictSize(server.db[j].dict);",
          "new_line_content": "            long long keys, vkeys;",
          "content_same": false
        },
        {
          "line": 2114,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.db[j].expires)",
          "new_text": null,
          "old_line_content": "            vkeys = dictSize(server.db[j].expires);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1099,
          "old_api": "zstrdup",
          "new_api": null,
          "old_text": "zstrdup(\"redis\")",
          "new_text": null,
          "old_line_content": "    server.syslog_ident = zstrdup(\"redis\");",
          "new_line_content": "    server.logfile = NULL; /* NULL = log on standard output */",
          "content_same": false
        },
        {
          "line": 1612,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.bgsaveerr)",
          "new_text": null,
          "old_line_content": "        addReply(c, shared.bgsaveerr);",
          "new_line_content": "        c->cmd->flags & REDIS_CMD_WRITE)",
          "content_same": false
        },
        {
          "line": 2128,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.syntaxerr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2131,
          "old_api": "genRedisInfoString",
          "new_api": null,
          "old_text": "genRedisInfoString(section)",
          "new_text": null,
          "old_line_content": "    sds info = genRedisInfoString(section);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 2132,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"$%lu\\r\\n\",",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1109,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    server.aof_last_fsync = time(NULL);",
          "new_line_content": "    server.aof_rewrite_base_size = 0;",
          "content_same": false
        },
        {
          "line": 1622,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.roslaveerr)",
          "new_text": null,
          "old_line_content": "        addReply(c, shared.roslaveerr);",
          "new_line_content": "        c->cmd->flags & REDIS_CMD_WRITE)",
          "content_same": false
        },
        {
          "line": 1114,
          "old_api": "zstrdup",
          "new_api": null,
          "old_text": "zstrdup(\"/var/run/redis.pid\")",
          "new_text": null,
          "old_line_content": "    server.pidfile = zstrdup(\"/var/run/redis.pid\");",
          "new_line_content": "    server.aof_selected_db = -1; /* Make sure the first time will not match */",
          "content_same": false
        },
        {
          "line": 1115,
          "old_api": "zstrdup",
          "new_api": null,
          "old_text": "zstrdup(\"dump.rdb\")",
          "new_text": null,
          "old_line_content": "    server.rdb_filename = zstrdup(\"dump.rdb\");",
          "new_line_content": "    server.aof_flush_postponed_start = 0;",
          "content_same": false
        },
        {
          "line": 1627,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(c->pubsub_patterns)",
          "new_text": null,
          "old_line_content": "    if ((dictSize(c->pubsub_channels) > 0 || listLength(c->pubsub_patterns) > 0)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2144,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(server.monitors,c)",
          "new_text": null,
          "old_line_content": "    listAddNodeTail(server.monitors,c);",
          "new_line_content": "    c->flags |= (REDIS_SLAVE|REDIS_MONITOR);",
          "content_same": false
        },
        {
          "line": 2145,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.ok);",
          "new_line_content": "    c->slaveseldb = 0;",
          "content_same": false
        },
        {
          "line": 1633,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"only (P)SUBSCRIBE / (P)UNSUBSCRIBE / QUIT allowed in this context\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,\"only (P)SUBSCRIBE / (P)UNSUBSCRIBE / QUIT allowed in this context\");",
          "new_line_content": "        c->cmd->proc != psubscribeCommand &&",
          "content_same": false
        },
        {
          "line": 1643,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.masterdownerr)",
          "new_text": null,
          "old_line_content": "        addReply(c, shared.masterdownerr);",
          "new_line_content": "        c->cmd->proc != infoCommand && c->cmd->proc != slaveofCommand)",
          "content_same": false
        },
        {
          "line": 1137,
          "old_api": "zstrdup",
          "new_api": null,
          "old_text": "zstrdup(\"nodes.conf\")",
          "new_text": null,
          "old_line_content": "    server.cluster.configfile = zstrdup(\"nodes.conf\");",
          "new_line_content": "    server.repl_timeout = REDIS_REPL_TIMEOUT;",
          "content_same": false
        },
        {
          "line": 1649,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.loadingerr)",
          "new_text": null,
          "old_line_content": "        addReply(c, shared.loadingerr);",
          "new_line_content": "    /* Loading DB? Return an error if the command is not INFO */",
          "content_same": false
        },
        {
          "line": 2167,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.slaves)",
          "new_text": null,
          "old_line_content": "    int slaves = listLength(server.slaves);",
          "new_line_content": "int freeMemoryIfNeeded(void) {",
          "content_same": false
        },
        {
          "line": 1143,
          "old_api": "updateLRUClock",
          "new_api": null,
          "old_text": "updateLRUClock()",
          "new_text": null,
          "old_line_content": "    updateLRUClock();",
          "new_line_content": "    server.lua_timedout = 0;",
          "content_same": false
        },
        {
          "line": 1144,
          "old_api": "resetServerSaveParams",
          "new_api": null,
          "old_text": "resetServerSaveParams()",
          "new_text": null,
          "old_line_content": "    resetServerSaveParams();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1657,
          "old_api": "tolower",
          "new_api": null,
          "old_text": "tolower(((char*)c->argv[1]->ptr)[0])",
          "new_text": null,
          "old_line_content": "          tolower(((char*)c->argv[1]->ptr)[0]) == 'n') &&",
          "new_line_content": "        !(c->cmd->proc == shutdownCommand &&",
          "content_same": false
        },
        {
          "line": 2171,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "    mem_used = zmalloc_used_memory();",
          "new_line_content": "    /* Remove the size of slaves output buffers and AOF buffer from the",
          "content_same": false
        },
        {
          "line": 1147,
          "old_api": "appendServerSaveParams",
          "new_api": null,
          "old_text": "appendServerSaveParams(300,100)",
          "new_text": null,
          "old_line_content": "    appendServerSaveParams(300,100);  /* save after 5 minutes and 100 changes */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1660,
          "old_api": "tolower",
          "new_api": null,
          "old_text": "tolower(((char*)c->argv[1]->ptr)[0])",
          "new_text": null,
          "old_line_content": "          tolower(((char*)c->argv[1]->ptr)[0]) == 'k'))",
          "new_line_content": "        !(c->cmd->proc == scriptCommand &&",
          "content_same": false
        },
        {
          "line": 2176,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(server.slaves,&li)",
          "new_text": null,
          "old_line_content": "        listRewind(server.slaves,&li);",
          "new_line_content": "        listNode *ln;",
          "content_same": false
        },
        {
          "line": 2177,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "        while((ln = listNext(&li))) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1158,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    server.repl_down_since = time(NULL);",
          "new_line_content": "    server.repl_serve_stale_data = 1;",
          "content_same": false
        },
        {
          "line": 1671,
          "old_api": "queueMultiCommand",
          "new_api": null,
          "old_text": "queueMultiCommand(c)",
          "new_text": null,
          "old_line_content": "        queueMultiCommand(c);",
          "new_line_content": "        c->cmd->proc != multiCommand && c->cmd->proc != watchCommand)",
          "content_same": false
        },
        {
          "line": 1672,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.queued)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.queued);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 2187,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(server.aof_buf)",
          "new_text": null,
          "old_line_content": "        mem_used -= sdslen(server.aof_buf);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2188,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(server.aof_rewrite_buf)",
          "new_text": null,
          "old_line_content": "        mem_used -= sdslen(server.aof_rewrite_buf);",
          "new_line_content": "    if (server.aof_state != REDIS_AOF_OFF) {",
          "content_same": false
        },
        {
          "line": 1685,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"User requested shutdown...\")",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_WARNING,\"User requested shutdown...\");",
          "new_line_content": "    int nosave = flags & REDIS_SHUTDOWN_NOSAVE;",
          "content_same": false
        },
        {
          "line": 664,
          "old_api": "dictGetRandomKey",
          "new_api": null,
          "old_text": "dictGetRandomKey(db->expires)",
          "new_text": null,
          "old_line_content": "                if ((de = dictGetRandomKey(db->expires)) == NULL) break;",
          "new_line_content": "                long long t;",
          "content_same": false
        },
        {
          "line": 665,
          "old_api": "dictGetSignedIntegerVal",
          "new_api": null,
          "old_text": "dictGetSignedIntegerVal(de)",
          "new_text": null,
          "old_line_content": "                t = dictGetSignedIntegerVal(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1690,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"There is a child saving an .rdb. Killing it!\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"There is a child saving an .rdb. Killing it!\");",
          "new_line_content": "       overwrite the synchronous saving did by SHUTDOWN. */",
          "content_same": false
        },
        {
          "line": 1691,
          "old_api": "kill",
          "new_api": null,
          "old_text": "kill(server.rdb_child_pid,SIGKILL)",
          "new_text": null,
          "old_line_content": "        kill(server.rdb_child_pid,SIGKILL);",
          "new_line_content": "    if (server.rdb_child_pid != -1) {",
          "content_same": false
        },
        {
          "line": 668,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(key)",
          "new_text": null,
          "old_line_content": "                    robj *keyobj = createStringObject(key,sdslen(key));",
          "new_line_content": "                if (now > t) {",
          "content_same": false
        },
        {
          "line": 1180,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&commandTableDictType,NULL)",
          "new_text": null,
          "old_line_content": "    server.commands = dictCreate(&commandTableDictType,NULL);",
          "new_line_content": "     * initial configuration, since command names may be changed via",
          "content_same": false
        },
        {
          "line": 1181,
          "old_api": "populateCommandTable",
          "new_api": null,
          "old_text": "populateCommandTable()",
          "new_text": null,
          "old_line_content": "    populateCommandTable();",
          "new_line_content": "     * redis.conf using the rename-command directive. */",
          "content_same": false
        },
        {
          "line": 671,
          "old_api": "dbDelete",
          "new_api": null,
          "old_text": "dbDelete(db,keyobj)",
          "new_text": null,
          "old_line_content": "                    dbDelete(db,keyobj);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1698,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\n                \"There is a child rewriting the AOF. Killing it!\")",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,",
          "new_line_content": "         * but contains the full dataset anyway. */",
          "content_same": false
        },
        {
          "line": 1703,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Calling fsync() on the AOF file.\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_NOTICE,\"Calling fsync() on the AOF file.\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1704,
          "old_api": "aof_fsync",
          "new_api": null,
          "old_text": "aof_fsync(server.aof_fd)",
          "new_text": null,
          "old_line_content": "        aof_fsync(server.aof_fd);",
          "new_line_content": "        /* Append only file: fsync() the AOF and exit */",
          "content_same": false
        },
        {
          "line": 2217,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(dict)",
          "new_text": null,
          "old_line_content": "            if (dictSize(dict) == 0) continue;",
          "new_line_content": "                dict = server.db[j].expires;",
          "content_same": false
        },
        {
          "line": 682,
          "old_api": "ustime",
          "new_api": null,
          "old_text": "ustime()",
          "new_text": null,
          "old_line_content": "                (ustime()-start) > timelimit) return;",
          "new_line_content": "            iteration++;",
          "content_same": false
        },
        {
          "line": 1707,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Saving the final RDB snapshot before exiting.\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_NOTICE,\"Saving the final RDB snapshot before exiting.\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2223,
          "old_api": "dictGetRandomKey",
          "new_api": null,
          "old_text": "dictGetRandomKey(dict)",
          "new_text": null,
          "old_line_content": "                de = dictGetRandomKey(dict);",
          "new_line_content": "                server.maxmemory_policy == REDIS_MAXMEMORY_VOLATILE_RANDOM)",
          "content_same": false
        },
        {
          "line": 2224,
          "old_api": "dictGetKey",
          "new_api": null,
          "old_text": "dictGetKey(de)",
          "new_text": null,
          "old_line_content": "                bestkey = dictGetKey(de);",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 1715,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Error trying to save the DB, can't exit.\")",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,\"Error trying to save the DB, can't exit.\");",
          "new_line_content": "             * saving aborted, handling special stuff like slaves pending for",
          "content_same": false
        },
        {
          "line": 695,
          "old_api": "mstime",
          "new_api": null,
          "old_text": "mstime()",
          "new_text": null,
          "old_line_content": "    long long t = mstime() - server.ops_sec_last_sample_time;",
          "new_line_content": "/* Add a sample to the operations per second array of samples. */",
          "content_same": false
        },
        {
          "line": 1720,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Removing the pid file.\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_NOTICE,\"Removing the pid file.\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1721,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(server.pidfile)",
          "new_text": null,
          "old_line_content": "        unlink(server.pidfile);",
          "new_line_content": "    if (server.daemonize) {",
          "content_same": false
        },
        {
          "line": 1210,
          "old_api": "getrlimit",
          "new_api": null,
          "old_text": "getrlimit(RLIMIT_NOFILE,&limit)",
          "new_text": null,
          "old_line_content": "    if (getrlimit(RLIMIT_NOFILE,&limit) == -1) {",
          "new_line_content": "    struct rlimit limit;",
          "content_same": false
        },
        {
          "line": 1211,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Unable to obtain the current NOFILE limit (%s), assuming 1024 and setting the max clients configuration accordingly.\",\n            strerror(errno))",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Unable to obtain the current NOFILE limit (%s), assuming 1024 and setting the max clients configuration accordingly.\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2236,
          "old_api": "dictGetRandomKey",
          "new_api": null,
          "old_text": "dictGetRandomKey(dict)",
          "new_text": null,
          "old_line_content": "                    de = dictGetRandomKey(dict);",
          "new_line_content": "                    robj *o;",
          "content_same": false
        },
        {
          "line": 2237,
          "old_api": "dictGetKey",
          "new_api": null,
          "old_text": "dictGetKey(de)",
          "new_text": null,
          "old_line_content": "                    thiskey = dictGetKey(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1724,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(server.ipfd)",
          "new_text": null,
          "old_line_content": "    if (server.ipfd != -1) close(server.ipfd);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 703,
          "old_api": "mstime",
          "new_api": null,
          "old_text": "mstime()",
          "new_text": null,
          "old_line_content": "    server.ops_sec_last_sample_time = mstime();",
          "new_line_content": "    server.ops_sec_samples[server.ops_sec_idx] = ops_sec;",
          "content_same": false
        },
        {
          "line": 1725,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(server.sofd)",
          "new_text": null,
          "old_line_content": "    if (server.sofd != -1) close(server.sofd);",
          "new_line_content": "    /* Close the listening sockets. Apparently this allows faster restarts. */",
          "content_same": false
        },
        {
          "line": 2241,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(db->dict, thiskey)",
          "new_text": null,
          "old_line_content": "                        de = dictFind(db->dict, thiskey);",
          "new_line_content": "                     * to locate the real key, as dict is set to db->expires. */",
          "content_same": false
        },
        {
          "line": 2242,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "                    o = dictGetVal(de);",
          "new_line_content": "                    if (server.maxmemory_policy == REDIS_MAXMEMORY_VOLATILE_LRU)",
          "content_same": false
        },
        {
          "line": 1728,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(server.unixsocket)",
          "new_text": null,
          "old_line_content": "        unlink(server.unixsocket); /* don't care if this fails */",
          "new_line_content": "    if (server.unixsocket) {",
          "content_same": false
        },
        {
          "line": 1731,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Redis is now ready to exit, bye bye...\")",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_WARNING,\"Redis is now ready to exit, bye bye...\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1226,
          "old_api": "setrlimit",
          "new_api": null,
          "old_text": "setrlimit(RLIMIT_NOFILE,&limit)",
          "new_text": null,
          "old_line_content": "                if (setrlimit(RLIMIT_NOFILE,&limit) != -1) break;",
          "new_line_content": "                limit.rlim_cur = f;",
          "content_same": false
        },
        {
          "line": 1739,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"Client sent AUTH, but no password is set\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,\"Client sent AUTH, but no password is set\");",
          "new_line_content": "void authCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 1740,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(c->argv[1]->ptr, server.requirepass)",
          "new_text": null,
          "old_line_content": "    } else if (!strcmp(c->argv[1]->ptr, server.requirepass)) {",
          "new_line_content": "    if (!server.requirepass) {",
          "content_same": false
        },
        {
          "line": 1232,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Unable to set the max number of files limit to %d (%s), setting the max clients configuration to %d.\",\n                    (int) maxfiles, strerror(errno), (int) server.maxclients)",
          "new_text": null,
          "old_line_content": "                redisLog(REDIS_WARNING,\"Unable to set the max number of files limit to %d (%s), setting the max clients configuration to %d.\",",
          "new_line_content": "            if (f != maxfiles) {",
          "content_same": false
        },
        {
          "line": 1233,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "                    (int) maxfiles, strerror(errno), (int) server.maxclients);",
          "new_line_content": "                server.maxclients = f-32;",
          "content_same": false
        },
        {
          "line": 1745,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"invalid password\")",
          "new_text": null,
          "old_line_content": "      addReplyError(c,\"invalid password\");",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 2259,
          "old_api": "dictGetRandomKey",
          "new_api": null,
          "old_text": "dictGetRandomKey(dict)",
          "new_text": null,
          "old_line_content": "                    de = dictGetRandomKey(dict);",
          "new_line_content": "                    long thisval;",
          "content_same": false
        },
        {
          "line": 2260,
          "old_api": "dictGetKey",
          "new_api": null,
          "old_text": "dictGetKey(de)",
          "new_text": null,
          "old_line_content": "                    thiskey = dictGetKey(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 725,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(c->pubsub_channels)",
          "new_text": null,
          "old_line_content": "        dictSize(c->pubsub_channels) == 0 && /* no timeout for pubsub */",
          "new_line_content": "        !(c->flags & REDIS_MASTER) &&   /* no timeout for masters */",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(c->pubsub_patterns)",
          "new_text": null,
          "old_line_content": "        listLength(c->pubsub_patterns) == 0 &&",
          "new_line_content": "        !(c->flags & REDIS_BLOCKED) &&  /* no timeout for BLPOP */",
          "content_same": false
        },
        {
          "line": 1750,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.pong)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.pong);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 729,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_VERBOSE,\"Closing idle client\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_VERBOSE,\"Closing idle client\");",
          "new_line_content": "        (now - c->lastinteraction > server.maxidletime))",
          "content_same": false
        },
        {
          "line": 730,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(c)",
          "new_text": null,
          "old_line_content": "        freeClient(c);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1754,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,c->argv[1])",
          "new_text": null,
          "old_line_content": "    addReplyBulk(c,c->argv[1]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1245,
          "old_api": "signal",
          "new_api": null,
          "old_text": "signal(SIGHUP, SIG_IGN)",
          "new_text": null,
          "old_line_content": "    signal(SIGHUP, SIG_IGN);",
          "new_line_content": "    int j;",
          "content_same": false
        },
        {
          "line": 734,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullmultibulk)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.nullmultibulk);",
          "new_line_content": "    } else if (c->flags & REDIS_BLOCKED) {",
          "content_same": false
        },
        {
          "line": 735,
          "old_api": "unblockClientWaitingData",
          "new_api": null,
          "old_text": "unblockClientWaitingData(c)",
          "new_text": null,
          "old_line_content": "            unblockClientWaitingData(c);",
          "new_line_content": "        if (c->bpop.timeout != 0 && c->bpop.timeout < now) {",
          "content_same": false
        },
        {
          "line": 1246,
          "old_api": "signal",
          "new_api": null,
          "old_text": "signal(SIGPIPE, SIG_IGN)",
          "new_text": null,
          "old_line_content": "    signal(SIGPIPE, SIG_IGN);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1250,
          "old_api": "openlog",
          "new_api": null,
          "old_text": "openlog(server.syslog_ident, LOG_PID | LOG_NDELAY | LOG_NOWAIT,\n            server.syslog_facility)",
          "new_text": null,
          "old_line_content": "        openlog(server.syslog_ident, LOG_PID | LOG_NDELAY | LOG_NOWAIT,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1762,
          "old_api": "gettimeofday",
          "new_api": null,
          "old_text": "gettimeofday(&tv,NULL)",
          "new_text": null,
          "old_line_content": "    gettimeofday(&tv,NULL);",
          "new_line_content": "    /* gettimeofday() can only fail if &tv is a bad addresss so we",
          "content_same": false
        },
        {
          "line": 2276,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(bestkey)",
          "new_text": null,
          "old_line_content": "                robj *keyobj = createStringObject(bestkey,sdslen(bestkey));",
          "new_line_content": "                long long delta;",
          "content_same": false
        },
        {
          "line": 2277,
          "old_api": "propagateExpire",
          "new_api": null,
          "old_text": "propagateExpire(db,keyobj)",
          "new_text": null,
          "old_line_content": "                propagateExpire(db,keyobj);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1763,
          "old_api": "addReplyMultiBulkLen",
          "new_api": null,
          "old_text": "addReplyMultiBulkLen(c,2)",
          "new_text": null,
          "old_line_content": "    addReplyMultiBulkLen(c,2);",
          "new_line_content": "     * don't check for errors. */",
          "content_same": false
        },
        {
          "line": 1255,
          "old_api": "listCreate",
          "new_api": null,
          "old_text": "listCreate()",
          "new_text": null,
          "old_line_content": "    server.clients = listCreate();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1256,
          "old_api": "listCreate",
          "new_api": null,
          "old_text": "listCreate()",
          "new_text": null,
          "old_line_content": "    server.clients_to_close = listCreate();",
          "new_line_content": "    server.current_client = NULL;",
          "content_same": false
        },
        {
          "line": 746,
          "old_api": "sdsAllocSize",
          "new_api": null,
          "old_text": "sdsAllocSize(c->querybuf)",
          "new_text": null,
          "old_line_content": "    size_t querybuf_size = sdsAllocSize(c->querybuf);",
          "new_line_content": " * The funciton always returns 0 as it never terminates the client. */",
          "content_same": false
        },
        {
          "line": 2286,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "                delta = (long long) zmalloc_used_memory();",
          "new_line_content": "                 * AOF and Output buffer memory will be freed eventually so",
          "content_same": false
        },
        {
          "line": 2287,
          "old_api": "dbDelete",
          "new_api": null,
          "old_text": "dbDelete(db,keyobj)",
          "new_text": null,
          "old_line_content": "                dbDelete(db,keyobj);",
          "new_line_content": "                 * we only care about memory used by the key space. */",
          "content_same": false
        },
        {
          "line": 1262,
          "old_api": "adjustOpenFilesLimit",
          "new_api": null,
          "old_text": "adjustOpenFilesLimit()",
          "new_text": null,
          "old_line_content": "    adjustOpenFilesLimit();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1775,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(s,\"%lluB\",n)",
          "new_text": null,
          "old_line_content": "        sprintf(s,\"%lluB\",n);",
          "new_line_content": "    if (n < 1024) {",
          "content_same": false
        },
        {
          "line": 2291,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(keyobj)",
          "new_text": null,
          "old_line_content": "                decrRefCount(keyobj);",
          "new_line_content": "                mem_freed += delta;",
          "content_same": false
        },
        {
          "line": 1267,
          "old_api": "anetTcpServer",
          "new_api": null,
          "old_text": "anetTcpServer(server.neterr,server.port,server.bindaddr)",
          "new_text": null,
          "old_line_content": "        server.ipfd = anetTcpServer(server.neterr,server.port,server.bindaddr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 757,
          "old_api": "sdsavail",
          "new_api": null,
          "old_text": "sdsavail(c->querybuf)",
          "new_text": null,
          "old_line_content": "        if (sdsavail(c->querybuf) > 1024) {",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 758,
          "old_api": "sdsRemoveFreeSpace",
          "new_api": null,
          "old_text": "sdsRemoveFreeSpace(c->querybuf)",
          "new_text": null,
          "old_line_content": "            c->querybuf = sdsRemoveFreeSpace(c->querybuf);",
          "new_line_content": "        /* Only resize the query buffer if it is actually wasting space. */",
          "content_same": false
        },
        {
          "line": 1779,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(s,\"%.2fK\",d)",
          "new_text": null,
          "old_line_content": "        sprintf(s,\"%.2fK\",d);",
          "new_line_content": "    } else if (n < (1024*1024)) {",
          "content_same": false
        },
        {
          "line": 1782,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(s,\"%.2fM\",d)",
          "new_text": null,
          "old_line_content": "        sprintf(s,\"%.2fM\",d);",
          "new_line_content": "    } else if (n < (1024LL*1024*1024)) {",
          "content_same": false
        },
        {
          "line": 1785,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(s,\"%.2fG\",d)",
          "new_text": null,
          "old_line_content": "        sprintf(s,\"%.2fG\",d);",
          "new_line_content": "    } else if (n < (1024LL*1024*1024*1024)) {",
          "content_same": false
        },
        {
          "line": 2298,
          "old_api": "flushSlavesOutputBuffers",
          "new_api": null,
          "old_text": "flushSlavesOutputBuffers()",
          "new_text": null,
          "old_line_content": "                if (slaves) flushSlavesOutputBuffers();",
          "new_line_content": "                 * deliver data to the slaves fast enough, so we force the",
          "content_same": false
        },
        {
          "line": 1275,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(server.unixsocket)",
          "new_text": null,
          "old_line_content": "        unlink(server.unixsocket); /* don't care if this fails */",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1276,
          "old_api": "anetUnixServer",
          "new_api": null,
          "old_text": "anetUnixServer(server.neterr,server.unixsocket,server.unixsocketperm)",
          "new_text": null,
          "old_line_content": "        server.sofd = anetUnixServer(server.neterr,server.unixsocket,server.unixsocketperm);",
          "new_line_content": "    if (server.unixsocket != NULL) {",
          "content_same": false
        },
        {
          "line": 1279,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "            exit(1);",
          "new_line_content": "        if (server.sofd == ANET_ERR) {",
          "content_same": false
        },
        {
          "line": 1793,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    sds info = sdsempty();",
          "new_line_content": " * on memory corruption problems. */",
          "content_same": false
        },
        {
          "line": 1283,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING, \"Configured to not listen anywhere, exiting.\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING, \"Configured to not listen anywhere, exiting.\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1284,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "        exit(1);",
          "new_line_content": "    if (server.ipfd < 0 && server.sofd < 0) {",
          "content_same": false
        },
        {
          "line": 773,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.clients)",
          "new_text": null,
          "old_line_content": "    int numclients = listLength(server.clients);",
          "new_line_content": "     * In normal conditions (a reasonable number of clients) we process",
          "content_same": false
        },
        {
          "line": 2310,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(\"/proc/sys/vm/overcommit_memory\",\"r\")",
          "new_text": null,
          "old_line_content": "    FILE *fp = fopen(\"/proc/sys/vm/overcommit_memory\",\"r\");",
          "new_line_content": "#ifdef __linux__",
          "content_same": false
        },
        {
          "line": 1287,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&dbDictType,NULL)",
          "new_text": null,
          "old_line_content": "        server.db[j].dict = dictCreate(&dbDictType,NULL);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1288,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&keyptrDictType,NULL)",
          "new_text": null,
          "old_line_content": "        server.db[j].expires = dictCreate(&keyptrDictType,NULL);",
          "new_line_content": "    for (j = 0; j < server.dbnum; j++) {",
          "content_same": false
        },
        {
          "line": 2314,
          "old_api": "fgets",
          "new_api": null,
          "old_text": "fgets(buf,64,fp)",
          "new_text": null,
          "old_line_content": "    if (fgets(buf,64,fp) == NULL) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2315,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "        fclose(fp);",
          "new_line_content": "    if (!fp) return -1;",
          "content_same": false
        },
        {
          "line": 778,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.clients)",
          "new_text": null,
          "old_line_content": "    while(listLength(server.clients) && iterations--) {",
          "new_line_content": "    if (iterations < 50)",
          "content_same": false
        },
        {
          "line": 1293,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&keylistDictType,NULL)",
          "new_text": null,
          "old_line_content": "    server.pubsub_channels = dictCreate(&keylistDictType,NULL);",
          "new_line_content": "        server.db[j].id = j;",
          "content_same": false
        },
        {
          "line": 2318,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "    fclose(fp);",
          "new_line_content": "        return -1;",
          "content_same": false
        },
        {
          "line": 1294,
          "old_api": "listCreate",
          "new_api": null,
          "old_text": "listCreate()",
          "new_text": null,
          "old_line_content": "    server.pubsub_patterns = listCreate();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1802,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"all\")",
          "new_text": null,
          "old_line_content": "        allsections = strcasecmp(section,\"all\") == 0;",
          "new_line_content": "    ",
          "content_same": false
        },
        {
          "line": 785,
          "old_api": "listRotate",
          "new_api": null,
          "old_text": "listRotate(server.clients)",
          "new_text": null,
          "old_line_content": "        listRotate(server.clients);",
          "new_line_content": "         * This way if the client must be removed from the list it's the",
          "content_same": false
        },
        {
          "line": 786,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(server.clients)",
          "new_text": null,
          "old_line_content": "        head = listFirst(server.clients);",
          "new_line_content": "         * first element and we don't incur into O(N) computation. */",
          "content_same": false
        },
        {
          "line": 1803,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"default\")",
          "new_text": null,
          "old_line_content": "        defsections = strcasecmp(section,\"default\") == 0;",
          "new_line_content": "    if (section) {",
          "content_same": false
        },
        {
          "line": 2324,
          "old_api": "linuxOvercommitMemoryValue",
          "new_api": null,
          "old_text": "linuxOvercommitMemoryValue()",
          "new_text": null,
          "old_line_content": "    if (linuxOvercommitMemoryValue() == 0) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2325,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\");",
          "new_line_content": "void linuxOvercommitMemoryWarning(void) {",
          "content_same": false
        },
        {
          "line": 1300,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    server.aof_rewrite_buf = sdsempty();",
          "new_line_content": "    server.rdb_child_pid = -1;",
          "content_same": false
        },
        {
          "line": 791,
          "old_api": "clientsCronHandleTimeout",
          "new_api": null,
          "old_text": "clientsCronHandleTimeout(c)",
          "new_text": null,
          "old_line_content": "        if (clientsCronHandleTimeout(c)) continue;",
          "new_line_content": "         * The protocol is that they return non-zero if the client was",
          "content_same": false
        },
        {
          "line": 792,
          "old_api": "clientsCronResizeQueryBuffer",
          "new_api": null,
          "old_text": "clientsCronResizeQueryBuffer(c)",
          "new_text": null,
          "old_line_content": "        if (clientsCronResizeQueryBuffer(c)) continue;",
          "new_line_content": "         * terminated. */",
          "content_same": false
        },
        {
          "line": 1301,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    server.aof_buf = sdsempty();",
          "new_line_content": "    server.aof_child_pid = -1;",
          "content_same": false
        },
        {
          "line": 1811,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"server\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"server\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1814,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "        struct utsname name;",
          "content_same": false
        },
        {
          "line": 2332,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(server.pidfile,\"w\")",
          "new_text": null,
          "old_line_content": "    FILE *fp = fopen(server.pidfile,\"w\");",
          "new_line_content": "void createPidFile(void) {",
          "content_same": false
        },
        {
          "line": 1308,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    server.stat_starttime = time(NULL);",
          "new_line_content": "    server.stat_expiredkeys = 0;",
          "content_same": false
        },
        {
          "line": 1815,
          "old_api": "uname",
          "new_api": null,
          "old_text": "uname(&name)",
          "new_text": null,
          "old_line_content": "        uname(&name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2335,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "        fclose(fp);",
          "new_line_content": "    if (fp) {",
          "content_same": false
        },
        {
          "line": 1314,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(server.ops_sec_samples,0,sizeof(server.ops_sec_samples))",
          "new_text": null,
          "old_line_content": "    memset(server.ops_sec_samples,0,sizeof(server.ops_sec_samples));",
          "new_line_content": "    server.stat_fork_time = 0;",
          "content_same": false
        },
        {
          "line": 2342,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(0)",
          "new_text": null,
          "old_line_content": "    if (fork() != 0) exit(0); /* parent exits */",
          "new_line_content": "    int fd;",
          "content_same": false
        },
        {
          "line": 2343,
          "old_api": "setsid",
          "new_api": null,
          "old_text": "setsid()",
          "new_text": null,
          "old_line_content": "    setsid(); /* create a new session */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1832,
          "old_api": "redisGitSHA1",
          "new_api": null,
          "old_text": "redisGitSHA1()",
          "new_text": null,
          "old_line_content": "            redisGitSHA1(),",
          "new_line_content": "            \"lru_clock:%ld\\r\\n\",",
          "content_same": false
        },
        {
          "line": 1321,
          "old_api": "aeCreateTimeEvent",
          "new_api": null,
          "old_text": "aeCreateTimeEvent(server.el, 1, serverCron, NULL, NULL)",
          "new_text": null,
          "old_line_content": "    aeCreateTimeEvent(server.el, 1, serverCron, NULL, NULL);",
          "new_line_content": "    server.lastbgsave_status = REDIS_OK;",
          "content_same": false
        },
        {
          "line": 1322,
          "old_api": "aeCreateFileEvent",
          "new_api": null,
          "old_text": "aeCreateFileEvent(server.el,server.ipfd,AE_READABLE,\n        acceptTcpHandler,NULL)",
          "new_text": null,
          "old_line_content": "    if (server.ipfd > 0 && aeCreateFileEvent(server.el,server.ipfd,AE_READABLE,",
          "new_line_content": "    server.stop_writes_on_bgsave_err = 1;",
          "content_same": false
        },
        {
          "line": 1833,
          "old_api": "redisGitDirty",
          "new_api": null,
          "old_text": "redisGitDirty()",
          "new_text": null,
          "old_line_content": "            strtol(redisGitDirty(),NULL,10) > 0,",
          "new_line_content": "            REDIS_VERSION,",
          "content_same": false
        },
        {
          "line": 2348,
          "old_api": "open",
          "new_api": null,
          "old_text": "open(\"/dev/null\", O_RDWR, 0)",
          "new_text": null,
          "old_line_content": "    if ((fd = open(\"/dev/null\", O_RDWR, 0)) != -1) {",
          "new_line_content": "     * the 'logfile' is set to 'stdout' in the configuration file",
          "content_same": false
        },
        {
          "line": 2349,
          "old_api": "dup2",
          "new_api": null,
          "old_text": "dup2(fd, STDIN_FILENO)",
          "new_text": null,
          "old_line_content": "        dup2(fd, STDIN_FILENO);",
          "new_line_content": "     * it will not log at all. */",
          "content_same": false
        },
        {
          "line": 1836,
          "old_api": "aeGetApiName",
          "new_api": null,
          "old_text": "aeGetApiName()",
          "new_text": null,
          "old_line_content": "            aeGetApiName(),",
          "new_line_content": "            name.sysname, name.release, name.machine,",
          "content_same": false
        },
        {
          "line": 1328,
          "old_api": "open",
          "new_api": null,
          "old_text": "open(server.aof_filename,\n                               O_WRONLY|O_APPEND|O_CREAT,0644)",
          "new_text": null,
          "old_line_content": "        server.aof_fd = open(server.aof_filename,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1842,
          "old_api": "getpid",
          "new_api": null,
          "old_text": "getpid()",
          "new_text": null,
          "old_line_content": "            (long) getpid(),",
          "new_line_content": "            0,0,0,",
          "content_same": false
        },
        {
          "line": 1331,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING, \"Can't open the append-only file: %s\",\n                strerror(errno))",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING, \"Can't open the append-only file: %s\",",
          "new_line_content": "                               O_WRONLY|O_APPEND|O_CREAT,0644);",
          "content_same": false
        },
        {
          "line": 1332,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "                strerror(errno));",
          "new_line_content": "        if (server.aof_fd == -1) {",
          "content_same": false
        },
        {
          "line": 2357,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"Redis server v=%s sha=%s:%d malloc=%s bits=%d\\n\",\n        REDIS_VERSION,\n        redisGitSHA1(),\n        atoi(redisGitDirty()) > 0,\n        ZMALLOC_LIB,\n        sizeof(long) == 4 ? 32 : 64)",
          "new_text": null,
          "old_line_content": "    printf(\"Redis server v=%s sha=%s:%d malloc=%s bits=%d\\n\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 822,
          "old_api": "REDIS_NOTUSED",
          "new_api": null,
          "old_text": "REDIS_NOTUSED(eventLoop)",
          "new_text": null,
          "old_line_content": "    REDIS_NOTUSED(eventLoop);",
          "new_line_content": "int serverCron(struct aeEventLoop *eventLoop, long long id, void *clientData) {",
          "content_same": false
        },
        {
          "line": 823,
          "old_api": "REDIS_NOTUSED",
          "new_api": null,
          "old_text": "REDIS_NOTUSED(id)",
          "new_text": null,
          "old_line_content": "    REDIS_NOTUSED(id);",
          "new_line_content": "    int j, loops = server.cronloops;",
          "content_same": false
        },
        {
          "line": 2360,
          "old_api": "redisGitDirty",
          "new_api": null,
          "old_text": "redisGitDirty()",
          "new_text": null,
          "old_line_content": "        atoi(redisGitDirty()) > 0,",
          "new_line_content": "        REDIS_VERSION,",
          "content_same": false
        },
        {
          "line": 2363,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(0)",
          "new_text": null,
          "old_line_content": "    exit(0);",
          "new_line_content": "        ZMALLOC_LIB,",
          "content_same": false
        },
        {
          "line": 828,
          "old_api": "watchdogScheduleSignal",
          "new_api": null,
          "old_text": "watchdogScheduleSignal(server.watchdog_period)",
          "new_text": null,
          "old_line_content": "    if (server.watchdog_period) watchdogScheduleSignal(server.watchdog_period);",
          "new_line_content": "    /* Software watchdog: deliver the SIGALRM that will reach the signal",
          "content_same": false
        },
        {
          "line": 1851,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"clients\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"clients\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1342,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Warning: 32 bit instance detected but no memory limit set. Setting 3.5 GB maxmemory limit with 'noeviction' policy now.\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Warning: 32 bit instance detected but no memory limit set. Setting 3.5 GB maxmemory limit with 'noeviction' policy now.\");",
          "new_line_content": "     * useless crashes of the Redis instance. */",
          "content_same": false
        },
        {
          "line": 2367,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\"Usage: ./redis-server [/path/to/redis.conf] [options]\\n\")",
          "new_text": null,
          "old_line_content": "    fprintf(stderr,\"Usage: ./redis-server [/path/to/redis.conf] [options]\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2368,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\"       ./redis-server - (read config from stdin)\\n\")",
          "new_text": null,
          "old_line_content": "    fprintf(stderr,\"       ./redis-server - (read config from stdin)\\n\");",
          "new_line_content": "void usage() {",
          "content_same": false
        },
        {
          "line": 1852,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "    /* Clients */",
          "content_same": false
        },
        {
          "line": 834,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    server.unixtime = time(NULL);",
          "new_line_content": "     * in objects at every object access, and accuracy is not needed.",
          "content_same": false
        },
        {
          "line": 1347,
          "old_api": "clusterInit",
          "new_api": null,
          "old_text": "clusterInit()",
          "new_text": null,
          "old_line_content": "    if (server.cluster_enabled) clusterInit();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1348,
          "old_api": "scriptingInit",
          "new_api": null,
          "old_text": "scriptingInit()",
          "new_text": null,
          "old_line_content": "    scriptingInit();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1859,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.slaves)",
          "new_text": null,
          "old_line_content": "            listLength(server.clients)-listLength(server.slaves),",
          "new_line_content": "            \"client_biggest_input_buf:%lu\\r\\n\"",
          "content_same": false
        },
        {
          "line": 1865,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"memory\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"memory\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1869,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "        bytesToHuman(hmem,zmalloc_used_memory());",
          "new_line_content": "        char peak_hmem[64];",
          "content_same": false
        },
        {
          "line": 1870,
          "old_api": "bytesToHuman",
          "new_api": null,
          "old_text": "bytesToHuman(peak_hmem,server.stat_peak_memory)",
          "new_text": null,
          "old_line_content": "        bytesToHuman(peak_hmem,server.stat_peak_memory);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2383,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(1024*16)",
          "new_text": null,
          "old_line_content": "    char *buf = zmalloc(1024*16);",
          "new_line_content": "void redisAsciiArt(void) {",
          "content_same": false
        },
        {
          "line": 850,
          "old_api": "updateLRUClock",
          "new_api": null,
          "old_text": "updateLRUClock()",
          "new_text": null,
          "old_line_content": "    updateLRUClock();",
          "new_line_content": "     * REDIS_LRU_CLOCK_RESOLUTION define.",
          "content_same": false
        },
        {
          "line": 2388,
          "old_api": "redisGitDirty",
          "new_api": null,
          "old_text": "redisGitDirty()",
          "new_text": null,
          "old_line_content": "        strtol(redisGitDirty(),NULL,10) > 0,",
          "new_line_content": "        REDIS_VERSION,",
          "content_same": false
        },
        {
          "line": 853,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "    if (zmalloc_used_memory() > server.stat_peak_memory)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 854,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "        server.stat_peak_memory = zmalloc_used_memory();",
          "new_line_content": "    /* Record the max memory used since the server was started. */",
          "content_same": false
        },
        {
          "line": 2392,
          "old_api": "getpid",
          "new_api": null,
          "old_text": "getpid()",
          "new_text": null,
          "old_line_content": "        (long) getpid()",
          "new_line_content": "        server.cluster_enabled ? \"cluster\" : \"stand alone\",",
          "content_same": false
        },
        {
          "line": 1882,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "            zmalloc_used_memory(),",
          "new_line_content": "            \"mem_fragmentation_ratio:%.2f\\r\\n\"",
          "content_same": false
        },
        {
          "line": 2395,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(buf)",
          "new_text": null,
          "old_line_content": "    zfree(buf);",
          "new_line_content": "    );",
          "content_same": false
        },
        {
          "line": 859,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(0)",
          "new_text": null,
          "old_line_content": "        if (prepareForShutdown(0) == REDIS_OK) exit(0);",
          "new_line_content": "     * not ok doing so inside the signal handler. */",
          "content_same": false
        },
        {
          "line": 860,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"SIGTERM received but errors trying to shut down the server, check the logs for more information\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"SIGTERM received but errors trying to shut down the server, check the logs for more information\");",
          "new_line_content": "    if (server.shutdown_asap) {",
          "content_same": false
        },
        {
          "line": 2399,
          "old_api": "REDIS_NOTUSED",
          "new_api": null,
          "old_text": "REDIS_NOTUSED(sig)",
          "new_text": null,
          "old_line_content": "    REDIS_NOTUSED(sig);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 864,
          "old_api": "run_with_period",
          "new_api": null,
          "old_text": "run_with_period(5000)",
          "new_text": null,
          "old_line_content": "    run_with_period(5000) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1375,
          "old_api": "redisPanic",
          "new_api": null,
          "old_text": "redisPanic(\"Unsupported command flag\")",
          "new_text": null,
          "old_line_content": "            default: redisPanic(\"Unsupported command flag\"); break;",
          "new_line_content": "            case 'R': c->flags |= REDIS_CMD_RANDOM; break;",
          "content_same": false
        },
        {
          "line": 1887,
          "old_api": "lua_gc",
          "new_api": null,
          "old_text": "lua_gc(server.lua,LUA_GCCOUNT,0)",
          "new_text": null,
          "old_line_content": "            ((long long)lua_gc(server.lua,LUA_GCCOUNT,0))*1024LL,",
          "new_line_content": "            server.stat_peak_memory,",
          "content_same": false
        },
        {
          "line": 1888,
          "old_api": "zmalloc_get_fragmentation_ratio",
          "new_api": null,
          "old_text": "zmalloc_get_fragmentation_ratio()",
          "new_text": null,
          "old_line_content": "            zmalloc_get_fragmentation_ratio(),",
          "new_line_content": "            peak_hmem,",
          "content_same": false
        },
        {
          "line": 868,
          "old_api": "dictSlots",
          "new_api": null,
          "old_text": "dictSlots(server.db[j].dict)",
          "new_text": null,
          "old_line_content": "            size = dictSlots(server.db[j].dict);",
          "new_line_content": "            long long size, used, vkeys;",
          "content_same": false
        },
        {
          "line": 869,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.db[j].dict)",
          "new_text": null,
          "old_line_content": "            used = dictSize(server.db[j].dict);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1380,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(c->name)",
          "new_text": null,
          "old_line_content": "        retval = dictAdd(server.commands, sdsnew(c->name), c);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1381,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(retval == DICT_OK)",
          "new_text": null,
          "old_line_content": "        assert(retval == DICT_OK);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1894,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"persistence\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"persistence\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1895,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "    /* Persistence */",
          "content_same": false
        },
        {
          "line": 2410,
          "old_api": "sigemptyset",
          "new_api": null,
          "old_text": "sigemptyset(&act.sa_mask)",
          "new_text": null,
          "old_line_content": "    sigemptyset(&act.sa_mask);",
          "new_line_content": "    /* When the SA_SIGINFO flag is set in sa_flags then sa_sigaction is used.",
          "content_same": false
        },
        {
          "line": 2413,
          "old_api": "sigaction",
          "new_api": null,
          "old_text": "sigaction(SIGTERM, &act, NULL)",
          "new_text": null,
          "old_line_content": "    sigaction(SIGTERM, &act, NULL);",
          "new_line_content": "    act.sa_flags = 0;",
          "content_same": false
        },
        {
          "line": 2416,
          "old_api": "sigemptyset",
          "new_api": null,
          "old_text": "sigemptyset(&act.sa_mask)",
          "new_text": null,
          "old_line_content": "    sigemptyset(&act.sa_mask);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2419,
          "old_api": "sigaction",
          "new_api": null,
          "old_text": "sigaction(SIGSEGV, &act, NULL)",
          "new_text": null,
          "old_line_content": "    sigaction(SIGSEGV, &act, NULL);",
          "new_line_content": "    act.sa_flags = SA_NODEFER | SA_RESETHAND | SA_SIGINFO;",
          "content_same": false
        },
        {
          "line": 2420,
          "old_api": "sigaction",
          "new_api": null,
          "old_text": "sigaction(SIGBUS, &act, NULL)",
          "new_text": null,
          "old_line_content": "    sigaction(SIGBUS, &act, NULL);",
          "new_line_content": "    act.sa_sigaction = sigsegvHandler;",
          "content_same": false
        },
        {
          "line": 885,
          "old_api": "tryResizeHashTables",
          "new_api": null,
          "old_text": "tryResizeHashTables()",
          "new_text": null,
          "old_line_content": "        tryResizeHashTables();",
          "new_line_content": "     * copied. */",
          "content_same": false
        },
        {
          "line": 886,
          "old_api": "incrementallyRehash",
          "new_api": null,
          "old_text": "incrementallyRehash()",
          "new_text": null,
          "old_line_content": "        if (server.activerehashing) incrementallyRehash();",
          "new_line_content": "    if (server.rdb_child_pid == -1 && server.aof_child_pid == -1) {",
          "content_same": false
        },
        {
          "line": 890,
          "old_api": "run_with_period",
          "new_api": null,
          "old_text": "run_with_period(5000)",
          "new_text": null,
          "old_line_content": "    run_with_period(5000) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 891,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_VERBOSE,\"%d clients connected (%d slaves), %zu bytes in use\",\n            listLength(server.clients)-listLength(server.slaves),\n            listLength(server.slaves),\n            zmalloc_used_memory())",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_VERBOSE,\"%d clients connected (%d slaves), %zu bytes in use\",",
          "new_line_content": "    /* Show information about connected clients */",
          "content_same": false
        },
        {
          "line": 1916,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                \"aof_current_size:%lld\\r\\n\"\n                \"aof_base_size:%lld\\r\\n\"\n                \"aof_pending_rewrite:%d\\r\\n\"\n                \"aof_buffer_length:%zu\\r\\n\"\n                \"aof_pending_bio_fsync:%llu\\r\\n\"\n                \"aof_delayed_fsync:%lu\\r\\n\",\n                (long long) server.aof_current_size,\n                (long long) server.aof_rewrite_base_size,\n                server.aof_rewrite_scheduled,\n                sdslen(server.aof_buf),\n                bioPendingJobsOfType(REDIS_BIO_AOF_FSYNC),\n                server.aof_delayed_fsync)",
          "new_text": null,
          "old_line_content": "            info = sdscatprintf(info,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1806,
          "old_api": "getrusage",
          "new_api": null,
          "old_text": "getrusage(RUSAGE_SELF, &self_ru)",
          "new_text": null,
          "old_line_content": "    getrusage(RUSAGE_SELF, &self_ru);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1409,
          "old_api": "zrealloc",
          "new_api": null,
          "old_text": "zrealloc(oa->ops,sizeof(redisOp)*(oa->numops+1))",
          "new_text": null,
          "old_line_content": "    oa->ops = zrealloc(oa->ops,sizeof(redisOp)*(oa->numops+1));",
          "new_line_content": "    redisOp *op;",
          "content_same": false
        },
        {
          "line": 2434,
          "old_api": "zmalloc_enable_thread_safeness",
          "new_api": null,
          "old_text": "zmalloc_enable_thread_safeness()",
          "new_text": null,
          "old_line_content": "    zmalloc_enable_thread_safeness();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2435,
          "old_api": "getpid",
          "new_api": null,
          "old_text": "getpid()",
          "new_text": null,
          "old_line_content": "    srand(time(NULL)^getpid());",
          "new_line_content": "    /* We need to initialize our libraries, and the server configuration. */",
          "content_same": false
        },
        {
          "line": 898,
          "old_api": "clientsCron",
          "new_api": null,
          "old_text": "clientsCron()",
          "new_text": null,
          "old_line_content": "    clientsCron();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1807,
          "old_api": "getrusage",
          "new_api": null,
          "old_text": "getrusage(RUSAGE_CHILDREN, &c_ru)",
          "new_text": null,
          "old_line_content": "    getrusage(RUSAGE_CHILDREN, &c_ru);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1926,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(server.aof_buf)",
          "new_text": null,
          "old_line_content": "                sdslen(server.aof_buf),",
          "new_line_content": "                (long long) server.aof_rewrite_base_size,",
          "content_same": false
        },
        {
          "line": 1927,
          "old_api": "bioPendingJobsOfType",
          "new_api": null,
          "old_text": "bioPendingJobsOfType(REDIS_BIO_AOF_FSYNC)",
          "new_text": null,
          "old_line_content": "                bioPendingJobsOfType(REDIS_BIO_AOF_FSYNC),",
          "new_line_content": "                server.aof_rewrite_scheduled,",
          "content_same": false
        },
        {
          "line": 905,
          "old_api": "rewriteAppendOnlyFileBackground",
          "new_api": null,
          "old_text": "rewriteAppendOnlyFileBackground()",
          "new_text": null,
          "old_line_content": "        rewriteAppendOnlyFileBackground();",
          "new_line_content": "        server.aof_rewrite_scheduled)",
          "content_same": false
        },
        {
          "line": 2442,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        sds options = sdsempty();",
          "new_line_content": "    if (argc >= 2) {",
          "content_same": false
        },
        {
          "line": 2446,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(argv[1], \"-v\")",
          "new_text": null,
          "old_line_content": "        if (strcmp(argv[1], \"-v\") == 0 ||",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2447,
          "old_api": "version",
          "new_api": null,
          "old_text": "version()",
          "new_text": null,
          "old_line_content": "            strcmp(argv[1], \"--version\") == 0) version();",
          "new_line_content": "        /* Handle special options --help and --version */",
          "content_same": false
        },
        {
          "line": 913,
          "old_api": "wait3",
          "new_api": null,
          "old_text": "wait3(&statloc,WNOHANG,NULL)",
          "new_text": null,
          "old_line_content": "        if ((pid = wait3(&statloc,WNOHANG,NULL)) != 0) {",
          "new_line_content": "        pid_t pid;",
          "content_same": false
        },
        {
          "line": 914,
          "old_api": "WEXITSTATUS",
          "new_api": null,
          "old_text": "WEXITSTATUS(statloc)",
          "new_text": null,
          "old_line_content": "            int exitcode = WEXITSTATUS(statloc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1428,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(op->argv[j])",
          "new_text": null,
          "old_line_content": "            decrRefCount(op->argv[j]);",
          "new_line_content": "        op = oa->ops+oa->numops;",
          "content_same": false
        },
        {
          "line": 2453,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(0)",
          "new_text": null,
          "old_line_content": "                exit(0);",
          "new_line_content": "            if (argc == 3) {",
          "content_same": false
        },
        {
          "line": 917,
          "old_api": "WTERMSIG",
          "new_api": null,
          "old_text": "WTERMSIG(statloc)",
          "new_text": null,
          "old_line_content": "            if (WIFSIGNALED(statloc)) bysignal = WTERMSIG(statloc);",
          "new_line_content": "            int bysignal = 0;",
          "content_same": false
        },
        {
          "line": 1429,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(op->argv)",
          "new_text": null,
          "old_line_content": "        zfree(op->argv);",
          "new_line_content": "        for (j = 0; j < op->argc; j++)",
          "content_same": false
        },
        {
          "line": 2456,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\"Example: ./redis-server --test-memory 4096\\n\\n\")",
          "new_text": null,
          "old_line_content": "                fprintf(stderr,\"Example: ./redis-server --test-memory 4096\\n\\n\");",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 920,
          "old_api": "backgroundSaveDoneHandler",
          "new_api": null,
          "old_text": "backgroundSaveDoneHandler(exitcode,bysignal)",
          "new_text": null,
          "old_line_content": "                backgroundSaveDoneHandler(exitcode,bysignal);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1948,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                \"loading_start_time:%ld\\r\\n\"\n                \"loading_total_bytes:%llu\\r\\n\"\n                \"loading_loaded_bytes:%llu\\r\\n\"\n                \"loading_loaded_perc:%.2f\\r\\n\"\n                \"loading_eta_seconds:%ld\\r\\n\"\n                ,(unsigned long) server.loading_start_time,\n                (unsigned long long) server.loading_total_bytes,\n                (unsigned long long) server.loading_loaded_bytes,\n                perc,\n                eta\n            )",
          "new_text": null,
          "old_line_content": "            info = sdscatprintf(info,",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1437,
          "old_api": "dictFetchValue",
          "new_api": null,
          "old_text": "dictFetchValue(server.commands, name)",
          "new_text": null,
          "old_line_content": "    return dictFetchValue(server.commands, name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1442,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(s)",
          "new_text": null,
          "old_line_content": "    sds name = sdsnew(s);",
          "new_line_content": "struct redisCommand *lookupCommandByCString(char *s) {",
          "content_same": false
        },
        {
          "line": 1445,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(name)",
          "new_text": null,
          "old_line_content": "    sdsfree(name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 934,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"%d changes in %d seconds. Saving...\",\n                    sp->changes, sp->seconds)",
          "new_text": null,
          "old_line_content": "                redisLog(REDIS_NOTICE,\"%d changes in %d seconds. Saving...\",",
          "new_line_content": "            if (server.dirty >= sp->changes &&",
          "content_same": false
        },
        {
          "line": 2471,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(options,\"\\n\")",
          "new_text": null,
          "old_line_content": "                if (sdslen(options)) options = sdscat(options,\"\\n\");",
          "new_line_content": "            if (argv[j][0] == '-' && argv[j][1] == '-') {",
          "content_same": false
        },
        {
          "line": 2472,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(options,argv[j]+2)",
          "new_text": null,
          "old_line_content": "                options = sdscat(options,argv[j]+2);",
          "new_line_content": "                /* Option name */",
          "content_same": false
        },
        {
          "line": 2476,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(argv[j])",
          "new_text": null,
          "old_line_content": "                options = sdscatrepr(options,argv[j],strlen(argv[j]));",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 2477,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(options,\" \")",
          "new_text": null,
          "old_line_content": "                options = sdscat(options,\" \");",
          "new_line_content": "                /* Option argument */",
          "content_same": false
        },
        {
          "line": 1964,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"stats\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"stats\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1965,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "    /* Stats */",
          "content_same": false
        },
        {
          "line": 2481,
          "old_api": "resetServerSaveParams",
          "new_api": null,
          "old_text": "resetServerSaveParams()",
          "new_text": null,
          "old_line_content": "        resetServerSaveParams();",
          "new_line_content": "            j++;",
          "content_same": false
        },
        {
          "line": 2482,
          "old_api": "loadServerConfig",
          "new_api": null,
          "old_text": "loadServerConfig(configfile,options)",
          "new_text": null,
          "old_line_content": "        loadServerConfig(configfile,options);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1461,
          "old_api": "feedAppendOnlyFile",
          "new_api": null,
          "old_text": "feedAppendOnlyFile(cmd,dbid,argv,argc)",
          "new_text": null,
          "old_line_content": "        feedAppendOnlyFile(cmd,dbid,argv,argc);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1462,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.slaves)",
          "new_text": null,
          "old_line_content": "    if (flags & REDIS_PROPAGATE_REPL && listLength(server.slaves))",
          "new_line_content": "    if (server.aof_state != REDIS_AOF_OFF && flags & REDIS_PROPAGATE_AOF)",
          "content_same": false
        },
        {
          "line": 951,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Starting automatic rewriting of AOF on %lld%% growth\",growth)",
          "new_text": null,
          "old_line_content": "                redisLog(REDIS_NOTICE,\"Starting automatic rewriting of AOF on %lld%% growth\",growth);",
          "new_line_content": "            long long growth = (server.aof_current_size*100/base) - 100;",
          "content_same": false
        },
        {
          "line": 2488,
          "old_api": "initServer",
          "new_api": null,
          "old_text": "initServer()",
          "new_text": null,
          "old_line_content": "    initServer();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 952,
          "old_api": "rewriteAppendOnlyFileBackground",
          "new_api": null,
          "old_text": "rewriteAppendOnlyFileBackground()",
          "new_text": null,
          "old_line_content": "                rewriteAppendOnlyFileBackground();",
          "new_line_content": "            if (growth >= server.aof_rewrite_perc) {",
          "content_same": false
        },
        {
          "line": 1981,
          "old_api": "getOperationsPerSecond",
          "new_api": null,
          "old_text": "getOperationsPerSecond()",
          "new_text": null,
          "old_line_content": "            getOperationsPerSecond(),",
          "new_line_content": "            server.stat_numconnections,",
          "content_same": false
        },
        {
          "line": 1471,
          "old_api": "redisOpArrayAppend",
          "new_api": null,
          "old_text": "redisOpArrayAppend(&server.also_propagate,cmd,dbid,argv,argc,target)",
          "new_text": null,
          "old_line_content": "    redisOpArrayAppend(&server.also_propagate,cmd,dbid,argv,argc,target);",
          "new_line_content": "                   int target)",
          "content_same": false
        },
        {
          "line": 960,
          "old_api": "flushAppendOnlyFile",
          "new_api": null,
          "old_text": "flushAppendOnlyFile(0)",
          "new_text": null,
          "old_line_content": "    if (server.aof_flush_postponed_start) flushAppendOnlyFile(0);",
          "new_line_content": "    /* If we postponed an AOF buffer flush, let's try to do it every time the",
          "content_same": false
        },
        {
          "line": 2498,
          "old_api": "ustime",
          "new_api": null,
          "old_text": "ustime()",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_NOTICE,\"DB loaded from append only file: %.3f seconds\",(float)(ustime()-start)/1000000);",
          "new_line_content": "    if (server.aof_state == REDIS_AOF_ON) {",
          "content_same": false
        },
        {
          "line": 1987,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.pubsub_channels)",
          "new_text": null,
          "old_line_content": "            dictSize(server.pubsub_channels),",
          "new_line_content": "            server.stat_keyspace_hits,",
          "content_same": false
        },
        {
          "line": 1476,
          "old_api": "ustime",
          "new_api": null,
          "old_text": "ustime()",
          "new_text": null,
          "old_line_content": "    long long dirty, start = ustime(), duration;",
          "new_line_content": "/* Call() is the core of Redis execution of a command */",
          "content_same": false
        },
        {
          "line": 2501,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"DB loaded from disk: %.3f seconds\",\n                (float)(ustime()-start)/1000000)",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_NOTICE,\"DB loaded from disk: %.3f seconds\",",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 965,
          "old_api": "activeExpireCycle",
          "new_api": null,
          "old_text": "activeExpireCycle()",
          "new_text": null,
          "old_line_content": "    if (server.masterhost == NULL) activeExpireCycle();",
          "new_line_content": "     * On slaves we wait for DEL operations synthesized by the master",
          "content_same": false
        },
        {
          "line": 1988,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.pubsub_patterns)",
          "new_text": null,
          "old_line_content": "            listLength(server.pubsub_patterns),",
          "new_line_content": "            server.stat_keyspace_misses,",
          "content_same": false
        },
        {
          "line": 968,
          "old_api": "freeClientsInAsyncFreeQueue",
          "new_api": null,
          "old_text": "freeClientsInAsyncFreeQueue()",
          "new_text": null,
          "old_line_content": "    freeClientsInAsyncFreeQueue();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2505,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "            exit(1);",
          "new_line_content": "        } else if (errno != ENOENT) {",
          "content_same": false
        },
        {
          "line": 1480,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.monitors)",
          "new_text": null,
          "old_line_content": "    if (listLength(server.monitors) && !server.loading)",
          "new_line_content": "    /* Sent the command to clients in MONITOR mode, only if the commands are",
          "content_same": false
        },
        {
          "line": 1481,
          "old_api": "replicationFeedMonitors",
          "new_api": null,
          "old_text": "replicationFeedMonitors(c,server.monitors,c->db->id,c->argv,c->argc)",
          "new_text": null,
          "old_line_content": "        replicationFeedMonitors(c,server.monitors,c->db->id,c->argv,c->argc);",
          "new_line_content": "     * not geneated from reading an AOF. */",
          "content_same": false
        },
        {
          "line": 972,
          "old_api": "replicationCron",
          "new_api": null,
          "old_text": "replicationCron()",
          "new_text": null,
          "old_line_content": "    run_with_period(1000) replicationCron();",
          "new_line_content": "    /* Replication cron function -- used to reconnect to master and",
          "content_same": false
        },
        {
          "line": 2509,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"The server is now ready to accept connections on port %d\", server.port)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_NOTICE,\"The server is now ready to accept connections on port %d\", server.port);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1484,
          "old_api": "redisOpArrayInit",
          "new_api": null,
          "old_text": "redisOpArrayInit(&server.also_propagate)",
          "new_text": null,
          "old_line_content": "    redisOpArrayInit(&server.also_propagate);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 975,
          "old_api": "run_with_period",
          "new_api": null,
          "old_text": "run_with_period(1000)",
          "new_text": null,
          "old_line_content": "    run_with_period(1000) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2512,
          "old_api": "aeSetBeforeSleepProc",
          "new_api": null,
          "old_text": "aeSetBeforeSleepProc(server.el,beforeSleep)",
          "new_text": null,
          "old_line_content": "    aeSetBeforeSleepProc(server.el,beforeSleep);",
          "new_line_content": "    if (server.sofd > 0)",
          "content_same": false
        },
        {
          "line": 976,
          "old_api": "clusterCron",
          "new_api": null,
          "old_text": "clusterCron()",
          "new_text": null,
          "old_line_content": "        if (server.cluster_enabled) clusterCron();",
          "new_line_content": "    /* Run other sub-systems specific cron jobs */",
          "content_same": false
        },
        {
          "line": 1993,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"replication\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"replication\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1994,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "    /* Replication */",
          "content_same": false
        },
        {
          "line": 2000,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                \"master_host:%s\\r\\n\"\n                \"master_port:%d\\r\\n\"\n                \"master_link_status:%s\\r\\n\"\n                \"master_last_io_seconds_ago:%d\\r\\n\"\n                \"master_sync_in_progress:%d\\r\\n\"\n                ,server.masterhost,\n                server.masterport,\n                (server.repl_state == REDIS_REPL_CONNECTED) ?\n                    \"up\" : \"down\",\n                server.master ?\n                ((int)(server.unixtime-server.master->lastinteraction)) : -1,\n                server.repl_state == REDIS_REPL_TRANSFER\n            )",
          "new_text": null,
          "old_line_content": "            info = sdscatprintf(info,",
          "new_line_content": "            server.masterhost == NULL ? \"master\" : \"slave\");",
          "content_same": false
        },
        {
          "line": 1498,
          "old_api": "slowlogPushEntryIfNeeded",
          "new_api": null,
          "old_text": "slowlogPushEntryIfNeeded(c->argv,c->argc,duration)",
          "new_text": null,
          "old_line_content": "        slowlogPushEntryIfNeeded(c->argv,c->argc,duration);",
          "new_line_content": "     * per-command statistics that we show in INFO commandstats. */",
          "content_same": false
        },
        {
          "line": 987,
          "old_api": "REDIS_NOTUSED",
          "new_api": null,
          "old_text": "REDIS_NOTUSED(eventLoop)",
          "new_text": null,
          "old_line_content": "    REDIS_NOTUSED(eventLoop);",
          "new_line_content": " * for ready file descriptors. */",
          "content_same": false
        },
        {
          "line": 992,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.unblocked_clients)",
          "new_text": null,
          "old_line_content": "    while (listLength(server.unblocked_clients)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 993,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(server.unblocked_clients)",
          "new_text": null,
          "old_line_content": "        ln = listFirst(server.unblocked_clients);",
          "new_line_content": "    /* Try to process pending commands for clients that were just unblocked. */",
          "content_same": false
        },
        {
          "line": 2016,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                    \"master_sync_left_bytes:%ld\\r\\n\"\n                    \"master_sync_last_io_seconds_ago:%d\\r\\n\"\n                    ,(long)server.repl_transfer_left,\n                    (int)(server.unixtime-server.repl_transfer_lastio)\n                )",
          "new_text": null,
          "old_line_content": "                info = sdscatprintf(info,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1000,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->querybuf)",
          "new_text": null,
          "old_line_content": "        if (c->querybuf && sdslen(c->querybuf) > 0) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1513,
          "old_api": "propagate",
          "new_api": null,
          "old_text": "propagate(c->cmd,c->db->id,c->argv,c->argc,flags)",
          "new_text": null,
          "old_line_content": "            propagate(c->cmd,c->db->id,c->argv,c->argc,flags);",
          "new_line_content": "            flags |= (REDIS_PROPAGATE_REPL | REDIS_PROPAGATE_AOF);",
          "content_same": false
        },
        {
          "line": 2025,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                    \"master_link_down_since_seconds:%ld\\r\\n\",\n                    (long)server.unixtime-server.repl_down_since)",
          "new_text": null,
          "old_line_content": "                info = sdscatprintf(info,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2030,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n            \"connected_slaves:%lu\\r\\n\",\n            listLength(server.slaves))",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1008,
          "old_api": "flushAppendOnlyFile",
          "new_api": null,
          "old_text": "flushAppendOnlyFile(0)",
          "new_text": null,
          "old_line_content": "    flushAppendOnlyFile(0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2033,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.slaves)",
          "new_text": null,
          "old_line_content": "        if (listLength(server.slaves)) {",
          "new_line_content": "            \"connected_slaves:%lu\\r\\n\",",
          "content_same": false
        },
        {
          "line": 1523,
          "old_api": "propagate",
          "new_api": null,
          "old_text": "propagate(rop->cmd, rop->dbid, rop->argv, rop->argc, rop->target)",
          "new_text": null,
          "old_line_content": "            propagate(rop->cmd, rop->dbid, rop->argv, rop->argc, rop->target);",
          "new_line_content": "        for (j = 0; j < server.also_propagate.numops; j++) {",
          "content_same": false
        },
        {
          "line": 2038,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(server.slaves,&li)",
          "new_text": null,
          "old_line_content": "            listRewind(server.slaves,&li);",
          "new_line_content": "            listIter li;",
          "content_same": false
        },
        {
          "line": 2039,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "            while((ln = listNext(&li))) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1016,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "    shared.crlf = createObject(REDIS_STRING,sdsnew(\"\\r\\n\"));",
          "new_line_content": "    int j;",
          "content_same": false
        },
        {
          "line": 1017,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"+OK\\r\\n\")",
          "new_text": null,
          "old_line_content": "    shared.ok = createObject(REDIS_STRING,sdsnew(\"+OK\\r\\n\"));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2045,
          "old_api": "anetPeerToString",
          "new_api": null,
          "old_text": "anetPeerToString(slave->fd,ip,&port)",
          "new_text": null,
          "old_line_content": "                if (anetPeerToString(slave->fd,ip,&port) == -1) continue;",
          "new_line_content": "                int port;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 109,
      "total_additions": 300,
      "total_deletions": 300,
      "total_api_changes": 709
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 6,
        "api_related_lines": 709,
        "non_api_lines": 6,
        "non_api_line_numbers": [
          641,
          681,
          683,
          657,
          658,
          630
        ]
      }
    },
    "api_calls_before": 619,
    "api_calls_after": 619,
    "diff_info": {
      "added_lines": 5,
      "removed_lines": 3,
      "total_diff_lines": 41
    }
  }
}
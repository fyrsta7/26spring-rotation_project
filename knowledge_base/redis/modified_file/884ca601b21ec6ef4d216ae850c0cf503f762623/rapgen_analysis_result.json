{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/884ca601b21ec6ef4d216ae850c0cf503f762623",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/884ca601b21ec6ef4d216ae850c0cf503f762623/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/884ca601b21ec6ef4d216ae850c0cf503f762623/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/884ca601b21ec6ef4d216ae850c0cf503f762623/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 567,
          "old_api": "addReply",
          "new_api": "lookupKeyWrite",
          "old_text": "addReply(c, shared.czero)",
          "new_text": "lookupKeyWrite(c->db,c->argv[j])",
          "old_line_content": "                addReply(c, shared.czero);",
          "new_line_content": "            if (lookupKeyWrite(c->db,c->argv[j]) != NULL) {",
          "content_same": false
        },
        {
          "line": 576,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "tryObjectEncoding",
          "old_text": "notifyKeyspaceEvent(NOTIFY_STRING,\"set\",c->argv[j],c->db->id)",
          "new_text": "tryObjectEncoding(c->argv[j+1])",
          "old_line_content": "        notifyKeyspaceEvent(NOTIFY_STRING,\"set\",c->argv[j],c->db->id);",
          "new_line_content": "        c->argv[j+1] = tryObjectEncoding(c->argv[j+1]);",
          "content_same": false
        },
        {
          "line": 596,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": "lookupKeyWrite",
          "old_text": "getLongLongFromObjectOrReply(c,o,&value,NULL)",
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "    if (getLongLongFromObjectOrReply(c,o,&value,NULL) != C_OK) return;",
          "new_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 617,
          "old_api": "dbAdd",
          "new_api": "dbReplaceValue",
          "old_text": "dbAdd(c->db,c->argv[1],new)",
          "new_text": "dbReplaceValue(c->db,c->argv[1],new)",
          "old_line_content": "            dbAdd(c->db,c->argv[1],new);",
          "new_line_content": "            dbReplaceValue(c->db,c->argv[1],new);",
          "content_same": false
        },
        {
          "line": 623,
          "old_api": "addReplyLongLong",
          "new_api": "notifyKeyspaceEvent",
          "old_text": "addReplyLongLong(c, value)",
          "new_text": "notifyKeyspaceEvent(NOTIFY_STRING,\"incrby\",c->argv[1],c->db->id)",
          "old_line_content": "    addReplyLongLong(c, value);",
          "new_line_content": "    notifyKeyspaceEvent(NOTIFY_STRING,\"incrby\",c->argv[1],c->db->id);",
          "content_same": false
        },
        {
          "line": 659,
          "old_api": "getLongDoubleFromObjectOrReply",
          "new_api": "lookupKeyWrite",
          "old_text": "getLongDoubleFromObjectOrReply(c,o,&value,NULL)",
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "    if (getLongDoubleFromObjectOrReply(c,o,&value,NULL) != C_OK ||",
          "new_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 660,
          "old_api": "getLongDoubleFromObjectOrReply",
          "new_api": "checkType",
          "old_text": "getLongDoubleFromObjectOrReply(c,c->argv[2],&incr,NULL)",
          "new_text": "checkType(c,o,OBJ_STRING)",
          "old_line_content": "        getLongDoubleFromObjectOrReply(c,c->argv[2],&incr,NULL) != C_OK)",
          "new_line_content": "    if (checkType(c,o,OBJ_STRING)) return;",
          "content_same": false
        },
        {
          "line": 672,
          "old_api": "dbAdd",
          "new_api": "dbReplaceValue",
          "old_text": "dbAdd(c->db,c->argv[1],new)",
          "new_text": "dbReplaceValue(c->db,c->argv[1],new)",
          "old_line_content": "        dbAdd(c->db,c->argv[1],new);",
          "new_line_content": "        dbReplaceValue(c->db,c->argv[1],new);",
          "content_same": false
        },
        {
          "line": 674,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "dbAdd",
          "old_text": "notifyKeyspaceEvent(NOTIFY_STRING,\"incrbyfloat\",c->argv[1],c->db->id)",
          "new_text": "dbAdd(c->db,c->argv[1],new)",
          "old_line_content": "    notifyKeyspaceEvent(NOTIFY_STRING,\"incrbyfloat\",c->argv[1],c->db->id);",
          "new_line_content": "        dbAdd(c->db,c->argv[1],new);",
          "content_same": false
        },
        {
          "line": 695,
          "old_api": "incrRefCount",
          "new_api": "tryObjectEncoding",
          "old_text": "incrRefCount(c->argv[2])",
          "new_text": "tryObjectEncoding(c->argv[2])",
          "old_line_content": "        incrRefCount(c->argv[2]);",
          "new_line_content": "        c->argv[2] = tryObjectEncoding(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 696,
          "old_api": "stringObjectLen",
          "new_api": "dbAdd",
          "old_text": "stringObjectLen(c->argv[2])",
          "new_text": "dbAdd(c->db,c->argv[1],c->argv[2])",
          "old_line_content": "        totlen = stringObjectLen(c->argv[2]);",
          "new_line_content": "        dbAdd(c->db,c->argv[1],c->argv[2]);",
          "content_same": false
        },
        {
          "line": 711,
          "old_api": "sdslen",
          "new_api": "dbUnshareStringValue",
          "old_text": "sdslen(o->ptr)",
          "new_text": "dbUnshareStringValue(c->db,c->argv[1],o)",
          "old_line_content": "        totlen = sdslen(o->ptr);",
          "new_line_content": "        o = dbUnshareStringValue(c->db,c->argv[1],o);",
          "content_same": false
        },
        {
          "line": 713,
          "old_api": "signalModifiedKey",
          "new_api": "sdslen",
          "old_text": "signalModifiedKey(c,c->db,c->argv[1])",
          "new_text": "sdslen(o->ptr)",
          "old_line_content": "    signalModifiedKey(c,c->db,c->argv[1]);",
          "new_line_content": "        totlen = sdslen(o->ptr);",
          "content_same": false
        },
        {
          "line": 716,
          "old_api": "addReplyLongLong",
          "new_api": "notifyKeyspaceEvent",
          "old_text": "addReplyLongLong(c,totlen)",
          "new_text": "notifyKeyspaceEvent(NOTIFY_STRING,\"append\",c->argv[1],c->db->id)",
          "old_line_content": "    addReplyLongLong(c,totlen);",
          "new_line_content": "    notifyKeyspaceEvent(NOTIFY_STRING,\"append\",c->argv[1],c->db->id);",
          "content_same": false
        },
        {
          "line": 723,
          "old_api": "stringObjectLen",
          "new_api": "lookupKeyReadOrReply",
          "old_text": "stringObjectLen(o)",
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "old_line_content": "    addReplyLongLong(c,stringObjectLen(o));",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "content_same": false
        },
        {
          "line": 855,
          "old_api": "addReplyDeferredLen",
          "new_api": "addReplyMapLen",
          "old_text": "addReplyDeferredLen(c)",
          "new_text": "addReplyMapLen(c,2)",
          "old_line_content": "        arraylenptr = addReplyDeferredLen(c);",
          "new_line_content": "        addReplyMapLen(c,2);",
          "content_same": false
        },
        {
          "line": 905,
          "old_api": "addReplyLongLong",
          "new_api": "addReplyArrayLen",
          "old_text": "addReplyLongLong(c,arange_start)",
          "new_text": "addReplyArrayLen(c,2+withmatchlen)",
          "old_line_content": "                    addReplyLongLong(c,arange_start);",
          "new_line_content": "                    addReplyArrayLen(c,2+withmatchlen);",
          "content_same": false
        },
        {
          "line": 906,
          "old_api": "addReplyLongLong",
          "new_api": "addReplyArrayLen",
          "old_text": "addReplyLongLong(c,arange_end)",
          "new_text": "addReplyArrayLen(c,2)",
          "old_line_content": "                    addReplyLongLong(c,arange_end);",
          "new_line_content": "                    addReplyArrayLen(c,2);",
          "content_same": false
        },
        {
          "line": 907,
          "old_api": "addReplyArrayLen",
          "new_api": "addReplyLongLong",
          "old_text": "addReplyArrayLen(c,2)",
          "new_text": "addReplyLongLong(c,arange_start)",
          "old_line_content": "                    addReplyArrayLen(c,2);",
          "new_line_content": "                    addReplyLongLong(c,arange_start);",
          "content_same": false
        },
        {
          "line": 909,
          "old_api": "addReplyLongLong",
          "new_api": "addReplyArrayLen",
          "old_text": "addReplyLongLong(c,brange_end)",
          "new_text": "addReplyArrayLen(c,2)",
          "old_line_content": "                    addReplyLongLong(c,brange_end);",
          "new_line_content": "                    addReplyArrayLen(c,2);",
          "content_same": false
        },
        {
          "line": 924,
          "old_api": "setDeferredArrayLen",
          "new_api": "addReplyBulkCString",
          "old_text": "setDeferredArrayLen(c,arraylenptr,arraylen)",
          "new_text": "addReplyBulkCString(c,\"len\")",
          "old_line_content": "        setDeferredArrayLen(c,arraylenptr,arraylen);",
          "new_line_content": "        addReplyBulkCString(c,\"len\");",
          "content_same": false
        },
        {
          "line": 926,
          "old_api": "LCS",
          "new_api": "setDeferredArrayLen",
          "old_text": "LCS(alen,blen)",
          "new_text": "setDeferredArrayLen(c,arraylenptr,arraylen)",
          "old_line_content": "        addReplyLongLong(c,LCS(alen,blen));",
          "new_line_content": "        setDeferredArrayLen(c,arraylenptr,arraylen);",
          "content_same": false
        },
        {
          "line": 928,
          "old_api": "addReplyBulkSds",
          "new_api": "LCS",
          "old_text": "addReplyBulkSds(c,result)",
          "new_text": "LCS(alen,blen)",
          "old_line_content": "        addReplyBulkSds(c,result);",
          "new_line_content": "        addReplyLongLong(c,LCS(alen,blen));",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 640,
          "old_api": null,
          "new_api": "incrDecrCommand",
          "old_text": null,
          "new_text": "incrDecrCommand(c,incr)",
          "old_line_content": "",
          "new_line_content": "    incrDecrCommand(c,incr);",
          "content_same": false
        },
        {
          "line": 770,
          "old_api": null,
          "new_api": "addReplyErrorObject",
          "old_text": null,
          "new_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyErrorObject(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 646,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL)",
          "old_line_content": "    if (incr == LLONG_MIN) {",
          "new_line_content": "    if (getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL) != C_OK) return;",
          "content_same": false
        },
        {
          "line": 892,
          "old_api": null,
          "new_api": "LCS",
          "old_text": null,
          "new_text": "LCS(i,j-1)",
          "old_line_content": "                i--;",
          "new_line_content": "            uint32_t lcs2 = LCS(i,j-1);",
          "content_same": false
        },
        {
          "line": 649,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, \"decrement would overflow\")",
          "old_line_content": "    }",
          "new_line_content": "        addReplyError(c, \"decrement would overflow\");",
          "content_same": false
        },
        {
          "line": 777,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\n            \"If you want both the length and indexes, please just use IDX.\")",
          "old_line_content": "        goto cleanup;",
          "new_line_content": "        addReplyError(c,",
          "content_same": false
        },
        {
          "line": 652,
          "old_api": null,
          "new_api": "incrDecrCommand",
          "old_text": null,
          "new_text": "incrDecrCommand(c,-incr)",
          "old_line_content": "",
          "new_line_content": "    incrDecrCommand(c,-incr);",
          "content_same": false
        },
        {
          "line": 783,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(b)",
          "old_line_content": "        goto cleanup;",
          "new_line_content": "    if (sdslen(a) >= UINT32_MAX-1 || sdslen(b) >= UINT32_MAX-1) {",
          "content_same": false
        },
        {
          "line": 784,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, \"String too long for LCS\")",
          "old_line_content": "    }",
          "new_line_content": "        addReplyError(c, \"String too long for LCS\");",
          "content_same": false
        },
        {
          "line": 911,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,brange_end)",
          "old_line_content": "                    arraylen++;",
          "new_line_content": "                    addReplyLongLong(c,brange_end);",
          "content_same": false
        },
        {
          "line": 912,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,match_len)",
          "old_line_content": "                }",
          "new_line_content": "                    if (withmatchlen) addReplyLongLong(c,match_len);",
          "content_same": false
        },
        {
          "line": 661,
          "old_api": null,
          "new_api": "getLongDoubleFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongDoubleFromObjectOrReply(c,o,&value,NULL)",
          "old_line_content": "        return;",
          "new_line_content": "    if (getLongDoubleFromObjectOrReply(c,o,&value,NULL) != C_OK ||",
          "content_same": false
        },
        {
          "line": 662,
          "old_api": null,
          "new_api": "getLongDoubleFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongDoubleFromObjectOrReply(c,c->argv[2],&incr,NULL)",
          "old_line_content": "",
          "new_line_content": "        getLongDoubleFromObjectOrReply(c,c->argv[2],&incr,NULL) != C_OK)",
          "content_same": false
        },
        {
          "line": 790,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(a)",
          "old_line_content": "",
          "new_line_content": "    uint32_t alen = sdslen(a);",
          "content_same": false
        },
        {
          "line": 791,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(b)",
          "old_line_content": "    /* Setup an uint32_t array to store at LCS[i,j] the length of the",
          "new_line_content": "    uint32_t blen = sdslen(b);",
          "content_same": false
        },
        {
          "line": 666,
          "old_api": null,
          "new_api": "isinf",
          "old_text": null,
          "new_text": "isinf(value)",
          "old_line_content": "        return;",
          "new_line_content": "    if (isnan(value) || isinf(value)) {",
          "content_same": false
        },
        {
          "line": 667,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"increment would produce NaN or Infinity\")",
          "old_line_content": "    }",
          "new_line_content": "        addReplyError(c,\"increment would produce NaN or Infinity\");",
          "content_same": false
        },
        {
          "line": 925,
          "old_api": null,
          "new_api": "LCS",
          "old_text": null,
          "new_text": "LCS(alen,blen)",
          "old_line_content": "    } else if (getlen) {",
          "new_line_content": "        addReplyLongLong(c,LCS(alen,blen));",
          "content_same": false
        },
        {
          "line": 930,
          "old_api": null,
          "new_api": "addReplyBulkSds",
          "old_text": null,
          "new_text": "addReplyBulkSds(c,result)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyBulkSds(c,result);",
          "content_same": false
        },
        {
          "line": 675,
          "old_api": null,
          "new_api": "signalModifiedKey",
          "old_text": null,
          "new_text": "signalModifiedKey(c,c->db,c->argv[1])",
          "old_line_content": "    server.dirty++;",
          "new_line_content": "    signalModifiedKey(c,c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 676,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_STRING,\"incrbyfloat\",c->argv[1],c->db->id)",
          "old_line_content": "    addReplyBulk(c,new);",
          "new_line_content": "    notifyKeyspaceEvent(NOTIFY_STRING,\"incrbyfloat\",c->argv[1],c->db->id);",
          "content_same": false
        },
        {
          "line": 804,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, \"Insufficient memory, transient memory for LCS exceeds proto-max-bulk-len\")",
          "old_line_content": "        }",
          "new_line_content": "            addReplyError(c, \"Insufficient memory, transient memory for LCS exceeds proto-max-bulk-len\");",
          "content_same": false
        },
        {
          "line": 807,
          "old_api": null,
          "new_api": "ztrymalloc",
          "old_text": null,
          "new_text": "ztrymalloc(lcsalloc)",
          "old_line_content": "    if (!lcs) {",
          "new_line_content": "        lcs = ztrymalloc(lcsalloc);",
          "content_same": false
        },
        {
          "line": 935,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(result)",
          "old_line_content": "",
          "new_line_content": "    sdsfree(result);",
          "content_same": false
        },
        {
          "line": 936,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(lcs)",
          "old_line_content": "cleanup:",
          "new_line_content": "    zfree(lcs);",
          "content_same": false
        },
        {
          "line": 810,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, \"Insufficient memory, failed allocating transient memory for LCS\")",
          "old_line_content": "    }",
          "new_line_content": "        addReplyError(c, \"Insufficient memory, failed allocating transient memory for LCS\");",
          "content_same": false
        },
        {
          "line": 939,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(obja)",
          "old_line_content": "    return;",
          "new_line_content": "    if (obja) decrRefCount(obja);",
          "content_same": false
        },
        {
          "line": 684,
          "old_api": null,
          "new_api": "rewriteClientCommandArgument",
          "old_text": null,
          "new_text": "rewriteClientCommandArgument(c,2,new)",
          "old_line_content": "}",
          "new_line_content": "    rewriteClientCommandArgument(c,2,new);",
          "content_same": false
        },
        {
          "line": 685,
          "old_api": null,
          "new_api": "rewriteClientCommandArgument",
          "old_text": null,
          "new_text": "rewriteClientCommandArgument(c,3,shared.keepttl)",
          "old_line_content": "",
          "new_line_content": "    rewriteClientCommandArgument(c,3,shared.keepttl);",
          "content_same": false
        },
        {
          "line": 940,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(objb)",
          "old_line_content": "}",
          "new_line_content": "    if (objb) decrRefCount(objb);",
          "content_same": false
        },
        {
          "line": 559,
          "old_api": null,
          "new_api": "addReplyErrorArity",
          "old_text": null,
          "new_text": "addReplyErrorArity(c)",
          "old_line_content": "        return;",
          "new_line_content": "        addReplyErrorArity(c);",
          "content_same": false
        },
        {
          "line": 692,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "        /* Create the key */",
          "new_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 820,
          "old_api": null,
          "new_api": "LCS",
          "old_text": null,
          "new_text": "LCS(i,j)",
          "old_line_content": "                /* The len LCS (and the LCS itself) of two",
          "new_line_content": "                LCS(i,j) = 0;",
          "content_same": false
        },
        {
          "line": 568,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.czero)",
          "old_line_content": "                return;",
          "new_line_content": "                addReply(c, shared.czero);",
          "content_same": false
        },
        {
          "line": 697,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(c->argv[2])",
          "old_line_content": "    } else {",
          "new_line_content": "        incrRefCount(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 698,
          "old_api": null,
          "new_api": "stringObjectLen",
          "old_text": null,
          "new_text": "stringObjectLen(c->argv[2])",
          "old_line_content": "        /* Key exists, check type */",
          "new_line_content": "        totlen = stringObjectLen(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 826,
          "old_api": null,
          "new_api": "LCS",
          "old_text": null,
          "new_text": "LCS(i-1,j-1)",
          "old_line_content": "                /* If the last character is different, take the longest",
          "new_line_content": "                LCS(i,j) = LCS(i-1,j-1)+1;",
          "content_same": false
        },
        {
          "line": 701,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,OBJ_STRING)",
          "old_line_content": "",
          "new_line_content": "        if (checkType(c,o,OBJ_STRING))",
          "content_same": false
        },
        {
          "line": 832,
          "old_api": null,
          "new_api": "LCS",
          "old_text": null,
          "new_text": "LCS(i,j-1)",
          "old_line_content": "            }",
          "new_line_content": "                uint32_t lcs2 = LCS(i,j-1);",
          "content_same": false
        },
        {
          "line": 577,
          "old_api": null,
          "new_api": "setKey",
          "old_text": null,
          "new_text": "setKey(c, c->db, c->argv[j], c->argv[j + 1], setkey_flags)",
          "old_line_content": "    }",
          "new_line_content": "        setKey(c, c->db, c->argv[j], c->argv[j + 1], setkey_flags);",
          "content_same": false
        },
        {
          "line": 578,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_STRING,\"set\",c->argv[j],c->db->id)",
          "old_line_content": "    server.dirty += (c->argc-1)/2;",
          "new_line_content": "        notifyKeyspaceEvent(NOTIFY_STRING,\"set\",c->argv[j],c->db->id);",
          "content_same": false
        },
        {
          "line": 706,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(append->ptr)",
          "old_line_content": "            return;",
          "new_line_content": "        totlen = stringObjectLen(o)+sdslen(append->ptr);",
          "content_same": false
        },
        {
          "line": 707,
          "old_api": null,
          "new_api": "checkStringLength",
          "old_text": null,
          "new_text": "checkStringLength(c,totlen)",
          "old_line_content": "",
          "new_line_content": "        if (checkStringLength(c,totlen) != C_OK)",
          "content_same": false
        },
        {
          "line": 581,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, nx ? shared.cone : shared.ok)",
          "old_line_content": "",
          "new_line_content": "    addReply(c, nx ? shared.cone : shared.ok);",
          "content_same": false
        },
        {
          "line": 833,
          "old_api": null,
          "new_api": "LCS",
          "old_text": null,
          "new_text": "LCS(i,j)",
          "old_line_content": "        }",
          "new_line_content": "                LCS(i,j) = lcs1 > lcs2 ? lcs1 : lcs2;",
          "content_same": false
        },
        {
          "line": 712,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(append->ptr)",
          "old_line_content": "    }",
          "new_line_content": "        o->ptr = sdscatlen(o->ptr,append->ptr,sdslen(append->ptr));",
          "content_same": false
        },
        {
          "line": 585,
          "old_api": null,
          "new_api": "msetGenericCommand",
          "old_text": null,
          "new_text": "msetGenericCommand(c,0)",
          "old_line_content": "",
          "new_line_content": "    msetGenericCommand(c,0);",
          "content_same": false
        },
        {
          "line": 840,
          "old_api": null,
          "new_api": "LCS",
          "old_text": null,
          "new_text": "LCS(alen,blen)",
          "old_line_content": "    void *arraylenptr = NULL; /* Deferred length of the array for IDX. */",
          "new_line_content": "    uint32_t idx = LCS(alen,blen);",
          "content_same": false
        },
        {
          "line": 715,
          "old_api": null,
          "new_api": "signalModifiedKey",
          "old_text": null,
          "new_text": "signalModifiedKey(c,c->db,c->argv[1])",
          "old_line_content": "    server.dirty++;",
          "new_line_content": "    signalModifiedKey(c,c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 589,
          "old_api": null,
          "new_api": "msetGenericCommand",
          "old_text": null,
          "new_text": "msetGenericCommand(c,1)",
          "old_line_content": "",
          "new_line_content": "    msetGenericCommand(c,1);",
          "content_same": false
        },
        {
          "line": 718,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,totlen)",
          "old_line_content": "",
          "new_line_content": "    addReplyLongLong(c,totlen);",
          "content_same": false
        },
        {
          "line": 850,
          "old_api": null,
          "new_api": "sdsnewlen",
          "old_text": null,
          "new_text": "sdsnewlen(SDS_NOINIT,idx)",
          "old_line_content": "    /* Start with a deferred array if we have to emit the ranges. */",
          "new_line_content": "    if (computelcs) result = sdsnewlen(SDS_NOINIT,idx);",
          "content_same": false
        },
        {
          "line": 724,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,OBJ_STRING)",
          "old_line_content": "}",
          "new_line_content": "        checkType(c,o,OBJ_STRING)) return;",
          "content_same": false
        },
        {
          "line": 597,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,OBJ_STRING)",
          "old_line_content": "",
          "new_line_content": "    if (checkType(c,o,OBJ_STRING)) return;",
          "content_same": false
        },
        {
          "line": 598,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c,o,&value,NULL)",
          "old_line_content": "    oldvalue = value;",
          "new_line_content": "    if (getLongLongFromObjectOrReply(c,o,&value,NULL) != C_OK) return;",
          "content_same": false
        },
        {
          "line": 725,
          "old_api": null,
          "new_api": "stringObjectLen",
          "old_text": null,
          "new_text": "stringObjectLen(o)",
          "old_line_content": "",
          "new_line_content": "    addReplyLongLong(c,stringObjectLen(o));",
          "content_same": false
        },
        {
          "line": 856,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c,\"matches\")",
          "old_line_content": "    }",
          "new_line_content": "        addReplyBulkCString(c,\"matches\");",
          "content_same": false
        },
        {
          "line": 857,
          "old_api": null,
          "new_api": "addReplyDeferredLen",
          "old_text": null,
          "new_text": "addReplyDeferredLen(c)",
          "old_line_content": "",
          "new_line_content": "        arraylenptr = addReplyDeferredLen(c);",
          "content_same": false
        },
        {
          "line": 603,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"increment or decrement would overflow\")",
          "old_line_content": "    }",
          "new_line_content": "        addReplyError(c,\"increment or decrement would overflow\");",
          "content_same": false
        },
        {
          "line": 736,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[1])",
          "old_line_content": "    if ((obja && obja->type != OBJ_STRING) ||",
          "new_line_content": "    obja = lookupKeyRead(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 737,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[2])",
          "old_line_content": "        (objb && objb->type != OBJ_STRING))",
          "new_line_content": "    objb = lookupKeyRead(c->db,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 741,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\n            \"The specified keys must contain string values\")",
          "old_line_content": "        /* Don't cleanup the objects, we need to do that",
          "new_line_content": "        addReplyError(c,",
          "content_same": false
        },
        {
          "line": 619,
          "old_api": null,
          "new_api": "dbAdd",
          "old_text": null,
          "new_text": "dbAdd(c->db,c->argv[1],new)",
          "old_line_content": "    }",
          "new_line_content": "            dbAdd(c->db,c->argv[1],new);",
          "content_same": false
        },
        {
          "line": 749,
          "old_api": null,
          "new_api": "createStringObject",
          "old_text": null,
          "new_text": "createStringObject(\"\",0)",
          "old_line_content": "    a = obja->ptr;",
          "new_line_content": "    obja = obja ? getDecodedObject(obja) : createStringObject(\"\",0);",
          "content_same": false
        },
        {
          "line": 622,
          "old_api": null,
          "new_api": "signalModifiedKey",
          "old_text": null,
          "new_text": "signalModifiedKey(c,c->db,c->argv[1])",
          "old_line_content": "    server.dirty++;",
          "new_line_content": "    signalModifiedKey(c,c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 750,
          "old_api": null,
          "new_api": "createStringObject",
          "old_text": null,
          "new_text": "createStringObject(\"\",0)",
          "old_line_content": "    b = objb->ptr;",
          "new_line_content": "    objb = objb ? getDecodedObject(objb) : createStringObject(\"\",0);",
          "content_same": false
        },
        {
          "line": 625,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c, value)",
          "old_line_content": "",
          "new_line_content": "    addReplyLongLong(c, value);",
          "content_same": false
        },
        {
          "line": 629,
          "old_api": null,
          "new_api": "incrDecrCommand",
          "old_text": null,
          "new_text": "incrDecrCommand(c,1)",
          "old_line_content": "",
          "new_line_content": "    incrDecrCommand(c,1);",
          "content_same": false
        },
        {
          "line": 633,
          "old_api": null,
          "new_api": "incrDecrCommand",
          "old_text": null,
          "new_text": "incrDecrCommand(c,-1)",
          "old_line_content": "",
          "new_line_content": "    incrDecrCommand(c,-1);",
          "content_same": false
        },
        {
          "line": 891,
          "old_api": null,
          "new_api": "LCS",
          "old_text": null,
          "new_text": "LCS(i-1,j)",
          "old_line_content": "            if (lcs1 > lcs2)",
          "new_line_content": "            uint32_t lcs1 = LCS(i-1,j);",
          "content_same": false
        },
        {
          "line": 764,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt,\"MINMATCHLEN\")",
          "old_line_content": "                != C_OK) goto cleanup;",
          "new_line_content": "        } else if (!strcasecmp(opt,\"MINMATCHLEN\") && moreargs) {",
          "content_same": false
        },
        {
          "line": 765,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c,c->argv[j+1],&minmatchlen,NULL)",
          "old_line_content": "            if (minmatchlen < 0) minmatchlen = 0;",
          "new_line_content": "            if (getLongLongFromObjectOrReply(c,c->argv[j+1],&minmatchlen,NULL)",
          "content_same": false
        },
        {
          "line": 639,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL)",
          "old_line_content": "}",
          "new_line_content": "    if (getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL) != C_OK) return;",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 768,
          "old_api": "addReplyErrorObject",
          "new_api": null,
          "old_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "            addReplyErrorObject(c,shared.syntaxerr);",
          "new_line_content": "            j++;",
          "content_same": false
        },
        {
          "line": 644,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL)",
          "new_text": null,
          "old_line_content": "    if (getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL) != C_OK) return;",
          "new_line_content": "    long long incr;",
          "content_same": false
        },
        {
          "line": 647,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c, \"decrement would overflow\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c, \"decrement would overflow\");",
          "new_line_content": "    /* Overflow check: negating LLONG_MIN will cause an overflow */",
          "content_same": false
        },
        {
          "line": 775,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\n            \"If you want both the length and indexes, please just use IDX.\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,",
          "new_line_content": "    /* Complain if the user passed ambiguous parameters. */",
          "content_same": false
        },
        {
          "line": 903,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c,2+withmatchlen)",
          "new_text": null,
          "old_line_content": "                    addReplyArrayLen(c,2+withmatchlen);",
          "new_line_content": "            if (minmatchlen == 0 || match_len >= minmatchlen) {",
          "content_same": false
        },
        {
          "line": 650,
          "old_api": "incrDecrCommand",
          "new_api": null,
          "old_text": "incrDecrCommand(c,-incr)",
          "new_text": null,
          "old_line_content": "    incrDecrCommand(c,-incr);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 904,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c,2)",
          "new_text": null,
          "old_line_content": "                    addReplyArrayLen(c,2);",
          "new_line_content": "                if (arraylenptr) {",
          "content_same": false
        },
        {
          "line": 781,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(b)",
          "new_text": null,
          "old_line_content": "    if (sdslen(a) >= UINT32_MAX-1 || sdslen(b) >= UINT32_MAX-1) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 782,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c, \"String too long for LCS\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c, \"String too long for LCS\");",
          "new_line_content": "    /* Detect string truncation or later overflows. */",
          "content_same": false
        },
        {
          "line": 657,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "    robj *o, *new;",
          "content_same": false
        },
        {
          "line": 658,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,OBJ_STRING)",
          "new_text": null,
          "old_line_content": "    if (checkType(c,o,OBJ_STRING)) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 788,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(a)",
          "new_text": null,
          "old_line_content": "    uint32_t alen = sdslen(a);",
          "new_line_content": "    /* Compute the LCS using the vanilla dynamic programming technique of",
          "content_same": false
        },
        {
          "line": 789,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(b)",
          "new_text": null,
          "old_line_content": "    uint32_t blen = sdslen(b);",
          "new_line_content": "     * building a table of LCS(x,y) substrings. */",
          "content_same": false
        },
        {
          "line": 664,
          "old_api": "isinf",
          "new_api": null,
          "old_text": "isinf(value)",
          "new_text": null,
          "old_line_content": "    if (isnan(value) || isinf(value)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 665,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"increment would produce NaN or Infinity\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,\"increment would produce NaN or Infinity\");",
          "new_line_content": "    value += incr;",
          "content_same": false
        },
        {
          "line": 922,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,\"len\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c,\"len\");",
          "new_line_content": "    /* Reply depending on the given options. */",
          "content_same": false
        },
        {
          "line": 923,
          "old_api": "LCS",
          "new_api": null,
          "old_text": "LCS(alen,blen)",
          "new_text": null,
          "old_line_content": "        addReplyLongLong(c,LCS(alen,blen));",
          "new_line_content": "    if (arraylenptr) {",
          "content_same": false
        },
        {
          "line": 670,
          "old_api": "dbReplaceValue",
          "new_api": null,
          "old_text": "dbReplaceValue(c->db,c->argv[1],new)",
          "new_text": null,
          "old_line_content": "        dbReplaceValue(c->db,c->argv[1],new);",
          "new_line_content": "    new = createStringObjectFromLongDouble(value,1);",
          "content_same": false
        },
        {
          "line": 673,
          "old_api": "signalModifiedKey",
          "new_api": null,
          "old_text": "signalModifiedKey(c,c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    signalModifiedKey(c,c->db,c->argv[1]);",
          "new_line_content": "    else",
          "content_same": false
        },
        {
          "line": 802,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c, \"Insufficient memory, transient memory for LCS exceeds proto-max-bulk-len\")",
          "new_text": null,
          "old_line_content": "            addReplyError(c, \"Insufficient memory, transient memory for LCS exceeds proto-max-bulk-len\");",
          "new_line_content": "    if (lcsalloc < SIZE_MAX && lcsalloc / lcssize == sizeof(uint32_t)) {",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": "ztrymalloc",
          "new_api": null,
          "old_text": "ztrymalloc(lcsalloc)",
          "new_text": null,
          "old_line_content": "        lcs = ztrymalloc(lcsalloc);",
          "new_line_content": "            goto cleanup;",
          "content_same": false
        },
        {
          "line": 933,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(result)",
          "new_text": null,
          "old_line_content": "    sdsfree(result);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 934,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(lcs)",
          "new_text": null,
          "old_line_content": "    zfree(lcs);",
          "new_line_content": "    /* Cleanup. */",
          "content_same": false
        },
        {
          "line": 808,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c, \"Insufficient memory, failed allocating transient memory for LCS\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c, \"Insufficient memory, failed allocating transient memory for LCS\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 681,
          "old_api": "rewriteClientCommandArgument",
          "new_api": null,
          "old_text": "rewriteClientCommandArgument(c,0,shared.set)",
          "new_text": null,
          "old_line_content": "    rewriteClientCommandArgument(c,0,shared.set);",
          "new_line_content": "     * in order to make sure that differences in float precision or formatting",
          "content_same": false
        },
        {
          "line": 682,
          "old_api": "rewriteClientCommandArgument",
          "new_api": null,
          "old_text": "rewriteClientCommandArgument(c,2,new)",
          "new_text": null,
          "old_line_content": "    rewriteClientCommandArgument(c,2,new);",
          "new_line_content": "     * will not create differences in replicas or after an AOF restart. */",
          "content_same": false
        },
        {
          "line": 937,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(obja)",
          "new_text": null,
          "old_line_content": "    if (obja) decrRefCount(obja);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 938,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(objb)",
          "new_text": null,
          "old_line_content": "    if (objb) decrRefCount(objb);",
          "new_line_content": "cleanup:",
          "content_same": false
        },
        {
          "line": 558,
          "old_api": "addReplyErrorArity",
          "new_api": null,
          "old_text": "addReplyErrorArity(c)",
          "new_text": null,
          "old_line_content": "        addReplyErrorArity(c);",
          "new_line_content": "    if ((c->argc % 2) == 0) {",
          "content_same": false
        },
        {
          "line": 690,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "    robj *o, *append;",
          "content_same": false
        },
        {
          "line": 818,
          "old_api": "LCS",
          "new_api": null,
          "old_text": "LCS(i,j)",
          "new_text": null,
          "old_line_content": "                LCS(i,j) = 0;",
          "new_line_content": "                /* If one substring has length of zero, the",
          "content_same": false
        },
        {
          "line": 693,
          "old_api": "tryObjectEncoding",
          "new_api": null,
          "old_text": "tryObjectEncoding(c->argv[2])",
          "new_text": null,
          "old_line_content": "        c->argv[2] = tryObjectEncoding(c->argv[2]);",
          "new_line_content": "    if (o == NULL) {",
          "content_same": false
        },
        {
          "line": 566,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[j])",
          "new_text": null,
          "old_line_content": "            if (lookupKeyWrite(c->db,c->argv[j]) != NULL) {",
          "new_line_content": "        for (j = 1; j < c->argc; j += 2) {",
          "content_same": false
        },
        {
          "line": 694,
          "old_api": "dbAdd",
          "new_api": null,
          "old_text": "dbAdd(c->db,c->argv[1],c->argv[2])",
          "new_text": null,
          "old_line_content": "        dbAdd(c->db,c->argv[1],c->argv[2]);",
          "new_line_content": "        /* Create the key */",
          "content_same": false
        },
        {
          "line": 824,
          "old_api": "LCS",
          "new_api": null,
          "old_text": "LCS(i-1,j-1)",
          "new_text": null,
          "old_line_content": "                LCS(i,j) = LCS(i-1,j-1)+1;",
          "new_line_content": "                 * LCS of the two sequences without the last char",
          "content_same": false
        },
        {
          "line": 699,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,OBJ_STRING)",
          "new_text": null,
          "old_line_content": "        if (checkType(c,o,OBJ_STRING))",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 829,
          "old_api": "LCS",
          "new_api": null,
          "old_text": "LCS(i-1,j)",
          "new_text": null,
          "old_line_content": "                uint32_t lcs1 = LCS(i-1,j);",
          "new_line_content": "                 * between the LCS of the first string and the second",
          "content_same": false
        },
        {
          "line": 574,
          "old_api": "tryObjectEncoding",
          "new_api": null,
          "old_text": "tryObjectEncoding(c->argv[j+1])",
          "new_text": null,
          "old_line_content": "        c->argv[j+1] = tryObjectEncoding(c->argv[j+1]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 575,
          "old_api": "setKey",
          "new_api": null,
          "old_text": "setKey(c,c->db,c->argv[j],c->argv[j+1],0)",
          "new_text": null,
          "old_line_content": "        setKey(c,c->db,c->argv[j],c->argv[j+1],0);",
          "new_line_content": "    for (j = 1; j < c->argc; j += 2) {",
          "content_same": false
        },
        {
          "line": 704,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(append->ptr)",
          "new_text": null,
          "old_line_content": "        totlen = stringObjectLen(o)+sdslen(append->ptr);",
          "new_line_content": "        /* \"append\" is an argument, so always an sds */",
          "content_same": false
        },
        {
          "line": 705,
          "old_api": "checkStringLength",
          "new_api": null,
          "old_text": "checkStringLength(c,totlen)",
          "new_text": null,
          "old_line_content": "        if (checkStringLength(c,totlen) != C_OK)",
          "new_line_content": "        append = c->argv[2];",
          "content_same": false
        },
        {
          "line": 830,
          "old_api": "LCS",
          "new_api": null,
          "old_text": "LCS(i,j-1)",
          "new_text": null,
          "old_line_content": "                uint32_t lcs2 = LCS(i,j-1);",
          "new_line_content": "                 * minus the last char, and the reverse. */",
          "content_same": false
        },
        {
          "line": 579,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, nx ? shared.cone : shared.ok)",
          "new_text": null,
          "old_line_content": "    addReply(c, nx ? shared.cone : shared.ok);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 709,
          "old_api": "dbUnshareStringValue",
          "new_api": null,
          "old_text": "dbUnshareStringValue(c->db,c->argv[1],o)",
          "new_text": null,
          "old_line_content": "        o = dbUnshareStringValue(c->db,c->argv[1],o);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 710,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(append->ptr)",
          "new_text": null,
          "old_line_content": "        o->ptr = sdscatlen(o->ptr,append->ptr,sdslen(append->ptr));",
          "new_line_content": "        /* Append the value */",
          "content_same": false
        },
        {
          "line": 583,
          "old_api": "msetGenericCommand",
          "new_api": null,
          "old_text": "msetGenericCommand(c,0)",
          "new_text": null,
          "old_line_content": "    msetGenericCommand(c,0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 838,
          "old_api": "LCS",
          "new_api": null,
          "old_text": "LCS(alen,blen)",
          "new_text": null,
          "old_line_content": "    uint32_t idx = LCS(alen,blen);",
          "new_line_content": "    /* Store the actual LCS string in \"result\" if needed. We create",
          "content_same": false
        },
        {
          "line": 714,
          "old_api": "notifyKeyspaceEvent",
          "new_api": null,
          "old_text": "notifyKeyspaceEvent(NOTIFY_STRING,\"append\",c->argv[1],c->db->id)",
          "new_text": null,
          "old_line_content": "    notifyKeyspaceEvent(NOTIFY_STRING,\"append\",c->argv[1],c->db->id);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 587,
          "old_api": "msetGenericCommand",
          "new_api": null,
          "old_text": "msetGenericCommand(c,1)",
          "new_text": null,
          "old_line_content": "    msetGenericCommand(c,1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 848,
          "old_api": "sdsnewlen",
          "new_api": null,
          "old_text": "sdsnewlen(SDS_NOINIT,idx)",
          "new_text": null,
          "old_line_content": "    if (computelcs) result = sdsnewlen(SDS_NOINIT,idx);",
          "new_line_content": "    /* Do we need to compute the actual LCS string? Allocate it in that case. */",
          "content_same": false
        },
        {
          "line": 721,
          "old_api": "lookupKeyReadOrReply",
          "new_api": null,
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "new_line_content": "void strlenCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 594,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "    robj *o, *new;",
          "content_same": false
        },
        {
          "line": 595,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,OBJ_STRING)",
          "new_text": null,
          "old_line_content": "    if (checkType(c,o,OBJ_STRING)) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 722,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,OBJ_STRING)",
          "new_text": null,
          "old_line_content": "        checkType(c,o,OBJ_STRING)) return;",
          "new_line_content": "    robj *o;",
          "content_same": false
        },
        {
          "line": 853,
          "old_api": "addReplyMapLen",
          "new_api": null,
          "old_text": "addReplyMapLen(c,2)",
          "new_text": null,
          "old_line_content": "        addReplyMapLen(c,2);",
          "new_line_content": "    uint32_t arraylen = 0;  /* Number of ranges emitted in the array. */",
          "content_same": false
        },
        {
          "line": 854,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,\"matches\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c,\"matches\");",
          "new_line_content": "    if (getidx) {",
          "content_same": false
        },
        {
          "line": 601,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"increment or decrement would overflow\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,\"increment or decrement would overflow\");",
          "new_line_content": "    if ((incr < 0 && oldvalue < 0 && incr < (LLONG_MIN-oldvalue)) ||",
          "content_same": false
        },
        {
          "line": 734,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    obja = lookupKeyRead(c->db,c->argv[1]);",
          "new_line_content": "    robj *obja = NULL, *objb = NULL;",
          "content_same": false
        },
        {
          "line": 735,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[2])",
          "new_text": null,
          "old_line_content": "    objb = lookupKeyRead(c->db,c->argv[2]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 739,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\n            \"The specified keys must contain string values\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,",
          "new_line_content": "        (objb && objb->type != OBJ_STRING))",
          "content_same": false
        },
        {
          "line": 615,
          "old_api": "dbReplaceValue",
          "new_api": null,
          "old_text": "dbReplaceValue(c->db,c->argv[1],new)",
          "new_text": null,
          "old_line_content": "            dbReplaceValue(c->db,c->argv[1],new);",
          "new_line_content": "        new = createStringObjectFromLongLongForValue(value);",
          "content_same": false
        },
        {
          "line": 747,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject(\"\",0)",
          "new_text": null,
          "old_line_content": "    obja = obja ? getDecodedObject(obja) : createStringObject(\"\",0);",
          "new_line_content": "        goto cleanup;",
          "content_same": false
        },
        {
          "line": 620,
          "old_api": "signalModifiedKey",
          "new_api": null,
          "old_text": "signalModifiedKey(c,c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    signalModifiedKey(c,c->db,c->argv[1]);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 621,
          "old_api": "notifyKeyspaceEvent",
          "new_api": null,
          "old_text": "notifyKeyspaceEvent(NOTIFY_STRING,\"incrby\",c->argv[1],c->db->id)",
          "new_text": null,
          "old_line_content": "    notifyKeyspaceEvent(NOTIFY_STRING,\"incrby\",c->argv[1],c->db->id);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 748,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject(\"\",0)",
          "new_text": null,
          "old_line_content": "    objb = objb ? getDecodedObject(objb) : createStringObject(\"\",0);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 627,
          "old_api": "incrDecrCommand",
          "new_api": null,
          "old_text": "incrDecrCommand(c,1)",
          "new_text": null,
          "old_line_content": "    incrDecrCommand(c,1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 756,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"IDX\")",
          "new_text": null,
          "old_line_content": "        if (!strcasecmp(opt,\"IDX\")) {",
          "new_line_content": "        int moreargs = (c->argc-1) - j;",
          "content_same": false
        },
        {
          "line": 631,
          "old_api": "incrDecrCommand",
          "new_api": null,
          "old_text": "incrDecrCommand(c,-1)",
          "new_text": null,
          "old_line_content": "    incrDecrCommand(c,-1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 889,
          "old_api": "LCS",
          "new_api": null,
          "old_text": "LCS(i-1,j)",
          "new_text": null,
          "old_line_content": "            uint32_t lcs1 = LCS(i-1,j);",
          "new_line_content": "            /* Otherwise reduce i and j depending on the largest",
          "content_same": false
        },
        {
          "line": 890,
          "old_api": "LCS",
          "new_api": null,
          "old_text": "LCS(i,j-1)",
          "new_text": null,
          "old_line_content": "            uint32_t lcs2 = LCS(i,j-1);",
          "new_line_content": "             * LCS between, to understand what direction we need to go. */",
          "content_same": false
        },
        {
          "line": 763,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c,c->argv[j+1],&minmatchlen,NULL)",
          "new_text": null,
          "old_line_content": "            if (getLongLongFromObjectOrReply(c,c->argv[j+1],&minmatchlen,NULL)",
          "new_line_content": "            withmatchlen = 1;",
          "content_same": false
        },
        {
          "line": 637,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL)",
          "new_text": null,
          "old_line_content": "    if (getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL) != C_OK) return;",
          "new_line_content": "    long long incr;",
          "content_same": false
        },
        {
          "line": 638,
          "old_api": "incrDecrCommand",
          "new_api": null,
          "old_text": "incrDecrCommand(c,incr)",
          "new_text": null,
          "old_line_content": "    incrDecrCommand(c,incr);",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 23,
      "total_additions": 73,
      "total_deletions": 73,
      "total_api_changes": 169
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 4,
        "api_related_lines": 169,
        "non_api_lines": 2,
        "non_api_line_numbers": [
          556,
          572
        ]
      }
    },
    "api_calls_before": 223,
    "api_calls_after": 223,
    "diff_info": {
      "added_lines": 3,
      "removed_lines": 1,
      "total_diff_lines": 27
    }
  }
}
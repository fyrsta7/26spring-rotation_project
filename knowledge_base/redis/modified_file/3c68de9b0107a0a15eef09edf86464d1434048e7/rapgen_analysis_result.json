{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/3c68de9b0107a0a15eef09edf86464d1434048e7",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/3c68de9b0107a0a15eef09edf86464d1434048e7/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/3c68de9b0107a0a15eef09edf86464d1434048e7/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/3c68de9b0107a0a15eef09edf86464d1434048e7/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 3347,
          "old_api": "dictAdd",
          "new_api": "tryObjectEncoding",
          "old_text": "dictAdd((dict*)o->ptr,ele,NULL)",
          "new_text": "tryObjectEncoding(ele)",
          "old_line_content": "                dictAdd((dict*)o->ptr,ele,NULL);",
          "new_line_content": "            tryObjectEncoding(ele);",
          "content_same": false
        },
        {
          "line": 3365,
          "old_api": "rdbLoadDoubleValue",
          "new_api": "zmalloc",
          "old_text": "rdbLoadDoubleValue(fp,score)",
          "new_text": "zmalloc(sizeof(double))",
          "old_line_content": "            if (rdbLoadDoubleValue(fp,score) == -1) return NULL;",
          "new_line_content": "            double *score = zmalloc(sizeof(double));",
          "content_same": false
        },
        {
          "line": 3367,
          "old_api": "zslInsert",
          "new_api": "rdbLoadStringObject",
          "old_text": "zslInsert(zs->zsl,*score,ele)",
          "new_text": "rdbLoadStringObject(fp)",
          "old_line_content": "            zslInsert(zs->zsl,*score,ele);",
          "new_line_content": "            if ((ele = rdbLoadStringObject(fp)) == NULL) return NULL;",
          "content_same": false
        },
        {
          "line": 3368,
          "old_api": "incrRefCount",
          "new_api": "tryObjectEncoding",
          "old_text": "incrRefCount(ele)",
          "new_text": "tryObjectEncoding(ele)",
          "old_line_content": "            incrRefCount(ele); /* added to skiplist */",
          "new_line_content": "            tryObjectEncoding(ele);",
          "content_same": false
        },
        {
          "line": 3371,
          "old_api": "redisAssert",
          "new_api": "zslInsert",
          "old_text": "redisAssert(0 != 0)",
          "new_text": "zslInsert(zs->zsl,*score,ele)",
          "old_line_content": "        redisAssert(0 != 0);",
          "new_line_content": "            zslInsert(zs->zsl,*score,ele);",
          "content_same": false
        },
        {
          "line": 3391,
          "old_api": "memcmp",
          "new_api": "fopen",
          "old_text": "memcmp(buf,\"REDIS\",5)",
          "new_text": "fopen(filename,\"r\")",
          "old_line_content": "    if (memcmp(buf,\"REDIS\",5) != 0) {",
          "new_line_content": "    fp = fopen(filename,\"r\");",
          "content_same": false
        },
        {
          "line": 3393,
          "old_api": "redisLog",
          "new_api": "fread",
          "old_text": "redisLog(REDIS_WARNING,\"Wrong signature trying to load DB from file\")",
          "new_text": "fread(buf,9,1,fp)",
          "old_line_content": "        redisLog(REDIS_WARNING,\"Wrong signature trying to load DB from file\");",
          "new_line_content": "    if (fread(buf,9,1,fp) == 0) goto eoferr;",
          "content_same": false
        },
        {
          "line": 3396,
          "old_api": "atoi",
          "new_api": "fclose",
          "old_text": "atoi(buf+5)",
          "new_text": "fclose(fp)",
          "old_line_content": "    rdbver = atoi(buf+5);",
          "new_line_content": "        fclose(fp);",
          "content_same": false
        },
        {
          "line": 3419,
          "old_api": "exit",
          "new_api": "rdbLoadLen",
          "old_text": "exit(1)",
          "new_text": "rdbLoadLen(fp,NULL)",
          "old_line_content": "                exit(1);",
          "new_line_content": "            if ((dbid = rdbLoadLen(fp,NULL)) == REDIS_RDB_LENERR)",
          "content_same": false
        },
        {
          "line": 3430,
          "old_api": "dictAdd",
          "new_api": "rdbLoadStringObject",
          "old_text": "dictAdd(d,keyobj,o)",
          "new_text": "rdbLoadStringObject(fp)",
          "old_line_content": "        retval = dictAdd(d,keyobj,o);",
          "new_line_content": "        if ((keyobj = rdbLoadStringObject(fp)) == NULL) goto eoferr;",
          "content_same": false
        },
        {
          "line": 3432,
          "old_api": "redisLog",
          "new_api": "rdbLoadObject",
          "old_text": "redisLog(REDIS_WARNING,\"Loading DB, duplicated key (%s) found! Unrecoverable error, exiting now.\", keyobj->ptr)",
          "new_text": "rdbLoadObject(type,fp)",
          "old_line_content": "            redisLog(REDIS_WARNING,\"Loading DB, duplicated key (%s) found! Unrecoverable error, exiting now.\", keyobj->ptr);",
          "new_line_content": "        if ((o = rdbLoadObject(type,fp)) == NULL) goto eoferr;",
          "content_same": false
        },
        {
          "line": 3437,
          "old_api": "setExpire",
          "new_api": "exit",
          "old_text": "setExpire(db,keyobj,expiretime)",
          "new_text": "exit(1)",
          "old_line_content": "            setExpire(db,keyobj,expiretime);",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 3451,
          "old_api": "fclose",
          "new_api": "vmSwapOneObjectBlocking",
          "old_text": "fclose(fp)",
          "new_text": "vmSwapOneObjectBlocking()",
          "old_line_content": "    fclose(fp);",
          "new_line_content": "                if (vmSwapOneObjectBlocking() == REDIS_ERR) break;",
          "content_same": false
        },
        {
          "line": 3455,
          "old_api": "decrRefCount",
          "new_api": "fclose",
          "old_text": "decrRefCount(keyobj)",
          "new_text": "fclose(fp)",
          "old_line_content": "    if (keyobj) decrRefCount(keyobj);",
          "new_line_content": "    fclose(fp);",
          "content_same": false
        },
        {
          "line": 3478,
          "old_api": "addReplyBulkLen",
          "new_api": "addReply",
          "old_text": "addReplyBulkLen(c,c->argv[1])",
          "new_text": "addReply(c,shared.pong)",
          "old_line_content": "    addReplyBulkLen(c,c->argv[1]);",
          "new_line_content": "    addReply(c,shared.pong);",
          "content_same": false
        },
        {
          "line": 3501,
          "old_api": "addReply",
          "new_api": "incrRefCount",
          "old_text": "addReply(c,shared.czero)",
          "new_text": "incrRefCount(c->argv[1])",
          "old_line_content": "            addReply(c,shared.czero);",
          "new_line_content": "                incrRefCount(c->argv[1]);",
          "content_same": false
        },
        {
          "line": 3505,
          "old_api": "incrRefCount",
          "new_api": "addReply",
          "old_text": "incrRefCount(c->argv[1])",
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "        incrRefCount(c->argv[1]);",
          "new_line_content": "            addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 3509,
          "old_api": "removeExpire",
          "new_api": "incrRefCount",
          "old_text": "removeExpire(c->db,c->argv[1])",
          "new_text": "incrRefCount(c->argv[1])",
          "old_line_content": "    removeExpire(c->db,c->argv[1]);",
          "new_line_content": "        incrRefCount(c->argv[1]);",
          "content_same": false
        },
        {
          "line": 3510,
          "old_api": "addReply",
          "new_api": "incrRefCount",
          "old_text": "addReply(c, nx ? shared.cone : shared.ok)",
          "new_text": "incrRefCount(c->argv[2])",
          "old_line_content": "    addReply(c, nx ? shared.cone : shared.ok);",
          "new_line_content": "        incrRefCount(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 3514,
          "old_api": "setGenericCommand",
          "new_api": "addReply",
          "old_text": "setGenericCommand(c,0)",
          "new_text": "addReply(c, nx ? shared.cone : shared.ok)",
          "old_line_content": "    setGenericCommand(c,0);",
          "new_line_content": "    addReply(c, nx ? shared.cone : shared.ok);",
          "content_same": false
        },
        {
          "line": 3522,
          "old_api": "lookupKeyRead",
          "new_api": "setGenericCommand",
          "old_text": "lookupKeyRead(c->db,c->argv[1])",
          "new_text": "setGenericCommand(c,1)",
          "old_line_content": "    robj *o = lookupKeyRead(c->db,c->argv[1]);",
          "new_line_content": "    setGenericCommand(c,1);",
          "content_same": false
        },
        {
          "line": 3549,
          "old_api": "incrRefCount",
          "new_api": "getGenericCommand",
          "old_text": "incrRefCount(c->argv[1])",
          "new_text": "getGenericCommand(c)",
          "old_line_content": "        incrRefCount(c->argv[1]);",
          "new_line_content": "    if (getGenericCommand(c) == REDIS_ERR) return;",
          "content_same": false
        },
        {
          "line": 3551,
          "old_api": "incrRefCount",
          "new_api": "dictReplace",
          "old_text": "incrRefCount(c->argv[2])",
          "new_text": "dictReplace(c->db->dict,c->argv[1],c->argv[2])",
          "old_line_content": "    incrRefCount(c->argv[2]);",
          "new_line_content": "        dictReplace(c->db->dict,c->argv[1],c->argv[2]);",
          "content_same": false
        },
        {
          "line": 3553,
          "old_api": "removeExpire",
          "new_api": "incrRefCount",
          "old_text": "removeExpire(c->db,c->argv[1])",
          "new_text": "incrRefCount(c->argv[1])",
          "old_line_content": "    removeExpire(c->db,c->argv[1]);",
          "new_line_content": "        incrRefCount(c->argv[1]);",
          "content_same": false
        },
        {
          "line": 3563,
          "old_api": "addReply",
          "new_api": "sdsempty",
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": "sdsempty()",
          "old_line_content": "            addReply(c,shared.nullbulk);",
          "new_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",c->argc-1));",
          "content_same": false
        },
        {
          "line": 3604,
          "old_api": "incrRefCount",
          "new_api": "tryObjectEncoding",
          "old_text": "incrRefCount(c->argv[j+1])",
          "new_text": "tryObjectEncoding(c->argv[j+1])",
          "old_line_content": "            incrRefCount(c->argv[j+1]);",
          "new_line_content": "        tryObjectEncoding(c->argv[j+1]);",
          "content_same": false
        },
        {
          "line": 3607,
          "old_api": "incrRefCount",
          "new_api": "dictReplace",
          "old_text": "incrRefCount(c->argv[j+1])",
          "new_text": "dictReplace(c->db->dict,c->argv[j],c->argv[j+1])",
          "old_line_content": "            incrRefCount(c->argv[j+1]);",
          "new_line_content": "            dictReplace(c->db->dict,c->argv[j],c->argv[j+1]);",
          "content_same": false
        },
        {
          "line": 3616,
          "old_api": "msetGenericCommand",
          "new_api": "addReply",
          "old_text": "msetGenericCommand(c,0)",
          "new_text": "addReply(c, nx ? shared.cone : shared.ok)",
          "old_line_content": "    msetGenericCommand(c,0);",
          "new_line_content": "    addReply(c, nx ? shared.cone : shared.ok);",
          "content_same": false
        },
        {
          "line": 3642,
          "old_api": "redisAssert",
          "new_api": "strtoll",
          "old_text": "redisAssert(1 != 1)",
          "new_text": "strtoll(o->ptr, &eptr, 10)",
          "old_line_content": "                redisAssert(1 != 1);",
          "new_line_content": "                value = strtoll(o->ptr, &eptr, 10);",
          "content_same": false
        },
        {
          "line": 3651,
          "old_api": "dictReplace",
          "new_api": "sdsempty",
          "old_text": "dictReplace(c->db->dict,c->argv[1],o)",
          "new_text": "sdsempty()",
          "old_line_content": "        dictReplace(c->db->dict,c->argv[1],o);",
          "new_line_content": "    o = createObject(REDIS_STRING,sdscatprintf(sdsempty(),\"%lld\",value));",
          "content_same": false
        },
        {
          "line": 3652,
          "old_api": "removeExpire",
          "new_api": "tryObjectEncoding",
          "old_text": "removeExpire(c->db,c->argv[1])",
          "new_text": "tryObjectEncoding(o)",
          "old_line_content": "        removeExpire(c->db,c->argv[1]);",
          "new_line_content": "    tryObjectEncoding(o);",
          "content_same": false
        },
        {
          "line": 3658,
          "old_api": "addReply",
          "new_api": "incrRefCount",
          "old_text": "addReply(c,o)",
          "new_text": "incrRefCount(c->argv[1])",
          "old_line_content": "    addReply(c,o);",
          "new_line_content": "        incrRefCount(c->argv[1]);",
          "content_same": false
        },
        {
          "line": 3663,
          "old_api": "incrDecrCommand",
          "new_api": "addReply",
          "old_text": "incrDecrCommand(c,1)",
          "new_text": "addReply(c,shared.crlf)",
          "old_line_content": "    incrDecrCommand(c,1);",
          "new_line_content": "    addReply(c,shared.crlf);",
          "content_same": false
        },
        {
          "line": 3671,
          "old_api": "strtoll",
          "new_api": "incrDecrCommand",
          "old_text": "strtoll(c->argv[2]->ptr, NULL, 10)",
          "new_text": "incrDecrCommand(c,-1)",
          "old_line_content": "    long long incr = strtoll(c->argv[2]->ptr, NULL, 10);",
          "new_line_content": "    incrDecrCommand(c,-1);",
          "content_same": false
        },
        {
          "line": 3676,
          "old_api": "strtoll",
          "new_api": "incrDecrCommand",
          "old_text": "strtoll(c->argv[2]->ptr, NULL, 10)",
          "new_text": "incrDecrCommand(c,incr)",
          "old_line_content": "    long long incr = strtoll(c->argv[2]->ptr, NULL, 10);",
          "new_line_content": "    incrDecrCommand(c,incr);",
          "content_same": false
        },
        {
          "line": 3709,
          "old_api": "atoi",
          "new_api": "lookupKeyRead",
          "old_text": "atoi(c->argv[1]->ptr)",
          "new_text": "lookupKeyRead(c->db,c->argv[1])",
          "old_line_content": "    int id = atoi(c->argv[1]->ptr);",
          "new_line_content": "    addReply(c,lookupKeyRead(c->db,c->argv[1]) ? shared.cone : shared.czero);",
          "content_same": false
        },
        {
          "line": 3726,
          "old_api": "addReply",
          "new_api": "dictGetRandomKey",
          "old_text": "addReply(c,shared.plus)",
          "new_text": "dictGetRandomKey(c->db->dict)",
          "old_line_content": "        addReply(c,shared.plus);",
          "new_line_content": "        de = dictGetRandomKey(c->db->dict);",
          "content_same": false
        },
        {
          "line": 3727,
          "old_api": "addReply",
          "new_api": "dictGetEntryKey",
          "old_text": "addReply(c,shared.crlf)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "        addReply(c,shared.crlf);",
          "new_line_content": "        if (!de || expireIfNeeded(c->db,dictGetEntryKey(de)) == 0) break;",
          "content_same": false
        },
        {
          "line": 3730,
          "old_api": "dictGetEntryKey",
          "new_api": "addReply",
          "old_text": "dictGetEntryKey(de)",
          "new_text": "addReply(c,shared.plus)",
          "old_line_content": "        addReply(c,dictGetEntryKey(de));",
          "new_line_content": "        addReply(c,shared.plus);",
          "content_same": false
        },
        {
          "line": 3743,
          "old_api": "dictGetIterator",
          "new_api": "sdslen",
          "old_text": "dictGetIterator(c->db->dict)",
          "new_text": "sdslen(pattern)",
          "old_line_content": "    di = dictGetIterator(c->db->dict);",
          "new_line_content": "    int plen = sdslen(pattern);",
          "content_same": false
        },
        {
          "line": 3745,
          "old_api": "decrRefCount",
          "new_api": "createObject",
          "old_text": "decrRefCount(lenobj)",
          "new_text": "createObject(REDIS_STRING,NULL)",
          "old_line_content": "    decrRefCount(lenobj);",
          "new_line_content": "    robj *lenobj = createObject(REDIS_STRING,NULL);",
          "content_same": false
        },
        {
          "line": 3747,
          "old_api": "dictGetEntryKey",
          "new_api": "dictGetIterator",
          "old_text": "dictGetEntryKey(de)",
          "new_text": "dictGetIterator(c->db->dict)",
          "old_line_content": "        robj *keyobj = dictGetEntryKey(de);",
          "new_line_content": "    di = dictGetIterator(c->db->dict);",
          "content_same": false
        },
        {
          "line": 3751,
          "old_api": "sdslen",
          "new_api": "dictGetEntryKey",
          "old_text": "sdslen(key)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "            stringmatchlen(pattern,plen,key,sdslen(key),0)) {",
          "new_line_content": "        robj *keyobj = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 3755,
          "old_api": "addReply",
          "new_api": "sdslen",
          "old_text": "addReply(c,keyobj)",
          "new_text": "sdslen(key)",
          "old_line_content": "                addReply(c,keyobj);",
          "new_line_content": "            stringmatchlen(pattern,plen,key,sdslen(key),0)) {",
          "content_same": false
        },
        {
          "line": 3761,
          "old_api": "dictReleaseIterator",
          "new_api": "sdslen",
          "old_text": "dictReleaseIterator(di)",
          "new_text": "sdslen(key)",
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "                keyslen += sdslen(key);",
          "content_same": false
        },
        {
          "line": 3767,
          "old_api": "addReplySds",
          "new_api": "addReply",
          "old_text": "addReplySds(c,\n        sdscatprintf(sdsempty(),\":%lu\\r\\n\",dictSize(c->db->dict)))",
          "new_text": "addReply(c,shared.crlf)",
          "old_line_content": "    addReplySds(c,",
          "new_line_content": "    addReply(c,shared.crlf);",
          "content_same": false
        },
        {
          "line": 3772,
          "old_api": "addReplySds",
          "new_api": "dictSize",
          "old_text": "addReplySds(c,\n        sdscatprintf(sdsempty(),\":%lu\\r\\n\",server.lastsave))",
          "new_text": "dictSize(c->db->dict)",
          "old_line_content": "    addReplySds(c,",
          "new_line_content": "        sdscatprintf(sdsempty(),\":%lu\\r\\n\",dictSize(c->db->dict)));",
          "content_same": false
        },
        {
          "line": 3802,
          "old_api": "addReply",
          "new_api": "sdsnew",
          "old_text": "addReply(c,shared.ok)",
          "new_text": "sdsnew(\"-ERR background save in progress\\r\\n\")",
          "old_line_content": "        addReply(c,shared.ok);",
          "new_line_content": "        addReplySds(c,sdsnew(\"-ERR background save in progress\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 3817,
          "old_api": "addReply",
          "new_api": "rdbSaveBackground",
          "old_text": "addReply(c,shared.err)",
          "new_text": "rdbSaveBackground(server.dbfilename)",
          "old_line_content": "        addReply(c,shared.err);",
          "new_line_content": "    if (rdbSaveBackground(server.dbfilename) == REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 3833,
          "old_api": "fsync",
          "new_api": "rdbRemoveTempFile",
          "old_text": "fsync(server.appendfd)",
          "new_text": "rdbRemoveTempFile(server.bgsavechildpid)",
          "old_line_content": "        fsync(server.appendfd);",
          "new_line_content": "        rdbRemoveTempFile(server.bgsavechildpid);",
          "content_same": false
        },
        {
          "line": 3838,
          "old_api": "rdbSave",
          "new_api": "unlink",
          "old_text": "rdbSave(server.dbfilename)",
          "new_text": "unlink(server.vm_swap_file)",
          "old_line_content": "        if (rdbSave(server.dbfilename) == REDIS_OK) {",
          "new_line_content": "        if (server.vm_enabled) unlink(server.vm_swap_file);",
          "content_same": false
        },
        {
          "line": 3842,
          "old_api": "redisLog",
          "new_api": "rdbSave",
          "old_text": "redisLog(REDIS_WARNING,\"Server exit now, bye bye...\")",
          "new_text": "rdbSave(server.dbfilename)",
          "old_line_content": "            redisLog(REDIS_WARNING,\"Server exit now, bye bye...\");",
          "new_line_content": "        if (rdbSave(server.dbfilename) == REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 3844,
          "old_api": "exit",
          "new_api": "unlink",
          "old_text": "exit(0)",
          "new_text": "unlink(server.pidfile)",
          "old_line_content": "            exit(0);",
          "new_line_content": "                unlink(server.pidfile);",
          "content_same": false
        },
        {
          "line": 3865,
          "old_api": "lookupKeyWrite",
          "new_api": "addReply",
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": "addReply(c,shared.sameobjecterr)",
          "old_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "        addReply(c,shared.sameobjecterr);",
          "content_same": false
        },
        {
          "line": 3871,
          "old_api": "deleteIfVolatile",
          "new_api": "addReply",
          "old_text": "deleteIfVolatile(c->db,c->argv[2])",
          "new_text": "addReply(c,shared.nokeyerr)",
          "old_line_content": "    deleteIfVolatile(c->db,c->argv[2]);",
          "new_line_content": "        addReply(c,shared.nokeyerr);",
          "content_same": false
        },
        {
          "line": 3874,
          "old_api": "decrRefCount",
          "new_api": "incrRefCount",
          "old_text": "decrRefCount(o)",
          "new_text": "incrRefCount(o)",
          "old_line_content": "            decrRefCount(o);",
          "new_line_content": "    incrRefCount(o);",
          "content_same": false
        },
        {
          "line": 3875,
          "old_api": "addReply",
          "new_api": "deleteIfVolatile",
          "old_text": "addReply(c,shared.czero)",
          "new_text": "deleteIfVolatile(c->db,c->argv[2])",
          "old_line_content": "            addReply(c,shared.czero);",
          "new_line_content": "    deleteIfVolatile(c->db,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 3878,
          "old_api": "dictReplace",
          "new_api": "decrRefCount",
          "old_text": "dictReplace(c->db->dict,c->argv[2],o)",
          "new_text": "decrRefCount(o)",
          "old_line_content": "        dictReplace(c->db->dict,c->argv[2],o);",
          "new_line_content": "            decrRefCount(o);",
          "content_same": false
        },
        {
          "line": 3882,
          "old_api": "deleteKey",
          "new_api": "dictReplace",
          "old_text": "deleteKey(c->db,c->argv[1])",
          "new_text": "dictReplace(c->db->dict,c->argv[2],o)",
          "old_line_content": "    deleteKey(c->db,c->argv[1]);",
          "new_line_content": "        dictReplace(c->db->dict,c->argv[2],o);",
          "content_same": false
        },
        {
          "line": 3884,
          "old_api": "addReply",
          "new_api": "incrRefCount",
          "old_text": "addReply(c,nx ? shared.cone : shared.ok)",
          "new_text": "incrRefCount(c->argv[2])",
          "old_line_content": "    addReply(c,nx ? shared.cone : shared.ok);",
          "new_line_content": "        incrRefCount(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 3888,
          "old_api": "renameGenericCommand",
          "new_api": "addReply",
          "old_text": "renameGenericCommand(c,0)",
          "new_text": "addReply(c,nx ? shared.cone : shared.ok)",
          "old_line_content": "    renameGenericCommand(c,0);",
          "new_line_content": "    addReply(c,nx ? shared.cone : shared.ok);",
          "content_same": false
        },
        {
          "line": 3908,
          "old_api": "selectDb",
          "new_api": "addReply",
          "old_text": "selectDb(c,srcid)",
          "new_text": "addReply(c,shared.outofrangeerr)",
          "old_line_content": "    selectDb(c,srcid); /* Back to the source DB */",
          "new_line_content": "        addReply(c,shared.outofrangeerr);",
          "content_same": false
        },
        {
          "line": 3930,
          "old_api": "incrRefCount",
          "new_api": "dictAdd",
          "old_text": "incrRefCount(c->argv[1])",
          "new_text": "dictAdd(dst->dict,c->argv[1],o)",
          "old_line_content": "    incrRefCount(c->argv[1]);",
          "new_line_content": "    if (dictAdd(dst->dict,c->argv[1],o) == DICT_ERR) {",
          "content_same": false
        },
        {
          "line": 3931,
          "old_api": "incrRefCount",
          "new_api": "addReply",
          "old_text": "incrRefCount(o)",
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "    incrRefCount(o);",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 3934,
          "old_api": "deleteKey",
          "new_api": "incrRefCount",
          "old_text": "deleteKey(src,c->argv[1])",
          "new_text": "incrRefCount(c->argv[1])",
          "old_line_content": "    deleteKey(src,c->argv[1]);",
          "new_line_content": "    incrRefCount(c->argv[1]);",
          "content_same": false
        },
        {
          "line": 3950,
          "old_api": "createListObject",
          "new_api": "handleClientsWaitingListPush",
          "old_text": "createListObject()",
          "new_text": "handleClientsWaitingListPush(c,c->argv[1],c->argv[2])",
          "old_line_content": "        lobj = createListObject();",
          "new_line_content": "        if (handleClientsWaitingListPush(c,c->argv[1],c->argv[2])) {",
          "content_same": false
        },
        {
          "line": 3957,
          "old_api": "dictAdd",
          "new_api": "listAddNodeHead",
          "old_text": "dictAdd(c->db->dict,c->argv[1],lobj)",
          "new_text": "listAddNodeHead(list,c->argv[2])",
          "old_line_content": "        dictAdd(c->db->dict,c->argv[1],lobj);",
          "new_line_content": "            listAddNodeHead(list,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 3959,
          "old_api": "incrRefCount",
          "new_api": "listAddNodeTail",
          "old_text": "incrRefCount(c->argv[2])",
          "new_text": "listAddNodeTail(list,c->argv[2])",
          "old_line_content": "        incrRefCount(c->argv[2]);",
          "new_line_content": "            listAddNodeTail(list,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 3962,
          "old_api": "addReply",
          "new_api": "incrRefCount",
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": "incrRefCount(c->argv[1])",
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "        incrRefCount(c->argv[1]);",
          "content_same": false
        },
        {
          "line": 3975,
          "old_api": "incrRefCount",
          "new_api": "listAddNodeHead",
          "old_text": "incrRefCount(c->argv[2])",
          "new_text": "listAddNodeHead(list,c->argv[2])",
          "old_line_content": "        incrRefCount(c->argv[2]);",
          "new_line_content": "            listAddNodeHead(list,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 3982,
          "old_api": "pushGenericCommand",
          "new_api": "addReply",
          "old_text": "pushGenericCommand(c,REDIS_HEAD)",
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "    pushGenericCommand(c,REDIS_HEAD);",
          "new_line_content": "    addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 4013,
          "old_api": "addReply",
          "new_api": "atoi",
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": "atoi(c->argv[2]->ptr)",
          "old_line_content": "        addReply(c,shared.nullbulk);",
          "new_line_content": "    int index = atoi(c->argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 4025,
          "old_api": "listNodeValue",
          "new_api": "listIndex",
          "old_text": "listNodeValue(ln)",
          "new_text": "listIndex(list, index)",
          "old_line_content": "                robj *ele = listNodeValue(ln);",
          "new_line_content": "            ln = listIndex(list, index);",
          "content_same": false
        },
        {
          "line": 4040,
          "old_api": "addReply",
          "new_api": "atoi",
          "old_text": "addReply(c,shared.nokeyerr)",
          "new_text": "atoi(c->argv[2]->ptr)",
          "old_line_content": "        addReply(c,shared.nokeyerr);",
          "new_line_content": "    int index = atoi(c->argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 4052,
          "old_api": "listNodeValue",
          "new_api": "listIndex",
          "old_text": "listNodeValue(ln)",
          "new_text": "listIndex(list, index)",
          "old_line_content": "                robj *ele = listNodeValue(ln);",
          "new_line_content": "            ln = listIndex(list, index);",
          "content_same": false
        },
        {
          "line": 4054,
          "old_api": "decrRefCount",
          "new_api": "addReply",
          "old_text": "decrRefCount(ele)",
          "new_text": "addReply(c,shared.outofrangeerr)",
          "old_line_content": "                decrRefCount(ele);",
          "new_line_content": "                addReply(c,shared.outofrangeerr);",
          "content_same": false
        },
        {
          "line": 4056,
          "old_api": "incrRefCount",
          "new_api": "listNodeValue",
          "old_text": "incrRefCount(c->argv[3])",
          "new_text": "listNodeValue(ln)",
          "old_line_content": "                incrRefCount(c->argv[3]);",
          "new_line_content": "                robj *ele = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 4089,
          "old_api": "listDelNode",
          "new_api": "listNodeValue",
          "old_text": "listDelNode(list,ln)",
          "new_text": "listNodeValue(ln)",
          "old_line_content": "                listDelNode(list,ln);",
          "new_line_content": "                robj *ele = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 4111,
          "old_api": "addReply",
          "new_api": "atoi",
          "old_text": "addReply(c,shared.nullmultibulk)",
          "new_text": "atoi(c->argv[3]->ptr)",
          "old_line_content": "        addReply(c,shared.nullmultibulk);",
          "new_line_content": "    int end = atoi(c->argv[3]->ptr);",
          "content_same": false
        },
        {
          "line": 4118,
          "old_api": "listLength",
          "new_api": "addReply",
          "old_text": "listLength(list)",
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "            int llen = listLength(list);",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 4142,
          "old_api": "addReplyBulkLen",
          "new_api": "listIndex",
          "old_text": "addReplyBulkLen(c,ele)",
          "new_text": "listIndex(list, start)",
          "old_line_content": "                addReplyBulkLen(c,ele);",
          "new_line_content": "            ln = listIndex(list, start);",
          "content_same": false
        },
        {
          "line": 4143,
          "old_api": "addReply",
          "new_api": "sdsempty",
          "old_text": "addReply(c,ele)",
          "new_text": "sdsempty()",
          "old_line_content": "                addReply(c,ele);",
          "new_line_content": "            addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",rangelen));",
          "content_same": false
        },
        {
          "line": 4158,
          "old_api": "addReply",
          "new_api": "atoi",
          "old_text": "addReply(c,shared.ok)",
          "new_text": "atoi(c->argv[3]->ptr)",
          "old_line_content": "        addReply(c,shared.ok);",
          "new_line_content": "    int end = atoi(c->argv[3]->ptr);",
          "content_same": false
        },
        {
          "line": 4165,
          "old_api": "listLength",
          "new_api": "addReply",
          "old_text": "listLength(list)",
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "            int llen = listLength(list);",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 4191,
          "old_api": "listLast",
          "new_api": "listFirst",
          "old_text": "listLast(list)",
          "new_text": "listFirst(list)",
          "old_line_content": "                ln = listLast(list);",
          "new_line_content": "                ln = listFirst(list);",
          "content_same": false
        },
        {
          "line": 4195,
          "old_api": "addReply",
          "new_api": "listLast",
          "old_text": "addReply(c,shared.ok)",
          "new_text": "listLast(list)",
          "old_line_content": "            addReply(c,shared.ok);",
          "new_line_content": "                ln = listLast(list);",
          "content_same": false
        },
        {
          "line": 4212,
          "old_api": "atoi",
          "new_api": "addReply",
          "old_text": "atoi(c->argv[2]->ptr)",
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "            int toremove = atoi(c->argv[2]->ptr);",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 4226,
          "old_api": "listDelNode",
          "new_api": "listNodeValue",
          "old_text": "listDelNode(list,ln)",
          "new_text": "listNodeValue(ln)",
          "old_line_content": "                    listDelNode(list,ln);",
          "new_line_content": "                robj *ele = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 4274,
          "old_api": "addReply",
          "new_api": "listNodeValue",
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": "listNodeValue(ln)",
          "old_line_content": "                    addReply(c,shared.wrongtypeerr);",
          "new_line_content": "                robj *ele = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 4284,
          "old_api": "dictAdd",
          "new_api": "handleClientsWaitingListPush",
          "old_text": "dictAdd(c->db->dict,c->argv[2],dobj)",
          "new_text": "handleClientsWaitingListPush(c,c->argv[2],ele)",
          "old_line_content": "                        dictAdd(c->db->dict,c->argv[2],dobj);",
          "new_line_content": "                if (!handleClientsWaitingListPush(c,c->argv[2],ele)) {",
          "content_same": false
        },
        {
          "line": 4288,
          "old_api": "listAddNodeHead",
          "new_api": "dictAdd",
          "old_text": "listAddNodeHead(dstlist,ele)",
          "new_text": "dictAdd(c->db->dict,c->argv[2],dobj)",
          "old_line_content": "                    listAddNodeHead(dstlist,ele);",
          "new_line_content": "                        dictAdd(c->db->dict,c->argv[2],dobj);",
          "content_same": false
        },
        {
          "line": 4293,
          "old_api": "addReplyBulkLen",
          "new_api": "incrRefCount",
          "old_text": "addReplyBulkLen(c,ele)",
          "new_text": "incrRefCount(ele)",
          "old_line_content": "                addReplyBulkLen(c,ele);",
          "new_line_content": "                    incrRefCount(ele);",
          "content_same": false
        },
        {
          "line": 4298,
          "old_api": "listDelNode",
          "new_api": "addReply",
          "old_text": "listDelNode(srclist,ln)",
          "new_text": "addReply(c,ele)",
          "old_line_content": "                listDelNode(srclist,ln);",
          "new_line_content": "                addReply(c,ele);",
          "content_same": false
        },
        {
          "line": 4315,
          "old_api": "incrRefCount",
          "new_api": "lookupKeyWrite",
          "old_text": "incrRefCount(c->argv[1])",
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "        incrRefCount(c->argv[1]);",
          "new_line_content": "    set = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4318,
          "old_api": "addReply",
          "new_api": "dictAdd",
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": "dictAdd(c->db->dict,c->argv[1],set)",
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "        dictAdd(c->db->dict,c->argv[1],set);",
          "content_same": false
        },
        {
          "line": 4322,
          "old_api": "dictAdd",
          "new_api": "addReply",
          "old_text": "dictAdd(set->ptr,c->argv[2],NULL)",
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "    if (dictAdd(set->ptr,c->argv[2],NULL) == DICT_OK) {",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 4327,
          "old_api": "addReply",
          "new_api": "incrRefCount",
          "old_text": "addReply(c,shared.czero)",
          "new_text": "incrRefCount(c->argv[2])",
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "        incrRefCount(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 4370,
          "old_api": "dictDelete",
          "new_api": "addReply",
          "old_text": "dictDelete(srcset->ptr,c->argv[3])",
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "    if (dictDelete(srcset->ptr,c->argv[3]) == DICT_ERR) {",
          "new_line_content": "        addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 4382,
          "old_api": "dictAdd",
          "new_api": "createSetObject",
          "old_text": "dictAdd(dstset->ptr,c->argv[3],NULL)",
          "new_text": "createSetObject()",
          "old_line_content": "    if (dictAdd(dstset->ptr,c->argv[3],NULL) == DICT_OK)",
          "new_line_content": "        dstset = createSetObject();",
          "content_same": false
        },
        {
          "line": 4383,
          "old_api": "incrRefCount",
          "new_api": "dictAdd",
          "old_text": "incrRefCount(c->argv[3])",
          "new_text": "dictAdd(c->db->dict,c->argv[2],dstset)",
          "old_line_content": "        incrRefCount(c->argv[3]);",
          "new_line_content": "        dictAdd(c->db->dict,c->argv[2],dstset);",
          "content_same": false
        },
        {
          "line": 4384,
          "old_api": "addReply",
          "new_api": "incrRefCount",
          "old_text": "addReply(c,shared.cone)",
          "new_text": "incrRefCount(c->argv[2])",
          "old_line_content": "    addReply(c,shared.cone);",
          "new_line_content": "        incrRefCount(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 4419,
          "old_api": "dictSize",
          "new_api": "addReply",
          "old_text": "dictSize(s)",
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "                dictSize(s)));",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 4440,
          "old_api": "dictGetEntryKey",
          "new_api": "dictGetRandomKey",
          "old_text": "dictGetEntryKey(de)",
          "new_text": "dictGetRandomKey(set->ptr)",
          "old_line_content": "            robj *ele = dictGetEntryKey(de);",
          "new_line_content": "        de = dictGetRandomKey(set->ptr);",
          "content_same": false
        },
        {
          "line": 4442,
          "old_api": "addReplyBulkLen",
          "new_api": "addReply",
          "old_text": "addReplyBulkLen(c,ele)",
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "            addReplyBulkLen(c,ele);",
          "new_line_content": "            addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 4444,
          "old_api": "addReply",
          "new_api": "dictGetEntryKey",
          "old_text": "addReply(c,shared.crlf)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "            addReply(c,shared.crlf);",
          "new_line_content": "            robj *ele = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 4446,
          "old_api": "dictResize",
          "new_api": "addReplyBulkLen",
          "old_text": "dictResize(set->ptr)",
          "new_text": "addReplyBulkLen(c,ele)",
          "old_line_content": "            if (htNeedsResize(set->ptr)) dictResize(set->ptr);",
          "new_line_content": "            addReplyBulkLen(c,ele);",
          "content_same": false
        },
        {
          "line": 4468,
          "old_api": "dictGetEntryKey",
          "new_api": "dictGetRandomKey",
          "old_text": "dictGetEntryKey(de)",
          "new_text": "dictGetRandomKey(set->ptr)",
          "old_line_content": "            robj *ele = dictGetEntryKey(de);",
          "new_line_content": "        de = dictGetRandomKey(set->ptr);",
          "content_same": false
        },
        {
          "line": 4470,
          "old_api": "addReplyBulkLen",
          "new_api": "addReply",
          "old_text": "addReplyBulkLen(c,ele)",
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "            addReplyBulkLen(c,ele);",
          "new_line_content": "            addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 4472,
          "old_api": "addReply",
          "new_api": "dictGetEntryKey",
          "old_text": "addReply(c,shared.crlf)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "            addReply(c,shared.crlf);",
          "new_line_content": "            robj *ele = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 4484,
          "old_api": "zmalloc",
          "new_api": "dictSize",
          "old_text": "zmalloc(sizeof(dict*)*setsnum)",
          "new_text": "dictSize(*d2)",
          "old_line_content": "    dict **dv = zmalloc(sizeof(dict*)*setsnum);",
          "new_line_content": "    return dictSize(*d1)-dictSize(*d2);",
          "content_same": false
        },
        {
          "line": 4499,
          "old_api": "deleteKey",
          "new_api": "lookupKeyRead",
          "old_text": "deleteKey(c->db,dstkey)",
          "new_text": "lookupKeyRead(c->db,setskeys[j])",
          "old_line_content": "                if (deleteKey(c->db,dstkey))",
          "new_line_content": "                    lookupKeyRead(c->db,setskeys[j]);",
          "content_same": false
        },
        {
          "line": 4501,
          "old_api": "addReply",
          "new_api": "zfree",
          "old_text": "addReply(c,shared.czero)",
          "new_text": "zfree(dv)",
          "old_line_content": "                addReply(c,shared.czero);",
          "new_line_content": "            zfree(dv);",
          "content_same": false
        },
        {
          "line": 4503,
          "old_api": "addReply",
          "new_api": "deleteKey",
          "old_text": "addReply(c,shared.nullmultibulk)",
          "new_text": "deleteKey(c->db,dstkey)",
          "old_line_content": "                addReply(c,shared.nullmultibulk);",
          "new_line_content": "                if (deleteKey(c->db,dstkey))",
          "content_same": false
        },
        {
          "line": 4530,
          "old_api": "createSetObject",
          "new_api": "decrRefCount",
          "old_text": "createSetObject()",
          "new_text": "decrRefCount(lenobj)",
          "old_line_content": "        dstset = createSetObject();",
          "new_line_content": "        decrRefCount(lenobj);",
          "content_same": false
        },
        {
          "line": 4542,
          "old_api": "dictGetEntryKey",
          "new_api": "dictNext",
          "old_text": "dictGetEntryKey(de)",
          "new_text": "dictNext(di)",
          "old_line_content": "            if (dictFind(dv[j],dictGetEntryKey(de)) == NULL) break;",
          "new_line_content": "    while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 4549,
          "old_api": "addReply",
          "new_api": "dictGetEntryKey",
          "old_text": "addReply(c,shared.crlf)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "            addReply(c,shared.crlf);",
          "new_line_content": "        ele = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 4552,
          "old_api": "dictAdd",
          "new_api": "addReply",
          "old_text": "dictAdd(dstset->ptr,ele,NULL)",
          "new_text": "addReply(c,ele)",
          "old_line_content": "            dictAdd(dstset->ptr,ele,NULL);",
          "new_line_content": "            addReply(c,ele);",
          "content_same": false
        },
        {
          "line": 4553,
          "old_api": "incrRefCount",
          "new_api": "addReply",
          "old_text": "incrRefCount(ele)",
          "new_text": "addReply(c,shared.crlf)",
          "old_line_content": "            incrRefCount(ele);",
          "new_line_content": "            addReply(c,shared.crlf);",
          "content_same": false
        },
        {
          "line": 4556,
          "old_api": "dictReleaseIterator",
          "new_api": "dictAdd",
          "old_text": "dictReleaseIterator(di)",
          "new_text": "dictAdd(dstset->ptr,ele,NULL)",
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "            dictAdd(dstset->ptr,ele,NULL);",
          "content_same": false
        },
        {
          "line": 4560,
          "old_api": "deleteKey",
          "new_api": "dictReleaseIterator",
          "old_text": "deleteKey(c->db,dstkey)",
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "        deleteKey(c->db,dstkey);",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 4566,
          "old_api": "sdsempty",
          "new_api": "incrRefCount",
          "old_text": "sdsempty()",
          "new_text": "incrRefCount(dstkey)",
          "old_line_content": "        lenobj->ptr = sdscatprintf(sdsempty(),\"*%lu\\r\\n\",cardinality);",
          "new_line_content": "        incrRefCount(dstkey);",
          "content_same": false
        },
        {
          "line": 4572,
          "old_api": "zfree",
          "new_api": "sdsempty",
          "old_text": "zfree(dv)",
          "new_text": "sdsempty()",
          "old_line_content": "    zfree(dv);",
          "new_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),\":%lu\\r\\n\",",
          "content_same": false
        },
        {
          "line": 4576,
          "old_api": "sinterGenericCommand",
          "new_api": "zfree",
          "old_text": "sinterGenericCommand(c,c->argv+1,c->argc-1,NULL)",
          "new_text": "zfree(dv)",
          "old_line_content": "    sinterGenericCommand(c,c->argv+1,c->argc-1,NULL);",
          "new_line_content": "    zfree(dv);",
          "content_same": false
        },
        {
          "line": 4628,
          "old_api": "dictGetEntryKey",
          "new_api": "dictNext",
          "old_text": "dictGetEntryKey(de)",
          "new_text": "dictNext(di)",
          "old_line_content": "            ele = dictGetEntryKey(de);",
          "new_line_content": "        while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 4635,
          "old_api": "dictDelete",
          "new_api": "incrRefCount",
          "old_text": "dictDelete(dstset->ptr,ele)",
          "new_text": "incrRefCount(ele)",
          "old_line_content": "                if (dictDelete(dstset->ptr,ele) == DICT_OK) {",
          "new_line_content": "                    incrRefCount(ele);",
          "content_same": false
        },
        {
          "line": 4652,
          "old_api": "dictGetEntryKey",
          "new_api": "dictGetIterator",
          "old_text": "dictGetEntryKey(de)",
          "new_text": "dictGetIterator(dstset->ptr)",
          "old_line_content": "            ele = dictGetEntryKey(de);",
          "new_line_content": "        di = dictGetIterator(dstset->ptr);",
          "content_same": false
        },
        {
          "line": 4653,
          "old_api": "addReplyBulkLen",
          "new_api": "dictNext",
          "old_text": "addReplyBulkLen(c,ele)",
          "new_text": "dictNext(di)",
          "old_line_content": "            addReplyBulkLen(c,ele);",
          "new_line_content": "        while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 4657,
          "old_api": "dictReleaseIterator",
          "new_api": "addReplyBulkLen",
          "old_text": "dictReleaseIterator(di)",
          "new_text": "addReplyBulkLen(c,ele)",
          "old_line_content": "        dictReleaseIterator(di);",
          "new_line_content": "            addReplyBulkLen(c,ele);",
          "content_same": false
        },
        {
          "line": 4661,
          "old_api": "deleteKey",
          "new_api": "dictReleaseIterator",
          "old_text": "deleteKey(c->db,dstkey)",
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "        deleteKey(c->db,dstkey);",
          "new_line_content": "        dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 4674,
          "old_api": "zfree",
          "new_api": "sdsempty",
          "old_text": "zfree(dv)",
          "new_text": "sdsempty()",
          "old_line_content": "    zfree(dv);",
          "new_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),\":%lu\\r\\n\",",
          "content_same": false
        },
        {
          "line": 4678,
          "old_api": "sunionDiffGenericCommand",
          "new_api": "zfree",
          "old_text": "sunionDiffGenericCommand(c,c->argv+1,c->argc-1,NULL,REDIS_OP_UNION)",
          "new_text": "zfree(dv)",
          "old_line_content": "    sunionDiffGenericCommand(c,c->argv+1,c->argc-1,NULL,REDIS_OP_UNION);",
          "new_line_content": "    zfree(dv);",
          "content_same": false
        },
        {
          "line": 4749,
          "old_api": "zslFreeNode",
          "new_api": "zfree",
          "old_text": "zslFreeNode(node)",
          "new_text": "zfree(zsl->header->forward)",
          "old_line_content": "        zslFreeNode(node);",
          "new_line_content": "    zfree(zsl->header->forward);",
          "content_same": false
        },
        {
          "line": 4910,
          "old_api": "incrRefCount",
          "new_api": "lookupKeyWrite",
          "old_text": "incrRefCount(key)",
          "new_text": "lookupKeyWrite(c->db,key)",
          "old_line_content": "        incrRefCount(key);",
          "new_line_content": "    zsetobj = lookupKeyWrite(c->db,key);",
          "content_same": false
        },
        {
          "line": 4913,
          "old_api": "addReply",
          "new_api": "dictAdd",
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": "dictAdd(c->db->dict,key,zsetobj)",
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "        dictAdd(c->db->dict,key,zsetobj);",
          "content_same": false
        },
        {
          "line": 4944,
          "old_api": "incrRefCount",
          "new_api": "dictAdd",
          "old_text": "incrRefCount(ele)",
          "new_text": "dictAdd(zs->dict,ele,score)",
          "old_line_content": "        incrRefCount(ele); /* added to skiplist */",
          "new_line_content": "    if (dictAdd(zs->dict,ele,score) == DICT_OK) {",
          "content_same": false
        },
        {
          "line": 4947,
          "old_api": "addReplyDouble",
          "new_api": "zslInsert",
          "old_text": "addReplyDouble(c,*score)",
          "new_text": "zslInsert(zs->zsl,*score,ele)",
          "old_line_content": "            addReplyDouble(c,*score);",
          "new_line_content": "        zslInsert(zs->zsl,*score,ele);",
          "content_same": false
        },
        {
          "line": 4967,
          "old_api": "dictReplace",
          "new_api": "redisAssert",
          "old_text": "dictReplace(zs->dict,ele,score)",
          "new_text": "redisAssert(deleted != 0)",
          "old_line_content": "            dictReplace(zs->dict,ele,score);",
          "new_line_content": "            redisAssert(deleted != 0);",
          "content_same": false
        },
        {
          "line": 5010,
          "old_api": "dictFind",
          "new_api": "addReply",
          "old_text": "dictFind(zs->dict,c->argv[2])",
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "        de = dictFind(zs->dict,c->argv[2]);",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 5016,
          "old_api": "dictGetEntryVal",
          "new_api": "addReply",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "        oldscore = dictGetEntryVal(de);",
          "new_line_content": "            addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 5021,
          "old_api": "dictDelete",
          "new_api": "zslDelete",
          "old_text": "dictDelete(zs->dict,c->argv[2])",
          "new_text": "zslDelete(zs->zsl,*oldscore,c->argv[2])",
          "old_line_content": "        dictDelete(zs->dict,c->argv[2]);",
          "new_line_content": "        deleted = zslDelete(zs->zsl,*oldscore,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 5022,
          "old_api": "dictResize",
          "new_api": "redisAssert",
          "old_text": "dictResize(zs->dict)",
          "new_text": "redisAssert(deleted != 0)",
          "old_line_content": "        if (htNeedsResize(zs->dict)) dictResize(zs->dict);",
          "new_line_content": "        redisAssert(deleted != 0);",
          "content_same": false
        },
        {
          "line": 5034,
          "old_api": "lookupKeyWrite",
          "new_api": "strtod",
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": "strtod(c->argv[3]->ptr,NULL)",
          "old_line_content": "    zsetobj = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "    double max = strtod(c->argv[3]->ptr,NULL);",
          "content_same": false
        },
        {
          "line": 5045,
          "old_api": "zslDeleteRange",
          "new_api": "addReply",
          "old_text": "zslDeleteRange(zs->zsl,min,max,zs->dict)",
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "        deleted = zslDeleteRange(zs->zsl,min,max,zs->dict);",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 5058,
          "old_api": "strcasecmp",
          "new_api": "atoi",
          "old_text": "strcasecmp(c->argv[4]->ptr,\"withscores\")",
          "new_text": "atoi(c->argv[2]->ptr)",
          "old_line_content": "    if (c->argc == 5 && !strcasecmp(c->argv[4]->ptr,\"withscores\")) {",
          "new_line_content": "    int start = atoi(c->argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 5065,
          "old_api": "lookupKeyRead",
          "new_api": "addReply",
          "old_text": "lookupKeyRead(c->db,c->argv[1])",
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "    o = lookupKeyRead(c->db,c->argv[1]);",
          "new_line_content": "        addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 5110,
          "old_api": "addReplyBulkLen",
          "new_api": "sdsempty",
          "old_text": "addReplyBulkLen(c,ele)",
          "new_text": "sdsempty()",
          "old_line_content": "                addReplyBulkLen(c,ele);",
          "new_line_content": "            addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",",
          "content_same": false
        },
        {
          "line": 5114,
          "old_api": "addReplyDouble",
          "new_api": "addReplyBulkLen",
          "old_text": "addReplyDouble(c,ln->score)",
          "new_text": "addReplyBulkLen(c,ele)",
          "old_line_content": "                    addReplyDouble(c,ln->score);",
          "new_line_content": "                addReplyBulkLen(c,ele);",
          "content_same": false
        },
        {
          "line": 5136,
          "old_api": "addReplySds",
          "new_api": "strtod",
          "old_text": "addReplySds(c,\n            sdsnew(\"-ERR wrong number of arguments for ZRANGEBYSCORE\\r\\n\"))",
          "new_text": "strtod(c->argv[3]->ptr,NULL)",
          "old_line_content": "        addReplySds(c,",
          "new_line_content": "    double max = strtod(c->argv[3]->ptr,NULL);",
          "content_same": false
        },
        {
          "line": 5140,
          "old_api": "addReply",
          "new_api": "addReplySds",
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": "addReplySds(c,\n            sdsnew(\"-ERR wrong number of arguments for ZRANGEBYSCORE\\r\\n\"))",
          "old_line_content": "        addReply(c,shared.syntaxerr);",
          "new_line_content": "        addReplySds(c,",
          "content_same": false
        },
        {
          "line": 5143,
          "old_api": "atoi",
          "new_api": "strcasecmp",
          "old_text": "atoi(c->argv[5]->ptr)",
          "new_text": "strcasecmp(c->argv[4]->ptr,\"limit\")",
          "old_line_content": "        offset = atoi(c->argv[5]->ptr);",
          "new_line_content": "    } else if (c->argc == 7 && strcasecmp(c->argv[4]->ptr,\"limit\")) {",
          "content_same": false
        },
        {
          "line": 5144,
          "old_api": "atoi",
          "new_api": "addReply",
          "old_text": "atoi(c->argv[6]->ptr)",
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "        limit = atoi(c->argv[6]->ptr);",
          "new_line_content": "        addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 5148,
          "old_api": "lookupKeyRead",
          "new_api": "atoi",
          "old_text": "lookupKeyRead(c->db,c->argv[1])",
          "new_text": "atoi(c->argv[6]->ptr)",
          "old_line_content": "    o = lookupKeyRead(c->db,c->argv[1]);",
          "new_line_content": "        limit = atoi(c->argv[6]->ptr);",
          "content_same": false
        },
        {
          "line": 5234,
          "old_api": "dictGetEntryVal",
          "new_api": "dictFind",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "dictFind(zs->dict,c->argv[2])",
          "old_line_content": "                double *score = dictGetEntryVal(de);",
          "new_line_content": "            de = dictFind(zs->dict,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 5236,
          "old_api": "addReplyDouble",
          "new_api": "addReply",
          "old_text": "addReplyDouble(c,*score)",
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "                addReplyDouble(c,*score);",
          "new_line_content": "                addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 5252,
          "old_api": "emptyDb",
          "new_api": "addReply",
          "old_text": "emptyDb()",
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "    server.dirty += emptyDb();",
          "new_line_content": "    addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 5293,
          "old_api": "strchr",
          "new_api": "getDecodedObject",
          "old_text": "strchr(spat,'*')",
          "new_text": "getDecodedObject(subst)",
          "old_line_content": "    p = strchr(spat,'*');",
          "new_line_content": "    subst = getDecodedObject(subst);",
          "content_same": false
        },
        {
          "line": 5304,
          "old_api": "memcpy",
          "new_api": "sdslen",
          "old_text": "memcpy(keyname.buf+prefixlen+sublen,p+1,postfixlen)",
          "new_text": "sdslen(ssub)",
          "old_line_content": "    memcpy(keyname.buf+prefixlen+sublen,p+1,postfixlen);",
          "new_line_content": "    sublen = sdslen(ssub);",
          "content_same": false
        },
        {
          "line": 5308,
          "old_api": "initStaticStringObject",
          "new_api": "memcpy",
          "old_text": "initStaticStringObject(keyobj,((char*)&keyname)+(sizeof(long)*2))",
          "new_text": "memcpy(keyname.buf+prefixlen+sublen,p+1,postfixlen)",
          "old_line_content": "    initStaticStringObject(keyobj,((char*)&keyname)+(sizeof(long)*2))",
          "new_line_content": "    memcpy(keyname.buf+prefixlen+sublen,p+1,postfixlen);",
          "content_same": false
        },
        {
          "line": 5312,
          "old_api": "lookupKeyRead",
          "new_api": "initStaticStringObject",
          "old_text": "lookupKeyRead(db,&keyobj)",
          "new_text": "initStaticStringObject(keyobj,((char*)&keyname)+(sizeof(long)*2))",
          "old_line_content": "    return lookupKeyRead(db,&keyobj);",
          "new_line_content": "    initStaticStringObject(keyobj,((char*)&keyname)+(sizeof(long)*2))",
          "content_same": false
        },
        {
          "line": 5354,
          "old_api": "decrRefCount",
          "new_api": "getDecodedObject",
          "old_text": "decrRefCount(dec2)",
          "new_text": "getDecodedObject(so1->obj)",
          "old_line_content": "            decrRefCount(dec2);",
          "new_line_content": "            dec1 = getDecodedObject(so1->obj);",
          "content_same": false
        },
        {
          "line": 5407,
          "old_api": "atoi",
          "new_api": "strcasecmp",
          "old_text": "atoi(c->argv[j+2]->ptr)",
          "new_text": "strcasecmp(c->argv[j]->ptr,\"alpha\")",
          "old_line_content": "            limit_count = atoi(c->argv[j+2]->ptr);",
          "new_line_content": "        } else if (!strcasecmp(c->argv[j]->ptr,\"alpha\")) {",
          "content_same": false
        },
        {
          "line": 5416,
          "old_api": "strchr",
          "new_api": "strcasecmp",
          "old_text": "strchr(c->argv[j+1]->ptr,'*')",
          "new_text": "strcasecmp(c->argv[j]->ptr,\"by\")",
          "old_line_content": "            if (strchr(c->argv[j+1]->ptr,'*') == NULL) dontsort = 1;",
          "new_line_content": "        } else if (!strcasecmp(c->argv[j]->ptr,\"by\") && leftargs >= 1) {",
          "content_same": false
        },
        {
          "line": 5439,
          "old_api": "zmalloc",
          "new_api": "dictSize",
          "old_text": "zmalloc(sizeof(redisSortObject)*vectorlen)",
          "new_text": "dictSize((dict*)sortval->ptr)",
          "old_line_content": "    vector = zmalloc(sizeof(redisSortObject)*vectorlen);",
          "new_line_content": "    case REDIS_SET: vectorlen =  dictSize((dict*)sortval->ptr); break;",
          "content_same": false
        },
        {
          "line": 5551,
          "old_api": "listRewind",
          "new_api": "addReplyBulkLen",
          "old_text": "listRewind(operations,&li)",
          "new_text": "addReplyBulkLen(c,vector[j].obj)",
          "old_line_content": "            listRewind(operations,&li);",
          "new_line_content": "                addReplyBulkLen(c,vector[j].obj);",
          "content_same": false
        },
        {
          "line": 5552,
          "old_api": "listNext",
          "new_api": "addReply",
          "old_text": "listNext(&li)",
          "new_text": "addReply(c,vector[j].obj)",
          "old_line_content": "            while((ln = listNext(&li))) {",
          "new_line_content": "                addReply(c,vector[j].obj);",
          "content_same": false
        },
        {
          "line": 5566,
          "old_api": "redisAssert",
          "new_api": "addReply",
          "old_text": "redisAssert(sop->type == REDIS_SORT_GET)",
          "new_text": "addReply(c,val)",
          "old_line_content": "                    redisAssert(sop->type == REDIS_SORT_GET); /* always fails */",
          "new_line_content": "                        addReply(c,val);",
          "content_same": false
        },
        {
          "line": 5584,
          "old_api": "listNext",
          "new_api": "listAddNodeTail",
          "old_text": "listNext(&li)",
          "new_text": "listAddNodeTail(listPtr,vector[j].obj)",
          "old_line_content": "            while((ln = listNext(&li))) {",
          "new_line_content": "                listAddNodeTail(listPtr,vector[j].obj);",
          "content_same": false
        },
        {
          "line": 5597,
          "old_api": "redisAssert",
          "new_api": "listAddNodeTail",
          "old_text": "redisAssert(sop->type == REDIS_SORT_GET)",
          "new_text": "listAddNodeTail(listPtr,val)",
          "old_line_content": "                    redisAssert(sop->type == REDIS_SORT_GET); /* always fails */",
          "new_line_content": "                        listAddNodeTail(listPtr,val);",
          "content_same": false
        },
        {
          "line": 5601,
          "old_api": "dictReplace",
          "new_api": "redisAssert",
          "old_text": "dictReplace(c->db->dict,storekey,listObject)",
          "new_text": "redisAssert(sop->type == REDIS_SORT_GET)",
          "old_line_content": "        if (dictReplace(c->db->dict,storekey,listObject)) {",
          "new_line_content": "                    redisAssert(sop->type == REDIS_SORT_GET); /* always fails */",
          "content_same": false
        },
        {
          "line": 5612,
          "old_api": "decrRefCount",
          "new_api": "sdsempty",
          "old_text": "decrRefCount(sortval)",
          "new_text": "sdsempty()",
          "old_line_content": "    decrRefCount(sortval);",
          "new_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),\":%d\\r\\n\",outputlen));",
          "content_same": false
        },
        {
          "line": 5651,
          "old_api": "zmalloc_used_memory",
          "new_api": "time",
          "old_text": "zmalloc_used_memory()",
          "new_text": "time(NULL)",
          "old_line_content": "    bytesToHuman(hmem,zmalloc_used_memory());",
          "new_line_content": "    time_t uptime = time(NULL)-server.stat_starttime;",
          "content_same": false
        },
        {
          "line": 5678,
          "old_api": "listLength",
          "new_api": "aeGetApiName",
          "old_text": "listLength(server.slaves)",
          "new_text": "aeGetApiName()",
          "old_line_content": "        listLength(server.clients)-listLength(server.slaves),",
          "new_line_content": "        aeGetApiName(),",
          "content_same": false
        },
        {
          "line": 5679,
          "old_api": "listLength",
          "new_api": "getpid",
          "old_text": "listLength(server.slaves)",
          "new_text": "getpid()",
          "old_line_content": "        listLength(server.slaves),",
          "new_line_content": "        (long) getpid(),",
          "content_same": false
        },
        {
          "line": 5706,
          "old_api": "lockThreadedIO",
          "new_api": "time",
          "old_text": "lockThreadedIO()",
          "new_text": "time(NULL)",
          "old_line_content": "        lockThreadedIO();",
          "new_line_content": "            server.master ? ((int)(time(NULL)-server.master->lastinteraction)) : -1",
          "content_same": false
        },
        {
          "line": 5733,
          "old_api": "unlockThreadedIO",
          "new_api": "listLength",
          "old_text": "unlockThreadedIO()",
          "new_text": "listLength(server.io_processed)",
          "old_line_content": "        unlockThreadedIO();",
          "new_line_content": "            (unsigned long) listLength(server.io_processed),",
          "content_same": false
        },
        {
          "line": 5753,
          "old_api": "addReply",
          "new_api": "genRedisInfoString",
          "old_text": "addReply(c,shared.crlf)",
          "new_text": "genRedisInfoString()",
          "old_line_content": "    addReply(c,shared.crlf);",
          "new_line_content": "    sds info = genRedisInfoString();",
          "content_same": false
        },
        {
          "line": 5805,
          "old_api": "dictGetEntryVal",
          "new_api": "dictSize",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "dictSize(db->expires)",
          "old_line_content": "    when = (time_t) dictGetEntryVal(de);",
          "new_line_content": "    if (dictSize(db->expires) == 0 ||",
          "content_same": false
        },
        {
          "line": 5806,
          "old_api": "time",
          "new_api": "dictFind",
          "old_text": "time(NULL)",
          "new_text": "dictFind(db->expires,key)",
          "old_line_content": "    if (time(NULL) <= when) return 0;",
          "new_line_content": "       (de = dictFind(db->expires,key)) == NULL) return 0;",
          "content_same": false
        },
        {
          "line": 5809,
          "old_api": "dictDelete",
          "new_api": "dictGetEntryVal",
          "old_text": "dictDelete(db->expires,key)",
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "    dictDelete(db->expires,key);",
          "new_line_content": "    when = (time_t) dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 5810,
          "old_api": "dictDelete",
          "new_api": "time",
          "old_text": "dictDelete(db->dict,key)",
          "new_text": "time(NULL)",
          "old_line_content": "    return dictDelete(db->dict,key) == DICT_OK;",
          "new_line_content": "    if (time(NULL) <= when) return 0;",
          "content_same": false
        },
        {
          "line": 5822,
          "old_api": "dictDelete",
          "new_api": "dictFind",
          "old_text": "dictDelete(db->expires,key)",
          "new_text": "dictFind(db->expires,key)",
          "old_line_content": "    dictDelete(db->expires,key);",
          "new_line_content": "       (de = dictFind(db->expires,key)) == NULL) return 0;",
          "content_same": false
        },
        {
          "line": 5835,
          "old_api": "deleteKey",
          "new_api": "addReply",
          "old_text": "deleteKey(c->db,key)",
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "        if (deleteKey(c->db,key)) server.dirty++;",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 5839,
          "old_api": "time",
          "new_api": "deleteKey",
          "old_text": "time(NULL)",
          "new_text": "deleteKey(c->db,key)",
          "old_line_content": "        time_t when = time(NULL)+seconds;",
          "new_line_content": "        if (deleteKey(c->db,key)) server.dirty++;",
          "content_same": false
        },
        {
          "line": 5840,
          "old_api": "setExpire",
          "new_api": "addReply",
          "old_text": "setExpire(c->db,key,when)",
          "new_text": "addReply(c, shared.cone)",
          "old_line_content": "        if (setExpire(c->db,key,when)) {",
          "new_line_content": "        addReply(c, shared.cone);",
          "content_same": false
        },
        {
          "line": 5844,
          "old_api": "addReply",
          "new_api": "setExpire",
          "old_text": "addReply(c,shared.czero)",
          "new_text": "setExpire(c->db,key,when)",
          "old_line_content": "            addReply(c,shared.czero);",
          "new_line_content": "        if (setExpire(c->db,key,when)) {",
          "content_same": false
        },
        {
          "line": 5855,
          "old_api": "time",
          "new_api": "strtol",
          "old_text": "time(NULL)",
          "new_text": "strtol(c->argv[2]->ptr,NULL,10)",
          "old_line_content": "    expireGenericCommand(c,c->argv[1],strtol(c->argv[2]->ptr,NULL,10)-time(NULL));",
          "new_line_content": "    expireGenericCommand(c,c->argv[1],strtol(c->argv[2]->ptr,NULL,10));",
          "content_same": false
        },
        {
          "line": 5931,
          "old_api": "call",
          "new_api": "sdsempty",
          "old_text": "call(c,c->mstate.commands[j].cmd)",
          "new_text": "sdsempty()",
          "old_line_content": "        call(c,c->mstate.commands[j].cmd);",
          "new_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",c->mstate.count));",
          "content_same": false
        },
        {
          "line": 5935,
          "old_api": "freeClientMultiState",
          "new_api": "call",
          "old_text": "freeClientMultiState(c)",
          "new_text": "call(c,c->mstate.commands[j].cmd)",
          "old_line_content": "    freeClientMultiState(c);",
          "new_line_content": "        call(c,c->mstate.commands[j].cmd);",
          "content_same": false
        },
        {
          "line": 5997,
          "old_api": "dictGetEntryVal",
          "new_api": "dictAdd",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "dictAdd(c->db->blockingkeys,keys[j],l)",
          "old_line_content": "            l = dictGetEntryVal(de);",
          "new_line_content": "            retval = dictAdd(c->db->blockingkeys,keys[j],l);",
          "content_same": false
        },
        {
          "line": 5999,
          "old_api": "listAddNodeTail",
          "new_api": "assert",
          "old_text": "listAddNodeTail(l,c)",
          "new_text": "assert(retval == DICT_OK)",
          "old_line_content": "        listAddNodeTail(l,c);",
          "new_line_content": "            assert(retval == DICT_OK);",
          "content_same": false
        },
        {
          "line": 6003,
          "old_api": "aeDeleteFileEvent",
          "new_api": "listAddNodeTail",
          "old_text": "aeDeleteFileEvent(server.el,c->fd,AE_READABLE)",
          "new_text": "listAddNodeTail(l,c)",
          "old_line_content": "    aeDeleteFileEvent(server.el,c->fd,AE_READABLE);",
          "new_line_content": "        listAddNodeTail(l,c);",
          "content_same": false
        },
        {
          "line": 6017,
          "old_api": "dictFind",
          "new_api": "assert",
          "old_text": "dictFind(c->db->blockingkeys,c->blockingkeys[j])",
          "new_text": "assert(c->blockingkeys != NULL)",
          "old_line_content": "        de = dictFind(c->db->blockingkeys,c->blockingkeys[j]);",
          "new_line_content": "    assert(c->blockingkeys != NULL);",
          "content_same": false
        },
        {
          "line": 6022,
          "old_api": "listLength",
          "new_api": "assert",
          "old_text": "listLength(l)",
          "new_text": "assert(de != NULL)",
          "old_line_content": "        if (listLength(l) == 0)",
          "new_line_content": "        assert(de != NULL);",
          "content_same": false
        },
        {
          "line": 6023,
          "old_api": "dictDelete",
          "new_api": "dictGetEntryVal",
          "old_text": "dictDelete(c->db->blockingkeys,c->blockingkeys[j])",
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "            dictDelete(c->db->blockingkeys,c->blockingkeys[j]);",
          "new_line_content": "        l = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 6024,
          "old_api": "decrRefCount",
          "new_api": "listSearchKey",
          "old_text": "decrRefCount(c->blockingkeys[j])",
          "new_text": "listSearchKey(l,c)",
          "old_line_content": "        decrRefCount(c->blockingkeys[j]);",
          "new_line_content": "        listDelNode(l,listSearchKey(l,c));",
          "content_same": false
        },
        {
          "line": 6027,
          "old_api": "zfree",
          "new_api": "dictDelete",
          "old_text": "zfree(c->blockingkeys)",
          "new_text": "dictDelete(c->db->blockingkeys,c->blockingkeys[j])",
          "old_line_content": "    zfree(c->blockingkeys);",
          "new_line_content": "            dictDelete(c->db->blockingkeys,c->blockingkeys[j]);",
          "content_same": false
        },
        {
          "line": 6066,
          "old_api": "assert",
          "new_api": "dictFind",
          "old_text": "assert(ln != NULL)",
          "new_text": "dictFind(c->db->blockingkeys,key)",
          "old_line_content": "    assert(ln != NULL);",
          "new_line_content": "    de = dictFind(c->db->blockingkeys,key);",
          "content_same": false
        },
        {
          "line": 6069,
          "old_api": "sdsnew",
          "new_api": "listFirst",
          "old_text": "sdsnew(\"*2\\r\\n\")",
          "new_text": "listFirst(l)",
          "old_line_content": "    addReplySds(receiver,sdsnew(\"*2\\r\\n\"));",
          "new_line_content": "    ln = listFirst(l);",
          "content_same": false
        },
        {
          "line": 6070,
          "old_api": "addReplyBulkLen",
          "new_api": "assert",
          "old_text": "addReplyBulkLen(receiver,key)",
          "new_text": "assert(ln != NULL)",
          "old_line_content": "    addReplyBulkLen(receiver,key);",
          "new_line_content": "    assert(ln != NULL);",
          "content_same": false
        },
        {
          "line": 6073,
          "old_api": "addReplyBulkLen",
          "new_api": "sdsnew",
          "old_text": "addReplyBulkLen(receiver,ele)",
          "new_text": "sdsnew(\"*2\\r\\n\")",
          "old_line_content": "    addReplyBulkLen(receiver,ele);",
          "new_line_content": "    addReplySds(receiver,sdsnew(\"*2\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 6074,
          "old_api": "addReply",
          "new_api": "addReplyBulkLen",
          "old_text": "addReply(receiver,ele)",
          "new_text": "addReplyBulkLen(receiver,key)",
          "old_line_content": "    addReply(receiver,ele);",
          "new_line_content": "    addReplyBulkLen(receiver,key);",
          "content_same": false
        },
        {
          "line": 6076,
          "old_api": "unblockClientWaitingData",
          "new_api": "addReply",
          "old_text": "unblockClientWaitingData(receiver)",
          "new_text": "addReply(receiver,shared.crlf)",
          "old_line_content": "    unblockClientWaitingData(receiver);",
          "new_line_content": "    addReply(receiver,shared.crlf);",
          "content_same": false
        },
        {
          "line": 6094,
          "old_api": "listLength",
          "new_api": "addReply",
          "old_text": "listLength(list)",
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "                if (listLength(list) != 0) {",
          "new_line_content": "                addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 6117,
          "old_api": "popGenericCommand",
          "new_api": "sdsnew",
          "old_text": "popGenericCommand(c,where)",
          "new_text": "sdsnew(\"*2\\r\\n\")",
          "old_line_content": "                    popGenericCommand(c,where);",
          "new_line_content": "                    addReplySds(c,sdsnew(\"*2\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 6134,
          "old_api": "blockingPopGenericCommand",
          "new_api": "blockForKeys",
          "old_text": "blockingPopGenericCommand(c,REDIS_HEAD)",
          "new_text": "blockForKeys(c,c->argv+1,c->argc-2,timeout)",
          "old_line_content": "    blockingPopGenericCommand(c,REDIS_HEAD);",
          "new_line_content": "    blockForKeys(c,c->argv+1,c->argc-2,timeout);",
          "content_same": false
        },
        {
          "line": 6149,
          "old_api": "aeWait",
          "new_api": "time",
          "old_text": "aeWait(fd,AE_WRITABLE,1000)",
          "new_text": "time(NULL)",
          "old_line_content": "        if (aeWait(fd,AE_WRITABLE,1000) & AE_WRITABLE) {",
          "new_line_content": "    time_t start = time(NULL);",
          "content_same": false
        },
        {
          "line": 6169,
          "old_api": "aeWait",
          "new_api": "time",
          "old_text": "aeWait(fd,AE_READABLE,1000)",
          "new_text": "time(NULL)",
          "old_line_content": "        if (aeWait(fd,AE_READABLE,1000) & AE_READABLE) {",
          "new_line_content": "    time_t start = time(NULL);",
          "content_same": false
        },
        {
          "line": 6218,
          "old_api": "redisLog",
          "new_api": "sdsnew",
          "old_text": "redisLog(REDIS_NOTICE,\"Slave ask for synchronization\")",
          "new_text": "sdsnew(\"-ERR SYNC is invalid with pending input\\r\\n\")",
          "old_line_content": "    redisLog(REDIS_NOTICE,\"Slave ask for synchronization\");",
          "new_line_content": "        addReplySds(c,sdsnew(\"-ERR SYNC is invalid with pending input\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 6282,
          "old_api": "sdsfree",
          "new_api": "sdsempty",
          "old_text": "sdsfree(bulkcount)",
          "new_text": "sdsempty()",
          "old_line_content": "            sdsfree(bulkcount);",
          "new_line_content": "        bulkcount = sdscatprintf(sdsempty(),\"$%lld\\r\\n\",(unsigned long long)",
          "content_same": false
        },
        {
          "line": 6292,
          "old_api": "strerror",
          "new_api": "lseek",
          "old_text": "strerror(errno)",
          "new_text": "lseek(slave->repldbfd,slave->repldboff,SEEK_SET)",
          "old_line_content": "            (buflen == 0) ? \"premature EOF\" : strerror(errno));",
          "new_line_content": "    lseek(slave->repldbfd,slave->repldboff,SEEK_SET);",
          "content_same": false
        },
        {
          "line": 6293,
          "old_api": "freeClient",
          "new_api": "read",
          "old_text": "freeClient(slave)",
          "new_text": "read(slave->repldbfd,buf,REDIS_IOBUF_LEN)",
          "old_line_content": "        freeClient(slave);",
          "new_line_content": "    buflen = read(slave->repldbfd,buf,REDIS_IOBUF_LEN);",
          "content_same": false
        },
        {
          "line": 6296,
          "old_api": "write",
          "new_api": "strerror",
          "old_text": "write(fd,buf,buflen)",
          "new_text": "strerror(errno)",
          "old_line_content": "    if ((nwritten = write(fd,buf,buflen)) == -1) {",
          "new_line_content": "            (buflen == 0) ? \"premature EOF\" : strerror(errno));",
          "content_same": false
        },
        {
          "line": 6297,
          "old_api": "redisLog",
          "new_api": "freeClient",
          "old_text": "redisLog(REDIS_VERBOSE,\"Write error sending DB to slave: %s\",\n            strerror(errno))",
          "new_text": "freeClient(slave)",
          "old_line_content": "        redisLog(REDIS_VERBOSE,\"Write error sending DB to slave: %s\",",
          "new_line_content": "        freeClient(slave);",
          "content_same": false
        },
        {
          "line": 6308,
          "old_api": "aeCreateFileEvent",
          "new_api": "close",
          "old_text": "aeCreateFileEvent(server.el, slave->fd, AE_WRITABLE,\n            sendReplyToClient, slave)",
          "new_text": "close(slave->repldbfd)",
          "old_line_content": "        if (aeCreateFileEvent(server.el, slave->fd, AE_WRITABLE,",
          "new_line_content": "        close(slave->repldbfd);",
          "content_same": false
        },
        {
          "line": 6310,
          "old_api": "freeClient",
          "new_api": "aeDeleteFileEvent",
          "old_text": "freeClient(slave)",
          "new_text": "aeDeleteFileEvent(server.el,slave->fd,AE_WRITABLE)",
          "old_line_content": "            freeClient(slave);",
          "new_line_content": "        aeDeleteFileEvent(server.el,slave->fd,AE_WRITABLE);",
          "content_same": false
        },
        {
          "line": 6314,
          "old_api": "redisLog",
          "new_api": "freeClient",
          "old_text": "redisLog(REDIS_NOTICE,\"Synchronization with slave succeeded\")",
          "new_text": "freeClient(slave)",
          "old_line_content": "        redisLog(REDIS_NOTICE,\"Synchronization with slave succeeded\");",
          "new_line_content": "            freeClient(slave);",
          "content_same": false
        },
        {
          "line": 6344,
          "old_api": "open",
          "new_api": "freeClient",
          "old_text": "open(server.dbfilename,O_RDONLY)",
          "new_text": "freeClient(slave)",
          "old_line_content": "            if ((slave->repldbfd = open(server.dbfilename,O_RDONLY)) == -1 ||",
          "new_line_content": "                freeClient(slave);",
          "content_same": false
        },
        {
          "line": 6345,
          "old_api": "redis_fstat",
          "new_api": "redisLog",
          "old_text": "redis_fstat(slave->repldbfd,&buf)",
          "new_text": "redisLog(REDIS_WARNING,\"SYNC failed. BGSAVE child returned an error\")",
          "old_line_content": "                redis_fstat(slave->repldbfd,&buf) == -1) {",
          "new_line_content": "                redisLog(REDIS_WARNING,\"SYNC failed. BGSAVE child returned an error\");",
          "content_same": false
        },
        {
          "line": 6365,
          "old_api": "redisLog",
          "new_api": "rdbSaveBackground",
          "old_text": "redisLog(REDIS_WARNING,\"SYNC failed. BGSAVE failed\")",
          "new_text": "rdbSaveBackground(server.dbfilename)",
          "old_line_content": "            redisLog(REDIS_WARNING,\"SYNC failed. BGSAVE failed\");",
          "new_line_content": "        if (rdbSaveBackground(server.dbfilename) != REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 6370,
          "old_api": "freeClient",
          "new_api": "listNext",
          "old_text": "freeClient(slave)",
          "new_text": "listNext(&li)",
          "old_line_content": "                    freeClient(slave);",
          "new_line_content": "            while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 6383,
          "old_api": "redisLog",
          "new_api": "anetTcpConnect",
          "old_text": "redisLog(REDIS_WARNING,\"Unable to connect to MASTER: %s\",\n            strerror(errno))",
          "new_text": "anetTcpConnect(NULL,server.masterhost,server.masterport)",
          "old_line_content": "        redisLog(REDIS_WARNING,\"Unable to connect to MASTER: %s\",",
          "new_line_content": "    int fd = anetTcpConnect(NULL,server.masterhost,server.masterport);",
          "content_same": false
        },
        {
          "line": 6394,
          "old_api": "strerror",
          "new_api": "snprintf",
          "old_text": "strerror(errno)",
          "new_text": "snprintf(authcmd, 1024, \"AUTH %s\\r\\n\", server.masterauth)",
          "old_line_content": "                strerror(errno));",
          "new_line_content": "    \tsnprintf(authcmd, 1024, \"AUTH %s\\r\\n\", server.masterauth);",
          "content_same": false
        },
        {
          "line": 6398,
          "old_api": "syncReadLine",
          "new_api": "strerror",
          "old_text": "syncReadLine(fd,buf,1024,3600)",
          "new_text": "strerror(errno)",
          "old_line_content": "        if (syncReadLine(fd,buf,1024,3600) == -1) {",
          "new_line_content": "                strerror(errno));",
          "content_same": false
        },
        {
          "line": 6405,
          "old_api": "close",
          "new_api": "strerror",
          "old_text": "close(fd)",
          "new_text": "strerror(errno)",
          "old_line_content": "            close(fd);",
          "new_line_content": "                strerror(errno));",
          "content_same": false
        },
        {
          "line": 6419,
          "old_api": "syncReadLine",
          "new_api": "strerror",
          "old_text": "syncReadLine(fd,buf,1024,3600)",
          "new_text": "strerror(errno)",
          "old_line_content": "    if (syncReadLine(fd,buf,1024,3600) == -1) {",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 6426,
          "old_api": "close",
          "new_api": "strerror",
          "old_text": "close(fd)",
          "new_text": "strerror(errno)",
          "old_line_content": "        close(fd);",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 6430,
          "old_api": "atoi",
          "new_api": "close",
          "old_text": "atoi(buf+1)",
          "new_text": "close(fd)",
          "old_line_content": "    dumpsize = atoi(buf+1);",
          "new_line_content": "        close(fd);",
          "content_same": false
        },
        {
          "line": 6434,
          "old_api": "open",
          "new_api": "atoi",
          "old_text": "open(tmpfile,O_CREAT|O_WRONLY,0644)",
          "new_text": "atoi(buf+1)",
          "old_line_content": "    dfd = open(tmpfile,O_CREAT|O_WRONLY,0644);",
          "new_line_content": "    dumpsize = atoi(buf+1);",
          "content_same": false
        },
        {
          "line": 6437,
          "old_api": "strerror",
          "new_api": "random",
          "old_text": "strerror(errno)",
          "new_text": "random()",
          "old_line_content": "        redisLog(REDIS_WARNING,\"Opening the temp file needed for MASTER <-> SLAVE synchronization: %s\",strerror(errno));",
          "new_line_content": "    snprintf(tmpfile,256,\"temp-%d.%ld.rdb\",(int)time(NULL),(long int)random());",
          "content_same": false
        },
        {
          "line": 6447,
          "old_api": "close",
          "new_api": "read",
          "old_text": "close(fd)",
          "new_text": "read(fd,buf,(dumpsize < 1024)?dumpsize:1024)",
          "old_line_content": "            close(fd);",
          "new_line_content": "        nread = read(fd,buf,(dumpsize < 1024)?dumpsize:1024);",
          "content_same": false
        },
        {
          "line": 6451,
          "old_api": "write",
          "new_api": "close",
          "old_text": "write(dfd,buf,nread)",
          "new_text": "close(fd)",
          "old_line_content": "        nwritten = write(dfd,buf,nread);",
          "new_line_content": "            close(fd);",
          "content_same": false
        },
        {
          "line": 6455,
          "old_api": "close",
          "new_api": "write",
          "old_text": "close(dfd)",
          "new_text": "write(dfd,buf,nread)",
          "old_line_content": "            close(dfd);",
          "new_line_content": "        nwritten = write(dfd,buf,nread);",
          "content_same": false
        },
        {
          "line": 6467,
          "old_api": "emptyDb",
          "new_api": "unlink",
          "old_text": "emptyDb()",
          "new_text": "unlink(tmpfile)",
          "old_line_content": "    emptyDb();",
          "new_line_content": "        unlink(tmpfile);",
          "content_same": false
        },
        {
          "line": 6468,
          "old_api": "rdbLoad",
          "new_api": "close",
          "old_text": "rdbLoad(server.dbfilename)",
          "new_text": "close(fd)",
          "old_line_content": "    if (rdbLoad(server.dbfilename) != REDIS_OK) {",
          "new_line_content": "        close(fd);",
          "content_same": false
        },
        {
          "line": 6473,
          "old_api": "createClient",
          "new_api": "redisLog",
          "old_text": "createClient(fd)",
          "new_text": "redisLog(REDIS_WARNING,\"Failed trying to load the MASTER synchronization DB from disk\")",
          "old_line_content": "    server.master = createClient(fd);",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Failed trying to load the MASTER synchronization DB from disk\");",
          "content_same": false
        },
        {
          "line": 6486,
          "old_api": "freeClient",
          "new_api": "strcasecmp",
          "old_text": "freeClient(server.master)",
          "new_text": "strcasecmp(c->argv[2]->ptr,\"one\")",
          "old_line_content": "            if (server.master) freeClient(server.master);",
          "new_line_content": "        !strcasecmp(c->argv[2]->ptr,\"one\")) {",
          "content_same": false
        },
        {
          "line": 6488,
          "old_api": "redisLog",
          "new_api": "sdsfree",
          "old_text": "redisLog(REDIS_NOTICE,\"MASTER MODE enabled (user request)\")",
          "new_text": "sdsfree(server.masterhost)",
          "old_line_content": "            redisLog(REDIS_NOTICE,\"MASTER MODE enabled (user request)\");",
          "new_line_content": "            sdsfree(server.masterhost);",
          "content_same": false
        },
        {
          "line": 6492,
          "old_api": "sdsdup",
          "new_api": "redisLog",
          "old_text": "sdsdup(c->argv[1]->ptr)",
          "new_text": "redisLog(REDIS_NOTICE,\"MASTER MODE enabled (user request)\")",
          "old_line_content": "        server.masterhost = sdsdup(c->argv[1]->ptr);",
          "new_line_content": "            redisLog(REDIS_NOTICE,\"MASTER MODE enabled (user request)\");",
          "content_same": false
        },
        {
          "line": 6496,
          "old_api": "redisLog",
          "new_api": "sdsdup",
          "old_text": "redisLog(REDIS_NOTICE,\"SLAVE OF %s:%d enabled (user request)\",\n            server.masterhost, server.masterport)",
          "new_text": "sdsdup(c->argv[1]->ptr)",
          "old_line_content": "        redisLog(REDIS_NOTICE,\"SLAVE OF %s:%d enabled (user request)\",",
          "new_line_content": "        server.masterhost = sdsdup(c->argv[1]->ptr);",
          "content_same": false
        },
        {
          "line": 6515,
          "old_api": "listDelNode",
          "new_api": "pthread_mutex_lock",
          "old_text": "listDelNode(server.objfreelist,head)",
          "new_text": "pthread_mutex_lock(&server.obj_freelist_mutex)",
          "old_line_content": "        listDelNode(server.objfreelist,head);",
          "new_line_content": "    if (server.vm_enabled) pthread_mutex_lock(&server.obj_freelist_mutex);",
          "content_same": false
        },
        {
          "line": 6516,
          "old_api": "pthread_mutex_unlock",
          "new_api": "listLength",
          "old_text": "pthread_mutex_unlock(&server.obj_freelist_mutex)",
          "new_text": "listLength(server.objfreelist)",
          "old_line_content": "        if (server.vm_enabled) pthread_mutex_unlock(&server.obj_freelist_mutex);",
          "new_line_content": "    if (listLength(server.objfreelist)) {",
          "content_same": false
        },
        {
          "line": 6517,
          "old_api": "zfree",
          "new_api": "listFirst",
          "old_text": "zfree(o)",
          "new_text": "listFirst(server.objfreelist)",
          "old_line_content": "        zfree(o);",
          "new_line_content": "        listNode *head = listFirst(server.objfreelist);",
          "content_same": false
        },
        {
          "line": 6560,
          "old_api": "deleteKey",
          "new_api": "dictGetEntryKey",
          "old_text": "deleteKey(server.db+j,minkey)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "                deleteKey(server.db+j,minkey);",
          "new_line_content": "                        minkey = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 6596,
          "old_api": "createObject",
          "new_api": "createStringObject",
          "old_text": "createObject(REDIS_STRING,\n            sdscatprintf(sdsempty(),\"%ld\",when))",
          "new_text": "createStringObject(\"EXPIREAT\",8)",
          "old_line_content": "        tmpargv[2] = createObject(REDIS_STRING,",
          "new_line_content": "        tmpargv[0] = createStringObject(\"EXPIREAT\",8);",
          "content_same": false
        },
        {
          "line": 6606,
          "old_api": "getDecodedObject",
          "new_api": "sdscatprintf",
          "old_text": "getDecodedObject(o)",
          "new_text": "sdscatprintf(buf,\"*%d\\r\\n\",argc)",
          "old_line_content": "        o = getDecodedObject(o);",
          "new_line_content": "    buf = sdscatprintf(buf,\"*%d\\r\\n\",argc);",
          "content_same": false
        },
        {
          "line": 6610,
          "old_api": "decrRefCount",
          "new_api": "getDecodedObject",
          "old_text": "decrRefCount(o)",
          "new_text": "getDecodedObject(o)",
          "old_line_content": "        decrRefCount(o);",
          "new_line_content": "        o = getDecodedObject(o);",
          "content_same": false
        },
        {
          "line": 6634,
          "old_api": "exit",
          "new_api": "strerror",
          "old_text": "exit(1)",
          "new_text": "strerror(errno)",
          "old_line_content": "         exit(1);",
          "new_line_content": "            redisLog(REDIS_WARNING,\"Exiting on error writing to the append-only file: %s\",strerror(errno));",
          "content_same": false
        },
        {
          "line": 6661,
          "old_api": "sdsempty",
          "new_api": "zmalloc",
          "old_text": "sdsempty()",
          "new_text": "zmalloc(sizeof(*c))",
          "old_line_content": "    c->querybuf = sdsempty();",
          "new_line_content": "    struct redisClient *c = zmalloc(sizeof(*c));",
          "content_same": false
        },
        {
          "line": 6689,
          "old_api": "fileno",
          "new_api": "fopen",
          "old_text": "fileno(fp)",
          "new_text": "fopen(filename,\"r\")",
          "old_line_content": "    if (redis_fstat(fileno(fp),&sb) != -1 && sb.st_size == 0)",
          "new_line_content": "    FILE *fp = fopen(filename,\"r\");",
          "content_same": false
        },
        {
          "line": 6693,
          "old_api": "strerror",
          "new_api": "fileno",
          "old_text": "strerror(errno)",
          "new_text": "fileno(fp)",
          "old_line_content": "        redisLog(REDIS_WARNING,\"Fatal error: can't open the append log file for reading: %s\",strerror(errno));",
          "new_line_content": "    if (redis_fstat(fileno(fp),&sb) != -1 && sb.st_size == 0)",
          "content_same": false
        },
        {
          "line": 6697,
          "old_api": "createFakeClient",
          "new_api": "strerror",
          "old_text": "createFakeClient()",
          "new_text": "strerror(errno)",
          "old_line_content": "    fakeClient = createFakeClient();",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Fatal error: can't open the append log file for reading: %s\",strerror(errno));",
          "content_same": false
        },
        {
          "line": 6718,
          "old_api": "strtol",
          "new_api": "zmalloc",
          "old_text": "strtol(buf+1,NULL,10)",
          "new_text": "zmalloc(sizeof(robj*)*argc)",
          "old_line_content": "            len = strtol(buf+1,NULL,10);",
          "new_line_content": "        argv = zmalloc(sizeof(robj*)*argc);",
          "content_same": false
        },
        {
          "line": 6720,
          "old_api": "fread",
          "new_api": "fgets",
          "old_text": "fread(argsds,len,1,fp)",
          "new_text": "fgets(buf,sizeof(buf),fp)",
          "old_line_content": "            if (len && fread(argsds,len,1,fp) == 0) goto fmterr;",
          "new_line_content": "            if (fgets(buf,sizeof(buf),fp) == NULL) goto readerr;",
          "content_same": false
        },
        {
          "line": 6722,
          "old_api": "fread",
          "new_api": "strtol",
          "old_text": "fread(buf,2,1,fp)",
          "new_text": "strtol(buf+1,NULL,10)",
          "old_line_content": "            if (fread(buf,2,1,fp) == 0) goto fmterr; /* discard CRLF */",
          "new_line_content": "            len = strtol(buf+1,NULL,10);",
          "content_same": false
        },
        {
          "line": 6726,
          "old_api": "lookupCommand",
          "new_api": "fread",
          "old_text": "lookupCommand(argv[0]->ptr)",
          "new_text": "fread(buf,2,1,fp)",
          "old_line_content": "        cmd = lookupCommand(argv[0]->ptr);",
          "new_line_content": "            if (fread(buf,2,1,fp) == 0) goto fmterr; /* discard CRLF */",
          "content_same": false
        },
        {
          "line": 6742,
          "old_api": "proc",
          "new_api": "tryObjectEncoding",
          "old_text": "cmd->proc(fakeClient)",
          "new_text": "tryObjectEncoding(argv[argc-1])",
          "old_line_content": "        cmd->proc(fakeClient);",
          "new_line_content": "            tryObjectEncoding(argv[argc-1]);",
          "content_same": false
        },
        {
          "line": 6748,
          "old_api": "zfree",
          "new_api": "listLength",
          "old_text": "zfree(argv)",
          "new_text": "listLength(fakeClient->reply)",
          "old_line_content": "        zfree(argv);",
          "new_line_content": "        while(listLength(fakeClient->reply))",
          "content_same": false
        },
        {
          "line": 6752,
          "old_api": "zmalloc_used_memory",
          "new_api": "zfree",
          "old_text": "zmalloc_used_memory()",
          "new_text": "zfree(argv)",
          "old_line_content": "            while (zmalloc_used_memory() > server.vm_max_memory) {",
          "new_line_content": "        zfree(argv);",
          "content_same": false
        },
        {
          "line": 6757,
          "old_api": "fclose",
          "new_api": "vmSwapOneObjectBlocking",
          "old_text": "fclose(fp)",
          "new_text": "vmSwapOneObjectBlocking()",
          "old_line_content": "    fclose(fp);",
          "new_line_content": "                if (vmSwapOneObjectBlocking() == REDIS_ERR) break;",
          "content_same": false
        },
        {
          "line": 6762,
          "old_api": "feof",
          "new_api": "freeFakeClient",
          "old_text": "feof(fp)",
          "new_text": "freeFakeClient(fakeClient)",
          "old_line_content": "    if (feof(fp)) {",
          "new_line_content": "    freeFakeClient(fakeClient);",
          "content_same": false
        },
        {
          "line": 6767,
          "old_api": "exit",
          "new_api": "redisLog",
          "old_text": "exit(1)",
          "new_text": "redisLog(REDIS_WARNING,\"Unexpected end of file reading the append only file\")",
          "old_line_content": "    exit(1);",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Unexpected end of file reading the append only file\");",
          "content_same": false
        },
        {
          "line": 6769,
          "old_api": "redisLog",
          "new_api": "strerror",
          "old_text": "redisLog(REDIS_WARNING,\"Bad file format reading the append only file\")",
          "new_text": "strerror(errno)",
          "old_line_content": "    redisLog(REDIS_WARNING,\"Bad file format reading the append only file\");",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Unrecoverable error reading the append only file: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 6788,
          "old_api": "strlen",
          "new_api": "getDecodedObject",
          "old_text": "strlen(buf)",
          "new_text": "getDecodedObject(obj)",
          "old_line_content": "    if (fwrite(buf,strlen(buf),1,fp) == 0) goto err;",
          "new_line_content": "        obj = getDecodedObject(obj);",
          "content_same": false
        },
        {
          "line": 6791,
          "old_api": "fwrite",
          "new_api": "sdslen",
          "old_text": "fwrite(\"\\r\\n\",2,1,fp)",
          "new_text": "sdslen(obj->ptr)",
          "old_line_content": "    if (fwrite(\"\\r\\n\",2,1,fp) == 0) goto err;",
          "new_line_content": "    snprintf(buf,sizeof(buf),\"$%ld\\r\\n\",(long)sdslen(obj->ptr));",
          "content_same": false
        },
        {
          "line": 6792,
          "old_api": "decrRefCount",
          "new_api": "strlen",
          "old_text": "decrRefCount(obj)",
          "new_text": "strlen(buf)",
          "old_line_content": "    if (decrrc) decrRefCount(obj);",
          "new_line_content": "    if (fwrite(buf,strlen(buf),1,fp) == 0) goto err;",
          "content_same": false
        },
        {
          "line": 6795,
          "old_api": "decrRefCount",
          "new_api": "fwrite",
          "old_text": "decrRefCount(obj)",
          "new_text": "fwrite(\"\\r\\n\",2,1,fp)",
          "old_line_content": "    if (decrrc) decrRefCount(obj);",
          "new_line_content": "    if (fwrite(\"\\r\\n\",2,1,fp) == 0) goto err;",
          "content_same": false
        },
        {
          "line": 6833,
          "old_api": "getpid",
          "new_api": "time",
          "old_text": "getpid()",
          "new_text": "time(NULL)",
          "old_line_content": "    snprintf(tmpfile,256,\"temp-rewriteaof-%d.aof\", (int) getpid());",
          "new_line_content": "    time_t now = time(NULL);",
          "content_same": false
        },
        {
          "line": 6855,
          "old_api": "dictNext",
          "new_api": "fwrite",
          "old_text": "dictNext(di)",
          "new_text": "fwrite(selectcmd,sizeof(selectcmd)-1,1,fp)",
          "old_line_content": "        while((de = dictNext(di)) != NULL) {",
          "new_line_content": "        if (fwrite(selectcmd,sizeof(selectcmd)-1,1,fp) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 6894,
          "old_api": "fwrite",
          "new_api": "listNext",
          "old_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "new_text": "listNext(&li)",
          "old_line_content": "                    if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "new_line_content": "                while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 6896,
          "old_api": "fwriteBulk",
          "new_api": "listNodeValue",
          "old_text": "fwriteBulk(fp,eleobj)",
          "new_text": "listNodeValue(ln)",
          "old_line_content": "                    if (fwriteBulk(fp,eleobj) == 0) goto werr;",
          "new_line_content": "                    robj *eleobj = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 6908,
          "old_api": "fwrite",
          "new_api": "dictNext",
          "old_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "new_text": "dictNext(di)",
          "old_line_content": "                    if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "new_line_content": "                while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 6910,
          "old_api": "fwriteBulk",
          "new_api": "dictGetEntryKey",
          "old_text": "fwriteBulk(fp,eleobj)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "                    if (fwriteBulk(fp,eleobj) == 0) goto werr;",
          "new_line_content": "                    robj *eleobj = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 6912,
          "old_api": "dictReleaseIterator",
          "new_api": "fwrite",
          "old_text": "dictReleaseIterator(di)",
          "new_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "old_line_content": "                dictReleaseIterator(di);",
          "new_line_content": "                    if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 6916,
          "old_api": "dictGetIterator",
          "new_api": "dictReleaseIterator",
          "old_text": "dictGetIterator(zs->dict)",
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "                dictIterator *di = dictGetIterator(zs->dict);",
          "new_line_content": "                dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 6925,
          "old_api": "fwriteBulk",
          "new_api": "dictGetEntryKey",
          "old_text": "fwriteBulk(fp,key)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "                    if (fwriteBulk(fp,key) == 0) goto werr;",
          "new_line_content": "                    robj *eleobj = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 6926,
          "old_api": "fwriteBulkDouble",
          "new_api": "dictGetEntryVal",
          "old_text": "fwriteBulkDouble(fp,*score)",
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "                    if (fwriteBulkDouble(fp,*score) == 0) goto werr;",
          "new_line_content": "                    double *score = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 6929,
          "old_api": "dictReleaseIterator",
          "new_api": "fwriteBulk",
          "old_text": "dictReleaseIterator(di)",
          "new_text": "fwriteBulk(fp,key)",
          "old_line_content": "                dictReleaseIterator(di);",
          "new_line_content": "                    if (fwriteBulk(fp,key) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 6931,
          "old_api": "redisAssert",
          "new_api": "fwriteBulk",
          "old_text": "redisAssert(0 != 0)",
          "new_text": "fwriteBulk(fp,eleobj)",
          "old_line_content": "                redisAssert(0 != 0);",
          "new_line_content": "                    if (fwriteBulk(fp,eleobj) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 6942,
          "old_api": "decrRefCount",
          "new_api": "fwrite",
          "old_text": "decrRefCount(o)",
          "new_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "old_line_content": "            if (swapped) decrRefCount(o);",
          "new_line_content": "                if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 6944,
          "old_api": "dictReleaseIterator",
          "new_api": "fwriteBulkLong",
          "old_text": "dictReleaseIterator(di)",
          "new_text": "fwriteBulkLong(fp,expiretime)",
          "old_line_content": "        dictReleaseIterator(di);",
          "new_line_content": "                if (fwriteBulkLong(fp,expiretime) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 6948,
          "old_api": "fflush",
          "new_api": "dictReleaseIterator",
          "old_text": "fflush(fp)",
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "    fflush(fp);",
          "new_line_content": "        dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 6954,
          "old_api": "rename",
          "new_api": "fclose",
          "old_text": "rename(tmpfile,filename)",
          "new_text": "fclose(fp)",
          "old_line_content": "    if (rename(tmpfile,filename) == -1) {",
          "new_line_content": "    fclose(fp);",
          "content_same": false
        },
        {
          "line": 6959,
          "old_api": "redisLog",
          "new_api": "strerror",
          "old_text": "redisLog(REDIS_NOTICE,\"SYNC append only file rewrite performed\")",
          "new_text": "strerror(errno)",
          "old_line_content": "    redisLog(REDIS_NOTICE,\"SYNC append only file rewrite performed\");",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Error moving temp append only file on the final destination: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 6963,
          "old_api": "fclose",
          "new_api": "redisLog",
          "old_text": "fclose(fp)",
          "new_text": "redisLog(REDIS_NOTICE,\"SYNC append only file rewrite performed\")",
          "old_line_content": "    fclose(fp);",
          "new_line_content": "    redisLog(REDIS_NOTICE,\"SYNC append only file rewrite performed\");",
          "content_same": false
        },
        {
          "line": 6991,
          "old_api": "vmReopenSwapFile",
          "new_api": "fork",
          "old_text": "vmReopenSwapFile()",
          "new_text": "fork()",
          "old_line_content": "        if (server.vm_enabled) vmReopenSwapFile();",
          "new_line_content": "    if ((childpid = fork()) == 0) {",
          "content_same": false
        },
        {
          "line": 6995,
          "old_api": "_exit",
          "new_api": "vmReopenSwapFile",
          "old_text": "_exit(0)",
          "new_text": "vmReopenSwapFile()",
          "old_line_content": "            _exit(0);",
          "new_line_content": "        if (server.vm_enabled) vmReopenSwapFile();",
          "content_same": false
        },
        {
          "line": 6997,
          "old_api": "_exit",
          "new_api": "getpid",
          "old_text": "_exit(1)",
          "new_text": "getpid()",
          "old_line_content": "            _exit(1);",
          "new_line_content": "        snprintf(tmpfile,256,\"temp-rewriteaof-bg-%d.aof\", (int) getpid());",
          "content_same": false
        },
        {
          "line": 7029,
          "old_api": "addReply",
          "new_api": "rewriteAppendOnlyFileBackground",
          "old_text": "addReply(c,shared.err)",
          "new_text": "rewriteAppendOnlyFileBackground()",
          "old_line_content": "        addReply(c,shared.err);",
          "new_line_content": "    if (rewriteAppendOnlyFileBackground() == REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 7089,
          "old_api": "fopen",
          "new_api": "zmalloc_enable_thread_safeness",
          "old_text": "fopen(server.vm_swap_file,\"r+b\")",
          "new_text": "zmalloc_enable_thread_safeness()",
          "old_line_content": "    if ((server.vm_fp = fopen(server.vm_swap_file,\"r+b\")) == NULL) {",
          "new_line_content": "        zmalloc_enable_thread_safeness(); /* we need thread safe zmalloc() */",
          "content_same": false
        },
        {
          "line": 7093,
          "old_api": "redisLog",
          "new_api": "fopen",
          "old_text": "redisLog(REDIS_WARNING,\n            \"Impossible to open the swap file: %s. Exiting.\",\n            strerror(errno))",
          "new_text": "fopen(server.vm_swap_file,\"r+b\")",
          "old_line_content": "        redisLog(REDIS_WARNING,",
          "new_line_content": "    if ((server.vm_fp = fopen(server.vm_swap_file,\"r+b\")) == NULL) {",
          "content_same": false
        },
        {
          "line": 7110,
          "old_api": "exit",
          "new_api": "redisLog",
          "old_text": "exit(1)",
          "new_text": "redisLog(REDIS_NOTICE,\"Allocating %lld bytes of swap file\",totsize)",
          "old_line_content": "        exit(1);",
          "new_line_content": "    redisLog(REDIS_NOTICE,\"Allocating %lld bytes of swap file\",totsize);",
          "content_same": false
        },
        {
          "line": 7114,
          "old_api": "zmalloc",
          "new_api": "exit",
          "old_text": "zmalloc((server.vm_pages+7)/8)",
          "new_text": "exit(1)",
          "old_line_content": "    server.vm_bitmap = zmalloc((server.vm_pages+7)/8);",
          "new_line_content": "        exit(1);",
          "content_same": false
        },
        {
          "line": 7121,
          "old_api": "listCreate",
          "new_api": "memset",
          "old_text": "listCreate()",
          "new_text": "memset(server.vm_bitmap,0,(server.vm_pages+7)/8)",
          "old_line_content": "    server.io_processing = listCreate();",
          "new_line_content": "    memset(server.vm_bitmap,0,(server.vm_pages+7)/8);",
          "content_same": false
        },
        {
          "line": 7124,
          "old_api": "pthread_mutex_init",
          "new_api": "listCreate",
          "old_text": "pthread_mutex_init(&server.io_mutex,NULL)",
          "new_text": "listCreate()",
          "old_line_content": "    pthread_mutex_init(&server.io_mutex,NULL);",
          "new_line_content": "    server.io_newjobs = listCreate();",
          "content_same": false
        },
        {
          "line": 7125,
          "old_api": "pthread_mutex_init",
          "new_api": "listCreate",
          "old_text": "pthread_mutex_init(&server.obj_freelist_mutex,NULL)",
          "new_text": "listCreate()",
          "old_line_content": "    pthread_mutex_init(&server.obj_freelist_mutex,NULL);",
          "new_line_content": "    server.io_processing = listCreate();",
          "content_same": false
        },
        {
          "line": 7126,
          "old_api": "pthread_mutex_init",
          "new_api": "listCreate",
          "old_text": "pthread_mutex_init(&server.io_swapfile_mutex,NULL)",
          "new_text": "listCreate()",
          "old_line_content": "    pthread_mutex_init(&server.io_swapfile_mutex,NULL);",
          "new_line_content": "    server.io_processed = listCreate();",
          "content_same": false
        },
        {
          "line": 7128,
          "old_api": "pipe",
          "new_api": "pthread_mutex_init",
          "old_text": "pipe(pipefds)",
          "new_text": "pthread_mutex_init(&server.io_mutex,NULL)",
          "old_line_content": "    if (pipe(pipefds) == -1) {",
          "new_line_content": "    pthread_mutex_init(&server.io_mutex,NULL);",
          "content_same": false
        },
        {
          "line": 7129,
          "old_api": "redisLog",
          "new_api": "pthread_mutex_init",
          "old_text": "redisLog(REDIS_WARNING,\"Unable to intialized VM: pipe(2): %s. Exiting.\"\n            ,strerror(errno))",
          "new_text": "pthread_mutex_init(&server.obj_freelist_mutex,NULL)",
          "old_line_content": "        redisLog(REDIS_WARNING,\"Unable to intialized VM: pipe(2): %s. Exiting.\"",
          "new_line_content": "    pthread_mutex_init(&server.obj_freelist_mutex,NULL);",
          "content_same": false
        },
        {
          "line": 7130,
          "old_api": "strerror",
          "new_api": "pthread_mutex_init",
          "old_text": "strerror(errno)",
          "new_text": "pthread_mutex_init(&server.io_swapfile_mutex,NULL)",
          "old_line_content": "            ,strerror(errno));",
          "new_line_content": "    pthread_mutex_init(&server.io_swapfile_mutex,NULL);",
          "content_same": false
        },
        {
          "line": 7135,
          "old_api": "anetNonBlock",
          "new_api": "exit",
          "old_text": "anetNonBlock(NULL,server.io_ready_pipe_read)",
          "new_text": "exit(1)",
          "old_line_content": "    redisAssert(anetNonBlock(NULL,server.io_ready_pipe_read) != ANET_ERR);",
          "new_line_content": "        exit(1);",
          "content_same": false
        },
        {
          "line": 7142,
          "old_api": "aeCreateFileEvent",
          "new_api": "pthread_attr_getstacksize",
          "old_text": "aeCreateFileEvent(server.el, server.io_ready_pipe_read, AE_READABLE,\n        vmThreadedIOCompletedJob, NULL)",
          "new_text": "pthread_attr_getstacksize(&server.io_threads_attr, &stacksize)",
          "old_line_content": "    if (aeCreateFileEvent(server.el, server.io_ready_pipe_read, AE_READABLE,",
          "new_line_content": "    pthread_attr_getstacksize(&server.io_threads_attr, &stacksize);",
          "content_same": false
        },
        {
          "line": 7144,
          "old_api": "oom",
          "new_api": "pthread_attr_setstacksize",
          "old_text": "oom(\"creating file event\")",
          "new_text": "pthread_attr_setstacksize(&server.io_threads_attr, stacksize)",
          "old_line_content": "        oom(\"creating file event\");",
          "new_line_content": "    pthread_attr_setstacksize(&server.io_threads_attr, stacksize);",
          "content_same": false
        },
        {
          "line": 7275,
          "old_api": "strerror",
          "new_api": "fseeko",
          "old_text": "strerror(errno)",
          "new_text": "fseeko(server.vm_fp,page*server.vm_page_size,SEEK_SET)",
          "old_line_content": "            strerror(errno));",
          "new_line_content": "    if (fseeko(server.vm_fp,page*server.vm_page_size,SEEK_SET) == -1) {",
          "content_same": false
        },
        {
          "line": 7279,
          "old_api": "pthread_mutex_unlock",
          "new_api": "strerror",
          "old_text": "pthread_mutex_unlock(&server.io_swapfile_mutex)",
          "new_text": "strerror(errno)",
          "old_line_content": "    if (server.vm_enabled) pthread_mutex_unlock(&server.io_swapfile_mutex);",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 7292,
          "old_api": "assert",
          "new_api": "rdbSavedObjectPages",
          "old_text": "assert(key->refcount == 1)",
          "new_text": "rdbSavedObjectPages(val,NULL)",
          "old_line_content": "    assert(key->refcount == 1);",
          "new_line_content": "    off_t pages = rdbSavedObjectPages(val,NULL);",
          "content_same": false
        },
        {
          "line": 7317,
          "old_api": "strerror",
          "new_api": "pthread_mutex_lock",
          "old_text": "strerror(errno)",
          "new_text": "pthread_mutex_lock(&server.io_swapfile_mutex)",
          "old_line_content": "            strerror(errno));",
          "new_line_content": "    if (server.vm_enabled) pthread_mutex_lock(&server.io_swapfile_mutex);",
          "content_same": false
        },
        {
          "line": 7318,
          "old_api": "_exit",
          "new_api": "fseeko",
          "old_text": "_exit(1)",
          "new_text": "fseeko(server.vm_fp,page*server.vm_page_size,SEEK_SET)",
          "old_line_content": "        _exit(1);",
          "new_line_content": "    if (fseeko(server.vm_fp,page*server.vm_page_size,SEEK_SET) == -1) {",
          "content_same": false
        },
        {
          "line": 7322,
          "old_api": "strerror",
          "new_api": "_exit",
          "old_text": "strerror(errno)",
          "new_text": "_exit(1)",
          "old_line_content": "        redisLog(REDIS_WARNING, \"Unrecoverable VM problem in vmReadObjectFromSwap(): can't load object from swap file: %s\", strerror(errno));",
          "new_line_content": "        _exit(1);",
          "content_same": false
        },
        {
          "line": 7342,
          "old_api": "vmMarkPagesFree",
          "new_api": "vmReadObjectFromSwap",
          "old_text": "vmMarkPagesFree(key->vm.page,key->vm.usedpages)",
          "new_text": "vmReadObjectFromSwap(key->vm.page,key->vtype)",
          "old_line_content": "        vmMarkPagesFree(key->vm.page,key->vm.usedpages);",
          "new_line_content": "    val = vmReadObjectFromSwap(key->vm.page,key->vtype);",
          "content_same": false
        },
        {
          "line": 7425,
          "old_api": "dictGetRandomKey",
          "new_api": "dictSize",
          "old_text": "dictGetRandomKey(d)",
          "new_text": "dictSize(d)",
          "old_line_content": "            de = dictGetRandomKey(d);",
          "new_line_content": "        if (dictSize(d)) {",
          "content_same": false
        },
        {
          "line": 7430,
          "old_api": "dictSize",
          "new_api": "dictGetEntryKey",
          "old_text": "dictSize(d)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "            asize += (sizeof(struct dictEntry)+elesize)*dictSize(d);",
          "new_line_content": "            ele = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 7435,
          "old_api": "log",
          "new_api": "dictSize",
          "old_text": "log(1+asize)",
          "new_text": "dictSize(d)",
          "old_line_content": "    return (double)asize*log(1+asize);",
          "new_line_content": "            if (z) asize += sizeof(zskiplistNode)*dictSize(d);",
          "content_same": false
        },
        {
          "line": 7491,
          "old_api": "dictGetEntryVal",
          "new_api": "redisLog",
          "old_text": "dictGetEntryVal(best)",
          "new_text": "redisLog(REDIS_DEBUG,\"No swappable key found!\")",
          "old_line_content": "    val = dictGetEntryVal(best);",
          "new_line_content": "        redisLog(REDIS_DEBUG,\"No swappable key found!\");",
          "content_same": false
        },
        {
          "line": 7504,
          "old_api": "vmSwapObjectThreaded",
          "new_api": "dictGetEntryKey",
          "old_text": "vmSwapObjectThreaded(key,val,best_db)",
          "new_text": "dictGetEntryKey(best)",
          "old_line_content": "        vmSwapObjectThreaded(key,val,best_db);",
          "new_line_content": "        key = dictGetEntryKey(best) = newkey;",
          "content_same": false
        },
        {
          "line": 7508,
          "old_api": "dictGetEntryVal",
          "new_api": "vmSwapObjectThreaded",
          "old_text": "dictGetEntryVal(best)",
          "new_text": "vmSwapObjectThreaded(key,val,best_db)",
          "old_line_content": "            dictGetEntryVal(best) = NULL;",
          "new_line_content": "        vmSwapObjectThreaded(key,val,best_db);",
          "content_same": false
        },
        {
          "line": 7569,
          "old_api": "read",
          "new_api": "REDIS_NOTUSED",
          "old_text": "read(fd,buf,1)",
          "new_text": "REDIS_NOTUSED(privdata)",
          "old_line_content": "    while((retval = read(fd,buf,1)) == 1) {",
          "new_line_content": "    REDIS_NOTUSED(privdata);",
          "content_same": false
        },
        {
          "line": 7579,
          "old_api": "listLength",
          "new_api": "redisLog",
          "old_text": "listLength(server.io_processed)",
          "new_text": "redisLog(REDIS_DEBUG,\"Processing I/O completed job\")",
          "old_line_content": "        assert(listLength(server.io_processed) != 0);",
          "new_line_content": "        redisLog(REDIS_DEBUG,\"Processing I/O completed job\");",
          "content_same": false
        },
        {
          "line": 7590,
          "old_api": "freeIOJob",
          "new_api": "listDelNode",
          "old_text": "freeIOJob(j)",
          "new_text": "listDelNode(server.io_processed,ln)",
          "old_line_content": "            freeIOJob(j);",
          "new_line_content": "        listDelNode(server.io_processed,ln);",
          "content_same": false
        },
        {
          "line": 7610,
          "old_api": "dictGetEntryVal",
          "new_api": "redisLog",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "redisLog(REDIS_DEBUG, \"VM: object %s loaded from disk (threaded)\",\n                (unsigned char*) key->ptr)",
          "old_line_content": "            dictGetEntryVal(de) = j->val;",
          "new_line_content": "            redisLog(REDIS_DEBUG, \"VM: object %s loaded from disk (threaded)\",",
          "content_same": false
        },
        {
          "line": 7615,
          "old_api": "handleClientsBlockedOnSwappedKey",
          "new_api": "incrRefCount",
          "old_text": "handleClientsBlockedOnSwappedKey(db,key)",
          "new_text": "incrRefCount(j->val)",
          "old_line_content": "            handleClientsBlockedOnSwappedKey(db,key);",
          "new_line_content": "            incrRefCount(j->val);",
          "content_same": false
        },
        {
          "line": 7625,
          "old_api": "freeIOJob",
          "new_api": "vmFindContiguousPages",
          "old_text": "freeIOJob(j)",
          "new_text": "vmFindContiguousPages(&j->page,j->pages)",
          "old_line_content": "                freeIOJob(j);",
          "new_line_content": "                vmFindContiguousPages(&j->page,j->pages) == REDIS_ERR)",
          "content_same": false
        },
        {
          "line": 7635,
          "old_api": "unlockThreadedIO",
          "new_api": "vmMarkPagesUsed",
          "old_text": "unlockThreadedIO()",
          "new_text": "vmMarkPagesUsed(j->page,j->pages)",
          "old_line_content": "                unlockThreadedIO();",
          "new_line_content": "                vmMarkPagesUsed(j->page,j->pages);",
          "content_same": false
        },
        {
          "line": 7649,
          "old_api": "redisAssert",
          "new_api": "printf",
          "old_text": "redisAssert(key->storage == REDIS_VM_SWAPPING)",
          "new_text": "printf(\"val: %p\\n\",(void*)j->val)",
          "old_line_content": "            redisAssert(key->storage == REDIS_VM_SWAPPING);",
          "new_line_content": "                printf(\"val: %p\\n\",(void*)j->val);",
          "content_same": false
        },
        {
          "line": 7650,
          "old_api": "dictGetEntryVal",
          "new_api": "printf",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "printf(\"val->type: %d\\n\",j->val->type)",
          "old_line_content": "            val = dictGetEntryVal(de);",
          "new_line_content": "                printf(\"val->type: %d\\n\",j->val->type);",
          "content_same": false
        },
        {
          "line": 7667,
          "old_api": "zmalloc_used_memory",
          "new_api": "freeIOJob",
          "old_text": "zmalloc_used_memory()",
          "new_text": "freeIOJob(j)",
          "old_line_content": "                zmalloc_used_memory() > server.vm_max_memory)",
          "new_line_content": "            freeIOJob(j);",
          "content_same": false
        },
        {
          "line": 7671,
          "old_api": "lockThreadedIO",
          "new_api": "zmalloc_used_memory",
          "old_text": "lockThreadedIO()",
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "                    lockThreadedIO();",
          "new_line_content": "                zmalloc_used_memory() > server.vm_max_memory)",
          "content_same": false
        },
        {
          "line": 7676,
          "old_api": "vmSwapOneObjectThreaded",
          "new_api": "listLength",
          "old_text": "vmSwapOneObjectThreaded()",
          "new_text": "listLength(server.io_newjobs)",
          "old_line_content": "                    if (vmSwapOneObjectThreaded() == REDIS_ERR) {",
          "new_line_content": "                    more = listLength(server.io_newjobs) <",
          "content_same": false
        },
        {
          "line": 7698,
          "old_api": "pthread_mutex_unlock",
          "new_api": "pthread_mutex_lock",
          "old_text": "pthread_mutex_unlock(&server.io_mutex)",
          "new_text": "pthread_mutex_lock(&server.io_mutex)",
          "old_line_content": "    pthread_mutex_unlock(&server.io_mutex);",
          "new_line_content": "    pthread_mutex_lock(&server.io_mutex);",
          "content_same": false
        },
        {
          "line": 7724,
          "old_api": "compareStringObjects",
          "new_api": "listNext",
          "old_text": "compareStringObjects(job->key,o)",
          "new_text": "listNext(&li)",
          "old_line_content": "            if (compareStringObjects(job->key,o) == 0) {",
          "new_line_content": "        while ((ln = listNext(&li)) != NULL) {",
          "content_same": false
        },
        {
          "line": 7758,
          "old_api": "usleep",
          "new_api": "unlockThreadedIO",
          "old_text": "usleep(1)",
          "new_text": "unlockThreadedIO()",
          "old_line_content": "                    usleep(1);",
          "new_line_content": "                    unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 7791,
          "old_api": "listLength",
          "new_api": "pthread_self",
          "old_text": "listLength(server.io_newjobs)",
          "new_text": "pthread_self()",
          "old_line_content": "        if (listLength(server.io_newjobs) == 0) {",
          "new_line_content": "    pthread_detach(pthread_self());",
          "content_same": false
        },
        {
          "line": 7794,
          "old_api": "pthread_self",
          "new_api": "lockThreadedIO",
          "old_text": "pthread_self()",
          "new_text": "lockThreadedIO()",
          "old_line_content": "                (long long) pthread_self());",
          "new_line_content": "        lockThreadedIO();",
          "content_same": false
        },
        {
          "line": 7803,
          "old_api": "pthread_self",
          "new_api": "listFirst",
          "old_text": "pthread_self()",
          "new_text": "listFirst(server.io_newjobs)",
          "old_line_content": "        j->thread = pthread_self();",
          "new_line_content": "        ln = listFirst(server.io_newjobs);",
          "content_same": false
        },
        {
          "line": 7805,
          "old_api": "listLast",
          "new_api": "listDelNode",
          "old_text": "listLast(server.io_processing)",
          "new_text": "listDelNode(server.io_newjobs,ln)",
          "old_line_content": "        ln = listLast(server.io_processing); /* We use ln later to remove it */",
          "new_line_content": "        listDelNode(server.io_newjobs,ln);",
          "content_same": false
        },
        {
          "line": 7807,
          "old_api": "redisLog",
          "new_api": "pthread_self",
          "old_text": "redisLog(REDIS_DEBUG,\"Thread %lld got a new job (type %d): %p about key '%s'\",\n            (long long) pthread_self(), j->type, (void*)j, (char*)j->key->ptr)",
          "new_text": "pthread_self()",
          "old_line_content": "        redisLog(REDIS_DEBUG,\"Thread %lld got a new job (type %d): %p about key '%s'\",",
          "new_line_content": "        j->thread = pthread_self();",
          "content_same": false
        },
        {
          "line": 7808,
          "old_api": "pthread_self",
          "new_api": "listAddNodeTail",
          "old_text": "pthread_self()",
          "new_text": "listAddNodeTail(server.io_processing,j)",
          "old_line_content": "            (long long) pthread_self(), j->type, (void*)j, (char*)j->key->ptr);",
          "new_line_content": "        listAddNodeTail(server.io_processing,j);",
          "content_same": false
        },
        {
          "line": 7812,
          "old_api": "vmReadObjectFromSwap",
          "new_api": "pthread_self",
          "old_text": "vmReadObjectFromSwap(j->page,j->key->vtype)",
          "new_text": "pthread_self()",
          "old_line_content": "            j->val = vmReadObjectFromSwap(j->page,j->key->vtype);",
          "new_line_content": "            (long long) pthread_self(), j->type, (void*)j, (char*)j->key->ptr);",
          "content_same": false
        },
        {
          "line": 7816,
          "old_api": "fclose",
          "new_api": "vmReadObjectFromSwap",
          "old_text": "fclose(fp)",
          "new_text": "vmReadObjectFromSwap(j->page,j->key->vtype)",
          "old_line_content": "            fclose(fp);",
          "new_line_content": "            j->val = vmReadObjectFromSwap(j->page,j->key->vtype);",
          "content_same": false
        },
        {
          "line": 7818,
          "old_api": "vmWriteObjectOnSwap",
          "new_api": "fopen",
          "old_text": "vmWriteObjectOnSwap(j->val,j->page)",
          "new_text": "fopen(\"/dev/null\",\"w+\")",
          "old_line_content": "            if (vmWriteObjectOnSwap(j->val,j->page) == REDIS_ERR)",
          "new_line_content": "            FILE *fp = fopen(\"/dev/null\",\"w+\");",
          "content_same": false
        },
        {
          "line": 7827,
          "old_api": "listAddNodeTail",
          "new_api": "redisLog",
          "old_text": "listAddNodeTail(server.io_processed,j)",
          "new_text": "redisLog(REDIS_DEBUG,\"Thread %lld completed the job: %p (key %s)\",\n            (long long) pthread_self(), (void*)j, (char*)j->key->ptr)",
          "old_line_content": "        listAddNodeTail(server.io_processed,j);",
          "new_line_content": "        redisLog(REDIS_DEBUG,\"Thread %lld completed the job: %p (key %s)\",",
          "content_same": false
        },
        {
          "line": 7828,
          "old_api": "unlockThreadedIO",
          "new_api": "pthread_self",
          "old_text": "unlockThreadedIO()",
          "new_text": "pthread_self()",
          "old_line_content": "        unlockThreadedIO();",
          "new_line_content": "            (long long) pthread_self(), (void*)j, (char*)j->key->ptr);",
          "content_same": false
        },
        {
          "line": 7831,
          "old_api": "write",
          "new_api": "listAddNodeTail",
          "old_text": "write(server.io_ready_pipe_write,\"x\",1)",
          "new_text": "listAddNodeTail(server.io_processed,j)",
          "old_line_content": "        assert(write(server.io_ready_pipe_write,\"x\",1) == 1);",
          "new_line_content": "        listAddNodeTail(server.io_processed,j);",
          "content_same": false
        },
        {
          "line": 7844,
          "old_api": "pthread_sigmask",
          "new_api": "sigemptyset",
          "old_text": "pthread_sigmask(SIG_SETMASK, &mask, &omask)",
          "new_text": "sigemptyset(&mask)",
          "old_line_content": "    pthread_sigmask(SIG_SETMASK, &mask, &omask);",
          "new_line_content": "    sigemptyset(&mask);",
          "content_same": false
        },
        {
          "line": 7845,
          "old_api": "pthread_create",
          "new_api": "sigaddset",
          "old_text": "pthread_create(&thread,&server.io_threads_attr,IOThreadEntryPoint,NULL)",
          "new_text": "sigaddset(&mask,SIGCHLD)",
          "old_line_content": "    pthread_create(&thread,&server.io_threads_attr,IOThreadEntryPoint,NULL);",
          "new_line_content": "    sigaddset(&mask,SIGCHLD);",
          "content_same": false
        },
        {
          "line": 7846,
          "old_api": "pthread_sigmask",
          "new_api": "sigaddset",
          "old_text": "pthread_sigmask(SIG_SETMASK, &omask, NULL)",
          "new_text": "sigaddset(&mask,SIGHUP)",
          "old_line_content": "    pthread_sigmask(SIG_SETMASK, &omask, NULL);",
          "new_line_content": "    sigaddset(&mask,SIGHUP);",
          "content_same": false
        },
        {
          "line": 7861,
          "old_api": "unlockThreadedIO",
          "new_api": "listLength",
          "old_text": "unlockThreadedIO()",
          "new_text": "listLength(server.io_newjobs)",
          "old_line_content": "            unlockThreadedIO();",
          "new_line_content": "        if (listLength(server.io_newjobs) == 0 &&",
          "content_same": false
        },
        {
          "line": 7872,
          "old_api": "usleep",
          "new_api": "listLength",
          "old_text": "usleep(1000)",
          "new_text": "listLength(server.io_processed)",
          "old_line_content": "            usleep(1000); /* 1 millisecond */",
          "new_line_content": "        io_processed_len = listLength(server.io_processed);",
          "content_same": false
        },
        {
          "line": 7886,
          "old_api": "_exit",
          "new_api": "fopen",
          "old_text": "_exit(1)",
          "new_text": "fopen(server.vm_swap_file,\"r+b\")",
          "old_line_content": "        _exit(1);",
          "new_line_content": "    server.vm_fp = fopen(server.vm_swap_file,\"r+b\");",
          "content_same": false
        },
        {
          "line": 7888,
          "old_api": "fileno",
          "new_api": "redisLog",
          "old_text": "fileno(server.vm_fp)",
          "new_text": "redisLog(REDIS_WARNING,\"Can't re-open the VM swap file: %s. Exiting.\",\n            server.vm_swap_file)",
          "old_line_content": "    server.vm_fd = fileno(server.vm_fp);",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Can't re-open the VM swap file: %s. Exiting.\",",
          "content_same": false
        },
        {
          "line": 7897,
          "old_api": "spawnIOThread",
          "new_api": "redisLog",
          "old_text": "spawnIOThread()",
          "new_text": "redisLog(REDIS_DEBUG,\"Queued IO Job %p type %d about key '%s'\\n\",\n        (void*)j, j->type, (char*)j->key->ptr)",
          "old_line_content": "        spawnIOThread();",
          "new_line_content": "    redisLog(REDIS_DEBUG,\"Queued IO Job %p type %d about key '%s'\\n\",",
          "content_same": false
        },
        {
          "line": 7955,
          "old_api": "dictFind",
          "new_api": "listAddNodeTail",
          "old_text": "dictFind(c->db->io_keys,key)",
          "new_text": "listAddNodeTail(c->io_keys,key)",
          "old_line_content": "    de = dictFind(c->db->io_keys,key);",
          "new_line_content": "    listAddNodeTail(c->io_keys,key);",
          "content_same": false
        },
        {
          "line": 7965,
          "old_api": "dictGetEntryVal",
          "new_api": "dictAdd",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "dictAdd(c->db->io_keys,key,l)",
          "old_line_content": "        l = dictGetEntryVal(de);",
          "new_line_content": "        retval = dictAdd(c->db->io_keys,key,l);",
          "content_same": false
        },
        {
          "line": 7967,
          "old_api": "listAddNodeTail",
          "new_api": "assert",
          "old_text": "listAddNodeTail(l,c)",
          "new_text": "assert(retval == DICT_OK)",
          "old_line_content": "    listAddNodeTail(l,c);",
          "new_line_content": "        assert(retval == DICT_OK);",
          "content_same": false
        },
        {
          "line": 8033,
          "old_api": "assert",
          "new_api": "listDelNode",
          "old_text": "assert(ln != NULL)",
          "new_text": "listDelNode(c->io_keys,ln)",
          "old_line_content": "    assert(ln != NULL);",
          "new_line_content": "            listDelNode(c->io_keys,ln);",
          "content_same": false
        },
        {
          "line": 8040,
          "old_api": "assert",
          "new_api": "dictFind",
          "old_text": "assert(ln != NULL)",
          "new_text": "dictFind(c->db->io_keys,key)",
          "old_line_content": "    assert(ln != NULL);",
          "new_line_content": "    de = dictFind(c->db->io_keys,key);",
          "content_same": false
        },
        {
          "line": 8041,
          "old_api": "listDelNode",
          "new_api": "assert",
          "old_text": "listDelNode(l,ln)",
          "new_text": "assert(de != NULL)",
          "old_line_content": "    listDelNode(l,ln);",
          "new_line_content": "    assert(de != NULL);",
          "content_same": false
        },
        {
          "line": 8042,
          "old_api": "listLength",
          "new_api": "dictGetEntryVal",
          "old_text": "listLength(l)",
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "    if (listLength(l) == 0)",
          "new_line_content": "    l = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 8043,
          "old_api": "dictDelete",
          "new_api": "listSearchKey",
          "old_text": "dictDelete(c->db->io_keys,key)",
          "new_text": "listSearchKey(l,c)",
          "old_line_content": "        dictDelete(c->db->io_keys,key);",
          "new_line_content": "    ln = listSearchKey(l,c);",
          "content_same": false
        },
        {
          "line": 8045,
          "old_api": "listLength",
          "new_api": "listDelNode",
          "old_text": "listLength(c->io_keys)",
          "new_text": "listDelNode(l,ln)",
          "old_line_content": "    return listLength(c->io_keys) == 0;",
          "new_line_content": "    listDelNode(l,ln);",
          "content_same": false
        },
        {
          "line": 8058,
          "old_api": "listLength",
          "new_api": "dictFind",
          "old_text": "listLength(l)",
          "new_text": "dictFind(db->io_keys,key)",
          "old_line_content": "    len = listLength(l);",
          "new_line_content": "    de = dictFind(db->io_keys,key);",
          "content_same": false
        },
        {
          "line": 8062,
          "old_api": "listFirst",
          "new_api": "listLength",
          "old_text": "listFirst(l)",
          "new_text": "listLength(l)",
          "old_line_content": "        ln = listFirst(l);",
          "new_line_content": "    len = listLength(l);",
          "content_same": false
        },
        {
          "line": 8080,
          "old_api": "addReply",
          "new_api": "strcasecmp",
          "old_text": "addReply(c,shared.err)",
          "new_text": "strcasecmp(c->argv[1]->ptr,\"segfault\")",
          "old_line_content": "            addReply(c,shared.err);",
          "new_line_content": "    if (!strcasecmp(c->argv[1]->ptr,\"segfault\")) {",
          "content_same": false
        },
        {
          "line": 8083,
          "old_api": "emptyDb",
          "new_api": "rdbSave",
          "old_text": "emptyDb()",
          "new_text": "rdbSave(server.dbfilename)",
          "old_line_content": "        emptyDb();",
          "new_line_content": "        if (rdbSave(server.dbfilename) != REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 8084,
          "old_api": "rdbLoad",
          "new_api": "addReply",
          "old_text": "rdbLoad(server.dbfilename)",
          "new_text": "addReply(c,shared.err)",
          "old_line_content": "        if (rdbLoad(server.dbfilename) != REDIS_OK) {",
          "new_line_content": "            addReply(c,shared.err);",
          "content_same": false
        },
        {
          "line": 8088,
          "old_api": "redisLog",
          "new_api": "rdbLoad",
          "old_text": "redisLog(REDIS_WARNING,\"DB reloaded by DEBUG RELOAD\")",
          "new_text": "rdbLoad(server.dbfilename)",
          "old_line_content": "        redisLog(REDIS_WARNING,\"DB reloaded by DEBUG RELOAD\");",
          "new_line_content": "        if (rdbLoad(server.dbfilename) != REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 8092,
          "old_api": "loadAppendOnlyFile",
          "new_api": "redisLog",
          "old_text": "loadAppendOnlyFile(server.appendfilename)",
          "new_text": "redisLog(REDIS_WARNING,\"DB reloaded by DEBUG RELOAD\")",
          "old_line_content": "        if (loadAppendOnlyFile(server.appendfilename) != REDIS_OK) {",
          "new_line_content": "        redisLog(REDIS_WARNING,\"DB reloaded by DEBUG RELOAD\");",
          "content_same": false
        },
        {
          "line": 8096,
          "old_api": "redisLog",
          "new_api": "loadAppendOnlyFile",
          "old_text": "redisLog(REDIS_WARNING,\"Append Only File loaded by DEBUG LOADAOF\")",
          "new_text": "loadAppendOnlyFile(server.appendfilename)",
          "old_line_content": "        redisLog(REDIS_WARNING,\"Append Only File loaded by DEBUG LOADAOF\");",
          "new_line_content": "        if (loadAppendOnlyFile(server.appendfilename) != REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 8103,
          "old_api": "addReply",
          "new_api": "dictFind",
          "old_text": "addReply(c,shared.nokeyerr)",
          "new_text": "dictFind(c->db->dict,c->argv[2])",
          "old_line_content": "            addReply(c,shared.nokeyerr);",
          "new_line_content": "        dictEntry *de = dictFind(c->db->dict,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 8107,
          "old_api": "dictGetEntryVal",
          "new_api": "addReply",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "addReply(c,shared.nokeyerr)",
          "old_line_content": "        val = dictGetEntryVal(de);",
          "new_line_content": "            addReply(c,shared.nokeyerr);",
          "content_same": false
        },
        {
          "line": 8110,
          "old_api": "sdsempty",
          "new_api": "dictGetEntryKey",
          "old_text": "sdsempty()",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "            addReplySds(c,sdscatprintf(sdsempty(),",
          "new_line_content": "        key = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 8114,
          "old_api": "rdbSavedObjectLen",
          "new_api": "sdsempty",
          "old_text": "rdbSavedObjectLen(val,NULL)",
          "new_text": "sdsempty()",
          "old_line_content": "                val->encoding, (long long) rdbSavedObjectLen(val,NULL)));",
          "new_line_content": "            addReplySds(c,sdscatprintf(sdsempty(),",
          "content_same": false
        },
        {
          "line": 8127,
          "old_api": "sdsnew",
          "new_api": "dictFind",
          "old_text": "sdsnew(\"-ERR Virtual Memory is disabled\\r\\n\")",
          "new_text": "dictFind(c->db->dict,c->argv[2])",
          "old_line_content": "            addReplySds(c,sdsnew(\"-ERR Virtual Memory is disabled\\r\\n\"));",
          "new_line_content": "        dictEntry *de = dictFind(c->db->dict,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 8131,
          "old_api": "addReply",
          "new_api": "sdsnew",
          "old_text": "addReply(c,shared.nokeyerr)",
          "new_text": "sdsnew(\"-ERR Virtual Memory is disabled\\r\\n\")",
          "old_line_content": "            addReply(c,shared.nokeyerr);",
          "new_line_content": "            addReplySds(c,sdsnew(\"-ERR Virtual Memory is disabled\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 8135,
          "old_api": "dictGetEntryVal",
          "new_api": "addReply",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "addReply(c,shared.nokeyerr)",
          "old_line_content": "        val = dictGetEntryVal(de);",
          "new_line_content": "            addReply(c,shared.nokeyerr);",
          "content_same": false
        },
        {
          "line": 8138,
          "old_api": "dupStringObject",
          "new_api": "dictGetEntryKey",
          "old_text": "dupStringObject(key)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "            robj *newkey = dupStringObject(key);",
          "new_line_content": "        key = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 8139,
          "old_api": "decrRefCount",
          "new_api": "dictGetEntryVal",
          "old_text": "decrRefCount(key)",
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "            decrRefCount(key);",
          "new_line_content": "        val = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 8144,
          "old_api": "sdsnew",
          "new_api": "dictGetEntryKey",
          "old_text": "sdsnew(\"-ERR This key is not in memory\\r\\n\")",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "            addReplySds(c,sdsnew(\"-ERR This key is not in memory\\r\\n\"));",
          "new_line_content": "            key = dictGetEntryKey(de) = newkey;",
          "content_same": false
        },
        {
          "line": 8149,
          "old_api": "addReply",
          "new_api": "vmSwapObjectBlocking",
          "old_text": "addReply(c,shared.err)",
          "new_text": "vmSwapObjectBlocking(key,val)",
          "old_line_content": "            addReply(c,shared.err);",
          "new_line_content": "        } else if (vmSwapObjectBlocking(key,val) == REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 8174,
          "old_api": "fgets",
          "new_api": "fopen",
          "old_text": "fgets(buf,64,fp)",
          "new_text": "fopen(\"/proc/sys/vm/overcommit_memory\",\"r\")",
          "old_line_content": "    if (fgets(buf,64,fp) == NULL) {",
          "new_line_content": "    FILE *fp = fopen(\"/proc/sys/vm/overcommit_memory\",\"r\");",
          "content_same": false
        },
        {
          "line": 8178,
          "old_api": "fclose",
          "new_api": "fgets",
          "old_text": "fclose(fp)",
          "new_text": "fgets(buf,64,fp)",
          "old_line_content": "    fclose(fp);",
          "new_line_content": "    if (fgets(buf,64,fp) == NULL) {",
          "content_same": false
        },
        {
          "line": 8184,
          "old_api": "linuxOvercommitMemoryValue",
          "new_api": "atoi",
          "old_text": "linuxOvercommitMemoryValue()",
          "new_text": "atoi(buf)",
          "old_line_content": "    if (linuxOvercommitMemoryValue() == 0) {",
          "new_line_content": "    return atoi(buf);",
          "content_same": false
        },
        {
          "line": 8204,
          "old_api": "close",
          "new_api": "open",
          "old_text": "close(fd)",
          "new_text": "open(\"/dev/null\", O_RDWR, 0)",
          "old_line_content": "        if (fd > STDERR_FILENO) close(fd);",
          "new_line_content": "    if ((fd = open(\"/dev/null\", O_RDWR, 0)) != -1) {",
          "content_same": false
        },
        {
          "line": 8207,
          "old_api": "fopen",
          "new_api": "dup2",
          "old_text": "fopen(server.pidfile,\"w\")",
          "new_text": "dup2(fd, STDERR_FILENO)",
          "old_line_content": "    fp = fopen(server.pidfile,\"w\");",
          "new_line_content": "        dup2(fd, STDERR_FILENO);",
          "content_same": false
        },
        {
          "line": 8223,
          "old_api": "exit",
          "new_api": "resetServerSaveParams",
          "old_text": "exit(1)",
          "new_text": "resetServerSaveParams()",
          "old_line_content": "        exit(1);",
          "new_line_content": "        resetServerSaveParams();",
          "content_same": false
        },
        {
          "line": 8227,
          "old_api": "daemonize",
          "new_api": "exit",
          "old_text": "daemonize()",
          "new_text": "exit(1)",
          "old_line_content": "    if (server.daemonize) daemonize();",
          "new_line_content": "        exit(1);",
          "content_same": false
        },
        {
          "line": 8231,
          "old_api": "linuxOvercommitMemoryWarning",
          "new_api": "daemonize",
          "old_text": "linuxOvercommitMemoryWarning()",
          "new_text": "daemonize()",
          "old_line_content": "    linuxOvercommitMemoryWarning();",
          "new_line_content": "    if (server.daemonize) daemonize();",
          "content_same": false
        },
        {
          "line": 8233,
          "old_api": "time",
          "new_api": "redisLog",
          "old_text": "time(NULL)",
          "new_text": "redisLog(REDIS_NOTICE,\"Server started, Redis version \" REDIS_VERSION)",
          "old_line_content": "    start = time(NULL);",
          "new_line_content": "    redisLog(REDIS_NOTICE,\"Server started, Redis version \" REDIS_VERSION);",
          "content_same": false
        },
        {
          "line": 8235,
          "old_api": "loadAppendOnlyFile",
          "new_api": "linuxOvercommitMemoryWarning",
          "old_text": "loadAppendOnlyFile(server.appendfilename)",
          "new_text": "linuxOvercommitMemoryWarning()",
          "old_line_content": "        if (loadAppendOnlyFile(server.appendfilename) == REDIS_OK)",
          "new_line_content": "    linuxOvercommitMemoryWarning();",
          "content_same": false
        },
        {
          "line": 8239,
          "old_api": "time",
          "new_api": "loadAppendOnlyFile",
          "old_text": "time(NULL)",
          "new_text": "loadAppendOnlyFile(server.appendfilename)",
          "old_line_content": "            redisLog(REDIS_NOTICE,\"DB loaded from disk: %ld seconds\",time(NULL)-start);",
          "new_line_content": "        if (loadAppendOnlyFile(server.appendfilename) == REDIS_OK)",
          "content_same": false
        },
        {
          "line": 8242,
          "old_api": "aeSetBeforeSleepProc",
          "new_api": "rdbLoad",
          "old_text": "aeSetBeforeSleepProc(server.el,beforeSleep)",
          "new_text": "rdbLoad(server.dbfilename)",
          "old_line_content": "    aeSetBeforeSleepProc(server.el,beforeSleep);",
          "new_line_content": "        if (rdbLoad(server.dbfilename) == REDIS_OK)",
          "content_same": false
        },
        {
          "line": 8243,
          "old_api": "aeMain",
          "new_api": "time",
          "old_text": "aeMain(server.el)",
          "new_text": "time(NULL)",
          "old_line_content": "    aeMain(server.el);",
          "new_line_content": "            redisLog(REDIS_NOTICE,\"DB loaded from disk: %ld seconds\",time(NULL)-start);",
          "content_same": false
        },
        {
          "line": 8290,
          "old_api": "genRedisInfoString",
          "new_api": "REDIS_NOTUSED",
          "old_text": "genRedisInfoString()",
          "new_text": "REDIS_NOTUSED(info)",
          "old_line_content": "    infostring = genRedisInfoString();",
          "new_line_content": "    REDIS_NOTUSED(info);",
          "content_same": false
        },
        {
          "line": 8295,
          "old_api": "backtrace",
          "new_api": "redisLog",
          "old_text": "backtrace(trace, 100)",
          "new_text": "redisLog(REDIS_WARNING, \"%s\",infostring)",
          "old_line_content": "    trace_size = backtrace(trace, 100);",
          "new_line_content": "    redisLog(REDIS_WARNING, \"%s\",infostring);",
          "content_same": false
        },
        {
          "line": 8307,
          "old_api": "redisLog",
          "new_api": "findFuncName",
          "old_text": "redisLog(REDIS_WARNING,\"%s\", messages[i])",
          "new_text": "findFuncName(trace[i], &offset)",
          "old_line_content": "            redisLog(REDIS_WARNING,\"%s\", messages[i]);",
          "new_line_content": "        char *fn = findFuncName(trace[i], &offset), *p;",
          "content_same": false
        },
        {
          "line": 8309,
          "old_api": "redisLog",
          "new_api": "strchr",
          "old_text": "redisLog(REDIS_WARNING,\"%d redis-server %p %s + %d\", i, trace[i], fn, (unsigned int)offset)",
          "new_text": "strchr(messages[i],'+')",
          "old_line_content": "            redisLog(REDIS_WARNING,\"%d redis-server %p %s + %d\", i, trace[i], fn, (unsigned int)offset);",
          "new_line_content": "        p = strchr(messages[i],'+');",
          "content_same": false
        },
        {
          "line": 8313,
          "old_api": "_exit",
          "new_api": "redisLog",
          "old_text": "_exit(0)",
          "new_text": "redisLog(REDIS_WARNING,\"%d redis-server %p %s + %d\", i, trace[i], fn, (unsigned int)offset)",
          "old_line_content": "    _exit(0);",
          "new_line_content": "            redisLog(REDIS_WARNING,\"%d redis-server %p %s + %d\", i, trace[i], fn, (unsigned int)offset);",
          "content_same": false
        },
        {
          "line": 8328,
          "old_api": "sigaction (SIGBUS, &act, NULL)",
          "new_api": "sigaction (SIGSEGV, &act, NULL)",
          "old_text": "sigaction (SIGBUS, &act, NULL)",
          "new_text": "sigaction (SIGSEGV, &act, NULL)",
          "old_line_content": "    sigaction (SIGBUS, &act, NULL);",
          "new_line_content": "    sigaction (SIGSEGV, &act, NULL);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 8198,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(0)",
          "old_line_content": "     * the 'logfile' is set to 'stdout' in the configuration file",
          "new_line_content": "    if (fork() != 0) exit(0); /* parent exits */",
          "content_same": false
        },
        {
          "line": 8199,
          "old_api": null,
          "new_api": "setsid",
          "old_text": null,
          "new_text": "setsid()",
          "old_line_content": "     * it will not log at all. */",
          "new_line_content": "    setsid(); /* create a new session */",
          "content_same": false
        },
        {
          "line": 4105,
          "old_api": null,
          "new_api": "popGenericCommand",
          "old_text": null,
          "new_text": "popGenericCommand(c,REDIS_TAIL)",
          "old_line_content": "    robj *o;",
          "new_line_content": "    popGenericCommand(c,REDIS_TAIL);",
          "content_same": false
        },
        {
          "line": 6153,
          "old_api": null,
          "new_api": "aeWait",
          "old_text": null,
          "new_text": "aeWait(fd,AE_WRITABLE,1000)",
          "old_line_content": "            size -= nwritten;",
          "new_line_content": "        if (aeWait(fd,AE_WRITABLE,1000) & AE_WRITABLE) {",
          "content_same": false
        },
        {
          "line": 6154,
          "old_api": null,
          "new_api": "write",
          "old_text": null,
          "new_text": "write(fd,ptr,size)",
          "old_line_content": "        }",
          "new_line_content": "            nwritten = write(fd,ptr,size);",
          "content_same": false
        },
        {
          "line": 8205,
          "old_api": null,
          "new_api": "dup2",
          "old_text": null,
          "new_text": "dup2(fd, STDIN_FILENO)",
          "old_line_content": "    }",
          "new_line_content": "        dup2(fd, STDIN_FILENO);",
          "content_same": false
        },
        {
          "line": 8206,
          "old_api": null,
          "new_api": "dup2",
          "old_text": null,
          "new_text": "dup2(fd, STDOUT_FILENO)",
          "old_line_content": "    /* Try to write the pid file */",
          "new_line_content": "        dup2(fd, STDOUT_FILENO);",
          "content_same": false
        },
        {
          "line": 4110,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[2]->ptr)",
          "old_line_content": "    if (o == NULL) {",
          "new_line_content": "    int start = atoi(c->argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 8208,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "    if (fp) {",
          "new_line_content": "        if (fd > STDERR_FILENO) close(fd);",
          "content_same": false
        },
        {
          "line": 4113,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[1])",
          "old_line_content": "        if (o->type != REDIS_LIST) {",
          "new_line_content": "    o = lookupKeyRead(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 6159,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    }",
          "new_line_content": "        if ((time(NULL)-start) > timeout) {",
          "content_same": false
        },
        {
          "line": 8211,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(server.pidfile,\"w\")",
          "old_line_content": "    }",
          "new_line_content": "    fp = fopen(server.pidfile,\"w\");",
          "content_same": false
        },
        {
          "line": 4115,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullmultibulk)",
          "old_line_content": "        } else {",
          "new_line_content": "        addReply(c,shared.nullmultibulk);",
          "content_same": false
        },
        {
          "line": 8213,
          "old_api": null,
          "new_api": "getpid",
          "old_text": null,
          "new_text": "getpid()",
          "old_line_content": "",
          "new_line_content": "        fprintf(fp,\"%d\\n\",getpid());",
          "content_same": false
        },
        {
          "line": 8214,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "int main(int argc, char **argv) {",
          "new_line_content": "        fclose(fp);",
          "content_same": false
        },
        {
          "line": 4122,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(list)",
          "old_line_content": "            /* convert negative indexes */",
          "new_line_content": "            int llen = listLength(list);",
          "content_same": false
        },
        {
          "line": 8221,
          "old_api": null,
          "new_api": "initServerConfig",
          "old_text": null,
          "new_text": "initServerConfig()",
          "old_line_content": "    } else if (argc > 2) {",
          "new_line_content": "    initServerConfig();",
          "content_same": false
        },
        {
          "line": 6173,
          "old_api": null,
          "new_api": "aeWait",
          "old_text": null,
          "new_text": "aeWait(fd,AE_READABLE,1000)",
          "old_line_content": "            size -= nread;",
          "new_line_content": "        if (aeWait(fd,AE_READABLE,1000) & AE_READABLE) {",
          "content_same": false
        },
        {
          "line": 6174,
          "old_api": null,
          "new_api": "read",
          "old_text": null,
          "new_text": "read(fd,ptr,size)",
          "old_line_content": "            totread += nread;",
          "new_line_content": "            nread = read(fd,ptr,size);",
          "content_same": false
        },
        {
          "line": 8224,
          "old_api": null,
          "new_api": "loadServerConfig",
          "old_text": null,
          "new_text": "loadServerConfig(argv[1])",
          "old_line_content": "    } else {",
          "new_line_content": "        loadServerConfig(argv[1]);",
          "content_same": false
        },
        {
          "line": 8226,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\"Usage: ./redis-server [/path/to/redis.conf]\\n\")",
          "old_line_content": "    }",
          "new_line_content": "        fprintf(stderr,\"Usage: ./redis-server [/path/to/redis.conf]\\n\");",
          "content_same": false
        },
        {
          "line": 6180,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    }",
          "new_line_content": "        if ((time(NULL)-start) > timeout) {",
          "content_same": false
        },
        {
          "line": 4135,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.emptymultibulk)",
          "old_line_content": "            rangelen = (end-start)+1;",
          "new_line_content": "                addReply(c,shared.emptymultibulk);",
          "content_same": false
        },
        {
          "line": 8232,
          "old_api": null,
          "new_api": "initServer",
          "old_text": null,
          "new_text": "initServer()",
          "old_line_content": "#endif",
          "new_line_content": "    initServer();",
          "content_same": false
        },
        {
          "line": 8237,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    } else {",
          "new_line_content": "    start = time(NULL);",
          "content_same": false
        },
        {
          "line": 8240,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    }",
          "new_line_content": "            redisLog(REDIS_NOTICE,\"DB loaded from append only file: %ld seconds\",time(NULL)-start);",
          "content_same": false
        },
        {
          "line": 4145,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(ln)",
          "old_line_content": "                ln = ln->next;",
          "new_line_content": "                ele = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 4146,
          "old_api": null,
          "new_api": "addReplyBulkLen",
          "old_text": null,
          "new_text": "addReplyBulkLen(c,ele)",
          "old_line_content": "            }",
          "new_line_content": "                addReplyBulkLen(c,ele);",
          "content_same": false
        },
        {
          "line": 4147,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,ele)",
          "old_line_content": "        }",
          "new_line_content": "                addReply(c,ele);",
          "content_same": false
        },
        {
          "line": 4148,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.crlf)",
          "old_line_content": "    }",
          "new_line_content": "                addReply(c,shared.crlf);",
          "content_same": false
        },
        {
          "line": 8245,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"The server is now ready to accept connections on port %d\", server.port)",
          "old_line_content": "    return 0;",
          "new_line_content": "    redisLog(REDIS_NOTICE,\"The server is now ready to accept connections on port %d\", server.port);",
          "content_same": false
        },
        {
          "line": 8246,
          "old_api": null,
          "new_api": "aeSetBeforeSleepProc",
          "old_text": null,
          "new_text": "aeSetBeforeSleepProc(server.el,beforeSleep)",
          "old_line_content": "}",
          "new_line_content": "    aeSetBeforeSleepProc(server.el,beforeSleep);",
          "content_same": false
        },
        {
          "line": 8247,
          "old_api": null,
          "new_api": "aeMain",
          "old_text": null,
          "new_text": "aeMain(server.el)",
          "old_line_content": "",
          "new_line_content": "    aeMain(server.el);",
          "content_same": false
        },
        {
          "line": 8248,
          "old_api": null,
          "new_api": "aeDeleteEventLoop",
          "old_text": null,
          "new_text": "aeDeleteEventLoop(server.el)",
          "old_line_content": "/* ============================= Backtrace support ========================= */",
          "new_line_content": "    aeDeleteEventLoop(server.el);",
          "content_same": false
        },
        {
          "line": 6195,
          "old_api": null,
          "new_api": "syncRead",
          "old_text": null,
          "new_text": "syncRead(fd,&c,1,timeout)",
          "old_line_content": "            return nread;",
          "new_line_content": "        if (syncRead(fd,&c,1,timeout) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 4157,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[2]->ptr)",
          "old_line_content": "    if (o == NULL) {",
          "new_line_content": "    int start = atoi(c->argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 4160,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "        if (o->type != REDIS_LIST) {",
          "new_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4162,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "        } else {",
          "new_line_content": "        addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 4169,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(list)",
          "old_line_content": "            if (start < 0) start = llen+start;",
          "new_line_content": "            int llen = listLength(list);",
          "content_same": false
        },
        {
          "line": 6217,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(c->reply)",
          "old_line_content": "",
          "new_line_content": "    if (listLength(c->reply) != 0) {",
          "content_same": false
        },
        {
          "line": 6222,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Slave ask for synchronization\")",
          "old_line_content": "        /* Ok a background save is in progress. Let's check if it is a good",
          "new_line_content": "    redisLog(REDIS_NOTICE,\"Slave ask for synchronization\");",
          "content_same": false
        },
        {
          "line": 6233,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(server.slaves,&li)",
          "old_line_content": "        }",
          "new_line_content": "        listRewind(server.slaves,&li);",
          "content_same": false
        },
        {
          "line": 6234,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&li)",
          "old_line_content": "        if (ln) {",
          "new_line_content": "        while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 6241,
          "old_api": null,
          "new_api": "listRelease",
          "old_text": null,
          "new_text": "listRelease(c->reply)",
          "old_line_content": "        } else {",
          "new_line_content": "            listRelease(c->reply);",
          "content_same": false
        },
        {
          "line": 6242,
          "old_api": null,
          "new_api": "listDup",
          "old_text": null,
          "new_text": "listDup(slave->reply)",
          "old_line_content": "            /* No way, we need to wait for the next BGSAVE in order to",
          "new_line_content": "            c->reply = listDup(slave->reply);",
          "content_same": false
        },
        {
          "line": 8292,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\n        \"======= Ooops! Redis %s got signal: -%d- =======\", REDIS_VERSION, sig)",
          "old_line_content": "    /* It's not safe to sdsfree() the returned string under memory",
          "new_line_content": "    redisLog(REDIS_WARNING,",
          "content_same": false
        },
        {
          "line": 4196,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(list,ln)",
          "old_line_content": "        }",
          "new_line_content": "                listDelNode(list,ln);",
          "content_same": false
        },
        {
          "line": 8294,
          "old_api": null,
          "new_api": "genRedisInfoString",
          "old_text": null,
          "new_text": "genRedisInfoString()",
          "old_line_content": "    ",
          "new_line_content": "    infostring = genRedisInfoString();",
          "content_same": false
        },
        {
          "line": 4199,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "",
          "new_line_content": "            addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 6244,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Waiting for end of BGSAVE for SYNC\")",
          "old_line_content": "            c->replstate = REDIS_REPL_WAIT_BGSAVE_START;",
          "new_line_content": "            redisLog(REDIS_NOTICE,\"Waiting for end of BGSAVE for SYNC\");",
          "content_same": false
        },
        {
          "line": 8299,
          "old_api": null,
          "new_api": "backtrace",
          "old_text": null,
          "new_text": "backtrace(trace, 100)",
          "old_line_content": "    }",
          "new_line_content": "    trace_size = backtrace(trace, 100);",
          "content_same": false
        },
        {
          "line": 8301,
          "old_api": null,
          "new_api": "getMcontextEip",
          "old_text": null,
          "new_text": "getMcontextEip(uc)",
          "old_line_content": "",
          "new_line_content": "    if (getMcontextEip(uc) != NULL) {",
          "content_same": false
        },
        {
          "line": 8302,
          "old_api": null,
          "new_api": "getMcontextEip",
          "old_text": null,
          "new_text": "getMcontextEip(uc)",
          "old_line_content": "    for (i=1; i<trace_size; ++i) {",
          "new_line_content": "        trace[1] = getMcontextEip(uc);",
          "content_same": false
        },
        {
          "line": 4207,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "        if (o->type != REDIS_LIST) {",
          "new_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 8304,
          "old_api": null,
          "new_api": "backtrace_symbols",
          "old_text": null,
          "new_text": "backtrace_symbols(trace, trace_size)",
          "old_line_content": "",
          "new_line_content": "    messages = backtrace_symbols(trace, trace_size);",
          "content_same": false
        },
        {
          "line": 4209,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "        } else {",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 6253,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Starting BGSAVE for SYNC\")",
          "old_line_content": "            return;",
          "new_line_content": "        redisLog(REDIS_NOTICE,\"Starting BGSAVE for SYNC\");",
          "content_same": false
        },
        {
          "line": 6254,
          "old_api": null,
          "new_api": "rdbSaveBackground",
          "old_text": null,
          "new_text": "rdbSaveBackground(server.dbfilename)",
          "old_line_content": "        }",
          "new_line_content": "        if (rdbSaveBackground(server.dbfilename) != REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 6255,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Replication failed, can't BGSAVE\")",
          "old_line_content": "        c->replstate = REDIS_REPL_WAIT_BGSAVE_END;",
          "new_line_content": "            redisLog(REDIS_NOTICE,\"Replication failed, can't BGSAVE\");",
          "content_same": false
        },
        {
          "line": 6256,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"-ERR Unalbe to perform background save\\r\\n\")",
          "old_line_content": "    }",
          "new_line_content": "            addReplySds(c,sdsnew(\"-ERR Unalbe to perform background save\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 8310,
          "old_api": null,
          "new_api": "strtol",
          "old_text": null,
          "new_text": "strtol(p+1,NULL,10)",
          "old_line_content": "        }",
          "new_line_content": "        if (!fn || (p && ((unsigned long)strtol(p+1,NULL,10)) < offset)) {",
          "content_same": false
        },
        {
          "line": 8311,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"%s\", messages[i])",
          "old_line_content": "    }",
          "new_line_content": "            redisLog(REDIS_WARNING,\"%s\", messages[i]);",
          "content_same": false
        },
        {
          "line": 4216,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[2]->ptr)",
          "old_line_content": "            if (toremove < 0) {",
          "new_line_content": "            int toremove = atoi(c->argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 6264,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(server.slaves,c)",
          "old_line_content": "static void sendBulkToSlave(aeEventLoop *el, int fd, void *privdata, int mask) {",
          "new_line_content": "    listAddNodeTail(server.slaves,c);",
          "content_same": false
        },
        {
          "line": 8317,
          "old_api": null,
          "new_api": "_exit",
          "old_text": null,
          "new_text": "_exit(0)",
          "old_line_content": "    struct sigaction act;",
          "new_line_content": "    _exit(0);",
          "content_same": false
        },
        {
          "line": 6270,
          "old_api": null,
          "new_api": "REDIS_NOTUSED",
          "old_text": null,
          "new_text": "REDIS_NOTUSED(el)",
          "old_line_content": "",
          "new_line_content": "    REDIS_NOTUSED(el);",
          "content_same": false
        },
        {
          "line": 6271,
          "old_api": null,
          "new_api": "REDIS_NOTUSED",
          "old_text": null,
          "new_text": "REDIS_NOTUSED(mask)",
          "old_line_content": "    if (slave->repldboff == 0) {",
          "new_line_content": "    REDIS_NOTUSED(mask);",
          "content_same": false
        },
        {
          "line": 8323,
          "old_api": null,
          "new_api": "sigemptyset (&act.sa_mask)",
          "old_text": null,
          "new_text": "sigemptyset (&act.sa_mask)",
          "old_line_content": "    act.sa_sigaction = segvHandler;",
          "new_line_content": "    sigemptyset (&act.sa_mask);",
          "content_same": false
        },
        {
          "line": 4229,
          "old_api": null,
          "new_api": "compareStringObjects",
          "old_text": null,
          "new_text": "compareStringObjects(ele,c->argv[3])",
          "old_line_content": "                    if (toremove && removed == toremove) break;",
          "new_line_content": "                if (compareStringObjects(ele,c->argv[3]) == 0) {",
          "content_same": false
        },
        {
          "line": 4230,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(list,ln)",
          "old_line_content": "                }",
          "new_line_content": "                    listDelNode(list,ln);",
          "content_same": false
        },
        {
          "line": 8329,
          "old_api": null,
          "new_api": "sigaction (SIGBUS, &act, NULL)",
          "old_text": null,
          "new_text": "sigaction (SIGBUS, &act, NULL)",
          "old_line_content": "    return;",
          "new_line_content": "    sigaction (SIGBUS, &act, NULL);",
          "content_same": false
        },
        {
          "line": 8330,
          "old_api": null,
          "new_api": "sigaction (SIGFPE, &act, NULL)",
          "old_text": null,
          "new_text": "sigaction (SIGFPE, &act, NULL)",
          "old_line_content": "}",
          "new_line_content": "    sigaction (SIGFPE, &act, NULL);",
          "content_same": false
        },
        {
          "line": 8331,
          "old_api": null,
          "new_api": "sigaction (SIGILL, &act, NULL)",
          "old_text": null,
          "new_text": "sigaction (SIGILL, &act, NULL)",
          "old_line_content": "",
          "new_line_content": "    sigaction (SIGILL, &act, NULL);",
          "content_same": false
        },
        {
          "line": 8332,
          "old_api": null,
          "new_api": "sigaction (SIGBUS, &act, NULL)",
          "old_text": null,
          "new_text": "sigaction (SIGBUS, &act, NULL)",
          "old_line_content": "#include \"staticsymbols.h\"",
          "new_line_content": "    sigaction (SIGBUS, &act, NULL);",
          "content_same": false
        },
        {
          "line": 4237,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "",
          "new_line_content": "            addReplySds(c,sdscatprintf(sdsempty(),\":%d\\r\\n\",removed));",
          "content_same": false
        },
        {
          "line": 6284,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(bulkcount)",
          "old_line_content": "            return;",
          "new_line_content": "        if (write(fd,bulkcount,sdslen(bulkcount)) != (signed)sdslen(bulkcount))",
          "content_same": false
        },
        {
          "line": 6287,
          "old_api": null,
          "new_api": "freeClient",
          "old_text": null,
          "new_text": "freeClient(slave)",
          "old_line_content": "    }",
          "new_line_content": "            freeClient(slave);",
          "content_same": false
        },
        {
          "line": 6290,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(bulkcount)",
          "old_line_content": "    if (buflen <= 0) {",
          "new_line_content": "        sdsfree(bulkcount);",
          "content_same": false
        },
        {
          "line": 6295,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Read error sending DB to slave: %s\",\n            (buflen == 0) ? \"premature EOF\" : strerror(errno))",
          "old_line_content": "    }",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Read error sending DB to slave: %s\",",
          "content_same": false
        },
        {
          "line": 6300,
          "old_api": null,
          "new_api": "write",
          "old_text": null,
          "new_text": "write(fd,buf,buflen)",
          "old_line_content": "        return;",
          "new_line_content": "    if ((nwritten = write(fd,buf,buflen)) == -1) {",
          "content_same": false
        },
        {
          "line": 6301,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_VERBOSE,\"Write error sending DB to slave: %s\",\n            strerror(errno))",
          "old_line_content": "    }",
          "new_line_content": "        redisLog(REDIS_VERBOSE,\"Write error sending DB to slave: %s\",",
          "content_same": false
        },
        {
          "line": 6302,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "    slave->repldboff += nwritten;",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 6303,
          "old_api": null,
          "new_api": "freeClient",
          "old_text": null,
          "new_text": "freeClient(slave)",
          "old_line_content": "    if (slave->repldboff == slave->repldbsize) {",
          "new_line_content": "        freeClient(slave);",
          "content_same": false
        },
        {
          "line": 4260,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "        if (sobj->type != REDIS_LIST) {",
          "new_line_content": "    sobj = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4262,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "        } else {",
          "new_line_content": "        addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 6312,
          "old_api": null,
          "new_api": "aeCreateFileEvent",
          "old_text": null,
          "new_text": "aeCreateFileEvent(server.el, slave->fd, AE_WRITABLE,\n            sendReplyToClient, slave)",
          "old_line_content": "        }",
          "new_line_content": "        if (aeCreateFileEvent(server.el, slave->fd, AE_WRITABLE,",
          "content_same": false
        },
        {
          "line": 4265,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 4268,
          "old_api": null,
          "new_api": "listLast",
          "old_text": null,
          "new_text": "listLast(srclist)",
          "old_line_content": "            } else {",
          "new_line_content": "            listNode *ln = listLast(srclist);",
          "content_same": false
        },
        {
          "line": 6317,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "",
          "new_line_content": "        addReplySds(slave,sdsempty());",
          "content_same": false
        },
        {
          "line": 6318,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Synchronization with slave succeeded\")",
          "old_line_content": "/* This function is called at the end of every backgrond saving.",
          "new_line_content": "        redisLog(REDIS_NOTICE,\"Synchronization with slave succeeded\");",
          "content_same": false
        },
        {
          "line": 4271,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "                list *dstlist;",
          "new_line_content": "                addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 4273,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[2])",
          "old_line_content": "                if (dobj && dobj->type != REDIS_LIST) {",
          "new_line_content": "                robj *dobj = lookupKeyWrite(c->db,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 4278,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "                /* Add the element to the target list (unless it's directly",
          "new_line_content": "                    addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 6333,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(server.slaves,&li)",
          "old_line_content": "        if (slave->replstate == REDIS_REPL_WAIT_BGSAVE_START) {",
          "new_line_content": "    listRewind(server.slaves,&li);",
          "content_same": false
        },
        {
          "line": 6334,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&li)",
          "old_line_content": "            startbgsave = 1;",
          "new_line_content": "    while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 4287,
          "old_api": null,
          "new_api": "createListObject",
          "old_text": null,
          "new_text": "createListObject()",
          "old_line_content": "                    dstlist = dobj->ptr;",
          "new_line_content": "                        dobj = createListObject();",
          "content_same": false
        },
        {
          "line": 4292,
          "old_api": null,
          "new_api": "listAddNodeHead",
          "old_text": null,
          "new_text": "listAddNodeHead(dstlist,ele)",
          "old_line_content": "                /* Send the element to the client as reply as well */",
          "new_line_content": "                    listAddNodeHead(dstlist,ele);",
          "content_same": false
        },
        {
          "line": 4297,
          "old_api": null,
          "new_api": "addReplyBulkLen",
          "old_text": null,
          "new_text": "addReplyBulkLen(c,ele)",
          "old_line_content": "                /* Finally remove the element from the source list */",
          "new_line_content": "                addReplyBulkLen(c,ele);",
          "content_same": false
        },
        {
          "line": 4299,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.crlf)",
          "old_line_content": "                server.dirty++;",
          "new_line_content": "                addReply(c,shared.crlf);",
          "content_same": false
        },
        {
          "line": 6348,
          "old_api": null,
          "new_api": "open",
          "old_text": null,
          "new_text": "open(server.dbfilename,O_RDONLY)",
          "old_line_content": "                continue;",
          "new_line_content": "            if ((slave->repldbfd = open(server.dbfilename,O_RDONLY)) == -1 ||",
          "content_same": false
        },
        {
          "line": 6349,
          "old_api": null,
          "new_api": "redis_fstat",
          "old_text": null,
          "new_text": "redis_fstat(slave->repldbfd,&buf)",
          "old_line_content": "            }",
          "new_line_content": "                redis_fstat(slave->repldbfd,&buf) == -1) {",
          "content_same": false
        },
        {
          "line": 4302,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(srclist,ln)",
          "old_line_content": "    }",
          "new_line_content": "                listDelNode(srclist,ln);",
          "content_same": false
        },
        {
          "line": 6350,
          "old_api": null,
          "new_api": "freeClient",
          "old_text": null,
          "new_text": "freeClient(slave)",
          "old_line_content": "            slave->repldboff = 0;",
          "new_line_content": "                freeClient(slave);",
          "content_same": false
        },
        {
          "line": 6351,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "            slave->repldbsize = buf.st_size;",
          "new_line_content": "                redisLog(REDIS_WARNING,\"SYNC failed. Can't open/stat DB after BGSAVE: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 6357,
          "old_api": null,
          "new_api": "aeDeleteFileEvent",
          "old_text": null,
          "new_text": "aeDeleteFileEvent(server.el,slave->fd,AE_WRITABLE)",
          "old_line_content": "            }",
          "new_line_content": "            aeDeleteFileEvent(server.el,slave->fd,AE_WRITABLE);",
          "content_same": false
        },
        {
          "line": 6358,
          "old_api": null,
          "new_api": "aeCreateFileEvent",
          "old_text": null,
          "new_text": "aeCreateFileEvent(server.el, slave->fd, AE_WRITABLE, sendBulkToSlave, slave)",
          "old_line_content": "        }",
          "new_line_content": "            if (aeCreateFileEvent(server.el, slave->fd, AE_WRITABLE, sendBulkToSlave, slave) == AE_ERR) {",
          "content_same": false
        },
        {
          "line": 6359,
          "old_api": null,
          "new_api": "freeClient",
          "old_text": null,
          "new_text": "freeClient(slave)",
          "old_line_content": "    }",
          "new_line_content": "                freeClient(slave);",
          "content_same": false
        },
        {
          "line": 4317,
          "old_api": null,
          "new_api": "createSetObject",
          "old_text": null,
          "new_text": "createSetObject()",
          "old_line_content": "        if (set->type != REDIS_SET) {",
          "new_line_content": "        set = createSetObject();",
          "content_same": false
        },
        {
          "line": 4319,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(c->argv[1])",
          "old_line_content": "            return;",
          "new_line_content": "        incrRefCount(c->argv[1]);",
          "content_same": false
        },
        {
          "line": 6368,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(server.slaves,&li)",
          "old_line_content": "",
          "new_line_content": "            listRewind(server.slaves,&li);",
          "content_same": false
        },
        {
          "line": 6369,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"SYNC failed. BGSAVE failed\")",
          "old_line_content": "                if (slave->replstate == REDIS_REPL_WAIT_BGSAVE_START)",
          "new_line_content": "            redisLog(REDIS_WARNING,\"SYNC failed. BGSAVE failed\");",
          "content_same": false
        },
        {
          "line": 4326,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(set->ptr,c->argv[2],NULL)",
          "old_line_content": "    } else {",
          "new_line_content": "    if (dictAdd(set->ptr,c->argv[2],NULL) == DICT_OK) {",
          "content_same": false
        },
        {
          "line": 6374,
          "old_api": null,
          "new_api": "freeClient",
          "old_text": null,
          "new_text": "freeClient(slave)",
          "old_line_content": "}",
          "new_line_content": "                    freeClient(slave);",
          "content_same": false
        },
        {
          "line": 4329,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.cone)",
          "old_line_content": "}",
          "new_line_content": "        addReply(c,shared.cone);",
          "content_same": false
        },
        {
          "line": 4331,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "static void sremCommand(redisClient *c) {",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 8188,
          "old_api": null,
          "new_api": "linuxOvercommitMemoryValue",
          "old_text": null,
          "new_text": "linuxOvercommitMemoryValue()",
          "old_line_content": "#endif /* __linux__ */",
          "new_line_content": "    if (linuxOvercommitMemoryValue() == 0) {",
          "content_same": false
        },
        {
          "line": 8189,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"WARNING overcommit_memory is set to 0! Background save may fail under low condition memory. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\")",
          "old_line_content": "",
          "new_line_content": "        redisLog(REDIS_WARNING,\"WARNING overcommit_memory is set to 0! Background save may fail under low condition memory. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\");",
          "content_same": false
        },
        {
          "line": 4338,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "        if (set->type != REDIS_SET) {",
          "new_line_content": "    set = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 6387,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Unable to connect to MASTER: %s\",\n            strerror(errno))",
          "old_line_content": "",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Unable to connect to MASTER: %s\",",
          "content_same": false
        },
        {
          "line": 4340,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "            return;",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 6388,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "    /* AUTH with the master if required. */",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 4343,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "            server.dirty++;",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 4346,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(set->ptr,c->argv[2])",
          "old_line_content": "        } else {",
          "new_line_content": "        if (dictDelete(set->ptr,c->argv[2]) == DICT_OK) {",
          "content_same": false
        },
        {
          "line": 6395,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(server.masterauth)",
          "old_line_content": "            return REDIS_ERR;",
          "new_line_content": "    \tif (syncWrite(fd, authcmd, strlen(server.masterauth)+7, 5) == -1) {",
          "content_same": false
        },
        {
          "line": 4348,
          "old_api": null,
          "new_api": "dictResize",
          "old_text": null,
          "new_text": "dictResize(set->ptr)",
          "old_line_content": "        }",
          "new_line_content": "            if (htNeedsResize(set->ptr)) dictResize(set->ptr);",
          "content_same": false
        },
        {
          "line": 4349,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.cone)",
          "old_line_content": "    }",
          "new_line_content": "            addReply(c,shared.cone);",
          "content_same": false
        },
        {
          "line": 6396,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "    \t}",
          "new_line_content": "            close(fd);",
          "content_same": false
        },
        {
          "line": 4351,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "",
          "new_line_content": "            addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 6397,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Unable to AUTH to MASTER: %s\",\n                strerror(errno))",
          "old_line_content": "        /* Read the AUTH result.  */",
          "new_line_content": "            redisLog(REDIS_WARNING,\"Unable to AUTH to MASTER: %s\",",
          "content_same": false
        },
        {
          "line": 6402,
          "old_api": null,
          "new_api": "syncReadLine",
          "old_text": null,
          "new_text": "syncReadLine(fd,buf,1024,3600)",
          "old_line_content": "            return REDIS_ERR;",
          "new_line_content": "        if (syncReadLine(fd,buf,1024,3600) == -1) {",
          "content_same": false
        },
        {
          "line": 6403,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "        }",
          "new_line_content": "            close(fd);",
          "content_same": false
        },
        {
          "line": 6404,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"I/O error reading auth result from MASTER: %s\",\n                strerror(errno))",
          "old_line_content": "        if (buf[0] != '+') {",
          "new_line_content": "            redisLog(REDIS_WARNING,\"I/O error reading auth result from MASTER: %s\",",
          "content_same": false
        },
        {
          "line": 4359,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "     * raise an error */",
          "new_line_content": "    srcset = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4360,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[2])",
          "old_line_content": "    if (srcset == NULL || srcset->type != REDIS_SET) {",
          "new_line_content": "    dstset = lookupKeyWrite(c->db,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 6409,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "    }",
          "new_line_content": "            close(fd);",
          "content_same": false
        },
        {
          "line": 6410,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Cannot AUTH to MASTER, is the masterauth password correct?\")",
          "old_line_content": "",
          "new_line_content": "            redisLog(REDIS_WARNING,\"Cannot AUTH to MASTER, is the masterauth password correct?\");",
          "content_same": false
        },
        {
          "line": 4365,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, srcset ? shared.wrongtypeerr : shared.czero)",
          "old_line_content": "    if (dstset && dstset->type != REDIS_SET) {",
          "new_line_content": "        addReply(c, srcset ? shared.wrongtypeerr : shared.czero);",
          "content_same": false
        },
        {
          "line": 6416,
          "old_api": null,
          "new_api": "syncWrite",
          "old_text": null,
          "new_text": "syncWrite(fd,\"SYNC \\r\\n\",7,5)",
          "old_line_content": "        return REDIS_ERR;",
          "new_line_content": "    if (syncWrite(fd,\"SYNC \\r\\n\",7,5) == -1) {",
          "content_same": false
        },
        {
          "line": 6417,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "    }",
          "new_line_content": "        close(fd);",
          "content_same": false
        },
        {
          "line": 6418,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"I/O error writing to MASTER: %s\",\n            strerror(errno))",
          "old_line_content": "    /* Read the bulk write count */",
          "new_line_content": "        redisLog(REDIS_WARNING,\"I/O error writing to MASTER: %s\",",
          "content_same": false
        },
        {
          "line": 4374,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(srcset->ptr,c->argv[3])",
          "old_line_content": "    }",
          "new_line_content": "    if (dictDelete(srcset->ptr,c->argv[3]) == DICT_ERR) {",
          "content_same": false
        },
        {
          "line": 6423,
          "old_api": null,
          "new_api": "syncReadLine",
          "old_text": null,
          "new_text": "syncReadLine(fd,buf,1024,3600)",
          "old_line_content": "        return REDIS_ERR;",
          "new_line_content": "    if (syncReadLine(fd,buf,1024,3600) == -1) {",
          "content_same": false
        },
        {
          "line": 4376,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "    /* Add the element to the destination set */",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 6424,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "    }",
          "new_line_content": "        close(fd);",
          "content_same": false
        },
        {
          "line": 6425,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"I/O error reading bulk count from MASTER: %s\",\n            strerror(errno))",
          "old_line_content": "    if (buf[0] != '$') {",
          "new_line_content": "        redisLog(REDIS_WARNING,\"I/O error reading bulk count from MASTER: %s\",",
          "content_same": false
        },
        {
          "line": 4386,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(dstset->ptr,c->argv[3],NULL)",
          "old_line_content": "",
          "new_line_content": "    if (dictAdd(dstset->ptr,c->argv[3],NULL) == DICT_OK)",
          "content_same": false
        },
        {
          "line": 4387,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(c->argv[3])",
          "old_line_content": "static void sismemberCommand(redisClient *c) {",
          "new_line_content": "        incrRefCount(c->argv[3]);",
          "content_same": false
        },
        {
          "line": 4388,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.cone)",
          "old_line_content": "    robj *set;",
          "new_line_content": "    addReply(c,shared.cone);",
          "content_same": false
        },
        {
          "line": 6435,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Receiving %d bytes data dump from MASTER\",dumpsize)",
          "old_line_content": "    if (dfd == -1) {",
          "new_line_content": "    redisLog(REDIS_NOTICE,\"Receiving %d bytes data dump from MASTER\",dumpsize);",
          "content_same": false
        },
        {
          "line": 6438,
          "old_api": null,
          "new_api": "open",
          "old_text": null,
          "new_text": "open(tmpfile,O_CREAT|O_WRONLY,0644)",
          "old_line_content": "        return REDIS_ERR;",
          "new_line_content": "    dfd = open(tmpfile,O_CREAT|O_WRONLY,0644);",
          "content_same": false
        },
        {
          "line": 6440,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "    while(dumpsize) {",
          "new_line_content": "        close(fd);",
          "content_same": false
        },
        {
          "line": 6441,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "        int nread, nwritten;",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Opening the temp file needed for MASTER <-> SLAVE synchronization: %s\",strerror(errno));",
          "content_same": false
        },
        {
          "line": 4394,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[1])",
          "old_line_content": "        if (set->type != REDIS_SET) {",
          "new_line_content": "    set = lookupKeyRead(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4396,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "            return;",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 6449,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"I/O error trying to sync with MASTER: %s\",\n                strerror(errno))",
          "old_line_content": "            return REDIS_ERR;",
          "new_line_content": "            redisLog(REDIS_WARNING,\"I/O error trying to sync with MASTER: %s\",",
          "content_same": false
        },
        {
          "line": 4402,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(set->ptr,c->argv[2])",
          "old_line_content": "    }",
          "new_line_content": "        if (dictFind(set->ptr,c->argv[2]))",
          "content_same": false
        },
        {
          "line": 4403,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.cone)",
          "old_line_content": "}",
          "new_line_content": "            addReply(c,shared.cone);",
          "content_same": false
        },
        {
          "line": 6450,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "        }",
          "new_line_content": "                strerror(errno));",
          "content_same": false
        },
        {
          "line": 4405,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "static void scardCommand(redisClient *c) {",
          "new_line_content": "            addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 6452,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(dfd)",
          "old_line_content": "        if (nwritten == -1) {",
          "new_line_content": "            close(dfd);",
          "content_same": false
        },
        {
          "line": 6457,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "        }",
          "new_line_content": "            redisLog(REDIS_WARNING,\"Write error writing to the DB dump file needed for MASTER <-> SLAVE synchrnonization: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 6458,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "        dumpsize -= nread;",
          "new_line_content": "            close(fd);",
          "content_same": false
        },
        {
          "line": 6459,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(dfd)",
          "old_line_content": "    }",
          "new_line_content": "            close(dfd);",
          "content_same": false
        },
        {
          "line": 4413,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[1])",
          "old_line_content": "    } else {",
          "new_line_content": "    o = lookupKeyRead(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 6465,
          "old_api": null,
          "new_api": "rename",
          "old_text": null,
          "new_text": "rename(tmpfile,server.dbfilename)",
          "old_line_content": "        return REDIS_ERR;",
          "new_line_content": "    if (rename(tmpfile,server.dbfilename) == -1) {",
          "content_same": false
        },
        {
          "line": 6466,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "    }",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Failed trying to rename the temp DB into dump.rdb in MASTER <-> SLAVE synchronization: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 4422,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "}",
          "new_line_content": "            addReplySds(c,sdscatprintf(sdsempty(),\":%lu\\r\\n\",",
          "content_same": false
        },
        {
          "line": 4423,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(s)",
          "old_line_content": "",
          "new_line_content": "                dictSize(s)));",
          "content_same": false
        },
        {
          "line": 6471,
          "old_api": null,
          "new_api": "emptyDb",
          "old_text": null,
          "new_text": "emptyDb()",
          "old_line_content": "        return REDIS_ERR;",
          "new_line_content": "    emptyDb();",
          "content_same": false
        },
        {
          "line": 6472,
          "old_api": null,
          "new_api": "rdbLoad",
          "old_text": null,
          "new_text": "rdbLoad(server.dbfilename)",
          "old_line_content": "    }",
          "new_line_content": "    if (rdbLoad(server.dbfilename) != REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 6474,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "    server.master->flags |= REDIS_MASTER;",
          "new_line_content": "        close(fd);",
          "content_same": false
        },
        {
          "line": 6477,
          "old_api": null,
          "new_api": "createClient",
          "old_text": null,
          "new_text": "createClient(fd)",
          "old_line_content": "    return REDIS_OK;",
          "new_line_content": "    server.master = createClient(fd);",
          "content_same": false
        },
        {
          "line": 4432,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "        if (set->type != REDIS_SET) {",
          "new_line_content": "    set = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4434,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "            return;",
          "new_line_content": "        addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 4437,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "        if (de == NULL) {",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 6485,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr,\"no\")",
          "old_line_content": "            server.masterhost = NULL;",
          "new_line_content": "    if (!strcasecmp(c->argv[1]->ptr,\"no\") &&",
          "content_same": false
        },
        {
          "line": 6490,
          "old_api": null,
          "new_api": "freeClient",
          "old_text": null,
          "new_text": "freeClient(server.master)",
          "old_line_content": "    } else {",
          "new_line_content": "            if (server.master) freeClient(server.master);",
          "content_same": false
        },
        {
          "line": 4447,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,ele)",
          "old_line_content": "            server.dirty++;",
          "new_line_content": "            addReply(c,ele);",
          "content_same": false
        },
        {
          "line": 4448,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.crlf)",
          "old_line_content": "        }",
          "new_line_content": "            addReply(c,shared.crlf);",
          "content_same": false
        },
        {
          "line": 4449,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(set->ptr,ele)",
          "old_line_content": "    }",
          "new_line_content": "            dictDelete(set->ptr,ele);",
          "content_same": false
        },
        {
          "line": 4450,
          "old_api": null,
          "new_api": "dictResize",
          "old_text": null,
          "new_text": "dictResize(set->ptr)",
          "old_line_content": "}",
          "new_line_content": "            if (htNeedsResize(set->ptr)) dictResize(set->ptr);",
          "content_same": false
        },
        {
          "line": 6495,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(server.masterhost)",
          "old_line_content": "        server.replstate = REDIS_REPL_CONNECT;",
          "new_line_content": "        sdsfree(server.masterhost);",
          "content_same": false
        },
        {
          "line": 6497,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[2]->ptr)",
          "old_line_content": "            server.masterhost, server.masterport);",
          "new_line_content": "        server.masterport = atoi(c->argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 6498,
          "old_api": null,
          "new_api": "freeClient",
          "old_text": null,
          "new_text": "freeClient(server.master)",
          "old_line_content": "    }",
          "new_line_content": "        if (server.master) freeClient(server.master);",
          "content_same": false
        },
        {
          "line": 6500,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"SLAVE OF %s:%d enabled (user request)\",\n            server.masterhost, server.masterport)",
          "old_line_content": "}",
          "new_line_content": "        redisLog(REDIS_NOTICE,\"SLAVE OF %s:%d enabled (user request)\",",
          "content_same": false
        },
        {
          "line": 6503,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "",
          "new_line_content": "    addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 4460,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[1])",
          "old_line_content": "        if (set->type != REDIS_SET) {",
          "new_line_content": "    set = lookupKeyRead(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4462,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "            return;",
          "new_line_content": "        addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 4465,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "        if (de == NULL) {",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 6518,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(head)",
          "old_line_content": "        return REDIS_OK;",
          "new_line_content": "        o = listNodeValue(head);",
          "content_same": false
        },
        {
          "line": 6519,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(server.objfreelist,head)",
          "old_line_content": "    } else {",
          "new_line_content": "        listDelNode(server.objfreelist,head);",
          "content_same": false
        },
        {
          "line": 6521,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(o)",
          "old_line_content": "        return REDIS_ERR;",
          "new_line_content": "        zfree(o);",
          "content_same": false
        },
        {
          "line": 4474,
          "old_api": null,
          "new_api": "addReplyBulkLen",
          "old_text": null,
          "new_text": "addReplyBulkLen(c,ele)",
          "old_line_content": "    }",
          "new_line_content": "            addReplyBulkLen(c,ele);",
          "content_same": false
        },
        {
          "line": 4475,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,ele)",
          "old_line_content": "}",
          "new_line_content": "            addReply(c,ele);",
          "content_same": false
        },
        {
          "line": 4476,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.crlf)",
          "old_line_content": "",
          "new_line_content": "            addReply(c,shared.crlf);",
          "content_same": false
        },
        {
          "line": 6524,
          "old_api": null,
          "new_api": "pthread_mutex_unlock",
          "old_text": null,
          "new_text": "pthread_mutex_unlock(&server.obj_freelist_mutex)",
          "old_line_content": "",
          "new_line_content": "        if (server.vm_enabled) pthread_mutex_unlock(&server.obj_freelist_mutex);",
          "content_same": false
        },
        {
          "line": 4488,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(dict*)*setsnum)",
          "old_line_content": "    unsigned long j, cardinality = 0;",
          "new_line_content": "    dict **dv = zmalloc(sizeof(dict*)*setsnum);",
          "content_same": false
        },
        {
          "line": 6541,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "        for (j = 0; j < server.dbnum; j++) {",
          "new_line_content": "    while (server.maxmemory && zmalloc_used_memory() > server.maxmemory) {",
          "content_same": false
        },
        {
          "line": 6544,
          "old_api": null,
          "new_api": "tryFreeOneObjectFromFreelist",
          "old_text": null,
          "new_text": "tryFreeOneObjectFromFreelist()",
          "old_line_content": "            struct dictEntry *de;",
          "new_line_content": "        if (tryFreeOneObjectFromFreelist() == REDIS_OK) continue;",
          "content_same": false
        },
        {
          "line": 4498,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,setskeys[j])",
          "old_line_content": "            if (dstkey) {",
          "new_line_content": "                    lookupKeyWrite(c->db,setskeys[j]) :",
          "content_same": false
        },
        {
          "line": 6550,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(server.db[j].expires)",
          "old_line_content": "                for (k = 0; k < 3; k++) {",
          "new_line_content": "            if (dictSize(server.db[j].expires)) {",
          "content_same": false
        },
        {
          "line": 4505,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "            return;",
          "new_line_content": "                addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 4507,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullmultibulk)",
          "old_line_content": "        if (setobj->type != REDIS_SET) {",
          "new_line_content": "                addReply(c,shared.nullmultibulk);",
          "content_same": false
        },
        {
          "line": 6557,
          "old_api": null,
          "new_api": "dictGetRandomKey",
          "old_text": null,
          "new_text": "dictGetRandomKey(server.db[j].expires)",
          "old_line_content": "                        minttl = t;",
          "new_line_content": "                    de = dictGetRandomKey(server.db[j].expires);",
          "content_same": false
        },
        {
          "line": 6558,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "                    }",
          "new_line_content": "                    t = (time_t) dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 4512,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(dv)",
          "old_line_content": "        dv[j] = setobj->ptr;",
          "new_line_content": "            zfree(dv);",
          "content_same": false
        },
        {
          "line": 4513,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "    }",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 6564,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(server.db+j,minkey)",
          "old_line_content": "    }",
          "new_line_content": "                deleteKey(server.db+j,minkey);",
          "content_same": false
        },
        {
          "line": 4520,
          "old_api": null,
          "new_api": "qsort",
          "old_text": null,
          "new_text": "qsort(dv,setsnum,sizeof(dict*),qsortCompareSetsByCardinality)",
          "old_line_content": "     * the intersection set size, so we use a trick, append an empty object",
          "new_line_content": "    qsort(dv,setsnum,sizeof(dict*),qsortCompareSetsByCardinality);",
          "content_same": false
        },
        {
          "line": 6574,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "    robj *tmpargv[3];",
          "new_line_content": "    sds buf = sdsempty();",
          "content_same": false
        },
        {
          "line": 4528,
          "old_api": null,
          "new_api": "createObject",
          "old_text": null,
          "new_text": "createObject(REDIS_STRING,NULL)",
          "old_line_content": "        /* If we have a target key where to store the resulting set",
          "new_line_content": "        lenobj = createObject(REDIS_STRING,NULL);",
          "content_same": false
        },
        {
          "line": 4529,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,lenobj)",
          "old_line_content": "         * create this key with an empty set inside */",
          "new_line_content": "        addReply(c,lenobj);",
          "content_same": false
        },
        {
          "line": 4534,
          "old_api": null,
          "new_api": "createSetObject",
          "old_text": null,
          "new_text": "createSetObject()",
          "old_line_content": "     * the element against all the other sets, if at least one set does",
          "new_line_content": "        dstset = createSetObject();",
          "content_same": false
        },
        {
          "line": 6585,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(seldb,sizeof(seldb),\"%d\",dictid)",
          "old_line_content": "    }",
          "new_line_content": "        snprintf(seldb,sizeof(seldb),\"%d\",dictid);",
          "content_same": false
        },
        {
          "line": 6586,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(buf,\"*2\\r\\n$6\\r\\nSELECT\\r\\n$%lu\\r\\n%s\\r\\n\",\n            (unsigned long)strlen(seldb),seldb)",
          "old_line_content": "",
          "new_line_content": "        buf = sdscatprintf(buf,\"*2\\r\\n$6\\r\\nSELECT\\r\\n$%lu\\r\\n%s\\r\\n\",",
          "content_same": false
        },
        {
          "line": 6587,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(seldb)",
          "old_line_content": "    /* \"Fix\" the argv vector if the command is EXPIRE. We want to translate",
          "new_line_content": "            (unsigned long)strlen(seldb),seldb);",
          "content_same": false
        },
        {
          "line": 4540,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(dv[0])",
          "old_line_content": "",
          "new_line_content": "    di = dictGetIterator(dv[0]);",
          "content_same": false
        },
        {
          "line": 4546,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "        if (!dstkey) {",
          "new_line_content": "            if (dictFind(dv[j],dictGetEntryKey(de)) == NULL) break;",
          "content_same": false
        },
        {
          "line": 6598,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(argv[1])",
          "old_line_content": "        argv = tmpargv;",
          "new_line_content": "        incrRefCount(argv[1]);",
          "content_same": false
        },
        {
          "line": 4551,
          "old_api": null,
          "new_api": "addReplyBulkLen",
          "old_text": null,
          "new_text": "addReplyBulkLen(c,ele)",
          "old_line_content": "        } else {",
          "new_line_content": "            addReplyBulkLen(c,ele);",
          "content_same": false
        },
        {
          "line": 6599,
          "old_api": null,
          "new_api": "strtol",
          "old_text": null,
          "new_text": "strtol(argv[2]->ptr,NULL,10)",
          "old_line_content": "    }",
          "new_line_content": "        when = time(NULL)+strtol(argv[2]->ptr,NULL,10);",
          "content_same": false
        },
        {
          "line": 6600,
          "old_api": null,
          "new_api": "createObject",
          "old_text": null,
          "new_text": "createObject(REDIS_STRING,\n            sdscatprintf(sdsempty(),\"%ld\",when))",
          "old_line_content": "",
          "new_line_content": "        tmpargv[2] = createObject(REDIS_STRING,",
          "content_same": false
        },
        {
          "line": 6601,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "    /* Append the actual command */",
          "new_line_content": "            sdscatprintf(sdsempty(),\"%ld\",when));",
          "content_same": false
        },
        {
          "line": 4557,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(ele)",
          "old_line_content": "",
          "new_line_content": "            incrRefCount(ele);",
          "content_same": false
        },
        {
          "line": 6611,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(o->ptr)",
          "old_line_content": "    }",
          "new_line_content": "        buf = sdscatprintf(buf,\"$%lu\\r\\n\",(unsigned long)sdslen(o->ptr));",
          "content_same": false
        },
        {
          "line": 4564,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(c->db,dstkey)",
          "old_line_content": "",
          "new_line_content": "        deleteKey(c->db,dstkey);",
          "content_same": false
        },
        {
          "line": 4565,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(c->db->dict,dstkey,dstset)",
          "old_line_content": "    if (!dstkey) {",
          "new_line_content": "        dictAdd(c->db->dict,dstkey,dstset);",
          "content_same": false
        },
        {
          "line": 6612,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(o->ptr)",
          "old_line_content": "",
          "new_line_content": "        buf = sdscatlen(buf,o->ptr,sdslen(o->ptr));",
          "content_same": false
        },
        {
          "line": 6613,
          "old_api": null,
          "new_api": "sdscatlen",
          "old_text": null,
          "new_text": "sdscatlen(buf,\"\\r\\n\",2)",
          "old_line_content": "    /* Free the objects from the modified argv for EXPIREAT */",
          "new_line_content": "        buf = sdscatlen(buf,\"\\r\\n\",2);",
          "content_same": false
        },
        {
          "line": 6614,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(o)",
          "old_line_content": "    if (cmd->proc == expireCommand) {",
          "new_line_content": "        decrRefCount(o);",
          "content_same": false
        },
        {
          "line": 4570,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "        server.dirty++;",
          "new_line_content": "        lenobj->ptr = sdscatprintf(sdsempty(),\"*%lu\\r\\n\",cardinality);",
          "content_same": false
        },
        {
          "line": 6620,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(argv[j])",
          "old_line_content": "     * at least if the filesystem we are writing is a real physical one.",
          "new_line_content": "            decrRefCount(argv[j]);",
          "content_same": false
        },
        {
          "line": 4573,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize((dict*)dstset->ptr)",
          "old_line_content": "}",
          "new_line_content": "            dictSize((dict*)dstset->ptr)));",
          "content_same": false
        },
        {
          "line": 6628,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(buf)",
          "old_line_content": "         * working as expected. */",
          "new_line_content": "     nwritten = write(server.appendfd,buf,sdslen(buf));",
          "content_same": false
        },
        {
          "line": 6629,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(buf)",
          "old_line_content": "         if (nwritten == -1) {",
          "new_line_content": "     if (nwritten != (signed)sdslen(buf)) {",
          "content_same": false
        },
        {
          "line": 4584,
          "old_api": null,
          "new_api": "sinterGenericCommand",
          "old_text": null,
          "new_text": "sinterGenericCommand(c,c->argv+2,c->argc-2,c->argv[1])",
          "old_line_content": "#define REDIS_OP_DIFF 1",
          "new_line_content": "    sinterGenericCommand(c,c->argv+2,c->argc-2,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 6636,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "    /* If a background append only file rewriting is in progress we want to",
          "new_line_content": "            redisLog(REDIS_WARNING,\"Exiting on short write while writing to the append-only file: %s\",strerror(errno));",
          "content_same": false
        },
        {
          "line": 6638,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "     * in a buffer, so that when the child process will do its work we",
          "new_line_content": "         exit(1);",
          "content_same": false
        },
        {
          "line": 4591,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(dict*)*setsnum)",
          "old_line_content": "    int j, cardinality = 0;",
          "new_line_content": "    dict **dv = zmalloc(sizeof(dict*)*setsnum);",
          "content_same": false
        },
        {
          "line": 6645,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(buf)",
          "old_line_content": "    if (server.appendfsync == APPENDFSYNC_ALWAYS ||",
          "new_line_content": "        server.bgrewritebuf = sdscatlen(server.bgrewritebuf,buf,sdslen(buf));",
          "content_same": false
        },
        {
          "line": 6647,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(buf)",
          "old_line_content": "         now-server.lastfsync > 1))",
          "new_line_content": "    sdsfree(buf);",
          "content_same": false
        },
        {
          "line": 6648,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    {",
          "new_line_content": "    now = time(NULL);",
          "content_same": false
        },
        {
          "line": 4601,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,setskeys[j])",
          "old_line_content": "            continue;",
          "new_line_content": "                    lookupKeyWrite(c->db,setskeys[j]) :",
          "content_same": false
        },
        {
          "line": 4602,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,setskeys[j])",
          "old_line_content": "        }",
          "new_line_content": "                    lookupKeyRead(c->db,setskeys[j]);",
          "content_same": false
        },
        {
          "line": 6653,
          "old_api": null,
          "new_api": "fsync",
          "old_text": null,
          "new_text": "fsync(server.appendfd)",
          "old_line_content": "",
          "new_line_content": "        fsync(server.appendfd); /* Let's try to get this data on the disk */",
          "content_same": false
        },
        {
          "line": 4608,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(dv)",
          "old_line_content": "        dv[j] = setobj->ptr;",
          "new_line_content": "            zfree(dv);",
          "content_same": false
        },
        {
          "line": 4609,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "    }",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 6663,
          "old_api": null,
          "new_api": "selectDb",
          "old_text": null,
          "new_text": "selectDb(c,0)",
          "old_line_content": "    c->argv = NULL;",
          "new_line_content": "    selectDb(c,0);",
          "content_same": false
        },
        {
          "line": 6665,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "    /* We set the fake client as a slave waiting for the synchronization",
          "new_line_content": "    c->querybuf = sdsempty();",
          "content_same": false
        },
        {
          "line": 4618,
          "old_api": null,
          "new_api": "createSetObject",
          "old_text": null,
          "new_text": "createSetObject()",
          "old_line_content": "    for (j = 0; j < setsnum; j++) {",
          "new_line_content": "    dstset = createSetObject();",
          "content_same": false
        },
        {
          "line": 6672,
          "old_api": null,
          "new_api": "listCreate",
          "old_text": null,
          "new_text": "listCreate()",
          "old_line_content": "}",
          "new_line_content": "    c->reply = listCreate();",
          "content_same": false
        },
        {
          "line": 6673,
          "old_api": null,
          "new_api": "listSetFreeMethod",
          "old_text": null,
          "new_text": "listSetFreeMethod(c->reply,decrRefCount)",
          "old_line_content": "",
          "new_line_content": "    listSetFreeMethod(c->reply,decrRefCount);",
          "content_same": false
        },
        {
          "line": 4626,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(dv[j])",
          "old_line_content": "",
          "new_line_content": "        di = dictGetIterator(dv[j]);",
          "content_same": false
        },
        {
          "line": 6674,
          "old_api": null,
          "new_api": "listSetDupMethod",
          "old_text": null,
          "new_text": "listSetDupMethod(c->reply,dupClientReplyValue)",
          "old_line_content": "static void freeFakeClient(struct redisClient *c) {",
          "new_line_content": "    listSetDupMethod(c->reply,dupClientReplyValue);",
          "content_same": false
        },
        {
          "line": 6679,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(c->querybuf)",
          "old_line_content": "",
          "new_line_content": "    sdsfree(c->querybuf);",
          "content_same": false
        },
        {
          "line": 4632,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "                    cardinality++;",
          "new_line_content": "            ele = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 6680,
          "old_api": null,
          "new_api": "listRelease",
          "old_text": null,
          "new_text": "listRelease(c->reply)",
          "old_line_content": "/* Replay the append log file. On error REDIS_OK is returned. On non fatal",
          "new_line_content": "    listRelease(c->reply);",
          "content_same": false
        },
        {
          "line": 4634,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(dstset->ptr,ele,NULL)",
          "old_line_content": "            } else if (op == REDIS_OP_DIFF) {",
          "new_line_content": "                if (dictAdd(dstset->ptr,ele,NULL) == DICT_OK) {",
          "content_same": false
        },
        {
          "line": 6681,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(c)",
          "old_line_content": " * error (the append only file is zero-length) REDIS_ERR is returned. On",
          "new_line_content": "    zfree(c);",
          "content_same": false
        },
        {
          "line": 4639,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(dstset->ptr,ele)",
          "old_line_content": "        }",
          "new_line_content": "                if (dictDelete(dstset->ptr,ele) == DICT_OK) {",
          "content_same": false
        },
        {
          "line": 4644,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "",
          "new_line_content": "        dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 6698,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "    while(1) {",
          "new_line_content": "        exit(1);",
          "content_same": false
        },
        {
          "line": 4651,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "",
          "new_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",cardinality));",
          "content_same": false
        },
        {
          "line": 6701,
          "old_api": null,
          "new_api": "createFakeClient",
          "old_text": null,
          "new_text": "createFakeClient()",
          "old_line_content": "        robj **argv;",
          "new_line_content": "    fakeClient = createFakeClient();",
          "content_same": false
        },
        {
          "line": 4656,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "        }",
          "new_line_content": "            ele = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 4658,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,ele)",
          "old_line_content": "    } else {",
          "new_line_content": "            addReply(c,ele);",
          "content_same": false
        },
        {
          "line": 4659,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.crlf)",
          "old_line_content": "        /* If we have a target key where to store the resulting set",
          "new_line_content": "            addReply(c,shared.crlf);",
          "content_same": false
        },
        {
          "line": 6710,
          "old_api": null,
          "new_api": "fgets",
          "old_text": null,
          "new_text": "fgets(buf,sizeof(buf),fp)",
          "old_line_content": "                goto readerr;",
          "new_line_content": "        if (fgets(buf,sizeof(buf),fp) == NULL) {",
          "content_same": false
        },
        {
          "line": 6711,
          "old_api": null,
          "new_api": "feof",
          "old_text": null,
          "new_text": "feof(fp)",
          "old_line_content": "        }",
          "new_line_content": "            if (feof(fp))",
          "content_same": false
        },
        {
          "line": 4665,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(c->db,dstkey)",
          "old_line_content": "",
          "new_line_content": "        deleteKey(c->db,dstkey);",
          "content_same": false
        },
        {
          "line": 4666,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(c->db->dict,dstkey,dstset)",
          "old_line_content": "    /* Cleanup */",
          "new_line_content": "        dictAdd(c->db->dict,dstkey,dstset);",
          "content_same": false
        },
        {
          "line": 4667,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(dstkey)",
          "old_line_content": "    if (!dstkey) {",
          "new_line_content": "        incrRefCount(dstkey);",
          "content_same": false
        },
        {
          "line": 6717,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(buf+1)",
          "old_line_content": "            if (buf[0] != '$') goto fmterr;",
          "new_line_content": "        argc = atoi(buf+1);",
          "content_same": false
        },
        {
          "line": 4672,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(dstset)",
          "old_line_content": "        server.dirty++;",
          "new_line_content": "        decrRefCount(dstset);",
          "content_same": false
        },
        {
          "line": 4675,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize((dict*)dstset->ptr)",
          "old_line_content": "}",
          "new_line_content": "            dictSize((dict*)dstset->ptr)));",
          "content_same": false
        },
        {
          "line": 6723,
          "old_api": null,
          "new_api": "sdsnewlen",
          "old_text": null,
          "new_text": "sdsnewlen(NULL,len)",
          "old_line_content": "        }",
          "new_line_content": "            argsds = sdsnewlen(NULL,len);",
          "content_same": false
        },
        {
          "line": 6724,
          "old_api": null,
          "new_api": "fread",
          "old_text": null,
          "new_text": "fread(argsds,len,1,fp)",
          "old_line_content": "",
          "new_line_content": "            if (len && fread(argsds,len,1,fp) == 0) goto fmterr;",
          "content_same": false
        },
        {
          "line": 6725,
          "old_api": null,
          "new_api": "createObject",
          "old_text": null,
          "new_text": "createObject(REDIS_STRING,argsds)",
          "old_line_content": "        /* Command lookup */",
          "new_line_content": "            argv[j] = createObject(REDIS_STRING,argsds);",
          "content_same": false
        },
        {
          "line": 6730,
          "old_api": null,
          "new_api": "lookupCommand",
          "old_text": null,
          "new_text": "lookupCommand(argv[0]->ptr)",
          "old_line_content": "        }",
          "new_line_content": "        cmd = lookupCommand(argv[0]->ptr);",
          "content_same": false
        },
        {
          "line": 6732,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Unknown command '%s' reading the append only file\", argv[0]->ptr)",
          "old_line_content": "        if (server.shareobjects) {",
          "new_line_content": "            redisLog(REDIS_WARNING,\"Unknown command '%s' reading the append only file\", argv[0]->ptr);",
          "content_same": false
        },
        {
          "line": 6733,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "            int j;",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 6739,
          "old_api": null,
          "new_api": "tryObjectSharing",
          "old_text": null,
          "new_text": "tryObjectSharing(argv[j])",
          "old_line_content": "        /* Run the command in the context of a fake client */",
          "new_line_content": "                argv[j] = tryObjectSharing(argv[j]);",
          "content_same": false
        },
        {
          "line": 4694,
          "old_api": null,
          "new_api": "sunionDiffGenericCommand",
          "old_text": null,
          "new_text": "sunionDiffGenericCommand(c,c->argv+2,c->argc-2,c->argv[1],REDIS_OP_DIFF)",
          "old_line_content": "",
          "new_line_content": "    sunionDiffGenericCommand(c,c->argv+2,c->argc-2,c->argv[1],REDIS_OP_DIFF);",
          "content_same": false
        },
        {
          "line": 6746,
          "old_api": null,
          "new_api": "proc",
          "old_text": null,
          "new_text": "cmd->proc(fakeClient)",
          "old_line_content": "        /* Clean up, ready for the next command */",
          "new_line_content": "        cmd->proc(fakeClient);",
          "content_same": false
        },
        {
          "line": 6749,
          "old_api": null,
          "new_api": "listFirst",
          "old_text": null,
          "new_text": "listFirst(fakeClient->reply)",
          "old_line_content": "        /* Handle swapping while loading big datasets when VM is on */",
          "new_line_content": "            listDelNode(fakeClient->reply,listFirst(fakeClient->reply));",
          "content_same": false
        },
        {
          "line": 6751,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(argv[j])",
          "old_line_content": "        if (server.vm_enabled && (loadedkeys % 5000) == 0) {",
          "new_line_content": "        for (j = 0; j < argc; j++) decrRefCount(argv[j]);",
          "content_same": false
        },
        {
          "line": 6756,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "    }",
          "new_line_content": "            while (zmalloc_used_memory() > server.vm_max_memory) {",
          "content_same": false
        },
        {
          "line": 6761,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "readerr:",
          "new_line_content": "    fclose(fp);",
          "content_same": false
        },
        {
          "line": 4717,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*zn))",
          "old_line_content": "    zn->obj = obj;",
          "new_line_content": "    zskiplistNode *zn = zmalloc(sizeof(*zn));",
          "content_same": false
        },
        {
          "line": 6766,
          "old_api": null,
          "new_api": "feof",
          "old_text": null,
          "new_text": "feof(fp)",
          "old_line_content": "    }",
          "new_line_content": "    if (feof(fp)) {",
          "content_same": false
        },
        {
          "line": 4719,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(zskiplistNode*) * level)",
          "old_line_content": "}",
          "new_line_content": "    zn->forward = zmalloc(sizeof(zskiplistNode*) * level);",
          "content_same": false
        },
        {
          "line": 6771,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "}",
          "new_line_content": "    exit(1);",
          "content_same": false
        },
        {
          "line": 6773,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Bad file format reading the append only file\")",
          "old_line_content": "/* Write an object into a file in the bulk format $<count>\\r\\n<payload>\\r\\n */",
          "new_line_content": "    redisLog(REDIS_WARNING,\"Bad file format reading the append only file\");",
          "content_same": false
        },
        {
          "line": 6774,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "static int fwriteBulk(FILE *fp, robj *obj) {",
          "new_line_content": "    exit(1);",
          "content_same": false
        },
        {
          "line": 4729,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*zsl))",
          "old_line_content": "    for (j = 0; j < ZSKIPLIST_MAXLEVEL; j++)",
          "new_line_content": "    zsl = zmalloc(sizeof(*zsl));",
          "content_same": false
        },
        {
          "line": 4732,
          "old_api": null,
          "new_api": "zslCreateNode",
          "old_text": null,
          "new_text": "zslCreateNode(ZSKIPLIST_MAXLEVEL,0,NULL)",
          "old_line_content": "    zsl->tail = NULL;",
          "new_line_content": "    zsl->header = zslCreateNode(ZSKIPLIST_MAXLEVEL,0,NULL);",
          "content_same": false
        },
        {
          "line": 4741,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(node->obj)",
          "old_line_content": "",
          "new_line_content": "    decrRefCount(node->obj);",
          "content_same": false
        },
        {
          "line": 4742,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(node->forward)",
          "old_line_content": "static void zslFree(zskiplist *zsl) {",
          "new_line_content": "    zfree(node->forward);",
          "content_same": false
        },
        {
          "line": 4743,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(node)",
          "old_line_content": "    zskiplistNode *node = zsl->header->forward[0], *next;",
          "new_line_content": "    zfree(node);",
          "content_same": false
        },
        {
          "line": 6793,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(obj->ptr)",
          "old_line_content": "    return 1;",
          "new_line_content": "    if (sdslen(obj->ptr) && fwrite(obj->ptr,sdslen(obj->ptr),1,fp) == 0)",
          "content_same": false
        },
        {
          "line": 6796,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(obj)",
          "old_line_content": "    return 0;",
          "new_line_content": "    if (decrrc) decrRefCount(obj);",
          "content_same": false
        },
        {
          "line": 4750,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(zsl->header)",
          "old_line_content": "        node = next;",
          "new_line_content": "    zfree(zsl->header);",
          "content_same": false
        },
        {
          "line": 6799,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(obj)",
          "old_line_content": "/* Write a double value in bulk format $<count>\\r\\n<payload>\\r\\n */",
          "new_line_content": "    if (decrrc) decrRefCount(obj);",
          "content_same": false
        },
        {
          "line": 4753,
          "old_api": null,
          "new_api": "zslFreeNode",
          "old_text": null,
          "new_text": "zslFreeNode(node)",
          "old_line_content": "}",
          "new_line_content": "        zslFreeNode(node);",
          "content_same": false
        },
        {
          "line": 4756,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(zsl)",
          "old_line_content": "    int level = 1;",
          "new_line_content": "    zfree(zsl);",
          "content_same": false
        },
        {
          "line": 6807,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(dbuf,sizeof(dbuf),\"%.17g\\r\\n\",d)",
          "old_line_content": "    return 1;",
          "new_line_content": "    snprintf(dbuf,sizeof(dbuf),\"%.17g\\r\\n\",d);",
          "content_same": false
        },
        {
          "line": 6808,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(dbuf)",
          "old_line_content": "}",
          "new_line_content": "    snprintf(buf,sizeof(buf),\"$%lu\\r\\n\",(unsigned long)strlen(dbuf)-2);",
          "content_same": false
        },
        {
          "line": 4761,
          "old_api": null,
          "new_api": "random",
          "old_text": null,
          "new_text": "random()",
          "old_line_content": "",
          "new_line_content": "    while ((random()&0xFFFF) < (ZSKIPLIST_P * 0xFFFF))",
          "content_same": false
        },
        {
          "line": 6809,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(buf)",
          "old_line_content": "",
          "new_line_content": "    if (fwrite(buf,strlen(buf),1,fp) == 0) return 0;",
          "content_same": false
        },
        {
          "line": 6810,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(dbuf)",
          "old_line_content": "/* Write a long value in bulk format $<count>\\r\\n<payload>\\r\\n */",
          "new_line_content": "    if (fwrite(dbuf,strlen(dbuf),1,fp) == 0) return 0;",
          "content_same": false
        },
        {
          "line": 6818,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(lbuf,sizeof(lbuf),\"%ld\\r\\n\",l)",
          "old_line_content": "    return 1;",
          "new_line_content": "    snprintf(lbuf,sizeof(lbuf),\"%ld\\r\\n\",l);",
          "content_same": false
        },
        {
          "line": 6819,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(lbuf)",
          "old_line_content": "}",
          "new_line_content": "    snprintf(buf,sizeof(buf),\"$%lu\\r\\n\",(unsigned long)strlen(lbuf)-2);",
          "content_same": false
        },
        {
          "line": 6820,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(buf)",
          "old_line_content": "",
          "new_line_content": "    if (fwrite(buf,strlen(buf),1,fp) == 0) return 0;",
          "content_same": false
        },
        {
          "line": 6821,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(lbuf)",
          "old_line_content": "/* Write a sequence of commands able to fully rebuild the dataset into",
          "new_line_content": "    if (fwrite(lbuf,strlen(lbuf),1,fp) == 0) return 0;",
          "content_same": false
        },
        {
          "line": 4775,
          "old_api": null,
          "new_api": "compareStringObjects",
          "old_text": null,
          "new_text": "compareStringObjects(x->forward[i]->obj,obj)",
          "old_line_content": "    /* we assume the key is not already inside, since we allow duplicated",
          "new_line_content": "                compareStringObjects(x->forward[i]->obj,obj) < 0)))",
          "content_same": false
        },
        {
          "line": 4783,
          "old_api": null,
          "new_api": "zslRandomLevel",
          "old_text": null,
          "new_text": "zslRandomLevel()",
          "old_line_content": "        zsl->level = level;",
          "new_line_content": "    level = zslRandomLevel();",
          "content_same": false
        },
        {
          "line": 4789,
          "old_api": null,
          "new_api": "zslCreateNode",
          "old_text": null,
          "new_text": "zslCreateNode(level,score,obj)",
          "old_line_content": "    }",
          "new_line_content": "    x = zslCreateNode(level,score,obj);",
          "content_same": false
        },
        {
          "line": 6837,
          "old_api": null,
          "new_api": "getpid",
          "old_text": null,
          "new_text": "getpid()",
          "old_line_content": "        return REDIS_ERR;",
          "new_line_content": "    snprintf(tmpfile,256,\"temp-rewriteaof-%d.aof\", (int) getpid());",
          "content_same": false
        },
        {
          "line": 6838,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(tmpfile,\"w\")",
          "old_line_content": "    }",
          "new_line_content": "    fp = fopen(tmpfile,\"w\");",
          "content_same": false
        },
        {
          "line": 6840,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "        char selectcmd[] = \"*2\\r\\n$6\\r\\nSELECT\\r\\n\";",
          "new_line_content": "        redisLog(REDIS_WARNING, \"Failed rewriting the append only file: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 6847,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(d)",
          "old_line_content": "            return REDIS_ERR;",
          "new_line_content": "        if (dictSize(d) == 0) continue;",
          "content_same": false
        },
        {
          "line": 6848,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(d)",
          "old_line_content": "        }",
          "new_line_content": "        di = dictGetIterator(d);",
          "content_same": false
        },
        {
          "line": 6850,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "        /* SELECT the new DB */",
          "new_line_content": "            fclose(fp);",
          "content_same": false
        },
        {
          "line": 6856,
          "old_api": null,
          "new_api": "fwriteBulkLong",
          "old_text": null,
          "new_text": "fwriteBulkLong(fp,j)",
          "old_line_content": "            robj *key, *o;",
          "new_line_content": "        if (fwriteBulkLong(fp,j) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 6859,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "",
          "new_line_content": "        while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 4812,
          "old_api": null,
          "new_api": "compareStringObjects",
          "old_text": null,
          "new_text": "compareStringObjects(x->forward[i]->obj,obj)",
          "old_line_content": "    /* We may have multiple elements with the same score, what we need",
          "new_line_content": "                compareStringObjects(x->forward[i]->obj,obj) < 0)))",
          "content_same": false
        },
        {
          "line": 6864,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "             * in order to avoid copy-on-write of pages if we are forked() */",
          "new_line_content": "            key = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 4819,
          "old_api": null,
          "new_api": "compareStringObjects",
          "old_text": null,
          "new_text": "compareStringObjects(x->obj,obj)",
          "old_line_content": "        }",
          "new_line_content": "    if (x && score == x->score && compareStringObjects(x->obj,obj) == 0) {",
          "content_same": false
        },
        {
          "line": 6871,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "                swapped = 1;",
          "new_line_content": "                o = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 6874,
          "old_api": null,
          "new_api": "vmPreviewObject",
          "old_text": null,
          "new_text": "vmPreviewObject(key)",
          "old_line_content": "",
          "new_line_content": "                o = vmPreviewObject(key);",
          "content_same": false
        },
        {
          "line": 6877,
          "old_api": null,
          "new_api": "getExpire",
          "old_text": null,
          "new_text": "getExpire(db,key)",
          "old_line_content": "                /* Emit a SET command */",
          "new_line_content": "            expiretime = getExpire(db,key);",
          "content_same": false
        },
        {
          "line": 4830,
          "old_api": null,
          "new_api": "zslFreeNode",
          "old_text": null,
          "new_text": "zslFreeNode(x)",
          "old_line_content": "        return 1;",
          "new_line_content": "        zslFreeNode(x);",
          "content_same": false
        },
        {
          "line": 6883,
          "old_api": null,
          "new_api": "fwrite",
          "old_text": null,
          "new_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "old_line_content": "            } else if (o->type == REDIS_LIST) {",
          "new_line_content": "                if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 6885,
          "old_api": null,
          "new_api": "fwriteBulk",
          "old_text": null,
          "new_text": "fwriteBulk(fp,key)",
          "old_line_content": "                list *list = o->ptr;",
          "new_line_content": "                if (fwriteBulk(fp,key) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 6886,
          "old_api": null,
          "new_api": "fwriteBulk",
          "old_text": null,
          "new_text": "fwriteBulk(fp,o)",
          "old_line_content": "                listNode *ln;",
          "new_line_content": "                if (fwriteBulk(fp,o) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 6893,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(list,&li)",
          "old_line_content": "",
          "new_line_content": "                listRewind(list,&li);",
          "content_same": false
        },
        {
          "line": 6898,
          "old_api": null,
          "new_api": "fwrite",
          "old_text": null,
          "new_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "old_line_content": "            } else if (o->type == REDIS_SET) {",
          "new_line_content": "                    if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 6899,
          "old_api": null,
          "new_api": "fwriteBulk",
          "old_text": null,
          "new_text": "fwriteBulk(fp,key)",
          "old_line_content": "                /* Emit the SADDs needed to rebuild the set */",
          "new_line_content": "                    if (fwriteBulk(fp,key) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 6900,
          "old_api": null,
          "new_api": "fwriteBulk",
          "old_text": null,
          "new_text": "fwriteBulk(fp,eleobj)",
          "old_line_content": "                dict *set = o->ptr;",
          "new_line_content": "                    if (fwriteBulk(fp,eleobj) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 6905,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(set)",
          "old_line_content": "                    char cmd[]=\"*3\\r\\n$4\\r\\nSADD\\r\\n\";",
          "new_line_content": "                dictIterator *di = dictGetIterator(set);",
          "content_same": false
        },
        {
          "line": 6913,
          "old_api": null,
          "new_api": "fwriteBulk",
          "old_text": null,
          "new_text": "fwriteBulk(fp,key)",
          "old_line_content": "            } else if (o->type == REDIS_ZSET) {",
          "new_line_content": "                    if (fwriteBulk(fp,key) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 6914,
          "old_api": null,
          "new_api": "fwriteBulk",
          "old_text": null,
          "new_text": "fwriteBulk(fp,eleobj)",
          "old_line_content": "                /* Emit the ZADDs needed to rebuild the sorted set */",
          "new_line_content": "                    if (fwriteBulk(fp,eleobj) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 6920,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(zs->dict)",
          "old_line_content": "                    char cmd[]=\"*4\\r\\n$4\\r\\nZADD\\r\\n\";",
          "new_line_content": "                dictIterator *di = dictGetIterator(zs->dict);",
          "content_same": false
        },
        {
          "line": 4873,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(dict,x->obj)",
          "old_line_content": "        zsl->length--;",
          "new_line_content": "        dictDelete(dict,x->obj);",
          "content_same": false
        },
        {
          "line": 4874,
          "old_api": null,
          "new_api": "zslFreeNode",
          "old_text": null,
          "new_text": "zslFreeNode(x)",
          "old_line_content": "        removed++;",
          "new_line_content": "        zslFreeNode(x);",
          "content_same": false
        },
        {
          "line": 6923,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "",
          "new_line_content": "                while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 6928,
          "old_api": null,
          "new_api": "fwrite",
          "old_text": null,
          "new_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "old_line_content": "                }",
          "new_line_content": "                    if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 6930,
          "old_api": null,
          "new_api": "fwriteBulkDouble",
          "old_text": null,
          "new_text": "fwriteBulkDouble(fp,*score)",
          "old_line_content": "            } else {",
          "new_line_content": "                    if (fwriteBulkDouble(fp,*score) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 6933,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "            /* Save the expire time */",
          "new_line_content": "                dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 6935,
          "old_api": null,
          "new_api": "redisAssert",
          "old_text": null,
          "new_text": "redisAssert(0 != 0)",
          "old_line_content": "                char cmd[]=\"*3\\r\\n$8\\r\\nEXPIREAT\\r\\n\";",
          "new_line_content": "                redisAssert(0 != 0);",
          "content_same": false
        },
        {
          "line": 6943,
          "old_api": null,
          "new_api": "fwriteBulk",
          "old_text": null,
          "new_text": "fwriteBulk(fp,key)",
          "old_line_content": "        }",
          "new_line_content": "                if (fwriteBulk(fp,key) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 6946,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(o)",
          "old_line_content": "",
          "new_line_content": "            if (swapped) decrRefCount(o);",
          "content_same": false
        },
        {
          "line": 6952,
          "old_api": null,
          "new_api": "fflush",
          "old_text": null,
          "new_text": "fflush(fp)",
          "old_line_content": "    /* Use RENAME to make sure the DB file is changed atomically only",
          "new_line_content": "    fflush(fp);",
          "content_same": false
        },
        {
          "line": 6953,
          "old_api": null,
          "new_api": "fileno",
          "old_text": null,
          "new_text": "fileno(fp)",
          "old_line_content": "     * if the generate DB file is ok. */",
          "new_line_content": "    fsync(fileno(fp));",
          "content_same": false
        },
        {
          "line": 6958,
          "old_api": null,
          "new_api": "rename",
          "old_text": null,
          "new_text": "rename(tmpfile,filename)",
          "old_line_content": "    }",
          "new_line_content": "    if (rename(tmpfile,filename) == -1) {",
          "content_same": false
        },
        {
          "line": 4912,
          "old_api": null,
          "new_api": "createZsetObject",
          "old_text": null,
          "new_text": "createZsetObject()",
          "old_line_content": "        if (zsetobj->type != REDIS_ZSET) {",
          "new_line_content": "        zsetobj = createZsetObject();",
          "content_same": false
        },
        {
          "line": 6960,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(tmpfile)",
          "old_line_content": "    return REDIS_OK;",
          "new_line_content": "        unlink(tmpfile);",
          "content_same": false
        },
        {
          "line": 4914,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(key)",
          "old_line_content": "            return;",
          "new_line_content": "        incrRefCount(key);",
          "content_same": false
        },
        {
          "line": 4917,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "    zs = zsetobj->ptr;",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 6967,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "    return REDIS_ERR;",
          "new_line_content": "    fclose(fp);",
          "content_same": false
        },
        {
          "line": 6968,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(tmpfile)",
          "old_line_content": "}",
          "new_line_content": "    unlink(tmpfile);",
          "content_same": false
        },
        {
          "line": 6969,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "",
          "new_line_content": "    redisLog(REDIS_WARNING,\"Write error writing append only file on disk: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 6970,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "/* This is how rewriting of the append only file in background works:",
          "new_line_content": "    if (di) dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 4926,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(double))",
          "old_line_content": "        /* Read the old score. If the element was not present starts from 0 */",
          "new_line_content": "    score = zmalloc(sizeof(double));",
          "content_same": false
        },
        {
          "line": 4931,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(zs->dict,ele)",
          "old_line_content": "        } else {",
          "new_line_content": "        de = dictFind(zs->dict,ele);",
          "content_same": false
        },
        {
          "line": 4933,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "        }",
          "new_line_content": "            double *oldscore = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 6990,
          "old_api": null,
          "new_api": "waitEmptyIOJobsQueue",
          "old_text": null,
          "new_text": "waitEmptyIOJobsQueue()",
          "old_line_content": "",
          "new_line_content": "    if (server.vm_enabled) waitEmptyIOJobsQueue();",
          "content_same": false
        },
        {
          "line": 4946,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(ele)",
          "old_line_content": "        if (doincrement)",
          "new_line_content": "        incrRefCount(ele); /* added to hash */",
          "content_same": false
        },
        {
          "line": 4948,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(ele)",
          "old_line_content": "        else",
          "new_line_content": "        incrRefCount(ele); /* added to skiplist */",
          "content_same": false
        },
        {
          "line": 6996,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(server.fd)",
          "old_line_content": "        } else {",
          "new_line_content": "        close(server.fd);",
          "content_same": false
        },
        {
          "line": 6998,
          "old_api": null,
          "new_api": "rewriteAppendOnlyFile",
          "old_text": null,
          "new_text": "rewriteAppendOnlyFile(tmpfile)",
          "old_line_content": "        }",
          "new_line_content": "        if (rewriteAppendOnlyFile(tmpfile) == REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 4951,
          "old_api": null,
          "new_api": "addReplyDouble",
          "old_text": null,
          "new_text": "addReplyDouble(c,*score)",
          "old_line_content": "        dictEntry *de;",
          "new_line_content": "            addReplyDouble(c,*score);",
          "content_same": false
        },
        {
          "line": 6999,
          "old_api": null,
          "new_api": "_exit",
          "old_text": null,
          "new_text": "_exit(0)",
          "old_line_content": "    } else {",
          "new_line_content": "            _exit(0);",
          "content_same": false
        },
        {
          "line": 4953,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.cone)",
          "old_line_content": "        ",
          "new_line_content": "            addReply(c,shared.cone);",
          "content_same": false
        },
        {
          "line": 7001,
          "old_api": null,
          "new_api": "_exit",
          "old_text": null,
          "new_text": "_exit(1)",
          "old_line_content": "        if (childpid == -1) {",
          "new_line_content": "            _exit(1);",
          "content_same": false
        },
        {
          "line": 7006,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\n                \"Can't rewrite append only file in background: fork: %s\",\n                strerror(errno))",
          "old_line_content": "        }",
          "new_line_content": "            redisLog(REDIS_WARNING,",
          "content_same": false
        },
        {
          "line": 4959,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(zs->dict,ele)",
          "old_line_content": "            int deleted;",
          "new_line_content": "        de = dictFind(zs->dict,ele);",
          "content_same": false
        },
        {
          "line": 4960,
          "old_api": null,
          "new_api": "redisAssert",
          "old_text": null,
          "new_text": "redisAssert(de != NULL)",
          "old_line_content": "",
          "new_line_content": "        redisAssert(de != NULL);",
          "content_same": false
        },
        {
          "line": 4961,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "            /* Remove and insert the element in the skip list with new score */",
          "new_line_content": "        oldscore = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 7008,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "            \"Background append only file rewriting started by pid %d\",childpid);",
          "new_line_content": "                strerror(errno));",
          "content_same": false
        },
        {
          "line": 7011,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\n            \"Background append only file rewriting started by pid %d\",childpid)",
          "old_line_content": "         * feedAppendOnlyFile() to issue a SELECT command, so the differences",
          "new_line_content": "        redisLog(REDIS_NOTICE,",
          "content_same": false
        },
        {
          "line": 4966,
          "old_api": null,
          "new_api": "zslDelete",
          "old_text": null,
          "new_text": "zslDelete(zs->zsl,*oldscore,ele)",
          "old_line_content": "            /* Update the score in the hash table */",
          "new_line_content": "            deleted = zslDelete(zs->zsl,*oldscore,ele);",
          "content_same": false
        },
        {
          "line": 4968,
          "old_api": null,
          "new_api": "zslInsert",
          "old_text": null,
          "new_text": "zslInsert(zs->zsl,*score,ele)",
          "old_line_content": "            server.dirty++;",
          "new_line_content": "            zslInsert(zs->zsl,*score,ele);",
          "content_same": false
        },
        {
          "line": 4969,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(ele)",
          "old_line_content": "        } else {",
          "new_line_content": "            incrRefCount(ele);",
          "content_same": false
        },
        {
          "line": 4971,
          "old_api": null,
          "new_api": "dictReplace",
          "old_text": null,
          "new_text": "dictReplace(zs->dict,ele,score)",
          "old_line_content": "        }",
          "new_line_content": "            dictReplace(zs->dict,ele,score);",
          "content_same": false
        },
        {
          "line": 4974,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(score)",
          "old_line_content": "        else",
          "new_line_content": "            zfree(score);",
          "content_same": false
        },
        {
          "line": 4977,
          "old_api": null,
          "new_api": "addReplyDouble",
          "old_text": null,
          "new_text": "addReplyDouble(c,*score)",
          "old_line_content": "}",
          "new_line_content": "            addReplyDouble(c,*score);",
          "content_same": false
        },
        {
          "line": 7026,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"-ERR background append only file rewriting already in progress\\r\\n\")",
          "old_line_content": "        char *status = \"+Background append only file rewriting started\\r\\n\";",
          "new_line_content": "        addReplySds(c,sdsnew(\"-ERR background append only file rewriting already in progress\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 4979,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "static void zaddCommand(redisClient *c) {",
          "new_line_content": "            addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 7031,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(status)",
          "old_line_content": "}",
          "new_line_content": "        addReplySds(c,sdsnew(status));",
          "content_same": false
        },
        {
          "line": 7033,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.err)",
          "old_line_content": "static void aofRemoveTempFile(pid_t childpid) {",
          "new_line_content": "        addReply(c,shared.err);",
          "content_same": false
        },
        {
          "line": 4986,
          "old_api": null,
          "new_api": "strtod",
          "old_text": null,
          "new_text": "strtod(c->argv[2]->ptr,NULL)",
          "old_line_content": "static void zincrbyCommand(redisClient *c) {",
          "new_line_content": "    scoreval = strtod(c->argv[2]->ptr,NULL);",
          "content_same": false
        },
        {
          "line": 4987,
          "old_api": null,
          "new_api": "zaddGenericCommand",
          "old_text": null,
          "new_text": "zaddGenericCommand(c,c->argv[1],c->argv[3],scoreval,0)",
          "old_line_content": "    double scoreval;",
          "new_line_content": "    zaddGenericCommand(c,c->argv[1],c->argv[3],scoreval,0);",
          "content_same": false
        },
        {
          "line": 7040,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(tmpfile,256,\"temp-rewriteaof-bg-%d.aof\", (int) childpid)",
          "old_line_content": "/* Virtual Memory is composed mainly of two subsystems:",
          "new_line_content": "    snprintf(tmpfile,256,\"temp-rewriteaof-bg-%d.aof\", (int) childpid);",
          "content_same": false
        },
        {
          "line": 4993,
          "old_api": null,
          "new_api": "strtod",
          "old_text": null,
          "new_text": "strtod(c->argv[2]->ptr,NULL)",
          "old_line_content": "static void zremCommand(redisClient *c) {",
          "new_line_content": "    scoreval = strtod(c->argv[2]->ptr,NULL);",
          "content_same": false
        },
        {
          "line": 4994,
          "old_api": null,
          "new_api": "zaddGenericCommand",
          "old_text": null,
          "new_text": "zaddGenericCommand(c,c->argv[1],c->argv[3],scoreval,1)",
          "old_line_content": "    robj *zsetobj;",
          "new_line_content": "    zaddGenericCommand(c,c->argv[1],c->argv[3],scoreval,1);",
          "content_same": false
        },
        {
          "line": 7041,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(tmpfile)",
          "old_line_content": " * - Blocking Virutal Memory",
          "new_line_content": "    unlink(tmpfile);",
          "content_same": false
        },
        {
          "line": 5001,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "        dictEntry *de;",
          "new_line_content": "    zsetobj = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 5003,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "        int deleted;",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 5014,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(zs->dict,c->argv[2])",
          "old_line_content": "        }",
          "new_line_content": "        de = dictFind(zs->dict,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 5020,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "        /* Delete from the hash table */",
          "new_line_content": "        oldscore = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 7070,
          "old_api": null,
          "new_api": "strstr",
          "old_text": null,
          "new_text": "strstr(server.vm_swap_file,\"%p\")",
          "old_line_content": "    new = sdsempty();",
          "new_line_content": "    char *p = strstr(server.vm_swap_file,\"%p\");",
          "content_same": false
        },
        {
          "line": 5025,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(zs->dict,c->argv[2])",
          "old_line_content": "    }",
          "new_line_content": "        dictDelete(zs->dict,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 5026,
          "old_api": null,
          "new_api": "dictResize",
          "old_text": null,
          "new_text": "dictResize(zs->dict)",
          "old_line_content": "}",
          "new_line_content": "        if (htNeedsResize(zs->dict)) dictResize(zs->dict);",
          "content_same": false
        },
        {
          "line": 5028,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.cone)",
          "old_line_content": "static void zremrangebyscoreCommand(redisClient *c) {",
          "new_line_content": "        addReply(c,shared.cone);",
          "content_same": false
        },
        {
          "line": 7077,
          "old_api": null,
          "new_api": "getpid",
          "old_text": null,
          "new_text": "getpid()",
          "old_line_content": "}",
          "new_line_content": "    new = sdscatprintf(new,\"%ld\",(long) getpid());",
          "content_same": false
        },
        {
          "line": 7079,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(server.vm_swap_file)",
          "old_line_content": "static void vmInit(void) {",
          "new_line_content": "    zfree(server.vm_swap_file);",
          "content_same": false
        },
        {
          "line": 5033,
          "old_api": null,
          "new_api": "strtod",
          "old_text": null,
          "new_text": "strtod(c->argv[2]->ptr,NULL)",
          "old_line_content": "",
          "new_line_content": "    double min = strtod(c->argv[2]->ptr,NULL);",
          "content_same": false
        },
        {
          "line": 5038,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "        long deleted;",
          "new_line_content": "    zsetobj = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 5040,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "        if (zsetobj->type != REDIS_ZSET) {",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 7091,
          "old_api": null,
          "new_api": "expandVmSwapFilename",
          "old_text": null,
          "new_text": "expandVmSwapFilename()",
          "old_line_content": "    }",
          "new_line_content": "    expandVmSwapFilename();",
          "content_same": false
        },
        {
          "line": 7092,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Using '%s' as swap file\",server.vm_swap_file)",
          "old_line_content": "    if (server.vm_fp == NULL) {",
          "new_line_content": "    redisLog(REDIS_NOTICE,\"Using '%s' as swap file\",server.vm_swap_file);",
          "content_same": false
        },
        {
          "line": 7094,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(server.vm_swap_file,\"w+b\")",
          "old_line_content": "            \"Impossible to open the swap file: %s. Exiting.\",",
          "new_line_content": "        server.vm_fp = fopen(server.vm_swap_file,\"w+b\");",
          "content_same": false
        },
        {
          "line": 5049,
          "old_api": null,
          "new_api": "zslDeleteRange",
          "old_text": null,
          "new_text": "zslDeleteRange(zs->zsl,min,max,zs->dict)",
          "old_line_content": "    }",
          "new_line_content": "        deleted = zslDeleteRange(zs->zsl,min,max,zs->dict);",
          "content_same": false
        },
        {
          "line": 5050,
          "old_api": null,
          "new_api": "dictResize",
          "old_text": null,
          "new_text": "dictResize(zs->dict)",
          "old_line_content": "}",
          "new_line_content": "        if (htNeedsResize(zs->dict)) dictResize(zs->dict);",
          "content_same": false
        },
        {
          "line": 7097,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\n            \"Impossible to open the swap file: %s. Exiting.\",\n            strerror(errno))",
          "old_line_content": "    }",
          "new_line_content": "        redisLog(REDIS_WARNING,",
          "content_same": false
        },
        {
          "line": 5052,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "static void zrangeGenericCommand(redisClient *c, int reverse) {",
          "new_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),\":%lu\\r\\n\",deleted));",
          "content_same": false
        },
        {
          "line": 7099,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "    server.vm_next_page = 0;",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 7100,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "    server.vm_near_pages = 0;",
          "new_line_content": "        exit(1);",
          "content_same": false
        },
        {
          "line": 7102,
          "old_api": null,
          "new_api": "fileno",
          "old_text": null,
          "new_text": "fileno(server.vm_fp)",
          "old_line_content": "    server.vm_stats_swapped_objects = 0;",
          "new_line_content": "    server.vm_fd = fileno(server.vm_fp);",
          "content_same": false
        },
        {
          "line": 5059,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[3]->ptr)",
          "old_line_content": "        withscores = 1;",
          "new_line_content": "    int end = atoi(c->argv[3]->ptr);",
          "content_same": false
        },
        {
          "line": 5062,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[4]->ptr,\"withscores\")",
          "old_line_content": "        return;",
          "new_line_content": "    if (c->argc == 5 && !strcasecmp(c->argv[4]->ptr,\"withscores\")) {",
          "content_same": false
        },
        {
          "line": 7111,
          "old_api": null,
          "new_api": "ftruncate",
          "old_text": null,
          "new_text": "ftruncate(server.vm_fd,totsize)",
          "old_line_content": "    } else {",
          "new_line_content": "    if (ftruncate(server.vm_fd,totsize) == -1) {",
          "content_same": false
        },
        {
          "line": 7113,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "    }",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 7116,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Swap file allocated with success\")",
          "old_line_content": "        (long long) (server.vm_pages+7)/8, server.vm_pages);",
          "new_line_content": "        redisLog(REDIS_NOTICE,\"Swap file allocated with success\");",
          "content_same": false
        },
        {
          "line": 5069,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[1])",
          "old_line_content": "        if (o->type != REDIS_ZSET) {",
          "new_line_content": "    o = lookupKeyRead(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 7118,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc((server.vm_pages+7)/8)",
          "old_line_content": "",
          "new_line_content": "    server.vm_bitmap = zmalloc((server.vm_pages+7)/8);",
          "content_same": false
        },
        {
          "line": 5071,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullmultibulk)",
          "old_line_content": "        } else {",
          "new_line_content": "        addReply(c,shared.nullmultibulk);",
          "content_same": false
        },
        {
          "line": 7119,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_VERBOSE,\"Allocated %lld bytes page table for %lld pages\",\n        (long long) (server.vm_pages+7)/8, server.vm_pages)",
          "old_line_content": "    /* Initialize threaded I/O (used by Virtual Memory) */",
          "new_line_content": "    redisLog(REDIS_VERBOSE,\"Allocated %lld bytes page table for %lld pages\",",
          "content_same": false
        },
        {
          "line": 5074,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "            zskiplistNode *ln;",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 7127,
          "old_api": null,
          "new_api": "listCreate",
          "old_text": null,
          "new_text": "listCreate()",
          "old_line_content": "    server.io_active_threads = 0;",
          "new_line_content": "    server.io_ready_clients = listCreate();",
          "content_same": false
        },
        {
          "line": 7132,
          "old_api": null,
          "new_api": "pipe",
          "old_text": null,
          "new_text": "pipe(pipefds)",
          "old_line_content": "    }",
          "new_line_content": "    if (pipe(pipefds) == -1) {",
          "content_same": false
        },
        {
          "line": 7133,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Unable to intialized VM: pipe(2): %s. Exiting.\"\n            ,strerror(errno))",
          "old_line_content": "    server.io_ready_pipe_read = pipefds[0];",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Unable to intialized VM: pipe(2): %s. Exiting.\"",
          "content_same": false
        },
        {
          "line": 7134,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "    server.io_ready_pipe_write = pipefds[1];",
          "new_line_content": "            ,strerror(errno));",
          "content_same": false
        },
        {
          "line": 7139,
          "old_api": null,
          "new_api": "anetNonBlock",
          "old_text": null,
          "new_text": "anetNonBlock(NULL,server.io_ready_pipe_read)",
          "old_line_content": "    while (stacksize < REDIS_THREAD_STACK_SIZE) stacksize *= 2;",
          "new_line_content": "    redisAssert(anetNonBlock(NULL,server.io_ready_pipe_read) != ANET_ERR);",
          "content_same": false
        },
        {
          "line": 5093,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.emptymultibulk)",
          "old_line_content": "            rangelen = (end-start)+1;",
          "new_line_content": "                addReply(c,shared.emptymultibulk);",
          "content_same": false
        },
        {
          "line": 7141,
          "old_api": null,
          "new_api": "pthread_attr_init",
          "old_text": null,
          "new_text": "pthread_attr_init(&server.io_threads_attr)",
          "old_line_content": "    /* Listen for events in the threaded I/O pipe */",
          "new_line_content": "    pthread_attr_init(&server.io_threads_attr);",
          "content_same": false
        },
        {
          "line": 7146,
          "old_api": null,
          "new_api": "aeCreateFileEvent",
          "old_text": null,
          "new_text": "aeCreateFileEvent(server.el, server.io_ready_pipe_read, AE_READABLE,\n        vmThreadedIOCompletedJob, NULL)",
          "old_line_content": "",
          "new_line_content": "    if (aeCreateFileEvent(server.el, server.io_ready_pipe_read, AE_READABLE,",
          "content_same": false
        },
        {
          "line": 7148,
          "old_api": null,
          "new_api": "oom",
          "old_text": null,
          "new_text": "oom(\"creating file event\")",
          "old_line_content": "static void vmMarkPageUsed(off_t page) {",
          "new_line_content": "        oom(\"creating file event\");",
          "content_same": false
        },
        {
          "line": 7155,
          "old_api": null,
          "new_api": "vmFreePage",
          "old_text": null,
          "new_text": "vmFreePage(page)",
          "old_line_content": "}",
          "new_line_content": "    redisAssert(vmFreePage(page) == 1);",
          "content_same": false
        },
        {
          "line": 7157,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_DEBUG,\"Mark used: %lld (byte:%lld bit:%d)\\n\",\n        (long long)page, (long long)byte, bit)",
          "old_line_content": "/* Mark N contiguous pages as used, with 'page' being the first. */",
          "new_line_content": "    redisLog(REDIS_DEBUG,\"Mark used: %lld (byte:%lld bit:%d)\\n\",",
          "content_same": false
        },
        {
          "line": 5115,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,ele)",
          "old_line_content": "                ln = reverse ? ln->backward : ln->forward[0];",
          "new_line_content": "                addReply(c,ele);",
          "content_same": false
        },
        {
          "line": 5116,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.crlf)",
          "old_line_content": "            }",
          "new_line_content": "                addReply(c,shared.crlf);",
          "content_same": false
        },
        {
          "line": 5118,
          "old_api": null,
          "new_api": "addReplyDouble",
          "old_text": null,
          "new_text": "addReplyDouble(c,ln->score)",
          "old_line_content": "    }",
          "new_line_content": "                    addReplyDouble(c,ln->score);",
          "content_same": false
        },
        {
          "line": 7166,
          "old_api": null,
          "new_api": "vmMarkPageUsed",
          "old_text": null,
          "new_text": "vmMarkPageUsed(page+j)",
          "old_line_content": "/* Mark the page as free */",
          "new_line_content": "        vmMarkPageUsed(page+j);",
          "content_same": false
        },
        {
          "line": 7174,
          "old_api": null,
          "new_api": "vmFreePage",
          "old_text": null,
          "new_text": "vmFreePage(page)",
          "old_line_content": "}",
          "new_line_content": "    redisAssert(vmFreePage(page) == 0);",
          "content_same": false
        },
        {
          "line": 7176,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_DEBUG,\"Mark free: %lld (byte:%lld bit:%d)\\n\",\n        (long long)page, (long long)byte, bit)",
          "old_line_content": "/* Mark N contiguous pages as free, with 'page' being the first. */",
          "new_line_content": "    redisLog(REDIS_DEBUG,\"Mark free: %lld (byte:%lld bit:%d)\\n\",",
          "content_same": false
        },
        {
          "line": 5130,
          "old_api": null,
          "new_api": "zrangeGenericCommand",
          "old_text": null,
          "new_text": "zrangeGenericCommand(c,1)",
          "old_line_content": "    robj *o;",
          "new_line_content": "    zrangeGenericCommand(c,1);",
          "content_same": false
        },
        {
          "line": 5135,
          "old_api": null,
          "new_api": "strtod",
          "old_text": null,
          "new_text": "strtod(c->argv[2]->ptr,NULL)",
          "old_line_content": "    if (c->argc != 4 && c->argc != 7) {",
          "new_line_content": "    double min = strtod(c->argv[2]->ptr,NULL);",
          "content_same": false
        },
        {
          "line": 7185,
          "old_api": null,
          "new_api": "vmMarkPageFree",
          "old_text": null,
          "new_text": "vmMarkPageFree(page+j)",
          "old_line_content": "    }",
          "new_line_content": "        vmMarkPageFree(page+j);",
          "content_same": false
        },
        {
          "line": 5141,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"-ERR wrong number of arguments for ZRANGEBYSCORE\\r\\n\")",
          "old_line_content": "        return;",
          "new_line_content": "            sdsnew(\"-ERR wrong number of arguments for ZRANGEBYSCORE\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 5147,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[5]->ptr)",
          "old_line_content": "",
          "new_line_content": "        offset = atoi(c->argv[5]->ptr);",
          "content_same": false
        },
        {
          "line": 5152,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[1])",
          "old_line_content": "        if (o->type != REDIS_ZSET) {",
          "new_line_content": "    o = lookupKeyRead(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 5154,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullmultibulk)",
          "old_line_content": "        } else {",
          "new_line_content": "        addReply(c,shared.nullmultibulk);",
          "content_same": false
        },
        {
          "line": 5157,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "            zskiplistNode *ln;",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 5166,
          "old_api": null,
          "new_api": "zslFirstWithScore",
          "old_text": null,
          "new_text": "zslFirstWithScore(zsl,min)",
          "old_line_content": "                return;",
          "new_line_content": "            ln = zslFirstWithScore(zsl,min);",
          "content_same": false
        },
        {
          "line": 5169,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.emptymultibulk)",
          "old_line_content": "            /* We don't know in advance how many matching elements there",
          "new_line_content": "                addReply(c,shared.emptymultibulk);",
          "content_same": false
        },
        {
          "line": 5177,
          "old_api": null,
          "new_api": "createObject",
          "old_text": null,
          "new_text": "createObject(REDIS_STRING,NULL)",
          "old_line_content": "            while(ln && ln->score <= max) {",
          "new_line_content": "            lenobj = createObject(REDIS_STRING,NULL);",
          "content_same": false
        },
        {
          "line": 5178,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,lenobj)",
          "old_line_content": "                if (offset) {",
          "new_line_content": "            addReply(c,lenobj);",
          "content_same": false
        },
        {
          "line": 5179,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(lenobj)",
          "old_line_content": "                    offset--;",
          "new_line_content": "            decrRefCount(lenobj);",
          "content_same": false
        },
        {
          "line": 5189,
          "old_api": null,
          "new_api": "addReplyBulkLen",
          "old_text": null,
          "new_text": "addReplyBulkLen(c,ele)",
          "old_line_content": "                rangelen++;",
          "new_line_content": "                addReplyBulkLen(c,ele);",
          "content_same": false
        },
        {
          "line": 5190,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,ele)",
          "old_line_content": "                if (limit > 0) limit--;",
          "new_line_content": "                addReply(c,ele);",
          "content_same": false
        },
        {
          "line": 5191,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.crlf)",
          "old_line_content": "            }",
          "new_line_content": "                addReply(c,shared.crlf);",
          "content_same": false
        },
        {
          "line": 7240,
          "old_api": null,
          "new_api": "vmFreePage",
          "old_text": null,
          "new_text": "vmFreePage(this)",
          "old_line_content": "            /* Already got N free pages? Return to the caller, with success */",
          "new_line_content": "        redisLog(REDIS_DEBUG, \"THIS: %lld (%c)\\n\", (long long) this, vmFreePage(this) ? 'F' : 'X');",
          "content_same": false
        },
        {
          "line": 7241,
          "old_api": null,
          "new_api": "vmFreePage",
          "old_text": null,
          "new_text": "vmFreePage(this)",
          "old_line_content": "            if (numfree == n) {",
          "new_line_content": "        if (vmFreePage(this)) {",
          "content_same": false
        },
        {
          "line": 5196,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "",
          "new_line_content": "            lenobj->ptr = sdscatprintf(sdsempty(),\"*%d\\r\\n\",rangelen);",
          "content_same": false
        },
        {
          "line": 5205,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[1])",
          "old_line_content": "    } else {",
          "new_line_content": "    o = lookupKeyRead(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 5211,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "        }",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 7259,
          "old_api": null,
          "new_api": "random",
          "old_text": null,
          "new_text": "random()",
          "old_line_content": "             * is set to zero. */",
          "new_line_content": "            offset += random() % REDIS_VM_MAX_RANDOM_JUMP;",
          "content_same": false
        },
        {
          "line": 5214,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "",
          "new_line_content": "            addReplySds(c,sdscatprintf(sdsempty(),\":%lu\\r\\n\",zs->zsl->length));",
          "content_same": false
        },
        {
          "line": 5223,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[1])",
          "old_line_content": "    } else {",
          "new_line_content": "    o = lookupKeyRead(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 7274,
          "old_api": null,
          "new_api": "pthread_mutex_lock",
          "old_text": null,
          "new_text": "pthread_mutex_lock(&server.io_swapfile_mutex)",
          "old_line_content": "            \"Critical VM problem in vmSwapObjectBlocking(): can't seek: %s\",",
          "new_line_content": "    if (server.vm_enabled) pthread_mutex_lock(&server.io_swapfile_mutex);",
          "content_same": false
        },
        {
          "line": 7276,
          "old_api": null,
          "new_api": "pthread_mutex_unlock",
          "old_text": null,
          "new_text": "pthread_mutex_unlock(&server.io_swapfile_mutex)",
          "old_line_content": "        return REDIS_ERR;",
          "new_line_content": "        if (server.vm_enabled) pthread_mutex_unlock(&server.io_swapfile_mutex);",
          "content_same": false
        },
        {
          "line": 5229,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "            zs = o->ptr;",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 7277,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\n            \"Critical VM problem in vmSwapObjectBlocking(): can't seek: %s\",\n            strerror(errno))",
          "old_line_content": "    }",
          "new_line_content": "        redisLog(REDIS_WARNING,",
          "content_same": false
        },
        {
          "line": 7282,
          "old_api": null,
          "new_api": "rdbSaveObject",
          "old_text": null,
          "new_text": "rdbSaveObject(server.vm_fp,o)",
          "old_line_content": "",
          "new_line_content": "    rdbSaveObject(server.vm_fp,o);",
          "content_same": false
        },
        {
          "line": 7283,
          "old_api": null,
          "new_api": "pthread_mutex_unlock",
          "old_text": null,
          "new_text": "pthread_mutex_unlock(&server.io_swapfile_mutex)",
          "old_line_content": "/* Swap the 'val' object relative to 'key' into disk. Store all the information",
          "new_line_content": "    if (server.vm_enabled) pthread_mutex_unlock(&server.io_swapfile_mutex);",
          "content_same": false
        },
        {
          "line": 5238,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "        }",
          "new_line_content": "                double *score = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 5240,
          "old_api": null,
          "new_api": "addReplyDouble",
          "old_text": null,
          "new_text": "addReplyDouble(c,*score)",
          "old_line_content": "}",
          "new_line_content": "                addReplyDouble(c,*score);",
          "content_same": false
        },
        {
          "line": 7295,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(key->storage == REDIS_VM_MEMORY)",
          "old_line_content": "    key->vm.page = page;",
          "new_line_content": "    assert(key->storage == REDIS_VM_MEMORY);",
          "content_same": false
        },
        {
          "line": 7296,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(key->refcount == 1)",
          "old_line_content": "    key->vm.usedpages = pages;",
          "new_line_content": "    assert(key->refcount == 1);",
          "content_same": false
        },
        {
          "line": 5249,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(c->db->dict)",
          "old_line_content": "}",
          "new_line_content": "    server.dirty += dictSize(c->db->dict);",
          "content_same": false
        },
        {
          "line": 5250,
          "old_api": null,
          "new_api": "dictEmpty",
          "old_text": null,
          "new_text": "dictEmpty(c->db->dict)",
          "old_line_content": "",
          "new_line_content": "    dictEmpty(c->db->dict);",
          "content_same": false
        },
        {
          "line": 5251,
          "old_api": null,
          "new_api": "dictEmpty",
          "old_text": null,
          "new_text": "dictEmpty(c->db->expires)",
          "old_line_content": "static void flushallCommand(redisClient *c) {",
          "new_line_content": "    dictEmpty(c->db->expires);",
          "content_same": false
        },
        {
          "line": 7297,
          "old_api": null,
          "new_api": "vmFindContiguousPages",
          "old_text": null,
          "new_text": "vmFindContiguousPages(&page,pages)",
          "old_line_content": "    key->storage = REDIS_VM_SWAPPED;",
          "new_line_content": "    if (vmFindContiguousPages(&page,pages) == REDIS_ERR) return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 7298,
          "old_api": null,
          "new_api": "vmWriteObjectOnSwap",
          "old_text": null,
          "new_text": "vmWriteObjectOnSwap(val,page)",
          "old_line_content": "    key->vtype = val->type;",
          "new_line_content": "    if (vmWriteObjectOnSwap(val,page) == REDIS_ERR) return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 7303,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(val)",
          "old_line_content": "        (unsigned long long) page, (unsigned long long) pages);",
          "new_line_content": "    decrRefCount(val); /* Deallocate the object from memory. */",
          "content_same": false
        },
        {
          "line": 5256,
          "old_api": null,
          "new_api": "emptyDb",
          "old_text": null,
          "new_text": "emptyDb()",
          "old_line_content": "}",
          "new_line_content": "    server.dirty += emptyDb();",
          "content_same": false
        },
        {
          "line": 5257,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "",
          "new_line_content": "    addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 5258,
          "old_api": null,
          "new_api": "rdbSave",
          "old_text": null,
          "new_text": "rdbSave(server.dbfilename)",
          "old_line_content": "static redisSortOperation *createSortOperation(int type, robj *pattern) {",
          "new_line_content": "    rdbSave(server.dbfilename);",
          "content_same": false
        },
        {
          "line": 7304,
          "old_api": null,
          "new_api": "vmMarkPagesUsed",
          "old_text": null,
          "new_text": "vmMarkPagesUsed(page,pages)",
          "old_line_content": "    server.vm_stats_swapped_objects++;",
          "new_line_content": "    vmMarkPagesUsed(page,pages);",
          "content_same": false
        },
        {
          "line": 7305,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_DEBUG,\"VM: object %s swapped out at %lld (%lld pages)\",\n        (unsigned char*) key->ptr,\n        (unsigned long long) page, (unsigned long long) pages)",
          "old_line_content": "    server.vm_stats_swapouts++;",
          "new_line_content": "    redisLog(REDIS_DEBUG,\"VM: object %s swapped out at %lld (%lld pages)\",",
          "content_same": false
        },
        {
          "line": 7310,
          "old_api": null,
          "new_api": "fflush",
          "old_text": null,
          "new_text": "fflush(server.vm_fp)",
          "old_line_content": "static robj *vmReadObjectFromSwap(off_t page, int type) {",
          "new_line_content": "    fflush(server.vm_fp);",
          "content_same": false
        },
        {
          "line": 5263,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*so))",
          "old_line_content": "}",
          "new_line_content": "    redisSortOperation *so = zmalloc(sizeof(*so));",
          "content_same": false
        },
        {
          "line": 7319,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\n            \"Unrecoverable VM problem in vmReadObjectFromSwap(): can't seek: %s\",\n            strerror(errno))",
          "old_line_content": "    }",
          "new_line_content": "        redisLog(REDIS_WARNING,",
          "content_same": false
        },
        {
          "line": 7321,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "    if (o == NULL) {",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 7324,
          "old_api": null,
          "new_api": "rdbLoadObject",
          "old_text": null,
          "new_text": "rdbLoadObject(type,server.vm_fp)",
          "old_line_content": "    }",
          "new_line_content": "    o = rdbLoadObject(type,server.vm_fp);",
          "content_same": false
        },
        {
          "line": 7326,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "    return o;",
          "new_line_content": "        redisLog(REDIS_WARNING, \"Unrecoverable VM problem in vmReadObjectFromSwap(): can't load object from swap file: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 7327,
          "old_api": null,
          "new_api": "_exit",
          "old_text": null,
          "new_text": "_exit(1)",
          "old_line_content": "}",
          "new_line_content": "        _exit(1);",
          "content_same": false
        },
        {
          "line": 7329,
          "old_api": null,
          "new_api": "pthread_mutex_unlock",
          "old_text": null,
          "new_text": "pthread_mutex_unlock(&server.io_swapfile_mutex)",
          "old_line_content": "/* Load the value object relative to the 'key' object from swap to memory.",
          "new_line_content": "    if (server.vm_enabled) pthread_mutex_unlock(&server.io_swapfile_mutex);",
          "content_same": false
        },
        {
          "line": 7341,
          "old_api": null,
          "new_api": "redisAssert",
          "old_text": null,
          "new_text": "redisAssert(key->storage == REDIS_VM_SWAPPED || key->storage == REDIS_VM_LOADING)",
          "old_line_content": "        key->vm.atime = server.unixtime;",
          "new_line_content": "    redisAssert(key->storage == REDIS_VM_SWAPPED || key->storage == REDIS_VM_LOADING);",
          "content_same": false
        },
        {
          "line": 5296,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(ssub)",
          "old_line_content": "        return NULL;",
          "new_line_content": "    if (sdslen(spat)+sdslen(ssub)-1 > REDIS_SORTKEY_MAX) return NULL;",
          "content_same": false
        },
        {
          "line": 5297,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(spat,'*')",
          "old_line_content": "    }",
          "new_line_content": "    p = strchr(spat,'*');",
          "content_same": false
        },
        {
          "line": 7346,
          "old_api": null,
          "new_api": "vmMarkPagesFree",
          "old_text": null,
          "new_text": "vmMarkPagesFree(key->vm.page,key->vm.usedpages)",
          "old_line_content": "    } else {",
          "new_line_content": "        vmMarkPagesFree(key->vm.page,key->vm.usedpages);",
          "content_same": false
        },
        {
          "line": 5299,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(subst)",
          "old_line_content": "    prefixlen = p-spat;",
          "new_line_content": "        decrRefCount(subst);",
          "content_same": false
        },
        {
          "line": 7351,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_DEBUG, \"VM: object %s previewed from disk\",\n            (unsigned char*) key->ptr)",
          "old_line_content": "    return val;",
          "new_line_content": "        redisLog(REDIS_DEBUG, \"VM: object %s previewed from disk\",",
          "content_same": false
        },
        {
          "line": 5305,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(spat)",
          "old_line_content": "    keyname.buf[prefixlen+sublen+postfixlen] = '\\0';",
          "new_line_content": "    postfixlen = sdslen(spat)-(prefixlen+1);",
          "content_same": false
        },
        {
          "line": 5306,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(keyname.buf,spat,prefixlen)",
          "old_line_content": "    keyname.len = prefixlen+sublen+postfixlen;",
          "new_line_content": "    memcpy(keyname.buf,spat,prefixlen);",
          "content_same": false
        },
        {
          "line": 5307,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(keyname.buf+prefixlen,ssub,sublen)",
          "old_line_content": "",
          "new_line_content": "    memcpy(keyname.buf+prefixlen,ssub,sublen);",
          "content_same": false
        },
        {
          "line": 5313,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(subst)",
          "old_line_content": "}",
          "new_line_content": "    decrRefCount(subst);",
          "content_same": false
        },
        {
          "line": 7363,
          "old_api": null,
          "new_api": "vmCancelThreadedIOJob",
          "old_text": null,
          "new_text": "vmCancelThreadedIOJob(key)",
          "old_line_content": "/* Just load the value on disk, without to modify the key.",
          "new_line_content": "        vmCancelThreadedIOJob(key);",
          "content_same": false
        },
        {
          "line": 5316,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(db,&keyobj)",
          "old_line_content": " * the additional parameter is not standard but a BSD-specific we have to",
          "new_line_content": "    return lookupKeyRead(db,&keyobj);",
          "content_same": false
        },
        {
          "line": 7364,
          "old_api": null,
          "new_api": "vmGenericLoadObject",
          "old_text": null,
          "new_text": "vmGenericLoadObject(key,0)",
          "old_line_content": " * This is useful when we want to perform some operation on the value",
          "new_line_content": "    return vmGenericLoadObject(key,0);",
          "content_same": false
        },
        {
          "line": 7372,
          "old_api": null,
          "new_api": "vmGenericLoadObject",
          "old_text": null,
          "new_text": "vmGenericLoadObject(key,1)",
          "old_line_content": " * The better candidate it is, the greater the returned value.",
          "new_line_content": "    return vmGenericLoadObject(key,1);",
          "content_same": false
        },
        {
          "line": 5348,
          "old_api": null,
          "new_api": "strcoll",
          "old_text": null,
          "new_text": "strcoll(so1->u.cmpobj->ptr,so2->u.cmpobj->ptr)",
          "old_line_content": "            robj *dec1, *dec2;",
          "new_line_content": "                cmp = strcoll(so1->u.cmpobj->ptr,so2->u.cmpobj->ptr);",
          "content_same": false
        },
        {
          "line": 7400,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(o->ptr)",
          "old_line_content": "        l = o->ptr;",
          "new_line_content": "            asize = sdslen(o->ptr)+sizeof(*o)+sizeof(long)*2;",
          "content_same": false
        },
        {
          "line": 5355,
          "old_api": null,
          "new_api": "getDecodedObject",
          "old_text": null,
          "new_text": "getDecodedObject(so2->obj)",
          "old_line_content": "        }",
          "new_line_content": "            dec2 = getDecodedObject(so2->obj);",
          "content_same": false
        },
        {
          "line": 5356,
          "old_api": null,
          "new_api": "strcoll",
          "old_text": null,
          "new_text": "strcoll(dec1->ptr,dec2->ptr)",
          "old_line_content": "    }",
          "new_line_content": "            cmp = strcoll(dec1->ptr,dec2->ptr);",
          "content_same": false
        },
        {
          "line": 5357,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(dec1)",
          "old_line_content": "    return server.sort_desc ? -cmp : cmp;",
          "new_line_content": "            decrRefCount(dec1);",
          "content_same": false
        },
        {
          "line": 5358,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(dec2)",
          "old_line_content": "}",
          "new_line_content": "            decrRefCount(dec2);",
          "content_same": false
        },
        {
          "line": 7405,
          "old_api": null,
          "new_api": "listFirst",
          "old_text": null,
          "new_text": "listFirst(l)",
          "old_line_content": "            robj *ele = ln->value;",
          "new_line_content": "        listNode *ln = listFirst(l);",
          "content_same": false
        },
        {
          "line": 7413,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(ele->ptr)",
          "old_line_content": "        break;",
          "new_line_content": "                            (sizeof(*o)+sdslen(ele->ptr)) :",
          "content_same": false
        },
        {
          "line": 7415,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(l)",
          "old_line_content": "    case REDIS_ZSET:",
          "new_line_content": "            asize += (sizeof(listNode)+elesize)*listLength(l);",
          "content_same": false
        },
        {
          "line": 7423,
          "old_api": null,
          "new_api": "dictSlots",
          "old_text": null,
          "new_text": "dictSlots(d)",
          "old_line_content": "            robj *ele;",
          "new_line_content": "        asize = sizeof(dict)+(sizeof(struct dictEntry*)*dictSlots(d));",
          "content_same": false
        },
        {
          "line": 5377,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[1])",
          "old_line_content": "    }",
          "new_line_content": "    sortval = lookupKeyRead(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 5379,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullmultibulk)",
          "old_line_content": "        sortval->type != REDIS_ZSET)",
          "new_line_content": "        addReply(c,shared.nullmultibulk);",
          "content_same": false
        },
        {
          "line": 7429,
          "old_api": null,
          "new_api": "dictGetRandomKey",
          "old_text": null,
          "new_text": "dictGetRandomKey(d)",
          "old_line_content": "                            sizeof(*o);",
          "new_line_content": "            de = dictGetRandomKey(d);",
          "content_same": false
        },
        {
          "line": 7432,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(ele->ptr)",
          "old_line_content": "        }",
          "new_line_content": "                            (sizeof(*o)+sdslen(ele->ptr)) :",
          "content_same": false
        },
        {
          "line": 5385,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "    /* Create a list of operations to perform for every sorted element.",
          "new_line_content": "        addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 7434,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(d)",
          "old_line_content": "    }",
          "new_line_content": "            asize += (sizeof(struct dictEntry)+elesize)*dictSize(d);",
          "content_same": false
        },
        {
          "line": 3341,
          "old_api": null,
          "new_api": "dictExpand",
          "old_text": null,
          "new_text": "dictExpand(o->ptr,listlen)",
          "old_line_content": "",
          "new_line_content": "            dictExpand(o->ptr,listlen);",
          "content_same": false
        },
        {
          "line": 5391,
          "old_api": null,
          "new_api": "listCreate",
          "old_text": null,
          "new_text": "listCreate()",
          "old_line_content": "    /* Now we need to protect sortval incrementing its count, in the future",
          "new_line_content": "    operations = listCreate();",
          "content_same": false
        },
        {
          "line": 5392,
          "old_api": null,
          "new_api": "listSetFreeMethod",
          "old_text": null,
          "new_text": "listSetFreeMethod(operations,zfree)",
          "old_line_content": "     * SORT may have options able to overwrite/delete keys during the sorting",
          "new_line_content": "    listSetFreeMethod(operations,zfree);",
          "content_same": false
        },
        {
          "line": 7439,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log(1+asize)",
          "old_line_content": " * Returns REDIS_OK if the object was swapped, REDIS_ERR if it's not possible",
          "new_line_content": "    return (double)asize*log(1+asize);",
          "content_same": false
        },
        {
          "line": 3346,
          "old_api": null,
          "new_api": "rdbLoadStringObject",
          "old_text": null,
          "new_text": "rdbLoadStringObject(fp)",
          "old_line_content": "            } else {",
          "new_line_content": "            if ((ele = rdbLoadStringObject(fp)) == NULL) return NULL;",
          "content_same": false
        },
        {
          "line": 3349,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail((list*)o->ptr,ele)",
          "old_line_content": "        }",
          "new_line_content": "                listAddNodeTail((list*)o->ptr,ele);",
          "content_same": false
        },
        {
          "line": 5398,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(sortval)",
          "old_line_content": "        int leftargs = c->argc-j-1;",
          "new_line_content": "    incrRefCount(sortval);",
          "content_same": false
        },
        {
          "line": 3351,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd((dict*)o->ptr,ele,NULL)",
          "old_line_content": "        /* Read list/set value */",
          "new_line_content": "                dictAdd((dict*)o->ptr,ele,NULL);",
          "content_same": false
        },
        {
          "line": 3359,
          "old_api": null,
          "new_api": "rdbLoadLen",
          "old_text": null,
          "new_text": "rdbLoadLen(fp,NULL)",
          "old_line_content": "        while(zsetlen--) {",
          "new_line_content": "        if ((zsetlen = rdbLoadLen(fp,NULL)) == REDIS_RDB_LENERR) return NULL;",
          "content_same": false
        },
        {
          "line": 3360,
          "old_api": null,
          "new_api": "createZsetObject",
          "old_text": null,
          "new_text": "createZsetObject()",
          "old_line_content": "            robj *ele;",
          "new_line_content": "        o = createZsetObject();",
          "content_same": false
        },
        {
          "line": 5410,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[j+1]->ptr)",
          "old_line_content": "            storekey = c->argv[j+1];",
          "new_line_content": "            limit_start = atoi(c->argv[j+1]->ptr);",
          "content_same": false
        },
        {
          "line": 5411,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[j+2]->ptr)",
          "old_line_content": "            j++;",
          "new_line_content": "            limit_count = atoi(c->argv[j+2]->ptr);",
          "content_same": false
        },
        {
          "line": 5413,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"store\")",
          "old_line_content": "            sortby = c->argv[j+1];",
          "new_line_content": "        } else if (!strcasecmp(c->argv[j]->ptr,\"store\") && leftargs >= 1) {",
          "content_same": false
        },
        {
          "line": 7462,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(db->dict)",
          "old_line_content": "",
          "new_line_content": "        if (dictSize(db->dict) == 0) continue;",
          "content_same": false
        },
        {
          "line": 3369,
          "old_api": null,
          "new_api": "rdbLoadDoubleValue",
          "old_text": null,
          "new_text": "rdbLoadDoubleValue(fp,score)",
          "old_line_content": "        }",
          "new_line_content": "            if (rdbLoadDoubleValue(fp,score) == -1) return NULL;",
          "content_same": false
        },
        {
          "line": 3370,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(zs->dict,ele,score)",
          "old_line_content": "    } else {",
          "new_line_content": "            dictAdd(zs->dict,ele,score);",
          "content_same": false
        },
        {
          "line": 3372,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(ele)",
          "old_line_content": "    }",
          "new_line_content": "            incrRefCount(ele); /* added to skiplist */",
          "content_same": false
        },
        {
          "line": 5420,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(c->argv[j+1]->ptr,'*')",
          "old_line_content": "                REDIS_SORT_GET,c->argv[j+1]));",
          "new_line_content": "            if (strchr(c->argv[j+1]->ptr,'*') == NULL) dontsort = 1;",
          "content_same": false
        },
        {
          "line": 5422,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"get\")",
          "old_line_content": "            j++;",
          "new_line_content": "        } else if (!strcasecmp(c->argv[j]->ptr,\"get\") && leftargs >= 1) {",
          "content_same": false
        },
        {
          "line": 3375,
          "old_api": null,
          "new_api": "redisAssert",
          "old_text": null,
          "new_text": "redisAssert(0 != 0)",
          "old_line_content": "",
          "new_line_content": "        redisAssert(0 != 0);",
          "content_same": false
        },
        {
          "line": 5423,
          "old_api": null,
          "new_api": "createSortOperation",
          "old_text": null,
          "new_text": "createSortOperation(\n                REDIS_SORT_GET,c->argv[j+1])",
          "old_line_content": "        } else {",
          "new_line_content": "            listAddNodeTail(operations,createSortOperation(",
          "content_same": false
        },
        {
          "line": 7468,
          "old_api": null,
          "new_api": "dictGetRandomKey",
          "old_text": null,
          "new_text": "dictGetRandomKey(db->dict)",
          "old_line_content": "             *",
          "new_line_content": "            de = dictGetRandomKey(db->dict);",
          "content_same": false
        },
        {
          "line": 7469,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "             * Also don't swap shared objects if threaded VM is on, as we",
          "new_line_content": "            key = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 7470,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "             * try to ensure that the main thread does not touch the",
          "new_line_content": "            val = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 5428,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(sortval)",
          "old_line_content": "        }",
          "new_line_content": "            decrRefCount(sortval);",
          "content_same": false
        },
        {
          "line": 5429,
          "old_api": null,
          "new_api": "listRelease",
          "old_text": null,
          "new_text": "listRelease(operations)",
          "old_line_content": "        j++;",
          "new_line_content": "            listRelease(operations);",
          "content_same": false
        },
        {
          "line": 5430,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "    }",
          "new_line_content": "            addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 7482,
          "old_api": null,
          "new_api": "computeObjectSwappability",
          "old_text": null,
          "new_text": "computeObjectSwappability(val)",
          "old_line_content": "                best_db = db;",
          "new_line_content": "            swappability = computeObjectSwappability(val);",
          "content_same": false
        },
        {
          "line": 3388,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    if (!fp) return REDIS_ERR;",
          "new_line_content": "    time_t expiretime = -1, now = time(NULL);",
          "content_same": false
        },
        {
          "line": 5438,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength((list*)sortval->ptr)",
          "old_line_content": "    }",
          "new_line_content": "    case REDIS_LIST: vectorlen = listLength((list*)sortval->ptr); break;",
          "content_same": false
        },
        {
          "line": 5440,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(((zset*)sortval->ptr)->dict)",
          "old_line_content": "    j = 0;",
          "new_line_content": "    case REDIS_ZSET: vectorlen = dictSize(((zset*)sortval->ptr)->dict); break;",
          "content_same": false
        },
        {
          "line": 5441,
          "old_api": null,
          "new_api": "redisAssert",
          "old_text": null,
          "new_text": "redisAssert(0)",
          "old_line_content": "",
          "new_line_content": "    default: vectorlen = 0; redisAssert(0); /* Avoid GCC warning */",
          "content_same": false
        },
        {
          "line": 3395,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(buf,\"REDIS\",5)",
          "old_line_content": "    }",
          "new_line_content": "    if (memcmp(buf,\"REDIS\",5) != 0) {",
          "content_same": false
        },
        {
          "line": 5443,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(redisSortObject)*vectorlen)",
          "old_line_content": "        list *list = sortval->ptr;",
          "new_line_content": "    vector = zmalloc(sizeof(redisSortObject)*vectorlen);",
          "content_same": false
        },
        {
          "line": 3397,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Wrong signature trying to load DB from file\")",
          "old_line_content": "    if (rdbver != 1) {",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Wrong signature trying to load DB from file\");",
          "content_same": false
        },
        {
          "line": 7494,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(best)",
          "old_line_content": "        key->ptr, best_swappability);",
          "new_line_content": "    key = dictGetEntryKey(best);",
          "content_same": false
        },
        {
          "line": 7495,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(best)",
          "old_line_content": "",
          "new_line_content": "    val = dictGetEntryVal(best);",
          "content_same": false
        },
        {
          "line": 3400,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(buf+5)",
          "old_line_content": "        return REDIS_ERR;",
          "new_line_content": "    rdbver = atoi(buf+5);",
          "content_same": false
        },
        {
          "line": 7497,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_DEBUG,\"Key with best swappability: %s, %f\",\n        key->ptr, best_swappability)",
          "old_line_content": "    if (key->refcount > 1) {",
          "new_line_content": "    redisLog(REDIS_DEBUG,\"Key with best swappability: %s, %f\",",
          "content_same": false
        },
        {
          "line": 3402,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "    while(1) {",
          "new_line_content": "        fclose(fp);",
          "content_same": false
        },
        {
          "line": 3403,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Can't handle RDB format version %d\",rdbver)",
          "old_line_content": "        robj *o;",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Can't handle RDB format version %d\",rdbver);",
          "content_same": false
        },
        {
          "line": 5451,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(list,&li)",
          "old_line_content": "            vector[j].u.score = 0;",
          "new_line_content": "        listRewind(list,&li);",
          "content_same": false
        },
        {
          "line": 5452,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&li)",
          "old_line_content": "            vector[j].u.cmpobj = NULL;",
          "new_line_content": "        while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 7502,
          "old_api": null,
          "new_api": "dupStringObject",
          "old_text": null,
          "new_text": "dupStringObject(key)",
          "old_line_content": "    /* Swap it */",
          "new_line_content": "        robj *newkey = dupStringObject(key);",
          "content_same": false
        },
        {
          "line": 7503,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(key)",
          "old_line_content": "    if (usethreads) {",
          "new_line_content": "        decrRefCount(key);",
          "content_same": false
        },
        {
          "line": 3412,
          "old_api": null,
          "new_api": "rdbLoadTime",
          "old_text": null,
          "new_text": "rdbLoadTime(fp)",
          "old_line_content": "        if (type == REDIS_EOF) break;",
          "new_line_content": "            if ((expiretime = rdbLoadTime(fp)) == -1) goto eoferr;",
          "content_same": false
        },
        {
          "line": 3414,
          "old_api": null,
          "new_api": "rdbLoadType",
          "old_text": null,
          "new_text": "rdbLoadType(fp)",
          "old_line_content": "        if (type == REDIS_SELECTDB) {",
          "new_line_content": "            if ((type = rdbLoadType(fp)) == -1) goto eoferr;",
          "content_same": false
        },
        {
          "line": 7511,
          "old_api": null,
          "new_api": "vmSwapObjectBlocking",
          "old_text": null,
          "new_text": "vmSwapObjectBlocking(key,val)",
          "old_line_content": "            return REDIS_ERR;",
          "new_line_content": "        if (vmSwapObjectBlocking(key,val) == REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 7512,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(best)",
          "old_line_content": "        }",
          "new_line_content": "            dictGetEntryVal(best) = NULL;",
          "content_same": false
        },
        {
          "line": 3422,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"FATAL: Data file was created with a Redis server configured to handle more than %d databases. Exiting\\n\", server.dbnum)",
          "old_line_content": "            d = db->dict;",
          "new_line_content": "                redisLog(REDIS_WARNING,\"FATAL: Data file was created with a Redis server configured to handle more than %d databases. Exiting\\n\", server.dbnum);",
          "content_same": false
        },
        {
          "line": 3423,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "            continue;",
          "new_line_content": "                exit(1);",
          "content_same": false
        },
        {
          "line": 5471,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(set)",
          "old_line_content": "            vector[j].u.cmpobj = NULL;",
          "new_line_content": "        di = dictGetIterator(set);",
          "content_same": false
        },
        {
          "line": 5472,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "            j++;",
          "new_line_content": "        while((setele = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 5473,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(setele)",
          "old_line_content": "        }",
          "new_line_content": "            vector[j].obj = dictGetEntryKey(setele);",
          "content_same": false
        },
        {
          "line": 7525,
          "old_api": null,
          "new_api": "vmSwapOneObject",
          "old_text": null,
          "new_text": "vmSwapOneObject(1)",
          "old_line_content": " * Basically we don't want to swap objects out while there is a BGSAVE",
          "new_line_content": "    return vmSwapOneObject(1);",
          "content_same": false
        },
        {
          "line": 5478,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "    /* Now it's time to load the right scores in the sorting vector */",
          "new_line_content": "        dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 5480,
          "old_api": null,
          "new_api": "redisAssert",
          "old_text": null,
          "new_text": "redisAssert(j == vectorlen)",
          "old_line_content": "        for (j = 0; j < vectorlen; j++) {",
          "new_line_content": "    redisAssert(j == vectorlen);",
          "content_same": false
        },
        {
          "line": 3434,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(d,keyobj,o)",
          "old_line_content": "        }",
          "new_line_content": "        retval = dictAdd(d,keyobj,o);",
          "content_same": false
        },
        {
          "line": 3436,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Loading DB, duplicated key (%s) found! Unrecoverable error, exiting now.\", keyobj->ptr)",
          "old_line_content": "        if (expiretime != -1) {",
          "new_line_content": "            redisLog(REDIS_WARNING,\"Loading DB, duplicated key (%s) found! Unrecoverable error, exiting now.\", keyobj->ptr);",
          "content_same": false
        },
        {
          "line": 5488,
          "old_api": null,
          "new_api": "lookupKeyByPattern",
          "old_text": null,
          "new_text": "lookupKeyByPattern(c->db,sortby,vector[j].obj)",
          "old_line_content": "                } else {",
          "new_line_content": "                byval = lookupKeyByPattern(c->db,sortby,vector[j].obj);",
          "content_same": false
        },
        {
          "line": 3441,
          "old_api": null,
          "new_api": "setExpire",
          "old_text": null,
          "new_text": "setExpire(db,keyobj,expiretime)",
          "old_line_content": "        }",
          "new_line_content": "            setExpire(db,keyobj,expiretime);",
          "content_same": false
        },
        {
          "line": 3443,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(db,keyobj)",
          "old_line_content": "        /* Handle swapping while loading big datasets when VM is on */",
          "new_line_content": "            if (expiretime < now) deleteKey(db,keyobj);",
          "content_same": false
        },
        {
          "line": 5491,
          "old_api": null,
          "new_api": "getDecodedObject",
          "old_text": null,
          "new_text": "getDecodedObject(byval)",
          "old_line_content": "                    } else {",
          "new_line_content": "                    vector[j].u.cmpobj = getDecodedObject(byval);",
          "content_same": false
        },
        {
          "line": 7541,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(db->dict,key)",
          "old_line_content": "    return 1;",
          "new_line_content": "    if ((de = dictFind(db->dict,key)) == NULL) return 0;",
          "content_same": false
        },
        {
          "line": 5494,
          "old_api": null,
          "new_api": "strtod",
          "old_text": null,
          "new_text": "strtod(byval->ptr,NULL)",
          "old_line_content": "                         * far. We can just cast it */",
          "new_line_content": "                        vector[j].u.score = strtod(byval->ptr,NULL);",
          "content_same": false
        },
        {
          "line": 7542,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "}",
          "new_line_content": "    foundkey = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 7544,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(db,key)",
          "old_line_content": "/* =================== Virtual Memory - Threaded I/O  ======================= */",
          "new_line_content": "    deleteKey(db,key);",
          "content_same": false
        },
        {
          "line": 3450,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "    }",
          "new_line_content": "            while (zmalloc_used_memory() > server.vm_max_memory) {",
          "content_same": false
        },
        {
          "line": 5502,
          "old_api": null,
          "new_api": "redisAssert",
          "old_text": null,
          "new_text": "redisAssert(1 != 1)",
          "old_line_content": "                if (!alpha) {",
          "new_line_content": "                            redisAssert(1 != 1);",
          "content_same": false
        },
        {
          "line": 7554,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(j->val)",
          "old_line_content": "",
          "new_line_content": "        decrRefCount(j->val);",
          "content_same": false
        },
        {
          "line": 3459,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(keyobj)",
          "old_line_content": "}",
          "new_line_content": "    if (keyobj) decrRefCount(keyobj);",
          "content_same": false
        },
        {
          "line": 3460,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Short read or OOM loading DB. Unrecoverable error, aborting now.\")",
          "old_line_content": "",
          "new_line_content": "    redisLog(REDIS_WARNING,\"Short read or OOM loading DB. Unrecoverable error, aborting now.\");",
          "content_same": false
        },
        {
          "line": 3461,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "/*================================== Commands =============================== */",
          "new_line_content": "    exit(1);",
          "content_same": false
        },
        {
          "line": 5508,
          "old_api": null,
          "new_api": "strtod",
          "old_text": null,
          "new_text": "strtod(vector[j].obj->ptr,NULL)",
          "old_line_content": "                        else",
          "new_line_content": "                        vector[j].u.score = strtod(vector[j].obj->ptr,NULL);",
          "content_same": false
        },
        {
          "line": 7555,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(j->key)",
          "old_line_content": "/* Every time a thread finished a Job, it writes a byte into the write side",
          "new_line_content": "    decrRefCount(j->key);",
          "content_same": false
        },
        {
          "line": 7556,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(j)",
          "old_line_content": " * of an unix pipe in order to \"awake\" the main thread, and this function",
          "new_line_content": "    zfree(j);",
          "content_same": false
        },
        {
          "line": 5513,
          "old_api": null,
          "new_api": "redisAssert",
          "old_text": null,
          "new_text": "redisAssert(1 != 1)",
          "old_line_content": "        }",
          "new_line_content": "                            redisAssert(1 != 1);",
          "content_same": false
        },
        {
          "line": 3468,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(c->argv[1]->ptr, server.requirepass)",
          "old_line_content": "      c->authenticated = 0;",
          "new_line_content": "    if (!server.requirepass || !strcmp(c->argv[1]->ptr, server.requirepass)) {",
          "content_same": false
        },
        {
          "line": 3470,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "    }",
          "new_line_content": "      addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 7567,
          "old_api": null,
          "new_api": "REDIS_NOTUSED",
          "old_text": null,
          "new_text": "REDIS_NOTUSED(el)",
          "old_line_content": "    /* For every byte we read in the read side of the pipe, there is one",
          "new_line_content": "    REDIS_NOTUSED(el);",
          "content_same": false
        },
        {
          "line": 7568,
          "old_api": null,
          "new_api": "REDIS_NOTUSED",
          "old_text": null,
          "new_text": "REDIS_NOTUSED(mask)",
          "old_line_content": "     * I/O job completed to process. */",
          "new_line_content": "    REDIS_NOTUSED(mask);",
          "content_same": false
        },
        {
          "line": 3473,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "static void pingCommand(redisClient *c) {",
          "new_line_content": "      addReplySds(c,sdscatprintf(sdsempty(),\"-ERR invalid password\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 7573,
          "old_api": null,
          "new_api": "read",
          "old_text": null,
          "new_text": "read(fd,buf,1)",
          "old_line_content": "        struct dictEntry *de;",
          "new_line_content": "    while((retval = read(fd,buf,1)) == 1) {",
          "content_same": false
        },
        {
          "line": 3482,
          "old_api": null,
          "new_api": "addReplyBulkLen",
          "old_text": null,
          "new_text": "addReplyBulkLen(c,c->argv[1])",
          "old_line_content": "",
          "new_line_content": "    addReplyBulkLen(c,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 3483,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,c->argv[1])",
          "old_line_content": "/*=================================== Strings =============================== */",
          "new_line_content": "    addReply(c,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 3484,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.crlf)",
          "old_line_content": "",
          "new_line_content": "    addReply(c,shared.crlf);",
          "content_same": false
        },
        {
          "line": 7582,
          "old_api": null,
          "new_api": "lockThreadedIO",
          "old_text": null,
          "new_text": "lockThreadedIO()",
          "old_line_content": "            if (toprocess <= 0) toprocess = 1;",
          "new_line_content": "        lockThreadedIO();",
          "content_same": false
        },
        {
          "line": 5535,
          "old_api": null,
          "new_api": "pqsort",
          "old_text": null,
          "new_text": "pqsort(vector,vectorlen,sizeof(redisSortObject),sortCompare, start,end)",
          "old_line_content": "",
          "new_line_content": "            pqsort(vector,vectorlen,sizeof(redisSortObject),sortCompare, start,end);",
          "content_same": false
        },
        {
          "line": 7583,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.io_processed)",
          "old_line_content": "        }",
          "new_line_content": "        assert(listLength(server.io_processed) != 0);",
          "content_same": false
        },
        {
          "line": 5537,
          "old_api": null,
          "new_api": "qsort",
          "old_text": null,
          "new_text": "qsort(vector,vectorlen,sizeof(redisSortObject),sortCompare)",
          "old_line_content": "     * GET/DEL/INCR/DECR operations if any. */",
          "new_line_content": "            qsort(vector,vectorlen,sizeof(redisSortObject),sortCompare);",
          "content_same": false
        },
        {
          "line": 7585,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.io_processed)",
          "old_line_content": "        j = ln->value;",
          "new_line_content": "            toprocess = (listLength(server.io_processed)*REDIS_MAX_COMPLETED_JOBS_PROCESSED)/100;",
          "content_same": false
        },
        {
          "line": 3492,
          "old_api": null,
          "new_api": "deleteIfVolatile",
          "old_text": null,
          "new_text": "deleteIfVolatile(c->db,c->argv[1])",
          "old_line_content": "            /* If the key is about a swapped value, we want a new key object",
          "new_line_content": "    if (nx) deleteIfVolatile(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 3493,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(c->db->dict,c->argv[1],c->argv[2])",
          "old_line_content": "             * to overwrite the old. So we delete the old key in the database.",
          "new_line_content": "    retval = dictAdd(c->db->dict,c->argv[1],c->argv[2]);",
          "content_same": false
        },
        {
          "line": 7588,
          "old_api": null,
          "new_api": "listFirst",
          "old_text": null,
          "new_text": "listFirst(server.io_processed)",
          "old_line_content": "        /* If this job is marked as canceled, just ignore it */",
          "new_line_content": "        ln = listFirst(server.io_processed);",
          "content_same": false
        },
        {
          "line": 7591,
          "old_api": null,
          "new_api": "unlockThreadedIO",
          "old_text": null,
          "new_text": "unlockThreadedIO()",
          "old_line_content": "            continue;",
          "new_line_content": "        unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 5545,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "",
          "new_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",outputlen));",
          "content_same": false
        },
        {
          "line": 7594,
          "old_api": null,
          "new_api": "freeIOJob",
          "old_text": null,
          "new_text": "freeIOJob(j)",
          "old_line_content": "         * can do just here to avoid race conditions and/or invasive locks */",
          "new_line_content": "            freeIOJob(j);",
          "content_same": false
        },
        {
          "line": 3500,
          "old_api": null,
          "new_api": "deleteIfSwapped",
          "old_text": null,
          "new_text": "deleteIfSwapped(c->db,c->argv[1])",
          "old_line_content": "        } else {",
          "new_line_content": "            if (deleteIfSwapped(c->db,c->argv[1]))",
          "content_same": false
        },
        {
          "line": 3502,
          "old_api": null,
          "new_api": "dictReplace",
          "old_text": null,
          "new_text": "dictReplace(c->db->dict,c->argv[1],c->argv[2])",
          "old_line_content": "            return;",
          "new_line_content": "            dictReplace(c->db->dict,c->argv[1],c->argv[2]);",
          "content_same": false
        },
        {
          "line": 3503,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(c->argv[2])",
          "old_line_content": "        }",
          "new_line_content": "            incrRefCount(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 7599,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_DEBUG,\"Job %p type: %d, key at %p (%s) refcount: %d\\n\", (void*) j, j->type, (void*)j->key, (char*)j->key->ptr, j->key->refcount)",
          "old_line_content": "        if (j->type == REDIS_IOJOB_LOAD) {",
          "new_line_content": "        redisLog(REDIS_DEBUG,\"Job %p type: %d, key at %p (%s) refcount: %d\\n\", (void*) j, j->type, (void*)j->key, (char*)j->key->ptr, j->key->refcount);",
          "content_same": false
        },
        {
          "line": 5553,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.crlf)",
          "old_line_content": "                redisSortOperation *sop = ln->value;",
          "new_line_content": "                addReply(c,shared.crlf);",
          "content_same": false
        },
        {
          "line": 7600,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(j->db->dict,j->key)",
          "old_line_content": "            redisDb *db;",
          "new_line_content": "        de = dictFind(j->db->dict,j->key);",
          "content_same": false
        },
        {
          "line": 5555,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(operations,&li)",
          "old_line_content": "                    vector[j].obj);",
          "new_line_content": "            listRewind(operations,&li);",
          "content_same": false
        },
        {
          "line": 5556,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&li)",
          "old_line_content": "",
          "new_line_content": "            while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 7601,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(de != NULL)",
          "old_line_content": "",
          "new_line_content": "        assert(de != NULL);",
          "content_same": false
        },
        {
          "line": 5558,
          "old_api": null,
          "new_api": "lookupKeyByPattern",
          "old_text": null,
          "new_text": "lookupKeyByPattern(c->db,sop->pattern,\n                    vector[j].obj)",
          "old_line_content": "                    if (!val || val->type != REDIS_STRING) {",
          "new_line_content": "                robj *val = lookupKeyByPattern(c->db,sop->pattern,",
          "content_same": false
        },
        {
          "line": 7602,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "            /* Key loaded, bring it at home */",
          "new_line_content": "        key = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 3513,
          "old_api": null,
          "new_api": "removeExpire",
          "old_text": null,
          "new_text": "removeExpire(c->db,c->argv[1])",
          "old_line_content": "static void setCommand(redisClient *c) {",
          "new_line_content": "    removeExpire(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 7609,
          "old_api": null,
          "new_api": "vmMarkPagesFree",
          "old_text": null,
          "new_text": "vmMarkPagesFree(key->vm.page,key->vm.usedpages)",
          "old_line_content": "            server.vm_stats_swapins++;",
          "new_line_content": "            vmMarkPagesFree(key->vm.page,key->vm.usedpages);",
          "content_same": false
        },
        {
          "line": 5565,
          "old_api": null,
          "new_api": "addReplyBulkLen",
          "old_text": null,
          "new_text": "addReplyBulkLen(c,val)",
          "old_line_content": "                } else {",
          "new_line_content": "                        addReplyBulkLen(c,val);",
          "content_same": false
        },
        {
          "line": 7614,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "            /* Handle clients waiting for this key to be loaded. */",
          "new_line_content": "            dictGetEntryVal(de) = j->val;",
          "content_same": false
        },
        {
          "line": 5567,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.crlf)",
          "old_line_content": "                }",
          "new_line_content": "                        addReply(c,shared.crlf);",
          "content_same": false
        },
        {
          "line": 7617,
          "old_api": null,
          "new_api": "freeIOJob",
          "old_text": null,
          "new_text": "freeIOJob(j)",
          "old_line_content": "            /* Now we know the amount of pages required to swap this object.",
          "new_line_content": "            freeIOJob(j);",
          "content_same": false
        },
        {
          "line": 5570,
          "old_api": null,
          "new_api": "redisAssert",
          "old_text": null,
          "new_text": "redisAssert(sop->type == REDIS_SORT_GET)",
          "old_line_content": "    } else {",
          "new_line_content": "                    redisAssert(sop->type == REDIS_SORT_GET); /* always fails */",
          "content_same": false
        },
        {
          "line": 7619,
          "old_api": null,
          "new_api": "handleClientsBlockedOnSwappedKey",
          "old_text": null,
          "new_text": "handleClientsBlockedOnSwappedKey(db,key)",
          "old_line_content": "             * rebranded as REDIS_IOJOB_DO_SWAP. */",
          "new_line_content": "            handleClientsBlockedOnSwappedKey(db,key);",
          "content_same": false
        },
        {
          "line": 3526,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[1])",
          "old_line_content": "        return REDIS_OK;",
          "new_line_content": "    robj *o = lookupKeyRead(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 5575,
          "old_api": null,
          "new_api": "createListObject",
          "old_text": null,
          "new_text": "createListObject()",
          "old_line_content": "        for (j = start; j <= end; j++) {",
          "new_line_content": "        robj *listObject = createListObject();",
          "content_same": false
        },
        {
          "line": 7624,
          "old_api": null,
          "new_api": "vmCanSwapOut",
          "old_text": null,
          "new_text": "vmCanSwapOut()",
          "old_line_content": "                 * a fork()ed Redis trying to save stuff on disk. */",
          "new_line_content": "            if (!vmCanSwapOut() ||",
          "content_same": false
        },
        {
          "line": 7629,
          "old_api": null,
          "new_api": "freeIOJob",
          "old_text": null,
          "new_text": "freeIOJob(j)",
          "old_line_content": "                 * if the job will be canceled, we'll mark them as freed",
          "new_line_content": "                freeIOJob(j);",
          "content_same": false
        },
        {
          "line": 3536,
          "old_api": null,
          "new_api": "addReplyBulkLen",
          "old_text": null,
          "new_text": "addReplyBulkLen(c,o)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyBulkLen(c,o);",
          "content_same": false
        },
        {
          "line": 3537,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,o)",
          "old_line_content": "    }",
          "new_line_content": "            addReply(c,o);",
          "content_same": false
        },
        {
          "line": 3538,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.crlf)",
          "old_line_content": "}",
          "new_line_content": "            addReply(c,shared.crlf);",
          "content_same": false
        },
        {
          "line": 5585,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(vector[j].obj)",
          "old_line_content": "                redisSortOperation *sop = ln->value;",
          "new_line_content": "                incrRefCount(vector[j].obj);",
          "content_same": false
        },
        {
          "line": 5587,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(operations,&li)",
          "old_line_content": "                    vector[j].obj);",
          "new_line_content": "            listRewind(operations,&li);",
          "content_same": false
        },
        {
          "line": 5588,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&li)",
          "old_line_content": "",
          "new_line_content": "            while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 5590,
          "old_api": null,
          "new_api": "lookupKeyByPattern",
          "old_text": null,
          "new_text": "lookupKeyByPattern(c->db,sop->pattern,\n                    vector[j].obj)",
          "old_line_content": "                    if (!val || val->type != REDIS_STRING) {",
          "new_line_content": "                robj *val = lookupKeyByPattern(c->db,sop->pattern,",
          "content_same": false
        },
        {
          "line": 7637,
          "old_api": null,
          "new_api": "lockThreadedIO",
          "old_text": null,
          "new_text": "lockThreadedIO()",
          "old_line_content": "        } else if (j->type == REDIS_IOJOB_DO_SWAP) {",
          "new_line_content": "                lockThreadedIO();",
          "content_same": false
        },
        {
          "line": 7638,
          "old_api": null,
          "new_api": "queueIOJob",
          "old_text": null,
          "new_text": "queueIOJob(j)",
          "old_line_content": "            robj *val;",
          "new_line_content": "                queueIOJob(j);",
          "content_same": false
        },
        {
          "line": 7639,
          "old_api": null,
          "new_api": "unlockThreadedIO",
          "old_text": null,
          "new_text": "unlockThreadedIO()",
          "old_line_content": "",
          "new_line_content": "                unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 5595,
          "old_api": null,
          "new_api": "createStringObject",
          "old_text": null,
          "new_text": "createStringObject(\"\",0)",
          "old_line_content": "                    }",
          "new_line_content": "                        listAddNodeTail(listPtr,createStringObject(\"\",0));",
          "content_same": false
        },
        {
          "line": 3550,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(c->db->dict,c->argv[1],c->argv[2])",
          "old_line_content": "    }",
          "new_line_content": "    if (dictAdd(c->db->dict,c->argv[1],c->argv[2]) == DICT_ERR) {",
          "content_same": false
        },
        {
          "line": 5598,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(val)",
          "old_line_content": "                }",
          "new_line_content": "                        incrRefCount(val);",
          "content_same": false
        },
        {
          "line": 7648,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"key->refcount: %d\\n\",key->refcount)",
          "old_line_content": "            }",
          "new_line_content": "                printf(\"key->refcount: %d\\n\",key->refcount);",
          "content_same": false
        },
        {
          "line": 3555,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(c->argv[2])",
          "old_line_content": "",
          "new_line_content": "    incrRefCount(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 7651,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"val->ptr: %s\\n\",(char*)j->val->ptr)",
          "old_line_content": "            key->vm.page = j->page;",
          "new_line_content": "                printf(\"val->ptr: %s\\n\",(char*)j->val->ptr);",
          "content_same": false
        },
        {
          "line": 3557,
          "old_api": null,
          "new_api": "removeExpire",
          "old_text": null,
          "new_text": "removeExpire(c->db,c->argv[1])",
          "old_line_content": "    int j;",
          "new_line_content": "    removeExpire(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 5605,
          "old_api": null,
          "new_api": "dictReplace",
          "old_text": null,
          "new_text": "dictReplace(c->db->dict,storekey,listObject)",
          "old_line_content": "         * SORT result is empty a new key is set and maybe the old content",
          "new_line_content": "        if (dictReplace(c->db->dict,storekey,listObject)) {",
          "content_same": false
        },
        {
          "line": 5606,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(storekey)",
          "old_line_content": "         * replaced. */",
          "new_line_content": "            incrRefCount(storekey);",
          "content_same": false
        },
        {
          "line": 7653,
          "old_api": null,
          "new_api": "redisAssert",
          "old_text": null,
          "new_text": "redisAssert(key->storage == REDIS_VM_SWAPPING)",
          "old_line_content": "            key->storage = REDIS_VM_SWAPPED;",
          "new_line_content": "            redisAssert(key->storage == REDIS_VM_SWAPPING);",
          "content_same": false
        },
        {
          "line": 7654,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "            key->vtype = j->val->type;",
          "new_line_content": "            val = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 7659,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(val)",
          "old_line_content": "                (unsigned char*) key->ptr,",
          "new_line_content": "            decrRefCount(val); /* Deallocate the object from memory. */",
          "content_same": false
        },
        {
          "line": 7660,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "                (unsigned long long) j->page, (unsigned long long) j->pages);",
          "new_line_content": "            dictGetEntryVal(de) = NULL;",
          "content_same": false
        },
        {
          "line": 3565,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[j])",
          "old_line_content": "            if (o->type != REDIS_STRING) {",
          "new_line_content": "        robj *o = lookupKeyRead(c->db,c->argv[j]);",
          "content_same": false
        },
        {
          "line": 7661,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_DEBUG,\n                \"VM: object %s swapped out at %lld (%lld pages) (threaded)\",\n                (unsigned char*) key->ptr,\n                (unsigned long long) j->page, (unsigned long long) j->pages)",
          "old_line_content": "            server.vm_stats_swapped_objects++;",
          "new_line_content": "            redisLog(REDIS_DEBUG,",
          "content_same": false
        },
        {
          "line": 3567,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "            } else {",
          "new_line_content": "            addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 5617,
          "old_api": null,
          "new_api": "listRelease",
          "old_text": null,
          "new_text": "listRelease(operations)",
          "old_line_content": "    }",
          "new_line_content": "    listRelease(operations);",
          "content_same": false
        },
        {
          "line": 3572,
          "old_api": null,
          "new_api": "addReplyBulkLen",
          "old_text": null,
          "new_text": "addReplyBulkLen(c,o)",
          "old_line_content": "        }",
          "new_line_content": "                addReplyBulkLen(c,o);",
          "content_same": false
        },
        {
          "line": 3573,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,o)",
          "old_line_content": "    }",
          "new_line_content": "                addReply(c,o);",
          "content_same": false
        },
        {
          "line": 3574,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.crlf)",
          "old_line_content": "}",
          "new_line_content": "                addReply(c,shared.crlf);",
          "content_same": false
        },
        {
          "line": 5620,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(vector[j].u.cmpobj)",
          "old_line_content": "",
          "new_line_content": "            decrRefCount(vector[j].u.cmpobj);",
          "content_same": false
        },
        {
          "line": 5622,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(vector)",
          "old_line_content": " * of 100B, 2G, 100M, 4K, and so forth. */",
          "new_line_content": "    zfree(vector);",
          "content_same": false
        },
        {
          "line": 7670,
          "old_api": null,
          "new_api": "vmCanSwapOut",
          "old_text": null,
          "new_text": "vmCanSwapOut()",
          "old_line_content": "                while(more) {",
          "new_line_content": "            if (trytoswap && vmCanSwapOut() &&",
          "content_same": false
        },
        {
          "line": 7675,
          "old_api": null,
          "new_api": "lockThreadedIO",
          "old_text": null,
          "new_text": "lockThreadedIO()",
          "old_line_content": "                    /* Don't waste CPU time if swappable objects are rare. */",
          "new_line_content": "                    lockThreadedIO();",
          "content_same": false
        },
        {
          "line": 7678,
          "old_api": null,
          "new_api": "unlockThreadedIO",
          "old_text": null,
          "new_text": "unlockThreadedIO()",
          "old_line_content": "                        break;",
          "new_line_content": "                    unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 3584,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"-ERR wrong number of arguments for MSET\\r\\n\")",
          "old_line_content": "     * set nothing at all if at least one already key exists. */",
          "new_line_content": "        addReplySds(c,sdsnew(\"-ERR wrong number of arguments for MSET\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 7680,
          "old_api": null,
          "new_api": "vmSwapOneObjectThreaded",
          "old_text": null,
          "new_text": "vmSwapOneObjectThreaded()",
          "old_line_content": "                }",
          "new_line_content": "                    if (vmSwapOneObjectThreaded() == REDIS_ERR) {",
          "content_same": false
        },
        {
          "line": 5636,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(s,\"%.2fK\",d)",
          "old_line_content": "    } else if (n < (1024LL*1024*1024*1024)) {",
          "new_line_content": "        sprintf(s,\"%.2fK\",d);",
          "content_same": false
        },
        {
          "line": 3591,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[j])",
          "old_line_content": "    }",
          "new_line_content": "            if (lookupKeyWrite(c->db,c->argv[j]) != NULL) {",
          "content_same": false
        },
        {
          "line": 5639,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(s,\"%.2fM\",d)",
          "old_line_content": "    }",
          "new_line_content": "        sprintf(s,\"%.2fM\",d);",
          "content_same": false
        },
        {
          "line": 5642,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(s,\"%.2fG\",d)",
          "old_line_content": "/* Create the string returned by the INFO command. This is decoupled",
          "new_line_content": "        sprintf(s,\"%.2fG\",d);",
          "content_same": false
        },
        {
          "line": 7691,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\n            \"WARNING: read(2) error in vmThreadedIOCompletedJob() %s\",\n            strerror(errno))",
          "old_line_content": "}",
          "new_line_content": "        redisLog(REDIS_WARNING,",
          "content_same": false
        },
        {
          "line": 3597,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.czero)",
          "old_line_content": "    for (j = 1; j < c->argc; j += 2) {",
          "new_line_content": "        addReply(c, shared.czero);",
          "content_same": false
        },
        {
          "line": 7693,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "static void lockThreadedIO(void) {",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 3605,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(c->db->dict,c->argv[j],c->argv[j+1])",
          "old_line_content": "        } else {",
          "new_line_content": "        retval = dictAdd(c->db->dict,c->argv[j],c->argv[j+1]);",
          "content_same": false
        },
        {
          "line": 7702,
          "old_api": null,
          "new_api": "pthread_mutex_unlock",
          "old_text": null,
          "new_text": "pthread_mutex_unlock(&server.io_mutex)",
          "old_line_content": " * processed, otherwise make sure to flag it as canceled. */",
          "new_line_content": "    pthread_mutex_unlock(&server.io_mutex);",
          "content_same": false
        },
        {
          "line": 5655,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "        \"multiplexing_api:%s\\r\\n\"",
          "new_line_content": "    bytesToHuman(hmem,zmalloc_used_memory());",
          "content_same": false
        },
        {
          "line": 3608,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(c->argv[j+1])",
          "old_line_content": "        }",
          "new_line_content": "            incrRefCount(c->argv[j+1]);",
          "content_same": false
        },
        {
          "line": 5656,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "        \"process_id:%ld\\r\\n\"",
          "new_line_content": "    info = sdscatprintf(sdsempty(),",
          "content_same": false
        },
        {
          "line": 3610,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(c->argv[j])",
          "old_line_content": "    }",
          "new_line_content": "            incrRefCount(c->argv[j]);",
          "content_same": false
        },
        {
          "line": 3611,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(c->argv[j+1])",
          "old_line_content": "    server.dirty += (c->argc-1)/2;",
          "new_line_content": "            incrRefCount(c->argv[j+1]);",
          "content_same": false
        },
        {
          "line": 3613,
          "old_api": null,
          "new_api": "removeExpire",
          "old_text": null,
          "new_text": "removeExpire(c->db,c->argv[j])",
          "old_line_content": "}",
          "new_line_content": "        removeExpire(c->db,c->argv[j]);",
          "content_same": false
        },
        {
          "line": 7715,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(o->storage == REDIS_VM_LOADING || o->storage == REDIS_VM_SWAPPING)",
          "old_line_content": "    for (i = 0; i < 3; i++) {",
          "new_line_content": "    assert(o->storage == REDIS_VM_LOADING || o->storage == REDIS_VM_SWAPPING);",
          "content_same": false
        },
        {
          "line": 7717,
          "old_api": null,
          "new_api": "lockThreadedIO",
          "old_text": null,
          "new_text": "lockThreadedIO()",
          "old_line_content": "        listIter li;",
          "new_line_content": "    lockThreadedIO();",
          "content_same": false
        },
        {
          "line": 3624,
          "old_api": null,
          "new_api": "msetGenericCommand",
          "old_text": null,
          "new_text": "msetGenericCommand(c,1)",
          "old_line_content": "    long long value;",
          "new_line_content": "    msetGenericCommand(c,1);",
          "content_same": false
        },
        {
          "line": 7723,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(lists[i],&li)",
          "old_line_content": "            if (job->canceled) continue; /* Skip this, already canceled. */",
          "new_line_content": "        listRewind(lists[i],&li);",
          "content_same": false
        },
        {
          "line": 3632,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "        if (o->type != REDIS_STRING) {",
          "new_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 7728,
          "old_api": null,
          "new_api": "compareStringObjects",
          "old_text": null,
          "new_text": "compareStringObjects(job->key,o)",
          "old_line_content": "                 * or happened but is now discarded. */",
          "new_line_content": "            if (compareStringObjects(job->key,o) == 0) {",
          "content_same": false
        },
        {
          "line": 5682,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.slaves)",
          "old_line_content": "        hmem,",
          "new_line_content": "        listLength(server.clients)-listLength(server.slaves),",
          "content_same": false
        },
        {
          "line": 5683,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.slaves)",
          "old_line_content": "        server.dirty,",
          "new_line_content": "        listLength(server.slaves),",
          "content_same": false
        },
        {
          "line": 7729,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_DEBUG,\"*** CANCELED %p (%s) (type %d) (LIST ID %d)\\n\",\n                    (void*)job, (char*)o->ptr, job->type, i)",
          "old_line_content": "                if (i != 1 && job->type == REDIS_IOJOB_DO_SWAP)",
          "new_line_content": "                redisLog(REDIS_DEBUG,\"*** CANCELED %p (%s) (type %d) (LIST ID %d)\\n\",",
          "content_same": false
        },
        {
          "line": 5685,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "        server.lastsave,",
          "new_line_content": "        zmalloc_used_memory(),",
          "content_same": false
        },
        {
          "line": 7734,
          "old_api": null,
          "new_api": "vmMarkPagesFree",
          "old_text": null,
          "new_text": "vmMarkPagesFree(job->page,job->pages)",
          "old_line_content": "                case 0: /* io_newjobs */",
          "new_line_content": "                    vmMarkPagesFree(job->page,job->pages);",
          "content_same": false
        },
        {
          "line": 7741,
          "old_api": null,
          "new_api": "freeIOJob",
          "old_text": null,
          "new_text": "freeIOJob(job)",
          "old_line_content": "                    /* Oh Shi- the thread is messing with the Job:",
          "new_line_content": "                    freeIOJob(job);",
          "content_same": false
        },
        {
          "line": 3646,
          "old_api": null,
          "new_api": "redisAssert",
          "old_text": null,
          "new_text": "redisAssert(1 != 1)",
          "old_line_content": "    value += incr;",
          "new_line_content": "                redisAssert(1 != 1);",
          "content_same": false
        },
        {
          "line": 7742,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(lists[i],ln)",
          "old_line_content": "                     *",
          "new_line_content": "                    listDelNode(lists[i],ln);",
          "content_same": false
        },
        {
          "line": 5697,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"master_host:%s\\r\\n\"\n            \"master_port:%d\\r\\n\"\n            \"master_link_status:%s\\r\\n\"\n            \"master_last_io_seconds_ago:%d\\r\\n\"\n            ,server.masterhost,\n            server.masterport,\n            (server.replstate == REDIS_REPL_CONNECTED) ?\n                \"up\" : \"down\",\n            server.master ? ((int)(time(NULL)-server.master->lastinteraction)) : -1\n        )",
          "old_line_content": "            \"master_last_io_seconds_ago:%d\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 3653,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(c->db->dict,c->argv[1],o)",
          "old_line_content": "    } else {",
          "new_line_content": "    retval = dictAdd(c->db->dict,c->argv[1],o);",
          "content_same": false
        },
        {
          "line": 3655,
          "old_api": null,
          "new_api": "dictReplace",
          "old_text": null,
          "new_text": "dictReplace(c->db->dict,c->argv[1],o)",
          "old_line_content": "    }",
          "new_line_content": "        dictReplace(c->db->dict,c->argv[1],o);",
          "content_same": false
        },
        {
          "line": 3656,
          "old_api": null,
          "new_api": "removeExpire",
          "old_text": null,
          "new_text": "removeExpire(c->db,c->argv[1])",
          "old_line_content": "    server.dirty++;",
          "new_line_content": "        removeExpire(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 3661,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.colon)",
          "old_line_content": "",
          "new_line_content": "    addReply(c,shared.colon);",
          "content_same": false
        },
        {
          "line": 3662,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,o)",
          "old_line_content": "static void incrCommand(redisClient *c) {",
          "new_line_content": "    addReply(c,o);",
          "content_same": false
        },
        {
          "line": 5710,
          "old_api": null,
          "new_api": "lockThreadedIO",
          "old_text": null,
          "new_text": "lockThreadedIO()",
          "old_line_content": "            \"vm_conf_pages:%llu\\r\\n\"",
          "new_line_content": "        lockThreadedIO();",
          "content_same": false
        },
        {
          "line": 5711,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"vm_conf_max_memory:%llu\\r\\n\"\n            \"vm_conf_page_size:%llu\\r\\n\"\n            \"vm_conf_pages:%llu\\r\\n\"\n            \"vm_stats_used_pages:%llu\\r\\n\"\n            \"vm_stats_swapped_objects:%llu\\r\\n\"\n            \"vm_stats_swappin_count:%llu\\r\\n\"\n            \"vm_stats_swappout_count:%llu\\r\\n\"\n            \"vm_stats_io_newjobs_len:%lu\\r\\n\"\n            \"vm_stats_io_processing_len:%lu\\r\\n\"\n            \"vm_stats_io_processed_len:%lu\\r\\n\"\n            \"vm_stats_io_active_threads:%lu\\r\\n\"\n            \"vm_stats_blocked_clients:%lu\\r\\n\"\n            ,(unsigned long long) server.vm_max_memory,\n            (unsigned long long) server.vm_page_size,\n            (unsigned long long) server.vm_pages,\n            (unsigned long long) server.vm_stats_used_pages,\n            (unsigned long long) server.vm_stats_swapped_objects,\n            (unsigned long long) server.vm_stats_swapins,\n            (unsigned long long) server.vm_stats_swapouts,\n            (unsigned long) listLength(server.io_newjobs),\n            (unsigned long) listLength(server.io_processing),\n            (unsigned long) listLength(server.io_processed),\n            (unsigned long) server.io_active_threads,\n            (unsigned long) server.vm_blocked_clients\n        )",
          "old_line_content": "            \"vm_stats_used_pages:%llu\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 7762,
          "old_api": null,
          "new_api": "usleep",
          "old_text": null,
          "new_text": "usleep(1)",
          "old_line_content": "                     * just mark it as canceled so that we'll ignore it",
          "new_line_content": "                    usleep(1);",
          "content_same": false
        },
        {
          "line": 3675,
          "old_api": null,
          "new_api": "strtoll",
          "old_text": null,
          "new_text": "strtoll(c->argv[2]->ptr, NULL, 10)",
          "old_line_content": "static void decrbyCommand(redisClient *c) {",
          "new_line_content": "    long long incr = strtoll(c->argv[2]->ptr, NULL, 10);",
          "content_same": false
        },
        {
          "line": 3680,
          "old_api": null,
          "new_api": "strtoll",
          "old_text": null,
          "new_text": "strtoll(c->argv[2]->ptr, NULL, 10)",
          "old_line_content": "/* ========================= Type agnostic commands ========================= */",
          "new_line_content": "    long long incr = strtoll(c->argv[2]->ptr, NULL, 10);",
          "content_same": false
        },
        {
          "line": 3681,
          "old_api": null,
          "new_api": "incrDecrCommand",
          "old_text": null,
          "new_text": "incrDecrCommand(c,-incr)",
          "old_line_content": "",
          "new_line_content": "    incrDecrCommand(c,-incr);",
          "content_same": false
        },
        {
          "line": 7777,
          "old_api": null,
          "new_api": "unlockThreadedIO",
          "old_text": null,
          "new_text": "unlockThreadedIO()",
          "old_line_content": "    }",
          "new_line_content": "                unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 5731,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.io_newjobs)",
          "old_line_content": "            (unsigned long) server.vm_blocked_clients",
          "new_line_content": "            (unsigned long) listLength(server.io_newjobs),",
          "content_same": false
        },
        {
          "line": 5732,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.io_processing)",
          "old_line_content": "        );",
          "new_line_content": "            (unsigned long) listLength(server.io_processing),",
          "content_same": false
        },
        {
          "line": 7782,
          "old_api": null,
          "new_api": "unlockThreadedIO",
          "old_text": null,
          "new_text": "unlockThreadedIO()",
          "old_line_content": "static void *IOThreadEntryPoint(void *arg) {",
          "new_line_content": "    unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 7783,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(1 != 1)",
          "old_line_content": "    iojob *j;",
          "new_line_content": "    assert(1 != 1); /* We should never reach this */",
          "content_same": false
        },
        {
          "line": 5737,
          "old_api": null,
          "new_api": "unlockThreadedIO",
          "old_text": null,
          "new_text": "unlockThreadedIO()",
          "old_line_content": "",
          "new_line_content": "        unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 3690,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(c->db,c->argv[j])",
          "old_line_content": "    }",
          "new_line_content": "        if (deleteKey(c->db,c->argv[j])) {",
          "content_same": false
        },
        {
          "line": 7789,
          "old_api": null,
          "new_api": "REDIS_NOTUSED",
          "old_text": null,
          "new_text": "REDIS_NOTUSED(arg)",
          "old_line_content": "        /* Get a new job to process */",
          "new_line_content": "    REDIS_NOTUSED(arg);",
          "content_same": false
        },
        {
          "line": 5742,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(server.db[j].dict)",
          "old_line_content": "                j, keys, vkeys);",
          "new_line_content": "        keys = dictSize(server.db[j].dict);",
          "content_same": false
        },
        {
          "line": 5743,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(server.db[j].expires)",
          "old_line_content": "        }",
          "new_line_content": "        vkeys = dictSize(server.db[j].expires);",
          "content_same": false
        },
        {
          "line": 3697,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "        break;",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 5745,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info, \"db%d:keys=%lld,expires=%lld\\r\\n\",\n                j, keys, vkeys)",
          "old_line_content": "    return info;",
          "new_line_content": "            info = sdscatprintf(info, \"db%d:keys=%lld,expires=%lld\\r\\n\",",
          "content_same": false
        },
        {
          "line": 7795,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.io_newjobs)",
          "old_line_content": "            server.io_active_threads--;",
          "new_line_content": "        if (listLength(server.io_newjobs) == 0) {",
          "content_same": false
        },
        {
          "line": 3700,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.cone)",
          "old_line_content": "        break;",
          "new_line_content": "        addReply(c,shared.cone);",
          "content_same": false
        },
        {
          "line": 7797,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_DEBUG,\"Thread %lld exiting, nothing to do\",\n                (long long) pthread_self())",
          "old_line_content": "            return NULL;",
          "new_line_content": "            redisLog(REDIS_DEBUG,\"Thread %lld exiting, nothing to do\",",
          "content_same": false
        },
        {
          "line": 7798,
          "old_api": null,
          "new_api": "pthread_self",
          "old_text": null,
          "new_text": "pthread_self()",
          "old_line_content": "        }",
          "new_line_content": "                (long long) pthread_self());",
          "content_same": false
        },
        {
          "line": 3703,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "",
          "new_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),\":%d\\r\\n\",deleted));",
          "content_same": false
        },
        {
          "line": 7800,
          "old_api": null,
          "new_api": "unlockThreadedIO",
          "old_text": null,
          "new_text": "unlockThreadedIO()",
          "old_line_content": "        j = ln->value;",
          "new_line_content": "            unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 5754,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "}",
          "new_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"$%lu\\r\\n\",",
          "content_same": false
        },
        {
          "line": 5755,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(info)",
          "old_line_content": "",
          "new_line_content": "        (unsigned long)sdslen(info)));",
          "content_same": false
        },
        {
          "line": 5756,
          "old_api": null,
          "new_api": "addReplySds",
          "old_text": null,
          "new_text": "addReplySds(c,info)",
          "old_line_content": "static void monitorCommand(redisClient *c) {",
          "new_line_content": "    addReplySds(c,info);",
          "content_same": false
        },
        {
          "line": 5757,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.crlf)",
          "old_line_content": "    /* ignore MONITOR if aleady slave or in monitor mode */",
          "new_line_content": "    addReply(c,shared.crlf);",
          "content_same": false
        },
        {
          "line": 3713,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[1]->ptr)",
          "old_line_content": "    } else {",
          "new_line_content": "    int id = atoi(c->argv[1]->ptr);",
          "content_same": false
        },
        {
          "line": 7809,
          "old_api": null,
          "new_api": "listLast",
          "old_text": null,
          "new_text": "listLast(server.io_processing)",
          "old_line_content": "",
          "new_line_content": "        ln = listLast(server.io_processing); /* We use ln later to remove it */",
          "content_same": false
        },
        {
          "line": 3715,
          "old_api": null,
          "new_api": "selectDb",
          "old_text": null,
          "new_text": "selectDb(c,id)",
          "old_line_content": "    }",
          "new_line_content": "    if (selectDb(c,id) == REDIS_ERR) {",
          "content_same": false
        },
        {
          "line": 3716,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"-ERR invalid DB index\\r\\n\")",
          "old_line_content": "}",
          "new_line_content": "        addReplySds(c,sdsnew(\"-ERR invalid DB index\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 7810,
          "old_api": null,
          "new_api": "unlockThreadedIO",
          "old_text": null,
          "new_text": "unlockThreadedIO()",
          "old_line_content": "        /* Process the Job */",
          "new_line_content": "        unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 3718,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "static void randomkeyCommand(redisClient *c) {",
          "new_line_content": "        addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 5766,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(server.monitors,c)",
          "old_line_content": "/* ================================= Expire ================================= */",
          "new_line_content": "    listAddNodeTail(server.monitors,c);",
          "content_same": false
        },
        {
          "line": 5767,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "static int removeExpire(redisDb *db, robj *key) {",
          "new_line_content": "    addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 7811,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_DEBUG,\"Thread %lld got a new job (type %d): %p about key '%s'\",\n            (long long) pthread_self(), j->type, (void*)j, (char*)j->key->ptr)",
          "old_line_content": "        if (j->type == REDIS_IOJOB_LOAD) {",
          "new_line_content": "        redisLog(REDIS_DEBUG,\"Thread %lld got a new job (type %d): %p about key '%s'\",",
          "content_same": false
        },
        {
          "line": 7819,
          "old_api": null,
          "new_api": "rdbSavedObjectPages",
          "old_text": null,
          "new_text": "rdbSavedObjectPages(j->val,fp)",
          "old_line_content": "                j->canceled = 1;",
          "new_line_content": "            j->pages = rdbSavedObjectPages(j->val,fp);",
          "content_same": false
        },
        {
          "line": 5772,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(db->expires,key)",
          "old_line_content": "    }",
          "new_line_content": "    if (dictDelete(db->expires,key) == DICT_OK) {",
          "content_same": false
        },
        {
          "line": 7820,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "        }",
          "new_line_content": "            fclose(fp);",
          "content_same": false
        },
        {
          "line": 7822,
          "old_api": null,
          "new_api": "vmWriteObjectOnSwap",
          "old_text": null,
          "new_text": "vmWriteObjectOnSwap(j->val,j->page)",
          "old_line_content": "        /* Done: insert the job into the processed queue */",
          "new_line_content": "            if (vmWriteObjectOnSwap(j->val,j->page) == REDIS_ERR)",
          "content_same": false
        },
        {
          "line": 5780,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(db->expires,key,(void*)when)",
          "old_line_content": "        return 1;",
          "new_line_content": "    if (dictAdd(db->expires,key,(void*)when) == DICT_ERR) {",
          "content_same": false
        },
        {
          "line": 3733,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.plus)",
          "old_line_content": "}",
          "new_line_content": "        addReply(c,shared.plus);",
          "content_same": false
        },
        {
          "line": 3734,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "",
          "new_line_content": "        addReply(c,dictGetEntryKey(de));",
          "content_same": false
        },
        {
          "line": 3735,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.crlf)",
          "old_line_content": "static void keysCommand(redisClient *c) {",
          "new_line_content": "        addReply(c,shared.crlf);",
          "content_same": false
        },
        {
          "line": 5783,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(key)",
          "old_line_content": "",
          "new_line_content": "        incrRefCount(key);",
          "content_same": false
        },
        {
          "line": 7829,
          "old_api": null,
          "new_api": "lockThreadedIO",
          "old_text": null,
          "new_text": "lockThreadedIO()",
          "old_line_content": "        ",
          "new_line_content": "        lockThreadedIO();",
          "content_same": false
        },
        {
          "line": 7830,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(server.io_processing,ln)",
          "old_line_content": "        /* Signal the main thread there is new stuff to process */",
          "new_line_content": "        listDelNode(server.io_processing,ln);",
          "content_same": false
        },
        {
          "line": 7832,
          "old_api": null,
          "new_api": "unlockThreadedIO",
          "old_text": null,
          "new_text": "unlockThreadedIO()",
          "old_line_content": "    }",
          "new_line_content": "        unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 7835,
          "old_api": null,
          "new_api": "write",
          "old_text": null,
          "new_text": "write(server.io_ready_pipe_write,\"x\",1)",
          "old_line_content": "",
          "new_line_content": "        assert(write(server.io_ready_pipe_write,\"x\",1) == 1);",
          "content_same": false
        },
        {
          "line": 5794,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(db->expires)",
          "old_line_content": "}",
          "new_line_content": "    if (dictSize(db->expires) == 0 ||",
          "content_same": false
        },
        {
          "line": 5795,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(db->expires,key)",
          "old_line_content": "",
          "new_line_content": "       (de = dictFind(db->expires,key)) == NULL) return -1;",
          "content_same": false
        },
        {
          "line": 3748,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,lenobj)",
          "old_line_content": "",
          "new_line_content": "    addReply(c,lenobj);",
          "content_same": false
        },
        {
          "line": 3749,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(lenobj)",
          "old_line_content": "        sds key = keyobj->ptr;",
          "new_line_content": "    decrRefCount(lenobj);",
          "content_same": false
        },
        {
          "line": 3750,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "        if ((pattern[0] == '*' && pattern[1] == '\\0') ||",
          "new_line_content": "    while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 5797,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "    time_t when;",
          "new_line_content": "    return (time_t) dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 7847,
          "old_api": null,
          "new_api": "sigaddset",
          "old_text": null,
          "new_text": "sigaddset(&mask,SIGPIPE)",
          "old_line_content": "    server.io_active_threads++;",
          "new_line_content": "    sigaddset(&mask,SIGPIPE);",
          "content_same": false
        },
        {
          "line": 7848,
          "old_api": null,
          "new_api": "pthread_sigmask",
          "old_text": null,
          "new_text": "pthread_sigmask(SIG_SETMASK, &mask, &omask)",
          "old_line_content": "}",
          "new_line_content": "    pthread_sigmask(SIG_SETMASK, &mask, &omask);",
          "content_same": false
        },
        {
          "line": 7849,
          "old_api": null,
          "new_api": "pthread_create",
          "old_text": null,
          "new_text": "pthread_create(&thread,&server.io_threads_attr,IOThreadEntryPoint,NULL)",
          "old_line_content": "",
          "new_line_content": "    pthread_create(&thread,&server.io_threads_attr,IOThreadEntryPoint,NULL);",
          "content_same": false
        },
        {
          "line": 7850,
          "old_api": null,
          "new_api": "pthread_sigmask",
          "old_text": null,
          "new_text": "pthread_sigmask(SIG_SETMASK, &omask, NULL)",
          "old_line_content": "/* We need to wait for the last thread to exit before we are able to",
          "new_line_content": "    pthread_sigmask(SIG_SETMASK, &omask, NULL);",
          "content_same": false
        },
        {
          "line": 3756,
          "old_api": null,
          "new_api": "expireIfNeeded",
          "old_text": null,
          "new_text": "expireIfNeeded(c->db,keyobj)",
          "old_line_content": "                numkeys++;",
          "new_line_content": "            if (expireIfNeeded(c->db,keyobj) == 0) {",
          "content_same": false
        },
        {
          "line": 3758,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.space)",
          "old_line_content": "            }",
          "new_line_content": "                    addReply(c,shared.space);",
          "content_same": false
        },
        {
          "line": 3759,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,keyobj)",
          "old_line_content": "        }",
          "new_line_content": "                addReply(c,keyobj);",
          "content_same": false
        },
        {
          "line": 7860,
          "old_api": null,
          "new_api": "lockThreadedIO",
          "old_text": null,
          "new_text": "lockThreadedIO()",
          "old_line_content": "        {",
          "new_line_content": "        lockThreadedIO();",
          "content_same": false
        },
        {
          "line": 3765,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 3766,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "static void dbsizeCommand(redisClient *c) {",
          "new_line_content": "    lenobj->ptr = sdscatprintf(sdsempty(),\"$%lu\\r\\n\",keyslen+(numkeys ? (numkeys-1) : 0));",
          "content_same": false
        },
        {
          "line": 5813,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(db->expires,key)",
          "old_line_content": "static int deleteIfVolatile(redisDb *db, robj *key) {",
          "new_line_content": "    dictDelete(db->expires,key);",
          "content_same": false
        },
        {
          "line": 5814,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(db->dict,key)",
          "old_line_content": "    dictEntry *de;",
          "new_line_content": "    return dictDelete(db->dict,key) == DICT_OK;",
          "content_same": false
        },
        {
          "line": 7862,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.io_processing)",
          "old_line_content": "            return;",
          "new_line_content": "            listLength(server.io_processing) == 0 &&",
          "content_same": false
        },
        {
          "line": 7865,
          "old_api": null,
          "new_api": "unlockThreadedIO",
          "old_text": null,
          "new_text": "unlockThreadedIO()",
          "old_line_content": "         * finshed job, as I/O threads may be hanging trying to write against",
          "new_line_content": "            unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 3771,
          "old_api": null,
          "new_api": "addReplySds",
          "old_text": null,
          "new_text": "addReplySds(c,\n        sdscatprintf(sdsempty(),\":%lu\\r\\n\",dictSize(c->db->dict)))",
          "old_line_content": "static void lastsaveCommand(redisClient *c) {",
          "new_line_content": "    addReplySds(c,",
          "content_same": false
        },
        {
          "line": 5821,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(db->expires)",
          "old_line_content": "    server.dirty++;",
          "new_line_content": "    if (dictSize(db->expires) == 0 ||",
          "content_same": false
        },
        {
          "line": 3776,
          "old_api": null,
          "new_api": "addReplySds",
          "old_text": null,
          "new_text": "addReplySds(c,\n        sdscatprintf(sdsempty(),\":%lu\\r\\n\",server.lastsave))",
          "old_line_content": "static void typeCommand(redisClient *c) {",
          "new_line_content": "    addReplySds(c,",
          "content_same": false
        },
        {
          "line": 3777,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "    robj *o;",
          "new_line_content": "        sdscatprintf(sdsempty(),\":%lu\\r\\n\",server.lastsave));",
          "content_same": false
        },
        {
          "line": 5826,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(db->expires,key)",
          "old_line_content": "static void expireGenericCommand(redisClient *c, robj *key, time_t seconds) {",
          "new_line_content": "    dictDelete(db->expires,key);",
          "content_same": false
        },
        {
          "line": 5827,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(db->dict,key)",
          "old_line_content": "    dictEntry *de;",
          "new_line_content": "    return dictDelete(db->dict,key) == DICT_OK;",
          "content_same": false
        },
        {
          "line": 7873,
          "old_api": null,
          "new_api": "unlockThreadedIO",
          "old_text": null,
          "new_text": "unlockThreadedIO()",
          "old_line_content": "        } else {",
          "new_line_content": "        unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 7875,
          "old_api": null,
          "new_api": "vmThreadedIOCompletedJob",
          "old_text": null,
          "new_text": "vmThreadedIOCompletedJob(NULL,server.io_ready_pipe_read,NULL,0)",
          "old_line_content": "        }",
          "new_line_content": "            vmThreadedIOCompletedJob(NULL,server.io_ready_pipe_read,NULL,0);",
          "content_same": false
        },
        {
          "line": 7876,
          "old_api": null,
          "new_api": "usleep",
          "old_text": null,
          "new_text": "usleep(1000)",
          "old_line_content": "    }",
          "new_line_content": "            usleep(1000); /* 1 millisecond */",
          "content_same": false
        },
        {
          "line": 7878,
          "old_api": null,
          "new_api": "usleep",
          "old_text": null,
          "new_text": "usleep(10000)",
          "old_line_content": "",
          "new_line_content": "            usleep(10000); /* 10 milliseconds */",
          "content_same": false
        },
        {
          "line": 3784,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[1])",
          "old_line_content": "        switch(o->type) {",
          "new_line_content": "    o = lookupKeyRead(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 5833,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(c->db->dict,key)",
          "old_line_content": "    }",
          "new_line_content": "    de = dictFind(c->db->dict,key);",
          "content_same": false
        },
        {
          "line": 7890,
          "old_api": null,
          "new_api": "_exit",
          "old_text": null,
          "new_text": "_exit(1)",
          "old_line_content": "",
          "new_line_content": "        _exit(1);",
          "content_same": false
        },
        {
          "line": 5843,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "        } else {",
          "new_line_content": "        time_t when = time(NULL)+seconds;",
          "content_same": false
        },
        {
          "line": 3796,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(type)",
          "old_line_content": "static void saveCommand(redisClient *c) {",
          "new_line_content": "    addReplySds(c,sdsnew(type));",
          "content_same": false
        },
        {
          "line": 3797,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.crlf)",
          "old_line_content": "    if (server.bgsavechildpid != -1) {",
          "new_line_content": "    addReply(c,shared.crlf);",
          "content_same": false
        },
        {
          "line": 5845,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.cone)",
          "old_line_content": "        }",
          "new_line_content": "            addReply(c,shared.cone);",
          "content_same": false
        },
        {
          "line": 7892,
          "old_api": null,
          "new_api": "fileno",
          "old_text": null,
          "new_text": "fileno(server.vm_fp)",
          "old_line_content": "static void queueIOJob(iojob *j) {",
          "new_line_content": "    server.vm_fd = fileno(server.vm_fp);",
          "content_same": false
        },
        {
          "line": 5848,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "}",
          "new_line_content": "            addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 7899,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(server.io_newjobs,j)",
          "old_line_content": "",
          "new_line_content": "    listAddNodeTail(server.io_newjobs,j);",
          "content_same": false
        },
        {
          "line": 3805,
          "old_api": null,
          "new_api": "rdbSave",
          "old_text": null,
          "new_text": "rdbSave(server.dbfilename)",
          "old_line_content": "    }",
          "new_line_content": "    if (rdbSave(server.dbfilename) == REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 3806,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "}",
          "new_line_content": "        addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 7901,
          "old_api": null,
          "new_api": "spawnIOThread",
          "old_text": null,
          "new_text": "spawnIOThread()",
          "old_line_content": "    iojob *j;",
          "new_line_content": "        spawnIOThread();",
          "content_same": false
        },
        {
          "line": 3808,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.err)",
          "old_line_content": "static void bgsaveCommand(redisClient *c) {",
          "new_line_content": "        addReply(c,shared.err);",
          "content_same": false
        },
        {
          "line": 5859,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    time_t expire;",
          "new_line_content": "    expireGenericCommand(c,c->argv[1],strtol(c->argv[2]->ptr,NULL,10)-time(NULL));",
          "content_same": false
        },
        {
          "line": 7907,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(key->storage == REDIS_VM_MEMORY)",
          "old_line_content": "    j->type = REDIS_IOJOB_PREPARE_SWAP;",
          "new_line_content": "    assert(key->storage == REDIS_VM_MEMORY);",
          "content_same": false
        },
        {
          "line": 7908,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(key->refcount == 1)",
          "old_line_content": "    j->db = db;",
          "new_line_content": "    assert(key->refcount == 1);",
          "content_same": false
        },
        {
          "line": 3814,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"-ERR background save already in progress\\r\\n\")",
          "old_line_content": "        char *status = \"+Background saving started\\r\\n\";",
          "new_line_content": "        addReplySds(c,sdsnew(\"-ERR background save already in progress\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 7910,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*j))",
          "old_line_content": "    j->val = val;",
          "new_line_content": "    j = zmalloc(sizeof(*j));",
          "content_same": false
        },
        {
          "line": 7913,
          "old_api": null,
          "new_api": "dupStringObject",
          "old_text": null,
          "new_text": "dupStringObject(key)",
          "old_line_content": "    j->thread = (pthread_t) -1;",
          "new_line_content": "    j->key = dupStringObject(key);",
          "content_same": false
        },
        {
          "line": 5866,
          "old_api": null,
          "new_api": "getExpire",
          "old_text": null,
          "new_text": "getExpire(c->db,c->argv[1])",
          "old_line_content": "    }",
          "new_line_content": "    expire = getExpire(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 3819,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(status)",
          "old_line_content": "}",
          "new_line_content": "        addReplySds(c,sdsnew(status));",
          "content_same": false
        },
        {
          "line": 5868,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "}",
          "new_line_content": "        ttl = (int) (expire-time(NULL));",
          "content_same": false
        },
        {
          "line": 3821,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.err)",
          "old_line_content": "static void shutdownCommand(redisClient *c) {",
          "new_line_content": "        addReply(c,shared.err);",
          "content_same": false
        },
        {
          "line": 7915,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(val)",
          "old_line_content": "",
          "new_line_content": "    incrRefCount(val);",
          "content_same": false
        },
        {
          "line": 5871,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "",
          "new_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\":%d\\r\\n\",ttl));",
          "content_same": false
        },
        {
          "line": 7920,
          "old_api": null,
          "new_api": "lockThreadedIO",
          "old_text": null,
          "new_text": "lockThreadedIO()",
          "old_line_content": "}",
          "new_line_content": "    lockThreadedIO();",
          "content_same": false
        },
        {
          "line": 7921,
          "old_api": null,
          "new_api": "queueIOJob",
          "old_text": null,
          "new_text": "queueIOJob(j)",
          "old_line_content": "",
          "new_line_content": "    queueIOJob(j);",
          "content_same": false
        },
        {
          "line": 3826,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"User requested shutdown, saving DB...\")",
          "old_line_content": "    if (server.bgsavechildpid != -1) {",
          "new_line_content": "    redisLog(REDIS_WARNING,\"User requested shutdown, saving DB...\");",
          "content_same": false
        },
        {
          "line": 7922,
          "old_api": null,
          "new_api": "unlockThreadedIO",
          "old_text": null,
          "new_text": "unlockThreadedIO()",
          "old_line_content": "/* ============ Virtual Memory - Blocking clients on missing keys =========== */",
          "new_line_content": "    unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 3831,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"There is a live saving child. Killing it!\")",
          "old_line_content": "    if (server.appendonly) {",
          "new_line_content": "        redisLog(REDIS_WARNING,\"There is a live saving child. Killing it!\");",
          "content_same": false
        },
        {
          "line": 3832,
          "old_api": null,
          "new_api": "kill",
          "old_text": null,
          "new_text": "kill(server.bgsavechildpid,SIGKILL)",
          "old_line_content": "        /* Append only file: fsync() the AOF and exit */",
          "new_line_content": "        kill(server.bgsavechildpid,SIGKILL);",
          "content_same": false
        },
        {
          "line": 3837,
          "old_api": null,
          "new_api": "fsync",
          "old_text": null,
          "new_text": "fsync(server.appendfd)",
          "old_line_content": "        /* Snapshotting. Perform a SYNC SAVE and exit */",
          "new_line_content": "        fsync(server.appendfd);",
          "content_same": false
        },
        {
          "line": 3839,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(0)",
          "old_line_content": "            if (server.daemonize)",
          "new_line_content": "        exit(0);",
          "content_same": false
        },
        {
          "line": 5891,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(mc->argv[i])",
          "old_line_content": "}",
          "new_line_content": "            decrRefCount(mc->argv[i]);",
          "content_same": false
        },
        {
          "line": 5892,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(mc->argv)",
          "old_line_content": "",
          "new_line_content": "        zfree(mc->argv);",
          "content_same": false
        },
        {
          "line": 3845,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "        } else {",
          "new_line_content": "            redisLog(REDIS_WARNING,\"%zu bytes used at exit\",zmalloc_used_memory());",
          "content_same": false
        },
        {
          "line": 3846,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Server exit now, bye bye...\")",
          "old_line_content": "            /* Ooops.. error saving! The best we can do is to continue operating.",
          "new_line_content": "            redisLog(REDIS_WARNING,\"Server exit now, bye bye...\");",
          "content_same": false
        },
        {
          "line": 3847,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(server.vm_swap_file)",
          "old_line_content": "             * Note that if there was a background saving process, in the next",
          "new_line_content": "            if (server.vm_enabled) unlink(server.vm_swap_file);",
          "content_same": false
        },
        {
          "line": 3848,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(0)",
          "old_line_content": "             * cron() Redis will be notified that the background saving aborted,",
          "new_line_content": "            exit(0);",
          "content_same": false
        },
        {
          "line": 5894,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(c->mstate.commands)",
          "old_line_content": "static void queueMultiCommand(redisClient *c, struct redisCommand *cmd) {",
          "new_line_content": "    zfree(c->mstate.commands);",
          "content_same": false
        },
        {
          "line": 7940,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(c->db->dict,key)",
          "old_line_content": "        return 0;",
          "new_line_content": "    de = dictFind(c->db->dict,key);",
          "content_same": false
        },
        {
          "line": 7942,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "        /* We were swapping the key, undo it! */",
          "new_line_content": "    o = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 7947,
          "old_api": null,
          "new_api": "vmCancelThreadedIOJob",
          "old_text": null,
          "new_text": "vmCancelThreadedIOJob(o)",
          "old_line_content": "    /* OK: the key is either swapped, or being loaded just now. */",
          "new_line_content": "        vmCancelThreadedIOJob(o);",
          "content_same": false
        },
        {
          "line": 3854,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Error trying to save the DB, can't exit\")",
          "old_line_content": "}",
          "new_line_content": "            redisLog(REDIS_WARNING,\"Error trying to save the DB, can't exit\"); ",
          "content_same": false
        },
        {
          "line": 3855,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"-ERR can't quit, problems saving the DB\\r\\n\")",
          "old_line_content": "",
          "new_line_content": "            addReplySds(c,sdsnew(\"-ERR can't quit, problems saving the DB\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 5902,
          "old_api": null,
          "new_api": "zrealloc",
          "old_text": null,
          "new_text": "zrealloc(c->mstate.commands,\n            sizeof(multiCmd)*(c->mstate.count+1))",
          "old_line_content": "    mc->argc = c->argc;",
          "new_line_content": "    c->mstate.commands = zrealloc(c->mstate.commands,",
          "content_same": false
        },
        {
          "line": 5907,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(robj*)*c->argc)",
          "old_line_content": "    c->mstate.count++;",
          "new_line_content": "    mc->argv = zmalloc(sizeof(robj*)*c->argc);",
          "content_same": false
        },
        {
          "line": 5908,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(mc->argv,c->argv,sizeof(robj*)*c->argc)",
          "old_line_content": "}",
          "new_line_content": "    memcpy(mc->argv,c->argv,sizeof(robj*)*c->argc);",
          "content_same": false
        },
        {
          "line": 7956,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(key)",
          "old_line_content": "    if (de == NULL) {",
          "new_line_content": "    incrRefCount(key);",
          "content_same": false
        },
        {
          "line": 5910,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(mc->argv[j])",
          "old_line_content": "static void multiCommand(redisClient *c) {",
          "new_line_content": "        incrRefCount(mc->argv[j]);",
          "content_same": false
        },
        {
          "line": 7959,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(c->db->io_keys,key)",
          "old_line_content": "        /* For every key we take a list of clients blocked for it */",
          "new_line_content": "    de = dictFind(c->db->io_keys,key);",
          "content_same": false
        },
        {
          "line": 3864,
          "old_api": null,
          "new_api": "sdscmp",
          "old_text": null,
          "new_text": "sdscmp(c->argv[1]->ptr,c->argv[2]->ptr)",
          "old_line_content": "",
          "new_line_content": "    if (sdscmp(c->argv[1]->ptr,c->argv[2]->ptr) == 0) {",
          "content_same": false
        },
        {
          "line": 5916,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "    int j;",
          "new_line_content": "    addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 3869,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "    }",
          "new_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 7964,
          "old_api": null,
          "new_api": "listCreate",
          "old_text": null,
          "new_text": "listCreate()",
          "old_line_content": "    } else {",
          "new_line_content": "        l = listCreate();",
          "content_same": false
        },
        {
          "line": 7966,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(key)",
          "old_line_content": "    }",
          "new_line_content": "        incrRefCount(key);",
          "content_same": false
        },
        {
          "line": 7969,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "    /* Are we already loading the key from disk? If not create a job */",
          "new_line_content": "        l = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 7971,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(l,c)",
          "old_line_content": "        iojob *j;",
          "new_line_content": "    listAddNodeTail(l,c);",
          "content_same": false
        },
        {
          "line": 3876,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(c->db->dict,c->argv[2],o)",
          "old_line_content": "            return;",
          "new_line_content": "    if (dictAdd(c->db->dict,c->argv[2],o) == DICT_ERR) {",
          "content_same": false
        },
        {
          "line": 5925,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"-ERR EXEC without MULTI\\r\\n\")",
          "old_line_content": "    orig_argv = c->argv;",
          "new_line_content": "        addReplySds(c,sdsnew(\"-ERR EXEC without MULTI\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 3879,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "    } else {",
          "new_line_content": "            addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 7978,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*j))",
          "old_line_content": "        j->key->vtype = o->vtype;",
          "new_line_content": "        j = zmalloc(sizeof(*j));",
          "content_same": false
        },
        {
          "line": 7981,
          "old_api": null,
          "new_api": "dupStringObject",
          "old_text": null,
          "new_text": "dupStringObject(key)",
          "old_line_content": "        j->canceled = 0;",
          "new_line_content": "        j->key = dupStringObject(key);",
          "content_same": false
        },
        {
          "line": 3886,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(c->db,c->argv[1])",
          "old_line_content": "",
          "new_line_content": "    deleteKey(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 5939,
          "old_api": null,
          "new_api": "freeClientMultiState",
          "old_text": null,
          "new_text": "freeClientMultiState(c)",
          "old_line_content": "",
          "new_line_content": "    freeClientMultiState(c);",
          "content_same": false
        },
        {
          "line": 5940,
          "old_api": null,
          "new_api": "initClientMultiState",
          "old_text": null,
          "new_text": "initClientMultiState(c)",
          "old_line_content": "/* =========================== Blocking Operations  ========================= */",
          "new_line_content": "    initClientMultiState(c);",
          "content_same": false
        },
        {
          "line": 7987,
          "old_api": null,
          "new_api": "lockThreadedIO",
          "old_text": null,
          "new_text": "lockThreadedIO()",
          "old_line_content": "    return 1;",
          "new_line_content": "        lockThreadedIO();",
          "content_same": false
        },
        {
          "line": 7988,
          "old_api": null,
          "new_api": "queueIOJob",
          "old_text": null,
          "new_text": "queueIOJob(j)",
          "old_line_content": "}",
          "new_line_content": "        queueIOJob(j);",
          "content_same": false
        },
        {
          "line": 7989,
          "old_api": null,
          "new_api": "unlockThreadedIO",
          "old_text": null,
          "new_text": "unlockThreadedIO()",
          "old_line_content": "",
          "new_line_content": "        unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 3896,
          "old_api": null,
          "new_api": "renameGenericCommand",
          "old_text": null,
          "new_text": "renameGenericCommand(c,1)",
          "old_line_content": "    robj *o;",
          "new_line_content": "    renameGenericCommand(c,1);",
          "content_same": false
        },
        {
          "line": 3907,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[2]->ptr)",
          "old_line_content": "    dst = c->db;",
          "new_line_content": "    if (selectDb(c,atoi(c->argv[2]->ptr)) == REDIS_ERR) {",
          "content_same": false
        },
        {
          "line": 8006,
          "old_api": null,
          "new_api": "waitForSwappedKey",
          "old_text": null,
          "new_text": "waitForSwappedKey(c,c->argv[1])",
          "old_line_content": "        c->flags |= REDIS_IO_WAIT;",
          "new_line_content": "        waitForSwappedKey(c,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 3912,
          "old_api": null,
          "new_api": "selectDb",
          "old_text": null,
          "new_text": "selectDb(c,srcid)",
          "old_line_content": "    if (src == dst) {",
          "new_line_content": "    selectDb(c,srcid); /* Back to the source DB */",
          "content_same": false
        },
        {
          "line": 8009,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(c->io_keys)",
          "old_line_content": "        return 1;",
          "new_line_content": "    if (listLength(c->io_keys)) {",
          "content_same": false
        },
        {
          "line": 8011,
          "old_api": null,
          "new_api": "aeDeleteFileEvent",
          "old_text": null,
          "new_text": "aeDeleteFileEvent(server.el,c->fd,AE_READABLE)",
          "old_line_content": "        return 0;",
          "new_line_content": "        aeDeleteFileEvent(server.el,c->fd,AE_READABLE);",
          "content_same": false
        },
        {
          "line": 3917,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.sameobjecterr)",
          "old_line_content": "    /* Check if the element exists and get a reference */",
          "new_line_content": "        addReply(c,shared.sameobjecterr);",
          "content_same": false
        },
        {
          "line": 3922,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "    }",
          "new_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 3924,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "    /* Try to add the element to the target DB */",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 3929,
          "old_api": null,
          "new_api": "deleteIfVolatile",
          "old_text": null,
          "new_text": "deleteIfVolatile(dst,c->argv[1])",
          "old_line_content": "    }",
          "new_line_content": "    deleteIfVolatile(dst,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 5982,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(robj*)*numkeys)",
          "old_line_content": "        /* Add the key in the client structure, to map clients -> keys */",
          "new_line_content": "    c->blockingkeys = zmalloc(sizeof(robj*)*numkeys);",
          "content_same": false
        },
        {
          "line": 3935,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(o)",
          "old_line_content": "    server.dirty++;",
          "new_line_content": "    incrRefCount(o);",
          "content_same": false
        },
        {
          "line": 8030,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(c->io_keys,&li)",
          "old_line_content": "            break;",
          "new_line_content": "    listRewind(c->io_keys,&li);",
          "content_same": false
        },
        {
          "line": 8031,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&li)",
          "old_line_content": "        }",
          "new_line_content": "    while ((ln = listNext(&li)) != NULL) {",
          "content_same": false
        },
        {
          "line": 3938,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(src,c->argv[1])",
          "old_line_content": "",
          "new_line_content": "    deleteKey(src,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 8032,
          "old_api": null,
          "new_api": "compareStringObjects",
          "old_text": null,
          "new_text": "compareStringObjects(ln->value,key)",
          "old_line_content": "    }",
          "new_line_content": "        if (compareStringObjects(ln->value,key) == 0) {",
          "content_same": false
        },
        {
          "line": 3940,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.cone)",
          "old_line_content": "static void pushGenericCommand(redisClient *c, int where) {",
          "new_line_content": "    addReply(c,shared.cone);",
          "content_same": false
        },
        {
          "line": 5988,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(keys[j])",
          "old_line_content": "        if (de == NULL) {",
          "new_line_content": "        incrRefCount(keys[j]);",
          "content_same": false
        },
        {
          "line": 5991,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(c->db->blockingkeys,keys[j])",
          "old_line_content": "            /* For every key we take a list of clients blocked for it */",
          "new_line_content": "        de = dictFind(c->db->blockingkeys,keys[j]);",
          "content_same": false
        },
        {
          "line": 3948,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "            return;",
          "new_line_content": "    lobj = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 5996,
          "old_api": null,
          "new_api": "listCreate",
          "old_text": null,
          "new_text": "listCreate()",
          "old_line_content": "        } else {",
          "new_line_content": "            l = listCreate();",
          "content_same": false
        },
        {
          "line": 5998,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(keys[j])",
          "old_line_content": "        }",
          "new_line_content": "            incrRefCount(keys[j]);",
          "content_same": false
        },
        {
          "line": 3951,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "        list = lobj->ptr;",
          "new_line_content": "            addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 8044,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(ln != NULL)",
          "old_line_content": "",
          "new_line_content": "    assert(ln != NULL);",
          "content_same": false
        },
        {
          "line": 6001,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "    /* Mark the client as a blocked client */",
          "new_line_content": "            l = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 3954,
          "old_api": null,
          "new_api": "createListObject",
          "old_text": null,
          "new_text": "createListObject()",
          "old_line_content": "        } else {",
          "new_line_content": "        lobj = createListObject();",
          "content_same": false
        },
        {
          "line": 8046,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(l)",
          "old_line_content": "}",
          "new_line_content": "    if (listLength(l) == 0)",
          "content_same": false
        },
        {
          "line": 8047,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(c->db->io_keys,key)",
          "old_line_content": "",
          "new_line_content": "        dictDelete(c->db->io_keys,key);",
          "content_same": false
        },
        {
          "line": 8049,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(c->io_keys)",
          "old_line_content": "    struct dictEntry *de;",
          "new_line_content": "    return listLength(c->io_keys) == 0;",
          "content_same": false
        },
        {
          "line": 6007,
          "old_api": null,
          "new_api": "aeDeleteFileEvent",
          "old_text": null,
          "new_text": "aeDeleteFileEvent(server.el,c->fd,AE_READABLE)",
          "old_line_content": "/* Unblock a client that's waiting in a blocking operation such as BLPOP */",
          "new_line_content": "    aeDeleteFileEvent(server.el,c->fd,AE_READABLE);",
          "content_same": false
        },
        {
          "line": 3961,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(c->db->dict,c->argv[1],lobj)",
          "old_line_content": "        if (lobj->type != REDIS_LIST) {",
          "new_line_content": "        dictAdd(c->db->dict,c->argv[1],lobj);",
          "content_same": false
        },
        {
          "line": 3963,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(c->argv[2])",
          "old_line_content": "            return;",
          "new_line_content": "        incrRefCount(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 8061,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "    while (len--) {",
          "new_line_content": "    l = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 3969,
          "old_api": null,
          "new_api": "handleClientsWaitingListPush",
          "old_text": null,
          "new_text": "handleClientsWaitingListPush(c,c->argv[1],c->argv[2])",
          "old_line_content": "        list = lobj->ptr;",
          "new_line_content": "        if (handleClientsWaitingListPush(c,c->argv[1],c->argv[2])) {",
          "content_same": false
        },
        {
          "line": 3970,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "        if (where == REDIS_HEAD) {",
          "new_line_content": "            addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 8066,
          "old_api": null,
          "new_api": "listFirst",
          "old_text": null,
          "new_text": "listFirst(l)",
          "old_line_content": "            /* Put the client in the list of clients ready to go as we",
          "new_line_content": "        ln = listFirst(l);",
          "content_same": false
        },
        {
          "line": 6021,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(c->db->blockingkeys,c->blockingkeys[j])",
          "old_line_content": "        /* If the list is empty we need to remove it to avoid wasting memory */",
          "new_line_content": "        de = dictFind(c->db->blockingkeys,c->blockingkeys[j]);",
          "content_same": false
        },
        {
          "line": 8069,
          "old_api": null,
          "new_api": "dontWaitForSwappedKey",
          "old_text": null,
          "new_text": "dontWaitForSwappedKey(c,key)",
          "old_line_content": "        }",
          "new_line_content": "        if (dontWaitForSwappedKey(c,key)) {",
          "content_same": false
        },
        {
          "line": 8072,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(server.io_ready_clients,c)",
          "old_line_content": "",
          "new_line_content": "            listAddNodeTail(server.io_ready_clients,c);",
          "content_same": false
        },
        {
          "line": 3977,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(list,c->argv[2])",
          "old_line_content": "    server.dirty++;",
          "new_line_content": "            listAddNodeTail(list,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 6026,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(l)",
          "old_line_content": "    /* Cleanup the client structure */",
          "new_line_content": "        if (listLength(l) == 0)",
          "content_same": false
        },
        {
          "line": 3979,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(c->argv[2])",
          "old_line_content": "}",
          "new_line_content": "        incrRefCount(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 6028,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(c->blockingkeys[j])",
          "old_line_content": "    c->blockingkeys = NULL;",
          "new_line_content": "        decrRefCount(c->blockingkeys[j]);",
          "content_same": false
        },
        {
          "line": 6031,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(c->blockingkeys)",
          "old_line_content": "    /* Ok now we are ready to get read events from socket, note that we",
          "new_line_content": "    zfree(c->blockingkeys);",
          "content_same": false
        },
        {
          "line": 8082,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr,\"reload\")",
          "old_line_content": "        }",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"reload\")) {",
          "content_same": false
        },
        {
          "line": 3990,
          "old_api": null,
          "new_api": "pushGenericCommand",
          "old_text": null,
          "new_text": "pushGenericCommand(c,REDIS_TAIL)",
          "old_line_content": "    robj *o;",
          "new_line_content": "    pushGenericCommand(c,REDIS_TAIL);",
          "content_same": false
        },
        {
          "line": 8087,
          "old_api": null,
          "new_api": "emptyDb",
          "old_text": null,
          "new_text": "emptyDb()",
          "old_line_content": "        }",
          "new_line_content": "        emptyDb();",
          "content_same": false
        },
        {
          "line": 6041,
          "old_api": null,
          "new_api": "aeCreateFileEvent",
          "old_text": null,
          "new_text": "aeCreateFileEvent(server.el, c->fd, AE_READABLE, readQueryFromClient, c)",
          "old_line_content": "     * freeClient() will be smart enough to call this function",
          "new_line_content": "    aeCreateFileEvent(server.el, c->fd, AE_READABLE, readQueryFromClient, c);",
          "content_same": false
        },
        {
          "line": 3997,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[1])",
          "old_line_content": "    } else {",
          "new_line_content": "    o = lookupKeyRead(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 8094,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr,\"loadaof\")",
          "old_line_content": "            return;",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"loadaof\")) {",
          "content_same": false
        },
        {
          "line": 6047,
          "old_api": null,
          "new_api": "processInputBuffer",
          "old_text": null,
          "new_text": "processInputBuffer(c)",
          "old_line_content": " * 'c' is the \"pushing client\", 'key' is the key it is pushing data against,",
          "new_line_content": "    if (c->querybuf && sdslen(c->querybuf) > 0) processInputBuffer(c);",
          "content_same": false
        },
        {
          "line": 8095,
          "old_api": null,
          "new_api": "emptyDb",
          "old_text": null,
          "new_text": "emptyDb()",
          "old_line_content": "        }",
          "new_line_content": "        emptyDb();",
          "content_same": false
        },
        {
          "line": 4003,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "        }",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 8100,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Append Only File loaded by DEBUG LOADAOF\")",
          "old_line_content": "        robj *key, *val;",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Append Only File loaded by DEBUG LOADAOF\");",
          "content_same": false
        },
        {
          "line": 8101,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "",
          "new_line_content": "        addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 4006,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(l)",
          "old_line_content": "",
          "new_line_content": "            addReplySds(c,sdscatprintf(sdsempty(),\":%d\\r\\n\",listLength(l)));",
          "content_same": false
        },
        {
          "line": 8102,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr,\"object\")",
          "old_line_content": "        if (!de) {",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"object\") && c->argc == 3) {",
          "content_same": false
        },
        {
          "line": 4015,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[1])",
          "old_line_content": "        if (o->type != REDIS_LIST) {",
          "new_line_content": "    o = lookupKeyRead(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 8111,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "                \"+Key at:%p refcount:%d, value at:%p refcount:%d \"",
          "new_line_content": "        val = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 4017,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "        } else {",
          "new_line_content": "        addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 4020,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "            ",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 6068,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "",
          "new_line_content": "    l = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 8118,
          "old_api": null,
          "new_api": "rdbSavedObjectLen",
          "old_text": null,
          "new_text": "rdbSavedObjectLen(val,NULL)",
          "old_line_content": "                \"using %llu pages\\r\\n\",",
          "new_line_content": "                val->encoding, (long long) rdbSavedObjectLen(val,NULL)));",
          "content_same": false
        },
        {
          "line": 8120,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "                (unsigned long long) key->vm.usedpages));",
          "new_line_content": "            addReplySds(c,sdscatprintf(sdsempty(),",
          "content_same": false
        },
        {
          "line": 4029,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(ln)",
          "old_line_content": "            }",
          "new_line_content": "                robj *ele = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 4030,
          "old_api": null,
          "new_api": "addReplyBulkLen",
          "old_text": null,
          "new_text": "addReplyBulkLen(c,ele)",
          "old_line_content": "        }",
          "new_line_content": "                addReplyBulkLen(c,ele);",
          "content_same": false
        },
        {
          "line": 4031,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,ele)",
          "old_line_content": "    }",
          "new_line_content": "                addReply(c,ele);",
          "content_same": false
        },
        {
          "line": 4032,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.crlf)",
          "old_line_content": "}",
          "new_line_content": "                addReply(c,shared.crlf);",
          "content_same": false
        },
        {
          "line": 6077,
          "old_api": null,
          "new_api": "addReplyBulkLen",
          "old_text": null,
          "new_text": "addReplyBulkLen(receiver,ele)",
          "old_line_content": "    return 1;",
          "new_line_content": "    addReplyBulkLen(receiver,ele);",
          "content_same": false
        },
        {
          "line": 6078,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(receiver,ele)",
          "old_line_content": "}",
          "new_line_content": "    addReply(receiver,ele);",
          "content_same": false
        },
        {
          "line": 6079,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(receiver,shared.crlf)",
          "old_line_content": "",
          "new_line_content": "    addReply(receiver,shared.crlf);",
          "content_same": false
        },
        {
          "line": 6080,
          "old_api": null,
          "new_api": "unblockClientWaitingData",
          "old_text": null,
          "new_text": "unblockClientWaitingData(receiver)",
          "old_line_content": "/* Blocking RPOP/LPOP */",
          "new_line_content": "    unblockClientWaitingData(receiver);",
          "content_same": false
        },
        {
          "line": 8126,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr,\"swapout\")",
          "old_line_content": "        if (!server.vm_enabled) {",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"swapout\") && c->argc == 3) {",
          "content_same": false
        },
        {
          "line": 4042,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "        if (o->type != REDIS_LIST) {",
          "new_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 6091,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[j])",
          "old_line_content": "                return;",
          "new_line_content": "        o = lookupKeyWrite(c->db,c->argv[j]);",
          "content_same": false
        },
        {
          "line": 4044,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nokeyerr)",
          "old_line_content": "        } else {",
          "new_line_content": "        addReply(c,shared.nokeyerr);",
          "content_same": false
        },
        {
          "line": 8142,
          "old_api": null,
          "new_api": "dupStringObject",
          "old_text": null,
          "new_text": "dupStringObject(key)",
          "old_line_content": "        /* Swap it */",
          "new_line_content": "            robj *newkey = dupStringObject(key);",
          "content_same": false
        },
        {
          "line": 4047,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "            ",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 8143,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(key)",
          "old_line_content": "        if (key->storage != REDIS_VM_MEMORY) {",
          "new_line_content": "            decrRefCount(key);",
          "content_same": false
        },
        {
          "line": 6098,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(list)",
          "old_line_content": "                    int orig_argc;",
          "new_line_content": "                if (listLength(list) != 0) {",
          "content_same": false
        },
        {
          "line": 8148,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"-ERR This key is not in memory\\r\\n\")",
          "old_line_content": "        } else {",
          "new_line_content": "            addReplySds(c,sdsnew(\"-ERR This key is not in memory\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 8150,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "        }",
          "new_line_content": "            dictGetEntryVal(de) = NULL;",
          "content_same": false
        },
        {
          "line": 8151,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "    } else {",
          "new_line_content": "            addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 8153,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.err)",
          "old_line_content": "            \"-ERR Syntax error, try DEBUG [SEGFAULT|OBJECT <key>|SWAPOUT <key>|RELOAD]\\r\\n\"));",
          "new_line_content": "            addReply(c,shared.err);",
          "content_same": false
        },
        {
          "line": 4058,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(ele)",
          "old_line_content": "                server.dirty++;",
          "new_line_content": "                decrRefCount(ele);",
          "content_same": false
        },
        {
          "line": 4059,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(ln)",
          "old_line_content": "            }",
          "new_line_content": "                listNodeValue(ln) = c->argv[3];",
          "content_same": false
        },
        {
          "line": 4060,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(c->argv[3])",
          "old_line_content": "        }",
          "new_line_content": "                incrRefCount(c->argv[3]);",
          "content_same": false
        },
        {
          "line": 4061,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "    }",
          "new_line_content": "                addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 8156,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\n            \"-ERR Syntax error, try DEBUG [SEGFAULT|OBJECT <key>|SWAPOUT <key>|RELOAD]\\r\\n\")",
          "old_line_content": "",
          "new_line_content": "        addReplySds(c,sdsnew(",
          "content_same": false
        },
        {
          "line": 8162,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"=== ASSERTION FAILED ===\")",
          "old_line_content": "    *((char*)-1) = 'x';",
          "new_line_content": "    redisLog(REDIS_WARNING,\"=== ASSERTION FAILED ===\");",
          "content_same": false
        },
        {
          "line": 8163,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"==> %s:%d '%s' is not true\\n\",file,line,estr)",
          "old_line_content": "#endif",
          "new_line_content": "    redisLog(REDIS_WARNING,\"==> %s:%d '%s' is not true\\n\",file,line,estr);",
          "content_same": false
        },
        {
          "line": 8165,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"(forcing SIGSEGV in order to print the stack trace)\")",
          "old_line_content": "",
          "new_line_content": "    redisLog(REDIS_WARNING,\"(forcing SIGSEGV in order to print the stack trace)\");",
          "content_same": false
        },
        {
          "line": 6118,
          "old_api": null,
          "new_api": "addReplyBulkLen",
          "old_text": null,
          "new_text": "addReplyBulkLen(c,argv[1])",
          "old_line_content": "",
          "new_line_content": "                    addReplyBulkLen(c,argv[1]);",
          "content_same": false
        },
        {
          "line": 4071,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "        if (o->type != REDIS_LIST) {",
          "new_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 6119,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,argv[1])",
          "old_line_content": "                    /* Fix the client structure with the original stuff */",
          "new_line_content": "                    addReply(c,argv[1]);",
          "content_same": false
        },
        {
          "line": 4073,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "        } else {",
          "new_line_content": "        addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 6120,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.crlf)",
          "old_line_content": "                    c->argv = orig_argv;",
          "new_line_content": "                    addReply(c,shared.crlf);",
          "content_same": false
        },
        {
          "line": 6121,
          "old_api": null,
          "new_api": "popGenericCommand",
          "old_text": null,
          "new_text": "popGenericCommand(c,where)",
          "old_line_content": "                    c->argc = orig_argc;",
          "new_line_content": "                    popGenericCommand(c,where);",
          "content_same": false
        },
        {
          "line": 4076,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 4082,
          "old_api": null,
          "new_api": "listFirst",
          "old_text": null,
          "new_text": "listFirst(list)",
          "old_line_content": "            if (ln == NULL) {",
          "new_line_content": "                ln = listFirst(list);",
          "content_same": false
        },
        {
          "line": 8179,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "",
          "new_line_content": "        fclose(fp);",
          "content_same": false
        },
        {
          "line": 4084,
          "old_api": null,
          "new_api": "listLast",
          "old_text": null,
          "new_text": "listLast(list)",
          "old_line_content": "            } else {",
          "new_line_content": "                ln = listLast(list);",
          "content_same": false
        },
        {
          "line": 6132,
          "old_api": null,
          "new_api": "strtol",
          "old_text": null,
          "new_text": "strtol(c->argv[c->argc-1]->ptr,NULL,10)",
          "old_line_content": "",
          "new_line_content": "    timeout = strtol(c->argv[c->argc-1]->ptr,NULL,10);",
          "content_same": false
        },
        {
          "line": 6133,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "static void blpopCommand(redisClient *c) {",
          "new_line_content": "    if (timeout > 0) timeout += time(NULL);",
          "content_same": false
        },
        {
          "line": 8182,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "",
          "new_line_content": "    fclose(fp);",
          "content_same": false
        },
        {
          "line": 4090,
          "old_api": null,
          "new_api": "addReplyBulkLen",
          "old_text": null,
          "new_text": "addReplyBulkLen(c,ele)",
          "old_line_content": "                server.dirty++;",
          "new_line_content": "                addReplyBulkLen(c,ele);",
          "content_same": false
        },
        {
          "line": 4091,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,ele)",
          "old_line_content": "            }",
          "new_line_content": "                addReply(c,ele);",
          "content_same": false
        },
        {
          "line": 4092,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.crlf)",
          "old_line_content": "        }",
          "new_line_content": "                addReply(c,shared.crlf);",
          "content_same": false
        },
        {
          "line": 4093,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(list,ln)",
          "old_line_content": "    }",
          "new_line_content": "                listDelNode(list,ln);",
          "content_same": false
        },
        {
          "line": 6142,
          "old_api": null,
          "new_api": "blockingPopGenericCommand",
          "old_text": null,
          "new_text": "blockingPopGenericCommand(c,REDIS_TAIL)",
          "old_line_content": "",
          "new_line_content": "    blockingPopGenericCommand(c,REDIS_TAIL);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 4097,
          "old_api": "popGenericCommand",
          "new_api": null,
          "old_text": "popGenericCommand(c,REDIS_HEAD)",
          "new_text": null,
          "old_line_content": "    popGenericCommand(c,REDIS_HEAD);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 8194,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(0)",
          "new_text": null,
          "old_line_content": "    if (fork() != 0) exit(0); /* parent exits */",
          "new_line_content": "static void daemonize(void) {",
          "content_same": false
        },
        {
          "line": 8195,
          "old_api": "setsid",
          "new_api": null,
          "old_text": "setsid()",
          "new_text": null,
          "old_line_content": "    setsid(); /* create a new session */",
          "new_line_content": "    int fd;",
          "content_same": false
        },
        {
          "line": 6145,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    time_t start = time(NULL);",
          "new_line_content": "/* =============================== Replication  ============================= */",
          "content_same": false
        },
        {
          "line": 6150,
          "old_api": "write",
          "new_api": null,
          "old_text": "write(fd,ptr,size)",
          "new_text": null,
          "old_line_content": "            nwritten = write(fd,ptr,size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8200,
          "old_api": "open",
          "new_api": null,
          "old_text": "open(\"/dev/null\", O_RDWR, 0)",
          "new_text": null,
          "old_line_content": "    if ((fd = open(\"/dev/null\", O_RDWR, 0)) != -1) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8201,
          "old_api": "dup2",
          "new_api": null,
          "old_text": "dup2(fd, STDIN_FILENO)",
          "new_text": null,
          "old_line_content": "        dup2(fd, STDIN_FILENO);",
          "new_line_content": "    /* Every output goes to /dev/null. If Redis is daemonized but",
          "content_same": false
        },
        {
          "line": 8202,
          "old_api": "dup2",
          "new_api": null,
          "old_text": "dup2(fd, STDOUT_FILENO)",
          "new_text": null,
          "old_line_content": "        dup2(fd, STDOUT_FILENO);",
          "new_line_content": "     * the 'logfile' is set to 'stdout' in the configuration file",
          "content_same": false
        },
        {
          "line": 8203,
          "old_api": "dup2",
          "new_api": null,
          "old_text": "dup2(fd, STDERR_FILENO)",
          "new_text": null,
          "old_line_content": "        dup2(fd, STDERR_FILENO);",
          "new_line_content": "     * it will not log at all. */",
          "content_same": false
        },
        {
          "line": 4106,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "    int start = atoi(c->argv[2]->ptr);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4107,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[3]->ptr)",
          "new_text": null,
          "old_line_content": "    int end = atoi(c->argv[3]->ptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4109,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    o = lookupKeyRead(c->db,c->argv[1]);",
          "new_line_content": "    robj *o;",
          "content_same": false
        },
        {
          "line": 6155,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "        if ((time(NULL)-start) > timeout) {",
          "new_line_content": "            if (nwritten == -1) return -1;",
          "content_same": false
        },
        {
          "line": 8209,
          "old_api": "getpid",
          "new_api": null,
          "old_text": "getpid()",
          "new_text": null,
          "old_line_content": "        fprintf(fp,\"%d\\n\",getpid());",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 8210,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "        fclose(fp);",
          "new_line_content": "    /* Try to write the pid file */",
          "content_same": false
        },
        {
          "line": 4114,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "    if (o == NULL) {",
          "content_same": false
        },
        {
          "line": 6165,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    time_t start = time(NULL);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 8217,
          "old_api": "initServerConfig",
          "new_api": null,
          "old_text": "initServerConfig()",
          "new_text": null,
          "old_line_content": "    initServerConfig();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6170,
          "old_api": "read",
          "new_api": null,
          "old_text": "read(fd,ptr,size)",
          "new_text": null,
          "old_line_content": "            nread = read(fd,ptr,size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8219,
          "old_api": "resetServerSaveParams",
          "new_api": null,
          "old_text": "resetServerSaveParams()",
          "new_text": null,
          "old_line_content": "        resetServerSaveParams();",
          "new_line_content": "    time_t start;",
          "content_same": false
        },
        {
          "line": 8220,
          "old_api": "loadServerConfig",
          "new_api": null,
          "old_text": "loadServerConfig(argv[1])",
          "new_text": null,
          "old_line_content": "        loadServerConfig(argv[1]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8222,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\"Usage: ./redis-server [/path/to/redis.conf]\\n\")",
          "new_text": null,
          "old_line_content": "        fprintf(stderr,\"Usage: ./redis-server [/path/to/redis.conf]\\n\");",
          "new_line_content": "    if (argc == 2) {",
          "content_same": false
        },
        {
          "line": 6176,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "        if ((time(NULL)-start) > timeout) {",
          "new_line_content": "            ptr += nread;",
          "content_same": false
        },
        {
          "line": 8225,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Warning: no config file specified, using the default config. In order to specify a config file use 'redis-server /path/to/redis.conf'\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Warning: no config file specified, using the default config. In order to specify a config file use 'redis-server /path/to/redis.conf'\");",
          "new_line_content": "    } else if (argc > 2) {",
          "content_same": false
        },
        {
          "line": 4131,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.emptymultibulk)",
          "new_text": null,
          "old_line_content": "                addReply(c,shared.emptymultibulk);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8228,
          "old_api": "initServer",
          "new_api": null,
          "old_text": "initServer()",
          "new_text": null,
          "old_line_content": "    initServer();",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 4138,
          "old_api": "listIndex",
          "new_api": null,
          "old_text": "listIndex(list, start)",
          "new_text": null,
          "old_line_content": "            ln = listIndex(list, start);",
          "new_line_content": "            if (end >= llen) end = llen-1;",
          "content_same": false
        },
        {
          "line": 4139,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "            addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",rangelen));",
          "new_line_content": "            rangelen = (end-start)+1;",
          "content_same": false
        },
        {
          "line": 8236,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_NOTICE,\"DB loaded from append only file: %ld seconds\",time(NULL)-start);",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 4141,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(ln)",
          "new_text": null,
          "old_line_content": "                ele = listNodeValue(ln);",
          "new_line_content": "            /* Return the result in form of a multi-bulk reply */",
          "content_same": false
        },
        {
          "line": 8238,
          "old_api": "rdbLoad",
          "new_api": null,
          "old_text": "rdbLoad(server.dbfilename)",
          "new_text": null,
          "old_line_content": "        if (rdbLoad(server.dbfilename) == REDIS_OK)",
          "new_line_content": "    if (server.appendonly) {",
          "content_same": false
        },
        {
          "line": 6191,
          "old_api": "syncRead",
          "new_api": null,
          "old_text": "syncRead(fd,&c,1,timeout)",
          "new_text": null,
          "old_line_content": "        if (syncRead(fd,&c,1,timeout) == -1) return -1;",
          "new_line_content": "    size--;",
          "content_same": false
        },
        {
          "line": 4144,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.crlf)",
          "new_text": null,
          "old_line_content": "                addReply(c,shared.crlf);",
          "new_line_content": "            for (j = 0; j < rangelen; j++) {",
          "content_same": false
        },
        {
          "line": 8241,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"The server is now ready to accept connections on port %d\", server.port)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_NOTICE,\"The server is now ready to accept connections on port %d\", server.port);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 8244,
          "old_api": "aeDeleteEventLoop",
          "new_api": null,
          "old_text": "aeDeleteEventLoop(server.el)",
          "new_text": null,
          "old_line_content": "    aeDeleteEventLoop(server.el);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4153,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "    int start = atoi(c->argv[2]->ptr);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4154,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[3]->ptr)",
          "new_text": null,
          "old_line_content": "    int end = atoi(c->argv[3]->ptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4156,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "    robj *o;",
          "content_same": false
        },
        {
          "line": 4161,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "    if (o == NULL) {",
          "content_same": false
        },
        {
          "line": 6213,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(c->reply)",
          "new_text": null,
          "old_line_content": "    if (listLength(c->reply) != 0) {",
          "new_line_content": "    /* SYNC can't be issued when the server has pending data to send to",
          "content_same": false
        },
        {
          "line": 6214,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR SYNC is invalid with pending input\\r\\n\")",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(\"-ERR SYNC is invalid with pending input\\r\\n\"));",
          "new_line_content": "     * the client about already issued commands. We need a fresh reply",
          "content_same": false
        },
        {
          "line": 6229,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(server.slaves,&li)",
          "new_text": null,
          "old_line_content": "        listRewind(server.slaves,&li);",
          "new_line_content": "        redisClient *slave;",
          "content_same": false
        },
        {
          "line": 6230,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "        while((ln = listNext(&li))) {",
          "new_line_content": "        listNode *ln;",
          "content_same": false
        },
        {
          "line": 4187,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(list)",
          "new_text": null,
          "old_line_content": "                ln = listFirst(list);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 4188,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(list,ln)",
          "new_text": null,
          "old_line_content": "                listDelNode(list,ln);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6237,
          "old_api": "listRelease",
          "new_api": null,
          "old_text": "listRelease(c->reply)",
          "new_text": null,
          "old_line_content": "            listRelease(c->reply);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 8286,
          "old_api": "REDIS_NOTUSED",
          "new_api": null,
          "old_text": "REDIS_NOTUSED(info)",
          "new_text": null,
          "old_line_content": "    REDIS_NOTUSED(info);",
          "new_line_content": "    int i, trace_size = 0;",
          "content_same": false
        },
        {
          "line": 6238,
          "old_api": "listDup",
          "new_api": null,
          "old_text": "listDup(slave->reply)",
          "new_text": null,
          "old_line_content": "            c->reply = listDup(slave->reply);",
          "new_line_content": "        if (ln) {",
          "content_same": false
        },
        {
          "line": 8288,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\n        \"======= Ooops! Redis %s got signal: -%d- =======\", REDIS_VERSION, sig)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_WARNING,",
          "new_line_content": "    ucontext_t *uc = (ucontext_t*) secret;",
          "content_same": false
        },
        {
          "line": 6240,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Waiting for end of BGSAVE for SYNC\")",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_NOTICE,\"Waiting for end of BGSAVE for SYNC\");",
          "new_line_content": "             * another slave. Set the right state, and copy the buffer. */",
          "content_same": false
        },
        {
          "line": 8291,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING, \"%s\",infostring)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_WARNING, \"%s\",infostring);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6245,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Waiting for next BGSAVE for SYNC\")",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_NOTICE,\"Waiting for next BGSAVE for SYNC\");",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 8297,
          "old_api": "getMcontextEip",
          "new_api": null,
          "old_text": "getMcontextEip(uc)",
          "new_text": null,
          "old_line_content": "    if (getMcontextEip(uc) != NULL) {",
          "new_line_content": "     * corruption conditions. Let it leak as we are going to abort */",
          "content_same": false
        },
        {
          "line": 8298,
          "old_api": "getMcontextEip",
          "new_api": null,
          "old_text": "getMcontextEip(uc)",
          "new_text": null,
          "old_line_content": "        trace[1] = getMcontextEip(uc);",
          "new_line_content": "    ",
          "content_same": false
        },
        {
          "line": 4203,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8300,
          "old_api": "backtrace_symbols",
          "new_api": null,
          "old_text": "backtrace_symbols(trace, trace_size)",
          "new_text": null,
          "old_line_content": "    messages = backtrace_symbols(trace, trace_size);",
          "new_line_content": "    /* overwrite sigaction with caller's address */",
          "content_same": false
        },
        {
          "line": 4205,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "    robj *o;",
          "content_same": false
        },
        {
          "line": 6250,
          "old_api": "rdbSaveBackground",
          "new_api": null,
          "old_text": "rdbSaveBackground(server.dbfilename)",
          "new_text": null,
          "old_line_content": "        if (rdbSaveBackground(server.dbfilename) != REDIS_OK) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 8303,
          "old_api": "findFuncName",
          "new_api": null,
          "old_text": "findFuncName(trace[i], &offset)",
          "new_text": null,
          "old_line_content": "        char *fn = findFuncName(trace[i], &offset), *p;",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4208,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "    if (o == NULL) {",
          "content_same": false
        },
        {
          "line": 8305,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(messages[i],'+')",
          "new_text": null,
          "old_line_content": "        p = strchr(messages[i],'+');",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8306,
          "old_api": "strtol",
          "new_api": null,
          "old_text": "strtol(p+1,NULL,10)",
          "new_text": null,
          "old_line_content": "        if (!fn || (p && ((unsigned long)strtol(p+1,NULL,10)) < offset)) {",
          "new_line_content": "    for (i=1; i<trace_size; ++i) {",
          "content_same": false
        },
        {
          "line": 6251,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Replication failed, can't BGSAVE\")",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_NOTICE,\"Replication failed, can't BGSAVE\");",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 6252,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR Unalbe to perform background save\\r\\n\")",
          "new_text": null,
          "old_line_content": "            addReplySds(c,sdsnew(\"-ERR Unalbe to perform background save\\r\\n\"));",
          "new_line_content": "        /* Ok we don't have a BGSAVE in progress, let's start one */",
          "content_same": false
        },
        {
          "line": 6260,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(server.slaves,c)",
          "new_text": null,
          "old_line_content": "    listAddNodeTail(server.slaves,c);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6266,
          "old_api": "REDIS_NOTUSED",
          "new_api": null,
          "old_text": "REDIS_NOTUSED(el)",
          "new_text": null,
          "old_line_content": "    REDIS_NOTUSED(el);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6267,
          "old_api": "REDIS_NOTUSED",
          "new_api": null,
          "old_text": "REDIS_NOTUSED(mask)",
          "new_text": null,
          "old_line_content": "    REDIS_NOTUSED(mask);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4222,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(ln)",
          "new_text": null,
          "old_line_content": "                robj *ele = listNodeValue(ln);",
          "new_line_content": "                fromtail = 1;",
          "content_same": false
        },
        {
          "line": 8319,
          "old_api": "sigemptyset (&act.sa_mask)",
          "new_api": null,
          "old_text": "sigemptyset (&act.sa_mask)",
          "new_text": null,
          "old_line_content": "    sigemptyset (&act.sa_mask);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4225,
          "old_api": "compareStringObjects",
          "new_api": null,
          "old_text": "compareStringObjects(ele,c->argv[3])",
          "new_text": null,
          "old_line_content": "                if (compareStringObjects(ele,c->argv[3]) == 0) {",
          "new_line_content": "            while (ln) {",
          "content_same": false
        },
        {
          "line": 8324,
          "old_api": "sigaction (SIGSEGV, &act, NULL)",
          "new_api": null,
          "old_text": "sigaction (SIGSEGV, &act, NULL)",
          "new_text": null,
          "old_line_content": "    sigaction (SIGSEGV, &act, NULL);",
          "new_line_content": "    /* When the SA_SIGINFO flag is set in sa_flags then sa_sigaction",
          "content_same": false
        },
        {
          "line": 8325,
          "old_api": "sigaction (SIGBUS, &act, NULL)",
          "new_api": null,
          "old_text": "sigaction (SIGBUS, &act, NULL)",
          "new_text": null,
          "old_line_content": "    sigaction (SIGBUS, &act, NULL);",
          "new_line_content": "     * is used. Otherwise, sa_handler is used */",
          "content_same": false
        },
        {
          "line": 8326,
          "old_api": "sigaction (SIGFPE, &act, NULL)",
          "new_api": null,
          "old_text": "sigaction (SIGFPE, &act, NULL)",
          "new_text": null,
          "old_line_content": "    sigaction (SIGFPE, &act, NULL);",
          "new_line_content": "    act.sa_flags = SA_NODEFER | SA_ONSTACK | SA_RESETHAND | SA_SIGINFO;",
          "content_same": false
        },
        {
          "line": 8327,
          "old_api": "sigaction (SIGILL, &act, NULL)",
          "new_api": null,
          "old_text": "sigaction (SIGILL, &act, NULL)",
          "new_text": null,
          "old_line_content": "    sigaction (SIGILL, &act, NULL);",
          "new_line_content": "    act.sa_sigaction = segvHandler;",
          "content_same": false
        },
        {
          "line": 6278,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        bulkcount = sdscatprintf(sdsempty(),\"$%lld\\r\\n\",(unsigned long long)",
          "new_line_content": "         * socket, but in pratice SO_SNDLOWAT (the minimum count for output",
          "content_same": false
        },
        {
          "line": 4233,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "            addReplySds(c,sdscatprintf(sdsempty(),\":%d\\r\\n\",removed));",
          "new_line_content": "                    if (toremove && removed == toremove) break;",
          "content_same": false
        },
        {
          "line": 6280,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(bulkcount)",
          "new_text": null,
          "old_line_content": "        if (write(fd,bulkcount,sdslen(bulkcount)) != (signed)sdslen(bulkcount))",
          "new_line_content": "        sds bulkcount;",
          "content_same": false
        },
        {
          "line": 6283,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(slave)",
          "new_text": null,
          "old_line_content": "            freeClient(slave);",
          "new_line_content": "            slave->repldbsize);",
          "content_same": false
        },
        {
          "line": 6288,
          "old_api": "lseek",
          "new_api": null,
          "old_text": "lseek(slave->repldbfd,slave->repldboff,SEEK_SET)",
          "new_text": null,
          "old_line_content": "    lseek(slave->repldbfd,slave->repldboff,SEEK_SET);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 6289,
          "old_api": "read",
          "new_api": null,
          "old_text": "read(slave->repldbfd,buf,REDIS_IOBUF_LEN)",
          "new_text": null,
          "old_line_content": "    buflen = read(slave->repldbfd,buf,REDIS_IOBUF_LEN);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6291,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Read error sending DB to slave: %s\",\n            (buflen == 0) ? \"premature EOF\" : strerror(errno))",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Read error sending DB to slave: %s\",",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6298,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "            strerror(errno));",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 6299,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(slave)",
          "new_text": null,
          "old_line_content": "        freeClient(slave);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4256,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    sobj = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 6304,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(slave->repldbfd)",
          "new_text": null,
          "old_line_content": "        close(slave->repldbfd);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 4258,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.nullbulk);",
          "new_line_content": "    robj *sobj;",
          "content_same": false
        },
        {
          "line": 6306,
          "old_api": "aeDeleteFileEvent",
          "new_api": null,
          "old_text": "aeDeleteFileEvent(server.el,slave->fd,AE_WRITABLE)",
          "new_text": null,
          "old_line_content": "        aeDeleteFileEvent(server.el,slave->fd,AE_WRITABLE);",
          "new_line_content": "    slave->repldboff += nwritten;",
          "content_same": false
        },
        {
          "line": 4261,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "    if (sobj == NULL) {",
          "content_same": false
        },
        {
          "line": 4264,
          "old_api": "listLast",
          "new_api": null,
          "old_text": "listLast(srclist)",
          "new_text": null,
          "old_line_content": "            listNode *ln = listLast(srclist);",
          "new_line_content": "        if (sobj->type != REDIS_LIST) {",
          "content_same": false
        },
        {
          "line": 6313,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        addReplySds(slave,sdsempty());",
          "new_line_content": "            sendReplyToClient, slave) == AE_ERR) {",
          "content_same": false
        },
        {
          "line": 4267,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "                addReply(c,shared.nullbulk);",
          "new_line_content": "            list *srclist = sobj->ptr;",
          "content_same": false
        },
        {
          "line": 4269,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[2])",
          "new_text": null,
          "old_line_content": "                robj *dobj = lookupKeyWrite(c->db,c->argv[2]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4270,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(ln)",
          "new_text": null,
          "old_line_content": "                robj *ele = listNodeValue(ln);",
          "new_line_content": "            if (ln == NULL) {",
          "content_same": false
        },
        {
          "line": 4280,
          "old_api": "handleClientsWaitingListPush",
          "new_api": null,
          "old_text": "handleClientsWaitingListPush(c,c->argv[2],ele)",
          "new_text": null,
          "old_line_content": "                if (!handleClientsWaitingListPush(c,c->argv[2],ele)) {",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 6329,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(server.slaves,&li)",
          "new_text": null,
          "old_line_content": "    listRewind(server.slaves,&li);",
          "new_line_content": "    listNode *ln;",
          "content_same": false
        },
        {
          "line": 6330,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "    while((ln = listNext(&li))) {",
          "new_line_content": "    int startbgsave = 0;",
          "content_same": false
        },
        {
          "line": 4283,
          "old_api": "createListObject",
          "new_api": null,
          "old_text": "createListObject()",
          "new_text": null,
          "old_line_content": "                        dobj = createListObject();",
          "new_line_content": "                 * passed to some BLPOP-ing client */",
          "content_same": false
        },
        {
          "line": 4285,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(c->argv[2])",
          "new_text": null,
          "old_line_content": "                        incrRefCount(c->argv[2]);",
          "new_line_content": "                    if (dobj == NULL) {",
          "content_same": false
        },
        {
          "line": 6340,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(slave)",
          "new_text": null,
          "old_line_content": "                freeClient(slave);",
          "new_line_content": "        } else if (slave->replstate == REDIS_REPL_WAIT_BGSAVE_END) {",
          "content_same": false
        },
        {
          "line": 6341,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"SYNC failed. BGSAVE child returned an error\")",
          "new_text": null,
          "old_line_content": "                redisLog(REDIS_WARNING,\"SYNC failed. BGSAVE child returned an error\");",
          "new_line_content": "            struct redis_stat buf;",
          "content_same": false
        },
        {
          "line": 4294,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,ele)",
          "new_text": null,
          "old_line_content": "                addReply(c,ele);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 4295,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.crlf)",
          "new_text": null,
          "old_line_content": "                addReply(c,shared.crlf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6346,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(slave)",
          "new_text": null,
          "old_line_content": "                freeClient(slave);",
          "new_line_content": "                continue;",
          "content_same": false
        },
        {
          "line": 6347,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "                redisLog(REDIS_WARNING,\"SYNC failed. Can't open/stat DB after BGSAVE: %s\", strerror(errno));",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 6353,
          "old_api": "aeDeleteFileEvent",
          "new_api": null,
          "old_text": "aeDeleteFileEvent(server.el,slave->fd,AE_WRITABLE)",
          "new_text": null,
          "old_line_content": "            aeDeleteFileEvent(server.el,slave->fd,AE_WRITABLE);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 6354,
          "old_api": "aeCreateFileEvent",
          "new_api": null,
          "old_text": "aeCreateFileEvent(server.el, slave->fd, AE_WRITABLE, sendBulkToSlave, slave)",
          "new_text": null,
          "old_line_content": "            if (aeCreateFileEvent(server.el, slave->fd, AE_WRITABLE, sendBulkToSlave, slave) == AE_ERR) {",
          "new_line_content": "            slave->repldboff = 0;",
          "content_same": false
        },
        {
          "line": 6355,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(slave)",
          "new_text": null,
          "old_line_content": "                freeClient(slave);",
          "new_line_content": "            slave->repldbsize = buf.st_size;",
          "content_same": false
        },
        {
          "line": 4311,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    set = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4313,
          "old_api": "createSetObject",
          "new_api": null,
          "old_text": "createSetObject()",
          "new_text": null,
          "old_line_content": "        set = createSetObject();",
          "new_line_content": "    robj *set;",
          "content_same": false
        },
        {
          "line": 4314,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(c->db->dict,c->argv[1],set)",
          "new_text": null,
          "old_line_content": "        dictAdd(c->db->dict,c->argv[1],set);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6361,
          "old_api": "rdbSaveBackground",
          "new_api": null,
          "old_text": "rdbSaveBackground(server.dbfilename)",
          "new_text": null,
          "old_line_content": "        if (rdbSaveBackground(server.dbfilename) != REDIS_OK) {",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 6364,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(server.slaves,&li)",
          "new_text": null,
          "old_line_content": "            listRewind(server.slaves,&li);",
          "new_line_content": "    if (startbgsave) {",
          "content_same": false
        },
        {
          "line": 6366,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "            while((ln = listNext(&li))) {",
          "new_line_content": "            listIter li;",
          "content_same": false
        },
        {
          "line": 4323,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(c->argv[2])",
          "new_text": null,
          "old_line_content": "        incrRefCount(c->argv[2]);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 4325,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.cone)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.cone);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6379,
          "old_api": "anetTcpConnect",
          "new_api": null,
          "old_text": "anetTcpConnect(NULL,server.masterhost,server.masterport)",
          "new_text": null,
          "old_line_content": "    int fd = anetTcpConnect(NULL,server.masterhost,server.masterport);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4334,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    set = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4336,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "    robj *set;",
          "content_same": false
        },
        {
          "line": 6384,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "            strerror(errno));",
          "new_line_content": "    int dfd;",
          "content_same": false
        },
        {
          "line": 4339,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "    if (set == NULL) {",
          "content_same": false
        },
        {
          "line": 4342,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(set->ptr,c->argv[2])",
          "new_text": null,
          "old_line_content": "        if (dictDelete(set->ptr,c->argv[2]) == DICT_OK) {",
          "new_line_content": "        if (set->type != REDIS_SET) {",
          "content_same": false
        },
        {
          "line": 6390,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(authcmd, 1024, \"AUTH %s\\r\\n\", server.masterauth)",
          "new_text": null,
          "old_line_content": "    \tsnprintf(authcmd, 1024, \"AUTH %s\\r\\n\", server.masterauth);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4344,
          "old_api": "dictResize",
          "new_api": null,
          "old_text": "dictResize(set->ptr)",
          "new_text": null,
          "old_line_content": "            if (htNeedsResize(set->ptr)) dictResize(set->ptr);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 4345,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.cone)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.cone);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6391,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(server.masterauth)",
          "new_text": null,
          "old_line_content": "    \tif (syncWrite(fd, authcmd, strlen(server.masterauth)+7, 5) == -1) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4347,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.czero);",
          "new_line_content": "            server.dirty++;",
          "content_same": false
        },
        {
          "line": 6392,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd)",
          "new_text": null,
          "old_line_content": "            close(fd);",
          "new_line_content": "    /* AUTH with the master if required. */",
          "content_same": false
        },
        {
          "line": 6393,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Unable to AUTH to MASTER: %s\",\n                strerror(errno))",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,\"Unable to AUTH to MASTER: %s\",",
          "new_line_content": "    if(server.masterauth) {",
          "content_same": false
        },
        {
          "line": 6399,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd)",
          "new_text": null,
          "old_line_content": "            close(fd);",
          "new_line_content": "            return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 6400,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"I/O error reading auth result from MASTER: %s\",\n                strerror(errno))",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,\"I/O error reading auth result from MASTER: %s\",",
          "new_line_content": "    \t}",
          "content_same": false
        },
        {
          "line": 6401,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "                strerror(errno));",
          "new_line_content": "        /* Read the AUTH result.  */",
          "content_same": false
        },
        {
          "line": 4355,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    srcset = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4356,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[2])",
          "new_text": null,
          "old_line_content": "    dstset = lookupKeyWrite(c->db,c->argv[2]);",
          "new_line_content": "static void smoveCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 6406,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Cannot AUTH to MASTER, is the masterauth password correct?\")",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,\"Cannot AUTH to MASTER, is the masterauth password correct?\");",
          "new_line_content": "            return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 4361,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, srcset ? shared.wrongtypeerr : shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c, srcset ? shared.wrongtypeerr : shared.czero);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6412,
          "old_api": "syncWrite",
          "new_api": null,
          "old_text": "syncWrite(fd,\"SYNC \\r\\n\",7,5)",
          "new_text": null,
          "old_line_content": "    if (syncWrite(fd,\"SYNC \\r\\n\",7,5) == -1) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6413,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd)",
          "new_text": null,
          "old_line_content": "        close(fd);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4366,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.wrongtypeerr);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 6414,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"I/O error writing to MASTER: %s\",\n            strerror(errno))",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"I/O error writing to MASTER: %s\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6415,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "            strerror(errno));",
          "new_line_content": "    /* Issue the SYNC command */",
          "content_same": false
        },
        {
          "line": 4372,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6420,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd)",
          "new_text": null,
          "old_line_content": "        close(fd);",
          "new_line_content": "        return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 6421,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"I/O error reading bulk count from MASTER: %s\",\n            strerror(errno))",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"I/O error reading bulk count from MASTER: %s\",",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6422,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "            strerror(errno));",
          "new_line_content": "    /* Read the bulk write count */",
          "content_same": false
        },
        {
          "line": 4378,
          "old_api": "createSetObject",
          "new_api": null,
          "old_text": "createSetObject()",
          "new_text": null,
          "old_line_content": "        dstset = createSetObject();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4379,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(c->db->dict,c->argv[2],dstset)",
          "new_text": null,
          "old_line_content": "        dictAdd(c->db->dict,c->argv[2],dstset);",
          "new_line_content": "    server.dirty++;",
          "content_same": false
        },
        {
          "line": 4380,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(c->argv[2])",
          "new_text": null,
          "old_line_content": "        incrRefCount(c->argv[2]);",
          "new_line_content": "    /* Add the element to the destination set */",
          "content_same": false
        },
        {
          "line": 6427,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Bad protocol from MASTER, the first byte is not '$', are you sure the host and port are right?\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Bad protocol from MASTER, the first byte is not '$', are you sure the host and port are right?\");",
          "new_line_content": "        return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 6433,
          "old_api": "random",
          "new_api": null,
          "old_text": "random()",
          "new_text": null,
          "old_line_content": "    snprintf(tmpfile,256,\"temp-%d.%ld.rdb\",(int)time(NULL),(long int)random());",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6436,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd)",
          "new_text": null,
          "old_line_content": "        close(fd);",
          "new_line_content": "    /* Read the bulk write data on a temp file */",
          "content_same": false
        },
        {
          "line": 4390,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    set = lookupKeyRead(c->db,c->argv[1]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4392,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "    robj *set;",
          "content_same": false
        },
        {
          "line": 4395,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "    if (set == NULL) {",
          "content_same": false
        },
        {
          "line": 6443,
          "old_api": "read",
          "new_api": null,
          "old_text": "read(fd,buf,(dumpsize < 1024)?dumpsize:1024)",
          "new_text": null,
          "old_line_content": "        nread = read(fd,buf,(dumpsize < 1024)?dumpsize:1024);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6445,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"I/O error trying to sync with MASTER: %s\",\n                strerror(errno))",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,\"I/O error trying to sync with MASTER: %s\",",
          "new_line_content": "        int nread, nwritten;",
          "content_same": false
        },
        {
          "line": 4398,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(set->ptr,c->argv[2])",
          "new_text": null,
          "old_line_content": "        if (dictFind(set->ptr,c->argv[2]))",
          "new_line_content": "        if (set->type != REDIS_SET) {",
          "content_same": false
        },
        {
          "line": 6446,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "                strerror(errno));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6448,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(dfd)",
          "new_text": null,
          "old_line_content": "            close(dfd);",
          "new_line_content": "        if (nread == -1) {",
          "content_same": false
        },
        {
          "line": 4401,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.czero);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6453,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,\"Write error writing to the DB dump file needed for MASTER <-> SLAVE synchrnonization: %s\", strerror(errno));",
          "new_line_content": "            return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 6454,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd)",
          "new_text": null,
          "old_line_content": "            close(fd);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4409,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    o = lookupKeyRead(c->db,c->argv[1]);",
          "new_line_content": "static void scardCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 4411,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "    dict *s;",
          "content_same": false
        },
        {
          "line": 6460,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(dfd)",
          "new_text": null,
          "old_line_content": "    close(dfd);",
          "new_line_content": "            return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 6461,
          "old_api": "rename",
          "new_api": null,
          "old_text": "rename(tmpfile,server.dbfilename)",
          "new_text": null,
          "old_line_content": "    if (rename(tmpfile,server.dbfilename) == -1) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6462,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Failed trying to rename the temp DB into dump.rdb in MASTER <-> SLAVE synchronization: %s\", strerror(errno));",
          "new_line_content": "        dumpsize -= nread;",
          "content_same": false
        },
        {
          "line": 6463,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(tmpfile)",
          "new_text": null,
          "old_line_content": "        unlink(tmpfile);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4418,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "            addReplySds(c,sdscatprintf(sdsempty(),\":%lu\\r\\n\",",
          "new_line_content": "        if (o->type != REDIS_SET) {",
          "content_same": false
        },
        {
          "line": 6469,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Failed trying to load the MASTER synchronization DB from disk\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Failed trying to load the MASTER synchronization DB from disk\");",
          "new_line_content": "        return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 6470,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd)",
          "new_text": null,
          "old_line_content": "        close(fd);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4428,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    set = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "static void spopCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 4430,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.nullbulk);",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 4433,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "    if (set == NULL) {",
          "content_same": false
        },
        {
          "line": 6481,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr,\"no\")",
          "new_text": null,
          "old_line_content": "    if (!strcasecmp(c->argv[1]->ptr,\"no\") &&",
          "new_line_content": "    return REDIS_OK;",
          "content_same": false
        },
        {
          "line": 6482,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[2]->ptr,\"one\")",
          "new_text": null,
          "old_line_content": "        !strcasecmp(c->argv[2]->ptr,\"one\")) {",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4436,
          "old_api": "dictGetRandomKey",
          "new_api": null,
          "old_text": "dictGetRandomKey(set->ptr)",
          "new_text": null,
          "old_line_content": "        de = dictGetRandomKey(set->ptr);",
          "new_line_content": "        if (set->type != REDIS_SET) {",
          "content_same": false
        },
        {
          "line": 6484,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(server.masterhost)",
          "new_text": null,
          "old_line_content": "            sdsfree(server.masterhost);",
          "new_line_content": "static void slaveofCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 4438,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.nullbulk);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 4443,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,ele)",
          "new_text": null,
          "old_line_content": "            addReply(c,ele);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 6491,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(server.masterhost)",
          "new_text": null,
          "old_line_content": "        sdsfree(server.masterhost);",
          "new_line_content": "            server.replstate = REDIS_REPL_NONE;",
          "content_same": false
        },
        {
          "line": 4445,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(set->ptr,ele)",
          "new_text": null,
          "old_line_content": "            dictDelete(set->ptr,ele);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6493,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "        server.masterport = atoi(c->argv[2]->ptr);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6494,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(server.master)",
          "new_text": null,
          "old_line_content": "        if (server.master) freeClient(server.master);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 6499,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.ok);",
          "new_line_content": "        server.replstate = REDIS_REPL_CONNECT;",
          "content_same": false
        },
        {
          "line": 4456,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    set = lookupKeyRead(c->db,c->argv[1]);",
          "new_line_content": "static void srandmemberCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 4458,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.nullbulk);",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 4461,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "    if (set == NULL) {",
          "content_same": false
        },
        {
          "line": 6511,
          "old_api": "pthread_mutex_lock",
          "new_api": null,
          "old_text": "pthread_mutex_lock(&server.obj_freelist_mutex)",
          "new_text": null,
          "old_line_content": "    if (server.vm_enabled) pthread_mutex_lock(&server.obj_freelist_mutex);",
          "new_line_content": " * REDIS_ERR. */",
          "content_same": false
        },
        {
          "line": 4464,
          "old_api": "dictGetRandomKey",
          "new_api": null,
          "old_text": "dictGetRandomKey(set->ptr)",
          "new_text": null,
          "old_line_content": "        de = dictGetRandomKey(set->ptr);",
          "new_line_content": "        if (set->type != REDIS_SET) {",
          "content_same": false
        },
        {
          "line": 6512,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.objfreelist)",
          "new_text": null,
          "old_line_content": "    if (listLength(server.objfreelist)) {",
          "new_line_content": "static int tryFreeOneObjectFromFreelist(void) {",
          "content_same": false
        },
        {
          "line": 4466,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.nullbulk);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 6513,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(server.objfreelist)",
          "new_text": null,
          "old_line_content": "        listNode *head = listFirst(server.objfreelist);",
          "new_line_content": "    robj *o;",
          "content_same": false
        },
        {
          "line": 6514,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(head)",
          "new_text": null,
          "old_line_content": "        o = listNodeValue(head);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4471,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,ele)",
          "new_text": null,
          "old_line_content": "            addReply(c,ele);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 4480,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(*d2)",
          "new_text": null,
          "old_line_content": "    return dictSize(*d1)-dictSize(*d2);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6537,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "    while (server.maxmemory && zmalloc_used_memory() > server.maxmemory) {",
          "new_line_content": " * the server will start refusing commands that will enlarge even more the",
          "content_same": false
        },
        {
          "line": 6540,
          "old_api": "tryFreeOneObjectFromFreelist",
          "new_api": null,
          "old_text": "tryFreeOneObjectFromFreelist()",
          "new_text": null,
          "old_line_content": "        if (tryFreeOneObjectFromFreelist() == REDIS_OK) continue;",
          "new_line_content": "static void freeMemoryIfNeeded(void) {",
          "content_same": false
        },
        {
          "line": 4494,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,setskeys[j])",
          "new_text": null,
          "old_line_content": "                    lookupKeyWrite(c->db,setskeys[j]) :",
          "new_line_content": "    for (j = 0; j < setsnum; j++) {",
          "content_same": false
        },
        {
          "line": 4495,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,setskeys[j])",
          "new_text": null,
          "old_line_content": "                    lookupKeyRead(c->db,setskeys[j]);",
          "new_line_content": "        robj *setobj;",
          "content_same": false
        },
        {
          "line": 4497,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(dv)",
          "new_text": null,
          "old_line_content": "            zfree(dv);",
          "new_line_content": "        setobj = dstkey ?",
          "content_same": false
        },
        {
          "line": 6546,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.db[j].expires)",
          "new_text": null,
          "old_line_content": "            if (dictSize(server.db[j].expires)) {",
          "new_line_content": "            int minttl = -1;",
          "content_same": false
        },
        {
          "line": 6553,
          "old_api": "dictGetRandomKey",
          "new_api": null,
          "old_text": "dictGetRandomKey(server.db[j].expires)",
          "new_text": null,
          "old_line_content": "                    de = dictGetRandomKey(server.db[j].expires);",
          "new_line_content": "                 * the natural expire */",
          "content_same": false
        },
        {
          "line": 6554,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "                    t = (time_t) dictGetEntryVal(de);",
          "new_line_content": "                for (k = 0; k < 3; k++) {",
          "content_same": false
        },
        {
          "line": 4508,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(dv)",
          "new_text": null,
          "old_line_content": "            zfree(dv);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 4509,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 6556,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "                        minkey = dictGetEntryKey(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4516,
          "old_api": "qsort",
          "new_api": null,
          "old_text": "qsort(dv,setsnum,sizeof(dict*),qsortCompareSetsByCardinality)",
          "new_text": null,
          "old_line_content": "    qsort(dv,setsnum,sizeof(dict*),qsortCompareSetsByCardinality);",
          "new_line_content": "        dv[j] = setobj->ptr;",
          "content_same": false
        },
        {
          "line": 6570,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    sds buf = sdsempty();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4524,
          "old_api": "createObject",
          "new_api": null,
          "old_text": "createObject(REDIS_STRING,NULL)",
          "new_text": null,
          "old_line_content": "        lenobj = createObject(REDIS_STRING,NULL);",
          "new_line_content": "     * the intersection set size, so we use a trick, append an empty object",
          "content_same": false
        },
        {
          "line": 4525,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,lenobj)",
          "new_text": null,
          "old_line_content": "        addReply(c,lenobj);",
          "new_line_content": "     * to the output list and save the pointer to later modify it with the",
          "content_same": false
        },
        {
          "line": 4526,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(lenobj)",
          "new_text": null,
          "old_line_content": "        decrRefCount(lenobj);",
          "new_line_content": "     * right length */",
          "content_same": false
        },
        {
          "line": 6581,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(seldb,sizeof(seldb),\"%d\",dictid)",
          "new_text": null,
          "old_line_content": "        snprintf(seldb,sizeof(seldb),\"%d\",dictid);",
          "new_line_content": "     * we appendend. To issue a SELECT command is needed. */",
          "content_same": false
        },
        {
          "line": 6582,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(buf,\"*2\\r\\n$6\\r\\nSELECT\\r\\n$%lu\\r\\n%s\\r\\n\",\n            (unsigned long)strlen(seldb),seldb)",
          "new_text": null,
          "old_line_content": "        buf = sdscatprintf(buf,\"*2\\r\\n$6\\r\\nSELECT\\r\\n$%lu\\r\\n%s\\r\\n\",",
          "new_line_content": "    if (dictid != server.appendseldb) {",
          "content_same": false
        },
        {
          "line": 6583,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(seldb)",
          "new_text": null,
          "old_line_content": "            (unsigned long)strlen(seldb),seldb);",
          "new_line_content": "        char seldb[64];",
          "content_same": false
        },
        {
          "line": 4536,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(dv[0])",
          "new_text": null,
          "old_line_content": "    di = dictGetIterator(dv[0]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4538,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "    while((de = dictNext(di)) != NULL) {",
          "new_line_content": "     * the element against all the other sets, if at least one set does",
          "content_same": false
        },
        {
          "line": 6592,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject(\"EXPIREAT\",8)",
          "new_text": null,
          "old_line_content": "        tmpargv[0] = createStringObject(\"EXPIREAT\",8);",
          "new_line_content": "     * EXPIREs into EXPIREATs calls */",
          "content_same": false
        },
        {
          "line": 4545,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "        ele = dictGetEntryKey(de);",
          "new_line_content": "        for (j = 1; j < setsnum; j++)",
          "content_same": false
        },
        {
          "line": 6594,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(argv[1])",
          "new_text": null,
          "old_line_content": "        incrRefCount(argv[1]);",
          "new_line_content": "        long when;",
          "content_same": false
        },
        {
          "line": 4547,
          "old_api": "addReplyBulkLen",
          "new_api": null,
          "old_text": "addReplyBulkLen(c,ele)",
          "new_text": null,
          "old_line_content": "            addReplyBulkLen(c,ele);",
          "new_line_content": "        if (j != setsnum)",
          "content_same": false
        },
        {
          "line": 4548,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,ele)",
          "new_text": null,
          "old_line_content": "            addReply(c,ele);",
          "new_line_content": "            continue; /* at least one set does not contain the member */",
          "content_same": false
        },
        {
          "line": 6595,
          "old_api": "strtol",
          "new_api": null,
          "old_text": "strtol(argv[2]->ptr,NULL,10)",
          "new_text": null,
          "old_line_content": "        when = time(NULL)+strtol(argv[2]->ptr,NULL,10);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6597,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "            sdscatprintf(sdsempty(),\"%ld\",when));",
          "new_line_content": "        tmpargv[1] = argv[1];",
          "content_same": false
        },
        {
          "line": 6602,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(buf,\"*%d\\r\\n\",argc)",
          "new_text": null,
          "old_line_content": "    buf = sdscatprintf(buf,\"*%d\\r\\n\",argc);",
          "new_line_content": "        argv = tmpargv;",
          "content_same": false
        },
        {
          "line": 6607,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(o->ptr)",
          "new_text": null,
          "old_line_content": "        buf = sdscatprintf(buf,\"$%lu\\r\\n\",(unsigned long)sdslen(o->ptr));",
          "new_line_content": "    for (j = 0; j < argc; j++) {",
          "content_same": false
        },
        {
          "line": 6608,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(o->ptr)",
          "new_text": null,
          "old_line_content": "        buf = sdscatlen(buf,o->ptr,sdslen(o->ptr));",
          "new_line_content": "        robj *o = argv[j];",
          "content_same": false
        },
        {
          "line": 4561,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(c->db->dict,dstkey,dstset)",
          "new_text": null,
          "old_line_content": "        dictAdd(c->db->dict,dstkey,dstset);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4562,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(dstkey)",
          "new_text": null,
          "old_line_content": "        incrRefCount(dstkey);",
          "new_line_content": "    if (dstkey) {",
          "content_same": false
        },
        {
          "line": 6609,
          "old_api": "sdscatlen",
          "new_api": null,
          "old_text": "sdscatlen(buf,\"\\r\\n\",2)",
          "new_text": null,
          "old_line_content": "        buf = sdscatlen(buf,\"\\r\\n\",2);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4568,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),\":%lu\\r\\n\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4569,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize((dict*)dstset->ptr)",
          "new_text": null,
          "old_line_content": "            dictSize((dict*)dstset->ptr)));",
          "new_line_content": "    if (!dstkey) {",
          "content_same": false
        },
        {
          "line": 6616,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(argv[j])",
          "new_text": null,
          "old_line_content": "            decrRefCount(argv[j]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6624,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(buf)",
          "new_text": null,
          "old_line_content": "     nwritten = write(server.appendfd,buf,sdslen(buf));",
          "new_line_content": "     * at least if the filesystem we are writing is a real physical one.",
          "content_same": false
        },
        {
          "line": 6625,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(buf)",
          "new_text": null,
          "old_line_content": "     if (nwritten != (signed)sdslen(buf)) {",
          "new_line_content": "     * While this will save us against the server being killed I don't think",
          "content_same": false
        },
        {
          "line": 6630,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,\"Exiting on error writing to the append-only file: %s\",strerror(errno));",
          "new_line_content": "        /* Ooops, we are in troubles. The best thing to do for now is",
          "content_same": false
        },
        {
          "line": 6632,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,\"Exiting on short write while writing to the append-only file: %s\",strerror(errno));",
          "new_line_content": "         * working as expected. */",
          "content_same": false
        },
        {
          "line": 4587,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(dict*)*setsnum)",
          "new_text": null,
          "old_line_content": "    dict **dv = zmalloc(sizeof(dict*)*setsnum);",
          "new_line_content": "#define REDIS_OP_UNION 0",
          "content_same": false
        },
        {
          "line": 6641,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(buf)",
          "new_text": null,
          "old_line_content": "        server.bgrewritebuf = sdscatlen(server.bgrewritebuf,buf,sdslen(buf));",
          "new_line_content": "     * accumulate the differences between the child DB and the current one",
          "content_same": false
        },
        {
          "line": 6643,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(buf)",
          "new_text": null,
          "old_line_content": "    sdsfree(buf);",
          "new_line_content": "     * can append the differences to the new append only file. */",
          "content_same": false
        },
        {
          "line": 6644,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    now = time(NULL);",
          "new_line_content": "    if (server.bgrewritechildpid != -1)",
          "content_same": false
        },
        {
          "line": 4597,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,setskeys[j])",
          "new_text": null,
          "old_line_content": "                    lookupKeyWrite(c->db,setskeys[j]) :",
          "new_line_content": "    for (j = 0; j < setsnum; j++) {",
          "content_same": false
        },
        {
          "line": 4598,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,setskeys[j])",
          "new_text": null,
          "old_line_content": "                    lookupKeyRead(c->db,setskeys[j]);",
          "new_line_content": "        robj *setobj;",
          "content_same": false
        },
        {
          "line": 6649,
          "old_api": "fsync",
          "new_api": null,
          "old_text": "fsync(server.appendfd)",
          "new_text": null,
          "old_line_content": "        fsync(server.appendfd); /* Let's try to get this data on the disk */",
          "new_line_content": "    if (server.appendfsync == APPENDFSYNC_ALWAYS ||",
          "content_same": false
        },
        {
          "line": 4604,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(dv)",
          "new_text": null,
          "old_line_content": "            zfree(dv);",
          "new_line_content": "            dv[j] = NULL;",
          "content_same": false
        },
        {
          "line": 4605,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 6657,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*c))",
          "new_text": null,
          "old_line_content": "    struct redisClient *c = zmalloc(sizeof(*c));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6659,
          "old_api": "selectDb",
          "new_api": null,
          "old_text": "selectDb(c,0)",
          "new_text": null,
          "old_line_content": "    selectDb(c,0);",
          "new_line_content": " * order to load the append only file we need to create a fake client. */",
          "content_same": false
        },
        {
          "line": 4614,
          "old_api": "createSetObject",
          "new_api": null,
          "old_text": "createSetObject()",
          "new_text": null,
          "old_line_content": "    dstset = createSetObject();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6668,
          "old_api": "listCreate",
          "new_api": null,
          "old_text": "listCreate()",
          "new_text": null,
          "old_line_content": "    c->reply = listCreate();",
          "new_line_content": "    c->flags = 0;",
          "content_same": false
        },
        {
          "line": 6669,
          "old_api": "listSetFreeMethod",
          "new_api": null,
          "old_text": "listSetFreeMethod(c->reply,decrRefCount)",
          "new_text": null,
          "old_line_content": "    listSetFreeMethod(c->reply,decrRefCount);",
          "new_line_content": "    /* We set the fake client as a slave waiting for the synchronization",
          "content_same": false
        },
        {
          "line": 4622,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(dv[j])",
          "new_text": null,
          "old_line_content": "        di = dictGetIterator(dv[j]);",
          "new_line_content": "    for (j = 0; j < setsnum; j++) {",
          "content_same": false
        },
        {
          "line": 6670,
          "old_api": "listSetDupMethod",
          "new_api": null,
          "old_text": "listSetDupMethod(c->reply,dupClientReplyValue)",
          "new_text": null,
          "old_line_content": "    listSetDupMethod(c->reply,dupClientReplyValue);",
          "new_line_content": "     * so that Redis will not try to send replies to this client. */",
          "content_same": false
        },
        {
          "line": 4624,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "        while((de = dictNext(di)) != NULL) {",
          "new_line_content": "        if (!dv[j]) continue; /* non existing keys are like empty sets */",
          "content_same": false
        },
        {
          "line": 6675,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(c->querybuf)",
          "new_text": null,
          "old_line_content": "    sdsfree(c->querybuf);",
          "new_line_content": "    return c;",
          "content_same": false
        },
        {
          "line": 6676,
          "old_api": "listRelease",
          "new_api": null,
          "old_text": "listRelease(c->reply)",
          "new_text": null,
          "old_line_content": "    listRelease(c->reply);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6677,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(c)",
          "new_text": null,
          "old_line_content": "    zfree(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4630,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(dstset->ptr,ele,NULL)",
          "new_text": null,
          "old_line_content": "                if (dictAdd(dstset->ptr,ele,NULL) == DICT_OK) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4631,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(ele)",
          "new_text": null,
          "old_line_content": "                    incrRefCount(ele);",
          "new_line_content": "            /* dictAdd will not add the same element multiple times */",
          "content_same": false
        },
        {
          "line": 6685,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(filename,\"r\")",
          "new_text": null,
          "old_line_content": "    FILE *fp = fopen(filename,\"r\");",
          "new_line_content": " * error (the append only file is zero-length) REDIS_ERR is returned. On",
          "content_same": false
        },
        {
          "line": 4640,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "        dictReleaseIterator(di);",
          "new_line_content": "                    cardinality--;",
          "content_same": false
        },
        {
          "line": 6694,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "        exit(1);",
          "new_line_content": "        return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 4647,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",cardinality));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4648,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(dstset->ptr)",
          "new_text": null,
          "old_line_content": "        di = dictGetIterator(dstset->ptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4649,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "        while((de = dictNext(di)) != NULL) {",
          "new_line_content": "    /* Output the content of the resulting set, if not in STORE mode */",
          "content_same": false
        },
        {
          "line": 4654,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,ele)",
          "new_text": null,
          "old_line_content": "            addReply(c,ele);",
          "new_line_content": "            robj *ele;",
          "content_same": false
        },
        {
          "line": 4655,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.crlf)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.crlf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6706,
          "old_api": "fgets",
          "new_api": null,
          "old_text": "fgets(buf,sizeof(buf),fp)",
          "new_text": null,
          "old_line_content": "        if (fgets(buf,sizeof(buf),fp) == NULL) {",
          "new_line_content": "        char buf[128];",
          "content_same": false
        },
        {
          "line": 6707,
          "old_api": "feof",
          "new_api": null,
          "old_text": "feof(fp)",
          "new_text": null,
          "old_line_content": "            if (feof(fp))",
          "new_line_content": "        sds argsds;",
          "content_same": false
        },
        {
          "line": 4662,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(c->db->dict,dstkey,dstset)",
          "new_text": null,
          "old_line_content": "        dictAdd(c->db->dict,dstkey,dstset);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 4663,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(dstkey)",
          "new_text": null,
          "old_line_content": "        incrRefCount(dstkey);",
          "new_line_content": "        /* If we have a target key where to store the resulting set",
          "content_same": false
        },
        {
          "line": 6713,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(buf+1)",
          "new_text": null,
          "old_line_content": "        argc = atoi(buf+1);",
          "new_line_content": "            else",
          "content_same": false
        },
        {
          "line": 6714,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(robj*)*argc)",
          "new_text": null,
          "old_line_content": "        argv = zmalloc(sizeof(robj*)*argc);",
          "new_line_content": "                goto readerr;",
          "content_same": false
        },
        {
          "line": 4668,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(dstset)",
          "new_text": null,
          "old_line_content": "        decrRefCount(dstset);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6716,
          "old_api": "fgets",
          "new_api": null,
          "old_text": "fgets(buf,sizeof(buf),fp)",
          "new_text": null,
          "old_line_content": "            if (fgets(buf,sizeof(buf),fp) == NULL) goto readerr;",
          "new_line_content": "        if (buf[0] != '*') goto fmterr;",
          "content_same": false
        },
        {
          "line": 4670,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),\":%lu\\r\\n\",",
          "new_line_content": "    /* Cleanup */",
          "content_same": false
        },
        {
          "line": 4671,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize((dict*)dstset->ptr)",
          "new_text": null,
          "old_line_content": "            dictSize((dict*)dstset->ptr)));",
          "new_line_content": "    if (!dstkey) {",
          "content_same": false
        },
        {
          "line": 6719,
          "old_api": "sdsnewlen",
          "new_api": null,
          "old_text": "sdsnewlen(NULL,len)",
          "new_text": null,
          "old_line_content": "            argsds = sdsnewlen(NULL,len);",
          "new_line_content": "        for (j = 0; j < argc; j++) {",
          "content_same": false
        },
        {
          "line": 6721,
          "old_api": "createObject",
          "new_api": null,
          "old_text": "createObject(REDIS_STRING,argsds)",
          "new_text": null,
          "old_line_content": "            argv[j] = createObject(REDIS_STRING,argsds);",
          "new_line_content": "            if (buf[0] != '$') goto fmterr;",
          "content_same": false
        },
        {
          "line": 6728,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Unknown command '%s' reading the append only file\", argv[0]->ptr)",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,\"Unknown command '%s' reading the append only file\", argv[0]->ptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6729,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "            exit(1);",
          "new_line_content": "        /* Command lookup */",
          "content_same": false
        },
        {
          "line": 6735,
          "old_api": "tryObjectSharing",
          "new_api": null,
          "old_text": "tryObjectSharing(argv[j])",
          "new_text": null,
          "old_line_content": "                argv[j] = tryObjectSharing(argv[j]);",
          "new_line_content": "        /* Try object sharing and encoding */",
          "content_same": false
        },
        {
          "line": 6738,
          "old_api": "tryObjectEncoding",
          "new_api": null,
          "old_text": "tryObjectEncoding(argv[argc-1])",
          "new_text": null,
          "old_line_content": "            tryObjectEncoding(argv[argc-1]);",
          "new_line_content": "            for(j = 1; j < argc; j++)",
          "content_same": false
        },
        {
          "line": 6744,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(fakeClient->reply)",
          "new_text": null,
          "old_line_content": "        while(listLength(fakeClient->reply))",
          "new_line_content": "        fakeClient->argc = argc;",
          "content_same": false
        },
        {
          "line": 6745,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(fakeClient->reply)",
          "new_text": null,
          "old_line_content": "            listDelNode(fakeClient->reply,listFirst(fakeClient->reply));",
          "new_line_content": "        fakeClient->argv = argv;",
          "content_same": false
        },
        {
          "line": 6747,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(argv[j])",
          "new_text": null,
          "old_line_content": "        for (j = 0; j < argc; j++) decrRefCount(argv[j]);",
          "new_line_content": "        /* Discard the reply objects list from the fake client */",
          "content_same": false
        },
        {
          "line": 6753,
          "old_api": "vmSwapOneObjectBlocking",
          "new_api": null,
          "old_text": "vmSwapOneObjectBlocking()",
          "new_text": null,
          "old_line_content": "                if (vmSwapOneObjectBlocking() == REDIS_ERR) break;",
          "new_line_content": "        /* Handle swapping while loading big datasets when VM is on */",
          "content_same": false
        },
        {
          "line": 6758,
          "old_api": "freeFakeClient",
          "new_api": null,
          "old_text": "freeFakeClient(fakeClient)",
          "new_text": null,
          "old_line_content": "    freeFakeClient(fakeClient);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 4713,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*zn))",
          "new_text": null,
          "old_line_content": "    zskiplistNode *zn = zmalloc(sizeof(*zn));",
          "new_line_content": " * pointers being only at \"level 1\". This allows to traverse the list",
          "content_same": false
        },
        {
          "line": 4715,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(zskiplistNode*) * level)",
          "new_text": null,
          "old_line_content": "    zn->forward = zmalloc(sizeof(zskiplistNode*) * level);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6763,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Unexpected end of file reading the append only file\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Unexpected end of file reading the append only file\");",
          "new_line_content": "    return REDIS_OK;",
          "content_same": false
        },
        {
          "line": 6765,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Unrecoverable error reading the append only file: %s\", strerror(errno));",
          "new_line_content": "readerr:",
          "content_same": false
        },
        {
          "line": 6770,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "    exit(1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4725,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*zsl))",
          "new_text": null,
          "old_line_content": "    zsl = zmalloc(sizeof(*zsl));",
          "new_line_content": "static zskiplist *zslCreate(void) {",
          "content_same": false
        },
        {
          "line": 4728,
          "old_api": "zslCreateNode",
          "new_api": null,
          "old_text": "zslCreateNode(ZSKIPLIST_MAXLEVEL,0,NULL)",
          "new_text": null,
          "old_line_content": "    zsl->header = zslCreateNode(ZSKIPLIST_MAXLEVEL,0,NULL);",
          "new_line_content": "    ",
          "content_same": false
        },
        {
          "line": 6784,
          "old_api": "getDecodedObject",
          "new_api": null,
          "old_text": "getDecodedObject(obj)",
          "new_text": null,
          "old_line_content": "        obj = getDecodedObject(obj);",
          "new_line_content": "     * is called).",
          "content_same": false
        },
        {
          "line": 4737,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(node->obj)",
          "new_text": null,
          "old_line_content": "    decrRefCount(node->obj);",
          "new_line_content": "    return zsl;",
          "content_same": false
        },
        {
          "line": 4738,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(node->forward)",
          "new_text": null,
          "old_line_content": "    zfree(node->forward);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4739,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(node)",
          "new_text": null,
          "old_line_content": "    zfree(node);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6787,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(obj->ptr)",
          "new_text": null,
          "old_line_content": "    snprintf(buf,sizeof(buf),\"$%ld\\r\\n\",(long)sdslen(obj->ptr));",
          "new_line_content": "    if (obj->encoding != REDIS_ENCODING_RAW) {",
          "content_same": false
        },
        {
          "line": 6789,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(obj->ptr)",
          "new_text": null,
          "old_line_content": "    if (sdslen(obj->ptr) && fwrite(obj->ptr,sdslen(obj->ptr),1,fp) == 0)",
          "new_line_content": "        decrrc = 1;",
          "content_same": false
        },
        {
          "line": 4745,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(zsl->header->forward)",
          "new_text": null,
          "old_line_content": "    zfree(zsl->header->forward);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4746,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(zsl->header)",
          "new_text": null,
          "old_line_content": "    zfree(zsl->header);",
          "new_line_content": "static void zslFree(zskiplist *zsl) {",
          "content_same": false
        },
        {
          "line": 4752,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(zsl)",
          "new_text": null,
          "old_line_content": "    zfree(zsl);",
          "new_line_content": "        next = node->forward[0];",
          "content_same": false
        },
        {
          "line": 6803,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(dbuf,sizeof(dbuf),\"%.17g\\r\\n\",d)",
          "new_text": null,
          "old_line_content": "    snprintf(dbuf,sizeof(dbuf),\"%.17g\\r\\n\",d);",
          "new_line_content": "/* Write a double value in bulk format $<count>\\r\\n<payload>\\r\\n */",
          "content_same": false
        },
        {
          "line": 6804,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(dbuf)",
          "new_text": null,
          "old_line_content": "    snprintf(buf,sizeof(buf),\"$%lu\\r\\n\",(unsigned long)strlen(dbuf)-2);",
          "new_line_content": "static int fwriteBulkDouble(FILE *fp, double d) {",
          "content_same": false
        },
        {
          "line": 4757,
          "old_api": "random",
          "new_api": null,
          "old_text": "random()",
          "new_text": null,
          "old_line_content": "    while ((random()&0xFFFF) < (ZSKIPLIST_P * 0xFFFF))",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6805,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(buf)",
          "new_text": null,
          "old_line_content": "    if (fwrite(buf,strlen(buf),1,fp) == 0) return 0;",
          "new_line_content": "    char buf[128], dbuf[128];",
          "content_same": false
        },
        {
          "line": 6806,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(dbuf)",
          "new_text": null,
          "old_line_content": "    if (fwrite(dbuf,strlen(dbuf),1,fp) == 0) return 0;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6814,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(lbuf,sizeof(lbuf),\"%ld\\r\\n\",l)",
          "new_text": null,
          "old_line_content": "    snprintf(lbuf,sizeof(lbuf),\"%ld\\r\\n\",l);",
          "new_line_content": "/* Write a long value in bulk format $<count>\\r\\n<payload>\\r\\n */",
          "content_same": false
        },
        {
          "line": 6815,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(lbuf)",
          "new_text": null,
          "old_line_content": "    snprintf(buf,sizeof(buf),\"$%lu\\r\\n\",(unsigned long)strlen(lbuf)-2);",
          "new_line_content": "static int fwriteBulkLong(FILE *fp, long l) {",
          "content_same": false
        },
        {
          "line": 6816,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(buf)",
          "new_text": null,
          "old_line_content": "    if (fwrite(buf,strlen(buf),1,fp) == 0) return 0;",
          "new_line_content": "    char buf[128], lbuf[128];",
          "content_same": false
        },
        {
          "line": 6817,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(lbuf)",
          "new_text": null,
          "old_line_content": "    if (fwrite(lbuf,strlen(lbuf),1,fp) == 0) return 0;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4771,
          "old_api": "compareStringObjects",
          "new_api": null,
          "old_text": "compareStringObjects(x->forward[i]->obj,obj)",
          "new_text": null,
          "old_line_content": "                compareStringObjects(x->forward[i]->obj,obj) < 0)))",
          "new_line_content": "    for (i = zsl->level-1; i >= 0; i--) {",
          "content_same": false
        },
        {
          "line": 4779,
          "old_api": "zslRandomLevel",
          "new_api": null,
          "old_text": "zslRandomLevel()",
          "new_text": null,
          "old_line_content": "    level = zslRandomLevel();",
          "new_line_content": "    /* we assume the key is not already inside, since we allow duplicated",
          "content_same": false
        },
        {
          "line": 6829,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    time_t now = time(NULL);",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 4785,
          "old_api": "zslCreateNode",
          "new_api": null,
          "old_text": "zslCreateNode(level,score,obj)",
          "new_text": null,
          "old_line_content": "    x = zslCreateNode(level,score,obj);",
          "new_line_content": "        for (i = zsl->level; i < level; i++)",
          "content_same": false
        },
        {
          "line": 6834,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(tmpfile,\"w\")",
          "new_text": null,
          "old_line_content": "    fp = fopen(tmpfile,\"w\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6836,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING, \"Failed rewriting the append only file: %s\", strerror(errno));",
          "new_line_content": "     * one used by rewriteAppendOnlyFileBackground() function. */",
          "content_same": false
        },
        {
          "line": 6843,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(d)",
          "new_text": null,
          "old_line_content": "        if (dictSize(d) == 0) continue;",
          "new_line_content": "    for (j = 0; j < server.dbnum; j++) {",
          "content_same": false
        },
        {
          "line": 6844,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(d)",
          "new_text": null,
          "old_line_content": "        di = dictGetIterator(d);",
          "new_line_content": "        char selectcmd[] = \"*2\\r\\n$6\\r\\nSELECT\\r\\n\";",
          "content_same": false
        },
        {
          "line": 6846,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "            fclose(fp);",
          "new_line_content": "        dict *d = db->dict;",
          "content_same": false
        },
        {
          "line": 6851,
          "old_api": "fwrite",
          "new_api": null,
          "old_text": "fwrite(selectcmd,sizeof(selectcmd)-1,1,fp)",
          "new_text": null,
          "old_line_content": "        if (fwrite(selectcmd,sizeof(selectcmd)-1,1,fp) == 0) goto werr;",
          "new_line_content": "            return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 6852,
          "old_api": "fwriteBulkLong",
          "new_api": null,
          "old_text": "fwriteBulkLong(fp,j)",
          "new_text": null,
          "old_line_content": "        if (fwriteBulkLong(fp,j) == 0) goto werr;",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4808,
          "old_api": "compareStringObjects",
          "new_api": null,
          "old_text": "compareStringObjects(x->forward[i]->obj,obj)",
          "new_text": null,
          "old_line_content": "                compareStringObjects(x->forward[i]->obj,obj) < 0)))",
          "new_line_content": "    for (i = zsl->level-1; i >= 0; i--) {",
          "content_same": false
        },
        {
          "line": 6860,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "            key = dictGetEntryKey(de);",
          "new_line_content": "            robj *key, *o;",
          "content_same": false
        },
        {
          "line": 4815,
          "old_api": "compareStringObjects",
          "new_api": null,
          "old_text": "compareStringObjects(x->obj,obj)",
          "new_text": null,
          "old_line_content": "    if (x && score == x->score && compareStringObjects(x->obj,obj) == 0) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6867,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "                o = dictGetEntryVal(de);",
          "new_line_content": "             * value object instead to just increment the ref count anyway",
          "content_same": false
        },
        {
          "line": 6870,
          "old_api": "vmPreviewObject",
          "new_api": null,
          "old_text": "vmPreviewObject(key)",
          "new_text": null,
          "old_line_content": "                o = vmPreviewObject(key);",
          "new_line_content": "                key->storage == REDIS_VM_SWAPPING) {",
          "content_same": false
        },
        {
          "line": 6873,
          "old_api": "getExpire",
          "new_api": null,
          "old_text": "getExpire(db,key)",
          "new_text": null,
          "old_line_content": "            expiretime = getExpire(db,key);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 4826,
          "old_api": "zslFreeNode",
          "new_api": null,
          "old_text": "zslFreeNode(x)",
          "new_text": null,
          "old_line_content": "        zslFreeNode(x);",
          "new_line_content": "                                        NULL : x->backward;",
          "content_same": false
        },
        {
          "line": 6879,
          "old_api": "fwrite",
          "new_api": null,
          "old_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "new_text": null,
          "old_line_content": "                if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "new_line_content": "            /* Save the key and associated value */",
          "content_same": false
        },
        {
          "line": 6881,
          "old_api": "fwriteBulk",
          "new_api": null,
          "old_text": "fwriteBulk(fp,key)",
          "new_text": null,
          "old_line_content": "                if (fwriteBulk(fp,key) == 0) goto werr;",
          "new_line_content": "                /* Emit a SET command */",
          "content_same": false
        },
        {
          "line": 6882,
          "old_api": "fwriteBulk",
          "new_api": null,
          "old_text": "fwriteBulk(fp,o)",
          "new_text": null,
          "old_line_content": "                if (fwriteBulk(fp,o) == 0) goto werr;",
          "new_line_content": "                char cmd[]=\"*3\\r\\n$3\\r\\nSET\\r\\n\";",
          "content_same": false
        },
        {
          "line": 6889,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(list,&li)",
          "new_text": null,
          "old_line_content": "                listRewind(list,&li);",
          "new_line_content": "                list *list = o->ptr;",
          "content_same": false
        },
        {
          "line": 6890,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "                while((ln = listNext(&li))) {",
          "new_line_content": "                listNode *ln;",
          "content_same": false
        },
        {
          "line": 6892,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(ln)",
          "new_text": null,
          "old_line_content": "                    robj *eleobj = listNodeValue(ln);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6895,
          "old_api": "fwriteBulk",
          "new_api": null,
          "old_text": "fwriteBulk(fp,key)",
          "new_text": null,
          "old_line_content": "                    if (fwriteBulk(fp,key) == 0) goto werr;",
          "new_line_content": "                    char cmd[]=\"*3\\r\\n$5\\r\\nRPUSH\\r\\n\";",
          "content_same": false
        },
        {
          "line": 6901,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(set)",
          "new_text": null,
          "old_line_content": "                dictIterator *di = dictGetIterator(set);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 6904,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "                while((de = dictNext(di)) != NULL) {",
          "new_line_content": "                dict *set = o->ptr;",
          "content_same": false
        },
        {
          "line": 6906,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "                    robj *eleobj = dictGetEntryKey(de);",
          "new_line_content": "                dictEntry *de;",
          "content_same": false
        },
        {
          "line": 6909,
          "old_api": "fwriteBulk",
          "new_api": null,
          "old_text": "fwriteBulk(fp,key)",
          "new_text": null,
          "old_line_content": "                    if (fwriteBulk(fp,key) == 0) goto werr;",
          "new_line_content": "                    char cmd[]=\"*3\\r\\n$4\\r\\nSADD\\r\\n\";",
          "content_same": false
        },
        {
          "line": 4869,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(dict,x->obj)",
          "new_text": null,
          "old_line_content": "        dictDelete(dict,x->obj);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 4870,
          "old_api": "zslFreeNode",
          "new_api": null,
          "old_text": "zslFreeNode(x)",
          "new_text": null,
          "old_line_content": "        zslFreeNode(x);",
          "new_line_content": "            zsl->tail = x->backward;",
          "content_same": false
        },
        {
          "line": 6919,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "                while((de = dictNext(di)) != NULL) {",
          "new_line_content": "                zset *zs = o->ptr;",
          "content_same": false
        },
        {
          "line": 6921,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "                    robj *eleobj = dictGetEntryKey(de);",
          "new_line_content": "                dictEntry *de;",
          "content_same": false
        },
        {
          "line": 6922,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "                    double *score = dictGetEntryVal(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6924,
          "old_api": "fwrite",
          "new_api": null,
          "old_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "new_text": null,
          "old_line_content": "                    if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "new_line_content": "                    char cmd[]=\"*4\\r\\n$4\\r\\nZADD\\r\\n\";",
          "content_same": false
        },
        {
          "line": 6927,
          "old_api": "fwriteBulk",
          "new_api": null,
          "old_text": "fwriteBulk(fp,eleobj)",
          "new_text": null,
          "old_line_content": "                    if (fwriteBulk(fp,eleobj) == 0) goto werr;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6938,
          "old_api": "fwrite",
          "new_api": null,
          "old_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "new_text": null,
          "old_line_content": "                if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "new_line_content": "            if (expiretime != -1) {",
          "content_same": false
        },
        {
          "line": 6939,
          "old_api": "fwriteBulk",
          "new_api": null,
          "old_text": "fwriteBulk(fp,key)",
          "new_text": null,
          "old_line_content": "                if (fwriteBulk(fp,key) == 0) goto werr;",
          "new_line_content": "                char cmd[]=\"*3\\r\\n$8\\r\\nEXPIREAT\\r\\n\";",
          "content_same": false
        },
        {
          "line": 6940,
          "old_api": "fwriteBulkLong",
          "new_api": null,
          "old_text": "fwriteBulkLong(fp,expiretime)",
          "new_text": null,
          "old_line_content": "                if (fwriteBulkLong(fp,expiretime) == 0) goto werr;",
          "new_line_content": "                /* If this key is already expired skip it */",
          "content_same": false
        },
        {
          "line": 6949,
          "old_api": "fileno",
          "new_api": null,
          "old_text": "fileno(fp)",
          "new_text": null,
          "old_line_content": "    fsync(fileno(fp));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6950,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "    fclose(fp);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4906,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,key)",
          "new_text": null,
          "old_line_content": "    zsetobj = lookupKeyWrite(c->db,key);",
          "new_line_content": "    robj *zsetobj;",
          "content_same": false
        },
        {
          "line": 6955,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Error moving temp append only file on the final destination: %s\", strerror(errno));",
          "new_line_content": "    ",
          "content_same": false
        },
        {
          "line": 4908,
          "old_api": "createZsetObject",
          "new_api": null,
          "old_text": "createZsetObject()",
          "new_text": null,
          "old_line_content": "        zsetobj = createZsetObject();",
          "new_line_content": "    double *score;",
          "content_same": false
        },
        {
          "line": 4909,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(c->db->dict,key,zsetobj)",
          "new_text": null,
          "old_line_content": "        dictAdd(c->db->dict,key,zsetobj);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6956,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(tmpfile)",
          "new_text": null,
          "old_line_content": "        unlink(tmpfile);",
          "new_line_content": "    /* Use RENAME to make sure the DB file is changed atomically only",
          "content_same": false
        },
        {
          "line": 6964,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(tmpfile)",
          "new_text": null,
          "old_line_content": "    unlink(tmpfile);",
          "new_line_content": "    return REDIS_OK;",
          "content_same": false
        },
        {
          "line": 6965,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_WARNING,\"Write error writing append only file on disk: %s\", strerror(errno));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6966,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "    if (di) dictReleaseIterator(di);",
          "new_line_content": "werr:",
          "content_same": false
        },
        {
          "line": 4922,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(double))",
          "new_text": null,
          "old_line_content": "    score = zmalloc(sizeof(double));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4927,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(zs->dict,ele)",
          "new_text": null,
          "old_line_content": "        de = dictFind(zs->dict,ele);",
          "new_line_content": "    if (doincrement) {",
          "content_same": false
        },
        {
          "line": 4929,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "            double *oldscore = dictGetEntryVal(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6986,
          "old_api": "waitEmptyIOJobsQueue",
          "new_api": null,
          "old_text": "waitEmptyIOJobsQueue()",
          "new_text": null,
          "old_line_content": "    if (server.vm_enabled) waitEmptyIOJobsQueue();",
          "new_line_content": "static int rewriteAppendOnlyFileBackground(void) {",
          "content_same": false
        },
        {
          "line": 6987,
          "old_api": "fork",
          "new_api": null,
          "old_text": "fork()",
          "new_text": null,
          "old_line_content": "    if ((childpid = fork()) == 0) {",
          "new_line_content": "    pid_t childpid;",
          "content_same": false
        },
        {
          "line": 4940,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(zs->dict,ele,score)",
          "new_text": null,
          "old_line_content": "    if (dictAdd(zs->dict,ele,score) == DICT_OK) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4942,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(ele)",
          "new_text": null,
          "old_line_content": "        incrRefCount(ele); /* added to hash */",
          "new_line_content": "    /* What follows is a simple remove and re-insert operation that is common",
          "content_same": false
        },
        {
          "line": 4943,
          "old_api": "zslInsert",
          "new_api": null,
          "old_text": "zslInsert(zs->zsl,*score,ele)",
          "new_text": null,
          "old_line_content": "        zslInsert(zs->zsl,*score,ele);",
          "new_line_content": "     * to both ZADD and ZINCRBY... */",
          "content_same": false
        },
        {
          "line": 6992,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(server.fd)",
          "new_text": null,
          "old_line_content": "        close(server.fd);",
          "new_line_content": "        /* Child */",
          "content_same": false
        },
        {
          "line": 6993,
          "old_api": "getpid",
          "new_api": null,
          "old_text": "getpid()",
          "new_text": null,
          "old_line_content": "        snprintf(tmpfile,256,\"temp-rewriteaof-bg-%d.aof\", (int) getpid());",
          "new_line_content": "        char tmpfile[256];",
          "content_same": false
        },
        {
          "line": 6994,
          "old_api": "rewriteAppendOnlyFile",
          "new_api": null,
          "old_text": "rewriteAppendOnlyFile(tmpfile)",
          "new_text": null,
          "old_line_content": "        if (rewriteAppendOnlyFile(tmpfile) == REDIS_OK) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4949,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.cone)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.cone);",
          "new_line_content": "        server.dirty++;",
          "content_same": false
        },
        {
          "line": 7002,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\n                \"Can't rewrite append only file in background: fork: %s\",\n                strerror(errno))",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4955,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(zs->dict,ele)",
          "new_text": null,
          "old_line_content": "        de = dictFind(zs->dict,ele);",
          "new_line_content": "        dictEntry *de;",
          "content_same": false
        },
        {
          "line": 4956,
          "old_api": "redisAssert",
          "new_api": null,
          "old_text": "redisAssert(de != NULL)",
          "new_text": null,
          "old_line_content": "        redisAssert(de != NULL);",
          "new_line_content": "        double *oldscore;",
          "content_same": false
        },
        {
          "line": 4957,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "        oldscore = dictGetEntryVal(de);",
          "new_line_content": "        ",
          "content_same": false
        },
        {
          "line": 7004,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "                strerror(errno));",
          "new_line_content": "        /* Parent */",
          "content_same": false
        },
        {
          "line": 7007,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\n            \"Background append only file rewriting started by pid %d\",childpid)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_NOTICE,",
          "new_line_content": "                \"Can't rewrite append only file in background: fork: %s\",",
          "content_same": false
        },
        {
          "line": 4962,
          "old_api": "zslDelete",
          "new_api": null,
          "old_text": "zslDelete(zs->zsl,*oldscore,ele)",
          "new_text": null,
          "old_line_content": "            deleted = zslDelete(zs->zsl,*oldscore,ele);",
          "new_line_content": "        if (*score != *oldscore) {",
          "content_same": false
        },
        {
          "line": 4963,
          "old_api": "redisAssert",
          "new_api": null,
          "old_text": "redisAssert(deleted != 0)",
          "new_text": null,
          "old_line_content": "            redisAssert(deleted != 0);",
          "new_line_content": "            int deleted;",
          "content_same": false
        },
        {
          "line": 4964,
          "old_api": "zslInsert",
          "new_api": null,
          "old_text": "zslInsert(zs->zsl,*score,ele)",
          "new_text": null,
          "old_line_content": "            zslInsert(zs->zsl,*score,ele);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4965,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(ele)",
          "new_text": null,
          "old_line_content": "            incrRefCount(ele);",
          "new_line_content": "            /* Remove and insert the element in the skip list with new score */",
          "content_same": false
        },
        {
          "line": 4970,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(score)",
          "new_text": null,
          "old_line_content": "            zfree(score);",
          "new_line_content": "            /* Update the score in the hash table */",
          "content_same": false
        },
        {
          "line": 4973,
          "old_api": "addReplyDouble",
          "new_api": null,
          "old_text": "addReplyDouble(c,*score)",
          "new_text": null,
          "old_line_content": "            addReplyDouble(c,*score);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 7022,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR background append only file rewriting already in progress\\r\\n\")",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(\"-ERR background append only file rewriting already in progress\\r\\n\"));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4975,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.czero);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 7025,
          "old_api": "rewriteAppendOnlyFileBackground",
          "new_api": null,
          "old_text": "rewriteAppendOnlyFileBackground()",
          "new_text": null,
          "old_line_content": "    if (rewriteAppendOnlyFileBackground() == REDIS_OK) {",
          "new_line_content": "    if (server.bgrewritechildpid != -1) {",
          "content_same": false
        },
        {
          "line": 7027,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(status)",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(status));",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 4982,
          "old_api": "strtod",
          "new_api": null,
          "old_text": "strtod(c->argv[2]->ptr,NULL)",
          "new_text": null,
          "old_line_content": "    scoreval = strtod(c->argv[2]->ptr,NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4983,
          "old_api": "zaddGenericCommand",
          "new_api": null,
          "old_text": "zaddGenericCommand(c,c->argv[1],c->argv[3],scoreval,0)",
          "new_text": null,
          "old_line_content": "    zaddGenericCommand(c,c->argv[1],c->argv[3],scoreval,0);",
          "new_line_content": "static void zaddCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 7036,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(tmpfile,256,\"temp-rewriteaof-bg-%d.aof\", (int) childpid)",
          "new_text": null,
          "old_line_content": "    snprintf(tmpfile,256,\"temp-rewriteaof-bg-%d.aof\", (int) childpid);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4989,
          "old_api": "strtod",
          "new_api": null,
          "old_text": "strtod(c->argv[2]->ptr,NULL)",
          "new_text": null,
          "old_line_content": "    scoreval = strtod(c->argv[2]->ptr,NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4990,
          "old_api": "zaddGenericCommand",
          "new_api": null,
          "old_text": "zaddGenericCommand(c,c->argv[1],c->argv[3],scoreval,1)",
          "new_text": null,
          "old_line_content": "    zaddGenericCommand(c,c->argv[1],c->argv[3],scoreval,1);",
          "new_line_content": "static void zincrbyCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 7037,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(tmpfile)",
          "new_text": null,
          "old_line_content": "    unlink(tmpfile);",
          "new_line_content": "static void aofRemoveTempFile(pid_t childpid) {",
          "content_same": false
        },
        {
          "line": 4997,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    zsetobj = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "static void zremCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 4999,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "    zset *zs;",
          "content_same": false
        },
        {
          "line": 5006,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "        double *oldscore;",
          "content_same": false
        },
        {
          "line": 5012,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.czero);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5017,
          "old_api": "zslDelete",
          "new_api": null,
          "old_text": "zslDelete(zs->zsl,*oldscore,c->argv[2])",
          "new_text": null,
          "old_line_content": "        deleted = zslDelete(zs->zsl,*oldscore,c->argv[2]);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 5018,
          "old_api": "redisAssert",
          "new_api": null,
          "old_text": "redisAssert(deleted != 0)",
          "new_text": null,
          "old_line_content": "        redisAssert(deleted != 0);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 7066,
          "old_api": "strstr",
          "new_api": null,
          "old_text": "strstr(server.vm_swap_file,\"%p\")",
          "new_text": null,
          "old_line_content": "    char *p = strstr(server.vm_swap_file,\"%p\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5024,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.cone)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.cone);",
          "new_line_content": "        /* Delete from the hash table */",
          "content_same": false
        },
        {
          "line": 7073,
          "old_api": "getpid",
          "new_api": null,
          "old_text": "getpid()",
          "new_text": null,
          "old_line_content": "    new = sdscatprintf(new,\"%ld\",(long) getpid());",
          "new_line_content": "    if (!p) return;",
          "content_same": false
        },
        {
          "line": 7075,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(server.vm_swap_file)",
          "new_text": null,
          "old_line_content": "    zfree(server.vm_swap_file);",
          "new_line_content": "    *p = '\\0';",
          "content_same": false
        },
        {
          "line": 5029,
          "old_api": "strtod",
          "new_api": null,
          "old_text": "strtod(c->argv[2]->ptr,NULL)",
          "new_text": null,
          "old_line_content": "    double min = strtod(c->argv[2]->ptr,NULL);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5030,
          "old_api": "strtod",
          "new_api": null,
          "old_text": "strtod(c->argv[3]->ptr,NULL)",
          "new_text": null,
          "old_line_content": "    double max = strtod(c->argv[3]->ptr,NULL);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5036,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "    zset *zs;",
          "content_same": false
        },
        {
          "line": 7085,
          "old_api": "zmalloc_enable_thread_safeness",
          "new_api": null,
          "old_text": "zmalloc_enable_thread_safeness()",
          "new_text": null,
          "old_line_content": "        zmalloc_enable_thread_safeness(); /* we need thread safe zmalloc() */",
          "new_line_content": "    int pipefds[2];",
          "content_same": false
        },
        {
          "line": 7087,
          "old_api": "expandVmSwapFilename",
          "new_api": null,
          "old_text": "expandVmSwapFilename()",
          "new_text": null,
          "old_line_content": "    expandVmSwapFilename();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7088,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Using '%s' as swap file\",server.vm_swap_file)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_NOTICE,\"Using '%s' as swap file\",server.vm_swap_file);",
          "new_line_content": "    if (server.vm_max_threads != 0)",
          "content_same": false
        },
        {
          "line": 5041,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 7090,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(server.vm_swap_file,\"w+b\")",
          "new_text": null,
          "old_line_content": "        server.vm_fp = fopen(server.vm_swap_file,\"w+b\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5046,
          "old_api": "dictResize",
          "new_api": null,
          "old_text": "dictResize(zs->dict)",
          "new_text": null,
          "old_line_content": "        if (htNeedsResize(zs->dict)) dictResize(zs->dict);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 7095,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "            strerror(errno));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5048,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),\":%lu\\r\\n\",deleted));",
          "new_line_content": "        zs = zsetobj->ptr;",
          "content_same": false
        },
        {
          "line": 7096,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "        exit(1);",
          "new_line_content": "    if (server.vm_fp == NULL) {",
          "content_same": false
        },
        {
          "line": 7098,
          "old_api": "fileno",
          "new_api": null,
          "old_text": "fileno(server.vm_fp)",
          "new_text": null,
          "old_line_content": "    server.vm_fd = fileno(server.vm_fp);",
          "new_line_content": "            \"Impossible to open the swap file: %s. Exiting.\",",
          "content_same": false
        },
        {
          "line": 5054,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "    int start = atoi(c->argv[2]->ptr);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5055,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[3]->ptr)",
          "new_text": null,
          "old_line_content": "    int end = atoi(c->argv[3]->ptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7106,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Allocating %lld bytes of swap file\",totsize)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_NOTICE,\"Allocating %lld bytes of swap file\",totsize);",
          "new_line_content": "    server.vm_stats_swapped_objects = 0;",
          "content_same": false
        },
        {
          "line": 7107,
          "old_api": "ftruncate",
          "new_api": null,
          "old_text": "ftruncate(server.vm_fd,totsize)",
          "new_text": null,
          "old_line_content": "    if (ftruncate(server.vm_fd,totsize) == -1) {",
          "new_line_content": "    server.vm_stats_swapouts = 0;",
          "content_same": false
        },
        {
          "line": 7108,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Can't ftruncate swap file: %s. Exiting.\",\n            strerror(errno))",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Can't ftruncate swap file: %s. Exiting.\",",
          "new_line_content": "    server.vm_stats_swapins = 0;",
          "content_same": false
        },
        {
          "line": 5061,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.syntaxerr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7109,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "            strerror(errno));",
          "new_line_content": "    totsize = server.vm_pages*server.vm_page_size;",
          "content_same": false
        },
        {
          "line": 5067,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullmultibulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.nullmultibulk);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7115,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_VERBOSE,\"Allocated %lld bytes page table for %lld pages\",\n        (long long) (server.vm_pages+7)/8, server.vm_pages)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_VERBOSE,\"Allocated %lld bytes page table for %lld pages\",",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 7117,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(server.vm_bitmap,0,(server.vm_pages+7)/8)",
          "new_text": null,
          "old_line_content": "    memset(server.vm_bitmap,0,(server.vm_pages+7)/8);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5070,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "    if (o == NULL) {",
          "content_same": false
        },
        {
          "line": 7120,
          "old_api": "listCreate",
          "new_api": null,
          "old_text": "listCreate()",
          "new_text": null,
          "old_line_content": "    server.io_newjobs = listCreate();",
          "new_line_content": "        (long long) (server.vm_pages+7)/8, server.vm_pages);",
          "content_same": false
        },
        {
          "line": 7122,
          "old_api": "listCreate",
          "new_api": null,
          "old_text": "listCreate()",
          "new_text": null,
          "old_line_content": "    server.io_processed = listCreate();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7123,
          "old_api": "listCreate",
          "new_api": null,
          "old_text": "listCreate()",
          "new_text": null,
          "old_line_content": "    server.io_ready_clients = listCreate();",
          "new_line_content": "    /* Initialize threaded I/O (used by Virtual Memory) */",
          "content_same": false
        },
        {
          "line": 7131,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "        exit(1);",
          "new_line_content": "    server.io_active_threads = 0;",
          "content_same": false
        },
        {
          "line": 5089,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.emptymultibulk)",
          "new_text": null,
          "old_line_content": "                addReply(c,shared.emptymultibulk);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7137,
          "old_api": "pthread_attr_init",
          "new_api": null,
          "old_text": "pthread_attr_init(&server.io_threads_attr)",
          "new_text": null,
          "old_line_content": "    pthread_attr_init(&server.io_threads_attr);",
          "new_line_content": "    server.io_ready_pipe_read = pipefds[0];",
          "content_same": false
        },
        {
          "line": 7138,
          "old_api": "pthread_attr_getstacksize",
          "new_api": null,
          "old_text": "pthread_attr_getstacksize(&server.io_threads_attr, &stacksize)",
          "new_text": null,
          "old_line_content": "    pthread_attr_getstacksize(&server.io_threads_attr, &stacksize);",
          "new_line_content": "    server.io_ready_pipe_write = pipefds[1];",
          "content_same": false
        },
        {
          "line": 7140,
          "old_api": "pthread_attr_setstacksize",
          "new_api": null,
          "old_text": "pthread_attr_setstacksize(&server.io_threads_attr, stacksize)",
          "new_text": null,
          "old_line_content": "    pthread_attr_setstacksize(&server.io_threads_attr, stacksize);",
          "new_line_content": "    /* LZF requires a lot of stack */",
          "content_same": false
        },
        {
          "line": 7151,
          "old_api": "vmFreePage",
          "new_api": null,
          "old_text": "vmFreePage(page)",
          "new_text": null,
          "old_line_content": "    redisAssert(vmFreePage(page) == 1);",
          "new_line_content": "/* Mark the page as used */",
          "content_same": false
        },
        {
          "line": 7153,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG,\"Mark used: %lld (byte:%lld bit:%d)\\n\",\n        (long long)page, (long long)byte, bit)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_DEBUG,\"Mark used: %lld (byte:%lld bit:%d)\\n\",",
          "new_line_content": "    off_t byte = page/8;",
          "content_same": false
        },
        {
          "line": 5106,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "            addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",",
          "new_line_content": "                while (start--)",
          "content_same": false
        },
        {
          "line": 5111,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,ele)",
          "new_text": null,
          "old_line_content": "                addReply(c,ele);",
          "new_line_content": "                withscores ? (rangelen*2) : rangelen));",
          "content_same": false
        },
        {
          "line": 5112,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.crlf)",
          "new_text": null,
          "old_line_content": "                addReply(c,shared.crlf);",
          "new_line_content": "            for (j = 0; j < rangelen; j++) {",
          "content_same": false
        },
        {
          "line": 7162,
          "old_api": "vmMarkPageUsed",
          "new_api": null,
          "old_text": "vmMarkPageUsed(page+j)",
          "new_text": null,
          "old_line_content": "        vmMarkPageUsed(page+j);",
          "new_line_content": "static void vmMarkPagesUsed(off_t page, off_t count) {",
          "content_same": false
        },
        {
          "line": 5122,
          "old_api": "zrangeGenericCommand",
          "new_api": null,
          "old_text": "zrangeGenericCommand(c,0)",
          "new_text": null,
          "old_line_content": "    zrangeGenericCommand(c,0);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7170,
          "old_api": "vmFreePage",
          "new_api": null,
          "old_text": "vmFreePage(page)",
          "new_text": null,
          "old_line_content": "    redisAssert(vmFreePage(page) == 0);",
          "new_line_content": "/* Mark the page as free */",
          "content_same": false
        },
        {
          "line": 7172,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG,\"Mark free: %lld (byte:%lld bit:%d)\\n\",\n        (long long)page, (long long)byte, bit)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_DEBUG,\"Mark free: %lld (byte:%lld bit:%d)\\n\",",
          "new_line_content": "    off_t byte = page/8;",
          "content_same": false
        },
        {
          "line": 5131,
          "old_api": "strtod",
          "new_api": null,
          "old_text": "strtod(c->argv[2]->ptr,NULL)",
          "new_text": null,
          "old_line_content": "    double min = strtod(c->argv[2]->ptr,NULL);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5132,
          "old_api": "strtod",
          "new_api": null,
          "old_text": "strtod(c->argv[3]->ptr,NULL)",
          "new_text": null,
          "old_line_content": "    double max = strtod(c->argv[3]->ptr,NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7181,
          "old_api": "vmMarkPageFree",
          "new_api": null,
          "old_text": "vmMarkPageFree(page+j)",
          "new_text": null,
          "old_line_content": "        vmMarkPageFree(page+j);",
          "new_line_content": "static void vmMarkPagesFree(off_t page, off_t count) {",
          "content_same": false
        },
        {
          "line": 5137,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR wrong number of arguments for ZRANGEBYSCORE\\r\\n\")",
          "new_text": null,
          "old_line_content": "            sdsnew(\"-ERR wrong number of arguments for ZRANGEBYSCORE\\r\\n\"));",
          "new_line_content": "    int offset = 0, limit = -1;",
          "content_same": false
        },
        {
          "line": 5139,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[4]->ptr,\"limit\")",
          "new_text": null,
          "old_line_content": "    } else if (c->argc == 7 && strcasecmp(c->argv[4]->ptr,\"limit\")) {",
          "new_line_content": "    if (c->argc != 4 && c->argc != 7) {",
          "content_same": false
        },
        {
          "line": 5150,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullmultibulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.nullmultibulk);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5153,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "    if (o == NULL) {",
          "content_same": false
        },
        {
          "line": 5162,
          "old_api": "zslFirstWithScore",
          "new_api": null,
          "old_text": "zslFirstWithScore(zsl,min)",
          "new_text": null,
          "old_line_content": "            ln = zslFirstWithScore(zsl,min);",
          "new_line_content": "            robj *ele, *lenobj;",
          "content_same": false
        },
        {
          "line": 5165,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.emptymultibulk)",
          "new_text": null,
          "old_line_content": "                addReply(c,shared.emptymultibulk);",
          "new_line_content": "            /* Get the first node with the score >= min */",
          "content_same": false
        },
        {
          "line": 5173,
          "old_api": "createObject",
          "new_api": null,
          "old_text": "createObject(REDIS_STRING,NULL)",
          "new_text": null,
          "old_line_content": "            lenobj = createObject(REDIS_STRING,NULL);",
          "new_line_content": "            /* We don't know in advance how many matching elements there",
          "content_same": false
        },
        {
          "line": 5174,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,lenobj)",
          "new_text": null,
          "old_line_content": "            addReply(c,lenobj);",
          "new_line_content": "             * are in the list, so we push this object that will represent",
          "content_same": false
        },
        {
          "line": 5175,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(lenobj)",
          "new_text": null,
          "old_line_content": "            decrRefCount(lenobj);",
          "new_line_content": "             * the multi-bulk length in the output buffer, and will \"fix\"",
          "content_same": false
        },
        {
          "line": 5185,
          "old_api": "addReplyBulkLen",
          "new_api": null,
          "old_text": "addReplyBulkLen(c,ele)",
          "new_text": null,
          "old_line_content": "                addReplyBulkLen(c,ele);",
          "new_line_content": "                    continue;",
          "content_same": false
        },
        {
          "line": 5186,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,ele)",
          "new_text": null,
          "old_line_content": "                addReply(c,ele);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 5187,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.crlf)",
          "new_text": null,
          "old_line_content": "                addReply(c,shared.crlf);",
          "new_line_content": "                if (limit == 0) break;",
          "content_same": false
        },
        {
          "line": 7236,
          "old_api": "vmFreePage",
          "new_api": null,
          "old_text": "vmFreePage(this)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_DEBUG, \"THIS: %lld (%c)\\n\", (long long) this, vmFreePage(this) ? 'F' : 'X');",
          "new_line_content": "                 * interesting, as it's no longer contiguous. */",
          "content_same": false
        },
        {
          "line": 7237,
          "old_api": "vmFreePage",
          "new_api": null,
          "old_text": "vmFreePage(this)",
          "new_text": null,
          "old_line_content": "        if (vmFreePage(this)) {",
          "new_line_content": "                numfree = 0;",
          "content_same": false
        },
        {
          "line": 5192,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "            lenobj->ptr = sdscatprintf(sdsempty(),\"*%d\\r\\n\",rangelen);",
          "new_line_content": "                ln = ln->forward[0];",
          "content_same": false
        },
        {
          "line": 5201,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    o = lookupKeyRead(c->db,c->argv[1]);",
          "new_line_content": "static void zcardCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 5203,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "    zset *zs;",
          "content_same": false
        },
        {
          "line": 7255,
          "old_api": "random",
          "new_api": null,
          "old_text": "random()",
          "new_text": null,
          "old_line_content": "            offset += random() % REDIS_VM_MAX_RANDOM_JUMP;",
          "new_line_content": "        /* Fast-forward if the current page is not free and we already",
          "content_same": false
        },
        {
          "line": 5210,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "            addReplySds(c,sdscatprintf(sdsempty(),\":%lu\\r\\n\",zs->zsl->length));",
          "new_line_content": "        if (o->type != REDIS_ZSET) {",
          "content_same": false
        },
        {
          "line": 5219,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    o = lookupKeyRead(c->db,c->argv[1]);",
          "new_line_content": "static void zscoreCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 5221,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.nullbulk);",
          "new_line_content": "    zset *zs;",
          "content_same": false
        },
        {
          "line": 7270,
          "old_api": "pthread_mutex_lock",
          "new_api": null,
          "old_text": "pthread_mutex_lock(&server.io_swapfile_mutex)",
          "new_text": null,
          "old_line_content": "    if (server.vm_enabled) pthread_mutex_lock(&server.io_swapfile_mutex);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 7271,
          "old_api": "fseeko",
          "new_api": null,
          "old_text": "fseeko(server.vm_fp,page*server.vm_page_size,SEEK_SET)",
          "new_text": null,
          "old_line_content": "    if (fseeko(server.vm_fp,page*server.vm_page_size,SEEK_SET) == -1) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7272,
          "old_api": "pthread_mutex_unlock",
          "new_api": null,
          "old_text": "pthread_mutex_unlock(&server.io_swapfile_mutex)",
          "new_text": null,
          "old_line_content": "        if (server.vm_enabled) pthread_mutex_unlock(&server.io_swapfile_mutex);",
          "new_line_content": "/* Write the specified object at the specified page of the swap file */",
          "content_same": false
        },
        {
          "line": 7273,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\n            \"Critical VM problem in vmSwapObjectBlocking(): can't seek: %s\",\n            strerror(errno))",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,",
          "new_line_content": "static int vmWriteObjectOnSwap(robj *o, off_t page) {",
          "content_same": false
        },
        {
          "line": 5230,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(zs->dict,c->argv[2])",
          "new_text": null,
          "old_line_content": "            de = dictFind(zs->dict,c->argv[2]);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 7278,
          "old_api": "rdbSaveObject",
          "new_api": null,
          "old_text": "rdbSaveObject(server.vm_fp,o)",
          "new_text": null,
          "old_line_content": "    rdbSaveObject(server.vm_fp,o);",
          "new_line_content": "            \"Critical VM problem in vmSwapObjectBlocking(): can't seek: %s\",",
          "content_same": false
        },
        {
          "line": 5232,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "                addReply(c,shared.nullbulk);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7288,
          "old_api": "rdbSavedObjectPages",
          "new_api": null,
          "old_text": "rdbSavedObjectPages(val,NULL)",
          "new_text": null,
          "old_line_content": "    off_t pages = rdbSavedObjectPages(val,NULL);",
          "new_line_content": " * needed to later retrieve the object into the key object.",
          "content_same": false
        },
        {
          "line": 7291,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(key->storage == REDIS_VM_MEMORY)",
          "new_text": null,
          "old_line_content": "    assert(key->storage == REDIS_VM_MEMORY);",
          "new_line_content": "static int vmSwapObjectBlocking(robj *key, robj *val) {",
          "content_same": false
        },
        {
          "line": 5245,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(c->db->dict)",
          "new_text": null,
          "old_line_content": "    server.dirty += dictSize(c->db->dict);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5246,
          "old_api": "dictEmpty",
          "new_api": null,
          "old_text": "dictEmpty(c->db->dict)",
          "new_text": null,
          "old_line_content": "    dictEmpty(c->db->dict);",
          "new_line_content": "/* ========================= Non type-specific commands  ==================== */",
          "content_same": false
        },
        {
          "line": 5247,
          "old_api": "dictEmpty",
          "new_api": null,
          "old_text": "dictEmpty(c->db->expires)",
          "new_text": null,
          "old_line_content": "    dictEmpty(c->db->expires);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5248,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.ok);",
          "new_line_content": "static void flushdbCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 7293,
          "old_api": "vmFindContiguousPages",
          "new_api": null,
          "old_text": "vmFindContiguousPages(&page,pages)",
          "new_text": null,
          "old_line_content": "    if (vmFindContiguousPages(&page,pages) == REDIS_ERR) return REDIS_ERR;",
          "new_line_content": "    off_t page;",
          "content_same": false
        },
        {
          "line": 7294,
          "old_api": "vmWriteObjectOnSwap",
          "new_api": null,
          "old_text": "vmWriteObjectOnSwap(val,page)",
          "new_text": null,
          "old_line_content": "    if (vmWriteObjectOnSwap(val,page) == REDIS_ERR) return REDIS_ERR;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7299,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(val)",
          "new_text": null,
          "old_line_content": "    decrRefCount(val); /* Deallocate the object from memory. */",
          "new_line_content": "    key->vm.page = page;",
          "content_same": false
        },
        {
          "line": 7300,
          "old_api": "vmMarkPagesUsed",
          "new_api": null,
          "old_text": "vmMarkPagesUsed(page,pages)",
          "new_text": null,
          "old_line_content": "    vmMarkPagesUsed(page,pages);",
          "new_line_content": "    key->vm.usedpages = pages;",
          "content_same": false
        },
        {
          "line": 5253,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.ok);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5254,
          "old_api": "rdbSave",
          "new_api": null,
          "old_text": "rdbSave(server.dbfilename)",
          "new_text": null,
          "old_line_content": "    rdbSave(server.dbfilename);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7301,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG,\"VM: object %s swapped out at %lld (%lld pages)\",\n        (unsigned char*) key->ptr,\n        (unsigned long long) page, (unsigned long long) pages)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_DEBUG,\"VM: object %s swapped out at %lld (%lld pages)\",",
          "new_line_content": "    key->storage = REDIS_VM_SWAPPED;",
          "content_same": false
        },
        {
          "line": 7306,
          "old_api": "fflush",
          "new_api": null,
          "old_text": "fflush(server.vm_fp)",
          "new_text": null,
          "old_line_content": "    fflush(server.vm_fp);",
          "new_line_content": "        (unsigned char*) key->ptr,",
          "content_same": false
        },
        {
          "line": 5259,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*so))",
          "new_text": null,
          "old_line_content": "    redisSortOperation *so = zmalloc(sizeof(*so));",
          "new_line_content": "    server.dirty++;",
          "content_same": false
        },
        {
          "line": 7313,
          "old_api": "pthread_mutex_lock",
          "new_api": null,
          "old_text": "pthread_mutex_lock(&server.io_swapfile_mutex)",
          "new_text": null,
          "old_line_content": "    if (server.vm_enabled) pthread_mutex_lock(&server.io_swapfile_mutex);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7314,
          "old_api": "fseeko",
          "new_api": null,
          "old_text": "fseeko(server.vm_fp,page*server.vm_page_size,SEEK_SET)",
          "new_text": null,
          "old_line_content": "    if (fseeko(server.vm_fp,page*server.vm_page_size,SEEK_SET) == -1) {",
          "new_line_content": "static robj *vmReadObjectFromSwap(off_t page, int type) {",
          "content_same": false
        },
        {
          "line": 7315,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\n            \"Unrecoverable VM problem in vmReadObjectFromSwap(): can't seek: %s\",\n            strerror(errno))",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,",
          "new_line_content": "    robj *o;",
          "content_same": false
        },
        {
          "line": 7320,
          "old_api": "rdbLoadObject",
          "new_api": null,
          "old_text": "rdbLoadObject(type,server.vm_fp)",
          "new_text": null,
          "old_line_content": "    o = rdbLoadObject(type,server.vm_fp);",
          "new_line_content": "            \"Unrecoverable VM problem in vmReadObjectFromSwap(): can't seek: %s\",",
          "content_same": false
        },
        {
          "line": 7323,
          "old_api": "_exit",
          "new_api": null,
          "old_text": "_exit(1)",
          "new_text": null,
          "old_line_content": "        _exit(1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7325,
          "old_api": "pthread_mutex_unlock",
          "new_api": null,
          "old_text": "pthread_mutex_unlock(&server.io_swapfile_mutex)",
          "new_text": null,
          "old_line_content": "    if (server.vm_enabled) pthread_mutex_unlock(&server.io_swapfile_mutex);",
          "new_line_content": "    if (o == NULL) {",
          "content_same": false
        },
        {
          "line": 5289,
          "old_api": "getDecodedObject",
          "new_api": null,
          "old_text": "getDecodedObject(subst)",
          "new_text": null,
          "old_line_content": "    subst = getDecodedObject(subst);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7337,
          "old_api": "redisAssert",
          "new_api": null,
          "old_text": "redisAssert(key->storage == REDIS_VM_SWAPPED || key->storage == REDIS_VM_LOADING)",
          "new_text": null,
          "old_line_content": "    redisAssert(key->storage == REDIS_VM_SWAPPED || key->storage == REDIS_VM_LOADING);",
          "new_line_content": " * no changes are made to the key object, nor the pages are marked as freed */",
          "content_same": false
        },
        {
          "line": 7338,
          "old_api": "vmReadObjectFromSwap",
          "new_api": null,
          "old_text": "vmReadObjectFromSwap(key->vm.page,key->vtype)",
          "new_text": null,
          "old_line_content": "    val = vmReadObjectFromSwap(key->vm.page,key->vtype);",
          "new_line_content": "static robj *vmGenericLoadObject(robj *key, int preview) {",
          "content_same": false
        },
        {
          "line": 5292,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(ssub)",
          "new_text": null,
          "old_line_content": "    if (sdslen(spat)+sdslen(ssub)-1 > REDIS_SORTKEY_MAX) return NULL;",
          "new_line_content": "     * increment the ref count, that we'll decrement later. */",
          "content_same": false
        },
        {
          "line": 5295,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(subst)",
          "new_text": null,
          "old_line_content": "        decrRefCount(subst);",
          "new_line_content": "    ssub = subst->ptr;",
          "content_same": false
        },
        {
          "line": 7343,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG, \"VM: object %s loaded from disk\",\n            (unsigned char*) key->ptr)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_DEBUG, \"VM: object %s loaded from disk\",",
          "new_line_content": "    if (!preview) {",
          "content_same": false
        },
        {
          "line": 5300,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(ssub)",
          "new_text": null,
          "old_line_content": "    sublen = sdslen(ssub);",
          "new_line_content": "        return NULL;",
          "content_same": false
        },
        {
          "line": 5301,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(spat)",
          "new_text": null,
          "old_line_content": "    postfixlen = sdslen(spat)-(prefixlen+1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5302,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(keyname.buf,spat,prefixlen)",
          "new_text": null,
          "old_line_content": "    memcpy(keyname.buf,spat,prefixlen);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5303,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(keyname.buf+prefixlen,ssub,sublen)",
          "new_text": null,
          "old_line_content": "    memcpy(keyname.buf+prefixlen,ssub,sublen);",
          "new_line_content": "    prefixlen = p-spat;",
          "content_same": false
        },
        {
          "line": 5309,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(subst)",
          "new_text": null,
          "old_line_content": "    decrRefCount(subst);",
          "new_line_content": "    keyname.buf[prefixlen+sublen+postfixlen] = '\\0';",
          "content_same": false
        },
        {
          "line": 7359,
          "old_api": "vmCancelThreadedIOJob",
          "new_api": null,
          "old_text": "vmCancelThreadedIOJob(key)",
          "new_text": null,
          "old_line_content": "        vmCancelThreadedIOJob(key);",
          "new_line_content": "static robj *vmLoadObject(robj *key) {",
          "content_same": false
        },
        {
          "line": 7360,
          "old_api": "vmGenericLoadObject",
          "new_api": null,
          "old_text": "vmGenericLoadObject(key,0)",
          "new_text": null,
          "old_line_content": "    return vmGenericLoadObject(key,0);",
          "new_line_content": "    /* If we are loading the object in background, stop it, we",
          "content_same": false
        },
        {
          "line": 7368,
          "old_api": "vmGenericLoadObject",
          "new_api": null,
          "old_text": "vmGenericLoadObject(key,1)",
          "new_text": null,
          "old_line_content": "    return vmGenericLoadObject(key,1);",
          "new_line_content": " * This is useful when we want to perform some operation on the value",
          "content_same": false
        },
        {
          "line": 5344,
          "old_api": "strcoll",
          "new_api": null,
          "old_text": "strcoll(so1->u.cmpobj->ptr,so2->u.cmpobj->ptr)",
          "new_text": null,
          "old_line_content": "                cmp = strcoll(so1->u.cmpobj->ptr,so2->u.cmpobj->ptr);",
          "new_line_content": "                else",
          "content_same": false
        },
        {
          "line": 7396,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(o->ptr)",
          "new_text": null,
          "old_line_content": "            asize = sdslen(o->ptr)+sizeof(*o)+sizeof(long)*2;",
          "new_line_content": "    case REDIS_STRING:",
          "content_same": false
        },
        {
          "line": 5350,
          "old_api": "getDecodedObject",
          "new_api": null,
          "old_text": "getDecodedObject(so1->obj)",
          "new_text": null,
          "old_line_content": "            dec1 = getDecodedObject(so1->obj);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 5351,
          "old_api": "getDecodedObject",
          "new_api": null,
          "old_text": "getDecodedObject(so2->obj)",
          "new_text": null,
          "old_line_content": "            dec2 = getDecodedObject(so2->obj);",
          "new_line_content": "            /* Compare elements directly */",
          "content_same": false
        },
        {
          "line": 5352,
          "old_api": "strcoll",
          "new_api": null,
          "old_text": "strcoll(dec1->ptr,dec2->ptr)",
          "new_text": null,
          "old_line_content": "            cmp = strcoll(dec1->ptr,dec2->ptr);",
          "new_line_content": "            robj *dec1, *dec2;",
          "content_same": false
        },
        {
          "line": 5353,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(dec1)",
          "new_text": null,
          "old_line_content": "            decrRefCount(dec1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7401,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(l)",
          "new_text": null,
          "old_line_content": "        listNode *ln = listFirst(l);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 7409,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(ele->ptr)",
          "new_text": null,
          "old_line_content": "                            (sizeof(*o)+sdslen(ele->ptr)) :",
          "new_line_content": "            robj *ele = ln->value;",
          "content_same": false
        },
        {
          "line": 7411,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(l)",
          "new_text": null,
          "old_line_content": "            asize += (sizeof(listNode)+elesize)*listLength(l);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7419,
          "old_api": "dictSlots",
          "new_api": null,
          "old_text": "dictSlots(d)",
          "new_text": null,
          "old_line_content": "        asize = sizeof(dict)+(sizeof(struct dictEntry*)*dictSlots(d));",
          "new_line_content": "    case REDIS_ZSET:",
          "content_same": false
        },
        {
          "line": 5373,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    sortval = lookupKeyRead(c->db,c->argv[1]);",
          "new_line_content": "    robj *sortval, *sortby = NULL, *storekey = NULL;",
          "content_same": false
        },
        {
          "line": 7421,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(d)",
          "new_text": null,
          "old_line_content": "        if (dictSize(d)) {",
          "new_line_content": "        d = z ? ((zset*)o->ptr)->dict : o->ptr;",
          "content_same": false
        },
        {
          "line": 5375,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullmultibulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.nullmultibulk);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7426,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "            ele = dictGetEntryKey(de);",
          "new_line_content": "            long elesize;",
          "content_same": false
        },
        {
          "line": 7428,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(ele->ptr)",
          "new_text": null,
          "old_line_content": "                            (sizeof(*o)+sdslen(ele->ptr)) :",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5381,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.wrongtypeerr);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7431,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(d)",
          "new_text": null,
          "old_line_content": "            if (z) asize += sizeof(zskiplistNode)*dictSize(d);",
          "new_line_content": "            elesize = (ele->encoding == REDIS_ENCODING_RAW) ?",
          "content_same": false
        },
        {
          "line": 5387,
          "old_api": "listCreate",
          "new_api": null,
          "old_text": "listCreate()",
          "new_text": null,
          "old_line_content": "    operations = listCreate();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5388,
          "old_api": "listSetFreeMethod",
          "new_api": null,
          "old_text": "listSetFreeMethod(operations,zfree)",
          "new_text": null,
          "old_line_content": "    listSetFreeMethod(operations,zfree);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3342,
          "old_api": "rdbLoadStringObject",
          "new_api": null,
          "old_text": "rdbLoadStringObject(fp)",
          "new_text": null,
          "old_line_content": "            if ((ele = rdbLoadStringObject(fp)) == NULL) return NULL;",
          "new_line_content": "        /* Load every single element of the list/set */",
          "content_same": false
        },
        {
          "line": 3343,
          "old_api": "tryObjectEncoding",
          "new_api": null,
          "old_text": "tryObjectEncoding(ele)",
          "new_text": null,
          "old_line_content": "            tryObjectEncoding(ele);",
          "new_line_content": "        while(listlen--) {",
          "content_same": false
        },
        {
          "line": 3345,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail((list*)o->ptr,ele)",
          "new_text": null,
          "old_line_content": "                listAddNodeTail((list*)o->ptr,ele);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5394,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(sortval)",
          "new_text": null,
          "old_line_content": "    incrRefCount(sortval);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5399,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"asc\")",
          "new_text": null,
          "old_line_content": "        if (!strcasecmp(c->argv[j]->ptr,\"asc\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5401,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"desc\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(c->argv[j]->ptr,\"desc\")) {",
          "new_line_content": "    while(j < c->argc) {",
          "content_same": false
        },
        {
          "line": 3355,
          "old_api": "rdbLoadLen",
          "new_api": null,
          "old_text": "rdbLoadLen(fp,NULL)",
          "new_text": null,
          "old_line_content": "        if ((zsetlen = rdbLoadLen(fp,NULL)) == REDIS_RDB_LENERR) return NULL;",
          "new_line_content": "        /* Read list/set value */",
          "content_same": false
        },
        {
          "line": 3356,
          "old_api": "createZsetObject",
          "new_api": null,
          "old_text": "createZsetObject()",
          "new_text": null,
          "old_line_content": "        o = createZsetObject();",
          "new_line_content": "        uint32_t zsetlen;",
          "content_same": false
        },
        {
          "line": 5406,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[j+1]->ptr)",
          "new_text": null,
          "old_line_content": "            limit_start = atoi(c->argv[j+1]->ptr);",
          "new_line_content": "            desc = 1;",
          "content_same": false
        },
        {
          "line": 3361,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(double))",
          "new_text": null,
          "old_line_content": "            double *score = zmalloc(sizeof(double));",
          "new_line_content": "        zs = o->ptr;",
          "content_same": false
        },
        {
          "line": 7458,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(db->dict)",
          "new_text": null,
          "old_line_content": "        if (dictSize(db->dict) == 0) continue;",
          "new_line_content": "         * Because this way (usually) we'll find 1 object even if just 1% - 2%",
          "content_same": false
        },
        {
          "line": 3363,
          "old_api": "rdbLoadStringObject",
          "new_api": null,
          "old_text": "rdbLoadStringObject(fp)",
          "new_text": null,
          "old_line_content": "            if ((ele = rdbLoadStringObject(fp)) == NULL) return NULL;",
          "new_line_content": "        while(zsetlen--) {",
          "content_same": false
        },
        {
          "line": 3364,
          "old_api": "tryObjectEncoding",
          "new_api": null,
          "old_text": "tryObjectEncoding(ele)",
          "new_text": null,
          "old_line_content": "            tryObjectEncoding(ele);",
          "new_line_content": "            robj *ele;",
          "content_same": false
        },
        {
          "line": 5412,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"by\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(c->argv[j]->ptr,\"by\") && leftargs >= 1) {",
          "new_line_content": "            j+=2;",
          "content_same": false
        },
        {
          "line": 3366,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(zs->dict,ele,score)",
          "new_text": null,
          "old_line_content": "            dictAdd(zs->dict,ele,score);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7464,
          "old_api": "dictGetRandomKey",
          "new_api": null,
          "old_text": "dictGetRandomKey(db->dict)",
          "new_text": null,
          "old_line_content": "            de = dictGetRandomKey(db->dict);",
          "new_line_content": "            dictEntry *de;",
          "content_same": false
        },
        {
          "line": 7465,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "            key = dictGetEntryKey(de);",
          "new_line_content": "            double swappability;",
          "content_same": false
        },
        {
          "line": 5418,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"get\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(c->argv[j]->ptr,\"get\") && leftargs >= 1) {",
          "new_line_content": "            /* If the BY pattern does not contain '*', i.e. it is constant,",
          "content_same": false
        },
        {
          "line": 5419,
          "old_api": "createSortOperation",
          "new_api": null,
          "old_text": "createSortOperation(\n                REDIS_SORT_GET,c->argv[j+1])",
          "new_text": null,
          "old_line_content": "            listAddNodeTail(operations,createSortOperation(",
          "new_line_content": "             * we don't need to sort nor to lookup the weight keys. */",
          "content_same": false
        },
        {
          "line": 7466,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "            val = dictGetEntryVal(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5424,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(sortval)",
          "new_text": null,
          "old_line_content": "            decrRefCount(sortval);",
          "new_line_content": "                REDIS_SORT_GET,c->argv[j+1]));",
          "content_same": false
        },
        {
          "line": 5425,
          "old_api": "listRelease",
          "new_api": null,
          "old_text": "listRelease(operations)",
          "new_text": null,
          "old_line_content": "            listRelease(operations);",
          "new_line_content": "            getop++;",
          "content_same": false
        },
        {
          "line": 5426,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.syntaxerr);",
          "new_line_content": "            j++;",
          "content_same": false
        },
        {
          "line": 7478,
          "old_api": "computeObjectSwappability",
          "new_api": null,
          "old_text": "computeObjectSwappability(val)",
          "new_text": null,
          "old_line_content": "            swappability = computeObjectSwappability(val);",
          "new_line_content": "                (server.vm_max_threads != 0 && val->refcount != 1)) {",
          "content_same": false
        },
        {
          "line": 3384,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    time_t expiretime = -1, now = time(NULL);",
          "new_line_content": "    int type, retval, rdbver;",
          "content_same": false
        },
        {
          "line": 5434,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength((list*)sortval->ptr)",
          "new_text": null,
          "old_line_content": "    case REDIS_LIST: vectorlen = listLength((list*)sortval->ptr); break;",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3387,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(filename,\"r\")",
          "new_text": null,
          "old_line_content": "    fp = fopen(filename,\"r\");",
          "new_line_content": "    char buf[1024];",
          "content_same": false
        },
        {
          "line": 5435,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize((dict*)sortval->ptr)",
          "new_text": null,
          "old_line_content": "    case REDIS_SET: vectorlen =  dictSize((dict*)sortval->ptr); break;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3389,
          "old_api": "fread",
          "new_api": null,
          "old_text": "fread(buf,9,1,fp)",
          "new_text": null,
          "old_line_content": "    if (fread(buf,9,1,fp) == 0) goto eoferr;",
          "new_line_content": "    long long loadedkeys = 0;",
          "content_same": false
        },
        {
          "line": 5436,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(((zset*)sortval->ptr)->dict)",
          "new_text": null,
          "old_line_content": "    case REDIS_ZSET: vectorlen = dictSize(((zset*)sortval->ptr)->dict); break;",
          "new_line_content": "    /* Load the sorting vector with all the objects to sort */",
          "content_same": false
        },
        {
          "line": 5437,
          "old_api": "redisAssert",
          "new_api": null,
          "old_text": "redisAssert(0)",
          "new_text": null,
          "old_line_content": "    default: vectorlen = 0; redisAssert(0); /* Avoid GCC warning */",
          "new_line_content": "    switch(sortval->type) {",
          "content_same": false
        },
        {
          "line": 3392,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "        fclose(fp);",
          "new_line_content": "    if (!fp) return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 7487,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG,\"No swappable key found!\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_DEBUG,\"No swappable key found!\");",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 7490,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(best)",
          "new_text": null,
          "old_line_content": "    key = dictGetEntryKey(best);",
          "new_line_content": "    if (best == NULL) {",
          "content_same": false
        },
        {
          "line": 7493,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG,\"Key with best swappability: %s, %f\",\n        key->ptr, best_swappability)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_DEBUG,\"Key with best swappability: %s, %f\",",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3398,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "        fclose(fp);",
          "new_line_content": "        return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 3399,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Can't handle RDB format version %d\",rdbver)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Can't handle RDB format version %d\",rdbver);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5447,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(list,&li)",
          "new_text": null,
          "old_line_content": "        listRewind(list,&li);",
          "new_line_content": "        list *list = sortval->ptr;",
          "content_same": false
        },
        {
          "line": 5448,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "        while((ln = listNext(&li))) {",
          "new_line_content": "        listNode *ln;",
          "content_same": false
        },
        {
          "line": 7498,
          "old_api": "dupStringObject",
          "new_api": null,
          "old_text": "dupStringObject(key)",
          "new_text": null,
          "old_line_content": "        robj *newkey = dupStringObject(key);",
          "new_line_content": "        key->ptr, best_swappability);",
          "content_same": false
        },
        {
          "line": 7499,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(key)",
          "new_text": null,
          "old_line_content": "        decrRefCount(key);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7500,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(best)",
          "new_text": null,
          "old_line_content": "        key = dictGetEntryKey(best) = newkey;",
          "new_line_content": "    /* Unshare the key if needed */",
          "content_same": false
        },
        {
          "line": 3406,
          "old_api": "rdbLoadType",
          "new_api": null,
          "old_text": "rdbLoadType(fp)",
          "new_text": null,
          "old_line_content": "        if ((type = rdbLoadType(fp)) == -1) goto eoferr;",
          "new_line_content": "    while(1) {",
          "content_same": false
        },
        {
          "line": 3408,
          "old_api": "rdbLoadTime",
          "new_api": null,
          "old_text": "rdbLoadTime(fp)",
          "new_text": null,
          "old_line_content": "            if ((expiretime = rdbLoadTime(fp)) == -1) goto eoferr;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7507,
          "old_api": "vmSwapObjectBlocking",
          "new_api": null,
          "old_text": "vmSwapObjectBlocking(key,val)",
          "new_text": null,
          "old_line_content": "        if (vmSwapObjectBlocking(key,val) == REDIS_OK) {",
          "new_line_content": "    if (usethreads) {",
          "content_same": false
        },
        {
          "line": 3415,
          "old_api": "rdbLoadLen",
          "new_api": null,
          "old_text": "rdbLoadLen(fp,NULL)",
          "new_text": null,
          "old_line_content": "            if ((dbid = rdbLoadLen(fp,NULL)) == REDIS_RDB_LENERR)",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3418,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"FATAL: Data file was created with a Redis server configured to handle more than %d databases. Exiting\\n\", server.dbnum)",
          "new_text": null,
          "old_line_content": "                redisLog(REDIS_WARNING,\"FATAL: Data file was created with a Redis server configured to handle more than %d databases. Exiting\\n\", server.dbnum);",
          "new_line_content": "        if (type == REDIS_SELECTDB) {",
          "content_same": false
        },
        {
          "line": 5467,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(set)",
          "new_text": null,
          "old_line_content": "        di = dictGetIterator(set);",
          "new_line_content": "            zset *zs = sortval->ptr;",
          "content_same": false
        },
        {
          "line": 5468,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "        while((setele = dictNext(di)) != NULL) {",
          "new_line_content": "            set = zs->dict;",
          "content_same": false
        },
        {
          "line": 5469,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(setele)",
          "new_text": null,
          "old_line_content": "            vector[j].obj = dictGetEntryKey(setele);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 7517,
          "old_api": "vmSwapOneObject",
          "new_api": null,
          "old_text": "vmSwapOneObject(0)",
          "new_text": null,
          "old_line_content": "    return vmSwapOneObject(0);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3426,
          "old_api": "rdbLoadStringObject",
          "new_api": null,
          "old_text": "rdbLoadStringObject(fp)",
          "new_text": null,
          "old_line_content": "        if ((keyobj = rdbLoadStringObject(fp)) == NULL) goto eoferr;",
          "new_line_content": "            d = db->dict;",
          "content_same": false
        },
        {
          "line": 5474,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "        dictReleaseIterator(di);",
          "new_line_content": "            vector[j].u.score = 0;",
          "content_same": false
        },
        {
          "line": 3428,
          "old_api": "rdbLoadObject",
          "new_api": null,
          "old_text": "rdbLoadObject(type,fp)",
          "new_text": null,
          "old_line_content": "        if ((o = rdbLoadObject(type,fp)) == NULL) goto eoferr;",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5476,
          "old_api": "redisAssert",
          "new_api": null,
          "old_text": "redisAssert(j == vectorlen)",
          "new_text": null,
          "old_line_content": "    redisAssert(j == vectorlen);",
          "new_line_content": "            j++;",
          "content_same": false
        },
        {
          "line": 3433,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "            exit(1);",
          "new_line_content": "        /* Add the new object in the hash table */",
          "content_same": false
        },
        {
          "line": 5484,
          "old_api": "lookupKeyByPattern",
          "new_api": null,
          "old_text": "lookupKeyByPattern(c->db,sortby,vector[j].obj)",
          "new_text": null,
          "old_line_content": "                byval = lookupKeyByPattern(c->db,sortby,vector[j].obj);",
          "new_line_content": "        for (j = 0; j < vectorlen; j++) {",
          "content_same": false
        },
        {
          "line": 3439,
          "old_api": "deleteKey",
          "new_api": null,
          "old_text": "deleteKey(db,keyobj)",
          "new_text": null,
          "old_line_content": "            if (expiretime < now) deleteKey(db,keyobj);",
          "new_line_content": "        /* Set the expire time if needed */",
          "content_same": false
        },
        {
          "line": 5487,
          "old_api": "getDecodedObject",
          "new_api": null,
          "old_text": "getDecodedObject(byval)",
          "new_text": null,
          "old_line_content": "                    vector[j].u.cmpobj = getDecodedObject(byval);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7537,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(db->dict,key)",
          "new_text": null,
          "old_line_content": "    if ((de = dictFind(db->dict,key)) == NULL) return 0;",
          "new_line_content": "static int deleteIfSwapped(redisDb *db, robj *key) {",
          "content_same": false
        },
        {
          "line": 5490,
          "old_api": "strtod",
          "new_api": null,
          "old_text": "strtod(byval->ptr,NULL)",
          "new_text": null,
          "old_line_content": "                        vector[j].u.score = strtod(byval->ptr,NULL);",
          "new_line_content": "                if (alpha) {",
          "content_same": false
        },
        {
          "line": 7538,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "    foundkey = dictGetEntryKey(de);",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 7540,
          "old_api": "deleteKey",
          "new_api": null,
          "old_text": "deleteKey(db,key)",
          "new_text": null,
          "old_line_content": "    deleteKey(db,key);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3446,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "            while (zmalloc_used_memory() > server.vm_max_memory) {",
          "new_line_content": "        keyobj = o = NULL;",
          "content_same": false
        },
        {
          "line": 3447,
          "old_api": "vmSwapOneObjectBlocking",
          "new_api": null,
          "old_text": "vmSwapOneObjectBlocking()",
          "new_text": null,
          "old_line_content": "                if (vmSwapOneObjectBlocking() == REDIS_ERR) break;",
          "new_line_content": "        /* Handle swapping while loading big datasets when VM is on */",
          "content_same": false
        },
        {
          "line": 5498,
          "old_api": "redisAssert",
          "new_api": null,
          "old_text": "redisAssert(1 != 1)",
          "new_text": null,
          "old_line_content": "                            redisAssert(1 != 1);",
          "new_line_content": "                         * far. We can just cast it */",
          "content_same": false
        },
        {
          "line": 7550,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(j->val)",
          "new_text": null,
          "old_line_content": "        decrRefCount(j->val);",
          "new_line_content": "static void freeIOJob(iojob *j) {",
          "content_same": false
        },
        {
          "line": 7551,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(j->key)",
          "new_text": null,
          "old_line_content": "    decrRefCount(j->key);",
          "new_line_content": "    if ((j->type == REDIS_IOJOB_PREPARE_SWAP ||",
          "content_same": false
        },
        {
          "line": 3456,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Short read or OOM loading DB. Unrecoverable error, aborting now.\")",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_WARNING,\"Short read or OOM loading DB. Unrecoverable error, aborting now.\");",
          "new_line_content": "    return REDIS_OK;",
          "content_same": false
        },
        {
          "line": 3457,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "    exit(1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5504,
          "old_api": "strtod",
          "new_api": null,
          "old_text": "strtod(vector[j].obj->ptr,NULL)",
          "new_text": null,
          "old_line_content": "                        vector[j].u.score = strtod(vector[j].obj->ptr,NULL);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 7552,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(j)",
          "new_text": null,
          "old_line_content": "    zfree(j);",
          "new_line_content": "        j->type == REDIS_IOJOB_DO_SWAP ||",
          "content_same": false
        },
        {
          "line": 5509,
          "old_api": "redisAssert",
          "new_api": null,
          "old_text": "redisAssert(1 != 1)",
          "new_text": null,
          "old_line_content": "                            redisAssert(1 != 1);",
          "new_line_content": "                    else {",
          "content_same": false
        },
        {
          "line": 3464,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(c->argv[1]->ptr, server.requirepass)",
          "new_text": null,
          "old_line_content": "    if (!server.requirepass || !strcmp(c->argv[1]->ptr, server.requirepass)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3466,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "      addReply(c,shared.ok);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7563,
          "old_api": "REDIS_NOTUSED",
          "new_api": null,
          "old_text": "REDIS_NOTUSED(el)",
          "new_text": null,
          "old_line_content": "    REDIS_NOTUSED(el);",
          "new_line_content": "            int mask)",
          "content_same": false
        },
        {
          "line": 7564,
          "old_api": "REDIS_NOTUSED",
          "new_api": null,
          "old_text": "REDIS_NOTUSED(mask)",
          "new_text": null,
          "old_line_content": "    REDIS_NOTUSED(mask);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3469,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "      addReplySds(c,sdscatprintf(sdsempty(),\"-ERR invalid password\\r\\n\"));",
          "new_line_content": "      c->authenticated = 1;",
          "content_same": false
        },
        {
          "line": 7565,
          "old_api": "REDIS_NOTUSED",
          "new_api": null,
          "old_text": "REDIS_NOTUSED(privdata)",
          "new_text": null,
          "old_line_content": "    REDIS_NOTUSED(privdata);",
          "new_line_content": "    char buf[1];",
          "content_same": false
        },
        {
          "line": 3474,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.pong)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.pong);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3479,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,c->argv[1])",
          "new_text": null,
          "old_line_content": "    addReply(c,c->argv[1]);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3480,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.crlf)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.crlf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7575,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG,\"Processing I/O completed job\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_DEBUG,\"Processing I/O completed job\");",
          "new_line_content": "        listNode *ln;",
          "content_same": false
        },
        {
          "line": 7578,
          "old_api": "lockThreadedIO",
          "new_api": null,
          "old_text": "lockThreadedIO()",
          "new_text": null,
          "old_line_content": "        lockThreadedIO();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5531,
          "old_api": "pqsort",
          "new_api": null,
          "old_text": "pqsort(vector,vectorlen,sizeof(redisSortObject),sortCompare, start,end)",
          "new_text": null,
          "old_line_content": "            pqsort(vector,vectorlen,sizeof(redisSortObject),sortCompare, start,end);",
          "new_line_content": "        server.sort_desc = desc;",
          "content_same": false
        },
        {
          "line": 5533,
          "old_api": "qsort",
          "new_api": null,
          "old_text": "qsort(vector,vectorlen,sizeof(redisSortObject),sortCompare)",
          "new_text": null,
          "old_line_content": "            qsort(vector,vectorlen,sizeof(redisSortObject),sortCompare);",
          "new_line_content": "        server.sort_bypattern = sortby ? 1 : 0;",
          "content_same": false
        },
        {
          "line": 7581,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.io_processed)",
          "new_text": null,
          "old_line_content": "            toprocess = (listLength(server.io_processed)*REDIS_MAX_COMPLETED_JOBS_PROCESSED)/100;",
          "new_line_content": "        /* Get the processed element (the oldest one) */",
          "content_same": false
        },
        {
          "line": 3488,
          "old_api": "deleteIfVolatile",
          "new_api": null,
          "old_text": "deleteIfVolatile(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    if (nx) deleteIfVolatile(c->db,c->argv[1]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3489,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(c->db->dict,c->argv[1],c->argv[2])",
          "new_text": null,
          "old_line_content": "    retval = dictAdd(c->db->dict,c->argv[1],c->argv[2]);",
          "new_line_content": "static void setGenericCommand(redisClient *c, int nx) {",
          "content_same": false
        },
        {
          "line": 7584,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(server.io_processed)",
          "new_text": null,
          "old_line_content": "        ln = listFirst(server.io_processed);",
          "new_line_content": "        if (toprocess == -1) {",
          "content_same": false
        },
        {
          "line": 7586,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(server.io_processed,ln)",
          "new_text": null,
          "old_line_content": "        listDelNode(server.io_processed,ln);",
          "new_line_content": "            if (toprocess <= 0) toprocess = 1;",
          "content_same": false
        },
        {
          "line": 7587,
          "old_api": "unlockThreadedIO",
          "new_api": null,
          "old_text": "unlockThreadedIO()",
          "new_text": null,
          "old_line_content": "        unlockThreadedIO();",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5541,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",outputlen));",
          "new_line_content": "     * GET/DEL/INCR/DECR operations if any. */",
          "content_same": false
        },
        {
          "line": 3496,
          "old_api": "deleteIfSwapped",
          "new_api": null,
          "old_text": "deleteIfSwapped(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "            if (deleteIfSwapped(c->db,c->argv[1]))",
          "new_line_content": "            /* If the key is about a swapped value, we want a new key object",
          "content_same": false
        },
        {
          "line": 3497,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(c->argv[1])",
          "new_text": null,
          "old_line_content": "                incrRefCount(c->argv[1]);",
          "new_line_content": "             * to overwrite the old. So we delete the old key in the database.",
          "content_same": false
        },
        {
          "line": 3498,
          "old_api": "dictReplace",
          "new_api": null,
          "old_text": "dictReplace(c->db->dict,c->argv[1],c->argv[2])",
          "new_text": null,
          "old_line_content": "            dictReplace(c->db->dict,c->argv[1],c->argv[2]);",
          "new_line_content": "             * This will also make sure that swap pages about the old object",
          "content_same": false
        },
        {
          "line": 3499,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(c->argv[2])",
          "new_text": null,
          "old_line_content": "            incrRefCount(c->argv[2]);",
          "new_line_content": "             * will be marked as free. */",
          "content_same": false
        },
        {
          "line": 5547,
          "old_api": "addReplyBulkLen",
          "new_api": null,
          "old_text": "addReplyBulkLen(c,vector[j].obj)",
          "new_text": null,
          "old_line_content": "                addReplyBulkLen(c,vector[j].obj);",
          "new_line_content": "            listNode *ln;",
          "content_same": false
        },
        {
          "line": 5548,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,vector[j].obj)",
          "new_text": null,
          "old_line_content": "                addReply(c,vector[j].obj);",
          "new_line_content": "            listIter li;",
          "content_same": false
        },
        {
          "line": 5549,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.crlf)",
          "new_text": null,
          "old_line_content": "                addReply(c,shared.crlf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7595,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG,\"Job %p type: %d, key at %p (%s) refcount: %d\\n\", (void*) j, j->type, (void*)j->key, (char*)j->key->ptr, j->key->refcount)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_DEBUG,\"Job %p type: %d, key at %p (%s) refcount: %d\\n\", (void*) j, j->type, (void*)j->key, (char*)j->key->ptr, j->key->refcount);",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 7596,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(j->db->dict,j->key)",
          "new_text": null,
          "old_line_content": "        de = dictFind(j->db->dict,j->key);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 7597,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(de != NULL)",
          "new_text": null,
          "old_line_content": "        assert(de != NULL);",
          "new_line_content": "        /* Post process it in the main thread, as there are things we",
          "content_same": false
        },
        {
          "line": 3506,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(c->argv[2])",
          "new_text": null,
          "old_line_content": "        incrRefCount(c->argv[2]);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 5554,
          "old_api": "lookupKeyByPattern",
          "new_api": null,
          "old_text": "lookupKeyByPattern(c->db,sop->pattern,\n                    vector[j].obj)",
          "new_text": null,
          "old_line_content": "                robj *val = lookupKeyByPattern(c->db,sop->pattern,",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 7598,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "        key = dictGetEntryKey(de);",
          "new_line_content": "         * can do just here to avoid race conditions and/or invasive locks */",
          "content_same": false
        },
        {
          "line": 7605,
          "old_api": "vmMarkPagesFree",
          "new_api": null,
          "old_text": "vmMarkPagesFree(key->vm.page,key->vm.usedpages)",
          "new_text": null,
          "old_line_content": "            vmMarkPagesFree(key->vm.page,key->vm.usedpages);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7606,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG, \"VM: object %s loaded from disk (threaded)\",\n                (unsigned char*) key->ptr)",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_DEBUG, \"VM: object %s loaded from disk (threaded)\",",
          "new_line_content": "            /* Key loaded, bring it at home */",
          "content_same": false
        },
        {
          "line": 5559,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "                        addReply(c,shared.nullbulk);",
          "new_line_content": "                    vector[j].obj);",
          "content_same": false
        },
        {
          "line": 5561,
          "old_api": "addReplyBulkLen",
          "new_api": null,
          "old_text": "addReplyBulkLen(c,val)",
          "new_text": null,
          "old_line_content": "                        addReplyBulkLen(c,val);",
          "new_line_content": "                if (sop->type == REDIS_SORT_GET) {",
          "content_same": false
        },
        {
          "line": 5562,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,val)",
          "new_text": null,
          "old_line_content": "                        addReply(c,val);",
          "new_line_content": "                    if (!val || val->type != REDIS_STRING) {",
          "content_same": false
        },
        {
          "line": 7611,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(j->val)",
          "new_text": null,
          "old_line_content": "            incrRefCount(j->val);",
          "new_line_content": "                (unsigned char*) key->ptr);",
          "content_same": false
        },
        {
          "line": 7613,
          "old_api": "freeIOJob",
          "new_api": null,
          "old_text": "freeIOJob(j)",
          "new_text": null,
          "old_line_content": "            freeIOJob(j);",
          "new_line_content": "            server.vm_stats_swapins++;",
          "content_same": false
        },
        {
          "line": 5571,
          "old_api": "createListObject",
          "new_api": null,
          "old_text": "createListObject()",
          "new_text": null,
          "old_line_content": "        robj *listObject = createListObject();",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 7620,
          "old_api": "vmCanSwapOut",
          "new_api": null,
          "old_text": "vmCanSwapOut()",
          "new_text": null,
          "old_line_content": "            if (!vmCanSwapOut() ||",
          "new_line_content": "        } else if (j->type == REDIS_IOJOB_PREPARE_SWAP) {",
          "content_same": false
        },
        {
          "line": 3525,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.nullbulk);",
          "new_line_content": "static int getGenericCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 7621,
          "old_api": "vmFindContiguousPages",
          "new_api": null,
          "old_text": "vmFindContiguousPages(&j->page,j->pages)",
          "new_text": null,
          "old_line_content": "                vmFindContiguousPages(&j->page,j->pages) == REDIS_ERR)",
          "new_line_content": "            /* Now we know the amount of pages required to swap this object.",
          "content_same": false
        },
        {
          "line": 3532,
          "old_api": "addReplyBulkLen",
          "new_api": null,
          "old_text": "addReplyBulkLen(c,o)",
          "new_text": null,
          "old_line_content": "            addReplyBulkLen(c,o);",
          "new_line_content": "        if (o->type != REDIS_STRING) {",
          "content_same": false
        },
        {
          "line": 5580,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(listPtr,vector[j].obj)",
          "new_text": null,
          "old_line_content": "                listAddNodeTail(listPtr,vector[j].obj);",
          "new_line_content": "            listNode *ln;",
          "content_same": false
        },
        {
          "line": 3534,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.crlf)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.crlf);",
          "new_line_content": "            return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 5581,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(vector[j].obj)",
          "new_text": null,
          "old_line_content": "                incrRefCount(vector[j].obj);",
          "new_line_content": "            listIter li;",
          "content_same": false
        },
        {
          "line": 5583,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(operations,&li)",
          "new_text": null,
          "old_line_content": "            listRewind(operations,&li);",
          "new_line_content": "            if (!getop) {",
          "content_same": false
        },
        {
          "line": 7631,
          "old_api": "vmMarkPagesUsed",
          "new_api": null,
          "old_text": "vmMarkPagesUsed(j->page,j->pages)",
          "new_text": null,
          "old_line_content": "                vmMarkPagesUsed(j->page,j->pages);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 5586,
          "old_api": "lookupKeyByPattern",
          "new_api": null,
          "old_text": "lookupKeyByPattern(c->db,sop->pattern,\n                    vector[j].obj)",
          "new_text": null,
          "old_line_content": "                robj *val = lookupKeyByPattern(c->db,sop->pattern,",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 7633,
          "old_api": "lockThreadedIO",
          "new_api": null,
          "old_text": "lockThreadedIO()",
          "new_text": null,
          "old_line_content": "                lockThreadedIO();",
          "new_line_content": "                 * if the job will be canceled, we'll mark them as freed",
          "content_same": false
        },
        {
          "line": 7634,
          "old_api": "queueIOJob",
          "new_api": null,
          "old_text": "queueIOJob(j)",
          "new_text": null,
          "old_line_content": "                queueIOJob(j);",
          "new_line_content": "                 * again. */",
          "content_same": false
        },
        {
          "line": 3541,
          "old_api": "getGenericCommand",
          "new_api": null,
          "old_text": "getGenericCommand(c)",
          "new_text": null,
          "old_line_content": "    getGenericCommand(c);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5591,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject(\"\",0)",
          "new_text": null,
          "old_line_content": "                        listAddNodeTail(listPtr,createStringObject(\"\",0));",
          "new_line_content": "                    vector[j].obj);",
          "content_same": false
        },
        {
          "line": 5593,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(listPtr,val)",
          "new_text": null,
          "old_line_content": "                        listAddNodeTail(listPtr,val);",
          "new_line_content": "                if (sop->type == REDIS_SORT_GET) {",
          "content_same": false
        },
        {
          "line": 3546,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(c->db->dict,c->argv[1],c->argv[2])",
          "new_text": null,
          "old_line_content": "    if (dictAdd(c->db->dict,c->argv[1],c->argv[2]) == DICT_ERR) {",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3547,
          "old_api": "dictReplace",
          "new_api": null,
          "old_text": "dictReplace(c->db->dict,c->argv[1],c->argv[2])",
          "new_text": null,
          "old_line_content": "        dictReplace(c->db->dict,c->argv[1],c->argv[2]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5594,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(val)",
          "new_text": null,
          "old_line_content": "                        incrRefCount(val);",
          "new_line_content": "                    if (!val || val->type != REDIS_STRING) {",
          "content_same": false
        },
        {
          "line": 7642,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"key->storage: %d\\n\",key->storage)",
          "new_text": null,
          "old_line_content": "                printf(\"key->storage: %d\\n\",key->storage);",
          "new_line_content": "            robj *val;",
          "content_same": false
        },
        {
          "line": 7643,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"key->name: %s\\n\",(char*)key->ptr)",
          "new_text": null,
          "old_line_content": "                printf(\"key->name: %s\\n\",(char*)key->ptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7644,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"key->refcount: %d\\n\",key->refcount)",
          "new_text": null,
          "old_line_content": "                printf(\"key->refcount: %d\\n\",key->refcount);",
          "new_line_content": "            /* Key swapped. We can finally free some memory. */",
          "content_same": false
        },
        {
          "line": 7645,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"val: %p\\n\",(void*)j->val)",
          "new_text": null,
          "old_line_content": "                printf(\"val: %p\\n\",(void*)j->val);",
          "new_line_content": "            if (key->storage != REDIS_VM_SWAPPING) {",
          "content_same": false
        },
        {
          "line": 5602,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(storekey)",
          "new_text": null,
          "old_line_content": "            incrRefCount(storekey);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 3559,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",c->argc-1));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5608,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),\":%d\\r\\n\",outputlen));",
          "new_line_content": "        /* Note: we add 1 because the DB is dirty anyway since even if the",
          "content_same": false
        },
        {
          "line": 3561,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[j])",
          "new_text": null,
          "old_line_content": "        robj *o = lookupKeyRead(c->db,c->argv[j]);",
          "new_line_content": "    int j;",
          "content_same": false
        },
        {
          "line": 7655,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(val)",
          "new_text": null,
          "old_line_content": "            decrRefCount(val); /* Deallocate the object from memory. */",
          "new_line_content": "            key->vm.page = j->page;",
          "content_same": false
        },
        {
          "line": 7656,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "            dictGetEntryVal(de) = NULL;",
          "new_line_content": "            key->vm.usedpages = j->pages;",
          "content_same": false
        },
        {
          "line": 7657,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG,\n                \"VM: object %s swapped out at %lld (%lld pages) (threaded)\",\n                (unsigned char*) key->ptr,\n                (unsigned long long) j->page, (unsigned long long) j->pages)",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_DEBUG,",
          "new_line_content": "            key->storage = REDIS_VM_SWAPPED;",
          "content_same": false
        },
        {
          "line": 5613,
          "old_api": "listRelease",
          "new_api": null,
          "old_text": "listRelease(operations)",
          "new_text": null,
          "old_line_content": "    listRelease(operations);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3566,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "                addReply(c,shared.nullbulk);",
          "new_line_content": "        if (o == NULL) {",
          "content_same": false
        },
        {
          "line": 7663,
          "old_api": "freeIOJob",
          "new_api": null,
          "old_text": "freeIOJob(j)",
          "new_text": null,
          "old_line_content": "            freeIOJob(j);",
          "new_line_content": "                (unsigned char*) key->ptr,",
          "content_same": false
        },
        {
          "line": 3568,
          "old_api": "addReplyBulkLen",
          "new_api": null,
          "old_text": "addReplyBulkLen(c,o)",
          "new_text": null,
          "old_line_content": "                addReplyBulkLen(c,o);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 3569,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,o)",
          "new_text": null,
          "old_line_content": "                addReply(c,o);",
          "new_line_content": "            if (o->type != REDIS_STRING) {",
          "content_same": false
        },
        {
          "line": 5618,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(vector)",
          "new_text": null,
          "old_line_content": "    zfree(vector);",
          "new_line_content": "    for (j = 0; j < vectorlen; j++) {",
          "content_same": false
        },
        {
          "line": 7666,
          "old_api": "vmCanSwapOut",
          "new_api": null,
          "old_text": "vmCanSwapOut()",
          "new_text": null,
          "old_line_content": "            if (trytoswap && vmCanSwapOut() &&",
          "new_line_content": "            server.vm_stats_swapouts++;",
          "content_same": false
        },
        {
          "line": 7672,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.io_newjobs)",
          "new_text": null,
          "old_line_content": "                    more = listLength(server.io_newjobs) <",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 7674,
          "old_api": "unlockThreadedIO",
          "new_api": null,
          "old_text": "unlockThreadedIO()",
          "new_text": null,
          "old_line_content": "                    unlockThreadedIO();",
          "new_line_content": "                while(more) {",
          "content_same": false
        },
        {
          "line": 3580,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR wrong number of arguments for MSET\\r\\n\")",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(\"-ERR wrong number of arguments for MSET\\r\\n\"));",
          "new_line_content": "static void msetGenericCommand(redisClient *c, int nx) {",
          "content_same": false
        },
        {
          "line": 5628,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(s,\"%lluB\",n)",
          "new_text": null,
          "old_line_content": "        sprintf(s,\"%lluB\",n);",
          "new_line_content": "    double d;",
          "content_same": false
        },
        {
          "line": 3587,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[j])",
          "new_text": null,
          "old_line_content": "            if (lookupKeyWrite(c->db,c->argv[j]) != NULL) {",
          "new_line_content": "    /* Handle the NX flag. The MSETNX semantic is to return zero and don't",
          "content_same": false
        },
        {
          "line": 5635,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(s,\"%.2fM\",d)",
          "new_text": null,
          "old_line_content": "        sprintf(s,\"%.2fM\",d);",
          "new_line_content": "        d = (double)n/(1024);",
          "content_same": false
        },
        {
          "line": 5638,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(s,\"%.2fG\",d)",
          "new_text": null,
          "old_line_content": "        sprintf(s,\"%.2fG\",d);",
          "new_line_content": "        d = (double)n/(1024*1024);",
          "content_same": false
        },
        {
          "line": 7687,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\n            \"WARNING: read(2) error in vmThreadedIOCompletedJob() %s\",\n            strerror(errno))",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,",
          "new_line_content": "        processed++;",
          "content_same": false
        },
        {
          "line": 3593,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c, shared.czero);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 7689,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "            strerror(errno));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7694,
          "old_api": "pthread_mutex_lock",
          "new_api": null,
          "old_text": "pthread_mutex_lock(&server.io_mutex)",
          "new_text": null,
          "old_line_content": "    pthread_mutex_lock(&server.io_mutex);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5647,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    time_t uptime = time(NULL)-server.stat_starttime;",
          "new_line_content": " * by the INFO command itself as we need to report the same information",
          "content_same": false
        },
        {
          "line": 3600,
          "old_api": "tryObjectEncoding",
          "new_api": null,
          "old_text": "tryObjectEncoding(c->argv[j+1])",
          "new_text": null,
          "old_line_content": "        tryObjectEncoding(c->argv[j+1]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3601,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(c->db->dict,c->argv[j],c->argv[j+1])",
          "new_text": null,
          "old_line_content": "        retval = dictAdd(c->db->dict,c->argv[j],c->argv[j+1]);",
          "new_line_content": "    for (j = 1; j < c->argc; j += 2) {",
          "content_same": false
        },
        {
          "line": 3603,
          "old_api": "dictReplace",
          "new_api": null,
          "old_text": "dictReplace(c->db->dict,c->argv[j],c->argv[j+1])",
          "new_text": null,
          "old_line_content": "            dictReplace(c->db->dict,c->argv[j],c->argv[j+1]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5652,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    info = sdscatprintf(sdsempty(),",
          "new_line_content": "    int j;",
          "content_same": false
        },
        {
          "line": 3606,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(c->argv[j])",
          "new_text": null,
          "old_line_content": "            incrRefCount(c->argv[j]);",
          "new_line_content": "        if (retval == DICT_ERR) {",
          "content_same": false
        },
        {
          "line": 3609,
          "old_api": "removeExpire",
          "new_api": null,
          "old_text": "removeExpire(c->db,c->argv[j])",
          "new_text": null,
          "old_line_content": "        removeExpire(c->db,c->argv[j]);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 3612,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, nx ? shared.cone : shared.ok)",
          "new_text": null,
          "old_line_content": "    addReply(c, nx ? shared.cone : shared.ok);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 7711,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(o->storage == REDIS_VM_LOADING || o->storage == REDIS_VM_SWAPPING)",
          "new_text": null,
          "old_line_content": "    assert(o->storage == REDIS_VM_LOADING || o->storage == REDIS_VM_SWAPPING);",
          "new_line_content": "        server.io_processed     /* 2 */",
          "content_same": false
        },
        {
          "line": 7713,
          "old_api": "lockThreadedIO",
          "new_api": null,
          "old_text": "lockThreadedIO()",
          "new_text": null,
          "old_line_content": "    lockThreadedIO();",
          "new_line_content": "    int i;",
          "content_same": false
        },
        {
          "line": 7719,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(lists[i],&li)",
          "new_text": null,
          "old_line_content": "        listRewind(lists[i],&li);",
          "new_line_content": "    for (i = 0; i < 3; i++) {",
          "content_same": false
        },
        {
          "line": 7720,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "        while ((ln = listNext(&li)) != NULL) {",
          "new_line_content": "        listNode *ln;",
          "content_same": false
        },
        {
          "line": 5674,
          "old_api": "aeGetApiName",
          "new_api": null,
          "old_text": "aeGetApiName()",
          "new_text": null,
          "old_line_content": "        aeGetApiName(),",
          "new_line_content": "        \"vm_enabled:%d\\r\\n\"",
          "content_same": false
        },
        {
          "line": 5675,
          "old_api": "getpid",
          "new_api": null,
          "old_text": "getpid()",
          "new_text": null,
          "old_line_content": "        (long) getpid(),",
          "new_line_content": "        \"role:%s\\r\\n\"",
          "content_same": false
        },
        {
          "line": 3628,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "    long long value;",
          "content_same": false
        },
        {
          "line": 7725,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG,\"*** CANCELED %p (%s) (type %d) (LIST ID %d)\\n\",\n                    (void*)job, (char*)o->ptr, job->type, i)",
          "new_text": null,
          "old_line_content": "                redisLog(REDIS_DEBUG,\"*** CANCELED %p (%s) (type %d) (LIST ID %d)\\n\",",
          "new_line_content": "            iojob *job = ln->value;",
          "content_same": false
        },
        {
          "line": 5681,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "        zmalloc_used_memory(),",
          "new_line_content": "        uptime/(3600*24),",
          "content_same": false
        },
        {
          "line": 7730,
          "old_api": "vmMarkPagesFree",
          "new_api": null,
          "old_text": "vmMarkPagesFree(job->page,job->pages)",
          "new_text": null,
          "old_line_content": "                    vmMarkPagesFree(job->page,job->pages);",
          "new_line_content": "                    (void*)job, (char*)o->ptr, job->type, i);",
          "content_same": false
        },
        {
          "line": 3638,
          "old_api": "strtoll",
          "new_api": null,
          "old_text": "strtoll(o->ptr, &eptr, 10)",
          "new_text": null,
          "old_line_content": "                value = strtoll(o->ptr, &eptr, 10);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 7737,
          "old_api": "freeIOJob",
          "new_api": null,
          "old_text": "freeIOJob(job)",
          "new_text": null,
          "old_line_content": "                    freeIOJob(job);",
          "new_line_content": "                switch(i) {",
          "content_same": false
        },
        {
          "line": 7738,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(lists[i],ln)",
          "new_text": null,
          "old_line_content": "                    listDelNode(lists[i],ln);",
          "new_line_content": "                case 0: /* io_newjobs */",
          "content_same": false
        },
        {
          "line": 5693,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n            \"master_host:%s\\r\\n\"\n            \"master_port:%d\\r\\n\"\n            \"master_link_status:%s\\r\\n\"\n            \"master_last_io_seconds_ago:%d\\r\\n\"\n            ,server.masterhost,\n            server.masterport,\n            (server.replstate == REDIS_REPL_CONNECTED) ?\n                \"up\" : \"down\",\n            server.master ? ((int)(time(NULL)-server.master->lastinteraction)) : -1\n        )",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "        server.vm_enabled != 0,",
          "content_same": false
        },
        {
          "line": 3647,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    o = createObject(REDIS_STRING,sdscatprintf(sdsempty(),\"%lld\",value));",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3648,
          "old_api": "tryObjectEncoding",
          "new_api": null,
          "old_text": "tryObjectEncoding(o)",
          "new_text": null,
          "old_line_content": "    tryObjectEncoding(o);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3649,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(c->db->dict,c->argv[1],o)",
          "new_text": null,
          "old_line_content": "    retval = dictAdd(c->db->dict,c->argv[1],o);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3654,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(c->argv[1])",
          "new_text": null,
          "old_line_content": "        incrRefCount(c->argv[1]);",
          "new_line_content": "    if (retval == DICT_ERR) {",
          "content_same": false
        },
        {
          "line": 5702,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "            server.master ? ((int)(time(NULL)-server.master->lastinteraction)) : -1",
          "new_line_content": "            ,server.masterhost,",
          "content_same": false
        },
        {
          "line": 3657,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.colon)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.colon);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 7754,
          "old_api": "unlockThreadedIO",
          "new_api": null,
          "old_text": "unlockThreadedIO()",
          "new_text": null,
          "old_line_content": "                    unlockThreadedIO();",
          "new_line_content": "                     * Better to wait for the job to move into the",
          "content_same": false
        },
        {
          "line": 3659,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.crlf)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.crlf);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5707,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n            \"vm_conf_max_memory:%llu\\r\\n\"\n            \"vm_conf_page_size:%llu\\r\\n\"\n            \"vm_conf_pages:%llu\\r\\n\"\n            \"vm_stats_used_pages:%llu\\r\\n\"\n            \"vm_stats_swapped_objects:%llu\\r\\n\"\n            \"vm_stats_swappin_count:%llu\\r\\n\"\n            \"vm_stats_swappout_count:%llu\\r\\n\"\n            \"vm_stats_io_newjobs_len:%lu\\r\\n\"\n            \"vm_stats_io_processing_len:%lu\\r\\n\"\n            \"vm_stats_io_processed_len:%lu\\r\\n\"\n            \"vm_stats_io_active_threads:%lu\\r\\n\"\n            \"vm_stats_blocked_clients:%lu\\r\\n\"\n            ,(unsigned long long) server.vm_max_memory,\n            (unsigned long long) server.vm_page_size,\n            (unsigned long long) server.vm_pages,\n            (unsigned long long) server.vm_stats_used_pages,\n            (unsigned long long) server.vm_stats_swapped_objects,\n            (unsigned long long) server.vm_stats_swapins,\n            (unsigned long long) server.vm_stats_swapouts,\n            (unsigned long) listLength(server.io_newjobs),\n            (unsigned long) listLength(server.io_processing),\n            (unsigned long) listLength(server.io_processed),\n            (unsigned long) server.io_active_threads,\n            (unsigned long) server.vm_blocked_clients\n        )",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "        );",
          "content_same": false
        },
        {
          "line": 3672,
          "old_api": "incrDecrCommand",
          "new_api": null,
          "old_text": "incrDecrCommand(c,incr)",
          "new_text": null,
          "old_line_content": "    incrDecrCommand(c,incr);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3677,
          "old_api": "incrDecrCommand",
          "new_api": null,
          "old_text": "incrDecrCommand(c,-incr)",
          "new_text": null,
          "old_line_content": "    incrDecrCommand(c,-incr);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 7773,
          "old_api": "unlockThreadedIO",
          "new_api": null,
          "old_text": "unlockThreadedIO()",
          "new_text": null,
          "old_line_content": "                unlockThreadedIO();",
          "new_line_content": "                if (o->storage == REDIS_VM_LOADING)",
          "content_same": false
        },
        {
          "line": 5727,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.io_newjobs)",
          "new_text": null,
          "old_line_content": "            (unsigned long) listLength(server.io_newjobs),",
          "new_line_content": "            (unsigned long long) server.vm_stats_used_pages,",
          "content_same": false
        },
        {
          "line": 5728,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.io_processing)",
          "new_text": null,
          "old_line_content": "            (unsigned long) listLength(server.io_processing),",
          "new_line_content": "            (unsigned long long) server.vm_stats_swapped_objects,",
          "content_same": false
        },
        {
          "line": 5729,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.io_processed)",
          "new_text": null,
          "old_line_content": "            (unsigned long) listLength(server.io_processed),",
          "new_line_content": "            (unsigned long long) server.vm_stats_swapins,",
          "content_same": false
        },
        {
          "line": 7778,
          "old_api": "unlockThreadedIO",
          "new_api": null,
          "old_text": "unlockThreadedIO()",
          "new_text": null,
          "old_line_content": "    unlockThreadedIO();",
          "new_line_content": "                return;",
          "content_same": false
        },
        {
          "line": 7779,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(1 != 1)",
          "new_text": null,
          "old_line_content": "    assert(1 != 1); /* We should never reach this */",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 3686,
          "old_api": "deleteKey",
          "new_api": null,
          "old_text": "deleteKey(c->db,c->argv[j])",
          "new_text": null,
          "old_line_content": "        if (deleteKey(c->db,c->argv[j])) {",
          "new_line_content": "static void delCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 7785,
          "old_api": "REDIS_NOTUSED",
          "new_api": null,
          "old_text": "REDIS_NOTUSED(arg)",
          "new_text": null,
          "old_line_content": "    REDIS_NOTUSED(arg);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5738,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.db[j].dict)",
          "new_text": null,
          "old_line_content": "        keys = dictSize(server.db[j].dict);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5739,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.db[j].expires)",
          "new_text": null,
          "old_line_content": "        vkeys = dictSize(server.db[j].expires);",
          "new_line_content": "    for (j = 0; j < server.dbnum; j++) {",
          "content_same": false
        },
        {
          "line": 7787,
          "old_api": "pthread_self",
          "new_api": null,
          "old_text": "pthread_self()",
          "new_text": null,
          "old_line_content": "    pthread_detach(pthread_self());",
          "new_line_content": "    iojob *j;",
          "content_same": false
        },
        {
          "line": 3693,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5741,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info, \"db%d:keys=%lld,expires=%lld\\r\\n\",\n                j, keys, vkeys)",
          "new_text": null,
          "old_line_content": "            info = sdscatprintf(info, \"db%d:keys=%lld,expires=%lld\\r\\n\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7790,
          "old_api": "lockThreadedIO",
          "new_api": null,
          "old_text": "lockThreadedIO()",
          "new_text": null,
          "old_line_content": "        lockThreadedIO();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3696,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.cone)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.cone);",
          "new_line_content": "    case 0:",
          "content_same": false
        },
        {
          "line": 7793,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG,\"Thread %lld exiting, nothing to do\",\n                (long long) pthread_self())",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_DEBUG,\"Thread %lld exiting, nothing to do\",",
          "new_line_content": "        /* Get a new job to process */",
          "content_same": false
        },
        {
          "line": 3699,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),\":%d\\r\\n\",deleted));",
          "new_line_content": "    case 1:",
          "content_same": false
        },
        {
          "line": 7796,
          "old_api": "unlockThreadedIO",
          "new_api": null,
          "old_text": "unlockThreadedIO()",
          "new_text": null,
          "old_line_content": "            unlockThreadedIO();",
          "new_line_content": "            /* No new jobs in queue, exit. */",
          "content_same": false
        },
        {
          "line": 5749,
          "old_api": "genRedisInfoString",
          "new_api": null,
          "old_text": "genRedisInfoString()",
          "new_text": null,
          "old_line_content": "    sds info = genRedisInfoString();",
          "new_line_content": "    return info;",
          "content_same": false
        },
        {
          "line": 5750,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"$%lu\\r\\n\",",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5751,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(info)",
          "new_text": null,
          "old_line_content": "        (unsigned long)sdslen(info)));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5752,
          "old_api": "addReplySds",
          "new_api": null,
          "old_text": "addReplySds(c,info)",
          "new_text": null,
          "old_line_content": "    addReplySds(c,info);",
          "new_line_content": "static void infoCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 3705,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    addReply(c,lookupKeyRead(c->db,c->argv[1]) ? shared.cone : shared.czero);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7799,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(server.io_newjobs)",
          "new_text": null,
          "old_line_content": "        ln = listFirst(server.io_newjobs);",
          "new_line_content": "            server.io_active_threads--;",
          "content_same": false
        },
        {
          "line": 7801,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(server.io_newjobs,ln)",
          "new_text": null,
          "old_line_content": "        listDelNode(server.io_newjobs,ln);",
          "new_line_content": "            return NULL;",
          "content_same": false
        },
        {
          "line": 7804,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(server.io_processing,j)",
          "new_text": null,
          "old_line_content": "        listAddNodeTail(server.io_processing,j);",
          "new_line_content": "        j = ln->value;",
          "content_same": false
        },
        {
          "line": 7806,
          "old_api": "unlockThreadedIO",
          "new_api": null,
          "old_text": "unlockThreadedIO()",
          "new_text": null,
          "old_line_content": "        unlockThreadedIO();",
          "new_line_content": "        /* Add the job in the processing queue */",
          "content_same": false
        },
        {
          "line": 3711,
          "old_api": "selectDb",
          "new_api": null,
          "old_text": "selectDb(c,id)",
          "new_text": null,
          "old_line_content": "    if (selectDb(c,id) == REDIS_ERR) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3712,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR invalid DB index\\r\\n\")",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(\"-ERR invalid DB index\\r\\n\"));",
          "new_line_content": "static void selectCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 3714,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.ok);",
          "new_line_content": "    ",
          "content_same": false
        },
        {
          "line": 5762,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(server.monitors,c)",
          "new_text": null,
          "old_line_content": "    listAddNodeTail(server.monitors,c);",
          "new_line_content": "    if (c->flags & REDIS_SLAVE) return;",
          "content_same": false
        },
        {
          "line": 5763,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.ok);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7814,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(\"/dev/null\",\"w+\")",
          "new_text": null,
          "old_line_content": "            FILE *fp = fopen(\"/dev/null\",\"w+\");",
          "new_line_content": "        /* Process the Job */",
          "content_same": false
        },
        {
          "line": 7815,
          "old_api": "rdbSavedObjectPages",
          "new_api": null,
          "old_text": "rdbSavedObjectPages(j->val,fp)",
          "new_text": null,
          "old_line_content": "            j->pages = rdbSavedObjectPages(j->val,fp);",
          "new_line_content": "        if (j->type == REDIS_IOJOB_LOAD) {",
          "content_same": false
        },
        {
          "line": 5768,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(db->expires,key)",
          "new_text": null,
          "old_line_content": "    if (dictDelete(db->expires,key) == DICT_OK) {",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3722,
          "old_api": "dictGetRandomKey",
          "new_api": null,
          "old_text": "dictGetRandomKey(c->db->dict)",
          "new_text": null,
          "old_line_content": "        de = dictGetRandomKey(c->db->dict);",
          "new_line_content": "static void randomkeyCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 3723,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "        if (!de || expireIfNeeded(c->db,dictGetEntryKey(de)) == 0) break;",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 7823,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG,\"Thread %lld completed the job: %p (key %s)\",\n            (long long) pthread_self(), (void*)j, (char*)j->key->ptr)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_DEBUG,\"Thread %lld completed the job: %p (key %s)\",",
          "new_line_content": "                j->canceled = 1;",
          "content_same": false
        },
        {
          "line": 5776,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(db->expires,key,(void*)when)",
          "new_text": null,
          "old_line_content": "    if (dictAdd(db->expires,key,(void*)when) == DICT_ERR) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3729,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.plus)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.plus);",
          "new_line_content": "    if (de == NULL) {",
          "content_same": false
        },
        {
          "line": 7824,
          "old_api": "pthread_self",
          "new_api": null,
          "old_text": "pthread_self()",
          "new_text": null,
          "old_line_content": "            (long long) pthread_self(), (void*)j, (char*)j->key->ptr);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5779,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(key)",
          "new_text": null,
          "old_line_content": "        incrRefCount(key);",
          "new_line_content": "static int setExpire(redisDb *db, robj *key, time_t when) {",
          "content_same": false
        },
        {
          "line": 7825,
          "old_api": "lockThreadedIO",
          "new_api": null,
          "old_text": "lockThreadedIO()",
          "new_text": null,
          "old_line_content": "        lockThreadedIO();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7826,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(server.io_processing,ln)",
          "new_text": null,
          "old_line_content": "        listDelNode(server.io_processing,ln);",
          "new_line_content": "        /* Done: insert the job into the processed queue */",
          "content_same": false
        },
        {
          "line": 3739,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(pattern)",
          "new_text": null,
          "old_line_content": "    int plen = sdslen(pattern);",
          "new_line_content": "static void keysCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 3741,
          "old_api": "createObject",
          "new_api": null,
          "old_text": "createObject(REDIS_STRING,NULL)",
          "new_text": null,
          "old_line_content": "    robj *lenobj = createObject(REDIS_STRING,NULL);",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 5790,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(db->expires)",
          "new_text": null,
          "old_line_content": "    if (dictSize(db->expires) == 0 ||",
          "new_line_content": "static time_t getExpire(redisDb *db, robj *key) {",
          "content_same": false
        },
        {
          "line": 5791,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(db->expires,key)",
          "new_text": null,
          "old_line_content": "       (de = dictFind(db->expires,key)) == NULL) return -1;",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 3744,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,lenobj)",
          "new_text": null,
          "old_line_content": "    addReply(c,lenobj);",
          "new_line_content": "    unsigned long numkeys = 0, keyslen = 0;",
          "content_same": false
        },
        {
          "line": 5793,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "    return (time_t) dictGetEntryVal(de);",
          "new_line_content": "    /* No expire? return ASAP */",
          "content_same": false
        },
        {
          "line": 3746,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "    while((de = dictNext(di)) != NULL) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7840,
          "old_api": "sigemptyset",
          "new_api": null,
          "old_text": "sigemptyset(&mask)",
          "new_text": null,
          "old_line_content": "    sigemptyset(&mask);",
          "new_line_content": "static void spawnIOThread(void) {",
          "content_same": false
        },
        {
          "line": 7841,
          "old_api": "sigaddset",
          "new_api": null,
          "old_text": "sigaddset(&mask,SIGCHLD)",
          "new_text": null,
          "old_line_content": "    sigaddset(&mask,SIGCHLD);",
          "new_line_content": "    pthread_t thread;",
          "content_same": false
        },
        {
          "line": 7842,
          "old_api": "sigaddset",
          "new_api": null,
          "old_text": "sigaddset(&mask,SIGHUP)",
          "new_text": null,
          "old_line_content": "    sigaddset(&mask,SIGHUP);",
          "new_line_content": "    sigset_t mask, omask;",
          "content_same": false
        },
        {
          "line": 7843,
          "old_api": "sigaddset",
          "new_api": null,
          "old_text": "sigaddset(&mask,SIGPIPE)",
          "new_text": null,
          "old_line_content": "    sigaddset(&mask,SIGPIPE);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3752,
          "old_api": "expireIfNeeded",
          "new_api": null,
          "old_text": "expireIfNeeded(c->db,keyobj)",
          "new_text": null,
          "old_line_content": "            if (expireIfNeeded(c->db,keyobj) == 0) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5801,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(db->expires)",
          "new_text": null,
          "old_line_content": "    if (dictSize(db->expires) == 0 ||",
          "new_line_content": "    time_t when;",
          "content_same": false
        },
        {
          "line": 3754,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.space)",
          "new_text": null,
          "old_line_content": "                    addReply(c,shared.space);",
          "new_line_content": "        if ((pattern[0] == '*' && pattern[1] == '\\0') ||",
          "content_same": false
        },
        {
          "line": 5802,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(db->expires,key)",
          "new_text": null,
          "old_line_content": "       (de = dictFind(db->expires,key)) == NULL) return 0;",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 3757,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(key)",
          "new_text": null,
          "old_line_content": "                keyslen += sdslen(key);",
          "new_line_content": "                if (numkeys != 0)",
          "content_same": false
        },
        {
          "line": 7856,
          "old_api": "lockThreadedIO",
          "new_api": null,
          "old_text": "lockThreadedIO()",
          "new_text": null,
          "old_line_content": "        lockThreadedIO();",
          "new_line_content": "static void waitEmptyIOJobsQueue(void) {",
          "content_same": false
        },
        {
          "line": 7857,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.io_newjobs)",
          "new_text": null,
          "old_line_content": "        if (listLength(server.io_newjobs) == 0 &&",
          "new_line_content": "    while(1) {",
          "content_same": false
        },
        {
          "line": 3762,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    lenobj->ptr = sdscatprintf(sdsempty(),\"$%lu\\r\\n\",keyslen+(numkeys ? (numkeys-1) : 0));",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 3763,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.crlf)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.crlf);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 7858,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.io_processing)",
          "new_text": null,
          "old_line_content": "            listLength(server.io_processing) == 0 &&",
          "new_line_content": "        int io_processed_len;",
          "content_same": false
        },
        {
          "line": 3768,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(c->db->dict)",
          "new_text": null,
          "old_line_content": "        sdscatprintf(sdsempty(),\":%lu\\r\\n\",dictSize(c->db->dict)));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5817,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(db->expires)",
          "new_text": null,
          "old_line_content": "    if (dictSize(db->expires) == 0 ||",
          "new_line_content": "static int deleteIfVolatile(redisDb *db, robj *key) {",
          "content_same": false
        },
        {
          "line": 5818,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(db->expires,key)",
          "new_text": null,
          "old_line_content": "       (de = dictFind(db->expires,key)) == NULL) return 0;",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 7868,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.io_processed)",
          "new_text": null,
          "old_line_content": "        io_processed_len = listLength(server.io_processed);",
          "new_line_content": "        /* While waiting for empty jobs queue condition we post-process some",
          "content_same": false
        },
        {
          "line": 3773,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        sdscatprintf(sdsempty(),\":%lu\\r\\n\",server.lastsave));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 7869,
          "old_api": "unlockThreadedIO",
          "new_api": null,
          "old_text": "unlockThreadedIO()",
          "new_text": null,
          "old_line_content": "        unlockThreadedIO();",
          "new_line_content": "         * finshed job, as I/O threads may be hanging trying to write against",
          "content_same": false
        },
        {
          "line": 5823,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(db->dict,key)",
          "new_text": null,
          "old_line_content": "    return dictDelete(db->dict,key) == DICT_OK;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7871,
          "old_api": "vmThreadedIOCompletedJob",
          "new_api": null,
          "old_text": "vmThreadedIOCompletedJob(NULL,server.io_ready_pipe_read,NULL,0)",
          "new_text": null,
          "old_line_content": "            vmThreadedIOCompletedJob(NULL,server.io_ready_pipe_read,NULL,0);",
          "new_line_content": "         * it's blocking. */",
          "content_same": false
        },
        {
          "line": 7874,
          "old_api": "usleep",
          "new_api": null,
          "old_text": "usleep(10000)",
          "new_text": null,
          "old_line_content": "            usleep(10000); /* 10 milliseconds */",
          "new_line_content": "        if (io_processed_len) {",
          "content_same": false
        },
        {
          "line": 3780,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    o = lookupKeyRead(c->db,c->argv[1]);",
          "new_line_content": "static void typeCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 5829,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(c->db->dict,key)",
          "new_text": null,
          "old_line_content": "    de = dictFind(c->db->dict,key);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5831,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 7882,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(server.vm_swap_file,\"r+b\")",
          "new_text": null,
          "old_line_content": "    server.vm_fp = fopen(server.vm_swap_file,\"r+b\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5836,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.cone)",
          "new_text": null,
          "old_line_content": "        addReply(c, shared.cone);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 7884,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Can't re-open the VM swap file: %s. Exiting.\",\n            server.vm_swap_file)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Can't re-open the VM swap file: %s. Exiting.\",",
          "new_line_content": "    /* Note: we don't close the old one as we are in the child process",
          "content_same": false
        },
        {
          "line": 3792,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(type)",
          "new_text": null,
          "old_line_content": "    addReplySds(c,sdsnew(type));",
          "new_line_content": "        case REDIS_ZSET: type = \"+zset\"; break;",
          "content_same": false
        },
        {
          "line": 3793,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.crlf)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.crlf);",
          "new_line_content": "        default: type = \"unknown\"; break;",
          "content_same": false
        },
        {
          "line": 5841,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.cone)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.cone);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 7893,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG,\"Queued IO Job %p type %d about key '%s'\\n\",\n        (void*)j, j->type, (char*)j->key->ptr)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_DEBUG,\"Queued IO Job %p type %d about key '%s'\\n\",",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3798,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR background save in progress\\r\\n\")",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(\"-ERR background save in progress\\r\\n\"));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 7895,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(server.io_newjobs,j)",
          "new_text": null,
          "old_line_content": "    listAddNodeTail(server.io_newjobs,j);",
          "new_line_content": "/* This function must be called while with threaded IO locked */",
          "content_same": false
        },
        {
          "line": 3801,
          "old_api": "rdbSave",
          "new_api": null,
          "old_text": "rdbSave(server.dbfilename)",
          "new_text": null,
          "old_line_content": "    if (rdbSave(server.dbfilename) == REDIS_OK) {",
          "new_line_content": "    if (server.bgsavechildpid != -1) {",
          "content_same": false
        },
        {
          "line": 5851,
          "old_api": "strtol",
          "new_api": null,
          "old_text": "strtol(c->argv[2]->ptr,NULL,10)",
          "new_text": null,
          "old_line_content": "    expireGenericCommand(c,c->argv[1],strtol(c->argv[2]->ptr,NULL,10));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3804,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.err)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.err);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7903,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(key->storage == REDIS_VM_MEMORY)",
          "new_text": null,
          "old_line_content": "    assert(key->storage == REDIS_VM_MEMORY);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7904,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(key->refcount == 1)",
          "new_text": null,
          "old_line_content": "    assert(key->refcount == 1);",
          "new_line_content": "static int vmSwapObjectThreaded(robj *key, robj *val, redisDb *db) {",
          "content_same": false
        },
        {
          "line": 3810,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR background save already in progress\\r\\n\")",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(\"-ERR background save already in progress\\r\\n\"));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 7906,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*j))",
          "new_text": null,
          "old_line_content": "    j = zmalloc(sizeof(*j));",
          "new_line_content": "    ",
          "content_same": false
        },
        {
          "line": 3813,
          "old_api": "rdbSaveBackground",
          "new_api": null,
          "old_text": "rdbSaveBackground(server.dbfilename)",
          "new_text": null,
          "old_line_content": "    if (rdbSaveBackground(server.dbfilename) == REDIS_OK) {",
          "new_line_content": "    if (server.bgsavechildpid != -1) {",
          "content_same": false
        },
        {
          "line": 5862,
          "old_api": "getExpire",
          "new_api": null,
          "old_text": "getExpire(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    expire = getExpire(c->db,c->argv[1]);",
          "new_line_content": "static void ttlCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 3815,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(status)",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(status));",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 5864,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "        ttl = (int) (expire-time(NULL));",
          "new_line_content": "    int ttl = -1;",
          "content_same": false
        },
        {
          "line": 7909,
          "old_api": "dupStringObject",
          "new_api": null,
          "old_text": "dupStringObject(key)",
          "new_text": null,
          "old_line_content": "    j->key = dupStringObject(key);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7911,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(val)",
          "new_text": null,
          "old_line_content": "    incrRefCount(val);",
          "new_line_content": "    j->type = REDIS_IOJOB_PREPARE_SWAP;",
          "content_same": false
        },
        {
          "line": 5867,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\":%d\\r\\n\",ttl));",
          "new_line_content": "    if (expire != -1) {",
          "content_same": false
        },
        {
          "line": 7916,
          "old_api": "lockThreadedIO",
          "new_api": null,
          "old_text": "lockThreadedIO()",
          "new_text": null,
          "old_line_content": "    lockThreadedIO();",
          "new_line_content": "    j->canceled = 0;",
          "content_same": false
        },
        {
          "line": 7917,
          "old_api": "queueIOJob",
          "new_api": null,
          "old_text": "queueIOJob(j)",
          "new_text": null,
          "old_line_content": "    queueIOJob(j);",
          "new_line_content": "    j->thread = (pthread_t) -1;",
          "content_same": false
        },
        {
          "line": 3822,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"User requested shutdown, saving DB...\")",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_WARNING,\"User requested shutdown, saving DB...\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7918,
          "old_api": "unlockThreadedIO",
          "new_api": null,
          "old_text": "unlockThreadedIO()",
          "new_text": null,
          "old_line_content": "    unlockThreadedIO();",
          "new_line_content": "    key->storage = REDIS_VM_SWAPPING;",
          "content_same": false
        },
        {
          "line": 3827,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"There is a live saving child. Killing it!\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"There is a live saving child. Killing it!\");",
          "new_line_content": "    /* Kill the saving child if there is a background saving in progress.",
          "content_same": false
        },
        {
          "line": 3828,
          "old_api": "kill",
          "new_api": null,
          "old_text": "kill(server.bgsavechildpid,SIGKILL)",
          "new_text": null,
          "old_line_content": "        kill(server.bgsavechildpid,SIGKILL);",
          "new_line_content": "       We want to avoid race conditions, for instance our saving child may",
          "content_same": false
        },
        {
          "line": 3829,
          "old_api": "rdbRemoveTempFile",
          "new_api": null,
          "old_text": "rdbRemoveTempFile(server.bgsavechildpid)",
          "new_text": null,
          "old_line_content": "        rdbRemoveTempFile(server.bgsavechildpid);",
          "new_line_content": "       overwrite the synchronous saving did by SHUTDOWN. */",
          "content_same": false
        },
        {
          "line": 3834,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(server.vm_swap_file)",
          "new_text": null,
          "old_line_content": "        if (server.vm_enabled) unlink(server.vm_swap_file);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3835,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(0)",
          "new_text": null,
          "old_line_content": "        exit(0);",
          "new_line_content": "    if (server.appendonly) {",
          "content_same": false
        },
        {
          "line": 5887,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(mc->argv[i])",
          "new_text": null,
          "old_line_content": "            decrRefCount(mc->argv[i]);",
          "new_line_content": "        int i;",
          "content_same": false
        },
        {
          "line": 3840,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(server.pidfile)",
          "new_text": null,
          "old_line_content": "                unlink(server.pidfile);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 3841,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,\"%zu bytes used at exit\",zmalloc_used_memory());",
          "new_line_content": "        /* Snapshotting. Perform a SYNC SAVE and exit */",
          "content_same": false
        },
        {
          "line": 5888,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(mc->argv)",
          "new_text": null,
          "old_line_content": "        zfree(mc->argv);",
          "new_line_content": "        multiCmd *mc = c->mstate.commands+j;",
          "content_same": false
        },
        {
          "line": 3843,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(server.vm_swap_file)",
          "new_text": null,
          "old_line_content": "            if (server.vm_enabled) unlink(server.vm_swap_file);",
          "new_line_content": "            if (server.daemonize)",
          "content_same": false
        },
        {
          "line": 5890,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(c->mstate.commands)",
          "new_text": null,
          "old_line_content": "    zfree(c->mstate.commands);",
          "new_line_content": "        for (i = 0; i < mc->argc; i++)",
          "content_same": false
        },
        {
          "line": 7936,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(c->db->dict,key)",
          "new_text": null,
          "old_line_content": "    de = dictFind(c->db->dict,key);",
          "new_line_content": "    list *l;",
          "content_same": false
        },
        {
          "line": 7938,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "    o = dictGetEntryKey(de);",
          "new_line_content": "    /* If the key does not exist or is already in RAM we don't need to",
          "content_same": false
        },
        {
          "line": 7943,
          "old_api": "vmCancelThreadedIOJob",
          "new_api": null,
          "old_text": "vmCancelThreadedIOJob(o)",
          "new_text": null,
          "old_line_content": "        vmCancelThreadedIOJob(o);",
          "new_line_content": "    if (o->storage == REDIS_VM_MEMORY) {",
          "content_same": false
        },
        {
          "line": 3850,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Error trying to save the DB, can't exit\")",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,\"Error trying to save the DB, can't exit\"); ",
          "new_line_content": "            /* Ooops.. error saving! The best we can do is to continue operating.",
          "content_same": false
        },
        {
          "line": 3851,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR can't quit, problems saving the DB\\r\\n\")",
          "new_text": null,
          "old_line_content": "            addReplySds(c,sdsnew(\"-ERR can't quit, problems saving the DB\\r\\n\"));",
          "new_line_content": "             * Note that if there was a background saving process, in the next",
          "content_same": false
        },
        {
          "line": 5898,
          "old_api": "zrealloc",
          "new_api": null,
          "old_text": "zrealloc(c->mstate.commands,\n            sizeof(multiCmd)*(c->mstate.count+1))",
          "new_text": null,
          "old_line_content": "    c->mstate.commands = zrealloc(c->mstate.commands,",
          "new_line_content": "static void queueMultiCommand(redisClient *c, struct redisCommand *cmd) {",
          "content_same": false
        },
        {
          "line": 5903,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(robj*)*c->argc)",
          "new_text": null,
          "old_line_content": "    mc->argv = zmalloc(sizeof(robj*)*c->argc);",
          "new_line_content": "            sizeof(multiCmd)*(c->mstate.count+1));",
          "content_same": false
        },
        {
          "line": 5904,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(mc->argv,c->argv,sizeof(robj*)*c->argc)",
          "new_text": null,
          "old_line_content": "    memcpy(mc->argv,c->argv,sizeof(robj*)*c->argc);",
          "new_line_content": "    mc = c->mstate.commands+c->mstate.count;",
          "content_same": false
        },
        {
          "line": 7951,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(c->io_keys,key)",
          "new_text": null,
          "old_line_content": "    listAddNodeTail(c->io_keys,key);",
          "new_line_content": "    /* OK: the key is either swapped, or being loaded just now. */",
          "content_same": false
        },
        {
          "line": 5906,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(mc->argv[j])",
          "new_text": null,
          "old_line_content": "        incrRefCount(mc->argv[j]);",
          "new_line_content": "    mc->argc = c->argc;",
          "content_same": false
        },
        {
          "line": 7952,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(key)",
          "new_text": null,
          "old_line_content": "    incrRefCount(key);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3860,
          "old_api": "sdscmp",
          "new_api": null,
          "old_text": "sdscmp(c->argv[1]->ptr,c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "    if (sdscmp(c->argv[1]->ptr,c->argv[2]->ptr) == 0) {",
          "new_line_content": "static void renameGenericCommand(redisClient *c, int nx) {",
          "content_same": false
        },
        {
          "line": 3861,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.sameobjecterr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.sameobjecterr);",
          "new_line_content": "    robj *o;",
          "content_same": false
        },
        {
          "line": 5912,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.ok);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 7960,
          "old_api": "listCreate",
          "new_api": null,
          "old_text": "listCreate()",
          "new_text": null,
          "old_line_content": "        l = listCreate();",
          "new_line_content": "    if (de == NULL) {",
          "content_same": false
        },
        {
          "line": 7961,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(c->db->io_keys,key,l)",
          "new_text": null,
          "old_line_content": "        retval = dictAdd(c->db->io_keys,key,l);",
          "new_line_content": "        int retval;",
          "content_same": false
        },
        {
          "line": 3867,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nokeyerr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.nokeyerr);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7962,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(key)",
          "new_text": null,
          "old_line_content": "        incrRefCount(key);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7963,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(retval == DICT_OK)",
          "new_text": null,
          "old_line_content": "        assert(retval == DICT_OK);",
          "new_line_content": "        /* For every key we take a list of clients blocked for it */",
          "content_same": false
        },
        {
          "line": 3870,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(o)",
          "new_text": null,
          "old_line_content": "    incrRefCount(o);",
          "new_line_content": "    if (o == NULL) {",
          "content_same": false
        },
        {
          "line": 3872,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(c->db->dict,c->argv[2],o)",
          "new_text": null,
          "old_line_content": "    if (dictAdd(c->db->dict,c->argv[2],o) == DICT_ERR) {",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 5921,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR EXEC without MULTI\\r\\n\")",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(\"-ERR EXEC without MULTI\\r\\n\"));",
          "new_line_content": "    robj **orig_argv;",
          "content_same": false
        },
        {
          "line": 7974,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*j))",
          "new_text": null,
          "old_line_content": "        j = zmalloc(sizeof(*j));",
          "new_line_content": "    if (o->storage == REDIS_VM_SWAPPED) {",
          "content_same": false
        },
        {
          "line": 5927,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",c->mstate.count));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3880,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(c->argv[2])",
          "new_text": null,
          "old_line_content": "        incrRefCount(c->argv[2]);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 7977,
          "old_api": "dupStringObject",
          "new_api": null,
          "old_text": "dupStringObject(key)",
          "new_text": null,
          "old_line_content": "        j->key = dupStringObject(key);",
          "new_line_content": "        o->storage = REDIS_VM_LOADING;",
          "content_same": false
        },
        {
          "line": 7983,
          "old_api": "lockThreadedIO",
          "new_api": null,
          "old_text": "lockThreadedIO()",
          "new_text": null,
          "old_line_content": "        lockThreadedIO();",
          "new_line_content": "        j->page = o->vm.page;",
          "content_same": false
        },
        {
          "line": 5936,
          "old_api": "initClientMultiState",
          "new_api": null,
          "old_text": "initClientMultiState(c)",
          "new_text": null,
          "old_line_content": "    initClientMultiState(c);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7984,
          "old_api": "queueIOJob",
          "new_api": null,
          "old_text": "queueIOJob(j)",
          "new_text": null,
          "old_line_content": "        queueIOJob(j);",
          "new_line_content": "        j->val = NULL;",
          "content_same": false
        },
        {
          "line": 7985,
          "old_api": "unlockThreadedIO",
          "new_api": null,
          "old_text": "unlockThreadedIO()",
          "new_text": null,
          "old_line_content": "        unlockThreadedIO();",
          "new_line_content": "        j->canceled = 0;",
          "content_same": false
        },
        {
          "line": 3903,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "    if (selectDb(c,atoi(c->argv[2]->ptr)) == REDIS_ERR) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3904,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.outofrangeerr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.outofrangeerr);",
          "new_line_content": "    /* Obtain source and target DB pointers */",
          "content_same": false
        },
        {
          "line": 8002,
          "old_api": "waitForSwappedKey",
          "new_api": null,
          "old_text": "waitForSwappedKey(c,c->argv[1])",
          "new_text": null,
          "old_line_content": "        waitForSwappedKey(c,c->argv[1]);",
          "new_line_content": " * Return 1 if the client is marked as blocked, 0 if the client can",
          "content_same": false
        },
        {
          "line": 8005,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(c->io_keys)",
          "new_text": null,
          "old_line_content": "    if (listLength(c->io_keys)) {",
          "new_line_content": "    if (cmd->proc == getCommand) {",
          "content_same": false
        },
        {
          "line": 8007,
          "old_api": "aeDeleteFileEvent",
          "new_api": null,
          "old_text": "aeDeleteFileEvent(server.el,c->fd,AE_READABLE)",
          "new_text": null,
          "old_line_content": "        aeDeleteFileEvent(server.el,c->fd,AE_READABLE);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3913,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.sameobjecterr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.sameobjecterr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3918,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 3920,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3925,
          "old_api": "deleteIfVolatile",
          "new_api": null,
          "old_text": "deleteIfVolatile(dst,c->argv[1])",
          "new_text": null,
          "old_line_content": "    deleteIfVolatile(dst,c->argv[1]);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 3926,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(dst->dict,c->argv[1],o)",
          "new_text": null,
          "old_line_content": "    if (dictAdd(dst->dict,c->argv[1],o) == DICT_ERR) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3927,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5978,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(robj*)*numkeys)",
          "new_text": null,
          "old_line_content": "    c->blockingkeys = zmalloc(sizeof(robj*)*numkeys);",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 8026,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(c->io_keys,&li)",
          "new_text": null,
          "old_line_content": "    listRewind(c->io_keys,&li);",
          "new_line_content": "    listIter li;",
          "content_same": false
        },
        {
          "line": 8027,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "    while ((ln = listNext(&li)) != NULL) {",
          "new_line_content": "    struct dictEntry *de;",
          "content_same": false
        },
        {
          "line": 8028,
          "old_api": "compareStringObjects",
          "new_api": null,
          "old_text": "compareStringObjects(ln->value,key)",
          "new_text": null,
          "old_line_content": "        if (compareStringObjects(ln->value,key) == 0) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8029,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(c->io_keys,ln)",
          "new_text": null,
          "old_line_content": "            listDelNode(c->io_keys,ln);",
          "new_line_content": "    /* Remove the key from the list of keys this client is waiting for. */",
          "content_same": false
        },
        {
          "line": 3936,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.cone)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.cone);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5984,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(keys[j])",
          "new_text": null,
          "old_line_content": "        incrRefCount(keys[j]);",
          "new_line_content": "    c->blockingto = timeout;",
          "content_same": false
        },
        {
          "line": 5987,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(c->db->blockingkeys,keys[j])",
          "new_text": null,
          "old_line_content": "        de = dictFind(c->db->blockingkeys,keys[j]);",
          "new_line_content": "        c->blockingkeys[j] = keys[j];",
          "content_same": false
        },
        {
          "line": 8036,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(c->db->io_keys,key)",
          "new_text": null,
          "old_line_content": "    de = dictFind(c->db->io_keys,key);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 8038,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "    l = dictGetEntryVal(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8039,
          "old_api": "listSearchKey",
          "new_api": null,
          "old_text": "listSearchKey(l,c)",
          "new_text": null,
          "old_line_content": "    ln = listSearchKey(l,c);",
          "new_line_content": "    /* Remove the client form the key => waiting clients map. */",
          "content_same": false
        },
        {
          "line": 3944,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    lobj = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "static void pushGenericCommand(redisClient *c, int where) {",
          "content_same": false
        },
        {
          "line": 5992,
          "old_api": "listCreate",
          "new_api": null,
          "old_text": "listCreate()",
          "new_text": null,
          "old_line_content": "            l = listCreate();",
          "new_line_content": "        if (de == NULL) {",
          "content_same": false
        },
        {
          "line": 3946,
          "old_api": "handleClientsWaitingListPush",
          "new_api": null,
          "old_text": "handleClientsWaitingListPush(c,c->argv[1],c->argv[2])",
          "new_text": null,
          "old_line_content": "        if (handleClientsWaitingListPush(c,c->argv[1],c->argv[2])) {",
          "new_line_content": "    list *list;",
          "content_same": false
        },
        {
          "line": 3947,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.ok);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5993,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(c->db->blockingkeys,keys[j],l)",
          "new_text": null,
          "old_line_content": "            retval = dictAdd(c->db->blockingkeys,keys[j],l);",
          "new_line_content": "            int retval;",
          "content_same": false
        },
        {
          "line": 5994,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(keys[j])",
          "new_text": null,
          "old_line_content": "            incrRefCount(keys[j]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5995,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(retval == DICT_OK)",
          "new_text": null,
          "old_line_content": "            assert(retval == DICT_OK);",
          "new_line_content": "            /* For every key we take a list of clients blocked for it */",
          "content_same": false
        },
        {
          "line": 3953,
          "old_api": "listAddNodeHead",
          "new_api": null,
          "old_text": "listAddNodeHead(list,c->argv[2])",
          "new_text": null,
          "old_line_content": "            listAddNodeHead(list,c->argv[2]);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3955,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(list,c->argv[2])",
          "new_text": null,
          "old_line_content": "            listAddNodeTail(list,c->argv[2]);",
          "new_line_content": "        list = lobj->ptr;",
          "content_same": false
        },
        {
          "line": 3958,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(c->argv[1])",
          "new_text": null,
          "old_line_content": "        incrRefCount(c->argv[1]);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 8054,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(db->io_keys,key)",
          "new_text": null,
          "old_line_content": "    de = dictFind(db->io_keys,key);",
          "new_line_content": "    list *l;",
          "content_same": false
        },
        {
          "line": 8057,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "    l = dictGetEntryVal(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3965,
          "old_api": "handleClientsWaitingListPush",
          "new_api": null,
          "old_text": "handleClientsWaitingListPush(c,c->argv[1],c->argv[2])",
          "new_text": null,
          "old_line_content": "        if (handleClientsWaitingListPush(c,c->argv[1],c->argv[2])) {",
          "new_line_content": "        if (lobj->type != REDIS_LIST) {",
          "content_same": false
        },
        {
          "line": 6013,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(c->blockingkeys != NULL)",
          "new_text": null,
          "old_line_content": "    assert(c->blockingkeys != NULL);",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 8065,
          "old_api": "dontWaitForSwappedKey",
          "new_api": null,
          "old_text": "dontWaitForSwappedKey(c,key)",
          "new_text": null,
          "old_line_content": "        if (dontWaitForSwappedKey(c,key)) {",
          "new_line_content": "    while (len--) {",
          "content_same": false
        },
        {
          "line": 6018,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(de != NULL)",
          "new_text": null,
          "old_line_content": "        assert(de != NULL);",
          "new_line_content": "    /* The client may wait for multiple keys, so unblock it for every key. */",
          "content_same": false
        },
        {
          "line": 3971,
          "old_api": "listAddNodeHead",
          "new_api": null,
          "old_text": "listAddNodeHead(list,c->argv[2])",
          "new_text": null,
          "old_line_content": "            listAddNodeHead(list,c->argv[2]);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 6019,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "        l = dictGetEntryVal(de);",
          "new_line_content": "    for (j = 0; j < c->blockingkeysnum; j++) {",
          "content_same": false
        },
        {
          "line": 3973,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(list,c->argv[2])",
          "new_text": null,
          "old_line_content": "            listAddNodeTail(list,c->argv[2]);",
          "new_line_content": "        list = lobj->ptr;",
          "content_same": false
        },
        {
          "line": 6020,
          "old_api": "listSearchKey",
          "new_api": null,
          "old_text": "listSearchKey(l,c)",
          "new_text": null,
          "old_line_content": "        listDelNode(l,listSearchKey(l,c));",
          "new_line_content": "        /* Remove this client from the list of clients waiting for this key. */",
          "content_same": false
        },
        {
          "line": 8068,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(server.io_ready_clients,c)",
          "new_text": null,
          "old_line_content": "            listAddNodeTail(server.io_ready_clients,c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3978,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.ok);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 8076,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr,\"segfault\")",
          "new_text": null,
          "old_line_content": "    if (!strcasecmp(c->argv[1]->ptr,\"segfault\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8078,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr,\"reload\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"reload\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8079,
          "old_api": "rdbSave",
          "new_api": null,
          "old_text": "rdbSave(server.dbfilename)",
          "new_text": null,
          "old_line_content": "        if (rdbSave(server.dbfilename) != REDIS_OK) {",
          "new_line_content": "static void debugCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 6037,
          "old_api": "aeCreateFileEvent",
          "new_api": null,
          "old_text": "aeCreateFileEvent(server.el, c->fd, AE_READABLE, readQueryFromClient, c)",
          "new_text": null,
          "old_line_content": "    aeCreateFileEvent(server.el, c->fd, AE_READABLE, readQueryFromClient, c);",
          "new_line_content": "     * called from freeClient() itself, and the only thing we can do",
          "content_same": false
        },
        {
          "line": 8085,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.err)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.err);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 3993,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    o = lookupKeyRead(c->db,c->argv[1]);",
          "new_line_content": "static void llenCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 8090,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr,\"loadaof\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"loadaof\")) {",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 3995,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "    list *l;",
          "content_same": false
        },
        {
          "line": 6043,
          "old_api": "processInputBuffer",
          "new_api": null,
          "old_text": "processInputBuffer(c)",
          "new_text": null,
          "old_line_content": "    if (c->querybuf && sdslen(c->querybuf) > 0) processInputBuffer(c);",
          "new_line_content": "     * in the input buffer. Note that this is safe even if",
          "content_same": false
        },
        {
          "line": 8091,
          "old_api": "emptyDb",
          "new_api": null,
          "old_text": "emptyDb()",
          "new_text": null,
          "old_line_content": "        emptyDb();",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4002,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(l)",
          "new_text": null,
          "old_line_content": "            addReplySds(c,sdscatprintf(sdsempty(),\":%d\\r\\n\",listLength(l)));",
          "new_line_content": "        if (o->type != REDIS_LIST) {",
          "content_same": false
        },
        {
          "line": 8098,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr,\"object\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"object\") && c->argc == 3) {",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 8099,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(c->db->dict,c->argv[2])",
          "new_text": null,
          "old_line_content": "        dictEntry *de = dictFind(c->db->dict,c->argv[2]);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4009,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "    int index = atoi(c->argv[2]->ptr);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 8106,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "        key = dictGetEntryKey(de);",
          "new_line_content": "        if (!de) {",
          "content_same": false
        },
        {
          "line": 4011,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    o = lookupKeyRead(c->db,c->argv[1]);",
          "new_line_content": "static void lindexCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 6062,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(c->db->blockingkeys,key)",
          "new_text": null,
          "old_line_content": "    de = dictFind(c->db->blockingkeys,key);",
          "new_line_content": "    redisClient *receiver;",
          "content_same": false
        },
        {
          "line": 4016,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "    if (o == NULL) {",
          "content_same": false
        },
        {
          "line": 6064,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "    l = dictGetEntryVal(de);",
          "new_line_content": "    listNode *ln;",
          "content_same": false
        },
        {
          "line": 6065,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(l)",
          "new_text": null,
          "old_line_content": "    ln = listFirst(l);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8116,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "            addReplySds(c,sdscatprintf(sdsempty(),",
          "new_line_content": "                \"encoding:%d serializedlength:%lld\\r\\n\",",
          "content_same": false
        },
        {
          "line": 4021,
          "old_api": "listIndex",
          "new_api": null,
          "old_text": "listIndex(list, index)",
          "new_text": null,
          "old_line_content": "            ln = listIndex(list, index);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 4023,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "                addReply(c,shared.nullbulk);",
          "new_line_content": "            listNode *ln;",
          "content_same": false
        },
        {
          "line": 6071,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(receiver,key)",
          "new_text": null,
          "old_line_content": "    addReply(receiver,key);",
          "new_line_content": "    receiver = ln->value;",
          "content_same": false
        },
        {
          "line": 6072,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(receiver,shared.crlf)",
          "new_text": null,
          "old_line_content": "    addReply(receiver,shared.crlf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4026,
          "old_api": "addReplyBulkLen",
          "new_api": null,
          "old_text": "addReplyBulkLen(c,ele)",
          "new_text": null,
          "old_line_content": "                addReplyBulkLen(c,ele);",
          "new_line_content": "            if (ln == NULL) {",
          "content_same": false
        },
        {
          "line": 8122,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr,\"swapout\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"swapout\") && c->argc == 3) {",
          "new_line_content": "                \"using %llu pages\\r\\n\",",
          "content_same": false
        },
        {
          "line": 4028,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.crlf)",
          "new_text": null,
          "old_line_content": "                addReply(c,shared.crlf);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 8123,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(c->db->dict,c->argv[2])",
          "new_text": null,
          "old_line_content": "        dictEntry *de = dictFind(c->db->dict,c->argv[2]);",
          "new_line_content": "                (void*)key, key->refcount, (unsigned long long) key->vm.page,",
          "content_same": false
        },
        {
          "line": 4036,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "    int index = atoi(c->argv[2]->ptr);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4038,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "static void lsetCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 6087,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[j])",
          "new_text": null,
          "old_line_content": "        o = lookupKeyWrite(c->db,c->argv[j]);",
          "new_line_content": "    time_t timeout;",
          "content_same": false
        },
        {
          "line": 8134,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "        key = dictGetEntryKey(de);",
          "new_line_content": "        if (!de) {",
          "content_same": false
        },
        {
          "line": 6090,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "                addReply(c,shared.wrongtypeerr);",
          "new_line_content": "    for (j = 1; j < c->argc-1; j++) {",
          "content_same": false
        },
        {
          "line": 4043,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "    if (o == NULL) {",
          "content_same": false
        },
        {
          "line": 8140,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "            key = dictGetEntryKey(de) = newkey;",
          "new_line_content": "        /* If the key is shared we want to create a copy */",
          "content_same": false
        },
        {
          "line": 4048,
          "old_api": "listIndex",
          "new_api": null,
          "old_text": "listIndex(list, index)",
          "new_text": null,
          "old_line_content": "            ln = listIndex(list, index);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 8145,
          "old_api": "vmSwapObjectBlocking",
          "new_api": null,
          "old_text": "vmSwapObjectBlocking(key,val)",
          "new_text": null,
          "old_line_content": "        } else if (vmSwapObjectBlocking(key,val) == REDIS_OK) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4050,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.outofrangeerr)",
          "new_text": null,
          "old_line_content": "                addReply(c,shared.outofrangeerr);",
          "new_line_content": "            listNode *ln;",
          "content_same": false
        },
        {
          "line": 8146,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "            dictGetEntryVal(de) = NULL;",
          "new_line_content": "        /* Swap it */",
          "content_same": false
        },
        {
          "line": 8147,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.ok);",
          "new_line_content": "        if (key->storage != REDIS_VM_MEMORY) {",
          "content_same": false
        },
        {
          "line": 4055,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(ln)",
          "new_text": null,
          "old_line_content": "                listNodeValue(ln) = c->argv[3];",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 8152,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\n            \"-ERR Syntax error, try DEBUG [SEGFAULT|OBJECT <key>|SWAPOUT <key>|RELOAD]\\r\\n\")",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 4057,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "                addReply(c,shared.ok);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8158,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"=== ASSERTION FAILED ===\")",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_WARNING,\"=== ASSERTION FAILED ===\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 8159,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"==> %s:%d '%s' is not true\\n\",file,line,estr)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_WARNING,\"==> %s:%d '%s' is not true\\n\",file,line,estr);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6113,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"*2\\r\\n\")",
          "new_text": null,
          "old_line_content": "                    addReplySds(c,sdsnew(\"*2\\r\\n\"));",
          "new_line_content": "                     * the multi bulk reply header and the key name. The",
          "content_same": false
        },
        {
          "line": 6114,
          "old_api": "addReplyBulkLen",
          "new_api": null,
          "old_text": "addReplyBulkLen(c,argv[1])",
          "new_text": null,
          "old_line_content": "                    addReplyBulkLen(c,argv[1]);",
          "new_line_content": "                     * \"real\" command will add the last element (the value)",
          "content_same": false
        },
        {
          "line": 4067,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6115,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,argv[1])",
          "new_text": null,
          "old_line_content": "                    addReply(c,argv[1]);",
          "new_line_content": "                     * for us. If this souds like an hack to you it's just",
          "content_same": false
        },
        {
          "line": 4069,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.nullbulk);",
          "new_line_content": "    robj *o;",
          "content_same": false
        },
        {
          "line": 6116,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.crlf)",
          "new_text": null,
          "old_line_content": "                    addReply(c,shared.crlf);",
          "new_line_content": "                     * because it is... */",
          "content_same": false
        },
        {
          "line": 8161,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"(forcing SIGSEGV in order to print the stack trace)\")",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_WARNING,\"(forcing SIGSEGV in order to print the stack trace)\");",
          "new_line_content": "static void _redisAssert(char *estr, char *file, int line) {",
          "content_same": false
        },
        {
          "line": 4072,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "    if (o == NULL) {",
          "content_same": false
        },
        {
          "line": 8170,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(\"/proc/sys/vm/overcommit_memory\",\"r\")",
          "new_text": null,
          "old_line_content": "    FILE *fp = fopen(\"/proc/sys/vm/overcommit_memory\",\"r\");",
          "new_line_content": "/* =================================== Main! ================================ */",
          "content_same": false
        },
        {
          "line": 4078,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(list)",
          "new_text": null,
          "old_line_content": "                ln = listFirst(list);",
          "new_line_content": "            list *list = o->ptr;",
          "content_same": false
        },
        {
          "line": 8175,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "        fclose(fp);",
          "new_line_content": "    char buf[64];",
          "content_same": false
        },
        {
          "line": 4080,
          "old_api": "listLast",
          "new_api": null,
          "old_text": "listLast(list)",
          "new_text": null,
          "old_line_content": "                ln = listLast(list);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6128,
          "old_api": "strtol",
          "new_api": null,
          "old_text": "strtol(c->argv[c->argc-1]->ptr,NULL,10)",
          "new_text": null,
          "old_line_content": "    timeout = strtol(c->argv[c->argc-1]->ptr,NULL,10);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 6129,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    if (timeout > 0) timeout += time(NULL);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4083,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "                addReply(c,shared.nullbulk);",
          "new_line_content": "            else",
          "content_same": false
        },
        {
          "line": 6130,
          "old_api": "blockForKeys",
          "new_api": null,
          "old_text": "blockForKeys(c,c->argv+1,c->argc-2,timeout)",
          "new_text": null,
          "old_line_content": "    blockForKeys(c,c->argv+1,c->argc-2,timeout);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4085,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(ln)",
          "new_text": null,
          "old_line_content": "                robj *ele = listNodeValue(ln);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4086,
          "old_api": "addReplyBulkLen",
          "new_api": null,
          "old_text": "addReplyBulkLen(c,ele)",
          "new_text": null,
          "old_line_content": "                addReplyBulkLen(c,ele);",
          "new_line_content": "            if (ln == NULL) {",
          "content_same": false
        },
        {
          "line": 8180,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(buf)",
          "new_text": null,
          "old_line_content": "    return atoi(buf);",
          "new_line_content": "        return -1;",
          "content_same": false
        },
        {
          "line": 4088,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.crlf)",
          "new_text": null,
          "old_line_content": "                addReply(c,shared.crlf);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 8185,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"WARNING overcommit_memory is set to 0! Background save may fail under low condition memory. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"WARNING overcommit_memory is set to 0! Background save may fail under low condition memory. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\");",
          "new_line_content": "}",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 397,
      "total_additions": 982,
      "total_deletions": 981,
      "total_api_changes": 2360
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 4,
        "api_related_lines": 2360,
        "non_api_lines": 3,
        "non_api_line_numbers": [
          3338,
          3339,
          3340
        ]
      }
    },
    "api_calls_before": 2405,
    "api_calls_after": 2406,
    "diff_info": {
      "added_lines": 4,
      "removed_lines": 0,
      "total_diff_lines": 16
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/227b4293647d51244771d16f0ad14bc94a2b3ad9",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/227b4293647d51244771d16f0ad14bc94a2b3ad9/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/227b4293647d51244771d16f0ad14bc94a2b3ad9/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/227b4293647d51244771d16f0ad14bc94a2b3ad9/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 269,
          "old_api": "sdscatlen",
          "new_api": "sdsempty",
          "old_text": "sdscatlen(c->obuf,cmd,len)",
          "new_text": "sdsempty()",
          "old_line_content": "        c->obuf = sdscatlen(c->obuf,cmd,len);",
          "new_line_content": "    c->obuf = sdsempty();",
          "content_same": false
        },
        {
          "line": 323,
          "old_api": "qsort",
          "new_api": "printf",
          "old_text": "qsort(config.latency,config.requests,sizeof(long long),compareLatency)",
          "new_text": "printf(\"\\n\")",
          "old_line_content": "        qsort(config.latency,config.requests,sizeof(long long),compareLatency);",
          "new_line_content": "        printf(\"\\n\");",
          "content_same": false
        },
        {
          "line": 349,
          "old_api": "mstime",
          "new_api": "createMissingClients",
          "old_text": "mstime()",
          "new_text": "createMissingClients(c)",
          "old_line_content": "    config.start = mstime();",
          "new_line_content": "    createMissingClients(c);",
          "content_same": false
        },
        {
          "line": 353,
          "old_api": "showLatencyReport",
          "new_api": "mstime",
          "old_text": "showLatencyReport()",
          "new_text": "mstime()",
          "old_line_content": "    showLatencyReport();",
          "new_line_content": "    config.totlatency = mstime()-config.start;",
          "content_same": false
        },
        {
          "line": 368,
          "old_api": "atoi",
          "new_api": "strcmp",
          "old_text": "atoi(argv[++i])",
          "new_text": "strcmp(argv[i],\"-c\")",
          "old_line_content": "            config.numclients = atoi(argv[++i]);",
          "new_line_content": "        if (!strcmp(argv[i],\"-c\")) {",
          "content_same": false
        },
        {
          "line": 371,
          "old_api": "atoi",
          "new_api": "strcmp",
          "old_text": "atoi(argv[++i])",
          "new_text": "strcmp(argv[i],\"-n\")",
          "old_line_content": "            config.requests = atoi(argv[++i]);",
          "new_line_content": "        } else if (!strcmp(argv[i],\"-n\")) {",
          "content_same": false
        },
        {
          "line": 374,
          "old_api": "atoi",
          "new_api": "strcmp",
          "old_text": "atoi(argv[++i])",
          "new_text": "strcmp(argv[i],\"-k\")",
          "old_line_content": "            config.keepalive = atoi(argv[++i]);",
          "new_line_content": "        } else if (!strcmp(argv[i],\"-k\")) {",
          "content_same": false
        },
        {
          "line": 377,
          "old_api": "strdup",
          "new_api": "strcmp",
          "old_text": "strdup(argv[++i])",
          "new_text": "strcmp(argv[i],\"-h\")",
          "old_line_content": "            config.hostip = strdup(argv[++i]);",
          "new_line_content": "        } else if (!strcmp(argv[i],\"-h\")) {",
          "content_same": false
        },
        {
          "line": 380,
          "old_api": "atoi",
          "new_api": "strcmp",
          "old_text": "atoi(argv[++i])",
          "new_text": "strcmp(argv[i],\"-p\")",
          "old_line_content": "            config.hostport = atoi(argv[++i]);",
          "new_line_content": "        } else if (!strcmp(argv[i],\"-p\")) {",
          "content_same": false
        },
        {
          "line": 383,
          "old_api": "strdup",
          "new_api": "strcmp",
          "old_text": "strdup(argv[++i])",
          "new_text": "strcmp(argv[i],\"-s\")",
          "old_line_content": "            config.hostsocket = strdup(argv[++i]);",
          "new_line_content": "        } else if (!strcmp(argv[i],\"-s\")) {",
          "content_same": false
        },
        {
          "line": 386,
          "old_api": "atoi",
          "new_api": "strcmp",
          "old_text": "atoi(argv[++i])",
          "new_text": "strcmp(argv[i],\"-d\")",
          "old_line_content": "            config.datasize = atoi(argv[++i]);",
          "new_line_content": "        } else if (!strcmp(argv[i],\"-d\")) {",
          "content_same": false
        },
        {
          "line": 391,
          "old_api": "atoi",
          "new_api": "strcmp",
          "old_text": "atoi(argv[++i])",
          "new_text": "strcmp(argv[i],\"-P\")",
          "old_line_content": "            config.pipeline = atoi(argv[++i]);",
          "new_line_content": "        } else if (!strcmp(argv[i],\"-P\")) {",
          "content_same": false
        },
        {
          "line": 393,
          "old_api": "strcmp",
          "new_api": "atoi",
          "old_text": "strcmp(argv[i],\"-r\")",
          "new_text": "atoi(argv[++i])",
          "old_line_content": "        } else if (!strcmp(argv[i],\"-r\")) {",
          "new_line_content": "            config.pipeline = atoi(argv[++i]);",
          "content_same": false
        },
        {
          "line": 416,
          "old_api": "sdscat",
          "new_api": "sdsnew",
          "old_text": "sdscat(config.tests,\",\")",
          "new_text": "sdsnew(\",\")",
          "old_line_content": "            config.tests = sdscat(config.tests,\",\");",
          "new_line_content": "            config.tests = sdsnew(\",\");",
          "content_same": false
        },
        {
          "line": 417,
          "old_api": "sdstolower",
          "new_api": "sdscat",
          "old_text": "sdstolower(config.tests)",
          "new_text": "sdscat(config.tests,(char*)argv[++i])",
          "old_line_content": "            sdstolower(config.tests);",
          "new_line_content": "            config.tests = sdscat(config.tests,(char*)argv[++i]);",
          "content_same": false
        },
        {
          "line": 418,
          "old_api": "strcmp",
          "new_api": "sdscat",
          "old_text": "strcmp(argv[i],\"--help\")",
          "new_text": "sdscat(config.tests,\",\")",
          "old_line_content": "        } else if (!strcmp(argv[i],\"--help\")) {",
          "new_line_content": "            config.tests = sdscat(config.tests,\",\");",
          "content_same": false
        },
        {
          "line": 482,
          "old_api": "printf",
          "new_api": "mstime",
          "old_text": "printf(\"%s: %.2f\\r\", config.title, rps)",
          "new_text": "mstime()",
          "old_line_content": "    printf(\"%s: %.2f\\r\", config.title, rps);",
          "new_line_content": "    float dt = (float)(mstime()-config.start)/1000.0;",
          "content_same": false
        },
        {
          "line": 545,
          "old_api": "createMissingClients",
          "new_api": "printf",
          "old_text": "createMissingClients(c)",
          "new_text": "printf(\"Creating %d idle connections and waiting forever (Ctrl+C when done)\\n\", config.numclients)",
          "old_line_content": "        createMissingClients(c);",
          "new_line_content": "        printf(\"Creating %d idle connections and waiting forever (Ctrl+C when done)\\n\", config.numclients);",
          "content_same": false
        },
        {
          "line": 546,
          "old_api": "aeMain",
          "new_api": "createClient",
          "old_text": "aeMain(config.el)",
          "new_text": "createClient(\"\",0)",
          "old_line_content": "        aeMain(config.el);",
          "new_line_content": "        c = createClient(\"\",0); /* will never receive a reply */",
          "content_same": false
        },
        {
          "line": 554,
          "old_api": "sdscatlen",
          "new_api": "sdsnew",
          "old_text": "sdscatlen(title, \" \", 1)",
          "new_text": "sdsnew(argv[0])",
          "old_line_content": "            title = sdscatlen(title, \" \", 1);",
          "new_line_content": "        sds title = sdsnew(argv[0]);",
          "content_same": false
        },
        {
          "line": 561,
          "old_api": "free",
          "new_api": "redisFormatCommandArgv",
          "old_text": "free(cmd)",
          "new_text": "redisFormatCommandArgv(&cmd,argc,argv,NULL)",
          "old_line_content": "            free(cmd);",
          "new_line_content": "            len = redisFormatCommandArgv(&cmd,argc,argv,NULL);",
          "content_same": false
        },
        {
          "line": 576,
          "old_api": "test_is_selected",
          "new_api": "benchmark",
          "old_text": "test_is_selected(\"ping\")",
          "new_text": "benchmark(\"PING_INLINE\",\"PING\\r\\n\",6)",
          "old_line_content": "        if (test_is_selected(\"ping_mbulk\") || test_is_selected(\"ping\")) {",
          "new_line_content": "            benchmark(\"PING_INLINE\",\"PING\\r\\n\",6);",
          "content_same": false
        },
        {
          "line": 578,
          "old_api": "benchmark",
          "new_api": "test_is_selected",
          "old_text": "benchmark(\"PING_BULK\",cmd,len)",
          "new_text": "test_is_selected(\"ping\")",
          "old_line_content": "            benchmark(\"PING_BULK\",cmd,len);",
          "new_line_content": "        if (test_is_selected(\"ping_mbulk\") || test_is_selected(\"ping\")) {",
          "content_same": false
        },
        {
          "line": 579,
          "old_api": "free",
          "new_api": "redisFormatCommand",
          "old_text": "free(cmd)",
          "new_text": "redisFormatCommand(&cmd,\"PING\")",
          "old_line_content": "            free(cmd);",
          "new_line_content": "            len = redisFormatCommand(&cmd,\"PING\");",
          "content_same": false
        },
        {
          "line": 584,
          "old_api": "benchmark",
          "new_api": "test_is_selected",
          "old_text": "benchmark(\"SET\",cmd,len)",
          "new_text": "test_is_selected(\"set\")",
          "old_line_content": "            benchmark(\"SET\",cmd,len);",
          "new_line_content": "        if (test_is_selected(\"set\")) {",
          "content_same": false
        },
        {
          "line": 585,
          "old_api": "free",
          "new_api": "redisFormatCommand",
          "old_text": "free(cmd)",
          "new_text": "redisFormatCommand(&cmd,\"SET foo:rand:000000000000 %s\",data)",
          "old_line_content": "            free(cmd);",
          "new_line_content": "            len = redisFormatCommand(&cmd,\"SET foo:rand:000000000000 %s\",data);",
          "content_same": false
        },
        {
          "line": 590,
          "old_api": "benchmark",
          "new_api": "test_is_selected",
          "old_text": "benchmark(\"GET\",cmd,len)",
          "new_text": "test_is_selected(\"get\")",
          "old_line_content": "            benchmark(\"GET\",cmd,len);",
          "new_line_content": "        if (test_is_selected(\"get\")) {",
          "content_same": false
        },
        {
          "line": 591,
          "old_api": "free",
          "new_api": "redisFormatCommand",
          "old_text": "free(cmd)",
          "new_text": "redisFormatCommand(&cmd,\"GET foo:rand:000000000000\")",
          "old_line_content": "            free(cmd);",
          "new_line_content": "            len = redisFormatCommand(&cmd,\"GET foo:rand:000000000000\");",
          "content_same": false
        },
        {
          "line": 596,
          "old_api": "benchmark",
          "new_api": "test_is_selected",
          "old_text": "benchmark(\"INCR\",cmd,len)",
          "new_text": "test_is_selected(\"incr\")",
          "old_line_content": "            benchmark(\"INCR\",cmd,len);",
          "new_line_content": "        if (test_is_selected(\"incr\")) {",
          "content_same": false
        },
        {
          "line": 597,
          "old_api": "free",
          "new_api": "redisFormatCommand",
          "old_text": "free(cmd)",
          "new_text": "redisFormatCommand(&cmd,\"INCR counter:rand:000000000000\")",
          "old_line_content": "            free(cmd);",
          "new_line_content": "            len = redisFormatCommand(&cmd,\"INCR counter:rand:000000000000\");",
          "content_same": false
        },
        {
          "line": 602,
          "old_api": "benchmark",
          "new_api": "test_is_selected",
          "old_text": "benchmark(\"LPUSH\",cmd,len)",
          "new_text": "test_is_selected(\"lpush\")",
          "old_line_content": "            benchmark(\"LPUSH\",cmd,len);",
          "new_line_content": "        if (test_is_selected(\"lpush\")) {",
          "content_same": false
        },
        {
          "line": 603,
          "old_api": "free",
          "new_api": "redisFormatCommand",
          "old_text": "free(cmd)",
          "new_text": "redisFormatCommand(&cmd,\"LPUSH mylist %s\",data)",
          "old_line_content": "            free(cmd);",
          "new_line_content": "            len = redisFormatCommand(&cmd,\"LPUSH mylist %s\",data);",
          "content_same": false
        },
        {
          "line": 608,
          "old_api": "benchmark",
          "new_api": "test_is_selected",
          "old_text": "benchmark(\"LPOP\",cmd,len)",
          "new_text": "test_is_selected(\"lpop\")",
          "old_line_content": "            benchmark(\"LPOP\",cmd,len);",
          "new_line_content": "        if (test_is_selected(\"lpop\")) {",
          "content_same": false
        },
        {
          "line": 609,
          "old_api": "free",
          "new_api": "redisFormatCommand",
          "old_text": "free(cmd)",
          "new_text": "redisFormatCommand(&cmd,\"LPOP mylist\")",
          "old_line_content": "            free(cmd);",
          "new_line_content": "            len = redisFormatCommand(&cmd,\"LPOP mylist\");",
          "content_same": false
        },
        {
          "line": 615,
          "old_api": "benchmark",
          "new_api": "redisFormatCommand",
          "old_text": "benchmark(\"SADD\",cmd,len)",
          "new_text": "redisFormatCommand(&cmd,\n                \"SADD myset counter:rand:000000000000\")",
          "old_line_content": "            benchmark(\"SADD\",cmd,len);",
          "new_line_content": "            len = redisFormatCommand(&cmd,",
          "content_same": false
        },
        {
          "line": 621,
          "old_api": "benchmark",
          "new_api": "test_is_selected",
          "old_text": "benchmark(\"SPOP\",cmd,len)",
          "new_text": "test_is_selected(\"spop\")",
          "old_line_content": "            benchmark(\"SPOP\",cmd,len);",
          "new_line_content": "        if (test_is_selected(\"spop\")) {",
          "content_same": false
        },
        {
          "line": 622,
          "old_api": "free",
          "new_api": "redisFormatCommand",
          "old_text": "free(cmd)",
          "new_text": "redisFormatCommand(&cmd,\"SPOP myset\")",
          "old_line_content": "            free(cmd);",
          "new_line_content": "            len = redisFormatCommand(&cmd,\"SPOP myset\");",
          "content_same": false
        },
        {
          "line": 631,
          "old_api": "redisFormatCommand",
          "new_api": "test_is_selected",
          "old_text": "redisFormatCommand(&cmd,\"LPUSH mylist %s\",data)",
          "new_text": "test_is_selected(\"lrange_600\")",
          "old_line_content": "            len = redisFormatCommand(&cmd,\"LPUSH mylist %s\",data);",
          "new_line_content": "            test_is_selected(\"lrange_600\"))",
          "content_same": false
        },
        {
          "line": 633,
          "old_api": "free",
          "new_api": "redisFormatCommand",
          "old_text": "free(cmd)",
          "new_text": "redisFormatCommand(&cmd,\"LPUSH mylist %s\",data)",
          "old_line_content": "            free(cmd);",
          "new_line_content": "            len = redisFormatCommand(&cmd,\"LPUSH mylist %s\",data);",
          "content_same": false
        },
        {
          "line": 638,
          "old_api": "benchmark",
          "new_api": "test_is_selected",
          "old_text": "benchmark(\"LRANGE_100 (first 100 elements)\",cmd,len)",
          "new_text": "test_is_selected(\"lrange_100\")",
          "old_line_content": "            benchmark(\"LRANGE_100 (first 100 elements)\",cmd,len);",
          "new_line_content": "        if (test_is_selected(\"lrange\") || test_is_selected(\"lrange_100\")) {",
          "content_same": false
        },
        {
          "line": 639,
          "old_api": "free",
          "new_api": "redisFormatCommand",
          "old_text": "free(cmd)",
          "new_text": "redisFormatCommand(&cmd,\"LRANGE mylist 0 99\")",
          "old_line_content": "            free(cmd);",
          "new_line_content": "            len = redisFormatCommand(&cmd,\"LRANGE mylist 0 99\");",
          "content_same": false
        },
        {
          "line": 644,
          "old_api": "benchmark",
          "new_api": "test_is_selected",
          "old_text": "benchmark(\"LRANGE_300 (first 300 elements)\",cmd,len)",
          "new_text": "test_is_selected(\"lrange_300\")",
          "old_line_content": "            benchmark(\"LRANGE_300 (first 300 elements)\",cmd,len);",
          "new_line_content": "        if (test_is_selected(\"lrange\") || test_is_selected(\"lrange_300\")) {",
          "content_same": false
        },
        {
          "line": 645,
          "old_api": "free",
          "new_api": "redisFormatCommand",
          "old_text": "free(cmd)",
          "new_text": "redisFormatCommand(&cmd,\"LRANGE mylist 0 299\")",
          "old_line_content": "            free(cmd);",
          "new_line_content": "            len = redisFormatCommand(&cmd,\"LRANGE mylist 0 299\");",
          "content_same": false
        },
        {
          "line": 650,
          "old_api": "benchmark",
          "new_api": "test_is_selected",
          "old_text": "benchmark(\"LRANGE_500 (first 450 elements)\",cmd,len)",
          "new_text": "test_is_selected(\"lrange_500\")",
          "old_line_content": "            benchmark(\"LRANGE_500 (first 450 elements)\",cmd,len);",
          "new_line_content": "        if (test_is_selected(\"lrange\") || test_is_selected(\"lrange_500\")) {",
          "content_same": false
        },
        {
          "line": 651,
          "old_api": "free",
          "new_api": "redisFormatCommand",
          "old_text": "free(cmd)",
          "new_text": "redisFormatCommand(&cmd,\"LRANGE mylist 0 449\")",
          "old_line_content": "            free(cmd);",
          "new_line_content": "            len = redisFormatCommand(&cmd,\"LRANGE mylist 0 449\");",
          "content_same": false
        },
        {
          "line": 656,
          "old_api": "benchmark",
          "new_api": "test_is_selected",
          "old_text": "benchmark(\"LRANGE_600 (first 600 elements)\",cmd,len)",
          "new_text": "test_is_selected(\"lrange_600\")",
          "old_line_content": "            benchmark(\"LRANGE_600 (first 600 elements)\",cmd,len);",
          "new_line_content": "        if (test_is_selected(\"lrange\") || test_is_selected(\"lrange_600\")) {",
          "content_same": false
        },
        {
          "line": 657,
          "old_api": "free",
          "new_api": "redisFormatCommand",
          "old_text": "free(cmd)",
          "new_text": "redisFormatCommand(&cmd,\"LRANGE mylist 0 599\")",
          "old_line_content": "            free(cmd);",
          "new_line_content": "            len = redisFormatCommand(&cmd,\"LRANGE mylist 0 599\");",
          "content_same": false
        },
        {
          "line": 669,
          "old_api": "free",
          "new_api": "redisFormatCommandArgv",
          "old_text": "free(cmd)",
          "new_text": "redisFormatCommandArgv(&cmd,21,argv,NULL)",
          "old_line_content": "            free(cmd);",
          "new_line_content": "            len = redisFormatCommandArgv(&cmd,21,argv,NULL);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 516,
          "old_api": null,
          "new_api": "aeCreateEventLoop",
          "old_text": null,
          "new_text": "aeCreateEventLoop(1024*10)",
          "old_line_content": "    config.keepalive = 1;",
          "new_line_content": "    config.el = aeCreateEventLoop(1024*10);",
          "content_same": false
        },
        {
          "line": 517,
          "old_api": null,
          "new_api": "aeCreateTimeEvent",
          "old_text": null,
          "new_text": "aeCreateTimeEvent(config.el,1,showThroughput,NULL,NULL)",
          "old_line_content": "    config.datasize = 3;",
          "new_line_content": "    aeCreateTimeEvent(config.el,1,showThroughput,NULL,NULL);",
          "content_same": false
        },
        {
          "line": 528,
          "old_api": null,
          "new_api": "listCreate",
          "old_text": null,
          "new_text": "listCreate()",
          "old_line_content": "    config.hostport = 6379;",
          "new_line_content": "    config.clients = listCreate();",
          "content_same": false
        },
        {
          "line": 534,
          "old_api": null,
          "new_api": "parseOptions",
          "old_text": null,
          "new_text": "parseOptions(argc,argv)",
          "old_line_content": "    argv += i;",
          "new_line_content": "    i = parseOptions(argc,argv);",
          "content_same": false
        },
        {
          "line": 538,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(long long)*config.requests)",
          "old_line_content": "    if (config.keepalive == 0) {",
          "new_line_content": "    config.latency = zmalloc(sizeof(long long)*config.requests);",
          "content_same": false
        },
        {
          "line": 541,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"WARNING: keepalive disabled, you probably need 'echo 1 > /proc/sys/net/ipv4/tcp_tw_reuse' for Linux and 'sudo sysctl -w net.inet.tcp.msl=1000' for Mac OS X in order to use a lot of clients/requests\\n\")",
          "old_line_content": "",
          "new_line_content": "        printf(\"WARNING: keepalive disabled, you probably need 'echo 1 > /proc/sys/net/ipv4/tcp_tw_reuse' for Linux and 'sudo sysctl -w net.inet.tcp.msl=1000' for Mac OS X in order to use a lot of clients/requests\\n\");",
          "content_same": false
        },
        {
          "line": 547,
          "old_api": null,
          "new_api": "createMissingClients",
          "old_text": null,
          "new_text": "createMissingClients(c)",
          "old_line_content": "        /* and will wait for every */",
          "new_line_content": "        createMissingClients(c);",
          "content_same": false
        },
        {
          "line": 548,
          "old_api": null,
          "new_api": "aeMain",
          "old_text": null,
          "new_text": "aeMain(config.el)",
          "old_line_content": "    }",
          "new_line_content": "        aeMain(config.el);",
          "content_same": false
        },
        {
          "line": 556,
          "old_api": null,
          "new_api": "sdscatlen",
          "old_text": null,
          "new_text": "sdscatlen(title, \" \", 1)",
          "old_line_content": "        }",
          "new_line_content": "            title = sdscatlen(title, \" \", 1);",
          "content_same": false
        },
        {
          "line": 557,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(argv[i])",
          "old_line_content": "",
          "new_line_content": "            title = sdscatlen(title, (char*)argv[i], strlen(argv[i]));",
          "content_same": false
        },
        {
          "line": 562,
          "old_api": null,
          "new_api": "benchmark",
          "old_text": null,
          "new_text": "benchmark(title,cmd,len)",
          "old_line_content": "        } while(config.loop);",
          "new_line_content": "            benchmark(title,cmd,len);",
          "content_same": false
        },
        {
          "line": 563,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(cmd)",
          "old_line_content": "",
          "new_line_content": "            free(cmd);",
          "content_same": false
        },
        {
          "line": 571,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(config.datasize+1)",
          "old_line_content": "        data[config.datasize] = '\\0';",
          "new_line_content": "        data = zmalloc(config.datasize+1);",
          "content_same": false
        },
        {
          "line": 572,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(data,'x',config.datasize)",
          "old_line_content": "",
          "new_line_content": "        memset(data,'x',config.datasize);",
          "content_same": false
        },
        {
          "line": 575,
          "old_api": null,
          "new_api": "test_is_selected",
          "old_text": null,
          "new_text": "test_is_selected(\"ping\")",
          "old_line_content": "",
          "new_line_content": "        if (test_is_selected(\"ping_inline\") || test_is_selected(\"ping\"))",
          "content_same": false
        },
        {
          "line": 580,
          "old_api": null,
          "new_api": "benchmark",
          "old_text": null,
          "new_text": "benchmark(\"PING_BULK\",cmd,len)",
          "old_line_content": "        }",
          "new_line_content": "            benchmark(\"PING_BULK\",cmd,len);",
          "content_same": false
        },
        {
          "line": 581,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(cmd)",
          "old_line_content": "",
          "new_line_content": "            free(cmd);",
          "content_same": false
        },
        {
          "line": 586,
          "old_api": null,
          "new_api": "benchmark",
          "old_text": null,
          "new_text": "benchmark(\"SET\",cmd,len)",
          "old_line_content": "        }",
          "new_line_content": "            benchmark(\"SET\",cmd,len);",
          "content_same": false
        },
        {
          "line": 587,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(cmd)",
          "old_line_content": "",
          "new_line_content": "            free(cmd);",
          "content_same": false
        },
        {
          "line": 592,
          "old_api": null,
          "new_api": "benchmark",
          "old_text": null,
          "new_text": "benchmark(\"GET\",cmd,len)",
          "old_line_content": "        }",
          "new_line_content": "            benchmark(\"GET\",cmd,len);",
          "content_same": false
        },
        {
          "line": 593,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(cmd)",
          "old_line_content": "",
          "new_line_content": "            free(cmd);",
          "content_same": false
        },
        {
          "line": 598,
          "old_api": null,
          "new_api": "benchmark",
          "old_text": null,
          "new_text": "benchmark(\"INCR\",cmd,len)",
          "old_line_content": "        }",
          "new_line_content": "            benchmark(\"INCR\",cmd,len);",
          "content_same": false
        },
        {
          "line": 599,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(cmd)",
          "old_line_content": "",
          "new_line_content": "            free(cmd);",
          "content_same": false
        },
        {
          "line": 604,
          "old_api": null,
          "new_api": "benchmark",
          "old_text": null,
          "new_text": "benchmark(\"LPUSH\",cmd,len)",
          "old_line_content": "        }",
          "new_line_content": "            benchmark(\"LPUSH\",cmd,len);",
          "content_same": false
        },
        {
          "line": 605,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(cmd)",
          "old_line_content": "",
          "new_line_content": "            free(cmd);",
          "content_same": false
        },
        {
          "line": 610,
          "old_api": null,
          "new_api": "benchmark",
          "old_text": null,
          "new_text": "benchmark(\"LPOP\",cmd,len)",
          "old_line_content": "        }",
          "new_line_content": "            benchmark(\"LPOP\",cmd,len);",
          "content_same": false
        },
        {
          "line": 611,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(cmd)",
          "old_line_content": "",
          "new_line_content": "            free(cmd);",
          "content_same": false
        },
        {
          "line": 614,
          "old_api": null,
          "new_api": "test_is_selected",
          "old_text": null,
          "new_text": "test_is_selected(\"sadd\")",
          "old_line_content": "                \"SADD myset counter:rand:000000000000\");",
          "new_line_content": "        if (test_is_selected(\"sadd\")) {",
          "content_same": false
        },
        {
          "line": 617,
          "old_api": null,
          "new_api": "benchmark",
          "old_text": null,
          "new_text": "benchmark(\"SADD\",cmd,len)",
          "old_line_content": "        }",
          "new_line_content": "            benchmark(\"SADD\",cmd,len);",
          "content_same": false
        },
        {
          "line": 618,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(cmd)",
          "old_line_content": "",
          "new_line_content": "            free(cmd);",
          "content_same": false
        },
        {
          "line": 623,
          "old_api": null,
          "new_api": "benchmark",
          "old_text": null,
          "new_text": "benchmark(\"SPOP\",cmd,len)",
          "old_line_content": "        }",
          "new_line_content": "            benchmark(\"SPOP\",cmd,len);",
          "content_same": false
        },
        {
          "line": 624,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(cmd)",
          "old_line_content": "",
          "new_line_content": "            free(cmd);",
          "content_same": false
        },
        {
          "line": 630,
          "old_api": null,
          "new_api": "test_is_selected",
          "old_text": null,
          "new_text": "test_is_selected(\"lrange_500\")",
          "old_line_content": "        {",
          "new_line_content": "            test_is_selected(\"lrange_500\") ||",
          "content_same": false
        },
        {
          "line": 634,
          "old_api": null,
          "new_api": "benchmark",
          "old_text": null,
          "new_text": "benchmark(\"LPUSH (needed to benchmark LRANGE)\",cmd,len)",
          "old_line_content": "        }",
          "new_line_content": "            benchmark(\"LPUSH (needed to benchmark LRANGE)\",cmd,len);",
          "content_same": false
        },
        {
          "line": 635,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(cmd)",
          "old_line_content": "",
          "new_line_content": "            free(cmd);",
          "content_same": false
        },
        {
          "line": 640,
          "old_api": null,
          "new_api": "benchmark",
          "old_text": null,
          "new_text": "benchmark(\"LRANGE_100 (first 100 elements)\",cmd,len)",
          "old_line_content": "        }",
          "new_line_content": "            benchmark(\"LRANGE_100 (first 100 elements)\",cmd,len);",
          "content_same": false
        },
        {
          "line": 641,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(cmd)",
          "old_line_content": "",
          "new_line_content": "            free(cmd);",
          "content_same": false
        },
        {
          "line": 646,
          "old_api": null,
          "new_api": "benchmark",
          "old_text": null,
          "new_text": "benchmark(\"LRANGE_300 (first 300 elements)\",cmd,len)",
          "old_line_content": "        }",
          "new_line_content": "            benchmark(\"LRANGE_300 (first 300 elements)\",cmd,len);",
          "content_same": false
        },
        {
          "line": 647,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(cmd)",
          "old_line_content": "",
          "new_line_content": "            free(cmd);",
          "content_same": false
        },
        {
          "line": 652,
          "old_api": null,
          "new_api": "benchmark",
          "old_text": null,
          "new_text": "benchmark(\"LRANGE_500 (first 450 elements)\",cmd,len)",
          "old_line_content": "        }",
          "new_line_content": "            benchmark(\"LRANGE_500 (first 450 elements)\",cmd,len);",
          "content_same": false
        },
        {
          "line": 653,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(cmd)",
          "old_line_content": "",
          "new_line_content": "            free(cmd);",
          "content_same": false
        },
        {
          "line": 658,
          "old_api": null,
          "new_api": "benchmark",
          "old_text": null,
          "new_text": "benchmark(\"LRANGE_600 (first 600 elements)\",cmd,len)",
          "old_line_content": "        }",
          "new_line_content": "            benchmark(\"LRANGE_600 (first 600 elements)\",cmd,len);",
          "content_same": false
        },
        {
          "line": 659,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(cmd)",
          "old_line_content": "",
          "new_line_content": "            free(cmd);",
          "content_same": false
        },
        {
          "line": 662,
          "old_api": null,
          "new_api": "test_is_selected",
          "old_text": null,
          "new_text": "test_is_selected(\"mset\")",
          "old_line_content": "            argv[0] = \"MSET\";",
          "new_line_content": "        if (test_is_selected(\"mset\")) {",
          "content_same": false
        },
        {
          "line": 670,
          "old_api": null,
          "new_api": "benchmark",
          "old_text": null,
          "new_text": "benchmark(\"MSET (10 keys)\",cmd,len)",
          "old_line_content": "        }",
          "new_line_content": "            benchmark(\"MSET (10 keys)\",cmd,len);",
          "content_same": false
        },
        {
          "line": 671,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(cmd)",
          "old_line_content": "",
          "new_line_content": "            free(cmd);",
          "content_same": false
        },
        {
          "line": 674,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"\\n\")",
          "old_line_content": "",
          "new_line_content": "        if (!config.csv) printf(\"\\n\");",
          "content_same": false
        },
        {
          "line": 271,
          "old_api": null,
          "new_api": "sdscatlen",
          "old_text": null,
          "new_text": "sdscatlen(c->obuf,cmd,len)",
          "old_line_content": "    c->written = 0;",
          "new_line_content": "        c->obuf = sdscatlen(c->obuf,cmd,len);",
          "content_same": false
        },
        {
          "line": 279,
          "old_api": null,
          "new_api": "strstr",
          "old_text": null,
          "new_text": "strstr(p,\":rand:\")",
          "old_line_content": "            c->randptr[c->randlen++] = p+6;",
          "new_line_content": "        while ((p = strstr(p,\":rand:\")) != NULL) {",
          "content_same": false
        },
        {
          "line": 280,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(c->randlen < (signed)(sizeof(c->randptr)/sizeof(char*)))",
          "old_line_content": "            p += 6;",
          "new_line_content": "            assert(c->randlen < (signed)(sizeof(c->randptr)/sizeof(char*)));",
          "content_same": false
        },
        {
          "line": 287,
          "old_api": null,
          "new_api": "aeCreateFileEvent",
          "old_text": null,
          "new_text": "aeCreateFileEvent(config.el,c->context->fd,AE_WRITABLE,writeHandler,c)",
          "old_line_content": "    config.liveclients++;",
          "new_line_content": "    aeCreateFileEvent(config.el,c->context->fd,AE_WRITABLE,writeHandler,c);",
          "content_same": false
        },
        {
          "line": 288,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(config.clients,c)",
          "old_line_content": "    return c;",
          "new_line_content": "    listAddNodeTail(config.clients,c);",
          "content_same": false
        },
        {
          "line": 297,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->obuf)",
          "old_line_content": "        /* Listen backlog is quite limited on most systems */",
          "new_line_content": "        createClient(c->obuf,sdslen(c->obuf)/config.pipeline);",
          "content_same": false
        },
        {
          "line": 301,
          "old_api": null,
          "new_api": "usleep",
          "old_text": null,
          "new_text": "usleep(50000)",
          "old_line_content": "        }",
          "new_line_content": "            usleep(50000);",
          "content_same": false
        },
        {
          "line": 317,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"====== %s ======\\n\", config.title)",
          "old_line_content": "            (float)config.totlatency/1000);",
          "new_line_content": "        printf(\"====== %s ======\\n\", config.title);",
          "content_same": false
        },
        {
          "line": 322,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"  keep alive: %d\\n\", config.keepalive)",
          "old_line_content": "",
          "new_line_content": "        printf(\"  keep alive: %d\\n\", config.keepalive);",
          "content_same": false
        },
        {
          "line": 325,
          "old_api": null,
          "new_api": "qsort",
          "old_text": null,
          "new_text": "qsort(config.latency,config.requests,sizeof(long long),compareLatency)",
          "old_line_content": "            if (config.latency[i]/1000 != curlat || i == (config.requests-1)) {",
          "new_line_content": "        qsort(config.latency,config.requests,sizeof(long long),compareLatency);",
          "content_same": false
        },
        {
          "line": 330,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"%.2f%% <= %d milliseconds\\n\", perc, curlat)",
          "old_line_content": "        }",
          "new_line_content": "                printf(\"%.2f%% <= %d milliseconds\\n\", perc, curlat);",
          "content_same": false
        },
        {
          "line": 337,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"%s: %.2f requests per second\\n\", config.title, reqpersec)",
          "old_line_content": "}",
          "new_line_content": "        printf(\"%s: %.2f requests per second\\n\", config.title, reqpersec);",
          "content_same": false
        },
        {
          "line": 348,
          "old_api": null,
          "new_api": "createClient",
          "old_text": null,
          "new_text": "createClient(cmd,len)",
          "old_line_content": "",
          "new_line_content": "    c = createClient(cmd,len);",
          "content_same": false
        },
        {
          "line": 352,
          "old_api": null,
          "new_api": "aeMain",
          "old_text": null,
          "new_text": "aeMain(config.el)",
          "old_line_content": "",
          "new_line_content": "    aeMain(config.el);",
          "content_same": false
        },
        {
          "line": 355,
          "old_api": null,
          "new_api": "showLatencyReport",
          "old_text": null,
          "new_text": "showLatencyReport()",
          "old_line_content": "}",
          "new_line_content": "    showLatencyReport();",
          "content_same": false
        },
        {
          "line": 356,
          "old_api": null,
          "new_api": "freeAllClients",
          "old_text": null,
          "new_text": "freeAllClients()",
          "old_line_content": "",
          "new_line_content": "    freeAllClients();",
          "content_same": false
        },
        {
          "line": 370,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(argv[++i])",
          "old_line_content": "            if (lastarg) goto invalid;",
          "new_line_content": "            config.numclients = atoi(argv[++i]);",
          "content_same": false
        },
        {
          "line": 373,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(argv[++i])",
          "old_line_content": "            if (lastarg) goto invalid;",
          "new_line_content": "            config.requests = atoi(argv[++i]);",
          "content_same": false
        },
        {
          "line": 376,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(argv[++i])",
          "old_line_content": "            if (lastarg) goto invalid;",
          "new_line_content": "            config.keepalive = atoi(argv[++i]);",
          "content_same": false
        },
        {
          "line": 379,
          "old_api": null,
          "new_api": "strdup",
          "old_text": null,
          "new_text": "strdup(argv[++i])",
          "old_line_content": "            if (lastarg) goto invalid;",
          "new_line_content": "            config.hostip = strdup(argv[++i]);",
          "content_same": false
        },
        {
          "line": 382,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(argv[++i])",
          "old_line_content": "            if (lastarg) goto invalid;",
          "new_line_content": "            config.hostport = atoi(argv[++i]);",
          "content_same": false
        },
        {
          "line": 385,
          "old_api": null,
          "new_api": "strdup",
          "old_text": null,
          "new_text": "strdup(argv[++i])",
          "old_line_content": "            if (lastarg) goto invalid;",
          "new_line_content": "            config.hostsocket = strdup(argv[++i]);",
          "content_same": false
        },
        {
          "line": 388,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(argv[++i])",
          "old_line_content": "            if (config.datasize > 1024*1024*1024) config.datasize = 1024*1024*1024;",
          "new_line_content": "            config.datasize = atoi(argv[++i]);",
          "content_same": false
        },
        {
          "line": 395,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(argv[i],\"-r\")",
          "old_line_content": "            config.randomkeys = 1;",
          "new_line_content": "        } else if (!strcmp(argv[i],\"-r\")) {",
          "content_same": false
        },
        {
          "line": 398,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(argv[++i])",
          "old_line_content": "                config.randomkeys_keyspacelen = 0;",
          "new_line_content": "            config.randomkeys_keyspacelen = atoi(argv[++i]);",
          "content_same": false
        },
        {
          "line": 409,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(argv[i],\"-t\")",
          "old_line_content": "            /* We get the list of tests to run as a string in the form",
          "new_line_content": "        } else if (!strcmp(argv[i],\"-t\")) {",
          "content_same": false
        },
        {
          "line": 419,
          "old_api": null,
          "new_api": "sdstolower",
          "old_text": null,
          "new_text": "sdstolower(config.tests)",
          "old_line_content": "            exit_status = 0;",
          "new_line_content": "            sdstolower(config.tests);",
          "content_same": false
        },
        {
          "line": 420,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(argv[i],\"--help\")",
          "old_line_content": "            goto usage;",
          "new_line_content": "        } else if (!strcmp(argv[i],\"--help\")) {",
          "content_same": false
        },
        {
          "line": 435,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"Invalid option \\\"%s\\\" or option argument missing\\n\\n\",argv[i])",
          "old_line_content": "usage:",
          "new_line_content": "    printf(\"Invalid option \\\"%s\\\" or option argument missing\\n\\n\",argv[i]);",
          "content_same": false
        },
        {
          "line": 438,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\n\"Usage: redis-benchmark [-h <host>] [-p <port>] [-c <clients>] [-n <requests]> [-k <boolean>]\\n\\n\"\n\" -h <hostname>      Server hostname (default 127.0.0.1)\\n\"\n\" -p <port>          Server port (default 6379)\\n\"\n\" -s <socket>        Server socket (overrides host and port)\\n\"\n\" -c <clients>       Number of parallel connections (default 50)\\n\"\n\" -n <requests>      Total number of requests (default 10000)\\n\"\n\" -d <size>          Data size of SET/GET value in bytes (default 2)\\n\"\n\" -k <boolean>       1=keep alive 0=reconnect (default 1)\\n\"\n\" -r <keyspacelen>   Use random keys for SET/GET/INCR, random values for SADD\\n\"\n\"  Using this option the benchmark will get/set keys\\n\"\n\"  in the form mykey_rand:000000012456 instead of constant\\n\"\n\"  keys, the <keyspacelen> argument determines the max\\n\"\n\"  number of values for the random number. For instance\\n\"\n\"  if set to 10 only rand:000000000000 - rand:000000000009\\n\"\n\"  range will be allowed.\\n\"\n\" -P <numreq>        Pipeline <numreq> requests. Default 1 (no pipeline).\\n\"\n\" -q                 Quiet. Just show query/sec values\\n\"\n\" --csv              Output in CSV format\\n\"\n\" -l                 Loop. Run the tests forever\\n\"\n\" -t <tests>         Only run the comma separated list of tests. The test\\n\"\n\"                    names are the same as the ones produced as output.\\n\"\n\" -I                 Idle mode. Just open N idle connections and wait.\\n\\n\"\n\"Examples:\\n\\n\"\n\" Run the benchmark with the default configuration against 127.0.0.1:6379:\\n\"\n\"   $ redis-benchmark\\n\\n\"\n\" Use 20 parallel clients, for a total of 100k requests, against 192.168.1.1:\\n\"\n\"   $ redis-benchmark -h 192.168.1.1 -p 6379 -n 100000 -c 20\\n\\n\"\n\" Fill 127.0.0.1:6379 with about 1 million keys only using the SET test:\\n\"\n\"   $ redis-benchmark -t set -n 1000000 -r 100000000\\n\\n\"\n\" Benchmark 127.0.0.1:6379 for a few commands producing CSV output:\\n\"\n\"   $ redis-benchmark -t ping,set,get -n 100000 --csv\\n\\n\"\n\" Fill a list with 10000 random elements:\\n\"\n\"   $ redis-benchmark -r 10000 -n 10000 lpush mylist ele:rand:000000000000\\n\\n\"\n    )",
          "old_line_content": "\" -h <hostname>      Server hostname (default 127.0.0.1)\\n\"",
          "new_line_content": "    printf(",
          "content_same": false
        },
        {
          "line": 473,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(exit_status)",
          "old_line_content": "",
          "new_line_content": "    exit(exit_status);",
          "content_same": false
        },
        {
          "line": 478,
          "old_api": null,
          "new_api": "REDIS_NOTUSED",
          "old_text": null,
          "new_text": "REDIS_NOTUSED(id)",
          "old_line_content": "",
          "new_line_content": "    REDIS_NOTUSED(id);",
          "content_same": false
        },
        {
          "line": 479,
          "old_api": null,
          "new_api": "REDIS_NOTUSED",
          "old_text": null,
          "new_text": "REDIS_NOTUSED(clientData)",
          "old_line_content": "    if (config.csv) return 250;",
          "new_line_content": "    REDIS_NOTUSED(clientData);",
          "content_same": false
        },
        {
          "line": 484,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"%s: %.2f\\r\", config.title, rps)",
          "old_line_content": "    return 250; /* every 250ms */",
          "new_line_content": "    printf(\"%s: %.2f\\r\", config.title, rps);",
          "content_same": false
        },
        {
          "line": 485,
          "old_api": null,
          "new_api": "fflush",
          "old_text": null,
          "new_text": "fflush(stdout)",
          "old_line_content": "}",
          "new_line_content": "    fflush(stdout);",
          "content_same": false
        },
        {
          "line": 493,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(name)",
          "old_line_content": "    if (config.tests == NULL) return 1;",
          "new_line_content": "    int l = strlen(name);",
          "content_same": false
        },
        {
          "line": 497,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(buf+1,name,l)",
          "old_line_content": "    buf[l+2] = '\\0';",
          "new_line_content": "    memcpy(buf+1,name,l);",
          "content_same": false
        },
        {
          "line": 500,
          "old_api": null,
          "new_api": "strstr",
          "old_text": null,
          "new_text": "strstr(config.tests,buf)",
          "old_line_content": "",
          "new_line_content": "    return strstr(config.tests,buf) != NULL;",
          "content_same": false
        },
        {
          "line": 510,
          "old_api": null,
          "new_api": "signal",
          "old_text": null,
          "new_text": "signal(SIGHUP, SIG_IGN)",
          "old_line_content": "",
          "new_line_content": "    signal(SIGHUP, SIG_IGN);",
          "content_same": false
        },
        {
          "line": 511,
          "old_api": null,
          "new_api": "signal",
          "old_text": null,
          "new_text": "signal(SIGPIPE, SIG_IGN)",
          "old_line_content": "    config.numclients = 50;",
          "new_line_content": "    signal(SIGPIPE, SIG_IGN);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 514,
          "old_api": "aeCreateEventLoop",
          "new_api": null,
          "old_text": "aeCreateEventLoop(1024*10)",
          "new_text": null,
          "old_line_content": "    config.el = aeCreateEventLoop(1024*10);",
          "new_line_content": "    config.requests = 10000;",
          "content_same": false
        },
        {
          "line": 515,
          "old_api": "aeCreateTimeEvent",
          "new_api": null,
          "old_text": "aeCreateTimeEvent(config.el,1,showThroughput,NULL,NULL)",
          "new_text": null,
          "old_line_content": "    aeCreateTimeEvent(config.el,1,showThroughput,NULL,NULL);",
          "new_line_content": "    config.liveclients = 0;",
          "content_same": false
        },
        {
          "line": 526,
          "old_api": "listCreate",
          "new_api": null,
          "old_text": "listCreate()",
          "new_text": null,
          "old_line_content": "    config.clients = listCreate();",
          "new_line_content": "    config.idlemode = 0;",
          "content_same": false
        },
        {
          "line": 532,
          "old_api": "parseOptions",
          "new_api": null,
          "old_text": "parseOptions(argc,argv)",
          "new_text": null,
          "old_line_content": "    i = parseOptions(argc,argv);",
          "new_line_content": "    config.tests = NULL;",
          "content_same": false
        },
        {
          "line": 536,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(long long)*config.requests)",
          "new_text": null,
          "old_line_content": "    config.latency = zmalloc(sizeof(long long)*config.requests);",
          "new_line_content": "    argv += i;",
          "content_same": false
        },
        {
          "line": 539,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"WARNING: keepalive disabled, you probably need 'echo 1 > /proc/sys/net/ipv4/tcp_tw_reuse' for Linux and 'sudo sysctl -w net.inet.tcp.msl=1000' for Mac OS X in order to use a lot of clients/requests\\n\")",
          "new_text": null,
          "old_line_content": "        printf(\"WARNING: keepalive disabled, you probably need 'echo 1 > /proc/sys/net/ipv4/tcp_tw_reuse' for Linux and 'sudo sysctl -w net.inet.tcp.msl=1000' for Mac OS X in order to use a lot of clients/requests\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 543,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"Creating %d idle connections and waiting forever (Ctrl+C when done)\\n\", config.numclients)",
          "new_text": null,
          "old_line_content": "        printf(\"Creating %d idle connections and waiting forever (Ctrl+C when done)\\n\", config.numclients);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 544,
          "old_api": "createClient",
          "new_api": null,
          "old_text": "createClient(\"\",0)",
          "new_text": null,
          "old_line_content": "        c = createClient(\"\",0); /* will never receive a reply */",
          "new_line_content": "    if (config.idlemode) {",
          "content_same": false
        },
        {
          "line": 552,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(argv[0])",
          "new_text": null,
          "old_line_content": "        sds title = sdsnew(argv[0]);",
          "new_line_content": "    /* Run benchmark with command in the remainder of the arguments. */",
          "content_same": false
        },
        {
          "line": 555,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(argv[i])",
          "new_text": null,
          "old_line_content": "            title = sdscatlen(title, (char*)argv[i], strlen(argv[i]));",
          "new_line_content": "        for (i = 1; i < argc; i++) {",
          "content_same": false
        },
        {
          "line": 559,
          "old_api": "redisFormatCommandArgv",
          "new_api": null,
          "old_text": "redisFormatCommandArgv(&cmd,argc,argv,NULL)",
          "new_text": null,
          "old_line_content": "            len = redisFormatCommandArgv(&cmd,argc,argv,NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 560,
          "old_api": "benchmark",
          "new_api": null,
          "old_text": "benchmark(title,cmd,len)",
          "new_text": null,
          "old_line_content": "            benchmark(title,cmd,len);",
          "new_line_content": "        do {",
          "content_same": false
        },
        {
          "line": 569,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(config.datasize+1)",
          "new_text": null,
          "old_line_content": "        data = zmalloc(config.datasize+1);",
          "new_line_content": "    /* Run default benchmark suite. */",
          "content_same": false
        },
        {
          "line": 570,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(data,'x',config.datasize)",
          "new_text": null,
          "old_line_content": "        memset(data,'x',config.datasize);",
          "new_line_content": "    do {",
          "content_same": false
        },
        {
          "line": 573,
          "old_api": "test_is_selected",
          "new_api": null,
          "old_text": "test_is_selected(\"ping\")",
          "new_text": null,
          "old_line_content": "        if (test_is_selected(\"ping_inline\") || test_is_selected(\"ping\"))",
          "new_line_content": "        data[config.datasize] = '\\0';",
          "content_same": false
        },
        {
          "line": 574,
          "old_api": "benchmark",
          "new_api": null,
          "old_text": "benchmark(\"PING_INLINE\",\"PING\\r\\n\",6)",
          "new_text": null,
          "old_line_content": "            benchmark(\"PING_INLINE\",\"PING\\r\\n\",6);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 577,
          "old_api": "redisFormatCommand",
          "new_api": null,
          "old_text": "redisFormatCommand(&cmd,\"PING\")",
          "new_text": null,
          "old_line_content": "            len = redisFormatCommand(&cmd,\"PING\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 582,
          "old_api": "test_is_selected",
          "new_api": null,
          "old_text": "test_is_selected(\"set\")",
          "new_text": null,
          "old_line_content": "        if (test_is_selected(\"set\")) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 583,
          "old_api": "redisFormatCommand",
          "new_api": null,
          "old_text": "redisFormatCommand(&cmd,\"SET foo:rand:000000000000 %s\",data)",
          "new_text": null,
          "old_line_content": "            len = redisFormatCommand(&cmd,\"SET foo:rand:000000000000 %s\",data);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 588,
          "old_api": "test_is_selected",
          "new_api": null,
          "old_text": "test_is_selected(\"get\")",
          "new_text": null,
          "old_line_content": "        if (test_is_selected(\"get\")) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 589,
          "old_api": "redisFormatCommand",
          "new_api": null,
          "old_text": "redisFormatCommand(&cmd,\"GET foo:rand:000000000000\")",
          "new_text": null,
          "old_line_content": "            len = redisFormatCommand(&cmd,\"GET foo:rand:000000000000\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 594,
          "old_api": "test_is_selected",
          "new_api": null,
          "old_text": "test_is_selected(\"incr\")",
          "new_text": null,
          "old_line_content": "        if (test_is_selected(\"incr\")) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 595,
          "old_api": "redisFormatCommand",
          "new_api": null,
          "old_text": "redisFormatCommand(&cmd,\"INCR counter:rand:000000000000\")",
          "new_text": null,
          "old_line_content": "            len = redisFormatCommand(&cmd,\"INCR counter:rand:000000000000\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 600,
          "old_api": "test_is_selected",
          "new_api": null,
          "old_text": "test_is_selected(\"lpush\")",
          "new_text": null,
          "old_line_content": "        if (test_is_selected(\"lpush\")) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 601,
          "old_api": "redisFormatCommand",
          "new_api": null,
          "old_text": "redisFormatCommand(&cmd,\"LPUSH mylist %s\",data)",
          "new_text": null,
          "old_line_content": "            len = redisFormatCommand(&cmd,\"LPUSH mylist %s\",data);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 606,
          "old_api": "test_is_selected",
          "new_api": null,
          "old_text": "test_is_selected(\"lpop\")",
          "new_text": null,
          "old_line_content": "        if (test_is_selected(\"lpop\")) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 607,
          "old_api": "redisFormatCommand",
          "new_api": null,
          "old_text": "redisFormatCommand(&cmd,\"LPOP mylist\")",
          "new_text": null,
          "old_line_content": "            len = redisFormatCommand(&cmd,\"LPOP mylist\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 612,
          "old_api": "test_is_selected",
          "new_api": null,
          "old_text": "test_is_selected(\"sadd\")",
          "new_text": null,
          "old_line_content": "        if (test_is_selected(\"sadd\")) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 613,
          "old_api": "redisFormatCommand",
          "new_api": null,
          "old_text": "redisFormatCommand(&cmd,\n                \"SADD myset counter:rand:000000000000\")",
          "new_text": null,
          "old_line_content": "            len = redisFormatCommand(&cmd,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 616,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(cmd)",
          "new_text": null,
          "old_line_content": "            free(cmd);",
          "new_line_content": "                \"SADD myset counter:rand:000000000000\");",
          "content_same": false
        },
        {
          "line": 619,
          "old_api": "test_is_selected",
          "new_api": null,
          "old_text": "test_is_selected(\"spop\")",
          "new_text": null,
          "old_line_content": "        if (test_is_selected(\"spop\")) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 620,
          "old_api": "redisFormatCommand",
          "new_api": null,
          "old_text": "redisFormatCommand(&cmd,\"SPOP myset\")",
          "new_text": null,
          "old_line_content": "            len = redisFormatCommand(&cmd,\"SPOP myset\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 625,
          "old_api": "test_is_selected",
          "new_api": null,
          "old_text": "test_is_selected(\"lrange\")",
          "new_text": null,
          "old_line_content": "        if (test_is_selected(\"lrange\") ||",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 626,
          "old_api": "test_is_selected",
          "new_api": null,
          "old_text": "test_is_selected(\"lrange_100\")",
          "new_text": null,
          "old_line_content": "            test_is_selected(\"lrange_100\") ||",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 632,
          "old_api": "benchmark",
          "new_api": null,
          "old_text": "benchmark(\"LPUSH (needed to benchmark LRANGE)\",cmd,len)",
          "new_text": null,
          "old_line_content": "            benchmark(\"LPUSH (needed to benchmark LRANGE)\",cmd,len);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 636,
          "old_api": "test_is_selected",
          "new_api": null,
          "old_text": "test_is_selected(\"lrange_100\")",
          "new_text": null,
          "old_line_content": "        if (test_is_selected(\"lrange\") || test_is_selected(\"lrange_100\")) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 637,
          "old_api": "redisFormatCommand",
          "new_api": null,
          "old_text": "redisFormatCommand(&cmd,\"LRANGE mylist 0 99\")",
          "new_text": null,
          "old_line_content": "            len = redisFormatCommand(&cmd,\"LRANGE mylist 0 99\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 642,
          "old_api": "test_is_selected",
          "new_api": null,
          "old_text": "test_is_selected(\"lrange_300\")",
          "new_text": null,
          "old_line_content": "        if (test_is_selected(\"lrange\") || test_is_selected(\"lrange_300\")) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 643,
          "old_api": "redisFormatCommand",
          "new_api": null,
          "old_text": "redisFormatCommand(&cmd,\"LRANGE mylist 0 299\")",
          "new_text": null,
          "old_line_content": "            len = redisFormatCommand(&cmd,\"LRANGE mylist 0 299\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 648,
          "old_api": "test_is_selected",
          "new_api": null,
          "old_text": "test_is_selected(\"lrange_500\")",
          "new_text": null,
          "old_line_content": "        if (test_is_selected(\"lrange\") || test_is_selected(\"lrange_500\")) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 649,
          "old_api": "redisFormatCommand",
          "new_api": null,
          "old_text": "redisFormatCommand(&cmd,\"LRANGE mylist 0 449\")",
          "new_text": null,
          "old_line_content": "            len = redisFormatCommand(&cmd,\"LRANGE mylist 0 449\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 654,
          "old_api": "test_is_selected",
          "new_api": null,
          "old_text": "test_is_selected(\"lrange_600\")",
          "new_text": null,
          "old_line_content": "        if (test_is_selected(\"lrange\") || test_is_selected(\"lrange_600\")) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 655,
          "old_api": "redisFormatCommand",
          "new_api": null,
          "old_text": "redisFormatCommand(&cmd,\"LRANGE mylist 0 599\")",
          "new_text": null,
          "old_line_content": "            len = redisFormatCommand(&cmd,\"LRANGE mylist 0 599\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 660,
          "old_api": "test_is_selected",
          "new_api": null,
          "old_text": "test_is_selected(\"mset\")",
          "new_text": null,
          "old_line_content": "        if (test_is_selected(\"mset\")) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 667,
          "old_api": "redisFormatCommandArgv",
          "new_api": null,
          "old_text": "redisFormatCommandArgv(&cmd,21,argv,NULL)",
          "new_text": null,
          "old_line_content": "            len = redisFormatCommandArgv(&cmd,21,argv,NULL);",
          "new_line_content": "                argv[i+1] = data;",
          "content_same": false
        },
        {
          "line": 668,
          "old_api": "benchmark",
          "new_api": null,
          "old_text": "benchmark(\"MSET (10 keys)\",cmd,len)",
          "new_text": null,
          "old_line_content": "            benchmark(\"MSET (10 keys)\",cmd,len);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 672,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"\\n\")",
          "new_text": null,
          "old_line_content": "        if (!config.csv) printf(\"\\n\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 267,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    c->obuf = sdsempty();",
          "new_line_content": "    c->context->reader->maxbuf = 0;",
          "content_same": false
        },
        {
          "line": 277,
          "old_api": "strstr",
          "new_api": null,
          "old_text": "strstr(p,\":rand:\")",
          "new_text": null,
          "old_line_content": "        while ((p = strstr(p,\":rand:\")) != NULL) {",
          "new_line_content": "    if (config.randomkeys) {",
          "content_same": false
        },
        {
          "line": 278,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(c->randlen < (signed)(sizeof(c->randptr)/sizeof(char*)))",
          "new_text": null,
          "old_line_content": "            assert(c->randlen < (signed)(sizeof(c->randptr)/sizeof(char*)));",
          "new_line_content": "        char *p = c->obuf;",
          "content_same": false
        },
        {
          "line": 285,
          "old_api": "aeCreateFileEvent",
          "new_api": null,
          "old_text": "aeCreateFileEvent(config.el,c->context->fd,AE_WRITABLE,writeHandler,c)",
          "new_text": null,
          "old_line_content": "    aeCreateFileEvent(config.el,c->context->fd,AE_WRITABLE,writeHandler,c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 286,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(config.clients,c)",
          "new_text": null,
          "old_line_content": "    listAddNodeTail(config.clients,c);",
          "new_line_content": "/*    redisSetReplyObjectFunctions(c->context,NULL); */",
          "content_same": false
        },
        {
          "line": 295,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->obuf)",
          "new_text": null,
          "old_line_content": "        createClient(c->obuf,sdslen(c->obuf)/config.pipeline);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 299,
          "old_api": "usleep",
          "new_api": null,
          "old_text": "usleep(50000)",
          "new_text": null,
          "old_line_content": "            usleep(50000);",
          "new_line_content": "        /* Listen backlog is quite limited on most systems */",
          "content_same": false
        },
        {
          "line": 315,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"====== %s ======\\n\", config.title)",
          "new_text": null,
          "old_line_content": "        printf(\"====== %s ======\\n\", config.title);",
          "new_line_content": "    reqpersec = (float)config.requests_finished/((float)config.totlatency/1000);",
          "content_same": false
        },
        {
          "line": 316,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"  %d requests completed in %.2f seconds\\n\", config.requests_finished,\n            (float)config.totlatency/1000)",
          "new_text": null,
          "old_line_content": "        printf(\"  %d requests completed in %.2f seconds\\n\", config.requests_finished,",
          "new_line_content": "    if (!config.quiet && !config.csv) {",
          "content_same": false
        },
        {
          "line": 319,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"  %d bytes payload\\n\", config.datasize)",
          "new_text": null,
          "old_line_content": "        printf(\"  %d bytes payload\\n\", config.datasize);",
          "new_line_content": "            (float)config.totlatency/1000);",
          "content_same": false
        },
        {
          "line": 328,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"%.2f%% <= %d milliseconds\\n\", perc, curlat)",
          "new_text": null,
          "old_line_content": "                printf(\"%.2f%% <= %d milliseconds\\n\", perc, curlat);",
          "new_line_content": "                curlat = config.latency[i]/1000;",
          "content_same": false
        },
        {
          "line": 331,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"%.2f requests per second\\n\\n\", reqpersec)",
          "new_text": null,
          "old_line_content": "        printf(\"%.2f requests per second\\n\\n\", reqpersec);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 346,
          "old_api": "createClient",
          "new_api": null,
          "old_text": "createClient(cmd,len)",
          "new_text": null,
          "old_line_content": "    c = createClient(cmd,len);",
          "new_line_content": "    config.requests_finished = 0;",
          "content_same": false
        },
        {
          "line": 347,
          "old_api": "createMissingClients",
          "new_api": null,
          "old_text": "createMissingClients(c)",
          "new_text": null,
          "old_line_content": "    createMissingClients(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 350,
          "old_api": "aeMain",
          "new_api": null,
          "old_text": "aeMain(config.el)",
          "new_text": null,
          "old_line_content": "    aeMain(config.el);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 354,
          "old_api": "freeAllClients",
          "new_api": null,
          "old_text": "freeAllClients()",
          "new_text": null,
          "old_line_content": "    freeAllClients();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 366,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(argv[i],\"-c\")",
          "new_text": null,
          "old_line_content": "        if (!strcmp(argv[i],\"-c\")) {",
          "new_line_content": "        lastarg = (i == (argc-1));",
          "content_same": false
        },
        {
          "line": 369,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(argv[i],\"-n\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcmp(argv[i],\"-n\")) {",
          "new_line_content": "            if (lastarg) goto invalid;",
          "content_same": false
        },
        {
          "line": 372,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(argv[i],\"-k\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcmp(argv[i],\"-k\")) {",
          "new_line_content": "            if (lastarg) goto invalid;",
          "content_same": false
        },
        {
          "line": 375,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(argv[i],\"-h\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcmp(argv[i],\"-h\")) {",
          "new_line_content": "            if (lastarg) goto invalid;",
          "content_same": false
        },
        {
          "line": 378,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(argv[i],\"-p\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcmp(argv[i],\"-p\")) {",
          "new_line_content": "            if (lastarg) goto invalid;",
          "content_same": false
        },
        {
          "line": 381,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(argv[i],\"-s\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcmp(argv[i],\"-s\")) {",
          "new_line_content": "            if (lastarg) goto invalid;",
          "content_same": false
        },
        {
          "line": 384,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(argv[i],\"-d\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcmp(argv[i],\"-d\")) {",
          "new_line_content": "            if (lastarg) goto invalid;",
          "content_same": false
        },
        {
          "line": 389,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(argv[i],\"-P\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcmp(argv[i],\"-P\")) {",
          "new_line_content": "            if (config.datasize < 1) config.datasize=1;",
          "content_same": false
        },
        {
          "line": 396,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(argv[++i])",
          "new_text": null,
          "old_line_content": "            config.randomkeys_keyspacelen = atoi(argv[++i]);",
          "new_line_content": "            if (lastarg) goto invalid;",
          "content_same": false
        },
        {
          "line": 399,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(argv[i],\"-q\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcmp(argv[i],\"-q\")) {",
          "new_line_content": "            if (config.randomkeys_keyspacelen < 0)",
          "content_same": false
        },
        {
          "line": 414,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\",\")",
          "new_text": null,
          "old_line_content": "            config.tests = sdsnew(\",\");",
          "new_line_content": "             * for \",testname,\" will always get a match if the test is",
          "content_same": false
        },
        {
          "line": 415,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(config.tests,(char*)argv[++i])",
          "new_text": null,
          "old_line_content": "            config.tests = sdscat(config.tests,(char*)argv[++i]);",
          "new_line_content": "             * enabled. */",
          "content_same": false
        },
        {
          "line": 433,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"Invalid option \\\"%s\\\" or option argument missing\\n\\n\",argv[i])",
          "new_text": null,
          "old_line_content": "    printf(\"Invalid option \\\"%s\\\" or option argument missing\\n\\n\",argv[i]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 436,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\n\"Usage: redis-benchmark [-h <host>] [-p <port>] [-c <clients>] [-n <requests]> [-k <boolean>]\\n\\n\"\n\" -h <hostname>      Server hostname (default 127.0.0.1)\\n\"\n\" -p <port>          Server port (default 6379)\\n\"\n\" -s <socket>        Server socket (overrides host and port)\\n\"\n\" -c <clients>       Number of parallel connections (default 50)\\n\"\n\" -n <requests>      Total number of requests (default 10000)\\n\"\n\" -d <size>          Data size of SET/GET value in bytes (default 2)\\n\"\n\" -k <boolean>       1=keep alive 0=reconnect (default 1)\\n\"\n\" -r <keyspacelen>   Use random keys for SET/GET/INCR, random values for SADD\\n\"\n\"  Using this option the benchmark will get/set keys\\n\"\n\"  in the form mykey_rand:000000012456 instead of constant\\n\"\n\"  keys, the <keyspacelen> argument determines the max\\n\"\n\"  number of values for the random number. For instance\\n\"\n\"  if set to 10 only rand:000000000000 - rand:000000000009\\n\"\n\"  range will be allowed.\\n\"\n\" -P <numreq>        Pipeline <numreq> requests. Default 1 (no pipeline).\\n\"\n\" -q                 Quiet. Just show query/sec values\\n\"\n\" --csv              Output in CSV format\\n\"\n\" -l                 Loop. Run the tests forever\\n\"\n\" -t <tests>         Only run the comma separated list of tests. The test\\n\"\n\"                    names are the same as the ones produced as output.\\n\"\n\" -I                 Idle mode. Just open N idle connections and wait.\\n\\n\"\n\"Examples:\\n\\n\"\n\" Run the benchmark with the default configuration against 127.0.0.1:6379:\\n\"\n\"   $ redis-benchmark\\n\\n\"\n\" Use 20 parallel clients, for a total of 100k requests, against 192.168.1.1:\\n\"\n\"   $ redis-benchmark -h 192.168.1.1 -p 6379 -n 100000 -c 20\\n\\n\"\n\" Fill 127.0.0.1:6379 with about 1 million keys only using the SET test:\\n\"\n\"   $ redis-benchmark -t set -n 1000000 -r 100000000\\n\\n\"\n\" Benchmark 127.0.0.1:6379 for a few commands producing CSV output:\\n\"\n\"   $ redis-benchmark -t ping,set,get -n 100000 --csv\\n\\n\"\n\" Fill a list with 10000 random elements:\\n\"\n\"   $ redis-benchmark -r 10000 -n 10000 lpush mylist ele:rand:000000000000\\n\\n\"\n    )",
          "new_text": null,
          "old_line_content": "    printf(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 471,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(exit_status)",
          "new_text": null,
          "old_line_content": "    exit(exit_status);",
          "new_line_content": "\"   $ redis-benchmark -r 10000 -n 10000 lpush mylist ele:rand:000000000000\\n\\n\"",
          "content_same": false
        },
        {
          "line": 475,
          "old_api": "REDIS_NOTUSED",
          "new_api": null,
          "old_text": "REDIS_NOTUSED(eventLoop)",
          "new_text": null,
          "old_line_content": "    REDIS_NOTUSED(eventLoop);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 476,
          "old_api": "REDIS_NOTUSED",
          "new_api": null,
          "old_text": "REDIS_NOTUSED(id)",
          "new_text": null,
          "old_line_content": "    REDIS_NOTUSED(id);",
          "new_line_content": "int showThroughput(struct aeEventLoop *eventLoop, long long id, void *clientData) {",
          "content_same": false
        },
        {
          "line": 480,
          "old_api": "mstime",
          "new_api": null,
          "old_text": "mstime()",
          "new_text": null,
          "old_line_content": "    float dt = (float)(mstime()-config.start)/1000.0;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 483,
          "old_api": "fflush",
          "new_api": null,
          "old_text": "fflush(stdout)",
          "new_text": null,
          "old_line_content": "    fflush(stdout);",
          "new_line_content": "    float rps = (float)config.requests_finished/dt;",
          "content_same": false
        },
        {
          "line": 491,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(name)",
          "new_text": null,
          "old_line_content": "    int l = strlen(name);",
          "new_line_content": "int test_is_selected(char *name) {",
          "content_same": false
        },
        {
          "line": 495,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(buf+1,name,l)",
          "new_text": null,
          "old_line_content": "    memcpy(buf+1,name,l);",
          "new_line_content": "    if (config.tests == NULL) return 1;",
          "content_same": false
        },
        {
          "line": 498,
          "old_api": "strstr",
          "new_api": null,
          "old_text": "strstr(config.tests,buf)",
          "new_text": null,
          "old_line_content": "    return strstr(config.tests,buf) != NULL;",
          "new_line_content": "    buf[l+1] = ',';",
          "content_same": false
        },
        {
          "line": 508,
          "old_api": "signal",
          "new_api": null,
          "old_text": "signal(SIGHUP, SIG_IGN)",
          "new_text": null,
          "old_line_content": "    signal(SIGHUP, SIG_IGN);",
          "new_line_content": "    client c;",
          "content_same": false
        },
        {
          "line": 509,
          "old_api": "signal",
          "new_api": null,
          "old_text": "signal(SIGPIPE, SIG_IGN)",
          "new_text": null,
          "old_line_content": "    signal(SIGPIPE, SIG_IGN);",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 48,
      "total_additions": 87,
      "total_deletions": 87,
      "total_api_changes": 222
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 2,
        "api_related_lines": 222,
        "non_api_lines": 1,
        "non_api_line_numbers": [
          266
        ]
      }
    },
    "api_calls_before": 215,
    "api_calls_after": 215,
    "diff_info": {
      "added_lines": 2,
      "removed_lines": 0,
      "total_diff_lines": 14
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/137fd86a6133b4a83c2a95215241c9906ec6877f",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/137fd86a6133b4a83c2a95215241c9906ec6877f/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/137fd86a6133b4a83c2a95215241c9906ec6877f/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/137fd86a6133b4a83c2a95215241c9906ec6877f/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 615,
          "old_api": "zfree",
          "new_api": "RM_FreeCallReply",
          "old_text": "zfree(ctx->amqueue)",
          "new_text": "RM_FreeCallReply(ptr)",
          "old_line_content": "    zfree(ctx->amqueue);",
          "new_line_content": "        case REDISMODULE_AM_REPLY: RM_FreeCallReply(ptr); break;",
          "content_same": false
        },
        {
          "line": 913,
          "old_api": "moduleCreateArgvFromUserFormat",
          "new_api": "lookupCommandByCString",
          "old_text": "moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap)",
          "new_text": "lookupCommandByCString((char*)cmdname)",
          "old_line_content": "    argv = moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap);",
          "new_line_content": "    cmd = lookupCommandByCString((char*)cmdname);",
          "content_same": false
        },
        {
          "line": 918,
          "old_api": "moduleReplicateMultiIfNeeded",
          "new_api": "moduleCreateArgvFromUserFormat",
          "old_text": "moduleReplicateMultiIfNeeded(ctx)",
          "new_text": "moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap)",
          "old_line_content": "    moduleReplicateMultiIfNeeded(ctx);",
          "new_line_content": "    argv = moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap);",
          "content_same": false
        },
        {
          "line": 919,
          "old_api": "alsoPropagate",
          "new_api": "va_end",
          "old_text": "alsoPropagate(cmd,ctx->client->db->id,argv,argc,\n        PROPAGATE_AOF|PROPAGATE_REPL)",
          "new_text": "va_end(ap)",
          "old_line_content": "    alsoPropagate(cmd,ctx->client->db->id,argv,argc,",
          "new_line_content": "    va_end(ap);",
          "content_same": false
        },
        {
          "line": 923,
          "old_api": "decrRefCount",
          "new_api": "moduleReplicateMultiIfNeeded",
          "old_text": "decrRefCount(argv[j])",
          "new_text": "moduleReplicateMultiIfNeeded(ctx)",
          "old_line_content": "    for (j = 0; j < argc; j++) decrRefCount(argv[j]);",
          "new_line_content": "    moduleReplicateMultiIfNeeded(ctx);",
          "content_same": false
        },
        {
          "line": 924,
          "old_api": "zfree",
          "new_api": "alsoPropagate",
          "old_text": "zfree(argv)",
          "new_text": "alsoPropagate(cmd,ctx->client->db->id,argv,argc,\n        PROPAGATE_AOF|PROPAGATE_REPL)",
          "old_line_content": "    zfree(argv);",
          "new_line_content": "    alsoPropagate(cmd,ctx->client->db->id,argv,argc,",
          "content_same": false
        },
        {
          "line": 1023,
          "old_api": "autoMemoryAdd",
          "new_api": "incrRefCount",
          "old_text": "autoMemoryAdd(ctx,REDISMODULE_AM_KEY,kp)",
          "new_text": "incrRefCount(keyname)",
          "old_line_content": "    autoMemoryAdd(ctx,REDISMODULE_AM_KEY,kp);",
          "new_line_content": "    incrRefCount(keyname);",
          "content_same": false
        },
        {
          "line": 1035,
          "old_api": "zfree",
          "new_api": "signalModifiedKey",
          "old_text": "zfree(key)",
          "new_text": "signalModifiedKey(key->db,key->key)",
          "old_line_content": "    zfree(key);",
          "new_line_content": "    if (key->mode & REDISMODULE_WRITE) signalModifiedKey(key->db,key->key);",
          "content_same": false
        },
        {
          "line": 1211,
          "old_api": "dbUnshareStringValue",
          "new_api": "setKey",
          "old_text": "dbUnshareStringValue(key->db, key->key, key->value)",
          "new_text": "setKey(key->db,key->key,o)",
          "old_line_content": "        key->value = dbUnshareStringValue(key->db, key->key, key->value);",
          "new_line_content": "        setKey(key->db,key->key,o);",
          "content_same": false
        },
        {
          "line": 1216,
          "old_api": "sdsrange",
          "new_api": "dbUnshareStringValue",
          "old_text": "sdsrange(key->value->ptr,0,newlen-1)",
          "new_text": "dbUnshareStringValue(key->db, key->key, key->value)",
          "old_line_content": "            sdsrange(key->value->ptr,0,newlen-1);",
          "new_line_content": "        key->value = dbUnshareStringValue(key->db, key->key, key->value);",
          "content_same": false
        },
        {
          "line": 1219,
          "old_api": "sdsRemoveFreeSpace",
          "new_api": "sdsgrowzero",
          "old_text": "sdsRemoveFreeSpace(key->value->ptr)",
          "new_text": "sdsgrowzero(key->value->ptr,newlen)",
          "old_line_content": "                key->value->ptr = sdsRemoveFreeSpace(key->value->ptr);",
          "new_line_content": "            key->value->ptr = sdsgrowzero(key->value->ptr,newlen);",
          "content_same": false
        },
        {
          "line": 1258,
          "old_api": "autoMemoryAdd",
          "new_api": "listTypePop",
          "old_text": "autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,decoded)",
          "new_text": "listTypePop(key->value,\n        (where == REDISMODULE_LIST_HEAD) ? QUICKLIST_HEAD : QUICKLIST_TAIL)",
          "old_line_content": "    autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,decoded);",
          "new_line_content": "    robj *ele = listTypePop(key->value,",
          "content_same": false
        },
        {
          "line": 1322,
          "old_api": "RM_ZsetAddFlagsFromCoreFlags",
          "new_api": "RM_ZsetAddFlagsToCoreFlags",
          "old_text": "RM_ZsetAddFlagsFromCoreFlags(flags)",
          "new_text": "RM_ZsetAddFlagsToCoreFlags(*flagsptr)",
          "old_line_content": "    if (flagsptr) *flagsptr = RM_ZsetAddFlagsFromCoreFlags(flags);",
          "new_line_content": "    if (flagsptr) flags = RM_ZsetAddFlagsToCoreFlags(*flagsptr);",
          "content_same": false
        },
        {
          "line": 1452,
          "old_api": "zslFirstInRange",
          "new_api": "zzlFirstInRange",
          "old_text": "zslFirstInRange(zsl,zrs)",
          "new_text": "zzlFirstInRange(key->value->ptr,zrs)",
          "old_line_content": "        key->zcurrent = first ? zslFirstInRange(zsl,zrs) :",
          "new_line_content": "        key->zcurrent = first ? zzlFirstInRange(key->value->ptr,zrs) :",
          "content_same": false
        },
        {
          "line": 1453,
          "old_api": "zslLastInRange",
          "new_api": "zzlLastInRange",
          "old_text": "zslLastInRange(zsl,zrs)",
          "new_text": "zzlLastInRange(key->value->ptr,zrs)",
          "old_line_content": "                                zslLastInRange(zsl,zrs);",
          "new_line_content": "                                zzlLastInRange(key->value->ptr,zrs);",
          "content_same": false
        },
        {
          "line": 1516,
          "old_api": "zslFirstInLexRange",
          "new_api": "zzlFirstInLexRange",
          "old_text": "zslFirstInLexRange(zsl,zlrs)",
          "new_text": "zzlFirstInLexRange(key->value->ptr,zlrs)",
          "old_line_content": "        key->zcurrent = first ? zslFirstInLexRange(zsl,zlrs) :",
          "new_line_content": "        key->zcurrent = first ? zzlFirstInLexRange(key->value->ptr,zlrs) :",
          "content_same": false
        },
        {
          "line": 1517,
          "old_api": "zslLastInLexRange",
          "new_api": "zzlLastInLexRange",
          "old_text": "zslLastInLexRange(zsl,zlrs)",
          "new_text": "zzlLastInLexRange(key->value->ptr,zlrs)",
          "old_line_content": "                                zslLastInLexRange(zsl,zlrs);",
          "new_line_content": "                                zzlLastInLexRange(key->value->ptr,zlrs);",
          "content_same": false
        },
        {
          "line": 1563,
          "old_api": "createObject",
          "new_api": "ziplistGetObject",
          "old_text": "createObject(OBJ_STRING,ele)",
          "new_text": "ziplistGetObject(eptr)",
          "old_line_content": "        str = createObject(OBJ_STRING,ele);",
          "new_line_content": "        sds ele = ziplistGetObject(eptr);",
          "content_same": false
        },
        {
          "line": 1625,
          "old_api": "zslLexValueLteMax",
          "new_api": "zslValueLteMax",
          "old_text": "zslLexValueLteMax(ln->ele,&key->zlrs)",
          "new_text": "zslValueLteMax(ln->score,&key->zrs)",
          "old_line_content": "                if (!zslLexValueLteMax(ln->ele,&key->zlrs)) {",
          "new_line_content": "                !zslValueLteMax(ln->score,&key->zrs))",
          "content_same": false
        },
        {
          "line": 1688,
          "old_api": "zslLexValueGteMin",
          "new_api": "zslValueGteMin",
          "old_text": "zslLexValueGteMin(prev->ele,&key->zlrs)",
          "new_text": "zslValueGteMin(ln->score,&key->zrs)",
          "old_line_content": "                if (!zslLexValueGteMin(prev->ele,&key->zlrs)) {",
          "new_line_content": "                !zslValueGteMin(ln->score,&key->zrs))",
          "content_same": false
        },
        {
          "line": 1767,
          "old_api": "va_arg",
          "new_api": "va_start",
          "old_text": "va_arg(ap,char*)",
          "new_text": "va_start(ap, flags)",
          "old_line_content": "            char *cfield = va_arg(ap,char*);",
          "new_line_content": "    va_start(ap, flags);",
          "content_same": false
        },
        {
          "line": 1774,
          "old_api": "va_arg",
          "new_api": "strlen",
          "old_text": "va_arg(ap,RedisModuleString*)",
          "new_text": "strlen(cfield)",
          "old_line_content": "        value = va_arg(ap,RedisModuleString*);",
          "new_line_content": "            field = createRawStringObject(cfield,strlen(cfield));",
          "content_same": false
        },
        {
          "line": 1886,
          "old_api": "decrRefCount",
          "new_api": "va_arg",
          "old_text": "decrRefCount(*valueptr)",
          "new_text": "va_arg(ap,RedisModuleString**)",
          "old_line_content": "                    decrRefCount(*valueptr);",
          "new_line_content": "            valueptr = va_arg(ap,RedisModuleString**);",
          "content_same": false
        },
        {
          "line": 1890,
          "old_api": "autoMemoryAdd",
          "new_api": "getDecodedObject",
          "old_text": "autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,*valueptr)",
          "new_text": "getDecodedObject(*valueptr)",
          "old_line_content": "                    autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,*valueptr);",
          "new_line_content": "                    robj *decoded = getDecodedObject(*valueptr);",
          "content_same": false
        },
        {
          "line": 2148,
          "old_api": "incrRefCount",
          "new_api": "va_arg",
          "old_text": "incrRefCount(obj)",
          "new_text": "va_arg(ap,char*)",
          "old_line_content": "            incrRefCount(obj);",
          "new_line_content": "            char *cstr = va_arg(ap,char*);",
          "content_same": false
        },
        {
          "line": 2155,
          "old_api": "createStringObjectFromLongLong",
          "new_api": "va_arg",
          "old_text": "createStringObjectFromLongLong(ll)",
          "new_text": "va_arg(ap,char*)",
          "old_line_content": "            argv[argc++] = createStringObjectFromLongLong(ll);",
          "new_line_content": "            char *buf = va_arg(ap,char*);",
          "content_same": false
        },
        {
          "line": 2263,
          "old_api": "sdsnewlen",
          "new_api": "call",
          "old_text": "sdsnewlen(c->buf,c->bufpos)",
          "new_text": "call(c,call_flags)",
          "old_line_content": "    sds proto = sdsnewlen(c->buf,c->bufpos);",
          "new_line_content": "    call(c,call_flags);",
          "content_same": false
        },
        {
          "line": 2268,
          "old_api": "sdscatsds",
          "new_api": "sdsnewlen",
          "old_text": "sdscatsds(proto,o)",
          "new_text": "sdsnewlen(c->buf,c->bufpos)",
          "old_line_content": "        proto = sdscatsds(proto,o);",
          "new_line_content": "    sds proto = sdsnewlen(c->buf,c->bufpos);",
          "content_same": false
        },
        {
          "line": 2271,
          "old_api": "moduleCreateCallReplyFromProto",
          "new_api": "listFirst",
          "old_text": "moduleCreateCallReplyFromProto(ctx,proto)",
          "new_text": "listFirst(c->reply)",
          "old_line_content": "    reply = moduleCreateCallReplyFromProto(ctx,proto);",
          "new_line_content": "        sds o = listNodeValue(listFirst(c->reply));",
          "content_same": false
        },
        {
          "line": 2299,
          "old_api": "strcmp",
          "new_api": "strlen",
          "old_text": "strcmp(key1,key2)",
          "new_text": "strlen((char*)key)",
          "old_line_content": "    return strcmp(key1,key2) == 0;",
          "new_line_content": "    return dictGenHashFunction((unsigned char*)key, strlen((char*)key));",
          "content_same": false
        },
        {
          "line": 2325,
          "old_api": "REGISTER_API",
          "new_api": "dictCreate",
          "old_text": "REGISTER_API(ReplyWithError)",
          "new_text": "dictCreate(&moduleAPIDictType,NULL)",
          "old_line_content": "    REGISTER_API(ReplyWithError);",
          "new_line_content": "    server.moduleapi = dictCreate(&moduleAPIDictType,NULL);",
          "content_same": false
        },
        {
          "line": 2389,
          "old_api": "listCreate",
          "new_api": "REGISTER_API",
          "old_text": "listCreate()",
          "new_text": "REGISTER_API(PoolAlloc)",
          "old_line_content": "    server.loadmodule_queue = listCreate();",
          "new_line_content": "    REGISTER_API(PoolAlloc);",
          "content_same": false
        },
        {
          "line": 2436,
          "old_api": "dlsym",
          "new_api": "dlopen",
          "old_text": "dlsym(handle,\"RedisModule_OnLoad\")",
          "new_text": "dlopen(path,RTLD_NOW|RTLD_LOCAL)",
          "old_line_content": "    onload = (int (*)(void *))(unsigned long) dlsym(handle,\"RedisModule_OnLoad\");",
          "new_line_content": "    handle = dlopen(path,RTLD_NOW|RTLD_LOCAL);",
          "content_same": false
        },
        {
          "line": 2438,
          "old_api": "serverLog",
          "new_api": "dlerror",
          "old_text": "serverLog(LL_WARNING,\n            \"Module %s does not export RedisModule_OnLoad() \"\n            \"symbol. Module not loaded.\",path)",
          "new_text": "dlerror()",
          "old_line_content": "        serverLog(LL_WARNING,",
          "new_line_content": "        serverLog(LL_WARNING, \"Module %s failed to load: %s\", path, dlerror());",
          "content_same": false
        },
        {
          "line": 2443,
          "old_api": "onload",
          "new_api": "serverLog",
          "old_text": "onload((void*)&ctx)",
          "new_text": "serverLog(LL_WARNING,\n            \"Module %s does not export RedisModule_OnLoad() \"\n            \"symbol. Module not loaded.\",path)",
          "old_line_content": "    if (onload((void*)&ctx) == REDISMODULE_ERR) {",
          "new_line_content": "        serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 2488,
          "old_api": "dictReleaseIterator",
          "new_api": "zfree",
          "old_text": "dictReleaseIterator(di)",
          "new_text": "zfree(cp->rediscmd)",
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "                zfree(cp->rediscmd);",
          "content_same": false
        },
        {
          "line": 2493,
          "old_api": "dlclose",
          "new_api": "dictReleaseIterator",
          "old_text": "dlclose(module->handle)",
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "    if (dlclose(module->handle) == -1) {",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 2522,
          "old_api": "strcasecmp",
          "new_api": "moduleLoad",
          "old_text": "strcasecmp(subcmd,\"unload\")",
          "new_text": "moduleLoad(c->argv[2]->ptr)",
          "old_line_content": "    } else if (!strcasecmp(subcmd,\"unload\") && c->argc == 3) {",
          "new_line_content": "        if (moduleLoad(c->argv[2]->ptr) == C_OK)",
          "content_same": false
        },
        {
          "line": 2523,
          "old_api": "moduleUnload",
          "new_api": "addReply",
          "old_text": "moduleUnload(c->argv[2]->ptr)",
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "        if (moduleUnload(c->argv[2]->ptr) == C_OK)",
          "new_line_content": "            addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 2537,
          "old_api": "dictNext",
          "new_api": "strcasecmp",
          "old_text": "dictNext(di)",
          "new_text": "strcasecmp(subcmd,\"list\")",
          "old_line_content": "        while ((de = dictNext(di)) != NULL) {",
          "new_line_content": "    } else if (!strcasecmp(subcmd,\"list\") && c->argc == 2) {",
          "content_same": false
        },
        {
          "line": 2538,
          "old_api": "dictGetKey",
          "new_api": "dictGetIterator",
          "old_text": "dictGetKey(de)",
          "new_text": "dictGetIterator(modules)",
          "old_line_content": "            sds name = dictGetKey(de);",
          "new_line_content": "        dictIterator *di = dictGetIterator(modules);",
          "content_same": false
        },
        {
          "line": 2541,
          "old_api": "addReplyBulkCString",
          "new_api": "dictSize",
          "old_text": "addReplyBulkCString(c,\"name\")",
          "new_text": "dictSize(modules)",
          "old_line_content": "            addReplyBulkCString(c,\"name\");",
          "new_line_content": "        addReplyMultiBulkLen(c,dictSize(modules));",
          "content_same": false
        },
        {
          "line": 2542,
          "old_api": "sdslen",
          "new_api": "dictNext",
          "old_text": "sdslen(name)",
          "new_text": "dictNext(di)",
          "old_line_content": "            addReplyBulkCBuffer(c,name,sdslen(name));",
          "new_line_content": "        while ((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 2543,
          "old_api": "addReplyBulkCString",
          "new_api": "dictGetKey",
          "old_text": "addReplyBulkCString(c,\"ver\")",
          "new_text": "dictGetKey(de)",
          "old_line_content": "            addReplyBulkCString(c,\"ver\");",
          "new_line_content": "            sds name = dictGetKey(de);",
          "content_same": false
        },
        {
          "line": 2544,
          "old_api": "addReplyLongLong",
          "new_api": "dictGetVal",
          "old_text": "addReplyLongLong(c,module->ver)",
          "new_text": "dictGetVal(de)",
          "old_line_content": "            addReplyLongLong(c,module->ver);",
          "new_line_content": "            struct RedisModule *module = dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 2546,
          "old_api": "dictReleaseIterator",
          "new_api": "addReplyBulkCString",
          "old_text": "dictReleaseIterator(di)",
          "new_text": "addReplyBulkCString(c,\"name\")",
          "old_line_content": "        dictReleaseIterator(di);",
          "new_line_content": "            addReplyBulkCString(c,\"name\");",
          "content_same": false
        },
        {
          "line": 2548,
          "old_api": "addReply",
          "new_api": "addReplyBulkCString",
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": "addReplyBulkCString(c,\"ver\")",
          "old_line_content": "        addReply(c,shared.syntaxerr);",
          "new_line_content": "            addReplyBulkCString(c,\"ver\");",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1027,
          "old_api": null,
          "new_api": "RM_ZsetRangeStop",
          "old_text": null,
          "new_text": "RM_ZsetRangeStop(kp)",
          "old_line_content": "/* Close a key handle. */",
          "new_line_content": "    RM_ZsetRangeStop(kp);",
          "content_same": false
        },
        {
          "line": 1028,
          "old_api": null,
          "new_api": "autoMemoryAdd",
          "old_text": null,
          "new_text": "autoMemoryAdd(ctx,REDISMODULE_AM_KEY,kp)",
          "old_line_content": "void RM_CloseKey(RedisModuleKey *key) {",
          "new_line_content": "    autoMemoryAdd(ctx,REDISMODULE_AM_KEY,kp);",
          "content_same": false
        },
        {
          "line": 2053,
          "old_api": null,
          "new_api": "RM_FreeCallReply_Rec",
          "old_text": null,
          "new_text": "RM_FreeCallReply_Rec(reply,0)",
          "old_line_content": "int RM_CallReplyType(RedisModuleCallReply *reply) {",
          "new_line_content": "    RM_FreeCallReply_Rec(reply,0);",
          "content_same": false
        },
        {
          "line": 2054,
          "old_api": null,
          "new_api": "autoMemoryFreed",
          "old_text": null,
          "new_text": "autoMemoryFreed(reply->ctx,REDISMODULE_AM_REPLY,reply)",
          "old_line_content": "    return reply->type;",
          "new_line_content": "    autoMemoryFreed(reply->ctx,REDISMODULE_AM_REPLY,reply);",
          "content_same": false
        },
        {
          "line": 1544,
          "old_api": null,
          "new_api": "zsetInitLexRange",
          "old_text": null,
          "new_text": "zsetInitLexRange(key,min,max,1)",
          "old_line_content": "int RM_ZsetLastInLexRange(RedisModuleKey *key, RedisModuleString *min, RedisModuleString *max) {",
          "new_line_content": "    return zsetInitLexRange(key,min,max,1);",
          "content_same": false
        },
        {
          "line": 1037,
          "old_api": null,
          "new_api": "RM_ZsetRangeStop",
          "old_text": null,
          "new_text": "RM_ZsetRangeStop(key)",
          "old_line_content": "",
          "new_line_content": "    RM_ZsetRangeStop(key);",
          "content_same": false
        },
        {
          "line": 1038,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(key->key)",
          "old_line_content": "/* Return the type of the key. If the key pointer is NULL then",
          "new_line_content": "    decrRefCount(key->key);",
          "content_same": false
        },
        {
          "line": 1039,
          "old_api": null,
          "new_api": "autoMemoryFreed",
          "old_text": null,
          "new_text": "autoMemoryFreed(key->ctx,REDISMODULE_AM_KEY,key)",
          "old_line_content": " * REDISMODULE_KEYTYPE_EMPTY is returned. */",
          "new_line_content": "    autoMemoryFreed(key->ctx,REDISMODULE_AM_KEY,key);",
          "content_same": false
        },
        {
          "line": 2064,
          "old_api": null,
          "new_api": "moduleParseCallReply",
          "old_text": null,
          "new_text": "moduleParseCallReply(reply)",
          "old_line_content": "        return reply->len;",
          "new_line_content": "    moduleParseCallReply(reply);",
          "content_same": false
        },
        {
          "line": 1040,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(key)",
          "old_line_content": "int RM_KeyType(RedisModuleKey *key) {",
          "new_line_content": "    zfree(key);",
          "content_same": false
        },
        {
          "line": 1550,
          "old_api": null,
          "new_api": "zsetInitLexRange",
          "old_text": null,
          "new_text": "zsetInitLexRange(key,min,max,0)",
          "old_line_content": " * element. */",
          "new_line_content": "    return zsetInitLexRange(key,min,max,0);",
          "content_same": false
        },
        {
          "line": 1565,
          "old_api": null,
          "new_api": "ziplistNext",
          "old_text": null,
          "new_text": "ziplistNext(key->value->ptr,eptr)",
          "old_line_content": "        zskiplistNode *ln = key->zcurrent;",
          "new_line_content": "            sptr = ziplistNext(key->value->ptr,eptr);",
          "content_same": false
        },
        {
          "line": 2078,
          "old_api": null,
          "new_api": "moduleParseCallReply",
          "old_text": null,
          "new_text": "moduleParseCallReply(reply)",
          "old_line_content": "",
          "new_line_content": "    moduleParseCallReply(reply);",
          "content_same": false
        },
        {
          "line": 1566,
          "old_api": null,
          "new_api": "zzlGetScore",
          "old_text": null,
          "new_text": "zzlGetScore(sptr)",
          "old_line_content": "        if (score) *score = ln->score;",
          "new_line_content": "            *score = zzlGetScore(sptr);",
          "content_same": false
        },
        {
          "line": 1568,
          "old_api": null,
          "new_api": "createObject",
          "old_text": null,
          "new_text": "createObject(OBJ_STRING,ele)",
          "old_line_content": "    } else {",
          "new_line_content": "        str = createObject(OBJ_STRING,ele);",
          "content_same": false
        },
        {
          "line": 1572,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(ln->ele)",
          "old_line_content": "    return str;",
          "new_line_content": "        str = createStringObject(ln->ele,sdslen(ln->ele));",
          "content_same": false
        },
        {
          "line": 2086,
          "old_api": null,
          "new_api": "moduleParseCallReply",
          "old_text": null,
          "new_text": "moduleParseCallReply(reply)",
          "old_line_content": "/* Return the pointer and length of a string or error reply. */",
          "new_line_content": "    moduleParseCallReply(reply);",
          "content_same": false
        },
        {
          "line": 1574,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unsupported zset encoding\")",
          "old_line_content": "",
          "new_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "content_same": false
        },
        {
          "line": 1576,
          "old_api": null,
          "new_api": "autoMemoryAdd",
          "old_text": null,
          "new_text": "autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,str)",
          "old_line_content": " * a next element, 0 if we are already at the latest element or the range",
          "new_line_content": "    autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,str);",
          "content_same": false
        },
        {
          "line": 1067,
          "old_api": null,
          "new_api": "stringObjectLen",
          "old_text": null,
          "new_text": "stringObjectLen(key->value)",
          "old_line_content": "    default: return 0;",
          "new_line_content": "    case OBJ_STRING: return stringObjectLen(key->value);",
          "content_same": false
        },
        {
          "line": 1068,
          "old_api": null,
          "new_api": "listTypeLength",
          "old_text": null,
          "new_text": "listTypeLength(key->value)",
          "old_line_content": "    }",
          "new_line_content": "    case OBJ_LIST: return listTypeLength(key->value);",
          "content_same": false
        },
        {
          "line": 2093,
          "old_api": null,
          "new_api": "moduleParseCallReply",
          "old_text": null,
          "new_text": "moduleParseCallReply(reply)",
          "old_line_content": "}",
          "new_line_content": "    moduleParseCallReply(reply);",
          "content_same": false
        },
        {
          "line": 1069,
          "old_api": null,
          "new_api": "setTypeSize",
          "old_text": null,
          "new_text": "setTypeSize(key->value)",
          "old_line_content": "}",
          "new_line_content": "    case OBJ_SET: return setTypeSize(key->value);",
          "content_same": false
        },
        {
          "line": 1070,
          "old_api": null,
          "new_api": "zsetLength",
          "old_text": null,
          "new_text": "zsetLength(key->value)",
          "old_line_content": "",
          "new_line_content": "    case OBJ_ZSET: return zsetLength(key->value);",
          "content_same": false
        },
        {
          "line": 1071,
          "old_api": null,
          "new_api": "hashTypeLength",
          "old_text": null,
          "new_text": "hashTypeLength(key->value)",
          "old_line_content": "/* If the key is open for writing, remove it, and setup the key to",
          "new_line_content": "    case OBJ_HASH: return hashTypeLength(key->value);",
          "content_same": false
        },
        {
          "line": 2044,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(reply->proto)",
          "old_line_content": "/* Wrapper for the recursive free reply function. This is needed in order",
          "new_line_content": "        if (reply->proto) sdsfree(reply->proto);",
          "content_same": false
        },
        {
          "line": 1590,
          "old_api": null,
          "new_api": "ziplistNext",
          "old_text": null,
          "new_text": "ziplistNext(zl,eptr)",
          "old_line_content": "        } else {",
          "new_line_content": "        next = ziplistNext(zl,eptr); /* Skip element. */",
          "content_same": false
        },
        {
          "line": 2103,
          "old_api": null,
          "new_api": "moduleParseCallReply",
          "old_text": null,
          "new_text": "moduleParseCallReply(reply)",
          "old_line_content": "    case REDISMODULE_REPLY_INTEGER: {",
          "new_line_content": "    moduleParseCallReply(reply);",
          "content_same": false
        },
        {
          "line": 1591,
          "old_api": null,
          "new_api": "ziplistNext",
          "old_text": null,
          "new_text": "ziplistNext(zl,next)",
          "old_line_content": "            /* Are we still within the range? */",
          "new_line_content": "        if (next) next = ziplistNext(zl,next); /* Skip score. */",
          "content_same": false
        },
        {
          "line": 2107,
          "old_api": null,
          "new_api": "RM_CreateString",
          "old_text": null,
          "new_text": "RM_CreateString(reply->ctx,reply->val.str,reply->len)",
          "old_line_content": "        }",
          "new_line_content": "        return RM_CreateString(reply->ctx,reply->val.str,reply->len);",
          "content_same": false
        },
        {
          "line": 1083,
          "old_api": null,
          "new_api": "dbDelete",
          "old_text": null,
          "new_text": "dbDelete(key->db,key->key)",
          "old_line_content": "",
          "new_line_content": "        dbDelete(key->db,key->key);",
          "content_same": false
        },
        {
          "line": 2110,
          "old_api": null,
          "new_api": "ll2string",
          "old_text": null,
          "new_text": "ll2string(buf,sizeof(buf),reply->val.ll)",
          "old_line_content": "}",
          "new_line_content": "        int len = ll2string(buf,sizeof(buf),reply->val.ll);",
          "content_same": false
        },
        {
          "line": 2111,
          "old_api": null,
          "new_api": "RM_CreateString",
          "old_text": null,
          "new_text": "RM_CreateString(reply->ctx,buf,len)",
          "old_line_content": "",
          "new_line_content": "        return RM_CreateString(reply->ctx,buf,len);",
          "content_same": false
        },
        {
          "line": 1601,
          "old_api": null,
          "new_api": "ziplistNext",
          "old_text": null,
          "new_text": "ziplistNext(zl,next)",
          "old_line_content": "                }",
          "new_line_content": "                next = ziplistNext(zl,next); /* Skip next element. */",
          "content_same": false
        },
        {
          "line": 1602,
          "old_api": null,
          "new_api": "zzlGetScore",
          "old_text": null,
          "new_text": "zzlGetScore(next)",
          "old_line_content": "                next = saved_next;",
          "new_line_content": "                double score = zzlGetScore(next); /* Obtain the next score. */",
          "content_same": false
        },
        {
          "line": 1603,
          "old_api": null,
          "new_api": "zslValueLteMax",
          "old_text": null,
          "new_text": "zslValueLteMax(score,&key->zrs)",
          "old_line_content": "            } else if (key->ztype == REDISMODULE_ZSET_RANGE_LEX) {",
          "new_line_content": "                if (!zslValueLteMax(score,&key->zrs)) {",
          "content_same": false
        },
        {
          "line": 1093,
          "old_api": null,
          "new_api": "getExpire",
          "old_text": null,
          "new_text": "getExpire(key->db,key->key)",
          "old_line_content": "",
          "new_line_content": "    mstime_t expire = getExpire(key->db,key->key);",
          "content_same": false
        },
        {
          "line": 1095,
          "old_api": null,
          "new_api": "mstime",
          "old_text": null,
          "new_text": "mstime()",
          "old_line_content": " * REDISMODULE_NO_EXPIRE is set, the expire is cancelled if there was",
          "new_line_content": "    expire -= mstime();",
          "content_same": false
        },
        {
          "line": 1609,
          "old_api": null,
          "new_api": "zzlLexValueLteMax",
          "old_text": null,
          "new_text": "zzlLexValueLteMax(next,&key->zlrs)",
          "old_line_content": "            key->zcurrent = next;",
          "new_line_content": "                if (!zzlLexValueLteMax(next,&key->zlrs)) {",
          "content_same": false
        },
        {
          "line": 1112,
          "old_api": null,
          "new_api": "mstime",
          "old_text": null,
          "new_text": "mstime()",
          "old_line_content": "    return REDISMODULE_OK;",
          "new_line_content": "        expire += mstime();",
          "content_same": false
        },
        {
          "line": 2137,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(fmt)",
          "old_line_content": "    argc++;",
          "new_line_content": "    argv_size = strlen(fmt)+1; /* +1 because of the command name. */",
          "content_same": false
        },
        {
          "line": 2138,
          "old_api": null,
          "new_api": "zrealloc",
          "old_text": null,
          "new_text": "zrealloc(argv,sizeof(robj*)*argv_size)",
          "old_line_content": "",
          "new_line_content": "    argv = zrealloc(argv,sizeof(robj*)*argv_size);",
          "content_same": false
        },
        {
          "line": 1113,
          "old_api": null,
          "new_api": "setExpire",
          "old_text": null,
          "new_text": "setExpire(key->db,key->key,expire)",
          "old_line_content": "}",
          "new_line_content": "        setExpire(key->db,key->key,expire);",
          "content_same": false
        },
        {
          "line": 1115,
          "old_api": null,
          "new_api": "removeExpire",
          "old_text": null,
          "new_text": "removeExpire(key->db,key->key)",
          "old_line_content": "/* --------------------------------------------------------------------------",
          "new_line_content": "        removeExpire(key->db,key->key);",
          "content_same": false
        },
        {
          "line": 2141,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(cmdname)",
          "old_line_content": "    while(*p) {",
          "new_line_content": "    argv[0] = createStringObject(cmdname,strlen(cmdname));",
          "content_same": false
        },
        {
          "line": 1630,
          "old_api": null,
          "new_api": "zslLexValueLteMax",
          "old_text": null,
          "new_text": "zslLexValueLteMax(ln->ele,&key->zlrs)",
          "old_line_content": "            key->zcurrent = next;",
          "new_line_content": "                if (!zslLexValueLteMax(ln->ele,&key->zlrs)) {",
          "content_same": false
        },
        {
          "line": 2149,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(cstr)",
          "old_line_content": "        } else if (*p == 'b') {",
          "new_line_content": "            argv[argc++] = createStringObject(cstr,strlen(cstr));",
          "content_same": false
        },
        {
          "line": 614,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(ptr)",
          "old_line_content": "    ctx->flags |= REDISMODULE_CTX_AUTO_MEMORY;",
          "new_line_content": "        case REDISMODULE_AM_STRING: decrRefCount(ptr); break;",
          "content_same": false
        },
        {
          "line": 1639,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unsupported zset encoding\")",
          "old_line_content": " * a previous element, 0 if we are already at the first element or the range",
          "new_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "content_same": false
        },
        {
          "line": 616,
          "old_api": null,
          "new_api": "RM_CloseKey",
          "old_text": null,
          "new_text": "RM_CloseKey(ptr)",
          "old_line_content": "    ctx->amqueue = NULL;",
          "new_line_content": "        case REDISMODULE_AM_KEY: RM_CloseKey(ptr); break;",
          "content_same": false
        },
        {
          "line": 2153,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(obj)",
          "old_line_content": "        } else if (*p == 'l') {",
          "new_line_content": "            incrRefCount(obj);",
          "content_same": false
        },
        {
          "line": 1130,
          "old_api": null,
          "new_api": "RM_DeleteKey",
          "old_text": null,
          "new_text": "RM_DeleteKey(key)",
          "old_line_content": "",
          "new_line_content": "    RM_DeleteKey(key);",
          "content_same": false
        },
        {
          "line": 1131,
          "old_api": null,
          "new_api": "setKey",
          "old_text": null,
          "new_text": "setKey(key->db,key->key,str)",
          "old_line_content": "/* Prepare the key associated string value for DMA access, and returns",
          "new_line_content": "    setKey(key->db,key->key,str);",
          "content_same": false
        },
        {
          "line": 2156,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap,size_t)",
          "old_line_content": "        } else if (*p == 'v') {",
          "new_line_content": "            size_t len = va_arg(ap,size_t);",
          "content_same": false
        },
        {
          "line": 2157,
          "old_api": null,
          "new_api": "createStringObject",
          "old_text": null,
          "new_text": "createStringObject(buf,len)",
          "old_line_content": "             /* A vector of strings */",
          "new_line_content": "            argv[argc++] = createStringObject(buf,len);",
          "content_same": false
        },
        {
          "line": 620,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(ctx->amqueue)",
          "old_line_content": "",
          "new_line_content": "    zfree(ctx->amqueue);",
          "content_same": false
        },
        {
          "line": 2160,
          "old_api": null,
          "new_api": "createStringObjectFromLongLong",
          "old_text": null,
          "new_text": "createStringObjectFromLongLong(ll)",
          "old_line_content": "",
          "new_line_content": "            argv[argc++] = createStringObjectFromLongLong(ll);",
          "content_same": false
        },
        {
          "line": 2163,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap, void*)",
          "old_line_content": "              * one element in argv for the vector already */",
          "new_line_content": "             robj **v = va_arg(ap, void*);",
          "content_same": false
        },
        {
          "line": 2164,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap, size_t)",
          "old_line_content": "             argv_size += vlen-1;",
          "new_line_content": "             size_t vlen = va_arg(ap, size_t);",
          "content_same": false
        },
        {
          "line": 1653,
          "old_api": null,
          "new_api": "ziplistPrev",
          "old_text": null,
          "new_text": "ziplistPrev(zl,eptr)",
          "old_line_content": "        } else {",
          "new_line_content": "        prev = ziplistPrev(zl,eptr); /* Go back to previous score. */",
          "content_same": false
        },
        {
          "line": 1654,
          "old_api": null,
          "new_api": "ziplistPrev",
          "old_text": null,
          "new_text": "ziplistPrev(zl,prev)",
          "old_line_content": "            /* Are we still within the range? */",
          "new_line_content": "        if (prev) prev = ziplistPrev(zl,prev); /* Back to previous ele. */",
          "content_same": false
        },
        {
          "line": 2170,
          "old_api": null,
          "new_api": "zrealloc",
          "old_text": null,
          "new_text": "zrealloc(argv,sizeof(robj*)*argv_size)",
          "old_line_content": "                 argv[argc++] = v[i];",
          "new_line_content": "             argv = zrealloc(argv,sizeof(robj*)*argv_size);",
          "content_same": false
        },
        {
          "line": 637,
          "old_api": null,
          "new_api": "createStringObject",
          "old_text": null,
          "new_text": "createStringObject(ptr,len)",
          "old_line_content": "/* Like RedisModule_CreatString(), but creates a string starting from a long long",
          "new_line_content": "    RedisModuleString *o = createStringObject(ptr,len);",
          "content_same": false
        },
        {
          "line": 2174,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(v[i])",
          "old_line_content": "        } else {",
          "new_line_content": "                 incrRefCount(v[i]);",
          "content_same": false
        },
        {
          "line": 638,
          "old_api": null,
          "new_api": "autoMemoryAdd",
          "old_text": null,
          "new_text": "autoMemoryAdd(ctx,REDISMODULE_AM_STRING,o)",
          "old_line_content": " * integer instead of taking a buffer and its length.",
          "new_line_content": "    autoMemoryAdd(ctx,REDISMODULE_AM_STRING,o);",
          "content_same": false
        },
        {
          "line": 1664,
          "old_api": null,
          "new_api": "ziplistNext",
          "old_text": null,
          "new_text": "ziplistNext(zl,prev)",
          "old_line_content": "                }",
          "new_line_content": "                prev = ziplistNext(zl,prev); /* Skip element to get the score.*/",
          "content_same": false
        },
        {
          "line": 1665,
          "old_api": null,
          "new_api": "zzlGetScore",
          "old_text": null,
          "new_text": "zzlGetScore(prev)",
          "old_line_content": "                prev = saved_prev;",
          "new_line_content": "                double score = zzlGetScore(prev); /* Obtain the prev score. */",
          "content_same": false
        },
        {
          "line": 1666,
          "old_api": null,
          "new_api": "zslValueGteMin",
          "old_text": null,
          "new_text": "zslValueGteMin(score,&key->zrs)",
          "old_line_content": "            } else if (key->ztype == REDISMODULE_ZSET_RANGE_LEX) {",
          "new_line_content": "                if (!zslValueGteMin(score,&key->zrs)) {",
          "content_same": false
        },
        {
          "line": 1672,
          "old_api": null,
          "new_api": "zzlLexValueGteMin",
          "old_text": null,
          "new_text": "zzlLexValueGteMin(prev,&key->zlrs)",
          "old_line_content": "            key->zcurrent = prev;",
          "new_line_content": "                if (!zzlLexValueGteMin(prev,&key->zlrs)) {",
          "content_same": false
        },
        {
          "line": 649,
          "old_api": null,
          "new_api": "ll2string",
          "old_text": null,
          "new_text": "ll2string(buf,sizeof(buf),ll)",
          "old_line_content": " * that return new string objects.",
          "new_line_content": "    size_t len = ll2string(buf,sizeof(buf),ll);",
          "content_same": false
        },
        {
          "line": 650,
          "old_api": null,
          "new_api": "RM_CreateString",
          "old_text": null,
          "new_text": "RM_CreateString(ctx,buf,len)",
          "old_line_content": " *",
          "new_line_content": "    return RM_CreateString(ctx,buf,len);",
          "content_same": false
        },
        {
          "line": 2189,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(argv[j])",
          "old_line_content": "/* Exported API to call any Redis command from modules.",
          "new_line_content": "        decrRefCount(argv[j]);",
          "content_same": false
        },
        {
          "line": 2190,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(argv)",
          "old_line_content": " * On success a RedisModuleCallReply object is returned, otherwise",
          "new_line_content": "    zfree(argv);",
          "content_same": false
        },
        {
          "line": 660,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(str)",
          "old_line_content": " * and length of the string. The returned pointer and length should only",
          "new_line_content": "    decrRefCount(str);",
          "content_same": false
        },
        {
          "line": 661,
          "old_api": null,
          "new_api": "autoMemoryFreed",
          "old_text": null,
          "new_text": "autoMemoryFreed(ctx,REDISMODULE_AM_STRING,str)",
          "old_line_content": " * be used for read only accesses and never modified. */",
          "new_line_content": "    autoMemoryFreed(ctx,REDISMODULE_AM_STRING,str);",
          "content_same": false
        },
        {
          "line": 668,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(str->ptr)",
          "old_line_content": " * Returns REDISMODULE_OK on success. If the string can't be parsed",
          "new_line_content": "    if (len) *len = sdslen(str->ptr);",
          "content_same": false
        },
        {
          "line": 1181,
          "old_api": null,
          "new_api": "dbUnshareStringValue",
          "old_text": null,
          "new_text": "dbUnshareStringValue(key->db, key->key, key->value)",
          "old_line_content": "",
          "new_line_content": "        key->value = dbUnshareStringValue(key->db, key->key, key->value);",
          "content_same": false
        },
        {
          "line": 1693,
          "old_api": null,
          "new_api": "zslLexValueGteMin",
          "old_text": null,
          "new_text": "zslLexValueGteMin(prev->ele,&key->zlrs)",
          "old_line_content": "            key->zcurrent = prev;",
          "new_line_content": "                if (!zslLexValueGteMin(prev->ele,&key->zlrs)) {",
          "content_same": false
        },
        {
          "line": 1183,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(key->value->ptr)",
          "old_line_content": " * with zero bytes if the new length is greater than the old one.",
          "new_line_content": "    *len = sdslen(key->value->ptr);",
          "content_same": false
        },
        {
          "line": 2209,
          "old_api": null,
          "new_api": "lookupCommandByCString",
          "old_text": null,
          "new_text": "lookupCommandByCString((char*)cmdname)",
          "old_line_content": "",
          "new_line_content": "    cmd = lookupCommandByCString((char*)cmdname);",
          "content_same": false
        },
        {
          "line": 677,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(str->ptr)",
          "old_line_content": " * Returns REDISMODULE_OK on success or REDISMODULE_ERR if the string is",
          "new_line_content": "    return string2ll(str->ptr,sdslen(str->ptr),ll) ? REDISMODULE_OK :",
          "content_same": false
        },
        {
          "line": 1702,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unsupported zset encoding\")",
          "old_line_content": " * Key API for Hash type",
          "new_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "content_same": false
        },
        {
          "line": 2216,
          "old_api": null,
          "new_api": "va_start",
          "old_text": null,
          "new_text": "va_start(ap, fmt)",
          "old_line_content": "",
          "new_line_content": "    va_start(ap, fmt);",
          "content_same": false
        },
        {
          "line": 2217,
          "old_api": null,
          "new_api": "createClient",
          "old_text": null,
          "new_text": "createClient(-1)",
          "old_line_content": "    /* Setup our fake client for command execution. */",
          "new_line_content": "    c = createClient(-1);",
          "content_same": false
        },
        {
          "line": 2218,
          "old_api": null,
          "new_api": "moduleCreateArgvFromUserFormat",
          "old_text": null,
          "new_text": "moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap)",
          "old_line_content": "    c->flags |= CLIENT_MODULE;",
          "new_line_content": "    argv = moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap);",
          "content_same": false
        },
        {
          "line": 2220,
          "old_api": null,
          "new_api": "va_end",
          "old_text": null,
          "new_text": "va_end(ap)",
          "old_line_content": "    c->argc = argc;",
          "new_line_content": "    va_end(ap);",
          "content_same": false
        },
        {
          "line": 685,
          "old_api": null,
          "new_api": "getDoubleFromObject",
          "old_text": null,
          "new_text": "getDoubleFromObject(str,d)",
          "old_line_content": " * Reply APIs",
          "new_line_content": "    int retval = getDoubleFromObject(str,d);",
          "content_same": false
        },
        {
          "line": 1210,
          "old_api": null,
          "new_api": "sdsnewlen",
          "old_text": null,
          "new_text": "sdsnewlen(NULL, newlen)",
          "old_line_content": "        /* Unshare and resize. */",
          "new_line_content": "        robj *o = createObject(OBJ_STRING,sdsnewlen(NULL, newlen));",
          "content_same": false
        },
        {
          "line": 1213,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(o)",
          "old_line_content": "        if (newlen > curlen) {",
          "new_line_content": "        decrRefCount(o);",
          "content_same": false
        },
        {
          "line": 1217,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(key->value->ptr)",
          "old_line_content": "            /* If the string is too wasteful, reallocate it. */",
          "new_line_content": "        size_t curlen = sdslen(key->value->ptr);",
          "content_same": false
        },
        {
          "line": 707,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(ctx->client,\n        \"wrong number of arguments for '%s' command\",\n        (char*)ctx->client->argv[0]->ptr)",
          "old_line_content": "",
          "new_line_content": "    addReplyErrorFormat(ctx->client,",
          "content_same": false
        },
        {
          "line": 2244,
          "old_api": null,
          "new_api": "getNodeByQuery",
          "old_text": null,
          "new_text": "getNodeByQuery(c,c->cmd,c->argv,c->argc,NULL,NULL)",
          "old_line_content": "        }",
          "new_line_content": "        if (getNodeByQuery(c,c->cmd,c->argv,c->argc,NULL,NULL) !=",
          "content_same": false
        },
        {
          "line": 1221,
          "old_api": null,
          "new_api": "sdsrange",
          "old_text": null,
          "new_text": "sdsrange(key->value->ptr,0,newlen-1)",
          "old_line_content": "    }",
          "new_line_content": "            sdsrange(key->value->ptr,0,newlen-1);",
          "content_same": false
        },
        {
          "line": 1223,
          "old_api": null,
          "new_api": "sdsavail",
          "old_text": null,
          "new_text": "sdsavail(key->value->ptr)",
          "old_line_content": "}",
          "new_line_content": "            if (sdslen(key->value->ptr) < sdsavail(key->value->ptr))",
          "content_same": false
        },
        {
          "line": 1224,
          "old_api": null,
          "new_api": "sdsRemoveFreeSpace",
          "old_text": null,
          "new_text": "sdsRemoveFreeSpace(key->value->ptr)",
          "old_line_content": "",
          "new_line_content": "                key->value->ptr = sdsRemoveFreeSpace(key->value->ptr);",
          "content_same": false
        },
        {
          "line": 716,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(ctx->client,ll)",
          "old_line_content": " * ReplyWithSimpleString() and ReplyWithError().",
          "new_line_content": "    addReplyLongLong(ctx->client,ll);",
          "content_same": false
        },
        {
          "line": 2255,
          "old_api": null,
          "new_api": "moduleReplicateMultiIfNeeded",
          "old_text": null,
          "new_text": "moduleReplicateMultiIfNeeded(ctx)",
          "old_line_content": "        call_flags |= CMD_CALL_PROPAGATE_AOF;",
          "new_line_content": "    if (replicate) moduleReplicateMultiIfNeeded(ctx);",
          "content_same": false
        },
        {
          "line": 724,
          "old_api": null,
          "new_api": "sdsnewlen",
          "old_text": null,
          "new_text": "sdsnewlen(prefix,1)",
          "old_line_content": "}",
          "new_line_content": "    sds strmsg = sdsnewlen(prefix,1);",
          "content_same": false
        },
        {
          "line": 725,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(strmsg,msg)",
          "old_line_content": "",
          "new_line_content": "    strmsg = sdscat(strmsg,msg);",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": null,
          "new_api": "sdscatlen",
          "old_text": null,
          "new_text": "sdscatlen(strmsg,\"\\r\\n\",2)",
          "old_line_content": "/* Reply with the error 'err'.",
          "new_line_content": "    strmsg = sdscatlen(strmsg,\"\\r\\n\",2);",
          "content_same": false
        },
        {
          "line": 727,
          "old_api": null,
          "new_api": "addReplySds",
          "old_text": null,
          "new_text": "addReplySds(ctx->client,strmsg)",
          "old_line_content": " *",
          "new_line_content": "    addReplySds(ctx->client,strmsg);",
          "content_same": false
        },
        {
          "line": 1241,
          "old_api": null,
          "new_api": "moduleCreateEmptyKey",
          "old_text": null,
          "new_text": "moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_LIST)",
          "old_line_content": "",
          "new_line_content": "    if (key->value == NULL) moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_LIST);",
          "content_same": false
        },
        {
          "line": 1242,
          "old_api": null,
          "new_api": "listTypePush",
          "old_text": null,
          "new_text": "listTypePush(key->value, ele,\n        (where == REDISMODULE_LIST_HEAD) ? QUICKLIST_HEAD : QUICKLIST_TAIL)",
          "old_line_content": "/* Pop an element from the list, and returns it as a module string object",
          "new_line_content": "    listTypePush(key->value, ele,",
          "content_same": false
        },
        {
          "line": 2270,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(c->reply)",
          "old_line_content": "    }",
          "new_line_content": "    while(listLength(c->reply)) {",
          "content_same": false
        },
        {
          "line": 2273,
          "old_api": null,
          "new_api": "sdscatsds",
          "old_text": null,
          "new_text": "sdscatsds(proto,o)",
          "old_line_content": "",
          "new_line_content": "        proto = sdscatsds(proto,o);",
          "content_same": false
        },
        {
          "line": 2274,
          "old_api": null,
          "new_api": "listFirst",
          "old_text": null,
          "new_text": "listFirst(c->reply)",
          "old_line_content": "cleanup:",
          "new_line_content": "        listDelNode(c->reply,listFirst(c->reply));",
          "content_same": false
        },
        {
          "line": 2276,
          "old_api": null,
          "new_api": "moduleCreateCallReplyFromProto",
          "old_text": null,
          "new_text": "moduleCreateCallReplyFromProto(ctx,proto)",
          "old_line_content": "    return reply;",
          "new_line_content": "    reply = moduleCreateCallReplyFromProto(ctx,proto);",
          "content_same": false
        },
        {
          "line": 2277,
          "old_api": null,
          "new_api": "autoMemoryAdd",
          "old_text": null,
          "new_text": "autoMemoryAdd(ctx,REDISMODULE_AM_REPLY,reply)",
          "old_line_content": "}",
          "new_line_content": "    autoMemoryAdd(ctx,REDISMODULE_AM_REPLY,reply);",
          "content_same": false
        },
        {
          "line": 1764,
          "old_api": null,
          "new_api": "moduleCreateEmptyKey",
          "old_text": null,
          "new_text": "moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_HASH)",
          "old_line_content": "        RedisModuleString *field, *value;",
          "new_line_content": "    if (key->value == NULL) moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_HASH);",
          "content_same": false
        },
        {
          "line": 2280,
          "old_api": null,
          "new_api": "freeClient",
          "old_text": null,
          "new_text": "freeClient(c)",
          "old_line_content": " * that returned the reply object. */",
          "new_line_content": "    freeClient(c);",
          "content_same": false
        },
        {
          "line": 746,
          "old_api": null,
          "new_api": "replyWithStatus",
          "old_text": null,
          "new_text": "replyWithStatus(ctx,err,\"-\")",
          "old_line_content": " * overhead, like \"OK\" or similar replies.",
          "new_line_content": "    return replyWithStatus(ctx,err,\"-\");",
          "content_same": false
        },
        {
          "line": 1260,
          "old_api": null,
          "new_api": "getDecodedObject",
          "old_text": null,
          "new_text": "getDecodedObject(ele)",
          "old_line_content": "}",
          "new_line_content": "    robj *decoded = getDecodedObject(ele);",
          "content_same": false
        },
        {
          "line": 1261,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(ele)",
          "old_line_content": "",
          "new_line_content": "    decrRefCount(ele);",
          "content_same": false
        },
        {
          "line": 1262,
          "old_api": null,
          "new_api": "moduleDelKeyIfEmpty",
          "old_text": null,
          "new_text": "moduleDelKeyIfEmpty(key)",
          "old_line_content": "/* --------------------------------------------------------------------------",
          "new_line_content": "    moduleDelKeyIfEmpty(key);",
          "content_same": false
        },
        {
          "line": 2287,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(reply->proto)",
          "old_line_content": " * Modules API internals",
          "new_line_content": "    if (reply->proto) *len = sdslen(reply->proto);",
          "content_same": false
        },
        {
          "line": 1263,
          "old_api": null,
          "new_api": "autoMemoryAdd",
          "old_text": null,
          "new_text": "autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,decoded)",
          "old_line_content": " * Key API for Sorted Set type",
          "new_line_content": "    autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,decoded);",
          "content_same": false
        },
        {
          "line": 1772,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap,char*)",
          "old_line_content": "            if (field == NULL) break;",
          "new_line_content": "            char *cfield = va_arg(ap,char*);",
          "content_same": false
        },
        {
          "line": 1776,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap,RedisModuleString*)",
          "old_line_content": "        /* Handle XX and NX */",
          "new_line_content": "            field = va_arg(ap,RedisModuleString*);",
          "content_same": false
        },
        {
          "line": 755,
          "old_api": null,
          "new_api": "replyWithStatus",
          "old_text": null,
          "new_text": "replyWithStatus(ctx,msg,\"+\")",
          "old_line_content": " * of the array.",
          "new_line_content": "    return replyWithStatus(ctx,msg,\"+\");",
          "content_same": false
        },
        {
          "line": 1779,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap,RedisModuleString*)",
          "old_line_content": "            if (((flags & REDISMODULE_HASH_XX) && !exists) ||",
          "new_line_content": "        value = va_arg(ap,RedisModuleString*);",
          "content_same": false
        },
        {
          "line": 1783,
          "old_api": null,
          "new_api": "hashTypeExists",
          "old_text": null,
          "new_text": "hashTypeExists(key->value, field->ptr)",
          "old_line_content": "                continue;",
          "new_line_content": "            int exists = hashTypeExists(key->value, field->ptr);",
          "content_same": false
        },
        {
          "line": 1787,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(field)",
          "old_line_content": "        /* Handle deletion if value is REDISMODULE_HASH_DELETE. */",
          "new_line_content": "                if (flags & REDISMODULE_HASH_CFIELDS) decrRefCount(field);",
          "content_same": false
        },
        {
          "line": 2303,
          "old_api": null,
          "new_api": "DICT_NOTUSED",
          "old_text": null,
          "new_text": "DICT_NOTUSED(privdata)",
          "old_line_content": "    dictCStringKeyHash,        /* hash function */",
          "new_line_content": "    DICT_NOTUSED(privdata);",
          "content_same": false
        },
        {
          "line": 2304,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(key1,key2)",
          "old_line_content": "    NULL,                      /* key dup */",
          "new_line_content": "    return strcmp(key1,key2) == 0;",
          "content_same": false
        },
        {
          "line": 1794,
          "old_api": null,
          "new_api": "hashTypeDelete",
          "old_text": null,
          "new_text": "hashTypeDelete(key->value, field->ptr)",
          "old_line_content": "        int low_flags = HASH_SET_COPY;",
          "new_line_content": "            updated += hashTypeDelete(key->value, field->ptr);",
          "content_same": false
        },
        {
          "line": 771,
          "old_api": null,
          "new_api": "zrealloc",
          "old_text": null,
          "new_text": "zrealloc(ctx->postponed_arrays,sizeof(void*)*\n                (ctx->postponed_arrays_count+1))",
          "old_line_content": "    } else {",
          "new_line_content": "        ctx->postponed_arrays = zrealloc(ctx->postponed_arrays,sizeof(void*)*",
          "content_same": false
        },
        {
          "line": 1795,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(field)",
          "old_line_content": "        /* If CFIELDS is active, we can pass the ownership of the",
          "new_line_content": "            if (flags & REDISMODULE_HASH_CFIELDS) decrRefCount(field);",
          "content_same": false
        },
        {
          "line": 774,
          "old_api": null,
          "new_api": "addDeferredMultiBulkLength",
          "old_text": null,
          "new_text": "addDeferredMultiBulkLength(ctx->client)",
          "old_line_content": "    return REDISMODULE_OK;",
          "new_line_content": "            addDeferredMultiBulkLength(ctx->client);",
          "content_same": false
        },
        {
          "line": 777,
          "old_api": null,
          "new_api": "addReplyMultiBulkLen",
          "old_text": null,
          "new_text": "addReplyMultiBulkLen(ctx->client,len)",
          "old_line_content": "/* When RedisModule_ReplyWithArray() is used with the argument",
          "new_line_content": "        addReplyMultiBulkLen(ctx->client,len);",
          "content_same": false
        },
        {
          "line": 2317,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(server.moduleapi, (char*)funcname, funcptr)",
          "old_line_content": "",
          "new_line_content": "    return dictAdd(server.moduleapi, (char*)funcname, funcptr);",
          "content_same": false
        },
        {
          "line": 1805,
          "old_api": null,
          "new_api": "hashTypeSet",
          "old_text": null,
          "new_text": "hashTypeSet(key->value, field->ptr, value->ptr, low_flags)",
          "old_line_content": "           field->ptr = NULL; /* Prevent the SDS string from being freed. */",
          "new_line_content": "        updated += hashTypeSet(key->value, field->ptr, value->ptr, low_flags);",
          "content_same": false
        },
        {
          "line": 1811,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(field)",
          "old_line_content": "    return updated;",
          "new_line_content": "           decrRefCount(field);",
          "content_same": false
        },
        {
          "line": 1814,
          "old_api": null,
          "new_api": "va_end",
          "old_text": null,
          "new_text": "va_end(ap)",
          "old_line_content": "/* Get fields from an hash value. This function is called using a variable",
          "new_line_content": "    va_end(ap);",
          "content_same": false
        },
        {
          "line": 1815,
          "old_api": null,
          "new_api": "moduleDelKeyIfEmpty",
          "old_text": null,
          "new_text": "moduleDelKeyIfEmpty(key)",
          "old_line_content": " * number of arguments, alternating a field name (as a StringRedisModule",
          "new_line_content": "    moduleDelKeyIfEmpty(key);",
          "content_same": false
        },
        {
          "line": 1321,
          "old_api": null,
          "new_api": "moduleCreateEmptyKey",
          "old_text": null,
          "new_text": "moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_ZSET)",
          "old_line_content": "    }",
          "new_line_content": "    if (key->value == NULL) moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_ZSET);",
          "content_same": false
        },
        {
          "line": 810,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n            \"API misuse detected in module %s: \"\n            \"RedisModule_ReplySetArrayLength() called without previous \"\n            \"RedisModule_ReplyWithArray(ctx,REDISMODULE_POSTPONED_ARRAY_LEN) \"\n            \"call.\", ctx->module->name)",
          "old_line_content": "            return;",
          "new_line_content": "        serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 1323,
          "old_api": null,
          "new_api": "zsetAdd",
          "old_text": null,
          "new_text": "zsetAdd(key->value,score,ele->ptr,&flags,NULL)",
          "old_line_content": "    return REDISMODULE_OK;",
          "new_line_content": "    if (zsetAdd(key->value,score,ele->ptr,&flags,NULL) == 0) {",
          "content_same": false
        },
        {
          "line": 1327,
          "old_api": null,
          "new_api": "RM_ZsetAddFlagsFromCoreFlags",
          "old_text": null,
          "new_text": "RM_ZsetAddFlagsFromCoreFlags(flags)",
          "old_line_content": " * a new score, the score of the existing element is incremented, or if the",
          "new_line_content": "    if (flagsptr) *flagsptr = RM_ZsetAddFlagsFromCoreFlags(flags);",
          "content_same": false
        },
        {
          "line": 818,
          "old_api": null,
          "new_api": "setDeferredMultiBulkLength",
          "old_text": null,
          "new_text": "setDeferredMultiBulkLength(ctx->client,\n            ctx->postponed_arrays[ctx->postponed_arrays_count],\n            len)",
          "old_line_content": "        ctx->postponed_arrays = NULL;",
          "new_line_content": "    setDeferredMultiBulkLength(ctx->client,",
          "content_same": false
        },
        {
          "line": 822,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(ctx->postponed_arrays)",
          "old_line_content": "/* Reply with a bulk string, taking in input a C buffer pointer and length.",
          "new_line_content": "        zfree(ctx->postponed_arrays);",
          "content_same": false
        },
        {
          "line": 831,
          "old_api": null,
          "new_api": "addReplyBulkCBuffer",
          "old_text": null,
          "new_text": "addReplyBulkCBuffer(ctx->client,(char*)buf,len)",
          "old_line_content": " *",
          "new_line_content": "    addReplyBulkCBuffer(ctx->client,(char*)buf,len);",
          "content_same": false
        },
        {
          "line": 1348,
          "old_api": null,
          "new_api": "moduleCreateEmptyKey",
          "old_text": null,
          "new_text": "moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_ZSET)",
          "old_line_content": "        return REDISMODULE_ERR;",
          "new_line_content": "    if (key->value == NULL) moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_ZSET);",
          "content_same": false
        },
        {
          "line": 1349,
          "old_api": null,
          "new_api": "RM_ZsetAddFlagsToCoreFlags",
          "old_text": null,
          "new_text": "RM_ZsetAddFlagsToCoreFlags(*flagsptr)",
          "old_line_content": "    }",
          "new_line_content": "    if (flagsptr) flags = RM_ZsetAddFlagsToCoreFlags(*flagsptr);",
          "content_same": false
        },
        {
          "line": 839,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(ctx->client,str)",
          "old_line_content": " * as the string \"$-1\\r\\n\".",
          "new_line_content": "    addReplyBulk(ctx->client,str);",
          "content_same": false
        },
        {
          "line": 1351,
          "old_api": null,
          "new_api": "zsetAdd",
          "old_text": null,
          "new_text": "zsetAdd(key->value,score,ele->ptr,&flags,newscore)",
          "old_line_content": "    if (flagsptr && (*flagsptr & ZADD_NAN)) {",
          "new_line_content": "    if (zsetAdd(key->value,score,ele->ptr,&flags,newscore) == 0) {",
          "content_same": false
        },
        {
          "line": 1864,
          "old_api": null,
          "new_api": "va_start",
          "old_text": null,
          "new_text": "va_start(ap, flags)",
          "old_line_content": "        if (flags & REDISMODULE_HASH_CFIELDS) {",
          "new_line_content": "    va_start(ap, flags);",
          "content_same": false
        },
        {
          "line": 1870,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap,char*)",
          "old_line_content": "            if (field == NULL) break;",
          "new_line_content": "            char *cfield = va_arg(ap,char*);",
          "content_same": false
        },
        {
          "line": 848,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(ctx->client,shared.nullbulk)",
          "old_line_content": " * This function is useful when we use RedisModule_Call() in order to",
          "new_line_content": "    addReply(ctx->client,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 1360,
          "old_api": null,
          "new_api": "RM_ZsetAddFlagsFromCoreFlags",
          "old_text": null,
          "new_text": "RM_ZsetAddFlagsFromCoreFlags(flags)",
          "old_line_content": " * The function returns REDISMODULE_OK on success, and REDISMODULE_ERR",
          "new_line_content": "    if (flagsptr) *flagsptr = RM_ZsetAddFlagsFromCoreFlags(flags);",
          "content_same": false
        },
        {
          "line": 2385,
          "old_api": null,
          "new_api": "REGISTER_API",
          "old_text": null,
          "new_text": "REGISTER_API(HashGet)",
          "old_line_content": "}",
          "new_line_content": "    REGISTER_API(HashGet);",
          "content_same": false
        },
        {
          "line": 2387,
          "old_api": null,
          "new_api": "REGISTER_API",
          "old_text": null,
          "new_text": "REGISTER_API(KeyAtPos)",
          "old_line_content": "/* Global initialization at Redis startup. */",
          "new_line_content": "    REGISTER_API(KeyAtPos);",
          "content_same": false
        },
        {
          "line": 2388,
          "old_api": null,
          "new_api": "REGISTER_API",
          "old_text": null,
          "new_text": "REGISTER_API(GetClientId)",
          "old_line_content": "void moduleInitModulesSystem(void) {",
          "new_line_content": "    REGISTER_API(GetClientId);",
          "content_same": false
        },
        {
          "line": 2386,
          "old_api": null,
          "new_api": "REGISTER_API",
          "old_text": null,
          "new_text": "REGISTER_API(IsKeysPositionRequest)",
          "old_line_content": "",
          "new_line_content": "    REGISTER_API(IsKeysPositionRequest);",
          "content_same": false
        },
        {
          "line": 1872,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(cfield)",
          "old_line_content": "",
          "new_line_content": "            field = createRawStringObject(cfield,strlen(cfield));",
          "content_same": false
        },
        {
          "line": 1874,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap,RedisModuleString*)",
          "old_line_content": "        if (flags & REDISMODULE_HASH_EXISTS) {",
          "new_line_content": "            field = va_arg(ap,RedisModuleString*);",
          "content_same": false
        },
        {
          "line": 1880,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap,int*)",
          "old_line_content": "        } else {",
          "new_line_content": "            existsptr = va_arg(ap,int*);",
          "content_same": false
        },
        {
          "line": 2394,
          "old_api": null,
          "new_api": "listCreate",
          "old_text": null,
          "new_text": "listCreate()",
          "old_line_content": "/* Load all the modules in the server.loadmodule_queue list, which is",
          "new_line_content": "    server.loadmodule_queue = listCreate();",
          "content_same": false
        },
        {
          "line": 2395,
          "old_api": null,
          "new_api": "dictCreate",
          "old_text": null,
          "new_text": "dictCreate(&modulesDictType,NULL)",
          "old_line_content": " * populated by `loadmodule` directives in the configuration file.",
          "new_line_content": "    modules = dictCreate(&modulesDictType,NULL);",
          "content_same": false
        },
        {
          "line": 2396,
          "old_api": null,
          "new_api": "moduleRegisterCoreAPI",
          "old_text": null,
          "new_text": "moduleRegisterCoreAPI()",
          "old_line_content": " * We can't load modules directly when processing the configuration file",
          "new_line_content": "    moduleRegisterCoreAPI();",
          "content_same": false
        },
        {
          "line": 859,
          "old_api": null,
          "new_api": "sdsnewlen",
          "old_text": null,
          "new_text": "sdsnewlen(reply->proto, reply->protolen)",
          "old_line_content": "/* Send a string reply obtained converting the double 'd' into a bulk string.",
          "new_line_content": "    sds proto = sdsnewlen(reply->proto, reply->protolen);",
          "content_same": false
        },
        {
          "line": 860,
          "old_api": null,
          "new_api": "addReplySds",
          "old_text": null,
          "new_text": "addReplySds(ctx->client,proto)",
          "old_line_content": " * This function is basically equivalent to converting a double into",
          "new_line_content": "    addReplySds(ctx->client,proto);",
          "content_same": false
        },
        {
          "line": 1882,
          "old_api": null,
          "new_api": "hashTypeExists",
          "old_text": null,
          "new_text": "hashTypeExists(key->value,field->ptr)",
          "old_line_content": "            if (key->value) {",
          "new_line_content": "                *existsptr = hashTypeExists(key->value,field->ptr);",
          "content_same": false
        },
        {
          "line": 1888,
          "old_api": null,
          "new_api": "hashTypeGetValueObject",
          "old_text": null,
          "new_text": "hashTypeGetValueObject(key->value,field->ptr)",
          "old_line_content": "                }",
          "new_line_content": "                *valueptr = hashTypeGetValueObject(key->value,field->ptr);",
          "content_same": false
        },
        {
          "line": 1891,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(*valueptr)",
          "old_line_content": "            } else {",
          "new_line_content": "                    decrRefCount(*valueptr);",
          "content_same": false
        },
        {
          "line": 871,
          "old_api": null,
          "new_api": "addReplyDouble",
          "old_text": null,
          "new_text": "addReplyDouble(ctx->client,d)",
          "old_line_content": " * Commands replication API",
          "new_line_content": "    addReplyDouble(ctx->client,d);",
          "content_same": false
        },
        {
          "line": 1895,
          "old_api": null,
          "new_api": "autoMemoryAdd",
          "old_text": null,
          "new_text": "autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,*valueptr)",
          "old_line_content": "",
          "new_line_content": "                    autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,*valueptr);",
          "content_same": false
        },
        {
          "line": 1385,
          "old_api": null,
          "new_api": "zsetDel",
          "old_text": null,
          "new_text": "zsetDel(key->value,ele->ptr)",
          "old_line_content": "    return REDISMODULE_OK;",
          "new_line_content": "    if (key->value != NULL && zsetDel(key->value,ele->ptr)) {",
          "content_same": false
        },
        {
          "line": 2412,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(server.loadmodule_queue,&li)",
          "old_line_content": "                \"Can't load module from %s: server aborting\",",
          "new_line_content": "    listRewind(server.loadmodule_queue,&li);",
          "content_same": false
        },
        {
          "line": 2413,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&li)",
          "old_line_content": "                modulepath);",
          "new_line_content": "    while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 1902,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(field)",
          "old_line_content": "",
          "new_line_content": "        if (flags & REDISMODULE_HASH_CFIELDS) decrRefCount(field);",
          "content_same": false
        },
        {
          "line": 2415,
          "old_api": null,
          "new_api": "moduleLoad",
          "old_text": null,
          "new_text": "moduleLoad(modulepath)",
          "old_line_content": "        }",
          "new_line_content": "        if (moduleLoad(modulepath) == C_ERR) {",
          "content_same": false
        },
        {
          "line": 2416,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n                \"Can't load module from %s: server aborting\",\n                modulepath)",
          "old_line_content": "    }",
          "new_line_content": "            serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 1904,
          "old_api": null,
          "new_api": "va_end",
          "old_text": null,
          "new_text": "va_end(ap)",
          "old_line_content": " * Redis <-> Modules generic Call() API",
          "new_line_content": "    va_end(ap);",
          "content_same": false
        },
        {
          "line": 2419,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "void moduleFreeModuleStructure(struct RedisModule *module) {",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 884,
          "old_api": null,
          "new_api": "execCommandPropagateMulti",
          "old_text": null,
          "new_text": "execCommandPropagateMulti(ctx->client)",
          "old_line_content": " * of execution of the calling command implementation.",
          "new_line_content": "    execCommandPropagateMulti(ctx->client);",
          "content_same": false
        },
        {
          "line": 2425,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(module->name)",
          "old_line_content": " * C_ERR is returned. */",
          "new_line_content": "    sdsfree(module->name);",
          "content_same": false
        },
        {
          "line": 2426,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(module)",
          "old_line_content": "int moduleLoad(const char *path) {",
          "new_line_content": "    zfree(module);",
          "content_same": false
        },
        {
          "line": 1404,
          "old_api": null,
          "new_api": "zsetScore",
          "old_text": null,
          "new_text": "zsetScore(key->value,ele->ptr,score)",
          "old_line_content": " * Key API for Sorted Set iterator",
          "new_line_content": "    if (zsetScore(key->value,ele->ptr,score) == C_ERR) return REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 1917,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*reply))",
          "old_line_content": "    switch(proto[0]) {",
          "new_line_content": "    RedisModuleCallReply *reply = zmalloc(sizeof(*reply));",
          "content_same": false
        },
        {
          "line": 1920,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(proto)",
          "old_line_content": "    case '-': reply->type = REDISMODULE_REPLY_ERROR; break;",
          "new_line_content": "    reply->protolen = sdslen(proto);",
          "content_same": false
        },
        {
          "line": 1416,
          "old_api": null,
          "new_api": "zslFreeLexRange",
          "old_text": null,
          "new_text": "zslFreeLexRange(&key->zlrs)",
          "old_line_content": "    key->zcurrent = NULL;",
          "new_line_content": "        zslFreeLexRange(&key->zlrs);",
          "content_same": false
        },
        {
          "line": 2441,
          "old_api": null,
          "new_api": "dlsym",
          "old_text": null,
          "new_text": "dlsym(handle,\"RedisModule_OnLoad\")",
          "old_line_content": "        return C_ERR;",
          "new_line_content": "    onload = (int (*)(void *))(unsigned long) dlsym(handle,\"RedisModule_OnLoad\");",
          "content_same": false
        },
        {
          "line": 2448,
          "old_api": null,
          "new_api": "onload",
          "old_text": null,
          "new_text": "onload((void*)&ctx)",
          "old_line_content": "        return C_ERR;",
          "new_line_content": "    if (onload((void*)&ctx) == REDISMODULE_ERR) {",
          "content_same": false
        },
        {
          "line": 2449,
          "old_api": null,
          "new_api": "moduleFreeModuleStructure",
          "old_text": null,
          "new_text": "moduleFreeModuleStructure(ctx.module)",
          "old_line_content": "    }",
          "new_line_content": "        if (ctx.module) moduleFreeModuleStructure(ctx.module);",
          "content_same": false
        },
        {
          "line": 2450,
          "old_api": null,
          "new_api": "dlclose",
          "old_text": null,
          "new_text": "dlclose(handle)",
          "old_line_content": "",
          "new_line_content": "        dlclose(handle);",
          "content_same": false
        },
        {
          "line": 2451,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n            \"Module %s initialization failed. Module not loaded\",path)",
          "old_line_content": "    /* Redis module loaded! Register it. */",
          "new_line_content": "        serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 917,
          "old_api": null,
          "new_api": "va_start",
          "old_text": null,
          "new_text": "va_start(ap, fmt)",
          "old_line_content": "    /* Replicate! */",
          "new_line_content": "    va_start(ap, fmt);",
          "content_same": false
        },
        {
          "line": 2457,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(modules,ctx.module->name,ctx.module)",
          "old_line_content": "",
          "new_line_content": "    dictAdd(modules,ctx.module->name,ctx.module);",
          "content_same": false
        },
        {
          "line": 2459,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE,\"Module '%s' loaded from %s\",ctx.module->name,path)",
          "old_line_content": " * C_OK is returned, otherwise C_ERR is returned and errno is set",
          "new_line_content": "    serverLog(LL_NOTICE,\"Module '%s' loaded from %s\",ctx.module->name,path);",
          "content_same": false
        },
        {
          "line": 1948,
          "old_api": null,
          "new_api": "moduleParseCallReply_Int",
          "old_text": null,
          "new_text": "moduleParseCallReply_Int(reply)",
          "old_line_content": "    }",
          "new_line_content": "    case ':': moduleParseCallReply_Int(reply); break;",
          "content_same": false
        },
        {
          "line": 1949,
          "old_api": null,
          "new_api": "moduleParseCallReply_BulkString",
          "old_text": null,
          "new_text": "moduleParseCallReply_BulkString(reply)",
          "old_line_content": "}",
          "new_line_content": "    case '$': moduleParseCallReply_BulkString(reply); break;",
          "content_same": false
        },
        {
          "line": 1439,
          "old_api": null,
          "new_api": "RM_ZsetRangeStop",
          "old_text": null,
          "new_text": "RM_ZsetRangeStop(key)",
          "old_line_content": "     * in order to seek at the specified element. */",
          "new_line_content": "    RM_ZsetRangeStop(key);",
          "content_same": false
        },
        {
          "line": 928,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(argv[j])",
          "old_line_content": "/* This function will replicate the command exactly as it was invoked",
          "new_line_content": "    for (j = 0; j < argc; j++) decrRefCount(argv[j]);",
          "content_same": false
        },
        {
          "line": 929,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(argv)",
          "old_line_content": " * by the client. Note that this function will not wrap the command into",
          "new_line_content": "    zfree(argv);",
          "content_same": false
        },
        {
          "line": 1951,
          "old_api": null,
          "new_api": "moduleParseCallReply_SimpleString",
          "old_text": null,
          "new_text": "moduleParseCallReply_SimpleString(reply)",
          "old_line_content": "void moduleParseCallReply_Int(RedisModuleCallReply *reply) {",
          "new_line_content": "    case '+': moduleParseCallReply_SimpleString(reply); break;",
          "content_same": false
        },
        {
          "line": 1952,
          "old_api": null,
          "new_api": "moduleParseCallReply_Array",
          "old_text": null,
          "new_text": "moduleParseCallReply_Array(reply)",
          "old_line_content": "    char *proto = reply->proto;",
          "new_line_content": "    case '*': moduleParseCallReply_Array(reply); break;",
          "content_same": false
        },
        {
          "line": 2469,
          "old_api": null,
          "new_api": "dictFetchValue",
          "old_text": null,
          "new_text": "dictFetchValue(modules,name)",
          "old_line_content": "",
          "new_line_content": "    struct RedisModule *module = dictFetchValue(modules,name);",
          "content_same": false
        },
        {
          "line": 1958,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(proto+1,'\\r')",
          "old_line_content": "}",
          "new_line_content": "    char *p = strchr(proto+1,'\\r');",
          "content_same": false
        },
        {
          "line": 1960,
          "old_api": null,
          "new_api": "string2ll",
          "old_text": null,
          "new_text": "string2ll(proto+1,p-proto-1,&reply->val.ll)",
          "old_line_content": "void moduleParseCallReply_BulkString(RedisModuleCallReply *reply) {",
          "new_line_content": "    string2ll(proto+1,p-proto-1,&reply->val.ll);",
          "content_same": false
        },
        {
          "line": 2476,
          "old_api": null,
          "new_api": "dictGetSafeIterator",
          "old_text": null,
          "new_text": "dictGetSafeIterator(server.commands)",
          "old_line_content": "            RedisModuleCommandProxy *cp =",
          "new_line_content": "    dictIterator *di = dictGetSafeIterator(server.commands);",
          "content_same": false
        },
        {
          "line": 2478,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "            sds cmdname = cp->rediscmd->name;",
          "new_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 2479,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "            if (cp->module == module) {",
          "new_line_content": "        struct redisCommand *cmd = dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 1967,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(proto+1,'\\r')",
          "old_line_content": "        reply->protolen = p-proto+2;",
          "new_line_content": "    char *p = strchr(proto+1,'\\r');",
          "content_same": false
        },
        {
          "line": 945,
          "old_api": null,
          "new_api": "alsoPropagate",
          "old_text": null,
          "new_text": "alsoPropagate(ctx->client->cmd,ctx->client->db->id,\n        ctx->client->argv,ctx->client->argc,\n        PROPAGATE_AOF|PROPAGATE_REPL)",
          "old_line_content": "",
          "new_line_content": "    alsoPropagate(ctx->client->cmd,ctx->client->db->id,",
          "content_same": false
        },
        {
          "line": 1457,
          "old_api": null,
          "new_api": "zslFirstInRange",
          "old_text": null,
          "new_text": "zslFirstInRange(zsl,zrs)",
          "old_line_content": "    if (key->zcurrent == NULL) key->zer = 1;",
          "new_line_content": "        key->zcurrent = first ? zslFirstInRange(zsl,zrs) :",
          "content_same": false
        },
        {
          "line": 1458,
          "old_api": null,
          "new_api": "zslLastInRange",
          "old_text": null,
          "new_text": "zslLastInRange(zsl,zrs)",
          "old_line_content": "    return REDISMODULE_OK;",
          "new_line_content": "                                zslLastInRange(zsl,zrs);",
          "content_same": false
        },
        {
          "line": 1460,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unsupported zset encoding\")",
          "old_line_content": "",
          "new_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "content_same": false
        },
        {
          "line": 2485,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(server.commands,cmdname)",
          "old_line_content": "            }",
          "new_line_content": "                dictDelete(server.commands,cmdname);",
          "content_same": false
        },
        {
          "line": 2486,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(server.orig_commands,cmdname)",
          "old_line_content": "        }",
          "new_line_content": "                dictDelete(server.orig_commands,cmdname);",
          "content_same": false
        },
        {
          "line": 2487,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(cmdname)",
          "old_line_content": "    }",
          "new_line_content": "                sdsfree(cmdname);",
          "content_same": false
        },
        {
          "line": 1970,
          "old_api": null,
          "new_api": "string2ll",
          "old_text": null,
          "new_text": "string2ll(proto+1,p-proto-1,&bulklen)",
          "old_line_content": "        reply->val.str = p+2;",
          "new_line_content": "    string2ll(proto+1,p-proto-1,&bulklen);",
          "content_same": false
        },
        {
          "line": 2489,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(cp)",
          "old_line_content": "",
          "new_line_content": "                zfree(cp);",
          "content_same": false
        },
        {
          "line": 1984,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(proto+1,'\\r')",
          "old_line_content": "    reply->type = proto[0] == '+' ? REDISMODULE_REPLY_STRING :",
          "new_line_content": "    char *p = strchr(proto+1,'\\r');",
          "content_same": false
        },
        {
          "line": 2498,
          "old_api": null,
          "new_api": "dlclose",
          "old_text": null,
          "new_text": "dlclose(module->handle)",
          "old_line_content": "    }",
          "new_line_content": "    if (dlclose(module->handle) == -1) {",
          "content_same": false
        },
        {
          "line": 2499,
          "old_api": null,
          "new_api": "dlerror",
          "old_text": null,
          "new_text": "dlerror()",
          "old_line_content": "",
          "new_line_content": "        char *error = dlerror();",
          "content_same": false
        },
        {
          "line": 2506,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE,\"Module %s unloaded\",module->name)",
          "old_line_content": "",
          "new_line_content": "    serverLog(LL_NOTICE,\"Module %s unloaded\",module->name);",
          "content_same": false
        },
        {
          "line": 2507,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(modules,module->name)",
          "old_line_content": "    return REDISMODULE_OK;",
          "new_line_content": "    dictDelete(modules,module->name);",
          "content_same": false
        },
        {
          "line": 1482,
          "old_api": null,
          "new_api": "zsetInitScoreRange",
          "old_text": null,
          "new_text": "zsetInitScoreRange(key,min,max,minex,maxex,1)",
          "old_line_content": "int RM_ZsetLastInScoreRange(RedisModuleKey *key, double min, double max, int minex, int maxex) {",
          "new_line_content": "    return zsetInitScoreRange(key,min,max,minex,maxex,1);",
          "content_same": false
        },
        {
          "line": 1995,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(proto+1,'\\r')",
          "old_line_content": "",
          "new_line_content": "    char *p = strchr(proto+1,'\\r');",
          "content_same": false
        },
        {
          "line": 2510,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(module)",
          "old_line_content": "/* Redis MODULE command.",
          "new_line_content": "    zfree(module);",
          "content_same": false
        },
        {
          "line": 1998,
          "old_api": null,
          "new_api": "string2ll",
          "old_text": null,
          "new_text": "string2ll(proto+1,p-proto-1,&arraylen)",
          "old_line_content": "        reply->type = REDISMODULE_REPLY_NULL;",
          "new_line_content": "    string2ll(proto+1,p-proto-1,&arraylen);",
          "content_same": false
        },
        {
          "line": 1488,
          "old_api": null,
          "new_api": "zsetInitScoreRange",
          "old_text": null,
          "new_text": "zsetInitScoreRange(key,min,max,minex,maxex,0)",
          "old_line_content": " * range (see the functions calling it for more info). If 'first' is true the",
          "new_line_content": "    return zsetInitScoreRange(key,min,max,minex,maxex,0);",
          "content_same": false
        },
        {
          "line": 2007,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(RedisModuleCallReply)*arraylen)",
          "old_line_content": "                     REDISMODULE_REPLYFLAG_TOPARSE;",
          "new_line_content": "    reply->val.array = zmalloc(sizeof(RedisModuleCallReply)*arraylen);",
          "content_same": false
        },
        {
          "line": 2521,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(subcmd,\"load\")",
          "old_line_content": "                \"Error loading the extension. Please check the server logs.\");",
          "new_line_content": "    if (!strcasecmp(subcmd,\"load\") && c->argc == 3) {",
          "content_same": false
        },
        {
          "line": 987,
          "old_api": null,
          "new_api": "selectDb",
          "old_text": null,
          "new_text": "selectDb(ctx->client,newid)",
          "old_line_content": " * to call other APIs with the key handle as argument to perform",
          "new_line_content": "    int retval = selectDb(ctx->client,newid);",
          "content_same": false
        },
        {
          "line": 2525,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\n                \"Error loading the extension. Please check the server logs.\")",
          "old_line_content": "        else {",
          "new_line_content": "            addReplyError(c,",
          "content_same": false
        },
        {
          "line": 2527,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(subcmd,\"unload\")",
          "old_line_content": "            switch(errno) {",
          "new_line_content": "    } else if (!strcasecmp(subcmd,\"unload\") && c->argc == 3) {",
          "content_same": false
        },
        {
          "line": 2528,
          "old_api": null,
          "new_api": "moduleUnload",
          "old_text": null,
          "new_text": "moduleUnload(c->argv[2]->ptr)",
          "old_line_content": "            case ENOENT: errmsg = \"no such module with that name\";",
          "new_line_content": "        if (moduleUnload(c->argv[2]->ptr) == C_OK)",
          "content_same": false
        },
        {
          "line": 2529,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "            }",
          "new_line_content": "            addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 1503,
          "old_api": null,
          "new_api": "RM_ZsetRangeStop",
          "old_text": null,
          "new_text": "RM_ZsetRangeStop(key)",
          "old_line_content": "    zlexrangespec *zlrs = &key->zlrs;",
          "new_line_content": "    RM_ZsetRangeStop(key);",
          "content_same": false
        },
        {
          "line": 2015,
          "old_api": null,
          "new_api": "moduleParseCallReply",
          "old_text": null,
          "new_text": "moduleParseCallReply(ele)",
          "old_line_content": "}",
          "new_line_content": "        moduleParseCallReply(ele);",
          "content_same": false
        },
        {
          "line": 2034,
          "old_api": null,
          "new_api": "RM_FreeCallReply_Rec",
          "old_text": null,
          "new_text": "RM_FreeCallReply_Rec(reply->val.array+j,1)",
          "old_line_content": "    /* For nested replies, we don't free reply->proto (which if not NULL",
          "new_line_content": "                RM_FreeCallReply_Rec(reply->val.array+j,1);",
          "content_same": false
        },
        {
          "line": 1509,
          "old_api": null,
          "new_api": "zslParseLexRange",
          "old_text": null,
          "new_text": "zslParseLexRange(min, max, zlrs)",
          "old_line_content": "",
          "new_line_content": "    if (zslParseLexRange(min, max, zlrs) == C_ERR) return REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 2535,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(c,\"Error unloading module: %s\",errmsg)",
          "old_line_content": "",
          "new_line_content": "            addReplyErrorFormat(c,\"Error unloading module: %s\",errmsg);",
          "content_same": false
        },
        {
          "line": 2545,
          "old_api": null,
          "new_api": "addReplyMultiBulkLen",
          "old_text": null,
          "new_text": "addReplyMultiBulkLen(c,4)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyMultiBulkLen(c,4);",
          "content_same": false
        },
        {
          "line": 1010,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(ctx->client->db,keyname)",
          "old_line_content": "        }",
          "new_line_content": "        value = lookupKeyWrite(ctx->client->db,keyname);",
          "content_same": false
        },
        {
          "line": 2547,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(name)",
          "old_line_content": "    } else {",
          "new_line_content": "            addReplyBulkCBuffer(c,name,sdslen(name));",
          "content_same": false
        },
        {
          "line": 1012,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(ctx->client->db,keyname)",
          "old_line_content": "",
          "new_line_content": "        value = lookupKeyRead(ctx->client->db,keyname);",
          "content_same": false
        },
        {
          "line": 2549,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,module->ver)",
          "old_line_content": "    }",
          "new_line_content": "            addReplyLongLong(c,module->ver);",
          "content_same": false
        },
        {
          "line": 1521,
          "old_api": null,
          "new_api": "zslFirstInLexRange",
          "old_text": null,
          "new_text": "zslFirstInLexRange(zsl,zlrs)",
          "old_line_content": "    if (key->zcurrent == NULL) key->zer = 1;",
          "new_line_content": "        key->zcurrent = first ? zslFirstInLexRange(zsl,zlrs) :",
          "content_same": false
        },
        {
          "line": 2551,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "",
          "new_line_content": "        dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 1522,
          "old_api": null,
          "new_api": "zslLastInLexRange",
          "old_text": null,
          "new_text": "zslLastInLexRange(zsl,zlrs)",
          "old_line_content": "",
          "new_line_content": "                                zslLastInLexRange(zsl,zlrs);",
          "content_same": false
        },
        {
          "line": 2553,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "",
          "new_line_content": "        addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 1524,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unsupported zset encoding\")",
          "old_line_content": "}",
          "new_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "content_same": false
        },
        {
          "line": 1019,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*kp))",
          "old_line_content": "    kp->value = value;",
          "new_line_content": "    kp = zmalloc(sizeof(*kp));",
          "content_same": false
        },
        {
          "line": 2035,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(reply->val.array)",
          "old_line_content": "     * references the parent reply->proto buffer), nor the structure",
          "new_line_content": "            zfree(reply->val.array);",
          "content_same": false
        },
        {
          "line": 2045,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(reply)",
          "old_line_content": " * to have the first level function to return on nested replies, but only",
          "new_line_content": "        zfree(reply);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 2048,
          "old_api": "RM_FreeCallReply_Rec",
          "new_api": null,
          "old_text": "RM_FreeCallReply_Rec(reply,0)",
          "new_text": null,
          "old_line_content": "    RM_FreeCallReply_Rec(reply,0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2049,
          "old_api": "autoMemoryFreed",
          "new_api": null,
          "old_text": "autoMemoryFreed(reply->ctx,REDISMODULE_AM_REPLY,reply)",
          "new_text": null,
          "old_line_content": "    autoMemoryFreed(reply->ctx,REDISMODULE_AM_REPLY,reply);",
          "new_line_content": "/* Wrapper for the recursive free reply function. This is needed in order",
          "content_same": false
        },
        {
          "line": 1539,
          "old_api": "zsetInitLexRange",
          "new_api": null,
          "old_text": "zsetInitLexRange(key,min,max,1)",
          "new_text": null,
          "old_line_content": "    return zsetInitLexRange(key,min,max,1);",
          "new_line_content": " * 'min' and 'max' should be provided as two RedisModuleString objects",
          "content_same": false
        },
        {
          "line": 1030,
          "old_api": "signalModifiedKey",
          "new_api": null,
          "old_text": "signalModifiedKey(key->db,key->key)",
          "new_text": null,
          "old_line_content": "    if (key->mode & REDISMODULE_WRITE) signalModifiedKey(key->db,key->key);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1032,
          "old_api": "RM_ZsetRangeStop",
          "new_api": null,
          "old_text": "RM_ZsetRangeStop(key)",
          "new_text": null,
          "old_line_content": "    RM_ZsetRangeStop(key);",
          "new_line_content": "/* Close a key handle. */",
          "content_same": false
        },
        {
          "line": 1033,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(key->key)",
          "new_text": null,
          "old_line_content": "    decrRefCount(key->key);",
          "new_line_content": "void RM_CloseKey(RedisModuleKey *key) {",
          "content_same": false
        },
        {
          "line": 1034,
          "old_api": "autoMemoryFreed",
          "new_api": null,
          "old_text": "autoMemoryFreed(key->ctx,REDISMODULE_AM_KEY,key)",
          "new_text": null,
          "old_line_content": "    autoMemoryFreed(key->ctx,REDISMODULE_AM_KEY,key);",
          "new_line_content": "    if (key == NULL) return;",
          "content_same": false
        },
        {
          "line": 2059,
          "old_api": "moduleParseCallReply",
          "new_api": null,
          "old_text": "moduleParseCallReply(reply)",
          "new_text": null,
          "old_line_content": "    moduleParseCallReply(reply);",
          "new_line_content": "    return reply->type;",
          "content_same": false
        },
        {
          "line": 1545,
          "old_api": "zsetInitLexRange",
          "new_api": null,
          "old_text": "zsetInitLexRange(key,min,max,0)",
          "new_text": null,
          "old_line_content": "    return zsetInitLexRange(key,min,max,0);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1558,
          "old_api": "ziplistGetObject",
          "new_api": null,
          "old_text": "ziplistGetObject(eptr)",
          "new_text": null,
          "old_line_content": "        sds ele = ziplistGetObject(eptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1560,
          "old_api": "ziplistNext",
          "new_api": null,
          "old_text": "ziplistNext(key->value->ptr,eptr)",
          "new_text": null,
          "old_line_content": "            sptr = ziplistNext(key->value->ptr,eptr);",
          "new_line_content": "    if (key->value->encoding == OBJ_ENCODING_ZIPLIST) {",
          "content_same": false
        },
        {
          "line": 2073,
          "old_api": "moduleParseCallReply",
          "new_api": null,
          "old_text": "moduleParseCallReply(reply)",
          "new_text": null,
          "old_line_content": "    moduleParseCallReply(reply);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1561,
          "old_api": "zzlGetScore",
          "new_api": null,
          "old_text": "zzlGetScore(sptr)",
          "new_text": null,
          "old_line_content": "            *score = zzlGetScore(sptr);",
          "new_line_content": "        unsigned char *eptr, *sptr;",
          "content_same": false
        },
        {
          "line": 1567,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(ln->ele)",
          "new_text": null,
          "old_line_content": "        str = createStringObject(ln->ele,sdslen(ln->ele));",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2081,
          "old_api": "moduleParseCallReply",
          "new_api": null,
          "old_text": "moduleParseCallReply(reply)",
          "new_text": null,
          "old_line_content": "    moduleParseCallReply(reply);",
          "new_line_content": "    return reply->val.array+idx;",
          "content_same": false
        },
        {
          "line": 1569,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unsupported zset encoding\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "new_line_content": "    } else if (key->value->encoding == OBJ_ENCODING_SKIPLIST) {",
          "content_same": false
        },
        {
          "line": 1571,
          "old_api": "autoMemoryAdd",
          "new_api": null,
          "old_text": "autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,str)",
          "new_text": null,
          "old_line_content": "    autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,str);",
          "new_line_content": "        if (score) *score = ln->score;",
          "content_same": false
        },
        {
          "line": 1062,
          "old_api": "stringObjectLen",
          "new_api": null,
          "old_text": "stringObjectLen(key->value)",
          "new_text": null,
          "old_line_content": "    case OBJ_STRING: return stringObjectLen(key->value);",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 1063,
          "old_api": "listTypeLength",
          "new_api": null,
          "old_text": "listTypeLength(key->value)",
          "new_text": null,
          "old_line_content": "    case OBJ_LIST: return listTypeLength(key->value);",
          "new_line_content": " * If the key pointer is NULL or the key is empty, zero is returned. */",
          "content_same": false
        },
        {
          "line": 2088,
          "old_api": "moduleParseCallReply",
          "new_api": null,
          "old_text": "moduleParseCallReply(reply)",
          "new_text": null,
          "old_line_content": "    moduleParseCallReply(reply);",
          "new_line_content": "    return reply->val.ll;",
          "content_same": false
        },
        {
          "line": 1064,
          "old_api": "setTypeSize",
          "new_api": null,
          "old_text": "setTypeSize(key->value)",
          "new_text": null,
          "old_line_content": "    case OBJ_SET: return setTypeSize(key->value);",
          "new_line_content": "size_t RM_ValueLength(RedisModuleKey *key) {",
          "content_same": false
        },
        {
          "line": 1065,
          "old_api": "zsetLength",
          "new_api": null,
          "old_text": "zsetLength(key->value)",
          "new_text": null,
          "old_line_content": "    case OBJ_ZSET: return zsetLength(key->value);",
          "new_line_content": "    if (key == NULL || key->value == NULL) return 0;",
          "content_same": false
        },
        {
          "line": 1066,
          "old_api": "hashTypeLength",
          "new_api": null,
          "old_text": "hashTypeLength(key->value)",
          "new_text": null,
          "old_line_content": "    case OBJ_HASH: return hashTypeLength(key->value);",
          "new_line_content": "    switch(key->value->type) {",
          "content_same": false
        },
        {
          "line": 1585,
          "old_api": "ziplistNext",
          "new_api": null,
          "old_text": "ziplistNext(zl,eptr)",
          "new_text": null,
          "old_line_content": "        next = ziplistNext(zl,eptr); /* Skip element. */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2098,
          "old_api": "moduleParseCallReply",
          "new_api": null,
          "old_text": "moduleParseCallReply(reply)",
          "new_text": null,
          "old_line_content": "    moduleParseCallReply(reply);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1586,
          "old_api": "ziplistNext",
          "new_api": null,
          "old_text": "ziplistNext(zl,next)",
          "new_text": null,
          "old_line_content": "        if (next) next = ziplistNext(zl,next); /* Skip score. */",
          "new_line_content": "    if (key->value->encoding == OBJ_ENCODING_ZIPLIST) {",
          "content_same": false
        },
        {
          "line": 2102,
          "old_api": "RM_CreateString",
          "new_api": null,
          "old_text": "RM_CreateString(reply->ctx,reply->val.str,reply->len)",
          "new_text": null,
          "old_line_content": "        return RM_CreateString(reply->ctx,reply->val.str,reply->len);",
          "new_line_content": "RedisModuleString *RM_CreateStringFromCallReply(RedisModuleCallReply *reply) {",
          "content_same": false
        },
        {
          "line": 1078,
          "old_api": "dbDelete",
          "new_api": null,
          "old_text": "dbDelete(key->db,key->key)",
          "new_text": null,
          "old_line_content": "        dbDelete(key->db,key->key);",
          "new_line_content": " * On success REDISMODULE_OK is returned. If the key is not open for",
          "content_same": false
        },
        {
          "line": 2105,
          "old_api": "ll2string",
          "new_api": null,
          "old_text": "ll2string(buf,sizeof(buf),reply->val.ll)",
          "new_text": null,
          "old_line_content": "        int len = ll2string(buf,sizeof(buf),reply->val.ll);",
          "new_line_content": "    case REDISMODULE_REPLY_STRING:",
          "content_same": false
        },
        {
          "line": 2106,
          "old_api": "RM_CreateString",
          "new_api": null,
          "old_text": "RM_CreateString(reply->ctx,buf,len)",
          "new_text": null,
          "old_line_content": "        return RM_CreateString(reply->ctx,buf,len);",
          "new_line_content": "    case REDISMODULE_REPLY_ERROR:",
          "content_same": false
        },
        {
          "line": 1596,
          "old_api": "ziplistNext",
          "new_api": null,
          "old_text": "ziplistNext(zl,next)",
          "new_text": null,
          "old_line_content": "                next = ziplistNext(zl,next); /* Skip next element. */",
          "new_line_content": "            /* Are we still within the range? */",
          "content_same": false
        },
        {
          "line": 1597,
          "old_api": "zzlGetScore",
          "new_api": null,
          "old_text": "zzlGetScore(next)",
          "new_text": null,
          "old_line_content": "                double score = zzlGetScore(next); /* Obtain the next score. */",
          "new_line_content": "            if (key->ztype == REDISMODULE_ZSET_RANGE_SCORE) {",
          "content_same": false
        },
        {
          "line": 1598,
          "old_api": "zslValueLteMax",
          "new_api": null,
          "old_text": "zslValueLteMax(score,&key->zrs)",
          "new_text": null,
          "old_line_content": "                if (!zslValueLteMax(score,&key->zrs)) {",
          "new_line_content": "                /* Fetch the next element score for the",
          "content_same": false
        },
        {
          "line": 1088,
          "old_api": "getExpire",
          "new_api": null,
          "old_text": "getExpire(key->db,key->key)",
          "new_text": null,
          "old_line_content": "    mstime_t expire = getExpire(key->db,key->key);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1090,
          "old_api": "mstime",
          "new_api": null,
          "old_text": "mstime()",
          "new_text": null,
          "old_line_content": "    expire -= mstime();",
          "new_line_content": " * If no TTL is associated with the key or if the key is empty,",
          "content_same": false
        },
        {
          "line": 1604,
          "old_api": "zzlLexValueLteMax",
          "new_api": null,
          "old_text": "zzlLexValueLteMax(next,&key->zlrs)",
          "new_text": null,
          "old_line_content": "                if (!zzlLexValueLteMax(next,&key->zlrs)) {",
          "new_line_content": "                    key->zer = 1;",
          "content_same": false
        },
        {
          "line": 1107,
          "old_api": "mstime",
          "new_api": null,
          "old_text": "mstime()",
          "new_text": null,
          "old_line_content": "        expire += mstime();",
          "new_line_content": " * the key was not open for writing or is an empty key. */",
          "content_same": false
        },
        {
          "line": 2132,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(fmt)",
          "new_text": null,
          "old_line_content": "    argv_size = strlen(fmt)+1; /* +1 because of the command name. */",
          "new_line_content": "    int argc = 0, argv_size, j;",
          "content_same": false
        },
        {
          "line": 2133,
          "old_api": "zrealloc",
          "new_api": null,
          "old_text": "zrealloc(argv,sizeof(robj*)*argv_size)",
          "new_text": null,
          "old_line_content": "    argv = zrealloc(argv,sizeof(robj*)*argv_size);",
          "new_line_content": "    robj **argv = NULL;",
          "content_same": false
        },
        {
          "line": 1108,
          "old_api": "setExpire",
          "new_api": null,
          "old_text": "setExpire(key->db,key->key,expire)",
          "new_text": null,
          "old_line_content": "        setExpire(key->db,key->key,expire);",
          "new_line_content": "int RM_SetExpire(RedisModuleKey *key, mstime_t expire) {",
          "content_same": false
        },
        {
          "line": 1110,
          "old_api": "removeExpire",
          "new_api": null,
          "old_text": "removeExpire(key->db,key->key)",
          "new_text": null,
          "old_line_content": "        removeExpire(key->db,key->key);",
          "new_line_content": "        return REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 2136,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(cmdname)",
          "new_text": null,
          "old_line_content": "    argv[0] = createStringObject(cmdname,strlen(cmdname));",
          "new_line_content": "     * hold one argument for each char specifier in 'fmt'. */",
          "content_same": false
        },
        {
          "line": 1620,
          "old_api": "zslValueLteMax",
          "new_api": null,
          "old_text": "zslValueLteMax(ln->score,&key->zrs)",
          "new_text": null,
          "old_line_content": "                !zslValueLteMax(ln->score,&key->zrs))",
          "new_line_content": "            key->zer = 1;",
          "content_same": false
        },
        {
          "line": 2143,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap,char*)",
          "new_text": null,
          "old_line_content": "            char *cstr = va_arg(ap,char*);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2144,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(cstr)",
          "new_text": null,
          "old_line_content": "            argv[argc++] = createStringObject(cstr,strlen(cstr));",
          "new_line_content": "    /* Create the client and dispatch the command. */",
          "content_same": false
        },
        {
          "line": 609,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(ptr)",
          "new_text": null,
          "old_line_content": "        case REDISMODULE_AM_STRING: decrRefCount(ptr); break;",
          "new_line_content": "    ctx->flags &= ~REDISMODULE_CTX_AUTO_MEMORY;",
          "content_same": false
        },
        {
          "line": 2146,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap,void*)",
          "new_text": null,
          "old_line_content": "            robj *obj = va_arg(ap,void*);",
          "new_line_content": "    while(*p) {",
          "content_same": false
        },
        {
          "line": 610,
          "old_api": "RM_FreeCallReply",
          "new_api": null,
          "old_text": "RM_FreeCallReply(ptr)",
          "new_text": null,
          "old_line_content": "        case REDISMODULE_AM_REPLY: RM_FreeCallReply(ptr); break;",
          "new_line_content": "    int j;",
          "content_same": false
        },
        {
          "line": 611,
          "old_api": "RM_CloseKey",
          "new_api": null,
          "old_text": "RM_CloseKey(ptr)",
          "new_text": null,
          "old_line_content": "        case REDISMODULE_AM_KEY: RM_CloseKey(ptr); break;",
          "new_line_content": "    for (j = 0; j < ctx->amqueue_used; j++) {",
          "content_same": false
        },
        {
          "line": 1125,
          "old_api": "RM_DeleteKey",
          "new_api": null,
          "old_text": "RM_DeleteKey(key)",
          "new_text": null,
          "old_line_content": "    RM_DeleteKey(key);",
          "new_line_content": " * value of the key, deleting the old value if any.",
          "content_same": false
        },
        {
          "line": 2150,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap,char*)",
          "new_text": null,
          "old_line_content": "            char *buf = va_arg(ap,char*);",
          "new_line_content": "        } else if (*p == 's') {",
          "content_same": false
        },
        {
          "line": 1126,
          "old_api": "setKey",
          "new_api": null,
          "old_text": "setKey(key->db,key->key,str)",
          "new_text": null,
          "old_line_content": "    setKey(key->db,key->key,str);",
          "new_line_content": " * On success REDISMODULE_OK is returned. If the key is not open for",
          "content_same": false
        },
        {
          "line": 2152,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject(buf,len)",
          "new_text": null,
          "old_line_content": "            argv[argc++] = createStringObject(buf,len);",
          "new_line_content": "            argv[argc++] = obj;",
          "content_same": false
        },
        {
          "line": 1634,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unsupported zset encoding\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 2154,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap,long long)",
          "new_text": null,
          "old_line_content": "            long ll = va_arg(ap,long long);",
          "new_line_content": "        } else if (*p == 'b') {",
          "content_same": false
        },
        {
          "line": 2158,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap, void*)",
          "new_text": null,
          "old_line_content": "             robj **v = va_arg(ap, void*);",
          "new_line_content": "        } else if (*p == 'l') {",
          "content_same": false
        },
        {
          "line": 1648,
          "old_api": "ziplistPrev",
          "new_api": null,
          "old_text": "ziplistPrev(zl,eptr)",
          "new_text": null,
          "old_line_content": "        prev = ziplistPrev(zl,eptr); /* Go back to previous score. */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1649,
          "old_api": "ziplistPrev",
          "new_api": null,
          "old_text": "ziplistPrev(zl,prev)",
          "new_text": null,
          "old_line_content": "        if (prev) prev = ziplistPrev(zl,prev); /* Back to previous ele. */",
          "new_line_content": "    if (key->value->encoding == OBJ_ENCODING_ZIPLIST) {",
          "content_same": false
        },
        {
          "line": 2165,
          "old_api": "zrealloc",
          "new_api": null,
          "old_text": "zrealloc(argv,sizeof(robj*)*argv_size)",
          "new_text": null,
          "old_line_content": "             argv = zrealloc(argv,sizeof(robj*)*argv_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 632,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject(ptr,len)",
          "new_text": null,
          "old_line_content": "    RedisModuleString *o = createStringObject(ptr,len);",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 2169,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(v[i])",
          "new_text": null,
          "old_line_content": "                 incrRefCount(v[i]);",
          "new_line_content": "             argv_size += vlen-1;",
          "content_same": false
        },
        {
          "line": 633,
          "old_api": "autoMemoryAdd",
          "new_api": null,
          "old_text": "autoMemoryAdd(ctx,REDISMODULE_AM_STRING,o)",
          "new_text": null,
          "old_line_content": "    autoMemoryAdd(ctx,REDISMODULE_AM_STRING,o);",
          "new_line_content": " * The string is created by copying the `len` bytes starting",
          "content_same": false
        },
        {
          "line": 1659,
          "old_api": "ziplistNext",
          "new_api": null,
          "old_text": "ziplistNext(zl,prev)",
          "new_text": null,
          "old_line_content": "                prev = ziplistNext(zl,prev); /* Skip element to get the score.*/",
          "new_line_content": "            /* Are we still within the range? */",
          "content_same": false
        },
        {
          "line": 1660,
          "old_api": "zzlGetScore",
          "new_api": null,
          "old_text": "zzlGetScore(prev)",
          "new_text": null,
          "old_line_content": "                double score = zzlGetScore(prev); /* Obtain the prev score. */",
          "new_line_content": "            if (key->ztype == REDISMODULE_ZSET_RANGE_SCORE) {",
          "content_same": false
        },
        {
          "line": 1661,
          "old_api": "zslValueGteMin",
          "new_api": null,
          "old_text": "zslValueGteMin(score,&key->zrs)",
          "new_text": null,
          "old_line_content": "                if (!zslValueGteMin(score,&key->zrs)) {",
          "new_line_content": "                /* Fetch the previous element score for the",
          "content_same": false
        },
        {
          "line": 1667,
          "old_api": "zzlLexValueGteMin",
          "new_api": null,
          "old_text": "zzlLexValueGteMin(prev,&key->zlrs)",
          "new_text": null,
          "old_line_content": "                if (!zzlLexValueGteMin(prev,&key->zlrs)) {",
          "new_line_content": "                    key->zer = 1;",
          "content_same": false
        },
        {
          "line": 644,
          "old_api": "ll2string",
          "new_api": null,
          "old_text": "ll2string(buf,sizeof(buf),ll)",
          "new_text": null,
          "old_line_content": "    size_t len = ll2string(buf,sizeof(buf),ll);",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 645,
          "old_api": "RM_CreateString",
          "new_api": null,
          "old_text": "RM_CreateString(ctx,buf,len)",
          "new_text": null,
          "old_line_content": "    return RM_CreateString(ctx,buf,len);",
          "new_line_content": " * The returned string must be released with RedisModule_FreeString() or by",
          "content_same": false
        },
        {
          "line": 2184,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(argv[j])",
          "new_text": null,
          "old_line_content": "        decrRefCount(argv[j]);",
          "new_line_content": "    *argcp = argc;",
          "content_same": false
        },
        {
          "line": 2185,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(argv)",
          "new_text": null,
          "old_line_content": "    zfree(argv);",
          "new_line_content": "    return argv;",
          "content_same": false
        },
        {
          "line": 655,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(str)",
          "new_text": null,
          "old_line_content": "    decrRefCount(str);",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 656,
          "old_api": "autoMemoryFreed",
          "new_api": null,
          "old_text": "autoMemoryFreed(ctx,REDISMODULE_AM_STRING,str)",
          "new_text": null,
          "old_line_content": "    autoMemoryFreed(ctx,REDISMODULE_AM_STRING,str);",
          "new_line_content": " * It is possible to call this function even when automatic memory management",
          "content_same": false
        },
        {
          "line": 1683,
          "old_api": "zslValueGteMin",
          "new_api": null,
          "old_text": "zslValueGteMin(ln->score,&key->zrs)",
          "new_text": null,
          "old_line_content": "                !zslValueGteMin(ln->score,&key->zrs))",
          "new_line_content": "            key->zer = 1;",
          "content_same": false
        },
        {
          "line": 663,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(str->ptr)",
          "new_text": null,
          "old_line_content": "    if (len) *len = sdslen(str->ptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1176,
          "old_api": "dbUnshareStringValue",
          "new_api": null,
          "old_text": "dbUnshareStringValue(key->db, key->key, key->value)",
          "new_text": null,
          "old_line_content": "        key->value = dbUnshareStringValue(key->db, key->key, key->value);",
          "new_line_content": "    if (key->value->type != OBJ_STRING) return NULL;",
          "content_same": false
        },
        {
          "line": 1178,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(key->value->ptr)",
          "new_text": null,
          "old_line_content": "    *len = sdslen(key->value->ptr);",
          "new_line_content": "    /* For write access, and even for read access if the object is encoded,",
          "content_same": false
        },
        {
          "line": 2204,
          "old_api": "lookupCommandByCString",
          "new_api": null,
          "old_text": "lookupCommandByCString((char*)cmdname)",
          "new_text": null,
          "old_line_content": "    cmd = lookupCommandByCString((char*)cmdname);",
          "new_line_content": "    int argc = 0, flags = 0;",
          "content_same": false
        },
        {
          "line": 672,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(str->ptr)",
          "new_text": null,
          "old_line_content": "    return string2ll(str->ptr,sdslen(str->ptr),ll) ? REDISMODULE_OK :",
          "new_line_content": "/* Convert the string into a long long integer, storing it at `*ll`.",
          "content_same": false
        },
        {
          "line": 1697,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unsupported zset encoding\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 2211,
          "old_api": "va_start",
          "new_api": null,
          "old_text": "va_start(ap, fmt)",
          "new_text": null,
          "old_line_content": "    va_start(ap, fmt);",
          "new_line_content": "        errno = EINVAL;",
          "content_same": false
        },
        {
          "line": 2212,
          "old_api": "createClient",
          "new_api": null,
          "old_text": "createClient(-1)",
          "new_text": null,
          "old_line_content": "    c = createClient(-1);",
          "new_line_content": "        return NULL;",
          "content_same": false
        },
        {
          "line": 2213,
          "old_api": "moduleCreateArgvFromUserFormat",
          "new_api": null,
          "old_text": "moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap)",
          "new_text": null,
          "old_line_content": "    argv = moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2215,
          "old_api": "va_end",
          "new_api": null,
          "old_text": "va_end(ap)",
          "new_text": null,
          "old_line_content": "    va_end(ap);",
          "new_line_content": "    /* Create the client and dispatch the command. */",
          "content_same": false
        },
        {
          "line": 680,
          "old_api": "getDoubleFromObject",
          "new_api": null,
          "old_text": "getDoubleFromObject(str,d)",
          "new_text": null,
          "old_line_content": "    int retval = getDoubleFromObject(str,d);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1205,
          "old_api": "sdsnewlen",
          "new_api": null,
          "old_text": "sdsnewlen(NULL, newlen)",
          "new_text": null,
          "old_line_content": "        robj *o = createObject(OBJ_STRING,sdsnewlen(NULL, newlen));",
          "new_line_content": "     * doing anything. */",
          "content_same": false
        },
        {
          "line": 1206,
          "old_api": "setKey",
          "new_api": null,
          "old_text": "setKey(key->db,key->key,o)",
          "new_text": null,
          "old_line_content": "        setKey(key->db,key->key,o);",
          "new_line_content": "    if (key->value == NULL && newlen == 0) return REDISMODULE_OK;",
          "content_same": false
        },
        {
          "line": 1208,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(o)",
          "new_text": null,
          "old_line_content": "        decrRefCount(o);",
          "new_line_content": "    if (key->value == NULL) {",
          "content_same": false
        },
        {
          "line": 1212,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(key->value->ptr)",
          "new_text": null,
          "old_line_content": "        size_t curlen = sdslen(key->value->ptr);",
          "new_line_content": "        key->value = o;",
          "content_same": false
        },
        {
          "line": 702,
          "old_api": "addReplyErrorFormat",
          "new_api": null,
          "old_text": "addReplyErrorFormat(ctx->client,\n        \"wrong number of arguments for '%s' command\",\n        (char*)ctx->client->argv[0]->ptr)",
          "new_text": null,
          "old_line_content": "    addReplyErrorFormat(ctx->client,",
          "new_line_content": " * Example:",
          "content_same": false
        },
        {
          "line": 2239,
          "old_api": "getNodeByQuery",
          "new_api": null,
          "old_text": "getNodeByQuery(c,c->cmd,c->argv,c->argc,NULL,NULL)",
          "new_text": null,
          "old_line_content": "        if (getNodeByQuery(c,c->cmd,c->argv,c->argc,NULL,NULL) !=",
          "new_line_content": "     * received from our master. */",
          "content_same": false
        },
        {
          "line": 1214,
          "old_api": "sdsgrowzero",
          "new_api": null,
          "old_text": "sdsgrowzero(key->value->ptr,newlen)",
          "new_text": null,
          "old_line_content": "            key->value->ptr = sdsgrowzero(key->value->ptr,newlen);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1218,
          "old_api": "sdsavail",
          "new_api": null,
          "old_text": "sdsavail(key->value->ptr)",
          "new_text": null,
          "old_line_content": "            if (sdslen(key->value->ptr) < sdsavail(key->value->ptr))",
          "new_line_content": "        if (newlen > curlen) {",
          "content_same": false
        },
        {
          "line": 711,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(ctx->client,ll)",
          "new_text": null,
          "old_line_content": "    addReplyLongLong(ctx->client,ll);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2250,
          "old_api": "moduleReplicateMultiIfNeeded",
          "new_api": null,
          "old_text": "moduleReplicateMultiIfNeeded(ctx)",
          "new_text": null,
          "old_line_content": "    if (replicate) moduleReplicateMultiIfNeeded(ctx);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 719,
          "old_api": "sdsnewlen",
          "new_api": null,
          "old_text": "sdsnewlen(prefix,1)",
          "new_text": null,
          "old_line_content": "    sds strmsg = sdsnewlen(prefix,1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 720,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(strmsg,msg)",
          "new_text": null,
          "old_line_content": "    strmsg = sdscat(strmsg,msg);",
          "new_line_content": "/* Reply with an error or simple string (status message). Used to implement",
          "content_same": false
        },
        {
          "line": 721,
          "old_api": "sdscatlen",
          "new_api": null,
          "old_text": "sdscatlen(strmsg,\"\\r\\n\",2)",
          "new_text": null,
          "old_line_content": "    strmsg = sdscatlen(strmsg,\"\\r\\n\",2);",
          "new_line_content": " * ReplyWithSimpleString() and ReplyWithError().",
          "content_same": false
        },
        {
          "line": 2258,
          "old_api": "call",
          "new_api": null,
          "old_text": "call(c,call_flags)",
          "new_text": null,
          "old_line_content": "    call(c,call_flags);",
          "new_line_content": "    int call_flags = CMD_CALL_SLOWLOG | CMD_CALL_STATS;",
          "content_same": false
        },
        {
          "line": 722,
          "old_api": "addReplySds",
          "new_api": null,
          "old_text": "addReplySds(ctx->client,strmsg)",
          "new_text": null,
          "old_line_content": "    addReplySds(ctx->client,strmsg);",
          "new_line_content": " * The function always returns REDISMODULE_OK. */",
          "content_same": false
        },
        {
          "line": 1236,
          "old_api": "moduleCreateEmptyKey",
          "new_api": null,
          "old_text": "moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_LIST)",
          "new_text": null,
          "old_line_content": "    if (key->value == NULL) moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_LIST);",
          "new_line_content": " * is created. On error (key opened for read-only operations or of the wrong",
          "content_same": false
        },
        {
          "line": 1237,
          "old_api": "listTypePush",
          "new_api": null,
          "old_text": "listTypePush(key->value, ele,\n        (where == REDISMODULE_LIST_HEAD) ? QUICKLIST_HEAD : QUICKLIST_TAIL)",
          "new_text": null,
          "old_line_content": "    listTypePush(key->value, ele,",
          "new_line_content": " * type) REDISMODULE_ERR is returned, otherwise REDISMODULE_OK is returned. */",
          "content_same": false
        },
        {
          "line": 2265,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(c->reply)",
          "new_text": null,
          "old_line_content": "    while(listLength(c->reply)) {",
          "new_line_content": "    /* Convert the result of the Redis command into a suitable Lua type.",
          "content_same": false
        },
        {
          "line": 2266,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(c->reply)",
          "new_text": null,
          "old_line_content": "        sds o = listNodeValue(listFirst(c->reply));",
          "new_line_content": "     * The first thing we need is to create a single string from the client",
          "content_same": false
        },
        {
          "line": 2269,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(c->reply)",
          "new_text": null,
          "old_line_content": "        listDelNode(c->reply,listFirst(c->reply));",
          "new_line_content": "    c->bufpos = 0;",
          "content_same": false
        },
        {
          "line": 1759,
          "old_api": "moduleCreateEmptyKey",
          "new_api": null,
          "old_text": "moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_HASH)",
          "new_text": null,
          "old_line_content": "    if (key->value == NULL) moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_HASH);",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 2272,
          "old_api": "autoMemoryAdd",
          "new_api": null,
          "old_text": "autoMemoryAdd(ctx,REDISMODULE_AM_REPLY,reply)",
          "new_text": null,
          "old_line_content": "    autoMemoryAdd(ctx,REDISMODULE_AM_REPLY,reply);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1762,
          "old_api": "va_start",
          "new_api": null,
          "old_text": "va_start(ap, flags)",
          "new_text": null,
          "old_line_content": "    va_start(ap, flags);",
          "new_line_content": "    if (!(key->mode & REDISMODULE_WRITE)) return 0;",
          "content_same": false
        },
        {
          "line": 2275,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(c)",
          "new_text": null,
          "old_line_content": "    freeClient(c);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 741,
          "old_api": "replyWithStatus",
          "new_api": null,
          "old_text": "replyWithStatus(ctx,err,\"-\")",
          "new_text": null,
          "old_line_content": "    return replyWithStatus(ctx,err,\"-\");",
          "new_line_content": " *  RM_ReplyWithError(ctx,\"Wrong Type\");",
          "content_same": false
        },
        {
          "line": 1253,
          "old_api": "listTypePop",
          "new_api": null,
          "old_text": "listTypePop(key->value,\n        (where == REDISMODULE_LIST_HEAD) ? QUICKLIST_HEAD : QUICKLIST_TAIL)",
          "new_text": null,
          "old_line_content": "    robj *ele = listTypePop(key->value,",
          "new_line_content": " * 3) The key is not a list. */",
          "content_same": false
        },
        {
          "line": 1255,
          "old_api": "getDecodedObject",
          "new_api": null,
          "old_text": "getDecodedObject(ele)",
          "new_text": null,
          "old_line_content": "    robj *decoded = getDecodedObject(ele);",
          "new_line_content": "    if (!(key->mode & REDISMODULE_WRITE) ||",
          "content_same": false
        },
        {
          "line": 1256,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(ele)",
          "new_text": null,
          "old_line_content": "    decrRefCount(ele);",
          "new_line_content": "        key->value == NULL ||",
          "content_same": false
        },
        {
          "line": 1257,
          "old_api": "moduleDelKeyIfEmpty",
          "new_api": null,
          "old_text": "moduleDelKeyIfEmpty(key)",
          "new_text": null,
          "old_line_content": "    moduleDelKeyIfEmpty(key);",
          "new_line_content": "        key->value->type != OBJ_LIST) return NULL;",
          "content_same": false
        },
        {
          "line": 2282,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(reply->proto)",
          "new_text": null,
          "old_line_content": "    if (reply->proto) *len = sdslen(reply->proto);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1769,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(cfield)",
          "new_text": null,
          "old_line_content": "            field = createRawStringObject(cfield,strlen(cfield));",
          "new_line_content": "        RedisModuleString *field, *value;",
          "content_same": false
        },
        {
          "line": 1771,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap,RedisModuleString*)",
          "new_text": null,
          "old_line_content": "            field = va_arg(ap,RedisModuleString*);",
          "new_line_content": "        if (flags & REDISMODULE_HASH_CFIELDS) {",
          "content_same": false
        },
        {
          "line": 750,
          "old_api": "replyWithStatus",
          "new_api": null,
          "old_text": "replyWithStatus(ctx,msg,\"+\")",
          "new_text": null,
          "old_line_content": "    return replyWithStatus(ctx,msg,\"+\");",
          "new_line_content": " * are suitable only when sending a small non-binary string with small",
          "content_same": false
        },
        {
          "line": 1778,
          "old_api": "hashTypeExists",
          "new_api": null,
          "old_text": "hashTypeExists(key->value, field->ptr)",
          "new_text": null,
          "old_line_content": "            int exists = hashTypeExists(key->value, field->ptr);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2294,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen((char*)key)",
          "new_text": null,
          "old_line_content": "    return dictGenHashFunction((unsigned char*)key, strlen((char*)key));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1782,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(field)",
          "new_text": null,
          "old_line_content": "                if (flags & REDISMODULE_HASH_CFIELDS) decrRefCount(field);",
          "new_line_content": "        if (flags & (REDISMODULE_HASH_XX|REDISMODULE_HASH_NX)) {",
          "content_same": false
        },
        {
          "line": 2298,
          "old_api": "DICT_NOTUSED",
          "new_api": null,
          "old_text": "DICT_NOTUSED(privdata)",
          "new_text": null,
          "old_line_content": "    DICT_NOTUSED(privdata);",
          "new_line_content": "unsigned int dictCStringKeyHash(const void *key) {",
          "content_same": false
        },
        {
          "line": 1789,
          "old_api": "hashTypeDelete",
          "new_api": null,
          "old_text": "hashTypeDelete(key->value, field->ptr)",
          "new_text": null,
          "old_line_content": "            updated += hashTypeDelete(key->value, field->ptr);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 766,
          "old_api": "zrealloc",
          "new_api": null,
          "old_text": "zrealloc(ctx->postponed_arrays,sizeof(void*)*\n                (ctx->postponed_arrays_count+1))",
          "new_text": null,
          "old_line_content": "        ctx->postponed_arrays = zrealloc(ctx->postponed_arrays,sizeof(void*)*",
          "new_line_content": " * latest \"open\" count if there are multiple ones).",
          "content_same": false
        },
        {
          "line": 1790,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(field)",
          "new_text": null,
          "old_line_content": "            if (flags & REDISMODULE_HASH_CFIELDS) decrRefCount(field);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 769,
          "old_api": "addDeferredMultiBulkLength",
          "new_api": null,
          "old_text": "addDeferredMultiBulkLength(ctx->client)",
          "new_text": null,
          "old_line_content": "            addDeferredMultiBulkLength(ctx->client);",
          "new_line_content": "int RM_ReplyWithArray(RedisModuleCtx *ctx, long len) {",
          "content_same": false
        },
        {
          "line": 772,
          "old_api": "addReplyMultiBulkLen",
          "new_api": null,
          "old_text": "addReplyMultiBulkLen(ctx->client,len)",
          "new_text": null,
          "old_line_content": "        addReplyMultiBulkLen(ctx->client,len);",
          "new_line_content": "                (ctx->postponed_arrays_count+1));",
          "content_same": false
        },
        {
          "line": 2312,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(server.moduleapi, (char*)funcname, funcptr)",
          "new_text": null,
          "old_line_content": "    return dictAdd(server.moduleapi, (char*)funcname, funcptr);",
          "new_line_content": "    NULL,                      /* key destructor */",
          "content_same": false
        },
        {
          "line": 1800,
          "old_api": "hashTypeSet",
          "new_api": null,
          "old_text": "hashTypeSet(key->value, field->ptr, value->ptr, low_flags)",
          "new_text": null,
          "old_line_content": "        updated += hashTypeSet(key->value, field->ptr, value->ptr, low_flags);",
          "new_line_content": "        /* If CFIELDS is active, we can pass the ownership of the",
          "content_same": false
        },
        {
          "line": 1806,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(field)",
          "new_text": null,
          "old_line_content": "           decrRefCount(field);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2320,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&moduleAPIDictType,NULL)",
          "new_text": null,
          "old_line_content": "    server.moduleapi = dictCreate(&moduleAPIDictType,NULL);",
          "new_line_content": "#define REGISTER_API(name) \\",
          "content_same": false
        },
        {
          "line": 2321,
          "old_api": "REGISTER_API",
          "new_api": null,
          "old_text": "REGISTER_API(CreateCommand)",
          "new_text": null,
          "old_line_content": "    REGISTER_API(CreateCommand);",
          "new_line_content": "    moduleRegisterApi(\"RedisModule_\" #name, (void *)(unsigned long)RM_ ## name)",
          "content_same": false
        },
        {
          "line": 2322,
          "old_api": "REGISTER_API",
          "new_api": null,
          "old_text": "REGISTER_API(SetModuleAttribs)",
          "new_text": null,
          "old_line_content": "    REGISTER_API(SetModuleAttribs);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2323,
          "old_api": "REGISTER_API",
          "new_api": null,
          "old_text": "REGISTER_API(WrongArity)",
          "new_text": null,
          "old_line_content": "    REGISTER_API(WrongArity);",
          "new_line_content": "/* Register all the APIs we export. */",
          "content_same": false
        },
        {
          "line": 2324,
          "old_api": "REGISTER_API",
          "new_api": null,
          "old_text": "REGISTER_API(ReplyWithLongLong)",
          "new_text": null,
          "old_line_content": "    REGISTER_API(ReplyWithLongLong);",
          "new_line_content": "void moduleRegisterCoreAPI(void) {",
          "content_same": false
        },
        {
          "line": 1809,
          "old_api": "va_end",
          "new_api": null,
          "old_text": "va_end(ap)",
          "new_text": null,
          "old_line_content": "    va_end(ap);",
          "new_line_content": "        if (flags & REDISMODULE_HASH_CFIELDS) {",
          "content_same": false
        },
        {
          "line": 1810,
          "old_api": "moduleDelKeyIfEmpty",
          "new_api": null,
          "old_text": "moduleDelKeyIfEmpty(key)",
          "new_text": null,
          "old_line_content": "    moduleDelKeyIfEmpty(key);",
          "new_line_content": "           field->ptr = NULL; /* Prevent the SDS string from being freed. */",
          "content_same": false
        },
        {
          "line": 1316,
          "old_api": "moduleCreateEmptyKey",
          "new_api": null,
          "old_text": "moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_ZSET)",
          "new_text": null,
          "old_line_content": "    if (key->value == NULL) moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_ZSET);",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n            \"API misuse detected in module %s: \"\n            \"RedisModule_ReplySetArrayLength() called without previous \"\n            \"RedisModule_ReplyWithArray(ctx,REDISMODULE_POSTPONED_ARRAY_LEN) \"\n            \"call.\", ctx->module->name)",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,",
          "new_line_content": " * the code may use an interator or other ways of creating the output so",
          "content_same": false
        },
        {
          "line": 1317,
          "old_api": "RM_ZsetAddFlagsToCoreFlags",
          "new_api": null,
          "old_text": "RM_ZsetAddFlagsToCoreFlags(*flagsptr)",
          "new_text": null,
          "old_line_content": "    if (flagsptr) flags = RM_ZsetAddFlagsToCoreFlags(*flagsptr);",
          "new_line_content": "int RM_ZsetAdd(RedisModuleKey *key, double score, RedisModuleString *ele, int *flagsptr) {",
          "content_same": false
        },
        {
          "line": 1318,
          "old_api": "zsetAdd",
          "new_api": null,
          "old_text": "zsetAdd(key->value,score,ele->ptr,&flags,NULL)",
          "new_text": null,
          "old_line_content": "    if (zsetAdd(key->value,score,ele->ptr,&flags,NULL) == 0) {",
          "new_line_content": "    int flags = 0;",
          "content_same": false
        },
        {
          "line": 813,
          "old_api": "setDeferredMultiBulkLength",
          "new_api": null,
          "old_text": "setDeferredMultiBulkLength(ctx->client,\n            ctx->postponed_arrays[ctx->postponed_arrays_count],\n            len)",
          "new_text": null,
          "old_line_content": "    setDeferredMultiBulkLength(ctx->client,",
          "new_line_content": "            \"RedisModule_ReplyWithArray(ctx,REDISMODULE_POSTPONED_ARRAY_LEN) \"",
          "content_same": false
        },
        {
          "line": 817,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(ctx->postponed_arrays)",
          "new_text": null,
          "old_line_content": "        zfree(ctx->postponed_arrays);",
          "new_line_content": "    ctx->postponed_arrays_count--;",
          "content_same": false
        },
        {
          "line": 826,
          "old_api": "addReplyBulkCBuffer",
          "new_api": null,
          "old_text": "addReplyBulkCBuffer(ctx->client,(char*)buf,len)",
          "new_text": null,
          "old_line_content": "    addReplyBulkCBuffer(ctx->client,(char*)buf,len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1343,
          "old_api": "moduleCreateEmptyKey",
          "new_api": null,
          "old_text": "moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_ZSET)",
          "new_text": null,
          "old_line_content": "    if (key->value == NULL) moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_ZSET);",
          "new_line_content": " * is returned. */",
          "content_same": false
        },
        {
          "line": 1344,
          "old_api": "RM_ZsetAddFlagsToCoreFlags",
          "new_api": null,
          "old_text": "RM_ZsetAddFlagsToCoreFlags(*flagsptr)",
          "new_text": null,
          "old_line_content": "    if (flagsptr) flags = RM_ZsetAddFlagsToCoreFlags(*flagsptr);",
          "new_line_content": "int RM_ZsetIncrby(RedisModuleKey *key, double score, RedisModuleString *ele, int *flagsptr, double *newscore) {",
          "content_same": false
        },
        {
          "line": 834,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(ctx->client,str)",
          "new_text": null,
          "old_line_content": "    addReplyBulk(ctx->client,str);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1346,
          "old_api": "zsetAdd",
          "new_api": null,
          "old_text": "zsetAdd(key->value,score,ele->ptr,&flags,newscore)",
          "new_text": null,
          "old_line_content": "    if (zsetAdd(key->value,score,ele->ptr,&flags,newscore) == 0) {",
          "new_line_content": "    if (!(key->mode & REDISMODULE_WRITE)) return REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 1859,
          "old_api": "va_start",
          "new_api": null,
          "old_text": "va_start(ap, flags)",
          "new_text": null,
          "old_line_content": "    va_start(ap, flags);",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 1865,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap,char*)",
          "new_text": null,
          "old_line_content": "            char *cfield = va_arg(ap,char*);",
          "new_line_content": "    while(1) {",
          "content_same": false
        },
        {
          "line": 843,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(ctx->client,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "    addReply(ctx->client,shared.nullbulk);",
          "new_line_content": "/* Reply to the client with a NULL. In the RESP protocol a NULL is encoded",
          "content_same": false
        },
        {
          "line": 1355,
          "old_api": "RM_ZsetAddFlagsFromCoreFlags",
          "new_api": null,
          "old_text": "RM_ZsetAddFlagsFromCoreFlags(flags)",
          "new_text": null,
          "old_line_content": "    if (flagsptr) *flagsptr = RM_ZsetAddFlagsFromCoreFlags(flags);",
          "new_line_content": "    /* zsetAdd() may signal back that the resulting score is not a number. */",
          "content_same": false
        },
        {
          "line": 1867,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(cfield)",
          "new_text": null,
          "old_line_content": "            field = createRawStringObject(cfield,strlen(cfield));",
          "new_line_content": "        int *existsptr;",
          "content_same": false
        },
        {
          "line": 1869,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap,RedisModuleString*)",
          "new_text": null,
          "old_line_content": "            field = va_arg(ap,RedisModuleString*);",
          "new_line_content": "        if (flags & REDISMODULE_HASH_CFIELDS) {",
          "content_same": false
        },
        {
          "line": 1875,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap,int*)",
          "new_text": null,
          "old_line_content": "            existsptr = va_arg(ap,int*);",
          "new_line_content": "            if (field == NULL) break;",
          "content_same": false
        },
        {
          "line": 1877,
          "old_api": "hashTypeExists",
          "new_api": null,
          "old_text": "hashTypeExists(key->value,field->ptr)",
          "new_text": null,
          "old_line_content": "                *existsptr = hashTypeExists(key->value,field->ptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2390,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&modulesDictType,NULL)",
          "new_text": null,
          "old_line_content": "    modules = dictCreate(&modulesDictType,NULL);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2391,
          "old_api": "moduleRegisterCoreAPI",
          "new_api": null,
          "old_text": "moduleRegisterCoreAPI()",
          "new_text": null,
          "old_line_content": "    moduleRegisterCoreAPI();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 854,
          "old_api": "sdsnewlen",
          "new_api": null,
          "old_text": "sdsnewlen(reply->proto, reply->protolen)",
          "new_text": null,
          "old_line_content": "    sds proto = sdsnewlen(reply->proto, reply->protolen);",
          "new_line_content": " * execute some command, as we want to reply to the client exactly the",
          "content_same": false
        },
        {
          "line": 855,
          "old_api": "addReplySds",
          "new_api": null,
          "old_text": "addReplySds(ctx->client,proto)",
          "new_text": null,
          "old_line_content": "    addReplySds(ctx->client,proto);",
          "new_line_content": " * same reply we obtained by the command.",
          "content_same": false
        },
        {
          "line": 1881,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap,RedisModuleString**)",
          "new_text": null,
          "old_line_content": "            valueptr = va_arg(ap,RedisModuleString**);",
          "new_line_content": "            if (key->value)",
          "content_same": false
        },
        {
          "line": 1883,
          "old_api": "hashTypeGetValueObject",
          "new_api": null,
          "old_text": "hashTypeGetValueObject(key->value,field->ptr)",
          "new_text": null,
          "old_line_content": "                *valueptr = hashTypeGetValueObject(key->value,field->ptr);",
          "new_line_content": "            else",
          "content_same": false
        },
        {
          "line": 1885,
          "old_api": "getDecodedObject",
          "new_api": null,
          "old_text": "getDecodedObject(*valueptr)",
          "new_text": null,
          "old_line_content": "                    robj *decoded = getDecodedObject(*valueptr);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 866,
          "old_api": "addReplyDouble",
          "new_api": null,
          "old_text": "addReplyDouble(ctx->client,d)",
          "new_text": null,
          "old_line_content": "    addReplyDouble(ctx->client,d);",
          "new_line_content": " * a string into a C buffer, and then calling the function",
          "content_same": false
        },
        {
          "line": 1380,
          "old_api": "zsetDel",
          "new_api": null,
          "old_text": "zsetDel(key->value,ele->ptr)",
          "new_text": null,
          "old_line_content": "    if (key->value != NULL && zsetDel(key->value,ele->ptr)) {",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 2407,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(server.loadmodule_queue,&li)",
          "new_text": null,
          "old_line_content": "    listRewind(server.loadmodule_queue,&li);",
          "new_line_content": " * if this instance is a slave, it must understand commands from master. */",
          "content_same": false
        },
        {
          "line": 2408,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "    while((ln = listNext(&li))) {",
          "new_line_content": "void moduleLoadFromQueue(void) {",
          "content_same": false
        },
        {
          "line": 1897,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(field)",
          "new_text": null,
          "old_line_content": "        if (flags & REDISMODULE_HASH_CFIELDS) decrRefCount(field);",
          "new_line_content": "                *valueptr = NULL;",
          "content_same": false
        },
        {
          "line": 2410,
          "old_api": "moduleLoad",
          "new_api": null,
          "old_text": "moduleLoad(modulepath)",
          "new_text": null,
          "old_line_content": "        if (moduleLoad(modulepath) == C_ERR) {",
          "new_line_content": "    listNode *ln;",
          "content_same": false
        },
        {
          "line": 2411,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n                \"Can't load module from %s: server aborting\",\n                modulepath)",
          "new_text": null,
          "old_line_content": "            serverLog(LL_WARNING,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1899,
          "old_api": "va_end",
          "new_api": null,
          "old_text": "va_end(ap)",
          "new_text": null,
          "old_line_content": "    va_end(ap);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2414,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "            exit(1);",
          "new_line_content": "        sds modulepath = ln->value;",
          "content_same": false
        },
        {
          "line": 879,
          "old_api": "execCommandPropagateMulti",
          "new_api": null,
          "old_text": "execCommandPropagateMulti(ctx->client)",
          "new_text": null,
          "old_line_content": "    execCommandPropagateMulti(ctx->client);",
          "new_line_content": "/* Helper function to replicate MULTI the first time we replicate something",
          "content_same": false
        },
        {
          "line": 2420,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(module->name)",
          "new_text": null,
          "old_line_content": "    sdsfree(module->name);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2421,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(module)",
          "new_text": null,
          "old_line_content": "    zfree(module);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1399,
          "old_api": "zsetScore",
          "new_api": null,
          "old_text": "zsetScore(key->value,ele->ptr,score)",
          "new_text": null,
          "old_line_content": "    if (zsetScore(key->value,ele->ptr,score) == C_ERR) return REDISMODULE_ERR;",
          "new_line_content": " * * The key is an open empty key.",
          "content_same": false
        },
        {
          "line": 1912,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*reply))",
          "new_text": null,
          "old_line_content": "    RedisModuleCallReply *reply = zmalloc(sizeof(*reply));",
          "new_line_content": "/* Create a new RedisModuleCallReply object. The processing of the reply",
          "content_same": false
        },
        {
          "line": 1915,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(proto)",
          "new_text": null,
          "old_line_content": "    reply->protolen = sdslen(proto);",
          "new_line_content": " * reply type, which is extremely cheap to do. */",
          "content_same": false
        },
        {
          "line": 2431,
          "old_api": "dlopen",
          "new_api": null,
          "old_text": "dlopen(path,RTLD_NOW|RTLD_LOCAL)",
          "new_text": null,
          "old_line_content": "    handle = dlopen(path,RTLD_NOW|RTLD_LOCAL);",
          "new_line_content": "int moduleLoad(const char *path) {",
          "content_same": false
        },
        {
          "line": 2433,
          "old_api": "dlerror",
          "new_api": null,
          "old_text": "dlerror()",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING, \"Module %s failed to load: %s\", path, dlerror());",
          "new_line_content": "    void *handle;",
          "content_same": false
        },
        {
          "line": 1411,
          "old_api": "zslFreeLexRange",
          "new_api": null,
          "old_text": "zslFreeLexRange(&key->zlrs)",
          "new_text": null,
          "old_line_content": "        zslFreeLexRange(&key->zlrs);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2444,
          "old_api": "moduleFreeModuleStructure",
          "new_api": null,
          "old_text": "moduleFreeModuleStructure(ctx.module)",
          "new_text": null,
          "old_line_content": "        if (ctx.module) moduleFreeModuleStructure(ctx.module);",
          "new_line_content": "            \"Module %s does not export RedisModule_OnLoad() \"",
          "content_same": false
        },
        {
          "line": 2445,
          "old_api": "dlclose",
          "new_api": null,
          "old_text": "dlclose(handle)",
          "new_text": null,
          "old_line_content": "        dlclose(handle);",
          "new_line_content": "            \"symbol. Module not loaded.\",path);",
          "content_same": false
        },
        {
          "line": 2446,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n            \"Module %s initialization failed. Module not loaded\",path)",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,",
          "new_line_content": "        return C_ERR;",
          "content_same": false
        },
        {
          "line": 908,
          "old_api": "lookupCommandByCString",
          "new_api": null,
          "old_text": "lookupCommandByCString((char*)cmdname)",
          "new_text": null,
          "old_line_content": "    cmd = lookupCommandByCString((char*)cmdname);",
          "new_line_content": "    struct redisCommand *cmd;",
          "content_same": false
        },
        {
          "line": 912,
          "old_api": "va_start",
          "new_api": null,
          "old_text": "va_start(ap, fmt)",
          "new_text": null,
          "old_line_content": "    va_start(ap, fmt);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 914,
          "old_api": "va_end",
          "new_api": null,
          "old_text": "va_end(ap)",
          "new_text": null,
          "old_line_content": "    va_end(ap);",
          "new_line_content": "    if (!cmd) return REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 2452,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(modules,ctx.module->name,ctx.module)",
          "new_text": null,
          "old_line_content": "    dictAdd(modules,ctx.module->name,ctx.module);",
          "new_line_content": "            \"Module %s initialization failed. Module not loaded\",path);",
          "content_same": false
        },
        {
          "line": 2454,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\"Module '%s' loaded from %s\",ctx.module->name,path)",
          "new_text": null,
          "old_line_content": "    serverLog(LL_NOTICE,\"Module '%s' loaded from %s\",ctx.module->name,path);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1943,
          "old_api": "moduleParseCallReply_Int",
          "new_api": null,
          "old_text": "moduleParseCallReply_Int(reply)",
          "new_text": null,
          "old_line_content": "    case ':': moduleParseCallReply_Int(reply); break;",
          "new_line_content": "void moduleParseCallReply(RedisModuleCallReply *reply) {",
          "content_same": false
        },
        {
          "line": 1944,
          "old_api": "moduleParseCallReply_BulkString",
          "new_api": null,
          "old_text": "moduleParseCallReply_BulkString(reply)",
          "new_text": null,
          "old_line_content": "    case '$': moduleParseCallReply_BulkString(reply); break;",
          "new_line_content": "    if (!(reply->flags & REDISMODULE_REPLYFLAG_TOPARSE)) return;",
          "content_same": false
        },
        {
          "line": 1434,
          "old_api": "RM_ZsetRangeStop",
          "new_api": null,
          "old_text": "RM_ZsetRangeStop(key)",
          "new_text": null,
          "old_line_content": "    RM_ZsetRangeStop(key);",
          "new_line_content": " * otherwise the last. Return REDISMODULE_OK on success otherwise",
          "content_same": false
        },
        {
          "line": 1946,
          "old_api": "moduleParseCallReply_SimpleString",
          "new_api": null,
          "old_text": "moduleParseCallReply_SimpleString(reply)",
          "new_text": null,
          "old_line_content": "    case '+': moduleParseCallReply_SimpleString(reply); break;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1947,
          "old_api": "moduleParseCallReply_Array",
          "new_api": null,
          "old_text": "moduleParseCallReply_Array(reply)",
          "new_text": null,
          "old_line_content": "    case '*': moduleParseCallReply_Array(reply); break;",
          "new_line_content": "    switch(reply->proto[0]) {",
          "content_same": false
        },
        {
          "line": 2464,
          "old_api": "dictFetchValue",
          "new_api": null,
          "old_text": "dictFetchValue(modules,name)",
          "new_text": null,
          "old_line_content": "    struct RedisModule *module = dictFetchValue(modules,name);",
          "new_line_content": " * C_OK is returned, otherwise C_ERR is returned and errno is set",
          "content_same": false
        },
        {
          "line": 1953,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(proto+1,'\\r')",
          "new_text": null,
          "old_line_content": "    char *p = strchr(proto+1,'\\r');",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1955,
          "old_api": "string2ll",
          "new_api": null,
          "old_text": "string2ll(proto+1,p-proto-1,&reply->val.ll)",
          "new_text": null,
          "old_line_content": "    string2ll(proto+1,p-proto-1,&reply->val.ll);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2471,
          "old_api": "dictGetSafeIterator",
          "new_api": null,
          "old_text": "dictGetSafeIterator(server.commands)",
          "new_text": null,
          "old_line_content": "    dictIterator *di = dictGetSafeIterator(server.commands);",
          "new_line_content": "        errno = ENOENT;",
          "content_same": false
        },
        {
          "line": 1447,
          "old_api": "zzlFirstInRange",
          "new_api": null,
          "old_text": "zzlFirstInRange(key->value->ptr,zrs)",
          "new_text": null,
          "old_line_content": "        key->zcurrent = first ? zzlFirstInRange(key->value->ptr,zrs) :",
          "new_line_content": "    zrs->max = max;",
          "content_same": false
        },
        {
          "line": 2473,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2474,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "        struct redisCommand *cmd = dictGetVal(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1448,
          "old_api": "zzlLastInRange",
          "new_api": null,
          "old_text": "zzlLastInRange(key->value->ptr,zrs)",
          "new_text": null,
          "old_line_content": "                                zzlLastInRange(key->value->ptr,zrs);",
          "new_line_content": "    zrs->minex = minex;",
          "content_same": false
        },
        {
          "line": 940,
          "old_api": "alsoPropagate",
          "new_api": null,
          "old_text": "alsoPropagate(ctx->client->cmd,ctx->client->db->id,\n        ctx->client->argv,ctx->client->argc,\n        PROPAGATE_AOF|PROPAGATE_REPL)",
          "new_text": null,
          "old_line_content": "    alsoPropagate(ctx->client->cmd,ctx->client->db->id,",
          "new_line_content": " * the command can just be re-executed to deterministically re-create the",
          "content_same": false
        },
        {
          "line": 1962,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(proto+1,'\\r')",
          "new_text": null,
          "old_line_content": "    char *p = strchr(proto+1,'\\r');",
          "new_line_content": "    reply->type = REDISMODULE_REPLY_INTEGER;",
          "content_same": false
        },
        {
          "line": 1965,
          "old_api": "string2ll",
          "new_api": null,
          "old_text": "string2ll(proto+1,p-proto-1,&bulklen)",
          "new_text": null,
          "old_line_content": "    string2ll(proto+1,p-proto-1,&bulklen);",
          "new_line_content": "void moduleParseCallReply_BulkString(RedisModuleCallReply *reply) {",
          "content_same": false
        },
        {
          "line": 1455,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unsupported zset encoding\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "new_line_content": "        zset *zs = key->value->ptr;",
          "content_same": false
        },
        {
          "line": 2480,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(server.commands,cmdname)",
          "new_text": null,
          "old_line_content": "                dictDelete(server.commands,cmdname);",
          "new_line_content": "        if (cmd->proc == RedisModuleCommandDispatcher) {",
          "content_same": false
        },
        {
          "line": 2481,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(server.orig_commands,cmdname)",
          "new_text": null,
          "old_line_content": "                dictDelete(server.orig_commands,cmdname);",
          "new_line_content": "            RedisModuleCommandProxy *cp =",
          "content_same": false
        },
        {
          "line": 2482,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(cmdname)",
          "new_text": null,
          "old_line_content": "                sdsfree(cmdname);",
          "new_line_content": "                (void*)(unsigned long)cmd->getkeys_proc;",
          "content_same": false
        },
        {
          "line": 2483,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(cp->rediscmd)",
          "new_text": null,
          "old_line_content": "                zfree(cp->rediscmd);",
          "new_line_content": "            sds cmdname = cp->rediscmd->name;",
          "content_same": false
        },
        {
          "line": 2484,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(cp)",
          "new_text": null,
          "old_line_content": "                zfree(cp);",
          "new_line_content": "            if (cp->module == module) {",
          "content_same": false
        },
        {
          "line": 1979,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(proto+1,'\\r')",
          "new_text": null,
          "old_line_content": "    char *p = strchr(proto+1,'\\r');",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2494,
          "old_api": "dlerror",
          "new_api": null,
          "old_text": "dlerror()",
          "new_text": null,
          "old_line_content": "        char *error = dlerror();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2496,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"Error when trying to close the %s module: %s\",\n            module->name, error)",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,\"Error when trying to close the %s module: %s\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1477,
          "old_api": "zsetInitScoreRange",
          "new_api": null,
          "old_text": "zsetInitScoreRange(key,min,max,minex,maxex,1)",
          "new_text": null,
          "old_line_content": "    return zsetInitScoreRange(key,min,max,minex,maxex,1);",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 2502,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(modules,module->name)",
          "new_text": null,
          "old_line_content": "    dictDelete(modules,module->name);",
          "new_line_content": "            module->name, error);",
          "content_same": false
        },
        {
          "line": 1990,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(proto+1,'\\r')",
          "new_text": null,
          "old_line_content": "    char *p = strchr(proto+1,'\\r');",
          "new_line_content": "                                    REDISMODULE_REPLY_ERROR;",
          "content_same": false
        },
        {
          "line": 2505,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(module)",
          "new_text": null,
          "old_line_content": "    zfree(module);",
          "new_line_content": "    /* Remove from list of modules. */",
          "content_same": false
        },
        {
          "line": 1993,
          "old_api": "string2ll",
          "new_api": null,
          "old_text": "string2ll(proto+1,p-proto-1,&arraylen)",
          "new_text": null,
          "old_line_content": "    string2ll(proto+1,p-proto-1,&arraylen);",
          "new_line_content": "void moduleParseCallReply_Array(RedisModuleCallReply *reply) {",
          "content_same": false
        },
        {
          "line": 1483,
          "old_api": "zsetInitScoreRange",
          "new_api": null,
          "old_text": "zsetInitScoreRange(key,min,max,minex,maxex,0)",
          "new_text": null,
          "old_line_content": "    return zsetInitScoreRange(key,min,max,minex,maxex,0);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2002,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(RedisModuleCallReply)*arraylen)",
          "new_text": null,
          "old_line_content": "    reply->val.array = zmalloc(sizeof(RedisModuleCallReply)*arraylen);",
          "new_line_content": "        reply->protolen = p-proto;",
          "content_same": false
        },
        {
          "line": 2516,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(subcmd,\"load\")",
          "new_text": null,
          "old_line_content": "    if (!strcasecmp(subcmd,\"load\") && c->argc == 3) {",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 2517,
          "old_api": "moduleLoad",
          "new_api": null,
          "old_text": "moduleLoad(c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "        if (moduleLoad(c->argv[2]->ptr) == C_OK)",
          "new_line_content": " * MODULE LOAD <path> */",
          "content_same": false
        },
        {
          "line": 2518,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.ok);",
          "new_line_content": "void moduleCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 982,
          "old_api": "selectDb",
          "new_api": null,
          "old_text": "selectDb(ctx->client,newid)",
          "new_text": null,
          "old_line_content": "    int retval = selectDb(ctx->client,newid);",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 2520,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\n                \"Error loading the extension. Please check the server logs.\")",
          "new_text": null,
          "old_line_content": "            addReplyError(c,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1498,
          "old_api": "RM_ZsetRangeStop",
          "new_api": null,
          "old_text": "RM_ZsetRangeStop(key)",
          "new_text": null,
          "old_line_content": "    RM_ZsetRangeStop(key);",
          "new_line_content": " * Note that this function takes 'min' and 'max' in the same form of the",
          "content_same": false
        },
        {
          "line": 2010,
          "old_api": "moduleParseCallReply",
          "new_api": null,
          "old_text": "moduleParseCallReply(ele)",
          "new_text": null,
          "old_line_content": "        moduleParseCallReply(ele);",
          "new_line_content": "        RedisModuleCallReply *ele = reply->val.array+j;",
          "content_same": false
        },
        {
          "line": 2524,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.ok);",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 1504,
          "old_api": "zslParseLexRange",
          "new_api": null,
          "old_text": "zslParseLexRange(min, max, zlrs)",
          "new_text": null,
          "old_line_content": "    if (zslParseLexRange(min, max, zlrs) == C_ERR) return REDISMODULE_ERR;",
          "new_line_content": "    key->zer = 0;",
          "content_same": false
        },
        {
          "line": 2530,
          "old_api": "addReplyErrorFormat",
          "new_api": null,
          "old_text": "addReplyErrorFormat(c,\"Error unloading module: %s\",errmsg)",
          "new_text": null,
          "old_line_content": "            addReplyErrorFormat(c,\"Error unloading module: %s\",errmsg);",
          "new_line_content": "        else {",
          "content_same": false
        },
        {
          "line": 2532,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(subcmd,\"list\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(subcmd,\"list\") && c->argc == 2) {",
          "new_line_content": "            switch(errno) {",
          "content_same": false
        },
        {
          "line": 2533,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(modules)",
          "new_text": null,
          "old_line_content": "        dictIterator *di = dictGetIterator(modules);",
          "new_line_content": "            case ENOENT: errmsg = \"no such module with that name\";",
          "content_same": false
        },
        {
          "line": 1511,
          "old_api": "zzlFirstInLexRange",
          "new_api": null,
          "old_text": "zzlFirstInLexRange(key->value->ptr,zlrs)",
          "new_text": null,
          "old_line_content": "        key->zcurrent = first ? zzlFirstInLexRange(key->value->ptr,zlrs) :",
          "new_line_content": "    /* Set the range type to lex only after successfully parsing the range,",
          "content_same": false
        },
        {
          "line": 2536,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(modules)",
          "new_text": null,
          "old_line_content": "        addReplyMultiBulkLen(c,dictSize(modules));",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1512,
          "old_api": "zzlLastInLexRange",
          "new_api": null,
          "old_text": "zzlLastInLexRange(key->value->ptr,zlrs)",
          "new_text": null,
          "old_line_content": "                                zzlLastInLexRange(key->value->ptr,zlrs);",
          "new_line_content": "     * otherwise we don't want the zlexrangespec to be freed. */",
          "content_same": false
        },
        {
          "line": 2539,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "            struct RedisModule *module = dictGetVal(de);",
          "new_line_content": "        dictEntry *de;",
          "content_same": false
        },
        {
          "line": 2540,
          "old_api": "addReplyMultiBulkLen",
          "new_api": null,
          "old_text": "addReplyMultiBulkLen(c,4)",
          "new_text": null,
          "old_line_content": "            addReplyMultiBulkLen(c,4);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1005,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(ctx->client->db,keyname)",
          "new_text": null,
          "old_line_content": "        value = lookupKeyWrite(ctx->client->db,keyname);",
          "new_line_content": "void *RM_OpenKey(RedisModuleCtx *ctx, robj *keyname, int mode) {",
          "content_same": false
        },
        {
          "line": 2029,
          "old_api": "RM_FreeCallReply_Rec",
          "new_api": null,
          "old_text": "RM_FreeCallReply_Rec(reply->val.array+j,1)",
          "new_text": null,
          "old_line_content": "                RM_FreeCallReply_Rec(reply->val.array+j,1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1007,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(ctx->client->db,keyname)",
          "new_text": null,
          "old_line_content": "        value = lookupKeyRead(ctx->client->db,keyname);",
          "new_line_content": "    robj *value;",
          "content_same": false
        },
        {
          "line": 1519,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unsupported zset encoding\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "new_line_content": "        zset *zs = key->value->ptr;",
          "content_same": false
        },
        {
          "line": 2030,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(reply->val.array)",
          "new_text": null,
          "old_line_content": "            zfree(reply->val.array);",
          "new_line_content": "    if (!(reply->flags & REDISMODULE_REPLYFLAG_TOPARSE)) {",
          "content_same": false
        },
        {
          "line": 1014,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*kp))",
          "new_text": null,
          "old_line_content": "    kp = zmalloc(sizeof(*kp));",
          "new_line_content": "            return NULL;",
          "content_same": false
        },
        {
          "line": 2039,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(reply->proto)",
          "new_text": null,
          "old_line_content": "        if (reply->proto) sdsfree(reply->proto);",
          "new_line_content": "    /* For nested replies, we don't free reply->proto (which if not NULL",
          "content_same": false
        },
        {
          "line": 2040,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(reply)",
          "new_text": null,
          "old_line_content": "        zfree(reply);",
          "new_line_content": "     * references the parent reply->proto buffer), nor the structure",
          "content_same": false
        },
        {
          "line": 1018,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(keyname)",
          "new_text": null,
          "old_line_content": "    incrRefCount(keyname);",
          "new_line_content": "    /* Setup the key handle. */",
          "content_same": false
        },
        {
          "line": 1022,
          "old_api": "RM_ZsetRangeStop",
          "new_api": null,
          "old_text": "RM_ZsetRangeStop(kp)",
          "new_text": null,
          "old_line_content": "    RM_ZsetRangeStop(kp);",
          "new_line_content": "    kp->key = keyname;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 47,
      "total_additions": 247,
      "total_deletions": 247,
      "total_api_changes": 541
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 9,
        "api_related_lines": 541,
        "non_api_lines": 9,
        "non_api_line_numbers": [
          588,
          589,
          590,
          591,
          592,
          593,
          594,
          595,
          596
        ]
      }
    },
    "api_calls_before": 426,
    "api_calls_after": 426,
    "diff_info": {
      "added_lines": 9,
      "removed_lines": 4,
      "total_diff_lines": 27
    }
  }
}
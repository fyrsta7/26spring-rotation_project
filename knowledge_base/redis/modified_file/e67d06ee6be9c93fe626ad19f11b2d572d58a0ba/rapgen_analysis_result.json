{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/e67d06ee6be9c93fe626ad19f11b2d572d58a0ba",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/e67d06ee6be9c93fe626ad19f11b2d572d58a0ba/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/e67d06ee6be9c93fe626ad19f11b2d572d58a0ba/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/e67d06ee6be9c93fe626ad19f11b2d572d58a0ba/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 114,
          "old_api": "rewriteClientCommandVector",
          "new_api": "createStringObjectFromLongLong",
          "old_text": "rewriteClientCommandVector(c, 5, shared.set, key, val, shared.pxat, milliseconds_obj)",
          "new_text": "createStringObjectFromLongLong(milliseconds)",
          "old_line_content": "        rewriteClientCommandVector(c, 5, shared.set, key, val, shared.pxat, milliseconds_obj);",
          "new_line_content": "        robj *milliseconds_obj = createStringObjectFromLongLong(milliseconds);",
          "content_same": false
        },
        {
          "line": 115,
          "old_api": "decrRefCount",
          "new_api": "rewriteClientCommandVector",
          "old_text": "decrRefCount(milliseconds_obj)",
          "new_text": "rewriteClientCommandVector(c, 5, shared.set, key, val, shared.pxat, milliseconds_obj)",
          "old_line_content": "        decrRefCount(milliseconds_obj);",
          "new_line_content": "        rewriteClientCommandVector(c, 5, shared.set, key, val, shared.pxat, milliseconds_obj);",
          "content_same": false
        },
        {
          "line": 116,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "decrRefCount",
          "old_text": "notifyKeyspaceEvent(NOTIFY_GENERIC,\"expire\",key,c->db->id)",
          "new_text": "decrRefCount(milliseconds_obj)",
          "old_line_content": "        notifyKeyspaceEvent(NOTIFY_GENERIC,\"expire\",key,c->db->id);",
          "new_line_content": "        decrRefCount(milliseconds_obj);",
          "content_same": false
        },
        {
          "line": 296,
          "old_api": "setGenericCommand",
          "new_api": "tryObjectEncoding",
          "old_text": "setGenericCommand(c,flags,c->argv[1],c->argv[2],expire,unit,NULL,NULL)",
          "new_text": "tryObjectEncoding(c->argv[2])",
          "old_line_content": "    setGenericCommand(c,flags,c->argv[1],c->argv[2],expire,unit,NULL,NULL);",
          "new_line_content": "    c->argv[2] = tryObjectEncoding(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 301,
          "old_api": "setGenericCommand",
          "new_api": "tryObjectEncoding",
          "old_text": "setGenericCommand(c,OBJ_SET_NX,c->argv[1],c->argv[2],NULL,0,shared.cone,shared.czero)",
          "new_text": "tryObjectEncoding(c->argv[2])",
          "old_line_content": "    setGenericCommand(c,OBJ_SET_NX,c->argv[1],c->argv[2],NULL,0,shared.cone,shared.czero);",
          "new_line_content": "    c->argv[2] = tryObjectEncoding(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 306,
          "old_api": "setGenericCommand",
          "new_api": "tryObjectEncoding",
          "old_text": "setGenericCommand(c,OBJ_EX,c->argv[1],c->argv[3],c->argv[2],UNIT_SECONDS,NULL,NULL)",
          "new_text": "tryObjectEncoding(c->argv[3])",
          "old_line_content": "    setGenericCommand(c,OBJ_EX,c->argv[1],c->argv[3],c->argv[2],UNIT_SECONDS,NULL,NULL);",
          "new_line_content": "    c->argv[3] = tryObjectEncoding(c->argv[3]);",
          "content_same": false
        },
        {
          "line": 311,
          "old_api": "setGenericCommand",
          "new_api": "tryObjectEncoding",
          "old_text": "setGenericCommand(c,OBJ_PX,c->argv[1],c->argv[3],c->argv[2],UNIT_MILLISECONDS,NULL,NULL)",
          "new_text": "tryObjectEncoding(c->argv[3])",
          "old_line_content": "    setGenericCommand(c,OBJ_PX,c->argv[1],c->argv[3],c->argv[2],UNIT_MILLISECONDS,NULL,NULL);",
          "new_line_content": "    c->argv[3] = tryObjectEncoding(c->argv[3]);",
          "content_same": false
        },
        {
          "line": 385,
          "old_api": "dbSyncDelete",
          "new_api": "dbAsyncDelete",
          "old_text": "dbSyncDelete(c->db, c->argv[1])",
          "new_text": "dbAsyncDelete(c->db, c->argv[1])",
          "old_line_content": "                      dbSyncDelete(c->db, c->argv[1]);",
          "new_line_content": "        int deleted = server.lazyfree_lazy_expire ? dbAsyncDelete(c->db, c->argv[1]) :",
          "content_same": false
        },
        {
          "line": 386,
          "old_api": "serverAssert",
          "new_api": "dbSyncDelete",
          "old_text": "serverAssert(deleted)",
          "new_text": "dbSyncDelete(c->db, c->argv[1])",
          "old_line_content": "        serverAssert(deleted);",
          "new_line_content": "                      dbSyncDelete(c->db, c->argv[1]);",
          "content_same": false
        },
        {
          "line": 389,
          "old_api": "signalModifiedKey",
          "new_api": "rewriteClientCommandVector",
          "old_text": "signalModifiedKey(c, c->db, c->argv[1])",
          "new_text": "rewriteClientCommandVector(c,2,aux,c->argv[1])",
          "old_line_content": "        signalModifiedKey(c, c->db, c->argv[1]);",
          "new_line_content": "        rewriteClientCommandVector(c,2,aux,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 390,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "signalModifiedKey",
          "old_text": "notifyKeyspaceEvent(NOTIFY_GENERIC, \"del\", c->argv[1], c->db->id)",
          "new_text": "signalModifiedKey(c, c->db, c->argv[1])",
          "old_line_content": "        notifyKeyspaceEvent(NOTIFY_GENERIC, \"del\", c->argv[1], c->db->id);",
          "new_line_content": "        signalModifiedKey(c, c->db, c->argv[1]);",
          "content_same": false
        },
        {
          "line": 397,
          "old_api": "rewriteClientCommandVector",
          "new_api": "createStringObjectFromLongLong",
          "old_text": "rewriteClientCommandVector(c,3,shared.pexpireat,c->argv[1],milliseconds_obj)",
          "new_text": "createStringObjectFromLongLong(milliseconds)",
          "old_line_content": "        rewriteClientCommandVector(c,3,shared.pexpireat,c->argv[1],milliseconds_obj);",
          "new_line_content": "        robj *milliseconds_obj = createStringObjectFromLongLong(milliseconds);",
          "content_same": false
        },
        {
          "line": 398,
          "old_api": "decrRefCount",
          "new_api": "rewriteClientCommandVector",
          "old_text": "decrRefCount(milliseconds_obj)",
          "new_text": "rewriteClientCommandVector(c,3,shared.pexpireat,c->argv[1],milliseconds_obj)",
          "old_line_content": "        decrRefCount(milliseconds_obj);",
          "new_line_content": "        rewriteClientCommandVector(c,3,shared.pexpireat,c->argv[1],milliseconds_obj);",
          "content_same": false
        },
        {
          "line": 399,
          "old_api": "signalModifiedKey",
          "new_api": "decrRefCount",
          "old_text": "signalModifiedKey(c, c->db, c->argv[1])",
          "new_text": "decrRefCount(milliseconds_obj)",
          "old_line_content": "        signalModifiedKey(c, c->db, c->argv[1]);",
          "new_line_content": "        decrRefCount(milliseconds_obj);",
          "content_same": false
        },
        {
          "line": 400,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "signalModifiedKey",
          "old_text": "notifyKeyspaceEvent(NOTIFY_GENERIC,\"expire\",c->argv[1],c->db->id)",
          "new_text": "signalModifiedKey(c, c->db, c->argv[1])",
          "old_line_content": "        notifyKeyspaceEvent(NOTIFY_GENERIC,\"expire\",c->argv[1],c->db->id);",
          "new_line_content": "        signalModifiedKey(c, c->db, c->argv[1]);",
          "content_same": false
        },
        {
          "line": 404,
          "old_api": "signalModifiedKey",
          "new_api": "removeExpire",
          "old_text": "signalModifiedKey(c, c->db, c->argv[1])",
          "new_text": "removeExpire(c->db, c->argv[1])",
          "old_line_content": "            signalModifiedKey(c, c->db, c->argv[1]);",
          "new_line_content": "        if (removeExpire(c->db, c->argv[1])) {",
          "content_same": false
        },
        {
          "line": 405,
          "old_api": "rewriteClientCommandVector",
          "new_api": "signalModifiedKey",
          "old_text": "rewriteClientCommandVector(c, 2, shared.persist, c->argv[1])",
          "new_text": "signalModifiedKey(c, c->db, c->argv[1])",
          "old_line_content": "            rewriteClientCommandVector(c, 2, shared.persist, c->argv[1]);",
          "new_line_content": "            signalModifiedKey(c, c->db, c->argv[1]);",
          "content_same": false
        },
        {
          "line": 406,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "rewriteClientCommandVector",
          "old_text": "notifyKeyspaceEvent(NOTIFY_GENERIC,\"persist\",c->argv[1],c->db->id)",
          "new_text": "rewriteClientCommandVector(c, 2, shared.persist, c->argv[1])",
          "old_line_content": "            notifyKeyspaceEvent(NOTIFY_GENERIC,\"persist\",c->argv[1],c->db->id);",
          "new_line_content": "            rewriteClientCommandVector(c, 2, shared.persist, c->argv[1]);",
          "content_same": false
        },
        {
          "line": 414,
          "old_api": "dbSyncDelete",
          "new_api": "getGenericCommand",
          "old_text": "dbSyncDelete(c->db, c->argv[1])",
          "new_text": "getGenericCommand(c)",
          "old_line_content": "    if (dbSyncDelete(c->db, c->argv[1])) {",
          "new_line_content": "    if (getGenericCommand(c) == C_ERR) return;",
          "content_same": false
        },
        {
          "line": 417,
          "old_api": "signalModifiedKey",
          "new_api": "rewriteClientCommandVector",
          "old_text": "signalModifiedKey(c, c->db, c->argv[1])",
          "new_text": "rewriteClientCommandVector(c,2,shared.del,c->argv[1])",
          "old_line_content": "        signalModifiedKey(c, c->db, c->argv[1]);",
          "new_line_content": "        rewriteClientCommandVector(c,2,shared.del,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 418,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "signalModifiedKey",
          "old_text": "notifyKeyspaceEvent(NOTIFY_GENERIC, \"del\", c->argv[1], c->db->id)",
          "new_text": "signalModifiedKey(c, c->db, c->argv[1])",
          "old_line_content": "        notifyKeyspaceEvent(NOTIFY_GENERIC, \"del\", c->argv[1], c->db->id);",
          "new_line_content": "        signalModifiedKey(c, c->db, c->argv[1]);",
          "content_same": false
        },
        {
          "line": 425,
          "old_api": "tryObjectEncoding",
          "new_api": "getGenericCommand",
          "old_text": "tryObjectEncoding(c->argv[2])",
          "new_text": "getGenericCommand(c)",
          "old_line_content": "    c->argv[2] = tryObjectEncoding(c->argv[2]);",
          "new_line_content": "    if (getGenericCommand(c) == C_ERR) return;",
          "content_same": false
        },
        {
          "line": 426,
          "old_api": "setKey",
          "new_api": "tryObjectEncoding",
          "old_text": "setKey(c,c->db,c->argv[1],c->argv[2],0)",
          "new_text": "tryObjectEncoding(c->argv[2])",
          "old_line_content": "    setKey(c,c->db,c->argv[1],c->argv[2],0);",
          "new_line_content": "    c->argv[2] = tryObjectEncoding(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 427,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "setKey",
          "old_text": "notifyKeyspaceEvent(NOTIFY_STRING,\"set\",c->argv[1],c->db->id)",
          "new_text": "setKey(c,c->db,c->argv[1],c->argv[2],0)",
          "old_line_content": "    notifyKeyspaceEvent(NOTIFY_STRING,\"set\",c->argv[1],c->db->id);",
          "new_line_content": "    setKey(c,c->db,c->argv[1],c->argv[2],0);",
          "content_same": false
        },
        {
          "line": 451,
          "old_api": "addReply",
          "new_api": "sdslen",
          "old_text": "addReply(c,shared.czero)",
          "new_text": "sdslen(value)",
          "old_line_content": "            addReply(c,shared.czero);",
          "new_line_content": "        if (sdslen(value) == 0) {",
          "content_same": false
        },
        {
          "line": 460,
          "old_api": "dbAdd",
          "new_api": "sdslen",
          "old_text": "dbAdd(c->db,c->argv[1],o)",
          "new_text": "sdslen(value)",
          "old_line_content": "        dbAdd(c->db,c->argv[1],o);",
          "new_line_content": "        o = createObject(OBJ_STRING,sdsnewlen(NULL, offset+sdslen(value)));",
          "content_same": false
        },
        {
          "line": 470,
          "old_api": "sdslen",
          "new_api": "stringObjectLen",
          "old_text": "sdslen(value)",
          "new_text": "stringObjectLen(o)",
          "old_line_content": "        if (sdslen(value) == 0) {",
          "new_line_content": "        olen = stringObjectLen(o);",
          "content_same": false
        },
        {
          "line": 471,
          "old_api": "addReplyLongLong",
          "new_api": "sdslen",
          "old_text": "addReplyLongLong(c,olen)",
          "new_text": "sdslen(value)",
          "old_line_content": "            addReplyLongLong(c,olen);",
          "new_line_content": "        if (sdslen(value) == 0) {",
          "content_same": false
        },
        {
          "line": 486,
          "old_api": "signalModifiedKey",
          "new_api": "sdslen",
          "old_text": "signalModifiedKey(c,c->db,c->argv[1])",
          "new_text": "sdslen(value)",
          "old_line_content": "        signalModifiedKey(c,c->db,c->argv[1]);",
          "new_line_content": "        memcpy((char*)o->ptr+offset,value,sdslen(value));",
          "content_same": false
        },
        {
          "line": 487,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "signalModifiedKey",
          "old_text": "notifyKeyspaceEvent(NOTIFY_STRING,\n            \"setrange\",c->argv[1],c->db->id)",
          "new_text": "signalModifiedKey(c,c->db,c->argv[1])",
          "old_line_content": "        notifyKeyspaceEvent(NOTIFY_STRING,",
          "new_line_content": "        signalModifiedKey(c,c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 505,
          "old_api": "checkType",
          "new_api": "lookupKeyReadOrReply",
          "old_text": "checkType(c,o,OBJ_STRING)",
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.emptybulk)",
          "old_line_content": "        checkType(c,o,OBJ_STRING)) return;",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.emptybulk)) == NULL ||",
          "content_same": false
        },
        {
          "line": 566,
          "old_api": "addReply",
          "new_api": "lookupKeyWrite",
          "old_text": "addReply(c, shared.czero)",
          "new_text": "lookupKeyWrite(c->db,c->argv[j])",
          "old_line_content": "                addReply(c, shared.czero);",
          "new_line_content": "            if (lookupKeyWrite(c->db,c->argv[j]) != NULL) {",
          "content_same": false
        },
        {
          "line": 574,
          "old_api": "setKey",
          "new_api": "tryObjectEncoding",
          "old_text": "setKey(c,c->db,c->argv[j],c->argv[j+1],0)",
          "new_text": "tryObjectEncoding(c->argv[j+1])",
          "old_line_content": "        setKey(c,c->db,c->argv[j],c->argv[j+1],0);",
          "new_line_content": "        c->argv[j+1] = tryObjectEncoding(c->argv[j+1]);",
          "content_same": false
        },
        {
          "line": 575,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "setKey",
          "old_text": "notifyKeyspaceEvent(NOTIFY_STRING,\"set\",c->argv[j],c->db->id)",
          "new_text": "setKey(c,c->db,c->argv[j],c->argv[j+1],0)",
          "old_line_content": "        notifyKeyspaceEvent(NOTIFY_STRING,\"set\",c->argv[j],c->db->id);",
          "new_line_content": "        setKey(c,c->db,c->argv[j],c->argv[j+1],0);",
          "content_same": false
        },
        {
          "line": 594,
          "old_api": "checkType",
          "new_api": "lookupKeyWrite",
          "old_text": "checkType(c,o,OBJ_STRING)",
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "    if (checkType(c,o,OBJ_STRING)) return;",
          "new_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 595,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": "checkType",
          "old_text": "getLongLongFromObjectOrReply(c,o,&value,NULL)",
          "new_text": "checkType(c,o,OBJ_STRING)",
          "old_line_content": "    if (getLongLongFromObjectOrReply(c,o,&value,NULL) != C_OK) return;",
          "new_line_content": "    if (checkType(c,o,OBJ_STRING)) return;",
          "content_same": false
        },
        {
          "line": 620,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "signalModifiedKey",
          "old_text": "notifyKeyspaceEvent(NOTIFY_STRING,\"incrby\",c->argv[1],c->db->id)",
          "new_text": "signalModifiedKey(c,c->db,c->argv[1])",
          "old_line_content": "    notifyKeyspaceEvent(NOTIFY_STRING,\"incrby\",c->argv[1],c->db->id);",
          "new_line_content": "    signalModifiedKey(c,c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 637,
          "old_api": "incrDecrCommand",
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": "incrDecrCommand(c,incr)",
          "new_text": "getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL)",
          "old_line_content": "    incrDecrCommand(c,incr);",
          "new_line_content": "    if (getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL) != C_OK) return;",
          "content_same": false
        },
        {
          "line": 657,
          "old_api": "checkType",
          "new_api": "lookupKeyWrite",
          "old_text": "checkType(c,o,OBJ_STRING)",
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "    if (checkType(c,o,OBJ_STRING)) return;",
          "new_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 658,
          "old_api": "getLongDoubleFromObjectOrReply",
          "new_api": "checkType",
          "old_text": "getLongDoubleFromObjectOrReply(c,o,&value,NULL)",
          "new_text": "checkType(c,o,OBJ_STRING)",
          "old_line_content": "    if (getLongDoubleFromObjectOrReply(c,o,&value,NULL) != C_OK ||",
          "new_line_content": "    if (checkType(c,o,OBJ_STRING)) return;",
          "content_same": false
        },
        {
          "line": 664,
          "old_api": "addReplyError",
          "new_api": "isinf",
          "old_text": "addReplyError(c,\"increment would produce NaN or Infinity\")",
          "new_text": "isinf(value)",
          "old_line_content": "        addReplyError(c,\"increment would produce NaN or Infinity\");",
          "new_line_content": "    if (isnan(value) || isinf(value)) {",
          "content_same": false
        },
        {
          "line": 672,
          "old_api": "signalModifiedKey",
          "new_api": "dbAdd",
          "old_text": "signalModifiedKey(c,c->db,c->argv[1])",
          "new_text": "dbAdd(c->db,c->argv[1],new)",
          "old_line_content": "    signalModifiedKey(c,c->db,c->argv[1]);",
          "new_line_content": "        dbAdd(c->db,c->argv[1],new);",
          "content_same": false
        },
        {
          "line": 673,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "signalModifiedKey",
          "old_text": "notifyKeyspaceEvent(NOTIFY_STRING,\"incrbyfloat\",c->argv[1],c->db->id)",
          "new_text": "signalModifiedKey(c,c->db,c->argv[1])",
          "old_line_content": "    notifyKeyspaceEvent(NOTIFY_STRING,\"incrbyfloat\",c->argv[1],c->db->id);",
          "new_line_content": "    signalModifiedKey(c,c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 693,
          "old_api": "dbAdd",
          "new_api": "tryObjectEncoding",
          "old_text": "dbAdd(c->db,c->argv[1],c->argv[2])",
          "new_text": "tryObjectEncoding(c->argv[2])",
          "old_line_content": "        dbAdd(c->db,c->argv[1],c->argv[2]);",
          "new_line_content": "        c->argv[2] = tryObjectEncoding(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 694,
          "old_api": "incrRefCount",
          "new_api": "dbAdd",
          "old_text": "incrRefCount(c->argv[2])",
          "new_text": "dbAdd(c->db,c->argv[1],c->argv[2])",
          "old_line_content": "        incrRefCount(c->argv[2]);",
          "new_line_content": "        dbAdd(c->db,c->argv[1],c->argv[2]);",
          "content_same": false
        },
        {
          "line": 695,
          "old_api": "stringObjectLen",
          "new_api": "incrRefCount",
          "old_text": "stringObjectLen(c->argv[2])",
          "new_text": "incrRefCount(c->argv[2])",
          "old_line_content": "        totlen = stringObjectLen(c->argv[2]);",
          "new_line_content": "        incrRefCount(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 704,
          "old_api": "checkStringLength",
          "new_api": "sdslen",
          "old_text": "checkStringLength(c,totlen)",
          "new_text": "sdslen(append->ptr)",
          "old_line_content": "        if (checkStringLength(c,totlen) != C_OK)",
          "new_line_content": "        totlen = stringObjectLen(o)+sdslen(append->ptr);",
          "content_same": false
        },
        {
          "line": 709,
          "old_api": "sdslen",
          "new_api": "dbUnshareStringValue",
          "old_text": "sdslen(append->ptr)",
          "new_text": "dbUnshareStringValue(c->db,c->argv[1],o)",
          "old_line_content": "        o->ptr = sdscatlen(o->ptr,append->ptr,sdslen(append->ptr));",
          "new_line_content": "        o = dbUnshareStringValue(c->db,c->argv[1],o);",
          "content_same": false
        },
        {
          "line": 713,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "signalModifiedKey",
          "old_text": "notifyKeyspaceEvent(NOTIFY_STRING,\"append\",c->argv[1],c->db->id)",
          "new_text": "signalModifiedKey(c,c->db,c->argv[1])",
          "old_line_content": "    notifyKeyspaceEvent(NOTIFY_STRING,\"append\",c->argv[1],c->db->id);",
          "new_line_content": "    signalModifiedKey(c,c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 721,
          "old_api": "checkType",
          "new_api": "lookupKeyReadOrReply",
          "old_text": "checkType(c,o,OBJ_STRING)",
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "old_line_content": "        checkType(c,o,OBJ_STRING)) return;",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "content_same": false
        },
        {
          "line": 722,
          "old_api": "stringObjectLen",
          "new_api": "checkType",
          "old_text": "stringObjectLen(o)",
          "new_text": "checkType(c,o,OBJ_STRING)",
          "old_line_content": "    addReplyLongLong(c,stringObjectLen(o));",
          "new_line_content": "        checkType(c,o,OBJ_STRING)) return;",
          "content_same": false
        },
        {
          "line": 762,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": "strcasecmp",
          "old_text": "getLongLongFromObjectOrReply(c,c->argv[j+1],&minmatchlen,NULL)",
          "new_text": "strcasecmp(opt,\"MINMATCHLEN\")",
          "old_line_content": "            if (getLongLongFromObjectOrReply(c,c->argv[j+1],&minmatchlen,NULL)",
          "new_line_content": "        } else if (!strcasecmp(opt,\"MINMATCHLEN\") && moreargs) {",
          "content_same": false
        },
        {
          "line": 781,
          "old_api": "addReplyError",
          "new_api": "sdslen",
          "old_text": "addReplyError(c, \"String too long for LCS\")",
          "new_text": "sdslen(b)",
          "old_line_content": "        addReplyError(c, \"String too long for LCS\");",
          "new_line_content": "    if (sdslen(a) >= UINT32_MAX-1 || sdslen(b) >= UINT32_MAX-1) {",
          "content_same": false
        },
        {
          "line": 853,
          "old_api": "addReplyBulkCString",
          "new_api": "addReplyMapLen",
          "old_text": "addReplyBulkCString(c,\"matches\")",
          "new_text": "addReplyMapLen(c,2)",
          "old_line_content": "        addReplyBulkCString(c,\"matches\");",
          "new_line_content": "        addReplyMapLen(c,2);",
          "content_same": false
        },
        {
          "line": 854,
          "old_api": "addReplyDeferredLen",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyDeferredLen(c)",
          "new_text": "addReplyBulkCString(c,\"matches\")",
          "old_line_content": "        arraylenptr = addReplyDeferredLen(c);",
          "new_line_content": "        addReplyBulkCString(c,\"matches\");",
          "content_same": false
        },
        {
          "line": 904,
          "old_api": "addReplyLongLong",
          "new_api": "addReplyArrayLen",
          "old_text": "addReplyLongLong(c,arange_start)",
          "new_text": "addReplyArrayLen(c,2)",
          "old_line_content": "                    addReplyLongLong(c,arange_start);",
          "new_line_content": "                    addReplyArrayLen(c,2);",
          "content_same": false
        },
        {
          "line": 906,
          "old_api": "addReplyArrayLen",
          "new_api": "addReplyLongLong",
          "old_text": "addReplyArrayLen(c,2)",
          "new_text": "addReplyLongLong(c,arange_end)",
          "old_line_content": "                    addReplyArrayLen(c,2);",
          "new_line_content": "                    addReplyLongLong(c,arange_end);",
          "content_same": false
        },
        {
          "line": 907,
          "old_api": "addReplyLongLong",
          "new_api": "addReplyArrayLen",
          "old_text": "addReplyLongLong(c,brange_start)",
          "new_text": "addReplyArrayLen(c,2)",
          "old_line_content": "                    addReplyLongLong(c,brange_start);",
          "new_line_content": "                    addReplyArrayLen(c,2);",
          "content_same": false
        },
        {
          "line": 922,
          "old_api": "LCS",
          "new_api": "addReplyBulkCString",
          "old_text": "LCS(alen,blen)",
          "new_text": "addReplyBulkCString(c,\"len\")",
          "old_line_content": "        addReplyLongLong(c,LCS(alen,blen));",
          "new_line_content": "        addReplyBulkCString(c,\"len\");",
          "content_same": false
        },
        {
          "line": 923,
          "old_api": "setDeferredArrayLen",
          "new_api": "LCS",
          "old_text": "setDeferredArrayLen(c,arraylenptr,arraylen)",
          "new_text": "LCS(alen,blen)",
          "old_line_content": "        setDeferredArrayLen(c,arraylenptr,arraylen);",
          "new_line_content": "        addReplyLongLong(c,LCS(alen,blen));",
          "content_same": false
        },
        {
          "line": 933,
          "old_api": "zfree",
          "new_api": "sdsfree",
          "old_text": "zfree(lcs)",
          "new_text": "sdsfree(result)",
          "old_line_content": "    zfree(lcs);",
          "new_line_content": "    sdsfree(result);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 513,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(str)",
          "old_line_content": "    }",
          "new_line_content": "        strlen = sdslen(str);",
          "content_same": false
        },
        {
          "line": 518,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.emptybulk)",
          "old_line_content": "        return;",
          "new_line_content": "        addReply(c,shared.emptybulk);",
          "content_same": false
        },
        {
          "line": 530,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.emptybulk)",
          "old_line_content": "    } else {",
          "new_line_content": "        addReply(c,shared.emptybulk);",
          "content_same": false
        },
        {
          "line": 532,
          "old_api": null,
          "new_api": "addReplyBulkCBuffer",
          "old_text": null,
          "new_text": "addReplyBulkCBuffer(c,(char*)str+start,end-start+1)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyBulkCBuffer(c,(char*)str+start,end-start+1);",
          "content_same": false
        },
        {
          "line": 539,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(c,c->argc-1)",
          "old_line_content": "    for (j = 1; j < c->argc; j++) {",
          "new_line_content": "    addReplyArrayLen(c,c->argc-1);",
          "content_same": false
        },
        {
          "line": 541,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[j])",
          "old_line_content": "        if (o == NULL) {",
          "new_line_content": "        robj *o = lookupKeyRead(c->db,c->argv[j]);",
          "content_same": false
        },
        {
          "line": 543,
          "old_api": null,
          "new_api": "addReplyNull",
          "old_text": null,
          "new_text": "addReplyNull(c)",
          "old_line_content": "        } else {",
          "new_line_content": "            addReplyNull(c);",
          "content_same": false
        },
        {
          "line": 546,
          "old_api": null,
          "new_api": "addReplyNull",
          "old_text": null,
          "new_text": "addReplyNull(c)",
          "old_line_content": "            } else {",
          "new_line_content": "                addReplyNull(c);",
          "content_same": false
        },
        {
          "line": 548,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,o)",
          "old_line_content": "            }",
          "new_line_content": "                addReplyBulk(c,o);",
          "content_same": false
        },
        {
          "line": 558,
          "old_api": null,
          "new_api": "addReplyErrorArity",
          "old_text": null,
          "new_text": "addReplyErrorArity(c)",
          "old_line_content": "        return;",
          "new_line_content": "        addReplyErrorArity(c);",
          "content_same": false
        },
        {
          "line": 567,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.czero)",
          "old_line_content": "                return;",
          "new_line_content": "                addReply(c, shared.czero);",
          "content_same": false
        },
        {
          "line": 576,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_STRING,\"set\",c->argv[j],c->db->id)",
          "old_line_content": "    }",
          "new_line_content": "        notifyKeyspaceEvent(NOTIFY_STRING,\"set\",c->argv[j],c->db->id);",
          "content_same": false
        },
        {
          "line": 579,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, nx ? shared.cone : shared.ok)",
          "old_line_content": "}",
          "new_line_content": "    addReply(c, nx ? shared.cone : shared.ok);",
          "content_same": false
        },
        {
          "line": 583,
          "old_api": null,
          "new_api": "msetGenericCommand",
          "old_text": null,
          "new_text": "msetGenericCommand(c,0)",
          "old_line_content": "}",
          "new_line_content": "    msetGenericCommand(c,0);",
          "content_same": false
        },
        {
          "line": 587,
          "old_api": null,
          "new_api": "msetGenericCommand",
          "old_text": null,
          "new_text": "msetGenericCommand(c,1)",
          "old_line_content": "}",
          "new_line_content": "    msetGenericCommand(c,1);",
          "content_same": false
        },
        {
          "line": 596,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c,o,&value,NULL)",
          "old_line_content": "",
          "new_line_content": "    if (getLongLongFromObjectOrReply(c,o,&value,NULL) != C_OK) return;",
          "content_same": false
        },
        {
          "line": 601,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"increment or decrement would overflow\")",
          "old_line_content": "        return;",
          "new_line_content": "        addReplyError(c,\"increment or decrement would overflow\");",
          "content_same": false
        },
        {
          "line": 615,
          "old_api": null,
          "new_api": "dbOverwrite",
          "old_text": null,
          "new_text": "dbOverwrite(c->db,c->argv[1],new)",
          "old_line_content": "        } else {",
          "new_line_content": "            dbOverwrite(c->db,c->argv[1],new);",
          "content_same": false
        },
        {
          "line": 617,
          "old_api": null,
          "new_api": "dbAdd",
          "old_text": null,
          "new_text": "dbAdd(c->db,c->argv[1],new)",
          "old_line_content": "        }",
          "new_line_content": "            dbAdd(c->db,c->argv[1],new);",
          "content_same": false
        },
        {
          "line": 106,
          "old_api": null,
          "new_api": "setKey",
          "old_text": null,
          "new_text": "setKey(c,c->db,key,val,setkey_flags)",
          "old_line_content": "    server.dirty++;",
          "new_line_content": "    setKey(c,c->db,key,val,setkey_flags);",
          "content_same": false
        },
        {
          "line": 108,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_STRING,\"set\",key,c->db->id)",
          "old_line_content": "",
          "new_line_content": "    notifyKeyspaceEvent(NOTIFY_STRING,\"set\",key,c->db->id);",
          "content_same": false
        },
        {
          "line": 621,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_STRING,\"incrby\",c->argv[1],c->db->id)",
          "old_line_content": "    server.dirty++;",
          "new_line_content": "    notifyKeyspaceEvent(NOTIFY_STRING,\"incrby\",c->argv[1],c->db->id);",
          "content_same": false
        },
        {
          "line": 111,
          "old_api": null,
          "new_api": "setExpire",
          "old_text": null,
          "new_text": "setExpire(c,c->db,key,milliseconds)",
          "old_line_content": "        /* Propagate as SET Key Value PXAT millisecond-timestamp if there is",
          "new_line_content": "        setExpire(c,c->db,key,milliseconds);",
          "content_same": false
        },
        {
          "line": 623,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c, value)",
          "old_line_content": "}",
          "new_line_content": "    addReplyLongLong(c, value);",
          "content_same": false
        },
        {
          "line": 627,
          "old_api": null,
          "new_api": "incrDecrCommand",
          "old_text": null,
          "new_text": "incrDecrCommand(c,1)",
          "old_line_content": "}",
          "new_line_content": "    incrDecrCommand(c,1);",
          "content_same": false
        },
        {
          "line": 117,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_GENERIC,\"expire\",key,c->db->id)",
          "old_line_content": "    }",
          "new_line_content": "        notifyKeyspaceEvent(NOTIFY_GENERIC,\"expire\",key,c->db->id);",
          "content_same": false
        },
        {
          "line": 631,
          "old_api": null,
          "new_api": "incrDecrCommand",
          "old_text": null,
          "new_text": "incrDecrCommand(c,-1)",
          "old_line_content": "}",
          "new_line_content": "    incrDecrCommand(c,-1);",
          "content_same": false
        },
        {
          "line": 121,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, ok_reply ? ok_reply : shared.ok)",
          "old_line_content": "    }",
          "new_line_content": "        addReply(c, ok_reply ? ok_reply : shared.ok);",
          "content_same": false
        },
        {
          "line": 638,
          "old_api": null,
          "new_api": "incrDecrCommand",
          "old_text": null,
          "new_text": "incrDecrCommand(c,incr)",
          "old_line_content": "}",
          "new_line_content": "    incrDecrCommand(c,incr);",
          "content_same": false
        },
        {
          "line": 128,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc((c->argc-1)*sizeof(robj*))",
          "old_line_content": "        for (j=0; j < c->argc; j++) {",
          "new_line_content": "        robj **argv = zmalloc((c->argc-1)*sizeof(robj*));",
          "content_same": false
        },
        {
          "line": 644,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL)",
          "old_line_content": "    /* Overflow check: negating LLONG_MIN will cause an overflow */",
          "new_line_content": "    if (getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL) != C_OK) return;",
          "content_same": false
        },
        {
          "line": 647,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, \"decrement would overflow\")",
          "old_line_content": "        return;",
          "new_line_content": "        addReplyError(c, \"decrement would overflow\");",
          "content_same": false
        },
        {
          "line": 138,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(c->argv[j])",
          "old_line_content": "        }",
          "new_line_content": "            incrRefCount(c->argv[j]);",
          "content_same": false
        },
        {
          "line": 650,
          "old_api": null,
          "new_api": "incrDecrCommand",
          "old_text": null,
          "new_text": "incrDecrCommand(c,-incr)",
          "old_line_content": "}",
          "new_line_content": "    incrDecrCommand(c,-incr);",
          "content_same": false
        },
        {
          "line": 140,
          "old_api": null,
          "new_api": "replaceClientCommandVector",
          "old_text": null,
          "new_text": "replaceClientCommandVector(c, argc, argv)",
          "old_line_content": "    }",
          "new_line_content": "        replaceClientCommandVector(c, argc, argv);",
          "content_same": false
        },
        {
          "line": 660,
          "old_api": null,
          "new_api": "getLongDoubleFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongDoubleFromObjectOrReply(c,c->argv[2],&incr,NULL)",
          "old_line_content": "        return;",
          "new_line_content": "        getLongDoubleFromObjectOrReply(c,c->argv[2],&incr,NULL) != C_OK)",
          "content_same": false
        },
        {
          "line": 665,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"increment would produce NaN or Infinity\")",
          "old_line_content": "        return;",
          "new_line_content": "        addReplyError(c,\"increment would produce NaN or Infinity\");",
          "content_same": false
        },
        {
          "line": 157,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c, expire, milliseconds, NULL)",
          "old_line_content": "    if (ret != C_OK) {",
          "new_line_content": "    int ret = getLongLongFromObjectOrReply(c, expire, milliseconds, NULL);",
          "content_same": false
        },
        {
          "line": 670,
          "old_api": null,
          "new_api": "dbOverwrite",
          "old_text": null,
          "new_text": "dbOverwrite(c->db,c->argv[1],new)",
          "old_line_content": "    else",
          "new_line_content": "        dbOverwrite(c->db,c->argv[1],new);",
          "content_same": false
        },
        {
          "line": 674,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_STRING,\"incrbyfloat\",c->argv[1],c->db->id)",
          "old_line_content": "    server.dirty++;",
          "new_line_content": "    notifyKeyspaceEvent(NOTIFY_STRING,\"incrbyfloat\",c->argv[1],c->db->id);",
          "content_same": false
        },
        {
          "line": 164,
          "old_api": null,
          "new_api": "addReplyErrorExpireTime",
          "old_text": null,
          "new_text": "addReplyErrorExpireTime(c)",
          "old_line_content": "        return C_ERR;",
          "new_line_content": "        addReplyErrorExpireTime(c);",
          "content_same": false
        },
        {
          "line": 171,
          "old_api": null,
          "new_api": "mstime",
          "old_text": null,
          "new_text": "mstime()",
          "old_line_content": "    }",
          "new_line_content": "        *milliseconds += mstime();",
          "content_same": false
        },
        {
          "line": 683,
          "old_api": null,
          "new_api": "rewriteClientCommandArgument",
          "old_text": null,
          "new_text": "rewriteClientCommandArgument(c,3,shared.keepttl)",
          "old_line_content": "}",
          "new_line_content": "    rewriteClientCommandArgument(c,3,shared.keepttl);",
          "content_same": false
        },
        {
          "line": 176,
          "old_api": null,
          "new_api": "addReplyErrorExpireTime",
          "old_text": null,
          "new_text": "addReplyErrorExpireTime(c)",
          "old_line_content": "        return C_ERR;",
          "new_line_content": "        addReplyErrorExpireTime(c);",
          "content_same": false
        },
        {
          "line": 690,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "    if (o == NULL) {",
          "new_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 696,
          "old_api": null,
          "new_api": "stringObjectLen",
          "old_text": null,
          "new_text": "stringObjectLen(c->argv[2])",
          "old_line_content": "    } else {",
          "new_line_content": "        totlen = stringObjectLen(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 699,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,OBJ_STRING)",
          "old_line_content": "            return;",
          "new_line_content": "        if (checkType(c,o,OBJ_STRING))",
          "content_same": false
        },
        {
          "line": 705,
          "old_api": null,
          "new_api": "checkStringLength",
          "old_text": null,
          "new_text": "checkStringLength(c,totlen)",
          "old_line_content": "            return;",
          "new_line_content": "        if (checkStringLength(c,totlen) != C_OK)",
          "content_same": false
        },
        {
          "line": 711,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(o->ptr)",
          "old_line_content": "    }",
          "new_line_content": "        totlen = sdslen(o->ptr);",
          "content_same": false
        },
        {
          "line": 714,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_STRING,\"append\",c->argv[1],c->db->id)",
          "old_line_content": "    server.dirty++;",
          "new_line_content": "    notifyKeyspaceEvent(NOTIFY_STRING,\"append\",c->argv[1],c->db->id);",
          "content_same": false
        },
        {
          "line": 716,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,totlen)",
          "old_line_content": "}",
          "new_line_content": "    addReplyLongLong(c,totlen);",
          "content_same": false
        },
        {
          "line": 723,
          "old_api": null,
          "new_api": "stringObjectLen",
          "old_text": null,
          "new_text": "stringObjectLen(o)",
          "old_line_content": "}",
          "new_line_content": "    addReplyLongLong(c,stringObjectLen(o));",
          "content_same": false
        },
        {
          "line": 735,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[2])",
          "old_line_content": "    if ((obja && obja->type != OBJ_STRING) ||",
          "new_line_content": "    objb = lookupKeyRead(c->db,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 224,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt, \"KEEPTTL\")",
          "old_line_content": "            !(*flags & OBJ_EX) && !(*flags & OBJ_EXAT) &&",
          "new_line_content": "        } else if (!strcasecmp(opt, \"KEEPTTL\") && !(*flags & OBJ_PERSIST) &&",
          "content_same": false
        },
        {
          "line": 739,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\n            \"The specified keys must contain string values\")",
          "old_line_content": "            \"The specified keys must contain string values\");",
          "new_line_content": "        addReplyError(c,",
          "content_same": false
        },
        {
          "line": 229,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt,\"PERSIST\")",
          "old_line_content": "               !(*flags & OBJ_EX) && !(*flags & OBJ_EXAT) &&",
          "new_line_content": "        } else if (!strcasecmp(opt,\"PERSIST\") && (command_type == COMMAND_GET) &&",
          "content_same": false
        },
        {
          "line": 748,
          "old_api": null,
          "new_api": "createStringObject",
          "old_text": null,
          "new_text": "createStringObject(\"\",0)",
          "old_line_content": "    a = obja->ptr;",
          "new_line_content": "    objb = objb ? getDecodedObject(objb) : createStringObject(\"\",0);",
          "content_same": false
        },
        {
          "line": 756,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt,\"IDX\")",
          "old_line_content": "            getidx = 1;",
          "new_line_content": "        if (!strcasecmp(opt,\"IDX\")) {",
          "content_same": false
        },
        {
          "line": 758,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt,\"LEN\")",
          "old_line_content": "            getlen = 1;",
          "new_line_content": "        } else if (!strcasecmp(opt,\"LEN\")) {",
          "content_same": false
        },
        {
          "line": 760,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt,\"WITHMATCHLEN\")",
          "old_line_content": "            withmatchlen = 1;",
          "new_line_content": "        } else if (!strcasecmp(opt,\"WITHMATCHLEN\")) {",
          "content_same": false
        },
        {
          "line": 763,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c,c->argv[j+1],&minmatchlen,NULL)",
          "old_line_content": "                != C_OK) goto cleanup;",
          "new_line_content": "            if (getLongLongFromObjectOrReply(c,c->argv[j+1],&minmatchlen,NULL)",
          "content_same": false
        },
        {
          "line": 768,
          "old_api": null,
          "new_api": "addReplyErrorObject",
          "old_text": null,
          "new_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "old_line_content": "            goto cleanup;",
          "new_line_content": "            addReplyErrorObject(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 775,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\n            \"If you want both the length and indexes, please just use IDX.\")",
          "old_line_content": "            \"If you want both the length and indexes, please just use IDX.\");",
          "new_line_content": "        addReplyError(c,",
          "content_same": false
        },
        {
          "line": 782,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, \"String too long for LCS\")",
          "old_line_content": "        goto cleanup;",
          "new_line_content": "        addReplyError(c, \"String too long for LCS\");",
          "content_same": false
        },
        {
          "line": 789,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(b)",
          "old_line_content": "",
          "new_line_content": "    uint32_t blen = sdslen(b);",
          "content_same": false
        },
        {
          "line": 278,
          "old_api": null,
          "new_api": "addReplyErrorObject",
          "old_text": null,
          "new_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "old_line_content": "            return C_ERR;",
          "new_line_content": "            addReplyErrorObject(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 802,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, \"Insufficient memory, transient memory for LCS exceeds proto-max-bulk-len\")",
          "old_line_content": "            goto cleanup;",
          "new_line_content": "            addReplyError(c, \"Insufficient memory, transient memory for LCS exceeds proto-max-bulk-len\");",
          "content_same": false
        },
        {
          "line": 292,
          "old_api": null,
          "new_api": "parseExtendedStringArgumentsOrReply",
          "old_text": null,
          "new_text": "parseExtendedStringArgumentsOrReply(c,&flags,&unit,&expire,COMMAND_SET)",
          "old_line_content": "        return;",
          "new_line_content": "    if (parseExtendedStringArgumentsOrReply(c,&flags,&unit,&expire,COMMAND_SET) != C_OK) {",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": null,
          "new_api": "ztrymalloc",
          "old_text": null,
          "new_text": "ztrymalloc(lcsalloc)",
          "old_line_content": "    }",
          "new_line_content": "        lcs = ztrymalloc(lcsalloc);",
          "content_same": false
        },
        {
          "line": 808,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, \"Insufficient memory, failed allocating transient memory for LCS\")",
          "old_line_content": "        goto cleanup;",
          "new_line_content": "        addReplyError(c, \"Insufficient memory, failed allocating transient memory for LCS\");",
          "content_same": false
        },
        {
          "line": 297,
          "old_api": null,
          "new_api": "setGenericCommand",
          "old_text": null,
          "new_text": "setGenericCommand(c,flags,c->argv[1],c->argv[2],expire,unit,NULL,NULL)",
          "old_line_content": "}",
          "new_line_content": "    setGenericCommand(c,flags,c->argv[1],c->argv[2],expire,unit,NULL,NULL);",
          "content_same": false
        },
        {
          "line": 302,
          "old_api": null,
          "new_api": "setGenericCommand",
          "old_text": null,
          "new_text": "setGenericCommand(c,OBJ_SET_NX,c->argv[1],c->argv[2],NULL,0,shared.cone,shared.czero)",
          "old_line_content": "}",
          "new_line_content": "    setGenericCommand(c,OBJ_SET_NX,c->argv[1],c->argv[2],NULL,0,shared.cone,shared.czero);",
          "content_same": false
        },
        {
          "line": 818,
          "old_api": null,
          "new_api": "LCS",
          "old_text": null,
          "new_text": "LCS(i,j)",
          "old_line_content": "            } else if (a[i-1] == b[j-1]) {",
          "new_line_content": "                LCS(i,j) = 0;",
          "content_same": false
        },
        {
          "line": 307,
          "old_api": null,
          "new_api": "setGenericCommand",
          "old_text": null,
          "new_text": "setGenericCommand(c,OBJ_EX,c->argv[1],c->argv[3],c->argv[2],UNIT_SECONDS,NULL,NULL)",
          "old_line_content": "}",
          "new_line_content": "    setGenericCommand(c,OBJ_EX,c->argv[1],c->argv[3],c->argv[2],UNIT_SECONDS,NULL,NULL);",
          "content_same": false
        },
        {
          "line": 312,
          "old_api": null,
          "new_api": "setGenericCommand",
          "old_text": null,
          "new_text": "setGenericCommand(c,OBJ_PX,c->argv[1],c->argv[3],c->argv[2],UNIT_MILLISECONDS,NULL,NULL)",
          "old_line_content": "}",
          "new_line_content": "    setGenericCommand(c,OBJ_PX,c->argv[1],c->argv[3],c->argv[2],UNIT_MILLISECONDS,NULL,NULL);",
          "content_same": false
        },
        {
          "line": 824,
          "old_api": null,
          "new_api": "LCS",
          "old_text": null,
          "new_text": "LCS(i-1,j-1)",
          "old_line_content": "            } else {",
          "new_line_content": "                LCS(i,j) = LCS(i-1,j-1)+1;",
          "content_same": false
        },
        {
          "line": 318,
          "old_api": null,
          "new_api": "lookupKeyReadOrReply",
          "old_text": null,
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.null[c->resp])",
          "old_line_content": "        return C_OK;",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.null[c->resp])) == NULL)",
          "content_same": false
        },
        {
          "line": 831,
          "old_api": null,
          "new_api": "LCS",
          "old_text": null,
          "new_text": "LCS(i,j)",
          "old_line_content": "            }",
          "new_line_content": "                LCS(i,j) = lcs1 > lcs2 ? lcs1 : lcs2;",
          "content_same": false
        },
        {
          "line": 321,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,OBJ_STRING)",
          "old_line_content": "        return C_ERR;",
          "new_line_content": "    if (checkType(c,o,OBJ_STRING)) {",
          "content_same": false
        },
        {
          "line": 325,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,o)",
          "old_line_content": "    return C_OK;",
          "new_line_content": "    addReplyBulk(c,o);",
          "content_same": false
        },
        {
          "line": 838,
          "old_api": null,
          "new_api": "LCS",
          "old_text": null,
          "new_text": "LCS(alen,blen)",
          "old_line_content": "    sds result = NULL;        /* Resulting LCS string. */",
          "new_line_content": "    uint32_t idx = LCS(alen,blen);",
          "content_same": false
        },
        {
          "line": 330,
          "old_api": null,
          "new_api": "getGenericCommand",
          "old_text": null,
          "new_text": "getGenericCommand(c)",
          "old_line_content": "}",
          "new_line_content": "    getGenericCommand(c);",
          "content_same": false
        },
        {
          "line": 848,
          "old_api": null,
          "new_api": "sdsnewlen",
          "old_text": null,
          "new_text": "sdsnewlen(SDS_NOINIT,idx)",
          "old_line_content": "",
          "new_line_content": "    if (computelcs) result = sdsnewlen(SDS_NOINIT,idx);",
          "content_same": false
        },
        {
          "line": 855,
          "old_api": null,
          "new_api": "addReplyDeferredLen",
          "old_text": null,
          "new_text": "addReplyDeferredLen(c)",
          "old_line_content": "    }",
          "new_line_content": "        arraylenptr = addReplyDeferredLen(c);",
          "content_same": false
        },
        {
          "line": 358,
          "old_api": null,
          "new_api": "parseExtendedStringArgumentsOrReply",
          "old_text": null,
          "new_text": "parseExtendedStringArgumentsOrReply(c,&flags,&unit,&expire,COMMAND_GET)",
          "old_line_content": "        return;",
          "new_line_content": "    if (parseExtendedStringArgumentsOrReply(c,&flags,&unit,&expire,COMMAND_GET) != C_OK) {",
          "content_same": false
        },
        {
          "line": 364,
          "old_api": null,
          "new_api": "lookupKeyReadOrReply",
          "old_text": null,
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.null[c->resp])",
          "old_line_content": "        return;",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.null[c->resp])) == NULL)",
          "content_same": false
        },
        {
          "line": 367,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,OBJ_STRING)",
          "old_line_content": "        return;",
          "new_line_content": "    if (checkType(c,o,OBJ_STRING)) {",
          "content_same": false
        },
        {
          "line": 373,
          "old_api": null,
          "new_api": "getExpireMillisecondsOrReply",
          "old_text": null,
          "new_text": "getExpireMillisecondsOrReply(c, expire, flags, unit, &milliseconds)",
          "old_line_content": "        return;",
          "new_line_content": "    if (expire && getExpireMillisecondsOrReply(c, expire, flags, unit, &milliseconds) != C_OK) {",
          "content_same": false
        },
        {
          "line": 378,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,o)",
          "old_line_content": "",
          "new_line_content": "    addReplyBulk(c,o);",
          "content_same": false
        },
        {
          "line": 890,
          "old_api": null,
          "new_api": "LCS",
          "old_text": null,
          "new_text": "LCS(i,j-1)",
          "old_line_content": "            if (lcs1 > lcs2)",
          "new_line_content": "            uint32_t lcs2 = LCS(i,j-1);",
          "content_same": false
        },
        {
          "line": 382,
          "old_api": null,
          "new_api": "checkAlreadyExpired",
          "old_text": null,
          "new_text": "checkAlreadyExpired(milliseconds)",
          "old_line_content": "        /* When PXAT/EXAT absolute timestamp is specified, there can be a chance that timestamp",
          "new_line_content": "    if (((flags & OBJ_PXAT) || (flags & OBJ_EXAT)) && checkAlreadyExpired(milliseconds)) {",
          "content_same": false
        },
        {
          "line": 387,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(deleted)",
          "old_line_content": "        robj *aux = server.lazyfree_lazy_expire ? shared.unlink : shared.del;",
          "new_line_content": "        serverAssert(deleted);",
          "content_same": false
        },
        {
          "line": 391,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_GENERIC, \"del\", c->argv[1], c->db->id)",
          "old_line_content": "        server.dirty++;",
          "new_line_content": "        notifyKeyspaceEvent(NOTIFY_GENERIC, \"del\", c->argv[1], c->db->id);",
          "content_same": false
        },
        {
          "line": 394,
          "old_api": null,
          "new_api": "setExpire",
          "old_text": null,
          "new_text": "setExpire(c,c->db,c->argv[1],milliseconds)",
          "old_line_content": "        /* Propagate as PXEXPIREAT millisecond-timestamp if there is",
          "new_line_content": "        setExpire(c,c->db,c->argv[1],milliseconds);",
          "content_same": false
        },
        {
          "line": 910,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,match_len)",
          "old_line_content": "                    arraylen++;",
          "new_line_content": "                    if (withmatchlen) addReplyLongLong(c,match_len);",
          "content_same": false
        },
        {
          "line": 401,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_GENERIC,\"expire\",c->argv[1],c->db->id)",
          "old_line_content": "        server.dirty++;",
          "new_line_content": "        notifyKeyspaceEvent(NOTIFY_GENERIC,\"expire\",c->argv[1],c->db->id);",
          "content_same": false
        },
        {
          "line": 407,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_GENERIC,\"persist\",c->argv[1],c->db->id)",
          "old_line_content": "            server.dirty++;",
          "new_line_content": "            notifyKeyspaceEvent(NOTIFY_GENERIC,\"persist\",c->argv[1],c->db->id);",
          "content_same": false
        },
        {
          "line": 924,
          "old_api": null,
          "new_api": "setDeferredArrayLen",
          "old_text": null,
          "new_text": "setDeferredArrayLen(c,arraylenptr,arraylen)",
          "old_line_content": "    } else if (getlen) {",
          "new_line_content": "        setDeferredArrayLen(c,arraylenptr,arraylen);",
          "content_same": false
        },
        {
          "line": 926,
          "old_api": null,
          "new_api": "LCS",
          "old_text": null,
          "new_text": "LCS(alen,blen)",
          "old_line_content": "    } else {",
          "new_line_content": "        addReplyLongLong(c,LCS(alen,blen));",
          "content_same": false
        },
        {
          "line": 415,
          "old_api": null,
          "new_api": "dbSyncDelete",
          "old_text": null,
          "new_text": "dbSyncDelete(c->db, c->argv[1])",
          "old_line_content": "        /* Propagate as DEL command */",
          "new_line_content": "    if (dbSyncDelete(c->db, c->argv[1])) {",
          "content_same": false
        },
        {
          "line": 928,
          "old_api": null,
          "new_api": "addReplyBulkSds",
          "old_text": null,
          "new_text": "addReplyBulkSds(c,result)",
          "old_line_content": "        result = NULL;",
          "new_line_content": "        addReplyBulkSds(c,result);",
          "content_same": false
        },
        {
          "line": 419,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_GENERIC, \"del\", c->argv[1], c->db->id)",
          "old_line_content": "        server.dirty++;",
          "new_line_content": "        notifyKeyspaceEvent(NOTIFY_GENERIC, \"del\", c->argv[1], c->db->id);",
          "content_same": false
        },
        {
          "line": 934,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(lcs)",
          "old_line_content": "",
          "new_line_content": "    zfree(lcs);",
          "content_same": false
        },
        {
          "line": 938,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(objb)",
          "old_line_content": "    return;",
          "new_line_content": "    if (objb) decrRefCount(objb);",
          "content_same": false
        },
        {
          "line": 428,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_STRING,\"set\",c->argv[1],c->db->id)",
          "old_line_content": "    server.dirty++;",
          "new_line_content": "    notifyKeyspaceEvent(NOTIFY_STRING,\"set\",c->argv[1],c->db->id);",
          "content_same": false
        },
        {
          "line": 432,
          "old_api": null,
          "new_api": "rewriteClientCommandArgument",
          "old_text": null,
          "new_text": "rewriteClientCommandArgument(c,0,shared.set)",
          "old_line_content": "}",
          "new_line_content": "    rewriteClientCommandArgument(c,0,shared.set);",
          "content_same": false
        },
        {
          "line": 440,
          "old_api": null,
          "new_api": "getLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongFromObjectOrReply(c,c->argv[2],&offset,NULL)",
          "old_line_content": "        return;",
          "new_line_content": "    if (getLongFromObjectOrReply(c,c->argv[2],&offset,NULL) != C_OK)",
          "content_same": false
        },
        {
          "line": 444,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"offset is out of range\")",
          "old_line_content": "        return;",
          "new_line_content": "        addReplyError(c,\"offset is out of range\");",
          "content_same": false
        },
        {
          "line": 448,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "    if (o == NULL) {",
          "new_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 452,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "            return;",
          "new_line_content": "            addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 457,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(value)",
          "old_line_content": "            return;",
          "new_line_content": "        if (checkStringLength(c,offset+sdslen(value)) != C_OK)",
          "content_same": false
        },
        {
          "line": 461,
          "old_api": null,
          "new_api": "dbAdd",
          "old_text": null,
          "new_text": "dbAdd(c->db,c->argv[1],o)",
          "old_line_content": "    } else {",
          "new_line_content": "        dbAdd(c->db,c->argv[1],o);",
          "content_same": false
        },
        {
          "line": 466,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,OBJ_STRING)",
          "old_line_content": "            return;",
          "new_line_content": "        if (checkType(c,o,OBJ_STRING))",
          "content_same": false
        },
        {
          "line": 472,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,olen)",
          "old_line_content": "            return;",
          "new_line_content": "            addReplyLongLong(c,olen);",
          "content_same": false
        },
        {
          "line": 477,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(value)",
          "old_line_content": "            return;",
          "new_line_content": "        if (checkStringLength(c,offset+sdslen(value)) != C_OK)",
          "content_same": false
        },
        {
          "line": 481,
          "old_api": null,
          "new_api": "dbUnshareStringValue",
          "old_text": null,
          "new_text": "dbUnshareStringValue(c->db,c->argv[1],o)",
          "old_line_content": "    }",
          "new_line_content": "        o = dbUnshareStringValue(c->db,c->argv[1],o);",
          "content_same": false
        },
        {
          "line": 488,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_STRING,\n            \"setrange\",c->argv[1],c->db->id)",
          "old_line_content": "            \"setrange\",c->argv[1],c->db->id);",
          "new_line_content": "        notifyKeyspaceEvent(NOTIFY_STRING,",
          "content_same": false
        },
        {
          "line": 492,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(o->ptr)",
          "old_line_content": "}",
          "new_line_content": "    addReplyLongLong(c,sdslen(o->ptr));",
          "content_same": false
        },
        {
          "line": 501,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c,c->argv[2],&start,NULL)",
          "old_line_content": "        return;",
          "new_line_content": "    if (getLongLongFromObjectOrReply(c,c->argv[2],&start,NULL) != C_OK)",
          "content_same": false
        },
        {
          "line": 503,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c,c->argv[3],&end,NULL)",
          "old_line_content": "        return;",
          "new_line_content": "    if (getLongLongFromObjectOrReply(c,c->argv[3],&end,NULL) != C_OK)",
          "content_same": false
        },
        {
          "line": 506,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,OBJ_STRING)",
          "old_line_content": "",
          "new_line_content": "        checkType(c,o,OBJ_STRING)) return;",
          "content_same": false
        },
        {
          "line": 510,
          "old_api": null,
          "new_api": "ll2string",
          "old_text": null,
          "new_text": "ll2string(llbuf,sizeof(llbuf),(long)o->ptr)",
          "old_line_content": "    } else {",
          "new_line_content": "        strlen = ll2string(llbuf,sizeof(llbuf),(long)o->ptr);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 512,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(str)",
          "new_text": null,
          "old_line_content": "        strlen = sdslen(str);",
          "new_line_content": "        str = o->ptr;",
          "content_same": false
        },
        {
          "line": 517,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.emptybulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.emptybulk);",
          "new_line_content": "    if (start < 0 && end < 0 && start > end) {",
          "content_same": false
        },
        {
          "line": 529,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.emptybulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.emptybulk);",
          "new_line_content": "    if (start > end || strlen == 0) {",
          "content_same": false
        },
        {
          "line": 531,
          "old_api": "addReplyBulkCBuffer",
          "new_api": null,
          "old_text": "addReplyBulkCBuffer(c,(char*)str+start,end-start+1)",
          "new_text": null,
          "old_line_content": "        addReplyBulkCBuffer(c,(char*)str+start,end-start+1);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 538,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c,c->argc-1)",
          "new_text": null,
          "old_line_content": "    addReplyArrayLen(c,c->argc-1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 540,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[j])",
          "new_text": null,
          "old_line_content": "        robj *o = lookupKeyRead(c->db,c->argv[j]);",
          "new_line_content": "    for (j = 1; j < c->argc; j++) {",
          "content_same": false
        },
        {
          "line": 542,
          "old_api": "addReplyNull",
          "new_api": null,
          "old_text": "addReplyNull(c)",
          "new_text": null,
          "old_line_content": "            addReplyNull(c);",
          "new_line_content": "        if (o == NULL) {",
          "content_same": false
        },
        {
          "line": 545,
          "old_api": "addReplyNull",
          "new_api": null,
          "old_text": "addReplyNull(c)",
          "new_text": null,
          "old_line_content": "                addReplyNull(c);",
          "new_line_content": "            if (o->type != OBJ_STRING) {",
          "content_same": false
        },
        {
          "line": 547,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,o)",
          "new_text": null,
          "old_line_content": "                addReplyBulk(c,o);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 557,
          "old_api": "addReplyErrorArity",
          "new_api": null,
          "old_text": "addReplyErrorArity(c)",
          "new_text": null,
          "old_line_content": "        addReplyErrorArity(c);",
          "new_line_content": "    if ((c->argc % 2) == 0) {",
          "content_same": false
        },
        {
          "line": 565,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[j])",
          "new_text": null,
          "old_line_content": "            if (lookupKeyWrite(c->db,c->argv[j]) != NULL) {",
          "new_line_content": "        for (j = 1; j < c->argc; j += 2) {",
          "content_same": false
        },
        {
          "line": 573,
          "old_api": "tryObjectEncoding",
          "new_api": null,
          "old_text": "tryObjectEncoding(c->argv[j+1])",
          "new_text": null,
          "old_line_content": "        c->argv[j+1] = tryObjectEncoding(c->argv[j+1]);",
          "new_line_content": "    for (j = 1; j < c->argc; j += 2) {",
          "content_same": false
        },
        {
          "line": 578,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, nx ? shared.cone : shared.ok)",
          "new_text": null,
          "old_line_content": "    addReply(c, nx ? shared.cone : shared.ok);",
          "new_line_content": "    server.dirty += (c->argc-1)/2;",
          "content_same": false
        },
        {
          "line": 582,
          "old_api": "msetGenericCommand",
          "new_api": null,
          "old_text": "msetGenericCommand(c,0)",
          "new_text": null,
          "old_line_content": "    msetGenericCommand(c,0);",
          "new_line_content": "void msetCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 586,
          "old_api": "msetGenericCommand",
          "new_api": null,
          "old_text": "msetGenericCommand(c,1)",
          "new_text": null,
          "old_line_content": "    msetGenericCommand(c,1);",
          "new_line_content": "void msetnxCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 593,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 600,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"increment or decrement would overflow\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,\"increment or decrement would overflow\");",
          "new_line_content": "        (incr > 0 && oldvalue > 0 && incr > (LLONG_MAX-oldvalue))) {",
          "content_same": false
        },
        {
          "line": 614,
          "old_api": "dbOverwrite",
          "new_api": null,
          "old_text": "dbOverwrite(c->db,c->argv[1],new)",
          "new_text": null,
          "old_line_content": "            dbOverwrite(c->db,c->argv[1],new);",
          "new_line_content": "        if (o) {",
          "content_same": false
        },
        {
          "line": 616,
          "old_api": "dbAdd",
          "new_api": null,
          "old_text": "dbAdd(c->db,c->argv[1],new)",
          "new_text": null,
          "old_line_content": "            dbAdd(c->db,c->argv[1],new);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 105,
          "old_api": "setKey",
          "new_api": null,
          "old_text": "setKey(c,c->db,key,val,setkey_flags)",
          "new_text": null,
          "old_line_content": "    setKey(c,c->db,key,val,setkey_flags);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 107,
          "old_api": "notifyKeyspaceEvent",
          "new_api": null,
          "old_text": "notifyKeyspaceEvent(NOTIFY_STRING,\"set\",key,c->db->id)",
          "new_text": null,
          "old_line_content": "    notifyKeyspaceEvent(NOTIFY_STRING,\"set\",key,c->db->id);",
          "new_line_content": "    server.dirty++;",
          "content_same": false
        },
        {
          "line": 619,
          "old_api": "signalModifiedKey",
          "new_api": null,
          "old_text": "signalModifiedKey(c,c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    signalModifiedKey(c,c->db,c->argv[1]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 110,
          "old_api": "setExpire",
          "new_api": null,
          "old_text": "setExpire(c,c->db,key,milliseconds)",
          "new_text": null,
          "old_line_content": "        setExpire(c,c->db,key,milliseconds);",
          "new_line_content": "    if (expire) {",
          "content_same": false
        },
        {
          "line": 622,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c, value)",
          "new_text": null,
          "old_line_content": "    addReplyLongLong(c, value);",
          "new_line_content": "    server.dirty++;",
          "content_same": false
        },
        {
          "line": 113,
          "old_api": "createStringObjectFromLongLong",
          "new_api": null,
          "old_text": "createStringObjectFromLongLong(milliseconds)",
          "new_text": null,
          "old_line_content": "        robj *milliseconds_obj = createStringObjectFromLongLong(milliseconds);",
          "new_line_content": "         * EX/PX/EXAT/PXAT flag. */",
          "content_same": false
        },
        {
          "line": 626,
          "old_api": "incrDecrCommand",
          "new_api": null,
          "old_text": "incrDecrCommand(c,1)",
          "new_text": null,
          "old_line_content": "    incrDecrCommand(c,1);",
          "new_line_content": "void incrCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 630,
          "old_api": "incrDecrCommand",
          "new_api": null,
          "old_text": "incrDecrCommand(c,-1)",
          "new_text": null,
          "old_line_content": "    incrDecrCommand(c,-1);",
          "new_line_content": "void decrCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 120,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, ok_reply ? ok_reply : shared.ok)",
          "new_text": null,
          "old_line_content": "        addReply(c, ok_reply ? ok_reply : shared.ok);",
          "new_line_content": "    if (!(flags & OBJ_SET_GET)) {",
          "content_same": false
        },
        {
          "line": 636,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL)",
          "new_text": null,
          "old_line_content": "    if (getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL) != C_OK) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 127,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc((c->argc-1)*sizeof(robj*))",
          "new_text": null,
          "old_line_content": "        robj **argv = zmalloc((c->argc-1)*sizeof(robj*));",
          "new_line_content": "        int j;",
          "content_same": false
        },
        {
          "line": 643,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL)",
          "new_text": null,
          "old_line_content": "    if (getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL) != C_OK) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 646,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c, \"decrement would overflow\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c, \"decrement would overflow\");",
          "new_line_content": "    if (incr == LLONG_MIN) {",
          "content_same": false
        },
        {
          "line": 137,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(c->argv[j])",
          "new_text": null,
          "old_line_content": "            incrRefCount(c->argv[j]);",
          "new_line_content": "            argv[argc++] = c->argv[j];",
          "content_same": false
        },
        {
          "line": 649,
          "old_api": "incrDecrCommand",
          "new_api": null,
          "old_text": "incrDecrCommand(c,-incr)",
          "new_text": null,
          "old_line_content": "    incrDecrCommand(c,-incr);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 139,
          "old_api": "replaceClientCommandVector",
          "new_api": null,
          "old_text": "replaceClientCommandVector(c, argc, argv)",
          "new_text": null,
          "old_line_content": "        replaceClientCommandVector(c, argc, argv);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 656,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 663,
          "old_api": "isinf",
          "new_api": null,
          "old_text": "isinf(value)",
          "new_text": null,
          "old_line_content": "    if (isnan(value) || isinf(value)) {",
          "new_line_content": "    value += incr;",
          "content_same": false
        },
        {
          "line": 156,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c, expire, milliseconds, NULL)",
          "new_text": null,
          "old_line_content": "    int ret = getLongLongFromObjectOrReply(c, expire, milliseconds, NULL);",
          "new_line_content": "static int getExpireMillisecondsOrReply(client *c, robj *expire, int flags, int unit, long long *milliseconds) {",
          "content_same": false
        },
        {
          "line": 669,
          "old_api": "dbOverwrite",
          "new_api": null,
          "old_text": "dbOverwrite(c->db,c->argv[1],new)",
          "new_text": null,
          "old_line_content": "        dbOverwrite(c->db,c->argv[1],new);",
          "new_line_content": "    if (o)",
          "content_same": false
        },
        {
          "line": 671,
          "old_api": "dbAdd",
          "new_api": null,
          "old_text": "dbAdd(c->db,c->argv[1],new)",
          "new_text": null,
          "old_line_content": "        dbAdd(c->db,c->argv[1],new);",
          "new_line_content": "    else",
          "content_same": false
        },
        {
          "line": 163,
          "old_api": "addReplyErrorExpireTime",
          "new_api": null,
          "old_text": "addReplyErrorExpireTime(c)",
          "new_text": null,
          "old_line_content": "        addReplyErrorExpireTime(c);",
          "new_line_content": "        /* Negative value provided or multiplication is gonna overflow. */",
          "content_same": false
        },
        {
          "line": 680,
          "old_api": "rewriteClientCommandArgument",
          "new_api": null,
          "old_text": "rewriteClientCommandArgument(c,0,shared.set)",
          "new_text": null,
          "old_line_content": "    rewriteClientCommandArgument(c,0,shared.set);",
          "new_line_content": "     * will not create differences in replicas or after an AOF restart. */",
          "content_same": false
        },
        {
          "line": 170,
          "old_api": "mstime",
          "new_api": null,
          "old_text": "mstime()",
          "new_text": null,
          "old_line_content": "        *milliseconds += mstime();",
          "new_line_content": "    if ((flags & OBJ_PX) || (flags & OBJ_EX)) {",
          "content_same": false
        },
        {
          "line": 175,
          "old_api": "addReplyErrorExpireTime",
          "new_api": null,
          "old_text": "addReplyErrorExpireTime(c)",
          "new_text": null,
          "old_line_content": "        addReplyErrorExpireTime(c);",
          "new_line_content": "        /* Overflow detected. */",
          "content_same": false
        },
        {
          "line": 689,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 692,
          "old_api": "tryObjectEncoding",
          "new_api": null,
          "old_text": "tryObjectEncoding(c->argv[2])",
          "new_text": null,
          "old_line_content": "        c->argv[2] = tryObjectEncoding(c->argv[2]);",
          "new_line_content": "        /* Create the key */",
          "content_same": false
        },
        {
          "line": 698,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,OBJ_STRING)",
          "new_text": null,
          "old_line_content": "        if (checkType(c,o,OBJ_STRING))",
          "new_line_content": "        /* Key exists, check type */",
          "content_same": false
        },
        {
          "line": 703,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(append->ptr)",
          "new_text": null,
          "old_line_content": "        totlen = stringObjectLen(o)+sdslen(append->ptr);",
          "new_line_content": "        append = c->argv[2];",
          "content_same": false
        },
        {
          "line": 708,
          "old_api": "dbUnshareStringValue",
          "new_api": null,
          "old_text": "dbUnshareStringValue(c->db,c->argv[1],o)",
          "new_text": null,
          "old_line_content": "        o = dbUnshareStringValue(c->db,c->argv[1],o);",
          "new_line_content": "        /* Append the value */",
          "content_same": false
        },
        {
          "line": 712,
          "old_api": "signalModifiedKey",
          "new_api": null,
          "old_text": "signalModifiedKey(c,c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    signalModifiedKey(c,c->db,c->argv[1]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 715,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c,totlen)",
          "new_text": null,
          "old_line_content": "    addReplyLongLong(c,totlen);",
          "new_line_content": "    server.dirty++;",
          "content_same": false
        },
        {
          "line": 720,
          "old_api": "lookupKeyReadOrReply",
          "new_api": null,
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "new_line_content": "    robj *o;",
          "content_same": false
        },
        {
          "line": 733,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    obja = lookupKeyRead(c->db,c->argv[1]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 223,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt, \"KEEPTTL\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(opt, \"KEEPTTL\") && !(*flags & OBJ_PERSIST) &&",
          "new_line_content": "            *flags |= OBJ_SET_GET;",
          "content_same": false
        },
        {
          "line": 738,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\n            \"The specified keys must contain string values\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 228,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"PERSIST\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(opt,\"PERSIST\") && (command_type == COMMAND_GET) &&",
          "new_line_content": "            *flags |= OBJ_KEEPTTL;",
          "content_same": false
        },
        {
          "line": 746,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject(\"\",0)",
          "new_text": null,
          "old_line_content": "    obja = obja ? getDecodedObject(obja) : createStringObject(\"\",0);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 755,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"IDX\")",
          "new_text": null,
          "old_line_content": "        if (!strcasecmp(opt,\"IDX\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 757,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"LEN\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(opt,\"LEN\")) {",
          "new_line_content": "            getidx = 1;",
          "content_same": false
        },
        {
          "line": 759,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"WITHMATCHLEN\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(opt,\"WITHMATCHLEN\")) {",
          "new_line_content": "            getlen = 1;",
          "content_same": false
        },
        {
          "line": 761,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"MINMATCHLEN\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(opt,\"MINMATCHLEN\") && moreargs) {",
          "new_line_content": "            withmatchlen = 1;",
          "content_same": false
        },
        {
          "line": 767,
          "old_api": "addReplyErrorObject",
          "new_api": null,
          "old_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "            addReplyErrorObject(c,shared.syntaxerr);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 774,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\n            \"If you want both the length and indexes, please just use IDX.\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,",
          "new_line_content": "    if (getlen && getidx) {",
          "content_same": false
        },
        {
          "line": 780,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(b)",
          "new_text": null,
          "old_line_content": "    if (sdslen(a) >= UINT32_MAX-1 || sdslen(b) >= UINT32_MAX-1) {",
          "new_line_content": "    /* Detect string truncation or later overflows. */",
          "content_same": false
        },
        {
          "line": 787,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(a)",
          "new_text": null,
          "old_line_content": "    uint32_t alen = sdslen(a);",
          "new_line_content": "     * building a table of LCS(x,y) substrings. */",
          "content_same": false
        },
        {
          "line": 277,
          "old_api": "addReplyErrorObject",
          "new_api": null,
          "old_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "            addReplyErrorObject(c,shared.syntaxerr);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 801,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c, \"Insufficient memory, transient memory for LCS exceeds proto-max-bulk-len\")",
          "new_text": null,
          "old_line_content": "            addReplyError(c, \"Insufficient memory, transient memory for LCS exceeds proto-max-bulk-len\");",
          "new_line_content": "        if (lcsalloc > (size_t)server.proto_max_bulk_len) {",
          "content_same": false
        },
        {
          "line": 291,
          "old_api": "parseExtendedStringArgumentsOrReply",
          "new_api": null,
          "old_text": "parseExtendedStringArgumentsOrReply(c,&flags,&unit,&expire,COMMAND_SET)",
          "new_text": null,
          "old_line_content": "    if (parseExtendedStringArgumentsOrReply(c,&flags,&unit,&expire,COMMAND_SET) != C_OK) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 804,
          "old_api": "ztrymalloc",
          "new_api": null,
          "old_text": "ztrymalloc(lcsalloc)",
          "new_text": null,
          "old_line_content": "        lcs = ztrymalloc(lcsalloc);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 295,
          "old_api": "tryObjectEncoding",
          "new_api": null,
          "old_text": "tryObjectEncoding(c->argv[2])",
          "new_text": null,
          "old_line_content": "    c->argv[2] = tryObjectEncoding(c->argv[2]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 807,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c, \"Insufficient memory, failed allocating transient memory for LCS\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c, \"Insufficient memory, failed allocating transient memory for LCS\");",
          "new_line_content": "    if (!lcs) {",
          "content_same": false
        },
        {
          "line": 300,
          "old_api": "tryObjectEncoding",
          "new_api": null,
          "old_text": "tryObjectEncoding(c->argv[2])",
          "new_text": null,
          "old_line_content": "    c->argv[2] = tryObjectEncoding(c->argv[2]);",
          "new_line_content": "void setnxCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 305,
          "old_api": "tryObjectEncoding",
          "new_api": null,
          "old_text": "tryObjectEncoding(c->argv[3])",
          "new_text": null,
          "old_line_content": "    c->argv[3] = tryObjectEncoding(c->argv[3]);",
          "new_line_content": "void setexCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 817,
          "old_api": "LCS",
          "new_api": null,
          "old_text": "LCS(i,j)",
          "new_text": null,
          "old_line_content": "                LCS(i,j) = 0;",
          "new_line_content": "                 * LCS length is zero. */",
          "content_same": false
        },
        {
          "line": 310,
          "old_api": "tryObjectEncoding",
          "new_api": null,
          "old_text": "tryObjectEncoding(c->argv[3])",
          "new_text": null,
          "old_line_content": "    c->argv[3] = tryObjectEncoding(c->argv[3]);",
          "new_line_content": "void psetexCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 823,
          "old_api": "LCS",
          "new_api": null,
          "old_text": "LCS(i-1,j-1)",
          "new_text": null,
          "old_line_content": "                LCS(i,j) = LCS(i-1,j-1)+1;",
          "new_line_content": "                 * plus that last char. */",
          "content_same": false
        },
        {
          "line": 828,
          "old_api": "LCS",
          "new_api": null,
          "old_text": "LCS(i-1,j)",
          "new_text": null,
          "old_line_content": "                uint32_t lcs1 = LCS(i-1,j);",
          "new_line_content": "                 * minus the last char, and the reverse. */",
          "content_same": false
        },
        {
          "line": 317,
          "old_api": "lookupKeyReadOrReply",
          "new_api": null,
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.null[c->resp])",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.null[c->resp])) == NULL)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 320,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,OBJ_STRING)",
          "new_text": null,
          "old_line_content": "    if (checkType(c,o,OBJ_STRING)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 324,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,o)",
          "new_text": null,
          "old_line_content": "    addReplyBulk(c,o);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 837,
          "old_api": "LCS",
          "new_api": null,
          "old_text": "LCS(alen,blen)",
          "new_text": null,
          "old_line_content": "    uint32_t idx = LCS(alen,blen);",
          "new_line_content": "     * it backward, but the length is already known, we store it into idx. */",
          "content_same": false
        },
        {
          "line": 329,
          "old_api": "getGenericCommand",
          "new_api": null,
          "old_text": "getGenericCommand(c)",
          "new_text": null,
          "old_line_content": "    getGenericCommand(c);",
          "new_line_content": "void getCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 847,
          "old_api": "sdsnewlen",
          "new_api": null,
          "old_text": "sdsnewlen(SDS_NOINIT,idx)",
          "new_text": null,
          "old_line_content": "    if (computelcs) result = sdsnewlen(SDS_NOINIT,idx);",
          "new_line_content": "    int computelcs = getidx || !getlen;",
          "content_same": false
        },
        {
          "line": 852,
          "old_api": "addReplyMapLen",
          "new_api": null,
          "old_text": "addReplyMapLen(c,2)",
          "new_text": null,
          "old_line_content": "        addReplyMapLen(c,2);",
          "new_line_content": "    if (getidx) {",
          "content_same": false
        },
        {
          "line": 357,
          "old_api": "parseExtendedStringArgumentsOrReply",
          "new_api": null,
          "old_text": "parseExtendedStringArgumentsOrReply(c,&flags,&unit,&expire,COMMAND_GET)",
          "new_text": null,
          "old_line_content": "    if (parseExtendedStringArgumentsOrReply(c,&flags,&unit,&expire,COMMAND_GET) != C_OK) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 363,
          "old_api": "lookupKeyReadOrReply",
          "new_api": null,
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.null[c->resp])",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.null[c->resp])) == NULL)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 366,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,OBJ_STRING)",
          "new_text": null,
          "old_line_content": "    if (checkType(c,o,OBJ_STRING)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 372,
          "old_api": "getExpireMillisecondsOrReply",
          "new_api": null,
          "old_text": "getExpireMillisecondsOrReply(c, expire, flags, unit, &milliseconds)",
          "new_text": null,
          "old_line_content": "    if (expire && getExpireMillisecondsOrReply(c, expire, flags, unit, &milliseconds) != C_OK) {",
          "new_line_content": "    long long milliseconds = 0;",
          "content_same": false
        },
        {
          "line": 888,
          "old_api": "LCS",
          "new_api": null,
          "old_text": "LCS(i-1,j)",
          "new_text": null,
          "old_line_content": "            uint32_t lcs1 = LCS(i-1,j);",
          "new_line_content": "             * LCS between, to understand what direction we need to go. */",
          "content_same": false
        },
        {
          "line": 377,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,o)",
          "new_text": null,
          "old_line_content": "    addReplyBulk(c,o);",
          "new_line_content": "    /* We need to do this before we expire the key or delete it */",
          "content_same": false
        },
        {
          "line": 381,
          "old_api": "checkAlreadyExpired",
          "new_api": null,
          "old_text": "checkAlreadyExpired(milliseconds)",
          "new_text": null,
          "old_line_content": "    if (((flags & OBJ_PXAT) || (flags & OBJ_EXAT)) && checkAlreadyExpired(milliseconds)) {",
          "new_line_content": "     * This why it doesn't need special handling in feedAppendOnlyFile to convert relative expire time to absolute one. */",
          "content_same": false
        },
        {
          "line": 384,
          "old_api": "dbAsyncDelete",
          "new_api": null,
          "old_text": "dbAsyncDelete(c->db, c->argv[1])",
          "new_text": null,
          "old_line_content": "        int deleted = server.lazyfree_lazy_expire ? dbAsyncDelete(c->db, c->argv[1]) :",
          "new_line_content": "         * has already elapsed so delete the key in that case. */",
          "content_same": false
        },
        {
          "line": 388,
          "old_api": "rewriteClientCommandVector",
          "new_api": null,
          "old_text": "rewriteClientCommandVector(c,2,aux,c->argv[1])",
          "new_text": null,
          "old_line_content": "        rewriteClientCommandVector(c,2,aux,c->argv[1]);",
          "new_line_content": "        robj *aux = server.lazyfree_lazy_expire ? shared.unlink : shared.del;",
          "content_same": false
        },
        {
          "line": 902,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c,2+withmatchlen)",
          "new_text": null,
          "old_line_content": "                    addReplyArrayLen(c,2+withmatchlen);",
          "new_line_content": "                if (arraylenptr) {",
          "content_same": false
        },
        {
          "line": 393,
          "old_api": "setExpire",
          "new_api": null,
          "old_text": "setExpire(c,c->db,c->argv[1],milliseconds)",
          "new_text": null,
          "old_line_content": "        setExpire(c,c->db,c->argv[1],milliseconds);",
          "new_line_content": "    } else if (expire) {",
          "content_same": false
        },
        {
          "line": 396,
          "old_api": "createStringObjectFromLongLong",
          "new_api": null,
          "old_text": "createStringObjectFromLongLong(milliseconds)",
          "new_text": null,
          "old_line_content": "        robj *milliseconds_obj = createStringObjectFromLongLong(milliseconds);",
          "new_line_content": "         * EX/PX/EXAT/PXAT flag and the key has not expired. */",
          "content_same": false
        },
        {
          "line": 403,
          "old_api": "removeExpire",
          "new_api": null,
          "old_text": "removeExpire(c->db, c->argv[1])",
          "new_text": null,
          "old_line_content": "        if (removeExpire(c->db, c->argv[1])) {",
          "new_line_content": "    } else if (flags & OBJ_PERSIST) {",
          "content_same": false
        },
        {
          "line": 921,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,\"len\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c,\"len\");",
          "new_line_content": "    if (arraylenptr) {",
          "content_same": false
        },
        {
          "line": 413,
          "old_api": "getGenericCommand",
          "new_api": null,
          "old_text": "getGenericCommand(c)",
          "new_text": null,
          "old_line_content": "    if (getGenericCommand(c) == C_ERR) return;",
          "new_line_content": "void getdelCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 925,
          "old_api": "LCS",
          "new_api": null,
          "old_text": "LCS(alen,blen)",
          "new_text": null,
          "old_line_content": "        addReplyLongLong(c,LCS(alen,blen));",
          "new_line_content": "    } else if (getlen) {",
          "content_same": false
        },
        {
          "line": 927,
          "old_api": "addReplyBulkSds",
          "new_api": null,
          "old_text": "addReplyBulkSds(c,result)",
          "new_text": null,
          "old_line_content": "        addReplyBulkSds(c,result);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 416,
          "old_api": "rewriteClientCommandVector",
          "new_api": null,
          "old_text": "rewriteClientCommandVector(c,2,shared.del,c->argv[1])",
          "new_text": null,
          "old_line_content": "        rewriteClientCommandVector(c,2,shared.del,c->argv[1]);",
          "new_line_content": "        /* Propagate as DEL command */",
          "content_same": false
        },
        {
          "line": 932,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(result)",
          "new_text": null,
          "old_line_content": "    sdsfree(result);",
          "new_line_content": "    /* Cleanup. */",
          "content_same": false
        },
        {
          "line": 424,
          "old_api": "getGenericCommand",
          "new_api": null,
          "old_text": "getGenericCommand(c)",
          "new_text": null,
          "old_line_content": "    if (getGenericCommand(c) == C_ERR) return;",
          "new_line_content": "void getsetCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 936,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(obja)",
          "new_text": null,
          "old_line_content": "    if (obja) decrRefCount(obja);",
          "new_line_content": "cleanup:",
          "content_same": false
        },
        {
          "line": 431,
          "old_api": "rewriteClientCommandArgument",
          "new_api": null,
          "old_text": "rewriteClientCommandArgument(c,0,shared.set)",
          "new_text": null,
          "old_line_content": "    rewriteClientCommandArgument(c,0,shared.set);",
          "new_line_content": "    /* Propagate as SET command */",
          "content_same": false
        },
        {
          "line": 439,
          "old_api": "getLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongFromObjectOrReply(c,c->argv[2],&offset,NULL)",
          "new_text": null,
          "old_line_content": "    if (getLongFromObjectOrReply(c,c->argv[2],&offset,NULL) != C_OK)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 443,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"offset is out of range\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,\"offset is out of range\");",
          "new_line_content": "    if (offset < 0) {",
          "content_same": false
        },
        {
          "line": 447,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 450,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(value)",
          "new_text": null,
          "old_line_content": "        if (sdslen(value) == 0) {",
          "new_line_content": "        /* Return 0 when setting nothing on a non-existing string */",
          "content_same": false
        },
        {
          "line": 456,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(value)",
          "new_text": null,
          "old_line_content": "        if (checkStringLength(c,offset+sdslen(value)) != C_OK)",
          "new_line_content": "        /* Return when the resulting string exceeds allowed size */",
          "content_same": false
        },
        {
          "line": 459,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(value)",
          "new_text": null,
          "old_line_content": "        o = createObject(OBJ_STRING,sdsnewlen(NULL, offset+sdslen(value)));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 465,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,OBJ_STRING)",
          "new_text": null,
          "old_line_content": "        if (checkType(c,o,OBJ_STRING))",
          "new_line_content": "        /* Key exists, check type */",
          "content_same": false
        },
        {
          "line": 469,
          "old_api": "stringObjectLen",
          "new_api": null,
          "old_text": "stringObjectLen(o)",
          "new_text": null,
          "old_line_content": "        olen = stringObjectLen(o);",
          "new_line_content": "        /* Return existing string length when setting nothing */",
          "content_same": false
        },
        {
          "line": 476,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(value)",
          "new_text": null,
          "old_line_content": "        if (checkStringLength(c,offset+sdslen(value)) != C_OK)",
          "new_line_content": "        /* Return when the resulting string exceeds allowed size */",
          "content_same": false
        },
        {
          "line": 480,
          "old_api": "dbUnshareStringValue",
          "new_api": null,
          "old_text": "dbUnshareStringValue(c->db,c->argv[1],o)",
          "new_text": null,
          "old_line_content": "        o = dbUnshareStringValue(c->db,c->argv[1],o);",
          "new_line_content": "        /* Create a copy when the object is shared or encoded. */",
          "content_same": false
        },
        {
          "line": 483,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(value)",
          "new_text": null,
          "old_line_content": "    if (sdslen(value) > 0) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 491,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(o->ptr)",
          "new_text": null,
          "old_line_content": "    addReplyLongLong(c,sdslen(o->ptr));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 500,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c,c->argv[2],&start,NULL)",
          "new_text": null,
          "old_line_content": "    if (getLongLongFromObjectOrReply(c,c->argv[2],&start,NULL) != C_OK)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 502,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c,c->argv[3],&end,NULL)",
          "new_text": null,
          "old_line_content": "    if (getLongLongFromObjectOrReply(c,c->argv[3],&end,NULL) != C_OK)",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 504,
          "old_api": "lookupKeyReadOrReply",
          "new_api": null,
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.emptybulk)",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.emptybulk)) == NULL ||",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 509,
          "old_api": "ll2string",
          "new_api": null,
          "old_text": "ll2string(llbuf,sizeof(llbuf),(long)o->ptr)",
          "new_text": null,
          "old_line_content": "        strlen = ll2string(llbuf,sizeof(llbuf),(long)o->ptr);",
          "new_line_content": "        str = llbuf;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 61,
      "total_additions": 122,
      "total_deletions": 122,
      "total_api_changes": 305
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 2,
        "api_related_lines": 305,
        "non_api_lines": 2,
        "non_api_line_numbers": [
          102,
          103
        ]
      }
    },
    "api_calls_before": 223,
    "api_calls_after": 223,
    "diff_info": {
      "added_lines": 2,
      "removed_lines": 1,
      "total_diff_lines": 15
    }
  }
}
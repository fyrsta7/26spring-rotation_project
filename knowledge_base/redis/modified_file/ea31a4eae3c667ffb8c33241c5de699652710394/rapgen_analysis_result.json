{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/ea31a4eae3c667ffb8c33241c5de699652710394",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/ea31a4eae3c667ffb8c33241c5de699652710394/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/ea31a4eae3c667ffb8c33241c5de699652710394/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/ea31a4eae3c667ffb8c33241c5de699652710394/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": true,
    "api_changes": {
      "replacements": [
        {
          "line": 564,
          "old_api": "sdsempty",
          "new_api": "sdslen",
          "old_text": "sdsempty()",
          "new_text": "sdslen(s)",
          "old_line_content": "    addReplySds(c,sdscatfmt(sdsempty(),\"$%u\\r\\n\",",
          "new_line_content": "    addReplyLongLongWithPrefix(c,sdslen(s),'$');",
          "content_same": false
        },
        {
          "line": 565,
          "old_api": "sdslen",
          "new_api": "addReplySds",
          "old_text": "sdslen(s)",
          "new_text": "addReplySds(c,s)",
          "old_line_content": "        (unsigned long)sdslen(s)));",
          "new_line_content": "    addReplySds(c,s);",
          "content_same": false
        },
        {
          "line": 566,
          "old_api": "addReplySds",
          "new_api": "addReply",
          "old_text": "addReplySds(c,s)",
          "new_text": "addReply(c,shared.crlf)",
          "old_line_content": "    addReplySds(c,s);",
          "new_line_content": "    addReply(c,shared.crlf);",
          "content_same": false
        },
        {
          "line": 584,
          "old_api": "ll2string",
          "new_api": "addReplyBulkCBuffer",
          "old_text": "ll2string(buf,64,ll)",
          "new_text": "addReplyBulkCBuffer(c,buf,len)",
          "old_line_content": "    len = ll2string(buf,64,ll);",
          "new_line_content": "    addReplyBulkCBuffer(c,buf,len);",
          "content_same": false
        },
        {
          "line": 592,
          "old_api": "listRelease",
          "new_api": "listDup",
          "old_text": "listRelease(dst->reply)",
          "new_text": "listDup(src->reply)",
          "old_line_content": "    listRelease(dst->reply);",
          "new_line_content": "    dst->reply = listDup(src->reply);",
          "content_same": false
        },
        {
          "line": 593,
          "old_api": "listDup",
          "new_api": "memcpy",
          "old_text": "listDup(src->reply)",
          "new_text": "memcpy(dst->buf,src->buf,src->bufpos)",
          "old_line_content": "    dst->reply = listDup(src->reply);",
          "new_line_content": "    memcpy(dst->buf,src->buf,src->bufpos);",
          "content_same": false
        },
        {
          "line": 608,
          "old_api": "createClient",
          "new_api": "serverLog",
          "old_text": "createClient(fd)",
          "new_text": "serverLog(LL_WARNING,\n            \"Error registering fd event for the new client: %s (fd=%d)\",\n            strerror(errno),fd)",
          "old_line_content": "    if ((c = createClient(fd)) == NULL) {",
          "new_line_content": "        serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 611,
          "old_api": "strerror",
          "new_api": "close",
          "old_text": "strerror(errno)",
          "new_text": "close(fd)",
          "old_line_content": "            strerror(errno),fd);",
          "new_line_content": "        close(fd); /* May be already closed, just ignore errors */",
          "content_same": false
        },
        {
          "line": 691,
          "old_api": "serverLog",
          "new_api": "acceptCommonHandler",
          "old_text": "serverLog(LL_VERBOSE,\"Accepted %s:%d\", cip, cport)",
          "new_text": "acceptCommonHandler(cfd,0,cip)",
          "old_line_content": "        serverLog(LL_VERBOSE,\"Accepted %s:%d\", cip, cport);",
          "new_line_content": "        acceptCommonHandler(cfd,0,cip);",
          "content_same": false
        },
        {
          "line": 710,
          "old_api": "serverLog",
          "new_api": "acceptCommonHandler",
          "old_text": "serverLog(LL_VERBOSE,\"Accepted connection to %s\", server.unixsocket)",
          "new_text": "acceptCommonHandler(cfd,CLIENT_UNIX_SOCKET,NULL)",
          "old_line_content": "        serverLog(LL_VERBOSE,\"Accepted connection to %s\", server.unixsocket);",
          "new_line_content": "        acceptCommonHandler(cfd,CLIENT_UNIX_SOCKET,NULL);",
          "content_same": false
        },
        {
          "line": 727,
          "old_api": "listLength",
          "new_api": "listFirst",
          "old_text": "listLength(server.slaves)",
          "new_text": "listFirst(server.slaves)",
          "old_line_content": "    while (listLength(server.slaves)) {",
          "new_line_content": "        listNode *ln = listFirst(server.slaves);",
          "content_same": false
        },
        {
          "line": 728,
          "old_api": "listFirst",
          "new_api": "freeClient",
          "old_text": "listFirst(server.slaves)",
          "new_text": "freeClient((client*)ln->value)",
          "old_line_content": "        listNode *ln = listFirst(server.slaves);",
          "new_line_content": "        freeClient((client*)ln->value);",
          "content_same": false
        },
        {
          "line": 747,
          "old_api": "listSearchKey",
          "new_api": "serverAssert",
          "old_text": "listSearchKey(server.clients,c)",
          "new_text": "serverAssert(ln != NULL)",
          "old_line_content": "        ln = listSearchKey(server.clients,c);",
          "new_line_content": "        serverAssert(ln != NULL);",
          "content_same": false
        },
        {
          "line": 748,
          "old_api": "serverAssert",
          "new_api": "listDelNode",
          "old_text": "serverAssert(ln != NULL)",
          "new_text": "listDelNode(server.clients,ln)",
          "old_line_content": "        serverAssert(ln != NULL);",
          "new_line_content": "        listDelNode(server.clients,ln);",
          "content_same": false
        },
        {
          "line": 753,
          "old_api": "aeDeleteFileEvent",
          "new_api": "close",
          "old_text": "aeDeleteFileEvent(server.el,c->fd,AE_WRITABLE)",
          "new_text": "close(c->fd)",
          "old_line_content": "        aeDeleteFileEvent(server.el,c->fd,AE_WRITABLE);",
          "new_line_content": "        close(c->fd);",
          "content_same": false
        },
        {
          "line": 760,
          "old_api": "listSearchKey",
          "new_api": "serverAssert",
          "old_text": "listSearchKey(server.clients_pending_write,c)",
          "new_text": "serverAssert(ln != NULL)",
          "old_line_content": "        ln = listSearchKey(server.clients_pending_write,c);",
          "new_line_content": "        serverAssert(ln != NULL);",
          "content_same": false
        },
        {
          "line": 761,
          "old_api": "serverAssert",
          "new_api": "listDelNode",
          "old_text": "serverAssert(ln != NULL)",
          "new_text": "listDelNode(server.clients_pending_write,ln)",
          "old_line_content": "        serverAssert(ln != NULL);",
          "new_line_content": "        listDelNode(server.clients_pending_write,ln);",
          "content_same": false
        },
        {
          "line": 769,
          "old_api": "listSearchKey",
          "new_api": "serverAssert",
          "old_text": "listSearchKey(server.unblocked_clients,c)",
          "new_text": "serverAssert(ln != NULL)",
          "old_line_content": "        ln = listSearchKey(server.unblocked_clients,c);",
          "new_line_content": "        serverAssert(ln != NULL);",
          "content_same": false
        },
        {
          "line": 770,
          "old_api": "serverAssert",
          "new_api": "listDelNode",
          "old_text": "serverAssert(ln != NULL)",
          "new_text": "listDelNode(server.unblocked_clients,ln)",
          "old_line_content": "        serverAssert(ln != NULL);",
          "new_line_content": "        listDelNode(server.unblocked_clients,ln);",
          "content_same": false
        },
        {
          "line": 798,
          "old_api": "serverLog",
          "new_api": "replicationGetSlaveName",
          "old_text": "serverLog(LL_WARNING,\"Connection with slave %s lost.\",\n            replicationGetSlaveName(c))",
          "new_text": "replicationGetSlaveName(c)",
          "old_line_content": "        serverLog(LL_WARNING,\"Connection with slave %s lost.\",",
          "new_line_content": "            replicationGetSlaveName(c));",
          "content_same": false
        },
        {
          "line": 808,
          "old_api": "unblockClient",
          "new_api": "dictRelease",
          "old_text": "unblockClient(c)",
          "new_text": "dictRelease(c->bpop.keys)",
          "old_line_content": "    if (c->flags & CLIENT_BLOCKED) unblockClient(c);",
          "new_line_content": "    dictRelease(c->bpop.keys);",
          "content_same": false
        },
        {
          "line": 812,
          "old_api": "unwatchAllKeys",
          "new_api": "listRelease",
          "old_text": "unwatchAllKeys(c)",
          "new_text": "listRelease(c->watched_keys)",
          "old_line_content": "    unwatchAllKeys(c);",
          "new_line_content": "    listRelease(c->watched_keys);",
          "content_same": false
        },
        {
          "line": 816,
          "old_api": "pubsubUnsubscribeAllChannels",
          "new_api": "pubsubUnsubscribeAllPatterns",
          "old_text": "pubsubUnsubscribeAllChannels(c,0)",
          "new_text": "pubsubUnsubscribeAllPatterns(c,0)",
          "old_line_content": "    pubsubUnsubscribeAllChannels(c,0);",
          "new_line_content": "    pubsubUnsubscribeAllPatterns(c,0);",
          "content_same": false
        },
        {
          "line": 817,
          "old_api": "pubsubUnsubscribeAllPatterns",
          "new_api": "dictRelease",
          "old_text": "pubsubUnsubscribeAllPatterns(c,0)",
          "new_text": "dictRelease(c->pubsub_channels)",
          "old_line_content": "    pubsubUnsubscribeAllPatterns(c,0);",
          "new_line_content": "    dictRelease(c->pubsub_channels);",
          "content_same": false
        },
        {
          "line": 818,
          "old_api": "dictRelease",
          "new_api": "listRelease",
          "old_text": "dictRelease(c->pubsub_channels)",
          "new_text": "listRelease(c->pubsub_patterns)",
          "old_line_content": "    dictRelease(c->pubsub_channels);",
          "new_line_content": "    listRelease(c->pubsub_patterns);",
          "content_same": false
        },
        {
          "line": 822,
          "old_api": "listRelease",
          "new_api": "freeClientArgv",
          "old_text": "listRelease(c->reply)",
          "new_text": "freeClientArgv(c)",
          "old_line_content": "    listRelease(c->reply);",
          "new_line_content": "    freeClientArgv(c);",
          "content_same": false
        },
        {
          "line": 834,
          "old_api": "close",
          "new_api": "sdsfree",
          "old_text": "close(c->repldbfd)",
          "new_text": "sdsfree(c->replpreamble)",
          "old_line_content": "            if (c->repldbfd != -1) close(c->repldbfd);",
          "new_line_content": "            if (c->replpreamble) sdsfree(c->replpreamble);",
          "content_same": false
        },
        {
          "line": 838,
          "old_api": "listSearchKey",
          "new_api": "serverAssert",
          "old_text": "listSearchKey(l,c)",
          "new_text": "serverAssert(ln != NULL)",
          "old_line_content": "        ln = listSearchKey(l,c);",
          "new_line_content": "        serverAssert(ln != NULL);",
          "content_same": false
        },
        {
          "line": 839,
          "old_api": "serverAssert",
          "new_api": "listDelNode",
          "old_text": "serverAssert(ln != NULL)",
          "new_text": "listDelNode(l,ln)",
          "old_line_content": "        serverAssert(ln != NULL);",
          "new_line_content": "        listDelNode(l,ln);",
          "content_same": false
        },
        {
          "line": 856,
          "old_api": "listSearchKey",
          "new_api": "serverAssert",
          "old_text": "listSearchKey(server.clients_to_close,c)",
          "new_text": "serverAssert(ln != NULL)",
          "old_line_content": "        ln = listSearchKey(server.clients_to_close,c);",
          "new_line_content": "        serverAssert(ln != NULL);",
          "content_same": false
        },
        {
          "line": 857,
          "old_api": "serverAssert",
          "new_api": "listDelNode",
          "old_text": "serverAssert(ln != NULL)",
          "new_text": "listDelNode(server.clients_to_close,ln)",
          "old_line_content": "        serverAssert(ln != NULL);",
          "new_line_content": "        listDelNode(server.clients_to_close,ln);",
          "content_same": false
        },
        {
          "line": 863,
          "old_api": "decrRefCount",
          "new_api": "zfree",
          "old_text": "decrRefCount(c->name)",
          "new_text": "zfree(c->argv)",
          "old_line_content": "    if (c->name) decrRefCount(c->name);",
          "new_line_content": "    zfree(c->argv);",
          "content_same": false
        },
        {
          "line": 864,
          "old_api": "zfree",
          "new_api": "freeClientMultiState",
          "old_text": "zfree(c->argv)",
          "new_text": "freeClientMultiState(c)",
          "old_line_content": "    zfree(c->argv);",
          "new_line_content": "    freeClientMultiState(c);",
          "content_same": false
        },
        {
          "line": 865,
          "old_api": "freeClientMultiState",
          "new_api": "sdsfree",
          "old_text": "freeClientMultiState(c)",
          "new_text": "sdsfree(c->peerid)",
          "old_line_content": "    freeClientMultiState(c);",
          "new_line_content": "    sdsfree(c->peerid);",
          "content_same": false
        },
        {
          "line": 866,
          "old_api": "sdsfree",
          "new_api": "zfree",
          "old_text": "sdsfree(c->peerid)",
          "new_text": "zfree(c)",
          "old_line_content": "    sdsfree(c->peerid);",
          "new_line_content": "    zfree(c);",
          "content_same": false
        },
        {
          "line": 881,
          "old_api": "listLength",
          "new_api": "listFirst",
          "old_text": "listLength(server.clients_to_close)",
          "new_text": "listFirst(server.clients_to_close)",
          "old_line_content": "    while (listLength(server.clients_to_close)) {",
          "new_line_content": "        listNode *ln = listFirst(server.clients_to_close);",
          "content_same": false
        },
        {
          "line": 882,
          "old_api": "listFirst",
          "new_api": "listNodeValue",
          "old_text": "listFirst(server.clients_to_close)",
          "new_text": "listNodeValue(ln)",
          "old_line_content": "        listNode *ln = listFirst(server.clients_to_close);",
          "new_line_content": "        client *c = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 886,
          "old_api": "freeClient",
          "new_api": "listDelNode",
          "old_text": "freeClient(c)",
          "new_text": "listDelNode(server.clients_to_close,ln)",
          "old_line_content": "        freeClient(c);",
          "new_line_content": "        listDelNode(server.clients_to_close,ln);",
          "content_same": false
        },
        {
          "line": 912,
          "old_api": "listFirst",
          "new_api": "sdslen",
          "old_text": "listFirst(c->reply)",
          "new_text": "sdslen(o)",
          "old_line_content": "            o = listNodeValue(listFirst(c->reply));",
          "new_line_content": "            objlen = sdslen(o);",
          "content_same": false
        },
        {
          "line": 932,
          "old_api": "listLength",
          "new_api": "serverAssert",
          "old_text": "listLength(c->reply)",
          "new_text": "serverAssert(c->reply_bytes == 0)",
          "old_line_content": "                if (listLength(c->reply) == 0)",
          "new_line_content": "                    serverAssert(c->reply_bytes == 0);",
          "content_same": false
        },
        {
          "line": 953,
          "old_api": "serverLog",
          "new_api": "strerror",
          "old_text": "serverLog(LL_VERBOSE,\n                \"Error writing to client: %s\", strerror(errno))",
          "new_text": "strerror(errno)",
          "old_line_content": "            serverLog(LL_VERBOSE,",
          "new_line_content": "                \"Error writing to client: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 954,
          "old_api": "strerror",
          "new_api": "freeClient",
          "old_text": "strerror(errno)",
          "new_text": "freeClient(c)",
          "old_line_content": "                \"Error writing to client: %s\", strerror(errno));",
          "new_line_content": "            freeClient(c);",
          "content_same": false
        },
        {
          "line": 982,
          "old_api": "UNUSED",
          "new_api": "writeToClient",
          "old_text": "UNUSED(mask)",
          "new_text": "writeToClient(fd,privdata,1)",
          "old_line_content": "    UNUSED(mask);",
          "new_line_content": "    writeToClient(fd,privdata,1);",
          "content_same": false
        },
        {
          "line": 995,
          "old_api": "listRewind",
          "new_api": "listNext",
          "old_text": "listRewind(server.clients_pending_write,&li)",
          "new_text": "listNext(&li)",
          "old_line_content": "    listRewind(server.clients_pending_write,&li);",
          "new_line_content": "    while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 996,
          "old_api": "listNext",
          "new_api": "listNodeValue",
          "old_text": "listNext(&li)",
          "new_text": "listNodeValue(ln)",
          "old_line_content": "    while((ln = listNext(&li))) {",
          "new_line_content": "        client *c = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 1006,
          "old_api": "clientHasPendingReplies",
          "new_api": "aeCreateFileEvent",
          "old_text": "clientHasPendingReplies(c)",
          "new_text": "aeCreateFileEvent(server.el, c->fd, AE_WRITABLE,\n                sendReplyToClient, c)",
          "old_line_content": "        if (clientHasPendingReplies(c) &&",
          "new_line_content": "            aeCreateFileEvent(server.el, c->fd, AE_WRITABLE,",
          "content_same": false
        },
        {
          "line": 1058,
          "old_api": "sdslen",
          "new_api": "addReplyError",
          "old_text": "sdslen(c->querybuf)",
          "new_text": "addReplyError(c,\"Protocol error: too big inline request\")",
          "old_line_content": "        if (sdslen(c->querybuf) > PROTO_INLINE_MAX_SIZE) {",
          "new_line_content": "            addReplyError(c,\"Protocol error: too big inline request\");",
          "content_same": false
        },
        {
          "line": 1059,
          "old_api": "addReplyError",
          "new_api": "setProtocolError",
          "old_text": "addReplyError(c,\"Protocol error: too big inline request\")",
          "new_text": "setProtocolError(\"too big inline request\",c,0)",
          "old_line_content": "            addReplyError(c,\"Protocol error: too big inline request\");",
          "new_line_content": "            setProtocolError(\"too big inline request\",c,0);",
          "content_same": false
        },
        {
          "line": 1071,
          "old_api": "sdsnewlen",
          "new_api": "sdssplitargs",
          "old_text": "sdsnewlen(c->querybuf,querylen)",
          "new_text": "sdssplitargs(aux,&argc)",
          "old_line_content": "    aux = sdsnewlen(c->querybuf,querylen);",
          "new_line_content": "    argv = sdssplitargs(aux,&argc);",
          "content_same": false
        },
        {
          "line": 1072,
          "old_api": "sdssplitargs",
          "new_api": "sdsfree",
          "old_text": "sdssplitargs(aux,&argc)",
          "new_text": "sdsfree(aux)",
          "old_line_content": "    argv = sdssplitargs(aux,&argc);",
          "new_line_content": "    sdsfree(aux);",
          "content_same": false
        },
        {
          "line": 1075,
          "old_api": "addReplyError",
          "new_api": "setProtocolError",
          "old_text": "addReplyError(c,\"Protocol error: unbalanced quotes in request\")",
          "new_text": "setProtocolError(\"unbalanced quotes in inline request\",c,0)",
          "old_line_content": "        addReplyError(c,\"Protocol error: unbalanced quotes in request\");",
          "new_line_content": "        setProtocolError(\"unbalanced quotes in inline request\",c,0);",
          "content_same": false
        },
        {
          "line": 1091,
          "old_api": "zfree",
          "new_api": "zmalloc",
          "old_text": "zfree(c->argv)",
          "new_text": "zmalloc(sizeof(robj*)*argc)",
          "old_line_content": "        if (c->argv) zfree(c->argv);",
          "new_line_content": "        c->argv = zmalloc(sizeof(robj*)*argc);",
          "content_same": false
        },
        {
          "line": 1097,
          "old_api": "sdslen",
          "new_api": "createObject",
          "old_text": "sdslen(argv[j])",
          "new_text": "createObject(OBJ_STRING,argv[j])",
          "old_line_content": "        if (sdslen(argv[j])) {",
          "new_line_content": "            c->argv[c->argc] = createObject(OBJ_STRING,argv[j]);",
          "content_same": false
        },
        {
          "line": 1117,
          "old_api": "sdslen",
          "new_api": "snprintf",
          "old_text": "sdslen(c->querybuf)",
          "new_text": "snprintf(buf,sizeof(buf),\"Query buffer during protocol error: '%s'\", c->querybuf)",
          "old_line_content": "        if (sdslen(c->querybuf) < PROTO_DUMP_LEN) {",
          "new_line_content": "            snprintf(buf,sizeof(buf),\"Query buffer during protocol error: '%s'\", c->querybuf);",
          "content_same": false
        },
        {
          "line": 1162,
          "old_api": "sdslen",
          "new_api": "addReplyError",
          "old_text": "sdslen(c->querybuf)",
          "new_text": "addReplyError(c,\"Protocol error: too big mbulk count string\")",
          "old_line_content": "            if (sdslen(c->querybuf) > PROTO_INLINE_MAX_SIZE) {",
          "new_line_content": "                addReplyError(c,\"Protocol error: too big mbulk count string\");",
          "content_same": false
        },
        {
          "line": 1163,
          "old_api": "addReplyError",
          "new_api": "setProtocolError",
          "old_text": "addReplyError(c,\"Protocol error: too big mbulk count string\")",
          "new_text": "setProtocolError(\"too big mbulk count string\",c,0)",
          "old_line_content": "                addReplyError(c,\"Protocol error: too big mbulk count string\");",
          "new_line_content": "                setProtocolError(\"too big mbulk count string\",c,0);",
          "content_same": false
        },
        {
          "line": 1175,
          "old_api": "serverAssertWithInfo",
          "new_api": "string2ll",
          "old_text": "serverAssertWithInfo(c,NULL,c->querybuf[0] == '*')",
          "new_text": "string2ll(c->querybuf+1,newline-(c->querybuf+1),&ll)",
          "old_line_content": "        serverAssertWithInfo(c,NULL,c->querybuf[0] == '*');",
          "new_line_content": "        ok = string2ll(c->querybuf+1,newline-(c->querybuf+1),&ll);",
          "content_same": false
        },
        {
          "line": 1178,
          "old_api": "addReplyError",
          "new_api": "setProtocolError",
          "old_text": "addReplyError(c,\"Protocol error: invalid multibulk length\")",
          "new_text": "setProtocolError(\"invalid mbulk count\",c,pos)",
          "old_line_content": "            addReplyError(c,\"Protocol error: invalid multibulk length\");",
          "new_line_content": "            setProtocolError(\"invalid mbulk count\",c,pos);",
          "content_same": false
        },
        {
          "line": 1192,
          "old_api": "zfree",
          "new_api": "zmalloc",
          "old_text": "zfree(c->argv)",
          "new_text": "zmalloc(sizeof(robj*)*c->multibulklen)",
          "old_line_content": "        if (c->argv) zfree(c->argv);",
          "new_line_content": "        c->argv = zmalloc(sizeof(robj*)*c->multibulklen);",
          "content_same": false
        },
        {
          "line": 1202,
          "old_api": "sdslen",
          "new_api": "addReplyError",
          "old_text": "sdslen(c->querybuf)",
          "new_text": "addReplyError(c,\n                        \"Protocol error: too big bulk count string\")",
          "old_line_content": "                if (sdslen(c->querybuf) > PROTO_INLINE_MAX_SIZE) {",
          "new_line_content": "                    addReplyError(c,",
          "content_same": false
        },
        {
          "line": 1225,
          "old_api": "addReplyError",
          "new_api": "setProtocolError",
          "old_text": "addReplyError(c,\"Protocol error: invalid bulk length\")",
          "new_text": "setProtocolError(\"invalid bulk length\",c,pos)",
          "old_line_content": "                addReplyError(c,\"Protocol error: invalid bulk length\");",
          "new_line_content": "                setProtocolError(\"invalid bulk length\",c,pos);",
          "content_same": false
        },
        {
          "line": 1261,
          "old_api": "createObject",
          "new_api": "sdsIncrLen",
          "old_text": "createObject(OBJ_STRING,c->querybuf)",
          "new_text": "sdsIncrLen(c->querybuf,-2)",
          "old_line_content": "                c->argv[c->argc++] = createObject(OBJ_STRING,c->querybuf);",
          "new_line_content": "                sdsIncrLen(c->querybuf,-2); /* remove CRLF */",
          "content_same": false
        },
        {
          "line": 1265,
          "old_api": "sdsnewlen",
          "new_api": "sdsclear",
          "old_text": "sdsnewlen(NULL,c->bulklen+2)",
          "new_text": "sdsclear(c->querybuf)",
          "old_line_content": "                c->querybuf = sdsnewlen(NULL,c->bulklen+2);",
          "new_line_content": "                sdsclear(c->querybuf);",
          "content_same": false
        },
        {
          "line": 1370,
          "old_api": "sdsMakeRoomFor",
          "new_api": "read",
          "old_text": "sdsMakeRoomFor(c->querybuf, readlen)",
          "new_text": "read(fd, c->querybuf+qblen, readlen)",
          "old_line_content": "    c->querybuf = sdsMakeRoomFor(c->querybuf, readlen);",
          "new_line_content": "    nread = read(fd, c->querybuf+qblen, readlen);",
          "content_same": false
        },
        {
          "line": 1376,
          "old_api": "strerror",
          "new_api": "freeClient",
          "old_text": "strerror(errno)",
          "new_text": "freeClient(c)",
          "old_line_content": "            serverLog(LL_VERBOSE, \"Reading from client: %s\",strerror(errno));",
          "new_line_content": "            freeClient(c);",
          "content_same": false
        },
        {
          "line": 1381,
          "old_api": "serverLog",
          "new_api": "freeClient",
          "old_text": "serverLog(LL_VERBOSE, \"Client closed connection\")",
          "new_text": "freeClient(c)",
          "old_line_content": "        serverLog(LL_VERBOSE, \"Client closed connection\");",
          "new_line_content": "        freeClient(c);",
          "content_same": false
        },
        {
          "line": 1396,
          "old_api": "sdslen",
          "new_api": "sdsempty",
          "old_text": "sdslen(c->querybuf)",
          "new_text": "sdsempty()",
          "old_line_content": "    if (sdslen(c->querybuf) > server.client_max_querybuf_len) {",
          "new_line_content": "        sds ci = catClientInfoString(sdsempty(),c), bytes = sdsempty();",
          "content_same": false
        },
        {
          "line": 1399,
          "old_api": "sdscatrepr",
          "new_api": "serverLog",
          "old_text": "sdscatrepr(bytes,c->querybuf,64)",
          "new_text": "serverLog(LL_WARNING,\"Closing client that reached max query buffer length: %s (qbuf initial bytes: %s)\", ci, bytes)",
          "old_line_content": "        bytes = sdscatrepr(bytes,c->querybuf,64);",
          "new_line_content": "        serverLog(LL_WARNING,\"Closing client that reached max query buffer length: %s (qbuf initial bytes: %s)\", ci, bytes);",
          "content_same": false
        },
        {
          "line": 1400,
          "old_api": "serverLog",
          "new_api": "sdsfree",
          "old_text": "serverLog(LL_WARNING,\"Closing client that reached max query buffer length: %s (qbuf initial bytes: %s)\", ci, bytes)",
          "new_text": "sdsfree(ci)",
          "old_line_content": "        serverLog(LL_WARNING,\"Closing client that reached max query buffer length: %s (qbuf initial bytes: %s)\", ci, bytes);",
          "new_line_content": "        sdsfree(ci);",
          "content_same": false
        },
        {
          "line": 1402,
          "old_api": "sdsfree",
          "new_api": "freeClient",
          "old_text": "sdsfree(bytes)",
          "new_text": "freeClient(c)",
          "old_line_content": "        sdsfree(bytes);",
          "new_line_content": "        freeClient(c);",
          "content_same": false
        },
        {
          "line": 1434,
          "old_api": "listRewind",
          "new_api": "listNext",
          "old_text": "listRewind(server.clients,&li)",
          "new_text": "listNext(&li)",
          "old_line_content": "    listRewind(server.clients,&li);",
          "new_line_content": "    while ((ln = listNext(&li)) != NULL) {",
          "content_same": false
        },
        {
          "line": 1435,
          "old_api": "listNext",
          "new_api": "listNodeValue",
          "old_text": "listNext(&li)",
          "new_text": "listNodeValue(ln)",
          "old_line_content": "    while ((ln = listNext(&li)) != NULL) {",
          "new_line_content": "        c = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 1438,
          "old_api": "listLength",
          "new_api": "sdslen",
          "old_text": "listLength(c->reply)",
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "        if (listLength(c->reply) > lol) lol = listLength(c->reply);",
          "new_line_content": "        if (sdslen(c->querybuf) > bib) bib = sdslen(c->querybuf);",
          "content_same": false
        },
        {
          "line": 1475,
          "old_api": "genClientPeerId",
          "new_api": "sdsnew",
          "old_text": "genClientPeerId(c,peerid,sizeof(peerid))",
          "new_text": "sdsnew(peerid)",
          "old_line_content": "        genClientPeerId(c,peerid,sizeof(peerid));",
          "new_line_content": "        c->peerid = sdsnew(peerid);",
          "content_same": false
        },
        {
          "line": 1521,
          "old_api": "dictSize",
          "new_api": "listLength",
          "old_text": "dictSize(client->pubsub_channels)",
          "new_text": "listLength(client->pubsub_patterns)",
          "old_line_content": "        (int) dictSize(client->pubsub_channels),",
          "new_line_content": "        (int) listLength(client->pubsub_patterns),",
          "content_same": false
        },
        {
          "line": 1524,
          "old_api": "sdslen",
          "new_api": "sdsavail",
          "old_text": "sdslen(client->querybuf)",
          "new_text": "sdsavail(client->querybuf)",
          "old_line_content": "        (unsigned long long) sdslen(client->querybuf),",
          "new_line_content": "        (unsigned long long) sdsavail(client->querybuf),",
          "content_same": false
        },
        {
          "line": 1527,
          "old_api": "listLength",
          "new_api": "getClientOutputBufferMemoryUsage",
          "old_text": "listLength(client->reply)",
          "new_text": "getClientOutputBufferMemoryUsage(client)",
          "old_line_content": "        (unsigned long long) listLength(client->reply),",
          "new_line_content": "        (unsigned long long) getClientOutputBufferMemoryUsage(client),",
          "content_same": false
        },
        {
          "line": 1537,
          "old_api": "listLength",
          "new_api": "sdsclear",
          "old_text": "listLength(server.clients)",
          "new_text": "sdsclear(o)",
          "old_line_content": "    sds o = sdsnewlen(NULL,200*listLength(server.clients));",
          "new_line_content": "    sdsclear(o);",
          "content_same": false
        },
        {
          "line": 1538,
          "old_api": "sdsclear",
          "new_api": "listRewind",
          "old_text": "sdsclear(o)",
          "new_text": "listRewind(server.clients,&li)",
          "old_line_content": "    sdsclear(o);",
          "new_line_content": "    listRewind(server.clients,&li);",
          "content_same": false
        },
        {
          "line": 1539,
          "old_api": "listRewind",
          "new_api": "listNext",
          "old_text": "listRewind(server.clients,&li)",
          "new_text": "listNext(&li)",
          "old_line_content": "    listRewind(server.clients,&li);",
          "new_line_content": "    while ((ln = listNext(&li)) != NULL) {",
          "content_same": false
        },
        {
          "line": 1540,
          "old_api": "listNext",
          "new_api": "listNodeValue",
          "old_text": "listNext(&li)",
          "new_text": "listNodeValue(ln)",
          "old_line_content": "    while ((ln = listNext(&li)) != NULL) {",
          "new_line_content": "        client = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 1541,
          "old_api": "listNodeValue",
          "new_api": "catClientInfoString",
          "old_text": "listNodeValue(ln)",
          "new_text": "catClientInfoString(o,client)",
          "old_line_content": "        client = listNodeValue(ln);",
          "new_line_content": "        o = catClientInfoString(o,client);",
          "content_same": false
        },
        {
          "line": 1542,
          "old_api": "catClientInfoString",
          "new_api": "sdscatlen",
          "old_text": "catClientInfoString(o,client)",
          "new_text": "sdscatlen(o,\"\\n\",1)",
          "old_line_content": "        o = catClientInfoString(o,client);",
          "new_line_content": "        o = sdscatlen(o,\"\\n\",1);",
          "content_same": false
        },
        {
          "line": 1555,
          "old_api": "getAllClientsInfoString",
          "new_api": "sdslen",
          "old_text": "getAllClientsInfoString()",
          "new_text": "sdslen(o)",
          "old_line_content": "        sds o = getAllClientsInfoString();",
          "new_line_content": "        addReplyBulkCBuffer(c,o,sdslen(o));",
          "content_same": false
        },
        {
          "line": 1556,
          "old_api": "sdslen",
          "new_api": "sdsfree",
          "old_text": "sdslen(o)",
          "new_text": "sdsfree(o)",
          "old_line_content": "        addReplyBulkCBuffer(c,o,sdslen(o));",
          "new_line_content": "        sdsfree(o);",
          "content_same": false
        },
        {
          "line": 1557,
          "old_api": "sdsfree",
          "new_api": "strcasecmp",
          "old_text": "sdsfree(o)",
          "new_text": "strcasecmp(c->argv[1]->ptr,\"reply\")",
          "old_line_content": "        sdsfree(o);",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"reply\") && c->argc == 3) {",
          "content_same": false
        },
        {
          "line": 1562,
          "old_api": "addReply",
          "new_api": "strcasecmp",
          "old_text": "addReply(c,shared.ok)",
          "new_text": "strcasecmp(c->argv[2]->ptr,\"off\")",
          "old_line_content": "            addReply(c,shared.ok);",
          "new_line_content": "        } else if (!strcasecmp(c->argv[2]->ptr,\"off\")) {",
          "content_same": false
        },
        {
          "line": 1598,
          "old_api": "strcasecmp",
          "new_api": "getClientTypeByName",
          "old_text": "strcasecmp(c->argv[i]->ptr,\"type\")",
          "new_text": "getClientTypeByName(c->argv[i+1]->ptr)",
          "old_line_content": "                } else if (!strcasecmp(c->argv[i]->ptr,\"type\") && moreargs) {",
          "new_line_content": "                    type = getClientTypeByName(c->argv[i+1]->ptr);",
          "content_same": false
        },
        {
          "line": 1628,
          "old_api": "listRewind",
          "new_api": "listNext",
          "old_text": "listRewind(server.clients,&li)",
          "new_text": "listNext(&li)",
          "old_line_content": "        listRewind(server.clients,&li);",
          "new_line_content": "        while ((ln = listNext(&li)) != NULL) {",
          "content_same": false
        },
        {
          "line": 1629,
          "old_api": "listNext",
          "new_api": "listNodeValue",
          "old_text": "listNext(&li)",
          "new_text": "listNodeValue(ln)",
          "old_line_content": "        while ((ln = listNext(&li)) != NULL) {",
          "new_line_content": "            client = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 1630,
          "old_api": "listNodeValue",
          "new_api": "getClientPeerId",
          "old_text": "listNodeValue(ln)",
          "new_text": "getClientPeerId(client)",
          "old_line_content": "            client = listNodeValue(ln);",
          "new_line_content": "            if (addr && strcmp(getClientPeerId(client),addr) != 0) continue;",
          "content_same": false
        },
        {
          "line": 1631,
          "old_api": "getClientPeerId",
          "new_api": "getClientType",
          "old_text": "getClientPeerId(client)",
          "new_text": "getClientType(client)",
          "old_line_content": "            if (addr && strcmp(getClientPeerId(client),addr) != 0) continue;",
          "new_line_content": "            if (type != -1 && getClientType(client) != type) continue;",
          "content_same": false
        },
        {
          "line": 1658,
          "old_api": "strcasecmp",
          "new_api": "sdslen",
          "old_text": "strcasecmp(c->argv[1]->ptr,\"setname\")",
          "new_text": "sdslen(c->argv[2]->ptr)",
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"setname\") && c->argc == 3) {",
          "new_line_content": "        int j, len = sdslen(c->argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 1684,
          "old_api": "incrRefCount",
          "new_api": "addReply",
          "old_text": "incrRefCount(c->name)",
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "        incrRefCount(c->name);",
          "new_line_content": "        addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 1685,
          "old_api": "addReply",
          "new_api": "strcasecmp",
          "old_text": "addReply(c,shared.ok)",
          "new_text": "strcasecmp(c->argv[1]->ptr,\"getname\")",
          "old_line_content": "        addReply(c,shared.ok);",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"getname\") && c->argc == 2) {",
          "content_same": false
        },
        {
          "line": 1690,
          "old_api": "addReply",
          "new_api": "strcasecmp",
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": "strcasecmp(c->argv[1]->ptr,\"pause\")",
          "old_line_content": "            addReply(c,shared.nullbulk);",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"pause\") && c->argc == 3) {",
          "content_same": false
        },
        {
          "line": 1696,
          "old_api": "pauseClients",
          "new_api": "addReply",
          "old_text": "pauseClients(duration)",
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "        pauseClients(duration);",
          "new_line_content": "        addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 1716,
          "old_api": "labs",
          "new_api": "serverLog",
          "old_text": "labs(now-logged_time)",
          "new_text": "serverLog(LL_WARNING,\"Possible SECURITY ATTACK detected. It looks like somebody is sending POST or Host: commands to Redis. This is likely due to an attacker attempting to use Cross Protocol Scripting to compromise your Redis instance. Connection aborted.\")",
          "old_line_content": "    if (labs(now-logged_time) > 60) {",
          "new_line_content": "        serverLog(LL_WARNING,\"Possible SECURITY ATTACK detected. It looks like somebody is sending POST or Host: commands to Redis. This is likely due to an attacker attempting to use Cross Protocol Scripting to compromise your Redis instance. Connection aborted.\");",
          "content_same": false
        },
        {
          "line": 1731,
          "old_api": "zmalloc",
          "new_api": "va_start",
          "old_text": "zmalloc(sizeof(robj*)*argc)",
          "new_text": "va_start(ap,argc)",
          "old_line_content": "    argv = zmalloc(sizeof(robj*)*argc);",
          "new_line_content": "    va_start(ap,argc);",
          "content_same": false
        },
        {
          "line": 1743,
          "old_api": "decrRefCount",
          "new_api": "zfree",
          "old_text": "decrRefCount(c->argv[j])",
          "new_text": "zfree(c->argv)",
          "old_line_content": "    for (j = 0; j < c->argc; j++) decrRefCount(c->argv[j]);",
          "new_line_content": "    zfree(c->argv);",
          "content_same": false
        },
        {
          "line": 1748,
          "old_api": "lookupCommandOrOriginal",
          "new_api": "serverAssertWithInfo",
          "old_text": "lookupCommandOrOriginal(c->argv[0]->ptr)",
          "new_text": "serverAssertWithInfo(c,NULL,c->cmd != NULL)",
          "old_line_content": "    c->cmd = lookupCommandOrOriginal(c->argv[0]->ptr);",
          "new_line_content": "    serverAssertWithInfo(c,NULL,c->cmd != NULL);",
          "content_same": false
        },
        {
          "line": 1749,
          "old_api": "serverAssertWithInfo",
          "new_api": "va_end",
          "old_text": "serverAssertWithInfo(c,NULL,c->cmd != NULL)",
          "new_text": "va_end(ap)",
          "old_line_content": "    serverAssertWithInfo(c,NULL,c->cmd != NULL);",
          "new_line_content": "    va_end(ap);",
          "content_same": false
        },
        {
          "line": 1755,
          "old_api": "freeClientArgv",
          "new_api": "zfree",
          "old_text": "freeClientArgv(c)",
          "new_text": "zfree(c->argv)",
          "old_line_content": "    freeClientArgv(c);",
          "new_line_content": "    zfree(c->argv);",
          "content_same": false
        },
        {
          "line": 1759,
          "old_api": "lookupCommandOrOriginal",
          "new_api": "serverAssertWithInfo",
          "old_text": "lookupCommandOrOriginal(c->argv[0]->ptr)",
          "new_text": "serverAssertWithInfo(c,NULL,c->cmd != NULL)",
          "old_line_content": "    c->cmd = lookupCommandOrOriginal(c->argv[0]->ptr);",
          "new_line_content": "    serverAssertWithInfo(c,NULL,c->cmd != NULL);",
          "content_same": false
        },
        {
          "line": 1784,
          "old_api": "incrRefCount",
          "new_api": "decrRefCount",
          "old_text": "incrRefCount(newval)",
          "new_text": "decrRefCount(oldval)",
          "old_line_content": "    incrRefCount(newval);",
          "new_line_content": "    if (oldval) decrRefCount(oldval);",
          "content_same": false
        },
        {
          "line": 1789,
          "old_api": "lookupCommandOrOriginal",
          "new_api": "serverAssertWithInfo",
          "old_text": "lookupCommandOrOriginal(c->argv[0]->ptr)",
          "new_text": "serverAssertWithInfo(c,NULL,c->cmd != NULL)",
          "old_line_content": "        c->cmd = lookupCommandOrOriginal(c->argv[0]->ptr);",
          "new_line_content": "        serverAssertWithInfo(c,NULL,c->cmd != NULL);",
          "content_same": false
        },
        {
          "line": 1904,
          "old_api": "checkClientOutputBufferLimits",
          "new_api": "sdsempty",
          "old_text": "checkClientOutputBufferLimits(c)",
          "new_text": "sdsempty()",
          "old_line_content": "    if (checkClientOutputBufferLimits(c)) {",
          "new_line_content": "        sds client = catClientInfoString(sdsempty(),c);",
          "content_same": false
        },
        {
          "line": 1907,
          "old_api": "freeClientAsync",
          "new_api": "serverLog",
          "old_text": "freeClientAsync(c)",
          "new_text": "serverLog(LL_WARNING,\"Client %s scheduled to be closed ASAP for overcoming of output buffer limits.\", client)",
          "old_line_content": "        freeClientAsync(c);",
          "new_line_content": "        serverLog(LL_WARNING,\"Client %s scheduled to be closed ASAP for overcoming of output buffer limits.\", client);",
          "content_same": false
        },
        {
          "line": 1908,
          "old_api": "serverLog",
          "new_api": "sdsfree",
          "old_text": "serverLog(LL_WARNING,\"Client %s scheduled to be closed ASAP for overcoming of output buffer limits.\", client)",
          "new_text": "sdsfree(client)",
          "old_line_content": "        serverLog(LL_WARNING,\"Client %s scheduled to be closed ASAP for overcoming of output buffer limits.\", client);",
          "new_line_content": "        sdsfree(client);",
          "content_same": false
        },
        {
          "line": 1921,
          "old_api": "listRewind",
          "new_api": "listNext",
          "old_text": "listRewind(server.slaves,&li)",
          "new_text": "listNext(&li)",
          "old_line_content": "    listRewind(server.slaves,&li);",
          "new_line_content": "    while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 1922,
          "old_api": "listNext",
          "new_api": "listNodeValue",
          "old_text": "listNext(&li)",
          "new_text": "listNodeValue(ln)",
          "old_line_content": "    while((ln = listNext(&li))) {",
          "new_line_content": "        client *slave = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 1979,
          "old_api": "listRewind",
          "new_api": "listNext",
          "old_text": "listRewind(server.clients,&li)",
          "new_text": "listNext(&li)",
          "old_line_content": "        listRewind(server.clients,&li);",
          "new_line_content": "        while ((ln = listNext(&li)) != NULL) {",
          "content_same": false
        },
        {
          "line": 1980,
          "old_api": "listNext",
          "new_api": "listNodeValue",
          "old_text": "listNext(&li)",
          "new_text": "listNodeValue(ln)",
          "old_line_content": "        while ((ln = listNext(&li)) != NULL) {",
          "new_line_content": "            c = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 2010,
          "old_api": "aeProcessEvents",
          "new_api": "handleClientsWithPendingWrites",
          "old_text": "aeProcessEvents(server.el, AE_FILE_EVENTS|AE_DONT_WAIT)",
          "new_text": "handleClientsWithPendingWrites()",
          "old_line_content": "        events += aeProcessEvents(server.el, AE_FILE_EVENTS|AE_DONT_WAIT);",
          "new_line_content": "        events += handleClientsWithPendingWrites();",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1536,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.clients)",
          "old_line_content": "    client *client;",
          "new_line_content": "    sds o = sdsnewlen(NULL,200*listLength(server.clients));",
          "content_same": false
        },
        {
          "line": 1552,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr,\"list\")",
          "old_line_content": "",
          "new_line_content": "    if (!strcasecmp(c->argv[1]->ptr,\"list\") && c->argc == 2) {",
          "content_same": false
        },
        {
          "line": 1554,
          "old_api": null,
          "new_api": "getAllClientsInfoString",
          "old_text": null,
          "new_text": "getAllClientsInfoString()",
          "old_line_content": "        /* CLIENT LIST */",
          "new_line_content": "        sds o = getAllClientsInfoString();",
          "content_same": false
        },
        {
          "line": 1559,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[2]->ptr,\"on\")",
          "old_line_content": "        /* CLIENT REPLY ON|OFF|SKIP */",
          "new_line_content": "        if (!strcasecmp(c->argv[2]->ptr,\"on\")) {",
          "content_same": false
        },
        {
          "line": 1561,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "            c->flags &= ~(CLIENT_REPLY_SKIP|CLIENT_REPLY_OFF);",
          "new_line_content": "            addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 1564,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[2]->ptr,\"skip\")",
          "old_line_content": "            c->flags |= CLIENT_REPLY_OFF;",
          "new_line_content": "        } else if (!strcasecmp(c->argv[2]->ptr,\"skip\")) {",
          "content_same": false
        },
        {
          "line": 1053,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(c->querybuf,'\\n')",
          "old_line_content": "    /* Search for end of line */",
          "new_line_content": "    newline = strchr(c->querybuf,'\\n');",
          "content_same": false
        },
        {
          "line": 1568,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "        } else {",
          "new_line_content": "            addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 1057,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "    if (newline == NULL) {",
          "new_line_content": "        if (sdslen(c->querybuf) > PROTO_INLINE_MAX_SIZE) {",
          "content_same": false
        },
        {
          "line": 1571,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr,\"kill\")",
          "old_line_content": "        }",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"kill\")) {",
          "content_same": false
        },
        {
          "line": 1070,
          "old_api": null,
          "new_api": "sdsnewlen",
          "old_text": null,
          "new_text": "sdsnewlen(c->querybuf,querylen)",
          "old_line_content": "    querylen = newline-(c->querybuf);",
          "new_line_content": "    aux = sdsnewlen(c->querybuf,querylen);",
          "content_same": false
        },
        {
          "line": 1074,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"Protocol error: unbalanced quotes in request\")",
          "old_line_content": "    if (argv == NULL) {",
          "new_line_content": "        addReplyError(c,\"Protocol error: unbalanced quotes in request\");",
          "content_same": false
        },
        {
          "line": 1591,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[i]->ptr,\"id\")",
          "old_line_content": "",
          "new_line_content": "                if (!strcasecmp(c->argv[i]->ptr,\"id\") && moreargs) {",
          "content_same": false
        },
        {
          "line": 1594,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c,c->argv[i+1],&tmp,NULL)",
          "old_line_content": "",
          "new_line_content": "                    if (getLongLongFromObjectOrReply(c,c->argv[i+1],&tmp,NULL)",
          "content_same": false
        },
        {
          "line": 572,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "    if (s == NULL) {",
          "new_line_content": "        addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 1597,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[i]->ptr,\"type\")",
          "old_line_content": "                    id = tmp;",
          "new_line_content": "                } else if (!strcasecmp(c->argv[i]->ptr,\"type\") && moreargs) {",
          "content_same": false
        },
        {
          "line": 574,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(s)",
          "old_line_content": "    } else {",
          "new_line_content": "        addReplyBulkCBuffer(c,s,strlen(s));",
          "content_same": false
        },
        {
          "line": 1086,
          "old_api": null,
          "new_api": "sdsrange",
          "old_text": null,
          "new_text": "sdsrange(c->querybuf,querylen+2,-1)",
          "old_line_content": "    /* Leave data after the first line of the query in the buffer */",
          "new_line_content": "    sdsrange(c->querybuf,querylen+2,-1);",
          "content_same": false
        },
        {
          "line": 1600,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(c,\"Unknown client type '%s'\",\n                            (char*) c->argv[i+1]->ptr)",
          "old_line_content": "                    if (type == -1) {",
          "new_line_content": "                        addReplyErrorFormat(c,\"Unknown client type '%s'\",",
          "content_same": false
        },
        {
          "line": 1090,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(c->argv)",
          "old_line_content": "    if (argc) {",
          "new_line_content": "        if (c->argv) zfree(c->argv);",
          "content_same": false
        },
        {
          "line": 1604,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[i]->ptr,\"addr\")",
          "old_line_content": "                    }",
          "new_line_content": "                } else if (!strcasecmp(c->argv[i]->ptr,\"addr\") && moreargs) {",
          "content_same": false
        },
        {
          "line": 1606,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[i]->ptr,\"skipme\")",
          "old_line_content": "                    addr = c->argv[i+1]->ptr;",
          "new_line_content": "                } else if (!strcasecmp(c->argv[i]->ptr,\"skipme\") && moreargs) {",
          "content_same": false
        },
        {
          "line": 583,
          "old_api": null,
          "new_api": "ll2string",
          "old_text": null,
          "new_text": "ll2string(buf,64,ll)",
          "old_line_content": "",
          "new_line_content": "    len = ll2string(buf,64,ll);",
          "content_same": false
        },
        {
          "line": 1096,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(argv[j])",
          "old_line_content": "    for (c->argc = 0, j = 0; j < argc; j++) {",
          "new_line_content": "        if (sdslen(argv[j])) {",
          "content_same": false
        },
        {
          "line": 1609,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[i+1]->ptr,\"no\")",
          "old_line_content": "                        skipme = 1;",
          "new_line_content": "                    } else if (!strcasecmp(c->argv[i+1]->ptr,\"no\")) {",
          "content_same": false
        },
        {
          "line": 1100,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(argv[j])",
          "old_line_content": "        } else {",
          "new_line_content": "            sdsfree(argv[j]);",
          "content_same": false
        },
        {
          "line": 1612,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "                    } else {",
          "new_line_content": "                        addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 591,
          "old_api": null,
          "new_api": "listRelease",
          "old_text": null,
          "new_text": "listRelease(dst->reply)",
          "old_line_content": "void copyClientOutputBuffer(client *dst, client *src) {",
          "new_line_content": "    listRelease(dst->reply);",
          "content_same": false
        },
        {
          "line": 1103,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(argv)",
          "old_line_content": "    }",
          "new_line_content": "    zfree(argv);",
          "content_same": false
        },
        {
          "line": 1616,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "                } else {",
          "new_line_content": "                    addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 1622,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "        } else {",
          "new_line_content": "            addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 1112,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "    if (server.verbosity <= LL_VERBOSE) {",
          "new_line_content": "        sds client = catClientInfoString(sdsempty(),c);",
          "content_same": false
        },
        {
          "line": 601,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(c->reply)",
          "old_line_content": "int clientHasPendingReplies(client *c) {",
          "new_line_content": "    return c->bufpos || listLength(c->reply);",
          "content_same": false
        },
        {
          "line": 1627,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(server.clients,&li)",
          "old_line_content": "        /* Iterate clients killing all the matching clients. */",
          "new_line_content": "        listRewind(server.clients,&li);",
          "content_same": false
        },
        {
          "line": 1116,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "        char buf[256];",
          "new_line_content": "        if (sdslen(c->querybuf) < PROTO_DUMP_LEN) {",
          "content_same": false
        },
        {
          "line": 607,
          "old_api": null,
          "new_api": "createClient",
          "old_text": null,
          "new_text": "createClient(fd)",
          "old_line_content": "    client *c;",
          "new_line_content": "    if ((c = createClient(fd)) == NULL) {",
          "content_same": false
        },
        {
          "line": 1119,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "        } else {",
          "new_line_content": "            snprintf(buf,sizeof(buf),\"Query buffer during protocol error: '%.*s' (... more %zu bytes ...) '%.*s'\", PROTO_DUMP_LEN/2, c->querybuf, sdslen(c->querybuf)-PROTO_DUMP_LEN, PROTO_DUMP_LEN/2, c->querybuf+sdslen(c->querybuf)-PROTO_DUMP_LEN/2);",
          "content_same": false
        },
        {
          "line": 610,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "            \"Error registering fd event for the new client: %s (fd=%d)\",",
          "new_line_content": "            strerror(errno),fd);",
          "content_same": false
        },
        {
          "line": 1125,
          "old_api": null,
          "new_api": "isprint",
          "old_text": null,
          "new_text": "isprint(*p)",
          "old_line_content": "        while (*p != '\\0') {",
          "new_line_content": "            if (!isprint(*p)) *p = '.';",
          "content_same": false
        },
        {
          "line": 1639,
          "old_api": null,
          "new_api": "freeClient",
          "old_text": null,
          "new_text": "freeClient(client)",
          "old_line_content": "            } else {",
          "new_line_content": "                freeClient(client);",
          "content_same": false
        },
        {
          "line": 618,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.clients)",
          "old_line_content": "     * mode and we can send an error for free using the Kernel I/O */",
          "new_line_content": "    if (listLength(server.clients) > server.maxclients) {",
          "content_same": false
        },
        {
          "line": 1130,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_VERBOSE,\n            \"Protocol error (%s) from client: %s. %s\", errstr, client, buf)",
          "old_line_content": "        /* Log all the client and protocol info. */",
          "new_line_content": "        serverLog(LL_VERBOSE,",
          "content_same": false
        },
        {
          "line": 1132,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(client)",
          "old_line_content": "            \"Protocol error (%s) from client: %s. %s\", errstr, client, buf);",
          "new_line_content": "        sdsfree(client);",
          "content_same": false
        },
        {
          "line": 622,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(err)",
          "old_line_content": "        /* That's a best effort error message, don't check write errors */",
          "new_line_content": "        if (write(c->fd,err,strlen(err)) == -1) {",
          "content_same": false
        },
        {
          "line": 1135,
          "old_api": null,
          "new_api": "sdsrange",
          "old_text": null,
          "new_text": "sdsrange(c->querybuf,pos,-1)",
          "old_line_content": "    c->flags |= CLIENT_CLOSE_AFTER_REPLY;",
          "new_line_content": "    sdsrange(c->querybuf,pos,-1);",
          "content_same": false
        },
        {
          "line": 1647,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"No such client\")",
          "old_line_content": "            if (killed == 0)",
          "new_line_content": "                addReplyError(c,\"No such client\");",
          "content_same": false
        },
        {
          "line": 1649,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "            else",
          "new_line_content": "                addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 626,
          "old_api": null,
          "new_api": "freeClient",
          "old_text": null,
          "new_text": "freeClient(c)",
          "old_line_content": "        server.stat_rejected_conn++;",
          "new_line_content": "        freeClient(c);",
          "content_same": false
        },
        {
          "line": 1651,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,killed)",
          "old_line_content": "        } else {",
          "new_line_content": "            addReplyLongLong(c,killed);",
          "content_same": false
        },
        {
          "line": 1657,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr,\"setname\")",
          "old_line_content": "        if (close_this_client) c->flags |= CLIENT_CLOSE_AFTER_REPLY;",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"setname\") && c->argc == 3) {",
          "content_same": false
        },
        {
          "line": 640,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(ip,\"::1\")",
          "old_line_content": "    {",
          "new_line_content": "        if (strcmp(ip,\"127.0.0.1\") && strcmp(ip,\"::1\")) {",
          "content_same": false
        },
        {
          "line": 1664,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(c->name)",
          "old_line_content": "        if (len == 0) {",
          "new_line_content": "            if (c->name) decrRefCount(c->name);",
          "content_same": false
        },
        {
          "line": 1666,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "            c->name = NULL;",
          "new_line_content": "            addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 1156,
          "old_api": null,
          "new_api": "serverAssertWithInfo",
          "old_text": null,
          "new_text": "serverAssertWithInfo(c,NULL,c->argc == 0)",
          "old_line_content": "        /* The client should have been reset */",
          "new_line_content": "        serverAssertWithInfo(c,NULL,c->argc == 0);",
          "content_same": false
        },
        {
          "line": 1159,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(c->querybuf,'\\r')",
          "old_line_content": "        /* Multi bulk length cannot be read without a \\r\\n */",
          "new_line_content": "        newline = strchr(c->querybuf,'\\r');",
          "content_same": false
        },
        {
          "line": 1161,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "        if (newline == NULL) {",
          "new_line_content": "            if (sdslen(c->querybuf) > PROTO_INLINE_MAX_SIZE) {",
          "content_same": false
        },
        {
          "line": 1675,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\n                    \"Client names cannot contain spaces, \"\n                    \"newlines or special characters.\")",
          "old_line_content": "            if (p[j] < '!' || p[j] > '~') { /* ASCII is assumed. */",
          "new_line_content": "                addReplyError(c,",
          "content_same": false
        },
        {
          "line": 1169,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "        /* Buffer should also contain \\n */",
          "new_line_content": "        if (newline-(c->querybuf) > ((signed)sdslen(c->querybuf)-2))",
          "content_same": false
        },
        {
          "line": 1681,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(c->name)",
          "old_line_content": "        }",
          "new_line_content": "        if (c->name) decrRefCount(c->name);",
          "content_same": false
        },
        {
          "line": 1683,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(c->name)",
          "old_line_content": "        c->name = c->argv[2];",
          "new_line_content": "        incrRefCount(c->name);",
          "content_same": false
        },
        {
          "line": 662,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(err)",
          "old_line_content": "                \"the server to start accepting connections from the outside.\\r\\n\";",
          "new_line_content": "            if (write(c->fd,err,strlen(err)) == -1) {",
          "content_same": false
        },
        {
          "line": 1174,
          "old_api": null,
          "new_api": "serverAssertWithInfo",
          "old_text": null,
          "new_text": "serverAssertWithInfo(c,NULL,c->querybuf[0] == '*')",
          "old_line_content": "         * so go ahead and find out the multi bulk length. */",
          "new_line_content": "        serverAssertWithInfo(c,NULL,c->querybuf[0] == '*');",
          "content_same": false
        },
        {
          "line": 1687,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,c->name)",
          "old_line_content": "        if (c->name)",
          "new_line_content": "            addReplyBulk(c,c->name);",
          "content_same": false
        },
        {
          "line": 1177,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"Protocol error: invalid multibulk length\")",
          "old_line_content": "        if (!ok || ll > 1024*1024) {",
          "new_line_content": "            addReplyError(c,\"Protocol error: invalid multibulk length\");",
          "content_same": false
        },
        {
          "line": 666,
          "old_api": null,
          "new_api": "freeClient",
          "old_text": null,
          "new_text": "freeClient(c)",
          "old_line_content": "            server.stat_rejected_conn++;",
          "new_line_content": "            freeClient(c);",
          "content_same": false
        },
        {
          "line": 1689,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "        else",
          "new_line_content": "            addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 1693,
          "old_api": null,
          "new_api": "getTimeoutFromObjectOrReply",
          "old_text": null,
          "new_text": "getTimeoutFromObjectOrReply(c,c->argv[2],&duration,UNIT_MILLISECONDS)",
          "old_line_content": "",
          "new_line_content": "        if (getTimeoutFromObjectOrReply(c,c->argv[2],&duration,UNIT_MILLISECONDS)",
          "content_same": false
        },
        {
          "line": 1695,
          "old_api": null,
          "new_api": "pauseClients",
          "old_text": null,
          "new_text": "pauseClients(duration)",
          "old_line_content": "                                        != C_OK) return;",
          "new_line_content": "        pauseClients(duration);",
          "content_same": false
        },
        {
          "line": 1184,
          "old_api": null,
          "new_api": "sdsrange",
          "old_text": null,
          "new_text": "sdsrange(c->querybuf,pos,-1)",
          "old_line_content": "        if (ll <= 0) {",
          "new_line_content": "            sdsrange(c->querybuf,pos,-1);",
          "content_same": false
        },
        {
          "line": 1698,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, \"Syntax error, try CLIENT (LIST | KILL | GETNAME | SETNAME | PAUSE | REPLY)\")",
          "old_line_content": "    } else {",
          "new_line_content": "        addReplyError(c, \"Syntax error, try CLIENT (LIST | KILL | GETNAME | SETNAME | PAUSE | REPLY)\");",
          "content_same": false
        },
        {
          "line": 678,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(el)",
          "old_line_content": "    char cip[NET_IP_STR_LEN];",
          "new_line_content": "    UNUSED(el);",
          "content_same": false
        },
        {
          "line": 1191,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(c->argv)",
          "old_line_content": "        /* Setup argv array on client structure */",
          "new_line_content": "        if (c->argv) zfree(c->argv);",
          "content_same": false
        },
        {
          "line": 683,
          "old_api": null,
          "new_api": "anetTcpAccept",
          "old_text": null,
          "new_text": "anetTcpAccept(server.neterr, fd, cip, sizeof(cip), &cport)",
          "old_line_content": "    while(max--) {",
          "new_line_content": "        cfd = anetTcpAccept(server.neterr, fd, cip, sizeof(cip), &cport);",
          "content_same": false
        },
        {
          "line": 1195,
          "old_api": null,
          "new_api": "serverAssertWithInfo",
          "old_text": null,
          "new_text": "serverAssertWithInfo(c,NULL,c->multibulklen > 0)",
          "old_line_content": "",
          "new_line_content": "    serverAssertWithInfo(c,NULL,c->multibulklen > 0);",
          "content_same": false
        },
        {
          "line": 686,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n                    \"Accepting client connection: %s\", server.neterr)",
          "old_line_content": "            if (errno != EWOULDBLOCK)",
          "new_line_content": "                serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 1199,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(c->querybuf+pos,'\\r')",
          "old_line_content": "        if (c->bulklen == -1) {",
          "new_line_content": "            newline = strchr(c->querybuf+pos,'\\r');",
          "content_same": false
        },
        {
          "line": 1201,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "            if (newline == NULL) {",
          "new_line_content": "                if (sdslen(c->querybuf) > PROTO_INLINE_MAX_SIZE) {",
          "content_same": false
        },
        {
          "line": 690,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_VERBOSE,\"Accepted %s:%d\", cip, cport)",
          "old_line_content": "        }",
          "new_line_content": "        serverLog(LL_VERBOSE,\"Accepted %s:%d\", cip, cport);",
          "content_same": false
        },
        {
          "line": 1713,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    static time_t logged_time;",
          "new_line_content": "    time_t now = time(NULL);",
          "content_same": false
        },
        {
          "line": 1204,
          "old_api": null,
          "new_api": "setProtocolError",
          "old_text": null,
          "new_text": "setProtocolError(\"too big bulk count string\",c,0)",
          "old_line_content": "                        \"Protocol error: too big bulk count string\");",
          "new_line_content": "                    setProtocolError(\"too big bulk count string\",c,0);",
          "content_same": false
        },
        {
          "line": 1715,
          "old_api": null,
          "new_api": "labs",
          "old_text": null,
          "new_text": "labs(now-logged_time)",
          "old_line_content": "",
          "new_line_content": "    if (labs(now-logged_time) > 60) {",
          "content_same": false
        },
        {
          "line": 1719,
          "old_api": null,
          "new_api": "freeClientAsync",
          "old_text": null,
          "new_text": "freeClientAsync(c)",
          "old_line_content": "    }",
          "new_line_content": "    freeClientAsync(c);",
          "content_same": false
        },
        {
          "line": 697,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(el)",
          "old_line_content": "    int cfd, max = MAX_ACCEPTS_PER_CALL;",
          "new_line_content": "    UNUSED(el);",
          "content_same": false
        },
        {
          "line": 1211,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "            /* Buffer should also contain \\n */",
          "new_line_content": "            if (newline-(c->querybuf) > ((signed)sdslen(c->querybuf)-2))",
          "content_same": false
        },
        {
          "line": 702,
          "old_api": null,
          "new_api": "anetUnixAccept",
          "old_text": null,
          "new_text": "anetUnixAccept(server.neterr, fd)",
          "old_line_content": "    while(max--) {",
          "new_line_content": "        cfd = anetUnixAccept(server.neterr, fd);",
          "content_same": false
        },
        {
          "line": 1215,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(c,\n                    \"Protocol error: expected '$', got '%c'\",\n                    c->querybuf[pos])",
          "old_line_content": "            if (c->querybuf[pos] != '$') {",
          "new_line_content": "                addReplyErrorFormat(c,",
          "content_same": false
        },
        {
          "line": 705,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n                    \"Accepting client connection: %s\", server.neterr)",
          "old_line_content": "            if (errno != EWOULDBLOCK)",
          "new_line_content": "                serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 1218,
          "old_api": null,
          "new_api": "setProtocolError",
          "old_text": null,
          "new_text": "setProtocolError(\"expected $ but got something else\",c,pos)",
          "old_line_content": "                    c->querybuf[pos]);",
          "new_line_content": "                setProtocolError(\"expected $ but got something else\",c,pos);",
          "content_same": false
        },
        {
          "line": 1730,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(robj*)*argc)",
          "old_line_content": "",
          "new_line_content": "    argv = zmalloc(sizeof(robj*)*argc);",
          "content_same": false
        },
        {
          "line": 709,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_VERBOSE,\"Accepted connection to %s\", server.unixsocket)",
          "old_line_content": "        }",
          "new_line_content": "        serverLog(LL_VERBOSE,\"Accepted connection to %s\", server.unixsocket);",
          "content_same": false
        },
        {
          "line": 1222,
          "old_api": null,
          "new_api": "string2ll",
          "old_text": null,
          "new_text": "string2ll(c->querybuf+pos+1,newline-(c->querybuf+pos+1),&ll)",
          "old_line_content": "",
          "new_line_content": "            ok = string2ll(c->querybuf+pos+1,newline-(c->querybuf+pos+1),&ll);",
          "content_same": false
        },
        {
          "line": 1735,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap, robj*)",
          "old_line_content": "",
          "new_line_content": "        a = va_arg(ap, robj*);",
          "content_same": false
        },
        {
          "line": 1224,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"Protocol error: invalid bulk length\")",
          "old_line_content": "            if (!ok || ll < 0 || ll > 512*1024*1024) {",
          "new_line_content": "                addReplyError(c,\"Protocol error: invalid bulk length\");",
          "content_same": false
        },
        {
          "line": 1737,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(a)",
          "old_line_content": "        argv[j] = a;",
          "new_line_content": "        incrRefCount(a);",
          "content_same": false
        },
        {
          "line": 717,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(c->argv[j])",
          "old_line_content": "    for (j = 0; j < c->argc; j++)",
          "new_line_content": "        decrRefCount(c->argv[j]);",
          "content_same": false
        },
        {
          "line": 1742,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(c->argv[j])",
          "old_line_content": "     * refcount gets incremented before it gets decremented. */",
          "new_line_content": "    for (j = 0; j < c->argc; j++) decrRefCount(c->argv[j]);",
          "content_same": false
        },
        {
          "line": 1747,
          "old_api": null,
          "new_api": "lookupCommandOrOriginal",
          "old_text": null,
          "new_text": "lookupCommandOrOriginal(c->argv[0]->ptr)",
          "old_line_content": "    c->argc = argc;",
          "new_line_content": "    c->cmd = lookupCommandOrOriginal(c->argv[0]->ptr);",
          "content_same": false
        },
        {
          "line": 1237,
          "old_api": null,
          "new_api": "sdsrange",
          "old_text": null,
          "new_text": "sdsrange(c->querybuf,pos,-1)",
          "old_line_content": "                 * avoiding a large copy of data. */",
          "new_line_content": "                sdsrange(c->querybuf,pos,-1);",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.slaves)",
          "old_line_content": "void disconnectSlaves(void) {",
          "new_line_content": "    while (listLength(server.slaves)) {",
          "content_same": false
        },
        {
          "line": 1239,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "                pos = 0;",
          "new_line_content": "                qblen = sdslen(c->querybuf);",
          "content_same": false
        },
        {
          "line": 1754,
          "old_api": null,
          "new_api": "freeClientArgv",
          "old_text": null,
          "new_text": "freeClientArgv(c)",
          "old_line_content": "void replaceClientCommandVector(client *c, int argc, robj **argv) {",
          "new_line_content": "    freeClientArgv(c);",
          "content_same": false
        },
        {
          "line": 1243,
          "old_api": null,
          "new_api": "sdsMakeRoomFor",
          "old_text": null,
          "new_text": "sdsMakeRoomFor(c->querybuf,ll+2-qblen)",
          "old_line_content": "                if (qblen < (size_t)ll+2)",
          "new_line_content": "                    c->querybuf = sdsMakeRoomFor(c->querybuf,ll+2-qblen);",
          "content_same": false
        },
        {
          "line": 1758,
          "old_api": null,
          "new_api": "lookupCommandOrOriginal",
          "old_text": null,
          "new_text": "lookupCommandOrOriginal(c->argv[0]->ptr)",
          "old_line_content": "    c->argc = argc;",
          "new_line_content": "    c->cmd = lookupCommandOrOriginal(c->argv[0]->ptr);",
          "content_same": false
        },
        {
          "line": 1249,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "        /* Read bulk argument */",
          "new_line_content": "        if (sdslen(c->querybuf)-pos < (unsigned)(c->bulklen+2)) {",
          "content_same": false
        },
        {
          "line": 746,
          "old_api": null,
          "new_api": "listSearchKey",
          "old_text": null,
          "new_text": "listSearchKey(server.clients,c)",
          "old_line_content": "        /* Remove from the list of active clients. */",
          "new_line_content": "        ln = listSearchKey(server.clients,c);",
          "content_same": false
        },
        {
          "line": 1258,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "                c->bulklen >= PROTO_MBULK_BIG_ARG &&",
          "new_line_content": "                (signed) sdslen(c->querybuf) == c->bulklen+2)",
          "content_same": false
        },
        {
          "line": 1260,
          "old_api": null,
          "new_api": "createObject",
          "old_text": null,
          "new_text": "createObject(OBJ_STRING,c->querybuf)",
          "old_line_content": "            {",
          "new_line_content": "                c->argv[c->argc++] = createObject(OBJ_STRING,c->querybuf);",
          "content_same": false
        },
        {
          "line": 751,
          "old_api": null,
          "new_api": "aeDeleteFileEvent",
          "old_text": null,
          "new_text": "aeDeleteFileEvent(server.el,c->fd,AE_READABLE)",
          "old_line_content": "        /* Unregister async I/O handlers and close the socket. */",
          "new_line_content": "        aeDeleteFileEvent(server.el,c->fd,AE_READABLE);",
          "content_same": false
        },
        {
          "line": 1264,
          "old_api": null,
          "new_api": "sdsnewlen",
          "old_text": null,
          "new_text": "sdsnewlen(NULL,c->bulklen+2)",
          "old_line_content": "                 * likely... */",
          "new_line_content": "                c->querybuf = sdsnewlen(NULL,c->bulklen+2);",
          "content_same": false
        },
        {
          "line": 1777,
          "old_api": null,
          "new_api": "zrealloc",
          "old_text": null,
          "new_text": "zrealloc(c->argv,sizeof(robj*)*(i+1))",
          "old_line_content": "    if (i >= c->argc) {",
          "new_line_content": "        c->argv = zrealloc(c->argv,sizeof(robj*)*(i+1));",
          "content_same": false
        },
        {
          "line": 1269,
          "old_api": null,
          "new_api": "createStringObject",
          "old_text": null,
          "new_text": "createStringObject(c->querybuf+pos,c->bulklen)",
          "old_line_content": "                c->argv[c->argc++] =",
          "new_line_content": "                    createStringObject(c->querybuf+pos,c->bulklen);",
          "content_same": false
        },
        {
          "line": 759,
          "old_api": null,
          "new_api": "listSearchKey",
          "old_text": null,
          "new_text": "listSearchKey(server.clients_pending_write,c)",
          "old_line_content": "    if (c->flags & CLIENT_PENDING_WRITE) {",
          "new_line_content": "        ln = listSearchKey(server.clients_pending_write,c);",
          "content_same": false
        },
        {
          "line": 1783,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(newval)",
          "old_line_content": "    c->argv[i] = newval;",
          "new_line_content": "    incrRefCount(newval);",
          "content_same": false
        },
        {
          "line": 1788,
          "old_api": null,
          "new_api": "lookupCommandOrOriginal",
          "old_text": null,
          "new_text": "lookupCommandOrOriginal(c->argv[0]->ptr)",
          "old_line_content": "    if (i == 0) {",
          "new_line_content": "        c->cmd = lookupCommandOrOriginal(c->argv[0]->ptr);",
          "content_same": false
        },
        {
          "line": 1278,
          "old_api": null,
          "new_api": "sdsrange",
          "old_text": null,
          "new_text": "sdsrange(c->querybuf,pos,-1)",
          "old_line_content": "    /* Trim to pos */",
          "new_line_content": "    if (pos) sdsrange(c->querybuf,pos,-1);",
          "content_same": false
        },
        {
          "line": 768,
          "old_api": null,
          "new_api": "listSearchKey",
          "old_text": null,
          "new_text": "listSearchKey(server.unblocked_clients,c)",
          "old_line_content": "    if (c->flags & CLIENT_UNBLOCKED) {",
          "new_line_content": "        ln = listSearchKey(server.unblocked_clients,c);",
          "content_same": false
        },
        {
          "line": 1294,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "    /* Keep processing while there is something in the input buffer */",
          "new_line_content": "    while(sdslen(c->querybuf)) {",
          "content_same": false
        },
        {
          "line": 784,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"Connection with master lost.\")",
          "old_line_content": "    if (server.master && c->flags & CLIENT_MASTER) {",
          "new_line_content": "        serverLog(LL_WARNING,\"Connection with master lost.\");",
          "content_same": false
        },
        {
          "line": 1296,
          "old_api": null,
          "new_api": "clientsArePaused",
          "old_text": null,
          "new_text": "clientsArePaused()",
          "old_line_content": "        /* Return if clients are paused. */",
          "new_line_content": "        if (!(c->flags & CLIENT_SLAVE) && clientsArePaused()) break;",
          "content_same": false
        },
        {
          "line": 1811,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(c->reply)",
          "old_line_content": "",
          "new_line_content": "    return c->reply_bytes + (list_item_size*listLength(c->reply));",
          "content_same": false
        },
        {
          "line": 790,
          "old_api": null,
          "new_api": "replicationCacheMaster",
          "old_text": null,
          "new_text": "replicationCacheMaster(c)",
          "old_line_content": "        {",
          "new_line_content": "            replicationCacheMaster(c);",
          "content_same": false
        },
        {
          "line": 797,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"Connection with slave %s lost.\",\n            replicationGetSlaveName(c))",
          "old_line_content": "    if ((c->flags & CLIENT_SLAVE) && !(c->flags & CLIENT_MONITOR)) {",
          "new_line_content": "        serverLog(LL_WARNING,\"Connection with slave %s lost.\",",
          "content_same": false
        },
        {
          "line": 802,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(c->querybuf)",
          "old_line_content": "    /* Free the query buffer */",
          "new_line_content": "    sdsfree(c->querybuf);",
          "content_same": false
        },
        {
          "line": 1318,
          "old_api": null,
          "new_api": "processInlineBuffer",
          "old_text": null,
          "new_text": "processInlineBuffer(c)",
          "old_line_content": "        if (c->reqtype == PROTO_REQ_INLINE) {",
          "new_line_content": "            if (processInlineBuffer(c) != C_OK) break;",
          "content_same": false
        },
        {
          "line": 807,
          "old_api": null,
          "new_api": "unblockClient",
          "old_text": null,
          "new_text": "unblockClient(c)",
          "old_line_content": "    /* Deallocate structures used to block on blocking ops. */",
          "new_line_content": "    if (c->flags & CLIENT_BLOCKED) unblockClient(c);",
          "content_same": false
        },
        {
          "line": 1320,
          "old_api": null,
          "new_api": "processMultibulkBuffer",
          "old_text": null,
          "new_text": "processMultibulkBuffer(c)",
          "old_line_content": "        } else if (c->reqtype == PROTO_REQ_MULTIBULK) {",
          "new_line_content": "            if (processMultibulkBuffer(c) != C_OK) break;",
          "content_same": false
        },
        {
          "line": 1832,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(name,\"normal\")",
          "old_line_content": "int getClientTypeByName(char *name) {",
          "new_line_content": "    if (!strcasecmp(name,\"normal\")) return CLIENT_TYPE_NORMAL;",
          "content_same": false
        },
        {
          "line": 1322,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown request type\")",
          "old_line_content": "        } else {",
          "new_line_content": "            serverPanic(\"Unknown request type\");",
          "content_same": false
        },
        {
          "line": 811,
          "old_api": null,
          "new_api": "unwatchAllKeys",
          "old_text": null,
          "new_text": "unwatchAllKeys(c)",
          "old_line_content": "    /* UNWATCH all the keys */",
          "new_line_content": "    unwatchAllKeys(c);",
          "content_same": false
        },
        {
          "line": 815,
          "old_api": null,
          "new_api": "pubsubUnsubscribeAllChannels",
          "old_text": null,
          "new_text": "pubsubUnsubscribeAllChannels(c,0)",
          "old_line_content": "    /* Unsubscribe from all the pubsub channels */",
          "new_line_content": "    pubsubUnsubscribeAllChannels(c,0);",
          "content_same": false
        },
        {
          "line": 1327,
          "old_api": null,
          "new_api": "resetClient",
          "old_text": null,
          "new_text": "resetClient(c)",
          "old_line_content": "        if (c->argc == 0) {",
          "new_line_content": "            resetClient(c);",
          "content_same": false
        },
        {
          "line": 1330,
          "old_api": null,
          "new_api": "processCommand",
          "old_text": null,
          "new_text": "processCommand(c)",
          "old_line_content": "            /* Only reset the client when the command was executed. */",
          "new_line_content": "            if (processCommand(c) == C_OK) {",
          "content_same": false
        },
        {
          "line": 821,
          "old_api": null,
          "new_api": "listRelease",
          "old_text": null,
          "new_text": "listRelease(c->reply)",
          "old_line_content": "    /* Free data structures. */",
          "new_line_content": "    listRelease(c->reply);",
          "content_same": false
        },
        {
          "line": 1333,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "                    /* Update the applied replication offset of our master. */",
          "new_line_content": "                    c->reploff = c->read_reploff - sdslen(c->querybuf);",
          "content_same": false
        },
        {
          "line": 1335,
          "old_api": null,
          "new_api": "resetClient",
          "old_text": null,
          "new_text": "resetClient(c)",
          "old_line_content": "                }",
          "new_line_content": "                resetClient(c);",
          "content_same": false
        },
        {
          "line": 827,
          "old_api": null,
          "new_api": "unlinkClient",
          "old_text": null,
          "new_text": "unlinkClient(c)",
          "old_line_content": "     * places where active clients may be referenced. */",
          "new_line_content": "    unlinkClient(c);",
          "content_same": false
        },
        {
          "line": 833,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(c->repldbfd)",
          "old_line_content": "        if (c->replstate == SLAVE_STATE_SEND_BULK) {",
          "new_line_content": "            if (c->repldbfd != -1) close(c->repldbfd);",
          "content_same": false
        },
        {
          "line": 1857,
          "old_api": null,
          "new_api": "getClientOutputBufferMemoryUsage",
          "old_text": null,
          "new_text": "getClientOutputBufferMemoryUsage(c)",
          "old_line_content": "    int soft = 0, hard = 0, class;",
          "new_line_content": "    unsigned long used_mem = getClientOutputBufferMemoryUsage(c);",
          "content_same": false
        },
        {
          "line": 837,
          "old_api": null,
          "new_api": "listSearchKey",
          "old_text": null,
          "new_text": "listSearchKey(l,c)",
          "old_line_content": "        list *l = (c->flags & CLIENT_MONITOR) ? server.monitors : server.slaves;",
          "new_line_content": "        ln = listSearchKey(l,c);",
          "content_same": false
        },
        {
          "line": 1349,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(el)",
          "old_line_content": "    size_t qblen;",
          "new_line_content": "    UNUSED(el);",
          "content_same": false
        },
        {
          "line": 1864,
          "old_api": null,
          "new_api": "if (server.client_obuf_limits[class].hard_limit_bytes &&\n        used_mem >= server.client_obuf_limits[class].hard_limit_bytes)",
          "old_text": null,
          "new_text": "if (server.client_obuf_limits[class].hard_limit_bytes &&\n        used_mem >= server.client_obuf_limits[class].hard_limit_bytes)",
          "old_line_content": "",
          "new_line_content": "    if (server.client_obuf_limits[class].hard_limit_bytes &&",
          "content_same": false
        },
        {
          "line": 843,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.slaves)",
          "old_line_content": "         * backlog. */",
          "new_line_content": "        if (c->flags & CLIENT_SLAVE && listLength(server.slaves) == 0)",
          "content_same": false
        },
        {
          "line": 845,
          "old_api": null,
          "new_api": "refreshGoodSlavesCount",
          "old_text": null,
          "new_text": "refreshGoodSlavesCount()",
          "old_line_content": "            server.repl_no_slaves_since = server.unixtime;",
          "new_line_content": "        refreshGoodSlavesCount();",
          "content_same": false
        },
        {
          "line": 850,
          "old_api": null,
          "new_api": "replicationHandleMasterDisconnection",
          "old_text": null,
          "new_text": "replicationHandleMasterDisconnection()",
          "old_line_content": "     * we lost the connection with the master. */",
          "new_line_content": "    if (c->flags & CLIENT_MASTER) replicationHandleMasterDisconnection();",
          "content_same": false
        },
        {
          "line": 1362,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "    {",
          "new_line_content": "        int remaining = (unsigned)(c->bulklen+2)-sdslen(c->querybuf);",
          "content_same": false
        },
        {
          "line": 855,
          "old_api": null,
          "new_api": "listSearchKey",
          "old_text": null,
          "new_text": "listSearchKey(server.clients_to_close,c)",
          "old_line_content": "    if (c->flags & CLIENT_CLOSE_ASAP) {",
          "new_line_content": "        ln = listSearchKey(server.clients_to_close,c);",
          "content_same": false
        },
        {
          "line": 1367,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "",
          "new_line_content": "    qblen = sdslen(c->querybuf);",
          "content_same": false
        },
        {
          "line": 1369,
          "old_api": null,
          "new_api": "sdsMakeRoomFor",
          "old_text": null,
          "new_text": "sdsMakeRoomFor(c->querybuf, readlen)",
          "old_line_content": "    if (c->querybuf_peak < qblen) c->querybuf_peak = qblen;",
          "new_line_content": "    c->querybuf = sdsMakeRoomFor(c->querybuf, readlen);",
          "content_same": false
        },
        {
          "line": 862,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(c->name)",
          "old_line_content": "     * and finally release the client structure itself. */",
          "new_line_content": "    if (c->name) decrRefCount(c->name);",
          "content_same": false
        },
        {
          "line": 1375,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "        } else {",
          "new_line_content": "            serverLog(LL_VERBOSE, \"Reading from client: %s\",strerror(errno));",
          "content_same": false
        },
        {
          "line": 1380,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_VERBOSE, \"Client closed connection\")",
          "old_line_content": "    } else if (nread == 0) {",
          "new_line_content": "        serverLog(LL_VERBOSE, \"Client closed connection\");",
          "content_same": false
        },
        {
          "line": 1387,
          "old_api": null,
          "new_api": "sdscatlen",
          "old_text": null,
          "new_text": "sdscatlen(c->pending_querybuf,\n                                        c->querybuf+qblen,nread)",
          "old_line_content": "         * copy of the string applied by the last command executed. */",
          "new_line_content": "        c->pending_querybuf = sdscatlen(c->pending_querybuf,",
          "content_same": false
        },
        {
          "line": 876,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(server.clients_to_close,c)",
          "old_line_content": "    c->flags |= CLIENT_CLOSE_ASAP;",
          "new_line_content": "    listAddNodeTail(server.clients_to_close,c);",
          "content_same": false
        },
        {
          "line": 1901,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(c->reply_bytes < SIZE_MAX-(1024*64))",
          "old_line_content": "void asyncCloseClientOnOutputBufferLimitReached(client *c) {",
          "new_line_content": "    serverAssert(c->reply_bytes < SIZE_MAX-(1024*64));",
          "content_same": false
        },
        {
          "line": 1391,
          "old_api": null,
          "new_api": "sdsIncrLen",
          "old_text": null,
          "new_text": "sdsIncrLen(c->querybuf,nread)",
          "old_line_content": "",
          "new_line_content": "    sdsIncrLen(c->querybuf,nread);",
          "content_same": false
        },
        {
          "line": 880,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.clients_to_close)",
          "old_line_content": "void freeClientsInAsyncFreeQueue(void) {",
          "new_line_content": "    while (listLength(server.clients_to_close)) {",
          "content_same": false
        },
        {
          "line": 1903,
          "old_api": null,
          "new_api": "checkClientOutputBufferLimits",
          "old_text": null,
          "new_text": "checkClientOutputBufferLimits(c)",
          "old_line_content": "    if (c->reply_bytes == 0 || c->flags & CLIENT_CLOSE_ASAP) return;",
          "new_line_content": "    if (checkClientOutputBufferLimits(c)) {",
          "content_same": false
        },
        {
          "line": 1906,
          "old_api": null,
          "new_api": "freeClientAsync",
          "old_text": null,
          "new_text": "freeClientAsync(c)",
          "old_line_content": "",
          "new_line_content": "        freeClientAsync(c);",
          "content_same": false
        },
        {
          "line": 1395,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "    server.stat_net_input_bytes += nread;",
          "new_line_content": "    if (sdslen(c->querybuf) > server.client_max_querybuf_len) {",
          "content_same": false
        },
        {
          "line": 885,
          "old_api": null,
          "new_api": "freeClient",
          "old_text": null,
          "new_text": "freeClient(c)",
          "old_line_content": "        c->flags &= ~CLIENT_CLOSE_ASAP;",
          "new_line_content": "        freeClient(c);",
          "content_same": false
        },
        {
          "line": 1398,
          "old_api": null,
          "new_api": "sdscatrepr",
          "old_text": null,
          "new_text": "sdscatrepr(bytes,c->querybuf,64)",
          "old_line_content": "",
          "new_line_content": "        bytes = sdscatrepr(bytes,c->querybuf,64);",
          "content_same": false
        },
        {
          "line": 1920,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(server.slaves,&li)",
          "old_line_content": "",
          "new_line_content": "    listRewind(server.slaves,&li);",
          "content_same": false
        },
        {
          "line": 897,
          "old_api": null,
          "new_api": "clientHasPendingReplies",
          "old_text": null,
          "new_text": "clientHasPendingReplies(c)",
          "old_line_content": "",
          "new_line_content": "    while(clientHasPendingReplies(c)) {",
          "content_same": false
        },
        {
          "line": 899,
          "old_api": null,
          "new_api": "write",
          "old_text": null,
          "new_text": "write(fd,c->buf+c->sentlen,c->bufpos-c->sentlen)",
          "old_line_content": "        if (c->bufpos > 0) {",
          "new_line_content": "            nwritten = write(fd,c->buf+c->sentlen,c->bufpos-c->sentlen);",
          "content_same": false
        },
        {
          "line": 1413,
          "old_api": null,
          "new_api": "processInputBuffer",
          "old_text": null,
          "new_text": "processInputBuffer(c)",
          "old_line_content": "    if (!(c->flags & CLIENT_MASTER)) {",
          "new_line_content": "        processInputBuffer(c);",
          "content_same": false
        },
        {
          "line": 1416,
          "old_api": null,
          "new_api": "processInputBuffer",
          "old_text": null,
          "new_text": "processInputBuffer(c)",
          "old_line_content": "        size_t prev_offset = c->reploff;",
          "new_line_content": "        processInputBuffer(c);",
          "content_same": false
        },
        {
          "line": 1419,
          "old_api": null,
          "new_api": "replicationFeedSlavesFromMasterStream",
          "old_text": null,
          "new_text": "replicationFeedSlavesFromMasterStream(server.slaves,\n                    c->pending_querybuf, applied)",
          "old_line_content": "        if (applied) {",
          "new_line_content": "            replicationFeedSlavesFromMasterStream(server.slaves,",
          "content_same": false
        },
        {
          "line": 1931,
          "old_api": null,
          "new_api": "aeGetFileEvents",
          "old_text": null,
          "new_text": "aeGetFileEvents(server.el,slave->fd)",
          "old_line_content": "         * writes before the first ACK. */",
          "new_line_content": "        events = aeGetFileEvents(server.el,slave->fd);",
          "content_same": false
        },
        {
          "line": 1421,
          "old_api": null,
          "new_api": "sdsrange",
          "old_text": null,
          "new_text": "sdsrange(c->pending_querybuf,applied,-1)",
          "old_line_content": "                    c->pending_querybuf, applied);",
          "new_line_content": "            sdsrange(c->pending_querybuf,applied,-1);",
          "content_same": false
        },
        {
          "line": 1934,
          "old_api": null,
          "new_api": "clientHasPendingReplies",
          "old_text": null,
          "new_text": "clientHasPendingReplies(slave)",
          "old_line_content": "            slave->replstate == SLAVE_STATE_ONLINE &&",
          "new_line_content": "            clientHasPendingReplies(slave))",
          "content_same": false
        },
        {
          "line": 911,
          "old_api": null,
          "new_api": "listFirst",
          "old_text": null,
          "new_text": "listFirst(c->reply)",
          "old_line_content": "        } else {",
          "new_line_content": "            o = listNodeValue(listFirst(c->reply));",
          "content_same": false
        },
        {
          "line": 1936,
          "old_api": null,
          "new_api": "writeToClient",
          "old_text": null,
          "new_text": "writeToClient(slave->fd,slave,0)",
          "old_line_content": "        {",
          "new_line_content": "            writeToClient(slave->fd,slave,0);",
          "content_same": false
        },
        {
          "line": 915,
          "old_api": null,
          "new_api": "listFirst",
          "old_text": null,
          "new_text": "listFirst(c->reply)",
          "old_line_content": "            if (objlen == 0) {",
          "new_line_content": "                listDelNode(c->reply,listFirst(c->reply));",
          "content_same": false
        },
        {
          "line": 919,
          "old_api": null,
          "new_api": "write",
          "old_text": null,
          "new_text": "write(fd, o + c->sentlen, objlen - c->sentlen)",
          "old_line_content": "",
          "new_line_content": "            nwritten = write(fd, o + c->sentlen, objlen - c->sentlen);",
          "content_same": false
        },
        {
          "line": 1433,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(server.clients,&li)",
          "old_line_content": "",
          "new_line_content": "    listRewind(server.clients,&li);",
          "content_same": false
        },
        {
          "line": 1437,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(c->reply)",
          "old_line_content": "",
          "new_line_content": "        if (listLength(c->reply) > lol) lol = listLength(c->reply);",
          "content_same": false
        },
        {
          "line": 926,
          "old_api": null,
          "new_api": "listFirst",
          "old_text": null,
          "new_text": "listFirst(c->reply)",
          "old_line_content": "            if (c->sentlen == objlen) {",
          "new_line_content": "                listDelNode(c->reply,listFirst(c->reply));",
          "content_same": false
        },
        {
          "line": 931,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(c->reply)",
          "old_line_content": "                 * the count of reply bytes to be exactly zero. */",
          "new_line_content": "                if (listLength(c->reply) == 0)",
          "content_same": false
        },
        {
          "line": 945,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "            (server.maxmemory == 0 ||",
          "new_line_content": "             zmalloc_used_memory() < server.maxmemory)) break;",
          "content_same": false
        },
        {
          "line": 1459,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(peerid,peerid_len,\"%s:0\",server.unixsocket)",
          "old_line_content": "        /* Unix socket client. */",
          "new_line_content": "        snprintf(peerid,peerid_len,\"%s:0\",server.unixsocket);",
          "content_same": false
        },
        {
          "line": 1462,
          "old_api": null,
          "new_api": "anetFormatPeer",
          "old_text": null,
          "new_text": "anetFormatPeer(client->fd,peerid,peerid_len)",
          "old_line_content": "        /* TCP client. */",
          "new_line_content": "        anetFormatPeer(client->fd,peerid,peerid_len);",
          "content_same": false
        },
        {
          "line": 952,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_VERBOSE,\n                \"Error writing to client: %s\", strerror(errno))",
          "old_line_content": "        } else {",
          "new_line_content": "            serverLog(LL_VERBOSE,",
          "content_same": false
        },
        {
          "line": 1978,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(server.clients,&li)",
          "old_line_content": "         * force the re-processing of the input buffer if any. */",
          "new_line_content": "        listRewind(server.clients,&li);",
          "content_same": false
        },
        {
          "line": 1474,
          "old_api": null,
          "new_api": "genClientPeerId",
          "old_text": null,
          "new_text": "genClientPeerId(c,peerid,sizeof(peerid))",
          "old_line_content": "    if (c->peerid == NULL) {",
          "new_line_content": "        genClientPeerId(c,peerid,sizeof(peerid));",
          "content_same": false
        },
        {
          "line": 1986,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(server.unblocked_clients,c)",
          "old_line_content": "            c->flags |= CLIENT_UNBLOCKED;",
          "new_line_content": "            listAddNodeTail(server.unblocked_clients,c);",
          "content_same": false
        },
        {
          "line": 965,
          "old_api": null,
          "new_api": "clientHasPendingReplies",
          "old_text": null,
          "new_text": "clientHasPendingReplies(c)",
          "old_line_content": "    }",
          "new_line_content": "    if (!clientHasPendingReplies(c)) {",
          "content_same": false
        },
        {
          "line": 967,
          "old_api": null,
          "new_api": "aeDeleteFileEvent",
          "old_text": null,
          "new_text": "aeDeleteFileEvent(server.el,c->fd,AE_WRITABLE)",
          "old_line_content": "        c->sentlen = 0;",
          "new_line_content": "        if (handler_installed) aeDeleteFileEvent(server.el,c->fd,AE_WRITABLE);",
          "content_same": false
        },
        {
          "line": 971,
          "old_api": null,
          "new_api": "freeClient",
          "old_text": null,
          "new_text": "freeClient(c)",
          "old_line_content": "        if (c->flags & CLIENT_CLOSE_AFTER_REPLY) {",
          "new_line_content": "            freeClient(c);",
          "content_same": false
        },
        {
          "line": 980,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(el)",
          "old_line_content": "void sendReplyToClient(aeEventLoop *el, int fd, void *privdata, int mask) {",
          "new_line_content": "    UNUSED(el);",
          "content_same": false
        },
        {
          "line": 2009,
          "old_api": null,
          "new_api": "aeProcessEvents",
          "old_text": null,
          "new_text": "aeProcessEvents(server.el, AE_FILE_EVENTS|AE_DONT_WAIT)",
          "old_line_content": "        int events = 0;",
          "new_line_content": "        events += aeProcessEvents(server.el, AE_FILE_EVENTS|AE_DONT_WAIT);",
          "content_same": false
        },
        {
          "line": 992,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.clients_pending_write)",
          "old_line_content": "    listNode *ln;",
          "new_line_content": "    int processed = listLength(server.clients_pending_write);",
          "content_same": false
        },
        {
          "line": 1505,
          "old_api": null,
          "new_api": "aeGetFileEvents",
          "old_text": null,
          "new_text": "aeGetFileEvents(server.el,client->fd)",
          "old_line_content": "",
          "new_line_content": "    emask = client->fd == -1 ? 0 : aeGetFileEvents(server.el,client->fd);",
          "content_same": false
        },
        {
          "line": 994,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(server.clients_pending_write,&li)",
          "old_line_content": "",
          "new_line_content": "    listRewind(server.clients_pending_write,&li);",
          "content_same": false
        },
        {
          "line": 998,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(server.clients_pending_write,ln)",
          "old_line_content": "        c->flags &= ~CLIENT_PENDING_WRITE;",
          "new_line_content": "        listDelNode(server.clients_pending_write,ln);",
          "content_same": false
        },
        {
          "line": 1510,
          "old_api": null,
          "new_api": "sdscatfmt",
          "old_text": null,
          "new_text": "sdscatfmt(s,\n        \"id=%U addr=%s fd=%i name=%s age=%I idle=%I flags=%s db=%i sub=%i psub=%i multi=%i qbuf=%U qbuf-free=%U obl=%U oll=%U omem=%U events=%s cmd=%s\",\n        (unsigned long long) client->id,\n        getClientPeerId(client),\n        client->fd,\n        client->name ? (char*)client->name->ptr : \"\",\n        (long long)(server.unixtime - client->ctime),\n        (long long)(server.unixtime - client->lastinteraction),\n        flags,\n        client->db->id,\n        (int) dictSize(client->pubsub_channels),\n        (int) listLength(client->pubsub_patterns),\n        (client->flags & CLIENT_MULTI) ? client->mstate.count : -1,\n        (unsigned long long) sdslen(client->querybuf),\n        (unsigned long long) sdsavail(client->querybuf),\n        (unsigned long long) client->bufpos,\n        (unsigned long long) listLength(client->reply),\n        (unsigned long long) getClientOutputBufferMemoryUsage(client),\n        events,\n        client->lastcmd ? client->lastcmd->name : \"NULL\")",
          "old_line_content": "    *p = '\\0';",
          "new_line_content": "    return sdscatfmt(s,",
          "content_same": false
        },
        {
          "line": 1001,
          "old_api": null,
          "new_api": "writeToClient",
          "old_text": null,
          "new_text": "writeToClient(c->fd,c,0)",
          "old_line_content": "        /* Try to write buffers to the client socket. */",
          "new_line_content": "        if (writeToClient(c->fd,c,0) == C_ERR) continue;",
          "content_same": false
        },
        {
          "line": 1513,
          "old_api": null,
          "new_api": "getClientPeerId",
          "old_text": null,
          "new_text": "getClientPeerId(client)",
          "old_line_content": "        (unsigned long long) client->id,",
          "new_line_content": "        getClientPeerId(client),",
          "content_same": false
        },
        {
          "line": 1005,
          "old_api": null,
          "new_api": "clientHasPendingReplies",
          "old_text": null,
          "new_text": "clientHasPendingReplies(c)",
          "old_line_content": "         * the write handler. */",
          "new_line_content": "        if (clientHasPendingReplies(c) &&",
          "content_same": false
        },
        {
          "line": 1520,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(client->pubsub_channels)",
          "old_line_content": "        client->db->id,",
          "new_line_content": "        (int) dictSize(client->pubsub_channels),",
          "content_same": false
        },
        {
          "line": 1009,
          "old_api": null,
          "new_api": "freeClientAsync",
          "old_text": null,
          "new_text": "freeClientAsync(c)",
          "old_line_content": "        {",
          "new_line_content": "            freeClientAsync(c);",
          "content_same": false
        },
        {
          "line": 1523,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(client->querybuf)",
          "old_line_content": "        (client->flags & CLIENT_MULTI) ? client->mstate.count : -1,",
          "new_line_content": "        (unsigned long long) sdslen(client->querybuf),",
          "content_same": false
        },
        {
          "line": 1526,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(client->reply)",
          "old_line_content": "        (unsigned long long) client->bufpos,",
          "new_line_content": "        (unsigned long long) listLength(client->reply),",
          "content_same": false
        },
        {
          "line": 1019,
          "old_api": null,
          "new_api": "freeClientArgv",
          "old_text": null,
          "new_text": "freeClientArgv(c)",
          "old_line_content": "",
          "new_line_content": "    freeClientArgv(c);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1543,
          "old_api": "sdscatlen",
          "new_api": null,
          "old_text": "sdscatlen(o,\"\\n\",1)",
          "new_text": null,
          "old_line_content": "        o = sdscatlen(o,\"\\n\",1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1553,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr,\"list\")",
          "new_text": null,
          "old_line_content": "    if (!strcasecmp(c->argv[1]->ptr,\"list\") && c->argc == 2) {",
          "new_line_content": "        /* CLIENT LIST */",
          "content_same": false
        },
        {
          "line": 1558,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr,\"reply\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"reply\") && c->argc == 3) {",
          "new_line_content": "        /* CLIENT REPLY ON|OFF|SKIP */",
          "content_same": false
        },
        {
          "line": 1560,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[2]->ptr,\"on\")",
          "new_text": null,
          "old_line_content": "        if (!strcasecmp(c->argv[2]->ptr,\"on\")) {",
          "new_line_content": "            c->flags &= ~(CLIENT_REPLY_SKIP|CLIENT_REPLY_OFF);",
          "content_same": false
        },
        {
          "line": 1563,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[2]->ptr,\"off\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(c->argv[2]->ptr,\"off\")) {",
          "new_line_content": "            c->flags |= CLIENT_REPLY_OFF;",
          "content_same": false
        },
        {
          "line": 1565,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[2]->ptr,\"skip\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(c->argv[2]->ptr,\"skip\")) {",
          "new_line_content": "            if (!(c->flags & CLIENT_REPLY_OFF))",
          "content_same": false
        },
        {
          "line": 1054,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(c->querybuf,'\\n')",
          "new_text": null,
          "old_line_content": "    newline = strchr(c->querybuf,'\\n');",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1569,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.syntaxerr);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 1060,
          "old_api": "setProtocolError",
          "new_api": null,
          "old_text": "setProtocolError(\"too big inline request\",c,0)",
          "new_text": null,
          "old_line_content": "            setProtocolError(\"too big inline request\",c,0);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1572,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr,\"kill\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"kill\")) {",
          "new_line_content": "        /* CLIENT KILL <ip:port>",
          "content_same": false
        },
        {
          "line": 1073,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(aux)",
          "new_text": null,
          "old_line_content": "    sdsfree(aux);",
          "new_line_content": "    if (argv == NULL) {",
          "content_same": false
        },
        {
          "line": 1076,
          "old_api": "setProtocolError",
          "new_api": null,
          "old_text": "setProtocolError(\"unbalanced quotes in inline request\",c,0)",
          "new_text": null,
          "old_line_content": "        setProtocolError(\"unbalanced quotes in inline request\",c,0);",
          "new_line_content": "        return C_ERR;",
          "content_same": false
        },
        {
          "line": 567,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.crlf)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.crlf);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1592,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[i]->ptr,\"id\")",
          "new_text": null,
          "old_line_content": "                if (!strcasecmp(c->argv[i]->ptr,\"id\") && moreargs) {",
          "new_line_content": "                    long long tmp;",
          "content_same": false
        },
        {
          "line": 1595,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c,c->argv[i+1],&tmp,NULL)",
          "new_text": null,
          "old_line_content": "                    if (getLongLongFromObjectOrReply(c,c->argv[i+1],&tmp,NULL)",
          "new_line_content": "                        != C_OK) return;",
          "content_same": false
        },
        {
          "line": 573,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.nullbulk);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 575,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(s)",
          "new_text": null,
          "old_line_content": "        addReplyBulkCBuffer(c,s,strlen(s));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1087,
          "old_api": "sdsrange",
          "new_api": null,
          "old_text": "sdsrange(c->querybuf,querylen+2,-1)",
          "new_text": null,
          "old_line_content": "    sdsrange(c->querybuf,querylen+2,-1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1599,
          "old_api": "getClientTypeByName",
          "new_api": null,
          "old_text": "getClientTypeByName(c->argv[i+1]->ptr)",
          "new_text": null,
          "old_line_content": "                    type = getClientTypeByName(c->argv[i+1]->ptr);",
          "new_line_content": "                    if (type == -1) {",
          "content_same": false
        },
        {
          "line": 1601,
          "old_api": "addReplyErrorFormat",
          "new_api": null,
          "old_text": "addReplyErrorFormat(c,\"Unknown client type '%s'\",\n                            (char*) c->argv[i+1]->ptr)",
          "new_text": null,
          "old_line_content": "                        addReplyErrorFormat(c,\"Unknown client type '%s'\",",
          "new_line_content": "                            (char*) c->argv[i+1]->ptr);",
          "content_same": false
        },
        {
          "line": 1092,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(robj*)*argc)",
          "new_text": null,
          "old_line_content": "        c->argv = zmalloc(sizeof(robj*)*argc);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1605,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[i]->ptr,\"addr\")",
          "new_text": null,
          "old_line_content": "                } else if (!strcasecmp(c->argv[i]->ptr,\"addr\") && moreargs) {",
          "new_line_content": "                    addr = c->argv[i+1]->ptr;",
          "content_same": false
        },
        {
          "line": 1608,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[i+1]->ptr,\"yes\")",
          "new_text": null,
          "old_line_content": "                    if (!strcasecmp(c->argv[i+1]->ptr,\"yes\")) {",
          "new_line_content": "                        skipme = 1;",
          "content_same": false
        },
        {
          "line": 585,
          "old_api": "addReplyBulkCBuffer",
          "new_api": null,
          "old_text": "addReplyBulkCBuffer(c,buf,len)",
          "new_text": null,
          "old_line_content": "    addReplyBulkCBuffer(c,buf,len);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1098,
          "old_api": "createObject",
          "new_api": null,
          "old_text": "createObject(OBJ_STRING,argv[j])",
          "new_text": null,
          "old_line_content": "            c->argv[c->argc] = createObject(OBJ_STRING,argv[j]);",
          "new_line_content": "            c->argc++;",
          "content_same": false
        },
        {
          "line": 1610,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[i+1]->ptr,\"no\")",
          "new_text": null,
          "old_line_content": "                    } else if (!strcasecmp(c->argv[i+1]->ptr,\"no\")) {",
          "new_line_content": "                        skipme = 0;",
          "content_same": false
        },
        {
          "line": 1101,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(argv[j])",
          "new_text": null,
          "old_line_content": "            sdsfree(argv[j]);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1613,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "                        addReply(c,shared.syntaxerr);",
          "new_line_content": "                        return;",
          "content_same": false
        },
        {
          "line": 1104,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(argv)",
          "new_text": null,
          "old_line_content": "    zfree(argv);",
          "new_line_content": "    return C_OK;",
          "content_same": false
        },
        {
          "line": 1617,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "                    addReply(c,shared.syntaxerr);",
          "new_line_content": "                    return;",
          "content_same": false
        },
        {
          "line": 594,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(dst->buf,src->buf,src->bufpos)",
          "new_text": null,
          "old_line_content": "    memcpy(dst->buf,src->buf,src->bufpos);",
          "new_line_content": "    dst->bufpos = src->bufpos;",
          "content_same": false
        },
        {
          "line": 1623,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.syntaxerr);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 1113,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        sds client = catClientInfoString(sdsempty(),c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 602,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(c->reply)",
          "new_text": null,
          "old_line_content": "    return c->bufpos || listLength(c->reply);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1118,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(buf,sizeof(buf),\"Query buffer during protocol error: '%s'\", c->querybuf)",
          "new_text": null,
          "old_line_content": "            snprintf(buf,sizeof(buf),\"Query buffer during protocol error: '%s'\", c->querybuf);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1120,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->querybuf)",
          "new_text": null,
          "old_line_content": "            snprintf(buf,sizeof(buf),\"Query buffer during protocol error: '%.*s' (... more %zu bytes ...) '%.*s'\", PROTO_DUMP_LEN/2, c->querybuf, sdslen(c->querybuf)-PROTO_DUMP_LEN, PROTO_DUMP_LEN/2, c->querybuf+sdslen(c->querybuf)-PROTO_DUMP_LEN/2);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 609,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n            \"Error registering fd event for the new client: %s (fd=%d)\",\n            strerror(errno),fd)",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,",
          "new_line_content": "            \"Error registering fd event for the new client: %s (fd=%d)\",",
          "content_same": false
        },
        {
          "line": 1632,
          "old_api": "getClientType",
          "new_api": null,
          "old_text": "getClientType(client)",
          "new_text": null,
          "old_line_content": "            if (type != -1 && getClientType(client) != type) continue;",
          "new_line_content": "            if (id != 0 && client->id != id) continue;",
          "content_same": false
        },
        {
          "line": 612,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd)",
          "new_text": null,
          "old_line_content": "        close(fd); /* May be already closed, just ignore errors */",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 1126,
          "old_api": "isprint",
          "new_api": null,
          "old_text": "isprint(*p)",
          "new_text": null,
          "old_line_content": "            if (!isprint(*p)) *p = '.';",
          "new_line_content": "            p++;",
          "content_same": false
        },
        {
          "line": 1640,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(client)",
          "new_text": null,
          "old_line_content": "                freeClient(client);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 619,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.clients)",
          "new_text": null,
          "old_line_content": "    if (listLength(server.clients) > server.maxclients) {",
          "new_line_content": "        char *err = \"-ERR max number of clients reached\\r\\n\";",
          "content_same": false
        },
        {
          "line": 1131,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_VERBOSE,\n            \"Protocol error (%s) from client: %s. %s\", errstr, client, buf)",
          "new_text": null,
          "old_line_content": "        serverLog(LL_VERBOSE,",
          "new_line_content": "            \"Protocol error (%s) from client: %s. %s\", errstr, client, buf);",
          "content_same": false
        },
        {
          "line": 1133,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(client)",
          "new_text": null,
          "old_line_content": "        sdsfree(client);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 623,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(err)",
          "new_text": null,
          "old_line_content": "        if (write(c->fd,err,strlen(err)) == -1) {",
          "new_line_content": "            /* Nothing to do, Just to avoid the warning... */",
          "content_same": false
        },
        {
          "line": 1136,
          "old_api": "sdsrange",
          "new_api": null,
          "old_text": "sdsrange(c->querybuf,pos,-1)",
          "new_text": null,
          "old_line_content": "    sdsrange(c->querybuf,pos,-1);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1648,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"No such client\")",
          "new_text": null,
          "old_line_content": "                addReplyError(c,\"No such client\");",
          "new_line_content": "            else",
          "content_same": false
        },
        {
          "line": 1650,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "                addReply(c,shared.ok);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 627,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(c)",
          "new_text": null,
          "old_line_content": "        freeClient(c);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 1652,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c,killed)",
          "new_text": null,
          "old_line_content": "            addReplyLongLong(c,killed);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1659,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "        int j, len = sdslen(c->argv[2]->ptr);",
          "new_line_content": "        char *p = c->argv[2]->ptr;",
          "content_same": false
        },
        {
          "line": 641,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(ip,\"::1\")",
          "new_text": null,
          "old_line_content": "        if (strcmp(ip,\"127.0.0.1\") && strcmp(ip,\"::1\")) {",
          "new_line_content": "            char *err =",
          "content_same": false
        },
        {
          "line": 1665,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(c->name)",
          "new_text": null,
          "old_line_content": "            if (c->name) decrRefCount(c->name);",
          "new_line_content": "            c->name = NULL;",
          "content_same": false
        },
        {
          "line": 1667,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.ok);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 1157,
          "old_api": "serverAssertWithInfo",
          "new_api": null,
          "old_text": "serverAssertWithInfo(c,NULL,c->argc == 0)",
          "new_text": null,
          "old_line_content": "        serverAssertWithInfo(c,NULL,c->argc == 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1160,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(c->querybuf,'\\r')",
          "new_text": null,
          "old_line_content": "        newline = strchr(c->querybuf,'\\r');",
          "new_line_content": "        if (newline == NULL) {",
          "content_same": false
        },
        {
          "line": 1164,
          "old_api": "setProtocolError",
          "new_api": null,
          "old_text": "setProtocolError(\"too big mbulk count string\",c,0)",
          "new_text": null,
          "old_line_content": "                setProtocolError(\"too big mbulk count string\",c,0);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1676,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\n                    \"Client names cannot contain spaces, \"\n                    \"newlines or special characters.\")",
          "new_text": null,
          "old_line_content": "                addReplyError(c,",
          "new_line_content": "                    \"Client names cannot contain spaces, \"",
          "content_same": false
        },
        {
          "line": 1170,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->querybuf)",
          "new_text": null,
          "old_line_content": "        if (newline-(c->querybuf) > ((signed)sdslen(c->querybuf)-2))",
          "new_line_content": "            return C_ERR;",
          "content_same": false
        },
        {
          "line": 1682,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(c->name)",
          "new_text": null,
          "old_line_content": "        if (c->name) decrRefCount(c->name);",
          "new_line_content": "        c->name = c->argv[2];",
          "content_same": false
        },
        {
          "line": 1686,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr,\"getname\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"getname\") && c->argc == 2) {",
          "new_line_content": "        if (c->name)",
          "content_same": false
        },
        {
          "line": 663,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(err)",
          "new_text": null,
          "old_line_content": "            if (write(c->fd,err,strlen(err)) == -1) {",
          "new_line_content": "                /* Nothing to do, Just to avoid the warning... */",
          "content_same": false
        },
        {
          "line": 1176,
          "old_api": "string2ll",
          "new_api": null,
          "old_text": "string2ll(c->querybuf+1,newline-(c->querybuf+1),&ll)",
          "new_text": null,
          "old_line_content": "        ok = string2ll(c->querybuf+1,newline-(c->querybuf+1),&ll);",
          "new_line_content": "        if (!ok || ll > 1024*1024) {",
          "content_same": false
        },
        {
          "line": 1688,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,c->name)",
          "new_text": null,
          "old_line_content": "            addReplyBulk(c,c->name);",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 667,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(c)",
          "new_text": null,
          "old_line_content": "            freeClient(c);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 1179,
          "old_api": "setProtocolError",
          "new_api": null,
          "old_text": "setProtocolError(\"invalid mbulk count\",c,pos)",
          "new_text": null,
          "old_line_content": "            setProtocolError(\"invalid mbulk count\",c,pos);",
          "new_line_content": "            return C_ERR;",
          "content_same": false
        },
        {
          "line": 1691,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr,\"pause\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"pause\") && c->argc == 3) {",
          "new_line_content": "        long long duration;",
          "content_same": false
        },
        {
          "line": 1694,
          "old_api": "getTimeoutFromObjectOrReply",
          "new_api": null,
          "old_text": "getTimeoutFromObjectOrReply(c,c->argv[2],&duration,UNIT_MILLISECONDS)",
          "new_text": null,
          "old_line_content": "        if (getTimeoutFromObjectOrReply(c,c->argv[2],&duration,UNIT_MILLISECONDS)",
          "new_line_content": "                                        != C_OK) return;",
          "content_same": false
        },
        {
          "line": 1185,
          "old_api": "sdsrange",
          "new_api": null,
          "old_text": "sdsrange(c->querybuf,pos,-1)",
          "new_text": null,
          "old_line_content": "            sdsrange(c->querybuf,pos,-1);",
          "new_line_content": "            return C_OK;",
          "content_same": false
        },
        {
          "line": 1697,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.ok);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1699,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c, \"Syntax error, try CLIENT (LIST | KILL | GETNAME | SETNAME | PAUSE | REPLY)\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c, \"Syntax error, try CLIENT (LIST | KILL | GETNAME | SETNAME | PAUSE | REPLY)\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 681,
          "old_api": "UNUSED",
          "new_api": null,
          "old_text": "UNUSED(privdata)",
          "new_text": null,
          "old_line_content": "    UNUSED(privdata);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1193,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(robj*)*c->multibulklen)",
          "new_text": null,
          "old_line_content": "        c->argv = zmalloc(sizeof(robj*)*c->multibulklen);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 684,
          "old_api": "anetTcpAccept",
          "new_api": null,
          "old_text": "anetTcpAccept(server.neterr, fd, cip, sizeof(cip), &cport)",
          "new_text": null,
          "old_line_content": "        cfd = anetTcpAccept(server.neterr, fd, cip, sizeof(cip), &cport);",
          "new_line_content": "        if (cfd == ANET_ERR) {",
          "content_same": false
        },
        {
          "line": 1196,
          "old_api": "serverAssertWithInfo",
          "new_api": null,
          "old_text": "serverAssertWithInfo(c,NULL,c->multibulklen > 0)",
          "new_text": null,
          "old_line_content": "    serverAssertWithInfo(c,NULL,c->multibulklen > 0);",
          "new_line_content": "    while(c->multibulklen) {",
          "content_same": false
        },
        {
          "line": 687,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n                    \"Accepting client connection: %s\", server.neterr)",
          "new_text": null,
          "old_line_content": "                serverLog(LL_WARNING,",
          "new_line_content": "                    \"Accepting client connection: %s\", server.neterr);",
          "content_same": false
        },
        {
          "line": 1200,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(c->querybuf+pos,'\\r')",
          "new_text": null,
          "old_line_content": "            newline = strchr(c->querybuf+pos,'\\r');",
          "new_line_content": "            if (newline == NULL) {",
          "content_same": false
        },
        {
          "line": 1714,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    time_t now = time(NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1203,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\n                        \"Protocol error: too big bulk count string\")",
          "new_text": null,
          "old_line_content": "                    addReplyError(c,",
          "new_line_content": "                        \"Protocol error: too big bulk count string\");",
          "content_same": false
        },
        {
          "line": 692,
          "old_api": "acceptCommonHandler",
          "new_api": null,
          "old_text": "acceptCommonHandler(cfd,0,cip)",
          "new_text": null,
          "old_line_content": "        acceptCommonHandler(cfd,0,cip);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1205,
          "old_api": "setProtocolError",
          "new_api": null,
          "old_text": "setProtocolError(\"too big bulk count string\",c,0)",
          "new_text": null,
          "old_line_content": "                    setProtocolError(\"too big bulk count string\",c,0);",
          "new_line_content": "                    return C_ERR;",
          "content_same": false
        },
        {
          "line": 1717,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"Possible SECURITY ATTACK detected. It looks like somebody is sending POST or Host: commands to Redis. This is likely due to an attacker attempting to use Cross Protocol Scripting to compromise your Redis instance. Connection aborted.\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,\"Possible SECURITY ATTACK detected. It looks like somebody is sending POST or Host: commands to Redis. This is likely due to an attacker attempting to use Cross Protocol Scripting to compromise your Redis instance. Connection aborted.\");",
          "new_line_content": "        logged_time = now;",
          "content_same": false
        },
        {
          "line": 1720,
          "old_api": "freeClientAsync",
          "new_api": null,
          "old_text": "freeClientAsync(c)",
          "new_text": null,
          "old_line_content": "    freeClientAsync(c);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 700,
          "old_api": "UNUSED",
          "new_api": null,
          "old_text": "UNUSED(privdata)",
          "new_text": null,
          "old_line_content": "    UNUSED(privdata);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1212,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->querybuf)",
          "new_text": null,
          "old_line_content": "            if (newline-(c->querybuf) > ((signed)sdslen(c->querybuf)-2))",
          "new_line_content": "                break;",
          "content_same": false
        },
        {
          "line": 703,
          "old_api": "anetUnixAccept",
          "new_api": null,
          "old_text": "anetUnixAccept(server.neterr, fd)",
          "new_text": null,
          "old_line_content": "        cfd = anetUnixAccept(server.neterr, fd);",
          "new_line_content": "        if (cfd == ANET_ERR) {",
          "content_same": false
        },
        {
          "line": 1216,
          "old_api": "addReplyErrorFormat",
          "new_api": null,
          "old_text": "addReplyErrorFormat(c,\n                    \"Protocol error: expected '$', got '%c'\",\n                    c->querybuf[pos])",
          "new_text": null,
          "old_line_content": "                addReplyErrorFormat(c,",
          "new_line_content": "                    \"Protocol error: expected '$', got '%c'\",",
          "content_same": false
        },
        {
          "line": 706,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n                    \"Accepting client connection: %s\", server.neterr)",
          "new_text": null,
          "old_line_content": "                serverLog(LL_WARNING,",
          "new_line_content": "                    \"Accepting client connection: %s\", server.neterr);",
          "content_same": false
        },
        {
          "line": 1219,
          "old_api": "setProtocolError",
          "new_api": null,
          "old_text": "setProtocolError(\"expected $ but got something else\",c,pos)",
          "new_text": null,
          "old_line_content": "                setProtocolError(\"expected $ but got something else\",c,pos);",
          "new_line_content": "                return C_ERR;",
          "content_same": false
        },
        {
          "line": 1732,
          "old_api": "va_start",
          "new_api": null,
          "old_text": "va_start(ap,argc)",
          "new_text": null,
          "old_line_content": "    va_start(ap,argc);",
          "new_line_content": "    for (j = 0; j < argc; j++) {",
          "content_same": false
        },
        {
          "line": 711,
          "old_api": "acceptCommonHandler",
          "new_api": null,
          "old_text": "acceptCommonHandler(cfd,CLIENT_UNIX_SOCKET,NULL)",
          "new_text": null,
          "old_line_content": "        acceptCommonHandler(cfd,CLIENT_UNIX_SOCKET,NULL);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1223,
          "old_api": "string2ll",
          "new_api": null,
          "old_text": "string2ll(c->querybuf+pos+1,newline-(c->querybuf+pos+1),&ll)",
          "new_text": null,
          "old_line_content": "            ok = string2ll(c->querybuf+pos+1,newline-(c->querybuf+pos+1),&ll);",
          "new_line_content": "            if (!ok || ll < 0 || ll > 512*1024*1024) {",
          "content_same": false
        },
        {
          "line": 1736,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap, robj*)",
          "new_text": null,
          "old_line_content": "        a = va_arg(ap, robj*);",
          "new_line_content": "        argv[j] = a;",
          "content_same": false
        },
        {
          "line": 1226,
          "old_api": "setProtocolError",
          "new_api": null,
          "old_text": "setProtocolError(\"invalid bulk length\",c,pos)",
          "new_text": null,
          "old_line_content": "                setProtocolError(\"invalid bulk length\",c,pos);",
          "new_line_content": "                return C_ERR;",
          "content_same": false
        },
        {
          "line": 1738,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(a)",
          "new_text": null,
          "old_line_content": "        incrRefCount(a);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 718,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(c->argv[j])",
          "new_text": null,
          "old_line_content": "        decrRefCount(c->argv[j]);",
          "new_line_content": "    c->argc = 0;",
          "content_same": false
        },
        {
          "line": 1744,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(c->argv)",
          "new_text": null,
          "old_line_content": "    zfree(c->argv);",
          "new_line_content": "    /* Replace argv and argc with our new versions. */",
          "content_same": false
        },
        {
          "line": 1238,
          "old_api": "sdsrange",
          "new_api": null,
          "old_text": "sdsrange(c->querybuf,pos,-1)",
          "new_text": null,
          "old_line_content": "                sdsrange(c->querybuf,pos,-1);",
          "new_line_content": "                pos = 0;",
          "content_same": false
        },
        {
          "line": 1750,
          "old_api": "va_end",
          "new_api": null,
          "old_text": "va_end(ap)",
          "new_text": null,
          "old_line_content": "    va_end(ap);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1240,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->querybuf)",
          "new_text": null,
          "old_line_content": "                qblen = sdslen(c->querybuf);",
          "new_line_content": "                /* Hint the sds library about the amount of bytes this string is",
          "content_same": false
        },
        {
          "line": 729,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient((client*)ln->value)",
          "new_text": null,
          "old_line_content": "        freeClient((client*)ln->value);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1244,
          "old_api": "sdsMakeRoomFor",
          "new_api": null,
          "old_text": "sdsMakeRoomFor(c->querybuf,ll+2-qblen)",
          "new_text": null,
          "old_line_content": "                    c->querybuf = sdsMakeRoomFor(c->querybuf,ll+2-qblen);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1756,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(c->argv)",
          "new_text": null,
          "old_line_content": "    zfree(c->argv);",
          "new_line_content": "    c->argv = argv;",
          "content_same": false
        },
        {
          "line": 1760,
          "old_api": "serverAssertWithInfo",
          "new_api": null,
          "old_text": "serverAssertWithInfo(c,NULL,c->cmd != NULL)",
          "new_text": null,
          "old_line_content": "    serverAssertWithInfo(c,NULL,c->cmd != NULL);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1250,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->querybuf)",
          "new_text": null,
          "old_line_content": "        if (sdslen(c->querybuf)-pos < (unsigned)(c->bulklen+2)) {",
          "new_line_content": "            /* Not enough data (+2 == trailing \\r\\n) */",
          "content_same": false
        },
        {
          "line": 1259,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->querybuf)",
          "new_text": null,
          "old_line_content": "                (signed) sdslen(c->querybuf) == c->bulklen+2)",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 749,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(server.clients,ln)",
          "new_text": null,
          "old_line_content": "        listDelNode(server.clients,ln);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1262,
          "old_api": "sdsIncrLen",
          "new_api": null,
          "old_text": "sdsIncrLen(c->querybuf,-2)",
          "new_text": null,
          "old_line_content": "                sdsIncrLen(c->querybuf,-2); /* remove CRLF */",
          "new_line_content": "                /* Assume that if we saw a fat argument we'll see another one",
          "content_same": false
        },
        {
          "line": 754,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(c->fd)",
          "new_text": null,
          "old_line_content": "        close(c->fd);",
          "new_line_content": "        c->fd = -1;",
          "content_same": false
        },
        {
          "line": 1266,
          "old_api": "sdsclear",
          "new_api": null,
          "old_text": "sdsclear(c->querybuf)",
          "new_text": null,
          "old_line_content": "                sdsclear(c->querybuf);",
          "new_line_content": "                pos = 0;",
          "content_same": false
        },
        {
          "line": 1778,
          "old_api": "zrealloc",
          "new_api": null,
          "old_text": "zrealloc(c->argv,sizeof(robj*)*(i+1))",
          "new_text": null,
          "old_line_content": "        c->argv = zrealloc(c->argv,sizeof(robj*)*(i+1));",
          "new_line_content": "        c->argc = i+1;",
          "content_same": false
        },
        {
          "line": 1270,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject(c->querybuf+pos,c->bulklen)",
          "new_text": null,
          "old_line_content": "                    createStringObject(c->querybuf+pos,c->bulklen);",
          "new_line_content": "                pos += c->bulklen+2;",
          "content_same": false
        },
        {
          "line": 1785,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(oldval)",
          "new_text": null,
          "old_line_content": "    if (oldval) decrRefCount(oldval);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 762,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(server.clients_pending_write,ln)",
          "new_text": null,
          "old_line_content": "        listDelNode(server.clients_pending_write,ln);",
          "new_line_content": "        c->flags &= ~CLIENT_PENDING_WRITE;",
          "content_same": false
        },
        {
          "line": 1790,
          "old_api": "serverAssertWithInfo",
          "new_api": null,
          "old_text": "serverAssertWithInfo(c,NULL,c->cmd != NULL)",
          "new_text": null,
          "old_line_content": "        serverAssertWithInfo(c,NULL,c->cmd != NULL);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1279,
          "old_api": "sdsrange",
          "new_api": null,
          "old_text": "sdsrange(c->querybuf,pos,-1)",
          "new_text": null,
          "old_line_content": "    if (pos) sdsrange(c->querybuf,pos,-1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 771,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(server.unblocked_clients,ln)",
          "new_text": null,
          "old_line_content": "        listDelNode(server.unblocked_clients,ln);",
          "new_line_content": "        c->flags &= ~CLIENT_UNBLOCKED;",
          "content_same": false
        },
        {
          "line": 1295,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->querybuf)",
          "new_text": null,
          "old_line_content": "    while(sdslen(c->querybuf)) {",
          "new_line_content": "        /* Return if clients are paused. */",
          "content_same": false
        },
        {
          "line": 785,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"Connection with master lost.\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,\"Connection with master lost.\");",
          "new_line_content": "        if (!(c->flags & (CLIENT_CLOSE_AFTER_REPLY|",
          "content_same": false
        },
        {
          "line": 1297,
          "old_api": "clientsArePaused",
          "new_api": null,
          "old_text": "clientsArePaused()",
          "new_text": null,
          "old_line_content": "        if (!(c->flags & CLIENT_SLAVE) && clientsArePaused()) break;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1812,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(c->reply)",
          "new_text": null,
          "old_line_content": "    return c->reply_bytes + (list_item_size*listLength(c->reply));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 791,
          "old_api": "replicationCacheMaster",
          "new_api": null,
          "old_text": "replicationCacheMaster(c)",
          "new_text": null,
          "old_line_content": "            replicationCacheMaster(c);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 799,
          "old_api": "replicationGetSlaveName",
          "new_api": null,
          "old_text": "replicationGetSlaveName(c)",
          "new_text": null,
          "old_line_content": "            replicationGetSlaveName(c));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 804,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(c->pending_querybuf)",
          "new_text": null,
          "old_line_content": "    sdsfree(c->pending_querybuf);",
          "new_line_content": "    c->querybuf = NULL;",
          "content_same": false
        },
        {
          "line": 1319,
          "old_api": "processInlineBuffer",
          "new_api": null,
          "old_text": "processInlineBuffer(c)",
          "new_text": null,
          "old_line_content": "            if (processInlineBuffer(c) != C_OK) break;",
          "new_line_content": "        } else if (c->reqtype == PROTO_REQ_MULTIBULK) {",
          "content_same": false
        },
        {
          "line": 809,
          "old_api": "dictRelease",
          "new_api": null,
          "old_text": "dictRelease(c->bpop.keys)",
          "new_text": null,
          "old_line_content": "    dictRelease(c->bpop.keys);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1321,
          "old_api": "processMultibulkBuffer",
          "new_api": null,
          "old_text": "processMultibulkBuffer(c)",
          "new_text": null,
          "old_line_content": "            if (processMultibulkBuffer(c) != C_OK) break;",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1323,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown request type\")",
          "new_text": null,
          "old_line_content": "            serverPanic(\"Unknown request type\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1836,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(name,\"master\")",
          "new_text": null,
          "old_line_content": "    else if (!strcasecmp(name,\"master\")) return CLIENT_TYPE_MASTER;",
          "new_line_content": "    else return -1;",
          "content_same": false
        },
        {
          "line": 813,
          "old_api": "listRelease",
          "new_api": null,
          "old_text": "listRelease(c->watched_keys)",
          "new_text": null,
          "old_line_content": "    listRelease(c->watched_keys);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1328,
          "old_api": "resetClient",
          "new_api": null,
          "old_text": "resetClient(c)",
          "new_text": null,
          "old_line_content": "            resetClient(c);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 819,
          "old_api": "listRelease",
          "new_api": null,
          "old_text": "listRelease(c->pubsub_patterns)",
          "new_text": null,
          "old_line_content": "    listRelease(c->pubsub_patterns);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1331,
          "old_api": "processCommand",
          "new_api": null,
          "old_text": "processCommand(c)",
          "new_text": null,
          "old_line_content": "            if (processCommand(c) == C_OK) {",
          "new_line_content": "                if (c->flags & CLIENT_MASTER && !(c->flags & CLIENT_MULTI)) {",
          "content_same": false
        },
        {
          "line": 1334,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->querybuf)",
          "new_text": null,
          "old_line_content": "                    c->reploff = c->read_reploff - sdslen(c->querybuf);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 823,
          "old_api": "freeClientArgv",
          "new_api": null,
          "old_text": "freeClientArgv(c)",
          "new_text": null,
          "old_line_content": "    freeClientArgv(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1336,
          "old_api": "resetClient",
          "new_api": null,
          "old_text": "resetClient(c)",
          "new_text": null,
          "old_line_content": "                resetClient(c);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 828,
          "old_api": "unlinkClient",
          "new_api": null,
          "old_text": "unlinkClient(c)",
          "new_text": null,
          "old_line_content": "    unlinkClient(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1858,
          "old_api": "getClientOutputBufferMemoryUsage",
          "new_api": null,
          "old_text": "getClientOutputBufferMemoryUsage(c)",
          "new_text": null,
          "old_line_content": "    unsigned long used_mem = getClientOutputBufferMemoryUsage(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 835,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(c->replpreamble)",
          "new_text": null,
          "old_line_content": "            if (c->replpreamble) sdsfree(c->replpreamble);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1351,
          "old_api": "UNUSED",
          "new_api": null,
          "old_text": "UNUSED(mask)",
          "new_text": null,
          "old_line_content": "    UNUSED(mask);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 840,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(l,ln)",
          "new_text": null,
          "old_line_content": "        listDelNode(l,ln);",
          "new_line_content": "        /* We need to remember the time when we started to have zero",
          "content_same": false
        },
        {
          "line": 1865,
          "old_api": "if (server.client_obuf_limits[class].hard_limit_bytes &&\n        used_mem >= server.client_obuf_limits[class].hard_limit_bytes)",
          "new_api": null,
          "old_text": "if (server.client_obuf_limits[class].hard_limit_bytes &&\n        used_mem >= server.client_obuf_limits[class].hard_limit_bytes)",
          "new_text": null,
          "old_line_content": "    if (server.client_obuf_limits[class].hard_limit_bytes &&",
          "new_line_content": "        used_mem >= server.client_obuf_limits[class].hard_limit_bytes)",
          "content_same": false
        },
        {
          "line": 844,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.slaves)",
          "new_text": null,
          "old_line_content": "        if (c->flags & CLIENT_SLAVE && listLength(server.slaves) == 0)",
          "new_line_content": "            server.repl_no_slaves_since = server.unixtime;",
          "content_same": false
        },
        {
          "line": 846,
          "old_api": "refreshGoodSlavesCount",
          "new_api": null,
          "old_text": "refreshGoodSlavesCount()",
          "new_text": null,
          "old_line_content": "        refreshGoodSlavesCount();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 851,
          "old_api": "replicationHandleMasterDisconnection",
          "new_api": null,
          "old_text": "replicationHandleMasterDisconnection()",
          "new_text": null,
          "old_line_content": "    if (c->flags & CLIENT_MASTER) replicationHandleMasterDisconnection();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1363,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->querybuf)",
          "new_text": null,
          "old_line_content": "        int remaining = (unsigned)(c->bulklen+2)-sdslen(c->querybuf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1368,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->querybuf)",
          "new_text": null,
          "old_line_content": "    qblen = sdslen(c->querybuf);",
          "new_line_content": "    if (c->querybuf_peak < qblen) c->querybuf_peak = qblen;",
          "content_same": false
        },
        {
          "line": 858,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(server.clients_to_close,ln)",
          "new_text": null,
          "old_line_content": "        listDelNode(server.clients_to_close,ln);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1371,
          "old_api": "read",
          "new_api": null,
          "old_text": "read(fd, c->querybuf+qblen, readlen)",
          "new_text": null,
          "old_line_content": "    nread = read(fd, c->querybuf+qblen, readlen);",
          "new_line_content": "    if (nread == -1) {",
          "content_same": false
        },
        {
          "line": 1377,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(c)",
          "new_text": null,
          "old_line_content": "            freeClient(c);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 867,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(c)",
          "new_text": null,
          "old_line_content": "    zfree(c);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1382,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(c)",
          "new_text": null,
          "old_line_content": "        freeClient(c);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 1388,
          "old_api": "sdscatlen",
          "new_api": null,
          "old_text": "sdscatlen(c->pending_querybuf,\n                                        c->querybuf+qblen,nread)",
          "new_text": null,
          "old_line_content": "        c->pending_querybuf = sdscatlen(c->pending_querybuf,",
          "new_line_content": "                                        c->querybuf+qblen,nread);",
          "content_same": false
        },
        {
          "line": 877,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(server.clients_to_close,c)",
          "new_text": null,
          "old_line_content": "    listAddNodeTail(server.clients_to_close,c);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1902,
          "old_api": "serverAssert",
          "new_api": null,
          "old_text": "serverAssert(c->reply_bytes < SIZE_MAX-(1024*64))",
          "new_text": null,
          "old_line_content": "    serverAssert(c->reply_bytes < SIZE_MAX-(1024*64));",
          "new_line_content": "    if (c->reply_bytes == 0 || c->flags & CLIENT_CLOSE_ASAP) return;",
          "content_same": false
        },
        {
          "line": 1392,
          "old_api": "sdsIncrLen",
          "new_api": null,
          "old_text": "sdsIncrLen(c->querybuf,nread)",
          "new_text": null,
          "old_line_content": "    sdsIncrLen(c->querybuf,nread);",
          "new_line_content": "    c->lastinteraction = server.unixtime;",
          "content_same": false
        },
        {
          "line": 1905,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        sds client = catClientInfoString(sdsempty(),c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 883,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(ln)",
          "new_text": null,
          "old_line_content": "        client *c = listNodeValue(ln);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1397,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        sds ci = catClientInfoString(sdsempty(),c), bytes = sdsempty();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1909,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(client)",
          "new_text": null,
          "old_line_content": "        sdsfree(client);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 887,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(server.clients_to_close,ln)",
          "new_text": null,
          "old_line_content": "        listDelNode(server.clients_to_close,ln);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1403,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(c)",
          "new_text": null,
          "old_line_content": "        freeClient(c);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 898,
          "old_api": "clientHasPendingReplies",
          "new_api": null,
          "old_text": "clientHasPendingReplies(c)",
          "new_text": null,
          "old_line_content": "    while(clientHasPendingReplies(c)) {",
          "new_line_content": "        if (c->bufpos > 0) {",
          "content_same": false
        },
        {
          "line": 1923,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(ln)",
          "new_text": null,
          "old_line_content": "        client *slave = listNodeValue(ln);",
          "new_line_content": "        int events;",
          "content_same": false
        },
        {
          "line": 900,
          "old_api": "write",
          "new_api": null,
          "old_text": "write(fd,c->buf+c->sentlen,c->bufpos-c->sentlen)",
          "new_text": null,
          "old_line_content": "            nwritten = write(fd,c->buf+c->sentlen,c->bufpos-c->sentlen);",
          "new_line_content": "            if (nwritten <= 0) break;",
          "content_same": false
        },
        {
          "line": 1414,
          "old_api": "processInputBuffer",
          "new_api": null,
          "old_text": "processInputBuffer(c)",
          "new_text": null,
          "old_line_content": "        processInputBuffer(c);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1417,
          "old_api": "processInputBuffer",
          "new_api": null,
          "old_text": "processInputBuffer(c)",
          "new_text": null,
          "old_line_content": "        processInputBuffer(c);",
          "new_line_content": "        size_t applied = c->reploff - prev_offset;",
          "content_same": false
        },
        {
          "line": 1420,
          "old_api": "replicationFeedSlavesFromMasterStream",
          "new_api": null,
          "old_text": "replicationFeedSlavesFromMasterStream(server.slaves,\n                    c->pending_querybuf, applied)",
          "new_text": null,
          "old_line_content": "            replicationFeedSlavesFromMasterStream(server.slaves,",
          "new_line_content": "                    c->pending_querybuf, applied);",
          "content_same": false
        },
        {
          "line": 1932,
          "old_api": "aeGetFileEvents",
          "new_api": null,
          "old_text": "aeGetFileEvents(server.el,slave->fd)",
          "new_text": null,
          "old_line_content": "        events = aeGetFileEvents(server.el,slave->fd);",
          "new_line_content": "        if (events & AE_WRITABLE &&",
          "content_same": false
        },
        {
          "line": 1422,
          "old_api": "sdsrange",
          "new_api": null,
          "old_text": "sdsrange(c->pending_querybuf,applied,-1)",
          "new_text": null,
          "old_line_content": "            sdsrange(c->pending_querybuf,applied,-1);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1935,
          "old_api": "clientHasPendingReplies",
          "new_api": null,
          "old_text": "clientHasPendingReplies(slave)",
          "new_text": null,
          "old_line_content": "            clientHasPendingReplies(slave))",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 913,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(o)",
          "new_text": null,
          "old_line_content": "            objlen = sdslen(o);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1937,
          "old_api": "writeToClient",
          "new_api": null,
          "old_text": "writeToClient(slave->fd,slave,0)",
          "new_text": null,
          "old_line_content": "            writeToClient(slave->fd,slave,0);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 916,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(c->reply)",
          "new_text": null,
          "old_line_content": "                listDelNode(c->reply,listFirst(c->reply));",
          "new_line_content": "                continue;",
          "content_same": false
        },
        {
          "line": 920,
          "old_api": "write",
          "new_api": null,
          "old_text": "write(fd, o + c->sentlen, objlen - c->sentlen)",
          "new_text": null,
          "old_line_content": "            nwritten = write(fd, o + c->sentlen, objlen - c->sentlen);",
          "new_line_content": "            if (nwritten <= 0) break;",
          "content_same": false
        },
        {
          "line": 1436,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(ln)",
          "new_text": null,
          "old_line_content": "        c = listNodeValue(ln);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 927,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(c->reply)",
          "new_text": null,
          "old_line_content": "                listDelNode(c->reply,listFirst(c->reply));",
          "new_line_content": "                c->sentlen = 0;",
          "content_same": false
        },
        {
          "line": 1439,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->querybuf)",
          "new_text": null,
          "old_line_content": "        if (sdslen(c->querybuf) > bib) bib = sdslen(c->querybuf);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 933,
          "old_api": "serverAssert",
          "new_api": null,
          "old_text": "serverAssert(c->reply_bytes == 0)",
          "new_text": null,
          "old_line_content": "                    serverAssert(c->reply_bytes == 0);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 946,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "             zmalloc_used_memory() < server.maxmemory)) break;",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1460,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(peerid,peerid_len,\"%s:0\",server.unixsocket)",
          "new_text": null,
          "old_line_content": "        snprintf(peerid,peerid_len,\"%s:0\",server.unixsocket);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1463,
          "old_api": "anetFormatPeer",
          "new_api": null,
          "old_text": "anetFormatPeer(client->fd,peerid,peerid_len)",
          "new_text": null,
          "old_line_content": "        anetFormatPeer(client->fd,peerid,peerid_len);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 955,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(c)",
          "new_text": null,
          "old_line_content": "            freeClient(c);",
          "new_line_content": "            return C_ERR;",
          "content_same": false
        },
        {
          "line": 1981,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(ln)",
          "new_text": null,
          "old_line_content": "            c = listNodeValue(ln);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1987,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(server.unblocked_clients,c)",
          "new_text": null,
          "old_line_content": "            listAddNodeTail(server.unblocked_clients,c);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1476,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(peerid)",
          "new_text": null,
          "old_line_content": "        c->peerid = sdsnew(peerid);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 966,
          "old_api": "clientHasPendingReplies",
          "new_api": null,
          "old_text": "clientHasPendingReplies(c)",
          "new_text": null,
          "old_line_content": "    if (!clientHasPendingReplies(c)) {",
          "new_line_content": "        c->sentlen = 0;",
          "content_same": false
        },
        {
          "line": 968,
          "old_api": "aeDeleteFileEvent",
          "new_api": null,
          "old_text": "aeDeleteFileEvent(server.el,c->fd,AE_WRITABLE)",
          "new_text": null,
          "old_line_content": "        if (handler_installed) aeDeleteFileEvent(server.el,c->fd,AE_WRITABLE);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 972,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(c)",
          "new_text": null,
          "old_line_content": "            freeClient(c);",
          "new_line_content": "            return C_ERR;",
          "content_same": false
        },
        {
          "line": 983,
          "old_api": "writeToClient",
          "new_api": null,
          "old_text": "writeToClient(fd,privdata,1)",
          "new_text": null,
          "old_line_content": "    writeToClient(fd,privdata,1);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2011,
          "old_api": "handleClientsWithPendingWrites",
          "new_api": null,
          "old_text": "handleClientsWithPendingWrites()",
          "new_text": null,
          "old_line_content": "        events += handleClientsWithPendingWrites();",
          "new_line_content": "        if (!events) break;",
          "content_same": false
        },
        {
          "line": 993,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.clients_pending_write)",
          "new_text": null,
          "old_line_content": "    int processed = listLength(server.clients_pending_write);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1506,
          "old_api": "aeGetFileEvents",
          "new_api": null,
          "old_text": "aeGetFileEvents(server.el,client->fd)",
          "new_text": null,
          "old_line_content": "    emask = client->fd == -1 ? 0 : aeGetFileEvents(server.el,client->fd);",
          "new_line_content": "    p = events;",
          "content_same": false
        },
        {
          "line": 997,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(ln)",
          "new_text": null,
          "old_line_content": "        client *c = listNodeValue(ln);",
          "new_line_content": "        c->flags &= ~CLIENT_PENDING_WRITE;",
          "content_same": false
        },
        {
          "line": 999,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(server.clients_pending_write,ln)",
          "new_text": null,
          "old_line_content": "        listDelNode(server.clients_pending_write,ln);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1511,
          "old_api": "sdscatfmt",
          "new_api": null,
          "old_text": "sdscatfmt(s,\n        \"id=%U addr=%s fd=%i name=%s age=%I idle=%I flags=%s db=%i sub=%i psub=%i multi=%i qbuf=%U qbuf-free=%U obl=%U oll=%U omem=%U events=%s cmd=%s\",\n        (unsigned long long) client->id,\n        getClientPeerId(client),\n        client->fd,\n        client->name ? (char*)client->name->ptr : \"\",\n        (long long)(server.unixtime - client->ctime),\n        (long long)(server.unixtime - client->lastinteraction),\n        flags,\n        client->db->id,\n        (int) dictSize(client->pubsub_channels),\n        (int) listLength(client->pubsub_patterns),\n        (client->flags & CLIENT_MULTI) ? client->mstate.count : -1,\n        (unsigned long long) sdslen(client->querybuf),\n        (unsigned long long) sdsavail(client->querybuf),\n        (unsigned long long) client->bufpos,\n        (unsigned long long) listLength(client->reply),\n        (unsigned long long) getClientOutputBufferMemoryUsage(client),\n        events,\n        client->lastcmd ? client->lastcmd->name : \"NULL\")",
          "new_text": null,
          "old_line_content": "    return sdscatfmt(s,",
          "new_line_content": "        \"id=%U addr=%s fd=%i name=%s age=%I idle=%I flags=%s db=%i sub=%i psub=%i multi=%i qbuf=%U qbuf-free=%U obl=%U oll=%U omem=%U events=%s cmd=%s\",",
          "content_same": false
        },
        {
          "line": 1002,
          "old_api": "writeToClient",
          "new_api": null,
          "old_text": "writeToClient(c->fd,c,0)",
          "new_text": null,
          "old_line_content": "        if (writeToClient(c->fd,c,0) == C_ERR) continue;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1514,
          "old_api": "getClientPeerId",
          "new_api": null,
          "old_text": "getClientPeerId(client)",
          "new_text": null,
          "old_line_content": "        getClientPeerId(client),",
          "new_line_content": "        client->fd,",
          "content_same": false
        },
        {
          "line": 1007,
          "old_api": "aeCreateFileEvent",
          "new_api": null,
          "old_text": "aeCreateFileEvent(server.el, c->fd, AE_WRITABLE,\n                sendReplyToClient, c)",
          "new_text": null,
          "old_line_content": "            aeCreateFileEvent(server.el, c->fd, AE_WRITABLE,",
          "new_line_content": "                sendReplyToClient, c) == AE_ERR)",
          "content_same": false
        },
        {
          "line": 1010,
          "old_api": "freeClientAsync",
          "new_api": null,
          "old_text": "freeClientAsync(c)",
          "new_text": null,
          "old_line_content": "            freeClientAsync(c);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1522,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(client->pubsub_patterns)",
          "new_text": null,
          "old_line_content": "        (int) listLength(client->pubsub_patterns),",
          "new_line_content": "        (client->flags & CLIENT_MULTI) ? client->mstate.count : -1,",
          "content_same": false
        },
        {
          "line": 1525,
          "old_api": "sdsavail",
          "new_api": null,
          "old_text": "sdsavail(client->querybuf)",
          "new_text": null,
          "old_line_content": "        (unsigned long long) sdsavail(client->querybuf),",
          "new_line_content": "        (unsigned long long) client->bufpos,",
          "content_same": false
        },
        {
          "line": 1528,
          "old_api": "getClientOutputBufferMemoryUsage",
          "new_api": null,
          "old_text": "getClientOutputBufferMemoryUsage(client)",
          "new_text": null,
          "old_line_content": "        (unsigned long long) getClientOutputBufferMemoryUsage(client),",
          "new_line_content": "        events,",
          "content_same": false
        },
        {
          "line": 1020,
          "old_api": "freeClientArgv",
          "new_api": null,
          "old_text": "freeClientArgv(c)",
          "new_text": null,
          "old_line_content": "    freeClientArgv(c);",
          "new_line_content": "    c->reqtype = 0;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 114,
      "total_additions": 203,
      "total_deletions": 204,
      "total_api_changes": 521
    },
    "non_api_changes": {
      "has_non_api_changes": false,
      "evidence": {
        "total_diff_lines": 2,
        "api_related_lines": 521,
        "non_api_lines": 0,
        "non_api_line_numbers": []
      }
    },
    "api_calls_before": 514,
    "api_calls_after": 512,
    "diff_info": {
      "added_lines": 1,
      "removed_lines": 2,
      "total_diff_lines": 15
    }
  }
}
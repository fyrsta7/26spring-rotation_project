{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/8c096b16a1ab942413020c91138398d8a23bd64e",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/8c096b16a1ab942413020c91138398d8a23bd64e/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/8c096b16a1ab942413020c91138398d8a23bd64e/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/8c096b16a1ab942413020c91138398d8a23bd64e/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 3517,
          "old_api": "strlen",
          "new_api": "ll2string",
          "old_text": "strlen((char*)buf+1)",
          "new_text": "ll2string((char*)buf+1,sizeof(buf),(long long)val)",
          "old_line_content": "        buf[0] = strlen((char*)buf+1);",
          "new_line_content": "            ll2string((char*)buf+1,sizeof(buf),(long long)val);",
          "content_same": false
        },
        {
          "line": 3520,
          "old_api": "fwrite",
          "new_api": "strlen",
          "old_text": "fwrite(buf,len,1,fp)",
          "new_text": "strlen((char*)buf+1)",
          "old_line_content": "    if (fwrite(buf,len,1,fp) == 0) return -1;",
          "new_line_content": "        buf[0] = strlen((char*)buf+1);",
          "content_same": false
        },
        {
          "line": 3538,
          "old_api": "listNodeValue",
          "new_api": "listLength",
          "old_text": "listNodeValue(ln)",
          "new_text": "listLength(list)",
          "old_line_content": "            robj *eleobj = listNodeValue(ln);",
          "new_line_content": "        if (rdbSaveLen(fp,listLength(list)) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 3540,
          "old_api": "rdbSaveStringObject",
          "new_api": "listNext",
          "old_text": "rdbSaveStringObject(fp,eleobj)",
          "new_text": "listNext(&li)",
          "old_line_content": "            if (rdbSaveStringObject(fp,eleobj) == -1) return -1;",
          "new_line_content": "        while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 3548,
          "old_api": "dictSize",
          "new_api": "dictGetIterator",
          "old_text": "dictSize(set)",
          "new_text": "dictGetIterator(set)",
          "old_line_content": "        if (rdbSaveLen(fp,dictSize(set)) == -1) return -1;",
          "new_line_content": "        dictIterator *di = dictGetIterator(set);",
          "content_same": false
        },
        {
          "line": 3552,
          "old_api": "rdbSaveStringObject",
          "new_api": "dictNext",
          "old_text": "rdbSaveStringObject(fp,eleobj)",
          "new_text": "dictNext(di)",
          "old_line_content": "            if (rdbSaveStringObject(fp,eleobj) == -1) return -1;",
          "new_line_content": "        while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 3561,
          "old_api": "dictSize",
          "new_api": "dictGetIterator",
          "old_text": "dictSize(zs->dict)",
          "new_text": "dictGetIterator(zs->dict)",
          "old_line_content": "        if (rdbSaveLen(fp,dictSize(zs->dict)) == -1) return -1;",
          "new_line_content": "        dictIterator *di = dictGetIterator(zs->dict);",
          "content_same": false
        },
        {
          "line": 3564,
          "old_api": "dictGetEntryVal",
          "new_api": "dictSize",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "dictSize(zs->dict)",
          "old_line_content": "            double *score = dictGetEntryVal(de);",
          "new_line_content": "        if (rdbSaveLen(fp,dictSize(zs->dict)) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 3566,
          "old_api": "rdbSaveStringObject",
          "new_api": "dictGetEntryKey",
          "old_text": "rdbSaveStringObject(fp,eleobj)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "            if (rdbSaveStringObject(fp,eleobj) == -1) return -1;",
          "new_line_content": "            robj *eleobj = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 3567,
          "old_api": "rdbSaveDoubleValue",
          "new_api": "dictGetEntryVal",
          "old_text": "rdbSaveDoubleValue(fp,*score)",
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "            if (rdbSaveDoubleValue(fp,*score) == -1) return -1;",
          "new_line_content": "            double *score = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 3569,
          "old_api": "dictReleaseIterator",
          "new_api": "rdbSaveStringObject",
          "old_text": "dictReleaseIterator(di)",
          "new_text": "rdbSaveStringObject(fp,eleobj)",
          "old_line_content": "        dictReleaseIterator(di);",
          "new_line_content": "            if (rdbSaveStringObject(fp,eleobj) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 3581,
          "old_api": "rdbSaveRawString",
          "new_api": "rdbSaveLen",
          "old_text": "rdbSaveRawString(fp,val,vlen)",
          "new_text": "rdbSaveLen(fp,count)",
          "old_line_content": "                if (rdbSaveRawString(fp,val,vlen) == -1) return -1;",
          "new_line_content": "            if (rdbSaveLen(fp,count) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 3584,
          "old_api": "dictGetIterator",
          "new_api": "rdbSaveRawString",
          "old_text": "dictGetIterator(o->ptr)",
          "new_text": "rdbSaveRawString(fp,val,vlen)",
          "old_line_content": "            dictIterator *di = dictGetIterator(o->ptr);",
          "new_line_content": "                if (rdbSaveRawString(fp,val,vlen) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 3587,
          "old_api": "dictSize",
          "new_api": "dictGetIterator",
          "old_text": "dictSize((dict*)o->ptr)",
          "new_text": "dictGetIterator(o->ptr)",
          "old_line_content": "            if (rdbSaveLen(fp,dictSize((dict*)o->ptr)) == -1) return -1;",
          "new_line_content": "            dictIterator *di = dictGetIterator(o->ptr);",
          "content_same": false
        },
        {
          "line": 3590,
          "old_api": "dictGetEntryVal",
          "new_api": "dictSize",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "dictSize((dict*)o->ptr)",
          "old_line_content": "                robj *val = dictGetEntryVal(de);",
          "new_line_content": "            if (rdbSaveLen(fp,dictSize((dict*)o->ptr)) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 3592,
          "old_api": "rdbSaveStringObject",
          "new_api": "dictGetEntryKey",
          "old_text": "rdbSaveStringObject(fp,key)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "                if (rdbSaveStringObject(fp,key) == -1) return -1;",
          "new_line_content": "                robj *key = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 3593,
          "old_api": "rdbSaveStringObject",
          "new_api": "dictGetEntryVal",
          "old_text": "rdbSaveStringObject(fp,val)",
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "                if (rdbSaveStringObject(fp,val) == -1) return -1;",
          "new_line_content": "                robj *val = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 3595,
          "old_api": "dictReleaseIterator",
          "new_api": "rdbSaveStringObject",
          "old_text": "dictReleaseIterator(di)",
          "new_text": "rdbSaveStringObject(fp,key)",
          "old_line_content": "            dictReleaseIterator(di);",
          "new_line_content": "                if (rdbSaveStringObject(fp,key) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 3598,
          "old_api": "redisPanic",
          "new_api": "dictReleaseIterator",
          "old_text": "redisPanic(\"Unknown object type\")",
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "        redisPanic(\"Unknown object type\");",
          "new_line_content": "            dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 3637,
          "old_api": "fopen",
          "new_api": "waitEmptyIOJobsQueue",
          "old_text": "fopen(tmpfile,\"w\")",
          "new_text": "waitEmptyIOJobsQueue()",
          "old_line_content": "    fp = fopen(tmpfile,\"w\");",
          "new_line_content": "        waitEmptyIOJobsQueue();",
          "content_same": false
        },
        {
          "line": 3639,
          "old_api": "strerror",
          "new_api": "getpid",
          "old_text": "strerror(errno)",
          "new_text": "getpid()",
          "old_line_content": "        redisLog(REDIS_WARNING, \"Failed saving the DB: %s\", strerror(errno));",
          "new_line_content": "    snprintf(tmpfile,256,\"temp-%d.rdb\", (int) getpid());",
          "content_same": false
        },
        {
          "line": 3642,
          "old_api": "fwrite",
          "new_api": "strerror",
          "old_text": "fwrite(\"REDIS0001\",9,1,fp)",
          "new_text": "strerror(errno)",
          "old_line_content": "    if (fwrite(\"REDIS0001\",9,1,fp) == 0) goto werr;",
          "new_line_content": "        redisLog(REDIS_WARNING, \"Failed saving the DB: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 3649,
          "old_api": "fclose",
          "new_api": "dictSize",
          "old_text": "fclose(fp)",
          "new_text": "dictSize(d)",
          "old_line_content": "            fclose(fp);",
          "new_line_content": "        if (dictSize(d) == 0) continue;",
          "content_same": false
        },
        {
          "line": 3658,
          "old_api": "dictNext",
          "new_api": "rdbSaveLen",
          "old_text": "dictNext(di)",
          "new_text": "rdbSaveLen(fp,j)",
          "old_line_content": "        while((de = dictNext(di)) != NULL) {",
          "new_line_content": "        if (rdbSaveLen(fp,j) == -1) goto werr;",
          "content_same": false
        },
        {
          "line": 3661,
          "old_api": "getExpire",
          "new_api": "dictNext",
          "old_text": "getExpire(db,key)",
          "new_text": "dictNext(di)",
          "old_line_content": "            time_t expiretime = getExpire(db,key);",
          "new_line_content": "        while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 3685,
          "old_api": "rdbSaveStringObject",
          "new_api": "vmPreviewObject",
          "old_text": "rdbSaveStringObject(fp,key)",
          "new_text": "vmPreviewObject(key)",
          "old_line_content": "                if (rdbSaveStringObject(fp,key) == -1) goto werr;",
          "new_line_content": "                po = vmPreviewObject(key);",
          "content_same": false
        },
        {
          "line": 3688,
          "old_api": "decrRefCount",
          "new_api": "rdbSaveStringObject",
          "old_text": "decrRefCount(po)",
          "new_text": "rdbSaveStringObject(fp,key)",
          "old_line_content": "                decrRefCount(po);",
          "new_line_content": "                if (rdbSaveStringObject(fp,key) == -1) goto werr;",
          "content_same": false
        },
        {
          "line": 3691,
          "old_api": "dictReleaseIterator",
          "new_api": "decrRefCount",
          "old_text": "dictReleaseIterator(di)",
          "new_text": "decrRefCount(po)",
          "old_line_content": "        dictReleaseIterator(di);",
          "new_line_content": "                decrRefCount(po);",
          "content_same": false
        },
        {
          "line": 3694,
          "old_api": "rdbSaveType",
          "new_api": "dictReleaseIterator",
          "old_text": "rdbSaveType(fp,REDIS_EOF)",
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "    if (rdbSaveType(fp,REDIS_EOF) == -1) goto werr;",
          "new_line_content": "        dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 3697,
          "old_api": "fflush",
          "new_api": "rdbSaveType",
          "old_text": "fflush(fp)",
          "new_text": "rdbSaveType(fp,REDIS_EOF)",
          "old_line_content": "    fflush(fp);",
          "new_line_content": "    if (rdbSaveType(fp,REDIS_EOF) == -1) goto werr;",
          "content_same": false
        },
        {
          "line": 3708,
          "old_api": "redisLog",
          "new_api": "unlink",
          "old_text": "redisLog(REDIS_NOTICE,\"DB saved on disk\")",
          "new_text": "unlink(tmpfile)",
          "old_line_content": "    redisLog(REDIS_NOTICE,\"DB saved on disk\");",
          "new_line_content": "        unlink(tmpfile);",
          "content_same": false
        },
        {
          "line": 3717,
          "old_api": "dictReleaseIterator",
          "new_api": "fclose",
          "old_text": "dictReleaseIterator(di)",
          "new_text": "fclose(fp)",
          "old_line_content": "    if (di) dictReleaseIterator(di);",
          "new_line_content": "    fclose(fp);",
          "content_same": false
        },
        {
          "line": 3728,
          "old_api": "vmReopenSwapFile",
          "new_api": "waitEmptyIOJobsQueue",
          "old_text": "vmReopenSwapFile()",
          "new_text": "waitEmptyIOJobsQueue()",
          "old_line_content": "        if (server.vm_enabled) vmReopenSwapFile();",
          "new_line_content": "    if (server.vm_enabled) waitEmptyIOJobsQueue();",
          "content_same": false
        },
        {
          "line": 3729,
          "old_api": "close",
          "new_api": "fork",
          "old_text": "close(server.fd)",
          "new_text": "fork()",
          "old_line_content": "        close(server.fd);",
          "new_line_content": "    if ((childpid = fork()) == 0) {",
          "content_same": false
        },
        {
          "line": 3731,
          "old_api": "_exit",
          "new_api": "vmReopenSwapFile",
          "old_text": "_exit(0)",
          "new_text": "vmReopenSwapFile()",
          "old_line_content": "            _exit(0);",
          "new_line_content": "        if (server.vm_enabled) vmReopenSwapFile();",
          "content_same": false
        },
        {
          "line": 3733,
          "old_api": "_exit",
          "new_api": "rdbSave",
          "old_text": "_exit(1)",
          "new_text": "rdbSave(filename)",
          "old_line_content": "            _exit(1);",
          "new_line_content": "        if (rdbSave(filename) == REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 3742,
          "old_api": "redisLog",
          "new_api": "strerror",
          "old_text": "redisLog(REDIS_NOTICE,\"Background saving started by pid %d\",childpid)",
          "new_text": "strerror(errno)",
          "old_line_content": "        redisLog(REDIS_NOTICE,\"Background saving started by pid %d\",childpid);",
          "new_line_content": "                strerror(errno));",
          "content_same": false
        },
        {
          "line": 3826,
          "old_api": "createStringObjectFromLongLong",
          "new_api": "redisPanic",
          "old_text": "createStringObjectFromLongLong(val)",
          "new_text": "redisPanic(\"Unknown RDB integer encoding type\")",
          "old_line_content": "        return createStringObjectFromLongLong(val);",
          "new_line_content": "        redisPanic(\"Unknown RDB integer encoding type\");",
          "content_same": false
        },
        {
          "line": 3839,
          "old_api": "sdsnewlen",
          "new_api": "rdbLoadLen",
          "old_text": "sdsnewlen(NULL,len)",
          "new_text": "rdbLoadLen(fp,NULL)",
          "old_line_content": "    if ((val = sdsnewlen(NULL,len)) == NULL) goto err;",
          "new_line_content": "    if ((clen = rdbLoadLen(fp,NULL)) == REDIS_RDB_LENERR) return NULL;",
          "content_same": false
        },
        {
          "line": 3840,
          "old_api": "fread",
          "new_api": "rdbLoadLen",
          "old_text": "fread(c,clen,1,fp)",
          "new_text": "rdbLoadLen(fp,NULL)",
          "old_line_content": "    if (fread(c,clen,1,fp) == 0) goto err;",
          "new_line_content": "    if ((len = rdbLoadLen(fp,NULL)) == REDIS_RDB_LENERR) return NULL;",
          "content_same": false
        },
        {
          "line": 3841,
          "old_api": "lzf_decompress",
          "new_api": "zmalloc",
          "old_text": "lzf_decompress(c,clen,val,len)",
          "new_text": "zmalloc(clen)",
          "old_line_content": "    if (lzf_decompress(c,clen,val,len) == 0) goto err;",
          "new_line_content": "    if ((c = zmalloc(clen)) == NULL) goto err;",
          "content_same": false
        },
        {
          "line": 3842,
          "old_api": "zfree",
          "new_api": "sdsnewlen",
          "old_text": "zfree(c)",
          "new_text": "sdsnewlen(NULL,len)",
          "old_line_content": "    zfree(c);",
          "new_line_content": "    if ((val = sdsnewlen(NULL,len)) == NULL) goto err;",
          "content_same": false
        },
        {
          "line": 3843,
          "old_api": "createObject",
          "new_api": "fread",
          "old_text": "createObject(REDIS_STRING,val)",
          "new_text": "fread(c,clen,1,fp)",
          "old_line_content": "    return createObject(REDIS_STRING,val);",
          "new_line_content": "    if (fread(c,clen,1,fp) == 0) goto err;",
          "content_same": false
        },
        {
          "line": 3846,
          "old_api": "sdsfree",
          "new_api": "createObject",
          "old_text": "sdsfree(val)",
          "new_text": "createObject(REDIS_STRING,val)",
          "old_line_content": "    sdsfree(val);",
          "new_line_content": "    return createObject(REDIS_STRING,val);",
          "content_same": false
        },
        {
          "line": 3875,
          "old_api": "createObject",
          "new_api": "sdsfree",
          "old_text": "createObject(REDIS_STRING,val)",
          "new_text": "sdsfree(val)",
          "old_line_content": "    return createObject(REDIS_STRING,val);",
          "new_line_content": "        sdsfree(val);",
          "content_same": false
        },
        {
          "line": 3912,
          "old_api": "rdbLoadEncodedStringObject",
          "new_api": "ftell",
          "old_text": "rdbLoadEncodedStringObject(fp)",
          "new_text": "ftell(fp)",
          "old_line_content": "        if ((o = rdbLoadEncodedStringObject(fp)) == NULL) return NULL;",
          "new_line_content": "    redisLog(REDIS_DEBUG,\"LOADING OBJECT %d (at %d)\\n\",type,ftell(fp));",
          "content_same": false
        },
        {
          "line": 3931,
          "old_api": "listAddNodeTail",
          "new_api": "rdbLoadEncodedStringObject",
          "old_text": "listAddNodeTail((list*)o->ptr,ele)",
          "new_text": "rdbLoadEncodedStringObject(fp)",
          "old_line_content": "                listAddNodeTail((list*)o->ptr,ele);",
          "new_line_content": "            if ((ele = rdbLoadEncodedStringObject(fp)) == NULL) return NULL;",
          "content_same": false
        },
        {
          "line": 3950,
          "old_api": "tryObjectEncoding",
          "new_api": "zmalloc",
          "old_text": "tryObjectEncoding(ele)",
          "new_text": "zmalloc(sizeof(double))",
          "old_line_content": "            ele = tryObjectEncoding(ele);",
          "new_line_content": "            double *score = zmalloc(sizeof(double));",
          "content_same": false
        },
        {
          "line": 3952,
          "old_api": "dictAdd",
          "new_api": "rdbLoadEncodedStringObject",
          "old_text": "dictAdd(zs->dict,ele,score)",
          "new_text": "rdbLoadEncodedStringObject(fp)",
          "old_line_content": "            dictAdd(zs->dict,ele,score);",
          "new_line_content": "            if ((ele = rdbLoadEncodedStringObject(fp)) == NULL) return NULL;",
          "content_same": false
        },
        {
          "line": 3953,
          "old_api": "zslInsert",
          "new_api": "tryObjectEncoding",
          "old_text": "zslInsert(zs->zsl,*score,ele)",
          "new_text": "tryObjectEncoding(ele)",
          "old_line_content": "            zslInsert(zs->zsl,*score,ele);",
          "new_line_content": "            ele = tryObjectEncoding(ele);",
          "content_same": false
        },
        {
          "line": 3954,
          "old_api": "incrRefCount",
          "new_api": "rdbLoadDoubleValue",
          "old_text": "incrRefCount(ele)",
          "new_text": "rdbLoadDoubleValue(fp,score)",
          "old_line_content": "            incrRefCount(ele); /* added to skiplist */",
          "new_line_content": "            if (rdbLoadDoubleValue(fp,score) == -1) return NULL;",
          "content_same": false
        },
        {
          "line": 3963,
          "old_api": "convertToRealHash",
          "new_api": "createHashObject",
          "old_text": "convertToRealHash(o)",
          "new_text": "createHashObject()",
          "old_line_content": "            convertToRealHash(o);",
          "new_line_content": "        o = createHashObject();",
          "content_same": false
        },
        {
          "line": 3977,
          "old_api": "convertToRealHash",
          "new_api": "sdslen",
          "old_text": "convertToRealHash(o)",
          "new_text": "sdslen(key->ptr)",
          "old_line_content": "                    convertToRealHash(o);",
          "new_line_content": "               (sdslen(key->ptr) > server.hash_max_zipmap_value ||",
          "content_same": false
        },
        {
          "line": 3986,
          "old_api": "decrRefCount",
          "new_api": "sdslen",
          "old_text": "decrRefCount(key)",
          "new_text": "sdslen(key->ptr)",
          "old_line_content": "                decrRefCount(key);",
          "new_line_content": "                zm = zipmapSet(zm,key->ptr,sdslen(key->ptr),",
          "content_same": false
        },
        {
          "line": 3987,
          "old_api": "decrRefCount",
          "new_api": "sdslen",
          "old_text": "decrRefCount(val)",
          "new_text": "sdslen(val->ptr)",
          "old_line_content": "                decrRefCount(val);",
          "new_line_content": "                                  val->ptr,sdslen(val->ptr),NULL);",
          "content_same": false
        },
        {
          "line": 3989,
          "old_api": "tryObjectEncoding",
          "new_api": "decrRefCount",
          "old_text": "tryObjectEncoding(key)",
          "new_text": "decrRefCount(key)",
          "old_line_content": "                key = tryObjectEncoding(key);",
          "new_line_content": "                decrRefCount(key);",
          "content_same": false
        },
        {
          "line": 3990,
          "old_api": "tryObjectEncoding",
          "new_api": "decrRefCount",
          "old_text": "tryObjectEncoding(val)",
          "new_text": "decrRefCount(val)",
          "old_line_content": "                val = tryObjectEncoding(val);",
          "new_line_content": "                decrRefCount(val);",
          "content_same": false
        },
        {
          "line": 4011,
          "old_api": "fopen",
          "new_api": "time",
          "old_text": "fopen(filename,\"r\")",
          "new_text": "time(NULL)",
          "old_line_content": "    fp = fopen(filename,\"r\");",
          "new_line_content": "    time_t expiretime, now = time(NULL);",
          "content_same": false
        },
        {
          "line": 4016,
          "old_api": "fclose",
          "new_api": "fread",
          "old_text": "fclose(fp)",
          "new_text": "fread(buf,9,1,fp)",
          "old_line_content": "        fclose(fp);",
          "new_line_content": "    if (fread(buf,9,1,fp) == 0) goto eoferr;",
          "content_same": false
        },
        {
          "line": 4020,
          "old_api": "atoi",
          "new_api": "redisLog",
          "old_text": "atoi(buf+5)",
          "new_text": "redisLog(REDIS_WARNING,\"Wrong signature trying to load DB from file\")",
          "old_line_content": "    rdbver = atoi(buf+5);",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Wrong signature trying to load DB from file\");",
          "content_same": false
        },
        {
          "line": 4023,
          "old_api": "redisLog",
          "new_api": "atoi",
          "old_text": "redisLog(REDIS_WARNING,\"Can't handle RDB format version %d\",rdbver)",
          "new_text": "atoi(buf+5)",
          "old_line_content": "        redisLog(REDIS_WARNING,\"Can't handle RDB format version %d\",rdbver);",
          "new_line_content": "    rdbver = atoi(buf+5);",
          "content_same": false
        },
        {
          "line": 4043,
          "old_api": "redisLog",
          "new_api": "rdbLoadLen",
          "old_text": "redisLog(REDIS_WARNING,\"FATAL: Data file was created with a Redis server configured to handle more than %d databases. Exiting\\n\", server.dbnum)",
          "new_text": "rdbLoadLen(fp,NULL)",
          "old_line_content": "                redisLog(REDIS_WARNING,\"FATAL: Data file was created with a Redis server configured to handle more than %d databases. Exiting\\n\", server.dbnum);",
          "new_line_content": "            if ((dbid = rdbLoadLen(fp,NULL)) == REDIS_RDB_LENERR)",
          "content_same": false
        },
        {
          "line": 4056,
          "old_api": "decrRefCount",
          "new_api": "rdbLoadObject",
          "old_text": "decrRefCount(key)",
          "new_text": "rdbLoadObject(type,fp)",
          "old_line_content": "            decrRefCount(key);",
          "new_line_content": "        if ((val = rdbLoadObject(type,fp)) == NULL) goto eoferr;",
          "content_same": false
        },
        {
          "line": 4064,
          "old_api": "exit",
          "new_api": "dictAdd",
          "old_text": "exit(1)",
          "new_text": "dictAdd(d,key,val)",
          "old_line_content": "            exit(1);",
          "new_line_content": "        retval = dictAdd(d,key,val);",
          "content_same": false
        },
        {
          "line": 4085,
          "old_api": "vmSwapObjectBlocking",
          "new_api": "dictGetEntryKey",
          "old_text": "vmSwapObjectBlocking(key,val)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "                if (vmSwapObjectBlocking(key,val) == REDIS_OK) {",
          "new_line_content": "                key = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 4119,
          "old_api": "sdsempty",
          "new_api": "addReply",
          "old_text": "sdsempty()",
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "      addReplySds(c,sdscatprintf(sdsempty(),\"-ERR invalid password\\r\\n\"));",
          "new_line_content": "      addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 4141,
          "old_api": "sdsnew",
          "new_api": "getLongFromObjectOrReply",
          "old_text": "sdsnew(\"-ERR invalid expire time in SETEX\\r\\n\")",
          "new_text": "getLongFromObjectOrReply(c, expire, &seconds, NULL)",
          "old_line_content": "            addReplySds(c,sdsnew(\"-ERR invalid expire time in SETEX\\r\\n\"));",
          "new_line_content": "        if (getLongFromObjectOrReply(c, expire, &seconds, NULL) != REDIS_OK)",
          "content_same": false
        },
        {
          "line": 4157,
          "old_api": "incrRefCount",
          "new_api": "deleteIfSwapped",
          "old_text": "incrRefCount(val)",
          "new_text": "deleteIfSwapped(c->db,key)",
          "old_line_content": "            incrRefCount(val);",
          "new_line_content": "            if (server.vm_enabled && deleteIfSwapped(c->db,key))",
          "content_same": false
        },
        {
          "line": 4159,
          "old_api": "addReply",
          "new_api": "dictReplace",
          "old_text": "addReply(c,shared.czero)",
          "new_text": "dictReplace(c->db->dict,key,val)",
          "old_line_content": "            addReply(c,shared.czero);",
          "new_line_content": "            dictReplace(c->db->dict,key,val);",
          "content_same": false
        },
        {
          "line": 4167,
          "old_api": "removeExpire",
          "new_api": "incrRefCount",
          "old_text": "removeExpire(c->db,key)",
          "new_text": "incrRefCount(val)",
          "old_line_content": "    removeExpire(c->db,key);",
          "new_line_content": "        incrRefCount(val);",
          "content_same": false
        },
        {
          "line": 4194,
          "old_api": "addReplyBulk",
          "new_api": "addReply",
          "old_text": "addReplyBulk(c,o)",
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "        addReplyBulk(c,o);",
          "new_line_content": "        addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 4208,
          "old_api": "incrRefCount",
          "new_api": "dictAdd",
          "old_text": "incrRefCount(c->argv[1])",
          "new_text": "dictAdd(c->db->dict,c->argv[1],c->argv[2])",
          "old_line_content": "        incrRefCount(c->argv[1]);",
          "new_line_content": "    if (dictAdd(c->db->dict,c->argv[1],c->argv[2]) == DICT_ERR) {",
          "content_same": false
        },
        {
          "line": 4260,
          "old_api": "dictReplace",
          "new_api": "tryObjectEncoding",
          "old_text": "dictReplace(c->db->dict,c->argv[j],c->argv[j+1])",
          "new_text": "tryObjectEncoding(c->argv[j+1])",
          "old_line_content": "            dictReplace(c->db->dict,c->argv[j],c->argv[j+1]);",
          "new_line_content": "        c->argv[j+1] = tryObjectEncoding(c->argv[j+1]);",
          "content_same": false
        },
        {
          "line": 4261,
          "old_api": "incrRefCount",
          "new_api": "dictAdd",
          "old_text": "incrRefCount(c->argv[j+1])",
          "new_text": "dictAdd(c->db->dict,c->argv[j],c->argv[j+1])",
          "old_line_content": "            incrRefCount(c->argv[j+1]);",
          "new_line_content": "        retval = dictAdd(c->db->dict,c->argv[j],c->argv[j+1]);",
          "content_same": false
        },
        {
          "line": 4263,
          "old_api": "incrRefCount",
          "new_api": "dictReplace",
          "old_text": "incrRefCount(c->argv[j])",
          "new_text": "dictReplace(c->db->dict,c->argv[j],c->argv[j+1])",
          "old_line_content": "            incrRefCount(c->argv[j]);",
          "new_line_content": "            dictReplace(c->db->dict,c->argv[j],c->argv[j+1]);",
          "content_same": false
        },
        {
          "line": 4266,
          "old_api": "removeExpire",
          "new_api": "incrRefCount",
          "old_text": "removeExpire(c->db,c->argv[j])",
          "new_text": "incrRefCount(c->argv[j])",
          "old_line_content": "        removeExpire(c->db,c->argv[j]);",
          "new_line_content": "            incrRefCount(c->argv[j]);",
          "content_same": false
        },
        {
          "line": 4269,
          "old_api": "addReply",
          "new_api": "removeExpire",
          "old_text": "addReply(c, nx ? shared.cone : shared.ok)",
          "new_text": "removeExpire(c->db,c->argv[j])",
          "old_line_content": "    addReply(c, nx ? shared.cone : shared.ok);",
          "new_line_content": "        removeExpire(c->db,c->argv[j]);",
          "content_same": false
        },
        {
          "line": 4290,
          "old_api": "sdsempty",
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": "sdsempty()",
          "new_text": "getLongLongFromObjectOrReply(c,o,&value,NULL)",
          "old_line_content": "    o = createObject(REDIS_STRING,sdscatprintf(sdsempty(),\"%lld\",value));",
          "new_line_content": "    if (getLongLongFromObjectOrReply(c,o,&value,NULL) != REDIS_OK) return;",
          "content_same": false
        },
        {
          "line": 4294,
          "old_api": "dictReplace",
          "new_api": "tryObjectEncoding",
          "old_text": "dictReplace(c->db->dict,c->argv[1],o)",
          "new_text": "tryObjectEncoding(o)",
          "old_line_content": "        dictReplace(c->db->dict,c->argv[1],o);",
          "new_line_content": "    o = tryObjectEncoding(o);",
          "content_same": false
        },
        {
          "line": 4295,
          "old_api": "removeExpire",
          "new_api": "dictAdd",
          "old_text": "removeExpire(c->db,c->argv[1])",
          "new_text": "dictAdd(c->db->dict,c->argv[1],o)",
          "old_line_content": "        removeExpire(c->db,c->argv[1]);",
          "new_line_content": "    retval = dictAdd(c->db->dict,c->argv[1],o);",
          "content_same": false
        },
        {
          "line": 4297,
          "old_api": "incrRefCount",
          "new_api": "dictReplace",
          "old_text": "incrRefCount(c->argv[1])",
          "new_text": "dictReplace(c->db->dict,c->argv[1],o)",
          "old_line_content": "        incrRefCount(c->argv[1]);",
          "new_line_content": "        dictReplace(c->db->dict,c->argv[1],o);",
          "content_same": false
        },
        {
          "line": 4300,
          "old_api": "addReply",
          "new_api": "incrRefCount",
          "old_text": "addReply(c,shared.colon)",
          "new_text": "incrRefCount(c->argv[1])",
          "old_line_content": "    addReply(c,shared.colon);",
          "new_line_content": "        incrRefCount(c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4335,
          "old_api": "dictAdd",
          "new_api": "lookupKeyWrite",
          "old_text": "dictAdd(c->db->dict,c->argv[1],c->argv[2])",
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "        retval = dictAdd(c->db->dict,c->argv[1],c->argv[2]);",
          "new_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4338,
          "old_api": "stringObjectLen",
          "new_api": "dictAdd",
          "old_text": "stringObjectLen(c->argv[2])",
          "new_text": "dictAdd(c->db->dict,c->argv[1],c->argv[2])",
          "old_line_content": "        totlen = stringObjectLen(c->argv[2]);",
          "new_line_content": "        retval = dictAdd(c->db->dict,c->argv[1],c->argv[2]);",
          "content_same": false
        },
        {
          "line": 4345,
          "old_api": "dictGetEntryVal",
          "new_api": "dictFind",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "dictFind(c->db->dict,c->argv[1])",
          "old_line_content": "        o = dictGetEntryVal(de);",
          "new_line_content": "        de = dictFind(c->db->dict,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4356,
          "old_api": "decrRefCount",
          "new_api": "getDecodedObject",
          "old_text": "decrRefCount(decoded)",
          "new_text": "getDecodedObject(o)",
          "old_line_content": "            decrRefCount(decoded);",
          "new_line_content": "            robj *decoded = getDecodedObject(o);",
          "content_same": false
        },
        {
          "line": 4364,
          "old_api": "sdscatprintf",
          "new_api": "sdscatlen",
          "old_text": "sdscatprintf(o->ptr, \"%ld\",\n                (unsigned long) c->argv[2]->ptr)",
          "new_text": "sdscatlen(o->ptr,\n                c->argv[2]->ptr, sdslen(c->argv[2]->ptr))",
          "old_line_content": "            o->ptr = sdscatprintf(o->ptr, \"%ld\",",
          "new_line_content": "            o->ptr = sdscatlen(o->ptr,",
          "content_same": false
        },
        {
          "line": 4367,
          "old_api": "sdslen",
          "new_api": "sdscatprintf",
          "old_text": "sdslen(o->ptr)",
          "new_text": "sdscatprintf(o->ptr, \"%ld\",\n                (unsigned long) c->argv[2]->ptr)",
          "old_line_content": "        totlen = sdslen(o->ptr);",
          "new_line_content": "            o->ptr = sdscatprintf(o->ptr, \"%ld\",",
          "content_same": false
        },
        {
          "line": 4370,
          "old_api": "sdsempty",
          "new_api": "sdslen",
          "old_text": "sdsempty()",
          "new_text": "sdslen(o->ptr)",
          "old_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\":%lu\\r\\n\",(unsigned long)totlen));",
          "new_line_content": "        totlen = sdslen(o->ptr);",
          "content_same": false
        },
        {
          "line": 4383,
          "old_api": "getDecodedObject",
          "new_api": "lookupKeyReadOrReply",
          "old_text": "getDecodedObject(o)",
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)",
          "old_line_content": "    o = getDecodedObject(o);",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "content_same": false
        },
        {
          "line": 4384,
          "old_api": "sdslen",
          "new_api": "checkType",
          "old_text": "sdslen(o->ptr)",
          "new_text": "checkType(c,o,REDIS_STRING)",
          "old_line_content": "    strlen = sdslen(o->ptr);",
          "new_line_content": "        checkType(c,o,REDIS_STRING)) return;",
          "content_same": false
        },
        {
          "line": 4406,
          "old_api": "addReply",
          "new_api": "sdsempty",
          "old_text": "addReply(c,shared.crlf)",
          "new_text": "sdsempty()",
          "old_line_content": "    addReply(c,shared.crlf);",
          "new_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"$%zu\\r\\n\",rangelen));",
          "content_same": false
        },
        {
          "line": 4407,
          "old_api": "decrRefCount",
          "new_api": "sdsnewlen",
          "old_text": "decrRefCount(o)",
          "new_text": "sdsnewlen((char*)o->ptr+start,rangelen)",
          "old_line_content": "    decrRefCount(o);",
          "new_line_content": "    range = sdsnewlen((char*)o->ptr+start,rangelen);",
          "content_same": false
        },
        {
          "line": 4432,
          "old_api": "sdsnew",
          "new_api": "atoi",
          "old_text": "sdsnew(\"-ERR invalid DB index\\r\\n\")",
          "new_text": "atoi(c->argv[1]->ptr)",
          "old_line_content": "        addReplySds(c,sdsnew(\"-ERR invalid DB index\\r\\n\"));",
          "new_line_content": "    int id = atoi(c->argv[1]->ptr);",
          "content_same": false
        },
        {
          "line": 4434,
          "old_api": "addReply",
          "new_api": "selectDb",
          "old_text": "addReply(c,shared.ok)",
          "new_text": "selectDb(c,id)",
          "old_line_content": "        addReply(c,shared.ok);",
          "new_line_content": "    if (selectDb(c,id) == REDIS_ERR) {",
          "content_same": false
        },
        {
          "line": 4455,
          "old_api": "addReplyBulk",
          "new_api": "dictGetEntryKey",
          "old_text": "addReplyBulk(c,key)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "        addReplyBulk(c,key);",
          "new_line_content": "    key = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 4471,
          "old_api": "addReply",
          "new_api": "createObject",
          "old_text": "addReply(c,lenobj)",
          "new_text": "createObject(REDIS_STRING,NULL)",
          "old_line_content": "    addReply(c,lenobj);",
          "new_line_content": "    robj *lenobj = createObject(REDIS_STRING,NULL);",
          "content_same": false
        },
        {
          "line": 4473,
          "old_api": "dictNext",
          "new_api": "dictGetIterator",
          "old_text": "dictNext(di)",
          "new_text": "dictGetIterator(c->db->dict)",
          "old_line_content": "    while((de = dictNext(di)) != NULL) {",
          "new_line_content": "    di = dictGetIterator(c->db->dict);",
          "content_same": false
        },
        {
          "line": 4474,
          "old_api": "dictGetEntryKey",
          "new_api": "addReply",
          "old_text": "dictGetEntryKey(de)",
          "new_text": "addReply(c,lenobj)",
          "old_line_content": "        robj *keyobj = dictGetEntryKey(de);",
          "new_line_content": "    addReply(c,lenobj);",
          "content_same": false
        },
        {
          "line": 4525,
          "old_api": "rdbSave",
          "new_api": "sdsnew",
          "old_text": "rdbSave(server.dbfilename)",
          "new_text": "sdsnew(\"-ERR background save in progress\\r\\n\")",
          "old_line_content": "    if (rdbSave(server.dbfilename) == REDIS_OK) {",
          "new_line_content": "        addReplySds(c,sdsnew(\"-ERR background save in progress\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 4528,
          "old_api": "addReply",
          "new_api": "rdbSave",
          "old_text": "addReply(c,shared.err)",
          "new_text": "rdbSave(server.dbfilename)",
          "old_line_content": "        addReply(c,shared.err);",
          "new_line_content": "    if (rdbSave(server.dbfilename) == REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 4537,
          "old_api": "rdbSaveBackground",
          "new_api": "sdsnew",
          "old_text": "rdbSaveBackground(server.dbfilename)",
          "new_text": "sdsnew(\"-ERR background save already in progress\\r\\n\")",
          "old_line_content": "    if (rdbSaveBackground(server.dbfilename) == REDIS_OK) {",
          "new_line_content": "        addReplySds(c,sdsnew(\"-ERR background save already in progress\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 4562,
          "old_api": "rdbSave",
          "new_api": "exit",
          "old_text": "rdbSave(server.dbfilename)",
          "new_text": "exit(0)",
          "old_line_content": "        if (rdbSave(server.dbfilename) == REDIS_OK) {",
          "new_line_content": "        exit(0);",
          "content_same": false
        },
        {
          "line": 4565,
          "old_api": "zmalloc_used_memory",
          "new_api": "rdbSave",
          "old_text": "zmalloc_used_memory()",
          "new_text": "rdbSave(server.dbfilename)",
          "old_line_content": "            redisLog(REDIS_WARNING,\"%zu bytes used at exit\",zmalloc_used_memory());",
          "new_line_content": "        if (rdbSave(server.dbfilename) == REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 4567,
          "old_api": "exit",
          "new_api": "unlink",
          "old_text": "exit(0)",
          "new_text": "unlink(server.pidfile)",
          "old_line_content": "            exit(0);",
          "new_line_content": "                unlink(server.pidfile);",
          "content_same": false
        },
        {
          "line": 4593,
          "old_api": "incrRefCount",
          "new_api": "lookupKeyWriteOrReply",
          "old_text": "incrRefCount(o)",
          "new_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.nokeyerr)",
          "old_line_content": "    incrRefCount(o);",
          "new_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.nokeyerr)) == NULL)",
          "content_same": false
        },
        {
          "line": 4597,
          "old_api": "decrRefCount",
          "new_api": "deleteIfVolatile",
          "old_text": "decrRefCount(o)",
          "new_text": "deleteIfVolatile(c->db,c->argv[2])",
          "old_line_content": "            decrRefCount(o);",
          "new_line_content": "    deleteIfVolatile(c->db,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 4598,
          "old_api": "addReply",
          "new_api": "dictAdd",
          "old_text": "addReply(c,shared.czero)",
          "new_text": "dictAdd(c->db->dict,c->argv[2],o)",
          "old_line_content": "            addReply(c,shared.czero);",
          "new_line_content": "    if (dictAdd(c->db->dict,c->argv[2],o) == DICT_ERR) {",
          "content_same": false
        },
        {
          "line": 4601,
          "old_api": "dictReplace",
          "new_api": "addReply",
          "old_text": "dictReplace(c->db->dict,c->argv[2],o)",
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "        dictReplace(c->db->dict,c->argv[2],o);",
          "new_line_content": "            addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 4653,
          "old_api": "incrRefCount",
          "new_api": "addReply",
          "old_text": "incrRefCount(c->argv[1])",
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "    incrRefCount(c->argv[1]);",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 4657,
          "old_api": "deleteKey",
          "new_api": "incrRefCount",
          "old_text": "deleteKey(src,c->argv[1])",
          "new_text": "incrRefCount(o)",
          "old_line_content": "    deleteKey(src,c->argv[1]);",
          "new_line_content": "    incrRefCount(o);",
          "content_same": false
        },
        {
          "line": 4670,
          "old_api": "addReply",
          "new_api": "lookupKeyWrite",
          "old_text": "addReply(c,shared.cone)",
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "            addReply(c,shared.cone);",
          "new_line_content": "    lobj = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4673,
          "old_api": "createListObject",
          "new_api": "addReply",
          "old_text": "createListObject()",
          "new_text": "addReply(c,shared.cone)",
          "old_line_content": "        lobj = createListObject();",
          "new_line_content": "            addReply(c,shared.cone);",
          "content_same": false
        },
        {
          "line": 4676,
          "old_api": "listAddNodeHead",
          "new_api": "createListObject",
          "old_text": "listAddNodeHead(list,c->argv[2])",
          "new_text": "createListObject()",
          "old_line_content": "            listAddNodeHead(list,c->argv[2]);",
          "new_line_content": "        lobj = createListObject();",
          "content_same": false
        },
        {
          "line": 4681,
          "old_api": "incrRefCount",
          "new_api": "listAddNodeTail",
          "old_text": "incrRefCount(c->argv[1])",
          "new_text": "listAddNodeTail(list,c->argv[2])",
          "old_line_content": "        incrRefCount(c->argv[1]);",
          "new_line_content": "            listAddNodeTail(list,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 4685,
          "old_api": "addReply",
          "new_api": "incrRefCount",
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": "incrRefCount(c->argv[2])",
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "        incrRefCount(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 4688,
          "old_api": "handleClientsWaitingListPush",
          "new_api": "addReply",
          "old_text": "handleClientsWaitingListPush(c,c->argv[1],c->argv[2])",
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "        if (handleClientsWaitingListPush(c,c->argv[1],c->argv[2])) {",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 4701,
          "old_api": "listLength",
          "new_api": "incrRefCount",
          "old_text": "listLength(list)",
          "new_text": "incrRefCount(c->argv[2])",
          "old_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\":%d\\r\\n\",listLength(list)));",
          "new_line_content": "        incrRefCount(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 4720,
          "old_api": "listLength",
          "new_api": "checkType",
          "old_text": "listLength(l)",
          "new_text": "checkType(c,o,REDIS_LIST)",
          "old_line_content": "    addReplyUlong(c,listLength(l));",
          "new_line_content": "        checkType(c,o,REDIS_LIST)) return;",
          "content_same": false
        },
        {
          "line": 4733,
          "old_api": "listIndex",
          "new_api": "checkType",
          "old_text": "listIndex(list, index)",
          "new_text": "checkType(c,o,REDIS_LIST)",
          "old_line_content": "    ln = listIndex(list, index);",
          "new_line_content": "        checkType(c,o,REDIS_LIST)) return;",
          "content_same": false
        },
        {
          "line": 4738,
          "old_api": "addReplyBulk",
          "new_api": "addReply",
          "old_text": "addReplyBulk(c,ele)",
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "        addReplyBulk(c,ele);",
          "new_line_content": "        addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 4752,
          "old_api": "listIndex",
          "new_api": "checkType",
          "old_text": "listIndex(list, index)",
          "new_text": "checkType(c,o,REDIS_LIST)",
          "old_line_content": "    ln = listIndex(list, index);",
          "new_line_content": "        checkType(c,o,REDIS_LIST)) return;",
          "content_same": false
        },
        {
          "line": 4761,
          "old_api": "addReply",
          "new_api": "decrRefCount",
          "old_text": "addReply(c,shared.ok)",
          "new_text": "decrRefCount(ele)",
          "old_line_content": "        addReply(c,shared.ok);",
          "new_line_content": "        decrRefCount(ele);",
          "content_same": false
        },
        {
          "line": 4781,
          "old_api": "addReply",
          "new_api": "listLast",
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": "listLast(list)",
          "old_line_content": "        addReply(c,shared.nullbulk);",
          "new_line_content": "        ln = listLast(list);",
          "content_same": false
        },
        {
          "line": 4784,
          "old_api": "addReplyBulk",
          "new_api": "addReply",
          "old_text": "addReplyBulk(c,ele)",
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "        addReplyBulk(c,ele);",
          "new_line_content": "        addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 4786,
          "old_api": "deleteKey",
          "new_api": "listNodeValue",
          "old_text": "deleteKey(c->db,c->argv[1])",
          "new_text": "listNodeValue(ln)",
          "old_line_content": "        if (listLength(list) == 0) deleteKey(c->db,c->argv[1]);",
          "new_line_content": "        robj *ele = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 4812,
          "old_api": "listLength",
          "new_api": "lookupKeyReadOrReply",
          "old_text": "listLength(list)",
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.emptymultibulk)",
          "old_line_content": "    llen = listLength(list);",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.emptymultibulk)) == NULL",
          "content_same": false
        },
        {
          "line": 4833,
          "old_api": "listNodeValue",
          "new_api": "listIndex",
          "old_text": "listNodeValue(ln)",
          "new_text": "listIndex(list, start)",
          "old_line_content": "        ele = listNodeValue(ln);",
          "new_line_content": "    ln = listIndex(list, start);",
          "content_same": false
        },
        {
          "line": 4834,
          "old_api": "addReplyBulk",
          "new_api": "sdsempty",
          "old_text": "addReplyBulk(c,ele)",
          "new_text": "sdsempty()",
          "old_line_content": "        addReplyBulk(c,ele);",
          "new_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",rangelen));",
          "content_same": false
        },
        {
          "line": 4851,
          "old_api": "listLength",
          "new_api": "lookupKeyWriteOrReply",
          "old_text": "listLength(list)",
          "new_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.ok)",
          "old_line_content": "    llen = listLength(list);",
          "new_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.ok)) == NULL ||",
          "content_same": false
        },
        {
          "line": 4876,
          "old_api": "listLast",
          "new_api": "listDelNode",
          "old_text": "listLast(list)",
          "new_text": "listDelNode(list,ln)",
          "old_line_content": "        ln = listLast(list);",
          "new_line_content": "        listDelNode(list,ln);",
          "content_same": false
        },
        {
          "line": 4879,
          "old_api": "deleteKey",
          "new_api": "listLast",
          "old_text": "deleteKey(c->db,c->argv[1])",
          "new_text": "listLast(list)",
          "old_line_content": "    if (listLength(list) == 0) deleteKey(c->db,c->argv[1]);",
          "new_line_content": "        ln = listLast(list);",
          "content_same": false
        },
        {
          "line": 4905,
          "old_api": "equalStringObjects",
          "new_api": "listNodeValue",
          "old_text": "equalStringObjects(ele,c->argv[3])",
          "new_text": "listNodeValue(ln)",
          "old_line_content": "        if (equalStringObjects(ele,c->argv[3])) {",
          "new_line_content": "        robj *ele = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 4940,
          "old_api": "listLast",
          "new_api": "lookupKeyWriteOrReply",
          "old_text": "listLast(srclist)",
          "new_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.nullbulk)",
          "old_line_content": "    ln = listLast(srclist);",
          "new_line_content": "    if ((sobj = lookupKeyWriteOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "content_same": false
        },
        {
          "line": 4943,
          "old_api": "addReply",
          "new_api": "listLast",
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": "listLast(srclist)",
          "old_line_content": "        addReply(c,shared.nullbulk);",
          "new_line_content": "    ln = listLast(srclist);",
          "content_same": false
        },
        {
          "line": 4946,
          "old_api": "listNodeValue",
          "new_api": "addReply",
          "old_text": "listNodeValue(ln)",
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "        robj *ele = listNodeValue(ln);",
          "new_line_content": "        addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 4959,
          "old_api": "createListObject",
          "new_api": "handleClientsWaitingListPush",
          "old_text": "createListObject()",
          "new_text": "handleClientsWaitingListPush(c,c->argv[2],ele)",
          "old_line_content": "                dobj = createListObject();",
          "new_line_content": "        if (!handleClientsWaitingListPush(c,c->argv[2],ele)) {",
          "content_same": false
        },
        {
          "line": 4964,
          "old_api": "listAddNodeHead",
          "new_api": "incrRefCount",
          "old_text": "listAddNodeHead(dstlist,ele)",
          "new_text": "incrRefCount(c->argv[2])",
          "old_line_content": "            listAddNodeHead(dstlist,ele);",
          "new_line_content": "                incrRefCount(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 4972,
          "old_api": "listDelNode",
          "new_api": "addReplyBulk",
          "old_text": "listDelNode(srclist,ln)",
          "new_text": "addReplyBulk(c,ele)",
          "old_line_content": "        listDelNode(srclist,ln);",
          "new_line_content": "        addReplyBulk(c,ele);",
          "content_same": false
        },
        {
          "line": 4986,
          "old_api": "dictAdd",
          "new_api": "lookupKeyWrite",
          "old_text": "dictAdd(c->db->dict,c->argv[1],set)",
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "        dictAdd(c->db->dict,c->argv[1],set);",
          "new_line_content": "    set = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4990,
          "old_api": "addReply",
          "new_api": "incrRefCount",
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": "incrRefCount(c->argv[1])",
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "        incrRefCount(c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4997,
          "old_api": "addReply",
          "new_api": "dictAdd",
          "old_text": "addReply(c,shared.cone)",
          "new_text": "dictAdd(set->ptr,c->argv[2],NULL)",
          "old_line_content": "        addReply(c,shared.cone);",
          "new_line_content": "    if (dictAdd(set->ptr,c->argv[2],NULL) == DICT_OK) {",
          "content_same": false
        },
        {
          "line": 5009,
          "old_api": "dictDelete",
          "new_api": "lookupKeyWriteOrReply",
          "old_text": "dictDelete(set->ptr,c->argv[2])",
          "new_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.czero)",
          "old_line_content": "    if (dictDelete(set->ptr,c->argv[2]) == DICT_OK) {",
          "new_line_content": "    if ((set = lookupKeyWriteOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "content_same": false
        },
        {
          "line": 5012,
          "old_api": "deleteKey",
          "new_api": "dictDelete",
          "old_text": "deleteKey(c->db,c->argv[1])",
          "new_text": "dictDelete(set->ptr,c->argv[2])",
          "old_line_content": "        if (dictSize((dict*)set->ptr) == 0) deleteKey(c->db,c->argv[1]);",
          "new_line_content": "    if (dictDelete(set->ptr,c->argv[2]) == DICT_OK) {",
          "content_same": false
        },
        {
          "line": 5015,
          "old_api": "addReply",
          "new_api": "deleteKey",
          "old_text": "addReply(c,shared.czero)",
          "new_text": "deleteKey(c->db,c->argv[1])",
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "        if (dictSize((dict*)set->ptr) == 0) deleteKey(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 5042,
          "old_api": "dictSize",
          "new_api": "addReply",
          "old_text": "dictSize((dict*)srcset->ptr)",
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "    if (dictSize((dict*)srcset->ptr) == 0 && srcset != dstset)",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 5062,
          "old_api": "dictFind",
          "new_api": "lookupKeyReadOrReply",
          "old_text": "dictFind(set->ptr,c->argv[2])",
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "old_line_content": "    if (dictFind(set->ptr,c->argv[2]))",
          "new_line_content": "    if ((set = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "content_same": false
        },
        {
          "line": 5063,
          "old_api": "addReply",
          "new_api": "checkType",
          "old_text": "addReply(c,shared.cone)",
          "new_text": "checkType(c,set,REDIS_SET)",
          "old_line_content": "        addReply(c,shared.cone);",
          "new_line_content": "        checkType(c,set,REDIS_SET)) return;",
          "content_same": false
        },
        {
          "line": 5065,
          "old_api": "addReply",
          "new_api": "dictFind",
          "old_text": "addReply(c,shared.czero)",
          "new_text": "dictFind(set->ptr,c->argv[2])",
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "    if (dictFind(set->ptr,c->argv[2]))",
          "content_same": false
        },
        {
          "line": 5076,
          "old_api": "dictSize",
          "new_api": "checkType",
          "old_text": "dictSize(s)",
          "new_text": "checkType(c,o,REDIS_SET)",
          "old_line_content": "    addReplyUlong(c,dictSize(s));",
          "new_line_content": "        checkType(c,o,REDIS_SET)) return;",
          "content_same": false
        },
        {
          "line": 5086,
          "old_api": "dictGetRandomKey",
          "new_api": "lookupKeyWriteOrReply",
          "old_text": "dictGetRandomKey(set->ptr)",
          "new_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.nullbulk)",
          "old_line_content": "    de = dictGetRandomKey(set->ptr);",
          "new_line_content": "    if ((set = lookupKeyWriteOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "content_same": false
        },
        {
          "line": 5093,
          "old_api": "dictDelete",
          "new_api": "dictGetEntryKey",
          "old_text": "dictDelete(set->ptr,ele)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "        dictDelete(set->ptr,ele);",
          "new_line_content": "        robj *ele = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 5095,
          "old_api": "deleteKey",
          "new_api": "addReplyBulk",
          "old_text": "deleteKey(c->db,c->argv[1])",
          "new_text": "addReplyBulk(c,ele)",
          "old_line_content": "        if (dictSize((dict*)set->ptr) == 0) deleteKey(c->db,c->argv[1]);",
          "new_line_content": "        addReplyBulk(c,ele);",
          "content_same": false
        },
        {
          "line": 5107,
          "old_api": "dictGetRandomKey",
          "new_api": "lookupKeyReadOrReply",
          "old_text": "dictGetRandomKey(set->ptr)",
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)",
          "old_line_content": "    de = dictGetRandomKey(set->ptr);",
          "new_line_content": "    if ((set = lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "content_same": false
        },
        {
          "line": 5137,
          "old_api": "zfree",
          "new_api": "lookupKeyWrite",
          "old_text": "zfree(dv)",
          "new_text": "lookupKeyWrite(c->db,setskeys[j])",
          "old_line_content": "            zfree(dv);",
          "new_line_content": "                    lookupKeyWrite(c->db,setskeys[j]) :",
          "content_same": false
        },
        {
          "line": 5190,
          "old_api": "dictAdd",
          "new_api": "addReplyBulk",
          "old_text": "dictAdd(dstset->ptr,ele,NULL)",
          "new_text": "addReplyBulk(c,ele)",
          "old_line_content": "            dictAdd(dstset->ptr,ele,NULL);",
          "new_line_content": "            addReplyBulk(c,ele);",
          "content_same": false
        },
        {
          "line": 5194,
          "old_api": "dictReleaseIterator",
          "new_api": "incrRefCount",
          "old_text": "dictReleaseIterator(di)",
          "new_text": "incrRefCount(ele)",
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "            incrRefCount(ele);",
          "content_same": false
        },
        {
          "line": 5202,
          "old_api": "incrRefCount",
          "new_api": "deleteKey",
          "old_text": "incrRefCount(dstkey)",
          "new_text": "deleteKey(c->db,dstkey)",
          "old_line_content": "            incrRefCount(dstkey);",
          "new_line_content": "        deleteKey(c->db,dstkey);",
          "content_same": false
        },
        {
          "line": 5205,
          "old_api": "decrRefCount",
          "new_api": "incrRefCount",
          "old_text": "decrRefCount(dstset)",
          "new_text": "incrRefCount(dstkey)",
          "old_line_content": "            decrRefCount(dstset);",
          "new_line_content": "            incrRefCount(dstkey);",
          "content_same": false
        },
        {
          "line": 5206,
          "old_api": "addReply",
          "new_api": "dictSize",
          "old_text": "addReply(c,shared.czero)",
          "new_text": "dictSize((dict*)dstset->ptr)",
          "old_line_content": "            addReply(c,shared.czero);",
          "new_line_content": "            addReplyLong(c,dictSize((dict*)dstset->ptr));",
          "content_same": false
        },
        {
          "line": 5272,
          "old_api": "incrRefCount",
          "new_api": "dictGetEntryKey",
          "old_text": "incrRefCount(ele)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "                    incrRefCount(ele);",
          "new_line_content": "            ele = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 5294,
          "old_api": "dictGetEntryKey",
          "new_api": "dictNext",
          "old_text": "dictGetEntryKey(de)",
          "new_text": "dictNext(di)",
          "old_line_content": "            ele = dictGetEntryKey(de);",
          "new_line_content": "        while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 5297,
          "old_api": "dictReleaseIterator",
          "new_api": "dictGetEntryKey",
          "old_text": "dictReleaseIterator(di)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "        dictReleaseIterator(di);",
          "new_line_content": "            ele = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 5298,
          "old_api": "decrRefCount",
          "new_api": "addReplyBulk",
          "old_text": "decrRefCount(dstset)",
          "new_text": "addReplyBulk(c,ele)",
          "old_line_content": "        decrRefCount(dstset);",
          "new_line_content": "            addReplyBulk(c,ele);",
          "content_same": false
        },
        {
          "line": 5305,
          "old_api": "incrRefCount",
          "new_api": "deleteKey",
          "old_text": "incrRefCount(dstkey)",
          "new_text": "deleteKey(c->db,dstkey)",
          "old_line_content": "            incrRefCount(dstkey);",
          "new_line_content": "        deleteKey(c->db,dstkey);",
          "content_same": false
        },
        {
          "line": 5308,
          "old_api": "decrRefCount",
          "new_api": "incrRefCount",
          "old_text": "decrRefCount(dstset)",
          "new_text": "incrRefCount(dstkey)",
          "old_line_content": "            decrRefCount(dstset);",
          "new_line_content": "            incrRefCount(dstkey);",
          "content_same": false
        },
        {
          "line": 5309,
          "old_api": "addReply",
          "new_api": "dictSize",
          "old_text": "addReply(c,shared.czero)",
          "new_text": "dictSize((dict*)dstset->ptr)",
          "old_line_content": "            addReply(c,shared.czero);",
          "new_line_content": "            addReplyLong(c,dictSize((dict*)dstset->ptr));",
          "content_same": false
        },
        {
          "line": 5369,
          "old_api": "zslCreateNode",
          "new_api": "zmalloc",
          "old_text": "zslCreateNode(ZSKIPLIST_MAXLEVEL,0,NULL)",
          "new_text": "zmalloc(sizeof(*zsl))",
          "old_line_content": "    zsl->header = zslCreateNode(ZSKIPLIST_MAXLEVEL,0,NULL);",
          "new_line_content": "    zsl = zmalloc(sizeof(*zsl));",
          "content_same": false
        },
        {
          "line": 5386,
          "old_api": "zfree",
          "new_api": "decrRefCount",
          "old_text": "zfree(node)",
          "new_text": "decrRefCount(node->obj)",
          "old_line_content": "    zfree(node);",
          "new_line_content": "    decrRefCount(node->obj);",
          "content_same": false
        },
        {
          "line": 5397,
          "old_api": "zslFreeNode",
          "new_api": "zfree",
          "old_text": "zslFreeNode(node)",
          "new_text": "zfree(zsl->header)",
          "old_line_content": "        zslFreeNode(node);",
          "new_line_content": "    zfree(zsl->header);",
          "content_same": false
        },
        {
          "line": 5400,
          "old_api": "zfree",
          "new_api": "zslFreeNode",
          "old_text": "zfree(zsl)",
          "new_text": "zslFreeNode(node)",
          "old_line_content": "    zfree(zsl);",
          "new_line_content": "        zslFreeNode(node);",
          "content_same": false
        },
        {
          "line": 5654,
          "old_api": "dictAdd",
          "new_api": "lookupKeyWrite",
          "old_text": "dictAdd(c->db->dict,key,zsetobj)",
          "new_text": "lookupKeyWrite(c->db,key)",
          "old_line_content": "        dictAdd(c->db->dict,key,zsetobj);",
          "new_line_content": "    zsetobj = lookupKeyWrite(c->db,key);",
          "content_same": false
        },
        {
          "line": 5658,
          "old_api": "addReply",
          "new_api": "incrRefCount",
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": "incrRefCount(key)",
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "        incrRefCount(key);",
          "content_same": false
        },
        {
          "line": 5688,
          "old_api": "zslInsert",
          "new_api": "dictAdd",
          "old_text": "zslInsert(zs->zsl,*score,ele)",
          "new_text": "dictAdd(zs->dict,ele,score)",
          "old_line_content": "        zslInsert(zs->zsl,*score,ele);",
          "new_line_content": "    if (dictAdd(zs->dict,ele,score) == DICT_OK) {",
          "content_same": false
        },
        {
          "line": 5692,
          "old_api": "addReplyDouble",
          "new_api": "incrRefCount",
          "old_text": "addReplyDouble(c,*score)",
          "new_text": "incrRefCount(ele)",
          "old_line_content": "            addReplyDouble(c,*score);",
          "new_line_content": "        incrRefCount(ele); /* added to skiplist */",
          "content_same": false
        },
        {
          "line": 5710,
          "old_api": "incrRefCount",
          "new_api": "zslDelete",
          "old_text": "incrRefCount(ele)",
          "new_text": "zslDelete(zs->zsl,*oldscore,ele)",
          "old_line_content": "            incrRefCount(ele);",
          "new_line_content": "            deleted = zslDelete(zs->zsl,*oldscore,ele);",
          "content_same": false
        },
        {
          "line": 5712,
          "old_api": "dictReplace",
          "new_api": "zslInsert",
          "old_text": "dictReplace(zs->dict,ele,score)",
          "new_text": "zslInsert(zs->zsl,*score,ele)",
          "old_line_content": "            dictReplace(zs->dict,ele,score);",
          "new_line_content": "            zslInsert(zs->zsl,*score,ele);",
          "content_same": false
        },
        {
          "line": 5715,
          "old_api": "zfree",
          "new_api": "dictReplace",
          "old_text": "zfree(score)",
          "new_text": "dictReplace(zs->dict,ele,score)",
          "old_line_content": "            zfree(score);",
          "new_line_content": "            dictReplace(zs->dict,ele,score);",
          "content_same": false
        },
        {
          "line": 5718,
          "old_api": "addReplyDouble",
          "new_api": "zfree",
          "old_text": "addReplyDouble(c,*score)",
          "new_text": "zfree(score)",
          "old_line_content": "            addReplyDouble(c,*score);",
          "new_line_content": "            zfree(score);",
          "content_same": false
        },
        {
          "line": 5749,
          "old_api": "dictFind",
          "new_api": "checkType",
          "old_text": "dictFind(zs->dict,c->argv[2])",
          "new_text": "checkType(c,zsetobj,REDIS_ZSET)",
          "old_line_content": "    de = dictFind(zs->dict,c->argv[2]);",
          "new_line_content": "        checkType(c,zsetobj,REDIS_ZSET)) return;",
          "content_same": false
        },
        {
          "line": 5760,
          "old_api": "dictDelete",
          "new_api": "redisAssert",
          "old_text": "dictDelete(zs->dict,c->argv[2])",
          "new_text": "redisAssert(deleted != 0)",
          "old_line_content": "    dictDelete(zs->dict,c->argv[2]);",
          "new_line_content": "    redisAssert(deleted != 0);",
          "content_same": false
        },
        {
          "line": 5764,
          "old_api": "addReply",
          "new_api": "dictResize",
          "old_text": "addReply(c,shared.cone)",
          "new_text": "dictResize(zs->dict)",
          "old_line_content": "    addReply(c,shared.cone);",
          "new_line_content": "    if (htNeedsResize(zs->dict)) dictResize(zs->dict);",
          "content_same": false
        },
        {
          "line": 5777,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": "getDoubleFromObjectOrReply",
          "old_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.czero)",
          "new_text": "getDoubleFromObjectOrReply(c, c->argv[2], &min, NULL)",
          "old_line_content": "    if ((zsetobj = lookupKeyWriteOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "new_line_content": "    if ((getDoubleFromObjectOrReply(c, c->argv[2], &min, NULL) != REDIS_OK) ||",
          "content_same": false
        },
        {
          "line": 5778,
          "old_api": "checkType",
          "new_api": "getDoubleFromObjectOrReply",
          "old_text": "checkType(c,zsetobj,REDIS_ZSET)",
          "new_text": "getDoubleFromObjectOrReply(c, c->argv[3], &max, NULL)",
          "old_line_content": "        checkType(c,zsetobj,REDIS_ZSET)) return;",
          "new_line_content": "        (getDoubleFromObjectOrReply(c, c->argv[3], &max, NULL) != REDIS_OK)) return;",
          "content_same": false
        },
        {
          "line": 5781,
          "old_api": "zslDeleteRangeByScore",
          "new_api": "checkType",
          "old_text": "zslDeleteRangeByScore(zs->zsl,min,max,zs->dict)",
          "new_text": "checkType(c,zsetobj,REDIS_ZSET)",
          "old_line_content": "    deleted = zslDeleteRangeByScore(zs->zsl,min,max,zs->dict);",
          "new_line_content": "        checkType(c,zsetobj,REDIS_ZSET)) return;",
          "content_same": false
        },
        {
          "line": 5785,
          "old_api": "addReplyLong",
          "new_api": "dictResize",
          "old_text": "addReplyLong(c,deleted)",
          "new_text": "dictResize(zs->dict)",
          "old_line_content": "    addReplyLong(c,deleted);",
          "new_line_content": "    if (htNeedsResize(zs->dict)) dictResize(zs->dict);",
          "content_same": false
        },
        {
          "line": 5799,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": "getLongFromObjectOrReply",
          "old_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.czero)",
          "new_text": "getLongFromObjectOrReply(c, c->argv[2], &start, NULL)",
          "old_line_content": "    if ((zsetobj = lookupKeyWriteOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "new_line_content": "    if ((getLongFromObjectOrReply(c, c->argv[2], &start, NULL) != REDIS_OK) ||",
          "content_same": false
        },
        {
          "line": 5800,
          "old_api": "checkType",
          "new_api": "getLongFromObjectOrReply",
          "old_text": "checkType(c,zsetobj,REDIS_ZSET)",
          "new_text": "getLongFromObjectOrReply(c, c->argv[3], &end, NULL)",
          "old_line_content": "        checkType(c,zsetobj,REDIS_ZSET)) return;",
          "new_line_content": "        (getLongFromObjectOrReply(c, c->argv[3], &end, NULL) != REDIS_OK)) return;",
          "content_same": false
        },
        {
          "line": 5823,
          "old_api": "addReplyLong",
          "new_api": "dictResize",
          "old_text": "addReplyLong(c, deleted)",
          "new_text": "dictResize(zs->dict)",
          "old_line_content": "    addReplyLong(c, deleted);",
          "new_line_content": "    if (htNeedsResize(zs->dict)) dictResize(zs->dict);",
          "content_same": false
        },
        {
          "line": 5905,
          "old_api": "getDoubleFromObjectOrReply",
          "new_api": "strcasecmp",
          "old_text": "getDoubleFromObjectOrReply(c, c->argv[j], &src[i].weight, NULL)",
          "new_text": "strcasecmp(c->argv[j]->ptr,\"weights\")",
          "old_line_content": "                    if (getDoubleFromObjectOrReply(c, c->argv[j], &src[i].weight, NULL) != REDIS_OK)",
          "new_line_content": "            if (remaining >= (zsetnum + 1) && !strcasecmp(c->argv[j]->ptr,\"weights\")) {",
          "content_same": false
        },
        {
          "line": 5908,
          "old_api": "strcasecmp",
          "new_api": "getDoubleFromObjectOrReply",
          "old_text": "strcasecmp(c->argv[j]->ptr,\"aggregate\")",
          "new_text": "getDoubleFromObjectOrReply(c, c->argv[j], &src[i].weight, NULL)",
          "old_line_content": "            } else if (remaining >= 2 && !strcasecmp(c->argv[j]->ptr,\"aggregate\")) {",
          "new_line_content": "                    if (getDoubleFromObjectOrReply(c, c->argv[j], &src[i].weight, NULL) != REDIS_OK)",
          "content_same": false
        },
        {
          "line": 5917,
          "old_api": "zfree",
          "new_api": "strcasecmp",
          "old_text": "zfree(src)",
          "new_text": "strcasecmp(c->argv[j]->ptr,\"max\")",
          "old_line_content": "                    zfree(src);",
          "new_line_content": "                } else if (!strcasecmp(c->argv[j]->ptr,\"max\")) {",
          "content_same": false
        },
        {
          "line": 5942,
          "old_api": "dictGetIterator",
          "new_api": "dictSize",
          "old_text": "dictGetIterator(src[0].dict)",
          "new_text": "dictSize(src[0].dict)",
          "old_line_content": "            di = dictGetIterator(src[0].dict);",
          "new_line_content": "        if (src[0].dict && dictSize(src[0].dict) > 0) {",
          "content_same": false
        },
        {
          "line": 5945,
          "old_api": "dictGetEntryVal",
          "new_api": "dictGetIterator",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "dictGetIterator(src[0].dict)",
          "old_line_content": "                *score = src[0].weight * (*(double*)dictGetEntryVal(de));",
          "new_line_content": "            di = dictGetIterator(src[0].dict);",
          "content_same": false
        },
        {
          "line": 5948,
          "old_api": "dictGetEntryKey",
          "new_api": "dictGetEntryVal",
          "old_text": "dictGetEntryKey(de)",
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "                    dictEntry *other = dictFind(src[j].dict,dictGetEntryKey(de));",
          "new_line_content": "                *score = src[0].weight * (*(double*)dictGetEntryVal(de));",
          "content_same": false
        },
        {
          "line": 5951,
          "old_api": "zunionInterAggregate",
          "new_api": "dictGetEntryKey",
          "old_text": "zunionInterAggregate(score, value, aggregate)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "                        zunionInterAggregate(score, value, aggregate);",
          "new_line_content": "                    dictEntry *other = dictFind(src[j].dict,dictGetEntryKey(de));",
          "content_same": false
        },
        {
          "line": 5962,
          "old_api": "dictAdd",
          "new_api": "zfree",
          "old_text": "dictAdd(dstzset->dict,o,score)",
          "new_text": "zfree(score)",
          "old_line_content": "                    dictAdd(dstzset->dict,o,score);",
          "new_line_content": "                    zfree(score);",
          "content_same": false
        },
        {
          "line": 5964,
          "old_api": "zslInsert",
          "new_api": "dictGetEntryKey",
          "old_text": "zslInsert(dstzset->zsl,*score,o)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "                    zslInsert(dstzset->zsl,*score,o);",
          "new_line_content": "                    robj *o = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 5965,
          "old_api": "incrRefCount",
          "new_api": "dictAdd",
          "old_text": "incrRefCount(o)",
          "new_text": "dictAdd(dstzset->dict,o,score)",
          "old_line_content": "                    incrRefCount(o); /* added to skiplist */",
          "new_line_content": "                    dictAdd(dstzset->dict,o,score);",
          "content_same": false
        },
        {
          "line": 5968,
          "old_api": "dictReleaseIterator",
          "new_api": "incrRefCount",
          "old_text": "dictReleaseIterator(di)",
          "new_text": "incrRefCount(o)",
          "old_line_content": "            dictReleaseIterator(di);",
          "new_line_content": "                    incrRefCount(o); /* added to skiplist */",
          "content_same": false
        },
        {
          "line": 5977,
          "old_api": "dictGetEntryKey",
          "new_api": "dictGetIterator",
          "old_text": "dictGetEntryKey(de)",
          "new_text": "dictGetIterator(src[i].dict)",
          "old_line_content": "                if (dictFind(dstzset->dict,dictGetEntryKey(de)) != NULL) continue;",
          "new_line_content": "            di = dictGetIterator(src[i].dict);",
          "content_same": false
        },
        {
          "line": 5980,
          "old_api": "dictGetEntryVal",
          "new_api": "dictGetEntryKey",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "                *score = src[i].weight * (*(double*)dictGetEntryVal(de));",
          "new_line_content": "                if (dictFind(dstzset->dict,dictGetEntryKey(de)) != NULL) continue;",
          "content_same": false
        },
        {
          "line": 5988,
          "old_api": "zunionInterAggregate",
          "new_api": "dictGetEntryKey",
          "old_text": "zunionInterAggregate(score, value, aggregate)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "                        zunionInterAggregate(score, value, aggregate);",
          "new_line_content": "                    dictEntry *other = dictFind(src[j].dict,dictGetEntryKey(de));",
          "content_same": false
        },
        {
          "line": 5995,
          "old_api": "zslInsert",
          "new_api": "dictGetEntryKey",
          "old_text": "zslInsert(dstzset->zsl,*score,o)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "                zslInsert(dstzset->zsl,*score,o);",
          "new_line_content": "                robj *o = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 5996,
          "old_api": "incrRefCount",
          "new_api": "dictAdd",
          "old_text": "incrRefCount(o)",
          "new_text": "dictAdd(dstzset->dict,o,score)",
          "old_line_content": "                incrRefCount(o); /* added to skiplist */",
          "new_line_content": "                dictAdd(dstzset->dict,o,score);",
          "content_same": false
        },
        {
          "line": 5998,
          "old_api": "dictReleaseIterator",
          "new_api": "zslInsert",
          "old_text": "dictReleaseIterator(di)",
          "new_text": "zslInsert(dstzset->zsl,*score,o)",
          "old_line_content": "            dictReleaseIterator(di);",
          "new_line_content": "                zslInsert(dstzset->zsl,*score,o);",
          "content_same": false
        },
        {
          "line": 6005,
          "old_api": "deleteKey",
          "new_api": "redisAssert",
          "old_text": "deleteKey(c->db,dstkey)",
          "new_text": "redisAssert(op == REDIS_OP_INTER || op == REDIS_OP_UNION)",
          "old_line_content": "    deleteKey(c->db,dstkey);",
          "new_line_content": "        redisAssert(op == REDIS_OP_INTER || op == REDIS_OP_UNION);",
          "content_same": false
        },
        {
          "line": 6008,
          "old_api": "incrRefCount",
          "new_api": "deleteKey",
          "old_text": "incrRefCount(dstkey)",
          "new_text": "deleteKey(c->db,dstkey)",
          "old_line_content": "        incrRefCount(dstkey);",
          "new_line_content": "    deleteKey(c->db,dstkey);",
          "content_same": false
        },
        {
          "line": 6012,
          "old_api": "decrRefCount",
          "new_api": "addReplyLong",
          "old_text": "decrRefCount(dstobj)",
          "new_text": "addReplyLong(c, dstzset->zsl->length)",
          "old_line_content": "        decrRefCount(dstobj);",
          "new_line_content": "        addReplyLong(c, dstzset->zsl->length);",
          "content_same": false
        },
        {
          "line": 6015,
          "old_api": "zfree",
          "new_api": "decrRefCount",
          "old_text": "zfree(src)",
          "new_text": "decrRefCount(dstobj)",
          "old_line_content": "    zfree(src);",
          "new_line_content": "        decrRefCount(dstobj);",
          "content_same": false
        },
        {
          "line": 6041,
          "old_api": "strcasecmp",
          "new_api": "getLongFromObjectOrReply",
          "old_text": "strcasecmp(c->argv[4]->ptr,\"withscores\")",
          "new_text": "getLongFromObjectOrReply(c, c->argv[2], &start, NULL)",
          "old_line_content": "    if (c->argc == 5 && !strcasecmp(c->argv[4]->ptr,\"withscores\")) {",
          "new_line_content": "    if ((getLongFromObjectOrReply(c, c->argv[2], &start, NULL) != REDIS_OK) ||",
          "content_same": false
        },
        {
          "line": 6044,
          "old_api": "addReply",
          "new_api": "strcasecmp",
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": "strcasecmp(c->argv[4]->ptr,\"withscores\")",
          "old_line_content": "        addReply(c,shared.syntaxerr);",
          "new_line_content": "    if (c->argc == 5 && !strcasecmp(c->argv[4]->ptr,\"withscores\")) {",
          "content_same": false
        },
        {
          "line": 6147,
          "old_api": "atoi",
          "new_api": "addReply",
          "old_text": "atoi(c->argv[5]->ptr)",
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "        offset = atoi(c->argv[5]->ptr);",
          "new_line_content": "        addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 6230,
          "old_api": "addReplyUlong",
          "new_api": "checkType",
          "old_text": "addReplyUlong(c,zs->zsl->length)",
          "new_text": "checkType(c,o,REDIS_ZSET)",
          "old_line_content": "    addReplyUlong(c,zs->zsl->length);",
          "new_line_content": "        checkType(c,o,REDIS_ZSET)) return;",
          "content_same": false
        },
        {
          "line": 6242,
          "old_api": "dictFind",
          "new_api": "checkType",
          "old_text": "dictFind(zs->dict,c->argv[2])",
          "new_text": "checkType(c,o,REDIS_ZSET)",
          "old_line_content": "    de = dictFind(zs->dict,c->argv[2]);",
          "new_line_content": "        checkType(c,o,REDIS_ZSET)) return;",
          "content_same": false
        },
        {
          "line": 6275,
          "old_api": "addReplyLong",
          "new_api": "zslGetRank",
          "old_text": "addReplyLong(c, zsl->length - rank)",
          "new_text": "zslGetRank(zsl, *score, c->argv[2])",
          "old_line_content": "            addReplyLong(c, zsl->length - rank);",
          "new_line_content": "    rank = zslGetRank(zsl, *score, c->argv[2]);",
          "content_same": false
        },
        {
          "line": 6280,
          "old_api": "addReply",
          "new_api": "addReplyLong",
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": "addReplyLong(c, rank-1)",
          "old_line_content": "        addReply(c,shared.nullbulk);",
          "new_line_content": "            addReplyLong(c, rank-1);",
          "content_same": false
        },
        {
          "line": 6333,
          "old_api": "decrRefCount",
          "new_api": "sdslen",
          "old_text": "decrRefCount(key)",
          "new_text": "sdslen(key->ptr)",
          "old_line_content": "        decrRefCount(key);",
          "new_line_content": "        if (zipmapGet(o->ptr,key->ptr,sdslen(key->ptr),&v,&vlen)) {",
          "content_same": false
        },
        {
          "line": 6338,
          "old_api": "incrRefCount",
          "new_api": "dictFind",
          "old_text": "incrRefCount(value)",
          "new_text": "dictFind(o->ptr,key)",
          "old_line_content": "            incrRefCount(value);",
          "new_line_content": "        dictEntry *de = dictFind(o->ptr,key);",
          "content_same": false
        },
        {
          "line": 6370,
          "old_api": "sdslen",
          "new_api": "getDecodedObject",
          "old_text": "sdslen(key->ptr)",
          "new_text": "getDecodedObject(key)",
          "old_line_content": "            key->ptr,sdslen(key->ptr),",
          "new_line_content": "        key = getDecodedObject(key);",
          "content_same": false
        },
        {
          "line": 6371,
          "old_api": "sdslen",
          "new_api": "getDecodedObject",
          "old_text": "sdslen(value->ptr)",
          "new_text": "getDecodedObject(value)",
          "old_line_content": "            value->ptr,sdslen(value->ptr), &update);",
          "new_line_content": "        value = getDecodedObject(value);",
          "content_same": false
        },
        {
          "line": 6372,
          "old_api": "decrRefCount",
          "new_api": "zipmapSet",
          "old_text": "decrRefCount(key)",
          "new_text": "zipmapSet(o->ptr,\n            key->ptr,sdslen(key->ptr),\n            value->ptr,sdslen(value->ptr), &update)",
          "old_line_content": "        decrRefCount(key);",
          "new_line_content": "        o->ptr = zipmapSet(o->ptr,",
          "content_same": false
        },
        {
          "line": 6373,
          "old_api": "decrRefCount",
          "new_api": "sdslen",
          "old_text": "decrRefCount(value)",
          "new_text": "sdslen(key->ptr)",
          "old_line_content": "        decrRefCount(value);",
          "new_line_content": "            key->ptr,sdslen(key->ptr),",
          "content_same": false
        },
        {
          "line": 6376,
          "old_api": "zipmapLen",
          "new_api": "decrRefCount",
          "old_text": "zipmapLen(o->ptr)",
          "new_text": "decrRefCount(value)",
          "old_line_content": "        if (zipmapLen(o->ptr) > server.hash_max_zipmap_entries)",
          "new_line_content": "        decrRefCount(value);",
          "content_same": false
        },
        {
          "line": 6379,
          "old_api": "dictReplace",
          "new_api": "zipmapLen",
          "old_text": "dictReplace(o->ptr,key,value)",
          "new_text": "zipmapLen(o->ptr)",
          "old_line_content": "        if (dictReplace(o->ptr,key,value)) {",
          "new_line_content": "        if (zipmapLen(o->ptr) > server.hash_max_zipmap_entries)",
          "content_same": false
        },
        {
          "line": 6400,
          "old_api": "dictDelete",
          "new_api": "sdslen",
          "old_text": "dictDelete((dict*)o->ptr,key)",
          "new_text": "sdslen(key->ptr)",
          "old_line_content": "        deleted = dictDelete((dict*)o->ptr,key) == DICT_OK;",
          "new_line_content": "        o->ptr = zipmapDel(o->ptr,key->ptr,sdslen(key->ptr), &deleted);",
          "content_same": false
        },
        {
          "line": 6431,
          "old_api": "zipmapRewind",
          "new_api": "zmalloc",
          "old_text": "zipmapRewind(subject->ptr)",
          "new_text": "zmalloc(sizeof(hashIterator))",
          "old_line_content": "        hi->zi = zipmapRewind(subject->ptr);",
          "new_line_content": "    hashIterator *hi = zmalloc(sizeof(hashIterator));",
          "content_same": false
        },
        {
          "line": 6454,
          "old_api": "dictNext",
          "new_api": "zipmapNext",
          "old_text": "dictNext(hi->di)",
          "new_text": "zipmapNext(hi->zi, &hi->zk, &hi->zklen,\n            &hi->zv, &hi->zvlen)",
          "old_line_content": "        if ((hi->de = dictNext(hi->di)) == NULL) return REDIS_ERR;",
          "new_line_content": "        if ((hi->zi = zipmapNext(hi->zi, &hi->zk, &hi->zklen,",
          "content_same": false
        },
        {
          "line": 6484,
          "old_api": "dictAdd",
          "new_api": "lookupKeyWrite",
          "old_text": "dictAdd(c->db->dict,key,o)",
          "new_text": "lookupKeyWrite(c->db,key)",
          "old_line_content": "        dictAdd(c->db->dict,key,o);",
          "new_line_content": "    robj *o = lookupKeyWrite(c->db,key);",
          "content_same": false
        },
        {
          "line": 6488,
          "old_api": "addReply",
          "new_api": "incrRefCount",
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": "incrRefCount(key)",
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "        incrRefCount(key);",
          "content_same": false
        },
        {
          "line": 6503,
          "old_api": "hashSet",
          "new_api": "hashLookupWriteOrCreate",
          "old_text": "hashSet(o,c->argv[2],c->argv[3])",
          "new_text": "hashLookupWriteOrCreate(c,c->argv[1])",
          "old_line_content": "    update = hashSet(o,c->argv[2],c->argv[3]);",
          "new_line_content": "    if ((o = hashLookupWriteOrCreate(c,c->argv[1])) == NULL) return;",
          "content_same": false
        },
        {
          "line": 6504,
          "old_api": "addReply",
          "new_api": "hashTryConversion",
          "old_text": "addReply(c, update ? shared.czero : shared.cone)",
          "new_text": "hashTryConversion(o,c->argv,2,3)",
          "old_line_content": "    addReply(c, update ? shared.czero : shared.cone);",
          "new_line_content": "    hashTryConversion(o,c->argv,2,3);",
          "content_same": false
        },
        {
          "line": 6513,
          "old_api": "hashExists",
          "new_api": "hashLookupWriteOrCreate",
          "old_text": "hashExists(o, c->argv[2])",
          "new_text": "hashLookupWriteOrCreate(c,c->argv[1])",
          "old_line_content": "    if (hashExists(o, c->argv[2])) {",
          "new_line_content": "    if ((o = hashLookupWriteOrCreate(c,c->argv[1])) == NULL) return;",
          "content_same": false
        },
        {
          "line": 6514,
          "old_api": "addReply",
          "new_api": "hashTryConversion",
          "old_text": "addReply(c, shared.czero)",
          "new_text": "hashTryConversion(o,c->argv,2,3)",
          "old_line_content": "        addReply(c, shared.czero);",
          "new_line_content": "    hashTryConversion(o,c->argv,2,3);",
          "content_same": false
        },
        {
          "line": 6516,
          "old_api": "hashTryObjectEncoding",
          "new_api": "hashExists",
          "old_text": "hashTryObjectEncoding(o,&c->argv[2], &c->argv[3])",
          "new_text": "hashExists(o, c->argv[2])",
          "old_line_content": "        hashTryObjectEncoding(o,&c->argv[2], &c->argv[3]);",
          "new_line_content": "    if (hashExists(o, c->argv[2])) {",
          "content_same": false
        },
        {
          "line": 6517,
          "old_api": "hashSet",
          "new_api": "addReply",
          "old_text": "hashSet(o,c->argv[2],c->argv[3])",
          "new_text": "addReply(c, shared.czero)",
          "old_line_content": "        hashSet(o,c->argv[2],c->argv[3]);",
          "new_line_content": "        addReply(c, shared.czero);",
          "content_same": false
        },
        {
          "line": 6535,
          "old_api": "hashTryObjectEncoding",
          "new_api": "hashLookupWriteOrCreate",
          "old_text": "hashTryObjectEncoding(o,&c->argv[i], &c->argv[i+1])",
          "new_text": "hashLookupWriteOrCreate(c,c->argv[1])",
          "old_line_content": "        hashTryObjectEncoding(o,&c->argv[i], &c->argv[i+1]);",
          "new_line_content": "    if ((o = hashLookupWriteOrCreate(c,c->argv[1])) == NULL) return;",
          "content_same": false
        },
        {
          "line": 6536,
          "old_api": "hashSet",
          "new_api": "hashTryConversion",
          "old_text": "hashSet(o,c->argv[i],c->argv[i+1])",
          "new_text": "hashTryConversion(o,c->argv,2,c->argc-1)",
          "old_line_content": "        hashSet(o,c->argv[i],c->argv[i+1]);",
          "new_line_content": "    hashTryConversion(o,c->argv,2,c->argc-1);",
          "content_same": false
        },
        {
          "line": 6538,
          "old_api": "addReply",
          "new_api": "hashTryObjectEncoding",
          "old_text": "addReply(c, shared.ok)",
          "new_text": "hashTryObjectEncoding(o,&c->argv[i], &c->argv[i+1])",
          "old_line_content": "    addReply(c, shared.ok);",
          "new_line_content": "        hashTryObjectEncoding(o,&c->argv[i], &c->argv[i+1]);",
          "content_same": false
        },
        {
          "line": 6551,
          "old_api": "decrRefCount",
          "new_api": "hashGet",
          "old_text": "decrRefCount(current)",
          "new_text": "hashGet(o,c->argv[2])",
          "old_line_content": "            decrRefCount(current);",
          "new_line_content": "    if ((current = hashGet(o,c->argv[2])) != NULL) {",
          "content_same": false
        },
        {
          "line": 6564,
          "old_api": "addReplyLongLong",
          "new_api": "hashTryObjectEncoding",
          "old_text": "addReplyLongLong(c,value)",
          "new_text": "hashTryObjectEncoding(o,&c->argv[2],NULL)",
          "old_line_content": "    addReplyLongLong(c,value);",
          "new_line_content": "    hashTryObjectEncoding(o,&c->argv[2],NULL);",
          "content_same": false
        },
        {
          "line": 6573,
          "old_api": "hashGet",
          "new_api": "lookupKeyReadOrReply",
          "old_text": "hashGet(o,c->argv[2])",
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)",
          "old_line_content": "    if ((value = hashGet(o,c->argv[2])) != NULL) {",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "content_same": false
        },
        {
          "line": 6574,
          "old_api": "addReplyBulk",
          "new_api": "checkType",
          "old_text": "addReplyBulk(c,value)",
          "new_text": "checkType(c,o,REDIS_HASH)",
          "old_line_content": "        addReplyBulk(c,value);",
          "new_line_content": "        checkType(c,o,REDIS_HASH)) return;",
          "content_same": false
        },
        {
          "line": 6577,
          "old_api": "addReply",
          "new_api": "addReplyBulk",
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": "addReplyBulk(c,value)",
          "old_line_content": "        addReply(c,shared.nullbulk);",
          "new_line_content": "        addReplyBulk(c,value);",
          "content_same": false
        },
        {
          "line": 6595,
          "old_api": "addReplyBulk",
          "new_api": "sdsempty",
          "old_text": "addReplyBulk(c,value)",
          "new_text": "sdsempty()",
          "old_line_content": "            addReplyBulk(c,value);",
          "new_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",c->argc-2));",
          "content_same": false
        },
        {
          "line": 6598,
          "old_api": "addReply",
          "new_api": "addReplyBulk",
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": "addReplyBulk(c,value)",
          "old_line_content": "            addReply(c,shared.nullbulk);",
          "new_line_content": "            addReplyBulk(c,value);",
          "content_same": false
        },
        {
          "line": 6608,
          "old_api": "hashDelete",
          "new_api": "lookupKeyWriteOrReply",
          "old_text": "hashDelete(o,c->argv[2])",
          "new_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.czero)",
          "old_line_content": "    if (hashDelete(o,c->argv[2])) {",
          "new_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "content_same": false
        },
        {
          "line": 6609,
          "old_api": "deleteKey",
          "new_api": "checkType",
          "old_text": "deleteKey(c->db,c->argv[1])",
          "new_text": "checkType(c,o,REDIS_HASH)",
          "old_line_content": "        if (hashLength(o) == 0) deleteKey(c->db,c->argv[1]);",
          "new_line_content": "        checkType(c,o,REDIS_HASH)) return;",
          "content_same": false
        },
        {
          "line": 6622,
          "old_api": "hashLength",
          "new_api": "lookupKeyReadOrReply",
          "old_text": "hashLength(o)",
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "old_line_content": "    addReplyUlong(c,hashLength(o));",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "content_same": false
        },
        {
          "line": 6633,
          "old_api": "createObject",
          "new_api": "lookupKeyReadOrReply",
          "old_text": "createObject(REDIS_STRING,NULL)",
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.emptymultibulk)",
          "old_line_content": "    lenobj = createObject(REDIS_STRING,NULL);",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.emptymultibulk)) == NULL",
          "content_same": false
        },
        {
          "line": 6634,
          "old_api": "addReply",
          "new_api": "checkType",
          "old_text": "addReply(c,lenobj)",
          "new_text": "checkType(c,o,REDIS_HASH)",
          "old_line_content": "    addReply(c,lenobj);",
          "new_line_content": "        || checkType(c,o,REDIS_HASH)) return;",
          "content_same": false
        },
        {
          "line": 6637,
          "old_api": "hashInitIterator",
          "new_api": "addReply",
          "old_text": "hashInitIterator(o)",
          "new_text": "addReply(c,lenobj)",
          "old_line_content": "    hi = hashInitIterator(o);",
          "new_line_content": "    addReply(c,lenobj);",
          "content_same": false
        },
        {
          "line": 6638,
          "old_api": "hashNext",
          "new_api": "decrRefCount",
          "old_text": "hashNext(hi)",
          "new_text": "decrRefCount(lenobj)",
          "old_line_content": "    while (hashNext(hi) != REDIS_ERR) {",
          "new_line_content": "    decrRefCount(lenobj);",
          "content_same": false
        },
        {
          "line": 6640,
          "old_api": "hashCurrent",
          "new_api": "hashInitIterator",
          "old_text": "hashCurrent(hi,REDIS_HASH_KEY)",
          "new_text": "hashInitIterator(o)",
          "old_line_content": "            obj = hashCurrent(hi,REDIS_HASH_KEY);",
          "new_line_content": "    hi = hashInitIterator(o);",
          "content_same": false
        },
        {
          "line": 6641,
          "old_api": "addReplyBulk",
          "new_api": "hashNext",
          "old_text": "addReplyBulk(c,obj)",
          "new_text": "hashNext(hi)",
          "old_line_content": "            addReplyBulk(c,obj);",
          "new_line_content": "    while (hashNext(hi) != REDIS_ERR) {",
          "content_same": false
        },
        {
          "line": 6674,
          "old_api": "hashExists",
          "new_api": "lookupKeyReadOrReply",
          "old_text": "hashExists(o,c->argv[2])",
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "old_line_content": "    addReply(c, hashExists(o,c->argv[2]) ? shared.cone : shared.czero);",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "content_same": false
        },
        {
          "line": 6683,
          "old_api": "zipmapRewind",
          "new_api": "dictCreate",
          "old_text": "zipmapRewind(zm)",
          "new_text": "dictCreate(&hashDictType,NULL)",
          "old_line_content": "    p = zipmapRewind(zm);",
          "new_line_content": "    dict *dict = dictCreate(&hashDictType,NULL);",
          "content_same": false
        },
        {
          "line": 6687,
          "old_api": "createStringObject",
          "new_api": "zipmapNext",
          "old_text": "createStringObject((char*)key,klen)",
          "new_text": "zipmapNext(p,&key,&klen,&val,&vlen)",
          "old_line_content": "        keyobj = createStringObject((char*)key,klen);",
          "new_line_content": "    while((p = zipmapNext(p,&key,&klen,&val,&vlen)) != NULL) {",
          "content_same": false
        },
        {
          "line": 6690,
          "old_api": "tryObjectEncoding",
          "new_api": "createStringObject",
          "old_text": "tryObjectEncoding(valobj)",
          "new_text": "createStringObject((char*)key,klen)",
          "old_line_content": "        valobj = tryObjectEncoding(valobj);",
          "new_line_content": "        keyobj = createStringObject((char*)key,klen);",
          "content_same": false
        },
        {
          "line": 6691,
          "old_api": "dictAdd",
          "new_api": "createStringObject",
          "old_text": "dictAdd(dict,keyobj,valobj)",
          "new_text": "createStringObject((char*)val,vlen)",
          "old_line_content": "        dictAdd(dict,keyobj,valobj);",
          "new_line_content": "        valobj = createStringObject((char*)val,vlen);",
          "content_same": false
        },
        {
          "line": 6704,
          "old_api": "addReply",
          "new_api": "dictSize",
          "old_text": "addReply(c,shared.ok)",
          "new_text": "dictSize(c->db->dict)",
          "old_line_content": "    addReply(c,shared.ok);",
          "new_line_content": "    server.dirty += dictSize(c->db->dict);",
          "content_same": false
        },
        {
          "line": 6711,
          "old_api": "kill",
          "new_api": "emptyDb",
          "old_text": "kill(server.bgsavechildpid,SIGKILL)",
          "new_text": "emptyDb()",
          "old_line_content": "        kill(server.bgsavechildpid,SIGKILL);",
          "new_line_content": "    server.dirty += emptyDb();",
          "content_same": false
        },
        {
          "line": 6712,
          "old_api": "rdbRemoveTempFile",
          "new_api": "addReply",
          "old_text": "rdbRemoveTempFile(server.bgsavechildpid)",
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "        rdbRemoveTempFile(server.bgsavechildpid);",
          "new_line_content": "    addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 6714,
          "old_api": "rdbSave",
          "new_api": "kill",
          "old_text": "rdbSave(server.dbfilename)",
          "new_text": "kill(server.bgsavechildpid,SIGKILL)",
          "old_line_content": "    rdbSave(server.dbfilename);",
          "new_line_content": "        kill(server.bgsavechildpid,SIGKILL);",
          "content_same": false
        },
        {
          "line": 6755,
          "old_api": "sdslen",
          "new_api": "getDecodedObject",
          "old_text": "sdslen(ssub)",
          "new_text": "getDecodedObject(subst)",
          "old_line_content": "    if (sdslen(spat)+sdslen(ssub)-1 > REDIS_SORTKEY_MAX) return NULL;",
          "new_line_content": "    subst = getDecodedObject(subst);",
          "content_same": false
        },
        {
          "line": 6758,
          "old_api": "decrRefCount",
          "new_api": "sdslen",
          "old_text": "decrRefCount(subst)",
          "new_text": "sdslen(ssub)",
          "old_line_content": "        decrRefCount(subst);",
          "new_line_content": "    if (sdslen(spat)+sdslen(ssub)-1 > REDIS_SORTKEY_MAX) return NULL;",
          "content_same": false
        },
        {
          "line": 6766,
          "old_api": "memcpy",
          "new_api": "strstr",
          "old_text": "memcpy(fieldname.buf,f+2,fieldlen-1)",
          "new_text": "strstr(p+1, \"->\")",
          "old_line_content": "        memcpy(fieldname.buf,f+2,fieldlen-1);",
          "new_line_content": "    if ((f = strstr(p+1, \"->\")) != NULL) {",
          "content_same": false
        },
        {
          "line": 6776,
          "old_api": "memcpy",
          "new_api": "sdslen",
          "old_text": "memcpy(keyname.buf+prefixlen,ssub,sublen)",
          "new_text": "sdslen(ssub)",
          "old_line_content": "    memcpy(keyname.buf+prefixlen,ssub,sublen);",
          "new_line_content": "    sublen = sdslen(ssub);",
          "content_same": false
        },
        {
          "line": 6777,
          "old_api": "memcpy",
          "new_api": "sdslen",
          "old_text": "memcpy(keyname.buf+prefixlen+sublen,p+1,postfixlen)",
          "new_text": "sdslen(spat)",
          "old_line_content": "    memcpy(keyname.buf+prefixlen+sublen,p+1,postfixlen);",
          "new_line_content": "    postfixlen = sdslen(spat)-(prefixlen+1)-fieldlen;",
          "content_same": false
        },
        {
          "line": 6780,
          "old_api": "decrRefCount",
          "new_api": "memcpy",
          "old_text": "decrRefCount(subst)",
          "new_text": "memcpy(keyname.buf+prefixlen+sublen,p+1,postfixlen)",
          "old_line_content": "    decrRefCount(subst);",
          "new_line_content": "    memcpy(keyname.buf+prefixlen+sublen,p+1,postfixlen);",
          "content_same": false
        },
        {
          "line": 6783,
          "old_api": "initStaticStringObject",
          "new_api": "decrRefCount",
          "old_text": "initStaticStringObject(keyobj,((char*)&keyname)+(sizeof(long)*2))",
          "new_text": "decrRefCount(subst)",
          "old_line_content": "    initStaticStringObject(keyobj,((char*)&keyname)+(sizeof(long)*2));",
          "new_line_content": "    decrRefCount(subst);",
          "content_same": false
        },
        {
          "line": 6890,
          "old_api": "atoi",
          "new_api": "strcasecmp",
          "old_text": "atoi(c->argv[j+1]->ptr)",
          "new_text": "strcasecmp(c->argv[j]->ptr,\"alpha\")",
          "old_line_content": "            limit_start = atoi(c->argv[j+1]->ptr);",
          "new_line_content": "        } else if (!strcasecmp(c->argv[j]->ptr,\"alpha\")) {",
          "content_same": false
        },
        {
          "line": 6893,
          "old_api": "strcasecmp",
          "new_api": "atoi",
          "old_text": "strcasecmp(c->argv[j]->ptr,\"store\")",
          "new_text": "atoi(c->argv[j+1]->ptr)",
          "old_line_content": "        } else if (!strcasecmp(c->argv[j]->ptr,\"store\") && leftargs >= 1) {",
          "new_line_content": "            limit_start = atoi(c->argv[j+1]->ptr);",
          "content_same": false
        },
        {
          "line": 6903,
          "old_api": "createSortOperation",
          "new_api": "strchr",
          "old_text": "createSortOperation(\n                REDIS_SORT_GET,c->argv[j+1])",
          "new_text": "strchr(c->argv[j+1]->ptr,'*')",
          "old_line_content": "            listAddNodeTail(operations,createSortOperation(",
          "new_line_content": "            if (strchr(c->argv[j+1]->ptr,'*') == NULL) dontsort = 1;",
          "content_same": false
        },
        {
          "line": 6921,
          "old_api": "redisPanic",
          "new_api": "listLength",
          "old_text": "redisPanic(\"Bad SORT type\")",
          "new_text": "listLength((list*)sortval->ptr)",
          "old_line_content": "    default: vectorlen = 0; redisPanic(\"Bad SORT type\"); /* Avoid GCC warning */",
          "new_line_content": "    case REDIS_LIST: vectorlen = listLength((list*)sortval->ptr); break;",
          "content_same": false
        },
        {
          "line": 6923,
          "old_api": "zmalloc",
          "new_api": "dictSize",
          "old_text": "zmalloc(sizeof(redisSortObject)*vectorlen)",
          "new_text": "dictSize(((zset*)sortval->ptr)->dict)",
          "old_line_content": "    vector = zmalloc(sizeof(redisSortObject)*vectorlen);",
          "new_line_content": "    case REDIS_ZSET: vectorlen = dictSize(((zset*)sortval->ptr)->dict); break;",
          "content_same": false
        },
        {
          "line": 6979,
          "old_api": "strtod",
          "new_api": "getDecodedObject",
          "old_text": "strtod(byval->ptr,NULL)",
          "new_text": "getDecodedObject(byval)",
          "old_line_content": "                    vector[j].u.score = strtod(byval->ptr,NULL);",
          "new_line_content": "                if (sortby) vector[j].u.cmpobj = getDecodedObject(byval);",
          "content_same": false
        },
        {
          "line": 7032,
          "old_api": "lookupKeyByPattern",
          "new_api": "listRewind",
          "old_text": "lookupKeyByPattern(c->db,sop->pattern,\n                    vector[j].obj)",
          "new_text": "listRewind(operations,&li)",
          "old_line_content": "                robj *val = lookupKeyByPattern(c->db,sop->pattern,",
          "new_line_content": "            listRewind(operations,&li);",
          "content_same": false
        },
        {
          "line": 7040,
          "old_api": "decrRefCount",
          "new_api": "addReply",
          "old_text": "decrRefCount(val)",
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "                        decrRefCount(val);",
          "new_line_content": "                        addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 7043,
          "old_api": "redisAssert",
          "new_api": "decrRefCount",
          "old_text": "redisAssert(sop->type == REDIS_SORT_GET)",
          "new_text": "decrRefCount(val)",
          "old_line_content": "                    redisAssert(sop->type == REDIS_SORT_GET); /* always fails */",
          "new_line_content": "                        decrRefCount(val);",
          "content_same": false
        },
        {
          "line": 7060,
          "old_api": "listRewind",
          "new_api": "listAddNodeTail",
          "old_text": "listRewind(operations,&li)",
          "new_text": "listAddNodeTail(listPtr,vector[j].obj)",
          "old_line_content": "            listRewind(operations,&li);",
          "new_line_content": "                listAddNodeTail(listPtr,vector[j].obj);",
          "content_same": false
        },
        {
          "line": 7061,
          "old_api": "listNext",
          "new_api": "incrRefCount",
          "old_text": "listNext(&li)",
          "new_text": "incrRefCount(vector[j].obj)",
          "old_line_content": "            while((ln = listNext(&li))) {",
          "new_line_content": "                incrRefCount(vector[j].obj);",
          "content_same": false
        },
        {
          "line": 7063,
          "old_api": "lookupKeyByPattern",
          "new_api": "listRewind",
          "old_text": "lookupKeyByPattern(c->db,sop->pattern,\n                    vector[j].obj)",
          "new_text": "listRewind(operations,&li)",
          "old_line_content": "                robj *val = lookupKeyByPattern(c->db,sop->pattern,",
          "new_line_content": "            listRewind(operations,&li);",
          "content_same": false
        },
        {
          "line": 7077,
          "old_api": "redisAssert",
          "new_api": "listAddNodeTail",
          "old_text": "redisAssert(sop->type == REDIS_SORT_GET)",
          "new_text": "listAddNodeTail(listPtr,val)",
          "old_line_content": "                    redisAssert(sop->type == REDIS_SORT_GET); /* always fails */",
          "new_line_content": "                        listAddNodeTail(listPtr,val);",
          "content_same": false
        },
        {
          "line": 7096,
          "old_api": "decrRefCount",
          "new_api": "listRelease",
          "old_text": "decrRefCount(vector[j].u.cmpobj)",
          "new_text": "listRelease(operations)",
          "old_line_content": "            decrRefCount(vector[j].u.cmpobj);",
          "new_line_content": "    listRelease(operations);",
          "content_same": false
        },
        {
          "line": 7163,
          "old_api": "listLength",
          "new_api": "getpid",
          "old_text": "listLength(server.slaves)",
          "new_text": "getpid()",
          "old_line_content": "        listLength(server.clients)-listLength(server.slaves),",
          "new_line_content": "        (long) getpid(),",
          "content_same": false
        },
        {
          "line": 7166,
          "old_api": "zmalloc_used_memory",
          "new_api": "listLength",
          "old_text": "zmalloc_used_memory()",
          "new_text": "listLength(server.slaves)",
          "old_line_content": "        zmalloc_used_memory(),",
          "new_line_content": "        listLength(server.clients)-listLength(server.slaves),",
          "content_same": false
        },
        {
          "line": 7231,
          "old_api": "sdscatprintf",
          "new_api": "dictSize",
          "old_text": "sdscatprintf(info, \"db%d:keys=%lld,expires=%lld\\r\\n\",\n                j, keys, vkeys)",
          "new_text": "dictSize(server.db[j].dict)",
          "old_line_content": "            info = sdscatprintf(info, \"db%d:keys=%lld,expires=%lld\\r\\n\",",
          "new_line_content": "        keys = dictSize(server.db[j].dict);",
          "content_same": false
        },
        {
          "line": 7242,
          "old_api": "addReplySds",
          "new_api": "genRedisInfoString",
          "old_text": "addReplySds(c,info)",
          "new_text": "genRedisInfoString()",
          "old_line_content": "    addReplySds(c,info);",
          "new_line_content": "    sds info = genRedisInfoString();",
          "content_same": false
        },
        {
          "line": 7243,
          "old_api": "addReply",
          "new_api": "sdsempty",
          "old_text": "addReply(c,shared.crlf)",
          "new_text": "sdsempty()",
          "old_line_content": "    addReply(c,shared.crlf);",
          "new_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"$%lu\\r\\n\",",
          "content_same": false
        },
        {
          "line": 7269,
          "old_api": "incrRefCount",
          "new_api": "dictAdd",
          "old_text": "incrRefCount(key)",
          "new_text": "dictAdd(db->expires,key,(void*)when)",
          "old_line_content": "        incrRefCount(key);",
          "new_line_content": "    if (dictAdd(db->expires,key,(void*)when) == DICT_ERR) {",
          "content_same": false
        },
        {
          "line": 7283,
          "old_api": "dictGetEntryVal",
          "new_api": "dictSize",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "dictSize(db->expires)",
          "old_line_content": "    return (time_t) dictGetEntryVal(de);",
          "new_line_content": "    if (dictSize(db->expires) == 0 ||",
          "content_same": false
        },
        {
          "line": 7295,
          "old_api": "dictGetEntryVal",
          "new_api": "dictFind",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "dictFind(db->expires,key)",
          "old_line_content": "    when = (time_t) dictGetEntryVal(de);",
          "new_line_content": "       (de = dictFind(db->expires,key)) == NULL) return 0;",
          "content_same": false
        },
        {
          "line": 7299,
          "old_api": "dictDelete",
          "new_api": "time",
          "old_text": "dictDelete(db->expires,key)",
          "new_text": "time(NULL)",
          "old_line_content": "    dictDelete(db->expires,key);",
          "new_line_content": "    if (time(NULL) <= when) return 0;",
          "content_same": false
        },
        {
          "line": 7336,
          "old_api": "time",
          "new_api": "addReply",
          "old_text": "time(NULL)",
          "new_text": "addReply(c, shared.cone)",
          "old_line_content": "        time_t when = time(NULL)+seconds;",
          "new_line_content": "        addReply(c, shared.cone);",
          "content_same": false
        },
        {
          "line": 7364,
          "old_api": "sdsempty",
          "new_api": "time",
          "old_text": "sdsempty()",
          "new_text": "time(NULL)",
          "old_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\":%d\\r\\n\",ttl));",
          "new_line_content": "        ttl = (int) (expire-time(NULL));",
          "content_same": false
        },
        {
          "line": 7387,
          "old_api": "zfree",
          "new_api": "decrRefCount",
          "old_text": "zfree(c->mstate.commands)",
          "new_text": "decrRefCount(mc->argv[i])",
          "old_line_content": "    zfree(c->mstate.commands);",
          "new_line_content": "            decrRefCount(mc->argv[i]);",
          "content_same": false
        },
        {
          "line": 7403,
          "old_api": "incrRefCount",
          "new_api": "zmalloc",
          "old_text": "incrRefCount(mc->argv[j])",
          "new_text": "zmalloc(sizeof(robj*)*c->argc)",
          "old_line_content": "        incrRefCount(mc->argv[j]);",
          "new_line_content": "    mc->argv = zmalloc(sizeof(robj*)*c->argc);",
          "content_same": false
        },
        {
          "line": 7421,
          "old_api": "addReply",
          "new_api": "freeClientMultiState",
          "old_text": "addReply(c,shared.ok)",
          "new_text": "freeClientMultiState(c)",
          "old_line_content": "    addReply(c,shared.ok);",
          "new_line_content": "    freeClientMultiState(c);",
          "content_same": false
        },
        {
          "line": 7433,
          "old_api": "listLength",
          "new_api": "lookupCommand",
          "old_text": "listLength(server.slaves)",
          "new_text": "lookupCommand(\"multi\")",
          "old_line_content": "    if (listLength(server.slaves))",
          "new_line_content": "    cmd = lookupCommand(\"multi\");",
          "content_same": false
        },
        {
          "line": 7435,
          "old_api": "decrRefCount",
          "new_api": "feedAppendOnlyFile",
          "old_text": "decrRefCount(multistring)",
          "new_text": "feedAppendOnlyFile(cmd,c->db->id,&multistring,1)",
          "old_line_content": "    decrRefCount(multistring);",
          "new_line_content": "        feedAppendOnlyFile(cmd,c->db->id,&multistring,1);",
          "content_same": false
        },
        {
          "line": 7521,
          "old_api": "dictFind",
          "new_api": "incrRefCount",
          "old_text": "dictFind(c->db->blockingkeys,keys[j])",
          "new_text": "incrRefCount(keys[j])",
          "old_line_content": "        de = dictFind(c->db->blockingkeys,keys[j]);",
          "new_line_content": "        incrRefCount(keys[j]);",
          "content_same": false
        },
        {
          "line": 7529,
          "old_api": "assert",
          "new_api": "listCreate",
          "old_text": "assert(retval == DICT_OK)",
          "new_text": "listCreate()",
          "old_line_content": "            assert(retval == DICT_OK);",
          "new_line_content": "            l = listCreate();",
          "content_same": false
        },
        {
          "line": 7531,
          "old_api": "dictGetEntryVal",
          "new_api": "incrRefCount",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "incrRefCount(keys[j])",
          "old_line_content": "            l = dictGetEntryVal(de);",
          "new_line_content": "            incrRefCount(keys[j]);",
          "content_same": false
        },
        {
          "line": 7553,
          "old_api": "listSearchKey",
          "new_api": "dictFind",
          "old_text": "listSearchKey(l,c)",
          "new_text": "dictFind(c->db->blockingkeys,c->blockingkeys[j])",
          "old_line_content": "        listDelNode(l,listSearchKey(l,c));",
          "new_line_content": "        de = dictFind(c->db->blockingkeys,c->blockingkeys[j]);",
          "content_same": false
        },
        {
          "line": 7555,
          "old_api": "listLength",
          "new_api": "dictGetEntryVal",
          "old_text": "listLength(l)",
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "        if (listLength(l) == 0)",
          "new_line_content": "        l = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 7556,
          "old_api": "dictDelete",
          "new_api": "listSearchKey",
          "old_text": "dictDelete(c->db->blockingkeys,c->blockingkeys[j])",
          "new_text": "listSearchKey(l,c)",
          "old_line_content": "            dictDelete(c->db->blockingkeys,c->blockingkeys[j]);",
          "new_line_content": "        listDelNode(l,listSearchKey(l,c));",
          "content_same": false
        },
        {
          "line": 7560,
          "old_api": "zfree",
          "new_api": "decrRefCount",
          "old_text": "zfree(c->blockingkeys)",
          "new_text": "decrRefCount(c->blockingkeys[j])",
          "old_line_content": "    zfree(c->blockingkeys);",
          "new_line_content": "        decrRefCount(c->blockingkeys[j]);",
          "content_same": false
        },
        {
          "line": 7591,
          "old_api": "listFirst",
          "new_api": "dictFind",
          "old_text": "listFirst(l)",
          "new_text": "dictFind(c->db->blockingkeys,key)",
          "old_line_content": "    ln = listFirst(l);",
          "new_line_content": "    de = dictFind(c->db->blockingkeys,key);",
          "content_same": false
        },
        {
          "line": 7595,
          "old_api": "sdsnew",
          "new_api": "assert",
          "old_text": "sdsnew(\"*2\\r\\n\")",
          "new_text": "assert(ln != NULL)",
          "old_line_content": "    addReplySds(receiver,sdsnew(\"*2\\r\\n\"));",
          "new_line_content": "    assert(ln != NULL);",
          "content_same": false
        },
        {
          "line": 7598,
          "old_api": "unblockClientWaitingData",
          "new_api": "sdsnew",
          "old_text": "unblockClientWaitingData(receiver)",
          "new_text": "sdsnew(\"*2\\r\\n\")",
          "old_line_content": "    unblockClientWaitingData(receiver);",
          "new_line_content": "    addReplySds(receiver,sdsnew(\"*2\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 7612,
          "old_api": "addReply",
          "new_api": "lookupKeyWrite",
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": "lookupKeyWrite(c->db,c->argv[j])",
          "old_line_content": "                addReply(c,shared.wrongtypeerr);",
          "new_line_content": "        o = lookupKeyWrite(c->db,c->argv[j]);",
          "content_same": false
        },
        {
          "line": 7760,
          "old_api": "redisLog",
          "new_api": "listRelease",
          "old_text": "redisLog(REDIS_NOTICE,\"Waiting for end of BGSAVE for SYNC\")",
          "new_text": "listRelease(c->reply)",
          "old_line_content": "            redisLog(REDIS_NOTICE,\"Waiting for end of BGSAVE for SYNC\");",
          "new_line_content": "            listRelease(c->reply);",
          "content_same": false
        },
        {
          "line": 7772,
          "old_api": "sdsnew",
          "new_api": "redisLog",
          "old_text": "sdsnew(\"-ERR Unalbe to perform background save\\r\\n\")",
          "new_text": "redisLog(REDIS_NOTICE,\"Starting BGSAVE for SYNC\")",
          "old_line_content": "            addReplySds(c,sdsnew(\"-ERR Unalbe to perform background save\\r\\n\"));",
          "new_line_content": "        redisLog(REDIS_NOTICE,\"Starting BGSAVE for SYNC\");",
          "content_same": false
        },
        {
          "line": 7803,
          "old_api": "freeClient",
          "new_api": "sdslen",
          "old_text": "freeClient(slave)",
          "new_text": "sdslen(bulkcount)",
          "old_line_content": "            freeClient(slave);",
          "new_line_content": "        if (write(fd,bulkcount,sdslen(bulkcount)) != (signed)sdslen(bulkcount))",
          "content_same": false
        },
        {
          "line": 7806,
          "old_api": "sdsfree",
          "new_api": "freeClient",
          "old_text": "sdsfree(bulkcount)",
          "new_text": "freeClient(slave)",
          "old_line_content": "        sdsfree(bulkcount);",
          "new_line_content": "            freeClient(slave);",
          "content_same": false
        },
        {
          "line": 7809,
          "old_api": "read",
          "new_api": "sdsfree",
          "old_text": "read(slave->repldbfd,buf,REDIS_IOBUF_LEN)",
          "new_text": "sdsfree(bulkcount)",
          "old_line_content": "    buflen = read(slave->repldbfd,buf,REDIS_IOBUF_LEN);",
          "new_line_content": "        sdsfree(bulkcount);",
          "content_same": false
        },
        {
          "line": 7811,
          "old_api": "redisLog",
          "new_api": "lseek",
          "old_text": "redisLog(REDIS_WARNING,\"Read error sending DB to slave: %s\",\n            (buflen == 0) ? \"premature EOF\" : strerror(errno))",
          "new_text": "lseek(slave->repldbfd,slave->repldboff,SEEK_SET)",
          "old_line_content": "        redisLog(REDIS_WARNING,\"Read error sending DB to slave: %s\",",
          "new_line_content": "    lseek(slave->repldbfd,slave->repldboff,SEEK_SET);",
          "content_same": false
        },
        {
          "line": 7812,
          "old_api": "strerror",
          "new_api": "read",
          "old_text": "strerror(errno)",
          "new_text": "read(slave->repldbfd,buf,REDIS_IOBUF_LEN)",
          "old_line_content": "            (buflen == 0) ? \"premature EOF\" : strerror(errno));",
          "new_line_content": "    buflen = read(slave->repldbfd,buf,REDIS_IOBUF_LEN);",
          "content_same": false
        },
        {
          "line": 7816,
          "old_api": "write",
          "new_api": "freeClient",
          "old_text": "write(fd,buf,buflen)",
          "new_text": "freeClient(slave)",
          "old_line_content": "    if ((nwritten = write(fd,buf,buflen)) == -1) {",
          "new_line_content": "        freeClient(slave);",
          "content_same": false
        },
        {
          "line": 7819,
          "old_api": "freeClient",
          "new_api": "write",
          "old_text": "freeClient(slave)",
          "new_text": "write(fd,buf,buflen)",
          "old_line_content": "        freeClient(slave);",
          "new_line_content": "    if ((nwritten = write(fd,buf,buflen)) == -1) {",
          "content_same": false
        },
        {
          "line": 7833,
          "old_api": "sdsempty",
          "new_api": "freeClient",
          "old_text": "sdsempty()",
          "new_text": "freeClient(slave)",
          "old_line_content": "        addReplySds(slave,sdsempty());",
          "new_line_content": "            freeClient(slave);",
          "content_same": false
        },
        {
          "line": 7864,
          "old_api": "open",
          "new_api": "redisLog",
          "old_text": "open(server.dbfilename,O_RDONLY)",
          "new_text": "redisLog(REDIS_WARNING,\"SYNC failed. BGSAVE child returned an error\")",
          "old_line_content": "            if ((slave->repldbfd = open(server.dbfilename,O_RDONLY)) == -1 ||",
          "new_line_content": "                redisLog(REDIS_WARNING,\"SYNC failed. BGSAVE child returned an error\");",
          "content_same": false
        },
        {
          "line": 7867,
          "old_api": "strerror",
          "new_api": "open",
          "old_text": "strerror(errno)",
          "new_text": "open(server.dbfilename,O_RDONLY)",
          "old_line_content": "                redisLog(REDIS_WARNING,\"SYNC failed. Can't open/stat DB after BGSAVE: %s\", strerror(errno));",
          "new_line_content": "            if ((slave->repldbfd = open(server.dbfilename,O_RDONLY)) == -1 ||",
          "content_same": false
        },
        {
          "line": 7884,
          "old_api": "listRewind",
          "new_api": "rdbSaveBackground",
          "old_text": "listRewind(server.slaves,&li)",
          "new_text": "rdbSaveBackground(server.dbfilename)",
          "old_line_content": "            listRewind(server.slaves,&li);",
          "new_line_content": "        if (rdbSaveBackground(server.dbfilename) != REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 7913,
          "old_api": "redisLog",
          "new_api": "snprintf",
          "old_text": "redisLog(REDIS_WARNING,\"Unable to AUTH to MASTER: %s\",\n                strerror(errno))",
          "new_text": "snprintf(authcmd, 1024, \"AUTH %s\\r\\n\", server.masterauth)",
          "old_line_content": "            redisLog(REDIS_WARNING,\"Unable to AUTH to MASTER: %s\",",
          "new_line_content": "    \tsnprintf(authcmd, 1024, \"AUTH %s\\r\\n\", server.masterauth);",
          "content_same": false
        },
        {
          "line": 7914,
          "old_api": "strerror",
          "new_api": "strlen",
          "old_text": "strerror(errno)",
          "new_text": "strlen(server.masterauth)",
          "old_line_content": "                strerror(errno));",
          "new_line_content": "    \tif (syncWrite(fd, authcmd, strlen(server.masterauth)+7, 5) == -1) {",
          "content_same": false
        },
        {
          "line": 7921,
          "old_api": "strerror",
          "new_api": "syncReadLine",
          "old_text": "strerror(errno)",
          "new_text": "syncReadLine(fd,buf,1024,3600)",
          "old_line_content": "                strerror(errno));",
          "new_line_content": "        if (syncReadLine(fd,buf,1024,3600) == -1) {",
          "content_same": false
        },
        {
          "line": 7935,
          "old_api": "strerror",
          "new_api": "syncWrite",
          "old_text": "strerror(errno)",
          "new_text": "syncWrite(fd,\"SYNC \\r\\n\",7,5)",
          "old_line_content": "            strerror(errno));",
          "new_line_content": "    if (syncWrite(fd,\"SYNC \\r\\n\",7,5) == -1) {",
          "content_same": false
        },
        {
          "line": 7942,
          "old_api": "strerror",
          "new_api": "syncReadLine",
          "old_text": "strerror(errno)",
          "new_text": "syncReadLine(fd,buf,1024,3600)",
          "old_line_content": "            strerror(errno));",
          "new_line_content": "    if (syncReadLine(fd,buf,1024,3600) == -1) {",
          "content_same": false
        },
        {
          "line": 7950,
          "old_api": "strtol",
          "new_api": "redisLog",
          "old_text": "strtol(buf+1,NULL,10)",
          "new_text": "redisLog(REDIS_WARNING,\"Bad protocol from MASTER, the first byte is not '$', are you sure the host and port are right?\")",
          "old_line_content": "    dumpsize = strtol(buf+1,NULL,10);",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Bad protocol from MASTER, the first byte is not '$', are you sure the host and port are right?\");",
          "content_same": false
        },
        {
          "line": 7954,
          "old_api": "snprintf",
          "new_api": "redisLog",
          "old_text": "snprintf(tmpfile,256,\n            \"temp-%d.%ld.rdb\",(int)time(NULL),(long int)getpid())",
          "new_text": "redisLog(REDIS_NOTICE,\"Receiving %ld bytes data dump from MASTER\",dumpsize)",
          "old_line_content": "        snprintf(tmpfile,256,",
          "new_line_content": "    redisLog(REDIS_NOTICE,\"Receiving %ld bytes data dump from MASTER\",dumpsize);",
          "content_same": false
        },
        {
          "line": 7958,
          "old_api": "sleep",
          "new_api": "getpid",
          "old_text": "sleep(1)",
          "new_text": "getpid()",
          "old_line_content": "        sleep(1);",
          "new_line_content": "            \"temp-%d.%ld.rdb\",(int)time(NULL),(long int)getpid());",
          "content_same": false
        },
        {
          "line": 7961,
          "old_api": "close",
          "new_api": "sleep",
          "old_text": "close(fd)",
          "new_text": "sleep(1)",
          "old_line_content": "        close(fd);",
          "new_line_content": "        sleep(1);",
          "content_same": false
        },
        {
          "line": 7971,
          "old_api": "strerror",
          "new_api": "read",
          "old_text": "strerror(errno)",
          "new_text": "read(fd,buf,(dumpsize < 1024)?dumpsize:1024)",
          "old_line_content": "                strerror(errno));",
          "new_line_content": "        nread = read(fd,buf,(dumpsize < 1024)?dumpsize:1024);",
          "content_same": false
        },
        {
          "line": 7973,
          "old_api": "close",
          "new_api": "redisLog",
          "old_text": "close(dfd)",
          "new_text": "redisLog(REDIS_WARNING,\"I/O error trying to sync with MASTER: %s\",\n                strerror(errno))",
          "old_line_content": "            close(dfd);",
          "new_line_content": "            redisLog(REDIS_WARNING,\"I/O error trying to sync with MASTER: %s\",",
          "content_same": false
        },
        {
          "line": 7976,
          "old_api": "write",
          "new_api": "close",
          "old_text": "write(dfd,buf,nread)",
          "new_text": "close(dfd)",
          "old_line_content": "        nwritten = write(dfd,buf,nread);",
          "new_line_content": "            close(dfd);",
          "content_same": false
        },
        {
          "line": 7979,
          "old_api": "close",
          "new_api": "write",
          "old_text": "close(fd)",
          "new_text": "write(dfd,buf,nread)",
          "old_line_content": "            close(fd);",
          "new_line_content": "        nwritten = write(dfd,buf,nread);",
          "content_same": false
        },
        {
          "line": 7988,
          "old_api": "unlink",
          "new_api": "close",
          "old_text": "unlink(tmpfile)",
          "new_text": "close(dfd)",
          "old_line_content": "        unlink(tmpfile);",
          "new_line_content": "    close(dfd);",
          "content_same": false
        },
        {
          "line": 7989,
          "old_api": "close",
          "new_api": "rename",
          "old_text": "close(fd)",
          "new_text": "rename(tmpfile,server.dbfilename)",
          "old_line_content": "        close(fd);",
          "new_line_content": "    if (rename(tmpfile,server.dbfilename) == -1) {",
          "content_same": false
        },
        {
          "line": 7992,
          "old_api": "emptyDb",
          "new_api": "close",
          "old_text": "emptyDb()",
          "new_text": "close(fd)",
          "old_line_content": "    emptyDb();",
          "new_line_content": "        close(fd);",
          "content_same": false
        },
        {
          "line": 7995,
          "old_api": "close",
          "new_api": "emptyDb",
          "old_text": "close(fd)",
          "new_text": "emptyDb()",
          "old_line_content": "        close(fd);",
          "new_line_content": "    emptyDb();",
          "content_same": false
        },
        {
          "line": 7998,
          "old_api": "createClient",
          "new_api": "close",
          "old_text": "createClient(fd)",
          "new_text": "close(fd)",
          "old_line_content": "    server.master = createClient(fd);",
          "new_line_content": "        close(fd);",
          "content_same": false
        },
        {
          "line": 8009,
          "old_api": "sdsfree",
          "new_api": "strcasecmp",
          "old_text": "sdsfree(server.masterhost)",
          "new_text": "strcasecmp(c->argv[1]->ptr,\"no\")",
          "old_line_content": "            sdsfree(server.masterhost);",
          "new_line_content": "    if (!strcasecmp(c->argv[1]->ptr,\"no\") &&",
          "content_same": false
        },
        {
          "line": 8016,
          "old_api": "sdsfree",
          "new_api": "redisLog",
          "old_text": "sdsfree(server.masterhost)",
          "new_text": "redisLog(REDIS_NOTICE,\"MASTER MODE enabled (user request)\")",
          "old_line_content": "        sdsfree(server.masterhost);",
          "new_line_content": "            redisLog(REDIS_NOTICE,\"MASTER MODE enabled (user request)\");",
          "content_same": false
        },
        {
          "line": 8019,
          "old_api": "freeClient",
          "new_api": "sdsfree",
          "old_text": "freeClient(server.master)",
          "new_text": "sdsfree(server.masterhost)",
          "old_line_content": "        if (server.master) freeClient(server.master);",
          "new_line_content": "        sdsfree(server.masterhost);",
          "content_same": false
        },
        {
          "line": 8021,
          "old_api": "redisLog",
          "new_api": "atoi",
          "old_text": "redisLog(REDIS_NOTICE,\"SLAVE OF %s:%d enabled (user request)\",\n            server.masterhost, server.masterport)",
          "new_text": "atoi(c->argv[2]->ptr)",
          "old_line_content": "        redisLog(REDIS_NOTICE,\"SLAVE OF %s:%d enabled (user request)\",",
          "new_line_content": "        server.masterport = atoi(c->argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 8024,
          "old_api": "addReply",
          "new_api": "redisLog",
          "old_text": "addReply(c,shared.ok)",
          "new_text": "redisLog(REDIS_NOTICE,\"SLAVE OF %s:%d enabled (user request)\",\n            server.masterhost, server.masterport)",
          "old_line_content": "    addReply(c,shared.ok);",
          "new_line_content": "        redisLog(REDIS_NOTICE,\"SLAVE OF %s:%d enabled (user request)\",",
          "content_same": false
        },
        {
          "line": 8039,
          "old_api": "listNodeValue",
          "new_api": "pthread_mutex_lock",
          "old_text": "listNodeValue(head)",
          "new_text": "pthread_mutex_lock(&server.obj_freelist_mutex)",
          "old_line_content": "        o = listNodeValue(head);",
          "new_line_content": "    if (server.vm_enabled) pthread_mutex_lock(&server.obj_freelist_mutex);",
          "content_same": false
        },
        {
          "line": 8040,
          "old_api": "listDelNode",
          "new_api": "listLength",
          "old_text": "listDelNode(server.objfreelist,head)",
          "new_text": "listLength(server.objfreelist)",
          "old_line_content": "        listDelNode(server.objfreelist,head);",
          "new_line_content": "    if (listLength(server.objfreelist)) {",
          "content_same": false
        },
        {
          "line": 8041,
          "old_api": "pthread_mutex_unlock",
          "new_api": "listFirst",
          "old_text": "pthread_mutex_unlock(&server.obj_freelist_mutex)",
          "new_text": "listFirst(server.objfreelist)",
          "old_line_content": "        if (server.vm_enabled) pthread_mutex_unlock(&server.obj_freelist_mutex);",
          "new_line_content": "        listNode *head = listFirst(server.objfreelist);",
          "content_same": false
        },
        {
          "line": 8042,
          "old_api": "zfree",
          "new_api": "listNodeValue",
          "old_text": "zfree(o)",
          "new_text": "listNodeValue(head)",
          "old_line_content": "        zfree(o);",
          "new_line_content": "        o = listNodeValue(head);",
          "content_same": false
        },
        {
          "line": 8045,
          "old_api": "pthread_mutex_unlock",
          "new_api": "zfree",
          "old_text": "pthread_mutex_unlock(&server.obj_freelist_mutex)",
          "new_text": "zfree(o)",
          "old_line_content": "        if (server.vm_enabled) pthread_mutex_unlock(&server.obj_freelist_mutex);",
          "new_line_content": "        zfree(o);",
          "content_same": false
        },
        {
          "line": 8065,
          "old_api": "tryFreeOneObjectFromFreelist",
          "new_api": "zmalloc_used_memory",
          "old_text": "tryFreeOneObjectFromFreelist()",
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "        if (tryFreeOneObjectFromFreelist() == REDIS_OK) continue;",
          "new_line_content": "    while (server.maxmemory && zmalloc_used_memory() > server.maxmemory) {",
          "content_same": false
        },
        {
          "line": 8081,
          "old_api": "dictGetEntryKey",
          "new_api": "dictGetRandomKey",
          "old_text": "dictGetEntryKey(de)",
          "new_text": "dictGetRandomKey(server.db[j].expires)",
          "old_line_content": "                        minkey = dictGetEntryKey(de);",
          "new_line_content": "                    de = dictGetRandomKey(server.db[j].expires);",
          "content_same": false
        },
        {
          "line": 8125,
          "old_api": "sdsempty",
          "new_api": "exit",
          "old_text": "sdsempty()",
          "new_text": "exit(1)",
          "old_line_content": "    server.aofbuf = sdsempty();",
          "new_line_content": "         exit(1);",
          "content_same": false
        },
        {
          "line": 8128,
          "old_api": "time",
          "new_api": "sdsempty",
          "old_text": "time(NULL)",
          "new_text": "sdsempty()",
          "old_line_content": "    now = time(NULL);",
          "new_line_content": "    server.aofbuf = sdsempty();",
          "content_same": false
        },
        {
          "line": 8164,
          "old_api": "strtol",
          "new_api": "createStringObject",
          "old_text": "strtol(argv[2]->ptr,NULL,10)",
          "new_text": "createStringObject(\"EXPIREAT\",8)",
          "old_line_content": "        when = time(NULL)+strtol(argv[2]->ptr,NULL,10);",
          "new_line_content": "        tmpargv[0] = createStringObject(\"EXPIREAT\",8);",
          "content_same": false
        },
        {
          "line": 8166,
          "old_api": "sdsempty",
          "new_api": "incrRefCount",
          "old_text": "sdsempty()",
          "new_text": "incrRefCount(argv[1])",
          "old_line_content": "            sdscatprintf(sdsempty(),\"%ld\",when));",
          "new_line_content": "        incrRefCount(argv[1]);",
          "content_same": false
        },
        {
          "line": 8178,
          "old_api": "sdscatlen",
          "new_api": "getDecodedObject",
          "old_text": "sdscatlen(buf,\"\\r\\n\",2)",
          "new_text": "getDecodedObject(o)",
          "old_line_content": "        buf = sdscatlen(buf,\"\\r\\n\",2);",
          "new_line_content": "        o = getDecodedObject(o);",
          "content_same": false
        },
        {
          "line": 8179,
          "old_api": "decrRefCount",
          "new_api": "sdslen",
          "old_text": "decrRefCount(o)",
          "new_text": "sdslen(o->ptr)",
          "old_line_content": "        decrRefCount(o);",
          "new_line_content": "        buf = sdscatprintf(buf,\"$%lu\\r\\n\",(unsigned long)sdslen(o->ptr));",
          "content_same": false
        },
        {
          "line": 8220,
          "old_api": "initClientMultiState",
          "new_api": "listCreate",
          "old_text": "initClientMultiState(c)",
          "new_text": "listCreate()",
          "old_line_content": "    initClientMultiState(c);",
          "new_line_content": "    c->reply = listCreate();",
          "content_same": false
        },
        {
          "line": 8228,
          "old_api": "zfree",
          "new_api": "sdsfree",
          "old_text": "zfree(c)",
          "new_text": "sdsfree(c->querybuf)",
          "old_line_content": "    zfree(c);",
          "new_line_content": "    sdsfree(c->querybuf);",
          "content_same": false
        },
        {
          "line": 8272,
          "old_api": "fgets",
          "new_api": "atoi",
          "old_text": "fgets(buf,sizeof(buf),fp)",
          "new_text": "atoi(buf+1)",
          "old_line_content": "            if (fgets(buf,sizeof(buf),fp) == NULL) goto readerr;",
          "new_line_content": "        argc = atoi(buf+1);",
          "content_same": false
        },
        {
          "line": 8275,
          "old_api": "sdsnewlen",
          "new_api": "fgets",
          "old_text": "sdsnewlen(NULL,len)",
          "new_text": "fgets(buf,sizeof(buf),fp)",
          "old_line_content": "            argsds = sdsnewlen(NULL,len);",
          "new_line_content": "            if (fgets(buf,sizeof(buf),fp) == NULL) goto readerr;",
          "content_same": false
        },
        {
          "line": 8277,
          "old_api": "createObject",
          "new_api": "strtol",
          "old_text": "createObject(REDIS_STRING,argsds)",
          "new_text": "strtol(buf+1,NULL,10)",
          "old_line_content": "            argv[j] = createObject(REDIS_STRING,argsds);",
          "new_line_content": "            len = strtol(buf+1,NULL,10);",
          "content_same": false
        },
        {
          "line": 8278,
          "old_api": "fread",
          "new_api": "sdsnewlen",
          "old_text": "fread(buf,2,1,fp)",
          "new_text": "sdsnewlen(NULL,len)",
          "old_line_content": "            if (fread(buf,2,1,fp) == 0) goto fmterr; /* discard CRLF */",
          "new_line_content": "            argsds = sdsnewlen(NULL,len);",
          "content_same": false
        },
        {
          "line": 8285,
          "old_api": "exit",
          "new_api": "lookupCommand",
          "old_text": "exit(1)",
          "new_text": "lookupCommand(argv[0]->ptr)",
          "old_line_content": "            exit(1);",
          "new_line_content": "        cmd = lookupCommand(argv[0]->ptr);",
          "content_same": false
        },
        {
          "line": 8296,
          "old_api": "listFirst",
          "new_api": "proc",
          "old_text": "listFirst(fakeClient->reply)",
          "new_text": "cmd->proc(fakeClient)",
          "old_line_content": "            listDelNode(fakeClient->reply,listFirst(fakeClient->reply));",
          "new_line_content": "        cmd->proc(fakeClient);",
          "content_same": false
        },
        {
          "line": 8298,
          "old_api": "decrRefCount",
          "new_api": "listLength",
          "old_text": "decrRefCount(argv[j])",
          "new_text": "listLength(fakeClient->reply)",
          "old_line_content": "        for (j = 0; j < argc; j++) decrRefCount(argv[j]);",
          "new_line_content": "        while(listLength(fakeClient->reply))",
          "content_same": false
        },
        {
          "line": 8299,
          "old_api": "zfree",
          "new_api": "listFirst",
          "old_text": "zfree(argv)",
          "new_text": "listFirst(fakeClient->reply)",
          "old_line_content": "        zfree(argv);",
          "new_line_content": "            listDelNode(fakeClient->reply,listFirst(fakeClient->reply));",
          "content_same": false
        },
        {
          "line": 8322,
          "old_api": "strerror",
          "new_api": "feof",
          "old_text": "strerror(errno)",
          "new_text": "feof(fp)",
          "old_line_content": "        redisLog(REDIS_WARNING,\"Unrecoverable error reading the append only file: %s\", strerror(errno));",
          "new_line_content": "    if (feof(fp)) {",
          "content_same": false
        },
        {
          "line": 8344,
          "old_api": "sdslen",
          "new_api": "getDecodedObject",
          "old_text": "sdslen(obj->ptr)",
          "new_text": "getDecodedObject(obj)",
          "old_line_content": "    snprintf(buf,sizeof(buf),\"$%ld\\r\\n\",(long)sdslen(obj->ptr));",
          "new_line_content": "        obj = getDecodedObject(obj);",
          "content_same": false
        },
        {
          "line": 8348,
          "old_api": "fwrite",
          "new_api": "strlen",
          "old_text": "fwrite(\"\\r\\n\",2,1,fp)",
          "new_text": "strlen(buf)",
          "old_line_content": "    if (fwrite(\"\\r\\n\",2,1,fp) == 0) goto err;",
          "new_line_content": "    if (fwrite(buf,strlen(buf),1,fp) == 0) goto err;",
          "content_same": false
        },
        {
          "line": 8349,
          "old_api": "decrRefCount",
          "new_api": "sdslen",
          "old_text": "decrRefCount(obj)",
          "new_text": "sdslen(obj->ptr)",
          "old_line_content": "    if (decrrc) decrRefCount(obj);",
          "new_line_content": "    if (sdslen(obj->ptr) && fwrite(obj->ptr,sdslen(obj->ptr),1,fp) == 0)",
          "content_same": false
        },
        {
          "line": 8364,
          "old_api": "fwrite",
          "new_api": "snprintf",
          "old_text": "fwrite(\"\\r\\n\",2,1,fp)",
          "new_text": "snprintf(buf,sizeof(buf),\"$%ld\\r\\n\",(unsigned long)len)",
          "old_line_content": "    if (fwrite(\"\\r\\n\",2,1,fp) == 0) return 0;",
          "new_line_content": "    snprintf(buf,sizeof(buf),\"$%ld\\r\\n\",(unsigned long)len);",
          "content_same": false
        },
        {
          "line": 8375,
          "old_api": "strlen",
          "new_api": "snprintf",
          "old_text": "strlen(dbuf)",
          "new_text": "snprintf(dbuf,sizeof(dbuf),\"%.17g\\r\\n\",d)",
          "old_line_content": "    if (fwrite(dbuf,strlen(dbuf),1,fp) == 0) return 0;",
          "new_line_content": "    snprintf(dbuf,sizeof(dbuf),\"%.17g\\r\\n\",d);",
          "content_same": false
        },
        {
          "line": 8386,
          "old_api": "strlen",
          "new_api": "snprintf",
          "old_text": "strlen(lbuf)",
          "new_text": "snprintf(lbuf,sizeof(lbuf),\"%ld\\r\\n\",l)",
          "old_line_content": "    if (fwrite(lbuf,strlen(lbuf),1,fp) == 0) return 0;",
          "new_line_content": "    snprintf(lbuf,sizeof(lbuf),\"%ld\\r\\n\",l);",
          "content_same": false
        },
        {
          "line": 8405,
          "old_api": "strerror",
          "new_api": "getpid",
          "old_text": "strerror(errno)",
          "new_text": "getpid()",
          "old_line_content": "        redisLog(REDIS_WARNING, \"Failed rewriting the append only file: %s\", strerror(errno));",
          "new_line_content": "    snprintf(tmpfile,256,\"temp-rewriteaof-%d.aof\", (int) getpid());",
          "content_same": false
        },
        {
          "line": 8415,
          "old_api": "fclose",
          "new_api": "dictSize",
          "old_text": "fclose(fp)",
          "new_text": "dictSize(d)",
          "old_line_content": "            fclose(fp);",
          "new_line_content": "        if (dictSize(d) == 0) continue;",
          "content_same": false
        },
        {
          "line": 8424,
          "old_api": "dictNext",
          "new_api": "fwriteBulkLong",
          "old_text": "dictNext(di)",
          "new_text": "fwriteBulkLong(fp,j)",
          "old_line_content": "        while((de = dictNext(di)) != NULL) {",
          "new_line_content": "        if (fwriteBulkLong(fp,j) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8439,
          "old_api": "vmPreviewObject",
          "new_api": "dictGetEntryVal",
          "old_text": "vmPreviewObject(key)",
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "                o = vmPreviewObject(key);",
          "new_line_content": "                o = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 8442,
          "old_api": "getExpire",
          "new_api": "vmPreviewObject",
          "old_text": "getExpire(db,key)",
          "new_text": "vmPreviewObject(key)",
          "old_line_content": "            expiretime = getExpire(db,key);",
          "new_line_content": "                o = vmPreviewObject(key);",
          "content_same": false
        },
        {
          "line": 8451,
          "old_api": "fwriteBulkObject",
          "new_api": "fwrite",
          "old_text": "fwriteBulkObject(fp,o)",
          "new_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "old_line_content": "                if (fwriteBulkObject(fp,o) == 0) goto werr;",
          "new_line_content": "                if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8461,
          "old_api": "listNodeValue",
          "new_api": "listRewind",
          "old_text": "listNodeValue(ln)",
          "new_text": "listRewind(list,&li)",
          "old_line_content": "                    robj *eleobj = listNodeValue(ln);",
          "new_line_content": "                listRewind(list,&li);",
          "content_same": false
        },
        {
          "line": 8464,
          "old_api": "fwriteBulkObject",
          "new_api": "listNodeValue",
          "old_text": "fwriteBulkObject(fp,key)",
          "new_text": "listNodeValue(ln)",
          "old_line_content": "                    if (fwriteBulkObject(fp,key) == 0) goto werr;",
          "new_line_content": "                    robj *eleobj = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 8473,
          "old_api": "dictNext",
          "new_api": "dictGetIterator",
          "old_text": "dictNext(di)",
          "new_text": "dictGetIterator(set)",
          "old_line_content": "                while((de = dictNext(di)) != NULL) {",
          "new_line_content": "                dictIterator *di = dictGetIterator(set);",
          "content_same": false
        },
        {
          "line": 8478,
          "old_api": "fwriteBulkObject",
          "new_api": "dictGetEntryKey",
          "old_text": "fwriteBulkObject(fp,key)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "                    if (fwriteBulkObject(fp,key) == 0) goto werr;",
          "new_line_content": "                    robj *eleobj = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 8481,
          "old_api": "dictReleaseIterator",
          "new_api": "fwriteBulkObject",
          "old_text": "dictReleaseIterator(di)",
          "new_text": "fwriteBulkObject(fp,key)",
          "old_line_content": "                dictReleaseIterator(di);",
          "new_line_content": "                    if (fwriteBulkObject(fp,key) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8488,
          "old_api": "dictNext",
          "new_api": "dictGetIterator",
          "old_text": "dictNext(di)",
          "new_text": "dictGetIterator(zs->dict)",
          "old_line_content": "                while((de = dictNext(di)) != NULL) {",
          "new_line_content": "                dictIterator *di = dictGetIterator(zs->dict);",
          "content_same": false
        },
        {
          "line": 8491,
          "old_api": "dictGetEntryVal",
          "new_api": "dictNext",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "dictNext(di)",
          "old_line_content": "                    double *score = dictGetEntryVal(de);",
          "new_line_content": "                while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 8493,
          "old_api": "fwrite",
          "new_api": "dictGetEntryKey",
          "old_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "                    if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "new_line_content": "                    robj *eleobj = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 8494,
          "old_api": "fwriteBulkObject",
          "new_api": "dictGetEntryVal",
          "old_text": "fwriteBulkObject(fp,key)",
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "                    if (fwriteBulkObject(fp,key) == 0) goto werr;",
          "new_line_content": "                    double *score = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 8496,
          "old_api": "fwriteBulkObject",
          "new_api": "fwrite",
          "old_text": "fwriteBulkObject(fp,eleobj)",
          "new_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "old_line_content": "                    if (fwriteBulkObject(fp,eleobj) == 0) goto werr;",
          "new_line_content": "                    if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8498,
          "old_api": "dictReleaseIterator",
          "new_api": "fwriteBulkDouble",
          "old_text": "dictReleaseIterator(di)",
          "new_text": "fwriteBulkDouble(fp,*score)",
          "old_line_content": "                dictReleaseIterator(di);",
          "new_line_content": "                    if (fwriteBulkDouble(fp,*score) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8511,
          "old_api": "fwriteBulkString",
          "new_api": "zipmapNext",
          "old_text": "fwriteBulkString(fp,(char*)field,flen)",
          "new_text": "zipmapNext(p,&field,&flen,&val,&vlen)",
          "old_line_content": "                        if (fwriteBulkString(fp,(char*)field,flen) == -1)",
          "new_line_content": "                    while((p = zipmapNext(p,&field,&flen,&val,&vlen)) != NULL) {",
          "content_same": false
        },
        {
          "line": 8513,
          "old_api": "fwriteBulkString",
          "new_api": "fwriteBulkObject",
          "old_text": "fwriteBulkString(fp,(char*)val,vlen)",
          "new_text": "fwriteBulkObject(fp,key)",
          "old_line_content": "                        if (fwriteBulkString(fp,(char*)val,vlen) == -1)",
          "new_line_content": "                        if (fwriteBulkObject(fp,key) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8520,
          "old_api": "dictNext",
          "new_api": "dictGetIterator",
          "old_text": "dictNext(di)",
          "new_text": "dictGetIterator(o->ptr)",
          "old_line_content": "                    while((de = dictNext(di)) != NULL) {",
          "new_line_content": "                    dictIterator *di = dictGetIterator(o->ptr);",
          "content_same": false
        },
        {
          "line": 8524,
          "old_api": "fwrite",
          "new_api": "dictGetEntryKey",
          "old_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "                        if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "new_line_content": "                        robj *field = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 8525,
          "old_api": "fwriteBulkObject",
          "new_api": "dictGetEntryVal",
          "old_text": "fwriteBulkObject(fp,key)",
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "                        if (fwriteBulkObject(fp,key) == 0) goto werr;",
          "new_line_content": "                        robj *val = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 8527,
          "old_api": "fwriteBulkObject",
          "new_api": "fwrite",
          "old_text": "fwriteBulkObject(fp,val)",
          "new_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "old_line_content": "                        if (fwriteBulkObject(fp,val) == -1) return -1;",
          "new_line_content": "                        if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8529,
          "old_api": "dictReleaseIterator",
          "new_api": "fwriteBulkObject",
          "old_text": "dictReleaseIterator(di)",
          "new_text": "fwriteBulkObject(fp,field)",
          "old_line_content": "                    dictReleaseIterator(di);",
          "new_line_content": "                        if (fwriteBulkObject(fp,field) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 8532,
          "old_api": "redisPanic",
          "new_api": "dictReleaseIterator",
          "old_text": "redisPanic(\"Unknown object type\")",
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "                redisPanic(\"Unknown object type\");",
          "new_line_content": "                    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 8543,
          "old_api": "decrRefCount",
          "new_api": "fwriteBulkObject",
          "old_text": "decrRefCount(o)",
          "new_text": "fwriteBulkObject(fp,key)",
          "old_line_content": "            if (swapped) decrRefCount(o);",
          "new_line_content": "                if (fwriteBulkObject(fp,key) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8560,
          "old_api": "redisLog",
          "new_api": "unlink",
          "old_text": "redisLog(REDIS_NOTICE,\"SYNC append only file rewrite performed\")",
          "new_text": "unlink(tmpfile)",
          "old_line_content": "    redisLog(REDIS_NOTICE,\"SYNC append only file rewrite performed\");",
          "new_line_content": "        unlink(tmpfile);",
          "content_same": false
        },
        {
          "line": 8567,
          "old_api": "dictReleaseIterator",
          "new_api": "fclose",
          "old_text": "dictReleaseIterator(di)",
          "new_text": "fclose(fp)",
          "old_line_content": "    if (di) dictReleaseIterator(di);",
          "new_line_content": "    fclose(fp);",
          "content_same": false
        },
        {
          "line": 8595,
          "old_api": "rewriteAppendOnlyFile",
          "new_api": "vmReopenSwapFile",
          "old_text": "rewriteAppendOnlyFile(tmpfile)",
          "new_text": "vmReopenSwapFile()",
          "old_line_content": "        if (rewriteAppendOnlyFile(tmpfile) == REDIS_OK) {",
          "new_line_content": "        if (server.vm_enabled) vmReopenSwapFile();",
          "content_same": false
        },
        {
          "line": 8596,
          "old_api": "_exit",
          "new_api": "close",
          "old_text": "_exit(0)",
          "new_text": "close(server.fd)",
          "old_line_content": "            _exit(0);",
          "new_line_content": "        close(server.fd);",
          "content_same": false
        },
        {
          "line": 8598,
          "old_api": "_exit",
          "new_api": "rewriteAppendOnlyFile",
          "old_text": "_exit(1)",
          "new_text": "rewriteAppendOnlyFile(tmpfile)",
          "old_line_content": "            _exit(1);",
          "new_line_content": "        if (rewriteAppendOnlyFile(tmpfile) == REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 8608,
          "old_api": "redisLog",
          "new_api": "strerror",
          "old_text": "redisLog(REDIS_NOTICE,\n            \"Background append only file rewriting started by pid %d\",childpid)",
          "new_text": "strerror(errno)",
          "old_line_content": "        redisLog(REDIS_NOTICE,",
          "new_line_content": "                strerror(errno));",
          "content_same": false
        },
        {
          "line": 8611,
          "old_api": "updateDictResizePolicy",
          "new_api": "redisLog",
          "old_text": "updateDictResizePolicy()",
          "new_text": "redisLog(REDIS_NOTICE,\n            \"Background append only file rewriting started by pid %d\",childpid)",
          "old_line_content": "        updateDictResizePolicy();",
          "new_line_content": "        redisLog(REDIS_NOTICE,",
          "content_same": false
        },
        {
          "line": 8627,
          "old_api": "rewriteAppendOnlyFileBackground",
          "new_api": "sdsnew",
          "old_text": "rewriteAppendOnlyFileBackground()",
          "new_text": "sdsnew(\"-ERR background append only file rewriting already in progress\\r\\n\")",
          "old_line_content": "    if (rewriteAppendOnlyFileBackground() == REDIS_OK) {",
          "new_line_content": "        addReplySds(c,sdsnew(\"-ERR background append only file rewriting already in progress\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 8677,
          "old_api": "fopen",
          "new_api": "redisLog",
          "old_text": "fopen(server.vm_swap_file,\"w+b\")",
          "new_text": "redisLog(REDIS_NOTICE,\"Using '%s' as swap file\",server.vm_swap_file)",
          "old_line_content": "        server.vm_fp = fopen(server.vm_swap_file,\"w+b\");",
          "new_line_content": "    redisLog(REDIS_NOTICE,\"Using '%s' as swap file\",server.vm_swap_file);",
          "content_same": false
        },
        {
          "line": 8680,
          "old_api": "redisLog",
          "new_api": "fopen",
          "old_text": "redisLog(REDIS_WARNING,\n            \"Can't open the swap file: %s. Exiting.\",\n            strerror(errno))",
          "new_text": "fopen(server.vm_swap_file,\"w+b\")",
          "old_line_content": "        redisLog(REDIS_WARNING,",
          "new_line_content": "        server.vm_fp = fopen(server.vm_swap_file,\"w+b\");",
          "content_same": false
        },
        {
          "line": 8683,
          "old_api": "exit",
          "new_api": "redisLog",
          "old_text": "exit(1)",
          "new_text": "redisLog(REDIS_WARNING,\n            \"Can't open the swap file: %s. Exiting.\",\n            strerror(errno))",
          "old_line_content": "        exit(1);",
          "new_line_content": "        redisLog(REDIS_WARNING,",
          "content_same": false
        },
        {
          "line": 8685,
          "old_api": "fileno",
          "new_api": "strerror",
          "old_text": "fileno(server.vm_fp)",
          "new_text": "strerror(errno)",
          "old_line_content": "    server.vm_fd = fileno(server.vm_fp);",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 8694,
          "old_api": "exit",
          "new_api": "fcntl",
          "old_text": "exit(1)",
          "new_text": "fcntl(server.vm_fd,F_SETLK,&fl)",
          "old_line_content": "        exit(1);",
          "new_line_content": "    if (fcntl(server.vm_fd,F_SETLK,&fl) == -1) {",
          "content_same": false
        },
        {
          "line": 8707,
          "old_api": "strerror",
          "new_api": "redisLog",
          "old_text": "strerror(errno)",
          "new_text": "redisLog(REDIS_NOTICE,\"Allocating %lld bytes of swap file\",totsize)",
          "old_line_content": "            strerror(errno));",
          "new_line_content": "    redisLog(REDIS_NOTICE,\"Allocating %lld bytes of swap file\",totsize);",
          "content_same": false
        },
        {
          "line": 8708,
          "old_api": "exit",
          "new_api": "ftruncate",
          "old_text": "exit(1)",
          "new_text": "ftruncate(server.vm_fd,totsize)",
          "old_line_content": "        exit(1);",
          "new_line_content": "    if (ftruncate(server.vm_fd,totsize) == -1) {",
          "content_same": false
        },
        {
          "line": 8710,
          "old_api": "redisLog",
          "new_api": "strerror",
          "old_text": "redisLog(REDIS_NOTICE,\"Swap file allocated with success\")",
          "new_text": "strerror(errno)",
          "old_line_content": "        redisLog(REDIS_NOTICE,\"Swap file allocated with success\");",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 8715,
          "old_api": "memset",
          "new_api": "zmalloc",
          "old_text": "memset(server.vm_bitmap,0,(server.vm_pages+7)/8)",
          "new_text": "zmalloc((server.vm_pages+7)/8)",
          "old_line_content": "    memset(server.vm_bitmap,0,(server.vm_pages+7)/8);",
          "new_line_content": "    server.vm_bitmap = zmalloc((server.vm_pages+7)/8);",
          "content_same": false
        },
        {
          "line": 8718,
          "old_api": "listCreate",
          "new_api": "memset",
          "old_text": "listCreate()",
          "new_text": "memset(server.vm_bitmap,0,(server.vm_pages+7)/8)",
          "old_line_content": "    server.io_newjobs = listCreate();",
          "new_line_content": "    memset(server.vm_bitmap,0,(server.vm_pages+7)/8);",
          "content_same": false
        },
        {
          "line": 8722,
          "old_api": "pthread_mutex_init",
          "new_api": "listCreate",
          "old_text": "pthread_mutex_init(&server.io_mutex,NULL)",
          "new_text": "listCreate()",
          "old_line_content": "    pthread_mutex_init(&server.io_mutex,NULL);",
          "new_line_content": "    server.io_processing = listCreate();",
          "content_same": false
        },
        {
          "line": 8723,
          "old_api": "pthread_mutex_init",
          "new_api": "listCreate",
          "old_text": "pthread_mutex_init(&server.obj_freelist_mutex,NULL)",
          "new_text": "listCreate()",
          "old_line_content": "    pthread_mutex_init(&server.obj_freelist_mutex,NULL);",
          "new_line_content": "    server.io_processed = listCreate();",
          "content_same": false
        },
        {
          "line": 8724,
          "old_api": "pthread_mutex_init",
          "new_api": "listCreate",
          "old_text": "pthread_mutex_init(&server.io_swapfile_mutex,NULL)",
          "new_text": "listCreate()",
          "old_line_content": "    pthread_mutex_init(&server.io_swapfile_mutex,NULL);",
          "new_line_content": "    server.io_ready_clients = listCreate();",
          "content_same": false
        },
        {
          "line": 8726,
          "old_api": "pipe",
          "new_api": "pthread_mutex_init",
          "old_text": "pipe(pipefds)",
          "new_text": "pthread_mutex_init(&server.obj_freelist_mutex,NULL)",
          "old_line_content": "    if (pipe(pipefds) == -1) {",
          "new_line_content": "    pthread_mutex_init(&server.obj_freelist_mutex,NULL);",
          "content_same": false
        },
        {
          "line": 8727,
          "old_api": "redisLog",
          "new_api": "pthread_mutex_init",
          "old_text": "redisLog(REDIS_WARNING,\"Unable to intialized VM: pipe(2): %s. Exiting.\"\n            ,strerror(errno))",
          "new_text": "pthread_mutex_init(&server.io_swapfile_mutex,NULL)",
          "old_line_content": "        redisLog(REDIS_WARNING,\"Unable to intialized VM: pipe(2): %s. Exiting.\"",
          "new_line_content": "    pthread_mutex_init(&server.io_swapfile_mutex,NULL);",
          "content_same": false
        },
        {
          "line": 8729,
          "old_api": "exit",
          "new_api": "pipe",
          "old_text": "exit(1)",
          "new_text": "pipe(pipefds)",
          "old_line_content": "        exit(1);",
          "new_line_content": "    if (pipe(pipefds) == -1) {",
          "content_same": false
        },
        {
          "line": 8736,
          "old_api": "pthread_attr_getstacksize",
          "new_api": "anetNonBlock",
          "old_text": "pthread_attr_getstacksize(&server.io_threads_attr, &stacksize)",
          "new_text": "anetNonBlock(NULL,server.io_ready_pipe_read)",
          "old_line_content": "    pthread_attr_getstacksize(&server.io_threads_attr, &stacksize);",
          "new_line_content": "    redisAssert(anetNonBlock(NULL,server.io_ready_pipe_read) != ANET_ERR);",
          "content_same": false
        },
        {
          "line": 8738,
          "old_api": "pthread_attr_setstacksize",
          "new_api": "pthread_attr_init",
          "old_text": "pthread_attr_setstacksize(&server.io_threads_attr, stacksize)",
          "new_text": "pthread_attr_init(&server.io_threads_attr)",
          "old_line_content": "    pthread_attr_setstacksize(&server.io_threads_attr, stacksize);",
          "new_line_content": "    pthread_attr_init(&server.io_threads_attr);",
          "content_same": false
        },
        {
          "line": 8868,
          "old_api": "redisLog",
          "new_api": "pthread_mutex_lock",
          "old_text": "redisLog(REDIS_WARNING,\n            \"Critical VM problem in vmWriteObjectOnSwap(): can't seek: %s\",\n            strerror(errno))",
          "new_text": "pthread_mutex_lock(&server.io_swapfile_mutex)",
          "old_line_content": "        redisLog(REDIS_WARNING,",
          "new_line_content": "    if (server.vm_enabled) pthread_mutex_lock(&server.io_swapfile_mutex);",
          "content_same": false
        },
        {
          "line": 8870,
          "old_api": "strerror",
          "new_api": "pthread_mutex_unlock",
          "old_text": "strerror(errno)",
          "new_text": "pthread_mutex_unlock(&server.io_swapfile_mutex)",
          "old_line_content": "            strerror(errno));",
          "new_line_content": "        if (server.vm_enabled) pthread_mutex_unlock(&server.io_swapfile_mutex);",
          "content_same": false
        },
        {
          "line": 8873,
          "old_api": "rdbSaveObject",
          "new_api": "strerror",
          "old_text": "rdbSaveObject(server.vm_fp,o)",
          "new_text": "strerror(errno)",
          "old_line_content": "    rdbSaveObject(server.vm_fp,o);",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 8887,
          "old_api": "assert",
          "new_api": "rdbSavedObjectPages",
          "old_text": "assert(key->storage == REDIS_VM_MEMORY)",
          "new_text": "rdbSavedObjectPages(val,NULL)",
          "old_line_content": "    assert(key->storage == REDIS_VM_MEMORY);",
          "new_line_content": "    off_t pages = rdbSavedObjectPages(val,NULL);",
          "content_same": false
        },
        {
          "line": 8890,
          "old_api": "vmWriteObjectOnSwap",
          "new_api": "assert",
          "old_text": "vmWriteObjectOnSwap(val,page)",
          "new_text": "assert(key->storage == REDIS_VM_MEMORY)",
          "old_line_content": "    if (vmWriteObjectOnSwap(val,page) == REDIS_ERR) return REDIS_ERR;",
          "new_line_content": "    assert(key->storage == REDIS_VM_MEMORY);",
          "content_same": false
        },
        {
          "line": 8912,
          "old_api": "strerror",
          "new_api": "fseeko",
          "old_text": "strerror(errno)",
          "new_text": "fseeko(server.vm_fp,page*server.vm_page_size,SEEK_SET)",
          "old_line_content": "            strerror(errno));",
          "new_line_content": "    if (fseeko(server.vm_fp,page*server.vm_page_size,SEEK_SET) == -1) {",
          "content_same": false
        },
        {
          "line": 8913,
          "old_api": "_exit",
          "new_api": "redisLog",
          "old_text": "_exit(1)",
          "new_text": "redisLog(REDIS_WARNING,\n            \"Unrecoverable VM problem in vmReadObjectFromSwap(): can't seek: %s\",\n            strerror(errno))",
          "old_line_content": "        _exit(1);",
          "new_line_content": "        redisLog(REDIS_WARNING,",
          "content_same": false
        },
        {
          "line": 8915,
          "old_api": "rdbLoadObject",
          "new_api": "strerror",
          "old_text": "rdbLoadObject(type,server.vm_fp)",
          "new_text": "strerror(errno)",
          "old_line_content": "    o = rdbLoadObject(type,server.vm_fp);",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 8918,
          "old_api": "_exit",
          "new_api": "rdbLoadObject",
          "old_text": "_exit(1)",
          "new_text": "rdbLoadObject(type,server.vm_fp)",
          "old_line_content": "        _exit(1);",
          "new_line_content": "    o = rdbLoadObject(type,server.vm_fp);",
          "content_same": false
        },
        {
          "line": 8920,
          "old_api": "pthread_mutex_unlock",
          "new_api": "strerror",
          "old_text": "pthread_mutex_unlock(&server.io_swapfile_mutex)",
          "new_text": "strerror(errno)",
          "old_line_content": "    if (server.vm_enabled) pthread_mutex_unlock(&server.io_swapfile_mutex);",
          "new_line_content": "        redisLog(REDIS_WARNING, \"Unrecoverable VM problem in vmReadObjectFromSwap(): can't load object from swap file: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 9023,
          "old_api": "sdslen",
          "new_api": "dictGetRandomKey",
          "old_text": "sdslen(ele->ptr)",
          "new_text": "dictGetRandomKey(d)",
          "old_line_content": "                            (sizeof(*o)+sdslen(ele->ptr)) :",
          "new_line_content": "            de = dictGetRandomKey(d);",
          "content_same": false
        },
        {
          "line": 9026,
          "old_api": "dictSize",
          "new_api": "sdslen",
          "old_text": "dictSize(d)",
          "new_text": "sdslen(ele->ptr)",
          "old_line_content": "            if (z) asize += sizeof(zskiplistNode)*dictSize(d);",
          "new_line_content": "                            (sizeof(*o)+sdslen(ele->ptr)) :",
          "content_same": false
        },
        {
          "line": 9051,
          "old_api": "sdslen",
          "new_api": "dictGetRandomKey",
          "old_text": "sdslen(ele->ptr)",
          "new_text": "dictGetRandomKey(d)",
          "old_line_content": "                                (sizeof(*o)+sdslen(ele->ptr)) :",
          "new_line_content": "                de = dictGetRandomKey(d);",
          "content_same": false
        },
        {
          "line": 9117,
          "old_api": "redisLog",
          "new_api": "dictGetEntryKey",
          "old_text": "redisLog(REDIS_DEBUG,\"Key with best swappability: %s, %f\",\n        key->ptr, best_swappability)",
          "new_text": "dictGetEntryKey(best)",
          "old_line_content": "    redisLog(REDIS_DEBUG,\"Key with best swappability: %s, %f\",",
          "new_line_content": "    key = dictGetEntryKey(best);",
          "content_same": false
        },
        {
          "line": 9131,
          "old_api": "vmSwapObjectBlocking",
          "new_api": "vmSwapObjectThreaded",
          "old_text": "vmSwapObjectBlocking(key,val)",
          "new_text": "vmSwapObjectThreaded(key,val,best_db)",
          "old_line_content": "        if (vmSwapObjectBlocking(key,val) == REDIS_OK) {",
          "new_line_content": "        vmSwapObjectThreaded(key,val,best_db);",
          "content_same": false
        },
        {
          "line": 9164,
          "old_api": "deleteKey",
          "new_api": "dictFind",
          "old_text": "deleteKey(db,key)",
          "new_text": "dictFind(db->dict,key)",
          "old_line_content": "    deleteKey(db,key);",
          "new_line_content": "    if ((de = dictFind(db->dict,key)) == NULL) return 0;",
          "content_same": false
        },
        {
          "line": 9205,
          "old_api": "lockThreadedIO",
          "new_api": "redisLog",
          "old_text": "lockThreadedIO()",
          "new_text": "redisLog(REDIS_DEBUG,\"Processing I/O completed job\")",
          "old_line_content": "        lockThreadedIO();",
          "new_line_content": "        redisLog(REDIS_DEBUG,\"Processing I/O completed job\");",
          "content_same": false
        },
        {
          "line": 9208,
          "old_api": "listLength",
          "new_api": "lockThreadedIO",
          "old_text": "listLength(server.io_processed)",
          "new_text": "lockThreadedIO()",
          "old_line_content": "            toprocess = (listLength(server.io_processed)*REDIS_MAX_COMPLETED_JOBS_PROCESSED)/100;",
          "new_line_content": "        lockThreadedIO();",
          "content_same": false
        },
        {
          "line": 9211,
          "old_api": "listFirst",
          "new_api": "listLength",
          "old_text": "listFirst(server.io_processed)",
          "new_text": "listLength(server.io_processed)",
          "old_line_content": "        ln = listFirst(server.io_processed);",
          "new_line_content": "            toprocess = (listLength(server.io_processed)*REDIS_MAX_COMPLETED_JOBS_PROCESSED)/100;",
          "content_same": false
        },
        {
          "line": 9214,
          "old_api": "unlockThreadedIO",
          "new_api": "listFirst",
          "old_text": "unlockThreadedIO()",
          "new_text": "listFirst(server.io_processed)",
          "old_line_content": "        unlockThreadedIO();",
          "new_line_content": "        ln = listFirst(server.io_processed);",
          "content_same": false
        },
        {
          "line": 9217,
          "old_api": "freeIOJob",
          "new_api": "unlockThreadedIO",
          "old_text": "freeIOJob(j)",
          "new_text": "unlockThreadedIO()",
          "old_line_content": "            freeIOJob(j);",
          "new_line_content": "        unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 9225,
          "old_api": "dictGetEntryKey",
          "new_api": "redisLog",
          "old_text": "dictGetEntryKey(de)",
          "new_text": "redisLog(REDIS_DEBUG,\"Job %p type: %d, key at %p (%s) refcount: %d\\n\", (void*) j, j->type, (void*)j->key, (char*)j->key->ptr, j->key->refcount)",
          "old_line_content": "        key = dictGetEntryKey(de);",
          "new_line_content": "        redisLog(REDIS_DEBUG,\"Job %p type: %d, key at %p (%s) refcount: %d\\n\", (void*) j, j->type, (void*)j->key, (char*)j->key->ptr, j->key->refcount);",
          "content_same": false
        },
        {
          "line": 9240,
          "old_api": "freeIOJob",
          "new_api": "dictGetEntryVal",
          "old_text": "freeIOJob(j)",
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "            freeIOJob(j);",
          "new_line_content": "            dictGetEntryVal(de) = j->val;",
          "content_same": false
        },
        {
          "line": 9261,
          "old_api": "queueIOJob",
          "new_api": "vmMarkPagesUsed",
          "old_text": "queueIOJob(j)",
          "new_text": "vmMarkPagesUsed(j->page,j->pages)",
          "old_line_content": "                queueIOJob(j);",
          "new_line_content": "                vmMarkPagesUsed(j->page,j->pages);",
          "content_same": false
        },
        {
          "line": 9276,
          "old_api": "redisAssert",
          "new_api": "printf",
          "old_text": "redisAssert(key->storage == REDIS_VM_SWAPPING)",
          "new_text": "printf(\"val->type: %d\\n\",j->val->type)",
          "old_line_content": "            redisAssert(key->storage == REDIS_VM_SWAPPING);",
          "new_line_content": "                printf(\"val->type: %d\\n\",j->val->type);",
          "content_same": false
        },
        {
          "line": 9277,
          "old_api": "dictGetEntryVal",
          "new_api": "printf",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "printf(\"val->ptr: %s\\n\",(char*)j->val->ptr)",
          "old_line_content": "            val = dictGetEntryVal(de);",
          "new_line_content": "                printf(\"val->ptr: %s\\n\",(char*)j->val->ptr);",
          "content_same": false
        },
        {
          "line": 9293,
          "old_api": "vmCanSwapOut",
          "new_api": "freeIOJob",
          "old_text": "vmCanSwapOut()",
          "new_text": "freeIOJob(j)",
          "old_line_content": "            if (trytoswap && vmCanSwapOut() &&",
          "new_line_content": "            freeIOJob(j);",
          "content_same": false
        },
        {
          "line": 9301,
          "old_api": "unlockThreadedIO",
          "new_api": "lockThreadedIO",
          "old_text": "unlockThreadedIO()",
          "new_text": "lockThreadedIO()",
          "old_line_content": "                    unlockThreadedIO();",
          "new_line_content": "                    lockThreadedIO();",
          "content_same": false
        },
        {
          "line": 9417,
          "old_api": "lockThreadedIO",
          "new_api": "pthread_self",
          "old_text": "lockThreadedIO()",
          "new_text": "pthread_self()",
          "old_line_content": "        lockThreadedIO();",
          "new_line_content": "    pthread_detach(pthread_self());",
          "content_same": false
        },
        {
          "line": 9420,
          "old_api": "redisLog",
          "new_api": "lockThreadedIO",
          "old_text": "redisLog(REDIS_DEBUG,\"Thread %ld exiting, nothing to do\",\n                (long) pthread_self())",
          "new_text": "lockThreadedIO()",
          "old_line_content": "            redisLog(REDIS_DEBUG,\"Thread %ld exiting, nothing to do\",",
          "new_line_content": "        lockThreadedIO();",
          "content_same": false
        },
        {
          "line": 9421,
          "old_api": "pthread_self",
          "new_api": "listLength",
          "old_text": "pthread_self()",
          "new_text": "listLength(server.io_newjobs)",
          "old_line_content": "                (long) pthread_self());",
          "new_line_content": "        if (listLength(server.io_newjobs) == 0) {",
          "content_same": false
        },
        {
          "line": 9423,
          "old_api": "unlockThreadedIO",
          "new_api": "redisLog",
          "old_text": "unlockThreadedIO()",
          "new_text": "redisLog(REDIS_DEBUG,\"Thread %ld exiting, nothing to do\",\n                (long) pthread_self())",
          "old_line_content": "            unlockThreadedIO();",
          "new_line_content": "            redisLog(REDIS_DEBUG,\"Thread %ld exiting, nothing to do\",",
          "content_same": false
        },
        {
          "line": 9426,
          "old_api": "listFirst",
          "new_api": "unlockThreadedIO",
          "old_text": "listFirst(server.io_newjobs)",
          "new_text": "unlockThreadedIO()",
          "old_line_content": "        ln = listFirst(server.io_newjobs);",
          "new_line_content": "            unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 9431,
          "old_api": "listAddNodeTail",
          "new_api": "listDelNode",
          "old_text": "listAddNodeTail(server.io_processing,j)",
          "new_text": "listDelNode(server.io_newjobs,ln)",
          "old_line_content": "        listAddNodeTail(server.io_processing,j);",
          "new_line_content": "        listDelNode(server.io_newjobs,ln);",
          "content_same": false
        },
        {
          "line": 9433,
          "old_api": "unlockThreadedIO",
          "new_api": "pthread_self",
          "old_text": "unlockThreadedIO()",
          "new_text": "pthread_self()",
          "old_line_content": "        unlockThreadedIO();",
          "new_line_content": "        j->thread = pthread_self();",
          "content_same": false
        },
        {
          "line": 9434,
          "old_api": "redisLog",
          "new_api": "listAddNodeTail",
          "old_text": "redisLog(REDIS_DEBUG,\"Thread %ld got a new job (type %d): %p about key '%s'\",\n            (long) pthread_self(), j->type, (void*)j, (char*)j->key->ptr)",
          "new_text": "listAddNodeTail(server.io_processing,j)",
          "old_line_content": "        redisLog(REDIS_DEBUG,\"Thread %ld got a new job (type %d): %p about key '%s'\",",
          "new_line_content": "        listAddNodeTail(server.io_processing,j);",
          "content_same": false
        },
        {
          "line": 9435,
          "old_api": "pthread_self",
          "new_api": "listLast",
          "old_text": "pthread_self()",
          "new_text": "listLast(server.io_processing)",
          "old_line_content": "            (long) pthread_self(), j->type, (void*)j, (char*)j->key->ptr);",
          "new_line_content": "        ln = listLast(server.io_processing); /* We use ln later to remove it */",
          "content_same": false
        },
        {
          "line": 9442,
          "old_api": "rdbSavedObjectPages",
          "new_api": "vmReadObjectFromSwap",
          "old_text": "rdbSavedObjectPages(j->val,fp)",
          "new_text": "vmReadObjectFromSwap(j->page,j->key->vtype)",
          "old_line_content": "            j->pages = rdbSavedObjectPages(j->val,fp);",
          "new_line_content": "            j->val = vmReadObjectFromSwap(j->page,j->key->vtype);",
          "content_same": false
        },
        {
          "line": 9445,
          "old_api": "vmWriteObjectOnSwap",
          "new_api": "rdbSavedObjectPages",
          "old_text": "vmWriteObjectOnSwap(j->val,j->page)",
          "new_text": "rdbSavedObjectPages(j->val,fp)",
          "old_line_content": "            if (vmWriteObjectOnSwap(j->val,j->page) == REDIS_ERR)",
          "new_line_content": "            j->pages = rdbSavedObjectPages(j->val,fp);",
          "content_same": false
        },
        {
          "line": 9453,
          "old_api": "listDelNode",
          "new_api": "redisLog",
          "old_text": "listDelNode(server.io_processing,ln)",
          "new_text": "redisLog(REDIS_DEBUG,\"Thread %ld completed the job: %p (key %s)\",\n            (long) pthread_self(), (void*)j, (char*)j->key->ptr)",
          "old_line_content": "        listDelNode(server.io_processing,ln);",
          "new_line_content": "        redisLog(REDIS_DEBUG,\"Thread %ld completed the job: %p (key %s)\",",
          "content_same": false
        },
        {
          "line": 9454,
          "old_api": "listAddNodeTail",
          "new_api": "pthread_self",
          "old_text": "listAddNodeTail(server.io_processed,j)",
          "new_text": "pthread_self()",
          "old_line_content": "        listAddNodeTail(server.io_processed,j);",
          "new_line_content": "            (long) pthread_self(), (void*)j, (char*)j->key->ptr);",
          "content_same": false
        },
        {
          "line": 9455,
          "old_api": "unlockThreadedIO",
          "new_api": "lockThreadedIO",
          "old_text": "unlockThreadedIO()",
          "new_text": "lockThreadedIO()",
          "old_line_content": "        unlockThreadedIO();",
          "new_line_content": "        lockThreadedIO();",
          "content_same": false
        },
        {
          "line": 9458,
          "old_api": "write",
          "new_api": "unlockThreadedIO",
          "old_text": "write(server.io_ready_pipe_write,\"x\",1)",
          "new_text": "unlockThreadedIO()",
          "old_line_content": "        assert(write(server.io_ready_pipe_write,\"x\",1) == 1);",
          "new_line_content": "        unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 9471,
          "old_api": "sigaddset",
          "new_api": "sigemptyset",
          "old_text": "sigaddset(&mask,SIGPIPE)",
          "new_text": "sigemptyset(&mask)",
          "old_line_content": "    sigaddset(&mask,SIGPIPE);",
          "new_line_content": "    sigemptyset(&mask);",
          "content_same": false
        },
        {
          "line": 9472,
          "old_api": "pthread_sigmask",
          "new_api": "sigaddset",
          "old_text": "pthread_sigmask(SIG_SETMASK, &mask, &omask)",
          "new_text": "sigaddset(&mask,SIGCHLD)",
          "old_line_content": "    pthread_sigmask(SIG_SETMASK, &mask, &omask);",
          "new_line_content": "    sigaddset(&mask,SIGCHLD);",
          "content_same": false
        },
        {
          "line": 9473,
          "old_api": "pthread_create",
          "new_api": "sigaddset",
          "old_text": "pthread_create(&thread,&server.io_threads_attr,IOThreadEntryPoint,NULL)",
          "new_text": "sigaddset(&mask,SIGHUP)",
          "old_line_content": "    while ((err = pthread_create(&thread,&server.io_threads_attr,IOThreadEntryPoint,NULL)) != 0) {",
          "new_line_content": "    sigaddset(&mask,SIGHUP);",
          "content_same": false
        },
        {
          "line": 9474,
          "old_api": "redisLog",
          "new_api": "sigaddset",
          "old_text": "redisLog(REDIS_WARNING,\"Unable to spawn an I/O thread: %s\",\n            strerror(err))",
          "new_text": "sigaddset(&mask,SIGPIPE)",
          "old_line_content": "        redisLog(REDIS_WARNING,\"Unable to spawn an I/O thread: %s\",",
          "new_line_content": "    sigaddset(&mask,SIGPIPE);",
          "content_same": false
        },
        {
          "line": 9475,
          "old_api": "strerror",
          "new_api": "pthread_sigmask",
          "old_text": "strerror(err)",
          "new_text": "pthread_sigmask(SIG_SETMASK, &mask, &omask)",
          "old_line_content": "            strerror(err));",
          "new_line_content": "    pthread_sigmask(SIG_SETMASK, &mask, &omask);",
          "content_same": false
        },
        {
          "line": 9476,
          "old_api": "usleep",
          "new_api": "pthread_create",
          "old_text": "usleep(1000000)",
          "new_text": "pthread_create(&thread,&server.io_threads_attr,IOThreadEntryPoint,NULL)",
          "old_line_content": "        usleep(1000000);",
          "new_line_content": "    while ((err = pthread_create(&thread,&server.io_threads_attr,IOThreadEntryPoint,NULL)) != 0) {",
          "content_same": false
        },
        {
          "line": 9478,
          "old_api": "pthread_sigmask",
          "new_api": "strerror",
          "old_text": "pthread_sigmask(SIG_SETMASK, &omask, NULL)",
          "new_text": "strerror(err)",
          "old_line_content": "    pthread_sigmask(SIG_SETMASK, &omask, NULL);",
          "new_line_content": "            strerror(err));",
          "content_same": false
        },
        {
          "line": 9493,
          "old_api": "unlockThreadedIO",
          "new_api": "listLength",
          "old_text": "unlockThreadedIO()",
          "new_text": "listLength(server.io_processing)",
          "old_line_content": "            unlockThreadedIO();",
          "new_line_content": "            listLength(server.io_processing) == 0 &&",
          "content_same": false
        },
        {
          "line": 9503,
          "old_api": "vmThreadedIOCompletedJob",
          "new_api": "listLength",
          "old_text": "vmThreadedIOCompletedJob(NULL,server.io_ready_pipe_read,NULL,0)",
          "new_text": "listLength(server.io_processed)",
          "old_line_content": "            vmThreadedIOCompletedJob(NULL,server.io_ready_pipe_read,NULL,0);",
          "new_line_content": "        io_processed_len = listLength(server.io_processed);",
          "content_same": false
        },
        {
          "line": 9504,
          "old_api": "usleep",
          "new_api": "unlockThreadedIO",
          "old_text": "usleep(1000)",
          "new_text": "unlockThreadedIO()",
          "old_line_content": "            usleep(1000); /* 1 millisecond */",
          "new_line_content": "        unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 9506,
          "old_api": "usleep",
          "new_api": "vmThreadedIOCompletedJob",
          "old_text": "usleep(10000)",
          "new_text": "vmThreadedIOCompletedJob(NULL,server.io_ready_pipe_read,NULL,0)",
          "old_line_content": "            usleep(10000); /* 10 milliseconds */",
          "new_line_content": "            vmThreadedIOCompletedJob(NULL,server.io_ready_pipe_read,NULL,0);",
          "content_same": false
        },
        {
          "line": 9538,
          "old_api": "zmalloc",
          "new_api": "assert",
          "old_text": "zmalloc(sizeof(*j))",
          "new_text": "assert(key->storage == REDIS_VM_MEMORY)",
          "old_line_content": "    j = zmalloc(sizeof(*j));",
          "new_line_content": "    assert(key->storage == REDIS_VM_MEMORY);",
          "content_same": false
        },
        {
          "line": 9587,
          "old_api": "dictFind",
          "new_api": "incrRefCount",
          "old_text": "dictFind(c->db->io_keys,key)",
          "new_text": "incrRefCount(key)",
          "old_line_content": "    de = dictFind(c->db->io_keys,key);",
          "new_line_content": "    incrRefCount(key);",
          "content_same": false
        },
        {
          "line": 9595,
          "old_api": "assert",
          "new_api": "listCreate",
          "old_text": "assert(retval == DICT_OK)",
          "new_text": "listCreate()",
          "old_line_content": "        assert(retval == DICT_OK);",
          "new_line_content": "        l = listCreate();",
          "content_same": false
        },
        {
          "line": 9597,
          "old_api": "dictGetEntryVal",
          "new_api": "incrRefCount",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "incrRefCount(key)",
          "old_line_content": "        l = dictGetEntryVal(de);",
          "new_line_content": "        incrRefCount(key);",
          "content_same": false
        },
        {
          "line": 9679,
          "old_api": "listDelNode",
          "new_api": "listRewind",
          "old_text": "listDelNode(c->io_keys,ln)",
          "new_text": "listRewind(c->io_keys,&li)",
          "old_line_content": "            listDelNode(c->io_keys,ln);",
          "new_line_content": "    listRewind(c->io_keys,&li);",
          "content_same": false
        },
        {
          "line": 9686,
          "old_api": "dictFind",
          "new_api": "assert",
          "old_text": "dictFind(c->db->io_keys,key)",
          "new_text": "assert(ln != NULL)",
          "old_line_content": "    de = dictFind(c->db->io_keys,key);",
          "new_line_content": "    assert(ln != NULL);",
          "content_same": false
        },
        {
          "line": 9689,
          "old_api": "listSearchKey",
          "new_api": "dictFind",
          "old_text": "listSearchKey(l,c)",
          "new_text": "dictFind(c->db->io_keys,key)",
          "old_line_content": "    ln = listSearchKey(l,c);",
          "new_line_content": "    de = dictFind(c->db->io_keys,key);",
          "content_same": false
        },
        {
          "line": 9691,
          "old_api": "listDelNode",
          "new_api": "dictGetEntryVal",
          "old_text": "listDelNode(l,ln)",
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "    listDelNode(l,ln);",
          "new_line_content": "    l = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 9692,
          "old_api": "listLength",
          "new_api": "listSearchKey",
          "old_text": "listLength(l)",
          "new_text": "listSearchKey(l,c)",
          "old_line_content": "    if (listLength(l) == 0)",
          "new_line_content": "    ln = listSearchKey(l,c);",
          "content_same": false
        },
        {
          "line": 9693,
          "old_api": "dictDelete",
          "new_api": "assert",
          "old_text": "dictDelete(c->db->io_keys,key)",
          "new_text": "assert(ln != NULL)",
          "old_line_content": "        dictDelete(c->db->io_keys,key);",
          "new_line_content": "    assert(ln != NULL);",
          "content_same": false
        },
        {
          "line": 9707,
          "old_api": "dictGetEntryVal",
          "new_api": "dictFind",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "dictFind(db->io_keys,key)",
          "old_line_content": "    l = dictGetEntryVal(de);",
          "new_line_content": "    de = dictFind(db->io_keys,key);",
          "content_same": false
        },
        {
          "line": 9715,
          "old_api": "dontWaitForSwappedKey",
          "new_api": "listFirst",
          "old_text": "dontWaitForSwappedKey(c,key)",
          "new_text": "listFirst(l)",
          "old_line_content": "        if (dontWaitForSwappedKey(c,key)) {",
          "new_line_content": "        ln = listFirst(l);",
          "content_same": false
        },
        {
          "line": 9718,
          "old_api": "listAddNodeTail",
          "new_api": "dontWaitForSwappedKey",
          "old_text": "listAddNodeTail(server.io_ready_clients,c)",
          "new_text": "dontWaitForSwappedKey(c,key)",
          "old_line_content": "            listAddNodeTail(server.io_ready_clients,c);",
          "new_line_content": "        if (dontWaitForSwappedKey(c,key)) {",
          "content_same": false
        },
        {
          "line": 9729,
          "old_api": "zstrdup",
          "new_api": "getDecodedObject",
          "old_text": "zstrdup(o->ptr)",
          "new_text": "getDecodedObject(c->argv[3])",
          "old_line_content": "        server.dbfilename = zstrdup(o->ptr);",
          "new_line_content": "    robj *o = getDecodedObject(c->argv[3]);",
          "content_same": false
        },
        {
          "line": 9737,
          "old_api": "strtoll",
          "new_api": "zfree",
          "old_text": "strtoll(o->ptr, NULL, 10)",
          "new_text": "zfree(server.masterauth)",
          "old_line_content": "        server.maxmemory = strtoll(o->ptr, NULL, 10);",
          "new_line_content": "        zfree(server.masterauth);",
          "content_same": false
        },
        {
          "line": 9738,
          "old_api": "strcasecmp",
          "new_api": "zstrdup",
          "old_text": "strcasecmp(c->argv[2]->ptr,\"appendfsync\")",
          "new_text": "zstrdup(o->ptr)",
          "old_line_content": "    } else if (!strcasecmp(c->argv[2]->ptr,\"appendfsync\")) {",
          "new_line_content": "        server.masterauth = zstrdup(o->ptr);",
          "content_same": false
        },
        {
          "line": 9781,
          "old_api": "sdsfreesplitres",
          "new_api": "strtoll",
          "old_text": "sdsfreesplitres(v,vlen)",
          "new_text": "strtoll(v[j+1],NULL,10)",
          "old_line_content": "        sdsfreesplitres(v,vlen);",
          "new_line_content": "            changes = strtoll(v[j+1],NULL,10);",
          "content_same": false
        },
        {
          "line": 9786,
          "old_api": "decrRefCount",
          "new_api": "sdsempty",
          "old_text": "decrRefCount(o)",
          "new_text": "sdsempty()",
          "old_line_content": "        decrRefCount(o);",
          "new_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),",
          "content_same": false
        },
        {
          "line": 9810,
          "old_api": "stringmatch",
          "new_api": "addReply",
          "old_text": "stringmatch(pattern,\"dbfilename\",0)",
          "new_text": "addReply(c,lenobj)",
          "old_line_content": "    if (stringmatch(pattern,\"dbfilename\",0)) {",
          "new_line_content": "    addReply(c,lenobj);",
          "content_same": false
        },
        {
          "line": 9811,
          "old_api": "addReplyBulkCString",
          "new_api": "decrRefCount",
          "old_text": "addReplyBulkCString(c,\"dbfilename\")",
          "new_text": "decrRefCount(lenobj)",
          "old_line_content": "        addReplyBulkCString(c,\"dbfilename\");",
          "new_line_content": "    decrRefCount(lenobj);",
          "content_same": false
        },
        {
          "line": 9815,
          "old_api": "stringmatch",
          "new_api": "addReplyBulkCString",
          "old_text": "stringmatch(pattern,\"requirepass\",0)",
          "new_text": "addReplyBulkCString(c,server.dbfilename)",
          "old_line_content": "    if (stringmatch(pattern,\"requirepass\",0)) {",
          "new_line_content": "        addReplyBulkCString(c,server.dbfilename);",
          "content_same": false
        },
        {
          "line": 9820,
          "old_api": "stringmatch",
          "new_api": "addReplyBulkCString",
          "old_text": "stringmatch(pattern,\"masterauth\",0)",
          "new_text": "addReplyBulkCString(c,server.requirepass)",
          "old_line_content": "    if (stringmatch(pattern,\"masterauth\",0)) {",
          "new_line_content": "        addReplyBulkCString(c,server.requirepass);",
          "content_same": false
        },
        {
          "line": 9825,
          "old_api": "stringmatch",
          "new_api": "addReplyBulkCString",
          "old_text": "stringmatch(pattern,\"maxmemory\",0)",
          "new_text": "addReplyBulkCString(c,server.masterauth)",
          "old_line_content": "    if (stringmatch(pattern,\"maxmemory\",0)) {",
          "new_line_content": "        addReplyBulkCString(c,server.masterauth);",
          "content_same": false
        },
        {
          "line": 9828,
          "old_api": "snprintf",
          "new_api": "stringmatch",
          "old_text": "snprintf(buf,128,\"%llu\\n\",server.maxmemory)",
          "new_text": "stringmatch(pattern,\"maxmemory\",0)",
          "old_line_content": "        snprintf(buf,128,\"%llu\\n\",server.maxmemory);",
          "new_line_content": "    if (stringmatch(pattern,\"maxmemory\",0)) {",
          "content_same": false
        },
        {
          "line": 9833,
          "old_api": "stringmatch",
          "new_api": "addReplyBulkCString",
          "old_text": "stringmatch(pattern,\"appendfsync\",0)",
          "new_text": "addReplyBulkCString(c,buf)",
          "old_line_content": "    if (stringmatch(pattern,\"appendfsync\",0)) {",
          "new_line_content": "        addReplyBulkCString(c,buf);",
          "content_same": false
        },
        {
          "line": 9846,
          "old_api": "stringmatch",
          "new_api": "addReplyBulkCString",
          "old_text": "stringmatch(pattern,\"save\",0)",
          "new_text": "addReplyBulkCString(c,policy)",
          "old_line_content": "    if (stringmatch(pattern,\"save\",0)) {",
          "new_line_content": "        addReplyBulkCString(c,policy);",
          "content_same": false
        },
        {
          "line": 9858,
          "old_api": "addReplyBulkCString",
          "new_api": "sdscatlen",
          "old_text": "addReplyBulkCString(c,buf)",
          "new_text": "sdscatlen(buf,\" \",1)",
          "old_line_content": "        addReplyBulkCString(c,buf);",
          "new_line_content": "                buf = sdscatlen(buf,\" \",1);",
          "content_same": false
        },
        {
          "line": 9862,
          "old_api": "decrRefCount",
          "new_api": "sdsfree",
          "old_text": "decrRefCount(o)",
          "new_text": "sdsfree(buf)",
          "old_line_content": "    decrRefCount(o);",
          "new_line_content": "        sdsfree(buf);",
          "content_same": false
        },
        {
          "line": 9872,
          "old_api": "configGetCommand",
          "new_api": "configSetCommand",
          "old_text": "configGetCommand(c)",
          "new_text": "configSetCommand(c)",
          "old_line_content": "        configGetCommand(c);",
          "new_line_content": "        configSetCommand(c);",
          "content_same": false
        },
        {
          "line": 9881,
          "old_api": "sdsempty",
          "new_api": "time",
          "old_text": "sdsempty()",
          "new_text": "time(NULL)",
          "old_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),",
          "new_line_content": "        server.stat_starttime = time(NULL);",
          "content_same": false
        },
        {
          "line": 9923,
          "old_api": "dictAdd",
          "new_api": "dictFind",
          "old_text": "dictAdd(server.pubsub_channels,channel,clients)",
          "new_text": "dictFind(server.pubsub_channels,channel)",
          "old_line_content": "            dictAdd(server.pubsub_channels,channel,clients);",
          "new_line_content": "        de = dictFind(server.pubsub_channels,channel);",
          "content_same": false
        },
        {
          "line": 9926,
          "old_api": "dictGetEntryVal",
          "new_api": "dictAdd",
          "old_text": "dictGetEntryVal(de)",
          "new_text": "dictAdd(server.pubsub_channels,channel,clients)",
          "old_line_content": "            clients = dictGetEntryVal(de);",
          "new_line_content": "            dictAdd(server.pubsub_channels,channel,clients);",
          "content_same": false
        },
        {
          "line": 9931,
          "old_api": "addReply",
          "new_api": "listAddNodeTail",
          "old_text": "addReply(c,shared.mbulk3)",
          "new_text": "listAddNodeTail(clients,c)",
          "old_line_content": "    addReply(c,shared.mbulk3);",
          "new_line_content": "        listAddNodeTail(clients,c);",
          "content_same": false
        },
        {
          "line": 9934,
          "old_api": "listLength",
          "new_api": "addReply",
          "old_text": "listLength(c->pubsub_patterns)",
          "new_text": "addReply(c,shared.mbulk3)",
          "old_line_content": "    addReplyLong(c,dictSize(c->pubsub_channels)+listLength(c->pubsub_patterns));",
          "new_line_content": "    addReply(c,shared.mbulk3);",
          "content_same": false
        },
        {
          "line": 9952,
          "old_api": "dictFind",
          "new_api": "dictDelete",
          "old_text": "dictFind(server.pubsub_channels,channel)",
          "new_text": "dictDelete(c->pubsub_channels,channel)",
          "old_line_content": "        de = dictFind(server.pubsub_channels,channel);",
          "new_line_content": "    if (dictDelete(c->pubsub_channels,channel) == DICT_OK) {",
          "content_same": false
        },
        {
          "line": 9955,
          "old_api": "listSearchKey",
          "new_api": "dictFind",
          "old_text": "listSearchKey(clients,c)",
          "new_text": "dictFind(server.pubsub_channels,channel)",
          "old_line_content": "        ln = listSearchKey(clients,c);",
          "new_line_content": "        de = dictFind(server.pubsub_channels,channel);",
          "content_same": false
        },
        {
          "line": 9957,
          "old_api": "listDelNode",
          "new_api": "dictGetEntryVal",
          "old_text": "listDelNode(clients,ln)",
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "        listDelNode(clients,ln);",
          "new_line_content": "        clients = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 9958,
          "old_api": "listLength",
          "new_api": "listSearchKey",
          "old_text": "listLength(clients)",
          "new_text": "listSearchKey(clients,c)",
          "old_line_content": "        if (listLength(clients) == 0) {",
          "new_line_content": "        ln = listSearchKey(clients,c);",
          "content_same": false
        },
        {
          "line": 9970,
          "old_api": "dictSize",
          "new_api": "addReply",
          "old_text": "dictSize(c->pubsub_channels)",
          "new_text": "addReply(c,shared.mbulk3)",
          "old_line_content": "        addReplyLong(c,dictSize(c->pubsub_channels)+",
          "new_line_content": "        addReply(c,shared.mbulk3);",
          "content_same": false
        },
        {
          "line": 9971,
          "old_api": "listLength",
          "new_api": "addReply",
          "old_text": "listLength(c->pubsub_patterns)",
          "new_text": "addReply(c,shared.unsubscribebulk)",
          "old_line_content": "                       listLength(c->pubsub_patterns));",
          "new_line_content": "        addReply(c,shared.unsubscribebulk);",
          "content_same": false
        },
        {
          "line": 9974,
          "old_api": "decrRefCount",
          "new_api": "listLength",
          "old_text": "decrRefCount(channel)",
          "new_text": "listLength(c->pubsub_patterns)",
          "old_line_content": "    decrRefCount(channel); /* it is finally safe to release it */",
          "new_line_content": "                       listLength(c->pubsub_patterns));",
          "content_same": false
        },
        {
          "line": 9985,
          "old_api": "listAddNodeTail",
          "new_api": "listSearchKey",
          "old_text": "listAddNodeTail(c->pubsub_patterns,pattern)",
          "new_text": "listSearchKey(c->pubsub_patterns,pattern)",
          "old_line_content": "        listAddNodeTail(c->pubsub_patterns,pattern);",
          "new_line_content": "    if (listSearchKey(c->pubsub_patterns,pattern) == NULL) {",
          "content_same": false
        },
        {
          "line": 9988,
          "old_api": "getDecodedObject",
          "new_api": "listAddNodeTail",
          "old_text": "getDecodedObject(pattern)",
          "new_text": "listAddNodeTail(c->pubsub_patterns,pattern)",
          "old_line_content": "        pat->pattern = getDecodedObject(pattern);",
          "new_line_content": "        listAddNodeTail(c->pubsub_patterns,pattern);",
          "content_same": false
        },
        {
          "line": 9990,
          "old_api": "listAddNodeTail",
          "new_api": "zmalloc",
          "old_text": "listAddNodeTail(server.pubsub_patterns,pat)",
          "new_text": "zmalloc(sizeof(*pat))",
          "old_line_content": "        listAddNodeTail(server.pubsub_patterns,pat);",
          "new_line_content": "        pat = zmalloc(sizeof(*pat));",
          "content_same": false
        },
        {
          "line": 9993,
          "old_api": "addReply",
          "new_api": "listAddNodeTail",
          "old_text": "addReply(c,shared.mbulk3)",
          "new_text": "listAddNodeTail(server.pubsub_patterns,pat)",
          "old_line_content": "    addReply(c,shared.mbulk3);",
          "new_line_content": "        listAddNodeTail(server.pubsub_patterns,pat);",
          "content_same": false
        },
        {
          "line": 9996,
          "old_api": "listLength",
          "new_api": "addReply",
          "old_text": "listLength(c->pubsub_patterns)",
          "new_text": "addReply(c,shared.mbulk3)",
          "old_line_content": "    addReplyLong(c,dictSize(c->pubsub_channels)+listLength(c->pubsub_patterns));",
          "new_line_content": "    addReply(c,shared.mbulk3);",
          "content_same": false
        },
        {
          "line": 10010,
          "old_api": "listDelNode",
          "new_api": "incrRefCount",
          "old_text": "listDelNode(c->pubsub_patterns,ln)",
          "new_text": "incrRefCount(pattern)",
          "old_line_content": "        listDelNode(c->pubsub_patterns,ln);",
          "new_line_content": "    incrRefCount(pattern); /* Protect the object. May be the same we remove */",
          "content_same": false
        },
        {
          "line": 10013,
          "old_api": "listSearchKey",
          "new_api": "listDelNode",
          "old_text": "listSearchKey(server.pubsub_patterns,&pat)",
          "new_text": "listDelNode(c->pubsub_patterns,ln)",
          "old_line_content": "        ln = listSearchKey(server.pubsub_patterns,&pat);",
          "new_line_content": "        listDelNode(c->pubsub_patterns,ln);",
          "content_same": false
        },
        {
          "line": 10021,
          "old_api": "dictSize",
          "new_api": "addReply",
          "old_text": "dictSize(c->pubsub_channels)",
          "new_text": "addReply(c,shared.mbulk3)",
          "old_line_content": "        addReplyLong(c,dictSize(c->pubsub_channels)+",
          "new_line_content": "        addReply(c,shared.mbulk3);",
          "content_same": false
        },
        {
          "line": 10022,
          "old_api": "listLength",
          "new_api": "addReply",
          "old_text": "listLength(c->pubsub_patterns)",
          "new_text": "addReply(c,shared.punsubscribebulk)",
          "old_line_content": "                       listLength(c->pubsub_patterns));",
          "new_line_content": "        addReply(c,shared.punsubscribebulk);",
          "content_same": false
        },
        {
          "line": 10024,
          "old_api": "decrRefCount",
          "new_api": "dictSize",
          "old_text": "decrRefCount(pattern)",
          "new_text": "dictSize(c->pubsub_channels)",
          "old_line_content": "    decrRefCount(pattern);",
          "new_line_content": "        addReplyLong(c,dictSize(c->pubsub_channels)+",
          "content_same": false
        },
        {
          "line": 10038,
          "old_api": "pubsubUnsubscribeChannel",
          "new_api": "dictNext",
          "old_text": "pubsubUnsubscribeChannel(c,channel,notify)",
          "new_text": "dictNext(di)",
          "old_line_content": "        count += pubsubUnsubscribeChannel(c,channel,notify);",
          "new_line_content": "    while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 10055,
          "old_api": "pubsubUnsubscribePattern",
          "new_api": "listNext",
          "old_text": "pubsubUnsubscribePattern(c,pattern,notify)",
          "new_text": "listNext(&li)",
          "old_line_content": "        count += pubsubUnsubscribePattern(c,pattern,notify);",
          "new_line_content": "    while ((ln = listNext(&li)) != NULL) {",
          "content_same": false
        },
        {
          "line": 10078,
          "old_api": "addReply",
          "new_api": "listNext",
          "old_text": "addReply(c,shared.mbulk3)",
          "new_text": "listNext(&li)",
          "old_line_content": "            addReply(c,shared.mbulk3);",
          "new_line_content": "        while ((ln = listNext(&li)) != NULL) {",
          "content_same": false
        },
        {
          "line": 10081,
          "old_api": "addReplyBulk",
          "new_api": "addReply",
          "old_text": "addReplyBulk(c,message)",
          "new_text": "addReply(c,shared.mbulk3)",
          "old_line_content": "            addReplyBulk(c,message);",
          "new_line_content": "            addReply(c,shared.mbulk3);",
          "content_same": false
        },
        {
          "line": 10089,
          "old_api": "listNext",
          "new_api": "listLength",
          "old_text": "listNext(&li)",
          "new_text": "listLength(server.pubsub_patterns)",
          "old_line_content": "        while ((ln = listNext(&li)) != NULL) {",
          "new_line_content": "    if (listLength(server.pubsub_patterns)) {",
          "content_same": false
        },
        {
          "line": 10092,
          "old_api": "stringmatchlen",
          "new_api": "listNext",
          "old_text": "stringmatchlen((char*)pat->pattern->ptr,\n                                sdslen(pat->pattern->ptr),\n                                (char*)channel->ptr,\n                                sdslen(channel->ptr),0)",
          "new_text": "listNext(&li)",
          "old_line_content": "            if (stringmatchlen((char*)pat->pattern->ptr,",
          "new_line_content": "        while ((ln = listNext(&li)) != NULL) {",
          "content_same": false
        },
        {
          "line": 10095,
          "old_api": "sdslen",
          "new_api": "stringmatchlen",
          "old_text": "sdslen(channel->ptr)",
          "new_text": "stringmatchlen((char*)pat->pattern->ptr,\n                                sdslen(pat->pattern->ptr),\n                                (char*)channel->ptr,\n                                sdslen(channel->ptr),0)",
          "old_line_content": "                                sdslen(channel->ptr),0)) {",
          "new_line_content": "            if (stringmatchlen((char*)pat->pattern->ptr,",
          "content_same": false
        },
        {
          "line": 10096,
          "old_api": "addReply",
          "new_api": "sdslen",
          "old_text": "addReply(pat->client,shared.mbulk4)",
          "new_text": "sdslen(pat->pattern->ptr)",
          "old_line_content": "                addReply(pat->client,shared.mbulk4);",
          "new_line_content": "                                sdslen(pat->pattern->ptr),",
          "content_same": false
        },
        {
          "line": 10098,
          "old_api": "addReplyBulk",
          "new_api": "sdslen",
          "old_text": "addReplyBulk(pat->client,pat->pattern)",
          "new_text": "sdslen(channel->ptr)",
          "old_line_content": "                addReplyBulk(pat->client,pat->pattern);",
          "new_line_content": "                                sdslen(channel->ptr),0)) {",
          "content_same": false
        },
        {
          "line": 10099,
          "old_api": "addReplyBulk",
          "new_api": "addReply",
          "old_text": "addReplyBulk(pat->client,channel)",
          "new_text": "addReply(pat->client,shared.mbulk4)",
          "old_line_content": "                addReplyBulk(pat->client,channel);",
          "new_line_content": "                addReply(pat->client,shared.mbulk4);",
          "content_same": false
        },
        {
          "line": 10100,
          "old_api": "addReplyBulk",
          "new_api": "addReply",
          "old_text": "addReplyBulk(pat->client,message)",
          "new_text": "addReply(pat->client,shared.pmessagebulk)",
          "old_line_content": "                addReplyBulk(pat->client,message);",
          "new_line_content": "                addReply(pat->client,shared.pmessagebulk);",
          "content_same": false
        },
        {
          "line": 10158,
          "old_api": "rdbSave",
          "new_api": "strcasecmp",
          "old_text": "rdbSave(server.dbfilename)",
          "new_text": "strcasecmp(c->argv[1]->ptr,\"segfault\")",
          "old_line_content": "        if (rdbSave(server.dbfilename) != REDIS_OK) {",
          "new_line_content": "    if (!strcasecmp(c->argv[1]->ptr,\"segfault\")) {",
          "content_same": false
        },
        {
          "line": 10162,
          "old_api": "emptyDb",
          "new_api": "addReply",
          "old_text": "emptyDb()",
          "new_text": "addReply(c,shared.err)",
          "old_line_content": "        emptyDb();",
          "new_line_content": "            addReply(c,shared.err);",
          "content_same": false
        },
        {
          "line": 10167,
          "old_api": "redisLog",
          "new_api": "addReply",
          "old_text": "redisLog(REDIS_WARNING,\"DB reloaded by DEBUG RELOAD\")",
          "new_text": "addReply(c,shared.err)",
          "old_line_content": "        redisLog(REDIS_WARNING,\"DB reloaded by DEBUG RELOAD\");",
          "new_line_content": "            addReply(c,shared.err);",
          "content_same": false
        },
        {
          "line": 10170,
          "old_api": "emptyDb",
          "new_api": "redisLog",
          "old_text": "emptyDb()",
          "new_text": "redisLog(REDIS_WARNING,\"DB reloaded by DEBUG RELOAD\")",
          "old_line_content": "        emptyDb();",
          "new_line_content": "        redisLog(REDIS_WARNING,\"DB reloaded by DEBUG RELOAD\");",
          "content_same": false
        },
        {
          "line": 10171,
          "old_api": "loadAppendOnlyFile",
          "new_api": "addReply",
          "old_text": "loadAppendOnlyFile(server.appendfilename)",
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "        if (loadAppendOnlyFile(server.appendfilename) != REDIS_OK) {",
          "new_line_content": "        addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 10172,
          "old_api": "addReply",
          "new_api": "strcasecmp",
          "old_text": "addReply(c,shared.err)",
          "new_text": "strcasecmp(c->argv[1]->ptr,\"loadaof\")",
          "old_line_content": "            addReply(c,shared.err);",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"loadaof\")) {",
          "content_same": false
        },
        {
          "line": 10175,
          "old_api": "redisLog",
          "new_api": "addReply",
          "old_text": "redisLog(REDIS_WARNING,\"Append Only File loaded by DEBUG LOADAOF\")",
          "new_text": "addReply(c,shared.err)",
          "old_line_content": "        redisLog(REDIS_WARNING,\"Append Only File loaded by DEBUG LOADAOF\");",
          "new_line_content": "            addReply(c,shared.err);",
          "content_same": false
        },
        {
          "line": 10178,
          "old_api": "dictFind",
          "new_api": "redisLog",
          "old_text": "dictFind(c->db->dict,c->argv[2])",
          "new_text": "redisLog(REDIS_WARNING,\"Append Only File loaded by DEBUG LOADAOF\")",
          "old_line_content": "        dictEntry *de = dictFind(c->db->dict,c->argv[2]);",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Append Only File loaded by DEBUG LOADAOF\");",
          "content_same": false
        },
        {
          "line": 10185,
          "old_api": "dictGetEntryKey",
          "new_api": "addReply",
          "old_text": "dictGetEntryKey(de)",
          "new_text": "addReply(c,shared.nokeyerr)",
          "old_line_content": "        key = dictGetEntryKey(de);",
          "new_line_content": "            addReply(c,shared.nokeyerr);",
          "content_same": false
        },
        {
          "line": 10198,
          "old_api": "sdsempty",
          "new_api": "snprintf",
          "old_text": "sdsempty()",
          "new_text": "snprintf(buf,64,\"unknown encoding %d\\n\", val->encoding)",
          "old_line_content": "            addReplySds(c,sdscatprintf(sdsempty(),",
          "new_line_content": "                snprintf(buf,64,\"unknown encoding %d\\n\", val->encoding);",
          "content_same": false
        },
        {
          "line": 10214,
          "old_api": "dictFind",
          "new_api": "lookupKeyRead",
          "old_text": "dictFind(c->db->dict,c->argv[2])",
          "new_text": "lookupKeyRead(c->db,c->argv[2])",
          "old_line_content": "        dictEntry *de = dictFind(c->db->dict,c->argv[2]);",
          "new_line_content": "        lookupKeyRead(c->db,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 10225,
          "old_api": "dictGetEntryKey",
          "new_api": "addReply",
          "old_text": "dictGetEntryKey(de)",
          "new_text": "addReply(c,shared.nokeyerr)",
          "old_line_content": "        key = dictGetEntryKey(de);",
          "new_line_content": "            addReply(c,shared.nokeyerr);",
          "content_same": false
        },
        {
          "line": 10229,
          "old_api": "dupStringObject",
          "new_api": "dictGetEntryVal",
          "old_text": "dupStringObject(key)",
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "            robj *newkey = dupStringObject(key);",
          "new_line_content": "        val = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 10238,
          "old_api": "addReply",
          "new_api": "sdsnew",
          "old_text": "addReply(c,shared.ok)",
          "new_text": "sdsnew(\"-ERR This key is not in memory\\r\\n\")",
          "old_line_content": "            addReply(c,shared.ok);",
          "new_line_content": "            addReplySds(c,sdsnew(\"-ERR This key is not in memory\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 10240,
          "old_api": "addReply",
          "new_api": "dictGetEntryVal",
          "old_text": "addReply(c,shared.err)",
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "            addReply(c,shared.err);",
          "new_line_content": "            dictGetEntryVal(de) = NULL;",
          "content_same": false
        },
        {
          "line": 10250,
          "old_api": "snprintf",
          "new_api": "getLongFromObjectOrReply",
          "old_text": "snprintf(buf,sizeof(buf),\"key:%lu\",j)",
          "new_text": "getLongFromObjectOrReply(c, c->argv[2], &keys, NULL)",
          "old_line_content": "            snprintf(buf,sizeof(buf),\"key:%lu\",j);",
          "new_line_content": "        if (getLongFromObjectOrReply(c, c->argv[2], &keys, NULL) != REDIS_OK)",
          "content_same": false
        },
        {
          "line": 10253,
          "old_api": "decrRefCount",
          "new_api": "snprintf",
          "old_text": "decrRefCount(key)",
          "new_text": "snprintf(buf,sizeof(buf),\"key:%lu\",j)",
          "old_line_content": "                decrRefCount(key);",
          "new_line_content": "            snprintf(buf,sizeof(buf),\"key:%lu\",j);",
          "content_same": false
        },
        {
          "line": 10256,
          "old_api": "snprintf",
          "new_api": "decrRefCount",
          "old_text": "snprintf(buf,sizeof(buf),\"value:%lu\",j)",
          "new_text": "decrRefCount(key)",
          "old_line_content": "            snprintf(buf,sizeof(buf),\"value:%lu\",j);",
          "new_line_content": "                decrRefCount(key);",
          "content_same": false
        },
        {
          "line": 10260,
          "old_api": "addReply",
          "new_api": "strlen",
          "old_text": "addReply(c,shared.ok)",
          "new_text": "strlen(buf)",
          "old_line_content": "        addReply(c,shared.ok);",
          "new_line_content": "            val = createStringObject(buf,strlen(buf));",
          "content_same": false
        },
        {
          "line": 10322,
          "old_api": "dup2",
          "new_api": "open",
          "old_text": "dup2(fd, STDERR_FILENO)",
          "new_text": "open(\"/dev/null\", O_RDWR, 0)",
          "old_line_content": "        dup2(fd, STDERR_FILENO);",
          "new_line_content": "    if ((fd = open(\"/dev/null\", O_RDWR, 0)) != -1) {",
          "content_same": false
        },
        {
          "line": 10323,
          "old_api": "close",
          "new_api": "dup2",
          "old_text": "close(fd)",
          "new_text": "dup2(fd, STDIN_FILENO)",
          "old_line_content": "        if (fd > STDERR_FILENO) close(fd);",
          "new_line_content": "        dup2(fd, STDIN_FILENO);",
          "content_same": false
        },
        {
          "line": 10326,
          "old_api": "fopen",
          "new_api": "close",
          "old_text": "fopen(server.pidfile,\"w\")",
          "new_text": "close(fd)",
          "old_line_content": "    fp = fopen(server.pidfile,\"w\");",
          "new_line_content": "        if (fd > STDERR_FILENO) close(fd);",
          "content_same": false
        },
        {
          "line": 10329,
          "old_api": "fclose",
          "new_api": "fopen",
          "old_text": "fclose(fp)",
          "new_text": "fopen(server.pidfile,\"w\")",
          "old_line_content": "        fclose(fp);",
          "new_line_content": "    fp = fopen(server.pidfile,\"w\");",
          "content_same": false
        },
        {
          "line": 10350,
          "old_api": "version",
          "new_api": "initServerConfig",
          "old_text": "version()",
          "new_text": "initServerConfig()",
          "old_line_content": "            strcmp(argv[1], \"--version\") == 0) version();",
          "new_line_content": "    initServerConfig();",
          "content_same": false
        },
        {
          "line": 10352,
          "old_api": "resetServerSaveParams",
          "new_api": "strcmp",
          "old_text": "resetServerSaveParams()",
          "new_text": "strcmp(argv[1], \"-v\")",
          "old_line_content": "        resetServerSaveParams();",
          "new_line_content": "        if (strcmp(argv[1], \"-v\") == 0 ||",
          "content_same": false
        },
        {
          "line": 10353,
          "old_api": "loadServerConfig",
          "new_api": "version",
          "old_text": "loadServerConfig(argv[1])",
          "new_text": "version()",
          "old_line_content": "        loadServerConfig(argv[1]);",
          "new_line_content": "            strcmp(argv[1], \"--version\") == 0) version();",
          "content_same": false
        },
        {
          "line": 10355,
          "old_api": "usage",
          "new_api": "resetServerSaveParams",
          "old_text": "usage()",
          "new_text": "resetServerSaveParams()",
          "old_line_content": "        usage();",
          "new_line_content": "        resetServerSaveParams();",
          "content_same": false
        },
        {
          "line": 10360,
          "old_api": "initServer",
          "new_api": "redisLog",
          "old_text": "initServer()",
          "new_text": "redisLog(REDIS_WARNING,\"Warning: no config file specified, using the default config. In order to specify a config file use 'redis-server /path/to/redis.conf'\")",
          "old_line_content": "    initServer();",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Warning: no config file specified, using the default config. In order to specify a config file use 'redis-server /path/to/redis.conf'\");",
          "content_same": false
        },
        {
          "line": 10363,
          "old_api": "linuxOvercommitMemoryWarning",
          "new_api": "initServer",
          "old_text": "linuxOvercommitMemoryWarning()",
          "new_text": "initServer()",
          "old_line_content": "    linuxOvercommitMemoryWarning();",
          "new_line_content": "    initServer();",
          "content_same": false
        },
        {
          "line": 10370,
          "old_api": "rdbLoad",
          "new_api": "loadAppendOnlyFile",
          "old_text": "rdbLoad(server.dbfilename)",
          "new_text": "loadAppendOnlyFile(server.appendfilename)",
          "old_line_content": "        if (rdbLoad(server.dbfilename) == REDIS_OK)",
          "new_line_content": "        if (loadAppendOnlyFile(server.appendfilename) == REDIS_OK)",
          "content_same": false
        },
        {
          "line": 10373,
          "old_api": "redisLog",
          "new_api": "rdbLoad",
          "old_text": "redisLog(REDIS_NOTICE,\"The server is now ready to accept connections on port %d\", server.port)",
          "new_text": "rdbLoad(server.dbfilename)",
          "old_line_content": "    redisLog(REDIS_NOTICE,\"The server is now ready to accept connections on port %d\", server.port);",
          "new_line_content": "        if (rdbLoad(server.dbfilename) == REDIS_OK)",
          "content_same": false
        },
        {
          "line": 10374,
          "old_api": "aeSetBeforeSleepProc",
          "new_api": "time",
          "old_text": "aeSetBeforeSleepProc(server.el,beforeSleep)",
          "new_text": "time(NULL)",
          "old_line_content": "    aeSetBeforeSleepProc(server.el,beforeSleep);",
          "new_line_content": "            redisLog(REDIS_NOTICE,\"DB loaded from disk: %ld seconds\",time(NULL)-start);",
          "content_same": false
        },
        {
          "line": 10376,
          "old_api": "aeDeleteEventLoop",
          "new_api": "redisLog",
          "old_text": "aeDeleteEventLoop(server.el)",
          "new_text": "redisLog(REDIS_NOTICE,\"The server is now ready to accept connections on port %d\", server.port)",
          "old_line_content": "    aeDeleteEventLoop(server.el);",
          "new_line_content": "    redisLog(REDIS_NOTICE,\"The server is now ready to accept connections on port %d\", server.port);",
          "content_same": false
        },
        {
          "line": 10430,
          "old_api": "getMcontextEip",
          "new_api": "backtrace",
          "old_text": "getMcontextEip(uc)",
          "new_text": "backtrace(trace, 100)",
          "old_line_content": "        trace[1] = getMcontextEip(uc);",
          "new_line_content": "    trace_size = backtrace(trace, 100);",
          "content_same": false
        },
        {
          "line": 10432,
          "old_api": "backtrace_symbols",
          "new_api": "getMcontextEip",
          "old_text": "backtrace_symbols(trace, trace_size)",
          "new_text": "getMcontextEip(uc)",
          "old_line_content": "    messages = backtrace_symbols(trace, trace_size);",
          "new_line_content": "    if (getMcontextEip(uc) != NULL) {",
          "content_same": false
        },
        {
          "line": 10435,
          "old_api": "findFuncName",
          "new_api": "backtrace_symbols",
          "old_text": "findFuncName(trace[i], &offset)",
          "new_text": "backtrace_symbols(trace, trace_size)",
          "old_line_content": "        char *fn = findFuncName(trace[i], &offset), *p;",
          "new_line_content": "    messages = backtrace_symbols(trace, trace_size);",
          "content_same": false
        },
        {
          "line": 10438,
          "old_api": "strtol",
          "new_api": "findFuncName",
          "old_text": "strtol(p+1,NULL,10)",
          "new_text": "findFuncName(trace[i], &offset)",
          "old_line_content": "        if (!fn || (p && ((unsigned long)strtol(p+1,NULL,10)) < offset)) {",
          "new_line_content": "        char *fn = findFuncName(trace[i], &offset), *p;",
          "content_same": false
        },
        {
          "line": 10441,
          "old_api": "redisLog",
          "new_api": "strtol",
          "old_text": "redisLog(REDIS_WARNING,\"%d redis-server %p %s + %d\", i, trace[i], fn, (unsigned int)offset)",
          "new_text": "strtol(p+1,NULL,10)",
          "old_line_content": "            redisLog(REDIS_WARNING,\"%d redis-server %p %s + %d\", i, trace[i], fn, (unsigned int)offset);",
          "new_line_content": "        if (!fn || (p && ((unsigned long)strtol(p+1,NULL,10)) < offset)) {",
          "content_same": false
        },
        {
          "line": 10459,
          "old_api": "sigaction (SIGILL, &act, NULL)",
          "new_api": "sigaction (SIGSEGV, &act, NULL)",
          "old_text": "sigaction (SIGILL, &act, NULL)",
          "new_text": "sigaction (SIGSEGV, &act, NULL)",
          "old_line_content": "    sigaction (SIGILL, &act, NULL);",
          "new_line_content": "    sigaction (SIGSEGV, &act, NULL);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 8194,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(buf)",
          "old_line_content": "     * accumulate the differences between the child DB and the current one",
          "new_line_content": "    server.aofbuf = sdscatlen(server.aofbuf,buf,sdslen(buf));",
          "content_same": false
        },
        {
          "line": 8201,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(buf)",
          "old_line_content": "}",
          "new_line_content": "        server.bgrewritebuf = sdscatlen(server.bgrewritebuf,buf,sdslen(buf));",
          "content_same": false
        },
        {
          "line": 8203,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(buf)",
          "old_line_content": "/* In Redis commands are always executed in the context of a client, so in",
          "new_line_content": "    sdsfree(buf);",
          "content_same": false
        },
        {
          "line": 8209,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*c))",
          "old_line_content": "    c->fd = -1;",
          "new_line_content": "    struct redisClient *c = zmalloc(sizeof(*c));",
          "content_same": false
        },
        {
          "line": 8211,
          "old_api": null,
          "new_api": "selectDb",
          "old_text": null,
          "new_text": "selectDb(c,0)",
          "old_line_content": "    c->argc = 0;",
          "new_line_content": "    selectDb(c,0);",
          "content_same": false
        },
        {
          "line": 8213,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "    c->flags = 0;",
          "new_line_content": "    c->querybuf = sdsempty();",
          "content_same": false
        },
        {
          "line": 8221,
          "old_api": null,
          "new_api": "listSetFreeMethod",
          "old_text": null,
          "new_text": "listSetFreeMethod(c->reply,decrRefCount)",
          "old_line_content": "    return c;",
          "new_line_content": "    listSetFreeMethod(c->reply,decrRefCount);",
          "content_same": false
        },
        {
          "line": 8222,
          "old_api": null,
          "new_api": "listSetDupMethod",
          "old_text": null,
          "new_text": "listSetDupMethod(c->reply,dupClientReplyValue)",
          "old_line_content": "}",
          "new_line_content": "    listSetDupMethod(c->reply,dupClientReplyValue);",
          "content_same": false
        },
        {
          "line": 8223,
          "old_api": null,
          "new_api": "initClientMultiState",
          "old_text": null,
          "new_text": "initClientMultiState(c)",
          "old_line_content": "",
          "new_line_content": "    initClientMultiState(c);",
          "content_same": false
        },
        {
          "line": 8229,
          "old_api": null,
          "new_api": "listRelease",
          "old_text": null,
          "new_text": "listRelease(c->reply)",
          "old_line_content": "}",
          "new_line_content": "    listRelease(c->reply);",
          "content_same": false
        },
        {
          "line": 8230,
          "old_api": null,
          "new_api": "freeClientMultiState",
          "old_text": null,
          "new_text": "freeClientMultiState(c)",
          "old_line_content": "",
          "new_line_content": "    freeClientMultiState(c);",
          "content_same": false
        },
        {
          "line": 8231,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(c)",
          "old_line_content": "/* Replay the append log file. On error REDIS_OK is returned. On non fatal",
          "new_line_content": "    zfree(c);",
          "content_same": false
        },
        {
          "line": 8239,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(filename,\"r\")",
          "old_line_content": "    int appendonly = server.appendonly;",
          "new_line_content": "    FILE *fp = fopen(filename,\"r\");",
          "content_same": false
        },
        {
          "line": 8244,
          "old_api": null,
          "new_api": "fileno",
          "old_text": null,
          "new_text": "fileno(fp)",
          "old_line_content": "    if (fp == NULL) {",
          "new_line_content": "    if (redis_fstat(fileno(fp),&sb) != -1 && sb.st_size == 0)",
          "content_same": false
        },
        {
          "line": 8248,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Fatal error: can't open the append log file for reading: %s\",strerror(errno));",
          "content_same": false
        },
        {
          "line": 8249,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "    /* Temporarily disable AOF, to prevent EXEC from feeding a MULTI",
          "new_line_content": "        exit(1);",
          "content_same": false
        },
        {
          "line": 8256,
          "old_api": null,
          "new_api": "createFakeClient",
          "old_text": null,
          "new_text": "createFakeClient()",
          "old_line_content": "        unsigned long len;",
          "new_line_content": "    fakeClient = createFakeClient();",
          "content_same": false
        },
        {
          "line": 8265,
          "old_api": null,
          "new_api": "fgets",
          "old_text": null,
          "new_text": "fgets(buf,sizeof(buf),fp)",
          "old_line_content": "            else",
          "new_line_content": "        if (fgets(buf,sizeof(buf),fp) == NULL) {",
          "content_same": false
        },
        {
          "line": 8266,
          "old_api": null,
          "new_api": "feof",
          "old_text": null,
          "new_text": "feof(fp)",
          "old_line_content": "                goto readerr;",
          "new_line_content": "            if (feof(fp))",
          "content_same": false
        },
        {
          "line": 8273,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(robj*)*argc)",
          "old_line_content": "            if (buf[0] != '$') goto fmterr;",
          "new_line_content": "        argv = zmalloc(sizeof(robj*)*argc);",
          "content_same": false
        },
        {
          "line": 8279,
          "old_api": null,
          "new_api": "fread",
          "old_text": null,
          "new_text": "fread(argsds,len,1,fp)",
          "old_line_content": "        }",
          "new_line_content": "            if (len && fread(argsds,len,1,fp) == 0) goto fmterr;",
          "content_same": false
        },
        {
          "line": 8280,
          "old_api": null,
          "new_api": "createObject",
          "old_text": null,
          "new_text": "createObject(REDIS_STRING,argsds)",
          "old_line_content": "",
          "new_line_content": "            argv[j] = createObject(REDIS_STRING,argsds);",
          "content_same": false
        },
        {
          "line": 8281,
          "old_api": null,
          "new_api": "fread",
          "old_text": null,
          "new_text": "fread(buf,2,1,fp)",
          "old_line_content": "        /* Command lookup */",
          "new_line_content": "            if (fread(buf,2,1,fp) == 0) goto fmterr; /* discard CRLF */",
          "content_same": false
        },
        {
          "line": 8287,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Unknown command '%s' reading the append only file\", argv[0]->ptr)",
          "old_line_content": "        /* Try object encoding */",
          "new_line_content": "            redisLog(REDIS_WARNING,\"Unknown command '%s' reading the append only file\", argv[0]->ptr);",
          "content_same": false
        },
        {
          "line": 8288,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "        if (cmd->flags & REDIS_CMD_BULK)",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 8292,
          "old_api": null,
          "new_api": "tryObjectEncoding",
          "old_text": null,
          "new_text": "tryObjectEncoding(argv[argc-1])",
          "old_line_content": "        fakeClient->argv = argv;",
          "new_line_content": "            argv[argc-1] = tryObjectEncoding(argv[argc-1]);",
          "content_same": false
        },
        {
          "line": 8301,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(argv[j])",
          "old_line_content": "        loadedkeys++;",
          "new_line_content": "        for (j = 0; j < argc; j++) decrRefCount(argv[j]);",
          "content_same": false
        },
        {
          "line": 8302,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(argv)",
          "old_line_content": "        if (server.vm_enabled && (loadedkeys % 5000) == 0) {",
          "new_line_content": "        zfree(argv);",
          "content_same": false
        },
        {
          "line": 8306,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "        }",
          "new_line_content": "            while (zmalloc_used_memory() > server.vm_max_memory) {",
          "content_same": false
        },
        {
          "line": 8307,
          "old_api": null,
          "new_api": "vmSwapOneObjectBlocking",
          "old_text": null,
          "new_text": "vmSwapOneObjectBlocking()",
          "old_line_content": "    }",
          "new_line_content": "                if (vmSwapOneObjectBlocking() == REDIS_ERR) break;",
          "content_same": false
        },
        {
          "line": 8316,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "    return REDIS_OK;",
          "new_line_content": "    fclose(fp);",
          "content_same": false
        },
        {
          "line": 8317,
          "old_api": null,
          "new_api": "freeFakeClient",
          "old_text": null,
          "new_text": "freeFakeClient(fakeClient)",
          "old_line_content": "",
          "new_line_content": "    freeFakeClient(fakeClient);",
          "content_same": false
        },
        {
          "line": 8323,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Unexpected end of file reading the append only file\")",
          "old_line_content": "    }",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Unexpected end of file reading the append only file\");",
          "content_same": false
        },
        {
          "line": 8325,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "fmterr:",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Unrecoverable error reading the append only file: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 8329,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Bad file format reading the append only file\")",
          "old_line_content": "",
          "new_line_content": "    redisLog(REDIS_WARNING,\"Bad file format reading the append only file\");",
          "content_same": false
        },
        {
          "line": 8330,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "/* Write an object into a file in the bulk format $<count>\\r\\n<payload>\\r\\n */",
          "new_line_content": "    exit(1);",
          "content_same": false
        },
        {
          "line": 8347,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(obj->ptr)",
          "old_line_content": "        goto err;",
          "new_line_content": "    snprintf(buf,sizeof(buf),\"$%ld\\r\\n\",(long)sdslen(obj->ptr));",
          "content_same": false
        },
        {
          "line": 8351,
          "old_api": null,
          "new_api": "fwrite",
          "old_text": null,
          "new_text": "fwrite(\"\\r\\n\",2,1,fp)",
          "old_line_content": "err:",
          "new_line_content": "    if (fwrite(\"\\r\\n\",2,1,fp) == 0) goto err;",
          "content_same": false
        },
        {
          "line": 8355,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(obj)",
          "old_line_content": "",
          "new_line_content": "    if (decrrc) decrRefCount(obj);",
          "content_same": false
        },
        {
          "line": 8365,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(buf)",
          "old_line_content": "    return 1;",
          "new_line_content": "    if (fwrite(buf,strlen(buf),1,fp) == 0) return 0;",
          "content_same": false
        },
        {
          "line": 8366,
          "old_api": null,
          "new_api": "fwrite",
          "old_text": null,
          "new_text": "fwrite(s,len,1,fp)",
          "old_line_content": "}",
          "new_line_content": "    if (len && fwrite(s,len,1,fp) == 0) return 0;",
          "content_same": false
        },
        {
          "line": 8367,
          "old_api": null,
          "new_api": "fwrite",
          "old_text": null,
          "new_text": "fwrite(\"\\r\\n\",2,1,fp)",
          "old_line_content": "",
          "new_line_content": "    if (fwrite(\"\\r\\n\",2,1,fp) == 0) return 0;",
          "content_same": false
        },
        {
          "line": 8376,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(dbuf)",
          "old_line_content": "    return 1;",
          "new_line_content": "    snprintf(buf,sizeof(buf),\"$%lu\\r\\n\",(unsigned long)strlen(dbuf)-2);",
          "content_same": false
        },
        {
          "line": 8377,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(buf)",
          "old_line_content": "}",
          "new_line_content": "    if (fwrite(buf,strlen(buf),1,fp) == 0) return 0;",
          "content_same": false
        },
        {
          "line": 8378,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(dbuf)",
          "old_line_content": "",
          "new_line_content": "    if (fwrite(dbuf,strlen(dbuf),1,fp) == 0) return 0;",
          "content_same": false
        },
        {
          "line": 8387,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(lbuf)",
          "old_line_content": "    return 1;",
          "new_line_content": "    snprintf(buf,sizeof(buf),\"$%lu\\r\\n\",(unsigned long)strlen(lbuf)-2);",
          "content_same": false
        },
        {
          "line": 8388,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(buf)",
          "old_line_content": "}",
          "new_line_content": "    if (fwrite(buf,strlen(buf),1,fp) == 0) return 0;",
          "content_same": false
        },
        {
          "line": 8389,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(lbuf)",
          "old_line_content": "",
          "new_line_content": "    if (fwrite(lbuf,strlen(lbuf),1,fp) == 0) return 0;",
          "content_same": false
        },
        {
          "line": 8401,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "     * one used by rewriteAppendOnlyFileBackground() function. */",
          "new_line_content": "    time_t now = time(NULL);",
          "content_same": false
        },
        {
          "line": 8406,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(tmpfile,\"w\")",
          "old_line_content": "        return REDIS_ERR;",
          "new_line_content": "    fp = fopen(tmpfile,\"w\");",
          "content_same": false
        },
        {
          "line": 8408,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "    for (j = 0; j < server.dbnum; j++) {",
          "new_line_content": "        redisLog(REDIS_WARNING, \"Failed rewriting the append only file: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 8416,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(d)",
          "old_line_content": "            return REDIS_ERR;",
          "new_line_content": "        di = dictGetIterator(d);",
          "content_same": false
        },
        {
          "line": 8418,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "",
          "new_line_content": "            fclose(fp);",
          "content_same": false
        },
        {
          "line": 8423,
          "old_api": null,
          "new_api": "fwrite",
          "old_text": null,
          "new_text": "fwrite(selectcmd,sizeof(selectcmd)-1,1,fp)",
          "old_line_content": "        /* Iterate this DB writing every entry */",
          "new_line_content": "        if (fwrite(selectcmd,sizeof(selectcmd)-1,1,fp) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8427,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "            int swapped;",
          "new_line_content": "        while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 8432,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "             * value object instead to just increment the ref count anyway",
          "new_line_content": "            key = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 8445,
          "old_api": null,
          "new_api": "getExpire",
          "old_text": null,
          "new_text": "getExpire(db,key)",
          "old_line_content": "            if (o->type == REDIS_STRING) {",
          "new_line_content": "            expiretime = getExpire(db,key);",
          "content_same": false
        },
        {
          "line": 8453,
          "old_api": null,
          "new_api": "fwriteBulkObject",
          "old_text": null,
          "new_text": "fwriteBulkObject(fp,key)",
          "old_line_content": "                /* Emit the RPUSHes needed to rebuild the list */",
          "new_line_content": "                if (fwriteBulkObject(fp,key) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8454,
          "old_api": null,
          "new_api": "fwriteBulkObject",
          "old_text": null,
          "new_text": "fwriteBulkObject(fp,o)",
          "old_line_content": "                list *list = o->ptr;",
          "new_line_content": "                if (fwriteBulkObject(fp,o) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8462,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&li)",
          "old_line_content": "",
          "new_line_content": "                while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 8466,
          "old_api": null,
          "new_api": "fwrite",
          "old_text": null,
          "new_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "old_line_content": "                }",
          "new_line_content": "                    if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8467,
          "old_api": null,
          "new_api": "fwriteBulkObject",
          "old_text": null,
          "new_text": "fwriteBulkObject(fp,key)",
          "old_line_content": "            } else if (o->type == REDIS_SET) {",
          "new_line_content": "                    if (fwriteBulkObject(fp,key) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8468,
          "old_api": null,
          "new_api": "fwriteBulkObject",
          "old_text": null,
          "new_text": "fwriteBulkObject(fp,eleobj)",
          "old_line_content": "                /* Emit the SADDs needed to rebuild the set */",
          "new_line_content": "                    if (fwriteBulkObject(fp,eleobj) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8476,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "",
          "new_line_content": "                while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 8480,
          "old_api": null,
          "new_api": "fwrite",
          "old_text": null,
          "new_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "old_line_content": "                }",
          "new_line_content": "                    if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8482,
          "old_api": null,
          "new_api": "fwriteBulkObject",
          "old_text": null,
          "new_text": "fwriteBulkObject(fp,eleobj)",
          "old_line_content": "            } else if (o->type == REDIS_ZSET) {",
          "new_line_content": "                    if (fwriteBulkObject(fp,eleobj) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8484,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "                zset *zs = o->ptr;",
          "new_line_content": "                dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 8497,
          "old_api": null,
          "new_api": "fwriteBulkObject",
          "old_text": null,
          "new_text": "fwriteBulkObject(fp,key)",
          "old_line_content": "                }",
          "new_line_content": "                    if (fwriteBulkObject(fp,key) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8499,
          "old_api": null,
          "new_api": "fwriteBulkObject",
          "old_text": null,
          "new_text": "fwriteBulkObject(fp,eleobj)",
          "old_line_content": "            } else if (o->type == REDIS_HASH) {",
          "new_line_content": "                    if (fwriteBulkObject(fp,eleobj) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8501,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "",
          "new_line_content": "                dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 8507,
          "old_api": null,
          "new_api": "zipmapRewind",
          "old_text": null,
          "new_text": "zipmapRewind(o->ptr)",
          "old_line_content": "",
          "new_line_content": "                    unsigned char *p = zipmapRewind(o->ptr);",
          "content_same": false
        },
        {
          "line": 8512,
          "old_api": null,
          "new_api": "fwrite",
          "old_text": null,
          "new_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "old_line_content": "                            return -1;",
          "new_line_content": "                        if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8514,
          "old_api": null,
          "new_api": "fwriteBulkString",
          "old_text": null,
          "new_text": "fwriteBulkString(fp,(char*)field,flen)",
          "old_line_content": "                            return -1;",
          "new_line_content": "                        if (fwriteBulkString(fp,(char*)field,flen) == -1)",
          "content_same": false
        },
        {
          "line": 8516,
          "old_api": null,
          "new_api": "fwriteBulkString",
          "old_text": null,
          "new_text": "fwriteBulkString(fp,(char*)val,vlen)",
          "old_line_content": "                } else {",
          "new_line_content": "                        if (fwriteBulkString(fp,(char*)val,vlen) == -1)",
          "content_same": false
        },
        {
          "line": 8523,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "",
          "new_line_content": "                    while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 8528,
          "old_api": null,
          "new_api": "fwriteBulkObject",
          "old_text": null,
          "new_text": "fwriteBulkObject(fp,key)",
          "old_line_content": "                    }",
          "new_line_content": "                        if (fwriteBulkObject(fp,key) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8530,
          "old_api": null,
          "new_api": "fwriteBulkObject",
          "old_text": null,
          "new_text": "fwriteBulkObject(fp,val)",
          "old_line_content": "                }",
          "new_line_content": "                        if (fwriteBulkObject(fp,val) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 8535,
          "old_api": null,
          "new_api": "redisPanic",
          "old_text": null,
          "new_text": "redisPanic(\"Unknown object type\")",
          "old_line_content": "            if (expiretime != -1) {",
          "new_line_content": "                redisPanic(\"Unknown object type\");",
          "content_same": false
        },
        {
          "line": 8542,
          "old_api": null,
          "new_api": "fwrite",
          "old_text": null,
          "new_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "old_line_content": "            }",
          "new_line_content": "                if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8544,
          "old_api": null,
          "new_api": "fwriteBulkLong",
          "old_text": null,
          "new_text": "fwriteBulkLong(fp,expiretime)",
          "old_line_content": "        }",
          "new_line_content": "                if (fwriteBulkLong(fp,expiretime) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 8546,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(o)",
          "old_line_content": "    }",
          "new_line_content": "            if (swapped) decrRefCount(o);",
          "content_same": false
        },
        {
          "line": 8548,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "    /* Make sure data will not remain on the OS's output buffers */",
          "new_line_content": "        dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 8552,
          "old_api": null,
          "new_api": "fflush",
          "old_text": null,
          "new_text": "fflush(fp)",
          "old_line_content": "",
          "new_line_content": "    fflush(fp);",
          "content_same": false
        },
        {
          "line": 8553,
          "old_api": null,
          "new_api": "fileno",
          "old_text": null,
          "new_text": "fileno(fp)",
          "old_line_content": "    /* Use RENAME to make sure the DB file is changed atomically only",
          "new_line_content": "    fsync(fileno(fp));",
          "content_same": false
        },
        {
          "line": 8554,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "     * if the generate DB file is ok. */",
          "new_line_content": "    fclose(fp);",
          "content_same": false
        },
        {
          "line": 8558,
          "old_api": null,
          "new_api": "rename",
          "old_text": null,
          "new_text": "rename(tmpfile,filename)",
          "old_line_content": "        return REDIS_ERR;",
          "new_line_content": "    if (rename(tmpfile,filename) == -1) {",
          "content_same": false
        },
        {
          "line": 8559,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "    }",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Error moving temp append only file on the final destination: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 8563,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"SYNC append only file rewrite performed\")",
          "old_line_content": "werr:",
          "new_line_content": "    redisLog(REDIS_NOTICE,\"SYNC append only file rewrite performed\");",
          "content_same": false
        },
        {
          "line": 8568,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(tmpfile)",
          "old_line_content": "    return REDIS_ERR;",
          "new_line_content": "    unlink(tmpfile);",
          "content_same": false
        },
        {
          "line": 8569,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "}",
          "new_line_content": "    redisLog(REDIS_WARNING,\"Write error writing append only file on disk: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 8570,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "",
          "new_line_content": "    if (di) dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 8590,
          "old_api": null,
          "new_api": "waitEmptyIOJobsQueue",
          "old_text": null,
          "new_text": "waitEmptyIOJobsQueue()",
          "old_line_content": "        char tmpfile[256];",
          "new_line_content": "    if (server.vm_enabled) waitEmptyIOJobsQueue();",
          "content_same": false
        },
        {
          "line": 8591,
          "old_api": null,
          "new_api": "fork",
          "old_text": null,
          "new_text": "fork()",
          "old_line_content": "",
          "new_line_content": "    if ((childpid = fork()) == 0) {",
          "content_same": false
        },
        {
          "line": 8597,
          "old_api": null,
          "new_api": "getpid",
          "old_text": null,
          "new_text": "getpid()",
          "old_line_content": "        } else {",
          "new_line_content": "        snprintf(tmpfile,256,\"temp-rewriteaof-bg-%d.aof\", (int) getpid());",
          "content_same": false
        },
        {
          "line": 8599,
          "old_api": null,
          "new_api": "_exit",
          "old_text": null,
          "new_text": "_exit(0)",
          "old_line_content": "        }",
          "new_line_content": "            _exit(0);",
          "content_same": false
        },
        {
          "line": 8601,
          "old_api": null,
          "new_api": "_exit",
          "old_text": null,
          "new_text": "_exit(1)",
          "old_line_content": "        /* Parent */",
          "new_line_content": "            _exit(1);",
          "content_same": false
        },
        {
          "line": 8606,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\n                \"Can't rewrite append only file in background: fork: %s\",\n                strerror(errno))",
          "old_line_content": "            return REDIS_ERR;",
          "new_line_content": "            redisLog(REDIS_WARNING,",
          "content_same": false
        },
        {
          "line": 8614,
          "old_api": null,
          "new_api": "updateDictResizePolicy",
          "old_text": null,
          "new_text": "updateDictResizePolicy()",
          "old_line_content": "         * accumulated by the parent into server.bgrewritebuf will start",
          "new_line_content": "        updateDictResizePolicy();",
          "content_same": false
        },
        {
          "line": 8630,
          "old_api": null,
          "new_api": "rewriteAppendOnlyFileBackground",
          "old_text": null,
          "new_text": "rewriteAppendOnlyFileBackground()",
          "old_line_content": "    } else {",
          "new_line_content": "    if (rewriteAppendOnlyFileBackground() == REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 8632,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(status)",
          "old_line_content": "    }",
          "new_line_content": "        addReplySds(c,sdsnew(status));",
          "content_same": false
        },
        {
          "line": 8634,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.err)",
          "old_line_content": "",
          "new_line_content": "        addReply(c,shared.err);",
          "content_same": false
        },
        {
          "line": 8641,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(tmpfile,256,\"temp-rewriteaof-bg-%d.aof\", (int) childpid)",
          "old_line_content": "",
          "new_line_content": "    snprintf(tmpfile,256,\"temp-rewriteaof-bg-%d.aof\", (int) childpid);",
          "content_same": false
        },
        {
          "line": 8642,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(tmpfile)",
          "old_line_content": "/* Virtual Memory is composed mainly of two subsystems:",
          "new_line_content": "    unlink(tmpfile);",
          "content_same": false
        },
        {
          "line": 8675,
          "old_api": null,
          "new_api": "zmalloc_enable_thread_safeness",
          "old_text": null,
          "new_text": "zmalloc_enable_thread_safeness()",
          "old_line_content": "    /* Try to open the old swap file, otherwise create it */",
          "new_line_content": "        zmalloc_enable_thread_safeness(); /* we need thread safe zmalloc() */",
          "content_same": false
        },
        {
          "line": 8679,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(server.vm_swap_file,\"r+b\")",
          "old_line_content": "    if (server.vm_fp == NULL) {",
          "new_line_content": "    if ((server.vm_fp = fopen(server.vm_swap_file,\"r+b\")) == NULL) {",
          "content_same": false
        },
        {
          "line": 8686,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "    /* Lock the swap file for writing, this is useful in order to avoid",
          "new_line_content": "        exit(1);",
          "content_same": false
        },
        {
          "line": 8688,
          "old_api": null,
          "new_api": "fileno",
          "old_text": null,
          "new_text": "fileno(server.vm_fp)",
          "old_line_content": "    fl.l_type = F_WRLCK;",
          "new_line_content": "    server.vm_fd = fileno(server.vm_fp);",
          "content_same": false
        },
        {
          "line": 8695,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\n            \"Can't lock the swap file at '%s': %s. Make sure it is not used by another Redis instance.\", server.vm_swap_file, strerror(errno))",
          "old_line_content": "    }",
          "new_line_content": "        redisLog(REDIS_WARNING,",
          "content_same": false
        },
        {
          "line": 8696,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "    /* Initialize */",
          "new_line_content": "            \"Can't lock the swap file at '%s': %s. Make sure it is not used by another Redis instance.\", server.vm_swap_file, strerror(errno));",
          "content_same": false
        },
        {
          "line": 8697,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "    server.vm_next_page = 0;",
          "new_line_content": "        exit(1);",
          "content_same": false
        },
        {
          "line": 8709,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Can't ftruncate swap file: %s. Exiting.\",\n            strerror(errno))",
          "old_line_content": "    } else {",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Can't ftruncate swap file: %s. Exiting.\",",
          "content_same": false
        },
        {
          "line": 8711,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "    }",
          "new_line_content": "        exit(1);",
          "content_same": false
        },
        {
          "line": 8716,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_VERBOSE,\"Allocated %lld bytes page table for %lld pages\",\n        (long long) (server.vm_pages+7)/8, server.vm_pages)",
          "old_line_content": "",
          "new_line_content": "    redisLog(REDIS_VERBOSE,\"Allocated %lld bytes page table for %lld pages\",",
          "content_same": false
        },
        {
          "line": 8725,
          "old_api": null,
          "new_api": "pthread_mutex_init",
          "old_text": null,
          "new_text": "pthread_mutex_init(&server.io_mutex,NULL)",
          "old_line_content": "    server.io_active_threads = 0;",
          "new_line_content": "    pthread_mutex_init(&server.io_mutex,NULL);",
          "content_same": false
        },
        {
          "line": 8730,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Unable to intialized VM: pipe(2): %s. Exiting.\"\n            ,strerror(errno))",
          "old_line_content": "    }",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Unable to intialized VM: pipe(2): %s. Exiting.\"",
          "content_same": false
        },
        {
          "line": 8731,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "    server.io_ready_pipe_read = pipefds[0];",
          "new_line_content": "            ,strerror(errno));",
          "content_same": false
        },
        {
          "line": 8732,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "    server.io_ready_pipe_write = pipefds[1];",
          "new_line_content": "        exit(1);",
          "content_same": false
        },
        {
          "line": 8739,
          "old_api": null,
          "new_api": "pthread_attr_getstacksize",
          "old_text": null,
          "new_text": "pthread_attr_getstacksize(&server.io_threads_attr, &stacksize)",
          "old_line_content": "    /* Listen for events in the threaded I/O pipe */",
          "new_line_content": "    pthread_attr_getstacksize(&server.io_threads_attr, &stacksize);",
          "content_same": false
        },
        {
          "line": 8741,
          "old_api": null,
          "new_api": "pthread_attr_setstacksize",
          "old_text": null,
          "new_text": "pthread_attr_setstacksize(&server.io_threads_attr, stacksize)",
          "old_line_content": "        vmThreadedIOCompletedJob, NULL) == AE_ERR)",
          "new_line_content": "    pthread_attr_setstacksize(&server.io_threads_attr, stacksize);",
          "content_same": false
        },
        {
          "line": 8743,
          "old_api": null,
          "new_api": "aeCreateFileEvent",
          "old_text": null,
          "new_text": "aeCreateFileEvent(server.el, server.io_ready_pipe_read, AE_READABLE,\n        vmThreadedIOCompletedJob, NULL)",
          "old_line_content": "}",
          "new_line_content": "    if (aeCreateFileEvent(server.el, server.io_ready_pipe_read, AE_READABLE,",
          "content_same": false
        },
        {
          "line": 8745,
          "old_api": null,
          "new_api": "oom",
          "old_text": null,
          "new_text": "oom(\"creating file event\")",
          "old_line_content": "/* Mark the page as used */",
          "new_line_content": "        oom(\"creating file event\");",
          "content_same": false
        },
        {
          "line": 8752,
          "old_api": null,
          "new_api": "vmFreePage",
          "old_text": null,
          "new_text": "vmFreePage(page)",
          "old_line_content": "",
          "new_line_content": "    redisAssert(vmFreePage(page) == 1);",
          "content_same": false
        },
        {
          "line": 8761,
          "old_api": null,
          "new_api": "vmMarkPageUsed",
          "old_text": null,
          "new_text": "vmMarkPageUsed(page+j)",
          "old_line_content": "        (long long)count, (long long)page);",
          "new_line_content": "        vmMarkPageUsed(page+j);",
          "content_same": false
        },
        {
          "line": 8763,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_DEBUG,\"Mark USED pages: %lld pages at %lld\\n\",\n        (long long)count, (long long)page)",
          "old_line_content": "",
          "new_line_content": "    redisLog(REDIS_DEBUG,\"Mark USED pages: %lld pages at %lld\\n\",",
          "content_same": false
        },
        {
          "line": 8771,
          "old_api": null,
          "new_api": "vmFreePage",
          "old_text": null,
          "new_text": "vmFreePage(page)",
          "old_line_content": "",
          "new_line_content": "    redisAssert(vmFreePage(page) == 0);",
          "content_same": false
        },
        {
          "line": 8780,
          "old_api": null,
          "new_api": "vmMarkPageFree",
          "old_text": null,
          "new_text": "vmMarkPageFree(page+j)",
          "old_line_content": "        (long long)count, (long long)page);",
          "new_line_content": "        vmMarkPageFree(page+j);",
          "content_same": false
        },
        {
          "line": 8782,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_DEBUG,\"Mark FREE pages: %lld pages at %lld\\n\",\n        (long long)count, (long long)page)",
          "old_line_content": "",
          "new_line_content": "    redisLog(REDIS_DEBUG,\"Mark FREE pages: %lld pages at %lld\\n\",",
          "content_same": false
        },
        {
          "line": 8834,
          "old_api": null,
          "new_api": "vmFreePage",
          "old_text": null,
          "new_text": "vmFreePage(this)",
          "old_line_content": "            /* Already got N free pages? Return to the caller, with success */",
          "new_line_content": "        if (vmFreePage(this)) {",
          "content_same": false
        },
        {
          "line": 8841,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_DEBUG, \"FOUND CONTIGUOUS PAGES: %lld pages at %lld\\n\", (long long) n, (long long) *first)",
          "old_line_content": "        } else {",
          "new_line_content": "                redisLog(REDIS_DEBUG, \"FOUND CONTIGUOUS PAGES: %lld pages at %lld\\n\", (long long) n, (long long) *first);",
          "content_same": false
        },
        {
          "line": 8853,
          "old_api": null,
          "new_api": "random",
          "old_text": null,
          "new_text": "random()",
          "old_line_content": "             * to make sure numfree is set to zero as we only jump *if* it",
          "new_line_content": "            offset += random() % REDIS_VM_MAX_RANDOM_JUMP;",
          "content_same": false
        },
        {
          "line": 8869,
          "old_api": null,
          "new_api": "fseeko",
          "old_text": null,
          "new_text": "fseeko(server.vm_fp,page*server.vm_page_size,SEEK_SET)",
          "old_line_content": "            \"Critical VM problem in vmWriteObjectOnSwap(): can't seek: %s\",",
          "new_line_content": "    if (fseeko(server.vm_fp,page*server.vm_page_size,SEEK_SET) == -1) {",
          "content_same": false
        },
        {
          "line": 8871,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\n            \"Critical VM problem in vmWriteObjectOnSwap(): can't seek: %s\",\n            strerror(errno))",
          "old_line_content": "        return REDIS_ERR;",
          "new_line_content": "        redisLog(REDIS_WARNING,",
          "content_same": false
        },
        {
          "line": 8876,
          "old_api": null,
          "new_api": "rdbSaveObject",
          "old_text": null,
          "new_text": "rdbSaveObject(server.vm_fp,o)",
          "old_line_content": "    return REDIS_OK;",
          "new_line_content": "    rdbSaveObject(server.vm_fp,o);",
          "content_same": false
        },
        {
          "line": 8877,
          "old_api": null,
          "new_api": "fflush",
          "old_text": null,
          "new_text": "fflush(server.vm_fp)",
          "old_line_content": "}",
          "new_line_content": "    fflush(server.vm_fp);",
          "content_same": false
        },
        {
          "line": 8878,
          "old_api": null,
          "new_api": "pthread_mutex_unlock",
          "old_text": null,
          "new_text": "pthread_mutex_unlock(&server.io_swapfile_mutex)",
          "old_line_content": "",
          "new_line_content": "    if (server.vm_enabled) pthread_mutex_unlock(&server.io_swapfile_mutex);",
          "content_same": false
        },
        {
          "line": 8891,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(key->refcount == 1)",
          "old_line_content": "    key->vm.page = page;",
          "new_line_content": "    assert(key->refcount == 1);",
          "content_same": false
        },
        {
          "line": 8892,
          "old_api": null,
          "new_api": "vmFindContiguousPages",
          "old_text": null,
          "new_text": "vmFindContiguousPages(&page,pages)",
          "old_line_content": "    key->vm.usedpages = pages;",
          "new_line_content": "    if (vmFindContiguousPages(&page,pages) == REDIS_ERR) return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 8893,
          "old_api": null,
          "new_api": "vmWriteObjectOnSwap",
          "old_text": null,
          "new_text": "vmWriteObjectOnSwap(val,page)",
          "old_line_content": "    key->storage = REDIS_VM_SWAPPED;",
          "new_line_content": "    if (vmWriteObjectOnSwap(val,page) == REDIS_ERR) return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 8898,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(val)",
          "old_line_content": "        (unsigned char*) key->ptr,",
          "new_line_content": "    decrRefCount(val); /* Deallocate the object from memory. */",
          "content_same": false
        },
        {
          "line": 8899,
          "old_api": null,
          "new_api": "vmMarkPagesUsed",
          "old_text": null,
          "new_text": "vmMarkPagesUsed(page,pages)",
          "old_line_content": "        (unsigned long long) page, (unsigned long long) pages);",
          "new_line_content": "    vmMarkPagesUsed(page,pages);",
          "content_same": false
        },
        {
          "line": 8900,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_DEBUG,\"VM: object %s swapped out at %lld (%lld pages)\",\n        (unsigned char*) key->ptr,\n        (unsigned long long) page, (unsigned long long) pages)",
          "old_line_content": "    server.vm_stats_swapped_objects++;",
          "new_line_content": "    redisLog(REDIS_DEBUG,\"VM: object %s swapped out at %lld (%lld pages)\",",
          "content_same": false
        },
        {
          "line": 8911,
          "old_api": null,
          "new_api": "pthread_mutex_lock",
          "old_text": null,
          "new_text": "pthread_mutex_lock(&server.io_swapfile_mutex)",
          "old_line_content": "            \"Unrecoverable VM problem in vmReadObjectFromSwap(): can't seek: %s\",",
          "new_line_content": "    if (server.vm_enabled) pthread_mutex_lock(&server.io_swapfile_mutex);",
          "content_same": false
        },
        {
          "line": 8916,
          "old_api": null,
          "new_api": "_exit",
          "old_text": null,
          "new_text": "_exit(1)",
          "old_line_content": "    if (o == NULL) {",
          "new_line_content": "        _exit(1);",
          "content_same": false
        },
        {
          "line": 8921,
          "old_api": null,
          "new_api": "_exit",
          "old_text": null,
          "new_text": "_exit(1)",
          "old_line_content": "    return o;",
          "new_line_content": "        _exit(1);",
          "content_same": false
        },
        {
          "line": 8923,
          "old_api": null,
          "new_api": "pthread_mutex_unlock",
          "old_text": null,
          "new_text": "pthread_mutex_unlock(&server.io_swapfile_mutex)",
          "old_line_content": "",
          "new_line_content": "    if (server.vm_enabled) pthread_mutex_unlock(&server.io_swapfile_mutex);",
          "content_same": false
        },
        {
          "line": 8935,
          "old_api": null,
          "new_api": "redisAssert",
          "old_text": null,
          "new_text": "redisAssert(key->storage == REDIS_VM_SWAPPED || key->storage == REDIS_VM_LOADING)",
          "old_line_content": "        key->storage = REDIS_VM_MEMORY;",
          "new_line_content": "    redisAssert(key->storage == REDIS_VM_SWAPPED || key->storage == REDIS_VM_LOADING);",
          "content_same": false
        },
        {
          "line": 8936,
          "old_api": null,
          "new_api": "vmReadObjectFromSwap",
          "old_text": null,
          "new_text": "vmReadObjectFromSwap(key->vm.page,key->vtype)",
          "old_line_content": "        key->vm.atime = server.unixtime;",
          "new_line_content": "    val = vmReadObjectFromSwap(key->vm.page,key->vtype);",
          "content_same": false
        },
        {
          "line": 8940,
          "old_api": null,
          "new_api": "vmMarkPagesFree",
          "old_text": null,
          "new_text": "vmMarkPagesFree(key->vm.page,key->vm.usedpages)",
          "old_line_content": "        server.vm_stats_swapped_objects--;",
          "new_line_content": "        vmMarkPagesFree(key->vm.page,key->vm.usedpages);",
          "content_same": false
        },
        {
          "line": 8941,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_DEBUG, \"VM: object %s loaded from disk\",\n            (unsigned char*) key->ptr)",
          "old_line_content": "    } else {",
          "new_line_content": "        redisLog(REDIS_DEBUG, \"VM: object %s loaded from disk\",",
          "content_same": false
        },
        {
          "line": 8945,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_DEBUG, \"VM: object %s previewed from disk\",\n            (unsigned char*) key->ptr)",
          "old_line_content": "    server.vm_stats_swapins++;",
          "new_line_content": "        redisLog(REDIS_DEBUG, \"VM: object %s previewed from disk\",",
          "content_same": false
        },
        {
          "line": 8957,
          "old_api": null,
          "new_api": "vmCancelThreadedIOJob",
          "old_text": null,
          "new_text": "vmCancelThreadedIOJob(key)",
          "old_line_content": "",
          "new_line_content": "        vmCancelThreadedIOJob(key);",
          "content_same": false
        },
        {
          "line": 8958,
          "old_api": null,
          "new_api": "vmGenericLoadObject",
          "old_text": null,
          "new_text": "vmGenericLoadObject(key,0)",
          "old_line_content": "/* Just load the value on disk, without to modify the key.",
          "new_line_content": "    return vmGenericLoadObject(key,0);",
          "content_same": false
        },
        {
          "line": 8966,
          "old_api": null,
          "new_api": "vmGenericLoadObject",
          "old_text": null,
          "new_text": "vmGenericLoadObject(key,1)",
          "old_line_content": "/* How a good candidate is this object for swapping?",
          "new_line_content": "    return vmGenericLoadObject(key,1);",
          "content_same": false
        },
        {
          "line": 8994,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(o->ptr)",
          "old_line_content": "    case REDIS_LIST:",
          "new_line_content": "            asize = sdslen(o->ptr)+sizeof(*o)+sizeof(long)*2;",
          "content_same": false
        },
        {
          "line": 8999,
          "old_api": null,
          "new_api": "listFirst",
          "old_text": null,
          "new_text": "listFirst(l)",
          "old_line_content": "        if (ln) {",
          "new_line_content": "        listNode *ln = listFirst(l);",
          "content_same": false
        },
        {
          "line": 9007,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(ele->ptr)",
          "old_line_content": "        }",
          "new_line_content": "                            (sizeof(*o)+sdslen(ele->ptr)) :",
          "content_same": false
        },
        {
          "line": 9009,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(l)",
          "old_line_content": "    case REDIS_SET:",
          "new_line_content": "            asize += (sizeof(listNode)+elesize)*listLength(l);",
          "content_same": false
        },
        {
          "line": 9017,
          "old_api": null,
          "new_api": "dictSlots",
          "old_text": null,
          "new_text": "dictSlots(d)",
          "old_line_content": "            long elesize;",
          "new_line_content": "        asize = sizeof(dict)+(sizeof(struct dictEntry*)*dictSlots(d));",
          "content_same": false
        },
        {
          "line": 9019,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(d)",
          "old_line_content": "",
          "new_line_content": "        if (dictSize(d)) {",
          "content_same": false
        },
        {
          "line": 9024,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "                            sizeof(*o);",
          "new_line_content": "            ele = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 9028,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(d)",
          "old_line_content": "        break;",
          "new_line_content": "            asize += (sizeof(struct dictEntry)+elesize)*dictSize(d);",
          "content_same": false
        },
        {
          "line": 9029,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(d)",
          "old_line_content": "    case REDIS_HASH:",
          "new_line_content": "            if (z) asize += sizeof(zskiplistNode)*dictSize(d);",
          "content_same": false
        },
        {
          "line": 9034,
          "old_api": null,
          "new_api": "zipmapRewind",
          "old_text": null,
          "new_text": "zipmapRewind((unsigned char*)o->ptr)",
          "old_line_content": "            unsigned char *key, *val;",
          "new_line_content": "            unsigned char *p = zipmapRewind((unsigned char*)o->ptr);",
          "content_same": false
        },
        {
          "line": 9035,
          "old_api": null,
          "new_api": "zipmapLen",
          "old_text": null,
          "new_text": "zipmapLen((unsigned char*)o->ptr)",
          "old_line_content": "",
          "new_line_content": "            unsigned int len = zipmapLen((unsigned char*)o->ptr);",
          "content_same": false
        },
        {
          "line": 9039,
          "old_api": null,
          "new_api": "zipmapNext",
          "old_text": null,
          "new_text": "zipmapNext(p,&key,&klen,&val,&vlen)",
          "old_line_content": "            }",
          "new_line_content": "            if ((p = zipmapNext(p,&key,&klen,&val,&vlen)) == NULL) {",
          "content_same": false
        },
        {
          "line": 9046,
          "old_api": null,
          "new_api": "dictSlots",
          "old_text": null,
          "new_text": "dictSlots(d)",
          "old_line_content": "                robj *ele;",
          "new_line_content": "            asize = sizeof(dict)+(sizeof(struct dictEntry*)*dictSlots(d));",
          "content_same": false
        },
        {
          "line": 9047,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(d)",
          "old_line_content": "",
          "new_line_content": "            if (dictSize(d)) {",
          "content_same": false
        },
        {
          "line": 9052,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "                                sizeof(*o);",
          "new_line_content": "                ele = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 9054,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(ele->ptr)",
          "old_line_content": "                elesize = (ele->encoding == REDIS_ENCODING_RAW) ?",
          "new_line_content": "                                (sizeof(*o)+sdslen(ele->ptr)) :",
          "content_same": false
        },
        {
          "line": 9056,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "                                sizeof(*o);",
          "new_line_content": "                ele = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 9058,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(ele->ptr)",
          "old_line_content": "            }",
          "new_line_content": "                                (sizeof(*o)+sdslen(ele->ptr)) :",
          "content_same": false
        },
        {
          "line": 9060,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(d)",
          "old_line_content": "        break;",
          "new_line_content": "                asize += (sizeof(struct dictEntry)+elesize)*dictSize(d);",
          "content_same": false
        },
        {
          "line": 9065,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log(1+asize)",
          "old_line_content": "/* Try to swap an object that's a good candidate for swapping.",
          "new_line_content": "    return (double)age*log(1+asize);",
          "content_same": false
        },
        {
          "line": 9088,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(db->dict)",
          "old_line_content": "            double swappability;",
          "new_line_content": "        if (dictSize(db->dict) == 0) continue;",
          "content_same": false
        },
        {
          "line": 9094,
          "old_api": null,
          "new_api": "dictGetRandomKey",
          "old_text": null,
          "new_text": "dictGetRandomKey(db->dict)",
          "old_line_content": "            /* Only swap objects that are currently in memory.",
          "new_line_content": "            de = dictGetRandomKey(db->dict);",
          "content_same": false
        },
        {
          "line": 9095,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "             *",
          "new_line_content": "            key = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 9096,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "             * Also don't swap shared objects if threaded VM is on, as we",
          "new_line_content": "            val = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 9108,
          "old_api": null,
          "new_api": "computeObjectSwappability",
          "old_text": null,
          "new_text": "computeObjectSwappability(val)",
          "old_line_content": "                best_swappability = swappability;",
          "new_line_content": "            swappability = computeObjectSwappability(val);",
          "content_same": false
        },
        {
          "line": 9118,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(best)",
          "old_line_content": "        key->ptr, best_swappability);",
          "new_line_content": "    val = dictGetEntryVal(best);",
          "content_same": false
        },
        {
          "line": 9120,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_DEBUG,\"Key with best swappability: %s, %f\",\n        key->ptr, best_swappability)",
          "old_line_content": "    /* Unshare the key if needed */",
          "new_line_content": "    redisLog(REDIS_DEBUG,\"Key with best swappability: %s, %f\",",
          "content_same": false
        },
        {
          "line": 9125,
          "old_api": null,
          "new_api": "dupStringObject",
          "old_text": null,
          "new_text": "dupStringObject(key)",
          "old_line_content": "    }",
          "new_line_content": "        robj *newkey = dupStringObject(key);",
          "content_same": false
        },
        {
          "line": 9126,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(key)",
          "old_line_content": "    /* Swap it */",
          "new_line_content": "        decrRefCount(key);",
          "content_same": false
        },
        {
          "line": 9127,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(best)",
          "old_line_content": "    if (usethreads) {",
          "new_line_content": "        key = dictGetEntryKey(best) = newkey;",
          "content_same": false
        },
        {
          "line": 9134,
          "old_api": null,
          "new_api": "vmSwapObjectBlocking",
          "old_text": null,
          "new_text": "vmSwapObjectBlocking(key,val)",
          "old_line_content": "        } else {",
          "new_line_content": "        if (vmSwapObjectBlocking(key,val) == REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 9135,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(best)",
          "old_line_content": "            return REDIS_ERR;",
          "new_line_content": "            dictGetEntryVal(best) = NULL;",
          "content_same": false
        },
        {
          "line": 9144,
          "old_api": null,
          "new_api": "vmSwapOneObject",
          "old_text": null,
          "new_text": "vmSwapOneObject(0)",
          "old_line_content": "static int vmSwapOneObjectThreaded() {",
          "new_line_content": "    return vmSwapOneObject(0);",
          "content_same": false
        },
        {
          "line": 9148,
          "old_api": null,
          "new_api": "vmSwapOneObject",
          "old_text": null,
          "new_text": "vmSwapOneObject(1)",
          "old_line_content": "/* Return true if it's safe to swap out objects in a given moment.",
          "new_line_content": "    return vmSwapOneObject(1);",
          "content_same": false
        },
        {
          "line": 9165,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "    return 1;",
          "new_line_content": "    foundkey = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 9167,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(db,key)",
          "old_line_content": "",
          "new_line_content": "    deleteKey(db,key);",
          "content_same": false
        },
        {
          "line": 9177,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(j->val)",
          "old_line_content": "     * just used as an indentifier and if a key is removed the Job should",
          "new_line_content": "        decrRefCount(j->val);",
          "content_same": false
        },
        {
          "line": 9182,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(j)",
          "old_line_content": "/* Every time a thread finished a Job, it writes a byte into the write side",
          "new_line_content": "    zfree(j);",
          "content_same": false
        },
        {
          "line": 9193,
          "old_api": null,
          "new_api": "REDIS_NOTUSED",
          "old_text": null,
          "new_text": "REDIS_NOTUSED(el)",
          "old_line_content": "",
          "new_line_content": "    REDIS_NOTUSED(el);",
          "content_same": false
        },
        {
          "line": 9194,
          "old_api": null,
          "new_api": "REDIS_NOTUSED",
          "old_text": null,
          "new_text": "REDIS_NOTUSED(mask)",
          "old_line_content": "    /* For every byte we read in the read side of the pipe, there is one",
          "new_line_content": "    REDIS_NOTUSED(mask);",
          "content_same": false
        },
        {
          "line": 9195,
          "old_api": null,
          "new_api": "REDIS_NOTUSED",
          "old_text": null,
          "new_text": "REDIS_NOTUSED(privdata)",
          "old_line_content": "     * I/O job completed to process. */",
          "new_line_content": "    REDIS_NOTUSED(privdata);",
          "content_same": false
        },
        {
          "line": 9199,
          "old_api": null,
          "new_api": "read",
          "old_text": null,
          "new_text": "read(fd,buf,1)",
          "old_line_content": "        robj *key;",
          "new_line_content": "    while((retval = read(fd,buf,1)) == 1) {",
          "content_same": false
        },
        {
          "line": 9209,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.io_processed)",
          "old_line_content": "            if (toprocess <= 0) toprocess = 1;",
          "new_line_content": "        assert(listLength(server.io_processed) != 0);",
          "content_same": false
        },
        {
          "line": 9216,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(server.io_processed,ln)",
          "old_line_content": "        if (j->canceled) {",
          "new_line_content": "        listDelNode(server.io_processed,ln);",
          "content_same": false
        },
        {
          "line": 9220,
          "old_api": null,
          "new_api": "freeIOJob",
          "old_text": null,
          "new_text": "freeIOJob(j)",
          "old_line_content": "        /* Post process it in the main thread, as there are things we",
          "new_line_content": "            freeIOJob(j);",
          "content_same": false
        },
        {
          "line": 9226,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(j->db->dict,j->key)",
          "old_line_content": "        if (j->type == REDIS_IOJOB_LOAD) {",
          "new_line_content": "        de = dictFind(j->db->dict,j->key);",
          "content_same": false
        },
        {
          "line": 9227,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(de != NULL)",
          "old_line_content": "            redisDb *db;",
          "new_line_content": "        assert(de != NULL);",
          "content_same": false
        },
        {
          "line": 9228,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "",
          "new_line_content": "        key = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 9235,
          "old_api": null,
          "new_api": "vmMarkPagesFree",
          "old_text": null,
          "new_text": "vmMarkPagesFree(key->vm.page,key->vm.usedpages)",
          "old_line_content": "            server.vm_stats_swapped_objects--;",
          "new_line_content": "            vmMarkPagesFree(key->vm.page,key->vm.usedpages);",
          "content_same": false
        },
        {
          "line": 9236,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_DEBUG, \"VM: object %s loaded from disk (threaded)\",\n                (unsigned char*) key->ptr)",
          "old_line_content": "            server.vm_stats_swapins++;",
          "new_line_content": "            redisLog(REDIS_DEBUG, \"VM: object %s loaded from disk (threaded)\",",
          "content_same": false
        },
        {
          "line": 9241,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(j->val)",
          "old_line_content": "            /* Handle clients waiting for this key to be loaded. */",
          "new_line_content": "            incrRefCount(j->val);",
          "content_same": false
        },
        {
          "line": 9243,
          "old_api": null,
          "new_api": "freeIOJob",
          "old_text": null,
          "new_text": "freeIOJob(j)",
          "old_line_content": "        } else if (j->type == REDIS_IOJOB_PREPARE_SWAP) {",
          "new_line_content": "            freeIOJob(j);",
          "content_same": false
        },
        {
          "line": 9245,
          "old_api": null,
          "new_api": "handleClientsBlockedOnSwappedKey",
          "old_text": null,
          "new_text": "handleClientsBlockedOnSwappedKey(db,key)",
          "old_line_content": "             * Let's find some space for it, and queue this task again",
          "new_line_content": "            handleClientsBlockedOnSwappedKey(db,key);",
          "content_same": false
        },
        {
          "line": 9250,
          "old_api": null,
          "new_api": "vmCanSwapOut",
          "old_text": null,
          "new_text": "vmCanSwapOut()",
          "old_line_content": "                /* Ooops... no space or we can't swap as there is",
          "new_line_content": "            if (!vmCanSwapOut() ||",
          "content_same": false
        },
        {
          "line": 9251,
          "old_api": null,
          "new_api": "vmFindContiguousPages",
          "old_text": null,
          "new_text": "vmFindContiguousPages(&j->page,j->pages)",
          "old_line_content": "                 * a fork()ed Redis trying to save stuff on disk. */",
          "new_line_content": "                vmFindContiguousPages(&j->page,j->pages) == REDIS_ERR)",
          "content_same": false
        },
        {
          "line": 9255,
          "old_api": null,
          "new_api": "freeIOJob",
          "old_text": null,
          "new_text": "freeIOJob(j)",
          "old_line_content": "                /* Note that we need to mark this pages as used now,",
          "new_line_content": "                freeIOJob(j);",
          "content_same": false
        },
        {
          "line": 9263,
          "old_api": null,
          "new_api": "lockThreadedIO",
          "old_text": null,
          "new_text": "lockThreadedIO()",
          "old_line_content": "            }",
          "new_line_content": "                lockThreadedIO();",
          "content_same": false
        },
        {
          "line": 9264,
          "old_api": null,
          "new_api": "queueIOJob",
          "old_text": null,
          "new_text": "queueIOJob(j)",
          "old_line_content": "        } else if (j->type == REDIS_IOJOB_DO_SWAP) {",
          "new_line_content": "                queueIOJob(j);",
          "content_same": false
        },
        {
          "line": 9265,
          "old_api": null,
          "new_api": "unlockThreadedIO",
          "old_text": null,
          "new_text": "unlockThreadedIO()",
          "old_line_content": "            robj *val;",
          "new_line_content": "                unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 9275,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"val: %p\\n\",(void*)j->val)",
          "old_line_content": "            }",
          "new_line_content": "                printf(\"val: %p\\n\",(void*)j->val);",
          "content_same": false
        },
        {
          "line": 9279,
          "old_api": null,
          "new_api": "redisAssert",
          "old_text": null,
          "new_text": "redisAssert(key->storage == REDIS_VM_SWAPPING)",
          "old_line_content": "            key->vm.usedpages = j->pages;",
          "new_line_content": "            redisAssert(key->storage == REDIS_VM_SWAPPING);",
          "content_same": false
        },
        {
          "line": 9280,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "            key->storage = REDIS_VM_SWAPPED;",
          "new_line_content": "            val = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 9285,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(val)",
          "old_line_content": "                \"VM: object %s swapped out at %lld (%lld pages) (threaded)\",",
          "new_line_content": "            decrRefCount(val); /* Deallocate the object from memory. */",
          "content_same": false
        },
        {
          "line": 9286,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "                (unsigned char*) key->ptr,",
          "new_line_content": "            dictGetEntryVal(de) = NULL;",
          "content_same": false
        },
        {
          "line": 9287,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_DEBUG,\n                \"VM: object %s swapped out at %lld (%lld pages) (threaded)\",\n                (unsigned char*) key->ptr,\n                (unsigned long long) j->page, (unsigned long long) j->pages)",
          "old_line_content": "                (unsigned long long) j->page, (unsigned long long) j->pages);",
          "new_line_content": "            redisLog(REDIS_DEBUG,",
          "content_same": false
        },
        {
          "line": 9296,
          "old_api": null,
          "new_api": "vmCanSwapOut",
          "old_text": null,
          "new_text": "vmCanSwapOut()",
          "old_line_content": "                int more = 1;",
          "new_line_content": "            if (trytoswap && vmCanSwapOut() &&",
          "content_same": false
        },
        {
          "line": 9297,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "                while(more) {",
          "new_line_content": "                zmalloc_used_memory() > server.vm_max_memory)",
          "content_same": false
        },
        {
          "line": 9302,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.io_newjobs)",
          "old_line_content": "                    /* Don't waste CPU time if swappable objects are rare. */",
          "new_line_content": "                    more = listLength(server.io_newjobs) <",
          "content_same": false
        },
        {
          "line": 9304,
          "old_api": null,
          "new_api": "unlockThreadedIO",
          "old_text": null,
          "new_text": "unlockThreadedIO()",
          "old_line_content": "                        trytoswap = 0;",
          "new_line_content": "                    unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 9306,
          "old_api": null,
          "new_api": "vmSwapOneObjectThreaded",
          "old_text": null,
          "new_text": "vmSwapOneObjectThreaded()",
          "old_line_content": "                    }",
          "new_line_content": "                    if (vmSwapOneObjectThreaded() == REDIS_ERR) {",
          "content_same": false
        },
        {
          "line": 9317,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\n            \"WARNING: read(2) error in vmThreadedIOCompletedJob() %s\",\n            strerror(errno))",
          "old_line_content": "    }",
          "new_line_content": "        redisLog(REDIS_WARNING,",
          "content_same": false
        },
        {
          "line": 9319,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 9324,
          "old_api": null,
          "new_api": "pthread_mutex_lock",
          "old_text": null,
          "new_text": "pthread_mutex_lock(&server.io_mutex)",
          "old_line_content": "static void unlockThreadedIO(void) {",
          "new_line_content": "    pthread_mutex_lock(&server.io_mutex);",
          "content_same": false
        },
        {
          "line": 9328,
          "old_api": null,
          "new_api": "pthread_mutex_unlock",
          "old_text": null,
          "new_text": "pthread_mutex_unlock(&server.io_mutex)",
          "old_line_content": "/* Remove the specified object from the threaded I/O queue if still not",
          "new_line_content": "    pthread_mutex_unlock(&server.io_mutex);",
          "content_same": false
        },
        {
          "line": 9341,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(o->storage == REDIS_VM_LOADING || o->storage == REDIS_VM_SWAPPING)",
          "old_line_content": "    /* Search for a matching key in one of the queues */",
          "new_line_content": "    assert(o->storage == REDIS_VM_LOADING || o->storage == REDIS_VM_SWAPPING);",
          "content_same": false
        },
        {
          "line": 9343,
          "old_api": null,
          "new_api": "lockThreadedIO",
          "old_text": null,
          "new_text": "lockThreadedIO()",
          "old_line_content": "        listNode *ln;",
          "new_line_content": "    lockThreadedIO();",
          "content_same": false
        },
        {
          "line": 9349,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(lists[i],&li)",
          "old_line_content": "",
          "new_line_content": "        listRewind(lists[i],&li);",
          "content_same": false
        },
        {
          "line": 9350,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&li)",
          "old_line_content": "            if (job->canceled) continue; /* Skip this, already canceled. */",
          "new_line_content": "        while ((ln = listNext(&li)) != NULL) {",
          "content_same": false
        },
        {
          "line": 9355,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_DEBUG,\"*** CANCELED %p (%s) (type %d) (LIST ID %d)\\n\",\n                    (void*)job, (char*)o->ptr, job->type, i)",
          "old_line_content": "                 * or happened but is now discarded. */",
          "new_line_content": "                redisLog(REDIS_DEBUG,\"*** CANCELED %p (%s) (type %d) (LIST ID %d)\\n\",",
          "content_same": false
        },
        {
          "line": 9360,
          "old_api": null,
          "new_api": "vmMarkPagesFree",
          "old_text": null,
          "new_text": "vmMarkPagesFree(job->page,job->pages)",
          "old_line_content": "                switch(i) {",
          "new_line_content": "                    vmMarkPagesFree(job->page,job->pages);",
          "content_same": false
        },
        {
          "line": 9367,
          "old_api": null,
          "new_api": "freeIOJob",
          "old_text": null,
          "new_text": "freeIOJob(job)",
          "old_line_content": "                case 1: /* io_processing */",
          "new_line_content": "                    freeIOJob(job);",
          "content_same": false
        },
        {
          "line": 9368,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(lists[i],ln)",
          "old_line_content": "                    /* Oh Shi- the thread is messing with the Job:",
          "new_line_content": "                    listDelNode(lists[i],ln);",
          "content_same": false
        },
        {
          "line": 9384,
          "old_api": null,
          "new_api": "unlockThreadedIO",
          "old_text": null,
          "new_text": "unlockThreadedIO()",
          "old_line_content": "                     * should be very rare. */",
          "new_line_content": "                    unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 9388,
          "old_api": null,
          "new_api": "usleep",
          "old_text": null,
          "new_text": "usleep(1)",
          "old_line_content": "                    /* The job was already processed, that's easy...",
          "new_line_content": "                    usleep(1);",
          "content_same": false
        },
        {
          "line": 9403,
          "old_api": null,
          "new_api": "unlockThreadedIO",
          "old_text": null,
          "new_text": "unlockThreadedIO()",
          "old_line_content": "        }",
          "new_line_content": "                unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 9408,
          "old_api": null,
          "new_api": "unlockThreadedIO",
          "old_text": null,
          "new_text": "unlockThreadedIO()",
          "old_line_content": "",
          "new_line_content": "    unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 9409,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(1 != 1)",
          "old_line_content": "static void *IOThreadEntryPoint(void *arg) {",
          "new_line_content": "    assert(1 != 1); /* We should never reach this */",
          "content_same": false
        },
        {
          "line": 9415,
          "old_api": null,
          "new_api": "REDIS_NOTUSED",
          "old_text": null,
          "new_text": "REDIS_NOTUSED(arg)",
          "old_line_content": "    while(1) {",
          "new_line_content": "    REDIS_NOTUSED(arg);",
          "content_same": false
        },
        {
          "line": 9424,
          "old_api": null,
          "new_api": "pthread_self",
          "old_text": null,
          "new_text": "pthread_self()",
          "old_line_content": "            return NULL;",
          "new_line_content": "                (long) pthread_self());",
          "content_same": false
        },
        {
          "line": 9429,
          "old_api": null,
          "new_api": "listFirst",
          "old_text": null,
          "new_text": "listFirst(server.io_newjobs)",
          "old_line_content": "        /* Add the job in the processing queue */",
          "new_line_content": "        ln = listFirst(server.io_newjobs);",
          "content_same": false
        },
        {
          "line": 9436,
          "old_api": null,
          "new_api": "unlockThreadedIO",
          "old_text": null,
          "new_text": "unlockThreadedIO()",
          "old_line_content": "",
          "new_line_content": "        unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 9437,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_DEBUG,\"Thread %ld got a new job (type %d): %p about key '%s'\",\n            (long) pthread_self(), j->type, (void*)j, (char*)j->key->ptr)",
          "old_line_content": "        /* Process the Job */",
          "new_line_content": "        redisLog(REDIS_DEBUG,\"Thread %ld got a new job (type %d): %p about key '%s'\",",
          "content_same": false
        },
        {
          "line": 9438,
          "old_api": null,
          "new_api": "pthread_self",
          "old_text": null,
          "new_text": "pthread_self()",
          "old_line_content": "        if (j->type == REDIS_IOJOB_LOAD) {",
          "new_line_content": "            (long) pthread_self(), j->type, (void*)j, (char*)j->key->ptr);",
          "content_same": false
        },
        {
          "line": 9444,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(\"/dev/null\",\"w+\")",
          "old_line_content": "        } else if (j->type == REDIS_IOJOB_DO_SWAP) {",
          "new_line_content": "            FILE *fp = fopen(\"/dev/null\",\"w+\");",
          "content_same": false
        },
        {
          "line": 9446,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "                j->canceled = 1;",
          "new_line_content": "            fclose(fp);",
          "content_same": false
        },
        {
          "line": 9448,
          "old_api": null,
          "new_api": "vmWriteObjectOnSwap",
          "old_text": null,
          "new_text": "vmWriteObjectOnSwap(j->val,j->page)",
          "old_line_content": "",
          "new_line_content": "            if (vmWriteObjectOnSwap(j->val,j->page) == REDIS_ERR)",
          "content_same": false
        },
        {
          "line": 9456,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(server.io_processing,ln)",
          "old_line_content": "",
          "new_line_content": "        listDelNode(server.io_processing,ln);",
          "content_same": false
        },
        {
          "line": 9457,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(server.io_processed,j)",
          "old_line_content": "        /* Signal the main thread there is new stuff to process */",
          "new_line_content": "        listAddNodeTail(server.io_processed,j);",
          "content_same": false
        },
        {
          "line": 9461,
          "old_api": null,
          "new_api": "write",
          "old_text": null,
          "new_text": "write(server.io_ready_pipe_write,\"x\",1)",
          "old_line_content": "}",
          "new_line_content": "        assert(write(server.io_ready_pipe_write,\"x\",1) == 1);",
          "content_same": false
        },
        {
          "line": 9477,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Unable to spawn an I/O thread: %s\",\n            strerror(err))",
          "old_line_content": "    }",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Unable to spawn an I/O thread: %s\",",
          "content_same": false
        },
        {
          "line": 9479,
          "old_api": null,
          "new_api": "usleep",
          "old_text": null,
          "new_text": "usleep(1000000)",
          "old_line_content": "    server.io_active_threads++;",
          "new_line_content": "        usleep(1000000);",
          "content_same": false
        },
        {
          "line": 9481,
          "old_api": null,
          "new_api": "pthread_sigmask",
          "old_text": null,
          "new_text": "pthread_sigmask(SIG_SETMASK, &omask, NULL)",
          "old_line_content": "",
          "new_line_content": "    pthread_sigmask(SIG_SETMASK, &omask, NULL);",
          "content_same": false
        },
        {
          "line": 9491,
          "old_api": null,
          "new_api": "lockThreadedIO",
          "old_text": null,
          "new_text": "lockThreadedIO()",
          "old_line_content": "            server.io_active_threads == 0)",
          "new_line_content": "        lockThreadedIO();",
          "content_same": false
        },
        {
          "line": 9492,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.io_newjobs)",
          "old_line_content": "        {",
          "new_line_content": "        if (listLength(server.io_newjobs) == 0 &&",
          "content_same": false
        },
        {
          "line": 9496,
          "old_api": null,
          "new_api": "unlockThreadedIO",
          "old_text": null,
          "new_text": "unlockThreadedIO()",
          "old_line_content": "        /* While waiting for empty jobs queue condition we post-process some",
          "new_line_content": "            unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 9507,
          "old_api": null,
          "new_api": "usleep",
          "old_text": null,
          "new_text": "usleep(1000)",
          "old_line_content": "        }",
          "new_line_content": "            usleep(1000); /* 1 millisecond */",
          "content_same": false
        },
        {
          "line": 9509,
          "old_api": null,
          "new_api": "usleep",
          "old_text": null,
          "new_text": "usleep(10000)",
          "old_line_content": "}",
          "new_line_content": "            usleep(10000); /* 10 milliseconds */",
          "content_same": false
        },
        {
          "line": 9517,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(server.vm_swap_file,\"r+b\")",
          "old_line_content": "            server.vm_swap_file);",
          "new_line_content": "    server.vm_fp = fopen(server.vm_swap_file,\"r+b\");",
          "content_same": false
        },
        {
          "line": 9519,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Can't re-open the VM swap file: %s. Exiting.\",\n            server.vm_swap_file)",
          "old_line_content": "    }",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Can't re-open the VM swap file: %s. Exiting.\",",
          "content_same": false
        },
        {
          "line": 9521,
          "old_api": null,
          "new_api": "_exit",
          "old_text": null,
          "new_text": "_exit(1)",
          "old_line_content": "}",
          "new_line_content": "        _exit(1);",
          "content_same": false
        },
        {
          "line": 9523,
          "old_api": null,
          "new_api": "fileno",
          "old_text": null,
          "new_text": "fileno(server.vm_fp)",
          "old_line_content": "/* This function must be called while with threaded IO locked */",
          "new_line_content": "    server.vm_fd = fileno(server.vm_fp);",
          "content_same": false
        },
        {
          "line": 9528,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_DEBUG,\"Queued IO Job %p type %d about key '%s'\\n\",\n        (void*)j, j->type, (char*)j->key->ptr)",
          "old_line_content": "    if (server.io_active_threads < server.vm_max_threads)",
          "new_line_content": "    redisLog(REDIS_DEBUG,\"Queued IO Job %p type %d about key '%s'\\n\",",
          "content_same": false
        },
        {
          "line": 9530,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(server.io_newjobs,j)",
          "old_line_content": "}",
          "new_line_content": "    listAddNodeTail(server.io_newjobs,j);",
          "content_same": false
        },
        {
          "line": 9532,
          "old_api": null,
          "new_api": "spawnIOThread",
          "old_text": null,
          "new_text": "spawnIOThread()",
          "old_line_content": "static int vmSwapObjectThreaded(robj *key, robj *val, redisDb *db) {",
          "new_line_content": "        spawnIOThread();",
          "content_same": false
        },
        {
          "line": 9539,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(key->refcount == 1)",
          "old_line_content": "    j->type = REDIS_IOJOB_PREPARE_SWAP;",
          "new_line_content": "    assert(key->refcount == 1);",
          "content_same": false
        },
        {
          "line": 9541,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*j))",
          "old_line_content": "    j->key = key;",
          "new_line_content": "    j = zmalloc(sizeof(*j));",
          "content_same": false
        },
        {
          "line": 9546,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(val)",
          "old_line_content": "    key->storage = REDIS_VM_SWAPPING;",
          "new_line_content": "    incrRefCount(val);",
          "content_same": false
        },
        {
          "line": 9551,
          "old_api": null,
          "new_api": "lockThreadedIO",
          "old_text": null,
          "new_text": "lockThreadedIO()",
          "old_line_content": "    return REDIS_OK;",
          "new_line_content": "    lockThreadedIO();",
          "content_same": false
        },
        {
          "line": 9552,
          "old_api": null,
          "new_api": "queueIOJob",
          "old_text": null,
          "new_text": "queueIOJob(j)",
          "old_line_content": "}",
          "new_line_content": "    queueIOJob(j);",
          "content_same": false
        },
        {
          "line": 9553,
          "old_api": null,
          "new_api": "unlockThreadedIO",
          "old_text": null,
          "new_text": "unlockThreadedIO()",
          "old_line_content": "",
          "new_line_content": "    unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 9571,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(c->db->dict,key)",
          "old_line_content": "    if (o->storage == REDIS_VM_MEMORY) {",
          "new_line_content": "    de = dictFind(c->db->dict,key);",
          "content_same": false
        },
        {
          "line": 9573,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "    } else if (o->storage == REDIS_VM_SWAPPING) {",
          "new_line_content": "    o = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 9578,
          "old_api": null,
          "new_api": "vmCancelThreadedIOJob",
          "old_text": null,
          "new_text": "vmCancelThreadedIOJob(o)",
          "old_line_content": "",
          "new_line_content": "        vmCancelThreadedIOJob(o);",
          "content_same": false
        },
        {
          "line": 9586,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(c->io_keys,key)",
          "old_line_content": "    /* Add the client to the swapped keys => clients waiting map. */",
          "new_line_content": "    listAddNodeTail(c->io_keys,key);",
          "content_same": false
        },
        {
          "line": 9590,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(c->db->io_keys,key)",
          "old_line_content": "",
          "new_line_content": "    de = dictFind(c->db->io_keys,key);",
          "content_same": false
        },
        {
          "line": 9596,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(c->db->io_keys,key,l)",
          "old_line_content": "    } else {",
          "new_line_content": "        retval = dictAdd(c->db->io_keys,key,l);",
          "content_same": false
        },
        {
          "line": 9598,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(retval == DICT_OK)",
          "old_line_content": "    }",
          "new_line_content": "        assert(retval == DICT_OK);",
          "content_same": false
        },
        {
          "line": 9600,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "",
          "new_line_content": "        l = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 9602,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(l,c)",
          "old_line_content": "    if (o->storage == REDIS_VM_SWAPPED) {",
          "new_line_content": "    listAddNodeTail(l,c);",
          "content_same": false
        },
        {
          "line": 9609,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*j))",
          "old_line_content": "        j->key = o;",
          "new_line_content": "        j = zmalloc(sizeof(*j));",
          "content_same": false
        },
        {
          "line": 9618,
          "old_api": null,
          "new_api": "lockThreadedIO",
          "old_text": null,
          "new_text": "lockThreadedIO()",
          "old_line_content": "    }",
          "new_line_content": "        lockThreadedIO();",
          "content_same": false
        },
        {
          "line": 9619,
          "old_api": null,
          "new_api": "queueIOJob",
          "old_text": null,
          "new_text": "queueIOJob(j)",
          "old_line_content": "    return 1;",
          "new_line_content": "        queueIOJob(j);",
          "content_same": false
        },
        {
          "line": 9620,
          "old_api": null,
          "new_api": "unlockThreadedIO",
          "old_text": null,
          "new_text": "unlockThreadedIO()",
          "old_line_content": "}",
          "new_line_content": "        unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 9628,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[2]->ptr)",
          "old_line_content": "    }",
          "new_line_content": "    num = atoi(c->argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 9630,
          "old_api": null,
          "new_api": "waitForSwappedKey",
          "old_text": null,
          "new_text": "waitForSwappedKey(c,c->argv[3+i])",
          "old_line_content": "",
          "new_line_content": "        waitForSwappedKey(c,c->argv[3+i]);",
          "content_same": false
        },
        {
          "line": 9648,
          "old_api": null,
          "new_api": "vm_preload_proc",
          "old_text": null,
          "new_text": "cmd->vm_preload_proc(c)",
          "old_line_content": "        last = cmd->vm_lastkey;",
          "new_line_content": "        cmd->vm_preload_proc(c);",
          "content_same": false
        },
        {
          "line": 9654,
          "old_api": null,
          "new_api": "waitForSwappedKey",
          "old_text": null,
          "new_text": "waitForSwappedKey(c,c->argv[j])",
          "old_line_content": "    /* If the client was blocked for at least one key, mark it as blocked. */",
          "new_line_content": "            waitForSwappedKey(c,c->argv[j]);",
          "content_same": false
        },
        {
          "line": 9658,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(c->io_keys)",
          "old_line_content": "        server.vm_blocked_clients++;",
          "new_line_content": "    if (listLength(c->io_keys)) {",
          "content_same": false
        },
        {
          "line": 9660,
          "old_api": null,
          "new_api": "aeDeleteFileEvent",
          "old_text": null,
          "new_text": "aeDeleteFileEvent(server.el,c->fd,AE_READABLE)",
          "old_line_content": "    } else {",
          "new_line_content": "        aeDeleteFileEvent(server.el,c->fd,AE_READABLE);",
          "content_same": false
        },
        {
          "line": 9680,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&li)",
          "old_line_content": "            break;",
          "new_line_content": "    while ((ln = listNext(&li)) != NULL) {",
          "content_same": false
        },
        {
          "line": 9681,
          "old_api": null,
          "new_api": "equalStringObjects",
          "old_text": null,
          "new_text": "equalStringObjects(ln->value,key)",
          "old_line_content": "        }",
          "new_line_content": "        if (equalStringObjects(ln->value,key)) {",
          "content_same": false
        },
        {
          "line": 9682,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(c->io_keys,ln)",
          "old_line_content": "    }",
          "new_line_content": "            listDelNode(c->io_keys,ln);",
          "content_same": false
        },
        {
          "line": 9694,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(l,ln)",
          "old_line_content": "",
          "new_line_content": "    listDelNode(l,ln);",
          "content_same": false
        },
        {
          "line": 9696,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(c->db->io_keys,key)",
          "old_line_content": "}",
          "new_line_content": "        dictDelete(c->db->io_keys,key);",
          "content_same": false
        },
        {
          "line": 9698,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(c->io_keys)",
          "old_line_content": "static void handleClientsBlockedOnSwappedKey(redisDb *db, robj *key) {",
          "new_line_content": "    return listLength(c->io_keys) == 0;",
          "content_same": false
        },
        {
          "line": 9710,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "     * can be freed by the calling function when we remove the last element. */",
          "new_line_content": "    l = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 9711,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(l)",
          "old_line_content": "    while (len--) {",
          "new_line_content": "    len = listLength(l);",
          "content_same": false
        },
        {
          "line": 9721,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(server.io_ready_clients,c)",
          "old_line_content": "}",
          "new_line_content": "            listAddNodeTail(server.io_ready_clients,c);",
          "content_same": false
        },
        {
          "line": 9740,
          "old_api": null,
          "new_api": "strtoll",
          "old_text": null,
          "new_text": "strtoll(o->ptr, NULL, 10)",
          "old_line_content": "            server.appendfsync = APPENDFSYNC_NO;",
          "new_line_content": "        server.maxmemory = strtoll(o->ptr, NULL, 10);",
          "content_same": false
        },
        {
          "line": 9742,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(o->ptr,\"no\")",
          "old_line_content": "            server.appendfsync = APPENDFSYNC_EVERYSEC;",
          "new_line_content": "        if (!strcasecmp(o->ptr,\"no\")) {",
          "content_same": false
        },
        {
          "line": 9744,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(o->ptr,\"everysec\")",
          "old_line_content": "            server.appendfsync = APPENDFSYNC_ALWAYS;",
          "new_line_content": "        } else if (!strcasecmp(o->ptr,\"everysec\")) {",
          "content_same": false
        },
        {
          "line": 9746,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(o->ptr,\"always\")",
          "old_line_content": "            goto badfmt;",
          "new_line_content": "        } else if (!strcasecmp(o->ptr,\"always\")) {",
          "content_same": false
        },
        {
          "line": 9751,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[2]->ptr,\"save\")",
          "old_line_content": "",
          "new_line_content": "    } else if (!strcasecmp(c->argv[2]->ptr,\"save\")) {",
          "content_same": false
        },
        {
          "line": 9753,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(o->ptr)",
          "old_line_content": "         * - Even number of args",
          "new_line_content": "        sds *v = sdssplitlen(o->ptr,sdslen(o->ptr),\" \",1,&vlen);",
          "content_same": false
        },
        {
          "line": 9759,
          "old_api": null,
          "new_api": "sdsfreesplitres",
          "old_text": null,
          "new_text": "sdsfreesplitres(v,vlen)",
          "old_line_content": "        for (j = 0; j < vlen; j++) {",
          "new_line_content": "            sdsfreesplitres(v,vlen);",
          "content_same": false
        },
        {
          "line": 9766,
          "old_api": null,
          "new_api": "strtoll",
          "old_text": null,
          "new_text": "strtoll(v[j], &eptr, 10)",
          "old_line_content": "                ((j & 1) == 1 && val < 0)) {",
          "new_line_content": "            val = strtoll(v[j], &eptr, 10);",
          "content_same": false
        },
        {
          "line": 9770,
          "old_api": null,
          "new_api": "sdsfreesplitres",
          "old_text": null,
          "new_text": "sdsfreesplitres(v,vlen)",
          "old_line_content": "        }",
          "new_line_content": "                sdsfreesplitres(v,vlen);",
          "content_same": false
        },
        {
          "line": 9775,
          "old_api": null,
          "new_api": "resetServerSaveParams",
          "old_text": null,
          "new_text": "resetServerSaveParams()",
          "old_line_content": "            int changes;",
          "new_line_content": "        resetServerSaveParams();",
          "content_same": false
        },
        {
          "line": 9780,
          "old_api": null,
          "new_api": "strtoll",
          "old_text": null,
          "new_text": "strtoll(v[j],NULL,10)",
          "old_line_content": "        }",
          "new_line_content": "            seconds = strtoll(v[j],NULL,10);",
          "content_same": false
        },
        {
          "line": 9782,
          "old_api": null,
          "new_api": "appendServerSaveParams",
          "old_text": null,
          "new_text": "appendServerSaveParams(seconds, changes)",
          "old_line_content": "    } else {",
          "new_line_content": "            appendServerSaveParams(seconds, changes);",
          "content_same": false
        },
        {
          "line": 9784,
          "old_api": null,
          "new_api": "sdsfreesplitres",
          "old_text": null,
          "new_text": "sdsfreesplitres(v,vlen)",
          "old_line_content": "            \"-ERR not supported CONFIG parameter %s\\r\\n\",",
          "new_line_content": "        sdsfreesplitres(v,vlen);",
          "content_same": false
        },
        {
          "line": 9792,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(o)",
          "old_line_content": "",
          "new_line_content": "    decrRefCount(o);",
          "content_same": false
        },
        {
          "line": 9793,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "badfmt: /* Bad format errors */",
          "new_line_content": "    addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 9797,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "            (char*)c->argv[2]->ptr));",
          "new_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),",
          "content_same": false
        },
        {
          "line": 9801,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(o)",
          "old_line_content": "static void configGetCommand(redisClient *c) {",
          "new_line_content": "    decrRefCount(o);",
          "content_same": false
        },
        {
          "line": 9805,
          "old_api": null,
          "new_api": "getDecodedObject",
          "old_text": null,
          "new_text": "getDecodedObject(c->argv[2])",
          "old_line_content": "    int matches = 0;",
          "new_line_content": "    robj *o = getDecodedObject(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 9806,
          "old_api": null,
          "new_api": "createObject",
          "old_text": null,
          "new_text": "createObject(REDIS_STRING,NULL)",
          "old_line_content": "",
          "new_line_content": "    robj *lenobj = createObject(REDIS_STRING,NULL);",
          "content_same": false
        },
        {
          "line": 9813,
          "old_api": null,
          "new_api": "stringmatch",
          "old_text": null,
          "new_text": "stringmatch(pattern,\"dbfilename\",0)",
          "old_line_content": "        matches++;",
          "new_line_content": "    if (stringmatch(pattern,\"dbfilename\",0)) {",
          "content_same": false
        },
        {
          "line": 9814,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c,\"dbfilename\")",
          "old_line_content": "    }",
          "new_line_content": "        addReplyBulkCString(c,\"dbfilename\");",
          "content_same": false
        },
        {
          "line": 9818,
          "old_api": null,
          "new_api": "stringmatch",
          "old_text": null,
          "new_text": "stringmatch(pattern,\"requirepass\",0)",
          "old_line_content": "        matches++;",
          "new_line_content": "    if (stringmatch(pattern,\"requirepass\",0)) {",
          "content_same": false
        },
        {
          "line": 9819,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c,\"requirepass\")",
          "old_line_content": "    }",
          "new_line_content": "        addReplyBulkCString(c,\"requirepass\");",
          "content_same": false
        },
        {
          "line": 9823,
          "old_api": null,
          "new_api": "stringmatch",
          "old_text": null,
          "new_text": "stringmatch(pattern,\"masterauth\",0)",
          "old_line_content": "        matches++;",
          "new_line_content": "    if (stringmatch(pattern,\"masterauth\",0)) {",
          "content_same": false
        },
        {
          "line": 9824,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c,\"masterauth\")",
          "old_line_content": "    }",
          "new_line_content": "        addReplyBulkCString(c,\"masterauth\");",
          "content_same": false
        },
        {
          "line": 9831,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(buf,128,\"%llu\\n\",server.maxmemory)",
          "old_line_content": "        matches++;",
          "new_line_content": "        snprintf(buf,128,\"%llu\\n\",server.maxmemory);",
          "content_same": false
        },
        {
          "line": 9832,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c,\"maxmemory\")",
          "old_line_content": "    }",
          "new_line_content": "        addReplyBulkCString(c,\"maxmemory\");",
          "content_same": false
        },
        {
          "line": 9836,
          "old_api": null,
          "new_api": "stringmatch",
          "old_text": null,
          "new_text": "stringmatch(pattern,\"appendfsync\",0)",
          "old_line_content": "        switch(server.appendfsync) {",
          "new_line_content": "    if (stringmatch(pattern,\"appendfsync\",0)) {",
          "content_same": false
        },
        {
          "line": 9845,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c,\"appendfsync\")",
          "old_line_content": "    }",
          "new_line_content": "        addReplyBulkCString(c,\"appendfsync\");",
          "content_same": false
        },
        {
          "line": 9849,
          "old_api": null,
          "new_api": "stringmatch",
          "old_text": null,
          "new_text": "stringmatch(pattern,\"save\",0)",
          "old_line_content": "",
          "new_line_content": "    if (stringmatch(pattern,\"save\",0)) {",
          "content_same": false
        },
        {
          "line": 9850,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "        for (j = 0; j < server.saveparamslen; j++) {",
          "new_line_content": "        sds buf = sdsempty();",
          "content_same": false
        },
        {
          "line": 9854,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(buf,\"%ld %d\",\n                    server.saveparams[j].seconds,\n                    server.saveparams[j].changes)",
          "old_line_content": "            if (j != server.saveparamslen-1)",
          "new_line_content": "            buf = sdscatprintf(buf,\"%ld %d\",",
          "content_same": false
        },
        {
          "line": 9860,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c,\"save\")",
          "old_line_content": "        matches++;",
          "new_line_content": "        addReplyBulkCString(c,\"save\");",
          "content_same": false
        },
        {
          "line": 9861,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c,buf)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyBulkCString(c,buf);",
          "content_same": false
        },
        {
          "line": 9865,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(o)",
          "old_line_content": "",
          "new_line_content": "    decrRefCount(o);",
          "content_same": false
        },
        {
          "line": 9866,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "static void configCommand(redisClient *c) {",
          "new_line_content": "    lenobj->ptr = sdscatprintf(sdsempty(),\"*%d\\r\\n\",matches*2);",
          "content_same": false
        },
        {
          "line": 9875,
          "old_api": null,
          "new_api": "configGetCommand",
          "old_text": null,
          "new_text": "configGetCommand(c)",
          "old_line_content": "        server.stat_numcommands = 0;",
          "new_line_content": "        configGetCommand(c);",
          "content_same": false
        },
        {
          "line": 9876,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr,\"resetstat\")",
          "old_line_content": "        server.stat_numconnections = 0;",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"resetstat\")) {",
          "content_same": false
        },
        {
          "line": 9882,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "            \"-ERR CONFIG subcommand must be one of GET, SET, RESETSTAT\\r\\n\"));",
          "new_line_content": "        addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 9884,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "    return;",
          "new_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),",
          "content_same": false
        },
        {
          "line": 9890,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "}",
          "new_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),",
          "content_same": false
        },
        {
          "line": 9900,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(pat->pattern)",
          "old_line_content": "",
          "new_line_content": "    decrRefCount(pat->pattern);",
          "content_same": false
        },
        {
          "line": 9901,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(pat)",
          "old_line_content": "static int listMatchPubsubPattern(void *a, void *b) {",
          "new_line_content": "    zfree(pat);",
          "content_same": false
        },
        {
          "line": 9908,
          "old_api": null,
          "new_api": "equalStringObjects",
          "old_text": null,
          "new_text": "equalStringObjects(pa->pattern,pb->pattern)",
          "old_line_content": "/* Subscribe a client to a channel. Returns 1 if the operation succeeded, or",
          "new_line_content": "           (equalStringObjects(pa->pattern,pb->pattern));",
          "content_same": false
        },
        {
          "line": 9919,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(c->pubsub_channels,channel,NULL)",
          "old_line_content": "        /* Add the client to the channel -> list of clients hash table */",
          "new_line_content": "    if (dictAdd(c->pubsub_channels,channel,NULL) == DICT_OK) {",
          "content_same": false
        },
        {
          "line": 9921,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(channel)",
          "old_line_content": "        if (de == NULL) {",
          "new_line_content": "        incrRefCount(channel);",
          "content_same": false
        },
        {
          "line": 9925,
          "old_api": null,
          "new_api": "listCreate",
          "old_text": null,
          "new_text": "listCreate()",
          "old_line_content": "        } else {",
          "new_line_content": "            clients = listCreate();",
          "content_same": false
        },
        {
          "line": 9927,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(channel)",
          "old_line_content": "        }",
          "new_line_content": "            incrRefCount(channel);",
          "content_same": false
        },
        {
          "line": 9929,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "    }",
          "new_line_content": "            clients = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 9935,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.subscribebulk)",
          "old_line_content": "    return retval;",
          "new_line_content": "    addReply(c,shared.subscribebulk);",
          "content_same": false
        },
        {
          "line": 9936,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,channel)",
          "old_line_content": "}",
          "new_line_content": "    addReplyBulk(c,channel);",
          "content_same": false
        },
        {
          "line": 9937,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(c->pubsub_patterns)",
          "old_line_content": "",
          "new_line_content": "    addReplyLong(c,dictSize(c->pubsub_channels)+listLength(c->pubsub_patterns));",
          "content_same": false
        },
        {
          "line": 9950,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(channel)",
          "old_line_content": "        retval = 1;",
          "new_line_content": "    incrRefCount(channel); /* channel may be just a pointer to the same object",
          "content_same": false
        },
        {
          "line": 9959,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(ln != NULL)",
          "old_line_content": "            /* Free the list and associated hash entry at all if this was",
          "new_line_content": "        assert(ln != NULL);",
          "content_same": false
        },
        {
          "line": 9960,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(clients,ln)",
          "old_line_content": "             * the latest client, so that it will be possible to abuse",
          "new_line_content": "        listDelNode(clients,ln);",
          "content_same": false
        },
        {
          "line": 9961,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(clients)",
          "old_line_content": "             * Redis PUBSUB creating millions of channels. */",
          "new_line_content": "        if (listLength(clients) == 0) {",
          "content_same": false
        },
        {
          "line": 9965,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(server.pubsub_channels,channel)",
          "old_line_content": "    /* Notify the client */",
          "new_line_content": "            dictDelete(server.pubsub_channels,channel);",
          "content_same": false
        },
        {
          "line": 9972,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,channel)",
          "old_line_content": "",
          "new_line_content": "        addReplyBulk(c,channel);",
          "content_same": false
        },
        {
          "line": 9973,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(c->pubsub_channels)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyLong(c,dictSize(c->pubsub_channels)+",
          "content_same": false
        },
        {
          "line": 9977,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(channel)",
          "old_line_content": "",
          "new_line_content": "    decrRefCount(channel); /* it is finally safe to release it */",
          "content_same": false
        },
        {
          "line": 9989,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(pattern)",
          "old_line_content": "        pat->client = c;",
          "new_line_content": "        incrRefCount(pattern);",
          "content_same": false
        },
        {
          "line": 9991,
          "old_api": null,
          "new_api": "getDecodedObject",
          "old_text": null,
          "new_text": "getDecodedObject(pattern)",
          "old_line_content": "    }",
          "new_line_content": "        pat->pattern = getDecodedObject(pattern);",
          "content_same": false
        },
        {
          "line": 9997,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.psubscribebulk)",
          "old_line_content": "    return retval;",
          "new_line_content": "    addReply(c,shared.psubscribebulk);",
          "content_same": false
        },
        {
          "line": 9998,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,pattern)",
          "old_line_content": "}",
          "new_line_content": "    addReplyBulk(c,pattern);",
          "content_same": false
        },
        {
          "line": 9999,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(c->pubsub_patterns)",
          "old_line_content": "",
          "new_line_content": "    addReplyLong(c,dictSize(c->pubsub_channels)+listLength(c->pubsub_patterns));",
          "content_same": false
        },
        {
          "line": 10011,
          "old_api": null,
          "new_api": "listSearchKey",
          "old_text": null,
          "new_text": "listSearchKey(c->pubsub_patterns,pattern)",
          "old_line_content": "        pat.client = c;",
          "new_line_content": "    if ((ln = listSearchKey(c->pubsub_patterns,pattern)) != NULL) {",
          "content_same": false
        },
        {
          "line": 10016,
          "old_api": null,
          "new_api": "listSearchKey",
          "old_text": null,
          "new_text": "listSearchKey(server.pubsub_patterns,&pat)",
          "old_line_content": "    /* Notify the client */",
          "new_line_content": "        ln = listSearchKey(server.pubsub_patterns,&pat);",
          "content_same": false
        },
        {
          "line": 10017,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(server.pubsub_patterns,ln)",
          "old_line_content": "    if (notify) {",
          "new_line_content": "        listDelNode(server.pubsub_patterns,ln);",
          "content_same": false
        },
        {
          "line": 10023,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,pattern)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyBulk(c,pattern);",
          "content_same": false
        },
        {
          "line": 10025,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(c->pubsub_patterns)",
          "old_line_content": "    return retval;",
          "new_line_content": "                       listLength(c->pubsub_patterns));",
          "content_same": false
        },
        {
          "line": 10027,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(pattern)",
          "old_line_content": "",
          "new_line_content": "    decrRefCount(pattern);",
          "content_same": false
        },
        {
          "line": 10034,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(c->pubsub_channels)",
          "old_line_content": "",
          "new_line_content": "    dictIterator *di = dictGetIterator(c->pubsub_channels);",
          "content_same": false
        },
        {
          "line": 10039,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "    }",
          "new_line_content": "        robj *channel = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 10041,
          "old_api": null,
          "new_api": "pubsubUnsubscribeChannel",
          "old_text": null,
          "new_text": "pubsubUnsubscribeChannel(c,channel,notify)",
          "old_line_content": "    return count;",
          "new_line_content": "        count += pubsubUnsubscribeChannel(c,channel,notify);",
          "content_same": false
        },
        {
          "line": 10043,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 10054,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(c->pubsub_patterns,&li)",
          "old_line_content": "",
          "new_line_content": "    listRewind(c->pubsub_patterns,&li);",
          "content_same": false
        },
        {
          "line": 10058,
          "old_api": null,
          "new_api": "pubsubUnsubscribePattern",
          "old_text": null,
          "new_text": "pubsubUnsubscribePattern(c,pattern,notify)",
          "old_line_content": "}",
          "new_line_content": "        count += pubsubUnsubscribePattern(c,pattern,notify);",
          "content_same": false
        },
        {
          "line": 10071,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(server.pubsub_channels,channel)",
          "old_line_content": "        listNode *ln;",
          "new_line_content": "    de = dictFind(server.pubsub_channels,channel);",
          "content_same": false
        },
        {
          "line": 10073,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "",
          "new_line_content": "        list *list = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 10077,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(list,&li)",
          "old_line_content": "",
          "new_line_content": "        listRewind(list,&li);",
          "content_same": false
        },
        {
          "line": 10082,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.messagebulk)",
          "old_line_content": "            receivers++;",
          "new_line_content": "            addReply(c,shared.messagebulk);",
          "content_same": false
        },
        {
          "line": 10083,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,channel)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyBulk(c,channel);",
          "content_same": false
        },
        {
          "line": 10084,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,message)",
          "old_line_content": "    }",
          "new_line_content": "            addReplyBulk(c,message);",
          "content_same": false
        },
        {
          "line": 10090,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(server.pubsub_patterns,&li)",
          "old_line_content": "            pubsubPattern *pat = ln->value;",
          "new_line_content": "        listRewind(server.pubsub_patterns,&li);",
          "content_same": false
        },
        {
          "line": 10091,
          "old_api": null,
          "new_api": "getDecodedObject",
          "old_text": null,
          "new_text": "getDecodedObject(channel)",
          "old_line_content": "",
          "new_line_content": "        channel = getDecodedObject(channel);",
          "content_same": false
        },
        {
          "line": 10101,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(pat->client,pat->pattern)",
          "old_line_content": "                receivers++;",
          "new_line_content": "                addReplyBulk(pat->client,pat->pattern);",
          "content_same": false
        },
        {
          "line": 10102,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(pat->client,channel)",
          "old_line_content": "            }",
          "new_line_content": "                addReplyBulk(pat->client,channel);",
          "content_same": false
        },
        {
          "line": 10103,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(pat->client,message)",
          "old_line_content": "        }",
          "new_line_content": "                addReplyBulk(pat->client,message);",
          "content_same": false
        },
        {
          "line": 10107,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(channel)",
          "old_line_content": "}",
          "new_line_content": "        decrRefCount(channel);",
          "content_same": false
        },
        {
          "line": 10116,
          "old_api": null,
          "new_api": "pubsubSubscribeChannel",
          "old_text": null,
          "new_text": "pubsubSubscribeChannel(c,c->argv[j])",
          "old_line_content": "static void unsubscribeCommand(redisClient *c) {",
          "new_line_content": "        pubsubSubscribeChannel(c,c->argv[j]);",
          "content_same": false
        },
        {
          "line": 10121,
          "old_api": null,
          "new_api": "pubsubUnsubscribeAllChannels",
          "old_text": null,
          "new_text": "pubsubUnsubscribeAllChannels(c,1)",
          "old_line_content": "        int j;",
          "new_line_content": "        pubsubUnsubscribeAllChannels(c,1);",
          "content_same": false
        },
        {
          "line": 10127,
          "old_api": null,
          "new_api": "pubsubUnsubscribeChannel",
          "old_text": null,
          "new_text": "pubsubUnsubscribeChannel(c,c->argv[j],1)",
          "old_line_content": "",
          "new_line_content": "            pubsubUnsubscribeChannel(c,c->argv[j],1);",
          "content_same": false
        },
        {
          "line": 10135,
          "old_api": null,
          "new_api": "pubsubSubscribePattern",
          "old_text": null,
          "new_text": "pubsubSubscribePattern(c,c->argv[j])",
          "old_line_content": "static void punsubscribeCommand(redisClient *c) {",
          "new_line_content": "        pubsubSubscribePattern(c,c->argv[j]);",
          "content_same": false
        },
        {
          "line": 10140,
          "old_api": null,
          "new_api": "pubsubUnsubscribeAllPatterns",
          "old_text": null,
          "new_text": "pubsubUnsubscribeAllPatterns(c,1)",
          "old_line_content": "        int j;",
          "new_line_content": "        pubsubUnsubscribeAllPatterns(c,1);",
          "content_same": false
        },
        {
          "line": 10146,
          "old_api": null,
          "new_api": "pubsubUnsubscribePattern",
          "old_text": null,
          "new_text": "pubsubUnsubscribePattern(c,c->argv[j],1)",
          "old_line_content": "",
          "new_line_content": "            pubsubUnsubscribePattern(c,c->argv[j],1);",
          "content_same": false
        },
        {
          "line": 10151,
          "old_api": null,
          "new_api": "pubsubPublishMessage",
          "old_text": null,
          "new_text": "pubsubPublishMessage(c->argv[1],c->argv[2])",
          "old_line_content": "",
          "new_line_content": "    int receivers = pubsubPublishMessage(c->argv[1],c->argv[2]);",
          "content_same": false
        },
        {
          "line": 10152,
          "old_api": null,
          "new_api": "addReplyLong",
          "old_text": null,
          "new_text": "addReplyLong(c,receivers)",
          "old_line_content": "/* ================================= Debugging ============================== */",
          "new_line_content": "    addReplyLong(c,receivers);",
          "content_same": false
        },
        {
          "line": 10160,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr,\"reload\")",
          "old_line_content": "            return;",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"reload\")) {",
          "content_same": false
        },
        {
          "line": 10161,
          "old_api": null,
          "new_api": "rdbSave",
          "old_text": null,
          "new_text": "rdbSave(server.dbfilename)",
          "old_line_content": "        }",
          "new_line_content": "        if (rdbSave(server.dbfilename) != REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 10165,
          "old_api": null,
          "new_api": "emptyDb",
          "old_text": null,
          "new_text": "emptyDb()",
          "old_line_content": "            return;",
          "new_line_content": "        emptyDb();",
          "content_same": false
        },
        {
          "line": 10166,
          "old_api": null,
          "new_api": "rdbLoad",
          "old_text": null,
          "new_text": "rdbLoad(server.dbfilename)",
          "old_line_content": "        }",
          "new_line_content": "        if (rdbLoad(server.dbfilename) != REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 10173,
          "old_api": null,
          "new_api": "emptyDb",
          "old_text": null,
          "new_text": "emptyDb()",
          "old_line_content": "            return;",
          "new_line_content": "        emptyDb();",
          "content_same": false
        },
        {
          "line": 10174,
          "old_api": null,
          "new_api": "loadAppendOnlyFile",
          "old_text": null,
          "new_text": "loadAppendOnlyFile(server.appendfilename)",
          "old_line_content": "        }",
          "new_line_content": "        if (loadAppendOnlyFile(server.appendfilename) != REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 10179,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "        robj *key, *val;",
          "new_line_content": "        addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 10180,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr,\"object\")",
          "old_line_content": "",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"object\") && c->argc == 3) {",
          "content_same": false
        },
        {
          "line": 10181,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(c->db->dict,c->argv[2])",
          "old_line_content": "        if (!de) {",
          "new_line_content": "        dictEntry *de = dictFind(c->db->dict,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 10188,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "                                   key->storage == REDIS_VM_SWAPPING)) {",
          "new_line_content": "        key = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 10189,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "            char *strenc;",
          "new_line_content": "        val = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 10201,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "                (void*)key, key->refcount, (void*)val, val->refcount,",
          "new_line_content": "            addReplySds(c,sdscatprintf(sdsempty(),",
          "content_same": false
        },
        {
          "line": 10205,
          "old_api": null,
          "new_api": "rdbSavedObjectLen",
          "old_text": null,
          "new_text": "rdbSavedObjectLen(val,NULL)",
          "old_line_content": "                \"+Key at:%p refcount:%d, value swapped at: page %llu \"",
          "new_line_content": "                strenc, (long long) rdbSavedObjectLen(val,NULL)));",
          "content_same": false
        },
        {
          "line": 10207,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "                (void*)key, key->refcount, (unsigned long long) key->vm.page,",
          "new_line_content": "            addReplySds(c,sdscatprintf(sdsempty(),",
          "content_same": false
        },
        {
          "line": 10215,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "        robj *key, *val;",
          "new_line_content": "        addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 10216,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr,\"swapout\")",
          "old_line_content": "",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"swapout\") && c->argc == 3) {",
          "content_same": false
        },
        {
          "line": 10217,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(c->db->dict,c->argv[2])",
          "old_line_content": "        if (!server.vm_enabled) {",
          "new_line_content": "        dictEntry *de = dictFind(c->db->dict,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 10221,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"-ERR Virtual Memory is disabled\\r\\n\")",
          "old_line_content": "        if (!de) {",
          "new_line_content": "            addReplySds(c,sdsnew(\"-ERR Virtual Memory is disabled\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 10228,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "        if (key->refcount > 1) {",
          "new_line_content": "        key = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 10232,
          "old_api": null,
          "new_api": "dupStringObject",
          "old_text": null,
          "new_text": "dupStringObject(key)",
          "old_line_content": "        }",
          "new_line_content": "            robj *newkey = dupStringObject(key);",
          "content_same": false
        },
        {
          "line": 10233,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(key)",
          "old_line_content": "        /* Swap it */",
          "new_line_content": "            decrRefCount(key);",
          "content_same": false
        },
        {
          "line": 10234,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "        if (key->storage != REDIS_VM_MEMORY) {",
          "new_line_content": "            key = dictGetEntryKey(de) = newkey;",
          "content_same": false
        },
        {
          "line": 10239,
          "old_api": null,
          "new_api": "vmSwapObjectBlocking",
          "old_text": null,
          "new_text": "vmSwapObjectBlocking(key,val)",
          "old_line_content": "        } else {",
          "new_line_content": "        } else if (vmSwapObjectBlocking(key,val) == REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 10241,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "        }",
          "new_line_content": "            addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 10243,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.err)",
          "old_line_content": "        long keys, j;",
          "new_line_content": "            addReply(c,shared.err);",
          "content_same": false
        },
        {
          "line": 10245,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr,\"populate\")",
          "old_line_content": "        char buf[128];",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"populate\") && c->argc == 3) {",
          "content_same": false
        },
        {
          "line": 10254,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(buf)",
          "old_line_content": "                continue;",
          "new_line_content": "            key = createStringObject(buf,strlen(buf));",
          "content_same": false
        },
        {
          "line": 10255,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,key)",
          "old_line_content": "            }",
          "new_line_content": "            if (lookupKeyRead(c->db,key) != NULL) {",
          "content_same": false
        },
        {
          "line": 10259,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(buf,sizeof(buf),\"value:%lu\",j)",
          "old_line_content": "        }",
          "new_line_content": "            snprintf(buf,sizeof(buf),\"value:%lu\",j);",
          "content_same": false
        },
        {
          "line": 10261,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(c->db->dict,key,val)",
          "old_line_content": "    } else {",
          "new_line_content": "            dictAdd(c->db->dict,key,val);",
          "content_same": false
        },
        {
          "line": 10263,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "            \"-ERR Syntax error, try DEBUG [SEGFAULT|OBJECT <key>|SWAPIN <key>|SWAPOUT <key>|RELOAD]\\r\\n\"));",
          "new_line_content": "        addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 10265,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\n            \"-ERR Syntax error, try DEBUG [SEGFAULT|OBJECT <key>|SWAPIN <key>|SWAPOUT <key>|RELOAD]\\r\\n\")",
          "old_line_content": "}",
          "new_line_content": "        addReplySds(c,sdsnew(",
          "content_same": false
        },
        {
          "line": 10272,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"==> %s:%d '%s' is not true\\n\",file,line,estr)",
          "old_line_content": "    *((char*)-1) = 'x';",
          "new_line_content": "    redisLog(REDIS_WARNING,\"==> %s:%d '%s' is not true\\n\",file,line,estr);",
          "content_same": false
        },
        {
          "line": 10274,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"(forcing SIGSEGV in order to print the stack trace)\")",
          "old_line_content": "}",
          "new_line_content": "    redisLog(REDIS_WARNING,\"(forcing SIGSEGV in order to print the stack trace)\");",
          "content_same": false
        },
        {
          "line": 10281,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Guru Meditation: %s #%s:%d\",msg,file,line)",
          "old_line_content": "    *((char*)-1) = 'x';",
          "new_line_content": "    redisLog(REDIS_WARNING,\"Guru Meditation: %s #%s:%d\",msg,file,line);",
          "content_same": false
        },
        {
          "line": 10283,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"(forcing SIGSEGV in order to print the stack trace)\")",
          "old_line_content": "}",
          "new_line_content": "    redisLog(REDIS_WARNING,\"(forcing SIGSEGV in order to print the stack trace)\");",
          "content_same": false
        },
        {
          "line": 10292,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(\"/proc/sys/vm/overcommit_memory\",\"r\")",
          "old_line_content": "    if (!fp) return -1;",
          "new_line_content": "    FILE *fp = fopen(\"/proc/sys/vm/overcommit_memory\",\"r\");",
          "content_same": false
        },
        {
          "line": 10296,
          "old_api": null,
          "new_api": "fgets",
          "old_text": null,
          "new_text": "fgets(buf,64,fp)",
          "old_line_content": "    }",
          "new_line_content": "    if (fgets(buf,64,fp) == NULL) {",
          "content_same": false
        },
        {
          "line": 10300,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "}",
          "new_line_content": "    fclose(fp);",
          "content_same": false
        },
        {
          "line": 10302,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(buf)",
          "old_line_content": "void linuxOvercommitMemoryWarning(void) {",
          "new_line_content": "    return atoi(buf);",
          "content_same": false
        },
        {
          "line": 10306,
          "old_api": null,
          "new_api": "linuxOvercommitMemoryValue",
          "old_text": null,
          "new_text": "linuxOvercommitMemoryValue()",
          "old_line_content": "}",
          "new_line_content": "    if (linuxOvercommitMemoryValue() == 0) {",
          "content_same": false
        },
        {
          "line": 10307,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\")",
          "old_line_content": "#endif /* __linux__ */",
          "new_line_content": "        redisLog(REDIS_WARNING,\"WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\");",
          "content_same": false
        },
        {
          "line": 10316,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(0)",
          "old_line_content": "    /* Every output goes to /dev/null. If Redis is daemonized but",
          "new_line_content": "    if (fork() != 0) exit(0); /* parent exits */",
          "content_same": false
        },
        {
          "line": 10317,
          "old_api": null,
          "new_api": "setsid",
          "old_text": null,
          "new_text": "setsid()",
          "old_line_content": "     * the 'logfile' is set to 'stdout' in the configuration file",
          "new_line_content": "    setsid(); /* create a new session */",
          "content_same": false
        },
        {
          "line": 10324,
          "old_api": null,
          "new_api": "dup2",
          "old_text": null,
          "new_text": "dup2(fd, STDOUT_FILENO)",
          "old_line_content": "    }",
          "new_line_content": "        dup2(fd, STDOUT_FILENO);",
          "content_same": false
        },
        {
          "line": 10325,
          "old_api": null,
          "new_api": "dup2",
          "old_text": null,
          "new_text": "dup2(fd, STDERR_FILENO)",
          "old_line_content": "    /* Try to write the pid file */",
          "new_line_content": "        dup2(fd, STDERR_FILENO);",
          "content_same": false
        },
        {
          "line": 10331,
          "old_api": null,
          "new_api": "getpid",
          "old_text": null,
          "new_text": "getpid()",
          "old_line_content": "}",
          "new_line_content": "        fprintf(fp,\"%d\\n\",getpid());",
          "content_same": false
        },
        {
          "line": 10332,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "",
          "new_line_content": "        fclose(fp);",
          "content_same": false
        },
        {
          "line": 10337,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"Redis server version %s\\n\", REDIS_VERSION)",
          "old_line_content": "",
          "new_line_content": "    printf(\"Redis server version %s\\n\", REDIS_VERSION);",
          "content_same": false
        },
        {
          "line": 10338,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(0)",
          "old_line_content": "static void usage() {",
          "new_line_content": "    exit(0);",
          "content_same": false
        },
        {
          "line": 10342,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\"Usage: ./redis-server [/path/to/redis.conf]\\n\")",
          "old_line_content": "}",
          "new_line_content": "    fprintf(stderr,\"Usage: ./redis-server [/path/to/redis.conf]\\n\");",
          "content_same": false
        },
        {
          "line": 10343,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\"       ./redis-server - (read config from stdin)\\n\")",
          "old_line_content": "",
          "new_line_content": "    fprintf(stderr,\"       ./redis-server - (read config from stdin)\\n\");",
          "content_same": false
        },
        {
          "line": 10344,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "int main(int argc, char **argv) {",
          "new_line_content": "    exit(1);",
          "content_same": false
        },
        {
          "line": 10354,
          "old_api": null,
          "new_api": "usage",
          "old_text": null,
          "new_text": "usage()",
          "old_line_content": "    } else if ((argc > 2)) {",
          "new_line_content": "        if (strcmp(argv[1], \"--help\") == 0) usage();",
          "content_same": false
        },
        {
          "line": 10356,
          "old_api": null,
          "new_api": "loadServerConfig",
          "old_text": null,
          "new_text": "loadServerConfig(argv[1])",
          "old_line_content": "    } else {",
          "new_line_content": "        loadServerConfig(argv[1]);",
          "content_same": false
        },
        {
          "line": 10358,
          "old_api": null,
          "new_api": "usage",
          "old_text": null,
          "new_text": "usage()",
          "old_line_content": "    }",
          "new_line_content": "        usage();",
          "content_same": false
        },
        {
          "line": 10362,
          "old_api": null,
          "new_api": "daemonize",
          "old_text": null,
          "new_text": "daemonize()",
          "old_line_content": "#ifdef __linux__",
          "new_line_content": "    if (server.daemonize) daemonize();",
          "content_same": false
        },
        {
          "line": 10364,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Server started, Redis version \" REDIS_VERSION)",
          "old_line_content": "#endif",
          "new_line_content": "    redisLog(REDIS_NOTICE,\"Server started, Redis version \" REDIS_VERSION);",
          "content_same": false
        },
        {
          "line": 10366,
          "old_api": null,
          "new_api": "linuxOvercommitMemoryWarning",
          "old_text": null,
          "new_text": "linuxOvercommitMemoryWarning()",
          "old_line_content": "    if (server.appendonly) {",
          "new_line_content": "    linuxOvercommitMemoryWarning();",
          "content_same": false
        },
        {
          "line": 10377,
          "old_api": null,
          "new_api": "aeSetBeforeSleepProc",
          "old_text": null,
          "new_text": "aeSetBeforeSleepProc(server.el,beforeSleep)",
          "old_line_content": "    return 0;",
          "new_line_content": "    aeSetBeforeSleepProc(server.el,beforeSleep);",
          "content_same": false
        },
        {
          "line": 10378,
          "old_api": null,
          "new_api": "aeMain",
          "old_text": null,
          "new_text": "aeMain(server.el)",
          "old_line_content": "}",
          "new_line_content": "    aeMain(server.el);",
          "content_same": false
        },
        {
          "line": 10379,
          "old_api": null,
          "new_api": "aeDeleteEventLoop",
          "old_text": null,
          "new_text": "aeDeleteEventLoop(server.el)",
          "old_line_content": "",
          "new_line_content": "    aeDeleteEventLoop(server.el);",
          "content_same": false
        },
        {
          "line": 10421,
          "old_api": null,
          "new_api": "REDIS_NOTUSED",
          "old_text": null,
          "new_text": "REDIS_NOTUSED(info)",
          "old_line_content": "        \"======= Ooops! Redis %s got signal: -%d- =======\", REDIS_VERSION, sig);",
          "new_line_content": "    REDIS_NOTUSED(info);",
          "content_same": false
        },
        {
          "line": 10425,
          "old_api": null,
          "new_api": "genRedisInfoString",
          "old_text": null,
          "new_text": "genRedisInfoString()",
          "old_line_content": "     * corruption conditions. Let it leak as we are going to abort */",
          "new_line_content": "    infostring = genRedisInfoString();",
          "content_same": false
        },
        {
          "line": 10426,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING, \"%s\",infostring)",
          "old_line_content": "",
          "new_line_content": "    redisLog(REDIS_WARNING, \"%s\",infostring);",
          "content_same": false
        },
        {
          "line": 10433,
          "old_api": null,
          "new_api": "getMcontextEip",
          "old_text": null,
          "new_text": "getMcontextEip(uc)",
          "old_line_content": "",
          "new_line_content": "        trace[1] = getMcontextEip(uc);",
          "content_same": false
        },
        {
          "line": 10440,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(messages[i],'+')",
          "old_line_content": "        } else {",
          "new_line_content": "        p = strchr(messages[i],'+');",
          "content_same": false
        },
        {
          "line": 10442,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"%s\", messages[i])",
          "old_line_content": "        }",
          "new_line_content": "            redisLog(REDIS_WARNING,\"%s\", messages[i]);",
          "content_same": false
        },
        {
          "line": 10444,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"%d redis-server %p %s + %d\", i, trace[i], fn, (unsigned int)offset)",
          "old_line_content": "    /* free(messages); Don't call free() with possibly corrupted memory. */",
          "new_line_content": "            redisLog(REDIS_WARNING,\"%d redis-server %p %s + %d\", i, trace[i], fn, (unsigned int)offset);",
          "content_same": false
        },
        {
          "line": 10448,
          "old_api": null,
          "new_api": "_exit",
          "old_text": null,
          "new_text": "_exit(0)",
          "old_line_content": "static void setupSigSegvAction(void) {",
          "new_line_content": "    _exit(0);",
          "content_same": false
        },
        {
          "line": 10454,
          "old_api": null,
          "new_api": "sigemptyset (&act.sa_mask)",
          "old_text": null,
          "new_text": "sigemptyset (&act.sa_mask)",
          "old_line_content": "    act.sa_flags = SA_NODEFER | SA_ONSTACK | SA_RESETHAND | SA_SIGINFO;",
          "new_line_content": "    sigemptyset (&act.sa_mask);",
          "content_same": false
        },
        {
          "line": 10461,
          "old_api": null,
          "new_api": "sigaction (SIGFPE, &act, NULL)",
          "old_text": null,
          "new_text": "sigaction (SIGFPE, &act, NULL)",
          "old_line_content": "    return;",
          "new_line_content": "    sigaction (SIGFPE, &act, NULL);",
          "content_same": false
        },
        {
          "line": 10462,
          "old_api": null,
          "new_api": "sigaction (SIGILL, &act, NULL)",
          "old_text": null,
          "new_text": "sigaction (SIGILL, &act, NULL)",
          "old_line_content": "}",
          "new_line_content": "    sigaction (SIGILL, &act, NULL);",
          "content_same": false
        },
        {
          "line": 10463,
          "old_api": null,
          "new_api": "sigaction (SIGBUS, &act, NULL)",
          "old_text": null,
          "new_text": "sigaction (SIGBUS, &act, NULL)",
          "old_line_content": "",
          "new_line_content": "    sigaction (SIGBUS, &act, NULL);",
          "content_same": false
        },
        {
          "line": 3519,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf((char*)buf+1,sizeof(buf)-1,\"%.17g\",val)",
          "old_line_content": "    }",
          "new_line_content": "            snprintf((char*)buf+1,sizeof(buf)-1,\"%.17g\",val);",
          "content_same": false
        },
        {
          "line": 3523,
          "old_api": null,
          "new_api": "fwrite",
          "old_text": null,
          "new_text": "fwrite(buf,len,1,fp)",
          "old_line_content": "",
          "new_line_content": "    if (fwrite(buf,len,1,fp) == 0) return -1;",
          "content_same": false
        },
        {
          "line": 3531,
          "old_api": null,
          "new_api": "rdbSaveStringObject",
          "old_text": null,
          "new_text": "rdbSaveStringObject(fp,o)",
          "old_line_content": "        list *list = o->ptr;",
          "new_line_content": "        if (rdbSaveStringObject(fp,o) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 3539,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(list,&li)",
          "old_line_content": "",
          "new_line_content": "        listRewind(list,&li);",
          "content_same": false
        },
        {
          "line": 3541,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(ln)",
          "old_line_content": "        }",
          "new_line_content": "            robj *eleobj = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 3543,
          "old_api": null,
          "new_api": "rdbSaveStringObject",
          "old_text": null,
          "new_text": "rdbSaveStringObject(fp,eleobj)",
          "old_line_content": "        /* Save a set value */",
          "new_line_content": "            if (rdbSaveStringObject(fp,eleobj) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 3551,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(set)",
          "old_line_content": "",
          "new_line_content": "        if (rdbSaveLen(fp,dictSize(set)) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 3553,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "        }",
          "new_line_content": "            robj *eleobj = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 3555,
          "old_api": null,
          "new_api": "rdbSaveStringObject",
          "old_text": null,
          "new_text": "rdbSaveStringObject(fp,eleobj)",
          "old_line_content": "    } else if (o->type == REDIS_ZSET) {",
          "new_line_content": "            if (rdbSaveStringObject(fp,eleobj) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 3557,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "        zset *zs = o->ptr;",
          "new_line_content": "        dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 3565,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "",
          "new_line_content": "        while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 3570,
          "old_api": null,
          "new_api": "rdbSaveDoubleValue",
          "old_text": null,
          "new_text": "rdbSaveDoubleValue(fp,*score)",
          "old_line_content": "    } else if (o->type == REDIS_HASH) {",
          "new_line_content": "            if (rdbSaveDoubleValue(fp,*score) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 3572,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "        if (o->encoding == REDIS_ENCODING_ZIPMAP) {",
          "new_line_content": "        dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 3576,
          "old_api": null,
          "new_api": "zipmapRewind",
          "old_text": null,
          "new_text": "zipmapRewind(o->ptr)",
          "old_line_content": "            unsigned int klen, vlen;",
          "new_line_content": "            unsigned char *p = zipmapRewind(o->ptr);",
          "content_same": false
        },
        {
          "line": 3577,
          "old_api": null,
          "new_api": "zipmapLen",
          "old_text": null,
          "new_text": "zipmapLen(o->ptr)",
          "old_line_content": "",
          "new_line_content": "            unsigned int count = zipmapLen(o->ptr);",
          "content_same": false
        },
        {
          "line": 3582,
          "old_api": null,
          "new_api": "zipmapNext",
          "old_text": null,
          "new_text": "zipmapNext(p,&key,&klen,&val,&vlen)",
          "old_line_content": "            }",
          "new_line_content": "            while((p = zipmapNext(p,&key,&klen,&val,&vlen)) != NULL) {",
          "content_same": false
        },
        {
          "line": 3583,
          "old_api": null,
          "new_api": "rdbSaveRawString",
          "old_text": null,
          "new_text": "rdbSaveRawString(fp,key,klen)",
          "old_line_content": "        } else {",
          "new_line_content": "                if (rdbSaveRawString(fp,key,klen) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 3591,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "",
          "new_line_content": "            while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 3596,
          "old_api": null,
          "new_api": "rdbSaveStringObject",
          "old_text": null,
          "new_text": "rdbSaveStringObject(fp,val)",
          "old_line_content": "        }",
          "new_line_content": "                if (rdbSaveStringObject(fp,val) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 3601,
          "old_api": null,
          "new_api": "redisPanic",
          "old_text": null,
          "new_text": "redisPanic(\"Unknown object type\")",
          "old_line_content": "}",
          "new_line_content": "        redisPanic(\"Unknown object type\");",
          "content_same": false
        },
        {
          "line": 3612,
          "old_api": null,
          "new_api": "rewind",
          "old_text": null,
          "new_text": "rewind(fp)",
          "old_line_content": "}",
          "new_line_content": "    rewind(fp);",
          "content_same": false
        },
        {
          "line": 3613,
          "old_api": null,
          "new_api": "rdbSaveObject",
          "old_text": null,
          "new_text": "rdbSaveObject(fp,o)",
          "old_line_content": "",
          "new_line_content": "    assert(rdbSaveObject(fp,o) != 1);",
          "content_same": false
        },
        {
          "line": 3614,
          "old_api": null,
          "new_api": "ftello",
          "old_text": null,
          "new_text": "ftello(fp)",
          "old_line_content": "/* Return the number of pages required to save this object in the swap file */",
          "new_line_content": "    return ftello(fp);",
          "content_same": false
        },
        {
          "line": 3619,
          "old_api": null,
          "new_api": "rdbSavedObjectLen",
          "old_text": null,
          "new_text": "rdbSavedObjectLen(o,fp)",
          "old_line_content": "}",
          "new_line_content": "    off_t bytes = rdbSavedObjectLen(o,fp);",
          "content_same": false
        },
        {
          "line": 3631,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "     * foreground-saving, to avoid seeking the swap file descriptor at the",
          "new_line_content": "    time_t now = time(NULL);",
          "content_same": false
        },
        {
          "line": 3640,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(tmpfile,\"w\")",
          "old_line_content": "        return REDIS_ERR;",
          "new_line_content": "    fp = fopen(tmpfile,\"w\");",
          "content_same": false
        },
        {
          "line": 3645,
          "old_api": null,
          "new_api": "fwrite",
          "old_text": null,
          "new_text": "fwrite(\"REDIS0001\",9,1,fp)",
          "old_line_content": "        dict *d = db->dict;",
          "new_line_content": "    if (fwrite(\"REDIS0001\",9,1,fp) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 3650,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(d)",
          "old_line_content": "            return REDIS_ERR;",
          "new_line_content": "        di = dictGetIterator(d);",
          "content_same": false
        },
        {
          "line": 3652,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "",
          "new_line_content": "            fclose(fp);",
          "content_same": false
        },
        {
          "line": 3657,
          "old_api": null,
          "new_api": "rdbSaveType",
          "old_text": null,
          "new_text": "rdbSaveType(fp,REDIS_SELECTDB)",
          "old_line_content": "        /* Iterate this DB writing every entry */",
          "new_line_content": "        if (rdbSaveType(fp,REDIS_SELECTDB) == -1) goto werr;",
          "content_same": false
        },
        {
          "line": 3662,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "",
          "new_line_content": "            robj *key = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 3663,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "            /* Save the expire time */",
          "new_line_content": "            robj *o = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 3664,
          "old_api": null,
          "new_api": "getExpire",
          "old_text": null,
          "new_text": "getExpire(db,key)",
          "old_line_content": "            if (expiretime != -1) {",
          "new_line_content": "            time_t expiretime = getExpire(db,key);",
          "content_same": false
        },
        {
          "line": 3670,
          "old_api": null,
          "new_api": "rdbSaveType",
          "old_text": null,
          "new_text": "rdbSaveType(fp,REDIS_EXPIRETIME)",
          "old_line_content": "            /* Save the key and associated value. This requires special",
          "new_line_content": "                if (rdbSaveType(fp,REDIS_EXPIRETIME) == -1) goto werr;",
          "content_same": false
        },
        {
          "line": 3671,
          "old_api": null,
          "new_api": "rdbSaveTime",
          "old_text": null,
          "new_text": "rdbSaveTime(fp,expiretime)",
          "old_line_content": "             * handling if the value is swapped out. */",
          "new_line_content": "                if (rdbSaveTime(fp,expiretime) == -1) goto werr;",
          "content_same": false
        },
        {
          "line": 3678,
          "old_api": null,
          "new_api": "rdbSaveType",
          "old_text": null,
          "new_text": "rdbSaveType(fp,o->type)",
          "old_line_content": "            } else {",
          "new_line_content": "                if (rdbSaveType(fp,o->type) == -1) goto werr;",
          "content_same": false
        },
        {
          "line": 3679,
          "old_api": null,
          "new_api": "rdbSaveStringObject",
          "old_text": null,
          "new_text": "rdbSaveStringObject(fp,key)",
          "old_line_content": "                /* REDIS_VM_SWAPPED or REDIS_VM_LOADING */",
          "new_line_content": "                if (rdbSaveStringObject(fp,key) == -1) goto werr;",
          "content_same": false
        },
        {
          "line": 3680,
          "old_api": null,
          "new_api": "rdbSaveObject",
          "old_text": null,
          "new_text": "rdbSaveObject(fp,o)",
          "old_line_content": "                robj *po;",
          "new_line_content": "                if (rdbSaveObject(fp,o) == -1) goto werr;",
          "content_same": false
        },
        {
          "line": 3687,
          "old_api": null,
          "new_api": "rdbSaveType",
          "old_text": null,
          "new_text": "rdbSaveType(fp,key->vtype)",
          "old_line_content": "                /* Remove the loaded object from memory */",
          "new_line_content": "                if (rdbSaveType(fp,key->vtype) == -1) goto werr;",
          "content_same": false
        },
        {
          "line": 3689,
          "old_api": null,
          "new_api": "rdbSaveObject",
          "old_text": null,
          "new_text": "rdbSaveObject(fp,po)",
          "old_line_content": "            }",
          "new_line_content": "                if (rdbSaveObject(fp,po) == -1) goto werr;",
          "content_same": false
        },
        {
          "line": 3700,
          "old_api": null,
          "new_api": "fflush",
          "old_text": null,
          "new_text": "fflush(fp)",
          "old_line_content": "",
          "new_line_content": "    fflush(fp);",
          "content_same": false
        },
        {
          "line": 3701,
          "old_api": null,
          "new_api": "fileno",
          "old_text": null,
          "new_text": "fileno(fp)",
          "old_line_content": "    /* Use RENAME to make sure the DB file is changed atomically only",
          "new_line_content": "    fsync(fileno(fp));",
          "content_same": false
        },
        {
          "line": 3702,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "     * if the generate DB file is ok. */",
          "new_line_content": "    fclose(fp);",
          "content_same": false
        },
        {
          "line": 3706,
          "old_api": null,
          "new_api": "rename",
          "old_text": null,
          "new_text": "rename(tmpfile,filename)",
          "old_line_content": "        return REDIS_ERR;",
          "new_line_content": "    if (rename(tmpfile,filename) == -1) {",
          "content_same": false
        },
        {
          "line": 3707,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "    }",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Error moving temp DB file on the final destination: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 3711,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"DB saved on disk\")",
          "old_line_content": "    return REDIS_OK;",
          "new_line_content": "    redisLog(REDIS_NOTICE,\"DB saved on disk\");",
          "content_same": false
        },
        {
          "line": 3713,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "werr:",
          "new_line_content": "    server.lastsave = time(NULL);",
          "content_same": false
        },
        {
          "line": 3718,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(tmpfile)",
          "old_line_content": "    return REDIS_ERR;",
          "new_line_content": "    unlink(tmpfile);",
          "content_same": false
        },
        {
          "line": 3719,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "}",
          "new_line_content": "    redisLog(REDIS_WARNING,\"Write error saving DB on disk: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 3720,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "",
          "new_line_content": "    if (di) dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 3732,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(server.fd)",
          "old_line_content": "        } else {",
          "new_line_content": "        close(server.fd);",
          "content_same": false
        },
        {
          "line": 3734,
          "old_api": null,
          "new_api": "_exit",
          "old_text": null,
          "new_text": "_exit(0)",
          "old_line_content": "        }",
          "new_line_content": "            _exit(0);",
          "content_same": false
        },
        {
          "line": 3736,
          "old_api": null,
          "new_api": "_exit",
          "old_text": null,
          "new_text": "_exit(1)",
          "old_line_content": "        /* Parent */",
          "new_line_content": "            _exit(1);",
          "content_same": false
        },
        {
          "line": 3741,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Can't save in background: fork: %s\",\n                strerror(errno))",
          "old_line_content": "        }",
          "new_line_content": "            redisLog(REDIS_WARNING,\"Can't save in background: fork: %s\",",
          "content_same": false
        },
        {
          "line": 3745,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Background saving started by pid %d\",childpid)",
          "old_line_content": "        return REDIS_OK;",
          "new_line_content": "        redisLog(REDIS_NOTICE,\"Background saving started by pid %d\",childpid);",
          "content_same": false
        },
        {
          "line": 3747,
          "old_api": null,
          "new_api": "updateDictResizePolicy",
          "old_text": null,
          "new_text": "updateDictResizePolicy()",
          "old_line_content": "    return REDIS_OK; /* unreached */",
          "new_line_content": "        updateDictResizePolicy();",
          "content_same": false
        },
        {
          "line": 3756,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(tmpfile,256,\"temp-%d.rdb\", (int) childpid)",
          "old_line_content": "",
          "new_line_content": "    snprintf(tmpfile,256,\"temp-%d.rdb\", (int) childpid);",
          "content_same": false
        },
        {
          "line": 3757,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(tmpfile)",
          "old_line_content": "static int rdbLoadType(FILE *fp) {",
          "new_line_content": "    unlink(tmpfile);",
          "content_same": false
        },
        {
          "line": 3762,
          "old_api": null,
          "new_api": "fread",
          "old_text": null,
          "new_text": "fread(&type,1,1,fp)",
          "old_line_content": "",
          "new_line_content": "    if (fread(&type,1,1,fp) == 0) return -1;",
          "content_same": false
        },
        {
          "line": 3768,
          "old_api": null,
          "new_api": "fread",
          "old_text": null,
          "new_text": "fread(&t32,4,1,fp)",
          "old_line_content": "",
          "new_line_content": "    if (fread(&t32,4,1,fp) == 0) return -1;",
          "content_same": false
        },
        {
          "line": 3783,
          "old_api": null,
          "new_api": "fread",
          "old_text": null,
          "new_text": "fread(buf,1,1,fp)",
          "old_line_content": "        /* Read a 6 bit len */",
          "new_line_content": "    if (fread(buf,1,1,fp) == 0) return REDIS_RDB_LENERR;",
          "content_same": false
        },
        {
          "line": 3794,
          "old_api": null,
          "new_api": "fread",
          "old_text": null,
          "new_text": "fread(buf+1,1,1,fp)",
          "old_line_content": "        /* Read a 32 bit len */",
          "new_line_content": "        if (fread(buf+1,1,1,fp) == 0) return REDIS_RDB_LENERR;",
          "content_same": false
        },
        {
          "line": 3798,
          "old_api": null,
          "new_api": "fread",
          "old_text": null,
          "new_text": "fread(&len,4,1,fp)",
          "old_line_content": "}",
          "new_line_content": "        if (fread(&len,4,1,fp) == 0) return REDIS_RDB_LENERR;",
          "content_same": false
        },
        {
          "line": 3799,
          "old_api": null,
          "new_api": "ntohl",
          "old_text": null,
          "new_text": "ntohl(len)",
          "old_line_content": "",
          "new_line_content": "        return ntohl(len);",
          "content_same": false
        },
        {
          "line": 3812,
          "old_api": null,
          "new_api": "fread",
          "old_text": null,
          "new_text": "fread(enc,1,1,fp)",
          "old_line_content": "        uint16_t v;",
          "new_line_content": "        if (fread(enc,1,1,fp) == 0) return NULL;",
          "content_same": false
        },
        {
          "line": 3816,
          "old_api": null,
          "new_api": "fread",
          "old_text": null,
          "new_text": "fread(enc,2,1,fp)",
          "old_line_content": "    } else if (enctype == REDIS_RDB_ENC_INT32) {",
          "new_line_content": "        if (fread(enc,2,1,fp) == 0) return NULL;",
          "content_same": false
        },
        {
          "line": 3821,
          "old_api": null,
          "new_api": "fread",
          "old_text": null,
          "new_text": "fread(enc,4,1,fp)",
          "old_line_content": "    } else {",
          "new_line_content": "        if (fread(enc,4,1,fp) == 0) return NULL;",
          "content_same": false
        },
        {
          "line": 3829,
          "old_api": null,
          "new_api": "createStringObjectFromLongLong",
          "old_text": null,
          "new_text": "createStringObjectFromLongLong(val)",
          "old_line_content": "}",
          "new_line_content": "        return createStringObjectFromLongLong(val);",
          "content_same": false
        },
        {
          "line": 3831,
          "old_api": null,
          "new_api": "sdsfromlonglong",
          "old_text": null,
          "new_text": "sdsfromlonglong(val)",
          "old_line_content": "static robj *rdbLoadLzfStringObject(FILE*fp) {",
          "new_line_content": "        return createObject(REDIS_STRING,sdsfromlonglong(val));",
          "content_same": false
        },
        {
          "line": 3844,
          "old_api": null,
          "new_api": "lzf_decompress",
          "old_text": null,
          "new_text": "lzf_decompress(c,clen,val,len)",
          "old_line_content": "err:",
          "new_line_content": "    if (lzf_decompress(c,clen,val,len) == 0) goto err;",
          "content_same": false
        },
        {
          "line": 3848,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(c)",
          "old_line_content": "}",
          "new_line_content": "    zfree(c);",
          "content_same": false
        },
        {
          "line": 3849,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(val)",
          "old_line_content": "",
          "new_line_content": "    sdsfree(val);",
          "content_same": false
        },
        {
          "line": 3858,
          "old_api": null,
          "new_api": "rdbLoadLen",
          "old_text": null,
          "new_text": "rdbLoadLen(fp,&isencoded)",
          "old_line_content": "        case REDIS_RDB_ENC_INT8:",
          "new_line_content": "    len = rdbLoadLen(fp,&isencoded);",
          "content_same": false
        },
        {
          "line": 3864,
          "old_api": null,
          "new_api": "rdbLoadIntegerObject",
          "old_text": null,
          "new_text": "rdbLoadIntegerObject(fp,len,encode)",
          "old_line_content": "        default:",
          "new_line_content": "            return rdbLoadIntegerObject(fp,len,encode);",
          "content_same": false
        },
        {
          "line": 3866,
          "old_api": null,
          "new_api": "rdbLoadLzfStringObject",
          "old_text": null,
          "new_text": "rdbLoadLzfStringObject(fp)",
          "old_line_content": "        }",
          "new_line_content": "            return rdbLoadLzfStringObject(fp);",
          "content_same": false
        },
        {
          "line": 3868,
          "old_api": null,
          "new_api": "redisPanic",
          "old_text": null,
          "new_text": "redisPanic(\"Unknown RDB encoding type\")",
          "old_line_content": "",
          "new_line_content": "            redisPanic(\"Unknown RDB encoding type\");",
          "content_same": false
        },
        {
          "line": 3873,
          "old_api": null,
          "new_api": "sdsnewlen",
          "old_text": null,
          "new_text": "sdsnewlen(NULL,len)",
          "old_line_content": "        return NULL;",
          "new_line_content": "    val = sdsnewlen(NULL,len);",
          "content_same": false
        },
        {
          "line": 3874,
          "old_api": null,
          "new_api": "fread",
          "old_text": null,
          "new_text": "fread(val,len,1,fp)",
          "old_line_content": "    }",
          "new_line_content": "    if (len && fread(val,len,1,fp) == 0) {",
          "content_same": false
        },
        {
          "line": 3878,
          "old_api": null,
          "new_api": "createObject",
          "old_text": null,
          "new_text": "createObject(REDIS_STRING,val)",
          "old_line_content": "static robj *rdbLoadStringObject(FILE *fp) {",
          "new_line_content": "    return createObject(REDIS_STRING,val);",
          "content_same": false
        },
        {
          "line": 3882,
          "old_api": null,
          "new_api": "rdbGenericLoadStringObject",
          "old_text": null,
          "new_text": "rdbGenericLoadStringObject(fp,0)",
          "old_line_content": "static robj *rdbLoadEncodedStringObject(FILE *fp) {",
          "new_line_content": "    return rdbGenericLoadStringObject(fp,0);",
          "content_same": false
        },
        {
          "line": 3886,
          "old_api": null,
          "new_api": "rdbGenericLoadStringObject",
          "old_text": null,
          "new_text": "rdbGenericLoadStringObject(fp,1)",
          "old_line_content": "/* For information about double serialization check rdbSaveDoubleValue() */",
          "new_line_content": "    return rdbGenericLoadStringObject(fp,1);",
          "content_same": false
        },
        {
          "line": 3894,
          "old_api": null,
          "new_api": "fread",
          "old_text": null,
          "new_text": "fread(&len,1,1,fp)",
          "old_line_content": "    case 254: *val = R_PosInf; return 0;",
          "new_line_content": "    if (fread(&len,1,1,fp) == 0) return -1;",
          "content_same": false
        },
        {
          "line": 3900,
          "old_api": null,
          "new_api": "fread",
          "old_text": null,
          "new_text": "fread(buf,len,1,fp)",
          "old_line_content": "        return 0;",
          "new_line_content": "        if (fread(buf,len,1,fp) == 0) return -1;",
          "content_same": false
        },
        {
          "line": 3902,
          "old_api": null,
          "new_api": "sscanf",
          "old_text": null,
          "new_text": "sscanf(buf, \"%lg\", val)",
          "old_line_content": "}",
          "new_line_content": "        sscanf(buf, \"%lg\", val);",
          "content_same": false
        },
        {
          "line": 3915,
          "old_api": null,
          "new_api": "rdbLoadEncodedStringObject",
          "old_text": null,
          "new_text": "rdbLoadEncodedStringObject(fp)",
          "old_line_content": "        /* Read list/set value */",
          "new_line_content": "        if ((o = rdbLoadEncodedStringObject(fp)) == NULL) return NULL;",
          "content_same": false
        },
        {
          "line": 3916,
          "old_api": null,
          "new_api": "tryObjectEncoding",
          "old_text": null,
          "new_text": "tryObjectEncoding(o)",
          "old_line_content": "        uint32_t listlen;",
          "new_line_content": "        o = tryObjectEncoding(o);",
          "content_same": false
        },
        {
          "line": 3921,
          "old_api": null,
          "new_api": "rdbLoadLen",
          "old_text": null,
          "new_text": "rdbLoadLen(fp,NULL)",
          "old_line_content": "         * to avoid rehashing */",
          "new_line_content": "        if ((listlen = rdbLoadLen(fp,NULL)) == REDIS_RDB_LENERR) return NULL;",
          "content_same": false
        },
        {
          "line": 3922,
          "old_api": null,
          "new_api": "createSetObject",
          "old_text": null,
          "new_text": "createSetObject()",
          "old_line_content": "        if (type == REDIS_SET && listlen > DICT_HT_INITIAL_SIZE)",
          "new_line_content": "        o = (type == REDIS_LIST) ? createListObject() : createSetObject();",
          "content_same": false
        },
        {
          "line": 3926,
          "old_api": null,
          "new_api": "dictExpand",
          "old_text": null,
          "new_text": "dictExpand(o->ptr,listlen)",
          "old_line_content": "            robj *ele;",
          "new_line_content": "            dictExpand(o->ptr,listlen);",
          "content_same": false
        },
        {
          "line": 3932,
          "old_api": null,
          "new_api": "tryObjectEncoding",
          "old_text": null,
          "new_text": "tryObjectEncoding(ele)",
          "old_line_content": "            } else {",
          "new_line_content": "            ele = tryObjectEncoding(ele);",
          "content_same": false
        },
        {
          "line": 3934,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail((list*)o->ptr,ele)",
          "old_line_content": "            }",
          "new_line_content": "                listAddNodeTail((list*)o->ptr,ele);",
          "content_same": false
        },
        {
          "line": 3936,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd((dict*)o->ptr,ele,NULL)",
          "old_line_content": "    } else if (type == REDIS_ZSET) {",
          "new_line_content": "                dictAdd((dict*)o->ptr,ele,NULL);",
          "content_same": false
        },
        {
          "line": 3944,
          "old_api": null,
          "new_api": "rdbLoadLen",
          "old_text": null,
          "new_text": "rdbLoadLen(fp,NULL)",
          "old_line_content": "        /* Load every single element of the list/set */",
          "new_line_content": "        if ((zsetlen = rdbLoadLen(fp,NULL)) == REDIS_RDB_LENERR) return NULL;",
          "content_same": false
        },
        {
          "line": 3945,
          "old_api": null,
          "new_api": "createZsetObject",
          "old_text": null,
          "new_text": "createZsetObject()",
          "old_line_content": "        while(zsetlen--) {",
          "new_line_content": "        o = createZsetObject();",
          "content_same": false
        },
        {
          "line": 3955,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(zs->dict,ele,score)",
          "old_line_content": "        }",
          "new_line_content": "            dictAdd(zs->dict,ele,score);",
          "content_same": false
        },
        {
          "line": 3956,
          "old_api": null,
          "new_api": "zslInsert",
          "old_text": null,
          "new_text": "zslInsert(zs->zsl,*score,ele)",
          "old_line_content": "    } else if (type == REDIS_HASH) {",
          "new_line_content": "            zslInsert(zs->zsl,*score,ele);",
          "content_same": false
        },
        {
          "line": 3957,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(ele)",
          "old_line_content": "        size_t hashlen;",
          "new_line_content": "            incrRefCount(ele); /* added to skiplist */",
          "content_same": false
        },
        {
          "line": 3962,
          "old_api": null,
          "new_api": "rdbLoadLen",
          "old_text": null,
          "new_text": "rdbLoadLen(fp,NULL)",
          "old_line_content": "        if (hashlen > server.hash_max_zipmap_entries)",
          "new_line_content": "        if ((hashlen = rdbLoadLen(fp,NULL)) == REDIS_RDB_LENERR) return NULL;",
          "content_same": false
        },
        {
          "line": 3966,
          "old_api": null,
          "new_api": "convertToRealHash",
          "old_text": null,
          "new_text": "convertToRealHash(o)",
          "old_line_content": "        while(hashlen--) {",
          "new_line_content": "            convertToRealHash(o);",
          "content_same": false
        },
        {
          "line": 3972,
          "old_api": null,
          "new_api": "rdbLoadStringObject",
          "old_text": null,
          "new_text": "rdbLoadStringObject(fp)",
          "old_line_content": "             * the object is converted to real hash table encoding. */",
          "new_line_content": "            if ((key = rdbLoadStringObject(fp)) == NULL) return NULL;",
          "content_same": false
        },
        {
          "line": 3973,
          "old_api": null,
          "new_api": "rdbLoadStringObject",
          "old_text": null,
          "new_text": "rdbLoadStringObject(fp)",
          "old_line_content": "            if (o->encoding != REDIS_ENCODING_HT &&",
          "new_line_content": "            if ((val = rdbLoadStringObject(fp)) == NULL) return NULL;",
          "content_same": false
        },
        {
          "line": 3978,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(val->ptr)",
          "old_line_content": "            }",
          "new_line_content": "                sdslen(val->ptr) > server.hash_max_zipmap_value))",
          "content_same": false
        },
        {
          "line": 3980,
          "old_api": null,
          "new_api": "convertToRealHash",
          "old_text": null,
          "new_text": "convertToRealHash(o)",
          "old_line_content": "            if (o->encoding == REDIS_ENCODING_ZIPMAP) {",
          "new_line_content": "                    convertToRealHash(o);",
          "content_same": false
        },
        {
          "line": 3992,
          "old_api": null,
          "new_api": "tryObjectEncoding",
          "old_text": null,
          "new_text": "tryObjectEncoding(key)",
          "old_line_content": "            }",
          "new_line_content": "                key = tryObjectEncoding(key);",
          "content_same": false
        },
        {
          "line": 3993,
          "old_api": null,
          "new_api": "tryObjectEncoding",
          "old_text": null,
          "new_text": "tryObjectEncoding(val)",
          "old_line_content": "        }",
          "new_line_content": "                val = tryObjectEncoding(val);",
          "content_same": false
        },
        {
          "line": 3994,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd((dict*)o->ptr,key,val)",
          "old_line_content": "    } else {",
          "new_line_content": "                dictAdd((dict*)o->ptr,key,val);",
          "content_same": false
        },
        {
          "line": 3998,
          "old_api": null,
          "new_api": "redisPanic",
          "old_text": null,
          "new_text": "redisPanic(\"Unknown object type\")",
          "old_line_content": "}",
          "new_line_content": "        redisPanic(\"Unknown object type\");",
          "content_same": false
        },
        {
          "line": 4014,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(filename,\"r\")",
          "old_line_content": "    buf[9] = '\\0';",
          "new_line_content": "    fp = fopen(filename,\"r\");",
          "content_same": false
        },
        {
          "line": 4018,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(buf,\"REDIS\",5)",
          "old_line_content": "        return REDIS_ERR;",
          "new_line_content": "    if (memcmp(buf,\"REDIS\",5) != 0) {",
          "content_same": false
        },
        {
          "line": 4019,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "    }",
          "new_line_content": "        fclose(fp);",
          "content_same": false
        },
        {
          "line": 4025,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "    }",
          "new_line_content": "        fclose(fp);",
          "content_same": false
        },
        {
          "line": 4026,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Can't handle RDB format version %d\",rdbver)",
          "old_line_content": "    while(1) {",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Can't handle RDB format version %d\",rdbver);",
          "content_same": false
        },
        {
          "line": 4034,
          "old_api": null,
          "new_api": "rdbLoadType",
          "old_text": null,
          "new_text": "rdbLoadType(fp)",
          "old_line_content": "            /* We read the time so we need to read the object type again */",
          "new_line_content": "        if ((type = rdbLoadType(fp)) == -1) goto eoferr;",
          "content_same": false
        },
        {
          "line": 4036,
          "old_api": null,
          "new_api": "rdbLoadTime",
          "old_text": null,
          "new_text": "rdbLoadTime(fp)",
          "old_line_content": "        }",
          "new_line_content": "            if ((expiretime = rdbLoadTime(fp)) == -1) goto eoferr;",
          "content_same": false
        },
        {
          "line": 4038,
          "old_api": null,
          "new_api": "rdbLoadType",
          "old_text": null,
          "new_text": "rdbLoadType(fp)",
          "old_line_content": "        /* Handle SELECT DB opcode as a special case */",
          "new_line_content": "            if ((type = rdbLoadType(fp)) == -1) goto eoferr;",
          "content_same": false
        },
        {
          "line": 4046,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"FATAL: Data file was created with a Redis server configured to handle more than %d databases. Exiting\\n\", server.dbnum)",
          "old_line_content": "            db = server.db+dbid;",
          "new_line_content": "                redisLog(REDIS_WARNING,\"FATAL: Data file was created with a Redis server configured to handle more than %d databases. Exiting\\n\", server.dbnum);",
          "content_same": false
        },
        {
          "line": 4047,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "            d = db->dict;",
          "new_line_content": "                exit(1);",
          "content_same": false
        },
        {
          "line": 4054,
          "old_api": null,
          "new_api": "rdbLoadStringObject",
          "old_text": null,
          "new_text": "rdbLoadStringObject(fp)",
          "old_line_content": "        /* Check if the key already expired */",
          "new_line_content": "        if ((key = rdbLoadStringObject(fp)) == NULL) goto eoferr;",
          "content_same": false
        },
        {
          "line": 4059,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(key)",
          "old_line_content": "        }",
          "new_line_content": "            decrRefCount(key);",
          "content_same": false
        },
        {
          "line": 4060,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(val)",
          "old_line_content": "        /* Add the new object in the hash table */",
          "new_line_content": "            decrRefCount(val);",
          "content_same": false
        },
        {
          "line": 4066,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Loading DB, duplicated key (%s) found! Unrecoverable error, exiting now.\", key->ptr)",
          "old_line_content": "        loadedkeys++;",
          "new_line_content": "            redisLog(REDIS_WARNING,\"Loading DB, duplicated key (%s) found! Unrecoverable error, exiting now.\", key->ptr);",
          "content_same": false
        },
        {
          "line": 4067,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "        /* Set the expire time if needed */",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 4071,
          "old_api": null,
          "new_api": "setExpire",
          "old_text": null,
          "new_text": "setExpire(db,key,expiretime)",
          "old_line_content": "",
          "new_line_content": "        if (expiretime != -1) setExpire(db,key,expiretime);",
          "content_same": false
        },
        {
          "line": 4081,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(d,key)",
          "old_line_content": "            if (de) {",
          "new_line_content": "            dictEntry *de = dictFind(d,key);",
          "content_same": false
        },
        {
          "line": 4088,
          "old_api": null,
          "new_api": "vmSwapObjectBlocking",
          "old_text": null,
          "new_text": "vmSwapObjectBlocking(key,val)",
          "old_line_content": "            }",
          "new_line_content": "                if (vmSwapObjectBlocking(key,val) == REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 4089,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "            continue;",
          "new_line_content": "                    dictGetEntryVal(de) = NULL;",
          "content_same": false
        },
        {
          "line": 4099,
          "old_api": null,
          "new_api": "vmSwapOneObjectBlocking",
          "old_text": null,
          "new_text": "vmSwapOneObjectBlocking()",
          "old_line_content": "                swap_all_values = 1; /* We are already using too much mem */",
          "new_line_content": "                if (vmSwapOneObjectBlocking() == REDIS_ERR) break;",
          "content_same": false
        },
        {
          "line": 4101,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "    }",
          "new_line_content": "            if (zmalloc_used_memory() > server.vm_max_memory)",
          "content_same": false
        },
        {
          "line": 4105,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "eoferr: /* unexpected end of file is handled here with a fatal exit */",
          "new_line_content": "    fclose(fp);",
          "content_same": false
        },
        {
          "line": 4109,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Short read or OOM loading DB. Unrecoverable error, aborting now.\")",
          "old_line_content": "}",
          "new_line_content": "    redisLog(REDIS_WARNING,\"Short read or OOM loading DB. Unrecoverable error, aborting now.\");",
          "content_same": false
        },
        {
          "line": 4110,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "",
          "new_line_content": "    exit(1);",
          "content_same": false
        },
        {
          "line": 4117,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(c->argv[1]->ptr, server.requirepass)",
          "old_line_content": "    } else {",
          "new_line_content": "    if (!server.requirepass || !strcmp(c->argv[1]->ptr, server.requirepass)) {",
          "content_same": false
        },
        {
          "line": 4122,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "",
          "new_line_content": "      addReplySds(c,sdscatprintf(sdsempty(),\"-ERR invalid password\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 4127,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.pong)",
          "old_line_content": "static void echoCommand(redisClient *c) {",
          "new_line_content": "    addReply(c,shared.pong);",
          "content_same": false
        },
        {
          "line": 4131,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,c->argv[1])",
          "old_line_content": "/*=================================== Strings =============================== */",
          "new_line_content": "    addReplyBulk(c,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4144,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"-ERR invalid expire time in SETEX\\r\\n\")",
          "old_line_content": "    }",
          "new_line_content": "            addReplySds(c,sdsnew(\"-ERR invalid expire time in SETEX\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 4149,
          "old_api": null,
          "new_api": "deleteIfVolatile",
          "old_text": null,
          "new_text": "deleteIfVolatile(c->db,key)",
          "old_line_content": "        if (!nx) {",
          "new_line_content": "    if (nx) deleteIfVolatile(c->db,key);",
          "content_same": false
        },
        {
          "line": 4150,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(c->db->dict,key,val)",
          "old_line_content": "            /* If the key is about a swapped value, we want a new key object",
          "new_line_content": "    retval = dictAdd(c->db->dict,key,val);",
          "content_same": false
        },
        {
          "line": 4158,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(key)",
          "old_line_content": "        } else {",
          "new_line_content": "                incrRefCount(key);",
          "content_same": false
        },
        {
          "line": 4160,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(val)",
          "old_line_content": "            return;",
          "new_line_content": "            incrRefCount(val);",
          "content_same": false
        },
        {
          "line": 4162,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "    } else {",
          "new_line_content": "            addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 4166,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(key)",
          "old_line_content": "    server.dirty++;",
          "new_line_content": "        incrRefCount(key);",
          "content_same": false
        },
        {
          "line": 4170,
          "old_api": null,
          "new_api": "removeExpire",
          "old_text": null,
          "new_text": "removeExpire(c->db,key)",
          "old_line_content": "}",
          "new_line_content": "    removeExpire(c->db,key);",
          "content_same": false
        },
        {
          "line": 4171,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "",
          "new_line_content": "    if (expire) setExpire(c->db,key,time(NULL)+seconds);",
          "content_same": false
        },
        {
          "line": 4172,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, nx ? shared.cone : shared.ok)",
          "old_line_content": "static void setCommand(redisClient *c) {",
          "new_line_content": "    addReply(c, nx ? shared.cone : shared.ok);",
          "content_same": false
        },
        {
          "line": 4176,
          "old_api": null,
          "new_api": "setGenericCommand",
          "old_text": null,
          "new_text": "setGenericCommand(c,0,c->argv[1],c->argv[2],NULL)",
          "old_line_content": "static void setnxCommand(redisClient *c) {",
          "new_line_content": "    setGenericCommand(c,0,c->argv[1],c->argv[2],NULL);",
          "content_same": false
        },
        {
          "line": 4180,
          "old_api": null,
          "new_api": "setGenericCommand",
          "old_text": null,
          "new_text": "setGenericCommand(c,1,c->argv[1],c->argv[2],NULL)",
          "old_line_content": "static void setexCommand(redisClient *c) {",
          "new_line_content": "    setGenericCommand(c,1,c->argv[1],c->argv[2],NULL);",
          "content_same": false
        },
        {
          "line": 4184,
          "old_api": null,
          "new_api": "setGenericCommand",
          "old_text": null,
          "new_text": "setGenericCommand(c,0,c->argv[1],c->argv[3],c->argv[2])",
          "old_line_content": "static int getGenericCommand(redisClient *c) {",
          "new_line_content": "    setGenericCommand(c,0,c->argv[1],c->argv[3],c->argv[2]);",
          "content_same": false
        },
        {
          "line": 4190,
          "old_api": null,
          "new_api": "lookupKeyReadOrReply",
          "old_text": null,
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)",
          "old_line_content": "    if (o->type != REDIS_STRING) {",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)) == NULL)",
          "content_same": false
        },
        {
          "line": 4197,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,o)",
          "old_line_content": "}",
          "new_line_content": "        addReplyBulk(c,o);",
          "content_same": false
        },
        {
          "line": 4203,
          "old_api": null,
          "new_api": "getGenericCommand",
          "old_text": null,
          "new_text": "getGenericCommand(c)",
          "old_line_content": "static void getsetCommand(redisClient *c) {",
          "new_line_content": "    getGenericCommand(c);",
          "content_same": false
        },
        {
          "line": 4207,
          "old_api": null,
          "new_api": "getGenericCommand",
          "old_text": null,
          "new_text": "getGenericCommand(c)",
          "old_line_content": "    } else {",
          "new_line_content": "    if (getGenericCommand(c) == REDIS_ERR) return;",
          "content_same": false
        },
        {
          "line": 4209,
          "old_api": null,
          "new_api": "dictReplace",
          "old_text": null,
          "new_text": "dictReplace(c->db->dict,c->argv[1],c->argv[2])",
          "old_line_content": "    }",
          "new_line_content": "        dictReplace(c->db->dict,c->argv[1],c->argv[2]);",
          "content_same": false
        },
        {
          "line": 4211,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(c->argv[1])",
          "old_line_content": "    server.dirty++;",
          "new_line_content": "        incrRefCount(c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4213,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(c->argv[2])",
          "old_line_content": "}",
          "new_line_content": "    incrRefCount(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 4215,
          "old_api": null,
          "new_api": "removeExpire",
          "old_text": null,
          "new_text": "removeExpire(c->db,c->argv[1])",
          "old_line_content": "static void mgetCommand(redisClient *c) {",
          "new_line_content": "    removeExpire(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4221,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "        if (o == NULL) {",
          "new_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",c->argc-1));",
          "content_same": false
        },
        {
          "line": 4223,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[j])",
          "old_line_content": "        } else {",
          "new_line_content": "        robj *o = lookupKeyRead(c->db,c->argv[j]);",
          "content_same": false
        },
        {
          "line": 4228,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "            }",
          "new_line_content": "                addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 4230,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,o)",
          "old_line_content": "    }",
          "new_line_content": "                addReplyBulk(c,o);",
          "content_same": false
        },
        {
          "line": 4240,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"-ERR wrong number of arguments for MSET\\r\\n\")",
          "old_line_content": "    /* Handle the NX flag. The MSETNX semantic is to return zero and don't",
          "new_line_content": "        addReplySds(c,sdsnew(\"-ERR wrong number of arguments for MSET\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 4247,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[j])",
          "old_line_content": "        }",
          "new_line_content": "            if (lookupKeyWrite(c->db,c->argv[j]) != NULL) {",
          "content_same": false
        },
        {
          "line": 4253,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.czero)",
          "old_line_content": "",
          "new_line_content": "        addReply(c, shared.czero);",
          "content_same": false
        },
        {
          "line": 4267,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(c->argv[j+1])",
          "old_line_content": "    }",
          "new_line_content": "            incrRefCount(c->argv[j+1]);",
          "content_same": false
        },
        {
          "line": 4272,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, nx ? shared.cone : shared.ok)",
          "old_line_content": "static void msetCommand(redisClient *c) {",
          "new_line_content": "    addReply(c, nx ? shared.cone : shared.ok);",
          "content_same": false
        },
        {
          "line": 4276,
          "old_api": null,
          "new_api": "msetGenericCommand",
          "old_text": null,
          "new_text": "msetGenericCommand(c,0)",
          "old_line_content": "static void msetnxCommand(redisClient *c) {",
          "new_line_content": "    msetGenericCommand(c,0);",
          "content_same": false
        },
        {
          "line": 4280,
          "old_api": null,
          "new_api": "msetGenericCommand",
          "old_text": null,
          "new_text": "msetGenericCommand(c,1)",
          "old_line_content": "static void incrDecrCommand(redisClient *c, long long incr) {",
          "new_line_content": "    msetGenericCommand(c,1);",
          "content_same": false
        },
        {
          "line": 4288,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "",
          "new_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4289,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,REDIS_STRING)",
          "old_line_content": "    value += incr;",
          "new_line_content": "    if (o != NULL && checkType(c,o,REDIS_STRING)) return;",
          "content_same": false
        },
        {
          "line": 4293,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "    if (retval == DICT_ERR) {",
          "new_line_content": "    o = createObject(REDIS_STRING,sdscatprintf(sdsempty(),\"%lld\",value));",
          "content_same": false
        },
        {
          "line": 4298,
          "old_api": null,
          "new_api": "removeExpire",
          "old_text": null,
          "new_text": "removeExpire(c->db,c->argv[1])",
          "old_line_content": "    }",
          "new_line_content": "        removeExpire(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4303,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.colon)",
          "old_line_content": "}",
          "new_line_content": "    addReply(c,shared.colon);",
          "content_same": false
        },
        {
          "line": 4304,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,o)",
          "old_line_content": "",
          "new_line_content": "    addReply(c,o);",
          "content_same": false
        },
        {
          "line": 4305,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.crlf)",
          "old_line_content": "static void incrCommand(redisClient *c) {",
          "new_line_content": "    addReply(c,shared.crlf);",
          "content_same": false
        },
        {
          "line": 4309,
          "old_api": null,
          "new_api": "incrDecrCommand",
          "old_text": null,
          "new_text": "incrDecrCommand(c,1)",
          "old_line_content": "static void decrCommand(redisClient *c) {",
          "new_line_content": "    incrDecrCommand(c,1);",
          "content_same": false
        },
        {
          "line": 4313,
          "old_api": null,
          "new_api": "incrDecrCommand",
          "old_text": null,
          "new_text": "incrDecrCommand(c,-1)",
          "old_line_content": "static void incrbyCommand(redisClient *c) {",
          "new_line_content": "    incrDecrCommand(c,-1);",
          "content_same": false
        },
        {
          "line": 4319,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL)",
          "old_line_content": "",
          "new_line_content": "    if (getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL) != REDIS_OK) return;",
          "content_same": false
        },
        {
          "line": 4320,
          "old_api": null,
          "new_api": "incrDecrCommand",
          "old_text": null,
          "new_text": "incrDecrCommand(c,incr)",
          "old_line_content": "static void decrbyCommand(redisClient *c) {",
          "new_line_content": "    incrDecrCommand(c,incr);",
          "content_same": false
        },
        {
          "line": 4326,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL)",
          "old_line_content": "",
          "new_line_content": "    if (getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL) != REDIS_OK) return;",
          "content_same": false
        },
        {
          "line": 4327,
          "old_api": null,
          "new_api": "incrDecrCommand",
          "old_text": null,
          "new_text": "incrDecrCommand(c,-incr)",
          "old_line_content": "static void appendCommand(redisClient *c) {",
          "new_line_content": "    incrDecrCommand(c,-incr);",
          "content_same": false
        },
        {
          "line": 4339,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(c->argv[1])",
          "old_line_content": "    } else {",
          "new_line_content": "        incrRefCount(c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4340,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(c->argv[2])",
          "old_line_content": "        dictEntry *de;",
          "new_line_content": "        incrRefCount(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 4341,
          "old_api": null,
          "new_api": "stringObjectLen",
          "old_text": null,
          "new_text": "stringObjectLen(c->argv[2])",
          "old_line_content": "",
          "new_line_content": "        totlen = stringObjectLen(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 4346,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(de != NULL)",
          "old_line_content": "        if (o->type != REDIS_STRING) {",
          "new_line_content": "        assert(de != NULL);",
          "content_same": false
        },
        {
          "line": 4348,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "            return;",
          "new_line_content": "        o = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 4350,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "        /* If the object is specially encoded or shared we have to make",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 4358,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(decoded->ptr)",
          "old_line_content": "        }",
          "new_line_content": "            o = createStringObject(decoded->ptr, sdslen(decoded->ptr));",
          "content_same": false
        },
        {
          "line": 4359,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(decoded)",
          "old_line_content": "        /* APPEND! */",
          "new_line_content": "            decrRefCount(decoded);",
          "content_same": false
        },
        {
          "line": 4360,
          "old_api": null,
          "new_api": "dictReplace",
          "old_text": null,
          "new_text": "dictReplace(c->db->dict,c->argv[1],o)",
          "old_line_content": "        if (c->argv[2]->encoding == REDIS_ENCODING_RAW) {",
          "new_line_content": "            dictReplace(c->db->dict,c->argv[1],o);",
          "content_same": false
        },
        {
          "line": 4365,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->argv[2]->ptr)",
          "old_line_content": "                (unsigned long) c->argv[2]->ptr);",
          "new_line_content": "                c->argv[2]->ptr, sdslen(c->argv[2]->ptr));",
          "content_same": false
        },
        {
          "line": 4373,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "static void substrCommand(redisClient *c) {",
          "new_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\":%lu\\r\\n\",(unsigned long)totlen));",
          "content_same": false
        },
        {
          "line": 4378,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[2]->ptr)",
          "old_line_content": "    sds range;",
          "new_line_content": "    long start = atoi(c->argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 4379,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[3]->ptr)",
          "old_line_content": "",
          "new_line_content": "    long end = atoi(c->argv[3]->ptr);",
          "content_same": false
        },
        {
          "line": 4386,
          "old_api": null,
          "new_api": "getDecodedObject",
          "old_text": null,
          "new_text": "getDecodedObject(o)",
          "old_line_content": "    /* convert negative indexes */",
          "new_line_content": "    o = getDecodedObject(o);",
          "content_same": false
        },
        {
          "line": 4387,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(o->ptr)",
          "old_line_content": "    if (start < 0) start = strlen+start;",
          "new_line_content": "    strlen = sdslen(o->ptr);",
          "content_same": false
        },
        {
          "line": 4398,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "    }",
          "new_line_content": "        addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 4399,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(o)",
          "old_line_content": "    if ((size_t)end >= strlen) end = strlen-1;",
          "new_line_content": "        decrRefCount(o);",
          "content_same": false
        },
        {
          "line": 4408,
          "old_api": null,
          "new_api": "addReplySds",
          "old_text": null,
          "new_text": "addReplySds(c,range)",
          "old_line_content": "}",
          "new_line_content": "    addReplySds(c,range);",
          "content_same": false
        },
        {
          "line": 4409,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.crlf)",
          "old_line_content": "",
          "new_line_content": "    addReply(c,shared.crlf);",
          "content_same": false
        },
        {
          "line": 4410,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(o)",
          "old_line_content": "/* ========================= Type agnostic commands ========================= */",
          "new_line_content": "    decrRefCount(o);",
          "content_same": false
        },
        {
          "line": 4419,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(c->db,c->argv[j])",
          "old_line_content": "        }",
          "new_line_content": "        if (deleteKey(c->db,c->argv[j])) {",
          "content_same": false
        },
        {
          "line": 4424,
          "old_api": null,
          "new_api": "addReplyLong",
          "old_text": null,
          "new_text": "addReplyLong(c,deleted)",
          "old_line_content": "static void existsCommand(redisClient *c) {",
          "new_line_content": "    addReplyLong(c,deleted);",
          "content_same": false
        },
        {
          "line": 4428,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[1])",
          "old_line_content": "static void selectCommand(redisClient *c) {",
          "new_line_content": "    addReply(c,lookupKeyRead(c->db,c->argv[1]) ? shared.cone : shared.czero);",
          "content_same": false
        },
        {
          "line": 4435,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"-ERR invalid DB index\\r\\n\")",
          "old_line_content": "    }",
          "new_line_content": "        addReplySds(c,sdsnew(\"-ERR invalid DB index\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 4437,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "",
          "new_line_content": "        addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 4446,
          "old_api": null,
          "new_api": "dictGetRandomKey",
          "old_text": null,
          "new_text": "dictGetRandomKey(c->db->dict)",
          "old_line_content": "",
          "new_line_content": "        de = dictGetRandomKey(c->db->dict);",
          "content_same": false
        },
        {
          "line": 4447,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "    if (de == NULL) {",
          "new_line_content": "        if (!de || expireIfNeeded(c->db,dictGetEntryKey(de)) == 0) break;",
          "content_same": false
        },
        {
          "line": 4451,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "",
          "new_line_content": "        addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 4457,
          "old_api": null,
          "new_api": "dupStringObject",
          "old_text": null,
          "new_text": "dupStringObject(key)",
          "old_line_content": "    } else {",
          "new_line_content": "        key = dupStringObject(key);",
          "content_same": false
        },
        {
          "line": 4459,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(key)",
          "old_line_content": "    }",
          "new_line_content": "        decrRefCount(key);",
          "content_same": false
        },
        {
          "line": 4461,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,key)",
          "old_line_content": "",
          "new_line_content": "        addReplyBulk(c,key);",
          "content_same": false
        },
        {
          "line": 4469,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(pattern)",
          "old_line_content": "",
          "new_line_content": "    int plen = sdslen(pattern);",
          "content_same": false
        },
        {
          "line": 4475,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(lenobj)",
          "old_line_content": "",
          "new_line_content": "    decrRefCount(lenobj);",
          "content_same": false
        },
        {
          "line": 4476,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "        sds key = keyobj->ptr;",
          "new_line_content": "    while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 4477,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "        if ((pattern[0] == '*' && pattern[1] == '\\0') ||",
          "new_line_content": "        robj *keyobj = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 4481,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(key)",
          "old_line_content": "                numkeys++;",
          "new_line_content": "            stringmatchlen(pattern,plen,key,sdslen(key),0)) {",
          "content_same": false
        },
        {
          "line": 4482,
          "old_api": null,
          "new_api": "expireIfNeeded",
          "old_text": null,
          "new_text": "expireIfNeeded(c->db,keyobj)",
          "old_line_content": "            }",
          "new_line_content": "            if (expireIfNeeded(c->db,keyobj) == 0) {",
          "content_same": false
        },
        {
          "line": 4483,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,keyobj)",
          "old_line_content": "        }",
          "new_line_content": "                addReplyBulk(c,keyobj);",
          "content_same": false
        },
        {
          "line": 4488,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 4489,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "static void dbsizeCommand(redisClient *c) {",
          "new_line_content": "    lenobj->ptr = sdscatprintf(sdsempty(),\"*%lu\\r\\n\",numkeys);",
          "content_same": false
        },
        {
          "line": 4493,
          "old_api": null,
          "new_api": "addReplySds",
          "old_text": null,
          "new_text": "addReplySds(c,\n        sdscatprintf(sdsempty(),\":%lu\\r\\n\",dictSize(c->db->dict)))",
          "old_line_content": "",
          "new_line_content": "    addReplySds(c,",
          "content_same": false
        },
        {
          "line": 4494,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(c->db->dict)",
          "old_line_content": "static void lastsaveCommand(redisClient *c) {",
          "new_line_content": "        sdscatprintf(sdsempty(),\":%lu\\r\\n\",dictSize(c->db->dict)));",
          "content_same": false
        },
        {
          "line": 4498,
          "old_api": null,
          "new_api": "addReplySds",
          "old_text": null,
          "new_text": "addReplySds(c,\n        sdscatprintf(sdsempty(),\":%lu\\r\\n\",server.lastsave))",
          "old_line_content": "",
          "new_line_content": "    addReplySds(c,",
          "content_same": false
        },
        {
          "line": 4499,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "static void typeCommand(redisClient *c) {",
          "new_line_content": "        sdscatprintf(sdsempty(),\":%lu\\r\\n\",server.lastsave));",
          "content_same": false
        },
        {
          "line": 4506,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[1])",
          "old_line_content": "    } else {",
          "new_line_content": "    o = lookupKeyRead(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4519,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(type)",
          "old_line_content": "",
          "new_line_content": "    addReplySds(c,sdsnew(type));",
          "content_same": false
        },
        {
          "line": 4520,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.crlf)",
          "old_line_content": "static void saveCommand(redisClient *c) {",
          "new_line_content": "    addReply(c,shared.crlf);",
          "content_same": false
        },
        {
          "line": 4529,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "    }",
          "new_line_content": "        addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 4531,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.err)",
          "old_line_content": "",
          "new_line_content": "        addReply(c,shared.err);",
          "content_same": false
        },
        {
          "line": 4540,
          "old_api": null,
          "new_api": "rdbSaveBackground",
          "old_text": null,
          "new_text": "rdbSaveBackground(server.dbfilename)",
          "old_line_content": "    } else {",
          "new_line_content": "    if (rdbSaveBackground(server.dbfilename) == REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 4542,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(status)",
          "old_line_content": "    }",
          "new_line_content": "        addReplySds(c,sdsnew(status));",
          "content_same": false
        },
        {
          "line": 4544,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.err)",
          "old_line_content": "",
          "new_line_content": "        addReply(c,shared.err);",
          "content_same": false
        },
        {
          "line": 4549,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"User requested shutdown, saving DB...\")",
          "old_line_content": "       overwrite the synchronous saving did by SHUTDOWN. */",
          "new_line_content": "    redisLog(REDIS_WARNING,\"User requested shutdown, saving DB...\");",
          "content_same": false
        },
        {
          "line": 4554,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"There is a live saving child. Killing it!\")",
          "old_line_content": "    }",
          "new_line_content": "        redisLog(REDIS_WARNING,\"There is a live saving child. Killing it!\");",
          "content_same": false
        },
        {
          "line": 4555,
          "old_api": null,
          "new_api": "kill",
          "old_text": null,
          "new_text": "kill(server.bgsavechildpid,SIGKILL)",
          "old_line_content": "    if (server.appendonly) {",
          "new_line_content": "        kill(server.bgsavechildpid,SIGKILL);",
          "content_same": false
        },
        {
          "line": 4556,
          "old_api": null,
          "new_api": "rdbRemoveTempFile",
          "old_text": null,
          "new_text": "rdbRemoveTempFile(server.bgsavechildpid)",
          "old_line_content": "        /* Append only file: fsync() the AOF and exit */",
          "new_line_content": "        rdbRemoveTempFile(server.bgsavechildpid);",
          "content_same": false
        },
        {
          "line": 4560,
          "old_api": null,
          "new_api": "fsync",
          "old_text": null,
          "new_text": "fsync(server.appendfd)",
          "old_line_content": "    } else {",
          "new_line_content": "        fsync(server.appendfd);",
          "content_same": false
        },
        {
          "line": 4561,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(server.vm_swap_file)",
          "old_line_content": "        /* Snapshotting. Perform a SYNC SAVE and exit */",
          "new_line_content": "        if (server.vm_enabled) unlink(server.vm_swap_file);",
          "content_same": false
        },
        {
          "line": 4568,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "        } else {",
          "new_line_content": "            redisLog(REDIS_WARNING,\"%zu bytes used at exit\",zmalloc_used_memory());",
          "content_same": false
        },
        {
          "line": 4569,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Server exit now, bye bye...\")",
          "old_line_content": "            /* Ooops.. error saving! The best we can do is to continue",
          "new_line_content": "            redisLog(REDIS_WARNING,\"Server exit now, bye bye...\");",
          "content_same": false
        },
        {
          "line": 4570,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(0)",
          "old_line_content": "             * operating. Note that if there was a background saving process,",
          "new_line_content": "            exit(0);",
          "content_same": false
        },
        {
          "line": 4577,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Error trying to save the DB, can't exit\")",
          "old_line_content": "        }",
          "new_line_content": "            redisLog(REDIS_WARNING,\"Error trying to save the DB, can't exit\");",
          "content_same": false
        },
        {
          "line": 4578,
          "old_api": null,
          "new_api": "addReplySds",
          "old_text": null,
          "new_text": "addReplySds(c,\n                sdsnew(\"-ERR can't quit, problems saving the DB\\r\\n\"))",
          "old_line_content": "    }",
          "new_line_content": "            addReplySds(c,",
          "content_same": false
        },
        {
          "line": 4579,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"-ERR can't quit, problems saving the DB\\r\\n\")",
          "old_line_content": "}",
          "new_line_content": "                sdsnew(\"-ERR can't quit, problems saving the DB\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 4588,
          "old_api": null,
          "new_api": "sdscmp",
          "old_text": null,
          "new_text": "sdscmp(c->argv[1]->ptr,c->argv[2]->ptr)",
          "old_line_content": "    }",
          "new_line_content": "    if (sdscmp(c->argv[1]->ptr,c->argv[2]->ptr) == 0) {",
          "content_same": false
        },
        {
          "line": 4589,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.sameobjecterr)",
          "old_line_content": "",
          "new_line_content": "        addReply(c,shared.sameobjecterr);",
          "content_same": false
        },
        {
          "line": 4596,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(o)",
          "old_line_content": "        if (nx) {",
          "new_line_content": "    incrRefCount(o);",
          "content_same": false
        },
        {
          "line": 4600,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(o)",
          "old_line_content": "        }",
          "new_line_content": "            decrRefCount(o);",
          "content_same": false
        },
        {
          "line": 4604,
          "old_api": null,
          "new_api": "dictReplace",
          "old_text": null,
          "new_text": "dictReplace(c->db->dict,c->argv[2],o)",
          "old_line_content": "    }",
          "new_line_content": "        dictReplace(c->db->dict,c->argv[2],o);",
          "content_same": false
        },
        {
          "line": 4606,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(c->argv[2])",
          "old_line_content": "    server.dirty++;",
          "new_line_content": "        incrRefCount(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 4608,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(c->db,c->argv[1])",
          "old_line_content": "}",
          "new_line_content": "    deleteKey(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4610,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,nx ? shared.cone : shared.ok)",
          "old_line_content": "static void renameCommand(redisClient *c) {",
          "new_line_content": "    addReply(c,nx ? shared.cone : shared.ok);",
          "content_same": false
        },
        {
          "line": 4614,
          "old_api": null,
          "new_api": "renameGenericCommand",
          "old_text": null,
          "new_text": "renameGenericCommand(c,0)",
          "old_line_content": "static void renamenxCommand(redisClient *c) {",
          "new_line_content": "    renameGenericCommand(c,0);",
          "content_same": false
        },
        {
          "line": 4618,
          "old_api": null,
          "new_api": "renameGenericCommand",
          "old_text": null,
          "new_text": "renameGenericCommand(c,1)",
          "old_line_content": "static void moveCommand(redisClient *c) {",
          "new_line_content": "    renameGenericCommand(c,1);",
          "content_same": false
        },
        {
          "line": 4629,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[2]->ptr)",
          "old_line_content": "    }",
          "new_line_content": "    if (selectDb(c,atoi(c->argv[2]->ptr)) == REDIS_ERR) {",
          "content_same": false
        },
        {
          "line": 4630,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.outofrangeerr)",
          "old_line_content": "    dst = c->db;",
          "new_line_content": "        addReply(c,shared.outofrangeerr);",
          "content_same": false
        },
        {
          "line": 4634,
          "old_api": null,
          "new_api": "selectDb",
          "old_text": null,
          "new_text": "selectDb(c,srcid)",
          "old_line_content": "     * DB as the source DB it is probably an error. */",
          "new_line_content": "    selectDb(c,srcid); /* Back to the source DB */",
          "content_same": false
        },
        {
          "line": 4639,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.sameobjecterr)",
          "old_line_content": "",
          "new_line_content": "        addReply(c,shared.sameobjecterr);",
          "content_same": false
        },
        {
          "line": 4644,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "        return;",
          "new_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4646,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 4651,
          "old_api": null,
          "new_api": "deleteIfVolatile",
          "old_text": null,
          "new_text": "deleteIfVolatile(dst,c->argv[1])",
          "old_line_content": "        return;",
          "new_line_content": "    deleteIfVolatile(dst,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4652,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(dst->dict,c->argv[1],o)",
          "old_line_content": "    }",
          "new_line_content": "    if (dictAdd(dst->dict,c->argv[1],o) == DICT_ERR) {",
          "content_same": false
        },
        {
          "line": 4656,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(c->argv[1])",
          "old_line_content": "    /* OK! key moved, free the entry in the source DB */",
          "new_line_content": "    incrRefCount(c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4660,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(src,c->argv[1])",
          "old_line_content": "}",
          "new_line_content": "    deleteKey(src,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4662,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.cone)",
          "old_line_content": "/* =================================== Lists ================================ */",
          "new_line_content": "    addReply(c,shared.cone);",
          "content_same": false
        },
        {
          "line": 4672,
          "old_api": null,
          "new_api": "handleClientsWaitingListPush",
          "old_text": null,
          "new_text": "handleClientsWaitingListPush(c,c->argv[1],c->argv[2])",
          "old_line_content": "        }",
          "new_line_content": "        if (handleClientsWaitingListPush(c,c->argv[1],c->argv[2])) {",
          "content_same": false
        },
        {
          "line": 4679,
          "old_api": null,
          "new_api": "listAddNodeHead",
          "old_text": null,
          "new_text": "listAddNodeHead(list,c->argv[2])",
          "old_line_content": "        }",
          "new_line_content": "            listAddNodeHead(list,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 4683,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(c->db->dict,c->argv[1],lobj)",
          "old_line_content": "    } else {",
          "new_line_content": "        dictAdd(c->db->dict,c->argv[1],lobj);",
          "content_same": false
        },
        {
          "line": 4684,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(c->argv[1])",
          "old_line_content": "        if (lobj->type != REDIS_LIST) {",
          "new_line_content": "        incrRefCount(c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4691,
          "old_api": null,
          "new_api": "handleClientsWaitingListPush",
          "old_text": null,
          "new_text": "handleClientsWaitingListPush(c,c->argv[1],c->argv[2])",
          "old_line_content": "        }",
          "new_line_content": "        if (handleClientsWaitingListPush(c,c->argv[1],c->argv[2])) {",
          "content_same": false
        },
        {
          "line": 4692,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.cone)",
          "old_line_content": "        list = lobj->ptr;",
          "new_line_content": "            addReply(c,shared.cone);",
          "content_same": false
        },
        {
          "line": 4697,
          "old_api": null,
          "new_api": "listAddNodeHead",
          "old_text": null,
          "new_text": "listAddNodeHead(list,c->argv[2])",
          "old_line_content": "        }",
          "new_line_content": "            listAddNodeHead(list,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 4699,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(list,c->argv[2])",
          "old_line_content": "    }",
          "new_line_content": "            listAddNodeTail(list,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 4704,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(list)",
          "old_line_content": "static void lpushCommand(redisClient *c) {",
          "new_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\":%d\\r\\n\",listLength(list)));",
          "content_same": false
        },
        {
          "line": 4708,
          "old_api": null,
          "new_api": "pushGenericCommand",
          "old_text": null,
          "new_text": "pushGenericCommand(c,REDIS_HEAD)",
          "old_line_content": "static void rpushCommand(redisClient *c) {",
          "new_line_content": "    pushGenericCommand(c,REDIS_HEAD);",
          "content_same": false
        },
        {
          "line": 4712,
          "old_api": null,
          "new_api": "pushGenericCommand",
          "old_text": null,
          "new_text": "pushGenericCommand(c,REDIS_TAIL)",
          "old_line_content": "static void llenCommand(redisClient *c) {",
          "new_line_content": "    pushGenericCommand(c,REDIS_TAIL);",
          "content_same": false
        },
        {
          "line": 4719,
          "old_api": null,
          "new_api": "lookupKeyReadOrReply",
          "old_text": null,
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "old_line_content": "    l = o->ptr;",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "content_same": false
        },
        {
          "line": 4723,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(l)",
          "old_line_content": "static void lindexCommand(redisClient *c) {",
          "new_line_content": "    addReplyUlong(c,listLength(l));",
          "content_same": false
        },
        {
          "line": 4728,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[2]->ptr)",
          "old_line_content": "",
          "new_line_content": "    int index = atoi(c->argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 4732,
          "old_api": null,
          "new_api": "lookupKeyReadOrReply",
          "old_text": null,
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)",
          "old_line_content": "",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "content_same": false
        },
        {
          "line": 4736,
          "old_api": null,
          "new_api": "listIndex",
          "old_text": null,
          "new_text": "listIndex(list, index)",
          "old_line_content": "    } else {",
          "new_line_content": "    ln = listIndex(list, index);",
          "content_same": false
        },
        {
          "line": 4740,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(ln)",
          "old_line_content": "}",
          "new_line_content": "        robj *ele = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 4741,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,ele)",
          "old_line_content": "",
          "new_line_content": "        addReplyBulk(c,ele);",
          "content_same": false
        },
        {
          "line": 4747,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[2]->ptr)",
          "old_line_content": "",
          "new_line_content": "    int index = atoi(c->argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 4751,
          "old_api": null,
          "new_api": "lookupKeyWriteOrReply",
          "old_text": null,
          "new_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.nokeyerr)",
          "old_line_content": "",
          "new_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.nokeyerr)) == NULL ||",
          "content_same": false
        },
        {
          "line": 4755,
          "old_api": null,
          "new_api": "listIndex",
          "old_text": null,
          "new_text": "listIndex(list, index)",
          "old_line_content": "    } else {",
          "new_line_content": "    ln = listIndex(list, index);",
          "content_same": false
        },
        {
          "line": 4757,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.outofrangeerr)",
          "old_line_content": "",
          "new_line_content": "        addReply(c,shared.outofrangeerr);",
          "content_same": false
        },
        {
          "line": 4762,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(ln)",
          "old_line_content": "        server.dirty++;",
          "new_line_content": "        listNodeValue(ln) = c->argv[3];",
          "content_same": false
        },
        {
          "line": 4763,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(c->argv[3])",
          "old_line_content": "    }",
          "new_line_content": "        incrRefCount(c->argv[3]);",
          "content_same": false
        },
        {
          "line": 4764,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "}",
          "new_line_content": "        addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 4774,
          "old_api": null,
          "new_api": "lookupKeyWriteOrReply",
          "old_text": null,
          "new_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.nullbulk)",
          "old_line_content": "",
          "new_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "content_same": false
        },
        {
          "line": 4775,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,REDIS_LIST)",
          "old_line_content": "    if (where == REDIS_HEAD)",
          "new_line_content": "        checkType(c,o,REDIS_LIST)) return;",
          "content_same": false
        },
        {
          "line": 4779,
          "old_api": null,
          "new_api": "listFirst",
          "old_text": null,
          "new_text": "listFirst(list)",
          "old_line_content": "",
          "new_line_content": "        ln = listFirst(list);",
          "content_same": false
        },
        {
          "line": 4787,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,ele)",
          "old_line_content": "        server.dirty++;",
          "new_line_content": "        addReplyBulk(c,ele);",
          "content_same": false
        },
        {
          "line": 4788,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(list,ln)",
          "old_line_content": "    }",
          "new_line_content": "        listDelNode(list,ln);",
          "content_same": false
        },
        {
          "line": 4789,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(c->db,c->argv[1])",
          "old_line_content": "}",
          "new_line_content": "        if (listLength(list) == 0) deleteKey(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4795,
          "old_api": null,
          "new_api": "popGenericCommand",
          "old_text": null,
          "new_text": "popGenericCommand(c,REDIS_HEAD)",
          "old_line_content": "static void rpopCommand(redisClient *c) {",
          "new_line_content": "    popGenericCommand(c,REDIS_HEAD);",
          "content_same": false
        },
        {
          "line": 4799,
          "old_api": null,
          "new_api": "popGenericCommand",
          "old_text": null,
          "new_text": "popGenericCommand(c,REDIS_TAIL)",
          "old_line_content": "static void lrangeCommand(redisClient *c) {",
          "new_line_content": "    popGenericCommand(c,REDIS_TAIL);",
          "content_same": false
        },
        {
          "line": 4804,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[2]->ptr)",
          "old_line_content": "    int rangelen, j;",
          "new_line_content": "    int start = atoi(c->argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 4805,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[3]->ptr)",
          "old_line_content": "    list *list;",
          "new_line_content": "    int end = atoi(c->argv[3]->ptr);",
          "content_same": false
        },
        {
          "line": 4813,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,REDIS_LIST)",
          "old_line_content": "",
          "new_line_content": "         || checkType(c,o,REDIS_LIST)) return;",
          "content_same": false
        },
        {
          "line": 4815,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(list)",
          "old_line_content": "    if (start < 0) start = llen+start;",
          "new_line_content": "    llen = listLength(list);",
          "content_same": false
        },
        {
          "line": 4826,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.emptymultibulk)",
          "old_line_content": "    if (end >= llen) end = llen-1;",
          "new_line_content": "        addReply(c,shared.emptymultibulk);",
          "content_same": false
        },
        {
          "line": 4836,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(ln)",
          "old_line_content": "    }",
          "new_line_content": "        ele = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 4837,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,ele)",
          "old_line_content": "}",
          "new_line_content": "        addReplyBulk(c,ele);",
          "content_same": false
        },
        {
          "line": 4844,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[2]->ptr)",
          "old_line_content": "    int j, ltrim, rtrim;",
          "new_line_content": "    int start = atoi(c->argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 4845,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[3]->ptr)",
          "old_line_content": "    list *list;",
          "new_line_content": "    int end = atoi(c->argv[3]->ptr);",
          "content_same": false
        },
        {
          "line": 4852,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,REDIS_LIST)",
          "old_line_content": "",
          "new_line_content": "        checkType(c,o,REDIS_LIST)) return;",
          "content_same": false
        },
        {
          "line": 4854,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(list)",
          "old_line_content": "    if (start < 0) start = llen+start;",
          "new_line_content": "    llen = listLength(list);",
          "content_same": false
        },
        {
          "line": 4875,
          "old_api": null,
          "new_api": "listFirst",
          "old_text": null,
          "new_text": "listFirst(list)",
          "old_line_content": "    for (j = 0; j < rtrim; j++) {",
          "new_line_content": "        ln = listFirst(list);",
          "content_same": false
        },
        {
          "line": 4880,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(list,ln)",
          "old_line_content": "    server.dirty++;",
          "new_line_content": "        listDelNode(list,ln);",
          "content_same": false
        },
        {
          "line": 4882,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(c->db,c->argv[1])",
          "old_line_content": "}",
          "new_line_content": "    if (listLength(list) == 0) deleteKey(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4884,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "static void lremCommand(redisClient *c) {",
          "new_line_content": "    addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 4891,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[2]->ptr)",
          "old_line_content": "",
          "new_line_content": "    int toremove = atoi(c->argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 4895,
          "old_api": null,
          "new_api": "lookupKeyWriteOrReply",
          "old_text": null,
          "new_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.czero)",
          "old_line_content": "",
          "new_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "content_same": false
        },
        {
          "line": 4896,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,REDIS_LIST)",
          "old_line_content": "    if (toremove < 0) {",
          "new_line_content": "        checkType(c,o,REDIS_LIST)) return;",
          "content_same": false
        },
        {
          "line": 4908,
          "old_api": null,
          "new_api": "equalStringObjects",
          "old_text": null,
          "new_text": "equalStringObjects(ele,c->argv[3])",
          "old_line_content": "            removed++;",
          "new_line_content": "        if (equalStringObjects(ele,c->argv[3])) {",
          "content_same": false
        },
        {
          "line": 4909,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(list,ln)",
          "old_line_content": "            if (toremove && removed == toremove) break;",
          "new_line_content": "            listDelNode(list,ln);",
          "content_same": false
        },
        {
          "line": 4916,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(c->db,c->argv[1])",
          "old_line_content": "",
          "new_line_content": "    if (listLength(list) == 0) deleteKey(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4917,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "/* This is the semantic of this command:",
          "new_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\":%d\\r\\n\",removed));",
          "content_same": false
        },
        {
          "line": 4941,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,sobj,REDIS_LIST)",
          "old_line_content": "",
          "new_line_content": "        checkType(c,sobj,REDIS_LIST)) return;",
          "content_same": false
        },
        {
          "line": 4948,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[2])",
          "old_line_content": "",
          "new_line_content": "        robj *dobj = lookupKeyWrite(c->db,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 4949,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(ln)",
          "old_line_content": "        if (dobj && dobj->type != REDIS_LIST) {",
          "new_line_content": "        robj *ele = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 4953,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 4962,
          "old_api": null,
          "new_api": "createListObject",
          "old_text": null,
          "new_text": "createListObject()",
          "old_line_content": "            }",
          "new_line_content": "                dobj = createListObject();",
          "content_same": false
        },
        {
          "line": 4963,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(c->db->dict,c->argv[2],dobj)",
          "old_line_content": "            dstlist = dobj->ptr;",
          "new_line_content": "                dictAdd(c->db->dict,c->argv[2],dobj);",
          "content_same": false
        },
        {
          "line": 4967,
          "old_api": null,
          "new_api": "listAddNodeHead",
          "old_text": null,
          "new_text": "listAddNodeHead(dstlist,ele)",
          "old_line_content": "",
          "new_line_content": "            listAddNodeHead(dstlist,ele);",
          "content_same": false
        },
        {
          "line": 4968,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(ele)",
          "old_line_content": "        /* Send the element to the client as reply as well */",
          "new_line_content": "            incrRefCount(ele);",
          "content_same": false
        },
        {
          "line": 4975,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(srclist,ln)",
          "old_line_content": "    }",
          "new_line_content": "        listDelNode(srclist,ln);",
          "content_same": false
        },
        {
          "line": 4976,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(c->db,c->argv[1])",
          "old_line_content": "}",
          "new_line_content": "        if (listLength(srclist) == 0) deleteKey(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4988,
          "old_api": null,
          "new_api": "createSetObject",
          "old_text": null,
          "new_text": "createSetObject()",
          "old_line_content": "    } else {",
          "new_line_content": "        set = createSetObject();",
          "content_same": false
        },
        {
          "line": 4989,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(c->db->dict,c->argv[1],set)",
          "old_line_content": "        if (set->type != REDIS_SET) {",
          "new_line_content": "        dictAdd(c->db->dict,c->argv[1],set);",
          "content_same": false
        },
        {
          "line": 4993,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "    }",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 4998,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(c->argv[2])",
          "old_line_content": "    } else {",
          "new_line_content": "        incrRefCount(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 5000,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.cone)",
          "old_line_content": "    }",
          "new_line_content": "        addReply(c,shared.cone);",
          "content_same": false
        },
        {
          "line": 5002,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 5010,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,set,REDIS_SET)",
          "old_line_content": "        server.dirty++;",
          "new_line_content": "        checkType(c,set,REDIS_SET)) return;",
          "content_same": false
        },
        {
          "line": 5014,
          "old_api": null,
          "new_api": "dictResize",
          "old_text": null,
          "new_text": "dictResize(set->ptr)",
          "old_line_content": "    } else {",
          "new_line_content": "        if (htNeedsResize(set->ptr)) dictResize(set->ptr);",
          "content_same": false
        },
        {
          "line": 5016,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.cone)",
          "old_line_content": "    }",
          "new_line_content": "        addReply(c,shared.cone);",
          "content_same": false
        },
        {
          "line": 5018,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 5025,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "    /* If the source key does not exist return 0, if it's of the wrong type",
          "new_line_content": "    srcset = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 5026,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[2])",
          "old_line_content": "     * raise an error */",
          "new_line_content": "    dstset = lookupKeyWrite(c->db,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 5031,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, srcset ? shared.wrongtypeerr : shared.czero)",
          "old_line_content": "    /* Error if the destination key is not a set as well */",
          "new_line_content": "        addReply(c, srcset ? shared.wrongtypeerr : shared.czero);",
          "content_same": false
        },
        {
          "line": 5036,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "    /* Remove the element from the source set */",
          "new_line_content": "        addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 5040,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(srcset->ptr,c->argv[3])",
          "old_line_content": "        return;",
          "new_line_content": "    if (dictDelete(srcset->ptr,c->argv[3]) == DICT_ERR) {",
          "content_same": false
        },
        {
          "line": 5045,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize((dict*)srcset->ptr)",
          "old_line_content": "    /* Add the element to the destination set */",
          "new_line_content": "    if (dictSize((dict*)srcset->ptr) == 0 && srcset != dstset)",
          "content_same": false
        },
        {
          "line": 5046,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(c->db,c->argv[1])",
          "old_line_content": "    if (!dstset) {",
          "new_line_content": "        deleteKey(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 5050,
          "old_api": null,
          "new_api": "createSetObject",
          "old_text": null,
          "new_text": "createSetObject()",
          "old_line_content": "    }",
          "new_line_content": "        dstset = createSetObject();",
          "content_same": false
        },
        {
          "line": 5054,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(dstset->ptr,c->argv[3],NULL)",
          "old_line_content": "}",
          "new_line_content": "    if (dictAdd(dstset->ptr,c->argv[3],NULL) == DICT_OK)",
          "content_same": false
        },
        {
          "line": 5055,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(c->argv[3])",
          "old_line_content": "",
          "new_line_content": "        incrRefCount(c->argv[3]);",
          "content_same": false
        },
        {
          "line": 5056,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.cone)",
          "old_line_content": "static void sismemberCommand(redisClient *c) {",
          "new_line_content": "    addReply(c,shared.cone);",
          "content_same": false
        },
        {
          "line": 5066,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.cone)",
          "old_line_content": "}",
          "new_line_content": "        addReply(c,shared.cone);",
          "content_same": false
        },
        {
          "line": 5068,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "static void scardCommand(redisClient *c) {",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 5075,
          "old_api": null,
          "new_api": "lookupKeyReadOrReply",
          "old_text": null,
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "old_line_content": "    s = o->ptr;",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "content_same": false
        },
        {
          "line": 5079,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(s)",
          "old_line_content": "static void spopCommand(redisClient *c) {",
          "new_line_content": "    addReplyUlong(c,dictSize(s));",
          "content_same": false
        },
        {
          "line": 5087,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,set,REDIS_SET)",
          "old_line_content": "    if (de == NULL) {",
          "new_line_content": "        checkType(c,set,REDIS_SET)) return;",
          "content_same": false
        },
        {
          "line": 5089,
          "old_api": null,
          "new_api": "dictGetRandomKey",
          "old_text": null,
          "new_text": "dictGetRandomKey(set->ptr)",
          "old_line_content": "    } else {",
          "new_line_content": "    de = dictGetRandomKey(set->ptr);",
          "content_same": false
        },
        {
          "line": 5091,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "",
          "new_line_content": "        addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 5096,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(set->ptr,ele)",
          "old_line_content": "        server.dirty++;",
          "new_line_content": "        dictDelete(set->ptr,ele);",
          "content_same": false
        },
        {
          "line": 5097,
          "old_api": null,
          "new_api": "dictResize",
          "old_text": null,
          "new_text": "dictResize(set->ptr)",
          "old_line_content": "    }",
          "new_line_content": "        if (htNeedsResize(set->ptr)) dictResize(set->ptr);",
          "content_same": false
        },
        {
          "line": 5098,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(c->db,c->argv[1])",
          "old_line_content": "}",
          "new_line_content": "        if (dictSize((dict*)set->ptr) == 0) deleteKey(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 5108,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,set,REDIS_SET)",
          "old_line_content": "    if (de == NULL) {",
          "new_line_content": "        checkType(c,set,REDIS_SET)) return;",
          "content_same": false
        },
        {
          "line": 5110,
          "old_api": null,
          "new_api": "dictGetRandomKey",
          "old_text": null,
          "new_text": "dictGetRandomKey(set->ptr)",
          "old_line_content": "    } else {",
          "new_line_content": "    de = dictGetRandomKey(set->ptr);",
          "content_same": false
        },
        {
          "line": 5112,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "",
          "new_line_content": "        addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 5114,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "    }",
          "new_line_content": "        robj *ele = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 5116,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,ele)",
          "old_line_content": "",
          "new_line_content": "        addReplyBulk(c,ele);",
          "content_same": false
        },
        {
          "line": 5123,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(*d2)",
          "old_line_content": "static void sinterGenericCommand(redisClient *c, robj **setskeys, unsigned long setsnum, robj *dstkey) {",
          "new_line_content": "    return dictSize(*d1)-dictSize(*d2);",
          "content_same": false
        },
        {
          "line": 5127,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(dict*)*setsnum)",
          "old_line_content": "    robj *lenobj = NULL, *dstset = NULL;",
          "new_line_content": "    dict **dv = zmalloc(sizeof(dict*)*setsnum);",
          "content_same": false
        },
        {
          "line": 5138,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,setskeys[j])",
          "old_line_content": "            if (dstkey) {",
          "new_line_content": "                    lookupKeyRead(c->db,setskeys[j]);",
          "content_same": false
        },
        {
          "line": 5140,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(dv)",
          "old_line_content": "                    server.dirty++;",
          "new_line_content": "            zfree(dv);",
          "content_same": false
        },
        {
          "line": 5142,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(c->db,dstkey)",
          "old_line_content": "            } else {",
          "new_line_content": "                if (deleteKey(c->db,dstkey))",
          "content_same": false
        },
        {
          "line": 5144,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "            }",
          "new_line_content": "                addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 5146,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.emptymultibulk)",
          "old_line_content": "        }",
          "new_line_content": "                addReply(c,shared.emptymultibulk);",
          "content_same": false
        },
        {
          "line": 5151,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(dv)",
          "old_line_content": "        }",
          "new_line_content": "            zfree(dv);",
          "content_same": false
        },
        {
          "line": 5152,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "        dv[j] = setobj->ptr;",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 5159,
          "old_api": null,
          "new_api": "qsort",
          "old_text": null,
          "new_text": "qsort(dv,setsnum,sizeof(dict*),qsortCompareSetsByCardinality)",
          "old_line_content": "     * since this is a multi-bulk write, but at this stage we don't know",
          "new_line_content": "    qsort(dv,setsnum,sizeof(dict*),qsortCompareSetsByCardinality);",
          "content_same": false
        },
        {
          "line": 5167,
          "old_api": null,
          "new_api": "createObject",
          "old_text": null,
          "new_text": "createObject(REDIS_STRING,NULL)",
          "old_line_content": "    } else {",
          "new_line_content": "        lenobj = createObject(REDIS_STRING,NULL);",
          "content_same": false
        },
        {
          "line": 5168,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,lenobj)",
          "old_line_content": "        /* If we have a target key where to store the resulting set",
          "new_line_content": "        addReply(c,lenobj);",
          "content_same": false
        },
        {
          "line": 5169,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(lenobj)",
          "old_line_content": "         * create this key with an empty set inside */",
          "new_line_content": "        decrRefCount(lenobj);",
          "content_same": false
        },
        {
          "line": 5173,
          "old_api": null,
          "new_api": "createSetObject",
          "old_text": null,
          "new_text": "createSetObject()",
          "old_line_content": "    /* Iterate all the elements of the first (smallest) set, and test",
          "new_line_content": "        dstset = createSetObject();",
          "content_same": false
        },
        {
          "line": 5179,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(dv[0])",
          "old_line_content": "        robj *ele;",
          "new_line_content": "    di = dictGetIterator(dv[0]);",
          "content_same": false
        },
        {
          "line": 5181,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "        for (j = 1; j < setsnum; j++)",
          "new_line_content": "    while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 5188,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "            cardinality++;",
          "new_line_content": "        ele = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 5193,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(dstset->ptr,ele,NULL)",
          "old_line_content": "    }",
          "new_line_content": "            dictAdd(dstset->ptr,ele,NULL);",
          "content_same": false
        },
        {
          "line": 5197,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "        /* Store the resulting set into the target, if the intersection",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 5204,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(c->db->dict,dstkey,dstset)",
          "old_line_content": "        } else {",
          "new_line_content": "            dictAdd(c->db->dict,dstkey,dstset);",
          "content_same": false
        },
        {
          "line": 5208,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(dstset)",
          "old_line_content": "        server.dirty++;",
          "new_line_content": "            decrRefCount(dstset);",
          "content_same": false
        },
        {
          "line": 5209,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "    } else {",
          "new_line_content": "            addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 5213,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "}",
          "new_line_content": "        lenobj->ptr = sdscatprintf(sdsempty(),\"*%lu\\r\\n\",cardinality);",
          "content_same": false
        },
        {
          "line": 5215,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(dv)",
          "old_line_content": "static void sinterCommand(redisClient *c) {",
          "new_line_content": "    zfree(dv);",
          "content_same": false
        },
        {
          "line": 5219,
          "old_api": null,
          "new_api": "sinterGenericCommand",
          "old_text": null,
          "new_text": "sinterGenericCommand(c,c->argv+1,c->argc-1,NULL)",
          "old_line_content": "static void sinterstoreCommand(redisClient *c) {",
          "new_line_content": "    sinterGenericCommand(c,c->argv+1,c->argc-1,NULL);",
          "content_same": false
        },
        {
          "line": 5223,
          "old_api": null,
          "new_api": "sinterGenericCommand",
          "old_text": null,
          "new_text": "sinterGenericCommand(c,c->argv+2,c->argc-2,c->argv[1])",
          "old_line_content": "#define REDIS_OP_UNION 0",
          "new_line_content": "    sinterGenericCommand(c,c->argv+2,c->argc-2,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 5231,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(dict*)*setsnum)",
          "old_line_content": "    robj *dstset = NULL;",
          "new_line_content": "    dict **dv = zmalloc(sizeof(dict*)*setsnum);",
          "content_same": false
        },
        {
          "line": 5241,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,setskeys[j])",
          "old_line_content": "            dv[j] = NULL;",
          "new_line_content": "                    lookupKeyWrite(c->db,setskeys[j]) :",
          "content_same": false
        },
        {
          "line": 5242,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,setskeys[j])",
          "old_line_content": "            continue;",
          "new_line_content": "                    lookupKeyRead(c->db,setskeys[j]);",
          "content_same": false
        },
        {
          "line": 5248,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(dv)",
          "old_line_content": "        }",
          "new_line_content": "            zfree(dv);",
          "content_same": false
        },
        {
          "line": 5249,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "        dv[j] = setobj->ptr;",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 5258,
          "old_api": null,
          "new_api": "createSetObject",
          "old_text": null,
          "new_text": "createSetObject()",
          "old_line_content": "     * time to the result set */",
          "new_line_content": "    dstset = createSetObject();",
          "content_same": false
        },
        {
          "line": 5266,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(dv[j])",
          "old_line_content": "            robj *ele;",
          "new_line_content": "        di = dictGetIterator(dv[j]);",
          "content_same": false
        },
        {
          "line": 5268,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "            /* dictAdd will not add the same element multiple times */",
          "new_line_content": "        while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 5274,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(dstset->ptr,ele,NULL)",
          "old_line_content": "                }",
          "new_line_content": "                if (dictAdd(dstset->ptr,ele,NULL) == DICT_OK) {",
          "content_same": false
        },
        {
          "line": 5275,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(ele)",
          "old_line_content": "            } else if (op == REDIS_OP_DIFF) {",
          "new_line_content": "                    incrRefCount(ele);",
          "content_same": false
        },
        {
          "line": 5279,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(dstset->ptr,ele)",
          "old_line_content": "            }",
          "new_line_content": "                if (dictDelete(dstset->ptr,ele) == DICT_OK) {",
          "content_same": false
        },
        {
          "line": 5284,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "        if (op == REDIS_OP_DIFF && cardinality == 0) break;",
          "new_line_content": "        dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 5292,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "            robj *ele;",
          "new_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",cardinality));",
          "content_same": false
        },
        {
          "line": 5293,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(dstset->ptr)",
          "old_line_content": "",
          "new_line_content": "        di = dictGetIterator(dstset->ptr);",
          "content_same": false
        },
        {
          "line": 5300,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "        /* If we have a target key where to store the resulting set",
          "new_line_content": "        dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 5301,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(dstset)",
          "old_line_content": "         * create this key with the result set inside */",
          "new_line_content": "        decrRefCount(dstset);",
          "content_same": false
        },
        {
          "line": 5307,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(c->db->dict,dstkey,dstset)",
          "old_line_content": "        } else {",
          "new_line_content": "            dictAdd(c->db->dict,dstkey,dstset);",
          "content_same": false
        },
        {
          "line": 5311,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(dstset)",
          "old_line_content": "        server.dirty++;",
          "new_line_content": "            decrRefCount(dstset);",
          "content_same": false
        },
        {
          "line": 5312,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "    }",
          "new_line_content": "            addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 5316,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(dv)",
          "old_line_content": "static void sunionCommand(redisClient *c) {",
          "new_line_content": "    zfree(dv);",
          "content_same": false
        },
        {
          "line": 5320,
          "old_api": null,
          "new_api": "sunionDiffGenericCommand",
          "old_text": null,
          "new_text": "sunionDiffGenericCommand(c,c->argv+1,c->argc-1,NULL,REDIS_OP_UNION)",
          "old_line_content": "static void sunionstoreCommand(redisClient *c) {",
          "new_line_content": "    sunionDiffGenericCommand(c,c->argv+1,c->argc-1,NULL,REDIS_OP_UNION);",
          "content_same": false
        },
        {
          "line": 5324,
          "old_api": null,
          "new_api": "sunionDiffGenericCommand",
          "old_text": null,
          "new_text": "sunionDiffGenericCommand(c,c->argv+2,c->argc-2,c->argv[1],REDIS_OP_UNION)",
          "old_line_content": "static void sdiffCommand(redisClient *c) {",
          "new_line_content": "    sunionDiffGenericCommand(c,c->argv+2,c->argc-2,c->argv[1],REDIS_OP_UNION);",
          "content_same": false
        },
        {
          "line": 5328,
          "old_api": null,
          "new_api": "sunionDiffGenericCommand",
          "old_text": null,
          "new_text": "sunionDiffGenericCommand(c,c->argv+1,c->argc-1,NULL,REDIS_OP_DIFF)",
          "old_line_content": "static void sdiffstoreCommand(redisClient *c) {",
          "new_line_content": "    sunionDiffGenericCommand(c,c->argv+1,c->argc-1,NULL,REDIS_OP_DIFF);",
          "content_same": false
        },
        {
          "line": 5332,
          "old_api": null,
          "new_api": "sunionDiffGenericCommand",
          "old_text": null,
          "new_text": "sunionDiffGenericCommand(c,c->argv+2,c->argc-2,c->argv[1],REDIS_OP_DIFF)",
          "old_line_content": "/* ==================================== ZSets =============================== */",
          "new_line_content": "    sunionDiffGenericCommand(c,c->argv+2,c->argc-2,c->argv[1],REDIS_OP_DIFF);",
          "content_same": false
        },
        {
          "line": 5355,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*zn))",
          "old_line_content": "    if (level > 0)",
          "new_line_content": "    zskiplistNode *zn = zmalloc(sizeof(*zn));",
          "content_same": false
        },
        {
          "line": 5357,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(zskiplistNode*) * level)",
          "old_line_content": "    zn->score = score;",
          "new_line_content": "    zn->forward = zmalloc(sizeof(zskiplistNode*) * level);",
          "content_same": false
        },
        {
          "line": 5359,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(unsigned int) * (level - 1))",
          "old_line_content": "    return zn;",
          "new_line_content": "        zn->span = zmalloc(sizeof(unsigned int) * (level - 1));",
          "content_same": false
        },
        {
          "line": 5372,
          "old_api": null,
          "new_api": "zslCreateNode",
          "old_text": null,
          "new_text": "zslCreateNode(ZSKIPLIST_MAXLEVEL,0,NULL)",
          "old_line_content": "",
          "new_line_content": "    zsl->header = zslCreateNode(ZSKIPLIST_MAXLEVEL,0,NULL);",
          "content_same": false
        },
        {
          "line": 5387,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(node->forward)",
          "old_line_content": "}",
          "new_line_content": "    zfree(node->forward);",
          "content_same": false
        },
        {
          "line": 5388,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(node->span)",
          "old_line_content": "",
          "new_line_content": "    zfree(node->span);",
          "content_same": false
        },
        {
          "line": 5389,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(node)",
          "old_line_content": "static void zslFree(zskiplist *zsl) {",
          "new_line_content": "    zfree(node);",
          "content_same": false
        },
        {
          "line": 5395,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(zsl->header->forward)",
          "old_line_content": "    while(node) {",
          "new_line_content": "    zfree(zsl->header->forward);",
          "content_same": false
        },
        {
          "line": 5396,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(zsl->header->span)",
          "old_line_content": "        next = node->forward[0];",
          "new_line_content": "    zfree(zsl->header->span);",
          "content_same": false
        },
        {
          "line": 5403,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(zsl)",
          "old_line_content": "static int zslRandomLevel(void) {",
          "new_line_content": "    zfree(zsl);",
          "content_same": false
        },
        {
          "line": 5408,
          "old_api": null,
          "new_api": "random",
          "old_text": null,
          "new_text": "random()",
          "old_line_content": "}",
          "new_line_content": "    while ((random()&0xFFFF) < (ZSKIPLIST_P * 0xFFFF))",
          "content_same": false
        },
        {
          "line": 5426,
          "old_api": null,
          "new_api": "compareStringObjects",
          "old_text": null,
          "new_text": "compareStringObjects(x->forward[i]->obj,obj)",
          "old_line_content": "        }",
          "new_line_content": "                compareStringObjects(x->forward[i]->obj,obj) < 0))) {",
          "content_same": false
        },
        {
          "line": 5436,
          "old_api": null,
          "new_api": "zslRandomLevel",
          "old_text": null,
          "new_text": "zslRandomLevel()",
          "old_line_content": "            rank[i] = 0;",
          "new_line_content": "    level = zslRandomLevel();",
          "content_same": false
        },
        {
          "line": 5445,
          "old_api": null,
          "new_api": "zslCreateNode",
          "old_text": null,
          "new_text": "zslCreateNode(level,score,obj)",
          "old_line_content": "        update[i]->forward[i] = x;",
          "new_line_content": "    x = zslCreateNode(level,score,obj);",
          "content_same": false
        },
        {
          "line": 5505,
          "old_api": null,
          "new_api": "compareStringObjects",
          "old_text": null,
          "new_text": "compareStringObjects(x->forward[i]->obj,obj)",
          "old_line_content": "    }",
          "new_line_content": "                compareStringObjects(x->forward[i]->obj,obj) < 0)))",
          "content_same": false
        },
        {
          "line": 5512,
          "old_api": null,
          "new_api": "equalStringObjects",
          "old_text": null,
          "new_text": "equalStringObjects(x->obj,obj)",
          "old_line_content": "        return 1;",
          "new_line_content": "    if (x && score == x->score && equalStringObjects(x->obj,obj)) {",
          "content_same": false
        },
        {
          "line": 5513,
          "old_api": null,
          "new_api": "zslDeleteNode",
          "old_text": null,
          "new_text": "zslDeleteNode(zsl, x, update)",
          "old_line_content": "    } else {",
          "new_line_content": "        zslDeleteNode(zsl, x, update);",
          "content_same": false
        },
        {
          "line": 5514,
          "old_api": null,
          "new_api": "zslFreeNode",
          "old_text": null,
          "new_text": "zslFreeNode(x)",
          "old_line_content": "        return 0; /* not found */",
          "new_line_content": "        zslFreeNode(x);",
          "content_same": false
        },
        {
          "line": 5542,
          "old_api": null,
          "new_api": "zslDeleteNode",
          "old_text": null,
          "new_text": "zslDeleteNode(zsl, x, update)",
          "old_line_content": "        removed++;",
          "new_line_content": "        zslDeleteNode(zsl, x, update);",
          "content_same": false
        },
        {
          "line": 5543,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(dict,x->obj)",
          "old_line_content": "        x = next;",
          "new_line_content": "        dictDelete(dict,x->obj);",
          "content_same": false
        },
        {
          "line": 5544,
          "old_api": null,
          "new_api": "zslFreeNode",
          "old_text": null,
          "new_text": "zslFreeNode(x)",
          "old_line_content": "    }",
          "new_line_content": "        zslFreeNode(x);",
          "content_same": false
        },
        {
          "line": 5571,
          "old_api": null,
          "new_api": "zslDeleteNode",
          "old_text": null,
          "new_text": "zslDeleteNode(zsl, x, update)",
          "old_line_content": "        removed++;",
          "new_line_content": "        zslDeleteNode(zsl, x, update);",
          "content_same": false
        },
        {
          "line": 5572,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(dict,x->obj)",
          "old_line_content": "        traversed++;",
          "new_line_content": "        dictDelete(dict,x->obj);",
          "content_same": false
        },
        {
          "line": 5573,
          "old_api": null,
          "new_api": "zslFreeNode",
          "old_text": null,
          "new_text": "zslFreeNode(x)",
          "old_line_content": "        x = next;",
          "new_line_content": "        zslFreeNode(x);",
          "content_same": false
        },
        {
          "line": 5611,
          "old_api": null,
          "new_api": "compareStringObjects",
          "old_text": null,
          "new_text": "compareStringObjects(x->forward[i]->obj,o)",
          "old_line_content": "        }",
          "new_line_content": "                compareStringObjects(x->forward[i]->obj,o) <= 0))) {",
          "content_same": false
        },
        {
          "line": 5617,
          "old_api": null,
          "new_api": "equalStringObjects",
          "old_text": null,
          "new_text": "equalStringObjects(x->obj,o)",
          "old_line_content": "    }",
          "new_line_content": "        if (x->obj && equalStringObjects(x->obj,o)) {",
          "content_same": false
        },
        {
          "line": 5656,
          "old_api": null,
          "new_api": "createZsetObject",
          "old_text": null,
          "new_text": "createZsetObject()",
          "old_line_content": "    } else {",
          "new_line_content": "        zsetobj = createZsetObject();",
          "content_same": false
        },
        {
          "line": 5657,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(c->db->dict,key,zsetobj)",
          "old_line_content": "        if (zsetobj->type != REDIS_ZSET) {",
          "new_line_content": "        dictAdd(c->db->dict,key,zsetobj);",
          "content_same": false
        },
        {
          "line": 5661,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "    }",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 5670,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(double))",
          "old_line_content": "",
          "new_line_content": "    score = zmalloc(sizeof(double));",
          "content_same": false
        },
        {
          "line": 5675,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(zs->dict,ele)",
          "old_line_content": "            *score = *oldscore + scoreval;",
          "new_line_content": "        de = dictFind(zs->dict,ele);",
          "content_same": false
        },
        {
          "line": 5677,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "            *score = scoreval;",
          "new_line_content": "            double *oldscore = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 5690,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(ele)",
          "old_line_content": "        server.dirty++;",
          "new_line_content": "        incrRefCount(ele); /* added to hash */",
          "content_same": false
        },
        {
          "line": 5691,
          "old_api": null,
          "new_api": "zslInsert",
          "old_text": null,
          "new_text": "zslInsert(zs->zsl,*score,ele)",
          "old_line_content": "        if (doincrement)",
          "new_line_content": "        zslInsert(zs->zsl,*score,ele);",
          "content_same": false
        },
        {
          "line": 5695,
          "old_api": null,
          "new_api": "addReplyDouble",
          "old_text": null,
          "new_text": "addReplyDouble(c,*score)",
          "old_line_content": "    } else {",
          "new_line_content": "            addReplyDouble(c,*score);",
          "content_same": false
        },
        {
          "line": 5697,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.cone)",
          "old_line_content": "        double *oldscore;",
          "new_line_content": "            addReply(c,shared.cone);",
          "content_same": false
        },
        {
          "line": 5703,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(zs->dict,ele)",
          "old_line_content": "        if (*score != *oldscore) {",
          "new_line_content": "        de = dictFind(zs->dict,ele);",
          "content_same": false
        },
        {
          "line": 5704,
          "old_api": null,
          "new_api": "redisAssert",
          "old_text": null,
          "new_text": "redisAssert(de != NULL)",
          "old_line_content": "            int deleted;",
          "new_line_content": "        redisAssert(de != NULL);",
          "content_same": false
        },
        {
          "line": 5705,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "",
          "new_line_content": "        oldscore = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 5711,
          "old_api": null,
          "new_api": "redisAssert",
          "old_text": null,
          "new_text": "redisAssert(deleted != 0)",
          "old_line_content": "            /* Update the score in the hash table */",
          "new_line_content": "            redisAssert(deleted != 0);",
          "content_same": false
        },
        {
          "line": 5713,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(ele)",
          "old_line_content": "            server.dirty++;",
          "new_line_content": "            incrRefCount(ele);",
          "content_same": false
        },
        {
          "line": 5721,
          "old_api": null,
          "new_api": "addReplyDouble",
          "old_text": null,
          "new_text": "addReplyDouble(c,*score)",
          "old_line_content": "    }",
          "new_line_content": "            addReplyDouble(c,*score);",
          "content_same": false
        },
        {
          "line": 5723,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "",
          "new_line_content": "            addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 5730,
          "old_api": null,
          "new_api": "getDoubleFromObjectOrReply",
          "old_text": null,
          "new_text": "getDoubleFromObjectOrReply(c, c->argv[2], &scoreval, NULL)",
          "old_line_content": "",
          "new_line_content": "    if (getDoubleFromObjectOrReply(c, c->argv[2], &scoreval, NULL) != REDIS_OK) return;",
          "content_same": false
        },
        {
          "line": 5731,
          "old_api": null,
          "new_api": "zaddGenericCommand",
          "old_text": null,
          "new_text": "zaddGenericCommand(c,c->argv[1],c->argv[3],scoreval,0)",
          "old_line_content": "static void zincrbyCommand(redisClient *c) {",
          "new_line_content": "    zaddGenericCommand(c,c->argv[1],c->argv[3],scoreval,0);",
          "content_same": false
        },
        {
          "line": 5737,
          "old_api": null,
          "new_api": "getDoubleFromObjectOrReply",
          "old_text": null,
          "new_text": "getDoubleFromObjectOrReply(c, c->argv[2], &scoreval, NULL)",
          "old_line_content": "",
          "new_line_content": "    if (getDoubleFromObjectOrReply(c, c->argv[2], &scoreval, NULL) != REDIS_OK) return;",
          "content_same": false
        },
        {
          "line": 5738,
          "old_api": null,
          "new_api": "zaddGenericCommand",
          "old_text": null,
          "new_text": "zaddGenericCommand(c,c->argv[1],c->argv[3],scoreval,1)",
          "old_line_content": "static void zremCommand(redisClient *c) {",
          "new_line_content": "    zaddGenericCommand(c,c->argv[1],c->argv[3],scoreval,1);",
          "content_same": false
        },
        {
          "line": 5748,
          "old_api": null,
          "new_api": "lookupKeyWriteOrReply",
          "old_text": null,
          "new_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.czero)",
          "old_line_content": "    zs = zsetobj->ptr;",
          "new_line_content": "    if ((zsetobj = lookupKeyWriteOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "content_same": false
        },
        {
          "line": 5752,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(zs->dict,c->argv[2])",
          "old_line_content": "        return;",
          "new_line_content": "    de = dictFind(zs->dict,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 5754,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "    /* Delete from the skiplist */",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 5758,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "",
          "new_line_content": "    oldscore = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 5759,
          "old_api": null,
          "new_api": "zslDelete",
          "old_text": null,
          "new_text": "zslDelete(zs->zsl,*oldscore,c->argv[2])",
          "old_line_content": "    /* Delete from the hash table */",
          "new_line_content": "    deleted = zslDelete(zs->zsl,*oldscore,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 5763,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(zs->dict,c->argv[2])",
          "old_line_content": "    server.dirty++;",
          "new_line_content": "    dictDelete(zs->dict,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 5765,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(c->db,c->argv[1])",
          "old_line_content": "}",
          "new_line_content": "    if (dictSize(zs->dict) == 0) deleteKey(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 5767,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.cone)",
          "old_line_content": "static void zremrangebyscoreCommand(redisClient *c) {",
          "new_line_content": "    addReply(c,shared.cone);",
          "content_same": false
        },
        {
          "line": 5780,
          "old_api": null,
          "new_api": "lookupKeyWriteOrReply",
          "old_text": null,
          "new_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.czero)",
          "old_line_content": "    zs = zsetobj->ptr;",
          "new_line_content": "    if ((zsetobj = lookupKeyWriteOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "content_same": false
        },
        {
          "line": 5784,
          "old_api": null,
          "new_api": "zslDeleteRangeByScore",
          "old_text": null,
          "new_text": "zslDeleteRangeByScore(zs->zsl,min,max,zs->dict)",
          "old_line_content": "    server.dirty += deleted;",
          "new_line_content": "    deleted = zslDeleteRangeByScore(zs->zsl,min,max,zs->dict);",
          "content_same": false
        },
        {
          "line": 5786,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(c->db,c->argv[1])",
          "old_line_content": "}",
          "new_line_content": "    if (dictSize(zs->dict) == 0) deleteKey(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 5788,
          "old_api": null,
          "new_api": "addReplyLong",
          "old_text": null,
          "new_text": "addReplyLong(c,deleted)",
          "old_line_content": "static void zremrangebyrankCommand(redisClient *c) {",
          "new_line_content": "    addReplyLong(c,deleted);",
          "content_same": false
        },
        {
          "line": 5802,
          "old_api": null,
          "new_api": "lookupKeyWriteOrReply",
          "old_text": null,
          "new_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.czero)",
          "old_line_content": "    llen = zs->zsl->length;",
          "new_line_content": "    if ((zsetobj = lookupKeyWriteOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "content_same": false
        },
        {
          "line": 5803,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,zsetobj,REDIS_ZSET)",
          "old_line_content": "",
          "new_line_content": "        checkType(c,zsetobj,REDIS_ZSET)) return;",
          "content_same": false
        },
        {
          "line": 5815,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "    if (end >= llen) end = llen-1;",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 5822,
          "old_api": null,
          "new_api": "zslDeleteRangeByRank",
          "old_text": null,
          "new_text": "zslDeleteRangeByRank(zs->zsl,start+1,end+1,zs->dict)",
          "old_line_content": "    server.dirty += deleted;",
          "new_line_content": "    deleted = zslDeleteRangeByRank(zs->zsl,start+1,end+1,zs->dict);",
          "content_same": false
        },
        {
          "line": 5824,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(c->db,c->argv[1])",
          "old_line_content": "}",
          "new_line_content": "    if (dictSize(zs->dict) == 0) deleteKey(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 5826,
          "old_api": null,
          "new_api": "addReplyLong",
          "old_text": null,
          "new_text": "addReplyLong(c, deleted)",
          "old_line_content": "typedef struct {",
          "new_line_content": "    addReplyLong(c, deleted);",
          "content_same": false
        },
        {
          "line": 5837,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(d1->dict)",
          "old_line_content": "}",
          "new_line_content": "    size1 = d1->dict ? dictSize(d1->dict) : 0;",
          "content_same": false
        },
        {
          "line": 5838,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(d2->dict)",
          "old_line_content": "",
          "new_line_content": "    size2 = d2->dict ? dictSize(d2->dict) : 0;",
          "content_same": false
        },
        {
          "line": 5855,
          "old_api": null,
          "new_api": "redisPanic",
          "old_text": null,
          "new_text": "redisPanic(\"Unknown ZUNION/INTER aggregate type\")",
          "old_line_content": "",
          "new_line_content": "        redisPanic(\"Unknown ZUNION/INTER aggregate type\");",
          "content_same": false
        },
        {
          "line": 5869,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[2]->ptr)",
          "old_line_content": "        return;",
          "new_line_content": "    zsetnum = atoi(c->argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 5871,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"-ERR at least 1 input key is needed for ZUNION/ZINTER\\r\\n\")",
          "old_line_content": "",
          "new_line_content": "        addReplySds(c,sdsnew(\"-ERR at least 1 input key is needed for ZUNION/ZINTER\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 5877,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "",
          "new_line_content": "        addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 5882,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(zsetopsrc) * zsetnum)",
          "old_line_content": "        if (!zsetobj) {",
          "new_line_content": "    src = zmalloc(sizeof(zsetopsrc) * zsetnum);",
          "content_same": false
        },
        {
          "line": 5884,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[j])",
          "old_line_content": "        } else {",
          "new_line_content": "        robj *zsetobj = lookupKeyWrite(c->db,c->argv[j]);",
          "content_same": false
        },
        {
          "line": 5889,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(src)",
          "old_line_content": "            }",
          "new_line_content": "                zfree(src);",
          "content_same": false
        },
        {
          "line": 5890,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "            src[i].dict = ((zset*)zsetobj->ptr)->dict;",
          "new_line_content": "                addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 5911,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"aggregate\")",
          "old_line_content": "                    aggregate = REDIS_AGGR_SUM;",
          "new_line_content": "            } else if (remaining >= 2 && !strcasecmp(c->argv[j]->ptr,\"aggregate\")) {",
          "content_same": false
        },
        {
          "line": 5913,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"sum\")",
          "old_line_content": "                    aggregate = REDIS_AGGR_MIN;",
          "new_line_content": "                if (!strcasecmp(c->argv[j]->ptr,\"sum\")) {",
          "content_same": false
        },
        {
          "line": 5915,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"min\")",
          "old_line_content": "                    aggregate = REDIS_AGGR_MAX;",
          "new_line_content": "                } else if (!strcasecmp(c->argv[j]->ptr,\"min\")) {",
          "content_same": false
        },
        {
          "line": 5920,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(src)",
          "old_line_content": "                }",
          "new_line_content": "                    zfree(src);",
          "content_same": false
        },
        {
          "line": 5921,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "                j++; remaining--;",
          "new_line_content": "                    addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 5926,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(src)",
          "old_line_content": "            }",
          "new_line_content": "                zfree(src);",
          "content_same": false
        },
        {
          "line": 5927,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "        }",
          "new_line_content": "                addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 5935,
          "old_api": null,
          "new_api": "qsort",
          "old_text": null,
          "new_text": "qsort(src,zsetnum,sizeof(zsetopsrc), qsortCompareZsetopsrcByCardinality)",
          "old_line_content": "    dstzset = dstobj->ptr;",
          "new_line_content": "    qsort(src,zsetnum,sizeof(zsetopsrc), qsortCompareZsetopsrcByCardinality);",
          "content_same": false
        },
        {
          "line": 5937,
          "old_api": null,
          "new_api": "createZsetObject",
          "old_text": null,
          "new_text": "createZsetObject()",
          "old_line_content": "    if (op == REDIS_OP_INTER) {",
          "new_line_content": "    dstobj = createZsetObject();",
          "content_same": false
        },
        {
          "line": 5946,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "",
          "new_line_content": "            while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 5947,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(double))",
          "old_line_content": "                for (j = 1; j < zsetnum; j++) {",
          "new_line_content": "                double *score = zmalloc(sizeof(double)), value;",
          "content_same": false
        },
        {
          "line": 5953,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(other)",
          "old_line_content": "                        break;",
          "new_line_content": "                        value = src[j].weight * (*(double*)dictGetEntryVal(other));",
          "content_same": false
        },
        {
          "line": 5954,
          "old_api": null,
          "new_api": "zunionInterAggregate",
          "old_text": null,
          "new_text": "zunionInterAggregate(score, value, aggregate)",
          "old_line_content": "                    }",
          "new_line_content": "                        zunionInterAggregate(score, value, aggregate);",
          "content_same": false
        },
        {
          "line": 5966,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(o)",
          "old_line_content": "                }",
          "new_line_content": "                    incrRefCount(o); /* added to dictionary */",
          "content_same": false
        },
        {
          "line": 5967,
          "old_api": null,
          "new_api": "zslInsert",
          "old_text": null,
          "new_text": "zslInsert(dstzset->zsl,*score,o)",
          "old_line_content": "            }",
          "new_line_content": "                    zslInsert(dstzset->zsl,*score,o);",
          "content_same": false
        },
        {
          "line": 5971,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "        for (i = 0; i < zsetnum; i++) {",
          "new_line_content": "            dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 5978,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "",
          "new_line_content": "            while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 5982,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(double))",
          "old_line_content": "                /* because the zsets are sorted by size, its only possible",
          "new_line_content": "                double *score = zmalloc(sizeof(double)), value;",
          "content_same": false
        },
        {
          "line": 5983,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "                 * for sets at larger indices to hold this entry */",
          "new_line_content": "                *score = src[i].weight * (*(double*)dictGetEntryVal(de));",
          "content_same": false
        },
        {
          "line": 5990,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(other)",
          "old_line_content": "                }",
          "new_line_content": "                        value = src[j].weight * (*(double*)dictGetEntryVal(other));",
          "content_same": false
        },
        {
          "line": 5991,
          "old_api": null,
          "new_api": "zunionInterAggregate",
          "old_text": null,
          "new_text": "zunionInterAggregate(score, value, aggregate)",
          "old_line_content": "",
          "new_line_content": "                        zunionInterAggregate(score, value, aggregate);",
          "content_same": false
        },
        {
          "line": 5997,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(o)",
          "old_line_content": "            }",
          "new_line_content": "                incrRefCount(o); /* added to dictionary */",
          "content_same": false
        },
        {
          "line": 5999,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(o)",
          "old_line_content": "        }",
          "new_line_content": "                incrRefCount(o); /* added to skiplist */",
          "content_same": false
        },
        {
          "line": 6001,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "        /* unknown operator */",
          "new_line_content": "            dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 6010,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(c->db->dict,dstkey,dstobj)",
          "old_line_content": "        server.dirty++;",
          "new_line_content": "        dictAdd(c->db->dict,dstkey,dstobj);",
          "content_same": false
        },
        {
          "line": 6011,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(dstkey)",
          "old_line_content": "    } else {",
          "new_line_content": "        incrRefCount(dstkey);",
          "content_same": false
        },
        {
          "line": 6016,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.czero)",
          "old_line_content": "}",
          "new_line_content": "        addReply(c, shared.czero);",
          "content_same": false
        },
        {
          "line": 6018,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(src)",
          "old_line_content": "static void zunionCommand(redisClient *c) {",
          "new_line_content": "    zfree(src);",
          "content_same": false
        },
        {
          "line": 6022,
          "old_api": null,
          "new_api": "zunionInterGenericCommand",
          "old_text": null,
          "new_text": "zunionInterGenericCommand(c,c->argv[1], REDIS_OP_UNION)",
          "old_line_content": "static void zinterCommand(redisClient *c) {",
          "new_line_content": "    zunionInterGenericCommand(c,c->argv[1], REDIS_OP_UNION);",
          "content_same": false
        },
        {
          "line": 6026,
          "old_api": null,
          "new_api": "zunionInterGenericCommand",
          "old_text": null,
          "new_text": "zunionInterGenericCommand(c,c->argv[1], REDIS_OP_INTER)",
          "old_line_content": "static void zrangeGenericCommand(redisClient *c, int reverse) {",
          "new_line_content": "    zunionInterGenericCommand(c,c->argv[1], REDIS_OP_INTER);",
          "content_same": false
        },
        {
          "line": 6042,
          "old_api": null,
          "new_api": "getLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongFromObjectOrReply(c, c->argv[3], &end, NULL)",
          "old_line_content": "        withscores = 1;",
          "new_line_content": "        (getLongFromObjectOrReply(c, c->argv[3], &end, NULL) != REDIS_OK)) return;",
          "content_same": false
        },
        {
          "line": 6047,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "",
          "new_line_content": "        addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 6051,
          "old_api": null,
          "new_api": "lookupKeyReadOrReply",
          "old_text": null,
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.emptymultibulk)",
          "old_line_content": "    zsl = zsetobj->zsl;",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.emptymultibulk)) == NULL",
          "content_same": false
        },
        {
          "line": 6052,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,REDIS_ZSET)",
          "old_line_content": "    llen = zsl->length;",
          "new_line_content": "         || checkType(c,o,REDIS_ZSET)) return;",
          "content_same": false
        },
        {
          "line": 6066,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.emptymultibulk)",
          "old_line_content": "    if (end >= llen) end = llen-1;",
          "new_line_content": "        addReply(c,shared.emptymultibulk);",
          "content_same": false
        },
        {
          "line": 6078,
          "old_api": null,
          "new_api": "zslGetElementByRank",
          "old_text": null,
          "new_text": "zslGetElementByRank(zsl, start+1)",
          "old_line_content": "    /* Return the result in form of a multi-bulk reply */",
          "new_line_content": "            zsl->header->forward[0] : zslGetElementByRank(zsl, start+1);",
          "content_same": false
        },
        {
          "line": 6082,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "        ele = ln->obj;",
          "new_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",",
          "content_same": false
        },
        {
          "line": 6086,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,ele)",
          "old_line_content": "        ln = reverse ? ln->backward : ln->forward[0];",
          "new_line_content": "        addReplyBulk(c,ele);",
          "content_same": false
        },
        {
          "line": 6088,
          "old_api": null,
          "new_api": "addReplyDouble",
          "old_text": null,
          "new_text": "addReplyDouble(c,ln->score)",
          "old_line_content": "}",
          "new_line_content": "            addReplyDouble(c,ln->score);",
          "content_same": false
        },
        {
          "line": 6094,
          "old_api": null,
          "new_api": "zrangeGenericCommand",
          "old_text": null,
          "new_text": "zrangeGenericCommand(c,0)",
          "old_line_content": "static void zrevrangeCommand(redisClient *c) {",
          "new_line_content": "    zrangeGenericCommand(c,0);",
          "content_same": false
        },
        {
          "line": 6098,
          "old_api": null,
          "new_api": "zrangeGenericCommand",
          "old_text": null,
          "new_text": "zrangeGenericCommand(c,1)",
          "old_line_content": "/* This command implements both ZRANGEBYSCORE and ZCOUNT.",
          "new_line_content": "    zrangeGenericCommand(c,1);",
          "content_same": false
        },
        {
          "line": 6125,
          "old_api": null,
          "new_api": "strtod",
          "old_text": null,
          "new_text": "strtod(c->argv[3]->ptr,NULL)",
          "old_line_content": "    /* Parse \"WITHSCORES\": note that if the command was called with",
          "new_line_content": "        max = strtod(c->argv[3]->ptr,NULL);",
          "content_same": false
        },
        {
          "line": 6132,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[c->argc-1]->ptr,\"withscores\")",
          "old_line_content": "            badsyntax = 1;",
          "new_line_content": "        if (strcasecmp(c->argv[c->argc-1]->ptr,\"withscores\") == 0)",
          "content_same": false
        },
        {
          "line": 6140,
          "old_api": null,
          "new_api": "addReplySds",
          "old_text": null,
          "new_text": "addReplySds(c,\n            sdsnew(\"-ERR wrong number of arguments for ZRANGEBYSCORE\\r\\n\"))",
          "old_line_content": "    }",
          "new_line_content": "        addReplySds(c,",
          "content_same": false
        },
        {
          "line": 6141,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"-ERR wrong number of arguments for ZRANGEBYSCORE\\r\\n\")",
          "old_line_content": "",
          "new_line_content": "            sdsnew(\"-ERR wrong number of arguments for ZRANGEBYSCORE\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 6146,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[4]->ptr,\"limit\")",
          "old_line_content": "    } else if (c->argc == (7 + withscores)) {",
          "new_line_content": "    if (c->argc == (7 + withscores) && strcasecmp(c->argv[4]->ptr,\"limit\")) {",
          "content_same": false
        },
        {
          "line": 6150,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[5]->ptr)",
          "old_line_content": "    }",
          "new_line_content": "        offset = atoi(c->argv[5]->ptr);",
          "content_same": false
        },
        {
          "line": 6151,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[6]->ptr)",
          "old_line_content": "",
          "new_line_content": "        limit = atoi(c->argv[6]->ptr);",
          "content_same": false
        },
        {
          "line": 6156,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[1])",
          "old_line_content": "    } else {",
          "new_line_content": "    o = lookupKeyRead(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 6161,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "            zskiplist *zsl = zsetobj->zsl;",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 6171,
          "old_api": null,
          "new_api": "zslFirstWithScore",
          "old_text": null,
          "new_text": "zslFirstWithScore(zsl,min)",
          "old_line_content": "            if (ln == NULL) {",
          "new_line_content": "            ln = zslFirstWithScore(zsl,min);",
          "content_same": false
        },
        {
          "line": 6176,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,justcount ? shared.czero : shared.emptymultibulk)",
          "old_line_content": "",
          "new_line_content": "                addReply(c,justcount ? shared.czero : shared.emptymultibulk);",
          "content_same": false
        },
        {
          "line": 6185,
          "old_api": null,
          "new_api": "createObject",
          "old_text": null,
          "new_text": "createObject(REDIS_STRING,NULL)",
          "old_line_content": "            }",
          "new_line_content": "                lenobj = createObject(REDIS_STRING,NULL);",
          "content_same": false
        },
        {
          "line": 6186,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,lenobj)",
          "old_line_content": "",
          "new_line_content": "                addReply(c,lenobj);",
          "content_same": false
        },
        {
          "line": 6187,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(lenobj)",
          "old_line_content": "            while(ln && (maxex ? (ln->score < max) : (ln->score <= max))) {",
          "new_line_content": "                decrRefCount(lenobj);",
          "content_same": false
        },
        {
          "line": 6199,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,ele)",
          "old_line_content": "                }",
          "new_line_content": "                    addReplyBulk(c,ele);",
          "content_same": false
        },
        {
          "line": 6201,
          "old_api": null,
          "new_api": "addReplyDouble",
          "old_text": null,
          "new_text": "addReplyDouble(c,ln->score)",
          "old_line_content": "                rangelen++;",
          "new_line_content": "                        addReplyDouble(c,ln->score);",
          "content_same": false
        },
        {
          "line": 6208,
          "old_api": null,
          "new_api": "addReplyLong",
          "old_text": null,
          "new_text": "addReplyLong(c,(long)rangelen)",
          "old_line_content": "                     withscores ? (rangelen*2) : rangelen);",
          "new_line_content": "                addReplyLong(c,(long)rangelen);",
          "content_same": false
        },
        {
          "line": 6210,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "        }",
          "new_line_content": "                lenobj->ptr = sdscatprintf(sdsempty(),\"*%lu\\r\\n\",",
          "content_same": false
        },
        {
          "line": 6218,
          "old_api": null,
          "new_api": "genericZrangebyscoreCommand",
          "old_text": null,
          "new_text": "genericZrangebyscoreCommand(c,0)",
          "old_line_content": "static void zcountCommand(redisClient *c) {",
          "new_line_content": "    genericZrangebyscoreCommand(c,0);",
          "content_same": false
        },
        {
          "line": 6222,
          "old_api": null,
          "new_api": "genericZrangebyscoreCommand",
          "old_text": null,
          "new_text": "genericZrangebyscoreCommand(c,1)",
          "old_line_content": "static void zcardCommand(redisClient *c) {",
          "new_line_content": "    genericZrangebyscoreCommand(c,1);",
          "content_same": false
        },
        {
          "line": 6229,
          "old_api": null,
          "new_api": "lookupKeyReadOrReply",
          "old_text": null,
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "old_line_content": "    zs = o->ptr;",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "content_same": false
        },
        {
          "line": 6233,
          "old_api": null,
          "new_api": "addReplyUlong",
          "old_text": null,
          "new_text": "addReplyUlong(c,zs->zsl->length)",
          "old_line_content": "static void zscoreCommand(redisClient *c) {",
          "new_line_content": "    addReplyUlong(c,zs->zsl->length);",
          "content_same": false
        },
        {
          "line": 6241,
          "old_api": null,
          "new_api": "lookupKeyReadOrReply",
          "old_text": null,
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)",
          "old_line_content": "    zs = o->ptr;",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "content_same": false
        },
        {
          "line": 6245,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(zs->dict,c->argv[2])",
          "old_line_content": "    } else {",
          "new_line_content": "    de = dictFind(zs->dict,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 6247,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "",
          "new_line_content": "        addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 6249,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "    }",
          "new_line_content": "        double *score = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 6251,
          "old_api": null,
          "new_api": "addReplyDouble",
          "old_text": null,
          "new_text": "addReplyDouble(c,*score)",
          "old_line_content": "",
          "new_line_content": "        addReplyDouble(c,*score);",
          "content_same": false
        },
        {
          "line": 6263,
          "old_api": null,
          "new_api": "lookupKeyReadOrReply",
          "old_text": null,
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)",
          "old_line_content": "    zs = o->ptr;",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "content_same": false
        },
        {
          "line": 6264,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,REDIS_ZSET)",
          "old_line_content": "    zsl = zs->zsl;",
          "new_line_content": "        checkType(c,o,REDIS_ZSET)) return;",
          "content_same": false
        },
        {
          "line": 6268,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(zs->dict,c->argv[2])",
          "old_line_content": "        return;",
          "new_line_content": "    de = dictFind(zs->dict,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 6270,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "",
          "new_line_content": "        addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 6274,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "        if (reverse) {",
          "new_line_content": "    score = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 6278,
          "old_api": null,
          "new_api": "addReplyLong",
          "old_text": null,
          "new_text": "addReplyLong(c, zsl->length - rank)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyLong(c, zsl->length - rank);",
          "content_same": false
        },
        {
          "line": 6283,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "",
          "new_line_content": "        addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 6288,
          "old_api": null,
          "new_api": "zrankGenericCommand",
          "old_text": null,
          "new_text": "zrankGenericCommand(c, 0)",
          "old_line_content": "static void zrevrankCommand(redisClient *c) {",
          "new_line_content": "    zrankGenericCommand(c, 0);",
          "content_same": false
        },
        {
          "line": 6292,
          "old_api": null,
          "new_api": "zrankGenericCommand",
          "old_text": null,
          "new_text": "zrankGenericCommand(c, 1)",
          "old_line_content": "/* ========================= Hashes utility functions ======================= */",
          "new_line_content": "    zrankGenericCommand(c, 1);",
          "content_same": false
        },
        {
          "line": 6308,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(argv[i]->ptr)",
          "old_line_content": "            return;",
          "new_line_content": "            sdslen(argv[i]->ptr) > server.hash_max_zipmap_value)",
          "content_same": false
        },
        {
          "line": 6310,
          "old_api": null,
          "new_api": "convertToRealHash",
          "old_text": null,
          "new_text": "convertToRealHash(subject)",
          "old_line_content": "    }",
          "new_line_content": "            convertToRealHash(subject);",
          "content_same": false
        },
        {
          "line": 6319,
          "old_api": null,
          "new_api": "tryObjectEncoding",
          "old_text": null,
          "new_text": "tryObjectEncoding(*o1)",
          "old_line_content": "}",
          "new_line_content": "        if (o1) *o1 = tryObjectEncoding(*o1);",
          "content_same": false
        },
        {
          "line": 6320,
          "old_api": null,
          "new_api": "tryObjectEncoding",
          "old_text": null,
          "new_text": "tryObjectEncoding(*o2)",
          "old_line_content": "",
          "new_line_content": "        if (o2) *o2 = tryObjectEncoding(*o2);",
          "content_same": false
        },
        {
          "line": 6332,
          "old_api": null,
          "new_api": "getDecodedObject",
          "old_text": null,
          "new_text": "getDecodedObject(key)",
          "old_line_content": "        }",
          "new_line_content": "        key = getDecodedObject(key);",
          "content_same": false
        },
        {
          "line": 6334,
          "old_api": null,
          "new_api": "createStringObject",
          "old_text": null,
          "new_text": "createStringObject((char*)v,vlen)",
          "old_line_content": "    } else {",
          "new_line_content": "            value = createStringObject((char*)v,vlen);",
          "content_same": false
        },
        {
          "line": 6336,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(key)",
          "old_line_content": "        if (de != NULL) {",
          "new_line_content": "        decrRefCount(key);",
          "content_same": false
        },
        {
          "line": 6340,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "    }",
          "new_line_content": "            value = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 6341,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(value)",
          "old_line_content": "    return value;",
          "new_line_content": "            incrRefCount(value);",
          "content_same": false
        },
        {
          "line": 6351,
          "old_api": null,
          "new_api": "getDecodedObject",
          "old_text": null,
          "new_text": "getDecodedObject(key)",
          "old_line_content": "            return 1;",
          "new_line_content": "        key = getDecodedObject(key);",
          "content_same": false
        },
        {
          "line": 6352,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(key->ptr)",
          "old_line_content": "        }",
          "new_line_content": "        if (zipmapExists(o->ptr,key->ptr,sdslen(key->ptr))) {",
          "content_same": false
        },
        {
          "line": 6356,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(key)",
          "old_line_content": "            return 1;",
          "new_line_content": "        decrRefCount(key);",
          "content_same": false
        },
        {
          "line": 6358,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(o->ptr,key)",
          "old_line_content": "    }",
          "new_line_content": "        if (dictFind(o->ptr,key) != NULL) {",
          "content_same": false
        },
        {
          "line": 6374,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(value->ptr)",
          "old_line_content": "",
          "new_line_content": "            value->ptr,sdslen(value->ptr), &update);",
          "content_same": false
        },
        {
          "line": 6375,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(key)",
          "old_line_content": "        /* Check if the zipmap needs to be upgraded to a real hash table */",
          "new_line_content": "        decrRefCount(key);",
          "content_same": false
        },
        {
          "line": 6380,
          "old_api": null,
          "new_api": "convertToRealHash",
          "old_text": null,
          "new_text": "convertToRealHash(o)",
          "old_line_content": "            /* Insert */",
          "new_line_content": "            convertToRealHash(o);",
          "content_same": false
        },
        {
          "line": 6382,
          "old_api": null,
          "new_api": "dictReplace",
          "old_text": null,
          "new_text": "dictReplace(o->ptr,key,value)",
          "old_line_content": "        } else {",
          "new_line_content": "        if (dictReplace(o->ptr,key,value)) {",
          "content_same": false
        },
        {
          "line": 6384,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(key)",
          "old_line_content": "            update = 1;",
          "new_line_content": "            incrRefCount(key);",
          "content_same": false
        },
        {
          "line": 6389,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(value)",
          "old_line_content": "}",
          "new_line_content": "        incrRefCount(value);",
          "content_same": false
        },
        {
          "line": 6399,
          "old_api": null,
          "new_api": "getDecodedObject",
          "old_text": null,
          "new_text": "getDecodedObject(key)",
          "old_line_content": "    } else {",
          "new_line_content": "        key = getDecodedObject(key);",
          "content_same": false
        },
        {
          "line": 6401,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(key)",
          "old_line_content": "        /* Always check if the dictionary needs a resize after a delete. */",
          "new_line_content": "        decrRefCount(key);",
          "content_same": false
        },
        {
          "line": 6403,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete((dict*)o->ptr,key)",
          "old_line_content": "    }",
          "new_line_content": "        deleted = dictDelete((dict*)o->ptr,key) == DICT_OK;",
          "content_same": false
        },
        {
          "line": 6405,
          "old_api": null,
          "new_api": "dictResize",
          "old_text": null,
          "new_text": "dictResize(o->ptr)",
          "old_line_content": "}",
          "new_line_content": "        if (deleted && htNeedsResize(o->ptr)) dictResize(o->ptr);",
          "content_same": false
        },
        {
          "line": 6413,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize((dict*)o->ptr)",
          "old_line_content": "/* Structure to hold hash iteration abstration. Note that iteration over",
          "new_line_content": "        zipmapLen((unsigned char*)o->ptr) : dictSize((dict*)o->ptr);",
          "content_same": false
        },
        {
          "line": 6434,
          "old_api": null,
          "new_api": "zipmapRewind",
          "old_text": null,
          "new_text": "zipmapRewind(subject->ptr)",
          "old_line_content": "    } else {",
          "new_line_content": "        hi->zi = zipmapRewind(subject->ptr);",
          "content_same": false
        },
        {
          "line": 6436,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(subject->ptr)",
          "old_line_content": "    }",
          "new_line_content": "        hi->di = dictGetIterator(subject->ptr);",
          "content_same": false
        },
        {
          "line": 6438,
          "old_api": null,
          "new_api": "redisAssert",
          "old_text": null,
          "new_text": "redisAssert(NULL)",
          "old_line_content": "}",
          "new_line_content": "        redisAssert(NULL);",
          "content_same": false
        },
        {
          "line": 6445,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(hi->di)",
          "old_line_content": "}",
          "new_line_content": "        dictReleaseIterator(hi->di);",
          "content_same": false
        },
        {
          "line": 6447,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(hi)",
          "old_line_content": "/* Move to the next entry in the hash. Return REDIS_OK when the next entry",
          "new_line_content": "    zfree(hi);",
          "content_same": false
        },
        {
          "line": 6457,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(hi->di)",
          "old_line_content": "}",
          "new_line_content": "        if ((hi->de = dictNext(hi->di)) == NULL) return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 6468,
          "old_api": null,
          "new_api": "createStringObject",
          "old_text": null,
          "new_text": "createStringObject((char*)hi->zk,hi->zklen)",
          "old_line_content": "        }",
          "new_line_content": "            o = createStringObject((char*)hi->zk,hi->zklen);",
          "content_same": false
        },
        {
          "line": 6470,
          "old_api": null,
          "new_api": "createStringObject",
          "old_text": null,
          "new_text": "createStringObject((char*)hi->zv,hi->zvlen)",
          "old_line_content": "        if (what & REDIS_HASH_KEY) {",
          "new_line_content": "            o = createStringObject((char*)hi->zv,hi->zvlen);",
          "content_same": false
        },
        {
          "line": 6474,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(hi->de)",
          "old_line_content": "        }",
          "new_line_content": "            o = dictGetEntryKey(hi->de);",
          "content_same": false
        },
        {
          "line": 6476,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(hi->de)",
          "old_line_content": "    }",
          "new_line_content": "            o = dictGetEntryVal(hi->de);",
          "content_same": false
        },
        {
          "line": 6478,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(o)",
          "old_line_content": "}",
          "new_line_content": "        incrRefCount(o);",
          "content_same": false
        },
        {
          "line": 6486,
          "old_api": null,
          "new_api": "createHashObject",
          "old_text": null,
          "new_text": "createHashObject()",
          "old_line_content": "    } else {",
          "new_line_content": "        o = createHashObject();",
          "content_same": false
        },
        {
          "line": 6487,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(c->db->dict,key,o)",
          "old_line_content": "        if (o->type != REDIS_HASH) {",
          "new_line_content": "        dictAdd(c->db->dict,key,o);",
          "content_same": false
        },
        {
          "line": 6491,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "    }",
          "new_line_content": "            addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 6505,
          "old_api": null,
          "new_api": "hashTryObjectEncoding",
          "old_text": null,
          "new_text": "hashTryObjectEncoding(o,&c->argv[2], &c->argv[3])",
          "old_line_content": "    server.dirty++;",
          "new_line_content": "    hashTryObjectEncoding(o,&c->argv[2], &c->argv[3]);",
          "content_same": false
        },
        {
          "line": 6506,
          "old_api": null,
          "new_api": "hashSet",
          "old_text": null,
          "new_text": "hashSet(o,c->argv[2],c->argv[3])",
          "old_line_content": "}",
          "new_line_content": "    update = hashSet(o,c->argv[2],c->argv[3]);",
          "content_same": false
        },
        {
          "line": 6507,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, update ? shared.czero : shared.cone)",
          "old_line_content": "",
          "new_line_content": "    addReply(c, update ? shared.czero : shared.cone);",
          "content_same": false
        },
        {
          "line": 6519,
          "old_api": null,
          "new_api": "hashTryObjectEncoding",
          "old_text": null,
          "new_text": "hashTryObjectEncoding(o,&c->argv[2], &c->argv[3])",
          "old_line_content": "        server.dirty++;",
          "new_line_content": "        hashTryObjectEncoding(o,&c->argv[2], &c->argv[3]);",
          "content_same": false
        },
        {
          "line": 6520,
          "old_api": null,
          "new_api": "hashSet",
          "old_text": null,
          "new_text": "hashSet(o,c->argv[2],c->argv[3])",
          "old_line_content": "    }",
          "new_line_content": "        hashSet(o,c->argv[2],c->argv[3]);",
          "content_same": false
        },
        {
          "line": 6521,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.cone)",
          "old_line_content": "}",
          "new_line_content": "        addReply(c, shared.cone);",
          "content_same": false
        },
        {
          "line": 6531,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"-ERR wrong number of arguments for HMSET\\r\\n\")",
          "old_line_content": "",
          "new_line_content": "        addReplySds(c,sdsnew(\"-ERR wrong number of arguments for HMSET\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 6539,
          "old_api": null,
          "new_api": "hashSet",
          "old_text": null,
          "new_text": "hashSet(o,c->argv[i],c->argv[i+1])",
          "old_line_content": "    server.dirty++;",
          "new_line_content": "        hashSet(o,c->argv[i],c->argv[i+1]);",
          "content_same": false
        },
        {
          "line": 6541,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.ok)",
          "old_line_content": "",
          "new_line_content": "    addReply(c, shared.ok);",
          "content_same": false
        },
        {
          "line": 6550,
          "old_api": null,
          "new_api": "hashLookupWriteOrCreate",
          "old_text": null,
          "new_text": "hashLookupWriteOrCreate(c,c->argv[1])",
          "old_line_content": "            \"hash value is not an integer\") != REDIS_OK) {",
          "new_line_content": "    if ((o = hashLookupWriteOrCreate(c,c->argv[1])) == NULL) return;",
          "content_same": false
        },
        {
          "line": 6552,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c,current,&value,\n            \"hash value is not an integer\")",
          "old_line_content": "            return;",
          "new_line_content": "        if (getLongLongFromObjectOrReply(c,current,&value,",
          "content_same": false
        },
        {
          "line": 6557,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(current)",
          "old_line_content": "    }",
          "new_line_content": "        decrRefCount(current);",
          "content_same": false
        },
        {
          "line": 6565,
          "old_api": null,
          "new_api": "hashSet",
          "old_text": null,
          "new_text": "hashSet(o,c->argv[2],new)",
          "old_line_content": "    server.dirty++;",
          "new_line_content": "    hashSet(o,c->argv[2],new);",
          "content_same": false
        },
        {
          "line": 6567,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,value)",
          "old_line_content": "",
          "new_line_content": "    addReplyLongLong(c,value);",
          "content_same": false
        },
        {
          "line": 6576,
          "old_api": null,
          "new_api": "hashGet",
          "old_text": null,
          "new_text": "hashGet(o,c->argv[2])",
          "old_line_content": "    } else {",
          "new_line_content": "    if ((value = hashGet(o,c->argv[2])) != NULL) {",
          "content_same": false
        },
        {
          "line": 6578,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(value)",
          "old_line_content": "    }",
          "new_line_content": "        decrRefCount(value);",
          "content_same": false
        },
        {
          "line": 6580,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "",
          "new_line_content": "        addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 6587,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[1])",
          "old_line_content": "    }",
          "new_line_content": "    o = lookupKeyRead(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 6589,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "    /* Note the check for o != NULL happens inside the loop. This is",
          "new_line_content": "        addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 6597,
          "old_api": null,
          "new_api": "hashGet",
          "old_text": null,
          "new_text": "hashGet(o,c->argv[i])",
          "old_line_content": "        } else {",
          "new_line_content": "        if (o != NULL && (value = hashGet(o,c->argv[i])) != NULL) {",
          "content_same": false
        },
        {
          "line": 6599,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(value)",
          "old_line_content": "        }",
          "new_line_content": "            decrRefCount(value);",
          "content_same": false
        },
        {
          "line": 6601,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "}",
          "new_line_content": "            addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 6611,
          "old_api": null,
          "new_api": "hashDelete",
          "old_text": null,
          "new_text": "hashDelete(o,c->argv[2])",
          "old_line_content": "        server.dirty++;",
          "new_line_content": "    if (hashDelete(o,c->argv[2])) {",
          "content_same": false
        },
        {
          "line": 6612,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(c->db,c->argv[1])",
          "old_line_content": "    } else {",
          "new_line_content": "        if (hashLength(o) == 0) deleteKey(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 6616,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 6623,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,REDIS_HASH)",
          "old_line_content": "}",
          "new_line_content": "        checkType(c,o,REDIS_HASH)) return;",
          "content_same": false
        },
        {
          "line": 6625,
          "old_api": null,
          "new_api": "hashLength",
          "old_text": null,
          "new_text": "hashLength(o)",
          "old_line_content": "static void genericHgetallCommand(redisClient *c, int flags) {",
          "new_line_content": "    addReplyUlong(c,hashLength(o));",
          "content_same": false
        },
        {
          "line": 6636,
          "old_api": null,
          "new_api": "createObject",
          "old_text": null,
          "new_text": "createObject(REDIS_STRING,NULL)",
          "old_line_content": "",
          "new_line_content": "    lenobj = createObject(REDIS_STRING,NULL);",
          "content_same": false
        },
        {
          "line": 6643,
          "old_api": null,
          "new_api": "hashCurrent",
          "old_text": null,
          "new_text": "hashCurrent(hi,REDIS_HASH_KEY)",
          "old_line_content": "            count++;",
          "new_line_content": "            obj = hashCurrent(hi,REDIS_HASH_KEY);",
          "content_same": false
        },
        {
          "line": 6644,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,obj)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyBulk(c,obj);",
          "content_same": false
        },
        {
          "line": 6645,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(obj)",
          "old_line_content": "        if (flags & REDIS_HASH_VALUE) {",
          "new_line_content": "            decrRefCount(obj);",
          "content_same": false
        },
        {
          "line": 6649,
          "old_api": null,
          "new_api": "hashCurrent",
          "old_text": null,
          "new_text": "hashCurrent(hi,REDIS_HASH_VALUE)",
          "old_line_content": "            count++;",
          "new_line_content": "            obj = hashCurrent(hi,REDIS_HASH_VALUE);",
          "content_same": false
        },
        {
          "line": 6650,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,obj)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyBulk(c,obj);",
          "content_same": false
        },
        {
          "line": 6651,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(obj)",
          "old_line_content": "    }",
          "new_line_content": "            decrRefCount(obj);",
          "content_same": false
        },
        {
          "line": 6655,
          "old_api": null,
          "new_api": "hashReleaseIterator",
          "old_text": null,
          "new_text": "hashReleaseIterator(hi)",
          "old_line_content": "}",
          "new_line_content": "    hashReleaseIterator(hi);",
          "content_same": false
        },
        {
          "line": 6657,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "static void hkeysCommand(redisClient *c) {",
          "new_line_content": "    lenobj->ptr = sdscatprintf(sdsempty(),\"*%lu\\r\\n\",count);",
          "content_same": false
        },
        {
          "line": 6661,
          "old_api": null,
          "new_api": "genericHgetallCommand",
          "old_text": null,
          "new_text": "genericHgetallCommand(c,REDIS_HASH_KEY)",
          "old_line_content": "static void hvalsCommand(redisClient *c) {",
          "new_line_content": "    genericHgetallCommand(c,REDIS_HASH_KEY);",
          "content_same": false
        },
        {
          "line": 6665,
          "old_api": null,
          "new_api": "genericHgetallCommand",
          "old_text": null,
          "new_text": "genericHgetallCommand(c,REDIS_HASH_VALUE)",
          "old_line_content": "static void hgetallCommand(redisClient *c) {",
          "new_line_content": "    genericHgetallCommand(c,REDIS_HASH_VALUE);",
          "content_same": false
        },
        {
          "line": 6669,
          "old_api": null,
          "new_api": "genericHgetallCommand",
          "old_text": null,
          "new_text": "genericHgetallCommand(c,REDIS_HASH_KEY|REDIS_HASH_VALUE)",
          "old_line_content": "static void hexistsCommand(redisClient *c) {",
          "new_line_content": "    genericHgetallCommand(c,REDIS_HASH_KEY|REDIS_HASH_VALUE);",
          "content_same": false
        },
        {
          "line": 6675,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,REDIS_HASH)",
          "old_line_content": "}",
          "new_line_content": "        checkType(c,o,REDIS_HASH)) return;",
          "content_same": false
        },
        {
          "line": 6677,
          "old_api": null,
          "new_api": "hashExists",
          "old_text": null,
          "new_text": "hashExists(o,c->argv[2])",
          "old_line_content": "static void convertToRealHash(robj *o) {",
          "new_line_content": "    addReply(c, hashExists(o,c->argv[2]) ? shared.cone : shared.czero);",
          "content_same": false
        },
        {
          "line": 6685,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(o->type == REDIS_HASH && o->encoding != REDIS_ENCODING_HT)",
          "old_line_content": "        robj *keyobj, *valobj;",
          "new_line_content": "    assert(o->type == REDIS_HASH && o->encoding != REDIS_ENCODING_HT);",
          "content_same": false
        },
        {
          "line": 6686,
          "old_api": null,
          "new_api": "zipmapRewind",
          "old_text": null,
          "new_text": "zipmapRewind(zm)",
          "old_line_content": "",
          "new_line_content": "    p = zipmapRewind(zm);",
          "content_same": false
        },
        {
          "line": 6692,
          "old_api": null,
          "new_api": "tryObjectEncoding",
          "old_text": null,
          "new_text": "tryObjectEncoding(keyobj)",
          "old_line_content": "    }",
          "new_line_content": "        keyobj = tryObjectEncoding(keyobj);",
          "content_same": false
        },
        {
          "line": 6693,
          "old_api": null,
          "new_api": "tryObjectEncoding",
          "old_text": null,
          "new_text": "tryObjectEncoding(valobj)",
          "old_line_content": "    o->encoding = REDIS_ENCODING_HT;",
          "new_line_content": "        valobj = tryObjectEncoding(valobj);",
          "content_same": false
        },
        {
          "line": 6694,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(dict,keyobj,valobj)",
          "old_line_content": "    o->ptr = dict;",
          "new_line_content": "        dictAdd(dict,keyobj,valobj);",
          "content_same": false
        },
        {
          "line": 6698,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(zm)",
          "old_line_content": "/* ========================= Non type-specific commands  ==================== */",
          "new_line_content": "    zfree(zm);",
          "content_same": false
        },
        {
          "line": 6705,
          "old_api": null,
          "new_api": "dictEmpty",
          "old_text": null,
          "new_text": "dictEmpty(c->db->dict)",
          "old_line_content": "}",
          "new_line_content": "    dictEmpty(c->db->dict);",
          "content_same": false
        },
        {
          "line": 6706,
          "old_api": null,
          "new_api": "dictEmpty",
          "old_text": null,
          "new_text": "dictEmpty(c->db->expires)",
          "old_line_content": "",
          "new_line_content": "    dictEmpty(c->db->expires);",
          "content_same": false
        },
        {
          "line": 6707,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "static void flushallCommand(redisClient *c) {",
          "new_line_content": "    addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 6715,
          "old_api": null,
          "new_api": "rdbRemoveTempFile",
          "old_text": null,
          "new_text": "rdbRemoveTempFile(server.bgsavechildpid)",
          "old_line_content": "    server.dirty++;",
          "new_line_content": "        rdbRemoveTempFile(server.bgsavechildpid);",
          "content_same": false
        },
        {
          "line": 6717,
          "old_api": null,
          "new_api": "rdbSave",
          "old_text": null,
          "new_text": "rdbSave(server.dbfilename)",
          "old_line_content": "",
          "new_line_content": "    rdbSave(server.dbfilename);",
          "content_same": false
        },
        {
          "line": 6722,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*so))",
          "old_line_content": "    return so;",
          "new_line_content": "    redisSortOperation *so = zmalloc(sizeof(*so));",
          "content_same": false
        },
        {
          "line": 6748,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(subst)",
          "old_line_content": "",
          "new_line_content": "        incrRefCount(subst);",
          "content_same": false
        },
        {
          "line": 6759,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(spat,'*')",
          "old_line_content": "        return NULL;",
          "new_line_content": "    p = strchr(spat,'*');",
          "content_same": false
        },
        {
          "line": 6761,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(subst)",
          "old_line_content": "",
          "new_line_content": "        decrRefCount(subst);",
          "content_same": false
        },
        {
          "line": 6767,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(spat)",
          "old_line_content": "        fieldname.len = fieldlen-2;",
          "new_line_content": "        fieldlen = sdslen(spat)-(f-spat);",
          "content_same": false
        },
        {
          "line": 6769,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(fieldname.buf,f+2,fieldlen-1)",
          "old_line_content": "        fieldlen = 0;",
          "new_line_content": "        memcpy(fieldname.buf,f+2,fieldlen-1);",
          "content_same": false
        },
        {
          "line": 6778,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(keyname.buf,spat,prefixlen)",
          "old_line_content": "    keyname.buf[prefixlen+sublen+postfixlen] = '\\0';",
          "new_line_content": "    memcpy(keyname.buf,spat,prefixlen);",
          "content_same": false
        },
        {
          "line": 6779,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(keyname.buf+prefixlen,ssub,sublen)",
          "old_line_content": "    keyname.len = prefixlen+sublen+postfixlen;",
          "new_line_content": "    memcpy(keyname.buf+prefixlen,ssub,sublen);",
          "content_same": false
        },
        {
          "line": 6786,
          "old_api": null,
          "new_api": "initStaticStringObject",
          "old_text": null,
          "new_text": "initStaticStringObject(keyobj,((char*)&keyname)+(sizeof(long)*2))",
          "old_line_content": "",
          "new_line_content": "    initStaticStringObject(keyobj,((char*)&keyname)+(sizeof(long)*2));",
          "content_same": false
        },
        {
          "line": 6787,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(db,&keyobj)",
          "old_line_content": "    if (fieldlen > 0) {",
          "new_line_content": "    o = lookupKeyRead(db,&keyobj);",
          "content_same": false
        },
        {
          "line": 6795,
          "old_api": null,
          "new_api": "initStaticStringObject",
          "old_text": null,
          "new_text": "initStaticStringObject(fieldobj,((char*)&fieldname)+(sizeof(long)*2))",
          "old_line_content": "        if (o->type != REDIS_STRING) return NULL;",
          "new_line_content": "        initStaticStringObject(fieldobj,((char*)&fieldname)+(sizeof(long)*2));",
          "content_same": false
        },
        {
          "line": 6796,
          "old_api": null,
          "new_api": "hashGet",
          "old_text": null,
          "new_text": "hashGet(o, &fieldobj)",
          "old_line_content": "",
          "new_line_content": "        o = hashGet(o, &fieldobj);",
          "content_same": false
        },
        {
          "line": 6802,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(o)",
          "old_line_content": "    return o;",
          "new_line_content": "        incrRefCount(o);",
          "content_same": false
        },
        {
          "line": 6837,
          "old_api": null,
          "new_api": "strcoll",
          "old_text": null,
          "new_text": "strcoll(so1->u.cmpobj->ptr,so2->u.cmpobj->ptr)",
          "old_line_content": "            /* Compare elements directly. */",
          "new_line_content": "                cmp = strcoll(so1->u.cmpobj->ptr,so2->u.cmpobj->ptr);",
          "content_same": false
        },
        {
          "line": 6841,
          "old_api": null,
          "new_api": "compareStringObjects",
          "old_text": null,
          "new_text": "compareStringObjects(so1->obj,so2->obj)",
          "old_line_content": "    return server.sort_desc ? -cmp : cmp;",
          "new_line_content": "            cmp = compareStringObjects(so1->obj,so2->obj);",
          "content_same": false
        },
        {
          "line": 6860,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[1])",
          "old_line_content": "        return;",
          "new_line_content": "    sortval = lookupKeyRead(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 6862,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.emptymultibulk)",
          "old_line_content": "    if (sortval->type != REDIS_SET && sortval->type != REDIS_LIST &&",
          "new_line_content": "        addReply(c,shared.emptymultibulk);",
          "content_same": false
        },
        {
          "line": 6868,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "",
          "new_line_content": "        addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 6874,
          "old_api": null,
          "new_api": "listCreate",
          "old_text": null,
          "new_text": "listCreate()",
          "old_line_content": "",
          "new_line_content": "    operations = listCreate();",
          "content_same": false
        },
        {
          "line": 6875,
          "old_api": null,
          "new_api": "listSetFreeMethod",
          "old_text": null,
          "new_text": "listSetFreeMethod(operations,zfree)",
          "old_line_content": "    /* Now we need to protect sortval incrementing its count, in the future",
          "new_line_content": "    listSetFreeMethod(operations,zfree);",
          "content_same": false
        },
        {
          "line": 6881,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(sortval)",
          "old_line_content": "    while(j < c->argc) {",
          "new_line_content": "    incrRefCount(sortval);",
          "content_same": false
        },
        {
          "line": 6886,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"asc\")",
          "old_line_content": "            desc = 1;",
          "new_line_content": "        if (!strcasecmp(c->argv[j]->ptr,\"asc\")) {",
          "content_same": false
        },
        {
          "line": 6888,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"desc\")",
          "old_line_content": "            alpha = 1;",
          "new_line_content": "        } else if (!strcasecmp(c->argv[j]->ptr,\"desc\")) {",
          "content_same": false
        },
        {
          "line": 6892,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"limit\")",
          "old_line_content": "            j+=2;",
          "new_line_content": "        } else if (!strcasecmp(c->argv[j]->ptr,\"limit\") && leftargs >= 2) {",
          "content_same": false
        },
        {
          "line": 6894,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(c->argv[j+2]->ptr)",
          "old_line_content": "            storekey = c->argv[j+1];",
          "new_line_content": "            limit_count = atoi(c->argv[j+2]->ptr);",
          "content_same": false
        },
        {
          "line": 6899,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"by\")",
          "old_line_content": "             * we don't need to sort nor to lookup the weight keys. */",
          "new_line_content": "        } else if (!strcasecmp(c->argv[j]->ptr,\"by\") && leftargs >= 1) {",
          "content_same": false
        },
        {
          "line": 6905,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"get\")",
          "old_line_content": "            getop++;",
          "new_line_content": "        } else if (!strcasecmp(c->argv[j]->ptr,\"get\") && leftargs >= 1) {",
          "content_same": false
        },
        {
          "line": 6906,
          "old_api": null,
          "new_api": "createSortOperation",
          "old_text": null,
          "new_text": "createSortOperation(\n                REDIS_SORT_GET,c->argv[j+1])",
          "old_line_content": "            j++;",
          "new_line_content": "            listAddNodeTail(operations,createSortOperation(",
          "content_same": false
        },
        {
          "line": 6911,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(sortval)",
          "old_line_content": "            return;",
          "new_line_content": "            decrRefCount(sortval);",
          "content_same": false
        },
        {
          "line": 6912,
          "old_api": null,
          "new_api": "listRelease",
          "old_text": null,
          "new_text": "listRelease(operations)",
          "old_line_content": "        }",
          "new_line_content": "            listRelease(operations);",
          "content_same": false
        },
        {
          "line": 6913,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "        j++;",
          "new_line_content": "            addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 6922,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize((dict*)sortval->ptr)",
          "old_line_content": "    }",
          "new_line_content": "    case REDIS_SET: vectorlen =  dictSize((dict*)sortval->ptr); break;",
          "content_same": false
        },
        {
          "line": 6924,
          "old_api": null,
          "new_api": "redisPanic",
          "old_text": null,
          "new_text": "redisPanic(\"Bad SORT type\")",
          "old_line_content": "    j = 0;",
          "new_line_content": "    default: vectorlen = 0; redisPanic(\"Bad SORT type\"); /* Avoid GCC warning */",
          "content_same": false
        },
        {
          "line": 6926,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(redisSortObject)*vectorlen)",
          "old_line_content": "    if (sortval->type == REDIS_LIST) {",
          "new_line_content": "    vector = zmalloc(sizeof(redisSortObject)*vectorlen);",
          "content_same": false
        },
        {
          "line": 6934,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(list,&li)",
          "old_line_content": "            vector[j].obj = ele;",
          "new_line_content": "        listRewind(list,&li);",
          "content_same": false
        },
        {
          "line": 6935,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&li)",
          "old_line_content": "            vector[j].u.score = 0;",
          "new_line_content": "        while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 6954,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(set)",
          "old_line_content": "            vector[j].u.score = 0;",
          "new_line_content": "        di = dictGetIterator(set);",
          "content_same": false
        },
        {
          "line": 6955,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "            vector[j].u.cmpobj = NULL;",
          "new_line_content": "        while((setele = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 6956,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(setele)",
          "old_line_content": "            j++;",
          "new_line_content": "            vector[j].obj = dictGetEntryKey(setele);",
          "content_same": false
        },
        {
          "line": 6961,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "",
          "new_line_content": "        dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 6963,
          "old_api": null,
          "new_api": "redisAssert",
          "old_text": null,
          "new_text": "redisAssert(j == vectorlen)",
          "old_line_content": "    if (dontsort == 0) {",
          "new_line_content": "    redisAssert(j == vectorlen);",
          "content_same": false
        },
        {
          "line": 6971,
          "old_api": null,
          "new_api": "lookupKeyByPattern",
          "old_text": null,
          "new_text": "lookupKeyByPattern(c->db,sortby,vector[j].obj)",
          "old_line_content": "                /* use object itself to sort by */",
          "new_line_content": "                byval = lookupKeyByPattern(c->db,sortby,vector[j].obj);",
          "content_same": false
        },
        {
          "line": 6982,
          "old_api": null,
          "new_api": "strtod",
          "old_text": null,
          "new_text": "strtod(byval->ptr,NULL)",
          "old_line_content": "                     * integer-encoded (the only encoding supported) so",
          "new_line_content": "                    vector[j].u.score = strtod(byval->ptr,NULL);",
          "content_same": false
        },
        {
          "line": 6989,
          "old_api": null,
          "new_api": "redisAssert",
          "old_text": null,
          "new_text": "redisAssert(1 != 1)",
          "old_line_content": "",
          "new_line_content": "                    redisAssert(1 != 1);",
          "content_same": false
        },
        {
          "line": 6996,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(byval)",
          "old_line_content": "    }",
          "new_line_content": "                decrRefCount(byval);",
          "content_same": false
        },
        {
          "line": 7016,
          "old_api": null,
          "new_api": "pqsort",
          "old_text": null,
          "new_text": "pqsort(vector,vectorlen,sizeof(redisSortObject),sortCompare, start,end)",
          "old_line_content": "    }",
          "new_line_content": "            pqsort(vector,vectorlen,sizeof(redisSortObject),sortCompare, start,end);",
          "content_same": false
        },
        {
          "line": 7018,
          "old_api": null,
          "new_api": "qsort",
          "old_text": null,
          "new_text": "qsort(vector,vectorlen,sizeof(redisSortObject),sortCompare)",
          "old_line_content": "    /* Send command output to the output buffer, performing the specified",
          "new_line_content": "            qsort(vector,vectorlen,sizeof(redisSortObject),sortCompare);",
          "content_same": false
        },
        {
          "line": 7026,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "            listIter li;",
          "new_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",outputlen));",
          "content_same": false
        },
        {
          "line": 7031,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,vector[j].obj)",
          "old_line_content": "                redisSortOperation *sop = ln->value;",
          "new_line_content": "            if (!getop) addReplyBulk(c,vector[j].obj);",
          "content_same": false
        },
        {
          "line": 7033,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&li)",
          "old_line_content": "                    vector[j].obj);",
          "new_line_content": "            while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 7035,
          "old_api": null,
          "new_api": "lookupKeyByPattern",
          "old_text": null,
          "new_text": "lookupKeyByPattern(c->db,sop->pattern,\n                    vector[j].obj)",
          "old_line_content": "                if (sop->type == REDIS_SORT_GET) {",
          "new_line_content": "                robj *val = lookupKeyByPattern(c->db,sop->pattern,",
          "content_same": false
        },
        {
          "line": 7042,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,val)",
          "old_line_content": "                } else {",
          "new_line_content": "                        addReplyBulk(c,val);",
          "content_same": false
        },
        {
          "line": 7046,
          "old_api": null,
          "new_api": "redisAssert",
          "old_text": null,
          "new_text": "redisAssert(sop->type == REDIS_SORT_GET)",
          "old_line_content": "        }",
          "new_line_content": "                    redisAssert(sop->type == REDIS_SORT_GET); /* always fails */",
          "content_same": false
        },
        {
          "line": 7051,
          "old_api": null,
          "new_api": "createListObject",
          "old_text": null,
          "new_text": "createListObject()",
          "old_line_content": "        /* STORE option specified, set the sorting result as a List object */",
          "new_line_content": "        robj *listObject = createListObject();",
          "content_same": false
        },
        {
          "line": 7064,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&li)",
          "old_line_content": "                    vector[j].obj);",
          "new_line_content": "            while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 7066,
          "old_api": null,
          "new_api": "lookupKeyByPattern",
          "old_text": null,
          "new_text": "lookupKeyByPattern(c->db,sop->pattern,\n                    vector[j].obj)",
          "old_line_content": "                if (sop->type == REDIS_SORT_GET) {",
          "new_line_content": "                robj *val = lookupKeyByPattern(c->db,sop->pattern,",
          "content_same": false
        },
        {
          "line": 7071,
          "old_api": null,
          "new_api": "createStringObject",
          "old_text": null,
          "new_text": "createStringObject(\"\",0)",
          "old_line_content": "                         * added to the list, but also a decrRefCount because",
          "new_line_content": "                        listAddNodeTail(listPtr,createStringObject(\"\",0));",
          "content_same": false
        },
        {
          "line": 7080,
          "old_api": null,
          "new_api": "redisAssert",
          "old_text": null,
          "new_text": "redisAssert(sop->type == REDIS_SORT_GET)",
          "old_line_content": "        }",
          "new_line_content": "                    redisAssert(sop->type == REDIS_SORT_GET); /* always fails */",
          "content_same": false
        },
        {
          "line": 7084,
          "old_api": null,
          "new_api": "dictReplace",
          "old_text": null,
          "new_text": "dictReplace(c->db->dict,storekey,listObject)",
          "old_line_content": "        /* Note: we add 1 because the DB is dirty anyway since even if the",
          "new_line_content": "        if (dictReplace(c->db->dict,storekey,listObject)) {",
          "content_same": false
        },
        {
          "line": 7085,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(storekey)",
          "old_line_content": "         * SORT result is empty a new key is set and maybe the old content",
          "new_line_content": "            incrRefCount(storekey);",
          "content_same": false
        },
        {
          "line": 7091,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "    /* Cleanup */",
          "new_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),\":%d\\r\\n\",outputlen));",
          "content_same": false
        },
        {
          "line": 7095,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(sortval)",
          "old_line_content": "        if (alpha && vector[j].u.cmpobj)",
          "new_line_content": "    decrRefCount(sortval);",
          "content_same": false
        },
        {
          "line": 7099,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(vector[j].u.cmpobj)",
          "old_line_content": "}",
          "new_line_content": "            decrRefCount(vector[j].u.cmpobj);",
          "content_same": false
        },
        {
          "line": 7101,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(vector)",
          "old_line_content": "/* Convert an amount of bytes into a human readable string in the form",
          "new_line_content": "    zfree(vector);",
          "content_same": false
        },
        {
          "line": 7111,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(s,\"%lluB\",n)",
          "old_line_content": "        d = (double)n/(1024);",
          "new_line_content": "        sprintf(s,\"%lluB\",n);",
          "content_same": false
        },
        {
          "line": 7121,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(s,\"%.2fG\",d)",
          "old_line_content": "",
          "new_line_content": "        sprintf(s,\"%.2fG\",d);",
          "content_same": false
        },
        {
          "line": 7130,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "",
          "new_line_content": "    time_t uptime = time(NULL)-server.stat_starttime;",
          "content_same": false
        },
        {
          "line": 7134,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "        \"arch_bits:%s\\r\\n\"",
          "new_line_content": "    bytesToHuman(hmem,zmalloc_used_memory());",
          "content_same": false
        },
        {
          "line": 7135,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "        \"multiplexing_api:%s\\r\\n\"",
          "new_line_content": "    info = sdscatprintf(sdsempty(),",
          "content_same": false
        },
        {
          "line": 7162,
          "old_api": null,
          "new_api": "aeGetApiName",
          "old_text": null,
          "new_text": "aeGetApiName()",
          "old_line_content": "        uptime/(3600*24),",
          "new_line_content": "        aeGetApiName(),",
          "content_same": false
        },
        {
          "line": 7167,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.slaves)",
          "old_line_content": "        hmem,",
          "new_line_content": "        listLength(server.slaves),",
          "content_same": false
        },
        {
          "line": 7169,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "        server.bgsavechildpid != -1,",
          "new_line_content": "        zmalloc_used_memory(),",
          "content_same": false
        },
        {
          "line": 7180,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(server.pubsub_channels)",
          "old_line_content": "        server.masterhost == NULL ? \"master\" : \"slave\"",
          "new_line_content": "        dictSize(server.pubsub_channels),",
          "content_same": false
        },
        {
          "line": 7181,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.pubsub_patterns)",
          "old_line_content": "    );",
          "new_line_content": "        listLength(server.pubsub_patterns),",
          "content_same": false
        },
        {
          "line": 7186,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"master_host:%s\\r\\n\"\n            \"master_port:%d\\r\\n\"\n            \"master_link_status:%s\\r\\n\"\n            \"master_last_io_seconds_ago:%d\\r\\n\"\n            ,server.masterhost,\n            server.masterport,\n            (server.replstate == REDIS_REPL_CONNECTED) ?\n                \"up\" : \"down\",\n            server.master ? ((int)(time(NULL)-server.master->lastinteraction)) : -1\n        )",
          "old_line_content": "            \"master_link_status:%s\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 7195,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    if (server.vm_enabled) {",
          "new_line_content": "            server.master ? ((int)(time(NULL)-server.master->lastinteraction)) : -1",
          "content_same": false
        },
        {
          "line": 7199,
          "old_api": null,
          "new_api": "lockThreadedIO",
          "old_text": null,
          "new_text": "lockThreadedIO()",
          "old_line_content": "            \"vm_conf_page_size:%llu\\r\\n\"",
          "new_line_content": "        lockThreadedIO();",
          "content_same": false
        },
        {
          "line": 7200,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"vm_conf_max_memory:%llu\\r\\n\"\n            \"vm_conf_page_size:%llu\\r\\n\"\n            \"vm_conf_pages:%llu\\r\\n\"\n            \"vm_stats_used_pages:%llu\\r\\n\"\n            \"vm_stats_swapped_objects:%llu\\r\\n\"\n            \"vm_stats_swappin_count:%llu\\r\\n\"\n            \"vm_stats_swappout_count:%llu\\r\\n\"\n            \"vm_stats_io_newjobs_len:%lu\\r\\n\"\n            \"vm_stats_io_processing_len:%lu\\r\\n\"\n            \"vm_stats_io_processed_len:%lu\\r\\n\"\n            \"vm_stats_io_active_threads:%lu\\r\\n\"\n            \"vm_stats_blocked_clients:%lu\\r\\n\"\n            ,(unsigned long long) server.vm_max_memory,\n            (unsigned long long) server.vm_page_size,\n            (unsigned long long) server.vm_pages,\n            (unsigned long long) server.vm_stats_used_pages,\n            (unsigned long long) server.vm_stats_swapped_objects,\n            (unsigned long long) server.vm_stats_swapins,\n            (unsigned long long) server.vm_stats_swapouts,\n            (unsigned long) listLength(server.io_newjobs),\n            (unsigned long) listLength(server.io_processing),\n            (unsigned long) listLength(server.io_processed),\n            (unsigned long) server.io_active_threads,\n            (unsigned long) server.vm_blocked_clients\n        )",
          "old_line_content": "            \"vm_conf_pages:%llu\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 7220,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.io_newjobs)",
          "old_line_content": "            (unsigned long) server.io_active_threads,",
          "new_line_content": "            (unsigned long) listLength(server.io_newjobs),",
          "content_same": false
        },
        {
          "line": 7221,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.io_processing)",
          "old_line_content": "            (unsigned long) server.vm_blocked_clients",
          "new_line_content": "            (unsigned long) listLength(server.io_processing),",
          "content_same": false
        },
        {
          "line": 7222,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.io_processed)",
          "old_line_content": "        );",
          "new_line_content": "            (unsigned long) listLength(server.io_processed),",
          "content_same": false
        },
        {
          "line": 7226,
          "old_api": null,
          "new_api": "unlockThreadedIO",
          "old_text": null,
          "new_text": "unlockThreadedIO()",
          "old_line_content": "        long long keys, vkeys;",
          "new_line_content": "        unlockThreadedIO();",
          "content_same": false
        },
        {
          "line": 7232,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(server.db[j].expires)",
          "old_line_content": "                j, keys, vkeys);",
          "new_line_content": "        vkeys = dictSize(server.db[j].expires);",
          "content_same": false
        },
        {
          "line": 7234,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info, \"db%d:keys=%lld,expires=%lld\\r\\n\",\n                j, keys, vkeys)",
          "old_line_content": "    }",
          "new_line_content": "            info = sdscatprintf(info, \"db%d:keys=%lld,expires=%lld\\r\\n\",",
          "content_same": false
        },
        {
          "line": 7244,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(info)",
          "old_line_content": "}",
          "new_line_content": "        (unsigned long)sdslen(info)));",
          "content_same": false
        },
        {
          "line": 7245,
          "old_api": null,
          "new_api": "addReplySds",
          "old_text": null,
          "new_text": "addReplySds(c,info)",
          "old_line_content": "",
          "new_line_content": "    addReplySds(c,info);",
          "content_same": false
        },
        {
          "line": 7246,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.crlf)",
          "old_line_content": "static void monitorCommand(redisClient *c) {",
          "new_line_content": "    addReply(c,shared.crlf);",
          "content_same": false
        },
        {
          "line": 7255,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(server.monitors,c)",
          "old_line_content": "",
          "new_line_content": "    listAddNodeTail(server.monitors,c);",
          "content_same": false
        },
        {
          "line": 7256,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "/* ================================= Expire ================================= */",
          "new_line_content": "    addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 7261,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(db->expires,key)",
          "old_line_content": "        return 0;",
          "new_line_content": "    if (dictDelete(db->expires,key) == DICT_OK) {",
          "content_same": false
        },
        {
          "line": 7272,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(key)",
          "old_line_content": "}",
          "new_line_content": "        incrRefCount(key);",
          "content_same": false
        },
        {
          "line": 7284,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(db->expires,key)",
          "old_line_content": "}",
          "new_line_content": "       (de = dictFind(db->expires,key)) == NULL) return -1;",
          "content_same": false
        },
        {
          "line": 7286,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "static int expireIfNeeded(redisDb *db, robj *key) {",
          "new_line_content": "    return (time_t) dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 7294,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(db->expires)",
          "old_line_content": "    /* Lookup the expire */",
          "new_line_content": "    if (dictSize(db->expires) == 0 ||",
          "content_same": false
        },
        {
          "line": 7298,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "    /* Delete the key */",
          "new_line_content": "    when = (time_t) dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 7302,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(db->expires,key)",
          "old_line_content": "}",
          "new_line_content": "    dictDelete(db->expires,key);",
          "content_same": false
        },
        {
          "line": 7304,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(db->dict,key)",
          "old_line_content": "static int deleteIfVolatile(redisDb *db, robj *key) {",
          "new_line_content": "    return dictDelete(db->dict,key) == DICT_OK;",
          "content_same": false
        },
        {
          "line": 7311,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(db->expires)",
          "old_line_content": "    /* Delete the key */",
          "new_line_content": "    if (dictSize(db->expires) == 0 ||",
          "content_same": false
        },
        {
          "line": 7312,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(db->expires,key)",
          "old_line_content": "    server.dirty++;",
          "new_line_content": "       (de = dictFind(db->expires,key)) == NULL) return 0;",
          "content_same": false
        },
        {
          "line": 7317,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(db->expires,key)",
          "old_line_content": "",
          "new_line_content": "    dictDelete(db->expires,key);",
          "content_same": false
        },
        {
          "line": 7318,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(db->dict,key)",
          "old_line_content": "static void expireGenericCommand(redisClient *c, robj *key, robj *param, long offset) {",
          "new_line_content": "    return dictDelete(db->dict,key) == DICT_OK;",
          "content_same": false
        },
        {
          "line": 7325,
          "old_api": null,
          "new_api": "getLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongFromObjectOrReply(c, param, &seconds, NULL)",
          "old_line_content": "",
          "new_line_content": "    if (getLongFromObjectOrReply(c, param, &seconds, NULL) != REDIS_OK) return;",
          "content_same": false
        },
        {
          "line": 7329,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(c->db->dict,key)",
          "old_line_content": "        return;",
          "new_line_content": "    de = dictFind(c->db->dict,key);",
          "content_same": false
        },
        {
          "line": 7331,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "    if (seconds <= 0) {",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 7335,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(c->db,key)",
          "old_line_content": "    } else {",
          "new_line_content": "        if (deleteKey(c->db,key)) server.dirty++;",
          "content_same": false
        },
        {
          "line": 7339,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "            server.dirty++;",
          "new_line_content": "        time_t when = time(NULL)+seconds;",
          "content_same": false
        },
        {
          "line": 7340,
          "old_api": null,
          "new_api": "setExpire",
          "old_text": null,
          "new_text": "setExpire(c->db,key,when)",
          "old_line_content": "        } else {",
          "new_line_content": "        if (setExpire(c->db,key,when)) {",
          "content_same": false
        },
        {
          "line": 7344,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "    }",
          "new_line_content": "            addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 7351,
          "old_api": null,
          "new_api": "expireGenericCommand",
          "old_text": null,
          "new_text": "expireGenericCommand(c,c->argv[1],c->argv[2],0)",
          "old_line_content": "static void expireatCommand(redisClient *c) {",
          "new_line_content": "    expireGenericCommand(c,c->argv[1],c->argv[2],0);",
          "content_same": false
        },
        {
          "line": 7355,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "static void ttlCommand(redisClient *c) {",
          "new_line_content": "    expireGenericCommand(c,c->argv[1],c->argv[2],time(NULL));",
          "content_same": false
        },
        {
          "line": 7362,
          "old_api": null,
          "new_api": "getExpire",
          "old_text": null,
          "new_text": "getExpire(c->db,c->argv[1])",
          "old_line_content": "        if (ttl < 0) ttl = -1;",
          "new_line_content": "    expire = getExpire(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 7367,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "/* ================================ MULTI/EXEC ============================== */",
          "new_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\":%d\\r\\n\",ttl));",
          "content_same": false
        },
        {
          "line": 7388,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(mc->argv)",
          "old_line_content": "}",
          "new_line_content": "        zfree(mc->argv);",
          "content_same": false
        },
        {
          "line": 7390,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(c->mstate.commands)",
          "old_line_content": "/* Add a new command into the MULTI commands queue */",
          "new_line_content": "    zfree(c->mstate.commands);",
          "content_same": false
        },
        {
          "line": 7398,
          "old_api": null,
          "new_api": "zrealloc",
          "old_text": null,
          "new_text": "zrealloc(c->mstate.commands,\n            sizeof(multiCmd)*(c->mstate.count+1))",
          "old_line_content": "    mc->cmd = cmd;",
          "new_line_content": "    c->mstate.commands = zrealloc(c->mstate.commands,",
          "content_same": false
        },
        {
          "line": 7404,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(mc->argv,c->argv,sizeof(robj*)*c->argc)",
          "old_line_content": "    c->mstate.count++;",
          "new_line_content": "    memcpy(mc->argv,c->argv,sizeof(robj*)*c->argc);",
          "content_same": false
        },
        {
          "line": 7406,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(mc->argv[j])",
          "old_line_content": "",
          "new_line_content": "        incrRefCount(mc->argv[j]);",
          "content_same": false
        },
        {
          "line": 7412,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "static void discardCommand(redisClient *c) {",
          "new_line_content": "    addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 7417,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"-ERR DISCARD without MULTI\\r\\n\")",
          "old_line_content": "",
          "new_line_content": "        addReplySds(c,sdsnew(\"-ERR DISCARD without MULTI\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 7422,
          "old_api": null,
          "new_api": "initClientMultiState",
          "old_text": null,
          "new_text": "initClientMultiState(c)",
          "old_line_content": "}",
          "new_line_content": "    initClientMultiState(c);",
          "content_same": false
        },
        {
          "line": 7424,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "/* Send a MULTI command to all the slaves and AOF file. Check the execCommand",
          "new_line_content": "    addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 7431,
          "old_api": null,
          "new_api": "createStringObject",
          "old_text": null,
          "new_text": "createStringObject(\"MULTI\",5)",
          "old_line_content": "    if (server.appendonly)",
          "new_line_content": "    robj *multistring = createStringObject(\"MULTI\",5);",
          "content_same": false
        },
        {
          "line": 7436,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.slaves)",
          "old_line_content": "}",
          "new_line_content": "    if (listLength(server.slaves))",
          "content_same": false
        },
        {
          "line": 7437,
          "old_api": null,
          "new_api": "replicationFeedSlaves",
          "old_text": null,
          "new_text": "replicationFeedSlaves(server.slaves,c->db->id,&multistring,1)",
          "old_line_content": "",
          "new_line_content": "        replicationFeedSlaves(server.slaves,c->db->id,&multistring,1);",
          "content_same": false
        },
        {
          "line": 7438,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(multistring)",
          "old_line_content": "static void execCommand(redisClient *c) {",
          "new_line_content": "    decrRefCount(multistring);",
          "content_same": false
        },
        {
          "line": 7447,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"-ERR EXEC without MULTI\\r\\n\")",
          "old_line_content": "",
          "new_line_content": "        addReplySds(c,sdsnew(\"-ERR EXEC without MULTI\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 7455,
          "old_api": null,
          "new_api": "execCommandReplicateMulti",
          "old_text": null,
          "new_text": "execCommandReplicateMulti(c)",
          "old_line_content": "    orig_argv = c->argv;",
          "new_line_content": "    execCommandReplicateMulti(c);",
          "content_same": false
        },
        {
          "line": 7460,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "        c->argv = c->mstate.commands[j].argv;",
          "new_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",c->mstate.count));",
          "content_same": false
        },
        {
          "line": 7464,
          "old_api": null,
          "new_api": "call",
          "old_text": null,
          "new_text": "call(c,c->mstate.commands[j].cmd)",
          "old_line_content": "    c->argc = orig_argc;",
          "new_line_content": "        call(c,c->mstate.commands[j].cmd);",
          "content_same": false
        },
        {
          "line": 7468,
          "old_api": null,
          "new_api": "freeClientMultiState",
          "old_text": null,
          "new_text": "freeClientMultiState(c)",
          "old_line_content": "    /* Make sure the EXEC command is always replicated / AOF, since we",
          "new_line_content": "    freeClientMultiState(c);",
          "content_same": false
        },
        {
          "line": 7469,
          "old_api": null,
          "new_api": "initClientMultiState",
          "old_text": null,
          "new_text": "initClientMultiState(c)",
          "old_line_content": "     * always send the MULTI command (we can't know beforehand if the",
          "new_line_content": "    initClientMultiState(c);",
          "content_same": false
        },
        {
          "line": 7515,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(robj*)*numkeys)",
          "old_line_content": "    for (j = 0; j < numkeys; j++) {",
          "new_line_content": "    c->blockingkeys = zmalloc(sizeof(robj*)*numkeys);",
          "content_same": false
        },
        {
          "line": 7524,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(c->db->blockingkeys,keys[j])",
          "old_line_content": "",
          "new_line_content": "        de = dictFind(c->db->blockingkeys,keys[j]);",
          "content_same": false
        },
        {
          "line": 7530,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(c->db->blockingkeys,keys[j],l)",
          "old_line_content": "        } else {",
          "new_line_content": "            retval = dictAdd(c->db->blockingkeys,keys[j],l);",
          "content_same": false
        },
        {
          "line": 7532,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(retval == DICT_OK)",
          "old_line_content": "        }",
          "new_line_content": "            assert(retval == DICT_OK);",
          "content_same": false
        },
        {
          "line": 7534,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "    }",
          "new_line_content": "            l = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 7536,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(l,c)",
          "old_line_content": "    c->flags |= REDIS_BLOCKED;",
          "new_line_content": "        listAddNodeTail(l,c);",
          "content_same": false
        },
        {
          "line": 7549,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(c->blockingkeys != NULL)",
          "old_line_content": "        /* Remove this client from the list of clients waiting for this key. */",
          "new_line_content": "    assert(c->blockingkeys != NULL);",
          "content_same": false
        },
        {
          "line": 7554,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(de != NULL)",
          "old_line_content": "        /* If the list is empty we need to remove it to avoid wasting memory */",
          "new_line_content": "        assert(de != NULL);",
          "content_same": false
        },
        {
          "line": 7558,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(l)",
          "old_line_content": "    }",
          "new_line_content": "        if (listLength(l) == 0)",
          "content_same": false
        },
        {
          "line": 7559,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(c->db->blockingkeys,c->blockingkeys[j])",
          "old_line_content": "    /* Cleanup the client structure */",
          "new_line_content": "            dictDelete(c->db->blockingkeys,c->blockingkeys[j]);",
          "content_same": false
        },
        {
          "line": 7563,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(c->blockingkeys)",
          "old_line_content": "    server.blpop_blocked_clients--;",
          "new_line_content": "    zfree(c->blockingkeys);",
          "content_same": false
        },
        {
          "line": 7572,
          "old_api": null,
          "new_api": "processInputBuffer",
          "old_text": null,
          "new_text": "processInputBuffer(c)",
          "old_line_content": "/* This should be called from any function PUSHing into lists.",
          "new_line_content": "    if (c->querybuf && sdslen(c->querybuf) > 0) processInputBuffer(c);",
          "content_same": false
        },
        {
          "line": 7593,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "    receiver = ln->value;",
          "new_line_content": "    l = dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 7594,
          "old_api": null,
          "new_api": "listFirst",
          "old_text": null,
          "new_text": "listFirst(l)",
          "old_line_content": "",
          "new_line_content": "    ln = listFirst(l);",
          "content_same": false
        },
        {
          "line": 7599,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(receiver,key)",
          "old_line_content": "    return 1;",
          "new_line_content": "    addReplyBulk(receiver,key);",
          "content_same": false
        },
        {
          "line": 7600,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(receiver,ele)",
          "old_line_content": "}",
          "new_line_content": "    addReplyBulk(receiver,ele);",
          "content_same": false
        },
        {
          "line": 7601,
          "old_api": null,
          "new_api": "unblockClientWaitingData",
          "old_text": null,
          "new_text": "unblockClientWaitingData(receiver)",
          "old_line_content": "",
          "new_line_content": "    unblockClientWaitingData(receiver);",
          "content_same": false
        },
        {
          "line": 7615,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.wrongtypeerr)",
          "old_line_content": "                list *list = o->ptr;",
          "new_line_content": "                addReply(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 7619,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(list)",
          "old_line_content": "                    robj *argv[2], **orig_argv;",
          "new_line_content": "                if (listLength(list) != 0) {",
          "content_same": false
        },
        {
          "line": 7638,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"*2\\r\\n\")",
          "old_line_content": "",
          "new_line_content": "                    addReplySds(c,sdsnew(\"*2\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 7639,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,argv[1])",
          "old_line_content": "                    /* Fix the client structure with the original stuff */",
          "new_line_content": "                    addReplyBulk(c,argv[1]);",
          "content_same": false
        },
        {
          "line": 7640,
          "old_api": null,
          "new_api": "popGenericCommand",
          "old_text": null,
          "new_text": "popGenericCommand(c,where)",
          "old_line_content": "                    c->argv = orig_argv;",
          "new_line_content": "                    popGenericCommand(c,where);",
          "content_same": false
        },
        {
          "line": 7651,
          "old_api": null,
          "new_api": "strtol",
          "old_text": null,
          "new_text": "strtol(c->argv[c->argc-1]->ptr,NULL,10)",
          "old_line_content": "}",
          "new_line_content": "    timeout = strtol(c->argv[c->argc-1]->ptr,NULL,10);",
          "content_same": false
        },
        {
          "line": 7652,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "",
          "new_line_content": "    if (timeout > 0) timeout += time(NULL);",
          "content_same": false
        },
        {
          "line": 7653,
          "old_api": null,
          "new_api": "blockForKeys",
          "old_text": null,
          "new_text": "blockForKeys(c,c->argv+1,c->argc-2,timeout)",
          "old_line_content": "static void blpopCommand(redisClient *c) {",
          "new_line_content": "    blockForKeys(c,c->argv+1,c->argc-2,timeout);",
          "content_same": false
        },
        {
          "line": 7657,
          "old_api": null,
          "new_api": "blockingPopGenericCommand",
          "old_text": null,
          "new_text": "blockingPopGenericCommand(c,REDIS_HEAD)",
          "old_line_content": "static void brpopCommand(redisClient *c) {",
          "new_line_content": "    blockingPopGenericCommand(c,REDIS_HEAD);",
          "content_same": false
        },
        {
          "line": 7661,
          "old_api": null,
          "new_api": "blockingPopGenericCommand",
          "old_text": null,
          "new_text": "blockingPopGenericCommand(c,REDIS_TAIL)",
          "old_line_content": "/* =============================== Replication  ============================= */",
          "new_line_content": "    blockingPopGenericCommand(c,REDIS_TAIL);",
          "content_same": false
        },
        {
          "line": 7668,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    while(size) {",
          "new_line_content": "    time_t start = time(NULL);",
          "content_same": false
        },
        {
          "line": 7672,
          "old_api": null,
          "new_api": "aeWait",
          "old_text": null,
          "new_text": "aeWait(fd,AE_WRITABLE,1000)",
          "old_line_content": "            ptr += nwritten;",
          "new_line_content": "        if (aeWait(fd,AE_WRITABLE,1000) & AE_WRITABLE) {",
          "content_same": false
        },
        {
          "line": 7673,
          "old_api": null,
          "new_api": "write",
          "old_text": null,
          "new_text": "write(fd,ptr,size)",
          "old_line_content": "            size -= nwritten;",
          "new_line_content": "            nwritten = write(fd,ptr,size);",
          "content_same": false
        },
        {
          "line": 7678,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "        }",
          "new_line_content": "        if ((time(NULL)-start) > timeout) {",
          "content_same": false
        },
        {
          "line": 7688,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    while(size) {",
          "new_line_content": "    time_t start = time(NULL);",
          "content_same": false
        },
        {
          "line": 7692,
          "old_api": null,
          "new_api": "aeWait",
          "old_text": null,
          "new_text": "aeWait(fd,AE_READABLE,1000)",
          "old_line_content": "            ptr += nread;",
          "new_line_content": "        if (aeWait(fd,AE_READABLE,1000) & AE_READABLE) {",
          "content_same": false
        },
        {
          "line": 7693,
          "old_api": null,
          "new_api": "read",
          "old_text": null,
          "new_text": "read(fd,ptr,size)",
          "old_line_content": "            size -= nread;",
          "new_line_content": "            nread = read(fd,ptr,size);",
          "content_same": false
        },
        {
          "line": 7699,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "        }",
          "new_line_content": "        if ((time(NULL)-start) > timeout) {",
          "content_same": false
        },
        {
          "line": 7714,
          "old_api": null,
          "new_api": "syncRead",
          "old_text": null,
          "new_text": "syncRead(fd,&c,1,timeout)",
          "old_line_content": "            if (nread && *(ptr-1) == '\\r') *(ptr-1) = '\\0';",
          "new_line_content": "        if (syncRead(fd,&c,1,timeout) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 7736,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(c->reply)",
          "old_line_content": "    }",
          "new_line_content": "    if (listLength(c->reply) != 0) {",
          "content_same": false
        },
        {
          "line": 7737,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"-ERR SYNC is invalid with pending input\\r\\n\")",
          "old_line_content": "",
          "new_line_content": "        addReplySds(c,sdsnew(\"-ERR SYNC is invalid with pending input\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 7741,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Slave ask for synchronization\")",
          "old_line_content": "    if (server.bgsavechildpid != -1) {",
          "new_line_content": "    redisLog(REDIS_NOTICE,\"Slave ask for synchronization\");",
          "content_same": false
        },
        {
          "line": 7752,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(server.slaves,&li)",
          "old_line_content": "            if (slave->replstate == REDIS_REPL_WAIT_BGSAVE_END) break;",
          "new_line_content": "        listRewind(server.slaves,&li);",
          "content_same": false
        },
        {
          "line": 7753,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&li)",
          "old_line_content": "        }",
          "new_line_content": "        while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 7761,
          "old_api": null,
          "new_api": "listDup",
          "old_text": null,
          "new_text": "listDup(slave->reply)",
          "old_line_content": "        } else {",
          "new_line_content": "            c->reply = listDup(slave->reply);",
          "content_same": false
        },
        {
          "line": 7763,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Waiting for end of BGSAVE for SYNC\")",
          "old_line_content": "             * register differences */",
          "new_line_content": "            redisLog(REDIS_NOTICE,\"Waiting for end of BGSAVE for SYNC\");",
          "content_same": false
        },
        {
          "line": 7768,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Waiting for next BGSAVE for SYNC\")",
          "old_line_content": "        /* Ok we don't have a BGSAVE in progress, let's start one */",
          "new_line_content": "            redisLog(REDIS_NOTICE,\"Waiting for next BGSAVE for SYNC\");",
          "content_same": false
        },
        {
          "line": 7773,
          "old_api": null,
          "new_api": "rdbSaveBackground",
          "old_text": null,
          "new_text": "rdbSaveBackground(server.dbfilename)",
          "old_line_content": "            return;",
          "new_line_content": "        if (rdbSaveBackground(server.dbfilename) != REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 7774,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Replication failed, can't BGSAVE\")",
          "old_line_content": "        }",
          "new_line_content": "            redisLog(REDIS_NOTICE,\"Replication failed, can't BGSAVE\");",
          "content_same": false
        },
        {
          "line": 7775,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"-ERR Unalbe to perform background save\\r\\n\")",
          "old_line_content": "        c->replstate = REDIS_REPL_WAIT_BGSAVE_END;",
          "new_line_content": "            addReplySds(c,sdsnew(\"-ERR Unalbe to perform background save\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 7783,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(server.slaves,c)",
          "old_line_content": "",
          "new_line_content": "    listAddNodeTail(server.slaves,c);",
          "content_same": false
        },
        {
          "line": 7789,
          "old_api": null,
          "new_api": "REDIS_NOTUSED",
          "old_text": null,
          "new_text": "REDIS_NOTUSED(el)",
          "old_line_content": "    ssize_t nwritten, buflen;",
          "new_line_content": "    REDIS_NOTUSED(el);",
          "content_same": false
        },
        {
          "line": 7790,
          "old_api": null,
          "new_api": "REDIS_NOTUSED",
          "old_text": null,
          "new_text": "REDIS_NOTUSED(mask)",
          "old_line_content": "",
          "new_line_content": "    REDIS_NOTUSED(mask);",
          "content_same": false
        },
        {
          "line": 7801,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "        {",
          "new_line_content": "        bulkcount = sdscatprintf(sdsempty(),\"$%lld\\r\\n\",(unsigned long long)",
          "content_same": false
        },
        {
          "line": 7805,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(bulkcount)",
          "old_line_content": "        }",
          "new_line_content": "            sdsfree(bulkcount);",
          "content_same": false
        },
        {
          "line": 7814,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Read error sending DB to slave: %s\",\n            (buflen == 0) ? \"premature EOF\" : strerror(errno))",
          "old_line_content": "        return;",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Read error sending DB to slave: %s\",",
          "content_same": false
        },
        {
          "line": 7815,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "    }",
          "new_line_content": "            (buflen == 0) ? \"premature EOF\" : strerror(errno));",
          "content_same": false
        },
        {
          "line": 7820,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_VERBOSE,\"Write error sending DB to slave: %s\",\n            strerror(errno))",
          "old_line_content": "        return;",
          "new_line_content": "        redisLog(REDIS_VERBOSE,\"Write error sending DB to slave: %s\",",
          "content_same": false
        },
        {
          "line": 7821,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "    }",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 7822,
          "old_api": null,
          "new_api": "freeClient",
          "old_text": null,
          "new_text": "freeClient(slave)",
          "old_line_content": "    slave->repldboff += nwritten;",
          "new_line_content": "        freeClient(slave);",
          "content_same": false
        },
        {
          "line": 7827,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(slave->repldbfd)",
          "old_line_content": "        slave->replstate = REDIS_REPL_ONLINE;",
          "new_line_content": "        close(slave->repldbfd);",
          "content_same": false
        },
        {
          "line": 7829,
          "old_api": null,
          "new_api": "aeDeleteFileEvent",
          "old_text": null,
          "new_text": "aeDeleteFileEvent(server.el,slave->fd,AE_WRITABLE)",
          "old_line_content": "            sendReplyToClient, slave) == AE_ERR) {",
          "new_line_content": "        aeDeleteFileEvent(server.el,slave->fd,AE_WRITABLE);",
          "content_same": false
        },
        {
          "line": 7831,
          "old_api": null,
          "new_api": "aeCreateFileEvent",
          "old_text": null,
          "new_text": "aeCreateFileEvent(server.el, slave->fd, AE_WRITABLE,\n            sendReplyToClient, slave)",
          "old_line_content": "            return;",
          "new_line_content": "        if (aeCreateFileEvent(server.el, slave->fd, AE_WRITABLE,",
          "content_same": false
        },
        {
          "line": 7836,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "}",
          "new_line_content": "        addReplySds(slave,sdsempty());",
          "content_same": false
        },
        {
          "line": 7837,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Synchronization with slave succeeded\")",
          "old_line_content": "",
          "new_line_content": "        redisLog(REDIS_NOTICE,\"Synchronization with slave succeeded\");",
          "content_same": false
        },
        {
          "line": 7852,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(server.slaves,&li)",
          "old_line_content": "",
          "new_line_content": "    listRewind(server.slaves,&li);",
          "content_same": false
        },
        {
          "line": 7853,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&li)",
          "old_line_content": "        if (slave->replstate == REDIS_REPL_WAIT_BGSAVE_START) {",
          "new_line_content": "    while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 7863,
          "old_api": null,
          "new_api": "freeClient",
          "old_text": null,
          "new_text": "freeClient(slave)",
          "old_line_content": "            }",
          "new_line_content": "                freeClient(slave);",
          "content_same": false
        },
        {
          "line": 7868,
          "old_api": null,
          "new_api": "redis_fstat",
          "old_text": null,
          "new_text": "redis_fstat(slave->repldbfd,&buf)",
          "old_line_content": "                continue;",
          "new_line_content": "                redis_fstat(slave->repldbfd,&buf) == -1) {",
          "content_same": false
        },
        {
          "line": 7869,
          "old_api": null,
          "new_api": "freeClient",
          "old_text": null,
          "new_text": "freeClient(slave)",
          "old_line_content": "            }",
          "new_line_content": "                freeClient(slave);",
          "content_same": false
        },
        {
          "line": 7870,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "            slave->repldboff = 0;",
          "new_line_content": "                redisLog(REDIS_WARNING,\"SYNC failed. Can't open/stat DB after BGSAVE: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 7876,
          "old_api": null,
          "new_api": "aeDeleteFileEvent",
          "old_text": null,
          "new_text": "aeDeleteFileEvent(server.el,slave->fd,AE_WRITABLE)",
          "old_line_content": "                continue;",
          "new_line_content": "            aeDeleteFileEvent(server.el,slave->fd,AE_WRITABLE);",
          "content_same": false
        },
        {
          "line": 7877,
          "old_api": null,
          "new_api": "aeCreateFileEvent",
          "old_text": null,
          "new_text": "aeCreateFileEvent(server.el, slave->fd, AE_WRITABLE, sendBulkToSlave, slave)",
          "old_line_content": "            }",
          "new_line_content": "            if (aeCreateFileEvent(server.el, slave->fd, AE_WRITABLE, sendBulkToSlave, slave) == AE_ERR) {",
          "content_same": false
        },
        {
          "line": 7878,
          "old_api": null,
          "new_api": "freeClient",
          "old_text": null,
          "new_text": "freeClient(slave)",
          "old_line_content": "        }",
          "new_line_content": "                freeClient(slave);",
          "content_same": false
        },
        {
          "line": 7887,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(server.slaves,&li)",
          "old_line_content": "                redisClient *slave = ln->value;",
          "new_line_content": "            listRewind(server.slaves,&li);",
          "content_same": false
        },
        {
          "line": 7888,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"SYNC failed. BGSAVE failed\")",
          "old_line_content": "",
          "new_line_content": "            redisLog(REDIS_WARNING,\"SYNC failed. BGSAVE failed\");",
          "content_same": false
        },
        {
          "line": 7889,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&li)",
          "old_line_content": "                if (slave->replstate == REDIS_REPL_WAIT_BGSAVE_START)",
          "new_line_content": "            while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 7893,
          "old_api": null,
          "new_api": "freeClient",
          "old_text": null,
          "new_text": "freeClient(slave)",
          "old_line_content": "    }",
          "new_line_content": "                    freeClient(slave);",
          "content_same": false
        },
        {
          "line": 7902,
          "old_api": null,
          "new_api": "anetTcpConnect",
          "old_text": null,
          "new_text": "anetTcpConnect(NULL,server.masterhost,server.masterport)",
          "old_line_content": "    if (fd == -1) {",
          "new_line_content": "    int fd = anetTcpConnect(NULL,server.masterhost,server.masterport);",
          "content_same": false
        },
        {
          "line": 7906,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Unable to connect to MASTER: %s\",\n            strerror(errno))",
          "old_line_content": "    }",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Unable to connect to MASTER: %s\",",
          "content_same": false
        },
        {
          "line": 7907,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 7915,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "            return REDIS_ERR;",
          "new_line_content": "            close(fd);",
          "content_same": false
        },
        {
          "line": 7916,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Unable to AUTH to MASTER: %s\",\n                strerror(errno))",
          "old_line_content": "    \t}",
          "new_line_content": "            redisLog(REDIS_WARNING,\"Unable to AUTH to MASTER: %s\",",
          "content_same": false
        },
        {
          "line": 7917,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "        /* Read the AUTH result.  */",
          "new_line_content": "                strerror(errno));",
          "content_same": false
        },
        {
          "line": 7922,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "            return REDIS_ERR;",
          "new_line_content": "            close(fd);",
          "content_same": false
        },
        {
          "line": 7923,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"I/O error reading auth result from MASTER: %s\",\n                strerror(errno))",
          "old_line_content": "        }",
          "new_line_content": "            redisLog(REDIS_WARNING,\"I/O error reading auth result from MASTER: %s\",",
          "content_same": false
        },
        {
          "line": 7924,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "        if (buf[0] != '+') {",
          "new_line_content": "                strerror(errno));",
          "content_same": false
        },
        {
          "line": 7928,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "        }",
          "new_line_content": "            close(fd);",
          "content_same": false
        },
        {
          "line": 7929,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Cannot AUTH to MASTER, is the masterauth password correct?\")",
          "old_line_content": "    }",
          "new_line_content": "            redisLog(REDIS_WARNING,\"Cannot AUTH to MASTER, is the masterauth password correct?\");",
          "content_same": false
        },
        {
          "line": 7936,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "        return REDIS_ERR;",
          "new_line_content": "        close(fd);",
          "content_same": false
        },
        {
          "line": 7937,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"I/O error writing to MASTER: %s\",\n            strerror(errno))",
          "old_line_content": "    }",
          "new_line_content": "        redisLog(REDIS_WARNING,\"I/O error writing to MASTER: %s\",",
          "content_same": false
        },
        {
          "line": 7938,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "    /* Read the bulk write count */",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 7943,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "        return REDIS_ERR;",
          "new_line_content": "        close(fd);",
          "content_same": false
        },
        {
          "line": 7944,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"I/O error reading bulk count from MASTER: %s\",\n            strerror(errno))",
          "old_line_content": "    }",
          "new_line_content": "        redisLog(REDIS_WARNING,\"I/O error reading bulk count from MASTER: %s\",",
          "content_same": false
        },
        {
          "line": 7945,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "    if (buf[0] != '$') {",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 7949,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "    }",
          "new_line_content": "        close(fd);",
          "content_same": false
        },
        {
          "line": 7953,
          "old_api": null,
          "new_api": "strtol",
          "old_text": null,
          "new_text": "strtol(buf+1,NULL,10)",
          "old_line_content": "    while(maxtries--) {",
          "new_line_content": "    dumpsize = strtol(buf+1,NULL,10);",
          "content_same": false
        },
        {
          "line": 7957,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(tmpfile,256,\n            \"temp-%d.%ld.rdb\",(int)time(NULL),(long int)getpid())",
          "old_line_content": "        if (dfd != -1) break;",
          "new_line_content": "        snprintf(tmpfile,256,",
          "content_same": false
        },
        {
          "line": 7959,
          "old_api": null,
          "new_api": "open",
          "old_text": null,
          "new_text": "open(tmpfile,O_CREAT|O_WRONLY|O_EXCL,0644)",
          "old_line_content": "    }",
          "new_line_content": "        dfd = open(tmpfile,O_CREAT|O_WRONLY|O_EXCL,0644);",
          "content_same": false
        },
        {
          "line": 7964,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "    }",
          "new_line_content": "        close(fd);",
          "content_same": false
        },
        {
          "line": 7965,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "    while(dumpsize) {",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Opening the temp file needed for MASTER <-> SLAVE synchronization: %s\",strerror(errno));",
          "content_same": false
        },
        {
          "line": 7974,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "            return REDIS_ERR;",
          "new_line_content": "                strerror(errno));",
          "content_same": false
        },
        {
          "line": 7975,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "        }",
          "new_line_content": "            close(fd);",
          "content_same": false
        },
        {
          "line": 7981,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "            return REDIS_ERR;",
          "new_line_content": "            redisLog(REDIS_WARNING,\"Write error writing to the DB dump file needed for MASTER <-> SLAVE synchrnonization: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 7982,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "        }",
          "new_line_content": "            close(fd);",
          "content_same": false
        },
        {
          "line": 7983,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(dfd)",
          "old_line_content": "        dumpsize -= nread;",
          "new_line_content": "            close(dfd);",
          "content_same": false
        },
        {
          "line": 7990,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "        return REDIS_ERR;",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Failed trying to rename the temp DB into dump.rdb in MASTER <-> SLAVE synchronization: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 7991,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(tmpfile)",
          "old_line_content": "    }",
          "new_line_content": "        unlink(tmpfile);",
          "content_same": false
        },
        {
          "line": 7996,
          "old_api": null,
          "new_api": "rdbLoad",
          "old_text": null,
          "new_text": "rdbLoad(server.dbfilename)",
          "old_line_content": "        return REDIS_ERR;",
          "new_line_content": "    if (rdbLoad(server.dbfilename) != REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 7997,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Failed trying to load the MASTER synchronization DB from disk\")",
          "old_line_content": "    }",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Failed trying to load the MASTER synchronization DB from disk\");",
          "content_same": false
        },
        {
          "line": 8001,
          "old_api": null,
          "new_api": "createClient",
          "old_text": null,
          "new_text": "createClient(fd)",
          "old_line_content": "    server.replstate = REDIS_REPL_CONNECTED;",
          "new_line_content": "    server.master = createClient(fd);",
          "content_same": false
        },
        {
          "line": 8010,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[2]->ptr,\"one\")",
          "old_line_content": "            server.masterhost = NULL;",
          "new_line_content": "        !strcasecmp(c->argv[2]->ptr,\"one\")) {",
          "content_same": false
        },
        {
          "line": 8012,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(server.masterhost)",
          "old_line_content": "            server.replstate = REDIS_REPL_NONE;",
          "new_line_content": "            sdsfree(server.masterhost);",
          "content_same": false
        },
        {
          "line": 8014,
          "old_api": null,
          "new_api": "freeClient",
          "old_text": null,
          "new_text": "freeClient(server.master)",
          "old_line_content": "        }",
          "new_line_content": "            if (server.master) freeClient(server.master);",
          "content_same": false
        },
        {
          "line": 8020,
          "old_api": null,
          "new_api": "sdsdup",
          "old_text": null,
          "new_text": "sdsdup(c->argv[1]->ptr)",
          "old_line_content": "        server.replstate = REDIS_REPL_CONNECT;",
          "new_line_content": "        server.masterhost = sdsdup(c->argv[1]->ptr);",
          "content_same": false
        },
        {
          "line": 8022,
          "old_api": null,
          "new_api": "freeClient",
          "old_text": null,
          "new_text": "freeClient(server.master)",
          "old_line_content": "            server.masterhost, server.masterport);",
          "new_line_content": "        if (server.master) freeClient(server.master);",
          "content_same": false
        },
        {
          "line": 8027,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "/* ============================ Maxmemory directive  ======================== */",
          "new_line_content": "    addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 8043,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(server.objfreelist,head)",
          "old_line_content": "        return REDIS_OK;",
          "new_line_content": "        listDelNode(server.objfreelist,head);",
          "content_same": false
        },
        {
          "line": 8044,
          "old_api": null,
          "new_api": "pthread_mutex_unlock",
          "old_text": null,
          "new_text": "pthread_mutex_unlock(&server.obj_freelist_mutex)",
          "old_line_content": "    } else {",
          "new_line_content": "        if (server.vm_enabled) pthread_mutex_unlock(&server.obj_freelist_mutex);",
          "content_same": false
        },
        {
          "line": 8048,
          "old_api": null,
          "new_api": "pthread_mutex_unlock",
          "old_text": null,
          "new_text": "pthread_mutex_unlock(&server.obj_freelist_mutex)",
          "old_line_content": "}",
          "new_line_content": "        if (server.vm_enabled) pthread_mutex_unlock(&server.obj_freelist_mutex);",
          "content_same": false
        },
        {
          "line": 8068,
          "old_api": null,
          "new_api": "tryFreeOneObjectFromFreelist",
          "old_text": null,
          "new_text": "tryFreeOneObjectFromFreelist()",
          "old_line_content": "            robj *minkey = NULL;",
          "new_line_content": "        if (tryFreeOneObjectFromFreelist() == REDIS_OK) continue;",
          "content_same": false
        },
        {
          "line": 8074,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(server.db[j].expires)",
          "old_line_content": "                 * the natural expire */",
          "new_line_content": "            if (dictSize(server.db[j].expires)) {",
          "content_same": false
        },
        {
          "line": 8082,
          "old_api": null,
          "new_api": "dictGetEntryVal",
          "old_text": null,
          "new_text": "dictGetEntryVal(de)",
          "old_line_content": "                        minttl = t;",
          "new_line_content": "                    t = (time_t) dictGetEntryVal(de);",
          "content_same": false
        },
        {
          "line": 8084,
          "old_api": null,
          "new_api": "dictGetEntryKey",
          "old_text": null,
          "new_text": "dictGetEntryKey(de)",
          "old_line_content": "                }",
          "new_line_content": "                        minkey = dictGetEntryKey(de);",
          "content_same": false
        },
        {
          "line": 8088,
          "old_api": null,
          "new_api": "deleteKey",
          "old_text": null,
          "new_text": "deleteKey(server.db+j,minkey)",
          "old_line_content": "        if (!freed) return; /* nothing to free... */",
          "new_line_content": "                deleteKey(server.db+j,minkey);",
          "content_same": false
        },
        {
          "line": 8108,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(server.aofbuf)",
          "old_line_content": "     * at least if the filesystem we are writing is a real physical one.",
          "new_line_content": "    if (sdslen(server.aofbuf) == 0) return;",
          "content_same": false
        },
        {
          "line": 8115,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(server.aofbuf)",
          "old_line_content": "         * aborting instead of giving the illusion that everything is",
          "new_line_content": "     nwritten = write(server.appendfd,server.aofbuf,sdslen(server.aofbuf));",
          "content_same": false
        },
        {
          "line": 8116,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(server.aofbuf)",
          "old_line_content": "         * working as expected. */",
          "new_line_content": "     if (nwritten != (signed)sdslen(server.aofbuf)) {",
          "content_same": false
        },
        {
          "line": 8121,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "         }",
          "new_line_content": "            redisLog(REDIS_WARNING,\"Exiting on error writing to the append-only file: %s\",strerror(errno));",
          "content_same": false
        },
        {
          "line": 8123,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "    }",
          "new_line_content": "            redisLog(REDIS_WARNING,\"Exiting on short write while writing to the append-only file: %s\",strerror(errno));",
          "content_same": false
        },
        {
          "line": 8127,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(server.aofbuf)",
          "old_line_content": "    /* Fsync if needed */",
          "new_line_content": "    sdsfree(server.aofbuf);",
          "content_same": false
        },
        {
          "line": 8131,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "         now-server.lastfsync > 1))",
          "new_line_content": "    now = time(NULL);",
          "content_same": false
        },
        {
          "line": 8138,
          "old_api": null,
          "new_api": "aof_fsync",
          "old_text": null,
          "new_text": "aof_fsync(server.appendfd)",
          "old_line_content": "}",
          "new_line_content": "        aof_fsync(server.appendfd); /* Let's try to get this data on the disk */",
          "content_same": false
        },
        {
          "line": 8144,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "",
          "new_line_content": "    sds buf = sdsempty();",
          "content_same": false
        },
        {
          "line": 8153,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(seldb,sizeof(seldb),\"%d\",dictid)",
          "old_line_content": "        server.appendseldb = dictid;",
          "new_line_content": "        snprintf(seldb,sizeof(seldb),\"%d\",dictid);",
          "content_same": false
        },
        {
          "line": 8154,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(buf,\"*2\\r\\n$6\\r\\nSELECT\\r\\n$%lu\\r\\n%s\\r\\n\",\n            (unsigned long)strlen(seldb),seldb)",
          "old_line_content": "    }",
          "new_line_content": "        buf = sdscatprintf(buf,\"*2\\r\\n$6\\r\\nSELECT\\r\\n$%lu\\r\\n%s\\r\\n\",",
          "content_same": false
        },
        {
          "line": 8155,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(seldb)",
          "old_line_content": "",
          "new_line_content": "            (unsigned long)strlen(seldb),seldb);",
          "content_same": false
        },
        {
          "line": 8167,
          "old_api": null,
          "new_api": "strtol",
          "old_text": null,
          "new_text": "strtol(argv[2]->ptr,NULL,10)",
          "old_line_content": "        argv = tmpargv;",
          "new_line_content": "        when = time(NULL)+strtol(argv[2]->ptr,NULL,10);",
          "content_same": false
        },
        {
          "line": 8168,
          "old_api": null,
          "new_api": "createObject",
          "old_text": null,
          "new_text": "createObject(REDIS_STRING,\n            sdscatprintf(sdsempty(),\"%ld\",when))",
          "old_line_content": "    }",
          "new_line_content": "        tmpargv[2] = createObject(REDIS_STRING,",
          "content_same": false
        },
        {
          "line": 8169,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "",
          "new_line_content": "            sdscatprintf(sdsempty(),\"%ld\",when));",
          "content_same": false
        },
        {
          "line": 8174,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(buf,\"*%d\\r\\n\",argc)",
          "old_line_content": "",
          "new_line_content": "    buf = sdscatprintf(buf,\"*%d\\r\\n\",argc);",
          "content_same": false
        },
        {
          "line": 8180,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(o->ptr)",
          "old_line_content": "    }",
          "new_line_content": "        buf = sdscatlen(buf,o->ptr,sdslen(o->ptr));",
          "content_same": false
        },
        {
          "line": 8181,
          "old_api": null,
          "new_api": "sdscatlen",
          "old_text": null,
          "new_text": "sdscatlen(buf,\"\\r\\n\",2)",
          "old_line_content": "",
          "new_line_content": "        buf = sdscatlen(buf,\"\\r\\n\",2);",
          "content_same": false
        },
        {
          "line": 8182,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(o)",
          "old_line_content": "    /* Free the objects from the modified argv for EXPIREAT */",
          "new_line_content": "        decrRefCount(o);",
          "content_same": false
        },
        {
          "line": 8188,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(argv[j])",
          "old_line_content": "    /* Append to the AOF buffer. This will be flushed on disk just before",
          "new_line_content": "            decrRefCount(argv[j]);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 8198,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(buf)",
          "new_text": null,
          "old_line_content": "        server.bgrewritebuf = sdscatlen(server.bgrewritebuf,buf,sdslen(buf));",
          "new_line_content": "     * in a buffer, so that when the child process will do its work we",
          "content_same": false
        },
        {
          "line": 8200,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(buf)",
          "new_text": null,
          "old_line_content": "    sdsfree(buf);",
          "new_line_content": "    if (server.bgrewritechildpid != -1)",
          "content_same": false
        },
        {
          "line": 8206,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*c))",
          "new_text": null,
          "old_line_content": "    struct redisClient *c = zmalloc(sizeof(*c));",
          "new_line_content": "/* In Redis commands are always executed in the context of a client, so in",
          "content_same": false
        },
        {
          "line": 8208,
          "old_api": "selectDb",
          "new_api": null,
          "old_text": "selectDb(c,0)",
          "new_text": null,
          "old_line_content": "    selectDb(c,0);",
          "new_line_content": "static struct redisClient *createFakeClient(void) {",
          "content_same": false
        },
        {
          "line": 8210,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    c->querybuf = sdsempty();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8217,
          "old_api": "listCreate",
          "new_api": null,
          "old_text": "listCreate()",
          "new_text": null,
          "old_line_content": "    c->reply = listCreate();",
          "new_line_content": "    /* We set the fake client as a slave waiting for the synchronization",
          "content_same": false
        },
        {
          "line": 8218,
          "old_api": "listSetFreeMethod",
          "new_api": null,
          "old_text": "listSetFreeMethod(c->reply,decrRefCount)",
          "new_text": null,
          "old_line_content": "    listSetFreeMethod(c->reply,decrRefCount);",
          "new_line_content": "     * so that Redis will not try to send replies to this client. */",
          "content_same": false
        },
        {
          "line": 8219,
          "old_api": "listSetDupMethod",
          "new_api": null,
          "old_text": "listSetDupMethod(c->reply,dupClientReplyValue)",
          "new_text": null,
          "old_line_content": "    listSetDupMethod(c->reply,dupClientReplyValue);",
          "new_line_content": "    c->replstate = REDIS_REPL_WAIT_BGSAVE_START;",
          "content_same": false
        },
        {
          "line": 8225,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(c->querybuf)",
          "new_text": null,
          "old_line_content": "    sdsfree(c->querybuf);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 8226,
          "old_api": "listRelease",
          "new_api": null,
          "old_text": "listRelease(c->reply)",
          "new_text": null,
          "old_line_content": "    listRelease(c->reply);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8227,
          "old_api": "freeClientMultiState",
          "new_api": null,
          "old_text": "freeClientMultiState(c)",
          "new_text": null,
          "old_line_content": "    freeClientMultiState(c);",
          "new_line_content": "static void freeFakeClient(struct redisClient *c) {",
          "content_same": false
        },
        {
          "line": 8236,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(filename,\"r\")",
          "new_text": null,
          "old_line_content": "    FILE *fp = fopen(filename,\"r\");",
          "new_line_content": " * fatal error an error message is logged and the program exists. */",
          "content_same": false
        },
        {
          "line": 8241,
          "old_api": "fileno",
          "new_api": null,
          "old_text": "fileno(fp)",
          "new_text": null,
          "old_line_content": "    if (redis_fstat(fileno(fp),&sb) != -1 && sb.st_size == 0)",
          "new_line_content": "    unsigned long long loadedkeys = 0;",
          "content_same": false
        },
        {
          "line": 8245,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Fatal error: can't open the append log file for reading: %s\",strerror(errno));",
          "new_line_content": "        return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 8246,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "        exit(1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8253,
          "old_api": "createFakeClient",
          "new_api": null,
          "old_text": "createFakeClient()",
          "new_text": null,
          "old_line_content": "    fakeClient = createFakeClient();",
          "new_line_content": "     * to the same file we're about to read. */",
          "content_same": false
        },
        {
          "line": 8262,
          "old_api": "fgets",
          "new_api": null,
          "old_text": "fgets(buf,sizeof(buf),fp)",
          "new_text": null,
          "old_line_content": "        if (fgets(buf,sizeof(buf),fp) == NULL) {",
          "new_line_content": "        sds argsds;",
          "content_same": false
        },
        {
          "line": 8263,
          "old_api": "feof",
          "new_api": null,
          "old_text": "feof(fp)",
          "new_text": null,
          "old_line_content": "            if (feof(fp))",
          "new_line_content": "        struct redisCommand *cmd;",
          "content_same": false
        },
        {
          "line": 8269,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(buf+1)",
          "new_text": null,
          "old_line_content": "        argc = atoi(buf+1);",
          "new_line_content": "                goto readerr;",
          "content_same": false
        },
        {
          "line": 8270,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(robj*)*argc)",
          "new_text": null,
          "old_line_content": "        argv = zmalloc(sizeof(robj*)*argc);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 8274,
          "old_api": "strtol",
          "new_api": null,
          "old_text": "strtol(buf+1,NULL,10)",
          "new_text": null,
          "old_line_content": "            len = strtol(buf+1,NULL,10);",
          "new_line_content": "        for (j = 0; j < argc; j++) {",
          "content_same": false
        },
        {
          "line": 8276,
          "old_api": "fread",
          "new_api": null,
          "old_text": "fread(argsds,len,1,fp)",
          "new_text": null,
          "old_line_content": "            if (len && fread(argsds,len,1,fp) == 0) goto fmterr;",
          "new_line_content": "            if (buf[0] != '$') goto fmterr;",
          "content_same": false
        },
        {
          "line": 8282,
          "old_api": "lookupCommand",
          "new_api": null,
          "old_text": "lookupCommand(argv[0]->ptr)",
          "new_text": null,
          "old_line_content": "        cmd = lookupCommand(argv[0]->ptr);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 8284,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Unknown command '%s' reading the append only file\", argv[0]->ptr)",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,\"Unknown command '%s' reading the append only file\", argv[0]->ptr);",
          "new_line_content": "        /* Command lookup */",
          "content_same": false
        },
        {
          "line": 8289,
          "old_api": "tryObjectEncoding",
          "new_api": null,
          "old_text": "tryObjectEncoding(argv[argc-1])",
          "new_text": null,
          "old_line_content": "            argv[argc-1] = tryObjectEncoding(argv[argc-1]);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 8293,
          "old_api": "proc",
          "new_api": null,
          "old_text": "cmd->proc(fakeClient)",
          "new_text": null,
          "old_line_content": "        cmd->proc(fakeClient);",
          "new_line_content": "        /* Run the command in the context of a fake client */",
          "content_same": false
        },
        {
          "line": 8295,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(fakeClient->reply)",
          "new_text": null,
          "old_line_content": "        while(listLength(fakeClient->reply))",
          "new_line_content": "        fakeClient->argv = argv;",
          "content_same": false
        },
        {
          "line": 8303,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "            while (zmalloc_used_memory() > server.vm_max_memory) {",
          "new_line_content": "        /* Handle swapping while loading big datasets when VM is on */",
          "content_same": false
        },
        {
          "line": 8304,
          "old_api": "vmSwapOneObjectBlocking",
          "new_api": null,
          "old_text": "vmSwapOneObjectBlocking()",
          "new_text": null,
          "old_line_content": "                if (vmSwapOneObjectBlocking() == REDIS_ERR) break;",
          "new_line_content": "        loadedkeys++;",
          "content_same": false
        },
        {
          "line": 8313,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "    fclose(fp);",
          "new_line_content": "     * If the client is in the middle of a MULTI/EXEC, log error and quit. */",
          "content_same": false
        },
        {
          "line": 8314,
          "old_api": "freeFakeClient",
          "new_api": null,
          "old_text": "freeFakeClient(fakeClient)",
          "new_text": null,
          "old_line_content": "    freeFakeClient(fakeClient);",
          "new_line_content": "    if (fakeClient->flags & REDIS_MULTI) goto readerr;",
          "content_same": false
        },
        {
          "line": 8319,
          "old_api": "feof",
          "new_api": null,
          "old_text": "feof(fp)",
          "new_text": null,
          "old_line_content": "    if (feof(fp)) {",
          "new_line_content": "    return REDIS_OK;",
          "content_same": false
        },
        {
          "line": 8320,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Unexpected end of file reading the append only file\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Unexpected end of file reading the append only file\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8324,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "    exit(1);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 8326,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Bad file format reading the append only file\")",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_WARNING,\"Bad file format reading the append only file\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 8341,
          "old_api": "getDecodedObject",
          "new_api": null,
          "old_text": "getDecodedObject(obj)",
          "new_text": null,
          "old_line_content": "        obj = getDecodedObject(obj);",
          "new_line_content": "     * Also makes sure that key objects don't get incrRefCount-ed when VM",
          "content_same": false
        },
        {
          "line": 8345,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(buf)",
          "new_text": null,
          "old_line_content": "    if (fwrite(buf,strlen(buf),1,fp) == 0) goto err;",
          "new_line_content": "        decrrc = 1;",
          "content_same": false
        },
        {
          "line": 8346,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(obj->ptr)",
          "new_text": null,
          "old_line_content": "    if (sdslen(obj->ptr) && fwrite(obj->ptr,sdslen(obj->ptr),1,fp) == 0)",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 8361,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(buf,sizeof(buf),\"$%ld\\r\\n\",(unsigned long)len)",
          "new_text": null,
          "old_line_content": "    snprintf(buf,sizeof(buf),\"$%ld\\r\\n\",(unsigned long)len);",
          "new_line_content": "static int fwriteBulkString(FILE *fp, char *s, unsigned long len) {",
          "content_same": false
        },
        {
          "line": 8362,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(buf)",
          "new_text": null,
          "old_line_content": "    if (fwrite(buf,strlen(buf),1,fp) == 0) return 0;",
          "new_line_content": "    char buf[128];",
          "content_same": false
        },
        {
          "line": 8363,
          "old_api": "fwrite",
          "new_api": null,
          "old_text": "fwrite(s,len,1,fp)",
          "new_text": null,
          "old_line_content": "    if (len && fwrite(s,len,1,fp) == 0) return 0;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8372,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(dbuf,sizeof(dbuf),\"%.17g\\r\\n\",d)",
          "new_text": null,
          "old_line_content": "    snprintf(dbuf,sizeof(dbuf),\"%.17g\\r\\n\",d);",
          "new_line_content": "static int fwriteBulkDouble(FILE *fp, double d) {",
          "content_same": false
        },
        {
          "line": 8373,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(dbuf)",
          "new_text": null,
          "old_line_content": "    snprintf(buf,sizeof(buf),\"$%lu\\r\\n\",(unsigned long)strlen(dbuf)-2);",
          "new_line_content": "    char buf[128], dbuf[128];",
          "content_same": false
        },
        {
          "line": 8374,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(buf)",
          "new_text": null,
          "old_line_content": "    if (fwrite(buf,strlen(buf),1,fp) == 0) return 0;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8383,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(lbuf,sizeof(lbuf),\"%ld\\r\\n\",l)",
          "new_text": null,
          "old_line_content": "    snprintf(lbuf,sizeof(lbuf),\"%ld\\r\\n\",l);",
          "new_line_content": "static int fwriteBulkLong(FILE *fp, long l) {",
          "content_same": false
        },
        {
          "line": 8384,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(lbuf)",
          "new_text": null,
          "old_line_content": "    snprintf(buf,sizeof(buf),\"$%lu\\r\\n\",(unsigned long)strlen(lbuf)-2);",
          "new_line_content": "    char buf[128], lbuf[128];",
          "content_same": false
        },
        {
          "line": 8385,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(buf)",
          "new_text": null,
          "old_line_content": "    if (fwrite(buf,strlen(buf),1,fp) == 0) return 0;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8398,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    time_t now = time(NULL);",
          "new_line_content": "    FILE *fp;",
          "content_same": false
        },
        {
          "line": 8402,
          "old_api": "getpid",
          "new_api": null,
          "old_text": "getpid()",
          "new_text": null,
          "old_line_content": "    snprintf(tmpfile,256,\"temp-rewriteaof-%d.aof\", (int) getpid());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8403,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(tmpfile,\"w\")",
          "new_text": null,
          "old_line_content": "    fp = fopen(tmpfile,\"w\");",
          "new_line_content": "    /* Note that we have to use a different temp name here compared to the",
          "content_same": false
        },
        {
          "line": 8412,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(d)",
          "new_text": null,
          "old_line_content": "        if (dictSize(d) == 0) continue;",
          "new_line_content": "        char selectcmd[] = \"*2\\r\\n$6\\r\\nSELECT\\r\\n\";",
          "content_same": false
        },
        {
          "line": 8413,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(d)",
          "new_text": null,
          "old_line_content": "        di = dictGetIterator(d);",
          "new_line_content": "        redisDb *db = server.db+j;",
          "content_same": false
        },
        {
          "line": 8420,
          "old_api": "fwrite",
          "new_api": null,
          "old_text": "fwrite(selectcmd,sizeof(selectcmd)-1,1,fp)",
          "new_text": null,
          "old_line_content": "        if (fwrite(selectcmd,sizeof(selectcmd)-1,1,fp) == 0) goto werr;",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 8421,
          "old_api": "fwriteBulkLong",
          "new_api": null,
          "old_text": "fwriteBulkLong(fp,j)",
          "new_text": null,
          "old_line_content": "        if (fwriteBulkLong(fp,j) == 0) goto werr;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8429,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "            key = dictGetEntryKey(de);",
          "new_line_content": "            time_t expiretime;",
          "content_same": false
        },
        {
          "line": 8436,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "                o = dictGetEntryVal(de);",
          "new_line_content": "             * in order to avoid copy-on-write of pages if we are forked() */",
          "content_same": false
        },
        {
          "line": 8448,
          "old_api": "fwrite",
          "new_api": null,
          "old_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "new_text": null,
          "old_line_content": "                if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "new_line_content": "            if (o->type == REDIS_STRING) {",
          "content_same": false
        },
        {
          "line": 8450,
          "old_api": "fwriteBulkObject",
          "new_api": null,
          "old_text": "fwriteBulkObject(fp,key)",
          "new_text": null,
          "old_line_content": "                if (fwriteBulkObject(fp,key) == 0) goto werr;",
          "new_line_content": "                char cmd[]=\"*3\\r\\n$3\\r\\nSET\\r\\n\";",
          "content_same": false
        },
        {
          "line": 8458,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(list,&li)",
          "new_text": null,
          "old_line_content": "                listRewind(list,&li);",
          "new_line_content": "                listNode *ln;",
          "content_same": false
        },
        {
          "line": 8459,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "                while((ln = listNext(&li))) {",
          "new_line_content": "                listIter li;",
          "content_same": false
        },
        {
          "line": 8463,
          "old_api": "fwrite",
          "new_api": null,
          "old_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "new_text": null,
          "old_line_content": "                    if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "new_line_content": "                    char cmd[]=\"*3\\r\\n$5\\r\\nRPUSH\\r\\n\";",
          "content_same": false
        },
        {
          "line": 8465,
          "old_api": "fwriteBulkObject",
          "new_api": null,
          "old_text": "fwriteBulkObject(fp,eleobj)",
          "new_text": null,
          "old_line_content": "                    if (fwriteBulkObject(fp,eleobj) == 0) goto werr;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8470,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(set)",
          "new_text": null,
          "old_line_content": "                dictIterator *di = dictGetIterator(set);",
          "new_line_content": "            } else if (o->type == REDIS_SET) {",
          "content_same": false
        },
        {
          "line": 8475,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "                    robj *eleobj = dictGetEntryKey(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8477,
          "old_api": "fwrite",
          "new_api": null,
          "old_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "new_text": null,
          "old_line_content": "                    if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "new_line_content": "                    char cmd[]=\"*3\\r\\n$4\\r\\nSADD\\r\\n\";",
          "content_same": false
        },
        {
          "line": 8479,
          "old_api": "fwriteBulkObject",
          "new_api": null,
          "old_text": "fwriteBulkObject(fp,eleobj)",
          "new_text": null,
          "old_line_content": "                    if (fwriteBulkObject(fp,eleobj) == 0) goto werr;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8485,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(zs->dict)",
          "new_text": null,
          "old_line_content": "                dictIterator *di = dictGetIterator(zs->dict);",
          "new_line_content": "            } else if (o->type == REDIS_ZSET) {",
          "content_same": false
        },
        {
          "line": 8490,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "                    robj *eleobj = dictGetEntryKey(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8495,
          "old_api": "fwriteBulkDouble",
          "new_api": null,
          "old_text": "fwriteBulkDouble(fp,*score)",
          "new_text": null,
          "old_line_content": "                    if (fwriteBulkDouble(fp,*score) == 0) goto werr;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8504,
          "old_api": "zipmapRewind",
          "new_api": null,
          "old_text": "zipmapRewind(o->ptr)",
          "new_text": null,
          "old_line_content": "                    unsigned char *p = zipmapRewind(o->ptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8508,
          "old_api": "zipmapNext",
          "new_api": null,
          "old_text": "zipmapNext(p,&field,&flen,&val,&vlen)",
          "new_text": null,
          "old_line_content": "                    while((p = zipmapNext(p,&field,&flen,&val,&vlen)) != NULL) {",
          "new_line_content": "                    unsigned char *field, *val;",
          "content_same": false
        },
        {
          "line": 8509,
          "old_api": "fwrite",
          "new_api": null,
          "old_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "new_text": null,
          "old_line_content": "                        if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "new_line_content": "                    unsigned int flen, vlen;",
          "content_same": false
        },
        {
          "line": 8510,
          "old_api": "fwriteBulkObject",
          "new_api": null,
          "old_text": "fwriteBulkObject(fp,key)",
          "new_text": null,
          "old_line_content": "                        if (fwriteBulkObject(fp,key) == 0) goto werr;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8517,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(o->ptr)",
          "new_text": null,
          "old_line_content": "                    dictIterator *di = dictGetIterator(o->ptr);",
          "new_line_content": "                            return -1;",
          "content_same": false
        },
        {
          "line": 8521,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "                        robj *field = dictGetEntryKey(de);",
          "new_line_content": "                    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 8522,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "                        robj *val = dictGetEntryVal(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8526,
          "old_api": "fwriteBulkObject",
          "new_api": null,
          "old_text": "fwriteBulkObject(fp,field)",
          "new_text": null,
          "old_line_content": "                        if (fwriteBulkObject(fp,field) == -1) return -1;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8539,
          "old_api": "fwrite",
          "new_api": null,
          "old_text": "fwrite(cmd,sizeof(cmd)-1,1,fp)",
          "new_text": null,
          "old_line_content": "                if (fwrite(cmd,sizeof(cmd)-1,1,fp) == 0) goto werr;",
          "new_line_content": "                char cmd[]=\"*3\\r\\n$8\\r\\nEXPIREAT\\r\\n\";",
          "content_same": false
        },
        {
          "line": 8540,
          "old_api": "fwriteBulkObject",
          "new_api": null,
          "old_text": "fwriteBulkObject(fp,key)",
          "new_text": null,
          "old_line_content": "                if (fwriteBulkObject(fp,key) == 0) goto werr;",
          "new_line_content": "                /* If this key is already expired skip it */",
          "content_same": false
        },
        {
          "line": 8541,
          "old_api": "fwriteBulkLong",
          "new_api": null,
          "old_text": "fwriteBulkLong(fp,expiretime)",
          "new_text": null,
          "old_line_content": "                if (fwriteBulkLong(fp,expiretime) == 0) goto werr;",
          "new_line_content": "                if (expiretime < now) continue;",
          "content_same": false
        },
        {
          "line": 8545,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "        dictReleaseIterator(di);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 8549,
          "old_api": "fflush",
          "new_api": null,
          "old_text": "fflush(fp)",
          "new_text": null,
          "old_line_content": "    fflush(fp);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 8550,
          "old_api": "fileno",
          "new_api": null,
          "old_text": "fileno(fp)",
          "new_text": null,
          "old_line_content": "    fsync(fileno(fp));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8551,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "    fclose(fp);",
          "new_line_content": "    /* Make sure data will not remain on the OS's output buffers */",
          "content_same": false
        },
        {
          "line": 8555,
          "old_api": "rename",
          "new_api": null,
          "old_text": "rename(tmpfile,filename)",
          "new_text": null,
          "old_line_content": "    if (rename(tmpfile,filename) == -1) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8556,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Error moving temp append only file on the final destination: %s\", strerror(errno));",
          "new_line_content": "    /* Use RENAME to make sure the DB file is changed atomically only",
          "content_same": false
        },
        {
          "line": 8557,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(tmpfile)",
          "new_text": null,
          "old_line_content": "        unlink(tmpfile);",
          "new_line_content": "     * if the generate DB file is ok. */",
          "content_same": false
        },
        {
          "line": 8564,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "    fclose(fp);",
          "new_line_content": "    return REDIS_OK;",
          "content_same": false
        },
        {
          "line": 8565,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(tmpfile)",
          "new_text": null,
          "old_line_content": "    unlink(tmpfile);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8566,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_WARNING,\"Write error writing append only file on disk: %s\", strerror(errno));",
          "new_line_content": "werr:",
          "content_same": false
        },
        {
          "line": 8587,
          "old_api": "waitEmptyIOJobsQueue",
          "new_api": null,
          "old_text": "waitEmptyIOJobsQueue()",
          "new_text": null,
          "old_line_content": "    if (server.vm_enabled) waitEmptyIOJobsQueue();",
          "new_line_content": "    pid_t childpid;",
          "content_same": false
        },
        {
          "line": 8588,
          "old_api": "fork",
          "new_api": null,
          "old_text": "fork()",
          "new_text": null,
          "old_line_content": "    if ((childpid = fork()) == 0) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8592,
          "old_api": "vmReopenSwapFile",
          "new_api": null,
          "old_text": "vmReopenSwapFile()",
          "new_text": null,
          "old_line_content": "        if (server.vm_enabled) vmReopenSwapFile();",
          "new_line_content": "        /* Child */",
          "content_same": false
        },
        {
          "line": 8593,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(server.fd)",
          "new_text": null,
          "old_line_content": "        close(server.fd);",
          "new_line_content": "        char tmpfile[256];",
          "content_same": false
        },
        {
          "line": 8594,
          "old_api": "getpid",
          "new_api": null,
          "old_text": "getpid()",
          "new_text": null,
          "old_line_content": "        snprintf(tmpfile,256,\"temp-rewriteaof-bg-%d.aof\", (int) getpid());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8603,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\n                \"Can't rewrite append only file in background: fork: %s\",\n                strerror(errno))",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 8605,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "                strerror(errno));",
          "new_line_content": "        if (childpid == -1) {",
          "content_same": false
        },
        {
          "line": 8624,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR background append only file rewriting already in progress\\r\\n\")",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(\"-ERR background append only file rewriting already in progress\\r\\n\"));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8629,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(status)",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(status));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 8631,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.err)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.err);",
          "new_line_content": "        char *status = \"+Background append only file rewriting started\\r\\n\";",
          "content_same": false
        },
        {
          "line": 8638,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(tmpfile,256,\"temp-rewriteaof-bg-%d.aof\", (int) childpid)",
          "new_text": null,
          "old_line_content": "    snprintf(tmpfile,256,\"temp-rewriteaof-bg-%d.aof\", (int) childpid);",
          "new_line_content": "static void aofRemoveTempFile(pid_t childpid) {",
          "content_same": false
        },
        {
          "line": 8639,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(tmpfile)",
          "new_text": null,
          "old_line_content": "    unlink(tmpfile);",
          "new_line_content": "    char tmpfile[256];",
          "content_same": false
        },
        {
          "line": 8672,
          "old_api": "zmalloc_enable_thread_safeness",
          "new_api": null,
          "old_text": "zmalloc_enable_thread_safeness()",
          "new_text": null,
          "old_line_content": "        zmalloc_enable_thread_safeness(); /* we need thread safe zmalloc() */",
          "new_line_content": "    struct flock fl;",
          "content_same": false
        },
        {
          "line": 8674,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Using '%s' as swap file\",server.vm_swap_file)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_NOTICE,\"Using '%s' as swap file\",server.vm_swap_file);",
          "new_line_content": "    if (server.vm_max_threads != 0)",
          "content_same": false
        },
        {
          "line": 8676,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(server.vm_swap_file,\"r+b\")",
          "new_text": null,
          "old_line_content": "    if ((server.vm_fp = fopen(server.vm_swap_file,\"r+b\")) == NULL) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8682,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "            strerror(errno));",
          "new_line_content": "    if (server.vm_fp == NULL) {",
          "content_same": false
        },
        {
          "line": 8691,
          "old_api": "fcntl",
          "new_api": null,
          "old_text": "fcntl(server.vm_fd,F_SETLK,&fl)",
          "new_text": null,
          "old_line_content": "    if (fcntl(server.vm_fd,F_SETLK,&fl) == -1) {",
          "new_line_content": "    fl.l_type = F_WRLCK;",
          "content_same": false
        },
        {
          "line": 8692,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\n            \"Can't lock the swap file at '%s': %s. Make sure it is not used by another Redis instance.\", server.vm_swap_file, strerror(errno))",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,",
          "new_line_content": "    fl.l_whence = SEEK_SET;",
          "content_same": false
        },
        {
          "line": 8693,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "            \"Can't lock the swap file at '%s': %s. Make sure it is not used by another Redis instance.\", server.vm_swap_file, strerror(errno));",
          "new_line_content": "    fl.l_start = fl.l_len = 0;",
          "content_same": false
        },
        {
          "line": 8704,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Allocating %lld bytes of swap file\",totsize)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_NOTICE,\"Allocating %lld bytes of swap file\",totsize);",
          "new_line_content": "    server.vm_stats_swapouts = 0;",
          "content_same": false
        },
        {
          "line": 8705,
          "old_api": "ftruncate",
          "new_api": null,
          "old_text": "ftruncate(server.vm_fd,totsize)",
          "new_text": null,
          "old_line_content": "    if (ftruncate(server.vm_fd,totsize) == -1) {",
          "new_line_content": "    server.vm_stats_swapins = 0;",
          "content_same": false
        },
        {
          "line": 8706,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Can't ftruncate swap file: %s. Exiting.\",\n            strerror(errno))",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Can't ftruncate swap file: %s. Exiting.\",",
          "new_line_content": "    totsize = server.vm_pages*server.vm_page_size;",
          "content_same": false
        },
        {
          "line": 8712,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc((server.vm_pages+7)/8)",
          "new_text": null,
          "old_line_content": "    server.vm_bitmap = zmalloc((server.vm_pages+7)/8);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 8719,
          "old_api": "listCreate",
          "new_api": null,
          "old_text": "listCreate()",
          "new_text": null,
          "old_line_content": "    server.io_processing = listCreate();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8720,
          "old_api": "listCreate",
          "new_api": null,
          "old_text": "listCreate()",
          "new_text": null,
          "old_line_content": "    server.io_processed = listCreate();",
          "new_line_content": "    /* Initialize threaded I/O (used by Virtual Memory) */",
          "content_same": false
        },
        {
          "line": 8728,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "            ,strerror(errno));",
          "new_line_content": "    server.io_active_threads = 0;",
          "content_same": false
        },
        {
          "line": 8733,
          "old_api": "anetNonBlock",
          "new_api": null,
          "old_text": "anetNonBlock(NULL,server.io_ready_pipe_read)",
          "new_text": null,
          "old_line_content": "    redisAssert(anetNonBlock(NULL,server.io_ready_pipe_read) != ANET_ERR);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 8735,
          "old_api": "pthread_attr_init",
          "new_api": null,
          "old_text": "pthread_attr_init(&server.io_threads_attr)",
          "new_text": null,
          "old_line_content": "    pthread_attr_init(&server.io_threads_attr);",
          "new_line_content": "    server.io_ready_pipe_write = pipefds[1];",
          "content_same": false
        },
        {
          "line": 8740,
          "old_api": "aeCreateFileEvent",
          "new_api": null,
          "old_text": "aeCreateFileEvent(server.el, server.io_ready_pipe_read, AE_READABLE,\n        vmThreadedIOCompletedJob, NULL)",
          "new_text": null,
          "old_line_content": "    if (aeCreateFileEvent(server.el, server.io_ready_pipe_read, AE_READABLE,",
          "new_line_content": "    while (stacksize < REDIS_THREAD_STACK_SIZE) stacksize *= 2;",
          "content_same": false
        },
        {
          "line": 8742,
          "old_api": "oom",
          "new_api": null,
          "old_text": "oom(\"creating file event\")",
          "new_text": null,
          "old_line_content": "        oom(\"creating file event\");",
          "new_line_content": "    /* Listen for events in the threaded I/O pipe */",
          "content_same": false
        },
        {
          "line": 8749,
          "old_api": "vmFreePage",
          "new_api": null,
          "old_text": "vmFreePage(page)",
          "new_text": null,
          "old_line_content": "    redisAssert(vmFreePage(page) == 1);",
          "new_line_content": "static void vmMarkPageUsed(off_t page) {",
          "content_same": false
        },
        {
          "line": 8758,
          "old_api": "vmMarkPageUsed",
          "new_api": null,
          "old_text": "vmMarkPageUsed(page+j)",
          "new_text": null,
          "old_line_content": "        vmMarkPageUsed(page+j);",
          "new_line_content": "    off_t j;",
          "content_same": false
        },
        {
          "line": 8760,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG,\"Mark USED pages: %lld pages at %lld\\n\",\n        (long long)count, (long long)page)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_DEBUG,\"Mark USED pages: %lld pages at %lld\\n\",",
          "new_line_content": "    for (j = 0; j < count; j++)",
          "content_same": false
        },
        {
          "line": 8768,
          "old_api": "vmFreePage",
          "new_api": null,
          "old_text": "vmFreePage(page)",
          "new_text": null,
          "old_line_content": "    redisAssert(vmFreePage(page) == 0);",
          "new_line_content": "static void vmMarkPageFree(off_t page) {",
          "content_same": false
        },
        {
          "line": 8777,
          "old_api": "vmMarkPageFree",
          "new_api": null,
          "old_text": "vmMarkPageFree(page+j)",
          "new_text": null,
          "old_line_content": "        vmMarkPageFree(page+j);",
          "new_line_content": "    off_t j;",
          "content_same": false
        },
        {
          "line": 8779,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG,\"Mark FREE pages: %lld pages at %lld\\n\",\n        (long long)count, (long long)page)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_DEBUG,\"Mark FREE pages: %lld pages at %lld\\n\",",
          "new_line_content": "    for (j = 0; j < count; j++)",
          "content_same": false
        },
        {
          "line": 8831,
          "old_api": "vmFreePage",
          "new_api": null,
          "old_text": "vmFreePage(this)",
          "new_text": null,
          "old_line_content": "        if (vmFreePage(this)) {",
          "new_line_content": "                numfree = 0;",
          "content_same": false
        },
        {
          "line": 8838,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG, \"FOUND CONTIGUOUS PAGES: %lld pages at %lld\\n\", (long long) n, (long long) *first)",
          "new_text": null,
          "old_line_content": "                redisLog(REDIS_DEBUG, \"FOUND CONTIGUOUS PAGES: %lld pages at %lld\\n\", (long long) n, (long long) *first);",
          "new_line_content": "            if (numfree == n) {",
          "content_same": false
        },
        {
          "line": 8850,
          "old_api": "random",
          "new_api": null,
          "old_text": "random()",
          "new_text": null,
          "old_line_content": "            offset += random() % REDIS_VM_MAX_RANDOM_JUMP;",
          "new_line_content": "         * searched enough near this place. */",
          "content_same": false
        },
        {
          "line": 8865,
          "old_api": "pthread_mutex_lock",
          "new_api": null,
          "old_text": "pthread_mutex_lock(&server.io_swapfile_mutex)",
          "new_text": null,
          "old_line_content": "    if (server.vm_enabled) pthread_mutex_lock(&server.io_swapfile_mutex);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8866,
          "old_api": "fseeko",
          "new_api": null,
          "old_text": "fseeko(server.vm_fp,page*server.vm_page_size,SEEK_SET)",
          "new_text": null,
          "old_line_content": "    if (fseeko(server.vm_fp,page*server.vm_page_size,SEEK_SET) == -1) {",
          "new_line_content": "/* Write the specified object at the specified page of the swap file */",
          "content_same": false
        },
        {
          "line": 8867,
          "old_api": "pthread_mutex_unlock",
          "new_api": null,
          "old_text": "pthread_mutex_unlock(&server.io_swapfile_mutex)",
          "new_text": null,
          "old_line_content": "        if (server.vm_enabled) pthread_mutex_unlock(&server.io_swapfile_mutex);",
          "new_line_content": "static int vmWriteObjectOnSwap(robj *o, off_t page) {",
          "content_same": false
        },
        {
          "line": 8874,
          "old_api": "fflush",
          "new_api": null,
          "old_text": "fflush(server.vm_fp)",
          "new_text": null,
          "old_line_content": "    fflush(server.vm_fp);",
          "new_line_content": "        return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 8875,
          "old_api": "pthread_mutex_unlock",
          "new_api": null,
          "old_text": "pthread_mutex_unlock(&server.io_swapfile_mutex)",
          "new_text": null,
          "old_line_content": "    if (server.vm_enabled) pthread_mutex_unlock(&server.io_swapfile_mutex);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 8884,
          "old_api": "rdbSavedObjectPages",
          "new_api": null,
          "old_text": "rdbSavedObjectPages(val,NULL)",
          "new_text": null,
          "old_line_content": "    off_t pages = rdbSavedObjectPages(val,NULL);",
          "new_line_content": " * If we can't find enough contiguous empty pages to swap the object on disk",
          "content_same": false
        },
        {
          "line": 8888,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(key->refcount == 1)",
          "new_text": null,
          "old_line_content": "    assert(key->refcount == 1);",
          "new_line_content": "    off_t page;",
          "content_same": false
        },
        {
          "line": 8889,
          "old_api": "vmFindContiguousPages",
          "new_api": null,
          "old_text": "vmFindContiguousPages(&page,pages)",
          "new_text": null,
          "old_line_content": "    if (vmFindContiguousPages(&page,pages) == REDIS_ERR) return REDIS_ERR;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8895,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(val)",
          "new_text": null,
          "old_line_content": "    decrRefCount(val); /* Deallocate the object from memory. */",
          "new_line_content": "    key->vm.usedpages = pages;",
          "content_same": false
        },
        {
          "line": 8896,
          "old_api": "vmMarkPagesUsed",
          "new_api": null,
          "old_text": "vmMarkPagesUsed(page,pages)",
          "new_text": null,
          "old_line_content": "    vmMarkPagesUsed(page,pages);",
          "new_line_content": "    key->storage = REDIS_VM_SWAPPED;",
          "content_same": false
        },
        {
          "line": 8897,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG,\"VM: object %s swapped out at %lld (%lld pages)\",\n        (unsigned char*) key->ptr,\n        (unsigned long long) page, (unsigned long long) pages)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_DEBUG,\"VM: object %s swapped out at %lld (%lld pages)\",",
          "new_line_content": "    key->vtype = val->type;",
          "content_same": false
        },
        {
          "line": 8908,
          "old_api": "pthread_mutex_lock",
          "new_api": null,
          "old_text": "pthread_mutex_lock(&server.io_swapfile_mutex)",
          "new_text": null,
          "old_line_content": "    if (server.vm_enabled) pthread_mutex_lock(&server.io_swapfile_mutex);",
          "new_line_content": "static robj *vmReadObjectFromSwap(off_t page, int type) {",
          "content_same": false
        },
        {
          "line": 8909,
          "old_api": "fseeko",
          "new_api": null,
          "old_text": "fseeko(server.vm_fp,page*server.vm_page_size,SEEK_SET)",
          "new_text": null,
          "old_line_content": "    if (fseeko(server.vm_fp,page*server.vm_page_size,SEEK_SET) == -1) {",
          "new_line_content": "    robj *o;",
          "content_same": false
        },
        {
          "line": 8910,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\n            \"Unrecoverable VM problem in vmReadObjectFromSwap(): can't seek: %s\",\n            strerror(errno))",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8917,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING, \"Unrecoverable VM problem in vmReadObjectFromSwap(): can't load object from swap file: %s\", strerror(errno));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 8932,
          "old_api": "redisAssert",
          "new_api": null,
          "old_text": "redisAssert(key->storage == REDIS_VM_SWAPPED || key->storage == REDIS_VM_LOADING)",
          "new_text": null,
          "old_line_content": "    redisAssert(key->storage == REDIS_VM_SWAPPED || key->storage == REDIS_VM_LOADING);",
          "new_line_content": "static robj *vmGenericLoadObject(robj *key, int preview) {",
          "content_same": false
        },
        {
          "line": 8933,
          "old_api": "vmReadObjectFromSwap",
          "new_api": null,
          "old_text": "vmReadObjectFromSwap(key->vm.page,key->vtype)",
          "new_text": null,
          "old_line_content": "    val = vmReadObjectFromSwap(key->vm.page,key->vtype);",
          "new_line_content": "    robj *val;",
          "content_same": false
        },
        {
          "line": 8937,
          "old_api": "vmMarkPagesFree",
          "new_api": null,
          "old_text": "vmMarkPagesFree(key->vm.page,key->vm.usedpages)",
          "new_text": null,
          "old_line_content": "        vmMarkPagesFree(key->vm.page,key->vm.usedpages);",
          "new_line_content": "    if (!preview) {",
          "content_same": false
        },
        {
          "line": 8938,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG, \"VM: object %s loaded from disk\",\n            (unsigned char*) key->ptr)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_DEBUG, \"VM: object %s loaded from disk\",",
          "new_line_content": "        key->storage = REDIS_VM_MEMORY;",
          "content_same": false
        },
        {
          "line": 8942,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG, \"VM: object %s previewed from disk\",\n            (unsigned char*) key->ptr)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_DEBUG, \"VM: object %s previewed from disk\",",
          "new_line_content": "            (unsigned char*) key->ptr);",
          "content_same": false
        },
        {
          "line": 8954,
          "old_api": "vmCancelThreadedIOJob",
          "new_api": null,
          "old_text": "vmCancelThreadedIOJob(key)",
          "new_text": null,
          "old_line_content": "        vmCancelThreadedIOJob(key);",
          "new_line_content": "    /* If we are loading the object in background, stop it, we",
          "content_same": false
        },
        {
          "line": 8955,
          "old_api": "vmGenericLoadObject",
          "new_api": null,
          "old_text": "vmGenericLoadObject(key,0)",
          "new_text": null,
          "old_line_content": "    return vmGenericLoadObject(key,0);",
          "new_line_content": "     * need to load this object synchronously ASAP. */",
          "content_same": false
        },
        {
          "line": 8963,
          "old_api": "vmGenericLoadObject",
          "new_api": null,
          "old_text": "vmGenericLoadObject(key,1)",
          "new_text": null,
          "old_line_content": "    return vmGenericLoadObject(key,1);",
          "new_line_content": " * without to really bring it from swap to memory, like while saving the",
          "content_same": false
        },
        {
          "line": 8991,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(o->ptr)",
          "new_text": null,
          "old_line_content": "            asize = sdslen(o->ptr)+sizeof(*o)+sizeof(long)*2;",
          "new_line_content": "        if (o->encoding != REDIS_ENCODING_RAW) {",
          "content_same": false
        },
        {
          "line": 8996,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(l)",
          "new_text": null,
          "old_line_content": "        listNode *ln = listFirst(l);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 9004,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(ele->ptr)",
          "new_text": null,
          "old_line_content": "                            (sizeof(*o)+sdslen(ele->ptr)) :",
          "new_line_content": "            long elesize;",
          "content_same": false
        },
        {
          "line": 9006,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(l)",
          "new_text": null,
          "old_line_content": "            asize += (sizeof(listNode)+elesize)*listLength(l);",
          "new_line_content": "            elesize = (ele->encoding == REDIS_ENCODING_RAW) ?",
          "content_same": false
        },
        {
          "line": 9014,
          "old_api": "dictSlots",
          "new_api": null,
          "old_text": "dictSlots(d)",
          "new_text": null,
          "old_line_content": "        asize = sizeof(dict)+(sizeof(struct dictEntry*)*dictSlots(d));",
          "new_line_content": "        z = (o->type == REDIS_ZSET);",
          "content_same": false
        },
        {
          "line": 9016,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(d)",
          "new_text": null,
          "old_line_content": "        if (dictSize(d)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9020,
          "old_api": "dictGetRandomKey",
          "new_api": null,
          "old_text": "dictGetRandomKey(d)",
          "new_text": null,
          "old_line_content": "            de = dictGetRandomKey(d);",
          "new_line_content": "            long elesize;",
          "content_same": false
        },
        {
          "line": 9021,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "            ele = dictGetEntryKey(de);",
          "new_line_content": "            robj *ele;",
          "content_same": false
        },
        {
          "line": 9025,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(d)",
          "new_text": null,
          "old_line_content": "            asize += (sizeof(struct dictEntry)+elesize)*dictSize(d);",
          "new_line_content": "            elesize = (ele->encoding == REDIS_ENCODING_RAW) ?",
          "content_same": false
        },
        {
          "line": 9031,
          "old_api": "zipmapRewind",
          "new_api": null,
          "old_text": "zipmapRewind((unsigned char*)o->ptr)",
          "new_text": null,
          "old_line_content": "            unsigned char *p = zipmapRewind((unsigned char*)o->ptr);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 9032,
          "old_api": "zipmapLen",
          "new_api": null,
          "old_text": "zipmapLen((unsigned char*)o->ptr)",
          "new_text": null,
          "old_line_content": "            unsigned int len = zipmapLen((unsigned char*)o->ptr);",
          "new_line_content": "    case REDIS_HASH:",
          "content_same": false
        },
        {
          "line": 9036,
          "old_api": "zipmapNext",
          "new_api": null,
          "old_text": "zipmapNext(p,&key,&klen,&val,&vlen)",
          "new_text": null,
          "old_line_content": "            if ((p = zipmapNext(p,&key,&klen,&val,&vlen)) == NULL) {",
          "new_line_content": "            unsigned int klen, vlen;",
          "content_same": false
        },
        {
          "line": 9043,
          "old_api": "dictSlots",
          "new_api": null,
          "old_text": "dictSlots(d)",
          "new_text": null,
          "old_line_content": "            asize = sizeof(dict)+(sizeof(struct dictEntry*)*dictSlots(d));",
          "new_line_content": "            asize = len*(klen+vlen+3);",
          "content_same": false
        },
        {
          "line": 9044,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(d)",
          "new_text": null,
          "old_line_content": "            if (dictSize(d)) {",
          "new_line_content": "        } else if (o->encoding == REDIS_ENCODING_HT) {",
          "content_same": false
        },
        {
          "line": 9048,
          "old_api": "dictGetRandomKey",
          "new_api": null,
          "old_text": "dictGetRandomKey(d)",
          "new_text": null,
          "old_line_content": "                de = dictGetRandomKey(d);",
          "new_line_content": "                long elesize;",
          "content_same": false
        },
        {
          "line": 9049,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "                ele = dictGetEntryKey(de);",
          "new_line_content": "                robj *ele;",
          "content_same": false
        },
        {
          "line": 9053,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "                ele = dictGetEntryVal(de);",
          "new_line_content": "                elesize = (ele->encoding == REDIS_ENCODING_RAW) ?",
          "content_same": false
        },
        {
          "line": 9055,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(ele->ptr)",
          "new_text": null,
          "old_line_content": "                                (sizeof(*o)+sdslen(ele->ptr)) :",
          "new_line_content": "                                sizeof(*o);",
          "content_same": false
        },
        {
          "line": 9057,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(d)",
          "new_text": null,
          "old_line_content": "                asize += (sizeof(struct dictEntry)+elesize)*dictSize(d);",
          "new_line_content": "                elesize = (ele->encoding == REDIS_ENCODING_RAW) ?",
          "content_same": false
        },
        {
          "line": 9062,
          "old_api": "log",
          "new_api": null,
          "old_text": "log(1+asize)",
          "new_text": null,
          "old_line_content": "    return (double)age*log(1+asize);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 9085,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(db->dict)",
          "new_text": null,
          "old_line_content": "        if (dictSize(db->dict) == 0) continue;",
          "new_line_content": "         * are swappable objects */",
          "content_same": false
        },
        {
          "line": 9091,
          "old_api": "dictGetRandomKey",
          "new_api": null,
          "old_text": "dictGetRandomKey(db->dict)",
          "new_text": null,
          "old_line_content": "            de = dictGetRandomKey(db->dict);",
          "new_line_content": "            double swappability;",
          "content_same": false
        },
        {
          "line": 9092,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "            key = dictGetEntryKey(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9093,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "            val = dictGetEntryVal(de);",
          "new_line_content": "            if (maxtries) maxtries--;",
          "content_same": false
        },
        {
          "line": 9105,
          "old_api": "computeObjectSwappability",
          "new_api": null,
          "old_text": "computeObjectSwappability(val)",
          "new_text": null,
          "old_line_content": "            swappability = computeObjectSwappability(val);",
          "new_line_content": "                if (maxtries) i--; /* don't count this try */",
          "content_same": false
        },
        {
          "line": 9114,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(best)",
          "new_text": null,
          "old_line_content": "    key = dictGetEntryKey(best);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 9115,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(best)",
          "new_text": null,
          "old_line_content": "    val = dictGetEntryVal(best);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 9122,
          "old_api": "dupStringObject",
          "new_api": null,
          "old_text": "dupStringObject(key)",
          "new_text": null,
          "old_line_content": "        robj *newkey = dupStringObject(key);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9123,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(key)",
          "new_text": null,
          "old_line_content": "        decrRefCount(key);",
          "new_line_content": "    /* Unshare the key if needed */",
          "content_same": false
        },
        {
          "line": 9124,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(best)",
          "new_text": null,
          "old_line_content": "        key = dictGetEntryKey(best) = newkey;",
          "new_line_content": "    if (key->refcount > 1) {",
          "content_same": false
        },
        {
          "line": 9128,
          "old_api": "vmSwapObjectThreaded",
          "new_api": null,
          "old_text": "vmSwapObjectThreaded(key,val,best_db)",
          "new_text": null,
          "old_line_content": "        vmSwapObjectThreaded(key,val,best_db);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 9132,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(best)",
          "new_text": null,
          "old_line_content": "            dictGetEntryVal(best) = NULL;",
          "new_line_content": "        return REDIS_OK;",
          "content_same": false
        },
        {
          "line": 9141,
          "old_api": "vmSwapOneObject",
          "new_api": null,
          "old_text": "vmSwapOneObject(0)",
          "new_text": null,
          "old_line_content": "    return vmSwapOneObject(0);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 9145,
          "old_api": "vmSwapOneObject",
          "new_api": null,
          "old_text": "vmSwapOneObject(1)",
          "new_text": null,
          "old_line_content": "    return vmSwapOneObject(1);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 9161,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(db->dict,key)",
          "new_text": null,
          "old_line_content": "    if ((de = dictFind(db->dict,key)) == NULL) return 0;",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 9162,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "    foundkey = dictGetEntryKey(de);",
          "new_line_content": "    robj *foundkey;",
          "content_same": false
        },
        {
          "line": 9174,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(j->val)",
          "new_text": null,
          "old_line_content": "        decrRefCount(j->val);",
          "new_line_content": "    if ((j->type == REDIS_IOJOB_PREPARE_SWAP ||",
          "content_same": false
        },
        {
          "line": 9179,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(j)",
          "new_text": null,
          "old_line_content": "    zfree(j);",
          "new_line_content": "     * the count creating IO Jobs. This is because the key field here is",
          "content_same": false
        },
        {
          "line": 9190,
          "old_api": "REDIS_NOTUSED",
          "new_api": null,
          "old_text": "REDIS_NOTUSED(el)",
          "new_text": null,
          "old_line_content": "    REDIS_NOTUSED(el);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 9191,
          "old_api": "REDIS_NOTUSED",
          "new_api": null,
          "old_text": "REDIS_NOTUSED(mask)",
          "new_text": null,
          "old_line_content": "    REDIS_NOTUSED(mask);",
          "new_line_content": "    char buf[1];",
          "content_same": false
        },
        {
          "line": 9192,
          "old_api": "REDIS_NOTUSED",
          "new_api": null,
          "old_text": "REDIS_NOTUSED(privdata)",
          "new_text": null,
          "old_line_content": "    REDIS_NOTUSED(privdata);",
          "new_line_content": "    int retval, processed = 0, toprocess = -1, trytoswap = 1;",
          "content_same": false
        },
        {
          "line": 9196,
          "old_api": "read",
          "new_api": null,
          "old_text": "read(fd,buf,1)",
          "new_text": null,
          "old_line_content": "    while((retval = read(fd,buf,1)) == 1) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9202,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG,\"Processing I/O completed job\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_DEBUG,\"Processing I/O completed job\");",
          "new_line_content": "        robj *key;",
          "content_same": false
        },
        {
          "line": 9206,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.io_processed)",
          "new_text": null,
          "old_line_content": "        assert(listLength(server.io_processed) != 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9213,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(server.io_processed,ln)",
          "new_text": null,
          "old_line_content": "        listDelNode(server.io_processed,ln);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 9222,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG,\"Job %p type: %d, key at %p (%s) refcount: %d\\n\", (void*) j, j->type, (void*)j->key, (char*)j->key->ptr, j->key->refcount)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_DEBUG,\"Job %p type: %d, key at %p (%s) refcount: %d\\n\", (void*) j, j->type, (void*)j->key, (char*)j->key->ptr, j->key->refcount);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 9223,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(j->db->dict,j->key)",
          "new_text": null,
          "old_line_content": "        de = dictFind(j->db->dict,j->key);",
          "new_line_content": "        /* Post process it in the main thread, as there are things we",
          "content_same": false
        },
        {
          "line": 9224,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(de != NULL)",
          "new_text": null,
          "old_line_content": "        assert(de != NULL);",
          "new_line_content": "         * can do just here to avoid race conditions and/or invasive locks */",
          "content_same": false
        },
        {
          "line": 9232,
          "old_api": "vmMarkPagesFree",
          "new_api": null,
          "old_text": "vmMarkPagesFree(key->vm.page,key->vm.usedpages)",
          "new_text": null,
          "old_line_content": "            vmMarkPagesFree(key->vm.page,key->vm.usedpages);",
          "new_line_content": "            /* Key loaded, bring it at home */",
          "content_same": false
        },
        {
          "line": 9233,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG, \"VM: object %s loaded from disk (threaded)\",\n                (unsigned char*) key->ptr)",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_DEBUG, \"VM: object %s loaded from disk (threaded)\",",
          "new_line_content": "            key->storage = REDIS_VM_MEMORY;",
          "content_same": false
        },
        {
          "line": 9237,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "            dictGetEntryVal(de) = j->val;",
          "new_line_content": "                (unsigned char*) key->ptr);",
          "content_same": false
        },
        {
          "line": 9238,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(j->val)",
          "new_text": null,
          "old_line_content": "            incrRefCount(j->val);",
          "new_line_content": "            server.vm_stats_swapped_objects--;",
          "content_same": false
        },
        {
          "line": 9242,
          "old_api": "handleClientsBlockedOnSwappedKey",
          "new_api": null,
          "old_text": "handleClientsBlockedOnSwappedKey(db,key)",
          "new_text": null,
          "old_line_content": "            handleClientsBlockedOnSwappedKey(db,key);",
          "new_line_content": "            db = j->db;",
          "content_same": false
        },
        {
          "line": 9247,
          "old_api": "vmCanSwapOut",
          "new_api": null,
          "old_text": "vmCanSwapOut()",
          "new_text": null,
          "old_line_content": "            if (!vmCanSwapOut() ||",
          "new_line_content": "            /* Now we know the amount of pages required to swap this object.",
          "content_same": false
        },
        {
          "line": 9248,
          "old_api": "vmFindContiguousPages",
          "new_api": null,
          "old_text": "vmFindContiguousPages(&j->page,j->pages)",
          "new_text": null,
          "old_line_content": "                vmFindContiguousPages(&j->page,j->pages) == REDIS_ERR)",
          "new_line_content": "             * Let's find some space for it, and queue this task again",
          "content_same": false
        },
        {
          "line": 9252,
          "old_api": "freeIOJob",
          "new_api": null,
          "old_text": "freeIOJob(j)",
          "new_text": null,
          "old_line_content": "                freeIOJob(j);",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 9258,
          "old_api": "vmMarkPagesUsed",
          "new_api": null,
          "old_text": "vmMarkPagesUsed(j->page,j->pages)",
          "new_text": null,
          "old_line_content": "                vmMarkPagesUsed(j->page,j->pages);",
          "new_line_content": "                /* Note that we need to mark this pages as used now,",
          "content_same": false
        },
        {
          "line": 9260,
          "old_api": "lockThreadedIO",
          "new_api": null,
          "old_text": "lockThreadedIO()",
          "new_text": null,
          "old_line_content": "                lockThreadedIO();",
          "new_line_content": "                 * again. */",
          "content_same": false
        },
        {
          "line": 9262,
          "old_api": "unlockThreadedIO",
          "new_api": null,
          "old_text": "unlockThreadedIO()",
          "new_text": null,
          "old_line_content": "                unlockThreadedIO();",
          "new_line_content": "                j->type = REDIS_IOJOB_DO_SWAP;",
          "content_same": false
        },
        {
          "line": 9269,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"key->storage: %d\\n\",key->storage)",
          "new_text": null,
          "old_line_content": "                printf(\"key->storage: %d\\n\",key->storage);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9270,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"key->name: %s\\n\",(char*)key->ptr)",
          "new_text": null,
          "old_line_content": "                printf(\"key->name: %s\\n\",(char*)key->ptr);",
          "new_line_content": "            /* Key swapped. We can finally free some memory. */",
          "content_same": false
        },
        {
          "line": 9271,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"key->refcount: %d\\n\",key->refcount)",
          "new_text": null,
          "old_line_content": "                printf(\"key->refcount: %d\\n\",key->refcount);",
          "new_line_content": "            if (key->storage != REDIS_VM_SWAPPING) {",
          "content_same": false
        },
        {
          "line": 9282,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(val)",
          "new_text": null,
          "old_line_content": "            decrRefCount(val); /* Deallocate the object from memory. */",
          "new_line_content": "            key->vm.usedpages = j->pages;",
          "content_same": false
        },
        {
          "line": 9283,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "            dictGetEntryVal(de) = NULL;",
          "new_line_content": "            key->storage = REDIS_VM_SWAPPED;",
          "content_same": false
        },
        {
          "line": 9284,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG,\n                \"VM: object %s swapped out at %lld (%lld pages) (threaded)\",\n                (unsigned char*) key->ptr,\n                (unsigned long long) j->page, (unsigned long long) j->pages)",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_DEBUG,",
          "new_line_content": "            key->vtype = j->val->type;",
          "content_same": false
        },
        {
          "line": 9290,
          "old_api": "freeIOJob",
          "new_api": null,
          "old_text": "freeIOJob(j)",
          "new_text": null,
          "old_line_content": "            freeIOJob(j);",
          "new_line_content": "                (unsigned long long) j->page, (unsigned long long) j->pages);",
          "content_same": false
        },
        {
          "line": 9294,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "                zmalloc_used_memory() > server.vm_max_memory)",
          "new_line_content": "            /* Put a few more swap requests in queue if we are still",
          "content_same": false
        },
        {
          "line": 9298,
          "old_api": "lockThreadedIO",
          "new_api": null,
          "old_text": "lockThreadedIO()",
          "new_text": null,
          "old_line_content": "                    lockThreadedIO();",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 9299,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.io_newjobs)",
          "new_text": null,
          "old_line_content": "                    more = listLength(server.io_newjobs) <",
          "new_line_content": "                int more = 1;",
          "content_same": false
        },
        {
          "line": 9303,
          "old_api": "vmSwapOneObjectThreaded",
          "new_api": null,
          "old_text": "vmSwapOneObjectThreaded()",
          "new_text": null,
          "old_line_content": "                    if (vmSwapOneObjectThreaded() == REDIS_ERR) {",
          "new_line_content": "                            (unsigned) server.vm_max_threads;",
          "content_same": false
        },
        {
          "line": 9314,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\n            \"WARNING: read(2) error in vmThreadedIOCompletedJob() %s\",\n            strerror(errno))",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,",
          "new_line_content": "        if (processed == toprocess) return;",
          "content_same": false
        },
        {
          "line": 9316,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "            strerror(errno));",
          "new_line_content": "    if (retval < 0 && errno != EAGAIN) {",
          "content_same": false
        },
        {
          "line": 9321,
          "old_api": "pthread_mutex_lock",
          "new_api": null,
          "old_text": "pthread_mutex_lock(&server.io_mutex)",
          "new_text": null,
          "old_line_content": "    pthread_mutex_lock(&server.io_mutex);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 9325,
          "old_api": "pthread_mutex_unlock",
          "new_api": null,
          "old_text": "pthread_mutex_unlock(&server.io_mutex)",
          "new_text": null,
          "old_line_content": "    pthread_mutex_unlock(&server.io_mutex);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 9338,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(o->storage == REDIS_VM_LOADING || o->storage == REDIS_VM_SWAPPING)",
          "new_text": null,
          "old_line_content": "    assert(o->storage == REDIS_VM_LOADING || o->storage == REDIS_VM_SWAPPING);",
          "new_line_content": "    };",
          "content_same": false
        },
        {
          "line": 9340,
          "old_api": "lockThreadedIO",
          "new_api": null,
          "old_text": "lockThreadedIO()",
          "new_text": null,
          "old_line_content": "    lockThreadedIO();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9346,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(lists[i],&li)",
          "new_text": null,
          "old_line_content": "        listRewind(lists[i],&li);",
          "new_line_content": "        listNode *ln;",
          "content_same": false
        },
        {
          "line": 9347,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "        while ((ln = listNext(&li)) != NULL) {",
          "new_line_content": "        listIter li;",
          "content_same": false
        },
        {
          "line": 9352,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG,\"*** CANCELED %p (%s) (type %d) (LIST ID %d)\\n\",\n                    (void*)job, (char*)o->ptr, job->type, i)",
          "new_text": null,
          "old_line_content": "                redisLog(REDIS_DEBUG,\"*** CANCELED %p (%s) (type %d) (LIST ID %d)\\n\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9357,
          "old_api": "vmMarkPagesFree",
          "new_api": null,
          "old_text": "vmMarkPagesFree(job->page,job->pages)",
          "new_text": null,
          "old_line_content": "                    vmMarkPagesFree(job->page,job->pages);",
          "new_line_content": "                /* Mark the pages as free since the swap didn't happened",
          "content_same": false
        },
        {
          "line": 9364,
          "old_api": "freeIOJob",
          "new_api": null,
          "old_text": "freeIOJob(job)",
          "new_text": null,
          "old_line_content": "                    freeIOJob(job);",
          "new_line_content": "                case 0: /* io_newjobs */",
          "content_same": false
        },
        {
          "line": 9365,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(lists[i],ln)",
          "new_text": null,
          "old_line_content": "                    listDelNode(lists[i],ln);",
          "new_line_content": "                    /* If the job was yet not processed the best thing to do",
          "content_same": false
        },
        {
          "line": 9381,
          "old_api": "unlockThreadedIO",
          "new_api": null,
          "old_text": "unlockThreadedIO()",
          "new_text": null,
          "old_line_content": "                    unlockThreadedIO();",
          "new_line_content": "                     * next queue (processed)... */",
          "content_same": false
        },
        {
          "line": 9385,
          "old_api": "usleep",
          "new_api": null,
          "old_text": "usleep(1)",
          "new_text": null,
          "old_line_content": "                    usleep(1);",
          "new_line_content": "                    /* But let's wait some time for the I/O thread",
          "content_same": false
        },
        {
          "line": 9400,
          "old_api": "unlockThreadedIO",
          "new_api": null,
          "old_text": "unlockThreadedIO()",
          "new_text": null,
          "old_line_content": "                unlockThreadedIO();",
          "new_line_content": "                    o->storage = REDIS_VM_SWAPPED;",
          "content_same": false
        },
        {
          "line": 9405,
          "old_api": "unlockThreadedIO",
          "new_api": null,
          "old_text": "unlockThreadedIO()",
          "new_text": null,
          "old_line_content": "    unlockThreadedIO();",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 9406,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(1 != 1)",
          "new_text": null,
          "old_line_content": "    assert(1 != 1); /* We should never reach this */",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 9412,
          "old_api": "REDIS_NOTUSED",
          "new_api": null,
          "old_text": "REDIS_NOTUSED(arg)",
          "new_text": null,
          "old_line_content": "    REDIS_NOTUSED(arg);",
          "new_line_content": "static void *IOThreadEntryPoint(void *arg) {",
          "content_same": false
        },
        {
          "line": 9414,
          "old_api": "pthread_self",
          "new_api": null,
          "old_text": "pthread_self()",
          "new_text": null,
          "old_line_content": "    pthread_detach(pthread_self());",
          "new_line_content": "    listNode *ln;",
          "content_same": false
        },
        {
          "line": 9418,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.io_newjobs)",
          "new_text": null,
          "old_line_content": "        if (listLength(server.io_newjobs) == 0) {",
          "new_line_content": "    while(1) {",
          "content_same": false
        },
        {
          "line": 9428,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(server.io_newjobs,ln)",
          "new_text": null,
          "old_line_content": "        listDelNode(server.io_newjobs,ln);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 9430,
          "old_api": "pthread_self",
          "new_api": null,
          "old_text": "pthread_self()",
          "new_text": null,
          "old_line_content": "        j->thread = pthread_self();",
          "new_line_content": "        j = ln->value;",
          "content_same": false
        },
        {
          "line": 9432,
          "old_api": "listLast",
          "new_api": null,
          "old_text": "listLast(server.io_processing)",
          "new_text": null,
          "old_line_content": "        ln = listLast(server.io_processing); /* We use ln later to remove it */",
          "new_line_content": "        /* Add the job in the processing queue */",
          "content_same": false
        },
        {
          "line": 9439,
          "old_api": "vmReadObjectFromSwap",
          "new_api": null,
          "old_text": "vmReadObjectFromSwap(j->page,j->key->vtype)",
          "new_text": null,
          "old_line_content": "            j->val = vmReadObjectFromSwap(j->page,j->key->vtype);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9441,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(\"/dev/null\",\"w+\")",
          "new_text": null,
          "old_line_content": "            FILE *fp = fopen(\"/dev/null\",\"w+\");",
          "new_line_content": "        if (j->type == REDIS_IOJOB_LOAD) {",
          "content_same": false
        },
        {
          "line": 9443,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "            fclose(fp);",
          "new_line_content": "        } else if (j->type == REDIS_IOJOB_PREPARE_SWAP) {",
          "content_same": false
        },
        {
          "line": 9450,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG,\"Thread %ld completed the job: %p (key %s)\",\n            (long) pthread_self(), (void*)j, (char*)j->key->ptr)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_DEBUG,\"Thread %ld completed the job: %p (key %s)\",",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 9451,
          "old_api": "pthread_self",
          "new_api": null,
          "old_text": "pthread_self()",
          "new_text": null,
          "old_line_content": "            (long) pthread_self(), (void*)j, (char*)j->key->ptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9452,
          "old_api": "lockThreadedIO",
          "new_api": null,
          "old_text": "lockThreadedIO()",
          "new_text": null,
          "old_line_content": "        lockThreadedIO();",
          "new_line_content": "        /* Done: insert the job into the processed queue */",
          "content_same": false
        },
        {
          "line": 9468,
          "old_api": "sigemptyset",
          "new_api": null,
          "old_text": "sigemptyset(&mask)",
          "new_text": null,
          "old_line_content": "    sigemptyset(&mask);",
          "new_line_content": "    sigset_t mask, omask;",
          "content_same": false
        },
        {
          "line": 9469,
          "old_api": "sigaddset",
          "new_api": null,
          "old_text": "sigaddset(&mask,SIGCHLD)",
          "new_text": null,
          "old_line_content": "    sigaddset(&mask,SIGCHLD);",
          "new_line_content": "    int err;",
          "content_same": false
        },
        {
          "line": 9470,
          "old_api": "sigaddset",
          "new_api": null,
          "old_text": "sigaddset(&mask,SIGHUP)",
          "new_text": null,
          "old_line_content": "    sigaddset(&mask,SIGHUP);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9488,
          "old_api": "lockThreadedIO",
          "new_api": null,
          "old_text": "lockThreadedIO()",
          "new_text": null,
          "old_line_content": "        lockThreadedIO();",
          "new_line_content": "    while(1) {",
          "content_same": false
        },
        {
          "line": 9489,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.io_newjobs)",
          "new_text": null,
          "old_line_content": "        if (listLength(server.io_newjobs) == 0 &&",
          "new_line_content": "        int io_processed_len;",
          "content_same": false
        },
        {
          "line": 9490,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.io_processing)",
          "new_text": null,
          "old_line_content": "            listLength(server.io_processing) == 0 &&",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9500,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.io_processed)",
          "new_text": null,
          "old_line_content": "        io_processed_len = listLength(server.io_processed);",
          "new_line_content": "         * finshed job, as I/O threads may be hanging trying to write against",
          "content_same": false
        },
        {
          "line": 9501,
          "old_api": "unlockThreadedIO",
          "new_api": null,
          "old_text": "unlockThreadedIO()",
          "new_text": null,
          "old_line_content": "        unlockThreadedIO();",
          "new_line_content": "         * the io_ready_pipe_write FD but there are so much pending jobs that",
          "content_same": false
        },
        {
          "line": 9514,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(server.vm_swap_file,\"r+b\")",
          "new_text": null,
          "old_line_content": "    server.vm_fp = fopen(server.vm_swap_file,\"r+b\");",
          "new_line_content": "static void vmReopenSwapFile(void) {",
          "content_same": false
        },
        {
          "line": 9516,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Can't re-open the VM swap file: %s. Exiting.\",\n            server.vm_swap_file)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Can't re-open the VM swap file: %s. Exiting.\",",
          "new_line_content": "     * and don't want to mess at all with the original file object. */",
          "content_same": false
        },
        {
          "line": 9518,
          "old_api": "_exit",
          "new_api": null,
          "old_text": "_exit(1)",
          "new_text": null,
          "old_line_content": "        _exit(1);",
          "new_line_content": "    if (server.vm_fp == NULL) {",
          "content_same": false
        },
        {
          "line": 9520,
          "old_api": "fileno",
          "new_api": null,
          "old_text": "fileno(server.vm_fp)",
          "new_text": null,
          "old_line_content": "    server.vm_fd = fileno(server.vm_fp);",
          "new_line_content": "            server.vm_swap_file);",
          "content_same": false
        },
        {
          "line": 9525,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_DEBUG,\"Queued IO Job %p type %d about key '%s'\\n\",\n        (void*)j, j->type, (char*)j->key->ptr)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_DEBUG,\"Queued IO Job %p type %d about key '%s'\\n\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9527,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(server.io_newjobs,j)",
          "new_text": null,
          "old_line_content": "    listAddNodeTail(server.io_newjobs,j);",
          "new_line_content": "static void queueIOJob(iojob *j) {",
          "content_same": false
        },
        {
          "line": 9529,
          "old_api": "spawnIOThread",
          "new_api": null,
          "old_text": "spawnIOThread()",
          "new_text": null,
          "old_line_content": "        spawnIOThread();",
          "new_line_content": "        (void*)j, j->type, (char*)j->key->ptr);",
          "content_same": false
        },
        {
          "line": 9535,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(key->storage == REDIS_VM_MEMORY)",
          "new_text": null,
          "old_line_content": "    assert(key->storage == REDIS_VM_MEMORY);",
          "new_line_content": "static int vmSwapObjectThreaded(robj *key, robj *val, redisDb *db) {",
          "content_same": false
        },
        {
          "line": 9536,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(key->refcount == 1)",
          "new_text": null,
          "old_line_content": "    assert(key->refcount == 1);",
          "new_line_content": "    iojob *j;",
          "content_same": false
        },
        {
          "line": 9543,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(val)",
          "new_text": null,
          "old_line_content": "    incrRefCount(val);",
          "new_line_content": "    j->db = db;",
          "content_same": false
        },
        {
          "line": 9548,
          "old_api": "lockThreadedIO",
          "new_api": null,
          "old_text": "lockThreadedIO()",
          "new_text": null,
          "old_line_content": "    lockThreadedIO();",
          "new_line_content": "    j->thread = (pthread_t) -1;",
          "content_same": false
        },
        {
          "line": 9549,
          "old_api": "queueIOJob",
          "new_api": null,
          "old_text": "queueIOJob(j)",
          "new_text": null,
          "old_line_content": "    queueIOJob(j);",
          "new_line_content": "    key->storage = REDIS_VM_SWAPPING;",
          "content_same": false
        },
        {
          "line": 9550,
          "old_api": "unlockThreadedIO",
          "new_api": null,
          "old_text": "unlockThreadedIO()",
          "new_text": null,
          "old_line_content": "    unlockThreadedIO();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9568,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(c->db->dict,key)",
          "new_text": null,
          "old_line_content": "    de = dictFind(c->db->dict,key);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9570,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "    o = dictGetEntryKey(de);",
          "new_line_content": "     * block the client at all. */",
          "content_same": false
        },
        {
          "line": 9575,
          "old_api": "vmCancelThreadedIOJob",
          "new_api": null,
          "old_text": "vmCancelThreadedIOJob(o)",
          "new_text": null,
          "old_line_content": "        vmCancelThreadedIOJob(o);",
          "new_line_content": "        return 0;",
          "content_same": false
        },
        {
          "line": 9583,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(c->io_keys,key)",
          "new_text": null,
          "old_line_content": "    listAddNodeTail(c->io_keys,key);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9584,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(key)",
          "new_text": null,
          "old_line_content": "    incrRefCount(key);",
          "new_line_content": "    /* Add the key to the list of keys this client is waiting for.",
          "content_same": false
        },
        {
          "line": 9592,
          "old_api": "listCreate",
          "new_api": null,
          "old_text": "listCreate()",
          "new_text": null,
          "old_line_content": "        l = listCreate();",
          "new_line_content": "        int retval;",
          "content_same": false
        },
        {
          "line": 9593,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(c->db->io_keys,key,l)",
          "new_text": null,
          "old_line_content": "        retval = dictAdd(c->db->io_keys,key,l);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9594,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(key)",
          "new_text": null,
          "old_line_content": "        incrRefCount(key);",
          "new_line_content": "        /* For every key we take a list of clients blocked for it */",
          "content_same": false
        },
        {
          "line": 9599,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(l,c)",
          "new_text": null,
          "old_line_content": "    listAddNodeTail(l,c);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 9606,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*j))",
          "new_text": null,
          "old_line_content": "        j = zmalloc(sizeof(*j));",
          "new_line_content": "        iojob *j;",
          "content_same": false
        },
        {
          "line": 9615,
          "old_api": "lockThreadedIO",
          "new_api": null,
          "old_text": "lockThreadedIO()",
          "new_text": null,
          "old_line_content": "        lockThreadedIO();",
          "new_line_content": "        j->val = NULL;",
          "content_same": false
        },
        {
          "line": 9616,
          "old_api": "queueIOJob",
          "new_api": null,
          "old_text": "queueIOJob(j)",
          "new_text": null,
          "old_line_content": "        queueIOJob(j);",
          "new_line_content": "        j->canceled = 0;",
          "content_same": false
        },
        {
          "line": 9617,
          "old_api": "unlockThreadedIO",
          "new_api": null,
          "old_text": "unlockThreadedIO()",
          "new_text": null,
          "old_line_content": "        unlockThreadedIO();",
          "new_line_content": "        j->thread = (pthread_t) -1;",
          "content_same": false
        },
        {
          "line": 9625,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "    num = atoi(c->argv[2]->ptr);",
          "new_line_content": "/* Preload keys needed for the ZUNION and ZINTER commands. */",
          "content_same": false
        },
        {
          "line": 9627,
          "old_api": "waitForSwappedKey",
          "new_api": null,
          "old_text": "waitForSwappedKey(c,c->argv[3+i])",
          "new_text": null,
          "old_line_content": "        waitForSwappedKey(c,c->argv[3+i]);",
          "new_line_content": "    int i, num;",
          "content_same": false
        },
        {
          "line": 9645,
          "old_api": "vm_preload_proc",
          "new_api": null,
          "old_text": "cmd->vm_preload_proc(c)",
          "new_text": null,
          "old_line_content": "        cmd->vm_preload_proc(c);",
          "new_line_content": "    int j, last;",
          "content_same": false
        },
        {
          "line": 9651,
          "old_api": "waitForSwappedKey",
          "new_api": null,
          "old_text": "waitForSwappedKey(c,c->argv[j])",
          "new_text": null,
          "old_line_content": "            waitForSwappedKey(c,c->argv[j]);",
          "new_line_content": "        last = cmd->vm_lastkey;",
          "content_same": false
        },
        {
          "line": 9655,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(c->io_keys)",
          "new_text": null,
          "old_line_content": "    if (listLength(c->io_keys)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 9657,
          "old_api": "aeDeleteFileEvent",
          "new_api": null,
          "old_text": "aeDeleteFileEvent(server.el,c->fd,AE_READABLE)",
          "new_text": null,
          "old_line_content": "        aeDeleteFileEvent(server.el,c->fd,AE_READABLE);",
          "new_line_content": "    /* If the client was blocked for at least one key, mark it as blocked. */",
          "content_same": false
        },
        {
          "line": 9676,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(c->io_keys,&li)",
          "new_text": null,
          "old_line_content": "    listRewind(c->io_keys,&li);",
          "new_line_content": "    struct dictEntry *de;",
          "content_same": false
        },
        {
          "line": 9677,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "    while ((ln = listNext(&li)) != NULL) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9678,
          "old_api": "equalStringObjects",
          "new_api": null,
          "old_text": "equalStringObjects(ln->value,key)",
          "new_text": null,
          "old_line_content": "        if (equalStringObjects(ln->value,key)) {",
          "new_line_content": "    /* Remove the key from the list of keys this client is waiting for. */",
          "content_same": false
        },
        {
          "line": 9683,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(ln != NULL)",
          "new_text": null,
          "old_line_content": "    assert(ln != NULL);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 9687,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(de != NULL)",
          "new_text": null,
          "old_line_content": "    assert(de != NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9688,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "    l = dictGetEntryVal(de);",
          "new_line_content": "    /* Remove the client form the key => waiting clients map. */",
          "content_same": false
        },
        {
          "line": 9704,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(db->io_keys,key)",
          "new_text": null,
          "old_line_content": "    de = dictFind(db->io_keys,key);",
          "new_line_content": "    listNode *ln;",
          "content_same": false
        },
        {
          "line": 9708,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(l)",
          "new_text": null,
          "old_line_content": "    len = listLength(l);",
          "new_line_content": "    if (!de) return;",
          "content_same": false
        },
        {
          "line": 9712,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(l)",
          "new_text": null,
          "old_line_content": "        ln = listFirst(l);",
          "new_line_content": "    /* Note: we can't use something like while(listLength(l)) as the list",
          "content_same": false
        },
        {
          "line": 9726,
          "old_api": "getDecodedObject",
          "new_api": null,
          "old_text": "getDecodedObject(c->argv[3])",
          "new_text": null,
          "old_line_content": "    robj *o = getDecodedObject(c->argv[3]);",
          "new_line_content": "/* =========================== Remote Configuration ========================= */",
          "content_same": false
        },
        {
          "line": 9727,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[2]->ptr,\"dbfilename\")",
          "new_text": null,
          "old_line_content": "    if (!strcasecmp(c->argv[2]->ptr,\"dbfilename\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9728,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(server.dbfilename)",
          "new_text": null,
          "old_line_content": "        zfree(server.dbfilename);",
          "new_line_content": "static void configSetCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 9743,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(o->ptr,\"always\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(o->ptr,\"always\")) {",
          "new_line_content": "            server.appendfsync = APPENDFSYNC_NO;",
          "content_same": false
        },
        {
          "line": 9748,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[2]->ptr,\"save\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(c->argv[2]->ptr,\"save\")) {",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 9750,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(o->ptr)",
          "new_text": null,
          "old_line_content": "        sds *v = sdssplitlen(o->ptr,sdslen(o->ptr),\" \",1,&vlen);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 9756,
          "old_api": "sdsfreesplitres",
          "new_api": null,
          "old_text": "sdsfreesplitres(v,vlen)",
          "new_text": null,
          "old_line_content": "            sdsfreesplitres(v,vlen);",
          "new_line_content": "         * - Even number of args",
          "content_same": false
        },
        {
          "line": 9763,
          "old_api": "strtoll",
          "new_api": null,
          "old_text": "strtoll(v[j], &eptr, 10)",
          "new_text": null,
          "old_line_content": "            val = strtoll(v[j], &eptr, 10);",
          "new_line_content": "            char *eptr;",
          "content_same": false
        },
        {
          "line": 9767,
          "old_api": "sdsfreesplitres",
          "new_api": null,
          "old_text": "sdsfreesplitres(v,vlen)",
          "new_text": null,
          "old_line_content": "                sdsfreesplitres(v,vlen);",
          "new_line_content": "            if (eptr[0] != '\\0' ||",
          "content_same": false
        },
        {
          "line": 9772,
          "old_api": "resetServerSaveParams",
          "new_api": null,
          "old_text": "resetServerSaveParams()",
          "new_text": null,
          "old_line_content": "        resetServerSaveParams();",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 9777,
          "old_api": "strtoll",
          "new_api": null,
          "old_text": "strtoll(v[j],NULL,10)",
          "new_text": null,
          "old_line_content": "            seconds = strtoll(v[j],NULL,10);",
          "new_line_content": "            time_t seconds;",
          "content_same": false
        },
        {
          "line": 9778,
          "old_api": "strtoll",
          "new_api": null,
          "old_text": "strtoll(v[j+1],NULL,10)",
          "new_text": null,
          "old_line_content": "            changes = strtoll(v[j+1],NULL,10);",
          "new_line_content": "            int changes;",
          "content_same": false
        },
        {
          "line": 9779,
          "old_api": "appendServerSaveParams",
          "new_api": null,
          "old_text": "appendServerSaveParams(seconds, changes)",
          "new_text": null,
          "old_line_content": "            appendServerSaveParams(seconds, changes);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9783,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 9790,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.ok);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 9794,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 9798,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(o)",
          "new_text": null,
          "old_line_content": "    decrRefCount(o);",
          "new_line_content": "        \"-ERR invalid argument '%s' for CONFIG SET '%s'\\r\\n\",",
          "content_same": false
        },
        {
          "line": 9802,
          "old_api": "getDecodedObject",
          "new_api": null,
          "old_text": "getDecodedObject(c->argv[2])",
          "new_text": null,
          "old_line_content": "    robj *o = getDecodedObject(c->argv[2]);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 9803,
          "old_api": "createObject",
          "new_api": null,
          "old_text": "createObject(REDIS_STRING,NULL)",
          "new_text": null,
          "old_line_content": "    robj *lenobj = createObject(REDIS_STRING,NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9807,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,lenobj)",
          "new_text": null,
          "old_line_content": "    addReply(c,lenobj);",
          "new_line_content": "    char *pattern = o->ptr;",
          "content_same": false
        },
        {
          "line": 9808,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(lenobj)",
          "new_text": null,
          "old_line_content": "    decrRefCount(lenobj);",
          "new_line_content": "    int matches = 0;",
          "content_same": false
        },
        {
          "line": 9812,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,server.dbfilename)",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c,server.dbfilename);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9816,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,\"requirepass\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c,\"requirepass\");",
          "new_line_content": "        matches++;",
          "content_same": false
        },
        {
          "line": 9817,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,server.requirepass)",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c,server.requirepass);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 9821,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,\"masterauth\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c,\"masterauth\");",
          "new_line_content": "        matches++;",
          "content_same": false
        },
        {
          "line": 9822,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,server.masterauth)",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c,server.masterauth);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 9829,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,\"maxmemory\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c,\"maxmemory\");",
          "new_line_content": "        char buf[128];",
          "content_same": false
        },
        {
          "line": 9830,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,buf)",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c,buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 9842,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,\"appendfsync\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c,\"appendfsync\");",
          "new_line_content": "        case APPENDFSYNC_ALWAYS: policy = \"always\"; break;",
          "content_same": false
        },
        {
          "line": 9843,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,policy)",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c,policy);",
          "new_line_content": "        default: policy = \"unknown\"; break; /* too harmless to panic */",
          "content_same": false
        },
        {
          "line": 9847,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        sds buf = sdsempty();",
          "new_line_content": "        matches++;",
          "content_same": false
        },
        {
          "line": 9851,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(buf,\"%ld %d\",\n                    server.saveparams[j].seconds,\n                    server.saveparams[j].changes)",
          "new_text": null,
          "old_line_content": "            buf = sdscatprintf(buf,\"%ld %d\",",
          "new_line_content": "        int j;",
          "content_same": false
        },
        {
          "line": 9855,
          "old_api": "sdscatlen",
          "new_api": null,
          "old_text": "sdscatlen(buf,\" \",1)",
          "new_text": null,
          "old_line_content": "                buf = sdscatlen(buf,\" \",1);",
          "new_line_content": "                    server.saveparams[j].seconds,",
          "content_same": false
        },
        {
          "line": 9857,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,\"save\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c,\"save\");",
          "new_line_content": "            if (j != server.saveparamslen-1)",
          "content_same": false
        },
        {
          "line": 9859,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(buf)",
          "new_text": null,
          "old_line_content": "        sdsfree(buf);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 9863,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    lenobj->ptr = sdscatprintf(sdsempty(),\"*%d\\r\\n\",matches*2);",
          "new_line_content": "        matches++;",
          "content_same": false
        },
        {
          "line": 9867,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr,\"set\")",
          "new_text": null,
          "old_line_content": "    if (!strcasecmp(c->argv[1]->ptr,\"set\")) {",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 9869,
          "old_api": "configSetCommand",
          "new_api": null,
          "old_text": "configSetCommand(c)",
          "new_text": null,
          "old_line_content": "        configSetCommand(c);",
          "new_line_content": "static void configCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 9878,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "        server.stat_starttime = time(NULL);",
          "new_line_content": "        server.stat_numcommands = 0;",
          "content_same": false
        },
        {
          "line": 9879,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.ok);",
          "new_line_content": "        server.stat_numconnections = 0;",
          "content_same": false
        },
        {
          "line": 9887,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 9897,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(pat->pattern)",
          "new_text": null,
          "old_line_content": "    decrRefCount(pat->pattern);",
          "new_line_content": "static void freePubsubPattern(void *p) {",
          "content_same": false
        },
        {
          "line": 9898,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(pat)",
          "new_text": null,
          "old_line_content": "    zfree(pat);",
          "new_line_content": "    pubsubPattern *pat = p;",
          "content_same": false
        },
        {
          "line": 9905,
          "old_api": "equalStringObjects",
          "new_api": null,
          "old_text": "equalStringObjects(pa->pattern,pb->pattern)",
          "new_text": null,
          "old_line_content": "           (equalStringObjects(pa->pattern,pb->pattern));",
          "new_line_content": "    pubsubPattern *pa = a, *pb = b;",
          "content_same": false
        },
        {
          "line": 9916,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(c->pubsub_channels,channel,NULL)",
          "new_text": null,
          "old_line_content": "    if (dictAdd(c->pubsub_channels,channel,NULL) == DICT_OK) {",
          "new_line_content": "    int retval = 0;",
          "content_same": false
        },
        {
          "line": 9918,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(channel)",
          "new_text": null,
          "old_line_content": "        incrRefCount(channel);",
          "new_line_content": "    /* Add the channel to the client -> channels hash table */",
          "content_same": false
        },
        {
          "line": 9920,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(server.pubsub_channels,channel)",
          "new_text": null,
          "old_line_content": "        de = dictFind(server.pubsub_channels,channel);",
          "new_line_content": "        retval = 1;",
          "content_same": false
        },
        {
          "line": 9922,
          "old_api": "listCreate",
          "new_api": null,
          "old_text": "listCreate()",
          "new_text": null,
          "old_line_content": "            clients = listCreate();",
          "new_line_content": "        /* Add the client to the channel -> list of clients hash table */",
          "content_same": false
        },
        {
          "line": 9924,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(channel)",
          "new_text": null,
          "old_line_content": "            incrRefCount(channel);",
          "new_line_content": "        if (de == NULL) {",
          "content_same": false
        },
        {
          "line": 9928,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(clients,c)",
          "new_text": null,
          "old_line_content": "        listAddNodeTail(clients,c);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 9932,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.subscribebulk)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.subscribebulk);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 9933,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,channel)",
          "new_text": null,
          "old_line_content": "    addReplyBulk(c,channel);",
          "new_line_content": "    /* Notify the client */",
          "content_same": false
        },
        {
          "line": 9947,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(channel)",
          "new_text": null,
          "old_line_content": "    incrRefCount(channel); /* channel may be just a pointer to the same object",
          "new_line_content": "    int retval = 0;",
          "content_same": false
        },
        {
          "line": 9949,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(c->pubsub_channels,channel)",
          "new_text": null,
          "old_line_content": "    if (dictDelete(c->pubsub_channels,channel) == DICT_OK) {",
          "new_line_content": "    /* Remove the channel from the client -> channels hash table */",
          "content_same": false
        },
        {
          "line": 9953,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(de != NULL)",
          "new_text": null,
          "old_line_content": "        assert(de != NULL);",
          "new_line_content": "        retval = 1;",
          "content_same": false
        },
        {
          "line": 9954,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "        clients = dictGetEntryVal(de);",
          "new_line_content": "        /* Remove the client from the channel -> clients list hash table */",
          "content_same": false
        },
        {
          "line": 9962,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(server.pubsub_channels,channel)",
          "new_text": null,
          "old_line_content": "            dictDelete(server.pubsub_channels,channel);",
          "new_line_content": "            /* Free the list and associated hash entry at all if this was",
          "content_same": false
        },
        {
          "line": 9967,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.mbulk3)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.mbulk3);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 9968,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.unsubscribebulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.unsubscribebulk);",
          "new_line_content": "    /* Notify the client */",
          "content_same": false
        },
        {
          "line": 9969,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,channel)",
          "new_text": null,
          "old_line_content": "        addReplyBulk(c,channel);",
          "new_line_content": "    if (notify) {",
          "content_same": false
        },
        {
          "line": 9982,
          "old_api": "listSearchKey",
          "new_api": null,
          "old_text": "listSearchKey(c->pubsub_patterns,pattern)",
          "new_text": null,
          "old_line_content": "    if (listSearchKey(c->pubsub_patterns,pattern) == NULL) {",
          "new_line_content": "static int pubsubSubscribePattern(redisClient *c, robj *pattern) {",
          "content_same": false
        },
        {
          "line": 9986,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(pattern)",
          "new_text": null,
          "old_line_content": "        incrRefCount(pattern);",
          "new_line_content": "        retval = 1;",
          "content_same": false
        },
        {
          "line": 9987,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*pat))",
          "new_text": null,
          "old_line_content": "        pat = zmalloc(sizeof(*pat));",
          "new_line_content": "        pubsubPattern *pat;",
          "content_same": false
        },
        {
          "line": 9994,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.psubscribebulk)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.psubscribebulk);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 9995,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,pattern)",
          "new_text": null,
          "old_line_content": "    addReplyBulk(c,pattern);",
          "new_line_content": "    /* Notify the client */",
          "content_same": false
        },
        {
          "line": 10007,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(pattern)",
          "new_text": null,
          "old_line_content": "    incrRefCount(pattern); /* Protect the object. May be the same we remove */",
          "new_line_content": "    pubsubPattern pat;",
          "content_same": false
        },
        {
          "line": 10008,
          "old_api": "listSearchKey",
          "new_api": null,
          "old_text": "listSearchKey(c->pubsub_patterns,pattern)",
          "new_text": null,
          "old_line_content": "    if ((ln = listSearchKey(c->pubsub_patterns,pattern)) != NULL) {",
          "new_line_content": "    int retval = 0;",
          "content_same": false
        },
        {
          "line": 10014,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(server.pubsub_patterns,ln)",
          "new_text": null,
          "old_line_content": "        listDelNode(server.pubsub_patterns,ln);",
          "new_line_content": "        pat.client = c;",
          "content_same": false
        },
        {
          "line": 10018,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.mbulk3)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.mbulk3);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 10019,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.punsubscribebulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.punsubscribebulk);",
          "new_line_content": "    /* Notify the client */",
          "content_same": false
        },
        {
          "line": 10020,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,pattern)",
          "new_text": null,
          "old_line_content": "        addReplyBulk(c,pattern);",
          "new_line_content": "    if (notify) {",
          "content_same": false
        },
        {
          "line": 10031,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(c->pubsub_channels)",
          "new_text": null,
          "old_line_content": "    dictIterator *di = dictGetIterator(c->pubsub_channels);",
          "new_line_content": "/* Unsubscribe from all the channels. Return the number of channels the",
          "content_same": false
        },
        {
          "line": 10035,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "    while((de = dictNext(di)) != NULL) {",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 10036,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "        robj *channel = dictGetEntryKey(de);",
          "new_line_content": "    int count = 0;",
          "content_same": false
        },
        {
          "line": 10040,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 10051,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(c->pubsub_patterns,&li)",
          "new_text": null,
          "old_line_content": "    listRewind(c->pubsub_patterns,&li);",
          "new_line_content": "    listIter li;",
          "content_same": false
        },
        {
          "line": 10052,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "    while ((ln = listNext(&li)) != NULL) {",
          "new_line_content": "    int count = 0;",
          "content_same": false
        },
        {
          "line": 10068,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(server.pubsub_channels,channel)",
          "new_text": null,
          "old_line_content": "    de = dictFind(server.pubsub_channels,channel);",
          "new_line_content": "    listIter li;",
          "content_same": false
        },
        {
          "line": 10070,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "        list *list = dictGetEntryVal(de);",
          "new_line_content": "    /* Send to clients listening for that channel */",
          "content_same": false
        },
        {
          "line": 10074,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(list,&li)",
          "new_text": null,
          "old_line_content": "        listRewind(list,&li);",
          "new_line_content": "        listNode *ln;",
          "content_same": false
        },
        {
          "line": 10075,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "        while ((ln = listNext(&li)) != NULL) {",
          "new_line_content": "        listIter li;",
          "content_same": false
        },
        {
          "line": 10079,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.messagebulk)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.messagebulk);",
          "new_line_content": "            redisClient *c = ln->value;",
          "content_same": false
        },
        {
          "line": 10080,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,channel)",
          "new_text": null,
          "old_line_content": "            addReplyBulk(c,channel);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 10086,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.pubsub_patterns)",
          "new_text": null,
          "old_line_content": "    if (listLength(server.pubsub_patterns)) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 10087,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(server.pubsub_patterns,&li)",
          "new_text": null,
          "old_line_content": "        listRewind(server.pubsub_patterns,&li);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 10088,
          "old_api": "getDecodedObject",
          "new_api": null,
          "old_text": "getDecodedObject(channel)",
          "new_text": null,
          "old_line_content": "        channel = getDecodedObject(channel);",
          "new_line_content": "    /* Send to clients listening to matching channels */",
          "content_same": false
        },
        {
          "line": 10093,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(pat->pattern->ptr)",
          "new_text": null,
          "old_line_content": "                                sdslen(pat->pattern->ptr),",
          "new_line_content": "            pubsubPattern *pat = ln->value;",
          "content_same": false
        },
        {
          "line": 10097,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(pat->client,shared.pmessagebulk)",
          "new_text": null,
          "old_line_content": "                addReply(pat->client,shared.pmessagebulk);",
          "new_line_content": "                                (char*)channel->ptr,",
          "content_same": false
        },
        {
          "line": 10104,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(channel)",
          "new_text": null,
          "old_line_content": "        decrRefCount(channel);",
          "new_line_content": "                receivers++;",
          "content_same": false
        },
        {
          "line": 10113,
          "old_api": "pubsubSubscribeChannel",
          "new_api": null,
          "old_text": "pubsubSubscribeChannel(c,c->argv[j])",
          "new_text": null,
          "old_line_content": "        pubsubSubscribeChannel(c,c->argv[j]);",
          "new_line_content": "    int j;",
          "content_same": false
        },
        {
          "line": 10118,
          "old_api": "pubsubUnsubscribeAllChannels",
          "new_api": null,
          "old_text": "pubsubUnsubscribeAllChannels(c,1)",
          "new_text": null,
          "old_line_content": "        pubsubUnsubscribeAllChannels(c,1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 10124,
          "old_api": "pubsubUnsubscribeChannel",
          "new_api": null,
          "old_text": "pubsubUnsubscribeChannel(c,c->argv[j],1)",
          "new_text": null,
          "old_line_content": "            pubsubUnsubscribeChannel(c,c->argv[j],1);",
          "new_line_content": "        int j;",
          "content_same": false
        },
        {
          "line": 10132,
          "old_api": "pubsubSubscribePattern",
          "new_api": null,
          "old_text": "pubsubSubscribePattern(c,c->argv[j])",
          "new_text": null,
          "old_line_content": "        pubsubSubscribePattern(c,c->argv[j]);",
          "new_line_content": "    int j;",
          "content_same": false
        },
        {
          "line": 10137,
          "old_api": "pubsubUnsubscribeAllPatterns",
          "new_api": null,
          "old_text": "pubsubUnsubscribeAllPatterns(c,1)",
          "new_text": null,
          "old_line_content": "        pubsubUnsubscribeAllPatterns(c,1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 10143,
          "old_api": "pubsubUnsubscribePattern",
          "new_api": null,
          "old_text": "pubsubUnsubscribePattern(c,c->argv[j],1)",
          "new_text": null,
          "old_line_content": "            pubsubUnsubscribePattern(c,c->argv[j],1);",
          "new_line_content": "        int j;",
          "content_same": false
        },
        {
          "line": 10148,
          "old_api": "pubsubPublishMessage",
          "new_api": null,
          "old_text": "pubsubPublishMessage(c->argv[1],c->argv[2])",
          "new_text": null,
          "old_line_content": "    int receivers = pubsubPublishMessage(c->argv[1],c->argv[2]);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 10149,
          "old_api": "addReplyLong",
          "new_api": null,
          "old_text": "addReplyLong(c,receivers)",
          "new_text": null,
          "old_line_content": "    addReplyLong(c,receivers);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 10155,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr,\"segfault\")",
          "new_text": null,
          "old_line_content": "    if (!strcasecmp(c->argv[1]->ptr,\"segfault\")) {",
          "new_line_content": "/* ================================= Debugging ============================== */",
          "content_same": false
        },
        {
          "line": 10157,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr,\"reload\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"reload\")) {",
          "new_line_content": "static void debugCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 10159,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.err)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.err);",
          "new_line_content": "        *((char*)-1) = 'x';",
          "content_same": false
        },
        {
          "line": 10163,
          "old_api": "rdbLoad",
          "new_api": null,
          "old_text": "rdbLoad(server.dbfilename)",
          "new_text": null,
          "old_line_content": "        if (rdbLoad(server.dbfilename) != REDIS_OK) {",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 10164,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.err)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.err);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 10168,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.ok);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 10169,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr,\"loadaof\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"loadaof\")) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 10176,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.ok);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 10177,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr,\"object\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"object\") && c->argc == 3) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 10182,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nokeyerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.nokeyerr);",
          "new_line_content": "        robj *key, *val;",
          "content_same": false
        },
        {
          "line": 10186,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "        val = dictGetEntryVal(de);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 10195,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(buf,64,\"unknown encoding %d\\n\", val->encoding)",
          "new_text": null,
          "old_line_content": "                snprintf(buf,64,\"unknown encoding %d\\n\", val->encoding);",
          "new_line_content": "            if (val->encoding < (sizeof(strencoding)/sizeof(char*))) {",
          "content_same": false
        },
        {
          "line": 10202,
          "old_api": "rdbSavedObjectLen",
          "new_api": null,
          "old_text": "rdbSavedObjectLen(val,NULL)",
          "new_text": null,
          "old_line_content": "                strenc, (long long) rdbSavedObjectLen(val,NULL)));",
          "new_line_content": "                \"+Key at:%p refcount:%d, value at:%p refcount:%d \"",
          "content_same": false
        },
        {
          "line": 10204,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "            addReplySds(c,sdscatprintf(sdsempty(),",
          "new_line_content": "                (void*)key, key->refcount, (void*)val, val->refcount,",
          "content_same": false
        },
        {
          "line": 10210,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr,\"swapin\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"swapin\") && c->argc == 3) {",
          "new_line_content": "                (void*)key, key->refcount, (unsigned long long) key->vm.page,",
          "content_same": false
        },
        {
          "line": 10211,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[2])",
          "new_text": null,
          "old_line_content": "        lookupKeyRead(c->db,c->argv[2]);",
          "new_line_content": "                (unsigned long long) key->vm.usedpages));",
          "content_same": false
        },
        {
          "line": 10212,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.ok);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 10218,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR Virtual Memory is disabled\\r\\n\")",
          "new_text": null,
          "old_line_content": "            addReplySds(c,sdsnew(\"-ERR Virtual Memory is disabled\\r\\n\"));",
          "new_line_content": "        robj *key, *val;",
          "content_same": false
        },
        {
          "line": 10222,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nokeyerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.nokeyerr);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 10226,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "        val = dictGetEntryVal(de);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 10230,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(key)",
          "new_text": null,
          "old_line_content": "            decrRefCount(key);",
          "new_line_content": "        /* If the key is shared we want to create a copy */",
          "content_same": false
        },
        {
          "line": 10231,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "            key = dictGetEntryKey(de) = newkey;",
          "new_line_content": "        if (key->refcount > 1) {",
          "content_same": false
        },
        {
          "line": 10235,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR This key is not in memory\\r\\n\")",
          "new_text": null,
          "old_line_content": "            addReplySds(c,sdsnew(\"-ERR This key is not in memory\\r\\n\"));",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 10236,
          "old_api": "vmSwapObjectBlocking",
          "new_api": null,
          "old_text": "vmSwapObjectBlocking(key,val)",
          "new_text": null,
          "old_line_content": "        } else if (vmSwapObjectBlocking(key,val) == REDIS_OK) {",
          "new_line_content": "        /* Swap it */",
          "content_same": false
        },
        {
          "line": 10237,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "            dictGetEntryVal(de) = NULL;",
          "new_line_content": "        if (key->storage != REDIS_VM_MEMORY) {",
          "content_same": false
        },
        {
          "line": 10242,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr,\"populate\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"populate\") && c->argc == 3) {",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 10247,
          "old_api": "getLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongFromObjectOrReply(c, c->argv[2], &keys, NULL)",
          "new_text": null,
          "old_line_content": "        if (getLongFromObjectOrReply(c, c->argv[2], &keys, NULL) != REDIS_OK)",
          "new_line_content": "        robj *key, *val;",
          "content_same": false
        },
        {
          "line": 10251,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(buf)",
          "new_text": null,
          "old_line_content": "            key = createStringObject(buf,strlen(buf));",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 10252,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,key)",
          "new_text": null,
          "old_line_content": "            if (lookupKeyRead(c->db,key) != NULL) {",
          "new_line_content": "        for (j = 0; j < keys; j++) {",
          "content_same": false
        },
        {
          "line": 10257,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(buf)",
          "new_text": null,
          "old_line_content": "            val = createStringObject(buf,strlen(buf));",
          "new_line_content": "                continue;",
          "content_same": false
        },
        {
          "line": 10258,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(c->db->dict,key,val)",
          "new_text": null,
          "old_line_content": "            dictAdd(c->db->dict,key,val);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 10262,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\n            \"-ERR Syntax error, try DEBUG [SEGFAULT|OBJECT <key>|SWAPIN <key>|SWAPOUT <key>|RELOAD]\\r\\n\")",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 10268,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"=== ASSERTION FAILED ===\")",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_WARNING,\"=== ASSERTION FAILED ===\");",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 10269,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"==> %s:%d '%s' is not true\\n\",file,line,estr)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_WARNING,\"==> %s:%d '%s' is not true\\n\",file,line,estr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 10277,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"!!! Software Failure. Press left mouse button to continue\")",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_WARNING,\"!!! Software Failure. Press left mouse button to continue\");",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 10278,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Guru Meditation: %s #%s:%d\",msg,file,line)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_WARNING,\"Guru Meditation: %s #%s:%d\",msg,file,line);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 10289,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(\"/proc/sys/vm/overcommit_memory\",\"r\")",
          "new_text": null,
          "old_line_content": "    FILE *fp = fopen(\"/proc/sys/vm/overcommit_memory\",\"r\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 10293,
          "old_api": "fgets",
          "new_api": null,
          "old_text": "fgets(buf,64,fp)",
          "new_text": null,
          "old_line_content": "    if (fgets(buf,64,fp) == NULL) {",
          "new_line_content": "    char buf[64];",
          "content_same": false
        },
        {
          "line": 10294,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "        fclose(fp);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 10299,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(buf)",
          "new_text": null,
          "old_line_content": "    return atoi(buf);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 10303,
          "old_api": "linuxOvercommitMemoryValue",
          "new_api": null,
          "old_text": "linuxOvercommitMemoryValue()",
          "new_text": null,
          "old_line_content": "    if (linuxOvercommitMemoryValue() == 0) {",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 10304,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 10313,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(0)",
          "new_text": null,
          "old_line_content": "    if (fork() != 0) exit(0); /* parent exits */",
          "new_line_content": "    int fd;",
          "content_same": false
        },
        {
          "line": 10314,
          "old_api": "setsid",
          "new_api": null,
          "old_text": "setsid()",
          "new_text": null,
          "old_line_content": "    setsid(); /* create a new session */",
          "new_line_content": "    FILE *fp;",
          "content_same": false
        },
        {
          "line": 10319,
          "old_api": "open",
          "new_api": null,
          "old_text": "open(\"/dev/null\", O_RDWR, 0)",
          "new_text": null,
          "old_line_content": "    if ((fd = open(\"/dev/null\", O_RDWR, 0)) != -1) {",
          "new_line_content": "    /* Every output goes to /dev/null. If Redis is daemonized but",
          "content_same": false
        },
        {
          "line": 10320,
          "old_api": "dup2",
          "new_api": null,
          "old_text": "dup2(fd, STDIN_FILENO)",
          "new_text": null,
          "old_line_content": "        dup2(fd, STDIN_FILENO);",
          "new_line_content": "     * the 'logfile' is set to 'stdout' in the configuration file",
          "content_same": false
        },
        {
          "line": 10321,
          "old_api": "dup2",
          "new_api": null,
          "old_text": "dup2(fd, STDOUT_FILENO)",
          "new_text": null,
          "old_line_content": "        dup2(fd, STDOUT_FILENO);",
          "new_line_content": "     * it will not log at all. */",
          "content_same": false
        },
        {
          "line": 10328,
          "old_api": "getpid",
          "new_api": null,
          "old_text": "getpid()",
          "new_text": null,
          "old_line_content": "        fprintf(fp,\"%d\\n\",getpid());",
          "new_line_content": "    /* Try to write the pid file */",
          "content_same": false
        },
        {
          "line": 10334,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"Redis server version %s\\n\", REDIS_VERSION)",
          "new_text": null,
          "old_line_content": "    printf(\"Redis server version %s\\n\", REDIS_VERSION);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 10335,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(0)",
          "new_text": null,
          "old_line_content": "    exit(0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 10339,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\"Usage: ./redis-server [/path/to/redis.conf]\\n\")",
          "new_text": null,
          "old_line_content": "    fprintf(stderr,\"Usage: ./redis-server [/path/to/redis.conf]\\n\");",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 10340,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\"       ./redis-server - (read config from stdin)\\n\")",
          "new_text": null,
          "old_line_content": "    fprintf(stderr,\"       ./redis-server - (read config from stdin)\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 10341,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "    exit(1);",
          "new_line_content": "static void usage() {",
          "content_same": false
        },
        {
          "line": 10347,
          "old_api": "initServerConfig",
          "new_api": null,
          "old_text": "initServerConfig()",
          "new_text": null,
          "old_line_content": "    initServerConfig();",
          "new_line_content": "int main(int argc, char **argv) {",
          "content_same": false
        },
        {
          "line": 10349,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(argv[1], \"-v\")",
          "new_text": null,
          "old_line_content": "        if (strcmp(argv[1], \"-v\") == 0 ||",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 10351,
          "old_api": "usage",
          "new_api": null,
          "old_text": "usage()",
          "new_text": null,
          "old_line_content": "        if (strcmp(argv[1], \"--help\") == 0) usage();",
          "new_line_content": "    if (argc == 2) {",
          "content_same": false
        },
        {
          "line": 10357,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Warning: no config file specified, using the default config. In order to specify a config file use 'redis-server /path/to/redis.conf'\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Warning: no config file specified, using the default config. In order to specify a config file use 'redis-server /path/to/redis.conf'\");",
          "new_line_content": "    } else if ((argc > 2)) {",
          "content_same": false
        },
        {
          "line": 10359,
          "old_api": "daemonize",
          "new_api": null,
          "old_text": "daemonize()",
          "new_text": null,
          "old_line_content": "    if (server.daemonize) daemonize();",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 10361,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Server started, Redis version \" REDIS_VERSION)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_NOTICE,\"Server started, Redis version \" REDIS_VERSION);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 10365,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    start = time(NULL);",
          "new_line_content": "#ifdef __linux__",
          "content_same": false
        },
        {
          "line": 10367,
          "old_api": "loadAppendOnlyFile",
          "new_api": null,
          "old_text": "loadAppendOnlyFile(server.appendfilename)",
          "new_text": null,
          "old_line_content": "        if (loadAppendOnlyFile(server.appendfilename) == REDIS_OK)",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 10375,
          "old_api": "aeMain",
          "new_api": null,
          "old_text": "aeMain(server.el)",
          "new_text": null,
          "old_line_content": "    aeMain(server.el);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 10418,
          "old_api": "REDIS_NOTUSED",
          "new_api": null,
          "old_text": "REDIS_NOTUSED(info)",
          "new_text": null,
          "old_line_content": "    REDIS_NOTUSED(info);",
          "new_line_content": "    unsigned long offset=0;",
          "content_same": false
        },
        {
          "line": 10420,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\n        \"======= Ooops! Redis %s got signal: -%d- =======\", REDIS_VERSION, sig)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_WARNING,",
          "new_line_content": "    sds infostring;",
          "content_same": false
        },
        {
          "line": 10422,
          "old_api": "genRedisInfoString",
          "new_api": null,
          "old_text": "genRedisInfoString()",
          "new_text": null,
          "old_line_content": "    infostring = genRedisInfoString();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 10427,
          "old_api": "backtrace",
          "new_api": null,
          "old_text": "backtrace(trace, 100)",
          "new_text": null,
          "old_line_content": "    trace_size = backtrace(trace, 100);",
          "new_line_content": "    /* It's not safe to sdsfree() the returned string under memory",
          "content_same": false
        },
        {
          "line": 10429,
          "old_api": "getMcontextEip",
          "new_api": null,
          "old_text": "getMcontextEip(uc)",
          "new_text": null,
          "old_line_content": "    if (getMcontextEip(uc) != NULL) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 10437,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(messages[i],'+')",
          "new_text": null,
          "old_line_content": "        p = strchr(messages[i],'+');",
          "new_line_content": "    for (i=1; i<trace_size; ++i) {",
          "content_same": false
        },
        {
          "line": 10439,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"%s\", messages[i])",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,\"%s\", messages[i]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 10445,
          "old_api": "_exit",
          "new_api": null,
          "old_text": "_exit(0)",
          "new_text": null,
          "old_line_content": "    _exit(0);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 10451,
          "old_api": "sigemptyset (&act.sa_mask)",
          "new_api": null,
          "old_text": "sigemptyset (&act.sa_mask)",
          "new_text": null,
          "old_line_content": "    sigemptyset (&act.sa_mask);",
          "new_line_content": "static void setupSigSegvAction(void) {",
          "content_same": false
        },
        {
          "line": 10456,
          "old_api": "sigaction (SIGSEGV, &act, NULL)",
          "new_api": null,
          "old_text": "sigaction (SIGSEGV, &act, NULL)",
          "new_text": null,
          "old_line_content": "    sigaction (SIGSEGV, &act, NULL);",
          "new_line_content": "     * is used. Otherwise, sa_handler is used */",
          "content_same": false
        },
        {
          "line": 10457,
          "old_api": "sigaction (SIGBUS, &act, NULL)",
          "new_api": null,
          "old_text": "sigaction (SIGBUS, &act, NULL)",
          "new_text": null,
          "old_line_content": "    sigaction (SIGBUS, &act, NULL);",
          "new_line_content": "    act.sa_flags = SA_NODEFER | SA_ONSTACK | SA_RESETHAND | SA_SIGINFO;",
          "content_same": false
        },
        {
          "line": 10458,
          "old_api": "sigaction (SIGFPE, &act, NULL)",
          "new_api": null,
          "old_text": "sigaction (SIGFPE, &act, NULL)",
          "new_text": null,
          "old_line_content": "    sigaction (SIGFPE, &act, NULL);",
          "new_line_content": "    act.sa_sigaction = segvHandler;",
          "content_same": false
        },
        {
          "line": 3516,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf((char*)buf+1,sizeof(buf)-1,\"%.17g\",val)",
          "new_text": null,
          "old_line_content": "        snprintf((char*)buf+1,sizeof(buf)-1,\"%.17g\",val);",
          "new_line_content": "        if (val == ((long long)val))",
          "content_same": false
        },
        {
          "line": 3528,
          "old_api": "rdbSaveStringObject",
          "new_api": null,
          "old_text": "rdbSaveStringObject(fp,o)",
          "new_text": null,
          "old_line_content": "        if (rdbSaveStringObject(fp,o) == -1) return -1;",
          "new_line_content": "static int rdbSaveObject(FILE *fp, robj *o) {",
          "content_same": false
        },
        {
          "line": 3535,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(list)",
          "new_text": null,
          "old_line_content": "        if (rdbSaveLen(fp,listLength(list)) == -1) return -1;",
          "new_line_content": "        listIter li;",
          "content_same": false
        },
        {
          "line": 3536,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(list,&li)",
          "new_text": null,
          "old_line_content": "        listRewind(list,&li);",
          "new_line_content": "        listNode *ln;",
          "content_same": false
        },
        {
          "line": 3537,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "        while((ln = listNext(&li))) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3545,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(set)",
          "new_text": null,
          "old_line_content": "        dictIterator *di = dictGetIterator(set);",
          "new_line_content": "    } else if (o->type == REDIS_SET) {",
          "content_same": false
        },
        {
          "line": 3549,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "        while((de = dictNext(di)) != NULL) {",
          "new_line_content": "        dictEntry *de;",
          "content_same": false
        },
        {
          "line": 3550,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "            robj *eleobj = dictGetEntryKey(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3554,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "        dictReleaseIterator(di);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3558,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(zs->dict)",
          "new_text": null,
          "old_line_content": "        dictIterator *di = dictGetIterator(zs->dict);",
          "new_line_content": "    } else if (o->type == REDIS_ZSET) {",
          "content_same": false
        },
        {
          "line": 3562,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "        while((de = dictNext(di)) != NULL) {",
          "new_line_content": "        dictEntry *de;",
          "content_same": false
        },
        {
          "line": 3563,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "            robj *eleobj = dictGetEntryKey(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3573,
          "old_api": "zipmapRewind",
          "new_api": null,
          "old_text": "zipmapRewind(o->ptr)",
          "new_text": null,
          "old_line_content": "            unsigned char *p = zipmapRewind(o->ptr);",
          "new_line_content": "    } else if (o->type == REDIS_HASH) {",
          "content_same": false
        },
        {
          "line": 3574,
          "old_api": "zipmapLen",
          "new_api": null,
          "old_text": "zipmapLen(o->ptr)",
          "new_text": null,
          "old_line_content": "            unsigned int count = zipmapLen(o->ptr);",
          "new_line_content": "        /* Save a hash value */",
          "content_same": false
        },
        {
          "line": 3578,
          "old_api": "rdbSaveLen",
          "new_api": null,
          "old_text": "rdbSaveLen(fp,count)",
          "new_text": null,
          "old_line_content": "            if (rdbSaveLen(fp,count) == -1) return -1;",
          "new_line_content": "            unsigned char *key, *val;",
          "content_same": false
        },
        {
          "line": 3579,
          "old_api": "zipmapNext",
          "new_api": null,
          "old_text": "zipmapNext(p,&key,&klen,&val,&vlen)",
          "new_text": null,
          "old_line_content": "            while((p = zipmapNext(p,&key,&klen,&val,&vlen)) != NULL) {",
          "new_line_content": "            unsigned int klen, vlen;",
          "content_same": false
        },
        {
          "line": 3580,
          "old_api": "rdbSaveRawString",
          "new_api": null,
          "old_text": "rdbSaveRawString(fp,key,klen)",
          "new_text": null,
          "old_line_content": "                if (rdbSaveRawString(fp,key,klen) == -1) return -1;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3588,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "            while((de = dictNext(di)) != NULL) {",
          "new_line_content": "            dictEntry *de;",
          "content_same": false
        },
        {
          "line": 3589,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "                robj *key = dictGetEntryKey(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3609,
          "old_api": "rewind",
          "new_api": null,
          "old_text": "rewind(fp)",
          "new_text": null,
          "old_line_content": "    rewind(fp);",
          "new_line_content": " * we could switch to a faster solution. */",
          "content_same": false
        },
        {
          "line": 3610,
          "old_api": "rdbSaveObject",
          "new_api": null,
          "old_text": "rdbSaveObject(fp,o)",
          "new_text": null,
          "old_line_content": "    assert(rdbSaveObject(fp,o) != 1);",
          "new_line_content": "static off_t rdbSavedObjectLen(robj *o, FILE *fp) {",
          "content_same": false
        },
        {
          "line": 3611,
          "old_api": "ftello",
          "new_api": null,
          "old_text": "ftello(fp)",
          "new_text": null,
          "old_line_content": "    return ftello(fp);",
          "new_line_content": "    if (fp == NULL) fp = server.devnull;",
          "content_same": false
        },
        {
          "line": 3616,
          "old_api": "rdbSavedObjectLen",
          "new_api": null,
          "old_text": "rdbSavedObjectLen(o,fp)",
          "new_text": null,
          "old_line_content": "    off_t bytes = rdbSavedObjectLen(o,fp);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3628,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    time_t now = time(NULL);",
          "new_line_content": "    FILE *fp;",
          "content_same": false
        },
        {
          "line": 3634,
          "old_api": "waitEmptyIOJobsQueue",
          "new_api": null,
          "old_text": "waitEmptyIOJobsQueue()",
          "new_text": null,
          "old_line_content": "        waitEmptyIOJobsQueue();",
          "new_line_content": "     * foreground-saving, to avoid seeking the swap file descriptor at the",
          "content_same": false
        },
        {
          "line": 3636,
          "old_api": "getpid",
          "new_api": null,
          "old_text": "getpid()",
          "new_text": null,
          "old_line_content": "    snprintf(tmpfile,256,\"temp-%d.rdb\", (int) getpid());",
          "new_line_content": "    if (server.vm_enabled)",
          "content_same": false
        },
        {
          "line": 3646,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(d)",
          "new_text": null,
          "old_line_content": "        if (dictSize(d) == 0) continue;",
          "new_line_content": "    for (j = 0; j < server.dbnum; j++) {",
          "content_same": false
        },
        {
          "line": 3647,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(d)",
          "new_text": null,
          "old_line_content": "        di = dictGetIterator(d);",
          "new_line_content": "        redisDb *db = server.db+j;",
          "content_same": false
        },
        {
          "line": 3654,
          "old_api": "rdbSaveType",
          "new_api": null,
          "old_text": "rdbSaveType(fp,REDIS_SELECTDB)",
          "new_text": null,
          "old_line_content": "        if (rdbSaveType(fp,REDIS_SELECTDB) == -1) goto werr;",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3655,
          "old_api": "rdbSaveLen",
          "new_api": null,
          "old_text": "rdbSaveLen(fp,j)",
          "new_text": null,
          "old_line_content": "        if (rdbSaveLen(fp,j) == -1) goto werr;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3659,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "            robj *key = dictGetEntryKey(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3660,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "            robj *o = dictGetEntryVal(de);",
          "new_line_content": "        /* Iterate this DB writing every entry */",
          "content_same": false
        },
        {
          "line": 3667,
          "old_api": "rdbSaveType",
          "new_api": null,
          "old_text": "rdbSaveType(fp,REDIS_EXPIRETIME)",
          "new_text": null,
          "old_line_content": "                if (rdbSaveType(fp,REDIS_EXPIRETIME) == -1) goto werr;",
          "new_line_content": "            if (expiretime != -1) {",
          "content_same": false
        },
        {
          "line": 3668,
          "old_api": "rdbSaveTime",
          "new_api": null,
          "old_text": "rdbSaveTime(fp,expiretime)",
          "new_text": null,
          "old_line_content": "                if (rdbSaveTime(fp,expiretime) == -1) goto werr;",
          "new_line_content": "                /* If this key is already expired skip it */",
          "content_same": false
        },
        {
          "line": 3675,
          "old_api": "rdbSaveType",
          "new_api": null,
          "old_text": "rdbSaveType(fp,o->type)",
          "new_text": null,
          "old_line_content": "                if (rdbSaveType(fp,o->type) == -1) goto werr;",
          "new_line_content": "            if (!server.vm_enabled || key->storage == REDIS_VM_MEMORY ||",
          "content_same": false
        },
        {
          "line": 3676,
          "old_api": "rdbSaveStringObject",
          "new_api": null,
          "old_text": "rdbSaveStringObject(fp,key)",
          "new_text": null,
          "old_line_content": "                if (rdbSaveStringObject(fp,key) == -1) goto werr;",
          "new_line_content": "                                      key->storage == REDIS_VM_SWAPPING) {",
          "content_same": false
        },
        {
          "line": 3677,
          "old_api": "rdbSaveObject",
          "new_api": null,
          "old_text": "rdbSaveObject(fp,o)",
          "new_text": null,
          "old_line_content": "                if (rdbSaveObject(fp,o) == -1) goto werr;",
          "new_line_content": "                /* Save type, key, value */",
          "content_same": false
        },
        {
          "line": 3682,
          "old_api": "vmPreviewObject",
          "new_api": null,
          "old_text": "vmPreviewObject(key)",
          "new_text": null,
          "old_line_content": "                po = vmPreviewObject(key);",
          "new_line_content": "                /* REDIS_VM_SWAPPED or REDIS_VM_LOADING */",
          "content_same": false
        },
        {
          "line": 3684,
          "old_api": "rdbSaveType",
          "new_api": null,
          "old_text": "rdbSaveType(fp,key->vtype)",
          "new_text": null,
          "old_line_content": "                if (rdbSaveType(fp,key->vtype) == -1) goto werr;",
          "new_line_content": "                /* Get a preview of the object in memory */",
          "content_same": false
        },
        {
          "line": 3686,
          "old_api": "rdbSaveObject",
          "new_api": null,
          "old_text": "rdbSaveObject(fp,po)",
          "new_text": null,
          "old_line_content": "                if (rdbSaveObject(fp,po) == -1) goto werr;",
          "new_line_content": "                /* Save type, key, value */",
          "content_same": false
        },
        {
          "line": 3698,
          "old_api": "fileno",
          "new_api": null,
          "old_text": "fileno(fp)",
          "new_text": null,
          "old_line_content": "    fsync(fileno(fp));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3699,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "    fclose(fp);",
          "new_line_content": "    /* Make sure data will not remain on the OS's output buffers */",
          "content_same": false
        },
        {
          "line": 3703,
          "old_api": "rename",
          "new_api": null,
          "old_text": "rename(tmpfile,filename)",
          "new_text": null,
          "old_line_content": "    if (rename(tmpfile,filename) == -1) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3704,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Error moving temp DB file on the final destination: %s\", strerror(errno));",
          "new_line_content": "    /* Use RENAME to make sure the DB file is changed atomically only",
          "content_same": false
        },
        {
          "line": 3705,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(tmpfile)",
          "new_text": null,
          "old_line_content": "        unlink(tmpfile);",
          "new_line_content": "     * if the generate DB file is ok. */",
          "content_same": false
        },
        {
          "line": 3710,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    server.lastsave = time(NULL);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3714,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "    fclose(fp);",
          "new_line_content": "    return REDIS_OK;",
          "content_same": false
        },
        {
          "line": 3715,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(tmpfile)",
          "new_text": null,
          "old_line_content": "    unlink(tmpfile);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3716,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_WARNING,\"Write error saving DB on disk: %s\", strerror(errno));",
          "new_line_content": "werr:",
          "content_same": false
        },
        {
          "line": 3725,
          "old_api": "waitEmptyIOJobsQueue",
          "new_api": null,
          "old_text": "waitEmptyIOJobsQueue()",
          "new_text": null,
          "old_line_content": "    if (server.vm_enabled) waitEmptyIOJobsQueue();",
          "new_line_content": "    pid_t childpid;",
          "content_same": false
        },
        {
          "line": 3726,
          "old_api": "fork",
          "new_api": null,
          "old_text": "fork()",
          "new_text": null,
          "old_line_content": "    if ((childpid = fork()) == 0) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3730,
          "old_api": "rdbSave",
          "new_api": null,
          "old_text": "rdbSave(filename)",
          "new_text": null,
          "old_line_content": "        if (rdbSave(filename) == REDIS_OK) {",
          "new_line_content": "        /* Child */",
          "content_same": false
        },
        {
          "line": 3738,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Can't save in background: fork: %s\",\n                strerror(errno))",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,\"Can't save in background: fork: %s\",",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 3739,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "                strerror(errno));",
          "new_line_content": "        /* Parent */",
          "content_same": false
        },
        {
          "line": 3744,
          "old_api": "updateDictResizePolicy",
          "new_api": null,
          "old_text": "updateDictResizePolicy()",
          "new_text": null,
          "old_line_content": "        updateDictResizePolicy();",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3753,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(tmpfile,256,\"temp-%d.rdb\", (int) childpid)",
          "new_text": null,
          "old_line_content": "    snprintf(tmpfile,256,\"temp-%d.rdb\", (int) childpid);",
          "new_line_content": "static void rdbRemoveTempFile(pid_t childpid) {",
          "content_same": false
        },
        {
          "line": 3754,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(tmpfile)",
          "new_text": null,
          "old_line_content": "    unlink(tmpfile);",
          "new_line_content": "    char tmpfile[256];",
          "content_same": false
        },
        {
          "line": 3759,
          "old_api": "fread",
          "new_api": null,
          "old_text": "fread(&type,1,1,fp)",
          "new_text": null,
          "old_line_content": "    if (fread(&type,1,1,fp) == 0) return -1;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3765,
          "old_api": "fread",
          "new_api": null,
          "old_text": "fread(&t32,4,1,fp)",
          "new_text": null,
          "old_line_content": "    if (fread(&t32,4,1,fp) == 0) return -1;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3780,
          "old_api": "fread",
          "new_api": null,
          "old_text": "fread(buf,1,1,fp)",
          "new_text": null,
          "old_line_content": "    if (fread(buf,1,1,fp) == 0) return REDIS_RDB_LENERR;",
          "new_line_content": "    int type;",
          "content_same": false
        },
        {
          "line": 3791,
          "old_api": "fread",
          "new_api": null,
          "old_text": "fread(buf+1,1,1,fp)",
          "new_text": null,
          "old_line_content": "        if (fread(buf+1,1,1,fp) == 0) return REDIS_RDB_LENERR;",
          "new_line_content": "        return buf[0]&0x3F;",
          "content_same": false
        },
        {
          "line": 3795,
          "old_api": "fread",
          "new_api": null,
          "old_text": "fread(&len,4,1,fp)",
          "new_text": null,
          "old_line_content": "        if (fread(&len,4,1,fp) == 0) return REDIS_RDB_LENERR;",
          "new_line_content": "        return ((buf[0]&0x3F)<<8)|buf[1];",
          "content_same": false
        },
        {
          "line": 3796,
          "old_api": "ntohl",
          "new_api": null,
          "old_text": "ntohl(len)",
          "new_text": null,
          "old_line_content": "        return ntohl(len);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 3809,
          "old_api": "fread",
          "new_api": null,
          "old_text": "fread(enc,1,1,fp)",
          "new_text": null,
          "old_line_content": "        if (fread(enc,1,1,fp) == 0) return NULL;",
          "new_line_content": "    long long val;",
          "content_same": false
        },
        {
          "line": 3813,
          "old_api": "fread",
          "new_api": null,
          "old_text": "fread(enc,2,1,fp)",
          "new_text": null,
          "old_line_content": "        if (fread(enc,2,1,fp) == 0) return NULL;",
          "new_line_content": "        val = (signed char)enc[0];",
          "content_same": false
        },
        {
          "line": 3818,
          "old_api": "fread",
          "new_api": null,
          "old_text": "fread(enc,4,1,fp)",
          "new_text": null,
          "old_line_content": "        if (fread(enc,4,1,fp) == 0) return NULL;",
          "new_line_content": "        val = (int16_t)v;",
          "content_same": false
        },
        {
          "line": 3823,
          "old_api": "redisPanic",
          "new_api": null,
          "old_text": "redisPanic(\"Unknown RDB integer encoding type\")",
          "new_text": null,
          "old_line_content": "        redisPanic(\"Unknown RDB integer encoding type\");",
          "new_line_content": "        val = (int32_t)v;",
          "content_same": false
        },
        {
          "line": 3828,
          "old_api": "sdsfromlonglong",
          "new_api": null,
          "old_text": "sdsfromlonglong(val)",
          "new_text": null,
          "old_line_content": "        return createObject(REDIS_STRING,sdsfromlonglong(val));",
          "new_line_content": "    if (encode)",
          "content_same": false
        },
        {
          "line": 3836,
          "old_api": "rdbLoadLen",
          "new_api": null,
          "old_text": "rdbLoadLen(fp,NULL)",
          "new_text": null,
          "old_line_content": "    if ((clen = rdbLoadLen(fp,NULL)) == REDIS_RDB_LENERR) return NULL;",
          "new_line_content": "    unsigned char *c = NULL;",
          "content_same": false
        },
        {
          "line": 3837,
          "old_api": "rdbLoadLen",
          "new_api": null,
          "old_text": "rdbLoadLen(fp,NULL)",
          "new_text": null,
          "old_line_content": "    if ((len = rdbLoadLen(fp,NULL)) == REDIS_RDB_LENERR) return NULL;",
          "new_line_content": "    sds val = NULL;",
          "content_same": false
        },
        {
          "line": 3838,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(clen)",
          "new_text": null,
          "old_line_content": "    if ((c = zmalloc(clen)) == NULL) goto err;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3855,
          "old_api": "rdbLoadLen",
          "new_api": null,
          "old_text": "rdbLoadLen(fp,&isencoded)",
          "new_text": null,
          "old_line_content": "    len = rdbLoadLen(fp,&isencoded);",
          "new_line_content": "    uint32_t len;",
          "content_same": false
        },
        {
          "line": 3861,
          "old_api": "rdbLoadIntegerObject",
          "new_api": null,
          "old_text": "rdbLoadIntegerObject(fp,len,encode)",
          "new_text": null,
          "old_line_content": "            return rdbLoadIntegerObject(fp,len,encode);",
          "new_line_content": "        case REDIS_RDB_ENC_INT8:",
          "content_same": false
        },
        {
          "line": 3863,
          "old_api": "rdbLoadLzfStringObject",
          "new_api": null,
          "old_text": "rdbLoadLzfStringObject(fp)",
          "new_text": null,
          "old_line_content": "            return rdbLoadLzfStringObject(fp);",
          "new_line_content": "        case REDIS_RDB_ENC_INT32:",
          "content_same": false
        },
        {
          "line": 3865,
          "old_api": "redisPanic",
          "new_api": null,
          "old_text": "redisPanic(\"Unknown RDB encoding type\")",
          "new_text": null,
          "old_line_content": "            redisPanic(\"Unknown RDB encoding type\");",
          "new_line_content": "        case REDIS_RDB_ENC_LZF:",
          "content_same": false
        },
        {
          "line": 3870,
          "old_api": "sdsnewlen",
          "new_api": null,
          "old_text": "sdsnewlen(NULL,len)",
          "new_text": null,
          "old_line_content": "    val = sdsnewlen(NULL,len);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3871,
          "old_api": "fread",
          "new_api": null,
          "old_text": "fread(val,len,1,fp)",
          "new_text": null,
          "old_line_content": "    if (len && fread(val,len,1,fp) == 0) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3872,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(val)",
          "new_text": null,
          "old_line_content": "        sdsfree(val);",
          "new_line_content": "    if (len == REDIS_RDB_LENERR) return NULL;",
          "content_same": false
        },
        {
          "line": 3879,
          "old_api": "rdbGenericLoadStringObject",
          "new_api": null,
          "old_text": "rdbGenericLoadStringObject(fp,0)",
          "new_text": null,
          "old_line_content": "    return rdbGenericLoadStringObject(fp,0);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3883,
          "old_api": "rdbGenericLoadStringObject",
          "new_api": null,
          "old_text": "rdbGenericLoadStringObject(fp,1)",
          "new_text": null,
          "old_line_content": "    return rdbGenericLoadStringObject(fp,1);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3891,
          "old_api": "fread",
          "new_api": null,
          "old_text": "fread(&len,1,1,fp)",
          "new_text": null,
          "old_line_content": "    if (fread(&len,1,1,fp) == 0) return -1;",
          "new_line_content": "    char buf[128];",
          "content_same": false
        },
        {
          "line": 3897,
          "old_api": "fread",
          "new_api": null,
          "old_text": "fread(buf,len,1,fp)",
          "new_text": null,
          "old_line_content": "        if (fread(buf,len,1,fp) == 0) return -1;",
          "new_line_content": "    case 254: *val = R_PosInf; return 0;",
          "content_same": false
        },
        {
          "line": 3899,
          "old_api": "sscanf",
          "new_api": null,
          "old_text": "sscanf(buf, \"%lg\", val)",
          "new_text": null,
          "old_line_content": "        sscanf(buf, \"%lg\", val);",
          "new_line_content": "    default:",
          "content_same": false
        },
        {
          "line": 3909,
          "old_api": "ftell",
          "new_api": null,
          "old_text": "ftell(fp)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_DEBUG,\"LOADING OBJECT %d (at %d)\\n\",type,ftell(fp));",
          "new_line_content": "static robj *rdbLoadObject(int type, FILE *fp) {",
          "content_same": false
        },
        {
          "line": 3913,
          "old_api": "tryObjectEncoding",
          "new_api": null,
          "old_text": "tryObjectEncoding(o)",
          "new_text": null,
          "old_line_content": "        o = tryObjectEncoding(o);",
          "new_line_content": "    if (type == REDIS_STRING) {",
          "content_same": false
        },
        {
          "line": 3918,
          "old_api": "rdbLoadLen",
          "new_api": null,
          "old_text": "rdbLoadLen(fp,NULL)",
          "new_text": null,
          "old_line_content": "        if ((listlen = rdbLoadLen(fp,NULL)) == REDIS_RDB_LENERR) return NULL;",
          "new_line_content": "        /* Read list/set value */",
          "content_same": false
        },
        {
          "line": 3919,
          "old_api": "createSetObject",
          "new_api": null,
          "old_text": "createSetObject()",
          "new_text": null,
          "old_line_content": "        o = (type == REDIS_LIST) ? createListObject() : createSetObject();",
          "new_line_content": "        uint32_t listlen;",
          "content_same": false
        },
        {
          "line": 3923,
          "old_api": "dictExpand",
          "new_api": null,
          "old_text": "dictExpand(o->ptr,listlen)",
          "new_text": null,
          "old_line_content": "            dictExpand(o->ptr,listlen);",
          "new_line_content": "        /* It's faster to expand the dict to the right size asap in order",
          "content_same": false
        },
        {
          "line": 3928,
          "old_api": "rdbLoadEncodedStringObject",
          "new_api": null,
          "old_text": "rdbLoadEncodedStringObject(fp)",
          "new_text": null,
          "old_line_content": "            if ((ele = rdbLoadEncodedStringObject(fp)) == NULL) return NULL;",
          "new_line_content": "        while(listlen--) {",
          "content_same": false
        },
        {
          "line": 3929,
          "old_api": "tryObjectEncoding",
          "new_api": null,
          "old_text": "tryObjectEncoding(ele)",
          "new_text": null,
          "old_line_content": "            ele = tryObjectEncoding(ele);",
          "new_line_content": "            robj *ele;",
          "content_same": false
        },
        {
          "line": 3933,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd((dict*)o->ptr,ele,NULL)",
          "new_text": null,
          "old_line_content": "                dictAdd((dict*)o->ptr,ele,NULL);",
          "new_line_content": "            if (type == REDIS_LIST) {",
          "content_same": false
        },
        {
          "line": 3941,
          "old_api": "rdbLoadLen",
          "new_api": null,
          "old_text": "rdbLoadLen(fp,NULL)",
          "new_text": null,
          "old_line_content": "        if ((zsetlen = rdbLoadLen(fp,NULL)) == REDIS_RDB_LENERR) return NULL;",
          "new_line_content": "        size_t zsetlen;",
          "content_same": false
        },
        {
          "line": 3942,
          "old_api": "createZsetObject",
          "new_api": null,
          "old_text": "createZsetObject()",
          "new_text": null,
          "old_line_content": "        o = createZsetObject();",
          "new_line_content": "        zset *zs;",
          "content_same": false
        },
        {
          "line": 3947,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(double))",
          "new_text": null,
          "old_line_content": "            double *score = zmalloc(sizeof(double));",
          "new_line_content": "        /* Load every single element of the list/set */",
          "content_same": false
        },
        {
          "line": 3949,
          "old_api": "rdbLoadEncodedStringObject",
          "new_api": null,
          "old_text": "rdbLoadEncodedStringObject(fp)",
          "new_text": null,
          "old_line_content": "            if ((ele = rdbLoadEncodedStringObject(fp)) == NULL) return NULL;",
          "new_line_content": "            robj *ele;",
          "content_same": false
        },
        {
          "line": 3951,
          "old_api": "rdbLoadDoubleValue",
          "new_api": null,
          "old_text": "rdbLoadDoubleValue(fp,score)",
          "new_text": null,
          "old_line_content": "            if (rdbLoadDoubleValue(fp,score) == -1) return NULL;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3959,
          "old_api": "rdbLoadLen",
          "new_api": null,
          "old_text": "rdbLoadLen(fp,NULL)",
          "new_text": null,
          "old_line_content": "        if ((hashlen = rdbLoadLen(fp,NULL)) == REDIS_RDB_LENERR) return NULL;",
          "new_line_content": "    } else if (type == REDIS_HASH) {",
          "content_same": false
        },
        {
          "line": 3960,
          "old_api": "createHashObject",
          "new_api": null,
          "old_text": "createHashObject()",
          "new_text": null,
          "old_line_content": "        o = createHashObject();",
          "new_line_content": "        size_t hashlen;",
          "content_same": false
        },
        {
          "line": 3969,
          "old_api": "rdbLoadStringObject",
          "new_api": null,
          "old_text": "rdbLoadStringObject(fp)",
          "new_text": null,
          "old_line_content": "            if ((key = rdbLoadStringObject(fp)) == NULL) return NULL;",
          "new_line_content": "        while(hashlen--) {",
          "content_same": false
        },
        {
          "line": 3970,
          "old_api": "rdbLoadStringObject",
          "new_api": null,
          "old_text": "rdbLoadStringObject(fp)",
          "new_text": null,
          "old_line_content": "            if ((val = rdbLoadStringObject(fp)) == NULL) return NULL;",
          "new_line_content": "            robj *key, *val;",
          "content_same": false
        },
        {
          "line": 3974,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(key->ptr)",
          "new_text": null,
          "old_line_content": "               (sdslen(key->ptr) > server.hash_max_zipmap_value ||",
          "new_line_content": "            /* If we are using a zipmap and there are too big values",
          "content_same": false
        },
        {
          "line": 3975,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(val->ptr)",
          "new_text": null,
          "old_line_content": "                sdslen(val->ptr) > server.hash_max_zipmap_value))",
          "new_line_content": "             * the object is converted to real hash table encoding. */",
          "content_same": false
        },
        {
          "line": 3983,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(key->ptr)",
          "new_text": null,
          "old_line_content": "                zm = zipmapSet(zm,key->ptr,sdslen(key->ptr),",
          "new_line_content": "            if (o->encoding == REDIS_ENCODING_ZIPMAP) {",
          "content_same": false
        },
        {
          "line": 3984,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(val->ptr)",
          "new_text": null,
          "old_line_content": "                                  val->ptr,sdslen(val->ptr),NULL);",
          "new_line_content": "                unsigned char *zm = o->ptr;",
          "content_same": false
        },
        {
          "line": 3991,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd((dict*)o->ptr,key,val)",
          "new_text": null,
          "old_line_content": "                dictAdd((dict*)o->ptr,key,val);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 3995,
          "old_api": "redisPanic",
          "new_api": null,
          "old_text": "redisPanic(\"Unknown object type\")",
          "new_text": null,
          "old_line_content": "        redisPanic(\"Unknown object type\");",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 4008,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    time_t expiretime, now = time(NULL);",
          "new_line_content": "    dict *d = server.db[0].dict;",
          "content_same": false
        },
        {
          "line": 4013,
          "old_api": "fread",
          "new_api": null,
          "old_text": "fread(buf,9,1,fp)",
          "new_text": null,
          "old_line_content": "    if (fread(buf,9,1,fp) == 0) goto eoferr;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4015,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(buf,\"REDIS\",5)",
          "new_text": null,
          "old_line_content": "    if (memcmp(buf,\"REDIS\",5) != 0) {",
          "new_line_content": "    if (!fp) return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 4017,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Wrong signature trying to load DB from file\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Wrong signature trying to load DB from file\");",
          "new_line_content": "    buf[9] = '\\0';",
          "content_same": false
        },
        {
          "line": 4022,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "        fclose(fp);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4031,
          "old_api": "rdbLoadType",
          "new_api": null,
          "old_text": "rdbLoadType(fp)",
          "new_text": null,
          "old_line_content": "        if ((type = rdbLoadType(fp)) == -1) goto eoferr;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4033,
          "old_api": "rdbLoadTime",
          "new_api": null,
          "old_text": "rdbLoadTime(fp)",
          "new_text": null,
          "old_line_content": "            if ((expiretime = rdbLoadTime(fp)) == -1) goto eoferr;",
          "new_line_content": "        /* Read type. */",
          "content_same": false
        },
        {
          "line": 4035,
          "old_api": "rdbLoadType",
          "new_api": null,
          "old_text": "rdbLoadType(fp)",
          "new_text": null,
          "old_line_content": "            if ((type = rdbLoadType(fp)) == -1) goto eoferr;",
          "new_line_content": "        if (type == REDIS_EXPIRETIME) {",
          "content_same": false
        },
        {
          "line": 4040,
          "old_api": "rdbLoadLen",
          "new_api": null,
          "old_text": "rdbLoadLen(fp,NULL)",
          "new_text": null,
          "old_line_content": "            if ((dbid = rdbLoadLen(fp,NULL)) == REDIS_RDB_LENERR)",
          "new_line_content": "        if (type == REDIS_EOF) break;",
          "content_same": false
        },
        {
          "line": 4044,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "                exit(1);",
          "new_line_content": "                goto eoferr;",
          "content_same": false
        },
        {
          "line": 4051,
          "old_api": "rdbLoadStringObject",
          "new_api": null,
          "old_text": "rdbLoadStringObject(fp)",
          "new_text": null,
          "old_line_content": "        if ((key = rdbLoadStringObject(fp)) == NULL) goto eoferr;",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 4053,
          "old_api": "rdbLoadObject",
          "new_api": null,
          "old_text": "rdbLoadObject(type,fp)",
          "new_text": null,
          "old_line_content": "        if ((val = rdbLoadObject(type,fp)) == NULL) goto eoferr;",
          "new_line_content": "        /* Read key */",
          "content_same": false
        },
        {
          "line": 4057,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(val)",
          "new_text": null,
          "old_line_content": "            decrRefCount(val);",
          "new_line_content": "        /* Check if the key already expired */",
          "content_same": false
        },
        {
          "line": 4061,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(d,key,val)",
          "new_text": null,
          "old_line_content": "        retval = dictAdd(d,key,val);",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 4063,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Loading DB, duplicated key (%s) found! Unrecoverable error, exiting now.\", key->ptr)",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,\"Loading DB, duplicated key (%s) found! Unrecoverable error, exiting now.\", key->ptr);",
          "new_line_content": "        /* Add the new object in the hash table */",
          "content_same": false
        },
        {
          "line": 4068,
          "old_api": "setExpire",
          "new_api": null,
          "old_text": "setExpire(db,key,expiretime)",
          "new_text": null,
          "old_line_content": "        if (expiretime != -1) setExpire(db,key,expiretime);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4078,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(d,key)",
          "new_text": null,
          "old_line_content": "            dictEntry *de = dictFind(d,key);",
          "new_line_content": "         * to random sampling, otherwise we may try to swap already",
          "content_same": false
        },
        {
          "line": 4082,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "                key = dictGetEntryKey(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4083,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "                val = dictGetEntryVal(de);",
          "new_line_content": "            /* de may be NULL since the key already expired */",
          "content_same": false
        },
        {
          "line": 4095,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "            while (zmalloc_used_memory() > server.vm_max_memory) {",
          "new_line_content": "        /* If we have still some hope of having some value fitting memory",
          "content_same": false
        },
        {
          "line": 4096,
          "old_api": "vmSwapOneObjectBlocking",
          "new_api": null,
          "old_text": "vmSwapOneObjectBlocking()",
          "new_text": null,
          "old_line_content": "                if (vmSwapOneObjectBlocking() == REDIS_ERR) break;",
          "new_line_content": "         * then we try random sampling. */",
          "content_same": false
        },
        {
          "line": 4102,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "    fclose(fp);",
          "new_line_content": "                swap_all_values = 1; /* We are already using too much mem */",
          "content_same": false
        },
        {
          "line": 4106,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Short read or OOM loading DB. Unrecoverable error, aborting now.\")",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_WARNING,\"Short read or OOM loading DB. Unrecoverable error, aborting now.\");",
          "new_line_content": "    return REDIS_OK;",
          "content_same": false
        },
        {
          "line": 4107,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "    exit(1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4114,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(c->argv[1]->ptr, server.requirepass)",
          "new_text": null,
          "old_line_content": "    if (!server.requirepass || !strcmp(c->argv[1]->ptr, server.requirepass)) {",
          "new_line_content": "/*================================== Commands =============================== */",
          "content_same": false
        },
        {
          "line": 4116,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "      addReply(c,shared.ok);",
          "new_line_content": "static void authCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 4124,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.pong)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.pong);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4128,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,c->argv[1])",
          "new_text": null,
          "old_line_content": "    addReplyBulk(c,c->argv[1]);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4138,
          "old_api": "getLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongFromObjectOrReply(c, expire, &seconds, NULL)",
          "new_text": null,
          "old_line_content": "        if (getLongFromObjectOrReply(c, expire, &seconds, NULL) != REDIS_OK)",
          "new_line_content": "    long seconds = 0; /* initialized to avoid an harmness warning */",
          "content_same": false
        },
        {
          "line": 4146,
          "old_api": "deleteIfVolatile",
          "new_api": null,
          "old_text": "deleteIfVolatile(c->db,key)",
          "new_text": null,
          "old_line_content": "    if (nx) deleteIfVolatile(c->db,key);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4147,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(c->db->dict,key,val)",
          "new_text": null,
          "old_line_content": "    retval = dictAdd(c->db->dict,key,val);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4154,
          "old_api": "deleteIfSwapped",
          "new_api": null,
          "old_text": "deleteIfSwapped(c->db,key)",
          "new_text": null,
          "old_line_content": "            if (server.vm_enabled && deleteIfSwapped(c->db,key))",
          "new_line_content": "             * to overwrite the old. So we delete the old key in the database.",
          "content_same": false
        },
        {
          "line": 4155,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(key)",
          "new_text": null,
          "old_line_content": "                incrRefCount(key);",
          "new_line_content": "             * This will also make sure that swap pages about the old object",
          "content_same": false
        },
        {
          "line": 4156,
          "old_api": "dictReplace",
          "new_api": null,
          "old_text": "dictReplace(c->db->dict,key,val)",
          "new_text": null,
          "old_line_content": "            dictReplace(c->db->dict,key,val);",
          "new_line_content": "             * will be marked as free. */",
          "content_same": false
        },
        {
          "line": 4163,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(key)",
          "new_text": null,
          "old_line_content": "        incrRefCount(key);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 4164,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(val)",
          "new_text": null,
          "old_line_content": "        incrRefCount(val);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4168,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    if (expire) setExpire(c->db,key,time(NULL)+seconds);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4169,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, nx ? shared.cone : shared.ok)",
          "new_text": null,
          "old_line_content": "    addReply(c, nx ? shared.cone : shared.ok);",
          "new_line_content": "    server.dirty++;",
          "content_same": false
        },
        {
          "line": 4173,
          "old_api": "setGenericCommand",
          "new_api": null,
          "old_text": "setGenericCommand(c,0,c->argv[1],c->argv[2],NULL)",
          "new_text": null,
          "old_line_content": "    setGenericCommand(c,0,c->argv[1],c->argv[2],NULL);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4177,
          "old_api": "setGenericCommand",
          "new_api": null,
          "old_text": "setGenericCommand(c,1,c->argv[1],c->argv[2],NULL)",
          "new_text": null,
          "old_line_content": "    setGenericCommand(c,1,c->argv[1],c->argv[2],NULL);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4181,
          "old_api": "setGenericCommand",
          "new_api": null,
          "old_text": "setGenericCommand(c,0,c->argv[1],c->argv[3],c->argv[2])",
          "new_text": null,
          "old_line_content": "    setGenericCommand(c,0,c->argv[1],c->argv[3],c->argv[2]);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4187,
          "old_api": "lookupKeyReadOrReply",
          "new_api": null,
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)) == NULL)",
          "new_line_content": "static int getGenericCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 4191,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.wrongtypeerr);",
          "new_line_content": "        return REDIS_OK;",
          "content_same": false
        },
        {
          "line": 4200,
          "old_api": "getGenericCommand",
          "new_api": null,
          "old_text": "getGenericCommand(c)",
          "new_text": null,
          "old_line_content": "    getGenericCommand(c);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4204,
          "old_api": "getGenericCommand",
          "new_api": null,
          "old_text": "getGenericCommand(c)",
          "new_text": null,
          "old_line_content": "    if (getGenericCommand(c) == REDIS_ERR) return;",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4205,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(c->db->dict,c->argv[1],c->argv[2])",
          "new_text": null,
          "old_line_content": "    if (dictAdd(c->db->dict,c->argv[1],c->argv[2]) == DICT_ERR) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4206,
          "old_api": "dictReplace",
          "new_api": null,
          "old_text": "dictReplace(c->db->dict,c->argv[1],c->argv[2])",
          "new_text": null,
          "old_line_content": "        dictReplace(c->db->dict,c->argv[1],c->argv[2]);",
          "new_line_content": "static void getsetCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 4210,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(c->argv[2])",
          "new_text": null,
          "old_line_content": "    incrRefCount(c->argv[2]);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 4212,
          "old_api": "removeExpire",
          "new_api": null,
          "old_text": "removeExpire(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    removeExpire(c->db,c->argv[1]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4218,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",c->argc-1));",
          "new_line_content": "static void mgetCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 4220,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[j])",
          "new_text": null,
          "old_line_content": "        robj *o = lookupKeyRead(c->db,c->argv[j]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4222,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.nullbulk);",
          "new_line_content": "    for (j = 1; j < c->argc; j++) {",
          "content_same": false
        },
        {
          "line": 4227,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,o)",
          "new_text": null,
          "old_line_content": "                addReplyBulk(c,o);",
          "new_line_content": "            if (o->type != REDIS_STRING) {",
          "content_same": false
        },
        {
          "line": 4237,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR wrong number of arguments for MSET\\r\\n\")",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(\"-ERR wrong number of arguments for MSET\\r\\n\"));",
          "new_line_content": "    int j, busykeys = 0;",
          "content_same": false
        },
        {
          "line": 4244,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[j])",
          "new_text": null,
          "old_line_content": "            if (lookupKeyWrite(c->db,c->argv[j]) != NULL) {",
          "new_line_content": "     * set nothing at all if at least one already key exists. */",
          "content_same": false
        },
        {
          "line": 4250,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c, shared.czero);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4257,
          "old_api": "tryObjectEncoding",
          "new_api": null,
          "old_text": "tryObjectEncoding(c->argv[j+1])",
          "new_text": null,
          "old_line_content": "        c->argv[j+1] = tryObjectEncoding(c->argv[j+1]);",
          "new_line_content": "    for (j = 1; j < c->argc; j += 2) {",
          "content_same": false
        },
        {
          "line": 4258,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(c->db->dict,c->argv[j],c->argv[j+1])",
          "new_text": null,
          "old_line_content": "        retval = dictAdd(c->db->dict,c->argv[j],c->argv[j+1]);",
          "new_line_content": "        int retval;",
          "content_same": false
        },
        {
          "line": 4273,
          "old_api": "msetGenericCommand",
          "new_api": null,
          "old_text": "msetGenericCommand(c,0)",
          "new_text": null,
          "old_line_content": "    msetGenericCommand(c,0);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4277,
          "old_api": "msetGenericCommand",
          "new_api": null,
          "old_text": "msetGenericCommand(c,1)",
          "new_text": null,
          "old_line_content": "    msetGenericCommand(c,1);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4285,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "    int retval;",
          "content_same": false
        },
        {
          "line": 4286,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_STRING)",
          "new_text": null,
          "old_line_content": "    if (o != NULL && checkType(c,o,REDIS_STRING)) return;",
          "new_line_content": "    robj *o;",
          "content_same": false
        },
        {
          "line": 4287,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c,o,&value,NULL)",
          "new_text": null,
          "old_line_content": "    if (getLongLongFromObjectOrReply(c,o,&value,NULL) != REDIS_OK) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4291,
          "old_api": "tryObjectEncoding",
          "new_api": null,
          "old_text": "tryObjectEncoding(o)",
          "new_text": null,
          "old_line_content": "    o = tryObjectEncoding(o);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4292,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(c->db->dict,c->argv[1],o)",
          "new_text": null,
          "old_line_content": "    retval = dictAdd(c->db->dict,c->argv[1],o);",
          "new_line_content": "    value += incr;",
          "content_same": false
        },
        {
          "line": 4301,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,o)",
          "new_text": null,
          "old_line_content": "    addReply(c,o);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4302,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.crlf)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.crlf);",
          "new_line_content": "    server.dirty++;",
          "content_same": false
        },
        {
          "line": 4306,
          "old_api": "incrDecrCommand",
          "new_api": null,
          "old_text": "incrDecrCommand(c,1)",
          "new_text": null,
          "old_line_content": "    incrDecrCommand(c,1);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4310,
          "old_api": "incrDecrCommand",
          "new_api": null,
          "old_text": "incrDecrCommand(c,-1)",
          "new_text": null,
          "old_line_content": "    incrDecrCommand(c,-1);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4316,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL)",
          "new_text": null,
          "old_line_content": "    if (getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL) != REDIS_OK) return;",
          "new_line_content": "static void incrbyCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 4317,
          "old_api": "incrDecrCommand",
          "new_api": null,
          "old_text": "incrDecrCommand(c,incr)",
          "new_text": null,
          "old_line_content": "    incrDecrCommand(c,incr);",
          "new_line_content": "    long long incr;",
          "content_same": false
        },
        {
          "line": 4323,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL)",
          "new_text": null,
          "old_line_content": "    if (getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL) != REDIS_OK) return;",
          "new_line_content": "static void decrbyCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 4324,
          "old_api": "incrDecrCommand",
          "new_api": null,
          "old_text": "incrDecrCommand(c,-incr)",
          "new_text": null,
          "old_line_content": "    incrDecrCommand(c,-incr);",
          "new_line_content": "    long long incr;",
          "content_same": false
        },
        {
          "line": 4332,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "    size_t totlen;",
          "content_same": false
        },
        {
          "line": 4336,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(c->argv[1])",
          "new_text": null,
          "old_line_content": "        incrRefCount(c->argv[1]);",
          "new_line_content": "    if (o == NULL) {",
          "content_same": false
        },
        {
          "line": 4337,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(c->argv[2])",
          "new_text": null,
          "old_line_content": "        incrRefCount(c->argv[2]);",
          "new_line_content": "        /* Create the key */",
          "content_same": false
        },
        {
          "line": 4342,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(c->db->dict,c->argv[1])",
          "new_text": null,
          "old_line_content": "        de = dictFind(c->db->dict,c->argv[1]);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 4343,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(de != NULL)",
          "new_text": null,
          "old_line_content": "        assert(de != NULL);",
          "new_line_content": "        dictEntry *de;",
          "content_same": false
        },
        {
          "line": 4347,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4353,
          "old_api": "getDecodedObject",
          "new_api": null,
          "old_text": "getDecodedObject(o)",
          "new_text": null,
          "old_line_content": "            robj *decoded = getDecodedObject(o);",
          "new_line_content": "        /* If the object is specially encoded or shared we have to make",
          "content_same": false
        },
        {
          "line": 4355,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(decoded->ptr)",
          "new_text": null,
          "old_line_content": "            o = createStringObject(decoded->ptr, sdslen(decoded->ptr));",
          "new_line_content": "        if (o->refcount != 1 || o->encoding != REDIS_ENCODING_RAW) {",
          "content_same": false
        },
        {
          "line": 4357,
          "old_api": "dictReplace",
          "new_api": null,
          "old_text": "dictReplace(c->db->dict,c->argv[1],o)",
          "new_text": null,
          "old_line_content": "            dictReplace(c->db->dict,c->argv[1],o);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4361,
          "old_api": "sdscatlen",
          "new_api": null,
          "old_text": "sdscatlen(o->ptr,\n                c->argv[2]->ptr, sdslen(c->argv[2]->ptr))",
          "new_text": null,
          "old_line_content": "            o->ptr = sdscatlen(o->ptr,",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4362,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "                c->argv[2]->ptr, sdslen(c->argv[2]->ptr));",
          "new_line_content": "        /* APPEND! */",
          "content_same": false
        },
        {
          "line": 4375,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "    long start = atoi(c->argv[2]->ptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4376,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[3]->ptr)",
          "new_text": null,
          "old_line_content": "    long end = atoi(c->argv[3]->ptr);",
          "new_line_content": "static void substrCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 4380,
          "old_api": "lookupKeyReadOrReply",
          "new_api": null,
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "new_line_content": "    size_t rangelen, strlen;",
          "content_same": false
        },
        {
          "line": 4381,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_STRING)",
          "new_text": null,
          "old_line_content": "        checkType(c,o,REDIS_STRING)) return;",
          "new_line_content": "    sds range;",
          "content_same": false
        },
        {
          "line": 4395,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.nullbulk);",
          "new_line_content": "    /* indexes sanity checks */",
          "content_same": false
        },
        {
          "line": 4396,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(o)",
          "new_text": null,
          "old_line_content": "        decrRefCount(o);",
          "new_line_content": "    if (start > end || (size_t)start >= strlen) {",
          "content_same": false
        },
        {
          "line": 4403,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"$%zu\\r\\n\",rangelen));",
          "new_line_content": "    rangelen = (end-start)+1;",
          "content_same": false
        },
        {
          "line": 4404,
          "old_api": "sdsnewlen",
          "new_api": null,
          "old_text": "sdsnewlen((char*)o->ptr+start,rangelen)",
          "new_text": null,
          "old_line_content": "    range = sdsnewlen((char*)o->ptr+start,rangelen);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4405,
          "old_api": "addReplySds",
          "new_api": null,
          "old_text": "addReplySds(c,range)",
          "new_text": null,
          "old_line_content": "    addReplySds(c,range);",
          "new_line_content": "    /* Return the result */",
          "content_same": false
        },
        {
          "line": 4416,
          "old_api": "deleteKey",
          "new_api": null,
          "old_text": "deleteKey(c->db,c->argv[j])",
          "new_text": null,
          "old_line_content": "        if (deleteKey(c->db,c->argv[j])) {",
          "new_line_content": "    int deleted = 0, j;",
          "content_same": false
        },
        {
          "line": 4421,
          "old_api": "addReplyLong",
          "new_api": null,
          "old_text": "addReplyLong(c,deleted)",
          "new_text": null,
          "old_line_content": "    addReplyLong(c,deleted);",
          "new_line_content": "            deleted++;",
          "content_same": false
        },
        {
          "line": 4425,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    addReply(c,lookupKeyRead(c->db,c->argv[1]) ? shared.cone : shared.czero);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4429,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[1]->ptr)",
          "new_text": null,
          "old_line_content": "    int id = atoi(c->argv[1]->ptr);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4431,
          "old_api": "selectDb",
          "new_api": null,
          "old_text": "selectDb(c,id)",
          "new_text": null,
          "old_line_content": "    if (selectDb(c,id) == REDIS_ERR) {",
          "new_line_content": "static void selectCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 4443,
          "old_api": "dictGetRandomKey",
          "new_api": null,
          "old_text": "dictGetRandomKey(c->db->dict)",
          "new_text": null,
          "old_line_content": "        de = dictGetRandomKey(c->db->dict);",
          "new_line_content": "    robj *key;",
          "content_same": false
        },
        {
          "line": 4444,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "        if (!de || expireIfNeeded(c->db,dictGetEntryKey(de)) == 0) break;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4448,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.nullbulk);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4452,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "    key = dictGetEntryKey(de);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 4454,
          "old_api": "dupStringObject",
          "new_api": null,
          "old_text": "dupStringObject(key)",
          "new_text": null,
          "old_line_content": "        key = dupStringObject(key);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4456,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(key)",
          "new_text": null,
          "old_line_content": "        decrRefCount(key);",
          "new_line_content": "    if (server.vm_enabled) {",
          "content_same": false
        },
        {
          "line": 4466,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(pattern)",
          "new_text": null,
          "old_line_content": "    int plen = sdslen(pattern);",
          "new_line_content": "    dictIterator *di;",
          "content_same": false
        },
        {
          "line": 4468,
          "old_api": "createObject",
          "new_api": null,
          "old_text": "createObject(REDIS_STRING,NULL)",
          "new_text": null,
          "old_line_content": "    robj *lenobj = createObject(REDIS_STRING,NULL);",
          "new_line_content": "    sds pattern = c->argv[1]->ptr;",
          "content_same": false
        },
        {
          "line": 4470,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(c->db->dict)",
          "new_text": null,
          "old_line_content": "    di = dictGetIterator(c->db->dict);",
          "new_line_content": "    unsigned long numkeys = 0;",
          "content_same": false
        },
        {
          "line": 4472,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(lenobj)",
          "new_text": null,
          "old_line_content": "    decrRefCount(lenobj);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4478,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(key)",
          "new_text": null,
          "old_line_content": "            stringmatchlen(pattern,plen,key,sdslen(key),0)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4479,
          "old_api": "expireIfNeeded",
          "new_api": null,
          "old_text": "expireIfNeeded(c->db,keyobj)",
          "new_text": null,
          "old_line_content": "            if (expireIfNeeded(c->db,keyobj) == 0) {",
          "new_line_content": "        sds key = keyobj->ptr;",
          "content_same": false
        },
        {
          "line": 4480,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,keyobj)",
          "new_text": null,
          "old_line_content": "                addReplyBulk(c,keyobj);",
          "new_line_content": "        if ((pattern[0] == '*' && pattern[1] == '\\0') ||",
          "content_same": false
        },
        {
          "line": 4485,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 4486,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    lenobj->ptr = sdscatprintf(sdsempty(),\"*%lu\\r\\n\",numkeys);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4490,
          "old_api": "addReplySds",
          "new_api": null,
          "old_text": "addReplySds(c,\n        sdscatprintf(sdsempty(),\":%lu\\r\\n\",dictSize(c->db->dict)))",
          "new_text": null,
          "old_line_content": "    addReplySds(c,",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4491,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(c->db->dict)",
          "new_text": null,
          "old_line_content": "        sdscatprintf(sdsempty(),\":%lu\\r\\n\",dictSize(c->db->dict)));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4495,
          "old_api": "addReplySds",
          "new_api": null,
          "old_text": "addReplySds(c,\n        sdscatprintf(sdsempty(),\":%lu\\r\\n\",server.lastsave))",
          "new_text": null,
          "old_line_content": "    addReplySds(c,",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4496,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        sdscatprintf(sdsempty(),\":%lu\\r\\n\",server.lastsave));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4503,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    o = lookupKeyRead(c->db,c->argv[1]);",
          "new_line_content": "    robj *o;",
          "content_same": false
        },
        {
          "line": 4516,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(type)",
          "new_text": null,
          "old_line_content": "    addReplySds(c,sdsnew(type));",
          "new_line_content": "        default: type = \"+unknown\"; break;",
          "content_same": false
        },
        {
          "line": 4517,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.crlf)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.crlf);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4522,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR background save in progress\\r\\n\")",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(\"-ERR background save in progress\\r\\n\"));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4526,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.ok);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 4534,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR background save already in progress\\r\\n\")",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(\"-ERR background save already in progress\\r\\n\"));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4539,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(status)",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(status));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4541,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.err)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.err);",
          "new_line_content": "        char *status = \"+Background saving started\\r\\n\";",
          "content_same": false
        },
        {
          "line": 4546,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"User requested shutdown, saving DB...\")",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_WARNING,\"User requested shutdown, saving DB...\");",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4551,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"There is a live saving child. Killing it!\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"There is a live saving child. Killing it!\");",
          "new_line_content": "       We want to avoid race conditions, for instance our saving child may",
          "content_same": false
        },
        {
          "line": 4552,
          "old_api": "kill",
          "new_api": null,
          "old_text": "kill(server.bgsavechildpid,SIGKILL)",
          "new_text": null,
          "old_line_content": "        kill(server.bgsavechildpid,SIGKILL);",
          "new_line_content": "       overwrite the synchronous saving did by SHUTDOWN. */",
          "content_same": false
        },
        {
          "line": 4553,
          "old_api": "rdbRemoveTempFile",
          "new_api": null,
          "old_text": "rdbRemoveTempFile(server.bgsavechildpid)",
          "new_text": null,
          "old_line_content": "        rdbRemoveTempFile(server.bgsavechildpid);",
          "new_line_content": "    if (server.bgsavechildpid != -1) {",
          "content_same": false
        },
        {
          "line": 4557,
          "old_api": "fsync",
          "new_api": null,
          "old_text": "fsync(server.appendfd)",
          "new_text": null,
          "old_line_content": "        fsync(server.appendfd);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4558,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(server.vm_swap_file)",
          "new_text": null,
          "old_line_content": "        if (server.vm_enabled) unlink(server.vm_swap_file);",
          "new_line_content": "    if (server.appendonly) {",
          "content_same": false
        },
        {
          "line": 4559,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(0)",
          "new_text": null,
          "old_line_content": "        exit(0);",
          "new_line_content": "        /* Append only file: fsync() the AOF and exit */",
          "content_same": false
        },
        {
          "line": 4564,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(server.pidfile)",
          "new_text": null,
          "old_line_content": "                unlink(server.pidfile);",
          "new_line_content": "        /* Snapshotting. Perform a SYNC SAVE and exit */",
          "content_same": false
        },
        {
          "line": 4566,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Server exit now, bye bye...\")",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,\"Server exit now, bye bye...\");",
          "new_line_content": "            if (server.daemonize)",
          "content_same": false
        },
        {
          "line": 4574,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Error trying to save the DB, can't exit\")",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,\"Error trying to save the DB, can't exit\");",
          "new_line_content": "             * in the next cron() Redis will be notified that the background",
          "content_same": false
        },
        {
          "line": 4575,
          "old_api": "addReplySds",
          "new_api": null,
          "old_text": "addReplySds(c,\n                sdsnew(\"-ERR can't quit, problems saving the DB\\r\\n\"))",
          "new_text": null,
          "old_line_content": "            addReplySds(c,",
          "new_line_content": "             * saving aborted, handling special stuff like slaves pending for",
          "content_same": false
        },
        {
          "line": 4576,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR can't quit, problems saving the DB\\r\\n\")",
          "new_text": null,
          "old_line_content": "                sdsnew(\"-ERR can't quit, problems saving the DB\\r\\n\"));",
          "new_line_content": "             * synchronization... */",
          "content_same": false
        },
        {
          "line": 4585,
          "old_api": "sdscmp",
          "new_api": null,
          "old_text": "sdscmp(c->argv[1]->ptr,c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "    if (sdscmp(c->argv[1]->ptr,c->argv[2]->ptr) == 0) {",
          "new_line_content": "    robj *o;",
          "content_same": false
        },
        {
          "line": 4586,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.sameobjecterr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.sameobjecterr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4590,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": null,
          "old_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.nokeyerr)",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.nokeyerr)) == NULL)",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 4594,
          "old_api": "deleteIfVolatile",
          "new_api": null,
          "old_text": "deleteIfVolatile(c->db,c->argv[2])",
          "new_text": null,
          "old_line_content": "    deleteIfVolatile(c->db,c->argv[2]);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 4595,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(c->db->dict,c->argv[2],o)",
          "new_text": null,
          "old_line_content": "    if (dictAdd(c->db->dict,c->argv[2],o) == DICT_ERR) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4603,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(c->argv[2])",
          "new_text": null,
          "old_line_content": "        incrRefCount(c->argv[2]);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4605,
          "old_api": "deleteKey",
          "new_api": null,
          "old_text": "deleteKey(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    deleteKey(c->db,c->argv[1]);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 4607,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,nx ? shared.cone : shared.ok)",
          "new_text": null,
          "old_line_content": "    addReply(c,nx ? shared.cone : shared.ok);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4611,
          "old_api": "renameGenericCommand",
          "new_api": null,
          "old_text": "renameGenericCommand(c,0)",
          "new_text": null,
          "old_line_content": "    renameGenericCommand(c,0);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4615,
          "old_api": "renameGenericCommand",
          "new_api": null,
          "old_text": "renameGenericCommand(c,1)",
          "new_text": null,
          "old_line_content": "    renameGenericCommand(c,1);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4626,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "    if (selectDb(c,atoi(c->argv[2]->ptr)) == REDIS_ERR) {",
          "new_line_content": "    /* Obtain source and target DB pointers */",
          "content_same": false
        },
        {
          "line": 4627,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.outofrangeerr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.outofrangeerr);",
          "new_line_content": "    src = c->db;",
          "content_same": false
        },
        {
          "line": 4631,
          "old_api": "selectDb",
          "new_api": null,
          "old_text": "selectDb(c,srcid)",
          "new_text": null,
          "old_line_content": "    selectDb(c,srcid); /* Back to the source DB */",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 4636,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.sameobjecterr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.sameobjecterr);",
          "new_line_content": "    /* If the user is moving using as target the same",
          "content_same": false
        },
        {
          "line": 4641,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4643,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "    /* Check if the element exists and get a reference */",
          "content_same": false
        },
        {
          "line": 4648,
          "old_api": "deleteIfVolatile",
          "new_api": null,
          "old_text": "deleteIfVolatile(dst,c->argv[1])",
          "new_text": null,
          "old_line_content": "    deleteIfVolatile(dst,c->argv[1]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4649,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(dst->dict,c->argv[1],o)",
          "new_text": null,
          "old_line_content": "    if (dictAdd(dst->dict,c->argv[1],o) == DICT_ERR) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4650,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "    /* Try to add the element to the target DB */",
          "content_same": false
        },
        {
          "line": 4654,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(o)",
          "new_text": null,
          "old_line_content": "    incrRefCount(o);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 4659,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.cone)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.cone);",
          "new_line_content": "    /* OK! key moved, free the entry in the source DB */",
          "content_same": false
        },
        {
          "line": 4667,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    lobj = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "    robj *lobj;",
          "content_same": false
        },
        {
          "line": 4669,
          "old_api": "handleClientsWaitingListPush",
          "new_api": null,
          "old_text": "handleClientsWaitingListPush(c,c->argv[1],c->argv[2])",
          "new_text": null,
          "old_line_content": "        if (handleClientsWaitingListPush(c,c->argv[1],c->argv[2])) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4678,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(list,c->argv[2])",
          "new_text": null,
          "old_line_content": "            listAddNodeTail(list,c->argv[2]);",
          "new_line_content": "        if (where == REDIS_HEAD) {",
          "content_same": false
        },
        {
          "line": 4680,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(c->db->dict,c->argv[1],lobj)",
          "new_text": null,
          "old_line_content": "        dictAdd(c->db->dict,c->argv[1],lobj);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 4682,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(c->argv[2])",
          "new_text": null,
          "old_line_content": "        incrRefCount(c->argv[2]);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4689,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.cone)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.cone);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 4694,
          "old_api": "listAddNodeHead",
          "new_api": null,
          "old_text": "listAddNodeHead(list,c->argv[2])",
          "new_text": null,
          "old_line_content": "            listAddNodeHead(list,c->argv[2]);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4696,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(list,c->argv[2])",
          "new_text": null,
          "old_line_content": "            listAddNodeTail(list,c->argv[2]);",
          "new_line_content": "        if (where == REDIS_HEAD) {",
          "content_same": false
        },
        {
          "line": 4698,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(c->argv[2])",
          "new_text": null,
          "old_line_content": "        incrRefCount(c->argv[2]);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 4705,
          "old_api": "pushGenericCommand",
          "new_api": null,
          "old_text": "pushGenericCommand(c,REDIS_HEAD)",
          "new_text": null,
          "old_line_content": "    pushGenericCommand(c,REDIS_HEAD);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4709,
          "old_api": "pushGenericCommand",
          "new_api": null,
          "old_text": "pushGenericCommand(c,REDIS_TAIL)",
          "new_text": null,
          "old_line_content": "    pushGenericCommand(c,REDIS_TAIL);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4716,
          "old_api": "lookupKeyReadOrReply",
          "new_api": null,
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "new_line_content": "    robj *o;",
          "content_same": false
        },
        {
          "line": 4717,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_LIST)",
          "new_text": null,
          "old_line_content": "        checkType(c,o,REDIS_LIST)) return;",
          "new_line_content": "    list *l;",
          "content_same": false
        },
        {
          "line": 4725,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "    int index = atoi(c->argv[2]->ptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4729,
          "old_api": "lookupKeyReadOrReply",
          "new_api": null,
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "new_line_content": "    list *list;",
          "content_same": false
        },
        {
          "line": 4730,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_LIST)",
          "new_text": null,
          "old_line_content": "        checkType(c,o,REDIS_LIST)) return;",
          "new_line_content": "    listNode *ln;",
          "content_same": false
        },
        {
          "line": 4735,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.nullbulk);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4737,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(ln)",
          "new_text": null,
          "old_line_content": "        robj *ele = listNodeValue(ln);",
          "new_line_content": "    if (ln == NULL) {",
          "content_same": false
        },
        {
          "line": 4744,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "    int index = atoi(c->argv[2]->ptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4748,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": null,
          "old_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.nokeyerr)",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.nokeyerr)) == NULL ||",
          "new_line_content": "    list *list;",
          "content_same": false
        },
        {
          "line": 4749,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_LIST)",
          "new_text": null,
          "old_line_content": "        checkType(c,o,REDIS_LIST)) return;",
          "new_line_content": "    listNode *ln;",
          "content_same": false
        },
        {
          "line": 4754,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.outofrangeerr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.outofrangeerr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4756,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(ln)",
          "new_text": null,
          "old_line_content": "        robj *ele = listNodeValue(ln);",
          "new_line_content": "    if (ln == NULL) {",
          "content_same": false
        },
        {
          "line": 4758,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(ele)",
          "new_text": null,
          "old_line_content": "        decrRefCount(ele);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 4760,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(c->argv[3])",
          "new_text": null,
          "old_line_content": "        incrRefCount(c->argv[3]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4771,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": null,
          "old_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.nullbulk)",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "new_line_content": "    list *list;",
          "content_same": false
        },
        {
          "line": 4772,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_LIST)",
          "new_text": null,
          "old_line_content": "        checkType(c,o,REDIS_LIST)) return;",
          "new_line_content": "    listNode *ln;",
          "content_same": false
        },
        {
          "line": 4776,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(list)",
          "new_text": null,
          "old_line_content": "        ln = listFirst(list);",
          "new_line_content": "    list = o->ptr;",
          "content_same": false
        },
        {
          "line": 4778,
          "old_api": "listLast",
          "new_api": null,
          "old_text": "listLast(list)",
          "new_text": null,
          "old_line_content": "        ln = listLast(list);",
          "new_line_content": "    if (where == REDIS_HEAD)",
          "content_same": false
        },
        {
          "line": 4783,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(ln)",
          "new_text": null,
          "old_line_content": "        robj *ele = listNodeValue(ln);",
          "new_line_content": "    if (ln == NULL) {",
          "content_same": false
        },
        {
          "line": 4785,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(list,ln)",
          "new_text": null,
          "old_line_content": "        listDelNode(list,ln);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 4792,
          "old_api": "popGenericCommand",
          "new_api": null,
          "old_text": "popGenericCommand(c,REDIS_HEAD)",
          "new_text": null,
          "old_line_content": "    popGenericCommand(c,REDIS_HEAD);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4796,
          "old_api": "popGenericCommand",
          "new_api": null,
          "old_text": "popGenericCommand(c,REDIS_TAIL)",
          "new_text": null,
          "old_line_content": "    popGenericCommand(c,REDIS_TAIL);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4801,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "    int start = atoi(c->argv[2]->ptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4802,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[3]->ptr)",
          "new_text": null,
          "old_line_content": "    int end = atoi(c->argv[3]->ptr);",
          "new_line_content": "static void lrangeCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 4809,
          "old_api": "lookupKeyReadOrReply",
          "new_api": null,
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.emptymultibulk)",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.emptymultibulk)) == NULL",
          "new_line_content": "    listNode *ln;",
          "content_same": false
        },
        {
          "line": 4810,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_LIST)",
          "new_text": null,
          "old_line_content": "         || checkType(c,o,REDIS_LIST)) return;",
          "new_line_content": "    robj *ele;",
          "content_same": false
        },
        {
          "line": 4823,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.emptymultibulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.emptymultibulk);",
          "new_line_content": "    /* indexes sanity checks */",
          "content_same": false
        },
        {
          "line": 4830,
          "old_api": "listIndex",
          "new_api": null,
          "old_text": "listIndex(list, start)",
          "new_text": null,
          "old_line_content": "    ln = listIndex(list, start);",
          "new_line_content": "    rangelen = (end-start)+1;",
          "content_same": false
        },
        {
          "line": 4831,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",rangelen));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4841,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "    int start = atoi(c->argv[2]->ptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4842,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[3]->ptr)",
          "new_text": null,
          "old_line_content": "    int end = atoi(c->argv[3]->ptr);",
          "new_line_content": "static void ltrimCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 4848,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": null,
          "old_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.ok)",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.ok)) == NULL ||",
          "new_line_content": "    list *list;",
          "content_same": false
        },
        {
          "line": 4849,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_LIST)",
          "new_text": null,
          "old_line_content": "        checkType(c,o,REDIS_LIST)) return;",
          "new_line_content": "    listNode *ln;",
          "content_same": false
        },
        {
          "line": 4872,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(list)",
          "new_text": null,
          "old_line_content": "        ln = listFirst(list);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4873,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(list,ln)",
          "new_text": null,
          "old_line_content": "        listDelNode(list,ln);",
          "new_line_content": "    /* Remove list elements to perform the trim */",
          "content_same": false
        },
        {
          "line": 4877,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(list,ln)",
          "new_text": null,
          "old_line_content": "        listDelNode(list,ln);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4881,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.ok);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4888,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "    int toremove = atoi(c->argv[2]->ptr);",
          "new_line_content": "    robj *o;",
          "content_same": false
        },
        {
          "line": 4892,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": null,
          "old_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.czero)",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "new_line_content": "    int removed = 0;",
          "content_same": false
        },
        {
          "line": 4893,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_LIST)",
          "new_text": null,
          "old_line_content": "        checkType(c,o,REDIS_LIST)) return;",
          "new_line_content": "    int fromtail = 0;",
          "content_same": false
        },
        {
          "line": 4902,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(ln)",
          "new_text": null,
          "old_line_content": "        robj *ele = listNodeValue(ln);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4906,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(list,ln)",
          "new_text": null,
          "old_line_content": "            listDelNode(list,ln);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4913,
          "old_api": "deleteKey",
          "new_api": null,
          "old_text": "deleteKey(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    if (listLength(list) == 0) deleteKey(c->db,c->argv[1]);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4914,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\":%d\\r\\n\",removed));",
          "new_line_content": "        ln = next;",
          "content_same": false
        },
        {
          "line": 4937,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": null,
          "old_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.nullbulk)",
          "new_text": null,
          "old_line_content": "    if ((sobj = lookupKeyWriteOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "new_line_content": "    list *srclist;",
          "content_same": false
        },
        {
          "line": 4938,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,sobj,REDIS_LIST)",
          "new_text": null,
          "old_line_content": "        checkType(c,sobj,REDIS_LIST)) return;",
          "new_line_content": "    listNode *ln;",
          "content_same": false
        },
        {
          "line": 4945,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[2])",
          "new_text": null,
          "old_line_content": "        robj *dobj = lookupKeyWrite(c->db,c->argv[2]);",
          "new_line_content": "    if (ln == NULL) {",
          "content_same": false
        },
        {
          "line": 4950,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "        list *dstlist;",
          "content_same": false
        },
        {
          "line": 4956,
          "old_api": "handleClientsWaitingListPush",
          "new_api": null,
          "old_text": "handleClientsWaitingListPush(c,c->argv[2],ele)",
          "new_text": null,
          "old_line_content": "        if (!handleClientsWaitingListPush(c,c->argv[2],ele)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4960,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(c->db->dict,c->argv[2],dobj)",
          "new_text": null,
          "old_line_content": "                dictAdd(c->db->dict,c->argv[2],dobj);",
          "new_line_content": "            if (dobj == NULL) {",
          "content_same": false
        },
        {
          "line": 4961,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(c->argv[2])",
          "new_text": null,
          "old_line_content": "                incrRefCount(c->argv[2]);",
          "new_line_content": "                /* Create the list if the key does not exist */",
          "content_same": false
        },
        {
          "line": 4965,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(ele)",
          "new_text": null,
          "old_line_content": "            incrRefCount(ele);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 4969,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,ele)",
          "new_text": null,
          "old_line_content": "        addReplyBulk(c,ele);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4973,
          "old_api": "deleteKey",
          "new_api": null,
          "old_text": "deleteKey(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "        if (listLength(srclist) == 0) deleteKey(c->db,c->argv[1]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4983,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    set = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "static void saddCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 4985,
          "old_api": "createSetObject",
          "new_api": null,
          "old_text": "createSetObject()",
          "new_text": null,
          "old_line_content": "        set = createSetObject();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4987,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(c->argv[1])",
          "new_text": null,
          "old_line_content": "        incrRefCount(c->argv[1]);",
          "new_line_content": "    if (set == NULL) {",
          "content_same": false
        },
        {
          "line": 4994,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(set->ptr,c->argv[2],NULL)",
          "new_text": null,
          "old_line_content": "    if (dictAdd(set->ptr,c->argv[2],NULL) == DICT_OK) {",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 4995,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(c->argv[2])",
          "new_text": null,
          "old_line_content": "        incrRefCount(c->argv[2]);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4999,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "        server.dirty++;",
          "content_same": false
        },
        {
          "line": 5006,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": null,
          "old_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.czero)",
          "new_text": null,
          "old_line_content": "    if ((set = lookupKeyWriteOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "new_line_content": "static void sremCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 5007,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,set,REDIS_SET)",
          "new_text": null,
          "old_line_content": "        checkType(c,set,REDIS_SET)) return;",
          "new_line_content": "    robj *set;",
          "content_same": false
        },
        {
          "line": 5011,
          "old_api": "dictResize",
          "new_api": null,
          "old_text": "dictResize(set->ptr)",
          "new_text": null,
          "old_line_content": "        if (htNeedsResize(set->ptr)) dictResize(set->ptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5013,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.cone)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.cone);",
          "new_line_content": "        server.dirty++;",
          "content_same": false
        },
        {
          "line": 5022,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    srcset = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "static void smoveCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 5023,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[2])",
          "new_text": null,
          "old_line_content": "    dstset = lookupKeyWrite(c->db,c->argv[2]);",
          "new_line_content": "    robj *srcset, *dstset;",
          "content_same": false
        },
        {
          "line": 5028,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, srcset ? shared.wrongtypeerr : shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c, srcset ? shared.wrongtypeerr : shared.czero);",
          "new_line_content": "    /* If the source key does not exist return 0, if it's of the wrong type",
          "content_same": false
        },
        {
          "line": 5033,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.wrongtypeerr);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5037,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(srcset->ptr,c->argv[3])",
          "new_text": null,
          "old_line_content": "    if (dictDelete(srcset->ptr,c->argv[3]) == DICT_ERR) {",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 5039,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "    /* Remove the element from the source set */",
          "content_same": false
        },
        {
          "line": 5043,
          "old_api": "deleteKey",
          "new_api": null,
          "old_text": "deleteKey(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "        deleteKey(c->db,c->argv[1]);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 5047,
          "old_api": "createSetObject",
          "new_api": null,
          "old_text": "createSetObject()",
          "new_text": null,
          "old_line_content": "        dstset = createSetObject();",
          "new_line_content": "    server.dirty++;",
          "content_same": false
        },
        {
          "line": 5048,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(c->db->dict,c->argv[2],dstset)",
          "new_text": null,
          "old_line_content": "        dictAdd(c->db->dict,c->argv[2],dstset);",
          "new_line_content": "    /* Add the element to the destination set */",
          "content_same": false
        },
        {
          "line": 5049,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(c->argv[2])",
          "new_text": null,
          "old_line_content": "        incrRefCount(c->argv[2]);",
          "new_line_content": "    if (!dstset) {",
          "content_same": false
        },
        {
          "line": 5053,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.cone)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.cone);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5059,
          "old_api": "lookupKeyReadOrReply",
          "new_api": null,
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "new_text": null,
          "old_line_content": "    if ((set = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "new_line_content": "static void sismemberCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 5060,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,set,REDIS_SET)",
          "new_text": null,
          "old_line_content": "        checkType(c,set,REDIS_SET)) return;",
          "new_line_content": "    robj *set;",
          "content_same": false
        },
        {
          "line": 5072,
          "old_api": "lookupKeyReadOrReply",
          "new_api": null,
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "new_line_content": "    robj *o;",
          "content_same": false
        },
        {
          "line": 5073,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_SET)",
          "new_text": null,
          "old_line_content": "        checkType(c,o,REDIS_SET)) return;",
          "new_line_content": "    dict *s;",
          "content_same": false
        },
        {
          "line": 5083,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": null,
          "old_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.nullbulk)",
          "new_text": null,
          "old_line_content": "    if ((set = lookupKeyWriteOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "new_line_content": "    robj *set;",
          "content_same": false
        },
        {
          "line": 5084,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,set,REDIS_SET)",
          "new_text": null,
          "old_line_content": "        checkType(c,set,REDIS_SET)) return;",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 5088,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.nullbulk);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5090,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "        robj *ele = dictGetEntryKey(de);",
          "new_line_content": "    if (de == NULL) {",
          "content_same": false
        },
        {
          "line": 5092,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,ele)",
          "new_text": null,
          "old_line_content": "        addReplyBulk(c,ele);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 5094,
          "old_api": "dictResize",
          "new_api": null,
          "old_text": "dictResize(set->ptr)",
          "new_text": null,
          "old_line_content": "        if (htNeedsResize(set->ptr)) dictResize(set->ptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5104,
          "old_api": "lookupKeyReadOrReply",
          "new_api": null,
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)",
          "new_text": null,
          "old_line_content": "    if ((set = lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "new_line_content": "    robj *set;",
          "content_same": false
        },
        {
          "line": 5105,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,set,REDIS_SET)",
          "new_text": null,
          "old_line_content": "        checkType(c,set,REDIS_SET)) return;",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 5109,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.nullbulk);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5111,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "        robj *ele = dictGetEntryKey(de);",
          "new_line_content": "    if (de == NULL) {",
          "content_same": false
        },
        {
          "line": 5113,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,ele)",
          "new_text": null,
          "old_line_content": "        addReplyBulk(c,ele);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 5120,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(*d2)",
          "new_text": null,
          "old_line_content": "    return dictSize(*d1)-dictSize(*d2);",
          "new_line_content": "static int qsortCompareSetsByCardinality(const void *s1, const void *s2) {",
          "content_same": false
        },
        {
          "line": 5124,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(dict*)*setsnum)",
          "new_text": null,
          "old_line_content": "    dict **dv = zmalloc(sizeof(dict*)*setsnum);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5134,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,setskeys[j])",
          "new_text": null,
          "old_line_content": "                    lookupKeyWrite(c->db,setskeys[j]) :",
          "new_line_content": "        robj *setobj;",
          "content_same": false
        },
        {
          "line": 5135,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,setskeys[j])",
          "new_text": null,
          "old_line_content": "                    lookupKeyRead(c->db,setskeys[j]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5139,
          "old_api": "deleteKey",
          "new_api": null,
          "old_text": "deleteKey(c->db,dstkey)",
          "new_text": null,
          "old_line_content": "                if (deleteKey(c->db,dstkey))",
          "new_line_content": "        if (!setobj) {",
          "content_same": false
        },
        {
          "line": 5141,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "                addReply(c,shared.czero);",
          "new_line_content": "            if (dstkey) {",
          "content_same": false
        },
        {
          "line": 5143,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.emptymultibulk)",
          "new_text": null,
          "old_line_content": "                addReply(c,shared.emptymultibulk);",
          "new_line_content": "                    server.dirty++;",
          "content_same": false
        },
        {
          "line": 5148,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(dv)",
          "new_text": null,
          "old_line_content": "            zfree(dv);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 5149,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5156,
          "old_api": "qsort",
          "new_api": null,
          "old_text": "qsort(dv,setsnum,sizeof(dict*),qsortCompareSetsByCardinality)",
          "new_text": null,
          "old_line_content": "    qsort(dv,setsnum,sizeof(dict*),qsortCompareSetsByCardinality);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5164,
          "old_api": "createObject",
          "new_api": null,
          "old_text": "createObject(REDIS_STRING,NULL)",
          "new_text": null,
          "old_line_content": "        lenobj = createObject(REDIS_STRING,NULL);",
          "new_line_content": "     * to the output list and save the pointer to later modify it with the",
          "content_same": false
        },
        {
          "line": 5165,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,lenobj)",
          "new_text": null,
          "old_line_content": "        addReply(c,lenobj);",
          "new_line_content": "     * right length */",
          "content_same": false
        },
        {
          "line": 5166,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(lenobj)",
          "new_text": null,
          "old_line_content": "        decrRefCount(lenobj);",
          "new_line_content": "    if (!dstkey) {",
          "content_same": false
        },
        {
          "line": 5170,
          "old_api": "createSetObject",
          "new_api": null,
          "old_text": "createSetObject()",
          "new_text": null,
          "old_line_content": "        dstset = createSetObject();",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 5176,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(dv[0])",
          "new_text": null,
          "old_line_content": "    di = dictGetIterator(dv[0]);",
          "new_line_content": "    /* Iterate all the elements of the first (smallest) set, and test",
          "content_same": false
        },
        {
          "line": 5178,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "    while((de = dictNext(di)) != NULL) {",
          "new_line_content": "     * not include the element it is discarded */",
          "content_same": false
        },
        {
          "line": 5182,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "            if (dictFind(dv[j],dictGetEntryKey(de)) == NULL) break;",
          "new_line_content": "        robj *ele;",
          "content_same": false
        },
        {
          "line": 5187,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,ele)",
          "new_text": null,
          "old_line_content": "            addReplyBulk(c,ele);",
          "new_line_content": "            continue; /* at least one set does not contain the member */",
          "content_same": false
        },
        {
          "line": 5191,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(ele)",
          "new_text": null,
          "old_line_content": "            incrRefCount(ele);",
          "new_line_content": "            cardinality++;",
          "content_same": false
        },
        {
          "line": 5199,
          "old_api": "deleteKey",
          "new_api": null,
          "old_text": "deleteKey(c->db,dstkey)",
          "new_text": null,
          "old_line_content": "        deleteKey(c->db,dstkey);",
          "new_line_content": "    if (dstkey) {",
          "content_same": false
        },
        {
          "line": 5200,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize((dict*)dstset->ptr)",
          "new_text": null,
          "old_line_content": "        if (dictSize((dict*)dstset->ptr) > 0) {",
          "new_line_content": "        /* Store the resulting set into the target, if the intersection",
          "content_same": false
        },
        {
          "line": 5201,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(c->db->dict,dstkey,dstset)",
          "new_text": null,
          "old_line_content": "            dictAdd(c->db->dict,dstkey,dstset);",
          "new_line_content": "         * is not an empty set. */",
          "content_same": false
        },
        {
          "line": 5210,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        lenobj->ptr = sdscatprintf(sdsempty(),\"*%lu\\r\\n\",cardinality);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5212,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(dv)",
          "new_text": null,
          "old_line_content": "    zfree(dv);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 5216,
          "old_api": "sinterGenericCommand",
          "new_api": null,
          "old_text": "sinterGenericCommand(c,c->argv+1,c->argc-1,NULL)",
          "new_text": null,
          "old_line_content": "    sinterGenericCommand(c,c->argv+1,c->argc-1,NULL);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5220,
          "old_api": "sinterGenericCommand",
          "new_api": null,
          "old_text": "sinterGenericCommand(c,c->argv+2,c->argc-2,c->argv[1])",
          "new_text": null,
          "old_line_content": "    sinterGenericCommand(c,c->argv+2,c->argc-2,c->argv[1]);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5228,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(dict*)*setsnum)",
          "new_text": null,
          "old_line_content": "    dict **dv = zmalloc(sizeof(dict*)*setsnum);",
          "new_line_content": "#define REDIS_OP_INTER 2",
          "content_same": false
        },
        {
          "line": 5238,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,setskeys[j])",
          "new_text": null,
          "old_line_content": "                    lookupKeyWrite(c->db,setskeys[j]) :",
          "new_line_content": "        robj *setobj;",
          "content_same": false
        },
        {
          "line": 5239,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,setskeys[j])",
          "new_text": null,
          "old_line_content": "                    lookupKeyRead(c->db,setskeys[j]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5245,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(dv)",
          "new_text": null,
          "old_line_content": "            zfree(dv);",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 5246,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.wrongtypeerr);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5255,
          "old_api": "createSetObject",
          "new_api": null,
          "old_text": "createSetObject()",
          "new_text": null,
          "old_line_content": "    dstset = createSetObject();",
          "new_line_content": "    /* We need a temp set object to store our union. If the dstkey",
          "content_same": false
        },
        {
          "line": 5263,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(dv[j])",
          "new_text": null,
          "old_line_content": "        di = dictGetIterator(dv[j]);",
          "new_line_content": "        if (op == REDIS_OP_DIFF && j == 0 && !dv[j]) break; /* result set is empty */",
          "content_same": false
        },
        {
          "line": 5265,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "        while((de = dictNext(di)) != NULL) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5269,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "            ele = dictGetEntryKey(de);",
          "new_line_content": "            robj *ele;",
          "content_same": false
        },
        {
          "line": 5271,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(dstset->ptr,ele,NULL)",
          "new_text": null,
          "old_line_content": "                if (dictAdd(dstset->ptr,ele,NULL) == DICT_OK) {",
          "new_line_content": "            /* dictAdd will not add the same element multiple times */",
          "content_same": false
        },
        {
          "line": 5276,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(dstset->ptr,ele)",
          "new_text": null,
          "old_line_content": "                if (dictDelete(dstset->ptr,ele) == DICT_OK) {",
          "new_line_content": "                    cardinality++;",
          "content_same": false
        },
        {
          "line": 5281,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "        dictReleaseIterator(di);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 5289,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",cardinality));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5290,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(dstset->ptr)",
          "new_text": null,
          "old_line_content": "        di = dictGetIterator(dstset->ptr);",
          "new_line_content": "    /* Output the content of the resulting set, if not in STORE mode */",
          "content_same": false
        },
        {
          "line": 5291,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "        while((de = dictNext(di)) != NULL) {",
          "new_line_content": "    if (!dstkey) {",
          "content_same": false
        },
        {
          "line": 5295,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,ele)",
          "new_text": null,
          "old_line_content": "            addReplyBulk(c,ele);",
          "new_line_content": "            robj *ele;",
          "content_same": false
        },
        {
          "line": 5302,
          "old_api": "deleteKey",
          "new_api": null,
          "old_text": "deleteKey(c->db,dstkey)",
          "new_text": null,
          "old_line_content": "        deleteKey(c->db,dstkey);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 5303,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize((dict*)dstset->ptr)",
          "new_text": null,
          "old_line_content": "        if (dictSize((dict*)dstset->ptr) > 0) {",
          "new_line_content": "        /* If we have a target key where to store the resulting set",
          "content_same": false
        },
        {
          "line": 5304,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(c->db->dict,dstkey,dstset)",
          "new_text": null,
          "old_line_content": "            dictAdd(c->db->dict,dstkey,dstset);",
          "new_line_content": "         * create this key with the result set inside */",
          "content_same": false
        },
        {
          "line": 5313,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(dv)",
          "new_text": null,
          "old_line_content": "    zfree(dv);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5317,
          "old_api": "sunionDiffGenericCommand",
          "new_api": null,
          "old_text": "sunionDiffGenericCommand(c,c->argv+1,c->argc-1,NULL,REDIS_OP_UNION)",
          "new_text": null,
          "old_line_content": "    sunionDiffGenericCommand(c,c->argv+1,c->argc-1,NULL,REDIS_OP_UNION);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5321,
          "old_api": "sunionDiffGenericCommand",
          "new_api": null,
          "old_text": "sunionDiffGenericCommand(c,c->argv+2,c->argc-2,c->argv[1],REDIS_OP_UNION)",
          "new_text": null,
          "old_line_content": "    sunionDiffGenericCommand(c,c->argv+2,c->argc-2,c->argv[1],REDIS_OP_UNION);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5325,
          "old_api": "sunionDiffGenericCommand",
          "new_api": null,
          "old_text": "sunionDiffGenericCommand(c,c->argv+1,c->argc-1,NULL,REDIS_OP_DIFF)",
          "new_text": null,
          "old_line_content": "    sunionDiffGenericCommand(c,c->argv+1,c->argc-1,NULL,REDIS_OP_DIFF);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5329,
          "old_api": "sunionDiffGenericCommand",
          "new_api": null,
          "old_text": "sunionDiffGenericCommand(c,c->argv+2,c->argc-2,c->argv[1],REDIS_OP_DIFF)",
          "new_text": null,
          "old_line_content": "    sunionDiffGenericCommand(c,c->argv+2,c->argc-2,c->argv[1],REDIS_OP_DIFF);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5352,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*zn))",
          "new_text": null,
          "old_line_content": "    zskiplistNode *zn = zmalloc(sizeof(*zn));",
          "new_line_content": " * from tail to head, useful for ZREVRANGE. */",
          "content_same": false
        },
        {
          "line": 5354,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(zskiplistNode*) * level)",
          "new_text": null,
          "old_line_content": "    zn->forward = zmalloc(sizeof(zskiplistNode*) * level);",
          "new_line_content": "static zskiplistNode *zslCreateNode(int level, double score, robj *obj) {",
          "content_same": false
        },
        {
          "line": 5356,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(unsigned int) * (level - 1))",
          "new_text": null,
          "old_line_content": "        zn->span = zmalloc(sizeof(unsigned int) * (level - 1));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5366,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*zsl))",
          "new_text": null,
          "old_line_content": "    zsl = zmalloc(sizeof(*zsl));",
          "new_line_content": "    int j;",
          "content_same": false
        },
        {
          "line": 5383,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(node->obj)",
          "new_text": null,
          "old_line_content": "    decrRefCount(node->obj);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5384,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(node->forward)",
          "new_text": null,
          "old_line_content": "    zfree(node->forward);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5385,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(node->span)",
          "new_text": null,
          "old_line_content": "    zfree(node->span);",
          "new_line_content": "static void zslFreeNode(zskiplistNode *node) {",
          "content_same": false
        },
        {
          "line": 5392,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(zsl->header->forward)",
          "new_text": null,
          "old_line_content": "    zfree(zsl->header->forward);",
          "new_line_content": "static void zslFree(zskiplist *zsl) {",
          "content_same": false
        },
        {
          "line": 5393,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(zsl->header->span)",
          "new_text": null,
          "old_line_content": "    zfree(zsl->header->span);",
          "new_line_content": "    zskiplistNode *node = zsl->header->forward[0], *next;",
          "content_same": false
        },
        {
          "line": 5394,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(zsl->header)",
          "new_text": null,
          "old_line_content": "    zfree(zsl->header);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5405,
          "old_api": "random",
          "new_api": null,
          "old_text": "random()",
          "new_text": null,
          "old_line_content": "    while ((random()&0xFFFF) < (ZSKIPLIST_P * 0xFFFF))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5423,
          "old_api": "compareStringObjects",
          "new_api": null,
          "old_text": "compareStringObjects(x->forward[i]->obj,obj)",
          "new_text": null,
          "old_line_content": "                compareStringObjects(x->forward[i]->obj,obj) < 0))) {",
          "new_line_content": "        while (x->forward[i] &&",
          "content_same": false
        },
        {
          "line": 5433,
          "old_api": "zslRandomLevel",
          "new_api": null,
          "old_text": "zslRandomLevel()",
          "new_text": null,
          "old_line_content": "    level = zslRandomLevel();",
          "new_line_content": "     * scores, and the re-insertion of score and redis object should never",
          "content_same": false
        },
        {
          "line": 5442,
          "old_api": "zslCreateNode",
          "new_api": null,
          "old_text": "zslCreateNode(level,score,obj)",
          "new_text": null,
          "old_line_content": "    x = zslCreateNode(level,score,obj);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5502,
          "old_api": "compareStringObjects",
          "new_api": null,
          "old_text": "compareStringObjects(x->forward[i]->obj,obj)",
          "new_text": null,
          "old_line_content": "                compareStringObjects(x->forward[i]->obj,obj) < 0)))",
          "new_line_content": "        while (x->forward[i] &&",
          "content_same": false
        },
        {
          "line": 5509,
          "old_api": "equalStringObjects",
          "new_api": null,
          "old_text": "equalStringObjects(x->obj,obj)",
          "new_text": null,
          "old_line_content": "    if (x && score == x->score && equalStringObjects(x->obj,obj)) {",
          "new_line_content": "    /* We may have multiple elements with the same score, what we need",
          "content_same": false
        },
        {
          "line": 5510,
          "old_api": "zslDeleteNode",
          "new_api": null,
          "old_text": "zslDeleteNode(zsl, x, update)",
          "new_text": null,
          "old_line_content": "        zslDeleteNode(zsl, x, update);",
          "new_line_content": "     * is to find the element with both the right score and object. */",
          "content_same": false
        },
        {
          "line": 5511,
          "old_api": "zslFreeNode",
          "new_api": null,
          "old_text": "zslFreeNode(x)",
          "new_text": null,
          "old_line_content": "        zslFreeNode(x);",
          "new_line_content": "    x = x->forward[0];",
          "content_same": false
        },
        {
          "line": 5539,
          "old_api": "zslDeleteNode",
          "new_api": null,
          "old_text": "zslDeleteNode(zsl, x, update)",
          "new_text": null,
          "old_line_content": "        zslDeleteNode(zsl, x, update);",
          "new_line_content": "    x = x->forward[0];",
          "content_same": false
        },
        {
          "line": 5540,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(dict,x->obj)",
          "new_text": null,
          "old_line_content": "        dictDelete(dict,x->obj);",
          "new_line_content": "    while (x && x->score <= max) {",
          "content_same": false
        },
        {
          "line": 5541,
          "old_api": "zslFreeNode",
          "new_api": null,
          "old_text": "zslFreeNode(x)",
          "new_text": null,
          "old_line_content": "        zslFreeNode(x);",
          "new_line_content": "        zskiplistNode *next = x->forward[0];",
          "content_same": false
        },
        {
          "line": 5568,
          "old_api": "zslDeleteNode",
          "new_api": null,
          "old_text": "zslDeleteNode(zsl, x, update)",
          "new_text": null,
          "old_line_content": "        zslDeleteNode(zsl, x, update);",
          "new_line_content": "    x = x->forward[0];",
          "content_same": false
        },
        {
          "line": 5569,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(dict,x->obj)",
          "new_text": null,
          "old_line_content": "        dictDelete(dict,x->obj);",
          "new_line_content": "    while (x && traversed <= end) {",
          "content_same": false
        },
        {
          "line": 5570,
          "old_api": "zslFreeNode",
          "new_api": null,
          "old_text": "zslFreeNode(x)",
          "new_text": null,
          "old_line_content": "        zslFreeNode(x);",
          "new_line_content": "        zskiplistNode *next = x->forward[0];",
          "content_same": false
        },
        {
          "line": 5608,
          "old_api": "compareStringObjects",
          "new_api": null,
          "old_text": "compareStringObjects(x->forward[i]->obj,o)",
          "new_text": null,
          "old_line_content": "                compareStringObjects(x->forward[i]->obj,o) <= 0))) {",
          "new_line_content": "        while (x->forward[i] &&",
          "content_same": false
        },
        {
          "line": 5614,
          "old_api": "equalStringObjects",
          "new_api": null,
          "old_text": "equalStringObjects(x->obj,o)",
          "new_text": null,
          "old_line_content": "        if (x->obj && equalStringObjects(x->obj,o)) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5651,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,key)",
          "new_text": null,
          "old_line_content": "    zsetobj = lookupKeyWrite(c->db,key);",
          "new_line_content": "    zset *zs;",
          "content_same": false
        },
        {
          "line": 5653,
          "old_api": "createZsetObject",
          "new_api": null,
          "old_text": "createZsetObject()",
          "new_text": null,
          "old_line_content": "        zsetobj = createZsetObject();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5655,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(key)",
          "new_text": null,
          "old_line_content": "        incrRefCount(key);",
          "new_line_content": "    if (zsetobj == NULL) {",
          "content_same": false
        },
        {
          "line": 5667,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(double))",
          "new_text": null,
          "old_line_content": "    score = zmalloc(sizeof(double));",
          "new_line_content": "    /* Ok now since we implement both ZADD and ZINCRBY here the code",
          "content_same": false
        },
        {
          "line": 5672,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(zs->dict,ele)",
          "new_text": null,
          "old_line_content": "        de = dictFind(zs->dict,ele);",
          "new_line_content": "        dictEntry *de;",
          "content_same": false
        },
        {
          "line": 5674,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "            double *oldscore = dictGetEntryVal(de);",
          "new_line_content": "        /* Read the old score. If the element was not present starts from 0 */",
          "content_same": false
        },
        {
          "line": 5685,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(zs->dict,ele,score)",
          "new_text": null,
          "old_line_content": "    if (dictAdd(zs->dict,ele,score) == DICT_OK) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5687,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(ele)",
          "new_text": null,
          "old_line_content": "        incrRefCount(ele); /* added to hash */",
          "new_line_content": "     * to both ZADD and ZINCRBY... */",
          "content_same": false
        },
        {
          "line": 5689,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(ele)",
          "new_text": null,
          "old_line_content": "        incrRefCount(ele); /* added to skiplist */",
          "new_line_content": "        /* case 1: New element */",
          "content_same": false
        },
        {
          "line": 5694,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.cone)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.cone);",
          "new_line_content": "        if (doincrement)",
          "content_same": false
        },
        {
          "line": 5700,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(zs->dict,ele)",
          "new_text": null,
          "old_line_content": "        de = dictFind(zs->dict,ele);",
          "new_line_content": "        double *oldscore;",
          "content_same": false
        },
        {
          "line": 5701,
          "old_api": "redisAssert",
          "new_api": null,
          "old_text": "redisAssert(de != NULL)",
          "new_text": null,
          "old_line_content": "        redisAssert(de != NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5702,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "        oldscore = dictGetEntryVal(de);",
          "new_line_content": "        /* case 2: Score update operation */",
          "content_same": false
        },
        {
          "line": 5707,
          "old_api": "zslDelete",
          "new_api": null,
          "old_text": "zslDelete(zs->zsl,*oldscore,ele)",
          "new_text": null,
          "old_line_content": "            deleted = zslDelete(zs->zsl,*oldscore,ele);",
          "new_line_content": "            int deleted;",
          "content_same": false
        },
        {
          "line": 5708,
          "old_api": "redisAssert",
          "new_api": null,
          "old_text": "redisAssert(deleted != 0)",
          "new_text": null,
          "old_line_content": "            redisAssert(deleted != 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5709,
          "old_api": "zslInsert",
          "new_api": null,
          "old_text": "zslInsert(zs->zsl,*score,ele)",
          "new_text": null,
          "old_line_content": "            zslInsert(zs->zsl,*score,ele);",
          "new_line_content": "            /* Remove and insert the element in the skip list with new score */",
          "content_same": false
        },
        {
          "line": 5720,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.czero);",
          "new_line_content": "        if (doincrement)",
          "content_same": false
        },
        {
          "line": 5727,
          "old_api": "getDoubleFromObjectOrReply",
          "new_api": null,
          "old_text": "getDoubleFromObjectOrReply(c, c->argv[2], &scoreval, NULL)",
          "new_text": null,
          "old_line_content": "    if (getDoubleFromObjectOrReply(c, c->argv[2], &scoreval, NULL) != REDIS_OK) return;",
          "new_line_content": "static void zaddCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 5728,
          "old_api": "zaddGenericCommand",
          "new_api": null,
          "old_text": "zaddGenericCommand(c,c->argv[1],c->argv[3],scoreval,0)",
          "new_text": null,
          "old_line_content": "    zaddGenericCommand(c,c->argv[1],c->argv[3],scoreval,0);",
          "new_line_content": "    double scoreval;",
          "content_same": false
        },
        {
          "line": 5734,
          "old_api": "getDoubleFromObjectOrReply",
          "new_api": null,
          "old_text": "getDoubleFromObjectOrReply(c, c->argv[2], &scoreval, NULL)",
          "new_text": null,
          "old_line_content": "    if (getDoubleFromObjectOrReply(c, c->argv[2], &scoreval, NULL) != REDIS_OK) return;",
          "new_line_content": "static void zincrbyCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 5735,
          "old_api": "zaddGenericCommand",
          "new_api": null,
          "old_text": "zaddGenericCommand(c,c->argv[1],c->argv[3],scoreval,1)",
          "new_text": null,
          "old_line_content": "    zaddGenericCommand(c,c->argv[1],c->argv[3],scoreval,1);",
          "new_line_content": "    double scoreval;",
          "content_same": false
        },
        {
          "line": 5745,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": null,
          "old_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.czero)",
          "new_text": null,
          "old_line_content": "    if ((zsetobj = lookupKeyWriteOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "new_line_content": "    double *oldscore;",
          "content_same": false
        },
        {
          "line": 5746,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,zsetobj,REDIS_ZSET)",
          "new_text": null,
          "old_line_content": "        checkType(c,zsetobj,REDIS_ZSET)) return;",
          "new_line_content": "    int deleted;",
          "content_same": false
        },
        {
          "line": 5751,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "    zs = zsetobj->ptr;",
          "content_same": false
        },
        {
          "line": 5755,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "    oldscore = dictGetEntryVal(de);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 5756,
          "old_api": "zslDelete",
          "new_api": null,
          "old_text": "zslDelete(zs->zsl,*oldscore,c->argv[2])",
          "new_text": null,
          "old_line_content": "    deleted = zslDelete(zs->zsl,*oldscore,c->argv[2]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5757,
          "old_api": "redisAssert",
          "new_api": null,
          "old_text": "redisAssert(deleted != 0)",
          "new_text": null,
          "old_line_content": "    redisAssert(deleted != 0);",
          "new_line_content": "    /* Delete from the skiplist */",
          "content_same": false
        },
        {
          "line": 5761,
          "old_api": "dictResize",
          "new_api": null,
          "old_text": "dictResize(zs->dict)",
          "new_text": null,
          "old_line_content": "    if (htNeedsResize(zs->dict)) dictResize(zs->dict);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5762,
          "old_api": "deleteKey",
          "new_api": null,
          "old_text": "deleteKey(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    if (dictSize(zs->dict) == 0) deleteKey(c->db,c->argv[1]);",
          "new_line_content": "    /* Delete from the hash table */",
          "content_same": false
        },
        {
          "line": 5774,
          "old_api": "getDoubleFromObjectOrReply",
          "new_api": null,
          "old_text": "getDoubleFromObjectOrReply(c, c->argv[2], &min, NULL)",
          "new_text": null,
          "old_line_content": "    if ((getDoubleFromObjectOrReply(c, c->argv[2], &min, NULL) != REDIS_OK) ||",
          "new_line_content": "    robj *zsetobj;",
          "content_same": false
        },
        {
          "line": 5775,
          "old_api": "getDoubleFromObjectOrReply",
          "new_api": null,
          "old_text": "getDoubleFromObjectOrReply(c, c->argv[3], &max, NULL)",
          "new_text": null,
          "old_line_content": "        (getDoubleFromObjectOrReply(c, c->argv[3], &max, NULL) != REDIS_OK)) return;",
          "new_line_content": "    zset *zs;",
          "content_same": false
        },
        {
          "line": 5782,
          "old_api": "dictResize",
          "new_api": null,
          "old_text": "dictResize(zs->dict)",
          "new_text": null,
          "old_line_content": "    if (htNeedsResize(zs->dict)) dictResize(zs->dict);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5783,
          "old_api": "deleteKey",
          "new_api": null,
          "old_text": "deleteKey(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    if (dictSize(zs->dict) == 0) deleteKey(c->db,c->argv[1]);",
          "new_line_content": "    zs = zsetobj->ptr;",
          "content_same": false
        },
        {
          "line": 5796,
          "old_api": "getLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongFromObjectOrReply(c, c->argv[2], &start, NULL)",
          "new_text": null,
          "old_line_content": "    if ((getLongFromObjectOrReply(c, c->argv[2], &start, NULL) != REDIS_OK) ||",
          "new_line_content": "    robj *zsetobj;",
          "content_same": false
        },
        {
          "line": 5797,
          "old_api": "getLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongFromObjectOrReply(c, c->argv[3], &end, NULL)",
          "new_text": null,
          "old_line_content": "        (getLongFromObjectOrReply(c, c->argv[3], &end, NULL) != REDIS_OK)) return;",
          "new_line_content": "    zset *zs;",
          "content_same": false
        },
        {
          "line": 5812,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5819,
          "old_api": "zslDeleteRangeByRank",
          "new_api": null,
          "old_text": "zslDeleteRangeByRank(zs->zsl,start+1,end+1,zs->dict)",
          "new_text": null,
          "old_line_content": "    deleted = zslDeleteRangeByRank(zs->zsl,start+1,end+1,zs->dict);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5820,
          "old_api": "dictResize",
          "new_api": null,
          "old_text": "dictResize(zs->dict)",
          "new_text": null,
          "old_line_content": "    if (htNeedsResize(zs->dict)) dictResize(zs->dict);",
          "new_line_content": "    /* increment start and end because zsl*Rank functions",
          "content_same": false
        },
        {
          "line": 5821,
          "old_api": "deleteKey",
          "new_api": null,
          "old_text": "deleteKey(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    if (dictSize(zs->dict) == 0) deleteKey(c->db,c->argv[1]);",
          "new_line_content": "     * use 1-based rank */",
          "content_same": false
        },
        {
          "line": 5834,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(d1->dict)",
          "new_text": null,
          "old_line_content": "    size1 = d1->dict ? dictSize(d1->dict) : 0;",
          "new_line_content": "static int qsortCompareZsetopsrcByCardinality(const void *s1, const void *s2) {",
          "content_same": false
        },
        {
          "line": 5835,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(d2->dict)",
          "new_text": null,
          "old_line_content": "    size2 = d2->dict ? dictSize(d2->dict) : 0;",
          "new_line_content": "    zsetopsrc *d1 = (void*) s1, *d2 = (void*) s2;",
          "content_same": false
        },
        {
          "line": 5852,
          "old_api": "redisPanic",
          "new_api": null,
          "old_text": "redisPanic(\"Unknown ZUNION/INTER aggregate type\")",
          "new_text": null,
          "old_line_content": "        redisPanic(\"Unknown ZUNION/INTER aggregate type\");",
          "new_line_content": "        *target = val > *target ? val : *target;",
          "content_same": false
        },
        {
          "line": 5866,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "    zsetnum = atoi(c->argv[2]->ptr);",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 5868,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR at least 1 input key is needed for ZUNION/ZINTER\\r\\n\")",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(\"-ERR at least 1 input key is needed for ZUNION/ZINTER\\r\\n\"));",
          "new_line_content": "    /* expect zsetnum input keys to be given */",
          "content_same": false
        },
        {
          "line": 5874,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.syntaxerr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5879,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(zsetopsrc) * zsetnum)",
          "new_text": null,
          "old_line_content": "    src = zmalloc(sizeof(zsetopsrc) * zsetnum);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5881,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[j])",
          "new_text": null,
          "old_line_content": "        robj *zsetobj = lookupKeyWrite(c->db,c->argv[j]);",
          "new_line_content": "    /* read keys to be used for input */",
          "content_same": false
        },
        {
          "line": 5886,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(src)",
          "new_text": null,
          "old_line_content": "                zfree(src);",
          "new_line_content": "            src[i].dict = NULL;",
          "content_same": false
        },
        {
          "line": 5887,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "                addReply(c,shared.wrongtypeerr);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 5902,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"weights\")",
          "new_text": null,
          "old_line_content": "            if (remaining >= (zsetnum + 1) && !strcasecmp(c->argv[j]->ptr,\"weights\")) {",
          "new_line_content": "        int remaining = c->argc - j;",
          "content_same": false
        },
        {
          "line": 5910,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"sum\")",
          "new_text": null,
          "old_line_content": "                if (!strcasecmp(c->argv[j]->ptr,\"sum\")) {",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 5912,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"min\")",
          "new_text": null,
          "old_line_content": "                } else if (!strcasecmp(c->argv[j]->ptr,\"min\")) {",
          "new_line_content": "                j++; remaining--;",
          "content_same": false
        },
        {
          "line": 5914,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"max\")",
          "new_text": null,
          "old_line_content": "                } else if (!strcasecmp(c->argv[j]->ptr,\"max\")) {",
          "new_line_content": "                    aggregate = REDIS_AGGR_SUM;",
          "content_same": false
        },
        {
          "line": 5918,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "                    addReply(c,shared.syntaxerr);",
          "new_line_content": "                    aggregate = REDIS_AGGR_MAX;",
          "content_same": false
        },
        {
          "line": 5923,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(src)",
          "new_text": null,
          "old_line_content": "                zfree(src);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 5924,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "                addReply(c,shared.syntaxerr);",
          "new_line_content": "                j++; remaining--;",
          "content_same": false
        },
        {
          "line": 5932,
          "old_api": "qsort",
          "new_api": null,
          "old_text": "qsort(src,zsetnum,sizeof(zsetopsrc), qsortCompareZsetopsrcByCardinality)",
          "new_text": null,
          "old_line_content": "    qsort(src,zsetnum,sizeof(zsetopsrc), qsortCompareZsetopsrcByCardinality);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5934,
          "old_api": "createZsetObject",
          "new_api": null,
          "old_text": "createZsetObject()",
          "new_text": null,
          "old_line_content": "    dstobj = createZsetObject();",
          "new_line_content": "     * algorithm's performance */",
          "content_same": false
        },
        {
          "line": 5939,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(src[0].dict)",
          "new_text": null,
          "old_line_content": "        if (src[0].dict && dictSize(src[0].dict) > 0) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5943,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "            while((de = dictNext(di)) != NULL) {",
          "new_line_content": "            /* precondition: as src[0].dict is non-empty and the zsets are ordered",
          "content_same": false
        },
        {
          "line": 5944,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(double))",
          "new_text": null,
          "old_line_content": "                double *score = zmalloc(sizeof(double)), value;",
          "new_line_content": "             * from small to large, all src[i > 0].dict are non-empty too */",
          "content_same": false
        },
        {
          "line": 5950,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(other)",
          "new_text": null,
          "old_line_content": "                        value = src[j].weight * (*(double*)dictGetEntryVal(other));",
          "new_line_content": "                for (j = 1; j < zsetnum; j++) {",
          "content_same": false
        },
        {
          "line": 5959,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(score)",
          "new_text": null,
          "old_line_content": "                    zfree(score);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5961,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "                    robj *o = dictGetEntryKey(de);",
          "new_line_content": "                if (j != zsetnum) {",
          "content_same": false
        },
        {
          "line": 5963,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(o)",
          "new_text": null,
          "old_line_content": "                    incrRefCount(o); /* added to dictionary */",
          "new_line_content": "                } else {",
          "content_same": false
        },
        {
          "line": 5974,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(src[i].dict)",
          "new_text": null,
          "old_line_content": "            di = dictGetIterator(src[i].dict);",
          "new_line_content": "        for (i = 0; i < zsetnum; i++) {",
          "content_same": false
        },
        {
          "line": 5975,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "            while((de = dictNext(di)) != NULL) {",
          "new_line_content": "            if (!src[i].dict) continue;",
          "content_same": false
        },
        {
          "line": 5979,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(double))",
          "new_text": null,
          "old_line_content": "                double *score = zmalloc(sizeof(double)), value;",
          "new_line_content": "                /* skip key when already processed */",
          "content_same": false
        },
        {
          "line": 5985,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "                    dictEntry *other = dictFind(src[j].dict,dictGetEntryKey(de));",
          "new_line_content": "                /* because the zsets are sorted by size, its only possible",
          "content_same": false
        },
        {
          "line": 5987,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(other)",
          "new_text": null,
          "old_line_content": "                        value = src[j].weight * (*(double*)dictGetEntryVal(other));",
          "new_line_content": "                for (j = (i+1); j < zsetnum; j++) {",
          "content_same": false
        },
        {
          "line": 5992,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(de)",
          "new_text": null,
          "old_line_content": "                robj *o = dictGetEntryKey(de);",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 5993,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(dstzset->dict,o,score)",
          "new_text": null,
          "old_line_content": "                dictAdd(dstzset->dict,o,score);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 5994,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(o)",
          "new_text": null,
          "old_line_content": "                incrRefCount(o); /* added to dictionary */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6002,
          "old_api": "redisAssert",
          "new_api": null,
          "old_text": "redisAssert(op == REDIS_OP_INTER || op == REDIS_OP_UNION)",
          "new_text": null,
          "old_line_content": "        redisAssert(op == REDIS_OP_INTER || op == REDIS_OP_UNION);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6007,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(c->db->dict,dstkey,dstobj)",
          "new_text": null,
          "old_line_content": "        dictAdd(c->db->dict,dstkey,dstobj);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6009,
          "old_api": "addReplyLong",
          "new_api": null,
          "old_text": "addReplyLong(c, dstzset->zsl->length)",
          "new_text": null,
          "old_line_content": "        addReplyLong(c, dstzset->zsl->length);",
          "new_line_content": "    if (dstzset->zsl->length) {",
          "content_same": false
        },
        {
          "line": 6013,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c, shared.czero);",
          "new_line_content": "        server.dirty++;",
          "content_same": false
        },
        {
          "line": 6019,
          "old_api": "zunionInterGenericCommand",
          "new_api": null,
          "old_text": "zunionInterGenericCommand(c,c->argv[1], REDIS_OP_UNION)",
          "new_text": null,
          "old_line_content": "    zunionInterGenericCommand(c,c->argv[1], REDIS_OP_UNION);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6023,
          "old_api": "zunionInterGenericCommand",
          "new_api": null,
          "old_text": "zunionInterGenericCommand(c,c->argv[1], REDIS_OP_INTER)",
          "new_text": null,
          "old_line_content": "    zunionInterGenericCommand(c,c->argv[1], REDIS_OP_INTER);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6038,
          "old_api": "getLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongFromObjectOrReply(c, c->argv[2], &start, NULL)",
          "new_text": null,
          "old_line_content": "    if ((getLongFromObjectOrReply(c, c->argv[2], &start, NULL) != REDIS_OK) ||",
          "new_line_content": "    zskiplistNode *ln;",
          "content_same": false
        },
        {
          "line": 6039,
          "old_api": "getLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongFromObjectOrReply(c, c->argv[3], &end, NULL)",
          "new_text": null,
          "old_line_content": "        (getLongFromObjectOrReply(c, c->argv[3], &end, NULL) != REDIS_OK)) return;",
          "new_line_content": "    robj *ele;",
          "content_same": false
        },
        {
          "line": 6048,
          "old_api": "lookupKeyReadOrReply",
          "new_api": null,
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.emptymultibulk)",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.emptymultibulk)) == NULL",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 6049,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_ZSET)",
          "new_text": null,
          "old_line_content": "         || checkType(c,o,REDIS_ZSET)) return;",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6063,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.emptymultibulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.emptymultibulk);",
          "new_line_content": "    /* indexes sanity checks */",
          "content_same": false
        },
        {
          "line": 6072,
          "old_api": "zslGetElementByRank",
          "new_api": null,
          "old_text": "zslGetElementByRank(zsl, llen-start)",
          "new_text": null,
          "old_line_content": "        ln = start == 0 ? zsl->tail : zslGetElementByRank(zsl, llen-start);",
          "new_line_content": "    /* check if starting point is trivial, before searching",
          "content_same": false
        },
        {
          "line": 6079,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6083,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,ele)",
          "new_text": null,
          "old_line_content": "        addReplyBulk(c,ele);",
          "new_line_content": "        withscores ? (rangelen*2) : rangelen));",
          "content_same": false
        },
        {
          "line": 6085,
          "old_api": "addReplyDouble",
          "new_api": null,
          "old_text": "addReplyDouble(c,ln->score)",
          "new_text": null,
          "old_line_content": "            addReplyDouble(c,ln->score);",
          "new_line_content": "        ele = ln->obj;",
          "content_same": false
        },
        {
          "line": 6091,
          "old_api": "zrangeGenericCommand",
          "new_api": null,
          "old_text": "zrangeGenericCommand(c,0)",
          "new_text": null,
          "old_line_content": "    zrangeGenericCommand(c,0);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6095,
          "old_api": "zrangeGenericCommand",
          "new_api": null,
          "old_text": "zrangeGenericCommand(c,1)",
          "new_text": null,
          "old_line_content": "    zrangeGenericCommand(c,1);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6113,
          "old_api": "strtod",
          "new_api": null,
          "old_text": "strtod((char*)c->argv[2]->ptr+1,NULL)",
          "new_text": null,
          "old_line_content": "        min = strtod((char*)c->argv[2]->ptr+1,NULL);",
          "new_line_content": "     * ZRANGEBYSCORE zset (1.5 (2.5 will match min < x < max",
          "content_same": false
        },
        {
          "line": 6129,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[c->argc-1]->ptr,\"withscores\")",
          "new_text": null,
          "old_line_content": "        if (strcasecmp(c->argv[c->argc-1]->ptr,\"withscores\") == 0)",
          "new_line_content": "     * the name ZCOUNT then we are sure that c->argc == 4, so we'll never",
          "content_same": false
        },
        {
          "line": 6137,
          "old_api": "addReplySds",
          "new_api": null,
          "old_text": "addReplySds(c,\n            sdsnew(\"-ERR wrong number of arguments for ZRANGEBYSCORE\\r\\n\"))",
          "new_text": null,
          "old_line_content": "        addReplySds(c,",
          "new_line_content": "    if (c->argc != (4 + withscores) && c->argc != (7 + withscores))",
          "content_same": false
        },
        {
          "line": 6138,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR wrong number of arguments for ZRANGEBYSCORE\\r\\n\")",
          "new_text": null,
          "old_line_content": "            sdsnew(\"-ERR wrong number of arguments for ZRANGEBYSCORE\\r\\n\"));",
          "new_line_content": "        badsyntax = 1;",
          "content_same": false
        },
        {
          "line": 6143,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[4]->ptr,\"limit\")",
          "new_text": null,
          "old_line_content": "    if (c->argc == (7 + withscores) && strcasecmp(c->argv[4]->ptr,\"limit\")) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6144,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.syntaxerr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6148,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[6]->ptr)",
          "new_text": null,
          "old_line_content": "        limit = atoi(c->argv[6]->ptr);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 6153,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    o = lookupKeyRead(c->db,c->argv[1]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6155,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,justcount ? shared.czero : shared.emptymultibulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,justcount ? shared.czero : shared.emptymultibulk);",
          "new_line_content": "    /* Ok, lookup the key and get the range */",
          "content_same": false
        },
        {
          "line": 6168,
          "old_api": "zslFirstWithScore",
          "new_api": null,
          "old_text": "zslFirstWithScore(zsl,min)",
          "new_text": null,
          "old_line_content": "            ln = zslFirstWithScore(zsl,min);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6173,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,justcount ? shared.czero : shared.emptymultibulk)",
          "new_text": null,
          "old_line_content": "                addReply(c,justcount ? shared.czero : shared.emptymultibulk);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6182,
          "old_api": "createObject",
          "new_api": null,
          "old_text": "createObject(REDIS_STRING,NULL)",
          "new_text": null,
          "old_line_content": "                lenobj = createObject(REDIS_STRING,NULL);",
          "new_line_content": "             * the multi-bulk length in the output buffer, and will \"fix\"",
          "content_same": false
        },
        {
          "line": 6183,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,lenobj)",
          "new_text": null,
          "old_line_content": "                addReply(c,lenobj);",
          "new_line_content": "             * it later */",
          "content_same": false
        },
        {
          "line": 6184,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(lenobj)",
          "new_text": null,
          "old_line_content": "                decrRefCount(lenobj);",
          "new_line_content": "            if (!justcount) {",
          "content_same": false
        },
        {
          "line": 6196,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,ele)",
          "new_text": null,
          "old_line_content": "                    addReplyBulk(c,ele);",
          "new_line_content": "                if (limit == 0) break;",
          "content_same": false
        },
        {
          "line": 6198,
          "old_api": "addReplyDouble",
          "new_api": null,
          "old_text": "addReplyDouble(c,ln->score)",
          "new_text": null,
          "old_line_content": "                        addReplyDouble(c,ln->score);",
          "new_line_content": "                    ele = ln->obj;",
          "content_same": false
        },
        {
          "line": 6205,
          "old_api": "addReplyLong",
          "new_api": null,
          "old_text": "addReplyLong(c,(long)rangelen)",
          "new_text": null,
          "old_line_content": "                addReplyLong(c,(long)rangelen);",
          "new_line_content": "                if (limit > 0) limit--;",
          "content_same": false
        },
        {
          "line": 6207,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "                lenobj->ptr = sdscatprintf(sdsempty(),\"*%lu\\r\\n\",",
          "new_line_content": "            if (justcount) {",
          "content_same": false
        },
        {
          "line": 6215,
          "old_api": "genericZrangebyscoreCommand",
          "new_api": null,
          "old_text": "genericZrangebyscoreCommand(c,0)",
          "new_text": null,
          "old_line_content": "    genericZrangebyscoreCommand(c,0);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6219,
          "old_api": "genericZrangebyscoreCommand",
          "new_api": null,
          "old_text": "genericZrangebyscoreCommand(c,1)",
          "new_text": null,
          "old_line_content": "    genericZrangebyscoreCommand(c,1);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6226,
          "old_api": "lookupKeyReadOrReply",
          "new_api": null,
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "new_line_content": "    robj *o;",
          "content_same": false
        },
        {
          "line": 6227,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_ZSET)",
          "new_text": null,
          "old_line_content": "        checkType(c,o,REDIS_ZSET)) return;",
          "new_line_content": "    zset *zs;",
          "content_same": false
        },
        {
          "line": 6238,
          "old_api": "lookupKeyReadOrReply",
          "new_api": null,
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "new_line_content": "    zset *zs;",
          "content_same": false
        },
        {
          "line": 6239,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_ZSET)",
          "new_text": null,
          "old_line_content": "        checkType(c,o,REDIS_ZSET)) return;",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 6244,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.nullbulk);",
          "new_line_content": "    zs = o->ptr;",
          "content_same": false
        },
        {
          "line": 6246,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "        double *score = dictGetEntryVal(de);",
          "new_line_content": "    if (!de) {",
          "content_same": false
        },
        {
          "line": 6248,
          "old_api": "addReplyDouble",
          "new_api": null,
          "old_text": "addReplyDouble(c,*score)",
          "new_text": null,
          "old_line_content": "        addReplyDouble(c,*score);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 6260,
          "old_api": "lookupKeyReadOrReply",
          "new_api": null,
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "new_line_content": "    unsigned long rank;",
          "content_same": false
        },
        {
          "line": 6261,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_ZSET)",
          "new_text": null,
          "old_line_content": "        checkType(c,o,REDIS_ZSET)) return;",
          "new_line_content": "    double *score;",
          "content_same": false
        },
        {
          "line": 6265,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(zs->dict,c->argv[2])",
          "new_text": null,
          "old_line_content": "    de = dictFind(zs->dict,c->argv[2]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6267,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.nullbulk);",
          "new_line_content": "    zsl = zs->zsl;",
          "content_same": false
        },
        {
          "line": 6271,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "    score = dictGetEntryVal(de);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 6272,
          "old_api": "zslGetRank",
          "new_api": null,
          "old_text": "zslGetRank(zsl, *score, c->argv[2])",
          "new_text": null,
          "old_line_content": "    rank = zslGetRank(zsl, *score, c->argv[2]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6277,
          "old_api": "addReplyLong",
          "new_api": null,
          "old_text": "addReplyLong(c, rank-1)",
          "new_text": null,
          "old_line_content": "            addReplyLong(c, rank-1);",
          "new_line_content": "        if (reverse) {",
          "content_same": false
        },
        {
          "line": 6285,
          "old_api": "zrankGenericCommand",
          "new_api": null,
          "old_text": "zrankGenericCommand(c, 0)",
          "new_text": null,
          "old_line_content": "    zrankGenericCommand(c, 0);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6289,
          "old_api": "zrankGenericCommand",
          "new_api": null,
          "old_text": "zrankGenericCommand(c, 1)",
          "new_text": null,
          "old_line_content": "    zrankGenericCommand(c, 1);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6305,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(argv[i]->ptr)",
          "new_text": null,
          "old_line_content": "            sdslen(argv[i]->ptr) > server.hash_max_zipmap_value)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6307,
          "old_api": "convertToRealHash",
          "new_api": null,
          "old_text": "convertToRealHash(subject)",
          "new_text": null,
          "old_line_content": "            convertToRealHash(subject);",
          "new_line_content": "        if (argv[i]->encoding == REDIS_ENCODING_RAW &&",
          "content_same": false
        },
        {
          "line": 6316,
          "old_api": "tryObjectEncoding",
          "new_api": null,
          "old_text": "tryObjectEncoding(*o1)",
          "new_text": null,
          "old_line_content": "        if (o1) *o1 = tryObjectEncoding(*o1);",
          "new_line_content": "/* Encode given objects in-place when the hash uses a dict. */",
          "content_same": false
        },
        {
          "line": 6317,
          "old_api": "tryObjectEncoding",
          "new_api": null,
          "old_text": "tryObjectEncoding(*o2)",
          "new_text": null,
          "old_line_content": "        if (o2) *o2 = tryObjectEncoding(*o2);",
          "new_line_content": "static void hashTryObjectEncoding(robj *subject, robj **o1, robj **o2) {",
          "content_same": false
        },
        {
          "line": 6329,
          "old_api": "getDecodedObject",
          "new_api": null,
          "old_text": "getDecodedObject(key)",
          "new_text": null,
          "old_line_content": "        key = getDecodedObject(key);",
          "new_line_content": "    if (o->encoding == REDIS_ENCODING_ZIPMAP) {",
          "content_same": false
        },
        {
          "line": 6330,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(key->ptr)",
          "new_text": null,
          "old_line_content": "        if (zipmapGet(o->ptr,key->ptr,sdslen(key->ptr),&v,&vlen)) {",
          "new_line_content": "        unsigned char *v;",
          "content_same": false
        },
        {
          "line": 6331,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject((char*)v,vlen)",
          "new_text": null,
          "old_line_content": "            value = createStringObject((char*)v,vlen);",
          "new_line_content": "        unsigned int vlen;",
          "content_same": false
        },
        {
          "line": 6335,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(o->ptr,key)",
          "new_text": null,
          "old_line_content": "        dictEntry *de = dictFind(o->ptr,key);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6337,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "            value = dictGetEntryVal(de);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 6348,
          "old_api": "getDecodedObject",
          "new_api": null,
          "old_text": "getDecodedObject(key)",
          "new_text": null,
          "old_line_content": "        key = getDecodedObject(key);",
          "new_line_content": " * exists and 0 when it doesn't. */",
          "content_same": false
        },
        {
          "line": 6349,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(key->ptr)",
          "new_text": null,
          "old_line_content": "        if (zipmapExists(o->ptr,key->ptr,sdslen(key->ptr))) {",
          "new_line_content": "static int hashExists(robj *o, robj *key) {",
          "content_same": false
        },
        {
          "line": 6350,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(key)",
          "new_text": null,
          "old_line_content": "            decrRefCount(key);",
          "new_line_content": "    if (o->encoding == REDIS_ENCODING_ZIPMAP) {",
          "content_same": false
        },
        {
          "line": 6355,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(o->ptr,key)",
          "new_text": null,
          "old_line_content": "        if (dictFind(o->ptr,key) != NULL) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6367,
          "old_api": "getDecodedObject",
          "new_api": null,
          "old_text": "getDecodedObject(key)",
          "new_text": null,
          "old_line_content": "        key = getDecodedObject(key);",
          "new_line_content": "static int hashSet(robj *o, robj *key, robj *value) {",
          "content_same": false
        },
        {
          "line": 6368,
          "old_api": "getDecodedObject",
          "new_api": null,
          "old_text": "getDecodedObject(value)",
          "new_text": null,
          "old_line_content": "        value = getDecodedObject(value);",
          "new_line_content": "    int update = 0;",
          "content_same": false
        },
        {
          "line": 6369,
          "old_api": "zipmapSet",
          "new_api": null,
          "old_text": "zipmapSet(o->ptr,\n            key->ptr,sdslen(key->ptr),\n            value->ptr,sdslen(value->ptr), &update)",
          "new_text": null,
          "old_line_content": "        o->ptr = zipmapSet(o->ptr,",
          "new_line_content": "    if (o->encoding == REDIS_ENCODING_ZIPMAP) {",
          "content_same": false
        },
        {
          "line": 6377,
          "old_api": "convertToRealHash",
          "new_api": null,
          "old_text": "convertToRealHash(o)",
          "new_text": null,
          "old_line_content": "            convertToRealHash(o);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6381,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(key)",
          "new_text": null,
          "old_line_content": "            incrRefCount(key);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 6386,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(value)",
          "new_text": null,
          "old_line_content": "        incrRefCount(value);",
          "new_line_content": "            /* Update */",
          "content_same": false
        },
        {
          "line": 6396,
          "old_api": "getDecodedObject",
          "new_api": null,
          "old_text": "getDecodedObject(key)",
          "new_text": null,
          "old_line_content": "        key = getDecodedObject(key);",
          "new_line_content": "static int hashDelete(robj *o, robj *key) {",
          "content_same": false
        },
        {
          "line": 6397,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(key->ptr)",
          "new_text": null,
          "old_line_content": "        o->ptr = zipmapDel(o->ptr,key->ptr,sdslen(key->ptr), &deleted);",
          "new_line_content": "    int deleted = 0;",
          "content_same": false
        },
        {
          "line": 6398,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(key)",
          "new_text": null,
          "old_line_content": "        decrRefCount(key);",
          "new_line_content": "    if (o->encoding == REDIS_ENCODING_ZIPMAP) {",
          "content_same": false
        },
        {
          "line": 6402,
          "old_api": "dictResize",
          "new_api": null,
          "old_text": "dictResize(o->ptr)",
          "new_text": null,
          "old_line_content": "        if (deleted && htNeedsResize(o->ptr)) dictResize(o->ptr);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 6410,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize((dict*)o->ptr)",
          "new_text": null,
          "old_line_content": "        zipmapLen((unsigned char*)o->ptr) : dictSize((dict*)o->ptr);",
          "new_line_content": "/* Return the number of elements in a hash. */",
          "content_same": false
        },
        {
          "line": 6428,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(hashIterator))",
          "new_text": null,
          "old_line_content": "    hashIterator *hi = zmalloc(sizeof(hashIterator));",
          "new_line_content": "} hashIterator;",
          "content_same": false
        },
        {
          "line": 6433,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(subject->ptr)",
          "new_text": null,
          "old_line_content": "        hi->di = dictGetIterator(subject->ptr);",
          "new_line_content": "    if (hi->encoding == REDIS_ENCODING_ZIPMAP) {",
          "content_same": false
        },
        {
          "line": 6435,
          "old_api": "redisAssert",
          "new_api": null,
          "old_text": "redisAssert(NULL)",
          "new_text": null,
          "old_line_content": "        redisAssert(NULL);",
          "new_line_content": "    } else if (hi->encoding == REDIS_ENCODING_HT) {",
          "content_same": false
        },
        {
          "line": 6442,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(hi->di)",
          "new_text": null,
          "old_line_content": "        dictReleaseIterator(hi->di);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6444,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(hi)",
          "new_text": null,
          "old_line_content": "    zfree(hi);",
          "new_line_content": "    if (hi->encoding == REDIS_ENCODING_HT) {",
          "content_same": false
        },
        {
          "line": 6451,
          "old_api": "zipmapNext",
          "new_api": null,
          "old_text": "zipmapNext(hi->zi, &hi->zk, &hi->zklen,\n            &hi->zv, &hi->zvlen)",
          "new_text": null,
          "old_line_content": "        if ((hi->zi = zipmapNext(hi->zi, &hi->zk, &hi->zklen,",
          "new_line_content": " * could be found and REDIS_ERR when the iterator reaches the end. */",
          "content_same": false
        },
        {
          "line": 6465,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject((char*)hi->zk,hi->zklen)",
          "new_text": null,
          "old_line_content": "            o = createStringObject((char*)hi->zk,hi->zklen);",
          "new_line_content": "    robj *o;",
          "content_same": false
        },
        {
          "line": 6467,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject((char*)hi->zv,hi->zvlen)",
          "new_text": null,
          "old_line_content": "            o = createStringObject((char*)hi->zv,hi->zvlen);",
          "new_line_content": "        if (what & REDIS_HASH_KEY) {",
          "content_same": false
        },
        {
          "line": 6471,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(hi->de)",
          "new_text": null,
          "old_line_content": "            o = dictGetEntryKey(hi->de);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6473,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(hi->de)",
          "new_text": null,
          "old_line_content": "            o = dictGetEntryVal(hi->de);",
          "new_line_content": "        if (what & REDIS_HASH_KEY) {",
          "content_same": false
        },
        {
          "line": 6475,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(o)",
          "new_text": null,
          "old_line_content": "        incrRefCount(o);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 6481,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,key)",
          "new_text": null,
          "old_line_content": "    robj *o = lookupKeyWrite(c->db,key);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6483,
          "old_api": "createHashObject",
          "new_api": null,
          "old_text": "createHashObject()",
          "new_text": null,
          "old_line_content": "        o = createHashObject();",
          "new_line_content": "static robj *hashLookupWriteOrCreate(redisClient *c, robj *key) {",
          "content_same": false
        },
        {
          "line": 6485,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(key)",
          "new_text": null,
          "old_line_content": "        incrRefCount(key);",
          "new_line_content": "    if (o == NULL) {",
          "content_same": false
        },
        {
          "line": 6500,
          "old_api": "hashLookupWriteOrCreate",
          "new_api": null,
          "old_text": "hashLookupWriteOrCreate(c,c->argv[1])",
          "new_text": null,
          "old_line_content": "    if ((o = hashLookupWriteOrCreate(c,c->argv[1])) == NULL) return;",
          "new_line_content": "    int update;",
          "content_same": false
        },
        {
          "line": 6501,
          "old_api": "hashTryConversion",
          "new_api": null,
          "old_text": "hashTryConversion(o,c->argv,2,3)",
          "new_text": null,
          "old_line_content": "    hashTryConversion(o,c->argv,2,3);",
          "new_line_content": "    robj *o;",
          "content_same": false
        },
        {
          "line": 6502,
          "old_api": "hashTryObjectEncoding",
          "new_api": null,
          "old_text": "hashTryObjectEncoding(o,&c->argv[2], &c->argv[3])",
          "new_text": null,
          "old_line_content": "    hashTryObjectEncoding(o,&c->argv[2], &c->argv[3]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6510,
          "old_api": "hashLookupWriteOrCreate",
          "new_api": null,
          "old_text": "hashLookupWriteOrCreate(c,c->argv[1])",
          "new_text": null,
          "old_line_content": "    if ((o = hashLookupWriteOrCreate(c,c->argv[1])) == NULL) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6511,
          "old_api": "hashTryConversion",
          "new_api": null,
          "old_text": "hashTryConversion(o,c->argv,2,3)",
          "new_text": null,
          "old_line_content": "    hashTryConversion(o,c->argv,2,3);",
          "new_line_content": "static void hsetnxCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 6518,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.cone)",
          "new_text": null,
          "old_line_content": "        addReply(c, shared.cone);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 6528,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR wrong number of arguments for HMSET\\r\\n\")",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(\"-ERR wrong number of arguments for HMSET\\r\\n\"));",
          "new_line_content": "    robj *o;",
          "content_same": false
        },
        {
          "line": 6532,
          "old_api": "hashLookupWriteOrCreate",
          "new_api": null,
          "old_text": "hashLookupWriteOrCreate(c,c->argv[1])",
          "new_text": null,
          "old_line_content": "    if ((o = hashLookupWriteOrCreate(c,c->argv[1])) == NULL) return;",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 6533,
          "old_api": "hashTryConversion",
          "new_api": null,
          "old_text": "hashTryConversion(o,c->argv,2,c->argc-1)",
          "new_text": null,
          "old_line_content": "    hashTryConversion(o,c->argv,2,c->argc-1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6546,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c,c->argv[3],&incr,NULL)",
          "new_text": null,
          "old_line_content": "    if (getLongLongFromObjectOrReply(c,c->argv[3],&incr,NULL) != REDIS_OK) return;",
          "new_line_content": "    long long value, incr;",
          "content_same": false
        },
        {
          "line": 6547,
          "old_api": "hashLookupWriteOrCreate",
          "new_api": null,
          "old_text": "hashLookupWriteOrCreate(c,c->argv[1])",
          "new_text": null,
          "old_line_content": "    if ((o = hashLookupWriteOrCreate(c,c->argv[1])) == NULL) return;",
          "new_line_content": "    robj *o, *current, *new;",
          "content_same": false
        },
        {
          "line": 6548,
          "old_api": "hashGet",
          "new_api": null,
          "old_text": "hashGet(o,c->argv[2])",
          "new_text": null,
          "old_line_content": "    if ((current = hashGet(o,c->argv[2])) != NULL) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6561,
          "old_api": "hashTryObjectEncoding",
          "new_api": null,
          "old_text": "hashTryObjectEncoding(o,&c->argv[2],NULL)",
          "new_text": null,
          "old_line_content": "    hashTryObjectEncoding(o,&c->argv[2],NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6562,
          "old_api": "hashSet",
          "new_api": null,
          "old_text": "hashSet(o,c->argv[2],new)",
          "new_text": null,
          "old_line_content": "    hashSet(o,c->argv[2],new);",
          "new_line_content": "    value += incr;",
          "content_same": false
        },
        {
          "line": 6570,
          "old_api": "lookupKeyReadOrReply",
          "new_api": null,
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.nullbulk)) == NULL ||",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6571,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_HASH)",
          "new_text": null,
          "old_line_content": "        checkType(c,o,REDIS_HASH)) return;",
          "new_line_content": "static void hgetCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 6575,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(value)",
          "new_text": null,
          "old_line_content": "        decrRefCount(value);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6584,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    o = lookupKeyRead(c->db,c->argv[1]);",
          "new_line_content": "static void hmgetCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 6586,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.wrongtypeerr);",
          "new_line_content": "    robj *o, *value;",
          "content_same": false
        },
        {
          "line": 6592,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",c->argc-2));",
          "new_line_content": "    /* Note the check for o != NULL happens inside the loop. This is",
          "content_same": false
        },
        {
          "line": 6594,
          "old_api": "hashGet",
          "new_api": null,
          "old_text": "hashGet(o,c->argv[i])",
          "new_text": null,
          "old_line_content": "        if (o != NULL && (value = hashGet(o,c->argv[i])) != NULL) {",
          "new_line_content": "     * an empty hash. The reply should then be a series of NULLs. */",
          "content_same": false
        },
        {
          "line": 6596,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(value)",
          "new_text": null,
          "old_line_content": "            decrRefCount(value);",
          "new_line_content": "    for (i = 2; i < c->argc; i++) {",
          "content_same": false
        },
        {
          "line": 6605,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": null,
          "old_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.czero)",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6606,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_HASH)",
          "new_text": null,
          "old_line_content": "        checkType(c,o,REDIS_HASH)) return;",
          "new_line_content": "static void hdelCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 6610,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.cone)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.cone);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6619,
          "old_api": "lookupKeyReadOrReply",
          "new_api": null,
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6620,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_HASH)",
          "new_text": null,
          "old_line_content": "        checkType(c,o,REDIS_HASH)) return;",
          "new_line_content": "static void hlenCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 6630,
          "old_api": "lookupKeyReadOrReply",
          "new_api": null,
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.emptymultibulk)",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.emptymultibulk)) == NULL",
          "new_line_content": "    unsigned long count = 0;",
          "content_same": false
        },
        {
          "line": 6631,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_HASH)",
          "new_text": null,
          "old_line_content": "        || checkType(c,o,REDIS_HASH)) return;",
          "new_line_content": "    hashIterator *hi;",
          "content_same": false
        },
        {
          "line": 6635,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(lenobj)",
          "new_text": null,
          "old_line_content": "    decrRefCount(lenobj);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6642,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(obj)",
          "new_text": null,
          "old_line_content": "            decrRefCount(obj);",
          "new_line_content": "        if (flags & REDIS_HASH_KEY) {",
          "content_same": false
        },
        {
          "line": 6646,
          "old_api": "hashCurrent",
          "new_api": null,
          "old_text": "hashCurrent(hi,REDIS_HASH_VALUE)",
          "new_text": null,
          "old_line_content": "            obj = hashCurrent(hi,REDIS_HASH_VALUE);",
          "new_line_content": "            count++;",
          "content_same": false
        },
        {
          "line": 6647,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,obj)",
          "new_text": null,
          "old_line_content": "            addReplyBulk(c,obj);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6648,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(obj)",
          "new_text": null,
          "old_line_content": "            decrRefCount(obj);",
          "new_line_content": "        if (flags & REDIS_HASH_VALUE) {",
          "content_same": false
        },
        {
          "line": 6652,
          "old_api": "hashReleaseIterator",
          "new_api": null,
          "old_text": "hashReleaseIterator(hi)",
          "new_text": null,
          "old_line_content": "    hashReleaseIterator(hi);",
          "new_line_content": "            count++;",
          "content_same": false
        },
        {
          "line": 6654,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    lenobj->ptr = sdscatprintf(sdsempty(),\"*%lu\\r\\n\",count);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6658,
          "old_api": "genericHgetallCommand",
          "new_api": null,
          "old_text": "genericHgetallCommand(c,REDIS_HASH_KEY)",
          "new_text": null,
          "old_line_content": "    genericHgetallCommand(c,REDIS_HASH_KEY);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6662,
          "old_api": "genericHgetallCommand",
          "new_api": null,
          "old_text": "genericHgetallCommand(c,REDIS_HASH_VALUE)",
          "new_text": null,
          "old_line_content": "    genericHgetallCommand(c,REDIS_HASH_VALUE);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6666,
          "old_api": "genericHgetallCommand",
          "new_api": null,
          "old_text": "genericHgetallCommand(c,REDIS_HASH_KEY|REDIS_HASH_VALUE)",
          "new_text": null,
          "old_line_content": "    genericHgetallCommand(c,REDIS_HASH_KEY|REDIS_HASH_VALUE);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6671,
          "old_api": "lookupKeyReadOrReply",
          "new_api": null,
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6672,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_HASH)",
          "new_text": null,
          "old_line_content": "        checkType(c,o,REDIS_HASH)) return;",
          "new_line_content": "static void hexistsCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 6680,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&hashDictType,NULL)",
          "new_text": null,
          "old_line_content": "    dict *dict = dictCreate(&hashDictType,NULL);",
          "new_line_content": "static void convertToRealHash(robj *o) {",
          "content_same": false
        },
        {
          "line": 6682,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(o->type == REDIS_HASH && o->encoding != REDIS_ENCODING_HT)",
          "new_text": null,
          "old_line_content": "    assert(o->type == REDIS_HASH && o->encoding != REDIS_ENCODING_HT);",
          "new_line_content": "    unsigned int klen, vlen;",
          "content_same": false
        },
        {
          "line": 6684,
          "old_api": "zipmapNext",
          "new_api": null,
          "old_text": "zipmapNext(p,&key,&klen,&val,&vlen)",
          "new_text": null,
          "old_line_content": "    while((p = zipmapNext(p,&key,&klen,&val,&vlen)) != NULL) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6688,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject((char*)val,vlen)",
          "new_text": null,
          "old_line_content": "        valobj = createStringObject((char*)val,vlen);",
          "new_line_content": "        robj *keyobj, *valobj;",
          "content_same": false
        },
        {
          "line": 6689,
          "old_api": "tryObjectEncoding",
          "new_api": null,
          "old_text": "tryObjectEncoding(keyobj)",
          "new_text": null,
          "old_line_content": "        keyobj = tryObjectEncoding(keyobj);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6695,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(zm)",
          "new_text": null,
          "old_line_content": "    zfree(zm);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6701,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(c->db->dict)",
          "new_text": null,
          "old_line_content": "    server.dirty += dictSize(c->db->dict);",
          "new_line_content": "/* ========================= Non type-specific commands  ==================== */",
          "content_same": false
        },
        {
          "line": 6702,
          "old_api": "dictEmpty",
          "new_api": null,
          "old_text": "dictEmpty(c->db->dict)",
          "new_text": null,
          "old_line_content": "    dictEmpty(c->db->dict);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6703,
          "old_api": "dictEmpty",
          "new_api": null,
          "old_text": "dictEmpty(c->db->expires)",
          "new_text": null,
          "old_line_content": "    dictEmpty(c->db->expires);",
          "new_line_content": "static void flushdbCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 6708,
          "old_api": "emptyDb",
          "new_api": null,
          "old_text": "emptyDb()",
          "new_text": null,
          "old_line_content": "    server.dirty += emptyDb();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6709,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.ok);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6719,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*so))",
          "new_text": null,
          "old_line_content": "    redisSortOperation *so = zmalloc(sizeof(*so));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6745,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(subst)",
          "new_text": null,
          "old_line_content": "        incrRefCount(subst);",
          "new_line_content": "     * to implement the \"SORT ... GET #\" feature. */",
          "content_same": false
        },
        {
          "line": 6752,
          "old_api": "getDecodedObject",
          "new_api": null,
          "old_text": "getDecodedObject(subst)",
          "new_text": null,
          "old_line_content": "    subst = getDecodedObject(subst);",
          "new_line_content": "    /* The substitution object may be specially encoded. If so we create",
          "content_same": false
        },
        {
          "line": 6756,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(spat,'*')",
          "new_text": null,
          "old_line_content": "    p = strchr(spat,'*');",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6763,
          "old_api": "strstr",
          "new_api": null,
          "old_text": "strstr(p+1, \"->\")",
          "new_text": null,
          "old_line_content": "    if ((f = strstr(p+1, \"->\")) != NULL) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6764,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(spat)",
          "new_text": null,
          "old_line_content": "        fieldlen = sdslen(spat)-(f-spat);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6773,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(ssub)",
          "new_text": null,
          "old_line_content": "    sublen = sdslen(ssub);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6774,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(spat)",
          "new_text": null,
          "old_line_content": "    postfixlen = sdslen(spat)-(prefixlen+1)-fieldlen;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6775,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(keyname.buf,spat,prefixlen)",
          "new_text": null,
          "old_line_content": "    memcpy(keyname.buf,spat,prefixlen);",
          "new_line_content": "    prefixlen = p-spat;",
          "content_same": false
        },
        {
          "line": 6784,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(db,&keyobj)",
          "new_text": null,
          "old_line_content": "    o = lookupKeyRead(db,&keyobj);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6792,
          "old_api": "initStaticStringObject",
          "new_api": null,
          "old_text": "initStaticStringObject(fieldobj,((char*)&fieldname)+(sizeof(long)*2))",
          "new_text": null,
          "old_line_content": "        initStaticStringObject(fieldobj,((char*)&fieldname)+(sizeof(long)*2));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6793,
          "old_api": "hashGet",
          "new_api": null,
          "old_text": "hashGet(o, &fieldobj)",
          "new_text": null,
          "old_line_content": "        o = hashGet(o, &fieldobj);",
          "new_line_content": "        /* Retrieve value from hash by the field name. This operation",
          "content_same": false
        },
        {
          "line": 6799,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(o)",
          "new_text": null,
          "old_line_content": "        incrRefCount(o);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6834,
          "old_api": "strcoll",
          "new_api": null,
          "old_text": "strcoll(so1->u.cmpobj->ptr,so2->u.cmpobj->ptr)",
          "new_text": null,
          "old_line_content": "                cmp = strcoll(so1->u.cmpobj->ptr,so2->u.cmpobj->ptr);",
          "new_line_content": "                    cmp = 1;",
          "content_same": false
        },
        {
          "line": 6838,
          "old_api": "compareStringObjects",
          "new_api": null,
          "old_text": "compareStringObjects(so1->obj,so2->obj)",
          "new_text": null,
          "old_line_content": "            cmp = compareStringObjects(so1->obj,so2->obj);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 6857,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    sortval = lookupKeyRead(c->db,c->argv[1]);",
          "new_line_content": "    redisSortObject *vector; /* Resulting vector to sort */",
          "content_same": false
        },
        {
          "line": 6859,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.emptymultibulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.emptymultibulk);",
          "new_line_content": "    /* Lookup the key to sort. It must be of the right types */",
          "content_same": false
        },
        {
          "line": 6865,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.wrongtypeerr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.wrongtypeerr);",
          "new_line_content": "    if (sortval->type != REDIS_SET && sortval->type != REDIS_LIST &&",
          "content_same": false
        },
        {
          "line": 6871,
          "old_api": "listCreate",
          "new_api": null,
          "old_text": "listCreate()",
          "new_text": null,
          "old_line_content": "    operations = listCreate();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6872,
          "old_api": "listSetFreeMethod",
          "new_api": null,
          "old_text": "listSetFreeMethod(operations,zfree)",
          "new_text": null,
          "old_line_content": "    listSetFreeMethod(operations,zfree);",
          "new_line_content": "    /* Create a list of operations to perform for every sorted element.",
          "content_same": false
        },
        {
          "line": 6878,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(sortval)",
          "new_text": null,
          "old_line_content": "    incrRefCount(sortval);",
          "new_line_content": "    /* Now we need to protect sortval incrementing its count, in the future",
          "content_same": false
        },
        {
          "line": 6883,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"asc\")",
          "new_text": null,
          "old_line_content": "        if (!strcasecmp(c->argv[j]->ptr,\"asc\")) {",
          "new_line_content": "    /* The SORT command has an SQL-alike syntax, parse it */",
          "content_same": false
        },
        {
          "line": 6885,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"desc\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(c->argv[j]->ptr,\"desc\")) {",
          "new_line_content": "        int leftargs = c->argc-j-1;",
          "content_same": false
        },
        {
          "line": 6887,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"alpha\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(c->argv[j]->ptr,\"alpha\")) {",
          "new_line_content": "            desc = 0;",
          "content_same": false
        },
        {
          "line": 6889,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"limit\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(c->argv[j]->ptr,\"limit\") && leftargs >= 2) {",
          "new_line_content": "            desc = 1;",
          "content_same": false
        },
        {
          "line": 6891,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[j+2]->ptr)",
          "new_text": null,
          "old_line_content": "            limit_count = atoi(c->argv[j+2]->ptr);",
          "new_line_content": "            alpha = 1;",
          "content_same": false
        },
        {
          "line": 6900,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(c->argv[j+1]->ptr,'*')",
          "new_text": null,
          "old_line_content": "            if (strchr(c->argv[j+1]->ptr,'*') == NULL) dontsort = 1;",
          "new_line_content": "            sortby = c->argv[j+1];",
          "content_same": false
        },
        {
          "line": 6902,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"get\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(c->argv[j]->ptr,\"get\") && leftargs >= 1) {",
          "new_line_content": "             * we don't need to sort nor to lookup the weight keys. */",
          "content_same": false
        },
        {
          "line": 6908,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(sortval)",
          "new_text": null,
          "old_line_content": "            decrRefCount(sortval);",
          "new_line_content": "            getop++;",
          "content_same": false
        },
        {
          "line": 6909,
          "old_api": "listRelease",
          "new_api": null,
          "old_text": "listRelease(operations)",
          "new_text": null,
          "old_line_content": "            listRelease(operations);",
          "new_line_content": "            j++;",
          "content_same": false
        },
        {
          "line": 6910,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.syntaxerr);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 6918,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength((list*)sortval->ptr)",
          "new_text": null,
          "old_line_content": "    case REDIS_LIST: vectorlen = listLength((list*)sortval->ptr); break;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6919,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize((dict*)sortval->ptr)",
          "new_text": null,
          "old_line_content": "    case REDIS_SET: vectorlen =  dictSize((dict*)sortval->ptr); break;",
          "new_line_content": "    /* Load the sorting vector with all the objects to sort */",
          "content_same": false
        },
        {
          "line": 6920,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(((zset*)sortval->ptr)->dict)",
          "new_text": null,
          "old_line_content": "    case REDIS_ZSET: vectorlen = dictSize(((zset*)sortval->ptr)->dict); break;",
          "new_line_content": "    switch(sortval->type) {",
          "content_same": false
        },
        {
          "line": 6931,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(list,&li)",
          "new_text": null,
          "old_line_content": "        listRewind(list,&li);",
          "new_line_content": "        listNode *ln;",
          "content_same": false
        },
        {
          "line": 6932,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "        while((ln = listNext(&li))) {",
          "new_line_content": "        listIter li;",
          "content_same": false
        },
        {
          "line": 6951,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(set)",
          "new_text": null,
          "old_line_content": "        di = dictGetIterator(set);",
          "new_line_content": "            set = zs->dict;",
          "content_same": false
        },
        {
          "line": 6952,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "        while((setele = dictNext(di)) != NULL) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6953,
          "old_api": "dictGetEntryKey",
          "new_api": null,
          "old_text": "dictGetEntryKey(setele)",
          "new_text": null,
          "old_line_content": "            vector[j].obj = dictGetEntryKey(setele);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6958,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "        dictReleaseIterator(di);",
          "new_line_content": "            vector[j].u.cmpobj = NULL;",
          "content_same": false
        },
        {
          "line": 6960,
          "old_api": "redisAssert",
          "new_api": null,
          "old_text": "redisAssert(j == vectorlen)",
          "new_text": null,
          "old_line_content": "    redisAssert(j == vectorlen);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6968,
          "old_api": "lookupKeyByPattern",
          "new_api": null,
          "old_text": "lookupKeyByPattern(c->db,sortby,vector[j].obj)",
          "new_text": null,
          "old_line_content": "                byval = lookupKeyByPattern(c->db,sortby,vector[j].obj);",
          "new_line_content": "            robj *byval;",
          "content_same": false
        },
        {
          "line": 6976,
          "old_api": "getDecodedObject",
          "new_api": null,
          "old_text": "getDecodedObject(byval)",
          "new_text": null,
          "old_line_content": "                if (sortby) vector[j].u.cmpobj = getDecodedObject(byval);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 6986,
          "old_api": "redisAssert",
          "new_api": null,
          "old_text": "redisAssert(1 != 1)",
          "new_text": null,
          "old_line_content": "                    redisAssert(1 != 1);",
          "new_line_content": "                     * far. We can just cast it */",
          "content_same": false
        },
        {
          "line": 6993,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(byval)",
          "new_text": null,
          "old_line_content": "                decrRefCount(byval);",
          "new_line_content": "            /* when the object was retrieved using lookupKeyByPattern,",
          "content_same": false
        },
        {
          "line": 7013,
          "old_api": "pqsort",
          "new_api": null,
          "old_text": "pqsort(vector,vectorlen,sizeof(redisSortObject),sortCompare, start,end)",
          "new_text": null,
          "old_line_content": "            pqsort(vector,vectorlen,sizeof(redisSortObject),sortCompare, start,end);",
          "new_line_content": "        server.sort_alpha = alpha;",
          "content_same": false
        },
        {
          "line": 7015,
          "old_api": "qsort",
          "new_api": null,
          "old_text": "qsort(vector,vectorlen,sizeof(redisSortObject),sortCompare)",
          "new_text": null,
          "old_line_content": "            qsort(vector,vectorlen,sizeof(redisSortObject),sortCompare);",
          "new_line_content": "        if (sortby && (start != 0 || end != vectorlen-1))",
          "content_same": false
        },
        {
          "line": 7023,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",outputlen));",
          "new_line_content": "    outputlen = getop ? getop*(end-start+1) : end-start+1;",
          "content_same": false
        },
        {
          "line": 7028,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,vector[j].obj)",
          "new_text": null,
          "old_line_content": "            if (!getop) addReplyBulk(c,vector[j].obj);",
          "new_line_content": "            listNode *ln;",
          "content_same": false
        },
        {
          "line": 7029,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(operations,&li)",
          "new_text": null,
          "old_line_content": "            listRewind(operations,&li);",
          "new_line_content": "            listIter li;",
          "content_same": false
        },
        {
          "line": 7030,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "            while((ln = listNext(&li))) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7037,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "                        addReply(c,shared.nullbulk);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7039,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,val)",
          "new_text": null,
          "old_line_content": "                        addReplyBulk(c,val);",
          "new_line_content": "                    if (!val) {",
          "content_same": false
        },
        {
          "line": 7048,
          "old_api": "createListObject",
          "new_api": null,
          "old_text": "createListObject()",
          "new_text": null,
          "old_line_content": "        robj *listObject = createListObject();",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 7057,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(listPtr,vector[j].obj)",
          "new_text": null,
          "old_line_content": "                listAddNodeTail(listPtr,vector[j].obj);",
          "new_line_content": "            listIter li;",
          "content_same": false
        },
        {
          "line": 7058,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(vector[j].obj)",
          "new_text": null,
          "old_line_content": "                incrRefCount(vector[j].obj);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7068,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject(\"\",0)",
          "new_text": null,
          "old_line_content": "                        listAddNodeTail(listPtr,createStringObject(\"\",0));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7074,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(listPtr,val)",
          "new_text": null,
          "old_line_content": "                        listAddNodeTail(listPtr,val);",
          "new_line_content": "                         * added to the list, but also a decrRefCount because",
          "content_same": false
        },
        {
          "line": 7081,
          "old_api": "dictReplace",
          "new_api": null,
          "old_text": "dictReplace(c->db->dict,storekey,listObject)",
          "new_text": null,
          "old_line_content": "        if (dictReplace(c->db->dict,storekey,listObject)) {",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 7082,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(storekey)",
          "new_text": null,
          "old_line_content": "            incrRefCount(storekey);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 7088,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdscatprintf(sdsempty(),\":%d\\r\\n\",outputlen));",
          "new_line_content": "         * SORT result is empty a new key is set and maybe the old content",
          "content_same": false
        },
        {
          "line": 7092,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(sortval)",
          "new_text": null,
          "old_line_content": "    decrRefCount(sortval);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7093,
          "old_api": "listRelease",
          "new_api": null,
          "old_text": "listRelease(operations)",
          "new_text": null,
          "old_line_content": "    listRelease(operations);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7098,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(vector)",
          "new_text": null,
          "old_line_content": "    zfree(vector);",
          "new_line_content": "        if (alpha && vector[j].u.cmpobj)",
          "content_same": false
        },
        {
          "line": 7108,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(s,\"%lluB\",n)",
          "new_text": null,
          "old_line_content": "        sprintf(s,\"%lluB\",n);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7112,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(s,\"%.2fK\",d)",
          "new_text": null,
          "old_line_content": "        sprintf(s,\"%.2fK\",d);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 7127,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    time_t uptime = time(NULL)-server.stat_starttime;",
          "new_line_content": " * on memory corruption problems. */",
          "content_same": false
        },
        {
          "line": 7131,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "    bytesToHuman(hmem,zmalloc_used_memory());",
          "new_line_content": "    int j;",
          "content_same": false
        },
        {
          "line": 7132,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    info = sdscatprintf(sdsempty(),",
          "new_line_content": "    char hmem[64];",
          "content_same": false
        },
        {
          "line": 7159,
          "old_api": "aeGetApiName",
          "new_api": null,
          "old_text": "aeGetApiName()",
          "new_text": null,
          "old_line_content": "        aeGetApiName(),",
          "new_line_content": "        \"role:%s\\r\\n\"",
          "content_same": false
        },
        {
          "line": 7160,
          "old_api": "getpid",
          "new_api": null,
          "old_text": "getpid()",
          "new_text": null,
          "old_line_content": "        (long) getpid(),",
          "new_line_content": "        ,REDIS_VERSION,",
          "content_same": false
        },
        {
          "line": 7164,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.slaves)",
          "new_text": null,
          "old_line_content": "        listLength(server.slaves),",
          "new_line_content": "        uptime,",
          "content_same": false
        },
        {
          "line": 7177,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.pubsub_channels)",
          "new_text": null,
          "old_line_content": "        dictSize(server.pubsub_channels),",
          "new_line_content": "        server.stat_expiredkeys,",
          "content_same": false
        },
        {
          "line": 7178,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.pubsub_patterns)",
          "new_text": null,
          "old_line_content": "        listLength(server.pubsub_patterns),",
          "new_line_content": "        server.hash_max_zipmap_entries,",
          "content_same": false
        },
        {
          "line": 7183,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n            \"master_host:%s\\r\\n\"\n            \"master_port:%d\\r\\n\"\n            \"master_link_status:%s\\r\\n\"\n            \"master_last_io_seconds_ago:%d\\r\\n\"\n            ,server.masterhost,\n            server.masterport,\n            (server.replstate == REDIS_REPL_CONNECTED) ?\n                \"up\" : \"down\",\n            server.master ? ((int)(time(NULL)-server.master->lastinteraction)) : -1\n        )",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "        server.masterhost == NULL ? \"master\" : \"slave\"",
          "content_same": false
        },
        {
          "line": 7192,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "            server.master ? ((int)(time(NULL)-server.master->lastinteraction)) : -1",
          "new_line_content": "            server.masterport,",
          "content_same": false
        },
        {
          "line": 7196,
          "old_api": "lockThreadedIO",
          "new_api": null,
          "old_text": "lockThreadedIO()",
          "new_text": null,
          "old_line_content": "        lockThreadedIO();",
          "new_line_content": "        );",
          "content_same": false
        },
        {
          "line": 7197,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n            \"vm_conf_max_memory:%llu\\r\\n\"\n            \"vm_conf_page_size:%llu\\r\\n\"\n            \"vm_conf_pages:%llu\\r\\n\"\n            \"vm_stats_used_pages:%llu\\r\\n\"\n            \"vm_stats_swapped_objects:%llu\\r\\n\"\n            \"vm_stats_swappin_count:%llu\\r\\n\"\n            \"vm_stats_swappout_count:%llu\\r\\n\"\n            \"vm_stats_io_newjobs_len:%lu\\r\\n\"\n            \"vm_stats_io_processing_len:%lu\\r\\n\"\n            \"vm_stats_io_processed_len:%lu\\r\\n\"\n            \"vm_stats_io_active_threads:%lu\\r\\n\"\n            \"vm_stats_blocked_clients:%lu\\r\\n\"\n            ,(unsigned long long) server.vm_max_memory,\n            (unsigned long long) server.vm_page_size,\n            (unsigned long long) server.vm_pages,\n            (unsigned long long) server.vm_stats_used_pages,\n            (unsigned long long) server.vm_stats_swapped_objects,\n            (unsigned long long) server.vm_stats_swapins,\n            (unsigned long long) server.vm_stats_swapouts,\n            (unsigned long) listLength(server.io_newjobs),\n            (unsigned long) listLength(server.io_processing),\n            (unsigned long) listLength(server.io_processed),\n            (unsigned long) server.io_active_threads,\n            (unsigned long) server.vm_blocked_clients\n        )",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7217,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.io_newjobs)",
          "new_text": null,
          "old_line_content": "            (unsigned long) listLength(server.io_newjobs),",
          "new_line_content": "            (unsigned long long) server.vm_stats_swapped_objects,",
          "content_same": false
        },
        {
          "line": 7218,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.io_processing)",
          "new_text": null,
          "old_line_content": "            (unsigned long) listLength(server.io_processing),",
          "new_line_content": "            (unsigned long long) server.vm_stats_swapins,",
          "content_same": false
        },
        {
          "line": 7219,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.io_processed)",
          "new_text": null,
          "old_line_content": "            (unsigned long) listLength(server.io_processed),",
          "new_line_content": "            (unsigned long long) server.vm_stats_swapouts,",
          "content_same": false
        },
        {
          "line": 7223,
          "old_api": "unlockThreadedIO",
          "new_api": null,
          "old_text": "unlockThreadedIO()",
          "new_text": null,
          "old_line_content": "        unlockThreadedIO();",
          "new_line_content": "            (unsigned long) server.io_active_threads,",
          "content_same": false
        },
        {
          "line": 7228,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.db[j].dict)",
          "new_text": null,
          "old_line_content": "        keys = dictSize(server.db[j].dict);",
          "new_line_content": "    for (j = 0; j < server.dbnum; j++) {",
          "content_same": false
        },
        {
          "line": 7229,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.db[j].expires)",
          "new_text": null,
          "old_line_content": "        vkeys = dictSize(server.db[j].expires);",
          "new_line_content": "        long long keys, vkeys;",
          "content_same": false
        },
        {
          "line": 7239,
          "old_api": "genRedisInfoString",
          "new_api": null,
          "old_text": "genRedisInfoString()",
          "new_text": null,
          "old_line_content": "    sds info = genRedisInfoString();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 7240,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"$%lu\\r\\n\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7241,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(info)",
          "new_text": null,
          "old_line_content": "        (unsigned long)sdslen(info)));",
          "new_line_content": "static void infoCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 7252,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(server.monitors,c)",
          "new_text": null,
          "old_line_content": "    listAddNodeTail(server.monitors,c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7253,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.ok);",
          "new_line_content": "    c->flags |= (REDIS_SLAVE|REDIS_MONITOR);",
          "content_same": false
        },
        {
          "line": 7258,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(db->expires,key)",
          "new_text": null,
          "old_line_content": "    if (dictDelete(db->expires,key) == DICT_OK) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7266,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(db->expires,key,(void*)when)",
          "new_text": null,
          "old_line_content": "    if (dictAdd(db->expires,key,(void*)when) == DICT_ERR) {",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 7280,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(db->expires)",
          "new_text": null,
          "old_line_content": "    if (dictSize(db->expires) == 0 ||",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 7281,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(db->expires,key)",
          "new_text": null,
          "old_line_content": "       (de = dictFind(db->expires,key)) == NULL) return -1;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7291,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(db->expires)",
          "new_text": null,
          "old_line_content": "    if (dictSize(db->expires) == 0 ||",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 7292,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(db->expires,key)",
          "new_text": null,
          "old_line_content": "       (de = dictFind(db->expires,key)) == NULL) return 0;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7296,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    if (time(NULL) <= when) return 0;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7301,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(db->dict,key)",
          "new_text": null,
          "old_line_content": "    return dictDelete(db->dict,key) == DICT_OK;",
          "new_line_content": "    /* Delete the key */",
          "content_same": false
        },
        {
          "line": 7308,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(db->expires)",
          "new_text": null,
          "old_line_content": "    if (dictSize(db->expires) == 0 ||",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 7309,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(db->expires,key)",
          "new_text": null,
          "old_line_content": "       (de = dictFind(db->expires,key)) == NULL) return 0;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7314,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(db->expires,key)",
          "new_text": null,
          "old_line_content": "    dictDelete(db->expires,key);",
          "new_line_content": "    /* Delete the key */",
          "content_same": false
        },
        {
          "line": 7315,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(db->dict,key)",
          "new_text": null,
          "old_line_content": "    return dictDelete(db->dict,key) == DICT_OK;",
          "new_line_content": "    server.dirty++;",
          "content_same": false
        },
        {
          "line": 7322,
          "old_api": "getLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongFromObjectOrReply(c, param, &seconds, NULL)",
          "new_text": null,
          "old_line_content": "    if (getLongFromObjectOrReply(c, param, &seconds, NULL) != REDIS_OK) return;",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 7326,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(c->db->dict,key)",
          "new_text": null,
          "old_line_content": "    de = dictFind(c->db->dict,key);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7328,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7332,
          "old_api": "deleteKey",
          "new_api": null,
          "old_text": "deleteKey(c->db,key)",
          "new_text": null,
          "old_line_content": "        if (deleteKey(c->db,key)) server.dirty++;",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 7333,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.cone)",
          "new_text": null,
          "old_line_content": "        addReply(c, shared.cone);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7337,
          "old_api": "setExpire",
          "new_api": null,
          "old_text": "setExpire(c->db,key,when)",
          "new_text": null,
          "old_line_content": "        if (setExpire(c->db,key,when)) {",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 7338,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.cone)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.cone);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 7348,
          "old_api": "expireGenericCommand",
          "new_api": null,
          "old_text": "expireGenericCommand(c,c->argv[1],c->argv[2],0)",
          "new_text": null,
          "old_line_content": "    expireGenericCommand(c,c->argv[1],c->argv[2],0);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 7352,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    expireGenericCommand(c,c->argv[1],c->argv[2],time(NULL));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 7359,
          "old_api": "getExpire",
          "new_api": null,
          "old_text": "getExpire(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    expire = getExpire(c->db,c->argv[1]);",
          "new_line_content": "    time_t expire;",
          "content_same": false
        },
        {
          "line": 7361,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "        ttl = (int) (expire-time(NULL));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7384,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(mc->argv[i])",
          "new_text": null,
          "old_line_content": "            decrRefCount(mc->argv[i]);",
          "new_line_content": "        multiCmd *mc = c->mstate.commands+j;",
          "content_same": false
        },
        {
          "line": 7385,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(mc->argv)",
          "new_text": null,
          "old_line_content": "        zfree(mc->argv);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7395,
          "old_api": "zrealloc",
          "new_api": null,
          "old_text": "zrealloc(c->mstate.commands,\n            sizeof(multiCmd)*(c->mstate.count+1))",
          "new_text": null,
          "old_line_content": "    c->mstate.commands = zrealloc(c->mstate.commands,",
          "new_line_content": "    multiCmd *mc;",
          "content_same": false
        },
        {
          "line": 7400,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(robj*)*c->argc)",
          "new_text": null,
          "old_line_content": "    mc->argv = zmalloc(sizeof(robj*)*c->argc);",
          "new_line_content": "    mc = c->mstate.commands+c->mstate.count;",
          "content_same": false
        },
        {
          "line": 7401,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(mc->argv,c->argv,sizeof(robj*)*c->argc)",
          "new_text": null,
          "old_line_content": "    memcpy(mc->argv,c->argv,sizeof(robj*)*c->argc);",
          "new_line_content": "    mc->cmd = cmd;",
          "content_same": false
        },
        {
          "line": 7409,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.ok);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7414,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR DISCARD without MULTI\\r\\n\")",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(\"-ERR DISCARD without MULTI\\r\\n\"));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7418,
          "old_api": "freeClientMultiState",
          "new_api": null,
          "old_text": "freeClientMultiState(c)",
          "new_text": null,
          "old_line_content": "    freeClientMultiState(c);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 7419,
          "old_api": "initClientMultiState",
          "new_api": null,
          "old_text": "initClientMultiState(c)",
          "new_text": null,
          "old_line_content": "    initClientMultiState(c);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7428,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject(\"MULTI\",5)",
          "new_text": null,
          "old_line_content": "    robj *multistring = createStringObject(\"MULTI\",5);",
          "new_line_content": " * implememntation for more information. */",
          "content_same": false
        },
        {
          "line": 7430,
          "old_api": "lookupCommand",
          "new_api": null,
          "old_text": "lookupCommand(\"multi\")",
          "new_text": null,
          "old_line_content": "    cmd = lookupCommand(\"multi\");",
          "new_line_content": "    struct redisCommand *cmd;",
          "content_same": false
        },
        {
          "line": 7432,
          "old_api": "feedAppendOnlyFile",
          "new_api": null,
          "old_text": "feedAppendOnlyFile(cmd,c->db->id,&multistring,1)",
          "new_text": null,
          "old_line_content": "        feedAppendOnlyFile(cmd,c->db->id,&multistring,1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7434,
          "old_api": "replicationFeedSlaves",
          "new_api": null,
          "old_text": "replicationFeedSlaves(server.slaves,c->db->id,&multistring,1)",
          "new_text": null,
          "old_line_content": "        replicationFeedSlaves(server.slaves,c->db->id,&multistring,1);",
          "new_line_content": "    if (server.appendonly)",
          "content_same": false
        },
        {
          "line": 7444,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR EXEC without MULTI\\r\\n\")",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(\"-ERR EXEC without MULTI\\r\\n\"));",
          "new_line_content": "    int orig_argc;",
          "content_same": false
        },
        {
          "line": 7452,
          "old_api": "execCommandReplicateMulti",
          "new_api": null,
          "old_text": "execCommandReplicateMulti(c)",
          "new_text": null,
          "old_line_content": "    execCommandReplicateMulti(c);",
          "new_line_content": "     * This way we'll deliver the MULTI/..../EXEC block as a whole and",
          "content_same": false
        },
        {
          "line": 7457,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"*%d\\r\\n\",c->mstate.count));",
          "new_line_content": "    /* Exec all the queued commands */",
          "content_same": false
        },
        {
          "line": 7461,
          "old_api": "call",
          "new_api": null,
          "old_text": "call(c,c->mstate.commands[j].cmd)",
          "new_text": null,
          "old_line_content": "        call(c,c->mstate.commands[j].cmd);",
          "new_line_content": "    for (j = 0; j < c->mstate.count; j++) {",
          "content_same": false
        },
        {
          "line": 7465,
          "old_api": "freeClientMultiState",
          "new_api": null,
          "old_text": "freeClientMultiState(c)",
          "new_text": null,
          "old_line_content": "    freeClientMultiState(c);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7466,
          "old_api": "initClientMultiState",
          "new_api": null,
          "old_text": "initClientMultiState(c)",
          "new_text": null,
          "old_line_content": "    initClientMultiState(c);",
          "new_line_content": "    c->argv = orig_argv;",
          "content_same": false
        },
        {
          "line": 7512,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(robj*)*numkeys)",
          "new_text": null,
          "old_line_content": "    c->blockingkeys = zmalloc(sizeof(robj*)*numkeys);",
          "new_line_content": "    list *l;",
          "content_same": false
        },
        {
          "line": 7518,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(keys[j])",
          "new_text": null,
          "old_line_content": "        incrRefCount(keys[j]);",
          "new_line_content": "    for (j = 0; j < numkeys; j++) {",
          "content_same": false
        },
        {
          "line": 7526,
          "old_api": "listCreate",
          "new_api": null,
          "old_text": "listCreate()",
          "new_text": null,
          "old_line_content": "            l = listCreate();",
          "new_line_content": "            int retval;",
          "content_same": false
        },
        {
          "line": 7527,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(c->db->blockingkeys,keys[j],l)",
          "new_text": null,
          "old_line_content": "            retval = dictAdd(c->db->blockingkeys,keys[j],l);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7528,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(keys[j])",
          "new_text": null,
          "old_line_content": "            incrRefCount(keys[j]);",
          "new_line_content": "            /* For every key we take a list of clients blocked for it */",
          "content_same": false
        },
        {
          "line": 7533,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(l,c)",
          "new_text": null,
          "old_line_content": "        listAddNodeTail(l,c);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 7546,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(c->blockingkeys != NULL)",
          "new_text": null,
          "old_line_content": "    assert(c->blockingkeys != NULL);",
          "new_line_content": "    list *l;",
          "content_same": false
        },
        {
          "line": 7550,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(c->db->blockingkeys,c->blockingkeys[j])",
          "new_text": null,
          "old_line_content": "        de = dictFind(c->db->blockingkeys,c->blockingkeys[j]);",
          "new_line_content": "    /* The client may wait for multiple keys, so unblock it for every key. */",
          "content_same": false
        },
        {
          "line": 7551,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(de != NULL)",
          "new_text": null,
          "old_line_content": "        assert(de != NULL);",
          "new_line_content": "    for (j = 0; j < c->blockingkeysnum; j++) {",
          "content_same": false
        },
        {
          "line": 7552,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "        l = dictGetEntryVal(de);",
          "new_line_content": "        /* Remove this client from the list of clients waiting for this key. */",
          "content_same": false
        },
        {
          "line": 7557,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(c->blockingkeys[j])",
          "new_text": null,
          "old_line_content": "        decrRefCount(c->blockingkeys[j]);",
          "new_line_content": "        /* If the list is empty we need to remove it to avoid wasting memory */",
          "content_same": false
        },
        {
          "line": 7569,
          "old_api": "processInputBuffer",
          "new_api": null,
          "old_text": "processInputBuffer(c)",
          "new_text": null,
          "old_line_content": "    if (c->querybuf && sdslen(c->querybuf) > 0) processInputBuffer(c);",
          "new_line_content": "     * unblockClientWaitingData() gets called from freeClient() because",
          "content_same": false
        },
        {
          "line": 7588,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(c->db->blockingkeys,key)",
          "new_text": null,
          "old_line_content": "    de = dictFind(c->db->blockingkeys,key);",
          "new_line_content": "    list *l;",
          "content_same": false
        },
        {
          "line": 7590,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "    l = dictGetEntryVal(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7592,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(ln != NULL)",
          "new_text": null,
          "old_line_content": "    assert(ln != NULL);",
          "new_line_content": "    if (de == NULL) return 0;",
          "content_same": false
        },
        {
          "line": 7596,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(receiver,key)",
          "new_text": null,
          "old_line_content": "    addReplyBulk(receiver,key);",
          "new_line_content": "    receiver = ln->value;",
          "content_same": false
        },
        {
          "line": 7597,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(receiver,ele)",
          "new_text": null,
          "old_line_content": "    addReplyBulk(receiver,ele);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7609,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[j])",
          "new_text": null,
          "old_line_content": "        o = lookupKeyWrite(c->db,c->argv[j]);",
          "new_line_content": "    int j;",
          "content_same": false
        },
        {
          "line": 7616,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(list)",
          "new_text": null,
          "old_line_content": "                if (listLength(list) != 0) {",
          "new_line_content": "                return;",
          "content_same": false
        },
        {
          "line": 7635,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"*2\\r\\n\")",
          "new_text": null,
          "old_line_content": "                    addReplySds(c,sdsnew(\"*2\\r\\n\"));",
          "new_line_content": "                     * \"real\" command will add the last element (the value)",
          "content_same": false
        },
        {
          "line": 7636,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,argv[1])",
          "new_text": null,
          "old_line_content": "                    addReplyBulk(c,argv[1]);",
          "new_line_content": "                     * for us. If this souds like an hack to you it's just",
          "content_same": false
        },
        {
          "line": 7637,
          "old_api": "popGenericCommand",
          "new_api": null,
          "old_text": "popGenericCommand(c,where)",
          "new_text": null,
          "old_line_content": "                    popGenericCommand(c,where);",
          "new_line_content": "                     * because it is... */",
          "content_same": false
        },
        {
          "line": 7648,
          "old_api": "strtol",
          "new_api": null,
          "old_text": "strtol(c->argv[c->argc-1]->ptr,NULL,10)",
          "new_text": null,
          "old_line_content": "    timeout = strtol(c->argv[c->argc-1]->ptr,NULL,10);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 7649,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    if (timeout > 0) timeout += time(NULL);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7650,
          "old_api": "blockForKeys",
          "new_api": null,
          "old_text": "blockForKeys(c,c->argv+1,c->argc-2,timeout)",
          "new_text": null,
          "old_line_content": "    blockForKeys(c,c->argv+1,c->argc-2,timeout);",
          "new_line_content": "    /* If the list is empty or the key does not exists we must block */",
          "content_same": false
        },
        {
          "line": 7654,
          "old_api": "blockingPopGenericCommand",
          "new_api": null,
          "old_text": "blockingPopGenericCommand(c,REDIS_HEAD)",
          "new_text": null,
          "old_line_content": "    blockingPopGenericCommand(c,REDIS_HEAD);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 7658,
          "old_api": "blockingPopGenericCommand",
          "new_api": null,
          "old_text": "blockingPopGenericCommand(c,REDIS_TAIL)",
          "new_text": null,
          "old_line_content": "    blockingPopGenericCommand(c,REDIS_TAIL);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 7665,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    time_t start = time(NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7669,
          "old_api": "aeWait",
          "new_api": null,
          "old_text": "aeWait(fd,AE_WRITABLE,1000)",
          "new_text": null,
          "old_line_content": "        if (aeWait(fd,AE_WRITABLE,1000) & AE_WRITABLE) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7670,
          "old_api": "write",
          "new_api": null,
          "old_text": "write(fd,ptr,size)",
          "new_text": null,
          "old_line_content": "            nwritten = write(fd,ptr,size);",
          "new_line_content": "    timeout++;",
          "content_same": false
        },
        {
          "line": 7675,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "        if ((time(NULL)-start) > timeout) {",
          "new_line_content": "            ptr += nwritten;",
          "content_same": false
        },
        {
          "line": 7685,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    time_t start = time(NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7689,
          "old_api": "aeWait",
          "new_api": null,
          "old_text": "aeWait(fd,AE_READABLE,1000)",
          "new_text": null,
          "old_line_content": "        if (aeWait(fd,AE_READABLE,1000) & AE_READABLE) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7690,
          "old_api": "read",
          "new_api": null,
          "old_text": "read(fd,ptr,size)",
          "new_text": null,
          "old_line_content": "            nread = read(fd,ptr,size);",
          "new_line_content": "    timeout++;",
          "content_same": false
        },
        {
          "line": 7696,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "        if ((time(NULL)-start) > timeout) {",
          "new_line_content": "            size -= nread;",
          "content_same": false
        },
        {
          "line": 7711,
          "old_api": "syncRead",
          "new_api": null,
          "old_text": "syncRead(fd,&c,1,timeout)",
          "new_text": null,
          "old_line_content": "        if (syncRead(fd,&c,1,timeout) == -1) return -1;",
          "new_line_content": "    while(size) {",
          "content_same": false
        },
        {
          "line": 7733,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(c->reply)",
          "new_text": null,
          "old_line_content": "    if (listLength(c->reply) != 0) {",
          "new_line_content": "     * the client about already issued commands. We need a fresh reply",
          "content_same": false
        },
        {
          "line": 7734,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR SYNC is invalid with pending input\\r\\n\")",
          "new_text": null,
          "old_line_content": "        addReplySds(c,sdsnew(\"-ERR SYNC is invalid with pending input\\r\\n\"));",
          "new_line_content": "     * buffer registering the differences between the BGSAVE and the current",
          "content_same": false
        },
        {
          "line": 7738,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Slave ask for synchronization\")",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_NOTICE,\"Slave ask for synchronization\");",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 7749,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(server.slaves,&li)",
          "new_text": null,
          "old_line_content": "        listRewind(server.slaves,&li);",
          "new_line_content": "        listNode *ln;",
          "content_same": false
        },
        {
          "line": 7750,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "        while((ln = listNext(&li))) {",
          "new_line_content": "        listIter li;",
          "content_same": false
        },
        {
          "line": 7757,
          "old_api": "listRelease",
          "new_api": null,
          "old_text": "listRelease(c->reply)",
          "new_text": null,
          "old_line_content": "            listRelease(c->reply);",
          "new_line_content": "        if (ln) {",
          "content_same": false
        },
        {
          "line": 7758,
          "old_api": "listDup",
          "new_api": null,
          "old_text": "listDup(slave->reply)",
          "new_text": null,
          "old_line_content": "            c->reply = listDup(slave->reply);",
          "new_line_content": "            /* Perfect, the server is already registering differences for",
          "content_same": false
        },
        {
          "line": 7765,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Waiting for next BGSAVE for SYNC\")",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_NOTICE,\"Waiting for next BGSAVE for SYNC\");",
          "new_line_content": "            /* No way, we need to wait for the next BGSAVE in order to",
          "content_same": false
        },
        {
          "line": 7769,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Starting BGSAVE for SYNC\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_NOTICE,\"Starting BGSAVE for SYNC\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 7770,
          "old_api": "rdbSaveBackground",
          "new_api": null,
          "old_text": "rdbSaveBackground(server.dbfilename)",
          "new_text": null,
          "old_line_content": "        if (rdbSaveBackground(server.dbfilename) != REDIS_OK) {",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 7771,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Replication failed, can't BGSAVE\")",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_NOTICE,\"Replication failed, can't BGSAVE\");",
          "new_line_content": "        /* Ok we don't have a BGSAVE in progress, let's start one */",
          "content_same": false
        },
        {
          "line": 7780,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(server.slaves,c)",
          "new_text": null,
          "old_line_content": "    listAddNodeTail(server.slaves,c);",
          "new_line_content": "    c->repldbfd = -1;",
          "content_same": false
        },
        {
          "line": 7786,
          "old_api": "REDIS_NOTUSED",
          "new_api": null,
          "old_text": "REDIS_NOTUSED(el)",
          "new_text": null,
          "old_line_content": "    REDIS_NOTUSED(el);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7787,
          "old_api": "REDIS_NOTUSED",
          "new_api": null,
          "old_text": "REDIS_NOTUSED(mask)",
          "new_text": null,
          "old_line_content": "    REDIS_NOTUSED(mask);",
          "new_line_content": "static void sendBulkToSlave(aeEventLoop *el, int fd, void *privdata, int mask) {",
          "content_same": false
        },
        {
          "line": 7798,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        bulkcount = sdscatprintf(sdsempty(),\"$%lld\\r\\n\",(unsigned long long)",
          "new_line_content": "         * operations) will never be smaller than the few bytes we need. */",
          "content_same": false
        },
        {
          "line": 7800,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(bulkcount)",
          "new_text": null,
          "old_line_content": "        if (write(fd,bulkcount,sdslen(bulkcount)) != (signed)sdslen(bulkcount))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7802,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(bulkcount)",
          "new_text": null,
          "old_line_content": "            sdsfree(bulkcount);",
          "new_line_content": "            slave->repldbsize);",
          "content_same": false
        },
        {
          "line": 7808,
          "old_api": "lseek",
          "new_api": null,
          "old_text": "lseek(slave->repldbfd,slave->repldboff,SEEK_SET)",
          "new_text": null,
          "old_line_content": "    lseek(slave->repldbfd,slave->repldboff,SEEK_SET);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 7813,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(slave)",
          "new_text": null,
          "old_line_content": "        freeClient(slave);",
          "new_line_content": "    if (buflen <= 0) {",
          "content_same": false
        },
        {
          "line": 7817,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_VERBOSE,\"Write error sending DB to slave: %s\",\n            strerror(errno))",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_VERBOSE,\"Write error sending DB to slave: %s\",",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 7818,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "            strerror(errno));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7824,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(slave->repldbfd)",
          "new_text": null,
          "old_line_content": "        close(slave->repldbfd);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7826,
          "old_api": "aeDeleteFileEvent",
          "new_api": null,
          "old_text": "aeDeleteFileEvent(server.el,slave->fd,AE_WRITABLE)",
          "new_text": null,
          "old_line_content": "        aeDeleteFileEvent(server.el,slave->fd,AE_WRITABLE);",
          "new_line_content": "    if (slave->repldboff == slave->repldbsize) {",
          "content_same": false
        },
        {
          "line": 7828,
          "old_api": "aeCreateFileEvent",
          "new_api": null,
          "old_text": "aeCreateFileEvent(server.el, slave->fd, AE_WRITABLE,\n            sendReplyToClient, slave)",
          "new_text": null,
          "old_line_content": "        if (aeCreateFileEvent(server.el, slave->fd, AE_WRITABLE,",
          "new_line_content": "        slave->repldbfd = -1;",
          "content_same": false
        },
        {
          "line": 7830,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(slave)",
          "new_text": null,
          "old_line_content": "            freeClient(slave);",
          "new_line_content": "        slave->replstate = REDIS_REPL_ONLINE;",
          "content_same": false
        },
        {
          "line": 7834,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Synchronization with slave succeeded\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_NOTICE,\"Synchronization with slave succeeded\");",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 7849,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(server.slaves,&li)",
          "new_text": null,
          "old_line_content": "    listRewind(server.slaves,&li);",
          "new_line_content": "    int startbgsave = 0;",
          "content_same": false
        },
        {
          "line": 7850,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "    while((ln = listNext(&li))) {",
          "new_line_content": "    listIter li;",
          "content_same": false
        },
        {
          "line": 7860,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(slave)",
          "new_text": null,
          "old_line_content": "                freeClient(slave);",
          "new_line_content": "            struct redis_stat buf;",
          "content_same": false
        },
        {
          "line": 7861,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"SYNC failed. BGSAVE child returned an error\")",
          "new_text": null,
          "old_line_content": "                redisLog(REDIS_WARNING,\"SYNC failed. BGSAVE child returned an error\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7865,
          "old_api": "redis_fstat",
          "new_api": null,
          "old_text": "redis_fstat(slave->repldbfd,&buf)",
          "new_text": null,
          "old_line_content": "                redis_fstat(slave->repldbfd,&buf) == -1) {",
          "new_line_content": "                continue;",
          "content_same": false
        },
        {
          "line": 7866,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(slave)",
          "new_text": null,
          "old_line_content": "                freeClient(slave);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 7873,
          "old_api": "aeDeleteFileEvent",
          "new_api": null,
          "old_text": "aeDeleteFileEvent(server.el,slave->fd,AE_WRITABLE)",
          "new_text": null,
          "old_line_content": "            aeDeleteFileEvent(server.el,slave->fd,AE_WRITABLE);",
          "new_line_content": "            slave->repldboff = 0;",
          "content_same": false
        },
        {
          "line": 7874,
          "old_api": "aeCreateFileEvent",
          "new_api": null,
          "old_text": "aeCreateFileEvent(server.el, slave->fd, AE_WRITABLE, sendBulkToSlave, slave)",
          "new_text": null,
          "old_line_content": "            if (aeCreateFileEvent(server.el, slave->fd, AE_WRITABLE, sendBulkToSlave, slave) == AE_ERR) {",
          "new_line_content": "            slave->repldbsize = buf.st_size;",
          "content_same": false
        },
        {
          "line": 7875,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(slave)",
          "new_text": null,
          "old_line_content": "                freeClient(slave);",
          "new_line_content": "            slave->replstate = REDIS_REPL_SEND_BULK;",
          "content_same": false
        },
        {
          "line": 7881,
          "old_api": "rdbSaveBackground",
          "new_api": null,
          "old_text": "rdbSaveBackground(server.dbfilename)",
          "new_text": null,
          "old_line_content": "        if (rdbSaveBackground(server.dbfilename) != REDIS_OK) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 7885,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"SYNC failed. BGSAVE failed\")",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,\"SYNC failed. BGSAVE failed\");",
          "new_line_content": "            listIter li;",
          "content_same": false
        },
        {
          "line": 7886,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "            while((ln = listNext(&li))) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7890,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(slave)",
          "new_text": null,
          "old_line_content": "                    freeClient(slave);",
          "new_line_content": "                redisClient *slave = ln->value;",
          "content_same": false
        },
        {
          "line": 7899,
          "old_api": "anetTcpConnect",
          "new_api": null,
          "old_text": "anetTcpConnect(NULL,server.masterhost,server.masterport)",
          "new_text": null,
          "old_line_content": "    int fd = anetTcpConnect(NULL,server.masterhost,server.masterport);",
          "new_line_content": "static int syncWithMaster(void) {",
          "content_same": false
        },
        {
          "line": 7903,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Unable to connect to MASTER: %s\",\n            strerror(errno))",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Unable to connect to MASTER: %s\",",
          "new_line_content": "    int dfd, maxtries = 5;",
          "content_same": false
        },
        {
          "line": 7904,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "            strerror(errno));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7910,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(authcmd, 1024, \"AUTH %s\\r\\n\", server.masterauth)",
          "new_text": null,
          "old_line_content": "    \tsnprintf(authcmd, 1024, \"AUTH %s\\r\\n\", server.masterauth);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7911,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(server.masterauth)",
          "new_text": null,
          "old_line_content": "    \tif (syncWrite(fd, authcmd, strlen(server.masterauth)+7, 5) == -1) {",
          "new_line_content": "    /* AUTH with the master if required. */",
          "content_same": false
        },
        {
          "line": 7912,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd)",
          "new_text": null,
          "old_line_content": "            close(fd);",
          "new_line_content": "    if(server.masterauth) {",
          "content_same": false
        },
        {
          "line": 7918,
          "old_api": "syncReadLine",
          "new_api": null,
          "old_text": "syncReadLine(fd,buf,1024,3600)",
          "new_text": null,
          "old_line_content": "        if (syncReadLine(fd,buf,1024,3600) == -1) {",
          "new_line_content": "            return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 7919,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd)",
          "new_text": null,
          "old_line_content": "            close(fd);",
          "new_line_content": "    \t}",
          "content_same": false
        },
        {
          "line": 7920,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"I/O error reading auth result from MASTER: %s\",\n                strerror(errno))",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,\"I/O error reading auth result from MASTER: %s\",",
          "new_line_content": "        /* Read the AUTH result.  */",
          "content_same": false
        },
        {
          "line": 7925,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd)",
          "new_text": null,
          "old_line_content": "            close(fd);",
          "new_line_content": "            return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 7926,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Cannot AUTH to MASTER, is the masterauth password correct?\")",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,\"Cannot AUTH to MASTER, is the masterauth password correct?\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 7932,
          "old_api": "syncWrite",
          "new_api": null,
          "old_text": "syncWrite(fd,\"SYNC \\r\\n\",7,5)",
          "new_text": null,
          "old_line_content": "    if (syncWrite(fd,\"SYNC \\r\\n\",7,5) == -1) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7933,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd)",
          "new_text": null,
          "old_line_content": "        close(fd);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7934,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"I/O error writing to MASTER: %s\",\n            strerror(errno))",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"I/O error writing to MASTER: %s\",",
          "new_line_content": "    /* Issue the SYNC command */",
          "content_same": false
        },
        {
          "line": 7939,
          "old_api": "syncReadLine",
          "new_api": null,
          "old_text": "syncReadLine(fd,buf,1024,3600)",
          "new_text": null,
          "old_line_content": "    if (syncReadLine(fd,buf,1024,3600) == -1) {",
          "new_line_content": "        return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 7940,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd)",
          "new_text": null,
          "old_line_content": "        close(fd);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7941,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"I/O error reading bulk count from MASTER: %s\",\n            strerror(errno))",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"I/O error reading bulk count from MASTER: %s\",",
          "new_line_content": "    /* Read the bulk write count */",
          "content_same": false
        },
        {
          "line": 7946,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd)",
          "new_text": null,
          "old_line_content": "        close(fd);",
          "new_line_content": "        return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 7947,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Bad protocol from MASTER, the first byte is not '$', are you sure the host and port are right?\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Bad protocol from MASTER, the first byte is not '$', are you sure the host and port are right?\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7951,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Receiving %ld bytes data dump from MASTER\",dumpsize)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_NOTICE,\"Receiving %ld bytes data dump from MASTER\",dumpsize);",
          "new_line_content": "        return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 7955,
          "old_api": "getpid",
          "new_api": null,
          "old_text": "getpid()",
          "new_text": null,
          "old_line_content": "            \"temp-%d.%ld.rdb\",(int)time(NULL),(long int)getpid());",
          "new_line_content": "    /* Read the bulk write data on a temp file */",
          "content_same": false
        },
        {
          "line": 7956,
          "old_api": "open",
          "new_api": null,
          "old_text": "open(tmpfile,O_CREAT|O_WRONLY|O_EXCL,0644)",
          "new_text": null,
          "old_line_content": "        dfd = open(tmpfile,O_CREAT|O_WRONLY|O_EXCL,0644);",
          "new_line_content": "    while(maxtries--) {",
          "content_same": false
        },
        {
          "line": 7962,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Opening the temp file needed for MASTER <-> SLAVE synchronization: %s\",strerror(errno));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7968,
          "old_api": "read",
          "new_api": null,
          "old_text": "read(fd,buf,(dumpsize < 1024)?dumpsize:1024)",
          "new_text": null,
          "old_line_content": "        nread = read(fd,buf,(dumpsize < 1024)?dumpsize:1024);",
          "new_line_content": "    while(dumpsize) {",
          "content_same": false
        },
        {
          "line": 7970,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"I/O error trying to sync with MASTER: %s\",\n                strerror(errno))",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,\"I/O error trying to sync with MASTER: %s\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7972,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd)",
          "new_text": null,
          "old_line_content": "            close(fd);",
          "new_line_content": "        if (nread == -1) {",
          "content_same": false
        },
        {
          "line": 7978,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,\"Write error writing to the DB dump file needed for MASTER <-> SLAVE synchrnonization: %s\", strerror(errno));",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 7980,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(dfd)",
          "new_text": null,
          "old_line_content": "            close(dfd);",
          "new_line_content": "        if (nwritten == -1) {",
          "content_same": false
        },
        {
          "line": 7985,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(dfd)",
          "new_text": null,
          "old_line_content": "    close(dfd);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 7986,
          "old_api": "rename",
          "new_api": null,
          "old_text": "rename(tmpfile,server.dbfilename)",
          "new_text": null,
          "old_line_content": "    if (rename(tmpfile,server.dbfilename) == -1) {",
          "new_line_content": "        dumpsize -= nread;",
          "content_same": false
        },
        {
          "line": 7987,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Failed trying to rename the temp DB into dump.rdb in MASTER <-> SLAVE synchronization: %s\", strerror(errno));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7993,
          "old_api": "rdbLoad",
          "new_api": null,
          "old_text": "rdbLoad(server.dbfilename)",
          "new_text": null,
          "old_line_content": "    if (rdbLoad(server.dbfilename) != REDIS_OK) {",
          "new_line_content": "        return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 7994,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Failed trying to load the MASTER synchronization DB from disk\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Failed trying to load the MASTER synchronization DB from disk\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 8006,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr,\"no\")",
          "new_text": null,
          "old_line_content": "    if (!strcasecmp(c->argv[1]->ptr,\"no\") &&",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 8007,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[2]->ptr,\"one\")",
          "new_text": null,
          "old_line_content": "        !strcasecmp(c->argv[2]->ptr,\"one\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8011,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(server.master)",
          "new_text": null,
          "old_line_content": "            if (server.master) freeClient(server.master);",
          "new_line_content": "        if (server.masterhost) {",
          "content_same": false
        },
        {
          "line": 8013,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"MASTER MODE enabled (user request)\")",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_NOTICE,\"MASTER MODE enabled (user request)\");",
          "new_line_content": "            server.masterhost = NULL;",
          "content_same": false
        },
        {
          "line": 8017,
          "old_api": "sdsdup",
          "new_api": null,
          "old_text": "sdsdup(c->argv[1]->ptr)",
          "new_text": null,
          "old_line_content": "        server.masterhost = sdsdup(c->argv[1]->ptr);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 8018,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "        server.masterport = atoi(c->argv[2]->ptr);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 8036,
          "old_api": "pthread_mutex_lock",
          "new_api": null,
          "old_text": "pthread_mutex_lock(&server.obj_freelist_mutex)",
          "new_text": null,
          "old_line_content": "    if (server.vm_enabled) pthread_mutex_lock(&server.obj_freelist_mutex);",
          "new_line_content": "static int tryFreeOneObjectFromFreelist(void) {",
          "content_same": false
        },
        {
          "line": 8037,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.objfreelist)",
          "new_text": null,
          "old_line_content": "    if (listLength(server.objfreelist)) {",
          "new_line_content": "    robj *o;",
          "content_same": false
        },
        {
          "line": 8038,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(server.objfreelist)",
          "new_text": null,
          "old_line_content": "        listNode *head = listFirst(server.objfreelist);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8062,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "    while (server.maxmemory && zmalloc_used_memory() > server.maxmemory) {",
          "new_line_content": " * memory usage.",
          "content_same": false
        },
        {
          "line": 8071,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.db[j].expires)",
          "new_text": null,
          "old_line_content": "            if (dictSize(server.db[j].expires)) {",
          "new_line_content": "            robj *minkey = NULL;",
          "content_same": false
        },
        {
          "line": 8078,
          "old_api": "dictGetRandomKey",
          "new_api": null,
          "old_text": "dictGetRandomKey(server.db[j].expires)",
          "new_text": null,
          "old_line_content": "                    de = dictGetRandomKey(server.db[j].expires);",
          "new_line_content": "                for (k = 0; k < 3; k++) {",
          "content_same": false
        },
        {
          "line": 8079,
          "old_api": "dictGetEntryVal",
          "new_api": null,
          "old_text": "dictGetEntryVal(de)",
          "new_text": null,
          "old_line_content": "                    t = (time_t) dictGetEntryVal(de);",
          "new_line_content": "                    time_t t;",
          "content_same": false
        },
        {
          "line": 8085,
          "old_api": "deleteKey",
          "new_api": null,
          "old_text": "deleteKey(server.db+j,minkey)",
          "new_text": null,
          "old_line_content": "                deleteKey(server.db+j,minkey);",
          "new_line_content": "                        minttl = t;",
          "content_same": false
        },
        {
          "line": 8105,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(server.aofbuf)",
          "new_text": null,
          "old_line_content": "    if (sdslen(server.aofbuf) == 0) return;",
          "new_line_content": "    time_t now;",
          "content_same": false
        },
        {
          "line": 8112,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(server.aofbuf)",
          "new_text": null,
          "old_line_content": "     nwritten = write(server.appendfd,server.aofbuf,sdslen(server.aofbuf));",
          "new_line_content": "     * While this will save us against the server being killed I don't think",
          "content_same": false
        },
        {
          "line": 8113,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(server.aofbuf)",
          "new_text": null,
          "old_line_content": "     if (nwritten != (signed)sdslen(server.aofbuf)) {",
          "new_line_content": "     * there is much to do about the whole server stopping for power problems",
          "content_same": false
        },
        {
          "line": 8118,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,\"Exiting on error writing to the append-only file: %s\",strerror(errno));",
          "new_line_content": "         * aborting instead of giving the illusion that everything is",
          "content_same": false
        },
        {
          "line": 8120,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,\"Exiting on short write while writing to the append-only file: %s\",strerror(errno));",
          "new_line_content": "         if (nwritten == -1) {",
          "content_same": false
        },
        {
          "line": 8122,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "         exit(1);",
          "new_line_content": "         } else {",
          "content_same": false
        },
        {
          "line": 8124,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(server.aofbuf)",
          "new_text": null,
          "old_line_content": "    sdsfree(server.aofbuf);",
          "new_line_content": "         }",
          "content_same": false
        },
        {
          "line": 8135,
          "old_api": "aof_fsync",
          "new_api": null,
          "old_text": "aof_fsync(server.appendfd)",
          "new_text": null,
          "old_line_content": "        aof_fsync(server.appendfd); /* Let's try to get this data on the disk */",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 8141,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    sds buf = sdsempty();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 8150,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(seldb,sizeof(seldb),\"%d\",dictid)",
          "new_text": null,
          "old_line_content": "        snprintf(seldb,sizeof(seldb),\"%d\",dictid);",
          "new_line_content": "    if (dictid != server.appendseldb) {",
          "content_same": false
        },
        {
          "line": 8151,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(buf,\"*2\\r\\n$6\\r\\nSELECT\\r\\n$%lu\\r\\n%s\\r\\n\",\n            (unsigned long)strlen(seldb),seldb)",
          "new_text": null,
          "old_line_content": "        buf = sdscatprintf(buf,\"*2\\r\\n$6\\r\\nSELECT\\r\\n$%lu\\r\\n%s\\r\\n\",",
          "new_line_content": "        char seldb[64];",
          "content_same": false
        },
        {
          "line": 8152,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(seldb)",
          "new_text": null,
          "old_line_content": "            (unsigned long)strlen(seldb),seldb);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8161,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject(\"EXPIREAT\",8)",
          "new_text": null,
          "old_line_content": "        tmpargv[0] = createStringObject(\"EXPIREAT\",8);",
          "new_line_content": "    if (cmd->proc == expireCommand) {",
          "content_same": false
        },
        {
          "line": 8163,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(argv[1])",
          "new_text": null,
          "old_line_content": "        incrRefCount(argv[1]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8165,
          "old_api": "createObject",
          "new_api": null,
          "old_text": "createObject(REDIS_STRING,\n            sdscatprintf(sdsempty(),\"%ld\",when))",
          "new_text": null,
          "old_line_content": "        tmpargv[2] = createObject(REDIS_STRING,",
          "new_line_content": "        tmpargv[1] = argv[1];",
          "content_same": false
        },
        {
          "line": 8171,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(buf,\"*%d\\r\\n\",argc)",
          "new_text": null,
          "old_line_content": "    buf = sdscatprintf(buf,\"*%d\\r\\n\",argc);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 8175,
          "old_api": "getDecodedObject",
          "new_api": null,
          "old_text": "getDecodedObject(o)",
          "new_text": null,
          "old_line_content": "        o = getDecodedObject(o);",
          "new_line_content": "    for (j = 0; j < argc; j++) {",
          "content_same": false
        },
        {
          "line": 8176,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(o->ptr)",
          "new_text": null,
          "old_line_content": "        buf = sdscatprintf(buf,\"$%lu\\r\\n\",(unsigned long)sdslen(o->ptr));",
          "new_line_content": "        robj *o = argv[j];",
          "content_same": false
        },
        {
          "line": 8177,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(o->ptr)",
          "new_text": null,
          "old_line_content": "        buf = sdscatlen(buf,o->ptr,sdslen(o->ptr));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8185,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(argv[j])",
          "new_text": null,
          "old_line_content": "            decrRefCount(argv[j]);",
          "new_line_content": "    /* Free the objects from the modified argv for EXPIREAT */",
          "content_same": false
        },
        {
          "line": 8191,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(buf)",
          "new_text": null,
          "old_line_content": "    server.aofbuf = sdscatlen(server.aofbuf,buf,sdslen(buf));",
          "new_line_content": "    /* Append to the AOF buffer. This will be flushed on disk just before",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 585,
      "total_additions": 1403,
      "total_deletions": 1402,
      "total_api_changes": 3390
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 4,
        "api_related_lines": 3390,
        "non_api_lines": 1,
        "non_api_line_numbers": [
          3518
        ]
      }
    },
    "api_calls_before": 3077,
    "api_calls_after": 3078,
    "diff_info": {
      "added_lines": 4,
      "removed_lines": 1,
      "total_diff_lines": 17
    }
  }
}
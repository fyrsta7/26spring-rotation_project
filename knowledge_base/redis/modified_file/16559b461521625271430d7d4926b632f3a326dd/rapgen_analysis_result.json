{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/16559b461521625271430d7d4926b632f3a326dd",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/16559b461521625271430d7d4926b632f3a326dd/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/16559b461521625271430d7d4926b632f3a326dd/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/16559b461521625271430d7d4926b632f3a326dd/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 350,
          "old_api": "addReply",
          "new_api": "dbOverwrite",
          "old_text": "addReply(c,shared.crlf)",
          "new_text": "dbOverwrite(c->db,c->argv[1],new)",
          "old_line_content": "    addReply(c,shared.crlf);",
          "new_line_content": "            dbOverwrite(c->db,c->argv[1],new);",
          "content_same": false
        },
        {
          "line": 358,
          "old_api": "incrDecrCommand",
          "new_api": "addReply",
          "old_text": "incrDecrCommand(c,-1)",
          "new_text": "addReply(c,shared.colon)",
          "old_line_content": "    incrDecrCommand(c,-1);",
          "new_line_content": "    addReply(c,shared.colon);",
          "content_same": false
        },
        {
          "line": 364,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": "incrDecrCommand",
          "old_text": "getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL)",
          "new_text": "incrDecrCommand(c,1)",
          "old_line_content": "    if (getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL) != REDIS_OK) return;",
          "new_line_content": "    incrDecrCommand(c,1);",
          "content_same": false
        },
        {
          "line": 381,
          "old_api": "getLongDoubleFromObjectOrReply",
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": "getLongDoubleFromObjectOrReply(c,o,&value,NULL)",
          "new_text": "getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL)",
          "old_line_content": "    if (getLongDoubleFromObjectOrReply(c,o,&value,NULL) != REDIS_OK ||",
          "new_line_content": "    if (getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL) != REDIS_OK) return;",
          "content_same": false
        },
        {
          "line": 382,
          "old_api": "getLongDoubleFromObjectOrReply",
          "new_api": "incrDecrCommand",
          "old_text": "getLongDoubleFromObjectOrReply(c,c->argv[2],&incr,NULL)",
          "new_text": "incrDecrCommand(c,-incr)",
          "old_line_content": "        getLongDoubleFromObjectOrReply(c,c->argv[2],&incr,NULL) != REDIS_OK)",
          "new_line_content": "    incrDecrCommand(c,-incr);",
          "content_same": false
        },
        {
          "line": 392,
          "old_api": "dbOverwrite",
          "new_api": "getLongDoubleFromObjectOrReply",
          "old_text": "dbOverwrite(c->db,c->argv[1],new)",
          "new_text": "getLongDoubleFromObjectOrReply(c,c->argv[2],&incr,NULL)",
          "old_line_content": "        dbOverwrite(c->db,c->argv[1],new);",
          "new_line_content": "        getLongDoubleFromObjectOrReply(c,c->argv[2],&incr,NULL) != REDIS_OK)",
          "content_same": false
        },
        {
          "line": 396,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "isinf",
          "old_text": "notifyKeyspaceEvent(REDIS_NOTIFY_STRING,\"incrbyfloat\",c->argv[1],c->db->id)",
          "new_text": "isinf(value)",
          "old_line_content": "    notifyKeyspaceEvent(REDIS_NOTIFY_STRING,\"incrbyfloat\",c->argv[1],c->db->id);",
          "new_line_content": "    if (isnan(value) || isinf(value)) {",
          "content_same": false
        },
        {
          "line": 404,
          "old_api": "rewriteClientCommandArgument",
          "new_api": "dbAdd",
          "old_text": "rewriteClientCommandArgument(c,0,aux)",
          "new_text": "dbAdd(c->db,c->argv[1],new)",
          "old_line_content": "    rewriteClientCommandArgument(c,0,aux);",
          "new_line_content": "        dbAdd(c->db,c->argv[1],new);",
          "content_same": false
        },
        {
          "line": 405,
          "old_api": "decrRefCount",
          "new_api": "signalModifiedKey",
          "old_text": "decrRefCount(aux)",
          "new_text": "signalModifiedKey(c->db,c->argv[1])",
          "old_line_content": "    decrRefCount(aux);",
          "new_line_content": "    signalModifiedKey(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 406,
          "old_api": "rewriteClientCommandArgument",
          "new_api": "notifyKeyspaceEvent",
          "old_text": "rewriteClientCommandArgument(c,2,new)",
          "new_text": "notifyKeyspaceEvent(REDIS_NOTIFY_STRING,\"incrbyfloat\",c->argv[1],c->db->id)",
          "old_line_content": "    rewriteClientCommandArgument(c,2,new);",
          "new_line_content": "    notifyKeyspaceEvent(REDIS_NOTIFY_STRING,\"incrbyfloat\",c->argv[1],c->db->id);",
          "content_same": false
        },
        {
          "line": 413,
          "old_api": "lookupKeyWrite",
          "new_api": "createStringObject",
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": "createStringObject(\"SET\",3)",
          "old_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "    aux = createStringObject(\"SET\",3);",
          "content_same": false
        },
        {
          "line": 416,
          "old_api": "tryObjectEncoding",
          "new_api": "rewriteClientCommandArgument",
          "old_text": "tryObjectEncoding(c->argv[2])",
          "new_text": "rewriteClientCommandArgument(c,2,new)",
          "old_line_content": "        c->argv[2] = tryObjectEncoding(c->argv[2]);",
          "new_line_content": "    rewriteClientCommandArgument(c,2,new);",
          "content_same": false
        },
        {
          "line": 427,
          "old_api": "sdslen",
          "new_api": "dbAdd",
          "old_text": "sdslen(append->ptr)",
          "new_text": "dbAdd(c->db,c->argv[1],c->argv[2])",
          "old_line_content": "        totlen = stringObjectLen(o)+sdslen(append->ptr);",
          "new_line_content": "        dbAdd(c->db,c->argv[1],c->argv[2]);",
          "content_same": false
        },
        {
          "line": 428,
          "old_api": "checkStringLength",
          "new_api": "incrRefCount",
          "old_text": "checkStringLength(c,totlen)",
          "new_text": "incrRefCount(c->argv[2])",
          "old_line_content": "        if (checkStringLength(c,totlen) != REDIS_OK)",
          "new_line_content": "        incrRefCount(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 432,
          "old_api": "dbUnshareStringValue",
          "new_api": "checkType",
          "old_text": "dbUnshareStringValue(c->db,c->argv[1],o)",
          "new_text": "checkType(c,o,REDIS_STRING)",
          "old_line_content": "        o = dbUnshareStringValue(c->db,c->argv[1],o);",
          "new_line_content": "        if (checkType(c,o,REDIS_STRING))",
          "content_same": false
        },
        {
          "line": 437,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "sdslen",
          "old_text": "notifyKeyspaceEvent(REDIS_NOTIFY_STRING,\"append\",c->argv[1],c->db->id)",
          "new_text": "sdslen(append->ptr)",
          "old_line_content": "    notifyKeyspaceEvent(REDIS_NOTIFY_STRING,\"append\",c->argv[1],c->db->id);",
          "new_line_content": "        totlen = stringObjectLen(o)+sdslen(append->ptr);",
          "content_same": false
        },
        {
          "line": 444,
          "old_api": "lookupKeyReadOrReply",
          "new_api": "sdslen",
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "new_text": "sdslen(o->ptr)",
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "new_line_content": "        totlen = sdslen(o->ptr);",
          "content_same": false
        },
        {
          "line": 446,
          "old_api": "stringObjectLen",
          "new_api": "signalModifiedKey",
          "old_text": "stringObjectLen(o)",
          "new_text": "signalModifiedKey(c->db,c->argv[1])",
          "old_line_content": "    addReplyLongLong(c,stringObjectLen(o));",
          "new_line_content": "    signalModifiedKey(c->db,c->argv[1]);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 389,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "    }",
          "new_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 390,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,REDIS_STRING)",
          "old_line_content": "    new = createStringObjectFromLongDouble(value);",
          "new_line_content": "    if (o != NULL && checkType(c,o,REDIS_STRING)) return;",
          "content_same": false
        },
        {
          "line": 391,
          "old_api": null,
          "new_api": "getLongDoubleFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongDoubleFromObjectOrReply(c,o,&value,NULL)",
          "old_line_content": "    if (o)",
          "new_line_content": "    if (getLongDoubleFromObjectOrReply(c,o,&value,NULL) != REDIS_OK ||",
          "content_same": false
        },
        {
          "line": 397,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"increment would produce NaN or Infinity\")",
          "old_line_content": "    server.dirty++;",
          "new_line_content": "        addReplyError(c,\"increment would produce NaN or Infinity\");",
          "content_same": false
        },
        {
          "line": 402,
          "old_api": null,
          "new_api": "dbOverwrite",
          "old_text": null,
          "new_text": "dbOverwrite(c->db,c->argv[1],new)",
          "old_line_content": "     * will not create differences in replicas or after an AOF restart. */",
          "new_line_content": "        dbOverwrite(c->db,c->argv[1],new);",
          "content_same": false
        },
        {
          "line": 414,
          "old_api": null,
          "new_api": "rewriteClientCommandArgument",
          "old_text": null,
          "new_text": "rewriteClientCommandArgument(c,0,aux)",
          "old_line_content": "    if (o == NULL) {",
          "new_line_content": "    rewriteClientCommandArgument(c,0,aux);",
          "content_same": false
        },
        {
          "line": 415,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(aux)",
          "old_line_content": "        /* Create the key */",
          "new_line_content": "    decrRefCount(aux);",
          "content_same": false
        },
        {
          "line": 423,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "            return;",
          "new_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 426,
          "old_api": null,
          "new_api": "tryObjectEncoding",
          "old_text": null,
          "new_text": "tryObjectEncoding(c->argv[2])",
          "old_line_content": "        append = c->argv[2];",
          "new_line_content": "        c->argv[2] = tryObjectEncoding(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 429,
          "old_api": null,
          "new_api": "stringObjectLen",
          "old_text": null,
          "new_text": "stringObjectLen(c->argv[2])",
          "old_line_content": "            return;",
          "new_line_content": "        totlen = stringObjectLen(c->argv[2]);",
          "content_same": false
        },
        {
          "line": 438,
          "old_api": null,
          "new_api": "checkStringLength",
          "old_text": null,
          "new_text": "checkStringLength(c,totlen)",
          "old_line_content": "    server.dirty++;",
          "new_line_content": "        if (checkStringLength(c,totlen) != REDIS_OK)",
          "content_same": false
        },
        {
          "line": 442,
          "old_api": null,
          "new_api": "dbUnshareStringValue",
          "old_text": null,
          "new_text": "dbUnshareStringValue(c->db,c->argv[1],o)",
          "old_line_content": "void strlenCommand(redisClient *c) {",
          "new_line_content": "        o = dbUnshareStringValue(c->db,c->argv[1],o);",
          "content_same": false
        },
        {
          "line": 443,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(append->ptr)",
          "old_line_content": "    robj *o;",
          "new_line_content": "        o->ptr = sdscatlen(o->ptr,append->ptr,sdslen(append->ptr));",
          "content_same": false
        },
        {
          "line": 447,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(REDIS_NOTIFY_STRING,\"append\",c->argv[1],c->db->id)",
          "old_line_content": "}",
          "new_line_content": "    notifyKeyspaceEvent(REDIS_NOTIFY_STRING,\"append\",c->argv[1],c->db->id);",
          "content_same": false
        },
        {
          "line": 449,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,totlen)",
          "old_line_content": "",
          "new_line_content": "    addReplyLongLong(c,totlen);",
          "content_same": false
        },
        {
          "line": 454,
          "old_api": null,
          "new_api": "lookupKeyReadOrReply",
          "old_text": null,
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "old_line_content": "",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL ||",
          "content_same": false
        },
        {
          "line": 455,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,REDIS_STRING)",
          "old_line_content": "",
          "new_line_content": "        checkType(c,o,REDIS_STRING)) return;",
          "content_same": false
        },
        {
          "line": 456,
          "old_api": null,
          "new_api": "stringObjectLen",
          "old_text": null,
          "new_text": "stringObjectLen(o)",
          "old_line_content": "",
          "new_line_content": "    addReplyLongLong(c,stringObjectLen(o));",
          "content_same": false
        },
        {
          "line": 352,
          "old_api": null,
          "new_api": "dbAdd",
          "old_text": null,
          "new_text": "dbAdd(c->db,c->argv[1],new)",
          "old_line_content": "",
          "new_line_content": "            dbAdd(c->db,c->argv[1],new);",
          "content_same": false
        },
        {
          "line": 355,
          "old_api": null,
          "new_api": "signalModifiedKey",
          "old_text": null,
          "new_text": "signalModifiedKey(c->db,c->argv[1])",
          "old_line_content": "}",
          "new_line_content": "    signalModifiedKey(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 356,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(REDIS_NOTIFY_STRING,\"incrby\",c->argv[1],c->db->id)",
          "old_line_content": "",
          "new_line_content": "    notifyKeyspaceEvent(REDIS_NOTIFY_STRING,\"incrby\",c->argv[1],c->db->id);",
          "content_same": false
        },
        {
          "line": 360,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.crlf)",
          "old_line_content": "",
          "new_line_content": "    addReply(c,shared.crlf);",
          "content_same": false
        },
        {
          "line": 368,
          "old_api": null,
          "new_api": "incrDecrCommand",
          "old_text": null,
          "new_text": "incrDecrCommand(c,-1)",
          "old_line_content": "void decrbyCommand(redisClient *c) {",
          "new_line_content": "    incrDecrCommand(c,-1);",
          "content_same": false
        },
        {
          "line": 374,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL)",
          "old_line_content": "",
          "new_line_content": "    if (getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL) != REDIS_OK) return;",
          "content_same": false
        },
        {
          "line": 375,
          "old_api": null,
          "new_api": "incrDecrCommand",
          "old_text": null,
          "new_text": "incrDecrCommand(c,incr)",
          "old_line_content": "void incrbyfloatCommand(redisClient *c) {",
          "new_line_content": "    incrDecrCommand(c,incr);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 386,
          "old_api": "isinf",
          "new_api": null,
          "old_text": "isinf(value)",
          "new_text": null,
          "old_line_content": "    if (isnan(value) || isinf(value)) {",
          "new_line_content": "    long double incr, value;",
          "content_same": false
        },
        {
          "line": 387,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"increment would produce NaN or Infinity\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,\"increment would produce NaN or Infinity\");",
          "new_line_content": "    robj *o, *new, *aux;",
          "content_same": false
        },
        {
          "line": 394,
          "old_api": "dbAdd",
          "new_api": null,
          "old_text": "dbAdd(c->db,c->argv[1],new)",
          "new_text": null,
          "old_line_content": "        dbAdd(c->db,c->argv[1],new);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 395,
          "old_api": "signalModifiedKey",
          "new_api": null,
          "old_text": "signalModifiedKey(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    signalModifiedKey(c->db,c->argv[1]);",
          "new_line_content": "    value += incr;",
          "content_same": false
        },
        {
          "line": 403,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject(\"SET\",3)",
          "new_text": null,
          "old_line_content": "    aux = createStringObject(\"SET\",3);",
          "new_line_content": "    else",
          "content_same": false
        },
        {
          "line": 417,
          "old_api": "dbAdd",
          "new_api": null,
          "old_text": "dbAdd(c->db,c->argv[1],c->argv[2])",
          "new_text": null,
          "old_line_content": "        dbAdd(c->db,c->argv[1],c->argv[2]);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 418,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(c->argv[2])",
          "new_text": null,
          "old_line_content": "        incrRefCount(c->argv[2]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 419,
          "old_api": "stringObjectLen",
          "new_api": null,
          "old_text": "stringObjectLen(c->argv[2])",
          "new_text": null,
          "old_line_content": "        totlen = stringObjectLen(c->argv[2]);",
          "new_line_content": "void appendCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 422,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_STRING)",
          "new_text": null,
          "old_line_content": "        if (checkType(c,o,REDIS_STRING))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 433,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(append->ptr)",
          "new_text": null,
          "old_line_content": "        o->ptr = sdscatlen(o->ptr,append->ptr,sdslen(append->ptr));",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 434,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(o->ptr)",
          "new_text": null,
          "old_line_content": "        totlen = sdslen(o->ptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 436,
          "old_api": "signalModifiedKey",
          "new_api": null,
          "old_text": "signalModifiedKey(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    signalModifiedKey(c->db,c->argv[1]);",
          "new_line_content": "        append = c->argv[2];",
          "content_same": false
        },
        {
          "line": 439,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c,totlen)",
          "new_text": null,
          "old_line_content": "    addReplyLongLong(c,totlen);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 445,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_STRING)",
          "new_text": null,
          "old_line_content": "        checkType(c,o,REDIS_STRING)) return;",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 342,
          "old_api": "dbOverwrite",
          "new_api": null,
          "old_text": "dbOverwrite(c->db,c->argv[1],new)",
          "new_text": null,
          "old_line_content": "        dbOverwrite(c->db,c->argv[1],new);",
          "new_line_content": "        (value < 0 || value >= REDIS_SHARED_INTEGERS) &&",
          "content_same": false
        },
        {
          "line": 344,
          "old_api": "dbAdd",
          "new_api": null,
          "old_text": "dbAdd(c->db,c->argv[1],new)",
          "new_text": null,
          "old_line_content": "        dbAdd(c->db,c->argv[1],new);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 345,
          "old_api": "signalModifiedKey",
          "new_api": null,
          "old_text": "signalModifiedKey(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    signalModifiedKey(c->db,c->argv[1]);",
          "new_line_content": "        new = o;",
          "content_same": false
        },
        {
          "line": 346,
          "old_api": "notifyKeyspaceEvent",
          "new_api": null,
          "old_text": "notifyKeyspaceEvent(REDIS_NOTIFY_STRING,\"incrby\",c->argv[1],c->db->id)",
          "new_text": null,
          "old_line_content": "    notifyKeyspaceEvent(REDIS_NOTIFY_STRING,\"incrby\",c->argv[1],c->db->id);",
          "new_line_content": "        o->ptr = (void*)((long)value);",
          "content_same": false
        },
        {
          "line": 348,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.colon)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.colon);",
          "new_line_content": "        new = createStringObjectFromLongLong(value);",
          "content_same": false
        },
        {
          "line": 354,
          "old_api": "incrDecrCommand",
          "new_api": null,
          "old_text": "incrDecrCommand(c,1)",
          "new_text": null,
          "old_line_content": "    incrDecrCommand(c,1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 365,
          "old_api": "incrDecrCommand",
          "new_api": null,
          "old_text": "incrDecrCommand(c,incr)",
          "new_text": null,
          "old_line_content": "    incrDecrCommand(c,incr);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 371,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL)",
          "new_text": null,
          "old_line_content": "    if (getLongLongFromObjectOrReply(c, c->argv[2], &incr, NULL) != REDIS_OK) return;",
          "new_line_content": "void incrbyCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 372,
          "old_api": "incrDecrCommand",
          "new_api": null,
          "old_text": "incrDecrCommand(c,-incr)",
          "new_text": null,
          "old_line_content": "    incrDecrCommand(c,-incr);",
          "new_line_content": "    long long incr;",
          "content_same": false
        },
        {
          "line": 379,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "    long long incr;",
          "content_same": false
        },
        {
          "line": 380,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,REDIS_STRING)",
          "new_text": null,
          "old_line_content": "    if (o != NULL && checkType(c,o,REDIS_STRING)) return;",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 18,
      "total_additions": 25,
      "total_deletions": 25,
      "total_api_changes": 68
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 15,
        "api_related_lines": 68,
        "non_api_lines": 7,
        "non_api_line_numbers": [
          353,
          340,
          341,
          343,
          347,
          349,
          351
        ]
      }
    },
    "api_calls_before": 128,
    "api_calls_after": 128,
    "diff_info": {
      "added_lines": 15,
      "removed_lines": 5,
      "total_diff_lines": 32
    }
  }
}